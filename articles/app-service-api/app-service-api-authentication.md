---
title: "aaaAuthentication och auktorisering för API Apps i Azure App Service | Microsoft Docs"
description: "Läs mer om hello autentisering och auktorisering tjänster som Azure App Service tillhandahåller för API Apps."
services: app-service\api
documentationcenter: .net
author: alexkarcher-msft
manager: erikre
editor: 
ms.assetid: d620b53a-5a6f-41c9-84c7-f7ef5ff02ae7
ms.service: app-service-api
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 05/23/2016
ms.author: alkarche
ms.openlocfilehash: 6d26754b8b606ec232a74768787922ea80577c95
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: sv-SE
ms.lasthandoff: 10/06/2017
---
# <a name="authentication-and-authorization-for-api-apps-in-azure-app-service"></a><span data-ttu-id="c3c94-103">Autentisering och auktorisering för API Apps i Azure App Service</span><span class="sxs-lookup"><span data-stu-id="c3c94-103">Authentication and authorization for API Apps in Azure App Service</span></span>
## <a name="overview"></a><span data-ttu-id="c3c94-104">Översikt</span><span class="sxs-lookup"><span data-stu-id="c3c94-104">Overview</span></span>
> [!NOTE]
> <span data-ttu-id="c3c94-105">Det här avsnittet kommer att migrerade tooa konsoliderade [App Service autentisering / auktorisering](../app-service/app-service-authentication-overview.md) avsnittet, som omfattar webb-, mobil- och API Apps.</span><span class="sxs-lookup"><span data-stu-id="c3c94-105">This topic will be migrated tooa consolidated [App Service Authentication / Authorization](../app-service/app-service-authentication-overview.md) topic, which covers Web, Mobile, and API Apps.</span></span>
> 
> 

<span data-ttu-id="c3c94-106">Azure App Service erbjuder inbyggda autentisering och auktorisering services att implementera [OAuth 2.0](#oauth) och [OpenID Connect](#oauth).</span><span class="sxs-lookup"><span data-stu-id="c3c94-106">Azure App Service offers built-in authentication and authorization services that implement [OAuth 2.0](#oauth) and [OpenID Connect](#oauth).</span></span> <span data-ttu-id="c3c94-107">Den här artikeln beskriver hello tjänster och alternativ som är tillgängliga för API Apps i Azure App Service.</span><span class="sxs-lookup"><span data-stu-id="c3c94-107">This article describes hello services and options that are available for API Apps in Azure App Service.</span></span>

<span data-ttu-id="c3c94-108">hello följande diagram illustrerar vissa kännetecknar Apptjänst autentisering:</span><span class="sxs-lookup"><span data-stu-id="c3c94-108">hello following diagram illustrates some key characteristics of App Service authentication:</span></span>

* <span data-ttu-id="c3c94-109">Den preprocesses inkommande API-begäranden, vilket innebär att den fungerar med alla språk eller ramverk som stöds av App Service.</span><span class="sxs-lookup"><span data-stu-id="c3c94-109">It preprocesses incoming API requests, which means it works with any language or framework supported by App Service.</span></span>
* <span data-ttu-id="c3c94-110">Får du flera alternativ för hur mycket autentisering fungerar du vill toodo i din kod.</span><span class="sxs-lookup"><span data-stu-id="c3c94-110">It gives you several options for how much authentication work you want toodo in your own code.</span></span>
* <span data-ttu-id="c3c94-111">Det fungerar för både slutanvändare och autentiseringen av tjänsten.</span><span class="sxs-lookup"><span data-stu-id="c3c94-111">It works for both end user and service account authentication.</span></span> 
* <span data-ttu-id="c3c94-112">Den stöder fem identitetsleverantörer: Azure Active Directory, Facebook, Google, Twitter och Account.</span><span class="sxs-lookup"><span data-stu-id="c3c94-112">It supports five identity providers: Azure Active Directory, Facebook, Google, Twitter, and Microsoft Account.</span></span>
* <span data-ttu-id="c3c94-113">Det fungerar hello samma för API Apps, Webbappar och Mobilappar.</span><span class="sxs-lookup"><span data-stu-id="c3c94-113">It works hello same for API Apps, Web Apps, and Mobile Apps.</span></span>

![](./media/app-service-api-authentication/api-apps-overview.png)

## <a name="language-agnostic"></a><span data-ttu-id="c3c94-114">Oberoende av språk</span><span class="sxs-lookup"><span data-stu-id="c3c94-114">Language agnostic</span></span>
<span data-ttu-id="c3c94-115">Bearbetning av App Service-autentisering sker innan begäran når din API-app, vilket innebär att hello autentiseringsfunktioner fungerar för API-appar som skrivits i valfritt språk eller ramverk.</span><span class="sxs-lookup"><span data-stu-id="c3c94-115">App Service authentication processing happens before requests reach your API app, which means that hello authentication features work for API apps written in any language or framework.</span></span>  <span data-ttu-id="c3c94-116">Din API kan baseras på ASP.NET, Java, Node.js och alla ramverk som har stöd för Apptjänst.</span><span class="sxs-lookup"><span data-stu-id="c3c94-116">Your API can be based on ASP.NET, Java, Node.js, or any framework that App Service supports.</span></span>

<span data-ttu-id="c3c94-117">Apptjänst skickar på hello JSON web token (JWT) i hello Authorization-huvud för en HTTP-begäran och kod som skrivs i valfritt språk eller ramverk kan få hello information som behövs från hello token.</span><span class="sxs-lookup"><span data-stu-id="c3c94-117">App Service passes on hello JSON web token (JWT) in hello Authorization header of an HTTP request, and code written in any language or framework can get hello information it needs from hello token.</span></span> <span data-ttu-id="c3c94-118">Dessutom ger Apptjänst enklare åtkomst toohello vanligaste anspråk genom att ange vissa särskilda sidhuvud, till exempel hello följande:</span><span class="sxs-lookup"><span data-stu-id="c3c94-118">In addition, App Service gives you easier access toohello most commonly used claims by setting some special headers, such as hello following:</span></span>

* <span data-ttu-id="c3c94-119">X-MS-CLIENT--HUVUDNAMN</span><span class="sxs-lookup"><span data-stu-id="c3c94-119">X-MS-CLIENT-PRINCIPAL-NAME</span></span>
* <span data-ttu-id="c3c94-120">X-MS-CLIENT-SÄKERHETSOBJEKT-ID</span><span class="sxs-lookup"><span data-stu-id="c3c94-120">X-MS-CLIENT-PRINCIPAL-ID</span></span>
* <span data-ttu-id="c3c94-121">X-MS-TOKEN-FACEBOOK-ACCESS-TOKEN</span><span class="sxs-lookup"><span data-stu-id="c3c94-121">X-MS-TOKEN-FACEBOOK-ACCESS-TOKEN</span></span>
* <span data-ttu-id="c3c94-122">X-MS-TOKEN-FACEBOOK-EXPIRES-ON</span><span class="sxs-lookup"><span data-stu-id="c3c94-122">X-MS-TOKEN-FACEBOOK-EXPIRES-ON</span></span>

<span data-ttu-id="c3c94-123">I en .NET-API kan du använda hello `Authorize` attributet och för detaljerade auktorisering kan du enkelt skriva kod baserat på anspråk eftersom anspråk information fylls automatiskt i .NET-klasser.</span><span class="sxs-lookup"><span data-stu-id="c3c94-123">In a .NET API, you can use hello `Authorize` attribute, and for fine-grained authorization you can easily write code based on claims because claims information is populated for you in .NET classes.</span></span>

## <a name="multiple-protection-options"></a><span data-ttu-id="c3c94-124">Flera skyddsalternativ</span><span class="sxs-lookup"><span data-stu-id="c3c94-124">Multiple protection options</span></span>
<span data-ttu-id="c3c94-125">Apptjänst kan förhindra anonyma HTTP-begäranden från att nå din API-app, den kan vidarebefordra alla begäranden och validera token för begäranden som innehåller dem och kan via alla förfrågningar utan att någon åtgärd på dem:</span><span class="sxs-lookup"><span data-stu-id="c3c94-125">App Service can prevent anonymous HTTP requests from reaching your API app, it can pass on all requests and validate tokens for requests that include them, or it can let through all requests without taking any action on them:</span></span>

1. <span data-ttu-id="c3c94-126">Tillåt endast autentiserade begäranden tooreach API-appen.</span><span class="sxs-lookup"><span data-stu-id="c3c94-126">Allow only authenticated requests tooreach your API app.</span></span>
   
    <span data-ttu-id="c3c94-127">Om en anonym begäran tas emot från en webbläsare, App-tjänsten omdirigerar tooa inloggningssidan för hello autentiseringsprovidern (Azure AD, Google, Twitter, etc.) som du väljer.</span><span class="sxs-lookup"><span data-stu-id="c3c94-127">If an anonymous request is received from a browser, App Service will redirect tooa logon page for hello authentication provider (Azure AD, Google, Twitter, etc.) that you choose.</span></span> 
   
    <span data-ttu-id="c3c94-128">Med det här alternativet behöver du inte toowrite alla Autentiseringskod alls i din app och auktoriseringskod är förenklad eftersom hello viktigaste anspråk finns i hello HTTP-huvuden.</span><span class="sxs-lookup"><span data-stu-id="c3c94-128">With this option, you don't need toowrite any authentication code at all in your app, and authorization code is simplified because hello most important claims are provided in hello HTTP headers.</span></span>
2. <span data-ttu-id="c3c94-129">Tillåt alla begäranden tooreach API-appen, men Validera autentiserade begäranden och skickar vidare autentiseringsinformation i hello HTTP-huvuden.</span><span class="sxs-lookup"><span data-stu-id="c3c94-129">Allow all requests tooreach your API app, but validate authenticated requests and pass along authentication information in hello HTTP headers.</span></span>
   
    <span data-ttu-id="c3c94-130">Det här alternativet ger mer flexibilitet för hantering av anonyma begäranden, men du har toowrite kod om du vill tooprevent anonyma användare från att använda din API.</span><span class="sxs-lookup"><span data-stu-id="c3c94-130">This option gives you more flexibility in handling anonymous requests, but you have toowrite code if you want tooprevent anonymous users from using your API.</span></span> <span data-ttu-id="c3c94-131">Auktoriseringskoden är relativt enkel eftersom hello populäraste anspråk skickas i hello sidhuvuden för HTTP-begäranden.</span><span class="sxs-lookup"><span data-stu-id="c3c94-131">Since hello most popular claims are passed in hello headers of HTTP requests, authorization code is relatively simple.</span></span>
3. <span data-ttu-id="c3c94-132">Tillåt alla begäranden tooreach ditt API, inte vidtar någon åtgärd för autentisering på hello begäranden.</span><span class="sxs-lookup"><span data-stu-id="c3c94-132">Allow all requests tooreach your API, take no action on authentication information in hello requests.</span></span>
   
    <span data-ttu-id="c3c94-133">Det här alternativet lämnar hello uppgifterna för autentisering och auktorisering helt upp tooyour programkod.</span><span class="sxs-lookup"><span data-stu-id="c3c94-133">This option leaves hello tasks of authentication and authorization entirely up tooyour application code.</span></span>

<span data-ttu-id="c3c94-134">I hello [Azure-portalen](https://portal.azure.com/), du väljer hello alternativ på hello **autentisering / auktorisering** bladet.</span><span class="sxs-lookup"><span data-stu-id="c3c94-134">In hello [Azure portal](https://portal.azure.com/), you select hello option you want on hello **Authentication / Authorization** blade.</span></span>

![](./media/app-service-api-authentication/authblade.png)

<span data-ttu-id="c3c94-135">För alternativ 1 och 2 aktiverar **App autentiseringen av tjänsten**, och i hello **åtgärd tootake när begäran inte har autentiserats** listrutan Välj **logga in** eller **Tillåt begäran (ingen åtgärd)**.</span><span class="sxs-lookup"><span data-stu-id="c3c94-135">For options 1 and 2, turn on **App Service Authentication**, and in hello **Action tootake when request is not authenticated** drop-down list choose **Log in** or **Allow request (no action)**.</span></span>  <span data-ttu-id="c3c94-136">Om du väljer **logga in**, du har toochoose en autentiseringsprovider och konfigurera den providern.</span><span class="sxs-lookup"><span data-stu-id="c3c94-136">If you choose **Log in**, you have toochoose an authentication provider and configure that provider.</span></span>

![](./media/app-service-api-authentication/actiontotake.png)

<span data-ttu-id="c3c94-137">Detaljerad information om hur tooconfigure autentisering, se [hur tooconfigure Apptjänst programmet toouse Azure Active Directory inloggningen](../app-service-mobile/app-service-mobile-how-to-configure-active-directory-authentication.md).</span><span class="sxs-lookup"><span data-stu-id="c3c94-137">For detailed information about how tooconfigure authentication, see [How tooconfigure your App Service application toouse Azure Active Directory login](../app-service-mobile/app-service-mobile-how-to-configure-active-directory-authentication.md).</span></span> <span data-ttu-id="c3c94-138">den länkar tooother artiklar för hello andra autentiseringsproviders hello artikeln gäller tooAPI appar samt mobila appar.</span><span class="sxs-lookup"><span data-stu-id="c3c94-138">hello article applies tooAPI apps as well as mobile apps, and it links tooother articles for hello other authentication providers.</span></span>

## <span data-ttu-id="c3c94-139"><a id="internal"></a>Autentiseringen av tjänsten</span><span class="sxs-lookup"><span data-stu-id="c3c94-139"><a id="internal"></a> Service account authentication</span></span>
<span data-ttu-id="c3c94-140">Apptjänst autentisering fungerar för interna scenarier som för anropas från en API-app tooanother API-app.</span><span class="sxs-lookup"><span data-stu-id="c3c94-140">App Service authentication works for internal scenarios such as for calling from one API app tooanother API app.</span></span> <span data-ttu-id="c3c94-141">I det här scenariot hämta en token med hjälp av autentiseringsuppgifter för ett tjänstkonto i stället för autentiseringsuppgifter för användaren.</span><span class="sxs-lookup"><span data-stu-id="c3c94-141">In this scenario you get a token by using credentials for a service account instead of end user credentials.</span></span> <span data-ttu-id="c3c94-142">Ett tjänstkonto kallas även en *tjänstens huvudnamn* i Azure Active Directory och autentisering med sådant konto kallas även ett scenario med tjänst-till-tjänst.</span><span class="sxs-lookup"><span data-stu-id="c3c94-142">A service account is also known as a *service principal* in Azure Active Directory, and authentication using such an account is also known as a service-to-service scenario.</span></span> 

<span data-ttu-id="c3c94-143">Skydda hello kallas API-app med Azure Active Directory för scenarier med tjänst-till-tjänst och tillhandahålla en AAD service principal autentiseringstoken när du anropar hello API-app.</span><span class="sxs-lookup"><span data-stu-id="c3c94-143">For service-to-service scenarios, protect hello called API app by using Azure Active Directory, and provide an AAD service principal authorization token when you call hello API app.</span></span> <span data-ttu-id="c3c94-144">Du kan hämta en token genom att ange hello klient-ID och klientens hemliga från hello AAD-program.</span><span class="sxs-lookup"><span data-stu-id="c3c94-144">You get a token by providing hello client ID and client secret from hello AAD application.</span></span> <span data-ttu-id="c3c94-145">Ingen speciell endast Azure-kod är krävs, t.ex använda toobe sant för att hantera hello Mobile Services Zumo token.</span><span class="sxs-lookup"><span data-stu-id="c3c94-145">No special Azure-only code is required, such as used toobe true for handling hello Mobile Services Zumo token.</span></span> <span data-ttu-id="c3c94-146">Ett exempel på det här scenariot med ASP.NET API-appar som omfattas av hello kursen [Service principal autentisering för API Apps](app-service-api-dotnet-service-principal-auth.md).</span><span class="sxs-lookup"><span data-stu-id="c3c94-146">An example of this scenario using ASP.NET API apps is covered by hello tutorial [Service principal authentication for API Apps](app-service-api-dotnet-service-principal-auth.md).</span></span>

<span data-ttu-id="c3c94-147">Om du vill toohandle ett scenario med tjänst-till-tjänst utan att använda Apptjänst autentisering kan använda du klientcertifikat eller grundläggande autentisering.</span><span class="sxs-lookup"><span data-stu-id="c3c94-147">If you want toohandle a service-to-service scenario without using App Service authentication, you can use client certificates or basic authentication.</span></span> <span data-ttu-id="c3c94-148">Information om klientcertifikat i Azure finns [hur tooConfigure TLS ömsesidig autentisering för Web Apps](../app-service-web/app-service-web-configure-tls-mutual-auth.md).</span><span class="sxs-lookup"><span data-stu-id="c3c94-148">For information about client certificates in Azure, see [How tooConfigure TLS Mutual Authentication for Web Apps](../app-service-web/app-service-web-configure-tls-mutual-auth.md).</span></span> <span data-ttu-id="c3c94-149">Information om grundläggande autentisering i ASP.NET finns [autentisering filter i ASP.NET Web API 2](http://www.asp.net/web-api/overview/security/authentication-filters).</span><span class="sxs-lookup"><span data-stu-id="c3c94-149">For information about basic authentication in ASP.NET, see [Authentication Filters in ASP.NET Web API 2](http://www.asp.net/web-api/overview/security/authentication-filters).</span></span>

<span data-ttu-id="c3c94-150">Autentiseringen av tjänsten konto från en Apptjänst logic app tooan API-app är ett specialfall som beskrivs i [använda anpassat API som finns på Apptjänst med Logic apps](../logic-apps/logic-apps-custom-hosted-api.md).</span><span class="sxs-lookup"><span data-stu-id="c3c94-150">Service account authentication from an App Service logic app tooan API app is a special case that is explained in [Using your custom API hosted on App Service with Logic apps](../logic-apps/logic-apps-custom-hosted-api.md).</span></span>

## <a name="mobile-client-authentication"></a><span data-ttu-id="c3c94-151">Mobila klientautentisering</span><span class="sxs-lookup"><span data-stu-id="c3c94-151">Mobile client authentication</span></span>
<span data-ttu-id="c3c94-152">Information om hur toohandle autentisering från mobila klienter, se hello [dokumentation om autentisering för mobila appar](../app-service-mobile/app-service-mobile-ios-get-started-users.md).</span><span class="sxs-lookup"><span data-stu-id="c3c94-152">For information about how toohandle authentication from mobile clients, see hello [documentation on authentication for mobile apps](../app-service-mobile/app-service-mobile-ios-get-started-users.md).</span></span> <span data-ttu-id="c3c94-153">Apptjänst autentisering fungerar hello samma sätt för mobilappar och API apps.</span><span class="sxs-lookup"><span data-stu-id="c3c94-153">App Service authentication works hello same way for mobile apps and API apps.</span></span>

## <a name="more-information"></a><span data-ttu-id="c3c94-154">Mer information</span><span class="sxs-lookup"><span data-stu-id="c3c94-154">More information</span></span>
<span data-ttu-id="c3c94-155">Mer information om autentisering och auktorisering i Azure App Service finns hello följande resurser:</span><span class="sxs-lookup"><span data-stu-id="c3c94-155">For more information about authentication and authorization in Azure App Service, see hello following resources:</span></span>

* [<span data-ttu-id="c3c94-156">Expanderande Apptjänst autentisering / auktorisering</span><span class="sxs-lookup"><span data-stu-id="c3c94-156">Expanding App Service authentication / authorization</span></span>](https://azure.microsoft.com/blog/announcing-app-service-authentication-authorization/)
* <span data-ttu-id="c3c94-157">[Hur tooconfigure Apptjänst programmet toouse Azure Active Directory inloggningen](../app-service-mobile/app-service-mobile-how-to-configure-active-directory-authentication.md) (omfattar länkar för andra autentiseringsproviders hello överst på hello sidan.)</span><span class="sxs-lookup"><span data-stu-id="c3c94-157">[How tooconfigure your App Service application toouse Azure Active Directory login](../app-service-mobile/app-service-mobile-how-to-configure-active-directory-authentication.md) (Includes links for other authentication providers at hello top of hello page.)</span></span> 

<span data-ttu-id="c3c94-158">Mer information om OAuth 2.0, OpenID Connect och token JWT (JSON Web) finns i hello följande resurser.</span><span class="sxs-lookup"><span data-stu-id="c3c94-158">For more information about OAuth 2.0, OpenID Connect, and JSON Web Tokens (JWT), see hello following resources.</span></span>

* [<span data-ttu-id="c3c94-159">Komma igång med OAuth 2.0</span><span class="sxs-lookup"><span data-stu-id="c3c94-159">Getting started with OAuth 2.0</span></span>](http://shop.oreilly.com/product/0636920021810.do "komma igång med OAuth 2.0") 
* [<span data-ttu-id="c3c94-160">Introduktion tooOAuth2 OpenID Connect och JSON Web token (JWT) - Pluralsight kursen</span><span class="sxs-lookup"><span data-stu-id="c3c94-160">Introduction tooOAuth2, OpenID Connect and JSON Web Tokens (JWT) - Pluralsight Course</span></span>](http://www.pluralsight.com/courses/oauth2-json-web-tokens-openid-connect-introduction) 
* [<span data-ttu-id="c3c94-161">Bygga och skydda en RESTful-API för flera klienter i ASP.NET - Pluralsight kursen</span><span class="sxs-lookup"><span data-stu-id="c3c94-161">Building and Securing a RESTful API for Multiple Clients in ASP.NET - Pluralsight course</span></span>](http://www.pluralsight.com/courses/building-securing-restful-api-aspdotnet)

<span data-ttu-id="c3c94-162">Mer information om Azure Active Directory finns i hello följande resurser.</span><span class="sxs-lookup"><span data-stu-id="c3c94-162">For more information about Azure Active Directory, see hello following resources.</span></span>

* [<span data-ttu-id="c3c94-163">Azure AD-scenarier</span><span class="sxs-lookup"><span data-stu-id="c3c94-163">Azure AD scenarios</span></span>](http://aka.ms/aadscenarios)
* [<span data-ttu-id="c3c94-164">Azure AD-utvecklarhandboken</span><span class="sxs-lookup"><span data-stu-id="c3c94-164">Azure AD developers' guide</span></span>](http://aka.ms/aaddev)
* [<span data-ttu-id="c3c94-165">Azure AD-exempel</span><span class="sxs-lookup"><span data-stu-id="c3c94-165">Azure AD samples</span></span>](http://aka.ms/aadsamples)

## <a name="next-steps"></a><span data-ttu-id="c3c94-166">Nästa steg</span><span class="sxs-lookup"><span data-stu-id="c3c94-166">Next steps</span></span>
<span data-ttu-id="c3c94-167">Den här artikeln har beskrivs funktioner för autentisering och auktorisering i Apptjänst som du kan använda för API apps.</span><span class="sxs-lookup"><span data-stu-id="c3c94-167">This article has explained authentication and authorization features of App Service that you can use for API apps.</span></span> <span data-ttu-id="c3c94-168">hello nästa kurs i hello komma igång serien visar hur tooimplement [användarautentisering i API Apps i Apptjänst](app-service-api-dotnet-user-principal-auth.md).</span><span class="sxs-lookup"><span data-stu-id="c3c94-168">hello next tutorial in hello getting started series shows how tooimplement [user authentication in App Service API Apps](app-service-api-dotnet-user-principal-auth.md).</span></span>


---
title: Kontinuerlig integration i VS Team Services med Azure-resursgruppsprojekt | Microsoft Docs
description: "Beskriver hur du ställer in kontinuerlig integration i Visual Studio Team Services med hjälp av projekt för distribution av Azure-resursgrupp i Visual Studio."
services: visual-studio-online
documentationcenter: na
author: mlearned
manager: erickson-doug
editor: 
ms.assetid: b81c172a-be87-4adc-861e-d20b94be9e38
ms.service: azure-resource-manager
ms.devlang: multiple
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: na
ms.date: 08/01/2016
ms.author: mlearned
ms.openlocfilehash: e7d98ca3fa281a136595c37ed9b7e71de0cf7bff
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: sv-SE
ms.lasthandoff: 07/11/2017
---
# <a name="continuous-integration-in-visual-studio-team-services-using-azure-resource-group-deployment-projects"></a><span data-ttu-id="d7be8-103">Kontinuerlig integration i Visual Studio Team Services med hjälp av projekt för distribution av Azure-resursgrupp</span><span class="sxs-lookup"><span data-stu-id="d7be8-103">Continuous integration in Visual Studio Team Services using Azure Resource Group deployment projects</span></span>
<span data-ttu-id="d7be8-104">För att distribuera en Azure-mall måste du utföra uppgifter i olika faser: skapa, testa, kopiera till Azure (kallas även ”mellanlagring”) och distribuerar mallen.</span><span class="sxs-lookup"><span data-stu-id="d7be8-104">To deploy an Azure template, you perform tasks in various stages: Build, Test, Copy to Azure (also called "Staging"), and Deploy Template.</span></span> <span data-ttu-id="d7be8-105">Det finns två olika sätt att distribuera mallar till Visual Studio Team Services (VS Team Services).</span><span class="sxs-lookup"><span data-stu-id="d7be8-105">There are two different ways to deploy templates to Visual Studio Team Services (VS Team Services).</span></span> <span data-ttu-id="d7be8-106">Båda metoderna ger samma resultat, så Välj det alternativ som passar bäst för ditt arbetsflöde.</span><span class="sxs-lookup"><span data-stu-id="d7be8-106">Both methods provide the same results, so choose the one that best fits your workflow.</span></span>

1. <span data-ttu-id="d7be8-107">Lägga till ett enda steg i din build-definition som kör PowerShell-skript som ingår i Azure-resursgrupp distributionsprojekt (distribuera AzureResourceGroup.ps1).</span><span class="sxs-lookup"><span data-stu-id="d7be8-107">Add a single step to your build definition that runs the PowerShell script that’s included in the Azure Resource Group deployment project (Deploy-AzureResourceGroup.ps1).</span></span> <span data-ttu-id="d7be8-108">Skriptet kopierar artefakter och distribuerar mallen.</span><span class="sxs-lookup"><span data-stu-id="d7be8-108">The script copies artifacts and then deploys the template.</span></span>
2. <span data-ttu-id="d7be8-109">Lägga till flera VS Team Services skapa steg, var och en utförs steget.</span><span class="sxs-lookup"><span data-stu-id="d7be8-109">Add multiple VS Team Services build steps, each one performing a stage task.</span></span>

<span data-ttu-id="d7be8-110">Den här artikeln visar båda alternativen.</span><span class="sxs-lookup"><span data-stu-id="d7be8-110">This article demonstrates both options.</span></span> <span data-ttu-id="d7be8-111">Det första alternativet har fördelen med att använda samma skript används av utvecklare i Visual Studio och ger konsekvens i hela livscykeln.</span><span class="sxs-lookup"><span data-stu-id="d7be8-111">The first option has the advantage of using the same script used by developers in Visual Studio and providing consistency throughout the lifecycle.</span></span> <span data-ttu-id="d7be8-112">Det andra alternativet är ett praktiskt alternativ till det inbyggda skriptet.</span><span class="sxs-lookup"><span data-stu-id="d7be8-112">The second option offers a convenient alternative to the built-in script.</span></span> <span data-ttu-id="d7be8-113">Båda procedurer förutsätter att du redan har ett projekt för distribution av Visual Studio checkas in VS Team Services.</span><span class="sxs-lookup"><span data-stu-id="d7be8-113">Both procedures assume you already have a Visual Studio deployment project checked into VS Team Services.</span></span>

## <a name="copy-artifacts-to-azure"></a><span data-ttu-id="d7be8-114">Kopiera artefakter till Azure</span><span class="sxs-lookup"><span data-stu-id="d7be8-114">Copy artifacts to Azure</span></span>
<span data-ttu-id="d7be8-115">Oavsett scenario, om du har alla artefakter som behövs för malldistribution, måste du ge Azure Resource Manager åtkomst till dem.</span><span class="sxs-lookup"><span data-stu-id="d7be8-115">Regardless of the scenario, if you have any artifacts that are needed for template deployment, you must give Azure Resource Manager access to them.</span></span> <span data-ttu-id="d7be8-116">Dessa artefakter kan innehålla filer som:</span><span class="sxs-lookup"><span data-stu-id="d7be8-116">These artifacts can include files such as:</span></span>

* <span data-ttu-id="d7be8-117">Kapslade mallar</span><span class="sxs-lookup"><span data-stu-id="d7be8-117">Nested templates</span></span>
* <span data-ttu-id="d7be8-118">Konfigurationsskript och DSC-skript</span><span class="sxs-lookup"><span data-stu-id="d7be8-118">Configuration scripts and DSC scripts</span></span>
* <span data-ttu-id="d7be8-119">Binärfiler</span><span class="sxs-lookup"><span data-stu-id="d7be8-119">Application binaries</span></span>

### <a name="nested-templates-and-configuration-scripts"></a><span data-ttu-id="d7be8-120">Kapslade mallar och konfigurationsskript</span><span class="sxs-lookup"><span data-stu-id="d7be8-120">Nested Templates and Configuration Scripts</span></span>
<span data-ttu-id="d7be8-121">När du använder mallar som ingår i Visual Studio (eller skapats med Visual Studio kodavsnitt) PowerShell-skriptet skapar inte bara artefakter, den också parameterizes URI för resurser för olika distributioner.</span><span class="sxs-lookup"><span data-stu-id="d7be8-121">When you use the templates provided by Visual Studio (or built with Visual Studio snippets), the PowerShell script not only stages the artifacts, it also parameterizes the URI for the resources for different deployments.</span></span> <span data-ttu-id="d7be8-122">Skriptet och sedan kopierar artefakter till en säker behållare i Azure, skapas en SaS-token för behållaren och skickar sedan informationen in malldistributionen.</span><span class="sxs-lookup"><span data-stu-id="d7be8-122">The script then copies the artifacts to a secure container in Azure, creates a SaS token for that container, and then passes that information on to the template deployment.</span></span> <span data-ttu-id="d7be8-123">Se [skapar en för malldistribution](https://msdn.microsoft.com/library/azure/dn790564.aspx) lära dig mer om kapslade mallar.</span><span class="sxs-lookup"><span data-stu-id="d7be8-123">See [Create a template deployment](https://msdn.microsoft.com/library/azure/dn790564.aspx) to learn more about nested templates.</span></span>  <span data-ttu-id="d7be8-124">När du använder uppgifter i VS Team Services, måste du väljer lämpliga uppgifter för din för malldistribution och eventuellt ange parametervärden från fristående steg mall-distributionen.</span><span class="sxs-lookup"><span data-stu-id="d7be8-124">When using tasks in VS Team Services, you must select the appropriate tasks for your template deployment and if necessary, pass parameter values from the staging step to the template deployment.</span></span>

## <a name="set-up-continuous-deployment-in-vs-team-services"></a><span data-ttu-id="d7be8-125">Ställ in kontinuerlig distribution i VS Team Services</span><span class="sxs-lookup"><span data-stu-id="d7be8-125">Set up continuous deployment in VS Team Services</span></span>
<span data-ttu-id="d7be8-126">För att anropa PowerShell-skriptet i VS Team Services, som du behöver uppdatera din build-definition.</span><span class="sxs-lookup"><span data-stu-id="d7be8-126">To call the PowerShell script in VS Team Services, you need to update your build definition.</span></span> <span data-ttu-id="d7be8-127">I korthet består av följande steg:</span><span class="sxs-lookup"><span data-stu-id="d7be8-127">In brief, the steps are:</span></span> 

1. <span data-ttu-id="d7be8-128">Redigera build-definition.</span><span class="sxs-lookup"><span data-stu-id="d7be8-128">Edit the build definition.</span></span>
2. <span data-ttu-id="d7be8-129">Ställ in Azure auktorisering VS Team Services.</span><span class="sxs-lookup"><span data-stu-id="d7be8-129">Set up Azure authorization in VS Team Services.</span></span>
3. <span data-ttu-id="d7be8-130">Lägg till ett Azure PowerShell build steg som refererar till PowerShell-skript i distributionsprojektet för Azure-resursgrupp.</span><span class="sxs-lookup"><span data-stu-id="d7be8-130">Add an Azure PowerShell build step that references the PowerShell script in the Azure Resource Group deployment project.</span></span>
4. <span data-ttu-id="d7be8-131">Ange värdet för den *- ArtifactsStagingDirectory* parametern för att arbeta med ett projekt som skapats i VS Team Services.</span><span class="sxs-lookup"><span data-stu-id="d7be8-131">Set the value of the *-ArtifactsStagingDirectory* parameter to work with a project built in VS Team Services.</span></span>

### <a name="detailed-walkthrough-for-option-1"></a><span data-ttu-id="d7be8-132">Detaljerad genomgång av alternativ 1</span><span class="sxs-lookup"><span data-stu-id="d7be8-132">Detailed walkthrough for Option 1</span></span>
<span data-ttu-id="d7be8-133">Följande procedurer för att gå igenom stegen för att konfigurera kontinuerlig distribution i VS Team Services med hjälp av en enskild aktivitet som kör PowerShell-skriptet i projektet.</span><span class="sxs-lookup"><span data-stu-id="d7be8-133">The following procedures walk you through the steps necessary to configure continuous deployment in VS Team Services using a single task that runs the PowerShell script in your project.</span></span> 

1. <span data-ttu-id="d7be8-134">Redigera din VS Team Services build-definition och lägger till en Azure PowerShell build-steget.</span><span class="sxs-lookup"><span data-stu-id="d7be8-134">Edit your VS Team Services build definition and add an Azure PowerShell build step.</span></span> <span data-ttu-id="d7be8-135">Välj build-definition under den **skapa definitioner** kategori och välj sedan den **redigera** länk.</span><span class="sxs-lookup"><span data-stu-id="d7be8-135">Choose the build definition under the **Build definitions** category and then choose the **Edit** link.</span></span>
   
   ![Redigera definition av build][0]
2. <span data-ttu-id="d7be8-137">Lägg till en ny **Azure PowerShell** skapa steg för att skapa definition och välj sedan den **Lägg till build steg...**</span><span class="sxs-lookup"><span data-stu-id="d7be8-137">Add a new **Azure PowerShell** build step to the build definition and then choose the **Add build step…**</span></span> <span data-ttu-id="d7be8-138">till.</span><span class="sxs-lookup"><span data-stu-id="d7be8-138">button.</span></span>
   
   ![Lägg till build steg][1]
3. <span data-ttu-id="d7be8-140">Välj den **distribuera aktiviteten** kategori, Välj den **Azure PowerShell** uppgift och välj sedan dess **Lägg till** knappen.</span><span class="sxs-lookup"><span data-stu-id="d7be8-140">Choose the **Deploy task** category, select the **Azure PowerShell** task, and then choose its **Add** button.</span></span>
   
   ![Lägg till aktiviteter][2]
4. <span data-ttu-id="d7be8-142">Välj den **Azure PowerShell** skapa steg och fyll sedan i dess värden.</span><span class="sxs-lookup"><span data-stu-id="d7be8-142">Choose the **Azure PowerShell** build step and then fill in its values.</span></span>
   
   1. <span data-ttu-id="d7be8-143">Om du redan har en Azure-tjänst-slutpunkt som lagts till i VS Team Services väljer du prenumerationen som den **Azure-prenumeration** nedrullningsbara listrutan och sedan hoppar du till nästa avsnitt.</span><span class="sxs-lookup"><span data-stu-id="d7be8-143">If you already have an Azure service endpoint added to VS Team Services, choose the subscription in the **Azure Subscription** drop-down list box and then skip to the next section.</span></span> 
      
      <span data-ttu-id="d7be8-144">Om du inte har en Azure-tjänsteslutpunkt i VS Team Services, måste du lägga till en.</span><span class="sxs-lookup"><span data-stu-id="d7be8-144">If you don’t have an Azure service endpoint in VS Team Services, you need to add one.</span></span> <span data-ttu-id="d7be8-145">Detta underavsnitt tar dig igenom processen.</span><span class="sxs-lookup"><span data-stu-id="d7be8-145">This subsection takes you through the process.</span></span> <span data-ttu-id="d7be8-146">Om ditt Azure-konto använder ett microsoftkonto (till exempel Hotmail), måste du utföra följande steg för att hämta ett huvudnamn för tjänsten-autentisering.</span><span class="sxs-lookup"><span data-stu-id="d7be8-146">If your Azure account uses a Microsoft account (such as Hotmail), you must take the following steps to get a Service Principal authentication.</span></span>
   2. <span data-ttu-id="d7be8-147">Välj den **hantera** länka bredvid den **Azure-prenumeration** nedrullningsbara listrutan.</span><span class="sxs-lookup"><span data-stu-id="d7be8-147">Choose the **Manage** link next to the **Azure Subscription** drop-down list box.</span></span>
      
      ![Hantera Azure-prenumerationer][3]
   3. <span data-ttu-id="d7be8-149">Välj **Azure** i den **nya tjänstslutpunkten** nedrullningsbara listrutan.</span><span class="sxs-lookup"><span data-stu-id="d7be8-149">Choose **Azure** in the **New Service Endpoint** drop-down list box.</span></span>
      
      ![Nya tjänstslutpunkten][4]
   4. <span data-ttu-id="d7be8-151">I den **Lägg till Azure-prenumeration** dialogrutan markerar du den **tjänstens huvudnamn** alternativet.</span><span class="sxs-lookup"><span data-stu-id="d7be8-151">In the **Add Azure Subscription** dialog box, select the **Service Principal** option.</span></span>
      
      ![Tjänstens huvudnamn alternativet][5]
   5. <span data-ttu-id="d7be8-153">Lägga till din Azure-prenumerationsinformation på den **Lägg till Azure-prenumeration** dialogrutan.</span><span class="sxs-lookup"><span data-stu-id="d7be8-153">Add your Azure subscription information to the **Add Azure Subscription** dialog box.</span></span> <span data-ttu-id="d7be8-154">Du måste ange följande:</span><span class="sxs-lookup"><span data-stu-id="d7be8-154">You need to provide the following items:</span></span>
      
      * <span data-ttu-id="d7be8-155">Prenumerations-Id</span><span class="sxs-lookup"><span data-stu-id="d7be8-155">Subscription Id</span></span>
      * <span data-ttu-id="d7be8-156">Prenumerationsnamn</span><span class="sxs-lookup"><span data-stu-id="d7be8-156">Subscription Name</span></span>
      * <span data-ttu-id="d7be8-157">Tjänstens huvudnamn Id</span><span class="sxs-lookup"><span data-stu-id="d7be8-157">Service Principal Id</span></span>
      * <span data-ttu-id="d7be8-158">Tjänstens huvudnamn nyckel</span><span class="sxs-lookup"><span data-stu-id="d7be8-158">Service Principal Key</span></span>
      * <span data-ttu-id="d7be8-159">Klient-Id</span><span class="sxs-lookup"><span data-stu-id="d7be8-159">Tenant Id</span></span>
   6. <span data-ttu-id="d7be8-160">Lägga till ett namn för ditt val att den **prenumeration** namnrutan.</span><span class="sxs-lookup"><span data-stu-id="d7be8-160">Add a name of your choice to the **Subscription** name box.</span></span> <span data-ttu-id="d7be8-161">Det här värdet senare visas i den **Azure-prenumeration** listrutan i VS Team Services.</span><span class="sxs-lookup"><span data-stu-id="d7be8-161">This value appears later in the **Azure Subscription** drop-down list in VS Team Services.</span></span> 
   7. <span data-ttu-id="d7be8-162">Om du inte vet Azure prenumerations-ID, kan du använda något av följande kommandon för att hämta den.</span><span class="sxs-lookup"><span data-stu-id="d7be8-162">If you don’t know your Azure subscription ID, you can use one of the following commands to retrieve it.</span></span>
      
      <span data-ttu-id="d7be8-163">Använd för PowerShell-skript:</span><span class="sxs-lookup"><span data-stu-id="d7be8-163">For PowerShell scripts, use:</span></span>
      
      `Get-AzureRmSubscription`
      
      <span data-ttu-id="d7be8-164">Om du använder Azure CLI använder du:</span><span class="sxs-lookup"><span data-stu-id="d7be8-164">For Azure CLI, use:</span></span>
      
      `azure account show`
   8. <span data-ttu-id="d7be8-165">Hämta ett huvudnamn för tjänsten ID, Service Principal Key och klient-ID, Följ proceduren i [Skapa Active Directory-program och tjänstens huvudnamn med hjälp av portalen](resource-group-create-service-principal-portal.md) eller [autentiserar ett huvudnamn för tjänsten med Azure Hanteraren för filserverresurser](resource-group-authenticate-service-principal.md).</span><span class="sxs-lookup"><span data-stu-id="d7be8-165">To get a Service Principal ID, Service Principal Key, and Tenant ID, follow the procedure in [Create Active Directory application and service principal using portal](resource-group-create-service-principal-portal.md) or [Authenticating a service principal with Azure Resource Manager](resource-group-authenticate-service-principal.md).</span></span>
   9. <span data-ttu-id="d7be8-166">Lägg till värden för tjänstens huvudnamn ID, Service Principal Key och klient-ID i den **Lägg till Azure-prenumeration** dialogrutan rutan och välj sedan den **OK** knappen.</span><span class="sxs-lookup"><span data-stu-id="d7be8-166">Add the Service Principal ID, Service Principal Key, and Tenant ID values to the **Add Azure Subscription** dialog box and then choose the **OK** button.</span></span>
      
      <span data-ttu-id="d7be8-167">Nu har du ett giltigt huvudnamn för tjänsten för att köra Azure PowerShell-skript med.</span><span class="sxs-lookup"><span data-stu-id="d7be8-167">You now have a valid Service Principal to use to run the Azure PowerShell script.</span></span>
5. <span data-ttu-id="d7be8-168">Redigera build-definition och väljer den **Azure PowerShell** skapa steg.</span><span class="sxs-lookup"><span data-stu-id="d7be8-168">Edit the build definition and choose the **Azure PowerShell** build step.</span></span> <span data-ttu-id="d7be8-169">Välj prenumerationen som den **Azure-prenumeration** nedrullningsbara listrutan.</span><span class="sxs-lookup"><span data-stu-id="d7be8-169">Select the subscription in the **Azure Subscription** drop-down list box.</span></span> <span data-ttu-id="d7be8-170">(Om prenumerationen inte visas, väljer du den **uppdatera** knappen bredvid den **hantera** länken.)</span><span class="sxs-lookup"><span data-stu-id="d7be8-170">(If the subscription doesn't appear, choose the **Refresh** button next the **Manage** link.)</span></span> 
   
   ![Konfigurera Azure PowerShell build-aktivitet][8]
6. <span data-ttu-id="d7be8-172">Ange en sökväg till distribuera AzureResourceGroup.ps1 PowerShell-skript.</span><span class="sxs-lookup"><span data-stu-id="d7be8-172">Provide a path to the Deploy-AzureResourceGroup.ps1 PowerShell script.</span></span> <span data-ttu-id="d7be8-173">Om du vill göra det, väljer du på ellipsknappen (...) bredvid den **skriptsökvägen** går du till distribuera AzureResourceGroup.ps1 PowerShell-skriptet i den **skript** mapp i ditt projekt, markerar du den, och sedan Välj den **OK** knappen.</span><span class="sxs-lookup"><span data-stu-id="d7be8-173">To do this, choose the ellipsis (…) button next to the **Script Path** box, navigate to the Deploy-AzureResourceGroup.ps1 PowerShell script in the **Scripts** folder of your project, select it, and then choose the **OK** button.</span></span>    
   
   ![Välj en sökväg till skript][9]
7. <span data-ttu-id="d7be8-175">När du väljer du skriptet uppdaterar du sökvägen till skriptet så att den körs från Build.StagingDirectory (samma katalog som *ArtifactsLocation* har angetts till).</span><span class="sxs-lookup"><span data-stu-id="d7be8-175">After you select the script, update the path to the script so that it’s run from the Build.StagingDirectory (the same directory that *ArtifactsLocation* is set to).</span></span> <span data-ttu-id="d7be8-176">Du kan göra detta genom att lägga till ”$(Build.StagingDirectory)/” till början av sökvägen för skriptet.</span><span class="sxs-lookup"><span data-stu-id="d7be8-176">You can do this by adding “$(Build.StagingDirectory)/” to the beginning of the script path.</span></span>
   
    ![Redigera sökvägen till skriptet][10]
8. <span data-ttu-id="d7be8-178">I den **skriptargument** ange följande parametrar (i en enda rad).</span><span class="sxs-lookup"><span data-stu-id="d7be8-178">In the **Script Arguments** box, enter the following parameters (in a single line).</span></span> <span data-ttu-id="d7be8-179">När du kör skriptet i Visual Studio kan du se hur VS använder parametrar i den **utdata** fönster.</span><span class="sxs-lookup"><span data-stu-id="d7be8-179">When you run the script in Visual Studio, you can see how VS uses the parameters in the **Output** window.</span></span> <span data-ttu-id="d7be8-180">Du kan använda den som en startpunkt för att ange parametervärden i build-steget.</span><span class="sxs-lookup"><span data-stu-id="d7be8-180">You can use this as a starting point for setting the parameter values in your build step.</span></span>
   
   | <span data-ttu-id="d7be8-181">Parameter</span><span class="sxs-lookup"><span data-stu-id="d7be8-181">Parameter</span></span> | <span data-ttu-id="d7be8-182">Beskrivning</span><span class="sxs-lookup"><span data-stu-id="d7be8-182">Description</span></span> |
   | --- | --- |
   | <span data-ttu-id="d7be8-183">-ResourceGroupLocation</span><span class="sxs-lookup"><span data-stu-id="d7be8-183">-ResourceGroupLocation</span></span> |<span data-ttu-id="d7be8-184">Värdet geografiska plats där resursgruppen finns, som **eastus** eller **'Östra USA'**.</span><span class="sxs-lookup"><span data-stu-id="d7be8-184">The geo-location value where the resource group is located, such as **eastus** or **'East US'**.</span></span> <span data-ttu-id="d7be8-185">(Lägga till enkla citattecken om namnet är ett blanksteg.) Se [Azure-regioner](https://azure.microsoft.com/en-us/regions/) för mer information.</span><span class="sxs-lookup"><span data-stu-id="d7be8-185">(Add single quotes if there's a space in the name.) See [Azure Regions](https://azure.microsoft.com/en-us/regions/) for more information.</span></span> |
   | <span data-ttu-id="d7be8-186">-ResourceGroupName</span><span class="sxs-lookup"><span data-stu-id="d7be8-186">-ResourceGroupName</span></span> |<span data-ttu-id="d7be8-187">Namnet på resursgruppen som används för den här distributionen.</span><span class="sxs-lookup"><span data-stu-id="d7be8-187">The name of the resource group used for this deployment.</span></span> |
   | <span data-ttu-id="d7be8-188">-UploadArtifacts</span><span class="sxs-lookup"><span data-stu-id="d7be8-188">-UploadArtifacts</span></span> |<span data-ttu-id="d7be8-189">Den här parametern när anger att artefakter som behöver överföras till Azure från det lokala systemet.</span><span class="sxs-lookup"><span data-stu-id="d7be8-189">This parameter, when present, specifies that artifacts that need to be uploaded to Azure from the local system.</span></span> <span data-ttu-id="d7be8-190">Du behöver bara ange den här växeln om mallen distributionen kräver extra artefakter som du vill att mellanlagra med hjälp av PowerShell-skript (exempelvis konfigurationsskript eller kapslade mallar).</span><span class="sxs-lookup"><span data-stu-id="d7be8-190">You only need to set this switch if your template deployment requires extra artifacts that you want to stage using the PowerShell script (such as configuration scripts or nested templates).</span></span> |
   | <span data-ttu-id="d7be8-191">-StorageAccountName</span><span class="sxs-lookup"><span data-stu-id="d7be8-191">-StorageAccountName</span></span> |<span data-ttu-id="d7be8-192">Namnet på lagringskontot används för att mellanlagra artefakter för den här distributionen.</span><span class="sxs-lookup"><span data-stu-id="d7be8-192">The name of the storage account used to stage artifacts for this deployment.</span></span> <span data-ttu-id="d7be8-193">Den här parametern används bara om du Förproduktion artefakter för distribution.</span><span class="sxs-lookup"><span data-stu-id="d7be8-193">This parameter is only used if you are staging artifacts for deployment.</span></span> <span data-ttu-id="d7be8-194">Om den här parametern anges skapas ett nytt lagringskonto om skriptet inte har skapat något under en tidigare distribution.</span><span class="sxs-lookup"><span data-stu-id="d7be8-194">If this parameter is supplied, a new storage account is created if the script has not created one during a previous deployment.</span></span> <span data-ttu-id="d7be8-195">Om parametern anges finnas lagringskontot redan.</span><span class="sxs-lookup"><span data-stu-id="d7be8-195">If the parameter is specified, the storage account must already exist.</span></span> |
   | <span data-ttu-id="d7be8-196">-StorageAccountResourceGroupName</span><span class="sxs-lookup"><span data-stu-id="d7be8-196">-StorageAccountResourceGroupName</span></span> |<span data-ttu-id="d7be8-197">Namnet på resursgruppen som är kopplad till lagringskontot.</span><span class="sxs-lookup"><span data-stu-id="d7be8-197">The name of the resource group associated with the storage account.</span></span> <span data-ttu-id="d7be8-198">Den här parametern krävs endast om du anger ett värde för parametern StorageAccountName.</span><span class="sxs-lookup"><span data-stu-id="d7be8-198">This parameter is required only if you provide a value for the StorageAccountName parameter.</span></span> |
   | <span data-ttu-id="d7be8-199">-TemplateFile</span><span class="sxs-lookup"><span data-stu-id="d7be8-199">-TemplateFile</span></span> |<span data-ttu-id="d7be8-200">Sökväg till mallfilen i distributionsprojektet för Azure-resursgrupp.</span><span class="sxs-lookup"><span data-stu-id="d7be8-200">The path to the template file in the Azure Resource Group deployment project.</span></span> <span data-ttu-id="d7be8-201">Om du vill förbättra flexibilitet att använda en sökväg för den här parametern är i förhållande till platsen för PowerShell-skript i stället för en absolut sökväg.</span><span class="sxs-lookup"><span data-stu-id="d7be8-201">To enhance flexibility, use a path for this parameter that is relative to the location of the PowerShell script instead of an absolute path.</span></span> |
   | <span data-ttu-id="d7be8-202">-TemplateParametersFile</span><span class="sxs-lookup"><span data-stu-id="d7be8-202">-TemplateParametersFile</span></span> |<span data-ttu-id="d7be8-203">Sökvägen till filen parametrar i distributionsprojektet för Azure-resursgrupp.</span><span class="sxs-lookup"><span data-stu-id="d7be8-203">The path to the parameters file in the Azure Resource Group deployment project.</span></span> <span data-ttu-id="d7be8-204">Om du vill förbättra flexibilitet att använda en sökväg för den här parametern är i förhållande till platsen för PowerShell-skript i stället för en absolut sökväg.</span><span class="sxs-lookup"><span data-stu-id="d7be8-204">To enhance flexibility, use a path for this parameter that is relative to the location of the PowerShell script instead of an absolute path.</span></span> |
   | <span data-ttu-id="d7be8-205">-ArtifactStagingDirectory</span><span class="sxs-lookup"><span data-stu-id="d7be8-205">-ArtifactStagingDirectory</span></span> |<span data-ttu-id="d7be8-206">Den här parametern kan PowerShell script vet vilken mapp var projektets binära filer ska kopieras.</span><span class="sxs-lookup"><span data-stu-id="d7be8-206">This parameter lets the PowerShell script know the folder from where the project’s binary files should be copied.</span></span> <span data-ttu-id="d7be8-207">Det här värdet åsidosätter standardvärdet som används av PowerShell-skript.</span><span class="sxs-lookup"><span data-stu-id="d7be8-207">This value overrides the default value used by the PowerShell script.</span></span> <span data-ttu-id="d7be8-208">För att använda VS Team Services, anger du värdet till: - ArtifactStagingDirectory $(Build.StagingDirectory)</span><span class="sxs-lookup"><span data-stu-id="d7be8-208">For VS Team Services use, set the value to: -ArtifactStagingDirectory $(Build.StagingDirectory)</span></span> |
   
   <span data-ttu-id="d7be8-209">Här är ett exempel på skript argument (bruten för att läsa rad):</span><span class="sxs-lookup"><span data-stu-id="d7be8-209">Here’s a script arguments example (line broken for readability):</span></span>
   
   ```    
   -ResourceGroupName 'MyGroup' -ResourceGroupLocation 'eastus' -TemplateFile '..\templates\azuredeploy.json' 
   -TemplateParametersFile '..\templates\azuredeploy.parameters.json' -UploadArtifacts -StorageAccountName 'mystorageacct' 
   –StorageAccountResourceGroupName 'Default-Storage-EastUS' -ArtifactStagingDirectory '$(Build.StagingDirectory)'    
   ```
   
   <span data-ttu-id="d7be8-210">När du är klar, den **skriptargument** rutan bör likna följande lista:</span><span class="sxs-lookup"><span data-stu-id="d7be8-210">When you’re finished, the **Script Arguments** box should resemble the following list:</span></span>
   
   ![Skriptargument][11]
9. <span data-ttu-id="d7be8-212">När du har lagt till alla obligatoriska objekt till Azure PowerShell build steg, väljer du den **kön** skapa om du vill skapa projektet.</span><span class="sxs-lookup"><span data-stu-id="d7be8-212">After you’ve added all the required items to the Azure PowerShell build step, choose the **Queue** build button to build the project.</span></span> <span data-ttu-id="d7be8-213">Den **skapa** skärmen visar utdata från PowerShell-skript.</span><span class="sxs-lookup"><span data-stu-id="d7be8-213">The **Build** screen shows the output from the PowerShell script.</span></span>

### <a name="detailed-walkthrough-for-option-2"></a><span data-ttu-id="d7be8-214">Detaljerad genomgång av alternativ 2</span><span class="sxs-lookup"><span data-stu-id="d7be8-214">Detailed walkthrough for Option 2</span></span>
<span data-ttu-id="d7be8-215">Följande procedurer för att gå igenom stegen för att konfigurera kontinuerlig distribution i VS Team Services med hjälp av inbyggda aktiviteter.</span><span class="sxs-lookup"><span data-stu-id="d7be8-215">The following procedures walk you through the steps necessary to configure continuous deployment in VS Team Services using the built-in tasks.</span></span>

1. <span data-ttu-id="d7be8-216">Redigera din VS Team Services build-definition för att lägga till två nya skapa steg.</span><span class="sxs-lookup"><span data-stu-id="d7be8-216">Edit your VS Team Services build definition to add two new build steps.</span></span> <span data-ttu-id="d7be8-217">Välj build-definition under den **skapa definitioner** kategori och välj sedan den **redigera** länk.</span><span class="sxs-lookup"><span data-stu-id="d7be8-217">Choose the build definition under the **Build definitions** category and then choose the **Edit** link.</span></span>
   
   ![Redigera build attributdefinitionstabellen][12]
2. <span data-ttu-id="d7be8-219">Lägg till hur build till build definition med den **Lägg till build steg...**</span><span class="sxs-lookup"><span data-stu-id="d7be8-219">Add the new build steps to the build definition using the **Add build step…**</span></span> <span data-ttu-id="d7be8-220">till.</span><span class="sxs-lookup"><span data-stu-id="d7be8-220">button.</span></span>
   
   ![Lägg till build steg][13]
3. <span data-ttu-id="d7be8-222">Välj den **distribuera** aktivitetskategori, Välj den **Azure filkopiering** uppgift och välj sedan dess **Lägg till** knappen.</span><span class="sxs-lookup"><span data-stu-id="d7be8-222">Choose the **Deploy** task category, select the **Azure File Copy** task, and then choose its **Add** button.</span></span>
   
   ![Lägg till Azure filkopiering aktivitet][14]
4. <span data-ttu-id="d7be8-224">Välj den **Azure Resource distribution** uppgift och välj sedan dess **Lägg till** knappen och sedan **Stäng** den **aktivitet katalogen**.</span><span class="sxs-lookup"><span data-stu-id="d7be8-224">Choose the **Azure Resource Group Deployment** task, then choose its **Add** button and then **Close** the **Task Catalog**.</span></span>
   
   ![Lägg till Azure-resursgrupp distribution aktivitet][15]
5. <span data-ttu-id="d7be8-226">Välj den **Azure filkopiering** uppgift och Fyll i dess värden.</span><span class="sxs-lookup"><span data-stu-id="d7be8-226">Choose the **Azure File Copy** task and fill in its values.</span></span>
   
   <span data-ttu-id="d7be8-227">Om du redan har en Azure-tjänst-slutpunkt som lagts till i VS Team Services väljer du prenumerationen som den **Azure-prenumeration** nedrullningsbara listrutan.</span><span class="sxs-lookup"><span data-stu-id="d7be8-227">If you already have an Azure service endpoint added to VS Team Services, choose the subscription in the **Azure Subscription** drop-down list box.</span></span> <span data-ttu-id="d7be8-228">Om du inte har en prenumeration, se [alternativ 1](#detailed-walkthrough-for-option-1) anvisningar för att konfigurera en i VS Team Services.</span><span class="sxs-lookup"><span data-stu-id="d7be8-228">If you do not have a subscription, see [Option 1](#detailed-walkthrough-for-option-1) for instructions on setting one up in VS Team Services.</span></span>
   
   * <span data-ttu-id="d7be8-229">Käll - ange **$(Build.StagingDirectory)**</span><span class="sxs-lookup"><span data-stu-id="d7be8-229">Source - enter **$(Build.StagingDirectory)**</span></span>
   * <span data-ttu-id="d7be8-230">Azure anslutningstypen - Välj **Azure Resource Manager**</span><span class="sxs-lookup"><span data-stu-id="d7be8-230">Azure Connection Type - select **Azure Resource Manager**</span></span>
   * <span data-ttu-id="d7be8-231">Azure RM-prenumeration – Välj prenumerationen för storage-konto som du vill använda i den **Azure-prenumeration** nedrullningsbara listrutan.</span><span class="sxs-lookup"><span data-stu-id="d7be8-231">Azure RM Subscription - select the subscription for the storage account you want to use in the **Azure Subscription** drop-down list box.</span></span> <span data-ttu-id="d7be8-232">Om prenumerationen inte visas, väljer du den **uppdatera** knappen bredvid den **hantera** länk.</span><span class="sxs-lookup"><span data-stu-id="d7be8-232">If the subscription doesn't appear, choose the **Refresh** button next the **Manage** link.</span></span>
   * <span data-ttu-id="d7be8-233">Måltypen - Välj **Azure Blob**</span><span class="sxs-lookup"><span data-stu-id="d7be8-233">Destination Type - select **Azure Blob**</span></span>
   * <span data-ttu-id="d7be8-234">RM Lagringskonto - Välj lagring konto du vill använda för mellanlagring artefakter</span><span class="sxs-lookup"><span data-stu-id="d7be8-234">RM Storage Account - select the storage account you would like to use for staging artifacts</span></span>
   * <span data-ttu-id="d7be8-235">Behållarens namn – Ange namnet på den behållare som du vill använda för mellanlagring; Det kan vara vilket behållarnamn som giltiga, men använder en dedikerad till denna build-definition</span><span class="sxs-lookup"><span data-stu-id="d7be8-235">Container Name - enter the name of the container you would like to use for staging; it can be any valid container name, but use one dedicated to this build definition</span></span>
   
   <span data-ttu-id="d7be8-236">För utdatavärden:</span><span class="sxs-lookup"><span data-stu-id="d7be8-236">For the output values:</span></span>
   
   * <span data-ttu-id="d7be8-237">Ange lagringsbehållaren URI - **artifactsLocation**</span><span class="sxs-lookup"><span data-stu-id="d7be8-237">Storage Container URI - enter **artifactsLocation**</span></span>
   * <span data-ttu-id="d7be8-238">Storage-behållare SAS-Token - ange **artifactsLocationSasToken**</span><span class="sxs-lookup"><span data-stu-id="d7be8-238">Storage Container SAS Token - enter **artifactsLocationSasToken**</span></span>
   
   ![Konfigurera Azure filkopiering aktivitet][16]
6. <span data-ttu-id="d7be8-240">Välj den **Azure Resource distribution** skapa steg och fyll sedan i dess värden.</span><span class="sxs-lookup"><span data-stu-id="d7be8-240">Choose the **Azure Resource Group Deployment** build step and then fill in its values.</span></span>
   
   * <span data-ttu-id="d7be8-241">Azure anslutningstypen - Välj **Azure Resource Manager**</span><span class="sxs-lookup"><span data-stu-id="d7be8-241">Azure Connection Type - select **Azure Resource Manager**</span></span>
   * <span data-ttu-id="d7be8-242">Azure RM-prenumeration – Välj prenumerationen för distribution i den **Azure-prenumeration** nedrullningsbara listrutan.</span><span class="sxs-lookup"><span data-stu-id="d7be8-242">Azure RM Subscription - select the subscription for deployment in the **Azure Subscription** drop-down list box.</span></span> <span data-ttu-id="d7be8-243">Det här är vanligtvis samma prenumeration som används i föregående steg</span><span class="sxs-lookup"><span data-stu-id="d7be8-243">This will usually be the same subscription used in the previous step</span></span>
   * <span data-ttu-id="d7be8-244">Åtgärd - väljer **skapa eller uppdatera resursgruppen.**</span><span class="sxs-lookup"><span data-stu-id="d7be8-244">Action - select **Create or Update Resource Group**</span></span>
   * <span data-ttu-id="d7be8-245">Resursgrupp – Välj en resursgrupp eller ange namnet på en ny resursgrupp för distributionen</span><span class="sxs-lookup"><span data-stu-id="d7be8-245">Resource Group - select a resource group or enter the name of a new resource group for the deployment</span></span>
   * <span data-ttu-id="d7be8-246">Plats – Välj plats för resursgruppen</span><span class="sxs-lookup"><span data-stu-id="d7be8-246">Location - select the location for the resource group</span></span>
   * <span data-ttu-id="d7be8-247">Mall – ange sökvägen och namnet på mallen som ska distribueras tillagt **$(Build.StagingDirectory)**, till exempel: **$(Build.StagingDirectory/DSC-CI/azuredeploy.json)**</span><span class="sxs-lookup"><span data-stu-id="d7be8-247">Template - enter the path and name of the template to be deployed prepending **$(Build.StagingDirectory)**, for example: **$(Build.StagingDirectory/DSC-CI/azuredeploy.json)**</span></span>
   * <span data-ttu-id="d7be8-248">Mallparametrar – ange sökvägen och namnet på parametrarna som ska användas, tillagt **$(Build.StagingDirectory)**, till exempel: **$(Build.StagingDirectory/DSC-CI/azuredeploy.parameters.json)**</span><span class="sxs-lookup"><span data-stu-id="d7be8-248">Template Parameters - enter the path and name of the parameters to be used, prepending **$(Build.StagingDirectory)**, for example: **$(Build.StagingDirectory/DSC-CI/azuredeploy.parameters.json)**</span></span>
   * <span data-ttu-id="d7be8-249">Åsidosätt mallparametrar – ange eller kopiera och klistra in följande kod:</span><span class="sxs-lookup"><span data-stu-id="d7be8-249">Override Template Parameters - enter or copy and paste the following code:</span></span>
     
     ```    
     -_artifactsLocation $(artifactsLocation) -_artifactsLocationSasToken (ConvertTo-SecureString -String "$(artifactsLocationSasToken)" -AsPlainText -Force)
     ```
     ![Konfigurera Azure-resursgrupp distribution aktivitet][17]
7. <span data-ttu-id="d7be8-251">När du har lagt till alla objekt, spara build-definition och välj **kö nya build** längst upp.</span><span class="sxs-lookup"><span data-stu-id="d7be8-251">After you’ve added all the required items, save the build definition and choose **Queue new build** at the top.</span></span>

## <a name="next-steps"></a><span data-ttu-id="d7be8-252">Nästa steg</span><span class="sxs-lookup"><span data-stu-id="d7be8-252">Next steps</span></span>
<span data-ttu-id="d7be8-253">Läs [översikt över Azure Resource Manager](azure-resource-manager/resource-group-overview.md) lära dig mer om Azure Resource Manager och Azure-resursgrupper.</span><span class="sxs-lookup"><span data-stu-id="d7be8-253">Read [Azure Resource Manager overview](azure-resource-manager/resource-group-overview.md) to learn more about Azure Resource Manager and Azure resource groups.</span></span>

[0]: ./media/vs-azure-tools-resource-groups-ci-in-vsts/walkthrough1.png
[1]: ./media/vs-azure-tools-resource-groups-ci-in-vsts/walkthrough2.png
[2]: ./media/vs-azure-tools-resource-groups-ci-in-vsts/walkthrough3.png
[3]: ./media/vs-azure-tools-resource-groups-ci-in-vsts/walkthrough4.png
[4]: ./media/vs-azure-tools-resource-groups-ci-in-vsts/walkthrough5.png
[5]: ./media/vs-azure-tools-resource-groups-ci-in-vsts/walkthrough6.png
[8]: ./media/vs-azure-tools-resource-groups-ci-in-vsts/walkthrough9.png
[9]: ./media/vs-azure-tools-resource-groups-ci-in-vsts/walkthrough10.png
[10]: ./media/vs-azure-tools-resource-groups-ci-in-vsts/walkthrough11b.png
[11]: ./media/vs-azure-tools-resource-groups-ci-in-vsts/walkthrough12.png
[12]: ./media/vs-azure-tools-resource-groups-ci-in-vsts/walkthrough13.png
[13]: ./media/vs-azure-tools-resource-groups-ci-in-vsts/walkthrough14.png
[14]: ./media/vs-azure-tools-resource-groups-ci-in-vsts/walkthrough15.png
[15]: ./media/vs-azure-tools-resource-groups-ci-in-vsts/walkthrough16.png
[16]: ./media/vs-azure-tools-resource-groups-ci-in-vsts/walkthrough17.png
[17]: ./media/vs-azure-tools-resource-groups-ci-in-vsts/walkthrough18.png

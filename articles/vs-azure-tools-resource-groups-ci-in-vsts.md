---
title: aaaContinuous integrering i VS Team Services med Azure-resursgruppsprojekt | Microsoft Docs
description: Beskriver hur tooset in kontinuerlig integration i Visual Studio Team Services med Azure-resursgrupp distribution projekt i Visual Studio.
services: visual-studio-online
documentationcenter: na
author: mlearned
manager: erickson-doug
editor: 
ms.assetid: b81c172a-be87-4adc-861e-d20b94be9e38
ms.service: azure-resource-manager
ms.devlang: multiple
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: na
ms.date: 08/01/2016
ms.author: mlearned
ms.openlocfilehash: 0fe4a4b8989ee323e8ef2206fa4ebed503025670
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: sv-SE
ms.lasthandoff: 10/06/2017
---
# <a name="continuous-integration-in-visual-studio-team-services-using-azure-resource-group-deployment-projects"></a><span data-ttu-id="787a9-103">Kontinuerlig integration i Visual Studio Team Services med hjälp av projekt för distribution av Azure-resursgrupp</span><span class="sxs-lookup"><span data-stu-id="787a9-103">Continuous integration in Visual Studio Team Services using Azure Resource Group deployment projects</span></span>
<span data-ttu-id="787a9-104">toodeploy en Azure-mall du utför uppgifter i olika faser: skapa, testa, kopiera tooAzure (även kallat ”mellanlagring”) och distribuerar mallen.</span><span class="sxs-lookup"><span data-stu-id="787a9-104">toodeploy an Azure template, you perform tasks in various stages: Build, Test, Copy tooAzure (also called "Staging"), and Deploy Template.</span></span> <span data-ttu-id="787a9-105">Det finns två olika sätt toodeploy mallar tooVisual Studio Team Services (VS Team Services).</span><span class="sxs-lookup"><span data-stu-id="787a9-105">There are two different ways toodeploy templates tooVisual Studio Team Services (VS Team Services).</span></span> <span data-ttu-id="787a9-106">Båda metoderna och ange hello samma resultat, så Välj hello som bäst passar ditt arbetsflöde.</span><span class="sxs-lookup"><span data-stu-id="787a9-106">Both methods provide hello same results, so choose hello one that best fits your workflow.</span></span>

1. <span data-ttu-id="787a9-107">Lägg till en enda steg tooyour build-definition som kör hello PowerShell-skript som ingår i projekt för distribution av Azure-resursgrupp hello (distribuera AzureResourceGroup.ps1).</span><span class="sxs-lookup"><span data-stu-id="787a9-107">Add a single step tooyour build definition that runs hello PowerShell script that’s included in hello Azure Resource Group deployment project (Deploy-AzureResourceGroup.ps1).</span></span> <span data-ttu-id="787a9-108">hello skriptet kopierar artefakter och distribuerar sedan hello mallen.</span><span class="sxs-lookup"><span data-stu-id="787a9-108">hello script copies artifacts and then deploys hello template.</span></span>
2. <span data-ttu-id="787a9-109">Lägga till flera VS Team Services skapa steg, var och en utförs steget.</span><span class="sxs-lookup"><span data-stu-id="787a9-109">Add multiple VS Team Services build steps, each one performing a stage task.</span></span>

<span data-ttu-id="787a9-110">Den här artikeln visar båda alternativen.</span><span class="sxs-lookup"><span data-stu-id="787a9-110">This article demonstrates both options.</span></span> <span data-ttu-id="787a9-111">hello första alternativet har hello fördelen med hello samma skript används av utvecklare i Visual Studio och ger konsekvens i hela hello livscykel.</span><span class="sxs-lookup"><span data-stu-id="787a9-111">hello first option has hello advantage of using hello same script used by developers in Visual Studio and providing consistency throughout hello lifecycle.</span></span> <span data-ttu-id="787a9-112">andra alternativ för hello erbjuder ett enkelt alternativ toohello inbyggda skript.</span><span class="sxs-lookup"><span data-stu-id="787a9-112">hello second option offers a convenient alternative toohello built-in script.</span></span> <span data-ttu-id="787a9-113">Båda procedurer förutsätter att du redan har ett projekt för distribution av Visual Studio checkas in VS Team Services.</span><span class="sxs-lookup"><span data-stu-id="787a9-113">Both procedures assume you already have a Visual Studio deployment project checked into VS Team Services.</span></span>

## <a name="copy-artifacts-tooazure"></a><span data-ttu-id="787a9-114">Kopiera artefakter tooAzure</span><span class="sxs-lookup"><span data-stu-id="787a9-114">Copy artifacts tooAzure</span></span>
<span data-ttu-id="787a9-115">Om du har alla artefakter som behövs för malldistribution av, oavsett hello scenario måste du ge Azure Resource Manager åtkomst toothem.</span><span class="sxs-lookup"><span data-stu-id="787a9-115">Regardless of hello scenario, if you have any artifacts that are needed for template deployment, you must give Azure Resource Manager access toothem.</span></span> <span data-ttu-id="787a9-116">Dessa artefakter kan innehålla filer som:</span><span class="sxs-lookup"><span data-stu-id="787a9-116">These artifacts can include files such as:</span></span>

* <span data-ttu-id="787a9-117">Kapslade mallar</span><span class="sxs-lookup"><span data-stu-id="787a9-117">Nested templates</span></span>
* <span data-ttu-id="787a9-118">Konfigurationsskript och DSC-skript</span><span class="sxs-lookup"><span data-stu-id="787a9-118">Configuration scripts and DSC scripts</span></span>
* <span data-ttu-id="787a9-119">Binärfiler</span><span class="sxs-lookup"><span data-stu-id="787a9-119">Application binaries</span></span>

### <a name="nested-templates-and-configuration-scripts"></a><span data-ttu-id="787a9-120">Kapslade mallar och konfigurationsskript</span><span class="sxs-lookup"><span data-stu-id="787a9-120">Nested Templates and Configuration Scripts</span></span>
<span data-ttu-id="787a9-121">När du använder hello mallar som ingår i Visual Studio (eller skapats med Visual Studio kodavsnitt) hello PowerShell-skript skapar inte bara hello artefakter, den också parameterizes hello URI för hello resurser för olika distributioner.</span><span class="sxs-lookup"><span data-stu-id="787a9-121">When you use hello templates provided by Visual Studio (or built with Visual Studio snippets), hello PowerShell script not only stages hello artifacts, it also parameterizes hello URI for hello resources for different deployments.</span></span> <span data-ttu-id="787a9-122">hello skript och sedan kopierar hello artefakter tooa säkra behållare i Azure, skapas en SaS-token för behållaren och skickar sedan informationen på toohello malldistribution.</span><span class="sxs-lookup"><span data-stu-id="787a9-122">hello script then copies hello artifacts tooa secure container in Azure, creates a SaS token for that container, and then passes that information on toohello template deployment.</span></span> <span data-ttu-id="787a9-123">Se [skapar en för malldistribution](https://msdn.microsoft.com/library/azure/dn790564.aspx) toolearn mer om kapslade mallar.</span><span class="sxs-lookup"><span data-stu-id="787a9-123">See [Create a template deployment](https://msdn.microsoft.com/library/azure/dn790564.aspx) toolearn more about nested templates.</span></span>  <span data-ttu-id="787a9-124">När du använder uppgifter i VS Team Services, måste du väljer hello lämpliga uppgifter för din för malldistribution och eventuellt ange parametervärden från hello mellanlagring steg toohello malldistribution.</span><span class="sxs-lookup"><span data-stu-id="787a9-124">When using tasks in VS Team Services, you must select hello appropriate tasks for your template deployment and if necessary, pass parameter values from hello staging step toohello template deployment.</span></span>

## <a name="set-up-continuous-deployment-in-vs-team-services"></a><span data-ttu-id="787a9-125">Ställ in kontinuerlig distribution i VS Team Services</span><span class="sxs-lookup"><span data-stu-id="787a9-125">Set up continuous deployment in VS Team Services</span></span>
<span data-ttu-id="787a9-126">toocall hello PowerShell-skriptet i VS Team Services behöver du tooupdate build-definition.</span><span class="sxs-lookup"><span data-stu-id="787a9-126">toocall hello PowerShell script in VS Team Services, you need tooupdate your build definition.</span></span> <span data-ttu-id="787a9-127">I korthet är hello stegen:</span><span class="sxs-lookup"><span data-stu-id="787a9-127">In brief, hello steps are:</span></span> 

1. <span data-ttu-id="787a9-128">Redigera hello build-definition.</span><span class="sxs-lookup"><span data-stu-id="787a9-128">Edit hello build definition.</span></span>
2. <span data-ttu-id="787a9-129">Ställ in Azure auktorisering VS Team Services.</span><span class="sxs-lookup"><span data-stu-id="787a9-129">Set up Azure authorization in VS Team Services.</span></span>
3. <span data-ttu-id="787a9-130">Lägg till ett Azure PowerShell build steg som refererar till hello PowerShell-skript i projekt för distribution av hello Azure-resursgrupp.</span><span class="sxs-lookup"><span data-stu-id="787a9-130">Add an Azure PowerShell build step that references hello PowerShell script in hello Azure Resource Group deployment project.</span></span>
4. <span data-ttu-id="787a9-131">Värdet för hello hello *- ArtifactsStagingDirectory* parametern toowork med ett projekt som skapats i VS Team Services.</span><span class="sxs-lookup"><span data-stu-id="787a9-131">Set hello value of hello *-ArtifactsStagingDirectory* parameter toowork with a project built in VS Team Services.</span></span>

### <a name="detailed-walkthrough-for-option-1"></a><span data-ttu-id="787a9-132">Detaljerad genomgång av alternativ 1</span><span class="sxs-lookup"><span data-stu-id="787a9-132">Detailed walkthrough for Option 1</span></span>
<span data-ttu-id="787a9-133">hello vägleder följande procedurer dig genom hello steg nödvändiga tooconfigure kontinuerlig distribution i VS Team Services med hjälp av en enskild aktivitet som körs hello PowerShell-skript i projektet.</span><span class="sxs-lookup"><span data-stu-id="787a9-133">hello following procedures walk you through hello steps necessary tooconfigure continuous deployment in VS Team Services using a single task that runs hello PowerShell script in your project.</span></span> 

1. <span data-ttu-id="787a9-134">Redigera din VS Team Services build-definition och lägger till en Azure PowerShell build-steget.</span><span class="sxs-lookup"><span data-stu-id="787a9-134">Edit your VS Team Services build definition and add an Azure PowerShell build step.</span></span> <span data-ttu-id="787a9-135">Välj hello build definition under hello **skapa definitioner** kategori och välj sedan hello **redigera** länk.</span><span class="sxs-lookup"><span data-stu-id="787a9-135">Choose hello build definition under hello **Build definitions** category and then choose hello **Edit** link.</span></span>
   
   ![Redigera definition av build][0]
2. <span data-ttu-id="787a9-137">Lägg till en ny **Azure PowerShell** skapa steg toohello build definition och välj sedan hello **Lägg till build steg...**</span><span class="sxs-lookup"><span data-stu-id="787a9-137">Add a new **Azure PowerShell** build step toohello build definition and then choose hello **Add build step…**</span></span> <span data-ttu-id="787a9-138">till.</span><span class="sxs-lookup"><span data-stu-id="787a9-138">button.</span></span>
   
   ![Lägg till build steg][1]
3. <span data-ttu-id="787a9-140">Välj hello **distribuera aktiviteten** kategori, Välj hello **Azure PowerShell** uppgift och välj sedan dess **Lägg till** knappen.</span><span class="sxs-lookup"><span data-stu-id="787a9-140">Choose hello **Deploy task** category, select hello **Azure PowerShell** task, and then choose its **Add** button.</span></span>
   
   ![Lägg till aktiviteter][2]
4. <span data-ttu-id="787a9-142">Välj hello **Azure PowerShell** skapa steg och fyll sedan i dess värden.</span><span class="sxs-lookup"><span data-stu-id="787a9-142">Choose hello **Azure PowerShell** build step and then fill in its values.</span></span>
   
   1. <span data-ttu-id="787a9-143">Om du redan har en Azure-tjänsteslutpunkt lagts tooVS Team Services, Välj hello prenumeration i hello **Azure-prenumeration** nedrullningsbara listrutan och hoppa över toohello nästa avsnitt.</span><span class="sxs-lookup"><span data-stu-id="787a9-143">If you already have an Azure service endpoint added tooVS Team Services, choose hello subscription in hello **Azure Subscription** drop-down list box and then skip toohello next section.</span></span> 
      
      <span data-ttu-id="787a9-144">Om du inte har en Azure-tjänsteslutpunkt i VS Team Services, måste tooadd en.</span><span class="sxs-lookup"><span data-stu-id="787a9-144">If you don’t have an Azure service endpoint in VS Team Services, you need tooadd one.</span></span> <span data-ttu-id="787a9-145">Detta underavsnitt tar dig igenom processen hello.</span><span class="sxs-lookup"><span data-stu-id="787a9-145">This subsection takes you through hello process.</span></span> <span data-ttu-id="787a9-146">Om ditt Azure-konto använder ett Microsoft-konto (till exempel Hotmail), måste du utföra följande steg tooget hello tjänstens huvudnamn-autentisering.</span><span class="sxs-lookup"><span data-stu-id="787a9-146">If your Azure account uses a Microsoft account (such as Hotmail), you must take hello following steps tooget a Service Principal authentication.</span></span>
   2. <span data-ttu-id="787a9-147">Välj hello **hantera** länka nästa toohello **Azure-prenumeration** nedrullningsbara listrutan.</span><span class="sxs-lookup"><span data-stu-id="787a9-147">Choose hello **Manage** link next toohello **Azure Subscription** drop-down list box.</span></span>
      
      ![Hantera Azure-prenumerationer][3]
   3. <span data-ttu-id="787a9-149">Välj **Azure** i hello **nya tjänstslutpunkten** nedrullningsbara listrutan.</span><span class="sxs-lookup"><span data-stu-id="787a9-149">Choose **Azure** in hello **New Service Endpoint** drop-down list box.</span></span>
      
      ![Nya tjänstslutpunkten][4]
   4. <span data-ttu-id="787a9-151">I hello **Lägg till Azure-prenumeration** dialogrutan, Välj hello **tjänstens huvudnamn** alternativet.</span><span class="sxs-lookup"><span data-stu-id="787a9-151">In hello **Add Azure Subscription** dialog box, select hello **Service Principal** option.</span></span>
      
      ![Tjänstens huvudnamn alternativet][5]
   5. <span data-ttu-id="787a9-153">Lägg till din Azure-prenumeration information toohello **Lägg till Azure-prenumeration** dialogrutan.</span><span class="sxs-lookup"><span data-stu-id="787a9-153">Add your Azure subscription information toohello **Add Azure Subscription** dialog box.</span></span> <span data-ttu-id="787a9-154">Du behöver tooprovide hello följande objekt:</span><span class="sxs-lookup"><span data-stu-id="787a9-154">You need tooprovide hello following items:</span></span>
      
      * <span data-ttu-id="787a9-155">Prenumerations-Id</span><span class="sxs-lookup"><span data-stu-id="787a9-155">Subscription Id</span></span>
      * <span data-ttu-id="787a9-156">Prenumerationsnamn</span><span class="sxs-lookup"><span data-stu-id="787a9-156">Subscription Name</span></span>
      * <span data-ttu-id="787a9-157">Tjänstens huvudnamn Id</span><span class="sxs-lookup"><span data-stu-id="787a9-157">Service Principal Id</span></span>
      * <span data-ttu-id="787a9-158">Tjänstens huvudnamn nyckel</span><span class="sxs-lookup"><span data-stu-id="787a9-158">Service Principal Key</span></span>
      * <span data-ttu-id="787a9-159">Klient-Id</span><span class="sxs-lookup"><span data-stu-id="787a9-159">Tenant Id</span></span>
   6. <span data-ttu-id="787a9-160">Lägga till ett namn för ditt val toohello **prenumeration** namnrutan.</span><span class="sxs-lookup"><span data-stu-id="787a9-160">Add a name of your choice toohello **Subscription** name box.</span></span> <span data-ttu-id="787a9-161">Det här värdet som visas längre fram i hello **Azure-prenumeration** listrutan i VS Team Services.</span><span class="sxs-lookup"><span data-stu-id="787a9-161">This value appears later in hello **Azure Subscription** drop-down list in VS Team Services.</span></span> 
   7. <span data-ttu-id="787a9-162">Om du inte vet Azure prenumerations-ID, du kan använda något av följande kommandon tooretrieve hello den.</span><span class="sxs-lookup"><span data-stu-id="787a9-162">If you don’t know your Azure subscription ID, you can use one of hello following commands tooretrieve it.</span></span>
      
      <span data-ttu-id="787a9-163">Använd för PowerShell-skript:</span><span class="sxs-lookup"><span data-stu-id="787a9-163">For PowerShell scripts, use:</span></span>
      
      `Get-AzureRmSubscription`
      
      <span data-ttu-id="787a9-164">Om du använder Azure CLI använder du:</span><span class="sxs-lookup"><span data-stu-id="787a9-164">For Azure CLI, use:</span></span>
      
      `azure account show`
   8. <span data-ttu-id="787a9-165">tooget Service Principal-ID, Service Principal Key och klient-ID, följ hello procedur i [Skapa Active Directory-program och tjänstens huvudnamn med hjälp av portalen](resource-group-create-service-principal-portal.md) eller [autentiserar ett huvudnamn för tjänsten med Azure Resource Manager](resource-group-authenticate-service-principal.md).</span><span class="sxs-lookup"><span data-stu-id="787a9-165">tooget a Service Principal ID, Service Principal Key, and Tenant ID, follow hello procedure in [Create Active Directory application and service principal using portal](resource-group-create-service-principal-portal.md) or [Authenticating a service principal with Azure Resource Manager](resource-group-authenticate-service-principal.md).</span></span>
   9. <span data-ttu-id="787a9-166">Lägg till hello tjänstens huvudnamn ID, Service Principal Key och klient-ID värden toohello **Lägg till Azure-prenumeration** dialogrutan och sedan väljer hello **OK** knappen.</span><span class="sxs-lookup"><span data-stu-id="787a9-166">Add hello Service Principal ID, Service Principal Key, and Tenant ID values toohello **Add Azure Subscription** dialog box and then choose hello **OK** button.</span></span>
      
      <span data-ttu-id="787a9-167">Nu har du en giltig Service Principal toouse toorun hello Azure PowerShell-skript.</span><span class="sxs-lookup"><span data-stu-id="787a9-167">You now have a valid Service Principal toouse toorun hello Azure PowerShell script.</span></span>
5. <span data-ttu-id="787a9-168">Redigera definition av hello build och välj hello **Azure PowerShell** skapa steg.</span><span class="sxs-lookup"><span data-stu-id="787a9-168">Edit hello build definition and choose hello **Azure PowerShell** build step.</span></span> <span data-ttu-id="787a9-169">Välj hello prenumeration i hello **Azure-prenumeration** nedrullningsbara listrutan.</span><span class="sxs-lookup"><span data-stu-id="787a9-169">Select hello subscription in hello **Azure Subscription** drop-down list box.</span></span> <span data-ttu-id="787a9-170">(Om hello prenumeration inte visas välja hello **uppdatera** knappen Nästa hello **hantera** länken.)</span><span class="sxs-lookup"><span data-stu-id="787a9-170">(If hello subscription doesn't appear, choose hello **Refresh** button next hello **Manage** link.)</span></span> 
   
   ![Konfigurera Azure PowerShell build-aktivitet][8]
6. <span data-ttu-id="787a9-172">Ange en sökväg toohello distribuera AzureResourceGroup.ps1 PowerShell-skript.</span><span class="sxs-lookup"><span data-stu-id="787a9-172">Provide a path toohello Deploy-AzureResourceGroup.ps1 PowerShell script.</span></span> <span data-ttu-id="787a9-173">toodo, Välj hello ellips (...)-knappen Nästa toohello **skriptsökvägen** går toohello distribuera AzureResourceGroup.ps1 PowerShell-skript i hello **skript** mapp i ditt projekt, markerar den och välj sedan hello **OK** knappen.</span><span class="sxs-lookup"><span data-stu-id="787a9-173">toodo this, choose hello ellipsis (…) button next toohello **Script Path** box, navigate toohello Deploy-AzureResourceGroup.ps1 PowerShell script in hello **Scripts** folder of your project, select it, and then choose hello **OK** button.</span></span>    
   
   ![Välj sökväg tooscript][9]
7. <span data-ttu-id="787a9-175">När du har valt hello skript uppdateringsskript hello sökvägen toohello så att den körs från hello Build.StagingDirectory (hello samma katalog som *ArtifactsLocation* har angetts till).</span><span class="sxs-lookup"><span data-stu-id="787a9-175">After you select hello script, update hello path toohello script so that it’s run from hello Build.StagingDirectory (hello same directory that *ArtifactsLocation* is set to).</span></span> <span data-ttu-id="787a9-176">Du kan göra detta genom att lägga till ”$(Build.StagingDirectory)/” toohello början av hello skriptets sökväg.</span><span class="sxs-lookup"><span data-stu-id="787a9-176">You can do this by adding “$(Build.StagingDirectory)/” toohello beginning of hello script path.</span></span>
   
    ![Redigera sökvägen tooscript][10]
8. <span data-ttu-id="787a9-178">I hello **skriptargument** ange hello följande parametrar (i en enda rad).</span><span class="sxs-lookup"><span data-stu-id="787a9-178">In hello **Script Arguments** box, enter hello following parameters (in a single line).</span></span> <span data-ttu-id="787a9-179">När du kör hello skript i Visual Studio, kan du se hur VS använder hello parametrar i hello **utdata** fönster.</span><span class="sxs-lookup"><span data-stu-id="787a9-179">When you run hello script in Visual Studio, you can see how VS uses hello parameters in hello **Output** window.</span></span> <span data-ttu-id="787a9-180">Du kan använda den som en startpunkt för att ange parametervärden för hello i build-steget.</span><span class="sxs-lookup"><span data-stu-id="787a9-180">You can use this as a starting point for setting hello parameter values in your build step.</span></span>
   
   | <span data-ttu-id="787a9-181">Parameter</span><span class="sxs-lookup"><span data-stu-id="787a9-181">Parameter</span></span> | <span data-ttu-id="787a9-182">Beskrivning</span><span class="sxs-lookup"><span data-stu-id="787a9-182">Description</span></span> |
   | --- | --- |
   | <span data-ttu-id="787a9-183">-ResourceGroupLocation</span><span class="sxs-lookup"><span data-stu-id="787a9-183">-ResourceGroupLocation</span></span> |<span data-ttu-id="787a9-184">Hej geografiska plats värdet var hello resursgruppen finns, som **eastus** eller **'Östra USA'**.</span><span class="sxs-lookup"><span data-stu-id="787a9-184">hello geo-location value where hello resource group is located, such as **eastus** or **'East US'**.</span></span> <span data-ttu-id="787a9-185">(Lägg till enkla citattecken om det finns ett blanksteg i hello namn.) Se [Azure-regioner](https://azure.microsoft.com/en-us/regions/) för mer information.</span><span class="sxs-lookup"><span data-stu-id="787a9-185">(Add single quotes if there's a space in hello name.) See [Azure Regions](https://azure.microsoft.com/en-us/regions/) for more information.</span></span> |
   | <span data-ttu-id="787a9-186">-ResourceGroupName</span><span class="sxs-lookup"><span data-stu-id="787a9-186">-ResourceGroupName</span></span> |<span data-ttu-id="787a9-187">hello namnet på hello resursgruppens namn används för den här distributionen.</span><span class="sxs-lookup"><span data-stu-id="787a9-187">hello name of hello resource group used for this deployment.</span></span> |
   | <span data-ttu-id="787a9-188">-UploadArtifacts</span><span class="sxs-lookup"><span data-stu-id="787a9-188">-UploadArtifacts</span></span> |<span data-ttu-id="787a9-189">Den här parametern när anger att artefakter som behöver toobe upp tooAzure från hello lokalt system.</span><span class="sxs-lookup"><span data-stu-id="787a9-189">This parameter, when present, specifies that artifacts that need toobe uploaded tooAzure from hello local system.</span></span> <span data-ttu-id="787a9-190">Du behöver bara tooset den här växeln om mallen distributionen kräver extra artefakter som du vill använda hello PowerShell-skript (exempelvis konfigurationsskript eller kapslade mallar) toostage.</span><span class="sxs-lookup"><span data-stu-id="787a9-190">You only need tooset this switch if your template deployment requires extra artifacts that you want toostage using hello PowerShell script (such as configuration scripts or nested templates).</span></span> |
   | <span data-ttu-id="787a9-191">-StorageAccountName</span><span class="sxs-lookup"><span data-stu-id="787a9-191">-StorageAccountName</span></span> |<span data-ttu-id="787a9-192">hello namnet på lagringskontot för hello används toostage artefakter för den här distributionen.</span><span class="sxs-lookup"><span data-stu-id="787a9-192">hello name of hello storage account used toostage artifacts for this deployment.</span></span> <span data-ttu-id="787a9-193">Den här parametern används bara om du Förproduktion artefakter för distribution.</span><span class="sxs-lookup"><span data-stu-id="787a9-193">This parameter is only used if you are staging artifacts for deployment.</span></span> <span data-ttu-id="787a9-194">Om den här parametern anges skapas ett nytt lagringskonto om hello skriptet inte har skapat något under en tidigare distribution.</span><span class="sxs-lookup"><span data-stu-id="787a9-194">If this parameter is supplied, a new storage account is created if hello script has not created one during a previous deployment.</span></span> <span data-ttu-id="787a9-195">Om hello-parametern anges finnas hello lagringskontot redan.</span><span class="sxs-lookup"><span data-stu-id="787a9-195">If hello parameter is specified, hello storage account must already exist.</span></span> |
   | <span data-ttu-id="787a9-196">-StorageAccountResourceGroupName</span><span class="sxs-lookup"><span data-stu-id="787a9-196">-StorageAccountResourceGroupName</span></span> |<span data-ttu-id="787a9-197">hello namnet på hello resursgrupp som är associerade med hello storage-konto.</span><span class="sxs-lookup"><span data-stu-id="787a9-197">hello name of hello resource group associated with hello storage account.</span></span> <span data-ttu-id="787a9-198">Den här parametern krävs endast om du anger ett värde för hello StorageAccountName parameter.</span><span class="sxs-lookup"><span data-stu-id="787a9-198">This parameter is required only if you provide a value for hello StorageAccountName parameter.</span></span> |
   | <span data-ttu-id="787a9-199">-TemplateFile</span><span class="sxs-lookup"><span data-stu-id="787a9-199">-TemplateFile</span></span> |<span data-ttu-id="787a9-200">hello sökvägen toohello mallfil i projekt för distribution av hello Azure-resursgrupp.</span><span class="sxs-lookup"><span data-stu-id="787a9-200">hello path toohello template file in hello Azure Resource Group deployment project.</span></span> <span data-ttu-id="787a9-201">tooenhance flexibilitet, Använd en sökväg för den här parametern är relativ toohello plats av hello PowerShell-skript i stället för en absolut sökväg.</span><span class="sxs-lookup"><span data-stu-id="787a9-201">tooenhance flexibility, use a path for this parameter that is relative toohello location of hello PowerShell script instead of an absolute path.</span></span> |
   | <span data-ttu-id="787a9-202">-TemplateParametersFile</span><span class="sxs-lookup"><span data-stu-id="787a9-202">-TemplateParametersFile</span></span> |<span data-ttu-id="787a9-203">hello sökvägen toohello parameterfilen i projekt för distribution av hello Azure-resursgrupp.</span><span class="sxs-lookup"><span data-stu-id="787a9-203">hello path toohello parameters file in hello Azure Resource Group deployment project.</span></span> <span data-ttu-id="787a9-204">tooenhance flexibilitet, Använd en sökväg för den här parametern är relativ toohello plats av hello PowerShell-skript i stället för en absolut sökväg.</span><span class="sxs-lookup"><span data-stu-id="787a9-204">tooenhance flexibility, use a path for this parameter that is relative toohello location of hello PowerShell script instead of an absolute path.</span></span> |
   | <span data-ttu-id="787a9-205">-ArtifactStagingDirectory</span><span class="sxs-lookup"><span data-stu-id="787a9-205">-ArtifactStagingDirectory</span></span> |<span data-ttu-id="787a9-206">Den här parametern kan hello PowerShell-skript vet hello mapp var hello projektet binära filer ska kopieras.</span><span class="sxs-lookup"><span data-stu-id="787a9-206">This parameter lets hello PowerShell script know hello folder from where hello project’s binary files should be copied.</span></span> <span data-ttu-id="787a9-207">Det här värdet åsidosätter standardvärdet för hello används av hello PowerShell-skript.</span><span class="sxs-lookup"><span data-stu-id="787a9-207">This value overrides hello default value used by hello PowerShell script.</span></span> <span data-ttu-id="787a9-208">För VS Team Services använder värdet hello: - ArtifactStagingDirectory $(Build.StagingDirectory)</span><span class="sxs-lookup"><span data-stu-id="787a9-208">For VS Team Services use, set hello value to: -ArtifactStagingDirectory $(Build.StagingDirectory)</span></span> |
   
   <span data-ttu-id="787a9-209">Här är ett exempel på skript argument (bruten för att läsa rad):</span><span class="sxs-lookup"><span data-stu-id="787a9-209">Here’s a script arguments example (line broken for readability):</span></span>
   
   ```    
   -ResourceGroupName 'MyGroup' -ResourceGroupLocation 'eastus' -TemplateFile '..\templates\azuredeploy.json' 
   -TemplateParametersFile '..\templates\azuredeploy.parameters.json' -UploadArtifacts -StorageAccountName 'mystorageacct' 
   –StorageAccountResourceGroupName 'Default-Storage-EastUS' -ArtifactStagingDirectory '$(Build.StagingDirectory)'    
   ```
   
   <span data-ttu-id="787a9-210">När du är klar hello **skriptargument** rutan bör likna hello följande lista:</span><span class="sxs-lookup"><span data-stu-id="787a9-210">When you’re finished, hello **Script Arguments** box should resemble hello following list:</span></span>
   
   ![Skriptargument][11]
9. <span data-ttu-id="787a9-212">När du har lagt till alla hello nödvändiga objekt toohello Azure PowerShell skapa steg, väljer hello **kön** knappen toobuild hello projekt.</span><span class="sxs-lookup"><span data-stu-id="787a9-212">After you’ve added all hello required items toohello Azure PowerShell build step, choose hello **Queue** build button toobuild hello project.</span></span> <span data-ttu-id="787a9-213">Hej **skapa** skärmen visar hello utdata från hello PowerShell-skript.</span><span class="sxs-lookup"><span data-stu-id="787a9-213">hello **Build** screen shows hello output from hello PowerShell script.</span></span>

### <a name="detailed-walkthrough-for-option-2"></a><span data-ttu-id="787a9-214">Detaljerad genomgång av alternativ 2</span><span class="sxs-lookup"><span data-stu-id="787a9-214">Detailed walkthrough for Option 2</span></span>
<span data-ttu-id="787a9-215">hello vägleder följande procedurer dig genom hello steg nödvändiga tooconfigure kontinuerlig distribution i VS Team Services med hjälp av inbyggda hello-uppgifter.</span><span class="sxs-lookup"><span data-stu-id="787a9-215">hello following procedures walk you through hello steps necessary tooconfigure continuous deployment in VS Team Services using hello built-in tasks.</span></span>

1. <span data-ttu-id="787a9-216">Redigera din VS Team Services build definition tooadd två nya build steg.</span><span class="sxs-lookup"><span data-stu-id="787a9-216">Edit your VS Team Services build definition tooadd two new build steps.</span></span> <span data-ttu-id="787a9-217">Välj hello build definition under hello **skapa definitioner** kategori och välj sedan hello **redigera** länk.</span><span class="sxs-lookup"><span data-stu-id="787a9-217">Choose hello build definition under hello **Build definitions** category and then choose hello **Edit** link.</span></span>
   
   ![Redigera build attributdefinitionstabellen][12]
2. <span data-ttu-id="787a9-219">Lägg till hello nya skapa steg toohello build-definitionen skapades med hello **Lägg till build steg...**</span><span class="sxs-lookup"><span data-stu-id="787a9-219">Add hello new build steps toohello build definition using hello **Add build step…**</span></span> <span data-ttu-id="787a9-220">till.</span><span class="sxs-lookup"><span data-stu-id="787a9-220">button.</span></span>
   
   ![Lägg till build steg][13]
3. <span data-ttu-id="787a9-222">Välj hello **distribuera** aktivitetskategori, Välj hello **Azure filkopiering** uppgift och välj sedan dess **Lägg till** knappen.</span><span class="sxs-lookup"><span data-stu-id="787a9-222">Choose hello **Deploy** task category, select hello **Azure File Copy** task, and then choose its **Add** button.</span></span>
   
   ![Lägg till Azure filkopiering aktivitet][14]
4. <span data-ttu-id="787a9-224">Välj hello **Azure resurs för Gruppdistributionen** uppgift och välj sedan dess **Lägg till** knappen och sedan **Stäng** hello **aktivitet katalogen**.</span><span class="sxs-lookup"><span data-stu-id="787a9-224">Choose hello **Azure Resource Group Deployment** task, then choose its **Add** button and then **Close** hello **Task Catalog**.</span></span>
   
   ![Lägg till Azure-resursgrupp distribution aktivitet][15]
5. <span data-ttu-id="787a9-226">Välj hello **Azure filkopiering** uppgift och Fyll i dess värden.</span><span class="sxs-lookup"><span data-stu-id="787a9-226">Choose hello **Azure File Copy** task and fill in its values.</span></span>
   
   <span data-ttu-id="787a9-227">Om du redan har en Azure-tjänsteslutpunkt lagts tooVS Team Services, Välj hello prenumeration i hello **Azure-prenumeration** nedrullningsbara listrutan.</span><span class="sxs-lookup"><span data-stu-id="787a9-227">If you already have an Azure service endpoint added tooVS Team Services, choose hello subscription in hello **Azure Subscription** drop-down list box.</span></span> <span data-ttu-id="787a9-228">Om du inte har en prenumeration, se [alternativ 1](#detailed-walkthrough-for-option-1) anvisningar för att konfigurera en i VS Team Services.</span><span class="sxs-lookup"><span data-stu-id="787a9-228">If you do not have a subscription, see [Option 1](#detailed-walkthrough-for-option-1) for instructions on setting one up in VS Team Services.</span></span>
   
   * <span data-ttu-id="787a9-229">Käll - ange **$(Build.StagingDirectory)**</span><span class="sxs-lookup"><span data-stu-id="787a9-229">Source - enter **$(Build.StagingDirectory)**</span></span>
   * <span data-ttu-id="787a9-230">Azure anslutningstypen - Välj **Azure Resource Manager**</span><span class="sxs-lookup"><span data-stu-id="787a9-230">Azure Connection Type - select **Azure Resource Manager**</span></span>
   * <span data-ttu-id="787a9-231">Azure RM-prenumeration – Välj hello prenumerationen för hello storage-konto som du vill toouse i hello **Azure-prenumeration** nedrullningsbara listrutan.</span><span class="sxs-lookup"><span data-stu-id="787a9-231">Azure RM Subscription - select hello subscription for hello storage account you want toouse in hello **Azure Subscription** drop-down list box.</span></span> <span data-ttu-id="787a9-232">Om hello prenumeration inte visas välja hello **uppdatera** knappen Nästa hello **hantera** länk.</span><span class="sxs-lookup"><span data-stu-id="787a9-232">If hello subscription doesn't appear, choose hello **Refresh** button next hello **Manage** link.</span></span>
   * <span data-ttu-id="787a9-233">Måltypen - Välj **Azure Blob**</span><span class="sxs-lookup"><span data-stu-id="787a9-233">Destination Type - select **Azure Blob**</span></span>
   * <span data-ttu-id="787a9-234">RM Lagringskonto - Välj hello storage-konto du vill toouse för mellanlagring artefakter</span><span class="sxs-lookup"><span data-stu-id="787a9-234">RM Storage Account - select hello storage account you would like toouse for staging artifacts</span></span>
   * <span data-ttu-id="787a9-235">Behållarens namn - Ange hello namn för hello behållare som toouse för mellanlagring; Det kan vara vilket behållarnamn som giltiga, men använder en dedikerad toothis build-definition</span><span class="sxs-lookup"><span data-stu-id="787a9-235">Container Name - enter hello name of hello container you would like toouse for staging; it can be any valid container name, but use one dedicated toothis build definition</span></span>
   
   <span data-ttu-id="787a9-236">För hello utdatavärden:</span><span class="sxs-lookup"><span data-stu-id="787a9-236">For hello output values:</span></span>
   
   * <span data-ttu-id="787a9-237">Ange lagringsbehållaren URI - **artifactsLocation**</span><span class="sxs-lookup"><span data-stu-id="787a9-237">Storage Container URI - enter **artifactsLocation**</span></span>
   * <span data-ttu-id="787a9-238">Storage-behållare SAS-Token - ange **artifactsLocationSasToken**</span><span class="sxs-lookup"><span data-stu-id="787a9-238">Storage Container SAS Token - enter **artifactsLocationSasToken**</span></span>
   
   ![Konfigurera Azure filkopiering aktivitet][16]
6. <span data-ttu-id="787a9-240">Välj hello **Azure Resource distribution** skapa steg och fyll sedan i dess värden.</span><span class="sxs-lookup"><span data-stu-id="787a9-240">Choose hello **Azure Resource Group Deployment** build step and then fill in its values.</span></span>
   
   * <span data-ttu-id="787a9-241">Azure anslutningstypen - Välj **Azure Resource Manager**</span><span class="sxs-lookup"><span data-stu-id="787a9-241">Azure Connection Type - select **Azure Resource Manager**</span></span>
   * <span data-ttu-id="787a9-242">Azure RM-prenumeration – Välj hello prenumeration för distribution i hello **Azure-prenumeration** nedrullningsbara listrutan.</span><span class="sxs-lookup"><span data-stu-id="787a9-242">Azure RM Subscription - select hello subscription for deployment in hello **Azure Subscription** drop-down list box.</span></span> <span data-ttu-id="787a9-243">Det här är vanligtvis hello samma prenumeration som används i föregående steg i hello</span><span class="sxs-lookup"><span data-stu-id="787a9-243">This will usually be hello same subscription used in hello previous step</span></span>
   * <span data-ttu-id="787a9-244">Åtgärd - väljer **skapa eller uppdatera resursgruppen.**</span><span class="sxs-lookup"><span data-stu-id="787a9-244">Action - select **Create or Update Resource Group**</span></span>
   * <span data-ttu-id="787a9-245">Resursgrupp – Välj en resursgrupp eller ange hello namnet på en ny resursgrupp för hello distribution</span><span class="sxs-lookup"><span data-stu-id="787a9-245">Resource Group - select a resource group or enter hello name of a new resource group for hello deployment</span></span>
   * <span data-ttu-id="787a9-246">Plats – Välj hello plats för hello resursgrupp</span><span class="sxs-lookup"><span data-stu-id="787a9-246">Location - select hello location for hello resource group</span></span>
   * <span data-ttu-id="787a9-247">Mall - ange hello sökvägen och namnet på hello mallen toobe distribueras tillagt **$(Build.StagingDirectory)**, till exempel: **$(Build.StagingDirectory/DSC-CI/azuredeploy.json)**</span><span class="sxs-lookup"><span data-stu-id="787a9-247">Template - enter hello path and name of hello template toobe deployed prepending **$(Build.StagingDirectory)**, for example: **$(Build.StagingDirectory/DSC-CI/azuredeploy.json)**</span></span>
   * <span data-ttu-id="787a9-248">Mallparametrar - ange hello sökvägen och namnet på hello parametrar toobe används, tillagt **$(Build.StagingDirectory)**, till exempel: **$(Build.StagingDirectory/DSC-CI/azuredeploy.parameters.json)**</span><span class="sxs-lookup"><span data-stu-id="787a9-248">Template Parameters - enter hello path and name of hello parameters toobe used, prepending **$(Build.StagingDirectory)**, for example: **$(Build.StagingDirectory/DSC-CI/azuredeploy.parameters.json)**</span></span>
   * <span data-ttu-id="787a9-249">Åsidosätt mallparametrar – ange eller kopiera och klistra in följande kod hello:</span><span class="sxs-lookup"><span data-stu-id="787a9-249">Override Template Parameters - enter or copy and paste hello following code:</span></span>
     
     ```    
     -_artifactsLocation $(artifactsLocation) -_artifactsLocationSasToken (ConvertTo-SecureString -String "$(artifactsLocationSasToken)" -AsPlainText -Force)
     ```
     ![Konfigurera Azure-resursgrupp distribution aktivitet][17]
7. <span data-ttu-id="787a9-251">När du har lagt till alla objekt i hello krävs, spara hello build definition och välj **kö nya build** hello överst.</span><span class="sxs-lookup"><span data-stu-id="787a9-251">After you’ve added all hello required items, save hello build definition and choose **Queue new build** at hello top.</span></span>

## <a name="next-steps"></a><span data-ttu-id="787a9-252">Nästa steg</span><span class="sxs-lookup"><span data-stu-id="787a9-252">Next steps</span></span>
<span data-ttu-id="787a9-253">Läs [översikt över Azure Resource Manager](azure-resource-manager/resource-group-overview.md) toolearn mer om Azure Resource Manager och Azure-resursgrupper.</span><span class="sxs-lookup"><span data-stu-id="787a9-253">Read [Azure Resource Manager overview](azure-resource-manager/resource-group-overview.md) toolearn more about Azure Resource Manager and Azure resource groups.</span></span>

[0]: ./media/vs-azure-tools-resource-groups-ci-in-vsts/walkthrough1.png
[1]: ./media/vs-azure-tools-resource-groups-ci-in-vsts/walkthrough2.png
[2]: ./media/vs-azure-tools-resource-groups-ci-in-vsts/walkthrough3.png
[3]: ./media/vs-azure-tools-resource-groups-ci-in-vsts/walkthrough4.png
[4]: ./media/vs-azure-tools-resource-groups-ci-in-vsts/walkthrough5.png
[5]: ./media/vs-azure-tools-resource-groups-ci-in-vsts/walkthrough6.png
[8]: ./media/vs-azure-tools-resource-groups-ci-in-vsts/walkthrough9.png
[9]: ./media/vs-azure-tools-resource-groups-ci-in-vsts/walkthrough10.png
[10]: ./media/vs-azure-tools-resource-groups-ci-in-vsts/walkthrough11b.png
[11]: ./media/vs-azure-tools-resource-groups-ci-in-vsts/walkthrough12.png
[12]: ./media/vs-azure-tools-resource-groups-ci-in-vsts/walkthrough13.png
[13]: ./media/vs-azure-tools-resource-groups-ci-in-vsts/walkthrough14.png
[14]: ./media/vs-azure-tools-resource-groups-ci-in-vsts/walkthrough15.png
[15]: ./media/vs-azure-tools-resource-groups-ci-in-vsts/walkthrough16.png
[16]: ./media/vs-azure-tools-resource-groups-ci-in-vsts/walkthrough17.png
[17]: ./media/vs-azure-tools-resource-groups-ci-in-vsts/walkthrough18.png

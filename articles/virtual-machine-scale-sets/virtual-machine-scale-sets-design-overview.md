---
title: "aaaDesign överväganden för Azure Virtual Machine-Skalningsuppsättningar | Microsoft Docs"
description: "Lär dig mer om designöverväganden för din Azure Virtual Machine-Skalningsuppsättningar"
keywords: Anger om Linux-dator, virtuella datorn
services: virtual-machine-scale-sets
documentationcenter: 
author: gatneil
manager: madhana
editor: tysonn
tags: azure-resource-manager
ms.assetid: c27c6a59-a0ab-4117-a01b-42b049464ca1
ms.service: virtual-machine-scale-sets
ms.workload: na
ms.tgt_pltfrm: vm-linux
ms.devlang: na
ms.topic: article
ms.date: 06/01/2017
ms.author: negat
ms.openlocfilehash: f8644d36fe5903bd4b74df26dca5dc3211ee3516
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: sv-SE
ms.lasthandoff: 10/06/2017
---
# <a name="design-considerations-for-scale-sets"></a><span data-ttu-id="f50d4-104">Designöverväganden för Skalningsuppsättningar</span><span class="sxs-lookup"><span data-stu-id="f50d4-104">Design Considerations For Scale Sets</span></span>
<span data-ttu-id="f50d4-105">Det här avsnittet beskrivs överväganden vid utformning för Skalningsuppsättningar i virtuella datorer.</span><span class="sxs-lookup"><span data-stu-id="f50d4-105">This topic discusses design considerations for Virtual Machine Scale Sets.</span></span> <span data-ttu-id="f50d4-106">Information om vilka virtuella datorer är finns för[översikt över virtuella datorer skala anger](virtual-machine-scale-sets-overview.md).</span><span class="sxs-lookup"><span data-stu-id="f50d4-106">For information about what Virtual Machine Scale Sets are, refer too[Virtual Machine Scale Sets Overview](virtual-machine-scale-sets-overview.md).</span></span>

## <a name="when-toouse-scale-sets-instead-of-virtual-machines"></a><span data-ttu-id="f50d4-107">När toouse skalningsuppsättningarna i stället för virtuella datorer?</span><span class="sxs-lookup"><span data-stu-id="f50d4-107">When toouse scale sets instead of virtual machines?</span></span>
<span data-ttu-id="f50d4-108">I allmänhet är skaluppsättningar användbara för att distribuera hög tillgänglighet infrastruktur där en uppsättning datorer har liknande konfiguration.</span><span class="sxs-lookup"><span data-stu-id="f50d4-108">Generally, scale sets are useful for deploying highly available infrastructure where a set of machines have similar configuration.</span></span> <span data-ttu-id="f50d4-109">Vissa funktioner är dock endast tillgängliga i skalningsuppsättningar medan andra funktioner är bara tillgängliga i virtuella datorer.</span><span class="sxs-lookup"><span data-stu-id="f50d4-109">However, some features are only available in scale sets while other features are only available in VMs.</span></span> <span data-ttu-id="f50d4-110">Ordna toomake ett välgrundat beslut om när toouse varje teknik vi måste först ta en titt på några av hello vanligaste funktionerna som är tillgängliga i skalningsuppsättningar men inte virtuella datorer:</span><span class="sxs-lookup"><span data-stu-id="f50d4-110">In order toomake an informed decision about when toouse each technology, we should first take a look at some of hello commonly used features that are available in scale sets but not VMs:</span></span>

### <a name="scale-set-specific-features"></a><span data-ttu-id="f50d4-111">Scale set-specifika funktioner</span><span class="sxs-lookup"><span data-stu-id="f50d4-111">Scale set-specific features</span></span>

- <span data-ttu-id="f50d4-112">När du anger hello skala ange konfiguration, kan du uppdatera hello ”kapacitet” egenskapen toodeploy flera virtuella datorer parallellt.</span><span class="sxs-lookup"><span data-stu-id="f50d4-112">Once you specify hello scale set configuration, you can simply update hello "capacity" property toodeploy more VMs in parallel.</span></span> <span data-ttu-id="f50d4-113">Detta är mycket enklare än att skriva ett skript tooorchestrate distribuera många enskilda virtuella datorer parallellt.</span><span class="sxs-lookup"><span data-stu-id="f50d4-113">This is much simpler than writing a script tooorchestrate deploying many individual VMs in parallel.</span></span>
- <span data-ttu-id="f50d4-114">Du kan [Använd Azure Autoskala tooautomatically skala en skalningsuppsättning](./virtual-machine-scale-sets-autoscale-overview.md) men inte enskilda virtuella datorer.</span><span class="sxs-lookup"><span data-stu-id="f50d4-114">You can [use Azure Autoscale tooautomatically scale a scale set](./virtual-machine-scale-sets-autoscale-overview.md) but not individual VMs.</span></span>
- <span data-ttu-id="f50d4-115">Du kan [avbildningsåterställning skaluppsättning för virtuella datorer](https://docs.microsoft.com/rest/api/virtualmachinescalesets/manage-a-vm) men [inte enskilda virtuella datorer](https://docs.microsoft.com/rest/api/compute/virtualmachines).</span><span class="sxs-lookup"><span data-stu-id="f50d4-115">You can [reimage scale set VMs](https://docs.microsoft.com/rest/api/virtualmachinescalesets/manage-a-vm) but [not individual VMs](https://docs.microsoft.com/rest/api/compute/virtualmachines).</span></span>
- <span data-ttu-id="f50d4-116">Du kan [overprovision](./virtual-machine-scale-sets-design-overview.md) skaluppsättning för virtuella datorer för ökad tillförlitlighet och snabbare distributionstider.</span><span class="sxs-lookup"><span data-stu-id="f50d4-116">You can [overprovision](./virtual-machine-scale-sets-design-overview.md) scale set VMs for increased reliability and quicker deployment times.</span></span> <span data-ttu-id="f50d4-117">Du kan göra detta med enskilda virtuella datorer om du skriver anpassade kod toodo.</span><span class="sxs-lookup"><span data-stu-id="f50d4-117">You cannot do this with individual VMs unless you write custom code toodo this.</span></span>
- <span data-ttu-id="f50d4-118">Du kan ange en [uppgradera princip](./virtual-machine-scale-sets-upgrade-scale-set.md) toomake den enkelt tooroll ut uppgraderingar över virtuella datorer i en skaluppsättning.</span><span class="sxs-lookup"><span data-stu-id="f50d4-118">You can specify an [upgrade policy](./virtual-machine-scale-sets-upgrade-scale-set.md) toomake it easy tooroll out upgrades across VMs in your scale set.</span></span> <span data-ttu-id="f50d4-119">Med enskilda virtuella datorer, måste du samordnar uppdateringar själv.</span><span class="sxs-lookup"><span data-stu-id="f50d4-119">With individual VMs, you must orchestrate updates yourself.</span></span>

### <a name="vm-specific-features"></a><span data-ttu-id="f50d4-120">VM-specifika funktioner</span><span class="sxs-lookup"><span data-stu-id="f50d4-120">VM-specific features</span></span>

<span data-ttu-id="f50d4-121">Hej på andra sidan, vissa funktioner är endast tillgängliga i virtuella datorer (minst för närvarande för hello):</span><span class="sxs-lookup"><span data-stu-id="f50d4-121">On hello other hand, some features are only available in VMs (at least for hello time being):</span></span>

- <span data-ttu-id="f50d4-122">Du kan bifoga data diskar toospecific enskilda virtuella datorer, men bifogade datadiskar har konfigurerats för alla virtuella datorer i en skaluppsättning.</span><span class="sxs-lookup"><span data-stu-id="f50d4-122">You can attach data disks toospecific individual VMs, but attached data disks are configured for all VMs in a scale set.</span></span>
- <span data-ttu-id="f50d4-123">Du kan koppla icke-tom data diskar tooindividual virtuella datorer men inte virtuella datorer i en skaluppsättning.</span><span class="sxs-lookup"><span data-stu-id="f50d4-123">You can attach non-empty data disks tooindividual VMs but not VMs in a scale set.</span></span>
- <span data-ttu-id="f50d4-124">Du kan ögonblicksbilder för en enskild VM men inte en virtuell dator i en skaluppsättning.</span><span class="sxs-lookup"><span data-stu-id="f50d4-124">You can snapshot an individual VM but not a VM in a scale set.</span></span>
- <span data-ttu-id="f50d4-125">Du kan göra en avbildning från en enskild VM men inte från en virtuell dator i en skaluppsättning.</span><span class="sxs-lookup"><span data-stu-id="f50d4-125">You can capture an image from an individual VM but not from a VM in a scale set.</span></span>
- <span data-ttu-id="f50d4-126">Du kan migrera en enskild VM från interna diskar toomanaged diskar, men du kan inte göra detta för virtuella datorer i en skaluppsättning.</span><span class="sxs-lookup"><span data-stu-id="f50d4-126">You can migrate an individual VM from native disks toomanaged disks, but you cannot do this for VMs in a scale set.</span></span>
- <span data-ttu-id="f50d4-127">Du kan tilldela IPv6 offentliga IP-adresser tooindividual Virtuella nätverkskort, men inte för virtuella datorer i en skaluppsättning.</span><span class="sxs-lookup"><span data-stu-id="f50d4-127">You can assign IPv6 public IP addresses tooindividual VM nics but cannot do so for VMs in a scale set.</span></span> <span data-ttu-id="f50d4-128">Observera att du kan tilldela IPv6 offentliga IP-adresser tooload belastningsutjämnare framför antingen enskilda virtuella datorer eller skaluppsättning för virtuella datorer.</span><span class="sxs-lookup"><span data-stu-id="f50d4-128">Note that you can assign IPv6 public IP addresses tooload balancers in front of either individual VMs or scale set VMs.</span></span>

## <a name="storage"></a><span data-ttu-id="f50d4-129">Lagring</span><span class="sxs-lookup"><span data-stu-id="f50d4-129">Storage</span></span>

### <a name="scale-sets-with-azure-managed-disks"></a><span data-ttu-id="f50d4-130">Med Azure hanterade diskar</span><span class="sxs-lookup"><span data-stu-id="f50d4-130">Scale sets with Azure Managed Disks</span></span>
<span data-ttu-id="f50d4-131">Skaluppsättningar kan skapas med [Azure hanterade diskar](../virtual-machines/windows/managed-disks-overview.md) i stället för traditionella Azure storage-konton.</span><span class="sxs-lookup"><span data-stu-id="f50d4-131">Scale sets can be created with [Azure Managed Disks](../virtual-machines/windows/managed-disks-overview.md) instead of traditional Azure storage accounts.</span></span> <span data-ttu-id="f50d4-132">Hanterade diskar har hello följande fördelar:</span><span class="sxs-lookup"><span data-stu-id="f50d4-132">Managed Disks provide hello following benefits:</span></span>
- <span data-ttu-id="f50d4-133">Du har inte toopre-skapa en uppsättning Azure storage-konton för hello skaluppsättning för virtuella datorer.</span><span class="sxs-lookup"><span data-stu-id="f50d4-133">You do not have toopre-create a set of Azure storage accounts for hello scale set VMs.</span></span>
- <span data-ttu-id="f50d4-134">Du kan definiera [anslutna datadiskar](virtual-machine-scale-sets-attached-disks.md) hello virtuella datorer i din skala anges.</span><span class="sxs-lookup"><span data-stu-id="f50d4-134">You can define [attached data disks](virtual-machine-scale-sets-attached-disks.md) for hello VMs in your scale set.</span></span>
- <span data-ttu-id="f50d4-135">Skaluppsättningar kan konfigureras för[stöder in too1 000 virtuella datorer i en mängd](virtual-machine-scale-sets-placement-groups.md).</span><span class="sxs-lookup"><span data-stu-id="f50d4-135">Scale sets can be configured too[support up too1,000 VMs in a set](virtual-machine-scale-sets-placement-groups.md).</span></span> 

<span data-ttu-id="f50d4-136">Om du har en befintlig mall kan du också [uppdatera hello mallen toouse hanterade diskar](virtual-machine-scale-sets-convert-template-to-md.md).</span><span class="sxs-lookup"><span data-stu-id="f50d4-136">If you have an existing template, you can also [update hello template toouse Managed Disks](virtual-machine-scale-sets-convert-template-to-md.md).</span></span>

### <a name="user-managed-storage"></a><span data-ttu-id="f50d4-137">Användarhanterat lagring</span><span class="sxs-lookup"><span data-stu-id="f50d4-137">User-managed Storage</span></span>
<span data-ttu-id="f50d4-138">En skalningsuppsättning som inte är definierad med Azure hanterade diskar är beroende av användarskapade konton toostore hello OS diskar med lagringsutrymme för virtuella datorer hello i hello set.</span><span class="sxs-lookup"><span data-stu-id="f50d4-138">A scale set that is not defined with Azure Managed Disks relies on user-created storage accounts toostore hello OS disks of hello VMs in hello set.</span></span> <span data-ttu-id="f50d4-139">Förhållandet 20 virtuella datorer per lagringskonto eller mindre rekommenderas tooachieve maximala i/o och dra nytta av _överetablering_ (se nedan).</span><span class="sxs-lookup"><span data-stu-id="f50d4-139">A ratio of 20 VMs per storage account or less is recommended tooachieve maximum IO and also take advantage of _overprovisioning_ (see below).</span></span> <span data-ttu-id="f50d4-140">Vi rekommenderar också att du sprids hello början tecknen i hello lagringskontonamn hello alfabetet.</span><span class="sxs-lookup"><span data-stu-id="f50d4-140">It is also recommended that you spread hello beginning characters of hello storage account names across hello alphabet.</span></span> <span data-ttu-id="f50d4-141">Om du gör det hjälper till att sprida belastningen över olika interna system.</span><span class="sxs-lookup"><span data-stu-id="f50d4-141">Doing so helps spread load across different internal systems.</span></span> 


## <a name="overprovisioning"></a><span data-ttu-id="f50d4-142">Överetablering</span><span class="sxs-lookup"><span data-stu-id="f50d4-142">Overprovisioning</span></span>
<span data-ttu-id="f50d4-143">Skalningsuppsättningarna för närvarande standard för ”överetablering” virtuella datorer.</span><span class="sxs-lookup"><span data-stu-id="f50d4-143">Scale sets currently default too"overprovisioning" VMs.</span></span> <span data-ttu-id="f50d4-144">Med överetablering aktiverat hello skala ange faktiskt varv upp flera virtuella datorer än du uppge och tar bort hello extra VM: ar när hello begärt antal virtuella datorer har etablerats.</span><span class="sxs-lookup"><span data-stu-id="f50d4-144">With overprovisioning turned on, hello scale set actually spins up more VMs than you asked for, then deletes hello extra VMs once hello requested number of VMs are successfully provisioned.</span></span> <span data-ttu-id="f50d4-145">Överetablering förbättrar etablering slutförandefrekvenser och minskar distributionstiden för.</span><span class="sxs-lookup"><span data-stu-id="f50d4-145">Overprovisioning improves provisioning success rates and reduces deployment time.</span></span> <span data-ttu-id="f50d4-146">Du debiteras inte för hello extra VM: ar, och de inte räknas in i din kvotgränser.</span><span class="sxs-lookup"><span data-stu-id="f50d4-146">You are not billed for hello extra VMs, and they do not count toward your quota limits.</span></span>

<span data-ttu-id="f50d4-147">Överetablering förbättra etablering slutförandefrekvenser, kan orsaka förvirrande beteendet för ett program som är inte utformad toohandle extra VM: ar som visas och sedan försvinner.</span><span class="sxs-lookup"><span data-stu-id="f50d4-147">While overprovisioning does improve provisioning success rates, it can cause confusing behavior for an application that is not designed toohandle extra VMs appearing and then disappearing.</span></span> <span data-ttu-id="f50d4-148">tooturn överetablering, kontrollera att du har hello efter strängen i mallen: `"overprovision": "false"`.</span><span class="sxs-lookup"><span data-stu-id="f50d4-148">tooturn overprovisioning off, ensure you have hello following string in your template: `"overprovision": "false"`.</span></span> <span data-ttu-id="f50d4-149">Mer information finns i hello [skala ange REST API-dokumentation](/rest/api/virtualmachinescalesets/create-or-update-a-set).</span><span class="sxs-lookup"><span data-stu-id="f50d4-149">More details can be found in hello [Scale Set REST API documentation](/rest/api/virtualmachinescalesets/create-or-update-a-set).</span></span>

<span data-ttu-id="f50d4-150">Om du inaktiverar överetablering din skaluppsättning använder användarhanterat lagring, du kan ha fler än 20 virtuella datorer per lagringskonto, men toogo ovan 40 IO av prestandaskäl rekommenderas inte.</span><span class="sxs-lookup"><span data-stu-id="f50d4-150">If your scale set uses user-managed storage, and you turn off overprovisioning, you can have more than 20 VMs per storage account, but it is not recommended toogo above 40 for IO performance reasons.</span></span> 

## <a name="limits"></a><span data-ttu-id="f50d4-151">Begränsningar</span><span class="sxs-lookup"><span data-stu-id="f50d4-151">Limits</span></span>
<span data-ttu-id="f50d4-152">En skalningsuppsättning bygger på Marketplace-avbildning (även kallat en plattformsavbildning) och konfigurerat toouse Azure hanterade diskar stöder en kapacitet på upp too1 000 virtuella datorer.</span><span class="sxs-lookup"><span data-stu-id="f50d4-152">A scale set built on a Marketplace image (also known as a platform image) and configured toouse Azure Managed Disks supports a capacity of up too1,000 VMs.</span></span> <span data-ttu-id="f50d4-153">Om du konfigurerar din scale set toosupport fler än 100 virtuella datorer, hello samma i alla scenarier arbete (till exempel belastningsutjämning).</span><span class="sxs-lookup"><span data-stu-id="f50d4-153">If you configure your scale set toosupport more than 100 VMs, not all scenarios work hello same (for example load balancing).</span></span> <span data-ttu-id="f50d4-154">Mer information finns i [arbeta med stora virtuella datorer](virtual-machine-scale-sets-placement-groups.md).</span><span class="sxs-lookup"><span data-stu-id="f50d4-154">For more information, see [Working with large virtual machine scale sets](virtual-machine-scale-sets-placement-groups.md).</span></span> 

<span data-ttu-id="f50d4-155">En skaluppsättningen som är konfigurerad med användarhanterat storage-konton är för närvarande begränsad too100 virtuella datorer (och rekommenderas för skalans 5 storage-konton).</span><span class="sxs-lookup"><span data-stu-id="f50d4-155">A scale set configured with user-managed storage accounts is currently limited too100 VMs (and 5 storage accounts are recommended for this scale).</span></span>

<span data-ttu-id="f50d4-156">En skalningsuppsättning som bygger på en anpassad avbildning (en som skapats av du) kan ha en kapacitet på upp too100 virtuella datorer när konfigurerats med Azure hanterade diskar.</span><span class="sxs-lookup"><span data-stu-id="f50d4-156">A scale set built on a custom image (one built by you) can have a capacity of up too100 VMs when configured with Azure Managed disks.</span></span> <span data-ttu-id="f50d4-157">Om hello skaluppsättning är konfigurerad med användarhanterat storage-konton, måste det skapa alla OS-disk VHD i ett lagringskonto.</span><span class="sxs-lookup"><span data-stu-id="f50d4-157">If hello scale set is configured with user-managed storage accounts, it must create all OS disk VHDs within one storage account.</span></span> <span data-ttu-id="f50d4-158">Därför hello maximalt bör antalet virtuella datorer i en skaluppsättning som bygger på en anpassad avbildning och Användarhanterad lagring är 20.</span><span class="sxs-lookup"><span data-stu-id="f50d4-158">As a result, hello maximum recommended number of VMs in a scale set built on a custom image and user-managed storage is 20.</span></span> <span data-ttu-id="f50d4-159">Om du inaktiverar överetablering går du in too40.</span><span class="sxs-lookup"><span data-stu-id="f50d4-159">If you turn off overprovisioning, you can go up too40.</span></span>

<span data-ttu-id="f50d4-160">För flera virtuella datorer än dessa gränser tillåter du behöver toodeploy flera skalningsuppsättningarna enligt [mallen](https://github.com/Azure/azure-quickstart-templates/tree/master/301-custom-images-at-scale).</span><span class="sxs-lookup"><span data-stu-id="f50d4-160">For more VMs than these limits allow, you need toodeploy multiple scale sets as shown in [this template](https://github.com/Azure/azure-quickstart-templates/tree/master/301-custom-images-at-scale).</span></span>


---
title: "Åtkomst till Azure Media Services API med Azure Active Directory-autentisering | Microsoft Docs"
description: "Lär dig mer om koncept och steg för att använda Azure Active Directory (Azure AD) för att autentisera åtkomst till Azure Media Services API."
services: media-services
documentationcenter: 
author: Juliako
manager: cfowler
editor: 
ms.service: media-services
ms.workload: media
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 06/17/2017
ms.author: juliako
ms.openlocfilehash: 0e1217afb0a37353793c64ae927b741d9fee4954
ms.sourcegitcommit: 18ad9bc049589c8e44ed277f8f43dcaa483f3339
ms.translationtype: MT
ms.contentlocale: sv-SE
ms.lasthandoff: 08/29/2017
---
# <a name="access-the-azure-media-services-api-with-azure-ad-authentication"></a><span data-ttu-id="478bd-103">Åtkomst till Azure Media Services-API med Azure AD-autentisering</span><span class="sxs-lookup"><span data-stu-id="478bd-103">Access the Azure Media Services API with Azure AD authentication</span></span>
 
<span data-ttu-id="478bd-104">Azure Media Services API är en RESTful-API.</span><span class="sxs-lookup"><span data-stu-id="478bd-104">The Azure Media Services API is a RESTful API.</span></span> <span data-ttu-id="478bd-105">Du kan använda den för att utföra åtgärder på media resurser med hjälp av REST-API eller genom att använda tillgängliga klient-SDK:.</span><span class="sxs-lookup"><span data-stu-id="478bd-105">You can use it to perform operations on media resources by using a REST API or by using available client SDKs.</span></span> <span data-ttu-id="478bd-106">Azure Media Services erbjuder en klient för Media Services SDK för Microsoft .NET.</span><span class="sxs-lookup"><span data-stu-id="478bd-106">Azure Media Services offers a Media Services client SDK for Microsoft .NET.</span></span> <span data-ttu-id="478bd-107">Om du vill ha behörighet att komma åt Media Services-resurser och Media Services-API, måste du först autentiseras.</span><span class="sxs-lookup"><span data-stu-id="478bd-107">To be authorized to access Media Services resources and the Media Services API, you must first be authenticated.</span></span> 

<span data-ttu-id="478bd-108">Media Services stöder [Azure Active Directory (Azure AD)-baserad autentisering](../active-directory/active-directory-whatis.md).</span><span class="sxs-lookup"><span data-stu-id="478bd-108">Media Services supports [Azure Active Directory (Azure AD)-based authentication](../active-directory/active-directory-whatis.md).</span></span> <span data-ttu-id="478bd-109">Azure Media REST-tjänsten kräver att användaren eller programmet som gör REST API-begäranden har antingen den **deltagare** eller **ägare** roll åtkomst till resurser.</span><span class="sxs-lookup"><span data-stu-id="478bd-109">The Azure Media REST service requires that the user or application that makes the REST API requests have either the **Contributor** or **Owner** role to access the resources.</span></span> <span data-ttu-id="478bd-110">Mer information finns i [Kom igång med rollbaserad åtkomstkontroll i Azure portal](../active-directory/role-based-access-control-what-is.md).</span><span class="sxs-lookup"><span data-stu-id="478bd-110">For more information, see [Get started with Role-Based Access Control in the Azure portal](../active-directory/role-based-access-control-what-is.md).</span></span>  

> [!IMPORTANT]
> <span data-ttu-id="478bd-111">Media Services stöder för närvarande Azure Access Control service autentisering modellen.</span><span class="sxs-lookup"><span data-stu-id="478bd-111">Currently, Media Services supports the Azure Access Control service authentication model.</span></span> <span data-ttu-id="478bd-112">Access Control tillstånd att bli inaktuell på den 1 juni 2018.</span><span class="sxs-lookup"><span data-stu-id="478bd-112">However, Access Control authorization will be deprecated on June 1, 2018.</span></span> <span data-ttu-id="478bd-113">Vi rekommenderar att du migrerar till Azure AD-autentisering så snart som möjligt.</span><span class="sxs-lookup"><span data-stu-id="478bd-113">We recommend that you migrate to the Azure AD authentication model as soon as possible.</span></span>

<span data-ttu-id="478bd-114">Det här dokumentet ger en översikt över hur åtkomst till Media Services-API med hjälp av REST- eller .NET-API: er.</span><span class="sxs-lookup"><span data-stu-id="478bd-114">This document gives an overview of how to access the Media Services API by using REST or .NET APIs.</span></span>

## <a name="access-control"></a><span data-ttu-id="478bd-115">Åtkomstkontroll</span><span class="sxs-lookup"><span data-stu-id="478bd-115">Access control</span></span>

<span data-ttu-id="478bd-116">Den anropande användaren måste ha en medarbetare eller ägare roll för Media Services-kontot som försöker komma åt för Azure Media REST-begäran ska lyckas.</span><span class="sxs-lookup"><span data-stu-id="478bd-116">For the Azure Media REST request to succeed, the calling user must have a Contributor or Owner role for the Media Services account it is trying to access.</span></span>  
<span data-ttu-id="478bd-117">Bara en användare med rollen ägare kan ge åtkomst till företagsresurser (konto) media till nya användare eller appar.</span><span class="sxs-lookup"><span data-stu-id="478bd-117">Only a user with the Owner role can give media resource (account) access to new users or apps.</span></span> <span data-ttu-id="478bd-118">Deltagarrollen kan komma åt endast mediaresurs.</span><span class="sxs-lookup"><span data-stu-id="478bd-118">The Contributor role can access only the media resource.</span></span>
<span data-ttu-id="478bd-119">Obehöriga begäranden misslyckas med statuskoden 401.</span><span class="sxs-lookup"><span data-stu-id="478bd-119">Unauthorized requests fail, with status code of 401.</span></span> <span data-ttu-id="478bd-120">Om du ser felet, kontrollera om användaren har rollen Medarbetare eller ägare som tilldelas för Media Services användarkonto.</span><span class="sxs-lookup"><span data-stu-id="478bd-120">If you see this error code, check whether your user has the Contributor or Owner role assigned for the user's Media Services account.</span></span> <span data-ttu-id="478bd-121">Du kan kontrollera detta i Azure-portalen.</span><span class="sxs-lookup"><span data-stu-id="478bd-121">You can check this in the Azure portal.</span></span> <span data-ttu-id="478bd-122">Sök efter media-konto och klicka sedan på den **åtkomstkontroll** fliken.</span><span class="sxs-lookup"><span data-stu-id="478bd-122">Search for your media account, and then click the **Access control** tab.</span></span> 

![Access control-fliken](./media/media-services-use-aad-auth-to-access-ams-api/media-services-access-control.png)

## <a name="types-of-authentication"></a><span data-ttu-id="478bd-124">Typer av autentisering</span><span class="sxs-lookup"><span data-stu-id="478bd-124">Types of authentication</span></span> 
 
<span data-ttu-id="478bd-125">När du använder Azure AD-autentisering med Azure Media Services, har du två alternativ för autentisering:</span><span class="sxs-lookup"><span data-stu-id="478bd-125">When you use Azure AD authentication with Azure Media Services, you have two authentication options:</span></span>

- <span data-ttu-id="478bd-126">**Användarautentisering**.</span><span class="sxs-lookup"><span data-stu-id="478bd-126">**User authentication**.</span></span> <span data-ttu-id="478bd-127">Autentisera en person som använder appen för att interagera med Media Services-resurser.</span><span class="sxs-lookup"><span data-stu-id="478bd-127">Authenticate a person who is using the app to interact with Media Services resources.</span></span> <span data-ttu-id="478bd-128">Interaktiva program bör först uppmana användaren att användarens autentiseringsuppgifter.</span><span class="sxs-lookup"><span data-stu-id="478bd-128">The interactive application should first prompt the user for the user's credentials.</span></span> <span data-ttu-id="478bd-129">Ett exempel är en management konsolapp som används av behöriga användare för att övervaka kodning jobb eller direktsänd strömning.</span><span class="sxs-lookup"><span data-stu-id="478bd-129">An example is a management console app used by authorized users to monitor encoding jobs or live streaming.</span></span> 
- <span data-ttu-id="478bd-130">**Huvudnamn autentiseringen av tjänsten**.</span><span class="sxs-lookup"><span data-stu-id="478bd-130">**Service principal authentication**.</span></span> <span data-ttu-id="478bd-131">Autentisera en tjänst.</span><span class="sxs-lookup"><span data-stu-id="478bd-131">Authenticate a service.</span></span> <span data-ttu-id="478bd-132">Program som ofta använder den här autentiseringsmetoden är appar som körs daemon tjänster, mellannivå tjänster eller schemalagda jobb.</span><span class="sxs-lookup"><span data-stu-id="478bd-132">Applications that commonly use this authentication method are apps that run daemon services, middle-tier services, or scheduled jobs.</span></span> <span data-ttu-id="478bd-133">Exempel är webbappar, funktionen appar, logikappar, API och mikrotjänster.</span><span class="sxs-lookup"><span data-stu-id="478bd-133">Examples are web apps, function apps, logic apps, API, and microservices.</span></span>

### <a name="user-authentication"></a><span data-ttu-id="478bd-134">Användarautentisering</span><span class="sxs-lookup"><span data-stu-id="478bd-134">User authentication</span></span> 

<span data-ttu-id="478bd-135">Program som ska använda användarautentiseringsmetoden är övervakning av interna appar eller hantering: mobila appar, Windows-appar och konsolprogram.</span><span class="sxs-lookup"><span data-stu-id="478bd-135">Applications that should use the user authentication method are management or monitoring native apps: mobile apps, Windows apps, and Console applications.</span></span> <span data-ttu-id="478bd-136">Den här typen av lösningen är användbart när du vill mänsklig interaktion med tjänsten på något av följande scenarier:</span><span class="sxs-lookup"><span data-stu-id="478bd-136">This type of solution is useful when you want human interaction with the service in one of the following scenarios:</span></span>

- <span data-ttu-id="478bd-137">Instrumentpanelen för övervakning för kodning jobb.</span><span class="sxs-lookup"><span data-stu-id="478bd-137">Monitoring dashboard for your encoding jobs.</span></span>
- <span data-ttu-id="478bd-138">Instrumentpanelen för övervakning för din direktsända dataströmmar.</span><span class="sxs-lookup"><span data-stu-id="478bd-138">Monitoring dashboard for your live streams.</span></span>
- <span data-ttu-id="478bd-139">Hanteringsprogram för stationära och mobila användare att administrera resurser i ett Media Services-konto.</span><span class="sxs-lookup"><span data-stu-id="478bd-139">Management application for desktop or mobile users to administer resources in a Media Services account.</span></span>

> [!NOTE]
> <span data-ttu-id="478bd-140">Den här autentiseringsmetoden bör inte användas för konsumentinriktade program.</span><span class="sxs-lookup"><span data-stu-id="478bd-140">This authentication method should not be used for consumer-facing applications.</span></span> 

<span data-ttu-id="478bd-141">Det ursprungliga programmet måste du först skaffa en åtkomst-token från Azure AD och använda den när du gör HTTP-förfrågningar till Media Services REST API.</span><span class="sxs-lookup"><span data-stu-id="478bd-141">A native application must first acquire an access token from Azure AD, and then use it when you make HTTP requests to the Media Services REST API.</span></span> <span data-ttu-id="478bd-142">Lägg till åtkomst-token i huvudet i begäran.</span><span class="sxs-lookup"><span data-stu-id="478bd-142">Add the access token to the request header.</span></span> 

<span data-ttu-id="478bd-143">Följande diagram visar en typisk interaktiva program autentiseringsflödet:</span><span class="sxs-lookup"><span data-stu-id="478bd-143">The following diagram shows a typical interactive application authentication flow:</span></span> 

![Ursprungliga appar diagram](./media/media-services-use-aad-auth-to-access-ams-api/media-services-native-aad-app1.png)

<span data-ttu-id="478bd-145">I föregående diagram representerar siffrorna flödet av begäranden i kronologisk ordning.</span><span class="sxs-lookup"><span data-stu-id="478bd-145">In the preceding diagram, the numbers represent the flow of the requests in chronological order.</span></span>

> [!NOTE]
> <span data-ttu-id="478bd-146">När du använder användarautentiseringsmetoden dela alla appar samma (standard) programspecifika klient-ID och det ursprungliga programmet omdirigerings-URI.</span><span class="sxs-lookup"><span data-stu-id="478bd-146">When you use the user authentication method, all apps share the same (default) native application client ID and native application redirect URI.</span></span> 

1. <span data-ttu-id="478bd-147">Uppmana användaren att ange autentiseringsuppgifter.</span><span class="sxs-lookup"><span data-stu-id="478bd-147">Prompt a user for credentials.</span></span>
2. <span data-ttu-id="478bd-148">Begär en åtkomst-token för Azure AD med följande parametrar:</span><span class="sxs-lookup"><span data-stu-id="478bd-148">Request an Azure AD access token with the following parameters:</span></span>  

    * <span data-ttu-id="478bd-149">Slutpunkten för Azure AD-klient.</span><span class="sxs-lookup"><span data-stu-id="478bd-149">Azure AD tenant endpoint.</span></span>

        <span data-ttu-id="478bd-150">Klient-informationen kan hämtas från Azure-portalen.</span><span class="sxs-lookup"><span data-stu-id="478bd-150">The tenant information can be retrieved from the Azure portal.</span></span> <span data-ttu-id="478bd-151">Placera markören över namnet på den inloggade användaren i övre högra hörnet.</span><span class="sxs-lookup"><span data-stu-id="478bd-151">Place your cursor over the name of the signed-in user in the top right corner.</span></span>
    * <span data-ttu-id="478bd-152">Media Services resurs-URI.</span><span class="sxs-lookup"><span data-stu-id="478bd-152">Media Services resource URI.</span></span> 

        <span data-ttu-id="478bd-153">Den här URI är samma för Media Services-konton som är i samma Azure-miljön (till exempel https://rest.media.azure.net).</span><span class="sxs-lookup"><span data-stu-id="478bd-153">This URI is the same for Media Services accounts that are in the same Azure environment (for example, https://rest.media.azure.net).</span></span>

    * <span data-ttu-id="478bd-154">Media Services (ursprunglig) programmet klient-ID.</span><span class="sxs-lookup"><span data-stu-id="478bd-154">Media Services (native) application client ID.</span></span>
    * <span data-ttu-id="478bd-155">Media Services (intern)-programmet omdirigerings-URI.</span><span class="sxs-lookup"><span data-stu-id="478bd-155">Media Services (native) application redirect URI.</span></span>
    * <span data-ttu-id="478bd-156">Resurs-URI för REST Media Services.</span><span class="sxs-lookup"><span data-stu-id="478bd-156">Resource URI for REST Media Services.</span></span>
        
        <span data-ttu-id="478bd-157">URI som representerar REST API-slutpunkt (till exempel https://test03.restv2.westus.media.azure.net/api/).</span><span class="sxs-lookup"><span data-stu-id="478bd-157">The URI represents the REST API endpoint (for example, https://test03.restv2.westus.media.azure.net/api/).</span></span>

    <span data-ttu-id="478bd-158">Värden för dessa parametrar finns [Använd Azure-portalen för att få åtkomst till Azure AD-autentiseringsinställningar](media-services-portal-get-started-with-aad.md) med alternativet användare för autentisering.</span><span class="sxs-lookup"><span data-stu-id="478bd-158">To get values for these parameters, see [Use the Azure portal to access Azure AD authentication settings](media-services-portal-get-started-with-aad.md) using the user authentication option.</span></span>

3. <span data-ttu-id="478bd-159">Azure AD-åtkomsttoken skickas till klienten.</span><span class="sxs-lookup"><span data-stu-id="478bd-159">The Azure AD access token is sent to the client.</span></span>
4. <span data-ttu-id="478bd-160">Klienten skickar en begäran till Azure Media REST-API med Azure AD-åtkomsttoken.</span><span class="sxs-lookup"><span data-stu-id="478bd-160">The client sends a request to the Azure Media REST API with the Azure AD access token.</span></span>
5. <span data-ttu-id="478bd-161">Klienten hämtar tillbaka data från Media Services.</span><span class="sxs-lookup"><span data-stu-id="478bd-161">The client gets back the data from Media Services.</span></span>

<span data-ttu-id="478bd-162">Information om hur du använder Azure AD-autentisering för att kommunicera med REST-begäranden med klienten för Media Services .NET SDK finns [Använd Azure AD-autentisering för åtkomst till Media Services-API med .NET](media-services-dotnet-get-started-with-aad.md).</span><span class="sxs-lookup"><span data-stu-id="478bd-162">For information about how to use Azure AD authentication to communicate with REST requests by using the Media Services .NET client SDK, see [Use Azure AD authentication to access the Media Services API with .NET](media-services-dotnet-get-started-with-aad.md).</span></span> 

<span data-ttu-id="478bd-163">Om du inte använder klienten Media Services .NET SDK, måste du manuellt skapa en Tokenbegäran för Azure AD-åtkomst med hjälp av parametrar som beskrivs i steg 2.</span><span class="sxs-lookup"><span data-stu-id="478bd-163">If you are not using the Media Services .NET client SDK, you must manually create an Azure AD access token request by using the parameters described in step 2.</span></span> <span data-ttu-id="478bd-164">Mer information finns i [hur du använder Azure AD-Autentiseringsbiblioteket för att hämta Azure AD-token](../active-directory/develop/active-directory-authentication-libraries.md).</span><span class="sxs-lookup"><span data-stu-id="478bd-164">For more information, see [How to use the Azure AD Authentication Library to get the Azure AD token](../active-directory/develop/active-directory-authentication-libraries.md).</span></span>

### <a name="service-principal-authentication"></a><span data-ttu-id="478bd-165">Autentisering av tjänstens huvudnamn</span><span class="sxs-lookup"><span data-stu-id="478bd-165">Service principal authentication</span></span>

<span data-ttu-id="478bd-166">Program som ofta använder den här autentiseringsmetoden är appar som körs på mellannivå tjänster och schemalagda jobb: web apps, funktionen appar, logikappar, API: er och mikrotjänster.</span><span class="sxs-lookup"><span data-stu-id="478bd-166">Applications that commonly use this authentication method are apps that run middle-tier services and scheduled jobs: web apps, function apps, logic apps, APIs, and microservices.</span></span> <span data-ttu-id="478bd-167">Den här autentiseringsmetoden är lämplig för interaktiva program som du kanske vill använda ett tjänstkonto för att hantera resurser.</span><span class="sxs-lookup"><span data-stu-id="478bd-167">This authentication method also is suitable for interactive applications in which you might want to use a service account to manage resources.</span></span>

<span data-ttu-id="478bd-168">När du använder service principal autentiseringsmetoden för att skapa användarscenarier hanteras autentisering vanligtvis i mellannivå (via vissa API) och inte direkt i ett program för mobila eller stationära.</span><span class="sxs-lookup"><span data-stu-id="478bd-168">When you use the service principal authentication method to build consumer scenarios, authentication typically is handled in the middle tier (through some API) and not directly in a mobile or desktop application.</span></span> 

<span data-ttu-id="478bd-169">Om du vill använda den här metoden skapa en Azure AD-program och tjänstens huvudnamn i sin egen klient.</span><span class="sxs-lookup"><span data-stu-id="478bd-169">To use this method, create an Azure AD application and service principal in its own tenant.</span></span> <span data-ttu-id="478bd-170">När du har skapat programmet ge appen medarbetare eller ägare rollåtkomst till Media Services-kontot.</span><span class="sxs-lookup"><span data-stu-id="478bd-170">After you create the application, give the app Contributor or Owner role access to the Media Services account.</span></span> <span data-ttu-id="478bd-171">Du kan göra detta i Azure-portalen med hjälp av Azure CLI eller med ett PowerShell-skript.</span><span class="sxs-lookup"><span data-stu-id="478bd-171">You can do this in the Azure portal, by using Azure CLI, or with a PowerShell script.</span></span> <span data-ttu-id="478bd-172">Du kan också använda ett befintligt Azure AD-program.</span><span class="sxs-lookup"><span data-stu-id="478bd-172">You also can use an existing Azure AD application.</span></span> <span data-ttu-id="478bd-173">Du kan registrera och hantera dina Azure AD-program och tjänstens huvudnamn [i Azure portal](media-services-portal-get-started-with-aad.md).</span><span class="sxs-lookup"><span data-stu-id="478bd-173">You can register and manage your Azure AD app and service principal [in the Azure portal](media-services-portal-get-started-with-aad.md).</span></span> <span data-ttu-id="478bd-174">Du också kan göra detta med hjälp av [Azure CLI 2.0](media-services-use-aad-auth-to-access-ams-api.md) eller [PowerShell](media-services-powershell-create-and-configure-aad-app.md).</span><span class="sxs-lookup"><span data-stu-id="478bd-174">You also can do this by using [Azure CLI 2.0](media-services-use-aad-auth-to-access-ams-api.md) or [PowerShell](media-services-powershell-create-and-configure-aad-app.md).</span></span> 

![Mellannivå appar](./media/media-services-use-aad-auth-to-access-ams-api/media-services-principal-service-aad-app1.png)

<span data-ttu-id="478bd-176">När du har skapat din Azure AD-program får du värden för följande inställningar.</span><span class="sxs-lookup"><span data-stu-id="478bd-176">After you create your Azure AD application, you get values for the following settings.</span></span> <span data-ttu-id="478bd-177">Du behöver dessa värden för autentisering:</span><span class="sxs-lookup"><span data-stu-id="478bd-177">You need these values for authentication:</span></span>

- <span data-ttu-id="478bd-178">Klient-ID</span><span class="sxs-lookup"><span data-stu-id="478bd-178">Client ID</span></span> 
- <span data-ttu-id="478bd-179">Klienthemlighet</span><span class="sxs-lookup"><span data-stu-id="478bd-179">Client secret</span></span> 

<span data-ttu-id="478bd-180">I föregående bild representerar siffrorna flödet av begäranden i kronologisk ordning:</span><span class="sxs-lookup"><span data-stu-id="478bd-180">In the preceding figure, the numbers represent the flow of the requests in chronological order:</span></span>
    
1. <span data-ttu-id="478bd-181">En mellannivå app (web API eller webbprogram) begär en Azure AD-åtkomsttoken som har följande parametrar:</span><span class="sxs-lookup"><span data-stu-id="478bd-181">A middle-tier app (web API or web application) requests an Azure AD access token that has the following parameters:</span></span>  

    * <span data-ttu-id="478bd-182">Slutpunkten för Azure AD-klient.</span><span class="sxs-lookup"><span data-stu-id="478bd-182">Azure AD tenant endpoint.</span></span>

        <span data-ttu-id="478bd-183">Klient-informationen kan hämtas från Azure-portalen.</span><span class="sxs-lookup"><span data-stu-id="478bd-183">The tenant information can be retrieved from the Azure portal.</span></span> <span data-ttu-id="478bd-184">Placera markören över namnet på den inloggade användaren i övre högra hörnet.</span><span class="sxs-lookup"><span data-stu-id="478bd-184">Place your cursor over the name of the signed-in user in the top right corner.</span></span>
    * <span data-ttu-id="478bd-185">Media Services resurs-URI.</span><span class="sxs-lookup"><span data-stu-id="478bd-185">Media Services resource URI.</span></span> 

        <span data-ttu-id="478bd-186">Den här URI är samma för Media Services-konton som finns i samma Azure-miljön (till exempel https://rest.media.azure.net).</span><span class="sxs-lookup"><span data-stu-id="478bd-186">This URI is the same for Media Services accounts that are located in the same Azure environment (for example, https://rest.media.azure.net).</span></span>

    * <span data-ttu-id="478bd-187">Resurs-URI för REST Media Services.</span><span class="sxs-lookup"><span data-stu-id="478bd-187">Resource URI for REST Media Services.</span></span>

        <span data-ttu-id="478bd-188">URI som representerar REST API-slutpunkt (till exempel https://test03.restv2.westus.media.azure.net/api/).</span><span class="sxs-lookup"><span data-stu-id="478bd-188">The URI represents the REST API endpoint (for example, https://test03.restv2.westus.media.azure.net/api/).</span></span>

    * <span data-ttu-id="478bd-189">Azure AD application värden: klient-ID och klienthemlighet.</span><span class="sxs-lookup"><span data-stu-id="478bd-189">Azure AD application values: the client ID and client secret.</span></span>
    
    <span data-ttu-id="478bd-190">Värden för dessa parametrar finns [Använd Azure-portalen för att få åtkomst till Azure AD-autentiseringsinställningar](media-services-portal-get-started-with-aad.md) med hjälp av alternativet service principal autentisering.</span><span class="sxs-lookup"><span data-stu-id="478bd-190">To get values for these parameters, see [Use the Azure portal to access Azure AD authentication settings](media-services-portal-get-started-with-aad.md) by using the service principal authentication option.</span></span>

2. <span data-ttu-id="478bd-191">Azure AD-åtkomsttoken skickas till mellannivån.</span><span class="sxs-lookup"><span data-stu-id="478bd-191">The Azure AD access token is sent to the middle tier.</span></span>
4. <span data-ttu-id="478bd-192">På mellannivå skickar begäran till Azure Media REST-API med Azure AD-token.</span><span class="sxs-lookup"><span data-stu-id="478bd-192">The middle tier sends request to the Azure Media REST API with the Azure AD token.</span></span>
5. <span data-ttu-id="478bd-193">Mellannivån hämtar tillbaka data från Media Services.</span><span class="sxs-lookup"><span data-stu-id="478bd-193">The middle tier gets back the data from Media Services.</span></span>

<span data-ttu-id="478bd-194">Mer information om hur du använder Azure AD-autentisering för att kommunicera med REST-begäranden med klienten för Media Services .NET SDK finns [använda Azure AD-autentisering för att komma åt Azure Media Services-API med .NET](media-services-dotnet-get-started-with-aad.md).</span><span class="sxs-lookup"><span data-stu-id="478bd-194">For more information about how to use Azure AD authentication to communicate with REST requests by using the Media Services .NET client SDK, see [Use Azure AD authentication to access Azure Media Services API with .NET](media-services-dotnet-get-started-with-aad.md).</span></span> 

<span data-ttu-id="478bd-195">Om du inte använder klienten Media Services .NET SDK, måste du manuellt skapa en Azure AD-tokenbegäran med parametrar som beskrivs i steg 1.</span><span class="sxs-lookup"><span data-stu-id="478bd-195">If you are not using the Media Services .NET client SDK, you must manually create an Azure AD token request by using parameters described in step 1.</span></span> <span data-ttu-id="478bd-196">Mer information finns i [hur du använder Azure AD-Autentiseringsbiblioteket för att hämta Azure AD-token](../active-directory/develop/active-directory-authentication-libraries.md).</span><span class="sxs-lookup"><span data-stu-id="478bd-196">For more information, see [How to use the Azure AD Authentication Library to get the Azure AD token](../active-directory/develop/active-directory-authentication-libraries.md).</span></span>

## <a name="troubleshooting"></a><span data-ttu-id="478bd-197">Felsökning</span><span class="sxs-lookup"><span data-stu-id="478bd-197">Troubleshooting</span></span>

<span data-ttu-id="478bd-198">Undantag ”: fjärrservern returnerade ett fel: (401) obehörig”.</span><span class="sxs-lookup"><span data-stu-id="478bd-198">Exception: "The remote server returned an error: (401) Unauthorized."</span></span>

<span data-ttu-id="478bd-199">Lösning: För Media Services REST-begäran ska lyckas anropa användaren måste vara en medarbetare eller ägare roll i Media Services-kontot som försöker komma åt.</span><span class="sxs-lookup"><span data-stu-id="478bd-199">Solution: For the Media Services REST request to succeed, the calling user must be a Contributor or Owner role in the Media Services account it is trying to access.</span></span> <span data-ttu-id="478bd-200">Mer information finns i [åtkomstkontroll](media-services-use-aad-auth-to-access-ams-api.md#access-control) avsnitt.</span><span class="sxs-lookup"><span data-stu-id="478bd-200">For more information, see the [Access control](media-services-use-aad-auth-to-access-ams-api.md#access-control) section.</span></span>

## <a name="resources"></a><span data-ttu-id="478bd-201">Resurser</span><span class="sxs-lookup"><span data-stu-id="478bd-201">Resources</span></span>

<span data-ttu-id="478bd-202">I följande artiklar finns översikter över begrepp för Azure AD-autentisering:</span><span class="sxs-lookup"><span data-stu-id="478bd-202">The following articles are overviews of Azure AD authentication concepts:</span></span> 

- [<span data-ttu-id="478bd-203">Autentiseringsscenarier åtgärdas av Azure AD</span><span class="sxs-lookup"><span data-stu-id="478bd-203">Authentication scenarios addressed by Azure AD</span></span>](../active-directory/develop/active-directory-authentication-scenarios.md#basics-of-authentication-in-azure-ad)
- [<span data-ttu-id="478bd-204">Lägga till, uppdatera eller ta bort ett program i Azure AD</span><span class="sxs-lookup"><span data-stu-id="478bd-204">Add, update, or remove an application in Azure AD</span></span>](../active-directory/develop/active-directory-integrating-applications.md)
- [<span data-ttu-id="478bd-205">Konfigurera och hantera rollbaserad åtkomstkontroll med hjälp av PowerShell</span><span class="sxs-lookup"><span data-stu-id="478bd-205">Configure and manage Role-Based Access Control by using PowerShell</span></span>](../active-directory/role-based-access-control-manage-access-powershell.md)

## <a name="next-steps"></a><span data-ttu-id="478bd-206">Nästa steg</span><span class="sxs-lookup"><span data-stu-id="478bd-206">Next steps</span></span>

* <span data-ttu-id="478bd-207">Använda Azure portal och [åtkomst till Azure AD-autentisering för att använda Azure Media Services API](media-services-portal-get-started-with-aad.md).</span><span class="sxs-lookup"><span data-stu-id="478bd-207">Use the Azure portal to [access Azure AD authentication to consume Azure Media Services API](media-services-portal-get-started-with-aad.md).</span></span>
* <span data-ttu-id="478bd-208">Använda Azure AD-autentisering till [åtkomst till Azure Media Services-API med .NET](media-services-dotnet-get-started-with-aad.md).</span><span class="sxs-lookup"><span data-stu-id="478bd-208">Use Azure AD authentication to [access Azure Media Services API with .NET](media-services-dotnet-get-started-with-aad.md).</span></span>


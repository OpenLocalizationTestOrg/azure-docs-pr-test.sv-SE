---
title: "aaaLog söker i OMS Log Analytics | Microsoft Docs"
description: "Du behöver en logg Sök tooretrieve några data från logganalys.  Den här artikeln beskriver hur ny logg sökningar används i logganalys och innehåller begrepp som du behöver toounderstand innan du skapar en."
services: log-analytics
documentationcenter: 
author: bwren
manager: carmonm
editor: 
ms.service: log-analytics
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 07/25/2017
ms.author: bwren
ms.openlocfilehash: 08fda1d9eb9e6ab824ffb9e12af09832c3e3fad2
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: sv-SE
ms.lasthandoff: 10/06/2017
---
# <a name="understanding-log-searches-in-log-analytics"></a><span data-ttu-id="03930-104">Förstå loggen söker i logganalys</span><span class="sxs-lookup"><span data-stu-id="03930-104">Understanding log searches in Log Analytics</span></span>

> [!NOTE]
> <span data-ttu-id="03930-105">Den här artikeln beskriver loggen söker i Azure Log Analytics med hjälp av hello nya frågespråk.</span><span class="sxs-lookup"><span data-stu-id="03930-105">This article describes log searches in Azure Log Analytics using hello new query language.</span></span>  <span data-ttu-id="03930-106">Du lär dig mer om hello nytt språk och få hello proceduren tooupgrade ditt arbetsområde på [uppgradera sökningen Azure logganalys arbetsytan toonew loggen](log-analytics-log-search-upgrade.md).</span><span class="sxs-lookup"><span data-stu-id="03930-106">You can learn more about hello new language and get hello procedure tooupgrade your workspace at [Upgrade your Azure Log Analytics workspace toonew log search](log-analytics-log-search-upgrade.md).</span></span>  
>
> <span data-ttu-id="03930-107">Om ditt arbetsområde inte har varit uppgraderade toohello nya frågespråk, bör du läsa för[söka efter data med hjälp av loggen sökningar i logganalys](log-analytics-log-searches.md).</span><span class="sxs-lookup"><span data-stu-id="03930-107">If your workspace hasn't been upgraded toohello new query language, you should refer too[Find data using log searches in Log Analytics](log-analytics-log-searches.md).</span></span>

<span data-ttu-id="03930-108">Du behöver en logg Sök tooretrieve några data från logganalys.</span><span class="sxs-lookup"><span data-stu-id="03930-108">You require a log search tooretrieve any data from Log Analytics.</span></span>  <span data-ttu-id="03930-109">Om du analyserar data i hello portal, meddelande konfigurera en regel för varning toobe om ett visst villkor eller att hämta data med hjälp av hello Log Analytics API du ska använda en sökning toospecify hello loggdata du vill.</span><span class="sxs-lookup"><span data-stu-id="03930-109">Whether you're analyzing data in hello portal, configuring an alert rule toobe notified of a particular condition, or retrieving data using hello Log Analytics API, you will use a log search toospecify hello data you want.</span></span>  <span data-ttu-id="03930-110">Den här artikeln beskriver hur du använder loggen sökningar i logganalys samt begrepp som du bör känna till innan du skapar en.</span><span class="sxs-lookup"><span data-stu-id="03930-110">This article describes how log searches are used in Log Analytics and provides concepts that should understand before creating one.</span></span> <span data-ttu-id="03930-111">Se hello [nästa steg](#next-steps) avsnittet för information om att skapa och redigera loggen sökningar och referenser på hello frågespråk.</span><span class="sxs-lookup"><span data-stu-id="03930-111">See hello [Next steps](#next-steps) section for details on creating and editing log searches and for references on hello query language.</span></span>

## <a name="where-log-searches-are-used"></a><span data-ttu-id="03930-112">Där loggen sökningar används</span><span class="sxs-lookup"><span data-stu-id="03930-112">Where log searches are used</span></span>

<span data-ttu-id="03930-113">hello olika sätt som du ska använda loggen sökningar i logganalys inkludera hello följande:</span><span class="sxs-lookup"><span data-stu-id="03930-113">hello different ways that you will use log searches in Log Analytics include hello following:</span></span>

- <span data-ttu-id="03930-114">**Portaler.**</span><span class="sxs-lookup"><span data-stu-id="03930-114">**Portals.**</span></span> <span data-ttu-id="03930-115">Du kan utföra interaktiv dataanalys i hello-databas med hello [loggen Sök portal](log-analytics-log-search-log-search-portal.md) eller hello [Advanced Analytics portal](https://go.microsoft.com/fwlink/?linkid=856587).</span><span class="sxs-lookup"><span data-stu-id="03930-115">You can perform interactive analysis of data in hello repository with hello [Log Search portal](log-analytics-log-search-log-search-portal.md) or hello [Advanced Analytics portal](https://go.microsoft.com/fwlink/?linkid=856587).</span></span>  <span data-ttu-id="03930-116">Detta gör att du tooedit din fråga och analys av hello resulterar i en mängd olika format och visualiseringar.</span><span class="sxs-lookup"><span data-stu-id="03930-116">This allows you tooedit your query and analyze hello results in a variety of formats and visualizations.</span></span>  <span data-ttu-id="03930-117">De flesta frågor som du skapar kommer att starta i ett av hello portaler och kopieras sedan när du kontrollera att den fungerar som förväntat.</span><span class="sxs-lookup"><span data-stu-id="03930-117">Most queries that you create will start in one of hello portals and then copied once you verify that it works as expected.</span></span>
- <span data-ttu-id="03930-118">**Varningsregler.**</span><span class="sxs-lookup"><span data-stu-id="03930-118">**Alert rules.**</span></span> <span data-ttu-id="03930-119">[Varna regler](log-analytics-alerts.md) proaktivt identifiera problem utifrån data i din arbetsyta.</span><span class="sxs-lookup"><span data-stu-id="03930-119">[Alert rules](log-analytics-alerts.md) proactively identify issues from data in your workspace.</span></span>  <span data-ttu-id="03930-120">Varje regel för varning baseras på en logg sökning som körs automatiskt med jämna mellanrum.</span><span class="sxs-lookup"><span data-stu-id="03930-120">Each alert rule is based on a log search that is automatically run at regular intervals.</span></span>  <span data-ttu-id="03930-121">hello resultat är inspekterade toodetermine om en avisering ska skapas.</span><span class="sxs-lookup"><span data-stu-id="03930-121">hello results are inspected toodetermine if an alert should be created.</span></span>
- <span data-ttu-id="03930-122">**Vyer.**</span><span class="sxs-lookup"><span data-stu-id="03930-122">**Views.**</span></span>  <span data-ttu-id="03930-123">Du kan skapa visualiseringar av data toobe ingår i instrumentpaneler för användare med [Vydesigner](log-analytics-view-designer.md).</span><span class="sxs-lookup"><span data-stu-id="03930-123">You can create visualizations of data toobe included in user dashboards with [View Designer](log-analytics-view-designer.md).</span></span>  <span data-ttu-id="03930-124">Loggen sökningar tillhandahåller hello data som används av [paneler](log-analytics-view-designer-tiles.md) och [visualiseringen delar](log-analytics-view-designer-parts.md) i varje vy.</span><span class="sxs-lookup"><span data-stu-id="03930-124">Log searches provide hello data used by [tiles](log-analytics-view-designer-tiles.md) and [visualization parts](log-analytics-view-designer-parts.md) in each view.</span></span>  <span data-ttu-id="03930-125">Du kan detaljnivån från visualiseringen delar hello loggen Sök portal tooperform ytterligare analyser av hello data.</span><span class="sxs-lookup"><span data-stu-id="03930-125">You can drill down from visualization parts into hello Log Search portal tooperform further analysis on hello data.</span></span>
- <span data-ttu-id="03930-126">**Exportera.**</span><span class="sxs-lookup"><span data-stu-id="03930-126">**Export.**</span></span>  <span data-ttu-id="03930-127">När du exporterar data från hello logganalys-arbetsytan tooExcel eller [Power BI](log-analytics-powerbi.md), du skapar en logg Sök toodefine hello data tooexport.</span><span class="sxs-lookup"><span data-stu-id="03930-127">When you export data from hello Log Analytics workspace tooExcel or [Power BI](log-analytics-powerbi.md), you create a log search toodefine hello data tooexport.</span></span>
- <span data-ttu-id="03930-128">**PowerShell.**</span><span class="sxs-lookup"><span data-stu-id="03930-128">**PowerShell.**</span></span> <span data-ttu-id="03930-129">Du kan köra ett PowerShell-skript från en kommandorad eller ett Azure Automation-runbook som använder [Get-AzureRmOperationalInsightsSearchResults](https://docs.microsoft.com/powershell/module/azurerm.operationalinsights/get-azurermoperationalinsightssearchresults?view=azurermps-4.0.0) tooretrieve data från logganalys.</span><span class="sxs-lookup"><span data-stu-id="03930-129">You can run a PowerShell script from a command line or an Azure Automation runbook that uses [Get-AzureRmOperationalInsightsSearchResults](https://docs.microsoft.com/powershell/module/azurerm.operationalinsights/get-azurermoperationalinsightssearchresults?view=azurermps-4.0.0) tooretrieve data from Log Analytics.</span></span>  <span data-ttu-id="03930-130">Den här cmdleten kräver en fråga toodetermine hello data tooretrieve.</span><span class="sxs-lookup"><span data-stu-id="03930-130">This cmdlet requires a query toodetermine hello data tooretrieve.</span></span>
- <span data-ttu-id="03930-131">**Log Analytics-API.**</span><span class="sxs-lookup"><span data-stu-id="03930-131">**Log Analytics API.**</span></span>  <span data-ttu-id="03930-132">Hej [logganalys logga Sök API](log-analytics-log-search-api.md) gör REST API-klient tooretrieve data från hello arbetsyta.</span><span class="sxs-lookup"><span data-stu-id="03930-132">hello [Log Analytics log search API](log-analytics-log-search-api.md) allows any REST API client tooretrieve data from hello workspace.</span></span>  <span data-ttu-id="03930-133">hello-API-begäran innehåller en fråga som körs mot logganalys toodetermine hello data tooretrieve.</span><span class="sxs-lookup"><span data-stu-id="03930-133">hello API request includes a query that is run against Log Analytics toodetermine hello data tooretrieve.</span></span>

![Log-sökningar](media/log-analytics-log-search-new/log-search-overview.png)

## <a name="how-log-analytics-data-is-organized"></a><span data-ttu-id="03930-135">Hur ordnas Log Analytics-data</span><span class="sxs-lookup"><span data-stu-id="03930-135">How Log Analytics data is organized</span></span>
<span data-ttu-id="03930-136">När du skapar en fråga kan starta du genom att bestämma vilka tabeller har hello data som du letar efter.</span><span class="sxs-lookup"><span data-stu-id="03930-136">When you build a query, you start by determining which tables have hello data that you're looking for.</span></span> <span data-ttu-id="03930-137">Varje [datakällan](log-analytics-data-sources.md) och [lösning](../operations-management-suite/operations-management-suite-solutions.md) lagrar data i dedikerade tabeller i hello logganalys-arbetsytan.</span><span class="sxs-lookup"><span data-stu-id="03930-137">Each [data source](log-analytics-data-sources.md) and [solution](../operations-management-suite/operations-management-suite-solutions.md) stores its data in dedicated tables in hello Log Analytics workspace.</span></span>  <span data-ttu-id="03930-138">Dokumentation för varje datakälla och lösningen innehåller hello namnet på hello-datatyp som skapas och en beskrivning av var och en av dess egenskaper.</span><span class="sxs-lookup"><span data-stu-id="03930-138">Documentation for each data source and solution includes hello name of hello data type that it creates and a description of each of its properties.</span></span>     <span data-ttu-id="03930-139">Många frågor kräver endast data från en enda tabeller, men andra kan använda en mängd olika alternativ tooinclude data från flera tabeller.</span><span class="sxs-lookup"><span data-stu-id="03930-139">Many queries will only require data from a single tables, but others may use a variety of options tooinclude data from multiple tables.</span></span>

![Tabeller](media/log-analytics-log-search-new/queries-tables.png)


## <a name="writing-a-query"></a><span data-ttu-id="03930-141">Skriva en fråga</span><span class="sxs-lookup"><span data-stu-id="03930-141">Writing a query</span></span>
<span data-ttu-id="03930-142">Hello kärnan i loggen söker i logganalys är [ett omfattande frågespråket](https://docs.loganalytics.io/) som låter dig hämta och analysera data från hello-databasen på en mängd olika sätt.</span><span class="sxs-lookup"><span data-stu-id="03930-142">At hello core of log searches in Log Analytics is [an extensive query language](https://docs.loganalytics.io/) that lets you retrieve and analyze data from hello repository in a variety of ways.</span></span>  <span data-ttu-id="03930-143">Samma fråga språk används för [Programinsikter](../application-insights/app-insights-analytics.md).</span><span class="sxs-lookup"><span data-stu-id="03930-143">This same query language is used for [Application Insights](../application-insights/app-insights-analytics.md).</span></span>  <span data-ttu-id="03930-144">Lär dig hur toowrite en fråga är kritiska toocreating loggen söker i logganalys.</span><span class="sxs-lookup"><span data-stu-id="03930-144">Learning how toowrite a query is critical toocreating log searches in Log Analytics.</span></span>  <span data-ttu-id="03930-145">Normalt börjar med grundläggande frågor och sedan förlopp toouse avancerade mer funktioner enligt dina krav blir mer komplexa.</span><span class="sxs-lookup"><span data-stu-id="03930-145">You'll typically start with basic queries and then progress toouse more advanced functions as your requirements become more complex.</span></span>

<span data-ttu-id="03930-146">hello grundstrukturen för en fråga är en källtabell följt av en serie operatörer avgränsade med ett vertikalstreck `|`.</span><span class="sxs-lookup"><span data-stu-id="03930-146">hello basic structure of a query is a source table followed by a series of operators separated by a pipe character `|`.</span></span>  <span data-ttu-id="03930-147">Du kan kedja samman flera operatorer toorefine hello data och utföra avancerade funktioner.</span><span class="sxs-lookup"><span data-stu-id="03930-147">You can chain together multiple operators toorefine hello data and perform advanced functions.</span></span>

<span data-ttu-id="03930-148">Anta att du vill ha toofind hello översta tio datorer med hello felhändelser för de flesta över hello senaste dagen.</span><span class="sxs-lookup"><span data-stu-id="03930-148">For example, suppose you wanted toofind hello top ten computers with hello most error events over hello past day.</span></span>

    Event
    | where (EventLevelName == "Error")
    | where (TimeGenerated > ago(1days))
    | summarize ErrorCount = count() by Computer
    | top 10 by ErrorCount desc

<span data-ttu-id="03930-149">Eller så kanske du vill toofind datorer som inte hade ett pulsslag hello sista dagen.</span><span class="sxs-lookup"><span data-stu-id="03930-149">Or maybe you want toofind computers that haven't had a heartbeat in hello last day.</span></span>

    Heartbeat
    | where TimeGenerated > ago(7d)
    | summarize max(TimeGenerated) by Computer
    | where max_TimeGenerated < ago(1d)  

<span data-ttu-id="03930-150">Hur är det med linjediagram med hello processorbelastning för varje dator från förra veckan?</span><span class="sxs-lookup"><span data-stu-id="03930-150">How about a line chart with hello processor utilization for each computer from last week?</span></span>

    Perf
    | where ObjectName == "Processor" and CounterName == "% Processor Time"
    | where TimeGenerated  between (startofweek(ago(7d)) .. endofweek(ago(7d)) )
    | summarize avg(CounterValue) by Computer, bin(TimeGenerated, 5min)
    | render timechart    

<span data-ttu-id="03930-151">Du kan se från exemplen snabb som oavsett hello typ av data som du arbetar med, hello liknar strukturen för hello frågan.</span><span class="sxs-lookup"><span data-stu-id="03930-151">You can see from these quick samples that regardless of hello kind of data that you're working with, hello structure of hello query is similar.</span></span>  <span data-ttu-id="03930-152">Du kan dela upp det i steg där hello resulterande data från ett kommando skickas via hello pipeline toohello nästa kommando.</span><span class="sxs-lookup"><span data-stu-id="03930-152">You can break it down into distinct steps where hello resulting data from one command is sent through hello pipeline toohello next command.</span></span>

<span data-ttu-id="03930-153">Fullständig dokumentation för hello Azure Log Analytics-frågespråket inklusive självstudier och Språkreferens finns hello [Azure logganalys fråga språk dokumentationen](https://docs.loganalytics.io/).</span><span class="sxs-lookup"><span data-stu-id="03930-153">For complete documentation on hello Azure Log Analytics query language including tutorials and language reference, see hello [Azure Log Analytics query language documentation](https://docs.loganalytics.io/).</span></span>

## <a name="next-steps"></a><span data-ttu-id="03930-154">Nästa steg</span><span class="sxs-lookup"><span data-stu-id="03930-154">Next steps</span></span>

- <span data-ttu-id="03930-155">Lär dig mer om hello [portaler om du använder toocreate och redigera loggen sökningar](log-analytics-log-search-portals.md).</span><span class="sxs-lookup"><span data-stu-id="03930-155">Learn about hello [portals that you use toocreate and edit log searches](log-analytics-log-search-portals.md).</span></span>
- <span data-ttu-id="03930-156">Checka ut en [självstudier om hur du skriver frågor](https://go.microsoft.com/fwlink/?linkid=856078) med hello nya frågespråk.</span><span class="sxs-lookup"><span data-stu-id="03930-156">Check out a [tutorial on writing queries](https://go.microsoft.com/fwlink/?linkid=856078) using hello new query language.</span></span>

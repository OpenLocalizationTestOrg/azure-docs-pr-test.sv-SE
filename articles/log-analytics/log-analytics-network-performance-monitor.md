---
title: "Network Performance Monitor-lösning i Azure Log Analytics | Microsoft Docs"
description: "Nätverk i Azure Log Analytics identifiera hjälper dig att övervaka prestanda för ditt nätverk – i nära real-gång till och hitta flaskhalsar i nätverket."
services: log-analytics
documentationcenter: 
author: bandersmsft
manager: carmonm
editor: 
ms.assetid: 5b9c9c83-3435-488c-b4f6-7653003ae18a
ms.service: log-analytics
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 08/11/2017
ms.author: banders
ms.openlocfilehash: c6568e491429f6046ab164ab5eacd0ae5846e201
ms.sourcegitcommit: 50e23e8d3b1148ae2d36dad3167936b4e52c8a23
ms.translationtype: MT
ms.contentlocale: sv-SE
ms.lasthandoff: 08/18/2017
---
# <a name="network-performance-monitor-solution-in-log-analytics"></a><span data-ttu-id="cfc0a-103">Network Performance Monitor-lösning i logganalys</span><span class="sxs-lookup"><span data-stu-id="cfc0a-103">Network Performance Monitor solution in Log Analytics</span></span>

![Nätverket Prestandaövervakaren symbol](./media/log-analytics-network-performance-monitor/npm-symbol.png)

<span data-ttu-id="cfc0a-105">Det här dokumentet beskriver hur installation och användning nätverk Network Performance Monitor-lösning i logganalys som hjälper dig att övervaka prestanda för ditt nätverk – i nära real-gång-om du vill identifiera och leta upp flaskhalsar.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-105">This document describes how to set-up and use the Network Performance Monitor solution in Log Analytics, which helps you monitor the performance of your networks-in near real-time-to detect and locate network performance bottlenecks.</span></span> <span data-ttu-id="cfc0a-106">Du kan övervaka förluster eller fördröjningar mellan två nätverk, undernät eller servrar med Network Performance Monitor-lösning.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-106">With the Network Performance Monitor solution, you can monitor the loss and latency between two networks, subnets or servers.</span></span> <span data-ttu-id="cfc0a-107">Network Performance Monitor identifierar nätverksproblem som trafik blackholing routning fel och problem som vanliga nätverk övervakning metoder inte går att identifiera.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-107">Network Performance Monitor detects network issues like traffic blackholing, routing errors, and issues that conventional network monitoring methods are not able to detect.</span></span> <span data-ttu-id="cfc0a-108">Network Performance Monitor genererar aviseringar och meddelar och när ett tröskelvärde komprometteras för en nätverkslänk.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-108">Network Performance Monitor generates alerts and notifies as and when a threshold is breached for a network link.</span></span> <span data-ttu-id="cfc0a-109">Dessa tröskelvärden kan hämtas automatiskt av systemet eller du kan konfigurera dem för att använda anpassade Varningsregler.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-109">These thresholds can be learned automatically by the system or you can configure them to use custom alert rules.</span></span> <span data-ttu-id="cfc0a-110">Network Performance Monitor garanterar snabbt ska kunna identifiera problem med prestanda och localizes källan till problemet till en viss nätverkssegment eller enhet.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-110">Network Performance Monitor ensures timely detection of network performance issues and localizes the source of the problem to a particular network segment or device.</span></span>

<span data-ttu-id="cfc0a-111">Du kan identifiera problem med lösningen instrumentpanelen som visar sammanfattningsinformation om nätverket inklusive senaste hälsa händelser på nätverket, nätverkslänkar och undernätverkslänkar som ställs inför hög paketförlust och latens.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-111">You can detect network issues with the solution dashboard which displays summarized information about your network including recent network health events, unhealthy network links, and subnetwork links that are facing high packet loss and latency.</span></span> <span data-ttu-id="cfc0a-112">Du kan gå nedåt i en nätverkslänk att visa aktuella hälsotillstånd undernätverkslänkar samt nod till nod länkar.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-112">You can drill-down into a network link to view the current health status of subnetwork links as well as node-to-node links.</span></span> <span data-ttu-id="cfc0a-113">Du kan också visa historisk trend förluster eller fördröjningar på nätverket, undernätverk och nod-till-nod-nivå.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-113">You can also view the historical trend of loss and latency at the network, subnetwork, and node-to-node level.</span></span> <span data-ttu-id="cfc0a-114">Du kan identifiera tillfälliga nätverksproblem genom att visa historiska trender diagram för paketförlust och fördröjning och hitta flaskhalsar i nätverk på en topologisk karta.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-114">You can detect transient network issues by viewing historical trend charts for packet loss and latency and locate network bottlenecks on a topology map.</span></span> <span data-ttu-id="cfc0a-115">Interaktiva topologi diagrammet kan du visualisera hopp som nexthop nätverksvägar och ta reda på orsaken till problemet.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-115">The interactive topology graph allows you to visualize the hop-by-hop network routes and determine the source of the problem.</span></span> <span data-ttu-id="cfc0a-116">Du kan använda loggen Sök efter olika analytics krav för att skapa anpassade rapporter baserat på de data som samlas in av Network Performance Monitor som andra lösningar.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-116">Like any other solutions, you can use Log Search for various analytics requirements to create custom reports based on the data collected by Network Performance Monitor.</span></span>

<span data-ttu-id="cfc0a-117">Lösningen använder syntetiska transaktioner som primär metod för att identifiera nätverksfel.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-117">The solution uses synthetic transactions as a primary mechanism to detect network faults.</span></span> <span data-ttu-id="cfc0a-118">Därför kan du använda det utan hänsyn till en viss nätverksenhet tillverkare eller modell.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-118">So, you can use it without regard for a specific network device's vendor or model.</span></span> <span data-ttu-id="cfc0a-119">Den fungerar även över lokala molnet (IaaS) och hybridmiljöer.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-119">It works across on-premises, cloud (IaaS), and hybrid environments.</span></span> <span data-ttu-id="cfc0a-120">Lösningen upptäcker automatiskt nätverkets topologi och olika vägar i nätverket.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-120">The solution automatically discovers the network topology and various routes in your network.</span></span>

<span data-ttu-id="cfc0a-121">Vanliga nätverk övervakning produkter fokusera på att övervaka hälsotillståndet för nätverk-enhet (routrar, växlar osv), men ger inte insikter om den faktiska kvaliteten på nätverksanslutning mellan två platser, vilket gör Network Performance Monitor.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-121">Typical network monitoring products focus on monitoring the network device (routers, switches etc.) health but do not provide insights into the actual quality of network connectivity between two points, which Network Performance Monitor does.</span></span>

### <a name="using-the-solution-standalone"></a><span data-ttu-id="cfc0a-122">Med fristående lösning</span><span class="sxs-lookup"><span data-stu-id="cfc0a-122">Using the solution standalone</span></span>
<span data-ttu-id="cfc0a-123">Om du vill övervaka kvaliteten på nätverksanslutning mellan sina kritiska arbetsbelastningar, kan nätverk, Datacenter eller office platser och du använda Network Performance Monitor-lösningen ensamt för att övervaka hälsotillståndet för anslutningen mellan:</span><span class="sxs-lookup"><span data-stu-id="cfc0a-123">If you want to monitor the quality of network connections between their critical workloads, networks, datacenters or office sites, then you can use the Network Performance Monitor solution by itself to monitor connectivity health between:</span></span>

* <span data-ttu-id="cfc0a-124">flera Datacenter eller office platser som är anslutna via ett offentligt eller privat nätverk</span><span class="sxs-lookup"><span data-stu-id="cfc0a-124">multiple datacenters or office sites that are connected using a public or private network</span></span>
* <span data-ttu-id="cfc0a-125">viktiga arbetsbelastningar som körs affärsprogram</span><span class="sxs-lookup"><span data-stu-id="cfc0a-125">critical workloads that are running line of business applications</span></span>
* <span data-ttu-id="cfc0a-126">offentliga molntjänster som Microsoft Azure eller Amazon Web Services (AWS) och lokala nätverk, om du har IaaS (VM) tillgänglig och du har gateways som konfigurerats för att tillåta kommunikation mellan lokala nätverk och moln-nätverk</span><span class="sxs-lookup"><span data-stu-id="cfc0a-126">public cloud services like Microsoft Azure or Amazon Web Services (AWS) and on-premises networks, if you have IaaS (VM) available and you have gateways configured to allow communication between on-premises networks and cloud networks</span></span>
* <span data-ttu-id="cfc0a-127">Azure och lokala nätverk när du använder Express Route</span><span class="sxs-lookup"><span data-stu-id="cfc0a-127">Azure and on-premises networks when you use Express Route</span></span>

### <a name="using-the-solution-with-other-networking-tools"></a><span data-ttu-id="cfc0a-128">Med lösningen med andra verktyg för nätverk</span><span class="sxs-lookup"><span data-stu-id="cfc0a-128">Using the solution with other networking tools</span></span>
<span data-ttu-id="cfc0a-129">Om du vill övervaka en driftsapplikationer kan du använda Network Performance Monitor-lösning som en tillhörande lösning till andra verktyg.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-129">If you want to monitor a line of business application, you can use the Network Performance Monitor solution as a companion solution to other network tools.</span></span> <span data-ttu-id="cfc0a-130">Ett långsamt nätverk kan leda till långsam program och Network Performance Monitor kan hjälpa dig att undersöka problem med prestanda som orsakas av underliggande nätverksproblem.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-130">A slow network can lead to slow applications and Network Performance Monitor can help you investigate application performance issues that are caused by underlying networking issues.</span></span> <span data-ttu-id="cfc0a-131">Lösningen inte kräver någon åtkomst till nätverksenheter, behöver programadministratören inte eftersom förlitar sig på ett nätverk team att ge information om hur nätverket påverkar program.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-131">Because the solution does not require any access to network devices, the application administrator doesn't need to rely on a networking team to provide information about how the network is affecting applications.</span></span>

<span data-ttu-id="cfc0a-132">Även om du redan investerar i andra nätverksövervakningsverktyg kan sedan lösningen kompletterar dessa verktyg eftersom de flesta traditionella övervakning nätverkslösningar inte tillhandahåller insikter om slutpunkt till slutpunkt prestandamått som förluster eller fördröjningar.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-132">Also, if you already invest in other network monitoring tools, then the solution can complement those tools because most traditional network monitoring solutions do not provide insights into end-to-end network performance metrics like loss and latency.</span></span>  <span data-ttu-id="cfc0a-133">Network Performance Monitor-lösningen hjälper dig att fylla den lucka.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-133">The Network Performance Monitor solution can help fill that gap.</span></span>

## <a name="installing-and-configuring-agents-for-the-solution"></a><span data-ttu-id="cfc0a-134">Installera och konfigurera agenter för lösningen</span><span class="sxs-lookup"><span data-stu-id="cfc0a-134">Installing and configuring agents for the solution</span></span>
<span data-ttu-id="cfc0a-135">Använd basic-processer för att installera agenter på [ansluta Windows-datorer till logganalys](log-analytics-windows-agents.md) och [ansluta Operations Manager till logganalys](log-analytics-om-agents.md).</span><span class="sxs-lookup"><span data-stu-id="cfc0a-135">Use the basic processes to install agents at [Connect Windows computers to Log Analytics](log-analytics-windows-agents.md) and [Connect Operations Manager to Log Analytics](log-analytics-om-agents.md).</span></span>

> [!NOTE]
> <span data-ttu-id="cfc0a-136">Du måste installera minst 2 agenter för att få tillräckligt med data för att identifiera och övervaka dina nätverksresurser.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-136">You'll need to install at least 2 agents in order to have enough data to discover and monitor your network resources.</span></span> <span data-ttu-id="cfc0a-137">Annars förblir lösningen konfigurera statusen tills du installerar och konfigurerar ytterligare agenter.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-137">Otherwise, the solution will remain in a configuring state until you install and configure additional agents.</span></span>
>
>

### <a name="where-to-install-the-agents"></a><span data-ttu-id="cfc0a-138">Var du vill installera agenter</span><span class="sxs-lookup"><span data-stu-id="cfc0a-138">Where to install the agents</span></span>
<span data-ttu-id="cfc0a-139">Innan du installerar agenter, Överväg topologin hos ditt nätverk och vilka delar av nätverket som du vill övervaka.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-139">Before you install agents, consider the topology of your network and what parts of the network you want to monitor.</span></span> <span data-ttu-id="cfc0a-140">Vi rekommenderar att du installerar fler än en agent för varje undernät som du vill övervaka.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-140">We recommend that you install more than one agent for each subnet that you want to monitor.</span></span> <span data-ttu-id="cfc0a-141">Med andra ord för varje undernät som du vill övervaka, välja två eller flera servrar eller virtuella datorer och installera agenten på dem.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-141">In other words, for every subnet that you want to monitor, choose two or more servers or VMs and install the agent on them.</span></span>

<span data-ttu-id="cfc0a-142">Om du är osäker på om nätverkets topologi, installera agenter på servrar med viktiga arbetsbelastningar där du vill övervaka nätverkets prestanda.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-142">If you are unsure about the topology of your network, install the agents on servers with critical workloads where you want to monitor the network performance.</span></span> <span data-ttu-id="cfc0a-143">Du kanske vill hålla reda på en nätverksanslutning mellan en webbserver och en server som kör SQL Server.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-143">For example, you might want to keep track of a network connection between a Web server and a server running SQL Server.</span></span> <span data-ttu-id="cfc0a-144">I det här exemplet skulle du installerar en agent på båda servrarna.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-144">In this example, you'd install an agent on both servers.</span></span>

<span data-ttu-id="cfc0a-145">Agenter övervakar nätverksanslutning (länkar) mellan värdar--inte själva värdarna.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-145">Agents monitor network connectivity (links) between hosts -- not the hosts themselves.</span></span> <span data-ttu-id="cfc0a-146">Så om du vill övervaka en nätverkslänk, måste du installera agenter på båda slutpunkter för länken.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-146">So, to monitor a network link, you must install agents on both endpoints of that link.</span></span>

### <a name="configure-agents"></a><span data-ttu-id="cfc0a-147">Konfigurera agenter</span><span class="sxs-lookup"><span data-stu-id="cfc0a-147">Configure agents</span></span>

<span data-ttu-id="cfc0a-148">Om du tänker använda ICMP-protokollet för syntetiska transaktioner måste du aktivera följande brandväggsregler för att på ett tillförlitligt sätt använda ICMP:</span><span class="sxs-lookup"><span data-stu-id="cfc0a-148">If you intend to use the ICMP protocol for synthetic transactions, you need to enable the following firewall rules for reliably utilizing ICMP:</span></span>

```
netsh advfirewall firewall add rule name="NPMDICMPV4Echo" protocol="icmpv4:8,any" dir=in action=allow
netsh advfirewall firewall add rule name="NPMDICMPV6Echo" protocol="icmpv6:128,any" dir=in action=allow
netsh advfirewall firewall add rule name="NPMDICMPV4DestinationUnreachable" protocol="icmpv4:3,any" dir=in action=allow
netsh advfirewall firewall add rule name="NPMDICMPV6DestinationUnreachable" protocol="icmpv6:1,any" dir=in action=allow
netsh advfirewall firewall add rule name="NPMDICMPV4TimeExceeded" protocol="icmpv4:11,any" dir=in action=allow
netsh advfirewall firewall add rule name="NPMDICMPV6TimeExceeded" protocol="icmpv6:3,any" dir=in action=allow
```


<span data-ttu-id="cfc0a-149">Om du planerar att använda TCP-protokollet måste du öppna portar i brandväggen för dessa datorer för att kontrollera att agenterna kan kommunicera.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-149">If you intend to use the TCP protocol you need to open firewall ports for those computers to ensure that agents can communicate.</span></span> <span data-ttu-id="cfc0a-150">Du måste hämta och kör den [EnableRules.ps1 PowerShell-skript](https://gallery.technet.microsoft.com/OMS-Network-Performance-04a66634) utan några parametrar i ett PowerShell-fönster med administratörsbehörighet.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-150">You need to download and then run the [EnableRules.ps1 PowerShell script](https://gallery.technet.microsoft.com/OMS-Network-Performance-04a66634) without any parameters in a PowerShell window with administrative privileges.</span></span>

<span data-ttu-id="cfc0a-151">Skriptet skapar registernycklar som krävs av Network Performance Monitor och skapar Windows brandväggsregler som tillåter agenter för att skapa TCP-anslutningar med varandra.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-151">The script creates registry keys required by the Network Performance Monitor and it creates Windows firewall rules to allow agents to create TCP connections with each other.</span></span> <span data-ttu-id="cfc0a-152">Registernycklar som skapats av skriptet ange om du vill logga debug-loggar och sökvägen för filen loggar.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-152">The registry keys created by the script also specify whether to log the debug logs and the path for the logs file.</span></span> <span data-ttu-id="cfc0a-153">Den definierar även agent TCP-port som används för kommunikation.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-153">It also defines the agent TCP port used for communication.</span></span> <span data-ttu-id="cfc0a-154">Värden för nycklarna anges automatiskt av skript, så du inte bör ändra dessa nycklar manuellt.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-154">The values for these keys are automatically set by the script, so you should not manually change these keys.</span></span>

<span data-ttu-id="cfc0a-155">Porten öppnas som standard är 8084.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-155">The port opened by default is 8084.</span></span> <span data-ttu-id="cfc0a-156">Du kan använda en anpassad port genom att ange parametern `portNumber` i skriptet.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-156">You can use a custom port by providing the parameter `portNumber` to the script.</span></span> <span data-ttu-id="cfc0a-157">Men ska samma port användas på alla datorer där skriptet körs.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-157">However, the same port should be used on all the computers where the script is run.</span></span>

> [!NOTE]
> <span data-ttu-id="cfc0a-158">Skriptet EnableRules.ps1 konfigurerar regler för Windows-brandväggen endast på den dator där skriptet körs.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-158">The EnableRules.ps1 script configures Windows firewall rules only on the computer where the script is run.</span></span> <span data-ttu-id="cfc0a-159">Om du har en brandvägg för nätverk, bör du kontrollera att den tillåter trafik för TCP-porten som används av Network Performance Monitor.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-159">If you have a network firewall, you should make sure that it allows traffic destined for the TCP port being used by Network Performance Monitor.</span></span>
>
>

## <a name="configuring-the-solution"></a><span data-ttu-id="cfc0a-160">Konfigurera lösningen</span><span class="sxs-lookup"><span data-stu-id="cfc0a-160">Configuring the solution</span></span>
<span data-ttu-id="cfc0a-161">Använd följande information för att installera och konfigurera lösningen.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-161">Use the following information to install and configure the solution.</span></span>

1. <span data-ttu-id="cfc0a-162">Network Performance Monitor-lösningen hämtar data från datorer som kör Windows Server 2008 SP 1 eller senare eller Windows 7 SP1 eller senare, vilket är samma krav som Microsoft Monitoring Agent (MMA).</span><span class="sxs-lookup"><span data-stu-id="cfc0a-162">The Network Performance Monitor solution acquires data from computers running Windows Server 2008 SP 1 or later or Windows 7 SP1 or later, which are the same requirements as the Microsoft Monitoring Agent (MMA).</span></span> <span data-ttu-id="cfc0a-163">NPM agenter kan också köra på Windows desktop/client-operativsystem (Windows 10, Windows 8.1, Windows 8 och Windows 7).</span><span class="sxs-lookup"><span data-stu-id="cfc0a-163">NPM agents can also run on Windows desktop/client operating systems (Windows 10, Windows 8.1, Windows 8 and Windows 7).</span></span>
    >[!NOTE]
    ><span data-ttu-id="cfc0a-164">Agenter för Windows server-operativsystem stöder både TCP och ICMP som protokoll för syntetisk transaktion.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-164">The agents for Windows server operating systems support both TCP and ICMP as the protocols for synthetic transaction.</span></span> <span data-ttu-id="cfc0a-165">Agenter för Windows-klientoperativsystem stöder dock endast ICMP som protokoll för syntetisk transaktion.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-165">However, the agents for Windows client operating systems only support ICMP as the protocol for synthetic transaction.</span></span>

2. <span data-ttu-id="cfc0a-166">Lägga till Network Performance Monitor-lösningen till arbetsytan från [Azure marketplace](https://azuremarketplace.microsoft.com/marketplace/apps/Microsoft.NetworkMonitoringOMS?tab=Overview) eller genom att använda processen som beskrivs i [lägga till logganalys lösningar från galleriet lösningar](log-analytics-add-solutions.md).</span><span class="sxs-lookup"><span data-stu-id="cfc0a-166">Add the Network Performance Monitor solution to your workspace from [Azure marketplace](https://azuremarketplace.microsoft.com/marketplace/apps/Microsoft.NetworkMonitoringOMS?tab=Overview) or by using the process described in [Add Log Analytics solutions from the Solutions Gallery](log-analytics-add-solutions.md).</span></span>  
   <span data-ttu-id="cfc0a-167">![Nätverket Prestandaövervakaren symbol](./media/log-analytics-network-performance-monitor/npm-symbol.png)</span><span class="sxs-lookup"><span data-stu-id="cfc0a-167">![Network Performance Monitor symbol](./media/log-analytics-network-performance-monitor/npm-symbol.png)</span></span>
3. <span data-ttu-id="cfc0a-168">I OMS-portalen visas en ny panel med titeln **Network Performance Monitor** med meddelandet *lösningen kräver ytterligare konfiguration*.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-168">In the OMS portal, you'll see a new tile titled **Network Performance Monitor** with the message *Solution requires additional configuration*.</span></span> <span data-ttu-id="cfc0a-169">Du behöver konfigurera lösningen för att lägga till nätverk baserat på undernät och noder som identifieras av agenter.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-169">You'll need to configure the solution to add networks based on subnetworks and nodes that are discovered by agents.</span></span> <span data-ttu-id="cfc0a-170">Klicka på **Network Performance Monitor** att börja konfigurera standardnätverk.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-170">Click **Network Performance Monitor** to start configuring the default network.</span></span>  
   <span data-ttu-id="cfc0a-171">![lösningen kräver ytterligare konfiguration](./media/log-analytics-network-performance-monitor/npm-config.png)</span><span class="sxs-lookup"><span data-stu-id="cfc0a-171">![solution requires additional configuration](./media/log-analytics-network-performance-monitor/npm-config.png)</span></span>

### <a name="configure-the-solution-with-a-default-network"></a><span data-ttu-id="cfc0a-172">Konfigurera lösningen med ett standardnätverk</span><span class="sxs-lookup"><span data-stu-id="cfc0a-172">Configure the solution with a default network</span></span>
<span data-ttu-id="cfc0a-173">På konfigurationssidan ser du ett enda nätverk med namnet **standard**.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-173">On the configuration page, you'll see a single network named **Default**.</span></span> <span data-ttu-id="cfc0a-174">När du inte har definierats några nätverk placeras alla automatiskt identifieras undernät i nätverket standard.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-174">When you haven't defined any networks, all the automatically-discovered subnets are placed in the Default network.</span></span>

<span data-ttu-id="cfc0a-175">När du skapar ett nätverk kan du lägga till ett undernät till den och undernätet tas bort från standardnätverk.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-175">Whenever you create a network, you add a subnet to it and that subnet is removed from the Default network.</span></span> <span data-ttu-id="cfc0a-176">Om du tar bort ett nätverk, returneras alla undernät automatiskt till standard-nätverk.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-176">If you delete a network, all its subnets are automatically returned to the Default network.</span></span>

<span data-ttu-id="cfc0a-177">Med andra ord är standardnätverk en behållare för alla undernät som inte ingår i en användardefinierad nätverk.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-177">In other words, the Default network is the container for all the subnets that are not contained in any user-defined network.</span></span> <span data-ttu-id="cfc0a-178">Du kan inte redigera eller ta bort standardnätverk.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-178">You cannot edit or delete the Default network.</span></span> <span data-ttu-id="cfc0a-179">Det finns alltid i systemet.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-179">It always remains in the system.</span></span> <span data-ttu-id="cfc0a-180">Du kan dock skapa så många nätverk som du behöver.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-180">However, you can create as many networks as you need.</span></span>

<span data-ttu-id="cfc0a-181">I de flesta fall undernät i din organisation ska ordnas i flera nätverk och du måste skapa en eller flera nätverk för att gruppera dina undernät.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-181">In most cases, the subnets in your organization will be arranged in more than one network and you should create one or more networks to logically group your subnets.</span></span>

### <a name="create-new-networks"></a><span data-ttu-id="cfc0a-182">Skapa nya nätverk</span><span class="sxs-lookup"><span data-stu-id="cfc0a-182">Create new networks</span></span>
<span data-ttu-id="cfc0a-183">Ett nätverk i Prestandaövervakaren för nätverk är en behållare för undernät.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-183">A network in Network Performance Monitor is a container for subnets.</span></span> <span data-ttu-id="cfc0a-184">Du kan skapa ett nätverk med ett namn som du vill använda och Lägg till undernät i nätverket.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-184">You can create a network with any name that you want and add subnets to the network.</span></span> <span data-ttu-id="cfc0a-185">Du kan till exempel skapa ett nätverk med namnet *Building1* och Lägg sedan till undernät eller skapa ett nätverk med namnet *DMZ* och Lägg sedan till alla undernät i demilitariserad zon till det här nätverket.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-185">For example, you can create a network named *Building1* and then add subnets, or you can create a network named *DMZ* and then add all subnets belonging to demilitarized zone to this network.</span></span>

#### <a name="to-create-a-new-network"></a><span data-ttu-id="cfc0a-186">Skapa ett nytt nätverk</span><span class="sxs-lookup"><span data-stu-id="cfc0a-186">To create a new network</span></span>
1. <span data-ttu-id="cfc0a-187">Klicka på **Lägg till nätverket** och Skriv nätverkets namn och beskrivning.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-187">Click **Add network** and then type the network name and description.</span></span>
2. <span data-ttu-id="cfc0a-188">Välj ett eller flera undernät och klicka sedan på **Lägg till**.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-188">Select one or more subnets, and then click **Add**.</span></span>
3. <span data-ttu-id="cfc0a-189">Klicka på **spara** att spara konfigurationen.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-189">Click **Save** to save the configuration.</span></span>  
   <span data-ttu-id="cfc0a-190">![lägga till nätverk](./media/log-analytics-network-performance-monitor/npm-add-network.png)</span><span class="sxs-lookup"><span data-stu-id="cfc0a-190">![add network](./media/log-analytics-network-performance-monitor/npm-add-network.png)</span></span>

### <a name="wait-for-data-aggregation"></a><span data-ttu-id="cfc0a-191">Vänta tills Datasammanställning</span><span class="sxs-lookup"><span data-stu-id="cfc0a-191">Wait for data aggregation</span></span>
<span data-ttu-id="cfc0a-192">När du har sparat konfigurationen för första gången, startar lösningen samla in paket förluster eller fördröjningar nätverksinformation mellan noderna där agenter är installerade.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-192">After you've saved the configuration for first time, the solution starts collecting network packet loss and latency information between the nodes where agents are installed.</span></span> <span data-ttu-id="cfc0a-193">Den här processen kan ta en stund ibland över 30 minuter.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-193">This process can take a while, sometimes over 30 minutes.</span></span> <span data-ttu-id="cfc0a-194">Under det här tillståndet Network Performance Monitor-panelen på översiktssidan visas ett meddelande om *Datasammanställning pågående*.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-194">During this state, the Network Performance Monitor tile in the overview page displays a message stating *Data aggregation in process*.</span></span>

![Dataaggregering pågår](./media/log-analytics-network-performance-monitor/npm-aggregation.png)

<span data-ttu-id="cfc0a-196">När data har överförts visas Network Performance Monitor panelen uppdateras visar data.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-196">When the data has been uploaded, you'll see the Network Performance Monitor tile updated showing data.</span></span>

![Prestandaövervakaren nätverksikon](./media/log-analytics-network-performance-monitor/npm-tile.png)

<span data-ttu-id="cfc0a-198">Klicka på panelen om du vill visa infopanelen Network Performance Monitor.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-198">Click the tile to view the Network Performance Monitor dashboard.</span></span>

![Nätverket Prestandaövervakaren instrumentpanelen](./media/log-analytics-network-performance-monitor/npm-dash01.png)

### <a name="edit-monitoring-settings-for-subnets"></a><span data-ttu-id="cfc0a-200">Redigera inställningarna för övervakning för undernät</span><span class="sxs-lookup"><span data-stu-id="cfc0a-200">Edit monitoring settings for subnets</span></span>
<span data-ttu-id="cfc0a-201">Visas alla undernät där minst en agent har installerats på den **undernätverk** fliken i konfigurationssidan.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-201">All subnets where at least one agent was installed are listed on the **Subnetworks** tab in the configuration page.</span></span>

#### <a name="to-enable-or-disable-monitoring-for-particular-subnetworks"></a><span data-ttu-id="cfc0a-202">Aktivera eller inaktivera övervakning för specifika undernät</span><span class="sxs-lookup"><span data-stu-id="cfc0a-202">To enable or disable monitoring for particular subnetworks</span></span>
1. <span data-ttu-id="cfc0a-203">Markera eller avmarkera kryssrutan bredvid den **ID för undernätverk** och se till att **för övervakning** är markerad eller avmarkerad, vid behov.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-203">Select or clear the box next to the **subnetwork ID** and then ensure that **Use for Monitoring** is selected or cleared, as appropriate.</span></span> <span data-ttu-id="cfc0a-204">Du kan markera eller avmarkera flera undernät.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-204">You can select or clear multiple subnets.</span></span> <span data-ttu-id="cfc0a-205">När den är inaktiverad, övervakas inte undernätverk som agenterna uppdateras för att stoppa pinga andra agenter.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-205">When disabled, subnetworks are not monitored as the agents will be updated to stop pinging other agents.</span></span>
2. <span data-ttu-id="cfc0a-206">Välj de noder som du vill övervaka för en viss undernätverk genom att välja undernätverk i listan och flytta krävs noderna mellan listor som innehåller oövervakade och övervakade noder.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-206">Choose the nodes that you want to monitor for a particular subnetwork by selecting the subnetwork from the list and moving the required nodes between the lists containing unmonitored and monitored nodes.</span></span>
   <span data-ttu-id="cfc0a-207">Du kan lägga till en anpassad **beskrivning** till undernätverk, om du vill.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-207">You can add a custom **description** to the subnetwork, if you like.</span></span>
3. <span data-ttu-id="cfc0a-208">Klicka på **spara** att spara konfigurationen.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-208">Click **Save** to save the configuration.</span></span>  
   <span data-ttu-id="cfc0a-209">![Redigera undernätet](./media/log-analytics-network-performance-monitor/npm-edit-subnet.png)</span><span class="sxs-lookup"><span data-stu-id="cfc0a-209">![edit subnet](./media/log-analytics-network-performance-monitor/npm-edit-subnet.png)</span></span>

### <a name="choose-nodes-to-monitor"></a><span data-ttu-id="cfc0a-210">Välj noder för att övervaka</span><span class="sxs-lookup"><span data-stu-id="cfc0a-210">Choose nodes to monitor</span></span>
<span data-ttu-id="cfc0a-211">Alla noder som har en agent som installerats på de visas i den **noder** fliken.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-211">All the nodes that have an agent installed on them are listed in the **Nodes** tab.</span></span>

#### <a name="to-enable-or-disable-monitoring-for-nodes"></a><span data-ttu-id="cfc0a-212">Aktivera eller inaktivera övervakning för noder</span><span class="sxs-lookup"><span data-stu-id="cfc0a-212">To enable or disable monitoring for nodes</span></span>
1. <span data-ttu-id="cfc0a-213">Markera eller avmarkera de noder som du vill övervaka eller stoppa övervakningen.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-213">Select or clear the nodes that you want to monitor or stop monitoring.</span></span>
2. <span data-ttu-id="cfc0a-214">Klicka på **för övervakning**, eller avmarkera den efter behov.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-214">Click **Use for Monitoring**, or clear it, as appropriate.</span></span>
3. <span data-ttu-id="cfc0a-215">Klicka på **Spara**.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-215">Click **Save**.</span></span>  
   <span data-ttu-id="cfc0a-216">![aktivera övervakning av nod](./media/log-analytics-network-performance-monitor/npm-enable-node-monitor.png)</span><span class="sxs-lookup"><span data-stu-id="cfc0a-216">![enable node monitoring](./media/log-analytics-network-performance-monitor/npm-enable-node-monitor.png)</span></span>

### <a name="set-monitoring-rules"></a><span data-ttu-id="cfc0a-217">Ange regler för övervakning</span><span class="sxs-lookup"><span data-stu-id="cfc0a-217">Set monitoring rules</span></span>
<span data-ttu-id="cfc0a-218">Network Performance Monitor genererar hälsa händelser om finns en anslutning mellan två noder eller undernätverk eller nätverket länkar när ett tröskelvärde komprometteras.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-218">Network Performance Monitor generates health events about the connectivity between a pair of nodes or subnetwork or network links when a threshold is breached.</span></span> <span data-ttu-id="cfc0a-219">Dessa tröskelvärden kan hämtas automatiskt av systemet eller konfigurera anpassade Varningsregler.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-219">These thresholds can be learned automatically by the system or you can configure them custom alert rules.</span></span>

<span data-ttu-id="cfc0a-220">Den *standardregel* har skapats av systemet och skapar en hälsohändelse när förlust eller fördröjning mellan ett par nätverk eller undernätverk länkar överträdelser system lärt dig tröskelvärdet.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-220">The *Default rule* is created by the system and it creates a health event whenever loss or latency between any pair of networks or subnetwork links breaches the system-learned threshold.</span></span> <span data-ttu-id="cfc0a-221">Du kan välja att inaktivera Standardregeln och skapa anpassade regler för övervakning</span><span class="sxs-lookup"><span data-stu-id="cfc0a-221">You can choose to disable the default rule and create custom monitoring rules</span></span>

#### <a name="to-create-custom-monitoring-rules"></a><span data-ttu-id="cfc0a-222">Att skapa anpassade regler för övervakning</span><span class="sxs-lookup"><span data-stu-id="cfc0a-222">To create custom monitoring rules</span></span>
1. <span data-ttu-id="cfc0a-223">Klicka på **Lägg till regel** i den **övervakaren** och ange namn och beskrivning.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-223">Click **Add Rule** in the **Monitor** tab and enter the rule name and description.</span></span>
2. <span data-ttu-id="cfc0a-224">Välj paret med nätverks- eller undernätverk länkar för att övervaka i listan.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-224">Select the pair of network or subnetwork links to monitor from the lists.</span></span>
3. <span data-ttu-id="cfc0a-225">Först välja nätverket första undernätverk/s intressanta finns i nätverket listrutan och välj sedan undernätverk/s i motsvarande undernätverk listrutan.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-225">First select the network in which the first subnetwork/s of interest is contained from the network dropdown, and then select the subnetwork/s from the corresponding subnetwork dropdown.</span></span>
   <span data-ttu-id="cfc0a-226">Välj **alla undernät** om du vill övervaka alla undernät i en nätverkslänk.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-226">Select **All subnetworks** if you want to monitor all the subnetworks in a network link.</span></span> <span data-ttu-id="cfc0a-227">På liknande sätt väljer du den andra undernätverk/s av intresse.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-227">Similarly select the other subnetwork/s of interest.</span></span> <span data-ttu-id="cfc0a-228">Och du kan klicka på **Lägg till undantag** för att utesluta övervakning för specifika undernätverkslänkar från den val.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-228">And, you can click **Add Exception** to exclude monitoring for particular subnetwork links from the selection you've made.</span></span>
4. <span data-ttu-id="cfc0a-229">Välj mellan ICMP- och TCP protokoll för att köra syntetiska transaktioner.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-229">Choose between ICMP and TCP protocols for executing synthetic transactions.</span></span>
5. <span data-ttu-id="cfc0a-230">Om du inte vill skapa hälsa händelser för de objekt som du har valt, sedan avmarkera **aktivera övervakning av hälsotillstånd på länkarna som omfattas av den här regeln**.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-230">If you don't want to create health events for the items you've selected, then clear **Enable health monitoring on the links covered by this rule**.</span></span>
6. <span data-ttu-id="cfc0a-231">Välj övervakning villkor.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-231">Choose monitoring conditions.</span></span>
   <span data-ttu-id="cfc0a-232">Du kan ange anpassade tröskelvärden för hälsotillstånd händelse genereras genom att skriva tröskelvärden.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-232">You can set custom thresholds for health event generation by typing threshold values.</span></span> <span data-ttu-id="cfc0a-233">När värdet för villkoret går över dess valda tröskelvärdet för det valda nätverk/undernätverk paret, skapas en hälsohändelse.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-233">Whenever the value of the condition goes above its selected threshold for the selected network/subnetwork pair, a health event is generated.</span></span>
7. <span data-ttu-id="cfc0a-234">Klicka på **spara** att spara konfigurationen.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-234">Click **Save** to save the configuration.</span></span>  
   <span data-ttu-id="cfc0a-235">![Skapa anpassad regel för övervakning](./media/log-analytics-network-performance-monitor/npm-monitor-rule.png)</span><span class="sxs-lookup"><span data-stu-id="cfc0a-235">![create custom monitoring rule](./media/log-analytics-network-performance-monitor/npm-monitor-rule.png)</span></span>

<span data-ttu-id="cfc0a-236">När du har sparat en regel för övervakning, du kan integrera regeln med Alert Management genom att klicka på **skapa avisering**.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-236">After you save a monitoring rule, you can integrate that rule with Alert Management by clicking **Create Alert**.</span></span> <span data-ttu-id="cfc0a-237">En aviseringsregel skapas automatiskt med sökvillkoret och andra nödvändiga parametrar automatiskt ifyllda.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-237">An alert rule is automatically created with the search query and other required parameters automatically filled-in.</span></span> <span data-ttu-id="cfc0a-238">Med hjälp av en aviseringsregel, du kan ta emot e-postbaserad aviseringar, förutom befintliga aviseringar i NPM.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-238">Using an alert rule, you can receive email-based alerts, in addition to the existing alerts within NPM.</span></span> <span data-ttu-id="cfc0a-239">Aviseringar kan också utlösa vidtar åtgärder med runbooks eller de kan integrera med befintliga lösningar tjänsten med hjälp av webhooks.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-239">Alerts can also trigger remedial actions with runbooks or they can integrate with existing service management solutions using webhooks.</span></span> <span data-ttu-id="cfc0a-240">Du kan klicka på **hantera avisering** redigera inställningar för avisering.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-240">You can click **Manage Alert** to edit the alert settings.</span></span>

### <a name="choose-the-right-protocol-icmp-or-tcp"></a><span data-ttu-id="cfc0a-241">Välja rätt protokoll-ICMP- eller TCP</span><span class="sxs-lookup"><span data-stu-id="cfc0a-241">Choose the right protocol-ICMP or TCP</span></span>

<span data-ttu-id="cfc0a-242">Network Performance Monitor (NPM) använder syntetiska transaktioner för att beräkna prestandamått för nätverket som paketet dataförlust och länka svarstid.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-242">Network Performance Monitor (NPM) uses synthetic transactions to calculate network performance metrics like packet loss and link latency.</span></span> <span data-ttu-id="cfc0a-243">För att förstå det bättre att överväga en NPM-agent som är ansluten till ett end för en nätverkslänk.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-243">To understand this better, consider an NPM agent connected to one end of a network link.</span></span> <span data-ttu-id="cfc0a-244">Den här NPM-agenten skickar avsökningen paket till en andra NPM-agent som är ansluten till en annan slutet av nätverket.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-244">This NPM agent sends probe packets to a second NPM agent connected to another end of the network.</span></span> <span data-ttu-id="cfc0a-245">Andra agenten svarar med svarspaket.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-245">The second agent replies with response packets.</span></span> <span data-ttu-id="cfc0a-246">Den här processen upprepas några gånger.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-246">This process is repeated a few times.</span></span> <span data-ttu-id="cfc0a-247">Första NPM agenten utvärderar länkfördröjningen genom att mäta antalet svar och tidsåtgång för att ta emot varje svar och tappade paket.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-247">By measuring the number of replies and time taken to receive each reply, the first NPM agent assesses link latency and packet drops.</span></span>

<span data-ttu-id="cfc0a-248">Format, storlek och ordning i paketen bestäms av det protokoll som du väljer när du skapar regler för övervakning.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-248">The format, size and sequence of these packets is determined by the protocol that you choose when you create monitoring rules.</span></span> <span data-ttu-id="cfc0a-249">Baserat på protokollet för paket, mellanliggande nätverksenheter (routrar, växlar osv.) kan bearbeta paketen på olika sätt.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-249">Based on protocol of the packets, the intermediate network devices (routers, switches etc.) might process these packets differently.</span></span> <span data-ttu-id="cfc0a-250">Följaktligen påverkar önskat protokoll precisionen i resultaten.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-250">Consequently, your protocol choice affects the accuracy of the results.</span></span> <span data-ttu-id="cfc0a-251">Och önskat protokoll avgör också om du måste vidta alla manuella steg när du distribuerar lösningen NPM.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-251">And, your protocol choice also determines whether you must take any manual steps after you deploy the NPM solution.</span></span>

<span data-ttu-id="cfc0a-252">NPM kan du välja mellan att ICMP- och TCP-protokoll för att köra syntetiska transaktioner.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-252">NPM offers you the choice between ICMP and TCP protocols for executing synthetic transactions.</span></span>
<span data-ttu-id="cfc0a-253">Om du väljer ICMP när du skapar en regel för syntetisk transaktion, använda NPM-agenter ICMP ECHO-meddelanden för att beräkna Nätverksfördröjningen och paketförlust.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-253">If you choose ICMP when you create a synthetic transaction rule, the NPM agents use ICMP ECHO messages to calculate the network latency and packet loss.</span></span> <span data-ttu-id="cfc0a-254">ICMP ECHO använder samma meddelande som skickas av konventionella Ping-verktyget.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-254">ICMP ECHO uses the same message that is sent by the conventional Ping utility.</span></span> <span data-ttu-id="cfc0a-255">När du använder TCP som protokoll, skickar NPM agenter TCP SYN paket via nätverket.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-255">When you use TCP as the protocol, NPM agents send TCP SYN packet over the network.</span></span> <span data-ttu-id="cfc0a-256">Detta följs av en TCP-handskakning slutförande och sedan ta bort anslutningen via RST paket.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-256">This is followed by a TCP handshake completion and then removing the connection using RST packets.</span></span>

#### <a name="points-to-consider-before-choosing-the-protocol"></a><span data-ttu-id="cfc0a-257">Saker att tänka på innan du väljer protokollet</span><span class="sxs-lookup"><span data-stu-id="cfc0a-257">Points to consider before choosing the protocol</span></span>
<span data-ttu-id="cfc0a-258">Tänk på följande innan du väljer ett protokoll som ska användas:</span><span class="sxs-lookup"><span data-stu-id="cfc0a-258">Consider the following information before you choose a protocol to use:</span></span>

##### <a name="discovering-multiple-network-routes"></a><span data-ttu-id="cfc0a-259">Identifiering av flera nätverksvägar</span><span class="sxs-lookup"><span data-stu-id="cfc0a-259">Discovering multiple network routes</span></span>
<span data-ttu-id="cfc0a-260">TCP är mer exakt när identifiering av flera vägar och den måste färre agenter i varje undernät.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-260">TCP is more accurate when discovering multiple routes and it needs fewer agents in each subnet.</span></span> <span data-ttu-id="cfc0a-261">En eller två agenter som använder TCP kan exempelvis identifiera alla redundanta sökvägar mellan undernät.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-261">For example, one or two agents using TCP can discover all redundant paths between subnets.</span></span> <span data-ttu-id="cfc0a-262">Du måste dock flera agenter använder ICMP för att få samma resultat.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-262">However, you need several agents using ICMP to achieve similar results.</span></span> <span data-ttu-id="cfc0a-263">Med ICMP, om du har *N* antal vägar mellan två undernät som du behöver mer än 5*N* agenter i källan eller målet undernät.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-263">Using ICMP, if you have *N* number of routes between two subnets you need more than 5*N* agents in either a source or destination subnet.</span></span>

##### <a name="accuracy-of-results"></a><span data-ttu-id="cfc0a-264">Riktighet resultat</span><span class="sxs-lookup"><span data-stu-id="cfc0a-264">Accuracy of results</span></span>
<span data-ttu-id="cfc0a-265">Routrar och växlar tenderar att tilldela ICMP ECHO-paket jämfört med TCP-paket med lägre prioritet.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-265">Routers and switches tend to assign lower priority to ICMP ECHO packets compared to TCP packets.</span></span> <span data-ttu-id="cfc0a-266">I vissa situationer när nätverksenheter är högt belastad, avspeglar data hämtas av TCP närmare den förluster eller fördröjningar orsakade av program.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-266">In certain situations, when network devices are heavily loaded, the data obtained by TCP more closely reflects the loss and latency experienced by applications.</span></span> <span data-ttu-id="cfc0a-267">Detta inträffar eftersom de flesta programtrafiken flödar över TCP.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-267">This occurs because most of the application traffic flows over TCP.</span></span> <span data-ttu-id="cfc0a-268">I sådana fall ger ICMP mindre korrekta resultat jämfört med TCP.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-268">In such cases, ICMP provides less accurate results compared to TCP.</span></span>

##### <a name="firewall-configuration"></a><span data-ttu-id="cfc0a-269">Brandväggskonfiguration</span><span class="sxs-lookup"><span data-stu-id="cfc0a-269">Firewall configuration</span></span>
<span data-ttu-id="cfc0a-270">TCP-protokollet kräver att TCP-paket skickas till en målport.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-270">TCP protocol requires that TCP packets are sent to a destination port.</span></span> <span data-ttu-id="cfc0a-271">Standardport som används av NPM agenter är 8084, men du kan ändra detta när du konfigurerar agenter.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-271">The default port used by NPM agents is 8084, however you can change this when you configure agents.</span></span> <span data-ttu-id="cfc0a-272">Därför måste du kontrollera att din nätverkets brandväggar eller NSG-regler (i Azure) tillåter trafik på port.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-272">So, you need to ensure that your network firewalls or NSG rules (in Azure) are allowing traffic on the port.</span></span> <span data-ttu-id="cfc0a-273">Du måste också se till att den lokala brandväggen på datorer där agenter är installerade är konfigurerad för att tillåta trafik på den här porten.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-273">You also need to make sure that the local firewall on the computers where agents are installed is configured to allow traffic on this port.</span></span>

<span data-ttu-id="cfc0a-274">Du kan använda PowerShell-skript för att konfigurera brandväggens regler på dina datorer som kör Windows, men du måste konfigurera nätverkets brandvägg manuellt.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-274">You can use PowerShell scripts to configure firewall rules on your computers running Windows, however you need to configure your network firewall manually.</span></span>

<span data-ttu-id="cfc0a-275">Däremot fungerar inte ICMP använder port.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-275">In contrast, ICMP does not operate using port.</span></span> <span data-ttu-id="cfc0a-276">I de flesta företagsscenarier tillåts ICMP-trafik via brandvägg så att du kan använda verktyg för Nätverksdiagnostik som Ping-verktyget.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-276">In most enterprise scenarios, ICMP traffic is permitted through the firewalls to allow you to use network diagnostics tools like the Ping utility.</span></span> <span data-ttu-id="cfc0a-277">Så om du kan pinga en dator från en annan, kan du använda ICMP-protokollet utan att behöva konfigurera brandväggar manuellt.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-277">So, if you can Ping one machine from another, then you can use the ICMP protocol without having to configure firewalls manually.</span></span>

> [!NOTE]
> <span data-ttu-id="cfc0a-278">Om du inte är säker på vilket protokoll som ska användas, väljer du börja med ICMP.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-278">In case you are not sure what protocol to use, choose ICMP to start with.</span></span> <span data-ttu-id="cfc0a-279">Om du inte är nöjd med resultaten kan växla du alltid till TCP senare.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-279">If you are not satisfied with the results, you can always switch to TCP later.</span></span>


#### <a name="how-to-switch-the-protocol"></a><span data-ttu-id="cfc0a-280">Så här byter du protokollet</span><span class="sxs-lookup"><span data-stu-id="cfc0a-280">How to switch the protocol</span></span>

<span data-ttu-id="cfc0a-281">Om du väljer att använda ICMP under distributionen måste växla du till TCP när som helst genom att redigera standardinställningar för övervakning av regeln.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-281">If you chose to use ICMP during deployment, you can switch to TCP at any time by editing the default monitoring rule.</span></span>

##### <a name="to-edit-the-default-monitoring-rule"></a><span data-ttu-id="cfc0a-282">Så här redigerar du standardinställningar för övervakning av regel</span><span class="sxs-lookup"><span data-stu-id="cfc0a-282">To edit the default monitoring rule</span></span>
1.  <span data-ttu-id="cfc0a-283">Gå till **nätverksprestanda** > **övervakaren** > **konfigurera** > **övervakaren** och klicka sedan på **standardregel**.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-283">Navigate to **Network Performance** > **Monitor** > **Configure** > **Monitor** and then click **Default rule**.</span></span>
2.  <span data-ttu-id="cfc0a-284">Bläddra till den **protokollet** och välj det protokoll som du vill använda.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-284">Scroll to the **Protocol** section and select the protocol that you want to use.</span></span>
3.  <span data-ttu-id="cfc0a-285">Klicka på **spara** inställningen ska användas.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-285">Click **Save** to apply the setting.</span></span>

<span data-ttu-id="cfc0a-286">Även om Standardregeln är med ett visst protokoll, kan du skapa nya regler med ett annat protokoll.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-286">Even if the default rule is using a specific protocol, you can create new rules with a different protocol.</span></span> <span data-ttu-id="cfc0a-287">Du kan även skapa en blandning av regler om några av reglerna som använder ICMP och en annan med TCP.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-287">You can even create a mix of rules where some of the rules use ICMP and another uses TCP.</span></span>




## <a name="data-collection-details"></a><span data-ttu-id="cfc0a-288">Information om samlingen</span><span class="sxs-lookup"><span data-stu-id="cfc0a-288">Data collection details</span></span>
<span data-ttu-id="cfc0a-289">Network Performance Monitor använder TCP SYN-SYNACK-ACK handskakning paket när du har valt TCP och ICMP ECHO ICMP ECHO SVARSMEDDELANDEN när ICMP är valt som protokoll för att samla in information om förluster eller fördröjningar.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-289">Network Performance Monitor uses TCP SYN-SYNACK-ACK handshake packets when TCP is chosen and ICMP ECHO ICMP ECHO REPLY when ICMP is chosen as the protocol to collect loss and latency information.</span></span> <span data-ttu-id="cfc0a-290">Traceroute används också för att hämta information om nätverkstopologin.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-290">Traceroute is also used to get topology information.</span></span>

<span data-ttu-id="cfc0a-291">I följande tabell visar metoder för insamling av data och annan information om hur data samlas in för Network Performance Monitor.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-291">The following table shows data collection methods and other details about how data is collected for Network Performance Monitor.</span></span>

| <span data-ttu-id="cfc0a-292">Plattform</span><span class="sxs-lookup"><span data-stu-id="cfc0a-292">platform</span></span> | <span data-ttu-id="cfc0a-293">Styr Agent</span><span class="sxs-lookup"><span data-stu-id="cfc0a-293">Direct Agent</span></span> | <span data-ttu-id="cfc0a-294">SCOM-agent</span><span class="sxs-lookup"><span data-stu-id="cfc0a-294">SCOM agent</span></span> | <span data-ttu-id="cfc0a-295">Azure Storage</span><span class="sxs-lookup"><span data-stu-id="cfc0a-295">Azure Storage</span></span> | <span data-ttu-id="cfc0a-296">SCOM krävs?</span><span class="sxs-lookup"><span data-stu-id="cfc0a-296">SCOM required?</span></span> | <span data-ttu-id="cfc0a-297">SCOM-agent data som skickas via management-grupp</span><span class="sxs-lookup"><span data-stu-id="cfc0a-297">SCOM agent data sent via management group</span></span> | <span data-ttu-id="cfc0a-298">Frekvens för samlingen</span><span class="sxs-lookup"><span data-stu-id="cfc0a-298">collection frequency</span></span> |
| --- | --- | --- | --- | --- | --- | --- |
| <span data-ttu-id="cfc0a-299">Windows</span><span class="sxs-lookup"><span data-stu-id="cfc0a-299">Windows</span></span> | <span data-ttu-id="cfc0a-300">&#8226;</span><span class="sxs-lookup"><span data-stu-id="cfc0a-300">&#8226;</span></span> | <span data-ttu-id="cfc0a-301">&#8226;</span><span class="sxs-lookup"><span data-stu-id="cfc0a-301">&#8226;</span></span> |  |  |  |<span data-ttu-id="cfc0a-302">TCP-handskakningar på/ICMP ECHO-meddelanden var femte sekund data skickas var 3: e minut</span><span class="sxs-lookup"><span data-stu-id="cfc0a-302">TCP handshakes/ICMP ECHO messages every 5 seconds, data sent every 3 minutes</span></span> |

<span data-ttu-id="cfc0a-303">Lösningen använder syntetiska transaktioner för att utvärdera hälsan för nätverket.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-303">The solution uses synthetic transactions to assess the health of the network.</span></span> <span data-ttu-id="cfc0a-304">OMS-agenter som installerats på olika punkt i nätverkspaket exchange TCP eller ICMP Echo (beroende på det protokoll som valts för övervakning) med varandra.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-304">OMS agents installed at various point in the network exchange TCP packets or ICMP Echo (depending on the protocol selected for monitoring) with one another.</span></span> <span data-ttu-id="cfc0a-305">I processen dig agenter fram och åter tid och paket förlust, eventuella.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-305">In the process, agents learn the round-trip time and packet loss, if any.</span></span> <span data-ttu-id="cfc0a-306">Varje agent med jämna mellanrum, utför även en spårningsrutt för att andra agenter för att hitta alla olika vägar i nätverket som ska testas.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-306">Periodically, each agent also performs a trace route to other agents to find all the various routes in the network that must be tested.</span></span> <span data-ttu-id="cfc0a-307">Med dessa data kan härleda agenterna Nätverksfördröjningen och paket förlustsiffror.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-307">Using this data, the agents can deduce the network latency and packet loss figures.</span></span> <span data-ttu-id="cfc0a-308">Testerna upprepas var femte sekund och data har aggregerats under en period på tre minuter med agenterna innan den skickas till logganalys-tjänsten.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-308">The tests are repeated every five seconds and data is aggregated for a period of three minutes by the agents before uploading it to the Log Analytics service.</span></span>

> [!NOTE]
> <span data-ttu-id="cfc0a-309">Även om agenter är ofta kommunicerar med varandra, genererar de inte mycket nätverkstrafik när du utför testerna.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-309">Although agents communicate with each other frequently, they do not generate a lot of network traffic while conducting the tests.</span></span> <span data-ttu-id="cfc0a-310">Agenter använda enbart TCP SYN-SYNACK-ACK handskakning paket att fastställa förluster eller fördröjningar – inga data som utbyts paket.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-310">Agents rely only on TCP SYN-SYNACK-ACK handshake packets to determine the loss and latency -- no data packets are exchanged.</span></span> <span data-ttu-id="cfc0a-311">Under den här processen agenter kommunicerar med varandra endast vid behov och kommunikationstopologin agent är optimerad för att minska nätverkstrafiken.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-311">During this process, agents communicate with each other only when needed and the agent communication topology is optimized to reduce network traffic.</span></span>
>
>

## <a name="using-the-solution"></a><span data-ttu-id="cfc0a-312">Använda lösningen</span><span class="sxs-lookup"><span data-stu-id="cfc0a-312">Using the solution</span></span>
<span data-ttu-id="cfc0a-313">Det här avsnittet beskriver alla instrumentpanelen funktioner och hur de används.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-313">This section explains all the dashboard functions and how to use them.</span></span>

### <a name="solution-overview-tile"></a><span data-ttu-id="cfc0a-314">Lösning: översikt sida vid sida</span><span class="sxs-lookup"><span data-stu-id="cfc0a-314">Solution Overview tile</span></span>
<span data-ttu-id="cfc0a-315">När du har aktiverat Network Performance Monitor-lösningen ger en snabb överblick över nätverkets tillstånd panelen lösning på översiktssidan OMS.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-315">After you've enabled the Network Performance Monitor solution, the solution tile on the OMS Overview page provides a quick overview of the network health.</span></span> <span data-ttu-id="cfc0a-316">Ett ringdiagram visar antalet felfritt och feltillstånd undernätverkslänkar visas.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-316">It displays a doughnut chart showing the number of healthy and unhealthy subnetwork links.</span></span> <span data-ttu-id="cfc0a-317">När du klickar på ikonen öppnas lösning instrumentpanelen.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-317">When you click the tile, it opens the solution dashboard.</span></span>

![Prestandaövervakaren nätverksikon](./media/log-analytics-network-performance-monitor/npm-tile.png)

### <a name="network-performance-monitor-solution-dashboard"></a><span data-ttu-id="cfc0a-319">Nätverket Prestandaövervakaren lösning instrumentpanelen</span><span class="sxs-lookup"><span data-stu-id="cfc0a-319">Network Performance Monitor solution dashboard</span></span>
<span data-ttu-id="cfc0a-320">Den **nätverk sammanfattning** bladet visar en översikt över nätverk tillsammans med relativ storlek.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-320">The **Network Summary** blade shows a summary of the networks along with their relative size.</span></span> <span data-ttu-id="cfc0a-321">Detta följs av paneler visar totalt antal nätverkslänkar, undernät länkar och sökvägar i systemet (en sökväg som består av IP-adresserna för två värdar med agenter och alla hopp mellan dem).</span><span class="sxs-lookup"><span data-stu-id="cfc0a-321">This is followed by tiles showing total number of network links, subnet links and paths in the system (a path consists of the IP addresses of two hosts with agents and all the hops between them).</span></span>

<span data-ttu-id="cfc0a-322">Den **upp händelser på nätverket hälsa** bladet visar en lista över senaste hälsa händelser och aviseringar i systemet och hur lång tid eftersom händelsen har varit aktiv.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-322">The **Top Network Health Events** blade provides a list of most recent health events and alerts in the system and the time since the event has been active.</span></span> <span data-ttu-id="cfc0a-323">En hälsohändelse eller en varning genereras när paketförlust eller latens för en länk för nätverk eller undernätverk överskrider ett tröskelvärde.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-323">A health event or alert is generated whenever the packet loss or latency of a network or subnetwork link exceeds a threshold.</span></span>

<span data-ttu-id="cfc0a-324">Den **upp ohälsosamt nätverkslänkar** bladet visar en lista över nätverkslänkar.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-324">The **Top Unhealthy Network Links** blade shows a list of unhealthy network links.</span></span> <span data-ttu-id="cfc0a-325">Dessa är nätverkslänkar som har en eller flera negativa hälsohändelse för dem för tillfället.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-325">These are the network links that have one or more adverse health event for them at the moment.</span></span>

<span data-ttu-id="cfc0a-326">Den **upp Undernätverkslänkar med mest förlust** och **Undernätverkslänkar med mest svarstid** blad Visa översta undernätverkslänkar genom paketförlust och främsta undernätverkslänkar efter svarstid respektive.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-326">The **Top Subnetwork Links with Most Loss** and **Subnetwork Links with Most Latency** blades show the top subnetwork links by packet loss and top subnetwork links by latency respectively.</span></span> <span data-ttu-id="cfc0a-327">Fördröjningar eller vissa mängden paketförlust kan förväntas på vissa nätverkslänkarna.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-327">High latency or some amount of packet loss might be expected on certain network links.</span></span> <span data-ttu-id="cfc0a-328">Dessa länkar visas i den översta tio listan men är inte dåligt hälsotillstånd.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-328">Such links appear in the top ten lists but are not marked unhealthy.</span></span>

<span data-ttu-id="cfc0a-329">Den **vanliga frågor** bladet innehåller en uppsättning sökfrågor som hämta rådata för nätverksövervakning data direkt.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-329">The **Common Queries** blade contains a set of search queries that fetch raw network monitoring data directly.</span></span> <span data-ttu-id="cfc0a-330">Du kan använda de här frågorna som utgångspunkt för att skapa egna frågor för anpassad rapportering.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-330">You can use these queries as a starting point for creating your own queries for customized reporting.</span></span>

![Nätverket Prestandaövervakaren instrumentpanelen](./media/log-analytics-network-performance-monitor/npm-dash01.png)

### <a name="drill-down-for-depth"></a><span data-ttu-id="cfc0a-332">Gå nedåt för djup</span><span class="sxs-lookup"><span data-stu-id="cfc0a-332">Drill-down for depth</span></span>
<span data-ttu-id="cfc0a-333">Du kan klicka på olika länkar på lösningen instrumentpanelen för att gå nedåt djupare i alla intresseområde.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-333">You can click various links on the solution dashboard to drill-down deeper into any area of interest.</span></span> <span data-ttu-id="cfc0a-334">När du ser en avisering eller ett feltillstånd nätverkslänken som visas på instrumentpanelen kan du till exempel klicka att undersöka vidare.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-334">For example, when you see an alert or an unhealthy network link appear on the dashboard, you can click it to investigate further.</span></span> <span data-ttu-id="cfc0a-335">Vidarebefordras du till en sida som visar alla undernätverkslänkar för nätverks-länk.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-335">You'll be taken to a page that lists all the subnetwork links for the particular network link.</span></span> <span data-ttu-id="cfc0a-336">Du kommer att kunna se status för dataförlust, svarstid och hälsotillståndet för varje undernätverk länk och snabbt ta reda på vilka undernätverkslänkar som orsakar problemet.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-336">You will be able to see the loss, latency and health status of each subnetwork link and quickly find out what subnetwork links are causing the problem.</span></span> <span data-ttu-id="cfc0a-337">Du kan klicka **visa nodlänkar** att se alla länkar i noden för länken ohälsosamt undernät.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-337">You can then click **View node links** to see all the node links for the unhealthy subnet link.</span></span> <span data-ttu-id="cfc0a-338">Du kan sedan se enskilda nod till nod länkar och hitta nodlänkar.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-338">Then, you can see individual node-to-node links and find the unhealthy node links.</span></span>

<span data-ttu-id="cfc0a-339">Du kan klicka på **visa topologi** att visa hopp av hopp topologin vägar mellan käll- och noderna.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-339">You can click **View topology** to view the hop-by-hop topology of the routes between the source and destination nodes.</span></span> <span data-ttu-id="cfc0a-340">Feltillstånd vägar eller hopp visas i rött så att du snabbt kan identifiera problemet till en viss del av nätverket.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-340">The unhealthy routes or hops are shown in red so that you can quickly identify the problem to a particular portion of the network.</span></span>

![specificera-data](./media/log-analytics-network-performance-monitor/npm-drill.png)

### <a name="network-state-recorder"></a><span data-ttu-id="cfc0a-342">Nätverket lådan</span><span class="sxs-lookup"><span data-stu-id="cfc0a-342">Network State Recorder</span></span>

<span data-ttu-id="cfc0a-343">Varje visas en ögonblicksbild av nätverkets tillstånd vid en viss tidpunkt.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-343">Each view displays a snapshot of your network health at a particular point in time.</span></span> <span data-ttu-id="cfc0a-344">Senaste status visas som standard.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-344">By default, the most recent state is shown.</span></span> <span data-ttu-id="cfc0a-345">Längst upp på sidan visar punkten i tiden som status visas.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-345">The bar at the top of the page shows the point in time for which the state is being displayed.</span></span> <span data-ttu-id="cfc0a-346">Du kan välja att gå tillbaka i tiden och visa ögonblicksbilden av nätverkets tillstånd genom att klicka på listen på **åtgärder**.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-346">You can choose to go back in time and view the snapshot of your network health by clicking on the bar on **Actions**.</span></span> <span data-ttu-id="cfc0a-347">Du kan också välja att aktivera eller inaktivera automatisk uppdatering för en sida när du visar det aktuella tillståndet.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-347">You can also choose to enable or disable auto-refresh for any page while you view the latest state.</span></span>

![nätverket](./media/log-analytics-network-performance-monitor/network-state.png)

#### <a name="trend-charts"></a><span data-ttu-id="cfc0a-349">Trend diagram</span><span class="sxs-lookup"><span data-stu-id="cfc0a-349">Trend charts</span></span>
<span data-ttu-id="cfc0a-350">På varje nivå som du nedåt, du kan se trend förluster eller fördröjningar för en nätverkslänk.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-350">At each level that you drill-down, you can see the trend of loss and latency for a network link.</span></span> <span data-ttu-id="cfc0a-351">Trend diagram är också tillgängliga för undernätverk och nod-länkar.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-351">Trend charts are also available for Subnetwork and Node links.</span></span> <span data-ttu-id="cfc0a-352">Du kan ändra tidsintervallet för diagram ska ritas med hjälp av kontrollen tid överst i diagrammet.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-352">You can change the time interval for the graph to plot by using the time control at the top of the chart.</span></span>

<span data-ttu-id="cfc0a-353">Trend diagram visar en historisk perspektiv för prestandan hos en nätverkslänk.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-353">Trend charts show you a historical perspective of the performance of a network link.</span></span> <span data-ttu-id="cfc0a-354">Vissa nätverksproblem är tillfälligt till sin natur och är svåra att fånga endast genom att titta på det aktuella tillståndet för nätverket.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-354">Some network issues are transient in nature and would be hard to catch only by looking at the current state of the network.</span></span> <span data-ttu-id="cfc0a-355">Detta beror på att problem kan ansluta snabbt och försvinner innan alla meddelanden enbart för att visas igen vid en senare tidpunkt.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-355">This is because issues can surface quickly and disappear before anyone notices, only to reappear at a later point in time.</span></span> <span data-ttu-id="cfc0a-356">Sådana tillfälliga problem kan också vara svårt för administratörer eftersom de utfärdar ofta yta som oförklarade ökningen av svarstiden programmet, även när alla programkomponenter ut att fungera smidigt.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-356">Such transient issues can also be difficult for application administrators because those issues often surface as unexplained increases in application response time, even when all application components appear to run smoothly.</span></span>

<span data-ttu-id="cfc0a-357">Du kan enkelt identifiera dessa typer av problem genom att titta på trenddiagram där problemet visas som en plötslig topp i Nätverksfördröjningen eller paketförlust.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-357">You can easily detect those kinds of issues by looking at a trend chart where the issue will appear as a sudden spike in network latency or packet loss.</span></span>

![trenddiagram](./media/log-analytics-network-performance-monitor/npm-trend.png)

#### <a name="hop-by-hop-topology-map"></a><span data-ttu-id="cfc0a-359">hopp av hopp topologisk karta</span><span class="sxs-lookup"><span data-stu-id="cfc0a-359">Hop-by-hop topology map</span></span>
<span data-ttu-id="cfc0a-360">Network Performance Monitor visas topologin som hopp av hopp av routinginformation mellan två noder i en interaktiv topologisk karta.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-360">Network Performance Monitor shows you the hop-by-hop topology of routes between two nodes on an interactive topology map.</span></span> <span data-ttu-id="cfc0a-361">Du kan visa topologisk karta genom att markera en nod länk och sedan klicka på **visa topologi**.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-361">You can view the topology map by selecting a node link and then clicking **View topology**.</span></span> <span data-ttu-id="cfc0a-362">Du kan också visa topologisk karta genom att klicka på **sökvägar** panelen på instrumentpanelen.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-362">Also, you can view the topology map by clicking **Paths** tile on the dashboard.</span></span> <span data-ttu-id="cfc0a-363">När du klickar på **sökvägar** på instrumentpanelen, måste du markera käll- och noder från den vänstra panelen och klicka sedan på **ritytans** ska ritas vägar mellan två noder.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-363">When you click **Paths** on the dashboard, you'll have to select the source and destination nodes from the left hand panel and then click **Plot** to plot the routes between the two nodes.</span></span>

<span data-ttu-id="cfc0a-364">Topologisk karta visar hur många vägar mellan två noder och vad är sökvägar datapaketen ta.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-364">The topology map displays how many routes are between the two nodes and what paths the data packets take.</span></span> <span data-ttu-id="cfc0a-365">Flaskhalsar i nätverket är markerat i rött på topologisk karta.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-365">Network performance bottlenecks are marked in red on the topology map.</span></span> <span data-ttu-id="cfc0a-366">Du kan hitta en felaktig nätverksanslutning eller en felaktig nätverksenhet genom att titta på red färgade elementen på topologisk karta.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-366">You can locate a faulty network connection or a faulty network device by looking at red colored elements on the topology map.</span></span>

<span data-ttu-id="cfc0a-367">När du klickar på en nod eller hovra över den på topologisk karta, visas egenskaperna för noden som FQDN och IP-adressen.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-367">When you click a node or hover over it on the topology map, you'll see the properties of the node like FQDN and IP address.</span></span> <span data-ttu-id="cfc0a-368">Klicka på ett hopp finns den IP-adress.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-368">Click a hop to see it's IP address.</span></span> <span data-ttu-id="cfc0a-369">Du kan välja att filtrera särskilt vägar genom att använda filter i åtgärdsrutan döljas.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-369">You can choose to filter particular routes by using the filters in the collapsible action pane.</span></span> <span data-ttu-id="cfc0a-370">Och du kan också förenkla nätverkstopologier genom att dölja mellanliggande hopp med skjutreglaget i åtgärdsfönstret.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-370">And, you can also simplify the network topologies by hiding the intermediate hops using the slider in the action pane.</span></span> <span data-ttu-id="cfc0a-371">Du kan zooma in eller out-of-topologisk karta med mushjulet.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-371">You can zoom-in or out of the topology map by using your mouse wheel.</span></span>

<span data-ttu-id="cfc0a-372">Observera att topologin visas på kartan är nivå 3-topologi och innehåller inte nivå 2-enheter och anslutningar.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-372">Note that the topology shown in the map is layer 3 topology and doesn't contain layer 2 devices and connections.</span></span>

![hopp av hopp topologisk karta](./media/log-analytics-network-performance-monitor/npm-topology.png)

#### <a name="fault-localization"></a><span data-ttu-id="cfc0a-374">Lokalisering av fel</span><span class="sxs-lookup"><span data-stu-id="cfc0a-374">Fault localization</span></span>
<span data-ttu-id="cfc0a-375">Network Performance Monitor kan hitta flaskhalsar i nätverk utan att ansluta till nätverksenheter.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-375">Network Performance Monitor is able to find the network bottlenecks without connecting to the network devices.</span></span> <span data-ttu-id="cfc0a-376">Network Performance Monitor gör baserat på de data som samlas in från nätverket och genom att använda avancerade algoritmer på diagrammet nätverk, en probabilistic uppskattning av de delar av nätverket som är mest sannolika orsaken till problemet.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-376">Based on the data that it gathers from the network and by applying advanced algorithms on the network graph, Network Performance Monitor makes a probabilistic estimate of the parts of network that are most likely the source of the problem.</span></span>

<span data-ttu-id="cfc0a-377">Den här metoden är användbar för att avgöra flaskhalsarna i nätverket när åtkomst till hopp är inte tillgängligt eftersom det inte kräver några data samlas in från nätverksenheterna som routrar och växlar.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-377">This approach is useful to determine the network bottlenecks when access to hops isn't available because it doesn't require any data to be gathered from the network devices such as routers or switches.</span></span> <span data-ttu-id="cfc0a-378">Detta är också användbart när hopp mellan två noder som inte ingår i din administrativ kontroll.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-378">This is also useful when the hops between two nodes are not in your administrative control.</span></span> <span data-ttu-id="cfc0a-379">Hopp kanske till exempel Internet-routrar.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-379">For example, the hops may be ISP routers.</span></span>

### <a name="log-analytics-search"></a><span data-ttu-id="cfc0a-380">Logganalys Sök</span><span class="sxs-lookup"><span data-stu-id="cfc0a-380">Log Analytics search</span></span>
<span data-ttu-id="cfc0a-381">Alla data som är exponerade grafiskt via Network Performance Monitor-instrumentpanelen och nedåt sidor finns inbyggt i logganalys-sökning.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-381">All data that is exposed graphically through the Network Performance Monitor dashboard and drill-down pages is also available natively in Log Analytics search.</span></span> <span data-ttu-id="cfc0a-382">Du kan fråga efter data med hjälp av frågespråket Sök och skapa anpassade rapporter genom att exportera data till Excel eller PowerBI.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-382">You can query the data using the search query language and create custom reports by exporting the data to Excel or PowerBI.</span></span> <span data-ttu-id="cfc0a-383">Den **vanliga frågor** bladet på instrumentpanelen har vissa användbara frågor som du kan använda som utgångspunkt för att skapa egna frågor och rapporter.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-383">The **Common Queries** blade in the dashboard has some useful queries that you can use as the starting point for creating your own queries and reports.</span></span>

![sökfrågor](./media/log-analytics-network-performance-monitor/npm-queries.png)

## <a name="investigate-the-root-cause-of-a-health-alert"></a><span data-ttu-id="cfc0a-385">Undersök orsaken till en avisering om hälsa</span><span class="sxs-lookup"><span data-stu-id="cfc0a-385">Investigate the root cause of a health alert</span></span>
<span data-ttu-id="cfc0a-386">Nu när du har läst om Network Performance Monitor vi titta på en enkel undersökning grundorsaken till en hälsohändelse.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-386">Now that you've read about Network Performance Monitor, let's look at a simple investigation into the root-cause for a health event.</span></span>

1. <span data-ttu-id="cfc0a-387">På sidan Översikt över får du en ögonblicksbild av hälsotillståndet för ditt nätverk genom att följa den **Network Performance Monitor** panelen.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-387">On the Overview page, you'll get a quick snapshot of the health of your network by observing the **Network Performance Monitor** tile.</span></span> <span data-ttu-id="cfc0a-388">Observera att utanför 6 undernätverk länkar som övervakas, 2 är felfria.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-388">Notice that out of the 6 subnetworks links being monitored, 2 are unhealthy.</span></span> <span data-ttu-id="cfc0a-389">Detta garanterar undersökning.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-389">This warrants investigation.</span></span> <span data-ttu-id="cfc0a-390">Klicka på panelen om du vill visa instrumentpanelen för lösningen.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-390">Click the tile to view the solution dashboard.</span></span>  
   <span data-ttu-id="cfc0a-391">![Prestandaövervakaren nätverksikon](./media/log-analytics-network-performance-monitor/npm-investigation01.png)</span><span class="sxs-lookup"><span data-stu-id="cfc0a-391">![Network Performance Monitor tile](./media/log-analytics-network-performance-monitor/npm-investigation01.png)</span></span>
2. <span data-ttu-id="cfc0a-392">I exemplet bilden nedan märker du att det finns en hälsohändelse som en nätverkslänk som är i feltillstånd.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-392">In the example image below, you'll notice that there is a health event a network link that is unhealthy.</span></span> <span data-ttu-id="cfc0a-393">Du vill undersöka problemet och klicka på den **DMZ2 DMZ1** nätverkslänken ta reda på roten till problemet.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-393">You decide to investigate the issue and click on the **DMZ2-DMZ1** network link to find out the root of the problem.</span></span>  
   <span data-ttu-id="cfc0a-394">![exempel ohälsosamt nätverk](./media/log-analytics-network-performance-monitor/npm-investigation02.png)</span><span class="sxs-lookup"><span data-stu-id="cfc0a-394">![unhealthy network link example](./media/log-analytics-network-performance-monitor/npm-investigation02.png)</span></span>
3. <span data-ttu-id="cfc0a-395">Sidan nedåt visar alla undernätverkslänkar i **DMZ2 DMZ1** nätverkslänken.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-395">The drill-down page shows all the subnetwork links in **DMZ2-DMZ1** network link.</span></span> <span data-ttu-id="cfc0a-396">Lägg märke till att svarstiden för både undernätverkslänkar har passerat tröskelvärdet för att göra nätverkslänken feltillstånd.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-396">You'll notice that for both the subnetwork links, the latency has crossed the threshold making the network link unhealthy.</span></span> <span data-ttu-id="cfc0a-397">Du kan också se trenderna svarstid för både undernätverkslänkar.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-397">You can also see the latency trends of both the subnetwork links.</span></span> <span data-ttu-id="cfc0a-398">Du kan använda valet av tid kontroll i diagrammet för att fokusera på tidsintervallet som krävs.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-398">You can use the time selection control in the graph to focus on the required time range.</span></span> <span data-ttu-id="cfc0a-399">Du kan se tid på dagen när latens har nått sin belastning.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-399">You can see the time of the day when latency has reached its peak.</span></span> <span data-ttu-id="cfc0a-400">Senare kan du söka efter denna tidsperiod att undersöka problemet.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-400">You can later search the logs for this time period to investigate the issue.</span></span> <span data-ttu-id="cfc0a-401">Klicka på **visa nodlänkar** till nedåt ytterligare.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-401">Click **View node links** to drill-down further.</span></span>  
   <span data-ttu-id="cfc0a-402">![feltillstånd undernät länkar exempel](./media/log-analytics-network-performance-monitor/npm-investigation03.png)</span><span class="sxs-lookup"><span data-stu-id="cfc0a-402">![unhealthy subnet links example](./media/log-analytics-network-performance-monitor/npm-investigation03.png)</span></span>
4. <span data-ttu-id="cfc0a-403">Liknar föregående sida, nedåt sidan för viss undernätverk länken visar ned dess ingående nodlänkar.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-403">Similar to the previous page, the drill-down page for the particular subnetwork link lists down its constituent node links.</span></span> <span data-ttu-id="cfc0a-404">Du kan utföra samma åtgärder som du gjorde i föregående steg.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-404">You can perform similar actions  here as you did in the previous step.</span></span> <span data-ttu-id="cfc0a-405">Klicka på **visa topologi** att visa topologi mellan 2 noderna.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-405">Click **View topology** to view the topology between the 2 nodes.</span></span>  
   <span data-ttu-id="cfc0a-406">![felaktiga noden länkar exempel](./media/log-analytics-network-performance-monitor/npm-investigation04.png)</span><span class="sxs-lookup"><span data-stu-id="cfc0a-406">![unhealthy node links example](./media/log-analytics-network-performance-monitor/npm-investigation04.png)</span></span>
5. <span data-ttu-id="cfc0a-407">Alla sökvägar mellan noderna 2 ritas i topologisk karta.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-407">All the paths between the 2 selected nodes are plotted in the topology map.</span></span> <span data-ttu-id="cfc0a-408">Du kan visualisera hopp av hopp topologin av routinginformation mellan två noder i topologisk karta.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-408">You can visualize the hop-by-hop topology of routes between two nodes on the topology map.</span></span> <span data-ttu-id="cfc0a-409">Den ger dig en tydlig bild av hur många vägar finns mellan två noder och vad sökvägar datapaketen tar.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-409">It gives you a clear picture of how many routes exist between the two nodes and what paths the data packets are taking.</span></span> <span data-ttu-id="cfc0a-410">Flaskhalsar i nätverket markeras med röd färg.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-410">Network performance bottlenecks are marked in red color.</span></span> <span data-ttu-id="cfc0a-411">Du kan hitta en felaktig nätverksanslutning eller en felaktig nätverksenhet genom att titta på red färgade elementen på topologisk karta.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-411">You can locate a faulty network connection or a faulty network device by looking at red colored elements on the topology map.</span></span>  
   ![exemplet ohälsosamt topologi](./media/log-analytics-network-performance-monitor/npm-investigation05.png)
6. <span data-ttu-id="cfc0a-413">Förlust, svarstid och antal hopp i varje sökväg kan ses i den **åtgärd** fönstret.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-413">The loss, latency, and the number of hops in each path can be reviewed in the **Action** pane.</span></span> <span data-ttu-id="cfc0a-414">Använd rullningslisten för att visa information om dessa ohälsosamt sökvägar.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-414">Use the scrollbar to view the details of those unhealthy paths.</span></span>  <span data-ttu-id="cfc0a-415">Använd filter för att välja sökvägar med feltillstånd hopp så att topologin för bara de valda sökvägarna ritas.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-415">Use the filters to select the paths with the unhealthy hop so that the topology for only the selected paths is plotted.</span></span> <span data-ttu-id="cfc0a-416">Du kan använda mushjulet för att zooma in eller ut topologisk karta.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-416">You can use your mouse wheel to zoom in or out of the topology map.</span></span>

   <span data-ttu-id="cfc0a-417">I den under bilden visas tydligt orsaken till problemområden till specifika avsnitt i nätverket genom att titta på sökvägar och hopp med röd färg.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-417">In the below image you can clearly see the root-cause of the problem areas to the specific section of the network by looking at the paths and hops in red color.</span></span> <span data-ttu-id="cfc0a-418">Klicka på en nod i topologisk karta visar egenskaperna för den noden, inklusive det fullständiga Domännamnet och IP-adress.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-418">Clicking on a node in the topology map reveals the properties of the node, including the FQDN, and IP address.</span></span> <span data-ttu-id="cfc0a-419">IP-adress för hopp visas när du klickar på ett hopp.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-419">Clicking on a hop shows the IP address of the hop.</span></span>  
   ![feltillstånd topologi - sökvägen information exempel](./media/log-analytics-network-performance-monitor/npm-investigation06.png)

## <a name="provide-feedback"></a><span data-ttu-id="cfc0a-421">Ge feedback</span><span class="sxs-lookup"><span data-stu-id="cfc0a-421">Provide feedback</span></span>

- <span data-ttu-id="cfc0a-422">**UserVoice** -du kan publicera dina idéer för Network Performance Monitor-funktioner som du vill att vi ska arbeta med.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-422">**UserVoice** - You can post your ideas for Network Performance Monitor features that you want us to work on.</span></span> <span data-ttu-id="cfc0a-423">Besök vår [UserVoice sidan](https://feedback.azure.com/forums/267889-log-analytics/category/188146-network-monitoring).</span><span class="sxs-lookup"><span data-stu-id="cfc0a-423">Visit our [UserVoice page](https://feedback.azure.com/forums/267889-log-analytics/category/188146-network-monitoring).</span></span>
- <span data-ttu-id="cfc0a-424">**Ansluta till vår kommittén** -vi alltid är intresserad av att nya kunder ansluta till vår kommittén.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-424">**Join our cohort** - We’re always interested in having new customers join our cohort.</span></span> <span data-ttu-id="cfc0a-425">Som en del av det kan du få en förhandsåtkomst till nya funktioner och hjälp oss att förbättra Network Performance Monitor.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-425">As part of it, you'll get early access to new features and help us improve Network Performance Monitor.</span></span> <span data-ttu-id="cfc0a-426">Om du är intresserad av att koppla kan fylla i det här [snabb undersökning](https://aka.ms/npmcohort).</span><span class="sxs-lookup"><span data-stu-id="cfc0a-426">If you're interested in joining, fill-out this [quick survey](https://aka.ms/npmcohort).</span></span>

## <a name="next-steps"></a><span data-ttu-id="cfc0a-427">Nästa steg</span><span class="sxs-lookup"><span data-stu-id="cfc0a-427">Next steps</span></span>
* <span data-ttu-id="cfc0a-428">[Söka i loggar](log-analytics-log-searches.md) att visa detaljerad nätverket prestanda dataposter.</span><span class="sxs-lookup"><span data-stu-id="cfc0a-428">[Search logs](log-analytics-log-searches.md) to view detailed network performance data records.</span></span>

---
title: "Tjänstkarta – en demo du går igenom i egen takt | Microsoft Docs"
description: "Tjänstkarta är en lösning i Operations Management Suite (OMS) och som automatiskt identifierar programkomponenter i Windows- och Linux-system och mappar kommunikationen mellan olika tjänster.  Det här är en demo du går igenom i egen takt där Tjänstkarta används till att identifiera och diagnostisera ett simulerat problem i en webbapp."
services: operations-management-suite
documentationcenter: 
author: bwren
manager: carmonm
editor: tysonn
ms.assetid: 9dc437b9-e83c-45da-917c-cb4f4d8d6333
ms.service: operations-management-suite
ms.devlang: na
ms.topic: get-started-article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 04/12/2017
ms.author: bwren
ms.openlocfilehash: c3548d24c74f8ad865b22d6af3490d0b5cc77a84
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: sv-SE
ms.lasthandoff: 07/11/2017
---
# <a name="operations-management-suite-oms-self-paced-demo---service-map"></a><span data-ttu-id="28abe-104">En demo för Operations Management Suite (OMS) – Tjänstkarta</span><span class="sxs-lookup"><span data-stu-id="28abe-104">Operations Management Suite (OMS) self paced demo - Service Map</span></span>
<span data-ttu-id="28abe-105">Det här är en demo du går igenom i egen takt där [lösningen Tjänstkarta](operations-management-suite-service-map.md) i Operations Management Suite (OMS) används till att identifiera och diagnostisera ett simulerat problem i en webbapp.</span><span class="sxs-lookup"><span data-stu-id="28abe-105">This is a self paced demo that walks through using the [Service Map solution](operations-management-suite-service-map.md) in Operations Management Suite (OMS) to identify and diagnose a simulated problem in a web application.</span></span>  <span data-ttu-id="28abe-106">Tjänstkarta identifierar automatiskt programkomponenter i Windows- och Linux-system och mappar kommunikationen mellan olika tjänster.</span><span class="sxs-lookup"><span data-stu-id="28abe-106">Service Map automatically discovers application components on Windows and Linux systems and maps the communication between services.</span></span>  <span data-ttu-id="28abe-107">Dessutom sammanställs data som samlas in från andra OMS-tjänster som beslutsstöd när du ska analysera prestanda och identifiera problem.</span><span class="sxs-lookup"><span data-stu-id="28abe-107">It also consolidates data collected by other OMS services to assist you in analyzing performance and identifying issues.</span></span>  <span data-ttu-id="28abe-108">Du använder också [loggsökningar i Log Analytics](../log-analytics/log-analytics-log-searches.md) till att öka detaljnivån på insamlade data så att du kan identifiera rotorsaken till problemet.</span><span class="sxs-lookup"><span data-stu-id="28abe-108">You'll also use [log searches in Log Analytics](../log-analytics/log-analytics-log-searches.md) to drill down on collected data in order to identify the root problem.</span></span>


## <a name="scenario-description"></a><span data-ttu-id="28abe-109">Scenariobeskrivning</span><span class="sxs-lookup"><span data-stu-id="28abe-109">Scenario description</span></span>
<span data-ttu-id="28abe-110">Du har precis fått ett meddelande om att programmet ACME Customer Portal har prestandaproblem.</span><span class="sxs-lookup"><span data-stu-id="28abe-110">You've just received a notification that the ACME Customer Portal application is having performance issues.</span></span>  <span data-ttu-id="28abe-111">Den enda information du har är att problemen startade kring 04.00 PST idag.</span><span class="sxs-lookup"><span data-stu-id="28abe-111">The only information that you have is that these issues started about 4:00 am PST today.</span></span>  <span data-ttu-id="28abe-112">Du är inte helt säker på vilka komponenter som portalen är beroende av förutom en uppsättning webbservrar.</span><span class="sxs-lookup"><span data-stu-id="28abe-112">You aren't entirely sure of all the components that the portal is dependent on other than a set of web servers.</span></span>  

## <a name="components-and-features-used"></a><span data-ttu-id="28abe-113">Komponenter och funktioner som används</span><span class="sxs-lookup"><span data-stu-id="28abe-113">Components and features used</span></span>
- [<span data-ttu-id="28abe-114">Lösningen Tjänstkarta</span><span class="sxs-lookup"><span data-stu-id="28abe-114">Service Map solution</span></span>](operations-management-suite-service-map.md)
- [<span data-ttu-id="28abe-115">Loggsökningar i Log Analytics</span><span class="sxs-lookup"><span data-stu-id="28abe-115">Log Analytics log searches</span></span>](../log-analytics/log-analytics-log-searches.md)


## <a name="walk-through"></a><span data-ttu-id="28abe-116">Genomgång</span><span class="sxs-lookup"><span data-stu-id="28abe-116">Walk through</span></span>

### <a name="1-connect-to-the-oms-experience-center"></a><span data-ttu-id="28abe-117">1. Anslut till OMS Experience Center</span><span class="sxs-lookup"><span data-stu-id="28abe-117">1. Connect to the OMS Experience Center</span></span>
<span data-ttu-id="28abe-118">I den här genomgången används [Operations Management Suite Experience Center](https://experience.mms.microsoft.com/) som innehåller en fullständig OMS-miljö med exempeldata.</span><span class="sxs-lookup"><span data-stu-id="28abe-118">This walk through uses the [Operations Management Suite Experience Center](https://experience.mms.microsoft.com/) which provides a complete OMS environment with sample data.</span></span> <span data-ttu-id="28abe-119">Börja med att följa länken, ange din information och välj sedan scenariot **Insikter och analys**.</span><span class="sxs-lookup"><span data-stu-id="28abe-119">Start by following this link, provide your information and then select the **Insight and Analytics** scenario.</span></span>


### <a name="2-start-service-map"></a><span data-ttu-id="28abe-120">2. Starta Tjänstkarta</span><span class="sxs-lookup"><span data-stu-id="28abe-120">2. Start Service Map</span></span>
<span data-ttu-id="28abe-121">Starta lösningen Tjänstkarta genom att klicka på panelen **Tjänstkarta**.</span><span class="sxs-lookup"><span data-stu-id="28abe-121">Start the Service Map solution by clicking on the **Service Map** tile.</span></span>

![Panelen Tjänstkarta](media/operations-management-suite-walkthrough-servicemap/tile.png)

<span data-ttu-id="28abe-123">Konsolen för Tjänstkarta öppnas.</span><span class="sxs-lookup"><span data-stu-id="28abe-123">The Service Map console is displayed.</span></span>  <span data-ttu-id="28abe-124">I den vänstra rutan visas en lista med datorer i din miljö där Tjänstkarta-agenten är installerad.</span><span class="sxs-lookup"><span data-stu-id="28abe-124">In the left pane is a list of computers in your environment with the Service Map agent installed.</span></span>  <span data-ttu-id="28abe-125">Välj den dator du vill visa i den här listan.</span><span class="sxs-lookup"><span data-stu-id="28abe-125">You'll select the computer that you want to view from this list.</span></span>

![Lista med datorer](media/operations-management-suite-walkthrough-servicemap/computer-list.png)


### <a name="3-view-computer"></a><span data-ttu-id="28abe-127">3. Visa datorn</span><span class="sxs-lookup"><span data-stu-id="28abe-127">3. View computer</span></span>
<span data-ttu-id="28abe-128">Vi vet att webbservrarna heter AcmeWFE001 och AcmeWFE002, så att det ser ut som ett rimligt ställe att börja på.</span><span class="sxs-lookup"><span data-stu-id="28abe-128">We know that the web servers are called AcmeWFE001 and AcmeWFE002, so this seems like a reasonable place to start.</span></span>  <span data-ttu-id="28abe-129">Klicka på **AcmeWFE001**.</span><span class="sxs-lookup"><span data-stu-id="28abe-129">Click on **AcmeWFE001**.</span></span>  <span data-ttu-id="28abe-130">Då visas kartan för AcmeWFE001 och alla dess beroenden.</span><span class="sxs-lookup"><span data-stu-id="28abe-130">This displays the map for AcmeWFE001 and all of its dependencies.</span></span>  <span data-ttu-id="28abe-131">Du kan se vilka processer som körs på den valda datorn och vilka externa tjänster de kommunicerar med.</span><span class="sxs-lookup"><span data-stu-id="28abe-131">You can see which processes are running on the selected computer and which external services they communicate with.</span></span>

![Webbserver](media/operations-management-suite-walkthrough-servicemap/web-server.png)

<span data-ttu-id="28abe-133">Vi är bekymrade över prestandan hos våra webbappar, så klicka på processen **AcmeAppPool (IIS-appool)**.</span><span class="sxs-lookup"><span data-stu-id="28abe-133">We're concerned about the performance of our web application so click on the **AcmeAppPool (IIS App Pool)** process.</span></span>  <span data-ttu-id="28abe-134">Då visas information om processen och dess beroenden framhävs.</span><span class="sxs-lookup"><span data-stu-id="28abe-134">This displays the details for this process and highlights its dependencies.</span></span>  

![Programpool](media/operations-management-suite-walkthrough-servicemap/app-pool.png)


### <a name="4-change-time-window"></a><span data-ttu-id="28abe-136">4. Ändra tidsfönstret</span><span class="sxs-lookup"><span data-stu-id="28abe-136">4. Change time window</span></span>

<span data-ttu-id="28abe-137">Vi fick veta att problemen började kring 04.00, så vi tar en titt på vad som hände då.</span><span class="sxs-lookup"><span data-stu-id="28abe-137">We heard that the problem started at 4:00 AM so let's have a look at what was happening at that time.</span></span> <span data-ttu-id="28abe-138">Klicka på **Tidsintervall** och ändra tiden till 04.00 PST (behåll aktuellt datum och anpassa tiden till din lokala tidszon) och använd varaktigheten 20 minuter.</span><span class="sxs-lookup"><span data-stu-id="28abe-138">Click on **Time Range** and change the time to 4:00 AM PST (keep the current date and adjust for your local time zone) with a duration of 20 minutes.</span></span>

![Tidväljaren](./media/operations-management-suite-walkthrough-servicemap/time-picker.png)


### <a name="5-view-alert"></a><span data-ttu-id="28abe-140">5. Visa aviseringar</span><span class="sxs-lookup"><span data-stu-id="28abe-140">5. View alert</span></span>

<span data-ttu-id="28abe-141">Vi ser nu att det finns en avisering för beroende **acmetomcat**, så det här kan vara orsaken till vårt problem.</span><span class="sxs-lookup"><span data-stu-id="28abe-141">We now see that the **acmetomcat** dependency has an alert displayed, so that's our potential problem.</span></span>  <span data-ttu-id="28abe-142">Klicka på aviseringsikonen i **acmetomcat** så att du ser detaljerna om aviseringen.</span><span class="sxs-lookup"><span data-stu-id="28abe-142">Click on the alert icon in **acmetomcat** to show the details for the alert.</span></span>  <span data-ttu-id="28abe-143">Vi kan se att processoranvändningen var kritiskt hög och kan expandera den här informationen.</span><span class="sxs-lookup"><span data-stu-id="28abe-143">We can see that we have critical CPU utilization and can expand it for more detail.</span></span>  <span data-ttu-id="28abe-144">Det här har förmodligen orsakat våra prestandaproblem.</span><span class="sxs-lookup"><span data-stu-id="28abe-144">This is probably what's causing our slow performance.</span></span> 

![Varning](./media/operations-management-suite-walkthrough-servicemap/alert.png)


### <a name="6-view-performance"></a><span data-ttu-id="28abe-146">6. Visa prestanda</span><span class="sxs-lookup"><span data-stu-id="28abe-146">6. View performance</span></span>

<span data-ttu-id="28abe-147">Låt oss titta närmare på **acmetomcat**.</span><span class="sxs-lookup"><span data-stu-id="28abe-147">Let's have a closer look at **acmetomcat**.</span></span>  <span data-ttu-id="28abe-148">Klicka uppe till höger i **acmetomcat** och välj **Läs in servermappning** så att du kan se detaljerad information och beroenden för den här datorn.</span><span class="sxs-lookup"><span data-stu-id="28abe-148">Click in the top right of **acmetomcat** and select **Load Server Map** to show the detail and dependencies for this machine.</span></span> <span data-ttu-id="28abe-149">Vi kan sedan titta lite närmare på de här prestandaräknarna och verifiera vår misstanke.</span><span class="sxs-lookup"><span data-stu-id="28abe-149">We can then look a bit more into those performance counters to verify our suspicion.</span></span>  <span data-ttu-id="28abe-150">Välj fliken **Prestanda** där du kan se de [prestandaräknare som samlats in av Log Analytics](../log-analytics/log-analytics-data-sources-performance-counters.md) under tidsintervallet.</span><span class="sxs-lookup"><span data-stu-id="28abe-150">Select the **Performance** tab to display the [performance counters collected by Log Analytics](../log-analytics/log-analytics-data-sources-performance-counters.md) over the time range.</span></span>  <span data-ttu-id="28abe-151">Vi kan se att det förekommer periodiska toppar för processor- och minnesanvändningen.</span><span class="sxs-lookup"><span data-stu-id="28abe-151">We can see that we're getting periodic spikes in the processor and memory.</span></span>

![Prestanda](./media/operations-management-suite-walkthrough-servicemap/performance.png)


### <a name="7-view-change-tracking"></a><span data-ttu-id="28abe-153">7. Visa spårning av ändringar</span><span class="sxs-lookup"><span data-stu-id="28abe-153">7. View change tracking</span></span>
<span data-ttu-id="28abe-154">Nu ska vi se om vi kan ta reda på vad som har orsakat den här höga användningsnivån.</span><span class="sxs-lookup"><span data-stu-id="28abe-154">Let's see if we can find out what might have caused this high utilization.</span></span>  <span data-ttu-id="28abe-155">Klicka på fliken **Sammanfattning**.</span><span class="sxs-lookup"><span data-stu-id="28abe-155">Click on the **Summary** tab.</span></span>  <span data-ttu-id="28abe-156">Här ser vi information som OMS har samlat in från datorn, som misslyckade anslutningar, kritiska aviseringar och ändringar i programvaran.</span><span class="sxs-lookup"><span data-stu-id="28abe-156">This provides information that OMS has collected from the computer such as failed connections, critical alerts, and software changes.</span></span>  <span data-ttu-id="28abe-157">Du bör alltid expandera avsnitt med intressant och aktuell information, och du kan expandera andra avsnitt om du vill kontrollera informationen i dem.</span><span class="sxs-lookup"><span data-stu-id="28abe-157">Sections with interesting recent information should already be expanded, and you can expand other sections to inspect information that they contain.</span></span>


<span data-ttu-id="28abe-158">Om **Spårning av ändringar** inte redan är öppet expanderar du det här avsnittet.</span><span class="sxs-lookup"><span data-stu-id="28abe-158">If **Change Tracking** isn't already open, then expand it.</span></span>  <span data-ttu-id="28abe-159">Här visas information som samlats in av [lösningen Spårning av ändringar](../log-analytics/log-analytics-change-tracking.md).</span><span class="sxs-lookup"><span data-stu-id="28abe-159">This shows information collected by the [Change Tracking solution](../log-analytics/log-analytics-change-tracking.md).</span></span>  <span data-ttu-id="28abe-160">Det verkar som om att en ändring i programvaran har utförts under den här tidsperioden.</span><span class="sxs-lookup"><span data-stu-id="28abe-160">It looks like there was a software change made during this time window.</span></span>  <span data-ttu-id="28abe-161">Visa mer information genom att klicka på **Programvara**.</span><span class="sxs-lookup"><span data-stu-id="28abe-161">Click on **Software** to get details.</span></span>  <span data-ttu-id="28abe-162">En säkerhetskopiering lades till i datorn precis efter 04.00, så det här verkar vara orsaken till att så mycket resurser har används.</span><span class="sxs-lookup"><span data-stu-id="28abe-162">A backup process was added to the machine just after 4:00 AM, so this appears to be the culprit for the excessive resources being consumed.</span></span>

![Spårning av ändringar](./media/operations-management-suite-walkthrough-servicemap/change-tracking.png)



### <a name="8-view-details-in-log-search"></a><span data-ttu-id="28abe-164">8. Visa information i loggsökningar</span><span class="sxs-lookup"><span data-stu-id="28abe-164">8. View details in Log Search</span></span>
<span data-ttu-id="28abe-165">Vi kan kontrollera det här noggrannare genom att granska den detaljerade prestandainformationen i Log Analytics-databasen.</span><span class="sxs-lookup"><span data-stu-id="28abe-165">We can further verify this by looking at the detailed performance information collected in the Log Analytics repository.</span></span>  <span data-ttu-id="28abe-166">Klicka på fliken **Aviseringar** igen och klicka sedan på någon av aviseringarna om **hög CPU-användning**.</span><span class="sxs-lookup"><span data-stu-id="28abe-166">Click on the **Alerts** tab again and then on one of the **High CPU** alerts.</span></span>  <span data-ttu-id="28abe-167">Klicka på **Visa i loggsökning**.</span><span class="sxs-lookup"><span data-stu-id="28abe-167">Click on  **Show in Log Search**.</span></span>  <span data-ttu-id="28abe-168">Då öppnas fönstret Loggsökning där du kan göra [loggsökningar](../log-analytics/log-analytics-log-searches.md) mot data som lagras i databasen.</span><span class="sxs-lookup"><span data-stu-id="28abe-168">This opens the Log Search window where you can perform [log searches](../log-analytics/log-analytics-log-searches.md) against any data stored in the repository.</span></span>  <span data-ttu-id="28abe-169">Tjänstmappning har redan fyllt i en fråga så att vi kan hämta de aviseringar vi är intresserade av.</span><span class="sxs-lookup"><span data-stu-id="28abe-169">Service Map already filled in a queriy for us to retrieve the alert we're interested in.</span></span>  

![Loggsökning](./media/operations-management-suite-walkthrough-servicemap/log-search.png)


### <a name="9-open-saved-search"></a><span data-ttu-id="28abe-171">9. Öppna sparad sökning</span><span class="sxs-lookup"><span data-stu-id="28abe-171">9. Open saved search</span></span>
<span data-ttu-id="28abe-172">Låt oss se om vi kan hämta mer information om prestandasamlingen som genererade aviseringen och kontrollera vår misstanke om att problemen beror på säkerhetskopieringen.</span><span class="sxs-lookup"><span data-stu-id="28abe-172">Let's see if we can get some more detail on the performance collection that generated this alert and verify our suspicion that the problems are being caused by that backup process.</span></span>  <span data-ttu-id="28abe-173">Ändra tidsintervallet till **6 timmar**.</span><span class="sxs-lookup"><span data-stu-id="28abe-173">Change the time range to **6 hours**.</span></span>  <span data-ttu-id="28abe-174">Klicka sedan på **Favoriter** och rulla ned till de sparade sökningarna för **Tjänstkarta**.</span><span class="sxs-lookup"><span data-stu-id="28abe-174">Then click on **Favorites** and scroll down to the saved searches for **Service Map**.</span></span>  <span data-ttu-id="28abe-175">Det här är frågor som vi har skapat särskilt för den här analysen.</span><span class="sxs-lookup"><span data-stu-id="28abe-175">These are queries that we created specifically for this analysis.</span></span>  <span data-ttu-id="28abe-176">Klicka på **Top 5 Processes by CPU for acmetomcat** (De 5 processer som har högst processoranvändning för acmetomcat).</span><span class="sxs-lookup"><span data-stu-id="28abe-176">Click on **Top 5 Processes by CPU for acmetomcat**.</span></span>

![Sparad sökning](./media/operations-management-suite-walkthrough-servicemap/saved-search.png)


<span data-ttu-id="28abe-178">Den här frågan returnerar en lista med de 5 processer som förbrukar mest processorkraft på **acmetomcat**.</span><span class="sxs-lookup"><span data-stu-id="28abe-178">This query returns a list of the top 5 processes consuming processor on **acmetomcat**.</span></span>  <span data-ttu-id="28abe-179">Du kan granska frågan om du vill se ett exempel på det frågespråk som används för loggsökningar.</span><span class="sxs-lookup"><span data-stu-id="28abe-179">You can inspect the query to get an introduction to the query language used for log searches.</span></span>  <span data-ttu-id="28abe-180">Om du är intresserad av processerna på andra datorer kan du ändra frågan och hämta den informationen.</span><span class="sxs-lookup"><span data-stu-id="28abe-180">If you were interested in the processes on other computers, you could modify the query to retrieve that information.</span></span>

<span data-ttu-id="28abe-181">I det här fallet kan vi se att säkerhetskopieringen konstant förbrukar ungefär 60 % av programserverns processorkraft.</span><span class="sxs-lookup"><span data-stu-id="28abe-181">In this case, we can see that the backup process is consistently consuming about 60% of the app server’s CPU.</span></span>  <span data-ttu-id="28abe-182">Det är ganska uppenbart att den här nya processen orsakar våra prestandaproblem.</span><span class="sxs-lookup"><span data-stu-id="28abe-182">It's pretty obvious that this new process is responsible for our performance problem.</span></span>  <span data-ttu-id="28abe-183">Lösningen är naturligtvis att flytta den här nya säkerhetskopieringen från programservern.</span><span class="sxs-lookup"><span data-stu-id="28abe-183">Our solution would obviously be to remove this new backup software off the application server.</span></span>  <span data-ttu-id="28abe-184">Vi kan faktiskt använda DSC (Desired State Configuration) som hanteras av Azure Automation till att definiera principer som ser till att den här processen aldrig körs på de här kritiska systemen.</span><span class="sxs-lookup"><span data-stu-id="28abe-184">We could actually leverage Desired State Configuration (DSC) managed by Azure Automation to define policies that ensure this process never runs on these critical systems.</span></span>


## <a name="summary-points"></a><span data-ttu-id="28abe-185">Sammanfattning</span><span class="sxs-lookup"><span data-stu-id="28abe-185">Summary points</span></span>
- <span data-ttu-id="28abe-186">Med [Tjänstkarta](operations-management-suite-service-map.md) får du en överblick över hela programmet även om du inte känner till alla servrar och beroenden.</span><span class="sxs-lookup"><span data-stu-id="28abe-186">[Service Map](operations-management-suite-service-map.md) provides you with a view of your entire application even if you don't know all of its servers and dependencies.</span></span>
- <span data-ttu-id="28abe-187">I Tjänstkarta ser du data som samlats in av andra OMS-lösningar så att du kan identifiera problem med program och den underliggande infrastrukturen.</span><span class="sxs-lookup"><span data-stu-id="28abe-187">Service Map surfaces data collected by other OMS solutions to help you identify issues with your application and its underlying infrastructure.</span></span>
- <span data-ttu-id="28abe-188">Med [loggsökningar](../log-analytics/log-analytics-log-searches.md) kan du öka detaljnivån för specifika data som samlats in i Log Analytics-databasen.</span><span class="sxs-lookup"><span data-stu-id="28abe-188">[Log searches](../log-analytics/log-analytics-log-searches.md) allow you to drill down into specific data collected in the Log Analytics repository.</span></span>    

## <a name="next-steps"></a><span data-ttu-id="28abe-189">Nästa steg</span><span class="sxs-lookup"><span data-stu-id="28abe-189">Next steps</span></span>
- <span data-ttu-id="28abe-190">Läs mer om [Tjänstkarta](operations-management-suite-service-map.md).</span><span class="sxs-lookup"><span data-stu-id="28abe-190">Learn more about [Service Map](operations-management-suite-service-map.md).</span></span>
- <span data-ttu-id="28abe-191">[Distribuera och konfigurera](operations-management-suite-service-map-configure.md) Tjänstkarta.</span><span class="sxs-lookup"><span data-stu-id="28abe-191">[Deploy and configure](operations-management-suite-service-map-configure.md) Service Map.</span></span>
- <span data-ttu-id="28abe-192">Läs mer om [Log Analytics](../log-analytics/log-analytics-overview.md) som krävs för Tjänstkarta och som lagrar driftdata från agenter.</span><span class="sxs-lookup"><span data-stu-id="28abe-192">Learn about [Log Analytics](../log-analytics/log-analytics-overview.md) which is required for Service Map and stores operational data stored by agents.</span></span>
---
title: "aaaProgramming guide för Händelsehubbar i Azure | Microsoft Docs"
description: "Skriva kod för Händelsehubbar i Azure med hjälp av hello Azure .NET SDK."
services: event-hubs
documentationcenter: na
author: sethmanheim
manager: timlt
editor: 
ms.assetid: 64cbfd3d-4a0e-4455-a90a-7f3d4f080323
ms.service: event-hubs
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: tbd
ms.date: 08/17/2017
ms.author: sethm
ms.openlocfilehash: 43bebd126c2311af9e3daeb52324132b66cf0884
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: sv-SE
ms.lasthandoff: 10/06/2017
---
# <a name="event-hubs-programming-guide"></a><span data-ttu-id="f15cd-103">Programmeringsguide för händelsehubbar</span><span class="sxs-lookup"><span data-stu-id="f15cd-103">Event Hubs programming guide</span></span>

<span data-ttu-id="f15cd-104">Den här artikeln beskrivs några vanliga scenarier i att skriva kod med Azure Event Hubs och hello Azure .NET SDK.</span><span class="sxs-lookup"><span data-stu-id="f15cd-104">This article discusses some common scenarios in writing code using Azure Event Hubs and hello Azure .NET SDK.</span></span> <span data-ttu-id="f15cd-105">Den förutsätter att du har en grundläggande förståelse av händelsehubbar.</span><span class="sxs-lookup"><span data-stu-id="f15cd-105">It assumes a preliminary understanding of Event Hubs.</span></span> <span data-ttu-id="f15cd-106">En översikt av Händelsehubbar finns hello [översikt av Händelsehubbar](event-hubs-what-is-event-hubs.md).</span><span class="sxs-lookup"><span data-stu-id="f15cd-106">For a conceptual overview of Event Hubs, see hello [Event Hubs overview](event-hubs-what-is-event-hubs.md).</span></span>

## <a name="event-publishers"></a><span data-ttu-id="f15cd-107">Händelseutfärdare</span><span class="sxs-lookup"><span data-stu-id="f15cd-107">Event publishers</span></span>

<span data-ttu-id="f15cd-108">Du skickar händelser tooan händelsehubb antingen med HTTP POST eller via en AMQP 1.0-anslutning.</span><span class="sxs-lookup"><span data-stu-id="f15cd-108">You send events tooan event hub either using HTTP POST or via an AMQP 1.0 connection.</span></span> <span data-ttu-id="f15cd-109">Hej valet av vilken toouse och när beror på hello specifika scenario du står inför.</span><span class="sxs-lookup"><span data-stu-id="f15cd-109">hello choice of which toouse and when depends on hello specific scenario being addressed.</span></span> <span data-ttu-id="f15cd-110">AMQP 1.0-anslutningar är avgiftsbelagda som asynkrona anslutningar i Service Bus och är mer lämpliga i scenarier med ofta högre meddelandevolymer och lägre svarstidskrav, eftersom de tillhandahåller en permanent meddelandekanal.</span><span class="sxs-lookup"><span data-stu-id="f15cd-110">AMQP 1.0 connections are metered as brokered connections in Service Bus and are more appropriate in scenarios with frequent higher message volumes and lower latency requirements, as they provide a persistent messaging channel.</span></span>

<span data-ttu-id="f15cd-111">Du skapar och hanterar Händelsehubbar med hello [NamespaceManager][] klass.</span><span class="sxs-lookup"><span data-stu-id="f15cd-111">You create and manage Event Hubs using hello [NamespaceManager][] class.</span></span> <span data-ttu-id="f15cd-112">När du använder hello .NET hanterade API: er, hello primära konstruktioner för att publicera data tooEvent-hubbar är hello [EventHubClient](/dotnet/api/microsoft.servicebus.messaging.eventhubclient) och [EventData][] klasser.</span><span class="sxs-lookup"><span data-stu-id="f15cd-112">When using hello .NET managed APIs, hello primary constructs for publishing data tooEvent Hubs are hello [EventHubClient](/dotnet/api/microsoft.servicebus.messaging.eventhubclient) and [EventData][] classes.</span></span> <span data-ttu-id="f15cd-113">[EventHubClient][] innehåller kommunikationskanalen hello AMQP över vilka händelser skickas toohello händelsehubb.</span><span class="sxs-lookup"><span data-stu-id="f15cd-113">[EventHubClient][] provides hello AMQP communication channel over which events are sent toohello event hub.</span></span> <span data-ttu-id="f15cd-114">Hej [EventData][] klass representerar en händelse och är används toopublish meddelanden tooan händelsehubb.</span><span class="sxs-lookup"><span data-stu-id="f15cd-114">hello [EventData][] class represents an event, and is used toopublish messages tooan event hub.</span></span> <span data-ttu-id="f15cd-115">Den här klassen innehåller hello brödtexten, vissa metadata och rubrikinformation om händelsen hello.</span><span class="sxs-lookup"><span data-stu-id="f15cd-115">This class includes hello body, some metadata, and header information about hello event.</span></span> <span data-ttu-id="f15cd-116">Andra egenskaper läggs toohello [EventData][] när det överförs via en händelsehubb.</span><span class="sxs-lookup"><span data-stu-id="f15cd-116">Other properties are added toohello [EventData][] object as it passes through an event hub.</span></span>

## <a name="get-started"></a><span data-ttu-id="f15cd-117">Kom igång</span><span class="sxs-lookup"><span data-stu-id="f15cd-117">Get started</span></span>

<span data-ttu-id="f15cd-118">hello .NET-klasser som har stöd för Händelsehubbar finns i hello Microsoft.ServiceBus.dll-sammansättningen.</span><span class="sxs-lookup"><span data-stu-id="f15cd-118">hello .NET classes that support Event Hubs are provided in hello Microsoft.ServiceBus.dll assembly.</span></span> <span data-ttu-id="f15cd-119">Hej enklaste sättet tooreference hello Service Bus-API och tooconfigure ditt program med alla hello Service Bus-beroenden är toodownload hello [Service Bus NuGet-paketet](https://www.nuget.org/packages/WindowsAzure.ServiceBus).</span><span class="sxs-lookup"><span data-stu-id="f15cd-119">hello easiest way tooreference hello Service Bus API and tooconfigure your application with all of hello Service Bus dependencies is toodownload hello [Service Bus NuGet package](https://www.nuget.org/packages/WindowsAzure.ServiceBus).</span></span> <span data-ttu-id="f15cd-120">Du kan också använda hello [Pakethanterarkonsolen](http://docs.nuget.org/docs/start-here/using-the-package-manager-console) i Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="f15cd-120">Alternatively, you can use hello [Package Manager Console](http://docs.nuget.org/docs/start-here/using-the-package-manager-console) in Visual Studio.</span></span> <span data-ttu-id="f15cd-121">toodo så utfärda hello följande kommando i hello [Pakethanterarkonsolen](http://docs.nuget.org/docs/start-here/using-the-package-manager-console) fönster:</span><span class="sxs-lookup"><span data-stu-id="f15cd-121">toodo so, issue hello following command in hello [Package Manager Console](http://docs.nuget.org/docs/start-here/using-the-package-manager-console) window:</span></span>

```
Install-Package WindowsAzure.ServiceBus
```

## <a name="create-an-event-hub"></a><span data-ttu-id="f15cd-122">Skapa en händelsehubb</span><span class="sxs-lookup"><span data-stu-id="f15cd-122">Create an event hub</span></span>
<span data-ttu-id="f15cd-123">Du kan använda hello [NamespaceManager][] klassen toocreate Händelsehubbar.</span><span class="sxs-lookup"><span data-stu-id="f15cd-123">You can use hello [NamespaceManager][] class toocreate Event Hubs.</span></span> <span data-ttu-id="f15cd-124">Exempel:</span><span class="sxs-lookup"><span data-stu-id="f15cd-124">For example:</span></span>

```csharp
var manager = new Microsoft.ServiceBus.NamespaceManager("mynamespace.servicebus.windows.net");
var description = manager.CreateEventHub("MyEventHub");
```

<span data-ttu-id="f15cd-125">I de flesta fall bör du använda hello [CreateEventHubIfNotExists][] metoder tooavoid generera fel om hello-tjänsten startas om.</span><span class="sxs-lookup"><span data-stu-id="f15cd-125">In most cases, it is recommended that you use hello [CreateEventHubIfNotExists][] methods tooavoid generating exceptions if hello service restarts.</span></span> <span data-ttu-id="f15cd-126">Exempel:</span><span class="sxs-lookup"><span data-stu-id="f15cd-126">For example:</span></span>

```csharp
var description = manager.CreateEventHubIfNotExists("MyEventHub");
```

<span data-ttu-id="f15cd-127">Alla Händelsehubbar åtgärder för att skapa, inklusive [CreateEventHubIfNotExists][], kräver **hantera** behörigheter på hello namnområde i fråga.</span><span class="sxs-lookup"><span data-stu-id="f15cd-127">All Event Hubs creation operations, including [CreateEventHubIfNotExists][], require **Manage** permissions on hello namespace in question.</span></span> <span data-ttu-id="f15cd-128">Om du vill toolimit hello behörigheter för dina utfärdar- eller konsumentprogram program, kan du undvika dessa Skapa åtgärden anrop i produktionskod när du använder autentiseringsuppgifter med begränsad behörighet.</span><span class="sxs-lookup"><span data-stu-id="f15cd-128">If you want toolimit hello permissions of your publisher or consumer applications, you can avoid these create operation calls in production code when you use credentials with limited permissions.</span></span>

<span data-ttu-id="f15cd-129">Hej [EventHubDescription](/dotnet/api/microsoft.servicebus.messaging.eventhubdescription) klassen innehåller information om en händelsehubb, inklusive hello auktoriseringsregler Kvarhållningsintervall för hello-meddelande, partitions-ID: N, status och sökväg.</span><span class="sxs-lookup"><span data-stu-id="f15cd-129">hello [EventHubDescription](/dotnet/api/microsoft.servicebus.messaging.eventhubdescription) class contains details about an event hub, including hello authorization rules, hello message retention interval, partition IDs, status, and path.</span></span> <span data-ttu-id="f15cd-130">Du kan använda den här klassen tooupdate hello metadata i en händelsehubb.</span><span class="sxs-lookup"><span data-stu-id="f15cd-130">You can use this class tooupdate hello metadata on an event hub.</span></span>

## <a name="create-an-event-hubs-client"></a><span data-ttu-id="f15cd-131">Skapa en händelsehubbklient</span><span class="sxs-lookup"><span data-stu-id="f15cd-131">Create an Event Hubs client</span></span>
<span data-ttu-id="f15cd-132">hello primära klassen för att interagera med Händelsehubbar är [Microsoft.ServiceBus.Messaging.EventHubClient][EventHubClient].</span><span class="sxs-lookup"><span data-stu-id="f15cd-132">hello primary class for interacting with Event Hubs is [Microsoft.ServiceBus.Messaging.EventHubClient][EventHubClient].</span></span> <span data-ttu-id="f15cd-133">Den här klassen innehåller både sändar- och mottagarfunktioner.</span><span class="sxs-lookup"><span data-stu-id="f15cd-133">This class provides both sender and receiver capabilities.</span></span> <span data-ttu-id="f15cd-134">Du kan skapa en instans av den här klassen med hello [skapa](/dotnet/api/microsoft.servicebus.messaging.eventhubclient.create) -metoden, som visas i följande exempel hello.</span><span class="sxs-lookup"><span data-stu-id="f15cd-134">You can instantiate this class using hello [Create](/dotnet/api/microsoft.servicebus.messaging.eventhubclient.create) method, as shown in hello following example.</span></span>

```csharp
var client = EventHubClient.Create(description.Path);
```

<span data-ttu-id="f15cd-135">Den här metoden använder anslutningsinformationen för hello Service Bus i hello App.config-filen i hello `appSettings` avsnitt.</span><span class="sxs-lookup"><span data-stu-id="f15cd-135">This method uses hello Service Bus connection information in hello App.config file, in hello `appSettings` section.</span></span> <span data-ttu-id="f15cd-136">Ett exempel på hello `appSettings` XML används toostore hello Service Bus-anslutningsinformation, hello i dokumentationen för hello [Microsoft.ServiceBus.Messaging.EventHubClient.Create(System.String)](/dotnet/api/microsoft.servicebus.messaging.eventhubclient#Microsoft_ServiceBus_Messaging_EventHubClient_Create_System_String_) metod.</span><span class="sxs-lookup"><span data-stu-id="f15cd-136">For an example of hello `appSettings` XML used toostore hello Service Bus connection information, see hello documentation for hello [Microsoft.ServiceBus.Messaging.EventHubClient.Create(System.String)](/dotnet/api/microsoft.servicebus.messaging.eventhubclient#Microsoft_ServiceBus_Messaging_EventHubClient_Create_System_String_) method.</span></span>

<span data-ttu-id="f15cd-137">Ett annat alternativ är toocreate hello klient från en anslutningssträng.</span><span class="sxs-lookup"><span data-stu-id="f15cd-137">Another option is toocreate hello client from a connection string.</span></span> <span data-ttu-id="f15cd-138">Det här alternativet fungerar bra när du använder arbetsroller i Azure, eftersom du kan lagra hello sträng i hello konfigurationsegenskaperna för arbetaren hello.</span><span class="sxs-lookup"><span data-stu-id="f15cd-138">This option works well when using Azure worker roles, because you can store hello string in hello configuration properties for hello worker.</span></span> <span data-ttu-id="f15cd-139">Exempel:</span><span class="sxs-lookup"><span data-stu-id="f15cd-139">For example:</span></span>

```csharp
EventHubClient.CreateFromConnectionString("your_connection_string");
```

<span data-ttu-id="f15cd-140">hello anslutningssträngen blir i samma format som det visas i hello App.config-filen för föregående metoder för hello hello:</span><span class="sxs-lookup"><span data-stu-id="f15cd-140">hello connection string will be in hello same format as it appears in hello App.config file for hello previous methods:</span></span>

```
Endpoint=sb://[namespace].servicebus.windows.net/;SharedAccessKeyName=RootManageSharedAccessKey;SharedAccessKey=[key]
```

<span data-ttu-id="f15cd-141">Slutligen är det också möjligt toocreate en [EventHubClient][] objekt från en [MessagingFactory](/dotnet/api/microsoft.servicebus.messaging.messagingfactory) instansen, som visas i följande exempel hello.</span><span class="sxs-lookup"><span data-stu-id="f15cd-141">Finally, it is also possible toocreate an [EventHubClient][] object from a [MessagingFactory](/dotnet/api/microsoft.servicebus.messaging.messagingfactory) instance, as shown in hello following example.</span></span>

```csharp
var factory = MessagingFactory.CreateFromConnectionString("your_connection_string");
var client = factory.CreateEventHubClient("MyEventHub");
```

<span data-ttu-id="f15cd-142">Det är viktigt att ytterligare toonote [EventHubClient][] objekt som skapas från en instans av en meddelandefabrik återanvänder hello samma underliggande TCP-anslutningen.</span><span class="sxs-lookup"><span data-stu-id="f15cd-142">It is important toonote that additional [EventHubClient][] objects created from a messaging factory instance will reuse hello same underlying TCP connection.</span></span> <span data-ttu-id="f15cd-143">Därför har de här objekten en gräns för genomflöde på klientsidan.</span><span class="sxs-lookup"><span data-stu-id="f15cd-143">Therefore, these objects have a client-side limit on throughput.</span></span> <span data-ttu-id="f15cd-144">Hej [skapa](/dotnet/api/microsoft.servicebus.messaging.eventhubclient#Microsoft_ServiceBus_Messaging_EventHubClient_Create_System_String_) metoden återanvänder en enda meddelandefabrik.</span><span class="sxs-lookup"><span data-stu-id="f15cd-144">hello [Create](/dotnet/api/microsoft.servicebus.messaging.eventhubclient#Microsoft_ServiceBus_Messaging_EventHubClient_Create_System_String_) method reuses a single messaging factory.</span></span> <span data-ttu-id="f15cd-145">Om du behöver mycket hög genomströmning från en enda avsändare kan du skapa flera meddelandefabriker och ett [EventHubClient][]-objekt från respektive meddelandefabrik.</span><span class="sxs-lookup"><span data-stu-id="f15cd-145">If you need very high throughput from a single sender, then you can create multiple message factories and one [EventHubClient][] object from each messaging factory.</span></span>

## <a name="send-events-tooan-event-hub"></a><span data-ttu-id="f15cd-146">Skicka händelser tooan händelsehubb</span><span class="sxs-lookup"><span data-stu-id="f15cd-146">Send events tooan event hub</span></span>
<span data-ttu-id="f15cd-147">Du skickar händelser tooan händelsehubb genom att skapa en [EventData][] instans och skicka den via hello [skicka](/dotnet/api/microsoft.servicebus.messaging.eventhubclient#Microsoft_ServiceBus_Messaging_EventHubClient_Send_Microsoft_ServiceBus_Messaging_EventData_) metod.</span><span class="sxs-lookup"><span data-stu-id="f15cd-147">You send events tooan event hub by creating an [EventData][] instance and sending it via hello [Send](/dotnet/api/microsoft.servicebus.messaging.eventhubclient#Microsoft_ServiceBus_Messaging_EventHubClient_Send_Microsoft_ServiceBus_Messaging_EventData_) method.</span></span> <span data-ttu-id="f15cd-148">Den här metoden tar en enda [EventData][] parameter i instansen och skickar den synkront tooan händelsehubb.</span><span class="sxs-lookup"><span data-stu-id="f15cd-148">This method takes a single [EventData][] instance parameter and synchronously sends it tooan event hub.</span></span>

## <a name="event-serialization"></a><span data-ttu-id="f15cd-149">Händelseserialisering</span><span class="sxs-lookup"><span data-stu-id="f15cd-149">Event serialization</span></span>
<span data-ttu-id="f15cd-150">Hej [EventData][] klassen har [fyra överbelastade konstruktorer](/dotnet/api/microsoft.servicebus.messaging.eventdata#constructors_) som tar olika parametrar, till exempel ett objekt och serialiserare, en bytematris eller en dataström.</span><span class="sxs-lookup"><span data-stu-id="f15cd-150">hello [EventData][] class has [four overloaded constructors](/dotnet/api/microsoft.servicebus.messaging.eventdata#constructors_) that take a variety of parameters, such as an object and serializer, a byte array, or a stream.</span></span> <span data-ttu-id="f15cd-151">Det är också möjligt tooinstantiate hello [EventData][] klassen och ange hello brödtextströmmen efteråt.</span><span class="sxs-lookup"><span data-stu-id="f15cd-151">It is also possible tooinstantiate hello [EventData][] class and set hello body stream afterwards.</span></span> <span data-ttu-id="f15cd-152">När du använder JSON med [EventData][], kan du använda **Encoding.UTF8.GetBytes()** tooretrieve hello Bytematrisen för en JSON-kodad sträng.</span><span class="sxs-lookup"><span data-stu-id="f15cd-152">When using JSON with [EventData][], you can use **Encoding.UTF8.GetBytes()** tooretrieve hello byte array for a JSON-encoded string.</span></span>

## <a name="partition-key"></a><span data-ttu-id="f15cd-153">Partitionsnyckeln</span><span class="sxs-lookup"><span data-stu-id="f15cd-153">Partition key</span></span>
<span data-ttu-id="f15cd-154">Hej [EventData][] klassen har en [PartitionKey][] egenskap som gör hello avsändaren toospecify ett värde som hashas tooproduce en tilldelning av partitionen.</span><span class="sxs-lookup"><span data-stu-id="f15cd-154">hello [EventData][] class has a [PartitionKey][] property that enables hello sender toospecify a value that is hashed tooproduce a partition assignment.</span></span> <span data-ttu-id="f15cd-155">En partitionsnyckel garanterar att alla hello händelser med samma nyckel skickas hello toohello samma partition i händelsehubben hello.</span><span class="sxs-lookup"><span data-stu-id="f15cd-155">Using a partition key ensures that all hello events with hello same key are sent toohello same partition in hello event hub.</span></span> <span data-ttu-id="f15cd-156">Vanliga partitionsnycklar är användarsession-ID:n och unika avsändar-ID:n.</span><span class="sxs-lookup"><span data-stu-id="f15cd-156">Common partition keys include user session IDs and unique sender IDs.</span></span> <span data-ttu-id="f15cd-157">Hej [PartitionKey][] är valfri och kan anges när du använder hello [Microsoft.ServiceBus.Messaging.EventHubClient.Send(Microsoft.ServiceBus.Messaging.EventData)](/dotnet/api/microsoft.servicebus.messaging.eventhubclient#Microsoft_ServiceBus_Messaging_EventHubClient_Send_Microsoft_ServiceBus_Messaging_EventData_) eller [Microsoft.ServiceBus.Messaging.EventHubClient.SendAsync(Microsoft.ServiceBus.Messaging.EventData)](/dotnet/api/microsoft.servicebus.messaging.eventhubclient#Microsoft_ServiceBus_Messaging_EventHubClient_SendAsync_Microsoft_ServiceBus_Messaging_EventData_) metoder.</span><span class="sxs-lookup"><span data-stu-id="f15cd-157">hello [PartitionKey][] property is optional and can be provided when using hello [Microsoft.ServiceBus.Messaging.EventHubClient.Send(Microsoft.ServiceBus.Messaging.EventData)](/dotnet/api/microsoft.servicebus.messaging.eventhubclient#Microsoft_ServiceBus_Messaging_EventHubClient_Send_Microsoft_ServiceBus_Messaging_EventData_) or [Microsoft.ServiceBus.Messaging.EventHubClient.SendAsync(Microsoft.ServiceBus.Messaging.EventData)](/dotnet/api/microsoft.servicebus.messaging.eventhubclient#Microsoft_ServiceBus_Messaging_EventHubClient_SendAsync_Microsoft_ServiceBus_Messaging_EventData_) methods.</span></span> <span data-ttu-id="f15cd-158">Om du inte anger ett värde för [PartitionKey][], skickas händelser är distribuerade toopartitions med hjälp av en resursallokeringsmodell.</span><span class="sxs-lookup"><span data-stu-id="f15cd-158">If you do not provide a value for [PartitionKey][], sent events are distributed toopartitions using a round-robin model.</span></span>

### <a name="availability-considerations"></a><span data-ttu-id="f15cd-159">Överväganden för tillgänglighet</span><span class="sxs-lookup"><span data-stu-id="f15cd-159">Availability considerations</span></span>

<span data-ttu-id="f15cd-160">Med hjälp av en partitionsnyckel är valfritt och bör du noggrant om huruvida toouse en.</span><span class="sxs-lookup"><span data-stu-id="f15cd-160">Using a partition key is optional, and you should consider carefully whether or not toouse one.</span></span> <span data-ttu-id="f15cd-161">I många fall är med en partitionsnyckel ett bra val om händelsen ordning är viktig.</span><span class="sxs-lookup"><span data-stu-id="f15cd-161">In many cases, using a partition key is a good choice if event ordering is important.</span></span> <span data-ttu-id="f15cd-162">När du använder en partitionsnyckel partitionerna kräver tillgänglighet på en enda nod och driftavbrott med tiden. till exempel när compute-noder omstart och korrigering.</span><span class="sxs-lookup"><span data-stu-id="f15cd-162">When you use a partition key, these partitions require availability on a single node, and outages can occur over time; for example, when compute nodes reboot and patch.</span></span> <span data-ttu-id="f15cd-163">Om du ställer in ett partitions-ID och den aktuella partitionen är tillgänglig av någon anledning, misslyckas därför ett försök tooaccess hello data i den aktuella partitionen.</span><span class="sxs-lookup"><span data-stu-id="f15cd-163">As such, if you set a partition ID and that partition becomes unavailable for some reason, an attempt tooaccess hello data in that partition will fail.</span></span> <span data-ttu-id="f15cd-164">Om hög tillgänglighet är de viktigaste inte ange en partitionsnyckel; i så fall skickas händelser toopartitions med hello resursallokeringsmodell som beskrivs ovan.</span><span class="sxs-lookup"><span data-stu-id="f15cd-164">If high availability is most important, do not specify a partition key; in that case events will be sent toopartitions using hello round-robin model described previously.</span></span> <span data-ttu-id="f15cd-165">I detta scenario upprättar du ett uttryckligt val mellan tillgänglighet (ingen partitions-ID) och konsekvens (fästning händelser tooa partitions-ID).</span><span class="sxs-lookup"><span data-stu-id="f15cd-165">In this scenario, you are making an explicit choice between availability (no partition ID) and consistency (pinning events tooa partition ID).</span></span>

<span data-ttu-id="f15cd-166">Ett annat övervägande hanterar fördröjningar i bearbetning av händelser.</span><span class="sxs-lookup"><span data-stu-id="f15cd-166">Another consideration is handling delays in processing events.</span></span> <span data-ttu-id="f15cd-167">I vissa fall kan det vara bättre toodrop data och försök än tootry och håll dig uppdaterad med bearbetning, vilket kan medföra ytterligare nedströms bearbetning fördröjningar.</span><span class="sxs-lookup"><span data-stu-id="f15cd-167">In some cases it might be better toodrop data and retry than tootry and keep up with processing, which can potentially cause further downstream processing delays.</span></span> <span data-ttu-id="f15cd-168">Till exempel med ett lager ticker är det bättre toowait för fullständig uppdaterade data, men i en levande chatt eller VOIP-scenario i stället har du hello data snabbt, även om den inte är klar.</span><span class="sxs-lookup"><span data-stu-id="f15cd-168">For example, with a stock ticker it's better toowait for complete up-to-date data, but in a live chat or VOIP scenario you'd rather have hello data quickly, even if it isn't complete.</span></span>

<span data-ttu-id="f15cd-169">Den angivna dessa tillgänglighet i dessa scenarier kan du välja något av följande strategier för felhantering hello:</span><span class="sxs-lookup"><span data-stu-id="f15cd-169">Given these availability considerations, in these scenarios you might choose one of hello following error handling strategies:</span></span>

- <span data-ttu-id="f15cd-170">Stoppa (stop läsning från Händelsehubbar förrän saker har åtgärdats)</span><span class="sxs-lookup"><span data-stu-id="f15cd-170">Stop (stop reading from Event Hubs until things are fixed)</span></span>
- <span data-ttu-id="f15cd-171">Släpp (meddelandena inte viktig, släppa dem)</span><span class="sxs-lookup"><span data-stu-id="f15cd-171">Drop (messages aren’t important, drop them)</span></span>
- <span data-ttu-id="f15cd-172">Försök (försök hello meddelanden som du ser passar)</span><span class="sxs-lookup"><span data-stu-id="f15cd-172">Retry (retry hello messages as you see fit)</span></span>
- <span data-ttu-id="f15cd-173">[Obeställbara](../service-bus-messaging/service-bus-dead-letter-queues.md) (Använd en kö eller en annan händelse hubb toodead brev endast hello meddelanden du kunde inte behandla)</span><span class="sxs-lookup"><span data-stu-id="f15cd-173">[Dead letter](../service-bus-messaging/service-bus-dead-letter-queues.md) (use a queue or another event hub toodead letter only hello messages you couldn’t process)</span></span>

<span data-ttu-id="f15cd-174">Mer information och en beskrivning av hur hello avvägningarna mellan tillgänglighet och konsekvens finns [tillgänglighet och konsekvens i Händelsehubbar](event-hubs-availability-and-consistency.md).</span><span class="sxs-lookup"><span data-stu-id="f15cd-174">For more information and a discussion about hello trade-offs between availability and consistency, see [Availability and consistency in Event Hubs](event-hubs-availability-and-consistency.md).</span></span> 

## <a name="batch-event-send-operations"></a><span data-ttu-id="f15cd-175">Åtgärder för att skicka batchhändelser</span><span class="sxs-lookup"><span data-stu-id="f15cd-175">Batch event send operations</span></span>
<span data-ttu-id="f15cd-176">Att skicka händelser i batchar kan öka genomflödet dramatiskt.</span><span class="sxs-lookup"><span data-stu-id="f15cd-176">Sending events in batches can dramatically increase throughput.</span></span> <span data-ttu-id="f15cd-177">Hej [SendBatch](/dotnet/api/microsoft.servicebus.messaging.eventhubclient#Microsoft_ServiceBus_Messaging_EventHubClient_SendBatch_System_Collections_Generic_IEnumerable_Microsoft_ServiceBus_Messaging_EventData__) metoden tar en **IEnumerable** parameter av typen [EventData][] och skickar hello hela batchen som en atomisk åtgärd toohello händelsehubb.</span><span class="sxs-lookup"><span data-stu-id="f15cd-177">hello [SendBatch](/dotnet/api/microsoft.servicebus.messaging.eventhubclient#Microsoft_ServiceBus_Messaging_EventHubClient_SendBatch_System_Collections_Generic_IEnumerable_Microsoft_ServiceBus_Messaging_EventData__) method takes an **IEnumerable** parameter of type [EventData][] and sends hello entire batch as an atomic operation toohello event hub.</span></span>

```csharp
public void SendBatch(IEnumerable<EventData> eventDataList);
```

<span data-ttu-id="f15cd-178">Observera att en enskild batch inte får överstiga hello 256 KB-gränsen för en händelse.</span><span class="sxs-lookup"><span data-stu-id="f15cd-178">Note that a single batch must not exceed hello 256 KB limit of an event.</span></span> <span data-ttu-id="f15cd-179">Dessutom använder varje meddelande i hello batch hello samma utgivaridentitet.</span><span class="sxs-lookup"><span data-stu-id="f15cd-179">Additionally, each message in hello batch uses hello same publisher identity.</span></span> <span data-ttu-id="f15cd-180">Det är hello ansvar hello avsändaren tooensure som hello batchen inte överskrider hello maximala händelsestorleken.</span><span class="sxs-lookup"><span data-stu-id="f15cd-180">It is hello responsibility of hello sender tooensure that hello batch does not exceed hello maximum event size.</span></span> <span data-ttu-id="f15cd-181">Om den gör det genereras ett **Skicka**-felmeddelande för klienten.</span><span class="sxs-lookup"><span data-stu-id="f15cd-181">If it does, a client **Send** error is generated.</span></span>

## <a name="send-asynchronously-and-send-at-scale"></a><span data-ttu-id="f15cd-182">Skicka asynkront och skicka i skala</span><span class="sxs-lookup"><span data-stu-id="f15cd-182">Send asynchronously and send at scale</span></span>
<span data-ttu-id="f15cd-183">Du kan även skicka händelser tooan händelsehubb asynkront.</span><span class="sxs-lookup"><span data-stu-id="f15cd-183">You can also send events tooan event hub asynchronously.</span></span> <span data-ttu-id="f15cd-184">Skicka asynkront kan öka hello hastighet som en klient kan toosend händelser.</span><span class="sxs-lookup"><span data-stu-id="f15cd-184">Sending asynchronously can increase hello rate at which a client is able toosend events.</span></span> <span data-ttu-id="f15cd-185">Båda hello [skicka](/dotnet/api/microsoft.servicebus.messaging.eventhubclient#Microsoft_ServiceBus_Messaging_EventHubClient_Send_Microsoft_ServiceBus_Messaging_EventData_) och [SendBatch](/dotnet/api/microsoft.servicebus.messaging.eventhubclient#Microsoft_ServiceBus_Messaging_EventHubClient_SendBatch_System_Collections_Generic_IEnumerable_Microsoft_ServiceBus_Messaging_EventData__) metoder är tillgängliga i asynkrona versioner som returnerar en [aktivitet](https://msdn.microsoft.com/library/system.threading.tasks.task.aspx) objekt.</span><span class="sxs-lookup"><span data-stu-id="f15cd-185">Both hello [Send](/dotnet/api/microsoft.servicebus.messaging.eventhubclient#Microsoft_ServiceBus_Messaging_EventHubClient_Send_Microsoft_ServiceBus_Messaging_EventData_) and [SendBatch](/dotnet/api/microsoft.servicebus.messaging.eventhubclient#Microsoft_ServiceBus_Messaging_EventHubClient_SendBatch_System_Collections_Generic_IEnumerable_Microsoft_ServiceBus_Messaging_EventData__) methods are available in asynchronous versions that return a [Task](https://msdn.microsoft.com/library/system.threading.tasks.task.aspx) object.</span></span> <span data-ttu-id="f15cd-186">När den här tekniken kan öka genomflödet kan den också göra hello klienthändelser toocontinue toosend även när den begränsas av hello händelsehubbtjänsten och kan resultera i hello klienten råkar ut för fel eller förlorade meddelanden om inte implementeras ordentligt.</span><span class="sxs-lookup"><span data-stu-id="f15cd-186">While this technique can increase throughput, it can also cause hello client toocontinue toosend events even while it is being throttled by hello Event Hubs service and can result in hello client experiencing failures or lost messages if not properly implemented.</span></span> <span data-ttu-id="f15cd-187">Du kan dessutom använda hello [RetryPolicy](/dotnet/api/microsoft.servicebus.messaging.cliententity#Microsoft_ServiceBus_Messaging_ClientEntity_RetryPolicy) hello toocontrol klienten gör klientalternativ egenskap.</span><span class="sxs-lookup"><span data-stu-id="f15cd-187">In addition, you can use hello [RetryPolicy](/dotnet/api/microsoft.servicebus.messaging.cliententity#Microsoft_ServiceBus_Messaging_ClientEntity_RetryPolicy) property on hello client toocontrol client retry options.</span></span>

## <a name="create-a-partition-sender"></a><span data-ttu-id="f15cd-188">Skapa en partitionsavsändare</span><span class="sxs-lookup"><span data-stu-id="f15cd-188">Create a partition sender</span></span>
<span data-ttu-id="f15cd-189">Det vanligaste toosend händelser tooan-händelsehubb utan någon partitionsnyckel, men i vissa fall kanske du toosend händelser direkt tooa angivna partitionen.</span><span class="sxs-lookup"><span data-stu-id="f15cd-189">Although it is most common toosend events tooan event hub without a partition key, in some cases you might want toosend events directly tooa given partition.</span></span> <span data-ttu-id="f15cd-190">Exempel:</span><span class="sxs-lookup"><span data-stu-id="f15cd-190">For example:</span></span>

```csharp
var partitionedSender = client.CreatePartitionedSender(description.PartitionIds[0]);
```

<span data-ttu-id="f15cd-191">[CreatePartitionedSender](/dotnet/api/microsoft.servicebus.messaging.eventhubclient#Microsoft_ServiceBus_Messaging_EventHubClient_CreatePartitionedSender_System_String_) returnerar ett [EventHubSender](/dotnet/api/microsoft.servicebus.messaging.eventhubsender) objekt som du kan använda toopublish händelser tooa specifika händelser hubb partition.</span><span class="sxs-lookup"><span data-stu-id="f15cd-191">[CreatePartitionedSender](/dotnet/api/microsoft.servicebus.messaging.eventhubclient#Microsoft_ServiceBus_Messaging_EventHubClient_CreatePartitionedSender_System_String_) returns an [EventHubSender](/dotnet/api/microsoft.servicebus.messaging.eventhubsender) object that you can use toopublish events tooa specific event hub partition.</span></span>

## <a name="event-consumers"></a><span data-ttu-id="f15cd-192">Händelsekonsumenter</span><span class="sxs-lookup"><span data-stu-id="f15cd-192">Event consumers</span></span>
<span data-ttu-id="f15cd-193">Händelsehubbar har två primära modeller för händelsekonsumtion: direkta mottagare och abstraktioner på högre nivåer som t.ex. [EventProcessorHost][].</span><span class="sxs-lookup"><span data-stu-id="f15cd-193">Event Hubs has two primary models for event consumption: direct receivers and higher-level abstractions, such as [EventProcessorHost][].</span></span> <span data-ttu-id="f15cd-194">Direkta mottagare är ansvariga för sin egen samordning av åtkomst toopartitions inom en konsumentgrupp.</span><span class="sxs-lookup"><span data-stu-id="f15cd-194">Direct receivers are responsible for their own coordination of access toopartitions within a consumer group.</span></span>

### <a name="direct-consumer"></a><span data-ttu-id="f15cd-195">Direktkonsumenten</span><span class="sxs-lookup"><span data-stu-id="f15cd-195">Direct consumer</span></span>
<span data-ttu-id="f15cd-196">hello snabbaste sättet tooread från en partition inom en konsumentgrupp är toouse hello [EventHubReceiver](/dotnet/apie/microsoft.servicebus.messaging.eventhubreceiver) klass.</span><span class="sxs-lookup"><span data-stu-id="f15cd-196">hello most direct way tooread from a partition within a consumer group is toouse hello [EventHubReceiver](/dotnet/apie/microsoft.servicebus.messaging.eventhubreceiver) class.</span></span> <span data-ttu-id="f15cd-197">toocreate en instans av den här klassen måste du använda en instans av hello [EventHubConsumerGroup](/dotnet/api/microsoft.servicebus.messaging.eventhubconsumergroup) klass.</span><span class="sxs-lookup"><span data-stu-id="f15cd-197">toocreate an instance of this class, you must use an instance of hello [EventHubConsumerGroup](/dotnet/api/microsoft.servicebus.messaging.eventhubconsumergroup) class.</span></span> <span data-ttu-id="f15cd-198">I följande exempel hello, måste hello partitions-ID anges när du skapar hello mottagaren för konsumentgruppen hello.</span><span class="sxs-lookup"><span data-stu-id="f15cd-198">In hello following example, hello partition ID must be specified when creating hello receiver for hello consumer group.</span></span>

```csharp
EventHubConsumerGroup group = client.GetDefaultConsumerGroup();
var receiver = group.CreateReceiver(client.GetRuntimeInformation().PartitionIds[0]);
```

<span data-ttu-id="f15cd-199">Hej [CreateReceiver](/dotnet/api/microsoft.servicebus.messaging.eventhubconsumergroup#methods_summary) metod har flera överlagringar som underlättar kontroll över hello läsare som skapas.</span><span class="sxs-lookup"><span data-stu-id="f15cd-199">hello [CreateReceiver](/dotnet/api/microsoft.servicebus.messaging.eventhubconsumergroup#methods_summary) method has several overloads that facilitate control over hello reader being created.</span></span> <span data-ttu-id="f15cd-200">De här metoderna omfattar att ange en offset som en sträng eller en tidsstämpel och hello möjlighet toospecify om tooinclude denna angivna offset i hello returnerade strömma eller starta efter den.</span><span class="sxs-lookup"><span data-stu-id="f15cd-200">These methods include specifying an offset as either a string or timestamp, and hello ability toospecify whether tooinclude this specified offset in hello returned stream, or start after it.</span></span> <span data-ttu-id="f15cd-201">När du har skapat hello mottagaren kan du ta emot händelser på hello returnerade objekt.</span><span class="sxs-lookup"><span data-stu-id="f15cd-201">After you create hello receiver, you can start receiving events on hello returned object.</span></span> <span data-ttu-id="f15cd-202">Hej [Receive](/dotnet/api/microsoft.servicebus.messaging.eventhubreceiver#methods_summary) metod har fyra överlagringar som kontrollen hello får parametrarna för Mottagningsåtgärden, t.ex batchstorlek och väntetid.</span><span class="sxs-lookup"><span data-stu-id="f15cd-202">hello [Receive](/dotnet/api/microsoft.servicebus.messaging.eventhubreceiver#methods_summary) method has four overloads that control hello receive operation parameters, such as batch size and wait time.</span></span> <span data-ttu-id="f15cd-203">Du kan använda hello asynkrona versionerna av dessa metoder tooincrease hello genomflödet av en konsument.</span><span class="sxs-lookup"><span data-stu-id="f15cd-203">You can use hello asynchronous versions of these methods tooincrease hello throughput of a consumer.</span></span> <span data-ttu-id="f15cd-204">Exempel:</span><span class="sxs-lookup"><span data-stu-id="f15cd-204">For example:</span></span>

```csharp
bool receive = true;
string myOffset;
while(receive)
{
    var message = receiver.Receive();
    myOffset = message.Offset;
    string body = Encoding.UTF8.GetString(message.GetBytes());
    Console.WriteLine(String.Format("Received message offset: {0} \nbody: {1}", myOffset, body));
}
```

<span data-ttu-id="f15cd-205">Hello meddelanden tas emot i hello ordning som de skickades toohello händelsehubb med avseende tooa specifik partition.</span><span class="sxs-lookup"><span data-stu-id="f15cd-205">With respect tooa specific partition, hello messages are received in hello order in which they were sent toohello event hub.</span></span> <span data-ttu-id="f15cd-206">hello offset är en sträng token används tooidentify ett meddelande i en partition.</span><span class="sxs-lookup"><span data-stu-id="f15cd-206">hello offset is a string token used tooidentify a message in a partition.</span></span>

<span data-ttu-id="f15cd-207">Observera att en enda partition inom en konsumentgrupp inte samtidigt kan ha fler än fem läsare anslutna vid en viss tidpunkt.</span><span class="sxs-lookup"><span data-stu-id="f15cd-207">Note that a single partition within a consumer group cannot have more than 5 concurrent readers connected at any time.</span></span> <span data-ttu-id="f15cd-208">När läsare ansluts eller kopplas, kan sessionerna förbli aktiva i flera minuter innan hello tjänsten känner av att de har kopplats från.</span><span class="sxs-lookup"><span data-stu-id="f15cd-208">As readers connect or become disconnected, their sessions might stay active for several minutes before hello service recognizes that they have disconnected.</span></span> <span data-ttu-id="f15cd-209">Under den här tiden kan återansluta tooa partition misslyckas.</span><span class="sxs-lookup"><span data-stu-id="f15cd-209">During this time, reconnecting tooa partition may fail.</span></span> <span data-ttu-id="f15cd-210">En komplett exempel för att skriva en direkt mottagare för Händelsehubbar finns hello [Event Hubs Direct Receivers](https://code.msdn.microsoft.com/Event-Hub-Direct-Receivers-13fa95c6) exempel.</span><span class="sxs-lookup"><span data-stu-id="f15cd-210">For a complete example of writing a direct receiver for Event Hubs, see hello [Event Hubs Direct Receivers](https://code.msdn.microsoft.com/Event-Hub-Direct-Receivers-13fa95c6) sample.</span></span>

### <a name="event-processor-host"></a><span data-ttu-id="f15cd-211">Värd för händelsebearbetning</span><span class="sxs-lookup"><span data-stu-id="f15cd-211">Event processor host</span></span>
<span data-ttu-id="f15cd-212">Hej [EventProcessorHost][] klassen bearbetar data från Händelsehubbar.</span><span class="sxs-lookup"><span data-stu-id="f15cd-212">hello [EventProcessorHost][] class processes data from Event Hubs.</span></span> <span data-ttu-id="f15cd-213">När du skapar händelseläsare på hello .NET-plattformen, bör du använda den här implementeringen.</span><span class="sxs-lookup"><span data-stu-id="f15cd-213">You should use this implementation when building event readers on hello .NET platform.</span></span> <span data-ttu-id="f15cd-214">[EventProcessorHost][] ger en trådsäker, flerprocessig, säker körningsmiljö för implementeringar av händelseprocessorer som också ger hantering av kontrollpunkter och hantering av partitionsleasing.</span><span class="sxs-lookup"><span data-stu-id="f15cd-214">[EventProcessorHost][] provides a thread-safe, multi-process, safe runtime environment for event processor implementations that also provides checkpointing and partition lease management.</span></span>

<span data-ttu-id="f15cd-215">toouse hello [EventProcessorHost][] klassen, som du kan implementera [IEventProcessor](/dotnet/api/microsoft.servicebus.messaging.ieventprocessor).</span><span class="sxs-lookup"><span data-stu-id="f15cd-215">toouse hello [EventProcessorHost][] class, you can implement [IEventProcessor](/dotnet/api/microsoft.servicebus.messaging.ieventprocessor).</span></span> <span data-ttu-id="f15cd-216">Det här gränssnittet innehåller tre metoder:</span><span class="sxs-lookup"><span data-stu-id="f15cd-216">This interface contains three methods:</span></span>

* [<span data-ttu-id="f15cd-217">OpenAsync</span><span class="sxs-lookup"><span data-stu-id="f15cd-217">OpenAsync</span></span>](/dotnet/api/microsoft.servicebus.messaging.ieventprocessor#Microsoft_ServiceBus_Messaging_IEventProcessor_OpenAsync_Microsoft_ServiceBus_Messaging_PartitionContext_)
* [<span data-ttu-id="f15cd-218">CloseAsync</span><span class="sxs-lookup"><span data-stu-id="f15cd-218">CloseAsync</span></span>](/dotnet/api/microsoft.servicebus.messaging.ieventprocessor#Microsoft_ServiceBus_Messaging_IEventProcessor_CloseAsync_Microsoft_ServiceBus_Messaging_PartitionContext_Microsoft_ServiceBus_Messaging_CloseReason_)
* [<span data-ttu-id="f15cd-219">ProcessEventsAsync</span><span class="sxs-lookup"><span data-stu-id="f15cd-219">ProcessEventsAsync</span></span>](/dotnet/api/microsoft.servicebus.messaging.ieventprocessor#Microsoft_ServiceBus_Messaging_IEventProcessor_ProcessEventsAsync_Microsoft_ServiceBus_Messaging_PartitionContext_System_Collections_Generic_IEnumerable_Microsoft_ServiceBus_Messaging_EventData__)

<span data-ttu-id="f15cd-220">Skapa en instans av toostart händelsebearbetning, [EventProcessorHost][], tillhandahåller hello lämpliga parametrar för händelsehubben.</span><span class="sxs-lookup"><span data-stu-id="f15cd-220">toostart event processing, instantiate [EventProcessorHost][], providing hello appropriate parameters for your event hub.</span></span> <span data-ttu-id="f15cd-221">Anropa sedan [RegisterEventProcessorAsync](/dotnet/api/microsoft.servicebus.messaging.eventprocessorhost#Microsoft_ServiceBus_Messaging_EventProcessorHost_RegisterEventProcessorAsync__1) tooregister din [IEventProcessor](/dotnet/api/microsoft.servicebus.messaging.ieventprocessor) implementering med hello körning.</span><span class="sxs-lookup"><span data-stu-id="f15cd-221">Then, call [RegisterEventProcessorAsync](/dotnet/api/microsoft.servicebus.messaging.eventprocessorhost#Microsoft_ServiceBus_Messaging_EventProcessorHost_RegisterEventProcessorAsync__1) tooregister your [IEventProcessor](/dotnet/api/microsoft.servicebus.messaging.ieventprocessor) implementation with hello runtime.</span></span> <span data-ttu-id="f15cd-222">Hello-värden försöker nu tooacquire en leasing för varje partition i hello händelsehubb med hjälp av en ”girig” algoritm.</span><span class="sxs-lookup"><span data-stu-id="f15cd-222">At this point, hello host will attempt tooacquire a lease on every partition in hello event hub using a "greedy" algorithm.</span></span> <span data-ttu-id="f15cd-223">De här leasingarna varar en viss tid och måste sedan förnyas.</span><span class="sxs-lookup"><span data-stu-id="f15cd-223">These leases will last for a given timeframe and must then be renewed.</span></span> <span data-ttu-id="f15cd-224">Allteftersom nya noder worker-instanser i det här fallet är online, de placerar den ut leasingreservationer och med tiden skiftar hello belastningen mellan noder som varje försöker tooacquire mer lån.</span><span class="sxs-lookup"><span data-stu-id="f15cd-224">As new nodes, worker instances in this case, come online, they place lease reservations and over time hello load shifts between nodes as each attempts tooacquire more leases.</span></span>

![Värd för händelsebearbetning](./media/event-hubs-programming-guide/IC759863.png)

<span data-ttu-id="f15cd-226">Med tiden etableras ett jämviktsläge.</span><span class="sxs-lookup"><span data-stu-id="f15cd-226">Over time, an equilibrium is established.</span></span> <span data-ttu-id="f15cd-227">Den här dynamiska funktionen gör att processorbaserad autoskalning toobe tillämpas tooconsumers för både skala upp och skala ned.</span><span class="sxs-lookup"><span data-stu-id="f15cd-227">This dynamic capability enables CPU-based autoscaling toobe applied tooconsumers for both scale-up and scale-down.</span></span> <span data-ttu-id="f15cd-228">Eftersom Händelsehubbar inte har ett direkt begrepp om antalet meddelanden, Genomsnittlig CPU-användning är ofta hello bästa mekanism toomeasure tillbaka serverdelen eller konsumenterna skala.</span><span class="sxs-lookup"><span data-stu-id="f15cd-228">Because Event Hubs do not have a direct concept of message counts, average CPU utilization is often hello best mechanism toomeasure back end or consumer scale.</span></span> <span data-ttu-id="f15cd-229">Om utgivare börjar toopublish fler händelser än konsumenterna kan bearbeta, kan hello CPU för konsumenterna vara används toocause Autoskala på worker-instanser.</span><span class="sxs-lookup"><span data-stu-id="f15cd-229">If publishers begin toopublish more events than consumers can process, hello CPU increase on consumers can be used toocause an auto-scale on worker instance count.</span></span>

<span data-ttu-id="f15cd-230">Hej [EventProcessorHost][] klassen implementerar också en mekanism för Azure storage-baserade kontrollpunkter.</span><span class="sxs-lookup"><span data-stu-id="f15cd-230">hello [EventProcessorHost][] class also implements an Azure storage-based checkpointing mechanism.</span></span> <span data-ttu-id="f15cd-231">Den här mekanismen lagrar hello förskjutning på en per partition-basis, så att varje konsument kan fastställa vilka hello senaste kontrollpunkten från hello föregående konsumenten kunde.</span><span class="sxs-lookup"><span data-stu-id="f15cd-231">This mechanism stores hello offset on a per partition basis, so that each consumer can determine what hello last checkpoint from hello previous consumer was.</span></span> <span data-ttu-id="f15cd-232">Eftersom partitioner övergår mellan noder via leasingar är det här är hello synkroniseringsmekanism som gör det lättare att skifta belastningar.</span><span class="sxs-lookup"><span data-stu-id="f15cd-232">As partitions transition between nodes via leases, this is hello synchronization mechanism that facilitates load shifting.</span></span>

## <a name="publisher-revocation"></a><span data-ttu-id="f15cd-233">Återkallande av utgivare</span><span class="sxs-lookup"><span data-stu-id="f15cd-233">Publisher revocation</span></span>
<span data-ttu-id="f15cd-234">Dessutom toohello avancerade funktioner för körning av [EventProcessorHost][], Event Hubs gör att återkalla utgivare i ordning tooblock specifika utgivare från att skicka händelsen tooan händelsehubb.</span><span class="sxs-lookup"><span data-stu-id="f15cd-234">In addition toohello advanced run-time features of [EventProcessorHost][], Event Hubs enables publisher revocation in order tooblock specific publishers from sending event tooan event hub.</span></span> <span data-ttu-id="f15cd-235">Dessa funktioner är särskilt användbart om en utgivartoken har komprometterats eller om en programuppdatering får dem toobehave felaktigt.</span><span class="sxs-lookup"><span data-stu-id="f15cd-235">These features are particularly useful if a publisher token has been compromised, or a software update is causing them toobehave inappropriately.</span></span> <span data-ttu-id="f15cd-236">I sådana situationer blockeras hello utgivarens identitet, vilket är en del av deras SAS-token, från att publicera händelser.</span><span class="sxs-lookup"><span data-stu-id="f15cd-236">In these situations, hello publisher's identity, which is part of their SAS token, can be blocked from publishing events.</span></span>

<span data-ttu-id="f15cd-237">Mer information om att återkalla utgivare och hur toosend tooEvent hubbar som utgivare, se hello [Event Hubs Large Scale Secure Publishing](https://code.msdn.microsoft.com/Service-Bus-Event-Hub-99ce67ab) exempel.</span><span class="sxs-lookup"><span data-stu-id="f15cd-237">For more information about publisher revocation and how toosend tooEvent Hubs as a publisher, see hello [Event Hubs Large Scale Secure Publishing](https://code.msdn.microsoft.com/Service-Bus-Event-Hub-99ce67ab) sample.</span></span>

## <a name="next-steps"></a><span data-ttu-id="f15cd-238">Nästa steg</span><span class="sxs-lookup"><span data-stu-id="f15cd-238">Next steps</span></span>
<span data-ttu-id="f15cd-239">toolearn mer information om scenarier i Händelsehubbar finns i följande länkar:</span><span class="sxs-lookup"><span data-stu-id="f15cd-239">toolearn more about Event Hubs scenarios, visit these links:</span></span>

* [<span data-ttu-id="f15cd-240">Event Hubs API-översikt</span><span class="sxs-lookup"><span data-stu-id="f15cd-240">Event Hubs API overview</span></span>](event-hubs-api-overview.md)
* [<span data-ttu-id="f15cd-241">Vad är Händelsehubbar</span><span class="sxs-lookup"><span data-stu-id="f15cd-241">What is Event Hubs</span></span>](event-hubs-what-is-event-hubs.md)
* [<span data-ttu-id="f15cd-242">Tillgänglighet och konsekvens i Event Hubs</span><span class="sxs-lookup"><span data-stu-id="f15cd-242">Availability and consistency in Event Hubs</span></span>](event-hubs-availability-and-consistency.md)
* [<span data-ttu-id="f15cd-243">Händelsebearbetningsvärd API-referens</span><span class="sxs-lookup"><span data-stu-id="f15cd-243">Event processor host API reference</span></span>](/dotnet/api/microsoft.servicebus.messaging.eventprocessorhost)

[NamespaceManager]: /dotnet/api/microsoft.servicebus.namespacemanager
[EventHubClient]: /dotnet/api/microsoft.servicebus.messaging.eventhubclient
[EventData]: /dotnet/api/microsoft.servicebus.messaging.eventdata
[CreateEventHubIfNotExists]: /dotnet/api/microsoft.servicebus.namespacemanager.createeventhubifnotexists
[PartitionKey]: /dotnet/api/microsoft.servicebus.messaging.eventdata#Microsoft_ServiceBus_Messaging_EventData_PartitionKey
[EventProcessorHost]: /dotnet/api/microsoft.servicebus.messaging.eventprocessorhost

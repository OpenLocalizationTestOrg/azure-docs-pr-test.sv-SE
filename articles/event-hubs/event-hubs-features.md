---
title: "aaaAzure Händelsehubbar funktioner översikt | Microsoft Docs"
description: "Översikt över och information om Händelsehubbar i Azure-funktioner"
services: event-hubs
documentationcenter: .net
author: sethmanheim
manager: timlt
editor: 
ms.assetid: 
ms.service: event-hubs
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: na
ms.date: 08/17/2017
ms.author: sethm
ms.openlocfilehash: 8094e48abc8455ed725d4d5d3f9895f431441e2b
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: sv-SE
ms.lasthandoff: 10/06/2017
---
# <a name="event-hubs-features-overview"></a><span data-ttu-id="3dbf7-103">Översikt över Event Hubs funktioner</span><span class="sxs-lookup"><span data-stu-id="3dbf7-103">Event Hubs features overview</span></span>

<span data-ttu-id="3dbf7-104">Händelsehubbar i Azure är en skalbar händelsebearbetning tjänsten som en och bearbetar stora mängder händelser och data med låg latens och hög tillförlitlighet.</span><span class="sxs-lookup"><span data-stu-id="3dbf7-104">Azure Event Hubs is a scalable event processing service that ingests and processes large volumes of events and data, with low latency and high reliability.</span></span> <span data-ttu-id="3dbf7-105">Se [vad är Händelsehubbar?](event-hubs-what-is-event-hubs.md) för en översikt över hello-tjänsten.</span><span class="sxs-lookup"><span data-stu-id="3dbf7-105">See [What is Event Hubs?](event-hubs-what-is-event-hubs.md) for a high-level overview of hello service.</span></span>

<span data-ttu-id="3dbf7-106">Den här artikeln bygger på hello informationen i hello [översikt](event-hubs-what-is-event-hubs.md), och ger information om Händelsehubbar komponenter och funktioner i technical och implementering.</span><span class="sxs-lookup"><span data-stu-id="3dbf7-106">This article builds on hello information in hello [overview](event-hubs-what-is-event-hubs.md), and provides technical and implementation details about Event Hubs components and features.</span></span>

## <a name="event-publishers"></a><span data-ttu-id="3dbf7-107">Händelseutfärdare</span><span class="sxs-lookup"><span data-stu-id="3dbf7-107">Event publishers</span></span>

<span data-ttu-id="3dbf7-108">En enhet som skickar data tooan händelsehubb är en händelse tillverkare eller *händelseutfärdare*.</span><span class="sxs-lookup"><span data-stu-id="3dbf7-108">Any entity that sends data tooan event hub is an event producer, or *event publisher*.</span></span> <span data-ttu-id="3dbf7-109">Händelseutfärdare kan utfärda händelser med hjälp av HTTPS eller AMQP 1.0.</span><span class="sxs-lookup"><span data-stu-id="3dbf7-109">Event publishers can publish events using HTTPS or AMQP 1.0.</span></span> <span data-ttu-id="3dbf7-110">Händelseutfärdare kan använder en delad signatur åtkomst (SAS) token tooidentify själva tooan händelsehubb, och ha en unik identitet, eller använda en vanlig SAS-token.</span><span class="sxs-lookup"><span data-stu-id="3dbf7-110">Event publishers use a Shared Access Signature (SAS) token tooidentify themselves tooan event hub, and can have a unique identity, or use a common SAS token.</span></span>

### <a name="publishing-an-event"></a><span data-ttu-id="3dbf7-111">Publicera en händelse</span><span class="sxs-lookup"><span data-stu-id="3dbf7-111">Publishing an event</span></span>

<span data-ttu-id="3dbf7-112">Du kan publicera en händelse via AMQP 1.0 eller HTTPS.</span><span class="sxs-lookup"><span data-stu-id="3dbf7-112">You can publish an event via AMQP 1.0 or HTTPS.</span></span> <span data-ttu-id="3dbf7-113">Händelsehubbar ger [klientbibliotek och klasser](event-hubs-dotnet-framework-api-overview.md) för att publicera händelser tooan händelsehubb från .NET-klienter.</span><span class="sxs-lookup"><span data-stu-id="3dbf7-113">Event Hubs provides [client libraries and classes](event-hubs-dotnet-framework-api-overview.md) for publishing events tooan event hub from .NET clients.</span></span> <span data-ttu-id="3dbf7-114">För andra körningar och plattformar kan du använda alla AMQP 1.0-klienter, t.ex. [Apache Qpid](http://qpid.apache.org/).</span><span class="sxs-lookup"><span data-stu-id="3dbf7-114">For other runtimes and platforms, you can use any AMQP 1.0 client, such as [Apache Qpid](http://qpid.apache.org/).</span></span> <span data-ttu-id="3dbf7-115">Du kan publicera händelser individuellt eller i batchar.</span><span class="sxs-lookup"><span data-stu-id="3dbf7-115">You can publish events individually, or batched.</span></span> <span data-ttu-id="3dbf7-116">En enstaka publikation (en instans av händelsedata ) har en begränsning på 256 KB, oavsett om det är en enskild händelse eller en batch.</span><span class="sxs-lookup"><span data-stu-id="3dbf7-116">A single publication (event data instance) has a limit of 256 KB, regardless of whether it is a single event or a batch.</span></span> <span data-ttu-id="3dbf7-117">Publicera händelser som är större än tröskelvärdet resultatet i ett fel.</span><span class="sxs-lookup"><span data-stu-id="3dbf7-117">Publishing events larger than this threshold results in an error.</span></span> <span data-ttu-id="3dbf7-118">Det är bästa praxis för utgivare toobe ovetande om partitioner i händelsehubben hello och tooonly anger en *partitionsnyckel* (som introducerades i hello nästa avsnitt) eller sin identitet via sin SAS-token.</span><span class="sxs-lookup"><span data-stu-id="3dbf7-118">It is a best practice for publishers toobe unaware of partitions within hello event hub and tooonly specify a *partition key* (introduced in hello next section), or their identity via their SAS token.</span></span>

<span data-ttu-id="3dbf7-119">hello val toouse AMQP eller HTTPS är specifikt toohello användningsscenariot.</span><span class="sxs-lookup"><span data-stu-id="3dbf7-119">hello choice toouse AMQP or HTTPS is specific toohello usage scenario.</span></span> <span data-ttu-id="3dbf7-120">AMQP kräver hello upprättande av en beständig dubbelriktad socket i tillägg tootransport säkerhet på radnivå (TLS) eller SSL/TLS.</span><span class="sxs-lookup"><span data-stu-id="3dbf7-120">AMQP requires hello establishment of a persistent bidirectional socket in addition tootransport level security (TLS) or SSL/TLS.</span></span> <span data-ttu-id="3dbf7-121">AMQP har högre nätverkskostnader för vid initieringen hello session, men HTTPS kräver ytterligare SSL-omkostnader för varje begäran.</span><span class="sxs-lookup"><span data-stu-id="3dbf7-121">AMQP has higher network costs when initializing hello session, however HTTPS requires additional SSL overhead for every request.</span></span> <span data-ttu-id="3dbf7-122">AMQP har högre prestanda för frekventa utfärdare.</span><span class="sxs-lookup"><span data-stu-id="3dbf7-122">AMQP has higher performance for frequent publishers.</span></span>

![Händelsehubbar](./media/event-hubs-features/partition_keys.png)

<span data-ttu-id="3dbf7-124">Händelsehubbar garanterar att alla händelser som delar en partitionsnyckelvärde levereras i ordning och toohello samma partition.</span><span class="sxs-lookup"><span data-stu-id="3dbf7-124">Event Hubs ensures that all events sharing a partition key value are delivered in order, and toohello same partition.</span></span> <span data-ttu-id="3dbf7-125">Om partitionsnycklar används med utfärdarprinciper, hello hello utgivarens identitet och hello värdet för hello Partitionsnyckeln matcha.</span><span class="sxs-lookup"><span data-stu-id="3dbf7-125">If partition keys are used with publisher policies, then hello identity of hello publisher and hello value of hello partition key must match.</span></span> <span data-ttu-id="3dbf7-126">Annars uppstår ett fel.</span><span class="sxs-lookup"><span data-stu-id="3dbf7-126">Otherwise, an error occurs.</span></span>

### <a name="publisher-policy"></a><span data-ttu-id="3dbf7-127">Utgivarprincip</span><span class="sxs-lookup"><span data-stu-id="3dbf7-127">Publisher policy</span></span>

<span data-ttu-id="3dbf7-128">Med händelsehubbar får du granulär kontroll över utgivare via *utgivarprinciper*.</span><span class="sxs-lookup"><span data-stu-id="3dbf7-128">Event Hubs enables granular control over event publishers through *publisher policies*.</span></span> <span data-ttu-id="3dbf7-129">Utgivarprinciper är körningen funktioner som designats toofacilitate stort antal oberoende utgivare.</span><span class="sxs-lookup"><span data-stu-id="3dbf7-129">Publisher policies are run-time features designed toofacilitate large numbers of independent event publishers.</span></span> <span data-ttu-id="3dbf7-130">Med utgivarprinciper använder varje utgivare sin egen unika identifierare vid publicering av händelser tooan händelsehubb, med hjälp av följande mekanism hello:</span><span class="sxs-lookup"><span data-stu-id="3dbf7-130">With publisher policies, each publisher uses its own unique identifier when publishing events tooan event hub, using hello following mechanism:</span></span>

```
//[my namespace].servicebus.windows.net/[event hub name]/publishers/[my publisher name]
```

<span data-ttu-id="3dbf7-131">Du har inte toocreate utgivarnamnen i förväg, men de måste matcha hello SAS-token som används när du publicerar en händelse i ordning tooensure oberoende utgivaridentiteter.</span><span class="sxs-lookup"><span data-stu-id="3dbf7-131">You don't have toocreate publisher names ahead of time, but they must match hello SAS token used when publishing an event, in order tooensure independent publisher identities.</span></span> <span data-ttu-id="3dbf7-132">När du använder utgivarprinciper hello **PartitionKey** värdet toohello utgivarens namn.</span><span class="sxs-lookup"><span data-stu-id="3dbf7-132">When using publisher policies, hello **PartitionKey** value is set toohello publisher name.</span></span> <span data-ttu-id="3dbf7-133">toowork korrekt måste dessa värden måste matcha.</span><span class="sxs-lookup"><span data-stu-id="3dbf7-133">toowork properly, these values must match.</span></span>

## <a name="capture"></a><span data-ttu-id="3dbf7-134">Capture</span><span class="sxs-lookup"><span data-stu-id="3dbf7-134">Capture</span></span>

<span data-ttu-id="3dbf7-135">[Event Hubs avbilda](event-hubs-capture-overview.md) kan du tooautomatically avbilda hello strömmande data i Händelsehubbar och spara den tooyour valet av ett Blob storage-konto eller ett tjänstkonto för Azure Data Lake.</span><span class="sxs-lookup"><span data-stu-id="3dbf7-135">[Event Hubs Capture](event-hubs-capture-overview.md) enables you tooautomatically capture hello streaming data in Event Hubs and save it tooyour choice of either a Blob storage account, or an Azure Data Lake Service account.</span></span> <span data-ttu-id="3dbf7-136">Du kan aktivera insamlingen från hello Azure-portalen och ange minsta storlek och tid fönstret tooperform hello avbildning.</span><span class="sxs-lookup"><span data-stu-id="3dbf7-136">You can enable Capture from hello Azure portal, and specify a minimum size and time window tooperform hello capture.</span></span> <span data-ttu-id="3dbf7-137">Med Event Hubs avbilda kan du ange egna Azure Blob Storage-konto och en behållare eller Azure Data Lake Service-konto som har använt toostore hello infångade data.</span><span class="sxs-lookup"><span data-stu-id="3dbf7-137">Using Event Hubs Capture, you specify your own Azure Blob Storage account and container, or Azure Data Lake Service account, which is used toostore hello captured data.</span></span> <span data-ttu-id="3dbf7-138">Insamlade data skrivs i hello Apache Avro-formatet.</span><span class="sxs-lookup"><span data-stu-id="3dbf7-138">Captured data is written in hello Apache Avro format.</span></span>

## <a name="partitions"></a><span data-ttu-id="3dbf7-139">Partitioner</span><span class="sxs-lookup"><span data-stu-id="3dbf7-139">Partitions</span></span>

<span data-ttu-id="3dbf7-140">Händelsehubbar ger meddelandeströmmar via ett partitionerat konsumentmönster där varje konsument bara läser en viss delmängd, eller partition, av meddelandeströmmen hello.</span><span class="sxs-lookup"><span data-stu-id="3dbf7-140">Event Hubs provides message streaming through a partitioned consumer pattern in which each consumer only reads a specific subset, or partition, of hello message stream.</span></span> <span data-ttu-id="3dbf7-141">Det här mönstret gör det möjligt att skala horisontellt för händelsebearbetning och tillhandahåller andra strömfokuserade funktioner som inte är tillgängliga i köer och ämnen.</span><span class="sxs-lookup"><span data-stu-id="3dbf7-141">This pattern enables horizontal scale for event processing and provides other stream-focused features that are unavailable in queues and topics.</span></span>

<span data-ttu-id="3dbf7-142">En partition är en ordnad sekvens av händelser som hålls kvar i en händelsehubb.</span><span class="sxs-lookup"><span data-stu-id="3dbf7-142">A partition is an ordered sequence of events that is held in an event hub.</span></span> <span data-ttu-id="3dbf7-143">När nya händelser anländer läggs de toohello slutet av denna sekvens.</span><span class="sxs-lookup"><span data-stu-id="3dbf7-143">As newer events arrive, they are added toohello end of this sequence.</span></span> <span data-ttu-id="3dbf7-144">En partition kan betraktas som en ”genomförandelogg”.</span><span class="sxs-lookup"><span data-stu-id="3dbf7-144">A partition can be thought of as a "commit log."</span></span>

![Händelsehubbar](./media/event-hubs-features/partition.png)

<span data-ttu-id="3dbf7-146">Händelsehubbar behåller data under en konfigurerad kvarhållningstid som gäller för alla partitioner i hello händelsehubb.</span><span class="sxs-lookup"><span data-stu-id="3dbf7-146">Event Hubs retains data for a configured retention time that applies across all partitions in hello event hub.</span></span> <span data-ttu-id="3dbf7-147">Händelser löper ut enligt ett tidsschema. Det går inte att ta bort dem.</span><span class="sxs-lookup"><span data-stu-id="3dbf7-147">Events expire on a time basis; you cannot explicitly delete them.</span></span> <span data-ttu-id="3dbf7-148">Eftersom partitioner är oberoende av varandra och innehåller sina egna sekvenser med data, växer de ofta i olika takt.</span><span class="sxs-lookup"><span data-stu-id="3dbf7-148">Because partitions are independent and contain their own sequence of data, they often grow at different rates.</span></span>

![Händelsehubbar](./media/event-hubs-features/multiple_partitions.png)

<span data-ttu-id="3dbf7-150">hello antalet partitioner anges när skapas och måste vara mellan 2 och 32.</span><span class="sxs-lookup"><span data-stu-id="3dbf7-150">hello number of partitions is specified at creation and must be between 2 and 32.</span></span> <span data-ttu-id="3dbf7-151">Hej partitionsantal är inte kan ändras, så bör du långsiktiga skala när antalet partitioner.</span><span class="sxs-lookup"><span data-stu-id="3dbf7-151">hello partition count is not changeable, so you should consider long-term scale when setting partition count.</span></span> <span data-ttu-id="3dbf7-152">Partitioner är en mekanism för organisation av data som rör toohello nedströms Parallellism som krävs inom användarprogram.</span><span class="sxs-lookup"><span data-stu-id="3dbf7-152">Partitions are a data organization mechanism that relates toohello downstream parallelism required in consuming applications.</span></span> <span data-ttu-id="3dbf7-153">hello antalet partitioner i en händelsehubb direkt relaterat toohello nummer för samtidiga läsare du förväntar dig toohave.</span><span class="sxs-lookup"><span data-stu-id="3dbf7-153">hello number of partitions in an event hub directly relates toohello number of concurrent readers you expect toohave.</span></span> <span data-ttu-id="3dbf7-154">Du kan öka hello antalet partitioner utöver 32 genom att kontakta hello Händelsehubbar team.</span><span class="sxs-lookup"><span data-stu-id="3dbf7-154">You can increase hello number of partitions beyond 32 by contacting hello Event Hubs team.</span></span>

<span data-ttu-id="3dbf7-155">Du rekommenderas att inte skicka direkt tooa partition medan partitioner kan identifieras och kan skickas toodirectly.</span><span class="sxs-lookup"><span data-stu-id="3dbf7-155">While partitions are identifiable and can be sent toodirectly, sending directly tooa partition is not recommended.</span></span> <span data-ttu-id="3dbf7-156">I stället kan du använda högre nivå konstruktioner som introducerades i hello [händelseutfärdare](#event-publishers) och [kapacitet](#capacity) avsnitt.</span><span class="sxs-lookup"><span data-stu-id="3dbf7-156">Instead, you can use higher level constructs introduced in hello [Event publisher](#event-publishers) and [Capacity](#capacity) sections.</span></span> 

<span data-ttu-id="3dbf7-157">Partitioner är fyllda med en sekvens av händelsedata som innehåller hello händelse hello brödtext, en användardefinierad egenskapsuppsättning och metadata, till exempel dess offset i hello partitionen och dess nummer i dataströmsekvensen hello.</span><span class="sxs-lookup"><span data-stu-id="3dbf7-157">Partitions are filled with a sequence of event data which contains hello body of hello event, a user-defined property bag, and metadata such as its offset in hello partition and its number in hello stream sequence.</span></span>

<span data-ttu-id="3dbf7-158">Mer information om partitioner och hello säkerhetsaspekten tillgänglighet och tillförlitlighet finns hello [Programmeringsguide för Händelsehubbar](event-hubs-programming-guide.md#partition-key) och hello [tillgänglighet och konsekvens i Händelsehubbar](event-hubs-availability-and-consistency.md) artikel .</span><span class="sxs-lookup"><span data-stu-id="3dbf7-158">For more information about partitions and hello trade-off between availability and reliability, see hello [Event Hubs programming guide](event-hubs-programming-guide.md#partition-key) and hello [Availability and consistency in Event Hubs](event-hubs-availability-and-consistency.md) article.</span></span>

### <a name="partition-key"></a><span data-ttu-id="3dbf7-159">Partitionsnyckeln</span><span class="sxs-lookup"><span data-stu-id="3dbf7-159">Partition key</span></span>

<span data-ttu-id="3dbf7-160">Du kan använda en [partitionsnyckel](event-hubs-programming-guide.md#partition-key) toomap inkommande händelsedata med specifika partitioner för hello syftet organisation av data.</span><span class="sxs-lookup"><span data-stu-id="3dbf7-160">You can use a [partition key](event-hubs-programming-guide.md#partition-key) toomap incoming event data into specific partitions for hello purpose of data organization.</span></span> <span data-ttu-id="3dbf7-161">hello Partitionsnyckeln är ett värde som avsändaren anger skickades till en händelsehubb.</span><span class="sxs-lookup"><span data-stu-id="3dbf7-161">hello partition key is a sender-supplied value passed into an event hub.</span></span> <span data-ttu-id="3dbf7-162">Det bearbetas via en statisk hash-funktion, vilket skapar hello tilldelning av partitionen.</span><span class="sxs-lookup"><span data-stu-id="3dbf7-162">It is processed through a static hashing function, which creates hello partition assignment.</span></span> <span data-ttu-id="3dbf7-163">Om du inte anger en partitionsnyckel när du publicerar en händelse, används en tilldelning enligt resursallokeringsmodellen.</span><span class="sxs-lookup"><span data-stu-id="3dbf7-163">If you don't specify a partition key when publishing an event, a round-robin assignment is used.</span></span>

<span data-ttu-id="3dbf7-164">Hej händelseutfärdaren bara medveten om sin partitionsnyckel, inte hello partition toowhich hello händelserna publiceras.</span><span class="sxs-lookup"><span data-stu-id="3dbf7-164">hello event publisher is only aware of its partition key, not hello partition toowhich hello events are published.</span></span> <span data-ttu-id="3dbf7-165">Frikopplingen av nyckeln och partitionen gör hello avsändaren inte behöver tooknow så mycket om hello nedströms bearbetning.</span><span class="sxs-lookup"><span data-stu-id="3dbf7-165">This decoupling of key and partition insulates hello sender from needing tooknow too much about hello downstream processing.</span></span> <span data-ttu-id="3dbf7-166">En per enhet eller en användarunik identitet utgör en bra partitionsnyckel, men andra attribut, till exempel Geografi kan också använda toogroup relaterade händelser i en enda partition.</span><span class="sxs-lookup"><span data-stu-id="3dbf7-166">A per-device or user unique identity makes a good partition key, but other attributes such as geography can also be used toogroup related events into a single partition.</span></span>

## <a name="sas-tokens"></a><span data-ttu-id="3dbf7-167">SAS-token</span><span class="sxs-lookup"><span data-stu-id="3dbf7-167">SAS tokens</span></span>

<span data-ttu-id="3dbf7-168">Händelsehubbar använder *signaturer för delad åtkomst*, som är tillgängliga på nivån för hello namnområde och händelse-hubb.</span><span class="sxs-lookup"><span data-stu-id="3dbf7-168">Event Hubs uses *Shared Access Signatures*, which are available at hello namespace and event hub level.</span></span> <span data-ttu-id="3dbf7-169">En SAS-token genereras från en SAS-nyckel och är en SHA-hash för en URL som kodats i ett specifikt format.</span><span class="sxs-lookup"><span data-stu-id="3dbf7-169">A SAS token is generated from a SAS key and is an SHA hash of a URL, encoded in a specific format.</span></span> <span data-ttu-id="3dbf7-170">Med hello namn hello nyckeln (principen) och hello token Händelsehubbar återskapa hello hash och därmed autentisera avsändaren hello.</span><span class="sxs-lookup"><span data-stu-id="3dbf7-170">Using hello name of hello key (policy) and hello token, Event Hubs can regenerate hello hash and thus authenticate hello sender.</span></span> <span data-ttu-id="3dbf7-171">SAS-token för händelseutfärdare skapas vanligtvis med enbart behörighet för att **skicka** i en specifik händelsehubb.</span><span class="sxs-lookup"><span data-stu-id="3dbf7-171">Normally, SAS tokens for event publishers are created with only **send** privileges on a specific event hub.</span></span> <span data-ttu-id="3dbf7-172">Den här token URL-mekanismen med SAS är hello grund för utfärdaridentifiering som presenterades i principen för hello utgivare.</span><span class="sxs-lookup"><span data-stu-id="3dbf7-172">This SAS token URL mechanism is hello basis for publisher identification introduced in hello publisher policy.</span></span> <span data-ttu-id="3dbf7-173">Mer information om hur du arbetar med SAS finns i [autentisering med signatur för delad åtkomst med Service Bus](../service-bus-messaging/service-bus-sas.md).</span><span class="sxs-lookup"><span data-stu-id="3dbf7-173">For more information about working with SAS, see [Shared Access Signature Authentication with Service Bus](../service-bus-messaging/service-bus-sas.md).</span></span>

## <a name="event-consumers"></a><span data-ttu-id="3dbf7-174">Händelsekonsumenter</span><span class="sxs-lookup"><span data-stu-id="3dbf7-174">Event consumers</span></span>

<span data-ttu-id="3dbf7-175">En enhet som läser händelsedata från en händelsehubb är en *händelsekonsument*.</span><span class="sxs-lookup"><span data-stu-id="3dbf7-175">Any entity that reads event data from an event hub is an *event consumer*.</span></span> <span data-ttu-id="3dbf7-176">Alla konsumenter i Händelsehubbar ansluter via hello AMQP 1.0-session och händelser levereras via hello session när de blir tillgängliga.</span><span class="sxs-lookup"><span data-stu-id="3dbf7-176">All Event Hubs consumers connect via hello AMQP 1.0 session and events are delivered through hello session as they become available.</span></span> <span data-ttu-id="3dbf7-177">hello klienten behöver inte toopoll efter datatillgänglighet.</span><span class="sxs-lookup"><span data-stu-id="3dbf7-177">hello client does not need toopoll for data availability.</span></span>

### <a name="consumer-groups"></a><span data-ttu-id="3dbf7-178">Konsumentgrupper</span><span class="sxs-lookup"><span data-stu-id="3dbf7-178">Consumer groups</span></span>

<span data-ttu-id="3dbf7-179">hello Publicera/prenumerera mekanismen för Händelsehubbar aktiveras via *konsumentgrupper*.</span><span class="sxs-lookup"><span data-stu-id="3dbf7-179">hello publish/subscribe mechanism of Event Hubs is enabled through *consumer groups*.</span></span> <span data-ttu-id="3dbf7-180">En konsumentgrupp är en vy (tillstånd, position eller offset) av en hel händelsehubb.</span><span class="sxs-lookup"><span data-stu-id="3dbf7-180">A consumer group is a view (state, position, or offset) of an entire event hub.</span></span> <span data-ttu-id="3dbf7-181">Konsumentgrupper aktivera flera användningsprogram tooeach har en separat vy över händelseströmmen hello och tooread hello dataströmmen oberoende i sin egen takt och med sina egna förskjuts.</span><span class="sxs-lookup"><span data-stu-id="3dbf7-181">Consumer groups enable multiple consuming applications tooeach have a separate view of hello event stream, and tooread hello stream independently at their own pace and with their own offsets.</span></span>

<span data-ttu-id="3dbf7-182">Varje nedströms program är lika tooa konsumentgrupp i en arkitektur för bearbetning av dataströmmen.</span><span class="sxs-lookup"><span data-stu-id="3dbf7-182">In a stream processing architecture, each downstream application equates tooa consumer group.</span></span> <span data-ttu-id="3dbf7-183">Om du vill toowrite händelse toolong termen datalagring är utgör programmet för att en konsumentgrupp.</span><span class="sxs-lookup"><span data-stu-id="3dbf7-183">If you want toowrite event data toolong-term storage, then that storage writer application is a consumer group.</span></span> <span data-ttu-id="3dbf7-184">Komplex händelsebearbetning kan sedan utföras av en annan, separat konsumentgrupp.</span><span class="sxs-lookup"><span data-stu-id="3dbf7-184">Complex event processing can then be performed by another, separate consumer group.</span></span> <span data-ttu-id="3dbf7-185">Du får bara åtkomst till en partition via en konsumentgrupp.</span><span class="sxs-lookup"><span data-stu-id="3dbf7-185">You can only access partitions through a consumer group.</span></span> <span data-ttu-id="3dbf7-186">Det får finnas högst 5 läsare på en partition per konsumentgrupp; men **rekommenderas att det finns endast en aktiv mottagaren på en partition per konsumentgrupp**.</span><span class="sxs-lookup"><span data-stu-id="3dbf7-186">There can be at most 5 concurrent readers on a partition per consumer group; however **it is recommended that there is only one active receiver on a partition per consumer group**.</span></span> <span data-ttu-id="3dbf7-187">Det finns alltid en förinställd konsumentgrupp i en händelsehubb, och du kan skapa upp too20 konsumentgrupper för en händelsehubb på standardnivå.</span><span class="sxs-lookup"><span data-stu-id="3dbf7-187">There is always a default consumer group in an event hub, and you can create up too20 consumer groups for a Standard tier event hub.</span></span>

<span data-ttu-id="3dbf7-188">hello följande är exempel på URI-konventionen hello konsumenten grupp:</span><span class="sxs-lookup"><span data-stu-id="3dbf7-188">hello following are examples of hello consumer group URI convention:</span></span>

```http
//[my namespace].servicebus.windows.net/[event hub name]/[Consumer Group #1]
//[my namespace].servicebus.windows.net/[event hub name]/[Consumer Group #2]
```

<span data-ttu-id="3dbf7-189">hello visar följande bild hello Händelsehubbar dataströmmen bearbetning arkitektur:</span><span class="sxs-lookup"><span data-stu-id="3dbf7-189">hello following figure shows hello Event Hubs stream processing architecture:</span></span>

![Händelsehubbar](./media/event-hubs-features/event_hubs_architecture.png)

### <a name="stream-offsets"></a><span data-ttu-id="3dbf7-191">Offsets för strömmar</span><span class="sxs-lookup"><span data-stu-id="3dbf7-191">Stream offsets</span></span>

<span data-ttu-id="3dbf7-192">En *offset* är hello positionen för en händelse inom en partition.</span><span class="sxs-lookup"><span data-stu-id="3dbf7-192">An *offset* is hello position of an event within a partition.</span></span> <span data-ttu-id="3dbf7-193">Föreställ dig en offset som en markör på klientsidan.</span><span class="sxs-lookup"><span data-stu-id="3dbf7-193">You can think of an offset as a client-side cursor.</span></span> <span data-ttu-id="3dbf7-194">hello offset är en byte numrering av hello-händelse.</span><span class="sxs-lookup"><span data-stu-id="3dbf7-194">hello offset is a byte numbering of hello event.</span></span> <span data-ttu-id="3dbf7-195">Denna offset kan en händelse konsumenten (läsare) toospecify en punkt i hello händelseströmmen som de vill toobegin läsa händelser.</span><span class="sxs-lookup"><span data-stu-id="3dbf7-195">This offset enables an event consumer (reader) toospecify a point in hello event stream from which they want toobegin reading events.</span></span> <span data-ttu-id="3dbf7-196">Du kan ange hello offset som en tidsstämpel eller offset-värde.</span><span class="sxs-lookup"><span data-stu-id="3dbf7-196">You can specify hello offset as a timestamp or as an offset value.</span></span> <span data-ttu-id="3dbf7-197">Konsumenterna ansvarar för att lagra sina egna offset-värden utanför hello händelsehubbtjänsten.</span><span class="sxs-lookup"><span data-stu-id="3dbf7-197">Consumers are responsible for storing their own offset values outside of hello Event Hubs service.</span></span> <span data-ttu-id="3dbf7-198">Inom en partition innehåller varje händelse en offset.</span><span class="sxs-lookup"><span data-stu-id="3dbf7-198">Within a partition, each event includes an offset.</span></span>

![Händelsehubbar](./media/event-hubs-features/partition_offset.png)

### <a name="checkpointing"></a><span data-ttu-id="3dbf7-200">Kontrollpunkter</span><span class="sxs-lookup"><span data-stu-id="3dbf7-200">Checkpointing</span></span>

<span data-ttu-id="3dbf7-201">*Att skapa kontrollpunkter* är en process genom vilken läsare markerar eller sparar sin position inom en händelsesekvens i en partition.</span><span class="sxs-lookup"><span data-stu-id="3dbf7-201">*Checkpointing* is a process by which readers mark or commit their position within a partition event sequence.</span></span> <span data-ttu-id="3dbf7-202">Kontrollpunkter är hello ansvar hello konsumenten och sker på grundval av per partition inom en konsumentgrupp.</span><span class="sxs-lookup"><span data-stu-id="3dbf7-202">Checkpointing is hello responsibility of hello consumer and occurs on a per-partition basis within a consumer group.</span></span> <span data-ttu-id="3dbf7-203">Det ansvaret innebär att för varje konsumentgrupp måste varje partition läsaren måste hålla reda på dess aktuella position i händelseströmmen hello och kan informera hello-tjänsten när de anser att hello dataströmmen är klar.</span><span class="sxs-lookup"><span data-stu-id="3dbf7-203">This responsibility means that for each consumer group, each partition reader must keep track of its current position in hello event stream, and can inform hello service when it considers hello data stream complete.</span></span>

<span data-ttu-id="3dbf7-204">Om en läsare kopplar från en partition, när den sedan återansluts kan han börja läsa vid hello kontrollpunkt som tidigare skickades av hello senaste läsaren i den aktuella partitionen i just den konsumentgruppen.</span><span class="sxs-lookup"><span data-stu-id="3dbf7-204">If a reader disconnects from a partition, when it reconnects it begins reading at hello checkpoint that was previously submitted by hello last reader of that partition in that consumer group.</span></span> <span data-ttu-id="3dbf7-205">När hello läsaren ansluter skickar denna offset toohello händelse toospecify hello plats i navet på vilka toostart läsning.</span><span class="sxs-lookup"><span data-stu-id="3dbf7-205">When hello reader connects, it passes this offset toohello event hub toospecify hello location at which toostart reading.</span></span> <span data-ttu-id="3dbf7-206">På så sätt kan du kan använda kontrollpunkter tooboth Markera händelser som ”Slutför” i nedströms program och tooprovide återhämtning om växling mellan läsare som körs på olika datorer sker.</span><span class="sxs-lookup"><span data-stu-id="3dbf7-206">In this way, you can use checkpointing tooboth mark events as "complete" by downstream applications, and tooprovide resiliency if a failover between readers running on different machines occurs.</span></span> <span data-ttu-id="3dbf7-207">Det är möjligt tooreturn tooolder data genom att ange en lägre offset tack vare kontrollpunkterna.</span><span class="sxs-lookup"><span data-stu-id="3dbf7-207">It is possible tooreturn tooolder data by specifying a lower offset from this checkpointing process.</span></span> <span data-ttu-id="3dbf7-208">Den här mekanismen möjliggör både återhämtning vid redundansväxlingar och återuppspelning av händelseströmmar.</span><span class="sxs-lookup"><span data-stu-id="3dbf7-208">Through this mechanism, checkpointing enables both failover resiliency and event stream replay.</span></span>

### <a name="common-consumer-tasks"></a><span data-ttu-id="3dbf7-209">Vanliga konsumentuppgifter</span><span class="sxs-lookup"><span data-stu-id="3dbf7-209">Common consumer tasks</span></span>

<span data-ttu-id="3dbf7-210">Alla konsumenter i Händelsehubbar ansluter via en AMQP 1.0-session, en tillståndsmedveten dubbelriktad kommunikationskanal.</span><span class="sxs-lookup"><span data-stu-id="3dbf7-210">All Event Hubs consumers connect via an AMQP 1.0 session, a state-aware bidirectional communication channel.</span></span> <span data-ttu-id="3dbf7-211">Varje partition har en AMQP 1.0-session som underlättar hello transport av händelser som åtskiljs av partitioner.</span><span class="sxs-lookup"><span data-stu-id="3dbf7-211">Each partition has an AMQP 1.0 session that facilitates hello transport of events segregated by partition.</span></span>

#### <a name="connect-tooa-partition"></a><span data-ttu-id="3dbf7-212">Ansluta tooa partition</span><span class="sxs-lookup"><span data-stu-id="3dbf7-212">Connect tooa partition</span></span>

<span data-ttu-id="3dbf7-213">När du ansluter toopartitions, är det vanliga praxis toouse en leasing mekanism toocoordinate reader anslutningar toospecific partitioner.</span><span class="sxs-lookup"><span data-stu-id="3dbf7-213">When connecting toopartitions, it is common practice toouse a leasing mechanism toocoordinate reader connections toospecific partitions.</span></span> <span data-ttu-id="3dbf7-214">På så sätt kan det är möjligt för varje partition i en konsument grupp toohave endast en aktiv läsare.</span><span class="sxs-lookup"><span data-stu-id="3dbf7-214">This way, it is possible for every partition in a consumer group toohave only one active reader.</span></span> <span data-ttu-id="3dbf7-215">Kontrollpunkter leasing och hantera läsare förenklas med hello [EventProcessorHost](/dotnet/api/microsoft.servicebus.messaging.eventprocessorhost) klassen för .NET-klienter.</span><span class="sxs-lookup"><span data-stu-id="3dbf7-215">Checkpointing, leasing, and managing readers are simplified by using hello [EventProcessorHost](/dotnet/api/microsoft.servicebus.messaging.eventprocessorhost) class for .NET clients.</span></span> <span data-ttu-id="3dbf7-216">hello värd för händelsebearbetning är en intelligent konsumentagent.</span><span class="sxs-lookup"><span data-stu-id="3dbf7-216">hello Event Processor Host is an intelligent consumer agent.</span></span>

#### <a name="read-events"></a><span data-ttu-id="3dbf7-217">Läsa händelser</span><span class="sxs-lookup"><span data-stu-id="3dbf7-217">Read events</span></span>

<span data-ttu-id="3dbf7-218">När en AMQP 1.0-session och -länk har öppnats för en specifik partition, levereras händelser toohello AMQP 1.0-klienten av hello händelsehubbtjänsten.</span><span class="sxs-lookup"><span data-stu-id="3dbf7-218">After an AMQP 1.0 session and link is opened for a specific partition, events are delivered toohello AMQP 1.0 client by hello Event Hubs service.</span></span> <span data-ttu-id="3dbf7-219">Den här leveransmekanismen gör det möjligt med ett högre genomflöde och kortare svarstid än i pull-baserade mekanismer som t.ex. HTTP GET.</span><span class="sxs-lookup"><span data-stu-id="3dbf7-219">This delivery mechanism enables higher throughput and lower latency than pull-based mechanisms such as HTTP GET.</span></span> <span data-ttu-id="3dbf7-220">När händelser skickas toohello klienten, innehåller varje instans av händelsedata viktiga metadata, till exempel hello offset- och sekvensnumret många som används toofacilitate skapa kontrollpunkter i händelsesekvensen hello.</span><span class="sxs-lookup"><span data-stu-id="3dbf7-220">As events are sent toohello client, each event data instance contains important metadata such as hello offset and sequence number that are used toofacilitate checkpointing on hello event sequence.</span></span>

<span data-ttu-id="3dbf7-221">Händelsedata:</span><span class="sxs-lookup"><span data-stu-id="3dbf7-221">Event data:</span></span>
* <span data-ttu-id="3dbf7-222">Offset</span><span class="sxs-lookup"><span data-stu-id="3dbf7-222">Offset</span></span>
* <span data-ttu-id="3dbf7-223">Sekvensnummer</span><span class="sxs-lookup"><span data-stu-id="3dbf7-223">Sequence number</span></span>
* <span data-ttu-id="3dbf7-224">Innehåll</span><span class="sxs-lookup"><span data-stu-id="3dbf7-224">Body</span></span>
* <span data-ttu-id="3dbf7-225">Användaregenskaper</span><span class="sxs-lookup"><span data-stu-id="3dbf7-225">User properties</span></span>
* <span data-ttu-id="3dbf7-226">Systemegenskaper</span><span class="sxs-lookup"><span data-stu-id="3dbf7-226">System properties</span></span>

<span data-ttu-id="3dbf7-227">Det är ditt ansvar toomanage hello förskjutning.</span><span class="sxs-lookup"><span data-stu-id="3dbf7-227">It is your responsibility toomanage hello offset.</span></span>

## <a name="capacity"></a><span data-ttu-id="3dbf7-228">Kapacitet</span><span class="sxs-lookup"><span data-stu-id="3dbf7-228">Capacity</span></span>

<span data-ttu-id="3dbf7-229">Händelsehubbar har en mycket skalbar parallell arkitektur och det finns flera viktiga faktorer tooconsider när storleken på och skala.</span><span class="sxs-lookup"><span data-stu-id="3dbf7-229">Event Hubs has a highly scalable parallel architecture and there are several key factors tooconsider when sizing and scaling.</span></span>

### <a name="throughput-units"></a><span data-ttu-id="3dbf7-230">Genomflödesenheter</span><span class="sxs-lookup"><span data-stu-id="3dbf7-230">Throughput units</span></span>

<span data-ttu-id="3dbf7-231">Hej genomflödeskapaciteten i Händelsehubbar styrs av *genomflödesenheter*.</span><span class="sxs-lookup"><span data-stu-id="3dbf7-231">hello throughput capacity of Event Hubs is controlled by *throughput units*.</span></span> <span data-ttu-id="3dbf7-232">Genomflödesenheter är färdiga kapacitetsenheter.</span><span class="sxs-lookup"><span data-stu-id="3dbf7-232">Throughput units are pre-purchased units of capacity.</span></span> <span data-ttu-id="3dbf7-233">En genomflödesenhet omfattar följande kapacitet hello:</span><span class="sxs-lookup"><span data-stu-id="3dbf7-233">A single throughput unit includes hello following capacity:</span></span>

* <span data-ttu-id="3dbf7-234">Ingång: upp too1 MB per sekund eller 1 000 händelser per sekund (beroende på vilket som kommer först)</span><span class="sxs-lookup"><span data-stu-id="3dbf7-234">Ingress: Up too1 MB per second or 1000 events per second (whichever comes first)</span></span>
* <span data-ttu-id="3dbf7-235">Utgång: upp too2 MB per sekund</span><span class="sxs-lookup"><span data-stu-id="3dbf7-235">Egress: Up too2 MB per second</span></span>

<span data-ttu-id="3dbf7-236">Utöver hello kapaciteten på hello inköpta genomflödesenheter, ingången begränsas och en [ServerBusyException](/dotnet/api/microsoft.servicebus.messaging.serverbusyexception) returneras.</span><span class="sxs-lookup"><span data-stu-id="3dbf7-236">Beyond hello capacity of hello purchased throughput units, ingress is throttled and a [ServerBusyException](/dotnet/api/microsoft.servicebus.messaging.serverbusyexception) is returned.</span></span> <span data-ttu-id="3dbf7-237">Utgående skapar inte begränsningsfel, men är fortfarande begränsad toohello kapacitet för hello inköpta genomflödesenheter.</span><span class="sxs-lookup"><span data-stu-id="3dbf7-237">Egress does not produce throttling exceptions, but is still limited toohello capacity of hello purchased throughput units.</span></span> <span data-ttu-id="3dbf7-238">Om du får felmeddelanden om publiceringsfrekvensen eller förväntar dig större utgång för toosee vara säker på att toocheck hur många genomflödesenheter du har köpt för hello namnområde.</span><span class="sxs-lookup"><span data-stu-id="3dbf7-238">If you receive publishing rate exceptions or are expecting toosee higher egress, be sure toocheck how many throughput units you have purchased for hello namespace.</span></span> <span data-ttu-id="3dbf7-239">Du kan hantera enheter hello **skala** bladet hello namnområden i hello [Azure-portalen](https://portal.azure.com).</span><span class="sxs-lookup"><span data-stu-id="3dbf7-239">You can manage throughput units on hello **Scale** blade of hello namespaces in hello [Azure portal](https://portal.azure.com).</span></span> <span data-ttu-id="3dbf7-240">Du kan också hantera enheter via programmering med hello [Event Hubs API: er](event-hubs-api-overview.md).</span><span class="sxs-lookup"><span data-stu-id="3dbf7-240">You can also manage throughput units programmatically using hello [Event Hubs APIs](event-hubs-api-overview.md).</span></span>

<span data-ttu-id="3dbf7-241">Genomflödesenheter debiteras per timme och köps i förväg.</span><span class="sxs-lookup"><span data-stu-id="3dbf7-241">Throughput units are billed per hour and are pre-purchased.</span></span> <span data-ttu-id="3dbf7-242">När de väl har köpts debiteras de för minst en timme.</span><span class="sxs-lookup"><span data-stu-id="3dbf7-242">Once purchased, throughput units are billed for a minimum of one hour.</span></span> <span data-ttu-id="3dbf7-243">Too20 genomflödesenheter kan köpas för ett namnområde för Händelsehubbar och är gemensamma för alla Händelsehubbar i hello namnområde.</span><span class="sxs-lookup"><span data-stu-id="3dbf7-243">Up too20 throughput units can be purchased for an Event Hubs namespace and are shared across all Event Hubs in hello namespace.</span></span>

<span data-ttu-id="3dbf7-244">Fler genomflödesenheter kan köpas i block på 20 too100 genomströmning enheter genom att kontakta Azure-supporten.</span><span class="sxs-lookup"><span data-stu-id="3dbf7-244">More throughput units can be purchased in blocks of 20, up too100 throughput units, by contacting Azure support.</span></span> <span data-ttu-id="3dbf7-245">Utöver det kan du också köpa block med 100 genomflödesenheter.</span><span class="sxs-lookup"><span data-stu-id="3dbf7-245">Beyond that, you can also purchase blocks of 100 throughput units.</span></span>

<span data-ttu-id="3dbf7-246">Vi rekommenderar att du balansera genomströmning enheter och partitioner tooachieve bästa skala.</span><span class="sxs-lookup"><span data-stu-id="3dbf7-246">We recommend that you balance throughput units and partitions tooachieve optimal scale.</span></span> <span data-ttu-id="3dbf7-247">En enstaka partition har en maximal skala på en genomflödesenhet.</span><span class="sxs-lookup"><span data-stu-id="3dbf7-247">A single partition has a maximum scale of one throughput unit.</span></span> <span data-ttu-id="3dbf7-248">hello antalet genomflödesenheter ska vara mindre än eller lika toohello antalet partitioner i en händelsehubb.</span><span class="sxs-lookup"><span data-stu-id="3dbf7-248">hello number of throughput units should be less than or equal toohello number of partitions in an event hub.</span></span>

<span data-ttu-id="3dbf7-249">Detaljerad Händelsehubbar information om priser finns i [priser för Händelsehubbar](https://azure.microsoft.com/pricing/details/event-hubs/).</span><span class="sxs-lookup"><span data-stu-id="3dbf7-249">For detailed Event Hubs pricing information, see [Event Hubs pricing](https://azure.microsoft.com/pricing/details/event-hubs/).</span></span>

## <a name="next-steps"></a><span data-ttu-id="3dbf7-250">Nästa steg</span><span class="sxs-lookup"><span data-stu-id="3dbf7-250">Next steps</span></span>

<span data-ttu-id="3dbf7-251">Mer information om Händelsehubbar finns i hello följande länkar:</span><span class="sxs-lookup"><span data-stu-id="3dbf7-251">For more information about Event Hubs, visit hello following links:</span></span>

* <span data-ttu-id="3dbf7-252">Kom igång med en [kurs om händelsehubbar][Event Hubs tutorial]</span><span class="sxs-lookup"><span data-stu-id="3dbf7-252">Get started with an [Event Hubs tutorial][Event Hubs tutorial]</span></span>
* [<span data-ttu-id="3dbf7-253">Programmeringsguide för Event Hubs</span><span class="sxs-lookup"><span data-stu-id="3dbf7-253">Event Hubs programming guide</span></span>](event-hubs-programming-guide.md)
* [<span data-ttu-id="3dbf7-254">Tillgänglighet och konsekvens i Event Hubs</span><span class="sxs-lookup"><span data-stu-id="3dbf7-254">Availability and consistency in Event Hubs</span></span>](event-hubs-availability-and-consistency.md)
* [<span data-ttu-id="3dbf7-255">Vanliga frågor och svar om Event Hubs</span><span class="sxs-lookup"><span data-stu-id="3dbf7-255">Event Hubs FAQ</span></span>](event-hubs-faq.md)
* <span data-ttu-id="3dbf7-256">[Event Hubs-exempel][]</span><span class="sxs-lookup"><span data-stu-id="3dbf7-256">[Event Hubs samples][]</span></span>

[Event Hubs tutorial]: event-hubs-dotnet-standard-getstarted-send.md
[Event Hubs-exempel]: https://github.com/Azure/azure-event-hubs/tree/master/samples

---
title: "Översikt över funktioner i Azure Event Hubs | Microsoft Docs"
description: "Översikt över och information om Händelsehubbar i Azure-funktioner"
services: event-hubs
documentationcenter: .net
author: sethmanheim
manager: timlt
editor: 
ms.assetid: 
ms.service: event-hubs
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: na
ms.date: 08/17/2017
ms.author: sethm
ms.openlocfilehash: a74d767d57eb5ce2b3a716f9ba908a451f25f538
ms.sourcegitcommit: 18ad9bc049589c8e44ed277f8f43dcaa483f3339
ms.translationtype: MT
ms.contentlocale: sv-SE
ms.lasthandoff: 08/29/2017
---
# <a name="event-hubs-features-overview"></a><span data-ttu-id="263f8-103">Översikt över Event Hubs funktioner</span><span class="sxs-lookup"><span data-stu-id="263f8-103">Event Hubs features overview</span></span>

<span data-ttu-id="263f8-104">Händelsehubbar i Azure är en skalbar händelsebearbetning tjänsten som en och bearbetar stora mängder händelser och data med låg latens och hög tillförlitlighet.</span><span class="sxs-lookup"><span data-stu-id="263f8-104">Azure Event Hubs is a scalable event processing service that ingests and processes large volumes of events and data, with low latency and high reliability.</span></span> <span data-ttu-id="263f8-105">Se [vad är Händelsehubbar?](event-hubs-what-is-event-hubs.md) för en översikt över tjänsten.</span><span class="sxs-lookup"><span data-stu-id="263f8-105">See [What is Event Hubs?](event-hubs-what-is-event-hubs.md) for a high-level overview of the service.</span></span>

<span data-ttu-id="263f8-106">Den här artikeln bygger på informationen i den [översikt](event-hubs-what-is-event-hubs.md), och ger information om Händelsehubbar komponenter och funktioner i technical och implementering.</span><span class="sxs-lookup"><span data-stu-id="263f8-106">This article builds on the information in the [overview](event-hubs-what-is-event-hubs.md), and provides technical and implementation details about Event Hubs components and features.</span></span>

## <a name="event-publishers"></a><span data-ttu-id="263f8-107">Händelseutfärdare</span><span class="sxs-lookup"><span data-stu-id="263f8-107">Event publishers</span></span>

<span data-ttu-id="263f8-108">En enhet som skickar data till en händelsehubb är en händelse tillverkare eller *händelseutfärdare*.</span><span class="sxs-lookup"><span data-stu-id="263f8-108">Any entity that sends data to an event hub is an event producer, or *event publisher*.</span></span> <span data-ttu-id="263f8-109">Händelseutfärdare kan utfärda händelser med hjälp av HTTPS eller AMQP 1.0.</span><span class="sxs-lookup"><span data-stu-id="263f8-109">Event publishers can publish events using HTTPS or AMQP 1.0.</span></span> <span data-ttu-id="263f8-110">Händelseutfärdare använder en SAS-token (signatur för delad åtkomst) för att identifiera sig mot en händelsehubb och kan ha en unik identitet eller använda en gemensam SAS-token.</span><span class="sxs-lookup"><span data-stu-id="263f8-110">Event publishers use a Shared Access Signature (SAS) token to identify themselves to an event hub, and can have a unique identity, or use a common SAS token.</span></span>

### <a name="publishing-an-event"></a><span data-ttu-id="263f8-111">Publicera en händelse</span><span class="sxs-lookup"><span data-stu-id="263f8-111">Publishing an event</span></span>

<span data-ttu-id="263f8-112">Du kan publicera en händelse via AMQP 1.0 eller HTTPS.</span><span class="sxs-lookup"><span data-stu-id="263f8-112">You can publish an event via AMQP 1.0 or HTTPS.</span></span> <span data-ttu-id="263f8-113">Händelsehubbar ger [klientbibliotek och klasser](event-hubs-dotnet-framework-api-overview.md) för att publicera händelser till en händelsehubb från .NET-klienter.</span><span class="sxs-lookup"><span data-stu-id="263f8-113">Event Hubs provides [client libraries and classes](event-hubs-dotnet-framework-api-overview.md) for publishing events to an event hub from .NET clients.</span></span> <span data-ttu-id="263f8-114">För andra körningar och plattformar kan du använda alla AMQP 1.0-klienter, t.ex. [Apache Qpid](http://qpid.apache.org/).</span><span class="sxs-lookup"><span data-stu-id="263f8-114">For other runtimes and platforms, you can use any AMQP 1.0 client, such as [Apache Qpid](http://qpid.apache.org/).</span></span> <span data-ttu-id="263f8-115">Du kan publicera händelser individuellt eller i batchar.</span><span class="sxs-lookup"><span data-stu-id="263f8-115">You can publish events individually, or batched.</span></span> <span data-ttu-id="263f8-116">En enstaka publikation (en instans av händelsedata ) har en begränsning på 256 KB, oavsett om det är en enskild händelse eller en batch.</span><span class="sxs-lookup"><span data-stu-id="263f8-116">A single publication (event data instance) has a limit of 256 KB, regardless of whether it is a single event or a batch.</span></span> <span data-ttu-id="263f8-117">Publicera händelser som är större än tröskelvärdet resultatet i ett fel.</span><span class="sxs-lookup"><span data-stu-id="263f8-117">Publishing events larger than this threshold results in an error.</span></span> <span data-ttu-id="263f8-118">Bästa metoden för en utfärdare är att vara ovetande om partitioner i händelsehubben och att bara ange en *partitionsnyckel* (presenteras i nästa avsnitt) eller sin identitet via sin SAS-token.</span><span class="sxs-lookup"><span data-stu-id="263f8-118">It is a best practice for publishers to be unaware of partitions within the event hub and to only specify a *partition key* (introduced in the next section), or their identity via their SAS token.</span></span>

<span data-ttu-id="263f8-119">Valet att använda AMQP eller HTTPS är specifikt för användningsscenariot.</span><span class="sxs-lookup"><span data-stu-id="263f8-119">The choice to use AMQP or HTTPS is specific to the usage scenario.</span></span> <span data-ttu-id="263f8-120">AMQP kräver en beständig dubbelriktad socket och dessutom säkerhet på transportnivå (TLS) eller SSL/TLS.</span><span class="sxs-lookup"><span data-stu-id="263f8-120">AMQP requires the establishment of a persistent bidirectional socket in addition to transport level security (TLS) or SSL/TLS.</span></span> <span data-ttu-id="263f8-121">AMQP har högre nätverkskostnader när sessionen initieras, men HTTPS kräver ytterligare SSL-kostnader för varje begäran.</span><span class="sxs-lookup"><span data-stu-id="263f8-121">AMQP has higher network costs when initializing the session, however HTTPS requires additional SSL overhead for every request.</span></span> <span data-ttu-id="263f8-122">AMQP har högre prestanda för frekventa utfärdare.</span><span class="sxs-lookup"><span data-stu-id="263f8-122">AMQP has higher performance for frequent publishers.</span></span>

![Händelsehubbar](./media/event-hubs-features/partition_keys.png)

<span data-ttu-id="263f8-124">Event Hubs garanterar att alla händelser som delar samma partitionsnyckelvärde levereras i rätt ordning och till samma partition.</span><span class="sxs-lookup"><span data-stu-id="263f8-124">Event Hubs ensures that all events sharing a partition key value are delivered in order, and to the same partition.</span></span> <span data-ttu-id="263f8-125">Om partitionsnycklar används med utfärdarprinciper måste utfärdarens identitet och partitionsnyckelns värde matcha varandra.</span><span class="sxs-lookup"><span data-stu-id="263f8-125">If partition keys are used with publisher policies, then the identity of the publisher and the value of the partition key must match.</span></span> <span data-ttu-id="263f8-126">Annars uppstår ett fel.</span><span class="sxs-lookup"><span data-stu-id="263f8-126">Otherwise, an error occurs.</span></span>

### <a name="publisher-policy"></a><span data-ttu-id="263f8-127">Utgivarprincip</span><span class="sxs-lookup"><span data-stu-id="263f8-127">Publisher policy</span></span>

<span data-ttu-id="263f8-128">Med händelsehubbar får du granulär kontroll över utgivare via *utgivarprinciper*.</span><span class="sxs-lookup"><span data-stu-id="263f8-128">Event Hubs enables granular control over event publishers through *publisher policies*.</span></span> <span data-ttu-id="263f8-129">Utfärdarprinciper är körningsfunktioner som utformats för att ge stöd för ett stort antal oberoende utfärdare.</span><span class="sxs-lookup"><span data-stu-id="263f8-129">Publisher policies are run-time features designed to facilitate large numbers of independent event publishers.</span></span> <span data-ttu-id="263f8-130">Med utgivarprinciper använder varje utgivare sin egen unika identifierare vid publicering av händelser på en händelsehubb med hjälp av följande mekanism:</span><span class="sxs-lookup"><span data-stu-id="263f8-130">With publisher policies, each publisher uses its own unique identifier when publishing events to an event hub, using the following mechanism:</span></span>

```
//[my namespace].servicebus.windows.net/[event hub name]/publishers/[my publisher name]
```

<span data-ttu-id="263f8-131">Du behöver inte skapa utgivarnamnen i förväg, men de måste matcha SAS-token som används när du publicerar en händelse för att garantera oberoende utgivaridentiteter.</span><span class="sxs-lookup"><span data-stu-id="263f8-131">You don't have to create publisher names ahead of time, but they must match the SAS token used when publishing an event, in order to ensure independent publisher identities.</span></span> <span data-ttu-id="263f8-132">När du använder utgivarprinciper ställs **PartitionKey**-värdet in på utgivarens namn.</span><span class="sxs-lookup"><span data-stu-id="263f8-132">When using publisher policies, the **PartitionKey** value is set to the publisher name.</span></span> <span data-ttu-id="263f8-133">Dessa värden måste matcha för att fungera korrekt.</span><span class="sxs-lookup"><span data-stu-id="263f8-133">To work properly, these values must match.</span></span>

## <a name="capture"></a><span data-ttu-id="263f8-134">Capture</span><span class="sxs-lookup"><span data-stu-id="263f8-134">Capture</span></span>

<span data-ttu-id="263f8-135">[Event Hubs avbilda](event-hubs-capture-overview.md) gör att du kan avbilda strömmande data i Händelsehubbar och spara den på ditt val av en Blob storage-konto eller ett tjänstkonto för Azure Data Lake automatiskt.</span><span class="sxs-lookup"><span data-stu-id="263f8-135">[Event Hubs Capture](event-hubs-capture-overview.md) enables you to automatically capture the streaming data in Event Hubs and save it to your choice of either a Blob storage account, or an Azure Data Lake Service account.</span></span> <span data-ttu-id="263f8-136">Du kan aktivera avbildning från Azure-portalen och ange minsta storlek och tidsfönstret för avbildningen.</span><span class="sxs-lookup"><span data-stu-id="263f8-136">You can enable Capture from the Azure portal, and specify a minimum size and time window to perform the capture.</span></span> <span data-ttu-id="263f8-137">Med Event Hubs avbilda kan ange du egna Azure Blob Storage-konto och en behållare eller ett Azure Data Lake Service-kontot som används för att lagra den insamlade data.</span><span class="sxs-lookup"><span data-stu-id="263f8-137">Using Event Hubs Capture, you specify your own Azure Blob Storage account and container, or Azure Data Lake Service account, which is used to store the captured data.</span></span> <span data-ttu-id="263f8-138">Insamlade data skrivs i Apache Avro-formatet.</span><span class="sxs-lookup"><span data-stu-id="263f8-138">Captured data is written in the Apache Avro format.</span></span>

## <a name="partitions"></a><span data-ttu-id="263f8-139">Partitioner</span><span class="sxs-lookup"><span data-stu-id="263f8-139">Partitions</span></span>

<span data-ttu-id="263f8-140">Event Hubs tillhandahåller meddelandeströmning via ett partitionerat konsumentmönster där varje konsument endast läser en specifik delmängd, eller partition, av meddelandeströmmen.</span><span class="sxs-lookup"><span data-stu-id="263f8-140">Event Hubs provides message streaming through a partitioned consumer pattern in which each consumer only reads a specific subset, or partition, of the message stream.</span></span> <span data-ttu-id="263f8-141">Det här mönstret gör det möjligt att skala horisontellt för händelsebearbetning och tillhandahåller andra strömfokuserade funktioner som inte är tillgängliga i köer och ämnen.</span><span class="sxs-lookup"><span data-stu-id="263f8-141">This pattern enables horizontal scale for event processing and provides other stream-focused features that are unavailable in queues and topics.</span></span>

<span data-ttu-id="263f8-142">En partition är en ordnad sekvens av händelser som hålls kvar i en händelsehubb.</span><span class="sxs-lookup"><span data-stu-id="263f8-142">A partition is an ordered sequence of events that is held in an event hub.</span></span> <span data-ttu-id="263f8-143">När nya händelser anländer läggs de till i slutet av denna sekvens.</span><span class="sxs-lookup"><span data-stu-id="263f8-143">As newer events arrive, they are added to the end of this sequence.</span></span> <span data-ttu-id="263f8-144">En partition kan betraktas som en ”genomförandelogg”.</span><span class="sxs-lookup"><span data-stu-id="263f8-144">A partition can be thought of as a "commit log."</span></span>

![Händelsehubbar](./media/event-hubs-features/partition.png)

<span data-ttu-id="263f8-146">Händelsehubbar behåller data under en konfigurerad kvarhållningstid som gäller för alla partitioner i hubben.</span><span class="sxs-lookup"><span data-stu-id="263f8-146">Event Hubs retains data for a configured retention time that applies across all partitions in the event hub.</span></span> <span data-ttu-id="263f8-147">Händelser löper ut enligt ett tidsschema. Det går inte att ta bort dem.</span><span class="sxs-lookup"><span data-stu-id="263f8-147">Events expire on a time basis; you cannot explicitly delete them.</span></span> <span data-ttu-id="263f8-148">Eftersom partitioner är oberoende av varandra och innehåller sina egna sekvenser med data, växer de ofta i olika takt.</span><span class="sxs-lookup"><span data-stu-id="263f8-148">Because partitions are independent and contain their own sequence of data, they often grow at different rates.</span></span>

![Händelsehubbar](./media/event-hubs-features/multiple_partitions.png)

<span data-ttu-id="263f8-150">Antalet partitioner anges när de skapas och måste vara mellan 2 och 32.</span><span class="sxs-lookup"><span data-stu-id="263f8-150">The number of partitions is specified at creation and must be between 2 and 32.</span></span> <span data-ttu-id="263f8-151">Eftersom det inte går att ändra antalet partitioner bör du tänka på hur många partitioner som kommer att behövas på längre sikt när du anger antalet partitioner.</span><span class="sxs-lookup"><span data-stu-id="263f8-151">The partition count is not changeable, so you should consider long-term scale when setting partition count.</span></span> <span data-ttu-id="263f8-152">Partitioner är en mekanism för organisering av data som har att göra med vilken underordnad parallellitet som krävs i de program som används.</span><span class="sxs-lookup"><span data-stu-id="263f8-152">Partitions are a data organization mechanism that relates to the downstream parallelism required in consuming applications.</span></span> <span data-ttu-id="263f8-153">Antalet partitioner i en händelsehubb är direkt kopplat till antalet samtidiga läsare som du förväntar dig.</span><span class="sxs-lookup"><span data-stu-id="263f8-153">The number of partitions in an event hub directly relates to the number of concurrent readers you expect to have.</span></span> <span data-ttu-id="263f8-154">Du kan öka antalet partitioner till mer än 32 genom att kontakta Event Hubs-teamet.</span><span class="sxs-lookup"><span data-stu-id="263f8-154">You can increase the number of partitions beyond 32 by contacting the Event Hubs team.</span></span>

<span data-ttu-id="263f8-155">Du rekommenderas att inte skicka direkt till en partition medan partitioner kan identifieras och kan skickas till direkt.</span><span class="sxs-lookup"><span data-stu-id="263f8-155">While partitions are identifiable and can be sent to directly, sending directly to a partition is not recommended.</span></span> <span data-ttu-id="263f8-156">Du kan i stället använda konstruktioner på högre nivå som beskrivs i avsnitten [Händelseutfärdare](#event-publishers) och [Kapacitet](#capacity).</span><span class="sxs-lookup"><span data-stu-id="263f8-156">Instead, you can use higher level constructs introduced in the [Event publisher](#event-publishers) and [Capacity](#capacity) sections.</span></span> 

<span data-ttu-id="263f8-157">Partitioner är fyllda med en sekvens av händelsedata som innehåller själva händelsen, en användardefinierad egenskapsuppsättning och metadata, till exempel dess offset, eller position, i partitionen och dess nummer i datasekvensströmmen.</span><span class="sxs-lookup"><span data-stu-id="263f8-157">Partitions are filled with a sequence of event data which contains the body of the event, a user-defined property bag, and metadata such as its offset in the partition and its number in the stream sequence.</span></span>

<span data-ttu-id="263f8-158">Mer information om partitioner och avvägningen mellan tillgänglighet och tillförlitlighet finns i [Programmeringsguide för Event Hubs](event-hubs-programming-guide.md#partition-key) och i artikeln om [tillgänglighet och konsekvens i Event Hubs](event-hubs-availability-and-consistency.md).</span><span class="sxs-lookup"><span data-stu-id="263f8-158">For more information about partitions and the trade-off between availability and reliability, see the [Event Hubs programming guide](event-hubs-programming-guide.md#partition-key) and the [Availability and consistency in Event Hubs](event-hubs-availability-and-consistency.md) article.</span></span>

### <a name="partition-key"></a><span data-ttu-id="263f8-159">Partitionsnyckeln</span><span class="sxs-lookup"><span data-stu-id="263f8-159">Partition key</span></span>

<span data-ttu-id="263f8-160">Du kan organisera data med hjälp av en [partitionsnyckel](event-hubs-programming-guide.md#partition-key) som mappar inkommande händelsedata till specifika partitioner.</span><span class="sxs-lookup"><span data-stu-id="263f8-160">You can use a [partition key](event-hubs-programming-guide.md#partition-key) to map incoming event data into specific partitions for the purpose of data organization.</span></span> <span data-ttu-id="263f8-161">Partitionsnyckeln är ett värde som avsändaren anger och som skickas till en händelsehubb.</span><span class="sxs-lookup"><span data-stu-id="263f8-161">The partition key is a sender-supplied value passed into an event hub.</span></span> <span data-ttu-id="263f8-162">Den bearbetas via en statisk hash-funktion som skapar partitionstilldelningen.</span><span class="sxs-lookup"><span data-stu-id="263f8-162">It is processed through a static hashing function, which creates the partition assignment.</span></span> <span data-ttu-id="263f8-163">Om du inte anger en partitionsnyckel när du publicerar en händelse, används en tilldelning enligt resursallokeringsmodellen.</span><span class="sxs-lookup"><span data-stu-id="263f8-163">If you don't specify a partition key when publishing an event, a round-robin assignment is used.</span></span>

<span data-ttu-id="263f8-164">Händelseutfärdaren känner bara till sin partitionsnyckel, inte den partition som händelserna publiceras till.</span><span class="sxs-lookup"><span data-stu-id="263f8-164">The event publisher is only aware of its partition key, not the partition to which the events are published.</span></span> <span data-ttu-id="263f8-165">Frikopplingen av nyckeln och partitionen gör att avsändaren inte behöver känna till så mycket om bearbetningen nedströms.</span><span class="sxs-lookup"><span data-stu-id="263f8-165">This decoupling of key and partition insulates the sender from needing to know too much about the downstream processing.</span></span> <span data-ttu-id="263f8-166">En identitet per enhet eller en användarunik identitet utgör en bra partitionsnyckel, men andra attribut, till exempel geografi, kan också användas för att gruppera relaterade händelser i en enda partition.</span><span class="sxs-lookup"><span data-stu-id="263f8-166">A per-device or user unique identity makes a good partition key, but other attributes such as geography can also be used to group related events into a single partition.</span></span>

## <a name="sas-tokens"></a><span data-ttu-id="263f8-167">SAS-token</span><span class="sxs-lookup"><span data-stu-id="263f8-167">SAS tokens</span></span>

<span data-ttu-id="263f8-168">Event Hubs använder *signaturer för delad åtkomst* (SAS, Shared Access Signatures) som är tillgängliga på namnområdes- och händelsehubbnivå.</span><span class="sxs-lookup"><span data-stu-id="263f8-168">Event Hubs uses *Shared Access Signatures*, which are available at the namespace and event hub level.</span></span> <span data-ttu-id="263f8-169">En SAS-token genereras från en SAS-nyckel och är en SHA-hash för en URL som kodats i ett specifikt format.</span><span class="sxs-lookup"><span data-stu-id="263f8-169">A SAS token is generated from a SAS key and is an SHA hash of a URL, encoded in a specific format.</span></span> <span data-ttu-id="263f8-170">Med hjälp av namnet på nyckeln (principen) och token kan Event Hubs återgenerera hash-värdet och därmed autentisera avsändaren.</span><span class="sxs-lookup"><span data-stu-id="263f8-170">Using the name of the key (policy) and the token, Event Hubs can regenerate the hash and thus authenticate the sender.</span></span> <span data-ttu-id="263f8-171">SAS-token för händelseutfärdare skapas vanligtvis med enbart behörighet för att **skicka** i en specifik händelsehubb.</span><span class="sxs-lookup"><span data-stu-id="263f8-171">Normally, SAS tokens for event publishers are created with only **send** privileges on a specific event hub.</span></span> <span data-ttu-id="263f8-172">Den här URL-mekanismen med SAS-token är den grund för utfärdaridentifiering som presenterades i principen för utfärdare.</span><span class="sxs-lookup"><span data-stu-id="263f8-172">This SAS token URL mechanism is the basis for publisher identification introduced in the publisher policy.</span></span> <span data-ttu-id="263f8-173">Mer information om hur du arbetar med SAS finns i [autentisering med signatur för delad åtkomst med Service Bus](../service-bus-messaging/service-bus-sas.md).</span><span class="sxs-lookup"><span data-stu-id="263f8-173">For more information about working with SAS, see [Shared Access Signature Authentication with Service Bus](../service-bus-messaging/service-bus-sas.md).</span></span>

## <a name="event-consumers"></a><span data-ttu-id="263f8-174">Händelsekonsumenter</span><span class="sxs-lookup"><span data-stu-id="263f8-174">Event consumers</span></span>

<span data-ttu-id="263f8-175">En enhet som läser händelsedata från en händelsehubb är en *händelsekonsument*.</span><span class="sxs-lookup"><span data-stu-id="263f8-175">Any entity that reads event data from an event hub is an *event consumer*.</span></span> <span data-ttu-id="263f8-176">Alla Event Hubs-konsumenter ansluter via AMQP 1.0-sessionen och händelser levereras via sessionen när de blir tillgängliga.</span><span class="sxs-lookup"><span data-stu-id="263f8-176">All Event Hubs consumers connect via the AMQP 1.0 session and events are delivered through the session as they become available.</span></span> <span data-ttu-id="263f8-177">Klienten behöver inte söka efter datatillgänglighet.</span><span class="sxs-lookup"><span data-stu-id="263f8-177">The client does not need to poll for data availability.</span></span>

### <a name="consumer-groups"></a><span data-ttu-id="263f8-178">Konsumentgrupper</span><span class="sxs-lookup"><span data-stu-id="263f8-178">Consumer groups</span></span>

<span data-ttu-id="263f8-179">Publicerings-/prenumerationsmekanismen för Event Hubs aktiveras via *konsumentgrupper*.</span><span class="sxs-lookup"><span data-stu-id="263f8-179">The publish/subscribe mechanism of Event Hubs is enabled through *consumer groups*.</span></span> <span data-ttu-id="263f8-180">En konsumentgrupp är en vy (tillstånd, position eller offset) av en hel händelsehubb.</span><span class="sxs-lookup"><span data-stu-id="263f8-180">A consumer group is a view (state, position, or offset) of an entire event hub.</span></span> <span data-ttu-id="263f8-181">Konsumentgrupper gör det möjligt för flera användningsprogram att vart och ett ha en separat vy över händelseströmmen och att oberoende läsa strömmen i egen takt och med sina egna offset.</span><span class="sxs-lookup"><span data-stu-id="263f8-181">Consumer groups enable multiple consuming applications to each have a separate view of the event stream, and to read the stream independently at their own pace and with their own offsets.</span></span>

<span data-ttu-id="263f8-182">Inom en arkitektur för strömbearbetning utgör varje nedströms program en konsumentgrupp.</span><span class="sxs-lookup"><span data-stu-id="263f8-182">In a stream processing architecture, each downstream application equates to a consumer group.</span></span> <span data-ttu-id="263f8-183">Om du vill skriva händelsedata till långsiktig lagring utgör programmet för att skriva data till lagring en konsumentgrupp.</span><span class="sxs-lookup"><span data-stu-id="263f8-183">If you want to write event data to long-term storage, then that storage writer application is a consumer group.</span></span> <span data-ttu-id="263f8-184">Komplex händelsebearbetning kan sedan utföras av en annan, separat konsumentgrupp.</span><span class="sxs-lookup"><span data-stu-id="263f8-184">Complex event processing can then be performed by another, separate consumer group.</span></span> <span data-ttu-id="263f8-185">Du får bara åtkomst till en partition via en konsumentgrupp.</span><span class="sxs-lookup"><span data-stu-id="263f8-185">You can only access partitions through a consumer group.</span></span> <span data-ttu-id="263f8-186">Det får finnas högst 5 läsare på en partition per konsumentgrupp; men **rekommenderas att det finns endast en aktiv mottagaren på en partition per konsumentgrupp**.</span><span class="sxs-lookup"><span data-stu-id="263f8-186">There can be at most 5 concurrent readers on a partition per consumer group; however **it is recommended that there is only one active receiver on a partition per consumer group**.</span></span> <span data-ttu-id="263f8-187">Det finns alltid en förinställd konsumentgrupp i en händelsehubb, och du kan skapa upp till 20 konsumentgrupper för en händelsehubb på standardnivå.</span><span class="sxs-lookup"><span data-stu-id="263f8-187">There is always a default consumer group in an event hub, and you can create up to 20 consumer groups for a Standard tier event hub.</span></span>

<span data-ttu-id="263f8-188">Följande är exempel på URI-konventionen för konsumentgrupper:</span><span class="sxs-lookup"><span data-stu-id="263f8-188">The following are examples of the consumer group URI convention:</span></span>

```http
//[my namespace].servicebus.windows.net/[event hub name]/[Consumer Group #1]
//[my namespace].servicebus.windows.net/[event hub name]/[Consumer Group #2]
```

<span data-ttu-id="263f8-189">Följande bild visar strömhanteringsarkitekturen för händelsehubbar:</span><span class="sxs-lookup"><span data-stu-id="263f8-189">The following figure shows the Event Hubs stream processing architecture:</span></span>

![Händelsehubbar](./media/event-hubs-features/event_hubs_architecture.png)

### <a name="stream-offsets"></a><span data-ttu-id="263f8-191">Offsets för strömmar</span><span class="sxs-lookup"><span data-stu-id="263f8-191">Stream offsets</span></span>

<span data-ttu-id="263f8-192">En *offset* är en händelses position inom en partition.</span><span class="sxs-lookup"><span data-stu-id="263f8-192">An *offset* is the position of an event within a partition.</span></span> <span data-ttu-id="263f8-193">Föreställ dig en offset som en markör på klientsidan.</span><span class="sxs-lookup"><span data-stu-id="263f8-193">You can think of an offset as a client-side cursor.</span></span> <span data-ttu-id="263f8-194">Denna offset är en byte-numrering av händelsen.</span><span class="sxs-lookup"><span data-stu-id="263f8-194">The offset is a byte numbering of the event.</span></span> <span data-ttu-id="263f8-195">Med den så kan en händelsekonsument (läsare) ange vid vilken punkt i händelseströmmen som läsningen ska starta.</span><span class="sxs-lookup"><span data-stu-id="263f8-195">This offset enables an event consumer (reader) to specify a point in the event stream from which they want to begin reading events.</span></span> <span data-ttu-id="263f8-196">Du kan ange offseten som en tidsstämpel eller ett offset-värde.</span><span class="sxs-lookup"><span data-stu-id="263f8-196">You can specify the offset as a timestamp or as an offset value.</span></span> <span data-ttu-id="263f8-197">Konsumenterna ansvarar för att lagra sina egna offset-värden utanför händelsehubbtjänsten.</span><span class="sxs-lookup"><span data-stu-id="263f8-197">Consumers are responsible for storing their own offset values outside of the Event Hubs service.</span></span> <span data-ttu-id="263f8-198">Inom en partition innehåller varje händelse en offset.</span><span class="sxs-lookup"><span data-stu-id="263f8-198">Within a partition, each event includes an offset.</span></span>

![Händelsehubbar](./media/event-hubs-features/partition_offset.png)

### <a name="checkpointing"></a><span data-ttu-id="263f8-200">Kontrollpunkter</span><span class="sxs-lookup"><span data-stu-id="263f8-200">Checkpointing</span></span>

<span data-ttu-id="263f8-201">*Att skapa kontrollpunkter* är en process genom vilken läsare markerar eller sparar sin position inom en händelsesekvens i en partition.</span><span class="sxs-lookup"><span data-stu-id="263f8-201">*Checkpointing* is a process by which readers mark or commit their position within a partition event sequence.</span></span> <span data-ttu-id="263f8-202">Att skapa kontrollpunkter är konsumentens ansvar och görs för varje partition i en konsumentgrupp.</span><span class="sxs-lookup"><span data-stu-id="263f8-202">Checkpointing is the responsibility of the consumer and occurs on a per-partition basis within a consumer group.</span></span> <span data-ttu-id="263f8-203">Det här ansvaret innebär att varje läsare i partitionen måste hålla reda på sin nuvarande position i händelseströmmen för varje konsumentgrupp. Läsaren kan sedan informera tjänsten när de anser att dataströmmen är klar.</span><span class="sxs-lookup"><span data-stu-id="263f8-203">This responsibility means that for each consumer group, each partition reader must keep track of its current position in the event stream, and can inform the service when it considers the data stream complete.</span></span>

<span data-ttu-id="263f8-204">Om en läsare kopplar från en partition och den sedan återansluts kan han börja läsa vid den kontrollpunkt som tidigare skickades in av den senaste läsaren i den aktuella partitionen inom just den konsumentgruppen.</span><span class="sxs-lookup"><span data-stu-id="263f8-204">If a reader disconnects from a partition, when it reconnects it begins reading at the checkpoint that was previously submitted by the last reader of that partition in that consumer group.</span></span> <span data-ttu-id="263f8-205">När läsaren ansluter skickar partitionen denna offset till händelsehubben för att ange den plats där läsaren ska börja läsa.</span><span class="sxs-lookup"><span data-stu-id="263f8-205">When the reader connects, it passes this offset to the event hub to specify the location at which to start reading.</span></span> <span data-ttu-id="263f8-206">På så sätt kan du använda kontrollpunkter både till att markera händelser som ”klara” i underordnade program och som skydd i händelse av en redundansväxling mellan läsare som körs på olika datorer.</span><span class="sxs-lookup"><span data-stu-id="263f8-206">In this way, you can use checkpointing to both mark events as "complete" by downstream applications, and to provide resiliency if a failover between readers running on different machines occurs.</span></span> <span data-ttu-id="263f8-207">Du kan återgå till äldre data genom att ange en lägre offset i den här kontrollpunktsprocessen.</span><span class="sxs-lookup"><span data-stu-id="263f8-207">It is possible to return to older data by specifying a lower offset from this checkpointing process.</span></span> <span data-ttu-id="263f8-208">Den här mekanismen möjliggör både återhämtning vid redundansväxlingar och återuppspelning av händelseströmmar.</span><span class="sxs-lookup"><span data-stu-id="263f8-208">Through this mechanism, checkpointing enables both failover resiliency and event stream replay.</span></span>

### <a name="common-consumer-tasks"></a><span data-ttu-id="263f8-209">Vanliga konsumentuppgifter</span><span class="sxs-lookup"><span data-stu-id="263f8-209">Common consumer tasks</span></span>

<span data-ttu-id="263f8-210">Alla konsumenter i Händelsehubbar ansluter via en AMQP 1.0-session, en tillståndsmedveten dubbelriktad kommunikationskanal.</span><span class="sxs-lookup"><span data-stu-id="263f8-210">All Event Hubs consumers connect via an AMQP 1.0 session, a state-aware bidirectional communication channel.</span></span> <span data-ttu-id="263f8-211">Varje partition har en AMQP 1.0-session som gör det lättare att flytta händelser som åtskiljs av partitioner.</span><span class="sxs-lookup"><span data-stu-id="263f8-211">Each partition has an AMQP 1.0 session that facilitates the transport of events segregated by partition.</span></span>

#### <a name="connect-to-a-partition"></a><span data-ttu-id="263f8-212">Ansluta till en partition</span><span class="sxs-lookup"><span data-stu-id="263f8-212">Connect to a partition</span></span>

<span data-ttu-id="263f8-213">När du ansluter till partitioner är det vanligt att använda en leasingmekanism till att samordna läsaranslutningar till specifika partitioner.</span><span class="sxs-lookup"><span data-stu-id="263f8-213">When connecting to partitions, it is common practice to use a leasing mechanism to coordinate reader connections to specific partitions.</span></span> <span data-ttu-id="263f8-214">På det sättet är det möjligt för varje partition i en konsumentgrupp att bara ha en aktiv läsare.</span><span class="sxs-lookup"><span data-stu-id="263f8-214">This way, it is possible for every partition in a consumer group to have only one active reader.</span></span> <span data-ttu-id="263f8-215">Hanteringen av kontrollpunkter, leasing och läsare blir enklare med klassen [EventProcessorHost](/dotnet/api/microsoft.servicebus.messaging.eventprocessorhost) för .NET-klienter.</span><span class="sxs-lookup"><span data-stu-id="263f8-215">Checkpointing, leasing, and managing readers are simplified by using the [EventProcessorHost](/dotnet/api/microsoft.servicebus.messaging.eventprocessorhost) class for .NET clients.</span></span> <span data-ttu-id="263f8-216">Värden för händelsebearbetning är en smart konsumentagent.</span><span class="sxs-lookup"><span data-stu-id="263f8-216">The Event Processor Host is an intelligent consumer agent.</span></span>

#### <a name="read-events"></a><span data-ttu-id="263f8-217">Läsa händelser</span><span class="sxs-lookup"><span data-stu-id="263f8-217">Read events</span></span>

<span data-ttu-id="263f8-218">När en AMQP 1.0-session och -länk har öppnats för en specifik partition, levereras händelser till AMQP 1.0-klienten av händelsehubbtjänsten.</span><span class="sxs-lookup"><span data-stu-id="263f8-218">After an AMQP 1.0 session and link is opened for a specific partition, events are delivered to the AMQP 1.0 client by the Event Hubs service.</span></span> <span data-ttu-id="263f8-219">Den här leveransmekanismen gör det möjligt med ett högre genomflöde och kortare svarstid än i pull-baserade mekanismer som t.ex. HTTP GET.</span><span class="sxs-lookup"><span data-stu-id="263f8-219">This delivery mechanism enables higher throughput and lower latency than pull-based mechanisms such as HTTP GET.</span></span> <span data-ttu-id="263f8-220">När händelser skickas till klienten innehåller varje instans av händelsedata viktiga metadata, till exempel offset- och sekvensnumret som används för att göra det lättare att skapa kontrollpunkter i händelsesekvensen.</span><span class="sxs-lookup"><span data-stu-id="263f8-220">As events are sent to the client, each event data instance contains important metadata such as the offset and sequence number that are used to facilitate checkpointing on the event sequence.</span></span>

<span data-ttu-id="263f8-221">Händelsedata:</span><span class="sxs-lookup"><span data-stu-id="263f8-221">Event data:</span></span>
* <span data-ttu-id="263f8-222">Offset</span><span class="sxs-lookup"><span data-stu-id="263f8-222">Offset</span></span>
* <span data-ttu-id="263f8-223">Sekvensnummer</span><span class="sxs-lookup"><span data-stu-id="263f8-223">Sequence number</span></span>
* <span data-ttu-id="263f8-224">Innehåll</span><span class="sxs-lookup"><span data-stu-id="263f8-224">Body</span></span>
* <span data-ttu-id="263f8-225">Användaregenskaper</span><span class="sxs-lookup"><span data-stu-id="263f8-225">User properties</span></span>
* <span data-ttu-id="263f8-226">Systemegenskaper</span><span class="sxs-lookup"><span data-stu-id="263f8-226">System properties</span></span>

<span data-ttu-id="263f8-227">Det är ditt ansvar att hantera positionen (offset).</span><span class="sxs-lookup"><span data-stu-id="263f8-227">It is your responsibility to manage the offset.</span></span>

## <a name="capacity"></a><span data-ttu-id="263f8-228">Kapacitet</span><span class="sxs-lookup"><span data-stu-id="263f8-228">Capacity</span></span>

<span data-ttu-id="263f8-229">Event Hubs har en mycket skalbar parallell arkitektur och det finns flera viktiga faktorer att tänka på när du ändrar storlek och skala.</span><span class="sxs-lookup"><span data-stu-id="263f8-229">Event Hubs has a highly scalable parallel architecture and there are several key factors to consider when sizing and scaling.</span></span>

### <a name="throughput-units"></a><span data-ttu-id="263f8-230">Genomflödesenheter</span><span class="sxs-lookup"><span data-stu-id="263f8-230">Throughput units</span></span>

<span data-ttu-id="263f8-231">Genomflödeskapaciteten i Event Hubs styrs av *genomflödesenheter*.</span><span class="sxs-lookup"><span data-stu-id="263f8-231">The throughput capacity of Event Hubs is controlled by *throughput units*.</span></span> <span data-ttu-id="263f8-232">Genomflödesenheter är färdiga kapacitetsenheter.</span><span class="sxs-lookup"><span data-stu-id="263f8-232">Throughput units are pre-purchased units of capacity.</span></span> <span data-ttu-id="263f8-233">En dataflödesenhet har följande kapacitet:</span><span class="sxs-lookup"><span data-stu-id="263f8-233">A single throughput unit includes the following capacity:</span></span>

* <span data-ttu-id="263f8-234">Ingress (inkommande trafik): Upp till 1 MB per sekund eller 1 000 händelser per sekund (beroende på vilket som inträffar först)</span><span class="sxs-lookup"><span data-stu-id="263f8-234">Ingress: Up to 1 MB per second or 1000 events per second (whichever comes first)</span></span>
* <span data-ttu-id="263f8-235">Egress (utgående trafik): Upp till 2 MB per sekund</span><span class="sxs-lookup"><span data-stu-id="263f8-235">Egress: Up to 2 MB per second</span></span>

<span data-ttu-id="263f8-236">Utöver kapaciteten för köpta genomflödesenheter är den inkommande trafiken begränsad och en [ServerBusyException](/dotnet/api/microsoft.servicebus.messaging.serverbusyexception) returneras.</span><span class="sxs-lookup"><span data-stu-id="263f8-236">Beyond the capacity of the purchased throughput units, ingress is throttled and a [ServerBusyException](/dotnet/api/microsoft.servicebus.messaging.serverbusyexception) is returned.</span></span> <span data-ttu-id="263f8-237">Utgående trafik genererar inte begränsningsundantag, men är fortfarande begränsad till kapaciteten för de köpta genomflödesenheterna.</span><span class="sxs-lookup"><span data-stu-id="263f8-237">Egress does not produce throttling exceptions, but is still limited to the capacity of the purchased throughput units.</span></span> <span data-ttu-id="263f8-238">Om du får felmeddelanden om publiceringsfrekvensen eller om du förväntar dig större utgående trafik kontrollerar du hur många genomflödesenheter du har köpt för namnområdet.</span><span class="sxs-lookup"><span data-stu-id="263f8-238">If you receive publishing rate exceptions or are expecting to see higher egress, be sure to check how many throughput units you have purchased for the namespace.</span></span> <span data-ttu-id="263f8-239">Du kan hantera enheter på den **skala** bladet namnområden i den [Azure-portalen](https://portal.azure.com).</span><span class="sxs-lookup"><span data-stu-id="263f8-239">You can manage throughput units on the **Scale** blade of the namespaces in the [Azure portal](https://portal.azure.com).</span></span> <span data-ttu-id="263f8-240">Du kan också hantera enheter via programmering med hjälp av [Event Hubs API: er](event-hubs-api-overview.md).</span><span class="sxs-lookup"><span data-stu-id="263f8-240">You can also manage throughput units programmatically using the [Event Hubs APIs](event-hubs-api-overview.md).</span></span>

<span data-ttu-id="263f8-241">Genomflödesenheter debiteras per timme och köps i förväg.</span><span class="sxs-lookup"><span data-stu-id="263f8-241">Throughput units are billed per hour and are pre-purchased.</span></span> <span data-ttu-id="263f8-242">När de väl har köpts debiteras de för minst en timme.</span><span class="sxs-lookup"><span data-stu-id="263f8-242">Once purchased, throughput units are billed for a minimum of one hour.</span></span> <span data-ttu-id="263f8-243">Upp till 20 genomflödesenheter kan köpas för ett Event Hubs-namnområde och delas mellan alla Event Hubs i namnområdet.</span><span class="sxs-lookup"><span data-stu-id="263f8-243">Up to 20 throughput units can be purchased for an Event Hubs namespace and are shared across all Event Hubs in the namespace.</span></span>

<span data-ttu-id="263f8-244">Om du vill köpa fler genomflödesenheter i block om 20 upp till 100 genomflödesenheter kontaktar du Azure-supporten.</span><span class="sxs-lookup"><span data-stu-id="263f8-244">More throughput units can be purchased in blocks of 20, up to 100 throughput units, by contacting Azure support.</span></span> <span data-ttu-id="263f8-245">Utöver det kan du också köpa block med 100 genomflödesenheter.</span><span class="sxs-lookup"><span data-stu-id="263f8-245">Beyond that, you can also purchase blocks of 100 throughput units.</span></span>

<span data-ttu-id="263f8-246">Vi rekommenderar att du väga genomflödesenheter och partitioner för att uppnå bästa skala.</span><span class="sxs-lookup"><span data-stu-id="263f8-246">We recommend that you balance throughput units and partitions to achieve optimal scale.</span></span> <span data-ttu-id="263f8-247">En enstaka partition har en maximal skala på en genomflödesenhet.</span><span class="sxs-lookup"><span data-stu-id="263f8-247">A single partition has a maximum scale of one throughput unit.</span></span> <span data-ttu-id="263f8-248">Antalet dataflödesenheter ska vara mindre än eller lika med antalet partitioner i en händelsehubb.</span><span class="sxs-lookup"><span data-stu-id="263f8-248">The number of throughput units should be less than or equal to the number of partitions in an event hub.</span></span>

<span data-ttu-id="263f8-249">Detaljerad Händelsehubbar information om priser finns i [priser för Händelsehubbar](https://azure.microsoft.com/pricing/details/event-hubs/).</span><span class="sxs-lookup"><span data-stu-id="263f8-249">For detailed Event Hubs pricing information, see [Event Hubs pricing](https://azure.microsoft.com/pricing/details/event-hubs/).</span></span>

## <a name="next-steps"></a><span data-ttu-id="263f8-250">Nästa steg</span><span class="sxs-lookup"><span data-stu-id="263f8-250">Next steps</span></span>

<span data-ttu-id="263f8-251">Besök följande länkar för mer utförlig information om Event Hubs:</span><span class="sxs-lookup"><span data-stu-id="263f8-251">For more information about Event Hubs, visit the following links:</span></span>

* <span data-ttu-id="263f8-252">Kom igång med en [kurs om händelsehubbar][Event Hubs tutorial]</span><span class="sxs-lookup"><span data-stu-id="263f8-252">Get started with an [Event Hubs tutorial][Event Hubs tutorial]</span></span>
* [<span data-ttu-id="263f8-253">Programmeringsguide för Event Hubs</span><span class="sxs-lookup"><span data-stu-id="263f8-253">Event Hubs programming guide</span></span>](event-hubs-programming-guide.md)
* [<span data-ttu-id="263f8-254">Tillgänglighet och konsekvens i Event Hubs</span><span class="sxs-lookup"><span data-stu-id="263f8-254">Availability and consistency in Event Hubs</span></span>](event-hubs-availability-and-consistency.md)
* [<span data-ttu-id="263f8-255">Vanliga frågor och svar om Event Hubs</span><span class="sxs-lookup"><span data-stu-id="263f8-255">Event Hubs FAQ</span></span>](event-hubs-faq.md)
* <span data-ttu-id="263f8-256">[Event Hubs-exempel][]</span><span class="sxs-lookup"><span data-stu-id="263f8-256">[Event Hubs samples][]</span></span>

[Event Hubs tutorial]: event-hubs-dotnet-standard-getstarted-send.md
[Event Hubs-exempel]: https://github.com/Azure/azure-event-hubs/tree/master/samples

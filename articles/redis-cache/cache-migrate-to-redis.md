---
title: aaaMigrate Managed Cache Service program tooRedis - Azure | Microsoft Docs
description: "Lär dig hur toomigrate Managed Cache Service och cachelagring i Rollinstanser program tooAzure Redis-Cache"
services: redis-cache
documentationcenter: na
author: steved0x
manager: douge
editor: tysonn
ms.assetid: 041f077b-8c8e-4d7c-a3fc-89d334ed70d6
ms.service: cache
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: cache-redis
ms.workload: tbd
ms.date: 05/30/2017
ms.author: sdanie
ms.openlocfilehash: bd81722820acf0d2637828fbb6100c723aafeba5
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: sv-SE
ms.lasthandoff: 10/06/2017
---
# <a name="migrate-from-managed-cache-service-tooazure-redis-cache"></a><span data-ttu-id="a6729-103">Migrera från Managed Cache Service tooAzure Redis-Cache</span><span class="sxs-lookup"><span data-stu-id="a6729-103">Migrate from Managed Cache Service tooAzure Redis Cache</span></span>
<span data-ttu-id="a6729-104">Migrera dina program som använder Azure Managed Cache Service tooAzure Redis-Cache kan åstadkommas med minimala ändringar tooyour program, beroende på hello Managed Cache Service funktioner som används av tillämpningsprogrammet cachelagring.</span><span class="sxs-lookup"><span data-stu-id="a6729-104">Migrating your applications that use Azure Managed Cache Service tooAzure Redis Cache can be accomplished with minimal changes tooyour application, depending on hello Managed Cache Service features used by your caching application.</span></span> <span data-ttu-id="a6729-105">Medan hello API: er är inte exakt hello samma som de är liknande och en stor del av din befintliga kod som använder Managed Cache Service tooaccess en cache kan återanvändas med minimala ändringar.</span><span class="sxs-lookup"><span data-stu-id="a6729-105">While hello APIs are not exactly hello same they are similar, and much of your existing code that uses Managed Cache Service tooaccess a cache can be reused with minimal changes.</span></span> <span data-ttu-id="a6729-106">Det här avsnittet visar hur toomake hello nödvändig konfiguration och program ändras toomigrate din Managed Cache Service program toouse Azure Redis-Cache och visar hur några av hello funktionerna i Azure Redis-Cache kan vara används tooimplement hello funktioner en Managed Cache Service-cache.</span><span class="sxs-lookup"><span data-stu-id="a6729-106">This topic shows how toomake hello necessary configuration and application changes toomigrate your Managed Cache Service applications toouse Azure Redis Cache, and shows how some of hello features of Azure Redis Cache can be used tooimplement hello functionality of a Managed Cache Service cache.</span></span>

>[!NOTE]
><span data-ttu-id="a6729-107">Hanterade Cache-tjänst och cachelagring i Rollinstanser har [dragits tillbaka](https://azure.microsoft.com/blog/azure-managed-cache-and-in-role-cache-services-to-be-retired-on-11-30-2016/) 30 November 2016.</span><span class="sxs-lookup"><span data-stu-id="a6729-107">Managed Cache Service and In-Role Cache were [retired](https://azure.microsoft.com/blog/azure-managed-cache-and-in-role-cache-services-to-be-retired-on-11-30-2016/) November 30, 2016.</span></span> <span data-ttu-id="a6729-108">Om du har alla distributioner för cachelagring i Rollinstanser som du vill toomigrate tooAzure Redis-Cache kan följa du hello stegen i den här artikeln.</span><span class="sxs-lookup"><span data-stu-id="a6729-108">If you have any In-Role Cache deployments that you want toomigrate tooAzure Redis Cache, you can follow hello steps in this article.</span></span>

## <a name="migration-steps"></a><span data-ttu-id="a6729-109">Migreringssteg</span><span class="sxs-lookup"><span data-stu-id="a6729-109">Migration Steps</span></span>
<span data-ttu-id="a6729-110">hello följande steg är nödvändiga toomigrate en Managed Cache Service programmet toouse Azure Redis-Cache.</span><span class="sxs-lookup"><span data-stu-id="a6729-110">hello following steps are required toomigrate a Managed Cache Service application toouse Azure Redis Cache.</span></span>

* <span data-ttu-id="a6729-111">Mappa Managed Cache Service funktioner tooAzure Redis-Cache</span><span class="sxs-lookup"><span data-stu-id="a6729-111">Map Managed Cache Service features tooAzure Redis Cache</span></span>
* <span data-ttu-id="a6729-112">Välj ett erbjudande för Cache</span><span class="sxs-lookup"><span data-stu-id="a6729-112">Choose a Cache Offering</span></span>
* <span data-ttu-id="a6729-113">Skapa ett cacheminne</span><span class="sxs-lookup"><span data-stu-id="a6729-113">Create a Cache</span></span>
* <span data-ttu-id="a6729-114">Konfigurera hello Cache-klienter</span><span class="sxs-lookup"><span data-stu-id="a6729-114">Configure hello Cache Clients</span></span>
  * <span data-ttu-id="a6729-115">Ta bort hello Managed Cache Service Configuration</span><span class="sxs-lookup"><span data-stu-id="a6729-115">Remove hello Managed Cache Service Configuration</span></span>
  * <span data-ttu-id="a6729-116">Konfigurera en cacheklient som använder hello StackExchange.Redis NuGet-paketet</span><span class="sxs-lookup"><span data-stu-id="a6729-116">Configure a cache client using hello StackExchange.Redis NuGet Package</span></span>
* <span data-ttu-id="a6729-117">Migrera koden Managed Cache Service</span><span class="sxs-lookup"><span data-stu-id="a6729-117">Migrate Managed Cache Service code</span></span>
  * <span data-ttu-id="a6729-118">Ansluta toohello cacheminne med hjälp av hello ConnectionMultiplexer klass</span><span class="sxs-lookup"><span data-stu-id="a6729-118">Connect toohello cache using hello ConnectionMultiplexer class</span></span>
  * <span data-ttu-id="a6729-119">Åtkomst primitiva datatyper i hello cache</span><span class="sxs-lookup"><span data-stu-id="a6729-119">Access primitive data types in hello cache</span></span>
  * <span data-ttu-id="a6729-120">Arbeta med .NET-objekt i hello cache</span><span class="sxs-lookup"><span data-stu-id="a6729-120">Work with .NET objects in hello cache</span></span>
* <span data-ttu-id="a6729-121">Migrera sessionstillståndet ASP.NET och Utdatacachelagring tooAzure Redis-Cache</span><span class="sxs-lookup"><span data-stu-id="a6729-121">Migrate ASP.NET Session State and Output caching tooAzure Redis Cache</span></span> 

## <a name="map-managed-cache-service-features-tooazure-redis-cache"></a><span data-ttu-id="a6729-122">Mappa Managed Cache Service funktioner tooAzure Redis-Cache</span><span class="sxs-lookup"><span data-stu-id="a6729-122">Map Managed Cache Service features tooAzure Redis Cache</span></span>
<span data-ttu-id="a6729-123">Azure Managed Cache Service och Azure Redis-Cache är samma men implementerar en del av deras funktioner på olika sätt.</span><span class="sxs-lookup"><span data-stu-id="a6729-123">Azure Managed Cache Service and Azure Redis Cache are similar but implement some of their features in different ways.</span></span> <span data-ttu-id="a6729-124">Det här avsnittet beskrivs några av skillnaderna hello och vägledning om hur du implementerar hello funktionerna i Managed Cache Service i Azure Redis-Cache.</span><span class="sxs-lookup"><span data-stu-id="a6729-124">This section describes some of hello differences and provides guidance on implementing hello features of Managed Cache Service in Azure Redis Cache.</span></span>

| <span data-ttu-id="a6729-125">Funktionen för hanterade Cache Service</span><span class="sxs-lookup"><span data-stu-id="a6729-125">Managed Cache Service feature</span></span> | <span data-ttu-id="a6729-126">Stöd för hanterade Cache Service</span><span class="sxs-lookup"><span data-stu-id="a6729-126">Managed Cache Service support</span></span> | <span data-ttu-id="a6729-127">Stöd för Azure Redis-Cache</span><span class="sxs-lookup"><span data-stu-id="a6729-127">Azure Redis Cache support</span></span> |
| --- | --- | --- |
| <span data-ttu-id="a6729-128">Namngivna cacheminnen</span><span class="sxs-lookup"><span data-stu-id="a6729-128">Named caches</span></span> |<span data-ttu-id="a6729-129">En standard-cache är konfigurerad och hello Standard och Premium cache erbjudanden, in toonine ytterligare med namnet cacheminnen kan konfigureras om så önskas.</span><span class="sxs-lookup"><span data-stu-id="a6729-129">A default cache is configured, and in hello Standard and Premium cache offerings, up toonine additional named caches can be configured if desired.</span></span> |<span data-ttu-id="a6729-130">Azure Redis-cache har en konfigurerbar antalet databaser (standard 16) som kan använda tooimplement en liknande funktionalitet toonamed cachelagrar.</span><span class="sxs-lookup"><span data-stu-id="a6729-130">Azure Redis caches have a configurable number of databases (default of 16) that can be used tooimplement a similar functionality toonamed caches.</span></span> <span data-ttu-id="a6729-131">Mer information finns i [What are Redis databases?](cache-faq.md#what-are-redis-databases) (Vad är Redis-databaser?) och [Default Redis server configuration](cache-configure.md#default-redis-server-configuration) (Standardkonfiguration av Redis-server).</span><span class="sxs-lookup"><span data-stu-id="a6729-131">For more information, see [What are Redis databases?](cache-faq.md#what-are-redis-databases) and [Default Redis server configuration](cache-configure.md#default-redis-server-configuration).</span></span> |
| <span data-ttu-id="a6729-132">Hög tillgänglighet</span><span class="sxs-lookup"><span data-stu-id="a6729-132">High Availability</span></span> |<span data-ttu-id="a6729-133">Ger hög tillgänglighet för objekt i hello-cachen i hello Standard och Premium cache-erbjudanden.</span><span class="sxs-lookup"><span data-stu-id="a6729-133">Provides high availability for items in hello cache in hello Standard and Premium cache offerings.</span></span> <span data-ttu-id="a6729-134">Om objekt går förlorade på grund av fel tooa är säkerhetskopior av hello objekt i hello cache fortfarande tillgängliga.</span><span class="sxs-lookup"><span data-stu-id="a6729-134">If items are lost due tooa failure, backup copies of hello items in hello cache are still available.</span></span> <span data-ttu-id="a6729-135">Skriver toohello sekundära cache görs synkront.</span><span class="sxs-lookup"><span data-stu-id="a6729-135">Writes toohello secondary cache are made synchronously.</span></span> |<span data-ttu-id="a6729-136">Hög tillgänglighet finns i hello Standard och Premium cache erbjudanden, som har en konfiguration för primär/replik av två noder (varje Fragmentera i Premium-cache har två primära/replik).</span><span class="sxs-lookup"><span data-stu-id="a6729-136">High availability is available in hello Standard and Premium cache offerings, which have a two node Primary/Replica configuration (each shard in a Premium cache has a primary/replica pair).</span></span> <span data-ttu-id="a6729-137">Skrivningar toohello repliken görs asynkront.</span><span class="sxs-lookup"><span data-stu-id="a6729-137">Writes toohello replica are made asynchronously.</span></span> <span data-ttu-id="a6729-138">Mer information finns i [priser för Azure Redis-Cache](https://azure.microsoft.com/pricing/details/cache/).</span><span class="sxs-lookup"><span data-stu-id="a6729-138">For more information, see [Azure Redis Cache pricing](https://azure.microsoft.com/pricing/details/cache/).</span></span> |
| <span data-ttu-id="a6729-139">Meddelanden</span><span class="sxs-lookup"><span data-stu-id="a6729-139">Notifications</span></span> |<span data-ttu-id="a6729-140">Låter klienter tooreceive asynkrona meddelanden när en mängd olika cache-åtgärder sker på en namngiven cache.</span><span class="sxs-lookup"><span data-stu-id="a6729-140">Allows clients tooreceive asynchronous notifications when a variety of cache operations occur on a named cache.</span></span> |<span data-ttu-id="a6729-141">Klientprogram kan använda Redis pub/sub eller [Keyspace-meddelanden](cache-configure.md#keyspace-notifications-advanced-settings) tooachieve en liknande funktionalitet toonotifications.</span><span class="sxs-lookup"><span data-stu-id="a6729-141">Client applications can use Redis pub/sub or [Keyspace notifications](cache-configure.md#keyspace-notifications-advanced-settings) tooachieve a similar functionality toonotifications.</span></span> |
| <span data-ttu-id="a6729-142">Lokal cache</span><span class="sxs-lookup"><span data-stu-id="a6729-142">Local cache</span></span> |<span data-ttu-id="a6729-143">Lagrar en kopia av cachelagrade objekt lokalt på hello klienten för extra snabb åtkomst.</span><span class="sxs-lookup"><span data-stu-id="a6729-143">Stores a copy of cached objects locally on hello client for extra-fast access.</span></span> |<span data-ttu-id="a6729-144">Klientprogram måste tooimplement funktionen med hjälp av en ordlista eller liknande datastruktur.</span><span class="sxs-lookup"><span data-stu-id="a6729-144">Client applications would need tooimplement this functionality using a dictionary or similar data structure.</span></span> |
| <span data-ttu-id="a6729-145">Princip för borttagning</span><span class="sxs-lookup"><span data-stu-id="a6729-145">Eviction Policy</span></span> |<span data-ttu-id="a6729-146">Ingen eller LRU.</span><span class="sxs-lookup"><span data-stu-id="a6729-146">None or LRU.</span></span> <span data-ttu-id="a6729-147">hello standardprincipen är LRU.</span><span class="sxs-lookup"><span data-stu-id="a6729-147">hello default policy is LRU.</span></span> |<span data-ttu-id="a6729-148">Hello efter borttagning principer har stöd för Azure Redis-Cache: obeständigt lru, allkeys lru, obeständigt slumpmässiga, allkeys slumpmässiga obeständigt-TTL-värde, noeviction.</span><span class="sxs-lookup"><span data-stu-id="a6729-148">Azure Redis Cache supports hello following eviction policies: volatile-lru, allkeys-lru, volatile-random, allkeys-random, volatile-ttl, noeviction.</span></span> <span data-ttu-id="a6729-149">hello standardprincipen är obeständigt lru.</span><span class="sxs-lookup"><span data-stu-id="a6729-149">hello default policy is volatile-lru.</span></span> <span data-ttu-id="a6729-150">Mer information finns i [standard Redis serverkonfiguration](cache-configure.md#default-redis-server-configuration).</span><span class="sxs-lookup"><span data-stu-id="a6729-150">For more information, see [Default Redis server configuration](cache-configure.md#default-redis-server-configuration).</span></span> |
| <span data-ttu-id="a6729-151">Princip</span><span class="sxs-lookup"><span data-stu-id="a6729-151">Expiration Policy</span></span> |<span data-ttu-id="a6729-152">hello standardprincip är absolut hello standardintervallet för förfallotid är tio minuter.</span><span class="sxs-lookup"><span data-stu-id="a6729-152">hello default expiration policy is Absolute and hello default expiration interval is ten minutes.</span></span> <span data-ttu-id="a6729-153">Det finns också glidande och aldrig principer.</span><span class="sxs-lookup"><span data-stu-id="a6729-153">Sliding and Never policies are also available.</span></span> |<span data-ttu-id="a6729-154">Som standard förfaller inte objekt i hello cache, men ett förfallodatum kan konfigureras på grundval av per skrivning med hjälp av cachen set överlagringar.</span><span class="sxs-lookup"><span data-stu-id="a6729-154">By default items in hello cache do not expire, but an expiration can be configured on a per write basis using cache set overloads.</span></span> <span data-ttu-id="a6729-155">Mer information finns i [Lägg till och hämta objekt från cache hello](cache-dotnet-how-to-use-azure-redis-cache.md#add-and-retrieve-objects-from-the-cache).</span><span class="sxs-lookup"><span data-stu-id="a6729-155">For more information, see [Add and retrieve objects from hello cache](cache-dotnet-how-to-use-azure-redis-cache.md#add-and-retrieve-objects-from-the-cache).</span></span> |
| <span data-ttu-id="a6729-156">Regioner och taggning</span><span class="sxs-lookup"><span data-stu-id="a6729-156">Regions and Tagging</span></span> |<span data-ttu-id="a6729-157">Regioner är undergrupper för cachelagrade objekt.</span><span class="sxs-lookup"><span data-stu-id="a6729-157">Regions are subgroups for cached items.</span></span> <span data-ttu-id="a6729-158">Regioner stöder också hello anteckningen cachelagrade objekt med ytterligare beskrivande strängar som kallas taggar.</span><span class="sxs-lookup"><span data-stu-id="a6729-158">Regions also support hello annotation of cached items with additional descriptive strings called tags.</span></span> <span data-ttu-id="a6729-159">Regioner stöder hello möjlighet tooperform sökningar på taggade objekt i den regionen.</span><span class="sxs-lookup"><span data-stu-id="a6729-159">Regions support hello ability tooperform search operations on any tagged items in that region.</span></span> <span data-ttu-id="a6729-160">Alla objekt i en region finns inom en enskild nod hello cache-klustret.</span><span class="sxs-lookup"><span data-stu-id="a6729-160">All items within a region are located within a single node of hello cache cluster.</span></span> |<span data-ttu-id="a6729-161">Ett Redis-cache består av en enskild nod (om Redis cluster är aktiverad) så hello begreppet Managed Cache Service regioner inte är giltigt.</span><span class="sxs-lookup"><span data-stu-id="a6729-161">A Redis cache consists of a single node (unless Redis cluster is enabled) so hello concept of Managed Cache Service regions does not apply.</span></span> <span data-ttu-id="a6729-162">Redis har stöd för sökning och jokertecken åtgärder vid hämtning av nycklar så beskrivande taggar kan vara inbäddat i hello nyckelnamn och användas tooretrieve hello objekt senare.</span><span class="sxs-lookup"><span data-stu-id="a6729-162">Redis supports searching and wildcard operations when retrieving keys so descriptive tags can be embedded within hello key names and used tooretrieve hello items later.</span></span> <span data-ttu-id="a6729-163">Ett exempel på att implementera en märkning lösning med Redis finns [implementera märkning med Redis cache](http://stackify.com/implementing-cache-tagging-redis/).</span><span class="sxs-lookup"><span data-stu-id="a6729-163">For an example of implementing a tagging solution using Redis, see [Implementing cache tagging with Redis](http://stackify.com/implementing-cache-tagging-redis/).</span></span> |
| <span data-ttu-id="a6729-164">Serialisering</span><span class="sxs-lookup"><span data-stu-id="a6729-164">Serialization</span></span> |<span data-ttu-id="a6729-165">Managed Cache stöder NetDataContractSerializer och BinaryFormatter hello användningen av anpassade serializers.</span><span class="sxs-lookup"><span data-stu-id="a6729-165">Managed Cache supports NetDataContractSerializer, BinaryFormatter, and hello use of custom serializers.</span></span> <span data-ttu-id="a6729-166">hello standardvärdet är NetDataContractSerializer.</span><span class="sxs-lookup"><span data-stu-id="a6729-166">hello default is NetDataContractSerializer.</span></span> |<span data-ttu-id="a6729-167">Det är hello ansvar hello klienten programmet tooserialize .NET objekt innan du monterar dem till hello cache med hello val av hello serialiseraren in toohello programutvecklaren för klienten.</span><span class="sxs-lookup"><span data-stu-id="a6729-167">It is hello responsibility of hello client application tooserialize .NET objects before placing them into hello cache, with hello choice of hello serializer up toohello client application developer.</span></span> <span data-ttu-id="a6729-168">Mer information och exempelkod finns [arbeta med .NET-objekt i hello cache](cache-dotnet-how-to-use-azure-redis-cache.md#work-with-net-objects-in-the-cache).</span><span class="sxs-lookup"><span data-stu-id="a6729-168">For more information and sample code, see [Work with .NET objects in hello cache](cache-dotnet-how-to-use-azure-redis-cache.md#work-with-net-objects-in-the-cache).</span></span> |
| <span data-ttu-id="a6729-169">Cache-emulatorn</span><span class="sxs-lookup"><span data-stu-id="a6729-169">Cache emulator</span></span> |<span data-ttu-id="a6729-170">Hanterade cachen innehåller en lokal cache-emulatorn.</span><span class="sxs-lookup"><span data-stu-id="a6729-170">Managed Cache provides a local cache emulator.</span></span> |<span data-ttu-id="a6729-171">Azure Redis-Cache har inte en emulator, men du kan [kör hello MSOpenTech version av redis-server.exe lokalt](cache-faq.md#cache-emulator) tooprovide en emulator upplevelse.</span><span class="sxs-lookup"><span data-stu-id="a6729-171">Azure Redis Cache does not have an emulator, but you can [run hello MSOpenTech build of redis-server.exe locally](cache-faq.md#cache-emulator) tooprovide an emulator experience.</span></span> |

## <a name="choose-a-cache-offering"></a><span data-ttu-id="a6729-172">Välj ett erbjudande för Cache</span><span class="sxs-lookup"><span data-stu-id="a6729-172">Choose a Cache Offering</span></span>
<span data-ttu-id="a6729-173">Microsoft Azure Redis-Cache är tillgängliga i hello följande nivåer:</span><span class="sxs-lookup"><span data-stu-id="a6729-173">Microsoft Azure Redis Cache is available in hello following tiers:</span></span>

* <span data-ttu-id="a6729-174">**Grundläggande** – En nod.</span><span class="sxs-lookup"><span data-stu-id="a6729-174">**Basic** – Single node.</span></span> <span data-ttu-id="a6729-175">Flera storlekar upp too53 GB.</span><span class="sxs-lookup"><span data-stu-id="a6729-175">Multiple sizes up too53 GB.</span></span>
* <span data-ttu-id="a6729-176">**Standard** – Primär/replik med två noder.</span><span class="sxs-lookup"><span data-stu-id="a6729-176">**Standard** – Two-node Primary/Replica.</span></span> <span data-ttu-id="a6729-177">Flera storlekar upp too53 GB.</span><span class="sxs-lookup"><span data-stu-id="a6729-177">Multiple sizes up too53 GB.</span></span> <span data-ttu-id="a6729-178">99,9 % SLA.</span><span class="sxs-lookup"><span data-stu-id="a6729-178">99.9% SLA.</span></span>
* <span data-ttu-id="a6729-179">**Premium** – två noder primära/replik med upp too10 delar.</span><span class="sxs-lookup"><span data-stu-id="a6729-179">**Premium** – Two-node Primary/Replica with up too10 shards.</span></span> <span data-ttu-id="a6729-180">Flera storlekar från 6 GB too530 GB.</span><span class="sxs-lookup"><span data-stu-id="a6729-180">Multiple sizes from 6 GB too530 GB.</span></span> <span data-ttu-id="a6729-181">Alla standardnivåfunktioner med mera, med stöd för [Redis-kluster](cache-how-to-premium-clustering.md), [Redis persistence](cache-how-to-premium-persistence.md) och [Azure Virtual Network](cache-how-to-premium-vnet.md).</span><span class="sxs-lookup"><span data-stu-id="a6729-181">All Standard tier features and more including support for [Redis cluster](cache-how-to-premium-clustering.md), [Redis persistence](cache-how-to-premium-persistence.md), and [Azure Virtual Network](cache-how-to-premium-vnet.md).</span></span> <span data-ttu-id="a6729-182">99,9 % SLA.</span><span class="sxs-lookup"><span data-stu-id="a6729-182">99.9% SLA.</span></span>

<span data-ttu-id="a6729-183">Varje nivå har olika funktioner och priser.</span><span class="sxs-lookup"><span data-stu-id="a6729-183">Each tier differs in terms of features and pricing.</span></span> <span data-ttu-id="a6729-184">hello funktioner beskrivs senare i den här guiden och mer information om priser finns i avsnittet [Cache-prisinformation](https://azure.microsoft.com/pricing/details/cache/).</span><span class="sxs-lookup"><span data-stu-id="a6729-184">hello features are covered later in this guide, and for more information on pricing, see [Cache Pricing Details](https://azure.microsoft.com/pricing/details/cache/).</span></span>

<span data-ttu-id="a6729-185">En startpunkt för migrering är toopick hello storlek som matchar hello storlek tidigare Managed Cache Service och sedan skala upp eller ned beroende på hello krav för programmet.</span><span class="sxs-lookup"><span data-stu-id="a6729-185">A starting point for migration is toopick hello size that matches hello size of your previous Managed Cache Service cache, and then scale up or down depending on hello requirements of your application.</span></span> <span data-ttu-id="a6729-186">Mer information om att välja hello rätt Azure Redis-Cache erbjudande finns [vilka Redis-Cache erbjudande och vilken storlek ska jag använda?](cache-faq.md#what-redis-cache-offering-and-size-should-i-use).</span><span class="sxs-lookup"><span data-stu-id="a6729-186">For more guidance on choosing hello right Azure Redis Cache offering, see [What Redis Cache offering and size should I use?](cache-faq.md#what-redis-cache-offering-and-size-should-i-use).</span></span>

## <a name="create-a-cache"></a><span data-ttu-id="a6729-187">Skapa ett cacheminne</span><span class="sxs-lookup"><span data-stu-id="a6729-187">Create a Cache</span></span>
[!INCLUDE [redis-cache-create](../../includes/redis-cache-create.md)]

## <a name="configure-hello-cache-clients"></a><span data-ttu-id="a6729-188">Konfigurera hello Cache-klienter</span><span class="sxs-lookup"><span data-stu-id="a6729-188">Configure hello Cache Clients</span></span>
<span data-ttu-id="a6729-189">När hello cachen har skapats och konfigurerats, hello nästa steg är tooremove hello Managed Cache Service configuration och lägga till hello lägga till hello Azure Redis-Cache konfiguration och referenser så att cacheklienter kan komma åt hello cache.</span><span class="sxs-lookup"><span data-stu-id="a6729-189">Once hello cache is created and configured, hello next step is tooremove hello Managed Cache Service configuration, and add hello add hello Azure Redis Cache configuration and references so that cache clients can access hello cache.</span></span>

* <span data-ttu-id="a6729-190">Ta bort hello Managed Cache Service Configuration</span><span class="sxs-lookup"><span data-stu-id="a6729-190">Remove hello Managed Cache Service Configuration</span></span>
* <span data-ttu-id="a6729-191">Konfigurera en cacheklient som använder hello StackExchange.Redis NuGet-paketet</span><span class="sxs-lookup"><span data-stu-id="a6729-191">Configure a cache client using hello StackExchange.Redis NuGet Package</span></span>

### <a name="remove-hello-managed-cache-service-configuration"></a><span data-ttu-id="a6729-192">Ta bort hello Managed Cache Service Configuration</span><span class="sxs-lookup"><span data-stu-id="a6729-192">Remove hello Managed Cache Service Configuration</span></span>
<span data-ttu-id="a6729-193">Innan du hello klientprogram kan konfigureras för Azure Redis-Cache, hello befintliga Managed Cache Service-konfigurationen och sammansättningsreferenser måste tas bort genom att avinstallera hello Managed Cache Service NuGet-paketet.</span><span class="sxs-lookup"><span data-stu-id="a6729-193">Before hello client applications can be configured for Azure Redis Cache, hello existing Managed Cache Service configuration and assembly references must be removed by uninstalling hello Managed Cache Service NuGet package.</span></span>

<span data-ttu-id="a6729-194">toouninstall hello Managed Cache Service NuGet-paketet, högerklicka på hello klientprojektet i **Solution Explorer** och välj **hantera NuGet-paket**.</span><span class="sxs-lookup"><span data-stu-id="a6729-194">toouninstall hello Managed Cache Service NuGet package, right-click hello client project in **Solution Explorer** and choose **Manage NuGet Packages**.</span></span> <span data-ttu-id="a6729-195">Välj hello **installerade paket** nod och typen W**indowsAzure.Caching** till hello installerat paket rutan.</span><span class="sxs-lookup"><span data-stu-id="a6729-195">Select hello **Installed packages** node, and type W**indowsAzure.Caching** into hello Search installed packages box.</span></span> <span data-ttu-id="a6729-196">Välj **Windows** **Azure Cache** (eller **Windows** **Azure Caching** beroende på hello version av hello NuGet-paketet), klickar du på  **Avinstallera**, och klicka sedan på **Stäng**.</span><span class="sxs-lookup"><span data-stu-id="a6729-196">Select **Windows** **Azure Cache** (or **Windows** **Azure Caching** depending on hello version of hello NuGet package), click **Uninstall**, and then click **Close**.</span></span>

![Avinstallera NuGet-paketet för Azure Managed Cache Service](./media/cache-migrate-to-redis/IC757666.jpg)

<span data-ttu-id="a6729-198">Avinstallera hello Managed Cache Service NuGet-paketet tar bort hello Managed Cache Service sammansättningar och hello Managed Cache Service poster i hello app.config eller web.config i hello-klientprogrammet.</span><span class="sxs-lookup"><span data-stu-id="a6729-198">Uninstalling hello Managed Cache Service NuGet package removes hello Managed Cache Service assemblies and hello Managed Cache Service entries in hello app.config or web.config of hello client application.</span></span> <span data-ttu-id="a6729-199">Eftersom vissa anpassade inställningar tas inte bort när du avinstallerar hello NuGet-paketet, öppna web.config eller app.config och kontrollera att hello följande element har tagits bort.</span><span class="sxs-lookup"><span data-stu-id="a6729-199">Because some customized settings may not be removed when uninstalling hello NuGet package, open web.config or app.config and ensure that hello following elements are completely removed.</span></span>

<span data-ttu-id="a6729-200">Se till att hello `dataCacheClients` tas bort från hello `configSections` element.</span><span class="sxs-lookup"><span data-stu-id="a6729-200">Ensure that hello `dataCacheClients` entry is removed from hello `configSections` element.</span></span> <span data-ttu-id="a6729-201">Ta inte bort hello hela `configSections` elementet; bara ta bort hello `dataCacheClients` post, om den finns.</span><span class="sxs-lookup"><span data-stu-id="a6729-201">Do not remove hello entire `configSections` element; just remove hello `dataCacheClients` entry, if it is present.</span></span>

```xml
<configSections>
  <!-- Existing sections omitted for clarity. -->
  <section name="dataCacheClients"type="Microsoft.ApplicationServer.Caching.DataCacheClientsSection, Microsoft.ApplicationServer.Caching.Core" allowLocation="true" allowDefinition="Everywhere"/>
</configSections>
```

<span data-ttu-id="a6729-202">Se till att hello `dataCacheClients` avsnittet tas bort.</span><span class="sxs-lookup"><span data-stu-id="a6729-202">Ensure that hello `dataCacheClients` section is removed.</span></span> <span data-ttu-id="a6729-203">Hej `dataCacheClients` avsnittet kommer att liknande toohello följande exempel.</span><span class="sxs-lookup"><span data-stu-id="a6729-203">hello `dataCacheClients` section will be similar toohello following example.</span></span>

```xml
<dataCacheClients>
  <dataCacheClientname="default">
    <!--toouse hello in-role flavor of Azure Cache, set identifier toobe hello cache cluster role name -->
    <!--toouse hello Azure Managed Cache Service, set identifier toobe hello endpoint of hello cache cluster -->
    <autoDiscoverisEnabled="true"identifier="[Cache role name or Service Endpoint]"/>

    <!--<localCache isEnabled="true" sync="TimeoutBased" objectCount="100000" ttlValue="300" />-->
    <!--Use this section toospecify security settings for connecting tooyour cache. This section is not required if your cache is hosted on a role that is a part of your cloud service. -->
    <!--<securityProperties mode="Message" sslEnabled="true">
      <messageSecurity authorizationInfo="[Authentication Key]" />
    </securityProperties>-->
  </dataCacheClient>
</dataCacheClients>
```

<span data-ttu-id="a6729-204">När hello Managed Cache Service configuration har tagits bort, kan du konfigurera hello cacheklienten enligt beskrivningen i följande avsnitt hello.</span><span class="sxs-lookup"><span data-stu-id="a6729-204">Once hello Managed Cache Service configuration is removed, you can configure hello cache client as described in hello following section.</span></span>

### <a name="configure-a-cache-client-using-hello-stackexchangeredis-nuget-package"></a><span data-ttu-id="a6729-205">Konfigurera en cacheklient som använder hello StackExchange.Redis NuGet-paketet</span><span class="sxs-lookup"><span data-stu-id="a6729-205">Configure a cache client using hello StackExchange.Redis NuGet Package</span></span>
[!INCLUDE [redis-cache-configure](../../includes/redis-cache-configure-stackexchange-redis-nuget.md)]

## <a name="migrate-managed-cache-service-code"></a><span data-ttu-id="a6729-206">Migrera koden Managed Cache Service</span><span class="sxs-lookup"><span data-stu-id="a6729-206">Migrate Managed Cache Service code</span></span>
<span data-ttu-id="a6729-207">hello API för hello StackExchange.Redis cache-klienten är liknande toohello Managed Cache Service.</span><span class="sxs-lookup"><span data-stu-id="a6729-207">hello API for hello StackExchange.Redis cache client is similar toohello Managed Cache Service.</span></span> <span data-ttu-id="a6729-208">Det här avsnittet innehåller en översikt över hello skillnader.</span><span class="sxs-lookup"><span data-stu-id="a6729-208">This section provides an overview of hello differences.</span></span>

### <a name="connect-toohello-cache-using-hello-connectionmultiplexer-class"></a><span data-ttu-id="a6729-209">Ansluta toohello cacheminne med hjälp av hello ConnectionMultiplexer klass</span><span class="sxs-lookup"><span data-stu-id="a6729-209">Connect toohello cache using hello ConnectionMultiplexer class</span></span>
<span data-ttu-id="a6729-210">I Managed Cache Service anslutningar toohello cache hanterades av hello `DataCacheFactory` och `DataCache` klasser.</span><span class="sxs-lookup"><span data-stu-id="a6729-210">In Managed Cache Service, connections toohello cache were handled by hello `DataCacheFactory` and `DataCache` classes.</span></span> <span data-ttu-id="a6729-211">I Azure Redis-Cache dessa anslutningar som hanteras av hello `ConnectionMultiplexer` klass.</span><span class="sxs-lookup"><span data-stu-id="a6729-211">In Azure Redis Cache, these connections are managed by hello `ConnectionMultiplexer` class.</span></span>

<span data-ttu-id="a6729-212">Lägg till hello följande med instruktionen toohello upp i en fil som du vill tooaccess hello cache.</span><span class="sxs-lookup"><span data-stu-id="a6729-212">Add hello following using statement toohello top of any file from which you want tooaccess hello cache.</span></span>

```c#
using StackExchange.Redis
```

<span data-ttu-id="a6729-213">Om inte går att lösa det här namnområdet är det viktigt att du har lagt till hello StackExchange.Redis NuGet-paketet enligt beskrivningen i [konfigurera hello cacheklienter](cache-dotnet-how-to-use-azure-redis-cache.md#configure-the-cache-clients).</span><span class="sxs-lookup"><span data-stu-id="a6729-213">If this namespace doesn’t resolve, be sure that you have added hello StackExchange.Redis NuGet package as described in [Configure hello cache clients](cache-dotnet-how-to-use-azure-redis-cache.md#configure-the-cache-clients).</span></span>

> [!NOTE]
> <span data-ttu-id="a6729-214">Observera att hello StackExchange.Redis klienten kräver .NET Framework 4 eller senare.</span><span class="sxs-lookup"><span data-stu-id="a6729-214">Note that hello StackExchange.Redis client requires .NET Framework 4 or higher.</span></span>
> 
> 

<span data-ttu-id="a6729-215">tooconnect tooan Azure Redis-cacheinstansen, anrop hello statiskt `ConnectionMultiplexer.Connect` metoden och skicka hello slutpunkt och nyckel.</span><span class="sxs-lookup"><span data-stu-id="a6729-215">tooconnect tooan Azure Redis Cache instance, call hello static `ConnectionMultiplexer.Connect` method and pass in hello endpoint and key.</span></span> <span data-ttu-id="a6729-216">En metod som toosharing en `ConnectionMultiplexer` instans i ditt program är toohave en statisk egenskap som returnerar en ansluten instans, liknande toohello följande exempel.</span><span class="sxs-lookup"><span data-stu-id="a6729-216">One approach toosharing a `ConnectionMultiplexer` instance in your application is toohave a static property that returns a connected instance, similar toohello following example.</span></span> <span data-ttu-id="a6729-217">Detta ger ett trådsäkert sätt tooinitialize ett enda anslutet `ConnectionMultiplexer` instans.</span><span class="sxs-lookup"><span data-stu-id="a6729-217">This provides a thread-safe way tooinitialize only a single connected `ConnectionMultiplexer` instance.</span></span> <span data-ttu-id="a6729-218">I det här exemplet `abortConnect` är uppsättningen toofalse, vilket innebär att hello anrop lyckas även om en toohello cache för anslutningen inte upprättas.</span><span class="sxs-lookup"><span data-stu-id="a6729-218">In this example `abortConnect` is set toofalse, which means that hello call will succeed even if a connection toohello cache is not established.</span></span> <span data-ttu-id="a6729-219">En nyckelfunktion i `ConnectionMultiplexer` är att det automatiskt återställer anslutningen toohello cache när hello nätverksfel eller andra orsaker är löst.</span><span class="sxs-lookup"><span data-stu-id="a6729-219">One key feature of `ConnectionMultiplexer` is that it will automatically restore connectivity toohello cache once hello network issue or other causes are resolved.</span></span>

```c#
private static Lazy<ConnectionMultiplexer> lazyConnection = new Lazy<ConnectionMultiplexer>(() =>
{
    return ConnectionMultiplexer.Connect("contoso5.redis.cache.windows.net,abortConnect=false,ssl=true,password=...");
});

public static ConnectionMultiplexer Connection
{
    get
    {
        return lazyConnection.Value;
    }
}
```

<span data-ttu-id="a6729-220">hello cache-slutpunkten, nycklar och portar kan hämtas från hello **Redis-Cache** bladet för din cache-instans.</span><span class="sxs-lookup"><span data-stu-id="a6729-220">hello cache endpoint, keys, and ports can be obtained from hello **Redis Cache** blade for your cache instance.</span></span> <span data-ttu-id="a6729-221">Mer information finns i [Redis-Cache egenskaper](cache-configure.md#properties).</span><span class="sxs-lookup"><span data-stu-id="a6729-221">For more information, see [Redis Cache properties](cache-configure.md#properties).</span></span>

<span data-ttu-id="a6729-222">När hello anslutning har upprättats kan returnera en referens toohello Redis cache-databas genom att anropa hello `ConnectionMultiplexer.GetDatabase` metod.</span><span class="sxs-lookup"><span data-stu-id="a6729-222">Once hello connection is established, return a reference toohello Redis cache database by calling hello `ConnectionMultiplexer.GetDatabase` method.</span></span> <span data-ttu-id="a6729-223">hello-objektet som returnerades från hello `GetDatabase` metoden är ett enkelt direkt objekt och behöver inte toobe lagras.</span><span class="sxs-lookup"><span data-stu-id="a6729-223">hello object returned from hello `GetDatabase` method is a lightweight pass-through object and does not need toobe stored.</span></span>

```c#
IDatabase cache = Connection.GetDatabase();

// Perform cache operations using hello cache object...
// Simple put of integral data types into hello cache
cache.StringSet("key1", "value");
cache.StringSet("key2", 25);

// Simple get of data types from hello cache
string key1 = cache.StringGet("key1");
int key2 = (int)cache.StringGet("key2");
```

<span data-ttu-id="a6729-224">Hej StackExchange.Redis klienten använder hello `RedisKey` och `RedisValue` typer för att komma åt och lagra objekt i hello-cachen.</span><span class="sxs-lookup"><span data-stu-id="a6729-224">hello StackExchange.Redis client uses hello `RedisKey` and `RedisValue` types for accessing and storing items in hello cache.</span></span> <span data-ttu-id="a6729-225">Dessa typer av mappar till mest primitiva språktyper, inklusive sträng, och ofta används inte direkt.</span><span class="sxs-lookup"><span data-stu-id="a6729-225">These types map onto most primitive language types, including string, and often are not used directly.</span></span> <span data-ttu-id="a6729-226">Redis-strängar är hello enklaste typen av Redis värde och kan innehålla flera typer av data, inklusive serialiserade binära dataströmmar och du kan inte använda hello typ direkt, du använder metoder som innehåller `String` i hello namn.</span><span class="sxs-lookup"><span data-stu-id="a6729-226">Redis Strings are hello most basic kind of Redis value, and can contain many types of data, including serialized binary streams, and while you may not use hello type directly, you will use methods that contain `String` in hello name.</span></span> <span data-ttu-id="a6729-227">För de flesta primitiva datatyper du lagra och hämta objekt från hello cacheminne med hjälp av hello `StringSet` och `StringGet` metoder, om du lagrar samlingar eller andra Redis-datatyper i hello-cachen.</span><span class="sxs-lookup"><span data-stu-id="a6729-227">For most primitive data types you store and retrieve items from hello cache using hello `StringSet` and `StringGet` methods, unless you are storing collections or other Redis data types in hello cache.</span></span> 

<span data-ttu-id="a6729-228">`StringSet`och `StringGet` är mycket lik toohello Managed Cache Service `Put` och `Get` metoder med en större skillnad är att innan du ställer in och få en .NET-objekt till cache hello du måste serialisera först.</span><span class="sxs-lookup"><span data-stu-id="a6729-228">`StringSet` and `StringGet` are very similar toohello Managed Cache Service `Put` and `Get` methods, with one major difference being that before you set and get a .NET object into hello cache you must serialize it first.</span></span> 

<span data-ttu-id="a6729-229">När du anropar `StringGet`om hello objektet finns returneras och om det inte är null returneras.</span><span class="sxs-lookup"><span data-stu-id="a6729-229">When calling `StringGet`, if hello object exists, it is returned, and if it does not, null is returned.</span></span> <span data-ttu-id="a6729-230">I det här fallet kan du hämta hello värdet från hello önskad datakälla och lagra den på hello cache för senare användning.</span><span class="sxs-lookup"><span data-stu-id="a6729-230">In this case you can retrieve hello value from hello desired data source and store it in hello cache for subsequent use.</span></span> <span data-ttu-id="a6729-231">Detta kallas hello cache-reservera mönster.</span><span class="sxs-lookup"><span data-stu-id="a6729-231">This is known as hello cache-aside pattern.</span></span>

<span data-ttu-id="a6729-232">toospecify hello giltighetstid för ett objekt i hello cache, Använd hello `TimeSpan` -parametern för `StringSet`.</span><span class="sxs-lookup"><span data-stu-id="a6729-232">toospecify hello expiration of an item in hello cache, use hello `TimeSpan` parameter of `StringSet`.</span></span>

```c#
cache.StringSet("key1", "value1", TimeSpan.FromMinutes(90));
```

<span data-ttu-id="a6729-233">Azure Redis-Cache kan arbeta med .NET-objekt som primitiva datatyper, men måste serialiseras innan ett .NET-objekt som kan cachelagras.</span><span class="sxs-lookup"><span data-stu-id="a6729-233">Azure Redis Cache can work with .NET objects as well as primitive data types, but before a .NET object can be cached it must be serialized.</span></span> <span data-ttu-id="a6729-234">Detta är hello programutvecklaren hello ansvar.</span><span class="sxs-lookup"><span data-stu-id="a6729-234">This is hello responsibility of hello application developer.</span></span> <span data-ttu-id="a6729-235">Detta ger hello utvecklare möjlighet hello valet av hello serialiserare.</span><span class="sxs-lookup"><span data-stu-id="a6729-235">This gives hello developer flexibility in hello choice of hello serializer.</span></span> <span data-ttu-id="a6729-236">Mer information och exempelkod finns [arbeta med .NET-objekt i hello cache](cache-dotnet-how-to-use-azure-redis-cache.md#work-with-net-objects-in-the-cache).</span><span class="sxs-lookup"><span data-stu-id="a6729-236">For more information and sample code, see [Work with .NET objects in hello cache](cache-dotnet-how-to-use-azure-redis-cache.md#work-with-net-objects-in-the-cache).</span></span>

## <a name="migrate-aspnet-session-state-and-output-caching-tooazure-redis-cache"></a><span data-ttu-id="a6729-237">Migrera sessionstillståndet ASP.NET och Utdatacachelagring tooAzure Redis-Cache</span><span class="sxs-lookup"><span data-stu-id="a6729-237">Migrate ASP.NET Session State and Output caching tooAzure Redis Cache</span></span>
<span data-ttu-id="a6729-238">Azure Redis-Cache har providers för både sessionstillståndet ASP.NET och cachelagringen av sidan.</span><span class="sxs-lookup"><span data-stu-id="a6729-238">Azure Redis Cache has providers for both ASP.NET Session State and Page Output caching.</span></span> <span data-ttu-id="a6729-239">toomigrate ditt program som använder hello Managed Cache Service versioner av dessa providers först ta bort hello befintliga avsnitt från filen web.config och sedan konfigurera hello Azure Redis-Cache versioner av hello providers.</span><span class="sxs-lookup"><span data-stu-id="a6729-239">toomigrate your application that uses hello Managed Cache Service versions of these providers, first remove hello existing sections from your web.config, and then configure hello Azure Redis Cache versions of hello providers.</span></span> <span data-ttu-id="a6729-240">För instruktioner om hur du använder hello Azure Redis-Cache ASP.NET-providers, se [ASP.NET-Sessionstillståndsprovider för Azure Redis-Cache](cache-aspnet-session-state-provider.md) och [ASP.NET Utdatacacheprovider för Azure Redis-Cache](cache-aspnet-output-cache-provider.md).</span><span class="sxs-lookup"><span data-stu-id="a6729-240">For instructions on using hello Azure Redis Cache ASP.NET providers, see [ASP.NET Session State Provider for Azure Redis Cache](cache-aspnet-session-state-provider.md) and [ASP.NET Output Cache Provider for Azure Redis Cache](cache-aspnet-output-cache-provider.md).</span></span>

## <a name="next-steps"></a><span data-ttu-id="a6729-241">Nästa steg</span><span class="sxs-lookup"><span data-stu-id="a6729-241">Next steps</span></span>
<span data-ttu-id="a6729-242">Utforska hello [dokumentation för Azure Redis-Cache](https://azure.microsoft.com/documentation/services/cache/) för självstudier, exempel, videor och mycket mer.</span><span class="sxs-lookup"><span data-stu-id="a6729-242">Explore hello [Azure Redis Cache documentation](https://azure.microsoft.com/documentation/services/cache/) for tutorials, samples, videos, and more.</span></span>


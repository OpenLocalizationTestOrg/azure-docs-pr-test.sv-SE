---
title: aaaHow tootroubleshoot Azure Redis-Cache | Microsoft Docs
description: "Lär dig hur tooresolve vanliga problem med Azure Redis-Cache."
services: redis-cache
documentationcenter: 
author: steved0x
manager: douge
editor: 
ms.assetid: 928b9b9c-d64f-4252-884f-af7ba8309af6
ms.service: cache
ms.workload: tbd
ms.tgt_pltfrm: cache-redis
ms.devlang: na
ms.topic: article
ms.date: 01/06/2017
ms.author: sdanie
ms.openlocfilehash: 4e736fce2b6d5200a2a8d802f3f1384b63458cab
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: sv-SE
ms.lasthandoff: 10/06/2017
---
# <a name="how-tootroubleshoot-azure-redis-cache"></a><span data-ttu-id="01f03-103">Hur tootroubleshoot Azure Redis-Cache</span><span class="sxs-lookup"><span data-stu-id="01f03-103">How tootroubleshoot Azure Redis Cache</span></span>
<span data-ttu-id="01f03-104">Den här artikeln innehåller riktlinjer för felsökning hello följande typer av problem med Azure Redis-Cache.</span><span class="sxs-lookup"><span data-stu-id="01f03-104">This article provides guidance for troubleshooting hello following categories of Azure Redis Cache issues.</span></span>

* <span data-ttu-id="01f03-105">[Felsökning på klienten](#client-side-troubleshooting) – det här avsnittet innehåller riktlinjer för att identifiera och lösa problem orsakade av hello program ansluter tooAzure Redis-Cache.</span><span class="sxs-lookup"><span data-stu-id="01f03-105">[Client side troubleshooting](#client-side-troubleshooting) - This section provides guidelines on identifying and resolving issues caused by hello application connecting tooAzure Redis Cache.</span></span>
* <span data-ttu-id="01f03-106">[Felsökning på Server](#server-side-troubleshooting) – det här avsnittet innehåller riktlinjer för att identifiera och lösa problem orsakade på hello Azure Redis-Cache på serversidan.</span><span class="sxs-lookup"><span data-stu-id="01f03-106">[Server side troubleshooting](#server-side-troubleshooting) - This section provides guidelines on identifying and resolving issues caused on hello Azure Redis Cache server side.</span></span>
* <span data-ttu-id="01f03-107">[StackExchange.Redis tidsgränsfel](#stackexchangeredis-timeout-exceptions) – det här avsnittet innehåller information om felsökning av problem när du använder hello StackExchange.Redis klienten.</span><span class="sxs-lookup"><span data-stu-id="01f03-107">[StackExchange.Redis timeout exceptions](#stackexchangeredis-timeout-exceptions) - This section provides information on troubleshooting issues when using hello StackExchange.Redis client.</span></span>

> [!NOTE]
> <span data-ttu-id="01f03-108">Flera hello felsökning i den här guiden innehåller instruktioner toorun Redis kommandon och övervaka olika prestandamått.</span><span class="sxs-lookup"><span data-stu-id="01f03-108">Several of hello troubleshooting steps in this guide include instructions toorun Redis commands and monitor various performance metrics.</span></span> <span data-ttu-id="01f03-109">Mer information och instruktioner finns hello artiklar i hello [ytterligare information](#additional-information) avsnitt.</span><span class="sxs-lookup"><span data-stu-id="01f03-109">For more information and instructions, see hello articles in hello [Additional information](#additional-information) section.</span></span>
> 
> 

## <a name="client-side-troubleshooting"></a><span data-ttu-id="01f03-110">Felsökning på klienten</span><span class="sxs-lookup"><span data-stu-id="01f03-110">Client side troubleshooting</span></span>
<span data-ttu-id="01f03-111">Det här avsnittet beskrivs felsöker problem som uppstår på grund av ett villkor på hello-klientprogrammet.</span><span class="sxs-lookup"><span data-stu-id="01f03-111">This section discusses troubleshooting issues that occur because of a condition on hello client application.</span></span>

* [<span data-ttu-id="01f03-112">Minnesbelastning på hello-klient</span><span class="sxs-lookup"><span data-stu-id="01f03-112">Memory pressure on hello client</span></span>](#memory-pressure-on-the-client)
* [<span data-ttu-id="01f03-113">Burst av trafik</span><span class="sxs-lookup"><span data-stu-id="01f03-113">Burst of traffic</span></span>](#burst-of-traffic)
* [<span data-ttu-id="01f03-114">Klienten hög CPU-användning</span><span class="sxs-lookup"><span data-stu-id="01f03-114">High client CPU usage</span></span>](#high-client-cpu-usage)
* [<span data-ttu-id="01f03-115">Klienten sida bandbredd överskreds</span><span class="sxs-lookup"><span data-stu-id="01f03-115">Client Side Bandwidth Exceeded</span></span>](#client-side-bandwidth-exceeded)
* [<span data-ttu-id="01f03-116">Storlek för stora frågor och svar</span><span class="sxs-lookup"><span data-stu-id="01f03-116">Large Request/Response Size</span></span>](#large-requestresponse-size)
* [<span data-ttu-id="01f03-117">Vad hände toomy data i Redis?</span><span class="sxs-lookup"><span data-stu-id="01f03-117">What happened toomy data in Redis?</span></span>](#what-happened-to-my-data-in-redis)

### <a name="memory-pressure-on-hello-client"></a><span data-ttu-id="01f03-118">Minnesbelastning på hello-klient</span><span class="sxs-lookup"><span data-stu-id="01f03-118">Memory pressure on hello client</span></span>
#### <a name="problem"></a><span data-ttu-id="01f03-119">Problem</span><span class="sxs-lookup"><span data-stu-id="01f03-119">Problem</span></span>
<span data-ttu-id="01f03-120">Minnesbelastning på klientdatorn hello leder tooall typer av problem med prestanda som kan fördröja behandlingen av data som skickades av hello Redis instans utan fördröjning.</span><span class="sxs-lookup"><span data-stu-id="01f03-120">Memory pressure on hello client machine leads tooall kinds of performance problems that can delay processing of data that was sent by hello Redis instance without any delay.</span></span> <span data-ttu-id="01f03-121">När minnesbelastning träffar har hello system toopage data från fysiskt minne toovirtual minne som finns på disken.</span><span class="sxs-lookup"><span data-stu-id="01f03-121">When memory pressure hits, hello system typically has toopage data from physical memory toovirtual memory which is on disk.</span></span> <span data-ttu-id="01f03-122">Detta *sidan felaktigt* orsaker hello system tooslow ned avsevärt.</span><span class="sxs-lookup"><span data-stu-id="01f03-122">This *page faulting* causes hello system tooslow down significantly.</span></span>

#### <a name="measurement"></a><span data-ttu-id="01f03-123">Mätning</span><span class="sxs-lookup"><span data-stu-id="01f03-123">Measurement</span></span>
1. <span data-ttu-id="01f03-124">Övervaka minnesanvändning på datorn toomake till att det inte överstiger tillgängligt minne.</span><span class="sxs-lookup"><span data-stu-id="01f03-124">Monitor memory usage on machine toomake sure that it does not exceed available memory.</span></span> 
2. <span data-ttu-id="01f03-125">Övervakaren hello `Page Faults/Sec` prestandaräknare.</span><span class="sxs-lookup"><span data-stu-id="01f03-125">Monitor hello `Page Faults/Sec` performance counter.</span></span> <span data-ttu-id="01f03-126">De flesta datorer ska ha vissa sidfel även under normal drift, så bevaka toppar i den här sidan fel prestandaräknaren som motsvarar timeout.</span><span class="sxs-lookup"><span data-stu-id="01f03-126">Most systems will have some page faults even during normal operation, so watch for spikes in this page faults performance counter which correspond with timeouts.</span></span>

#### <a name="resolution"></a><span data-ttu-id="01f03-127">Lösning</span><span class="sxs-lookup"><span data-stu-id="01f03-127">Resolution</span></span>
<span data-ttu-id="01f03-128">Uppgradera din klient tooa större klient VM-storlek med mer minne eller gå till din minne användningsmönster tooreduce minne consuption.</span><span class="sxs-lookup"><span data-stu-id="01f03-128">Upgrade your client tooa larger client VM size with more memory or dig into your memory usage patterns tooreduce memory consuption.</span></span>

### <a name="burst-of-traffic"></a><span data-ttu-id="01f03-129">Burst av trafik</span><span class="sxs-lookup"><span data-stu-id="01f03-129">Burst of traffic</span></span>
#### <a name="problem"></a><span data-ttu-id="01f03-130">Problem</span><span class="sxs-lookup"><span data-stu-id="01f03-130">Problem</span></span>
<span data-ttu-id="01f03-131">Belastning av trafik i kombination med dålig `ThreadPool` inställningar kan orsaka försening i bearbetning av data som redan har skickats som hello Redis Server men har ännu inte har förbrukats på hello på klientsidan.</span><span class="sxs-lookup"><span data-stu-id="01f03-131">Bursts of traffic combined with poor `ThreadPool` settings can result in delays in processing data already sent by hello Redis Server but not yet consumed on hello client side.</span></span>

#### <a name="measurement"></a><span data-ttu-id="01f03-132">Mätning</span><span class="sxs-lookup"><span data-stu-id="01f03-132">Measurement</span></span>
<span data-ttu-id="01f03-133">Övervaka hur din `ThreadPool` statistik förändras över tid genom att använda code [som detta](https://github.com/JonCole/SampleCode/blob/master/ThreadPoolMonitor/ThreadPoolLogger.cs).</span><span class="sxs-lookup"><span data-stu-id="01f03-133">Monitor how your `ThreadPool` statistics change over time using code [like this](https://github.com/JonCole/SampleCode/blob/master/ThreadPoolMonitor/ThreadPoolLogger.cs).</span></span> <span data-ttu-id="01f03-134">Du kan också titta på hello `TimeoutException` meddelande från StackExchange.Redis.</span><span class="sxs-lookup"><span data-stu-id="01f03-134">You can also look at hello `TimeoutException` message from StackExchange.Redis.</span></span> <span data-ttu-id="01f03-135">Här är ett exempel:</span><span class="sxs-lookup"><span data-stu-id="01f03-135">Here is an example :</span></span>

    System.TimeoutException: Timeout performing EVAL, inst: 8, mgr: Inactive, queue: 0, qu: 0, qs: 0, qc: 0, wr: 0, wq: 0, in: 64221, ar: 0, 
    IOCP: (Busy=6,Free=999,Min=2,Max=1000), WORKER: (Busy=7,Free=8184,Min=2,Max=8191)

<span data-ttu-id="01f03-136">Det finns några problem som är intressanta i hello ovan meddelande:</span><span class="sxs-lookup"><span data-stu-id="01f03-136">In hello above message, there are several issues that are interesting:</span></span>

1. <span data-ttu-id="01f03-137">Observera att i hello `IOCP` avsnittet och hello `WORKER` avsnitt som du har en `Busy` värde som är större än hello `Min` värde.</span><span class="sxs-lookup"><span data-stu-id="01f03-137">Notice that in hello `IOCP` section and hello `WORKER` section you have a `Busy` value that is greater than hello `Min` value.</span></span> <span data-ttu-id="01f03-138">Detta innebär att din `ThreadPool` inställningarna måste du justera.</span><span class="sxs-lookup"><span data-stu-id="01f03-138">This means that your `ThreadPool` settings need adjusting.</span></span>
2. <span data-ttu-id="01f03-139">Du kan också se `in: 64221`.</span><span class="sxs-lookup"><span data-stu-id="01f03-139">You can also see `in: 64221`.</span></span> <span data-ttu-id="01f03-140">Detta anger att 64211 byte har tagits emot på hello kernel socket layer men ännu inte har lästs av hello program (t.ex. StackExchange.Redis).</span><span class="sxs-lookup"><span data-stu-id="01f03-140">This indicates that 64211 bytes have been received at hello kernel socket layer but haven't yet been read by hello application (e.g. StackExchange.Redis).</span></span> <span data-ttu-id="01f03-141">Detta innebär oftast att programmet inte läsa data från hello nätverket snabbt hello-servern skickar den tooyou.</span><span class="sxs-lookup"><span data-stu-id="01f03-141">This typically means that your application isn't reading data from hello network as quickly as hello server is sending it tooyou.</span></span>

#### <a name="resolution"></a><span data-ttu-id="01f03-142">Lösning</span><span class="sxs-lookup"><span data-stu-id="01f03-142">Resolution</span></span>
<span data-ttu-id="01f03-143">Konfigurera din [arbetstråd inställningar](https://gist.github.com/JonCole/e65411214030f0d823cb) toomake till att din trådpoolen skalar snabbt under burst-scenarier.</span><span class="sxs-lookup"><span data-stu-id="01f03-143">Configure your [ThreadPool Settings](https://gist.github.com/JonCole/e65411214030f0d823cb) toomake sure that your thread pool will scale up quickly under burst scenarios.</span></span>

### <a name="high-client-cpu-usage"></a><span data-ttu-id="01f03-144">Klienten hög CPU-användning</span><span class="sxs-lookup"><span data-stu-id="01f03-144">High client CPU usage</span></span>
#### <a name="problem"></a><span data-ttu-id="01f03-145">Problem</span><span class="sxs-lookup"><span data-stu-id="01f03-145">Problem</span></span>
<span data-ttu-id="01f03-146">Hög CPU-användning på hello-klient är en indikation på att hello systemet inte håller hello arbete att den har ombetts tooperform.</span><span class="sxs-lookup"><span data-stu-id="01f03-146">High CPU usage on hello client is an indication that hello system cannot keep up with hello work that it has been asked tooperform.</span></span> <span data-ttu-id="01f03-147">Detta innebär att hello-klientdatorer kan misslyckas tooprocess svar i tid från Redis trots att Redis skickade hello svar snabbt.</span><span class="sxs-lookup"><span data-stu-id="01f03-147">This means that hello client may fail tooprocess a response from Redis in a timely fashion even though Redis sent hello response very quickly.</span></span>

#### <a name="measurement"></a><span data-ttu-id="01f03-148">Mätning</span><span class="sxs-lookup"><span data-stu-id="01f03-148">Measurement</span></span>
<span data-ttu-id="01f03-149">Övervakaren hello System Wide processoranvändning via hello Azure-portalen eller hello associerade prestandaräknare.</span><span class="sxs-lookup"><span data-stu-id="01f03-149">Monitor hello System Wide CPU usage through hello Azure Portal or through hello associated performance counter.</span></span> <span data-ttu-id="01f03-150">Var noga med att inte toomonitor *processen* CPU eftersom en enda process kan ha låg CPU-belastning på hello samma tid att hela systemets CPU kan vara hög.</span><span class="sxs-lookup"><span data-stu-id="01f03-150">Be careful not toomonitor *process* CPU because a single process can have low CPU usage at hello same time that overall system CPU can be high.</span></span> <span data-ttu-id="01f03-151">Håll utkik efter toppar i CPU-användning som motsvarar timeout.</span><span class="sxs-lookup"><span data-stu-id="01f03-151">Watch for spikes in CPU usage that correspond with timeouts.</span></span> <span data-ttu-id="01f03-152">På grund av hög CPU, du kan också se högt `in: XXX` värdena i `TimeoutException` felmeddelanden som beskrivs i hello [Burst av trafik](#burst-of-traffic) avsnitt.</span><span class="sxs-lookup"><span data-stu-id="01f03-152">As a result of high CPU, you may also see high `in: XXX` values in `TimeoutException` error messages as described in hello [Burst of traffic](#burst-of-traffic) section.</span></span>

> [!NOTE]
> <span data-ttu-id="01f03-153">StackExchange.Redis 1.1.603 och senare inkluderar hello `local-cpu` mått i `TimeoutException` felmeddelanden.</span><span class="sxs-lookup"><span data-stu-id="01f03-153">StackExchange.Redis 1.1.603 and later includes hello `local-cpu` metric in `TimeoutException` error messages.</span></span> <span data-ttu-id="01f03-154">Se till att du använder hello senaste versionen av hello [StackExchange.Redis NuGet-paketet](https://www.nuget.org/packages/StackExchange.Redis/).</span><span class="sxs-lookup"><span data-stu-id="01f03-154">Ensure you using hello latest version of hello [StackExchange.Redis NuGet package](https://www.nuget.org/packages/StackExchange.Redis/).</span></span> <span data-ttu-id="01f03-155">Det finns fel som ständigt fast i hello kod toomake den mer robust tootimeouts så att hello senaste version är viktigt.</span><span class="sxs-lookup"><span data-stu-id="01f03-155">There are bugs constantly being fixed in hello code toomake it more robust tootimeouts so having hello latest version is important.</span></span>
> 
> 

#### <a name="resolution"></a><span data-ttu-id="01f03-156">Lösning</span><span class="sxs-lookup"><span data-stu-id="01f03-156">Resolution</span></span>
<span data-ttu-id="01f03-157">Uppgradera tooa VM större med mer CPU-kapaciteten eller undersöka vad som orsakar processoranvändning.</span><span class="sxs-lookup"><span data-stu-id="01f03-157">Upgrade tooa larger VM size with more CPU capacity or investigate what is causing CPU spikes.</span></span> 

### <a name="client-side-bandwidth-exceeded"></a><span data-ttu-id="01f03-158">Klienten sida bandbredd överskreds</span><span class="sxs-lookup"><span data-stu-id="01f03-158">Client side bandwidth exceeded</span></span>
#### <a name="problem"></a><span data-ttu-id="01f03-159">Problem</span><span class="sxs-lookup"><span data-stu-id="01f03-159">Problem</span></span>
<span data-ttu-id="01f03-160">Klientdatorer med olika storlek har begränsningar på hur mycket bandbredd som de finns tillgängliga.</span><span class="sxs-lookup"><span data-stu-id="01f03-160">Different sized client machines have limitations on how much network bandwidth they have available.</span></span> <span data-ttu-id="01f03-161">Om klienten hello överskrider hello bandbredd och sedan data kommer inte att bearbetas på klientsidan för hello snabbt hello-servern skickar den.</span><span class="sxs-lookup"><span data-stu-id="01f03-161">If hello client exceeds hello available bandwidth, then data will not be processed on hello client side as quickly as hello server is sending it.</span></span> <span data-ttu-id="01f03-162">Detta kan leda till tootimeouts.</span><span class="sxs-lookup"><span data-stu-id="01f03-162">This can lead tootimeouts.</span></span>

#### <a name="measurement"></a><span data-ttu-id="01f03-163">Mätning</span><span class="sxs-lookup"><span data-stu-id="01f03-163">Measurement</span></span>
<span data-ttu-id="01f03-164">Övervaka hur bandbreddsanvändningen förändras över tid genom att använda code [som detta](https://github.com/JonCole/SampleCode/blob/master/BandWidthMonitor/BandwidthLogger.cs).</span><span class="sxs-lookup"><span data-stu-id="01f03-164">Monitor how your Bandwidth usage change over time using code [like this](https://github.com/JonCole/SampleCode/blob/master/BandWidthMonitor/BandwidthLogger.cs).</span></span> <span data-ttu-id="01f03-165">Observera att den här koden inte kan köras i vissa miljöer med begränsad behörighet (till exempel Azure webbplatser).</span><span class="sxs-lookup"><span data-stu-id="01f03-165">Note that this code may not run successfully in some environments with restricted permissions (like Azure web sites).</span></span>

#### <a name="resolution"></a><span data-ttu-id="01f03-166">Lösning</span><span class="sxs-lookup"><span data-stu-id="01f03-166">Resolution</span></span>
<span data-ttu-id="01f03-167">Öka klienten VM-storlek eller minska nätverksbandbredden.</span><span class="sxs-lookup"><span data-stu-id="01f03-167">Increase Client VM size or reduce network bandwidth consumption.</span></span>

### <a name="large-requestresponse-size"></a><span data-ttu-id="01f03-168">Storlek för stora frågor och svar</span><span class="sxs-lookup"><span data-stu-id="01f03-168">Large Request/Response Size</span></span>
#### <a name="problem"></a><span data-ttu-id="01f03-169">Problem</span><span class="sxs-lookup"><span data-stu-id="01f03-169">Problem</span></span>
<span data-ttu-id="01f03-170">Tidsgränser kan medföra att en stor begäran och svar.</span><span class="sxs-lookup"><span data-stu-id="01f03-170">A large request/response can cause timeouts.</span></span> <span data-ttu-id="01f03-171">Anta exempelvis din timeout-värde konfigureras på din klient är 1 sekund.</span><span class="sxs-lookup"><span data-stu-id="01f03-171">As an example, Suppose your timeout value configured on your client is 1 second.</span></span> <span data-ttu-id="01f03-172">Ditt program begär två nycklar (t.ex.) ”A” och ”B”) på hello samtidigt (med hjälp av hello samma fysiska nätverksanslutningen).</span><span class="sxs-lookup"><span data-stu-id="01f03-172">Your application requests two keys (e.g. 'A' and 'B') at hello same time (using hello same physical network connection).</span></span> <span data-ttu-id="01f03-173">De flesta klienter stöder ”Pipelining” begäranden, så att båda begäranden ”A” och ”B” skickas på hello överföring toohello servern en efter hello andra utan att vänta på hello svar.</span><span class="sxs-lookup"><span data-stu-id="01f03-173">Most clients support "Pipelining" of requests, such that both requests 'A' and 'B' are sent on hello wire toohello server one after hello other without waiting for hello responses.</span></span> <span data-ttu-id="01f03-174">hello servern skickar hello svar tillbaka i hello samma ordning.</span><span class="sxs-lookup"><span data-stu-id="01f03-174">hello server will send hello responses back in hello same order.</span></span> <span data-ttu-id="01f03-175">Om svaret ”A” är stor äta nog den större delen av hello tidsgräns för efterföljande förfrågningar.</span><span class="sxs-lookup"><span data-stu-id="01f03-175">If response 'A' is large enough it can eat up most of hello timeout for subsequent requests.</span></span> 

<span data-ttu-id="01f03-176">hello som följande exempel visar det här scenariot.</span><span class="sxs-lookup"><span data-stu-id="01f03-176">hello following example demonstrates this scenario.</span></span> <span data-ttu-id="01f03-177">I det här scenariot hello begäran ”A” och ”B” skickas snabbt hello servern börjar skicka snabbt svar ”A” och ”B”, men på grund av data överföringstiden, ”B” fastna bakom andra begäran och gånger ut även om hello servern svarade snabbt.</span><span class="sxs-lookup"><span data-stu-id="01f03-177">In this scenario, Request 'A' and 'B' are sent quickly, hello server starts sending responses 'A' and 'B' quickly, but because of data transfer times, 'B' get stuck behind hello other request and times out even though hello server responded quickly.</span></span>

    |-------- 1 Second Timeout (A)----------|
    |-Request A-|
         |-------- 1 Second Timeout (B) ----------|
         |-Request B-|
                |- Read Response A --------|
                                           |- Read Response B-| (**TIMEOUT**)



#### <a name="measurement"></a><span data-ttu-id="01f03-178">Mätning</span><span class="sxs-lookup"><span data-stu-id="01f03-178">Measurement</span></span>
<span data-ttu-id="01f03-179">Det här är en svårt en toomeasure.</span><span class="sxs-lookup"><span data-stu-id="01f03-179">This is a difficult one toomeasure.</span></span> <span data-ttu-id="01f03-180">Du har i princip tooinstrument din kod tootrack stora klientbegäranden och svar.</span><span class="sxs-lookup"><span data-stu-id="01f03-180">You basically have tooinstrument your client code tootrack large requests and responses.</span></span> 

#### <a name="resolution"></a><span data-ttu-id="01f03-181">Lösning</span><span class="sxs-lookup"><span data-stu-id="01f03-181">Resolution</span></span>
1. <span data-ttu-id="01f03-182">Redis är optimerad för ett stort antal små värden i stället för ett par stora värden.</span><span class="sxs-lookup"><span data-stu-id="01f03-182">Redis is optimized for a large number of small values, rather than a few large values.</span></span> <span data-ttu-id="01f03-183">hello önskade lösningen är toobreak upp data till relaterade mindre värden.</span><span class="sxs-lookup"><span data-stu-id="01f03-183">hello preferred solution is toobreak up your data into related smaller values.</span></span> <span data-ttu-id="01f03-184">Se hello [vad är hello perfekt storlek värdeintervallet för redis? Är 100KB för stor? ](https://groups.google.com/forum/#!searchin/redis-db/size/redis-db/n7aa2A4DZDs/3OeEPHSQBAAJ) efter information kring varför mindre värden rekommenderas.</span><span class="sxs-lookup"><span data-stu-id="01f03-184">See hello [What is hello ideal value size range for redis? Is 100KB too large?](https://groups.google.com/forum/#!searchin/redis-db/size/redis-db/n7aa2A4DZDs/3OeEPHSQBAAJ) post for details around why smaller values are recommended.</span></span>
2. <span data-ttu-id="01f03-185">Öka hello storleken på den virtuella datorn (för klient och Server för Redis-Cache) tooget högre bandbredd-funktioner, vilket minskar data transfer gånger större svar.</span><span class="sxs-lookup"><span data-stu-id="01f03-185">Increase hello size of your VM (for client and Redis Cache Server), tooget higher bandwidth capabilities, reducing data transfer times for larger responses.</span></span> <span data-ttu-id="01f03-186">Observera att få mer bandbredd på bara hello servern eller bara på hello klienten kanske inte är tillräckligt.</span><span class="sxs-lookup"><span data-stu-id="01f03-186">Note that getting more bandwidth on just hello server or just on hello client may not be enough.</span></span> <span data-ttu-id="01f03-187">Mäter bandbreddsanvändningen och jämför den toohello funktionerna i hello storlek för den virtuella datorn du har för närvarande.</span><span class="sxs-lookup"><span data-stu-id="01f03-187">Measure your bandwidth usage and compare it toohello capabilities of hello size of VM you currently have.</span></span>
3. <span data-ttu-id="01f03-188">Öka hello antalet `ConnectionMultiplexer` objekt användning och resursallokering begäranden via olika anslutningar.</span><span class="sxs-lookup"><span data-stu-id="01f03-188">Increase hello number of `ConnectionMultiplexer` objects you use and round-robin requests over different connections.</span></span>

### <a name="what-happened-toomy-data-in-redis"></a><span data-ttu-id="01f03-189">Vad hände toomy data i Redis?</span><span class="sxs-lookup"><span data-stu-id="01f03-189">What happened toomy data in Redis?</span></span>
#### <a name="problem"></a><span data-ttu-id="01f03-190">Problem</span><span class="sxs-lookup"><span data-stu-id="01f03-190">Problem</span></span>
<span data-ttu-id="01f03-191">Förväntat för vissa data toobe i min Azure Redis-Cache-instans, men det verkar vara inte toobe det.</span><span class="sxs-lookup"><span data-stu-id="01f03-191">I expected for certain data toobe in my Azure Redis Cache instance but it didn't seem toobe there.</span></span>

#### <a name="resolution"></a><span data-ttu-id="01f03-192">Lösning</span><span class="sxs-lookup"><span data-stu-id="01f03-192">Resolution</span></span>
<span data-ttu-id="01f03-193">Se [vad hände toomy data i Redis?](https://gist.github.com/JonCole/b6354d92a2d51c141490f10142884ea4#file-whathappenedtomydatainredis-md) för möjliga orsaker och lösningar.</span><span class="sxs-lookup"><span data-stu-id="01f03-193">See [What happened toomy data in Redis?](https://gist.github.com/JonCole/b6354d92a2d51c141490f10142884ea4#file-whathappenedtomydatainredis-md) for possible causes and resolutions.</span></span>

## <a name="server-side-troubleshooting"></a><span data-ttu-id="01f03-194">Felsökning på Server</span><span class="sxs-lookup"><span data-stu-id="01f03-194">Server side troubleshooting</span></span>
<span data-ttu-id="01f03-195">Det här avsnittet beskrivs felsöker problem som uppstår på grund av ett villkor på hello cache-server.</span><span class="sxs-lookup"><span data-stu-id="01f03-195">This section discusses troubleshooting issues that occur because of a condition on hello cache server.</span></span>

* [<span data-ttu-id="01f03-196">Minnesbelastning på hello-server</span><span class="sxs-lookup"><span data-stu-id="01f03-196">Memory Pressure on hello server</span></span>](#memory-pressure-on-the-server)
* [<span data-ttu-id="01f03-197">Hög processoranvändning / Server att läsa in</span><span class="sxs-lookup"><span data-stu-id="01f03-197">High CPU usage / Server Load</span></span>](#high-cpu-usage-server-load)
* [<span data-ttu-id="01f03-198">Serverns sida bandbredd överskreds</span><span class="sxs-lookup"><span data-stu-id="01f03-198">Server Side Bandwidth Exceeded</span></span>](#server-side-bandwidth-exceeded)

### <a name="memory-pressure-on-hello-server"></a><span data-ttu-id="01f03-199">Minnesbelastning på hello-server</span><span class="sxs-lookup"><span data-stu-id="01f03-199">Memory Pressure on hello server</span></span>
#### <a name="problem"></a><span data-ttu-id="01f03-200">Problem</span><span class="sxs-lookup"><span data-stu-id="01f03-200">Problem</span></span>
<span data-ttu-id="01f03-201">Minnesbelastning på serversidan hello leder tooall typer av problem med prestanda som kan fördröja behandlingen av begäran.</span><span class="sxs-lookup"><span data-stu-id="01f03-201">Memory pressure on hello server side leads tooall kinds of performance problems that can delay processing of requests.</span></span> <span data-ttu-id="01f03-202">När minnesbelastning träffar har hello system toopage data från fysiskt minne toovirtual minne som finns på disken.</span><span class="sxs-lookup"><span data-stu-id="01f03-202">When memory pressure hits, hello system typically has toopage data from physical memory toovirtual memory which is on disk.</span></span> <span data-ttu-id="01f03-203">Detta *sidan felaktigt* orsaker hello system tooslow ned avsevärt.</span><span class="sxs-lookup"><span data-stu-id="01f03-203">This *page faulting* causes hello system tooslow down significantly.</span></span> <span data-ttu-id="01f03-204">Det finns flera möjliga orsaker till detta minnesbelastning:</span><span class="sxs-lookup"><span data-stu-id="01f03-204">There are several possible causes of this memory pressure:</span></span> 

1. <span data-ttu-id="01f03-205">Du har fyllt hello cache toofull kapacitet med data.</span><span class="sxs-lookup"><span data-stu-id="01f03-205">You have filled hello cache toofull capacity with data.</span></span> 
2. <span data-ttu-id="01f03-206">Redis ser hög minnesfragmenteringen - orsakas normalt genom att lagra stora objekt (Redis är optimerad för en små objekt - Se hello [vad är hello perfekt storlek värdeintervallet för redis? Är 100KB för stor? ](https://groups.google.com/forum/#!searchin/redis-db/size/redis-db/n7aa2A4DZDs/3OeEPHSQBAAJ) efter mer information).</span><span class="sxs-lookup"><span data-stu-id="01f03-206">Redis is seeing high memory fragmentation - most often caused by storing large objects (Redis is optimized for a small objects - See hello [What is hello ideal value size range for redis? Is 100KB too large?](https://groups.google.com/forum/#!searchin/redis-db/size/redis-db/n7aa2A4DZDs/3OeEPHSQBAAJ) post for details).</span></span> 

#### <a name="measurement"></a><span data-ttu-id="01f03-207">Mätning</span><span class="sxs-lookup"><span data-stu-id="01f03-207">Measurement</span></span>
<span data-ttu-id="01f03-208">Redis visar två mått som kan hjälpa dig att identifiera problemet.</span><span class="sxs-lookup"><span data-stu-id="01f03-208">Redis exposes two metrics that can help you identify this issue.</span></span> <span data-ttu-id="01f03-209">hello först är `used_memory` och hello andra `used_memory_rss`.</span><span class="sxs-lookup"><span data-stu-id="01f03-209">hello first is `used_memory` and hello other is `used_memory_rss`.</span></span> <span data-ttu-id="01f03-210">[De här måtten](cache-how-to-monitor.md#available-metrics-and-reporting-intervals) är tillgängliga i hello Azure-portalen eller via hello [Redis INFO](http://redis.io/commands/info) kommando.</span><span class="sxs-lookup"><span data-stu-id="01f03-210">[These metrics](cache-how-to-monitor.md#available-metrics-and-reporting-intervals) are available in hello Azure Portal or through hello [Redis INFO](http://redis.io/commands/info) command.</span></span>

#### <a name="resolution"></a><span data-ttu-id="01f03-211">Lösning</span><span class="sxs-lookup"><span data-stu-id="01f03-211">Resolution</span></span>
<span data-ttu-id="01f03-212">Det finns flera möjliga ändringar som du kan göra toohelp Se minnesanvändningen felfri:</span><span class="sxs-lookup"><span data-stu-id="01f03-212">There are several possible changes that you can make toohelp keep memory usage healthy:</span></span>

1. <span data-ttu-id="01f03-213">[Konfigurera en princip för minne](cache-configure.md#maxmemory-policy-and-maxmemory-reserved) och Ställ in förfallodatum gånger på dina nycklar.</span><span class="sxs-lookup"><span data-stu-id="01f03-213">[Configure a memory policy](cache-configure.md#maxmemory-policy-and-maxmemory-reserved) and set expiration times on your keys.</span></span> <span data-ttu-id="01f03-214">Observera att det räcker kanske inte om du har fragmentering.</span><span class="sxs-lookup"><span data-stu-id="01f03-214">Note that this may not be sufficient if you have fragmentation.</span></span>
2. <span data-ttu-id="01f03-215">[Anger värdet maxmemory-reserverade](cache-configure.md#maxmemory-policy-and-maxmemory-reserved) som är tillräckligt stor för toocompensate för minnesfragmentering.</span><span class="sxs-lookup"><span data-stu-id="01f03-215">[Configure a maxmemory-reserved value](cache-configure.md#maxmemory-policy-and-maxmemory-reserved) that is large enough toocompensate for memory fragmentation.</span></span>
3. <span data-ttu-id="01f03-216">Dela upp stora cachelagrade objekten i mindre relaterade objekt.</span><span class="sxs-lookup"><span data-stu-id="01f03-216">Break up your large cached objects into smaller related objects.</span></span>
4. <span data-ttu-id="01f03-217">[Skala](cache-how-to-scale.md) tooa större cachestorlek.</span><span class="sxs-lookup"><span data-stu-id="01f03-217">[Scale](cache-how-to-scale.md) tooa larger cache size.</span></span>
5. <span data-ttu-id="01f03-218">Om du använder en [premium-cache med Redis cluster aktiverat](cache-how-to-premium-clustering.md) kan du [öka hello antalet shards](cache-how-to-premium-clustering.md#change-the-cluster-size-on-a-running-premium-cache).</span><span class="sxs-lookup"><span data-stu-id="01f03-218">If you are using a [premium cache with Redis cluster enabled](cache-how-to-premium-clustering.md) you can [increase hello number of shards](cache-how-to-premium-clustering.md#change-the-cluster-size-on-a-running-premium-cache).</span></span>

### <a name="high-cpu-usage--server-load"></a><span data-ttu-id="01f03-219">Hög processoranvändning / Server att läsa in</span><span class="sxs-lookup"><span data-stu-id="01f03-219">High CPU usage / Server Load</span></span>
#### <a name="problem"></a><span data-ttu-id="01f03-220">Problem</span><span class="sxs-lookup"><span data-stu-id="01f03-220">Problem</span></span>
<span data-ttu-id="01f03-221">Hög CPU-användning kan innebära att hello på klientsidan kan inte tooprocess svar i tid från Redis trots att Redis skickade hello svar snabbt.</span><span class="sxs-lookup"><span data-stu-id="01f03-221">High CPU usage can mean that hello client side can fail tooprocess a response from Redis in a timely fashion even though Redis sent hello response very quickly.</span></span>

#### <a name="measurement"></a><span data-ttu-id="01f03-222">Mätning</span><span class="sxs-lookup"><span data-stu-id="01f03-222">Measurement</span></span>
<span data-ttu-id="01f03-223">Övervakaren hello System Wide processoranvändning via hello Azure-portalen eller hello associerade prestandaräknare.</span><span class="sxs-lookup"><span data-stu-id="01f03-223">Monitor hello System Wide CPU usage through hello Azure Portal or through hello associated performance counter.</span></span> <span data-ttu-id="01f03-224">Var noga med att inte toomonitor *processen* CPU eftersom en enda process kan ha låg CPU-belastning på hello samma tid att hela systemets CPU kan vara hög.</span><span class="sxs-lookup"><span data-stu-id="01f03-224">Be careful not toomonitor *process* CPU because a single process can have low CPU usage at hello same time that overall system CPU can be high.</span></span> <span data-ttu-id="01f03-225">Håll utkik efter toppar i CPU-användning som motsvarar timeout.</span><span class="sxs-lookup"><span data-stu-id="01f03-225">Watch for spikes in CPU usage that correspond with timeouts.</span></span>

#### <a name="resolution"></a><span data-ttu-id="01f03-226">Lösning</span><span class="sxs-lookup"><span data-stu-id="01f03-226">Resolution</span></span>
<span data-ttu-id="01f03-227">[Skala](cache-how-to-scale.md) tooa större cache tjänstnivån med mer CPU-kapaciteten eller undersöka vad som orsakar processoranvändning.</span><span class="sxs-lookup"><span data-stu-id="01f03-227">[Scale](cache-how-to-scale.md) tooa larger cache tier with more CPU capacity or investigate what is causing CPU spikes.</span></span> 

### <a name="server-side-bandwidth-exceeded"></a><span data-ttu-id="01f03-228">Serverns sida bandbredd överskreds</span><span class="sxs-lookup"><span data-stu-id="01f03-228">Server Side Bandwidth Exceeded</span></span>
#### <a name="problem"></a><span data-ttu-id="01f03-229">Problem</span><span class="sxs-lookup"><span data-stu-id="01f03-229">Problem</span></span>
<span data-ttu-id="01f03-230">Cacheinstanser med olika storlek har begränsningar på hur mycket bandbredd som de finns tillgängliga.</span><span class="sxs-lookup"><span data-stu-id="01f03-230">Different sized cache instances have limitations on how much network bandwidth they have available.</span></span> <span data-ttu-id="01f03-231">Om hello server överskrider den tillgängliga bandbredden för hello, sedan skickas data inte toohello klienten så snabbt.</span><span class="sxs-lookup"><span data-stu-id="01f03-231">If hello server exceeds hello available bandwidth, then data will not be sent toohello client as quickly.</span></span> <span data-ttu-id="01f03-232">Detta kan leda till tootimeouts.</span><span class="sxs-lookup"><span data-stu-id="01f03-232">This can lead tootimeouts.</span></span>

#### <a name="measurement"></a><span data-ttu-id="01f03-233">Mätning</span><span class="sxs-lookup"><span data-stu-id="01f03-233">Measurement</span></span>
<span data-ttu-id="01f03-234">Du kan övervaka hello `Cache Read` mått, som är hello mängd data läses från hello cacheminnet i megabyte per sekund (MB/s) under hello angivna reporting intervallet.</span><span class="sxs-lookup"><span data-stu-id="01f03-234">You can monitor hello `Cache Read` metric, which is hello amount of data read from hello cache in Megabytes per second (MB/s) during hello specified reporting interval.</span></span> <span data-ttu-id="01f03-235">Det här värdet motsvarar toohello nätverksbandbredd som används av det här cacheminnet.</span><span class="sxs-lookup"><span data-stu-id="01f03-235">This value corresponds toohello network bandwidth used by this cache.</span></span> <span data-ttu-id="01f03-236">Om du vill använda tooset in aviseringar för server side nätverket bandbreddsgränser kan du skapa dem med hjälp av det här `Cache Read` räknaren.</span><span class="sxs-lookup"><span data-stu-id="01f03-236">If you want tooset up alerts for server side network bandwidth limits, you can create them using this `Cache Read` counter.</span></span> <span data-ttu-id="01f03-237">Jämför din avläsningar med hello värdena i [tabellen](cache-faq.md#cache-performance) för hello observerats bandbreddsgränser för olika cache priser nivåer och storlekar.</span><span class="sxs-lookup"><span data-stu-id="01f03-237">Compare your readings with hello values in [this table](cache-faq.md#cache-performance) for hello observed bandwidth limits for various cache pricing tiers and sizes.</span></span>

#### <a name="resolution"></a><span data-ttu-id="01f03-238">Lösning</span><span class="sxs-lookup"><span data-stu-id="01f03-238">Resolution</span></span>
<span data-ttu-id="01f03-239">Om du närmar sig konsekvent hello observerats Maximal bandbredd för din prisnivå nivå och cache-storlek, bör du [skalning](cache-how-to-scale.md) tooa priser nivå eller storlek som har större nätverksbandbredd, med hello värden i [tabellen](cache-faq.md#cache-performance) som en vägledning.</span><span class="sxs-lookup"><span data-stu-id="01f03-239">If you are consistently near hello observed maximum bandwidth for your pricing tier and cache size, consider [scaling](cache-how-to-scale.md) tooa pricing tier or size that has greater network bandwidth, using hello values in [this table](cache-faq.md#cache-performance) as a guide.</span></span>

## <a name="stackexchangeredis-timeout-exceptions"></a><span data-ttu-id="01f03-240">StackExchange.Redis tidsgränsfel</span><span class="sxs-lookup"><span data-stu-id="01f03-240">StackExchange.Redis timeout exceptions</span></span>
<span data-ttu-id="01f03-241">StackExchange.Redis använder en konfigurationsinställning namngivna `synctimeout` för synkrona åtgärder som har ett standardvärde på 1 000 ms.</span><span class="sxs-lookup"><span data-stu-id="01f03-241">StackExchange.Redis uses a configuration setting named `synctimeout` for synchronous operations which has a default value  of 1000 ms.</span></span> <span data-ttu-id="01f03-242">Om ett synkrona anrop inte slutförs i fastställs hello tid, hello StackExchange.Redis klienten returnerar en timeout fel liknande toohello följande exempel.</span><span class="sxs-lookup"><span data-stu-id="01f03-242">If a synchronous call doesn’t complete in hello stipulated time, hello StackExchange.Redis client throws a timeout error similar toohello following example.</span></span>

    System.TimeoutException: Timeout performing MGET 2728cc84-58ae-406b-8ec8-3f962419f641, inst: 1,mgr: Inactive, queue: 73, qu=6, qs=67, qc=0, wr=1/1, in=0/0 IOCP: (Busy=6, Free=999, Min=2,Max=1000), WORKER (Busy=7,Free=8184,Min=2,Max=8191)


<span data-ttu-id="01f03-243">Det här felmeddelandet innehåller mått som kan hjälpa dig att peka toohello orsaken och möjlig lösning av hello problemet.</span><span class="sxs-lookup"><span data-stu-id="01f03-243">This error message contains metrics that can help point you toohello cause and possible resolution of hello issue.</span></span> <span data-ttu-id="01f03-244">hello innehåller följande tabell information om hello fel meddelande mått.</span><span class="sxs-lookup"><span data-stu-id="01f03-244">hello following table contains details about hello error message metrics.</span></span>

| <span data-ttu-id="01f03-245">Fel meddelande mått</span><span class="sxs-lookup"><span data-stu-id="01f03-245">Error message metric</span></span> | <span data-ttu-id="01f03-246">Information</span><span class="sxs-lookup"><span data-stu-id="01f03-246">Details</span></span> |
| --- | --- |
| <span data-ttu-id="01f03-247">PL</span><span class="sxs-lookup"><span data-stu-id="01f03-247">inst</span></span> |<span data-ttu-id="01f03-248">I hello senaste tidsintervallet: 0-kommandon som har utfärdats.</span><span class="sxs-lookup"><span data-stu-id="01f03-248">In hello last time slice: 0 commands have been issued</span></span> |
| <span data-ttu-id="01f03-249">hanterare av</span><span class="sxs-lookup"><span data-stu-id="01f03-249">mgr</span></span> |<span data-ttu-id="01f03-250">hello socket manager utför `socket.select` så att den frågar hello OS tooindicate en socket som har något toodo; i princip: hello läsaren inte aktivt läsning från hello nätverk eftersom det inte tror att det är något toodo</span><span class="sxs-lookup"><span data-stu-id="01f03-250">hello socket manager is performing `socket.select` which means it is asking hello OS tooindicate a socket that has something toodo; basically: hello reader is not actively reading from hello network because it doesn't think there is anything toodo</span></span> |
| <span data-ttu-id="01f03-251">Kön</span><span class="sxs-lookup"><span data-stu-id="01f03-251">queue</span></span> |<span data-ttu-id="01f03-252">Totalt antal åtgärder pågående har 73</span><span class="sxs-lookup"><span data-stu-id="01f03-252">There are 73 total in-progress operations</span></span> |
| <span data-ttu-id="01f03-253">citattecken kring</span><span class="sxs-lookup"><span data-stu-id="01f03-253">qu</span></span> |<span data-ttu-id="01f03-254">6 hello pågående åtgärder finns i hello unsent kö och har inte skrivits ännu toohello utgående nätverk</span><span class="sxs-lookup"><span data-stu-id="01f03-254">6 of hello in-progress operations are in hello unsent queue and have not yet been written toohello outbound network</span></span> |
| <span data-ttu-id="01f03-255">Qs</span><span class="sxs-lookup"><span data-stu-id="01f03-255">qs</span></span> |<span data-ttu-id="01f03-256">67 han pågående åtgärder har skickats toohello server men svaret är inte tillgänglig ännu.</span><span class="sxs-lookup"><span data-stu-id="01f03-256">67 of he in-progress operations have been sent toohello server but a response is not yet available.</span></span> <span data-ttu-id="01f03-257">hello svaret kan bli `Not yet sent by hello server` eller`sent by hello server but not yet processed by hello client.`</span><span class="sxs-lookup"><span data-stu-id="01f03-257">hello response could be `Not yet sent by hello server` or `sent by hello server but not yet processed by hello client.`</span></span> |
| <span data-ttu-id="01f03-258">QC</span><span class="sxs-lookup"><span data-stu-id="01f03-258">qc</span></span> |<span data-ttu-id="01f03-259">0 hello pågående åtgärder har sett svar men har ännu inte markerats som slutförd på grund av toowaiting på hello slutförande loop</span><span class="sxs-lookup"><span data-stu-id="01f03-259">0 of hello in-progress operations have seen replies but have not yet been marked as complete due toowaiting on hello completion loop</span></span> |
| <span data-ttu-id="01f03-260">WR</span><span class="sxs-lookup"><span data-stu-id="01f03-260">wr</span></span> |<span data-ttu-id="01f03-261">Det finns en aktiv skrivaren (vilket innebär att hello 6 ej skickade begäranden inte ignoreras) byte/activewriters</span><span class="sxs-lookup"><span data-stu-id="01f03-261">There is an active writer (meaning hello 6 unsent requests are not being ignored) bytes/activewriters</span></span> |
| <span data-ttu-id="01f03-262">i</span><span class="sxs-lookup"><span data-stu-id="01f03-262">in</span></span> |<span data-ttu-id="01f03-263">Det finns ingen aktiv läsare och noll byte är tillgängliga toobe läsa på hello NIC byte/activereaders</span><span class="sxs-lookup"><span data-stu-id="01f03-263">There are no active readers and zero bytes are available toobe read on hello NIC bytes/activereaders</span></span> |

### <a name="steps-tooinvestigate"></a><span data-ttu-id="01f03-264">Steg tooinvestigate</span><span class="sxs-lookup"><span data-stu-id="01f03-264">Steps tooinvestigate</span></span>
1. <span data-ttu-id="01f03-265">Som bästa praxis se till att använder du hello efter mönster tooconnect när hello StackExchange.Redis-klienten.</span><span class="sxs-lookup"><span data-stu-id="01f03-265">As a best practice make sure you are using hello following pattern tooconnect when using hello StackExchange.Redis client.</span></span>

    ```c#
    private static Lazy<ConnectionMultiplexer> lazyConnection = new Lazy<ConnectionMultiplexer>(() =>
    {
        return ConnectionMultiplexer.Connect("cachename.redis.cache.windows.net,abortConnect=false,ssl=true,password=...");
    
    });
    
    public static ConnectionMultiplexer Connection
    {
        get
        {
            return lazyConnection.Value;
        }
    }
    ````

    <span data-ttu-id="01f03-266">Mer information finns i [ansluta toohello cacheminne med hjälp av StackExchange.Redis](cache-dotnet-how-to-use-azure-redis-cache.md#connect-to-the-cache).</span><span class="sxs-lookup"><span data-stu-id="01f03-266">For more information, see [Connect toohello cache using StackExchange.Redis](cache-dotnet-how-to-use-azure-redis-cache.md#connect-to-the-cache).</span></span>

1. <span data-ttu-id="01f03-267">Se till att din Azure Redis-Cache och hello klientprogram hello samma region i Azure.</span><span class="sxs-lookup"><span data-stu-id="01f03-267">Ensure that your Azure Redis Cache and hello client application are in hello same region in Azure.</span></span> <span data-ttu-id="01f03-268">Till exempel du kanske att få timeout när ditt cacheminne är i östra USA men hello klienten finns i USA, västra och hello begäran inte slutförs inom hello `synctimeout` intervall eller så kan du får ett timeout när du felsöker från lokala utvecklingsdatorn.</span><span class="sxs-lookup"><span data-stu-id="01f03-268">For example, you might be getting timeouts when your cache is in East US but hello client is in West US and hello request doesn't complete within hello `synctimeout` interval or you might be getting timeouts when you are debugging from your local development machine.</span></span> 
   
    <span data-ttu-id="01f03-269">Det har rekommenderar toohave hello cache och hello i hello-klienten i samma Azure-region.</span><span class="sxs-lookup"><span data-stu-id="01f03-269">It’s highly recommended toohave hello cache and in hello client in hello same Azure region.</span></span> <span data-ttu-id="01f03-270">Om du har ett scenario som innehåller mellan region anrop, bör du ange hello `synctimeout` tooa intervallvärdet högre än hello 1 000 ms standardintervallet genom att inkludera en `synctimeout` egenskap i hello anslutningssträngen.</span><span class="sxs-lookup"><span data-stu-id="01f03-270">If you have a scenario that includes cross region calls, you should set hello `synctimeout` interval tooa value higher than hello default 1000 ms interval by including a `synctimeout` property in hello connection string.</span></span> <span data-ttu-id="01f03-271">hello följande exempel visas en StackExchange.Redis cache anslutning sträng fragment med en `synctimeout` av 2000 ms.</span><span class="sxs-lookup"><span data-stu-id="01f03-271">hello following example shows a StackExchange.Redis cache connection string snippet with a `synctimeout` of 2000 ms.</span></span>
   
        synctimeout=2000,cachename.redis.cache.windows.net,abortConnect=false,ssl=true,password=...
2. <span data-ttu-id="01f03-272">Se till att du använder hello senaste versionen av hello [StackExchange.Redis NuGet-paketet](https://www.nuget.org/packages/StackExchange.Redis/).</span><span class="sxs-lookup"><span data-stu-id="01f03-272">Ensure you using hello latest version of hello [StackExchange.Redis NuGet package](https://www.nuget.org/packages/StackExchange.Redis/).</span></span> <span data-ttu-id="01f03-273">Det finns fel som ständigt fast i hello kod toomake den mer robust tootimeouts så att hello senaste version är viktigt.</span><span class="sxs-lookup"><span data-stu-id="01f03-273">There are bugs constantly being fixed in hello code toomake it more robust tootimeouts so having hello latest version is important.</span></span>
3. <span data-ttu-id="01f03-274">Om det finns begäranden som är komma bundna av bandbreddsbegränsningar på hello server eller klient, tar längre tid för dem toocomplete och därmed orsakar timeout.</span><span class="sxs-lookup"><span data-stu-id="01f03-274">If there are requests that are getting bound by bandwidth limitations on hello server or client, it will take longer for them toocomplete and thereby cause timeouts.</span></span> <span data-ttu-id="01f03-275">toosee om din tidsgränsen på grund av toonetwork bandbredd hello server, se [Server side bandbredd överskridit](#server-side-bandwidth-exceeded).</span><span class="sxs-lookup"><span data-stu-id="01f03-275">toosee if your timeout is due toonetwork bandwidth on hello server, see [Server side bandwidth exceeded](#server-side-bandwidth-exceeded).</span></span> <span data-ttu-id="01f03-276">toosee om din tidsgränsen på grund av tooclient nätverksbandbredd finns [klienten sida bandbredd överskridit](#client-side-bandwidth-exceeded).</span><span class="sxs-lookup"><span data-stu-id="01f03-276">toosee if your timeout is due tooclient network bandwidth, see [Client side bandwidth exceeded](#client-side-bandwidth-exceeded).</span></span>
4. <span data-ttu-id="01f03-277">Är du komma CPU bundna på hello server eller hello-klient?</span><span class="sxs-lookup"><span data-stu-id="01f03-277">Are you getting CPU bound on hello server or on hello client?</span></span>
   
   * <span data-ttu-id="01f03-278">Kontrollera om du är komma bundna av processor på klienten som kan orsaka hello begäran toonot att behandlas inom hello `synctimeout` intervall, vilket kan orsaka en tidsgräns.</span><span class="sxs-lookup"><span data-stu-id="01f03-278">Check if you are getting bound by CPU on your client which could cause hello request toonot be processed within hello `synctimeout` interval, thus causing a timeout.</span></span> <span data-ttu-id="01f03-279">Flytta tooa större storlek på klientens eller distribuerar hello belastningen hjälper toocontrol detta.</span><span class="sxs-lookup"><span data-stu-id="01f03-279">Moving tooa larger client size or distributing hello load can help toocontrol this.</span></span> 
   * <span data-ttu-id="01f03-280">Kontrollera om du får CPU bunden på hello-servern genom att övervaka hello `CPU` [cachelagra prestanda mått](cache-how-to-monitor.md#available-metrics-and-reporting-intervals).</span><span class="sxs-lookup"><span data-stu-id="01f03-280">Check if you are getting CPU bound on hello server by monitoring hello `CPU` [cache performance metric](cache-how-to-monitor.md#available-metrics-and-reporting-intervals).</span></span> <span data-ttu-id="01f03-281">Begäranden som kommer medan Redis CPU-bundna kan orsaka sådana begäranden tootimeout.</span><span class="sxs-lookup"><span data-stu-id="01f03-281">Requests coming in while Redis is CPU bound can cause those requests tootimeout.</span></span> <span data-ttu-id="01f03-282">tooaddress detta kan du distribuera hello ladda över flera delar i premium-cache eller uppgradera tooa större storlek eller prisnivån.</span><span class="sxs-lookup"><span data-stu-id="01f03-282">tooaddress this you can distribute hello load across multiple shards in a premium cache, or upgrade tooa larger size or pricing tier.</span></span> <span data-ttu-id="01f03-283">Mer information finns i [servern sida bandbredd överskridit](#server-side-bandwidth-exceeded).</span><span class="sxs-lookup"><span data-stu-id="01f03-283">For more information, see [Server Side Bandwidth Exceeded](#server-side-bandwidth-exceeded).</span></span>
5. <span data-ttu-id="01f03-284">Finns det kommandon som tar lång tid tooprocess på hello-servern?</span><span class="sxs-lookup"><span data-stu-id="01f03-284">Are there commands taking long time tooprocess on hello server?</span></span> <span data-ttu-id="01f03-285">Tidskrävande kommandon som tar lång tid tooprocess på hello redis-servern kan orsaka timeout.</span><span class="sxs-lookup"><span data-stu-id="01f03-285">Long running commands that are taking long time tooprocess on hello redis-server can cause timeouts.</span></span> <span data-ttu-id="01f03-286">Är några exempel på tidskrävande kommandon `mget` med ett stort antal nycklar, `keys *` eller felaktiga lua skript.</span><span class="sxs-lookup"><span data-stu-id="01f03-286">Some examples of long running commands are `mget` with large numbers of keys, `keys *` or poorly written lua scripts.</span></span> <span data-ttu-id="01f03-287">Du kan ansluta tooyour Azure Redis-Cache-instans med hello redis-cli klienten eller använda hello [Redis-konsolen](cache-configure.md#redis-console) och kör hello [SlowLog](http://redis.io/commands/slowlog) kommandot toosee om begäran tar längre tid än förväntat.</span><span class="sxs-lookup"><span data-stu-id="01f03-287">You can connect tooyour Azure Redis Cache instance using hello redis-cli client or use hello [Redis Console](cache-configure.md#redis-console) and run hello [SlowLog](http://redis.io/commands/slowlog) command toosee if there are requests taking longer than expected.</span></span> <span data-ttu-id="01f03-288">Redis-servern och StackExchange.Redis är optimerad för många små begäranden i stället för färre stora begäranden.</span><span class="sxs-lookup"><span data-stu-id="01f03-288">Redis Server and StackExchange.Redis are optimized for many small requests rather than fewer large requests.</span></span> <span data-ttu-id="01f03-289">Dela upp dina data i mindre segment kan du förbättra här saker.</span><span class="sxs-lookup"><span data-stu-id="01f03-289">Splitting your data into smaller chunks may improve things here.</span></span> 
   
    <span data-ttu-id="01f03-290">Information om hur du ansluter toohello Azure Redis-Cache SSL-slutpunkten med hjälp av redis-cli och stunnel finns hello [om ASP.NET Sessionstillståndsprovider för Redis-förhandsversionen](http://blogs.msdn.com/b/webdev/archive/2014/05/12/announcing-asp-net-session-state-provider-for-redis-preview-release.aspx) blogginlägg.</span><span class="sxs-lookup"><span data-stu-id="01f03-290">For information on connecting toohello Azure Redis Cache SSL endpoint using redis-cli and stunnel, see hello [Announcing ASP.NET Session State Provider for Redis Preview Release](http://blogs.msdn.com/b/webdev/archive/2014/05/12/announcing-asp-net-session-state-provider-for-redis-preview-release.aspx) blog post.</span></span> <span data-ttu-id="01f03-291">Mer information finns i [SlowLog](http://redis.io/commands/slowlog).</span><span class="sxs-lookup"><span data-stu-id="01f03-291">For more information, see [SlowLog](http://redis.io/commands/slowlog).</span></span>
6. <span data-ttu-id="01f03-292">Hög Redis-serverbelastning kan orsaka timeout.</span><span class="sxs-lookup"><span data-stu-id="01f03-292">High Redis server load can cause timeouts.</span></span> <span data-ttu-id="01f03-293">Du kan övervaka hello belastningen på servern genom att övervaka hello `Redis Server Load` [cachelagra prestanda mått](cache-how-to-monitor.md#available-metrics-and-reporting-intervals).</span><span class="sxs-lookup"><span data-stu-id="01f03-293">You can monitor hello server load by monitoring hello `Redis Server Load` [cache performance metric](cache-how-to-monitor.md#available-metrics-and-reporting-intervals).</span></span> <span data-ttu-id="01f03-294">En serverbelastningen 100 (högsta värde) innebär att hello redis-servern har varit upptagen med ingen inaktivitetstid bearbetning av begäranden.</span><span class="sxs-lookup"><span data-stu-id="01f03-294">A server load of 100 (maximum value) signifies that hello redis server has been busy, with no idle time, processing requests.</span></span> <span data-ttu-id="01f03-295">toosee om vissa begäranden tar upp alla hello serverfunktioner kör hello SlowLog kommando, enligt beskrivningen i hello föregående stycke.</span><span class="sxs-lookup"><span data-stu-id="01f03-295">toosee if certain requests are taking up all of hello server capability, run hello SlowLog command, as described in hello previous paragraph.</span></span> <span data-ttu-id="01f03-296">Mer information finns i [hög processoranvändning / Server att läsa in](#high-cpu-usage-server-load).</span><span class="sxs-lookup"><span data-stu-id="01f03-296">For more information, see [High CPU usage / Server Load](#high-cpu-usage-server-load).</span></span>
7. <span data-ttu-id="01f03-297">Var det andra händelser på hello på klientsidan som kan ha orsakat ett nätverk blip?</span><span class="sxs-lookup"><span data-stu-id="01f03-297">Was there any other event on hello client side that could have caused a network blip?</span></span> <span data-ttu-id="01f03-298">Kontrollera på hello-klient (webb, arbetsrollen eller en Iaas VM) om det fanns en händelse som skalning hello antalet instanser som klienten upp eller ned eller distribuerar en ny version av klienten hello eller Autoskala aktiveras? I våra tester som vi har hittat att Autoskala eller skala upp/ned kan utgående nätverksanslutningen gå förlorade i några sekunder.</span><span class="sxs-lookup"><span data-stu-id="01f03-298">Check on hello client (web, worker role or an Iaas VM) if there was an event like scaling hello number of client instances up or down, or deploying a new version of hello client or auto-scale is enabled?In our testing we have found that autoscale or scaling up/down can cause outbound network connectivity can be lost for several seconds.</span></span> <span data-ttu-id="01f03-299">StackExchange.Redis koden är flexibel toosuch händelser och återupprättas.</span><span class="sxs-lookup"><span data-stu-id="01f03-299">StackExchange.Redis code is resilient toosuch events and will reconnect.</span></span> <span data-ttu-id="01f03-300">Under den här tiden på ny anslutning kan alla begäranden i kö för hello timeout.</span><span class="sxs-lookup"><span data-stu-id="01f03-300">During this time of re-connection any requests in hello queue can time out.</span></span>
8. <span data-ttu-id="01f03-301">Har det skett en stor begäran föregående flera små begäran toohello Redis-Cache som gjort timeout? Hej parametern `qs` hello fel meddelandet anger hur många begäranden har skickats från hello klient toohello server, men ännu inte har bearbetat svaret.</span><span class="sxs-lookup"><span data-stu-id="01f03-301">Was there a big request preceding several small requests toohello Redis Cache that timed out? hello parameter `qs` in hello error message tells you how many requests were sent from hello client toohello server, but have not yet processed a response.</span></span> <span data-ttu-id="01f03-302">Det här värdet kan hålla växer eftersom StackExchange.Redis använder en TCP-anslutning och kan endast läsa ett svar i taget.</span><span class="sxs-lookup"><span data-stu-id="01f03-302">This value can keep growing because StackExchange.Redis uses a single TCP connection and can only read one response at a time.</span></span> <span data-ttu-id="01f03-303">Även om hello första åtgärden orsakade timeout, slutar inte hello data som skickas till eller från hello server och andra begäranden blockeras tills det är klart, orsakar timeout.</span><span class="sxs-lookup"><span data-stu-id="01f03-303">Even though hello first operation timed out, it does not stop hello data being sent to/from hello server, and other requests are blocked until this is finished, causing time outs.</span></span> <span data-ttu-id="01f03-304">En lösning är toominimize hello risken för timeout genom att säkerställa att din cache är tillräckligt stor för din arbetsbelastning och dela upp stora värden i mindre segment.</span><span class="sxs-lookup"><span data-stu-id="01f03-304">One solution is toominimize hello chance of timeouts by ensuring that your cache is large enough for your workload and splitting large values into smaller chunks.</span></span> <span data-ttu-id="01f03-305">En annan möjlig lösning är toouse en pool av `ConnectionMultiplexer` objekt i din klient och välj hello minst inlästa `ConnectionMultiplexer` när du skickar en ny begäran.</span><span class="sxs-lookup"><span data-stu-id="01f03-305">Another possible solution is toouse a pool of `ConnectionMultiplexer` objects in your client, and choose hello least loaded `ConnectionMultiplexer` when sending a new request.</span></span> <span data-ttu-id="01f03-306">Detta bör förhindra att en enda tidsgräns orsakar andra tooalso timeout för begäranden.</span><span class="sxs-lookup"><span data-stu-id="01f03-306">This should prevent a single timeout from causing other requests tooalso timeout.</span></span>
9. <span data-ttu-id="01f03-307">Om du använder `RedisSessionStateprovider`, se till att du har angett korrekt hello gör timeout.</span><span class="sxs-lookup"><span data-stu-id="01f03-307">If you are using `RedisSessionStateprovider`, ensure you have set hello retry timeout correctly.</span></span> <span data-ttu-id="01f03-308">`retrytimeoutInMilliseconds`bör vara högre än `operationTimeoutinMilliseonds`, annars inga nya försök utförs.</span><span class="sxs-lookup"><span data-stu-id="01f03-308">`retrytimeoutInMilliseconds` should be higher than `operationTimeoutinMilliseonds`, otherwise no retries will occur.</span></span> <span data-ttu-id="01f03-309">I följande exempel hello `retrytimeoutInMilliseconds` too3000 anges.</span><span class="sxs-lookup"><span data-stu-id="01f03-309">In hello following example `retrytimeoutInMilliseconds` is set too3000.</span></span> <span data-ttu-id="01f03-310">Mer information finns i [ASP.NET-Sessionstillståndsprovider för Azure Redis-Cache](cache-aspnet-session-state-provider.md) och [hur toouse hello konfigurationsparametrar för Sessionstillståndsprovider och Utdatacacheprovider](https://github.com/Azure/aspnet-redis-providers/wiki/Configuration).</span><span class="sxs-lookup"><span data-stu-id="01f03-310">For more information, see [ASP.NET Session State Provider for Azure Redis Cache](cache-aspnet-session-state-provider.md) and [How toouse hello configuration parameters of Session State Provider and Output Cache Provider](https://github.com/Azure/aspnet-redis-providers/wiki/Configuration).</span></span>

    <add
      name="AFRedisCacheSessionStateProvider"
      type="Microsoft.Web.Redis.RedisSessionStateProvider"
      host="enbwcache.redis.cache.windows.net"
      port="6380"
      accessKey="…"
      ssl="true"
      databaseId="0"
      applicationName="AFRedisCacheSessionState"
      connectionTimeoutInMilliseconds = "5000"
      operationTimeoutInMilliseconds = "1000"
      retryTimeoutInMilliseconds="3000" />


1. <span data-ttu-id="01f03-311">Kontrollera minnesanvändning på hello Azure Redis-Cache-server genom att [övervakning](cache-how-to-monitor.md#available-metrics-and-reporting-intervals) `Used Memory RSS` och `Used Memory`.</span><span class="sxs-lookup"><span data-stu-id="01f03-311">Check memory usage on hello Azure Redis Cache server by [monitoring](cache-how-to-monitor.md#available-metrics-and-reporting-intervals) `Used Memory RSS` and `Used Memory`.</span></span> <span data-ttu-id="01f03-312">Om en princip för borttagning är på plats, Redis börjar ta bort nycklar när `Used_Memory` når hello cachestorlek.</span><span class="sxs-lookup"><span data-stu-id="01f03-312">If an eviction policy is in place, Redis starts evicting keys when `Used_Memory` reaches hello cache size.</span></span> <span data-ttu-id="01f03-313">Vi rekommenderar `Used Memory RSS` ska bara vara något högre än `Used memory`.</span><span class="sxs-lookup"><span data-stu-id="01f03-313">Ideally, `Used Memory RSS` should be only slightly higher than `Used memory`.</span></span> <span data-ttu-id="01f03-314">En stor skillnad innebär att det minnesfragmenteringen (interna eller externa.</span><span class="sxs-lookup"><span data-stu-id="01f03-314">A large difference means there is memory fragmentation (internal or external.</span></span> <span data-ttu-id="01f03-315">När `Used Memory RSS` är mindre än `Used Memory`, innebär det en del av hello cacheminne har bytts hello-operativsystemet.</span><span class="sxs-lookup"><span data-stu-id="01f03-315">When `Used Memory RSS` is less than `Used Memory`, it means part of hello cache memory has been swapped  by hello operating system.</span></span> <span data-ttu-id="01f03-316">Om detta inträffar kan du förväntar dig några betydande fördröjningar.</span><span class="sxs-lookup"><span data-stu-id="01f03-316">If this occurs you can expect some significant latencies.</span></span> <span data-ttu-id="01f03-317">Eftersom Redis inte har kontroll över hur dess allokeringar mappas toomemory sidor, hög `Used Memory RSS` ofta är en topp i minnesanvändning hello resultat.</span><span class="sxs-lookup"><span data-stu-id="01f03-317">Because Redis does not have control over how its allocations are mapped toomemory pages, high `Used Memory RSS` is often hello result of a spike in memory usage.</span></span> <span data-ttu-id="01f03-318">När Redis Frigör minne, hello minne ges tillbaka toohello allokeraren och hello allokeraren kanske eller kanske inte ger hello minne tillbaka toohello system.</span><span class="sxs-lookup"><span data-stu-id="01f03-318">When Redis frees memory, hello memory is given back toohello allocator, and hello allocator may or may not give hello memory back toohello system.</span></span> <span data-ttu-id="01f03-319">Det kan finnas en avvikelse mellan hello `Used Memory` förbrukning av värdet och minne som rapporteras av hello-operativsystemet.</span><span class="sxs-lookup"><span data-stu-id="01f03-319">There may be a discrepancy between hello `Used Memory` value and memory consumption as reported by hello operating system.</span></span> <span data-ttu-id="01f03-320">Det kan vara toohello fakta minne har används och publicerat som Redis, men inte angivna tillbaka toohello system.</span><span class="sxs-lookup"><span data-stu-id="01f03-320">It may be due toohello fact memory has been used and released by Redis, but not given back toohello system.</span></span> <span data-ttu-id="01f03-321">toohelp minska minnesproblem kan du utföra följande steg hello.</span><span class="sxs-lookup"><span data-stu-id="01f03-321">toohelp mitigate memory issues you can perform hello following steps.</span></span>
   
   * <span data-ttu-id="01f03-322">Uppgradera hello tooa större cachestorleken så att du inte kör visa begränsningar i minnet på hello system.</span><span class="sxs-lookup"><span data-stu-id="01f03-322">Upgrade hello cache tooa larger size so that you are not running up against memory limitations on hello system.</span></span>
   * <span data-ttu-id="01f03-323">Ange förfallodatum gånger på hello nycklar så att äldre värden har avlägsnats proaktivt.</span><span class="sxs-lookup"><span data-stu-id="01f03-323">Set expiration times on hello keys so that older values are evicted proactively.</span></span>
   * <span data-ttu-id="01f03-324">Övervakaren hello hello `used_memory_rss` cachelagra mått.</span><span class="sxs-lookup"><span data-stu-id="01f03-324">Monitor hello hello `used_memory_rss` cache metric.</span></span> <span data-ttu-id="01f03-325">När det här värdet närmar sig hello sina cachens storlek, är förmodligen toostart ser prestandaproblem.</span><span class="sxs-lookup"><span data-stu-id="01f03-325">When this value approaches hello size of their cache, you are likely toostart seeing performance issues.</span></span> <span data-ttu-id="01f03-326">Distribuera hello data över flera delar om du använder en premium-cache eller uppgradera tooa större cachestorlek.</span><span class="sxs-lookup"><span data-stu-id="01f03-326">Distribute hello data across multiple shards if you are using a premium cache, or upgrade tooa larger cache size.</span></span>
   
   <span data-ttu-id="01f03-327">Mer information finns i [minnesbelastning på hello server](#memory-pressure-on-the-server).</span><span class="sxs-lookup"><span data-stu-id="01f03-327">For more information, see [Memory Pressure on hello server](#memory-pressure-on-the-server).</span></span>

## <a name="additional-information"></a><span data-ttu-id="01f03-328">Ytterligare information</span><span class="sxs-lookup"><span data-stu-id="01f03-328">Additional information</span></span>
* [<span data-ttu-id="01f03-329">Vilket erbjudande och vilken storlek ska jag använda för Redis-cache?</span><span class="sxs-lookup"><span data-stu-id="01f03-329">What Redis Cache offering and size should I use?</span></span>](cache-faq.md#what-redis-cache-offering-and-size-should-i-use)
* [<span data-ttu-id="01f03-330">Hur kan jag mäta och testa hello prestanda för Mina cache?</span><span class="sxs-lookup"><span data-stu-id="01f03-330">How can I benchmark and test hello performance of my cache?</span></span>](cache-faq.md#how-can-i-benchmark-and-test-the-performance-of-my-cache)
* [<span data-ttu-id="01f03-331">Hur kör Redis kommandon?</span><span class="sxs-lookup"><span data-stu-id="01f03-331">How can I run Redis commands?</span></span>](cache-faq.md#how-can-i-run-redis-commands)
* [<span data-ttu-id="01f03-332">Hur toomonitor Azure Redis-Cache</span><span class="sxs-lookup"><span data-stu-id="01f03-332">How toomonitor Azure Redis Cache</span></span>](cache-how-to-monitor.md)


---
title: "aaaHow tooconfigure Redis klustring för Premium Azure Redis-Cache | Microsoft Docs"
description: "Lär dig hur toocreate och hantera Redis klustring för Premium-nivån Azure Redis-Cache-instanser"
services: redis-cache
documentationcenter: 
author: steved0x
manager: douge
editor: 
ms.assetid: 62208eec-52ae-4713-b077-62659fd844ab
ms.service: cache
ms.workload: tbd
ms.tgt_pltfrm: cache-redis
ms.devlang: na
ms.topic: article
ms.date: 07/05/2017
ms.author: sdanie
ms.openlocfilehash: 44d520facb9d1af145b69f1b58f082aabb655d4a
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: sv-SE
ms.lasthandoff: 10/06/2017
---
# <a name="how-tooconfigure-redis-clustering-for-a-premium-azure-redis-cache"></a><span data-ttu-id="66346-103">Hur tooconfigure Redis klustring för Premium Azure Redis-Cache</span><span class="sxs-lookup"><span data-stu-id="66346-103">How tooconfigure Redis clustering for a Premium Azure Redis Cache</span></span>
<span data-ttu-id="66346-104">Azure Redis-Cache har olika cache erbjudanden, vilket ger flexibilitet i hello valet av cachestorlek och funktioner, inklusive funktioner för Premium-nivån, till exempel klustring, beständiga och stöd för virtuella nätverk.</span><span class="sxs-lookup"><span data-stu-id="66346-104">Azure Redis Cache has different cache offerings, which provide flexibility in hello choice of cache size and features, including Premium tier features such as clustering, persistence, and virtual network support.</span></span> <span data-ttu-id="66346-105">Den här artikeln beskriver hur tooconfigure kluster i en premium Azure Redis-Cache instans.</span><span class="sxs-lookup"><span data-stu-id="66346-105">This article describes how tooconfigure clustering in a premium Azure Redis Cache instance.</span></span>

<span data-ttu-id="66346-106">Information om andra cache premium-funktioner finns [introduktion toohello Azure Redis Cache Premium-nivån](cache-premium-tier-intro.md).</span><span class="sxs-lookup"><span data-stu-id="66346-106">For information on other premium cache features, see [Introduction toohello Azure Redis Cache Premium tier](cache-premium-tier-intro.md).</span></span>

## <a name="what-is-redis-cluster"></a><span data-ttu-id="66346-107">Vad är Redis-kluster?</span><span class="sxs-lookup"><span data-stu-id="66346-107">What is Redis Cluster?</span></span>
<span data-ttu-id="66346-108">Azure Redis-Cache erbjuder Redis cluster som [implementeras i Redis](http://redis.io/topics/cluster-tutorial).</span><span class="sxs-lookup"><span data-stu-id="66346-108">Azure Redis Cache offers Redis cluster as [implemented in Redis](http://redis.io/topics/cluster-tutorial).</span></span> <span data-ttu-id="66346-109">Med Redis-kluster får du hello följande fördelar:</span><span class="sxs-lookup"><span data-stu-id="66346-109">With Redis Cluster, you get hello following benefits:</span></span> 

* <span data-ttu-id="66346-110">hello möjlighet tooautomatically dela din datauppsättning mellan flera noder.</span><span class="sxs-lookup"><span data-stu-id="66346-110">hello ability tooautomatically split your dataset among multiple nodes.</span></span> 
* <span data-ttu-id="66346-111">hello möjlighet toocontinue åtgärder när en delmängd av hello noder har uppstått fel eller är toocommunicate med hello resten av hello klustret.</span><span class="sxs-lookup"><span data-stu-id="66346-111">hello ability toocontinue operations when a subset of hello nodes is experiencing failures or are unable toocommunicate with hello rest of hello cluster.</span></span> 
* <span data-ttu-id="66346-112">Flera genomströmning: genomströmning linjärt ökar du ökar hello antalet delar.</span><span class="sxs-lookup"><span data-stu-id="66346-112">More throughput: Throughput increases linearly as you increase hello number of shards.</span></span> 
* <span data-ttu-id="66346-113">Flera minnesstorleken: linjärt ökar du ökar hello antalet delar.</span><span class="sxs-lookup"><span data-stu-id="66346-113">More memory size: Increases linearly as you increase hello number of shards.</span></span>  

<span data-ttu-id="66346-114">Mer information om storlek, genomflöde och bandbredd med premium cacheminnen finns [vilka Redis-Cache erbjudande och vilken storlek ska jag använda?](cache-faq.md#what-redis-cache-offering-and-size-should-i-use)</span><span class="sxs-lookup"><span data-stu-id="66346-114">For more information about size, throughput, and bandwidth with premium caches, see [What Redis Cache offering and size should I use?](cache-faq.md#what-redis-cache-offering-and-size-should-i-use)</span></span>

<span data-ttu-id="66346-115">I Azure erbjuds Redis cluster som primär replik/modell där varje Fragmentera har två primära/replik med replikering där hello replikering hanteras av Azure Redis-Cache-tjänsten.</span><span class="sxs-lookup"><span data-stu-id="66346-115">In Azure, Redis cluster is offered as a primary/replica model where each shard has a primary/replica pair with replication where hello replication is managed by Azure Redis Cache service.</span></span> 

## <a name="clustering"></a><span data-ttu-id="66346-116">Klustring</span><span class="sxs-lookup"><span data-stu-id="66346-116">Clustering</span></span>
<span data-ttu-id="66346-117">Kluster har aktiverats på hello **nytt Redis-Cache** bladet under skapande av cachen.</span><span class="sxs-lookup"><span data-stu-id="66346-117">Clustering is enabled on hello **New Redis Cache** blade during cache creation.</span></span> 

[!INCLUDE [redis-cache-create](../../includes/redis-cache-premium-create.md)]

<span data-ttu-id="66346-118">Kluster har konfigurerats på hello **Redis Cluster** bladet.</span><span class="sxs-lookup"><span data-stu-id="66346-118">Clustering is configured on hello **Redis Cluster** blade.</span></span>

![Klustring][redis-cache-clustering]

<span data-ttu-id="66346-120">Du kan ha upp too10 delar i hello kluster.</span><span class="sxs-lookup"><span data-stu-id="66346-120">You can have up too10 shards in hello cluster.</span></span> <span data-ttu-id="66346-121">Klicka på **aktiverad** och dra reglaget hello eller ange ett tal mellan 1 och 10 för **Fragmentera antal** och på **OK**.</span><span class="sxs-lookup"><span data-stu-id="66346-121">Click **Enabled** and slide hello slider or type a number between 1 and 10 for **Shard count** and click **OK**.</span></span>

<span data-ttu-id="66346-122">Varje Fragmentera är en primär/replik cache-par som hanteras av Azure och hello hello-cachens totala storlek beräknas genom att multiplicera hello antalet delar med hello cachestorleken som valts i hello prisnivån.</span><span class="sxs-lookup"><span data-stu-id="66346-122">Each shard is a primary/replica cache pair managed by Azure, and hello total size of hello cache is calculated by multiplying hello number of shards by hello cache size selected in hello pricing tier.</span></span> 

![Klustring][redis-cache-clustering-selected]

<span data-ttu-id="66346-124">När hello-cache skapas du ansluta tooit och Använd den precis som en icke-klustrade cache och Redis distribuerar hello data i hela hello Cache shards.</span><span class="sxs-lookup"><span data-stu-id="66346-124">Once hello cache is created you connect tooit and use it just like a non-clustered cache, and Redis distributes hello data throughout hello Cache shards.</span></span> <span data-ttu-id="66346-125">Om diagnostik är [aktiverat](cache-how-to-monitor.md#enable-cache-diagnostics), mätvärden fångas separat för varje Fragmentera och kan vara [visas](cache-how-to-monitor.md) hello Redis-Cache-bladet.</span><span class="sxs-lookup"><span data-stu-id="66346-125">If diagnostics is [enabled](cache-how-to-monitor.md#enable-cache-diagnostics), metrics are captured separately for each shard and can be [viewed](cache-how-to-monitor.md) in hello Redis Cache blade.</span></span> 

> [!NOTE]
> 
> <span data-ttu-id="66346-126">Det finns några mindre skillnader som krävs i ditt klientprogram när kluster är konfigurerat.</span><span class="sxs-lookup"><span data-stu-id="66346-126">There are some minor differences required in your client application when clustering is configured.</span></span> <span data-ttu-id="66346-127">Mer information finns i [behöver jag toomake eventuella ändringar toomy klienten programmet toouse kluster?](#do-i-need-to-make-any-changes-to-my-client-application-to-use-clustering)</span><span class="sxs-lookup"><span data-stu-id="66346-127">For more information, see [Do I need toomake any changes toomy client application toouse clustering?](#do-i-need-to-make-any-changes-to-my-client-application-to-use-clustering)</span></span>
> 
> 

<span data-ttu-id="66346-128">Exempel om hur du arbetar med kluster med hello StackExchange.Redis klient, finns hello [clustering.cs](https://github.com/rustd/RedisSamples/blob/master/HelloWorld/Clustering.cs) del av hello [Hello World](https://github.com/rustd/RedisSamples/tree/master/HelloWorld) exempel.</span><span class="sxs-lookup"><span data-stu-id="66346-128">For sample code on working with clustering with hello StackExchange.Redis client, see hello [clustering.cs](https://github.com/rustd/RedisSamples/blob/master/HelloWorld/Clustering.cs) portion of hello [Hello World](https://github.com/rustd/RedisSamples/tree/master/HelloWorld) sample.</span></span>

<a name="cluster-size"></a>

## <a name="change-hello-cluster-size-on-a-running-premium-cache"></a><span data-ttu-id="66346-129">Ändra hello klusterstorleken på ett premium-cache</span><span class="sxs-lookup"><span data-stu-id="66346-129">Change hello cluster size on a running premium cache</span></span>
<span data-ttu-id="66346-130">toochange hello klusterstorleken på körs premium cachelagra med klustring aktiverad, klicka på **Redis klusterstorleken** från hello **resurs menyn**.</span><span class="sxs-lookup"><span data-stu-id="66346-130">toochange hello cluster size on a running premium cache with clustering enabled, click **Redis Cluster Size** from hello **Resource menu**.</span></span>

> [!NOTE]
> <span data-ttu-id="66346-131">Medan hello Azure Redis Cache Premium nivå har publicerat tooGeneral tillgänglighet, är hello Redis klusterstorleken funktionen för närvarande i förhandsvisning.</span><span class="sxs-lookup"><span data-stu-id="66346-131">While hello Azure Redis Cache Premium tier has been released tooGeneral Availability, hello Redis Cluster Size feature is currently in preview.</span></span>
> 
> 

![Redis klusterstorleken][redis-cache-redis-cluster-size]

<span data-ttu-id="66346-133">klusterstorleken för toochange hello hello skjutreglaget eller ange ett tal mellan 1 och 10 i hello **Fragmentera antal** textrutan och klicka på **OK** toosave.</span><span class="sxs-lookup"><span data-stu-id="66346-133">toochange hello cluster size, use hello slider or type a number between 1 and 10 in hello **Shard count** text box and click **OK** toosave.</span></span>

> [!NOTE]
> <span data-ttu-id="66346-134">Skala ett kluster kör hello [MIGRERA](https://redis.io/commands/migrate) kommandot, vilket är en kostsam kommando så för minimal påverkan Överväg att köra den här åtgärden vid låg belastning.</span><span class="sxs-lookup"><span data-stu-id="66346-134">Scaling a cluster runs hello [MIGRATE](https://redis.io/commands/migrate) command, which is an expensive command, so for minimal impact, consider running this operation during non-peak hours.</span></span> <span data-ttu-id="66346-135">Under hello migreringsprocessen visas en topp i belastningen på servern.</span><span class="sxs-lookup"><span data-stu-id="66346-135">During hello migration process, you will see a spike in server load.</span></span> <span data-ttu-id="66346-136">Skala ett kluster körs lång processen och hello mängden tid det tar beror på hello antal nycklar och storleken på hello värden som är associerade med nycklarna.</span><span class="sxs-lookup"><span data-stu-id="66346-136">Scaling a cluster is a long running process and hello amount of time taken depends on hello number of keys and size of hello values associated with those keys.</span></span>
> 
> 

## <a name="clustering-faq"></a><span data-ttu-id="66346-137">Kluster för vanliga frågor och svar</span><span class="sxs-lookup"><span data-stu-id="66346-137">Clustering FAQ</span></span>
<span data-ttu-id="66346-138">hello innehåller följande lista svar toocommonly frågor och svar om Azure Redis-Cache-kluster.</span><span class="sxs-lookup"><span data-stu-id="66346-138">hello following list contains answers toocommonly asked questions about Azure Redis Cache clustering.</span></span>

* [<span data-ttu-id="66346-139">Behöver jag toomake eventuella ändringar toomy klienten programmet toouse kluster?</span><span class="sxs-lookup"><span data-stu-id="66346-139">Do I need toomake any changes toomy client application toouse clustering?</span></span>](#do-i-need-to-make-any-changes-to-my-client-application-to-use-clustering)
* [<span data-ttu-id="66346-140">Hur distribueras nycklar i ett kluster?</span><span class="sxs-lookup"><span data-stu-id="66346-140">How are keys distributed in a cluster?</span></span>](#how-are-keys-distributed-in-a-cluster)
* [<span data-ttu-id="66346-141">Vad är hello största cachestorleken kan jag skapa?</span><span class="sxs-lookup"><span data-stu-id="66346-141">What is hello largest cache size I can create?</span></span>](#what-is-the-largest-cache-size-i-can-create)
* [<span data-ttu-id="66346-142">Stöder alla Redis-klienter kluster?</span><span class="sxs-lookup"><span data-stu-id="66346-142">Do all Redis clients support clustering?</span></span>](#do-all-redis-clients-support-clustering)
* [<span data-ttu-id="66346-143">Hur ansluter toomy cache när kluster aktiveras?</span><span class="sxs-lookup"><span data-stu-id="66346-143">How do I connect toomy cache when clustering is enabled?</span></span>](#how-do-i-connect-to-my-cache-when-clustering-is-enabled)
* [<span data-ttu-id="66346-144">Kan jag ansluta direkt toohello enskilda delar min-cache?</span><span class="sxs-lookup"><span data-stu-id="66346-144">Can I directly connect toohello individual shards of my cache?</span></span>](#can-i-directly-connect-to-the-individual-shards-of-my-cache)
* [<span data-ttu-id="66346-145">Kan jag konfigurera klustring för en tidigare skapad cache?</span><span class="sxs-lookup"><span data-stu-id="66346-145">Can I configure clustering for a previously created cache?</span></span>](#can-i-configure-clustering-for-a-previously-created-cache)
* [<span data-ttu-id="66346-146">Kan jag konfigurera klustring för basic eller standard-cache?</span><span class="sxs-lookup"><span data-stu-id="66346-146">Can I configure clustering for a basic or standard cache?</span></span>](#can-i-configure-clustering-for-a-basic-or-standard-cache)
* [<span data-ttu-id="66346-147">Kan jag använda kluster med hello Redis ASP.NET Session State och cachelagring av utdata providers?</span><span class="sxs-lookup"><span data-stu-id="66346-147">Can I use clustering with hello Redis ASP.NET Session State and Output Caching providers?</span></span>](#can-i-use-clustering-with-the-redis-aspnet-session-state-and-output-caching-providers)
* [<span data-ttu-id="66346-148">Jag får flytta undantag när du använder StackExchange.Redis och klustring, vad ska jag göra?</span><span class="sxs-lookup"><span data-stu-id="66346-148">I am getting MOVE exceptions when using StackExchange.Redis and clustering, what should I do?</span></span>](#i-am-getting-move-exceptions-when-using-stackexchangeredis-and-clustering-what-should-i-do)

### <a name="do-i-need-toomake-any-changes-toomy-client-application-toouse-clustering"></a><span data-ttu-id="66346-149">Behöver jag toomake eventuella ändringar toomy klienten programmet toouse kluster?</span><span class="sxs-lookup"><span data-stu-id="66346-149">Do I need toomake any changes toomy client application toouse clustering?</span></span>
* <span data-ttu-id="66346-150">När kluster aktiveras är endast databasen 0 tillgänglig.</span><span class="sxs-lookup"><span data-stu-id="66346-150">When clustering is enabled, only database 0 is available.</span></span> <span data-ttu-id="66346-151">Om klientprogrammet använder flera databaser och försök tooread eller skriva tooa databas än 0, undantagsfel hello följande.</span><span class="sxs-lookup"><span data-stu-id="66346-151">If your client application uses multiple databases and it tries tooread or write tooa database other than 0, hello following exception is thrown.</span></span> <span data-ttu-id="66346-152">`Unhandled Exception: StackExchange.Redis.RedisConnectionException: ProtocolFailure on GET --->` `StackExchange.Redis.RedisCommandException: Multiple databases are not supported on this server; cannot switch toodatabase: 6`</span><span class="sxs-lookup"><span data-stu-id="66346-152">`Unhandled Exception: StackExchange.Redis.RedisConnectionException: ProtocolFailure on GET --->` `StackExchange.Redis.RedisCommandException: Multiple databases are not supported on this server; cannot switch toodatabase: 6`</span></span>
  
  <span data-ttu-id="66346-153">Mer information finns i [Redis-kluster specifikation - implementerad delmängd](http://redis.io/topics/cluster-spec#implemented-subset).</span><span class="sxs-lookup"><span data-stu-id="66346-153">For more information, see [Redis Cluster Specification - Implemented subset](http://redis.io/topics/cluster-spec#implemented-subset).</span></span>
* <span data-ttu-id="66346-154">Om du använder [StackExchange.Redis](https://www.nuget.org/packages/StackExchange.Redis/), måste du använda 1.0.481 eller senare.</span><span class="sxs-lookup"><span data-stu-id="66346-154">If you are using [StackExchange.Redis](https://www.nuget.org/packages/StackExchange.Redis/), you must use 1.0.481 or later.</span></span> <span data-ttu-id="66346-155">Du ansluter toohello cache med hjälp av hello samma [slutpunkter, portarna och nycklarna](cache-configure.md#properties) som du använder när du ansluter tooa cache som inte har aktiverat-kluster.</span><span class="sxs-lookup"><span data-stu-id="66346-155">You connect toohello cache using hello same [endpoints, ports, and keys](cache-configure.md#properties) that you use when connecting tooa cache that does not have clustering enabled.</span></span> <span data-ttu-id="66346-156">hello enda skillnaden är att alla läsningar och skrivningar måste göras toodatabase 0.</span><span class="sxs-lookup"><span data-stu-id="66346-156">hello only difference is that all reads and writes must be done toodatabase 0.</span></span>
  
  * <span data-ttu-id="66346-157">Andra klienter kan ha olika krav.</span><span class="sxs-lookup"><span data-stu-id="66346-157">Other clients may have different requirements.</span></span> <span data-ttu-id="66346-158">Se [alla Redis-klienter stöder kluster?](#do-all-redis-clients-support-clustering)</span><span class="sxs-lookup"><span data-stu-id="66346-158">See [Do all Redis clients support clustering?](#do-all-redis-clients-support-clustering)</span></span>
* <span data-ttu-id="66346-159">Om programmet använder flera viktiga åtgärder batchar till ett enda kommando, alla nycklar måste finnas i hello samma Fragmentera.</span><span class="sxs-lookup"><span data-stu-id="66346-159">If your application uses multiple key operations batched into a single command, all keys must be located in hello same shard.</span></span> <span data-ttu-id="66346-160">toolocate nycklar i Hej samma fragment, se [hur nycklar distribueras i ett kluster?](#how-are-keys-distributed-in-a-cluster)</span><span class="sxs-lookup"><span data-stu-id="66346-160">toolocate keys in hello same shard, see [How are keys distributed in a cluster?](#how-are-keys-distributed-in-a-cluster)</span></span>
* <span data-ttu-id="66346-161">Om du använder sessionstillståndet ASP.NET för Redis-providern måste du använda 2.0.1 eller högre.</span><span class="sxs-lookup"><span data-stu-id="66346-161">If you are using Redis ASP.NET Session State provider you must use 2.0.1 or higher.</span></span> <span data-ttu-id="66346-162">Se [kan du använda kluster med hello Redis ASP.NET Session State och cachelagring av utdata providers?](#can-i-use-clustering-with-the-redis-aspnet-session-state-and-output-caching-providers)</span><span class="sxs-lookup"><span data-stu-id="66346-162">See [Can I use clustering with hello Redis ASP.NET Session State and Output Caching providers?](#can-i-use-clustering-with-the-redis-aspnet-session-state-and-output-caching-providers)</span></span>

### <a name="how-are-keys-distributed-in-a-cluster"></a><span data-ttu-id="66346-163">Hur distribueras nycklar i ett kluster?</span><span class="sxs-lookup"><span data-stu-id="66346-163">How are keys distributed in a cluster?</span></span>
<span data-ttu-id="66346-164">Per hello Redis [nycklar distributionsmodell](http://redis.io/topics/cluster-spec#keys-distribution-model) dokumentation: hello nyckel kan delas in i 16384 platser.</span><span class="sxs-lookup"><span data-stu-id="66346-164">Per hello Redis [Keys distribution model](http://redis.io/topics/cluster-spec#keys-distribution-model) documentation: hello key space is split into 16384 slots.</span></span> <span data-ttu-id="66346-165">Varje nyckel hashas och tilldelade tooone dessa fack som distribueras över hello klusternoder hello.</span><span class="sxs-lookup"><span data-stu-id="66346-165">Each key is hashed and assigned tooone of these slots, which are distributed across hello nodes of hello cluster.</span></span> <span data-ttu-id="66346-166">Du kan konfigurera vilken del av hello nyckel är hashformaterats tooensure som flera nycklar finns i hello samma Fragmentera med hash-taggar.</span><span class="sxs-lookup"><span data-stu-id="66346-166">You can configure which part of hello key is hashed tooensure that multiple keys are located in hello same shard using hash tags.</span></span>

* <span data-ttu-id="66346-167">Nycklar med en tagg för hash - om någon del av nyckeln hello omges av `{` och `}`, endast den del av nyckeln hello hashas för hello att fastställa hello hash-plats i en nyckel.</span><span class="sxs-lookup"><span data-stu-id="66346-167">Keys with a hash tag - if any part of hello key is enclosed in `{` and `}`, only that part of hello key is hashed for hello purposes of determining hello hash slot of a key.</span></span> <span data-ttu-id="66346-168">Till exempel hello följande 3 nycklarna skulle finnas i hello samma Fragmentera: `{key}1`, `{key}2`, och `{key}3` eftersom endast hello `key` hello namnet hashas.</span><span class="sxs-lookup"><span data-stu-id="66346-168">For example, hello following 3 keys would be located in hello same shard: `{key}1`, `{key}2`, and `{key}3` since only hello `key` part of hello name is hashed.</span></span> <span data-ttu-id="66346-169">En fullständig lista över nycklar hash-tagg specifikationer finns [nycklar hash-taggar](http://redis.io/topics/cluster-spec#keys-hash-tags).</span><span class="sxs-lookup"><span data-stu-id="66346-169">For a complete list of keys hash tag specifications, see [Keys hash tags](http://redis.io/topics/cluster-spec#keys-hash-tags).</span></span>
* <span data-ttu-id="66346-170">Nycklar utan en hash-tagg - hello hela nyckelnamn används för hashing.</span><span class="sxs-lookup"><span data-stu-id="66346-170">Keys without a hash tag - hello entire key name is used for hashing.</span></span> <span data-ttu-id="66346-171">Detta resulterar i en statistiskt jämn fördelning över hello shards hello-cache.</span><span class="sxs-lookup"><span data-stu-id="66346-171">This results in a statistically even distribution across hello shards of hello cache.</span></span>

<span data-ttu-id="66346-172">För bästa prestanda och genomflöde fördela hello nycklar jämnt.</span><span class="sxs-lookup"><span data-stu-id="66346-172">For best performance and throughput, we recommend distributing hello keys evenly.</span></span> <span data-ttu-id="66346-173">Om du använder nycklar med en hash-tagg är hello programmet ansvar tooensure hello nycklar jämnt.</span><span class="sxs-lookup"><span data-stu-id="66346-173">If you are using keys with a hash tag it is hello application's responsibility tooensure hello keys are distributed evenly.</span></span>

<span data-ttu-id="66346-174">Mer information finns i [nycklar distributionsmodell](http://redis.io/topics/cluster-spec#keys-distribution-model), [Redis Cluster data horisontell partitionering](http://redis.io/topics/cluster-tutorial#redis-cluster-data-sharding), och [nycklar hash-taggar](http://redis.io/topics/cluster-spec#keys-hash-tags).</span><span class="sxs-lookup"><span data-stu-id="66346-174">For more information, see [Keys distribution model](http://redis.io/topics/cluster-spec#keys-distribution-model), [Redis Cluster data sharding](http://redis.io/topics/cluster-tutorial#redis-cluster-data-sharding), and [Keys hash tags](http://redis.io/topics/cluster-spec#keys-hash-tags).</span></span>

<span data-ttu-id="66346-175">Exempel om hur du arbetar med kluster och hitta nycklar i hello samma Fragmentera med hello StackExchange.Redis klienten finns hello [clustering.cs](https://github.com/rustd/RedisSamples/blob/master/HelloWorld/Clustering.cs) del av hello [Hello World](https://github.com/rustd/RedisSamples/tree/master/HelloWorld) exempel.</span><span class="sxs-lookup"><span data-stu-id="66346-175">For sample code on working with clustering and locating keys in hello same shard with hello StackExchange.Redis client, see hello [clustering.cs](https://github.com/rustd/RedisSamples/blob/master/HelloWorld/Clustering.cs) portion of hello [Hello World](https://github.com/rustd/RedisSamples/tree/master/HelloWorld) sample.</span></span>

### <a name="what-is-hello-largest-cache-size-i-can-create"></a><span data-ttu-id="66346-176">Vad är hello största cachestorleken kan jag skapa?</span><span class="sxs-lookup"><span data-stu-id="66346-176">What is hello largest cache size I can create?</span></span>
<span data-ttu-id="66346-177">hello största premium cachestorleken är 53 GB.</span><span class="sxs-lookup"><span data-stu-id="66346-177">hello largest premium cache size is 53 GB.</span></span> <span data-ttu-id="66346-178">Du kan skapa upp too10 shards ger dig en maximal storlek på 530 GB.</span><span class="sxs-lookup"><span data-stu-id="66346-178">You can create up too10 shards giving you a maximum size of 530 GB.</span></span> <span data-ttu-id="66346-179">Om du behöver en större kan du [begära mer](mailto:wapteams@microsoft.com?subject=Redis%20Cache%20quota%20increase).</span><span class="sxs-lookup"><span data-stu-id="66346-179">If you need a larger size you can [request more](mailto:wapteams@microsoft.com?subject=Redis%20Cache%20quota%20increase).</span></span> <span data-ttu-id="66346-180">Mer information finns i [priser för Azure Redis-Cache](https://azure.microsoft.com/pricing/details/cache/).</span><span class="sxs-lookup"><span data-stu-id="66346-180">For more information, see [Azure Redis Cache Pricing](https://azure.microsoft.com/pricing/details/cache/).</span></span>

### <a name="do-all-redis-clients-support-clustering"></a><span data-ttu-id="66346-181">Stöder alla Redis-klienter kluster?</span><span class="sxs-lookup"><span data-stu-id="66346-181">Do all Redis clients support clustering?</span></span>
<span data-ttu-id="66346-182">Vid hello inte alla klienter stöder nu Redis-kluster.</span><span class="sxs-lookup"><span data-stu-id="66346-182">At hello present time not all clients support Redis clustering.</span></span> <span data-ttu-id="66346-183">StackExchange.Redis är ett som har stöd för den.</span><span class="sxs-lookup"><span data-stu-id="66346-183">StackExchange.Redis is one that does support for it.</span></span> <span data-ttu-id="66346-184">Finns mer information om andra klienter hello [spelar med hello klustret](http://redis.io/topics/cluster-tutorial#playing-with-the-cluster) avsnitt i hello [Redis cluster kursen](http://redis.io/topics/cluster-tutorial).</span><span class="sxs-lookup"><span data-stu-id="66346-184">For more information on other clients, see hello [Playing with hello cluster](http://redis.io/topics/cluster-tutorial#playing-with-the-cluster) section of hello [Redis cluster tutorial](http://redis.io/topics/cluster-tutorial).</span></span>

> [!NOTE]
> <span data-ttu-id="66346-185">Om du använder StackExchange.Redis som klient, se till att du använder hello senaste versionen av [StackExchange.Redis](https://www.nuget.org/packages/StackExchange.Redis/) 1.0.481 eller senare för klustring toowork korrekt.</span><span class="sxs-lookup"><span data-stu-id="66346-185">If you are using StackExchange.Redis as your client, ensure you are using hello latest version of [StackExchange.Redis](https://www.nuget.org/packages/StackExchange.Redis/) 1.0.481 or later for clustering toowork correctly.</span></span> <span data-ttu-id="66346-186">Om du har problem med flytta undantag, se [flytta undantag](#move-exceptions) för mer information.</span><span class="sxs-lookup"><span data-stu-id="66346-186">If you have any issues with move exceptions, see [move exceptions](#move-exceptions) for more information.</span></span>
> 
> 

### <a name="how-do-i-connect-toomy-cache-when-clustering-is-enabled"></a><span data-ttu-id="66346-187">Hur ansluter toomy cache när kluster aktiveras?</span><span class="sxs-lookup"><span data-stu-id="66346-187">How do I connect toomy cache when clustering is enabled?</span></span>
<span data-ttu-id="66346-188">Du kan ansluta tooyour cache med hjälp av hello samma [slutpunkter](cache-configure.md#properties), [portar](cache-configure.md#properties), och [nycklar](cache-configure.md#access-keys) som du använder när du ansluter tooa cache som inte har aktiverat-kluster.</span><span class="sxs-lookup"><span data-stu-id="66346-188">You can connect tooyour cache using hello same [endpoints](cache-configure.md#properties), [ports](cache-configure.md#properties), and [keys](cache-configure.md#access-keys) that you use when connecting tooa cache that does not have clustering enabled.</span></span> <span data-ttu-id="66346-189">Redis hanterar hello kluster på hello serverdel så att du inte behöver toomanage från klienten.</span><span class="sxs-lookup"><span data-stu-id="66346-189">Redis manages hello clustering on hello backend so you don't have toomanage it from your client.</span></span>

### <a name="can-i-directly-connect-toohello-individual-shards-of-my-cache"></a><span data-ttu-id="66346-190">Kan jag ansluta direkt toohello enskilda delar min-cache?</span><span class="sxs-lookup"><span data-stu-id="66346-190">Can I directly connect toohello individual shards of my cache?</span></span>
<span data-ttu-id="66346-191">Detta stöds inte officiellt.</span><span class="sxs-lookup"><span data-stu-id="66346-191">This is not officially supported.</span></span> <span data-ttu-id="66346-192">Med som säger består varje Fragmentera av en primär/replik cache-par gemensamt kallas en cache-instans.</span><span class="sxs-lookup"><span data-stu-id="66346-192">With that said, each shard consists of a primary/replica cache pair, collectively known as a cache instance.</span></span> <span data-ttu-id="66346-193">Du kan ansluta toothese cacheinstanser med hello redis-cli-verktyget i hello [instabilt](http://redis.io/download) grenen av hello Redis-databasen på GitHub.</span><span class="sxs-lookup"><span data-stu-id="66346-193">You can connect toothese cache instances using hello redis-cli utility in hello [unstable](http://redis.io/download) branch of hello Redis repository at GitHub.</span></span> <span data-ttu-id="66346-194">Den här versionen implementerar grundläggande stöd när den startas med hello `-c` växla.</span><span class="sxs-lookup"><span data-stu-id="66346-194">This version implements basic support when started with hello `-c` switch.</span></span> <span data-ttu-id="66346-195">Mer information finns i [spelar med hello klustret](http://redis.io/topics/cluster-tutorial#playing-with-the-cluster) på [http://redis.io](http://redis.io) i hello [Redis cluster kursen](http://redis.io/topics/cluster-tutorial).</span><span class="sxs-lookup"><span data-stu-id="66346-195">For more information see [Playing with hello cluster](http://redis.io/topics/cluster-tutorial#playing-with-the-cluster) on [http://redis.io](http://redis.io) in hello [Redis cluster tutorial](http://redis.io/topics/cluster-tutorial).</span></span>

<span data-ttu-id="66346-196">Använd hello följande kommandon för icke-ssl.</span><span class="sxs-lookup"><span data-stu-id="66346-196">For non-ssl, use hello following commands.</span></span>

    Redis-cli.exe –h <<cachename>> -p 13000 (tooconnect tooinstance 0)
    Redis-cli.exe –h <<cachename>> -p 13001 (tooconnect tooinstance 1)
    Redis-cli.exe –h <<cachename>> -p 13002 (tooconnect tooinstance 2)
    ...
    Redis-cli.exe –h <<cachename>> -p 1300N (tooconnect tooinstance N)

<span data-ttu-id="66346-197">Ssl, Ersätt `1300N` med `1500N`.</span><span class="sxs-lookup"><span data-stu-id="66346-197">For ssl, replace `1300N` with `1500N`.</span></span>

### <a name="can-i-configure-clustering-for-a-previously-created-cache"></a><span data-ttu-id="66346-198">Kan jag konfigurera klustring för en tidigare skapad cache?</span><span class="sxs-lookup"><span data-stu-id="66346-198">Can I configure clustering for a previously created cache?</span></span>
<span data-ttu-id="66346-199">Du kan för närvarande bara aktivera kluster när du skapar en cache.</span><span class="sxs-lookup"><span data-stu-id="66346-199">Currently you can only enable clustering when you create a cache.</span></span> <span data-ttu-id="66346-200">Du kan ändra hello klusterstorleken efter hello-cache skapas, men du kan inte lägga till kluster tooa premium-cache eller ta bort kluster från cache premium när hello-cache skapas.</span><span class="sxs-lookup"><span data-stu-id="66346-200">You can change hello cluster size after hello cache is created, but you can't add clustering tooa premium cache or remove clustering from a premium cache after hello cache is created.</span></span> <span data-ttu-id="66346-201">Premium-cache med aktiverad klustring och endast en Fragmentera skiljer sig premium cache av hello samma storlek med utan kluster.</span><span class="sxs-lookup"><span data-stu-id="66346-201">A premium cache with clustering enabled and only one shard is different than a premium cache of hello same size with no clustering.</span></span>

### <a name="can-i-configure-clustering-for-a-basic-or-standard-cache"></a><span data-ttu-id="66346-202">Kan jag konfigurera klustring för basic eller standard-cache?</span><span class="sxs-lookup"><span data-stu-id="66346-202">Can I configure clustering for a basic or standard cache?</span></span>
<span data-ttu-id="66346-203">Kluster är endast tillgängligt för premium.</span><span class="sxs-lookup"><span data-stu-id="66346-203">Clustering is only available for premium caches.</span></span>

### <a name="can-i-use-clustering-with-hello-redis-aspnet-session-state-and-output-caching-providers"></a><span data-ttu-id="66346-204">Kan jag använda kluster med hello Redis ASP.NET Session State och cachelagring av utdata providers?</span><span class="sxs-lookup"><span data-stu-id="66346-204">Can I use clustering with hello Redis ASP.NET Session State and Output Caching providers?</span></span>
* <span data-ttu-id="66346-205">**Redis utdatacache providern** -några ändringar krävs.</span><span class="sxs-lookup"><span data-stu-id="66346-205">**Redis Output Cache provider** - no changes required.</span></span>
* <span data-ttu-id="66346-206">**Redis-sessionstillståndsprovider** -toouse klustring, måste du använda [RedisSessionStateProvider](https://www.nuget.org/packages/Microsoft.Web.RedisSessionStateProvider) 2.0.1 eller högre eller ett undantagsfel genereras.</span><span class="sxs-lookup"><span data-stu-id="66346-206">**Redis Session State provider** - toouse clustering, you must use [RedisSessionStateProvider](https://www.nuget.org/packages/Microsoft.Web.RedisSessionStateProvider) 2.0.1 or higher or an exception is thrown.</span></span> <span data-ttu-id="66346-207">Det här är en ny ändring; Mer information finns i [v2.0.0 information om ändringar i bryter](https://github.com/Azure/aspnet-redis-providers/wiki/v2.0.0-Breaking-Change-Details).</span><span class="sxs-lookup"><span data-stu-id="66346-207">This is a breaking change; for more information see [v2.0.0 Breaking Change Details](https://github.com/Azure/aspnet-redis-providers/wiki/v2.0.0-Breaking-Change-Details).</span></span>

<a name="move-exceptions"></a>

### <a name="i-am-getting-move-exceptions-when-using-stackexchangeredis-and-clustering-what-should-i-do"></a><span data-ttu-id="66346-208">Jag får flytta undantag när du använder StackExchange.Redis och klustring, vad ska jag göra?</span><span class="sxs-lookup"><span data-stu-id="66346-208">I am getting MOVE exceptions when using StackExchange.Redis and clustering, what should I do?</span></span>
<span data-ttu-id="66346-209">Om du använder StackExchange.Redis och ta emot `MOVE` undantag när du använder kluster, se till att du använder [StackExchange.Redis 1.1.603](https://www.nuget.org/packages/StackExchange.Redis/) eller senare.</span><span class="sxs-lookup"><span data-stu-id="66346-209">If you are using StackExchange.Redis and receive `MOVE` exceptions when using clustering, ensure that you are using [StackExchange.Redis 1.1.603](https://www.nuget.org/packages/StackExchange.Redis/) or later.</span></span> <span data-ttu-id="66346-210">Anvisningar om hur du konfigurerar din .NET program toouse StackExchange.Redis finns [konfigurera hello cacheklienter](cache-dotnet-how-to-use-azure-redis-cache.md#configure-the-cache-clients).</span><span class="sxs-lookup"><span data-stu-id="66346-210">For instructions on configuring your .NET applications toouse StackExchange.Redis, see [Configure hello cache clients](cache-dotnet-how-to-use-azure-redis-cache.md#configure-the-cache-clients).</span></span>

## <a name="next-steps"></a><span data-ttu-id="66346-211">Nästa steg</span><span class="sxs-lookup"><span data-stu-id="66346-211">Next steps</span></span>
<span data-ttu-id="66346-212">Lär dig hur toouse mer premium cachelagra funktioner.</span><span class="sxs-lookup"><span data-stu-id="66346-212">Learn how toouse more premium cache features.</span></span>

* [<span data-ttu-id="66346-213">Introduktion toohello Azure Redis Cache Premium-nivån</span><span class="sxs-lookup"><span data-stu-id="66346-213">Introduction toohello Azure Redis Cache Premium tier</span></span>](cache-premium-tier-intro.md)

<!-- IMAGES -->

[redis-cache-clustering]: ./media/cache-how-to-premium-clustering/redis-cache-clustering.png

[redis-cache-clustering-selected]: ./media/cache-how-to-premium-clustering/redis-cache-clustering-selected.png

[redis-cache-redis-cluster-size]: ./media/cache-how-to-premium-clustering/redis-cache-redis-cluster-size.png








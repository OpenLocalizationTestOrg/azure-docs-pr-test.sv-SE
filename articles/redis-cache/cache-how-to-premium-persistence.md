---
title: "aaaHow tooconfigure datapersistence för Premium Azure Redis-Cache"
description: "Lär dig hur tooconfigure och hantera data beständiga din Premium-nivån Azure Redis-Cache-instanser"
services: redis-cache
documentationcenter: 
author: steved0x
manager: douge
editor: 
ms.assetid: b01cf279-60a0-4711-8c5f-af22d9540d38
ms.service: cache
ms.workload: tbd
ms.tgt_pltfrm: cache-redis
ms.devlang: na
ms.topic: article
ms.date: 08/24/2017
ms.author: sdanie
ms.openlocfilehash: 62feb6f5522e0270487f045eb303bf852434143d
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: sv-SE
ms.lasthandoff: 10/06/2017
---
# <a name="how-tooconfigure-data-persistence-for-a-premium-azure-redis-cache"></a><span data-ttu-id="ea190-103">Hur tooconfigure datapersistence för Premium Azure Redis-Cache</span><span class="sxs-lookup"><span data-stu-id="ea190-103">How tooconfigure data persistence for a Premium Azure Redis Cache</span></span>
<span data-ttu-id="ea190-104">Azure Redis-Cache har olika cache-erbjudanden som ger flexibilitet i hello valet av cachestorlek och funktioner, inklusive funktioner för Premium-nivån, till exempel klustring, beständiga och stöd för virtuella nätverk.</span><span class="sxs-lookup"><span data-stu-id="ea190-104">Azure Redis Cache has different cache offerings which provide flexibility in hello choice of cache size and features, including Premium tier features such as clustering, persistence, and virtual network support.</span></span> <span data-ttu-id="ea190-105">Den här artikeln beskriver hur tooconfigure beständiga i en premium Azure Redis-Cache instans.</span><span class="sxs-lookup"><span data-stu-id="ea190-105">This article describes how tooconfigure persistence in a premium Azure Redis Cache instance.</span></span>

<span data-ttu-id="ea190-106">Information om andra cache premium-funktioner finns [introduktion toohello Azure Redis Cache Premium-nivån](cache-premium-tier-intro.md).</span><span class="sxs-lookup"><span data-stu-id="ea190-106">For information on other premium cache features, see [Introduction toohello Azure Redis Cache Premium tier](cache-premium-tier-intro.md).</span></span>

## <a name="what-is-data-persistence"></a><span data-ttu-id="ea190-107">Vad är beständiga data?</span><span class="sxs-lookup"><span data-stu-id="ea190-107">What is data persistence?</span></span>
<span data-ttu-id="ea190-108">[Redis-persistence](https://redis.io/topics/persistence) kan du toopersist data som lagras i Redis.</span><span class="sxs-lookup"><span data-stu-id="ea190-108">[Redis persistence](https://redis.io/topics/persistence) allows you toopersist data stored in Redis.</span></span> <span data-ttu-id="ea190-109">Du kan också ta ögonblicksbilder och säkerhetskopiera hello data som du kan läsa in vid maskinvarufel.</span><span class="sxs-lookup"><span data-stu-id="ea190-109">You can also take snapshots and back up hello data, which you can load in case of a hardware failure.</span></span> <span data-ttu-id="ea190-110">Det här är en stor fördel över Basic eller standardnivån där alla hello data lagras i minnet och det kan finnas en potentiell dataförlust om ett fel uppstår där cachenoder är nere.</span><span class="sxs-lookup"><span data-stu-id="ea190-110">This is a huge advantage over Basic or Standard tier where all hello data is stored in memory and there can be potential data loss in case of a failure where Cache nodes are down.</span></span> 

<span data-ttu-id="ea190-111">Azure Redis-Cache erbjuder Redis-datapersistence med hjälp av följande modeller hello:</span><span class="sxs-lookup"><span data-stu-id="ea190-111">Azure Redis Cache offers Redis persistence using hello following models:</span></span>

* <span data-ttu-id="ea190-112">**RDB beständiga** -när RDB (Redis-databas) beständiga är konfigurerad, Azure Redis-Cache kvarstår en ögonblicksbild av hello Redis-cache i en Redis binärformat toodisk baserat på en konfigurerbar säkerhetskopieringsfrekvens.</span><span class="sxs-lookup"><span data-stu-id="ea190-112">**RDB persistence** - When RDB (Redis database) persistence is configured, Azure Redis Cache persists a snapshot of hello Redis cache in a Redis binary format toodisk based on a configurable backup frequency.</span></span> <span data-ttu-id="ea190-113">Om ett allvarligt fel inträffar som inaktiverar såväl hello primär replik cache har hello cache byggts med hello senaste ögonblicksbild.</span><span class="sxs-lookup"><span data-stu-id="ea190-113">If a catastrophic event occurs that disables both hello primary and replica cache, hello cache is reconstructed using hello most recent snapshot.</span></span> <span data-ttu-id="ea190-114">Mer information om hello [fördelar](https://redis.io/topics/persistence#rdb-advantages) och [nackdelar](https://redis.io/topics/persistence#rdb-disadvantages) av RDB persistence.</span><span class="sxs-lookup"><span data-stu-id="ea190-114">Learn more about hello [advantages](https://redis.io/topics/persistence#rdb-advantages) and [disadvantages](https://redis.io/topics/persistence#rdb-disadvantages) of RDB persistence.</span></span>
* <span data-ttu-id="ea190-115">**AOF beständiga** -beständiga när AOF (Lägg till fil) har konfigurerats, Azure Redis-Cache sparar varje skrivning tooa åtgärdsloggen som har sparats minst en gång per sekund på ett Azure Storage-konto.</span><span class="sxs-lookup"><span data-stu-id="ea190-115">**AOF persistence** - When AOF (Append only file) persistence is configured, Azure Redis Cache saves every write operation tooa log that is saved at least once per second into an Azure Storage account.</span></span> <span data-ttu-id="ea190-116">Om ett allvarligt fel inträffar som inaktiverar såväl hello primär replik cache har hello cache byggts med hello lagras skrivåtgärder.</span><span class="sxs-lookup"><span data-stu-id="ea190-116">If a catastrophic event occurs that disables both hello primary and replica cache, hello cache is reconstructed using hello stored write operations.</span></span> <span data-ttu-id="ea190-117">Mer information om hello [fördelar](https://redis.io/topics/persistence#aof-advantages) och [nackdelar](https://redis.io/topics/persistence#aof-disadvantages) av AOF beständighet.</span><span class="sxs-lookup"><span data-stu-id="ea190-117">Learn more about hello [advantages](https://redis.io/topics/persistence#aof-advantages) and [disadvantages](https://redis.io/topics/persistence#aof-disadvantages) of AOF persistence.</span></span>

<span data-ttu-id="ea190-118">Beständiga konfigureras från hello **nytt Redis-Cache** bladet under Skapa cache och på hello **resurs menyn** befintliga premium cachelagrar.</span><span class="sxs-lookup"><span data-stu-id="ea190-118">Persistence is configured from hello **New Redis Cache** blade during cache creation and on hello **Resource menu** for existing premium caches.</span></span>

[!INCLUDE [redis-cache-create](../../includes/redis-cache-premium-create.md)]

<span data-ttu-id="ea190-119">När en premium-prisnivån är markerad, klickar du på **Redis-persistence**.</span><span class="sxs-lookup"><span data-stu-id="ea190-119">Once a premium pricing tier is selected, click **Redis persistence**.</span></span>

![Redis-persistence][redis-cache-persistence]

<span data-ttu-id="ea190-121">hello steg i hello nästa avsnitt beskriver hur tooconfigure Redis-datapersistence på din nya premium-cachen.</span><span class="sxs-lookup"><span data-stu-id="ea190-121">hello steps in hello next section describe how tooconfigure Redis persistence on your new premium cache.</span></span> <span data-ttu-id="ea190-122">När Redis-persistence har konfigurerats klickar du på **skapa** toocreate din nya premium cachelagra med Redis-persistence.</span><span class="sxs-lookup"><span data-stu-id="ea190-122">Once Redis persistence is configured, click **Create** toocreate your new premium cache with Redis persistence.</span></span>

## <a name="enable-redis-persistence"></a><span data-ttu-id="ea190-123">Aktivera Redis-persistence</span><span class="sxs-lookup"><span data-stu-id="ea190-123">Enable Redis persistence</span></span>

<span data-ttu-id="ea190-124">Redis-persistence har aktiverats på hello **Redis-datapersistence** bladet genom att välja antingen **RDB** eller **AOF** beständighet.</span><span class="sxs-lookup"><span data-stu-id="ea190-124">Redis persistence is enabled on hello **Redis data persistence** blade by choosing either **RDB** or **AOF** persistence.</span></span> <span data-ttu-id="ea190-125">För nya cacheminnen åt det här bladet under hello-cache skapas, enligt beskrivningen i föregående avsnitt i hello.</span><span class="sxs-lookup"><span data-stu-id="ea190-125">For new caches, this blade is accessed during hello cache creation process, as described in hello previous section.</span></span> <span data-ttu-id="ea190-126">Befintliga cacheminnen hello **Redis-datapersistence** bladet kan nås från hello **resurs menyn** för ditt cacheminne.</span><span class="sxs-lookup"><span data-stu-id="ea190-126">For existing caches, hello **Redis data persistence** blade is accessed from hello **Resource menu** for your cache.</span></span>

![Redis-inställningar][redis-cache-settings]


## <a name="configure-rdb-persistence"></a><span data-ttu-id="ea190-128">Konfigurera RDB persistence</span><span class="sxs-lookup"><span data-stu-id="ea190-128">Configure RDB persistence</span></span>

<span data-ttu-id="ea190-129">tooenable RDB beständiga klickar du på **RDB**.</span><span class="sxs-lookup"><span data-stu-id="ea190-129">tooenable RDB persistence, click **RDB**.</span></span> <span data-ttu-id="ea190-130">toodisable RDB beständiga på en tidigare aktiverade premium-cache, klickar du på **inaktiverade**.</span><span class="sxs-lookup"><span data-stu-id="ea190-130">toodisable RDB persistence on a previously enabled premium cache, click **Disabled**.</span></span>

![Redis-persistence RDB][redis-cache-rdb-persistence]

<span data-ttu-id="ea190-132">tooconfigure hello intervall för säkerhetskopiering, väljer en **säkerhetskopieringsfrekvens** hello nedrullningsbara listan.</span><span class="sxs-lookup"><span data-stu-id="ea190-132">tooconfigure hello backup interval, select a **Backup Frequency** from hello drop-down list.</span></span> <span data-ttu-id="ea190-133">Alternativen är **15 minuter**, **30 minuter**, **60 minuter**, **6 timmar**, **12 timmar**, och **24 timmar**.</span><span class="sxs-lookup"><span data-stu-id="ea190-133">Choices include **15 Minutes**, **30 minutes**, **60 minutes**, **6 hours**, **12 hours**, and **24 hours**.</span></span> <span data-ttu-id="ea190-134">Det här intervallet börjar räkna när hello tidigare säkerhetskopieringen har slutförts och när det ska gå en ny säkerhetskopia initieras.</span><span class="sxs-lookup"><span data-stu-id="ea190-134">This interval starts counting down after hello previous backup operation successfully completes and when it elapses a new backup is initiated.</span></span>

<span data-ttu-id="ea190-135">Klicka på **Lagringskonto** tooselect hello storage-konto toouse och välj antingen hello **primärnyckel** eller **sekundärnyckeln** toouse från hello **lagring Nyckeln** listrutan.</span><span class="sxs-lookup"><span data-stu-id="ea190-135">Click **Storage Account** tooselect hello storage account toouse, and choose either hello **Primary key** or **Secondary key** toouse from hello **Storage Key** drop-down.</span></span> <span data-ttu-id="ea190-136">Du måste välja ett lagringskonto i hello samma region som hello cache, och en **Premiumlagring** konto rekommenderas eftersom premium-lagring har högre kapacitet.</span><span class="sxs-lookup"><span data-stu-id="ea190-136">You must choose a storage account in hello same region as hello cache, and a **Premium Storage** account is recommended because premium storage has higher throughput.</span></span> 

> [!IMPORTANT]
> <span data-ttu-id="ea190-137">Om hello lagringsnyckeln för ditt konto beständiga genereras, måste du konfigurera om hello önskade nyckeln från hello **Lagringsnyckel** listrutan.</span><span class="sxs-lookup"><span data-stu-id="ea190-137">If hello storage key for your persistence account is regenerated, you must reconfigure hello desired key from hello **Storage Key** drop-down.</span></span>
> 
> 

<span data-ttu-id="ea190-138">Klicka på **OK** toosave hello beständiga konfigurationen.</span><span class="sxs-lookup"><span data-stu-id="ea190-138">Click **OK** toosave hello persistence configuration.</span></span>

<span data-ttu-id="ea190-139">hello nästa säkerhetskopiering (eller första säkerhetskopieringen för nya cacheminnen) initieras när långa hello säkerhetskopieringsfrekvens intervall.</span><span class="sxs-lookup"><span data-stu-id="ea190-139">hello next backup (or first backup for new caches) is initiated once hello backup frequency interval elapses.</span></span>

## <a name="configure-aof-persistence"></a><span data-ttu-id="ea190-140">Konfigurera AOF persistence</span><span class="sxs-lookup"><span data-stu-id="ea190-140">Configure AOF persistence</span></span>

<span data-ttu-id="ea190-141">tooenable AOF beständiga klickar du på **AOF**.</span><span class="sxs-lookup"><span data-stu-id="ea190-141">tooenable AOF persistence, click **AOF**.</span></span> <span data-ttu-id="ea190-142">toodisable AOF beständiga på en tidigare aktiverade premium-cache, klickar du på **inaktiverade**.</span><span class="sxs-lookup"><span data-stu-id="ea190-142">toodisable AOF persistence on a previously enabled premium cache, click **Disabled**.</span></span>

![Redis-persistence AOF][redis-cache-aof-persistence]

<span data-ttu-id="ea190-144">tooconfigure AOF beständiga, ange en **första Lagringskonto**.</span><span class="sxs-lookup"><span data-stu-id="ea190-144">tooconfigure AOF persistence, specify a **First Storage Account**.</span></span> <span data-ttu-id="ea190-145">Det här lagringskontot måste vara i hello samma region som hello cache, och en **Premium-lagring** konto rekommenderas eftersom premium-lagring har högre kapacitet.</span><span class="sxs-lookup"><span data-stu-id="ea190-145">This storage account must be in hello same region as hello cache, and a **Premium Storage** account is recommended because premium storage has higher throughput.</span></span> <span data-ttu-id="ea190-146">Du kan också konfigurera en ytterligare lagringskontonamnet **andra Lagringskonto**.</span><span class="sxs-lookup"><span data-stu-id="ea190-146">You can optionally configure an additional storage account named **Second Storage Account**.</span></span> <span data-ttu-id="ea190-147">Om ett andra storage-konto har konfigurerats, hello skrivningar toohello replik cache skrivs toothis andra storage-konto.</span><span class="sxs-lookup"><span data-stu-id="ea190-147">If a second storage account is configured, hello writes toohello replica cache are written toothis second storage account.</span></span> <span data-ttu-id="ea190-148">För varje konfigurerad lagring-konto, väljer du antingen hello **primärnyckel** eller **sekundärnyckeln** toouse från hello **Lagringsnyckel** listrutan.</span><span class="sxs-lookup"><span data-stu-id="ea190-148">For each configured storage account, choose either hello **Primary key** or **Secondary key** toouse from hello **Storage Key** drop-down.</span></span> 

> [!IMPORTANT]
> <span data-ttu-id="ea190-149">Om hello lagringsnyckeln för ditt konto beständiga genereras, måste du konfigurera om hello önskade nyckeln från hello **Lagringsnyckel** listrutan.</span><span class="sxs-lookup"><span data-stu-id="ea190-149">If hello storage key for your persistence account is regenerated, you must reconfigure hello desired key from hello **Storage Key** drop-down.</span></span>
> 
> 

<span data-ttu-id="ea190-150">När AOF persistence har aktiverats kan du skriva operations toohello cache sparas toohello avses storage-konto (eller konton om du har konfigurerat ett andra storage-konto).</span><span class="sxs-lookup"><span data-stu-id="ea190-150">When AOF persistence is enabled, write operations toohello cache are saved toohello designated storage account (or accounts if you have configured a second storage account).</span></span> <span data-ttu-id="ea190-151">I hello händelse av ett oåterkalleligt fel för som tar ned båda hello primära och repliken cache hello lagrade AOF loggen är toorebuild hello cache.</span><span class="sxs-lookup"><span data-stu-id="ea190-151">In hello event of a catastrophic failure that takes down both hello primary and replica cache, hello stored AOF log is used toorebuild hello cache.</span></span>

## <a name="persistence-faq"></a><span data-ttu-id="ea190-152">Beständiga vanliga frågor och svar</span><span class="sxs-lookup"><span data-stu-id="ea190-152">Persistence FAQ</span></span>
<span data-ttu-id="ea190-153">hello innehåller följande lista svar toocommonly frågor och svar om Azure Redis-Cache-persistence.</span><span class="sxs-lookup"><span data-stu-id="ea190-153">hello following list contains answers toocommonly asked questions about Azure Redis Cache persistence.</span></span>

* [<span data-ttu-id="ea190-154">Kan jag aktivera persistence på en tidigare skapad cache?</span><span class="sxs-lookup"><span data-stu-id="ea190-154">Can I enable persistence on a previously created cache?</span></span>](#can-i-enable-persistence-on-a-previously-created-cache)
* [<span data-ttu-id="ea190-155">Kan jag aktivera AOF och RDB beständiga på hello samtidigt?</span><span class="sxs-lookup"><span data-stu-id="ea190-155">Can I enable AOF and RDB persistence at hello same time?</span></span>](#can-i-enable-aof-and-rdb-persistence-at-the-same-time)
* [<span data-ttu-id="ea190-156">Vilken beständiga modell ska jag välja?</span><span class="sxs-lookup"><span data-stu-id="ea190-156">Which persistence model should I choose?</span></span>](#which-persistence-model-should-i-choose)
* [<span data-ttu-id="ea190-157">Vad händer om jag har skalats tooa annan storlek och en säkerhetskopia återställs som togs före hello skalning åtgärden?</span><span class="sxs-lookup"><span data-stu-id="ea190-157">What happens if I have scaled tooa different size and a backup is restored that was made before hello scaling operation?</span></span>](#what-happens-if-i-have-scaled-to-a-different-size-and-a-backup-is-restored-that-was-made-before-the-scaling-operation)


### <a name="rdb-persistence"></a><span data-ttu-id="ea190-158">RDB beständiga</span><span class="sxs-lookup"><span data-stu-id="ea190-158">RDB persistence</span></span>
* [<span data-ttu-id="ea190-159">Kan jag ändra hello RDB säkerhetskopieringsfrekvens när du har skapat hello cache?</span><span class="sxs-lookup"><span data-stu-id="ea190-159">Can I change hello RDB backup frequency after I create hello cache?</span></span>](#can-i-change-the-rdb-backup-frequency-after-i-create-the-cache)
* [<span data-ttu-id="ea190-160">Varför är det mer än 60 minuter mellan säkerhetskopieringar om jag har en RDB säkerhetskopieringsfrekvens 60 minuter?</span><span class="sxs-lookup"><span data-stu-id="ea190-160">Why if I have an RDB backup frequency of 60 minutes there is more than 60 minutes between backups?</span></span>](#why-if-i-have-an-rdb-backup-frequency-of-60-minutes-there-is-more-than-60-minutes-between-backups)
* [<span data-ttu-id="ea190-161">Vad händer toohello gamla RDB säkerhetskopior när en ny säkerhetskopia görs?</span><span class="sxs-lookup"><span data-stu-id="ea190-161">What happens toohello old RDB backups when a new backup is made?</span></span>](#what-happens-to-the-old-rdb-backups-when-a-new-backup-is-made)

### <a name="aof-persistence"></a><span data-ttu-id="ea190-162">AOF beständiga</span><span class="sxs-lookup"><span data-stu-id="ea190-162">AOF persistence</span></span>
* [<span data-ttu-id="ea190-163">När bör jag använda ett andra storage-konto?</span><span class="sxs-lookup"><span data-stu-id="ea190-163">When should I use a second storage account?</span></span>](#when-should-i-use-a-second-storage-account)
* [<span data-ttu-id="ea190-164">Stöder AOF beständiga påverkar hela svarstid, prestanda, och min-cache?</span><span class="sxs-lookup"><span data-stu-id="ea190-164">Does AOF persistence affect throughout, latency, or performance of my cache?</span></span>](#does-aof-persistence-affect-throughout-latency-or-performance-of-my-cache)
* [<span data-ttu-id="ea190-165">Hur tar jag bort hello andra storage-konto?</span><span class="sxs-lookup"><span data-stu-id="ea190-165">How can I remove hello second storage account?</span></span>](#how-can-i-remove-the-second-storage-account)
* [<span data-ttu-id="ea190-166">Vad är en omarbetning och hur påverkar min cache?</span><span class="sxs-lookup"><span data-stu-id="ea190-166">What is a rewrite and how does it affect my cache?</span></span>](#what-is-a-rewrite-and-how-does-it-affect-my-cache)
* [<span data-ttu-id="ea190-167">Vad bör jag förvänta dig när skalning en cache med AOF aktiverad?</span><span class="sxs-lookup"><span data-stu-id="ea190-167">What should I expect when scaling a cache with AOF enabled?</span></span>](#what-should-i-expect-when-scaling-a-cache-with-aof-enabled)
* [<span data-ttu-id="ea190-168">Hur organiseras mina AOF data i lagring?</span><span class="sxs-lookup"><span data-stu-id="ea190-168">How is my AOF data organized in storage?</span></span>](#how-is-my-aof-data-organized-in-storage)


### <a name="can-i-enable-persistence-on-a-previously-created-cache"></a><span data-ttu-id="ea190-169">Kan jag aktivera persistence på en tidigare skapad cache?</span><span class="sxs-lookup"><span data-stu-id="ea190-169">Can I enable persistence on a previously created cache?</span></span>
<span data-ttu-id="ea190-170">Ja, Redis-persistence konfigureras skapa cache och på befintliga premium cacheminnen.</span><span class="sxs-lookup"><span data-stu-id="ea190-170">Yes, Redis persistence can be configured both at cache creation and on existing premium caches.</span></span>

### <a name="can-i-enable-aof-and-rdb-persistence-at-hello-same-time"></a><span data-ttu-id="ea190-171">Kan jag aktivera AOF och RDB beständiga på hello samtidigt?</span><span class="sxs-lookup"><span data-stu-id="ea190-171">Can I enable AOF and RDB persistence at hello same time?</span></span>

<span data-ttu-id="ea190-172">Nej, du kan aktivera endast RDB eller AOF, men inte båda på hello samtidigt.</span><span class="sxs-lookup"><span data-stu-id="ea190-172">No, you can enable only RDB or AOF, but not both at hello same time.</span></span>

### <a name="which-persistence-model-should-i-choose"></a><span data-ttu-id="ea190-173">Vilken beständiga modell ska jag välja?</span><span class="sxs-lookup"><span data-stu-id="ea190-173">Which persistence model should I choose?</span></span>

<span data-ttu-id="ea190-174">AOF beständiga sparar varje skrivning tooa-loggen har vissa inverkan på dataflöde, jämfört med RDB beständiga som sparar säkerhetskopieringar utifrån hello konfigurerats säkerhetskopieringsintervallet, med minimal inverkan på prestanda.</span><span class="sxs-lookup"><span data-stu-id="ea190-174">AOF persistence saves every write tooa log, which has some impact on throughput, compared with RDB persistence which saves backups based on hello configured backup interval, with minimal impact on performance.</span></span> <span data-ttu-id="ea190-175">Välj AOF beständiga om din primära målet är toominimize dataförlust och du kan hantera en minskning i dataflöde för ditt cacheminne.</span><span class="sxs-lookup"><span data-stu-id="ea190-175">Choose AOF persistence if your primary goal is toominimize data loss, and you can handle a decrease in throughput for your cache.</span></span> <span data-ttu-id="ea190-176">Välj RDB beständiga om du vill att toomaintain optimal genomströmning på ditt cacheminne men ändå vill en mekanism för att återställa data.</span><span class="sxs-lookup"><span data-stu-id="ea190-176">Choose RDB persistence if you wish toomaintain optimal throughput on your cache, but still want a mechanism for data recovery.</span></span>

* <span data-ttu-id="ea190-177">Mer information om hello [fördelar](https://redis.io/topics/persistence#rdb-advantages) och [nackdelar](https://redis.io/topics/persistence#rdb-disadvantages) av RDB persistence.</span><span class="sxs-lookup"><span data-stu-id="ea190-177">Learn more about hello [advantages](https://redis.io/topics/persistence#rdb-advantages) and [disadvantages](https://redis.io/topics/persistence#rdb-disadvantages) of RDB persistence.</span></span>
* <span data-ttu-id="ea190-178">Mer information om hello [fördelar](https://redis.io/topics/persistence#aof-advantages) och [nackdelar](https://redis.io/topics/persistence#aof-disadvantages) av AOF beständighet.</span><span class="sxs-lookup"><span data-stu-id="ea190-178">Learn more about hello [advantages](https://redis.io/topics/persistence#aof-advantages) and [disadvantages](https://redis.io/topics/persistence#aof-disadvantages) of AOF persistence.</span></span>

<span data-ttu-id="ea190-179">Läs mer på prestanda när du använder AOF beständiga [har AOF beständiga påverkar hela svarstid, prestanda, och min-cache?](#does-aof-persistence-affect-throughout-latency-or-performance-of-my-cache)</span><span class="sxs-lookup"><span data-stu-id="ea190-179">For more information on performance when using AOF persistence, see [Does AOF persistence affect throughout, latency, or performance of my cache?](#does-aof-persistence-affect-throughout-latency-or-performance-of-my-cache)</span></span>

### <a name="what-happens-if-i-have-scaled-tooa-different-size-and-a-backup-is-restored-that-was-made-before-hello-scaling-operation"></a><span data-ttu-id="ea190-180">Vad händer om jag har skalats tooa annan storlek och en säkerhetskopia återställs som togs före hello skalning åtgärden?</span><span class="sxs-lookup"><span data-stu-id="ea190-180">What happens if I have scaled tooa different size and a backup is restored that was made before hello scaling operation?</span></span>

<span data-ttu-id="ea190-181">För både RDB och AOF:</span><span class="sxs-lookup"><span data-stu-id="ea190-181">For both RDB and AOF persistence:</span></span>

* <span data-ttu-id="ea190-182">Om du har skalats tooa större storlek påverkas inte.</span><span class="sxs-lookup"><span data-stu-id="ea190-182">If you have scaled tooa larger size, there is no impact.</span></span>
* <span data-ttu-id="ea190-183">Om du har skalats tooa mindre storlek, och du har en anpassad [databaser](cache-configure.md#databases) inställningar som är större än hello [databaser gränsen](cache-configure.md#databases) för din nya storleken är inte återställa data i dessa databaser.</span><span class="sxs-lookup"><span data-stu-id="ea190-183">If you have scaled tooa smaller size, and you have a custom [databases](cache-configure.md#databases) setting that is greater than hello [databases limit](cache-configure.md#databases) for your new size, data in those databases isn't restored.</span></span> <span data-ttu-id="ea190-184">Mer information finns i [är mina egna databaser anger berörda under skalning?](cache-how-to-scale.md#is-my-custom-databases-setting-affected-during-scaling)</span><span class="sxs-lookup"><span data-stu-id="ea190-184">For more information, see [Is my custom databases setting affected during scaling?](cache-how-to-scale.md#is-my-custom-databases-setting-affected-during-scaling)</span></span>
* <span data-ttu-id="ea190-185">Om du har skalats tooa mindre storlek, och det finns inte tillräckligt med utrymme i hello mindre storlek toohold alla hello data från hello senaste säkerhetskopiering, nycklar kommer att avlägsnas under hello återställningsprocessen, vanligtvis med hello [allkeys lru](http://redis.io/topics/lru-cache) borttagning princip.</span><span class="sxs-lookup"><span data-stu-id="ea190-185">If you have scaled tooa smaller size, and there isn't enough room in hello smaller size toohold all of hello data from hello last backup, keys will be evicted during hello restore process, typically using hello [allkeys-lru](http://redis.io/topics/lru-cache) eviction policy.</span></span>

### <a name="can-i-change-hello-rdb-backup-frequency-after-i-create-hello-cache"></a><span data-ttu-id="ea190-186">Kan jag ändra hello RDB säkerhetskopieringsfrekvens när du har skapat hello cache?</span><span class="sxs-lookup"><span data-stu-id="ea190-186">Can I change hello RDB backup frequency after I create hello cache?</span></span>
<span data-ttu-id="ea190-187">Ja, du kan ändra hello säkerhetskopieringsfrekvensen för RDB beständiga på hello **Redis-datapersistence** bladet.</span><span class="sxs-lookup"><span data-stu-id="ea190-187">Yes, you can change hello backup frequency for RDB persistence on hello **Redis data persistence** blade.</span></span> <span data-ttu-id="ea190-188">Instruktioner finns i [konfigurera Redis beständiga](#configure-redis-persistence).</span><span class="sxs-lookup"><span data-stu-id="ea190-188">For instructions, see [Configure Redis persistence](#configure-redis-persistence).</span></span>

### <a name="why-if-i-have-an-rdb-backup-frequency-of-60-minutes-there-is-more-than-60-minutes-between-backups"></a><span data-ttu-id="ea190-189">Varför är det mer än 60 minuter mellan säkerhetskopieringar om jag har en RDB säkerhetskopieringsfrekvens 60 minuter?</span><span class="sxs-lookup"><span data-stu-id="ea190-189">Why if I have an RDB backup frequency of 60 minutes there is more than 60 minutes between backups?</span></span>
<span data-ttu-id="ea190-190">hello RDB beständiga säkerhetskopieringsfrekvens intervall startar inte förrän hello tidigare säkerhetskopieringen har slutförts.</span><span class="sxs-lookup"><span data-stu-id="ea190-190">hello RDB persistence backup frequency interval does not start until hello previous backup process has completed successfully.</span></span> <span data-ttu-id="ea190-191">Om hello frekvens för säkerhetskopiering är 60 minuter och det tar en säkerhetskopieringsprocessen 15 minuter toosuccessfully slutförts, startar inte hello nästa säkerhetskopiering tills 75 minuter efter hello starttid för hello tidigare säkerhetskopia.</span><span class="sxs-lookup"><span data-stu-id="ea190-191">If hello backup frequency is 60 minutes and it takes a backup process 15 minutes toosuccessfully complete, hello next backup won't start until 75 minutes after hello start time of hello previous backup.</span></span>

### <a name="what-happens-toohello-old-rdb-backups-when-a-new-backup-is-made"></a><span data-ttu-id="ea190-192">Vad händer toohello gamla RDB säkerhetskopior när en ny säkerhetskopia görs?</span><span class="sxs-lookup"><span data-stu-id="ea190-192">What happens toohello old RDB backups when a new backup is made?</span></span>
<span data-ttu-id="ea190-193">Alla RDB beständiga säkerhetskopior förutom hello senaste tas bort automatiskt.</span><span class="sxs-lookup"><span data-stu-id="ea190-193">All RDB persistence backups except for hello most recent one are automatically deleted.</span></span> <span data-ttu-id="ea190-194">Borttagningen kan inte sker omedelbart men gamla säkerhetskopior bevaras inte under obestämd tid.</span><span class="sxs-lookup"><span data-stu-id="ea190-194">This deletion may not happen immediately but older backups are not persisted indefinitely.</span></span>


### <a name="when-should-i-use-a-second-storage-account"></a><span data-ttu-id="ea190-195">När bör jag använda ett andra storage-konto?</span><span class="sxs-lookup"><span data-stu-id="ea190-195">When should I use a second storage account?</span></span>

<span data-ttu-id="ea190-196">Du bör använda ett andra storage-konto för AOF när du tror att du har högre än förväntade uppsättningen åtgärder på hello cache.</span><span class="sxs-lookup"><span data-stu-id="ea190-196">You should use a second storage account for AOF persistence when you believe you have higher than expected set operations on hello cache.</span></span>  <span data-ttu-id="ea190-197">Konfigurera hello sekundära lagringskonto bidrar till ditt cacheminne inte nå lagringsgränser för bandbredd.</span><span class="sxs-lookup"><span data-stu-id="ea190-197">Setting up hello secondary storage account helps ensure your cache doesn't reach storage bandwidth limits.</span></span>

### <a name="does-aof-persistence-affect-throughout-latency-or-performance-of-my-cache"></a><span data-ttu-id="ea190-198">Stöder AOF beständiga påverkar hela svarstid, prestanda, och min-cache?</span><span class="sxs-lookup"><span data-stu-id="ea190-198">Does AOF persistence affect throughout, latency, or performance of my cache?</span></span>

<span data-ttu-id="ea190-199">AOF beständiga påverkar genomströmning av ungefär 15% – 20% när hello cache understiger största belastning (processor- och läsa in både under 90%).</span><span class="sxs-lookup"><span data-stu-id="ea190-199">AOF persistence affects throughput by about 15% – 20% when hello cache is below maximum load (CPU and Server Load both under 90%).</span></span> <span data-ttu-id="ea190-200">Det får inte vara problem med nätverkssvarstiden när hello cache är inom de angivna gränserna.</span><span class="sxs-lookup"><span data-stu-id="ea190-200">There should not be latency issues when hello cache is within these limits.</span></span> <span data-ttu-id="ea190-201">Dock når hello cache dessa gränser snabbare med AOF aktiverad.</span><span class="sxs-lookup"><span data-stu-id="ea190-201">However, hello cache will reach these limits sooner with AOF enabled.</span></span>

### <a name="how-can-i-remove-hello-second-storage-account"></a><span data-ttu-id="ea190-202">Hur tar jag bort hello andra storage-konto?</span><span class="sxs-lookup"><span data-stu-id="ea190-202">How can I remove hello second storage account?</span></span>

<span data-ttu-id="ea190-203">Du kan ta bort hello AOF beständiga sekundära storage-konto genom att ange hello andra lagringskonto toobe hello samma som hello första lagringskontot.</span><span class="sxs-lookup"><span data-stu-id="ea190-203">You can remove hello AOF persistence secondary storage account by setting hello second storage account toobe hello same as hello first storage account.</span></span> <span data-ttu-id="ea190-204">Instruktioner finns i [konfigurera AOF beständiga](#configure-aof-persistence).</span><span class="sxs-lookup"><span data-stu-id="ea190-204">For instructions, see [Configure AOF persistence](#configure-aof-persistence).</span></span>

### <a name="what-is-a-rewrite-and-how-does-it-affect-my-cache"></a><span data-ttu-id="ea190-205">Vad är en omarbetning och hur påverkar min cache?</span><span class="sxs-lookup"><span data-stu-id="ea190-205">What is a rewrite and how does it affect my cache?</span></span>

<span data-ttu-id="ea190-206">När hello AOF filen blir tillräckligt stor i kö på en omarbetning automatiskt på hello-cachen.</span><span class="sxs-lookup"><span data-stu-id="ea190-206">When hello AOF file becomes large enough, a rewrite is automatically queued on hello cache.</span></span> <span data-ttu-id="ea190-207">hello omarbetning storlek hello AOF filen med hello minimal uppsättning åtgärder som krävs för toocreate hello aktuella datauppsättningen.</span><span class="sxs-lookup"><span data-stu-id="ea190-207">hello rewrite resizes hello AOF file with hello minimal set of operations needed toocreate hello current data set.</span></span> <span data-ttu-id="ea190-208">Under omskrivningar, räknar tooreach prestandabegränsningarna snabbare särskilt vid hantering av stora datamängder.</span><span class="sxs-lookup"><span data-stu-id="ea190-208">During rewrites, expect tooreach performance limits sooner especially when dealing with large datasets.</span></span> <span data-ttu-id="ea190-209">Omskrivningar ske mindre ofta som hello AOF filen blir större, men kan ta lång tid när det sker.</span><span class="sxs-lookup"><span data-stu-id="ea190-209">Rewrites occur less often as hello AOF file becomes larger, but will take a significant amount of time when it happens.</span></span>

### <a name="what-should-i-expect-when-scaling-a-cache-with-aof-enabled"></a><span data-ttu-id="ea190-210">Vad bör jag förvänta dig när skalning en cache med AOF aktiverad?</span><span class="sxs-lookup"><span data-stu-id="ea190-210">What should I expect when scaling a cache with AOF enabled?</span></span>

<span data-ttu-id="ea190-211">Om hello AOF filen när hello skalning är mycket stor förväntar du dig hello skala åtgärden tootake längre tid än förväntat eftersom den kommer att ladda filen hello efter skalning har slutförts.</span><span class="sxs-lookup"><span data-stu-id="ea190-211">If hello AOF file at hello time of scaling is significantly large, then expect hello scale operation tootake longer than expected since it will be reloading hello file after scaling has finished.</span></span>

<span data-ttu-id="ea190-212">Läs mer om att skala [vad händer om jag har skalats tooa annan storlek och en säkerhetskopia återställs som togs före hello skalning åtgärden?](#what-happens-if-i-have-scaled-to-a-different-size-and-a-backup-is-restored-that-was-made-before-the-scaling-operation)</span><span class="sxs-lookup"><span data-stu-id="ea190-212">For more information on scaling, see [What happens if I have scaled tooa different size and a backup is restored that was made before hello scaling operation?](#what-happens-if-i-have-scaled-to-a-different-size-and-a-backup-is-restored-that-was-made-before-the-scaling-operation)</span></span>

### <a name="how-is-my-aof-data-organized-in-storage"></a><span data-ttu-id="ea190-213">Hur organiseras mina AOF data i lagring?</span><span class="sxs-lookup"><span data-stu-id="ea190-213">How is my AOF data organized in storage?</span></span>

<span data-ttu-id="ea190-214">Data som lagras i AOF filer är indelade i flera sidblobbar per nod tooincrease prestanda för att spara hello data toostorage.</span><span class="sxs-lookup"><span data-stu-id="ea190-214">Data stored in AOF files is divided into multiple page blobs per node tooincrease performance of saving hello data toostorage.</span></span> <span data-ttu-id="ea190-215">hello visar följande tabell hur många sidblobbar som ska användas för varje prisnivå:</span><span class="sxs-lookup"><span data-stu-id="ea190-215">hello following table displays how many page blobs are used for each pricing tier:</span></span>

| <span data-ttu-id="ea190-216">Premiumnivå</span><span class="sxs-lookup"><span data-stu-id="ea190-216">Premium tier</span></span> | <span data-ttu-id="ea190-217">Blobar</span><span class="sxs-lookup"><span data-stu-id="ea190-217">Blobs</span></span> |
|--------------|-------|
| <span data-ttu-id="ea190-218">P1</span><span class="sxs-lookup"><span data-stu-id="ea190-218">P1</span></span>           | <span data-ttu-id="ea190-219">4 per Fragmentera</span><span class="sxs-lookup"><span data-stu-id="ea190-219">4 per shard</span></span>    |
| <span data-ttu-id="ea190-220">P2</span><span class="sxs-lookup"><span data-stu-id="ea190-220">P2</span></span>           | <span data-ttu-id="ea190-221">8 per Fragmentera</span><span class="sxs-lookup"><span data-stu-id="ea190-221">8 per shard</span></span>    |
| <span data-ttu-id="ea190-222">P3</span><span class="sxs-lookup"><span data-stu-id="ea190-222">P3</span></span>           | <span data-ttu-id="ea190-223">16 per Fragmentera</span><span class="sxs-lookup"><span data-stu-id="ea190-223">16 per shard</span></span>   |
| <span data-ttu-id="ea190-224">P4</span><span class="sxs-lookup"><span data-stu-id="ea190-224">P4</span></span>           | <span data-ttu-id="ea190-225">20 per Fragmentera</span><span class="sxs-lookup"><span data-stu-id="ea190-225">20 per shard</span></span>   |

<span data-ttu-id="ea190-226">När kluster är aktiverad, har varje Fragmentera i hello cache en egen uppsättning sidblobar, som anges i hello föregående tabell.</span><span class="sxs-lookup"><span data-stu-id="ea190-226">When clustering is enabled, each shard in hello cache has its own set of page blobs, as indicated in hello previous table.</span></span> <span data-ttu-id="ea190-227">Till exempel distribuerar en P2 cache med tre delar dess AOF fil över 24 sidblobbar (8 blobbar per Fragmentera med 3 shards).</span><span class="sxs-lookup"><span data-stu-id="ea190-227">For example, a P2 cache with three shards distributes its AOF file across 24 page blobs (8 blobs per shard, with 3 shards).</span></span>

<span data-ttu-id="ea190-228">Efter en omarbetning finns två uppsättningar av AOF filer i lagringen.</span><span class="sxs-lookup"><span data-stu-id="ea190-228">After a rewrite, two sets of AOF files exist in storage.</span></span> <span data-ttu-id="ea190-229">Omskrivningar sker i bakgrunden hello och Lägg till toohello första uppsättning filer, medan uppsättning åtgärder som skickas toohello cache under hello omarbetning bifoga toohello andra uppsättningen.</span><span class="sxs-lookup"><span data-stu-id="ea190-229">Rewrites occur in hello background and append toohello first set of files, while set operations that are sent toohello cache during hello rewrite append toohello second set.</span></span> <span data-ttu-id="ea190-230">En säkerhetskopia lagras tillfälligt under omskrivningar om fel uppstår, men raderas omedelbart när en omarbetning har slutförts.</span><span class="sxs-lookup"><span data-stu-id="ea190-230">A backup is temporarily stored during rewrites in case of failure, but is promptly deleted after a rewrite finishes.</span></span>


## <a name="next-steps"></a><span data-ttu-id="ea190-231">Nästa steg</span><span class="sxs-lookup"><span data-stu-id="ea190-231">Next steps</span></span>
<span data-ttu-id="ea190-232">Lär dig hur toouse mer premium cachelagra funktioner.</span><span class="sxs-lookup"><span data-stu-id="ea190-232">Learn how toouse more premium cache features.</span></span>

* [<span data-ttu-id="ea190-233">Introduktion toohello Azure Redis Cache Premium-nivån</span><span class="sxs-lookup"><span data-stu-id="ea190-233">Introduction toohello Azure Redis Cache Premium tier</span></span>](cache-premium-tier-intro.md)

<!-- IMAGES -->

[redis-cache-premium-pricing-tier]: ./media/cache-how-to-premium-persistence/redis-cache-premium-pricing-tier.png

[redis-cache-persistence]: ./media/cache-how-to-premium-persistence/redis-cache-persistence.png

[redis-cache-rdb-persistence]: ./media/cache-how-to-premium-persistence/redis-cache-rdb-persistence.png

[redis-cache-aof-persistence]: ./media/cache-how-to-premium-persistence/redis-cache-aof-persistence.png

[redis-cache-settings]: ./media/cache-how-to-premium-persistence/redis-cache-settings.png

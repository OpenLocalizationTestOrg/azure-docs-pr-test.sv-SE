---
title: "Kör skript för Python machine learning | Microsoft Docs"
description: "Ger en översikt över utforma principerna stöd för Python-skript i Azure Machine Learning och grundläggande Användningsscenarier, funktioner och begränsningar."
keywords: "Python maskininlärning pandas, python pandas, python-skript för körning av python-skript"
services: machine-learning
documentationcenter: 
author: bradsev
manager: jhubbard
editor: cgronlun
ms.assetid: ee9eb764-0d3e-4104-a797-19fc29345d39
ms.service: machine-learning
ms.workload: data-services
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 07/26/2017
ms.author: bradsev
ms.openlocfilehash: e8d6377bc939e6711a96e521b5f574fc8d060929
ms.sourcegitcommit: 02e69c4a9d17645633357fe3d46677c2ff22c85a
ms.translationtype: MT
ms.contentlocale: sv-SE
ms.lasthandoff: 08/03/2017
---
# <a name="execute-python-machine-learning-scripts-in-azure-machine-learning-studio"></a><span data-ttu-id="439f4-104">Kör skript för Python-maskininlärning i Azure Machine Learning Studio</span><span class="sxs-lookup"><span data-stu-id="439f4-104">Execute Python machine learning scripts in Azure Machine Learning Studio</span></span>

<span data-ttu-id="439f4-105">Det här avsnittet beskrivs de aktuella stödet för Python-skript i Azure Machine Learning designprinciperna.</span><span class="sxs-lookup"><span data-stu-id="439f4-105">This topic describes the design principles underlying the current support for Python scripts in Azure Machine Learning.</span></span> <span data-ttu-id="439f4-106">De huvudsakliga funktionerna som också beskrivs, inklusive:</span><span class="sxs-lookup"><span data-stu-id="439f4-106">The main capabilities provided are also outlined, including:</span></span>

- <span data-ttu-id="439f4-107">köra grundläggande Användningsscenarier</span><span class="sxs-lookup"><span data-stu-id="439f4-107">execute basic usage scenarios</span></span>
- <span data-ttu-id="439f4-108">resultatet av ett experiment i en webbtjänst</span><span class="sxs-lookup"><span data-stu-id="439f4-108">score an experiment in a web service</span></span>
- <span data-ttu-id="439f4-109">stöd för att importera befintlig kod</span><span class="sxs-lookup"><span data-stu-id="439f4-109">support for importing existing code</span></span>
- <span data-ttu-id="439f4-110">Exportera visualiseringar</span><span class="sxs-lookup"><span data-stu-id="439f4-110">export visualizations</span></span>
- <span data-ttu-id="439f4-111">utföra övervakat Funktionsurval</span><span class="sxs-lookup"><span data-stu-id="439f4-111">perform supervised feature selection</span></span>
- <span data-ttu-id="439f4-112">Förstå vissa begränsningar</span><span class="sxs-lookup"><span data-stu-id="439f4-112">understand some limitations</span></span>

<span data-ttu-id="439f4-113">[Python](https://www.python.org/) är ett ovärderligt verktyg för verktyget bröstet många data forskare.</span><span class="sxs-lookup"><span data-stu-id="439f4-113">[Python](https://www.python.org/) is an indispensable tool in the tool chest of many data scientists.</span></span> <span data-ttu-id="439f4-114">Det har:</span><span class="sxs-lookup"><span data-stu-id="439f4-114">It has:</span></span>

* <span data-ttu-id="439f4-115">en elegant och koncis syntax</span><span class="sxs-lookup"><span data-stu-id="439f4-115">an elegant and concise syntax,</span></span> 
* <span data-ttu-id="439f4-116">plattformsoberoende stöd</span><span class="sxs-lookup"><span data-stu-id="439f4-116">cross-platform support,</span></span> 
* <span data-ttu-id="439f4-117">en omfattande uppsättning kraftfulla bibliotek och</span><span class="sxs-lookup"><span data-stu-id="439f4-117">a vast collection of powerful libraries, and</span></span> 
* <span data-ttu-id="439f4-118">mogen utvecklingsverktyg.</span><span class="sxs-lookup"><span data-stu-id="439f4-118">mature development tools.</span></span> 

<span data-ttu-id="439f4-119">Python som används i alla faser av ett arbetsflöde som vanligtvis används i machine learning modellering:</span><span class="sxs-lookup"><span data-stu-id="439f4-119">Python is being used in all phases of a workflow typically used in machine learning modeling:</span></span>

- <span data-ttu-id="439f4-120">mata in data och bearbetning</span><span class="sxs-lookup"><span data-stu-id="439f4-120">data ingest and processing</span></span> 
- <span data-ttu-id="439f4-121">funktionen konstruktion</span><span class="sxs-lookup"><span data-stu-id="439f4-121">feature construction</span></span>
- <span data-ttu-id="439f4-122">modell-utbildning</span><span class="sxs-lookup"><span data-stu-id="439f4-122">model training</span></span> 
- <span data-ttu-id="439f4-123">modellverifiering</span><span class="sxs-lookup"><span data-stu-id="439f4-123">model validation</span></span>
- <span data-ttu-id="439f4-124">distribution av modeller</span><span class="sxs-lookup"><span data-stu-id="439f4-124">deployment of the models</span></span>

<span data-ttu-id="439f4-125">Azure Machine Learning Studio stöder inbäddning Python-skript till olika delar av en dator learning experiment och publicera dem också sömlöst som webbtjänster på Microsoft Azure.</span><span class="sxs-lookup"><span data-stu-id="439f4-125">Azure Machine Learning Studio supports embedding Python scripts into various parts of a machine learning experiment and also seamlessly publishing them as web services on Microsoft Azure.</span></span>

[!INCLUDE [machine-learning-free-trial](../../includes/machine-learning-free-trial.md)]


## <a name="design-principles-of-python-scripts-in-machine-learning"></a><span data-ttu-id="439f4-126">Designprinciperna för Python-skript i Machine Learning</span><span class="sxs-lookup"><span data-stu-id="439f4-126">Design principles of Python scripts in Machine Learning</span></span>

<span data-ttu-id="439f4-127">Det primära gränssnittet till Python i Azure Machine Learning Studio är via den [köra Python-skriptet] [ execute-python-script] modulen som visas i bild 1.</span><span class="sxs-lookup"><span data-stu-id="439f4-127">The primary interface to Python in Azure Machine Learning Studio is via the [Execute Python Script][execute-python-script] module shown in Figure 1.</span></span>

![image1](./media/machine-learning-execute-python-scripts/execute-machine-learning-python-scripts-module.png)

![image2](./media/machine-learning-execute-python-scripts/embedded-machine-learning-python-script.png)

<span data-ttu-id="439f4-130">Bild 1.</span><span class="sxs-lookup"><span data-stu-id="439f4-130">Figure 1.</span></span> <span data-ttu-id="439f4-131">Den **köra Python-skriptet** modul.</span><span class="sxs-lookup"><span data-stu-id="439f4-131">The **Execute Python Script** module.</span></span>

<span data-ttu-id="439f4-132">Den [köra Python-skriptet] [ execute-python-script] modul i Azure ML Studio accepterar upp till tre indata och ger upp till två utdata (beskrivs i följande avsnitt), t.ex. dess R-analog den [köra R-skriptet] [ execute-r-script] modul.</span><span class="sxs-lookup"><span data-stu-id="439f4-132">The [Execute Python Script][execute-python-script] module in Azure ML Studio accepts up to three inputs and produces up to two outputs (discussed in the following section), like its R analogue, the [Execute R Script][execute-r-script] module.</span></span> <span data-ttu-id="439f4-133">För att köra Python-kod har angetts i parameterrutan som ett särskilt namngiven startpunkten anropade funktionen `azureml_main`.</span><span class="sxs-lookup"><span data-stu-id="439f4-133">The Python code to be executed is entered into the parameter box as a specially named entry-point function called `azureml_main`.</span></span> <span data-ttu-id="439f4-134">Här följer principerna för viktiga designbeslut som används för att implementera den här modulen:</span><span class="sxs-lookup"><span data-stu-id="439f4-134">Here are the key design principles used to implement this module:</span></span>

1. <span data-ttu-id="439f4-135">*Måste vara idiomatiska för Python-användare.*</span><span class="sxs-lookup"><span data-stu-id="439f4-135">*Must be idiomatic for Python users.*</span></span> <span data-ttu-id="439f4-136">De flesta Python användare factor koden som funktioner i moduler.</span><span class="sxs-lookup"><span data-stu-id="439f4-136">Most Python users factor their code as functions inside modules.</span></span> <span data-ttu-id="439f4-137">Placera så mycket körbara instruktioner i en översta modul är relativt ovanligt.</span><span class="sxs-lookup"><span data-stu-id="439f4-137">So putting a lot of executable statements in a top-level module is relatively rare.</span></span> <span data-ttu-id="439f4-138">Därför tar skript kryssrutan också en särskild Python-funktion i stället för bara en sekvens av rapporter.</span><span class="sxs-lookup"><span data-stu-id="439f4-138">As a result, the script box also takes a specially named Python function as opposed to just a sequence of statements.</span></span> <span data-ttu-id="439f4-139">De objekt som exponeras i funktionen är till exempel Python biblioteket Standardtyper [Pandas](http://pandas.pydata.org/) dataramar och [NumPy](http://www.numpy.org/) matriser.</span><span class="sxs-lookup"><span data-stu-id="439f4-139">The objects exposed in the function are standard Python library types such as [Pandas](http://pandas.pydata.org/) data frames and [NumPy](http://www.numpy.org/) arrays.</span></span>
2. <span data-ttu-id="439f4-140">*Måste ha exakt mellan lokala och molntjänster körningar.*</span><span class="sxs-lookup"><span data-stu-id="439f4-140">*Must have high-fidelity between local and cloud executions.*</span></span> <span data-ttu-id="439f4-141">Serverdelen som används för att köra Python-kod är baserad på [Anaconda](https://store.continuum.io/cshop/anaconda/)en vanlig plattformsoberoende vetenskapliga Python-distribution.</span><span class="sxs-lookup"><span data-stu-id="439f4-141">The backend used to execute the Python code is based on [Anaconda](https://store.continuum.io/cshop/anaconda/), a widely used cross-platform scientific Python distribution.</span></span> <span data-ttu-id="439f4-142">Den innehåller nära 200 av de vanligaste Python-paket.</span><span class="sxs-lookup"><span data-stu-id="439f4-142">It comes with close to 200 of the most common Python packages.</span></span> <span data-ttu-id="439f4-143">Därför dataanalytiker felsöka och kvalificera koden på sina lokala Azure Machine Learning-kompatibla Anaconda-miljön.</span><span class="sxs-lookup"><span data-stu-id="439f4-143">Therefore, data scientists can debug and qualify their code on their local Azure Machine Learning-compatible Anaconda environment.</span></span> <span data-ttu-id="439f4-144">Använd en befintlig utvecklingsmiljö som [IPython](http://ipython.org/) bärbar dator eller [Python Tools för Visual Studio](http://aka.ms/ptvs), för att köra den som en del av ett experiment i Azure ML.</span><span class="sxs-lookup"><span data-stu-id="439f4-144">Then use an existing development environment, such as [IPython](http://ipython.org/) notebook or [Python Tools for Visual Studio](http://aka.ms/ptvs), to run it as part of an Azure ML experiment.</span></span> <span data-ttu-id="439f4-145">Den `azureml_main` startadressen är en vanliga Python-funktion och kan därför *** kan skapas utan Azure ML-specifik kod eller SDK installerad.</span><span class="sxs-lookup"><span data-stu-id="439f4-145">The `azureml_main` entry point is a vanilla Python function and so ****can be authored without Azure ML-specific code or the SDK installed.</span></span>
3. <span data-ttu-id="439f4-146">*Måste vara sömlöst sammanställningsbara med andra Azure Machine Learning-moduler.*</span><span class="sxs-lookup"><span data-stu-id="439f4-146">*Must be seamlessly composable with other Azure Machine Learning modules.*</span></span> <span data-ttu-id="439f4-147">Den [köra Python-skriptet] [ execute-python-script] modulen accepterar, som indata och utdata, standard Azure Machine Learning datauppsättningar.</span><span class="sxs-lookup"><span data-stu-id="439f4-147">The [Execute Python Script][execute-python-script] module accepts, as inputs and outputs, standard Azure Machine Learning datasets.</span></span> <span data-ttu-id="439f4-148">Underliggande ramverk få transparent och effektivt sätt körningar Azure ML och Python.</span><span class="sxs-lookup"><span data-stu-id="439f4-148">The underlying framework transparently and efficiently bridges the Azure ML and Python runtimes.</span></span> <span data-ttu-id="439f4-149">Så kan Python användas tillsammans med befintliga Azure ML-arbetsflöden, inklusive de som anropar R och SQLite.</span><span class="sxs-lookup"><span data-stu-id="439f4-149">So Python can be used in conjunction with existing Azure ML workflows, including those that call into R and SQLite.</span></span> <span data-ttu-id="439f4-150">Resulterar i att data forskare kan skapa arbetsflöden som:</span><span class="sxs-lookup"><span data-stu-id="439f4-150">A  result, data scientist could compose workflows that:</span></span>
   * <span data-ttu-id="439f4-151">använda Python och Pandas för förbearbetning och rensning</span><span class="sxs-lookup"><span data-stu-id="439f4-151">use Python and Pandas for data pre-processing and cleaning</span></span>
   * <span data-ttu-id="439f4-152">feed data till en SQL-omvandling ansluta flera DataSet till formulärfunktioner</span><span class="sxs-lookup"><span data-stu-id="439f4-152">feed the data to a SQL transformation, joining multiple datasets to form features</span></span>
   * <span data-ttu-id="439f4-153">Träna modeller med algoritmer i Azure Machine Learning</span><span class="sxs-lookup"><span data-stu-id="439f4-153">train models using the algorithms in Azure Machine Learning</span></span> 
   * <span data-ttu-id="439f4-154">utvärdera och efterbearbetning resultat med R.</span><span class="sxs-lookup"><span data-stu-id="439f4-154">evaluate and post-process the results using R.</span></span>


## <a name="basic-usage-scenarios-in-ml-for-python-scripts"></a><span data-ttu-id="439f4-155">Grundläggande Användningsscenarier i ML för Python-skript</span><span class="sxs-lookup"><span data-stu-id="439f4-155">Basic usage scenarios in ML for Python scripts</span></span>

<span data-ttu-id="439f4-156">I det här avsnittet vi en undersökning några grundläggande användning av den [köra Python-skriptet] [ execute-python-script] modul.</span><span class="sxs-lookup"><span data-stu-id="439f4-156">In this section, we survey some of the basic uses of the [Execute Python Script][execute-python-script] module.</span></span> <span data-ttu-id="439f4-157">Indata till Python-modul exponeras som Pandas ramar.</span><span class="sxs-lookup"><span data-stu-id="439f4-157">Inputs to the Python module are exposed as Pandas data frames.</span></span> <span data-ttu-id="439f4-158">Funktionen måste returnera en Pandas data bildruta paketeras i en Python [sekvens](https://docs.python.org/2/c-api/sequence.html) , till exempel en tuppel, lista eller NumPy matris.</span><span class="sxs-lookup"><span data-stu-id="439f4-158">The function must return a single Pandas data frame packaged inside of a Python [sequence](https://docs.python.org/2/c-api/sequence.html) such as a tuple, list, or NumPy array.</span></span> <span data-ttu-id="439f4-159">Det första elementet i den här sekvensen returneras sedan den första utdataporten för modulen.</span><span class="sxs-lookup"><span data-stu-id="439f4-159">The first element of this sequence is then returned in the first output port of the module.</span></span> <span data-ttu-id="439f4-160">Det här schemat visas i bild 2.</span><span class="sxs-lookup"><span data-stu-id="439f4-160">This scheme is shown in Figure 2.</span></span>

![image3](./media/machine-learning-execute-python-scripts/map-of-python-script-inputs-outputs.png)

<span data-ttu-id="439f4-162">Figur 2.</span><span class="sxs-lookup"><span data-stu-id="439f4-162">Figure 2.</span></span> <span data-ttu-id="439f4-163">Mappningen av inkommande portar till parametrar och returnera värdet till utdataporten.</span><span class="sxs-lookup"><span data-stu-id="439f4-163">Mapping of input ports to parameters and return value to output port.</span></span>

<span data-ttu-id="439f4-164">Mer detaljerad semantiken för hur portarna hämta mappas till parametrarna för den `azureml_main` funktionen visas i tabell 1:</span><span class="sxs-lookup"><span data-stu-id="439f4-164">More detailed semantics of how the input ports get mapped to parameters of the `azureml_main` function are shown in Table 1:</span></span>

![image1T](./media/machine-learning-execute-python-scripts/python-script-inputs-mapped-to-parameters.png)

<span data-ttu-id="439f4-166">Tabell 1.</span><span class="sxs-lookup"><span data-stu-id="439f4-166">Table 1.</span></span> <span data-ttu-id="439f4-167">Mappning av portar till funktionsparametrar.</span><span class="sxs-lookup"><span data-stu-id="439f4-167">Mapping of input ports to function parameters.</span></span>

<span data-ttu-id="439f4-168">Mappningen mellan portar och funktionsparametrar är namngivna:</span><span class="sxs-lookup"><span data-stu-id="439f4-168">The mapping between input ports and function parameters is positional:</span></span>

- <span data-ttu-id="439f4-169">Den första anslutna indataporten är mappad till den första parametern för funktionen.</span><span class="sxs-lookup"><span data-stu-id="439f4-169">The first connected input port is mapped to the first parameter of the function.</span></span> 
- <span data-ttu-id="439f4-170">Andra indata (om ansluten) mappas till den andra parametern för funktionen.</span><span class="sxs-lookup"><span data-stu-id="439f4-170">The second input (if connected) is mapped to the second parameter of the function.</span></span>

<span data-ttu-id="439f4-171">Se *Python för dataanalys* (O'Reilly 2012) av västra McKinney för mer information om Python Pandas och hur det kan användas för att manipulera data effektivt.</span><span class="sxs-lookup"><span data-stu-id="439f4-171">See *Python for Data Analysis* (O'Reilly, 2012) by W. McKinney for more information on Python Pandas and on how it can be used to manipulate data effectively and efficiently.</span></span> 


## <a name="translation-of-input-and-output-types"></a><span data-ttu-id="439f4-172">Översättning av inkommande och utgående typer</span><span class="sxs-lookup"><span data-stu-id="439f4-172">Translation of input and output types</span></span> 
<span data-ttu-id="439f4-173">Indatauppsättningar i Azure ML konverteras till ramar i Pandas.</span><span class="sxs-lookup"><span data-stu-id="439f4-173">Input datasets in Azure ML are converted to data frames in Pandas.</span></span> <span data-ttu-id="439f4-174">Utdata dataramar konverteras tillbaka till Azure ML datauppsättningar.</span><span class="sxs-lookup"><span data-stu-id="439f4-174">Output data frames are converted back to Azure ML datasets.</span></span> <span data-ttu-id="439f4-175">Följande konverteringar utförs:</span><span class="sxs-lookup"><span data-stu-id="439f4-175">The following conversions are performed:</span></span>

1. <span data-ttu-id="439f4-176">Sträng och numeriska kolumner konverteras som-är och värden som saknas i en dataset konverteras till ”NA-värden i Pandas.</span><span class="sxs-lookup"><span data-stu-id="439f4-176">String and numeric columns are converted as-is and missing values in a dataset are converted to ‘NA’ values in Pandas.</span></span> <span data-ttu-id="439f4-177">Samma konverteringen sker på sättet tillbaka (NA värden i Pandas konverteras till värden som saknas i Azure ML).</span><span class="sxs-lookup"><span data-stu-id="439f4-177">The same conversion happens on the way back (NA values in Pandas are converted to missing values in Azure ML).</span></span>
2. <span data-ttu-id="439f4-178">Index angreppsmetoderna i Pandas stöds inte i Azure ML.</span><span class="sxs-lookup"><span data-stu-id="439f4-178">Index vectors in Pandas are not supported in Azure ML.</span></span> <span data-ttu-id="439f4-179">Alla indata ramar i Python-funktionen har alltid ett 64-bitars numeriskt index från 0 till antalet rader minus 1.</span><span class="sxs-lookup"><span data-stu-id="439f4-179">All input data frames in the Python function always have a 64-bit numerical index from 0 to the number of rows minus 1.</span></span> 
3. <span data-ttu-id="439f4-180">Azure ML-datauppsättningar kan inte ha dubbletter av kolumnnamn och kolumnnamn som inte är strängar.</span><span class="sxs-lookup"><span data-stu-id="439f4-180">Azure ML datasets cannot have duplicate column names and column names that are not strings.</span></span> <span data-ttu-id="439f4-181">Om en utgående data ram innehåller icke-numeriska kolumner, ramen anropar `str` på kolumnnamn.</span><span class="sxs-lookup"><span data-stu-id="439f4-181">If an output data frame contains non-numeric columns, the framework calls `str` on the column names.</span></span> <span data-ttu-id="439f4-182">På samma sätt fullkvalificeras några dubbletter av kolumnnamn automatiskt för att försäkra att namnen är unika.</span><span class="sxs-lookup"><span data-stu-id="439f4-182">Likewise, any duplicate column names are automatically mangled to insure the names are unique.</span></span> <span data-ttu-id="439f4-183">Suffix (2) läggs till de första duplicerade, (3) till andra dubblett och så vidare.</span><span class="sxs-lookup"><span data-stu-id="439f4-183">The suffix (2) is added to the first duplicate, (3) to the second duplicate, and so on.</span></span>


## <a name="operationalizing-python-scripts"></a><span data-ttu-id="439f4-184">Operationalizing Python-skript</span><span class="sxs-lookup"><span data-stu-id="439f4-184">Operationalizing Python scripts</span></span>

<span data-ttu-id="439f4-185">Alla [köra Python-skriptet] [ execute-python-script] moduler som används i ett bedömningsprofil experiment anropas när publiceras som en webbtjänst.</span><span class="sxs-lookup"><span data-stu-id="439f4-185">Any [Execute Python Script][execute-python-script] modules used in a scoring experiment are called when published as a web service.</span></span> <span data-ttu-id="439f4-186">Bild 3 visar till exempel ett bedömningsprofil experiment som innehåller koden för att utvärdera ett enda Python-uttryck.</span><span class="sxs-lookup"><span data-stu-id="439f4-186">For example, Figure 3 shows a scoring experiment that contains the code to evaluate a single Python expression.</span></span> 

![image4](./media/machine-learning-execute-python-scripts/figure3a.png)

![image5](./media/machine-learning-execute-python-scripts/python-script-with-python-pandas.png)

<span data-ttu-id="439f4-189">Bild 3.</span><span class="sxs-lookup"><span data-stu-id="439f4-189">Figure 3.</span></span> <span data-ttu-id="439f4-190">Webbtjänsten för utvärdering av ett Python-uttryck.</span><span class="sxs-lookup"><span data-stu-id="439f4-190">Web service for evaluating a Python expression.</span></span>

<span data-ttu-id="439f4-191">En webbtjänst som skapas från den här experiment:</span><span class="sxs-lookup"><span data-stu-id="439f4-191">A web service created from this experiment:</span></span>

- <span data-ttu-id="439f4-192">tar som indata en Python-uttryck (som sträng)</span><span class="sxs-lookup"><span data-stu-id="439f4-192">takes as input a Python expression (as a string)</span></span>
- <span data-ttu-id="439f4-193">skickar det till Python-tolkning</span><span class="sxs-lookup"><span data-stu-id="439f4-193">sends it to the Python interpreter</span></span> 
- <span data-ttu-id="439f4-194">Returnerar en tabell som innehåller både uttrycket och det beräknade resultatet.</span><span class="sxs-lookup"><span data-stu-id="439f4-194">returns a table containing both the expression and the evaluated result.</span></span>


## <a name="importing-existing-python-script-modules"></a><span data-ttu-id="439f4-195">Importera befintlig Python skriptmoduler</span><span class="sxs-lookup"><span data-stu-id="439f4-195">Importing existing Python script modules</span></span>

<span data-ttu-id="439f4-196">Ett vanligt användningsområde för många datavetare är att lägga till befintliga Python-skript i Azure ML experiment.</span><span class="sxs-lookup"><span data-stu-id="439f4-196">A common use-case for many data scientists is to incorporate existing Python scripts into Azure ML experiments.</span></span> <span data-ttu-id="439f4-197">I stället för att kräva att all kod som sammanfogas och klistras in i ett enda skript kryssrutan den [köra Python-skriptet] [ execute-python-script] modulen accepterar en zip-fil som innehåller Python-moduler på den tredje indataporten.</span><span class="sxs-lookup"><span data-stu-id="439f4-197">Instead of requiring that all code be concatenated and pasted into a single script box, the [Execute Python Script][execute-python-script] module accepts a zip file that contains Python modules at the third input port.</span></span> <span data-ttu-id="439f4-198">Filen är uppackade av körningen framework vid körning och innehållet läggs till i sökvägen till bibliotek för Python-tolkning.</span><span class="sxs-lookup"><span data-stu-id="439f4-198">The file is unzipped by the execution framework at runtime and the contents are added to the library path of the Python interpreter.</span></span> <span data-ttu-id="439f4-199">Den `azureml_main` startpunkten funktion kan sedan importera dessa moduler direkt.</span><span class="sxs-lookup"><span data-stu-id="439f4-199">The `azureml_main` entry point function can then import these modules directly.</span></span>

<span data-ttu-id="439f4-200">Exempelvis bör du filen Hello.py som innehåller en enkel ”Hello, World”-funktionen.</span><span class="sxs-lookup"><span data-stu-id="439f4-200">As an example, consider the file Hello.py containing a simple “Hello, World” function.</span></span>

![image6](./media/machine-learning-execute-python-scripts/figure4.png)

<span data-ttu-id="439f4-202">Bild 4.</span><span class="sxs-lookup"><span data-stu-id="439f4-202">Figure 4.</span></span> <span data-ttu-id="439f4-203">Användardefinierad funktion i Hello.py-filen.</span><span class="sxs-lookup"><span data-stu-id="439f4-203">User-defined function in Hello.py file.</span></span>

<span data-ttu-id="439f4-204">Nu ska skapa vi en fil Hello.zip som innehåller Hello.py:</span><span class="sxs-lookup"><span data-stu-id="439f4-204">Next, we create a file Hello.zip that contains Hello.py:</span></span>

![image7](./media/machine-learning-execute-python-scripts/figure5.png)

<span data-ttu-id="439f4-206">Bild 5.</span><span class="sxs-lookup"><span data-stu-id="439f4-206">Figure 5.</span></span> <span data-ttu-id="439f4-207">ZIP-filen som innehåller användardefinierade Python-kod.</span><span class="sxs-lookup"><span data-stu-id="439f4-207">Zip file containing user-defined Python code.</span></span>

<span data-ttu-id="439f4-208">Ladda upp zip-filen som en datamängd i Azure Machine Learning Studio.</span><span class="sxs-lookup"><span data-stu-id="439f4-208">Upload the zip file as a dataset into Azure Machine Learning Studio.</span></span> <span data-ttu-id="439f4-209">Sedan skapar och kör ett experiment som använder Python-kod i filen Hello.zip genom att koppla till den tredje indataporten av den **kör Python-skript** modulen som visas i bilden.</span><span class="sxs-lookup"><span data-stu-id="439f4-209">Then create and run an experiment that uses the Python code in the Hello.zip file by attaching it to the third input port of the **Execute Python Script** module, as shown in this figure.</span></span>

![image8](./media/machine-learning-execute-python-scripts/figure6a.png)

![image9](./media/machine-learning-execute-python-scripts/figure6b.png)

<span data-ttu-id="439f4-212">Bild 6.</span><span class="sxs-lookup"><span data-stu-id="439f4-212">Figure 6.</span></span> <span data-ttu-id="439f4-213">Exempelexperimentet med användardefinierade Python-kod överförs som en zip-fil.</span><span class="sxs-lookup"><span data-stu-id="439f4-213">Sample experiment with user-defined Python code uploaded as a zip file.</span></span>

<span data-ttu-id="439f4-214">Modulen utdata visar att zip-filen har anspråksregellogik och att funktionen `print_hello` har körts.</span><span class="sxs-lookup"><span data-stu-id="439f4-214">The module output shows that the zip file has been unpackaged and that the function `print_hello` has been run.</span></span>
<span data-ttu-id="439f4-215"> 
![image10](./media/machine-learning-execute-python-scripts/figure7.png)</span><span class="sxs-lookup"><span data-stu-id="439f4-215"> 
![image10](./media/machine-learning-execute-python-scripts/figure7.png)</span></span>

<span data-ttu-id="439f4-216">Bild 7.</span><span class="sxs-lookup"><span data-stu-id="439f4-216">Figure 7.</span></span> <span data-ttu-id="439f4-217">Användardefinierad funktion som används i den [köra Python-skriptet] [ execute-python-script] modul.</span><span class="sxs-lookup"><span data-stu-id="439f4-217">User-defined function in use inside the [Execute Python Script][execute-python-script] module.</span></span>


## <a name="working-with-visualizations"></a><span data-ttu-id="439f4-218">Arbeta med grafik</span><span class="sxs-lookup"><span data-stu-id="439f4-218">Working with visualizations</span></span>

<span data-ttu-id="439f4-219">Områden som skapats med hjälp av MatplotLib som kan vara visualiseras i webbläsare som kan returneras av den [köra Python-skriptet][execute-python-script].</span><span class="sxs-lookup"><span data-stu-id="439f4-219">Plots created using MatplotLib that can be visualized on the browser can be returned by the [Execute Python Script][execute-python-script].</span></span> <span data-ttu-id="439f4-220">Men områdena omdirigeras inte automatiskt till bilder som de är när du använder R. Så måste användaren uttryckligen spara alla områden i PNG-filer om de ska returneras till Azure Machine Learning.</span><span class="sxs-lookup"><span data-stu-id="439f4-220">But the plots are not automatically redirected to images as they are when using R. So the user must explicitly save any plots to PNG files if they are to be returned back to Azure Machine Learning.</span></span> 

<span data-ttu-id="439f4-221">Du måste slutföra följande procedur för att generera bilder från MatplotLib:</span><span class="sxs-lookup"><span data-stu-id="439f4-221">To generate images from MatplotLib, you must complete the following procedure:</span></span>

* <span data-ttu-id="439f4-222">Växla serverdelen till ”%{AGG/” från Qt-baserade standardåtergivning</span><span class="sxs-lookup"><span data-stu-id="439f4-222">switch the backend to “AGG” from the default Qt-based renderer</span></span> 
* <span data-ttu-id="439f4-223">Skapa ett nytt objekt i bild</span><span class="sxs-lookup"><span data-stu-id="439f4-223">create a new figure object</span></span> 
* <span data-ttu-id="439f4-224">Hämta axeln och generera alla områden i det.</span><span class="sxs-lookup"><span data-stu-id="439f4-224">get the axis and generate all plots into it</span></span> 
* <span data-ttu-id="439f4-225">Spara bilden i en PNG-fil</span><span class="sxs-lookup"><span data-stu-id="439f4-225">save the figure to a PNG file</span></span> 

<span data-ttu-id="439f4-226">Den här processen illustreras i följande figur 8 som skapar en punktdiagram ritytans matris med hjälp av funktionen scatter_matrix i Pandas.</span><span class="sxs-lookup"><span data-stu-id="439f4-226">This process is illustrated in the following Figure 8 that creates a scatter plot matrix using the scatter_matrix function in Pandas.</span></span>

![image1v](./media/machine-learning-execute-python-scripts/figure-v1-8.png)

<span data-ttu-id="439f4-228">Figur 8.</span><span class="sxs-lookup"><span data-stu-id="439f4-228">Figure 8.</span></span> <span data-ttu-id="439f4-229">Kod för att spara MatplotLib siffror till avbildningar.</span><span class="sxs-lookup"><span data-stu-id="439f4-229">Code to save MatplotLib figures to images.</span></span>

<span data-ttu-id="439f4-230">Bild 9 illustrerar ett experiment som använder skriptet visats att returnera ritas via andra utdataporten.</span><span class="sxs-lookup"><span data-stu-id="439f4-230">Figure 9 shows an experiment that uses the script shown previously to return plots via the second output port.</span></span>

![image2v](./media/machine-learning-execute-python-scripts/figure-v2-9a.png) 

![image2v](./media/machine-learning-execute-python-scripts/figure-v2-9b.png) 

<span data-ttu-id="439f4-233">Bild 9.</span><span class="sxs-lookup"><span data-stu-id="439f4-233">Figure 9.</span></span> <span data-ttu-id="439f4-234">Visualisera områden som genereras av Python-kod.</span><span class="sxs-lookup"><span data-stu-id="439f4-234">Visualizing plots generated from Python code.</span></span>

<span data-ttu-id="439f4-235">Det är möjligt att returnera flera siffror genom att spara dem i olika bilder, Azure Machine Learning-körningsmiljön hämtar alla bilder och sammanfogar dem för visualisering.</span><span class="sxs-lookup"><span data-stu-id="439f4-235">It is possible to return multiple figures by saving them into different images, the Azure Machine Learning runtime picks up all images and concatenates them for visualization.</span></span>


## <a name="advanced-examples"></a><span data-ttu-id="439f4-236">Avancerade exempel</span><span class="sxs-lookup"><span data-stu-id="439f4-236">Advanced examples</span></span>

<span data-ttu-id="439f4-237">Den Anaconda environment har installerats i Azure Machine Learning innehåller vanliga paket som NumPy, SciPy och Läs Scikits.</span><span class="sxs-lookup"><span data-stu-id="439f4-237">The Anaconda environment installed in Azure Machine Learning contains common packages such as NumPy, SciPy, and Scikits-Learn.</span></span> <span data-ttu-id="439f4-238">Dessa paket kan effektivt användas för olika aktiviteter för databehandling i machine learning-pipeline.</span><span class="sxs-lookup"><span data-stu-id="439f4-238">These packages can be effectively used for various data processing tasks in a machine learning pipeline.</span></span> <span data-ttu-id="439f4-239">Exempelvis visar följande experiment och skript hur du använder av ensemble deltagarna i Scikits veta att beräkna funktionen vikten poängen för en dataset.</span><span class="sxs-lookup"><span data-stu-id="439f4-239">As an example, the following experiment and script illustrate the use of ensemble learners in Scikits-Learn to compute feature importance scores for a dataset.</span></span> <span data-ttu-id="439f4-240">Poängen kan användas för att utföra övervakat Funktionsurval innan som matas in en annan ML-modell.</span><span class="sxs-lookup"><span data-stu-id="439f4-240">The scores can be used to perform supervised feature selection before being fed into another ML model.</span></span>

<span data-ttu-id="439f4-241">Här är Python-funktionen som används för att beräkna vikten poängen och ordning funktionerna baserat på poängen:</span><span class="sxs-lookup"><span data-stu-id="439f4-241">Here is the Python function used to compute the importance scores and order the features based on the scores:</span></span>

![image11](./media/machine-learning-execute-python-scripts/figure8.png)

<span data-ttu-id="439f4-243">Bild 10.</span><span class="sxs-lookup"><span data-stu-id="439f4-243">Figure 10.</span></span> <span data-ttu-id="439f4-244">Fungera rank funktioner av resultat.</span><span class="sxs-lookup"><span data-stu-id="439f4-244">Function to rank features by scores.</span></span>
<span data-ttu-id="439f4-245"> Följande experimentet sedan beräknar och returnerar resultaten vikten av funktioner i datauppsättningen ”Pima indiska Diabetes” i Azure Machine Learning:</span><span class="sxs-lookup"><span data-stu-id="439f4-245">  The following experiment then computes and returns the importance scores of features in the “Pima Indian Diabetes” dataset in Azure Machine Learning:</span></span>

<span data-ttu-id="439f4-246">![image12](./media/machine-learning-execute-python-scripts/figure9a.png)
![image13](./media/machine-learning-execute-python-scripts/figure9b.png)</span><span class="sxs-lookup"><span data-stu-id="439f4-246">![image12](./media/machine-learning-execute-python-scripts/figure9a.png)
![image13](./media/machine-learning-execute-python-scripts/figure9b.png)</span></span>    

<span data-ttu-id="439f4-247">Figur 11.</span><span class="sxs-lookup"><span data-stu-id="439f4-247">Figure 11.</span></span> <span data-ttu-id="439f4-248">Experimentera rank funktioner i Pima indiska Diabetes datamängden.</span><span class="sxs-lookup"><span data-stu-id="439f4-248">Experiment to rank features in the Pima Indian Diabetes dataset.</span></span>

## <a name="limitations"></a><span data-ttu-id="439f4-249">Begränsningar</span><span class="sxs-lookup"><span data-stu-id="439f4-249">Limitations</span></span>
<span data-ttu-id="439f4-250">Den [köra Python-skriptet] [ execute-python-script] för närvarande har följande begränsningar:</span><span class="sxs-lookup"><span data-stu-id="439f4-250">The [Execute Python Script][execute-python-script] currently has the following limitations:</span></span>

1. <span data-ttu-id="439f4-251">*Begränsade körning.*</span><span class="sxs-lookup"><span data-stu-id="439f4-251">*Sandboxed execution.*</span></span> <span data-ttu-id="439f4-252">Python-körning är för närvarande i begränsat läge och därför tillåter inte åtkomst till nätverket eller till det lokala filsystemet på ett beständigt sätt.</span><span class="sxs-lookup"><span data-stu-id="439f4-252">The Python runtime is currently sandboxed and, as a result, does not allow access to the network or to the local file system in a persistent manner.</span></span> <span data-ttu-id="439f4-253">Alla filer som sparats lokalt isolerats och tas bort när modulen har slutförts.</span><span class="sxs-lookup"><span data-stu-id="439f4-253">All files saved locally are isolated and deleted once the module finishes.</span></span> <span data-ttu-id="439f4-254">Python-kod kan inte komma åt de flesta kataloger på datorn som körs på, undantaget som den aktuella katalogen och dess underkataloger.</span><span class="sxs-lookup"><span data-stu-id="439f4-254">The Python code cannot access most directories on the machine it runs on, the exception being the current directory and its subdirectories.</span></span>
2. <span data-ttu-id="439f4-255">*Ingen avancerade utveckling och felsökning support.*</span><span class="sxs-lookup"><span data-stu-id="439f4-255">*Lack of sophisticated development and debugging support.*</span></span> <span data-ttu-id="439f4-256">Python-modulen stöder för närvarande inte IDE-funktioner, till exempel intellisense och felsökning.</span><span class="sxs-lookup"><span data-stu-id="439f4-256">The Python module currently does not support IDE features such as intellisense and debugging.</span></span> <span data-ttu-id="439f4-257">Även om modulen inte vid körning, finns fullständig stack-spårning för Python.</span><span class="sxs-lookup"><span data-stu-id="439f4-257">Also, if the module fails at runtime, the full Python stack trace is available.</span></span> <span data-ttu-id="439f4-258">Men den visas i utdataloggen för för modulen.</span><span class="sxs-lookup"><span data-stu-id="439f4-258">But it must be viewed in the output log for the module.</span></span> <span data-ttu-id="439f4-259">För närvarande rekommenderas att utveckla och Felsök Python-skript i en miljö, till exempel IPython och sedan importera koden i modulen.</span><span class="sxs-lookup"><span data-stu-id="439f4-259">We currently recommend that you develop and debug Python scripts in an environment such as IPython and then import the code into the module.</span></span>
3. <span data-ttu-id="439f4-260">*Enskild ram utdata.*</span><span class="sxs-lookup"><span data-stu-id="439f4-260">*Single data frame output.*</span></span> <span data-ttu-id="439f4-261">Startpunkten Python tillåts bara för att returnera en enda data-ram som utdata.</span><span class="sxs-lookup"><span data-stu-id="439f4-261">The Python entry point is only permitted to return a single data frame as output.</span></span> <span data-ttu-id="439f4-262">Det går för närvarande inte ska returneras godtyckliga Python-objekt, till exempel tränade modeller direkt tillbaka till Azure Machine Learning-körningsmiljön.</span><span class="sxs-lookup"><span data-stu-id="439f4-262">It is not currently possible to return arbitrary Python objects such as trained models directly back to the Azure Machine Learning runtime.</span></span> <span data-ttu-id="439f4-263">Som [köra R-skriptet][execute-r-script], som har samma begränsningar, om det är möjligt i de flesta fall att pickle objekt i en bytematris och returnera som inuti en data-ram.</span><span class="sxs-lookup"><span data-stu-id="439f4-263">Like [Execute R Script][execute-r-script], which has the same limitation, it is possible in many cases to pickle objects into a byte array and then return that inside of a data frame.</span></span>
4. <span data-ttu-id="439f4-264">*När det gäller att anpassa Python installation*.</span><span class="sxs-lookup"><span data-stu-id="439f4-264">*Inability to customize Python installation*.</span></span> <span data-ttu-id="439f4-265">Det enda sättet att lägga till anpassade Python-moduler är för närvarande via zip-filen mekanism som beskrivs ovan.</span><span class="sxs-lookup"><span data-stu-id="439f4-265">Currently, the only way to add custom Python modules is via the zip file mechanism described earlier.</span></span> <span data-ttu-id="439f4-266">Detta är möjligt för små moduler, är det besvärlig för stora moduler (särskilt de med inbyggda DLL-filer) eller ett stort antal moduler.</span><span class="sxs-lookup"><span data-stu-id="439f4-266">While this is feasible for small modules, it is cumbersome for large modules (especially those with native DLLs) or a large number of modules.</span></span> 

## <a name="conclusions"></a><span data-ttu-id="439f4-267">Slutsatser</span><span class="sxs-lookup"><span data-stu-id="439f4-267">Conclusions</span></span>
<span data-ttu-id="439f4-268">Den [köra Python-skriptet] [ execute-python-script] modulen gör att en data-forskare att lägga till befintliga Python-kod i molnbaserade machine learning arbetsflöden i Azure Machine Learning och sömlöst operationalisera dem som en del av en webbtjänst.</span><span class="sxs-lookup"><span data-stu-id="439f4-268">The [Execute Python Script][execute-python-script] module allows a data scientist to incorporate existing Python code into cloud-hosted machine learning workflows in Azure Machine Learning and to seamlessly operationalize them as part of a web service.</span></span> <span data-ttu-id="439f4-269">Modulen Python-skriptet samverkar naturligt med andra moduler i Azure Machine Learning.</span><span class="sxs-lookup"><span data-stu-id="439f4-269">The Python script module interoperates naturally with other modules in Azure Machine Learning.</span></span> <span data-ttu-id="439f4-270">Modulen kan användas för ett antal uppgifter från datagranskning före bearbetning och extrahering av funktionen och sedan utvärdering och efter bearbetningen av resultaten.</span><span class="sxs-lookup"><span data-stu-id="439f4-270">The module can be used for a range of tasks from data exploration to pre-processing and feature extraction, and then to evaluation and post-processing of the results.</span></span> <span data-ttu-id="439f4-271">Backend-körningsmiljön som används för körning av baseras på Anaconda, en väl testade och vanliga Python-distribution.</span><span class="sxs-lookup"><span data-stu-id="439f4-271">The backend runtime used for execution is based on Anaconda, a well-tested and widely used Python distribution.</span></span> <span data-ttu-id="439f4-272">Den här backend gör det enkelt för dig inbyggd befintlig kod tillgångar till molnet.</span><span class="sxs-lookup"><span data-stu-id="439f4-272">This backend makes it simple for you to on-board existing code assets into the cloud.</span></span>

<span data-ttu-id="439f4-273">Vi räknar med att ge ytterligare funktioner för den [köra Python-skriptet] [ execute-python-script] modulen, till exempel möjligheten att träna och operationalisera modeller i Python och ger bättre stöd för utveckling och felsökning av kod i Azure Machine Learning Studio.</span><span class="sxs-lookup"><span data-stu-id="439f4-273">We expect to provide additional functionality to the [Execute Python Script][execute-python-script] module such as the ability to train and operationalize models in Python and to add better support for the development and debugging code in Azure Machine Learning Studio.</span></span>

## <a name="next-steps"></a><span data-ttu-id="439f4-274">Nästa steg</span><span class="sxs-lookup"><span data-stu-id="439f4-274">Next steps</span></span>
<span data-ttu-id="439f4-275">Mer information finns i [Python Developer Center](https://azure.microsoft.com/develop/python/).</span><span class="sxs-lookup"><span data-stu-id="439f4-275">For more information, see the [Python Developer Center](https://azure.microsoft.com/develop/python/).</span></span>

<!-- Module References -->
[execute-python-script]: https://msdn.microsoft.com/library/azure/cdb56f95-7f4c-404d-bde7-5bb972e6f232/
[execute-r-script]: https://msdn.microsoft.com/library/azure/30806023-392b-42e0-94d6-6b775a6e0fd5/

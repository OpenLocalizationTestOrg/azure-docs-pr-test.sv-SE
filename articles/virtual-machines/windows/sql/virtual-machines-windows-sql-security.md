---
title: "aaaSecurity överväganden för SQL Server i Azure | Microsoft Docs"
description: "Det här avsnittet innehåller allmänna riktlinjer för att skydda SQL Server som körs i en virtuell dator i Azure."
services: virtual-machines-windows
documentationcenter: na
author: rothja
manager: jhubbard
editor: 
tags: azure-service-management
ms.assetid: d710c296-e490-43e7-8ca9-8932586b71da
ms.service: virtual-machines-sql
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: vm-windows-sql-server
ms.workload: iaas-sql-server
ms.date: 06/02/2017
ms.author: jroth
ms.openlocfilehash: 14c3d828fa87446da67beea6d28886de254afe15
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: sv-SE
ms.lasthandoff: 10/06/2017
---
# <a name="security-considerations-for-sql-server-in-azure-virtual-machines"></a><span data-ttu-id="6feb1-103">Säkerhetsöverväganden för SQL Server på Azure Virtual Machines</span><span class="sxs-lookup"><span data-stu-id="6feb1-103">Security Considerations for SQL Server in Azure Virtual Machines</span></span>

<span data-ttu-id="6feb1-104">Det här avsnittet innehåller allmänna riktlinjer att upprätta säker åtkomst tooSQL Server-instanser i en Azure virtuell dator (VM).</span><span class="sxs-lookup"><span data-stu-id="6feb1-104">This topic includes overall security guidelines that help establish secure access tooSQL Server instances in an Azure virtual machine (VM).</span></span>

<span data-ttu-id="6feb1-105">Azure uppfyller flera industrins föreskrifter och standarder som gör det möjligt toobuild en lösning som är kompatibel med SQL Server som körs på en virtuell dator.</span><span class="sxs-lookup"><span data-stu-id="6feb1-105">Azure complies with several industry regulations and standards that can enable you toobuild a compliant solution with SQL Server running in a virtual machine.</span></span> <span data-ttu-id="6feb1-106">Information om regelefterlevnad med Azure finns [Azure Säkerhetscenter](https://azure.microsoft.com/support/trust-center/).</span><span class="sxs-lookup"><span data-stu-id="6feb1-106">For information about regulatory compliance with Azure, see [Azure Trust Center](https://azure.microsoft.com/support/trust-center/).</span></span>

[!INCLUDE [learn-about-deployment-models](../../../../includes/learn-about-deployment-models-both-include.md)]

## <a name="control-access-toohello-sql-vm"></a><span data-ttu-id="6feb1-107">Kontrollera åtkomst toohello SQL VM</span><span class="sxs-lookup"><span data-stu-id="6feb1-107">Control access toohello SQL VM</span></span>

<span data-ttu-id="6feb1-108">När du skapar den virtuella datorn för SQL Server, kan du överväga hur toocarefully styra vem som har åtkomst toohello datorn och tooSQL Server.</span><span class="sxs-lookup"><span data-stu-id="6feb1-108">When you create your SQL Server virtual machine, consider how toocarefully control who has access toohello machine and tooSQL Server.</span></span> <span data-ttu-id="6feb1-109">I allmänhet bör du göra hello följande:</span><span class="sxs-lookup"><span data-stu-id="6feb1-109">In general, you should do hello following:</span></span>

- <span data-ttu-id="6feb1-110">Begränsa åtkomst tooSQL Server tooonly hello program och klienter som behöver den.</span><span class="sxs-lookup"><span data-stu-id="6feb1-110">Restrict access tooSQL Server tooonly hello applications and clients that need it.</span></span>
- <span data-ttu-id="6feb1-111">Följ Metodtips för hantering av användarkonton och lösenord.</span><span class="sxs-lookup"><span data-stu-id="6feb1-111">Follow best practices for managing user accounts and passwords.</span></span>

<span data-ttu-id="6feb1-112">hello följande avsnitt ger förslag på tänka igenom dessa punkter.</span><span class="sxs-lookup"><span data-stu-id="6feb1-112">hello following sections provide suggestions on thinking through these points.</span></span>

## <a name="secure-connections"></a><span data-ttu-id="6feb1-113">Säkra anslutningar</span><span class="sxs-lookup"><span data-stu-id="6feb1-113">Secure connections</span></span>

<span data-ttu-id="6feb1-114">När du skapar en virtuell dator med SQL Server med en bild i galleriet hello **SQL Server-anslutning** alternativet ger du hello valet av **lokala (inuti VM)**, **privat (inom Virtual Network)** , eller **offentlig (Internet)**.</span><span class="sxs-lookup"><span data-stu-id="6feb1-114">When you create a SQL Server virtual machine with a gallery image, hello **SQL Server Connectivity** option gives you hello choice of **Local (inside VM)**, **Private (within Virtual Network)**, or **Public (Internet)**.</span></span>

![SQL Server-anslutning](./media/virtual-machines-windows-sql-security/sql-vm-connectivity-option.png)

<span data-ttu-id="6feb1-116">Välj hello mest restriktiva alternativ för ditt scenario hello bäst säkerhet.</span><span class="sxs-lookup"><span data-stu-id="6feb1-116">For hello best security, choose hello most restrictive option for your scenario.</span></span> <span data-ttu-id="6feb1-117">Till exempel om du kör ett program som ansluter till SQL Server på hello samma VM sedan **lokala** är hello säkrast.</span><span class="sxs-lookup"><span data-stu-id="6feb1-117">For example, if you are running an application that accesses SQL Server on hello same VM, then **Local** is hello most secure choice.</span></span> <span data-ttu-id="6feb1-118">Om du kör ett Azure-program som kräver åtkomst toohello SQL Server, sedan **privata** skyddar kommunikation tooSQL Server endast inom hello anges [Azure Virtual Network](../../../virtual-network/virtual-networks-overview.md).</span><span class="sxs-lookup"><span data-stu-id="6feb1-118">If you are running an Azure application that requires access toohello SQL Server, then **Private** secures communication tooSQL Server only within hello specified [Azure Virtual Network](../../../virtual-network/virtual-networks-overview.md).</span></span> <span data-ttu-id="6feb1-119">Om du behöver **offentliga** (internest) åtkomst toohello SQL Server-VM, sedan se till att toofollow andra metodtips i det här avsnittet tooreduce din angreppsytan.</span><span class="sxs-lookup"><span data-stu-id="6feb1-119">If you require **Public** (internest) access toohello SQL Server VM, then make sure toofollow other best practices in this topic tooreduce your attack surface area.</span></span>

<span data-ttu-id="6feb1-120">hello valda alternativ i hello portal använder inkommande säkerhetsregler på hello VMs [Nätverkssäkerhetsgruppen](../../../virtual-network/virtual-networks-nsg.md) (NSG) tooallow eller neka nätverket trafik tooyour virtuella datorn.</span><span class="sxs-lookup"><span data-stu-id="6feb1-120">hello selected options in hello portal use inbound security rules on hello VMs [Network Security Group](../../../virtual-network/virtual-networks-nsg.md) (NSG) tooallow or deny network traffic tooyour virtual machine.</span></span> <span data-ttu-id="6feb1-121">Du kan ändra eller skapa nya regler för inkommande NSG tooallow trafik toohello SQL Server-porten (standard 1433).</span><span class="sxs-lookup"><span data-stu-id="6feb1-121">You can modify or create new inbound NSG rules tooallow traffic toohello SQL Server port (default 1433).</span></span> <span data-ttu-id="6feb1-122">Du kan också ange specifika IP-adresser som är tillåten toocommunicate via den här porten.</span><span class="sxs-lookup"><span data-stu-id="6feb1-122">You can also specify specific IP addresses that are allowed toocommunicate over this port.</span></span>

![Regler för nätverkssäkerhetsgrupper](./media/virtual-machines-windows-sql-security/sql-vm-network-security-group-rules.png)

<span data-ttu-id="6feb1-124">Dessutom tooNSG regler toorestrict nätverkstrafik kan du också använda hello Windows-brandväggen på hello virtuella datorn.</span><span class="sxs-lookup"><span data-stu-id="6feb1-124">In addition tooNSG rules toorestrict network traffic, you can also use hello Windows Firewall on hello virtual machine.</span></span>

<span data-ttu-id="6feb1-125">Om du använder slutpunkter med hello klassiska distributionsmodellen, ta bort alla slutpunkter på hello virtuell dator om du inte använder dem.</span><span class="sxs-lookup"><span data-stu-id="6feb1-125">If you are using endpoints with hello classic deployment model, remove any endpoints on hello virtual machine if you do not use them.</span></span> <span data-ttu-id="6feb1-126">Anvisningar om hur du använder ACL: er med slutpunkter finns [hantera hello ACL på en slutpunkt](../classic/setup-endpoints.md#manage-the-acl-on-an-endpoint).</span><span class="sxs-lookup"><span data-stu-id="6feb1-126">For instructions on using ACLs with endpoints, see [Manage hello ACL on an endpoint](../classic/setup-endpoints.md#manage-the-acl-on-an-endpoint).</span></span> <span data-ttu-id="6feb1-127">Detta är inte nödvändigt för virtuella datorer som använder hello Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="6feb1-127">This is not necessary for VMs that use hello Resource Manager.</span></span>

<span data-ttu-id="6feb1-128">Slutligen bör du aktivera krypterade anslutningar för hello instans av hello SQL Server Database Engine i ditt virtuella Azure-datorn.</span><span class="sxs-lookup"><span data-stu-id="6feb1-128">Finally, consider enabling encrypted connections for hello instance of hello SQL Server Database Engine in your Azure virtual machine.</span></span> <span data-ttu-id="6feb1-129">Konfigurera SQL server-instans med ett signerat certifikat.</span><span class="sxs-lookup"><span data-stu-id="6feb1-129">Configure SQL server instance with a signed certificate.</span></span> <span data-ttu-id="6feb1-130">Mer information finns i [aktivera krypterade anslutningar toohello databasmotorn](https://docs.microsoft.com/sql/database-engine/configure-windows/enable-encrypted-connections-to-the-database-engine) och [anslutningssträngar](https://msdn.microsoft.com/library/ms254500.aspx).</span><span class="sxs-lookup"><span data-stu-id="6feb1-130">For more information, see [Enable Encrypted Connections toohello Database Engine](https://docs.microsoft.com/sql/database-engine/configure-windows/enable-encrypted-connections-to-the-database-engine) and [Connection String Syntax](https://msdn.microsoft.com/library/ms254500.aspx).</span></span>

## <a name="use-a-non-default-port"></a><span data-ttu-id="6feb1-131">Använda en icke-standardport</span><span class="sxs-lookup"><span data-stu-id="6feb1-131">Use a non-default port</span></span>

<span data-ttu-id="6feb1-132">Som standard lyssnar SQL Server på en känd port 1433.</span><span class="sxs-lookup"><span data-stu-id="6feb1-132">By default, SQL Server listens on a well-known port, 1433.</span></span> <span data-ttu-id="6feb1-133">Konfigurera SQL Server-toolisten på en annan port än standardporten, till exempel 1401 för ökad säkerhet.</span><span class="sxs-lookup"><span data-stu-id="6feb1-133">For increased security, configure SQL Server toolisten on a non-default port, such as 1401.</span></span> <span data-ttu-id="6feb1-134">Om du etablerar en SQL Server-galleriet avbildning i hello Azure-portalen kan du ange den här porten i hello **SQL Server-inställningar** bladet.</span><span class="sxs-lookup"><span data-stu-id="6feb1-134">If you provision a SQL Server gallery image in hello Azure portal, you can specify this port in hello **SQL Server settings** blade.</span></span>

<span data-ttu-id="6feb1-135">tooconfigure detta när du har etablerat, har du två alternativ:</span><span class="sxs-lookup"><span data-stu-id="6feb1-135">tooconfigure this after provisioning, you have two options:</span></span>

- <span data-ttu-id="6feb1-136">För hanteraren för virtuella datorer, kan du välja **SQL Server-konfigurationsfilen** från hello VM översikt bladet.</span><span class="sxs-lookup"><span data-stu-id="6feb1-136">For Resource Manager VMs, you can select **SQL Server configuration** from hello VM overview blade.</span></span> <span data-ttu-id="6feb1-137">Detta ger ett alternativ toochange hello port.</span><span class="sxs-lookup"><span data-stu-id="6feb1-137">This provides an option toochange hello port.</span></span>

  ![TCP-port ändra i portalen](./media/virtual-machines-windows-sql-security/sql-vm-change-tcp-port.png)

- <span data-ttu-id="6feb1-139">För klassiska virtuella datorer eller för SQL Server-datorer som inte har etablerats med hello portal konfigurera du manuellt hello port genom att ansluta via fjärranslutning toohello VM.</span><span class="sxs-lookup"><span data-stu-id="6feb1-139">For Classic VMs or for SQL Server VMs that were not provisioned with hello portal, you can manually configure hello port by connecting remotely toohello VM.</span></span> <span data-ttu-id="6feb1-140">Hello konfigurationssteg finns [konfigurera en Server tooListen på en specifik TCP-Port](https://docs.microsoft.com/sql/database-engine/configure-windows/configure-a-server-to-listen-on-a-specific-tcp-port).</span><span class="sxs-lookup"><span data-stu-id="6feb1-140">For hello configuration steps, see [Configure a Server tooListen on a Specific TCP Port](https://docs.microsoft.com/sql/database-engine/configure-windows/configure-a-server-to-listen-on-a-specific-tcp-port).</span></span> <span data-ttu-id="6feb1-141">Om du använder den här manuella metoden måste du också tooadd en Windows-brandväggen regeln tooallow inkommande trafik på den TCP-porten.</span><span class="sxs-lookup"><span data-stu-id="6feb1-141">If you use this manual technique, you also need tooadd a Windows Firewall rule tooallow incoming traffic on that TCP port.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="6feb1-142">Ange en annan port än standardporten är en bra idé om SQL Server-porten är öppen toopublic internet-anslutningar.</span><span class="sxs-lookup"><span data-stu-id="6feb1-142">Specifying a non-default port is a good idea if your SQL Server port is open toopublic internet connections.</span></span>

<span data-ttu-id="6feb1-143">När SQL Server lyssnar på en icke-standardport måste du ange hello port när du ansluter.</span><span class="sxs-lookup"><span data-stu-id="6feb1-143">When SQL Server is listening on a non-default port, you must specify hello port when you connect.</span></span> <span data-ttu-id="6feb1-144">Tänk dig ett scenario där hello serverns IP-adress är 13.55.255.255 och SQL Server lyssnar på port 1401.</span><span class="sxs-lookup"><span data-stu-id="6feb1-144">For example, consider a scenario where hello server IP address is 13.55.255.255 and SQL Server is listening on port 1401.</span></span> <span data-ttu-id="6feb1-145">tooconnect tooSQL Server anger du `13.55.255.255,1401` i hello anslutningssträngen.</span><span class="sxs-lookup"><span data-stu-id="6feb1-145">tooconnect tooSQL Server, you would specify `13.55.255.255,1401` in hello connection string.</span></span>

## <a name="manage-accounts"></a><span data-ttu-id="6feb1-146">Hantera konton</span><span class="sxs-lookup"><span data-stu-id="6feb1-146">Manage accounts</span></span>

<span data-ttu-id="6feb1-147">Du vill inte att angripare tooeasily gissning kontonamn eller lösenord.</span><span class="sxs-lookup"><span data-stu-id="6feb1-147">You don't want attackers tooeasily guess account names or passwords.</span></span> <span data-ttu-id="6feb1-148">Använd följande tips toohelp hello:</span><span class="sxs-lookup"><span data-stu-id="6feb1-148">Use hello following tips toohelp:</span></span>

- <span data-ttu-id="6feb1-149">Skapa en unik lokala administratörskontot som inte heter **administratör**.</span><span class="sxs-lookup"><span data-stu-id="6feb1-149">Create a unique local administrator account that is not named **Administrator**.</span></span>

- <span data-ttu-id="6feb1-150">Använd komplexa starka lösenord för alla konton.</span><span class="sxs-lookup"><span data-stu-id="6feb1-150">Use complex strong passwords for all your accounts.</span></span> <span data-ttu-id="6feb1-151">Mer information om hur toocreate ett starkt lösenord, se [skapa ett starkt lösenord](https://support.microsoft.com/instantanswers/9bd5223b-efbe-aa95-b15a-2fb37bef637d/create-a-strong-password) artikel.</span><span class="sxs-lookup"><span data-stu-id="6feb1-151">For more information about how toocreate a strong password, see [Create a strong password](https://support.microsoft.com/instantanswers/9bd5223b-efbe-aa95-b15a-2fb37bef637d/create-a-strong-password) article.</span></span>

- <span data-ttu-id="6feb1-152">Som standard väljer Windows-autentisering i Azure under installationen av SQL Server-dator.</span><span class="sxs-lookup"><span data-stu-id="6feb1-152">By default, Azure selects Windows Authentication during SQL Server Virtual Machine setup.</span></span> <span data-ttu-id="6feb1-153">Därför hello **SA** inloggning är inaktiverat och ett lösenord har tilldelats av installationsprogrammet.</span><span class="sxs-lookup"><span data-stu-id="6feb1-153">Therefore, hello **SA** login is disabled and a password is assigned by setup.</span></span> <span data-ttu-id="6feb1-154">Vi rekommenderar att hello **SA** inloggning inte ska användas eller aktiverat.</span><span class="sxs-lookup"><span data-stu-id="6feb1-154">We recommend that hello **SA** login should not be used or enabled.</span></span> <span data-ttu-id="6feb1-155">Om du måste ha en SQL-inloggning kan du använda en av hello följande strategier:</span><span class="sxs-lookup"><span data-stu-id="6feb1-155">If you must have a SQL login, use one of hello following strategies:</span></span>

  - <span data-ttu-id="6feb1-156">Skapa ett SQL-konto med ett unikt namn som har **sysadmin** medlemskap.</span><span class="sxs-lookup"><span data-stu-id="6feb1-156">Create a SQL account with a unique name that has **sysadmin** membership.</span></span> <span data-ttu-id="6feb1-157">Du kan göra detta från hello-portalen genom att aktivera **SQL-autentisering** under etableringen.</span><span class="sxs-lookup"><span data-stu-id="6feb1-157">You can do this from hello portal by enabling **SQL Authentication** during provisioning.</span></span>

    > [!TIP] 
    > <span data-ttu-id="6feb1-158">Om du inte aktiverar SQL-autentisering under etableringen, måste du manuellt ändra hello autentiseringsläge för**SQL Server och Windows-autentiseringsläge**.</span><span class="sxs-lookup"><span data-stu-id="6feb1-158">If you do not enable SQL Authentication during provisioning, you must manually change hello authentication mode too**SQL Server and Windows Authentication Mode**.</span></span> <span data-ttu-id="6feb1-159">Mer information finns i [ändra Server-autentiseringsläge](https://docs.microsoft.com/sql/database-engine/configure-windows/change-server-authentication-mode).</span><span class="sxs-lookup"><span data-stu-id="6feb1-159">For more information, see [Change Server Authentication Mode](https://docs.microsoft.com/sql/database-engine/configure-windows/change-server-authentication-mode).</span></span>

  - <span data-ttu-id="6feb1-160">Om du måste använda hello **SA** inloggning, aktivera hello inloggningen efter etablering och tilldela ett nytt starkt lösenord.</span><span class="sxs-lookup"><span data-stu-id="6feb1-160">If you must use hello **SA** login, enable hello login after provisioning and assign a new strong password.</span></span>

## <a name="follow-on-premises-best-practices"></a><span data-ttu-id="6feb1-161">Följ Metodtips för lokalt</span><span class="sxs-lookup"><span data-stu-id="6feb1-161">Follow on-premises best practices</span></span>

<span data-ttu-id="6feb1-162">Dessutom toohello metoder som beskrivs i det här avsnittet, rekommenderar vi att du granskar och implementera hello traditionella lokala säkerhetsåtgärder tillämpliga.</span><span class="sxs-lookup"><span data-stu-id="6feb1-162">In addition toohello practices described in this topic, we recommend that you review and implement hello traditional on-premises security practices where applicable.</span></span> <span data-ttu-id="6feb1-163">Mer information finns i [säkerhetsaspekter för en SQL Server-Installation](https://docs.microsoft.com/sql/sql-server/install/security-considerations-for-a-sql-server-installation)</span><span class="sxs-lookup"><span data-stu-id="6feb1-163">For more information, see [Security Considerations for a SQL Server Installation](https://docs.microsoft.com/sql/sql-server/install/security-considerations-for-a-sql-server-installation)</span></span>

## <a name="next-steps"></a><span data-ttu-id="6feb1-164">Nästa steg</span><span class="sxs-lookup"><span data-stu-id="6feb1-164">Next Steps</span></span>

<span data-ttu-id="6feb1-165">Om du är intresserad av bästa praxis för prestanda, se [prestandarelaterade Metodtips för SQL Server i Azure Virtual Machines](virtual-machines-windows-sql-performance.md).</span><span class="sxs-lookup"><span data-stu-id="6feb1-165">If you are also interested in best practices around performance, see [Performance Best Practices for SQL Server in Azure Virtual Machines](virtual-machines-windows-sql-performance.md).</span></span>

<span data-ttu-id="6feb1-166">För andra avsnitt relaterade toorunning SQL Server i virtuella Azure-datorer, se [SQL Server på Azure virtuella datorer – översikt](virtual-machines-windows-sql-server-iaas-overview.md).</span><span class="sxs-lookup"><span data-stu-id="6feb1-166">For other topics related toorunning SQL Server in Azure VMs, see [SQL Server on Azure Virtual Machines overview](virtual-machines-windows-sql-server-iaas-overview.md).</span></span>


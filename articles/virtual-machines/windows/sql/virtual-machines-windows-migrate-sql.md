---
title: "aaaMigrate en Server på en virtuell dator med SQL Server-databasen tooSQL | Microsoft Docs"
description: "Läs mer om hur toomigrate en lokal användare databasen tooSQL Server i en virtuell Azure-dator."
services: virtual-machines-windows
documentationcenter: 
author: sabotta
manager: jhubbard
editor: 
tags: azure-service-management
ms.assetid: 00fd08c6-98fa-4d62-a3b8-ca20aa5246b1
ms.service: virtual-machines-sql
ms.workload: iaas-sql-server
ms.tgt_pltfrm: vm-windows-sql-server
ms.devlang: na
ms.topic: article
ms.date: 07/17/2017
ms.author: carlasab
ms.openlocfilehash: 9c7aba30304ea40796412d2ddc885f6d4a58be2a
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: sv-SE
ms.lasthandoff: 10/06/2017
---
# <a name="migrate-a-sql-server-database-toosql-server-in-an-azure-vm"></a><span data-ttu-id="f2798-103">Migrera en SQL Server-databasen tooSQL Server i en Azure VM</span><span class="sxs-lookup"><span data-stu-id="f2798-103">Migrate a SQL Server database tooSQL Server in an Azure VM</span></span>

<span data-ttu-id="f2798-104">Det finns ett antal metoder toomigrate en lokal SQL Server användaren databasen tooSQL Server i en Azure VM.</span><span class="sxs-lookup"><span data-stu-id="f2798-104">There are a number of methods toomigrate an on-premises SQL Server user database tooSQL Server in an Azure VM.</span></span> <span data-ttu-id="f2798-105">Den här artikeln kort diskuterar olika metoder och rekommenderar hello bästa metoden för olika scenarier.</span><span class="sxs-lookup"><span data-stu-id="f2798-105">This article will briefly discuss various methods and recommend hello best method for various scenarios.</span></span>

[!INCLUDE [learn-about-deployment-models](../../../../includes/learn-about-deployment-models-both-include.md)]

## <a name="what-are-hello-primary-migration-methods"></a><span data-ttu-id="f2798-106">Vad är hello primära metoder?</span><span class="sxs-lookup"><span data-stu-id="f2798-106">What are hello primary migration methods?</span></span>
<span data-ttu-id="f2798-107">hello primära migreringsmetoderna är:</span><span class="sxs-lookup"><span data-stu-id="f2798-107">hello primary migration methods are:</span></span>

* <span data-ttu-id="f2798-108">Utför lokal säkerhetskopiering med komprimering och manuellt kopiera hello säkerhetskopian till hello Azure-dator</span><span class="sxs-lookup"><span data-stu-id="f2798-108">Perform on-premises backup using compression and manually copy hello backup file into hello Azure virtual machine</span></span>
* <span data-ttu-id="f2798-109">Utföra en säkerhetskopiering tooURL och återställa till hello Azure virtuell dator från hello URL</span><span class="sxs-lookup"><span data-stu-id="f2798-109">Perform a backup tooURL and restore into hello Azure virtual machine from hello URL</span></span>
* <span data-ttu-id="f2798-110">Koppla från och sedan kopiera hello data och loggfilen filer tooAzure blob-lagring och sedan koppla tooSQL Server i Azure VM från URL</span><span class="sxs-lookup"><span data-stu-id="f2798-110">Detach and then copy hello data and log files tooAzure blob storage and then attach tooSQL Server in Azure VM from URL</span></span>
* <span data-ttu-id="f2798-111">Omvandla lokala fysiska datorn tooHyper-V VHD överför tooAzure Blob storage och sedan distribuera som nya virtuella datorn med hjälp av överföra VHD</span><span class="sxs-lookup"><span data-stu-id="f2798-111">Convert on-premises physical machine tooHyper-V VHD, upload tooAzure Blob storage, and then deploy as new VM using uploaded VHD</span></span>
* <span data-ttu-id="f2798-112">Leverera hårddisken med hjälp av Windows Import/Export Service</span><span class="sxs-lookup"><span data-stu-id="f2798-112">Ship hard drive using Windows Import/Export Service</span></span>
* <span data-ttu-id="f2798-113">Om du har en AlwaysOn-distribution lokalt, Använd hello [guiden för Lägg till Azure-replik](../classic/sql-onprem-availability.md) toocreate en replik i Azure och växling vid fel, pekar användare toohello Azure-databasinstans</span><span class="sxs-lookup"><span data-stu-id="f2798-113">If you have an AlwaysOn deployment on-premises, use hello [Add Azure Replica Wizard](../classic/sql-onprem-availability.md) toocreate a replica in Azure and then failover, pointing users toohello Azure database instance</span></span>
* <span data-ttu-id="f2798-114">Använda SQL Server [Transaktionsreplikering](https://msdn.microsoft.com/library/ms151176.aspx) tooconfigure hello Azure SQL Server-instans som en prenumerant och inaktivera replikering, pekar användare toohello Azure-databasinstans</span><span class="sxs-lookup"><span data-stu-id="f2798-114">Use SQL Server [transactional replication](https://msdn.microsoft.com/library/ms151176.aspx) tooconfigure hello Azure SQL Server instance as a subscriber and then disable replication, pointing users toohello Azure database instance</span></span>

> [!TIP]
> <span data-ttu-id="f2798-115">Du kan också använda dessa samma tekniker toomove databaser mellan SQL Server-datorer i Azure.</span><span class="sxs-lookup"><span data-stu-id="f2798-115">You can also use these same techniques toomove databases between SQL Server VMs in Azure.</span></span> <span data-ttu-id="f2798-116">Det finns till exempel ingen sättet tooupgrade en virtuell dator bild galleriet SQL Server från en version/utgåva tooanother.</span><span class="sxs-lookup"><span data-stu-id="f2798-116">For example, there is no supported way tooupgrade a SQL Server gallery-image VM from one version/edition tooanother.</span></span> <span data-ttu-id="f2798-117">I det här fallet bör du skapa en ny SQL Server-VM med hello nya version/utgåva och Använd sedan någon av hello migrering tekniker i den här artikeln toomove dina databaser.</span><span class="sxs-lookup"><span data-stu-id="f2798-117">In this case, you should create a new SQL Server VM with hello new version/edition, and then use one of hello migration techniques in this article toomove your databases.</span></span> 

## <a name="choosing-your-migration-method"></a><span data-ttu-id="f2798-118">Välja din migreringsmetod</span><span class="sxs-lookup"><span data-stu-id="f2798-118">Choosing your migration method</span></span>
<span data-ttu-id="f2798-119">För optimala dataöverföringsprestanda migrera hello-databasfiler till hello Azure VM är en komprimerad säkerhetskopia.</span><span class="sxs-lookup"><span data-stu-id="f2798-119">For optimum data transfer performance, migrate hello database files into hello Azure VM using a compressed backup file.</span></span>

<span data-ttu-id="f2798-120">toominimize driftstopp under migreringsprocessen för hello-databasen, använda något hello AlwaysOn eller hello Transaktionsreplikering.</span><span class="sxs-lookup"><span data-stu-id="f2798-120">toominimize downtime during hello database migration process, use either hello AlwaysOn option or hello transactional replication option.</span></span>

<span data-ttu-id="f2798-121">Om det inte är möjligt toouse hello ovan metoder manuellt migrera din databas.</span><span class="sxs-lookup"><span data-stu-id="f2798-121">If it is not possible toouse hello above methods, manually migrate your database.</span></span> <span data-ttu-id="f2798-122">Med den här metoden vanligtvis börja med en säkerhetskopia av databasen följt av en kopia av hello säkerhetskopiering av databasen till Azure och sedan utför en databasåterställning av.</span><span class="sxs-lookup"><span data-stu-id="f2798-122">Using this method, you will generally start with a database backup followed by a copy of hello database backup into Azure and then perform a database restore.</span></span> <span data-ttu-id="f2798-123">Du kan också kopiera hello databasfilerna sig själva till Azure och sedan koppla dem.</span><span class="sxs-lookup"><span data-stu-id="f2798-123">You can also copy hello database files themselves into Azure and then attach them.</span></span> <span data-ttu-id="f2798-124">Det finns flera metoder som du kan utföra den manuella processen för att migrera en databas till en Azure VM.</span><span class="sxs-lookup"><span data-stu-id="f2798-124">There are several methods by which you can accomplish this manual process of migrating a database into an Azure VM.</span></span>

> [!NOTE]
> <span data-ttu-id="f2798-125">När du uppgraderar tooSQL Server 2014 eller SQL Server 2016 från äldre versioner av SQL Server, bör du överväga om ändringar krävs.</span><span class="sxs-lookup"><span data-stu-id="f2798-125">When you upgrade tooSQL Server 2014 or SQL Server 2016 from older versions of SQL Server, you should consider whether changes are needed.</span></span> <span data-ttu-id="f2798-126">Vi rekommenderar att du hanterar alla beroenden på funktioner som inte stöds av hello ny version av SQL Server som en del av migreringen.</span><span class="sxs-lookup"><span data-stu-id="f2798-126">We recommend that you address all dependencies on features not supported by hello new version of SQL Server as part of your migration project.</span></span> <span data-ttu-id="f2798-127">Mer information om hello stöds utgåvor och scenarier finns [uppgradera tooSQL Server](https://msdn.microsoft.com/library/bb677622.aspx).</span><span class="sxs-lookup"><span data-stu-id="f2798-127">For more information on hello supported editions and scenarios, see [Upgrade tooSQL Server](https://msdn.microsoft.com/library/bb677622.aspx).</span></span>

<span data-ttu-id="f2798-128">hello följande tabell visas de olika hello primära metoder och beskriver när hello användning av varje metod som passar bäst.</span><span class="sxs-lookup"><span data-stu-id="f2798-128">hello following table lists each of hello primary migration methods and discusses when hello use of each method is most appropriate.</span></span>

| <span data-ttu-id="f2798-129">Metod</span><span class="sxs-lookup"><span data-stu-id="f2798-129">Method</span></span> | <span data-ttu-id="f2798-130">Databasversionen för källa</span><span class="sxs-lookup"><span data-stu-id="f2798-130">Source database version</span></span> | <span data-ttu-id="f2798-131">Målversionen av databasen</span><span class="sxs-lookup"><span data-stu-id="f2798-131">Destination database version</span></span> | <span data-ttu-id="f2798-132">Källan databasen säkerhetskopieringsstorlek begränsning</span><span class="sxs-lookup"><span data-stu-id="f2798-132">Source database backup size constraint</span></span> | <span data-ttu-id="f2798-133">Anteckningar</span><span class="sxs-lookup"><span data-stu-id="f2798-133">Notes</span></span> |
| --- | --- | --- | --- | --- |
| [<span data-ttu-id="f2798-134">Utför lokal säkerhetskopiering med komprimering och manuellt kopiera hello säkerhetskopian till hello Azure-dator</span><span class="sxs-lookup"><span data-stu-id="f2798-134">Perform on-premises backup using compression and manually copy hello backup file into hello Azure virtual machine</span></span>](#backup-and-restore) |<span data-ttu-id="f2798-135">SQLServer 2005 eller senare</span><span class="sxs-lookup"><span data-stu-id="f2798-135">SQL Server 2005 or greater</span></span> |<span data-ttu-id="f2798-136">SQLServer 2005 eller senare</span><span class="sxs-lookup"><span data-stu-id="f2798-136">SQL Server 2005 or greater</span></span> |[<span data-ttu-id="f2798-137">Lagringsgränsen för Azure VM</span><span class="sxs-lookup"><span data-stu-id="f2798-137">Azure VM storage limit</span></span>](https://azure.microsoft.com/documentation/articles/azure-subscription-service-limits/) | <span data-ttu-id="f2798-138">Detta är en mycket enkel och väl testade teknik för att flytta databaser mellan datorer.</span><span class="sxs-lookup"><span data-stu-id="f2798-138">This is a very simple and well-tested technique for moving databases across machines.</span></span> |
| [<span data-ttu-id="f2798-139">Utföra en säkerhetskopiering tooURL och återställa till hello Azure virtuell dator från hello URL</span><span class="sxs-lookup"><span data-stu-id="f2798-139">Perform a backup tooURL and restore into hello Azure virtual machine from hello URL</span></span>](#backup-to-url-and-restore) |<span data-ttu-id="f2798-140">SQL Server 2012 SP1 CU2 eller större</span><span class="sxs-lookup"><span data-stu-id="f2798-140">SQL Server 2012 SP1 CU2 or greater</span></span> |<span data-ttu-id="f2798-141">SQL Server 2012 SP1 CU2 eller större</span><span class="sxs-lookup"><span data-stu-id="f2798-141">SQL Server 2012 SP1 CU2 or greater</span></span> |<span data-ttu-id="f2798-142">< 12,8 TB för SQL Server 2016, annars < 1 TB</span><span class="sxs-lookup"><span data-stu-id="f2798-142">< 12.8 TB for SQL Server 2016, otherwise < 1 TB</span></span> | <span data-ttu-id="f2798-143">Den här metoden är bara ett annat sätt toomove hello säkerhetskopian toohello VM med hjälp av Azure storage.</span><span class="sxs-lookup"><span data-stu-id="f2798-143">This method is just another way toomove hello backup file toohello VM using Azure storage.</span></span> |
| [<span data-ttu-id="f2798-144">Koppla bort och sedan kopiera hello data och loggfilen filer tooAzure blob-lagring och sedan koppla tooSQL Server i Azure-dator från URL</span><span class="sxs-lookup"><span data-stu-id="f2798-144">Detach and then copy hello data and log files tooAzure blob storage and then attach tooSQL Server in Azure virtual machine from URL</span></span>](#detach-and-attach-from-url) |<span data-ttu-id="f2798-145">SQLServer 2005 eller senare</span><span class="sxs-lookup"><span data-stu-id="f2798-145">SQL Server 2005 or greater</span></span> |<span data-ttu-id="f2798-146">SQLServer 2014 eller högre</span><span class="sxs-lookup"><span data-stu-id="f2798-146">SQL Server 2014 or greater</span></span> |[<span data-ttu-id="f2798-147">Lagringsgränsen för Azure VM</span><span class="sxs-lookup"><span data-stu-id="f2798-147">Azure VM storage limit</span></span>](https://azure.microsoft.com/documentation/articles/azure-subscription-service-limits/) |<span data-ttu-id="f2798-148">Använd den här metoden när du planerar för[lagrar dessa filer med hjälp av hello Azure Blob storage-tjänst](https://msdn.microsoft.com/library/dn385720.aspx) och bifoga dem tooSQL servern körs i Azure VM, särskilt med mycket stora databaser</span><span class="sxs-lookup"><span data-stu-id="f2798-148">Use this method when you plan too[store these files using hello Azure Blob storage service](https://msdn.microsoft.com/library/dn385720.aspx) and attach them tooSQL Server running in an Azure VM, particularly with very large databases</span></span> |
| [<span data-ttu-id="f2798-149">Konvertera lokala datorn tooHyper-V virtuella hårddiskar, ladda upp tooAzure Blob storage och distribuera en ny virtuell dator med hjälp av överförda VHD</span><span class="sxs-lookup"><span data-stu-id="f2798-149">Convert on-premises machine tooHyper-V VHDs, upload tooAzure Blob storage, and then deploy a new virtual machine using uploaded VHD</span></span>](#convert-to-vm-and-upload-to-url-and-deploy-as-new-vm) |<span data-ttu-id="f2798-150">SQLServer 2005 eller senare</span><span class="sxs-lookup"><span data-stu-id="f2798-150">SQL Server 2005 or greater</span></span> |<span data-ttu-id="f2798-151">SQLServer 2005 eller senare</span><span class="sxs-lookup"><span data-stu-id="f2798-151">SQL Server 2005 or greater</span></span> |[<span data-ttu-id="f2798-152">Lagringsgränsen för Azure VM</span><span class="sxs-lookup"><span data-stu-id="f2798-152">Azure VM storage limit</span></span>](https://azure.microsoft.com/documentation/articles/azure-subscription-service-limits/) |<span data-ttu-id="f2798-153">Använd när [ta din egen SQL Server-licens](../../../sql-database/sql-database-paas-vs-sql-server-iaas.md), när du migrera en databas som ska köras på en äldre version av SQL Server eller migrera system och användardatabaser tillsammans som en del av hello migreringen av databasen som är beroende av andra användardatabaser och/eller systemdatabaser.</span><span class="sxs-lookup"><span data-stu-id="f2798-153">Use when [bringing your own SQL Server license](../../../sql-database/sql-database-paas-vs-sql-server-iaas.md), when migrating a database that you will run on an older version of SQL Server, or when migrating system and user databases together as part of hello migration of database dependent on other user databases and/or system databases.</span></span> |
| [<span data-ttu-id="f2798-154">Leverera hårddisken med hjälp av Windows Import/Export Service</span><span class="sxs-lookup"><span data-stu-id="f2798-154">Ship hard drive using Windows Import/Export Service</span></span>](#ship-hard-drive) |<span data-ttu-id="f2798-155">SQLServer 2005 eller senare</span><span class="sxs-lookup"><span data-stu-id="f2798-155">SQL Server 2005 or greater</span></span> |<span data-ttu-id="f2798-156">SQLServer 2005 eller senare</span><span class="sxs-lookup"><span data-stu-id="f2798-156">SQL Server 2005 or greater</span></span> |[<span data-ttu-id="f2798-157">Lagringsgränsen för Azure VM</span><span class="sxs-lookup"><span data-stu-id="f2798-157">Azure VM storage limit</span></span>](https://azure.microsoft.com/documentation/articles/azure-subscription-service-limits/) |<span data-ttu-id="f2798-158">Använd hello [Windows Import/Export Service](../../../storage/common/storage-import-export-service.md) när manuell copy-metoden är för långsamt, såsom med mycket stora databaser</span><span class="sxs-lookup"><span data-stu-id="f2798-158">Use hello [Windows Import/Export Service](../../../storage/common/storage-import-export-service.md) when manual copy method is too slow, such as with very large databases</span></span> |
| [<span data-ttu-id="f2798-159">Använd hello guiden för Lägg till Azure-replikering</span><span class="sxs-lookup"><span data-stu-id="f2798-159">Use hello Add Azure Replica Wizard</span></span>](../classic/sql-onprem-availability.md) |<span data-ttu-id="f2798-160">SQLServer 2012 eller senare</span><span class="sxs-lookup"><span data-stu-id="f2798-160">SQL Server 2012 or greater</span></span> |<span data-ttu-id="f2798-161">SQLServer 2012 eller senare</span><span class="sxs-lookup"><span data-stu-id="f2798-161">SQL Server 2012 or greater</span></span> |[<span data-ttu-id="f2798-162">Lagringsgränsen för Azure VM</span><span class="sxs-lookup"><span data-stu-id="f2798-162">Azure VM storage limit</span></span>](https://azure.microsoft.com/documentation/articles/azure-subscription-service-limits/) |<span data-ttu-id="f2798-163">Minimerar avbrottstid, Använd när du har en lokal AlwaysOn-distribution</span><span class="sxs-lookup"><span data-stu-id="f2798-163">Minimizes downtime, use when you have an AlwaysOn on-premises deployment</span></span> |
| [<span data-ttu-id="f2798-164">Använda SQL Server-Transaktionsreplikering</span><span class="sxs-lookup"><span data-stu-id="f2798-164">Use SQL Server transactional replication</span></span>](https://msdn.microsoft.com/library/ms151176.aspx) |<span data-ttu-id="f2798-165">SQLServer 2005 eller senare</span><span class="sxs-lookup"><span data-stu-id="f2798-165">SQL Server 2005 or greater</span></span> |<span data-ttu-id="f2798-166">SQLServer 2005 eller senare</span><span class="sxs-lookup"><span data-stu-id="f2798-166">SQL Server 2005 or greater</span></span> |[<span data-ttu-id="f2798-167">Lagringsgränsen för Azure VM</span><span class="sxs-lookup"><span data-stu-id="f2798-167">Azure VM storage limit</span></span>](https://azure.microsoft.com/documentation/articles/azure-subscription-service-limits/) |<span data-ttu-id="f2798-168">Använd när du behöver toominimize driftstopp och inte har en lokal AlwaysOn-distribution</span><span class="sxs-lookup"><span data-stu-id="f2798-168">Use when you need toominimize downtime and do not have an AlwaysOn on-premises deployment</span></span> |

## <a name="backup-and-restore"></a><span data-ttu-id="f2798-169">Säkerhetskopiering och återställning</span><span class="sxs-lookup"><span data-stu-id="f2798-169">Backup and restore</span></span>
<span data-ttu-id="f2798-170">Kopiera hello säkerhetskopiering toohello VM säkerhetskopiera databasen med komprimering, och sedan återställa hello-databasen.</span><span class="sxs-lookup"><span data-stu-id="f2798-170">Back up your database with compression, copy hello backup toohello VM, and then restore hello database.</span></span> <span data-ttu-id="f2798-171">Om din säkerhetskopia är större än 1 TB, måste den stripe eftersom hello maximal storlek för en virtuell disk är 1 TB.</span><span class="sxs-lookup"><span data-stu-id="f2798-171">If your backup file is larger than 1 TB, you must stripe it because hello maximum size of a VM disk is 1 TB.</span></span> <span data-ttu-id="f2798-172">Använd följande allmänna steg toomigrate en databas med hjälp av den här manuella metoden hello:</span><span class="sxs-lookup"><span data-stu-id="f2798-172">Use hello following general steps toomigrate a user database using this manual method:</span></span>

1. <span data-ttu-id="f2798-173">Utför en fullständig säkerhetskopiering tooan lokalt databasplatsen.</span><span class="sxs-lookup"><span data-stu-id="f2798-173">Perform a full database backup tooan on-premises location.</span></span>
2. <span data-ttu-id="f2798-174">Skapa eller ladda upp en virtuell dator med hello version av SQL Server som önskas.</span><span class="sxs-lookup"><span data-stu-id="f2798-174">Create or upload a virtual machine with hello version of SQL Server desired.</span></span>
3. <span data-ttu-id="f2798-175">Konfigurera anslutning baserat på dina krav.</span><span class="sxs-lookup"><span data-stu-id="f2798-175">Setup connectivity based on your requirements.</span></span> <span data-ttu-id="f2798-176">Se [ansluta tooa SQL Server-dator i Azure (Resource Manager)](virtual-machines-windows-sql-connect.md).</span><span class="sxs-lookup"><span data-stu-id="f2798-176">See [Connect tooa SQL Server Virtual Machine on Azure (Resource Manager)](virtual-machines-windows-sql-connect.md).</span></span>
4. <span data-ttu-id="f2798-177">Kopiera dina säkerhetskopierade filer tooyour VM kommandot remote desktop, Windows Explorer eller hello kopiera från en kommandotolk.</span><span class="sxs-lookup"><span data-stu-id="f2798-177">Copy your backup file(s) tooyour VM using remote desktop, Windows Explorer or hello copy command from a command prompt.</span></span>

## <a name="backup-toourl-and-restore"></a><span data-ttu-id="f2798-178">TooURL för säkerhetskopiering och återställning</span><span class="sxs-lookup"><span data-stu-id="f2798-178">Backup tooURL and restore</span></span>
<span data-ttu-id="f2798-179">I stället för att säkerhetskopiera tooa lokal fil kan du använda hello [säkerhetskopiering tooURL](https://msdn.microsoft.com/library/dn435916.aspx) och sedan återställa från URL: en toohello VM.</span><span class="sxs-lookup"><span data-stu-id="f2798-179">Instead of backing up tooa local file, you can use hello [backup tooURL](https://msdn.microsoft.com/library/dn435916.aspx) and then restore from URL toohello VM.</span></span> <span data-ttu-id="f2798-180">Med SQL Server 2016 stripe säkerhetskopior stöds, rekommenderas för prestanda och krävs tooexceed hello storleksgränser per blob.</span><span class="sxs-lookup"><span data-stu-id="f2798-180">With SQL Server 2016, striped backup sets are supported, are recommended for performance, and required tooexceed hello size limits per blob.</span></span> <span data-ttu-id="f2798-181">För mycket stora databaser hello användning av hello [Windows Import/Export Service](../../../storage/common/storage-import-export-service.md) rekommenderas.</span><span class="sxs-lookup"><span data-stu-id="f2798-181">For very large databases, hello use of hello [Windows Import/Export Service](../../../storage/common/storage-import-export-service.md) is recommended.</span></span>

## <a name="detach-and-attach-from-url"></a><span data-ttu-id="f2798-182">Koppla från och koppla från URL</span><span class="sxs-lookup"><span data-stu-id="f2798-182">Detach and attach from URL</span></span>
<span data-ttu-id="f2798-183">Koppla från databasen och loggfilerna filerna och överför dem för[Azure Blob storage](https://msdn.microsoft.com/library/dn385720.aspx).</span><span class="sxs-lookup"><span data-stu-id="f2798-183">Detach your database and log files and transfer them too[Azure Blob storage](https://msdn.microsoft.com/library/dn385720.aspx).</span></span> <span data-ttu-id="f2798-184">Koppla sedan hello databasen från hello URL på Azure VM.</span><span class="sxs-lookup"><span data-stu-id="f2798-184">Then attach hello database from hello URL on your Azure VM.</span></span> <span data-ttu-id="f2798-185">Använd det här alternativet om du vill hello fysiska databasen filer tooreside i Blob storage.</span><span class="sxs-lookup"><span data-stu-id="f2798-185">Use this if you want hello physical database files tooreside in Blob storage.</span></span> <span data-ttu-id="f2798-186">Detta kan vara användbart för mycket stora databaser.</span><span class="sxs-lookup"><span data-stu-id="f2798-186">This might be useful for very large databases.</span></span> <span data-ttu-id="f2798-187">Använd följande allmänna steg toomigrate en databas med hjälp av den här manuella metoden hello:</span><span class="sxs-lookup"><span data-stu-id="f2798-187">Use hello following general steps toomigrate a user database using this manual method:</span></span>

1. <span data-ttu-id="f2798-188">Koppla bort hello databasfiler från hello lokalt databasinstansen.</span><span class="sxs-lookup"><span data-stu-id="f2798-188">Detach hello database files from hello on-premises database instance.</span></span>
2. <span data-ttu-id="f2798-189">Kopiera hello oberoende databasfiler i Azure blob storage med hjälp av hello [kommandoradsverktyget azcopy](../../../storage/common/storage-use-azcopy.md).</span><span class="sxs-lookup"><span data-stu-id="f2798-189">Copy hello detached database files into Azure blob storage using hello [AZCopy command-line utility](../../../storage/common/storage-use-azcopy.md).</span></span>
3. <span data-ttu-id="f2798-190">Koppla hello-databasfiler från hello Azure URL toohello SQL Server-instansen i hello Azure VM.</span><span class="sxs-lookup"><span data-stu-id="f2798-190">Attach hello database files from hello Azure URL toohello SQL Server instance in hello Azure VM.</span></span>

## <a name="convert-toovm-and-upload-toourl-and-deploy-as-new-vm"></a><span data-ttu-id="f2798-191">Konvertera tooVM och ladda upp tooURL och distribuera som ny virtuell dator</span><span class="sxs-lookup"><span data-stu-id="f2798-191">Convert tooVM and upload tooURL and deploy as new VM</span></span>
<span data-ttu-id="f2798-192">Använd den här metoden toomigrate alla system- och databaser på en lokal SQL Server-instansen tooAzure virtuell dator.</span><span class="sxs-lookup"><span data-stu-id="f2798-192">Use this method toomigrate all system and user databases in an on-premises SQL Server instance tooAzure virtual machine.</span></span> <span data-ttu-id="f2798-193">Använd följande allmänna steg toomigrate en hela SQL Server-instans med den här manuella metoden hello:</span><span class="sxs-lookup"><span data-stu-id="f2798-193">Use hello following general steps toomigrate an entire SQL Server instance using this manual method:</span></span>

1. <span data-ttu-id="f2798-194">Konvertera fysiska eller virtuella datorer tooHyper-V virtuella hårddiskar med hjälp av [Microsoft Virtual Machine Converter](https://technet.microsoft.com/library/dn874008(v=ws.11).aspx).</span><span class="sxs-lookup"><span data-stu-id="f2798-194">Convert physical or virtual machines tooHyper-V VHDs by using [Microsoft Virtual Machine Converter](https://technet.microsoft.com/library/dn874008(v=ws.11).aspx).</span></span>
2. <span data-ttu-id="f2798-195">Överföra VHD-filer tooAzure lagring med hjälp av hello [cmdlet Add-AzureVHD](https://msdn.microsoft.com/library/windowsazure/dn495173.aspx).</span><span class="sxs-lookup"><span data-stu-id="f2798-195">Upload VHD files tooAzure Storage by using hello [Add-AzureVHD cmdlet](https://msdn.microsoft.com/library/windowsazure/dn495173.aspx).</span></span>
3. <span data-ttu-id="f2798-196">Distribuera en ny virtuell dator med hjälp av hello överföra VHD.</span><span class="sxs-lookup"><span data-stu-id="f2798-196">Deploy a new virtual machine by using hello uploaded VHD.</span></span>

> [!NOTE]
> <span data-ttu-id="f2798-197">toomigrate ett helt program bör du använda [Azure Site Recovery](../../../site-recovery/site-recovery-overview.md)].</span><span class="sxs-lookup"><span data-stu-id="f2798-197">toomigrate an entire application, consider using [Azure Site Recovery](../../../site-recovery/site-recovery-overview.md)].</span></span>

## <a name="ship-hard-drive"></a><span data-ttu-id="f2798-198">Leverera hårddisk</span><span class="sxs-lookup"><span data-stu-id="f2798-198">Ship hard drive</span></span>
<span data-ttu-id="f2798-199">Använd hello [Windows Import/Export Service metoden](../../../storage/common/storage-import-export-service.md) tootransfer stora mängder filen data tooAzure Blob storage i situationer där överför hello nätverket är orimligt hög eller inte är möjligt.</span><span class="sxs-lookup"><span data-stu-id="f2798-199">Use hello [Windows Import/Export Service method](../../../storage/common/storage-import-export-service.md) tootransfer large amounts of file data tooAzure Blob storage in situations where uploading over hello network is prohibitively expensive or not feasible.</span></span> <span data-ttu-id="f2798-200">Du skickar en eller flera hårddiskar som innehåller data tooan Azure datacenter, där dina data kommer att överföra tooyour storage-konto med den här tjänsten.</span><span class="sxs-lookup"><span data-stu-id="f2798-200">With this service, you send one or more hard drives containing that data tooan Azure data center, where your data will be uploaded tooyour storage account.</span></span>

## <a name="next-steps"></a><span data-ttu-id="f2798-201">Nästa steg</span><span class="sxs-lookup"><span data-stu-id="f2798-201">Next Steps</span></span>
<span data-ttu-id="f2798-202">Mer information om hur du kör SQL Server på Azure Virtual Machines finns [SQL Server på Azure virtuella datorer – översikt](virtual-machines-windows-sql-server-iaas-overview.md).</span><span class="sxs-lookup"><span data-stu-id="f2798-202">For more information about running SQL Server on Azure Virtual Machines, see [SQL Server on Azure Virtual Machines overview](virtual-machines-windows-sql-server-iaas-overview.md).</span></span>

<span data-ttu-id="f2798-203">Anvisningar om hur du skapar en Azure SQL Server-dator från en avbildning finns [Tips och trick om kloning Azure SQL virtuella datorer från avbildningar](https://blogs.msdn.microsoft.com/psssql/2016/07/06/tips-tricks-on-cloning-azure-sql-virtual-machines-from-captured-images/) på hello tekniker för CSS SQL Server-bloggen.</span><span class="sxs-lookup"><span data-stu-id="f2798-203">For instructions on creating an Azure SQL Server Virtual Machine from a captured image, see [Tips & Tricks on ‘cloning’ Azure SQL virtual machines from captured images](https://blogs.msdn.microsoft.com/psssql/2016/07/06/tips-tricks-on-cloning-azure-sql-virtual-machines-from-captured-images/) on hello CSS SQL Server Engineers blog.</span></span>


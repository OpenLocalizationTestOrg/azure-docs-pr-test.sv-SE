---
title: "Migrera en SQL Server-databas till SQL Server på en virtuell dator | Microsoft Docs"
description: "Läs mer om hur du migrerar en lokal användardatabas till SQL Server i en virtuell Azure-dator."
services: virtual-machines-windows
documentationcenter: 
author: sabotta
manager: jhubbard
editor: 
tags: azure-service-management
ms.assetid: 00fd08c6-98fa-4d62-a3b8-ca20aa5246b1
ms.service: virtual-machines-sql
ms.workload: iaas-sql-server
ms.tgt_pltfrm: vm-windows-sql-server
ms.devlang: na
ms.topic: article
ms.date: 07/17/2017
ms.author: carlasab
ms.openlocfilehash: 68767534298783083a441aa295611914d0df9db0
ms.sourcegitcommit: 18ad9bc049589c8e44ed277f8f43dcaa483f3339
ms.translationtype: MT
ms.contentlocale: sv-SE
ms.lasthandoff: 08/29/2017
---
# <a name="migrate-a-sql-server-database-to-sql-server-in-an-azure-vm"></a><span data-ttu-id="48263-103">Migrera en SQL Server-databas till SQL Server i en Azure VM</span><span class="sxs-lookup"><span data-stu-id="48263-103">Migrate a SQL Server database to SQL Server in an Azure VM</span></span>

<span data-ttu-id="48263-104">Det finns ett antal metoder för att migrera en användardatabas för lokala SQL Server till SQL Server i en Azure VM.</span><span class="sxs-lookup"><span data-stu-id="48263-104">There are a number of methods to migrate an on-premises SQL Server user database to SQL Server in an Azure VM.</span></span> <span data-ttu-id="48263-105">Den här artikeln kort diskuterar olika metoder och rekommenderar den bästa metoden för olika scenarier.</span><span class="sxs-lookup"><span data-stu-id="48263-105">This article will briefly discuss various methods and recommend the best method for various scenarios.</span></span>

[!INCLUDE [learn-about-deployment-models](../../../../includes/learn-about-deployment-models-both-include.md)]

## <a name="what-are-the-primary-migration-methods"></a><span data-ttu-id="48263-106">Vad är de primära metoderna?</span><span class="sxs-lookup"><span data-stu-id="48263-106">What are the primary migration methods?</span></span>
<span data-ttu-id="48263-107">De primära migreringsmetoderna är:</span><span class="sxs-lookup"><span data-stu-id="48263-107">The primary migration methods are:</span></span>

* <span data-ttu-id="48263-108">Utför lokal säkerhetskopiering med komprimering och manuellt kopiera säkerhetskopian till den virtuella Azure-datorn</span><span class="sxs-lookup"><span data-stu-id="48263-108">Perform on-premises backup using compression and manually copy the backup file into the Azure virtual machine</span></span>
* <span data-ttu-id="48263-109">Utför en säkerhetskopiering till URL och återställning till den virtuella Azure-datorn från URL</span><span class="sxs-lookup"><span data-stu-id="48263-109">Perform a backup to URL and restore into the Azure virtual machine from the URL</span></span>
* <span data-ttu-id="48263-110">Koppla från och sedan kopiera data och loggfilen filerna till Azure blob storage och anslut sedan till SQL Server i Azure VM från URL</span><span class="sxs-lookup"><span data-stu-id="48263-110">Detach and then copy the data and log files to Azure blob storage and then attach to SQL Server in Azure VM from URL</span></span>
* <span data-ttu-id="48263-111">Konvertera lokala fysiska datorn till Hyper-V virtuell, ladda upp till Azure Blob storage och sedan distribuera som nya virtuella datorn med hjälp av överföra VHD</span><span class="sxs-lookup"><span data-stu-id="48263-111">Convert on-premises physical machine to Hyper-V VHD, upload to Azure Blob storage, and then deploy as new VM using uploaded VHD</span></span>
* <span data-ttu-id="48263-112">Leverera hårddisken med hjälp av Windows Import/Export Service</span><span class="sxs-lookup"><span data-stu-id="48263-112">Ship hard drive using Windows Import/Export Service</span></span>
* <span data-ttu-id="48263-113">Om du har en AlwaysOn-distribution lokalt, Använd den [guiden för Lägg till Azure-replik](../classic/sql-onprem-availability.md) pekar användare på Azure-databasinstans för att skapa en replik i Azure och växling vid fel</span><span class="sxs-lookup"><span data-stu-id="48263-113">If you have an AlwaysOn deployment on-premises, use the [Add Azure Replica Wizard](../classic/sql-onprem-availability.md) to create a replica in Azure and then failover, pointing users to the Azure database instance</span></span>
* <span data-ttu-id="48263-114">Använda SQL Server [Transaktionsreplikering](https://msdn.microsoft.com/library/ms151176.aspx) för att konfigurera Azure SQL Server-instansen som en prenumerant och inaktivera replikering, pekar du användare till Azure-databasinstans</span><span class="sxs-lookup"><span data-stu-id="48263-114">Use SQL Server [transactional replication](https://msdn.microsoft.com/library/ms151176.aspx) to configure the Azure SQL Server instance as a subscriber and then disable replication, pointing users to the Azure database instance</span></span>

> [!TIP]
> <span data-ttu-id="48263-115">Du kan också använda samma metoder för att flytta databaser mellan SQL Server-datorer i Azure.</span><span class="sxs-lookup"><span data-stu-id="48263-115">You can also use these same techniques to move databases between SQL Server VMs in Azure.</span></span> <span data-ttu-id="48263-116">T.ex, går det inte stöds så här uppgraderar du en SQL Server-bild galleriet virtuell dator från en version/utgåva till en annan.</span><span class="sxs-lookup"><span data-stu-id="48263-116">For example, there is no supported way to upgrade a SQL Server gallery-image VM from one version/edition to another.</span></span> <span data-ttu-id="48263-117">I det här fallet bör du skapa en ny SQL Server-VM med den nya version/utgåvan och använda någon av migreringen tekniker i den här artikeln du flyttar databaser.</span><span class="sxs-lookup"><span data-stu-id="48263-117">In this case, you should create a new SQL Server VM with the new version/edition, and then use one of the migration techniques in this article to move your databases.</span></span> 

## <a name="choosing-your-migration-method"></a><span data-ttu-id="48263-118">Välja din migreringsmetod</span><span class="sxs-lookup"><span data-stu-id="48263-118">Choosing your migration method</span></span>
<span data-ttu-id="48263-119">För optimala dataöverföringsprestanda migrera databasfilerna till en komprimerad säkerhetskopia Azure VM.</span><span class="sxs-lookup"><span data-stu-id="48263-119">For optimum data transfer performance, migrate the database files into the Azure VM using a compressed backup file.</span></span>

<span data-ttu-id="48263-120">Använd alternativet AlwaysOn eller Transaktionsreplikering alternativet för att minimera driftstopp under migreringen av databasen.</span><span class="sxs-lookup"><span data-stu-id="48263-120">To minimize downtime during the database migration process, use either the AlwaysOn option or the transactional replication option.</span></span>

<span data-ttu-id="48263-121">Om det inte går att använda metoderna ovan, manuellt migrera din databas.</span><span class="sxs-lookup"><span data-stu-id="48263-121">If it is not possible to use the above methods, manually migrate your database.</span></span> <span data-ttu-id="48263-122">Med den här metoden vanligtvis börja med en säkerhetskopia av databasen följt av en kopia av säkerhetskopierade databasen till Azure och sedan utför en databasåterställning av.</span><span class="sxs-lookup"><span data-stu-id="48263-122">Using this method, you will generally start with a database backup followed by a copy of the database backup into Azure and then perform a database restore.</span></span> <span data-ttu-id="48263-123">Du kan också kopiera databasfilerna sig själva till Azure och sedan koppla dem.</span><span class="sxs-lookup"><span data-stu-id="48263-123">You can also copy the database files themselves into Azure and then attach them.</span></span> <span data-ttu-id="48263-124">Det finns flera metoder som du kan utföra den manuella processen för att migrera en databas till en Azure VM.</span><span class="sxs-lookup"><span data-stu-id="48263-124">There are several methods by which you can accomplish this manual process of migrating a database into an Azure VM.</span></span>

> [!NOTE]
> <span data-ttu-id="48263-125">När du uppgraderar till SQL Server 2014 eller SQL Server 2016 från äldre versioner av SQL Server, bör du överväga om ändringar krävs.</span><span class="sxs-lookup"><span data-stu-id="48263-125">When you upgrade to SQL Server 2014 or SQL Server 2016 from older versions of SQL Server, you should consider whether changes are needed.</span></span> <span data-ttu-id="48263-126">Vi rekommenderar att du hanterar alla beroenden på funktioner som inte stöds av den nya versionen av SQL Server som en del av migreringen.</span><span class="sxs-lookup"><span data-stu-id="48263-126">We recommend that you address all dependencies on features not supported by the new version of SQL Server as part of your migration project.</span></span> <span data-ttu-id="48263-127">Mer information om versioner som stöds och scenarier finns [uppgraderar till SQL Server](https://msdn.microsoft.com/library/bb677622.aspx).</span><span class="sxs-lookup"><span data-stu-id="48263-127">For more information on the supported editions and scenarios, see [Upgrade to SQL Server](https://msdn.microsoft.com/library/bb677622.aspx).</span></span>

<span data-ttu-id="48263-128">I följande tabell listar de primära migrering metoderna och beskriver om varje metod som passar bäst.</span><span class="sxs-lookup"><span data-stu-id="48263-128">The following table lists each of the primary migration methods and discusses when the use of each method is most appropriate.</span></span>

| <span data-ttu-id="48263-129">Metod</span><span class="sxs-lookup"><span data-stu-id="48263-129">Method</span></span> | <span data-ttu-id="48263-130">Databasversionen för källa</span><span class="sxs-lookup"><span data-stu-id="48263-130">Source database version</span></span> | <span data-ttu-id="48263-131">Målversionen av databasen</span><span class="sxs-lookup"><span data-stu-id="48263-131">Destination database version</span></span> | <span data-ttu-id="48263-132">Källan databasen säkerhetskopieringsstorlek begränsning</span><span class="sxs-lookup"><span data-stu-id="48263-132">Source database backup size constraint</span></span> | <span data-ttu-id="48263-133">Anteckningar</span><span class="sxs-lookup"><span data-stu-id="48263-133">Notes</span></span> |
| --- | --- | --- | --- | --- |
| [<span data-ttu-id="48263-134">Utför lokal säkerhetskopiering med komprimering och manuellt kopiera säkerhetskopian till den virtuella Azure-datorn</span><span class="sxs-lookup"><span data-stu-id="48263-134">Perform on-premises backup using compression and manually copy the backup file into the Azure virtual machine</span></span>](#backup-and-restore) |<span data-ttu-id="48263-135">SQLServer 2005 eller senare</span><span class="sxs-lookup"><span data-stu-id="48263-135">SQL Server 2005 or greater</span></span> |<span data-ttu-id="48263-136">SQLServer 2005 eller senare</span><span class="sxs-lookup"><span data-stu-id="48263-136">SQL Server 2005 or greater</span></span> |[<span data-ttu-id="48263-137">Lagringsgränsen för Azure VM</span><span class="sxs-lookup"><span data-stu-id="48263-137">Azure VM storage limit</span></span>](https://azure.microsoft.com/documentation/articles/azure-subscription-service-limits/) | <span data-ttu-id="48263-138">Detta är en mycket enkel och väl testade teknik för att flytta databaser mellan datorer.</span><span class="sxs-lookup"><span data-stu-id="48263-138">This is a very simple and well-tested technique for moving databases across machines.</span></span> |
| [<span data-ttu-id="48263-139">Utför en säkerhetskopiering till URL och återställning till den virtuella Azure-datorn från URL</span><span class="sxs-lookup"><span data-stu-id="48263-139">Perform a backup to URL and restore into the Azure virtual machine from the URL</span></span>](#backup-to-url-and-restore) |<span data-ttu-id="48263-140">SQL Server 2012 SP1 CU2 eller större</span><span class="sxs-lookup"><span data-stu-id="48263-140">SQL Server 2012 SP1 CU2 or greater</span></span> |<span data-ttu-id="48263-141">SQL Server 2012 SP1 CU2 eller större</span><span class="sxs-lookup"><span data-stu-id="48263-141">SQL Server 2012 SP1 CU2 or greater</span></span> |<span data-ttu-id="48263-142">< 12,8 TB för SQL Server 2016, annars < 1 TB</span><span class="sxs-lookup"><span data-stu-id="48263-142">< 12.8 TB for SQL Server 2016, otherwise < 1 TB</span></span> | <span data-ttu-id="48263-143">Den här metoden är bara ett annat sätt att flytta säkerhetskopian till den virtuella datorn med hjälp av Azure storage.</span><span class="sxs-lookup"><span data-stu-id="48263-143">This method is just another way to move the backup file to the VM using Azure storage.</span></span> |
| [<span data-ttu-id="48263-144">Koppla från och sedan kopiera data och loggfilen filerna till Azure blob storage och ansluta till SQL Server i Azure-dator från URL</span><span class="sxs-lookup"><span data-stu-id="48263-144">Detach and then copy the data and log files to Azure blob storage and then attach to SQL Server in Azure virtual machine from URL</span></span>](#detach-and-attach-from-url) |<span data-ttu-id="48263-145">SQLServer 2005 eller senare</span><span class="sxs-lookup"><span data-stu-id="48263-145">SQL Server 2005 or greater</span></span> |<span data-ttu-id="48263-146">SQLServer 2014 eller högre</span><span class="sxs-lookup"><span data-stu-id="48263-146">SQL Server 2014 or greater</span></span> |[<span data-ttu-id="48263-147">Lagringsgränsen för Azure VM</span><span class="sxs-lookup"><span data-stu-id="48263-147">Azure VM storage limit</span></span>](https://azure.microsoft.com/documentation/articles/azure-subscription-service-limits/) |<span data-ttu-id="48263-148">Använd den här metoden när du planerar att [lagrar dessa filer med Azure Blob storage-tjänst](https://msdn.microsoft.com/library/dn385720.aspx) och koppla dem till SQL Server som körs i en Azure VM, särskilt med mycket stora databaser</span><span class="sxs-lookup"><span data-stu-id="48263-148">Use this method when you plan to [store these files using the Azure Blob storage service](https://msdn.microsoft.com/library/dn385720.aspx) and attach them to SQL Server running in an Azure VM, particularly with very large databases</span></span> |
| [<span data-ttu-id="48263-149">Konvertera lokal dator för Hyper-V virtuella hårddiskar, ladda upp till Azure Blob storage och distribuera en ny virtuell dator med överförda virtuell Hårddisk</span><span class="sxs-lookup"><span data-stu-id="48263-149">Convert on-premises machine to Hyper-V VHDs, upload to Azure Blob storage, and then deploy a new virtual machine using uploaded VHD</span></span>](#convert-to-vm-and-upload-to-url-and-deploy-as-new-vm) |<span data-ttu-id="48263-150">SQLServer 2005 eller senare</span><span class="sxs-lookup"><span data-stu-id="48263-150">SQL Server 2005 or greater</span></span> |<span data-ttu-id="48263-151">SQLServer 2005 eller senare</span><span class="sxs-lookup"><span data-stu-id="48263-151">SQL Server 2005 or greater</span></span> |[<span data-ttu-id="48263-152">Lagringsgränsen för Azure VM</span><span class="sxs-lookup"><span data-stu-id="48263-152">Azure VM storage limit</span></span>](https://azure.microsoft.com/documentation/articles/azure-subscription-service-limits/) |<span data-ttu-id="48263-153">Använd när [ta din egen SQL Server-licens](../../../sql-database/sql-database-paas-vs-sql-server-iaas.md), när du migrerar en databas som ska köras på en äldre version av SQL Server, eller när du migrerar system- och databaser tillsammans som en del av migreringen av databasen som är beroende av andra användardatabaser och/eller systemdatabaser.</span><span class="sxs-lookup"><span data-stu-id="48263-153">Use when [bringing your own SQL Server license](../../../sql-database/sql-database-paas-vs-sql-server-iaas.md), when migrating a database that you will run on an older version of SQL Server, or when migrating system and user databases together as part of the migration of database dependent on other user databases and/or system databases.</span></span> |
| [<span data-ttu-id="48263-154">Leverera hårddisken med hjälp av Windows Import/Export Service</span><span class="sxs-lookup"><span data-stu-id="48263-154">Ship hard drive using Windows Import/Export Service</span></span>](#ship-hard-drive) |<span data-ttu-id="48263-155">SQLServer 2005 eller senare</span><span class="sxs-lookup"><span data-stu-id="48263-155">SQL Server 2005 or greater</span></span> |<span data-ttu-id="48263-156">SQLServer 2005 eller senare</span><span class="sxs-lookup"><span data-stu-id="48263-156">SQL Server 2005 or greater</span></span> |[<span data-ttu-id="48263-157">Lagringsgränsen för Azure VM</span><span class="sxs-lookup"><span data-stu-id="48263-157">Azure VM storage limit</span></span>](https://azure.microsoft.com/documentation/articles/azure-subscription-service-limits/) |<span data-ttu-id="48263-158">Använd den [Windows Import/Export Service](../../../storage/common/storage-import-export-service.md) när manuell copy-metoden är för långsamt, såsom med mycket stora databaser</span><span class="sxs-lookup"><span data-stu-id="48263-158">Use the [Windows Import/Export Service](../../../storage/common/storage-import-export-service.md) when manual copy method is too slow, such as with very large databases</span></span> |
| [<span data-ttu-id="48263-159">Använd den Azure replik guiden Lägg till</span><span class="sxs-lookup"><span data-stu-id="48263-159">Use the Add Azure Replica Wizard</span></span>](../classic/sql-onprem-availability.md) |<span data-ttu-id="48263-160">SQLServer 2012 eller senare</span><span class="sxs-lookup"><span data-stu-id="48263-160">SQL Server 2012 or greater</span></span> |<span data-ttu-id="48263-161">SQLServer 2012 eller senare</span><span class="sxs-lookup"><span data-stu-id="48263-161">SQL Server 2012 or greater</span></span> |[<span data-ttu-id="48263-162">Lagringsgränsen för Azure VM</span><span class="sxs-lookup"><span data-stu-id="48263-162">Azure VM storage limit</span></span>](https://azure.microsoft.com/documentation/articles/azure-subscription-service-limits/) |<span data-ttu-id="48263-163">Minimerar avbrottstid, Använd när du har en lokal AlwaysOn-distribution</span><span class="sxs-lookup"><span data-stu-id="48263-163">Minimizes downtime, use when you have an AlwaysOn on-premises deployment</span></span> |
| [<span data-ttu-id="48263-164">Använda SQL Server-Transaktionsreplikering</span><span class="sxs-lookup"><span data-stu-id="48263-164">Use SQL Server transactional replication</span></span>](https://msdn.microsoft.com/library/ms151176.aspx) |<span data-ttu-id="48263-165">SQLServer 2005 eller senare</span><span class="sxs-lookup"><span data-stu-id="48263-165">SQL Server 2005 or greater</span></span> |<span data-ttu-id="48263-166">SQLServer 2005 eller senare</span><span class="sxs-lookup"><span data-stu-id="48263-166">SQL Server 2005 or greater</span></span> |[<span data-ttu-id="48263-167">Lagringsgränsen för Azure VM</span><span class="sxs-lookup"><span data-stu-id="48263-167">Azure VM storage limit</span></span>](https://azure.microsoft.com/documentation/articles/azure-subscription-service-limits/) |<span data-ttu-id="48263-168">Använd när du vill minimera driftavbrott och inte har en lokal AlwaysOn-distribution</span><span class="sxs-lookup"><span data-stu-id="48263-168">Use when you need to minimize downtime and do not have an AlwaysOn on-premises deployment</span></span> |

## <a name="backup-and-restore"></a><span data-ttu-id="48263-169">Säkerhetskopiering och återställning</span><span class="sxs-lookup"><span data-stu-id="48263-169">Backup and restore</span></span>
<span data-ttu-id="48263-170">Säkerhetskopiera databasen med komprimering, kopiera säkerhetskopian till den virtuella datorn och sedan återställa databasen.</span><span class="sxs-lookup"><span data-stu-id="48263-170">Back up your database with compression, copy the backup to the VM, and then restore the database.</span></span> <span data-ttu-id="48263-171">Om din säkerhetskopia är större än 1 TB, måste den stripe eftersom den maximala storleken för en virtuell disk är 1 TB.</span><span class="sxs-lookup"><span data-stu-id="48263-171">If your backup file is larger than 1 TB, you must stripe it because the maximum size of a VM disk is 1 TB.</span></span> <span data-ttu-id="48263-172">Använd följande allmänna steg för att migrera en databas med hjälp av den här manuella metoden:</span><span class="sxs-lookup"><span data-stu-id="48263-172">Use the following general steps to migrate a user database using this manual method:</span></span>

1. <span data-ttu-id="48263-173">Utför en fullständig säkerhetskopiering av databasen till en lokal plats.</span><span class="sxs-lookup"><span data-stu-id="48263-173">Perform a full database backup to an on-premises location.</span></span>
2. <span data-ttu-id="48263-174">Skapa eller ladda upp en virtuell dator med versionen av SQL Server som önskas.</span><span class="sxs-lookup"><span data-stu-id="48263-174">Create or upload a virtual machine with the version of SQL Server desired.</span></span>
3. <span data-ttu-id="48263-175">Konfigurera anslutning baserat på dina krav.</span><span class="sxs-lookup"><span data-stu-id="48263-175">Setup connectivity based on your requirements.</span></span> <span data-ttu-id="48263-176">Se [ansluta till en SQL Server-dator i Azure (Resource Manager)](virtual-machines-windows-sql-connect.md).</span><span class="sxs-lookup"><span data-stu-id="48263-176">See [Connect to a SQL Server Virtual Machine on Azure (Resource Manager)](virtual-machines-windows-sql-connect.md).</span></span>
4. <span data-ttu-id="48263-177">Kopiera dina säkerhetskopierade filer till den virtuella datorn med fjärrskrivbord, Utforskaren eller kopieringskommandot från en kommandotolk.</span><span class="sxs-lookup"><span data-stu-id="48263-177">Copy your backup file(s) to your VM using remote desktop, Windows Explorer or the copy command from a command prompt.</span></span>

## <a name="backup-to-url-and-restore"></a><span data-ttu-id="48263-178">Säkerhetskopiering till URL och återställning</span><span class="sxs-lookup"><span data-stu-id="48263-178">Backup to URL and restore</span></span>
<span data-ttu-id="48263-179">I stället för att säkerhetskopiera till en lokal fil som du kan använda den [säkerhetskopiering till URL: en](https://msdn.microsoft.com/library/dn435916.aspx) och Återställ sedan från URL: en till den virtuella datorn.</span><span class="sxs-lookup"><span data-stu-id="48263-179">Instead of backing up to a local file, you can use the [backup to URL](https://msdn.microsoft.com/library/dn435916.aspx) and then restore from URL to the VM.</span></span> <span data-ttu-id="48263-180">Med SQL Server 2016 som stripe säkerhetskopior stöds, rekommenderas för prestanda och krävs för att överskrida den storlek per blob.</span><span class="sxs-lookup"><span data-stu-id="48263-180">With SQL Server 2016, striped backup sets are supported, are recommended for performance, and required to exceed the size limits per blob.</span></span> <span data-ttu-id="48263-181">För mycket stora databaser, användning av den [Windows Import/Export Service](../../../storage/common/storage-import-export-service.md) rekommenderas.</span><span class="sxs-lookup"><span data-stu-id="48263-181">For very large databases, the use of the [Windows Import/Export Service](../../../storage/common/storage-import-export-service.md) is recommended.</span></span>

## <a name="detach-and-attach-from-url"></a><span data-ttu-id="48263-182">Koppla från och koppla från URL</span><span class="sxs-lookup"><span data-stu-id="48263-182">Detach and attach from URL</span></span>
<span data-ttu-id="48263-183">Koppla från databasen och loggfilerna filerna och överför dem till [Azure Blob storage](https://msdn.microsoft.com/library/dn385720.aspx).</span><span class="sxs-lookup"><span data-stu-id="48263-183">Detach your database and log files and transfer them to [Azure Blob storage](https://msdn.microsoft.com/library/dn385720.aspx).</span></span> <span data-ttu-id="48263-184">Sedan koppla databasen från URL-Adressen på Azure VM.</span><span class="sxs-lookup"><span data-stu-id="48263-184">Then attach the database from the URL on your Azure VM.</span></span> <span data-ttu-id="48263-185">Använd det här alternativet om du vill använda de befintliga databasfilerna finns i Blob storage.</span><span class="sxs-lookup"><span data-stu-id="48263-185">Use this if you want the physical database files to reside in Blob storage.</span></span> <span data-ttu-id="48263-186">Detta kan vara användbart för mycket stora databaser.</span><span class="sxs-lookup"><span data-stu-id="48263-186">This might be useful for very large databases.</span></span> <span data-ttu-id="48263-187">Använd följande allmänna steg för att migrera en databas med hjälp av den här manuella metoden:</span><span class="sxs-lookup"><span data-stu-id="48263-187">Use the following general steps to migrate a user database using this manual method:</span></span>

1. <span data-ttu-id="48263-188">Koppla bort databasfiler från lokala databasinstansen.</span><span class="sxs-lookup"><span data-stu-id="48263-188">Detach the database files from the on-premises database instance.</span></span>
2. <span data-ttu-id="48263-189">Kopiera filerna frånkopplad databas till Azure blob storage med hjälp av den [kommandoradsverktyget azcopy](../../../storage/common/storage-use-azcopy.md).</span><span class="sxs-lookup"><span data-stu-id="48263-189">Copy the detached database files into Azure blob storage using the [AZCopy command-line utility](../../../storage/common/storage-use-azcopy.md).</span></span>
3. <span data-ttu-id="48263-190">Bifoga databasfilerna från Azure-Webbadressen till SQL Server-instansen i Azure-VM.</span><span class="sxs-lookup"><span data-stu-id="48263-190">Attach the database files from the Azure URL to the SQL Server instance in the Azure VM.</span></span>

## <a name="convert-to-vm-and-upload-to-url-and-deploy-as-new-vm"></a><span data-ttu-id="48263-191">Konvertera till VM och överföra till URL och distribuera som en ny virtuell dator</span><span class="sxs-lookup"><span data-stu-id="48263-191">Convert to VM and upload to URL and deploy as new VM</span></span>
<span data-ttu-id="48263-192">Använd den här metoden för att migrera alla system- och databaser i en lokal SQL Server-instans till virtuella Azure-datorn.</span><span class="sxs-lookup"><span data-stu-id="48263-192">Use this method to migrate all system and user databases in an on-premises SQL Server instance to Azure virtual machine.</span></span> <span data-ttu-id="48263-193">Använd följande allmänna steg för att migrera en hela SQL Server-instans med den här manuella metoden:</span><span class="sxs-lookup"><span data-stu-id="48263-193">Use the following general steps to migrate an entire SQL Server instance using this manual method:</span></span>

1. <span data-ttu-id="48263-194">Omvandla fysiska eller virtuella datorer till Hyper-V virtuella hårddiskar med hjälp av [Microsoft Virtual Machine Converter](https://technet.microsoft.com/library/dn874008(v=ws.11).aspx).</span><span class="sxs-lookup"><span data-stu-id="48263-194">Convert physical or virtual machines to Hyper-V VHDs by using [Microsoft Virtual Machine Converter](https://technet.microsoft.com/library/dn874008(v=ws.11).aspx).</span></span>
2. <span data-ttu-id="48263-195">Överföra VHD-filer till Azure Storage med hjälp av den [cmdlet Add-AzureVHD](https://msdn.microsoft.com/library/windowsazure/dn495173.aspx).</span><span class="sxs-lookup"><span data-stu-id="48263-195">Upload VHD files to Azure Storage by using the [Add-AzureVHD cmdlet](https://msdn.microsoft.com/library/windowsazure/dn495173.aspx).</span></span>
3. <span data-ttu-id="48263-196">Distribuera en ny virtuell dator med hjälp av den överförda virtuella Hårddisken.</span><span class="sxs-lookup"><span data-stu-id="48263-196">Deploy a new virtual machine by using the uploaded VHD.</span></span>

> [!NOTE]
> <span data-ttu-id="48263-197">Överväg att använda för att migrera en hela programmet [Azure Site Recovery](../../../site-recovery/site-recovery-overview.md)].</span><span class="sxs-lookup"><span data-stu-id="48263-197">To migrate an entire application, consider using [Azure Site Recovery](../../../site-recovery/site-recovery-overview.md)].</span></span>

## <a name="ship-hard-drive"></a><span data-ttu-id="48263-198">Leverera hårddisk</span><span class="sxs-lookup"><span data-stu-id="48263-198">Ship hard drive</span></span>
<span data-ttu-id="48263-199">Använd den [Windows Import/Export Service metoden](../../../storage/common/storage-import-export-service.md) att överföra stora mängder data i filen till Azure Blob storage i situationer där överför via nätverket är orimligt hög eller inte är möjligt.</span><span class="sxs-lookup"><span data-stu-id="48263-199">Use the [Windows Import/Export Service method](../../../storage/common/storage-import-export-service.md) to transfer large amounts of file data to Azure Blob storage in situations where uploading over the network is prohibitively expensive or not feasible.</span></span> <span data-ttu-id="48263-200">Med den här tjänsten kan du skicka en eller flera hårddiskar som innehåller dessa data till en Azure-datacenter där data överförs till ditt lagringskonto.</span><span class="sxs-lookup"><span data-stu-id="48263-200">With this service, you send one or more hard drives containing that data to an Azure data center, where your data will be uploaded to your storage account.</span></span>

## <a name="next-steps"></a><span data-ttu-id="48263-201">Nästa steg</span><span class="sxs-lookup"><span data-stu-id="48263-201">Next Steps</span></span>
<span data-ttu-id="48263-202">Mer information om hur du kör SQL Server på Azure Virtual Machines finns [SQL Server på Azure virtuella datorer – översikt](virtual-machines-windows-sql-server-iaas-overview.md).</span><span class="sxs-lookup"><span data-stu-id="48263-202">For more information about running SQL Server on Azure Virtual Machines, see [SQL Server on Azure Virtual Machines overview](virtual-machines-windows-sql-server-iaas-overview.md).</span></span>

<span data-ttu-id="48263-203">Anvisningar om hur du skapar en Azure SQL Server-dator från en avbildning finns [Tips och trick om kloning Azure SQL virtuella datorer från avbildningar](https://blogs.msdn.microsoft.com/psssql/2016/07/06/tips-tricks-on-cloning-azure-sql-virtual-machines-from-captured-images/) på CSS tekniker som SQL Server-bloggen.</span><span class="sxs-lookup"><span data-stu-id="48263-203">For instructions on creating an Azure SQL Server Virtual Machine from a captured image, see [Tips & Tricks on ‘cloning’ Azure SQL virtual machines from captured images](https://blogs.msdn.microsoft.com/psssql/2016/07/06/tips-tricks-on-cloning-azure-sql-virtual-machines-from-captured-images/) on the CSS SQL Server Engineers blog.</span></span>


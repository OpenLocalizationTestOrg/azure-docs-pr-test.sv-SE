---
title: "aaaStorage lösningar för virtuella Windows-datorer i Azure | Microsoft Docs"
description: "Läs mer om hello viktiga design och implementeringslösning riktlinjer för att distribuera lösningar för lagring i Azure infrastrukturtjänster."
documentationcenter: 
services: virtual-machines-windows
author: iainfoulds
manager: timlt
editor: 
tags: azure-resource-manager
ms.assetid: 4ceb7d32-7a0d-4004-b701-c2bbcaff6b0b
ms.service: virtual-machines-windows
ms.workload: infrastructure-services
ms.tgt_pltfrm: vm-windows
ms.devlang: na
ms.topic: article
ms.date: 06/26/2017
ms.author: iainfou
ms.custom: H1Hack27Feb2017
ms.openlocfilehash: 57c27a7305964a56e6b2d1e73dee8e7da19fa8f8
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: sv-SE
ms.lasthandoff: 10/06/2017
---
# <a name="azure-storage-infrastructure-guidelines-for-windows-vms"></a><span data-ttu-id="c3e29-103">Azure storage infrastruktur riktlinjer för virtuella Windows-datorer</span><span class="sxs-lookup"><span data-stu-id="c3e29-103">Azure storage infrastructure guidelines for Windows VMs</span></span>

[!INCLUDE [virtual-machines-windows-infrastructure-guidelines-intro](../../../includes/virtual-machines-windows-infrastructure-guidelines-intro.md)]

<span data-ttu-id="c3e29-104">Den här artikeln fokuserar på att förstå lagringsbehov och designöverväganden för att uppnå optimal virtuell dator (VM)-prestanda.</span><span class="sxs-lookup"><span data-stu-id="c3e29-104">This article focuses on understanding storage needs and design considerations for achieving optimum virtual machine (VM) performance.</span></span>

## <a name="implementation-guidelines-for-storage"></a><span data-ttu-id="c3e29-105">Implementeringsriktlinjer för lagring</span><span class="sxs-lookup"><span data-stu-id="c3e29-105">Implementation guidelines for storage</span></span>
<span data-ttu-id="c3e29-106">Beslut:</span><span class="sxs-lookup"><span data-stu-id="c3e29-106">Decisions:</span></span>

* <span data-ttu-id="c3e29-107">Ska du toouse Azure hanterade diskar eller ohanterad diskar?</span><span class="sxs-lookup"><span data-stu-id="c3e29-107">Are you going toouse Azure Managed Disks or unmanaged disks?</span></span>
* <span data-ttu-id="c3e29-108">Behöver du toouse Standard eller Premium-lagring för din arbetsbelastning?</span><span class="sxs-lookup"><span data-stu-id="c3e29-108">Do you need toouse Standard or Premium storage for your workload?</span></span>
* <span data-ttu-id="c3e29-109">Behöver du disk striping toocreate diskar större än 4TB?</span><span class="sxs-lookup"><span data-stu-id="c3e29-109">Do you need disk striping toocreate disks larger than 4TB?</span></span>
* <span data-ttu-id="c3e29-110">Behöver du disk striping tooachieve i/o optimalt för din arbetsbelastning?</span><span class="sxs-lookup"><span data-stu-id="c3e29-110">Do you need disk striping tooachieve optimal I/O performance for your workload?</span></span>
* <span data-ttu-id="c3e29-111">Vilken uppsättning av lagringskonton behöver du toohost din IT-arbetsbelastning eller infrastrukturen?</span><span class="sxs-lookup"><span data-stu-id="c3e29-111">What set of storage accounts do you need toohost your IT workload or infrastructure?</span></span>

<span data-ttu-id="c3e29-112">Aktiviteter:</span><span class="sxs-lookup"><span data-stu-id="c3e29-112">Tasks:</span></span>

* <span data-ttu-id="c3e29-113">Granska i/o-kraven för hello program som du distribuerar och planera hello lämpligt antal och typer av lagringskonton.</span><span class="sxs-lookup"><span data-stu-id="c3e29-113">Review I/O demands of hello applications you are deploying and plan hello appropriate number and type of storage accounts.</span></span>
* <span data-ttu-id="c3e29-114">Skapa hello uppsättning lagringskonton med din namngivningskonvention.</span><span class="sxs-lookup"><span data-stu-id="c3e29-114">Create hello set of storage accounts using your naming convention.</span></span> <span data-ttu-id="c3e29-115">Du kan använda Azure PowerShell eller hello-portalen.</span><span class="sxs-lookup"><span data-stu-id="c3e29-115">You can use Azure PowerShell or hello portal.</span></span>

## <a name="storage"></a><span data-ttu-id="c3e29-116">Lagring</span><span class="sxs-lookup"><span data-stu-id="c3e29-116">Storage</span></span>
<span data-ttu-id="c3e29-117">Azure Storage är en viktig del av att distribuera och hantera virtuella maskiner (VMs) och program.</span><span class="sxs-lookup"><span data-stu-id="c3e29-117">Azure Storage is a key part of deploying and managing virtual machines (VMs) and applications.</span></span> <span data-ttu-id="c3e29-118">Azure Storage tillhandahåller tjänster för att lagra fildata, Ostrukturerade data och meddelanden och det är också en del av hello-infrastrukturen som stöder virtuella datorer.</span><span class="sxs-lookup"><span data-stu-id="c3e29-118">Azure Storage provides services for storing file data, unstructured data, and messages, and it is also part of hello infrastructure supporting VMs.</span></span>

<span data-ttu-id="c3e29-119">[Azure-hanterade diskar](../../storage/storage-managed-disks-overview.md) hanterar lagring du hello bakgrunden.</span><span class="sxs-lookup"><span data-stu-id="c3e29-119">[Azure Managed Disks](../../storage/storage-managed-disks-overview.md) handles storage for you behind hello scenes.</span></span> <span data-ttu-id="c3e29-120">Med ohanterad diskar skapar du lagringskonton toohold hello diskar (VHD-filer) för din virtuella Azure-datorer.</span><span class="sxs-lookup"><span data-stu-id="c3e29-120">With unmanaged disks, you create storage accounts toohold hello disks (VHD files) for your Azure VMs.</span></span> <span data-ttu-id="c3e29-121">När du ökar, måste du kontrollera att du har skapat ytterligare lagringskonton så att du inte överskrider hello IOPS gränsen för lagring med alla diskar.</span><span class="sxs-lookup"><span data-stu-id="c3e29-121">When scaling up, you must make sure you created additional storage accounts so you don’t exceed hello IOPS limit for storage with any of your disks.</span></span> <span data-ttu-id="c3e29-122">För hanterade diskar hantering lagring, är du inte längre begränsad hello lagringskontogränser (till exempel 20 000 IOPS / -kontot).</span><span class="sxs-lookup"><span data-stu-id="c3e29-122">With Managed Disks handling storage, you are no longer limited by hello storage account limits (such as 20,000 IOPS / account).</span></span> <span data-ttu-id="c3e29-123">Du har också längre toocopy anpassade avbildningar (VHD-filer) toomultiple storage-konton.</span><span class="sxs-lookup"><span data-stu-id="c3e29-123">You also no longer have toocopy your custom images (VHD files) toomultiple storage accounts.</span></span> <span data-ttu-id="c3e29-124">Du kan hantera dem på en central plats – ett lagringskonto per Azure-region – och använder dem toocreate hundratals för virtuella datorer i en prenumeration.</span><span class="sxs-lookup"><span data-stu-id="c3e29-124">You can manage them in a central location – one storage account per Azure region – and use them toocreate hundreds of VMs in a subscription.</span></span> <span data-ttu-id="c3e29-125">Vi rekommenderar att du använder hanterade diskar för nya distributioner.</span><span class="sxs-lookup"><span data-stu-id="c3e29-125">We recommend you use Managed Disks for new deployments.</span></span>

<span data-ttu-id="c3e29-126">Det finns två typer av storage-konton för att stödja virtuella datorer:</span><span class="sxs-lookup"><span data-stu-id="c3e29-126">There are two types of storage accounts available for supporting VMs:</span></span>

* <span data-ttu-id="c3e29-127">Standardlagring konton ger dig tillgång tooblob lagring (används för att lagra Virtuella Azure-diskar), table storage, queue storage och fillagring.</span><span class="sxs-lookup"><span data-stu-id="c3e29-127">Standard storage accounts give you access tooblob storage (used for storing Azure VM disks), table storage, queue storage, and file storage.</span></span>
* <span data-ttu-id="c3e29-128">[Premium-lagring](../../storage/storage-premium-storage.md) konton ger stöd för i/o-intensiv arbetsbelastning, till exempel SQL-servrar i ett kluster med AlwaysOn diskar med hög prestanda, låg latens.</span><span class="sxs-lookup"><span data-stu-id="c3e29-128">[Premium storage](../../storage/storage-premium-storage.md) accounts deliver high-performance, low-latency disk support for I/O intensive workloads, such as SQL Servers in an AlwaysOn cluster.</span></span> <span data-ttu-id="c3e29-129">Premium-lagring stöder för närvarande endast Virtuella Azure-diskar.</span><span class="sxs-lookup"><span data-stu-id="c3e29-129">Premium storage currently supports Azure VM disks only.</span></span>

<span data-ttu-id="c3e29-130">Azure skapar virtuella datorer med en operativsystemdisk, en tillfällig disk och noll eller flera valfria datadiskar.</span><span class="sxs-lookup"><span data-stu-id="c3e29-130">Azure creates VMs with an operating system disk, a temporary disk, and zero or more optional data disks.</span></span> <span data-ttu-id="c3e29-131">Hej operativsystemdisken och datadiskar är Azure sidblobar, medan hello diskutrymme lagras lokalt på hello-nod där hello datorn finns.</span><span class="sxs-lookup"><span data-stu-id="c3e29-131">hello operating system disk and data disks are Azure page blobs, whereas hello temporary disk is stored locally on hello node where hello machine lives.</span></span> <span data-ttu-id="c3e29-132">Vara försiktig när du skapar program tooonly använder den här tillfälliga disken för icke-beständig data som hello VM kan migreras mellan värdar under en underhållshändelse.</span><span class="sxs-lookup"><span data-stu-id="c3e29-132">Take care when designing applications tooonly use this temporary disk for non-persistent data as hello VM may be migrated between hosts during a maintenance event.</span></span> <span data-ttu-id="c3e29-133">Data som lagrats på hello diskutrymme skulle gå förlorade.</span><span class="sxs-lookup"><span data-stu-id="c3e29-133">Any data stored on hello temporary disk would be lost.</span></span>

<span data-ttu-id="c3e29-134">Hållbarhet och hög tillgänglighet som hello underliggande Azure Storage miljö tooensure att dina data fortfarande är skyddade mot oplanerat underhåll eller maskinvara fel.</span><span class="sxs-lookup"><span data-stu-id="c3e29-134">Durability and high availability is provided by hello underlying Azure Storage environment tooensure that your data remains protected against unplanned maintenance or hardware failures.</span></span> <span data-ttu-id="c3e29-135">När du utformar din Azure Storage-miljö kan du välja tooreplicate VM-lagring:</span><span class="sxs-lookup"><span data-stu-id="c3e29-135">As you design your Azure Storage environment, you can choose tooreplicate VM storage:</span></span>

* <span data-ttu-id="c3e29-136">lokalt inom en viss Azure-datacenter</span><span class="sxs-lookup"><span data-stu-id="c3e29-136">locally within a given Azure datacenter</span></span>
* <span data-ttu-id="c3e29-137">i Azure-datacenter inom en viss region</span><span class="sxs-lookup"><span data-stu-id="c3e29-137">across Azure datacenters within a given region</span></span>
* <span data-ttu-id="c3e29-138">i Azure-Datacenter över olika regioner</span><span class="sxs-lookup"><span data-stu-id="c3e29-138">across Azure datacenters across different regions</span></span>

<span data-ttu-id="c3e29-139">Du kan läsa [mer om hello replikeringsalternativ för hög tillgänglighet](../../storage/storage-introduction.md#replication-for-durability-and-high-availability).</span><span class="sxs-lookup"><span data-stu-id="c3e29-139">You can read [more about hello replication options for high availability](../../storage/storage-introduction.md#replication-for-durability-and-high-availability).</span></span>

<span data-ttu-id="c3e29-140">Operativsystem och datadiskar har en maximal storlek på 4TB.</span><span class="sxs-lookup"><span data-stu-id="c3e29-140">Operating system disks and data disks have a maximum size of 4TB.</span></span> <span data-ttu-id="c3e29-141">Du kan använda lagringsutrymmen i Windows Server 2012 eller senare toosurpass begränsningen av tillsammans poolning data diskar toopresent logiska volymer som är större än 4TB tooyour VM.</span><span class="sxs-lookup"><span data-stu-id="c3e29-141">You can use Storage Spaces in Windows Server 2012 or later toosurpass this limit by pooling together data disks toopresent logical volumes larger than 4TB tooyour VM.</span></span>

<span data-ttu-id="c3e29-142">Det finns vissa skalbarhetsgränser när du utformar dina distributioner i Azure Storage - mer information, se [prenumeration och tjänsten gränser, kvoter och begränsningar för Microsoft Azure](../../azure-subscription-service-limits.md#storage-limits).</span><span class="sxs-lookup"><span data-stu-id="c3e29-142">There are some scalability limits when designing your Azure Storage deployments - for more information, see [Microsoft Azure subscription and service limits, quotas, and constraints](../../azure-subscription-service-limits.md#storage-limits).</span></span> <span data-ttu-id="c3e29-143">Se även [skalbarhets- och prestandamål för Azure storage](../../storage/storage-scalability-targets.md).</span><span class="sxs-lookup"><span data-stu-id="c3e29-143">Also see [Azure storage scalability and performance targets](../../storage/storage-scalability-targets.md).</span></span>

<span data-ttu-id="c3e29-144">För lagring av programmet, kan du lagra Ostrukturerade objektdata dokument, bilder, säkerhetskopiering, konfigurationsdata, loggar, t.ex.</span><span class="sxs-lookup"><span data-stu-id="c3e29-144">For application storage, you can store unstructured object data such as documents, images, backups, configuration data, logs, etc.</span></span> <span data-ttu-id="c3e29-145">med blob storage.</span><span class="sxs-lookup"><span data-stu-id="c3e29-145">using blob storage.</span></span> <span data-ttu-id="c3e29-146">I stället för ditt program skrivning tooa virtuell disk som är ansluten toohello VM kan hello program skriva direkt tooAzure blob-lagring.</span><span class="sxs-lookup"><span data-stu-id="c3e29-146">Rather than your application writing tooa virtual disk attached toohello VM, hello application can write directly tooAzure blob storage.</span></span> <span data-ttu-id="c3e29-147">BLOB storage tillhandahåller också hello alternativ för [hot och kall lagringsnivåer](../../storage/storage-blob-storage-tiers.md) beroende på dina behov för tillgänglighet och kostnaden begränsningar.</span><span class="sxs-lookup"><span data-stu-id="c3e29-147">Blob storage also provides hello option of [hot and cool storage tiers](../../storage/storage-blob-storage-tiers.md) depending on your availability needs and cost constraints.</span></span>

## <a name="striped-disks"></a><span data-ttu-id="c3e29-148">Stripe-diskar</span><span class="sxs-lookup"><span data-stu-id="c3e29-148">Striped disks</span></span>
<span data-ttu-id="c3e29-149">Förutom att tillåta toocreate diskar större än 4TB i många fall, förbättrar med hjälp av striping för datadiskar prestandan genom att låta flera blobbar tooback hello lagring för en enskild volym.</span><span class="sxs-lookup"><span data-stu-id="c3e29-149">Besides allowing you toocreate disks larger than 4TB, in many instances, using striping for data disks enhances performance by allowing multiple blobs tooback hello storage for a single volume.</span></span> <span data-ttu-id="c3e29-150">Med striping, hello i/o krävs toowrite och läsa data från en enskild logisk disk fortsätter parallellt.</span><span class="sxs-lookup"><span data-stu-id="c3e29-150">With striping, hello I/O required toowrite and read data from a single logical disk proceeds in parallel.</span></span>

<span data-ttu-id="c3e29-151">Azure inför gränser hello antalet diskar och mängden bandbredd som är tillgängliga, beroende på hello VM-storlek.</span><span class="sxs-lookup"><span data-stu-id="c3e29-151">Azure imposes limits on hello number of data disks and amount of bandwidth available, depending on hello VM size.</span></span> <span data-ttu-id="c3e29-152">Mer information finns i [storlekar för virtuella datorer](sizes.md).</span><span class="sxs-lookup"><span data-stu-id="c3e29-152">For details, see [Sizes for virtual machines](sizes.md).</span></span>

<span data-ttu-id="c3e29-153">Om du använder disk striping för Azure datadiskar, bör du hello följande riktlinjer:</span><span class="sxs-lookup"><span data-stu-id="c3e29-153">If you are using disk striping for Azure data disks, consider hello following guidelines:</span></span>

* <span data-ttu-id="c3e29-154">Koppla hello högsta tillåtna datadiskar för hello VM-storlek.</span><span class="sxs-lookup"><span data-stu-id="c3e29-154">Attach hello maximum data disks allowed for hello VM size.</span></span>
* <span data-ttu-id="c3e29-155">Använda lagringsutrymmen.</span><span class="sxs-lookup"><span data-stu-id="c3e29-155">Use Storage Spaces.</span></span>
* <span data-ttu-id="c3e29-156">Undvik att använda Azure-datadisk cachelagringsalternativ (princip för cachelagring = ingen).</span><span class="sxs-lookup"><span data-stu-id="c3e29-156">Avoid using Azure data disk caching options (caching policy = None).</span></span>

<span data-ttu-id="c3e29-157">Mer information finns i [lagringsutrymmen - utformning för prestanda](http://social.technet.microsoft.com/wiki/contents/articles/15200.storage-spaces-designing-for-performance.aspx).</span><span class="sxs-lookup"><span data-stu-id="c3e29-157">For more information, see [Storage spaces - designing for performance](http://social.technet.microsoft.com/wiki/contents/articles/15200.storage-spaces-designing-for-performance.aspx).</span></span>

## <a name="multiple-storage-accounts"></a><span data-ttu-id="c3e29-158">Flera lagringskonton</span><span class="sxs-lookup"><span data-stu-id="c3e29-158">Multiple storage accounts</span></span>
<span data-ttu-id="c3e29-159">Det här avsnittet gäller inte för[Azure hanterade diskar](../../storage/storage-managed-disks-overview.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json)eftersom du inte skapar en separat storage-konton.</span><span class="sxs-lookup"><span data-stu-id="c3e29-159">This section does not apply too[Azure Managed Disks](../../storage/storage-managed-disks-overview.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json), as you do not create separate storage accounts.</span></span> 

<span data-ttu-id="c3e29-160">När du utformar din Azure Storage-miljö för ohanterade diskar kan du använda flera lagringskonton som hello antal virtuella datorer som du distribuerar ökar.</span><span class="sxs-lookup"><span data-stu-id="c3e29-160">When designing your Azure Storage environment for unmanaged disks, you can use multiple storage accounts as hello number of VMs you deploy increases.</span></span> <span data-ttu-id="c3e29-161">Den här metoden hjälper till att distribuera ut hello i/o över hello underliggande Azure Storage infrastruktur toomaintain optimal prestanda för virtuella datorer och program.</span><span class="sxs-lookup"><span data-stu-id="c3e29-161">This approach helps distribute out hello I/O across hello underlying Azure Storage infrastructure toomaintain optimum performance for your VMs and applications.</span></span> <span data-ttu-id="c3e29-162">När du utformar hello-program som du distribuerar du hello i/o-kraven har varje virtuell dator och Saldo ut dessa virtuella datorer i Azure Storage-konton.</span><span class="sxs-lookup"><span data-stu-id="c3e29-162">As you design hello applications that you are deploying, consider hello I/O requirements each VM has and balance out those VMs across Azure Storage accounts.</span></span> <span data-ttu-id="c3e29-163">Försök tooavoid gruppera alla hello höga i/o krävande virtuella datorer i toojust en eller två storage-konton.</span><span class="sxs-lookup"><span data-stu-id="c3e29-163">Try tooavoid grouping all hello high I/O demanding VMs in toojust one or two storage accounts.</span></span>

<span data-ttu-id="c3e29-164">Mer information om hello i/o-funktioner för hello olika Azure Storage-alternativ och vissa rekommenderar maxkapacitet, finns [skalbarhets- och prestandamål för Azure storage](../../storage/storage-scalability-targets.md).</span><span class="sxs-lookup"><span data-stu-id="c3e29-164">For more information about hello I/O capabilities of hello different Azure Storage options and some recommend maximums, see [Azure storage scalability and performance targets](../../storage/storage-scalability-targets.md).</span></span>

## <a name="next-steps"></a><span data-ttu-id="c3e29-165">Nästa steg</span><span class="sxs-lookup"><span data-stu-id="c3e29-165">Next steps</span></span>
[!INCLUDE [virtual-machines-windows-infrastructure-guidelines-next-steps](../../../includes/virtual-machines-windows-infrastructure-guidelines-next-steps.md)]


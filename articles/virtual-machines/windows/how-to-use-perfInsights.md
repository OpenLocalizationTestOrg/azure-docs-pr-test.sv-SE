---
title: aaaHow toouse PerfInsights i Microsoft Azure | Microsoft Docs
description: "Lär sig hur toouse PerfInsights tootroubleshoot Windows VM prestandaproblem."
services: virtual-machines-windows'
documentationcenter: 
author: genlin
manager: cshepard
editor: na
tags: 
ms.service: virtual-machines-windows
ms.workload: infrastructure-services
ms.tgt_pltfrm: vm-windows
ms.devlang: na
ms.topic: article
ms.date: 07/18/2017
ms.author: genli
ms.openlocfilehash: f23ff7708c0c63bd02674b1bdc07753e8a89d9be
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: sv-SE
ms.lasthandoff: 10/06/2017
---
# <a name="how-toouse-perfinsights"></a><span data-ttu-id="37f66-103">Hur toouse PerfInsights</span><span class="sxs-lookup"><span data-stu-id="37f66-103">How toouse PerfInsights</span></span> 

<span data-ttu-id="37f66-104">[PerfInsights](http://aka.ms/perfinsightsdownload) är ett automatiserat skript som samlar in viktig diagnostisk information, körs i/o-belastning stress och ger en analys rapporten toohelp felsöka Windows VM prestandaproblem i Microsoft Azure.</span><span class="sxs-lookup"><span data-stu-id="37f66-104">[PerfInsights](http://aka.ms/perfinsightsdownload) is an automated script that collects useful diagnostic information, runs I/O stress loads, and provides an analysis report toohelp troubleshoot Windows VM performance problems in Microsoft Azure.</span></span> 

<span data-ttu-id="37f66-105">Vi rekommenderar att du kör det här skriptet innan du skapar ett supportärende hos Microsoft VM prestandaproblem.</span><span class="sxs-lookup"><span data-stu-id="37f66-105">We recommend that you run this script before you open a Support ticket with Microsoft for VM performance issues.</span></span>

## <a name="supported-troubleshooting-scenarios"></a><span data-ttu-id="37f66-106">Felsökning scenarier som stöds</span><span class="sxs-lookup"><span data-stu-id="37f66-106">Supported troubleshooting scenarios</span></span>

<span data-ttu-id="37f66-107">PerfInsights kan samla in och analysera flera typer av information som är grupperade i unika scenarier.</span><span class="sxs-lookup"><span data-stu-id="37f66-107">PerfInsights can collect and analyze several kinds of information that are grouped into unique scenarios.</span></span>

### <a name="collect-disk-configuration"></a><span data-ttu-id="37f66-108">Samla in diskkonfigurationen</span><span class="sxs-lookup"><span data-stu-id="37f66-108">Collect disk configuration</span></span> 

<span data-ttu-id="37f66-109">Det här scenariot samlar in hello diskkonfigurationen och annan viktig information, inklusive hello följande objekt:</span><span class="sxs-lookup"><span data-stu-id="37f66-109">This scenario collects hello disk configuration and other important information, including hello following items:</span></span>

-   <span data-ttu-id="37f66-110">Händelseloggar</span><span class="sxs-lookup"><span data-stu-id="37f66-110">Event logs</span></span>

-   <span data-ttu-id="37f66-111">Nätverkets status för alla inkommande och utgående anslutningar</span><span class="sxs-lookup"><span data-stu-id="37f66-111">Network status for all incoming and outgoing connections</span></span>

-   <span data-ttu-id="37f66-112">Inställningarna för nätverk och brandvägg</span><span class="sxs-lookup"><span data-stu-id="37f66-112">Network and firewall configuration settings</span></span>

-   <span data-ttu-id="37f66-113">Uppgiftslista för alla program som körs på hello system</span><span class="sxs-lookup"><span data-stu-id="37f66-113">Task list for all applications that are currently running on hello system</span></span>

-   <span data-ttu-id="37f66-114">Informationsfilen som skapas av msinfo32 för hello virtuell dator (VM)</span><span class="sxs-lookup"><span data-stu-id="37f66-114">Information file created by msinfo32 for hello virtual machine (VM)</span></span>

-   <span data-ttu-id="37f66-115">Microsoft SQL Server-databasen-konfigurationsinställningarna (om hello VM identifieras som en server som kör SQL Server)</span><span class="sxs-lookup"><span data-stu-id="37f66-115">Microsoft SQL Server database configuration settings (if hello VM is identified as a server that is running SQL Server)</span></span>

-   <span data-ttu-id="37f66-116">Lagring tillförlitlighet räknare</span><span class="sxs-lookup"><span data-stu-id="37f66-116">Storage reliability counters</span></span>

-   <span data-ttu-id="37f66-117">Viktiga snabbkorrigeringar för Windows</span><span class="sxs-lookup"><span data-stu-id="37f66-117">Important Windows hotfixes</span></span>

-   <span data-ttu-id="37f66-118">Installerade filterdrivrutiner</span><span class="sxs-lookup"><span data-stu-id="37f66-118">Installed filter drivers</span></span>

<span data-ttu-id="37f66-119">Detta är en passiv insamling av information som inte påverkar hello system.</span><span class="sxs-lookup"><span data-stu-id="37f66-119">This is a passive collection of information that shouldn't affect hello system.</span></span> 

>[!Note]
><span data-ttu-id="37f66-120">Det här scenariot ingår automatiskt i varje hello följande scenarier.</span><span class="sxs-lookup"><span data-stu-id="37f66-120">This scenario is automatically included in each of hello following scenarios.</span></span>

### <a name="benchmarkstorage-performance-test"></a><span data-ttu-id="37f66-121">Prestandamått/lagring prestandatester</span><span class="sxs-lookup"><span data-stu-id="37f66-121">Benchmark/Storage Performance Test</span></span>

<span data-ttu-id="37f66-122">Det här scenariot körs hello [diskspd](https://github.com/Microsoft/diskspd) mäta test (IOPS och Mbit/s) för alla enheter som är anslutna toohello VM.</span><span class="sxs-lookup"><span data-stu-id="37f66-122">This scenario runs hello [diskspd](https://github.com/Microsoft/diskspd) benchmark test (IOPS and MBPS) for all drives that are attached toohello VM.</span></span> 

> [!Note]
> <span data-ttu-id="37f66-123">Det här scenariot kan påverka hello system och ska inte köras på ett levande produktionssystem.</span><span class="sxs-lookup"><span data-stu-id="37f66-123">This scenario can affect hello system and shouldn’t be run on a live production system.</span></span> <span data-ttu-id="37f66-124">Om det behövs kör det här scenariot i ett dedicerat Underhåll fönstret tooavoid eventuella problem.</span><span class="sxs-lookup"><span data-stu-id="37f66-124">If necessary, run this scenario in a dedicated maintenance window tooavoid any problems.</span></span> <span data-ttu-id="37f66-125">En ökad belastning som orsakas av ett spårningen eller prestandamått test att sänka hello prestanda på den virtuella datorn.</span><span class="sxs-lookup"><span data-stu-id="37f66-125">An increased workload that is caused by a trace or benchmark test could adversely affect hello performance of your VM.</span></span>
>

### <a name="general-vm-slow-analysis"></a><span data-ttu-id="37f66-126">Allmänna VM långsam analys</span><span class="sxs-lookup"><span data-stu-id="37f66-126">General VM Slow analysis</span></span> 

<span data-ttu-id="37f66-127">Det här scenariot körs en [prestandaräknaren](https://msdn.microsoft.com/library/windows/desktop/aa373083(v=vs.85).aspx) spårningen med hjälp av hello räknare som anges i hello Generalcounters.txt filen.</span><span class="sxs-lookup"><span data-stu-id="37f66-127">This scenario runs a [performance counter](https://msdn.microsoft.com/library/windows/desktop/aa373083(v=vs.85).aspx) trace by using hello counters that are specified in hello Generalcounters.txt file.</span></span> <span data-ttu-id="37f66-128">Om hello VM identifieras som en server som kör SQL Server, kör en räknare spårning av prestanda med hjälp av hello räknare som finns i hello Sqlcounters.txt filen.</span><span class="sxs-lookup"><span data-stu-id="37f66-128">If hello VM is identified as a server that is running SQL Server, it runs a performance counter trace by using hello counters that are found in hello Sqlcounters.txt file.</span></span> <span data-ttu-id="37f66-129">Den omfattar också prestanda diagnostikdata.</span><span class="sxs-lookup"><span data-stu-id="37f66-129">It also includes Performance Diagnostics data.</span></span>

### <a name="vm-slow-analysis-and-benchmark"></a><span data-ttu-id="37f66-130">Långsam VM analys- och prestandamått</span><span class="sxs-lookup"><span data-stu-id="37f66-130">VM Slow analysis and benchmark</span></span>

<span data-ttu-id="37f66-131">Det här scenariot körs en [prestandaräknaren](https://msdn.microsoft.com/library/windows/desktop/aa373083(v=vs.85).aspx) spårning som följs av en [diskspd](https://github.com/Microsoft/diskspd) benchmark-test.</span><span class="sxs-lookup"><span data-stu-id="37f66-131">This scenario runs a [performance counter](https://msdn.microsoft.com/library/windows/desktop/aa373083(v=vs.85).aspx) trace that is followed by a [diskspd](https://github.com/Microsoft/diskspd) benchmark test.</span></span> 

> [!Note]
> <span data-ttu-id="37f66-132">Det här scenariot kan påverka hello system och ska inte köras på ett levande produktionssystem.</span><span class="sxs-lookup"><span data-stu-id="37f66-132">This scenario can affect hello system and shouldn’t be run on a live production system.</span></span> <span data-ttu-id="37f66-133">Om det behövs kör det här scenariot i ett dedicerat Underhåll fönstret tooavoid eventuella problem.</span><span class="sxs-lookup"><span data-stu-id="37f66-133">If necessary, run this scenario in a dedicated maintenance window tooavoid any problems.</span></span> <span data-ttu-id="37f66-134">En ökad belastning som orsakas av ett spårningen eller prestandamått test att sänka hello prestanda på den virtuella datorn.</span><span class="sxs-lookup"><span data-stu-id="37f66-134">An increased workload that is caused by a trace or benchmark test could adversely affect hello performance of your VM.</span></span>
>

### <a name="azure-files-analysis"></a><span data-ttu-id="37f66-135">Azure filer analys</span><span class="sxs-lookup"><span data-stu-id="37f66-135">Azure Files analysis</span></span> 

<span data-ttu-id="37f66-136">Det här scenariot körs en särskild prestandaräknaren avbildning tillsammans med en spårning i nätverket.</span><span class="sxs-lookup"><span data-stu-id="37f66-136">This scenario runs a special performance counter capture together with a network trace.</span></span> <span data-ttu-id="37f66-137">Avbildningen innehåller alla räknare för hello ”SMB-Klientresurser”.</span><span class="sxs-lookup"><span data-stu-id="37f66-137">The capture includes all hello "SMB Client Shares" counters.</span></span> <span data-ttu-id="37f66-138">hello nedan följer några viktiga SMB-resursen prestandaräknare i klient som ingår i hello avbildning:</span><span class="sxs-lookup"><span data-stu-id="37f66-138">hello following are some key SMB client share performance counters that are part of hello capture:</span></span>

| <span data-ttu-id="37f66-139">**Typ**</span><span class="sxs-lookup"><span data-stu-id="37f66-139">**Type**</span></span>     | <span data-ttu-id="37f66-140">**SMB-klienten resurser räknare**</span><span class="sxs-lookup"><span data-stu-id="37f66-140">**SMB client shares counter**</span></span> |
|--------------|-------------------------------|
| <span data-ttu-id="37f66-141">IOPS</span><span class="sxs-lookup"><span data-stu-id="37f66-141">IOPS</span></span>         | <span data-ttu-id="37f66-142">Data-begäranden per sekund</span><span class="sxs-lookup"><span data-stu-id="37f66-142">Data Requests/sec</span></span>             |
|              | <span data-ttu-id="37f66-143">Läs begäranden per sekund</span><span class="sxs-lookup"><span data-stu-id="37f66-143">Read Requests/sec</span></span>             |
|              | <span data-ttu-id="37f66-144">Skriva begäranden per sekund</span><span class="sxs-lookup"><span data-stu-id="37f66-144">Write Requests/sec</span></span>            |
| <span data-ttu-id="37f66-145">Svarstid</span><span class="sxs-lookup"><span data-stu-id="37f66-145">Latency</span></span>      | <span data-ttu-id="37f66-146">Medel s/begäran</span><span class="sxs-lookup"><span data-stu-id="37f66-146">Avg. sec/Data Request</span></span>         |
|              | <span data-ttu-id="37f66-147">Medel s/diskläsning</span><span class="sxs-lookup"><span data-stu-id="37f66-147">Avg. sec/Read</span></span>                 |
|              | <span data-ttu-id="37f66-148">Medel s/diskskrivning</span><span class="sxs-lookup"><span data-stu-id="37f66-148">Avg. sec/Write</span></span>                |
| <span data-ttu-id="37f66-149">I/o-storlek</span><span class="sxs-lookup"><span data-stu-id="37f66-149">IO Size</span></span>      | <span data-ttu-id="37f66-150">Genomsn. Begäran om byte-Data</span><span class="sxs-lookup"><span data-stu-id="37f66-150">Avg. Bytes/Data Request</span></span>       |
|              | <span data-ttu-id="37f66-151">Genomsn. Lästa byte /</span><span class="sxs-lookup"><span data-stu-id="37f66-151">Avg. Bytes/Read</span></span>               |
|              | <span data-ttu-id="37f66-152">Genomsn. Byte/skrivning</span><span class="sxs-lookup"><span data-stu-id="37f66-152">Avg. Bytes/Write</span></span>              |
| <span data-ttu-id="37f66-153">Dataflöde</span><span class="sxs-lookup"><span data-stu-id="37f66-153">Throughput</span></span>   | <span data-ttu-id="37f66-154">Byte/sek</span><span class="sxs-lookup"><span data-stu-id="37f66-154">Data Bytes/sec</span></span>                |
|              | <span data-ttu-id="37f66-155">Lästa byte/sek</span><span class="sxs-lookup"><span data-stu-id="37f66-155">Read Bytes/sec</span></span>                |
|              | <span data-ttu-id="37f66-156">Skrivna byte/s</span><span class="sxs-lookup"><span data-stu-id="37f66-156">Write Bytes/sec</span></span>               |
| <span data-ttu-id="37f66-157">Kölängd</span><span class="sxs-lookup"><span data-stu-id="37f66-157">Queue Length</span></span> | <span data-ttu-id="37f66-158">Genomsn. Läs Kölängd</span><span class="sxs-lookup"><span data-stu-id="37f66-158">Avg. Read Queue Length</span></span>        |
|              | <span data-ttu-id="37f66-159">Genomsn. Skriva Kölängd</span><span class="sxs-lookup"><span data-stu-id="37f66-159">Avg. Write Queue Length</span></span>       |
|              | <span data-ttu-id="37f66-160">Genomsn. Kölängd för data</span><span class="sxs-lookup"><span data-stu-id="37f66-160">Avg. Data Queue Length</span></span>        |

### <a name="custom-configuration"></a><span data-ttu-id="37f66-161">Anpassad konfiguration</span><span class="sxs-lookup"><span data-stu-id="37f66-161">Custom configuration</span></span> 

<span data-ttu-id="37f66-162">När du kör en anpassad konfiguration kör du alla spår (Prestandadiagnostik, prestandaräknare, xperf, nätverk, storport) parallellt, beroende på hur många olika spår har valts.</span><span class="sxs-lookup"><span data-stu-id="37f66-162">When you run a custom configuration, you are running all traces (performance diagnostics, performance counter, xperf, network, storport) in parallel, depending how many different traces are selected.</span></span> <span data-ttu-id="37f66-163">När spårning är klar körs hello verktyget hello diskspd-prestandamått, om den är markerad.</span><span class="sxs-lookup"><span data-stu-id="37f66-163">After tracing is completed, hello tool runs hello diskspd benchmark, if it is selected.</span></span> 

> [!Note]
> <span data-ttu-id="37f66-164">Det här scenariot kan påverka hello system och ska inte köras på ett levande produktionssystem.</span><span class="sxs-lookup"><span data-stu-id="37f66-164">This scenario can affect hello system and shouldn’t be run on a live production system.</span></span> <span data-ttu-id="37f66-165">Om det behövs kör det här scenariot i ett dedicerat Underhåll fönstret tooavoid eventuella problem.</span><span class="sxs-lookup"><span data-stu-id="37f66-165">If necessary, run this scenario in a dedicated maintenance window tooavoid any problems.</span></span> <span data-ttu-id="37f66-166">En ökad belastning som orsakas av ett spårningen eller prestandamått test att sänka hello prestanda på den virtuella datorn.</span><span class="sxs-lookup"><span data-stu-id="37f66-166">An increased workload that is caused by a trace or benchmark test could adversely affect hello performance of your VM.</span></span>
>

## <a name="what-kind-of-information-is-collected-by-hello-script"></a><span data-ttu-id="37f66-167">Vilken typ av information som samlas in av hello skript?</span><span class="sxs-lookup"><span data-stu-id="37f66-167">What kind of information is collected by hello script?</span></span>

<span data-ttu-id="37f66-168">Information om Windows VM, diskar eller lagring pooler konfiguration, prestandaräknare, loggar och olika spårningssessioner samlas in beroende på hello prestanda scenario för:</span><span class="sxs-lookup"><span data-stu-id="37f66-168">Information about Windows VM, disks or storage pools configuration, performance counters, logs and various traces are collected depending on hello performance scenario used:</span></span>

|<span data-ttu-id="37f66-169">Data som samlas in</span><span class="sxs-lookup"><span data-stu-id="37f66-169">Data collected</span></span>                              |  |  | <span data-ttu-id="37f66-170">Scenarier för prestanda</span><span class="sxs-lookup"><span data-stu-id="37f66-170">Performance Scenarios</span></span> |  |  | |
|----------------------------------|----------------------------|------------------------------------|--------------------------|--------------------------------|----------------------|----------------------|
|                              | <span data-ttu-id="37f66-171">Samla in disk konfiguration</span><span class="sxs-lookup"><span data-stu-id="37f66-171">Collect disk Configuration</span></span> | <span data-ttu-id="37f66-172">Prestandamått/lagringsprestanda test</span><span class="sxs-lookup"><span data-stu-id="37f66-172">Benchmark/Storage Performance test</span></span> | <span data-ttu-id="37f66-173">Allmänna VM långsam analys</span><span class="sxs-lookup"><span data-stu-id="37f66-173">General VM Slow analysis</span></span> | <span data-ttu-id="37f66-174">Långsam VM analys- och prestandamått</span><span class="sxs-lookup"><span data-stu-id="37f66-174">VM Slow analysis and benchmark</span></span> | <span data-ttu-id="37f66-175">Azure filer analys</span><span class="sxs-lookup"><span data-stu-id="37f66-175">Azure Files analysis</span></span> | <span data-ttu-id="37f66-176">Anpassad konfiguration</span><span class="sxs-lookup"><span data-stu-id="37f66-176">Custom configuration</span></span> |
| <span data-ttu-id="37f66-177">Information från händelseloggar</span><span class="sxs-lookup"><span data-stu-id="37f66-177">Information from Event logs</span></span>      | <span data-ttu-id="37f66-178">Ja</span><span class="sxs-lookup"><span data-stu-id="37f66-178">Yes</span></span>                        | <span data-ttu-id="37f66-179">Ja</span><span class="sxs-lookup"><span data-stu-id="37f66-179">Yes</span></span>                                | <span data-ttu-id="37f66-180">Ja</span><span class="sxs-lookup"><span data-stu-id="37f66-180">Yes</span></span>                      | <span data-ttu-id="37f66-181">Ja</span><span class="sxs-lookup"><span data-stu-id="37f66-181">Yes</span></span>                            | <span data-ttu-id="37f66-182">Ja</span><span class="sxs-lookup"><span data-stu-id="37f66-182">Yes</span></span>                  | <span data-ttu-id="37f66-183">Ja</span><span class="sxs-lookup"><span data-stu-id="37f66-183">Yes</span></span>                  |
| <span data-ttu-id="37f66-184">Systeminformation</span><span class="sxs-lookup"><span data-stu-id="37f66-184">System information</span></span>               | <span data-ttu-id="37f66-185">Ja</span><span class="sxs-lookup"><span data-stu-id="37f66-185">Yes</span></span>                        | <span data-ttu-id="37f66-186">Ja</span><span class="sxs-lookup"><span data-stu-id="37f66-186">Yes</span></span>                                | <span data-ttu-id="37f66-187">Ja</span><span class="sxs-lookup"><span data-stu-id="37f66-187">Yes</span></span>                      | <span data-ttu-id="37f66-188">Ja</span><span class="sxs-lookup"><span data-stu-id="37f66-188">Yes</span></span>                            | <span data-ttu-id="37f66-189">Ja</span><span class="sxs-lookup"><span data-stu-id="37f66-189">Yes</span></span>                  | <span data-ttu-id="37f66-190">Ja</span><span class="sxs-lookup"><span data-stu-id="37f66-190">Yes</span></span>                  |
| <span data-ttu-id="37f66-191">Volymen karta</span><span class="sxs-lookup"><span data-stu-id="37f66-191">Volume Map</span></span>                       | <span data-ttu-id="37f66-192">Ja</span><span class="sxs-lookup"><span data-stu-id="37f66-192">Yes</span></span>                        | <span data-ttu-id="37f66-193">Ja</span><span class="sxs-lookup"><span data-stu-id="37f66-193">Yes</span></span>                                | <span data-ttu-id="37f66-194">Ja</span><span class="sxs-lookup"><span data-stu-id="37f66-194">Yes</span></span>                      | <span data-ttu-id="37f66-195">Ja</span><span class="sxs-lookup"><span data-stu-id="37f66-195">Yes</span></span>                            | <span data-ttu-id="37f66-196">Ja</span><span class="sxs-lookup"><span data-stu-id="37f66-196">Yes</span></span>                  | <span data-ttu-id="37f66-197">Ja</span><span class="sxs-lookup"><span data-stu-id="37f66-197">Yes</span></span>                  |
| <span data-ttu-id="37f66-198">Disk-karta</span><span class="sxs-lookup"><span data-stu-id="37f66-198">Disk Map</span></span>                         | <span data-ttu-id="37f66-199">Ja</span><span class="sxs-lookup"><span data-stu-id="37f66-199">Yes</span></span>                        | <span data-ttu-id="37f66-200">Ja</span><span class="sxs-lookup"><span data-stu-id="37f66-200">Yes</span></span>                                | <span data-ttu-id="37f66-201">Ja</span><span class="sxs-lookup"><span data-stu-id="37f66-201">Yes</span></span>                      | <span data-ttu-id="37f66-202">Ja</span><span class="sxs-lookup"><span data-stu-id="37f66-202">Yes</span></span>                            | <span data-ttu-id="37f66-203">Ja</span><span class="sxs-lookup"><span data-stu-id="37f66-203">Yes</span></span>                  | <span data-ttu-id="37f66-204">Ja</span><span class="sxs-lookup"><span data-stu-id="37f66-204">Yes</span></span>                  |
| <span data-ttu-id="37f66-205">Aktiviteter som körs</span><span class="sxs-lookup"><span data-stu-id="37f66-205">Running Tasks</span></span>                    | <span data-ttu-id="37f66-206">Ja</span><span class="sxs-lookup"><span data-stu-id="37f66-206">Yes</span></span>                        | <span data-ttu-id="37f66-207">Ja</span><span class="sxs-lookup"><span data-stu-id="37f66-207">Yes</span></span>                                | <span data-ttu-id="37f66-208">Ja</span><span class="sxs-lookup"><span data-stu-id="37f66-208">Yes</span></span>                      | <span data-ttu-id="37f66-209">Ja</span><span class="sxs-lookup"><span data-stu-id="37f66-209">Yes</span></span>                            | <span data-ttu-id="37f66-210">Ja</span><span class="sxs-lookup"><span data-stu-id="37f66-210">Yes</span></span>                  | <span data-ttu-id="37f66-211">Ja</span><span class="sxs-lookup"><span data-stu-id="37f66-211">Yes</span></span>                  |
| <span data-ttu-id="37f66-212">Lagring tillförlitlighet räknare</span><span class="sxs-lookup"><span data-stu-id="37f66-212">Storage Reliability Counters</span></span>     | <span data-ttu-id="37f66-213">Ja</span><span class="sxs-lookup"><span data-stu-id="37f66-213">Yes</span></span>                        | <span data-ttu-id="37f66-214">Ja</span><span class="sxs-lookup"><span data-stu-id="37f66-214">Yes</span></span>                                | <span data-ttu-id="37f66-215">Ja</span><span class="sxs-lookup"><span data-stu-id="37f66-215">Yes</span></span>                      | <span data-ttu-id="37f66-216">Ja</span><span class="sxs-lookup"><span data-stu-id="37f66-216">Yes</span></span>                            | <span data-ttu-id="37f66-217">Ja</span><span class="sxs-lookup"><span data-stu-id="37f66-217">Yes</span></span>                  | <span data-ttu-id="37f66-218">Ja</span><span class="sxs-lookup"><span data-stu-id="37f66-218">Yes</span></span>                  |
| <span data-ttu-id="37f66-219">Storage-informationen</span><span class="sxs-lookup"><span data-stu-id="37f66-219">Storage information</span></span>              | <span data-ttu-id="37f66-220">Ja</span><span class="sxs-lookup"><span data-stu-id="37f66-220">Yes</span></span>                        | <span data-ttu-id="37f66-221">Ja</span><span class="sxs-lookup"><span data-stu-id="37f66-221">Yes</span></span>                                | <span data-ttu-id="37f66-222">Ja</span><span class="sxs-lookup"><span data-stu-id="37f66-222">Yes</span></span>                      | <span data-ttu-id="37f66-223">Ja</span><span class="sxs-lookup"><span data-stu-id="37f66-223">Yes</span></span>                            | <span data-ttu-id="37f66-224">Ja</span><span class="sxs-lookup"><span data-stu-id="37f66-224">Yes</span></span>                  | <span data-ttu-id="37f66-225">Ja</span><span class="sxs-lookup"><span data-stu-id="37f66-225">Yes</span></span>                  |
| <span data-ttu-id="37f66-226">Fsutil utdata</span><span class="sxs-lookup"><span data-stu-id="37f66-226">Fsutil output</span></span>                    | <span data-ttu-id="37f66-227">Ja</span><span class="sxs-lookup"><span data-stu-id="37f66-227">Yes</span></span>                        | <span data-ttu-id="37f66-228">Ja</span><span class="sxs-lookup"><span data-stu-id="37f66-228">Yes</span></span>                                | <span data-ttu-id="37f66-229">Ja</span><span class="sxs-lookup"><span data-stu-id="37f66-229">Yes</span></span>                      | <span data-ttu-id="37f66-230">Ja</span><span class="sxs-lookup"><span data-stu-id="37f66-230">Yes</span></span>                            | <span data-ttu-id="37f66-231">Ja</span><span class="sxs-lookup"><span data-stu-id="37f66-231">Yes</span></span>                  | <span data-ttu-id="37f66-232">Ja</span><span class="sxs-lookup"><span data-stu-id="37f66-232">Yes</span></span>                  |
| <span data-ttu-id="37f66-233">Drivrutinen filterinformationen</span><span class="sxs-lookup"><span data-stu-id="37f66-233">Filter Driver info</span></span>               | <span data-ttu-id="37f66-234">Ja</span><span class="sxs-lookup"><span data-stu-id="37f66-234">Yes</span></span>                        | <span data-ttu-id="37f66-235">Ja</span><span class="sxs-lookup"><span data-stu-id="37f66-235">Yes</span></span>                                | <span data-ttu-id="37f66-236">Ja</span><span class="sxs-lookup"><span data-stu-id="37f66-236">Yes</span></span>                      | <span data-ttu-id="37f66-237">Ja</span><span class="sxs-lookup"><span data-stu-id="37f66-237">Yes</span></span>                            | <span data-ttu-id="37f66-238">Ja</span><span class="sxs-lookup"><span data-stu-id="37f66-238">Yes</span></span>                  | <span data-ttu-id="37f66-239">Ja</span><span class="sxs-lookup"><span data-stu-id="37f66-239">Yes</span></span>                  |
| <span data-ttu-id="37f66-240">Netstat-utdata</span><span class="sxs-lookup"><span data-stu-id="37f66-240">Netstat output</span></span>                   | <span data-ttu-id="37f66-241">Ja</span><span class="sxs-lookup"><span data-stu-id="37f66-241">Yes</span></span>                        | <span data-ttu-id="37f66-242">Ja</span><span class="sxs-lookup"><span data-stu-id="37f66-242">Yes</span></span>                                | <span data-ttu-id="37f66-243">Ja</span><span class="sxs-lookup"><span data-stu-id="37f66-243">Yes</span></span>                      | <span data-ttu-id="37f66-244">Ja</span><span class="sxs-lookup"><span data-stu-id="37f66-244">Yes</span></span>                            | <span data-ttu-id="37f66-245">Ja</span><span class="sxs-lookup"><span data-stu-id="37f66-245">Yes</span></span>                  | <span data-ttu-id="37f66-246">Ja</span><span class="sxs-lookup"><span data-stu-id="37f66-246">Yes</span></span>                  |
| <span data-ttu-id="37f66-247">Nätverkskonfiguration</span><span class="sxs-lookup"><span data-stu-id="37f66-247">Network configuration</span></span>            | <span data-ttu-id="37f66-248">Ja</span><span class="sxs-lookup"><span data-stu-id="37f66-248">Yes</span></span>                        | <span data-ttu-id="37f66-249">Ja</span><span class="sxs-lookup"><span data-stu-id="37f66-249">Yes</span></span>                                | <span data-ttu-id="37f66-250">Ja</span><span class="sxs-lookup"><span data-stu-id="37f66-250">Yes</span></span>                      | <span data-ttu-id="37f66-251">Ja</span><span class="sxs-lookup"><span data-stu-id="37f66-251">Yes</span></span>                            | <span data-ttu-id="37f66-252">Ja</span><span class="sxs-lookup"><span data-stu-id="37f66-252">Yes</span></span>                  | <span data-ttu-id="37f66-253">Ja</span><span class="sxs-lookup"><span data-stu-id="37f66-253">Yes</span></span>                  |
| <span data-ttu-id="37f66-254">Brandväggskonfiguration</span><span class="sxs-lookup"><span data-stu-id="37f66-254">Firewall configuration</span></span>           | <span data-ttu-id="37f66-255">Ja</span><span class="sxs-lookup"><span data-stu-id="37f66-255">Yes</span></span>                        | <span data-ttu-id="37f66-256">Ja</span><span class="sxs-lookup"><span data-stu-id="37f66-256">Yes</span></span>                                | <span data-ttu-id="37f66-257">Ja</span><span class="sxs-lookup"><span data-stu-id="37f66-257">Yes</span></span>                      | <span data-ttu-id="37f66-258">Ja</span><span class="sxs-lookup"><span data-stu-id="37f66-258">Yes</span></span>                            | <span data-ttu-id="37f66-259">Ja</span><span class="sxs-lookup"><span data-stu-id="37f66-259">Yes</span></span>                  | <span data-ttu-id="37f66-260">Ja</span><span class="sxs-lookup"><span data-stu-id="37f66-260">Yes</span></span>                  |
| <span data-ttu-id="37f66-261">Konfiguration av SQL Server</span><span class="sxs-lookup"><span data-stu-id="37f66-261">SQL Server configuration</span></span>         | <span data-ttu-id="37f66-262">Ja</span><span class="sxs-lookup"><span data-stu-id="37f66-262">Yes</span></span>                        | <span data-ttu-id="37f66-263">Ja</span><span class="sxs-lookup"><span data-stu-id="37f66-263">Yes</span></span>                                | <span data-ttu-id="37f66-264">Ja</span><span class="sxs-lookup"><span data-stu-id="37f66-264">Yes</span></span>                      | <span data-ttu-id="37f66-265">Ja</span><span class="sxs-lookup"><span data-stu-id="37f66-265">Yes</span></span>                            | <span data-ttu-id="37f66-266">Ja</span><span class="sxs-lookup"><span data-stu-id="37f66-266">Yes</span></span>                  | <span data-ttu-id="37f66-267">Ja</span><span class="sxs-lookup"><span data-stu-id="37f66-267">Yes</span></span>                  |
| <span data-ttu-id="37f66-268">Prestanda diagnostik spårningar *</span><span class="sxs-lookup"><span data-stu-id="37f66-268">Performance Diagnostics Traces *</span></span> |                            |                                    | <span data-ttu-id="37f66-269">Ja</span><span class="sxs-lookup"><span data-stu-id="37f66-269">Yes</span></span>                      |                                |                      | <span data-ttu-id="37f66-270">Ja</span><span class="sxs-lookup"><span data-stu-id="37f66-270">Yes</span></span>                  |
| <span data-ttu-id="37f66-271">Prestandaräknaren Trace **</span><span class="sxs-lookup"><span data-stu-id="37f66-271">Performance counter Trace **</span></span>     |                            |                                    |                          |                                |                      | <span data-ttu-id="37f66-272">Ja</span><span class="sxs-lookup"><span data-stu-id="37f66-272">Yes</span></span>                  |
| <span data-ttu-id="37f66-273">SMB-räknaren Trace **</span><span class="sxs-lookup"><span data-stu-id="37f66-273">SMB counter Trace **</span></span>             |                            |                                    |                          |                                | <span data-ttu-id="37f66-274">Ja</span><span class="sxs-lookup"><span data-stu-id="37f66-274">Yes</span></span>                  |                      |
| <span data-ttu-id="37f66-275">SQL Server-räknaren Trace **</span><span class="sxs-lookup"><span data-stu-id="37f66-275">SQL Server counter Trace **</span></span>      |                            |                                    |                          |                                |                      | <span data-ttu-id="37f66-276">Ja</span><span class="sxs-lookup"><span data-stu-id="37f66-276">Yes</span></span>                  |
| <span data-ttu-id="37f66-277">XPerf spårning</span><span class="sxs-lookup"><span data-stu-id="37f66-277">XPerf Trace</span></span>                      |                            |                                    |                          |                                |                      | <span data-ttu-id="37f66-278">Ja</span><span class="sxs-lookup"><span data-stu-id="37f66-278">Yes</span></span>                  |
| <span data-ttu-id="37f66-279">StorPort-spårning</span><span class="sxs-lookup"><span data-stu-id="37f66-279">StorPort Trace</span></span>                   |                            |                                    |                          |                                |                      | <span data-ttu-id="37f66-280">Ja</span><span class="sxs-lookup"><span data-stu-id="37f66-280">Yes</span></span>                  |
| <span data-ttu-id="37f66-281">Spårning i nätverket</span><span class="sxs-lookup"><span data-stu-id="37f66-281">Network Trace</span></span>                    |                            |                                    |                          |                                | <span data-ttu-id="37f66-282">Ja</span><span class="sxs-lookup"><span data-stu-id="37f66-282">Yes</span></span>                  | <span data-ttu-id="37f66-283">Ja</span><span class="sxs-lookup"><span data-stu-id="37f66-283">Yes</span></span>                  |
| <span data-ttu-id="37f66-284">Diskspd Benchmark trace ***</span><span class="sxs-lookup"><span data-stu-id="37f66-284">Diskspd Benchmark trace ***</span></span>      |                            | <span data-ttu-id="37f66-285">Ja</span><span class="sxs-lookup"><span data-stu-id="37f66-285">Yes</span></span>                                |                          | <span data-ttu-id="37f66-286">Ja</span><span class="sxs-lookup"><span data-stu-id="37f66-286">Yes</span></span>                            |                      |                      |
|       |                            |                         |                                                   |                      |                      |

### <a name="performance-diagnostics-trace-"></a><span data-ttu-id="37f66-287">Prestanda diagnostik trace (*)</span><span class="sxs-lookup"><span data-stu-id="37f66-287">Performance Diagnostics trace (*)</span></span>

<span data-ttu-id="37f66-288">Kör en regelbaserad motor i hello toocollect bakgrundsinformation och diagnostisera pågående prestandaproblem.</span><span class="sxs-lookup"><span data-stu-id="37f66-288">Runs a rule-based engine in hello background toocollect data and diagnose ongoing performance issues.</span></span> <span data-ttu-id="37f66-289">Följande regler hello stöds:</span><span class="sxs-lookup"><span data-stu-id="37f66-289">hello following rules are currently supported:</span></span>

- <span data-ttu-id="37f66-290">HighCpuUsage regel: identifierar perioder med hög CPU-användning och visar hello högsta CPU användning konsumenter under dessa punkter.</span><span class="sxs-lookup"><span data-stu-id="37f66-290">HighCpuUsage rule: Detects high CPU usage periods and shows hello top CPU usage consumers during those periods.</span></span>
- <span data-ttu-id="37f66-291">HighDiskUsage regel: identifierar ett högt användning punkter på fysiska diskar och visar hello högsta disk användning konsumenter under dessa punkter.</span><span class="sxs-lookup"><span data-stu-id="37f66-291">HighDiskUsage rule: Detects high disk usage periods on physical disks and shows hello top disk usage consumers during those periods.</span></span>
- <span data-ttu-id="37f66-292">HighResolutionDiskMetric regel: Visar IOPS, genomflöde och mått för i/o-svarstid per 50 tid i millisekunder för varje fysisk disk.</span><span class="sxs-lookup"><span data-stu-id="37f66-292">HighResolutionDiskMetric rule: Shows IOPS, throughput and IO latency metrics per 50 milliseconds for each physical disk.</span></span> <span data-ttu-id="37f66-293">Det hjälper tooquickly identifiera disken begränsning punkter.</span><span class="sxs-lookup"><span data-stu-id="37f66-293">It helps tooquickly identify disk throttling periods.</span></span>
- <span data-ttu-id="37f66-294">HighMemoryUsage regel: identifierar höga minnesområdet användning punkter och visar hello övre minne användning konsumenter under dessa punkter.</span><span class="sxs-lookup"><span data-stu-id="37f66-294">HighMemoryUsage rule: Detects high memory usage periods, and shows hello top memory usage consumers during those periods.</span></span>

> [!NOTE] 
> <span data-ttu-id="37f66-295">För närvarande stöds Windows-versioner som innehåller hello .NET Framework 3.5 eller senare versioner.</span><span class="sxs-lookup"><span data-stu-id="37f66-295">Currently, Windows versions that include hello .NET Framework 3.5 or later versions are supported.</span></span>

### <a name="performance-counter-trace-"></a><span data-ttu-id="37f66-296">Prestandaräknaren trace (*)</span><span class="sxs-lookup"><span data-stu-id="37f66-296">Performance Counter trace (**)</span></span>

<span data-ttu-id="37f66-297">Samlar in hello följande prestandaräknare:</span><span class="sxs-lookup"><span data-stu-id="37f66-297">Collects hello following Performance Counters:</span></span>

- <span data-ttu-id="37f66-298">\Process, \Processor, \Memory, \Thread, \PhysicalDisk, \LogicalDisk</span><span class="sxs-lookup"><span data-stu-id="37f66-298">\Process, \Processor, \Memory, \Thread, \PhysicalDisk, \LogicalDisk</span></span>
- <span data-ttu-id="37f66-299">\Cache\Dirty sidor, \Cache\Lazy tömningar/s, \Server\Pool växlingsbart systemminne, fel, \Server\Pool växlingsbart systemminne-fel</span><span class="sxs-lookup"><span data-stu-id="37f66-299">\Cache\Dirty Pages, \Cache\Lazy Write Flushes/sec, \Server\Pool Nonpaged, Failures, \Server\Pool Paged Failures</span></span>
- <span data-ttu-id="37f66-300">Valda räknare under \Network gränssnitt, \IPv4\Datagrams, \IPv6\Datagrams, \TCPv4\Segments, \TCPv6\Segments, \Network nätverkskort, \WFPv4\Packets, \WFPv6\Packets, \UDPv4\Datagrams, \UDPv6\Datagrams, \TCPv4\Connection, \TCPv6\Connection, \Network QoS Policy\Packets, \Per Network Interface Card processoraktivitet, \Microsoft Winsock BSP</span><span class="sxs-lookup"><span data-stu-id="37f66-300">Selected counters under \Network Interface, \IPv4\Datagrams, \IPv6\Datagrams, \TCPv4\Segments, \TCPv6\Segments,  \Network Adapter, \WFPv4\Packets, \WFPv6\Packets, \UDPv4\Datagrams, \UDPv6\Datagrams, \TCPv4\Connection, \TCPv6\Connection, \Network QoS Policy\Packets, \Per Processor Network Interface Card Activity, \Microsoft Winsock BSP</span></span>

#### <a name="for-sql-server-instances"></a><span data-ttu-id="37f66-301">För SQL Server-instanser</span><span class="sxs-lookup"><span data-stu-id="37f66-301">For SQL Server instances</span></span>
- <span data-ttu-id="37f66-302">\SQL server: bufferthanteraren, \SQLServer:Resource Pool statistik, \SQLServer:SQL Statistics\\</span><span class="sxs-lookup"><span data-stu-id="37f66-302">\SQL Server:Buffer Manager, \SQLServer:Resource Pool Stats, \SQLServer:SQL Statistics\\</span></span>
- <span data-ttu-id="37f66-303">\SQLServer:locks \SQLServer:General statistik</span><span class="sxs-lookup"><span data-stu-id="37f66-303">\SQLServer:Locks, \SQLServer:General, Statistics</span></span>
- <span data-ttu-id="37f66-304">\SQLServer:Access metoder</span><span class="sxs-lookup"><span data-stu-id="37f66-304">\SQLServer:Access Methods</span></span>

#### <a name="for-azure-files"></a><span data-ttu-id="37f66-305">För Azure-filer</span><span class="sxs-lookup"><span data-stu-id="37f66-305">For Azure Files</span></span>
<span data-ttu-id="37f66-306">\SMB Klientresurser</span><span class="sxs-lookup"><span data-stu-id="37f66-306">\SMB Client Shares</span></span>

### <a name="diskspd-benchmark-trace-"></a><span data-ttu-id="37f66-307">Diskspd Benchmark-spårning (*)</span><span class="sxs-lookup"><span data-stu-id="37f66-307">Diskspd Benchmark trace (***)</span></span>
<span data-ttu-id="37f66-308">Diskspd-i/o arbetsbelastning tester [OS-disken (write) och pool-enheter (läsa/skriva)]</span><span class="sxs-lookup"><span data-stu-id="37f66-308">Diskspd IO workload tests [OS Disk (write) and pool drives (read/write)]</span></span>

## <a name="run-hello-perfinsights-on-your-vm"></a><span data-ttu-id="37f66-309">Kör hello PerfInsights på den virtuella datorn</span><span class="sxs-lookup"><span data-stu-id="37f66-309">Run hello PerfInsights on your VM</span></span>

### <a name="what-do-i-have-tooknow-before-i-run-hello-script"></a><span data-ttu-id="37f66-310">Vad har jag tooknow innan jag kör hello skript?</span><span class="sxs-lookup"><span data-stu-id="37f66-310">What do I have tooknow before I run hello script?</span></span> 

<span data-ttu-id="37f66-311">**Skriptkrav för**</span><span class="sxs-lookup"><span data-stu-id="37f66-311">**Script requirements**</span></span>

1.  <span data-ttu-id="37f66-312">Det här skriptet måste köras på hello VM som har hello prestandaproblem.</span><span class="sxs-lookup"><span data-stu-id="37f66-312">This script must be run on hello VM that has hello performance issue.</span></span> 

2.  <span data-ttu-id="37f66-313">hello stöds följande operativsystem: Windows Server 2008 R2, 2012, 2012 R2, 2016; Windows 8.1 och Windows 10.</span><span class="sxs-lookup"><span data-stu-id="37f66-313">hello following OSes are supported: Windows Server 2008 R2, 2012, 2012 R2, 2016; Windows 8.1 and Windows 10.</span></span>

<span data-ttu-id="37f66-314">**Möjliga problem när du kör skriptet hello på produktion virtuella datorer:**</span><span class="sxs-lookup"><span data-stu-id="37f66-314">**Possible issues when you run hello script on production VMs:**</span></span>

1.  <span data-ttu-id="37f66-315">hello skript kan hello prestanda försämras av hello VM när den används tillsammans med hello ”Benchmark” eller ”anpassad” scenario som har konfigurerats med hjälp av XPerf eller DiskSpd.</span><span class="sxs-lookup"><span data-stu-id="37f66-315">hello script might adversely affect hello performance of hello VM when it is used together with hello "Benchmark" or "Custom" scenario that is configured by using XPerf or DiskSpd.</span></span> <span data-ttu-id="37f66-316">Var försiktig när du kör hello skript i en produktionsmiljö.</span><span class="sxs-lookup"><span data-stu-id="37f66-316">Be careful when you run hello script in a production environment.</span></span>

2.  <span data-ttu-id="37f66-317">När du använder skriptet hello tillsammans med hello ”Benchmark” eller ”anpassad” scenario som konfigureras med hjälp av DiskSpd, se till att inga andra bakgrundsaktivitet stör hello i/o-arbetsbelastning på hello testas diskar.</span><span class="sxs-lookup"><span data-stu-id="37f66-317">When you use hello script together with hello "Benchmark" or "Custom" scenario that is configured by using DiskSpd, make sure that no other background activity interferes with hello I/O workload on hello tested disks.</span></span>

3.  <span data-ttu-id="37f66-318">Som standard använder hello skript hello tillfällig lagring enhet toocollect data.</span><span class="sxs-lookup"><span data-stu-id="37f66-318">By default, hello script uses hello temporary storage drive toocollect data.</span></span> <span data-ttu-id="37f66-319">Om spårning förblir aktiverad under en längre tid, kanske hello mängden data som samlas in relevanta.</span><span class="sxs-lookup"><span data-stu-id="37f66-319">If tracing stays enabled for a longer time, hello amount of data that is collected might be relevant.</span></span> <span data-ttu-id="37f66-320">Detta kan minska hello tillgänglighet utrymme på hello diskutrymme, därför påverkar alla program som förlitar sig på den här enheten.</span><span class="sxs-lookup"><span data-stu-id="37f66-320">This can reduce hello availability of space on hello temporary disk, therefore affecting any application that relies on this drive.</span></span>

### <a name="how-do-i-run-perfinsights"></a><span data-ttu-id="37f66-321">Hur kör PerfInsights?</span><span class="sxs-lookup"><span data-stu-id="37f66-321">How do I run PerfInsights?</span></span> 

<span data-ttu-id="37f66-322">toorun Hej skript, gör du följande:</span><span class="sxs-lookup"><span data-stu-id="37f66-322">toorun hello script, follow these steps:</span></span>

1. <span data-ttu-id="37f66-323">Hämta [PerfInsights.zip](http://aka.ms/perfinsightsdownload).</span><span class="sxs-lookup"><span data-stu-id="37f66-323">Download [PerfInsights.zip](http://aka.ms/perfinsightsdownload).</span></span>

2. <span data-ttu-id="37f66-324">Avblockera hello PerfInsights.zip fil.</span><span class="sxs-lookup"><span data-stu-id="37f66-324">Unblock hello PerfInsights.zip file.</span></span> <span data-ttu-id="37f66-325">toodo, högerklicka på hello PerfInsights.zip filen genom att välja **egenskaper**.</span><span class="sxs-lookup"><span data-stu-id="37f66-325">toodo this, right-click hello PerfInsights.zip file, select **Properties**.</span></span> <span data-ttu-id="37f66-326">I hello **allmänna** väljer **avblockera** och välj sedan **OK**.</span><span class="sxs-lookup"><span data-stu-id="37f66-326">In hello **General** tab, select **Unblock** and then select **OK**.</span></span> <span data-ttu-id="37f66-327">Detta säkerställer att hello skriptet körs utan några ytterligare säkerhetsmeddelanden.</span><span class="sxs-lookup"><span data-stu-id="37f66-327">This will make sure that hello script runs without any additional security prompts.</span></span>  

    ![Låsa upp hello zip-filen](media/how-to-use-perfInsights/unlock-file.png)

3.  <span data-ttu-id="37f66-329">Expandera hello komprimerade PerfInsights.zip fil i tillfälliga enheten (som standard, vanligen hello D enhet).</span><span class="sxs-lookup"><span data-stu-id="37f66-329">Expand hello compressed PerfInsights.zip file into your temporary drive (by default, usually hello D drive).</span></span> <span data-ttu-id="37f66-330">hello komprimerade filen ska innehålla hello följande filer och mappar:</span><span class="sxs-lookup"><span data-stu-id="37f66-330">hello compressed file should contain hello following files and folders:</span></span>

    ![filer i hello komprimerad mapp](media/how-to-use-perfInsights/file-folder.png)

4.  <span data-ttu-id="37f66-332">Öppna Windows PowerShell som administratör och kör sedan hello PerfInsights.ps1 skript.</span><span class="sxs-lookup"><span data-stu-id="37f66-332">Open Windows PowerShell as an administrator, and then run hello PerfInsights.ps1 script.</span></span>

    ```
    cd <hello path of PerfInsights folder >
    Powershell.exe -ExecutionPolicy UnRestricted -NoProfile -File .\\PerfInsights.ps1
    ```

    <span data-ttu-id="37f66-333">Du måste kanske tooenter ”y” tooif du tillfrågas om tooconfirm att toochange hello körningsprincipen.</span><span class="sxs-lookup"><span data-stu-id="37f66-333">You might have tooenter "y" tooif you are asked tooconfirm that you want toochange hello execution policy.</span></span>

    <span data-ttu-id="37f66-334">I dialogrutan för hello friskrivning ges hello alternativet tooshare diagnostikinformation med Microsoft-supporten.</span><span class="sxs-lookup"><span data-stu-id="37f66-334">In hello Disclaimer dialog box, you are given hello option tooshare diagnostic information with Microsoft Support.</span></span> <span data-ttu-id="37f66-335">Du måste också godkänna toohello license avtal toocontinue.</span><span class="sxs-lookup"><span data-stu-id="37f66-335">You must also consent toohello license agreement toocontinue.</span></span> <span data-ttu-id="37f66-336">Gör dina val och klicka sedan på **kör skriptet**.</span><span class="sxs-lookup"><span data-stu-id="37f66-336">Make your selections, and then click **Run Script**.</span></span>

    ![FRISKRIVNING rutan](media/how-to-use-perfInsights/disclaimer.png)

5.  <span data-ttu-id="37f66-338">Skicka hello case nummer, om den är tillgänglig när du kör hello-skript (det är vår statistiska).</span><span class="sxs-lookup"><span data-stu-id="37f66-338">Submit hello case number, if it is available, when you run hello script (This is for our statistics).</span></span> <span data-ttu-id="37f66-339">Klicka på **OK**.</span><span class="sxs-lookup"><span data-stu-id="37f66-339">Then, click **OK**.</span></span>
    
    ![Ange support-ID](media/how-to-use-perfInsights/enter-support-number.png)

6.  <span data-ttu-id="37f66-341">Välj enheten tillfällig lagring.</span><span class="sxs-lookup"><span data-stu-id="37f66-341">Select your temporary storage drive.</span></span> <span data-ttu-id="37f66-342">hello skript kan automatisk identifiering hello enhetsbeteckningen för hello enhet.</span><span class="sxs-lookup"><span data-stu-id="37f66-342">hello Script can auto-detect hello drive letter of hello drive.</span></span> <span data-ttu-id="37f66-343">Om problem uppstår i det här skedet kan du kanske uppmanas tooselect hello enhet (hello Standardenheten är D).</span><span class="sxs-lookup"><span data-stu-id="37f66-343">If any problems occur in this stage, you might be prompted tooselect hello drive (hello default drive is D).</span></span> <span data-ttu-id="37f66-344">Genererade loggar lagras här i loggen för hello\_samlingsmapp.</span><span class="sxs-lookup"><span data-stu-id="37f66-344">Generated logs are stored here in hello log\_collection folder.</span></span> <span data-ttu-id="37f66-345">När du registrerar eller acceptera hello enhetsbeteckning, klickar du på **OK**.</span><span class="sxs-lookup"><span data-stu-id="37f66-345">After you enter or accept hello drive letter, click **OK**.</span></span>

    ![Ange enhet](media/how-to-use-perfInsights/enter-drive.png)

7.  <span data-ttu-id="37f66-347">Välj ett scenario med felsökning hello tillhandahålls lista.</span><span class="sxs-lookup"><span data-stu-id="37f66-347">Select a troubleshooting scenario from hello provided list.</span></span>

       ![Välj supportscenarier](media/how-to-use-perfInsights/select-scenarios.png)

8.  <span data-ttu-id="37f66-349">Du kan också köra PerfInsights utan användargränssnitt.</span><span class="sxs-lookup"><span data-stu-id="37f66-349">You can also run PerfInsights without UI.</span></span>

    <span data-ttu-id="37f66-350">hello följande kommandot körs hello ”Allmänt VM långsam analys” felsökning scenariot utan en UI-kommandotolk eller samla in data i 30 sekunder.</span><span class="sxs-lookup"><span data-stu-id="37f66-350">hello following command runs hello "General VM Slow analysis" troubleshooting scenario without a UI prompt or capture data for 30 seconds.</span></span> <span data-ttu-id="37f66-351">Ombeds du tooconsent toohello samma friskrivning och LICENSAVTALET som nämns i steg 4.</span><span class="sxs-lookup"><span data-stu-id="37f66-351">It prompts you tooconsent toohello same disclaimer and EULA that  are mentioned in step 4.</span></span>

        powershell.exe -ExecutionPolicy UnRestricted -NoProfile -Command ".\\PerfInsights.ps1 -NoGui -Scenario vmslow -TracingDuration 30"

    <span data-ttu-id="37f66-352">Om du vill PerfInsights toorun i tyst läge använder den **- AcceptDisclaimerAndShareDiagnostics** parameter.</span><span class="sxs-lookup"><span data-stu-id="37f66-352">If you want PerfInsights toorun in silent mode, use the **-AcceptDisclaimerAndShareDiagnostics** parameter.</span></span> <span data-ttu-id="37f66-353">Till exempel använda hello följande kommando:</span><span class="sxs-lookup"><span data-stu-id="37f66-353">For example, use hello following command:</span></span>

        powershell.exe -ExecutionPolicy UnRestricted -NoProfile -Command ".\\PerfInsights.ps1 -NoGui -Scenario vmslow -TracingDuration 30 -AcceptDisclaimerAndShareDiagnostics"

### <a name="how-do-i-troubleshoot-issues-while-running-hello-script"></a><span data-ttu-id="37f66-354">Hur felsöker problem när du kör skriptet hello?</span><span class="sxs-lookup"><span data-stu-id="37f66-354">How do I troubleshoot issues while running hello script?</span></span>

<span data-ttu-id="37f66-355">Om hello skriptet avslutas onormalt, kan du rensa ett inkonsekvent tillstånd genom att köra skript hello tillsammans med hello - rensning växel, enligt följande:</span><span class="sxs-lookup"><span data-stu-id="37f66-355">If hello script terminates abnormally, you can clean up an inconsistent state by running hello script together with hello -Cleanup switch, as follows:</span></span>

    powershell.exe -ExecutionPolicy UnRestricted -NoProfile -Command ".\\PerfInsights.ps1 -Cleanup"

<span data-ttu-id="37f66-356">Om eventuella problem uppstår under hello automatisk identifiering av temporär hello-enhet kan du kanske uppmanas tooselect hello enhet (hello Standardenheten är D).</span><span class="sxs-lookup"><span data-stu-id="37f66-356">If any problems occur during hello automatic detection of hello temporary drive, you might be prompted tooselect hello drive (hello default drive is D).</span></span>

![Ange enhet](media/how-to-use-perfInsights/enter-drive.png)

<span data-ttu-id="37f66-358">hello skript avinstallerar hello verktyg och tar bort temporära mappar.</span><span class="sxs-lookup"><span data-stu-id="37f66-358">hello script uninstalls hello utility tools and removes temporary folders.</span></span>

### <a name="troubleshooting-other-script-issues"></a><span data-ttu-id="37f66-359">Felsökning av problem med andra skript</span><span class="sxs-lookup"><span data-stu-id="37f66-359">Troubleshooting other script issues</span></span> 

<span data-ttu-id="37f66-360">Tryck på Ctrl + C toointerrupt hello skriptkörningen om eventuella problem uppstår när du kör skriptet hello.</span><span class="sxs-lookup"><span data-stu-id="37f66-360">If any problems occur when you run hello script, press Ctrl+C toointerrupt hello script execution.</span></span> <span data-ttu-id="37f66-361">tooremove temporära objekt, i avsnittet hello ”Rensa efter onormal avslutning”.</span><span class="sxs-lookup"><span data-stu-id="37f66-361">tooremove temporary objects, see hello "Clean up after abnormal termination" section.</span></span>

<span data-ttu-id="37f66-362">Om du fortsätter tooexperience skript fel trots flera försök, rekommenderar vi att du kör hello skript i ”felsökningsläge” med hjälp av hello ”-Debug” parametern alternativet vid start.</span><span class="sxs-lookup"><span data-stu-id="37f66-362">If you continue tooexperience script failure even after several attempts, we recommend that you run hello script in "debug mode" by using hello "-Debug" parameter option on startup.</span></span>

<span data-ttu-id="37f66-363">När hello fel inträffar, kopiera hello full utgående hello PowerShell-konsolen och skicka den toohello Microsoft Support-agent som hjälper dig felsöka toohelp hello problem.</span><span class="sxs-lookup"><span data-stu-id="37f66-363">After hello failure occurs, copy hello full output of hello PowerShell console, and send it toohello Microsoft Support agent who is assisting you toohelp troubleshoot hello problem.</span></span>

### <a name="how-do-i-run-hello-script-in-custom-configuration-mode"></a><span data-ttu-id="37f66-364">Hur kör hello skript i läget för anpassad konfiguration?</span><span class="sxs-lookup"><span data-stu-id="37f66-364">How do I run hello script in custom configuration mode?</span></span>

<span data-ttu-id="37f66-365">Genom att välja hello **anpassad** konfiguration, kan du aktivera flera spårningar parallellt (Använd SKIFT toomulti – Välj):</span><span class="sxs-lookup"><span data-stu-id="37f66-365">By selecting hello **Custom** configuration, you can enable several traces in parallel (use Shift toomulti-select):</span></span>

![Välj scenarier](media/how-to-use-perfInsights/select-scenario.png)

<span data-ttu-id="37f66-367">När du väljer hello Prestandadiagnostik prestandaräknaren Trace XPerf spårning, spårning i nätverket eller Storport Trace scenarier, följer du anvisningarna hello i hello dialogrutor och försök tooreproduce hello problemet med långsamma prestanda när du har startat hello spårningar.</span><span class="sxs-lookup"><span data-stu-id="37f66-367">When you select hello Performance Diagnostics, Performance Counter Trace, XPerf Trace, Network Trace, or Storport Trace scenarios, follow hello instructions in hello dialog boxes, and try tooreproduce hello slow performance issue after you start hello traces.</span></span>

<span data-ttu-id="37f66-368">hello följande dialogrutan kan du starta en spårning:</span><span class="sxs-lookup"><span data-stu-id="37f66-368">hello following dialog box lets you start a trace:</span></span>

![Starta spårning](media/how-to-use-perfInsights/start-trace-message.png)

<span data-ttu-id="37f66-370">toostop hello spårning, har du tooconfirm hello kommandot i en andra dialogruta.</span><span class="sxs-lookup"><span data-stu-id="37f66-370">toostop hello traces, you have tooconfirm hello command in a second dialog box.</span></span>

<span data-ttu-id="37f66-371">![Stoppa spårning](media/how-to-use-perfInsights/stop-trace-message.png)
![Stoppa spårning](media/how-to-use-perfInsights/ok-trace-message.png)</span><span class="sxs-lookup"><span data-stu-id="37f66-371">![stop-trace](media/how-to-use-perfInsights/stop-trace-message.png)
![stop-trace](media/how-to-use-perfInsights/ok-trace-message.png)</span></span>

<span data-ttu-id="37f66-372">När Hej spårningar eller åtgärder har slutförts, skapas en ny fil i D:\\loggen\_samling (eller hello temporärkatalog) som heter **CollectedData\_åååå-MM-dd\_hh\_mm \_ss.zip.**</span><span class="sxs-lookup"><span data-stu-id="37f66-372">When hello traces or operations are completed, a new file is generated in D:\\log\_collection (or hello temporary drive) that is named **CollectedData\_yyyy-MM-dd\_hh\_mm\_ss.zip.**</span></span> <span data-ttu-id="37f66-373">Du kan skicka den här filen toohello stöd agenten för analys.</span><span class="sxs-lookup"><span data-stu-id="37f66-373">You can send this file toohello Support agent for analysis.</span></span>

## <a name="review-hello-diagnostics-report-created-by-perfinsights"></a><span data-ttu-id="37f66-374">Granska hello diagnostik rapporten som skapas av PerfInsights</span><span class="sxs-lookup"><span data-stu-id="37f66-374">Review hello diagnostics report created by PerfInsights</span></span>

<span data-ttu-id="37f66-375">Inom hello **CollectedData\_åååå-MM-dd\_hh\_mm\_ss.zip filen** som genereras av PerfInsights, kan du hitta en HTML-rapport som beskriver hello resultaten av PerfInsights.</span><span class="sxs-lookup"><span data-stu-id="37f66-375">Within hello **CollectedData\_yyyy-MM-dd\_hh\_mm\_ss.zip file,** that is generated by PerfInsights, you can find an HTML report that details hello findings of PerfInsights.</span></span> <span data-ttu-id="37f66-376">tooreview hello rapporten, expandera hello **CollectedData\_åååå-MM-dd\_hh\_mm\_ss.zip** fil och sedan öppnar hello **PerfInsights Report.html**fil.</span><span class="sxs-lookup"><span data-stu-id="37f66-376">tooreview hello report, expand hello **CollectedData\_yyyy-MM-dd\_hh\_mm\_ss.zip** file, and then open hello **PerfInsights Report.html** file.</span></span>

<span data-ttu-id="37f66-377">Välj hello **resultaten** fliken.</span><span class="sxs-lookup"><span data-stu-id="37f66-377">Select hello **Findings** tab.</span></span>

![fliken Sök](media/how-to-use-perfInsights/findingtab.png)

<span data-ttu-id="37f66-379">**Anteckningar**</span><span class="sxs-lookup"><span data-stu-id="37f66-379">**Notes**</span></span>

-   <span data-ttu-id="37f66-380">Meddelanden i rött kända konfigurationsproblem som kan orsaka prestandaproblem.</span><span class="sxs-lookup"><span data-stu-id="37f66-380">Messages in red are known configuration issues that may cause performance issues.</span></span>

-   <span data-ttu-id="37f66-381">Meddelanden i gult är varningar som representerar icke-optimal konfigurationer som inte nödvändigtvis orsakar prestandaproblem.</span><span class="sxs-lookup"><span data-stu-id="37f66-381">Messages in yellow are warnings that represent non-optimal configurations that do not necessarily cause performance issues.</span></span>

-   <span data-ttu-id="37f66-382">Meddelanden i blått är informativa instruktioner.</span><span class="sxs-lookup"><span data-stu-id="37f66-382">Messages in blue are informative statements only.</span></span>

<span data-ttu-id="37f66-383">Granska hello http-länkar för alla felmeddelanden i rött tooget mer detaljerad information om hello resultat och hur de påverkar hello prestanda eller bästa praxis för prestanda-optimerad konfigurationer.</span><span class="sxs-lookup"><span data-stu-id="37f66-383">Review hello HTTP links for all error messages in red tooget more detailed information about hello findings and how they can affect hello performance or best practices for performance-optimized configurations.</span></span>

### <a name="disk-configuration-tab"></a><span data-ttu-id="37f66-384">Fliken för konfiguration av disk</span><span class="sxs-lookup"><span data-stu-id="37f66-384">Disk Configuration Tab</span></span>

<span data-ttu-id="37f66-385">Hej **översikt** avsnitt visar olika vyer av hello lagringskonfiguration, inklusive information från Diskpart och lagringsutrymmen</span><span class="sxs-lookup"><span data-stu-id="37f66-385">hello **Overview** section displays different views of hello storage configuration, including information from Diskpart and Storage Spaces</span></span>

<span data-ttu-id="37f66-386">Hej **DiskMap** och **VolumeMap** avsnitt beskrivs på ett dubbla perspektiv logiska volymer och fysiska diskar är andra relaterade tooeach.</span><span class="sxs-lookup"><span data-stu-id="37f66-386">hello **DiskMap** and **VolumeMap** sections describe on a dual perspective how logical volumes and physical disks are related tooeach other.</span></span>

<span data-ttu-id="37f66-387">I hello PhysicalDisk perspektiv (DiskMap) visas hello i tabellen alla logiska volymer som körs på hello disk.</span><span class="sxs-lookup"><span data-stu-id="37f66-387">In hello PhysicalDisk perspective (DiskMap), hello table shows all logical volumes that are running on hello disk.</span></span> <span data-ttu-id="37f66-388">I följande exempel hello, körs PhysicalDrive2 2 logiska volymer som har skapats på flera partitioner (J och H):</span><span class="sxs-lookup"><span data-stu-id="37f66-388">In hello following example, PhysicalDrive2 runs 2 Logical Volumes created on multiple partitions (J and H):</span></span>

![datafliken](media/how-to-use-perfInsights/disktab.png)

<span data-ttu-id="37f66-390">I hello volym perspektiv (*VolumeMap*), hello tabeller visar alla hello fysiska diskar under varje logisk volym.</span><span class="sxs-lookup"><span data-stu-id="37f66-390">In hello Volume perspective (*VolumeMap*), hello tables show all hello physical disks under each logical volume.</span></span> <span data-ttu-id="37f66-391">Observera att du kan köra en logisk volym på flera fysiska diskar för RAID/dynamiska diskar.</span><span class="sxs-lookup"><span data-stu-id="37f66-391">Notice that for RAID/Dynamic disks, you might run a logical volume upon multiple physical disks.</span></span> <span data-ttu-id="37f66-392">I följande exempel hello *C:\\montera* är en monteringspunkt som konfigurerats som *SpannedDisk* på PhysicalDisks \#2 och \#3:</span><span class="sxs-lookup"><span data-stu-id="37f66-392">In hello following sample *C:\\mount* is a mountpoint configured as *SpannedDisk* on PhysicalDisks \#2 and \#3:</span></span>

![fliken volym](media/how-to-use-perfInsights/volumetab.png)

### <a name="sql-server-tab"></a><span data-ttu-id="37f66-394">SQL Server-fliken</span><span class="sxs-lookup"><span data-stu-id="37f66-394">SQL Server tab</span></span>

<span data-ttu-id="37f66-395">Om hello mål VM är värd för SQL Server-instanser, visas ytterligare en flik i hello-rapport som heter **SQL Server**:</span><span class="sxs-lookup"><span data-stu-id="37f66-395">If hello target VM hosts any SQL Server instances, you will see an additional tab in hello report that is named **SQL Server**:</span></span>

![SQL-fliken](media/how-to-use-perfInsights/sqltab.png)

<span data-ttu-id="37f66-397">Det här avsnittet innehåller en ”översikt” och ytterligare sub flikar för varje hello SQL Server-instanser som finns på hello VM.</span><span class="sxs-lookup"><span data-stu-id="37f66-397">This section contains an "Overview" and additional sub tabs for each of hello SQL Server instances hosted on hello VM.</span></span>

<span data-ttu-id="37f66-398">Hej ”Overview” avsnittet innehåller en användbar tabell som sammanfattar alla hello fysiska diskar (system- och datadiskar) som körs och som innehåller en blandning av datafiler och transaktionsloggfiler.</span><span class="sxs-lookup"><span data-stu-id="37f66-398">hello "Overview" section contains a helpful table that summarizes all hello physical disks (system and data disks) that are running and that contain a mixture of data files and transaction log files.</span></span>

<span data-ttu-id="37f66-399">I följande exempel hello *PhysicalDrive0* (som kör hello C-enheten) visas eftersom både hello *modeldev* och *modellog* filerna på hello C-enheten och de är av olika typer (till exempel datafilen och transaktionsloggen, respektive):</span><span class="sxs-lookup"><span data-stu-id="37f66-399">In hello following example, *PhysicalDrive0* (running hello C drive) is displayed because both hello *modeldev* and *modellog* files are located on hello C drive, and they are of different types (such as Data File and Transaction Log, respectively):</span></span>

![LogInfo](media/how-to-use-perfInsights/loginfo.png)

<span data-ttu-id="37f66-401">hello SQL Server-instans-specifika flikar innehåller ett allmänt avsnitt som innehåller grundläggande information om valda hello-instansen och ytterligare avsnitt avancerad information, inklusive inställningar, konfigurationer och användaralternativ.</span><span class="sxs-lookup"><span data-stu-id="37f66-401">hello SQL Server instance-specific tabs contain a general section that displays basic information about hello selected instance and additional sections for advanced information, including Settings, Configurations, and User Options.</span></span>

## <a name="references-toohello-external-tools-used"></a><span data-ttu-id="37f66-402">Refererar till externa toohello verktyg som används</span><span class="sxs-lookup"><span data-stu-id="37f66-402">References toohello external tools used</span></span>

### <a name="diskspd"></a><span data-ttu-id="37f66-403">Diskspd</span><span class="sxs-lookup"><span data-stu-id="37f66-403">Diskspd</span></span>

<span data-ttu-id="37f66-404">DISKSPD är ett lagring belastningen generator och prestanda test från hello Windows och Windows Server och moln serverinfrastruktur engineering team.</span><span class="sxs-lookup"><span data-stu-id="37f66-404">DISKSPD is a storage load generator and performance test tool from hello Windows and Windows Server and Cloud Server Infrastructure engineering teams.</span></span> <span data-ttu-id="37f66-405">Mer information finns i [Diskspd](https://github.com/Microsoft/diskspd).</span><span class="sxs-lookup"><span data-stu-id="37f66-405">For more information, see [Diskspd](https://github.com/Microsoft/diskspd).</span></span>

### <a name="xperf"></a><span data-ttu-id="37f66-406">XPerf</span><span class="sxs-lookup"><span data-stu-id="37f66-406">XPerf</span></span>

<span data-ttu-id="37f66-407">XPerf är ett kommandoradsverktyg toocapture spår från hello Windows Performance Tools Kit.</span><span class="sxs-lookup"><span data-stu-id="37f66-407">Xperf is a command-line tool toocapture traces from hello Windows Performance Tools Kit.</span></span>

<span data-ttu-id="37f66-408">Mer information finns i [Windows Performance Toolkit – Xperf](https://blogs.msdn.microsoft.com/ntdebugging/2008/04/03/windows-performance-toolkit-xperf/).</span><span class="sxs-lookup"><span data-stu-id="37f66-408">For more information, see [Windows Performance Toolkit – Xperf](https://blogs.msdn.microsoft.com/ntdebugging/2008/04/03/windows-performance-toolkit-xperf/).</span></span>

## <a name="next-steps"></a><span data-ttu-id="37f66-409">Nästa steg</span><span class="sxs-lookup"><span data-stu-id="37f66-409">Next Steps</span></span>

### <a name="upload-diagnostics-logs-and-reports-toomicrosoft-support-for-further-review"></a><span data-ttu-id="37f66-410">Överför diagnostik loggar och rapporter tooMicrosoft stöd för ytterligare granskning</span><span class="sxs-lookup"><span data-stu-id="37f66-410">Upload diagnostics logs and reports tooMicrosoft Support for further review</span></span>

<span data-ttu-id="37f66-411">När du arbetar med hello Microsoft Support-personal kanske begärda tootransmit hello utdata som genereras av PerfInsights tooassist hello felsökningsprocessen.</span><span class="sxs-lookup"><span data-stu-id="37f66-411">When you work with hello Microsoft Support staff, you may be requested tootransmit hello output that is generated by PerfInsights tooassist hello troubleshooting process.</span></span>

<span data-ttu-id="37f66-412">hello supportpersonalen du skapar en DTM arbetsyta och du får ett e-postmeddelande som innehåller en länk toohello [DTM portal (https://filetransfer.support.microsoft.com/EFTClient/Account/Login.htm) och ett unikt användarnamn och lösenord.</span><span class="sxs-lookup"><span data-stu-id="37f66-412">hello Support agent will create a DTM workspace for you, and you will receive an email message that includes a link toohello [DTM portal (https://filetransfer.support.microsoft.com/EFTClient/Account/Login.htm) and a unique user ID and password.</span></span>

<span data-ttu-id="37f66-413">Det här meddelandet ska skickas från **CTS Automated diagnostik Services** (ctsadiag@microsoft.com).</span><span class="sxs-lookup"><span data-stu-id="37f66-413">This message will be sent from **CTS Automated Diagnostics Services** (ctsadiag@microsoft.com).</span></span>

![Exempel på hello-meddelande](media/how-to-use-perfInsights/supportemail.png)

<span data-ttu-id="37f66-415">För ytterligare säkerhet kan du kommer att nödvändiga toochange lösenord på först använda.</span><span class="sxs-lookup"><span data-stu-id="37f66-415">For additional security, you will be required toochange your password on first use.</span></span>

<span data-ttu-id="37f66-416">När du loggar in tooDTM hittar du en dialogrutan rutan tooupload hello **CollectedData\_åååå-MM-dd\_hh\_mm\_ss.zip** filen som samlats in av PerfInsights.</span><span class="sxs-lookup"><span data-stu-id="37f66-416">After you log in tooDTM, you will find a dialog box tooupload hello **CollectedData\_yyyy-MM-dd\_hh\_mm\_ss.zip** file that was collected by PerfInsights.</span></span>

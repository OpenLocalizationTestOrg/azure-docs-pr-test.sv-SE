---
title: "SAP NetWeaver på virtuella Azure-datorer – planering och implementering | Microsoft Docs"
description: "SAP NetWeaver på virtuella Azure-datorer (VM) – planera Implementeringsguide och"
services: virtual-machines-windows
documentationcenter: 
author: MSSedusch
manager: timlt
editor: 
tags: azure-resource-manager
keywords: 
ms.assetid: 2b58a419-c892-4722-8cb6-2f8beef4430c
ms.service: virtual-machines-windows
ms.devlang: NA
ms.topic: article
ms.tgt_pltfrm: vm-windows
ms.workload: infrastructure-services
ms.date: 11/08/2016
ms.author: sedusch
ms.custom: H1Hack27Feb2017
ms.openlocfilehash: c0b5968189512d3ca936c0e916274e1df057afb9
ms.sourcegitcommit: 02e69c4a9d17645633357fe3d46677c2ff22c85a
ms.translationtype: MT
ms.contentlocale: sv-SE
ms.lasthandoff: 08/03/2017
---
# <a name="sap-netweaver-on-azure-windows-virtual-machines-vms--planning-and-implementation-guide"></a><span data-ttu-id="f41ff-103">SAP NetWeaver på Windows Azure virtuella datorer (VM) – planera Implementeringsguide och</span><span class="sxs-lookup"><span data-stu-id="f41ff-103">SAP NetWeaver on Azure Windows Virtual Machines (VMs) – Planning and Implementation Guide</span></span>
[767598]:https://launchpad.support.sap.com/#/notes/767598
[773830]:https://launchpad.support.sap.com/#/notes/773830
[826037]:https://launchpad.support.sap.com/#/notes/826037
[965908]:https://launchpad.support.sap.com/#/notes/965908
[1031096]:https://launchpad.support.sap.com/#/notes/1031096
[1139904]:https://launchpad.support.sap.com/#/notes/1139904
[1173395]:https://launchpad.support.sap.com/#/notes/1173395
[1245200]:https://launchpad.support.sap.com/#/notes/1245200
<span data-ttu-id="f41ff-104">[1409604]:https://launchpad.support.sap.com/#/notes/1409604</span><span class="sxs-lookup"><span data-stu-id="f41ff-104">[1409604]:https://launchpad.support.sap.com/#/notes/1409604</span></span>
[1558958]:https://launchpad.support.sap.com/#/notes/1558958
[1585981]:https://launchpad.support.sap.com/#/notes/1585981
[1588316]:https://launchpad.support.sap.com/#/notes/1588316
[1590719]:https://launchpad.support.sap.com/#/notes/1590719
<span data-ttu-id="f41ff-105">[1597355]:https://launchpad.support.sap.com/#/notes/1597355</span><span class="sxs-lookup"><span data-stu-id="f41ff-105">[1597355]:https://launchpad.support.sap.com/#/notes/1597355</span></span>
[1605680]:https://launchpad.support.sap.com/#/notes/1605680
<span data-ttu-id="f41ff-106">[1619720]:https://launchpad.support.sap.com/#/notes/1619720</span><span class="sxs-lookup"><span data-stu-id="f41ff-106">[1619720]:https://launchpad.support.sap.com/#/notes/1619720</span></span>
[1619726]:https://launchpad.support.sap.com/#/notes/1619726
[1619967]:https://launchpad.support.sap.com/#/notes/1619967
[1750510]:https://launchpad.support.sap.com/#/notes/1750510
[1752266]:https://launchpad.support.sap.com/#/notes/1752266
[1757924]:https://launchpad.support.sap.com/#/notes/1757924
[1757928]:https://launchpad.support.sap.com/#/notes/1757928
[1758182]:https://launchpad.support.sap.com/#/notes/1758182
[1758496]:https://launchpad.support.sap.com/#/notes/1758496
[1772688]:https://launchpad.support.sap.com/#/notes/1772688
[1814258]:https://launchpad.support.sap.com/#/notes/1814258
[1882376]:https://launchpad.support.sap.com/#/notes/1882376
<span data-ttu-id="f41ff-107">[1909114]:https://launchpad.support.sap.com/#/notes/1909114</span><span class="sxs-lookup"><span data-stu-id="f41ff-107">[1909114]:https://launchpad.support.sap.com/#/notes/1909114</span></span>
[1922555]:https://launchpad.support.sap.com/#/notes/1922555
<span data-ttu-id="f41ff-108">[1928533]:https://launchpad.support.sap.com/#/notes/1928533</span><span class="sxs-lookup"><span data-stu-id="f41ff-108">[1928533]:https://launchpad.support.sap.com/#/notes/1928533</span></span>
[1941500]:https://launchpad.support.sap.com/#/notes/1941500
[1956005]:https://launchpad.support.sap.com/#/notes/1956005
[1973241]:https://launchpad.support.sap.com/#/notes/1973241
<span data-ttu-id="f41ff-109">[1984787]:https://launchpad.support.sap.com/#/notes/1984787</span><span class="sxs-lookup"><span data-stu-id="f41ff-109">[1984787]:https://launchpad.support.sap.com/#/notes/1984787</span></span>
<span data-ttu-id="f41ff-110">[1999351]:https://launchpad.support.sap.com/#/notes/1999351</span><span class="sxs-lookup"><span data-stu-id="f41ff-110">[1999351]:https://launchpad.support.sap.com/#/notes/1999351</span></span>
<span data-ttu-id="f41ff-111">[2002167]:https://launchpad.support.sap.com/#/notes/2002167</span><span class="sxs-lookup"><span data-stu-id="f41ff-111">[2002167]:https://launchpad.support.sap.com/#/notes/2002167</span></span>
<span data-ttu-id="f41ff-112">[2015553]:https://launchpad.support.sap.com/#/notes/2015553</span><span class="sxs-lookup"><span data-stu-id="f41ff-112">[2015553]:https://launchpad.support.sap.com/#/notes/2015553</span></span>
[2039619]:https://launchpad.support.sap.com/#/notes/2039619
[2121797]:https://launchpad.support.sap.com/#/notes/2121797
[2134316]:https://launchpad.support.sap.com/#/notes/2134316
<span data-ttu-id="f41ff-113">[2178632]:https://launchpad.support.sap.com/#/notes/2178632</span><span class="sxs-lookup"><span data-stu-id="f41ff-113">[2178632]:https://launchpad.support.sap.com/#/notes/2178632</span></span>
<span data-ttu-id="f41ff-114">[2191498]:https://launchpad.support.sap.com/#/notes/2191498</span><span class="sxs-lookup"><span data-stu-id="f41ff-114">[2191498]:https://launchpad.support.sap.com/#/notes/2191498</span></span>
[2233094]:https://launchpad.support.sap.com/#/notes/2233094
<span data-ttu-id="f41ff-115">[2243692]:https://launchpad.support.sap.com/#/notes/2243692</span><span class="sxs-lookup"><span data-stu-id="f41ff-115">[2243692]:https://launchpad.support.sap.com/#/notes/2243692</span></span>

[azure-cli]:../../cli-install-nodejs.md
[azure-portal]:https://portal.azure.com
[azure-ps]:/powershell/azureps-cmdlets-docs
[azure-quickstart-templates-github]:https://github.com/Azure/azure-quickstart-templates
[azure-script-ps]:https://go.microsoft.com/fwlink/p/?LinkID=395017
[azure-subscription-service-limits]:../../azure-subscription-service-limits.md
[azure-subscription-service-limits-subscription]:../../azure-subscription-service-limits.md#subscription-limits

[dbms-guide]:sap-dbms-guide.md
[dbms-guide-2.1]:sap-dbms-guide.md#c7abf1f0-c927-4a7c-9c1d-c7b5b3b7212f
[dbms-guide-2.2]:sap-dbms-guide.md#c8e566f9-21b7-4457-9f7f-126036971a91
[dbms-guide-2.3]:sap-dbms-guide.md#10b041ef-c177-498a-93ed-44b3441ab152
[dbms-guide-2]:sap-dbms-guide.md#65fa79d6-a85f-47ee-890b-22e794f51a64
[dbms-guide-3]:sap-dbms-guide.md#871dfc27-e509-4222-9370-ab1de77021c3
[dbms-guide-5.5.1]:sap-dbms-guide.md#0fef0e79-d3fe-4ae2-85af-73666a6f7268
[dbms-guide-5.5.2]:sap-dbms-guide.md#f9071eff-9d72-4f47-9da4-1852d782087b
[dbms-guide-5.6]:sap-dbms-guide.md#1b353e38-21b3-4310-aeb6-a77e7c8e81c8
[dbms-guide-5.8]:sap-dbms-guide.md#9053f720-6f3b-4483-904d-15dc54141e30
[dbms-guide-5]:sap-dbms-guide.md#3264829e-075e-4d25-966e-a49dad878737
[dbms-guide-8.4.1]:sap-dbms-guide.md#b48cfe3b-48e9-4f5b-a783-1d29155bd573
[dbms-guide-8.4.2]:sap-dbms-guide.md#23c78d3b-ca5a-4e72-8a24-645d141a3f5d
[dbms-guide-8.4.3]:sap-dbms-guide.md#77cd2fbb-307e-4cbf-a65f-745553f72d2c
[dbms-guide-8.4.4]:sap-dbms-guide.md#f77c1436-9ad8-44fb-a331-8671342de818
[dbms-guide-900-sap-cache-server-on-premises]:sap-dbms-guide.md#642f746c-e4d4-489d-bf63-73e80177a0a8

[dbms-guide-figure-100]:./media/virtual-machines-shared-sap-dbms-guide/100_storage_account_types.png
[dbms-guide-figure-200]:./media/virtual-machines-shared-sap-dbms-guide/200-ha-set-for-dbms-ha.png
[dbms-guide-figure-300]:./media/virtual-machines-shared-sap-dbms-guide/300-reference-config-iaas.png
[dbms-guide-figure-400]:./media/virtual-machines-shared-sap-dbms-guide/400-sql-2012-backup-to-blob-storage.png
[dbms-guide-figure-500]:./media/virtual-machines-shared-sap-dbms-guide/500-sql-2012-backup-to-blob-storage-different-containers.png
[dbms-guide-figure-600]:./media/virtual-machines-shared-sap-dbms-guide/600-iaas-maxdb.png
[dbms-guide-figure-700]:./media/virtual-machines-shared-sap-dbms-guide/700-livecach-prod.png
[dbms-guide-figure-800]:./media/virtual-machines-shared-sap-dbms-guide/800-azure-vm-sap-content-server.png
[dbms-guide-figure-900]:./media/virtual-machines-shared-sap-dbms-guide/900-sap-cache-server-on-premises.png

[deployment-guide]:sap-deployment-guide.md
[deployment-guide-2.2]:sap-deployment-guide.md#42ee2bdb-1efc-4ec7-ab31-fe4c22769b94
[deployment-guide-3.1.2]:sap-deployment-guide.md#3688666f-281f-425b-a312-a77e7db2dfab
[deployment-guide-3.2]:sap-deployment-guide.md#db477013-9060-4602-9ad4-b0316f8bb281
[deployment-guide-3.3]:sap-deployment-guide.md#54a1fc6d-24fd-4feb-9c57-ac588a55dff2
[deployment-guide-3.4]:sap-deployment-guide.md#a9a60133-a763-4de8-8986-ac0fa33aa8c1
[deployment-guide-3]:sap-deployment-guide.md#b3253ee3-d63b-4d74-a49b-185e76c4088e
[deployment-guide-4.1]:sap-deployment-guide.md#604bcec2-8b6e-48d2-a944-61b0f5dee2f7
[deployment-guide-4.2]:sap-deployment-guide.md#7ccf6c3e-97ae-4a7a-9c75-e82c37beb18e
[deployment-guide-4.3]:sap-deployment-guide.md#31d9ecd6-b136-4c73-b61e-da4a29bbc9cc
[deployment-guide-4.4.2]:sap-deployment-guide.md#6889ff12-eaaf-4f3c-97e1-7c9edc7f7542
[deployment-guide-4.4]:sap-deployment-guide.md#c7cbb0dc-52a4-49db-8e03-83e7edc2927d
[deployment-guide-4.5.1]:sap-deployment-guide.md#987cf279-d713-4b4c-8143-6b11589bb9d4
[deployment-guide-4.5.2]:sap-deployment-guide.md#408f3779-f422-4413-82f8-c57a23b4fc2f
[deployment-guide-4.5]:sap-deployment-guide.md#d98edcd3-f2a1-49f7-b26a-07448ceb60ca
[deployment-guide-5.1]:sap-deployment-guide.md#bb61ce92-8c5c-461f-8c53-39f5e5ed91f2
[deployment-guide-5.2]:sap-deployment-guide.md#e2d592ff-b4ea-4a53-a91a-e5521edb6cd1
[deployment-guide-5.3]:sap-deployment-guide.md#fe25a7da-4e4e-4388-8907-8abc2d33cfd8

[deployment-guide-configure-monitoring-scenario-1]:sap-deployment-guide.md#ec323ac3-1de9-4c3a-b770-4ff701def65b
[deployment-guide-configure-proxy]:sap-deployment-guide.md#baccae00-6f79-4307-ade4-40292ce4e02d
[deployment-guide-figure-100]:./media/virtual-machines-shared-sap-deployment-guide/100-deploy-vm-image.png
[deployment-guide-figure-1000]:./media/virtual-machines-shared-sap-deployment-guide/1000-service-properties.png
[deployment-guide-figure-11]:sap-deployment-guide.md#figure-11
[deployment-guide-figure-1100]:./media/virtual-machines-shared-sap-deployment-guide/1100-azperflib.png
[deployment-guide-figure-1200]:./media/virtual-machines-shared-sap-deployment-guide/1200-cmd-test-login.png
[deployment-guide-figure-1300]:./media/virtual-machines-shared-sap-deployment-guide/1300-cmd-test-executed.png
[deployment-guide-figure-14]:sap-deployment-guide.md#figure-14
[deployment-guide-figure-1400]:./media/virtual-machines-shared-sap-deployment-guide/1400-azperflib-error-servicenotstarted.png
[deployment-guide-figure-300]:./media/virtual-machines-shared-sap-deployment-guide/300-deploy-private-image.png
[deployment-guide-figure-400]:./media/virtual-machines-shared-sap-deployment-guide/400-deploy-using-disk.png
[deployment-guide-figure-5]:sap-deployment-guide.md#figure-5
[deployment-guide-figure-50]:./media/virtual-machines-shared-sap-deployment-guide/50-forced-tunneling-suse.png
[deployment-guide-figure-500]:./media/virtual-machines-shared-sap-deployment-guide/500-install-powershell.png
[deployment-guide-figure-6]:sap-deployment-guide.md#figure-6
[deployment-guide-figure-600]:./media/virtual-machines-shared-sap-deployment-guide/600-powershell-version.png
[deployment-guide-figure-7]:sap-deployment-guide.md#figure-7
[deployment-guide-figure-700]:./media/virtual-machines-shared-sap-deployment-guide/700-install-powershell-installed.png
[deployment-guide-figure-760]:./media/virtual-machines-shared-sap-deployment-guide/760-azure-cli-version.png
[deployment-guide-figure-900]:./media/virtual-machines-shared-sap-deployment-guide/900-cmd-update-executed.png
[deployment-guide-figure-azure-cli-installed]:sap-deployment-guide.md#402488e5-f9bb-4b29-8063-1c5f52a892d0
[deployment-guide-figure-azure-cli-version]:sap-deployment-guide.md#0ad010e6-f9b5-4c21-9c09-bb2e5efb3fda
[deployment-guide-install-vm-agent-windows]:sap-deployment-guide.md#b2db5c9a-a076-42c6-9835-16945868e866
[deployment-guide-troubleshooting-chapter]:sap-deployment-guide.md#564adb4f-5c95-4041-9616-6635e83a810b

[deploy-template-cli]:../../resource-group-template-deploy-cli.md
[deploy-template-portal]:../../resource-group-template-deploy-portal.md
[deploy-template-powershell]:../../resource-group-template-deploy.md

[dr-guide-classic]:http://go.microsoft.com/fwlink/?LinkID=521971

[getting-started]:sap-get-started.md
[getting-started-dbms]:sap-get-started.md#1343ffe1-8021-4ce6-a08d-3a1553a4db82
[getting-started-deployment]:sap-get-started.md#6aadadd2-76b5-46d8-8713-e8d63630e955
[getting-started-planning]:sap-get-started.md#3da0389e-708b-4e82-b2a2-e92f132df89c

[getting-started-windows-classic]:classic/sap-get-started.mdsap-dbms-guide.md
[getting-started-windows-classic-dbms]:classic/sap-get-started.mdsap-dbms-guide.md#c5b77a14-f6b4-44e9-acab-4d28ff72a930
[getting-started-windows-classic-deployment]:classic/sap-get-started.mdsap-dbms-guide.md#f84ea6ce-bbb4-41f7-9965-34d31b0098ea
[getting-started-windows-classic-dr]:classic/sap-get-started.mdsap-dbms-guide.md#cff10b4a-01a5-4dc3-94b6-afb8e55757d3
[getting-started-windows-classic-ha-sios]:classic/sap-get-started.mdsap-dbms-guide.md#4bb7512c-0fa0-4227-9853-4004281b1037
[getting-started-windows-classic-planning]:classic/sap-get-started.mdsap-dbms-guide.md#f2a5e9d8-49e4-419e-9900-af783173481c

[ha-guide-classic]:http://go.microsoft.com/fwlink/?LinkId=613056

[ha-guide]:sap-high-availability-guide.md

[install-extension-cli]:virtual-machines-linux-enable-aem.md

[Logo_Linux]:./media/virtual-machines-shared-sap-shared/Linux.png
[Logo_Windows]:./media/virtual-machines-shared-sap-shared/Windows.png

[msdn-set-azurermvmaemextension]:https://msdn.microsoft.com/library/azure/mt670598.aspx

[planning-guide]:sap-planning-guide.md
[planning-guide-1.2]:sap-planning-guide.md#e55d1e22-c2c8-460b-9897-64622a34fdff
[planning-guide-11.4]:sap-planning-guide.md#7cf991a1-badd-40a9-944e-7baae842a058
[planning-guide-11.4.1]:sap-planning-guide.md#5d9d36f9-9058-435d-8367-5ad05f00de77
[planning-guide-11.5]:sap-planning-guide.md#4e165b58-74ca-474f-a7f4-5e695a93204f
[planning-guide-2.1]:sap-planning-guide.md#1625df66-4cc6-4d60-9202-de8a0b77f803
[planning-guide-2.2]:sap-planning-guide.md#f5b3b18c-302c-4bd8-9ab2-c388f1ab3d10
[planning-guide-3.1]:sap-planning-guide.md#be80d1b9-a463-4845-bd35-f4cebdb5424a
[planning-guide-3.2.1]:sap-planning-guide.md#df49dc09-141b-4f34-a4a2-990913b30358
[planning-guide-3.2.2]:sap-planning-guide.md#fc1ac8b2-e54a-487c-8581-d3cc6625e560
[planning-guide-3.2.3]:sap-planning-guide.md#18810088-f9be-4c97-958a-27996255c665
[planning-guide-3.2]:sap-planning-guide.md#8d8ad4b8-6093-4b91-ac36-ea56d80dbf77
[planning-guide-3.3.2]:sap-planning-guide.md#ff5ad0f9-f7f4-4022-9102-af07aef3bc92
[planning-guide-5.1.1]:sap-planning-guide.md#4d175f1b-7353-4137-9d2f-817683c26e53
[planning-guide-5.1.2]:sap-planning-guide.md#e18f7839-c0e2-4385-b1e6-4538453a285c
[planning-guide-5.2.1]:sap-planning-guide.md#1b287330-944b-495d-9ea7-94b83aff73ef
[planning-guide-5.2.2]:sap-planning-guide.md#57f32b1c-0cba-4e57-ab6e-c39fe22b6ec3
[planning-guide-5.2]:sap-planning-guide.md#6ffb9f41-a292-40bf-9e70-8204448559e7
[planning-guide-5.3.1]:sap-planning-guide.md#6e835de8-40b1-4b71-9f18-d45b20959b79
[planning-guide-5.3.2]:sap-planning-guide.md#a43e40e6-1acc-4633-9816-8f095d5a7b6a
[planning-guide-5.4.2]:sap-planning-guide.md#9789b076-2011-4afa-b2fe-b07a8aba58a1
[planning-guide-5.5.1]:sap-planning-guide.md#4efec401-91e0-40c0-8e64-f2dceadff646
[planning-guide-5.5.3]:sap-planning-guide.md#17e0d543-7e8c-4160-a7da-dd7117a1ad9d
[planning-guide-7.1]:sap-planning-guide.md#3e9c3690-da67-421a-bc3f-12c520d99a30
[planning-guide-7]:sap-planning-guide.md#96a77628-a05e-475d-9df3-fb82217e8f14
[planning-guide-9.1]:sap-planning-guide.md#6f0a47f3-a289-4090-a053-2521618a28c3
[planning-guide-azure-premium-storage]:sap-planning-guide.md#ff5ad0f9-f7f4-4022-9102-af07aef3bc92

[planning-guide-figure-100]:./media/virtual-machines-shared-sap-planning-guide/100-single-vm-in-azure.png
[planning-guide-figure-1300]:./media/virtual-machines-shared-sap-planning-guide/1300-ref-config-iaas-for-sap.png
[planning-guide-figure-1400]:./media/virtual-machines-shared-sap-planning-guide/1400-attach-detach-disks.png
[planning-guide-figure-1600]:./media/virtual-machines-shared-sap-planning-guide/1600-firewall-port-rule.png
[planning-guide-figure-1700]:./media/virtual-machines-shared-sap-planning-guide/1700-single-vm-demo.png
[planning-guide-figure-1900]:./media/virtual-machines-shared-sap-planning-guide/1900-vm-set-vnet.png
[planning-guide-figure-200]:./media/virtual-machines-shared-sap-planning-guide/200-multiple-vms-in-azure.png
[planning-guide-figure-2100]:./media/virtual-machines-shared-sap-planning-guide/2100-s2s.png
[planning-guide-figure-2200]:./media/virtual-machines-shared-sap-planning-guide/2200-network-printing.png
[planning-guide-figure-2300]:./media/virtual-machines-shared-sap-planning-guide/2300-sapgui-stms.png
[planning-guide-figure-2400]:./media/virtual-machines-shared-sap-planning-guide/2400-vm-extension-overview.png
[planning-guide-figure-2500]:./media/virtual-machines-shared-sap-planning-guide/2500-vm-extension-details.png
[planning-guide-figure-2600]:./media/virtual-machines-shared-sap-planning-guide/2600-sap-router-connection.png
[planning-guide-figure-2700]:./media/virtual-machines-shared-sap-planning-guide/2700-exposed-sap-portal.png
[planning-guide-figure-2800]:./media/virtual-machines-shared-sap-planning-guide/2800-endpoint-config.png
[planning-guide-figure-2900]:./media/virtual-machines-shared-sap-planning-guide/2900-azure-ha-sap-ha.png
[planning-guide-figure-300]:./media/virtual-machines-shared-sap-planning-guide/300-vpn-s2s.png
[planning-guide-figure-3000]:./media/virtual-machines-shared-sap-planning-guide/3000-sap-ha-on-azure.png
[planning-guide-figure-3200]:./media/virtual-machines-shared-sap-planning-guide/3200-sap-ha-with-sql.png
[planning-guide-figure-400]:./media/virtual-machines-shared-sap-planning-guide/400-vm-services.png
[planning-guide-figure-600]:./media/virtual-machines-shared-sap-planning-guide/600-s2s-details.png
[planning-guide-figure-700]:./media/virtual-machines-shared-sap-planning-guide/700-decision-tree-deploy-to-azure.png
[planning-guide-figure-800]:./media/virtual-machines-shared-sap-planning-guide/800-portal-vm-overview.png
[planning-guide-microsoft-azure-networking]:sap-planning-guide.md#61678387-8868-435d-9f8c-450b2424f5bd
[planning-guide-storage-microsoft-azure-storage-and-data-disks]:sap-planning-guide.md#a72afa26-4bf4-4a25-8cf7-855d6032157f

[powershell-install-configure]:/powershell/azureps-cmdlets-docs
[resource-group-authoring-templates]:../../resource-group-authoring-templates.md
[resource-group-overview]:../../azure-resource-manager/resource-group-overview.md
[resource-groups-networking]:../../virtual-network/resource-groups-networking.md
[sap-pam]:https://support.sap.com/pam
[sap-templates-2-tier-marketplace-image]:https://portal.azure.com/#create/Microsoft.Template/uri/https%3A%2F%2Fraw.githubusercontent.com%2FAzure%2Fazure-quickstart-templates%2Fmaster%2Fsap-2-tier-marketplace-image%2Fazuredeploy.json
[sap-templates-2-tier-os-disk]:https://portal.azure.com/#create/Microsoft.Template/uri/https%3A%2F%2Fraw.githubusercontent.com%2FAzure%2Fazure-quickstart-templates%2Fmaster%2Fsap-2-tier-user-disk%2Fazuredeploy.json
[sap-templates-2-tier-user-image]:https://portal.azure.com/#create/Microsoft.Template/uri/https%3A%2F%2Fraw.githubusercontent.com%2FAzure%2Fazure-quickstart-templates%2Fmaster%2Fsap-2-tier-user-image%2Fazuredeploy.json
[sap-templates-3-tier-marketplace-image]:https://portal.azure.com/#create/Microsoft.Template/uri/https%3A%2F%2Fraw.githubusercontent.com%2FAzure%2Fazure-quickstart-templates%2Fmaster%2Fsap-3-tier-marketplace-image%2Fazuredeploy.json
[sap-templates-3-tier-user-image]:https://portal.azure.com/#create/Microsoft.Template/uri/https%3A%2F%2Fraw.githubusercontent.com%2FAzure%2Fazure-quickstart-templates%2Fmaster%2Fsap-3-tier-user-image%2Fazuredeploy.json
[storage-azure-cli]:../../storage/storage-azure-cli.md
[storage-azure-cli-copy-blobs]:../../storage/storage-azure-cli.md#copy-blobs
[storage-introduction]:../../storage/storage-introduction.md
[storage-powershell-guide-full-copy-vhd]:../../storage/storage-powershell-guide-full.md#how-to-copy-blobs-from-one-storage-container-to-another
[storage-premium-storage-preview-portal]:../../storage/storage-premium-storage.md
[storage-redundancy]:../../storage/storage-redundancy.md
[storage-scalability-targets]:../../storage/storage-scalability-targets.md
[storage-use-azcopy]:../../storage/storage-use-azcopy.md
[template-201-vm-from-specialized-vhd]:https://github.com/Azure/azure-quickstart-templates/tree/master/201-vm-from-specialized-vhd
[templates-101-simple-windows-vm]:https://github.com/Azure/azure-quickstart-templates/tree/master/101-simple-windows-vm
[templates-101-vm-from-user-image]:https://github.com/Azure/azure-quickstart-templates/tree/master/101-vm-from-user-image
[virtual-machines-linux-attach-disk-portal]:../linux/attach-disk-portal.md
[virtual-machines-windows-attach-disk-portal]:../virtual-machines-windows-attach-disk-portal.md
[virtual-machines-azure-resource-manager-architecture]:../../resource-manager-deployment-model.md
[virtual-machines-azurerm-versus-azuresm]:virtual-machines-windows-compare-deployment-models.md
[virtual-machines-windows-classic-configure-oracle-data-guard]:../virtual-machines-windows-classic-configure-oracle-data-guard.md
[virtual-machines-linux-cli-deploy-templates]:../linux/cli-deploy-templates.md
[virtual-machines-deploy-rmtemplates-powershell]:../virtual-machines-windows-ps-manage.md
[virtual-machines-linux-agent-user-guide]:../linux/agent-user-guide.md
[virtual-machines-linux-agent-user-guide-command-line-options]:../linux/agent-user-guide.md#command-line-options
[virtual-machines-linux-capture-image]:../linux/capture-image.md
[virtual-machines-linux-capture-image-capture]:../linux/capture-image.md#step-2-create-vm-image
[virtual-machines-windows-capture-image]:../virtual-machines-windows-create-vm-generalized.md
[virtual-machines-windows-capture-image-prepare-the-vm-for-image-capture]:../virtual-machines-windows-create-vm-generalized.md
[virtual-machines-linux-configure-lvm]:../linux/configure-lvm.md
[virtual-machines-linux-configure-raid]:../linux/configure-raid.md
[virtual-machines-linux-classic-create-upload-vhd-step-1]:../virtual-machines-linux-classic-create-upload-vhd.md#step-1-prepare-the-image-to-be-uploaded
[virtual-machines-linux-create-upload-vhd-suse]:../linux/suse-create-upload-vhd.md
[virtual-machines-linux-redhat-create-upload-vhd]:../linux/redhat-create-upload-vhd.md
[virtual-machines-linux-how-to-attach-disk]:../linux/add-disk.md
[virtual-machines-linux-how-to-attach-disk-how-to-initialize-a-new-data-disk-in-linux]:../linux/add-disk.md#connect-to-the-linux-vm-to-mount-the-new-disk
[virtual-machines-linux-tutorial]:../linux/quick-create-cli.md
[virtual-machines-linux-update-agent]:../linux/update-agent.md
[virtual-machines-manage-availability]:../virtual-machines-windows-manage-availability.md
[virtual-machines-ps-create-preconfigure-windows-resource-manager-vms]:../virtual-machines-windows-ps-create.md
[virtual-machines-sizes]:sizes.md
[virtual-machines-windows-classic-ps-sql-alwayson-availability-groups]:classic/ps-sql-alwayson-availability-groups.md
[virtual-machines-windows-classic-ps-sql-int-listener]:classic/ps-sql-int-listener.md
[virtual-machines-sql-server-high-availability-and-disaster-recovery-solutions]:./sql/virtual-machines-windows-sql-high-availability-dr.md
[virtual-machines-sql-server-infrastructure-services]:./sql/virtual-machines-windows-sql-server-iaas-overview.md
[virtual-machines-sql-server-performance-best-practices]:./sql/virtual-machines-windows-sql-performance.md
[virtual-machines-upload-image-windows-resource-manager]:upload-image.md
[virtual-machines-windows-tutorial]:../virtual-machines-windows-hero-tutorial.md
[virtual-machines-workload-template-sql-alwayson]:https://azure.microsoft.com/documentation/templates/sql-server-2014-alwayson-dsc/
[virtual-network-deploy-multinic-arm-cli]:../../virtual-network/virtual-network-deploy-multinic-arm-cli.md
[virtual-network-deploy-multinic-arm-ps]:../../virtual-network/virtual-network-deploy-multinic-arm-ps.md
[virtual-network-deploy-multinic-arm-template]:../../virtual-network/virtual-network-deploy-multinic-arm-template.md
[virtual-networks-configure-vnet-to-vnet-connection]:../../vpn-gateway/vpn-gateway-vnet-vnet-rm-ps.md
[virtual-networks-create-vnet-arm-pportal]:../../virtual-network/virtual-networks-create-vnet-arm-pportal.md
[virtual-networks-manage-dns-in-vnet]:../../virtual-network/virtual-networks-name-resolution-for-vms-and-role-instances.md
[virtual-networks-multiple-nics]:../../virtual-network/virtual-networks-multiple-nics.md
[virtual-networks-nsg]:../../virtual-network/virtual-networks-nsg.md
[virtual-networks-reserved-private-ip]:../../virtual-network/virtual-networks-static-private-ip-arm-ps.md
[virtual-networks-static-private-ip-arm-pportal]:../../virtual-network/virtual-networks-static-private-ip-arm-pportal.md
[virtual-networks-udr-overview]:../../virtual-network/virtual-networks-udr-overview.md
[vpn-gateway-about-vpn-devices]:../../vpn-gateway/vpn-gateway-about-vpn-devices.md
[vpn-gateway-create-site-to-site-rm-powershell]:../../vpn-gateway/vpn-gateway-create-site-to-site-rm-powershell.md
[vpn-gateway-cross-premises-options]:../../vpn-gateway/vpn-gateway-plan-design.md
[vpn-gateway-site-to-site-create]:../../vpn-gateway/vpn-gateway-howto-site-to-site-resource-manager-portal.md
[vpn-gateway-vpn-faq]:../../vpn-gateway/vpn-gateway-vpn-faq.md
[xplat-cli]:../../cli-install-nodejs.md
[xplat-cli-azure-resource-manager]:../../xplat-cli-azure-resource-manager.md

<span data-ttu-id="f41ff-116">Microsoft Azure gör att företag kan få beräknings-och lagringsresurser minimal tidpunkt utan långa inköp cykler.</span><span class="sxs-lookup"><span data-stu-id="f41ff-116">Microsoft Azure enables companies to acquire compute and storage resources in minimal time without lengthy procurement cycles.</span></span> <span data-ttu-id="f41ff-117">Virtuella Azure-datorer tillåta företag att distribuera klassisk program som SAP NetWeaver baserat program i Azure och utöka sina tillförlitlighet och tillgänglighet utan att behöva ytterligare resurser tillgängliga lokalt.</span><span class="sxs-lookup"><span data-stu-id="f41ff-117">Azure Virtual Machines allow companies to deploy classical applications, like SAP NetWeaver based applications into Azure and extend their reliability and availability without having further resources available on-premises.</span></span> <span data-ttu-id="f41ff-118">Azure Virtual Machine-tjänster har också stöd för korsanslutningar, som gör det möjligt att integrera aktivt Azure-datorer i sina lokala domäner sina privata moln och deras liggande för SAP-System.</span><span class="sxs-lookup"><span data-stu-id="f41ff-118">Azure Virtual Machine Services also supports cross-premises connectivity, which enables companies to actively integrate Azure Virtual Machines into their on-premises domains, their Private Clouds and their SAP System Landscape.</span></span>
<span data-ttu-id="f41ff-119">I det här dokumentet beskriver grunderna i Microsoft Azure-dator och ger en beskrivning av överväganden för planering och implementering för SAP NetWeaver installationer i Azure och som sådana ska vara dokumentet att läsa innan du startar faktiska distributioner av SAP NetWeaver på Azure.</span><span class="sxs-lookup"><span data-stu-id="f41ff-119">This white paper describes the fundamentals of Microsoft Azure Virtual Machine and provides a walk-through of planning and implementation considerations for SAP NetWeaver installations in Azure and as such should be the document to read before starting actual deployments of SAP NetWeaver on Azure.</span></span>
<span data-ttu-id="f41ff-120">Dokumentet kompletterar SAP dokumentationen och SAP anteckningar som representerar primära resurser för installation och distribution av program på den angivna plattformar.</span><span class="sxs-lookup"><span data-stu-id="f41ff-120">The paper complements the SAP Installation Documentation and SAP Notes which represent the primary resources for installations and deployments of SAP software on given platforms.</span></span>

## <a name="summary"></a><span data-ttu-id="f41ff-121">Sammanfattning</span><span class="sxs-lookup"><span data-stu-id="f41ff-121">Summary</span></span>
<span data-ttu-id="f41ff-122">Cloud Computing är en välanvänd term som ökat i vikt inom IT-branschen, från småföretag upp till stora multinationella bolag.</span><span class="sxs-lookup"><span data-stu-id="f41ff-122">Cloud Computing is a widely used term which is gaining more and more importance within the IT industry, from small companies up to large and multinational corporations.</span></span>

<span data-ttu-id="f41ff-123">Microsoft Azure är Microsofts molntjänstplattform som erbjuder ett brett utbud av nya möjligheter.</span><span class="sxs-lookup"><span data-stu-id="f41ff-123">Microsoft Azure is the Cloud Services Platform from Microsoft which offers a wide spectrum of new possibilities.</span></span> <span data-ttu-id="f41ff-124">Nu kan kunder snabbt etablera och avinstallation etablera program som en tjänst i molnet, så att de inte är begränsat till teknisk eller budgetering begränsningar.</span><span class="sxs-lookup"><span data-stu-id="f41ff-124">Now customers are able to rapidly provision and de-provision applications as a service in the cloud, so they are not limited to technical or budgeting restrictions.</span></span> <span data-ttu-id="f41ff-125">Istället för att investera tid och budget i maskinvaruinfrastruktur, kan företag fokusera på programmet, verksamhetsprocesserna och dess fördelar för kunder och användare.</span><span class="sxs-lookup"><span data-stu-id="f41ff-125">Instead of investing time and budget into hardware infrastructure, companies can focus on the application, business processes and its benefits for customers and users.</span></span>

<span data-ttu-id="f41ff-126">Med Microsoft Azure Virtual Machine-tjänsterna, erbjuder Microsoft en omfattande plattform för infrastruktur som en tjänst (IaaS).</span><span class="sxs-lookup"><span data-stu-id="f41ff-126">With Microsoft Azure Virtual Machine Services, Microsoft offers a comprehensive Infrastructure as a Service (IaaS) platform.</span></span> <span data-ttu-id="f41ff-127">SAP NetWeaver-baserade program stöds på virtuella Azure-datorer (IaaS).</span><span class="sxs-lookup"><span data-stu-id="f41ff-127">SAP NetWeaver based applications are supported on Azure Virtual Machines (IaaS).</span></span> <span data-ttu-id="f41ff-128">Den här rapporten beskrivs hur du planerar och implementerar SAP NetWeaver baserat program i Microsoft Azure som plattform för serveroperativsystem.</span><span class="sxs-lookup"><span data-stu-id="f41ff-128">This whitepaper will describe how to plan and implement SAP NetWeaver based applications within Microsoft Azure as the platform of choice.</span></span>

<span data-ttu-id="f41ff-129">Själva dokumentet fokuserar på två huvudsakliga aspekter:</span><span class="sxs-lookup"><span data-stu-id="f41ff-129">The paper itself will focus on two main aspects:</span></span>

* <span data-ttu-id="f41ff-130">Den första delen beskriver två mönster för distribution som stöds för SAP NetWeaver baserat program i Azure.</span><span class="sxs-lookup"><span data-stu-id="f41ff-130">The first part will describe two supported deployment patterns for SAP NetWeaver based applications on Azure.</span></span> <span data-ttu-id="f41ff-131">Allmän hantering av Azure med SAP-distribution i åtanke beskrivs också.</span><span class="sxs-lookup"><span data-stu-id="f41ff-131">It will also describe general handling of Azure with SAP deployments in mind.</span></span>
* <span data-ttu-id="f41ff-132">Den andra delen redogör implementera två olika scenarier som beskrivs i den första delen.</span><span class="sxs-lookup"><span data-stu-id="f41ff-132">The second part will detail implementing the two different scenarios described in the first part.</span></span>

<span data-ttu-id="f41ff-133">För ytterligare resurser finns i kapitlet [resurser] [ planning-guide-1.2] i det här dokumentet.</span><span class="sxs-lookup"><span data-stu-id="f41ff-133">For additional resources see chapter [Resources][planning-guide-1.2] in this document.</span></span>

### <a name="definitions-upfront"></a><span data-ttu-id="f41ff-134">Definitioner förskott</span><span class="sxs-lookup"><span data-stu-id="f41ff-134">Definitions upfront</span></span>
<span data-ttu-id="f41ff-135">Vi använder följande termer för hela dokumentet:</span><span class="sxs-lookup"><span data-stu-id="f41ff-135">Throughout the document we will use the following terms:</span></span>

* <span data-ttu-id="f41ff-136">IaaS: Infrastruktur som en tjänst.</span><span class="sxs-lookup"><span data-stu-id="f41ff-136">IaaS: Infrastructure as a Service.</span></span>
* <span data-ttu-id="f41ff-137">PaaS: Plattform som en tjänst.</span><span class="sxs-lookup"><span data-stu-id="f41ff-137">PaaS: Platform as a Service.</span></span>
* <span data-ttu-id="f41ff-138">SaaS: Programvara som en tjänst.</span><span class="sxs-lookup"><span data-stu-id="f41ff-138">SaaS: Software as a Service.</span></span>
* <span data-ttu-id="f41ff-139">ARM: Azure Resource Manager</span><span class="sxs-lookup"><span data-stu-id="f41ff-139">ARM : Azure Resource Manager</span></span>
* <span data-ttu-id="f41ff-140">SAP komponent: ett enskilt SAP program, till exempel ECC BW, lösning Manager eller EP.</span><span class="sxs-lookup"><span data-stu-id="f41ff-140">SAP Component: an individual SAP application such as ECC, BW, Solution Manager or EP.</span></span>  <span data-ttu-id="f41ff-141">SAP-komponenter kan baseras på traditionell ABAP eller Java-teknik eller icke-NetWeaver baserat program, till exempel Business-objekt.</span><span class="sxs-lookup"><span data-stu-id="f41ff-141">SAP components can be based on traditional ABAP or Java technologies or a non-NetWeaver based application such as Business Objects.</span></span>
* <span data-ttu-id="f41ff-142">SAP-miljö: en eller flera komponenter för SAP logiskt grupperade för att utföra en business-funktion, till exempel utveckling, QAS, träning, DR eller produktion.</span><span class="sxs-lookup"><span data-stu-id="f41ff-142">SAP Environment: one or more SAP components logically grouped to perform a business function such as Development, QAS, Training, DR or Production.</span></span>
* <span data-ttu-id="f41ff-143">SAP liggande: Avser hela SAP tillgångarna i kundens IT-miljön.</span><span class="sxs-lookup"><span data-stu-id="f41ff-143">SAP Landscape: This refers to the entire SAP assets in a customer’s IT landscape.</span></span> <span data-ttu-id="f41ff-144">SAP-liggande innehåller alla produktions- och icke-produktionsmiljöer.</span><span class="sxs-lookup"><span data-stu-id="f41ff-144">The SAP landscape includes all production and non-production environments.</span></span>
* <span data-ttu-id="f41ff-145">SAP System: Kombinationen av DBMS lager- och programnivå t.ex. en SAP ERP-utvecklingssystemet, SAP BW testsystemet, SAP CRM produktionssystem osv...</span><span class="sxs-lookup"><span data-stu-id="f41ff-145">SAP System: The combination of DBMS layer and application layer of e.g. a SAP ERP development system, SAP BW test system, SAP CRM production system, etc..</span></span> <span data-ttu-id="f41ff-146">I Azure-distributioner går det inte att dela upp de här två lager mellan lokala och Azure.</span><span class="sxs-lookup"><span data-stu-id="f41ff-146">In Azure deployments it is not supported to divide these two layers between on-premises and Azure.</span></span> <span data-ttu-id="f41ff-147">Detta innebär en SAP-systemet är antingen distribueras lokalt eller den har distribuerats i Azure.</span><span class="sxs-lookup"><span data-stu-id="f41ff-147">This means an SAP system is either deployed on-premises or it is deployed in Azure.</span></span> <span data-ttu-id="f41ff-148">Du kan dock distribuera olika system för en SAP liggande i Azure eller lokalt.</span><span class="sxs-lookup"><span data-stu-id="f41ff-148">However, you can deploy the different systems of an SAP landscape into either Azure or on-premises.</span></span> <span data-ttu-id="f41ff-149">Du kan till exempel distribuera SAP CRM-utveckling och testsystem i Azure, men den SAP CRM produktion system lokalt.</span><span class="sxs-lookup"><span data-stu-id="f41ff-149">For example, you could deploy the SAP CRM development and test systems in Azure but the SAP CRM production system on-premises.</span></span>
* <span data-ttu-id="f41ff-150">Endast molnbaserad distribution: en distribution där Azure-prenumerationen inte är ansluten via ett plats-till-plats eller en ExpressRoute-anslutning till lokala nätverkets infrastruktur.</span><span class="sxs-lookup"><span data-stu-id="f41ff-150">Cloud-Only deployment: A deployment where the Azure subscription is not connected via a site-to-site or ExpressRoute connection to the on-premises network infrastructure.</span></span> <span data-ttu-id="f41ff-151">Gemensam dokumentation för Azure dessa typer av distributioner beskrivs också som 'endast molnbaserad-distributioner.</span><span class="sxs-lookup"><span data-stu-id="f41ff-151">In common Azure documentation these kinds of deployments are also described as ‘Cloud-Only’ deployments.</span></span> <span data-ttu-id="f41ff-152">Virtuella datorer distribueras med den här metoden kan nås via internet och en offentlig IP-adress och/eller en offentlig DNS-namn som tilldelats virtuella datorer i Azure.</span><span class="sxs-lookup"><span data-stu-id="f41ff-152">Virtual Machines deployed with this method are accessed through the internet and a public IP address and/or a public DNS name assigned to the VMs in Azure.</span></span> <span data-ttu-id="f41ff-153">För Microsoft Windows lokala Active Directory (AD) och DNS inte har utökats till Azure i dessa typer av distributioner.</span><span class="sxs-lookup"><span data-stu-id="f41ff-153">For Microsoft Windows the on-premises Active Directory (AD) and DNS is not extended to Azure in these types of deployments.</span></span> <span data-ttu-id="f41ff-154">De virtuella datorerna är därför inte en del av Active Directory lokalt.</span><span class="sxs-lookup"><span data-stu-id="f41ff-154">Hence the VMs are not part of the on-premises Active Directory.</span></span> <span data-ttu-id="f41ff-155">Detsamma gäller för Linux-implementeringar med t.ex. OpenLDAP + Kerberos.</span><span class="sxs-lookup"><span data-stu-id="f41ff-155">Same is true for Linux implementations using e.g. OpenLDAP + Kerberos.</span></span>

> [!NOTE]
> <span data-ttu-id="f41ff-156">Endast molnbaserad distributioner i det här dokumentet har definierats som slutförts SAP landskap kör enbart i Azure utan utökning av Active Directory / OpenLDAP eller namnmatchning från lokala i offentliga moln.</span><span class="sxs-lookup"><span data-stu-id="f41ff-156">Cloud-Only deployments in this document is defined as complete SAP landscapes are running exclusively in Azure without extension of Active Directory / OpenLDAP  or name resolution from on-premises into public cloud.</span></span> <span data-ttu-id="f41ff-157">Endast molnbaserad konfigurationer stöds inte för SAP produktionssystem eller konfigurationer där SAP STM eller andra lokala resurser måste användas mellan SAP-system som finns på Azure och resurser som finns lokalt.</span><span class="sxs-lookup"><span data-stu-id="f41ff-157">Cloud-Only configurations are not supported for production SAP systems or configurations where SAP STMS or other on-premises resources need to be used between SAP systems hosted on Azure and resources residing on-premises.</span></span>
>
>

* <span data-ttu-id="f41ff-158">Anslutningar mellan lokala: Beskriver ett scenario där virtuella datorer distribueras till en Azure-prenumeration som har plats-till-plats, flera platser eller ExpressRoute-anslutningen mellan lokala datacenter(s) och Azure.</span><span class="sxs-lookup"><span data-stu-id="f41ff-158">Cross-Premises: Describes a scenario where VMs are deployed to an Azure subscription that has site-to-site, multi-site or ExpressRoute connectivity between the on-premises datacenter(s) and Azure.</span></span> <span data-ttu-id="f41ff-159">Gemensamma Azure-dokumentationen dessa typer av distributioner beskrivs också som mellan lokala scenarier.</span><span class="sxs-lookup"><span data-stu-id="f41ff-159">In common Azure documentation, these kinds of deployments are also described as Cross-Premises scenarios.</span></span> <span data-ttu-id="f41ff-160">Orsaken för anslutningen är att utöka lokala domäner lokala Active Directory / OpenLDAP och lokala DNS i Azure.</span><span class="sxs-lookup"><span data-stu-id="f41ff-160">The reason for the connection is to extend on-premises domains, on-premises Active Directory / OpenLDAP and on-premises DNS into Azure.</span></span> <span data-ttu-id="f41ff-161">Lokala liggande utökas till Azure tillgångar i prenumerationen.</span><span class="sxs-lookup"><span data-stu-id="f41ff-161">The on-premises landscape is extended to the Azure assets of the subscription.</span></span> <span data-ttu-id="f41ff-162">Med det här tillägget, kan de virtuella datorerna vara en del av den lokala domänen.</span><span class="sxs-lookup"><span data-stu-id="f41ff-162">Having this extension, the VMs can be part of the on-premises domain.</span></span> <span data-ttu-id="f41ff-163">Domänanvändare på den lokala domänen kan komma åt servrar och tjänster kan köra på dessa virtuella datorer (till exempel DBMS services).</span><span class="sxs-lookup"><span data-stu-id="f41ff-163">Domain users of the on-premises domain can access the servers and can run services on those VMs (like DBMS services).</span></span> <span data-ttu-id="f41ff-164">Det är möjligt kommunikation och namnmatchning mellan virtuella datorer som distribueras på lokalt och distribuerade virtuella Azure-datorer.</span><span class="sxs-lookup"><span data-stu-id="f41ff-164">Communication and name resolution between VMs deployed on-premises and Azure deployed VMs is possible.</span></span> <span data-ttu-id="f41ff-165">Detta är det scenario som vi räknar med de flesta SAP-resurser som distribueras i.</span><span class="sxs-lookup"><span data-stu-id="f41ff-165">This is the scenario we expect most SAP assets to be deployed in.</span></span>  <span data-ttu-id="f41ff-166">Se [detta] [ vpn-gateway-cross-premises-options] artikel och [detta] [ vpn-gateway-site-to-site-create] för mer information.</span><span class="sxs-lookup"><span data-stu-id="f41ff-166">See [this][vpn-gateway-cross-premises-options] article and [this][vpn-gateway-site-to-site-create] for more information.</span></span>

> [!NOTE]
> <span data-ttu-id="f41ff-167">Anslutningar mellan lokala distributioner av SAP-system där Azure virtuella datorer som kör SAP-system är medlemmar i en lokal domän stöds för produktion SAP-system.</span><span class="sxs-lookup"><span data-stu-id="f41ff-167">Cross-Premises deployments of SAP systems where Azure Virtual Machines running SAP systems are members of an on-premises domain are supported for production SAP systems.</span></span> <span data-ttu-id="f41ff-168">Anslutningar mellan lokala konfigurationer stöds för att distribuera delar eller slutföra SAP landskap till Azure.</span><span class="sxs-lookup"><span data-stu-id="f41ff-168">Cross-Premises configurations are supported for deploying parts or complete SAP landscapes into Azure.</span></span> <span data-ttu-id="f41ff-169">Även kör fullständig SAP liggande i Azure kräver att de virtuella datorer som en del av lokal domän och Active Directory / OpenLDAP.</span><span class="sxs-lookup"><span data-stu-id="f41ff-169">Even running the complete SAP landscape in Azure requires having those VMs being part of on-premises domain and ADS / OpenLDAP.</span></span> <span data-ttu-id="f41ff-170">I tidigare versioner av dokumentationen talat om Hybrid-IT-scenarier där termen ”Hybrid' är rotad i det faktum att det finns en anslutning mellan Azure och lokalt.</span><span class="sxs-lookup"><span data-stu-id="f41ff-170">In former versions of the documentation we talked about Hybrid-IT scenarios, where the term ‘Hybrid’ is rooted in the fact that there is a cross-premises connectivity between on-premises and Azure.</span></span> <span data-ttu-id="f41ff-171">Dessutom att virtuella datorer i Azure är en del av Active Directory lokalt / OpenLDAP.</span><span class="sxs-lookup"><span data-stu-id="f41ff-171">Plus, the fact that the VMs in Azure are part of the on-premises Active Directory / OpenLDAP.</span></span>
>
>

<span data-ttu-id="f41ff-172">Vissa Microsoft-dokumentationen beskriver anslutningar mellan lokala scenarier lite annorlunda särskilt för DBMS HA konfigurationer.</span><span class="sxs-lookup"><span data-stu-id="f41ff-172">Some Microsoft documentation describes Cross-Premises scenarios a bit differently, especially for DBMS HA configurations.</span></span> <span data-ttu-id="f41ff-173">När det gäller SAP dokument i scenarion med flera lokaler bara handlar i att ha en anslutning för plats-till-plats eller privat (ExpressRoute) och det faktum att SAP-liggande fördelas mellan lokala och Azure.</span><span class="sxs-lookup"><span data-stu-id="f41ff-173">In the case of the SAP related documents, the Cross-Premises scenario just boils down to having a site-to-site or private (ExpressRoute) connectivity and the fact that the SAP landscape is distributed between on-premises and Azure.</span></span>  

### <span data-ttu-id="f41ff-174"><a name="e55d1e22-c2c8-460b-9897-64622a34fdff"></a>Resurser</span><span class="sxs-lookup"><span data-stu-id="f41ff-174"><a name="e55d1e22-c2c8-460b-9897-64622a34fdff"></a>Resources</span></span>
<span data-ttu-id="f41ff-175">Följande ytterligare guider är tillgängliga för avsnittet SAP-distribution på Azure:</span><span class="sxs-lookup"><span data-stu-id="f41ff-175">The following additional guides are available for the topic of SAP deployments on Azure:</span></span>

* <span data-ttu-id="f41ff-176">[SAP NetWeaver på Azure Virtual Machines (virtuella datorer) – planering och Implementation Guide (det här dokumentet)][planning-guide]</span><span class="sxs-lookup"><span data-stu-id="f41ff-176">[SAP NetWeaver on Azure Virtual Machines (VMs) – Planning and Implementation Guide (this document)][planning-guide]</span></span>
* <span data-ttu-id="f41ff-177">[SAP NetWeaver på virtuella Azure-datorer (VM) – Distributionsguide][deployment-guide]</span><span class="sxs-lookup"><span data-stu-id="f41ff-177">[SAP NetWeaver on Azure Virtual Machines (VMs) – Deployment Guide][deployment-guide]</span></span>
* <span data-ttu-id="f41ff-178">[SAP NetWeaver på virtuella Azure-datorer (VM) – DBMS Distributionsguide][dbms-guide]</span><span class="sxs-lookup"><span data-stu-id="f41ff-178">[SAP NetWeaver on Azure Virtual Machines (VMs) – DBMS Deployment Guide][dbms-guide]</span></span>
* <span data-ttu-id="f41ff-179">[SAP NetWeaver på virtuella Azure-datorer (VM) – Distributionsguide för hög tillgänglighet][ha-guide]</span><span class="sxs-lookup"><span data-stu-id="f41ff-179">[SAP NetWeaver on Azure Virtual Machines (VMs) – High Availability Deployment Guide][ha-guide]</span></span>

> [!IMPORTANT]
> <span data-ttu-id="f41ff-180">Om det är möjligt en länk till den refererande SAP-installationsguiden används (referens InstGuide-01, se <http://service.sap.com/instguides>).</span><span class="sxs-lookup"><span data-stu-id="f41ff-180">Wherever possible a link to the referring SAP Installation Guide is used (Reference InstGuide-01, see <http://service.sap.com/instguides>).</span></span> <span data-ttu-id="f41ff-181">När det gäller kraven och processen för installation, bör SAP NetWeaver installationen guider alltid läsas noggrant, som det här dokumentet beskriver endast specifika uppgifter för SAP NetWeaver system som är installerade i en Microsoft Azure-dator.</span><span class="sxs-lookup"><span data-stu-id="f41ff-181">When it comes to the prerequisites and installation process, the SAP NetWeaver Installation Guides should always be read carefully, as this document only covers specific tasks for SAP NetWeaver systems installed in a Microsoft Azure Virtual Machine.</span></span>
>
>

<span data-ttu-id="f41ff-182">Följande information för SAP är relaterade till avsnittet SAP i Azure:</span><span class="sxs-lookup"><span data-stu-id="f41ff-182">The following SAP Notes are related to the topic of SAP on Azure:</span></span>

| <span data-ttu-id="f41ff-183">Nummer</span><span class="sxs-lookup"><span data-stu-id="f41ff-183">Note number</span></span> | <span data-ttu-id="f41ff-184">Rubrik</span><span class="sxs-lookup"><span data-stu-id="f41ff-184">Title</span></span> |
| --- | --- |
| <span data-ttu-id="f41ff-185">[1928533]</span><span class="sxs-lookup"><span data-stu-id="f41ff-185">[1928533]</span></span> |<span data-ttu-id="f41ff-186">SAP-program i Azure: produkter och storlek som stöds</span><span class="sxs-lookup"><span data-stu-id="f41ff-186">SAP Applications on Azure: Supported Products and Sizing</span></span> |
| <span data-ttu-id="f41ff-187">[2015553]</span><span class="sxs-lookup"><span data-stu-id="f41ff-187">[2015553]</span></span> |<span data-ttu-id="f41ff-188">SAP på Microsoft Azure: stöd för krav</span><span class="sxs-lookup"><span data-stu-id="f41ff-188">SAP on Microsoft Azure: Support Prerequisites</span></span> |
| <span data-ttu-id="f41ff-189">[1999351]</span><span class="sxs-lookup"><span data-stu-id="f41ff-189">[1999351]</span></span> |<span data-ttu-id="f41ff-190">Felsökning av utökad Azure övervakning för SAP</span><span class="sxs-lookup"><span data-stu-id="f41ff-190">Troubleshooting Enhanced Azure Monitoring for SAP</span></span> |
| <span data-ttu-id="f41ff-191">[2178632]</span><span class="sxs-lookup"><span data-stu-id="f41ff-191">[2178632]</span></span> |<span data-ttu-id="f41ff-192">Key som övervakning mått för SAP på Microsoft Azure</span><span class="sxs-lookup"><span data-stu-id="f41ff-192">Key Monitoring Metrics for SAP on Microsoft Azure</span></span> |
| <span data-ttu-id="f41ff-193">[1409604]</span><span class="sxs-lookup"><span data-stu-id="f41ff-193">[1409604]</span></span> |<span data-ttu-id="f41ff-194">Virtualisering på Windows: förbättrad övervakning</span><span class="sxs-lookup"><span data-stu-id="f41ff-194">Virtualization on Windows: Enhanced Monitoring</span></span> |
| <span data-ttu-id="f41ff-195">[2191498]</span><span class="sxs-lookup"><span data-stu-id="f41ff-195">[2191498]</span></span> |<span data-ttu-id="f41ff-196">SAP på Linux med Azure: förbättrad övervakning</span><span class="sxs-lookup"><span data-stu-id="f41ff-196">SAP on Linux with Azure: Enhanced Monitoring</span></span> |
| <span data-ttu-id="f41ff-197">[2243692]</span><span class="sxs-lookup"><span data-stu-id="f41ff-197">[2243692]</span></span> |<span data-ttu-id="f41ff-198">Linux på Microsoft Azure (IaaS) VM: SAP problem</span><span class="sxs-lookup"><span data-stu-id="f41ff-198">Linux on Microsoft Azure (IaaS) VM: SAP license issues</span></span> |
| <span data-ttu-id="f41ff-199">[1984787]</span><span class="sxs-lookup"><span data-stu-id="f41ff-199">[1984787]</span></span> |<span data-ttu-id="f41ff-200">SUSE LINUX Enterprise Server 12: Installationsinformation</span><span class="sxs-lookup"><span data-stu-id="f41ff-200">SUSE LINUX Enterprise Server 12: Installation notes</span></span> |
| <span data-ttu-id="f41ff-201">[2002167]</span><span class="sxs-lookup"><span data-stu-id="f41ff-201">[2002167]</span></span> |<span data-ttu-id="f41ff-202">Red Hat Enterprise Linux 7.x: Installation och uppgradering</span><span class="sxs-lookup"><span data-stu-id="f41ff-202">Red Hat Enterprise Linux 7.x: Installation and Upgrade</span></span> |

<span data-ttu-id="f41ff-203">Läs även den [Tillståndsändringsavisering Wiki](https://wiki.scn.sap.com/wiki/display/HOME/SAPonLinuxNotes) som innehåller alla SAP anteckningar för Linux.</span><span class="sxs-lookup"><span data-stu-id="f41ff-203">Please also read the [SCN Wiki](https://wiki.scn.sap.com/wiki/display/HOME/SAPonLinuxNotes) that contains all SAP Notes for Linux.</span></span>

<span data-ttu-id="f41ff-204">Allmän standardbegränsningar och maximala begränsningar i Azure-prenumerationer finns i [i den här artikeln][azure-subscription-service-limits-subscription]</span><span class="sxs-lookup"><span data-stu-id="f41ff-204">General default limitations and maximum limitations of Azure subscriptions can be found in [this article][azure-subscription-service-limits-subscription]</span></span>

## <a name="possible-scenarios"></a><span data-ttu-id="f41ff-205">Möjliga scenarier</span><span class="sxs-lookup"><span data-stu-id="f41ff-205">Possible Scenarios</span></span>
<span data-ttu-id="f41ff-206">SAP visas ofta som en av de mest kritiska program i företag.</span><span class="sxs-lookup"><span data-stu-id="f41ff-206">SAP is often seen as one of the most mission-critical applications within enterprises.</span></span> <span data-ttu-id="f41ff-207">Arkitektur och drift av dessa program är främst mycket komplex och det är viktigt att se till att du uppfyller kraven på tillgänglighet och prestanda.</span><span class="sxs-lookup"><span data-stu-id="f41ff-207">The architecture and operations of these applications is mostly very complex and ensuring that you meet requirements on availability and performance is important.</span></span>

<span data-ttu-id="f41ff-208">Företag har därför Tänk noggrant om vilka program kan köras i ett offentligt moln miljö, oberoende av valda molnleverantören.</span><span class="sxs-lookup"><span data-stu-id="f41ff-208">Thus enterprises have to think carefully about which applications can be run in a Public Cloud environment, independent of the chosen Cloud provider.</span></span>

<span data-ttu-id="f41ff-209">Möjliga typer för att distribuera SAP NetWeaver baserat program i offentliga moln miljöer visas nedan:</span><span class="sxs-lookup"><span data-stu-id="f41ff-209">Possible system types for deploying SAP NetWeaver based applications within public cloud environments are listed below:</span></span>

1. <span data-ttu-id="f41ff-210">Medelhög storlek produktionssystem</span><span class="sxs-lookup"><span data-stu-id="f41ff-210">Medium sized production systems</span></span>
2. <span data-ttu-id="f41ff-211">Utvecklingssystem</span><span class="sxs-lookup"><span data-stu-id="f41ff-211">Development systems</span></span>
3. <span data-ttu-id="f41ff-212">Testa system</span><span class="sxs-lookup"><span data-stu-id="f41ff-212">Testing systems</span></span>
4. <span data-ttu-id="f41ff-213">Prototyp system</span><span class="sxs-lookup"><span data-stu-id="f41ff-213">Prototype systems</span></span>
5. <span data-ttu-id="f41ff-214">Learning / Demonstration system</span><span class="sxs-lookup"><span data-stu-id="f41ff-214">Learning / Demonstration systems</span></span>

<span data-ttu-id="f41ff-215">För att distribuera SAP-system i Azure IaaS eller IaaS i allmänhet, är det viktigt att förstå de viktiga skillnaderna mellan erbjudanden för traditionella outsourcers eller värdar och IaaS erbjudanden.</span><span class="sxs-lookup"><span data-stu-id="f41ff-215">In order to successfully deploy SAP systems into either Azure IaaS or IaaS in general, it is important to understand the significant differences between the offerings of traditional outsourcers or hosters and IaaS offerings.</span></span> <span data-ttu-id="f41ff-216">Traditionella värden eller outsourcer anpassas automatiskt infrastruktur (nätverk, lagring och server-typ) till en kund vill vara värd för arbetsbelastningen, är det i stället kundens ansvar att välja rätt arbetsbelastningen för IaaS-distributioner.</span><span class="sxs-lookup"><span data-stu-id="f41ff-216">Whereas the traditional hoster or outsourcer will adapt infrastructure (network, storage and server type) to the workload a customer wants to host, it is instead the customer’s responsibility to choose the right workload for IaaS deployments.</span></span>

<span data-ttu-id="f41ff-217">Som ett första steg bör måste kunder du kontrollera följande:</span><span class="sxs-lookup"><span data-stu-id="f41ff-217">As a first step, customers need to verify the following items:</span></span>

* <span data-ttu-id="f41ff-218">SAP stöds VM typer av Azure</span><span class="sxs-lookup"><span data-stu-id="f41ff-218">The SAP supported VM types of Azure</span></span>
* <span data-ttu-id="f41ff-219">SAP produkter/versioner som stöds på Azure</span><span class="sxs-lookup"><span data-stu-id="f41ff-219">The SAP supported products/releases on Azure</span></span>
* <span data-ttu-id="f41ff-220">Stöds operativsystem och DBMS utgåvor specifika SAP-versioner i Azure</span><span class="sxs-lookup"><span data-stu-id="f41ff-220">The supported OS and DBMS releases for the specific SAP releases in Azure</span></span>
* <span data-ttu-id="f41ff-221">SAP-genomströmning som tillhandahålls av olika Azure-SKU: er</span><span class="sxs-lookup"><span data-stu-id="f41ff-221">SAPS throughput provided by different Azure SKUs</span></span>

<span data-ttu-id="f41ff-222">Svaren på dessa frågor kan läsas i SAP-kommentar [1928533].</span><span class="sxs-lookup"><span data-stu-id="f41ff-222">The answers to these questions can be read in SAP Note [1928533].</span></span>

<span data-ttu-id="f41ff-223">Som ett andra steg måste Azure begränsningar för resursen och bandbredd som ska jämföras med faktiska resurser som används för lokala system.</span><span class="sxs-lookup"><span data-stu-id="f41ff-223">As a second step, Azure resource and bandwidth limitations need to be compared to actual resource consumption of on-premises systems.</span></span> <span data-ttu-id="f41ff-224">Kunder måste känna till de olika funktionerna i Azure typer som stöds med SAP i området:</span><span class="sxs-lookup"><span data-stu-id="f41ff-224">Therefore, customers need to be familiar with the different capabilities of the Azure types supported with SAP in the area of:</span></span>

* <span data-ttu-id="f41ff-225">Processor och minne resurser av VM av olika typer och</span><span class="sxs-lookup"><span data-stu-id="f41ff-225">CPU and memory resources of different VM types and</span></span>
* <span data-ttu-id="f41ff-226">IOPS bandbredd på VM av olika typer och</span><span class="sxs-lookup"><span data-stu-id="f41ff-226">IOPS bandwidth of different VM types and</span></span>
* <span data-ttu-id="f41ff-227">Nätverksfunktioner för VM av olika typer.</span><span class="sxs-lookup"><span data-stu-id="f41ff-227">Network capabilities of different VM types.</span></span>

<span data-ttu-id="f41ff-228">De flesta av dessa data kan hittas [här][virtual-machines-sizes]</span><span class="sxs-lookup"><span data-stu-id="f41ff-228">Most of that data can be found [here][virtual-machines-sizes]</span></span>

<span data-ttu-id="f41ff-229">Tänk på att gränserna som anges i länken ovan är den övre gränsen.</span><span class="sxs-lookup"><span data-stu-id="f41ff-229">Keep in mind that the limits listed in the link above are upper limits.</span></span> <span data-ttu-id="f41ff-230">Det innebär inte att gränserna för någon av resurser, t.ex. IOPS kan anges i alla fall.</span><span class="sxs-lookup"><span data-stu-id="f41ff-230">It does not mean that the limits for any of the resources, e.g. IOPS can be provided under all circumstances.</span></span> <span data-ttu-id="f41ff-231">Undantagen är dock CPU och minne resurser av typen valda VM.</span><span class="sxs-lookup"><span data-stu-id="f41ff-231">The exceptions though are the CPU and memory resources of a chosen VM type.</span></span> <span data-ttu-id="f41ff-232">För VM-typer som stöds av SAP, är CPU och minne resurserna reserverade och som sådan är tillgängliga när som helst i tid för användning i den virtuella datorn.</span><span class="sxs-lookup"><span data-stu-id="f41ff-232">For the VM types supported by SAP, the CPU and memory resources are reserved and as such available at any point in time for consumption within the VM.</span></span>

<span data-ttu-id="f41ff-233">Microsoft Azure-plattformen som andra plattformar, IaaS är flera innehavare.</span><span class="sxs-lookup"><span data-stu-id="f41ff-233">The Microsoft Azure platform like other IaaS platforms is a multi-tenant platform.</span></span> <span data-ttu-id="f41ff-234">Det innebär att lagring, nätverk och andra resurser delas mellan klienter.</span><span class="sxs-lookup"><span data-stu-id="f41ff-234">This means that Storage, Network and other resources are shared between tenants.</span></span> <span data-ttu-id="f41ff-235">Intelligent begränsning och kvot logik används för att förhindra att en klient påverka prestanda hos en annan klient (störningar granne) på drastiskt sätt.</span><span class="sxs-lookup"><span data-stu-id="f41ff-235">Intelligent throttling and quota logic is used to prevent one tenant from impacting the performance of another tenant (noisy neighbor) in a drastic way.</span></span> <span data-ttu-id="f41ff-236">Även om logiken i Azure försöker används keep avvikelser i bandbredd orsakade ett litet, hög delade plattformar tenderar att införa större avvikelser i resursen/bandbreddstillgänglighet än många kunder att i sina lokala distributioner.</span><span class="sxs-lookup"><span data-stu-id="f41ff-236">Though logic in Azure tries to keep variances in bandwidth experienced small, highly shared platforms tend to introduce larger variances in resource/bandwidth availability than a lot of customers are used to in their on-premises deployments.</span></span> <span data-ttu-id="f41ff-237">Därför kan det uppstå olika nivåer av bandbredd angående nätverks- eller i/o (volym samt svarstid) från en minut till en minut.</span><span class="sxs-lookup"><span data-stu-id="f41ff-237">As a result, you might experience different levels of bandwidth in regards to networking or storage I/O (the volume as well as latency) from minute to minute.</span></span> <span data-ttu-id="f41ff-238">Sannolikheten att ett SAP-system i Azure kan uppleva större avvikelser än i ett lokalt system måste beaktas.</span><span class="sxs-lookup"><span data-stu-id="f41ff-238">The probability that a SAP system on Azure could experience larger variances than in an on-premises system needs to be taken into account.</span></span>

<span data-ttu-id="f41ff-239">Sista steget är att utvärdera tillgänglighet.</span><span class="sxs-lookup"><span data-stu-id="f41ff-239">A last step is to evaluate availability requirements.</span></span> <span data-ttu-id="f41ff-240">Det kan inträffa att underliggande Azure-infrastrukturen behöver uppdateras och kräver värdar som kör virtuella datorer startas om.</span><span class="sxs-lookup"><span data-stu-id="f41ff-240">It can happen, that the underlying Azure infrastructure needs to get updated and requires the hosts running VMs to be rebooted.</span></span> <span data-ttu-id="f41ff-241">I dessa fall skulle virtuella datorer som körs på värdarna stängs av och startas också.</span><span class="sxs-lookup"><span data-stu-id="f41ff-241">In these cases, VMs running on those hosts would be shut down and restarted as well.</span></span> <span data-ttu-id="f41ff-242">Tidtagningen av sådana Underhåll görs under-core kontorstid för en viss region men fönstret potentiella några timmar under vilka en omstart kommer att ske är relativt stort.</span><span class="sxs-lookup"><span data-stu-id="f41ff-242">The timing of such maintenance is done during non-core business hours for a particular region but the potential window of a few hours during which a restart will occur is relatively wide.</span></span> <span data-ttu-id="f41ff-243">Det finns olika tekniker i Azure-plattformen som kan konfigureras för att åtgärda vissa eller alla effekten av dessa uppdateringar.</span><span class="sxs-lookup"><span data-stu-id="f41ff-243">There are various technologies within the Azure platform that can be configured to mitigate some or all of the impact of such updates.</span></span> <span data-ttu-id="f41ff-244">Framtida förbättringar av Azure-plattformen DBMS och SAP-program är utformade för att minimera effekten av sådana omstarter.</span><span class="sxs-lookup"><span data-stu-id="f41ff-244">Future enhancements of the Azure platform, DBMS and SAP application are designed to minimize the impact of such restarts.</span></span>

<span data-ttu-id="f41ff-245">För att distribuera en SAP-systemet till Azure, lokal SAP system operativsystem, databas och SAP-program måste visas på supportmatrisen SAP Azure passar med resurserna som kan ge Azure-infrastrukturen och som kan arbeta med Tillgänglighet SLA Microsoft Azure erbjuder.</span><span class="sxs-lookup"><span data-stu-id="f41ff-245">In order to successfully deploy a SAP system onto Azure, the on-premises SAP system(s) Operating System, Database and SAP applications must appear on the SAP Azure support matrix, fit within the resources the Azure infrastructure can provide and which can work with the Availability SLAs Microsoft Azure offers.</span></span> <span data-ttu-id="f41ff-246">Eftersom dessa system identifieras måste du bestämma på något av följande två distributionsscenarier.</span><span class="sxs-lookup"><span data-stu-id="f41ff-246">As those systems are identified, you need to decide on one of the following two deployment scenarios.</span></span>

### <span data-ttu-id="f41ff-247"><a name="1625df66-4cc6-4d60-9202-de8a0b77f803"></a>Endast molnbaserad - distributioner på virtuella datorer till Azure utan beroenden på lokala kundens nätverk</span><span class="sxs-lookup"><span data-stu-id="f41ff-247"><a name="1625df66-4cc6-4d60-9202-de8a0b77f803"></a>Cloud-Only - Virtual Machine deployments into Azure without dependencies on the on-premises customer network</span></span>
![Enskild virtuell dator med SAP demo eller utbildning scenario distribueras i Azure][planning-guide-figure-100]

<span data-ttu-id="f41ff-249">Det här scenariot är typiska för kurser eller demo system där alla komponenter för SAP och icke-program installeras på en enskild virtuell dator.</span><span class="sxs-lookup"><span data-stu-id="f41ff-249">This scenario is typical for trainings or demo systems, where all the components of SAP and non-SAP software are installed within a single VM.</span></span> <span data-ttu-id="f41ff-250">SAP produktionssystem stöds inte i det här distributionsscenariot.</span><span class="sxs-lookup"><span data-stu-id="f41ff-250">Production SAP systems are not supported in this deployment scenario.</span></span> <span data-ttu-id="f41ff-251">I allmänhet är uppfyller det här scenariot följande krav:</span><span class="sxs-lookup"><span data-stu-id="f41ff-251">In general, this scenario meets the following requirements:</span></span>

* <span data-ttu-id="f41ff-252">Virtuella datorerna är tillgängliga via ett offentligt nätverk.</span><span class="sxs-lookup"><span data-stu-id="f41ff-252">The VMs themselves are accessible over the public network.</span></span> <span data-ttu-id="f41ff-253">Direkta nätverksanslutningar för program som körs i de virtuella datorerna på det lokala nätverket för antingen företaget äger demonstrationer eller utbildningar innehåll eller kunden är inte nödvändigt.</span><span class="sxs-lookup"><span data-stu-id="f41ff-253">Direct network connectivity for the applications running within the VMs to the on-premises network of either the company owning the demos or trainings content or the customer is not necessary.</span></span>
* <span data-ttu-id="f41ff-254">Vid flera virtuella datorer som representerar utbildningar eller demo scenario, måste nätverket kommunikation och namnmatchning fungerar mellan de virtuella datorerna.</span><span class="sxs-lookup"><span data-stu-id="f41ff-254">In case of multiple VMs representing the trainings or demo scenario, network communications and name resolution needs to work between the VMs.</span></span> <span data-ttu-id="f41ff-255">Men kommunikation mellan en uppsättning virtuella datorer måste isoleras så att flera uppsättningar med virtuella datorer kan distribueras sida vid sida utan störningar.</span><span class="sxs-lookup"><span data-stu-id="f41ff-255">But communications between the set of VMs need to be isolated so that several sets of VMs can be deployed side by side without interference.</span></span>  
* <span data-ttu-id="f41ff-256">Internetanslutning krävs för att slutanvändaren kan fjärrinloggning till att de virtuella datorerna finns i Azure.</span><span class="sxs-lookup"><span data-stu-id="f41ff-256">Internet connectivity is required for the end user to remote login into to the VMs hosted in Azure.</span></span> <span data-ttu-id="f41ff-257">Beroende på gästen används OS, Terminal Services/RDS eller VNC/ssh för att komma åt den virtuella datorn att utföra uppgifter för utbildning eller utföra demonstrationer.</span><span class="sxs-lookup"><span data-stu-id="f41ff-257">Depending on the guest OS, Terminal Services/RDS or VNC/ssh is used to access the VM to either fulfill the training tasks or perform the demos.</span></span> <span data-ttu-id="f41ff-258">Om SAP-portarna som 3200, 3300 och 3600 kan också exponeras programinstansen SAP kan nås från alla anslutna Internet-skrivbordet.</span><span class="sxs-lookup"><span data-stu-id="f41ff-258">If SAP ports such as 3200, 3300 & 3600 can also be exposed the SAP application instance can be accessed from any Internet connected desktop.</span></span>
* <span data-ttu-id="f41ff-259">SAP system (och VM(s)) representerar ett fristående scenario i Azure som endast kräver en offentlig Internetanslutning för slutanvändaren åtkomst och inte kräver en anslutning till andra virtuella datorer i Azure.</span><span class="sxs-lookup"><span data-stu-id="f41ff-259">The SAP system(s) (and VM(s)) represent a standalone scenario in Azure which only requires public internet connectivity for end user access and does not require a connection to other VMs in Azure.</span></span>
* <span data-ttu-id="f41ff-260">SAPGUI och en webbläsare installeras och köras direkt på den virtuella datorn.</span><span class="sxs-lookup"><span data-stu-id="f41ff-260">SAPGUI and a browser are installed and run directly on the VM.</span></span>
* <span data-ttu-id="f41ff-261">Det krävs en snabb återställning av en virtuell dator till det ursprungliga tillståndet och ny distribution av det ursprungliga tillståndet igen.</span><span class="sxs-lookup"><span data-stu-id="f41ff-261">A fast reset of a VM to the original state and new deployment of that original state again is required.</span></span>
* <span data-ttu-id="f41ff-262">När det gäller demonstration och utbildning scenarier som realiseras i flera virtuella datorer, en Active Directory / OpenLDAP och/eller DNS-tjänsten krävs för varje uppsättning virtuella datorer.</span><span class="sxs-lookup"><span data-stu-id="f41ff-262">In the case of demo and training scenarios which are realized in multiple VMs, an Active Directory / OpenLDAP and/or DNS service is required for each set of VMs.</span></span>

![Grupp med Virtuella datorer som representerar en demo eller utbildning scenariot i en Azure-molntjänst][planning-guide-figure-200]

<span data-ttu-id="f41ff-264">Det är viktigt att tänka på att virtuella datorer i varje typ måste distribueras parallellt, där namnen VM i varje uppsättningen är samma.</span><span class="sxs-lookup"><span data-stu-id="f41ff-264">It is important to keep in mind that the VM(s) in each of the sets need to be deployed in parallel, where the VM names in each of the set are the same.</span></span>

### <span data-ttu-id="f41ff-265"><a name="f5b3b18c-302c-4bd8-9ab2-c388f1ab3d10"></a>anslutningar mellan lokala - distribution av en eller flera SAP virtuella datorer i Azure med krav på att fullständigt integrerat i det lokala nätverket</span><span class="sxs-lookup"><span data-stu-id="f41ff-265"><a name="f5b3b18c-302c-4bd8-9ab2-c388f1ab3d10"></a>cross-premises - Deployment of single or multiple SAP VMs into Azure with the requirement of being fully integrated into the on-premises network</span></span>
![VPN-anslutningar med plats-till-plats-anslutning (mellan platser)][planning-guide-figure-300]

<span data-ttu-id="f41ff-267">Det här scenariot är en scenarion med flera lokaler med många möjlig distribution mönster.</span><span class="sxs-lookup"><span data-stu-id="f41ff-267">This scenario is a Cross-Premises scenario with many possible deployment patterns.</span></span> <span data-ttu-id="f41ff-268">Det kan beskrivas så enkelt sätt som kör vissa delar av SAP liggande lokalt och andra delar av SAP liggande på Azure.</span><span class="sxs-lookup"><span data-stu-id="f41ff-268">It can be described as simply as running some parts of the SAP landscape on-premises and other parts of the SAP landscape on Azure.</span></span> <span data-ttu-id="f41ff-269">Alla aspekter av det faktum som en del av SAP-komponenter körs på Azure ska vara transparent för slutanvändare.</span><span class="sxs-lookup"><span data-stu-id="f41ff-269">All aspects of the fact that part of the SAP components are running on Azure should be transparent for end users.</span></span> <span data-ttu-id="f41ff-270">Därför fungerar SAP Transport Correction System (STM), RFC kommunikation, utskrift, säkerhet (till exempel SSO), etc. sömlöst för SAP-system som körs på Azure.</span><span class="sxs-lookup"><span data-stu-id="f41ff-270">Hence the SAP Transport Correction System (STMS), RFC Communication, Printing, Security (like SSO), etc. will work seamlessly for the SAP systems running on Azure.</span></span> <span data-ttu-id="f41ff-271">Men i scenarion med flera lokaler beskriver också ett scenario där fullständig SAP liggande körs i Azure med kundens domänen och DNS utökats till Azure.</span><span class="sxs-lookup"><span data-stu-id="f41ff-271">But the Cross-Premises scenario also describes a scenario where the complete SAP landscape runs in Azure with the customer’s domain and DNS extended into Azure.</span></span>

> [!NOTE]
> <span data-ttu-id="f41ff-272">Detta är det distributionsscenariot som stöds för att köra produktiva SAP-system.</span><span class="sxs-lookup"><span data-stu-id="f41ff-272">This is the deployment scenario which is supported for running productive SAP systems.</span></span>
>
>

<span data-ttu-id="f41ff-273">Läs [i den här artikeln] [ vpn-gateway-create-site-to-site-rm-powershell] mer information om hur du ansluter din lokala nätverk till Microsoft Azure</span><span class="sxs-lookup"><span data-stu-id="f41ff-273">Read [this article][vpn-gateway-create-site-to-site-rm-powershell] for more information on how to connect your on-premises network to Microsoft Azure</span></span>

> [!IMPORTANT]
> <span data-ttu-id="f41ff-274">När vi pratar om anslutningar mellan lokala scenarier mellan Azure och lokala kunddistributioner tittar vi Granulariteten för hela SAP-system.</span><span class="sxs-lookup"><span data-stu-id="f41ff-274">When we are talking about Cross-Premises scenarios between Azure and on-premises customer deployments, we are looking at the granularity of whole SAP systems.</span></span> <span data-ttu-id="f41ff-275">Scenarier som är *stöds inte* för anslutningar mellan lokala scenarier är:</span><span class="sxs-lookup"><span data-stu-id="f41ff-275">Scenarios which are *not supported* for Cross-Premises scenarios are:</span></span>
>
> * <span data-ttu-id="f41ff-276">Olika lager i SAP-program som körs i olika distributionsmetoder.</span><span class="sxs-lookup"><span data-stu-id="f41ff-276">Running different layers of SAP applications in different deployment methods.</span></span> <span data-ttu-id="f41ff-277">T.ex.</span><span class="sxs-lookup"><span data-stu-id="f41ff-277">E.g.</span></span> <span data-ttu-id="f41ff-278">köra den DBMS layer lokalt, men programnivå SAP i virtuella datorer som distribueras som virtuella Azure-datorer eller tvärtom.</span><span class="sxs-lookup"><span data-stu-id="f41ff-278">running the DBMS layer on-premises, but the SAP application layer in VMs deployed as Azure VMs or vice versa.</span></span>
> * <span data-ttu-id="f41ff-279">Vissa komponenter i ett SAP-lager i Azure och vissa lokalt.</span><span class="sxs-lookup"><span data-stu-id="f41ff-279">Some components of an SAP layer in Azure and some on-premises.</span></span> <span data-ttu-id="f41ff-280">T.ex.</span><span class="sxs-lookup"><span data-stu-id="f41ff-280">E.g.</span></span> <span data-ttu-id="f41ff-281">dela upp instanser av SAP Applikationsnivån mellan lokala och virtuella Azure-datorer.</span><span class="sxs-lookup"><span data-stu-id="f41ff-281">splitting Instances of the SAP application layer between on-premises and Azure VMs.</span></span>
> * <span data-ttu-id="f41ff-282">Distribution av virtuella datorer som kör SAP instanser av ett system över flera Azure-regioner stöds inte.</span><span class="sxs-lookup"><span data-stu-id="f41ff-282">Distribution of VMs running SAP instances of one system over multiple Azure Regions is not supported.</span></span>
>
> <span data-ttu-id="f41ff-283">Orsaken till dessa begränsningar är krav för ett nätverk med mycket låg svarstid höga prestanda i en SAP-systemet, särskilt mellan programinstanser och DBMS-lager av ett SAP-system.</span><span class="sxs-lookup"><span data-stu-id="f41ff-283">The reason for these restrictions is the requirement for a very low latency high performance network within one SAP system, especially between the application instances and the DBMS layer of a SAP system.</span></span>
>
>

### <a name="supported-os-and-database-releases"></a><span data-ttu-id="f41ff-284">OS- och databasen versioner som stöds</span><span class="sxs-lookup"><span data-stu-id="f41ff-284">Supported OS and Database Releases</span></span>
* <span data-ttu-id="f41ff-285">Microsoft server-program stöds för virtuella Azure-tjänster ingår i den här artikeln: <http://support.microsoft.com/kb/2721672>.</span><span class="sxs-lookup"><span data-stu-id="f41ff-285">Microsoft server software supported for Azure Virtual Machine Services is listed in this article: <http://support.microsoft.com/kb/2721672>.</span></span>
* <span data-ttu-id="f41ff-286">Operativsystem system-versioner som stöds, databasen system-versioner som stöds på virtuella Azure-tjänster tillsammans med SAP-program finns dokumenterade i SAP-kommentar [1928533].</span><span class="sxs-lookup"><span data-stu-id="f41ff-286">Supported operating system releases, database system releases supported on Azure Virtual Machine Services in conjunction with SAP software are documented in SAP Note [1928533].</span></span>
* <span data-ttu-id="f41ff-287">SAP-program och versioner som stöds på virtuella Azure-tjänster som finns dokumenterade i SAP-kommentar [1928533].</span><span class="sxs-lookup"><span data-stu-id="f41ff-287">SAP applications and releases supported on Azure Virtual Machine Services are documented in SAP Note [1928533].</span></span>
* <span data-ttu-id="f41ff-288">Endast 64-bitarsavbildningar stöds för att köras som gäst-VM i Azure för SAP-scenarier.</span><span class="sxs-lookup"><span data-stu-id="f41ff-288">Only 64Bit images are supported to run as Guest VMs in Azure for SAP scenarios.</span></span> <span data-ttu-id="f41ff-289">Det innebär att endast 64-bitars SAP-program och databaser stöds.</span><span class="sxs-lookup"><span data-stu-id="f41ff-289">This also means that only 64-bit SAP applications and databases are supported.</span></span>

## <a name="microsoft-azure-virtual-machine-services"></a><span data-ttu-id="f41ff-290">Virtuella Microsoft Azure-tjänster</span><span class="sxs-lookup"><span data-stu-id="f41ff-290">Microsoft Azure Virtual Machine Services</span></span>
<span data-ttu-id="f41ff-291">Microsoft Azure-plattformen är en internet-skala molnplattform finns och drivas på ett Microsoft-datacenter.</span><span class="sxs-lookup"><span data-stu-id="f41ff-291">The Microsoft Azure platform is an internet-scale cloud services platform hosted and operated in Microsoft data centers.</span></span> <span data-ttu-id="f41ff-292">Plattformen som inkluderar Microsoft Azure Virtual Machine-tjänster (infrastruktur som en tjänst eller IaaS) och en uppsättning omfattande plattform som en tjänst (PaaS)-funktioner.</span><span class="sxs-lookup"><span data-stu-id="f41ff-292">The platform includes the Microsoft Azure Virtual Machine Services (Infrastructure as a Service, or IaaS) and a set of rich Platform as a Service (PaaS) capabilities.</span></span>

<span data-ttu-id="f41ff-293">Azure-plattformen minskar behovet av direkta teknik och infrastruktur inköp.</span><span class="sxs-lookup"><span data-stu-id="f41ff-293">The Azure platform reduces the need for up-front technology and infrastructure purchases.</span></span> <span data-ttu-id="f41ff-294">Det förenklar underhåll och drift av program genom att tillhandahålla på begäran beräkning och lagring till värdar, skala och hantera webbprogram och anslutna program.</span><span class="sxs-lookup"><span data-stu-id="f41ff-294">It simplifies maintaining and operating applications by providing on-demand compute and storage to host, scale and manage web application and connected applications.</span></span> <span data-ttu-id="f41ff-295">Infrastrukturhantering är automatisk med en plattform som är avsedd för hög tillgänglighet och dynamisk skalning för att matcha användarbehov med alternativet för en modell med betalning per användning prisnivå.</span><span class="sxs-lookup"><span data-stu-id="f41ff-295">Infrastructure management is automated with a platform that is designed for high availability and dynamic scaling to match usage needs with the option of a pay-as-you-go pricing model.</span></span>

![Placering av virtuella Microsoft Azure-tjänster][planning-guide-figure-400]

<span data-ttu-id="f41ff-297">Med Azure-tjänster för virtuella datorer, Microsoft för att du kan distribuera anpassade server-avbildningar till Azure som IaaS instanser (se figur 4).</span><span class="sxs-lookup"><span data-stu-id="f41ff-297">With Azure Virtual Machine Services, Microsoft is enabling you to deploy custom server images to Azure as IaaS instances (see Figure 4).</span></span> <span data-ttu-id="f41ff-298">De virtuella datorerna i Azure baseras på Hyper-V virtuella hårddiskar (VHD) och kunna kör olika operativsystem som Gästoperativsystem.</span><span class="sxs-lookup"><span data-stu-id="f41ff-298">The Virtual Machines in Azure are based on Hyper-V virtual hard drives (VHD) and are able to run different operating systems as Guest OS.</span></span>

<span data-ttu-id="f41ff-299">Ur ett operativa erbjuder virtuella Azure-tjänsten liknande åtgärder som virtuella datorer som distribuerats lokalt.</span><span class="sxs-lookup"><span data-stu-id="f41ff-299">From an operational perspective, the Azure Virtual Machine Service offers similar experiences as virtual machines deployed on premises.</span></span> <span data-ttu-id="f41ff-300">Men har betydande fördelar som du inte behöver köpa, administrera och hantera infrastrukturen.</span><span class="sxs-lookup"><span data-stu-id="f41ff-300">However, it has the significant advantage that you don’t need to procure, administer and manage the infrastructure.</span></span> <span data-ttu-id="f41ff-301">Utvecklare och administratörer har fullständig kontroll av operativsystemavbildningen i dessa virtuella datorer.</span><span class="sxs-lookup"><span data-stu-id="f41ff-301">Developers and Administrators have full control of the operating system image within these virtual machines.</span></span> <span data-ttu-id="f41ff-302">Administratörer kan logga in via en fjärranslutning till de virtuella datorerna för att utföra underhåll och felsökning aktiviteter samt programvara distributionsåtgärder.</span><span class="sxs-lookup"><span data-stu-id="f41ff-302">Administrators can logon remotely into those virtual machines to perform maintenance and troubleshooting tasks as well as software deployment tasks.</span></span> <span data-ttu-id="f41ff-303">Om distributionen är endast begränsningarna storlekar och funktionerna i virtuella Azure-datorer.</span><span class="sxs-lookup"><span data-stu-id="f41ff-303">In regard to deployment, the only restrictions are the sizes and capabilities of Azure VMs.</span></span> <span data-ttu-id="f41ff-304">Dessa kanske inte lika bra detaljerade i konfigurationen som detta kan göras lokalt.</span><span class="sxs-lookup"><span data-stu-id="f41ff-304">These may not be as fine granular in configuration as this could be done on premises.</span></span> <span data-ttu-id="f41ff-305">Det finns ett val av VM-typer som representerar en kombination av:</span><span class="sxs-lookup"><span data-stu-id="f41ff-305">There is a choice of VM types that represent a combination of:</span></span>

* <span data-ttu-id="f41ff-306">Antal vCPUs,</span><span class="sxs-lookup"><span data-stu-id="f41ff-306">Number of vCPUs,</span></span>
* <span data-ttu-id="f41ff-307">Minne,</span><span class="sxs-lookup"><span data-stu-id="f41ff-307">Memory,</span></span>
* <span data-ttu-id="f41ff-308">Antal virtuella hårddiskar som kan kopplas</span><span class="sxs-lookup"><span data-stu-id="f41ff-308">Number of VHDs that can be attached,</span></span>
* <span data-ttu-id="f41ff-309">Nätverk och lagring bandbredder.</span><span class="sxs-lookup"><span data-stu-id="f41ff-309">Network and Storage bandwidths.</span></span>

<span data-ttu-id="f41ff-310">Storlek och begränsningar med olika storlekar för olika virtuella datorer som kan ses i en tabell i [i den här artikeln][virtual-machines-sizes]</span><span class="sxs-lookup"><span data-stu-id="f41ff-310">The size and limitations of various different virtual machines sizes offered can be seen in a table in [this article][virtual-machines-sizes]</span></span>

<span data-ttu-id="f41ff-311">När du uppnår finns det olika familjer eller antal virtuella datorer.</span><span class="sxs-lookup"><span data-stu-id="f41ff-311">As you will realize there are different families or series of virtual machines.</span></span> <span data-ttu-id="f41ff-312">Från och med Dec 2015, kan du skilja familjerna för virtuella datorer:</span><span class="sxs-lookup"><span data-stu-id="f41ff-312">As of Dec 2015, you can distinguish the following families of VMs:</span></span>

* <span data-ttu-id="f41ff-313">A0 A7 VM typer: inte alla de som är certifierade för SAP.</span><span class="sxs-lookup"><span data-stu-id="f41ff-313">A0-A7 VM types: Not all of those are certified for SAP.</span></span> <span data-ttu-id="f41ff-314">Första VM-serien som Azure IaaS fick introducerades i.</span><span class="sxs-lookup"><span data-stu-id="f41ff-314">First VM series that Azure IaaS got introduced with.</span></span>
* <span data-ttu-id="f41ff-315">A8 A11 VM typer: höga prestanda instanser.</span><span class="sxs-lookup"><span data-stu-id="f41ff-315">A8-A11 VM types: High Performance computing instances.</span></span> <span data-ttu-id="f41ff-316">Körs på olika bättre utför beräkna värddatorer än andra A-series virtuella datorer.</span><span class="sxs-lookup"><span data-stu-id="f41ff-316">Running on different better performing compute hosts than other A-series VMs.</span></span>
* <span data-ttu-id="f41ff-317">D-serien VM typer: utför bättre än A0 A7.</span><span class="sxs-lookup"><span data-stu-id="f41ff-317">D-Series VM types: Better performing than A0-A7.</span></span> <span data-ttu-id="f41ff-318">Inte alla VM-typer är certifierade med SAP.</span><span class="sxs-lookup"><span data-stu-id="f41ff-318">Not all of the VM types are certified with SAP.</span></span>
* <span data-ttu-id="f41ff-319">DS-serien VM typer: använda samma värdar som D-serien, men kan ansluta till Azure Premium-lagring (finns i kapitlet [Azure Premium Storage] [ planning-guide-3.3.2] i det här dokumentet).</span><span class="sxs-lookup"><span data-stu-id="f41ff-319">DS-Series VM types: use same hosts as D-series, but are able to connect to Azure Premium Storage (see chapter [Azure Premium Storage][planning-guide-3.3.2] of this document).</span></span> <span data-ttu-id="f41ff-320">Igen inte alla VM-typer som är certifierade med SAP.</span><span class="sxs-lookup"><span data-stu-id="f41ff-320">Again not all VM types are certified with SAP.</span></span>
* <span data-ttu-id="f41ff-321">G-serien VM typer: höga minnesområdet VM-typer.</span><span class="sxs-lookup"><span data-stu-id="f41ff-321">G-Series VM types: High memory VM types.</span></span>
* <span data-ttu-id="f41ff-322">GS-serien VM typer: som G-serien men med alternativet att använda Azure Premium-lagring (finns i kapitlet [Azure Premium Storage] [ planning-guide-3.3.2] i det här dokumentet).</span><span class="sxs-lookup"><span data-stu-id="f41ff-322">GS-Series VM types : like G-Series but including the option to use Azure Premium Storage ( see chapter [Azure Premium Storage][planning-guide-3.3.2] of this document ).</span></span> <span data-ttu-id="f41ff-323">När du använder GS-serien virtuella datorer som databasservrar är det obligatoriskt att använda Premium-lagring för DB data och transaktionen loggfiler</span><span class="sxs-lookup"><span data-stu-id="f41ff-323">When using GS-Series VMs as database servers it's mandatory to use Premium Storage for DB data and transaction log files</span></span>

<span data-ttu-id="f41ff-324">Du hittar samma Processorn och RAM-minne i olika virtuella dator-serien.</span><span class="sxs-lookup"><span data-stu-id="f41ff-324">You may find the same CPU and memory configurations in different VM series.</span></span> <span data-ttu-id="f41ff-325">Dock när du letar efter kapaciteten på dessa virtuella datorer utanför annan serie de skiljer sig avsevärt.</span><span class="sxs-lookup"><span data-stu-id="f41ff-325">Nevertheless, when you look up the throughput performance of these VMs out of the different series they might differ significantly.</span></span> <span data-ttu-id="f41ff-326">Trots att ha samma konfiguration för CPU och minne.</span><span class="sxs-lookup"><span data-stu-id="f41ff-326">Despite having the same CPU and memory configuration.</span></span> <span data-ttu-id="f41ff-327">Orsaken är att den underliggande värd servermaskinvaran vid införandet av de olika typerna av VM hade olika dataflödesegenskaper.</span><span class="sxs-lookup"><span data-stu-id="f41ff-327">Reason is that the underlying host server hardware at the introduction of the different VM types had different throughput characteristics.</span></span>  <span data-ttu-id="f41ff-328">Vanligtvis återspeglas skillnaden visas i kapaciteten också i priset för olika virtuella datorer.</span><span class="sxs-lookup"><span data-stu-id="f41ff-328">Usually the difference shown in throughput performance also is reflected in the price of the different VMs.</span></span>

<span data-ttu-id="f41ff-329">Observera att inte alla olika VM-serien kan erbjuds i var och en av de Azure-regioner (för Azure-regioner finns nästa kapitel).</span><span class="sxs-lookup"><span data-stu-id="f41ff-329">Please note that not all different VM series might be offered in each one of the Azure Regions (for Azure Regions see next chapter).</span></span> <span data-ttu-id="f41ff-330">Tänk också att inte alla virtuella datorer eller VM-serien är certifierad för SAP.</span><span class="sxs-lookup"><span data-stu-id="f41ff-330">Also be aware that not all VMs or VM-Series are certified for SAP.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="f41ff-331">Användning av SAP NetWeaver baserat program, endast del av VM-typer och konfigurationer som anges i SAP-kommentar [1928533] stöds.</span><span class="sxs-lookup"><span data-stu-id="f41ff-331">For the use of SAP NetWeaver based applications, only the subset of VM types and configurations listed in SAP Note [1928533] are supported.</span></span>
>
>

### <span data-ttu-id="f41ff-332"><a name="be80d1b9-a463-4845-bd35-f4cebdb5424a"></a>Azure-regioner</span><span class="sxs-lookup"><span data-stu-id="f41ff-332"><a name="be80d1b9-a463-4845-bd35-f4cebdb5424a"></a>Azure Regions</span></span>
<span data-ttu-id="f41ff-333">Microsoft kan distribuera virtuella datorer i så kallade ”Azure-regioner”.</span><span class="sxs-lookup"><span data-stu-id="f41ff-333">Microsoft allows to deploy Virtual Machines into so called ‘Azure Regions’.</span></span> <span data-ttu-id="f41ff-334">En Azure-Region kanske en eller flera datacenter som befinner sig i närheten.</span><span class="sxs-lookup"><span data-stu-id="f41ff-334">An Azure Region may be one or multiple data centers that are located in close proximity.</span></span> <span data-ttu-id="f41ff-335">Microsoft har minst två Azure-regioner för de flesta av de geopolitiska regionerna i världen.</span><span class="sxs-lookup"><span data-stu-id="f41ff-335">For most of the geopolitical regions in the world Microsoft has at least two Azure Regions.</span></span> <span data-ttu-id="f41ff-336">T.ex.</span><span class="sxs-lookup"><span data-stu-id="f41ff-336">E.g.</span></span> <span data-ttu-id="f41ff-337">Det finns en Azure-Region 'Nordeuropa, och ett av 'Västeuropa' i Europa.</span><span class="sxs-lookup"><span data-stu-id="f41ff-337">in Europe there is an Azure Region of ‘North Europe’ and one of ‘West Europe’.</span></span> <span data-ttu-id="f41ff-338">Dessa två Azure-regioner inom en geopolitiska region avgränsas med tillräckligt betydande avstånd så att naturliga eller tekniska katastrofer inte påverkar både Azure-regioner i samma geopolitiska region.</span><span class="sxs-lookup"><span data-stu-id="f41ff-338">Such two Azure Regions within a geopolitical region are separated by significant enough distance so that natural or technical disasters do not affect both Azure Regions in the same geopolitical region.</span></span> <span data-ttu-id="f41ff-339">Eftersom Microsoft bygger stadigt ut nya Azure-regioner i olika geopolitiska regioner globalt, växande ständigt antal dessa regioner och från och med Dec 2015 uppnått antalet 20 Azure-regioner med ytterligare områden som redan har presenterat.</span><span class="sxs-lookup"><span data-stu-id="f41ff-339">Since Microsoft is steadily building out new Azure Regions in different geopolitical regions globally, the number of these regions is steadily growing and as of Dec 2015 reached the number of 20 Azure Regions with additional Regions announced already.</span></span> <span data-ttu-id="f41ff-340">I alla dessa regioner, inklusive de två regionerna Azure i Kina kan du som kund distribuera SAP-system.</span><span class="sxs-lookup"><span data-stu-id="f41ff-340">You as a customer can deploy SAP systems into all these regions, including the two Azure Regions in China.</span></span> <span data-ttu-id="f41ff-341">För aktuella uppdaterade information om Azure-regioner finns i den här webbplatsen: <https://azure.microsoft.com/regions/></span><span class="sxs-lookup"><span data-stu-id="f41ff-341">For current up to date information about Azure regions see this website : <https://azure.microsoft.com/regions/></span></span>

### <span data-ttu-id="f41ff-342"><a name="8d8ad4b8-6093-4b91-ac36-ea56d80dbf77"></a>Begreppet virtuella Microsoft Azure</span><span class="sxs-lookup"><span data-stu-id="f41ff-342"><a name="8d8ad4b8-6093-4b91-ac36-ea56d80dbf77"></a>The Microsoft Azure Virtual Machine Concept</span></span>
<span data-ttu-id="f41ff-343">Microsoft Azure tillhandahåller en infrastruktur som en tjänst (IaaS) till värd för virtuella datorer med liknande funktioner som ett lokalt virtualiseringslösning.</span><span class="sxs-lookup"><span data-stu-id="f41ff-343">Microsoft Azure offers an Infrastructure as a Service (IaaS) solution to host Virtual Machines with similar functionalities as an on-premises virtualization solution.</span></span> <span data-ttu-id="f41ff-344">Du kan skapa virtuella datorer från i Azure Portal, PowerShell eller CLI, som också ger distribution och hanteringsfunktioner.</span><span class="sxs-lookup"><span data-stu-id="f41ff-344">You are able to create Virtual Machines from within the Azure Portal, PowerShell or CLI, which also offer deployment and management capabilities.</span></span>

<span data-ttu-id="f41ff-345">Med Azure Resource Manager kan du etablera dina program med hjälp av en deklarativ mall.</span><span class="sxs-lookup"><span data-stu-id="f41ff-345">Azure Resource Manager allows you to provision your applications using a declarative template.</span></span> <span data-ttu-id="f41ff-346">I samma mall kan du distribuera flera tjänster tillsammans med deras beroenden.</span><span class="sxs-lookup"><span data-stu-id="f41ff-346">In a single template, you can deploy multiple services along with their dependencies.</span></span> <span data-ttu-id="f41ff-347">Du kan använda samma mall för att upprepade gånger distribuera programmet under varje steg i livscykeln för programmet.</span><span class="sxs-lookup"><span data-stu-id="f41ff-347">You use the same template to repeatedly deploy your application during every stage of the application life cycle.</span></span>

<span data-ttu-id="f41ff-348">Mer information om hur du använder ARM-mallar finns här:</span><span class="sxs-lookup"><span data-stu-id="f41ff-348">More information about using ARM templates can be found here :</span></span>

* <span data-ttu-id="f41ff-349">[Distribuera och hantera virtuella datorer med hjälp av Azure Resource Manager-mallar och Azure CLI][virtual-machines-linux-cli-deploy-templates]</span><span class="sxs-lookup"><span data-stu-id="f41ff-349">[Deploy and manage virtual machines by using Azure Resource Manager templates and the Azure CLI][virtual-machines-linux-cli-deploy-templates]</span></span>
* <span data-ttu-id="f41ff-350">[Hantera virtuella datorer med Azure Resource Manager och PowerShell][virtual-machines-deploy-rmtemplates-powershell]</span><span class="sxs-lookup"><span data-stu-id="f41ff-350">[Manage virtual machines using Azure Resource Manager and PowerShell][virtual-machines-deploy-rmtemplates-powershell]</span></span>
* <span data-ttu-id="f41ff-351"><https://Azure.microsoft.com/Documentation/Templates/></span><span class="sxs-lookup"><span data-stu-id="f41ff-351"><https://azure.microsoft.com/documentation/templates/></span></span>

<span data-ttu-id="f41ff-352">En annan intressant funktion är möjligheten att skapa avbildningar av virtuella datorer, där du kan förbereda vissa databaser som du kan snabbt distribuera instanser för virtuella datorer som uppfyller dina krav.</span><span class="sxs-lookup"><span data-stu-id="f41ff-352">Another interesting feature is the ability to create images from Virtual Machines, which allows you to prepare certain repositories from which you are able to quickly deploy Virtual machine instances which meet your requirements.</span></span>

<span data-ttu-id="f41ff-353">Mer information om hur du skapar bilder från virtuella datorer finns i [i den här artikeln (Windows)] [ virtual-machines-windows-capture-image] eller i [(Linux) för den här artikeln] [ virtual-machines-linux-capture-image].</span><span class="sxs-lookup"><span data-stu-id="f41ff-353">More information about creating images from Virtual Machines can be found in [this article (Windows)][virtual-machines-windows-capture-image] or in [this article (Linux)][virtual-machines-linux-capture-image].</span></span>

#### <span data-ttu-id="f41ff-354"><a name="df49dc09-141b-4f34-a4a2-990913b30358"></a>Feldomäner</span><span class="sxs-lookup"><span data-stu-id="f41ff-354"><a name="df49dc09-141b-4f34-a4a2-990913b30358"></a>Fault Domains</span></span>
<span data-ttu-id="f41ff-355">Feldomäner representerar en fysisk enhet skulle misslyckas, mycket nära relaterade till den fysiska infrastrukturen i datacenter och när en fysisk bladet eller rack kan betraktas som en Feldomän finns det ingen direkt mappningen mellan två.</span><span class="sxs-lookup"><span data-stu-id="f41ff-355">Fault Domains represent a physical unit of failure, very closely related to the physical infrastructure contained in data centers, and while a physical blade or rack can be considered a Fault Domain, there is no direct one-to-one mapping between the two.</span></span>

<span data-ttu-id="f41ff-356">Du kan påverka Azure-Infrastrukturkontrollanten att distribuera programmet till olika Feldomäner, vilket uppfyller kraven i Microsoft Azure-serviceavtalet när du distribuerar flera virtuella datorer som en del av en SAP-system i virtuella Microsoft Azure-tjänster.</span><span class="sxs-lookup"><span data-stu-id="f41ff-356">When you deploy multiple Virtual Machines as part of one SAP system in Microsoft Azure Virtual Machine Services, you can influence the Azure Fabric Controller to deploy your application into different Fault Domains, thereby meeting the requirements of the Microsoft Azure SLA.</span></span> <span data-ttu-id="f41ff-357">Distribution av Feldomäner i en Azure-Skalningsenhet (insamling av hundratals datornoder eller lagringsnoder och nätverk) eller tilldelning av virtuella datorer till en specifik Feldomän är dock något som du inte har direkt kontroll.</span><span class="sxs-lookup"><span data-stu-id="f41ff-357">However, the distribution of Fault Domains over an Azure Scale Unit (collection of hundreds of Compute nodes or Storage nodes and networking) or the assignment of VMs to a specific Fault Domain is something over which you do not have direct control.</span></span> <span data-ttu-id="f41ff-358">För att kunna dirigera Azure-infrastrukturkontrollanten att distribuera en uppsättning virtuella datorer via olika Feldomäner, måste du tilldela en Azure Tillgänglighetsuppsättning till de virtuella datorerna vid tidpunkten för distribution.</span><span class="sxs-lookup"><span data-stu-id="f41ff-358">In order to direct the Azure fabric controller to deploy a set of VMs over different Fault Domains, you need to assign an Azure Availability Set to the VMs at deployment time.</span></span> <span data-ttu-id="f41ff-359">Mer information om Azure-Tillgänglighetsuppsättningar finns i kapitlet [Azure-Tillgänglighetsuppsättningar] [ planning-guide-3.2.3] i det här dokumentet.</span><span class="sxs-lookup"><span data-stu-id="f41ff-359">For more information on Azure Availability Sets, see chapter [Azure Availability Sets][planning-guide-3.2.3] in this document.</span></span>

#### <span data-ttu-id="f41ff-360"><a name="fc1ac8b2-e54a-487c-8581-d3cc6625e560"></a>Uppgradera domäner</span><span class="sxs-lookup"><span data-stu-id="f41ff-360"><a name="fc1ac8b2-e54a-487c-8581-d3cc6625e560"></a>Upgrade Domains</span></span>
<span data-ttu-id="f41ff-361">Uppgraderingsdomäner representerar en logisk enhet som hjälp för att avgöra hur en virtuell dator i en SAP-system som består av SAP-instanser som körs i flera virtuella datorer kommer att uppdateras.</span><span class="sxs-lookup"><span data-stu-id="f41ff-361">Upgrade Domains represent a logical unit that help to determine how a VM within an SAP system, that consists of SAP instances running in multiple VMs, will be updated.</span></span> <span data-ttu-id="f41ff-362">När en uppgradering sker går Microsoft Azure igenom processen för att uppdatera dessa Uppgraderingsdomäner i taget.</span><span class="sxs-lookup"><span data-stu-id="f41ff-362">When an upgrade occurs, Microsoft Azure goes through the process of updating these Upgrade Domains one by one.</span></span> <span data-ttu-id="f41ff-363">Du kan skydda SAP systemet delvis från potentiell nedtid genom att sprida VMs vid tidpunkten för distribution över olika uppgradera domäner.</span><span class="sxs-lookup"><span data-stu-id="f41ff-363">By spreading VMs at deployment time over different Upgrade Domains you can protect your SAP system partly from potential downtime.</span></span> <span data-ttu-id="f41ff-364">Du måste ange ett specifikt attribut vid tidpunkten för distribution av varje virtuell dator för att tvinga Azure för att distribuera de virtuella datorerna i ett SAP-system som är utspridda över olika uppgradera domäner.</span><span class="sxs-lookup"><span data-stu-id="f41ff-364">In order to force Azure to deploy the VMs of an SAP system spread over different Upgrade Domains, you need to set a specific attribute at deployment time of each VM.</span></span> <span data-ttu-id="f41ff-365">Liknar Feldomäner, en Skalningsenhet för Azure är indelade i flera uppgradera domäner.</span><span class="sxs-lookup"><span data-stu-id="f41ff-365">Similar to Fault Domains, an Azure Scale Unit is divided into multiple Upgrade Domains.</span></span> <span data-ttu-id="f41ff-366">För att kunna dirigera Azure-infrastrukturkontrollanten att distribuera en uppsättning virtuella datorer via olika uppgradera domäner, måste du tilldela en Azure Tillgänglighetsuppsättning till de virtuella datorerna vid tidpunkten för distribution.</span><span class="sxs-lookup"><span data-stu-id="f41ff-366">In order to direct the Azure fabric controller to deploy a set of VMs over different Upgrade Domains, you need to assign an Azure Availability Set to the VMs at deployment time.</span></span> <span data-ttu-id="f41ff-367">Mer information om Azure-Tillgänglighetsuppsättningar finns i kapitlet [Azure-Tillgänglighetsuppsättningar] [ planning-guide-3.2.3] nedan.</span><span class="sxs-lookup"><span data-stu-id="f41ff-367">For more information on Azure Availability Sets, see chapter [Azure Availability Sets][planning-guide-3.2.3] below.</span></span>

#### <span data-ttu-id="f41ff-368"><a name="18810088-f9be-4c97-958a-27996255c665"></a>Azure Tillgänglighetsuppsättningar</span><span class="sxs-lookup"><span data-stu-id="f41ff-368"><a name="18810088-f9be-4c97-958a-27996255c665"></a>Azure Availability Sets</span></span>
<span data-ttu-id="f41ff-369">Azure virtuella datorer i en Tillgänglighetsuppsättning av typen Azure kommer att distribueras av Azure-Infrastrukturkontrollanten över olika fel- och uppgradera domäner.</span><span class="sxs-lookup"><span data-stu-id="f41ff-369">Azure Virtual Machines within one Azure Availability Set will be distributed by the Azure Fabric Controller over different Fault and Upgrade Domains.</span></span> <span data-ttu-id="f41ff-370">Syftet med distributionen över olika fel- och uppgradera domäner är att förhindra att alla virtuella datorer i en SAP-systemet avslutas när det gäller infrastrukturens underhåll eller ett fel i en Feldomän.</span><span class="sxs-lookup"><span data-stu-id="f41ff-370">The purpose of the distribution over different Fault and Upgrade Domains is to prevent all VMs of an SAP system from being shut down in the case of infrastructure maintenance or a failure within one Fault Domain.</span></span> <span data-ttu-id="f41ff-371">Som standard ingår virtuella datorer inte i en Tillgänglighetsuppsättning.</span><span class="sxs-lookup"><span data-stu-id="f41ff-371">By default, VMs are not part of an Availability Set.</span></span> <span data-ttu-id="f41ff-372">Deltagande i en virtuell dator i en Tillgänglighetsuppsättning har definierats vid tidpunkten för distribution eller vid ett senare tillfälle genom en omkonfiguration och en ny distribution av en virtuell dator.</span><span class="sxs-lookup"><span data-stu-id="f41ff-372">The participation of a VM in an Availability Set is defined at deployment time or later on by a reconfiguration and re-deployment of a VM.</span></span>

<span data-ttu-id="f41ff-373">För att förstå begreppet Azure-Tillgänglighetsuppsättningar och hur Tillgänglighetsuppsättningar relaterar till fel och uppgradera domäner, Läs [i den här artikeln][virtual-machines-manage-availability]</span><span class="sxs-lookup"><span data-stu-id="f41ff-373">To understand the concept of Azure Availability Sets and the way Availability Sets relate to Fault and Upgrade Domains, please read [this article][virtual-machines-manage-availability]</span></span>

<span data-ttu-id="f41ff-374">Om du vill definiera tillgänglighetsuppsättningar för ARM via en json-mall finns [rest-api-specifikationerna](https://github.com/Azure/azure-rest-api-specs/blob/master/arm-compute/2015-06-15/swagger/compute.json) och Sök efter ”tillgänglighet”.</span><span class="sxs-lookup"><span data-stu-id="f41ff-374">To define availability sets for ARM via a json template see [the rest-api specs](https://github.com/Azure/azure-rest-api-specs/blob/master/arm-compute/2015-06-15/swagger/compute.json) and search for "availability".</span></span>

### <span data-ttu-id="f41ff-375"><a name="a72afa26-4bf4-4a25-8cf7-855d6032157f"></a>Lagring: Microsoft Azure Storage- och Datadiskar</span><span class="sxs-lookup"><span data-stu-id="f41ff-375"><a name="a72afa26-4bf4-4a25-8cf7-855d6032157f"></a>Storage: Microsoft Azure Storage and Data Disks</span></span>
<span data-ttu-id="f41ff-376">Microsoft Azure virtuella datorer använda olika lagringstyper.</span><span class="sxs-lookup"><span data-stu-id="f41ff-376">Microsoft Azure Virtual Machines utilize different storage types.</span></span> <span data-ttu-id="f41ff-377">När du implementerar SAP på Azure-tjänster för virtuella datorer är det viktigt att förstå skillnaderna mellan dessa två typer av lagring:</span><span class="sxs-lookup"><span data-stu-id="f41ff-377">When implementing SAP on Azure Virtual Machine Services it is important to understand the differences between these two main types of storage:</span></span>

* <span data-ttu-id="f41ff-378">Icke-beständig, temporär lagring.</span><span class="sxs-lookup"><span data-stu-id="f41ff-378">Non-Persistent, volatile storage.</span></span>
* <span data-ttu-id="f41ff-379">Beständig lagring.</span><span class="sxs-lookup"><span data-stu-id="f41ff-379">Persistent storage.</span></span>

<span data-ttu-id="f41ff-380">Icke-beständig lagring är direkt anslutna till de virtuella datorerna och finns på datornoderna själva – lokal instans lagring (tillfällig lagring).</span><span class="sxs-lookup"><span data-stu-id="f41ff-380">The non-persistent storage is directly attached to the running Virtual Machines and resides on the compute nodes themselves – the local instance storage (temporary storage).</span></span> <span data-ttu-id="f41ff-381">Storleken beror på storleken på den virtuella datorn som valdes när distributionen är igång.</span><span class="sxs-lookup"><span data-stu-id="f41ff-381">The size depends on the size of the Virtual Machine chosen when the deployment started.</span></span> <span data-ttu-id="f41ff-382">Den här lagringstypen är temporär och därför disken initieras när en virtuell dator-instansen startas om.</span><span class="sxs-lookup"><span data-stu-id="f41ff-382">This storage type is volatile and therefore the disk is initialized when a Virtual Machine instance is restarted.</span></span> <span data-ttu-id="f41ff-383">Växlingsfil för operativsystemet finns normalt på tillfälliga disken.</span><span class="sxs-lookup"><span data-stu-id="f41ff-383">Typically, the pagefile for the operating system is located on this temporary disk.</span></span>

- - -
> ![Windows][Logo_Windows] <span data-ttu-id="f41ff-385">Windows</span><span class="sxs-lookup"><span data-stu-id="f41ff-385">Windows</span></span>
>
> <span data-ttu-id="f41ff-386">Temporär enheten är monterad enhet D:\ i en distribuerad virtuell dator på virtuella Windows-datorer.</span><span class="sxs-lookup"><span data-stu-id="f41ff-386">On Windows VMs the temp drive is mounted as drive D:\ in a deployed VM.</span></span>
>
> ![Linux][Logo_Linux] <span data-ttu-id="f41ff-388">Linux</span><span class="sxs-lookup"><span data-stu-id="f41ff-388">Linux</span></span>
>
> <span data-ttu-id="f41ff-389">Den är monterad som /mnt/resource eller /mnt på virtuella Linux-datorer.</span><span class="sxs-lookup"><span data-stu-id="f41ff-389">On Linux VMs it's mounted as /mnt/resource or /mnt.</span></span> <span data-ttu-id="f41ff-390">Se mer information här:</span><span class="sxs-lookup"><span data-stu-id="f41ff-390">See more details here :</span></span>
>
> * <span data-ttu-id="f41ff-391">[Hur du kopplar en datadisk till en virtuell Linux-dator][virtual-machines-linux-how-to-attach-disk]</span><span class="sxs-lookup"><span data-stu-id="f41ff-391">[How to Attach a Data Disk to a Linux Virtual Machine][virtual-machines-linux-how-to-attach-disk]</span></span>
> * <span data-ttu-id="f41ff-392"><http://blogs.msdn.com/b/mast/Archive/2013/12/07/Understanding-the-Temporary-Drive-on-Windows-Azure-Virtual-Machines.aspx></span><span class="sxs-lookup"><span data-stu-id="f41ff-392"><http://blogs.msdn.com/b/mast/archive/2013/12/07/understanding-the-temporary-drive-on-windows-azure-virtual-machines.aspx></span></span>
>
>

- - -
<span data-ttu-id="f41ff-393">Den faktiska enheten är temporära eftersom den hämtar lagras på värdservern sig själv.</span><span class="sxs-lookup"><span data-stu-id="f41ff-393">The actual drive is volatile because it is getting stored on the host server itself.</span></span> <span data-ttu-id="f41ff-394">Om den virtuella datorn flyttas i en omdistribution (t.ex. på grund av underhåll på värden eller avstängning och omstart) går innehållet i enheten förlorad.</span><span class="sxs-lookup"><span data-stu-id="f41ff-394">If the VM moved in a redeployment (e.g. due to maintenance on the host or shutdown and restart) the content of the drive is lost.</span></span> <span data-ttu-id="f41ff-395">Det är därför inte ett alternativ för att lagra viktiga data på den här enheten.</span><span class="sxs-lookup"><span data-stu-id="f41ff-395">Therefore, it is not an option to store any important data on this drive.</span></span> <span data-ttu-id="f41ff-396">Typ av media som används för den här typen av lagring skiljer sig mellan olika virtuella dator-serien med mycket olika prestandaegenskaper som från och med juni 2015 ser ut som:</span><span class="sxs-lookup"><span data-stu-id="f41ff-396">The type of media used for this type of storage differs between different VM series with very different performance characteristics which as of June 2015 look like:</span></span>

* <span data-ttu-id="f41ff-397">A5 A7: Mycket begränsad prestanda.</span><span class="sxs-lookup"><span data-stu-id="f41ff-397">A5-A7: Very limited performance.</span></span> <span data-ttu-id="f41ff-398">Rekommenderas inte för något utöver växlingsfilen</span><span class="sxs-lookup"><span data-stu-id="f41ff-398">Not recommended for anything beyond page file</span></span>
* <span data-ttu-id="f41ff-399">A8-A11: Goda prestandaegenskaper med vissa tiotusen IOPS och > 1 GBIT/s genomströmning.</span><span class="sxs-lookup"><span data-stu-id="f41ff-399">A8-A11: Very good performance characteristics with some ten thousand IOPS and >1GB/sec throughput.</span></span>
* <span data-ttu-id="f41ff-400">D-serien: Goda prestandaegenskaper med vissa sedan tusen IOPS och > 1 GBIT/s genomströmning.</span><span class="sxs-lookup"><span data-stu-id="f41ff-400">D-Series: Very good performance characteristics with some then thousand IOPS and >1GB/sec throughput.</span></span>
* <span data-ttu-id="f41ff-401">DS-serien: Goda prestandaegenskaper med vissa tiotusen IOPS och > 1 GBIT/s genomströmning.</span><span class="sxs-lookup"><span data-stu-id="f41ff-401">DS-Series: Very good performance characteristics with some ten thousand IOPS and >1GB/sec throughput.</span></span>
* <span data-ttu-id="f41ff-402">G-serien: Goda prestandaegenskaper med vissa tiotusen IOPS och > 1 GBIT/s genomströmning.</span><span class="sxs-lookup"><span data-stu-id="f41ff-402">G-Series: Very good performance characteristics with some ten thousand IOPS and >1GB/sec throughput.</span></span>
* <span data-ttu-id="f41ff-403">GS-serien: Goda prestandaegenskaper med vissa tiotusen IOPS och > 1 GBIT/s genomströmning.</span><span class="sxs-lookup"><span data-stu-id="f41ff-403">GS-Series: Very good performance characteristics with some ten thousand IOPS and >1GB/sec throughput.</span></span>

<span data-ttu-id="f41ff-404">Uttryck ovanför tillämpas för VM-typer som är certifierade med SAP.</span><span class="sxs-lookup"><span data-stu-id="f41ff-404">Statements above are applying to the VM types that are certified with SAP.</span></span> <span data-ttu-id="f41ff-405">VM-serien med utmärkt IOPS och genomströmning uppfyller kraven för att dra nytta av vissa DBMS-funktioner.</span><span class="sxs-lookup"><span data-stu-id="f41ff-405">The VM-series with excellent IOPS and throughput qualify for leverage by some DBMS features.</span></span> <span data-ttu-id="f41ff-406">Finns det [DBMS Deployment Guide] [ dbms-guide] för mer information.</span><span class="sxs-lookup"><span data-stu-id="f41ff-406">Please see the [DBMS Deployment Guide][dbms-guide] for more details.</span></span>

<span data-ttu-id="f41ff-407">Microsoft Azure Storage innehåller beständiga lagring och vanliga nivåer av skydd och redundans på SAN-lagring.</span><span class="sxs-lookup"><span data-stu-id="f41ff-407">Microsoft Azure Storage provides persisted storage and the typical levels of protection and redundancy seen on SAN storage.</span></span> <span data-ttu-id="f41ff-408">Diskar baserat på Azure Storage är en virtuell hårddisk (VHD) finns i Azure Storage-tjänster.</span><span class="sxs-lookup"><span data-stu-id="f41ff-408">Disks based on Azure Storage are virtual hard disk (VHDs) located in the Azure Storage Services.</span></span> <span data-ttu-id="f41ff-409">Den lokala OS-disken (Windows C:\, Linux / (/ dev/sda1)) lagras på Azure-lagring och ytterligare volymer/diskar som monterats på den virtuella datorn lagras där, för.</span><span class="sxs-lookup"><span data-stu-id="f41ff-409">The local OS-Disk (Windows C:\, Linux / ( /dev/sda1 )) is stored on the Azure Storage, and additional Volumes/Disks mounted to the VM get stored there, too.</span></span>

<span data-ttu-id="f41ff-410">Det är möjligt att överföra en befintlig virtuell Hårddisk från lokala eller skapar en tom från i Azure och koppla dem till distribuerade virtuella datorer.</span><span class="sxs-lookup"><span data-stu-id="f41ff-410">It is possible to upload an existing VHD from on-premises or create empty ones from within Azure and attach those to deployed VMs.</span></span> <span data-ttu-id="f41ff-411">Refererar till de virtuella hårddiskarna som Azure-diskar.</span><span class="sxs-lookup"><span data-stu-id="f41ff-411">Those VHDs are referenced as Azure Disks.</span></span>

<span data-ttu-id="f41ff-412">När du skapar eller ladda upp en VHD till Azure Storage, är det möjligt att montera och koppla dem till en befintlig virtuell dator och kopiera befintliga (omonterade) VHD.</span><span class="sxs-lookup"><span data-stu-id="f41ff-412">After creating or uploading a VHD into Azure Storage, it is possible to mount and attach those to an existing Virtual Machine and to copy existing (unmounted) VHD.</span></span>

<span data-ttu-id="f41ff-413">Data och ändringar i de är säkra när startas om och återskapa en virtuell datorinstans som de virtuella hårddiskarna är beständiga.</span><span class="sxs-lookup"><span data-stu-id="f41ff-413">As those VHDs are persisted, data and changes within those are safe when rebooting and recreating a Virtual Machine instance.</span></span> <span data-ttu-id="f41ff-414">Även om en instans har tagits bort kan dessa virtuella hårddiskar säkerhet och kan distribueras eller vid ej OS diskar kan monteras till andra virtuella datorer.</span><span class="sxs-lookup"><span data-stu-id="f41ff-414">Even if an instance is deleted, these VHDs stay safe and can be redeployed or in case of non-OS disks can be mounted to other VMs.</span></span>

<span data-ttu-id="f41ff-415">Nivåer för olika redundans kan konfigureras i nätverket för Azure Storage:</span><span class="sxs-lookup"><span data-stu-id="f41ff-415">Within the network of Azure Storage different redundancy levels can be configured:</span></span>

* <span data-ttu-id="f41ff-416">Lägsta nivå som kan väljas är 'lokala redundans', vilket motsvarar tre replik av data i samma Datacenter för en Azure-Region (finns i kapitlet [Azure-regioner][planning-guide-3.1]).</span><span class="sxs-lookup"><span data-stu-id="f41ff-416">Minimum level that can be selected is ‘local redundancy’, which is equivalent to three-replica of the data within the same data center of an Azure Region (see chapter [Azure Regions][planning-guide-3.1]).</span></span>
* <span data-ttu-id="f41ff-417">Zonen redundant lagring som ska spridas tre bilder över olika resurser inom samma Azure-Region.</span><span class="sxs-lookup"><span data-stu-id="f41ff-417">Zone redundant storage which will spread the three images over different data centers within the same Azure Region.</span></span>
* <span data-ttu-id="f41ff-418">Standardnivån för redundans är geografisk redundans som replikerar asynkront innehållet till en annan 3 bilder av data till en annan Azure-Region som finns i samma geopolitiska region.</span><span class="sxs-lookup"><span data-stu-id="f41ff-418">Default redundancy level is geographic redundancy which asynchronously replicates the content into another 3 images of the data into another Azure Region which is hosted in the same geopolitical region.</span></span>

<span data-ttu-id="f41ff-419">Också se tabellen på den här artikeln angående alternativen olika redundans: <https://azure.microsoft.com/pricing/details/storage/></span><span class="sxs-lookup"><span data-stu-id="f41ff-419">Also see the table on top of this article in regards to the different redundancy options: <https://azure.microsoft.com/pricing/details/storage/></span></span>

<span data-ttu-id="f41ff-420">Mer information angående Azure Storage finns här:</span><span class="sxs-lookup"><span data-stu-id="f41ff-420">More information in regards to Azure Storage can be found here:</span></span>

* <span data-ttu-id="f41ff-421"><https://Azure.microsoft.com/Documentation/Services/Storage/></span><span class="sxs-lookup"><span data-stu-id="f41ff-421"><https://azure.microsoft.com/documentation/services/storage/></span></span>
* <span data-ttu-id="f41ff-422"><https://Azure.microsoft.com/Services/site-Recovery></span><span class="sxs-lookup"><span data-stu-id="f41ff-422"><https://azure.microsoft.com/services/site-recovery></span></span>
* <span data-ttu-id="f41ff-423"><https://msdn.microsoft.com/library/windowsazure/ee691964.aspx></span><span class="sxs-lookup"><span data-stu-id="f41ff-423"><https://msdn.microsoft.com/library/windowsazure/ee691964.aspx></span></span>
* <span data-ttu-id="f41ff-424"><https://blogs.msdn.com/b/azuresecurity/Archive/2015/11/17/Azure-disk-Encryption-for-Linux-and-Windows-Virtual-Machines-Public-Preview.aspx></span><span class="sxs-lookup"><span data-stu-id="f41ff-424"><https://blogs.msdn.com/b/azuresecurity/archive/2015/11/17/azure-disk-encryption-for-linux-and-windows-virtual-machines-public-preview.aspx></span></span>

#### <a name="azure-standard-storage"></a><span data-ttu-id="f41ff-425">Azure standardlagring</span><span class="sxs-lookup"><span data-stu-id="f41ff-425">Azure Standard Storage</span></span>
<span data-ttu-id="f41ff-426">Azure blobblagring som Standard var typ av lagring som är tillgängliga när Azure IaaS släpptes.</span><span class="sxs-lookup"><span data-stu-id="f41ff-426">Azure Standard BLOB storage was the type of storage available when Azure IaaS was released.</span></span> <span data-ttu-id="f41ff-427">Det fanns IOPS kvoter tillämpas per enskild VHD.</span><span class="sxs-lookup"><span data-stu-id="f41ff-427">There were IOPS quotas enforced per single VHD.</span></span> <span data-ttu-id="f41ff-428">Latens som uppstod var inte i samma klass som SAN/NAS-enheter som normalt distribueras för avancerade SAP-datorer lagras lokalt.</span><span class="sxs-lookup"><span data-stu-id="f41ff-428">Latency experienced was not in the same class as SAN/NAS devices typically deployed for high-end SAP systems hosted on-premises.</span></span> <span data-ttu-id="f41ff-429">Dock Azure standardlagring visat sig vara tillräcklig för flera hundra SAP-system under tiden distribueras i Azure.</span><span class="sxs-lookup"><span data-stu-id="f41ff-429">Nevertheless, the Azure Standard Storage proved sufficient for many hundreds SAP systems meanwhile deployed in Azure.</span></span>

<span data-ttu-id="f41ff-430">Azure standardlagring debiteras baserat på de faktiska data som lagras, mängden lagringstransaktioner och utgående dataöverföringar redundans-alternativ som valts.</span><span class="sxs-lookup"><span data-stu-id="f41ff-430">Azure Standard Storage is charged based on the actual data that is stored, the volume of storage transactions, outbound data transfers and redundancy option chosen.</span></span> <span data-ttu-id="f41ff-431">Många virtuella hårddiskar kan skapas på den högsta 1TB i storlek, men så länge de förblir tom är kostnadsfri.</span><span class="sxs-lookup"><span data-stu-id="f41ff-431">Many VHDs can be created at the maximum 1TB in size, but as long as those remain empty there is no charge.</span></span> <span data-ttu-id="f41ff-432">Om du fyller sedan en virtuell Hårddisk med 100GB, debiteras du för att lagra 100GB och inte för den virtuella Hårddisken har skapats med nominell storlek.</span><span class="sxs-lookup"><span data-stu-id="f41ff-432">If you then fill one VHD with 100GB each, you will be charged for storing 100GB and not for the nominal size the VHD got created with.</span></span>

#### <span data-ttu-id="f41ff-433"><a name="ff5ad0f9-f7f4-4022-9102-af07aef3bc92"></a>Azure Premium-lagring</span><span class="sxs-lookup"><span data-stu-id="f41ff-433"><a name="ff5ad0f9-f7f4-4022-9102-af07aef3bc92"></a>Azure Premium Storage</span></span>
<span data-ttu-id="f41ff-434">I April 2015 introducerade Microsoft Azure Premium-lagring.</span><span class="sxs-lookup"><span data-stu-id="f41ff-434">In April 2015 Microsoft introduced Azure Premium Storage.</span></span> <span data-ttu-id="f41ff-435">Premium-lagring har fått introducerades med målet att tillhandahålla:</span><span class="sxs-lookup"><span data-stu-id="f41ff-435">Premium Storage got introduced with the goal to provide:</span></span>

* <span data-ttu-id="f41ff-436">Bättre i/o-svarstid.</span><span class="sxs-lookup"><span data-stu-id="f41ff-436">Better I/O latency.</span></span>
* <span data-ttu-id="f41ff-437">Bättre genomflöde.</span><span class="sxs-lookup"><span data-stu-id="f41ff-437">Better throughput.</span></span>
* <span data-ttu-id="f41ff-438">Mindre variationer i i/o-svarstid.</span><span class="sxs-lookup"><span data-stu-id="f41ff-438">Less variability in I/O latency.</span></span>

<span data-ttu-id="f41ff-439">För detta ändamål introducerades många ändringar av två viktigaste är:</span><span class="sxs-lookup"><span data-stu-id="f41ff-439">For that purpose, a lot of changes were introduced of which the two most significant are:</span></span>

* <span data-ttu-id="f41ff-440">Användning av SSD-diskar i Azure Storage-noder</span><span class="sxs-lookup"><span data-stu-id="f41ff-440">Usage of SSD disks in the Azure Storage nodes</span></span>
* <span data-ttu-id="f41ff-441">En ny läsa cache som backas upp av en Azure compute-nod lokal SSD</span><span class="sxs-lookup"><span data-stu-id="f41ff-441">A new read cache that is backed by the local SSD of an Azure compute node</span></span>

<span data-ttu-id="f41ff-442">I motsatt standardlagring där funktioner inte ändras beroende på storleken på disken (eller VHD), Premium-lagring har för närvarande 3 annan disk kategorier som visas i slutet av den här artikeln innan avsnittet vanliga frågor och svar: <https:// Azure.microsoft.com/pricing/details/Storage/></span><span class="sxs-lookup"><span data-stu-id="f41ff-442">In opposite to Standard storage where capabilities did not change dependent on the size of the disk (or VHD), Premium Storage currently has 3 different disk categories which are shown at the end of this article before the  FAQ section : <https://azure.microsoft.com/pricing/details/storage/></span></span>

<span data-ttu-id="f41ff-443">Du ser att IOPS/VHD- och diskresurser genomströmning/VHD är beroende av kategorin storlek på diskar</span><span class="sxs-lookup"><span data-stu-id="f41ff-443">You see that IOPS/VHD and disk throughput/VHD are dependent on the size category of the disks</span></span>

<span data-ttu-id="f41ff-444">Kostnad grunden för Premium-lagring är inte faktiska datavolym som lagras i dessa virtuella hårddiskar, men kategorin storleken på sådana en virtuell Hårddisk, oberoende av mängden data som lagras i den virtuella Hårddisken.</span><span class="sxs-lookup"><span data-stu-id="f41ff-444">Cost basis in the case of Premium Storage is not the actual data volume stored in such VHDs, but the size category of such a VHD, independent of the amount of the data that is stored within the VHD.</span></span>

<span data-ttu-id="f41ff-445">Du kan också skapa virtuella hårddiskar på Premium-lagring som inte direkt mappning till storlek kategorier som visas.</span><span class="sxs-lookup"><span data-stu-id="f41ff-445">You also can create VHDs on Premium Storage that are not directly mapping into the size categories shown.</span></span> <span data-ttu-id="f41ff-446">Detta kan vara fallet, särskilt när du kopierar virtuella hårddiskar från standardlagring till Premium-lagring.</span><span class="sxs-lookup"><span data-stu-id="f41ff-446">This may be the case, especially when copying VHDs from Standard Storage into Premium Storage.</span></span> <span data-ttu-id="f41ff-447">I sådana fall utförs en mappning till nästa största Premium-lagring disk alternativ.</span><span class="sxs-lookup"><span data-stu-id="f41ff-447">In such cases a mapping to the next largest Premium Storage disk option is performed.</span></span>

<span data-ttu-id="f41ff-448">Tänk på att bara vissa VM-serien kan dra nytta av Azure Premium-lagring.</span><span class="sxs-lookup"><span data-stu-id="f41ff-448">Please be aware that only certain VM series can benefit from the Azure Premium Storage.</span></span> <span data-ttu-id="f41ff-449">Från och med Dec 2015 är dessa DS - och GS-serien.</span><span class="sxs-lookup"><span data-stu-id="f41ff-449">As of Dec 2015, these are the DS- and GS-series.</span></span> <span data-ttu-id="f41ff-450">DS-serien är i princip samma D-serien med undantaget att DS-serien har möjlighet att montera Premium-lagring baseras VMs dessutom till virtuella hårddiskar som finns på Azure standardlagring.</span><span class="sxs-lookup"><span data-stu-id="f41ff-450">The DS-series is basically the same as D-series with the exception that DS-series has the ability to mount Premium Storage based VMs additionally to VHDs that are hosted on Azure Standard Storage.</span></span> <span data-ttu-id="f41ff-451">Samma sak gäller för G-serien och GS-serien.</span><span class="sxs-lookup"><span data-stu-id="f41ff-451">Same thing is valid for G-series compared to GS-series.</span></span>

<span data-ttu-id="f41ff-452">Om du checkar ut del av DS-serien virtuella datorer i [i den här artikeln] [ virtual-machines-sizes] du ska vara medveten om att det finns data volym begränsningar Premium Storage virtuella hårddiskar på Granulariteten för VM-nivå.</span><span class="sxs-lookup"><span data-stu-id="f41ff-452">If you are checking out the part of the DS-series VMs in [this article][virtual-machines-sizes] you also will realize that there are data volume limitations to Premium Storage VHDs on the granularity of the VM level.</span></span> <span data-ttu-id="f41ff-453">Olika DS-serien eller GS-serien virtuella datorer har också olika begränsningar för antalet virtuella hårddiskar som kan monteras angående.</span><span class="sxs-lookup"><span data-stu-id="f41ff-453">Different DS-series or GS-series VMs also have different limitations in regards to the number of VHDs that can be mounted.</span></span> <span data-ttu-id="f41ff-454">Dessa gränser dokumenteras i artikeln som nämns ovan samt.</span><span class="sxs-lookup"><span data-stu-id="f41ff-454">These limits are documented in the article mentioned above as well.</span></span> <span data-ttu-id="f41ff-455">Men i princip betyder att om du t.ex. montera 32 x P30 diskar/VHD: er till en enda DS14 VM du inte får 32 x maximalt dataflöde för en P30 disk.</span><span class="sxs-lookup"><span data-stu-id="f41ff-455">But in essence it means that if you e.g. mount 32 x P30 disks/VHDs to a single DS14 VM you can NOT get 32 x the maximum throughput of a P30 disk.</span></span> <span data-ttu-id="f41ff-456">I stället begränsar maximalt dataflöde på VM-nivå enligt beskrivningen i artikeln överföring av data.</span><span class="sxs-lookup"><span data-stu-id="f41ff-456">Instead the maximum throughput on VM level as documented in the article will limit data throughput.</span></span>

<span data-ttu-id="f41ff-457">Mer information om Premium-lagring finns här: <http://azure.microsoft.com/blog/2015/04/16/azure-premium-storage-now-generally-available-2></span><span class="sxs-lookup"><span data-stu-id="f41ff-457">More information on Premium Storage can be found here: <http://azure.microsoft.com/blog/2015/04/16/azure-premium-storage-now-generally-available-2></span></span>

#### <a name="azure-storage-accounts"></a><span data-ttu-id="f41ff-458">Azure Storage-konton</span><span class="sxs-lookup"><span data-stu-id="f41ff-458">Azure Storage Accounts</span></span>
<span data-ttu-id="f41ff-459">När du distribuerar tjänster eller virtuella datorer i Azure, ordnas distribution av virtuella hårddiskar och VM-avbildningar i enheter som kallas Azure Storage-konton.</span><span class="sxs-lookup"><span data-stu-id="f41ff-459">When deploying services or VMs in Azure, deployment of VHDs and VM Images must be organized in units called Azure Storage Accounts.</span></span> <span data-ttu-id="f41ff-460">När du planerar en distribution av Azure måste du noga överväga begränsningar för Azure.</span><span class="sxs-lookup"><span data-stu-id="f41ff-460">When planning an Azure deployment, you need to carefully consider the restrictions of Azure.</span></span> <span data-ttu-id="f41ff-461">Det finns ett begränsat antal Lagringskonton per Azure-prenumeration på en sida.</span><span class="sxs-lookup"><span data-stu-id="f41ff-461">On the one side, there is a limited number of Storage Accounts per Azure subscription.</span></span> <span data-ttu-id="f41ff-462">Även om varje Azure Storage-konto kan innehålla ett stort antal VHD-filer, finns det en fast gräns för totala IOPS per Lagringskonto.</span><span class="sxs-lookup"><span data-stu-id="f41ff-462">Although each Azure Storage Account can hold a large number of VHD files, there is a fixed limit on the total IOPS per Storage Account.</span></span> <span data-ttu-id="f41ff-463">När du distribuerar hundratals SAP virtuella datorer med DBMS system skapar betydande i/o-anrop, rekommenderas att distribuera hög IOPS DBMS VMs mellan flera Azure Storage-konton.</span><span class="sxs-lookup"><span data-stu-id="f41ff-463">When deploying hundreds of SAP VMs with DBMS systems creating significant IO calls, it is recommended to distribute high IOPS DBMS VMs between multiple Azure Storage Accounts.</span></span> <span data-ttu-id="f41ff-464">Vara måste försiktig så att inte överskrida den aktuella gränsen för Azure Storage-konton per prenumeration.</span><span class="sxs-lookup"><span data-stu-id="f41ff-464">Care must be taken not to exceed the current limit of Azure Storage Accounts per subscription.</span></span> <span data-ttu-id="f41ff-465">Eftersom lagringen är en viktig del av distributionen databasen för en SAP-system, detta begrepp beskrivs i detalj i redan refereras [DBMS Deployment Guide][dbms-guide].</span><span class="sxs-lookup"><span data-stu-id="f41ff-465">Because storage is a vital part of the database deployment for an SAP system, this concept is discussed in more detail in the already referenced [DBMS Deployment Guide][dbms-guide].</span></span>

<span data-ttu-id="f41ff-466">Mer information om Azure Storage-konton finns i [i den här artikeln][storage-scalability-targets].</span><span class="sxs-lookup"><span data-stu-id="f41ff-466">More information about Azure Storage Accounts can be found in [this article][storage-scalability-targets].</span></span> <span data-ttu-id="f41ff-467">Läsa den här artikeln kommer inser du att det finns skillnader i begränsningar mellan Lagringskonton i Azure-Standard och Premium-Lagringskonton.</span><span class="sxs-lookup"><span data-stu-id="f41ff-467">Reading this article, you will realize that there are differences in the limitations between Azure Standard Storage Accounts and Premium Storage Accounts.</span></span> <span data-ttu-id="f41ff-468">Viktiga skillnader är mängden data som kan lagras i ett Lagringskonto.</span><span class="sxs-lookup"><span data-stu-id="f41ff-468">Major differences are the volume of data that can be stored within such a Storage Account.</span></span> <span data-ttu-id="f41ff-469">Volymen är en omfattning som är större än med Premium-lagring i standardlagring.</span><span class="sxs-lookup"><span data-stu-id="f41ff-469">In Standard Storage the volume is a magnitude larger than with Premium Storage.</span></span> <span data-ttu-id="f41ff-470">På andra sidan är standardkontot för lagring mycket begränsad IOPS (se kolumnen 'Totala begära hastigheten'), medan Azure Premium Storage-konto har ingen sådan begränsning.</span><span class="sxs-lookup"><span data-stu-id="f41ff-470">On the other side the Standard Storage Account is severely limited in IOPS (see column ‘Total Request Rate’), whereas the Azure Premium Storage Account has no such limitation.</span></span> <span data-ttu-id="f41ff-471">Diskuteras information och resultatet av dessa skillnader när du ska diskutera distributioner av SAP-system, särskilt DBMS-servrar.</span><span class="sxs-lookup"><span data-stu-id="f41ff-471">We will discuss details and results of these differences when discussing the deployments of SAP systems, especially the DBMS servers.</span></span>

<span data-ttu-id="f41ff-472">Du har möjlighet att skapa olika behållare för att ordna och kategorisera olika virtuella hårddiskar i ett Lagringskonto.</span><span class="sxs-lookup"><span data-stu-id="f41ff-472">Within a Storage Account, you have the possibility to create different containers for the purpose of organizing and categorizing different VHDs.</span></span> <span data-ttu-id="f41ff-473">Dessa behållare används vanligtvis för att till exempel separata virtuella hårddiskar på olika virtuella datorer.</span><span class="sxs-lookup"><span data-stu-id="f41ff-473">These containers are usually used to e.g. separate VHDs of different VMs.</span></span> <span data-ttu-id="f41ff-474">Det finns inga konsekvenser för prestanda i med hjälp av en behållare eller flera behållare under en enda Azure Storage-konto.</span><span class="sxs-lookup"><span data-stu-id="f41ff-474">There are no performance implications in using just one container or multiple containers underneath a single Azure Storage Account.</span></span>

<span data-ttu-id="f41ff-475">I Azure följer en VHD-namnet följande namngivning anslutning som måste ange ett unikt namn för den virtuella Hårddisken i Azure:</span><span class="sxs-lookup"><span data-stu-id="f41ff-475">Within Azure a VHD name follows the following naming connection that needs to provide a unique name for the VHD within Azure:</span></span>

    http(s)://<storage account name>.blob.core.windows.net/<container name>/<vhd name>

<span data-ttu-id="f41ff-476">Som nämnts ovan strängen måste identifiera den virtuella Hårddisken som lagras på Azure Storage.</span><span class="sxs-lookup"><span data-stu-id="f41ff-476">As mentioned the string above needs to uniquely identify the VHD that is stored on Azure Storage.</span></span>

### <span data-ttu-id="f41ff-477"><a name="61678387-8868-435d-9f8c-450b2424f5bd"></a>Microsoft Azure-nätverk</span><span class="sxs-lookup"><span data-stu-id="f41ff-477"><a name="61678387-8868-435d-9f8c-450b2424f5bd"></a>Microsoft Azure Networking</span></span>
<span data-ttu-id="f41ff-478">Microsoft Azure tillhandahåller en nätverksinfrastruktur, vilket gör att mappningen av alla scenarier som vi vill utnyttja med SAP-program.</span><span class="sxs-lookup"><span data-stu-id="f41ff-478">Microsoft Azure will provide a network infrastructure which allows the mapping of all scenarios which we want to realize with SAP software.</span></span> <span data-ttu-id="f41ff-479">Funktionerna är:</span><span class="sxs-lookup"><span data-stu-id="f41ff-479">The capabilities are:</span></span>

* <span data-ttu-id="f41ff-480">Åtkomst från utanför, direkt till de virtuella datorerna via Windows Terminal Services eller ssh/VNC</span><span class="sxs-lookup"><span data-stu-id="f41ff-480">Access from the outside, directly to the VMs via Windows Terminal Services or ssh/VNC</span></span>
* <span data-ttu-id="f41ff-481">Åtkomst till tjänster och specifika portar som används av program inom de virtuella datorerna</span><span class="sxs-lookup"><span data-stu-id="f41ff-481">Access to services and specific ports used by applications within the VMs</span></span>
* <span data-ttu-id="f41ff-482">Intern kommunikation och namnmatchning mellan en grupp med virtuella datorer som distribueras som virtuella Azure-datorer</span><span class="sxs-lookup"><span data-stu-id="f41ff-482">Internal Communication and Name Resolution between a group of VMs deployed as Azure VMs</span></span>
* <span data-ttu-id="f41ff-483">Anslutning mellan en kund lokala nätverk och Azure-nätverk</span><span class="sxs-lookup"><span data-stu-id="f41ff-483">Cross-Premises Connectivity between a customer’s on-premises network and the Azure network</span></span>
* <span data-ttu-id="f41ff-484">Mellan Azure-Region eller data center anslutning mellan Azure platser</span><span class="sxs-lookup"><span data-stu-id="f41ff-484">Cross Azure Region or data center connectivity between Azure sites</span></span>

<span data-ttu-id="f41ff-485">Mer information hittar du här: <https://azure.microsoft.com/documentation/services/virtual-network/></span><span class="sxs-lookup"><span data-stu-id="f41ff-485">More information can be found here: <https://azure.microsoft.com/documentation/services/virtual-network/></span></span>

<span data-ttu-id="f41ff-486">Det finns en mängd olika alternativ för att konfigurera namn och IP-lösning i Azure.</span><span class="sxs-lookup"><span data-stu-id="f41ff-486">There are a lot of different possibilities to configure name and IP resolution in Azure.</span></span> <span data-ttu-id="f41ff-487">I detta dokument, endast molnbaserad scenarier som förlitar sig på standardvärdet med hjälp av Azure DNS (i stället för att definiera en egen DNS-tjänst).</span><span class="sxs-lookup"><span data-stu-id="f41ff-487">In this document, Cloud-Only scenarios rely on the default of using Azure DNS (in contrast to defining an own DNS service).</span></span> <span data-ttu-id="f41ff-488">Det finns också en ny Azure DNS-tjänst som kan användas i stället för att ställa in DNS-servern.</span><span class="sxs-lookup"><span data-stu-id="f41ff-488">There is also a new Azure DNS service which can be used instead of setting up your own DNS server.</span></span> <span data-ttu-id="f41ff-489">Mer information finns i [i den här artikeln] [ virtual-networks-manage-dns-in-vnet] på [den här sidan](https://azure.microsoft.com/services/dns/).</span><span class="sxs-lookup"><span data-stu-id="f41ff-489">More information can be found in [this article][virtual-networks-manage-dns-in-vnet] and on [this page](https://azure.microsoft.com/services/dns/).</span></span>

<span data-ttu-id="f41ff-490">För anslutningar mellan lokala scenarier vi beroende av faktumet som lokalt DNS-AD/OpenLDAP har utökats via VPN eller privat anslutning till Azure.</span><span class="sxs-lookup"><span data-stu-id="f41ff-490">For Cross-Premises scenarios we are relying on the fact that the on-premises AD/OpenLDAP/DNS has been extended via VPN or private connection to Azure.</span></span> <span data-ttu-id="f41ff-491">För vissa scenarier som dokumenteras här det kan vara nödvändigt att ha en replik av en AD/OpenLDAP installerad i Azure.</span><span class="sxs-lookup"><span data-stu-id="f41ff-491">For certain scenarios as documented here, it might be necessary to have an AD/OpenLDAP replica installed in Azure.</span></span>

<span data-ttu-id="f41ff-492">Eftersom nätverk och namnmatchning är en viktig del av distributionen databasen för en SAP-system, beskrivs i detalj i detta begrepp i [DBMS Deployment Guide][dbms-guide].</span><span class="sxs-lookup"><span data-stu-id="f41ff-492">Because networking and name resolution is a vital part of the database deployment for an SAP system, this concept is discussed in more detail in the [DBMS Deployment Guide][dbms-guide].</span></span>

##### <a name="azure-virtual-networks"></a><span data-ttu-id="f41ff-493">Azure Virtual Networks</span><span class="sxs-lookup"><span data-stu-id="f41ff-493">Azure Virtual Networks</span></span>
<span data-ttu-id="f41ff-494">Du kan definiera adressintervallet privata IP-adresser som allokerats av Azure DHCP-funktioner genom att bygga upp ett Azure Virtual Network.</span><span class="sxs-lookup"><span data-stu-id="f41ff-494">By building up an Azure Virtual Network you can define the address range of the private IP addresses allocated by Azure DHCP functionality.</span></span> <span data-ttu-id="f41ff-495">I scenarier med anslutningar mellan lokala allokeras IP-adressintervall som definierats fortfarande med hjälp av DHCP av Azure.</span><span class="sxs-lookup"><span data-stu-id="f41ff-495">In Cross-Premises scenarios, the IP address range defined will still be allocated using DHCP by Azure.</span></span> <span data-ttu-id="f41ff-496">Domän-namnmatchning utförs lokalt (förutsatt att de virtuella datorerna är en del av en lokal domän) och därför kan matcha adresser utöver olika Azure-molntjänster.</span><span class="sxs-lookup"><span data-stu-id="f41ff-496">However, Domain Name resolution will be done on-premises (assuming that the VMs are a part of an on-premises domain) and hence can resolve addresses beyond different Azure Cloud Services.</span></span>

<span data-ttu-id="f41ff-497">[comment]: <> (MSSedusch fortfarande behövs? TODO ursprungligen ett Azure Virtual Network är bunden till en Tillhörighetsgrupp. Ett virtuellt nätverk i Azure med som har begränsad till Azure-Skalningsenhet som Tillhörighetsgruppen har tilldelats. Detta innebar i slutändan det virtuella nätverket har begränsad till de tillgängliga resurserna i Azure Skalningsenheten. Detta har ändrats sedan och nu virtuella Azure-nätverk kan sträcka ut över flera Azure-Skalningsenhet. Dock som kräver att virtuella Azure-nätverk är ** inte ** som är associerade med Tillhörighetsgrupper längre vid skapandet. Vi som nämnts tidigare att i motsatt rekommendationer per år sedan, bör du ** inte längre använda Azure-Tillhörighetsgrupper **. Mer information finns < https://azure.microsoft.com/blog/regional-virtual-networks/>)</span><span class="sxs-lookup"><span data-stu-id="f41ff-497">[comment]: <> (MSSedusch still needed? TODO Originally an Azure Virtual Network was bound to an Affinity Group. With that a Virtual Network in Azure got restricted to the Azure Scale Unit that the Affinity Group got assigned to. In the end, this meant the Virtual Network was restricted to the resources available in the Azure Scale Unit. This has since changed and now Azure Virtual Networks can stretch across more than one Azure Scale Unit. However, that requires that Azure Virtual Networks are **NOT** associated with Affinity Groups anymore at creation time. We already mentioned earlier that in opposite to recommendations a year ago, you should **NOT leverage Azure Affinity Groups anymore**. For details, please see <https://azure.microsoft.com/blog/regional-virtual-networks/>)</span></span>

<span data-ttu-id="f41ff-498">Varje virtuell dator i Azure måste du vara ansluten till ett virtuellt nätverk.</span><span class="sxs-lookup"><span data-stu-id="f41ff-498">Every Virtual Machine in Azure needs to be connected to a Virtual Network.</span></span>

<span data-ttu-id="f41ff-499">Mer information finns i [i den här artikeln] [ resource-groups-networking] på [den här sidan](https://azure.microsoft.com/documentation/services/virtual-network/).</span><span class="sxs-lookup"><span data-stu-id="f41ff-499">More details can be found in [this article][resource-groups-networking] and on [this page](https://azure.microsoft.com/documentation/services/virtual-network/).</span></span>

<span data-ttu-id="f41ff-500">[comment]: <> (MShermannd TODO gick inte att hitta en artikel som innehåller OpenLDAP avsnittet + ARM;)</span><span class="sxs-lookup"><span data-stu-id="f41ff-500">[comment]: <> (MShermannd TODO Couldn't find an article which includes the OpenLDAP topic + ARM; )</span></span>
<span data-ttu-id="f41ff-501">[comment]: <> (MSSedusch < https://channel9.msdn.com/Blogs/Open/Load-balancing-highly-available-Linux-services-on-Windows-Azure-OpenLDAP-and-MySQL>)</span><span class="sxs-lookup"><span data-stu-id="f41ff-501">[comment]: <> (MSSedusch <https://channel9.msdn.com/Blogs/Open/Load-balancing-highly-available-Linux-services-on-Windows-Azure-OpenLDAP-and-MySQL>)</span></span>

> [!NOTE]
> <span data-ttu-id="f41ff-502">Som standard när en virtuell dator distribueras ändra du inte konfigurationen för virtuella nätverk.</span><span class="sxs-lookup"><span data-stu-id="f41ff-502">By default, once a VM is deployed you cannot change the Virtual Network configuration.</span></span> <span data-ttu-id="f41ff-503">TCP/IP-inställningar måste finnas kvar i Azure DHCP-server.</span><span class="sxs-lookup"><span data-stu-id="f41ff-503">The TCP/IP settings must be left to the Azure DHCP server.</span></span> <span data-ttu-id="f41ff-504">Standardbeteendet är dynamisk IP-tilldelning.</span><span class="sxs-lookup"><span data-stu-id="f41ff-504">Default behavior is Dynamic IP assignment.</span></span>
>
>

<span data-ttu-id="f41ff-505">MAC-adressen för det virtuella nätverkskortet kan t.ex. ändras efter att ändra storlek och gästen Windows eller Linux OS ska hämta nytt nätverkskort och använder automatiskt DHCP för att tilldela IP-adress och DNS-adresser i det här fallet.</span><span class="sxs-lookup"><span data-stu-id="f41ff-505">The MAC address of the virtual network card may change e.g. after re-size and the Windows or Linux guest OS will pick up the new network card and will automatically use DHCP to assign the IP and DNS addresses in this case.</span></span>

##### <a name="static-ip-assignment"></a><span data-ttu-id="f41ff-506">Statiska IP-tilldelning</span><span class="sxs-lookup"><span data-stu-id="f41ff-506">Static IP Assignment</span></span>
<span data-ttu-id="f41ff-507">Det är möjligt att tilldela fast eller reserverade IP-adresser till virtuella datorer i ett Azure Virtual Network.</span><span class="sxs-lookup"><span data-stu-id="f41ff-507">It is possible to assign fixed or reserved IP addresses to VMs within an Azure Virtual Network.</span></span> <span data-ttu-id="f41ff-508">Kör de virtuella datorerna i ett Azure Virtual Network öppnas en bra möjlighet att utnyttja den här funktionen om behövs eller krävs för vissa scenarier.</span><span class="sxs-lookup"><span data-stu-id="f41ff-508">Running the VMs in an Azure Virtual Network opens a great possibility to leverage this functionality if needed or required for some scenarios.</span></span> <span data-ttu-id="f41ff-509">IP-adresstilldelning fortfarande är giltiga i hela förekomsten av den virtuella datorn, oberoende av om den virtuella datorn är igång eller avstängning.</span><span class="sxs-lookup"><span data-stu-id="f41ff-509">The IP assignment remains valid throughout the existence of the VM, independent of whether the VM is running or shutdown.</span></span> <span data-ttu-id="f41ff-510">Därför måste du göra det totala antalet virtuella datorer (VM körs och stoppas) i beräkningen när du definierar IP-adressintervall för det virtuella nätverket.</span><span class="sxs-lookup"><span data-stu-id="f41ff-510">As a result, you need to take the overall number of VMs (running and stopped VMS) into account when defining the range of IP addresses for the Virtual Network.</span></span> <span data-ttu-id="f41ff-511">IP-adressen förblir tilldelade antingen tills den virtuella datorn och dess nätverksgränssnittet har tagits bort eller IP-adressen hämtar Frigör tilldelade igen.</span><span class="sxs-lookup"><span data-stu-id="f41ff-511">The IP address remains assigned either until the VM and its Network Interface is deleted or until the IP address gets de-assigned again.</span></span> <span data-ttu-id="f41ff-512">Finns detaljerad information i [i den här artikeln][virtual-networks-static-private-ip-arm-pportal].</span><span class="sxs-lookup"><span data-stu-id="f41ff-512">Please see detailed information in [this article][virtual-networks-static-private-ip-arm-pportal].</span></span>

##### <a name="multiple-nics-per-vm"></a><span data-ttu-id="f41ff-513">Flera nätverkskort per VM</span><span class="sxs-lookup"><span data-stu-id="f41ff-513">Multiple NICs per VM</span></span>
<span data-ttu-id="f41ff-514">Du kan definiera flera virtuella nätverkskort (vNIC) för en virtuell dator i Azure.</span><span class="sxs-lookup"><span data-stu-id="f41ff-514">You can define multiple virtual network interface cards (vNIC) for an Azure Virtual Machine.</span></span> <span data-ttu-id="f41ff-515">Möjlighet att ha flera vNICs kan du börja konfigurera nätverkstrafik dirigeras uppdelning där t.ex. klienttrafik skickas via ett virtuellt nätverkskort och backend-trafik via ett andra virtuellt nätverkskort.</span><span class="sxs-lookup"><span data-stu-id="f41ff-515">With the ability to have multiple vNICs you can start to set up network traffic separation where e.g. client traffic is routed through one vNIC and backend traffic is routed through a second vNIC.</span></span> <span data-ttu-id="f41ff-516">Beroende på vilken typ av VM har olika begränsningar för antalet vNICs angående.</span><span class="sxs-lookup"><span data-stu-id="f41ff-516">Dependent on the type of VM there are different limitations in regards to the number of vNICs.</span></span> <span data-ttu-id="f41ff-517">Exakta detaljer, funktioner och begränsningar finns i följande artiklar:</span><span class="sxs-lookup"><span data-stu-id="f41ff-517">Exact details, functionality and restrictions can be found in these articles:</span></span>

* <span data-ttu-id="f41ff-518">[Skapa en virtuell dator med flera nätverkskort][virtual-networks-multiple-nics]</span><span class="sxs-lookup"><span data-stu-id="f41ff-518">[Create a VM with multiple NICs][virtual-networks-multiple-nics]</span></span>
* <span data-ttu-id="f41ff-519">[Distribuera flera NIC virtuella datorer med hjälp av en mall][virtual-network-deploy-multinic-arm-template]</span><span class="sxs-lookup"><span data-stu-id="f41ff-519">[Deploy multi NIC VMs using a template][virtual-network-deploy-multinic-arm-template]</span></span>
* <span data-ttu-id="f41ff-520">[Distribuera flera NIC virtuella datorer med hjälp av PowerShell][virtual-network-deploy-multinic-arm-ps]</span><span class="sxs-lookup"><span data-stu-id="f41ff-520">[Deploy multi NIC VMs using PowerShell][virtual-network-deploy-multinic-arm-ps]</span></span>
* <span data-ttu-id="f41ff-521">[Distribuera flera NIC virtuella datorer med hjälp av Azure CLI][virtual-network-deploy-multinic-arm-cli]</span><span class="sxs-lookup"><span data-stu-id="f41ff-521">[Deploy multi NIC VMs using the Azure CLI][virtual-network-deploy-multinic-arm-cli]</span></span>

#### <a name="site-to-site-connectivity"></a><span data-ttu-id="f41ff-522">Plats-till-plats-anslutning</span><span class="sxs-lookup"><span data-stu-id="f41ff-522">Site-to-Site Connectivity</span></span>
<span data-ttu-id="f41ff-523">Anslutningar mellan lokala är virtuella Azure-datorer och lokala kopplad till en transparent och permanenta VPN-anslutning.</span><span class="sxs-lookup"><span data-stu-id="f41ff-523">Cross-Premises is Azure VMs and On-Premises linked with a transparent and permanent VPN connection.</span></span> <span data-ttu-id="f41ff-524">Det förväntas att bli vanligaste SAP-distribution mönster i Azure.</span><span class="sxs-lookup"><span data-stu-id="f41ff-524">It is expected to become the most common SAP deployment pattern in Azure.</span></span> <span data-ttu-id="f41ff-525">Antas att operativa procedurer och processer med SAP-instanser i Azure bör fungera transparent.</span><span class="sxs-lookup"><span data-stu-id="f41ff-525">The assumption is that operational procedures and processes with SAP instances in Azure should work transparently.</span></span> <span data-ttu-id="f41ff-526">Detta betyder att du ska kunna skriva ut utanför dessa system som används SAP Transport Management System (Proportionerlig) till transport ändras från en utvecklingssystemet i Azure till ett testsystem som är distribuerade lokalt.</span><span class="sxs-lookup"><span data-stu-id="f41ff-526">This means you should be able to print out of these systems as well as use the SAP Transport Management System (TMS) to transport changes from a development system in Azure to a test system which is deployed on-premises.</span></span> <span data-ttu-id="f41ff-527">Mer dokumentation runt plats-till-plats finns i [i den här artikeln][vpn-gateway-create-site-to-site-rm-powershell]</span><span class="sxs-lookup"><span data-stu-id="f41ff-527">More documentation around site-to-site can be found in [this article][vpn-gateway-create-site-to-site-rm-powershell]</span></span>

##### <a name="vpn-tunnel-device"></a><span data-ttu-id="f41ff-528">VPN-Tunnel-enhet</span><span class="sxs-lookup"><span data-stu-id="f41ff-528">VPN Tunnel Device</span></span>
<span data-ttu-id="f41ff-529">För att skapa en plats-till-plats-anslutning (lokalt Datacenter till Azure-datacenter), behöver du hämta och konfigurera en VPN-enhet eller använda Routing and Remote Access Service (RRAS) som introducerades som en programvarukomponent med Windows Server 2012.</span><span class="sxs-lookup"><span data-stu-id="f41ff-529">In order to create a site-to-site connection (on-premises data center to Azure data center), you will need to either obtain and configure a VPN device, or use Routing and Remote Access Service (RRAS) which was introduced as a software component with Windows Server 2012.</span></span>

* <span data-ttu-id="f41ff-530">[Skapa ett virtuellt nätverk med en plats-till-plats VPN-anslutning med hjälp av PowerShell][vpn-gateway-create-site-to-site-rm-powershell]</span><span class="sxs-lookup"><span data-stu-id="f41ff-530">[Create a virtual network with a site-to-site VPN connection using PowerShell][vpn-gateway-create-site-to-site-rm-powershell]</span></span>
* <span data-ttu-id="f41ff-531">[Om VPN-enheter för plats-till-plats VPN-Gateway-anslutningar][vpn-gateway-about-vpn-devices]</span><span class="sxs-lookup"><span data-stu-id="f41ff-531">[About VPN devices for Site-to-Site VPN Gateway connections][vpn-gateway-about-vpn-devices]</span></span>
* <span data-ttu-id="f41ff-532">[Vanliga frågor och svar för VPN-Gateway][vpn-gateway-vpn-faq]</span><span class="sxs-lookup"><span data-stu-id="f41ff-532">[VPN Gateway FAQ][vpn-gateway-vpn-faq]</span></span>

![Plats-till-plats-anslutning mellan Azure och lokalt][planning-guide-figure-600]

<span data-ttu-id="f41ff-534">Ovanstående bild visar två Azure-prenumerationer har IP-adressen underintervall reserverade för användning i virtuella nätverk i Azure.</span><span class="sxs-lookup"><span data-stu-id="f41ff-534">The Figure above shows two Azure subscriptions have IP address subranges reserved for usage in Virtual Networks in Azure.</span></span> <span data-ttu-id="f41ff-535">Anslutningen från lokala nätverk till Azure upprättas via VPN.</span><span class="sxs-lookup"><span data-stu-id="f41ff-535">The connectivity from the on-premises network to Azure is established via VPN.</span></span>

#### <a name="point-to-site-vpn"></a><span data-ttu-id="f41ff-536">Punkt-till-plats VPN</span><span class="sxs-lookup"><span data-stu-id="f41ff-536">Point-to-Site VPN</span></span>
<span data-ttu-id="f41ff-537">Punkt-till-plats VPN kräver varje klientdator att ansluta till sin egen VPN till Azure.</span><span class="sxs-lookup"><span data-stu-id="f41ff-537">Point-to-site VPN requires every client machine to connect with its own VPN into Azure.</span></span> <span data-ttu-id="f41ff-538">Punkt-till-plats-anslutning är inte praktiska för SAP-scenarier där vi tittar på.</span><span class="sxs-lookup"><span data-stu-id="f41ff-538">For the SAP scenarios we are looking at, point-to-site connectivity is not practical.</span></span> <span data-ttu-id="f41ff-539">Därför får inga ytterligare referenser till punkt-till-plats VPN-anslutning.</span><span class="sxs-lookup"><span data-stu-id="f41ff-539">Therefore, no further references will be given to point-to-site VPN connectivity.</span></span>

<span data-ttu-id="f41ff-540">[comment]: <> (MSSedusch – Mer information hittar du här)</span><span class="sxs-lookup"><span data-stu-id="f41ff-540">[comment]: <> (MSSedusch -- More information can be found here)</span></span>
<span data-ttu-id="f41ff-541">[comment]: <> (MShermannd TODO-länken inte längre giltigt. Men ändå stöds inte ARM - se nästa länk nedan)</span><span class="sxs-lookup"><span data-stu-id="f41ff-541">[comment]: <> (MShermannd TODO Link no longer valid; But ARM is anyway not supported - see next link below)</span></span>
<span data-ttu-id="f41ff-542">[comment]: <> (MSSedusch--< http://msdn.microsoft.com/library/azure/dn133798.aspx>.)</span><span class="sxs-lookup"><span data-stu-id="f41ff-542">[comment]: <> (MSSedusch -- <http://msdn.microsoft.com/library/azure/dn133798.aspx>.)</span></span>
<span data-ttu-id="f41ff-543">[comment]: <> (MShermannd TODO punkt till plats stöds inte ännu med ARM)</span><span class="sxs-lookup"><span data-stu-id="f41ff-543">[comment]: <> (MShermannd TODO Point to Site not supported yet with ARM )</span></span>
<span data-ttu-id="f41ff-544">[comment]: <> (MSSedusch--< https://azure.microsoft.com/documentation/articles/vpn-gateway-point-to-site-create/>)</span><span class="sxs-lookup"><span data-stu-id="f41ff-544">[comment]: <> (MSSedusch -- <https://azure.microsoft.com/documentation/articles/vpn-gateway-point-to-site-create/>)</span></span>

#### <a name="multi-site-vpn"></a><span data-ttu-id="f41ff-545">Flera plats-VPN</span><span class="sxs-lookup"><span data-stu-id="f41ff-545">Multi-Site VPN</span></span>
<span data-ttu-id="f41ff-546">Azure erbjuder också Nuförtiden möjlighet att skapa flera plats-VPN-anslutning för en Azure-prenumeration.</span><span class="sxs-lookup"><span data-stu-id="f41ff-546">Azure also nowadays offers the possibility to create Multi-Site VPN connectivity for one Azure subscription.</span></span> <span data-ttu-id="f41ff-547">Tidigare var en enda prenumeration begränsat till en plats-till-plats VPN-anslutning.</span><span class="sxs-lookup"><span data-stu-id="f41ff-547">Previously a single subscription was limited to one site-to-site VPN connection.</span></span> <span data-ttu-id="f41ff-548">Den här begränsningen försvann med flera plats-VPN-anslutningar för en enda prenumeration.</span><span class="sxs-lookup"><span data-stu-id="f41ff-548">This limitation went away with Multi-Site VPN connections for a single subscription.</span></span> <span data-ttu-id="f41ff-549">Detta gör det möjligt att använda mer än en Azure-Region för en viss prenumeration via anslutningar mellan lokala konfigurationer.</span><span class="sxs-lookup"><span data-stu-id="f41ff-549">This makes it possible to leverage more than one Azure Region for a specific subscription through Cross-Premises configurations.</span></span>

<span data-ttu-id="f41ff-550">Mer dokumentation finns [i den här artikeln][vpn-gateway-create-site-to-site-rm-powershell]</span><span class="sxs-lookup"><span data-stu-id="f41ff-550">For more documentation please see [this article][vpn-gateway-create-site-to-site-rm-powershell]</span></span>

<span data-ttu-id="f41ff-551">[comment]: <> (MShermannd TODO hittades ingen ARM doku länk)</span><span class="sxs-lookup"><span data-stu-id="f41ff-551">[comment]: <> (MShermannd TODO found no ARM docu link)</span></span>

#### <a name="vnet-to-vnet-connection"></a><span data-ttu-id="f41ff-552">Virtuella nätverk på VNet-anslutning</span><span class="sxs-lookup"><span data-stu-id="f41ff-552">VNet to VNet Connection</span></span>
<span data-ttu-id="f41ff-553">Med hjälp av VPN för flera platser, måste du konfigurera ett separat virtuellt Azure-nätverk i var och en av regionerna.</span><span class="sxs-lookup"><span data-stu-id="f41ff-553">Using Multi-Site VPN, you need to configure a separate Azure Virtual Network in each of the regions.</span></span> <span data-ttu-id="f41ff-554">Du har dock ofta kravet att programkomponenterna i olika områden ska kommunicera med varandra.</span><span class="sxs-lookup"><span data-stu-id="f41ff-554">However very often you have the requirement that the software components in the different regions should communicate with each other.</span></span> <span data-ttu-id="f41ff-555">Den här kommunikationen ska helst inte dirigeras från en Azure till lokala och därifrån andra Azure-regionen.</span><span class="sxs-lookup"><span data-stu-id="f41ff-555">Ideally this communication should not be routed from one Azure Region to on-premises and from there to the other Azure Region.</span></span> <span data-ttu-id="f41ff-556">Azure erbjuder genvägen möjlighet att konfigurera en anslutning från ett virtuellt Azure-nätverk i en region till en annan Azure-nätverk finns i en annan region.</span><span class="sxs-lookup"><span data-stu-id="f41ff-556">To shortcut, Azure offers the possibility to configure a connection from one Azure Virtual Network in one region to another Azure Virtual Network hosted in another region.</span></span> <span data-ttu-id="f41ff-557">Den här funktionen kallas VNet-till-VNet-anslutningen.</span><span class="sxs-lookup"><span data-stu-id="f41ff-557">This functionality is called VNet-to-VNet connection.</span></span> <span data-ttu-id="f41ff-558">Mer information om den här funktionen finns här: <https://azure.microsoft.com/documentation/articles/vpn-gateway-vnet-vnet-rm-ps/>.</span><span class="sxs-lookup"><span data-stu-id="f41ff-558">More details on this functionality can be found here: <https://azure.microsoft.com/documentation/articles/vpn-gateway-vnet-vnet-rm-ps/>.</span></span>

#### <a name="private-connection-to-azure--expressroute"></a><span data-ttu-id="f41ff-559">Privat anslutning till Azure – ExpressRoute</span><span class="sxs-lookup"><span data-stu-id="f41ff-559">Private Connection to Azure – ExpressRoute</span></span>
<span data-ttu-id="f41ff-560">Microsoft Azure ExpressRoute kan privata anslutningar mellan Azure-datacenter och antingen kundens lokala infrastruktur eller i en miljö med samplacering skapas.</span><span class="sxs-lookup"><span data-stu-id="f41ff-560">Microsoft Azure ExpressRoute allows the creation of private connections between Azure data centers and either the customer's on-premises infrastructure or in a co-location environment.</span></span> <span data-ttu-id="f41ff-561">ExpressRoute erbjuds av olika MPLS (paketväxlat) VPN-leverantörer eller andra leverantörer.</span><span class="sxs-lookup"><span data-stu-id="f41ff-561">ExpressRoute is offered by various MPLS (packet switched) VPN providers or other Network Service Providers.</span></span> <span data-ttu-id="f41ff-562">ExpressRoute-anslutningar går inte via offentligt Internet.</span><span class="sxs-lookup"><span data-stu-id="f41ff-562">ExpressRoute connections do not go over the public Internet.</span></span> <span data-ttu-id="f41ff-563">ExpressRoute-anslutningar ger högre säkerhet och högre tillförlitlighet via flera parallella kretsar, högre hastighet och lägre svarstider än vanliga anslutningar över Internet.</span><span class="sxs-lookup"><span data-stu-id="f41ff-563">ExpressRoute connections offer higher security, more reliability through multiple parallel circuits, faster speeds and lower latencies than typical connections over the Internet.</span></span>

<span data-ttu-id="f41ff-564">Hitta mer information om Azure ExpressRoute och erbjudanden här:</span><span class="sxs-lookup"><span data-stu-id="f41ff-564">Find more details on Azure ExpressRoute and offerings here:</span></span>

* <span data-ttu-id="f41ff-565"><https://Azure.microsoft.com/Documentation/Services/expressroute/></span><span class="sxs-lookup"><span data-stu-id="f41ff-565"><https://azure.microsoft.com/documentation/services/expressroute/></span></span>
* <span data-ttu-id="f41ff-566"><https://Azure.microsoft.com/pricing/details/expressroute/></span><span class="sxs-lookup"><span data-stu-id="f41ff-566"><https://azure.microsoft.com/pricing/details/expressroute/></span></span>
* <span data-ttu-id="f41ff-567"><https://Azure.microsoft.com/Documentation/articles/expressroute-faqs/></span><span class="sxs-lookup"><span data-stu-id="f41ff-567"><https://azure.microsoft.com/documentation/articles/expressroute-faqs/></span></span>

<span data-ttu-id="f41ff-568">Expressroute gör att flera Azure-prenumerationer via en ExpressRoute-krets dokumenteras här</span><span class="sxs-lookup"><span data-stu-id="f41ff-568">Express Route enables multiple Azure subscriptions through one ExpressRoute circuit as documented here</span></span>

* <span data-ttu-id="f41ff-569"><https://Azure.microsoft.com/Documentation/articles/expressroute-howto-linkvnet-arm/></span><span class="sxs-lookup"><span data-stu-id="f41ff-569"><https://azure.microsoft.com/documentation/articles/expressroute-howto-linkvnet-arm/></span></span>
* <span data-ttu-id="f41ff-570"><https://Azure.microsoft.com/Documentation/articles/expressroute-howto-Circuit-arm/></span><span class="sxs-lookup"><span data-stu-id="f41ff-570"><https://azure.microsoft.com/documentation/articles/expressroute-howto-circuit-arm/></span></span>

#### <a name="forced-tunneling-in-case-of-cross-premises"></a><span data-ttu-id="f41ff-571">Tvingad tunneltrafik vid mellan platser</span><span class="sxs-lookup"><span data-stu-id="f41ff-571">Forced tunneling in case of cross-premises</span></span>
<span data-ttu-id="f41ff-572">För virtuella datorer ansluta till lokala domäner via plats-till-plats, punkt-till-plats eller ExpressRoute, måste du se till att Internet-proxyinställningarna komma att distribueras för alla användare i dessa virtuella datorer samt.</span><span class="sxs-lookup"><span data-stu-id="f41ff-572">For VMs joining on-premises domains through site-to-site, point-to-site or ExpressRoute, you need to make sure that the Internet proxy settings are getting deployed for all the users in those VMs as well.</span></span> <span data-ttu-id="f41ff-573">Som standard program som körs i de virtuella datorer eller användare som använder en webbläsare för att komma åt internet inte skulle gå igenom företagets proxy, men det skulle ansluta direkt till Azure till internet.</span><span class="sxs-lookup"><span data-stu-id="f41ff-573">By default, software running in those VMs or users using a browser to access the internet would not go through the company proxy, but would connect straight through Azure to the internet.</span></span> <span data-ttu-id="f41ff-574">Men även Proxyinställningen är inte en 100%-lösning för att dirigera trafik via företagets proxy eftersom det är ansvar för program och tjänster för att söka efter proxyn.</span><span class="sxs-lookup"><span data-stu-id="f41ff-574">But even the proxy setting is not a 100% solution to direct the traffic through the company proxy since it is responsibility of software and services to check for the proxy.</span></span> <span data-ttu-id="f41ff-575">Om program som körs i den virtuella datorn inte gör detta eller ändrar inställningarna för en administratör, trafik till Internet kan vara detoured igen direkt via Azure till Internet.</span><span class="sxs-lookup"><span data-stu-id="f41ff-575">If software running in the VM is not doing that or an administrator manipulates the settings, traffic to the Internet can be detoured again directly through Azure to the Internet.</span></span>

<span data-ttu-id="f41ff-576">För att undvika detta, kan du konfigurera Tvingad Tunneling med plats-till-plats-anslutning mellan Azure och lokalt.</span><span class="sxs-lookup"><span data-stu-id="f41ff-576">In order to avoid this, you can configure Forced Tunneling with site-to-site connectivity between on-premises and Azure.</span></span> <span data-ttu-id="f41ff-577">Detaljerad beskrivning av funktionen Tvingad tunneltrafik publiceras här <https://azure.microsoft.com/documentation/articles/vpn-gateway-forced-tunneling-rm/></span><span class="sxs-lookup"><span data-stu-id="f41ff-577">The detailed description of the Forced Tunneling feature is published here <https://azure.microsoft.com/documentation/articles/vpn-gateway-forced-tunneling-rm/></span></span>

<span data-ttu-id="f41ff-578">Tvingad Tunneling med ExpressRoute aktiveras av kunder annonserar en standardväg via ExpressRoute BGP-peeringsessioner.</span><span class="sxs-lookup"><span data-stu-id="f41ff-578">Forced Tunneling with ExpressRoute is enabled by customers advertising a default route via the ExpressRoute BGP peering sessions.</span></span>

#### <a name="summary-of-azure-networking"></a><span data-ttu-id="f41ff-579">Översikt över Azure-nätverk</span><span class="sxs-lookup"><span data-stu-id="f41ff-579">Summary of Azure Networking</span></span>
<span data-ttu-id="f41ff-580">Det här kapitlet innehåller många viktiga punkter om Azure-nätverk.</span><span class="sxs-lookup"><span data-stu-id="f41ff-580">This chapter contained many important points about Azure Networking.</span></span> <span data-ttu-id="f41ff-581">Här följer en sammanfattning av de viktigaste aspekterna:</span><span class="sxs-lookup"><span data-stu-id="f41ff-581">Here is a summary of the main points:</span></span>

* <span data-ttu-id="f41ff-582">Virtuella Azure-nätverk kan du konfigurera nätverket enligt dina behov</span><span class="sxs-lookup"><span data-stu-id="f41ff-582">Azure Virtual Networks allows to set up the network according to your own needs</span></span>
* <span data-ttu-id="f41ff-583">Virtuella Azure-nätverk kan utnyttjas för att tilldela IP-adressintervall till virtuella datorer eller tilldela fasta IP-adresserna till virtuella datorer</span><span class="sxs-lookup"><span data-stu-id="f41ff-583">Azure Virtual Networks can be leveraged to assign IP address ranges to VMs or assign fixed IP addresses to VMs</span></span>
* <span data-ttu-id="f41ff-584">Om du vill konfigurera en plats-till-plats eller en punkt-till-plats-anslutning måste du skapa ett Azure Virtual Network först</span><span class="sxs-lookup"><span data-stu-id="f41ff-584">To set up a Site-To-Site or Point-To-Site connection you need to create an Azure Virtual Network first</span></span>
* <span data-ttu-id="f41ff-585">När en virtuell dator har distribuerats är det inte längre går att ändra det virtuella nätverket som tilldelats den virtuella datorn</span><span class="sxs-lookup"><span data-stu-id="f41ff-585">Once a virtual machine has been deployed it is no longer possible to change the Virtual Network assigned to the VM</span></span>

### <a name="quotas-in-azure-virtual-machine-services"></a><span data-ttu-id="f41ff-586">Kvoter i virtuell dator i Azure-tjänster</span><span class="sxs-lookup"><span data-stu-id="f41ff-586">Quotas in Azure Virtual Machine Services</span></span>
<span data-ttu-id="f41ff-587">Vi måste veta det faktum att lagring och nätverksinfrastruktur delas mellan virtuella datorer som kör en mängd olika tjänster i Azure-infrastrukturen.</span><span class="sxs-lookup"><span data-stu-id="f41ff-587">We need to be clear about the fact that the storage and network infrastructure is shared between VMs running a variety of services in the Azure infrastructure.</span></span> <span data-ttu-id="f41ff-588">Och precis som för datacenter kundens egna överbelasta på några av infrastrukturresurser utförs i grad.</span><span class="sxs-lookup"><span data-stu-id="f41ff-588">And just as in the customer’s own data centers, over-provisioning of some of the infrastructure resources does take place to a degree.</span></span> <span data-ttu-id="f41ff-589">Microsoft Azure-plattformen använder disk-, processor-, nätverks- och andra kvoter att begränsa de resurser som används och att bevara konsekvent och deterministisk prestanda.</span><span class="sxs-lookup"><span data-stu-id="f41ff-589">The Microsoft Azure Platform uses disk, CPU, network and other quotas to limit the resource consumption and to preserve consistent and deterministic performance.</span></span>  <span data-ttu-id="f41ff-590">Olika VM-typer (A5, A6 och så vidare) har olika kvoter för antalet diskar, processor, RAM-minne och nätverk.</span><span class="sxs-lookup"><span data-stu-id="f41ff-590">The different VM types (A5, A6, etc) have different quotas for the number of disks, CPU, RAM and Network.</span></span>

> [!NOTE]
> <span data-ttu-id="f41ff-591">Processor och minne resurser av VM-typer som stöds av SAP är förallokerade på värdnoderna.</span><span class="sxs-lookup"><span data-stu-id="f41ff-591">CPU and memory resources of the VM types supported by SAP are pre-allocated on the host nodes.</span></span> <span data-ttu-id="f41ff-592">Detta innebär att när den virtuella datorn har distribuerats, resurser på värden är tillgänglig som definieras av VM-typen.</span><span class="sxs-lookup"><span data-stu-id="f41ff-592">This means that once the VM is deployed, the resources on the host will be available as defined by the VM type.</span></span>
>
>

<span data-ttu-id="f41ff-593">Kvoter för varje virtuell datorstorlek måste beaktas när du planerar och storleksanpassa SAP på Azure-lösningar.</span><span class="sxs-lookup"><span data-stu-id="f41ff-593">When planning and sizing SAP on Azure solutions the quotas for each virtual machine size must be considered.</span></span>  <span data-ttu-id="f41ff-594">VM-kvoter beskrivs [här][virtual-machines-sizes].</span><span class="sxs-lookup"><span data-stu-id="f41ff-594">The VM quotas are described [here][virtual-machines-sizes].</span></span>

<span data-ttu-id="f41ff-595">Kvoter beskrivs representerar teoretisk högsta värden.</span><span class="sxs-lookup"><span data-stu-id="f41ff-595">The quotas described represent the theoretical maximum values.</span></span>  <span data-ttu-id="f41ff-596">Gränsen på IOPS per virtuell Hårddisk kan uppnås med små IOs (8kb), men de kan eventuellt inte uppnås med stora IOs (1Mb).</span><span class="sxs-lookup"><span data-stu-id="f41ff-596">The limit of IOPS per VHD may be achieved with small IOs (8kb) but possibly may not be achieved with large IOs (1Mb).</span></span>  <span data-ttu-id="f41ff-597">IOPS-gräns tillämpas på Granulariteten för enstaka virtuella hårddiskar.</span><span class="sxs-lookup"><span data-stu-id="f41ff-597">The IOPS limit is enforced on the granularity of single VHDs.</span></span>

<span data-ttu-id="f41ff-598">Som en grov beslutsträd avgöra om ett SAP-system som passar till Azure-tjänster för virtuella datorer och dess funktioner, eller om ett befintligt system måste konfigureras på olika sätt för att distribuera system på Azure, kan du använda beslutsträdet nedan:</span><span class="sxs-lookup"><span data-stu-id="f41ff-598">As a rough decision tree to decide whether an SAP system fits into Azure Virtual Machine Services and its capabilities or whether an existing system needs to be configured differently in order to deploy the system on Azure, the decision tree below can be used:</span></span>

![Beslutsträd för att bestämma möjlighet att distribuera SAP på Azure][planning-guide-figure-700]

<span data-ttu-id="f41ff-600">**Steg 1**: den viktigaste informationen är att börja med SAP-krav för ett visst SAP-system.</span><span class="sxs-lookup"><span data-stu-id="f41ff-600">**Step 1**: The most important information to start with is the SAPS requirement for a given SAP system.</span></span> <span data-ttu-id="f41ff-601">SAP-krav måste delas in den DBMS och SAP programmet del, även om SAP-systemet är redan distribuerad lokalt i en nivå 2-konfiguration.</span><span class="sxs-lookup"><span data-stu-id="f41ff-601">The SAPS requirements need to be separated out into the DBMS part and the SAP application part, even if the SAP system is already deployed on-premises in a 2-tier configuration.</span></span> <span data-ttu-id="f41ff-602">SAP relaterade till maskinvaran som används ofta kan fastställa eller beräknat baserat på befintliga SAP prestandamått för befintliga system.</span><span class="sxs-lookup"><span data-stu-id="f41ff-602">For existing systems, the SAPS related to the hardware in use often can be determined or estimated based on existing SAP benchmarks.</span></span> <span data-ttu-id="f41ff-603">Resultaten finns här: <http://global.sap.com/campaigns/benchmark/index.epx>.</span><span class="sxs-lookup"><span data-stu-id="f41ff-603">The results can be found here: <http://global.sap.com/campaigns/benchmark/index.epx>.</span></span>
<span data-ttu-id="f41ff-604">För nyligen distribuerade SAP-system, bör du har gått igenom en storlek Övning som bestämmer SAP kraven i systemet.</span><span class="sxs-lookup"><span data-stu-id="f41ff-604">For newly deployed SAP systems, you should have gone through a sizing exercise which should determine the SAPS requirements of the system.</span></span>
<span data-ttu-id="f41ff-605">Se även den här bloggen och bifogade dokumentet för SAP storlek på Azure: <http://blogs.msdn.com/b/saponsqlserver/archive/2015/12/01/new-white-paper-on-sizing-sap-solutions-on-azure-public-cloud.aspx></span><span class="sxs-lookup"><span data-stu-id="f41ff-605">See also this blog and attached document for SAP sizing on Azure : <http://blogs.msdn.com/b/saponsqlserver/archive/2015/12/01/new-white-paper-on-sizing-sap-solutions-on-azure-public-cloud.aspx></span></span>

<span data-ttu-id="f41ff-606">**Steg 2**: för befintliga system i/o-volym och i/o-åtgärder per sekund på servern DBMS mäts.</span><span class="sxs-lookup"><span data-stu-id="f41ff-606">**Step 2**: For existing systems, the I/O volume and I/O operations per second on the DBMS server should be measured.</span></span> <span data-ttu-id="f41ff-607">För nyligen planerad system bör sizing Övning för det nya systemet även ge grov uppslag av i/o-kraven på DBMS-sida.</span><span class="sxs-lookup"><span data-stu-id="f41ff-607">For newly planned systems, the sizing exercise for the new system also should give rough ideas of the I/O requirements on the DBMS side.</span></span> <span data-ttu-id="f41ff-608">Om osäker, måste så småningom du genomföra ett konceptbevis.</span><span class="sxs-lookup"><span data-stu-id="f41ff-608">If unsure, you eventually need to conduct a Proof of Concept.</span></span>

<span data-ttu-id="f41ff-609">**Steg 3**: jämföra SAP-krav för DBMS-server med SAP Azure VM olika kan ge.</span><span class="sxs-lookup"><span data-stu-id="f41ff-609">**Step 3**: Compare the SAPS requirement for the DBMS server with the SAPS the different VM types of Azure can provide.</span></span> <span data-ttu-id="f41ff-610">Informationen i de olika typerna av Azure VM SAP dokumenteras i SAP-kommentar [1928533].</span><span class="sxs-lookup"><span data-stu-id="f41ff-610">The information on SAPS of the different Azure VM types is documented in SAP Note [1928533].</span></span> <span data-ttu-id="f41ff-611">Fokus bör finnas på DBMS VM först eftersom databasen lagret är lagret ett SAP NetWeaver system som inte kan skaländras ut i flesta distributioner.</span><span class="sxs-lookup"><span data-stu-id="f41ff-611">The focus should be on the DBMS VM first since the database layer is the layer in a SAP NetWeaver system that does not scale out in the majority of deployments.</span></span> <span data-ttu-id="f41ff-612">Däremot kan programnivå SAP skalas ut.</span><span class="sxs-lookup"><span data-stu-id="f41ff-612">In contrast, the SAP application layer can be scaled out.</span></span> <span data-ttu-id="f41ff-613">Om ingen av SAP stöds Virtuella Azure-typer kan tillhandahålla nödvändiga SAP, arbetsbelastningen för det planerade SAP-systemet kan inte köras på Azure.</span><span class="sxs-lookup"><span data-stu-id="f41ff-613">If none of the SAP supported Azure VM types can deliver the required SAPS, the workload of the planned SAP system can’t be run on Azure.</span></span> <span data-ttu-id="f41ff-614">Antingen måste du distribuera system lokalt eller måste du ändra arbetsbelastningen volymen för systemet.</span><span class="sxs-lookup"><span data-stu-id="f41ff-614">You either need to deploy the system on-premises or you need to change the workload volume for the system.</span></span>

<span data-ttu-id="f41ff-615">**Steg 4**: enligt [här][virtual-machines-sizes], Azure tillämpar en kvot för IOPS per VHD oberoende om du använder standardlagring eller Premium-lagring.</span><span class="sxs-lookup"><span data-stu-id="f41ff-615">**Step 4**: As documented [here][virtual-machines-sizes], Azure enforces an IOPS quota per VHD independent whether you use Standard Storage or Premium Storage.</span></span> <span data-ttu-id="f41ff-616">Beroende på vilken typ av VM, antalet virtuella hårddiskar som kan monteras varierar.</span><span class="sxs-lookup"><span data-stu-id="f41ff-616">Dependent on the VM type, the number of VHDs which can be mounted varies.</span></span> <span data-ttu-id="f41ff-617">Därför kan du beräkna IOPS maximalt som kan uppnås med var och en av de olika typerna av virtuell dator.</span><span class="sxs-lookup"><span data-stu-id="f41ff-617">As a result, you can calculate a maximum IOPS number that can be achieved with each of the different VM types.</span></span> <span data-ttu-id="f41ff-618">Beroende på databasen filens layout, du kan stripe-VHD: er till en volym i gästoperativsystemet.</span><span class="sxs-lookup"><span data-stu-id="f41ff-618">Dependent on the database file layout, you can stripe VHDs to become one volume in the guest OS.</span></span> <span data-ttu-id="f41ff-619">Dock om den aktuella volymen IOPS för en distribuerad SAP-systemet överskrider de beräknade gränserna för den största VM-typ av Azure och om det finns ingen risk för att kompensera med mer minne, kan arbetsbelastningen för SAP-system påverkas negativt.</span><span class="sxs-lookup"><span data-stu-id="f41ff-619">However, if the current IOPS volume of a deployed SAP system exceeds the calculated limits of the largest VM type of Azure and if there is no chance to compensate with more memory, the workload of the SAP system can be impacted severely.</span></span> <span data-ttu-id="f41ff-620">I sådana fall måste nådde du en plats där du inte bör distribuera system på Azure.</span><span class="sxs-lookup"><span data-stu-id="f41ff-620">In such cases, you can hit a point where you should not deploy the system on Azure.</span></span>

<span data-ttu-id="f41ff-621">**Steg 5**: särskilt SAP distribuerade system som är lokalt i nivå 2 konfigurationer finns risken att systemet kan behöva konfigureras på Azure i en nivå 3-konfiguration.</span><span class="sxs-lookup"><span data-stu-id="f41ff-621">**Step 5**: Especially in SAP systems which are deployed on-premises in 2-Tier configurations, the chances are that the system might need to be configured on Azure in a 3-Tier configuration.</span></span> <span data-ttu-id="f41ff-622">I det här steget behöver du kontrollera om det finns en komponent i programnivå SAP som inte skalas ut och som inte passar in i processor och minne resurser som de olika typerna av Virtuella Azure erbjuder.</span><span class="sxs-lookup"><span data-stu-id="f41ff-622">In this step, you need to check whether there is a component in the SAP application layer which can’t be scaled out and which would not fit into the CPU and memory resources the different Azure VM types offer.</span></span> <span data-ttu-id="f41ff-623">Om det verkligen är en sådan komponent, kan inte SAP-systemet och dess arbetsbelastningen distribueras till Azure.</span><span class="sxs-lookup"><span data-stu-id="f41ff-623">If there indeed is such a component, the SAP system and its workload can’t be deployed into Azure.</span></span> <span data-ttu-id="f41ff-624">Men om du kan skala ut SAP-programkomponenter i flera virtuella Azure-datorer, systemet kan distribueras till Azure.</span><span class="sxs-lookup"><span data-stu-id="f41ff-624">But if you can scale-out the SAP application components into multiple Azure VMs, the system can be deployed into Azure.</span></span>

<span data-ttu-id="f41ff-625">**Steg 6**: om DBMS och SAP layer programkomponenter kan köras på virtuella Azure-datorer, konfigurationen måste definieras med avseende på:</span><span class="sxs-lookup"><span data-stu-id="f41ff-625">**Step 6**: If the DBMS and SAP application layer components can be run in Azure VMs, the configuration needs to be defined with regard to:</span></span>

* <span data-ttu-id="f41ff-626">Antal virtuella Azure-datorer</span><span class="sxs-lookup"><span data-stu-id="f41ff-626">Number of Azure VMs</span></span>
* <span data-ttu-id="f41ff-627">VM-typer för de enskilda komponenterna</span><span class="sxs-lookup"><span data-stu-id="f41ff-627">VM types for the individual components</span></span>
* <span data-ttu-id="f41ff-628">Antal virtuella hårddiskar i DBMS VM att ge tillräckligt med IOPS</span><span class="sxs-lookup"><span data-stu-id="f41ff-628">Number of VHDs in DBMS VM to provide enough IOPS</span></span>

## <a name="managing-azure-assets"></a><span data-ttu-id="f41ff-629">Hantera Azure tillgångar</span><span class="sxs-lookup"><span data-stu-id="f41ff-629">Managing Azure Assets</span></span>
### <a name="azure-portal"></a><span data-ttu-id="f41ff-630">Azure Portal</span><span class="sxs-lookup"><span data-stu-id="f41ff-630">Azure Portal</span></span>
<span data-ttu-id="f41ff-631">Azure Portal är en av tre gränssnitt för att hantera Virtuella Azure-distributioner.</span><span class="sxs-lookup"><span data-stu-id="f41ff-631">The Azure Portal is one of three interfaces to manage Azure VM deployments.</span></span> <span data-ttu-id="f41ff-632">Grundläggande hanteringsuppgifter som att distribuera virtuella datorer från bilder, kan göras via Azure Portal.</span><span class="sxs-lookup"><span data-stu-id="f41ff-632">The basic management tasks, like deploying VMs from images, can be done through the Azure Portal.</span></span> <span data-ttu-id="f41ff-633">Skapande av Lagringskonton, virtuella nätverk och andra Azure-komponenter är dessutom också uppgifter som kan hantera mycket bra i Azure Portal.</span><span class="sxs-lookup"><span data-stu-id="f41ff-633">In addition, the creation of Storage Accounts, Virtual Networks and other Azure components are also tasks the Azure Portal can handle very well.</span></span> <span data-ttu-id="f41ff-634">Men funktioner som överför virtuella hårddiskar från lokal till Azure eller kopierar en VHD i Azure är uppgifter som kräver verktyg från tredje part eller administration via PowerShell eller CLI.</span><span class="sxs-lookup"><span data-stu-id="f41ff-634">However, functionality like uploading VHDs from on-premises to Azure or copying a VHD within Azure are tasks which require either third party tools or administration through PowerShell or CLI.</span></span>

![Microsoft Azure Portal – översikt över virtuella datorer][planning-guide-figure-800]

<span data-ttu-id="f41ff-636">[comment]: <> (MSSedusch * < https://azure.microsoft.com/documentation/articles/virtual-networks-create-vnet-arm-pportal/>)</span><span class="sxs-lookup"><span data-stu-id="f41ff-636">[comment]: <> (MSSedusch * <https://azure.microsoft.com/documentation/articles/virtual-networks-create-vnet-arm-pportal/>)</span></span>
<span data-ttu-id="f41ff-637">[comment]: <> (MSSedusch * < https://azure.microsoft.com/documentation/articles/virtual-machines-windows-tutorial/>)</span><span class="sxs-lookup"><span data-stu-id="f41ff-637">[comment]: <> (MSSedusch * <https://azure.microsoft.com/documentation/articles/virtual-machines-windows-tutorial/>)</span></span>

<span data-ttu-id="f41ff-638">Uppgifter för administration och konfiguration för den virtuella dator-instansen kan utföras från i Azure-portalen.</span><span class="sxs-lookup"><span data-stu-id="f41ff-638">Administration and configuration tasks for the Virtual Machine instance are possible from within the Azure Portal.</span></span>

<span data-ttu-id="f41ff-639">Förutom att starta om och stänga av en virtuell dator kan också koppla, koppla från och skapa datadiskar för att avbilda instansen för förberedelse av avbildningen och konfigurera storleken på den virtuella datorinstans instansen virtuella.</span><span class="sxs-lookup"><span data-stu-id="f41ff-639">Besides restarting and shutting down a Virtual Machine you can also attach, detach and create data disks for the Virtual Machine instance, to capture the instance for image preparation and configure the size of the Virtual Machine instance.</span></span>

<span data-ttu-id="f41ff-640">Azure Portal tillhandahåller grundläggande funktioner för att distribuera och konfigurera virtuella datorer och många andra Azure-tjänster.</span><span class="sxs-lookup"><span data-stu-id="f41ff-640">The Azure Portal provides basic functionality to deploy and configure VMs and many other Azure services.</span></span> <span data-ttu-id="f41ff-641">Men inte alla tillgängliga funktioner omfattas av Azure Portal.</span><span class="sxs-lookup"><span data-stu-id="f41ff-641">However not all available functionality is covered by the Azure Portal.</span></span> <span data-ttu-id="f41ff-642">I Azure-portalen går inte att utföra åtgärder som:</span><span class="sxs-lookup"><span data-stu-id="f41ff-642">In the Azure Portal, it’s not possible to perform tasks like:</span></span>

* <span data-ttu-id="f41ff-643">Överföring av virtuella hårddiskar till Azure</span><span class="sxs-lookup"><span data-stu-id="f41ff-643">Uploading VHDs to Azure</span></span>
* <span data-ttu-id="f41ff-644">Kopiera virtuella datorer</span><span class="sxs-lookup"><span data-stu-id="f41ff-644">Copying VMs</span></span>

<span data-ttu-id="f41ff-645">[comment]: <> (MShermannd TODO vad om automatisering i tjänsten för SAP virtuella datorer?)</span><span class="sxs-lookup"><span data-stu-id="f41ff-645">[comment]: <> (MShermannd TODO what about automation service for SAP VMs ? )</span></span>
<span data-ttu-id="f41ff-646">[comment]: <> (MSSedusch distribution av flera virtuella datorer os under tiden möjligt)</span><span class="sxs-lookup"><span data-stu-id="f41ff-646">[comment]: <> (MSSedusch deployment of multiple VMs os meanwhile possible)</span></span>
<span data-ttu-id="f41ff-647">[comment]: <> (MSSedusch också någon typ av automation om distributionen är inte möjligt med Azure-portalen. Det går inte att åtgärder som skript distribution av flera virtuella datorer via Azure Portal.)</span><span class="sxs-lookup"><span data-stu-id="f41ff-647">[comment]: <> (MSSedusch Also any type of automation regarding deployment is not possible with the Azure portal. Tasks such as scripted deployment of multiple VMs is not possible via the Azure Portal.)</span></span>

### <a name="management-via-microsoft-azure-powershell-cmdlets"></a><span data-ttu-id="f41ff-648">Hantering via Microsoft Azure PowerShell-cmdlets</span><span class="sxs-lookup"><span data-stu-id="f41ff-648">Management via Microsoft Azure PowerShell cmdlets</span></span>
<span data-ttu-id="f41ff-649">Windows PowerShell är ett kraftfullt och utökningsbart ramverk som har varit brett bland kunder distribuera större mängder system i Azure.</span><span class="sxs-lookup"><span data-stu-id="f41ff-649">Windows PowerShell is a powerful and extensible framework that has been widely adopted by customers deploying larger numbers of systems in Azure.</span></span> <span data-ttu-id="f41ff-650">Efter installation av PowerShell-cmdlet på en stationär dator, bärbar dator eller dedikerade management station kan PowerShell-cmdlet: ar köras via fjärranslutning.</span><span class="sxs-lookup"><span data-stu-id="f41ff-650">After the installation of PowerShell cmdlets on a desktop, laptop or dedicated management station, the PowerShell cmdlets can be run remotely.</span></span>

<span data-ttu-id="f41ff-651">Processen för att aktivera en lokal desktop dator för användning av Azure PowerShell-cmdlets och hur du konfigurerar dem för användning med Azure-prenumeration(er) beskrivs i [i den här artikeln][powershell-install-configure].</span><span class="sxs-lookup"><span data-stu-id="f41ff-651">The process to enable a local desktop/laptop for the usage of Azure PowerShell cmdlets and how to configure those for the usage with the Azure subscription(s) is described in [this article][powershell-install-configure].</span></span>

<span data-ttu-id="f41ff-652">Mer detaljerade instruktioner för hur du installerar, uppdatera och konfigurera Azure PowerShell cmdlets finns i [detta kapitel i distributionsguiden för][deployment-guide-4.1].</span><span class="sxs-lookup"><span data-stu-id="f41ff-652">More detailed steps on how to install, update and configure the Azure PowerShell cmdlets can also be found in [this chapter of the Deployment Guide][deployment-guide-4.1].</span></span>

<span data-ttu-id="f41ff-653">Customer experience har hittills att PowerShell (PS) verkligen är det mer kraftfulla verktyget att distribuera virtuella datorer och skapa anpassade steg i distributionen av virtuella datorer.</span><span class="sxs-lookup"><span data-stu-id="f41ff-653">Customer experience so far has been that PowerShell (PS) is certainly the more powerful tool to deploy VMs and to create custom steps in the deployment of VMs.</span></span> <span data-ttu-id="f41ff-654">Alla kunder SAP-instanser som körs i Azure använder PS-cmdlets för att komplettera hanteringsuppgifter de i Azure-portalen eller använder även PS-cmdlets exklusivt för att hantera sina distributioner i Azure.</span><span class="sxs-lookup"><span data-stu-id="f41ff-654">All of the customers running SAP instances in Azure are using PS cmdlets to supplement management tasks they do in the Azure Portal or are even using PS cmdlets exclusively to manage their deployments in Azure.</span></span> <span data-ttu-id="f41ff-655">Eftersom Azure specifika cmdletar delar samma namngivningskonvention som mer än 2000 relaterade Windows-cmdletar, är en enkel åtgärd för Windows-administratörer utnyttja dessa cmdlets.</span><span class="sxs-lookup"><span data-stu-id="f41ff-655">Since the Azure specific cmdlets share the same naming convention as the more than 2000 Windows related cmdlets, it is an easy task for Windows administrators to leverage those cmdlets.</span></span>

<span data-ttu-id="f41ff-656">Finns det här exemplet: <http://blogs.technet.com/b/keithmayer/archive/2015/07/07/18-steps-for-end-to-end-iaas-provisioning-in-the-cloud-with-azure-resource-manager-arm-powershell-and-desired-state-configuration-dsc.aspx></span><span class="sxs-lookup"><span data-stu-id="f41ff-656">See example here : <http://blogs.technet.com/b/keithmayer/archive/2015/07/07/18-steps-for-end-to-end-iaas-provisioning-in-the-cloud-with-azure-resource-manager-arm-powershell-and-desired-state-configuration-dsc.aspx></span></span>

<span data-ttu-id="f41ff-657">[comment]: <> (MShermannd TODO Beskriver nya CLI-kommandot när testas)</span><span class="sxs-lookup"><span data-stu-id="f41ff-657">[comment]: <> (MShermannd TODO describe new CLI command when tested )</span></span>
<span data-ttu-id="f41ff-658">Distribution av Azure övervakning tillägget för SAP (finns i kapitlet [Azure övervakning lösning för SAP] [ planning-guide-9.1] i det här dokumentet) är bara möjligt via PowerShell eller CLI.</span><span class="sxs-lookup"><span data-stu-id="f41ff-658">Deployment of the Azure Monitoring Extension for SAP (see chapter [Azure Monitoring Solution for SAP][planning-guide-9.1] in this document) is only possible via PowerShell or CLI.</span></span> <span data-ttu-id="f41ff-659">Därför är det obligatoriskt att installera och konfigurera PowerShell eller CLI när du distribuerar eller administrera en SAP NetWeaver system i Azure.</span><span class="sxs-lookup"><span data-stu-id="f41ff-659">Therefore it is mandatory to setup and configure PowerShell or CLI when deploying or administering an SAP NetWeaver system in Azure.</span></span>  

<span data-ttu-id="f41ff-660">Som Azure tillhandahåller fler funktioner, kommer nya PS-cmdlets som ska läggas till som kräver en uppdatering av cmdlets.</span><span class="sxs-lookup"><span data-stu-id="f41ff-660">As Azure provides more functionality, new PS cmdlets are going to be added that requires an update of the cmdlets.</span></span> <span data-ttu-id="f41ff-661">Därför är det klokt att kontrollera webbplatsen Azure hämta minst en gång i månaden <https://azure.microsoft.com/downloads/> för en ny version av cmdlets.</span><span class="sxs-lookup"><span data-stu-id="f41ff-661">Therefore it makes sense to check the Azure Download site at least once the month <https://azure.microsoft.com/downloads/> for a new version of the cmdlets.</span></span> <span data-ttu-id="f41ff-662">Den nya versionen installeras bara på den äldre versionen.</span><span class="sxs-lookup"><span data-stu-id="f41ff-662">The new version will just be installed on top of the older version.</span></span>

<span data-ttu-id="f41ff-663">För en allmän lista över Azure med PowerShell-kommandon finns här: <https://msdn.microsoft.com/library/azure/dn708514.aspx>.</span><span class="sxs-lookup"><span data-stu-id="f41ff-663">For a general list of Azure related PowerShell commands check here: <https://msdn.microsoft.com/library/azure/dn708514.aspx>.</span></span>

### <a name="management-via-microsoft-azure-cli-commands"></a><span data-ttu-id="f41ff-664">Hantering via Microsoft Azure CLI-kommandona</span><span class="sxs-lookup"><span data-stu-id="f41ff-664">Management via Microsoft Azure CLI commands</span></span>
<span data-ttu-id="f41ff-665">För kunder som använder Linux och vill hantera Azure kanske resurser Powershell inte är ett alternativ.</span><span class="sxs-lookup"><span data-stu-id="f41ff-665">For customers who use Linux and want to manage Azure resources Powershell might not be an option.</span></span> <span data-ttu-id="f41ff-666">Microsoft erbjuder Azure CLI som ett alternativ.</span><span class="sxs-lookup"><span data-stu-id="f41ff-666">Microsoft offers Azure CLI as an alternative.</span></span>
<span data-ttu-id="f41ff-667">Azure CLI tillhandahåller en uppsättning med öppen källkod, plattformsoberoende kommandon för att arbeta med Azure-plattformen.</span><span class="sxs-lookup"><span data-stu-id="f41ff-667">The Azure CLI provides a set of open source, cross-platform commands for working with the Azure Platform.</span></span> <span data-ttu-id="f41ff-668">Azure CLI tillhandahåller i stort sett samma funktioner som finns i Azure-portalen.</span><span class="sxs-lookup"><span data-stu-id="f41ff-668">The Azure CLI provides much of the same functionality found in the Azure portal.</span></span>

<span data-ttu-id="f41ff-669">Information om installation, konfiguration och hur du använder CLI finns-kommandon för att utföra uppgifter för Azure</span><span class="sxs-lookup"><span data-stu-id="f41ff-669">For information about installation, configuration and how to use CLI commands to accomplish Azure tasks see</span></span>

* <span data-ttu-id="f41ff-670">[Installera Azure CLI][xplat-cli]</span><span class="sxs-lookup"><span data-stu-id="f41ff-670">[Install the Azure CLI][xplat-cli]</span></span>
* <span data-ttu-id="f41ff-671">[Distribuera och hantera virtuella datorer med hjälp av Azure Resource Manager-mallar och Azure CLI][virtual-machines-linux-cli-deploy-templates]</span><span class="sxs-lookup"><span data-stu-id="f41ff-671">[Deploy and manage virtual machines by using Azure Resource Manager templates and the Azure CLI][virtual-machines-linux-cli-deploy-templates]</span></span>
* <span data-ttu-id="f41ff-672">[Använda Azure CLI för Mac, Linux och Windows med Azure Resource Manager][xplat-cli-azure-resource-manager]</span><span class="sxs-lookup"><span data-stu-id="f41ff-672">[Use the Azure CLI for Mac, Linux, and Windows with Azure Resource Manager][xplat-cli-azure-resource-manager]</span></span>

<span data-ttu-id="f41ff-673">Läs även kapitel [Azure CLI för virtuella Linux-datorer] [ deployment-guide-4.5.2] i den [Deployment Guide] [ planning-guide] om hur du använder Azure CLI för att distribuera Azure-övervakning Tillägget för SAP.</span><span class="sxs-lookup"><span data-stu-id="f41ff-673">Please also read chapter [Azure CLI for Linux VMs][deployment-guide-4.5.2] in the [Deployment Guide][planning-guide] on how to use Azure CLI to deploy the Azure Monitoring Extension for SAP.</span></span>

## <a name="different-ways-to-deploy-vms-for-sap-in-azure"></a><span data-ttu-id="f41ff-674">Olika sätt att distribuera virtuella datorer för SAP i Azure</span><span class="sxs-lookup"><span data-stu-id="f41ff-674">Different ways to deploy VMs for SAP in Azure</span></span>
<span data-ttu-id="f41ff-675">I det här kapitlet får du lära dig olika sätt att distribuera en virtuell dator i Azure.</span><span class="sxs-lookup"><span data-stu-id="f41ff-675">In this chapter you will learn the different ways to deploy a VM in Azure.</span></span> <span data-ttu-id="f41ff-676">Förberedelse av ytterligare procedurer, samt hantering av virtuella hårddiskar och virtuella datorer i Azure beskrivs i detta kapitel.</span><span class="sxs-lookup"><span data-stu-id="f41ff-676">Additional preparation procedures, as well as handling of VHDs and VMs in Azure are covered in this chapter.</span></span>

### <a name="deployment-of-vms-for-sap"></a><span data-ttu-id="f41ff-677">Distribution av virtuella datorer för SAP</span><span class="sxs-lookup"><span data-stu-id="f41ff-677">Deployment of VMs for SAP</span></span>
<span data-ttu-id="f41ff-678">Microsoft Azure tillhandahåller flera olika sätt att distribuera virtuella datorer och associerade diskar.</span><span class="sxs-lookup"><span data-stu-id="f41ff-678">Microsoft Azure offers multiple ways to deploy VMs and associated disks.</span></span> <span data-ttu-id="f41ff-679">Därför är det mycket viktigt att förstå skillnaderna eftersom förberedelser för de virtuella datorerna kan skiljer sig åt beroende på vilken metod för distribution.</span><span class="sxs-lookup"><span data-stu-id="f41ff-679">Thus it is very important to understand the differences since preparations of the VMs might differ depending on the method of deployment.</span></span> <span data-ttu-id="f41ff-680">I allmänhet ska vi ta en titt på följande scenarier:</span><span class="sxs-lookup"><span data-stu-id="f41ff-680">In general, we will take a look at the following scenarios:</span></span>

#### <span data-ttu-id="f41ff-681"><a name="4d175f1b-7353-4137-9d2f-817683c26e53"></a>Flytta en virtuell dator från lokal till Azure med en icke-generaliserad disk</span><span class="sxs-lookup"><span data-stu-id="f41ff-681"><a name="4d175f1b-7353-4137-9d2f-817683c26e53"></a>Moving a VM from on-premises to Azure with a non-generalized disk</span></span>
<span data-ttu-id="f41ff-682">Du planerar att flytta ett särskilt SAP-system från lokal till Azure.</span><span class="sxs-lookup"><span data-stu-id="f41ff-682">You plan to move a specific SAP system from on-premises to Azure.</span></span> <span data-ttu-id="f41ff-683">Detta kan göras genom att överföra den virtuella Hårddisken som innehåller binärfiler OS, SAP binärfiler och DBMS plus de virtuella hårddiskarna med data och loggfilen filer med DBMS till Azure.</span><span class="sxs-lookup"><span data-stu-id="f41ff-683">This can be done by uploading the VHD which contains the OS, the SAP Binaries and DBMS binaries plus the VHDs with the data and log files of the DBMS to Azure.</span></span> <span data-ttu-id="f41ff-684">Jämfört med [scenario #2 nedan][planning-guide-5.1.2], du behåller värdnamn, SAP-SID och SAP användarkonton i Azure VM som de har konfigurerats i den lokala miljön.</span><span class="sxs-lookup"><span data-stu-id="f41ff-684">In contrast to [scenario #2 below][planning-guide-5.1.2], you keep the hostname, SAP SID and SAP user accounts in the Azure VM as they were configured in the on-premises environment.</span></span> <span data-ttu-id="f41ff-685">Därför är att generalisera bilden inte nödvändigt.</span><span class="sxs-lookup"><span data-stu-id="f41ff-685">Therefore, generalizing the image is not necessary.</span></span> <span data-ttu-id="f41ff-686">Se kapitlen [förberedelse för att flytta en virtuell dator från lokal till Azure med en icke-generaliserad disk] [ planning-guide-5.2.1] i det här dokumentet för lokala förberedelsesteg och överföra ej generaliserad virtuella datorer eller virtuella hårddiskar att Azure.</span><span class="sxs-lookup"><span data-stu-id="f41ff-686">Please see chapters [Preparation for moving a VM from on-premises to Azure with a non-generalized disk][planning-guide-5.2.1] of this document for on-premises preparation steps and upload of non-generalized VMs or VHDs to Azure.</span></span> <span data-ttu-id="f41ff-687">Läs kapitel [Scenario 3: flytta en virtuell dator från lokalt med hjälp av en ej generaliserad Azure VHD med SAP] [ deployment-guide-3.4] i den [Deployment Guide] [ deployment-guide]detaljerade anvisningar för att distribuera en sådan avbildning i Azure.</span><span class="sxs-lookup"><span data-stu-id="f41ff-687">Please read chapter [Scenario 3: Moving a VM from on-premises using a non-generalized Azure VHD with SAP][deployment-guide-3.4] in the [Deployment Guide][deployment-guide] for detailed steps of deploying such an image in Azure.</span></span>

#### <span data-ttu-id="f41ff-688"><a name="e18f7839-c0e2-4385-b1e6-4538453a285c"></a>Distribuera en virtuell dator med en viss kund-bild</span><span class="sxs-lookup"><span data-stu-id="f41ff-688"><a name="e18f7839-c0e2-4385-b1e6-4538453a285c"></a>Deploying a VM with a customer specific image</span></span>
<span data-ttu-id="f41ff-689">På grund av särskilda krav för ditt operativsystem eller DBMS-version, kan de tillhandahållna avbildningarna i Azure Marketplace inte passar dina behov.</span><span class="sxs-lookup"><span data-stu-id="f41ff-689">Due to specific patch requirements of your OS or DBMS version, the provided images in the Azure Marketplace might not fit your needs.</span></span> <span data-ttu-id="f41ff-690">Därför kan du behöva skapa en virtuell dator med hjälp av egna ”privat” OS/DBMS VM-avbildning som kan användas flera gånger efteråt.</span><span class="sxs-lookup"><span data-stu-id="f41ff-690">Therefore, you might need to create a VM using your own ‘private’ OS/DBMS VM image which can be deployed several times afterwards.</span></span> <span data-ttu-id="f41ff-691">För att förbereda en ”privat” avbildning för duplicering, måste följande beaktas:</span><span class="sxs-lookup"><span data-stu-id="f41ff-691">To prepare such a ‘private’ image for duplication, the following items have to be considered :</span></span>


<span data-ttu-id="f41ff-692">[comment]: <> (MSSedusch > finns mer information här:)</span><span class="sxs-lookup"><span data-stu-id="f41ff-692">[comment]: <> (MSSedusch > See more details here :)</span></span>
<span data-ttu-id="f41ff-693">[comment]: <> (MShermannd TODO första länken är om klassiska modellen. Hittade inte en Azure doku artikel)</span><span class="sxs-lookup"><span data-stu-id="f41ff-693">[comment]: <> (MShermannd TODO first link is about classic model. Didn't find an Azure docu article)</span></span>
<span data-ttu-id="f41ff-694">[comment]: <> (MSSedusch >< https://azure.microsoft.com/documentation/articles/virtual-machines-create-upload-vhd-windows-server/>)</span><span class="sxs-lookup"><span data-stu-id="f41ff-694">[comment]: <> (MSSedusch > <https://azure.microsoft.com/documentation/articles/virtual-machines-create-upload-vhd-windows-server/>)</span></span>
<span data-ttu-id="f41ff-695">[comment]: <> (MSSedusch >< http://blogs.technet.com/b/blainbar/archive/2014/09/12/modernizing-your-infrastructure-with-hybrid-cloud-using-custom-vm-images-and-resource-groups-in-microsoft-azure-part-21-blain-barton.aspx>)</span><span class="sxs-lookup"><span data-stu-id="f41ff-695">[comment]: <> (MSSedusch > <http://blogs.technet.com/b/blainbar/archive/2014/09/12/modernizing-your-infrastructure-with-hybrid-cloud-using-custom-vm-images-and-resource-groups-in-microsoft-azure-part-21-blain-barton.aspx>)</span></span>
- - -
> ![Windows][Logo_Windows] <span data-ttu-id="f41ff-697">Windows</span><span class="sxs-lookup"><span data-stu-id="f41ff-697">Windows</span></span>
>
> <span data-ttu-id="f41ff-698">Windows-inställningar (t.ex. Windows-SID och värdnamn) måste vara tas ut/generaliserad på den lokala virtuella datorn via kommandot sysprep.</span><span class="sxs-lookup"><span data-stu-id="f41ff-698">The Windows settings (like Windows SID and hostname) must be abstracted/generalized on the on-premises VM via the sysprep command.</span></span>
>
>
> ![Linux][Logo_Linux] <span data-ttu-id="f41ff-700">Linux</span><span class="sxs-lookup"><span data-stu-id="f41ff-700">Linux</span></span>
>
> <span data-ttu-id="f41ff-701">Följ stegen som beskrivs i följande artiklar innehåller [SUSE] [ virtual-machines-linux-create-upload-vhd-suse] eller [Red Hat] [ virtual-machines-linux-redhat-create-upload-vhd] att förbereda en virtuell Hårddisk som skulle överföras till Azure.</span><span class="sxs-lookup"><span data-stu-id="f41ff-701">Please follow the steps described in these articles for [SUSE][virtual-machines-linux-create-upload-vhd-suse] or [Red Hat][virtual-machines-linux-redhat-create-upload-vhd] to prepare a VHD to be uploaded to Azure.</span></span>
>
>

- - -
<span data-ttu-id="f41ff-702">Om du redan har installerat SAP innehållet i den lokala virtuella datorn (särskilt för nivå 2-system), kan du anpassa SAP systeminställningar när proceduren som stöds av SAP programvara etablering Manager distributionen av virtuella Azure-datorn via instansen (SAP-kommentar [1619720]).</span><span class="sxs-lookup"><span data-stu-id="f41ff-702">If you have already installed SAP content in your on-premises VM (especially for 2-Tier systems), you can adapt the SAP system settings after the deployment of the Azure VM through the instance rename procedure supported by the SAP Software Provisioning Manager (SAP Note [1619720]).</span></span> <span data-ttu-id="f41ff-703">Se kapitlen [förberedelse för att distribuera en virtuell dator med en viss kund-bild för SAP] [ planning-guide-5.2.2] och [ladda upp en lokal VHD till Azure] [ planning-guide-5.3.2]i det här dokumentet för lokala förberedelser och överföring av en generaliserad virtuell dator till Azure.</span><span class="sxs-lookup"><span data-stu-id="f41ff-703">See chapters [Preparation for deploying a VM with a customer specific image for SAP][planning-guide-5.2.2] and [Uploading a VHD from on-premises to Azure][planning-guide-5.3.2] of this document for on-premises preparation steps and upload of a generalized VM to Azure.</span></span> <span data-ttu-id="f41ff-704">Läs kapitel [Scenario 2: distribuera en virtuell dator med en anpassad avbildning för SAP] [ deployment-guide-3.3] i den [Deployment Guide] [ deployment-guide] detaljerade anvisningar för distribuera en sådan avbildning i Azure.</span><span class="sxs-lookup"><span data-stu-id="f41ff-704">Please read chapter [Scenario 2: Deploying a VM with a custom image for SAP][deployment-guide-3.3] in the [Deployment Guide][deployment-guide] for detailed steps of deploying such an image in Azure.</span></span>

#### <a name="deploying-a-vm-out-of-the-azure-marketplace"></a><span data-ttu-id="f41ff-705">Distribuera en virtuell dator utanför Azure Marketplace</span><span class="sxs-lookup"><span data-stu-id="f41ff-705">Deploying a VM out of the Azure Marketplace</span></span>
<span data-ttu-id="f41ff-706">Du vill använda en Microsoft eller 3 part angivna VM-avbildning från Azure Marketplace för att distribuera den virtuella datorn.</span><span class="sxs-lookup"><span data-stu-id="f41ff-706">You would like to use a Microsoft or 3rd party provided VM image from the Azure Marketplace to deploy your VM.</span></span> <span data-ttu-id="f41ff-707">När du har distribuerat den virtuella datorn i Azure måste följa du samma riktlinjer och verktyg för att installera program och/eller DBMS inuti den virtuella datorn som du gör i en lokal miljö.</span><span class="sxs-lookup"><span data-stu-id="f41ff-707">After you deployed your VM in Azure, you follow the same guidelines and tools to install the SAP software and/or DBMS inside your VM as you would do in an on-premises environment.</span></span> <span data-ttu-id="f41ff-708">Mer detaljerad distributionsbeskrivning av finns kapitel [Scenario 1: distribuera en virtuell dator utanför Azure Marketplace för SAP] [ deployment-guide-3.2] i den [Deployment Guide][deployment-guide].</span><span class="sxs-lookup"><span data-stu-id="f41ff-708">For more detailed deployment description, please see chapter [Scenario 1: Deploying a VM out of the Azure Marketplace for SAP][deployment-guide-3.2] in the [Deployment Guide][deployment-guide].</span></span>

### <span data-ttu-id="f41ff-709"><a name="6ffb9f41-a292-40bf-9e70-8204448559e7"></a>Förbereda virtuella datorer med SAP för Azure</span><span class="sxs-lookup"><span data-stu-id="f41ff-709"><a name="6ffb9f41-a292-40bf-9e70-8204448559e7"></a>Preparing VMs with SAP for Azure</span></span>
<span data-ttu-id="f41ff-710">Uppfylla vissa krav innan du laddar upp virtuella datorer till Azure måste du se till att virtuella datorer och virtuella hårddiskar.</span><span class="sxs-lookup"><span data-stu-id="f41ff-710">Before uploading VMs into Azure you need to make sure the VMs and VHDs fulfill certain requirements.</span></span> <span data-ttu-id="f41ff-711">Det finns mindre skillnader beroende på vilken distributionsmetod som används.</span><span class="sxs-lookup"><span data-stu-id="f41ff-711">There are small differences depending on the deployment method that is used.</span></span>

#### <span data-ttu-id="f41ff-712"><a name="1b287330-944b-495d-9ea7-94b83aff73ef"></a>Förberedelser för att flytta en virtuell dator från lokal till Azure med en icke-generaliserad disk</span><span class="sxs-lookup"><span data-stu-id="f41ff-712"><a name="1b287330-944b-495d-9ea7-94b83aff73ef"></a>Preparation for moving a VM from on-premises to Azure with a non-generalized disk</span></span>
<span data-ttu-id="f41ff-713">En vanlig distributionsmetod är att flytta en befintlig virtuell dator som kör ett SAP-system från lokal till Azure.</span><span class="sxs-lookup"><span data-stu-id="f41ff-713">A common deployment method is to move an existing VM which runs an SAP system from on-premises to Azure.</span></span> <span data-ttu-id="f41ff-714">Den virtuella datorn och SAP-system på den virtuella datorn ska precis köras i Azure med samma värdnamn och mycket sannolikt samma SAP-SID.</span><span class="sxs-lookup"><span data-stu-id="f41ff-714">That VM and the SAP system in the VM just should run in Azure using the same hostname and very likely the same SAP SID.</span></span> <span data-ttu-id="f41ff-715">I det här fallet bör gästen OS VM inte vara generaliserad för flera distributioner.</span><span class="sxs-lookup"><span data-stu-id="f41ff-715">In this case the guest OS of VM should not be generalized for multiple deployments.</span></span> <span data-ttu-id="f41ff-716">Om det lokala nätverket har utökats till Azure (se kapitel [mellan lokala - distribution av en eller flera SAP virtuella datorer i Azure med krav på att fullständigt integrerat i det lokala nätverket] [ planning-guide-2.2] i det här dokumentet), även samma domänkonton kan användas i den virtuella datorn eftersom de användes innan lokalt.</span><span class="sxs-lookup"><span data-stu-id="f41ff-716">If the on-premises network got extended into Azure (see chapter [cross-premises - Deployment of single or multiple SAP VMs into Azure with the requirement of being fully integrated into the on-premises network][planning-guide-2.2] in this document), then even the same domain accounts can be used within the VM as those were used before on-premises.</span></span>

<span data-ttu-id="f41ff-717">Kraven när du förbereder din egen Azure VM-disken är:</span><span class="sxs-lookup"><span data-stu-id="f41ff-717">Requirements when preparing your own Azure VM Disk are:</span></span>

* <span data-ttu-id="f41ff-718">Den virtuella Hårddisken som innehåller operativsystemet gick ursprungligen har endast en maximal storlek på 127GB.</span><span class="sxs-lookup"><span data-stu-id="f41ff-718">Originally the VHD containing the operating system could have a maximum size of 127GB only.</span></span> <span data-ttu-id="f41ff-719">Den här begränsningen har eliminerats i slutet av mars 2015.</span><span class="sxs-lookup"><span data-stu-id="f41ff-719">This limitation got eliminated at the end of March 2015.</span></span> <span data-ttu-id="f41ff-720">Den virtuella Hårddisken som innehåller operativsystemet kan nu vara upp till 1TB i storlek som VHD finns också i Azure Storage.</span><span class="sxs-lookup"><span data-stu-id="f41ff-720">Now the VHD containing the operating system can be up to 1TB in size as any other Azure Storage hosted VHD as well.</span></span>

<span data-ttu-id="f41ff-721">[comment]: <> (MShermannd TODO måste du kontrollera om CLI också konverteras till statisk)</span><span class="sxs-lookup"><span data-stu-id="f41ff-721">[comment]: <> (MShermannd  TODO have to check if CLI also converts to static )</span></span>
* <span data-ttu-id="f41ff-722">Den måste vara i formatet fast virtuell Hårddisk.</span><span class="sxs-lookup"><span data-stu-id="f41ff-722">It needs to be in the fixed VHD format.</span></span> <span data-ttu-id="f41ff-723">Dynamiska virtuella hårddiskar eller virtuella hårddiskar i VHDx-format stöds inte ännu i Azure.</span><span class="sxs-lookup"><span data-stu-id="f41ff-723">Dynamic VHDs or VHDs in VHDx format are not yet supported on Azure.</span></span> <span data-ttu-id="f41ff-724">Dynamiska virtuella hårddiskar ska konverteras till statisk virtuella hårddiskar när du överför den virtuella Hårddisken med PowerShell-kommandon eller CLI</span><span class="sxs-lookup"><span data-stu-id="f41ff-724">Dynamic VHDs will be converted to static VHDs when you upload the VHD with PowerShell commandlets or CLI</span></span>
* <span data-ttu-id="f41ff-725">Virtuella hårddiskar som är monterade på den virtuella datorn och ska monteras igen i Azure VM måste vara i ett fast VHD-format samt.</span><span class="sxs-lookup"><span data-stu-id="f41ff-725">VHDs which are mounted to the VM and should be mounted again in Azure to the VM need to be in a fixed VHD format as well.</span></span> <span data-ttu-id="f41ff-726">Samma storleksgränsen på OS-disken gäller för datadiskar.</span><span class="sxs-lookup"><span data-stu-id="f41ff-726">The same size limit of the OS disk applies to data disks as well.</span></span> <span data-ttu-id="f41ff-727">Virtuella hårddiskar kan ha en maximal storlek på 1TB.</span><span class="sxs-lookup"><span data-stu-id="f41ff-727">VHDs can have a maximum size of 1TB.</span></span> <span data-ttu-id="f41ff-728">Dynamiska virtuella hårddiskar ska konverteras till statisk virtuella hårddiskar när du överför den virtuella Hårddisken med PowerShell-kommandon eller CLI</span><span class="sxs-lookup"><span data-stu-id="f41ff-728">Dynamic VHDs will be converted to static VHDs when you upload the VHD with PowerShell commandlets or CLI</span></span>
* <span data-ttu-id="f41ff-729">Lägg till en annan lokalt konto med administratörsbehörighet som kan användas av Microsoft-supporten eller som kan tilldelas som kontext för tjänster och program att köras tills den virtuella datorn har distribuerats och mer lämpliga användare kan användas.</span><span class="sxs-lookup"><span data-stu-id="f41ff-729">Add another local account with administrator privileges which can be used by Microsoft support or which can be assigned as context for services and applications to run in until the VM is deployed and more appropriate users can be used.</span></span>
* <span data-ttu-id="f41ff-730">Om du använder en molnbaserad distributionsscenariot (finns i kapitlet [endast molnbaserad - distributioner på virtuella datorer till Azure utan beroenden i lokala kunden nätverket] [ planning-guide-2.1] i det här dokumentet) i kombination med den här distributionsmetoden domänkonton kanske inte fungerar när Azure-disken har distribuerats i Azure.</span><span class="sxs-lookup"><span data-stu-id="f41ff-730">For the case of using a Cloud-Only deployment scenario (see chapter [Cloud-Only - Virtual Machine deployments into Azure without dependencies on the on-premises customer network][planning-guide-2.1] of this document) in combination with this deployment method, domain accounts might not work once the Azure Disk is deployed in Azure.</span></span> <span data-ttu-id="f41ff-731">Detta gäller särskilt för konton som används för att köra tjänster som DBMS eller SAP-program.</span><span class="sxs-lookup"><span data-stu-id="f41ff-731">This is especially true for accounts which are used to run services like the DBMS or SAP applications.</span></span> <span data-ttu-id="f41ff-732">Därför måste du ersätta dessa domänkonton med VM lokala konton och ta bort domänkonton lokalt på den virtuella datorn.</span><span class="sxs-lookup"><span data-stu-id="f41ff-732">Therefore you need to replace such domain accounts with VM local accounts and delete the on-premises domain accounts in the VM.</span></span> <span data-ttu-id="f41ff-733">Behålla lokalt domänanvändare i VM-avbildning är inte ett problem när den virtuella datorn distribueras i scenarion med flera lokaler som beskrivs i kapitlet [mellan lokala - distribution av en eller flera SAP virtuella datorer i Azure med kravet att fullständigt integrerat i det lokala nätverket] [ planning-guide-2.2] i det här dokumentet.</span><span class="sxs-lookup"><span data-stu-id="f41ff-733">Keeping on-premises domain users in the VM image is not an issue when the VM is deployed in the Cross-Premises scenario as described in chapter [cross-premises - Deployment of single or multiple SAP VMs into Azure with the requirement of being fully integrated into the on-premises network][planning-guide-2.2] in this document.</span></span>
* <span data-ttu-id="f41ff-734">Om domänkonton användes som DBMS-inloggningar eller användare kör system lokal och dessa virtuella datorer som är avsedda för att distribueras i endast molnbaserad scenarier, måste användarna tas bort.</span><span class="sxs-lookup"><span data-stu-id="f41ff-734">If domain accounts were used as DBMS logins or users when running the system on-premises and those VMs are supposed to be deployed in Cloud-Only scenarios, the domain users need to be deleted.</span></span> <span data-ttu-id="f41ff-735">Du måste se till att den lokala administratören plus en annan VM lokal användare läggs till som en inloggning till DBMS som administratörer.</span><span class="sxs-lookup"><span data-stu-id="f41ff-735">You need to make sure that the local administrator plus another VM local user is added as a login/user into the DBMS as administrators.</span></span>
* <span data-ttu-id="f41ff-736">Lägg till andra lokala konton som de kan behövas för det specifika distributionsscenariot.</span><span class="sxs-lookup"><span data-stu-id="f41ff-736">Add other local accounts as those might be needed for the specific deployment scenario.</span></span>

- - -
> ![Windows][Logo_Windows] <span data-ttu-id="f41ff-738">Windows</span><span class="sxs-lookup"><span data-stu-id="f41ff-738">Windows</span></span>
>
> <span data-ttu-id="f41ff-739">I det här scenariot krävs inga generalisering (sysprep) för den virtuella datorn för att ladda upp och distribuera den virtuella datorn på Azure.</span><span class="sxs-lookup"><span data-stu-id="f41ff-739">In this scenario no generalization (sysprep ) of the VM is required to upload and deploy the VM on Azure.</span></span>
> <span data-ttu-id="f41ff-740">Se till att enheten inte är D:\ användas Set disk automount för anslutna diskar som beskrivs i kapitlet [inställningen automount för anslutna diskar] [ planning-guide-5.5.3] i det här dokumentet.</span><span class="sxs-lookup"><span data-stu-id="f41ff-740">Make sure that drive D:\ is not used Set disk automount for attached disks as described in chapter [Setting automount for attached disks][planning-guide-5.5.3] in this document.</span></span>
>
> ![Linux][Logo_Linux] <span data-ttu-id="f41ff-742">Linux</span><span class="sxs-lookup"><span data-stu-id="f41ff-742">Linux</span></span>
>
> <span data-ttu-id="f41ff-743">I det här scenariot inga generalisering (waagent-deprovision) för den virtuella datorn krävs för att ladda upp och distribuera den virtuella datorn på Azure.</span><span class="sxs-lookup"><span data-stu-id="f41ff-743">In this scenario no generalization ( waagent -deprovision ) of the VM is required to upload and deploy the VM on Azure.</span></span>
> <span data-ttu-id="f41ff-744">Kontrollera att/mnt/resurs inte används och att alla diskar är monterade via uuid.</span><span class="sxs-lookup"><span data-stu-id="f41ff-744">Make sure that /mnt/resource is not used and that ALL disks are mounted via uuid.</span></span> <span data-ttu-id="f41ff-745">Se till att posten startprogrammet också avspeglar uuid-baserade montering för OS-disk.</span><span class="sxs-lookup"><span data-stu-id="f41ff-745">For the OS disk make sure that the bootloader entry also reflects the uuid-based mount.</span></span>
>
>

- - -
#### <span data-ttu-id="f41ff-746"><a name="57f32b1c-0cba-4e57-ab6e-c39fe22b6ec3"></a>Förberedelser för att distribuera en virtuell dator med en viss kund-bild för SAP</span><span class="sxs-lookup"><span data-stu-id="f41ff-746"><a name="57f32b1c-0cba-4e57-ab6e-c39fe22b6ec3"></a>Preparation for deploying a VM with a customer specific image for SAP</span></span>
<span data-ttu-id="f41ff-747">VHD-filer som innehåller en generaliserad OS lagras också i behållare på Azure Storage-konton.</span><span class="sxs-lookup"><span data-stu-id="f41ff-747">VHD files that contain a generalized OS are also stored in containers on Azure Storage Accounts.</span></span> <span data-ttu-id="f41ff-748">Du kan distribuera en ny virtuell dator från dessa avbildningar VHD genom att referera till den virtuella Hårddisken som en källa VHD i din distribution mallfilerna som beskrivs i kapitlet [Scenario 2: distribuera en virtuell dator med en anpassad avbildning för SAP] [ deployment-guide-3.3] av [ Distributionsguide för][deployment-guide].</span><span class="sxs-lookup"><span data-stu-id="f41ff-748">You can deploy a new VM from such an image VHD by referencing the VHD as a source VHD in your deployment template files as described in chapter [Scenario 2: Deploying a VM with a custom image for SAP][deployment-guide-3.3] of the [Deployment Guide][deployment-guide].</span></span>

<span data-ttu-id="f41ff-749">Kraven när du förbereder din egen Azure VM-avbildning är:</span><span class="sxs-lookup"><span data-stu-id="f41ff-749">Requirements when preparing your own Azure VM Image are:</span></span>

* <span data-ttu-id="f41ff-750">Den virtuella Hårddisken som innehåller operativsystemet gick ursprungligen har endast en maximal storlek på 127GB.</span><span class="sxs-lookup"><span data-stu-id="f41ff-750">Originally the VHD containing the operating system could have a maximum size of 127GB only.</span></span> <span data-ttu-id="f41ff-751">Den här begränsningen har eliminerats i slutet av mars 2015.</span><span class="sxs-lookup"><span data-stu-id="f41ff-751">This limitation got eliminated at the end of March 2015.</span></span> <span data-ttu-id="f41ff-752">Den virtuella Hårddisken som innehåller operativsystemet kan nu vara upp till 1TB i storlek som VHD finns också i Azure Storage.</span><span class="sxs-lookup"><span data-stu-id="f41ff-752">Now the VHD containing the operating system can be up to 1TB in size as any other Azure Storage hosted VHD as well.</span></span>

<span data-ttu-id="f41ff-753">[comment]: <> (MShermannd TODO måste du kontrollera om CLI också konverteras till statisk)</span><span class="sxs-lookup"><span data-stu-id="f41ff-753">[comment]: <> (MShermannd  TODO have to check if CLI also converts to static )</span></span>
* <span data-ttu-id="f41ff-754">Den måste vara i formatet fast virtuell Hårddisk.</span><span class="sxs-lookup"><span data-stu-id="f41ff-754">It needs to be in the fixed VHD format.</span></span> <span data-ttu-id="f41ff-755">Dynamiska virtuella hårddiskar eller virtuella hårddiskar i VHDx-format stöds inte ännu i Azure.</span><span class="sxs-lookup"><span data-stu-id="f41ff-755">Dynamic VHDs or VHDs in VHDx format are not yet supported on Azure.</span></span> <span data-ttu-id="f41ff-756">Dynamiska virtuella hårddiskar ska konverteras till statisk virtuella hårddiskar när du överför den virtuella Hårddisken med PowerShell-kommandon eller CLI</span><span class="sxs-lookup"><span data-stu-id="f41ff-756">Dynamic VHDs will be converted to static VHDs when you upload the VHD with PowerShell commandlets or CLI</span></span>
* <span data-ttu-id="f41ff-757">Virtuella hårddiskar som är monterade på den virtuella datorn och ska monteras igen i Azure VM måste vara i ett fast VHD-format samt.</span><span class="sxs-lookup"><span data-stu-id="f41ff-757">VHDs which are mounted to the VM and should be mounted again in Azure to the VM need to be in a fixed VHD format as well.</span></span> <span data-ttu-id="f41ff-758">Samma storleksgränsen på OS-disken gäller för datadiskar.</span><span class="sxs-lookup"><span data-stu-id="f41ff-758">The same size limit of the OS disk applies to data disks as well.</span></span> <span data-ttu-id="f41ff-759">Virtuella hårddiskar kan ha en maximal storlek på 1TB.</span><span class="sxs-lookup"><span data-stu-id="f41ff-759">VHDs can have a maximum size of 1TB.</span></span> <span data-ttu-id="f41ff-760">Dynamiska virtuella hårddiskar ska konverteras till statisk virtuella hårddiskar när du överför den virtuella Hårddisken med PowerShell-kommandon eller CLI</span><span class="sxs-lookup"><span data-stu-id="f41ff-760">Dynamic VHDs will be converted to static VHDs when you upload the VHD with PowerShell commandlets or CLI</span></span>
* <span data-ttu-id="f41ff-761">Eftersom alla domänanvändare registrerad som användare i den virtuella datorn inte finns i ett scenario med endast molnbaserad (finns i kapitlet [endast molnbaserad - distributioner på virtuella datorer till Azure utan beroenden i lokala kunden nätverket] [ planning-guide-2.1] i det här dokumentet), tjänster som använder dessa konton inte kanske fungerar när avbildningen har distribuerats i Azure-domän.</span><span class="sxs-lookup"><span data-stu-id="f41ff-761">Since all the Domain users registered as users in the VM will not exist in a Cloud-Only scenario (see chapter [Cloud-Only - Virtual Machine deployments into Azure without dependencies on the on-premises customer network][planning-guide-2.1] of this document), services using such domain accounts might not work once the Image is deployed in Azure.</span></span> <span data-ttu-id="f41ff-762">Detta gäller särskilt för konton som används för att köra tjänster som DBMS eller SAP-program.</span><span class="sxs-lookup"><span data-stu-id="f41ff-762">This is especially true for accounts which are used to run services like DBMS or SAP applications.</span></span> <span data-ttu-id="f41ff-763">Därför måste du ersätta dessa domänkonton med VM lokala konton och ta bort domänkonton lokalt på den virtuella datorn.</span><span class="sxs-lookup"><span data-stu-id="f41ff-763">Therefore you need to replace such domain accounts with VM local accounts and delete the on-premises domain accounts in the VM.</span></span> <span data-ttu-id="f41ff-764">Behålla lokalt domänanvändare i VM-avbildning kanske inte är ett problem när den virtuella datorn distribueras i scenarion med flera lokaler som beskrivs i kapitlet [mellan lokala - distribution av en eller flera SAP virtuella datorer i Azure med kravet att fullständigt integrerat i det lokala nätverket] [ planning-guide-2.2] i det här dokumentet.</span><span class="sxs-lookup"><span data-stu-id="f41ff-764">Keeping on-premises domain users in the VM image might not be an issue when the VM is deployed in the cross-premises scenario as described in chapter [cross-premises - Deployment of single or multiple SAP VMs into Azure with the requirement of being fully integrated into the on-premises network][planning-guide-2.2] in this document.</span></span>
* <span data-ttu-id="f41ff-765">Lägg till en annan lokalt konto med administratörsbehörighet som kan användas av Microsoft-supporten i problemet undersökningar eller som kan tilldelas som kontext för tjänster och program att köras tills den virtuella datorn har distribuerats och mer lämpliga användare kan användas.</span><span class="sxs-lookup"><span data-stu-id="f41ff-765">Add another local account with administrator privileges which can be used by Microsoft support in problem investigations or which can be assigned as context for services and applications to run in until the VM is deployed and more appropriate users can be used.</span></span>
* <span data-ttu-id="f41ff-766">I distributioner för endast molnbaserad och där domänkonton användes som DBMS-inloggningar eller användare när du kör system lokal, bör användarna tas bort.</span><span class="sxs-lookup"><span data-stu-id="f41ff-766">In Cloud-Only deployments and where domain accounts were used as DBMS logins or users when running the system on-premises, the domain users should be deleted.</span></span> <span data-ttu-id="f41ff-767">Du måste se till att den lokala administratören plus en annan VM lokal användare läggs till som en inloggning/användare av DBMS som administratörer.</span><span class="sxs-lookup"><span data-stu-id="f41ff-767">You need to make sure that the local administrator plus another VM local user is added as a login/user of the DBMS as administrators.</span></span>
* <span data-ttu-id="f41ff-768">Lägg till andra lokala konton som de kan behövas för det specifika distributionsscenariot.</span><span class="sxs-lookup"><span data-stu-id="f41ff-768">Add other local accounts as those might be needed for the specific deployment scenario.</span></span>
* <span data-ttu-id="f41ff-769">Om bilden innehåller en installation av SAP NetWeaver och namnbyte av du värdnamnet från det ursprungliga namnet på Azure-distribution är antagligen det rekommenderas att kopiera de senaste versionerna av SAP programvara etablering Manager DVD i mallen.</span><span class="sxs-lookup"><span data-stu-id="f41ff-769">If the image contains an installation of SAP NetWeaver and renaming of the host name from the original name at the point of the Azure deployment is likely, it is recommended to copy the latest versions of the SAP Software Provisioning Manager DVD into the template.</span></span> <span data-ttu-id="f41ff-770">Detta gör att du enkelt använda SAP tillhandahålls Byt namn på funktionen för att anpassa ändrade värdnamnet och/eller ändra SID för SAP-system inom distribuerade VM-avbildning som en ny kopia har startats.</span><span class="sxs-lookup"><span data-stu-id="f41ff-770">This will enable you to easily use the SAP provided rename functionality to adapt the changed hostname and/or change the SID of the SAP system within the deployed VM image as soon as a new copy is started.</span></span>

- - -
> ![Windows][Logo_Windows] <span data-ttu-id="f41ff-772">Windows</span><span class="sxs-lookup"><span data-stu-id="f41ff-772">Windows</span></span>
>
> <span data-ttu-id="f41ff-773">Se till att enheten inte är D:\ användas Set disk automount för anslutna diskar som beskrivs i kapitlet [inställningen automount för anslutna diskar] [ planning-guide-5.5.3] i det här dokumentet.</span><span class="sxs-lookup"><span data-stu-id="f41ff-773">Make sure that drive D:\ is not used Set disk automount for attached disks as described in chapter [Setting automount for attached disks][planning-guide-5.5.3] in this document.</span></span>
>
> ![Linux][Logo_Linux] <span data-ttu-id="f41ff-775">Linux</span><span class="sxs-lookup"><span data-stu-id="f41ff-775">Linux</span></span>
>
> <span data-ttu-id="f41ff-776">Kontrollera att/mnt/resurs inte används och att alla diskar är monterade via uuid.</span><span class="sxs-lookup"><span data-stu-id="f41ff-776">Make sure that /mnt/resource is not used and that ALL disks are mounted via uuid.</span></span> <span data-ttu-id="f41ff-777">För att kontrollera att den OS-disk visar startprogrammet posten också montera uuid-baserade.</span><span class="sxs-lookup"><span data-stu-id="f41ff-777">For the OS disk make sure the bootloader entry also reflects the uuid-based mount.</span></span>
>
>

- - -
* <span data-ttu-id="f41ff-778">SAP GUI (för administrativa och konfigurera ändamål) kan förinstalleras i denna mall.</span><span class="sxs-lookup"><span data-stu-id="f41ff-778">SAP GUI (for administrative and setup purposes) can be pre-installed in such a template.</span></span>
* <span data-ttu-id="f41ff-779">Annan programvara som krävs för att köra de virtuella datorerna i mellan lokala scenarier kan installeras så länge som det här programmet kan arbeta med det nya namnet på den virtuella datorn.</span><span class="sxs-lookup"><span data-stu-id="f41ff-779">Other software necessary to run the VMs successfully in Cross-Premises scenarios can be installed as long as this software can work with the rename of the VM.</span></span>

<span data-ttu-id="f41ff-780">Om den virtuella datorn är tillräckligt beredd att vara generisk och kan slutligen oberoende av konton/användare inte tillgänglig i det aktuella Azure distributionsscenariot, utförs senaste förberedelsen för att generalisera sådana en bild.</span><span class="sxs-lookup"><span data-stu-id="f41ff-780">If the VM is prepared sufficiently to be generic and eventually independent of accounts/users not available in the targeted Azure deployment scenario, the last preparation step of generalizing such an image is conducted.</span></span>

##### <a name="generalizing-a-vm"></a><span data-ttu-id="f41ff-781">Att generalisera en virtuell dator</span><span class="sxs-lookup"><span data-stu-id="f41ff-781">Generalizing a VM</span></span>
- - -
<span data-ttu-id="f41ff-782">[comment]: <> (MShermannd TODO måste hitta bättre artiklar / doku om generalisera VMs för ARM)</span><span class="sxs-lookup"><span data-stu-id="f41ff-782">[comment]: <> (MShermannd  TODO have to find better articles / docu about generalizing the VMs for ARM )</span></span>
> ![Windows][Logo_Windows] <span data-ttu-id="f41ff-784">Windows</span><span class="sxs-lookup"><span data-stu-id="f41ff-784">Windows</span></span>
>
> <span data-ttu-id="f41ff-785">Det sista steget är att logga in på en virtuell dator med ett administratörskonto.</span><span class="sxs-lookup"><span data-stu-id="f41ff-785">The last step is to log in to a VM with an Administrator account.</span></span> <span data-ttu-id="f41ff-786">Öppna en Windows-kommandofönster som ”administratör”.</span><span class="sxs-lookup"><span data-stu-id="f41ff-786">Open a Windows command window as ‘administrator’.</span></span> <span data-ttu-id="f41ff-787">Gå till ...\windows\system32\sysprep och köra sysprep.exe.</span><span class="sxs-lookup"><span data-stu-id="f41ff-787">Go to …\windows\system32\sysprep and execute sysprep.exe.</span></span>
> <span data-ttu-id="f41ff-788">Ett litet fönster visas.</span><span class="sxs-lookup"><span data-stu-id="f41ff-788">A small window will appear.</span></span> <span data-ttu-id="f41ff-789">Det är viktigt att kontrollera alternativet 'Generalize ”(standardvärdet är inte markerad) och ändra avstängning från standard 'Omstart' till 'Avstängning'.</span><span class="sxs-lookup"><span data-stu-id="f41ff-789">It is important to check the ‘Generalize’ option (the default is un-checked) and change the Shutdown Option from its default of ‘Reboot’ to ‘Shutdown’.</span></span> <span data-ttu-id="f41ff-790">Den här proceduren förutsätter att sysprep-processen körs lokalt i Gästoperativsystem på en virtuell dator.</span><span class="sxs-lookup"><span data-stu-id="f41ff-790">This procedure assumes that the sysprep process is executed on-premises in the Guest OS of a VM.</span></span>
> <span data-ttu-id="f41ff-791">Om du vill utföra proceduren med en virtuell dator som redan körs i Azure, följer du stegen som beskrivs i [i den här artikeln][virtual-machines-windows-capture-image].</span><span class="sxs-lookup"><span data-stu-id="f41ff-791">If you want to perform the procedure with a VM already running in Azure, follow the steps described in [this article][virtual-machines-windows-capture-image].</span></span>
>
> ![Linux][Logo_Linux] <span data-ttu-id="f41ff-793">Linux</span><span class="sxs-lookup"><span data-stu-id="f41ff-793">Linux</span></span>
>
> <span data-ttu-id="f41ff-794">[Så här skapar du en virtuell Linux-dator kan användas som en Resource Manager-mall][virtual-machines-linux-capture-image]</span><span class="sxs-lookup"><span data-stu-id="f41ff-794">[How to capture a Linux virtual machine to use as a Resource Manager template][virtual-machines-linux-capture-image]</span></span>
>
>

- - -
### <a name="transferring-vms-and-vhds-between-on-premises-to-azure"></a><span data-ttu-id="f41ff-795">Överföring av virtuella datorer och virtuella hårddiskar mellan lokala till Azure</span><span class="sxs-lookup"><span data-stu-id="f41ff-795">Transferring VMs and VHDs between on-premises to Azure</span></span>
<span data-ttu-id="f41ff-796">Eftersom det inte går att överföra VM-avbildningar och diskar till Azure via Azure Portal, behöver du använda Azure PowerShell-cmdlets eller CLI.</span><span class="sxs-lookup"><span data-stu-id="f41ff-796">Since uploading VM images and disks to Azure is not possible via the Azure Portal, you need to use Azure PowerShell cmdlets or CLI.</span></span> <span data-ttu-id="f41ff-797">En annan möjlighet är att använda verktyget 'AzCopy'.</span><span class="sxs-lookup"><span data-stu-id="f41ff-797">Another possibility is the use of the tool ‘AzCopy’.</span></span> <span data-ttu-id="f41ff-798">Verktyget kan kopiera virtuella hårddiskar mellan lokala och Azure (i båda riktningarna).</span><span class="sxs-lookup"><span data-stu-id="f41ff-798">The tool can copy VHDs between on-premises and Azure (in both directions).</span></span> <span data-ttu-id="f41ff-799">Det kan också kopiera virtuella hårddiskar mellan Azure-regioner.</span><span class="sxs-lookup"><span data-stu-id="f41ff-799">It also can copy VHDs between Azure Regions.</span></span> <span data-ttu-id="f41ff-800">Kontakta [denna dokumentation] [ storage-use-azcopy] om hämtning och användning av AzCopy.</span><span class="sxs-lookup"><span data-stu-id="f41ff-800">Please consult [this documentation][storage-use-azcopy] for download and usage of AzCopy.</span></span>

<span data-ttu-id="f41ff-801">Ett tredje alternativ är att använda olika inriktade GUI-verktyg från tredje part.</span><span class="sxs-lookup"><span data-stu-id="f41ff-801">A third alternative would be to use various third party GUI oriented tools.</span></span> <span data-ttu-id="f41ff-802">Dock se till att verktygen stöder Azure Sidblobar.</span><span class="sxs-lookup"><span data-stu-id="f41ff-802">However, please make sure that these tools are supporting Azure Page Blobs.</span></span> <span data-ttu-id="f41ff-803">Vi behöver använda Azure sidan Blob store för våra ändamål (skillnaderna beskrivs här: <https://msdn.microsoft.com/library/windowsazure/ee691964.aspx>).</span><span class="sxs-lookup"><span data-stu-id="f41ff-803">For our purposes we need to use Azure Page Blob store (the differences are described here: <https://msdn.microsoft.com/library/windowsazure/ee691964.aspx>).</span></span> <span data-ttu-id="f41ff-804">Azure-verktygen är också mycket effektivt för komprimering av virtuella datorer och virtuella hårddiskar som behöver överföras.</span><span class="sxs-lookup"><span data-stu-id="f41ff-804">Also the tools provided by Azure are very efficient in compressing the VMs and VHDs which need to be uploaded.</span></span> <span data-ttu-id="f41ff-805">Detta är viktigt eftersom den här effektiviteten i komprimering minskar den tid (som varierar ändå beroende på länken överföringen till internet från den lokala anläggningen och distribution av Azure-region som mål).</span><span class="sxs-lookup"><span data-stu-id="f41ff-805">This is important because this efficiency in compression reduces the upload time (which varies anyway depending on the upload link to the internet from the on-premises facility and the Azure deployment region targeted).</span></span> <span data-ttu-id="f41ff-806">Det är en verkligt antagandet att överföra en virtuell dator eller en VHD från Europeiska plats till USA baserat Azure data Datacenter tar längre tid än överföring av samma virtuella datorer/virtuella hårddiskar till Europeiska Azure-datacenter.</span><span class="sxs-lookup"><span data-stu-id="f41ff-806">It is a fair assumption that uploading a VM or VHD from European location to the U.S. based Azure data centers will take longer than uploading the same VMs/VHDs to the European Azure data centers.</span></span>

#### <span data-ttu-id="f41ff-807"><a name="a43e40e6-1acc-4633-9816-8f095d5a7b6a"></a>Ladda upp en lokal VHD till Azure</span><span class="sxs-lookup"><span data-stu-id="f41ff-807"><a name="a43e40e6-1acc-4633-9816-8f095d5a7b6a"></a>Uploading a VHD from on-premises to Azure</span></span>
<span data-ttu-id="f41ff-808">För att överföra en befintlig virtuell dator eller en VHD från det lokala nätverket sådan VM eller VHD måste uppfylla kraven som anges i kapitel [förberedelse för att flytta en virtuell dator från lokal till Azure med en icke-generaliserad disk] [ planning-guide-5.2.1] i det här dokumentet.</span><span class="sxs-lookup"><span data-stu-id="f41ff-808">To upload an existing VM or VHD from the on-premises network such a VM or VHD needs to meet the requirements as listed in chapter [Preparation for moving a VM from on-premises to Azure with a non-generalized disk][planning-guide-5.2.1] of this document.</span></span>

<span data-ttu-id="f41ff-809">Sådana en virtuell dator behöver inte vara generaliserad och kan överföras i tillstånd och formen som den har efter avstängning på den lokala sidan.</span><span class="sxs-lookup"><span data-stu-id="f41ff-809">Such a VM does NOT need to be generalized and can be uploaded in the state and shape it has after shutdown on the on-premises side.</span></span> <span data-ttu-id="f41ff-810">Detsamma gäller för ytterligare virtuella hårddiskar som inte innehåller något operativsystem.</span><span class="sxs-lookup"><span data-stu-id="f41ff-810">The same is true for additional VHDs which don’t contain any operating system.</span></span>

##### <a name="uploading-a-vhd-and-making-it-an-azure-disk"></a><span data-ttu-id="f41ff-811">Överför en virtuell Hårddisk och gör det Azure-disken</span><span class="sxs-lookup"><span data-stu-id="f41ff-811">Uploading a VHD and making it an Azure Disk</span></span>
<span data-ttu-id="f41ff-812">I det här fallet vill vi överföra en virtuell Hårddisk, med eller utan ett operativsystem, och montera den till en virtuell dator som en datadisk eller använda den som OS-disken.</span><span class="sxs-lookup"><span data-stu-id="f41ff-812">In this case we want to upload a VHD, either with or without an OS in it, and mount it to a VM as a data disk or use it as OS disk.</span></span> <span data-ttu-id="f41ff-813">Detta är en process med flera steg</span><span class="sxs-lookup"><span data-stu-id="f41ff-813">This is a multi-step process</span></span>

<span data-ttu-id="f41ff-814">**PowerShell**</span><span class="sxs-lookup"><span data-stu-id="f41ff-814">**Powershell**</span></span>

* <span data-ttu-id="f41ff-815">Logga in till din prenumeration med *Login-AzureRmAccount*</span><span class="sxs-lookup"><span data-stu-id="f41ff-815">Login to your subscription with *Login-AzureRmAccount*</span></span>
* <span data-ttu-id="f41ff-816">Ställ in prenumerationen för din kontext med *Set-AzureRmContext* och parametern prenumerations-ID eller SubscriptionName - Se <https://msdn.microsoft.com/library/mt619263.aspx></span><span class="sxs-lookup"><span data-stu-id="f41ff-816">Set the subscription of your context with *Set-AzureRmContext* and parameter SubscriptionId or SubscriptionName - see <https://msdn.microsoft.com/library/mt619263.aspx></span></span>
* <span data-ttu-id="f41ff-817">Överför den virtuella Hårddisken med *Lägg till AzureRmVhd* till ett Azure Storage-konto - finns <https://msdn.microsoft.com/library/mt603554.aspx></span><span class="sxs-lookup"><span data-stu-id="f41ff-817">Upload the VHD with *Add-AzureRmVhd* to an Azure Storage Account - see <https://msdn.microsoft.com/library/mt603554.aspx></span></span>
* <span data-ttu-id="f41ff-818">Ange OS-disk på en ny VM-konfigurationen på den virtuella Hårddisken med *Set AzureRmVMOSDisk* -finns <https://msdn.microsoft.com/library/mt603746.aspx></span><span class="sxs-lookup"><span data-stu-id="f41ff-818">Set the OS disk of a new VM config to the VHD with *Set-AzureRmVMOSDisk* - see <https://msdn.microsoft.com/library/mt603746.aspx></span></span>
* <span data-ttu-id="f41ff-819">Skapa en ny virtuell dator från VM-konfiguration med *ny AzureRmVM* -finns <https://msdn.microsoft.com/library/mt603754.aspx></span><span class="sxs-lookup"><span data-stu-id="f41ff-819">Create a new VM from the VM config with *New-AzureRmVM* - see <https://msdn.microsoft.com/library/mt603754.aspx></span></span>
* <span data-ttu-id="f41ff-820">Lägg till en datadisk till en ny virtuell dator med *Lägg till AzureRmVMDataDisk* -finns <https://msdn.microsoft.com/library/mt603673.aspx></span><span class="sxs-lookup"><span data-stu-id="f41ff-820">Add a data disk to a new VM with *Add-AzureRmVMDataDisk* - see <https://msdn.microsoft.com/library/mt603673.aspx></span></span>

<span data-ttu-id="f41ff-821">**Azure CLI**</span><span class="sxs-lookup"><span data-stu-id="f41ff-821">**Azure CLI**</span></span>

* <span data-ttu-id="f41ff-822">Växla till läget Azure Resource Manager med *azure config mode arm*</span><span class="sxs-lookup"><span data-stu-id="f41ff-822">Switch to Azure Resource Manager mode with *azure config mode arm*</span></span>
* <span data-ttu-id="f41ff-823">Logga in till din prenumeration med *azure-inloggning*</span><span class="sxs-lookup"><span data-stu-id="f41ff-823">Login to your subscription with *azure login*</span></span>
* <span data-ttu-id="f41ff-824">Välj din prenumeration med *azure-konto`<subscription name or id`>*</span><span class="sxs-lookup"><span data-stu-id="f41ff-824">Select your subscription with *azure account set `<subscription name or id`>*</span></span>
* <span data-ttu-id="f41ff-825">Överför den virtuella Hårddisken med *azure storage blob överför* -finns [med hjälp av Azure CLI med Azure Storage][storage-azure-cli]</span><span class="sxs-lookup"><span data-stu-id="f41ff-825">Upload the VHD with *azure storage blob upload* - see [Using the Azure CLI with Azure Storage][storage-azure-cli]</span></span>
* <span data-ttu-id="f41ff-826">Skapa en ny virtuell dator att ange den överförda virtuella Hårddisken som OS-disken med *azure vm skapa* och parametern -d</span><span class="sxs-lookup"><span data-stu-id="f41ff-826">Create a new VM specifying the uploaded VHD as OS disk with *azure vm create* and parameter -d</span></span>
* <span data-ttu-id="f41ff-827">Lägg till en datadisk till en ny virtuell dator med *vm disk bifoga nya*</span><span class="sxs-lookup"><span data-stu-id="f41ff-827">Add a data disk to a new VM with *vm disk attach-new*</span></span>

<span data-ttu-id="f41ff-828">**Mall**</span><span class="sxs-lookup"><span data-stu-id="f41ff-828">**Template**</span></span>

* <span data-ttu-id="f41ff-829">Överför den virtuella Hårddisken med Powershell eller Azure CLI</span><span class="sxs-lookup"><span data-stu-id="f41ff-829">Upload the VHD with Powershell or Azure CLI</span></span>
* <span data-ttu-id="f41ff-830">Distribuera den virtuella datorn med en JSON-mall som refererar till den virtuella Hårddisken som visas i [exempel JSON mallen](https://raw.githubusercontent.com/Azure/azure-quickstart-templates/master/201-vm-from-specialized-vhd/azuredeploy.json).</span><span class="sxs-lookup"><span data-stu-id="f41ff-830">Deploy the VM with a JSON template referencing the VHD as shown in [this example JSON template](https://raw.githubusercontent.com/Azure/azure-quickstart-templates/master/201-vm-from-specialized-vhd/azuredeploy.json).</span></span>

#### <a name="deployment-of-a-vm-image"></a><span data-ttu-id="f41ff-831">Distribution av en VM-avbildning</span><span class="sxs-lookup"><span data-stu-id="f41ff-831">Deployment of a VM Image</span></span>
<span data-ttu-id="f41ff-832">För att överföra en befintlig virtuell dator eller en VHD från det lokala nätverket för att kunna använda den som en virtuell dator i Azure-avbildning sådan VM eller VHD måste uppfylla de krav som anges i kapitlet [förberedelse för att distribuera en virtuell dator med en viss kund-bild för SAP] [ planning-guide-5.2.2] i det här dokumentet.</span><span class="sxs-lookup"><span data-stu-id="f41ff-832">To upload an existing VM or VHD from the on-premises network in order to use it as an Azure VM image such a VM or VHD need to meet the requirements listed in chapter [Preparation for deploying a VM with a customer specific image for SAP][planning-guide-5.2.2] of this document.</span></span>

* <span data-ttu-id="f41ff-833">Använd *sysprep* i Windows eller *waagent-deprovision* på Linux för att generalisera den virtuella datorn – Se [så här skapar du en Windows-dator i Resource Manager-distributionsmodellen] [ virtual-machines-windows-capture-image-prepare-the-vm-for-image-capture] eller [så här skapar du en virtuell Linux-dator kan användas som en Resource Manager-mall][virtual-machines-linux-capture-image-capture]</span><span class="sxs-lookup"><span data-stu-id="f41ff-833">Use *sysprep* on Windows or *waagent -deprovision* on Linux to generalize your VM - see [How to capture a Windows virtual machine in the Resource Manager deployment model][virtual-machines-windows-capture-image-prepare-the-vm-for-image-capture] or [How to capture a Linux virtual machine to use as a Resource Manager template][virtual-machines-linux-capture-image-capture]</span></span>
* <span data-ttu-id="f41ff-834">Logga in till din prenumeration med *Login-AzureRmAccount*</span><span class="sxs-lookup"><span data-stu-id="f41ff-834">Login to your subscription with *Login-AzureRmAccount*</span></span>
* <span data-ttu-id="f41ff-835">Ställ in prenumerationen för din kontext med *Set-AzureRmContext* och parametern prenumerations-ID eller SubscriptionName - Se <https://msdn.microsoft.com/library/mt619263.aspx></span><span class="sxs-lookup"><span data-stu-id="f41ff-835">Set the subscription of your context with *Set-AzureRmContext* and parameter SubscriptionId or SubscriptionName - see <https://msdn.microsoft.com/library/mt619263.aspx></span></span>
* <span data-ttu-id="f41ff-836">Överför den virtuella Hårddisken med *Lägg till AzureRmVhd* till ett Azure Storage-konto - finns <https://msdn.microsoft.com/library/mt603554.aspx></span><span class="sxs-lookup"><span data-stu-id="f41ff-836">Upload the VHD with *Add-AzureRmVhd* to an Azure Storage Account - see <https://msdn.microsoft.com/library/mt603554.aspx></span></span>
* <span data-ttu-id="f41ff-837">Ange OS-disk på en ny VM-konfigurationen på den virtuella Hårddisken med *Set-AzureRmVMOSDisk - SourceImageUri - CreateOption fromImage* -finns <https://msdn.microsoft.com/library/mt603746.aspx></span><span class="sxs-lookup"><span data-stu-id="f41ff-837">Set the OS disk of a new VM config to the VHD with *Set-AzureRmVMOSDisk -SourceImageUri -CreateOption fromImage* - see <https://msdn.microsoft.com/library/mt603746.aspx></span></span>
* <span data-ttu-id="f41ff-838">Skapa en ny virtuell dator från VM-konfiguration med *ny AzureRmVM* -finns <https://msdn.microsoft.com/library/mt603754.aspx></span><span class="sxs-lookup"><span data-stu-id="f41ff-838">Create a new VM from the VM config with *New-AzureRmVM* - see <https://msdn.microsoft.com/library/mt603754.aspx></span></span>

<span data-ttu-id="f41ff-839">**Azure CLI**</span><span class="sxs-lookup"><span data-stu-id="f41ff-839">**Azure CLI**</span></span>

* <span data-ttu-id="f41ff-840">Använd *sysprep* i Windows eller *waagent-deprovision* på Linux för att generalisera den virtuella datorn – Se [så här skapar du en Windows-dator i Resource Manager-distributionsmodellen] [ virtual-machines-windows-capture-image-prepare-the-vm-for-image-capture] eller [så här skapar du en virtuell Linux-dator kan användas som en Resource Manager-mall] [ virtual-machines-linux-capture-image-capture] för Linux</span><span class="sxs-lookup"><span data-stu-id="f41ff-840">Use *sysprep* on Windows or *waagent -deprovision* on Linux to generalize your VM - see [How to capture a Windows virtual machine in the Resource Manager deployment model][virtual-machines-windows-capture-image-prepare-the-vm-for-image-capture] or [How to capture a Linux virtual machine to use as a Resource Manager template][virtual-machines-linux-capture-image-capture] for Linux</span></span>
* <span data-ttu-id="f41ff-841">Växla till läget Azure Resource Manager med *azure config mode arm*</span><span class="sxs-lookup"><span data-stu-id="f41ff-841">Switch to Azure Resource Manager mode with *azure config mode arm*</span></span>
* <span data-ttu-id="f41ff-842">Logga in till din prenumeration med *azure-inloggning*</span><span class="sxs-lookup"><span data-stu-id="f41ff-842">Login to your subscription with *azure login*</span></span>
* <span data-ttu-id="f41ff-843">Välj din prenumeration med *azure-konto`<subscription name or id`>*</span><span class="sxs-lookup"><span data-stu-id="f41ff-843">Select your subscription with *azure account set `<subscription name or id`>*</span></span>
* <span data-ttu-id="f41ff-844">Överför den virtuella Hårddisken med *azure storage blob överför* -finns [med hjälp av Azure CLI med Azure Storage][storage-azure-cli]</span><span class="sxs-lookup"><span data-stu-id="f41ff-844">Upload the VHD with *azure storage blob upload* - see [Using the Azure CLI with Azure Storage][storage-azure-cli]</span></span>
* <span data-ttu-id="f41ff-845">Skapa en ny virtuell dator att ange den överförda virtuella Hårddisken som OS-disken med *azure vm skapa* och parametern -Q</span><span class="sxs-lookup"><span data-stu-id="f41ff-845">Create a new VM specifying the uploaded VHD as OS disk with *azure vm create* and parameter -Q</span></span>

<span data-ttu-id="f41ff-846">**Mall**</span><span class="sxs-lookup"><span data-stu-id="f41ff-846">**Template**</span></span>

* <span data-ttu-id="f41ff-847">Använd *sysprep* i Windows eller *waagent-deprovision* på Linux för att generalisera den virtuella datorn – Se [så här skapar du en Windows-dator i Resource Manager-distributionsmodellen] [ virtual-machines-windows-capture-image-prepare-the-vm-for-image-capture] eller [så här skapar du en virtuell Linux-dator kan användas som en Resource Manager-mall] [ virtual-machines-linux-capture-image-capture] för Linux</span><span class="sxs-lookup"><span data-stu-id="f41ff-847">Use *sysprep* on Windows or *waagent -deprovision* on Linux to generalize your VM - see [How to capture a Windows virtual machine in the Resource Manager deployment model][virtual-machines-windows-capture-image-prepare-the-vm-for-image-capture] or [How to capture a Linux virtual machine to use as a Resource Manager template][virtual-machines-linux-capture-image-capture] for Linux</span></span>
* <span data-ttu-id="f41ff-848">Överför den virtuella Hårddisken med Powershell eller Azure CLI</span><span class="sxs-lookup"><span data-stu-id="f41ff-848">Upload the VHD with Powershell or Azure CLI</span></span>
* <span data-ttu-id="f41ff-849">Distribuera den virtuella datorn med en JSON-mall som refererar till avbildningen VHD enligt [exempel JSON mallen](https://raw.githubusercontent.com/Azure/azure-quickstart-templates/master/101-vm-from-user-image/azuredeploy.json).</span><span class="sxs-lookup"><span data-stu-id="f41ff-849">Deploy the VM with a JSON template referencing the image VHD as shown in [this example JSON template](https://raw.githubusercontent.com/Azure/azure-quickstart-templates/master/101-vm-from-user-image/azuredeploy.json).</span></span>

#### <a name="downloading-vhds-to-on-premises"></a><span data-ttu-id="f41ff-850">Hämta virtuella hårddiskar till lokalt</span><span class="sxs-lookup"><span data-stu-id="f41ff-850">Downloading VHDs to on-premises</span></span>
<span data-ttu-id="f41ff-851">Azure-infrastrukturen som en tjänst är inte en enkelriktad gata bara att kunna överföra virtuella hårddiskar och SAP system.</span><span class="sxs-lookup"><span data-stu-id="f41ff-851">Azure Infrastructure as a Service is not a one-way street of only being able to upload VHDs and SAP systems.</span></span> <span data-ttu-id="f41ff-852">Du kan flytta SAP-system från Azure tillbaka till lokala världen samt.</span><span class="sxs-lookup"><span data-stu-id="f41ff-852">You can move SAP systems from Azure back into the on-premises world as well.</span></span>

<span data-ttu-id="f41ff-853">De virtuella hårddiskarna får inte vara aktiv under tid då nedladdningen.</span><span class="sxs-lookup"><span data-stu-id="f41ff-853">During the time of the download the VHDs can’t be active.</span></span> <span data-ttu-id="f41ff-854">Även om hämtning av virtuella hårddiskar som är monterade till virtuella datorer, måste den virtuella datorn stängas.</span><span class="sxs-lookup"><span data-stu-id="f41ff-854">Even when downloading VHDs which are mounted to VMs, the VM needs to be shutdown.</span></span> <span data-ttu-id="f41ff-855">Om du vill hämta innehåll som ska användas för att ställa in ett nytt system lokalt och om du accepterar som under tiden för hämtningen och installationen av det nya systemet att systemet i Azure kan fortfarande vara operativa databasen , du kan undvika långa driftstopp genom att utföra en säkerhetskopiering av komprimerade databasen till en virtuell Hårddisk och hämta endast den virtuella Hårddisken i stället för hämtar grundläggande VM OS.</span><span class="sxs-lookup"><span data-stu-id="f41ff-855">If you only want to download the database content which then should be used to set up a new system on-premises and if it is acceptable that during the time of the download and the setup of the new system that the system in Azure can still be operational, you could avoid a long downtime by performing a compressed database backup into a VHD and just download that VHD instead of also downloading the OS base VM.</span></span>

#### <a name="powershell"></a><span data-ttu-id="f41ff-856">PowerShell</span><span class="sxs-lookup"><span data-stu-id="f41ff-856">Powershell</span></span>
<span data-ttu-id="f41ff-857">När SAP-systemet har stoppats och den virtuella datorn är avstängd, kan du använda PowerShell-cmdleten spara AzureRmVhd på det lokala målet för att hämta VHD-diskarna tillbaka till lokala världen.</span><span class="sxs-lookup"><span data-stu-id="f41ff-857">Once the SAP system is stopped and the VM is shutdown, you can use the PowerShell cmdlet Save-AzureRmVhd on the on-premises target to download the VHD disks back to the on-premises world.</span></span> <span data-ttu-id="f41ff-858">För att kunna göra det, måste URL: en för den virtuella Hårddisken som du hittar i behöver 'Lagring avsnittet' i Azure-portalen (behovet av att navigera till Lagringskontot och lagringsbehållaren där den virtuella Hårddisken har skapats) och du veta var den virtuella Hårddisken ska kopieras till.</span><span class="sxs-lookup"><span data-stu-id="f41ff-858">In order to do that, you need the URL of the VHD which you can find in the ‘Storage Section’ of the Azure Portal (need to navigate to the Storage Account and the storage container where the VHD was created) and you need to know where the VHD should be copied to.</span></span>

<span data-ttu-id="f41ff-859">Du kan sedan använda kommandot genom att helt enkelt definiera parametern SourceUri som en URL för den virtuella Hårddisken ska ladda ned och LocalFilePath som den fysiska platsen för den virtuella Hårddisken (inklusive filnamnet).</span><span class="sxs-lookup"><span data-stu-id="f41ff-859">Then you can leverage the command by simply defining the parameter SourceUri as the URL of the VHD to download and the LocalFilePath as the physical location of the VHD (including its name).</span></span> <span data-ttu-id="f41ff-860">Kommandot kan se ut så:</span><span class="sxs-lookup"><span data-stu-id="f41ff-860">The command could look like:</span></span>

```powerhell
Save-AzureRmVhd -ResourceGroupName <resource group name of storage account> -SourceUri http://<storage account name>.blob.core.windows.net/<container name>/sapidedata.vhd -LocalFilePath E:\Azure_downloads\sapidesdata.vhd
```

<span data-ttu-id="f41ff-861">Mer information om cmdleten spara AzureRmVhd Kontrollera här <https://msdn.microsoft.com/library/mt622705.aspx>.</span><span class="sxs-lookup"><span data-stu-id="f41ff-861">For more details of the Save-AzureRmVhd cmdlet, please check here <https://msdn.microsoft.com/library/mt622705.aspx>.</span></span>

#### <a name="cli"></a><span data-ttu-id="f41ff-862">CLI</span><span class="sxs-lookup"><span data-stu-id="f41ff-862">CLI</span></span>
<span data-ttu-id="f41ff-863">När SAP-systemet har stoppats och den virtuella datorn har stängts kan använda du Azure CLI kommandot azure storage blob nedladdningen på det lokala målet för att hämta VHD-diskar tillbaka till lokala världen.</span><span class="sxs-lookup"><span data-stu-id="f41ff-863">Once the SAP system is stopped and the VM is shutdown, you can use the Azure CLI command azure storage blob download on the on-premises target to download the VHD disks back to the on-premises world.</span></span> <span data-ttu-id="f41ff-864">För att kunna göra det, måste namnet och en behållare för den virtuella Hårddisken som du kan hitta i 'lagring avsnittet' i Azure-portalen (behovet av att navigera till Lagringskontot och lagringsbehållaren där den virtuella Hårddisken har skapats) och du behöver veta var den virtuella Hårddisken ska copi utgåvan till.</span><span class="sxs-lookup"><span data-stu-id="f41ff-864">In order to do that, you need the name and the container of the VHD which you can find in the ‘Storage Section’ of the Azure Portal (need to navigate to the Storage Account and the storage container where the VHD was created) and you need to know where the VHD should be copied to.</span></span>

<span data-ttu-id="f41ff-865">Du kan sedan använda kommandot genom att helt enkelt definiera parametrar blob och behållare för den virtuella Hårddisken att ladda ned och mål som fysiska platsen för den virtuella Hårddisken (inklusive filnamnet).</span><span class="sxs-lookup"><span data-stu-id="f41ff-865">Then you can leverage the command by simply defining the parameters blob and container of the VHD to download and the destination as the physical target location of the VHD (including its name).</span></span> <span data-ttu-id="f41ff-866">Kommandot kan se ut så:</span><span class="sxs-lookup"><span data-stu-id="f41ff-866">The command could look like:</span></span>

```
azure storage blob download --blob <name of the VHD to download> --container <container of the VHD to download> --account-name <storage account name of the VHD to download> --account-key <storage account key> --destination <destination of the VHD to download>
```

### <a name="transferring-vms-and-vhds-within-azure"></a><span data-ttu-id="f41ff-867">Överföring av virtuella datorer och virtuella hårddiskar i Azure</span><span class="sxs-lookup"><span data-stu-id="f41ff-867">Transferring VMs and VHDs within Azure</span></span>
#### <a name="copying-sap-systems-within-azure"></a><span data-ttu-id="f41ff-868">Kopiera SAP-system i Azure</span><span class="sxs-lookup"><span data-stu-id="f41ff-868">Copying SAP systems within Azure</span></span>
<span data-ttu-id="f41ff-869">Troligtvis består en SAP-system eller även en dedikerad DBMS server som stöder ett lager för SAP-program av flera virtuella hårddiskar som innehåller antingen OS med binärfiler eller data och loggfilen fil(er) SAP-databasen.</span><span class="sxs-lookup"><span data-stu-id="f41ff-869">A SAP system or even a dedicated DBMS server supporting a SAP application layer will likely consist of several VHDs which contain either the OS with the binaries or the data and log file(s) of the SAP database.</span></span> <span data-ttu-id="f41ff-870">Varken funktionen Azure för att kopiera virtuella hårddiskar eller funktionen Azure för att spara virtuella hårddiskar till disk har en synkroniseringsmekanism som skulle ögonblicksbild flera virtuella hårddiskar synkront.</span><span class="sxs-lookup"><span data-stu-id="f41ff-870">Neither the Azure functionality of copying VHDs nor the Azure functionality of saving VHDs to disk has a synchronization mechanism which would snapshot multiple VHDs synchronously.</span></span> <span data-ttu-id="f41ff-871">Därför skulle tillståndet för de virtuella hårddiskarna kopieras eller har sparats även om de är monterade mot av samma virtuella dator vara olika.</span><span class="sxs-lookup"><span data-stu-id="f41ff-871">Therefore, the state of the copied or saved VHDs even if those are mounted against the same VM would be different.</span></span> <span data-ttu-id="f41ff-872">Detta innebär att det konkreta gäller att ha olika data och logfile(s) finns i olika virtuella hårddiskar, databasen i slutet skulle vara inkonsekvent.</span><span class="sxs-lookup"><span data-stu-id="f41ff-872">This means that in the concrete case of having different data and logfile(s) contained in the different VHDs, the database in the end would be inconsistent.</span></span>

<span data-ttu-id="f41ff-873">**Slutsats: För att kunna kopiera eller spara virtuella hårddiskar som är en del av en SAP konfiguration du behöver stoppa SAP-systemet och också behöver stänga av den distribuerade virtuella datorn. Först då kan du kopiera eller ladda ned uppsättningen av virtuella hårddiskar att antingen skapa en kopia av SAP-system i Azure eller lokalt.**</span><span class="sxs-lookup"><span data-stu-id="f41ff-873">**Conclusion: In order to copy or save VHDs which are part of an SAP system configuration you need to stop the SAP system and also need to shut down the deployed VM. Only then can you copy or download the set of VHDs to either create a copy of the SAP system in Azure or on-premises.**</span></span>

<span data-ttu-id="f41ff-874">Datadiskar lagras som VHD-filer i ett Azure Storage-konto och kan vara direkt ansluta till en virtuell dator eller användas som en bild.</span><span class="sxs-lookup"><span data-stu-id="f41ff-874">Data disks are stored as VHD files in an Azure Storage Account and can be directly attach to a virtual machine or be used as an image.</span></span> <span data-ttu-id="f41ff-875">I det här fallet kopieras den virtuella Hårddisken till en annan plats innan beeing kopplade till den virtuella datorn.</span><span class="sxs-lookup"><span data-stu-id="f41ff-875">In this case, the VHD is copied to another location before beeing attached to the virtual machine.</span></span> <span data-ttu-id="f41ff-876">Det fullständiga namnet på VHD-filen i Azure måste vara unikt i Azure.</span><span class="sxs-lookup"><span data-stu-id="f41ff-876">The full name of the VHD file in Azure must be unique within Azure.</span></span> <span data-ttu-id="f41ff-877">Som nämnts tidigare redan är den typ av en tre delar namnet som ser ut som:</span><span class="sxs-lookup"><span data-stu-id="f41ff-877">As mentioned earlier already, the name is kind of a three-part name that looks like:</span></span>

    http(s)://<storage account name>.blob.core.windows.net/<container name>/<vhd name>

##### <a name="powershell"></a><span data-ttu-id="f41ff-878">PowerShell</span><span class="sxs-lookup"><span data-stu-id="f41ff-878">Powershell</span></span>
<span data-ttu-id="f41ff-879">Du kan använda Azure PowerShell-cmdlets för att kopiera en VHD som visas i [i den här artikeln][storage-powershell-guide-full-copy-vhd].</span><span class="sxs-lookup"><span data-stu-id="f41ff-879">You can use Azure PowerShell cmdlets to copy a VHD as shown in [this article][storage-powershell-guide-full-copy-vhd].</span></span>

##### <a name="cli"></a><span data-ttu-id="f41ff-880">CLI</span><span class="sxs-lookup"><span data-stu-id="f41ff-880">CLI</span></span>
<span data-ttu-id="f41ff-881">Du kan använda Azure CLI för att kopiera en VHD som visas i [i den här artikeln][storage-azure-cli-copy-blobs]</span><span class="sxs-lookup"><span data-stu-id="f41ff-881">You can use Azure CLI to copy a VHD as shown in [this article][storage-azure-cli-copy-blobs]</span></span>

##### <a name="azure-storage-tools"></a><span data-ttu-id="f41ff-882">Azure Storage-verktyg</span><span class="sxs-lookup"><span data-stu-id="f41ff-882">Azure Storage tools</span></span>
* <span data-ttu-id="f41ff-883"><http://azurestorageexplorer.Codeplex.com/releases/View/125870></span><span class="sxs-lookup"><span data-stu-id="f41ff-883"><http://azurestorageexplorer.codeplex.com/releases/view/125870></span></span>

<span data-ttu-id="f41ff-884">Det finns också tekniker utgåvor av Azure lagringsutforskare som finns här:</span><span class="sxs-lookup"><span data-stu-id="f41ff-884">There also are professional editions of Azure Storage Explorers which can be found here:</span></span>

* <span data-ttu-id="f41ff-885"><http://www.cerebrata.com/></span><span class="sxs-lookup"><span data-stu-id="f41ff-885"><http://www.cerebrata.com/></span></span>
* <span data-ttu-id="f41ff-886"><http://clumsyleaf.com/products/cloudxplorer></span><span class="sxs-lookup"><span data-stu-id="f41ff-886"><http://clumsyleaf.com/products/cloudxplorer></span></span>

<span data-ttu-id="f41ff-887">Kopia av en VHD: n i ett lagringskonto är en process som tar endast några sekunder (ungefär som att skapa ögonblicksbilder med lazy kopia och kopiera vid skrivning till SAN-maskinvaran).</span><span class="sxs-lookup"><span data-stu-id="f41ff-887">The copy of a VHD itself within a storage account is a process which takes only a few seconds (similar to SAN hardware creating snapshots with lazy copy and copy on write).</span></span> <span data-ttu-id="f41ff-888">När du har en kopia av VHD-filen som du kan koppla den till en virtuell dator eller använda den som en bild för att bifoga kopior av den virtuella Hårddisken till virtuella datorer.</span><span class="sxs-lookup"><span data-stu-id="f41ff-888">After you have a copy of the VHD file you can attach it to a virtual machine or use it as an image to attach copies of the VHD to virtual machines.</span></span>

##### <a name="powershell"></a><span data-ttu-id="f41ff-889">PowerShell</span><span class="sxs-lookup"><span data-stu-id="f41ff-889">Powershell</span></span>
```powershell
# attach a vhd to a vm
$vm = Get-AzureRmVM -ResourceGroupName <resource group name> -Name <vm name>
$vm = Add-AzureRmVMDataDisk -VM $vm -Name newdatadisk -VhdUri <path to vhd> -Caching <caching option> -DiskSizeInGB $null -Lun <lun e.g. 0> -CreateOption attach
$vm | Update-AzureRmVM

# attach a copy of the vhd to a vm
$vm = Get-AzureRmVM -ResourceGroupName <resource group name> -Name <vm name>
$vm = Add-AzureRmVMDataDisk -VM $vm -Name newdatadisk -VhdUri <new path of vhd> -SourceImageUri <path to image vhd> -Caching <caching option> -DiskSizeInGB $null -Lun <lun e.g. 0> -CreateOption fromImage
$vm | Update-AzureRmVM
```
##### <a name="cli"></a><span data-ttu-id="f41ff-890">CLI</span><span class="sxs-lookup"><span data-stu-id="f41ff-890">CLI</span></span>
```
azure config mode arm

# attach a vhd to a vm
azure vm disk attach <resource group name> <vm name> <path to vhd>

# attach a copy of the vhd to a vm
# this scenario is currently not possible with Azure CLI. A workaround is to manually copy the vhd to the destination.
```

#### <span data-ttu-id="f41ff-891"><a name="9789b076-2011-4afa-b2fe-b07a8aba58a1"></a>Kopiera diskar mellan Azure Storage-konton</span><span class="sxs-lookup"><span data-stu-id="f41ff-891"><a name="9789b076-2011-4afa-b2fe-b07a8aba58a1"></a>Copying disks between Azure Storage Accounts</span></span>
<span data-ttu-id="f41ff-892">Den här uppgiften kan inte utföras på Azure Portal.</span><span class="sxs-lookup"><span data-stu-id="f41ff-892">This task cannot be performed on the Azure Portal.</span></span> <span data-ttu-id="f41ff-893">Du kan ise Azure PowerShell-cmdlet: ar, Azure CLI eller tredje part lagring webbläsare.</span><span class="sxs-lookup"><span data-stu-id="f41ff-893">You can ise Azure PowerShell cmdlets, Azure CLI or a third party storage browser.</span></span> <span data-ttu-id="f41ff-894">PowerShell-cmdletar eller CLI-kommandon kan skapa och hantera blobbar som omfattar möjligheten att kopiera BLOB asynkront mellan Lagringskonton och mellan regioner inom Azure-prenumerationen.</span><span class="sxs-lookup"><span data-stu-id="f41ff-894">The PowerShell cmdlets or CLI commands can create and manage blobs, which include the ability to asynchronously copy blobs across Storage Accounts and across regions within the Azure subscription.</span></span>

##### <a name="powershell"></a><span data-ttu-id="f41ff-895">PowerShell</span><span class="sxs-lookup"><span data-stu-id="f41ff-895">Powershell</span></span>
<span data-ttu-id="f41ff-896">Det är också möjligt att kopiera virtuella hårddiskar mellan prenumerationer.</span><span class="sxs-lookup"><span data-stu-id="f41ff-896">Copying VHDs between subscriptions is also possible.</span></span> <span data-ttu-id="f41ff-897">Mer information finns [i den här artikeln][storage-powershell-guide-full-copy-vhd].</span><span class="sxs-lookup"><span data-stu-id="f41ff-897">For more information read [this article][storage-powershell-guide-full-copy-vhd].</span></span>

<span data-ttu-id="f41ff-898">Det grundläggande flödet av PS cmdlet logiken ser ut så här:</span><span class="sxs-lookup"><span data-stu-id="f41ff-898">The basic flow of the PS cmdlet logic looks like this:</span></span>

* <span data-ttu-id="f41ff-899">Skapa en kontexten för lagringskontot för käll-lagringskonto med *ny AzureStorageContext* -finns <https://msdn.microsoft.com/library/dn806380.aspx></span><span class="sxs-lookup"><span data-stu-id="f41ff-899">Create a storage account context for the source storage account with *New-AzureStorageContext* - see <https://msdn.microsoft.com/library/dn806380.aspx></span></span>
* <span data-ttu-id="f41ff-900">Skapa en kontexten för lagringskontot för mål-lagringskontot med *ny AzureStorageContext* -finns <https://msdn.microsoft.com/library/dn806380.aspx></span><span class="sxs-lookup"><span data-stu-id="f41ff-900">Create a storage account context for the target storage account with *New-AzureStorageContext* - see <https://msdn.microsoft.com/library/dn806380.aspx></span></span>
* <span data-ttu-id="f41ff-901">Starta kopieringen med</span><span class="sxs-lookup"><span data-stu-id="f41ff-901">Start the copy with</span></span>

```powershell
Start-AzureStorageBlobCopy -SrcBlob <source blob name> -SrcContainer <source container name> -SrcContext <variable containing context of source storage account> -DestBlob <target blob name> -DestContainer <target container name> -DestContext <variable containing context of target storage account>
```

* <span data-ttu-id="f41ff-902">Kontrollera status för kopian i en slinga med</span><span class="sxs-lookup"><span data-stu-id="f41ff-902">Check the status of the copy in a loop with</span></span>

```powershell
Get-AzureStorageBlobCopyState -Blob <target blob name> -Container <target container name> -Context <variable containing context of target storage account>
```

* <span data-ttu-id="f41ff-903">Anslut den nya virtuella Hårddisken till en virtuell dator enligt beskrivningen ovan.</span><span class="sxs-lookup"><span data-stu-id="f41ff-903">Attach the new VHD to a virtual machine as described above.</span></span>

<span data-ttu-id="f41ff-904">Exemplen finns [i den här artikeln][storage-powershell-guide-full-copy-vhd]</span><span class="sxs-lookup"><span data-stu-id="f41ff-904">For examples see [this article][storage-powershell-guide-full-copy-vhd]</span></span>

##### <a name="cli"></a><span data-ttu-id="f41ff-905">CLI</span><span class="sxs-lookup"><span data-stu-id="f41ff-905">CLI</span></span>
* <span data-ttu-id="f41ff-906">Starta kopieringen med</span><span class="sxs-lookup"><span data-stu-id="f41ff-906">Start the copy with</span></span>

```
  azure storage blob copy start --source-blob <source blob name> --source-container <source container name> --account-name <source storage account name> --account-key <source storage account key> --dest-container <target container name> --dest-blob <target blob name> --dest-account-name <target storage account name> --dest-account-key <target storage account name>
```

* <span data-ttu-id="f41ff-907">Kontrollera status om kopian i en slinga med</span><span class="sxs-lookup"><span data-stu-id="f41ff-907">Check the status if the copy in a loop with</span></span>

```
azure storage blob copy show --blob <target blob name> --container <target container name> --account-name <target storage account name> --account-key <target storage account name>
```

* <span data-ttu-id="f41ff-908">Anslut den nya virtuella Hårddisken till en virtuell dator enligt beskrivningen ovan.</span><span class="sxs-lookup"><span data-stu-id="f41ff-908">Attach the new VHD to a virtual machine as described above.</span></span>

<span data-ttu-id="f41ff-909">Exemplen finns [i den här artikeln][storage-azure-cli-copy-blobs]</span><span class="sxs-lookup"><span data-stu-id="f41ff-909">For examples see [this article][storage-azure-cli-copy-blobs]</span></span>

### <a name="disk-handling"></a><span data-ttu-id="f41ff-910">Disk-hantering</span><span class="sxs-lookup"><span data-stu-id="f41ff-910">Disk Handling</span></span>
#### <span data-ttu-id="f41ff-911"><a name="4efec401-91e0-40c0-8e64-f2dceadff646"></a>VM/VHD-strukturen för SAP-distributioner</span><span class="sxs-lookup"><span data-stu-id="f41ff-911"><a name="4efec401-91e0-40c0-8e64-f2dceadff646"></a>VM/VHD structure for SAP deployments</span></span>
<span data-ttu-id="f41ff-912">Vi är hanteringen av strukturen för en virtuell dator och associerade virtuella hårddiskar mycket enkelt.</span><span class="sxs-lookup"><span data-stu-id="f41ff-912">Ideally the handling of the structure of a VM and the associated VHDs should be very simple.</span></span> <span data-ttu-id="f41ff-913">Kunder utvecklat många sätt att strukturera en serverinstallation lokala installationer.</span><span class="sxs-lookup"><span data-stu-id="f41ff-913">In on-premises installations, customers developed many ways of structuring a server installation.</span></span>

* <span data-ttu-id="f41ff-914">En bas-VHD som innehåller Operativsystemet och alla binärfiler DBMS och/eller SAP.</span><span class="sxs-lookup"><span data-stu-id="f41ff-914">One base VHD which contains the OS and all the binaries of the DBMS and/or SAP.</span></span> <span data-ttu-id="f41ff-915">Den här virtuella Hårddisken kan vara upp till 1TB i storlek i stället för tidigare begränsningar som begränsad till 127 GB sedan mars 2015.</span><span class="sxs-lookup"><span data-stu-id="f41ff-915">Since March 2015, this VHD can be up to 1TB in size instead of earlier restrictions that limited it to 127GB.</span></span>
* <span data-ttu-id="f41ff-916">En eller flera virtuella hårddiskar som innehåller DBMS-loggfilen för SAP-databasen och loggfilen områdets DBMS tillfällig lagring (om DBMS stöder detta).</span><span class="sxs-lookup"><span data-stu-id="f41ff-916">One or multiple VHDs which contains the DBMS log file of the SAP database and the log file of the DBMS temp storage area (if the DBMS supports this).</span></span> <span data-ttu-id="f41ff-917">Om databasen loggen IOPS kraven är hög, måste du stripe-flera virtuella hårddiskar för att uppnå den nödvändiga IOPS volymen.</span><span class="sxs-lookup"><span data-stu-id="f41ff-917">If the database log IOPS requirements are high, you need to stripe multiple VHDs in order to reach the IOPS volume required.</span></span>
* <span data-ttu-id="f41ff-918">Ett antal virtuella hårddiskar som innehåller en eller två databasfiler för SAP-databasen och DBMS temp datafilerna samt (om DBMS stöder detta).</span><span class="sxs-lookup"><span data-stu-id="f41ff-918">A number of VHDs containing one or two database files of the SAP database and the DBMS temp data files as well (if the DBMS supports this).</span></span>

![För referenskonfiguration av Azure IaaS-VM för SAP][planning-guide-figure-1300]

<span data-ttu-id="f41ff-920">[comment]: <> (MShermannd TODO beskrivs Linux struktur)</span><span class="sxs-lookup"><span data-stu-id="f41ff-920">[comment]: <> (MShermannd  TODO describe Linux structure  )</span></span>

- - -
> ![Windows][Logo_Windows] <span data-ttu-id="f41ff-922">Windows</span><span class="sxs-lookup"><span data-stu-id="f41ff-922">Windows</span></span>
>
> <span data-ttu-id="f41ff-923">Med många kunder såg vi konfigurationer, till exempel SAP och DBMS binärfiler har inte installerats på enhet c:\ där Operativsystemet har installerats.</span><span class="sxs-lookup"><span data-stu-id="f41ff-923">With many customers we saw configurations where, for example, SAP and DBMS binaries were not installed on the c:\ drive where the OS was installed.</span></span> <span data-ttu-id="f41ff-924">Det finns olika orsaker, men när vi tillbaka till roten, var vanligtvis att enheterna har liten och OS uppgraderingar behövs ytterligare utrymme 10 – 15 år sedan.</span><span class="sxs-lookup"><span data-stu-id="f41ff-924">There were various reasons for this, but when we went back to the root, it usually was that the drives were small and OS upgrades needed additional space 10-15 years ago.</span></span> <span data-ttu-id="f41ff-925">Båda villkoren gäller inte för ofta längre dessa dagar.</span><span class="sxs-lookup"><span data-stu-id="f41ff-925">Both conditions do not apply these days too often anymore.</span></span> <span data-ttu-id="f41ff-926">Idag mappas enhet c:\ diskar med stora volymer eller på virtuella datorer.</span><span class="sxs-lookup"><span data-stu-id="f41ff-926">Today the c:\ drive can be mapped on large volume disks or VMs.</span></span> <span data-ttu-id="f41ff-927">För att kunna hålla distributioner enkel i sin struktur, bör följa följande distribution för SAP NetWeaver system i Azure</span><span class="sxs-lookup"><span data-stu-id="f41ff-927">In order to keep deployments simple in their structure, it is recommended to follow the following deployment pattern for SAP NetWeaver systems in Azure</span></span>
>
> <span data-ttu-id="f41ff-928">Windows-operativsystemet växlingsfilens storlek bör vara på d: (icke-beständig disk)</span><span class="sxs-lookup"><span data-stu-id="f41ff-928">The Windows operating system pagefile should be on the D: drive (non-persistent disk)</span></span>
>
> ![Linux][Logo_Linux] <span data-ttu-id="f41ff-930">Linux</span><span class="sxs-lookup"><span data-stu-id="f41ff-930">Linux</span></span>
>
> <span data-ttu-id="f41ff-931">Placera Linux växlingsfil under /mnt/mnt/resurs på Linux som beskrivs i [i den här artikeln][virtual-machines-linux-agent-user-guide].</span><span class="sxs-lookup"><span data-stu-id="f41ff-931">Place the Linux swapfile under /mnt /mnt/resource on Linux as described in [this article][virtual-machines-linux-agent-user-guide].</span></span> <span data-ttu-id="f41ff-932">Växlingsfilen kan konfigureras i konfigurationsfilen för Linux-agenten /etc/waagent.conf.</span><span class="sxs-lookup"><span data-stu-id="f41ff-932">The swap file can be configured in the configuration file of the Linux Agent /etc/waagent.conf.</span></span> <span data-ttu-id="f41ff-933">Lägg till eller ändra följande inställningar:</span><span class="sxs-lookup"><span data-stu-id="f41ff-933">Add or change the following settings:</span></span>
>
>

```
ResourceDisk.EnableSwap=y
ResourceDisk.SwapSizeMB=30720
```

<span data-ttu-id="f41ff-934">Om du vill aktivera ändringarna som måste du starta om Linux-agenten med</span><span class="sxs-lookup"><span data-stu-id="f41ff-934">To activate the changes, you need to restart the Linux Agent with</span></span>

```
sudo service waagent restart
```

<span data-ttu-id="f41ff-935">Läs SAP-kommentar [1597355] för mer information om rekommenderade växlingen filstorlek</span><span class="sxs-lookup"><span data-stu-id="f41ff-935">Please read SAP Note [1597355] for more details on the recommended swap file size</span></span>

- - -
<span data-ttu-id="f41ff-936">Antalet virtuella hårddiskar som används för DBMS-datafiler och vilken typ av Azure Storage dessa virtuella hårddiskar finns på fastställas av IOPS-krav och svarstiden krävs.</span><span class="sxs-lookup"><span data-stu-id="f41ff-936">The number of VHDs used for the DBMS data files and the type of Azure Storage these VHDs are hosted on should be determined by the IOPS requirements and the latency required.</span></span> <span data-ttu-id="f41ff-937">Exakt kvoter beskrivs i [i den här artikeln][virtual-machines-sizes]</span><span class="sxs-lookup"><span data-stu-id="f41ff-937">Exact quotas are described in [this article][virtual-machines-sizes]</span></span>

<span data-ttu-id="f41ff-938">Erfarenhet av SAP distributioner under de senaste 2 åren vilka undervisning förekommer oss vissa erfarenheter som kan sammanfattas som:</span><span class="sxs-lookup"><span data-stu-id="f41ff-938">Experience of SAP deployments over the last 2 years taught us some lessons which can be summarized as:</span></span>

* <span data-ttu-id="f41ff-939">IOPS trafik till olika datafiler är inte alltid samma eftersom befintliga kunden system kan ha annorlunda storlek datafiler som motsvarar deras SAP-databaserna.</span><span class="sxs-lookup"><span data-stu-id="f41ff-939">IOPS traffic to different data files is not always the same since existing customer systems might have differently sized data files representing their SAP database(s).</span></span> <span data-ttu-id="f41ff-940">Därför visade det sig att bättre för att använda en RAID-konfiguration över flera virtuella hårddiskar för att placera data LUN högg utanför de.</span><span class="sxs-lookup"><span data-stu-id="f41ff-940">As a result it turned out to be better using a RAID configuration over multiple VHDs to place the data files LUNs carved out of those.</span></span> <span data-ttu-id="f41ff-941">Det fanns situationer, särskilt med Azure standardlagring där en IOPS frekvens uppnått kvoten av en enskild virtuell Hårddisk mot DBMS transaktionsloggen.</span><span class="sxs-lookup"><span data-stu-id="f41ff-941">There were situations, especially with Azure Standard Storage where an IOPS rate hit the quota of a single VHD against the DBMS transaction log.</span></span> <span data-ttu-id="f41ff-942">I sådana fall rekommenderas användning av Premium-lagring eller också sammanställa flera Standard lagring virtuella hårddiskar med en programvarubaserad RAID.</span><span class="sxs-lookup"><span data-stu-id="f41ff-942">In such scenarios the use of Premium Storage is recommended or alternatively aggregating multiple Standard Storage VHDs with a software RAID.</span></span>

- - -
> ![Windows][Logo_Windows] <span data-ttu-id="f41ff-944">Windows</span><span class="sxs-lookup"><span data-stu-id="f41ff-944">Windows</span></span>
>
> * <span data-ttu-id="f41ff-945">[Bästa praxis för SQL Server i Azure Virtual Machines prestanda][virtual-machines-sql-server-performance-best-practices]</span><span class="sxs-lookup"><span data-stu-id="f41ff-945">[Performance best practices for SQL Server in Azure Virtual Machines][virtual-machines-sql-server-performance-best-practices]</span></span>
>
> ![Linux][Logo_Linux] <span data-ttu-id="f41ff-947">Linux</span><span class="sxs-lookup"><span data-stu-id="f41ff-947">Linux</span></span>
>
> * <span data-ttu-id="f41ff-948">[Konfigurera programvarubaserad RAID på Linux][virtual-machines-linux-configure-raid]</span><span class="sxs-lookup"><span data-stu-id="f41ff-948">[Configure Software RAID on Linux][virtual-machines-linux-configure-raid]</span></span>
> * <span data-ttu-id="f41ff-949">[Konfigurera LVM på en virtuell Linux-dator i Azure][virtual-machines-linux-configure-lvm]</span><span class="sxs-lookup"><span data-stu-id="f41ff-949">[Configure LVM on a Linux VM in Azure][virtual-machines-linux-configure-lvm]</span></span>
> * [<span data-ttu-id="f41ff-950">Azure Storage hemligheter och Linux-i/o-optimeringar</span><span class="sxs-lookup"><span data-stu-id="f41ff-950">Azure Storage secrets and Linux I/O optimizations</span></span>](http://blogs.msdn.com/b/igorpag/archive/2014/10/23/azure-storage-secrets-and-linux-i-o-optimizations.aspx)
>
>

- - -
* <span data-ttu-id="f41ff-951">Premium-lagring visas betydande bättre prestanda, särskilt för kritiska transaction log skrivningar.</span><span class="sxs-lookup"><span data-stu-id="f41ff-951">Premium Storage is showing significant better performance, especially for critical transaction log writes.</span></span> <span data-ttu-id="f41ff-952">För SAP-scenarier som förväntas att leverera produktionsliknande prestanda, rekommenderas att använda VM-serien som kan använda Azure Premium-lagring.</span><span class="sxs-lookup"><span data-stu-id="f41ff-952">For SAP scenarios that are expected to deliver production like performance, it is highly recommended to use VM-Series that can leverage Azure Premium Storage.</span></span>

<span data-ttu-id="f41ff-953">Tänk på att den virtuella Hårddisken som innehåller Operativsystemet, och som vi rekommenderar om binärfilerna för SAP och databasen (grundläggande VM), är inte längre begränsad till 127GB.</span><span class="sxs-lookup"><span data-stu-id="f41ff-953">Keep in mind that the VHD which contains the OS, and as we recommend, the binaries of SAP and the database (base VM) as well, is not anymore limited to 127GB.</span></span> <span data-ttu-id="f41ff-954">Det kan nu ha upp till 1TB i storlek.</span><span class="sxs-lookup"><span data-stu-id="f41ff-954">It now can have up to 1TB in size.</span></span> <span data-ttu-id="f41ff-955">Detta bör vara tillräckligt med utrymme för att behålla alla nödvändiga fil som t.ex. inklusive SAP batch jobbloggar.</span><span class="sxs-lookup"><span data-stu-id="f41ff-955">This should be enough space to keep all the necessary file including e.g. SAP batch job logs.</span></span>

<span data-ttu-id="f41ff-956">Fler förslag och mer specifikt för DBMS virtuella datorer, finns det [DBMS Deployment Guide][dbms-guide]</span><span class="sxs-lookup"><span data-stu-id="f41ff-956">For more suggestions and more details, specifically for DBMS VMs, please consult the [DBMS Deployment Guide][dbms-guide]</span></span>

#### <a name="disk-handling"></a><span data-ttu-id="f41ff-957">Disk-hantering</span><span class="sxs-lookup"><span data-stu-id="f41ff-957">Disk Handling</span></span>
<span data-ttu-id="f41ff-958">I de flesta fall måste du skapa ytterligare diskar för att distribuera SAP-databasen till den virtuella datorn.</span><span class="sxs-lookup"><span data-stu-id="f41ff-958">In most scenarios you need to create additional disks in order to deploy the SAP database into the VM.</span></span> <span data-ttu-id="f41ff-959">Hittills har diskuterats överväganden för antalet virtuella hårddiskar i kapitlet [VM/VHD-strukturen för SAP distributioner] [ planning-guide-5.5.1] i det här dokumentet.</span><span class="sxs-lookup"><span data-stu-id="f41ff-959">We talked about the considerations on number of VHDs in chapter [VM/VHD structure for SAP deployments][planning-guide-5.5.1] of this document.</span></span> <span data-ttu-id="f41ff-960">Azure-portalen kan anslutning och frånkoppling diskar när en grundläggande virtuell dator har distribuerats.</span><span class="sxs-lookup"><span data-stu-id="f41ff-960">The Azure Portal allows to attach and detach disks once a base VM is deployed.</span></span> <span data-ttu-id="f41ff-961">Diskarna kan vara kopplad/borttagbar när den virtuella datorn är igång och körs samt när den har stoppats.</span><span class="sxs-lookup"><span data-stu-id="f41ff-961">The disks can be attached/detached when the VM is up and running as well as when it is stopped.</span></span> <span data-ttu-id="f41ff-962">När du ansluter en disk, erbjuder Azure Portal bifoga en tom disk eller en befintlig disk som vid denna tidpunkt inte är ansluten till en annan virtuell dator.</span><span class="sxs-lookup"><span data-stu-id="f41ff-962">When attaching a disk, the Azure Portal offers to attach an empty disk or an existing disk which at this point in time is not attached to another VM.</span></span>

<span data-ttu-id="f41ff-963">**Obs**: virtuella hårddiskar kan endast kopplas till en virtuell dator samtidigt.</span><span class="sxs-lookup"><span data-stu-id="f41ff-963">**Note**: VHDs can only be attached to one VM at any given time.</span></span>

![Koppla / frånkoppla diskarna med Azure standardlagring][planning-guide-figure-1400]

<span data-ttu-id="f41ff-965">Du måste bestämma om du vill skapa en ny och tom virtuell Hårddisk (som skulle skapas i samma Lagringskonto som den virtuella datorn är i bas) eller om du vill välja en befintlig virtuell Hårddisk som har överförts tidigare och som ska kopplas till den virtuella datorn nu.</span><span class="sxs-lookup"><span data-stu-id="f41ff-965">You need to decide whether you want to create a new and empty VHD (which would be created in the same Storage Account as the base VM is in) or whether you want to select an existing VHD that was uploaded earlier and should be attached to the VM now.</span></span>

<span data-ttu-id="f41ff-966">**VIKTIGA**: du **inte** vill använda värden cachelagring med Azure standardlagring.</span><span class="sxs-lookup"><span data-stu-id="f41ff-966">**IMPORTANT**: You **DO NOT** want to use Host Caching with Azure Standard Storage.</span></span> <span data-ttu-id="f41ff-967">Värden Cache-inställningar bör du lämna standardinställningen NONE.</span><span class="sxs-lookup"><span data-stu-id="f41ff-967">You should leave the Host Cache preference at the default of NONE.</span></span> <span data-ttu-id="f41ff-968">Med Azure Premium Storage bör du aktivera Läs cachelagring om i/o-egenskap är främst läsa som vanliga i/o-trafik mot databasen datafiler.</span><span class="sxs-lookup"><span data-stu-id="f41ff-968">With Azure Premium Storage you should enable Read Caching if the I/O characteristic is mostly read like typical I/O traffic against database data files.</span></span> <span data-ttu-id="f41ff-969">Om databasen transaktionsloggfilen rekommenderas ingen cachelagring.</span><span class="sxs-lookup"><span data-stu-id="f41ff-969">In case of database transaction log file no caching is recommended.</span></span>

- - -
> ![Windows][Logo_Windows] <span data-ttu-id="f41ff-971">Windows</span><span class="sxs-lookup"><span data-stu-id="f41ff-971">Windows</span></span>
>
> <span data-ttu-id="f41ff-972">[Så här kopplar du en datadisk i Azure-portalen][virtual-machines-windows-attach-disk-portal]</span><span class="sxs-lookup"><span data-stu-id="f41ff-972">[How to attach a data disk in the Azure portal][virtual-machines-windows-attach-disk-portal]</span></span>
>
> <span data-ttu-id="f41ff-973">Om diskar har anslutits måste du logga in till den virtuella datorn att öppna Windows Disk Manager.</span><span class="sxs-lookup"><span data-stu-id="f41ff-973">If disks are attached, you need to log in into the VM to open the Windows Disk Manager.</span></span> <span data-ttu-id="f41ff-974">Om automount inte aktiveras som rekommenderas i kapitel [inställningen automount för anslutna diskar][planning-guide-5.5.3], just kopplat volymen behöver vidta online och initierade.</span><span class="sxs-lookup"><span data-stu-id="f41ff-974">If automount is not enabled as recommended in chapter [Setting automount for attached disks][planning-guide-5.5.3], the newly attached volume needs to be taken online and initialized.</span></span>
>
> ![Linux][Logo_Linux] <span data-ttu-id="f41ff-976">Linux</span><span class="sxs-lookup"><span data-stu-id="f41ff-976">Linux</span></span>
>
> <span data-ttu-id="f41ff-977">Om diskarna är anslutna, måste du logga in till den virtuella datorn och initiera diskarna som beskrivs i [i den här artikeln][virtual-machines-linux-how-to-attach-disk-how-to-initialize-a-new-data-disk-in-linux]</span><span class="sxs-lookup"><span data-stu-id="f41ff-977">If disks are attached, you need to log in into the VM and initialize the disks as described in [this article][virtual-machines-linux-how-to-attach-disk-how-to-initialize-a-new-data-disk-in-linux]</span></span>
>
>

- - -
<span data-ttu-id="f41ff-978">Om den nya disken är en tom disk, måste du formatera disken samt.</span><span class="sxs-lookup"><span data-stu-id="f41ff-978">If the new disk is an empty disk, you need to format the disk as well.</span></span> <span data-ttu-id="f41ff-979">Formatering, särskilt för DBMS data och loggfiler tillämpas samma rekommendationer för bare metal-distributioner av DBMS.</span><span class="sxs-lookup"><span data-stu-id="f41ff-979">For formatting, especially for DBMS data and log files the same recommendations as for bare-metal deployments of the DBMS apply.</span></span>

<span data-ttu-id="f41ff-980">Som nämnts i kapitlet [i Microsoft Azure virtuella konceptet][planning-guide-3.2], ett Azure Storage-konto tillhandahåller inte oändlig resurser i i/o-volym IOPS och data volym.</span><span class="sxs-lookup"><span data-stu-id="f41ff-980">As already mentioned in chapter [The Microsoft Azure Virtual Machine Concept][planning-guide-3.2], an Azure Storage account does not provide infinite resources in terms of I/O volume, IOPS and data volume.</span></span> <span data-ttu-id="f41ff-981">DBMS virtuella datorer som vanligtvis mest påverkas av detta.</span><span class="sxs-lookup"><span data-stu-id="f41ff-981">Usually DBMS VMs are most affected by this.</span></span> <span data-ttu-id="f41ff-982">Det kan vara bäst att använda ett separat Lagringskonto för varje virtuell dator om du har några hög i/o-volym virtuella datorer som du distribuerar för att hålla sig inom gränsen på volymen Azure Storage-konto.</span><span class="sxs-lookup"><span data-stu-id="f41ff-982">It might be best to use a separate Storage Account for each VM if you have few high I/O volume VMs to deploy in order to stay within the limit of the Azure Storage Account volume.</span></span> <span data-ttu-id="f41ff-983">I annat fall måste du se hur du balanserar dessa virtuella datorer mellan olika Storage-konton utan att gränsen på varje enskild Storage-konto.</span><span class="sxs-lookup"><span data-stu-id="f41ff-983">Otherwise, you need to see how you can balance these VMs between different Storage accounts without hitting the limit of each single Storage Account.</span></span> <span data-ttu-id="f41ff-984">Mer information beskrivs i den [DBMS Deployment Guide][dbms-guide].</span><span class="sxs-lookup"><span data-stu-id="f41ff-984">More details are discussed in the [DBMS Deployment Guide][dbms-guide].</span></span> <span data-ttu-id="f41ff-985">Du bör också tänka dessa begränsningar på för ren SAP-program virtuella server-datorer eller andra virtuella datorer som eventuellt kan kräva ytterligare virtuella hårddiskar.</span><span class="sxs-lookup"><span data-stu-id="f41ff-985">You should also keep these limitations in mind for pure SAP application server VMs or other VMs which eventually might require additional VHDs.</span></span>

<span data-ttu-id="f41ff-986">Ett annat ämne som är relevant för Storage-konton är om de virtuella hårddiskarna i ett Lagringskonto får georeplikerad.</span><span class="sxs-lookup"><span data-stu-id="f41ff-986">Another topic which is relevant for Storage Accounts is whether the VHDs in a Storage Account are getting Geo-replicated.</span></span> <span data-ttu-id="f41ff-987">GEO-replikering är aktiverat eller inaktiverat på nivån Storage-konto och inte på VM-nivå.</span><span class="sxs-lookup"><span data-stu-id="f41ff-987">Geo-replication is enabled or disabled on the Storage Account level and not on the VM level.</span></span> <span data-ttu-id="f41ff-988">Om geo-replikering är aktiverat, skulle de virtuella hårddiskarna inom Lagringskonto replikeras till en annan Azure-datacenter inom samma region.</span><span class="sxs-lookup"><span data-stu-id="f41ff-988">If geo-replication is enabled, the VHDs within the Storage Account would be replicated into another Azure data center within the same region.</span></span> <span data-ttu-id="f41ff-989">Innan du bestämmer dig för detta, bör du tänka på följande begränsningar:</span><span class="sxs-lookup"><span data-stu-id="f41ff-989">Before deciding on this, you should think about the following restriction:</span></span>

<span data-ttu-id="f41ff-990">Azure Geo-replikering fungerar lokalt på varje virtuell Hårddisk på en virtuell dator och replikerar inte IOs i kronologisk ordning över flera virtuella hårddiskar på en virtuell dator.</span><span class="sxs-lookup"><span data-stu-id="f41ff-990">Azure Geo-replication works locally on each VHD in a VM and does not replicate the IOs in chronological order across multiple VHDs in a VM.</span></span> <span data-ttu-id="f41ff-991">Därför kan replikeras den virtuella Hårddisken som representerar den grundläggande VM samt de ytterligare virtuella hårddiskar anslutna till den virtuella datorn oberoende av varandra.</span><span class="sxs-lookup"><span data-stu-id="f41ff-991">Therefore, the VHD that represents the base VM as well as any additional VHDs attached to the VM are replicated independent of each other.</span></span> <span data-ttu-id="f41ff-992">Det innebär att det finns ingen synkronisering mellan ändringar i de olika virtuella hårddiskarna.</span><span class="sxs-lookup"><span data-stu-id="f41ff-992">This means there is no synchronization between the changes in the different VHDs.</span></span> <span data-ttu-id="f41ff-993">Det faktum att IOs replikeras oberoende av den ordning som de är skrivna innebär att geo-replikering är inte av värdet för databasservrar som har sina databaser fördelade över flera virtuella hårddiskar.</span><span class="sxs-lookup"><span data-stu-id="f41ff-993">The fact that the IOs are replicated independently of the order in which they are written means that geo-replication is not of value for database servers that have their databases distributed over multiple VHDs.</span></span> <span data-ttu-id="f41ff-994">Förutom DBMS finnas det också andra program där processer skriva eller ändra data i olika virtuella hårddiskar och där det är viktigt att hålla ordning på ändringar.</span><span class="sxs-lookup"><span data-stu-id="f41ff-994">In addition to the DBMS, there also might be other applications where processes write or manipulate data in different VHDs and where it is important to keep the order of changes.</span></span> <span data-ttu-id="f41ff-995">Om detta är ett krav, bör inte geo-replikering i Azure aktiveras.</span><span class="sxs-lookup"><span data-stu-id="f41ff-995">If that is a requirement, geo-replication in Azure should not be enabled.</span></span> <span data-ttu-id="f41ff-996">Beroende på om du behöver eller vill geo-replikering för en uppsättning virtuella datorer, men inte för en annan uppsättning, du kan redan kategorisera virtuella datorer och deras relaterade virtuella hårddiskar i olika Storage-konton som har geo-replikering aktiverat eller inaktiverat.</span><span class="sxs-lookup"><span data-stu-id="f41ff-996">Dependent on whether you need or want geo-replication for a set of VMs, but not for another set, you can already categorize VMs and their related VHDs into different Storage Accounts that have geo-replication enabled or disabled.</span></span>

#### <span data-ttu-id="f41ff-997"><a name="17e0d543-7e8c-4160-a7da-dd7117a1ad9d"></a>Ange automount för anslutna diskar</span><span class="sxs-lookup"><span data-stu-id="f41ff-997"><a name="17e0d543-7e8c-4160-a7da-dd7117a1ad9d"></a>Setting automount for attached disks</span></span>
- - -
> ![Windows][Logo_Windows] <span data-ttu-id="f41ff-999">Windows</span><span class="sxs-lookup"><span data-stu-id="f41ff-999">Windows</span></span>
>
> <span data-ttu-id="f41ff-1000">För virtuella datorer som har skapats från egna avbildningar eller diskar, är det nödvändigt att kontrollera och eventuellt ange parametern automount.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1000">For VMs which are created from own Images or Disks, it is necessary to check and possibly set the automount parameter.</span></span> <span data-ttu-id="f41ff-1001">Den här parametern kan den virtuella datorn efter en omstart eller Omdistributionen i Azure för att montera kopplad/monterade enheter igen automatiskt.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1001">Setting this parameter will allow the VM after a restart or redeployment in Azure to mount the attached/mounted drives again automatically.</span></span>
> <span data-ttu-id="f41ff-1002">Parametern har angetts för bilder som tillhandahålls av Microsoft i Azure Marketplace.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1002">The parameter is set for the images provided by Microsoft in the Azure Marketplace.</span></span>
>
> <span data-ttu-id="f41ff-1003">Kontrollera i dokumentationen för den kommandorad körbara diskpart.exe här för att ange automount:</span><span class="sxs-lookup"><span data-stu-id="f41ff-1003">In order to set the automount, please check the documentation of the command line executable diskpart.exe here:</span></span>
>
> * [<span data-ttu-id="f41ff-1004">Kommandoradsalternativ för DiskPart</span><span class="sxs-lookup"><span data-stu-id="f41ff-1004">DiskPart Command-Line Options</span></span>](https://technet.microsoft.com/library/cc766465.aspx)
> * [<span data-ttu-id="f41ff-1005">Automount</span><span class="sxs-lookup"><span data-stu-id="f41ff-1005">Automount</span></span>](http://technet.microsoft.com/library/cc753703.aspx)
>
> <span data-ttu-id="f41ff-1006">Ska öppnas fönstret Windows-kommandoraden som administratör.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1006">The Windows command line window should be opened as administrator.</span></span>
>
> <span data-ttu-id="f41ff-1007">Om diskar har anslutits måste du logga in till den virtuella datorn att öppna Windows Disk Manager.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1007">If disks are attached, you need to log in into the VM to open the Windows Disk Manager.</span></span> <span data-ttu-id="f41ff-1008">Om automount inte aktiveras som rekommenderas i kapitel [inställningen automount för anslutna diskar][planning-guide-5.5.3], nyligen kopplade volym > måste utföras online och initierade.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1008">If automount is not enabled as recommended in chapter [Setting automount for attached disks][planning-guide-5.5.3],  the newly attached volume >needs to be taken online and initialized.</span></span>
>
> ![Linux][Logo_Linux] <span data-ttu-id="f41ff-1010">Linux</span><span class="sxs-lookup"><span data-stu-id="f41ff-1010">Linux</span></span>
>
> <span data-ttu-id="f41ff-1011">Du måste initiera en tom disk som nyss bifogad enligt beskrivningen i [i den här artikeln][virtual-machines-linux-how-to-attach-disk-how-to-initialize-a-new-data-disk-in-linux].</span><span class="sxs-lookup"><span data-stu-id="f41ff-1011">You need to initialize an newly attached empty disk as described in [this article][virtual-machines-linux-how-to-attach-disk-how-to-initialize-a-new-data-disk-in-linux].</span></span>
> <span data-ttu-id="f41ff-1012">Du måste också lägga till nya diskar på /etc/fstab.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1012">You also need to add new disks to the /etc/fstab.</span></span>
>
>

- - -
### <a name="final-deployment"></a><span data-ttu-id="f41ff-1013">Slutlig distribution</span><span class="sxs-lookup"><span data-stu-id="f41ff-1013">Final Deployment</span></span>
<span data-ttu-id="f41ff-1014">Sista distributionen och specifika stegen, särskilt med avseende på distributionen av SAP utökad övervakning, finns i den [Deployment Guide][deployment-guide].</span><span class="sxs-lookup"><span data-stu-id="f41ff-1014">For the final Deployment and exact steps, especially with regards to the deployment of SAP Extended Monitoring, please refer to the [Deployment Guide][deployment-guide].</span></span>

## <a name="accessing-sap-systems-running-within-azure-vms"></a><span data-ttu-id="f41ff-1015">Åtkomst till SAP-system som körs i virtuella Azure-datorer</span><span class="sxs-lookup"><span data-stu-id="f41ff-1015">Accessing SAP systems running within Azure VMs</span></span>
<span data-ttu-id="f41ff-1016">Endast molnbaserad scenarier kanske du vill ansluta till dessa SAP-system i det offentliga internet med hjälp av Användargränssnittet för SAP.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1016">For Cloud-Only scenarios, you might want to connect to those SAP systems across the public internet using SAP GUI.</span></span> <span data-ttu-id="f41ff-1017">I dessa fall måste följande procedurer som ska användas.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1017">For these cases, the following procedures need to be applied.</span></span>

<span data-ttu-id="f41ff-1018">Senare i dokumentet diskuteras andra större scenariot, ansluta till SAP-system i mellan lokala distributioner som har en plats-till-plats-anslutning (VPN-tunnel) eller Azure ExpressRoute-anslutning mellan lokala system och Azure system.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1018">Later in the document we will discuss the other major scenario, connecting to SAP systems in Cross-Premises deployments which have a site-to-site connection (VPN tunnel) or Azure ExpressRoute connection between the on-premises systems and Azure systems.</span></span>

### <a name="remote-access-to-sap-systems"></a><span data-ttu-id="f41ff-1019">Fjärråtkomst till SAP-system</span><span class="sxs-lookup"><span data-stu-id="f41ff-1019">Remote Access to SAP systems</span></span>
<span data-ttu-id="f41ff-1020">Med Azure Resource Manager innehåller inga slutpunkter längre som den tidigare klassiska modellen.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1020">With Azure Resource Manager there are no default endpoints anymore like in the former classic model.</span></span> <span data-ttu-id="f41ff-1021">Alla portar för en Azure ARM-VM är öppna så länge som:</span><span class="sxs-lookup"><span data-stu-id="f41ff-1021">All ports of an Azure ARM VM are open as long as:</span></span>

1. <span data-ttu-id="f41ff-1022">Ingen Nätverkssäkerhetsgrupp har definierats för undernätet eller nätverksgränssnittet.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1022">No Network Security Group is defined for the subnet or the network interface.</span></span> <span data-ttu-id="f41ff-1023">Nätverkstrafik till virtuella Azure-datorer kan vara skyddad via så kallade ”Nätverkssäkerhetsgrupper”.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1023">Network traffic to Azure VMs can be secured via so-called "Network Security Groups".</span></span> <span data-ttu-id="f41ff-1024">Mer information finns i [vad är en Nätverkssäkerhetsgrupp (NSG)?][virtual-networks-nsg]</span><span class="sxs-lookup"><span data-stu-id="f41ff-1024">For more information see [What is a Network Security Group (NSG)?][virtual-networks-nsg]</span></span>
2. <span data-ttu-id="f41ff-1025">Någon Azure belastningsutjämnare har definierats för nätverksgränssnittet</span><span class="sxs-lookup"><span data-stu-id="f41ff-1025">No Azure Load Balancer is defined for the network interface</span></span>   

<span data-ttu-id="f41ff-1026">Se arkitektur skillnaden mellan klassiska modellen och ARM enligt beskrivningen i [i den här artikeln][virtual-machines-azure-resource-manager-architecture].</span><span class="sxs-lookup"><span data-stu-id="f41ff-1026">See the architecture difference between classic model and ARM as described in [this article][virtual-machines-azure-resource-manager-architecture].</span></span>

#### <a name="configuration-of-the-sap-system-and-sap-gui-connectivity-for-cloud-only-scenario"></a><span data-ttu-id="f41ff-1027">Konfigurationen av SAP-systemet och SAP GUI-anslutning för endast molnbaserad scenario</span><span class="sxs-lookup"><span data-stu-id="f41ff-1027">Configuration of the SAP System and SAP GUI connectivity for Cloud-Only scenario</span></span>
<span data-ttu-id="f41ff-1028">Finns den här artikeln som beskriver information i det här avsnittet: <http://blogs.msdn.com/b/saponsqlserver/archive/2014/06/24/sap-gui-connection-closed-when-connecting-to-sap-system-in-azure.aspx></span><span class="sxs-lookup"><span data-stu-id="f41ff-1028">Please see this article which describes details to this topic: <http://blogs.msdn.com/b/saponsqlserver/archive/2014/06/24/sap-gui-connection-closed-when-connecting-to-sap-system-in-azure.aspx></span></span>

#### <a name="changing-firewall-settings-within-vm"></a><span data-ttu-id="f41ff-1029">Ändra brandväggsinställningar inom VM</span><span class="sxs-lookup"><span data-stu-id="f41ff-1029">Changing Firewall Settings within VM</span></span>
<span data-ttu-id="f41ff-1030">Det kan vara nödvändigt att konfigurera brandväggen på de virtuella datorerna för att tillåta inkommande trafik till SAP-system.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1030">It might be neccessary to configure the firewall on your virtual machines to allow inbound traffic to your SAP system.</span></span>

- - -
> ![Windows][Logo_Windows] <span data-ttu-id="f41ff-1032">Windows</span><span class="sxs-lookup"><span data-stu-id="f41ff-1032">Windows</span></span>
>
> <span data-ttu-id="f41ff-1033">Windows-brandväggen i en distribuerad virtuell dator i Azure är aktiverat som standard.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1033">By default, the Windows Firewall within an Azure deployed VM is turned on.</span></span> <span data-ttu-id="f41ff-1034">Nu måste du tillåta SAP-Port som ska öppnas, annars SAP-GUI kommer inte kunna ansluta.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1034">You now need to allow the SAP Port to be opened, otherwise the SAP GUI will not be able to connect.</span></span>
> <span data-ttu-id="f41ff-1035">Gör så här:</span><span class="sxs-lookup"><span data-stu-id="f41ff-1035">To do this:</span></span>
>
> * <span data-ttu-id="f41ff-1036">Öppna kontrollpanelen\system och säkerhet\windows-brandväggen till att ”avancerade inställningar'.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1036">Open Control Panel\System and Security\Windows Firewall to ‘Advanced Settings’.</span></span>
> * <span data-ttu-id="f41ff-1037">Nu ska du högerklicka på regler för inkommande trafik och välj ”ny regel'.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1037">Now right-click on Inbound Rules and chose ‘New Rule’.</span></span>
> * <span data-ttu-id="f41ff-1038">I den följande guiden valt att skapa en ny regel 'Port'.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1038">In the following Wizard chose to create a new ‘Port’ rule.</span></span>
> * <span data-ttu-id="f41ff-1039">I nästa steg i guiden, lämnar du inställningen på TCP- och de portnummer som du vill öppna.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1039">In the next step of the wizard, leave the setting at TCP and type in the port number you want to open.</span></span> <span data-ttu-id="f41ff-1040">Eftersom vår SAP instans-ID är 00, tog vi 3200.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1040">Since our SAP instance ID is 00, we took 3200.</span></span> <span data-ttu-id="f41ff-1041">Om din instans har en annan instans., bör den port som du har definierat tidigare baserat på antalet instans öppnas.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1041">If your instance has a different instance number, the port you defined earlier based on the instance number should be opened.</span></span>
> * <span data-ttu-id="f41ff-1042">Du måste behålla objektet ”Tillåt anslutningen' som kontrolleras i nästa steg i guiden.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1042">In the next part of the wizard, you need to leave the item ‘Allow Connection’ checked.</span></span>
> * <span data-ttu-id="f41ff-1043">Du måste definiera om regeln gäller för domän, privata och offentliga nätverk i nästa steg i guiden.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1043">In the next step of the wizard you need to define whether the rule applies for Domain, Private and Public network.</span></span> <span data-ttu-id="f41ff-1044">Justera det vid behov efter dina behov.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1044">Please adjust it if necessary to your needs.</span></span> <span data-ttu-id="f41ff-1045">Dock behöver ansluter med SAP GUI utifrån via ett offentligt nätverk, du ha regeln ska gälla för ett offentligt nätverk.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1045">However, connecting with SAP GUI from the outside through the public network, you need to have the rule applied to the public network.</span></span>
> * <span data-ttu-id="f41ff-1046">I det sista steget i guiden måste du ge regeln ett namn och spara regeln genom att trycka på ”Slutför”</span><span class="sxs-lookup"><span data-stu-id="f41ff-1046">In the last step of the wizard, you need to give the rule a name and then save the rule by pressing ‘Finish’</span></span>
>
> <span data-ttu-id="f41ff-1047">Regeln träder i kraft omedelbart.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1047">The rule becomes effective immediately.</span></span>
>
> ![Definitionen av port][planning-guide-figure-1600]
>
> ![Linux][Logo_Linux] <span data-ttu-id="f41ff-1050">Linux</span><span class="sxs-lookup"><span data-stu-id="f41ff-1050">Linux</span></span>
>
> <span data-ttu-id="f41ff-1051">Linux-avbildningar i Azure Marketplace aktiverar inte iptables brandväggen som standard och anslutning till SAP-system ska fungera.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1051">The Linux images in the Azure Marketplace do not enable the iptables firewall by default and the connection to your SAP system should work.</span></span> <span data-ttu-id="f41ff-1052">Om du har aktiverat iptables eller en annan brandvägg finns i dokumentationen för iptables eller använda brandväggen för att tillåta inkommande tcp-trafik till port 32xx (där xx är system antalet SAP-system).</span><span class="sxs-lookup"><span data-stu-id="f41ff-1052">If you enabled iptables or another firewall, please refer to the documentation of iptables or the used firewall to allow inbound tcp traffic to  port 32xx (where xx is the system number of your SAP system).</span></span>
>
>

- - -
#### <a name="security-recommendations"></a><span data-ttu-id="f41ff-1053">Säkerhetsrekommendationer</span><span class="sxs-lookup"><span data-stu-id="f41ff-1053">Security recommendations</span></span>
<span data-ttu-id="f41ff-1054">SAP-GUI ansluter inte direkt till en SAP-instans (port 32xx) som körs, men först ansluter via port öppna till SAP meddelandet serverprocessen (port 36xx).</span><span class="sxs-lookup"><span data-stu-id="f41ff-1054">The SAP GUI does not connect immediately to any of the SAP instances (port 32xx) which are running, but first connects via the port opened to the SAP message server process (port 36xx).</span></span> <span data-ttu-id="f41ff-1055">Tidigare var mycket samma port används av servern meddelande för intern kommunikation till instanser för programmet.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1055">In the past the very same port was used by the message server for the internal communication to the application instances.</span></span> <span data-ttu-id="f41ff-1056">För att förhindra lokalt programservrar oavsiktligt kommunicerar med en message-server i Azure intern kommunikationsportar kan ändras.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1056">To prevent on-premises application servers from inadvertently communicating with a message server in Azure the internal communication ports can be changed.</span></span> <span data-ttu-id="f41ff-1057">Vi rekommenderar starkt att ändra intern kommunikation mellan SAP message-servern och dess programinstanser till ett annat portnummer på datorer som har varit klonad från lokalt system, t.ex en klon av utveckling för projektet tester osv. Detta kan göras med standardparametern profil:</span><span class="sxs-lookup"><span data-stu-id="f41ff-1057">It is highly recommended to change the internal communication between the SAP message server and its application instances to a different port number on systems that have been cloned from on-premises systems, such as a clone of development for project testing etc. This can be done with the default profile parameter:</span></span>

> <span data-ttu-id="f41ff-1058">rdisp/msserv_internal</span><span class="sxs-lookup"><span data-stu-id="f41ff-1058">rdisp/msserv_internal</span></span>
>
>

<span data-ttu-id="f41ff-1059">enligt beskrivningen i: <https://help.sap.com/saphelp_nwpi71/helpdata/en/47/c56a6938fb2d65e10000000a42189c/content.htm></span><span class="sxs-lookup"><span data-stu-id="f41ff-1059">as documented in: <https://help.sap.com/saphelp_nwpi71/helpdata/en/47/c56a6938fb2d65e10000000a42189c/content.htm></span></span>

## <span data-ttu-id="f41ff-1060"><a name="96a77628-a05e-475d-9df3-fb82217e8f14"></a>Begreppet endast molnbaserad distribution av SAP-instanser</span><span class="sxs-lookup"><span data-stu-id="f41ff-1060"><a name="96a77628-a05e-475d-9df3-fb82217e8f14"></a>Concepts of Cloud-Only deployment of SAP instances</span></span>
### <span data-ttu-id="f41ff-1061"><a name="3e9c3690-da67-421a-bc3f-12c520d99a30"></a>Enskild virtuell dator med SAP NetWeaver demo/utbildning scenario</span><span class="sxs-lookup"><span data-stu-id="f41ff-1061"><a name="3e9c3690-da67-421a-bc3f-12c520d99a30"></a>Single VM with SAP NetWeaver demo/training scenario</span></span>
![Kör enskild VM SAP Demo med samma VM, separat i Azure Cloud Services][planning-guide-figure-1700]

<span data-ttu-id="f41ff-1063">I det här scenariot (finns i kapitlet [endast molnbaserad] [ planning-guide-2.1] i det här dokumentet) vi implementera en typisk utbildning-demon system scenario där fullständig utbildning/demo-scenariot finns i en enda virtuell dator.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1063">In this scenario (see chapter [Cloud-Only][planning-guide-2.1] of this document) we are implementing a typical training/demo system scenario where the complete training/demo scenario is contained within a single VM.</span></span> <span data-ttu-id="f41ff-1064">Vi förutsätter att distributionen görs via avbildningen mallar för Virtuella datorer.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1064">We assume that the deployment is done through VM image templates.</span></span> <span data-ttu-id="f41ff-1065">Vi förutsätter också att flera av dessa demo/utbildningar virtuella datorer behöver distribueras med de virtuella datorerna som har samma namn.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1065">We also assume that multiple of these demo/trainings VMs need to be deployed with the VMs having the same name.</span></span>

<span data-ttu-id="f41ff-1066">Antas att du har skapat en VM-avbildning som beskrivs i vissa avsnitt i kapitel [förbereda virtuella datorer med SAP för Azure] [ planning-guide-5.2] i det här dokumentet.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1066">The assumption is that you created a VM Image as described in some sections of chapter [Preparing VMs with SAP for Azure][planning-guide-5.2] in this document.</span></span>

<span data-ttu-id="f41ff-1067">En händelsesekvens att implementera scenariot ser ut så här:</span><span class="sxs-lookup"><span data-stu-id="f41ff-1067">The sequence of events to implement the scenario looks like this:</span></span>

<span data-ttu-id="f41ff-1068">[comment]: <> (MShermannd TODO behöver ge ARM prov / beskrivning använder json-mall + förtydligande om unikt namn på virtuell dator i ARM virtuellt nätverk)</span><span class="sxs-lookup"><span data-stu-id="f41ff-1068">[comment]: <> (MShermannd  TODO have to provide ARM sample / description using json template + clarification regarding unique VM name within ARM virtual network  )</span></span>   
##### <a name="powershell"></a><span data-ttu-id="f41ff-1069">PowerShell</span><span class="sxs-lookup"><span data-stu-id="f41ff-1069">Powershell</span></span>
* <span data-ttu-id="f41ff-1070">Skapa en ny grupp resoure för varje utbildning/demo liggande</span><span class="sxs-lookup"><span data-stu-id="f41ff-1070">Create a new resoure group for every training/demo landscape</span></span>

```powershell
$rgName = "SAPERPDemo1"
New-AzureRmResourceGroup -Name $rgName -Location "North Europe"
```

* <span data-ttu-id="f41ff-1071">Skapa ett nytt lagringskonto</span><span class="sxs-lookup"><span data-stu-id="f41ff-1071">Create a new storage account</span></span>

```powershell
$suffix = Get-Random -Minimum 100000 -Maximum 999999
$account = New-AzureRmStorageAccount -ResourceGroupName $rgName -Name "saperpdemo$suffix" -SkuName Standard_LRS -Kind "Storage" -Location "North Europe"
```

* <span data-ttu-id="f41ff-1072">Skapa ett nytt virtuellt nätverk för varje utbildning/demo liggande om du vill aktivera användning av samma värdnamn och IP-adresser.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1072">Create a new virtual network for every training/demo landscape to enable the usage of the same hostname and IP addresses.</span></span> <span data-ttu-id="f41ff-1073">Det virtuella nätverket skyddas av en Nätverkssäkerhetsgrupp som bara tillåter trafik till port 3389 att aktivera åtkomst via fjärrskrivbord och port 22 för SSH.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1073">The virtual network is protected by a Network Security Group that only allows traffic to port 3389 to enable Remote Desktop access and port 22 for SSH.</span></span>

```powershell
# Create a new Virtual Network
$rdpRule = New-AzureRmNetworkSecurityRuleConfig -Name SAPERPDemoNSGRDP -Protocol * -SourcePortRange * -DestinationPortRange 3389 -Access Allow -Direction Inbound -SourceAddressPrefix * -DestinationAddressPrefix * -Priority 100
$sshRule = New-AzureRmNetworkSecurityRuleConfig -Name SAPERPDemoNSGSSH -Protocol * -SourcePortRange * -DestinationPortRange 22 -Access Allow -Direction Inbound -SourceAddressPrefix * -DestinationAddressPrefix * -Priority 101
$nsg = New-AzureRmNetworkSecurityGroup -Name SAPERPDemoNSG -ResourceGroupName $rgName -Location  "North Europe" -SecurityRules $rdpRule,$sshRule

$subnetConfig = New-AzureRmVirtualNetworkSubnetConfig -Name Subnet1 -AddressPrefix  10.0.1.0/24 -NetworkSecurityGroup $nsg
$vnet = New-AzureRmVirtualNetwork -Name SAPERPDemoVNet -ResourceGroupName $rgName -Location "North Europe"  -AddressPrefix 10.0.1.0/24 -Subnet $subnetConfig
```

* <span data-ttu-id="f41ff-1074">Skapa en ny offentlig IP-adress som kan användas för att få åtkomst till den virtuella datorn från internet</span><span class="sxs-lookup"><span data-stu-id="f41ff-1074">Create a new public IP address that can be used to access the virtual machine from the internet</span></span>

```powershell
# Create a public IP address with a DNS name
$pip = New-AzureRmPublicIpAddress -Name SAPERPDemoPIP -ResourceGroupName $rgName -Location "North Europe" -DomainNameLabel $rgName.ToLower() -AllocationMethod Dynamic
```

* <span data-ttu-id="f41ff-1075">Skapa ett nytt nätverksgränssnitt för den virtuella datorn</span><span class="sxs-lookup"><span data-stu-id="f41ff-1075">Create a new network interface for the virtual machine</span></span>

```powershell
# Create a new Network Interface
$nic = New-AzureRmNetworkInterface -Name SAPERPDemoNIC -ResourceGroupName $rgName -Location "North Europe" -Subnet $vnet.Subnets[0] -PublicIpAddress $pip
```

* <span data-ttu-id="f41ff-1076">Skapa en virtuell dator.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1076">Create a virtual machine.</span></span> <span data-ttu-id="f41ff-1077">Endast molnbaserad scenariot har varje virtuell dator samma namn.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1077">For the Cloud-Only scenario every VM will have the same name.</span></span> <span data-ttu-id="f41ff-1078">SAP-SID för SAP NetWeaver instanser i dessa virtuella datorer kommer att samma samt.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1078">The SAP SID of the SAP NetWeaver instances in those VMs will be the same as well.</span></span> <span data-ttu-id="f41ff-1079">Namnet på den virtuella datorn måste vara unikt i Azure-resursgrupp, men i olika Azure-resursgrupper kan du köra virtuella datorer med samma namn.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1079">Within the Azure Resource Group, the name of the VM needs to be unique, but in different Azure Resource Groups you can run VMs with the same name.</span></span> <span data-ttu-id="f41ff-1080">Standardkonto för Windows eller 'rot' för Linux-administratörer' är inte giltiga.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1080">The default 'Administrator' account of Windows or 'root' for Linux are not valid.</span></span> <span data-ttu-id="f41ff-1081">Ett nytt användarnamn för administratören måste definieras tillsammans med ett lösenord.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1081">Therefore, a new administrator user name needs to be defined together with a password.</span></span> <span data-ttu-id="f41ff-1082">Storleken på den virtuella datorn måste också definieras.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1082">The size of the VM also needs to be defined.</span></span>

```powershell
#####
# Create a new virtual machine with an official image from the Azure Marketplace
#####
$cred=Get-Credential -Message "Type the name and password of the local administrator account."
$vmconfig = New-AzureRmVMConfig -VMName SAPERPDemo -VMSize Standard_D11

# select image
$vmconfig = Set-AzureRmVMSourceImage -VM $vmconfig -PublisherName "MicrosoftWindowsServer" -Offer "WindowsServer" -Skus "2012-R2-Datacenter" -Version "latest"
$vmconfig = Set-AzureRmVMOperatingSystem -VM $vmconfig -Windows -ComputerName "SAPERPDemo" -Credential $cred -ProvisionVMAgent -EnableAutoUpdate
# $vmconfig = Set-AzureRmVMSourceImage -VM $vmconfig -PublisherName "SUSE" -Offer "SLES" -Skus "12" -Version "latest"
# $vmconfig = Set-AzureRmVMSourceImage -VM $vmconfig -PublisherName "RedHat" -Offer "RHEL" -Skus "7.2" -Version "latest"
# $vmconfig = Set-AzureRmVMOperatingSystem -VM $vmconfig -Linux -ComputerName "SAPERPDemo" -Credential $cred

$vmconfig = Add-AzureRmVMNetworkInterface -VM $vmconfig -Id $nic.Id

$diskName="os"
$osDiskUri=$account.PrimaryEndpoints.Blob.ToString() + "vhds/" + $diskName  + ".vhd"
$vmconfig = Set-AzureRmVMOSDisk -VM $vmconfig -Name $diskName -VhdUri $osDiskUri -CreateOption fromImage
$vm = New-AzureRmVM -ResourceGroupName $rgName -Location "North Europe" -VM $vmconfig
```

```powershell
#####
# Create a new virtual machine with a VHD that contains the private image that you want to use
#####
$cred=Get-Credential -Message "Type the name and password of the local administrator account."
$vmconfig = New-AzureRmVMConfig -VMName SAPERPDemo -VMSize Standard_D11

$vmconfig = Add-AzureRmVMNetworkInterface -VM $vmconfig -Id $nic.Id

$diskName="osfromimage"
$osDiskUri=$account.PrimaryEndpoints.Blob.ToString() + "vhds/" + $diskName  + ".vhd"

$vmconfig = Set-AzureRmVMOSDisk -VM $vmconfig -Name $diskName -VhdUri $osDiskUri -CreateOption fromImage -SourceImageUri <path to VHD that contains the OS image> -Windows
$vmconfig = Set-AzureRmVMOperatingSystem -VM $vmconfig -Windows -ComputerName "SAPERPDemo" -Credential $cred
#$vmconfig = Set-AzureRmVMOSDisk -VM $vmconfig -Name $diskName -VhdUri $osDiskUri -CreateOption fromImage -SourceImageUri <path to VHD that contains the OS image> -Linux
#$vmconfig = Set-AzureRmVMOperatingSystem -VM $vmconfig -Linux -ComputerName "SAPERPDemo" -Credential $cred

$vm = New-AzureRmVM -ResourceGroupName $rgName -Location "North Europe" -VM $vmconfig
```

* <span data-ttu-id="f41ff-1083">Du kan också lägga till ytterligare diskar och återställa nödvändigt innehåll.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1083">Optionally add additional disks and restore necessary content.</span></span> <span data-ttu-id="f41ff-1084">Tänk på att alla blob-namn (URL: er till blobarna) måste vara unikt i Azure.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1084">Be aware that all blob names (URLs to the blobs) must be unique within Azure.</span></span>

```powershell
# Optional: Attach additional data disks
$vm = Get-AzureRmVM -ResourceGroupName $rgName -Name SAPERPDemo
$dataDiskUri = $account.PrimaryEndpoints.Blob.ToString() + "vhds/datadisk.vhd"
Add-AzureRmVMDataDisk -VM $vm -Name datadisk -VhdUri $dataDiskUri -DiskSizeInGB 1023 -CreateOption empty | Update-AzureRmVM
```

##### <a name="cli"></a><span data-ttu-id="f41ff-1085">CLI</span><span class="sxs-lookup"><span data-stu-id="f41ff-1085">CLI</span></span>
<span data-ttu-id="f41ff-1086">Följande exempelkod kan användas på Linux.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1086">The following example code can be used on Linux.</span></span> <span data-ttu-id="f41ff-1087">För Windows, måste använda PowerShell enligt beskrivningen ovan eller anpassa exempel för att använda % rgName % i stället för $rgName och ange miljövariabeln med hjälp av kommandot Windows *ange*.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1087">For Windows, please either use PowerShell as described above or adapt the example to use %rgName% instead of $rgName and set the environment variable using the Windows command *set*.</span></span>

* <span data-ttu-id="f41ff-1088">Skapa en ny grupp resoure för varje utbildning/demo liggande</span><span class="sxs-lookup"><span data-stu-id="f41ff-1088">Create a new resoure group for every training/demo landscape</span></span>

```
rgName=SAPERPDemo1
rgNameLower=saperpdemo1
azure group create $rgName "North Europe"
```

* <span data-ttu-id="f41ff-1089">Skapa ett nytt lagringskonto</span><span class="sxs-lookup"><span data-stu-id="f41ff-1089">Create a new storage account</span></span>

```
azure storage account create --resource-group $rgName --location "North Europe" --kind Storage --sku-name LRS $rgNameLower
```

* <span data-ttu-id="f41ff-1090">Skapa ett nytt virtuellt nätverk för varje utbildning/demo liggande om du vill aktivera användning av samma värdnamn och IP-adresser.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1090">Create a new virtual network for every training/demo landscape to enable the usage of the same hostname and IP addresses.</span></span> <span data-ttu-id="f41ff-1091">Det virtuella nätverket skyddas av en Nätverkssäkerhetsgrupp som bara tillåter trafik till port 3389 att aktivera åtkomst via fjärrskrivbord och port 22 för SSH.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1091">The virtual network is protected by a Network Security Group that only allows traffic to port 3389 to enable Remote Desktop access and port 22 for SSH.</span></span>

```
azure network nsg create --resource-group $rgName --location "North Europe" --name SAPERPDemoNSG
azure network nsg rule create --resource-group $rgName --nsg-name SAPERPDemoNSG --name SAPERPDemoNSGRDP --protocol \* --source-address-prefix \* --source-port-range \* --destination-address-prefix \* --destination-port-range 3389 --access Allow --priority 100 --direction Inbound
azure network nsg rule create --resource-group $rgName --nsg-name SAPERPDemoNSG --name SAPERPDemoNSGSSH --protocol \* --source-address-prefix \* --source-port-range \* --destination-address-prefix \* --destination-port-range 22 --access Allow --priority 101 --direction Inbound

azure network vnet create --resource-group $rgName --name SAPERPDemoVNet --location "North Europe" --address-prefixes 10.0.1.0/24
azure network vnet subnet create --resource-group $rgName --vnet-name SAPERPDemoVNet --name Subnet1 --address-prefix 10.0.1.0/24 --network-security-group-name SAPERPDemoNSG
```

* <span data-ttu-id="f41ff-1092">Skapa en ny offentlig IP-adress som kan användas för att få åtkomst till den virtuella datorn från internet</span><span class="sxs-lookup"><span data-stu-id="f41ff-1092">Create a new public IP address that can be used to access the virtual machine from the internet</span></span>

```
azure network public-ip create --resource-group $rgName --name SAPERPDemoPIP --location "North Europe" --domain-name-label $rgNameLower --allocation-method Dynamic
```

* <span data-ttu-id="f41ff-1093">Skapa ett nytt nätverksgränssnitt för den virtuella datorn</span><span class="sxs-lookup"><span data-stu-id="f41ff-1093">Create a new network interface for the virtual machine</span></span>

```
azure network nic create --resource-group $rgName --location "North Europe" --name SAPERPDemoNIC --public-ip-name SAPERPDemoPIP --subnet-name Subnet1 --subnet-vnet-name SAPERPDemoVNet
```

* <span data-ttu-id="f41ff-1094">Skapa en virtuell dator.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1094">Create a virtual machine.</span></span> <span data-ttu-id="f41ff-1095">Endast molnbaserad scenariot har varje virtuell dator samma namn.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1095">For the Cloud-Only scenario every VM will have the same name.</span></span> <span data-ttu-id="f41ff-1096">SAP-SID för SAP NetWeaver instanser i dessa virtuella datorer kommer att samma samt.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1096">The SAP SID of the SAP NetWeaver instances in those VMs will be the same as well.</span></span> <span data-ttu-id="f41ff-1097">Namnet på den virtuella datorn måste vara unikt i Azure-resursgrupp, men i olika Azure-resursgrupper kan du köra virtuella datorer med samma namn.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1097">Within the Azure Resource Group, the name of the VM needs to be unique, but in different Azure Resource Groups you can run VMs with the same name.</span></span> <span data-ttu-id="f41ff-1098">Standardkonto för Windows eller 'rot' för Linux-administratörer' är inte giltiga.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1098">The default 'Administrator' account of Windows or 'root' for Linux are not valid.</span></span> <span data-ttu-id="f41ff-1099">Ett nytt användarnamn för administratören måste definieras tillsammans med ett lösenord.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1099">Therefore, a new administrator user name needs to be defined together with a password.</span></span> <span data-ttu-id="f41ff-1100">Storleken på den virtuella datorn måste också definieras.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1100">The size of the VM also needs to be defined.</span></span>

```
azure vm create --resource-group $rgName --location "North Europe" --name SAPERPDemo --nic-name SAPERPDemoNIC --image-urn MicrosoftWindowsServer:WindowsServer:2012-R2-Datacenter:latest --os-type Windows --admin-username <username> --admin-password <password> --vm-size Standard_D11 --os-disk-vhd https://$rgNameLower.blob.core.windows.net/vhds/os.vhd --disable-boot-diagnostics
# azure vm create --resource-group $rgName --location "North Europe" --name SAPERPDemo --nic-name SAPERPDemoNIC --image-urn SUSE:SLES:12:latest --os-type Linux --admin-username <username> --admin-password <password> --vm-size Standard_D11 --os-disk-vhd https://$rgNameLower.blob.core.windows.net/vhds/os.vhd --disable-boot-diagnostics
# azure vm create --resource-group $rgName --location "North Europe" --name SAPERPDemo --nic-name SAPERPDemoNIC --image-urn RedHat:RHEL:7.2:latest --os-type Linux --admin-username <username> --admin-password <password> --vm-size Standard_D11 --os-disk-vhd https://$rgNameLower.blob.core.windows.net/vhds/os.vhd --disable-boot-diagnostics
```

```
#####
# Create a new virtual machine with a VHD that contains the private image that you want to use
#####
azure vm create --resource-group $rgName --location "North Europe" --name SAPERPDemo --nic-name SAPERPDemoNIC --os-type Windows --admin-username <username> --admin-password <password> --vm-size Standard_D11 --os-disk-vhd https://$rgNameLower.blob.core.windows.net/vhds/os.vhd -Q <path to image vhd> --disable-boot-diagnostics
#azure vm create --resource-group $rgName --location "North Europe" --name SAPERPDemo --nic-name SAPERPDemoNIC --os-type Linux --admin-username <username> --admin-password <password> --vm-size Standard_D11 --os-disk-vhd https://$rgNameLower.blob.core.windows.net/vhds/os.vhd -Q <path to image vhd> --disable-boot-diagnostics
```

* <span data-ttu-id="f41ff-1101">Du kan också lägga till ytterligare diskar och återställa nödvändigt innehåll.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1101">Optionally add additional disks and restore necessary content.</span></span> <span data-ttu-id="f41ff-1102">Tänk på att alla blob-namn (URL: er till blobarna) måste vara unikt i Azure.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1102">Be aware that all blob names (URLs to the blobs) must be unique within Azure.</span></span>

```
# Optional: Attach additional data disks
azure vm disk attach-new --resource-group $rgName --vm-name SAPERPDemo --size-in-gb 1023 --vhd-name datadisk
```

##### <a name="template"></a><span data-ttu-id="f41ff-1103">Mall</span><span class="sxs-lookup"><span data-stu-id="f41ff-1103">Template</span></span>
<span data-ttu-id="f41ff-1104">Du kan använda exempelmallarna i azure-snabbstartsmallar databasen på github.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1104">You can use the sample templates on the azure-quickstart-templates repository on github.</span></span>

* [<span data-ttu-id="f41ff-1105">Enkel virtuell Linux-dator</span><span class="sxs-lookup"><span data-stu-id="f41ff-1105">Simple Linux VM</span></span>](https://github.com/Azure/azure-quickstart-templates/tree/master/101-vm-simple-linux)
* [<span data-ttu-id="f41ff-1106">Enkla Windows VM</span><span class="sxs-lookup"><span data-stu-id="f41ff-1106">Simple Windows VM</span></span>](https://github.com/Azure/azure-quickstart-templates/tree/master/101-vm-simple-windows)
* [<span data-ttu-id="f41ff-1107">Virtuell dator från avbildningen</span><span class="sxs-lookup"><span data-stu-id="f41ff-1107">VM from image</span></span>](https://github.com/Azure/azure-quickstart-templates/tree/master/101-vm-from-user-image)

### <a name="implement-a-set-of-vms-which-need-to-communicate-within-azure"></a><span data-ttu-id="f41ff-1108">Implementera en uppsättning virtuella datorer som behöver kommunicera i Azure</span><span class="sxs-lookup"><span data-stu-id="f41ff-1108">Implement a set of VMs which need to communicate within Azure</span></span>
<span data-ttu-id="f41ff-1109">Det här scenariot med endast molnbaserad är ett typiskt scenario för utbildning och demo syfte var programvaran som representerar demo/utbildning scenariot sträcker sig över flera virtuella datorer.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1109">This Cloud-Only scenario is a typical scenario for training and demo purposes where the software representing the demo/training scenario is spread over multiple VMs.</span></span> <span data-ttu-id="f41ff-1110">De olika komponenterna som är installerade på olika virtuella datorer som behöver kommunicera med varandra.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1110">The different components installed in the different VMs need to communicate with each other.</span></span> <span data-ttu-id="f41ff-1111">Igen, i det här scenariot någon lokal nätverksanslutning eller scenarion med flera lokaler krävs.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1111">Again, in this scenario no on-premises network communication or Cross-Premises scenario is needed.</span></span>

<span data-ttu-id="f41ff-1112">Det här scenariot är en utökning av installationen som beskrivs i kapitlet [enskild virtuell dator med SAP NetWeaver demo/utbildning scenariot] [ planning-guide-7.1] i det här dokumentet.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1112">This scenario is an extension of the installation described in chapter [Single VM with SAP NetWeaver demo/training scenario][planning-guide-7.1] of this document.</span></span> <span data-ttu-id="f41ff-1113">I det här fallet läggs flera virtuella datorer till en befintlig resursgrupp.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1113">In this case more virtual machines will be added to an existing resource group.</span></span> <span data-ttu-id="f41ff-1114">I följande exempel består utbildning liggande av en SAP ASCS/SCS virtuell dator, en virtuell dator som kör en DBMS och en SAP Application Server-instans VM.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1114">In the following example the training landscape consists of an SAP ASCS/SCS VM, a VM running a DBMS and an SAP Application Server instance VM.</span></span>

<span data-ttu-id="f41ff-1115">Innan du skapar det här scenariot måste du tänka på grundläggande inställningar som redan utförs i scenariot innan.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1115">Before you build this scenario you need to think about basic settings as already exercised in the scenario before.</span></span>

#### <a name="resource-group-and-virtual-machine-naming"></a><span data-ttu-id="f41ff-1116">Resursgrupp och namngivning av virtuell dator</span><span class="sxs-lookup"><span data-stu-id="f41ff-1116">Resource Group and Virtual Machine naming</span></span>
<span data-ttu-id="f41ff-1117">Alla resursgruppnamn måste vara unika.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1117">All resource group names must be unique.</span></span> <span data-ttu-id="f41ff-1118">Utveckla egna namngivningsschemat för dina resurser, exempelvis `<rg-name`>-suffix.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1118">Develop your own naming scheme of your resources, such as `<rg-name`>-suffix.</span></span>

<span data-ttu-id="f41ff-1119">Namnet på virtuella datorn måste vara unikt inom resursgruppen.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1119">The virtual machine name has to be unique within the resource group.</span></span>

#### <a name="setup-network-for-communication-between-the-different-vms"></a><span data-ttu-id="f41ff-1120">Konfigurera nätverket för kommunikation mellan olika virtuella datorer</span><span class="sxs-lookup"><span data-stu-id="f41ff-1120">Setup Network for communication between the different VMs</span></span>
![Uppsättning virtuella datorer i Azure-nätverk][planning-guide-figure-1900]

<span data-ttu-id="f41ff-1122">För att förhindra namnkonflikter med kloner av samma utbildning/demo landskap, måste du skapa ett Azure Virtual Network för varje liggande.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1122">To prevent naming collisions with clones of the same training/demo landscapes, you need to create an Azure Virtual Network for every landscape.</span></span> <span data-ttu-id="f41ff-1123">DNS-namnmatchningen kommer att tillhandahållas av Azure eller konfigurera egna DNS-server utanför Azure (inte till ytterligare diskuteras här).</span><span class="sxs-lookup"><span data-stu-id="f41ff-1123">DNS name resolution will be provided by Azure or you can configure your own DNS server outside Azure (not to be further discussed here).</span></span> <span data-ttu-id="f41ff-1124">I det här scenariot konfigurerar vi inte våra egna DNS.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1124">In this scenario we do not configure our own DNS.</span></span> <span data-ttu-id="f41ff-1125">Kommunikation via värdnamn vara aktiverat för alla virtuella datorer i ett Azure Virtual Network.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1125">For all virtual machines inside one Azure Virtual Network communication via hostnames will be enabled.</span></span>

<span data-ttu-id="f41ff-1126">Orsaker att separera utbildning eller demo landskap av virtuella nätverk och inte bara resursgrupper kan vara:</span><span class="sxs-lookup"><span data-stu-id="f41ff-1126">The reasons to separate training or demo landscapes by virtual networks and not only resource groups could be:</span></span>

* <span data-ttu-id="f41ff-1127">SAP-liggande som ställs in måste egna AD/OpenLDAP och en domänserver måste vara en del av var och en av landskap.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1127">The SAP landscape as set up needs its own AD/OpenLDAP and a Domain Server needs to be part of each of the landscapes.</span></span>  
* <span data-ttu-id="f41ff-1128">SAP-liggande som ställs in har komponenter som behöver arbeta med fasta IP-adresser.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1128">The SAP landscape as set up has components that need to work with fixed IP addresses.</span></span>

<span data-ttu-id="f41ff-1129">Mer information om virtuella Azure-nätverk och hur du definierar dem finns i [i den här artikeln][virtual-networks-create-vnet-arm-pportal].</span><span class="sxs-lookup"><span data-stu-id="f41ff-1129">More details about Azure Virtual Networks and how to define them can be found in [this article][virtual-networks-create-vnet-arm-pportal].</span></span>

## <a name="deploying-sap-vms-with-corporate-network-connectivity-cross-premises"></a><span data-ttu-id="f41ff-1130">Distribuera SAP virtuella datorer med företagets nätverksanslutning (mellan platser)</span><span class="sxs-lookup"><span data-stu-id="f41ff-1130">Deploying SAP VMs with Corporate Network Connectivity (Cross-Premises)</span></span>
<span data-ttu-id="f41ff-1131">Du kör en SAP-liggande och vill dela upp distributionen mellan minimalt för avancerade DBMS-servrar, lokala virtualiserade miljöer för programmet lager och mindre 2-skikts konfigurerat SAP-system och Azure IaaS.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1131">You run a SAP landscape and want to divide the deployment between bare-metal for high-end DBMS servers, on-premises virtualized environments for application layers and smaller 2-Tier configured SAP systems and Azure IaaS.</span></span> <span data-ttu-id="f41ff-1132">Grundläggande antas att SAP system inom en SAP liggande behöver kommunicera med varandra och många andra programkomponenter som distribueras i företaget, oberoende av deras distribution form.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1132">The base assumption is that SAP systems within one SAP landscape need to communicate with each other and with many other software components deployed in the company, independent of their deployment form.</span></span> <span data-ttu-id="f41ff-1133">Det bör också finnas några skillnader som introducerades av formuläret distributionen för användaren ansluta till SAP-Gränssnittet eller andra gränssnitt.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1133">There also should be no differences introduced by the deployment form for the end user connecting with SAP GUI or other interfaces.</span></span> <span data-ttu-id="f41ff-1134">Dessa villkor kan endast vara uppfyllda när vi har den lokala Active Directory/OpenLDAP och DNS-tjänster som utökats till Azure system via plats-till-plats/flera plats-anslutning eller privata anslutningar som Azure ExpressRoute.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1134">These conditions can only be met when we have the on-premises Active Directory/OpenLDAP and DNS services extended to the Azure systems through site-to-site/multi-site connectivity or private connections like Azure ExpressRoute.</span></span>

<span data-ttu-id="f41ff-1135">För att få mer bakgrund på implementeringsinformation om SAP på Azure, bör du läsa kapitel [begrepp Cloud-Only distribution av SAP instanser] [ planning-guide-7] i det här dokumentet som beskriver vissa konstruktioner grunderna i Azure och hur de ska användas med SAP-program i Azure.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1135">In order to get more background on the implementation details of SAP on Azure, we encourage you to read chapter [Concepts of Cloud-Only deployment of SAP instances][planning-guide-7] of this document which explains some of the basics constructs of Azure and how these should be used with SAP applications in Azure.</span></span>

### <a name="scenario-of-a-sap-landscape"></a><span data-ttu-id="f41ff-1136">Scenario för en SAP-liggande</span><span class="sxs-lookup"><span data-stu-id="f41ff-1136">Scenario of a SAP landscape</span></span>
<span data-ttu-id="f41ff-1137">Scenarion med flera lokaler kan beskrivas ungefär som i graphics nedan:</span><span class="sxs-lookup"><span data-stu-id="f41ff-1137">The Cross-Premises scenario can be roughly described like in the graphics below:</span></span>

![Plats-till-plats-anslutning mellan lokala och Azure tillgångar][planning-guide-figure-2100]

<span data-ttu-id="f41ff-1139">Scenariot ovan beskriver ett scenario där lokalt AD/OpenLDAP och DNS har utökats till Azure.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1139">The scenario shown above describes a scenario where the on-premises AD/OpenLDAP and DNS is extended to Azure.</span></span> <span data-ttu-id="f41ff-1140">På den lokala sidan är ett vissa IP-adressintervall reserverat per Azure-prenumeration.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1140">On the on-premises side, a certain IP address range is reserved per Azure subscription.</span></span> <span data-ttu-id="f41ff-1141">IP-adressintervallet ska tilldelas ett Azure Virtual Network på Azure-sidan.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1141">The IP address range will be assigned to an Azure Virtual Network on the Azure side.</span></span>

#### <a name="security-considerations"></a><span data-ttu-id="f41ff-1142">Säkerhetsöverväganden</span><span class="sxs-lookup"><span data-stu-id="f41ff-1142">Security considerations</span></span>
<span data-ttu-id="f41ff-1143">Minimikravet används för säker kommunikationsprotokoll, till exempel SSL/TLS för webbläsaråtkomst eller VPN-baserade anslutningar för systemåtkomst till Azure-tjänster.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1143">The minimum requirement is the use of secure communication protocols such as SSL/TLS for browser access or VPN-based connections for system access to the Azure services.</span></span> <span data-ttu-id="f41ff-1144">Antas företag att hantera VPN-anslutning mellan sina företagets nätverk och Azure väldigt annorlunda.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1144">The assumption is that companies handle the VPN connection between their corporate network and Azure very differently.</span></span> <span data-ttu-id="f41ff-1145">Vissa företag kanske blankly öppna alla portar.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1145">Some companies might blankly open all the ports.</span></span> <span data-ttu-id="f41ff-1146">Vissa andra företag kanske vill ha mycket exakt vilka portar som de behöver för att öppna, osv.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1146">Some other companies might want to be very precise in which ports they need to open, etc.</span></span>

<span data-ttu-id="f41ff-1147">I tabellen nedan vanliga SAP visas kommunikationsportar.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1147">In the table below typical SAP communication ports are listed.</span></span> <span data-ttu-id="f41ff-1148">Det är i princip räcker för att öppna port för SAP-gateway.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1148">Basically it is sufficient to open the SAP gateway port.</span></span>

| <span data-ttu-id="f41ff-1149">Tjänst</span><span class="sxs-lookup"><span data-stu-id="f41ff-1149">Service</span></span> | <span data-ttu-id="f41ff-1150">Portnamn</span><span class="sxs-lookup"><span data-stu-id="f41ff-1150">Port Name</span></span> | <span data-ttu-id="f41ff-1151">Exempel `<nn`> = 01</span><span class="sxs-lookup"><span data-stu-id="f41ff-1151">Example `<nn`> = 01</span></span> | <span data-ttu-id="f41ff-1152">Standardintervallet (min max)</span><span class="sxs-lookup"><span data-stu-id="f41ff-1152">Default Range (min-max)</span></span> | <span data-ttu-id="f41ff-1153">Kommentar</span><span class="sxs-lookup"><span data-stu-id="f41ff-1153">Comment</span></span> |
| --- | --- | --- | --- | --- |
| <span data-ttu-id="f41ff-1154">Dispatcher</span><span class="sxs-lookup"><span data-stu-id="f41ff-1154">Dispatcher</span></span> |<span data-ttu-id="f41ff-1155">sapdp`<nn>` finns *</span><span class="sxs-lookup"><span data-stu-id="f41ff-1155">sapdp`<nn>` see *</span></span> |<span data-ttu-id="f41ff-1156">3201</span><span class="sxs-lookup"><span data-stu-id="f41ff-1156">3201</span></span> |<span data-ttu-id="f41ff-1157">3200 – 3299</span><span class="sxs-lookup"><span data-stu-id="f41ff-1157">3200 – 3299</span></span> |<span data-ttu-id="f41ff-1158">SAP Dispatcher, används av Java och SAP GUI för Windows</span><span class="sxs-lookup"><span data-stu-id="f41ff-1158">SAP Dispatcher, used by SAP GUI for Windows and Java</span></span> |
| <span data-ttu-id="f41ff-1159">Meddelande-server</span><span class="sxs-lookup"><span data-stu-id="f41ff-1159">Message server</span></span> |<span data-ttu-id="f41ff-1160">sapms`<sid`> finns **</span><span class="sxs-lookup"><span data-stu-id="f41ff-1160">sapms`<sid`> see **</span></span> |<span data-ttu-id="f41ff-1161">3600</span><span class="sxs-lookup"><span data-stu-id="f41ff-1161">3600</span></span> |<span data-ttu-id="f41ff-1162">ledigt sapms`<anySID`></span><span class="sxs-lookup"><span data-stu-id="f41ff-1162">free sapms`<anySID`></span></span> |<span data-ttu-id="f41ff-1163">SID = SAP-System-ID</span><span class="sxs-lookup"><span data-stu-id="f41ff-1163">sid = SAP-System-ID</span></span> |
| <span data-ttu-id="f41ff-1164">Gateway</span><span class="sxs-lookup"><span data-stu-id="f41ff-1164">Gateway</span></span> |<span data-ttu-id="f41ff-1165">sapgw`<nn`> finns *</span><span class="sxs-lookup"><span data-stu-id="f41ff-1165">sapgw`<nn`> see *</span></span> |<span data-ttu-id="f41ff-1166">3301</span><span class="sxs-lookup"><span data-stu-id="f41ff-1166">3301</span></span> |<span data-ttu-id="f41ff-1167">Ledigt</span><span class="sxs-lookup"><span data-stu-id="f41ff-1167">free</span></span> |<span data-ttu-id="f41ff-1168">SAP-gateway som används för CPIC och RFC kommunikation</span><span class="sxs-lookup"><span data-stu-id="f41ff-1168">SAP gateway, used for CPIC and RFC communication</span></span> |
| <span data-ttu-id="f41ff-1169">SAP-router</span><span class="sxs-lookup"><span data-stu-id="f41ff-1169">SAP router</span></span> |<span data-ttu-id="f41ff-1170">sapdp99</span><span class="sxs-lookup"><span data-stu-id="f41ff-1170">sapdp99</span></span> |<span data-ttu-id="f41ff-1171">3299</span><span class="sxs-lookup"><span data-stu-id="f41ff-1171">3299</span></span> |<span data-ttu-id="f41ff-1172">Ledigt</span><span class="sxs-lookup"><span data-stu-id="f41ff-1172">free</span></span> |<span data-ttu-id="f41ff-1173">Endast CI (central instans) Tjänstnamn kan omtilldelas i /etc/services till ett godtyckligt värde efter installationen.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1173">Only CI (central instance) Service names can be reassigned in /etc/services to an arbitrary value after installation.</span></span> |

<span data-ttu-id="f41ff-1174">*) nn = SAP-instansnummer</span><span class="sxs-lookup"><span data-stu-id="f41ff-1174">*) nn = SAP Instance Number</span></span>

<span data-ttu-id="f41ff-1175">*) sid = SAP-System-ID</span><span class="sxs-lookup"><span data-stu-id="f41ff-1175">**) sid = SAP-System-ID</span></span>

<span data-ttu-id="f41ff-1176">Mer detaljerad information om portar som behövs för olika SAP produkter eller tjänster som SAP produkter hittar du här <http://scn.sap.com/docs/DOC-17124>.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1176">More detailed information on ports required for different SAP products or services by SAP products can be found here <http://scn.sap.com/docs/DOC-17124>.</span></span>
<span data-ttu-id="f41ff-1177">Med det här dokumentet bör du kunna öppna dedikerade portarna i VPN-enheten krävs för specifika SAP-produkter och scenarier.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1177">With this document you should be able to open dedicated ports in the VPN device necessary for specific SAP products and scenarios.</span></span>

<span data-ttu-id="f41ff-1178">Andra säkerhetsmetoder när du distribuerar virtuella datorer i ett sådant scenario är att skapa en [Nätverkssäkerhetsgruppen] [ virtual-networks-nsg] att definiera regler för åtkomst.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1178">Other security measures when deploying VMs in such a scenario could be to create a [Network Security Group][virtual-networks-nsg] to define access rules.</span></span>

### <a name="dealing-with-different-virtual-machine-series"></a><span data-ttu-id="f41ff-1179">Med en annan virtuell dator-serie</span><span class="sxs-lookup"><span data-stu-id="f41ff-1179">Dealing with different Virtual Machine Series</span></span>
<span data-ttu-id="f41ff-1180">Under de senaste 12 månaderna Microsoft lagt till många fler VM-typer som skiljer sig något i antal vCPUs, minne eller viktigare på maskinvara som den körs på.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1180">In the course of last 12 months Microsoft added many more VM types that differ either in number of vCPUs, memory or more important on hardware it is running on.</span></span> <span data-ttu-id="f41ff-1181">Inte alla dessa virtuella datorer stöds med SAP (se stöds VM typer i SAP-kommentar [1928533]).</span><span class="sxs-lookup"><span data-stu-id="f41ff-1181">Not all those VMs are supported with SAP (see supported VM types in SAP Note [1928533]).</span></span> <span data-ttu-id="f41ff-1182">Vissa av dessa virtuella datorer körs på olika värden maskinvara generationer.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1182">Some of those VMs run on different host hardware generations.</span></span> <span data-ttu-id="f41ff-1183">Dessa värden maskinvara generationer distribueras om i Granulariteten för en Azure-Skalningsenhet.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1183">These host hardware generations are getting deployed in the granularity of an Azure Scale-Unit.</span></span> <span data-ttu-id="f41ff-1184">Sätt fall kan uppstå där olika VM-storlekar som du valde kan inte köras på samma Skalningsenheten.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1184">Means cases may arise where the different VM sizes you chose can’t be run on the same Scale-Unit.</span></span> <span data-ttu-id="f41ff-1185">En Tillgänglighetsuppsättning har begränsad möjlighet att span skalenheter baserat på olika typer av maskinvara.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1185">An Availability Set is limited in the ability to span Scale-Units based of different hardware.</span></span>  <span data-ttu-id="f41ff-1186">T.ex.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1186">E.g.</span></span> <span data-ttu-id="f41ff-1187">Om du vill köra DBMS på A5 A11 VM- och programnivå SAP på G-serien virtuella datorer, skulle du tvungen att distribuera en enda SAP-system eller annan SAP-system inom olika Tillgänglighetsuppsättningar.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1187">if you want to run the DBMS on A5-A11 VMs and the SAP application layer on G-Series VMs, you would be forced to deploy a single SAP system or different SAP systems within different Availability Sets.</span></span>

#### <a name="printing-on-a-local-network-printer-from-sap-instance-in-azure"></a><span data-ttu-id="f41ff-1188">Skriva ut på en lokal nätverksskrivare från SAP-instans i Azure</span><span class="sxs-lookup"><span data-stu-id="f41ff-1188">Printing on a local network printer from SAP instance in Azure</span></span>
##### <a name="printing-over-tcpip-in-cross-premises-scenario"></a><span data-ttu-id="f41ff-1189">Utskrift över TCP/IP i scenarion med flera lokaler</span><span class="sxs-lookup"><span data-stu-id="f41ff-1189">Printing over TCP/IP in Cross-Premises scenario</span></span>
<span data-ttu-id="f41ff-1190">Ställa in lokala TCP/IP baserat nätverksskrivare i en Azure VM är den totala desamma som företagets nätverk, förutsatt att du har en VPN plats-till-plats-tunneln eller ExpressRoute-anslutning upprättas.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1190">Setting up your on-premises TCP/IP based network printers in an Azure VM is overall the same as in your corporate network, assuming you do have a VPN Site-To-Site tunnel or ExpressRoute connection established.</span></span>

- - -
> ![Windows][Logo_Windows] <span data-ttu-id="f41ff-1192">Windows</span><span class="sxs-lookup"><span data-stu-id="f41ff-1192">Windows</span></span>
>
> <span data-ttu-id="f41ff-1193">Gör så här:</span><span class="sxs-lookup"><span data-stu-id="f41ff-1193">To do this:</span></span>
>
> * <span data-ttu-id="f41ff-1194">Vissa nätverksskrivare har en konfigurationsguide som gör det enkelt att konfigurera din skrivare i en Azure VM.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1194">Some network printers come with a configuration wizard which makes it easy to set up your printer in an Azure VM.</span></span> <span data-ttu-id="f41ff-1195">Om inga guiden program har distribuerats med skrivaren är ”manuell” sätt att konfigurera skrivaren att skapa en ny TCP/IP-skrivarport.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1195">If no wizard software has been distributed with the printer the “manual” way to set up the printer is to create a new TCP/IP printer port.</span></span>
> * <span data-ttu-id="f41ff-1196">Öppna Kontrollpanelen -> enheter och skrivare > Lägg till en skrivare</span><span class="sxs-lookup"><span data-stu-id="f41ff-1196">Open Control Panel -> Devices and Printers -> Add a printer</span></span>
> * <span data-ttu-id="f41ff-1197">Välj Lägg till en skrivare med hjälp av en TCP/IP-adress eller värdnamn</span><span class="sxs-lookup"><span data-stu-id="f41ff-1197">Choose Add a printer using a TCP/IP address or hostname</span></span>
> * <span data-ttu-id="f41ff-1198">Ange IP-adressen för skrivaren</span><span class="sxs-lookup"><span data-stu-id="f41ff-1198">Type in the IP address of the printer</span></span>
> * <span data-ttu-id="f41ff-1199">Skrivarport standard 9100</span><span class="sxs-lookup"><span data-stu-id="f41ff-1199">Printer Port standard 9100</span></span>
> * <span data-ttu-id="f41ff-1200">Installera rätt skrivardrivrutin manuellt om det behövs.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1200">If necessary install the appropriate printer driver manually.</span></span>
>
> ![Linux][Logo_Linux] <span data-ttu-id="f41ff-1202">Linux</span><span class="sxs-lookup"><span data-stu-id="f41ff-1202">Linux</span></span>
>
> * <span data-ttu-id="f41ff-1203">som standard procedur för att installera en skrivare i nätverket för Windows bara uppföljning</span><span class="sxs-lookup"><span data-stu-id="f41ff-1203">like for Windows just follow the standard procedure to install a network printer</span></span>
> * <span data-ttu-id="f41ff-1204">Följ bara offentliga Linux-guider för [SUSE](https://www.suse.com/documentation/sles-12/book_sle_deployment/data/sec_y2_hw_print.html) eller [Red Hat](https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/6/html/Deployment_Guide/sec-Printer_Configuration.html) på hur du lägger till en skrivare.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1204">just follow the public Linux guides for [SUSE](https://www.suse.com/documentation/sles-12/book_sle_deployment/data/sec_y2_hw_print.html) or [Red Hat](https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/6/html/Deployment_Guide/sec-Printer_Configuration.html) on how to add a printer.</span></span>
>
>

- - -
![Nätverket utskrift][planning-guide-figure-2200]

##### <a name="host-based-printer-over-smb-shared-printer-in-cross-premises-scenario"></a><span data-ttu-id="f41ff-1206">Värdbaserad skrivare över SMB (delad skrivare) i scenarion med flera lokaler</span><span class="sxs-lookup"><span data-stu-id="f41ff-1206">Host-based printer over SMB (shared printer) in Cross-Premises scenario</span></span>
<span data-ttu-id="f41ff-1207">Värdbaserad skrivare är inte nätverks-kompatibla avsiktligt.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1207">Host-based printers are not network-compatible by design.</span></span> <span data-ttu-id="f41ff-1208">Men en värdbaserad skrivare kan delas mellan datorer i ett nätverk som skrivaren är ansluten till en dator som ska slås på.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1208">But a host-based printer can be shared among computers on a network as long as the printer is connected to a powered-on computer.</span></span> <span data-ttu-id="f41ff-1209">Ansluta ditt företags nätverk plats-till-plats eller ExpressRoute och delar en lokal skrivare.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1209">Connect your corporate network either Site-To-Site or ExpressRoute and share your local printer.</span></span> <span data-ttu-id="f41ff-1210">SMB-protokollet använder NetBIOS i stället för DNS som namntjänst.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1210">The SMB protocol uses NetBIOS instead of DNS as name service.</span></span> <span data-ttu-id="f41ff-1211">NetBIOS-värdnamn kan skilja sig från DNS-värdnamn.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1211">The NetBIOS host name can be different from the DNS host name.</span></span> <span data-ttu-id="f41ff-1212">I vanliga fall har NetBIOS-värdnamn och DNS-värdnamnet är identiska.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1212">The standard case is that the NetBIOS host name and the DNS host name are identical.</span></span> <span data-ttu-id="f41ff-1213">DNS-domänen gör inte mening i området NetBIOS-namn.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1213">The DNS domain does not make sense in the NetBIOS name space.</span></span> <span data-ttu-id="f41ff-1214">Det fullständigt kvalificerade DNS-värdnamn som består av DNS-värdnamn och DNS-domän måste därför inte användas i området NetBIOS-namn.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1214">Accordingly, the fully qualified DNS host name consisting of the DNS host name and DNS domain must not be used in the NetBIOS name space.</span></span>

<span data-ttu-id="f41ff-1215">Skrivarresursen identifieras med ett unikt namn i nätverket:</span><span class="sxs-lookup"><span data-stu-id="f41ff-1215">The printer share is identified by a unique name in the network:</span></span>

* <span data-ttu-id="f41ff-1216">Värdnamnet för den SMB-Server (alltid behövs).</span><span class="sxs-lookup"><span data-stu-id="f41ff-1216">Host name of the SMB host (always needed).</span></span>
* <span data-ttu-id="f41ff-1217">Namnet på resursen (alltid behövs).</span><span class="sxs-lookup"><span data-stu-id="f41ff-1217">Name of the share (always needed).</span></span>
* <span data-ttu-id="f41ff-1218">Namnet på domänen är om delar skrivaren inte i samma domän som SAP-system.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1218">Name of the domain if printer share is not in the same domain as SAP system.</span></span>
* <span data-ttu-id="f41ff-1219">Ett användarnamn och ett lösenord kan dessutom krävas för att komma åt skrivarresursen.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1219">Additionally, a user name and a password may be required to access the printer share.</span></span>

<span data-ttu-id="f41ff-1220">Anvisningar:</span><span class="sxs-lookup"><span data-stu-id="f41ff-1220">How to:</span></span>

- - -
> ![Windows][Logo_Windows] <span data-ttu-id="f41ff-1222">Windows</span><span class="sxs-lookup"><span data-stu-id="f41ff-1222">Windows</span></span>
>
> <span data-ttu-id="f41ff-1223">Dela en lokal skrivare.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1223">Share your local printer.</span></span>
> <span data-ttu-id="f41ff-1224">Öppna Utforskaren och anger resursnamnet för skrivaren i Azure-VM.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1224">In the Azure VM open the Windows Explorer and type in the share name of the printer.</span></span>
> <span data-ttu-id="f41ff-1225">En skrivare installationsguiden hjälper dig igenom installationsprocessen.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1225">A printer installation wizard will guide you through the installation process.</span></span>
>
> ![Linux][Logo_Linux] <span data-ttu-id="f41ff-1227">Linux</span><span class="sxs-lookup"><span data-stu-id="f41ff-1227">Linux</span></span>
>
> <span data-ttu-id="f41ff-1228">Här följer några exempel på dokumentation om hur du konfigurerar nätverksskrivare i Linux eller inklusive kapitel rörande utskrift i Linux.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1228">Here are some examples of documentation about configuring network printers in Linux or including a chapter regarding printing in Linux.</span></span> <span data-ttu-id="f41ff-1229">Den fungerar på samma sätt i en Azure Linux VM så länge som den virtuella datorn är en del av en VPN-anslutning:</span><span class="sxs-lookup"><span data-stu-id="f41ff-1229">It will work the same way in an Azure Linux VM as long as the VM is part of a VPN :</span></span>
>
> * <span data-ttu-id="f41ff-1230">SLES <_Share_or_Windows_Share https://en.opensuse.org/SDB:Printing_via_SMB_ (Samba)></span><span class="sxs-lookup"><span data-stu-id="f41ff-1230">SLES <https://en.opensuse.org/SDB:Printing_via_SMB_(Samba)_Share_or_Windows_Share></span></span>
> * <span data-ttu-id="f41ff-1231">RHEL <https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/6/html/Deployment_Guide/s1-printing-smb-printer.html></span><span class="sxs-lookup"><span data-stu-id="f41ff-1231">RHEL <https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/6/html/Deployment_Guide/s1-printing-smb-printer.html></span></span>
>
>

- - -
##### <a name="usb-printer-printer-forwarding"></a><span data-ttu-id="f41ff-1232">USB-skrivare (skrivare vidarebefordran)</span><span class="sxs-lookup"><span data-stu-id="f41ff-1232">USB Printer (printer forwarding)</span></span>
<span data-ttu-id="f41ff-1233">Fjärrskrivbordstjänster förmåga att ge användare åtkomst till sina enheter för lokal skrivare i en fjärrsession är inte tillgängliga i Azure.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1233">In Azure the ability of the Remote Desktop Services to provide users the access to their local printer devices in a remote session is not available.</span></span>

- - -
> ![Windows][Logo_Windows] <span data-ttu-id="f41ff-1235">Windows</span><span class="sxs-lookup"><span data-stu-id="f41ff-1235">Windows</span></span>
>
> <span data-ttu-id="f41ff-1236">Mer information om utskrift i Windows finns här: <http://technet.microsoft.com/library/jj590748.aspx>.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1236">More details on printing with Windows can be found here: <http://technet.microsoft.com/library/jj590748.aspx>.</span></span>
>
>

- - -
#### <a name="integration-of-sap-azure-systems-into-correction-and-transport-system-tms-in-cross-premises"></a><span data-ttu-id="f41ff-1237">Integrering av SAP Azure system till korrigering och transportsystem (Proportionerlig) mellan platser</span><span class="sxs-lookup"><span data-stu-id="f41ff-1237">Integration of SAP Azure Systems into Correction and Transport System (TMS) in Cross-Premises</span></span>
<span data-ttu-id="f41ff-1238">SAP ändrings- och Transport System (Proportionerlig) måste konfigureras för att exportera och importera begäran över system i liggande.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1238">The SAP Change and Transport System (TMS) needs to be configured to export and import transport request across systems in the landscape.</span></span> <span data-ttu-id="f41ff-1239">Vi förutsätter att development instanser av ett SAP-system (utveckling) finns i Azure quality assurance (QA) och produktiva system (PRD) är lokalt.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1239">We assume that the development instances of an SAP system (DEV) are located in Azure whereas the quality assurance (QA) and productive systems (PRD) are on-premises.</span></span> <span data-ttu-id="f41ff-1240">Vi förutsätter dessutom att det finns en central transport-katalog.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1240">Furthermore, we assume that there is a central transport directory.</span></span>

##### <a name="configuring-the-transport-domain"></a><span data-ttu-id="f41ff-1241">Konfigurera Transport-domän</span><span class="sxs-lookup"><span data-stu-id="f41ff-1241">Configuring the Transport Domain</span></span>
<span data-ttu-id="f41ff-1242">Konfigurera Transport domänen på datorn som du angett som domänkontrollant Transport enligt beskrivningen i [konfigurerar domänkontrollanten Transport](http://help.sap.com/erp2005_ehp_04/helpdata/en/44/b4a0b47acc11d1899e0000e829fbbd/content.htm).</span><span class="sxs-lookup"><span data-stu-id="f41ff-1242">Configure your Transport Domain on the system you designated as the Transport Domain Controller as described in [Configuring the Transport Domain Controller](http://help.sap.com/erp2005_ehp_04/helpdata/en/44/b4a0b47acc11d1899e0000e829fbbd/content.htm).</span></span> <span data-ttu-id="f41ff-1243">En systemanvändare TMSADM kommer att skapas och nödvändiga RFC målet kommer att skapas.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1243">A system user TMSADM will be created and the required RFC destination will be generated.</span></span> <span data-ttu-id="f41ff-1244">Du kan kontrollera anslutningarna RFC med transaktion SM59.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1244">You may check these RFC connections using the transaction SM59.</span></span> <span data-ttu-id="f41ff-1245">Värdnamnsmatchning måste aktiveras i transport-domän.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1245">Hostname resolution must be enabled across your transport domain.</span></span>

<span data-ttu-id="f41ff-1246">Anvisningar:</span><span class="sxs-lookup"><span data-stu-id="f41ff-1246">How to:</span></span>

* <span data-ttu-id="f41ff-1247">I vårt scenario valt lokala QAS system blir CTS-domänkontrollanten.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1247">In our scenario we decided the on-premises QAS system will be the CTS domain controller.</span></span> <span data-ttu-id="f41ff-1248">Anropa transaktion STM.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1248">Call transaction STMS.</span></span> <span data-ttu-id="f41ff-1249">Dialogrutan Proportionerlig visas.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1249">The TMS dialog box appears.</span></span> <span data-ttu-id="f41ff-1250">En dialogruta för Konfigurera Transport domän visas.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1250">A Configure Transport Domain dialog box is displayed.</span></span> <span data-ttu-id="f41ff-1251">(Den här dialogrutan visas bara om du ännu inte har konfigurerat en transport-domän.)</span><span class="sxs-lookup"><span data-stu-id="f41ff-1251">(This dialog box only appears if you have not yet configured a transport domain.)</span></span>
* <span data-ttu-id="f41ff-1252">Kontrollera att den automatiskt skapade användaren TMSADM är auktoriserad (SM59 -> ABAP anslutning -> TMSADM@E61.DOMAIN_E61 -> information -> Utilities(M) auktorisering Test ->).</span><span class="sxs-lookup"><span data-stu-id="f41ff-1252">Make sure that the automatically created user TMSADM is authorized (SM59 -> ABAP Connection -> TMSADM@E61.DOMAIN_E61 -> Details -> Utilities(M) -> Authorization Test).</span></span> <span data-ttu-id="f41ff-1253">Den första skärmen i transaktionen STM ska visa att systemet SAP nu fungerar som domänkontrollant i domänen transport som visas här:</span><span class="sxs-lookup"><span data-stu-id="f41ff-1253">The initial screen of transaction STMS should show that this SAP System is now functioning as the controller of the transport domain as shown here:</span></span>

![Första skärmen transaktion STM på domänkontrollanten][planning-guide-figure-2300]

#### <a name="including-sap-systems-in-the-transport-domain"></a><span data-ttu-id="f41ff-1255">Inklusive SAP-system i domänen Transport</span><span class="sxs-lookup"><span data-stu-id="f41ff-1255">Including SAP Systems in the Transport Domain</span></span>
<span data-ttu-id="f41ff-1256">Sekvens med inklusive en SAP-system i en domän för transport ser ut som följer:</span><span class="sxs-lookup"><span data-stu-id="f41ff-1256">The sequence of including an SAP system in a transport domain looks as follows:</span></span>

* <span data-ttu-id="f41ff-1257">Gå till transportsystem (klient 000) och anropa transaktion STM på systemets DEV i Azure.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1257">On the DEV system in Azure go to the transport system (Client 000) and call transaction STMS.</span></span> <span data-ttu-id="f41ff-1258">Välj andra konfiguration från dialogrutan och fortsätt med inkluderar System i domänen.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1258">Choose Other Configuration from the dialog box and continue with Include System in Domain.</span></span> <span data-ttu-id="f41ff-1259">Ange den domänkontrollant som målvärden ([inklusive SAP-system i domänen Transport](http://help.sap.com/erp2005_ehp_04/helpdata/en/44/b4a0c17acc11d1899e0000e829fbbd/content.htm?frameset=/en/44/b4a0b47acc11d1899e0000e829fbbd/frameset.htm)).</span><span class="sxs-lookup"><span data-stu-id="f41ff-1259">Specify the Domain Controller as target host ([Including SAP Systems in the Transport Domain](http://help.sap.com/erp2005_ehp_04/helpdata/en/44/b4a0c17acc11d1899e0000e829fbbd/content.htm?frameset=/en/44/b4a0b47acc11d1899e0000e829fbbd/frameset.htm)).</span></span> <span data-ttu-id="f41ff-1260">Systemet nu väntar på att tas med i domänen transport.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1260">The system is now waiting to be included in the transport domain.</span></span>
* <span data-ttu-id="f41ff-1261">Av säkerhetsskäl måste du sedan gå tillbaka till domänkontrollanten för att bekräfta din begäran.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1261">For security reasons, you then have to go back to the domain controller to confirm your request.</span></span> <span data-ttu-id="f41ff-1262">Välj Systemöversikt och Godkänn av systemet väntar.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1262">Choose System Overview and Approve of the waiting system.</span></span> <span data-ttu-id="f41ff-1263">Bekräfta uppmaningen och konfigurationen som ska distribueras.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1263">Then confirm the prompt and the configuration will be distributed.</span></span>

<span data-ttu-id="f41ff-1264">SAP systemet innehåller nu information om alla övriga SAP system i domänen transport.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1264">This SAP system now contains the necessary information about all the other SAP systems in the transport domain.</span></span> <span data-ttu-id="f41ff-1265">Systemets SAP-adressdata skickas till alla andra SAP-system på samma gång och SAP-systemet har angetts i profilen för transport av kontrollprogrammet för transporten.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1265">At the same time, the address data of the new SAP system is sent to all the other SAP systems, and the SAP system is entered in the transport profile of the transport control program.</span></span> <span data-ttu-id="f41ff-1266">Kontrollera om RFC: er och åtkomst till Transportkatalogen i domänen att fungera.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1266">Check whether RFCs and access to the transport directory of the domain work.</span></span>

<span data-ttu-id="f41ff-1267">Fortsätta med konfigurationen systemet transport som vanligt beskrivs i dokumentationen för [ändrings- och Transport System](http://help.sap.com/saphelp_nw70ehp3/helpdata/en/48/c4300fca5d581ce10000000a42189c/content.htm?frameset=/en/44/b4a0b47acc11d1899e0000e829fbbd/frameset.htm).</span><span class="sxs-lookup"><span data-stu-id="f41ff-1267">Continue with the configuration of your transport system as usual as described in the documentation [Change and Transport System](http://help.sap.com/saphelp_nw70ehp3/helpdata/en/48/c4300fca5d581ce10000000a42189c/content.htm?frameset=/en/44/b4a0b47acc11d1899e0000e829fbbd/frameset.htm).</span></span>

<span data-ttu-id="f41ff-1268">Anvisningar:</span><span class="sxs-lookup"><span data-stu-id="f41ff-1268">How to:</span></span>

* <span data-ttu-id="f41ff-1269">Kontrollera att din STM lokalt är korrekt konfigurerad.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1269">Make sure your STMS on premises is configured correctly.</span></span>
* <span data-ttu-id="f41ff-1270">Se till att värdnamnet för domänkontrollanten Transport kan lösas genom den virtuella datorn på Azure och vice visa.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1270">Make sure the hostname of the Transport Domain Controller can be resolved by your virtual machine on Azure and vice visa.</span></span>
* <span data-ttu-id="f41ff-1271">Anropet transaktion STM -> andra Configuration -> inkluderar System i domänen.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1271">Call transaction STMS -> Other Configuration -> Include System in Domain.</span></span>
* <span data-ttu-id="f41ff-1272">Bekräfta anslutningen i på lokala Proportionerlig systemet.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1272">Confirm the connection in the on premises TMS system.</span></span>
* <span data-ttu-id="f41ff-1273">Konfigurera transport vägar, grupper och lager som vanligt.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1273">Configure transport routes, groups and layers as usual.</span></span>

<span data-ttu-id="f41ff-1274">I plats-till-plats anslutna mellan lokala scenarier, kan fördröjning mellan lokala och Azure fortfarande vara betydande.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1274">In site-to-site connected Cross-Premises scenarios, the latency between on-premises and Azure still can be substantial.</span></span> <span data-ttu-id="f41ff-1275">Om vi följer sekvensen för att transportera objekt genom utveckling och testsystem till produktion eller tänka på att tillämpa transporter eller stöd för paket till de olika system, inser du att, beroende på platsen för central transport katalog, några av systemen uppstår fördröjningar läsning eller skrivning av data i transportkatalogen centrala.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1275">If we follow the sequence of transporting objects through development and test systems to production or think about applying transports or support packages to the different systems, you realize that, dependent on the location of the central transport directory, some of the systems will encounter high latency reading or writing data in the central transport directory.</span></span> <span data-ttu-id="f41ff-1276">Situationen liknar SAP liggande konfigurationer där olika system sprids via olika datacenter med stor avstånd mellan-datacenter.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1276">The situation is similar to SAP landscape configurations where the different systems are spread through different data centers with substantial distance between the data centers.</span></span>

<span data-ttu-id="f41ff-1277">För att undvika sådana svarstid och ha system fungerar Snabb läsning eller skrivning till eller från Transportkatalogen, kan du konfigurera två STM transport domäner (en för lokalt och en med system i Azure och länka transport-domäner.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1277">In order to work around such latency and have the systems work fast in reading or writing to or from the transport directory, you can setup two STMS transport domains (one for on-premises and one with the systems in Azure and link the transport domains.</span></span> <span data-ttu-id="f41ff-1278">Kontrollera den här dokumentationen som beskriver principerna bakom detta begrepp i SAP Proportionerlig: <http://help.sap.com/saphelp_me60/helpdata/en/c4/6045377b52253de10000009b38f889/content.htm?frameset=/en/57/38dd924eb711d182bf0000e829fbfe/frameset.htm>.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1278">Please check this documentation which explains the principles behind this concept in the SAP TMS: <http://help.sap.com/saphelp_me60/helpdata/en/c4/6045377b52253de10000009b38f889/content.htm?frameset=/en/57/38dd924eb711d182bf0000e829fbfe/frameset.htm>.</span></span>

<span data-ttu-id="f41ff-1279">Anvisningar:</span><span class="sxs-lookup"><span data-stu-id="f41ff-1279">How to:</span></span>

* <span data-ttu-id="f41ff-1280">Konfigurera en transport domän på varje plats (lokalt och Azure) med transaktion STM <http://help.sap.com/saphelp_nw70ehp3/helpdata/en/44/b4a0b47acc11d1899e0000e829fbbd/content.htm></span><span class="sxs-lookup"><span data-stu-id="f41ff-1280">Set up a transport domain on each location (on-premises and Azure) using transaction STMS <http://help.sap.com/saphelp_nw70ehp3/helpdata/en/44/b4a0b47acc11d1899e0000e829fbbd/content.htm></span></span>
* <span data-ttu-id="f41ff-1281">Länka domäner med en länk i domänen och bekräfta länken mellan de två domänerna.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1281">Link the domains with a domain link and confirm the link between the two domains.</span></span>
  <span data-ttu-id="f41ff-1282"><http://help.SAP.com/saphelp_nw73ehp1/helpdata/en/a3/139838280c4f18e10000009b38f8cf/Content.htm></span><span class="sxs-lookup"><span data-stu-id="f41ff-1282"><http://help.sap.com/saphelp_nw73ehp1/helpdata/en/a3/139838280c4f18e10000009b38f8cf/content.htm></span></span>
* <span data-ttu-id="f41ff-1283">Distribuera konfigurationen av det länkade systemet.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1283">Distribute the configuration to the linked system.</span></span>

#### <a name="rfc-traffic-between-sap-instances-located-in-azure-and-on-premises-cross-premises"></a><span data-ttu-id="f41ff-1284">RFC trafik mellan SAP-instanser som finns i Azure och lokala (mellan platser)</span><span class="sxs-lookup"><span data-stu-id="f41ff-1284">RFC traffic between SAP instances located in Azure and on-premises (Cross-Premises)</span></span>
<span data-ttu-id="f41ff-1285">RFC trafik mellan datorer som finns lokalt och i Azure måste ska fungera.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1285">RFC traffic between systems which are on-premises and in Azure needs to work.</span></span> <span data-ttu-id="f41ff-1286">Att konfigurera en anslutning anropet transaktion SM59 i ett källsystem där du måste definiera ett RFC-anslutning till målsystemet.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1286">To setup a connection call transaction SM59 in a source system where you need to define an RFC connection towards the target system.</span></span> <span data-ttu-id="f41ff-1287">Konfigurationen liknar standardinställningen av en RFC-anslutning.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1287">The configuration is similar to the standard setup of an RFC Connection.</span></span>

<span data-ttu-id="f41ff-1288">Vi förutsätter som i scenariot mellan platser, virtuella datorer som kör SAP-system som behöver kommunicera med varandra i samma domän.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1288">We assume that in the Cross-Premises scenario, the VMs which run SAP systems that need to communicate with each other are in the same domain.</span></span> <span data-ttu-id="f41ff-1289">Därför installationen av en RFC-anslutning mellan SAP-system skiljer sig inte från konfigurationsstegen och indata i lokala scenarier.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1289">Therefore the setup of an RFC connection between SAP systems does not differ from the setup steps and inputs in on-premises scenarios.</span></span>

#### <a name="accessing-local-fileshares-from-sap-instances-located-in-azure-or-vice-versa"></a><span data-ttu-id="f41ff-1290">Åtkomst till ”lokal' fileshares från SAP-instanser som finns i Azure eller tvärtom</span><span class="sxs-lookup"><span data-stu-id="f41ff-1290">Accessing ‘local’ fileshares from SAP instances located in Azure or vice versa</span></span>
<span data-ttu-id="f41ff-1291">SAP-instanser som finns i Azure som behöver åtkomst till filresurser som är i företagets lokaler.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1291">SAP instances located in Azure need to access file shares which are within the corporate premises.</span></span> <span data-ttu-id="f41ff-1292">Dessutom behöver lokal SAP instanser åtkomst till filresurser som finns i Azure.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1292">In addition, on-premises SAP instances need to access file shares which are located in Azure.</span></span> <span data-ttu-id="f41ff-1293">Om du vill aktivera filresurser måste du konfigurera behörigheter och delningsalternativ på det lokala systemet.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1293">To enable the file shares you must configure the permissions and sharing options on the local system.</span></span> <span data-ttu-id="f41ff-1294">Se till att öppna portar i VPN eller ExpressRoute-anslutning mellan Azure och ditt datacenter.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1294">Make sure to open the ports on the VPN or ExpressRoute connection between Azure and your datacenter.</span></span>

## <a name="supportability"></a><span data-ttu-id="f41ff-1295">Support</span><span class="sxs-lookup"><span data-stu-id="f41ff-1295">Supportability</span></span>
### <span data-ttu-id="f41ff-1296"><a name="6f0a47f3-a289-4090-a053-2521618a28c3"></a>Azure övervakningslösning för SAP</span><span class="sxs-lookup"><span data-stu-id="f41ff-1296"><a name="6f0a47f3-a289-4090-a053-2521618a28c3"></a>Azure Monitoring Solution for SAP</span></span>
<span data-ttu-id="f41ff-1297">För att aktivera övervakning av uppdrag kritiska SAP-system på Azure SAP övervakningsverktyg SAPOSCOL eller SAP Värdagenten hämta data från Azure virtuella tjänstvärden via ett Azure-övervakning tillägg för SAP.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1297">In order to enable the monitoring of mission critical SAP systems on Azure the SAP monitoring tools SAPOSCOL or SAP Host Agent get data off the Azure Virtual Machine Service host via an Azure Monitoring Extension for SAP.</span></span> <span data-ttu-id="f41ff-1298">Eftersom kraven av SAP var mycket specifik till SAP-program, valt Microsoft att inte Allmänt genomföra de nödvändiga funktionerna i Azure, men lämna det för kunder att distribuera de nödvändiga komponenter för övervakning och konfigurationer till sina virtuella datorer som körs i Azure.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1298">Since the demands by SAP were very specific to SAP applications, Microsoft decided not to generically implement the required functionality into Azure, but leave it for customers to deploy the necessary monitoring components and configurations to their Virtual Machines running in Azure.</span></span> <span data-ttu-id="f41ff-1299">Dock automatiskt distribution och livscykeln för hantering av övervakning komponenter främst av Azure.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1299">However, deployment and lifecycle management of the monitoring components will be mostly automated by Azure.</span></span>

#### <a name="solution-design"></a><span data-ttu-id="f41ff-1300">Lösningsdesign</span><span class="sxs-lookup"><span data-stu-id="f41ff-1300">Solution design</span></span>
<span data-ttu-id="f41ff-1301">Lösningen som utvecklats för att aktivera övervakning av SAP baseras på arkitekturen på Azure VM-agenten och ramverket.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1301">The solution developed to enable SAP Monitoring is based on the architecture of Azure VM Agent and Extension framework.</span></span> <span data-ttu-id="f41ff-1302">Uppfattning av framework Azure VM-agenten och tillägget är att tillåta installation av programvara program tillgängliga i galleriet Azure VM-tillägget på en virtuell dator.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1302">The idea of the Azure VM Agent and Extension framework is to allow installation of software application(s) available in the Azure VM Extension gallery within a VM.</span></span> <span data-ttu-id="f41ff-1303">Principen syftet med detta begrepp är att (i fall Azure övervakning tillägget för SAP) distribution av särskilda funktioner i en virtuell dator och konfigurationen av sådan programvara vid tidpunkten för distribution.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1303">The principle idea behind this concept is to allow (in cases like the Azure Monitoring Extension for SAP), the deployment of special functionality into a VM and the configuration of such software at deployment time.</span></span>

<span data-ttu-id="f41ff-1304">Sedan februari 2014 injekteras 'Azure VM-agenten, som möjliggör hantering av specifika Azure VM-tillägg i den virtuella datorn i virtuella Windows-datorer som standard på Skapa en virtuell dator i Azure Portal.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1304">Since February 2014, the ‘Azure VM Agent’ that enables handling of specific Azure VM Extensions within the VM is injected into Windows VMs by default on VM creation in the Azure Portal.</span></span> <span data-ttu-id="f41ff-1305">Agenten är redan en del av Azure Marketplace-avbildning vid SUSE eller Red Hat Linux den virtuella datorn.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1305">In case of SUSE or Red Hat Linux the VM agent is already part of the Azure Marketplace image.</span></span> <span data-ttu-id="f41ff-1306">Om en skulle överför en Linux VM från lokal till Azure VM-agenten måste installeras manuellt.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1306">In case one would upload a Linux VM from on-premises to Azure the VM agent has to be installed manually.</span></span>

<span data-ttu-id="f41ff-1307">De grundläggande byggstenarna för övervakning lösningen i Azure för SAP ser ut så här:</span><span class="sxs-lookup"><span data-stu-id="f41ff-1307">The basic building blocks of the Monitoring solution in Azure for SAP looks like this:</span></span>

![Tillägg för Microsoft Azure-komponenter][planning-guide-figure-2400]

<span data-ttu-id="f41ff-1309">I block diagrammet ovan visas en del av övervakningslösning SAP finns i Azure VM-avbildning och Azure-tillägg-galleriet som är en globalt replikerad databas som hanteras av Azure-åtgärder.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1309">As shown in the block diagram above, one part of the monitoring solution for SAP is hosted in the Azure VM Image and Azure Extension Gallery which is a globally replicated repository that is managed by Azure Operations.</span></span> <span data-ttu-id="f41ff-1310">Ansvarar för gemensamma SAP/MS-teamet arbetar med Azure implementeringen av SAP ska fungera med Azure-åtgärder för att publicera nya versioner av Azure övervakning tillägget för SAP.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1310">It is the responsibility of the joint SAP/MS team working on the Azure implementation of SAP to work with Azure Operations to publish new versions of the Azure Monitoring Extension for SAP.</span></span> <span data-ttu-id="f41ff-1311">Azure övervakning tillägget för SAP använder tillägget för Microsoft Azure Diagnostics (BOMULLSTUSS) eller Linux Azure Diagnostics (LAD) för att hämta nödvändig information.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1311">This Azure Monitoring Extension for SAP will use the Microsoft Azure Diagnostics (WAD) Extension or Linux Azure Diagnostics ( LAD ) to get the necessary information.</span></span>

<span data-ttu-id="f41ff-1312">När du distribuerar en ny Windows VM läggs 'Azure VM Agent' automatiskt till den virtuella datorn.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1312">When you deploy a new Windows VM, the ‘Azure VM Agent’ is automatically added into the VM.</span></span> <span data-ttu-id="f41ff-1313">Funktionen för den här agenten är att samordna inläsning och konfigurationen av Azure-tillägg för övervakning av SAP NetWeaver-system.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1313">The function of this agent is to coordinate the loading and configuration of the Azure Extensions for monitoring of SAP NetWeaver Systems.</span></span> <span data-ttu-id="f41ff-1314">För Linux virtuella datorer ingår på Azure VM-agenten redan i Azure Marketplace OS-avbildningen.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1314">For Linux VMs the Azure VM Agent is already part of the Azure Marketplace OS image.</span></span>

<span data-ttu-id="f41ff-1315">Det finns ett steg som måste utföras av kunden.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1315">However, there is a step that still needs to be executed by the customer.</span></span> <span data-ttu-id="f41ff-1316">Detta är aktivering och konfiguration av insamling av prestanda.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1316">This is the enablement and configuration of the performance collection.</span></span> <span data-ttu-id="f41ff-1317">Processen som är relaterade till konfigurationen automatiskt efter en PowerShell-skript eller CLI-kommando.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1317">The process related to the ‘configuration’ is automated by a PowerShell script or CLI command.</span></span> <span data-ttu-id="f41ff-1318">PowerShell-skriptet kan hämtas i Microsoft Azure Script Center som beskrivs i den [Deployment Guide][deployment-guide].</span><span class="sxs-lookup"><span data-stu-id="f41ff-1318">The PowerShell script can be downloaded in the Microsoft Azure Script Center as described in the [Deployment Guide][deployment-guide].</span></span>

<span data-ttu-id="f41ff-1319">Det ser ut så övergripande arkitektur i Azure övervakningslösning SAP:</span><span class="sxs-lookup"><span data-stu-id="f41ff-1319">The overall Architecture of the Azure monitoring solution for SAP looks like:</span></span>

![Azure övervakningslösning för SAP NetWeaver][planning-guide-figure-2500]

<span data-ttu-id="f41ff-1321">**Exakt anvisningar och detaljerade anvisningar för att använda dessa PowerShell-cmdlets eller CLI kommandot under distributioner, följ instruktionerna den [Deployment Guide][deployment-guide].**</span><span class="sxs-lookup"><span data-stu-id="f41ff-1321">**For the exact how-to and for detailed steps of using these PowerShell cmdlets or CLI command during deployments, follow the instructions given in the [Deployment Guide][deployment-guide].**</span></span>

### <a name="integration-of-azure-located-sap-instance-into-saprouter"></a><span data-ttu-id="f41ff-1322">Integrering av Azure finns SAP-instans i SAProuter</span><span class="sxs-lookup"><span data-stu-id="f41ff-1322">Integration of Azure located SAP instance into SAProuter</span></span>
<span data-ttu-id="f41ff-1323">SAP-instanser som körs i Azure måste vara tillgänglig från SAProuter samt.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1323">SAP instances running in Azure need to be accessible from SAProuter as well.</span></span>

![SAP-Router-nätverksanslutning][planning-guide-figure-2600]

<span data-ttu-id="f41ff-1325">En SAProuter aktiverar TCP/IP-kommunikation mellan deltagande system om det finns ingen direkt IP-anslutning.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1325">A SAProuter enables the TCP/IP communication between participating systems if there is no direct IP connection.</span></span> <span data-ttu-id="f41ff-1326">Detta ger fördelen att någon slutpunkt till slutpunkt-anslutning mellan partner för kommunikation krävs på nätverksnivån.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1326">This provides the advantage that no end-to-end connection between the communication partners is necessary on network level.</span></span> <span data-ttu-id="f41ff-1327">SAProuter lyssnar på port 3299 som standard.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1327">The SAProuter is listening on port 3299 by default.</span></span>
<span data-ttu-id="f41ff-1328">Om du vill ansluta SAP instanser via en SAProuter måste du ge SAProuter sträng och värden namn med alla försök att ansluta.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1328">To connect SAP instances through a SAProuter you need to give the SAProuter string and host name with any attempt to connect.</span></span>

## <a name="sap-netweaver-as-java"></a><span data-ttu-id="f41ff-1329">SAP NetWeaver AS Java</span><span class="sxs-lookup"><span data-stu-id="f41ff-1329">SAP NetWeaver AS Java</span></span>
<span data-ttu-id="f41ff-1330">Hittills fokus i dokumentet har SAP NetWeaver i allmänhet eller SAP NetWeaver ABAP stacken.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1330">So far the focus of the document has been SAP NetWeaver in general or the SAP NetWeaver ABAP stack.</span></span> <span data-ttu-id="f41ff-1331">I det här små avsnittet listas särskilda överväganden för SAP Java-stacken.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1331">In this small section, specific considerations for the SAP Java stack are listed.</span></span> <span data-ttu-id="f41ff-1332">En av de viktigaste SAP NetWeaver Java uteslutande baserat program är SAP Enterprise Portal.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1332">One of the most important SAP NetWeaver Java exclusively based applications is the SAP Enterprise Portal.</span></span> <span data-ttu-id="f41ff-1333">Andra SAP NetWeaver baserat program som SAP PI och SAP lösning Manager använder både SAP NetWeaver ABAP och Java-stackar.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1333">Other SAP NetWeaver based applications like SAP PI and SAP Solution Manager use both the SAP NetWeaver ABAP and Java stacks.</span></span> <span data-ttu-id="f41ff-1334">Det har därför behöver Överväg specifika aspekter som är relaterade till den SAP NetWeaver Java-stacken.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1334">Therefore, there certainly is a need to consider specific aspects related to the SAP NetWeaver Java stack as well.</span></span>

### <a name="sap-enterprise-portal"></a><span data-ttu-id="f41ff-1335">SAP Enterprise Portal</span><span class="sxs-lookup"><span data-stu-id="f41ff-1335">SAP Enterprise Portal</span></span>
<span data-ttu-id="f41ff-1336">Installationen av en SAP-Portal i en virtuell Azure-dator skiljer sig inte från en på lokal installation om du distribuerar i mellan lokala scenarier.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1336">The setup of an SAP Portal in an Azure Virtual Machine does not differ from an on premises installation if you are deploying in Cross-Premises scenarios.</span></span> <span data-ttu-id="f41ff-1337">Eftersom DNS görs av lokal, kan du göra inställningar för enskilda instanser som konfigurerade lokalt.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1337">Since the DNS is done by on-premises, the port settings of the individual instances can be done as configured on-premises.</span></span> <span data-ttu-id="f41ff-1338">Rekommendationer och begränsningar som beskrivs i det här dokumentet hittills gäller i allmänhet för ett program som SAP Enterprise Portal eller SAP NetWeaver Java-stacken.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1338">The recommendations and restrictions described in this document so far apply for an application like SAP Enterprise Portal or the SAP NetWeaver Java stack in general.</span></span>

![Exponerade SAP-portalen][planning-guide-figure-2700]

<span data-ttu-id="f41ff-1340">En särskild distributionsscenariot som vissa kunder är direkt exponering av SAP Enterprise Portal till Internet när den virtuella värden är ansluten till företagets nätverk via plats-till-plats VPN-tunnel eller ExpressRoute.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1340">A special deployment scenario by some customers is the direct exposure of the SAP Enterprise Portal to the Internet while the virtual machine host is connected to the company network via site-to-site VPN tunnel or ExpressRoute.</span></span> <span data-ttu-id="f41ff-1341">Du måste se till att vissa portar är öppna och inte blockeras av en brandvägg eller säkerhetsgrupp för sådana situationer.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1341">For such a scenario, you have to make sure that specific ports are open and not blocked by firewall or network security group.</span></span> <span data-ttu-id="f41ff-1342">Samma säkerhetsnivån måste användas när du vill ansluta till en SAP Java-instans från lokalt i en situation med endast molnet.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1342">The same mechanics would need to be applied when you want to connect to an SAP Java instance from on-premises in a Cloud-Only scenario.</span></span>

<span data-ttu-id="f41ff-1343">Den inledande URI är http (s):`<Portalserver`>: 5XX00/irj där porten utgörs av 50000 plus (Systemnumber × 100).</span><span class="sxs-lookup"><span data-stu-id="f41ff-1343">The initial portal URI is http(s):`<Portalserver`>:5XX00/irj where the port is formed by 50000 plus (Systemnumber × 100).</span></span> <span data-ttu-id="f41ff-1344">Standard portal URI SAP systemets 00 är `<dns name`>.`<azure region` >.Cloudapp.azure.com:PublicPort/irj.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1344">The default portal URI of SAP system 00 is `<dns name`>.`<azure region`>.Cloudapp.azure.com:PublicPort/irj.</span></span> <span data-ttu-id="f41ff-1345">Mer information, ta en titt en <http://help.sap.com/saphelp_nw70ehp1/helpdata/de/a2/f9d7fed2adc340ab462ae159d19509/frameset.htm>.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1345">For more details, have a look a <http://help.sap.com/saphelp_nw70ehp1/helpdata/de/a2/f9d7fed2adc340ab462ae159d19509/frameset.htm>.</span></span>

![Slutpunktskonfiguration][planning-guide-figure-2800]

<span data-ttu-id="f41ff-1347">Kontrollera den här dokumentationen om du vill anpassa URL och/eller portar för SAP Enterprise Portal:</span><span class="sxs-lookup"><span data-stu-id="f41ff-1347">If you want to customize the URL and/or ports of your SAP Enterprise Portal, please check this documentation:</span></span>

* [<span data-ttu-id="f41ff-1348">Ändra Portal-URL</span><span class="sxs-lookup"><span data-stu-id="f41ff-1348">Change Portal URL</span></span>](http://wiki.scn.sap.com/wiki/display/EP/Change+Portal+URL)
* [<span data-ttu-id="f41ff-1349">Ändra standardportnumren Portal-portnummer</span><span class="sxs-lookup"><span data-stu-id="f41ff-1349">Change Default port numbers, Portal port numbers</span></span>](http://wiki.scn.sap.com/wiki/display/NWTech/Change+Default++port+numbers%2C+Portal+port+numbers)

<a name="7cf991a1-badd-40a9-944e-7baae842a058"></a>
## <a name="high-availability-ha-and-disaster-recovery-dr-for-sap-netweaver-running-on-azure-virtual-machines"></a><span data-ttu-id="f41ff-1350">Hög tillgänglighet och Disaster Recovery (DR) för SAP NetWeaver körs på Azure Virtual Machines</span><span class="sxs-lookup"><span data-stu-id="f41ff-1350">High Availability (HA) and Disaster Recovery (DR) for SAP NetWeaver running on Azure Virtual Machines</span></span>
### <a name="definition-of-terminologies"></a><span data-ttu-id="f41ff-1351">Definition av termer som gäller</span><span class="sxs-lookup"><span data-stu-id="f41ff-1351">Definition of terminologies</span></span>
<span data-ttu-id="f41ff-1352">Termen **hög tillgänglighet (HA)** beror vanligtvis på en uppsättning tekniker som minimerar IT avbrott genom att tillhandahålla affärskontinuitet av IT-tjänster via redundanta, feltolerant eller failover skyddade komponenter i den **samma** datacenter.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1352">The Term **high availability (HA)** is generally related to a set of technologies that minimizes IT disruptions by providing business continuity of IT services through redundant, fault-tolerant or failover protected components inside the **same** data center.</span></span> <span data-ttu-id="f41ff-1353">I vårt fall, inom en Azure-Region.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1353">In our case, within one Azure Region.</span></span>

<span data-ttu-id="f41ff-1354">**Katastrofåterställning (DR)** är också på minimera avbrott i IT-tjänster och deras återställning men tvärs över **olika** datacenter som vanligtvis finns hundratals kilometer direkt.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1354">**Disaster recovery (DR)** is also targeting minimizing IT services disruption, and their recovery but across **different** data centers, that are usually located hundreds of kilometers away.</span></span> <span data-ttu-id="f41ff-1355">I vårt fall vanligtvis mellan olika Azure-regioner inom samma geopolitiska region eller i enlighet med du som kund.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1355">In our case usually between different Azure Regions within the same geopolitical region or as established by you as a customer.</span></span>

### <a name="overview-of-high-availability"></a><span data-ttu-id="f41ff-1356">Översikt över hög tillgänglighet</span><span class="sxs-lookup"><span data-stu-id="f41ff-1356">Overview of High Availability</span></span>
<span data-ttu-id="f41ff-1357">Vi kan avgränsa diskussion om SAP hög tillgänglighet i Azure i två delar:</span><span class="sxs-lookup"><span data-stu-id="f41ff-1357">We can separate the discussion about SAP high availability in Azure into two parts:</span></span>

* <span data-ttu-id="f41ff-1358">**Hög tillgänglighet för Azure-infrastrukturen**, t.ex. HA beräkning (VM), nätverk, lagring etc. och dess fördelar för att öka tillgängligheten för SAP-program.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1358">**Azure infrastructure high availability**, e.g. HA of compute (VMs), network, storage etc. and its benefits for increasing SAP application availability.</span></span>
* <span data-ttu-id="f41ff-1359">**Hög tillgänglighet för SAP-program**, t.ex. HA av SAP programvarukomponenter:</span><span class="sxs-lookup"><span data-stu-id="f41ff-1359">**SAP application high availability**, e.g. HA of SAP software components:</span></span>
  * <span data-ttu-id="f41ff-1360">SAP-programservrar</span><span class="sxs-lookup"><span data-stu-id="f41ff-1360">SAP application servers</span></span>
  * <span data-ttu-id="f41ff-1361">SAP ASCS/SCS-instans</span><span class="sxs-lookup"><span data-stu-id="f41ff-1361">SAP ASCS/SCS instance</span></span>
  * <span data-ttu-id="f41ff-1362">DB-server</span><span class="sxs-lookup"><span data-stu-id="f41ff-1362">DB server</span></span>

<span data-ttu-id="f41ff-1363">och hur den kan kombineras med Azure-infrastrukturen hög tillgänglighet.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1363">and how it can be combined with Azure infrastructure HA.</span></span>

<span data-ttu-id="f41ff-1364">SAP hög tillgänglighet i Azure har vissa skillnader i jämförelse med hög tillgänglighet för SAP i en lokal fysisk eller virtuell miljö.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1364">SAP High Availability in Azure has some differences compared to SAP High Availability in an on-premises physical or virtual environment.</span></span> <span data-ttu-id="f41ff-1365">Följande dokumentet från SAP beskriver standardkonfigurationer SAP hög tillgänglighet i virtualiserade miljöer i Windows: <http://scn.sap.com/docs/DOC-44415>.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1365">The following paper from SAP describes standard SAP High Availability configurations in virtualized environments on Windows: <http://scn.sap.com/docs/DOC-44415>.</span></span> <span data-ttu-id="f41ff-1366">Det finns ingen sapinst-integrerade SAP-HA konfiguration för Linux som om det finns för Windows.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1366">There is no sapinst-integrated SAP-HA configuration for Linux like it exists for Windows.</span></span> <span data-ttu-id="f41ff-1367">Om SAP HA lokalt för Linux hitta mer information här: <http://scn.sap.com/docs/DOC-8541>.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1367">Regarding SAP HA on-premises for Linux find more information here : <http://scn.sap.com/docs/DOC-8541>.</span></span>

### <a name="azure-infrastructure-high-availability"></a><span data-ttu-id="f41ff-1368">Azure-infrastrukturen med hög tillgänglighet</span><span class="sxs-lookup"><span data-stu-id="f41ff-1368">Azure Infrastructure High Availability</span></span>
<span data-ttu-id="f41ff-1369">Det finns ingen enskild VM SLA på Azure Virtual Machines just nu.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1369">There is no single-VM SLA available on Azure Virtual Machines right now.</span></span> <span data-ttu-id="f41ff-1370">Att få en uppfattning om hur tillgängligheten för en enda virtuell dator kan se ut som om du bara kan skapa produkten av de olika tillgängliga Azure SLA: <https://azure.microsoft.com/support/legal/sla/>.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1370">To get an idea how the availability of a single VM might look like you can simply build the product of the different available Azure SLAs: <https://azure.microsoft.com/support/legal/sla/>.</span></span>

<span data-ttu-id="f41ff-1371">Basen för beräkningen är 30 dagar i månaden, eller 43200 minuter.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1371">The basis for the calculation is 30 days per month, or 43200 minutes.</span></span> <span data-ttu-id="f41ff-1372">Därför motsvarar 0,05% avbrottstid 21,6 minuter.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1372">Therefore, 0.05% downtime corresponds to 21.6 minutes.</span></span> <span data-ttu-id="f41ff-1373">Tillgängligheten för olika tjänster kommer som vanligt, multiplicera på följande sätt:</span><span class="sxs-lookup"><span data-stu-id="f41ff-1373">As usual, the availability of the different services will multiply in the following way:</span></span>

<span data-ttu-id="f41ff-1374">(Tillgänglighet Service #1/100) * (tillgänglighet Service #2/100) * (tillgänglighet Service #3/100) *...</span><span class="sxs-lookup"><span data-stu-id="f41ff-1374">(Availability Service #1/100) * (Availability Service #2/100) * (Availability Service #3/100) *…</span></span>

<span data-ttu-id="f41ff-1375">Exempel:</span><span class="sxs-lookup"><span data-stu-id="f41ff-1375">Like:</span></span>

<span data-ttu-id="f41ff-1376">(99,95/100) * (99,9/100) * (99,9/100) = 0.9975 eller 99.75% övergripande tillgänglighet.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1376">(99.95/100) * (99.9/100) * (99.9/100) = 0.9975 or an overall availability of 99.75%.</span></span>

#### <a name="virtual-machine-vm-high-availability"></a><span data-ttu-id="f41ff-1377">Virtuell dator (VM) med hög tillgänglighet</span><span class="sxs-lookup"><span data-stu-id="f41ff-1377">Virtual Machine (VM) High Availability</span></span>
<span data-ttu-id="f41ff-1378">Det finns två typer av händelser i Azure-plattformen som kan påverka tillgängligheten för virtuella datorer: planerat underhåll och oplanerat underhåll.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1378">There are two types of Azure platform events that can affect the availability of your virtual machines: planned maintenance and unplanned maintenance.</span></span>

* <span data-ttu-id="f41ff-1379">Planerat underhållshändelser är periodiska uppdateringar som har tillverkats av Microsoft för underliggande Azure-plattformen för att förbättra övergripande tillförlitlighet, prestanda och säkerhet för plattformsinfrastrukturen som de virtuella datorerna körs på.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1379">Planned maintenance events are periodic updates made by Microsoft to the underlying Azure platform to improve overall reliability, performance, and security of the platform infrastructure that your virtual machines run on.</span></span>
* <span data-ttu-id="f41ff-1380">Oplanerat underhållshändelser inträffar när maskinvaru- eller fysisk infrastruktur underliggande din virtuella dator fel har uppstått på något sätt.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1380">Unplanned maintenance events occur when the hardware or physical infrastructure underlying your virtual machine has faulted in some way.</span></span> <span data-ttu-id="f41ff-1381">Det kan vara lokala nätverksfel, lokala diskfel eller andra fel på racknivå.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1381">This may include local network failures, local disk failures, or other rack level failures.</span></span> <span data-ttu-id="f41ff-1382">När sådant fel identifieras Azure-plattformen automatiskt att migrera den virtuella datorn från ohälsosamt fysisk server som värd för den virtuella datorn till en felfri fysisk server.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1382">When such a failure is detected, the Azure platform will automatically migrate your virtual machine from the unhealthy physical server hosting your virtual machine to a healthy physical server.</span></span> <span data-ttu-id="f41ff-1383">Den här typen av händelser kan också göra att den virtuella datorn startas om, men det är ovanligt.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1383">Such events are rare, but may also cause your virtual machine to reboot.</span></span>

<span data-ttu-id="f41ff-1384">Mer information finns i den här dokumentationen: <http://azure.microsoft.com/documentation/articles/virtual-machines-manage-availability></span><span class="sxs-lookup"><span data-stu-id="f41ff-1384">More details can be found in this documentation: <http://azure.microsoft.com/documentation/articles/virtual-machines-manage-availability></span></span>

#### <a name="azure-storage-redundancy"></a><span data-ttu-id="f41ff-1385">Azure Storage-redundans</span><span class="sxs-lookup"><span data-stu-id="f41ff-1385">Azure Storage Redundancy</span></span>
<span data-ttu-id="f41ff-1386">Data i Microsoft Azure Storage-konto replikeras alltid för att säkerställa hållbarhet och hög tillgänglighet, uppfyller Azure-serviceavtalet även i händelse av tillfälliga maskinvarufel för lagring</span><span class="sxs-lookup"><span data-stu-id="f41ff-1386">The data in your Microsoft Azure Storage Account is always replicated to ensure durability and high availability, meeting the Azure Storage SLA even in the face of transient hardware failures</span></span>

<span data-ttu-id="f41ff-1387">Eftersom Azure Storage är att ha 3 avbildningar av data som standard, RAID5 eller RAID1 över flera Azure-diskar är inte nödvändigt.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1387">Since Azure Storage is keeping 3 images of the data by default, RAID5 or RAID1 across multiple Azure disks are not necessary.</span></span>

<span data-ttu-id="f41ff-1388">Mer information finns i den här artikeln: <http://azure.microsoft.com/documentation/articles/storage-redundancy/></span><span class="sxs-lookup"><span data-stu-id="f41ff-1388">More details can be found in this article: <http://azure.microsoft.com/documentation/articles/storage-redundancy/></span></span>

#### <a name="utilizing-azure-infrastructure-vm-restart-to-achieve-higher-availability-of-sap-applications"></a><span data-ttu-id="f41ff-1389">Använda Azure-infrastrukturen VM omstart för att uppnå ”högre tillgänglighet” för SAP-program</span><span class="sxs-lookup"><span data-stu-id="f41ff-1389">Utilizing Azure Infrastructure VM Restart to Achieve “Higher Availability” of SAP Applications</span></span>
<span data-ttu-id="f41ff-1390">Om du väljer att inte använda funktioner som Windows Server Failover Clustering WSFC- eller Linux motsvarande (det senare en inte stöds ännu i Azure i kombination med SAP-program), starta om Azure VM används för att skydda en SAP-systemet mot planerade och oplanerat stillestånd Azure fysiska serverinfrastruktur och övergripande underliggande Azure-plattformen.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1390">If you decide not to use functionalities like Windows Server Failover Clustering (WSFC) or a Linux equivalent ( the latter one is not supported yet on Azure in combination with SAP software ), Azure VM Restart is utilized to protect a SAP System against planned and unplanned downtime of the Azure physical server infrastructure and overall underlying Azure platform.</span></span>

> [!NOTE]
> <span data-ttu-id="f41ff-1391">Det är viktigt att nämna att starta om Azure VM främst skyddar virtuella datorer och inte program.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1391">It is important to mention that Azure VM Restart primarily protects VMs and NOT applications.</span></span> <span data-ttu-id="f41ff-1392">Starta om VM inte ger hög tillgänglighet för SAP-program, men den erbjuder en viss nivå av infrastrukturens tillgänglighet och därför indirekt ”högre tillgänglighet” för SAP-system.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1392">VM Restart does not offer high availability for SAP applications, but it does offer a certain level of infrastructure availability and therefore indirectly “higher availability” of SAP systems.</span></span> <span data-ttu-id="f41ff-1393">Det finns också några SLA för den tid det tar att starta om en virtuell dator efter en planerad eller oplanerad värden avbrott.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1393">There is also no SLA for the time it will take to restart a VM after a planned or unplanned host outage.</span></span> <span data-ttu-id="f41ff-1394">Den här metoden för 'med hög tillgänglighet är därför inte lämpar sig för viktiga komponenter av en SAP-system som (A) SCS eller DBMS.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1394">Therefore, this method of ‘high availability’ is not suitable for critical components of a SAP system like (A)SCS or DBMS.</span></span>
>
>

<span data-ttu-id="f41ff-1395">Ett annat viktigt infrastruktur-element för hög tillgänglighet är lagring.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1395">Another important infrastructure element for high availability is storage.</span></span> <span data-ttu-id="f41ff-1396">T.ex.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1396">E.g.</span></span> <span data-ttu-id="f41ff-1397">SERVICENIVÅAVTAL för Azure Storage är 99,9% tillgänglighet.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1397">Azure Storage SLA is 99,9 % availability.</span></span> <span data-ttu-id="f41ff-1398">Om en distribuerar du alla virtuella datorer med dess diskar till en enda Azure Storage-konto, potentiella Azure Storage otillgänglighet kommer att placeras i den Azure Storage-konto på alla virtuella datorer och även alla SAP komponenter som körs i dessa virtuella datorer.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1398">If one deploys all VMs with its disks into a single Azure Storage Account, potential Azure Storage unavailability will cause unavailability of all VMs that are placed in that Azure Storage Account, and also all SAP components running inside of those VMs.</span></span>  

<span data-ttu-id="f41ff-1399">I stället för att alla virtuella datorer till en enda Azure Storage-konto, du kan också använda dedikerade konton för varje virtuell dator och på så sätt öka övergripande VM och SAP tillgänglighet genom att använda flera oberoende Azure Storage-konton.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1399">Instead of putting all VMs into one single Azure Storage Account, you can also use dedicated storage accounts for each VM, and in this way increase overall VM and SAP application availability by using multiple independent Azure Storage Accounts.</span></span>

<span data-ttu-id="f41ff-1400">En exempel-arkitekturen för en SAP NetWeaver system som använder Azure-infrastrukturen hög tillgänglighet kan se ut så här:</span><span class="sxs-lookup"><span data-stu-id="f41ff-1400">A sample architecture of a SAP NetWeaver system that uses Azure infrastructure HA could look like this:</span></span>

![Använda Azure-infrastrukturen hög tillgänglighet att uppnå SAP ”senare” tillgänglighet][planning-guide-figure-2900]

<span data-ttu-id="f41ff-1402">För kritiska SAP-komponenter uppnås vi följande hittills:</span><span class="sxs-lookup"><span data-stu-id="f41ff-1402">For critical SAP components we achieved the following so far :</span></span>

* <span data-ttu-id="f41ff-1403">Hög tillgänglighet för SAP-programservrar (AS)</span><span class="sxs-lookup"><span data-stu-id="f41ff-1403">High Availability of SAP Application Servers (AS)</span></span>

<span data-ttu-id="f41ff-1404">SAP-programserverinstanser är redundanta komponenter.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1404">SAP application server instances are redundant components.</span></span> <span data-ttu-id="f41ff-1405">Varje SAP som instansen har distribuerats på egen virtuell dator som körs i en annan Azure-fel och uppgradera domän (se kapitlen [Feldomäner] [ planning-guide-3.2.1] och [uppgradera domäner][planning-guide-3.2.2]).</span><span class="sxs-lookup"><span data-stu-id="f41ff-1405">Each SAP AS instance is deployed on its own VM, that is running in a different Azure Fault and Upgrade Domain (see chapters [Fault Domains][planning-guide-3.2.1] and [Upgrade Domains][planning-guide-3.2.2]).</span></span> <span data-ttu-id="f41ff-1406">Detta säkerställs med hjälp av Azure-Tillgänglighetsuppsättningar (finns i kapitlet [Azure-Tillgänglighetsuppsättningar][planning-guide-3.2.3]).</span><span class="sxs-lookup"><span data-stu-id="f41ff-1406">This is ensured by using Azure Availability Sets (see chapter [Azure Availability Sets][planning-guide-3.2.3]).</span></span> <span data-ttu-id="f41ff-1407">Potentiella planerad eller oplanerad otillgänglighet en Azure-fel eller uppgradera domän kommer inte finns ett begränsat antal virtuella datorer med deras SAP instanser.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1407">Potential planned or unplanned unavailability of an Azure Fault or Upgrade Domain will cause unavailability of a restricted number of VMs with their SAP AS instances.</span></span>
<span data-ttu-id="f41ff-1408">Varje SAP eftersom instansen är placerad i sin egen Azure Storage-konto – potentiella otillgänglighet ett Azure Storage-konto kommer att endast en virtuell dator med dess SAP instans.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1408">Each SAP AS instance is placed in its own Azure Storage account – potential unavailability of one Azure Storage Account will cause unavailability of only one VM with its SAP AS instance.</span></span> <span data-ttu-id="f41ff-1409">Men tänk på att det finns en gräns på Azure Storage-konton inom en Azure-prenumeration.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1409">However, be aware that there is a limit of Azure Storage Accounts within one Azure subscription.</span></span> <span data-ttu-id="f41ff-1410">Automatisk start av (A) SCS-instans efter omstart VM, kontrollera att ställa in Autostart-parametern i (A) SCS instans start-profil som beskrivs i kapitlet [med hjälp av Autostart för SAP instanser][planning-guide-11.5].</span><span class="sxs-lookup"><span data-stu-id="f41ff-1410">To ensure automatic start of (A)SCS instance after the VM reboot, make sure to set Autostart parameter in (A)SCS instance start profile described in chapter [Using Autostart for SAP instances][planning-guide-11.5].</span></span>
<span data-ttu-id="f41ff-1411">Läs även kapitel [hög tillgänglighet för SAP-programservrar] [ planning-guide-11.4.1] för mer information.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1411">Please also read chapter [High Availability for SAP Application Servers][planning-guide-11.4.1] for more details.</span></span>

* <span data-ttu-id="f41ff-1412">*Högre* tillgänglighet för SAP (A) SCS-instans</span><span class="sxs-lookup"><span data-stu-id="f41ff-1412">*Higher* Availability of SAP (A)SCS instance</span></span>

<span data-ttu-id="f41ff-1413">Vi använder här Azure VM startas om för att skydda den virtuella datorn med installerad SAP (A) SCS-instans.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1413">Here we utilize Azure VM Restart to protect the VM with installed SAP (A)SCS instance.</span></span> <span data-ttu-id="f41ff-1414">Vid planerad eller oplanerad driftstopp på Azure-servrarna, virtuella datorer kommer att startas om på en annan server.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1414">In the case of planned or unplanned downtime of Azure severs, VMs will be restarted on another available server.</span></span> <span data-ttu-id="f41ff-1415">Som tidigare nämnts kan skyddar starta om Azure VM främst virtuella datorer och inte program i det här fallet (A) SCS-instans.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1415">As mentioned earlier, Azure VM Restart primarily protects VMs and NOT applications, in this case the (A)SCS instance.</span></span> <span data-ttu-id="f41ff-1416">Via den virtuella datorn startar om ska vi nå indirekt ”högre tillgänglighet” för SAP (A) SCS-instansen.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1416">Through the VM Restart we’ll reach indirectly “higher availability” of SAP (A)SCS instance.</span></span> <span data-ttu-id="f41ff-1417">Se till att ange Autostart-parametern i (A) SCS instans start-profil som beskrivs i kapitlet om du vill kontrollera automatisk start av (A) SCS-instans efter omstart VM [med hjälp av Autostart för SAP instanser][planning-guide-11.5].</span><span class="sxs-lookup"><span data-stu-id="f41ff-1417">To insure automatic start of (A)SCS instance after the VM reboot, make sure to set Autostart parameter in (A)SCS instance start profile described in chapter [Using Autostart for SAP instances][planning-guide-11.5].</span></span> <span data-ttu-id="f41ff-1418">Det här betyder att (A)-SCS serverinstansen som en enskilda felpunkter (SPOF) körs i en enda virtuell dator är bestämmande faktor tillgängligheten för hela SAP-liggande.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1418">This means the (A)SCS instance as a Single Point of Failure (SPOF) running in a single VM will be the determinative factor for the availability of the whole SAP landscape.</span></span>

* <span data-ttu-id="f41ff-1419">*Högre* tillgängligheten för DBMS-Server</span><span class="sxs-lookup"><span data-stu-id="f41ff-1419">*Higher* Availability of DBMS Server</span></span>

<span data-ttu-id="f41ff-1420">Här, liknande till SCS SAP (A)-instans användningsfall, vi använda Azure VM startas om för att skydda den virtuella datorn med installerad programvara för DBMS och vi uppnår ”högre tillgänglighet” av DBMS programvara via virtuella datorn startar om.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1420">Here, similar to the SAP (A)SCS instance use case, we utilize Azure VM Restart to protect the VM with installed DBMS software, and we achieve “higher availability” of DBMS software through VM Restart.</span></span>
<span data-ttu-id="f41ff-1421">DBMS som körs i en enda virtuell dator är också en SPOF och det är bestämmande faktor för tillgängligheten för hela SAP-liggande.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1421">DBMS running in a single VM is also a SPOF, and it is the determinative factor for the availability of the whole SAP landscape.</span></span>

### <a name="sap-application-high-availability-on-azure-iaas"></a><span data-ttu-id="f41ff-1422">SAP hög tillgänglighet på Azure IaaS</span><span class="sxs-lookup"><span data-stu-id="f41ff-1422">SAP Application High Availability on Azure IaaS</span></span>
<span data-ttu-id="f41ff-1423">Vi behöver skydda alla kritiska SAP komponenter, t.ex. redundant SAP programservrar, för att uppnå full SAP system hög tillgänglighet och unika komponenter (t.ex. enskilda felpunkter) som SAP (A) SCS-instans och DBMS.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1423">To achieve full SAP system high availability, we need to protect all critical SAP system components, e.g. redundant SAP application servers, and unique components (e.g. Single Point of Failure) like SAP (A)SCS instance and DBMS.</span></span>

#### <span data-ttu-id="f41ff-1424"><a name="5d9d36f9-9058-435d-8367-5ad05f00de77"></a>Hög tillgänglighet för SAP-programservrar</span><span class="sxs-lookup"><span data-stu-id="f41ff-1424"><a name="5d9d36f9-9058-435d-8367-5ad05f00de77"></a>High Availability for SAP Application Servers</span></span>
<span data-ttu-id="f41ff-1425">För dialogrutan och servrar för SAP programinstanser behöver du inte tror att om en lösning för specifika hög tillgänglighet.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1425">For the SAP application servers/dialog instances it’s not necessary to think about a specific high availability solution.</span></span> <span data-ttu-id="f41ff-1426">Hög tillgänglighet bara uppnås genom redundans och därmed ha tillräckligt många dem i olika virtuella datorer.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1426">High availability is simply achieved by redundancy and thereby having enough of them in different virtual machines.</span></span> <span data-ttu-id="f41ff-1427">De ska alla placeras i samma Azure Tillgänglighetsuppsättningen att undvika att de virtuella datorerna kan uppdateras samtidigt under planerat underhåll driftstopp.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1427">They should all be placed in the same Azure Availability Set to avoid that the VMs might be updated at the same time during planned maintenance downtime.</span></span> <span data-ttu-id="f41ff-1428">Grundläggande funktioner som bygger på olika uppgradering och Feldomäner i en Azure-Skalningsenhet introducerades redan i kapitel [uppgradera domäner][planning-guide-3.2.2].</span><span class="sxs-lookup"><span data-stu-id="f41ff-1428">The basic functionality which builds on different Upgrade and Fault Domains within an Azure Scale Unit was already introduced in chapter [Upgrade Domains][planning-guide-3.2.2].</span></span> <span data-ttu-id="f41ff-1429">Azure Tillgänglighetsuppsättningar presenteras i kapitlet [Azure-Tillgänglighetsuppsättningar] [ planning-guide-3.2.3] i det här dokumentet.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1429">Azure Availability Sets were presented in chapter [Azure Availability Sets][planning-guide-3.2.3] of this document.</span></span>

<span data-ttu-id="f41ff-1430">Det finns inget obegränsat antal fel och uppgradera domäner som kan användas av en Azure Tillgänglighetsuppsättning inom en Skalningsenhet för Azure.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1430">There is no infinite number of Fault and Upgrade Domains that can be used by an Azure Availability Set within an Azure Scale Unit.</span></span> <span data-ttu-id="f41ff-1431">Detta innebär att försätta ett antal virtuella datorer i en Tillgänglighetsuppsättning förr eller senare i det faktum att mer än en virtuell dator avslutas med samma fel eller uppgradera domän</span><span class="sxs-lookup"><span data-stu-id="f41ff-1431">This means that putting a number of VMs into one Availability Set sooner or later in the fact that more than one VM ends up in the same Fault or Upgrade Domain</span></span>

<span data-ttu-id="f41ff-1432">Distribuerar några SAP programserverinstanser i sina dedikerade virtuella datorer och förutsatt att vi 5 Uppgradera domäner, på följande bild visar sig i slutet.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1432">Deploying a few SAP application server instances in their dedicated VMs and assuming that we got 5 Upgrade Domains, the following picture emerges at the end.</span></span> <span data-ttu-id="f41ff-1433">Det faktiska max antalet fel och uppdatera domäner inom en tillgänglighetsuppsättning kan ändras i framtiden:</span><span class="sxs-lookup"><span data-stu-id="f41ff-1433">The actual max number of fault and update domains within an availability set might change in the future :</span></span>

![Hög tillgänglighet för SAP programservrar i Azure][planning-guide-figure-3000]

<span data-ttu-id="f41ff-1435">Mer information finns i den här dokumentationen: <http://azure.microsoft.com/documentation/articles/virtual-machines-manage-availability></span><span class="sxs-lookup"><span data-stu-id="f41ff-1435">More details can be found in this documentation: <http://azure.microsoft.com/documentation/articles/virtual-machines-manage-availability></span></span>

#### <a name="high-availability-for-the-sap-ascs-instance-on-windows"></a><span data-ttu-id="f41ff-1436">Hög tillgänglighet för SAP (A) SCS-instans på Windows</span><span class="sxs-lookup"><span data-stu-id="f41ff-1436">High Availability for the SAP (A)SCS instance on Windows</span></span>
<span data-ttu-id="f41ff-1437">Failover Cluster WSFC (Windows Server) är en lösning som används ofta för att skydda SAP (A) SCS-instans.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1437">Windows Server Failover Cluster (WSFC) is a frequently used solution to protect the SAP (A)SCS instance.</span></span> <span data-ttu-id="f41ff-1438">Det är även integrerad i sapinst i form av en ”hög tillgänglighet-installation”.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1438">It is also integrated into sapinst in form of a "HA installation".</span></span> <span data-ttu-id="f41ff-1439">Vid denna tidpunkt kan Azure-infrastrukturen inte tillhandahålla funktioner för att ställa in nödvändiga Windows Server-redundanskluster på samma sätt som det har gjort lokalt.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1439">At this point in time the Azure infrastructure is not able to provide the functionality to set up the required Windows Server Failover Cluster the same way as it's done on-premises.</span></span>

<span data-ttu-id="f41ff-1440">Januari 2016 tillhandahåller Azure molnplattform som kör Windows operativsystem inte möjligheten att använda en delad klustervolym på en disk som delas mellan två virtuella Azure-datorer.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1440">As of January 2016 the Azure cloud platform running the Windows operating system does not provide the possibility of using a cluster shared volume on a disk shared between two Azure VMs.</span></span>

<span data-ttu-id="f41ff-1441">En giltig lösning är dock användningen av 3 tillverkare som ger en delad volym av synkrona och transparent diskreplikering som kan integreras i WSFC.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1441">A valid solution though is the usage of 3rd-party software which provides a shared volume by synchronous and transparent disk replication which can be integrated into WSFC.</span></span> <span data-ttu-id="f41ff-1442">Den här metoden innebär att den aktiva klusternoden har tillgång till en diskkopior vid en viss tidpunkt.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1442">This approach implies that only the active cluster node is able to access one of the disk copies at a point in time.</span></span> <span data-ttu-id="f41ff-1443">Konfigurationen stöds för att skydda SAP (A) SCS-instans på Windows gästoperativsystemet på Azure Virtual Machines i kombination med 3 tillverkare SIOS DataKeeper januari 2016 denna hög tillgänglighet.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1443">As of January 2016 this HA configuration is supported to protect the SAP (A)SCS instance on Windows guest OS on Azure VMs in combination with 3rd-party software SIOS DataKeeper.</span></span>

<span data-ttu-id="f41ff-1444">SIOS DataKeeper lösningen innehåller en delad disk klusterresurs för Windows-redundanskluster genom att:</span><span class="sxs-lookup"><span data-stu-id="f41ff-1444">The SIOS DataKeeper solution provides a shared disk cluster resource to Windows Failover Clusters by having:</span></span>

* <span data-ttu-id="f41ff-1445">En ytterligare Azure-VHD som är kopplad till var och en av de virtuella datorerna (VM) som finns i en konfiguration för Windows-kluster</span><span class="sxs-lookup"><span data-stu-id="f41ff-1445">An additional Azure VHD attached to each of the virtual machines (VMs) that are in a Windows Cluster configuration</span></span>
* <span data-ttu-id="f41ff-1446">SIOS DataKeeper Cluster Edition körs på båda noderna för VM</span><span class="sxs-lookup"><span data-stu-id="f41ff-1446">SIOS DataKeeper Cluster Edition running on both VM nodes</span></span>
* <span data-ttu-id="f41ff-1447">Har konfigurerats på ett sätt som synkront speglar innehållet ytterligare VHD SIOS DataKeeper Cluster Edition ansluten bifogade volym från virtuella källdatorer till ytterligare virtuell Hårddisk volymen av virtuell dator.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1447">Having SIOS DataKeeper Cluster Edition configured in a way that it synchronously mirrors the content of the additional VHD attached volume from source VMs to additional VHD attached volume of target VM.</span></span>
* <span data-ttu-id="f41ff-1448">SIOS DataKeeper abstrahera käll- och lokala volymer och presentera dem för redundanskluster i Windows som en enda delad disk.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1448">SIOS DataKeeper is abstracting the source and target local volumes and presenting them to Windows Failover Cluster as a single shared disk.</span></span>

<span data-ttu-id="f41ff-1449">Du kan hitta all information om hur du installerar ett Windows-redundanskluster med SIOS Datakeeper och SAP i den [Clustering SAP ASCS-instans med redundanskluster för Windows Server på Azure med SIOS DataKeeper] [ ha-guide-classic] vitboken.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1449">You can find all details on how to install a Windows Failover Cluster with SIOS Datakeeper and SAP in the [Clustering SAP ASCS Instance using Windows Server Failover Cluster on Azure with SIOS DataKeeper][ha-guide-classic] white paper.</span></span>

#### <a name="high-availability-for-the-sap-ascs-instance-on-linux"></a><span data-ttu-id="f41ff-1450">Hög tillgänglighet för SAP (A) SCS-instansen på Linux</span><span class="sxs-lookup"><span data-stu-id="f41ff-1450">High Availability for the SAP (A)SCS instance on Linux</span></span>
<span data-ttu-id="f41ff-1451">Från och med Dec 2015 finns även ingen motsvarighet till delad disk WSFC för Linux virtuella datorer i Azure.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1451">As of Dec 2015 there is also no equivalent to shared disk WSFC for Linux VMs on Azure.</span></span> <span data-ttu-id="f41ff-1452">Alternativa lösningar med hjälp av 3 tillverkare som SIOS för Windows verifieras inte ännu för att köra SAP på Linux på Azure.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1452">Alternative solutions using 3rd-party software like SIOS for Windows are not validated yet for running SAP on Linux on Azure.</span></span>

#### <a name="high-availability-for-the-sap-database-instance"></a><span data-ttu-id="f41ff-1453">Hög tillgänglighet för SAP-databasinstans</span><span class="sxs-lookup"><span data-stu-id="f41ff-1453">High Availability for the SAP database instance</span></span>
<span data-ttu-id="f41ff-1454">SAP DBMS HA brukar baseras på två DBMS virtuella datorer där DBMS hög tillgänglighet funktionen används för att replikera data från den aktiva DBMS-instansen till en andra virtuell dator till en passiv DBMS-instans.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1454">The typical SAP DBMS HA setup is based on two DBMS VMs where DBMS high-availability functionality is used to replicate data from the active DBMS instance to the second VM into a passive DBMS instance.</span></span>

<span data-ttu-id="f41ff-1455">Hög tillgänglighet och Disaster recovery-funktioner för DBMS i allmänhet samt specifika DBMS beskrivs i den [DBMS Deployment Guide][dbms-guide].</span><span class="sxs-lookup"><span data-stu-id="f41ff-1455">High Availability and Disaster recovery functionality for DBMS in general as well as specific DBMS are described in the [DBMS Deployment Guide][dbms-guide].</span></span>

#### <a name="end-to-end-high-availability-for-the-complete-sap-system"></a><span data-ttu-id="f41ff-1456">Hög tillgänglighet från slutpunkt till slutpunkt för fullständig SAP-System</span><span class="sxs-lookup"><span data-stu-id="f41ff-1456">End-to-End High Availability for the Complete SAP System</span></span>
<span data-ttu-id="f41ff-1457">Här är två exempel på en fullständig SAP NetWeaver HA arkitektur i Azure - en för Windows och en för Linux.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1457">Here are two examples of a complete SAP NetWeaver HA architecture in Azure - one for Windows and one for Linux.</span></span>
<span data-ttu-id="f41ff-1458">Begreppen som förklaras nedan kan behöva äventyras lite när du distribuerar många SAP-system och antalet virtuella datorer som distribueras överskrider den maximala gränsen på Lagringskonton per prenumeration.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1458">The concepts as explained below may need to be compromised a bit when you deploy many SAP systems and the number of VMs deployed are exceeding the maximum limit of Storage Accounts per subscription.</span></span> <span data-ttu-id="f41ff-1459">I sådana fall måste virtuella hårddiskar för virtuella datorer kombineras i ett Lagringskonto.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1459">In such cases, VHDs of VMs need to be combined within one Storage Account.</span></span> <span data-ttu-id="f41ff-1460">Vanligtvis vill du göra det genom att kombinera virtuella hårddiskar för SAP programnivå virtuella datorer i olika SAP-system.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1460">Usually you would do so by combining VHDs of SAP application layer VMs of different SAP systems.</span></span>  <span data-ttu-id="f41ff-1461">Vi också kombinera olika virtuella hårddiskar på en annan DBMS virtuella datorer i olika SAP-system i en Azure Storage-konto.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1461">We also combined different VHDs of different DBMS VMs of different SAP systems in one Azure Storage Account.</span></span> <span data-ttu-id="f41ff-1462">Därmed Tänk på hur IOPS-gränser för Azure Storage-konton ( <https://azure.microsoft.com/documentation/articles/storage-scalability-targets> )</span><span class="sxs-lookup"><span data-stu-id="f41ff-1462">Thereby keeping the IOPS limits of Azure Storage Accounts in mind ( <https://azure.microsoft.com/documentation/articles/storage-scalability-targets> )</span></span>

##### <a name="windowslogowindows-ha-on-windows"></a>![Windows][Logo_Windows] <span data-ttu-id="f41ff-1464">Hög tillgänglighet i Windows</span><span class="sxs-lookup"><span data-stu-id="f41ff-1464">HA on Windows</span></span>
![SAP NetWeaver programarkitektur hög tillgänglighet med SQLServer i Azure IaaS][planning-guide-figure-3200]

<span data-ttu-id="f41ff-1466">Följande Azure konstruktioner används för SAP NetWeaver-systemet för att minimera effekten av infrastrukturen problem och korrigering:</span><span class="sxs-lookup"><span data-stu-id="f41ff-1466">The following Azure constructs are used for the SAP NetWeaver system, to minimize impact by infrastructure issues and host patching:</span></span>

* <span data-ttu-id="f41ff-1467">Hela systemet distribueras på Azure (obligatoriskt – DBMS layer, (A) SCS-instans och lager för hela programmet måste du köra på samma plats).</span><span class="sxs-lookup"><span data-stu-id="f41ff-1467">The complete system is deployed on Azure (required - DBMS layer, (A)SCS instance and complete application layer need to run in the same location).</span></span>
* <span data-ttu-id="f41ff-1468">Hela systemet körs inom en Azure-prenumeration (krävs).</span><span class="sxs-lookup"><span data-stu-id="f41ff-1468">The complete system runs within one Azure subscription (required).</span></span>
* <span data-ttu-id="f41ff-1469">Hela systemet körs inom ett virtuellt Azure-nätverk (krävs).</span><span class="sxs-lookup"><span data-stu-id="f41ff-1469">The complete system runs within one Azure Virtual Network (required).</span></span>
* <span data-ttu-id="f41ff-1470">Uppdelning av de virtuella datorerna i en SAP-systemet till tre Tillgänglighetsuppsättningar är möjligt med alla de virtuella datorerna som hör till samma virtuella nätverk.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1470">The separation of the VMs of one SAP system into three Availability Sets is possible even with all the VMs belonging to the same Virtual Network.</span></span>
* <span data-ttu-id="f41ff-1471">Alla virtuella datorer som kör DBMS instanser av en SAP-systemet är i en Tillgänglighetsuppsättning.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1471">All VMs running DBMS instances of one SAP system are in one Availability Set.</span></span> <span data-ttu-id="f41ff-1472">Vi förutsätter att det finns fler än en virtuell dator som kör DBMS instanser per system eftersom interna DBMS-hög tillgänglighet som används för funktioner, t.ex. SQL Server AlwaysOn eller Oracle Data Guard.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1472">We assume that there is more than one VM running DBMS instances per system since native DBMS high availability features are used, like SQL Server AlwaysOn or Oracle Data Guard.</span></span>
* <span data-ttu-id="f41ff-1473">Alla virtuella datorer som kör DBMS instanser använda sina egna storage-konto.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1473">All VMs running DBMS instances use their own storage account.</span></span> <span data-ttu-id="f41ff-1474">DBMS data och loggfilen filer replikeras till en annan storage-konto med hjälp av DBMS hög tillgänglighet funktioner som synkroniserar data från ett lagringskonto.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1474">DBMS data and log files are replicated from one storage account to another storage account using DBMS high availability functions that synchronize the data.</span></span> <span data-ttu-id="f41ff-1475">Inte finns en storage-konto kommer att en SQL-Windows-klusternod, men inte hela SQL Server-tjänsten.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1475">Unavailability of one storage account will cause unavailability of one SQL Windows cluster node, but not the whole SQL Server service.</span></span>
* <span data-ttu-id="f41ff-1476">Alla virtuella datorer som kör (A) SCS-instans av en SAP-systemet är i en Tillgänglighetsuppsättning.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1476">All VMs running (A)SCS instance of one SAP system are in one Availability Set.</span></span> <span data-ttu-id="f41ff-1477">I dessa virtuella datorer är att konfigurera Windows Sever klustret WSFC (Failover) att skydda (A) SCS-instans.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1477">Inside of those VMs is configure Windows Sever Failover Cluster (WSFC) to protect (A)SCS instance.</span></span>
* <span data-ttu-id="f41ff-1478">Alla virtuella datorer (A) SCS-instanser körs använder sina egna lagringskonto.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1478">All VMs running (A)SCS instances use their own storage account.</span></span> <span data-ttu-id="f41ff-1479">(A) SCS instansfiler och SAP globala mappen replikeras till ett annat lagringskonto med SIOS DataKeeper replikering från ett lagringskonto.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1479">(A)SCS instance files and SAP global folder are replicated from one storage account to another storage account using SIOS DataKeeper replication.</span></span> <span data-ttu-id="f41ff-1480">Otillgänglighet ett lagringskonto gör att en nod i klustret (A) SCS Windows, men inte hela (A) SCS-tjänsten.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1480">Unavailability of one storage account will cause unavailability of one (A)SCS Windows cluster node, but not the whole (A)SCS service.</span></span>
* <span data-ttu-id="f41ff-1481">ALLA de virtuella datorerna som representerar SAP server Applikationsnivån är i ett tredje Tillgänglighetsuppsättning.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1481">ALL the VMs representing the SAP application server layer are in a third Availability Set.</span></span>
* <span data-ttu-id="f41ff-1482">ALLA de virtuella datorerna kör SAP-programservrar använder sina egna lagringskonto.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1482">ALL the VMs running SAP application servers use their own storage account.</span></span> <span data-ttu-id="f41ff-1483">Inte finns en storage-konto kommer att en server för SAP-program, där andra SAP som fortsätter att köras.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1483">Unavailability of one storage account will cause unavailability of one SAP application server, where other SAP AS continue to run.</span></span>

##### <a name="linuxlogolinux-ha-on-linux"></a>![Linux][Logo_Linux] <span data-ttu-id="f41ff-1485">Hög tillgänglighet på Linux</span><span class="sxs-lookup"><span data-stu-id="f41ff-1485">HA on Linux</span></span>
<span data-ttu-id="f41ff-1486">Arkitekturen för SAP hög tillgänglighet på Linux i Azure är ungefär desamma som för Windows som beskrivs ovan.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1486">The architecture for SAP HA on Linux on Azure is basically the same as for Windows as described above.</span></span> <span data-ttu-id="f41ff-1487">Jan 2016 finns två begränsningar om:</span><span class="sxs-lookup"><span data-stu-id="f41ff-1487">As of Jan 2016 there are two restrictions though :</span></span>

* <span data-ttu-id="f41ff-1488">endast SAP ASE 16 stöds för närvarande på Linux på Azure utan några ASE replikeringsfunktioner.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1488">only SAP ASE 16 is currently supported on Linux on Azure without any ASE replication features.</span></span>
* <span data-ttu-id="f41ff-1489">Det finns ingen SAP (A) SCS HA lösning stöds ännu på Linux på Azure</span><span class="sxs-lookup"><span data-stu-id="f41ff-1489">there is no SAP (A)SCS HA solution supported yet on Linux on Azure</span></span>

<span data-ttu-id="f41ff-1490">Följaktligen januari 2016 ett Azure-SAP-Linux-system kan inte få samma tillgänglighet som ett SAP Windows Azure-system på grund av saknas hög tillgänglighet för SCS (A)-instans och single instance SAP ASE databas.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1490">As a consequence as of January 2016 a SAP-Linux-Azure system cannot achieve the same availability as a SAP-Windows-Azure system because of missing HA for the (A)SCS instance and the single-instance SAP ASE database.</span></span>

### <span data-ttu-id="f41ff-1491"><a name="4e165b58-74ca-474f-a7f4-5e695a93204f"></a>Med hjälp av Autostart för SAP-instanser</span><span class="sxs-lookup"><span data-stu-id="f41ff-1491"><a name="4e165b58-74ca-474f-a7f4-5e695a93204f"></a>Using Autostart for SAP instances</span></span>
<span data-ttu-id="f41ff-1492">SAP erbjuds funktioner för att starta SAP instanser direkt efter start av Operativsystemet i den virtuella datorn.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1492">SAP offered the functionality to start SAP instances immediately after the start of the OS within the VM.</span></span> <span data-ttu-id="f41ff-1493">Vilka de specifika stegen finns dokumenterade i SAP Knowledge Base-artikel [1909114] – hur instanser automatiskt med hjälp av parametern Autostart att starta SAP.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1493">The exact steps were documented in  SAP Knowledge Base Article [1909114] - How to start SAP instances automatically using parameter Autostart.</span></span> <span data-ttu-id="f41ff-1494">Dock SAP inte rekommenderar använder inställningen längre eftersom det finns ingen kontroll i den ordning som instansen startas om, under förutsättning att mer än en virtuell dator har fått påverkas eller flera instanser körde per virtuell dator.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1494">However, SAP is not recommending to use the setting anymore because there is no control in the order of instance restarts, assuming more than one VM got affected or multiple instances ran per VM.</span></span> <span data-ttu-id="f41ff-1495">Under förutsättning att ett typiskt Azure scenario för en SAP application server-instans i en virtuell dator och fall då en enda virtuell dator så småningom få startas, Autostart är inte mycket viktig och kan aktiveras genom att lägga till den här parametern:</span><span class="sxs-lookup"><span data-stu-id="f41ff-1495">Assuming a typical Azure scenario of one SAP application server instance in a VM and the case of a single VM eventually getting restarted, the Autostart is not really critical and can be enabled by adding this parameter:</span></span>

    Autostart = 1

<span data-ttu-id="f41ff-1496">I profilen för start av SAP ABAP och/eller Java-instansen.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1496">Into the start profile of the SAP ABAP and/or Java instance.</span></span>

> [!NOTE]
> <span data-ttu-id="f41ff-1497">Parametern Autostart kan ha vissa downfalls samt.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1497">The Autostart parameter can have some downfalls as well.</span></span> <span data-ttu-id="f41ff-1498">I större detalj utlöser parametern början av en SAP ABAP eller Java när Windows-/ Linux-tjänsterna på instansen har startats.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1498">In more detail, the parameter triggers the start of a SAP ABAP or Java instance when the related Windows/Linux service of the instance is started.</span></span> <span data-ttu-id="f41ff-1499">Så är fallet har när operativsystem startar.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1499">That certainly is the case when the operating systems boots up.</span></span> <span data-ttu-id="f41ff-1500">Dock omstarter av SAP-tjänster finns också en gemensam sak för SAP programvara livscykelhantering funktioner som SUMMAN eller andra uppdateringar eller uppgraderingar.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1500">However, restarts of SAP services are also a common thing for SAP Software Lifecycle Management functionality like SUM or other updates or upgrades.</span></span> <span data-ttu-id="f41ff-1501">Dessa funktioner inte förväntar dig en instans som ska startas om automatiskt alls.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1501">These functionalities are not expecting an instance to be restarted automatically at all.</span></span> <span data-ttu-id="f41ff-1502">Parametern Autostart ska vara inaktiverat innan du kör sådana uppgifter.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1502">Therefore, the Autostart parameter should be disabled before running such tasks.</span></span> <span data-ttu-id="f41ff-1503">Parametern Autostart bör också inte användas för SAP-instanserna är klustrade som CI-ASCS/SCS.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1503">The Autostart parameter also should not be used for SAP instances that are clustered, like ASCS/SCS/CI.</span></span>
>
>

<span data-ttu-id="f41ff-1504">Se ytterligare information om autostart för SAP instanser här:</span><span class="sxs-lookup"><span data-stu-id="f41ff-1504">See additional information regarding autostart for SAP instances here :</span></span>

* [<span data-ttu-id="f41ff-1505">Starta/Stoppa SAP tillsammans med din Unix Server Starta/Stoppa</span><span class="sxs-lookup"><span data-stu-id="f41ff-1505">Start/Stop SAP along with your Unix Server Start/Stop</span></span>](http://scn.sap.com/community/unix/blog/2012/08/07/startstop-sap-along-with-your-unix-server-startstop)
* [<span data-ttu-id="f41ff-1506">Starta och stoppa SAP NetWeaver Hanteringsagenter</span><span class="sxs-lookup"><span data-stu-id="f41ff-1506">Starting and Stopping SAP NetWeaver Management Agents</span></span>](https://help.sap.com/saphelp_nwpi711/helpdata/en/49/9a15525b20423ee10000000a421938/content.htm)
* [<span data-ttu-id="f41ff-1507">Så här aktiverar du automatisk Start av HANA-databas</span><span class="sxs-lookup"><span data-stu-id="f41ff-1507">How to enable auto Start of HANA Database</span></span>](http://www.freehanatutorials.com/2012/10/how-to-enable-auto-start-of-hana.html)

### <a name="larger-3-tier-sap-systems"></a><span data-ttu-id="f41ff-1508">Större 3-skikts SAP-system</span><span class="sxs-lookup"><span data-stu-id="f41ff-1508">Larger 3-Tier SAP systems</span></span>
<span data-ttu-id="f41ff-1509">Hög tillgänglighet aspekter av 3-skikts SAP konfigurationer fick beskrivs tidigare redan.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1509">High-Availability aspects of 3-Tier SAP configurations got discussed in earlier sections already.</span></span> <span data-ttu-id="f41ff-1510">Men vad händer om system där DBMS-serverkrav är för stort för att det finns i Azure, men programnivå SAP kan distribueras till Azure?</span><span class="sxs-lookup"><span data-stu-id="f41ff-1510">But what about systems where the DBMS server requirements are too large to have it located in Azure, but the SAP application layer could be deployed into Azure?</span></span>

#### <a name="location-of-3-tier-sap-configurations"></a><span data-ttu-id="f41ff-1511">Platsen för 3-skikts SAP-konfigurationer</span><span class="sxs-lookup"><span data-stu-id="f41ff-1511">Location of 3-Tier SAP configurations</span></span>
<span data-ttu-id="f41ff-1512">Det går inte för att dela program nivån sig själv eller i program- och DBMS tjänstnivån mellan lokala och Azure.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1512">It is not supported to split the application tier itself or the application and DBMS tier between on-premises and Azure.</span></span> <span data-ttu-id="f41ff-1513">En SAP-systemet är antingen helt distribuerade lokalt eller i Azure.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1513">A SAP system is either completely deployed on-premises OR in Azure.</span></span> <span data-ttu-id="f41ff-1514">Det är också inte stöd för några av de programservrar som kör lokalt och vissa andra i Azure.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1514">It is also not supported to have some of the application servers run on-premises and some others in Azure.</span></span> <span data-ttu-id="f41ff-1515">Det är startpunkten för diskussionen.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1515">That is the starting point of the discussion.</span></span> <span data-ttu-id="f41ff-1516">Vi också stöder inte för att ha DBMS-komponenterna i en SAP-system och SAP server Applikationsnivån distribueras i två olika Azure-regioner.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1516">We also are not supporting to have the DBMS components of a SAP system and the SAP application server layer deployed in two different Azure Regions.</span></span> <span data-ttu-id="f41ff-1517">T.ex.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1517">E.g.</span></span> <span data-ttu-id="f41ff-1518">DBMS i USA, västra och SAP programnivå i centrala USA.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1518">DBMS in West US and SAP application layer in Central US.</span></span> <span data-ttu-id="f41ff-1519">Orsaken till inte har stöd för sådana konfigurationer är latens känslighet för SAP NetWeaver-arkitekturen.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1519">Reason for not supporting such configurations is the latency sensitivity of the SAP NetWeaver architecture.</span></span>

<span data-ttu-id="f41ff-1520">Dock under förra året data center partner utvecklat samtidigt platser till Azure-regioner.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1520">However, over the course of last year data center partners developed co-locations to Azure Regions.</span></span> <span data-ttu-id="f41ff-1521">Dessa medarbetare platser är ofta mycket nära till fysiska Azure data datacenter i en Azure-Region.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1521">These co-locations often are in very close proximity to the physical Azure data centers within an Azure Region.</span></span> <span data-ttu-id="f41ff-1522">Korta avstånd och anslutning av tillgångar i samplacering via ExpressRoute till Azure kan resultera i en latens som är mindre än 2 MS.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1522">The short distance and connection of assets in the co-location through ExpressRoute into Azure can result in a latency that is less than 2ms.</span></span> <span data-ttu-id="f41ff-1523">I sådana fall för att hitta DBMS-lagret (inklusive lagring SAN/NAS) i en samplacering och SAP är programnivå i Azure möjligt.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1523">In such cases, to locate the DBMS layer (including storage SAN/NAS) in such a co-location and the SAP application layer in Azure is possible.</span></span> <span data-ttu-id="f41ff-1524">Från och med Dec 2015 har vi inte alla distributioner som de som.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1524">As of Dec 2015, we don’t have any deployments like that.</span></span> <span data-ttu-id="f41ff-1525">Men olika kunder med icke-SAP application-distributioner använder redan dessa metoder.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1525">But different customers with non-SAP application deployments are using such approaches already.</span></span>

### <a name="offline-backup-of-sap-systems"></a><span data-ttu-id="f41ff-1526">Offline säkerhetskopiering av SAP-system</span><span class="sxs-lookup"><span data-stu-id="f41ff-1526">Offline Backup of SAP systems</span></span>
<span data-ttu-id="f41ff-1527">Beroende på hur SAP valt (2 eller 3-nivåer) det kan vara nödvändigt att säkerhetskopiering.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1527">Dependent on the SAP configuration chosen (2-Tier or 3-Tier) there could be a need to backup.</span></span> <span data-ttu-id="f41ff-1528">Innehållet i Virtuellt datorn plus ha en säkerhetskopia av databasen.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1528">The content of the VM itself plus to have a backup of the database.</span></span> <span data-ttu-id="f41ff-1529">DBMS relaterade säkerhetskopieringar förväntas göras med metoderna i databasen.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1529">The DBMS related backups are expected to be done with database methods.</span></span> <span data-ttu-id="f41ff-1530">En detaljerad beskrivning av olika databaser finns i [DBMS guiden][dbms-guide].</span><span class="sxs-lookup"><span data-stu-id="f41ff-1530">A detailed description for the different databases, can be found in [DBMS Guide][dbms-guide].</span></span> <span data-ttu-id="f41ff-1531">Å andra sidan kan SAP-data säkerhetskopieras på ett sätt som offline (inklusive vad databasen) enligt beskrivningen i det här avsnittet online eller som beskrivs i nästa avsnitt.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1531">On the other hand, the SAP data can be backed up in an offline manner (including the database content as well) as described in this section or online as described in the next section.</span></span>

<span data-ttu-id="f41ff-1532">Offlinesäkerhetskopiering kräver i princip en avstängning av den virtuella datorn via Azure Portal och en kopia av basdisk för VM samt alla anslutna virtuella hårddiskar till den virtuella datorn.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1532">The offline backup would basically require a shutdown of the VM through the Azure Portal and a copy of the base VM disk plus all attached VHDs to the VM.</span></span> <span data-ttu-id="f41ff-1533">Detta skulle bevara en punkt i tiden avbildningen av den virtuella datorn och dess associerade disk.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1533">This would preserve a point in time image of the VM and its associated disk.</span></span> <span data-ttu-id="f41ff-1534">Det rekommenderas att kopiera säkerhetskopiorna till en annan Azure Storage-konto.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1534">It is recommended to copy the ‘backups’ into a different Azure Storage Account.</span></span> <span data-ttu-id="f41ff-1535">Därför förfarandet som beskrivs i kapitlet [kopierar diskar mellan Azure Storage-konton] [ planning-guide-5.4.2] i det här dokumentet skulle tillämpas.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1535">Hence the procedure described in chapter [Copying disks between Azure Storage Accounts][planning-guide-5.4.2] of this document would apply.</span></span>
<span data-ttu-id="f41ff-1536">Förutom avstängningen med en Azure-portalen kan också göra det via Powershell eller CLI som beskrivs här: <https://azure.microsoft.com/documentation/articles/virtual-machines-deploy-rmtemplates-powershell/></span><span class="sxs-lookup"><span data-stu-id="f41ff-1536">Besides the shutdown using the Azure Portal one can also do it via Powershell or CLI as described here : <https://azure.microsoft.com/documentation/articles/virtual-machines-deploy-rmtemplates-powershell/></span></span>

<span data-ttu-id="f41ff-1537">En återställning av det aktuella tillståndet skulle består av borttagning av grundläggande VM samt grundläggande VM ursprungliga diskar och monterade virtuella hårddiskar, kopierar de sparade virtuella hårddiskarna till den ursprungliga Storage-konto och omdistribuera systemet.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1537">A restore of that state would consist of deleting the base VM as well as the original disks of the base VM and mounted VHDs, copying back the saved VHDs to the original Storage Account and then redeploying the system.</span></span>
<span data-ttu-id="f41ff-1538">Den här artikeln visar ett exempel så att den här processen i Powershell-skript: <http://www.westerndevs.com/azure-snapshots/></span><span class="sxs-lookup"><span data-stu-id="f41ff-1538">This article shows an example how to script this process in Powershell : <http://www.westerndevs.com/azure-snapshots/></span></span>

<span data-ttu-id="f41ff-1539">Kontrollera att installera en ny SAP-licens eftersom restoing en säkerhetskopiering som beskrivs ovan skapar en ny maskinvarunyckel.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1539">Please make sure to install a new SAP license since restoing a VM backup as described above creates a new hardware key.</span></span>

### <a name="online-backup-of-an-sap-system"></a><span data-ttu-id="f41ff-1540">Onlinesäkerhetskopiering för en SAP-system</span><span class="sxs-lookup"><span data-stu-id="f41ff-1540">Online backup of an SAP system</span></span>
<span data-ttu-id="f41ff-1541">Säkerhetskopiering av DBMS utförs med DBMS-specifika metoder som beskrivs i den [DBMS guiden][dbms-guide].</span><span class="sxs-lookup"><span data-stu-id="f41ff-1541">Backup of the DBMS is performed with DBMS specific methods as described in the [DBMS Guide][dbms-guide].</span></span>

<span data-ttu-id="f41ff-1542">Andra virtuella datorer i SAP-system kan säkerhetskopieras med funktioner för säkerhetskopiering av Azure virtuella datorer.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1542">Other VMs within the SAP system can be backed up using Azure Virtual Machine Backup functionality.</span></span> <span data-ttu-id="f41ff-1543">Azure Virtual Machine säkerhetskopiering fick introduceras tidigt i 2015 och under tiden är en metod som standard för att säkerhetskopiera en fullständig virtuell dator i Azure.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1543">Azure Virtual Machine Backup got introduced early in 2015 and meanwhile is a standard method to backup a complete VM in Azure.</span></span> <span data-ttu-id="f41ff-1544">Azure-säkerhetskopiering lagrar säkerhetskopieringar i Azure och gör en återställning av en virtuell dator igen.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1544">Azure Backup stores the backups in Azure and allows a restore of a VM again.</span></span>

> [!NOTE]
> <span data-ttu-id="f41ff-1545">Från och med Dec 2015 med säkerhetskopiering behålls inte unikt ID för virtuell dator som används för SAP-licensiering.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1545">As of Dec 2015 using VM Backup does NOT keep the unique VM ID which is used for SAP licensing.</span></span> <span data-ttu-id="f41ff-1546">Det innebär att en återställning från en säkerhetskopiering måste du installera en ny SAP licensnyckel som den återställda virtuella datorn ska anses vara en ny virtuell dator och inte en ersättning för det tidigare som har sparats.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1546">This means that a restore from a VM backup requires installation of a new SAP license key as the restored VM is considered to be a new VM and not a replacement of the former one which was saved.</span></span>
> <span data-ttu-id="f41ff-1547">Jan 2016 stöder Azure VM Backup inte virtuella datorer som distribueras med Azure Resourc Manager ännu.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1547">As of Jan 2016 Azure VM Backup doesn't support VMs that are deployed with Azure Resourc Manager yet.</span></span>
>
> ![Windows][Logo_Windows] <span data-ttu-id="f41ff-1549">Windows</span><span class="sxs-lookup"><span data-stu-id="f41ff-1549">Windows</span></span>
>
> <span data-ttu-id="f41ff-1550">Teoretiskt virtuella datorer som kör databaser kan säkerhetskopieras på ett konsekvent sätt om DBMS-system har stöd för Windows-VSS (Volume Shadow Copy Service <https://msdn.microsoft.com/library/windows/desktop/bb968832(v=vs.85).aspx> ) som t.ex. SQL Server.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1550">Theoretically VMs that run databases can be backed up in a consistent manner as well if the DBMS systems supports the Windows VSS (Volume Shadow Copy Service <https://msdn.microsoft.com/library/windows/desktop/bb968832(v=vs.85).aspx> ) as e.g. SQL Server does.</span></span>
> <span data-ttu-id="f41ff-1551">Tänk dock som baseras på Virtuella Azure-säkerhetskopieringar i tidpunkt återställer databaser inte är möjligt.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1551">However, be aware that based on Azure VM backups point-in-time restores of databases are not possible.</span></span> <span data-ttu-id="f41ff-1552">Därför vi rekommenderar att du genomför säkerhetskopieringar av databaser med DBMS-funktionalitet i stället för att förlita dig på Azure VM Backup</span><span class="sxs-lookup"><span data-stu-id="f41ff-1552">Therefore, the recommendation is to perform backups of databases with DBMS functionality instead of relying on Azure VM Backup</span></span>
>
> <span data-ttu-id="f41ff-1553">För att bekanta dig med säkerhetskopiering av Azure virtuella datorer starta här: <https://azure.microsoft.com/documentation/articles/backup-azure-vms/>.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1553">To get familiar with Azure Virtual Machine Backup please start here: <https://azure.microsoft.com/documentation/articles/backup-azure-vms/>.</span></span>
>
> <span data-ttu-id="f41ff-1554">Andra möjligheterna är att använda en kombination av Microsoft Data Protection Manager installeras i en virtuell dator i Azure och Azure Backup till databaser för säkerhetskopiering/återställning.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1554">Other possibilities are to use a combination of Microsoft Data Protection Manager installed in an Azure VM and Azure Backup to backup/restore databases.</span></span> <span data-ttu-id="f41ff-1555">Mer information hittar du här: <https://azure.microsoft.com/documentation/articles/backup-azure-dpm-introduction/>.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1555">More information can be found here: <https://azure.microsoft.com/documentation/articles/backup-azure-dpm-introduction/>.</span></span>  
>
> ![Linux][Logo_Linux] <span data-ttu-id="f41ff-1557">Linux</span><span class="sxs-lookup"><span data-stu-id="f41ff-1557">Linux</span></span>
>
> <span data-ttu-id="f41ff-1558">Det finns ingen motsvarighet till Windows VSS i Linux.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1558">There is no equivalent to Windows VSS in Linux.</span></span> <span data-ttu-id="f41ff-1559">Endast filkonsekventa säkerhetskopior är därför möjligt men inte programkonsekvent säkerhetskopiering.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1559">Therefore only file-consistent backups are possible but not application-consistent backups.</span></span> <span data-ttu-id="f41ff-1560">SAP DBMS säkerhetskopieringen ska göras med hjälp av DBMS-funktioner.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1560">The SAP DBMS backup should be done using DBMS functionality.</span></span> <span data-ttu-id="f41ff-1561">Filsystem som innehåller SAP relaterade data kan sparas, t.ex. använder tar som beskrivs här: <http://help.sap.com/saphelp_nw70ehp2/helpdata/en/d3/c0da3ccbb04d35b186041ba6ac301f/content.htm></span><span class="sxs-lookup"><span data-stu-id="f41ff-1561">The file system which includes the SAP related data can be saved e.g. using tar as described here : <http://help.sap.com/saphelp_nw70ehp2/helpdata/en/d3/c0da3ccbb04d35b186041ba6ac301f/content.htm></span></span>
>
>

### <a name="azure-as-dr-site-for-production-sap-landscapes"></a><span data-ttu-id="f41ff-1562">Azure som DR-plats för produktion SAP landskap</span><span class="sxs-lookup"><span data-stu-id="f41ff-1562">Azure as DR site for production SAP landscapes</span></span>
<span data-ttu-id="f41ff-1563">Eftersom Mid 2014 aktivera tillägg för olika komponenter runt Hyper-V, System Center och Azure användningen av Azure som DR-plats för virtuella datorer som körs lokalt baserat på Hyper-V.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1563">Since Mid 2014, extensions to various components around Hyper-V, System Center and Azure enable the usage of Azure as DR site for VMs running on-premises based on Hyper-V.</span></span>

<span data-ttu-id="f41ff-1564">En blogg med information om hur du distribuerar den här lösningen dokumenteras här: <http://blogs.msdn.com/b/saponsqlserver/archive/2014/11/19/protecting-sap-solutions-with-azure-site-recovery.aspx></span><span class="sxs-lookup"><span data-stu-id="f41ff-1564">A blog detailing how to deploy this solution is documented here: <http://blogs.msdn.com/b/saponsqlserver/archive/2014/11/19/protecting-sap-solutions-with-azure-site-recovery.aspx></span></span>

## <a name="summary"></a><span data-ttu-id="f41ff-1565">Sammanfattning</span><span class="sxs-lookup"><span data-stu-id="f41ff-1565">Summary</span></span>
<span data-ttu-id="f41ff-1566">Viktiga punkter med hög tillgänglighet för SAP-system i Azure är:</span><span class="sxs-lookup"><span data-stu-id="f41ff-1566">The key points of High Availability for SAP systems in Azure are:</span></span>

* <span data-ttu-id="f41ff-1567">Vid denna tidpunkt, kan inte den SAP felpunkten skyddas på samma sätt som kan utföras i lokala distributioner.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1567">At this point in time, the SAP single point of failure cannot be secured exactly the same way as it can be done in on-premises deployments.</span></span> <span data-ttu-id="f41ff-1568">Det beror på den delade disken inte kan ännu genereras i Azure kluster utan att använda 3 tillverkare.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1568">The reason is that Shared Disk clusters can’t yet be built in Azure without the use of 3rd party software.</span></span>
* <span data-ttu-id="f41ff-1569">Du måste använda DBMS-funktioner som inte är beroende av delad disk klustret teknik för DBMS-lagret.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1569">For the DBMS layer you need to use DBMS functionality that does not rely on shared disk cluster technology.</span></span> <span data-ttu-id="f41ff-1570">Information som finns dokumenterade i den [DBMS guiden][dbms-guide].</span><span class="sxs-lookup"><span data-stu-id="f41ff-1570">Details are documented in the [DBMS Guide][dbms-guide].</span></span>
* <span data-ttu-id="f41ff-1571">Du bör använda Azure-Tillgänglighetsuppsättningar för att minimera effekten av problem inom Feldomäner i Azure-infrastruktur eller värden Underhåll:</span><span class="sxs-lookup"><span data-stu-id="f41ff-1571">To minimize the impact of problems within Fault Domains in the Azure infrastructure or host maintenance, you should use Azure Availability Sets:</span></span>
  * <span data-ttu-id="f41ff-1572">Du bör ha en Tillgänglighetsuppsättning för SAP programnivå.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1572">It is recommended to have one Availability Set for the SAP application layer.</span></span>
  * <span data-ttu-id="f41ff-1573">Du bör ha en separat Tillgänglighetsuppsättning för SAP DBMS-lagret.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1573">It is recommended to have a separate Availability Set for the SAP DBMS layer.</span></span>
  * <span data-ttu-id="f41ff-1574">Du bör inte använda samma Tillgänglighetsuppsättning för virtuella datorer i olika SAP-system.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1574">It is NOT recommended to apply the same Availability set for VMs of different SAP systems.</span></span>
* <span data-ttu-id="f41ff-1575">För säkerhetskopiering av SAP DBMS-lagret är Kontrollera den [DBMS guiden][dbms-guide].</span><span class="sxs-lookup"><span data-stu-id="f41ff-1575">For Backup purposes of the SAP DBMS layer, please check the [DBMS Guide][dbms-guide].</span></span>
* <span data-ttu-id="f41ff-1576">Säkerhetskopiera SAP dialogrutan instanser är lite meningsfullt eftersom det går snabbare att distribuera enkel dialogruta instanser.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1576">Backing up SAP Dialog instances makes little sense since it is usually faster to redeploy simple dialog instances.</span></span>
* <span data-ttu-id="f41ff-1577">Säkerhetskopiera den virtuella datorn som innehåller den globala katalogen för SAP-systemet och med alla profiler för olika instanser särskilt meningsfullt och bör utföras med Windows Säkerhetskopiering eller t.ex. tar på Linux.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1577">Backing up the VM which contains the global directory of the SAP system and with it all the profiles of the different instances, does make sense and should be performed with Windows Backup or e.g. tar on Linux.</span></span> <span data-ttu-id="f41ff-1578">Eftersom det är skillnad mellan Windows Server 2008 (R2) och Windows Server 2012 (R2), vilket gör det enklare att säkerhetskopiera med hjälp av den nyare Windows-Server släpper rekommenderar vi för att köra Windows Server 2012 (R2) som gästoperativsystem för Windows.</span><span class="sxs-lookup"><span data-stu-id="f41ff-1578">Since there are differences between Windows Server 2008 (R2) and Windows Server 2012 (R2), which make it easier to backup using the more recent Windows Server releases, we recommend to run Windows Server 2012 (R2) as Windows guest operating system.</span></span>

---
title: "aaaAvailability anger för virtuella Windows-datorer i Azure | Microsoft Docs"
description: "Läs mer om hello viktiga design och implementeringslösning riktlinjer för att distribuera Tillgänglighetsuppsättningar i Azure infrastrukturtjänster."
documentationcenter: 
services: virtual-machines-windows
author: iainfoulds
manager: timlt
editor: 
tags: azure-resource-manager
ms.assetid: f9449f58-664b-4d5d-82f6-84c5d083047f
ms.service: virtual-machines-windows
ms.workload: infrastructure-services
ms.tgt_pltfrm: vm-windows
ms.devlang: na
ms.topic: article
ms.date: 06/26/2017
ms.author: iainfou
ms.custom: H1Hack27Feb2017
ms.openlocfilehash: cc35fd1e913434d9facb94116edb1b1c30447c71
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: sv-SE
ms.lasthandoff: 10/06/2017
---
# <a name="azure-availability-sets-guidelines-for-windows-vms"></a><span data-ttu-id="dd229-103">Azure tillgänglighet anger riktlinjer för virtuella Windows-datorer</span><span class="sxs-lookup"><span data-stu-id="dd229-103">Azure availability sets guidelines for Windows VMs</span></span>

[!INCLUDE [virtual-machines-windows-infrastructure-guidelines-intro](../../../includes/virtual-machines-windows-infrastructure-guidelines-intro.md)]

<span data-ttu-id="dd229-104">Den här artikeln fokuserar på förstå hello krävs planeringssteg för tillgänglighetsuppsättningar tooensure dina program är tillgängligt under planerad eller oplanerad händelser.</span><span class="sxs-lookup"><span data-stu-id="dd229-104">This article focuses on understanding hello required planning steps for availability sets tooensure your applications remains accessible during planned or unplanned events.</span></span>

## <a name="implementation-guidelines-for-availability-sets"></a><span data-ttu-id="dd229-105">Implementeringsriktlinjer för tillgänglighetsuppsättningar</span><span class="sxs-lookup"><span data-stu-id="dd229-105">Implementation guidelines for availability sets</span></span>
<span data-ttu-id="dd229-106">Beslut:</span><span class="sxs-lookup"><span data-stu-id="dd229-106">Decisions:</span></span>

* <span data-ttu-id="dd229-107">Hur många tillgänglighetsuppsättningar behöver du för hello olika roller och nivåer i ditt program i infrastrukturen?</span><span class="sxs-lookup"><span data-stu-id="dd229-107">How many availability sets do you need for hello various roles and tiers in your application infrastructure?</span></span>

<span data-ttu-id="dd229-108">Aktiviteter:</span><span class="sxs-lookup"><span data-stu-id="dd229-108">Tasks:</span></span>

* <span data-ttu-id="dd229-109">Definiera hello antal virtuella datorer i varje nivå för program som du behöver.</span><span class="sxs-lookup"><span data-stu-id="dd229-109">Define hello number of VMs in each application tier you require.</span></span>
* <span data-ttu-id="dd229-110">Kontrollera om du behöver tooadjust hello antalet fel eller update domäner toobe som används för ditt program.</span><span class="sxs-lookup"><span data-stu-id="dd229-110">Determine if you need tooadjust hello number of fault or update domains toobe used for your application.</span></span>
* <span data-ttu-id="dd229-111">Definiera hello krävs tillgänglighetsuppsättningar med ditt namngivningskonvention och vilka virtuella datorer finns i dem.</span><span class="sxs-lookup"><span data-stu-id="dd229-111">Define hello required availability sets using your naming convention and what VMs reside in them.</span></span> <span data-ttu-id="dd229-112">En virtuell dator kan endast finnas i en tillgänglighetsuppsättning.</span><span class="sxs-lookup"><span data-stu-id="dd229-112">A VM can only reside in one availability set.</span></span>

## <a name="availability-sets"></a><span data-ttu-id="dd229-113">Tillgänglighetsuppsättningar</span><span class="sxs-lookup"><span data-stu-id="dd229-113">Availability sets</span></span>
<span data-ttu-id="dd229-114">I Azure, kan virtuella datorer (VM) placeras i tooa logisk gruppering som kallas en tillgänglighetsuppsättning.</span><span class="sxs-lookup"><span data-stu-id="dd229-114">In Azure, virtual machines (VMs) can be placed in tooa logical grouping called an availability set.</span></span> <span data-ttu-id="dd229-115">När du skapar virtuella datorer i en tillgänglighetsuppsättning distribuerar hello Azure-plattformen hello placeringen av dessa virtuella datorer över hello underliggande infrastruktur.</span><span class="sxs-lookup"><span data-stu-id="dd229-115">When you create VMs within an availability set, hello Azure platform distributes hello placement of those VMs across hello underlying infrastructure.</span></span> <span data-ttu-id="dd229-116">Det bör finnas ett planerat underhåll händelse toohello Azure-plattformen eller en underliggande maskinvara eller infrastruktur fel, hello användning av tillgänglighetsuppsättningar garanterar att minst en virtuell dator är igång.</span><span class="sxs-lookup"><span data-stu-id="dd229-116">Should there be a planned maintenance event toohello Azure platform or an underlying hardware / infrastructure fault, hello use of availability sets ensures that at least one VM remains running.</span></span>

<span data-ttu-id="dd229-117">Som bästa praxis bör program inte finns på en enda virtuell dator.</span><span class="sxs-lookup"><span data-stu-id="dd229-117">As a best practice, applications should not reside on a single VM.</span></span> <span data-ttu-id="dd229-118">En tillgänglighetsuppsättning som innehåller en enda virtuell dator tillgång inte till alla skydd från planerad eller oplanerad händelser i hello Azure-plattformen.</span><span class="sxs-lookup"><span data-stu-id="dd229-118">An availability set that contains a single VM doesn't gain any protection from planned or unplanned events within hello Azure platform.</span></span> <span data-ttu-id="dd229-119">Hej [Azure-serviceavtalet](https://azure.microsoft.com/support/legal/sla/virtual-machines) kräver två eller flera virtuella datorer i en tillgänglighet set tooallow hello fördelning av virtuella datorer över hello underliggande infrastruktur.</span><span class="sxs-lookup"><span data-stu-id="dd229-119">hello [Azure SLA](https://azure.microsoft.com/support/legal/sla/virtual-machines) requires two or more VMs within an availability set tooallow hello distribution of VMs across hello underlying infrastructure.</span></span> <span data-ttu-id="dd229-120">Om du använder [Azure Premium Storage](../../storage/storage-premium-storage.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json), hello Azure-serviceavtalet gäller tooa enkel VM.</span><span class="sxs-lookup"><span data-stu-id="dd229-120">If you are using [Azure Premium Storage](../../storage/storage-premium-storage.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json), hello Azure SLA applies tooa single VM.</span></span>

<span data-ttu-id="dd229-121">hello underliggande infrastruktur i Azure är uppdelat i toomultiple maskinvara kluster.</span><span class="sxs-lookup"><span data-stu-id="dd229-121">hello underlying infrastructure in Azure is divided in toomultiple hardware clusters.</span></span> <span data-ttu-id="dd229-122">Varje kluster maskinvara har stöd för ett intervall för VM-storlekar.</span><span class="sxs-lookup"><span data-stu-id="dd229-122">Each hardware cluster can support a range of VM sizes.</span></span> <span data-ttu-id="dd229-123">En tillgänglighetsuppsättning kan bara finnas på ett enda maskinvara kluster när som helst i tid.</span><span class="sxs-lookup"><span data-stu-id="dd229-123">An availability set can only be hosted on a single hardware cluster at any point in time.</span></span> <span data-ttu-id="dd229-124">Hello intervall för VM-storlekar som kan finnas i en enda tillgänglighetsuppsättning är därför begränsade toohello intervall för VM-storlekar som stöds av hello maskinvara klustret.</span><span class="sxs-lookup"><span data-stu-id="dd229-124">Therefore, hello range of VM sizes that can exist in a single availability set is limited toohello range of VM sizes supported by hello hardware cluster.</span></span> <span data-ttu-id="dd229-125">hello maskinvara kluster för hello tillgänglighetsuppsättning är markerad när hello första virtuella datorn i hello tillgänglighetsuppsättning har distribuerats eller starta hello första virtuella dator i en tillgänglighetsuppsättning där alla virtuella datorer är för närvarande i hello stoppats frigjorts tillstånd.</span><span class="sxs-lookup"><span data-stu-id="dd229-125">hello hardware cluster for hello availability set is selected when hello first VM in hello availability set is deployed or when starting hello first VM in an availability set where all VMs are currently in hello stopped-deallocated state.</span></span> <span data-ttu-id="dd229-126">hello följande PowerShell-kommando kan vara används toodetermine hello intervall för VM-storlek för en tillgänglighetsuppsättning ”: Get-AzureRmVMSize - ResourceGroupName \<sträng\> - AvailabilitySetName \<sträng\> "</span><span class="sxs-lookup"><span data-stu-id="dd229-126">hello following PowerShell command can be used toodetermine hello range of VM sizes available for an availability set: "Get-AzureRmVMSize -ResourceGroupName \<string\> -AvailabilitySetName \<string\>"</span></span>

<span data-ttu-id="dd229-127">Varje maskinvara kluster är uppdelat i toomultiple uppdatering domäner och feldomäner.</span><span class="sxs-lookup"><span data-stu-id="dd229-127">Each hardware cluster is divided in toomultiple update domains and fault domains.</span></span> <span data-ttu-id="dd229-128">Dessa domäner definieras av vilka värdar dela en gemensam uppdateringscykel eller resursen liknande fysisk infrastruktur, till exempel ström och nätverk.</span><span class="sxs-lookup"><span data-stu-id="dd229-128">These domains are defined by what hosts share a common update cycle, or share similar physical infrastructure such as power and networking.</span></span> <span data-ttu-id="dd229-129">Azure distribuerar automatiskt dina virtuella datorer i en tillgänglighetsuppsättning över domäner toomaintain tillgänglighet och feltolerans.</span><span class="sxs-lookup"><span data-stu-id="dd229-129">Azure automatically distributes your VMs within an availability set across domains toomaintain availability and fault tolerance.</span></span> <span data-ttu-id="dd229-130">Beroende på hello storlek för programmet och hello antal virtuella datorer i en tillgänglighetsuppsättning, kan du justera hello antalet domäner som du vill toouse.</span><span class="sxs-lookup"><span data-stu-id="dd229-130">Depending on hello size of your application and hello number of VMs within an availability set, you can adjust hello number of domains you wish toouse.</span></span> <span data-ttu-id="dd229-131">Du kan läsa mer om [hantera tillgänglighet och domäner för uppdatering och feltolerans](manage-availability.md).</span><span class="sxs-lookup"><span data-stu-id="dd229-131">You can read more about [managing availability and use of update and fault domains](manage-availability.md).</span></span>

<span data-ttu-id="dd229-132">Planera hello programnivåerna som du använder när du designar infrastrukturen för programmet.</span><span class="sxs-lookup"><span data-stu-id="dd229-132">When designing your application infrastructure, plan hello application tiers that you use.</span></span> <span data-ttu-id="dd229-133">Grupp virtuella datorer som fungerar hello samma syfte i tooavailability uppsättningar, till exempel en tillgänglighetsuppsättning för dina frontend virtuella datorer som kör IIS.</span><span class="sxs-lookup"><span data-stu-id="dd229-133">Group VMs that serve hello same purpose in tooavailability sets, such as an availability set for your front-end VMs running IIS.</span></span> <span data-ttu-id="dd229-134">Skapa en separat tillgänglighetsuppsättning för din serverdel virtuella datorer som kör SQL Server.</span><span class="sxs-lookup"><span data-stu-id="dd229-134">Create a separate availability set for your back-end VMs running SQL Server.</span></span> <span data-ttu-id="dd229-135">hello målet är tooensure att varje komponent i ditt program är skyddat av en tillgänglighetsuppsättning och minst en gång instans alltid ska vara igång.</span><span class="sxs-lookup"><span data-stu-id="dd229-135">hello goal is tooensure that each component of your application is protected by an availability set and at least once instance always remains running.</span></span>

<span data-ttu-id="dd229-136">Belastningsutjämnare kan användas framför varje program nivå toowork tillsammans med en tillgänglighetsuppsättning och kontrollera trafik kan alltid dirigeras tooa kör-instansen.</span><span class="sxs-lookup"><span data-stu-id="dd229-136">Load balancers can be utilized in front of each application tier toowork alongside an availability set and ensure traffic can always be routed tooa running instance.</span></span> <span data-ttu-id="dd229-137">Dina virtuella datorer kan fortsätta att köras under planerade och oplanerat underhållshändelser utan en belastningsutjämnare, men användaren kanske inte kan tooresolve dem om hello primära virtuella datorn är inte tillgänglig.</span><span class="sxs-lookup"><span data-stu-id="dd229-137">Without a load balancer, your VMs may continue running throughout planned and unplanned maintenance events, but your end user may not be able tooresolve them if hello primary VM is unavailable.</span></span>

<span data-ttu-id="dd229-138">Designa programmet för hög tillgänglighet i lagringsskiktet.</span><span class="sxs-lookup"><span data-stu-id="dd229-138">Design your application for high availability at storage layer.</span></span> <span data-ttu-id="dd229-139">hello bästa praxis är för[använder hanterade diskar för virtuella datorer i en Tillgänglighetsuppsättning](manage-availability.md#use-managed-disks-for-vms-in-an-availability-set).</span><span class="sxs-lookup"><span data-stu-id="dd229-139">hello best practice is too[use Managed Disks for VMs in an Availability Set](manage-availability.md#use-managed-disks-for-vms-in-an-availability-set).</span></span> <span data-ttu-id="dd229-140">Om du använder ohanterade diskar, rekommenderar vi du för[konvertera virtuella datorer i Tillgänglighetsuppsättningen toouse hanterade diskar](convert-unmanaged-to-managed-disks.md#convert-vms-in-an-availability-set).</span><span class="sxs-lookup"><span data-stu-id="dd229-140">If you are currently using unmanaged disks, we highly recommend you too[convert VMs in Availability Set toouse Managed Disks](convert-unmanaged-to-managed-disks.md#convert-vms-in-an-availability-set).</span></span>

## <a name="next-steps"></a><span data-ttu-id="dd229-141">Nästa steg</span><span class="sxs-lookup"><span data-stu-id="dd229-141">Next steps</span></span>
[!INCLUDE [virtual-machines-windows-infrastructure-guidelines-next-steps](../../../includes/virtual-machines-windows-infrastructure-guidelines-next-steps.md)]

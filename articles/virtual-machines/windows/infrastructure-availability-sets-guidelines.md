---
title: "Tillgänglighetsuppsättningar för virtuella Windows-datorer i Azure | Microsoft Docs"
description: "Lär dig mer om viktiga riktlinjer för designen och implementeringen för distribution av Tillgänglighetsuppsättningar i Azure infrastrukturtjänster."
documentationcenter: 
services: virtual-machines-windows
author: iainfoulds
manager: timlt
editor: 
tags: azure-resource-manager
ms.assetid: f9449f58-664b-4d5d-82f6-84c5d083047f
ms.service: virtual-machines-windows
ms.workload: infrastructure-services
ms.tgt_pltfrm: vm-windows
ms.devlang: na
ms.topic: article
ms.date: 06/26/2017
ms.author: iainfou
ms.custom: H1Hack27Feb2017
ms.openlocfilehash: f94004fbd32dcc8a2394fcdfe2ac61519364f176
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: sv-SE
ms.lasthandoff: 07/11/2017
---
# <a name="azure-availability-sets-guidelines-for-windows-vms"></a><span data-ttu-id="f1582-103">Azure tillgänglighet anger riktlinjer för virtuella Windows-datorer</span><span class="sxs-lookup"><span data-stu-id="f1582-103">Azure availability sets guidelines for Windows VMs</span></span>

[!INCLUDE [virtual-machines-windows-infrastructure-guidelines-intro](../../../includes/virtual-machines-windows-infrastructure-guidelines-intro.md)]

<span data-ttu-id="f1582-104">Den här artikeln fokuserar på att förstå nödvändiga planeringsstegen för tillgänglighetsuppsättningar för att se till att ditt program är tillgängliga under planerade eller oplanerade händelser.</span><span class="sxs-lookup"><span data-stu-id="f1582-104">This article focuses on understanding the required planning steps for availability sets to ensure your applications remains accessible during planned or unplanned events.</span></span>

## <a name="implementation-guidelines-for-availability-sets"></a><span data-ttu-id="f1582-105">Implementeringsriktlinjer för tillgänglighetsuppsättningar</span><span class="sxs-lookup"><span data-stu-id="f1582-105">Implementation guidelines for availability sets</span></span>
<span data-ttu-id="f1582-106">Beslut:</span><span class="sxs-lookup"><span data-stu-id="f1582-106">Decisions:</span></span>

* <span data-ttu-id="f1582-107">Hur många tillgänglighetsuppsättningar behöver du för olika roller och nivåer i ditt program i infrastrukturen?</span><span class="sxs-lookup"><span data-stu-id="f1582-107">How many availability sets do you need for the various roles and tiers in your application infrastructure?</span></span>

<span data-ttu-id="f1582-108">Aktiviteter:</span><span class="sxs-lookup"><span data-stu-id="f1582-108">Tasks:</span></span>

* <span data-ttu-id="f1582-109">Ange hur många virtuella datorer i varje nivå för program som du behöver.</span><span class="sxs-lookup"><span data-stu-id="f1582-109">Define the number of VMs in each application tier you require.</span></span>
* <span data-ttu-id="f1582-110">Bestäm om du behöver justera antalet fel eller uppdatera domäner som ska användas för ditt program.</span><span class="sxs-lookup"><span data-stu-id="f1582-110">Determine if you need to adjust the number of fault or update domains to be used for your application.</span></span>
* <span data-ttu-id="f1582-111">Definiera de nödvändiga tillgänglighetsuppsättningar med ditt namngivningskonvention och vad virtuella datorer finns i dem.</span><span class="sxs-lookup"><span data-stu-id="f1582-111">Define the required availability sets using your naming convention and what VMs reside in them.</span></span> <span data-ttu-id="f1582-112">En virtuell dator kan endast finnas i en tillgänglighetsuppsättning.</span><span class="sxs-lookup"><span data-stu-id="f1582-112">A VM can only reside in one availability set.</span></span>

## <a name="availability-sets"></a><span data-ttu-id="f1582-113">Tillgänglighetsuppsättningar</span><span class="sxs-lookup"><span data-stu-id="f1582-113">Availability sets</span></span>
<span data-ttu-id="f1582-114">I Azure, kan virtuella datorer (VM) placeras i till en logisk gruppering som kallas en tillgänglighetsuppsättning.</span><span class="sxs-lookup"><span data-stu-id="f1582-114">In Azure, virtual machines (VMs) can be placed in to a logical grouping called an availability set.</span></span> <span data-ttu-id="f1582-115">När du skapar virtuella datorer i en tillgänglighetsuppsättning distribuerar Azure-plattformen placeringen av dessa virtuella datorer i den underliggande infrastrukturen.</span><span class="sxs-lookup"><span data-stu-id="f1582-115">When you create VMs within an availability set, the Azure platform distributes the placement of those VMs across the underlying infrastructure.</span></span> <span data-ttu-id="f1582-116">Det bör finnas en planerad underhållshändelse till Azure-plattformen eller en underliggande maskinvara eller infrastruktur fel, användning av tillgänglighetsuppsättningar garanterar att minst en virtuell dator är igång.</span><span class="sxs-lookup"><span data-stu-id="f1582-116">Should there be a planned maintenance event to the Azure platform or an underlying hardware / infrastructure fault, the use of availability sets ensures that at least one VM remains running.</span></span>

<span data-ttu-id="f1582-117">Som bästa praxis bör program inte finns på en enda virtuell dator.</span><span class="sxs-lookup"><span data-stu-id="f1582-117">As a best practice, applications should not reside on a single VM.</span></span> <span data-ttu-id="f1582-118">En tillgänglighetsuppsättning som innehåller en enda virtuell dator tillgång inte till alla skydd från planerad eller oplanerad händelser i Azure-plattformen.</span><span class="sxs-lookup"><span data-stu-id="f1582-118">An availability set that contains a single VM doesn't gain any protection from planned or unplanned events within the Azure platform.</span></span> <span data-ttu-id="f1582-119">Den [Azure-serviceavtalet](https://azure.microsoft.com/support/legal/sla/virtual-machines) kräver två eller flera virtuella datorer i en tillgänglighetsuppsättning för att tillåta distribution av virtuella datorer i den underliggande infrastrukturen.</span><span class="sxs-lookup"><span data-stu-id="f1582-119">The [Azure SLA](https://azure.microsoft.com/support/legal/sla/virtual-machines) requires two or more VMs within an availability set to allow the distribution of VMs across the underlying infrastructure.</span></span> <span data-ttu-id="f1582-120">Om du använder [Azure Premium Storage](../../storage/storage-premium-storage.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json), Azure-serviceavtalet gäller för en enda virtuell dator.</span><span class="sxs-lookup"><span data-stu-id="f1582-120">If you are using [Azure Premium Storage](../../storage/storage-premium-storage.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json), the Azure SLA applies to a single VM.</span></span>

<span data-ttu-id="f1582-121">Den underliggande infrastrukturen i Azure är uppdelat i till flera maskinvara kluster.</span><span class="sxs-lookup"><span data-stu-id="f1582-121">The underlying infrastructure in Azure is divided in to multiple hardware clusters.</span></span> <span data-ttu-id="f1582-122">Varje kluster maskinvara har stöd för ett intervall för VM-storlekar.</span><span class="sxs-lookup"><span data-stu-id="f1582-122">Each hardware cluster can support a range of VM sizes.</span></span> <span data-ttu-id="f1582-123">En tillgänglighetsuppsättning kan bara finnas på ett enda maskinvara kluster när som helst i tid.</span><span class="sxs-lookup"><span data-stu-id="f1582-123">An availability set can only be hosted on a single hardware cluster at any point in time.</span></span> <span data-ttu-id="f1582-124">Intervall för VM-storlekar som kan finnas i en enda tillgänglighetsuppsättning är därför begränsade till intervall för VM-storlekar som stöds av maskinvaran klustret.</span><span class="sxs-lookup"><span data-stu-id="f1582-124">Therefore, the range of VM sizes that can exist in a single availability set is limited to the range of VM sizes supported by the hardware cluster.</span></span> <span data-ttu-id="f1582-125">Kluster för maskinvara för tillgänglighetsuppsättningen är markerad när den första virtuella datorn i tillgänglighetsuppsättningen distribueras eller när du startar den första virtuella datorn i en tillgänglighetsuppsättning där alla virtuella datorer är för närvarande i tillståndet stoppad frigjorts.</span><span class="sxs-lookup"><span data-stu-id="f1582-125">The hardware cluster for the availability set is selected when the first VM in the availability set is deployed or when starting the first VM in an availability set where all VMs are currently in the stopped-deallocated state.</span></span> <span data-ttu-id="f1582-126">Följande PowerShell-kommando kan användas för att fastställa intervall för VM-storlekar för en tillgänglighetsuppsättning ”: Get-AzureRmVMSize - ResourceGroupName \<sträng\> - AvailabilitySetName \<sträng\>”</span><span class="sxs-lookup"><span data-stu-id="f1582-126">The following PowerShell command can be used to determine the range of VM sizes available for an availability set: "Get-AzureRmVMSize -ResourceGroupName \<string\> -AvailabilitySetName \<string\>"</span></span>

<span data-ttu-id="f1582-127">Varje maskinvara kluster är uppdelat i flera domäner för uppdatering och feldomäner.</span><span class="sxs-lookup"><span data-stu-id="f1582-127">Each hardware cluster is divided in to multiple update domains and fault domains.</span></span> <span data-ttu-id="f1582-128">Dessa domäner definieras av vilka värdar dela en gemensam uppdateringscykel eller resursen liknande fysisk infrastruktur, till exempel ström och nätverk.</span><span class="sxs-lookup"><span data-stu-id="f1582-128">These domains are defined by what hosts share a common update cycle, or share similar physical infrastructure such as power and networking.</span></span> <span data-ttu-id="f1582-129">Azure distribuerar automatiskt dina virtuella datorer i en tillgänglighetsuppsättning över domäner för att underhålla tillgänglighet och feltolerans.</span><span class="sxs-lookup"><span data-stu-id="f1582-129">Azure automatically distributes your VMs within an availability set across domains to maintain availability and fault tolerance.</span></span> <span data-ttu-id="f1582-130">Beroende på storleken på ditt program och antal virtuella datorer i en tillgänglighetsuppsättning, kan du justera antalet domäner som du vill använda.</span><span class="sxs-lookup"><span data-stu-id="f1582-130">Depending on the size of your application and the number of VMs within an availability set, you can adjust the number of domains you wish to use.</span></span> <span data-ttu-id="f1582-131">Du kan läsa mer om [hantera tillgänglighet och domäner för uppdatering och feltolerans](manage-availability.md).</span><span class="sxs-lookup"><span data-stu-id="f1582-131">You can read more about [managing availability and use of update and fault domains](manage-availability.md).</span></span>

<span data-ttu-id="f1582-132">Planera programnivåerna som du använder när du designar infrastrukturen för programmet.</span><span class="sxs-lookup"><span data-stu-id="f1582-132">When designing your application infrastructure, plan the application tiers that you use.</span></span> <span data-ttu-id="f1582-133">Grupp virtuella datorer som fungerar på samma sätt i till tillgänglighet anger till exempel en tillgänglighetsuppsättning för dina frontend virtuella datorer som kör IIS.</span><span class="sxs-lookup"><span data-stu-id="f1582-133">Group VMs that serve the same purpose in to availability sets, such as an availability set for your front-end VMs running IIS.</span></span> <span data-ttu-id="f1582-134">Skapa en separat tillgänglighetsuppsättning för din serverdel virtuella datorer som kör SQL Server.</span><span class="sxs-lookup"><span data-stu-id="f1582-134">Create a separate availability set for your back-end VMs running SQL Server.</span></span> <span data-ttu-id="f1582-135">Målet är att säkerställa att varje komponent i ditt program är skyddat av en tillgänglighetsuppsättning och minst en gång instans alltid ska vara igång.</span><span class="sxs-lookup"><span data-stu-id="f1582-135">The goal is to ensure that each component of your application is protected by an availability set and at least once instance always remains running.</span></span>

<span data-ttu-id="f1582-136">Belastningsutjämnare kan användas framför varje nivå för programmet att fungera tillsammans med en tillgänglighetsuppsättning och se till att trafiken kan alltid dirigeras till en instans som körs.</span><span class="sxs-lookup"><span data-stu-id="f1582-136">Load balancers can be utilized in front of each application tier to work alongside an availability set and ensure traffic can always be routed to a running instance.</span></span> <span data-ttu-id="f1582-137">Dina virtuella datorer kan fortsätta att köras under planerade och oplanerat underhållshändelser utan en belastningsutjämnare, men användaren kan inte kunna lösas om den primära virtuella datorn inte är tillgänglig.</span><span class="sxs-lookup"><span data-stu-id="f1582-137">Without a load balancer, your VMs may continue running throughout planned and unplanned maintenance events, but your end user may not be able to resolve them if the primary VM is unavailable.</span></span>

<span data-ttu-id="f1582-138">Designa programmet för hög tillgänglighet i lagringsskiktet.</span><span class="sxs-lookup"><span data-stu-id="f1582-138">Design your application for high availability at storage layer.</span></span> <span data-ttu-id="f1582-139">Det bästa sättet är att [använder hanterade diskar för virtuella datorer i en Tillgänglighetsuppsättning](manage-availability.md#use-managed-disks-for-vms-in-an-availability-set).</span><span class="sxs-lookup"><span data-stu-id="f1582-139">The best practice is to [use Managed Disks for VMs in an Availability Set](manage-availability.md#use-managed-disks-for-vms-in-an-availability-set).</span></span> <span data-ttu-id="f1582-140">Om du använder ohanterade diskar, rekommenderar vi att [konvertera virtuella datorer i Tillgänglighetsuppsättningen du använda hanterade diskar](convert-unmanaged-to-managed-disks.md#convert-vms-in-an-availability-set).</span><span class="sxs-lookup"><span data-stu-id="f1582-140">If you are currently using unmanaged disks, we highly recommend you to [convert VMs in Availability Set to use Managed Disks](convert-unmanaged-to-managed-disks.md#convert-vms-in-an-availability-set).</span></span>

## <a name="next-steps"></a><span data-ttu-id="f1582-141">Nästa steg</span><span class="sxs-lookup"><span data-stu-id="f1582-141">Next steps</span></span>
[!INCLUDE [virtual-machines-windows-infrastructure-guidelines-next-steps](../../../includes/virtual-machines-windows-infrastructure-guidelines-next-steps.md)]

---
title: "Förbereda en Windows-VHD att överföra till Azure | Microsoft Docs"
description: "Hur du förbereder en Windows-VHD eller VHDX innan du laddar upp till Azure"
services: virtual-machines-windows
documentationcenter: 
author: glimoli
manager: timlt
editor: 
tags: azure-resource-manager
ms.assetid: 7802489d-33ec-4302-82a4-91463d03887a
ms.service: virtual-machines-windows
ms.workload: infrastructure-services
ms.tgt_pltfrm: vm-windows
ms.devlang: na
ms.topic: article
ms.date: 08/01/2017
ms.author: genli
ms.openlocfilehash: aa1cec2ef11da6aa8a8c4089be36994ab5f61682
ms.sourcegitcommit: 50e23e8d3b1148ae2d36dad3167936b4e52c8a23
ms.translationtype: MT
ms.contentlocale: sv-SE
ms.lasthandoff: 08/18/2017
---
# <a name="prepare-a-windows-vhd-or-vhdx-to-upload-to-azure"></a><span data-ttu-id="34888-103">Förbereda en Windows-VHD eller VHDX för att överföra till Azure</span><span class="sxs-lookup"><span data-stu-id="34888-103">Prepare a Windows VHD or VHDX to upload to Azure</span></span>
<span data-ttu-id="34888-104">Innan du laddar upp en Windows-datorer (VM) från lokal till Microsoft Azure måste du förbereda den virtuella hårddisken (VHD eller VHDX).</span><span class="sxs-lookup"><span data-stu-id="34888-104">Before you upload a Windows  virtual machines (VM) from on-premises to Microsoft Azure, you must prepare the virtual hard disk (VHD or VHDX).</span></span> <span data-ttu-id="34888-105">Azure stöder endast generering 1 virtuella datorer som är i VHD-format och har en fast storlek disk.</span><span class="sxs-lookup"><span data-stu-id="34888-105">Azure supports only generation 1 VMs that are in the VHD file format and have a fixed sized disk.</span></span> <span data-ttu-id="34888-106">Den maximala storleken för den virtuella Hårddisken är 1,023 GB.</span><span class="sxs-lookup"><span data-stu-id="34888-106">The maximum size allowed for the VHD is 1,023 GB.</span></span> <span data-ttu-id="34888-107">Du kan konvertera en generation 1 virtuell dator från VHDX-filsystemet till virtuell Hårddisk och från en dynamiskt expanderande disk till en fast storlek.</span><span class="sxs-lookup"><span data-stu-id="34888-107">You can convert a generation 1 VM from the VHDX file system to VHD and from a dynamically expanding disk to fixed-sized.</span></span> <span data-ttu-id="34888-108">Men du kan inte ändra en virtuell dator generation.</span><span class="sxs-lookup"><span data-stu-id="34888-108">But you can't change a VM's generation.</span></span> <span data-ttu-id="34888-109">Mer information finns i [bör jag skapa en generation 1 eller 2 virtuella datorn i Hyper-V](https://technet.microsoft.com/windows-server-docs/compute/hyper-v/plan/should-i-create-a-generation-1-or-2-virtual-machine-in-hyper-v).</span><span class="sxs-lookup"><span data-stu-id="34888-109">For more information, see [Should I create a generation 1 or 2 VM in Hyper-V](https://technet.microsoft.com/windows-server-docs/compute/hyper-v/plan/should-i-create-a-generation-1-or-2-virtual-machine-in-hyper-v).</span></span>

<span data-ttu-id="34888-110">Mer information om principen för support för Azure VM finns [Microsoft server programvarusupport för Microsoft Azure Virtual Machines](https://support.microsoft.com/help/2721672/microsoft-server-software-support-for-microsoft-azure-virtual-machines).</span><span class="sxs-lookup"><span data-stu-id="34888-110">For more information about the support policy for Azure VM, see [Microsoft server software support for Microsoft Azure VMs](https://support.microsoft.com/help/2721672/microsoft-server-software-support-for-microsoft-azure-virtual-machines).</span></span>

> [!Note]
> <span data-ttu-id="34888-111">Anvisningarna i den här artikeln gäller för 64-bitarsversionen av Windows Server 2008 R2 och senare Windows server-operativsystem.</span><span class="sxs-lookup"><span data-stu-id="34888-111">The instructions in this article apply to the 64-bit version of Windows Server 2008 R2 and later Windows server operating system.</span></span> <span data-ttu-id="34888-112">Information om den körs 32-bitars version av operativsystemet i Azure finns [stöd för 32-bitars operativsystem i virtuella Azure-datorer](https://support.microsoft.com/help/4021388/support-for-32-bit-operating-systems-in-azure-virtual-machines).</span><span class="sxs-lookup"><span data-stu-id="34888-112">For information about running 32-bit version of operating system in Azure, see [Support for 32-bit operating systems in Azure virtual machines](https://support.microsoft.com/help/4021388/support-for-32-bit-operating-systems-in-azure-virtual-machines).</span></span>

## <a name="convert-the-virtual-disk-to-vhd-and-fixed-size-disk"></a><span data-ttu-id="34888-113">Omvandla den virtuella disken till VHD- och med fast storlek</span><span class="sxs-lookup"><span data-stu-id="34888-113">Convert the virtual disk to VHD and fixed size disk</span></span> 
<span data-ttu-id="34888-114">Om du behöver konvertera din virtuella hårddisk till formatet som krävs för Azure kan du använda en av metoderna i det här avsnittet.</span><span class="sxs-lookup"><span data-stu-id="34888-114">If you need to convert your virtual disk to the required format for Azure, use one of the methods in this section.</span></span> <span data-ttu-id="34888-115">Säkerhetskopiera den virtuella datorn innan du kör konverteringen virtuell disk och se till att fungerar Windows-VHD korrekt på den lokala servern.</span><span class="sxs-lookup"><span data-stu-id="34888-115">Back up the VM before you run the virtual disk conversion process and make sure that the Windows VHD works correctly on the local server.</span></span> <span data-ttu-id="34888-116">Lös eventuella fel i Virtuellt datorn innan du försöker konvertera eller överför den till Azure.</span><span class="sxs-lookup"><span data-stu-id="34888-116">Resolve any errors within the VM itself before you try to convert or upload it to Azure.</span></span>

<span data-ttu-id="34888-117">Skapa en virtuell dator som använder den konvertera disken när du har konverterat disken.</span><span class="sxs-lookup"><span data-stu-id="34888-117">After you convert the disk, create a VM that uses the converted disk.</span></span> <span data-ttu-id="34888-118">Starta och logga in på den virtuella datorn och slutför förberedde överför den virtuella datorn.</span><span class="sxs-lookup"><span data-stu-id="34888-118">Start and sign in to the VM to finish preparing the VM for upload.</span></span>

### <a name="convert-disk-using-hyper-v-manager"></a><span data-ttu-id="34888-119">Konvertera disk med hjälp av Hyper-V Manager</span><span class="sxs-lookup"><span data-stu-id="34888-119">Convert disk using Hyper-V Manager</span></span>
1. <span data-ttu-id="34888-120">Öppna Hyper-V Manager och välj den lokala datorn till vänster.</span><span class="sxs-lookup"><span data-stu-id="34888-120">Open Hyper-V Manager and select your local computer on the left.</span></span> <span data-ttu-id="34888-121">Klicka på menyn ovanför datorlistan **åtgärd** > **redigera Disk**.</span><span class="sxs-lookup"><span data-stu-id="34888-121">In the menu above the computer list, click **Action** > **Edit Disk**.</span></span>
2. <span data-ttu-id="34888-122">På den **hitta virtuell hårddisk** skärmen, leta upp och markera din virtuella hårddisk.</span><span class="sxs-lookup"><span data-stu-id="34888-122">On the **Locate Virtual Hard Disk** screen, locate and select your virtual disk.</span></span>
3. <span data-ttu-id="34888-123">På den **Välj åtgärd** skärmen och välj sedan **konvertera** och **nästa**.</span><span class="sxs-lookup"><span data-stu-id="34888-123">On the **Choose Action** screen, and then select **Convert** and **Next**.</span></span>
4. <span data-ttu-id="34888-124">Om du behöver konvertera från VHDX väljer **VHD** och klicka sedan på **nästa**</span><span class="sxs-lookup"><span data-stu-id="34888-124">If you need to convert from VHDX, select **VHD** and then click **Next**</span></span>
5. <span data-ttu-id="34888-125">Om du måste konvertera från en dynamiskt expanderande disk, väljer **fast storlek** och klicka sedan på **nästa**</span><span class="sxs-lookup"><span data-stu-id="34888-125">If you need to convert from a dynamically expanding disk, select **Fixed size** and then click **Next**</span></span>
6. <span data-ttu-id="34888-126">Leta upp och välj en sökväg för att spara den nya VHD-filen till.</span><span class="sxs-lookup"><span data-stu-id="34888-126">Locate and select a path to save the new VHD file to.</span></span>
7. <span data-ttu-id="34888-127">Klicka på **Slutför**.</span><span class="sxs-lookup"><span data-stu-id="34888-127">Click **Finish**.</span></span>

>[!NOTE]
><span data-ttu-id="34888-128">Kommandon i den här artikeln måste köras på en upphöjd PowerShell-session.</span><span class="sxs-lookup"><span data-stu-id="34888-128">The commands in this article must be run on an elevated PowerShell session.</span></span>

### <a name="convert-disk-by-using-powershell"></a><span data-ttu-id="34888-129">Konvertera disk med hjälp av PowerShell</span><span class="sxs-lookup"><span data-stu-id="34888-129">Convert disk by using PowerShell</span></span>
<span data-ttu-id="34888-130">Du kan konvertera en virtuell disk med hjälp av den [Convert-VHD](http://technet.microsoft.com/library/hh848454.aspx) i Windows PowerShell.</span><span class="sxs-lookup"><span data-stu-id="34888-130">You can convert a virtual disk by using the [Convert-VHD](http://technet.microsoft.com/library/hh848454.aspx) command in Windows PowerShell.</span></span> <span data-ttu-id="34888-131">Välj **kör som administratör** när du startar PowerShell.</span><span class="sxs-lookup"><span data-stu-id="34888-131">Select **Run as administrator** when you start PowerShell.</span></span> 

<span data-ttu-id="34888-132">Följande exempelkommando konverteras från VHDX till virtuell Hårddisk och från en dynamiskt expanderande disk till en fast storlek:</span><span class="sxs-lookup"><span data-stu-id="34888-132">The following example command converts from VHDX to VHD, and from a dynamically expanding disk to fixed-size:</span></span>

```Powershell
Convert-VHD –Path c:\test\MY-VM.vhdx –DestinationPath c:\test\MY-NEW-VM.vhd -VHDType Fixed
```
<span data-ttu-id="34888-133">I det här kommandot ersätter du värdet för ”-sökvägen” med sökvägen till den virtuella hårddisken som du vill konvertera och värdet för ”-DestinationPath” med den nya sökvägen och namnet på den konvertera disken.</span><span class="sxs-lookup"><span data-stu-id="34888-133">In this command, replace the value for "-Path" with the path to the virtual hard disk that you want to convert and the value for "-DestinationPath" with the new path and name of the converted disk.</span></span>

### <a name="convert-from-vmware-vmdk-disk-format"></a><span data-ttu-id="34888-134">Konvertera från VMware VMDK diskformat</span><span class="sxs-lookup"><span data-stu-id="34888-134">Convert from VMware VMDK disk format</span></span>
<span data-ttu-id="34888-135">Om du har en Windows VM-avbildning i den [VMDK-filformat](https://en.wikipedia.org/wiki/VMDK), konvertera den till en virtuell Hårddisk med hjälp av den [Microsoft VM Converter](https://www.microsoft.com/download/details.aspx?id=42497).</span><span class="sxs-lookup"><span data-stu-id="34888-135">If you have a Windows VM image in the [VMDK file format](https://en.wikipedia.org/wiki/VMDK), convert it to a VHD by using the [Microsoft VM Converter](https://www.microsoft.com/download/details.aspx?id=42497).</span></span> <span data-ttu-id="34888-136">Mer information finns i artikeln blogg [konvertera en VMware VMDK till Hyper-V VHD](http://blogs.msdn.com/b/timomta/archive/2015/06/11/how-to-convert-a-vmware-vmdk-to-hyper-v-vhd.aspx).</span><span class="sxs-lookup"><span data-stu-id="34888-136">For more information, see the blog article [How to Convert a VMware VMDK to Hyper-V VHD](http://blogs.msdn.com/b/timomta/archive/2015/06/11/how-to-convert-a-vmware-vmdk-to-hyper-v-vhd.aspx).</span></span>

## <a name="set-windows-configurations-for-azure"></a><span data-ttu-id="34888-137">Ange Windows-konfigurationer för Azure</span><span class="sxs-lookup"><span data-stu-id="34888-137">Set Windows configurations for Azure</span></span>

<span data-ttu-id="34888-138">På den virtuella datorn som du vill överföra till Azure, kör du alla kommandon i följande steg från ett [upphöjt kommandotolksfönster](https://technet.microsoft.com/library/cc947813.aspx):</span><span class="sxs-lookup"><span data-stu-id="34888-138">On the VM that you plan to upload to Azure, run all commands in the following steps from an [elevated Command Prompt window](https://technet.microsoft.com/library/cc947813.aspx):</span></span>

1. <span data-ttu-id="34888-139">Ta bort alla statiska beständiga vägar i routningstabellen:</span><span class="sxs-lookup"><span data-stu-id="34888-139">Remove any static persistent route on the routing table:</span></span>
   
   * <span data-ttu-id="34888-140">Om du vill visa routningstabellen kör `route print` i Kommandotolken.</span><span class="sxs-lookup"><span data-stu-id="34888-140">To view the route table, run `route print` at the command prompt.</span></span>
   * <span data-ttu-id="34888-141">Kontrollera den **beständiga vägar** avsnitt.</span><span class="sxs-lookup"><span data-stu-id="34888-141">Check the **Persistence Routes** sections.</span></span> <span data-ttu-id="34888-142">Om en beständig väg använder [ta bort vägen](https://technet.microsoft.com/library/cc739598.apx) att ta bort den.</span><span class="sxs-lookup"><span data-stu-id="34888-142">If there is a persistent route, use [route delete](https://technet.microsoft.com/library/cc739598.apx) to remove it.</span></span>
2. <span data-ttu-id="34888-143">Ta bort WinHTTP-proxy:</span><span class="sxs-lookup"><span data-stu-id="34888-143">Remove the WinHTTP proxy:</span></span>
   
    ```PowerShell
    netsh winhttp reset proxy
    ```
3. <span data-ttu-id="34888-144">Ange SAN-principen disk [Onlineall](https://technet.microsoft.com/library/gg252636.aspx).</span><span class="sxs-lookup"><span data-stu-id="34888-144">Set the disk SAN policy to [Onlineall](https://technet.microsoft.com/library/gg252636.aspx).</span></span> 
   
    ```PowerShell
    diskpart 
    ```
    <span data-ttu-id="34888-145">I fönstret Öppna Kommandotolken skriver du följande kommandon:</span><span class="sxs-lookup"><span data-stu-id="34888-145">In the open Command Prompt window, type the following commands:</span></span>

     ```DISKPART
    san policy=onlineall
    exit   
    ```

4. <span data-ttu-id="34888-146">Ange tiden för Coordinated Universal Time (UTC) för Windows och starttypen för tjänsten Windows Time (w32time) till **automatiskt**:</span><span class="sxs-lookup"><span data-stu-id="34888-146">Set Coordinated Universal Time (UTC) time for Windows and the startup type of the Windows Time (w32time) service to **Automatically**:</span></span>
   
    ```PowerShell
    Set-ItemProperty -Path 'HKLM:\SYSTEM\CurrentControlSet\Control\TimeZoneInformation' -name "RealTimeIsUniversal" 1 -Type DWord

    Set-Service -Name w32time -StartupType Auto
    ```
5. <span data-ttu-id="34888-147">Ange den privilegierade profilen till den **högpresterande**:</span><span class="sxs-lookup"><span data-stu-id="34888-147">Set the power profile to the **High Performance**:</span></span>

    ```PowerShell
    powercfg /setactive SCHEME_MIN
    ```

## <a name="check-the-windows-services"></a><span data-ttu-id="34888-148">Kontrollera Windows-tjänster</span><span class="sxs-lookup"><span data-stu-id="34888-148">Check the Windows services</span></span>
<span data-ttu-id="34888-149">Kontrollera att var och en av följande Windows-tjänster har angetts till den **Windows standardvärdena**.</span><span class="sxs-lookup"><span data-stu-id="34888-149">Make sure that each of the following Windows services is set to the **Windows default values**.</span></span> <span data-ttu-id="34888-150">Det här är det minsta antalet tjänster som måste ställas in för att se till att den virtuella datorn är ansluten.</span><span class="sxs-lookup"><span data-stu-id="34888-150">These are the minimum numbers of services that must be set up to make sure that the VM has connectivity.</span></span> <span data-ttu-id="34888-151">Om du vill återställa inställningar för Start, kör du följande kommandon:</span><span class="sxs-lookup"><span data-stu-id="34888-151">To reset the startup settings, run the following commands:</span></span>
   
```PowerShell
Set-Service -Name bfe -StartupType Auto
Set-Service -Name dhcp -StartupType Auto
Set-Service -Name dnscache -StartupType Auto
Set-Service -Name IKEEXT -StartupType Auto
Set-Service -Name iphlpsvc -StartupType Auto
Set-Service -Name netlogon -StartupType Manual
Set-Service -Name netman -StartupType Manual
Set-Service -Name nsi -StartupType Auto
Set-Service -Name termService -StartupType Manual
Set-Service -Name MpsSvc -StartupType Auto
Set-Service -Name RemoteRegistry -StartupType Auto
```

## <a name="update-remote-desktop-registry-settings"></a><span data-ttu-id="34888-152">Uppdatera registerinställningarna för fjärrskrivbord</span><span class="sxs-lookup"><span data-stu-id="34888-152">Update Remote Desktop registry settings</span></span>
<span data-ttu-id="34888-153">Kontrollera att följande inställningar är korrekt konfigurerade för anslutning till fjärrskrivbord:</span><span class="sxs-lookup"><span data-stu-id="34888-153">Make sure that the following settings are configured correctly for remote desktop connection:</span></span>

>[!Note] 
><span data-ttu-id="34888-154">Du får ett felmeddelande när du kör den **Set-ItemProperty-sökvägen ' HKLM:\SOFTWARE\Policies\Microsoft\Windows NT\Terminal tjänster - namnet &lt;objektnamn&gt; &lt;värdet&gt;** i följande steg.</span><span class="sxs-lookup"><span data-stu-id="34888-154">You may receive an error message when you run the **Set-ItemProperty -Path 'HKLM:\SOFTWARE\Policies\Microsoft\Windows NT\Terminal Services -name &lt;object name&gt; &lt;value&gt;** in these steps.</span></span> <span data-ttu-id="34888-155">Felmeddelandet kan ignoreras.</span><span class="sxs-lookup"><span data-stu-id="34888-155">The error message can be safely ignored.</span></span> <span data-ttu-id="34888-156">Det innebär bara att domänen inte gör att konfigurationen med hjälp av ett grupprincipobjekt.</span><span class="sxs-lookup"><span data-stu-id="34888-156">It means only that the domain is not pushing that configuration through a Group Policy object.</span></span>
>
>

1. <span data-ttu-id="34888-157">Remote Desktop Protocol (RDP) är aktiverat:</span><span class="sxs-lookup"><span data-stu-id="34888-157">Remote Desktop Protocol (RDP) is enabled:</span></span>
   
    ```PowerShell
    Set-ItemProperty -Path 'HKLM:\SYSTEM\CurrentControlSet\Control\Terminal Server' -name "fDenyTSConnections" -Value 0 -Type DWord

    Set-ItemProperty -Path 'HKLM:\SOFTWARE\Policies\Microsoft\Windows NT\Terminal Services' -name "fDenyTSConnections" -Value 0 -Type DWord
    ```
   
2. <span data-ttu-id="34888-158">RDP-porten är korrekt konfigurerad (standard port 3389):</span><span class="sxs-lookup"><span data-stu-id="34888-158">The RDP port is set up correctly (Default port 3389):</span></span>
   
    ```PowerShell
   Set-ItemProperty -Path 'HKLM:\SYSTEM\CurrentControlSet\Control\Terminal Server\Winstations\RDP-Tcp' -name "PortNumber" 3389 -Type DWord
    ```
    <span data-ttu-id="34888-159">När du distribuerar en virtuell dator, skapa standardregler mot port 3389.</span><span class="sxs-lookup"><span data-stu-id="34888-159">When you deploy a VM, the default rules are created against port 3389.</span></span> <span data-ttu-id="34888-160">Om du vill ändra portnumret kan du göra det när den virtuella datorn har distribuerats i Azure.</span><span class="sxs-lookup"><span data-stu-id="34888-160">If you want to change the port number,  do that after the VM is deployed in Azure.</span></span>

3. <span data-ttu-id="34888-161">Lyssnaren lyssnar på varje gränssnitt:</span><span class="sxs-lookup"><span data-stu-id="34888-161">The listener is listening in every network interface:</span></span>
   
    ```PowerShell
    Set-ItemProperty -Path 'HKLM:\SYSTEM\CurrentControlSet\Control\Terminal Server\Winstations\RDP-Tcp' -name "LanAdapter" 0 -Type DWord
   ```
4. <span data-ttu-id="34888-162">Konfigurera autentisering på nätverksnivå-läge för RDP-anslutningar:</span><span class="sxs-lookup"><span data-stu-id="34888-162">Configure the Network Level Authentication mode for the RDP connections:</span></span>
   
    ```PowerShell
   Set-ItemProperty -Path 'HKLM:\SYSTEM\CurrentControlSet\Control\Terminal Server\WinStations\RDP-Tcp' -name "UserAuthentication" 1 -Type DWord

    Set-ItemProperty -Path 'HKLM:\SYSTEM\CurrentControlSet\Control\Terminal Server\WinStations\RDP-Tcp' -name "SecurityLayer" 1 -Type DWord

    Set-ItemProperty -Path 'HKLM:\SYSTEM\CurrentControlSet\Control\Terminal Server\WinStations\RDP-Tcp' -name "fAllowSecProtocolNegotiation" 1 -Type DWord
     ```

5. <span data-ttu-id="34888-163">Keep alive-värdet:</span><span class="sxs-lookup"><span data-stu-id="34888-163">Set the keep-alive value：</span></span>
    
    ```PowerShell
    Set-ItemProperty -Path 'HKLM:\SOFTWARE\Policies\Microsoft\Windows NT\Terminal Services' -name "KeepAliveEnable" 1 -Type DWord
    Set-ItemProperty -Path 'HKLM:\SOFTWARE\Policies\Microsoft\Windows NT\Terminal Services' -name "KeepAliveInterval" 1 -Type DWord
    Set-ItemProperty -Path 'HKLM:\SYSTEM\CurrentControlSet\Control\Terminal Server\Winstations\RDP-Tcp' -name "KeepAliveTimeout" 1 -Type DWord
    ```
6. <span data-ttu-id="34888-164">Återansluta:</span><span class="sxs-lookup"><span data-stu-id="34888-164">Reconnect：</span></span>
    
    ```PowerShell
    Set-ItemProperty -Path 'HKLM:\SOFTWARE\Policies\Microsoft\Windows NT\Terminal Services' -name "fDisableAutoReconnect" 0 -Type DWord
    Set-ItemProperty -Path 'HKLM:\SYSTEM\CurrentControlSet\Control\Terminal Server\Winstations\RDP-Tcp' -name "fInheritReconnectSame" 1 -Type DWord
    Set-ItemProperty -Path 'HKLM:\SYSTEM\CurrentControlSet\Control\Terminal Server\Winstations\RDP-Tcp' -name "fReconnectSame" 0 -Type DWord
    ```
7. <span data-ttu-id="34888-165">Begränsa antalet samtidiga anslutningar:</span><span class="sxs-lookup"><span data-stu-id="34888-165">Limit the number of concurrent connections：</span></span>
    
    ```PowerShell
    Set-ItemProperty -Path 'HKLM:\SYSTEM\CurrentControlSet\Control\Terminal Server\Winstations\RDP-Tcp' -name "MaxInstanceCount" 4294967295 -Type DWord
    ```
8. <span data-ttu-id="34888-166">Om det finns några självsignerade certifikat som är knutna till RDP-lyssnaren kan du ta bort dem:</span><span class="sxs-lookup"><span data-stu-id="34888-166">If there are any self-signed certificates tied to the RDP listener, remove them:</span></span>
    
    ```PowerShell
    Remove-ItemProperty -Path 'HKLM:\SYSTEM\CurrentControlSet\Control\Terminal Server\WinStations\RDP-Tcp' -name "SSLCertificateSHA1Hash"
    ```
    <span data-ttu-id="34888-167">Detta är att se till att du kan ansluta i början när du distribuerar den virtuella datorn.</span><span class="sxs-lookup"><span data-stu-id="34888-167">This is to make sure that you can connect at the beginning when you deploy the VM.</span></span> <span data-ttu-id="34888-168">Du kan också granska detta på ett senare skede när den virtuella datorn har distribuerats i Azure om det behövs.</span><span class="sxs-lookup"><span data-stu-id="34888-168">You can also review this on a later stage after the VM is deployed in Azure if needed.</span></span>

9. <span data-ttu-id="34888-169">Om den virtuella datorn ska ingå i en domän, kontrollerar du följande inställningar och kontrollera att de tidigare inställningarna inte återställs.</span><span class="sxs-lookup"><span data-stu-id="34888-169">If the VM will be part of a Domain, check all the following settings to make sure that the former settings are not reverted.</span></span> <span data-ttu-id="34888-170">De principer som måste vara markerad är följande:</span><span class="sxs-lookup"><span data-stu-id="34888-170">The policies that must be checked are the following:</span></span>
    
    - <span data-ttu-id="34888-171">RDP aktiveras:</span><span class="sxs-lookup"><span data-stu-id="34888-171">RDP is enabled:</span></span>

         <span data-ttu-id="34888-172">Datorn Datorkonfiguration\Principer\Windows Settings\Administrative Templates\ komponenter\Fjärrskrivbordstjänster\Värdserver för fjärrskrivbordssession\Anslutningar:</span><span class="sxs-lookup"><span data-stu-id="34888-172">Computer Configuration\Policies\Windows Settings\Administrative Templates\ Components\Remote Desktop Services\Remote Desktop Session Host\Connections:</span></span>
         
         <span data-ttu-id="34888-173">**Tillåt användare att fjärransluta med hjälp av fjärrskrivbord**</span><span class="sxs-lookup"><span data-stu-id="34888-173">**Allow users to connect remotely by using Remote Desktop**</span></span>

    - <span data-ttu-id="34888-174">NLA Grupprincip:</span><span class="sxs-lookup"><span data-stu-id="34888-174">NLA group policy:</span></span>

        <span data-ttu-id="34888-175">Settings\Administrative Templates\Components\Remote för fjärrskrivbord fjärrskrivbordssession\Säkerhet:</span><span class="sxs-lookup"><span data-stu-id="34888-175">Settings\Administrative Templates\Components\Remote Desktop Services\Remote Desktop Session Host\Security:</span></span> 
        
        <span data-ttu-id="34888-176">**Kräv användare autentisering för fjärranslutningar genom att använda autentisering på nätverksnivå**</span><span class="sxs-lookup"><span data-stu-id="34888-176">**Require user Authentication for remote connections by using Network Level Authentication**</span></span>
    
    - <span data-ttu-id="34888-177">Behålla Alive-inställningar:</span><span class="sxs-lookup"><span data-stu-id="34888-177">Keep Alive settings:</span></span>

        <span data-ttu-id="34888-178">Datorn Datorkonfiguration\Principer\Windows Settings\Administrative mallar\Windows-komponenter\Fjärrskrivbordstjänster\Värdserver för fjärrskrivbordssession\Anslutningar:</span><span class="sxs-lookup"><span data-stu-id="34888-178">Computer Configuration\Policies\Windows Settings\Administrative Templates\Windows Components\Remote Desktop Services\Remote Desktop Session Host\Connections:</span></span> 
        
        <span data-ttu-id="34888-179">**Konfigurera intervall för keep-alive-anslutningen**</span><span class="sxs-lookup"><span data-stu-id="34888-179">**Configure keep-alive connection interval**</span></span>

    - <span data-ttu-id="34888-180">Återansluta inställningar:</span><span class="sxs-lookup"><span data-stu-id="34888-180">Reconnect settings:</span></span>

        <span data-ttu-id="34888-181">Datorn Datorkonfiguration\Principer\Windows Settings\Administrative mallar\Windows-komponenter\Fjärrskrivbordstjänster\Värdserver för fjärrskrivbordssession\Anslutningar:</span><span class="sxs-lookup"><span data-stu-id="34888-181">Computer Configuration\Policies\Windows Settings\Administrative Templates\Windows Components\Remote Desktop Services\Remote Desktop Session Host\Connections:</span></span> 
        
        <span data-ttu-id="34888-182">**Automatisk återanslutning**</span><span class="sxs-lookup"><span data-stu-id="34888-182">**Automatic reconnection**</span></span>

    - <span data-ttu-id="34888-183">Begränsa antalet anslutningsinställningar:</span><span class="sxs-lookup"><span data-stu-id="34888-183">Limit the number of connections settings:</span></span>

        <span data-ttu-id="34888-184">Datorn Datorkonfiguration\Principer\Windows Settings\Administrative mallar\Windows-komponenter\Fjärrskrivbordstjänster\Värdserver för fjärrskrivbordssession\Anslutningar:</span><span class="sxs-lookup"><span data-stu-id="34888-184">Computer Configuration\Policies\Windows Settings\Administrative Templates\Windows Components\Remote Desktop Services\Remote Desktop Session Host\Connections:</span></span> 
        
        <span data-ttu-id="34888-185">**Begränsa antalet anslutningar**</span><span class="sxs-lookup"><span data-stu-id="34888-185">**Limit number of connections**</span></span>

## <a name="configure-windows-firewall-rules"></a><span data-ttu-id="34888-186">Konfigurera regler för Windows-brandväggen</span><span class="sxs-lookup"><span data-stu-id="34888-186">Configure Windows Firewall rules</span></span>
1. <span data-ttu-id="34888-187">Aktivera Windows-brandväggen på tre profiler (domän, Standard och offentlig):</span><span class="sxs-lookup"><span data-stu-id="34888-187">Turn on Windows Firewall on the three profiles (Domain, Standard, and Public):</span></span>

   ```PowerShell
    Set-ItemProperty -Path 'HKLM:\SYSTEM\CurrentControlSet\services\SharedAccess\Parameters\FirewallPolicy\DomainProfile' -name "EnableFirewall" -Value 1 -Type DWord
    Set-ItemProperty -Path 'HKLM:\SYSTEM\CurrentControlSet\services\SharedAccess\Parameters\FirewallPolicy\PublicProfile' -name "EnableFirewall" -Value 1 -Type DWord
    Set-ItemProperty -Path 'HKLM:\SYSTEM\CurrentControlSet\services\SharedAccess\Parameters\FirewallPolicy\Standardprofile' -name "EnableFirewall" -Value 1 -Type DWord
   ```

2. <span data-ttu-id="34888-188">Kör följande kommando i PowerShell för att tillåta WinRM via tre brandväggsprofiler (domän, privata och offentliga) och aktivera PowerShell Remote-tjänsten:</span><span class="sxs-lookup"><span data-stu-id="34888-188">Run the following command in PowerShell to allow WinRM through the three firewall profiles (Domain, Private, and Public) and enable the PowerShell Remote service:</span></span>
   
   ```PowerShell
    Enable-PSRemoting -force
    netsh advfirewall firewall set rule dir=in name="Windows Remote Management (HTTP-In)" new enable=yes
    netsh advfirewall firewall set rule dir=in name="Windows Remote Management (HTTP-In)" new enable=yes
   ```
3. <span data-ttu-id="34888-189">Aktivera följande brandväggsregler som tillåter RDP-trafik</span><span class="sxs-lookup"><span data-stu-id="34888-189">Enable the following firewall rules to allow the RDP traffic</span></span> 

   ```PowerShell
    netsh advfirewall firewall set rule group="Remote Desktop" new enable=yes
   ```   
4. <span data-ttu-id="34888-190">Aktivera regeln File and Printer Sharing så att den virtuella datorn kan svara på ping-kommandot i det virtuella nätverket:</span><span class="sxs-lookup"><span data-stu-id="34888-190">Enable the File and Printer Sharing rule so that the VM can respond to a ping command inside the Virtual Network:</span></span>

   ```PowerShell
    netsh advfirewall firewall set rule dir=in name="File and Printer Sharing (Echo Request - ICMPv4-In)" new enable=yes
   ``` 
5. <span data-ttu-id="34888-191">Om den virtuella datorn ska ingå i en domän, kontrollerar du följande inställningar för att se till att de tidigare inställningarna inte återställs.</span><span class="sxs-lookup"><span data-stu-id="34888-191">If the VM  will be part of a Domain, check the following settings to make sure that the former settings are not reverted.</span></span> <span data-ttu-id="34888-192">AD-principer som måste vara markerad är följande:</span><span class="sxs-lookup"><span data-stu-id="34888-192">The AD policies that must be checked are the following:</span></span>

    - <span data-ttu-id="34888-193">Aktivera Windows-brandväggen profiler</span><span class="sxs-lookup"><span data-stu-id="34888-193">Enable the Windows Firewall profiles</span></span>

        <span data-ttu-id="34888-194">Datorkonfiguration\Principer\Windows Settings\Administrative mallar\Nätverk\Nätverksanslutningar\Förhindra Connection\Windows Firewall\Domain Profile\Windows datorbrandvägg: **skydda alla nätverksanslutningar**</span><span class="sxs-lookup"><span data-stu-id="34888-194">Computer Configuration\Policies\Windows Settings\Administrative Templates\Network\Network Connection\Windows Firewall\Domain Profile\Windows Firewall: **Protect all network connections**</span></span>

       <span data-ttu-id="34888-195">Datorkonfiguration\Principer\Windows Settings\Administrative mallar\Nätverk\Nätverksanslutningar\Förhindra Connection\Windows Firewall\Standard Profile\Windows datorbrandvägg: **skydda alla nätverksanslutningar**</span><span class="sxs-lookup"><span data-stu-id="34888-195">Computer Configuration\Policies\Windows Settings\Administrative Templates\Network\Network Connection\Windows Firewall\Standard Profile\Windows Firewall: **Protect all network connections**</span></span>

    - <span data-ttu-id="34888-196">Aktivera RDP</span><span class="sxs-lookup"><span data-stu-id="34888-196">Enable RDP</span></span> 

        <span data-ttu-id="34888-197">Datorkonfiguration\Principer\Windows Settings\Administrative mallar\Nätverk\Nätverksanslutningar\Förhindra Connection\Windows Firewall\Domain Profile\Windows datorbrandvägg: **Tillåt inkommande undantag för fjärrskrivbord**</span><span class="sxs-lookup"><span data-stu-id="34888-197">Computer Configuration\Policies\Windows Settings\Administrative Templates\Network\Network Connection\Windows Firewall\Domain Profile\Windows Firewall: **Allow inbound Remote Desktop exceptions**</span></span>

        <span data-ttu-id="34888-198">Datorkonfiguration\Principer\Windows Settings\Administrative mallar\Nätverk\Nätverksanslutningar\Förhindra Connection\Windows Firewall\Standard Profile\Windows datorbrandvägg: **Tillåt inkommande undantag för fjärrskrivbord**</span><span class="sxs-lookup"><span data-stu-id="34888-198">Computer Configuration\Policies\Windows Settings\Administrative Templates\Network\Network Connection\Windows Firewall\Standard Profile\Windows Firewall: **Allow inbound Remote Desktop exceptions**</span></span>

    - <span data-ttu-id="34888-199">Aktivera ICMP-V4</span><span class="sxs-lookup"><span data-stu-id="34888-199">Enable ICMP-V4</span></span>

        <span data-ttu-id="34888-200">Datorkonfiguration\Principer\Windows Settings\Administrative mallar\Nätverk\Nätverksanslutningar\Förhindra Connection\Windows Firewall\Domain Profile\Windows datorbrandvägg: **Tillåt ICMP-undantag**</span><span class="sxs-lookup"><span data-stu-id="34888-200">Computer Configuration\Policies\Windows Settings\Administrative Templates\Network\Network Connection\Windows Firewall\Domain Profile\Windows Firewall: **Allow ICMP exceptions**</span></span>

        <span data-ttu-id="34888-201">Datorkonfiguration\Principer\Windows Settings\Administrative mallar\Nätverk\Nätverksanslutningar\Förhindra Connection\Windows Firewall\Standard Profile\Windows datorbrandvägg: **Tillåt ICMP-undantag**</span><span class="sxs-lookup"><span data-stu-id="34888-201">Computer Configuration\Policies\Windows Settings\Administrative Templates\Network\Network Connection\Windows Firewall\Standard Profile\Windows Firewall: **Allow ICMP exceptions**</span></span>

## <a name="verify-vm-is-healthy-secure-and-accessible-with-rdp"></a><span data-ttu-id="34888-202">Kontrollera den virtuella datorn är felfri, säker och går att nå med RDP</span><span class="sxs-lookup"><span data-stu-id="34888-202">Verify VM is healthy, secure, and accessible with RDP</span></span> 
1. <span data-ttu-id="34888-203">Kontrollera att disken är felfri och konsekvent, gör en kontrollera disken vid nästa omstart VM:</span><span class="sxs-lookup"><span data-stu-id="34888-203">To make sure the disk is healthy and consistent, run a check disk operation at the next VM restart:</span></span>

    ```PowerShell
    Chkdsk /f
    ```
    <span data-ttu-id="34888-204">Kontrollera att rapporten visar en ren och hälsosam disk.</span><span class="sxs-lookup"><span data-stu-id="34888-204">Make sure that the report shows a clean and healthy disk.</span></span>

2. <span data-ttu-id="34888-205">Ange inställningar för startkonfigurationsdata (BCD).</span><span class="sxs-lookup"><span data-stu-id="34888-205">Set the Boot Configuration Data (BCD) settings.</span></span> 

    > [!Note]
    > <span data-ttu-id="34888-206">Kontrollera att du kan köra dessa kommandon på en CMD-kommandotolk och **inte** på PowerShell:</span><span class="sxs-lookup"><span data-stu-id="34888-206">Make sure you run these commands on an elevated CMD window and **NOT** on PowerShell:</span></span>
   
   ```CMD
   bcdedit /set {bootmgr} integrityservices enable
   
   bcdedit /set {default} device partition=C:
   
   bcdedit /set {default} integrityservices enable
   
   bcdedit /set {default} recoveryenabled Off
   
   bcdedit /set {default} osdevice partition=C:
   
   bcdedit /set {default} bootstatuspolicy IgnoreAllFailures
   ```
3. <span data-ttu-id="34888-207">Kontrollera att Windows Management Instrumentation-databasen är konsekvent.</span><span class="sxs-lookup"><span data-stu-id="34888-207">Verify that the Windows Management Instrumentations repository is consistent.</span></span> <span data-ttu-id="34888-208">Du kan göra detta genom att köra följande kommando:</span><span class="sxs-lookup"><span data-stu-id="34888-208">To perform this, run the following command:</span></span>

    ```PowerShell
    winmgmt /verifyrepository
    ```
    <span data-ttu-id="34888-209">Om databasen är skadad finns [WMI: databasen skadas eller inte](https://blogs.technet.microsoft.com/askperf/2014/08/08/wmi-repository-corruption-or-not).</span><span class="sxs-lookup"><span data-stu-id="34888-209">If the repository is corrupted, see [WMI: Repository Corruption, or Not](https://blogs.technet.microsoft.com/askperf/2014/08/08/wmi-repository-corruption-or-not).</span></span>

4. <span data-ttu-id="34888-210">Kontrollera att det inte något annat program som använder port 3389.</span><span class="sxs-lookup"><span data-stu-id="34888-210">Make sure that any other application is not using the port 3389.</span></span> <span data-ttu-id="34888-211">Den här porten används för RDP-tjänst i Azure.</span><span class="sxs-lookup"><span data-stu-id="34888-211">This port is used for the RDP service in Azure.</span></span> <span data-ttu-id="34888-212">Du kan köra **netstat - anob** att se vilka portar i används på den virtuella datorn:</span><span class="sxs-lookup"><span data-stu-id="34888-212">You can run **netstat -anob** to see which ports are in used on the VM:</span></span>

    ```PowerShell
    netstat -anob
    ```

5. <span data-ttu-id="34888-213">Om Windows-VHD som du vill överföra är en domänkontrollant, följer du dessa steg:</span><span class="sxs-lookup"><span data-stu-id="34888-213">If the Windows VHD that you want to upload is a domain controller, then follow these steps:</span></span>

    <span data-ttu-id="34888-214">A.</span><span class="sxs-lookup"><span data-stu-id="34888-214">A.</span></span> <span data-ttu-id="34888-215">Följ [dessa extra steg](https://support.microsoft.com/kb/2904015) att förbereda disken.</span><span class="sxs-lookup"><span data-stu-id="34888-215">Follow [these extra steps](https://support.microsoft.com/kb/2904015) to prepare the disk.</span></span>

    <span data-ttu-id="34888-216">B.</span><span class="sxs-lookup"><span data-stu-id="34888-216">B.</span></span> <span data-ttu-id="34888-217">Se till att du vet DSRM-lösenordet om du behöver starta den virtuella datorn i DSRM på någon punkt.</span><span class="sxs-lookup"><span data-stu-id="34888-217">Make sure that you know the DSRM password in case you have to start the VM in DSRM at some point.</span></span> <span data-ttu-id="34888-218">Du kanske vill referera till den här länken för att den [DSRM-lösenordet](https://technet.microsoft.com/library/cc754363(v=ws.11).aspx).</span><span class="sxs-lookup"><span data-stu-id="34888-218">You may want to refer to this link to set the [DSRM password](https://technet.microsoft.com/library/cc754363(v=ws.11).aspx).</span></span>

6. <span data-ttu-id="34888-219">Kontrollera att det inbyggda administratörskontot och lösenord är kända för dig.</span><span class="sxs-lookup"><span data-stu-id="34888-219">Make sure that the Built-in Administrator account and password are known to you.</span></span> <span data-ttu-id="34888-220">Du kanske vill återställa det aktuella lokala administratörslösenordet och se till att du använder det här kontot för att logga in på Windows via RDP-anslutning.</span><span class="sxs-lookup"><span data-stu-id="34888-220">You may want to reset the current local administrator password and make sure that you can use this account to sign in to Windows through the RDP connection.</span></span> <span data-ttu-id="34888-221">Den här behörigheten åtkomst styrs av grupprincipobjektet ”Tillåt inloggning genom Fjärrskrivbordstjänster”.</span><span class="sxs-lookup"><span data-stu-id="34888-221">This access permission is controlled by the "Allow log on through Remote Desktop Services" Group Policy object.</span></span> <span data-ttu-id="34888-222">Du kan visa det här objektet i den lokala Redigeraren för under:</span><span class="sxs-lookup"><span data-stu-id="34888-222">You can view this object in the Local Group Policy Editor under:</span></span>

    <span data-ttu-id="34888-223">Datorn Datorkonfiguration\Windows datorkonfiguration\windowsinställningar\säkerhetsinställningar\avancerad Säkerhetsinställningar\Lokala principer\Tilldelning av användarrättigheter</span><span class="sxs-lookup"><span data-stu-id="34888-223">Computer Configuration\Windows Settings\Security Settings\Local Policies\User Rights Assignment</span></span>

7. <span data-ttu-id="34888-224">Kontrollera att följande AD principer för att kontrollera att du inte blockerar din RDP-åtkomst via RDP eller från nätverket:</span><span class="sxs-lookup"><span data-stu-id="34888-224">Check the following AD polices to make sure that you are not blocking your RDP access through RDP nor from the network:</span></span>

    - <span data-ttu-id="34888-225">Datorn Datorkonfiguration\Windows datorkonfiguration\windowsinställningar\säkerhetsinställningar\avancerad Säkerhetsinställningar\Lokala principer\user Rights Assignment\Deny åtkomst till den här datorn från nätverket</span><span class="sxs-lookup"><span data-stu-id="34888-225">Computer Configuration\Windows Settings\Security Settings\Local Policies\User Rights Assignment\Deny access to this computer from the network</span></span>

    - <span data-ttu-id="34888-226">Datorn Datorkonfiguration\Windows datorkonfiguration\windowsinställningar\säkerhetsinställningar\avancerad Säkerhetsinställningar\Lokala principer\user Rights Assignment\Deny inloggning via Fjärrskrivbordstjänster</span><span class="sxs-lookup"><span data-stu-id="34888-226">Computer Configuration\Windows Settings\Security Settings\Local Policies\User Rights Assignment\Deny log on through Remote Desktop Services</span></span>


8. <span data-ttu-id="34888-227">Starta om den virtuella datorn och kontrollera att Windows är fortfarande felfri kan nås via RDP-anslutning.</span><span class="sxs-lookup"><span data-stu-id="34888-227">Restart the VM to make sure that Windows is still healthy can be reached by using the RDP connection.</span></span> <span data-ttu-id="34888-228">Nu kan du vill skapa en virtuell dator i din lokala Hyper-V att kontrollera att den virtuella datorn startar helt och sedan testa om det är RDP kan nås.</span><span class="sxs-lookup"><span data-stu-id="34888-228">At this point, you may want to create a VM in your local Hyper-V to make sure the VM is starting completely and then test whether it is RDP reachable.</span></span>

9. <span data-ttu-id="34888-229">Ta bort eventuella extra Transport Driver Interface filter, till exempel programvara som analyserar TCP paket eller extra brandväggar.</span><span class="sxs-lookup"><span data-stu-id="34888-229">Remove any extra Transport Driver Interface filters, such as software that analyzes TCP packets or extra firewalls.</span></span> <span data-ttu-id="34888-230">Du kan också granska detta på ett senare skede när den virtuella datorn har distribuerats i Azure om det behövs.</span><span class="sxs-lookup"><span data-stu-id="34888-230">You can also review this on a later stage after the VM is deployed in Azure if needed.</span></span>

10. <span data-ttu-id="34888-231">Avinstallera andra tredje parts programvara och drivrutiner som är relaterade till fysiska komponenter eller någon annan virtualiseringsteknik används.</span><span class="sxs-lookup"><span data-stu-id="34888-231">Uninstall any other third-party software and driver that is related to physical components or any other virtualization technology.</span></span>

### <a name="install-windows-updates"></a><span data-ttu-id="34888-232">Installera uppdateringar för Windows</span><span class="sxs-lookup"><span data-stu-id="34888-232">Install Windows Updates</span></span>
<span data-ttu-id="34888-233">Den bästa konfigurationen är att **har korrigeringsnivå för datorn senast**.</span><span class="sxs-lookup"><span data-stu-id="34888-233">The ideal configuration is to **have the patch level of the machine at the latest**.</span></span> <span data-ttu-id="34888-234">Om det inte är möjligt, kontrollerar du att följande uppdateringar är installerade:</span><span class="sxs-lookup"><span data-stu-id="34888-234">If this is not possible, make sure that the following updates are installed:</span></span>

|                       |                   |           |                                       <span data-ttu-id="34888-235">Minsta filversion x64</span><span class="sxs-lookup"><span data-stu-id="34888-235">Minimum file version x64</span></span>       |                                      |                                      |                            |
|-------------------------|-------------------|------------------------------------|---------------------------------------------|--------------------------------------|--------------------------------------|----------------------------|
| <span data-ttu-id="34888-236">Komponent</span><span class="sxs-lookup"><span data-stu-id="34888-236">Component</span></span>               | <span data-ttu-id="34888-237">Binär</span><span class="sxs-lookup"><span data-stu-id="34888-237">Binary</span></span>            | <span data-ttu-id="34888-238">Windows 7 och Windows Server 2008 R2</span><span class="sxs-lookup"><span data-stu-id="34888-238">Windows 7 & Windows Server 2008 R2</span></span> | <span data-ttu-id="34888-239">Windows 8 och Windows Server 2012</span><span class="sxs-lookup"><span data-stu-id="34888-239">Windows 8 & Windows Server 2012</span></span>             | <span data-ttu-id="34888-240">Windows 8.1 och Windows Server 2012 R2</span><span class="sxs-lookup"><span data-stu-id="34888-240">Windows 8.1 & Windows Server 2012 R2</span></span> | <span data-ttu-id="34888-241">Windows 10 och Windows Server 2016 RS1</span><span class="sxs-lookup"><span data-stu-id="34888-241">Windows 10 & Windows Server 2016 RS1</span></span> | <span data-ttu-id="34888-242">Windows 10 RS2</span><span class="sxs-lookup"><span data-stu-id="34888-242">Windows 10 RS2</span></span>             |
| <span data-ttu-id="34888-243">Lagring</span><span class="sxs-lookup"><span data-stu-id="34888-243">Storage</span></span>                 | <span data-ttu-id="34888-244">disk.sys</span><span class="sxs-lookup"><span data-stu-id="34888-244">disk.sys</span></span>          | <span data-ttu-id="34888-245">6.1.7601.23403 - KB3125574</span><span class="sxs-lookup"><span data-stu-id="34888-245">6.1.7601.23403 - KB3125574</span></span>         | <span data-ttu-id="34888-246">6.2.9200.17638 / 6.2.9200.21757 - KB3137061</span><span class="sxs-lookup"><span data-stu-id="34888-246">6.2.9200.17638 / 6.2.9200.21757 - KB3137061</span></span> | <span data-ttu-id="34888-247">6.3.9600.18203 - KB3137061</span><span class="sxs-lookup"><span data-stu-id="34888-247">6.3.9600.18203 - KB3137061</span></span>           | -                                    | -                          |
|                         | <span data-ttu-id="34888-248">Storport.sys</span><span class="sxs-lookup"><span data-stu-id="34888-248">storport.sys</span></span>      | <span data-ttu-id="34888-249">6.1.7601.23403 - KB3125574</span><span class="sxs-lookup"><span data-stu-id="34888-249">6.1.7601.23403 - KB3125574</span></span>         | <span data-ttu-id="34888-250">6.2.9200.17188 / 6.2.9200.21306 - KB3018489</span><span class="sxs-lookup"><span data-stu-id="34888-250">6.2.9200.17188 / 6.2.9200.21306 - KB3018489</span></span> | <span data-ttu-id="34888-251">6.3.9600.18573 - KB4022726</span><span class="sxs-lookup"><span data-stu-id="34888-251">6.3.9600.18573 - KB4022726</span></span>           | <span data-ttu-id="34888-252">10.0.14393.1358 - KB4022715</span><span class="sxs-lookup"><span data-stu-id="34888-252">10.0.14393.1358 - KB4022715</span></span>          | <span data-ttu-id="34888-253">10.0.15063.332</span><span class="sxs-lookup"><span data-stu-id="34888-253">10.0.15063.332</span></span>             |
|                         | <span data-ttu-id="34888-254">NTFS.sys</span><span class="sxs-lookup"><span data-stu-id="34888-254">ntfs.sys</span></span>          | <span data-ttu-id="34888-255">6.1.7601.23403 - KB3125574</span><span class="sxs-lookup"><span data-stu-id="34888-255">6.1.7601.23403 - KB3125574</span></span>         | <span data-ttu-id="34888-256">6.2.9200.17623 / 6.2.9200.21743 - KB3121255</span><span class="sxs-lookup"><span data-stu-id="34888-256">6.2.9200.17623 / 6.2.9200.21743 - KB3121255</span></span> | <span data-ttu-id="34888-257">6.3.9600.18654 - KB4022726</span><span class="sxs-lookup"><span data-stu-id="34888-257">6.3.9600.18654 - KB4022726</span></span>           | <span data-ttu-id="34888-258">10.0.14393.1198 - KB4022715</span><span class="sxs-lookup"><span data-stu-id="34888-258">10.0.14393.1198 - KB4022715</span></span>          | <span data-ttu-id="34888-259">10.0.15063.447</span><span class="sxs-lookup"><span data-stu-id="34888-259">10.0.15063.447</span></span>             |
|                         | <span data-ttu-id="34888-260">Iologmsg.dll</span><span class="sxs-lookup"><span data-stu-id="34888-260">Iologmsg.dll</span></span>      | <span data-ttu-id="34888-261">6.1.7601.23403 - KB3125574</span><span class="sxs-lookup"><span data-stu-id="34888-261">6.1.7601.23403 - KB3125574</span></span>         | <span data-ttu-id="34888-262">6.2.9200.16384 - KB2995387</span><span class="sxs-lookup"><span data-stu-id="34888-262">6.2.9200.16384 - KB2995387</span></span>                  | -                                    | -                                    | -                          |
|                         | <span data-ttu-id="34888-263">Classpnp.sys</span><span class="sxs-lookup"><span data-stu-id="34888-263">Classpnp.sys</span></span>      | <span data-ttu-id="34888-264">6.1.7601.23403 - KB3125574</span><span class="sxs-lookup"><span data-stu-id="34888-264">6.1.7601.23403 - KB3125574</span></span>         | <span data-ttu-id="34888-265">6.2.9200.17061 / 6.2.9200.21180 - KB2995387</span><span class="sxs-lookup"><span data-stu-id="34888-265">6.2.9200.17061 / 6.2.9200.21180 - KB2995387</span></span> | <span data-ttu-id="34888-266">6.3.9600.18334 - KB3172614</span><span class="sxs-lookup"><span data-stu-id="34888-266">6.3.9600.18334 - KB3172614</span></span>           | <span data-ttu-id="34888-267">10.0.14393.953 - KB4022715</span><span class="sxs-lookup"><span data-stu-id="34888-267">10.0.14393.953 - KB4022715</span></span>           | -                          |
|                         | <span data-ttu-id="34888-268">Volsnap.sys</span><span class="sxs-lookup"><span data-stu-id="34888-268">Volsnap.sys</span></span>       | <span data-ttu-id="34888-269">6.1.7601.23403 - KB3125574</span><span class="sxs-lookup"><span data-stu-id="34888-269">6.1.7601.23403 - KB3125574</span></span>         | <span data-ttu-id="34888-270">6.2.9200.17047 / 6.2.9200.21165 - KB2975331</span><span class="sxs-lookup"><span data-stu-id="34888-270">6.2.9200.17047 / 6.2.9200.21165 - KB2975331</span></span> | <span data-ttu-id="34888-271">6.3.9600.18265 - KB3145384</span><span class="sxs-lookup"><span data-stu-id="34888-271">6.3.9600.18265 - KB3145384</span></span>           | -                                    | <span data-ttu-id="34888-272">10.0.15063.0</span><span class="sxs-lookup"><span data-stu-id="34888-272">10.0.15063.0</span></span>               |
|                         | <span data-ttu-id="34888-273">partmgr.sys</span><span class="sxs-lookup"><span data-stu-id="34888-273">partmgr.sys</span></span>       | <span data-ttu-id="34888-274">6.1.7601.23403 - KB3125574</span><span class="sxs-lookup"><span data-stu-id="34888-274">6.1.7601.23403 - KB3125574</span></span>         | <span data-ttu-id="34888-275">6.2.9200.16681 - KB2877114</span><span class="sxs-lookup"><span data-stu-id="34888-275">6.2.9200.16681 - KB2877114</span></span>                  | <span data-ttu-id="34888-276">6.3.9600.17401 - KB3000850</span><span class="sxs-lookup"><span data-stu-id="34888-276">6.3.9600.17401 - KB3000850</span></span>           | <span data-ttu-id="34888-277">10.0.14393.953 - KB4022715</span><span class="sxs-lookup"><span data-stu-id="34888-277">10.0.14393.953 - KB4022715</span></span>           | <span data-ttu-id="34888-278">10.0.15063.0</span><span class="sxs-lookup"><span data-stu-id="34888-278">10.0.15063.0</span></span>               |
|                         | <span data-ttu-id="34888-279">volmgr.sys</span><span class="sxs-lookup"><span data-stu-id="34888-279">volmgr.sys</span></span>        |                                    |                                             |                                      |                                      | <span data-ttu-id="34888-280">10.0.15063.0</span><span class="sxs-lookup"><span data-stu-id="34888-280">10.0.15063.0</span></span>               |
|                         | <span data-ttu-id="34888-281">Volmgrx.sys</span><span class="sxs-lookup"><span data-stu-id="34888-281">Volmgrx.sys</span></span>       | <span data-ttu-id="34888-282">6.1.7601.23403 - KB3125574</span><span class="sxs-lookup"><span data-stu-id="34888-282">6.1.7601.23403 - KB3125574</span></span>         | -                                           | -                                    | -                                    | <span data-ttu-id="34888-283">10.0.15063.0</span><span class="sxs-lookup"><span data-stu-id="34888-283">10.0.15063.0</span></span>               |
|                         | <span data-ttu-id="34888-284">Msiscsi.sys</span><span class="sxs-lookup"><span data-stu-id="34888-284">Msiscsi.sys</span></span>       | <span data-ttu-id="34888-285">6.1.7601.23403 - KB3125574</span><span class="sxs-lookup"><span data-stu-id="34888-285">6.1.7601.23403 - KB3125574</span></span>         | <span data-ttu-id="34888-286">6.2.9200.21006 - KB2955163</span><span class="sxs-lookup"><span data-stu-id="34888-286">6.2.9200.21006 - KB2955163</span></span>                  | <span data-ttu-id="34888-287">6.3.9600.18624 - KB4022726</span><span class="sxs-lookup"><span data-stu-id="34888-287">6.3.9600.18624 - KB4022726</span></span>           | <span data-ttu-id="34888-288">10.0.14393.1066 - KB4022715</span><span class="sxs-lookup"><span data-stu-id="34888-288">10.0.14393.1066 - KB4022715</span></span>          | <span data-ttu-id="34888-289">10.0.15063.447</span><span class="sxs-lookup"><span data-stu-id="34888-289">10.0.15063.447</span></span>             |
|                         | <span data-ttu-id="34888-290">MSDSM.sys</span><span class="sxs-lookup"><span data-stu-id="34888-290">Msdsm.sys</span></span>         | <span data-ttu-id="34888-291">6.1.7601.23403 - KB3125574</span><span class="sxs-lookup"><span data-stu-id="34888-291">6.1.7601.23403 - KB3125574</span></span>         | <span data-ttu-id="34888-292">6.2.9200.21474 - KB3046101</span><span class="sxs-lookup"><span data-stu-id="34888-292">6.2.9200.21474 - KB3046101</span></span>                  | <span data-ttu-id="34888-293">6.3.9600.18592 - KB4022726</span><span class="sxs-lookup"><span data-stu-id="34888-293">6.3.9600.18592 - KB4022726</span></span>           | -                                    | -                          |
|                         | <span data-ttu-id="34888-294">MPIO.sys</span><span class="sxs-lookup"><span data-stu-id="34888-294">Mpio.sys</span></span>          | <span data-ttu-id="34888-295">6.1.7601.23403 - KB3125574</span><span class="sxs-lookup"><span data-stu-id="34888-295">6.1.7601.23403 - KB3125574</span></span>         | <span data-ttu-id="34888-296">6.2.9200.21190 - KB3046101</span><span class="sxs-lookup"><span data-stu-id="34888-296">6.2.9200.21190 - KB3046101</span></span>                  | <span data-ttu-id="34888-297">6.3.9600.18616 - KB4022726</span><span class="sxs-lookup"><span data-stu-id="34888-297">6.3.9600.18616 - KB4022726</span></span>           | <span data-ttu-id="34888-298">10.0.14393.1198 - KB4022715</span><span class="sxs-lookup"><span data-stu-id="34888-298">10.0.14393.1198 - KB4022715</span></span>          | -                          |
|                         | <span data-ttu-id="34888-299">Fveapi.dll</span><span class="sxs-lookup"><span data-stu-id="34888-299">Fveapi.dll</span></span>        | <span data-ttu-id="34888-300">6.1.7601.23311 - KB3125574</span><span class="sxs-lookup"><span data-stu-id="34888-300">6.1.7601.23311 - KB3125574</span></span>         | <span data-ttu-id="34888-301">6.2.9200.20930 - KB2930244</span><span class="sxs-lookup"><span data-stu-id="34888-301">6.2.9200.20930 - KB2930244</span></span>                  | <span data-ttu-id="34888-302">6.3.9600.18294 - KB3172614</span><span class="sxs-lookup"><span data-stu-id="34888-302">6.3.9600.18294 - KB3172614</span></span>           | <span data-ttu-id="34888-303">10.0.14393.576 - KB4022715</span><span class="sxs-lookup"><span data-stu-id="34888-303">10.0.14393.576 - KB4022715</span></span>           | -                          |
|                         | <span data-ttu-id="34888-304">Fveapibase.dll</span><span class="sxs-lookup"><span data-stu-id="34888-304">Fveapibase.dll</span></span>    | <span data-ttu-id="34888-305">6.1.7601.23403 - KB3125574</span><span class="sxs-lookup"><span data-stu-id="34888-305">6.1.7601.23403 - KB3125574</span></span>         | <span data-ttu-id="34888-306">6.2.9200.20930 - KB2930244</span><span class="sxs-lookup"><span data-stu-id="34888-306">6.2.9200.20930 - KB2930244</span></span>                  | <span data-ttu-id="34888-307">6.3.9600.17415 - KB3172614</span><span class="sxs-lookup"><span data-stu-id="34888-307">6.3.9600.17415 - KB3172614</span></span>           | <span data-ttu-id="34888-308">10.0.14393.206 - KB4022715</span><span class="sxs-lookup"><span data-stu-id="34888-308">10.0.14393.206 - KB4022715</span></span>           | -                          |
| <span data-ttu-id="34888-309">Nätverk</span><span class="sxs-lookup"><span data-stu-id="34888-309">Network</span></span>                 | <span data-ttu-id="34888-310">netvsc.sys</span><span class="sxs-lookup"><span data-stu-id="34888-310">netvsc.sys</span></span>        | -                                  | -                                           | -                                    | <span data-ttu-id="34888-311">10.0.14393.1198 - KB4022715</span><span class="sxs-lookup"><span data-stu-id="34888-311">10.0.14393.1198 - KB4022715</span></span>          | <span data-ttu-id="34888-312">10.0.15063.250 - KB4020001</span><span class="sxs-lookup"><span data-stu-id="34888-312">10.0.15063.250 - KB4020001</span></span> |
|                         | <span data-ttu-id="34888-313">mrxsmb10.sys</span><span class="sxs-lookup"><span data-stu-id="34888-313">mrxsmb10.sys</span></span>      | <span data-ttu-id="34888-314">6.1.7601.23816 - KB4022722</span><span class="sxs-lookup"><span data-stu-id="34888-314">6.1.7601.23816 - KB4022722</span></span>         | <span data-ttu-id="34888-315">6.2.9200.22108 - KB4022724</span><span class="sxs-lookup"><span data-stu-id="34888-315">6.2.9200.22108 - KB4022724</span></span>                  | <span data-ttu-id="34888-316">6.3.9600.18603 - KB4022726</span><span class="sxs-lookup"><span data-stu-id="34888-316">6.3.9600.18603 - KB4022726</span></span>           | <span data-ttu-id="34888-317">10.0.14393.479 - KB4022715</span><span class="sxs-lookup"><span data-stu-id="34888-317">10.0.14393.479 - KB4022715</span></span>           | <span data-ttu-id="34888-318">10.0.15063.483</span><span class="sxs-lookup"><span data-stu-id="34888-318">10.0.15063.483</span></span>             |
|                         | <span data-ttu-id="34888-319">mrxsmb20.sys</span><span class="sxs-lookup"><span data-stu-id="34888-319">mrxsmb20.sys</span></span>      | <span data-ttu-id="34888-320">6.1.7601.23816 - KB4022722</span><span class="sxs-lookup"><span data-stu-id="34888-320">6.1.7601.23816 - KB4022722</span></span>         | <span data-ttu-id="34888-321">6.2.9200.21548 - KB4022724</span><span class="sxs-lookup"><span data-stu-id="34888-321">6.2.9200.21548 - KB4022724</span></span>                  | <span data-ttu-id="34888-322">6.3.9600.18586 - KB4022726</span><span class="sxs-lookup"><span data-stu-id="34888-322">6.3.9600.18586 - KB4022726</span></span>           | <span data-ttu-id="34888-323">10.0.14393.953 - KB4022715</span><span class="sxs-lookup"><span data-stu-id="34888-323">10.0.14393.953 - KB4022715</span></span>           | <span data-ttu-id="34888-324">10.0.15063.483</span><span class="sxs-lookup"><span data-stu-id="34888-324">10.0.15063.483</span></span>             |
|                         | <span data-ttu-id="34888-325">Mrxsmb.sys</span><span class="sxs-lookup"><span data-stu-id="34888-325">mrxsmb.sys</span></span>        | <span data-ttu-id="34888-326">6.1.7601.23816 - KB4022722</span><span class="sxs-lookup"><span data-stu-id="34888-326">6.1.7601.23816 - KB4022722</span></span>         | <span data-ttu-id="34888-327">6.2.9200.22074 - KB4022724</span><span class="sxs-lookup"><span data-stu-id="34888-327">6.2.9200.22074 - KB4022724</span></span>                  | <span data-ttu-id="34888-328">6.3.9600.18586 - KB4022726</span><span class="sxs-lookup"><span data-stu-id="34888-328">6.3.9600.18586 - KB4022726</span></span>           | <span data-ttu-id="34888-329">10.0.14393.953 - KB4022715</span><span class="sxs-lookup"><span data-stu-id="34888-329">10.0.14393.953 - KB4022715</span></span>           | <span data-ttu-id="34888-330">10.0.15063.0</span><span class="sxs-lookup"><span data-stu-id="34888-330">10.0.15063.0</span></span>               |
|                         | <span data-ttu-id="34888-331">Tcpip.sys</span><span class="sxs-lookup"><span data-stu-id="34888-331">tcpip.sys</span></span>         | <span data-ttu-id="34888-332">6.1.7601.23761 - KB4022722</span><span class="sxs-lookup"><span data-stu-id="34888-332">6.1.7601.23761 - KB4022722</span></span>         | <span data-ttu-id="34888-333">6.2.9200.22070 - KB4022724</span><span class="sxs-lookup"><span data-stu-id="34888-333">6.2.9200.22070 - KB4022724</span></span>                  | <span data-ttu-id="34888-334">6.3.9600.18478 - KB4022726</span><span class="sxs-lookup"><span data-stu-id="34888-334">6.3.9600.18478 - KB4022726</span></span>           | <span data-ttu-id="34888-335">10.0.14393.1358 - KB4022715</span><span class="sxs-lookup"><span data-stu-id="34888-335">10.0.14393.1358 - KB4022715</span></span>          | <span data-ttu-id="34888-336">10.0.15063.447</span><span class="sxs-lookup"><span data-stu-id="34888-336">10.0.15063.447</span></span>             |
|                         | <span data-ttu-id="34888-337">HTTP.sys</span><span class="sxs-lookup"><span data-stu-id="34888-337">http.sys</span></span>          | <span data-ttu-id="34888-338">6.1.7601.23403 - KB3125574</span><span class="sxs-lookup"><span data-stu-id="34888-338">6.1.7601.23403 - KB3125574</span></span>         | <span data-ttu-id="34888-339">6.2.9200.17285 - KB3042553</span><span class="sxs-lookup"><span data-stu-id="34888-339">6.2.9200.17285 - KB3042553</span></span>                  | <span data-ttu-id="34888-340">6.3.9600.18574 - KB4022726</span><span class="sxs-lookup"><span data-stu-id="34888-340">6.3.9600.18574 - KB4022726</span></span>           | <span data-ttu-id="34888-341">10.0.14393.251 - KB4022715</span><span class="sxs-lookup"><span data-stu-id="34888-341">10.0.14393.251 - KB4022715</span></span>           | <span data-ttu-id="34888-342">10.0.15063.483</span><span class="sxs-lookup"><span data-stu-id="34888-342">10.0.15063.483</span></span>             |
|                         | <span data-ttu-id="34888-343">vmswitch.sys</span><span class="sxs-lookup"><span data-stu-id="34888-343">vmswitch.sys</span></span>      | <span data-ttu-id="34888-344">6.1.7601.23727 - KB4022719</span><span class="sxs-lookup"><span data-stu-id="34888-344">6.1.7601.23727 - KB4022719</span></span>         | <span data-ttu-id="34888-345">6.2.9200.22117 - KB4022724</span><span class="sxs-lookup"><span data-stu-id="34888-345">6.2.9200.22117 - KB4022724</span></span>                  | <span data-ttu-id="34888-346">6.3.9600.18654 - KB4022726</span><span class="sxs-lookup"><span data-stu-id="34888-346">6.3.9600.18654 - KB4022726</span></span>           | <span data-ttu-id="34888-347">10.0.14393.1358 - KB4022715</span><span class="sxs-lookup"><span data-stu-id="34888-347">10.0.14393.1358 - KB4022715</span></span>          | <span data-ttu-id="34888-348">10.0.15063.138</span><span class="sxs-lookup"><span data-stu-id="34888-348">10.0.15063.138</span></span>             |
| <span data-ttu-id="34888-349">Kärna</span><span class="sxs-lookup"><span data-stu-id="34888-349">Core</span></span>                    | <span data-ttu-id="34888-350">Ntoskrnl.exe</span><span class="sxs-lookup"><span data-stu-id="34888-350">ntoskrnl.exe</span></span>      | <span data-ttu-id="34888-351">6.1.7601.23807 - KB4022719</span><span class="sxs-lookup"><span data-stu-id="34888-351">6.1.7601.23807 - KB4022719</span></span>         | <span data-ttu-id="34888-352">6.2.9200.22170 - KB4022718</span><span class="sxs-lookup"><span data-stu-id="34888-352">6.2.9200.22170 - KB4022718</span></span>                  | <span data-ttu-id="34888-353">6.3.9600.18696 - KB4022726</span><span class="sxs-lookup"><span data-stu-id="34888-353">6.3.9600.18696 - KB4022726</span></span>           | <span data-ttu-id="34888-354">10.0.14393.1358 - KB4022715</span><span class="sxs-lookup"><span data-stu-id="34888-354">10.0.14393.1358 - KB4022715</span></span>          | <span data-ttu-id="34888-355">10.0.15063.483</span><span class="sxs-lookup"><span data-stu-id="34888-355">10.0.15063.483</span></span>             |
| <span data-ttu-id="34888-356">Fjärrskrivbordstjänster</span><span class="sxs-lookup"><span data-stu-id="34888-356">Remote Desktop Services</span></span> | <span data-ttu-id="34888-357">rdpcorets.dll</span><span class="sxs-lookup"><span data-stu-id="34888-357">rdpcorets.dll</span></span>     | <span data-ttu-id="34888-358">6.2.9200.21506 - KB4022719</span><span class="sxs-lookup"><span data-stu-id="34888-358">6.2.9200.21506 - KB4022719</span></span>         | <span data-ttu-id="34888-359">6.2.9200.22104 - KB4022724</span><span class="sxs-lookup"><span data-stu-id="34888-359">6.2.9200.22104 - KB4022724</span></span>                  | <span data-ttu-id="34888-360">6.3.9600.18619 - KB4022726</span><span class="sxs-lookup"><span data-stu-id="34888-360">6.3.9600.18619 - KB4022726</span></span>           | <span data-ttu-id="34888-361">10.0.14393.1198 - KB4022715</span><span class="sxs-lookup"><span data-stu-id="34888-361">10.0.14393.1198 - KB4022715</span></span>          | <span data-ttu-id="34888-362">10.0.15063.0</span><span class="sxs-lookup"><span data-stu-id="34888-362">10.0.15063.0</span></span>               |
|                         | <span data-ttu-id="34888-363">TERMSRV.dll</span><span class="sxs-lookup"><span data-stu-id="34888-363">termsrv.dll</span></span>       | <span data-ttu-id="34888-364">6.1.7601.23403 - KB3125574</span><span class="sxs-lookup"><span data-stu-id="34888-364">6.1.7601.23403 - KB3125574</span></span>         | <span data-ttu-id="34888-365">6.2.9200.17048 - KB2973501</span><span class="sxs-lookup"><span data-stu-id="34888-365">6.2.9200.17048 - KB2973501</span></span>                  | <span data-ttu-id="34888-366">6.3.9600.17415 - KB3000850</span><span class="sxs-lookup"><span data-stu-id="34888-366">6.3.9600.17415 - KB3000850</span></span>           | <span data-ttu-id="34888-367">10.0.14393.0 - KB4022715</span><span class="sxs-lookup"><span data-stu-id="34888-367">10.0.14393.0 - KB4022715</span></span>             | <span data-ttu-id="34888-368">10.0.15063.0</span><span class="sxs-lookup"><span data-stu-id="34888-368">10.0.15063.0</span></span>               |
|                         | <span data-ttu-id="34888-369">termdd.sys</span><span class="sxs-lookup"><span data-stu-id="34888-369">termdd.sys</span></span>        | <span data-ttu-id="34888-370">6.1.7601.23403 - KB3125574</span><span class="sxs-lookup"><span data-stu-id="34888-370">6.1.7601.23403 - KB3125574</span></span>         | -                                           | -                                    | -                                    | -                          |
|                         | <span data-ttu-id="34888-371">Win32k.sys</span><span class="sxs-lookup"><span data-stu-id="34888-371">win32k.sys</span></span>        | <span data-ttu-id="34888-372">6.1.7601.23807 - KB4022719</span><span class="sxs-lookup"><span data-stu-id="34888-372">6.1.7601.23807 - KB4022719</span></span>         | <span data-ttu-id="34888-373">6.2.9200.22168 - KB4022718</span><span class="sxs-lookup"><span data-stu-id="34888-373">6.2.9200.22168 - KB4022718</span></span>                  | <span data-ttu-id="34888-374">6.3.9600.18698 - KB4022726</span><span class="sxs-lookup"><span data-stu-id="34888-374">6.3.9600.18698 - KB4022726</span></span>           | <span data-ttu-id="34888-375">10.0.14393.594 - KB4022715</span><span class="sxs-lookup"><span data-stu-id="34888-375">10.0.14393.594 - KB4022715</span></span>           | -                          |
|                         | <span data-ttu-id="34888-376">rdpdd.dll</span><span class="sxs-lookup"><span data-stu-id="34888-376">rdpdd.dll</span></span>         | <span data-ttu-id="34888-377">6.1.7601.23403 - KB3125574</span><span class="sxs-lookup"><span data-stu-id="34888-377">6.1.7601.23403 - KB3125574</span></span>         | -                                           | -                                    | -                                    | -                          |
|                         | <span data-ttu-id="34888-378">Rdpwd.sys</span><span class="sxs-lookup"><span data-stu-id="34888-378">rdpwd.sys</span></span>         | <span data-ttu-id="34888-379">6.1.7601.23403 - KB3125574</span><span class="sxs-lookup"><span data-stu-id="34888-379">6.1.7601.23403 - KB3125574</span></span>         | -                                           | -                                    | -                                    | -                          |
| <span data-ttu-id="34888-380">Säkerhet</span><span class="sxs-lookup"><span data-stu-id="34888-380">Security</span></span>                | <span data-ttu-id="34888-381">På grund av WannaCrypt</span><span class="sxs-lookup"><span data-stu-id="34888-381">Due to WannaCrypt</span></span> | <span data-ttu-id="34888-382">KB4012212</span><span class="sxs-lookup"><span data-stu-id="34888-382">KB4012212</span></span>                          | <span data-ttu-id="34888-383">KB4012213</span><span class="sxs-lookup"><span data-stu-id="34888-383">KB4012213</span></span>                                   | <span data-ttu-id="34888-384">KB4012213</span><span class="sxs-lookup"><span data-stu-id="34888-384">KB4012213</span></span>                            | <span data-ttu-id="34888-385">KB4012606</span><span class="sxs-lookup"><span data-stu-id="34888-385">KB4012606</span></span>                            | <span data-ttu-id="34888-386">KB4012606</span><span class="sxs-lookup"><span data-stu-id="34888-386">KB4012606</span></span>                  |
|                         |                   |                                    | <span data-ttu-id="34888-387">KB4012216</span><span class="sxs-lookup"><span data-stu-id="34888-387">KB4012216</span></span>                                   |                                      | <span data-ttu-id="34888-388">KB4013198</span><span class="sxs-lookup"><span data-stu-id="34888-388">KB4013198</span></span>                            | <span data-ttu-id="34888-389">KB4013198</span><span class="sxs-lookup"><span data-stu-id="34888-389">KB4013198</span></span>                  |
|                         |                   | <span data-ttu-id="34888-390">KB4012215</span><span class="sxs-lookup"><span data-stu-id="34888-390">KB4012215</span></span>                          | <span data-ttu-id="34888-391">KB4012214</span><span class="sxs-lookup"><span data-stu-id="34888-391">KB4012214</span></span>                                   | <span data-ttu-id="34888-392">KB4012216</span><span class="sxs-lookup"><span data-stu-id="34888-392">KB4012216</span></span>                            | <span data-ttu-id="34888-393">KB4013429</span><span class="sxs-lookup"><span data-stu-id="34888-393">KB4013429</span></span>                            | <span data-ttu-id="34888-394">KB4013429</span><span class="sxs-lookup"><span data-stu-id="34888-394">KB4013429</span></span>                  |
|                         |                   |                                    | <span data-ttu-id="34888-395">KB4012217</span><span class="sxs-lookup"><span data-stu-id="34888-395">KB4012217</span></span>                                   |                                      | <span data-ttu-id="34888-396">KB4013429</span><span class="sxs-lookup"><span data-stu-id="34888-396">KB4013429</span></span>                            | <span data-ttu-id="34888-397">KB4013429</span><span class="sxs-lookup"><span data-stu-id="34888-397">KB4013429</span></span>                  |
       
### <span data-ttu-id="34888-398">När du ska använda sysprep<a id="step23"></a></span><span class="sxs-lookup"><span data-stu-id="34888-398">When to use sysprep <a id="step23"></a></span></span>    

<span data-ttu-id="34888-399">Sysprep är en process som du kan köra i en windows-installation som återställs installationen av systemet och ger en ”out of i box experience” genom att ta bort alla personliga data och återställa flera komponenter.</span><span class="sxs-lookup"><span data-stu-id="34888-399">Sysprep is a process that you could run into a windows installation that will reset the installation of the system and will provide an “out of the box experience” by removing all personal data and resetting several components.</span></span> <span data-ttu-id="34888-400">Du gör detta om du vill skapa en mall som du kan distribuera flera andra virtuella datorer som har en viss konfiguration.</span><span class="sxs-lookup"><span data-stu-id="34888-400">You typically do this if you want to create a template from which you can deploy several other VMs that have a specific configuration.</span></span> <span data-ttu-id="34888-401">Detta kallas en **generaliserad avbildning**.</span><span class="sxs-lookup"><span data-stu-id="34888-401">This is called a **generalized image**.</span></span>

<span data-ttu-id="34888-402">Om du vill i stället endast att skapa en virtuell dator från en disk kan du inte använda sysprep.</span><span class="sxs-lookup"><span data-stu-id="34888-402">If, instead, you want only to create one VM from one disk, you don’t have to use sysprep.</span></span> <span data-ttu-id="34888-403">I så fall kan du bara kan skapa den virtuella datorn från som kallas en **specialiserad avbildning**.</span><span class="sxs-lookup"><span data-stu-id="34888-403">In this situation, you can just create the VM from what is known as a **specialized image**.</span></span>

<span data-ttu-id="34888-404">Mer information om hur du skapar en virtuell dator från en särskild disk finns:</span><span class="sxs-lookup"><span data-stu-id="34888-404">For more information about how to create a VM from a specialized disk, see:</span></span>

- [<span data-ttu-id="34888-405">Skapa en virtuell dator från en särskild disk</span><span class="sxs-lookup"><span data-stu-id="34888-405">Create a VM from a specialized disk</span></span>](create-vm-specialized.md)
- [<span data-ttu-id="34888-406">Skapa en virtuell dator från en särskild VHD-disk</span><span class="sxs-lookup"><span data-stu-id="34888-406">Create a VM from a specialized VHD disk</span></span>](https://azure.microsoft.com/resources/templates/201-vm-specialized-vhd/)

<span data-ttu-id="34888-407">Om du vill skapa en generaliserad avbildning måste du köra sysprep.</span><span class="sxs-lookup"><span data-stu-id="34888-407">If you want to create a generalized image, you need to run sysprep.</span></span> <span data-ttu-id="34888-408">Mer information om Sysprep finns [så att använda Sysprep: en introduktion](http://technet.microsoft.com/library/bb457073.aspx).</span><span class="sxs-lookup"><span data-stu-id="34888-408">For more information about Sysprep, see [How to Use Sysprep: An Introduction](http://technet.microsoft.com/library/bb457073.aspx).</span></span> 

<span data-ttu-id="34888-409">Stöder den här generalisering inte varje roll eller program som är installerad på en Windows-baserad dator.</span><span class="sxs-lookup"><span data-stu-id="34888-409">Not every role or application that’s installed on a Windows-based computer supports this generalization.</span></span> <span data-ttu-id="34888-410">Så innan du kör den här proceduren finns i följande artikel för att se till att rollen för den datorn som stöds av sysprep.</span><span class="sxs-lookup"><span data-stu-id="34888-410">So before you run this procedure, refer to the following article to make sure that the role of that computer is supported by sysprep.</span></span> <span data-ttu-id="34888-411">Mer information [Sysprep-stöd för serverroller](https://msdn.microsoft.com/windows/hardware/commercialize/manufacture/desktop/sysprep-support-for-server-roles).</span><span class="sxs-lookup"><span data-stu-id="34888-411">For more information, [Sysprep Support for Server Roles](https://msdn.microsoft.com/windows/hardware/commercialize/manufacture/desktop/sysprep-support-for-server-roles).</span></span>

### <a name="steps-to-generalize-a-vhd"></a><span data-ttu-id="34888-412">Steg för att generalisera en virtuell Hårddisk</span><span class="sxs-lookup"><span data-stu-id="34888-412">Steps to generalize a VHD</span></span>

>[!NOTE]
> <span data-ttu-id="34888-413">Stäng av den virtuella datorn när du har kört sysprep.exe som anges i följande steg och inte aktiverar det igen förrän du har skapat en avbildning från den i Azure.</span><span class="sxs-lookup"><span data-stu-id="34888-413">After you run sysprep.exe as specified  in the following steps, turn off the VM, and do not turn it back on until you create an image from it in Azure.</span></span>

1. <span data-ttu-id="34888-414">Logga in på Windows VM.</span><span class="sxs-lookup"><span data-stu-id="34888-414">Sign in to the Windows VM.</span></span>
2. <span data-ttu-id="34888-415">Kör **kommandotolk** som administratör.</span><span class="sxs-lookup"><span data-stu-id="34888-415">Run **Command Prompt** as an administrator.</span></span> 
3. <span data-ttu-id="34888-416">Ändra katalogen till: **%windir%\system32\sysprep**, och kör sedan **sysprep.exe**.</span><span class="sxs-lookup"><span data-stu-id="34888-416">Change the directory to: **%windir%\system32\sysprep**, and then run **sysprep.exe**.</span></span>
3. <span data-ttu-id="34888-417">I den **systemförberedelseverktyget** dialogrutan **ange System Out of Box Experience (OOBE)**, och se till att den **Generalize** är markerad.</span><span class="sxs-lookup"><span data-stu-id="34888-417">In the **System Preparation Tool** dialog box, select **Enter System Out-of-Box Experience (OOBE)**, and make sure that the **Generalize** check box is selected.</span></span>

    ![Systemförberedelseverktyget](media/prepare-for-upload-vhd-image/syspre.png)
4. <span data-ttu-id="34888-419">I **avstängningsalternativ**väljer **avstängning**.</span><span class="sxs-lookup"><span data-stu-id="34888-419">In **Shutdown Options**, select **Shutdown**.</span></span>
5. <span data-ttu-id="34888-420">Klicka på **OK**.</span><span class="sxs-lookup"><span data-stu-id="34888-420">Click **OK**.</span></span>
6. <span data-ttu-id="34888-421">Stäng den virtuella datorn när Sysprep är klar.</span><span class="sxs-lookup"><span data-stu-id="34888-421">When Sysprep completes, shut down the VM.</span></span> <span data-ttu-id="34888-422">Använd inte **starta om** att stänga av den virtuella datorn.</span><span class="sxs-lookup"><span data-stu-id="34888-422">Do not use **Restart** to shut down the VM.</span></span>
7. <span data-ttu-id="34888-423">Den virtuella Hårddisken är nu redo att överföras.</span><span class="sxs-lookup"><span data-stu-id="34888-423">Now the VHD is ready to be uploaded.</span></span> <span data-ttu-id="34888-424">Mer information om hur du skapar en virtuell dator från en generaliserad disk finns [överför en generaliserad virtuell Hårddisk och använda den för att skapa en ny virtuella datorer i Azure](sa-upload-generalized.md).</span><span class="sxs-lookup"><span data-stu-id="34888-424">For more information about how to create a VM from a generalized disk, see [Upload a generalized VHD and use it to create a new VMs in Azure](sa-upload-generalized.md).</span></span>


## <a name="complete-recommended-configurations"></a><span data-ttu-id="34888-425">Fullständig rekommenderade konfigurationer</span><span class="sxs-lookup"><span data-stu-id="34888-425">Complete recommended configurations</span></span>
<span data-ttu-id="34888-426">Följande inställningar påverkar inte VHD-överföring.</span><span class="sxs-lookup"><span data-stu-id="34888-426">The following settings do not affect VHD uploading.</span></span> <span data-ttu-id="34888-427">Vi rekommenderar dock att du har konfigurerat dem.</span><span class="sxs-lookup"><span data-stu-id="34888-427">However, we strongly recommend that you configured them.</span></span>

* <span data-ttu-id="34888-428">Installera den [virtuella Azure-datorer Agent](http://go.microsoft.com/fwlink/?LinkID=394789&clcid=0x409).</span><span class="sxs-lookup"><span data-stu-id="34888-428">Install the [Azure VMs Agent](http://go.microsoft.com/fwlink/?LinkID=394789&clcid=0x409).</span></span> <span data-ttu-id="34888-429">Du kan aktivera VM-tillägg.</span><span class="sxs-lookup"><span data-stu-id="34888-429">Then you can enable VM extensions.</span></span> <span data-ttu-id="34888-430">VM-tillägg implementerar de flesta av de viktiga funktioner som du kanske vill använda med din virtuella dator, till exempel återställa lösenord, konfigurera RDP och så vidare.</span><span class="sxs-lookup"><span data-stu-id="34888-430">The VM extensions implement most of the critical functionality that you might want to use with your VMs such as resetting passwords, configuring RDP, and so on.</span></span> <span data-ttu-id="34888-431">Mer information finns i:</span><span class="sxs-lookup"><span data-stu-id="34888-431">For more information, see:</span></span>

    - [<span data-ttu-id="34888-432">VM-Agent och tillägg – del 1</span><span class="sxs-lookup"><span data-stu-id="34888-432">VM Agent and Extensions – Part 1</span></span>](https://azure.microsoft.com/blog/vm-agent-and-extensions-part-1/)
    - [<span data-ttu-id="34888-433">VM-Agent och tillägg – del 2</span><span class="sxs-lookup"><span data-stu-id="34888-433">VM Agent and Extensions – Part 2</span></span>](https://azure.microsoft.com/blog/vm-agent-and-extensions-part-2/)
* <span data-ttu-id="34888-434">Dump loggen kan vara användbar vid felsökning av problem med Windows krascher.</span><span class="sxs-lookup"><span data-stu-id="34888-434">The Dump log can be helpful in troubleshooting Windows crash issues.</span></span> <span data-ttu-id="34888-435">Aktivera Logginsamling Dump:</span><span class="sxs-lookup"><span data-stu-id="34888-435">Enable the Dump log collection:</span></span>
  
    ```PowerShell
    Set-ItemProperty -Path 'HKLM:\SYSTEM\CurrentControlSet\Control\CrashControl' -name "CrashDumpEnable" -Value "2" -Type DWord
    Set-ItemProperty -Path 'HKLM:\SYSTEM\CurrentControlSet\Control\CrashControl' -name "DumpFile" -Value "%SystemRoot%\MEMORY.DMP"
    Set-ItemProperty -Path 'HKLM:\SYSTEM\CurrentControlSet\Control\CrashControl' -name "AutoReboot" -Value 0 -Type DWord
    New-Item -Path 'HKLM:\SOFTWARE\Microsoft\Windows\Windows Error Reporting\LocalDumps'
    New-ItemProperty -Path 'HKLM:\SOFTWARE\Microsoft\Windows\Windows Error Reporting\LocalDumps' -name "DumpFolder" -Value "c:\CrashDumps"
    New-ItemProperty -Path 'HKLM:\SOFTWARE\Microsoft\Windows\Windows Error Reporting\LocalDumps' -name "DumpCount" -Value 10 -Type DWord
    New-ItemProperty -Path 'HKLM:\SOFTWARE\Microsoft\Windows\Windows Error Reporting\LocalDumps' -name "DumpType" -Value 2 -Type DWord
    Set-Service -Name WerSvc -StartupType Manual
    ```
    <span data-ttu-id="34888-436">Om några fel under procedurmässig steg i den här artikeln, innebär det att registernycklarna som redan finns.</span><span class="sxs-lookup"><span data-stu-id="34888-436">If you receive any errors during any of the procedural steps in this article, this means that the registry keys already exists.</span></span> <span data-ttu-id="34888-437">I så fall kan du använda följande kommandon i stället:</span><span class="sxs-lookup"><span data-stu-id="34888-437">In this situation, use the following commands instead:</span></span>

    ```PowerShell
    Set-ItemProperty -Path 'HKLM:\SYSTEM\CurrentControlSet\Control\CrashControl' -name "CrashDumpEnable" -Value "2" -Type DWord
    Set-ItemProperty -Path 'HKLM:\SYSTEM\CurrentControlSet\Control\CrashControl' -name "DumpFile" -Value "%SystemRoot%\MEMORY.DMP"
    Set-ItemProperty -Path 'HKLM:\SOFTWARE\Microsoft\Windows\Windows Error Reporting\LocalDumps' -name "DumpFolder" -Value "c:\CrashDumps"
    Set-ItemProperty -Path 'HKLM:\SOFTWARE\Microsoft\Windows\Windows Error Reporting\LocalDumps' -name "DumpCount" -Value 10 -Type DWord
    Set-ItemProperty -Path 'HKLM:\SOFTWARE\Microsoft\Windows\Windows Error Reporting\LocalDumps' -name "DumpType" -Value 2 -Type DWord
    Set-Service -Name WerSvc -StartupType Manual
    ```
*  <span data-ttu-id="34888-438">När den virtuella datorn skapas i Azure, rekommenderar vi att du placerar växlingsfilens storlek på ”Temporala” enheten för att förbättra prestanda.</span><span class="sxs-lookup"><span data-stu-id="34888-438">After the VM is created in Azure, we recommend that you put the pagefile on the ”Temporal drive” volume to improve performance.</span></span> <span data-ttu-id="34888-439">Du kan konfigurera detta på följande sätt:</span><span class="sxs-lookup"><span data-stu-id="34888-439">You can set up this as follows:</span></span>

    ```PowerShell
    Set-ItemProperty -Path 'HKLM:\SYSTEM\CurrentControlSet\Control\Session Manager\Memory Management' -name "PagingFiles" -Value "D:\pagefile"
    ```
<span data-ttu-id="34888-440">Om det finns data diskar som är kopplad till den virtuella datorn, är Temporal enhet enhetsbeteckning vanligtvis ”d”.</span><span class="sxs-lookup"><span data-stu-id="34888-440">If there’s any data disk that is attached to the VM, the Temporal drive volume's drive letter is typically "D."</span></span> <span data-ttu-id="34888-441">Den här beteckningen kan vara olika beroende på antalet enheter som är tillgängliga och de inställningar som du gör.</span><span class="sxs-lookup"><span data-stu-id="34888-441">This designation could be different, depending on the number of available drives and the settings that you  make.</span></span>

## <a name="next-steps"></a><span data-ttu-id="34888-442">Nästa steg</span><span class="sxs-lookup"><span data-stu-id="34888-442">Next steps</span></span>
* [<span data-ttu-id="34888-443">Ladda upp en Windows VM-avbildning till Azure för Resource Manager distributioner</span><span class="sxs-lookup"><span data-stu-id="34888-443">Upload a Windows VM image to Azure for Resource Manager deployments</span></span>](upload-generalized-managed.md)


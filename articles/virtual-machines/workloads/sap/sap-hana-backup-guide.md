---
title: "aaaBackup guide för SAP HANA på Azure Virtual Machines | Microsoft Docs"
description: "Säkerhetskopiering guiden för SAP HANA innehåller två huvudsakliga säkerhetskopiering möjligheter för SAP HANA på Azure virtual machines"
services: virtual-machines-linux
documentationcenter: 
author: hermanndms
manager: timlt
editor: 
ms.service: virtual-machines-linux
ms.devlang: NA
ms.topic: article
ums.tgt_pltfrm: vm-linux
ms.workload: infrastructure-services
ms.date: 3/13/2017
ms.author: rclaus
ms.openlocfilehash: e651091bb5da2698ec8bf80cad405bfce5b192cf
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: sv-SE
ms.lasthandoff: 10/06/2017
---
# <a name="backup-guide-for-sap-hana-on-azure-virtual-machines"></a><span data-ttu-id="f9401-103">Säkerhetskopieringsguide för SAP HANA på Azure Virtual Machines</span><span class="sxs-lookup"><span data-stu-id="f9401-103">Backup guide for SAP HANA on Azure Virtual Machines</span></span>

## <a name="getting-started"></a><span data-ttu-id="f9401-104">Komma igång</span><span class="sxs-lookup"><span data-stu-id="f9401-104">Getting Started</span></span>

<span data-ttu-id="f9401-105">hello säkerhetskopiering guide för SAP HANA körs på Azure virtual Machines beskriver endast Azure-specifik information.</span><span class="sxs-lookup"><span data-stu-id="f9401-105">hello backup guide for SAP HANA running on Azure virtual Machines will only describe Azure-specific topics.</span></span> <span data-ttu-id="f9401-106">Allmän SAP HANA säkerhetskopiering relaterade objekt, dokumentationen hello SAP HANA (se _SAP HANA säkerhetskopiering dokumentationen_ senare i den här artikeln).</span><span class="sxs-lookup"><span data-stu-id="f9401-106">For general SAP HANA backup related items, check hello SAP HANA documentation (see _SAP HANA backup documentation_ later in this article).</span></span>

<span data-ttu-id="f9401-107">hello fokuserar i den här artikeln på två huvudsakliga säkerhetskopiering möjligheter för SAP HANA på virtuella Azure-datorer:</span><span class="sxs-lookup"><span data-stu-id="f9401-107">hello focus of this article is on two major backup possibilities for SAP HANA on Azure virtual machines:</span></span>

- <span data-ttu-id="f9401-108">HANA säkerhetskopiering toohello filsystemet i en Azure Linux-dator (se [SAP HANA Azure Backup på filnivå](sap-hana-backup-file-level.md))</span><span class="sxs-lookup"><span data-stu-id="f9401-108">HANA backup toohello file system in an Azure Linux Virtual Machine (see [SAP HANA Azure Backup on file level](sap-hana-backup-file-level.md))</span></span>
- <span data-ttu-id="f9401-109">HANA säkerhetskopiering baserat på lagring ögonblicksbilder funktionen hello Azure storage blob ögonblicksbild manuellt eller Azure Backup Service (se [SAP HANA säkerhetskopiering baserat på lagring ögonblicksbilder](sap-hana-backup-storage-snapshots.md))</span><span class="sxs-lookup"><span data-stu-id="f9401-109">HANA backup based on storage snapshots using hello Azure storage blob snapshot feature manually or Azure Backup Service (see [SAP HANA backup based on storage snapshots](sap-hana-backup-storage-snapshots.md))</span></span>

<span data-ttu-id="f9401-110">SAP HANA erbjuder en säkerhetskopia API, vilket gör att verktyg för säkerhetskopiering från tredje part toointegrate direkt med SAP HANA.</span><span class="sxs-lookup"><span data-stu-id="f9401-110">SAP HANA offers a backup API, which allows third-party backup tools toointegrate directly with SAP HANA.</span></span> <span data-ttu-id="f9401-111">(Som ligger inte inom hello omfånget för den här handboken.) Det finns ingen direkt SAP HANA med Azure Backup-tjänsten tillgänglig höger nu baserat på den här API-integrering.</span><span class="sxs-lookup"><span data-stu-id="f9401-111">(That is not within hello scope of this guide.) There is no direct integration of SAP HANA with Azure Backup service available right now based on this API.</span></span>

<span data-ttu-id="f9401-112">SAP HANA stöds officiellt på Azure VM typ GS5 som instans med en ytterligare begränsning tooOLAP arbetsbelastningar (se [hitta certifierade IaaS-plattformar](https://global.sap.com/community/ebook/2014-09-02-hana-hardware/enEN/iaas.html) på hello SAP-webbplats).</span><span class="sxs-lookup"><span data-stu-id="f9401-112">SAP HANA is officially supported on Azure VM type GS5 as single instance with an additional restriction tooOLAP workloads (see [Find Certified IaaS Platforms](https://global.sap.com/community/ebook/2014-09-02-hana-hardware/enEN/iaas.html) on hello SAP website).</span></span> <span data-ttu-id="f9401-113">Den här artikeln kommer att uppdateras som nya erbjudanden för SAP HANA på Azure som blir tillgängliga.</span><span class="sxs-lookup"><span data-stu-id="f9401-113">This article will be updated as new offerings for SAP HANA on Azure become available.</span></span>

<span data-ttu-id="f9401-114">Det finns också en SAP HANA-hybridlösning på Azure, där SAP HANA körs icke-virtualiserade på fysiska servrar.</span><span class="sxs-lookup"><span data-stu-id="f9401-114">There is also an SAP HANA hybrid solution available on Azure, where SAP HANA runs non-virtualized on physical servers.</span></span> <span data-ttu-id="f9401-115">Men den här säkerhetskopiering SAP HANA Azure-handboken innehåller en ren Azure-miljön där SAP HANA körs i en Azure VM inte SAP HANA körs på &quot;stora instanser.&quot; Se [SAP HANA (stora instanser) översikt och arkitektur för Azure](hana-overview-architecture.md) för mer information om denna lösning för säkerhetskopiering på &quot;stora instanser&quot; baserat på lagring ögonblicksbilder.</span><span class="sxs-lookup"><span data-stu-id="f9401-115">However, this SAP HANA Azure backup guide covers a pure Azure environment where SAP HANA runs in an Azure VM, not SAP HANA running on &quot;large instances.&quot; See [SAP HANA (large instances) overview and architecture on Azure](hana-overview-architecture.md) for more information about this backup solution on &quot;large instances&quot; based on storage snapshots.</span></span>

<span data-ttu-id="f9401-116">Allmän information om SAP-produkter som stöds i Azure finns i [SAP Obs 1928533](https://launchpad.support.sap.com/#/notes/1928533).</span><span class="sxs-lookup"><span data-stu-id="f9401-116">General information about SAP products supported on Azure can be found in [SAP Note 1928533](https://launchpad.support.sap.com/#/notes/1928533).</span></span>

<span data-ttu-id="f9401-117">hello följande tre siffror ger en översikt över hello SAP HANA säkerhetskopieringsalternativ för närvarande använder inbyggda funktioner i Azure och visar också tre möjliga scenarier för framtida säkerhetskopiering.</span><span class="sxs-lookup"><span data-stu-id="f9401-117">hello following three figures give an overview of hello SAP HANA backup options using native Azure capabilities currently, and also show three potential future backup scenarios.</span></span> <span data-ttu-id="f9401-118">hello relaterade artiklar [SAP HANA Azure Backup på filnivå](sap-hana-backup-file-level.md) och [SAP HANA säkerhetskopiering baserat på lagring ögonblicksbilder](sap-hana-backup-storage-snapshots.md) beskrivs de olika alternativen i detalj, inklusive storlek och prestandaöverväganden för SAP HANA säkerhetskopior som har flera terabyte i storlek.</span><span class="sxs-lookup"><span data-stu-id="f9401-118">hello related articles [SAP HANA Azure Backup on file level](sap-hana-backup-file-level.md) and [SAP HANA backup based on storage snapshots](sap-hana-backup-storage-snapshots.md) describe these options in more detail, including size and performance considerations for SAP HANA backups that are multi-terabytes in size.</span></span>

![Den här bilden visar två möjligheter för att spara hello aktuellt tillstånd för virtuell dator](media/sap-hana-backup-guide/image001.png)

<span data-ttu-id="f9401-120">Den här bilden visar hello möjlighet att spara hello aktuellt tillstånd för virtuell dator, antingen via Azure Backup-tjänsten eller manuell ögonblicksbilder av Virtuella diskar.</span><span class="sxs-lookup"><span data-stu-id="f9401-120">This figure shows hello possibility of saving hello current VM state, either via Azure Backup service or manual snapshot of VM disks.</span></span> <span data-ttu-id="f9401-121">Med den här metoden, ett &#39; har toomanage SAP HANA säkerhetskopieringar.</span><span class="sxs-lookup"><span data-stu-id="f9401-121">With this approach, one doesn&#39;t have toomanage SAP HANA backups.</span></span> <span data-ttu-id="f9401-122">hello utmaningen hello disk ögonblicksbild scenario är filsystemkonsekvens och tillståndet programkonsekventa disk.</span><span class="sxs-lookup"><span data-stu-id="f9401-122">hello challenge of hello disk snapshot scenario is file system consistency, and an application-consistent disk state.</span></span> <span data-ttu-id="f9401-123">hello konsekvenskontroll avsnittet beskrivs i avsnittet hello _SAP HANA datakonsekvens när du tar lagring ögonblicksbilder_ senare i den här artikeln.</span><span class="sxs-lookup"><span data-stu-id="f9401-123">hello consistency topic is discussed in hello section _SAP HANA data consistency when taking storage snapshots_ later in this article.</span></span> <span data-ttu-id="f9401-124">Funktioner och begränsningar för Azure Backup-tjänsten-relaterade tooSAP HANA säkerhetskopieringar också beskrivs senare i den här artikeln.</span><span class="sxs-lookup"><span data-stu-id="f9401-124">Capabilities and restrictions of Azure Backup service related tooSAP HANA backups are also discussed later in this article.</span></span>

![Den här bilden visar alternativ för att ta en SAP HANA filsäkerhetskopia inuti hello VM](media/sap-hana-backup-guide/image002.png)

<span data-ttu-id="f9401-126">Den här bilden visar alternativ för tar en SAP HANA säkerhetskopiering i hello VM och sedan lagra den HANA säkerhetskopior någon annan använder olika verktyg.</span><span class="sxs-lookup"><span data-stu-id="f9401-126">This figure shows options for taking an SAP HANA file backup inside hello VM, and then storing it HANA backup files somewhere else using different tools.</span></span> <span data-ttu-id="f9401-127">Ta en säkerhetskopia HANA tar längre tid än en ögonblicksbild-baserad lösning för säkerhetskopiering, men den har fördelar om integritet och konsekvens.</span><span class="sxs-lookup"><span data-stu-id="f9401-127">Taking a HANA backup requires more time than a snapshot-based backup solution, but it has advantages regarding integrity and consistency.</span></span> <span data-ttu-id="f9401-128">Mer information finns nedan.</span><span class="sxs-lookup"><span data-stu-id="f9401-128">More details are provided later in this article.</span></span>

![Den här bilden visar eventuella framtida SAP HANA säkerhetskopiering scenario](media/sap-hana-backup-guide/image003.png)

<span data-ttu-id="f9401-130">Den här bilden illustrerar ett potentiella framtida SAP HANA säkerhetskopiering scenario.</span><span class="sxs-lookup"><span data-stu-id="f9401-130">This figure shows a potential future SAP HANA backup scenario.</span></span> <span data-ttu-id="f9401-131">Om du SAP HANA säkerhetskopiering från en sekundär replikering, det lägger till ytterligare alternativ för säkerhetskopieringsstrategier.</span><span class="sxs-lookup"><span data-stu-id="f9401-131">If SAP HANA allowed taking backups from a replication secondary, it would add additional options for backup strategies.</span></span> <span data-ttu-id="f9401-132">För närvarande kan inte enligt tooa post i hello SAP HANA Wiki:</span><span class="sxs-lookup"><span data-stu-id="f9401-132">Currently it isn't possible according tooa post in hello SAP HANA Wiki:</span></span>

<span data-ttu-id="f9401-133">_&quot;Är det möjligt tootake säkerhetskopieringar på hello sekundära sida?_</span><span class="sxs-lookup"><span data-stu-id="f9401-133">_&quot;Is it possible tootake backups on hello secondary side?_</span></span>

<span data-ttu-id="f9401-134">_Nej, för närvarande kan endast ta data och loggsäkerhetskopior på hello primära sida. Om automatisk säkerhetskopiering är aktiverad när gäller toohello sekundära sida, skrivas automatiskt det hello säkerhetskopior.&quot;_</span><span class="sxs-lookup"><span data-stu-id="f9401-134">_No, currently you can only take data and log backups on hello primary side. If automatic log backup is enabled, after takeover toohello secondary side, hello log backups will automatically be written there.&quot;_</span></span>

## <a name="sap-resources-for-hana-backup"></a><span data-ttu-id="f9401-135">SAP-resurser för HANA säkerhetskopiering</span><span class="sxs-lookup"><span data-stu-id="f9401-135">SAP resources for HANA backup</span></span>

### <a name="sap-hana-backup-documentation"></a><span data-ttu-id="f9401-136">Säkerhetskopiering SAP HANA-dokumentation</span><span class="sxs-lookup"><span data-stu-id="f9401-136">SAP HANA backup documentation</span></span>

- [<span data-ttu-id="f9401-137">Introduktion tooSAP HANA Administration</span><span class="sxs-lookup"><span data-stu-id="f9401-137">Introduction tooSAP HANA Administration</span></span>](https://help.sap.com/viewer/6b94445c94ae495c83a19646e7c3fd56/2.0.00/en-US)
- [<span data-ttu-id="f9401-138">Planera säkerhetskopiering och återställning strategi</span><span class="sxs-lookup"><span data-stu-id="f9401-138">Planning Your Backup and Recovery Strategy</span></span>](https://help.sap.com/saphelp_hanaplatform/helpdata/en/ef/085cd5949c40b788bba8fd3c65743e/content.htm)
- [<span data-ttu-id="f9401-139">Schemalägga HANA säkerhetskopia med ABAP DBACOCKPIT</span><span class="sxs-lookup"><span data-stu-id="f9401-139">Schedule HANA Backup using ABAP DBACOCKPIT</span></span>](http://www.hanatutorials.com/p/schedule-hana-backup-using-abap.html)
- [<span data-ttu-id="f9401-140">Schema för säkerhetskopiering av Data (SAP HANA Cockpit)</span><span class="sxs-lookup"><span data-stu-id="f9401-140">Schedule Data Backups (SAP HANA Cockpit)</span></span>](http://help.sap.com/saphelp_hanaplatform/helpdata/en/6d/385fa14ef64a6bab2c97a3d3e40292/frameset.htm)
- <span data-ttu-id="f9401-141">Vanliga frågor om SAP HANA-säkerhetskopiering på [SAP Obs 1642148](https://launchpad.support.sap.com/#/notes/1642148)</span><span class="sxs-lookup"><span data-stu-id="f9401-141">FAQ about SAP HANA backup in [SAP Note 1642148](https://launchpad.support.sap.com/#/notes/1642148)</span></span>
- <span data-ttu-id="f9401-142">Vanliga frågor och svar om ögonblicksbilder för SAP HANA-databasen och lagring i [SAP Obs 2039883](https://launchpad.support.sap.com/#/notes/2039883)</span><span class="sxs-lookup"><span data-stu-id="f9401-142">FAQ about SAP HANA database and storage snapshots in [SAP Note 2039883](https://launchpad.support.sap.com/#/notes/2039883)</span></span>
- <span data-ttu-id="f9401-143">Olämpliga nätverket filsystem för säkerhetskopiering och återställning i [SAP Obs 1820529](https://launchpad.support.sap.com/#/notes/1820529)</span><span class="sxs-lookup"><span data-stu-id="f9401-143">Unsuitable network file systems for backup and recovery in [SAP Note 1820529](https://launchpad.support.sap.com/#/notes/1820529)</span></span>

### <a name="why-sap-hana-backup"></a><span data-ttu-id="f9401-144">Varför SAP HANA-säkerhetskopiering?</span><span class="sxs-lookup"><span data-stu-id="f9401-144">Why SAP HANA backup?</span></span>

<span data-ttu-id="f9401-145">Azure storage erbjuder tillgänglighet och tillförlitlighet out of box hello (se [introduktion tooMicrosoft Azure Storage](../../../storage/common/storage-introduction.md) mer information om Azure storage).</span><span class="sxs-lookup"><span data-stu-id="f9401-145">Azure storage offers availability and reliability out of hello box (see [Introduction tooMicrosoft Azure Storage](../../../storage/common/storage-introduction.md) for more information about Azure storage).</span></span>

<span data-ttu-id="f9401-146">hello minimum för &quot;säkerhetskopiering&quot; är toorely på hello Azure SLA: er att behålla hello SAP HANA data och loggfilen filer på Azure virtuella hårddiskar anslutna toohello SAP HANA server VM.</span><span class="sxs-lookup"><span data-stu-id="f9401-146">hello minimum for &quot;backup&quot; is toorely on hello Azure SLAs, keeping hello SAP HANA data and log files on Azure VHDs attached toohello SAP HANA server VM.</span></span> <span data-ttu-id="f9401-147">Den här metoden omfattar VM fel, men inte eventuella skador toohello SAP HANA data och loggfiler eller logiska fel som tar bort data eller filer av misstag.</span><span class="sxs-lookup"><span data-stu-id="f9401-147">This approach covers VM failures, but not potential damage toohello SAP HANA data and log files, or logical errors like deleting data or files by accident.</span></span> <span data-ttu-id="f9401-148">Säkerhetskopieringar krävs för efterlevnad eller juridiska skäl.</span><span class="sxs-lookup"><span data-stu-id="f9401-148">Backups are also required for compliance or legal reasons.</span></span> <span data-ttu-id="f9401-149">Kort sagt: det behövs alltid en SAP HANA-säkerhetskopieringar.</span><span class="sxs-lookup"><span data-stu-id="f9401-149">In short, there is always a need for SAP HANA backups.</span></span>

### <a name="how-tooverify-correctness-of-sap-hana-backup"></a><span data-ttu-id="f9401-150">Hur tooverify är korrekt SAP HANA-säkerhetskopiering</span><span class="sxs-lookup"><span data-stu-id="f9401-150">How tooverify correctness of SAP HANA backup</span></span>
<span data-ttu-id="f9401-151">När du använder lagring ögonblicksbilder, bör köra en test-återställning på en annan dator.</span><span class="sxs-lookup"><span data-stu-id="f9401-151">When using storage snapshots, running a test restore on a different system is recommended.</span></span> <span data-ttu-id="f9401-152">Den här metoden ger ett sätt tooensure att en säkerhetskopia är rätt och interna processer för säkerhetskopiering och återställning fungerar som förväntat.</span><span class="sxs-lookup"><span data-stu-id="f9401-152">This approach provides a way tooensure that a backup is correct, and internal processes for backup and restore work as expected.</span></span> <span data-ttu-id="f9401-153">Även om detta är en betydande överskrida lokalt, är det mycket enklare tooaccomplish i hello molnet genom att tillhandahålla nödvändiga resurser tillfälligt för detta ändamål.</span><span class="sxs-lookup"><span data-stu-id="f9401-153">While this is a significant hurdle on-premises, it is much easier tooaccomplish in hello cloud by providing necessary resources temporarily for this purpose.</span></span>

<span data-ttu-id="f9401-154">Behåll i åtanke som gör en enkel återställning och kontrollera om HANA är igång och körs är inte tillräckligt.</span><span class="sxs-lookup"><span data-stu-id="f9401-154">Keep in mind that doing a simple restore and checking if HANA is up and running is not sufficient.</span></span> <span data-ttu-id="f9401-155">Vi rekommenderar bör en köra en tabell konsekvenskontroll Kontrollera toobe att hello återställa databasen är bra.</span><span class="sxs-lookup"><span data-stu-id="f9401-155">Ideally, one should run a table consistency check toobe sure that hello restored database is fine.</span></span> <span data-ttu-id="f9401-156">SAP HANA erbjuder flera typer av konsekvenskontroller som beskrivs i [SAP Obs 1977584](https://launchpad.support.sap.com/#/notes/1977584).</span><span class="sxs-lookup"><span data-stu-id="f9401-156">SAP HANA offers several kinds of consistency checks described in [SAP Note 1977584](https://launchpad.support.sap.com/#/notes/1977584).</span></span>

<span data-ttu-id="f9401-157">Information om hello tabell konsekvenskontroll finns på hello SAP-webbplats på [tabell och katalogen konsekvenskontroller](http://help.sap.com/saphelp_hanaplatform/helpdata/en/25/84ec2e324d44529edc8221956359ea/content.htm#loio9357bf52c7324bee9567dca417ad9f8b).</span><span class="sxs-lookup"><span data-stu-id="f9401-157">Information about hello table consistency check can also be found on hello SAP website at [Table and Catalog Consistency Checks](http://help.sap.com/saphelp_hanaplatform/helpdata/en/25/84ec2e324d44529edc8221956359ea/content.htm#loio9357bf52c7324bee9567dca417ad9f8b).</span></span>

<span data-ttu-id="f9401-158">En test-återställning är inte nödvändigt för vanliga filsäkerhetskopieringsverktyg.</span><span class="sxs-lookup"><span data-stu-id="f9401-158">For standard file backups, a test restore is not necessary.</span></span> <span data-ttu-id="f9401-159">Det finns två SAP HANA-verktyg som hjälper toocheck där säkerhetskopian kan användas för återställning: hdbbackupdiag och hdbbackupcheck.</span><span class="sxs-lookup"><span data-stu-id="f9401-159">There are two SAP HANA tools that help toocheck which backup can be used for restore: hdbbackupdiag and hdbbackupcheck.</span></span> <span data-ttu-id="f9401-160">Se [manuellt kontrollerar om en återställning är möjligt](https://help.sap.com/saphelp_hanaplatform/helpdata/en/77/522ef1e3cb4d799bab33e0aeb9c93b/content.htm) för mer information om dessa verktyg.</span><span class="sxs-lookup"><span data-stu-id="f9401-160">See [Manually Checking Whether a Recovery is Possible](https://help.sap.com/saphelp_hanaplatform/helpdata/en/77/522ef1e3cb4d799bab33e0aeb9c93b/content.htm) for more information about these tools.</span></span>

### <a name="pros-and-cons-of-hana-backup-versus-storage-snapshot"></a><span data-ttu-id="f9401-161">För- och nackdelar HANA säkerhetskopiering jämfört med lagring ögonblicksbild</span><span class="sxs-lookup"><span data-stu-id="f9401-161">Pros and cons of HANA backup versus storage snapshot</span></span>

<span data-ttu-id="f9401-162">SAP &#39; t ge inställningar tooeither HANA säkerhetskopiering jämfört med lagring ögonblicksbild.</span><span class="sxs-lookup"><span data-stu-id="f9401-162">SAP doesn&#39;t give preference tooeither HANA backup versus storage snapshot.</span></span> <span data-ttu-id="f9401-163">Visas en lista med sina för- och nackdelar, så en kan avgöra vilken toouse beroende på hello situation och tillgängliga lagringsteknik (se [planera din säkerhetskopiering och återställning strategi](https://help.sap.com/saphelp_hanaplatform/helpdata/en/ef/085cd5949c40b788bba8fd3c65743e/content.htm)).</span><span class="sxs-lookup"><span data-stu-id="f9401-163">It lists their pros and cons, so one can determine which toouse depending on hello situation and available storage technology (see [Planning Your Backup and Recovery Strategy](https://help.sap.com/saphelp_hanaplatform/helpdata/en/ef/085cd5949c40b788bba8fd3c65743e/content.htm)).</span></span>

<span data-ttu-id="f9401-164">På Azure, vara medveten om hello faktum att hello Azure blob ögonblicksbild funktionen &#39; t garantera filsystemkonsekvens (se [Using blob-ögonblicksbilder med PowerShell](https://blogs.msdn.microsoft.com/cie/2016/05/17/using-blob-snapshots-with-powershell/)).</span><span class="sxs-lookup"><span data-stu-id="f9401-164">On Azure, be aware of hello fact that hello Azure blob snapshot feature doesn&#39;t guarantee file system consistency (see [Using blob snapshots with PowerShell](https://blogs.msdn.microsoft.com/cie/2016/05/17/using-blob-snapshots-with-powershell/)).</span></span> <span data-ttu-id="f9401-165">Hej nästa avsnitt, _SAP HANA datakonsekvens när du tar lagring ögonblicksbilder_, beskriver vissa överväganden om den här funktionen.</span><span class="sxs-lookup"><span data-stu-id="f9401-165">hello next section, _SAP HANA data consistency when taking storage snapshots_, discusses some considerations regarding this feature.</span></span>

<span data-ttu-id="f9401-166">Dessutom har toounderstand hello fakturering effekter när du arbetar ofta med blob ögonblicksbilder som beskrivs i den här artikeln: [förstå hur ögonblicksbilder påförs kostnader](/rest/api/storageservices/understanding-how-snapshots-accrue-charges)– den inte är &#39; t som uppenbara som använder Azure virtuella diskar.</span><span class="sxs-lookup"><span data-stu-id="f9401-166">In addition, one has toounderstand hello billing implications when working frequently with blob snapshots as described in this article: [Understanding How Snapshots Accrue Charges](/rest/api/storageservices/understanding-how-snapshots-accrue-charges)—it isn&#39;t as obvious as using Azure virtual disks.</span></span>

### <a name="sap-hana-data-consistency-when-taking-storage-snapshots"></a><span data-ttu-id="f9401-167">SAP HANA datakonsekvens när du tar ögonblicksbilder för lagring</span><span class="sxs-lookup"><span data-stu-id="f9401-167">SAP HANA data consistency when taking storage snapshots</span></span>

<span data-ttu-id="f9401-168">System- och konsekvens i filen är ett komplicerat problem när du tar ögonblicksbilder för lagring.</span><span class="sxs-lookup"><span data-stu-id="f9401-168">File system and application consistency is a complex issue when taking storage snapshots.</span></span> <span data-ttu-id="f9401-169">hello enklaste sättet tooavoid problem skulle vara tooshut ned SAP HANA eller kanske även hello hela virtuella datorn.</span><span class="sxs-lookup"><span data-stu-id="f9401-169">hello easiest way tooavoid problems would be tooshut down SAP HANA, or maybe even hello whole virtual machine.</span></span> <span data-ttu-id="f9401-170">En avstängning kanske doable med en demonstration eller prototyp eller även utvecklingssystemet, men det är inte ett alternativ för ett produktionssystem.</span><span class="sxs-lookup"><span data-stu-id="f9401-170">A shutdown might be doable with a demo or prototype, or even a development system, but it is not an option for a production system.</span></span>

<span data-ttu-id="f9401-171">I Azure det, är ett tookeep ihåg att hello Azure blob ögonblicksbild funktionen &#39; t garantera filsystemkonsekvens.</span><span class="sxs-lookup"><span data-stu-id="f9401-171">On Azure, one has tookeep in mind that hello Azure blob snapshot feature doesn&#39;t guarantee file system consistency.</span></span> <span data-ttu-id="f9401-172">Den fungerar med hjälp av hello ögonblicksbild men SAP HANA-funktionen så länge det finns bara en virtuell disk som ingår.</span><span class="sxs-lookup"><span data-stu-id="f9401-172">It works fine however by using hello SAP HANA snapshot feature, as long as there is only a single virtual disk involved.</span></span> <span data-ttu-id="f9401-173">Men även med en enskild disk ytterligare objekt toobe markerad.</span><span class="sxs-lookup"><span data-stu-id="f9401-173">But even with a single disk, additional items have toobe checked.</span></span> <span data-ttu-id="f9401-174">[SAP Obs 2039883](https://launchpad.support.sap.com/#/notes/2039883) har viktig information om SAP HANA säkerhetskopieringar via storage snapshots.</span><span class="sxs-lookup"><span data-stu-id="f9401-174">[SAP Note 2039883](https://launchpad.support.sap.com/#/notes/2039883) has important information about SAP HANA backups via storage snapshots.</span></span> <span data-ttu-id="f9401-175">Till exempel nämns att med hello XFS filsystem, är det nödvändigt toorun **xfs\_låsa** innan du startar en ögonblicksbild tooguarantee konsekvenskontroll (se [xfs\_freeze(8) - Linux man sidan](https://linux.die.net/man/8/xfs_freeze) information om **xfs\_låsa**).</span><span class="sxs-lookup"><span data-stu-id="f9401-175">For example, it mentions that, with hello XFS file system, it is necessary toorun **xfs\_freeze** before starting a storage snapshot tooguarantee consistency (see [xfs\_freeze(8) - Linux man page](https://linux.die.net/man/8/xfs_freeze) for details on **xfs\_freeze**).</span></span>

<span data-ttu-id="f9401-176">hello avsnittet enhetlighet blir ännu mer utmanande i fall där en enda filsystemet sträcker sig över flera diskar/volymer.</span><span class="sxs-lookup"><span data-stu-id="f9401-176">hello topic of consistency becomes even more challenging in a case where a single file system spans multiple disks/volumes.</span></span> <span data-ttu-id="f9401-177">Till exempel med hjälp av mdadm eller LVM och striping.</span><span class="sxs-lookup"><span data-stu-id="f9401-177">For example, by using mdadm or LVM and striping.</span></span> <span data-ttu-id="f9401-178">hello SAP-kommentar som nämns ovan tillstånd:</span><span class="sxs-lookup"><span data-stu-id="f9401-178">hello SAP Note mentioned above states:</span></span>

<span data-ttu-id="f9401-179">_&quot;Men kom ihåg att hello lagringssystemet har tooguarantee i/o-konsekvenskontroll när du skapar en ögonblicksbild av lagring per volym för SAP HANA-data, t.ex. ögonblicksbilder för en SAP HANA tjänstspecifika datavolymen måste vara en atomisk åtgärd.&quot;_</span><span class="sxs-lookup"><span data-stu-id="f9401-179">_&quot;But keep in mind that hello storage system has tooguarantee I/O consistency while creating a storage snapshot per SAP HANA data volume, i.e. snapshotting of an SAP HANA service-specific data volume must be an atomic operation.&quot;_</span></span>

<span data-ttu-id="f9401-180">Under förutsättning att det finns ett XFS filsystem utsträckning fyra Azure virtuella diskar, hello följande åtgärder för en programkonsekvent ögonblicksbild som representerar hello HANA dataområdet:</span><span class="sxs-lookup"><span data-stu-id="f9401-180">Assuming there is an XFS file system spanning four Azure virtual disks, hello following steps provide a consistent snapshot that represents hello HANA data area:</span></span>

- <span data-ttu-id="f9401-181">Förbereda HANA ögonblicksbild</span><span class="sxs-lookup"><span data-stu-id="f9401-181">HANA snapshot prepare</span></span>
- <span data-ttu-id="f9401-182">Lås hello filsystem (till exempel använda **xfs\_låsa**)</span><span class="sxs-lookup"><span data-stu-id="f9401-182">Freeze hello file system (for example, use **xfs\_freeze**)</span></span>
- <span data-ttu-id="f9401-183">Skapa alla nödvändiga blob-ögonblicksbilder på Azure</span><span class="sxs-lookup"><span data-stu-id="f9401-183">Create all necessary blob snapshots on Azure</span></span>
- <span data-ttu-id="f9401-184">Lås upp hello filsystemet</span><span class="sxs-lookup"><span data-stu-id="f9401-184">Unfreeze hello file system</span></span>
- <span data-ttu-id="f9401-185">Bekräfta hello HANA ögonblicksbild</span><span class="sxs-lookup"><span data-stu-id="f9401-185">Confirm hello HANA snapshot</span></span>

<span data-ttu-id="f9401-186">Rekommendation är toouse hello proceduren ovan i alla fall toobe på hello säkra sidan, oavsett vilket filsystem.</span><span class="sxs-lookup"><span data-stu-id="f9401-186">Recommendation is toouse hello procedure above in all cases toobe on hello safe side, no matter which file system.</span></span> <span data-ttu-id="f9401-187">Eller om det är en enskild disk eller striping via mdadm eller LVM över flera diskar.</span><span class="sxs-lookup"><span data-stu-id="f9401-187">Or if it is a single disk or striping, via mdadm or LVM across multiple disks.</span></span>

<span data-ttu-id="f9401-188">Det är viktigt tooconfirm hello HANA ögonblicksbild.</span><span class="sxs-lookup"><span data-stu-id="f9401-188">It is important tooconfirm hello HANA snapshot.</span></span> <span data-ttu-id="f9401-189">På grund av toohello &quot;kopiering vid skrivning,&quot; SAP HANA kanske inte kräver ytterligare diskutrymme i detta förbereda läge ögonblicksbild.</span><span class="sxs-lookup"><span data-stu-id="f9401-189">Due toohello &quot;Copy-on-Write,&quot; SAP HANA might not require additional disk space while in this snapshot-prepare mode.</span></span> <span data-ttu-id="f9401-190">Den &#39; s också inte möjligt toostart nya säkerhetskopior tills hello SAP HANA ögonblicksbild har bekräftats.</span><span class="sxs-lookup"><span data-stu-id="f9401-190">It&#39;s also not possible toostart new backups until hello SAP HANA snapshot is confirmed.</span></span>

<span data-ttu-id="f9401-191">Azure Backup-tjänsten använder Azure VM-tillägg tootake vård hello filsystemkonsekvens.</span><span class="sxs-lookup"><span data-stu-id="f9401-191">Azure Backup service uses Azure VM extensions tootake care of hello file system consistency.</span></span> <span data-ttu-id="f9401-192">Dessa VM-tillägg är inte tillgängliga för fristående användning.</span><span class="sxs-lookup"><span data-stu-id="f9401-192">These VM extensions are not available for standalone usage.</span></span> <span data-ttu-id="f9401-193">En har fortfarande toomanage SAP HANA konsekvenskontroll.</span><span class="sxs-lookup"><span data-stu-id="f9401-193">One still has toomanage SAP HANA consistency.</span></span> <span data-ttu-id="f9401-194">Se hello relaterad artikel [SAP HANA Azure Backup på filnivå](sap-hana-backup-file-level.md) för mer information.</span><span class="sxs-lookup"><span data-stu-id="f9401-194">See hello related article [SAP HANA Azure Backup on file level](sap-hana-backup-file-level.md) for more information.</span></span>

### <a name="sap-hana-backup-scheduling-strategy"></a><span data-ttu-id="f9401-195">SAP HANA schemaläggning säkerhetskopieringsstrategi</span><span class="sxs-lookup"><span data-stu-id="f9401-195">SAP HANA backup scheduling strategy</span></span>

<span data-ttu-id="f9401-196">hello SAP HANA artikel [planera din säkerhetskopiering och återställning strategi](https://help.sap.com/saphelp_hanaplatform/helpdata/en/ef/085cd5949c40b788bba8fd3c65743e/content.htm) tillstånd för en grundläggande planera toodo säkerhetskopieringar:</span><span class="sxs-lookup"><span data-stu-id="f9401-196">hello SAP HANA article [Planning Your Backup and Recovery Strategy](https://help.sap.com/saphelp_hanaplatform/helpdata/en/ef/085cd5949c40b788bba8fd3c65743e/content.htm) states a basic plan toodo backups:</span></span>

- <span data-ttu-id="f9401-197">Lagring ögonblicksbild (varje dag)</span><span class="sxs-lookup"><span data-stu-id="f9401-197">Storage snapshot (daily)</span></span>
- <span data-ttu-id="f9401-198">Fullständig säkerhetskopiering med hjälp av filen eller bacint format (en gång i veckan)</span><span class="sxs-lookup"><span data-stu-id="f9401-198">Complete data backup using file or bacint format (once a week)</span></span>
- <span data-ttu-id="f9401-199">Automatisk loggsäkerhetskopior</span><span class="sxs-lookup"><span data-stu-id="f9401-199">Automatic log backups</span></span>

<span data-ttu-id="f9401-200">Du kan också kan en gå helt utan ögonblicksbilder av lagring de kan ersättas av HANA delta säkerhetskopieringar som inkrementella eller differentiella säkerhetskopieringar (se [Delta säkerhetskopieringar](https://help.sap.com/saphelp_hanaplatform/helpdata/en/c3/bb7e33bb571014a03eeabba4e37541/content.htm)).</span><span class="sxs-lookup"><span data-stu-id="f9401-200">Optionally, one could go completely without storage snapshots; they could be replaced by HANA delta backups, like incremental or differential backups (see [Delta Backups](https://help.sap.com/saphelp_hanaplatform/helpdata/en/c3/bb7e33bb571014a03eeabba4e37541/content.htm)).</span></span>

<span data-ttu-id="f9401-201">hello HANA Administration guide innehåller en exempel-lista.</span><span class="sxs-lookup"><span data-stu-id="f9401-201">hello HANA Administration guide provides an example list.</span></span> <span data-ttu-id="f9401-202">Det tyder på att en återställa SAP HANA tooa viss punkt i tiden använder följande sekvens av säkerhetskopieringar hello:</span><span class="sxs-lookup"><span data-stu-id="f9401-202">It suggests that one recover SAP HANA tooa specific point in time using hello following sequence of backups:</span></span>

1. <span data-ttu-id="f9401-203">Fullständig säkerhetskopiering</span><span class="sxs-lookup"><span data-stu-id="f9401-203">Full data backup</span></span>
2. <span data-ttu-id="f9401-204">Differentiell säkerhetskopiering</span><span class="sxs-lookup"><span data-stu-id="f9401-204">Differential backup</span></span>
3. <span data-ttu-id="f9401-205">Inkrementell säkerhetskopiering 1</span><span class="sxs-lookup"><span data-stu-id="f9401-205">Incremental backup 1</span></span>
4. <span data-ttu-id="f9401-206">Inkrementell säkerhetskopiering 2</span><span class="sxs-lookup"><span data-stu-id="f9401-206">Incremental backup 2</span></span>
5. <span data-ttu-id="f9401-207">Loggsäkerhetskopior</span><span class="sxs-lookup"><span data-stu-id="f9401-207">Log backups</span></span>

<span data-ttu-id="f9401-208">Om ett exakt schema som toowhen och hur ofta en viss typ av säkerhetskopiering ska hända, är det inte möjligt toogive Allmänt – det är för kundspecifika och beror på hur många data dataändringar hello system.</span><span class="sxs-lookup"><span data-stu-id="f9401-208">Regarding an exact schedule as toowhen and how often a specific backup type should happen, it is not possible toogive a general guideline—it is too customer-specific, and depends on how many data changes occur in hello system.</span></span> <span data-ttu-id="f9401-209">En grundläggande rekommendation från SAP-sida, vilket kan ses som en allmän vägledning är toomake en fullständig HANA säkerhetskopiering en gång i veckan.</span><span class="sxs-lookup"><span data-stu-id="f9401-209">One basic recommendation from SAP side, which can be seen as general guidance, is toomake one full HANA backup once a week.</span></span>
<span data-ttu-id="f9401-210">Angående loggsäkerhetskopior hello SAP HANA dokumentationen [Loggsäkerhetskopior](https://help.sap.com/saphelp_hanaplatform/helpdata/en/c3/bb7e33bb571014a03eeabba4e37541/content.htm).</span><span class="sxs-lookup"><span data-stu-id="f9401-210">Regarding log backups, see hello SAP HANA documentation [Log Backups](https://help.sap.com/saphelp_hanaplatform/helpdata/en/c3/bb7e33bb571014a03eeabba4e37541/content.htm).</span></span>

<span data-ttu-id="f9401-211">SAP rekommenderar även göra vissa underhåll av hello säkerhetskopieringskatalogen tookeep från växande oändligt (se [Housekeeping för säkerhetskopieringskatalogen och Backup Storage](http://help.sap.com/saphelp_hanaplatform/helpdata/en/ca/c903c28b0e4301b39814ef41dbf568/content.htm)).</span><span class="sxs-lookup"><span data-stu-id="f9401-211">SAP also recommends doing some housekeeping of hello backup catalog tookeep it from growing infinitely (see [Housekeeping for Backup Catalog and Backup Storage](http://help.sap.com/saphelp_hanaplatform/helpdata/en/ca/c903c28b0e4301b39814ef41dbf568/content.htm)).</span></span>

### <a name="sap-hana-configuration-files"></a><span data-ttu-id="f9401-212">Konfigurationsfiler för SAP HANA</span><span class="sxs-lookup"><span data-stu-id="f9401-212">SAP HANA configuration files</span></span>

<span data-ttu-id="f9401-213">Enligt informationen i hello vanliga frågor och svar i [SAP Obs 1642148](https://launchpad.support.sap.com/#/notes/1642148), hello SAP HANA konfigurationsfilerna inte är en del av en standard säkerhetskopiering HANA.</span><span class="sxs-lookup"><span data-stu-id="f9401-213">As stated in hello FAQ in [SAP Note 1642148](https://launchpad.support.sap.com/#/notes/1642148), hello SAP HANA configuration files are not part of a standard HANA backup.</span></span> <span data-ttu-id="f9401-214">De är inte viktigt toorestore ett system.</span><span class="sxs-lookup"><span data-stu-id="f9401-214">They are not essential toorestore a system.</span></span> <span data-ttu-id="f9401-215">hello HANA konfigurationen kan ändras manuellt efter hello återställning.</span><span class="sxs-lookup"><span data-stu-id="f9401-215">hello HANA configuration could be changed manually after hello restore.</span></span> <span data-ttu-id="f9401-216">Om en vill tooget hello samma anpassad konfiguration under hello återställningsprocessen är det nödvändigt tooback hello HANA configuration-filer separat.</span><span class="sxs-lookup"><span data-stu-id="f9401-216">In case one would like tooget hello same custom configuration during hello restore process, it is necessary tooback up hello HANA configuration files separately.</span></span>

<span data-ttu-id="f9401-217">Om standard HANA säkerhetskopior kommer tooa dedikerad HANA säkerhetskopian system, en kan också kopiera hello configuration filer toohello samma säkerhetskopiera filsystemet och kopiera allt tillsammans toohello slutliga lagringsplats som kall blob-lagring.</span><span class="sxs-lookup"><span data-stu-id="f9401-217">If standard HANA backups are going tooa dedicated HANA backup file system, one could also copy hello configuration files toohello same backup filesystem, and then copy everything together toohello final storage destination like cool blob storage.</span></span>

### <a name="sap-hana-cockpit"></a><span data-ttu-id="f9401-218">SAP HANA Cockpit</span><span class="sxs-lookup"><span data-stu-id="f9401-218">SAP HANA Cockpit</span></span>

<span data-ttu-id="f9401-219">SAP HANA Cockpit erbjuder hello möjligheten att övervaka och hantera SAP HANA via en webbläsare.</span><span class="sxs-lookup"><span data-stu-id="f9401-219">SAP HANA Cockpit offers hello possibility of monitoring and managing SAP HANA via a browser.</span></span> <span data-ttu-id="f9401-220">Det kan också hantering av SAP HANA säkerhetskopieringar och därför kan användas som ett alternativt tooSAP HANA Studio och ABAP DBACOCKPIT (se [SAP HANA Cockpit](https://help.sap.com/saphelp_hanaplatform/helpdata/en/73/c37822444344f3973e0e976b77958e/content.htm) mer information).</span><span class="sxs-lookup"><span data-stu-id="f9401-220">It also allows handling of SAP HANA backups, and therefore can be used as an alternative tooSAP HANA Studio and ABAP DBACOCKPIT (see [SAP HANA Cockpit](https://help.sap.com/saphelp_hanaplatform/helpdata/en/73/c37822444344f3973e0e976b77958e/content.htm) for more information).</span></span>

![Den här bilden visar hello SAP HANA Cockpit databasen Administration skärmen](media/sap-hana-backup-guide/image004.png)

<span data-ttu-id="f9401-222">Den här bilden visar hello SAP HANA Cockpit databasen Administration skärmen och hello säkerhetskopiering panelen på hello kvar.</span><span class="sxs-lookup"><span data-stu-id="f9401-222">This figure shows hello SAP HANA Cockpit Database Administration Screen, and hello backup tile on hello left.</span></span> <span data-ttu-id="f9401-223">Se hello säkerhetskopiering panelen kräver lämpliga användarbehörigheter för inloggningskontot.</span><span class="sxs-lookup"><span data-stu-id="f9401-223">Seeing hello backup tile requires appropriate user permissions for login account.</span></span>

![Säkerhetskopieringar kan övervakas i SAP HANA Cockpit medan de är pågående](media/sap-hana-backup-guide/image005.png)

<span data-ttu-id="f9401-225">Säkerhetskopieringar kan övervakas i SAP HANA Cockpit medan de är pågående, och när den är klar, alla hello säkerhetskopiering information är tillgänglig.</span><span class="sxs-lookup"><span data-stu-id="f9401-225">Backups can be monitored in SAP HANA Cockpit while they are ongoing and, once it is finished, all hello backup details are available.</span></span>

![Ett exempel på en Azure SLES 12 VM med gör väldigt lätt desktop Firefox](media/sap-hana-backup-guide/image006.png)

<span data-ttu-id="f9401-227">hello föregående skärmbilderna har gjorts från en Windows Azure-VM.</span><span class="sxs-lookup"><span data-stu-id="f9401-227">hello previous screenshots were made from an Azure Windows VM.</span></span> <span data-ttu-id="f9401-228">Det här är ett exempel på en Azure SLES 12 VM med gör väldigt lätt desktop Firefox.</span><span class="sxs-lookup"><span data-stu-id="f9401-228">This one is an example using Firefox on an Azure SLES 12 VM with Gnome desktop.</span></span> <span data-ttu-id="f9401-229">Den visar hello alternativet toodefine SAP HANA scheman för säkerhetskopiering i Cockpit för SAP HANA.</span><span class="sxs-lookup"><span data-stu-id="f9401-229">It shows hello option toodefine SAP HANA backup schedules in SAP HANA Cockpit.</span></span> <span data-ttu-id="f9401-230">Som en kan också se föreslår datum/tid som ett prefix för hello säkerhetskopior.</span><span class="sxs-lookup"><span data-stu-id="f9401-230">As one can also see, it suggests date/time as a prefix for hello backup files.</span></span> <span data-ttu-id="f9401-231">SAP HANA Studio är hello standard prefixet &quot;Slutför\_DATA\_säkerhetskopiering&quot; när du gör en fullständig säkerhetskopia.</span><span class="sxs-lookup"><span data-stu-id="f9401-231">In SAP HANA Studio, hello default prefix is &quot;COMPLETE\_DATA\_BACKUP&quot; when doing a full file backup.</span></span> <span data-ttu-id="f9401-232">Du bör använda ett unikt prefix.</span><span class="sxs-lookup"><span data-stu-id="f9401-232">Using a unique prefix is recommended.</span></span>

### <a name="sap-hana-backup-encryption"></a><span data-ttu-id="f9401-233">SAP HANA säkerhetskopia av krypteringsnyckeln</span><span class="sxs-lookup"><span data-stu-id="f9401-233">SAP HANA backup encryption</span></span>

<span data-ttu-id="f9401-234">SAP HANA erbjuder kryptering av data och loggfilen.</span><span class="sxs-lookup"><span data-stu-id="f9401-234">SAP HANA offers encryption of data and log.</span></span> <span data-ttu-id="f9401-235">Om SAP HANA-data och loggfilen inte krypteras kan sedan krypteras hello säkerhetskopieringar också inte.</span><span class="sxs-lookup"><span data-stu-id="f9401-235">If SAP HANA data and log are not encrypted, then hello backups are also not encrypted.</span></span> <span data-ttu-id="f9401-236">Är det upp toohello kunden toouse någon form av lösning från tredje part tooencrypt hello SAP HANA säkerhetskopieringar.</span><span class="sxs-lookup"><span data-stu-id="f9401-236">It is up toohello customer toouse some form of third-party solution tooencrypt hello SAP HANA backups.</span></span> <span data-ttu-id="f9401-237">Se [Data och loggfilen volymkryptering](https://help.sap.com/saphelp_hanaplatform/helpdata/en/dc/01f36fbb5710148b668201a6e95cf2/content.htm) toofind mer information om SAP HANA-kryptering.</span><span class="sxs-lookup"><span data-stu-id="f9401-237">See [Data and Log Volume Encryption](https://help.sap.com/saphelp_hanaplatform/helpdata/en/dc/01f36fbb5710148b668201a6e95cf2/content.htm) toofind out more about SAP HANA encryption.</span></span>

<span data-ttu-id="f9401-238">En kund kan använda hello IaaS VM kryptering funktionen tooencrypt i Microsoft Azure.</span><span class="sxs-lookup"><span data-stu-id="f9401-238">On Microsoft Azure, a customer could use hello IaaS VM encryption feature tooencrypt.</span></span> <span data-ttu-id="f9401-239">En kan exempelvis använda dedicerade data diskar anslutna toohello VM, som är används toostore SAP HANA säkerhetskopior och sedan göra kopior av dessa diskar.</span><span class="sxs-lookup"><span data-stu-id="f9401-239">For example, one could use dedicated data disks attached toohello VM, which are used toostore SAP HANA backups, then make copies of these disks.</span></span>

<span data-ttu-id="f9401-240">Azure Backup-tjänsten kan hantera krypterade VMs-diskar (se [hur tooback upp och återställning av krypterade virtuella datorer med Azure Backup](../../../backup/backup-azure-vms-encryption.md)).</span><span class="sxs-lookup"><span data-stu-id="f9401-240">Azure Backup service can handle encrypted VMs/disks (see [How tooback up and restore encrypted virtual machines with Azure Backup](../../../backup/backup-azure-vms-encryption.md)).</span></span>

<span data-ttu-id="f9401-241">Ett annat alternativ skulle toomaintain hello SAP HANA VM och dess diskar utan kryptering och lagra hello SAP HANA-säkerhetskopior i ett lagringskonto som kryptering aktiverades (se [Azure Storage Service-kryptering för Data i vila](../../../storage/common/storage-service-encryption.md)) .</span><span class="sxs-lookup"><span data-stu-id="f9401-241">Another option would be toomaintain hello SAP HANA VM and its disks without encryption, and store hello SAP HANA backup files in a storage account for which encryption was enabled (see [Azure Storage Service Encryption for Data at Rest](../../../storage/common/storage-service-encryption.md)).</span></span>

## <a name="test-setup"></a><span data-ttu-id="f9401-242">Testa installationen</span><span class="sxs-lookup"><span data-stu-id="f9401-242">Test setup</span></span>

### <a name="test-virtual-machine-on-azure"></a><span data-ttu-id="f9401-243">Testa virtuell dator på Azure</span><span class="sxs-lookup"><span data-stu-id="f9401-243">Test Virtual Machine on Azure</span></span>

<span data-ttu-id="f9401-244">En SAP HANA-installation i en Azure GS5 VM användes för hello efter säkerhetskopiering/återställning tester.</span><span class="sxs-lookup"><span data-stu-id="f9401-244">An SAP HANA installation in an Azure GS5 VM was used for hello following backup/restore tests.</span></span>

![Den här bilden visar en del av hello översikt av Azure portal för hello HANA VM](media/sap-hana-backup-guide/image007.png)

<span data-ttu-id="f9401-246">Den här bilden visar en del av hello översikt av Azure portal för hello HANA VM.</span><span class="sxs-lookup"><span data-stu-id="f9401-246">This figure shows part of hello Azure portal overview for hello HANA test VM.</span></span>

### <a name="test-backup-size"></a><span data-ttu-id="f9401-247">Testa säkerhetskopieringsstorlek</span><span class="sxs-lookup"><span data-stu-id="f9401-247">Test backup size</span></span>

![Denna bild har kopplats från hello säkerhetskopiering konsolen i HANA Studio och visar hello säkerhetskopian storlek på 229 GB för hello HANA indexserver](media/sap-hana-backup-guide/image008.png)

<span data-ttu-id="f9401-249">En dummy tabell fylldes med data tooget över 200 GB tooderive realistiska prestandadata totala data säkerhetskopiering storleken.</span><span class="sxs-lookup"><span data-stu-id="f9401-249">A dummy table was filled up with data tooget a total data backup size of over 200 GB tooderive realistic performance data.</span></span> <span data-ttu-id="f9401-250">hello bild hämtades från hello säkerhetskopiering konsolen i HANA Studio som visar hello säkerhetskopian storlek på 229 GB för hello HANA indexserver.</span><span class="sxs-lookup"><span data-stu-id="f9401-250">hello figure was taken from hello backup console in HANA Studio and shows hello backup file size of 229 GB for hello HANA index server.</span></span> <span data-ttu-id="f9401-251">För hello tester användes hello säkerhetskopiering standardprefix ”COMPLETE_DATA_BACKUP” i SAP HANA Studio.</span><span class="sxs-lookup"><span data-stu-id="f9401-251">For hello tests, hello default backup prefix "COMPLETE_DATA_BACKUP" in SAP HANA Studio was used.</span></span> <span data-ttu-id="f9401-252">Ett mer användbar prefix ska vara definierat i verklig produktionssystem.</span><span class="sxs-lookup"><span data-stu-id="f9401-252">In real production systems, a more useful prefix should be defined.</span></span> <span data-ttu-id="f9401-253">SAP HANA Cockpit föreslår datum/tid.</span><span class="sxs-lookup"><span data-stu-id="f9401-253">SAP HANA Cockpit suggests date/time.</span></span>

### <a name="test-tool-toocopy-files-directly-tooazure-storage"></a><span data-ttu-id="f9401-254">Testa verktyget toocopy filer direkt tooAzure lagring</span><span class="sxs-lookup"><span data-stu-id="f9401-254">Test tool toocopy files directly tooAzure storage</span></span>

<span data-ttu-id="f9401-255">tootransfer SAP HANA säkerhetskopierade filer direkt tooAzure blob storage eller Azure-filresurser hello blobxfer verktyget användes eftersom den stöder både mål och den kan enkelt integreras i automatiseringsskript på grund av tooits kommandoradsgränssnitt.</span><span class="sxs-lookup"><span data-stu-id="f9401-255">tootransfer SAP HANA backup files directly tooAzure blob storage, or Azure file shares, hello blobxfer tool was used because it supports both targets and it can be easily integrated into automation scripts due tooits command-line interface.</span></span> <span data-ttu-id="f9401-256">Hej blobxfer verktyget är tillgängligt på [GitHub](https://github.com/Azure/blobxfer).</span><span class="sxs-lookup"><span data-stu-id="f9401-256">hello blobxfer tool is available on [GitHub](https://github.com/Azure/blobxfer).</span></span>

### <a name="test-backup-size-estimation"></a><span data-ttu-id="f9401-257">Testa säkerhetskopieringsstorlek uppskattning</span><span class="sxs-lookup"><span data-stu-id="f9401-257">Test backup size estimation</span></span>

<span data-ttu-id="f9401-258">Det är viktigt tooestimate hello säkerhetskopiering storleken för SAP HANA.</span><span class="sxs-lookup"><span data-stu-id="f9401-258">It is important tooestimate hello backup size of SAP HANA.</span></span> <span data-ttu-id="f9401-259">Denna uppskattning hjälper tooimprove prestanda genom att definiera Hej max säkerhetskopians storlek för ett antal säkerhetskopior, på grund av tooparallelism under en filkopia.</span><span class="sxs-lookup"><span data-stu-id="f9401-259">This estimate helps tooimprove performance by defining hello max backup file size for a number of backup files, due tooparallelism during a file copy.</span></span> <span data-ttu-id="f9401-260">(Dessa uppgifter beskrivs senare i den här artikeln.) En måste också bestämma om toodo en fullständig säkerhetskopiering eller en Deltasynkronisering säkerhetskopiering (inkrementell eller differentiell).</span><span class="sxs-lookup"><span data-stu-id="f9401-260">(Those details are explained later in this article.) One must also decide whether toodo a full backup or a delta backup (incremental or differential).</span></span>

<span data-ttu-id="f9401-261">Lyckligtvis finns en enkel SQL-sats som beräknar hello storleken på hello säkerhetskopior: **Välj \* från M\_säkerhetskopiering\_storlek\_UPPSKATTNINGAR** (se [ Uppskattningen hello utrymme behövs i hello filsystem för säkerhetskopiering av Data](https://help.sap.com/saphelp_hanaplatform/helpdata/en/7d/46337b7a9c4c708d965b65bc0f343c/content.htm)).</span><span class="sxs-lookup"><span data-stu-id="f9401-261">Fortunately, there is a simple SQL statement that estimates hello size of hello backup files: **select \* from M\_BACKUP\_SIZE\_ESTIMATIONS** (see [Estimate hello Space Needed in hello File System for a Data Backup](https://help.sap.com/saphelp_hanaplatform/helpdata/en/7d/46337b7a9c4c708d965b65bc0f343c/content.htm)).</span></span>

![hello utdata från den här SQL-instruktionen matchar nästan exakt hello verkliga storleken på hello fullständig säkerhetskopiering på disk](media/sap-hana-backup-guide/image009.png)

<span data-ttu-id="f9401-263">För hello testsystemet matchar hello utdata från den här SQL-instruktionen nästan exakt hello verkliga storleken på hello fullständig säkerhetskopiering på disk.</span><span class="sxs-lookup"><span data-stu-id="f9401-263">For hello test system, hello output of this SQL statement matches almost exactly hello real size of hello full data backup on disk.</span></span>

### <a name="test-hana-backup-file-size"></a><span data-ttu-id="f9401-264">Testa HANA säkerhetskopians storlek</span><span class="sxs-lookup"><span data-stu-id="f9401-264">Test HANA backup file size</span></span>

![hello HANA Studio säkerhetskopiering konsolen kan en toorestrict hello maximal filstorlek HANA säkerhetskopiering av filer](media/sap-hana-backup-guide/image010.png)

<span data-ttu-id="f9401-266">hello HANA Studio säkerhetskopiering konsolen kan en toorestrict hello maximal filstorlek HANA säkerhetskopiering av filer.</span><span class="sxs-lookup"><span data-stu-id="f9401-266">hello HANA Studio backup console allows one toorestrict hello max file size of HANA backup files.</span></span> <span data-ttu-id="f9401-267">I hello exempel miljö gör funktionen det möjligt tooget flera mindre säkerhetskopieringsfilerna i stället för en 230 GB säkerhetskopian.</span><span class="sxs-lookup"><span data-stu-id="f9401-267">In hello sample environment, that feature makes it possible tooget multiple smaller backup files instead of one 230-GB backup file.</span></span> <span data-ttu-id="f9401-268">Mindre filstorlek har en betydande inverkan på prestanda (se hello relaterad artikel [SAP HANA Azure Backup på filnivå](sap-hana-backup-file-level.md)).</span><span class="sxs-lookup"><span data-stu-id="f9401-268">Smaller file size has a significant impact on performance (see hello related article [SAP HANA Azure Backup on file level](sap-hana-backup-file-level.md)).</span></span>

## <a name="summary"></a><span data-ttu-id="f9401-269">Sammanfattning</span><span class="sxs-lookup"><span data-stu-id="f9401-269">Summary</span></span>

<span data-ttu-id="f9401-270">Baserat på hello testresultaten hello följande tabeller visar för- och nackdelar lösningar tooback in en SAP HANA-databas som körs på virtuella Azure-datorer.</span><span class="sxs-lookup"><span data-stu-id="f9401-270">Based on hello test results hello following tables show pros and cons of solutions tooback up an SAP HANA database running on Azure virtual machines.</span></span>

<span data-ttu-id="f9401-271">**Säkerhetskopiera SAP HANA toohello filsystemet och kopiera säkerhetskopieringsfilerna efteråt toohello slutliga mål för säkerhetskopian**</span><span class="sxs-lookup"><span data-stu-id="f9401-271">**Back up SAP HANA toohello file system and copy backup files afterwards toohello final backup destination**</span></span>

|<span data-ttu-id="f9401-272">Lösning</span><span class="sxs-lookup"><span data-stu-id="f9401-272">Solution</span></span>                                           |<span data-ttu-id="f9401-273">Tekniker</span><span class="sxs-lookup"><span data-stu-id="f9401-273">Pros</span></span>                                 |<span data-ttu-id="f9401-274">Nackdelar</span><span class="sxs-lookup"><span data-stu-id="f9401-274">Cons</span></span>                                  |
|---------------------------------------------------|-------------------------------------|--------------------------------------|
|<span data-ttu-id="f9401-275">Behåll HANA säkerhetskopior på Virtuella diskar</span><span class="sxs-lookup"><span data-stu-id="f9401-275">Keep HANA backups on VM disks</span></span>                      |<span data-ttu-id="f9401-276">Inget ytterligare arbete</span><span class="sxs-lookup"><span data-stu-id="f9401-276">No additional management efforts</span></span>     |<span data-ttu-id="f9401-277">Eats lokala VM diskutrymme</span><span class="sxs-lookup"><span data-stu-id="f9401-277">Eats up local VM disk space</span></span>           |
|<span data-ttu-id="f9401-278">Blobxfer verktyget toocopy säkerhetskopior tooblob lagring</span><span class="sxs-lookup"><span data-stu-id="f9401-278">Blobxfer tool toocopy backup files tooblob storage</span></span> |<span data-ttu-id="f9401-279">Parallellitet toocopy flera filer, val toouse kall blob-lagring</span><span class="sxs-lookup"><span data-stu-id="f9401-279">Parallelism toocopy multiple files, choice toouse cool blob storage</span></span> | <span data-ttu-id="f9401-280">Ytterligare verktyget underhåll och anpassade skript</span><span class="sxs-lookup"><span data-stu-id="f9401-280">Additional tool maintenance and custom scripting</span></span> | 
|<span data-ttu-id="f9401-281">BLOB-kopiering via Powershell eller CLI</span><span class="sxs-lookup"><span data-stu-id="f9401-281">Blob copy via Powershell or CLI</span></span>                    |<span data-ttu-id="f9401-282">Inget ytterligare verktyg som behövs, kan utföras via Azure Powershell eller CLI</span><span class="sxs-lookup"><span data-stu-id="f9401-282">No additional tool necessary, can be accomplished via Azure Powershell or CLI</span></span> |<span data-ttu-id="f9401-283">manuell process kunden har tootake vård skript och hantering av kopierade BLOB för återställning</span><span class="sxs-lookup"><span data-stu-id="f9401-283">manual process, customer has tootake care of scripting and management of copied blobs for restore</span></span>|
|<span data-ttu-id="f9401-284">Kopiera tooNFS resursen</span><span class="sxs-lookup"><span data-stu-id="f9401-284">Copy tooNFS share</span></span>                                  |<span data-ttu-id="f9401-285">Efter bearbetning av säkerhetskopior på andra Virtuella utan påverkan på hello HANA server</span><span class="sxs-lookup"><span data-stu-id="f9401-285">Post-processing of backup files on other VM without impact on hello HANA server</span></span>|<span data-ttu-id="f9401-286">Långsam kopieringsprocessen</span><span class="sxs-lookup"><span data-stu-id="f9401-286">Slow copy process</span></span>|
|<span data-ttu-id="f9401-287">Blobxfer kopiera tooAzure Filtjänst</span><span class="sxs-lookup"><span data-stu-id="f9401-287">Blobxfer copy tooAzure File Service</span></span>                |<span data-ttu-id="f9401-288">Inte äta utrymme på den lokala Virtuella diskar</span><span class="sxs-lookup"><span data-stu-id="f9401-288">Doesn't eat up space on local VM disks</span></span>|<span data-ttu-id="f9401-289">Ingen direkt skriva stöd av HANA säkerhetskopiering, storleksbegränsningen på filresursen för närvarande på 5 TB</span><span class="sxs-lookup"><span data-stu-id="f9401-289">No direct write support by HANA backup, size restriction of file share currently at 5 TB</span></span>|
|<span data-ttu-id="f9401-290">Azure Backup-agenten</span><span class="sxs-lookup"><span data-stu-id="f9401-290">Azure Backup Agent</span></span>                                 | <span data-ttu-id="f9401-291">Är en bättre lösning</span><span class="sxs-lookup"><span data-stu-id="f9401-291">Would be preferred solution</span></span>         | <span data-ttu-id="f9401-292">För närvarande inte tillgänglig på Linux</span><span class="sxs-lookup"><span data-stu-id="f9401-292">Currently not available on Linux</span></span>    |



<span data-ttu-id="f9401-293">**Säkerhetskopiering SAP HANA baserat på lagring ögonblicksbilder**</span><span class="sxs-lookup"><span data-stu-id="f9401-293">**Backup SAP HANA based on storage snapshots**</span></span>

|<span data-ttu-id="f9401-294">Lösning</span><span class="sxs-lookup"><span data-stu-id="f9401-294">Solution</span></span>                                           |<span data-ttu-id="f9401-295">Tekniker</span><span class="sxs-lookup"><span data-stu-id="f9401-295">Pros</span></span>                                 |<span data-ttu-id="f9401-296">Nackdelar</span><span class="sxs-lookup"><span data-stu-id="f9401-296">Cons</span></span>                                  |
|---------------------------------------------------|-------------------------------------|--------------------------------------|
|<span data-ttu-id="f9401-297">Azure Backup-tjänsten</span><span class="sxs-lookup"><span data-stu-id="f9401-297">Azure Backup Service</span></span>                               | <span data-ttu-id="f9401-298">Kan säkerhetskopiering baserat på blob ögonblicksbilder</span><span class="sxs-lookup"><span data-stu-id="f9401-298">Allows VM backup based on blob snapshots</span></span> | <span data-ttu-id="f9401-299">När du använder inte filen nivån återställning, krävs hello skapandet av en ny virtuell dator för hello återställningsprocessen, vilket innebär hello behovet av en ny nyckel för SAP HANA-licens</span><span class="sxs-lookup"><span data-stu-id="f9401-299">When not using file level restore, it requires hello creation of a new VM for hello restore process, which then implies hello need of a new SAP HANA license key</span></span>|
|<span data-ttu-id="f9401-300">Manuell blob ögonblicksbilder</span><span class="sxs-lookup"><span data-stu-id="f9401-300">Manual blob snapshots</span></span>                              | <span data-ttu-id="f9401-301">Flexibilitet toocreate och återställning av specifika Virtuella diskar utan att ändra hello unikt ID för VM</span><span class="sxs-lookup"><span data-stu-id="f9401-301">Flexibility toocreate and restore specific VM disks without changing hello unique VM ID</span></span>|<span data-ttu-id="f9401-302">Alla manuellt arbete som har toobe hello kunden har gjort</span><span class="sxs-lookup"><span data-stu-id="f9401-302">All manual work, which has toobe done by hello customer</span></span>|

## <a name="next-steps"></a><span data-ttu-id="f9401-303">Nästa steg</span><span class="sxs-lookup"><span data-stu-id="f9401-303">Next steps</span></span>
* <span data-ttu-id="f9401-304">[SAP HANA Azure Backup på filnivå](sap-hana-backup-file-level.md) beskriver hello filbaserade alternativ för säkerhetskopiering.</span><span class="sxs-lookup"><span data-stu-id="f9401-304">[SAP HANA Azure Backup on file level](sap-hana-backup-file-level.md) describes hello file-based backup option.</span></span>
* <span data-ttu-id="f9401-305">[SAP HANA säkerhetskopiering baserat på lagring ögonblicksbilder](sap-hana-backup-storage-snapshots.md) beskriver hello snapshot-baserad säkerhetskopiering lagringsalternativ.</span><span class="sxs-lookup"><span data-stu-id="f9401-305">[SAP HANA backup based on storage snapshots](sap-hana-backup-storage-snapshots.md) describes hello storage snapshot-based backup option.</span></span>
* <span data-ttu-id="f9401-306">hur tooestablish hög tillgänglighet och planera för katastrofåterställning för SAP HANA i Azure (stora instanser), se toolearn [SAP HANA (stora instanser) hög tillgänglighet och katastrofåterställning recovery på Azure](hana-overview-high-availability-disaster-recovery.md).</span><span class="sxs-lookup"><span data-stu-id="f9401-306">toolearn how tooestablish high availability and plan for disaster recovery of SAP HANA on Azure (large instances), see [SAP HANA (large instances) high availability and disaster recovery on Azure](hana-overview-high-availability-disaster-recovery.md).</span></span>

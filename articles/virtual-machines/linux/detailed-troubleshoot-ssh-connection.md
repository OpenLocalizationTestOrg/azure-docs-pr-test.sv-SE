---
title: "Detaljerad felsökning av SSH för en virtuell dator i Azure | Microsoft Docs"
description: "Mer detaljerad SSH felsökningssteg för problem som ansluter till en virtuell Azure-dator"
keywords: SSH anslutningen nekades, ssh fel, azure ssh, SSH-anslutning misslyckades
services: virtual-machines-linux
documentationcenter: 
author: iainfoulds
manager: timlt
editor: 
tags: top-support-issue,azure-service-management,azure-resource-manager
ms.assetid: b8e8be5f-e8a6-489d-9922-9df8de32e839
ms.service: virtual-machines-linux
ms.workload: infrastructure-services
ms.tgt_pltfrm: vm-linux
ms.devlang: na
ms.topic: support-article
ms.date: 07/06/2017
ms.author: iainfou
ms.openlocfilehash: 9ccdb3fbca21264065eeb1c4e46314c62af4c2e8
ms.sourcegitcommit: 02e69c4a9d17645633357fe3d46677c2ff22c85a
ms.translationtype: MT
ms.contentlocale: sv-SE
ms.lasthandoff: 08/03/2017
---
# <a name="detailed-ssh-troubleshooting-steps-for-issues-connecting-to-a-linux-vm-in-azure"></a><span data-ttu-id="0db11-104">Detaljerad SSH felsökningssteg för problem som ansluter till en Linux-VM i Azure</span><span class="sxs-lookup"><span data-stu-id="0db11-104">Detailed SSH troubleshooting steps for issues connecting to a Linux VM in Azure</span></span>
<span data-ttu-id="0db11-105">Det finns många möjliga orsaker till att SSH-klienten inte kanske kan nå SSH-tjänsten på den virtuella datorn.</span><span class="sxs-lookup"><span data-stu-id="0db11-105">There are many possible reasons that the SSH client might not be able to reach the SSH service on the VM.</span></span> <span data-ttu-id="0db11-106">Om du har följt via mer [allmänna SSH felsökningssteg](troubleshoot-ssh-connection.md), du behöver ytterligare felsöka problemet.</span><span class="sxs-lookup"><span data-stu-id="0db11-106">If you have followed through the more [general SSH troubleshooting steps](troubleshoot-ssh-connection.md), you need to further troubleshoot the connection issue.</span></span> <span data-ttu-id="0db11-107">Den här artikeln hjälper dig att detaljerade felsökningssteg för att fastställa om SSH-anslutningen inte fungerar och hur man löser problemet.</span><span class="sxs-lookup"><span data-stu-id="0db11-107">This article guides you through detailed troubleshooting steps to determine where the SSH connection is failing and how to resolve it.</span></span>

## <a name="take-preliminary-steps"></a><span data-ttu-id="0db11-108">Vidta åtgärder för preliminär</span><span class="sxs-lookup"><span data-stu-id="0db11-108">Take preliminary steps</span></span>
<span data-ttu-id="0db11-109">I följande diagram visas de komponenter som ingår.</span><span class="sxs-lookup"><span data-stu-id="0db11-109">The following diagram shows the components that are involved.</span></span>

![Diagram som visar komponenter för SSH-tjänsten](./media/detailed-troubleshoot-ssh-connection/ssh-tshoot1.png)

<span data-ttu-id="0db11-111">Följande steg hjälper dig identifiera orsaken till felet och lösningar eller lösningar.</span><span class="sxs-lookup"><span data-stu-id="0db11-111">The following steps help you isolate the source of the failure and figure out solutions or workarounds.</span></span>

1. <span data-ttu-id="0db11-112">Kontrollera status för den virtuella datorn i portalen.</span><span class="sxs-lookup"><span data-stu-id="0db11-112">Check the status of the VM in the portal.</span></span>
   <span data-ttu-id="0db11-113">I den [Azure-portalen](https://portal.azure.com)väljer **virtuella datorer** > *namn på virtuell*.</span><span class="sxs-lookup"><span data-stu-id="0db11-113">In the [Azure portal](https://portal.azure.com), select **Virtual machines** > *VM name*.</span></span>

   <span data-ttu-id="0db11-114">Panelen status för den virtuella datorn ska visa **kör**.</span><span class="sxs-lookup"><span data-stu-id="0db11-114">The status pane for the VM should show **Running**.</span></span> <span data-ttu-id="0db11-115">Rulla Visa senaste aktiviteten för bearbetning, lagring och nätverksresurser.</span><span class="sxs-lookup"><span data-stu-id="0db11-115">Scroll down to show recent activity for compute, storage, and network resources.</span></span>

2. <span data-ttu-id="0db11-116">Välj **inställningar** att undersöka slutpunkter, IP-adresser, nätverkssäkerhetsgrupper och andra inställningar.</span><span class="sxs-lookup"><span data-stu-id="0db11-116">Select **Settings** to examine endpoints, IP addresses, network security groups, and other settings.</span></span>

   <span data-ttu-id="0db11-117">Den virtuella datorn ska ha en slutpunkt som definierats för SSH-trafik som du kan visa i **slutpunkter** eller  **[nätverkssäkerhetsgruppen](../../virtual-network/virtual-networks-nsg.md)**.</span><span class="sxs-lookup"><span data-stu-id="0db11-117">The VM should have an endpoint defined for SSH traffic that you can view in **Endpoints** or **[Network security group](../../virtual-network/virtual-networks-nsg.md)**.</span></span> <span data-ttu-id="0db11-118">Slutpunkter i virtuella datorer som har skapats med hjälp av hanteraren för filserverresurser lagras i en nätverkssäkerhetsgrupp.</span><span class="sxs-lookup"><span data-stu-id="0db11-118">Endpoints in VMs that were created by using Resource Manager are stored in a network security group.</span></span> <span data-ttu-id="0db11-119">Kontrollera också att reglerna som har tillämpats för nätverkssäkerhetsgruppen och att de är refereras i undernätet.</span><span class="sxs-lookup"><span data-stu-id="0db11-119">Also, verify that the rules have been applied to the network security group and that they're referenced in the subnet.</span></span>

<span data-ttu-id="0db11-120">Om du vill kontrollera nätverksanslutningen konfigurerade slutpunkter och se om du till den virtuella datorn med ett annat protokoll, till exempel http- eller en annan tjänst.</span><span class="sxs-lookup"><span data-stu-id="0db11-120">To verify network connectivity, check the configured endpoints and see if you can reach the VM through another protocol, such as HTTP or another service.</span></span>

<span data-ttu-id="0db11-121">Försök SSH-anslutningen igen efter de här stegen.</span><span class="sxs-lookup"><span data-stu-id="0db11-121">After these steps, try the SSH connection again.</span></span>

## <a name="find-the-source-of-the-issue"></a><span data-ttu-id="0db11-122">Hitta källan till problemet</span><span class="sxs-lookup"><span data-stu-id="0db11-122">Find the source of the issue</span></span>
<span data-ttu-id="0db11-123">SSH-klienten på datorn kanske inte kan nå SSH-tjänsten på den virtuella Azure-datorn på grund av problem eller felaktiga konfigurationer inom följande områden:</span><span class="sxs-lookup"><span data-stu-id="0db11-123">The SSH client on your computer might fail to reach the SSH service on the Azure VM due to issues or misconfigurations in the following areas:</span></span>

* [<span data-ttu-id="0db11-124">SSH-klientdatorn</span><span class="sxs-lookup"><span data-stu-id="0db11-124">SSH client computer</span></span>](#source-1-ssh-client-computer)
* [<span data-ttu-id="0db11-125">Gränsenheten för organisationen</span><span class="sxs-lookup"><span data-stu-id="0db11-125">Organization edge device</span></span>](#source-2-organization-edge-device)
* [<span data-ttu-id="0db11-126">Molnet tjänstslutpunkten och åtkomstkontrollista (ACL)</span><span class="sxs-lookup"><span data-stu-id="0db11-126">Cloud service endpoint and access control list (ACL)</span></span>](#source-3-cloud-service-endpoint-and-acl)
* [<span data-ttu-id="0db11-127">Nätverkssäkerhetsgrupper</span><span class="sxs-lookup"><span data-stu-id="0db11-127">Network security groups</span></span>](#source-4-network-security-groups)
* [<span data-ttu-id="0db11-128">Linux-baserade Azure VM</span><span class="sxs-lookup"><span data-stu-id="0db11-128">Linux-based Azure VM</span></span>](#source-5-linux-based-azure-virtual-machine)

## <a name="source-1-ssh-client-computer"></a><span data-ttu-id="0db11-129">Datakällan 1: SSH klientdatorn</span><span class="sxs-lookup"><span data-stu-id="0db11-129">Source 1: SSH client computer</span></span>
<span data-ttu-id="0db11-130">Kontrollera att det kan göra att SSH-anslutningar till en annan lokal Linux-baserade datorn för att ta bort datorn som källa för felet.</span><span class="sxs-lookup"><span data-stu-id="0db11-130">To eliminate your computer as the source of the failure, verify that it can make SSH connections to another on-premises, Linux-based computer.</span></span>

![Diagram som visar SSH komponenter för klientdatorer](./media/detailed-troubleshoot-ssh-connection/ssh-tshoot2.png)

<span data-ttu-id="0db11-132">Om anslutningen misslyckas, Sök efter följande problem på datorn:</span><span class="sxs-lookup"><span data-stu-id="0db11-132">If the connection fails, check for the following issues on your computer:</span></span>

* <span data-ttu-id="0db11-133">En inställning för lokal brandvägg som blockerar inkommande eller utgående SSH-trafik (TCP 22)</span><span class="sxs-lookup"><span data-stu-id="0db11-133">A local firewall setting that is blocking inbound or outbound SSH traffic (TCP 22)</span></span>
* <span data-ttu-id="0db11-134">Lokalt installerat klientprogramvaran för proxy som hindrar SSH-anslutningar</span><span class="sxs-lookup"><span data-stu-id="0db11-134">Locally installed client proxy software that is preventing SSH connections</span></span>
* <span data-ttu-id="0db11-135">Lokalt installerad programvara som hindrar SSH-anslutningar för nätverksövervakning</span><span class="sxs-lookup"><span data-stu-id="0db11-135">Locally installed network monitoring software that is preventing SSH connections</span></span>
* <span data-ttu-id="0db11-136">Andra typer av säkerhetsprogram som övervaka trafik eller tillåta/neka vissa typer av trafik</span><span class="sxs-lookup"><span data-stu-id="0db11-136">Other types of security software that either monitor traffic or allow/disallow specific types of traffic</span></span>

<span data-ttu-id="0db11-137">Om något av dessa villkor gäller tillfälligt inaktivera programmen och en SSH-anslutning till en lokal dator att ta reda på orsaken till anslutningen blockeras på datorn.</span><span class="sxs-lookup"><span data-stu-id="0db11-137">If one of these conditions apply, temporarily disable the software and try an SSH connection to an on-premises computer to find out the reason the connection is being blocked on your computer.</span></span> <span data-ttu-id="0db11-138">Sedan arbeta med administratören att åtgärda Programvaruinställningar för att tillåta SSH-anslutningar.</span><span class="sxs-lookup"><span data-stu-id="0db11-138">Then work with your network administrator to correct the software settings to allow SSH connections.</span></span>

<span data-ttu-id="0db11-139">Om du använder certifikatautentisering kan du kontrollera att du har följande behörigheter till .ssh-mappen i din hemkatalog:</span><span class="sxs-lookup"><span data-stu-id="0db11-139">If you are using certificate authentication, verify that you have these permissions to the .ssh folder in your home directory:</span></span>

* <span data-ttu-id="0db11-140">Chmod 700 ~/.ssh</span><span class="sxs-lookup"><span data-stu-id="0db11-140">Chmod 700 ~/.ssh</span></span>
* <span data-ttu-id="0db11-141">Chmod 644 ~/.ssh/\*pub</span><span class="sxs-lookup"><span data-stu-id="0db11-141">Chmod 644 ~/.ssh/\*.pub</span></span>
* <span data-ttu-id="0db11-142">Chmod 600 ~/.ssh/id_rsa (eller andra filer som har dina privata nycklar lagras i dem)</span><span class="sxs-lookup"><span data-stu-id="0db11-142">Chmod 600 ~/.ssh/id_rsa (or any other files that have your private keys stored in them)</span></span>
* <span data-ttu-id="0db11-143">Chmod 644 ~/.ssh/known_hosts (innehåller värdar som du har anslutit till via SSH)</span><span class="sxs-lookup"><span data-stu-id="0db11-143">Chmod 644 ~/.ssh/known_hosts (contains hosts that you’ve connected to via SSH)</span></span>

## <a name="source-2-organization-edge-device"></a><span data-ttu-id="0db11-144">Källan 2: Gränsenheten organisation</span><span class="sxs-lookup"><span data-stu-id="0db11-144">Source 2: Organization edge device</span></span>
<span data-ttu-id="0db11-145">Kontrollera att en dator som är direkt ansluten till Internet kan göra SSH-anslutningar till den virtuella Azure-datorn för att ta bort gränsenheten för din organisation som källa för felet.</span><span class="sxs-lookup"><span data-stu-id="0db11-145">To eliminate your organization edge device as the source of the failure, verify that a computer that's directly connected to the Internet can make SSH connections to your Azure VM.</span></span> <span data-ttu-id="0db11-146">Om du ansluter till den virtuella datorn via ett plats-till-plats-VPN eller Azure ExpressRoute-anslutning, går du till [källa 4: Nätverkssäkerhetsgrupper](#nsg).</span><span class="sxs-lookup"><span data-stu-id="0db11-146">If you are accessing the VM over a site-to-site VPN or an Azure ExpressRoute connection, skip to [Source 4: Network security groups](#nsg).</span></span>

![Diagram som visar gränsenheten för organisationen](./media/detailed-troubleshoot-ssh-connection/ssh-tshoot3.png)

<span data-ttu-id="0db11-148">Om du inte har en dator som är direkt anslutna till Internet, skapa en ny Azure VM i sin egen resursgrupp eller Molntjänsten och använda den.</span><span class="sxs-lookup"><span data-stu-id="0db11-148">If you don't have a computer that is directly connected to the Internet, create a new Azure VM in its own resource group or cloud service and use it.</span></span> <span data-ttu-id="0db11-149">Mer information finns i [skapa en virtuell dator som kör Linux i Azure](quick-create-cli.md).</span><span class="sxs-lookup"><span data-stu-id="0db11-149">For more information, see [Create a virtual machine running Linux in Azure](quick-create-cli.md).</span></span> <span data-ttu-id="0db11-150">Ta bort den resursgrupp eller VM-och moln när du är klar med din testning.</span><span class="sxs-lookup"><span data-stu-id="0db11-150">Delete the resource group or VM and cloud service when you're done with your testing.</span></span>

<span data-ttu-id="0db11-151">Om du kan skapa en SSH-anslutning med en dator som är direkt ansluten till Internet, kontrollera din organisation insticksenhet för:</span><span class="sxs-lookup"><span data-stu-id="0db11-151">If you can create an SSH connection with a computer that's directly connected to the Internet, check your organization edge device for:</span></span>

* <span data-ttu-id="0db11-152">En intern brandvägg som blockerar trafik SSH med Internet</span><span class="sxs-lookup"><span data-stu-id="0db11-152">An internal firewall that's blocking SSH traffic with the Internet</span></span>
* <span data-ttu-id="0db11-153">En proxyserver som förhindrar att SSH-anslutningar</span><span class="sxs-lookup"><span data-stu-id="0db11-153">A proxy server that's preventing SSH connections</span></span>
* <span data-ttu-id="0db11-154">Intrångsidentifiering eller program som körs på enheter i nätverket kant som hindrar SSH-anslutningar för nätverksövervakning</span><span class="sxs-lookup"><span data-stu-id="0db11-154">Intrusion detection or network monitoring software running on devices in your edge network that's preventing SSH connections</span></span>

<span data-ttu-id="0db11-155">Arbeta med nätverksadministratören för att korrigera inställningarna för enheter som din organisation för att tillåta trafik SSH med Internet.</span><span class="sxs-lookup"><span data-stu-id="0db11-155">Work with your network administrator to correct the settings of your organization edge devices to allow SSH traffic with the Internet.</span></span>

## <a name="source-3-cloud-service-endpoint-and-acl"></a><span data-ttu-id="0db11-156">Källa 3: Molnet tjänstslutpunkten och ACL</span><span class="sxs-lookup"><span data-stu-id="0db11-156">Source 3: Cloud service endpoint and ACL</span></span>
> [!NOTE]
> <span data-ttu-id="0db11-157">Den här källan gäller bara för virtuella datorer som har skapats med hjälp av den klassiska distributionsmodellen.</span><span class="sxs-lookup"><span data-stu-id="0db11-157">This source applies only to VMs that were created by using the classic deployment model.</span></span> <span data-ttu-id="0db11-158">För virtuella datorer som har skapats med hjälp av hanteraren för filserverresurser kan gå vidare till [datakällan 4: Nätverkssäkerhetsgrupper](#nsg).</span><span class="sxs-lookup"><span data-stu-id="0db11-158">For VMs that were created by using Resource Manager, skip to [source 4: Network security groups](#nsg).</span></span>

<span data-ttu-id="0db11-159">Kontrollera att en annan virtuell Azure-dator i samma virtuella nätverk kan göra SSH-anslutningar till den virtuella datorn för att ta bort molnet tjänstslutpunkten och ACL som källa för felet.</span><span class="sxs-lookup"><span data-stu-id="0db11-159">To eliminate the cloud service endpoint and ACL as the source of the failure, verify that another Azure VM in the same virtual network can make SSH connections to your VM.</span></span>

![Diagram som illustrerar molnet tjänstslutpunkten och ACL](./media/detailed-troubleshoot-ssh-connection/ssh-tshoot4.png)

<span data-ttu-id="0db11-161">Om du inte har en annan virtuell dator i samma virtuella nätverk kan skapa du enkelt en.</span><span class="sxs-lookup"><span data-stu-id="0db11-161">If you don't have another VM in the same virtual network, you can easily create one.</span></span> <span data-ttu-id="0db11-162">Mer information finns i [skapar en Linux-VM på Azure med hjälp av CLI](quick-create-cli.md).</span><span class="sxs-lookup"><span data-stu-id="0db11-162">For more information, see [Create a Linux VM on Azure using the CLI](quick-create-cli.md).</span></span> <span data-ttu-id="0db11-163">Ta bort extra VM när du är klar med din testning.</span><span class="sxs-lookup"><span data-stu-id="0db11-163">Delete the extra VM when you are done with your testing.</span></span>

<span data-ttu-id="0db11-164">Om du kan skapa en SSH-anslutning med en virtuell dator i samma virtuella nätverk, kontrollerar du följande områden:</span><span class="sxs-lookup"><span data-stu-id="0db11-164">If you can create an SSH connection with a VM in the same virtual network, check the following areas:</span></span>

* <span data-ttu-id="0db11-165">**Slutpunktskonfigurationen för SSH-trafik på mål-VM.**</span><span class="sxs-lookup"><span data-stu-id="0db11-165">**The endpoint configuration for SSH traffic on the target VM.**</span></span> <span data-ttu-id="0db11-166">Den privata TCP-porten för slutpunkten ska matcha den TCP-port som avlyssnas SSH-tjänsten på den virtuella datorn.</span><span class="sxs-lookup"><span data-stu-id="0db11-166">The private TCP port of the endpoint should match the TCP port on which the SSH service on the VM is listening.</span></span> <span data-ttu-id="0db11-167">(Standardporten är 22).</span><span class="sxs-lookup"><span data-stu-id="0db11-167">(The default port is 22).</span></span> <span data-ttu-id="0db11-168">Kontrollera SSH TCP-portnummer i Azure-portalen genom att välja **virtuella datorer** > *namn på virtuell* > **inställningar**  >   **Slutpunkter**.</span><span class="sxs-lookup"><span data-stu-id="0db11-168">Verify the SSH TCP port number in the Azure portal by selecting **Virtual machines** > *VM name* > **Settings** > **Endpoints**.</span></span>
* <span data-ttu-id="0db11-169">**ACL för slutpunkten för SSH-trafik på den virtuella måldatorn.**</span><span class="sxs-lookup"><span data-stu-id="0db11-169">**The ACL for the SSH traffic endpoint on the target virtual machine.**</span></span> <span data-ttu-id="0db11-170">En ACL kan du ange tillåts eller nekas inkommande trafik från Internet, baserat på dess IP-adress.</span><span class="sxs-lookup"><span data-stu-id="0db11-170">An ACL enables you to specify allowed or denied incoming traffic from the Internet, based on its source IP address.</span></span> <span data-ttu-id="0db11-171">Felkonfigurerad ACL: er kan förhindra att inkommande SSH-trafik till slutpunkten.</span><span class="sxs-lookup"><span data-stu-id="0db11-171">Misconfigured ACLs can prevent incoming SSH traffic to the endpoint.</span></span> <span data-ttu-id="0db11-172">Kontrollera din ACL: er för att säkerställa att inkommande trafik från de offentliga IP-adresserna för proxyservern eller andra gränsservern tillåts.</span><span class="sxs-lookup"><span data-stu-id="0db11-172">Check your ACLs to ensure that incoming traffic from the public IP addresses of your proxy or other edge server is allowed.</span></span> <span data-ttu-id="0db11-173">Mer information finns i [om nätverksåtkomst åtkomstkontrollistor (ACL)](../../virtual-network/virtual-networks-acl.md).</span><span class="sxs-lookup"><span data-stu-id="0db11-173">For more information, see [About network access control lists (ACLs)](../../virtual-network/virtual-networks-acl.md).</span></span>

<span data-ttu-id="0db11-174">Ta bort den aktuella slutpunkten för att ta bort slutpunkten som orsaken till problemet, skapa en annan slutpunkt och ange SSH-namn (TCP-port 22 för offentliga och privata portnumret).</span><span class="sxs-lookup"><span data-stu-id="0db11-174">To eliminate the endpoint as a source of the problem, remove the current endpoint, create another endpoint, and specify the SSH name (TCP port 22 for the public and private port number).</span></span> <span data-ttu-id="0db11-175">Mer information finns i [konfigurera slutpunkter på en virtuell dator i Azure](../windows/classic/setup-endpoints.md?toc=%2fazure%2fvirtual-machines%2fwindows%2fclassic%2ftoc.json).</span><span class="sxs-lookup"><span data-stu-id="0db11-175">For more information, see [Set up endpoints on a virtual machine in Azure](../windows/classic/setup-endpoints.md?toc=%2fazure%2fvirtual-machines%2fwindows%2fclassic%2ftoc.json).</span></span>

<a id="nsg"></a>

## <a name="source-4-network-security-groups"></a><span data-ttu-id="0db11-176">Datakällan 4: Nätverkssäkerhetsgrupper</span><span class="sxs-lookup"><span data-stu-id="0db11-176">Source 4: Network security groups</span></span>
<span data-ttu-id="0db11-177">Nätverkssäkerhetsgrupper kan du ha mer detaljerad kontroll över tillåtna inkommande och utgående trafik.</span><span class="sxs-lookup"><span data-stu-id="0db11-177">Network security groups enable you to have more granular control of allowed inbound and outbound traffic.</span></span> <span data-ttu-id="0db11-178">Du kan skapa regler som sträcker sig över undernät och molntjänster i Azure-nätverk.</span><span class="sxs-lookup"><span data-stu-id="0db11-178">You can create rules that span subnets and cloud services in an Azure virtual network.</span></span> <span data-ttu-id="0db11-179">Kontrollera dina regler för nätverkssäkerhetsgrupper för att se till att SSH-trafik till och från Internet tillåts.</span><span class="sxs-lookup"><span data-stu-id="0db11-179">Check your network security group rules to ensure that SSH traffic to and from the Internet is allowed.</span></span>
<span data-ttu-id="0db11-180">Mer information finns i [om nätverkssäkerhetsgrupper](../../virtual-network/virtual-networks-nsg.md).</span><span class="sxs-lookup"><span data-stu-id="0db11-180">For more information, see [About network security groups](../../virtual-network/virtual-networks-nsg.md).</span></span>

<span data-ttu-id="0db11-181">Du kan också använda IP-Kontrollera för att validera NSG-konfigurationen.</span><span class="sxs-lookup"><span data-stu-id="0db11-181">You can also use IP Verify to validate the NSG configuration.</span></span> <span data-ttu-id="0db11-182">Mer information finns i [Azure nätverksövervakning översikt](https://docs.microsoft.com/en-us/azure/network-watcher/network-watcher-monitoring-overview).</span><span class="sxs-lookup"><span data-stu-id="0db11-182">For more information, see [Azure network monitoring overview](https://docs.microsoft.com/en-us/azure/network-watcher/network-watcher-monitoring-overview).</span></span> 

## <a name="source-5-linux-based-azure-virtual-machine"></a><span data-ttu-id="0db11-183">Källa 5: Linux-baserade virtuell Azure-dator</span><span class="sxs-lookup"><span data-stu-id="0db11-183">Source 5: Linux-based Azure virtual machine</span></span>
<span data-ttu-id="0db11-184">Senaste källan för möjliga problem är den virtuella Azure-datorn sig själv.</span><span class="sxs-lookup"><span data-stu-id="0db11-184">The last source of possible problems is the Azure virtual machine itself.</span></span>

![Diagram som visar Linux-baserade virtuell Azure-dator](./media/detailed-troubleshoot-ssh-connection/ssh-tshoot5.png)

<span data-ttu-id="0db11-186">Om du inte redan har gjort så, följ instruktionerna [att återställa ett lösenord eller SSH för Linux-baserade virtuella datorer](classic/reset-access.md?toc=%2fazure%2fvirtual-machines%2flinux%2fclassic%2ftoc.json).</span><span class="sxs-lookup"><span data-stu-id="0db11-186">If you haven't done so already, follow the instructions [to reset a password or SSH for Linux-based virtual machines](classic/reset-access.md?toc=%2fazure%2fvirtual-machines%2flinux%2fclassic%2ftoc.json).</span></span>

<span data-ttu-id="0db11-187">Försök ansluta igen från datorn.</span><span class="sxs-lookup"><span data-stu-id="0db11-187">Try connecting from your computer again.</span></span> <span data-ttu-id="0db11-188">Om det fortfarande inte följer några möjliga problem:</span><span class="sxs-lookup"><span data-stu-id="0db11-188">If it still fails, the following are some of the possible issues:</span></span>

* <span data-ttu-id="0db11-189">SSH-tjänsten körs inte på den virtuella måldatorn.</span><span class="sxs-lookup"><span data-stu-id="0db11-189">The SSH service is not running on the target virtual machine.</span></span>
* <span data-ttu-id="0db11-190">SSH-tjänsten lyssnar inte på TCP-port 22.</span><span class="sxs-lookup"><span data-stu-id="0db11-190">The SSH service is not listening on TCP port 22.</span></span> <span data-ttu-id="0db11-191">Att testa, installera en telnet-klienten på den lokala datorn och köra ”telnet *cloudServiceName*. cloudapp.net 22”.</span><span class="sxs-lookup"><span data-stu-id="0db11-191">To test, install a telnet client on your local computer and run "telnet *cloudServiceName*.cloudapp.net 22".</span></span> <span data-ttu-id="0db11-192">Det här steget anger om den virtuella datorn tillåter inkommande och utgående kommunikation till SSH-slutpunkten.</span><span class="sxs-lookup"><span data-stu-id="0db11-192">This step determines if the virtual machine allows inbound and outbound communication to the SSH endpoint.</span></span>
* <span data-ttu-id="0db11-193">Den lokala brandväggen på den virtuella måldatorn har regler som hindrar inkommande eller utgående SSH-trafik.</span><span class="sxs-lookup"><span data-stu-id="0db11-193">The local firewall on the target virtual machine has rules that are preventing inbound or outbound SSH traffic.</span></span>
* <span data-ttu-id="0db11-194">Intrångsidentifiering eller program som körs på Azure-dator för nätverksövervakning som hindrar SSH-anslutningar.</span><span class="sxs-lookup"><span data-stu-id="0db11-194">Intrusion detection or network monitoring software that's running on the Azure virtual machine is preventing SSH connections.</span></span>

## <a name="additional-resources"></a><span data-ttu-id="0db11-195">Ytterligare resurser</span><span class="sxs-lookup"><span data-stu-id="0db11-195">Additional resources</span></span>
<span data-ttu-id="0db11-196">Mer information om hur du felsöker programåtkomst finns [Felsök åtkomst till ett program som körs på en virtuell Azure-dator](troubleshoot-app-connection.md)</span><span class="sxs-lookup"><span data-stu-id="0db11-196">For more information about troubleshooting application access, see [Troubleshoot access to an application running on an Azure virtual machine](troubleshoot-app-connection.md)</span></span>

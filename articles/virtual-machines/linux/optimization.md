---
title: Optimera din virtuella Linux-dator i Azure | Microsoft Docs
description: "Läs tips optimering för att se till att du har lagt upp ditt Linux VM för optimala prestanda på Azure"
keywords: Linux-dator, virtuella linux ubuntu virtuell dator
services: virtual-machines-linux
documentationcenter: 
author: rickstercdn
manager: timlt
editor: tysonn
tags: azure-resource-manager
ms.assetid: 8baa30c8-d40e-41ac-93d0-74e96fe18d4c
ms.service: virtual-machines-linux
ms.workload: infrastructure-services
ms.tgt_pltfrm: vm-linux
ms.devlang: na
ms.topic: article
ms.date: 09/06/2016
ms.author: rclaus
ms.openlocfilehash: eb79d574fd4dddfb986660cc338bc8748f2082c2
ms.sourcegitcommit: 18ad9bc049589c8e44ed277f8f43dcaa483f3339
ms.translationtype: MT
ms.contentlocale: sv-SE
ms.lasthandoff: 08/29/2017
---
# <a name="optimize-your-linux-vm-on-azure"></a><span data-ttu-id="57b5a-104">Optimera din virtuella Linux-dator på Azure</span><span class="sxs-lookup"><span data-stu-id="57b5a-104">Optimize your Linux VM on Azure</span></span>
<span data-ttu-id="57b5a-105">Det är enkelt att göra från kommandoraden eller från portalen att skapa en Linux-dator (VM).</span><span class="sxs-lookup"><span data-stu-id="57b5a-105">Creating a Linux virtual machine (VM) is easy to do from the command line or from the portal.</span></span> <span data-ttu-id="57b5a-106">Den här kursen visar hur du se till att du har konfigurerat den för att optimera prestandan på Microsoft Azure-plattformen.</span><span class="sxs-lookup"><span data-stu-id="57b5a-106">This tutorial shows you how to ensure you have set it up to optimize its performance on the Microsoft Azure platform.</span></span> <span data-ttu-id="57b5a-107">Det här avsnittet använder en virtuell Ubuntu Server-dator, men du kan också skapa Linux virtuella datorer med hjälp av [egna avbildningar som mallar](create-upload-generic.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json).</span><span class="sxs-lookup"><span data-stu-id="57b5a-107">This topic uses an Ubuntu Server VM, but you can also create Linux virtual machine using [your own images as templates](create-upload-generic.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json).</span></span>  

## <a name="prerequisites"></a><span data-ttu-id="57b5a-108">Krav</span><span class="sxs-lookup"><span data-stu-id="57b5a-108">Prerequisites</span></span>
<span data-ttu-id="57b5a-109">Det här avsnittet förutsätter att du redan har ett aktivt Azure-prenumeration ([gratis utvärderingsversion registrering](https://azure.microsoft.com/pricing/free-trial/)) och redan har etablerat en virtuell dator i din Azure-prenumeration.</span><span class="sxs-lookup"><span data-stu-id="57b5a-109">This topic assumes you already have a working Azure subscription ([free trial signup](https://azure.microsoft.com/pricing/free-trial/)) and have already provisioned a VM into your Azure subscription.</span></span> <span data-ttu-id="57b5a-110">Se till att du har senast [Azure CLI 2.0](/cli/azure/install-az-cli2) installerad och inloggad på Azure-prenumerationen med [az inloggningen](/cli/azure/#login) innan du [skapa en virtuell dator](quick-create-cli.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json).</span><span class="sxs-lookup"><span data-stu-id="57b5a-110">Make sure that you have the latest [Azure CLI 2.0](/cli/azure/install-az-cli2) installed and logged in to your Azure subscription with [az login](/cli/azure/#login) before you [create a VM](quick-create-cli.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json).</span></span>

## <a name="azure-os-disk"></a><span data-ttu-id="57b5a-111">Azure OS-Disk</span><span class="sxs-lookup"><span data-stu-id="57b5a-111">Azure OS Disk</span></span>
<span data-ttu-id="57b5a-112">När du skapar en Linux VM i Azure har två diskar som är kopplade till den.</span><span class="sxs-lookup"><span data-stu-id="57b5a-112">Once you create a Linux VM in Azure, it has two disks associated with it.</span></span> <span data-ttu-id="57b5a-113">**/ dev/sda** är OS-disken **/dev/sdb** är tillfällig disken.</span><span class="sxs-lookup"><span data-stu-id="57b5a-113">**/dev/sda** is your OS disk, **/dev/sdb** is your temporary disk.</span></span>  <span data-ttu-id="57b5a-114">Använd inte den huvudsakliga OS-disken (**/dev/sda**) för något annat än operativsystemet som det är optimerad för snabb VM starttiden och ger inte bra prestanda för din arbetsbelastning.</span><span class="sxs-lookup"><span data-stu-id="57b5a-114">Do not use the main OS disk (**/dev/sda**) for anything except the operating system as it is optimized for fast VM boot time and does not provide good performance for your workloads.</span></span> <span data-ttu-id="57b5a-115">Du vill koppla en eller flera diskar till den virtuella datorn få beständiga och optimerad lagring för dina data.</span><span class="sxs-lookup"><span data-stu-id="57b5a-115">You want to attach one or more disks to your VM to get persistent and optimized storage for your data.</span></span> 

## <a name="adding-disks-for-size-and-performance-targets"></a><span data-ttu-id="57b5a-116">Lägga till diskar för mål storlek och prestanda</span><span class="sxs-lookup"><span data-stu-id="57b5a-116">Adding Disks for Size and Performance targets</span></span>
<span data-ttu-id="57b5a-117">Baserat på VM-storlek, kan du bifoga upp till 16 ytterligare diskar på en A-serien, 32 diskar på D-serien och datorn 64 diskar på G-serien - varje upp till 1 TB i storlek.</span><span class="sxs-lookup"><span data-stu-id="57b5a-117">Based on the VM size, you can attach up to 16 additional disks on an A-Series, 32 disks on a D-Series and 64 disks on a G-Series machine - each up to 1 TB in size.</span></span> <span data-ttu-id="57b5a-118">Du kan lägga till extra diskar som behövs per utrymme krav på och IOps.</span><span class="sxs-lookup"><span data-stu-id="57b5a-118">You add extra disks as needed per your space and IOps requirements.</span></span> <span data-ttu-id="57b5a-119">Varje disk har ett mål för prestanda för 500 IOps för standardlagring och upp till 5 000 IOps per disk för Premium-lagring.</span><span class="sxs-lookup"><span data-stu-id="57b5a-119">Each disk has a performance target of 500 IOps for Standard Storage and up to 5000 IOps per disk for Premium Storage.</span></span>  <span data-ttu-id="57b5a-120">Läs mer om Premium-lagring diskar [Premium-lagring: högpresterande lagring för virtuella Azure-datorer](../../storage/common/storage-premium-storage.md)</span><span class="sxs-lookup"><span data-stu-id="57b5a-120">For more information about Premium Storage disks, see [Premium Storage: High-Performance Storage for Azure VMs](../../storage/common/storage-premium-storage.md)</span></span>

<span data-ttu-id="57b5a-121">Att uppnå högsta IOps på Premium-lagring diskar där cacheinställningarna har ställts in på antingen **ReadOnly** eller **ingen**, måste du inaktivera **barriärer** vid montering filsystemet i Linux.</span><span class="sxs-lookup"><span data-stu-id="57b5a-121">To achieve the highest IOps on Premium Storage disks where their cache settings have been set to either **ReadOnly** or **None**, you must disable **barriers** while mounting the file system in Linux.</span></span> <span data-ttu-id="57b5a-122">Du behöver inte barriärer eftersom skrivningar till diskar som backas upp av Premium-lagring är beständig för dessa inställningar för cachelagring.</span><span class="sxs-lookup"><span data-stu-id="57b5a-122">You do not need barriers because the writes to Premium Storage backed disks are durable for these cache settings.</span></span>

* <span data-ttu-id="57b5a-123">Om du använder **reiserFS**, inaktivera barriärer med alternativet montera `barrier=none` (Använd för att aktivera barriärer `barrier=flush`)</span><span class="sxs-lookup"><span data-stu-id="57b5a-123">If you use **reiserFS**, disable barriers using the mount option `barrier=none` (For enabling barriers, use `barrier=flush`)</span></span>
* <span data-ttu-id="57b5a-124">Om du använder **ext3/ext4**, inaktivera barriärer med alternativet montera `barrier=0` (Använd för att aktivera barriärer `barrier=1`)</span><span class="sxs-lookup"><span data-stu-id="57b5a-124">If you use **ext3/ext4**, disable barriers using the mount option `barrier=0` (For enabling barriers, use `barrier=1`)</span></span>
* <span data-ttu-id="57b5a-125">Om du använder **XFS**, inaktivera barriärer med alternativet montera `nobarrier` (Använd alternativet för att aktivera barriärer `barrier`)</span><span class="sxs-lookup"><span data-stu-id="57b5a-125">If you use **XFS**, disable barriers using the mount option `nobarrier` (For enabling barriers, use the option `barrier`)</span></span>

## <a name="unmanaged-storage-account-considerations"></a><span data-ttu-id="57b5a-126">Ohanterad lagring överväganden för användarkonton</span><span class="sxs-lookup"><span data-stu-id="57b5a-126">Unmanaged storage account considerations</span></span>
<span data-ttu-id="57b5a-127">Standardåtgärden när du skapar en virtuell dator med Azure CLI 2.0 är att använda Azure hanterade diskar.</span><span class="sxs-lookup"><span data-stu-id="57b5a-127">The default action when you create a VM with the Azure CLI 2.0 is to use Azure Managed Disks.</span></span>  <span data-ttu-id="57b5a-128">Diskarna ska hanteras av Azure-plattformen och behöver inte alla förberedelse eller plats att lagra dem.</span><span class="sxs-lookup"><span data-stu-id="57b5a-128">These disks are handled by the Azure platform and do not require any preparation or location to store them.</span></span>  <span data-ttu-id="57b5a-129">Ohanterad diskar krävs ett lagringskonto och har vissa ytterligare prestandaöverväganden.</span><span class="sxs-lookup"><span data-stu-id="57b5a-129">Unmanaged disks require a storage account and have some additional performance considerations.</span></span>  <span data-ttu-id="57b5a-130">Mer information om hanterade diskar finns i [Översikt över Azure Managed Disks](../windows/managed-disks-overview.md).</span><span class="sxs-lookup"><span data-stu-id="57b5a-130">For more information about managed disks, see [Azure Managed Disks overview](../windows/managed-disks-overview.md).</span></span>  <span data-ttu-id="57b5a-131">I följande avsnitt beskrivs prestandaöverväganden bara när du använder ohanterade diskar.</span><span class="sxs-lookup"><span data-stu-id="57b5a-131">The following section outlines performance considerations only when you use unmanaged disks.</span></span>  <span data-ttu-id="57b5a-132">Igen, standard och rekommenderade lagringslösning ska du använda hanterade diskar.</span><span class="sxs-lookup"><span data-stu-id="57b5a-132">Again, the default and recommended storage solution is to use managed disks.</span></span>

<span data-ttu-id="57b5a-133">Om du skapar en virtuell dator med ohanterad diskar, se till att du bifoga diskar från storage-konton som finns i samma region som den virtuella datorn för att säkerställa nära och minimerar Nätverksfördröjningen.</span><span class="sxs-lookup"><span data-stu-id="57b5a-133">If you create a VM with unmanaged disks, make sure that you attach disks from storage accounts residing in the same region as your VM to ensure close proximity and minimize network latency.</span></span>  <span data-ttu-id="57b5a-134">Varje standardlagringskonto har högst 20 k IOps och kapaciteten 500 TB storlek.</span><span class="sxs-lookup"><span data-stu-id="57b5a-134">Each Standard storage account has a maximum of 20k IOps and a 500 TB size capacity.</span></span>  <span data-ttu-id="57b5a-135">Den här gränsen fungerar ungefär 40 hårt belastat diskar inklusive både operativsystemdisken och datadiskar som du skapar.</span><span class="sxs-lookup"><span data-stu-id="57b5a-135">This  limit works out to approximately 40 heavily used disks including both the OS disk and any data disks you create.</span></span> <span data-ttu-id="57b5a-136">Det finns ingen gräns för högsta IOps för Premium Storage-konton, men det finns en storleksgräns för 32 TB.</span><span class="sxs-lookup"><span data-stu-id="57b5a-136">For Premium Storage accounts, there is no Maximum IOps limit but there is a 32 TB size limit.</span></span> 

<span data-ttu-id="57b5a-137">När med hög IOps arbetsbelastningar och du har valt standardlagring för diskarna kan behöva du dela diskarna på flera lagringskonton för att kontrollera att du inte har nått 20 000 IOps-gräns för Standard Storage-konton.</span><span class="sxs-lookup"><span data-stu-id="57b5a-137">When dealing with high IOps workloads and you have chosen Standard Storage for your disks, you might need to split the disks across multiple storage accounts to make sure you have not hit the 20,000 IOps limit for Standard Storage accounts.</span></span> <span data-ttu-id="57b5a-138">Den virtuella datorn kan innehålla en blandning av diskar från över olika lagringskonton och lagringskontotyper att uppnå optimal konfigurationen.</span><span class="sxs-lookup"><span data-stu-id="57b5a-138">Your VM can contain a mix of disks from across different storage accounts and storage account types to achieve your optimal configuration.</span></span>
 

## <a name="your-vm-temporary-drive"></a><span data-ttu-id="57b5a-139">Den tillfälliga Virtuella enheten</span><span class="sxs-lookup"><span data-stu-id="57b5a-139">Your VM Temporary drive</span></span>
<span data-ttu-id="57b5a-140">Som standard när du skapar en virtuell dator Azure ger dig en OS-disk (**/dev/sda**) och en tillfällig disk (**/dev/sdb**).</span><span class="sxs-lookup"><span data-stu-id="57b5a-140">By default when you create a VM, Azure provides you with an OS disk (**/dev/sda**) and a temporary disk (**/dev/sdb**).</span></span>  <span data-ttu-id="57b5a-141">Alla ytterligare diskar som du lägger till visa upp **/dev/sdc**, **/dev/sdd**, **/dev/sde** och så vidare.</span><span class="sxs-lookup"><span data-stu-id="57b5a-141">All additional disks you add show up as **/dev/sdc**, **/dev/sdd**, **/dev/sde** and so on.</span></span> <span data-ttu-id="57b5a-142">Alla data på hårddisken tillfälliga (**/dev/sdb**) är inte beständiga och kan gå förlorad om specifika händelser som VM storleksändring Omdistributionen, eller underhåll tvingar fram en omstart av den virtuella datorn.</span><span class="sxs-lookup"><span data-stu-id="57b5a-142">All data on your temporary disk (**/dev/sdb**) is not durable, and can be lost if specific events like VM Resizing, redeployment, or maintenance forces a restart of your VM.</span></span>  <span data-ttu-id="57b5a-143">Storlek och typ av tillfälliga disken är relaterad till VM-storlek som du väljer vid tidpunkten för distribution.</span><span class="sxs-lookup"><span data-stu-id="57b5a-143">The size and type of your temporary disk is related to the VM size you chose at deployment time.</span></span> <span data-ttu-id="57b5a-144">Alla premium storlek på virtuella datorer (DS, G och DS_V2-serien) den tillfälliga enheten backas upp av en lokal SSD för ytterligare prestanda för upp till 48k IOps.</span><span class="sxs-lookup"><span data-stu-id="57b5a-144">All of the premium size VMs (DS, G, and DS_V2 series) the temporary drive are backed by a local SSD for additional performance of up to 48k IOps.</span></span> 

## <a name="linux-swap-file"></a><span data-ttu-id="57b5a-145">Växlingsfil för Linux</span><span class="sxs-lookup"><span data-stu-id="57b5a-145">Linux Swap File</span></span>
<span data-ttu-id="57b5a-146">Om din Azure VM är från en Ubuntu eller virtuell CoreOS-avbildning, kan du använda CustomData för att skicka en moln-config till molnet initiering.</span><span class="sxs-lookup"><span data-stu-id="57b5a-146">If your Azure VM is from an Ubuntu or CoreOS image, then you can use CustomData to send a cloud-config to cloud-init.</span></span> <span data-ttu-id="57b5a-147">Om du [överföra en anpassad avbildning Linux](upload-vhd.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json) som använder molnet init, du också konfigurera växlingen partitioner som använder molnet initiering.</span><span class="sxs-lookup"><span data-stu-id="57b5a-147">If you [uploaded a custom Linux image](upload-vhd.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json) that uses cloud-init, you also configure swap partitions using cloud-init.</span></span>

<span data-ttu-id="57b5a-148">På Ubuntu molnet bilder, måste du använda molnet init för att konfigurera växla partition.</span><span class="sxs-lookup"><span data-stu-id="57b5a-148">On Ubuntu Cloud Images, you must use cloud-init to configure the swap partition.</span></span> <span data-ttu-id="57b5a-149">Mer information finns i [AzureSwapPartitions](https://wiki.ubuntu.com/AzureSwapPartitions).</span><span class="sxs-lookup"><span data-stu-id="57b5a-149">For more information, see [AzureSwapPartitions](https://wiki.ubuntu.com/AzureSwapPartitions).</span></span>

<span data-ttu-id="57b5a-150">För bilder utan stöd för molnet init har VM-avbildningar som distribueras från Azure Marketplace en virtuell Linux-agenten integrerat med Operativsystemet.</span><span class="sxs-lookup"><span data-stu-id="57b5a-150">For images without cloud-init support, VM images deployed from the Azure Marketplace have a VM Linux Agent integrated with the OS.</span></span> <span data-ttu-id="57b5a-151">Den här agenten kan den virtuella datorn att interagera med olika Azure-tjänster.</span><span class="sxs-lookup"><span data-stu-id="57b5a-151">This agent allows the VM to interact with various Azure services.</span></span> <span data-ttu-id="57b5a-152">Under förutsättning att du har distribuerat en standardiserad avbildning från Azure Marketplace, måste du göra följande för att konfigurera Linux växlingsfilens inställningar på rätt sätt:</span><span class="sxs-lookup"><span data-stu-id="57b5a-152">Assuming you have deployed a standard image from the Azure Marketplace, you would need to do the following to correctly configure your Linux swap file settings:</span></span>

<span data-ttu-id="57b5a-153">Leta upp och ändra två poster i den **/etc/waagent.conf** fil.</span><span class="sxs-lookup"><span data-stu-id="57b5a-153">Locate and modify two entries in the **/etc/waagent.conf** file.</span></span> <span data-ttu-id="57b5a-154">De styr förekomsten av en dedikerad växlingsfil och storleken på växlingsfilen.</span><span class="sxs-lookup"><span data-stu-id="57b5a-154">They control the existence of a dedicated swap file and size of the swap file.</span></span> <span data-ttu-id="57b5a-155">De parametrar som du vill ändra är `ResourceDisk.EnableSwap=N` och`ResourceDisk.SwapSizeMB=0`</span><span class="sxs-lookup"><span data-stu-id="57b5a-155">The parameters you are looking to modify are `ResourceDisk.EnableSwap=N` and `ResourceDisk.SwapSizeMB=0`</span></span> 

<span data-ttu-id="57b5a-156">Ändra parametrarna för följande inställningar:</span><span class="sxs-lookup"><span data-stu-id="57b5a-156">Change the parameters to the following settings:</span></span>

* <span data-ttu-id="57b5a-157">ResourceDisk.EnableSwap=Y</span><span class="sxs-lookup"><span data-stu-id="57b5a-157">ResourceDisk.EnableSwap=Y</span></span>
* <span data-ttu-id="57b5a-158">ResourceDisk.SwapSizeMB={size i MB för att uppfylla dina behov}</span><span class="sxs-lookup"><span data-stu-id="57b5a-158">ResourceDisk.SwapSizeMB={size in MB to meet your needs}</span></span> 

<span data-ttu-id="57b5a-159">När du har gjort ändringen måste du starta om waagent eller din Linux VM för att spegla ändringarna.</span><span class="sxs-lookup"><span data-stu-id="57b5a-159">Once you have made the change, you need to restart the waagent or restart your Linux VM to reflect those changes.</span></span>  <span data-ttu-id="57b5a-160">Du vet att ändringarna som har genomförts och en växlingsfil har skapats när du använder den `free` kommando för att visa ledigt utrymme.</span><span class="sxs-lookup"><span data-stu-id="57b5a-160">You know the changes have been implemented and a swap file has been created when you use the `free` command to view free space.</span></span> <span data-ttu-id="57b5a-161">I följande exempel har en 512MB växlingsfil som skapas när du ändrar den **waagent.conf** fil:</span><span class="sxs-lookup"><span data-stu-id="57b5a-161">The following example has a 512MB swap file created as a result of modifying the **waagent.conf** file:</span></span>

```bash
azuseruser@myVM:~$ free
            total       used       free     shared    buffers     cached
Mem:       3525156     804168    2720988        408       8428     633192
-/+ buffers/cache:     162548    3362608
Swap:       524284          0     524284
```

## <a name="io-scheduling-algorithm-for-premium-storage"></a><span data-ttu-id="57b5a-162">I/o-schemaläggning algoritm för Premium-lagring</span><span class="sxs-lookup"><span data-stu-id="57b5a-162">I/O scheduling algorithm for Premium Storage</span></span>
<span data-ttu-id="57b5a-163">Med 2.6.18 Linux kernel, standard-i/o schemaläggning algoritmen har ändrats från tidsgräns till CFQ (helt verkliga queuing algoritmen).</span><span class="sxs-lookup"><span data-stu-id="57b5a-163">With the 2.6.18 Linux kernel, the default I/O scheduling algorithm was changed from Deadline to CFQ (Completely fair queuing algorithm).</span></span> <span data-ttu-id="57b5a-164">Det finns försumbar skillnad i prestanda skillnader mellan CFQ och tidsgräns för direktåtkomst i/o-mönster.</span><span class="sxs-lookup"><span data-stu-id="57b5a-164">For random access I/O patterns, there is negligible difference in performance differences between CFQ and Deadline.</span></span>  <span data-ttu-id="57b5a-165">För SSD-baserad diskar där mönstret för disk-i/o är huvudsakligen sekventiella, uppnå växla tillbaka till algoritmen NOOP eller tidsgräns högre i/o-prestanda.</span><span class="sxs-lookup"><span data-stu-id="57b5a-165">For SSD-based disks where the disk I/O pattern is predominantly sequential, switching back to the NOOP or Deadline algorithm can achieve better I/O performance.</span></span>

### <a name="view-the-current-io-scheduler"></a><span data-ttu-id="57b5a-166">Visa aktuella i/o-Schemaläggaren</span><span class="sxs-lookup"><span data-stu-id="57b5a-166">View the current I/O scheduler</span></span>
<span data-ttu-id="57b5a-167">Ange följande kommando:</span><span class="sxs-lookup"><span data-stu-id="57b5a-167">Use the following command:</span></span>  

```bash
cat /sys/block/sda/queue/scheduler
```

<span data-ttu-id="57b5a-168">Du kan se följande utdata som visar aktuella Schemaläggaren.</span><span class="sxs-lookup"><span data-stu-id="57b5a-168">You see following output, which indicates the current scheduler.</span></span>  

```bash
noop [deadline] cfq
```

### <a name="change-the-current-device-devsda-of-io-scheduling-algorithm"></a><span data-ttu-id="57b5a-169">Ändra den aktuella enheten (/ dev/sda) av i/o schemaläggning algoritm</span><span class="sxs-lookup"><span data-stu-id="57b5a-169">Change the current device (/dev/sda) of I/O scheduling algorithm</span></span>
<span data-ttu-id="57b5a-170">Använd följande kommandon:</span><span class="sxs-lookup"><span data-stu-id="57b5a-170">Use the following commands:</span></span>  

```bash
azureuser@myVM:~$ sudo su -
root@myVM:~# echo "noop" >/sys/block/sda/queue/scheduler
root@myVM:~# sed -i 's/GRUB_CMDLINE_LINUX=""/GRUB_CMDLINE_LINUX_DEFAULT="quiet splash elevator=noop"/g' /etc/default/grub
root@myVM:~# update-grub
```

> [!NOTE]
> <span data-ttu-id="57b5a-171">Tillämpa den här inställningen för **/dev/sda** fristående är inte användbar.</span><span class="sxs-lookup"><span data-stu-id="57b5a-171">Applying this setting for **/dev/sda** alone is not useful.</span></span> <span data-ttu-id="57b5a-172">Ange på alla datadiskar där sekventiella i/o dominerar i/o-mönster.</span><span class="sxs-lookup"><span data-stu-id="57b5a-172">Set on all data disks where sequential I/O dominates the I/O pattern.</span></span>  

<span data-ttu-id="57b5a-173">Du bör se följande utdata som visar att **grub.cfg** har återskapats och som standard Schemaläggaren har uppdaterats till NOOP.</span><span class="sxs-lookup"><span data-stu-id="57b5a-173">You should see the following output, indicating that **grub.cfg** has been rebuilt successfully and that the default scheduler has been updated to NOOP.</span></span>  

```bash
Generating grub configuration file ...
Found linux image: /boot/vmlinuz-3.13.0-34-generic
Found initrd image: /boot/initrd.img-3.13.0-34-generic
Found linux image: /boot/vmlinuz-3.13.0-32-generic
Found initrd image: /boot/initrd.img-3.13.0-32-generic
Found memtest86+ image: /memtest86+.elf
Found memtest86+ image: /memtest86+.bin
done
```

<span data-ttu-id="57b5a-174">Redhat distribution-familjen behöver du bara följande kommando:</span><span class="sxs-lookup"><span data-stu-id="57b5a-174">For the Redhat distribution family, you only need the following command:</span></span>   

```bash
echo 'echo noop >/sys/block/sda/queue/scheduler' >> /etc/rc.local
```

## <a name="using-software-raid-to-achieve-higher-iops"></a><span data-ttu-id="57b5a-175">Med hjälp av programvara RAID för att uppnå högre I / Ops</span><span class="sxs-lookup"><span data-stu-id="57b5a-175">Using Software RAID to achieve higher I/Ops</span></span>
<span data-ttu-id="57b5a-176">Om dina arbetsbelastningar kräver fler IOps än vad en enda disk, måste du använda en programvara RAID-konfiguration av flera diskar.</span><span class="sxs-lookup"><span data-stu-id="57b5a-176">If your workloads require more IOps than a single disk can provide, you need to use a software RAID configuration of multiple disks.</span></span> <span data-ttu-id="57b5a-177">Eftersom Azure utför redan disk återhämtning i lokala fabric-lagret, kan du få högsta möjliga prestanda från en konfiguration med RAID-0 striping.</span><span class="sxs-lookup"><span data-stu-id="57b5a-177">Because Azure already performs disk resiliency at the local fabric layer, you achieve the highest level of performance from a RAID-0 striping configuration.</span></span>  <span data-ttu-id="57b5a-178">Etablera och skapa diskar i Azure-miljön och koppla dem till din Linux VM före partitionering, formatering och montera enheterna.</span><span class="sxs-lookup"><span data-stu-id="57b5a-178">Provision and create disks in the Azure environment and attach them to your Linux VM before partitioning, formatting and mounting the drives.</span></span>  <span data-ttu-id="57b5a-179">Mer information om hur du konfigurerar en RAID konfiguration av programvara på din Linux VM i azure finns i den  **[konfigurera programvara RAID på Linux](configure-raid.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json)**  dokumentet.</span><span class="sxs-lookup"><span data-stu-id="57b5a-179">More details on configuring a software RAID setup on your Linux VM in azure can be found in the **[Configuring Software RAID on Linux](configure-raid.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json)** document.</span></span>

## <a name="next-steps"></a><span data-ttu-id="57b5a-180">Nästa steg</span><span class="sxs-lookup"><span data-stu-id="57b5a-180">Next Steps</span></span>
<span data-ttu-id="57b5a-181">Kom ihåg att du behöver utföra tester före och efter varje ändring av åtgärdens påverkan ändringen har med alla optimering diskussioner.</span><span class="sxs-lookup"><span data-stu-id="57b5a-181">Remember, as with all optimization discussions, you need to perform tests before and after each change to measure the impact the change has.</span></span>  <span data-ttu-id="57b5a-182">Optimering är en steg-för-steg-process som har olika resultat på olika datorer i din miljö.</span><span class="sxs-lookup"><span data-stu-id="57b5a-182">Optimization is a step by step process that has different results across different machines in your environment.</span></span>  <span data-ttu-id="57b5a-183">Vad fungerar för en konfiguration fungerar inte för andra.</span><span class="sxs-lookup"><span data-stu-id="57b5a-183">What works for one configuration may not work for others.</span></span>

<span data-ttu-id="57b5a-184">Vissa länkar till ytterligare resurser:</span><span class="sxs-lookup"><span data-stu-id="57b5a-184">Some useful links to additional resources:</span></span> 

* [<span data-ttu-id="57b5a-185">Premium Storage: Lagring med höga prestanda för Azure Virtual Machines-arbetsbelastningar</span><span class="sxs-lookup"><span data-stu-id="57b5a-185">Premium Storage: High-Performance Storage for Azure Virtual Machine Workloads</span></span>](../../storage/common/storage-premium-storage.md)
* [<span data-ttu-id="57b5a-186">Användarhandboken för Azure Linux-Agent</span><span class="sxs-lookup"><span data-stu-id="57b5a-186">Azure Linux Agent User Guide</span></span>](../windows/agent-user-guide.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json)
* [<span data-ttu-id="57b5a-187">Optimera MySQL prestanda på virtuella Azure Linux-datorer</span><span class="sxs-lookup"><span data-stu-id="57b5a-187">Optimizing MySQL Performance on Azure Linux VMs</span></span>](classic/optimize-mysql.md?toc=%2fazure%2fvirtual-machines%2flinux%2fclassic%2ftoc.json)
* [<span data-ttu-id="57b5a-188">Konfigurera programvarubaserad RAID på Linux</span><span class="sxs-lookup"><span data-stu-id="57b5a-188">Configure Software RAID on Linux</span></span>](configure-raid.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json)


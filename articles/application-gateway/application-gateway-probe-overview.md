---
title: "Översikt över övervakning för Azure Programgateway aaaHealth | Microsoft Docs"
description: "Lär dig mer om hello övervakningsfunktionerna i Azure Programgateway"
services: application-gateway
documentationcenter: na
author: georgewallace
manager: timlt
editor: 
tags: azure-resource-manager
ms.assetid: 7eeba328-bb2d-4d3e-bdac-7552e7900b7f
ms.service: application-gateway
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 12/14/2016
ms.author: gwallace
ms.openlocfilehash: 5091d80394a354ff849ce7ccee8cc9d2fd0456db
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: sv-SE
ms.lasthandoff: 10/06/2017
---
# <a name="application-gateway-health-monitoring-overview"></a><span data-ttu-id="5e393-103">Gateway hälsa övervakning Programöversikt</span><span class="sxs-lookup"><span data-stu-id="5e393-103">Application Gateway health monitoring overview</span></span>

<span data-ttu-id="5e393-104">Azure Application Gateway som standard övervakar hello hälsotillståndet för alla resurser i dess backend-pool och tar automatiskt bort alla resurser som bedöms som dåligt hello poolen.</span><span class="sxs-lookup"><span data-stu-id="5e393-104">Azure Application Gateway by default monitors hello health of all resources in its back-end pool and automatically removes any resource considered unhealthy from hello pool.</span></span> <span data-ttu-id="5e393-105">Programgateway fortsätter toomonitor hello ohälsosamt instanser och lägger till dem tillbaka toohello felfri backend-poolen när de blir tillgängliga och svara toohealth-avsökningar.</span><span class="sxs-lookup"><span data-stu-id="5e393-105">Application Gateway continues toomonitor hello unhealthy instances and adds them back toohello healthy back-end pool once they become available and respond toohealth probes.</span></span> <span data-ttu-id="5e393-106">Programgateway skickar hello hälsoavsökningar med hello samma port som har definierats i hello backend-HTTP-inställningar.</span><span class="sxs-lookup"><span data-stu-id="5e393-106">Application gateway sends hello health probes with hello same port that is defined in hello back-end HTTP settings.</span></span> <span data-ttu-id="5e393-107">Den här konfigurationen garanterar att hello avsökningen provar hello samma port som kunder kan använda tooconnect toohello backend.</span><span class="sxs-lookup"><span data-stu-id="5e393-107">This configuration ensures that hello probe is testing hello same port that customers would be using tooconnect toohello backend.</span></span>

![exempel på gateway avsökning][1]

<span data-ttu-id="5e393-109">I tillägg toousing standard avsökningen hälsoövervakning, kan du också anpassa hello hälsa avsökningen toosuit programmets krav.</span><span class="sxs-lookup"><span data-stu-id="5e393-109">In addition toousing default health probe monitoring, you can also customize hello health probe toosuit your application's requirements.</span></span> <span data-ttu-id="5e393-110">I den här artikeln omfattar både standard- och anpassade hälsoavsökningar.</span><span class="sxs-lookup"><span data-stu-id="5e393-110">In this article, both default and custom health probes are covered.</span></span>

> [!NOTE]
> <span data-ttu-id="5e393-111">Om det finns en NSG på Application Gateway-undernät, bör portintervall 65503 65534 öppnas i hello Programgateway undernät för inkommande trafik.</span><span class="sxs-lookup"><span data-stu-id="5e393-111">If there is an NSG on Application Gateway subnet, port ranges 65503-65534 should be opened on hello Application Gateway subnet for Inbound traffic.</span></span> <span data-ttu-id="5e393-112">Dessa portar är obligatoriska för hello backend hälsa API toowork.</span><span class="sxs-lookup"><span data-stu-id="5e393-112">These ports are required for hello backend health API toowork.</span></span>

## <a name="default-health-probe"></a><span data-ttu-id="5e393-113">Standard hälsoavsökningen</span><span class="sxs-lookup"><span data-stu-id="5e393-113">Default health probe</span></span>

<span data-ttu-id="5e393-114">En Programgateway konfigureras automatiskt en standard hälsoavsökningen när du inte konfigurera eventuella anpassade avsökningen konfiguration.</span><span class="sxs-lookup"><span data-stu-id="5e393-114">An application gateway automatically configures a default health probe when you don't set up any custom probe configuration.</span></span> <span data-ttu-id="5e393-115">hello övervakning beteende fungerar genom att göra en HTTP-begäran toohello IP-adresser konfigureras för hello backend-adresspool.</span><span class="sxs-lookup"><span data-stu-id="5e393-115">hello monitoring behavior works by making an HTTP request toohello IP addresses configured for hello back-end pool.</span></span> <span data-ttu-id="5e393-116">Om hello serverdelens http-inställningar som är konfigurerade för HTTPS, för avsökningar som standard använder HTTPS som korrekt tootest hälsotillstånd hello serverdelar hello avsökning.</span><span class="sxs-lookup"><span data-stu-id="5e393-116">For default probes if hello backend http settings are configured for HTTPS, hello probe uses HTTPS as well tootest health of hello backends.</span></span>

<span data-ttu-id="5e393-117">Exempel: du konfigurerar programmet gateway toouse backend-servrar A, B och C tooreceive HTTP nätverkstrafiken på port 80.</span><span class="sxs-lookup"><span data-stu-id="5e393-117">For example: You configure your application gateway toouse back-end servers A, B, and C tooreceive HTTP network traffic on port 80.</span></span> <span data-ttu-id="5e393-118">hello standard hälsoövervakning testar hello tre servrar med 30 sekunders mellanrum felfri HTTP-svar.</span><span class="sxs-lookup"><span data-stu-id="5e393-118">hello default health monitoring tests hello three servers every 30 seconds for a healthy HTTP response.</span></span> <span data-ttu-id="5e393-119">En felfri HTTP-svar har en [statuskod](https://msdn.microsoft.com/library/aa287675.aspx) mellan 200 och 399.</span><span class="sxs-lookup"><span data-stu-id="5e393-119">A healthy HTTP response has a [status code](https://msdn.microsoft.com/library/aa287675.aspx) between 200 and 399.</span></span>

<span data-ttu-id="5e393-120">Om hello standard avsökningen kontrollen misslyckas Server A hello Programgateway tas den bort från dess backend-adresspool och nätverkstrafik slutar flöda toothis server.</span><span class="sxs-lookup"><span data-stu-id="5e393-120">If hello default probe check fails for server A, hello application gateway removes it from its back-end pool, and network traffic stops flowing toothis server.</span></span> <span data-ttu-id="5e393-121">hello standard avsökningen kvarstår toocheck för servern en var 30: e sekund.</span><span class="sxs-lookup"><span data-stu-id="5e393-121">hello default probe still continues toocheck for server A every 30 seconds.</span></span> <span data-ttu-id="5e393-122">När servern A svarar har tooone begäran från en standard hälsoavsökningen, läggs den tillbaka som felfri toohello backend-poolen och trafiken börjar flöda toohello server igen.</span><span class="sxs-lookup"><span data-stu-id="5e393-122">When server A responds successfully tooone request from a default health probe, it is added back as healthy toohello back-end pool, and traffic starts flowing toohello server again.</span></span>

### <a name="default-health-probe-settings"></a><span data-ttu-id="5e393-123">Standardinställningarna hälsa avsökning</span><span class="sxs-lookup"><span data-stu-id="5e393-123">Default health probe settings</span></span>

| <span data-ttu-id="5e393-124">Avsökningen egenskapen</span><span class="sxs-lookup"><span data-stu-id="5e393-124">Probe property</span></span> | <span data-ttu-id="5e393-125">Värde</span><span class="sxs-lookup"><span data-stu-id="5e393-125">Value</span></span> | <span data-ttu-id="5e393-126">Beskrivning</span><span class="sxs-lookup"><span data-stu-id="5e393-126">Description</span></span> |
| --- | --- | --- |
| <span data-ttu-id="5e393-127">URL för webbavsökning</span><span class="sxs-lookup"><span data-stu-id="5e393-127">Probe URL</span></span> |<span data-ttu-id="5e393-128">http://127.0.0.1:\<port\>/</span><span class="sxs-lookup"><span data-stu-id="5e393-128">http://127.0.0.1:\<port\>/</span></span> |<span data-ttu-id="5e393-129">URL-sökväg</span><span class="sxs-lookup"><span data-stu-id="5e393-129">URL path</span></span> |
| <span data-ttu-id="5e393-130">intervall</span><span class="sxs-lookup"><span data-stu-id="5e393-130">Interval</span></span> |<span data-ttu-id="5e393-131">30</span><span class="sxs-lookup"><span data-stu-id="5e393-131">30</span></span> |<span data-ttu-id="5e393-132">Avsökningsintervall i sekunder</span><span class="sxs-lookup"><span data-stu-id="5e393-132">Probe interval in seconds</span></span> |
| <span data-ttu-id="5e393-133">Timeout</span><span class="sxs-lookup"><span data-stu-id="5e393-133">Time-out</span></span> |<span data-ttu-id="5e393-134">30</span><span class="sxs-lookup"><span data-stu-id="5e393-134">30</span></span> |<span data-ttu-id="5e393-135">Avsökningen tidsgräns i sekunder</span><span class="sxs-lookup"><span data-stu-id="5e393-135">Probe time-out in seconds</span></span> |
| <span data-ttu-id="5e393-136">Tröskelvärde för ohälsosamt värde</span><span class="sxs-lookup"><span data-stu-id="5e393-136">Unhealthy threshold</span></span> |<span data-ttu-id="5e393-137">3</span><span class="sxs-lookup"><span data-stu-id="5e393-137">3</span></span> |<span data-ttu-id="5e393-138">Avsökning för antal nya försök.</span><span class="sxs-lookup"><span data-stu-id="5e393-138">Probe retry count.</span></span> <span data-ttu-id="5e393-139">hello backend-server markeras när hello efterföljande avsökningen Felberäkning når hello tröskelvärde för ohälsosamt värde.</span><span class="sxs-lookup"><span data-stu-id="5e393-139">hello back-end server is marked down after hello consecutive probe failure count reaches hello unhealthy threshold.</span></span> |

> [!NOTE]
> <span data-ttu-id="5e393-140">hello port är hello samma port som hello backend-HTTP-inställningar.</span><span class="sxs-lookup"><span data-stu-id="5e393-140">hello port is hello same port as hello back-end HTTP settings.</span></span>

<span data-ttu-id="5e393-141">hello standard avsökning kontrollerar endast http://127.0.0.1:\<port\> toodetermine hälsostatus.</span><span class="sxs-lookup"><span data-stu-id="5e393-141">hello default probe looks only at http://127.0.0.1:\<port\> toodetermine health status.</span></span> <span data-ttu-id="5e393-142">Om du behöver tooconfigure hello hälsa toogo tooa anpassad URL för webbavsökning eller ändra andra inställningar måste du använda anpassade avsökningar enligt beskrivningen i hello följande steg:</span><span class="sxs-lookup"><span data-stu-id="5e393-142">If you need tooconfigure hello health probe toogo tooa custom URL or modify any other settings, you must use custom probes as described in hello following steps:</span></span>

## <a name="custom-health-probe"></a><span data-ttu-id="5e393-143">Anpassade hälsoavsökningen</span><span class="sxs-lookup"><span data-stu-id="5e393-143">Custom health probe</span></span>

<span data-ttu-id="5e393-144">Anpassade avsökningar Tillåt toohave en mer detaljerad kontroll över hello hälsoövervakning.</span><span class="sxs-lookup"><span data-stu-id="5e393-144">Custom probes allow you toohave a more granular control over hello health monitoring.</span></span> <span data-ttu-id="5e393-145">När du använder anpassade avsökningar, kan du konfigurera hello avsökningsintervall hello URL och sökvägen tootest och hur många misslyckade svar tooaccept innan du markerar hello backend-pool-instans som ohälsosamt.</span><span class="sxs-lookup"><span data-stu-id="5e393-145">When using custom probes, you can configure hello probe interval, hello URL and path tootest, and how many failed responses tooaccept before marking hello back-end pool instance as unhealthy.</span></span>

### <a name="custom-health-probe-settings"></a><span data-ttu-id="5e393-146">Inställningar för anpassade hälsotillstånd avsökning</span><span class="sxs-lookup"><span data-stu-id="5e393-146">Custom health probe settings</span></span>

<span data-ttu-id="5e393-147">hello innehåller följande tabell definitioner för hello egenskaperna för en anpassad hälsoavsökningen.</span><span class="sxs-lookup"><span data-stu-id="5e393-147">hello following table provides definitions for hello properties of a custom health probe.</span></span>

| <span data-ttu-id="5e393-148">Avsökningen egenskapen</span><span class="sxs-lookup"><span data-stu-id="5e393-148">Probe property</span></span> | <span data-ttu-id="5e393-149">Beskrivning</span><span class="sxs-lookup"><span data-stu-id="5e393-149">Description</span></span> |
| --- | --- |
| <span data-ttu-id="5e393-150">Namn</span><span class="sxs-lookup"><span data-stu-id="5e393-150">Name</span></span> |<span data-ttu-id="5e393-151">Namnet på hello avsökning.</span><span class="sxs-lookup"><span data-stu-id="5e393-151">Name of hello probe.</span></span> <span data-ttu-id="5e393-152">Det här namnet är används toorefer toohello avsökning i backend-HTTP-inställningar.</span><span class="sxs-lookup"><span data-stu-id="5e393-152">This name is used toorefer toohello probe in back-end HTTP settings.</span></span> |
| <span data-ttu-id="5e393-153">Protokoll</span><span class="sxs-lookup"><span data-stu-id="5e393-153">Protocol</span></span> |<span data-ttu-id="5e393-154">Protokoll som används toosend hello avsökning.</span><span class="sxs-lookup"><span data-stu-id="5e393-154">Protocol used toosend hello probe.</span></span> <span data-ttu-id="5e393-155">hello avsökningen använder hello-protokollet som definieras i hello backend-HTTP-inställningar</span><span class="sxs-lookup"><span data-stu-id="5e393-155">hello probe uses hello protocol defined in hello back-end HTTP settings</span></span> |
| <span data-ttu-id="5e393-156">Värd</span><span class="sxs-lookup"><span data-stu-id="5e393-156">Host</span></span> |<span data-ttu-id="5e393-157">Värden namnet toosend hello avsökning.</span><span class="sxs-lookup"><span data-stu-id="5e393-157">Host name toosend hello probe.</span></span> <span data-ttu-id="5e393-158">Gäller endast när flera platser har konfigurerats på Application Gateway, Använd annars ”127.0.0.1”.</span><span class="sxs-lookup"><span data-stu-id="5e393-158">Applicable only when multi-site is configured on Application Gateway, otherwise use '127.0.0.1'.</span></span> <span data-ttu-id="5e393-159">Det här värdet skiljer sig från den virtuella datorns värdnamn.</span><span class="sxs-lookup"><span data-stu-id="5e393-159">This value is different from VM host name.</span></span> |
| <span data-ttu-id="5e393-160">Sökväg</span><span class="sxs-lookup"><span data-stu-id="5e393-160">Path</span></span> |<span data-ttu-id="5e393-161">Relativ sökväg hello avsökning.</span><span class="sxs-lookup"><span data-stu-id="5e393-161">Relative path of hello probe.</span></span> <span data-ttu-id="5e393-162">hello giltig sökväg börjar från '/'.</span><span class="sxs-lookup"><span data-stu-id="5e393-162">hello valid path starts from '/'.</span></span> |
| <span data-ttu-id="5e393-163">intervall</span><span class="sxs-lookup"><span data-stu-id="5e393-163">Interval</span></span> |<span data-ttu-id="5e393-164">Avsökning intervall i sekunder.</span><span class="sxs-lookup"><span data-stu-id="5e393-164">Probe interval in seconds.</span></span> <span data-ttu-id="5e393-165">Det här värdet är hello tidsintervallet mellan två på varandra följande avsökningar.</span><span class="sxs-lookup"><span data-stu-id="5e393-165">This value is hello time interval between two consecutive probes.</span></span> |
| <span data-ttu-id="5e393-166">Timeout</span><span class="sxs-lookup"><span data-stu-id="5e393-166">Time-out</span></span> |<span data-ttu-id="5e393-167">Avsökning tidsgräns i sekunder.</span><span class="sxs-lookup"><span data-stu-id="5e393-167">Probe time-out in seconds.</span></span> <span data-ttu-id="5e393-168">Om ett giltigt svar inte emot inom denna tidsgräns, markeras hello avsökningen som misslyckad.</span><span class="sxs-lookup"><span data-stu-id="5e393-168">If a valid response is not received within this time-out period, hello probe is marked as failed.</span></span>  |
| <span data-ttu-id="5e393-169">Tröskelvärde för ohälsosamt värde</span><span class="sxs-lookup"><span data-stu-id="5e393-169">Unhealthy threshold</span></span> |<span data-ttu-id="5e393-170">Avsökning för antal nya försök.</span><span class="sxs-lookup"><span data-stu-id="5e393-170">Probe retry count.</span></span> <span data-ttu-id="5e393-171">hello backend-server markeras när hello efterföljande avsökningen Felberäkning når hello tröskelvärde för ohälsosamt värde.</span><span class="sxs-lookup"><span data-stu-id="5e393-171">hello back-end server is marked down after hello consecutive probe failure count reaches hello unhealthy threshold.</span></span> |

> [!IMPORTANT]
> <span data-ttu-id="5e393-172">Om Application Gateway har konfigurerats för en viss plats, som standard hello värden ska namn anges som 127.0.0.1, såvida inte annat konfigurerade i anpassade avsökning.</span><span class="sxs-lookup"><span data-stu-id="5e393-172">If Application Gateway is configured for a single site, by default hello Host name should be specified as '127.0.0.1', unless otherwise configured in custom probe.</span></span>
> <span data-ttu-id="5e393-173">För referens skickas en anpassad avsökningsåtgärd för\<protokollet\>://\<värden\>:\<port\>\<sökvägen\>.</span><span class="sxs-lookup"><span data-stu-id="5e393-173">For reference a custom probe is sent too\<protocol\>://\<host\>:\<port\>\<path\>.</span></span> <span data-ttu-id="5e393-174">hello port används blir hello samma port som definierats i hello backend-HTTP-inställningar.</span><span class="sxs-lookup"><span data-stu-id="5e393-174">hello port used will be hello same port as defined in hello back-end HTTP settings.</span></span>

## <a name="next-steps"></a><span data-ttu-id="5e393-175">Nästa steg</span><span class="sxs-lookup"><span data-stu-id="5e393-175">Next steps</span></span>
<span data-ttu-id="5e393-176">När du lära dig mer om övervakning av hälsotillstånd för Programgateway, kan du konfigurera en [anpassade hälsoavsökningen](application-gateway-create-probe-portal.md) i hello Azure-portalen eller en [anpassade hälsoavsökningen](application-gateway-create-probe-ps.md) med PowerShell och hello Azure Resource Manager distributionsmodell.</span><span class="sxs-lookup"><span data-stu-id="5e393-176">After learning about Application Gateway health monitoring, you can configure a [custom health probe](application-gateway-create-probe-portal.md) in hello Azure portal or a [custom health probe](application-gateway-create-probe-ps.md) using PowerShell and hello Azure Resource Manager deployment model.</span></span>

[1]: ./media/application-gateway-probe-overview/appgatewayprobe.png

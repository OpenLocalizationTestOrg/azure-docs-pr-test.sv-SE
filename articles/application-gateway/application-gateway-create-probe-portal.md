---
title: "aaaCreate en anpassad avsökning - Azure Application Gateway - Azure-portalen | Microsoft Docs"
description: "Lär dig hur toocreate en anpassad avsökning för Programgateway med hello-portalen"
services: application-gateway
documentationcenter: na
author: georgewallace
manager: timlt
editor: 
tags: azure-resource-manager
ms.assetid: 33fd5564-43a7-4c54-a9ec-b1235f661f97
ms.service: application-gateway
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 04/26/2017
ms.author: gwallace
ms.openlocfilehash: 9e9309045ef33ba1010868783949b4fde31619ec
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: sv-SE
ms.lasthandoff: 10/06/2017
---
# <a name="create-a-custom-probe-for-application-gateway-by-using-hello-portal"></a><span data-ttu-id="984bc-103">Skapa en anpassad avsökningsåtgärd för Programgateway med hello-portalen</span><span class="sxs-lookup"><span data-stu-id="984bc-103">Create a custom probe for Application Gateway by using hello portal</span></span>

> [!div class="op_single_selector"]
> * [<span data-ttu-id="984bc-104">Azure Portal</span><span class="sxs-lookup"><span data-stu-id="984bc-104">Azure portal</span></span>](application-gateway-create-probe-portal.md)
> * [<span data-ttu-id="984bc-105">PowerShell och Azure Resource Manager</span><span class="sxs-lookup"><span data-stu-id="984bc-105">Azure Resource Manager PowerShell</span></span>](application-gateway-create-probe-ps.md)
> * [<span data-ttu-id="984bc-106">PowerShell och den klassiska Azure-portalen</span><span class="sxs-lookup"><span data-stu-id="984bc-106">Azure Classic PowerShell</span></span>](application-gateway-create-probe-classic-ps.md)

<span data-ttu-id="984bc-107">Lägg till en anpassad avsökningsåtgärd tooan befintliga Programgateway via hello Azure-portalen i den här artikeln.</span><span class="sxs-lookup"><span data-stu-id="984bc-107">In this article, you add a custom probe tooan existing application gateway through hello Azure portal.</span></span> <span data-ttu-id="984bc-108">Anpassade avsökningar är användbara för program som har ett visst hälsotillstånd Kontrollera sidan eller för program som inte tillhandahåller ett lyckat svar på hello standardwebbprogrammet.</span><span class="sxs-lookup"><span data-stu-id="984bc-108">Custom probes are useful for applications that have a specific health check page or for applications that do not provide a successful response on hello default web application.</span></span>

## <a name="before-you-begin"></a><span data-ttu-id="984bc-109">Innan du börjar</span><span class="sxs-lookup"><span data-stu-id="984bc-109">Before you begin</span></span>

<span data-ttu-id="984bc-110">Om du inte redan har en Programgateway finns [skapa en Programgateway](application-gateway-create-gateway-portal.md) toocreate toowork en program-gatewayen med.</span><span class="sxs-lookup"><span data-stu-id="984bc-110">If you do not already have an application gateway, visit [Create an Application Gateway](application-gateway-create-gateway-portal.md) toocreate an application gateway toowork with.</span></span>

## <span data-ttu-id="984bc-111"><a name="createprobe"></a>Skapa hello avsökningen</span><span class="sxs-lookup"><span data-stu-id="984bc-111"><a name="createprobe"></a>Create hello probe</span></span>

<span data-ttu-id="984bc-112">Avsökningar konfigureras i en tvåstegsprocess hello-portalen.</span><span class="sxs-lookup"><span data-stu-id="984bc-112">Probes are configured in a two-step process through hello portal.</span></span> <span data-ttu-id="984bc-113">hello första steget är toocreate hello avsökning.</span><span class="sxs-lookup"><span data-stu-id="984bc-113">hello first step is toocreate hello probe.</span></span> <span data-ttu-id="984bc-114">Lägg till hello avsökningen toohello serverdelens http-inställningar för Programgateway hello i hello andra steget.</span><span class="sxs-lookup"><span data-stu-id="984bc-114">In hello second step, you add hello probe toohello backend http settings of hello application gateway.</span></span>

1. <span data-ttu-id="984bc-115">Logga in toohello [Azure-portalen](https://portal.azure.com).</span><span class="sxs-lookup"><span data-stu-id="984bc-115">Log in toohello [Azure portal](https://portal.azure.com).</span></span> <span data-ttu-id="984bc-116">Om du inte redan har ett konto kan du registrera dig för en [kostnadsfri utvärderingsversion för en månad](https://azure.microsoft.com/free)</span><span class="sxs-lookup"><span data-stu-id="984bc-116">If you don't already have an account, you can sign up for a [free one-month trial](https://azure.microsoft.com/free)</span></span>

1. <span data-ttu-id="984bc-117">Klicka på alla resurser i hello Azure-portalen fönstret Favoriter.</span><span class="sxs-lookup"><span data-stu-id="984bc-117">In hello Azure portal Favorites pane, click All resources.</span></span> <span data-ttu-id="984bc-118">Klicka på hello Programgateway i hello bladet för alla resurser.</span><span class="sxs-lookup"><span data-stu-id="984bc-118">Click hello application gateway in hello All resources blade.</span></span> <span data-ttu-id="984bc-119">Om hello-prenumeration som du har valt redan har flera resurser i den, kan du ange partners.contoso.net i hello filtrera efter namn...</span><span class="sxs-lookup"><span data-stu-id="984bc-119">If hello subscription you selected already has several resources in it, you can enter partners.contoso.net in hello Filter by name…</span></span> <span data-ttu-id="984bc-120">rutan Programgateway tooeasily åtkomst hello.</span><span class="sxs-lookup"><span data-stu-id="984bc-120">box tooeasily access hello application gateway.</span></span>

1. <span data-ttu-id="984bc-121">Klicka på **avsökningar** och klicka på hello **Lägg till** knappen tooadd en avsökning.</span><span class="sxs-lookup"><span data-stu-id="984bc-121">Click **Probes** and click hello **Add** button tooadd a probe.</span></span>

  ![Lägg till avsökning blad med information som har fyllt i][1]

1. <span data-ttu-id="984bc-123">På hello **Lägg till hälsoavsökningen** bladet fylla i hello krävs information för hello avsökningen och när du är klar klickar du på **OK**.</span><span class="sxs-lookup"><span data-stu-id="984bc-123">On hello **Add health probe** blade, fill out hello required information for hello probe, and when complete click **OK**.</span></span>

  |<span data-ttu-id="984bc-124">**Inställning**</span><span class="sxs-lookup"><span data-stu-id="984bc-124">**Setting**</span></span> | <span data-ttu-id="984bc-125">**Värde**</span><span class="sxs-lookup"><span data-stu-id="984bc-125">**Value**</span></span> | <span data-ttu-id="984bc-126">**Detaljer**</span><span class="sxs-lookup"><span data-stu-id="984bc-126">**Details**</span></span>|
  |---|---|---|
  |<span data-ttu-id="984bc-127">**Namn**</span><span class="sxs-lookup"><span data-stu-id="984bc-127">**Name**</span></span>|<span data-ttu-id="984bc-128">customProbe</span><span class="sxs-lookup"><span data-stu-id="984bc-128">customProbe</span></span>|<span data-ttu-id="984bc-129">Det här värdet är ett eget namn toohello avsökningen som är tillgänglig i hello-portalen.</span><span class="sxs-lookup"><span data-stu-id="984bc-129">This value is a friendly name toohello probe that is accessible in hello portal.</span></span>|
  |<span data-ttu-id="984bc-130">**Protokoll**</span><span class="sxs-lookup"><span data-stu-id="984bc-130">**Protocol**</span></span>|<span data-ttu-id="984bc-131">HTTP eller HTTPS</span><span class="sxs-lookup"><span data-stu-id="984bc-131">HTTP or HTTPS</span></span> | <span data-ttu-id="984bc-132">hello-protokollet som hello hälsoavsökningen använder.</span><span class="sxs-lookup"><span data-stu-id="984bc-132">hello protocol that hello health probe uses.</span></span>|
  |<span data-ttu-id="984bc-133">**Värden**</span><span class="sxs-lookup"><span data-stu-id="984bc-133">**Host**</span></span>|<span data-ttu-id="984bc-134">engångsfaktorautentisering</span><span class="sxs-lookup"><span data-stu-id="984bc-134">i.e</span></span> <span data-ttu-id="984bc-135">contoso.com</span><span class="sxs-lookup"><span data-stu-id="984bc-135">contoso.com</span></span>|<span data-ttu-id="984bc-136">Det här värdet är hello värdnamnet som används för hello avsökningen.</span><span class="sxs-lookup"><span data-stu-id="984bc-136">This value is hello host name that is used for hello probe.</span></span> <span data-ttu-id="984bc-137">Gäller endast när flera platser har konfigurerats på Application Gateway, Använd annars ”127.0.0.1”.</span><span class="sxs-lookup"><span data-stu-id="984bc-137">Applicable only when multi-site is configured on Application Gateway, otherwise use '127.0.0.1'.</span></span> <span data-ttu-id="984bc-138">Det här värdet skiljer sig från hello virtuella datorns värdnamn.</span><span class="sxs-lookup"><span data-stu-id="984bc-138">This value is different from hello VM host name.</span></span>|
  |<span data-ttu-id="984bc-139">**Sökväg**</span><span class="sxs-lookup"><span data-stu-id="984bc-139">**Path**</span></span>|<span data-ttu-id="984bc-140">/ eller en annan sökväg</span><span class="sxs-lookup"><span data-stu-id="984bc-140">/ or another path</span></span>|<span data-ttu-id="984bc-141">hello resten av hello fullständiga URL: en för hello anpassade avsökningen.</span><span class="sxs-lookup"><span data-stu-id="984bc-141">hello remainder of hello full url for hello custom probe.</span></span> <span data-ttu-id="984bc-142">En giltig sökväg börjar med '/'.</span><span class="sxs-lookup"><span data-stu-id="984bc-142">A valid path starts with '/'.</span></span> <span data-ttu-id="984bc-143">Hello standardsökvägen http://contoso.com bara använda '/'</span><span class="sxs-lookup"><span data-stu-id="984bc-143">For hello default path of http://contoso.com just use '/'</span></span> |
  |<span data-ttu-id="984bc-144">**Intervall (sek)**</span><span class="sxs-lookup"><span data-stu-id="984bc-144">**Interval (secs)**</span></span>|<span data-ttu-id="984bc-145">30</span><span class="sxs-lookup"><span data-stu-id="984bc-145">30</span></span>|<span data-ttu-id="984bc-146">Hur ofta hello avsökningen körs toocheck för hälsotillstånd.</span><span class="sxs-lookup"><span data-stu-id="984bc-146">How often hello probe is run toocheck for health.</span></span> <span data-ttu-id="984bc-147">Det rekommenderas inte tooset hello kortare än 30 sekunder.</span><span class="sxs-lookup"><span data-stu-id="984bc-147">It is not recommended tooset hello lower than 30 seconds.</span></span>|
  |<span data-ttu-id="984bc-148">**Timeout (sek)**</span><span class="sxs-lookup"><span data-stu-id="984bc-148">**Timeout (secs)**</span></span>|<span data-ttu-id="984bc-149">30</span><span class="sxs-lookup"><span data-stu-id="984bc-149">30</span></span>|<span data-ttu-id="984bc-150">hello mängden tid hello avsökningen timeout. hello timeout intervall måste toobe tillräckligt högt att ett http-anrop kan göras tooensure hello backend hälsosidan är tillgänglig.</span><span class="sxs-lookup"><span data-stu-id="984bc-150">hello amount of time hello probe waits before timing out. hello timeout interval needs toobe high enough that an http call can be made tooensure hello backend health page is available.</span></span>|
  |<span data-ttu-id="984bc-151">**Tröskelvärde för ohälsosamt värde**</span><span class="sxs-lookup"><span data-stu-id="984bc-151">**Unhealthy threshold**</span></span>|<span data-ttu-id="984bc-152">3</span><span class="sxs-lookup"><span data-stu-id="984bc-152">3</span></span>|<span data-ttu-id="984bc-153">Antal misslyckade försök toobe anses vara felaktigt.</span><span class="sxs-lookup"><span data-stu-id="984bc-153">Number of failed attempts toobe considered unhealthy.</span></span> <span data-ttu-id="984bc-154">Ett tröskelvärde 0 innebär att om en hälsokontroll misslyckas hello backend-bestäms ohälsosamt omedelbart.</span><span class="sxs-lookup"><span data-stu-id="984bc-154">A threshold of 0 means that if a health check fails hello back-end is determined unhealthy immediately.</span></span>|

  > [!IMPORTANT]
  > <span data-ttu-id="984bc-155">hello värdnamn är inte hello samma som servernamnet på.</span><span class="sxs-lookup"><span data-stu-id="984bc-155">hello host name is not hello same as server name.</span></span> <span data-ttu-id="984bc-156">Det här värdet är hello namn hello virtuell värd som kör på hello-programserver.</span><span class="sxs-lookup"><span data-stu-id="984bc-156">This value is hello name of hello virtual host running on hello application server.</span></span> <span data-ttu-id="984bc-157">hello avsökningen skickas toohttp: / /(host name):(port from httpsetting)/urlPath</span><span class="sxs-lookup"><span data-stu-id="984bc-157">hello probe is sent toohttp://(host name):(port from httpsetting)/urlPath</span></span>

## <a name="add-probe-toohello-gateway"></a><span data-ttu-id="984bc-158">Lägga till avsökning toohello gateway</span><span class="sxs-lookup"><span data-stu-id="984bc-158">Add probe toohello gateway</span></span>

<span data-ttu-id="984bc-159">Nu hello avsökning har skapats, är det tid tooadd den toohello gateway.</span><span class="sxs-lookup"><span data-stu-id="984bc-159">Now that hello probe has been created, it is time tooadd it toohello gateway.</span></span> <span data-ttu-id="984bc-160">Avsökningen inställningar anges på hello serverdelens http-inställningar för Programgateway hello.</span><span class="sxs-lookup"><span data-stu-id="984bc-160">Probe settings are set on hello backend http settings of hello application gateway.</span></span>

1. <span data-ttu-id="984bc-161">Klicka på **HTTP-inställningar** toobring in hello configuration bladet Klicka på hello Programgateway hello aktuella serverdelens http-inställningar som anges i hello-fönstret.</span><span class="sxs-lookup"><span data-stu-id="984bc-161">Click **HTTP settings** on hello application gateway, toobring up hello configuration blade click hello current backend http settings listed in hello window.</span></span>

  ![fönster för HTTPS-inställningar][2]

1. <span data-ttu-id="984bc-163">På hello **appGatewayBackEndHttpSettings** inställningsbladet, kontrollera hello **Använd anpassad avsökningsåtgärd** kryssrutan och välj hello-avsökningen som skapats i hello [skapa hello avsökningen](#createprobe) avsnitt på hello **anpassad avsökningen** nedrullningsbara...</span><span class="sxs-lookup"><span data-stu-id="984bc-163">On hello **appGatewayBackEndHttpSettings** settings blade, check hello **Use custom probe** checkbox and choose hello probe created in hello [Create hello probe](#createprobe) section on hello **Custom probe** drop-down..</span></span>
<span data-ttu-id="984bc-164">När du är klar klickar du på **spara** och hello inställningar tillämpas.</span><span class="sxs-lookup"><span data-stu-id="984bc-164">When complete, click **Save** and hello settings are applied.</span></span>

<span data-ttu-id="984bc-165">hello standard avsökning kontrollerar hello åtkomst toohello standardwebbprogrammet.</span><span class="sxs-lookup"><span data-stu-id="984bc-165">hello default probe checks hello default access toohello web application.</span></span> <span data-ttu-id="984bc-166">Nu när du har skapat en anpassad avsökning använder hello Programgateway hello anpassad sökväg som definierats toomonitor hälsa för hello backend-servrar.</span><span class="sxs-lookup"><span data-stu-id="984bc-166">Now that a custom probe has been created, hello application gateway uses hello custom path defined toomonitor health for hello backend servers.</span></span> <span data-ttu-id="984bc-167">Hello Programgateway kontrollerar baserat på hello kriterier som har definierats, hello sökväg som anges i hello avsökning.</span><span class="sxs-lookup"><span data-stu-id="984bc-167">Based on hello criteria that was defined, hello application gateway checks hello path specified in hello probe.</span></span> <span data-ttu-id="984bc-168">Om hello anropa toohost:Port / sökvägen inte returnerar ett HTTP 200 399 Statussvaret tas hello server bort från rotationen efter hello ohälsosamt tröskelvärdet har uppnåtts.</span><span class="sxs-lookup"><span data-stu-id="984bc-168">If hello call toohost:Port/path does not return an HTTP 200-399 status response, hello server is taken out of rotation after hello unhealthy threshold is reached.</span></span> <span data-ttu-id="984bc-169">Avsökning av fortsätter på hello ohälsosamt instans toodetermine när den blir felfri igen.</span><span class="sxs-lookup"><span data-stu-id="984bc-169">Probing continues on hello unhealthy instance toodetermine when it becomes healthy again.</span></span> <span data-ttu-id="984bc-170">När hello instans läggs tillbaka toohealthy serverpoolen, trafiken börjar flöda tooit igen och avsöknings toohello instans fortsätter vid angivna intervall som användaren som vanligt.</span><span class="sxs-lookup"><span data-stu-id="984bc-170">Once hello instance is added back toohealthy server pool, traffic begins flowing tooit again and probing toohello instance continues at user specified interval as normal.</span></span>

## <a name="next-steps"></a><span data-ttu-id="984bc-171">Nästa steg</span><span class="sxs-lookup"><span data-stu-id="984bc-171">Next steps</span></span>

<span data-ttu-id="984bc-172">hur tooconfigure SSL-avlastning med Azure Application Gateway, se toolearn [Konfigurera SSL-avlastning](application-gateway-ssl-portal.md)</span><span class="sxs-lookup"><span data-stu-id="984bc-172">toolearn how tooconfigure SSL Offloading with Azure Application Gateway, see [Configure SSL Offload](application-gateway-ssl-portal.md)</span></span>

[1]: ./media/application-gateway-create-probe-portal/figure1.png
[2]: ./media/application-gateway-create-probe-portal/figure2.png


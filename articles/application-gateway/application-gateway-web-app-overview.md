---
title: "Översikt över serverdelar för flera klientorganisationer med Azure Application Gateway | Microsoft Docs"
description: "Den här sidan beskriver hur du kan använda serverdelar för flera klientorganisationer med Application Gateway."
documentationcenter: na
services: application-gateway
author: georgewallace
manager: timlt
editor: 
ms.service: application-gateway
ms.devlang: na
ms.topic: hero-article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 07/26/2017
ms.author: gwallace
ms.openlocfilehash: d944904db5b0bf176b214249ad59611e2b794ae0
ms.sourcegitcommit: 18ad9bc049589c8e44ed277f8f43dcaa483f3339
ms.translationtype: MT
ms.contentlocale: sv-SE
ms.lasthandoff: 08/29/2017
---
# <a name="application-gateway-support-for-multi-tenant-back-ends"></a><span data-ttu-id="0afbb-103">Stöd för serverdelar för flera klientorganisationer i Application Gateway</span><span class="sxs-lookup"><span data-stu-id="0afbb-103">Application Gateway support for multi-tenant back ends</span></span>

<span data-ttu-id="0afbb-104">Azure Application Gateway stöder skalningsuppsättningar för virtuella datorer, nätverksgränssnitt, offentliga och privata IP-adresser och fullständigt kvalificerade domännamn (FQDN) som en del av dess serverdelspooler.</span><span class="sxs-lookup"><span data-stu-id="0afbb-104">Azure Application Gateway supports virtual machine scale sets, network interfaces, public/private IP, or fully qualified domain name (FQDN) as part of its back end pools.</span></span> <span data-ttu-id="0afbb-105">Som standard ändrar inte Application Gateway den inkommande HTTP-rubriken från klienten. Rubriken skickas oförändrad till servern.</span><span class="sxs-lookup"><span data-stu-id="0afbb-105">By default, application gateway does not change the incoming HTTP host header from the client and sends the header unaltered to the back end.</span></span> <span data-ttu-id="0afbb-106">Det finns många tjänster, t.ex. [Azure Web Apps](../app-service-web/app-service-web-overview.md) och [API Management](../api-management/api-management-key-concepts.md), som per definition stöder flera klientorganisationer och som kräver en specifik värdrubrik eller ett specifikt SNI-tillägg för att kunna matcha mot rätt slutpunkt.</span><span class="sxs-lookup"><span data-stu-id="0afbb-106">There are many services like [Azure Web Apps](../app-service-web/app-service-web-overview.md) and [API Management](../api-management/api-management-key-concepts.md) that are multi-tenant in nature and rely on a specific host header or SNI extension to resolve to the correct endpoint.</span></span> <span data-ttu-id="0afbb-107">Application Gateway stöder nu möjligheten för användare att skriva över den inkommande HTTP-värdrubriken baserat på HTTP-inställningarna på serverdelen.</span><span class="sxs-lookup"><span data-stu-id="0afbb-107">Application Gateway now supports the ability for users to overwrite the incoming HTTP host header based on the back end HTTP settings.</span></span> <span data-ttu-id="0afbb-108">Detta gör det möjligt att använda API-hantering och Azure-webbappar med serverdelar för flera klientorganisationer.</span><span class="sxs-lookup"><span data-stu-id="0afbb-108">This capability enables support for multi-tenant back ends Azure web apps and API management.</span></span> <span data-ttu-id="0afbb-109">Den här funktionen är tillgänglig för både standard-SKU och WAF-SKU.</span><span class="sxs-lookup"><span data-stu-id="0afbb-109">This capability is available for both the standard and WAF SKU.</span></span> <span data-ttu-id="0afbb-110">Stöd för serverdelar för flera klientorganisationer fungerar även med SSL-avslutning och SSL-scenarier från slutpunkt till slutpunkt.</span><span class="sxs-lookup"><span data-stu-id="0afbb-110">Multi-tenant back end support also works with SSL termination and end to end SSL scenarios.</span></span>

![Scenario för webbappar](./media/application-gateway-web-app-overview/scenario.png)

<span data-ttu-id="0afbb-112">Värdåsidosättningar kan definieras i HTTP-inställningarna och kan tillämpas på valfri serverdelspool i samband med regelgenereringen.</span><span class="sxs-lookup"><span data-stu-id="0afbb-112">The ability to specify a host override is defined at the HTTP settings and can be applied to any back end pool during rule creation.</span></span> <span data-ttu-id="0afbb-113">En värdrubrik eller ett SNI-tillägg kan åsidosättas på följande två sätt på serverdelar för flera klientorganisationer.</span><span class="sxs-lookup"><span data-stu-id="0afbb-113">Multi-tenant back ends support the following two ways of overriding host header and SNI extension.</span></span>

1. <span data-ttu-id="0afbb-114">Värdnamnet kan anges till ett fast värde i HTTP-inställningarna.</span><span class="sxs-lookup"><span data-stu-id="0afbb-114">The ability to set the host name to a fixed value in the HTTP settings.</span></span> <span data-ttu-id="0afbb-115">Med den här funktionen åsidosätts värdrubriken till detta värde för all trafik till serverdelspoolen som HTTP-inställningarna har tillämpats på.</span><span class="sxs-lookup"><span data-stu-id="0afbb-115">This capability ensures that the host header is overridden to this value for all traffic to the back end pool where the HTTP settings are applied.</span></span> <span data-ttu-id="0afbb-116">När du använder SSL för slutpunkt till slutpunkt används det åsidosatta värdnamnet i SNI-tillägget.</span><span class="sxs-lookup"><span data-stu-id="0afbb-116">When using end to end SSL, this overridden host name is used in the SNI extension.</span></span> <span data-ttu-id="0afbb-117">Den här funktionen möjliggör scenarier där en grupp med serverdelspooler förväntar sig en värdrubrik som skiljer sig från den inkommande klientvärdrubriken.</span><span class="sxs-lookup"><span data-stu-id="0afbb-117">This capability enables scenarios where a back end pool farm expects a host header that is different from the incoming customer host header.</span></span>

2. <span data-ttu-id="0afbb-118">Värdnamnet kan härledas från IP-adressen eller det fullständigt kvalificerade domännamnet (FQDN) för medlemmarna i serverdelspoolen.</span><span class="sxs-lookup"><span data-stu-id="0afbb-118">The ability to derive the host name from the IP or FQDN of the back end pool members.</span></span> <span data-ttu-id="0afbb-119">HTTP-inställningarna innehåller också ett alternativ för att hämta värdnamnet från det fullständigt kvalificerade domännamnet (FQDN) för en medlem i serverdelspoolen om det konfigurerats med alternativet för att härleda värdnamnet från en enskild medlem i serverdelspoolen.</span><span class="sxs-lookup"><span data-stu-id="0afbb-119">HTTP settings also provide an option to pick the host name from a back end pool member's FQDN if configured with the option to derive host name from an individual back end pool member.</span></span> <span data-ttu-id="0afbb-120">När SSL för slutpunkt till slutpunkt används härleds det här värdnamnet från det fullständigt kvalificerade domännamnet och används i SNI-tillägget.</span><span class="sxs-lookup"><span data-stu-id="0afbb-120">When using end to end SSL, this host name is derived from the FQDN and is used in the SNI extension.</span></span> <span data-ttu-id="0afbb-121">Den här funktionen möjliggör scenarier där en serverdelspool kan ha två eller flera PaaS-tjänster för flera klientorganisationer, t.ex. Azure Web Apps, och begärans värdrubrik för varje medlem innehåller värdnamnet som härletts från dess FQDN.</span><span class="sxs-lookup"><span data-stu-id="0afbb-121">This capability enables scenarios where a back end pool can have two or more multi-tenant PaaS services like Azure web apps and the request's host header to each member contains the host name derived from its FQDN.</span></span>

> [!NOTE]
> <span data-ttu-id="0afbb-122">I båda fallen ovan påverkar inställningarna endast livetrafikens beteende, inte beteendet vid hälsoavsökningar.</span><span class="sxs-lookup"><span data-stu-id="0afbb-122">In both of the preceding cases the settings only affect the live traffic behavior and not the health probe behavior.</span></span> <span data-ttu-id="0afbb-123">Anpassade avsökningar stöder redan möjligheten att ange en värdrubrik i avsökningskonfigurationen.</span><span class="sxs-lookup"><span data-stu-id="0afbb-123">Custom probes already support the ability to specify a host header in the probe configuration.</span></span> <span data-ttu-id="0afbb-124">Anpassade avsökningar stöder nu även möjligheten att härleda värdrubrikens beteende från de konfigurerade HTTP-inställningarna.</span><span class="sxs-lookup"><span data-stu-id="0afbb-124">Custom probes now also support the ability to derive the host header behavior from the currently configured HTTP settings.</span></span> <span data-ttu-id="0afbb-125">Den här konfigurationen kan anges med hjälp av `PickHostNameFromback endAddress`-parametern i avsökningskonfigurationen.</span><span class="sxs-lookup"><span data-stu-id="0afbb-125">This configuration can be specified by using the `PickHostNameFromback endAddress` parameter in the probe configuration.</span></span> <span data-ttu-id="0afbb-126">För att funktionen för slutpunkt till slutpunkt ska fungera måste både avsöknings- och HTTP-inställningarna ändras så att de återspeglar korrekt konfiguration.</span><span class="sxs-lookup"><span data-stu-id="0afbb-126">For end to end functionality to work, both the probe and the HTTP settings must be modified to reflect the correct configuration.</span></span>

<span data-ttu-id="0afbb-127">Med den här funktionen skapar kunderna lämplig konfiguration genom att konfigurera alternativen i HTTP-inställningarna och de anpassade avsökningarna.</span><span class="sxs-lookup"><span data-stu-id="0afbb-127">With this capability, customers specify the options in the HTTP settings and custom probes to the appropriate configuration.</span></span> <span data-ttu-id="0afbb-128">Den här inställningen kopplas sedan till en lyssnare och till en serverdelspool med hjälp av en regel.</span><span class="sxs-lookup"><span data-stu-id="0afbb-128">This setting is then tied to a listener and a back end pool by using a rule.</span></span>

## <a name="next-steps"></a><span data-ttu-id="0afbb-129">Nästa steg</span><span class="sxs-lookup"><span data-stu-id="0afbb-129">Next steps</span></span>

<span data-ttu-id="0afbb-130">Information om hur du konfigurerar en programgateway med en webbapp som en medlem i en serverdelspool finns i [Configure App Service Web Apps with Application Gateway](application-gateway-web-app-powershell.md) (Konfigurera App Service Web Apps med Application Gateway)</span><span class="sxs-lookup"><span data-stu-id="0afbb-130">Learn how to set up an application gateway with a web app as a back end pool member by visiting: [Configure App Service web apps with Application Gateway](application-gateway-web-app-powershell.md)</span></span>

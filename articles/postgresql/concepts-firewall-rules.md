---
title: "Azure-databas för PostgreSQL serverbrandväggsreglerna | Microsoft Docs"
description: "Beskriver brandväggsregler för din Azure-databas för PostgreSQL-servern."
services: postgresql
author: jasonwhowell
ms.author: jasonh
manager: jhubbard
editor: jasonwhowell
ms.service: postgresql
ms.topic: article
ms.date: 05/10/2017
ms.openlocfilehash: 1d46a4434c483c3612a9a7b4cdef718d6dc3e765
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: sv-SE
ms.lasthandoff: 10/06/2017
---
# <a name="azure-database-for-postgresql-server-firewall-rules"></a><span data-ttu-id="9ce26-103">Azure-databas för PostgreSQL serverbrandväggsreglerna</span><span class="sxs-lookup"><span data-stu-id="9ce26-103">Azure Database for PostgreSQL Server firewall rules</span></span>
<span data-ttu-id="9ce26-104">Brandväggar förhindrar alla åtkomst tooyour databasserver förrän du anger vilka datorer som har behörighet.</span><span class="sxs-lookup"><span data-stu-id="9ce26-104">Firewalls prevent all access tooyour database server until you specify which computers have permission.</span></span> <span data-ttu-id="9ce26-105">hello brandväggen beviljar åtkomst toohello server baserat på hello kommer IP-adressen för varje begäran.</span><span class="sxs-lookup"><span data-stu-id="9ce26-105">hello firewall grants access toohello server based on hello originating IP address of each request.</span></span>
<span data-ttu-id="9ce26-106">tooconfigure brandväggen, skapa brandväggsregler som anger godkända IP-adressintervall.</span><span class="sxs-lookup"><span data-stu-id="9ce26-106">tooconfigure your firewall, you create firewall rules that specify ranges of acceptable IP addresses.</span></span> <span data-ttu-id="9ce26-107">Du kan skapa brandväggsregler på servernivå hello.</span><span class="sxs-lookup"><span data-stu-id="9ce26-107">You can create firewall rules at hello server level.</span></span>

<span data-ttu-id="9ce26-108">**Regler i brandväggen:** reglerna aktivera klienter tooaccess Azure hela databasen för PostgreSQL-Server, det vill säga hello alla hello databaser inom samma logiska server.</span><span class="sxs-lookup"><span data-stu-id="9ce26-108">**Firewall rules:** These rules enable clients tooaccess your entire Azure Database for PostgreSQL Server, that is, all hello databases within hello same logical server.</span></span> <span data-ttu-id="9ce26-109">Brandväggsregler på servernivå kan konfigureras med hjälp av hello Azure-portalen eller med Azure CLI-kommandona.</span><span class="sxs-lookup"><span data-stu-id="9ce26-109">Server-level firewall rules can be configured by using hello Azure portal or using Azure CLI commands.</span></span> <span data-ttu-id="9ce26-110">toocreate servernivå brandväggsregler, måste du vara hello prenumeration ägare eller deltagare prenumeration.</span><span class="sxs-lookup"><span data-stu-id="9ce26-110">toocreate server-level firewall rules, you must be hello subscription owner or a subscription contributor.</span></span>

## <a name="firewall-overview"></a><span data-ttu-id="9ce26-111">Översikt över brandväggar</span><span class="sxs-lookup"><span data-stu-id="9ce26-111">Firewall overview</span></span>
<span data-ttu-id="9ce26-112">Alla databas åtkomst tooyour Azure-databas för PostgreSQL-servern har blockerats av hello-brandväggen som standard.</span><span class="sxs-lookup"><span data-stu-id="9ce26-112">All database access tooyour Azure Database for PostgreSQL server is blocked by hello firewall by default.</span></span> <span data-ttu-id="9ce26-113">toobegin med servern från en annan dator, behöver du toospecify en eller fler servernivå regler tooenable åtkomst tooyour brandväggsserver.</span><span class="sxs-lookup"><span data-stu-id="9ce26-113">toobegin using your server from another computer, you need toospecify one or more server-level firewall rules tooenable access tooyour server.</span></span> <span data-ttu-id="9ce26-114">Använd hello brandväggen regler toospecify vilka IP-adressintervall från hello Internet tooallow.</span><span class="sxs-lookup"><span data-stu-id="9ce26-114">Use hello firewall rules toospecify which IP address ranges from hello Internet tooallow.</span></span> <span data-ttu-id="9ce26-115">Åtkomst toohello Azure webbplats själva påverkas inte av hello brandväggsregler.</span><span class="sxs-lookup"><span data-stu-id="9ce26-115">Access toohello Azure portal website itself is not impacted by hello firewall rules.</span></span>
<span data-ttu-id="9ce26-116">Anslutningsförsök från hello Internet och Azure måste först passera genom brandväggen hello innan de kan komma åt PostgreSQL-databasen som visas i följande diagram hello:</span><span class="sxs-lookup"><span data-stu-id="9ce26-116">Connection attempts from hello Internet and Azure must first pass through hello firewall before they can reach your PostgreSQL Database, as shown in hello following diagram:</span></span>

![Exempel flödet av hur hello brandvägg fungerar](media/concepts-firewall-rules/1-firewall-concept.png)

## <a name="connecting-from-hello-internet"></a><span data-ttu-id="9ce26-118">Ansluta från hello Internet</span><span class="sxs-lookup"><span data-stu-id="9ce26-118">Connecting from hello Internet</span></span>
<span data-ttu-id="9ce26-119">Brandväggsregler på servernivå tillämpa tooall databaser på hello Azure-databas för PostgreSQL-servern.</span><span class="sxs-lookup"><span data-stu-id="9ce26-119">Server-level firewall rules apply tooall databases on hello Azure Database for PostgreSQL server.</span></span> <span data-ttu-id="9ce26-120">Om hello IP-adressen för hello-begäran är inom ett hello-intervall som anges i hello servernivå brandväggsregler, beviljas hello-anslutning.</span><span class="sxs-lookup"><span data-stu-id="9ce26-120">If hello IP address of hello request is within one of hello ranges specified in hello server-level firewall rules, hello connection is granted.</span></span>
<span data-ttu-id="9ce26-121">Om hello IP-adressen för begäran om hello inte ligger inom hello-intervall som anges i någon av hello databasnivå eller servernivå brandväggsregler, hello anslutningsbegäran misslyckas.</span><span class="sxs-lookup"><span data-stu-id="9ce26-121">If hello IP address of hello request is not within hello ranges specified in any of hello database-level or server-level firewall rules, hello connection request fails.</span></span>
<span data-ttu-id="9ce26-122">Om ditt program ansluter med JDBC-drivrutinen för PostgreSQL, kan du stöta felet försöker tooconnect när hello brandväggen blockerar hello-anslutning.</span><span class="sxs-lookup"><span data-stu-id="9ce26-122">For example, if your application connects with JDBC driver for PostgreSQL, you may encounter this error attempting tooconnect when hello firewall is blocking hello connection.</span></span>
> <span data-ttu-id="9ce26-123">java.util.concurrent.ExecutionException: java.lang.RuntimeException: org.postgresql.util.PSQLException: allvarligt: inga pg\_hba.conf post för värd ”123.45.67.890”, ”adminuser” databas ”postgresql”, SSL</span><span class="sxs-lookup"><span data-stu-id="9ce26-123">java.util.concurrent.ExecutionException: java.lang.RuntimeException: org.postgresql.util.PSQLException: FATAL: no pg\_hba.conf entry for host "123.45.67.890", user "adminuser", database "postgresql", SSL</span></span>

## <a name="programmatically-managing-firewall-rules"></a><span data-ttu-id="9ce26-124">Hantera brandväggsregler via programmering</span><span class="sxs-lookup"><span data-stu-id="9ce26-124">Programmatically managing firewall rules</span></span>
<span data-ttu-id="9ce26-125">Dessutom hanterade toohello Azure-portalen brandväggen reglerna kan vara genom programmering med Azure CLI.</span><span class="sxs-lookup"><span data-stu-id="9ce26-125">In addition toohello Azure portal, firewall rules can be managed programmatically using Azure CLI.</span></span>
<span data-ttu-id="9ce26-126">Se även [skapa och hantera Azure-databas för PostgreSQL brandväggsregler med hjälp av Azure CLI](howto-manage-firewall-using-cli.md)</span><span class="sxs-lookup"><span data-stu-id="9ce26-126">See also [Create and manage Azure Database for PostgreSQL firewall rules using Azure CLI](howto-manage-firewall-using-cli.md)</span></span>

## <a name="troubleshooting-hello-database-firewall"></a><span data-ttu-id="9ce26-127">Felsöka hello database-brandvägg</span><span class="sxs-lookup"><span data-stu-id="9ce26-127">Troubleshooting hello database firewall</span></span>
<span data-ttu-id="9ce26-128">Överväg följande punkter när åtkomst toohello Microsoft Azure-databas för PostgreSQL Server-tjänsten inte fungerar som förväntat hello:</span><span class="sxs-lookup"><span data-stu-id="9ce26-128">Consider hello following points when access toohello Microsoft Azure Database for PostgreSQL Server service does not behave as you expect:</span></span>

* <span data-ttu-id="9ce26-129">**Lista över tillåtna ändringar toohello inte har börjat gälla ännu:** kan det vara så mycket som en fem-minuters fördröjning för ändras toohello Azure-databas för PostgreSQL Server brandväggen configuration tootake effekt.</span><span class="sxs-lookup"><span data-stu-id="9ce26-129">**Changes toohello allow list have not taken effect yet:** There may be as much as a five-minute delay for changes toohello Azure Database for PostgreSQL Server firewall configuration tootake effect.</span></span>

* <span data-ttu-id="9ce26-130">**hello inloggningen har inte behörighet eller ett felaktigt lösenord användes:** om en inloggning inte har behörighet på hello Azure-databas för PostgreSQL-server eller hello-lösenord som används är felaktig, hello anslutning toohello Azure-databas för PostgreSQL-server är nekad.</span><span class="sxs-lookup"><span data-stu-id="9ce26-130">**hello login is not authorized or an incorrect password was used:** If a login does not have permissions on hello Azure Database for PostgreSQL server or hello password used is incorrect, hello connection toohello Azure Database for PostgreSQL server is denied.</span></span> <span data-ttu-id="9ce26-131">Skapa en brandväggsinställningen endast ger klienterna en möjlighet tooattempt ansluter tooyour server; varje klient måste ange autentiseringsuppgifter för hello säkerhet som behövs.</span><span class="sxs-lookup"><span data-stu-id="9ce26-131">Creating a firewall setting only provides clients with an opportunity tooattempt connecting tooyour server; each client must provide hello necessary security credentials.</span></span>

<span data-ttu-id="9ce26-132">Till exempel kan använder en JDBC-klient, hello följande fel visas.</span><span class="sxs-lookup"><span data-stu-id="9ce26-132">For example, using a JDBC client, hello following error may appear.</span></span>
> <span data-ttu-id="9ce26-133">java.util.concurrent.ExecutionException: java.lang.RuntimeException: org.postgresql.util.PSQLException: allvarligt: autentisering misslyckades för användaren ”användarnamn”</span><span class="sxs-lookup"><span data-stu-id="9ce26-133">java.util.concurrent.ExecutionException: java.lang.RuntimeException: org.postgresql.util.PSQLException: FATAL: password authentication failed for user "yourusername"</span></span>

* <span data-ttu-id="9ce26-134">**Dynamisk IP-adress:** om du har en Internetanslutning med dynamisk IP-adressering och du har problem med att få hello-brandväggen kan du försöka något av följande lösningar hello:</span><span class="sxs-lookup"><span data-stu-id="9ce26-134">**Dynamic IP address:** If you have an Internet connection with dynamic IP addressing and you are having trouble getting through hello firewall, you could try one of hello following solutions:</span></span>

* <span data-ttu-id="9ce26-135">Be din Internet Service Provider (ISP) för hello IP-adressintervall som tilldelats tooyour klientdatorer att åtkomst hello Azure-databas för PostgreSQL-Server och lägger sedan till hello IP-adressintervall som en brandväggsregel.</span><span class="sxs-lookup"><span data-stu-id="9ce26-135">Ask your Internet Service Provider (ISP) for hello IP address range assigned tooyour client computers that access hello Azure Database for PostgreSQL Server, and then add hello IP address range as a firewall rule.</span></span>

* <span data-ttu-id="9ce26-136">Hämta statiska IP-adresser i stället för dina klientdatorer och lägger sedan till hello IP-adresser som brandväggsregler.</span><span class="sxs-lookup"><span data-stu-id="9ce26-136">Get static IP addressing instead for your client computers, and then add hello IP addresses as firewall rules.</span></span>

## <a name="next-steps"></a><span data-ttu-id="9ce26-137">Nästa steg</span><span class="sxs-lookup"><span data-stu-id="9ce26-137">Next steps</span></span>
<span data-ttu-id="9ce26-138">Artiklar om hur du skapar brandväggsregler på servernivå och databasnivå finns:</span><span class="sxs-lookup"><span data-stu-id="9ce26-138">For articles on creating server-level and database-level firewall rules, see:</span></span>
* [<span data-ttu-id="9ce26-139">Skapa och hantera Azure-databas för PostgreSQL brandväggsregler med hello Azure-portalen</span><span class="sxs-lookup"><span data-stu-id="9ce26-139">Create and manage Azure Database for PostgreSQL firewall rules using hello Azure portal</span></span>](howto-manage-firewall-using-portal.md)
* [<span data-ttu-id="9ce26-140">Skapa och hantera Azure-databas för PostgreSQL brandväggsregler med hjälp av Azure CLI</span><span class="sxs-lookup"><span data-stu-id="9ce26-140">Create and manage Azure Database for PostgreSQL firewall rules using Azure CLI</span></span>](howto-manage-firewall-using-cli.md)
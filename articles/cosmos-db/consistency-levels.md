---
title: "Konsekvensnivåer i Azure Cosmos DB | Microsoft Docs"
description: "Azure Cosmos-DB har fem konsekvensnivåer för att belastningsutjämna eventuell konsekvens, tillgänglighet och svarstid kompromisser."
keywords: slutliga konsekvensen azure cosmos db, azure, Microsoft azure
services: cosmos-db
author: mimig1
manager: jhubbard
editor: cgronlun
documentationcenter: 
ms.assetid: 3fe51cfa-a889-4a4a-b320-16bf871fe74c
ms.service: cosmos-db
ms.workload: data-services
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 06/16/2017
ms.author: mimig
ms.custom: H1Hack27Feb2017
ms.openlocfilehash: a1ebec2285982c70aa9dc49950769fe18e2e2d0d
ms.sourcegitcommit: 02e69c4a9d17645633357fe3d46677c2ff22c85a
ms.translationtype: MT
ms.contentlocale: sv-SE
ms.lasthandoff: 08/03/2017
---
# <a name="tunable-data-consistency-levels-in-azure-cosmos-db"></a><span data-ttu-id="0b2f9-104">Data justerbara konsekvensnivåer i Azure Cosmos DB</span><span class="sxs-lookup"><span data-stu-id="0b2f9-104">Tunable data consistency levels in Azure Cosmos DB</span></span>
<span data-ttu-id="0b2f9-105">Azure Cosmos-DB är utformad från grunden upp med global distributionsplatsen i åtanke för varje datamodell.</span><span class="sxs-lookup"><span data-stu-id="0b2f9-105">Azure Cosmos DB is designed from the ground up with global distribution in mind for every data model.</span></span> <span data-ttu-id="0b2f9-106">Den är utformad att erbjuda förutsägbar låg latens garantier, en 99,99% tillgänglighet SLA och flera väldefinierade Avslappnad konsekvenskontroll modeller.</span><span class="sxs-lookup"><span data-stu-id="0b2f9-106">It is designed to offer predictable low latency guarantees, a 99.99% availability SLA, and multiple well-defined relaxed consistency models.</span></span> <span data-ttu-id="0b2f9-107">För närvarande Azure Cosmos DB innehåller fem konsekvensnivåer: stark, begränsat föråldrad, session, konsekvent prefix och eventuell.</span><span class="sxs-lookup"><span data-stu-id="0b2f9-107">Currently, Azure Cosmos DB provides five consistency levels: strong, bounded-staleness, session, consistent prefix, and eventual.</span></span> 

<span data-ttu-id="0b2f9-108">Förutom **starkt** och **slutliga konsekvensen** modeller ofta erbjuds av distribuerade databaser Azure Cosmos DB erbjuder tre mer noggrant kodade och operationalized konsekvenskontroll modeller och har verifierat sina användbarhet mot verkligheten användningsfall.</span><span class="sxs-lookup"><span data-stu-id="0b2f9-108">Besides **strong** and **eventual consistency** models commonly offered by distributed databases, Azure Cosmos DB offers three more carefully codified and operationalized consistency models, and has validated their usefulness against real world use cases.</span></span> <span data-ttu-id="0b2f9-109">Det här är den **avgränsas föråldrad**, **session**, och **konsekvent prefixet** konsekvensnivåer.</span><span class="sxs-lookup"><span data-stu-id="0b2f9-109">These are the **bounded staleness**, **session**, and **consistent prefix** consistency levels.</span></span> <span data-ttu-id="0b2f9-110">Gemensamt att dessa fem konsekvensnivåer du kan göra välmotiverat avvägningarna mellan konsekvens, tillgänglighet och svarstid.</span><span class="sxs-lookup"><span data-stu-id="0b2f9-110">Collectively these five consistency levels enable you to make well-reasoned trade-offs between consistency, availability, and latency.</span></span> 

## <a name="distributed-databases-and-consistency"></a><span data-ttu-id="0b2f9-111">Distribuerade databaser och konsekvenskontroll</span><span class="sxs-lookup"><span data-stu-id="0b2f9-111">Distributed databases and consistency</span></span>
<span data-ttu-id="0b2f9-112">Kommersiellt distribuerade databaser är indelade i två kategorier: databaser som inte alls erbjuder väldefinierade, beprövade konsekvensval och databaser som erbjuder två extremt programmerbara val (stark kontra eventuell konsekvens).</span><span class="sxs-lookup"><span data-stu-id="0b2f9-112">Commercial distributed databases fall into two categories: databases that do not offer well-defined, provable consistency choices at all, and databases which offer two extreme programmability choices (strong vs. eventual consistency).</span></span> 

<span data-ttu-id="0b2f9-113">Den tidigare tynger programmerare med detaljerna i sina replikeringsprotokoll och förväntar sig att de ska göra svåra avvägningar mellan konsekvens, tillgänglighet, svarstid och dataflöde.</span><span class="sxs-lookup"><span data-stu-id="0b2f9-113">The former burdens application developers with minutia of their replication protocols and expects them to make difficult tradeoffs between consistency, availability, latency, and throughput.</span></span> <span data-ttu-id="0b2f9-114">Den senare tvingar en att välja ett av två extremval.</span><span class="sxs-lookup"><span data-stu-id="0b2f9-114">The latter puts a pressure to choose one of the two extremes.</span></span> <span data-ttu-id="0b2f9-115">Trots mängden forskning och förslag på över 50 konsekvensmodeller, har den distribuerade databascommunityn inte kunna kommersialisera konsekvensnivåer utöver stark och eventuell konsekvens.</span><span class="sxs-lookup"><span data-stu-id="0b2f9-115">Despite the abundance of research and proposals for more than 50 consistency models, the distributed database community has not been able to commercialize consistency levels beyond strong and eventual consistency.</span></span> <span data-ttu-id="0b2f9-116">Cosmos DB gör att utvecklare kan välja mellan fem väldefinierade konsekvenskontroll längs konsekvenskontroll spektrumet – starkt, avgränsas föråldrad, [session](http://dl.acm.org/citation.cfm?id=383631), konsekvent prefix och eventuell.</span><span class="sxs-lookup"><span data-stu-id="0b2f9-116">Cosmos DB allows developers to choose between five well-defined consistency models along the consistency spectrum – strong, bounded staleness, [session](http://dl.acm.org/citation.cfm?id=383631), consistent prefix, and eventual.</span></span> 

![Azure Cosmos DB erbjuder flera väldefinierade (avslappnade) konsekvensmodeller att välja mellan](./media/consistency-levels/five-consistency-levels.png)

<span data-ttu-id="0b2f9-118">Följande tabell visar de specifika garantier som varje konsekvensnivå erbjuder.</span><span class="sxs-lookup"><span data-stu-id="0b2f9-118">The following table illustrates the specific guarantees each consistency level provides.</span></span>
 
<span data-ttu-id="0b2f9-119">**Konsekvensnivåer och garantier**</span><span class="sxs-lookup"><span data-stu-id="0b2f9-119">**Consistency Levels and guarantees**</span></span>

| <span data-ttu-id="0b2f9-120">Konsekvensnivå</span><span class="sxs-lookup"><span data-stu-id="0b2f9-120">Consistency Level</span></span> | <span data-ttu-id="0b2f9-121">Garantier</span><span class="sxs-lookup"><span data-stu-id="0b2f9-121">Guarantees</span></span> |
| --- | --- |
| <span data-ttu-id="0b2f9-122">Stark</span><span class="sxs-lookup"><span data-stu-id="0b2f9-122">Strong</span></span> | <span data-ttu-id="0b2f9-123">Lineariserbarhet</span><span class="sxs-lookup"><span data-stu-id="0b2f9-123">Linearizability</span></span> |
| <span data-ttu-id="0b2f9-124">Begränsad föråldring</span><span class="sxs-lookup"><span data-stu-id="0b2f9-124">Bounded Staleness</span></span> | <span data-ttu-id="0b2f9-125">Konsekvent Prefix.</span><span class="sxs-lookup"><span data-stu-id="0b2f9-125">Consistent Prefix.</span></span> <span data-ttu-id="0b2f9-126">Läsningar släpar efter skrivningar med k-prefix eller t-intervall</span><span class="sxs-lookup"><span data-stu-id="0b2f9-126">Reads lag behind writes by k prefixes or t interval</span></span> |
| <span data-ttu-id="0b2f9-127">Session</span><span class="sxs-lookup"><span data-stu-id="0b2f9-127">Session</span></span>   | <span data-ttu-id="0b2f9-128">Konsekvent Prefix.</span><span class="sxs-lookup"><span data-stu-id="0b2f9-128">Consistent Prefix.</span></span> <span data-ttu-id="0b2f9-129">Monotoniska läsningar, monotoniska skrivningar, läs-dina-skrivningar, skrivning-följer-läsning</span><span class="sxs-lookup"><span data-stu-id="0b2f9-129">Monotonic reads, monotonic writes, read-your-writes, write-follows-reads</span></span> |
| <span data-ttu-id="0b2f9-130">Konsekvent prefix</span><span class="sxs-lookup"><span data-stu-id="0b2f9-130">Consistent Prefix</span></span> | <span data-ttu-id="0b2f9-131">De uppdateringar som returneras är något prefix av alla uppdateringar, utan några mellanrum</span><span class="sxs-lookup"><span data-stu-id="0b2f9-131">Updates returned are some prefix of all the updates, with no gaps</span></span> |
| <span data-ttu-id="0b2f9-132">Eventuell</span><span class="sxs-lookup"><span data-stu-id="0b2f9-132">Eventual</span></span>  | <span data-ttu-id="0b2f9-133">Oordnade läsningar</span><span class="sxs-lookup"><span data-stu-id="0b2f9-133">Out of order reads</span></span> |

<span data-ttu-id="0b2f9-134">Du kan konfigurera standard-konsekvensnivå på ditt Cosmos DB-konto (och senare åsidosätta konsekvens för en specifik läsbegäran).</span><span class="sxs-lookup"><span data-stu-id="0b2f9-134">You can configure the default consistency level on your Cosmos DB account (and later override the consistency on a specific read request).</span></span> <span data-ttu-id="0b2f9-135">Internt, gäller konsekvens standardnivå för data i partitionsuppsättningar som kan sträcka sig över regioner.</span><span class="sxs-lookup"><span data-stu-id="0b2f9-135">Internally, the default consistency level applies to data within the partition sets which may span regions.</span></span> <span data-ttu-id="0b2f9-136">Om 73% av våra klientorganisationer använder sessionskonsekvens 20% föredrar avgränsas föråldrad.</span><span class="sxs-lookup"><span data-stu-id="0b2f9-136">About 73% of our tenants use session consistency and 20% prefer bounded staleness.</span></span> <span data-ttu-id="0b2f9-137">Vi se att cirka 3 procent av våra kunder experimentera med olika konsekvensnivåer ursprungligen innan reglera på en specifik konsekvenskontroll val för sina program.</span><span class="sxs-lookup"><span data-stu-id="0b2f9-137">We observe that approximately 3% of our customers experiment with various consistency levels initially before settling on a specific consistency choice for their application.</span></span> <span data-ttu-id="0b2f9-138">Vi kan också se att endast 2% av våra klientorganisationer åsidosätter konsekvensnivåer på grundval av per begäran.</span><span class="sxs-lookup"><span data-stu-id="0b2f9-138">We also observe that only 2% of our tenants override consistency levels on a per request basis.</span></span> 

<span data-ttu-id="0b2f9-139">Läser hanteras i sessionen, konsekvent prefix i Cosmos-DB och slutliga konsekvensen är två gånger så låg som läser med starka eller begränsad föråldringskonsekvens.</span><span class="sxs-lookup"><span data-stu-id="0b2f9-139">In Cosmos DB, reads served at session, consistent prefix and eventual consistency are twice as cheap as reads with strong or bounded staleness consistency.</span></span> <span data-ttu-id="0b2f9-140">Cosmos DB har branschledande serviceavtal för omfattande 99,99% inklusive konsekvens garanterar tillsammans med tillgänglighet, genomflöde och svarstid.</span><span class="sxs-lookup"><span data-stu-id="0b2f9-140">Cosmos DB has industry leading comprehensive 99.99% SLAs including consistency guarantees along with availability, throughput, and latency.</span></span> <span data-ttu-id="0b2f9-141">Vi använder en [linearizability layout](http://dl.acm.org/citation.cfm?id=1806634), som körs kontinuerligt i vår tjänst telemetri och öppet rapporterar eventuella överträdelser för konsekvens för dig.</span><span class="sxs-lookup"><span data-stu-id="0b2f9-141">We employ a [linearizability checker](http://dl.acm.org/citation.cfm?id=1806634), which continuously operates over our service telemetry and openly reports any consistency violations to you.</span></span> <span data-ttu-id="0b2f9-142">För begränsad föråldrad, vi övervaka och rapportera eventuella överträdelser till k och t gränser.</span><span class="sxs-lookup"><span data-stu-id="0b2f9-142">For bounded staleness, we monitor and report any violations to k and t bounds.</span></span> <span data-ttu-id="0b2f9-143">För alla fem Avslappnad konsekvensnivåer, vi även rapportera den [probabilistic avgränsas föråldrad mått](http://dl.acm.org/citation.cfm?id=2212359) direkt till dig.</span><span class="sxs-lookup"><span data-stu-id="0b2f9-143">For all five relaxed consistency levels, we also report the [probabilistic bounded staleness metric](http://dl.acm.org/citation.cfm?id=2212359) directly to you.</span></span>  

## <a name="scope-of-consistency"></a><span data-ttu-id="0b2f9-144">Omfånget för konsekvenskontroll</span><span class="sxs-lookup"><span data-stu-id="0b2f9-144">Scope of consistency</span></span>
<span data-ttu-id="0b2f9-145">Granulariteten för konsekvenskontroll är begränsad till en enskild begäran.</span><span class="sxs-lookup"><span data-stu-id="0b2f9-145">The granularity of consistency is scoped to a single user request.</span></span> <span data-ttu-id="0b2f9-146">Write-förfrågan kan motsvarar en infoga, Ersätt, upsert eller ta bort transaktionen.</span><span class="sxs-lookup"><span data-stu-id="0b2f9-146">A write request may correspond to an insert, replace, upsert, or delete transaction.</span></span> <span data-ttu-id="0b2f9-147">Precis som med skrivningar, begränsas också en Läs/fråga-transaktion till en enskild begäran.</span><span class="sxs-lookup"><span data-stu-id="0b2f9-147">As with writes, a read/query transaction is also scoped to a single user request.</span></span> <span data-ttu-id="0b2f9-148">Användaren kan behöva sidbryta via en stor resultatmängd, sträcker sig över flera partitioner, men varje läsa transaktion är begränsade till en enda sida och hanteras från inom en partition.</span><span class="sxs-lookup"><span data-stu-id="0b2f9-148">The user may be required to paginate over a large result-set, spanning multiple partitions, but each read transaction is scoped to a single page and served from within a single partition.</span></span>

## <a name="consistency-levels"></a><span data-ttu-id="0b2f9-149">Konsekvensnivåer</span><span class="sxs-lookup"><span data-stu-id="0b2f9-149">Consistency levels</span></span>
<span data-ttu-id="0b2f9-150">Du kan konfigurera en konsekvenskontroll Standardnivå på ditt konto som gäller för alla samlingar (och databaser) under Cosmos-DB-kontot.</span><span class="sxs-lookup"><span data-stu-id="0b2f9-150">You can configure a default consistency level on your database account that applies to all collections (and databases) under your Cosmos DB account.</span></span> <span data-ttu-id="0b2f9-151">Använd konsekvenskontroll Standardnivå anges på kontot som standard alla läser och frågor som utfärdats för de användardefinierade resurserna.</span><span class="sxs-lookup"><span data-stu-id="0b2f9-151">By default, all reads and queries issued against the user-defined resources use the default consistency level specified on the database account.</span></span> <span data-ttu-id="0b2f9-152">Kan du slappna av konsekvensnivå för en specifik Läs/fråga begäran med i varje API som stöds.</span><span class="sxs-lookup"><span data-stu-id="0b2f9-152">You can relax the consistency level of a specific read/query request using in each of the supported APIs.</span></span> <span data-ttu-id="0b2f9-153">Det finns fem typer av konsekvensnivåer som stöds av Azure Cosmos DB replikering protokoll som tillhandahåller en tydlig kompromiss mellan specifika konsekvens garanterar och prestanda, enligt beskrivningen i det här avsnittet.</span><span class="sxs-lookup"><span data-stu-id="0b2f9-153">There are five types of consistency levels supported by the Azure Cosmos DB replication protocol that provide a clear trade-off between specific consistency guarantees and performance, as described in this section.</span></span>

<span data-ttu-id="0b2f9-154">**Starka**:</span><span class="sxs-lookup"><span data-stu-id="0b2f9-154">**Strong**:</span></span> 

* <span data-ttu-id="0b2f9-155">Stark konsekvens erbjuder en [linearizability](https://aphyr.com/posts/313-strong-consistency-models) garantera med läsningar garanteras att returnera den senaste versionen av ett objekt.</span><span class="sxs-lookup"><span data-stu-id="0b2f9-155">Strong consistency offers a [linearizability](https://aphyr.com/posts/313-strong-consistency-models) guarantee with the reads guaranteed to return the most recent version of an item.</span></span> 
* <span data-ttu-id="0b2f9-156">Stark konsekvens garanterar att en skrivning enbart är synliga när den har bevarats varaktigt av kvorum majoritet av replikerna.</span><span class="sxs-lookup"><span data-stu-id="0b2f9-156">Strong consistency guarantees that a write is only visible after it is committed durably by the majority quorum of replicas.</span></span> <span data-ttu-id="0b2f9-157">Skrivning har antingen synkront bevarats varaktigt av både primär och kvorum av sekundärservrar eller den avbröts.</span><span class="sxs-lookup"><span data-stu-id="0b2f9-157">A write is either synchronously committed durably by both the primary and the quorum of secondaries, or it is aborted.</span></span> <span data-ttu-id="0b2f9-158">Läs bekräftas mottagandet alltid av en majoritet läsa kvorum, en klient inte kan se en ogenomförda eller partiell skrivning och alltid garanteras att läsa den senaste godkända skrivningen.</span><span class="sxs-lookup"><span data-stu-id="0b2f9-158">A read is always acknowledged by the majority read quorum, a client can never see an uncommitted or partial write and is always guaranteed to read the latest acknowledged write.</span></span> 
* <span data-ttu-id="0b2f9-159">Azure DB Cosmos-konton som är konfigurerade för att använda stark konsekvens kan inte associera mer än en Azure-region med ett konto i Azure Cosmos DB.</span><span class="sxs-lookup"><span data-stu-id="0b2f9-159">Azure Cosmos DB accounts that are configured to use strong consistency cannot associate more than one Azure region with their Azure Cosmos DB account.</span></span> 
* <span data-ttu-id="0b2f9-160">Kostnaden för en läsning (i [programbegäran](request-units.md) förbrukas) med stark konsekvens är högre än session och slutlig, men samma som avgränsas föråldrad.</span><span class="sxs-lookup"><span data-stu-id="0b2f9-160">The cost of a read operation (in terms of [request units](request-units.md) consumed) with strong consistency is higher than session and eventual, but the same as bounded staleness.</span></span>

<span data-ttu-id="0b2f9-161">**Begränsat föråldrad**:</span><span class="sxs-lookup"><span data-stu-id="0b2f9-161">**Bounded staleness**:</span></span> 

* <span data-ttu-id="0b2f9-162">Begränsat föråldrad konsekvens garanterar att läsningar kan ligga efter skrivning av högst *K* versioner eller prefix för ett objekt eller *t* tidsintervallet.</span><span class="sxs-lookup"><span data-stu-id="0b2f9-162">Bounded staleness consistency guarantees that the reads may lag behind writes by at most *K* versions or prefixes of an item or *t* time-interval.</span></span> 
* <span data-ttu-id="0b2f9-163">Därför när du väljer begränsat föråldrad, ”föråldrad” kan konfigureras på två sätt: antal versioner *K* för objektet som läsningar lag bakom skrivningar och tidsintervallet *t*</span><span class="sxs-lookup"><span data-stu-id="0b2f9-163">Therefore, when choosing bounded staleness, the "staleness" can be configured in two ways: number of versions *K* of the item by which the reads lag behind the writes, and the time interval *t*</span></span> 
* <span data-ttu-id="0b2f9-164">Begränsat föråldrad erbjudanden totala globala ordning förutom i ”föråldrad fönstret”.</span><span class="sxs-lookup"><span data-stu-id="0b2f9-164">Bounded staleness offers total global order except within the "staleness window."</span></span> <span data-ttu-id="0b2f9-165">Monotonisk skrivskyddade garantier finns inom en region både inom och utanför ”föråldrad fönstret”.</span><span class="sxs-lookup"><span data-stu-id="0b2f9-165">The monotonic read guarantees exists within a region both inside and outside the "staleness window."</span></span> 
* <span data-ttu-id="0b2f9-166">Begränsad föråldrad ger konsekvens bättre säkerhet än session eller slutliga konsekvensen.</span><span class="sxs-lookup"><span data-stu-id="0b2f9-166">Bounded staleness provides a stronger consistency guarantee than session or eventual consistency.</span></span> <span data-ttu-id="0b2f9-167">För globalt distribuerade program rekommenderar vi att du använder avgränsas föråldrad för scenarier där du vill ha stark konsekvens, utan också 99,99% tillgänglighet och låg latens.</span><span class="sxs-lookup"><span data-stu-id="0b2f9-167">For globally distributed applications, we recommend you use bounded staleness for scenarios where you would like to have strong consistency but also want 99.99% availability and low latency.</span></span> 
* <span data-ttu-id="0b2f9-168">Azure DB Cosmos-konton som har konfigurerats med begränsad föråldringskonsekvens kan associera valfritt antal Azure-regioner med sina Azure DB som Cosmos-konto.</span><span class="sxs-lookup"><span data-stu-id="0b2f9-168">Azure Cosmos DB accounts that are configured with bounded staleness consistency can associate any number of Azure regions with their Azure Cosmos DB account.</span></span> 
* <span data-ttu-id="0b2f9-169">Kostnaden för en läsning (vad gäller RUs förbrukas) är högre än sessionen och slutliga konsekvensen, men samma som stark konsekvens med begränsad föråldrad.</span><span class="sxs-lookup"><span data-stu-id="0b2f9-169">The cost of a read operation (in terms of RUs consumed) with bounded staleness is higher than session and eventual consistency, but the same as strong consistency.</span></span>

<span data-ttu-id="0b2f9-170">**Sessionen**:</span><span class="sxs-lookup"><span data-stu-id="0b2f9-170">**Session**:</span></span> 

* <span data-ttu-id="0b2f9-171">Till skillnad från de globala konsekvensfel modeller som erbjuds av stark och avgränsas föråldrad konsekvensnivåer begränsas sessionskonsekvens till en klientsession.</span><span class="sxs-lookup"><span data-stu-id="0b2f9-171">Unlike the global consistency models offered by strong and bounded staleness consistency levels, session consistency is scoped to a client session.</span></span> 
* <span data-ttu-id="0b2f9-172">Sessionskonsekvens är idealiskt för alla scenarier där en enhet eller användare sessionen ingår eftersom det garanterar monotonisk läsningar, monotonisk skrivningar och läsa garanterar att din egen skrivningar (RYW).</span><span class="sxs-lookup"><span data-stu-id="0b2f9-172">Session consistency is ideal for all scenarios where a device or user session is involved since it guarantees monotonic reads, monotonic writes, and read your own writes (RYW) guarantees.</span></span> 
* <span data-ttu-id="0b2f9-173">Sessionskonsekvens tillhandahåller förutsägbar konsekvenskontroll för en session och maximalt läsa genomströmning samtidigt som den erbjuder de lägsta fördröjningsskrivningarna och läsningar.</span><span class="sxs-lookup"><span data-stu-id="0b2f9-173">Session consistency provides predictable consistency for a session, and maximum read throughput while offering the lowest latency writes and reads.</span></span> 
* <span data-ttu-id="0b2f9-174">Azure DB Cosmos-konton som har konfigurerats med sessionskonsekvens kan associera valfritt antal Azure-regioner med sina Azure DB som Cosmos-konto.</span><span class="sxs-lookup"><span data-stu-id="0b2f9-174">Azure Cosmos DB accounts that are configured with session consistency can associate any number of Azure regions with their Azure Cosmos DB account.</span></span> 
* <span data-ttu-id="0b2f9-175">Kostnaden för en läsning (vad gäller RUs förbrukas) med session konsekvensnivå är mindre än starkt som avgränsas föråldrad, men mer än slutliga konsekvensen</span><span class="sxs-lookup"><span data-stu-id="0b2f9-175">The cost of a read operation (in terms of RUs consumed) with session consistency level is less than strong and bounded staleness, but more than eventual consistency</span></span>

<span data-ttu-id="0b2f9-176"><a id="consistent-prefix"></a>
**Konsekvent prefixet**:</span><span class="sxs-lookup"><span data-stu-id="0b2f9-176"><a id="consistent-prefix"></a>
**Consistent Prefix**:</span></span> 

* <span data-ttu-id="0b2f9-177">Konsekvent prefix garanterar att i frånvaron av ytterligare skrivningar replikerna i gruppen så småningom att Konvergera.</span><span class="sxs-lookup"><span data-stu-id="0b2f9-177">Consistent prefix guarantees that in absence of any further writes, the replicas within the group eventually converge.</span></span> 
* <span data-ttu-id="0b2f9-178">Konsekvent prefix garanterar att läsningar aldrig finns i oordning skrivningar.</span><span class="sxs-lookup"><span data-stu-id="0b2f9-178">Consistent prefix guarantees that reads never see out of order writes.</span></span> <span data-ttu-id="0b2f9-179">Om skrivningar utfördes i ordning `A, B, C`, och sedan en klient ser antingen `A`, `A,B`, eller `A,B,C`, men aldrig i oordning som `A,C` eller `B,A,C`.</span><span class="sxs-lookup"><span data-stu-id="0b2f9-179">If writes were performed in the order `A, B, C`, then a client sees either `A`, `A,B`, or `A,B,C`, but never out of order like `A,C` or `B,A,C`.</span></span>
* <span data-ttu-id="0b2f9-180">Azure DB Cosmos-konton som har konfigurerats med konsekvent prefix konsekvenskontroll kan associera valfritt antal Azure-regioner med sina Azure Cosmos DB-konto.</span><span class="sxs-lookup"><span data-stu-id="0b2f9-180">Azure Cosmos DB accounts that are configured with consistent prefix consistency can associate any number of Azure regions with their Azure Cosmos DB account.</span></span> 

<span data-ttu-id="0b2f9-181">**Eventuell**:</span><span class="sxs-lookup"><span data-stu-id="0b2f9-181">**Eventual**:</span></span> 

* <span data-ttu-id="0b2f9-182">Slutliga konsekvensen garanterar att i frånvaron av ytterligare skrivningar replikerna i gruppen så småningom att Konvergera.</span><span class="sxs-lookup"><span data-stu-id="0b2f9-182">Eventual consistency guarantees that in absence of any further writes, the replicas within the group eventually converge.</span></span> 
* <span data-ttu-id="0b2f9-183">Slutliga konsekvensen är svagaste form av konsekvenskontroll om en klient kan hämta de värden som är äldre än de som har läst.</span><span class="sxs-lookup"><span data-stu-id="0b2f9-183">Eventual consistency is the weakest form of consistency where a client may get the values that are older than the ones it had seen before.</span></span>
* <span data-ttu-id="0b2f9-184">Slutliga konsekvensen ger den svagaste läskonsekvensen, men erbjuder den lägsta fördröjningen för både läsningar och skrivningar.</span><span class="sxs-lookup"><span data-stu-id="0b2f9-184">Eventual consistency provides the weakest read consistency but offers the lowest latency for both reads and writes.</span></span>
* <span data-ttu-id="0b2f9-185">Azure DB Cosmos-konton som har konfigurerats med slutliga konsekvensen kan associera valfritt antal Azure-regioner med sina Azure DB som Cosmos-konto.</span><span class="sxs-lookup"><span data-stu-id="0b2f9-185">Azure Cosmos DB accounts that are configured with eventual consistency can associate any number of Azure regions with their Azure Cosmos DB account.</span></span> 
* <span data-ttu-id="0b2f9-186">Kostnaden för en läsning (vad gäller RUs förbrukas) med den slutliga konsekvensen nivån är den lägsta av alla Azure Cosmos DB konsekvensnivåer.</span><span class="sxs-lookup"><span data-stu-id="0b2f9-186">The cost of a read operation (in terms of RUs consumed) with the eventual consistency level is the lowest of all the Azure Cosmos DB consistency levels.</span></span>

## <a name="configuring-the-default-consistency-level"></a><span data-ttu-id="0b2f9-187">Konfigurera standardnivå för konsekvenskontroll</span><span class="sxs-lookup"><span data-stu-id="0b2f9-187">Configuring the default consistency level</span></span>
1. <span data-ttu-id="0b2f9-188">I den [Azure-portalen](https://portal.azure.com/), i Jumpbar klickar du på **Azure Cosmos DB**.</span><span class="sxs-lookup"><span data-stu-id="0b2f9-188">In the [Azure portal](https://portal.azure.com/), in the Jumpbar, click **Azure Cosmos DB**.</span></span>
2. <span data-ttu-id="0b2f9-189">I den **Azure Cosmos DB** bladet väljer databasen konto för att ändra.</span><span class="sxs-lookup"><span data-stu-id="0b2f9-189">In the **Azure Cosmos DB** blade, select the database account to modify.</span></span>
3. <span data-ttu-id="0b2f9-190">I bladet konto klickar du på **standard konsekvenskontroll**.</span><span class="sxs-lookup"><span data-stu-id="0b2f9-190">In the account blade, click **Default consistency**.</span></span>
4. <span data-ttu-id="0b2f9-191">I den **standard konsekvenskontroll** bladet välj ny konsekvensnivå och klicka på **spara**.</span><span class="sxs-lookup"><span data-stu-id="0b2f9-191">In the **Default Consistency** blade, select the new consistency level and click **Save**.</span></span>
   
    ![Skärmbild syntaxmarkering inställningsikonen och standard konsekvenskontroll post](./media/consistency-levels/database-consistency-level-1.png)

## <a name="consistency-levels-for-queries"></a><span data-ttu-id="0b2f9-193">Konsekvensnivåer för frågor</span><span class="sxs-lookup"><span data-stu-id="0b2f9-193">Consistency levels for queries</span></span>
<span data-ttu-id="0b2f9-194">Som standard för användardefinierade resurser, konsekvens nivån för frågor är samma som konsekvensnivå för läsning.</span><span class="sxs-lookup"><span data-stu-id="0b2f9-194">By default, for user-defined resources, the consistency level for queries is the same as the consistency level for reads.</span></span> <span data-ttu-id="0b2f9-195">Indexet uppdateras synkront som standard på varje infoga, Ersätt eller borttagningen av ett objekt i Cosmos-DB-behållaren.</span><span class="sxs-lookup"><span data-stu-id="0b2f9-195">By default, the index is updated synchronously on each insert, replace, or delete of an item to the Cosmos DB container.</span></span> <span data-ttu-id="0b2f9-196">Detta gör att frågorna ta hänsyn till samma konsekvensnivå som punkt läsningar.</span><span class="sxs-lookup"><span data-stu-id="0b2f9-196">This enables the queries to honor the same consistency level as that of point reads.</span></span> <span data-ttu-id="0b2f9-197">Du kan konfigurera vissa samlingar för att uppdatera deras index lazy medan Azure Cosmos DB skrivåtgärder optimerad och stöd för varaktigt volymer skrivningar, synkron index underhåll och betjänar konsekvent frågor.</span><span class="sxs-lookup"><span data-stu-id="0b2f9-197">While Azure Cosmos DB is write optimized and supports sustained volumes of writes, synchronous index maintenance and serving consistent queries, you can configure certain collections to update their index lazily.</span></span> <span data-ttu-id="0b2f9-198">Lazy indexering ytterligare ökar prestandan för skrivning och är idealisk för bulk införandet scenarier när en arbetsbelastning är främst Läs aktiverat.</span><span class="sxs-lookup"><span data-stu-id="0b2f9-198">Lazy indexing further boosts the write performance and is ideal for bulk ingestion scenarios when a workload is primarily read-heavy.</span></span>  

| <span data-ttu-id="0b2f9-199">Indexering läge</span><span class="sxs-lookup"><span data-stu-id="0b2f9-199">Indexing Mode</span></span> | <span data-ttu-id="0b2f9-200">Läser</span><span class="sxs-lookup"><span data-stu-id="0b2f9-200">Reads</span></span> | <span data-ttu-id="0b2f9-201">Frågor</span><span class="sxs-lookup"><span data-stu-id="0b2f9-201">Queries</span></span> |
| --- | --- | --- |
| <span data-ttu-id="0b2f9-202">Konsekvent (standard)</span><span class="sxs-lookup"><span data-stu-id="0b2f9-202">Consistent (default)</span></span> |<span data-ttu-id="0b2f9-203">Välj från stark, begränsat föråldrad, session, konsekvent prefix eller senare</span><span class="sxs-lookup"><span data-stu-id="0b2f9-203">Select from strong, bounded staleness, session, consistent prefix, or eventual</span></span> |<span data-ttu-id="0b2f9-204">Välj från stark, begränsat föråldrad, session eller senare</span><span class="sxs-lookup"><span data-stu-id="0b2f9-204">Select from strong, bounded staleness, session, or eventual</span></span> |
| <span data-ttu-id="0b2f9-205">Lazy</span><span class="sxs-lookup"><span data-stu-id="0b2f9-205">Lazy</span></span> |<span data-ttu-id="0b2f9-206">Välj från stark, begränsat föråldrad, session, konsekvent prefix eller senare</span><span class="sxs-lookup"><span data-stu-id="0b2f9-206">Select from strong, bounded staleness, session, consistent prefix, or eventual</span></span> |<span data-ttu-id="0b2f9-207">Eventuell</span><span class="sxs-lookup"><span data-stu-id="0b2f9-207">Eventual</span></span> |
| <span data-ttu-id="0b2f9-208">Ingen</span><span class="sxs-lookup"><span data-stu-id="0b2f9-208">None</span></span> |<span data-ttu-id="0b2f9-209">Välj från stark, begränsat föråldrad, session, konsekvent prefix eller senare</span><span class="sxs-lookup"><span data-stu-id="0b2f9-209">Select from strong, bounded staleness, session, consistent prefix, or eventual</span></span> |<span data-ttu-id="0b2f9-210">Inte tillämpligt</span><span class="sxs-lookup"><span data-stu-id="0b2f9-210">Not applicable</span></span> |

<span data-ttu-id="0b2f9-211">Med skrivskyddade förfrågningar, kan som du sänka nivån konsekvenskontroll för en specifik fråga begäran i varje API.</span><span class="sxs-lookup"><span data-stu-id="0b2f9-211">As with read requests, you can lower the consistency level of a specific query request in each API.</span></span>

## <a name="next-steps"></a><span data-ttu-id="0b2f9-212">Nästa steg</span><span class="sxs-lookup"><span data-stu-id="0b2f9-212">Next steps</span></span>
<span data-ttu-id="0b2f9-213">Om du vill göra mer läsning om konsekvensnivåer och kompromisser rekommenderar vi följande resurser:</span><span class="sxs-lookup"><span data-stu-id="0b2f9-213">If you'd like to do more reading about consistency levels and tradeoffs, we recommend the following resources:</span></span>

* <span data-ttu-id="0b2f9-214">Doug Terry.</span><span class="sxs-lookup"><span data-stu-id="0b2f9-214">Doug Terry.</span></span> <span data-ttu-id="0b2f9-215">Replikerade datakonsekvens beskrivs via baseball (video).</span><span class="sxs-lookup"><span data-stu-id="0b2f9-215">Replicated Data Consistency explained through baseball (video).</span></span>   
  [<span data-ttu-id="0b2f9-216">https://www.YouTube.com/Watch?v=gluIh8zd26I</span><span class="sxs-lookup"><span data-stu-id="0b2f9-216">https://www.youtube.com/watch?v=gluIh8zd26I</span></span>](https://www.youtube.com/watch?v=gluIh8zd26I)
* <span data-ttu-id="0b2f9-217">Doug Terry.</span><span class="sxs-lookup"><span data-stu-id="0b2f9-217">Doug Terry.</span></span> <span data-ttu-id="0b2f9-218">Replikerade datakonsekvens beskrivs via baseball.</span><span class="sxs-lookup"><span data-stu-id="0b2f9-218">Replicated Data Consistency explained through baseball.</span></span>   
  [<span data-ttu-id="0b2f9-219">http://Research.microsoft.com/pubs/157411/ConsistencyAndBaseballReport.PDF</span><span class="sxs-lookup"><span data-stu-id="0b2f9-219">http://research.microsoft.com/pubs/157411/ConsistencyAndBaseballReport.pdf</span></span>](http://research.microsoft.com/pubs/157411/ConsistencyAndBaseballReport.pdf)
* <span data-ttu-id="0b2f9-220">Doug Terry.</span><span class="sxs-lookup"><span data-stu-id="0b2f9-220">Doug Terry.</span></span> <span data-ttu-id="0b2f9-221">Sessionen garantier för svagt konsekvent replikerade Data.</span><span class="sxs-lookup"><span data-stu-id="0b2f9-221">Session Guarantees for Weakly Consistent Replicated Data.</span></span>   
  [<span data-ttu-id="0b2f9-222">http://DL.acm.org/citation.cfm?ID=383631</span><span class="sxs-lookup"><span data-stu-id="0b2f9-222">http://dl.acm.org/citation.cfm?id=383631</span></span>](http://dl.acm.org/citation.cfm?id=383631)
* <span data-ttu-id="0b2f9-223">Mikael Abadi.</span><span class="sxs-lookup"><span data-stu-id="0b2f9-223">Daniel Abadi.</span></span> <span data-ttu-id="0b2f9-224">Konsekvenskontroll kompromisser i moderna distribuerade system databasstruktur: Fästpunkten är endast en del av artikeln ”.</span><span class="sxs-lookup"><span data-stu-id="0b2f9-224">Consistency Tradeoffs in Modern Distributed Database Systems Design: CAP is only part of the story”.</span></span>   
  [<span data-ttu-id="0b2f9-225">http://Computer.org/CSDL/mags/CO/2012/02/mco2012020037-ABS.HTML</span><span class="sxs-lookup"><span data-stu-id="0b2f9-225">http://computer.org/csdl/mags/co/2012/02/mco2012020037-abs.html</span></span>](http://computer.org/csdl/mags/co/2012/02/mco2012020037-abs.html)
* <span data-ttu-id="0b2f9-226">Peter Bailis, Shivaram Venkataraman, Michael J. Franklin, Joseph m Hellerstein, med Stoica.</span><span class="sxs-lookup"><span data-stu-id="0b2f9-226">Peter Bailis, Shivaram Venkataraman, Michael J. Franklin, Joseph M. Hellerstein, Ion Stoica.</span></span> <span data-ttu-id="0b2f9-227">Probabilistic innanför föråldrad (PBS) för praktiska partiella beslutsförhet.</span><span class="sxs-lookup"><span data-stu-id="0b2f9-227">Probabilistic Bounded Staleness (PBS) for Practical Partial Quorums.</span></span>   
  [<span data-ttu-id="0b2f9-228">http://vldb.org/pvldb/vol5/p776_peterbailis_vldb2012.PDF</span><span class="sxs-lookup"><span data-stu-id="0b2f9-228">http://vldb.org/pvldb/vol5/p776_peterbailis_vldb2012.pdf</span></span>](http://vldb.org/pvldb/vol5/p776_peterbailis_vldb2012.pdf)
* <span data-ttu-id="0b2f9-229">Werner Vogels.</span><span class="sxs-lookup"><span data-stu-id="0b2f9-229">Werner Vogels.</span></span> <span data-ttu-id="0b2f9-230">Eventuell konsekvent - Revisited.</span><span class="sxs-lookup"><span data-stu-id="0b2f9-230">Eventual Consistent - Revisited.</span></span>    
  [<span data-ttu-id="0b2f9-231">http://allthingsdistributed.com/2008/12/eventually_consistent.HTML</span><span class="sxs-lookup"><span data-stu-id="0b2f9-231">http://allthingsdistributed.com/2008/12/eventually_consistent.html</span></span>](http://allthingsdistributed.com/2008/12/eventually_consistent.html)
* <span data-ttu-id="0b2f9-232">Moni Naor, Avishai ull, Load, kapacitet och tillgängligheten för kvorum system, SIAM Journal för databehandling, v.27 n.2, p.423-447, April 1998.</span><span class="sxs-lookup"><span data-stu-id="0b2f9-232">Moni Naor , Avishai Wool, The Load, Capacity, and Availability of Quorum Systems, SIAM Journal on Computing, v.27 n.2, p.423-447, April 1998.</span></span>
  [<span data-ttu-id="0b2f9-233">http://epubs.siam.org/DOI/ABS/10.1137/S0097539795281232</span><span class="sxs-lookup"><span data-stu-id="0b2f9-233">http://epubs.siam.org/doi/abs/10.1137/S0097539795281232</span></span>](http://epubs.siam.org/doi/abs/10.1137/S0097539795281232)
* <span data-ttu-id="0b2f9-234">Sebastian Burckhardt, Chris Dern, Macanal Musuvathi, Roy Tan, rad: en fullständig och automatisk linearizability bricka, förfaranden för 2010 ACM SIGPLAN konferens om programmering språk design och implementeringslösning juni 05 10 2010, Stockholmsderbyt, Ontario, Kanada [doi > 10.1145/1806596.1806634] [http://dl.acm.org/citation.cfm?id=1806634](http://dl.acm.org/citation.cfm?id=1806634)</span><span class="sxs-lookup"><span data-stu-id="0b2f9-234">Sebastian Burckhardt, Chris Dern, Macanal Musuvathi, Roy Tan, Line-up: a complete and automatic linearizability checker, Proceedings of the 2010 ACM SIGPLAN conference on Programming language design and implementation, June 05-10, 2010, Toronto, Ontario, Canada  [doi>10.1145/1806596.1806634] [http://dl.acm.org/citation.cfm?id=1806634](http://dl.acm.org/citation.cfm?id=1806634)</span></span>
* <span data-ttu-id="0b2f9-235">Peter Bailis, Shivaram Venkataraman, Michael J. Franklin, Joseph M. Hellerstein, med Stoica Probabilistically avgränsas föråldrad för praktiska partiella beslutsförhet förfaranden VLDB särskilt tillskjutet v.5 n.8, p.776-787, April 2012 [http://dl.acm.org/citation.cfm?id=2212359](http://dl.acm.org/citation.cfm?id=2212359)</span><span class="sxs-lookup"><span data-stu-id="0b2f9-235">Peter Bailis, Shivaram Venkataraman, Michael J. Franklin, Joseph M. Hellerstein , Ion Stoica, Probabilistically bounded staleness for practical partial quorums, Proceedings of the VLDB Endowment, v.5 n.8, p.776-787, April 2012 [http://dl.acm.org/citation.cfm?id=2212359](http://dl.acm.org/citation.cfm?id=2212359)</span></span>

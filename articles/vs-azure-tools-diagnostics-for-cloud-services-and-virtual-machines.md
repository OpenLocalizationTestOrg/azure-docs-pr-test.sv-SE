---
title: "aaaConfiguring diagnostik för virtuella datorer och Azure Cloud Services | Microsoft Docs"
description: "Beskriver hur tooconfigure diagnostikinformation för felsökning Azure cloude tjänster och virtuella maskiner (VMs) i Visual Studio."
services: visual-studio-online
documentationcenter: na
author: kraigb
manager: ghogen
editor: 
ms.assetid: e70cd7b4-6298-43aa-adea-6fd618414c26
ms.service: multiple
ms.devlang: dotnet
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: multiple
ms.date: 11/11/2016
ms.author: kraigb
ms.openlocfilehash: 74cdf49413d6d89a84195070dd9d817da2463373
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: sv-SE
ms.lasthandoff: 10/06/2017
---
# <a name="configuring-diagnostics-for-azure-cloud-services-and-virtual-machines"></a><span data-ttu-id="57377-103">Konfigurera diagnostik för Azure-molntjänster och virtuella datorer</span><span class="sxs-lookup"><span data-stu-id="57377-103">Configuring Diagnostics for Azure Cloud Services and Virtual Machines</span></span>
<span data-ttu-id="57377-104">När du behöver tootroubleshoot en Azure-molntjänst eller en virtuell Azure-dator kan konfigurera du Azure-diagnostik enklare med hjälp av Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="57377-104">When you need tootroubleshoot an Azure cloud service or Azure virtual machine, you can configure Azure diagnostics more easily by using Visual Studio.</span></span> <span data-ttu-id="57377-105">Azure diagnostics avbildas systemdata och loggningsdata på hello virtuella datorer och instanser för virtuella datorer som kör Molntjänsten och överför data till ett lagringskonto som du väljer.</span><span class="sxs-lookup"><span data-stu-id="57377-105">Azure diagnostics captures system data and logging data on hello virtual machines and virtual machine instances that run your cloud service and transfers that data into a storage account of your choice.</span></span> <span data-ttu-id="57377-106">Se [aktivera diagnostikloggning för web apps i Azure App Service](app-service-web/web-sites-enable-diagnostic-log.md) mer information om loggning i Azure diagnostics.</span><span class="sxs-lookup"><span data-stu-id="57377-106">See [Enable diagnostics logging for web apps in Azure App Service](app-service-web/web-sites-enable-diagnostic-log.md) for more information about diagnostics logging in Azure.</span></span>

<span data-ttu-id="57377-107">Det här avsnittet beskrivs hur du tooenable och konfigurera Azure-diagnostik i Visual Studio, både före och efter distributionen, såväl som virtuella Azure-datorer.</span><span class="sxs-lookup"><span data-stu-id="57377-107">This topic shows you how tooenable and configure Azure diagnostics in Visual Studio, both before and after deployment, as well as in Azure virtual machines.</span></span> <span data-ttu-id="57377-108">Där visas också hur tooselect hello typer av diagnostik information toocollect och hur tooview hello information när det samlas in.</span><span class="sxs-lookup"><span data-stu-id="57377-108">It also shows you how tooselect hello types of diagnostics information toocollect and how tooview hello information after it's collected.</span></span>

<span data-ttu-id="57377-109">Du kan konfigurera Azure-diagnostik i hello följande sätt:</span><span class="sxs-lookup"><span data-stu-id="57377-109">You can configure Azure Diagnostics in hello following ways:</span></span>

* <span data-ttu-id="57377-110">Du kan ändra konfigurationsinställningarna för diagnostik via hello **diagnostik Configuration** dialogrutan i Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="57377-110">You can change diagnostics configuration settings through hello **Diagnostics Configuration** dialog box in Visual Studio.</span></span> <span data-ttu-id="57377-111">hello inställningarna sparas i en fil med namnet diagnostics.wadcfgx (diagnostics.wadcfg i Azure SDK 2.4 eller tidigare).</span><span class="sxs-lookup"><span data-stu-id="57377-111">hello settings are saved in a file called diagnostics.wadcfgx (diagnostics.wadcfg in Azure SDK 2.4 or earlier).</span></span> <span data-ttu-id="57377-112">Alternativt kan du direkt ändra hello konfigurationsfilen.</span><span class="sxs-lookup"><span data-stu-id="57377-112">Alternatively, you can directly modify hello configuration file.</span></span> <span data-ttu-id="57377-113">Om du manuellt uppdatera hello filen börjar hello configuration ändringarna gälla hello nästa gång du distribuerar hello cloud service tooAzure eller kör hello tjänst i hello-emulatorn.</span><span class="sxs-lookup"><span data-stu-id="57377-113">If you manually update hello file, hello configuration changes will take effect hello next time you deploy hello cloud service tooAzure or run hello service in hello emulator.</span></span>
* <span data-ttu-id="57377-114">Använd **Cloud Explorer** eller **Server Explorer** i Visual Studio toochange hello diagnostikinställningarna för en tjänst körs i molnet eller virtuell dator.</span><span class="sxs-lookup"><span data-stu-id="57377-114">Use **Cloud Explorer** or **Server Explorer** in Visual Studio toochange hello diagnostics settings for a running cloud service or virtual machine.</span></span>

## <a name="azure-26-diagnostics-changes"></a><span data-ttu-id="57377-115">Azure 2.6 diagnostik ändringar</span><span class="sxs-lookup"><span data-stu-id="57377-115">Azure 2.6 diagnostics changes</span></span>
<span data-ttu-id="57377-116">Hello följande ändringar har gjorts för Azure SDK 2.6-projekt i Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="57377-116">For Azure SDK 2.6 projects in Visual Studio, hello following changes were made.</span></span> <span data-ttu-id="57377-117">(Ändringarna gäller även toolater versioner av Azure SDK.)</span><span class="sxs-lookup"><span data-stu-id="57377-117">(These changes also apply toolater versions of Azure SDK.)</span></span>

* <span data-ttu-id="57377-118">hello lokala emulator stöder nu diagnostik.</span><span class="sxs-lookup"><span data-stu-id="57377-118">hello local emulator now supports diagnostics.</span></span> <span data-ttu-id="57377-119">Det innebär att du kan samla in diagnostikdata och se till att programmet skapar hello rätt spår när du utvecklar och testar i Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="57377-119">This means you can collect diagnostics data and ensure your application is creating hello right traces while you're developing and testing in Visual Studio.</span></span> <span data-ttu-id="57377-120">Hej anslutningssträngen `UseDevelopmentStorage=true` aktiverar diagnostik datainsamling när du kör cloud service-projekt i Visual Studio med hjälp av hello Azure storage-emulatorn.</span><span class="sxs-lookup"><span data-stu-id="57377-120">hello connection string `UseDevelopmentStorage=true` enables diagnostics data collection while you're running your cloud service project in Visual Studio by using hello Azure storage emulator.</span></span> <span data-ttu-id="57377-121">Alla diagnostikdata samlas in i hello (utveckling lagring) storage-konto.</span><span class="sxs-lookup"><span data-stu-id="57377-121">All diagnostics data is collected in hello (Development Storage) storage account.</span></span>
* <span data-ttu-id="57377-122">hello diagnostik konto lagringsanslutningssträng (Microsoft.WindowsAzure.Plugins.Diagnostics.ConnectionString) lagras igen i hello tjänstekonfigurationsfilen (.cscfg).</span><span class="sxs-lookup"><span data-stu-id="57377-122">hello diagnostics storage account connection string (Microsoft.WindowsAzure.Plugins.Diagnostics.ConnectionString) is stored once again in hello service configuration (.cscfg) file.</span></span> <span data-ttu-id="57377-123">I Azure SDK 2.5 angavs hello diagnostiklagringskonto i hello diagnostics.wadcfgx-filen.</span><span class="sxs-lookup"><span data-stu-id="57377-123">In Azure SDK 2.5 hello diagnostics storage account was specified in hello diagnostics.wadcfgx file.</span></span>

<span data-ttu-id="57377-124">Det finns några viktiga skillnader mellan hur hello anslutningssträngen fungerade i Azure SDK 2.4 och tidigare och hur det fungerar i Azure SDK 2.6 eller senare.</span><span class="sxs-lookup"><span data-stu-id="57377-124">There are some notable differences between how hello connection string worked in Azure SDK 2.4 and earlier and how it works in Azure SDK 2.6 and later.</span></span>

* <span data-ttu-id="57377-125">I Azure SDK 2.4 och tidigare användes hello anslutningssträngen som en körning av hello diagnostik plugin-programmet tooget hello information om lagringskonto för överföring av diagnostik loggar.</span><span class="sxs-lookup"><span data-stu-id="57377-125">In Azure SDK 2.4 and earlier, hello connection string was used as a runtime by hello diagnostics plugin tooget hello storage account information for transferring diagnostics logs.</span></span>
* <span data-ttu-id="57377-126">Azure SDK 2.6 och senare, används hello diagnostik anslutningssträngen av Visual Studio tooconfigure hello diagnostik tillägg med information om hello lämpliga lagringskonto vid publicering.</span><span class="sxs-lookup"><span data-stu-id="57377-126">In Azure SDK 2.6 and later, hello diagnostics connection string is used by Visual Studio tooconfigure hello diagnostics extension with hello appropriate storage account information during publishing.</span></span> <span data-ttu-id="57377-127">hello anslutningssträngen kan du definiera olika lagringskonton för olika konfigurationer som Visual Studio ska använda när du publicerar.</span><span class="sxs-lookup"><span data-stu-id="57377-127">hello connection string lets you define different storage accounts for different service configurations that Visual Studio will use when publishing.</span></span> <span data-ttu-id="57377-128">Eftersom hello diagnostik plugin-programmet inte längre är tillgängliga (efter Azure SDK 2.5) kan inte hello .cscfg-filen ensamt aktivera hello diagnostik tillägg.</span><span class="sxs-lookup"><span data-stu-id="57377-128">However, because hello diagnostics plugin is no longer available (after Azure SDK 2.5), hello .cscfg file by itself can't enable hello Diagnostics Extension.</span></span> <span data-ttu-id="57377-129">Du har tooenable hello tillägget separat via verktyg som Visual Studio eller PowerShell.</span><span class="sxs-lookup"><span data-stu-id="57377-129">You have tooenable hello extension separately through tools such as Visual Studio or PowerShell.</span></span>
* <span data-ttu-id="57377-130">toosimplify hello konfigureringen av hello diagnostik tillägget med PowerShell, hello paketet utdata från Visual Studio innehåller också hello offentliga konfigurations-XML för hello diagnostik filnamnstillägget för varje roll.</span><span class="sxs-lookup"><span data-stu-id="57377-130">toosimplify hello process of configuring hello diagnostics extension with PowerShell, hello package output from Visual Studio also contains hello public configuration XML for hello diagnostics extension for each role.</span></span> <span data-ttu-id="57377-131">Visual Studio använder hello diagnostik toopopulate hello storage-kontoinformation om anslutningssträngar finns i hello offentliga konfiguration.</span><span class="sxs-lookup"><span data-stu-id="57377-131">Visual Studio uses hello diagnostics connection string toopopulate hello storage account information present in hello public configuration.</span></span> <span data-ttu-id="57377-132">hello offentliga config-filer skapas i hello tillägg mapp och följer hello mönster PaaSDiagnostics. &lt;RoleName >. PubConfig.xml.</span><span class="sxs-lookup"><span data-stu-id="57377-132">hello public config files are created in hello Extensions folder and follow hello pattern PaaSDiagnostics.&lt;RoleName>.PubConfig.xml.</span></span> <span data-ttu-id="57377-133">PowerShell-baserade distributioner kan använda det här mönstret toomap varje configuration tooa roll.</span><span class="sxs-lookup"><span data-stu-id="57377-133">Any PowerShell based deployments can use this pattern toomap each configuration tooa Role.</span></span>
* <span data-ttu-id="57377-134">hello anslutningssträngen i hello .cscfg-filen används också av hello [Azure-portalen](http://go.microsoft.com/fwlink/p/?LinkID=525040) tooaccess hello diagnostikdata så visas det i hello **övervakning** fliken hello anslutningssträng krävs tooconfigure hello service tooshow utförlig övervakningsdata i hello-portalen.</span><span class="sxs-lookup"><span data-stu-id="57377-134">hello connection string in hello .cscfg file is also used by hello [Azure portal](http://go.microsoft.com/fwlink/p/?LinkID=525040) tooaccess hello diagnostics data so it can appear in hello **Monitoring** tab. hello connection string is needed tooconfigure hello service tooshow verbose monitoring data in hello portal.</span></span>

## <a name="migrating-projects-tooazure-sdk-26-and-later"></a><span data-ttu-id="57377-135">Migrera projekt tooAzure SDK 2.6 och senare</span><span class="sxs-lookup"><span data-stu-id="57377-135">Migrating projects tooAzure SDK 2.6 and later</span></span>
<span data-ttu-id="57377-136">När du migrerar från Azure SDK 2,5 tooAzure SDK 2.6 eller senare, om du har en diagnostiklagringskonto som anges i hello .wadcfgx filen sedan förblir den det.</span><span class="sxs-lookup"><span data-stu-id="57377-136">When migrating from Azure SDK 2.5 tooAzure SDK 2.6 or later, if you had a diagnostics storage account specified in hello .wadcfgx file, then it will stay there.</span></span> <span data-ttu-id="57377-137">tootake nytta av hello flexibilitet för att använda olika lagringsplatser konton för olika lagringskonfigurationer, har du toomanually lägga till hello anslutning sträng tooyour projekt.</span><span class="sxs-lookup"><span data-stu-id="57377-137">tootake advantage of hello flexibility of using different storage accounts for different storage configurations, you'll have toomanually add hello connection string tooyour project.</span></span> <span data-ttu-id="57377-138">Om du migrerar ett projekt från Azure SDK 2.4 eller tidigare tooAzure SDK 2.6 hello du diagnostik anslutningssträngar bevaras.</span><span class="sxs-lookup"><span data-stu-id="57377-138">If you're migrating a project from Azure SDK 2.4 or earlier tooAzure SDK 2.6, then hello diagnostics connection strings are preserved.</span></span> <span data-ttu-id="57377-139">Observera dock hello ändringar i hur anslutningssträngar behandlas i Azure SDK 2.6 som anges i hello föregående avsnitt.</span><span class="sxs-lookup"><span data-stu-id="57377-139">However, please note hello changes in how connection strings are treated in Azure SDK 2.6 as specified in hello previous section.</span></span>

### <a name="how-visual-studio-determines-hello-diagnostics-storage-account"></a><span data-ttu-id="57377-140">Hur hello diagnostiklagringskonto avgör i Visual Studio</span><span class="sxs-lookup"><span data-stu-id="57377-140">How Visual Studio determines hello diagnostics storage account</span></span>
* <span data-ttu-id="57377-141">Om en anslutningssträng för diagnostik anges i .cscfg-filen för hello använder Visual Studio den tooconfigure hello diagnostik tillägget när du publicerar och vid generering av xml-filer för hello offentliga konfiguration under paketering.</span><span class="sxs-lookup"><span data-stu-id="57377-141">If a diagnostics connection string is specified in hello .cscfg file, Visual Studio uses it tooconfigure hello diagnostics extension when publishing, and when generating hello public configuration xml files during packaging.</span></span>
* <span data-ttu-id="57377-142">Om inga diagnostik anslutningssträngen har angetts i hello .cscfg-filen, sedan faller Visual Studio tillbaka toousing hello storage-konto som anges i hello .wadcfgx tooconfigure hello diagnostik filnamnstillägg när filen publicering och generera hello offentliga XML-konfigurationsfiler när paketera.</span><span class="sxs-lookup"><span data-stu-id="57377-142">If no diagnostics connection string is specified in hello .cscfg file, then Visual Studio falls back toousing hello storage account specified in hello .wadcfgx file tooconfigure hello diagnostics extension when publishing, and generating hello public configuration xml files when packaging.</span></span>
* <span data-ttu-id="57377-143">hello diagnostik anslutningssträngen i hello .cscfg-filen har företräde framför hello storage-konto i hello .wadcfgx-filen.</span><span class="sxs-lookup"><span data-stu-id="57377-143">hello diagnostics connection string in hello .cscfg file takes precedence over hello storage account in hello .wadcfgx file.</span></span> <span data-ttu-id="57377-144">Om en anslutningssträng för diagnostik är anges i hello .cscfg-filen har Visual Studio använder som och ignorerar hello storage-konto i .wadcfgx.</span><span class="sxs-lookup"><span data-stu-id="57377-144">If a diagnostics connection string is specified in hello .cscfg file, then Visual Studio uses that and ignores hello storage account in .wadcfgx.</span></span>

### <a name="what-does-hello-update-development-storage-connection-strings-checkbox-do"></a><span data-ttu-id="57377-145">Vad hello ”uppdatera development storage-anslutningssträngar...”</span><span class="sxs-lookup"><span data-stu-id="57377-145">What does hello "Update development storage connection strings…"</span></span> <span data-ttu-id="57377-146">kryssrutan för?</span><span class="sxs-lookup"><span data-stu-id="57377-146">checkbox do?</span></span>
<span data-ttu-id="57377-147">Hej kryssrutan för **uppdatera development storage-anslutningssträngar för diagnostik- och cachelagring med Microsoft Azure storage-kontoautentiseringsuppgifter när du publicerar tooMicrosoft Azure** ger dig ett enkelt sätt tooupdate alla utveckling lagringskontots anslutningssträngar med hello Azure storage-konto anges vid publicering.</span><span class="sxs-lookup"><span data-stu-id="57377-147">hello checkbox for **Update development storage connection strings for Diagnostics and Caching with Microsoft Azure storage account credentials when publishing tooMicrosoft Azure** gives you a convenient way tooupdate any development storage account connection strings with hello Azure storage account specified during publishing.</span></span>

<span data-ttu-id="57377-148">Anta att du väljer den här kryssrutan och hello diagnostik anslutningssträngen anger `UseDevelopmentStorage=true`.</span><span class="sxs-lookup"><span data-stu-id="57377-148">For example, suppose you select this checkbox and hello diagnostics connection string specifies `UseDevelopmentStorage=true`.</span></span> <span data-ttu-id="57377-149">När du publicerar hello projektet tooAzure uppdateras automatiskt hello diagnostik anslutningssträngen med hello storage-konto som du angav i guiden för hello publicera i Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="57377-149">When you publish hello project tooAzure, Visual Studio will automatically update hello diagnostics connection string with hello storage account you specified in hello Publish wizard.</span></span> <span data-ttu-id="57377-150">Men om en verklig lagringskonto har angetts som hello diagnostik anslutningssträng, används detta konto i stället.</span><span class="sxs-lookup"><span data-stu-id="57377-150">However, if a real storage account was specified as hello diagnostics connection string, then that account is used instead.</span></span>

## <a name="diagnostics-functionality-differences-between-azure-sdk-24-and-earlier-and-azure-sdk-25-and-later"></a><span data-ttu-id="57377-151">Diagnostik funktioner skillnaderna mellan Azure SDK 2.4 och tidigare och Azure SDK 2,5 och senare</span><span class="sxs-lookup"><span data-stu-id="57377-151">Diagnostics functionality differences between Azure SDK 2.4 and earlier and Azure SDK 2.5 and later</span></span>
<span data-ttu-id="57377-152">Om du uppgraderar ditt projekt från Azure SDK 2.4 tooAzure SDK 2.5 eller senare, du bör ha i åtanke hello följande diagnostik funktioner skillnader.</span><span class="sxs-lookup"><span data-stu-id="57377-152">If you're upgrading your project from Azure SDK 2.4 tooAzure SDK 2.5 or later, you should bear in mind hello following diagnostics functionality differences.</span></span>

* <span data-ttu-id="57377-153">**Konfiguration av API: er är inaktuella** – programkonfiguration av diagnostik är tillgänglig i Azure SDK 2.4 eller tidigare versioner, men är föråldrad i Azure SDK 2.5 och senare.</span><span class="sxs-lookup"><span data-stu-id="57377-153">**Configuration APIs are deprecated** – Programmatic configuration of diagnostics is available in Azure SDK 2.4 or earlier versions, but is deprecated in Azure SDK 2.5 and later.</span></span> <span data-ttu-id="57377-154">Om konfigurationen av diagnostik har definierats i koden, behöver du tooreconfigure dessa inställningar från grunden i hello migrerade projekt för diagnostik tookeep fungerar.</span><span class="sxs-lookup"><span data-stu-id="57377-154">If your diagnostics configuration is currently defined in code, you'll need tooreconfigure those settings from scratch in hello migrated project in order for diagnostics tookeep working.</span></span> <span data-ttu-id="57377-155">konfigurationsfilen för hello diagnostik för Azure SDK 2.4 är diagnostics.wadcfg och diagnostics.wadcfgx för Azure SDK 2.5 och senare.</span><span class="sxs-lookup"><span data-stu-id="57377-155">hello diagnostics configuration file for Azure SDK 2.4 is diagnostics.wadcfg, and diagnostics.wadcfgx for Azure SDK 2.5 and later.</span></span>
* <span data-ttu-id="57377-156">**Diagnostik för molnprogram för tjänsten kan bara konfigureras på hello rollnivå, inte på instansnivå hello.**</span><span class="sxs-lookup"><span data-stu-id="57377-156">**Diagnostics for cloud service applications can only be configured at hello role level, not at hello instance level.**</span></span>
* <span data-ttu-id="57377-157">**Varje gång du distribuerar appen hello diagnostik konfiguration uppdateras** – om du ändrar konfigurationen diagnostik från Server Explorer och distribuera din app kan det medföra problem för paritet.</span><span class="sxs-lookup"><span data-stu-id="57377-157">**Every time you deploy your app, hello diagnostics configuration is updated** – This can cause parity issues if you change your diagnostics configuration from Server Explorer and then redeploy your app.</span></span>
* <span data-ttu-id="57377-158">**Azure SDK 2.5 och senare, krascher Dumpar konfigureras i hello konfigurationsfil diagnostik, inte i kod** – om du har krascher Dumpar som konfigurerats i koden har du toomanually överföring hello konfiguration från kod toohello konfigurationsfilen eftersom hello kraschdumpar överförs inte under hello migrering tooAzure SDK 2.6.</span><span class="sxs-lookup"><span data-stu-id="57377-158">**In Azure SDK 2.5 and later, crash dumps are configured in hello diagnostics configuration file, not in code** – If you have crash dumps configured in code, you'll have toomanually transfer hello configuration from code toohello configuration file, because hello crash dumps aren't transferred during hello migration tooAzure SDK 2.6.</span></span>

## <a name="enable-diagnostics-in-cloud-service-projects-before-deploying-them"></a><span data-ttu-id="57377-159">Aktivera diagnostik i molntjänstprojekt innan du distribuerar dem.</span><span class="sxs-lookup"><span data-stu-id="57377-159">Enable diagnostics in cloud service projects before deploying them</span></span>
<span data-ttu-id="57377-160">Du kan välja toocollect diagnostikdata för roller som körs i Azure, när du kör hello service i hello-emulator innan du distribuerar den i Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="57377-160">In Visual Studio, you can choose toocollect diagnostics data for roles that run in Azure, when you run hello service in hello emulator before deploying it.</span></span> <span data-ttu-id="57377-161">Alla ändringar toodiagnostics inställningar i Visual Studio sparas i hello diagnostics.wadcfgx konfigurationsfil.</span><span class="sxs-lookup"><span data-stu-id="57377-161">All changes toodiagnostics settings in Visual Studio are saved in hello diagnostics.wadcfgx configuration file.</span></span> <span data-ttu-id="57377-162">Dessa konfigurationsinställningar ange hello lagringskonto där diagnostikdata sparas när du distribuerar din tjänst i molnet.</span><span class="sxs-lookup"><span data-stu-id="57377-162">These configuration settings specify hello storage account where diagnostics data is saved when you deploy your cloud service.</span></span>

[!INCLUDE [cloud-services-wad-warning](../includes/cloud-services-wad-warning.md)]

### <a name="tooenable-diagnostics-in-visual-studio-before-deployment"></a><span data-ttu-id="57377-163">tooenable diagnostik i Visual Studio före distributionen</span><span class="sxs-lookup"><span data-stu-id="57377-163">tooenable diagnostics in Visual Studio before deployment</span></span>
1. <span data-ttu-id="57377-164">Hello snabbmenyn för hello roll som intresserar dig välja **egenskaper**, och välj sedan hello **Configuration** fliken hello roll **egenskaper** fönster.</span><span class="sxs-lookup"><span data-stu-id="57377-164">On hello shortcut menu for hello role that interests you, choose **Properties**, and then choose hello **Configuration** tab in hello role’s **Properties** window.</span></span>
2. <span data-ttu-id="57377-165">I hello **diagnostik** Kontrollera att hello **aktivera diagnostik** är markerad.</span><span class="sxs-lookup"><span data-stu-id="57377-165">In hello **Diagnostics** section, make sure that hello **Enable Diagnostics** check box is selected.</span></span>
   
    ![Åtkomst till hello aktivera diagnostik alternativet](./media/vs-azure-tools-diagnostics-for-cloud-services-and-virtual-machines/IC796660.png)
3. <span data-ttu-id="57377-167">Välj hello ellips (...)-knappen toospecify hello storage-konto där du vill att hello diagnostik data toobe lagras.</span><span class="sxs-lookup"><span data-stu-id="57377-167">Choose hello ellipsis (…) button toospecify hello storage account where you want hello diagnostics data toobe stored.</span></span> <span data-ttu-id="57377-168">hello storage-konto som du väljer kommer att hello plats där diagnostikdata lagras.</span><span class="sxs-lookup"><span data-stu-id="57377-168">hello storage account you choose will be hello location where diagnostics data is stored.</span></span>
   
    ![Ange hello storage-konto toouse](./media/vs-azure-tools-diagnostics-for-cloud-services-and-virtual-machines/IC796661.png)
4. <span data-ttu-id="57377-170">I hello **skapa Lagringsanslutningssträng** dialogrutan Ange om du vill tooconnect med hello Azure Storage-emulatorn, en Azure-prenumeration eller autentiseringsuppgifterna anges manuellt.</span><span class="sxs-lookup"><span data-stu-id="57377-170">In hello **Create Storage Connection String** dialog box, specify whether you want tooconnect using hello Azure Storage Emulator, an Azure subscription, or manually entered credentials.</span></span>
   
    ![Dialogrutan för Storage-konto](./media/vs-azure-tools-diagnostics-for-cloud-services-and-virtual-machines/IC796662.png)
   
   * <span data-ttu-id="57377-172">Om du väljer alternativet för hello Microsoft Azure Storage-emulatorn hello anslutningssträngen anges tooUseDevelopmentStorage = true.</span><span class="sxs-lookup"><span data-stu-id="57377-172">If you choose hello Microsoft Azure Storage Emulator option, hello connection string is set tooUseDevelopmentStorage=true.</span></span>
   * <span data-ttu-id="57377-173">Om du väljer hello alternativ för en prenumeration kan välja du hello Azure-prenumeration du vill toouse och hello kontonamn.</span><span class="sxs-lookup"><span data-stu-id="57377-173">If you choose hello Your subscription option, you can choose hello Azure subscription you want toouse and hello account name.</span></span> <span data-ttu-id="57377-174">Du kan välja hello hantera konton knappen toomanage dina Azure-prenumerationer.</span><span class="sxs-lookup"><span data-stu-id="57377-174">You can choose hello Manage Accounts button toomanage your Azure subscriptions.</span></span>
   * <span data-ttu-id="57377-175">Om du väljer alternativet för hello anges manuellt autentiseringsuppgifter, är du tillfrågas tooenter hello namn och nyckel för hello Azure-konto du vill toouse.</span><span class="sxs-lookup"><span data-stu-id="57377-175">If you choose hello Manually entered credentials option, you're prompted tooenter hello name and key of hello Azure account you want toouse.</span></span>
5. <span data-ttu-id="57377-176">Välj hello **konfigurera** knappen tooview hello **diagnostik configuration** dialogrutan.</span><span class="sxs-lookup"><span data-stu-id="57377-176">Choose hello **Configure** button tooview hello **Diagnostics configuration** dialog box.</span></span> <span data-ttu-id="57377-177">Varje flik (förutom för **allmänna** och **loggen kataloger**) representerar en diagnostiska datakälla som du kan samla in.</span><span class="sxs-lookup"><span data-stu-id="57377-177">Each tab (except for **General** and **Log Directories**) represents a diagnostic data source that you can collect.</span></span> <span data-ttu-id="57377-178">hello standardflik **allmänna**, ger du hello följande diagnostikalternativ data samling: **endast fel**, **All information**, och **anpassade plan** .</span><span class="sxs-lookup"><span data-stu-id="57377-178">hello default tab, **General**, offers you hello following diagnostics data collection options: **Errors only**, **All information**, and **Custom plan**.</span></span> <span data-ttu-id="57377-179">Hej standardalternativet **endast fel**, tar hello minsta mängd lagringsutrymme eftersom den inte överföra varningar eller spårning av meddelanden.</span><span class="sxs-lookup"><span data-stu-id="57377-179">hello default option, **Errors only**, takes hello least amount of storage because it doesn’t transfer warnings or tracing messages.</span></span> <span data-ttu-id="57377-180">hello alla information alternativet överföringar hello information och är därför hello dyraste alternativet vad gäller lagring.</span><span class="sxs-lookup"><span data-stu-id="57377-180">hello All information option transfers hello most information and is, therefore, hello most expensive option in terms of storage.</span></span>
   
    ![Aktivera Azure-diagnostik och konfiguration](./media/vs-azure-tools-diagnostics-for-cloud-services-and-virtual-machines/IC758144.png)
6. <span data-ttu-id="57377-182">Välj det här exemplet hello **anpassade plan** alternativet så att du kan anpassa hello data som samlas in.</span><span class="sxs-lookup"><span data-stu-id="57377-182">For this example, select hello **Custom plan** option so you can customize hello data collected.</span></span>
7. <span data-ttu-id="57377-183">Hej **diskkvot i MB** ruta anger hur mycket utrymme som du vill använda tooallocate i lagringen redovisa diagnostikdata.</span><span class="sxs-lookup"><span data-stu-id="57377-183">hello **Disk Quota in MB** box specifies how much space you want tooallocate in your storage account for diagnostics data.</span></span> <span data-ttu-id="57377-184">Du kan ändra hello standardvärdet om du vill.</span><span class="sxs-lookup"><span data-stu-id="57377-184">You can change hello default value if you want.</span></span>
8. <span data-ttu-id="57377-185">På varje flik i diagnostikdata som du vill toocollect, Välj dess **Aktivera överföring av <log type>**  kryssrutan.</span><span class="sxs-lookup"><span data-stu-id="57377-185">On each tab of diagnostics data you want toocollect, select its **Enable Transfer of <log type>** check box.</span></span> <span data-ttu-id="57377-186">Om du vill toocollect programloggarna, väljer du exempelvis hello **Aktivera överföring av programloggar** kryssrutan på hello **programloggarna** fliken. Dessutom ange annan information som krävs för varje datatyp för diagnostik.</span><span class="sxs-lookup"><span data-stu-id="57377-186">For example, if you want toocollect application logs, select hello **Enable transfer of Application Logs** check box on hello **Application Logs** tab. Also, specify any other information required by each diagnostics data type.</span></span> <span data-ttu-id="57377-187">Avsnittet hello **konfigurera diagnostik-datakällor** senare i det här avsnittet för konfigurationsinformation på varje flik.</span><span class="sxs-lookup"><span data-stu-id="57377-187">See hello section **Configure diagnostics data sources** later in this topic for configuration information on each tab.</span></span>
9. <span data-ttu-id="57377-188">När du har aktiverat insamling av all hello diagnostikdata som du vill välja hello **OK** knappen.</span><span class="sxs-lookup"><span data-stu-id="57377-188">After you’ve enabled collection of all hello diagnostics data you want, choose hello **OK** button.</span></span>
10. <span data-ttu-id="57377-189">Kör ditt Azure cloud service-projekt i Visual Studio som vanligt.</span><span class="sxs-lookup"><span data-stu-id="57377-189">Run your Azure cloud service project in Visual Studio as usual.</span></span> <span data-ttu-id="57377-190">När du använder programmet sparas hello logginformation som du har aktiverat toohello Azure storage-konto som du har angett.</span><span class="sxs-lookup"><span data-stu-id="57377-190">As you use your application, hello log information that you enabled is saved toohello Azure storage account you specified.</span></span>

## <a name="enable-diagnostics-in-azure-virtual-machines"></a><span data-ttu-id="57377-191">Aktivera diagnostik i virtuella Azure-datorer</span><span class="sxs-lookup"><span data-stu-id="57377-191">Enable diagnostics in Azure virtual machines</span></span>
<span data-ttu-id="57377-192">Du kan välja toocollect diagnostikdata för virtuella Azure-datorer i Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="57377-192">In Visual Studio, you can choose toocollect diagnostics data for Azure virtual machines.</span></span>

### <a name="tooenable-diagnostics-in-azure-virtual-machines"></a><span data-ttu-id="57377-193">tooenable diagnostik i virtuella Azure-datorer</span><span class="sxs-lookup"><span data-stu-id="57377-193">tooenable diagnostics in Azure virtual machines</span></span>
1. <span data-ttu-id="57377-194">I **Server Explorer**, Välj hello Azure noden och sedan ansluta tooyour Azure-prenumeration om du inte redan är ansluten.</span><span class="sxs-lookup"><span data-stu-id="57377-194">In **Server Explorer**, choose hello Azure node and then connect tooyour Azure subscription, if you're not already connected.</span></span>
2. <span data-ttu-id="57377-195">Expandera hello **virtuella datorer** nod.</span><span class="sxs-lookup"><span data-stu-id="57377-195">Expand hello **Virtual Machines** node.</span></span> <span data-ttu-id="57377-196">Du kan skapa en ny virtuell dator eller välj en befintliga.</span><span class="sxs-lookup"><span data-stu-id="57377-196">You can create a new virtual machine, or select one that's already there.</span></span>
3. <span data-ttu-id="57377-197">Välj på snabbmenyn för hello virtuell dator som du är intresserad av hello **konfigurera**.</span><span class="sxs-lookup"><span data-stu-id="57377-197">On hello shortcut menu for hello virtual machine that interests you, choose **Configure**.</span></span> <span data-ttu-id="57377-198">Detta visar dialogrutan konfiguration av hello virtuell dator.</span><span class="sxs-lookup"><span data-stu-id="57377-198">This shows hello virtual machine configuration dialog box.</span></span>
   
    ![Konfigurera en virtuell Azure-dator](./media/vs-azure-tools-diagnostics-for-cloud-services-and-virtual-machines/IC796663.png)
4. <span data-ttu-id="57377-200">Lägg till hello-tillägget för Microsoft Monitoring Agent-diagnostik om den inte redan är installerat.</span><span class="sxs-lookup"><span data-stu-id="57377-200">If it's not already installed, add hello Microsoft Monitoring Agent Diagnostics extension.</span></span> <span data-ttu-id="57377-201">Det här tillägget kan du samla in diagnostikdata för hello virtuella Azure-datorn.</span><span class="sxs-lookup"><span data-stu-id="57377-201">This extension lets you gather diagnostics data for hello Azure virtual machine.</span></span> <span data-ttu-id="57377-202">Välj hello Välj en tillgänglig tillägget nedrullningsbara menyn och välj sedan Microsoft Monitoring Agent-diagnostik i hello installerat tillägg lista.</span><span class="sxs-lookup"><span data-stu-id="57377-202">In hello Installed Extensions list, choose hello Select an available extension drop-down menu and then choose Microsoft Monitoring Agent Diagnostics.</span></span>
   
    ![Installera ett tillägg för virtuell Azure-dator](./media/vs-azure-tools-diagnostics-for-cloud-services-and-virtual-machines/IC766024.png)
   
   > [!NOTE]
   > <span data-ttu-id="57377-204">Andra diagnostik tillägg är tillgängligt för virtuella datorer.</span><span class="sxs-lookup"><span data-stu-id="57377-204">Other diagnostics extensions are available for your virtual machines.</span></span> <span data-ttu-id="57377-205">Mer information finns i Azure VM-tillägg och funktioner.</span><span class="sxs-lookup"><span data-stu-id="57377-205">For more information, see Azure VM Extensions and Features.</span></span>
   > 
   > 
5. <span data-ttu-id="57377-206">Välj hello **Lägg till** knappen tooadd hello-tillägget och visa dess **diagnostik configuration** dialogrutan.</span><span class="sxs-lookup"><span data-stu-id="57377-206">Choose hello **Add** button tooadd hello extension and view its **Diagnostics configuration** dialog box.</span></span>
6. <span data-ttu-id="57377-207">Välj hello **konfigurera** knappen toospecify ett lagringskonto och välj sedan hello **OK** knappen.</span><span class="sxs-lookup"><span data-stu-id="57377-207">Choose hello **Configure** button toospecify a storage account and then choose hello **OK** button.</span></span>
   
    <span data-ttu-id="57377-208">Varje flik (förutom för **allmänna** och **loggen kataloger**) representerar en diagnostiska datakälla som du kan samla in.</span><span class="sxs-lookup"><span data-stu-id="57377-208">Each tab (except for **General** and **Log Directories**) represents a diagnostic data source that you can collect.</span></span>
   
    ![Aktivera Azure-diagnostik och konfiguration](./media/vs-azure-tools-diagnostics-for-cloud-services-and-virtual-machines/IC758144.png)
   
    <span data-ttu-id="57377-210">hello standardflik **allmänna**, ger du hello följande diagnostikalternativ data samling: **endast fel**, **All information**, och **anpassade plan** .</span><span class="sxs-lookup"><span data-stu-id="57377-210">hello default tab, **General**, offers you hello following diagnostics data collection options: **Errors only**, **All information**, and **Custom plan**.</span></span> <span data-ttu-id="57377-211">Hej standardalternativet **endast fel**, tar hello minsta mängd lagringsutrymme eftersom den inte överföra varningar eller spårning av meddelanden.</span><span class="sxs-lookup"><span data-stu-id="57377-211">hello default option, **Errors only**, takes hello least amount of storage because it doesn’t transfer warnings or tracing messages.</span></span> <span data-ttu-id="57377-212">Hej **All information** alternativet överföringar hello information och är därför hello dyraste alternativet vad gäller lagring.</span><span class="sxs-lookup"><span data-stu-id="57377-212">hello **All information** option transfers hello most information and is, therefore, hello most expensive option in terms of storage.</span></span>
7. <span data-ttu-id="57377-213">Välj det här exemplet hello **anpassade plan** alternativet så att du kan anpassa hello data som samlas in.</span><span class="sxs-lookup"><span data-stu-id="57377-213">For this example, select hello **Custom plan** option so you can customize hello data collected.</span></span>
8. <span data-ttu-id="57377-214">Hej **diskkvot i MB** ruta anger hur mycket utrymme som du vill använda tooallocate i lagringen redovisa diagnostikdata.</span><span class="sxs-lookup"><span data-stu-id="57377-214">hello **Disk Quota in MB** box specifies how much space you want tooallocate in your storage account for diagnostics data.</span></span> <span data-ttu-id="57377-215">Du kan ändra hello standardvärdet om du vill.</span><span class="sxs-lookup"><span data-stu-id="57377-215">You can change hello default value if you want.</span></span>
9. <span data-ttu-id="57377-216">På varje flik i diagnostikdata som du vill toocollect, Välj dess **Aktivera överföring av <log type>**  kryssrutan.</span><span class="sxs-lookup"><span data-stu-id="57377-216">On each tab of diagnostics data you want toocollect, select its **Enable Transfer of <log type>** check box.</span></span>
   
    <span data-ttu-id="57377-217">Om du vill toocollect programloggarna, väljer du exempelvis hello **Aktivera överföring av programloggar** kryssrutan på hello **programloggarna** fliken. Dessutom ange annan information som krävs för varje datatyp för diagnostik.</span><span class="sxs-lookup"><span data-stu-id="57377-217">For example, if you want toocollect application logs, select hello **Enable transfer of Application Logs** check box on hello **Application Logs** tab. Also, specify any other information required by each diagnostics data type.</span></span> <span data-ttu-id="57377-218">Avsnittet hello **konfigurera diagnostik-datakällor** senare i det här avsnittet för konfigurationsinformation på varje flik.</span><span class="sxs-lookup"><span data-stu-id="57377-218">See hello section **Configure diagnostics data sources** later in this topic for configuration information on each tab.</span></span>
10. <span data-ttu-id="57377-219">När du har aktiverat insamling av all hello diagnostikdata som du vill välja hello **OK** knappen.</span><span class="sxs-lookup"><span data-stu-id="57377-219">After you’ve enabled collection of all hello diagnostics data you want, choose hello **OK** button.</span></span>
11. <span data-ttu-id="57377-220">Spara hello uppdateras projekt.</span><span class="sxs-lookup"><span data-stu-id="57377-220">Save hello updated project.</span></span>
    
     <span data-ttu-id="57377-221">Du ser ett meddelande i hello **Microsoft Azure-aktivitetsloggen** fönster som hello virtuella datorn har uppdaterats.</span><span class="sxs-lookup"><span data-stu-id="57377-221">You'll see a message in hello **Microsoft Azure Activity Log** window that hello virtual machine has been updated.</span></span>

## <a name="configure-diagnostics-data-sources"></a><span data-ttu-id="57377-222">Konfigurera diagnostik-datakällor</span><span class="sxs-lookup"><span data-stu-id="57377-222">Configure diagnostics data sources</span></span>
<span data-ttu-id="57377-223">När du aktiverar datainsamling för diagnostik, kan du välja vilka datakällor som du vill att toocollect och vilken information som samlas in.</span><span class="sxs-lookup"><span data-stu-id="57377-223">After you enable diagnostics data collection, you can choose exactly what data sources you want toocollect and what information is collected.</span></span> <span data-ttu-id="57377-224">hello följer en lista över flikar i hello **diagnostik configuration** dialogrutan och innebär att varje konfigurationsalternativet.</span><span class="sxs-lookup"><span data-stu-id="57377-224">hello following is a list of tabs in hello **Diagnostics configuration** dialog box and what each configuration option means.</span></span>

### <a name="application-logs"></a><span data-ttu-id="57377-225">Programloggar</span><span class="sxs-lookup"><span data-stu-id="57377-225">Application logs</span></span>
<span data-ttu-id="57377-226">**Programloggarna** innehåller diagnostikinformation som produceras av ett webbprogram.</span><span class="sxs-lookup"><span data-stu-id="57377-226">**Application logs** contain diagnostics information produced by a web application.</span></span> <span data-ttu-id="57377-227">Om du vill toocapture programloggarna, Välj hello **Aktivera överföring av programloggar** kryssrutan.</span><span class="sxs-lookup"><span data-stu-id="57377-227">If you want toocapture application logs, select hello **Enable transfer of Application Logs** check box.</span></span> <span data-ttu-id="57377-228">Du kan öka eller minska hello antalet minuter när hello programloggarna överförs tooyour storage-konto genom att ändra hello **överför Period (min)** värde.</span><span class="sxs-lookup"><span data-stu-id="57377-228">You can increase or decrease hello number of minutes when hello application logs are transferred tooyour storage account by changing hello **Transfer Period (min)** value.</span></span> <span data-ttu-id="57377-229">Du kan också ändra hello mängden information som hämtas hello loggen genom att ange hello loggen värde.</span><span class="sxs-lookup"><span data-stu-id="57377-229">You can also change hello amount of information captured in hello log by setting hello Log level value.</span></span> <span data-ttu-id="57377-230">Du kan till exempel välja **utförlig** tooget mer information eller välj **kritisk** toocapture endast kritiska fel.</span><span class="sxs-lookup"><span data-stu-id="57377-230">For example, you can choose **Verbose** tooget more information or choose **Critical** toocapture only critical errors.</span></span> <span data-ttu-id="57377-231">Om du har en särskild diagnostik-provider som genererar programloggarna kan du fånga in dem genom att lägga till hello providern GUID toohello **Provider-GUID** rutan.</span><span class="sxs-lookup"><span data-stu-id="57377-231">If you have a specific diagnostics provider that emits application logs, you can capture them by adding hello provider’s GUID toohello **Provider GUID** box.</span></span>

  ![Programloggar](./media/vs-azure-tools-diagnostics-for-cloud-services-and-virtual-machines/IC758145.png)

  <span data-ttu-id="57377-233">Se [aktivera diagnostikloggning för web apps i Azure App Service](app-service-web/web-sites-enable-diagnostic-log.md) mer information om programloggar.</span><span class="sxs-lookup"><span data-stu-id="57377-233">See [Enable diagnostics logging for web apps in Azure App Service](app-service-web/web-sites-enable-diagnostic-log.md) for more information about application logs.</span></span>

### <a name="windows-event-logs"></a><span data-ttu-id="57377-234">Windows-händelseloggar</span><span class="sxs-lookup"><span data-stu-id="57377-234">Windows event logs</span></span>
<span data-ttu-id="57377-235">Om du vill toocapture Windows-händelseloggar, Välj hello **Aktivera överföring av Windows-händelseloggar** kryssrutan.</span><span class="sxs-lookup"><span data-stu-id="57377-235">If you want toocapture Windows event logs, select hello **Enable transfer of Windows Event Logs** check box.</span></span> <span data-ttu-id="57377-236">Du kan öka eller minska hello antalet minuter när hello händelseloggar överförs tooyour storage-konto genom att ändra hello **överför Period (min)** värde.</span><span class="sxs-lookup"><span data-stu-id="57377-236">You can increase or decrease hello number of minutes when hello event logs are transferred tooyour storage account by changing hello **Transfer Period (min)** value.</span></span> <span data-ttu-id="57377-237">Välj hello kryssrutorna för hello typer av händelser som du vill tootrack.</span><span class="sxs-lookup"><span data-stu-id="57377-237">Select hello check boxes for hello types of events that you want tootrack.</span></span>

  ![Händelseloggar](./media/vs-azure-tools-diagnostics-for-cloud-services-and-virtual-machines/IC796664.png)

<span data-ttu-id="57377-239">Om du använder Azure SDK 2.6 eller senare och vill toospecify en anpassad datakälla, anger du i hello  **<Data source name>**  texten och väljer hello **Lägg till** knappen Nästa tooit.</span><span class="sxs-lookup"><span data-stu-id="57377-239">If you're using Azure SDK 2.6 or later and want toospecify a custom data source, enter it in hello **<Data source name>** text box and then choose hello **Add** button next tooit.</span></span> <span data-ttu-id="57377-240">hello datakällan har lagts till toohello diagnostics.cfcfg fil.</span><span class="sxs-lookup"><span data-stu-id="57377-240">hello data source is added toohello diagnostics.cfcfg file.</span></span>

<span data-ttu-id="57377-241">Om du använder Azure SDK 2.5 och vill toospecify en anpassad datakälla, du kan lägga till den toohello `WindowsEventLog` avsnitt i hello diagnostics.wadcfgx-fil, exempelvis hello följande exempel.</span><span class="sxs-lookup"><span data-stu-id="57377-241">If you're using Azure SDK 2.5 and want toospecify a custom data source, you can add it toohello `WindowsEventLog` section of hello diagnostics.wadcfgx file, such as in hello following example.</span></span>

```
<WindowsEventLog scheduledTransferPeriod="PT1M">
   <DataSource name="Application!*" />
   <DataSource name="CustomDataSource!*" />
</WindowsEventLog>
```
### <a name="performance-counters"></a><span data-ttu-id="57377-242">Prestandaräknare</span><span class="sxs-lookup"><span data-stu-id="57377-242">Performance counters</span></span>
<span data-ttu-id="57377-243">Prestandaräknaren som kan hjälpa dig hitta system flaskhalsar och finjustera system- och programprestanda.</span><span class="sxs-lookup"><span data-stu-id="57377-243">Performance counter information can help you locate system bottlenecks and fine-tune system and application performance.</span></span> <span data-ttu-id="57377-244">Se [skapa och Använd prestandaräknare i ett Azure-program](https://msdn.microsoft.com/library/azure/hh411542.aspx) för mer information.</span><span class="sxs-lookup"><span data-stu-id="57377-244">See [Create and Use Performance Counters in an Azure Application](https://msdn.microsoft.com/library/azure/hh411542.aspx) for more information.</span></span> <span data-ttu-id="57377-245">Om du vill toocapture prestandaräknare, Välj hello **Aktivera överföring av prestandaräknare** kryssrutan.</span><span class="sxs-lookup"><span data-stu-id="57377-245">If you want toocapture performance counters, select hello **Enable transfer of Performance Counters** check box.</span></span> <span data-ttu-id="57377-246">Du kan öka eller minska hello antalet minuter när hello händelseloggar överförs tooyour storage-konto genom att ändra hello **överför Period (min)** värde.</span><span class="sxs-lookup"><span data-stu-id="57377-246">You can increase or decrease hello number of minutes when hello event logs are transferred tooyour storage account by changing hello **Transfer Period (min)** value.</span></span> <span data-ttu-id="57377-247">Markera kryssrutorna för hello för hello prestandaräknare som du vill tootrack.</span><span class="sxs-lookup"><span data-stu-id="57377-247">Select hello check boxes for hello performance counters that you want tootrack.</span></span>

  ![Prestandaräknare](./media/vs-azure-tools-diagnostics-for-cloud-services-and-virtual-machines/IC758147.png)

<span data-ttu-id="57377-249">tootrack en prestandaräknare som inte finns i listan, ange den med hjälp av hello föreslagna syntax och välj sedan hello **Lägg till** knappen.</span><span class="sxs-lookup"><span data-stu-id="57377-249">tootrack a performance counter that isn’t listed, enter it by using hello suggested syntax and then choose hello **Add** button.</span></span> <span data-ttu-id="57377-250">hello operativsystemet på den virtuella datorn hello bestämmer vilka prestandaräknare som du kan följa. Mer information om syntaxen finns [att ange en räknarsökvägen](https://msdn.microsoft.com/library/windows/desktop/aa373193.aspx).</span><span class="sxs-lookup"><span data-stu-id="57377-250">hello operating system on hello virtual machine determines which performance counters you can track. For more information about syntax, see [Specifying a Counter Path](https://msdn.microsoft.com/library/windows/desktop/aa373193.aspx).</span></span>

### <a name="infrastructure-logs"></a><span data-ttu-id="57377-251">Infrastruktur-loggar</span><span class="sxs-lookup"><span data-stu-id="57377-251">Infrastructure logs</span></span>
<span data-ttu-id="57377-252">Om du vill toocapture infrastruktur loggar som innehåller information om hello Azure-diagnostik infrastrukturen, hello RemoteAccess modulen och hello RemoteForwarder-modulen väljer hello **Aktivera överföring av infrastrukturen loggar**kryssrutan.</span><span class="sxs-lookup"><span data-stu-id="57377-252">If you want toocapture infrastructure logs, which contain information about hello Azure diagnostic infrastructure, hello RemoteAccess module, and hello RemoteForwarder module, select hello **Enable transfer of Infrastructure Logs** check box.</span></span> <span data-ttu-id="57377-253">Du kan öka eller minska hello antalet minuter när hello loggar överförs tooyour storage-konto genom att ändra värdet för hello överföra Period (min).</span><span class="sxs-lookup"><span data-stu-id="57377-253">You can increase or decrease hello number of minutes when hello logs are transferred tooyour storage account by changing hello Transfer Period (min) value.</span></span>

  ![Diagnostik infrastruktur loggar](./media/vs-azure-tools-diagnostics-for-cloud-services-and-virtual-machines/IC758148.png)

  <span data-ttu-id="57377-255">Se [samla in Data för loggning med hjälp av Azure-diagnostik](https://msdn.microsoft.com/library/azure/gg433048.aspx) för mer information.</span><span class="sxs-lookup"><span data-stu-id="57377-255">See [Collect Logging Data by Using Azure Diagnostics](https://msdn.microsoft.com/library/azure/gg433048.aspx) for more information.</span></span>

### <a name="log-directories"></a><span data-ttu-id="57377-256">Loggen kataloger</span><span class="sxs-lookup"><span data-stu-id="57377-256">Log directories</span></span>
<span data-ttu-id="57377-257">Om du vill toocapture loggen kataloger som innehåller data som samlas in från loggen kataloger för Internet Information Services (IIS)-begäranden, misslyckade begäranden eller mappar som du väljer, väljer hello **Aktivera överföring av loggen kataloger**kryssrutan.</span><span class="sxs-lookup"><span data-stu-id="57377-257">If you want toocapture log directories, which contain data collected from log directories for Internet Information Services (IIS) requests, failed requests, or folders that you choose, select hello **Enable transfer of Log Directories** check box.</span></span> <span data-ttu-id="57377-258">Du kan öka eller minska hello antalet minuter när hello loggar överförs tooyour storage-konto genom att ändra hello **överför Period (min)** värde.</span><span class="sxs-lookup"><span data-stu-id="57377-258">You can increase or decrease hello number of minutes when hello logs are transferred tooyour storage account by changing hello **Transfer Period (min)** value.</span></span>

<span data-ttu-id="57377-259">Du kan välja hello rutor hello loggar du vill toocollect, såsom **IIS-loggar** och **kunde inte begära** loggar.</span><span class="sxs-lookup"><span data-stu-id="57377-259">You can select hello boxes of hello logs you want toocollect, such as **IIS Logs** and **Failed Request** Logs.</span></span> <span data-ttu-id="57377-260">Standard lagring behållarnamn finns, men kan du ändra hello namn om du vill.</span><span class="sxs-lookup"><span data-stu-id="57377-260">Default storage container names are provided, but you can change hello names if you want.</span></span>

<span data-ttu-id="57377-261">Dessutom kan du fånga in loggar från en mapp.</span><span class="sxs-lookup"><span data-stu-id="57377-261">Also, you can capture logs from any folder.</span></span> <span data-ttu-id="57377-262">Ange bara hello sökväg i hello **loggen från absoluta Directory** avsnittet och väljer sedan hello **Lägg till katalog** knappen.</span><span class="sxs-lookup"><span data-stu-id="57377-262">Just specify hello path in hello **Log from Absolute Directory** section and then choose hello **Add Directory** button.</span></span> <span data-ttu-id="57377-263">hello loggar kommer att sparas toohello angetts behållare.</span><span class="sxs-lookup"><span data-stu-id="57377-263">hello logs will be captured toohello specified containers.</span></span>

  ![Loggen kataloger](./media/vs-azure-tools-diagnostics-for-cloud-services-and-virtual-machines/IC796665.png)

### <a name="etw-logs"></a><span data-ttu-id="57377-265">ETW-loggar</span><span class="sxs-lookup"><span data-stu-id="57377-265">ETW logs</span></span>
<span data-ttu-id="57377-266">Om du använder [Event Tracing for Windows](https://msdn.microsoft.com/library/windows/desktop/bb968803\(v=vs.85\).aspx) (ETW) och vill toocapture ETW loggar, Välj hello **Aktivera överföring av ETW-loggar** kryssrutan.</span><span class="sxs-lookup"><span data-stu-id="57377-266">If you use [Event Tracing for Windows](https://msdn.microsoft.com/library/windows/desktop/bb968803\(v=vs.85\).aspx) (ETW) and want toocapture ETW logs, select hello **Enable transfer of ETW Logs** check box.</span></span> <span data-ttu-id="57377-267">Du kan öka eller minska hello antalet minuter när hello loggar överförs tooyour storage-konto genom att ändra hello **överför Period (min)** värde.</span><span class="sxs-lookup"><span data-stu-id="57377-267">You can increase or decrease hello number of minutes when hello logs are transferred tooyour storage account by changing hello **Transfer Period (min)** value.</span></span>

<span data-ttu-id="57377-268">hello händelser har hämtats från händelsekällor och händelsemanifest som du anger.</span><span class="sxs-lookup"><span data-stu-id="57377-268">hello events are captured from event sources and event manifests that you specify.</span></span> <span data-ttu-id="57377-269">toospecify en händelsekälla, ange ett namn i hello **händelsekällor** avsnittet och väljer sedan hello **lägga till händelsekällan** knappen.</span><span class="sxs-lookup"><span data-stu-id="57377-269">toospecify an event source, enter a name in hello **Event Sources** section and then choose hello **Add Event Source** button.</span></span> <span data-ttu-id="57377-270">På liknande sätt kan du ange ett manifest för händelsen i hello **händelse visar** avsnittet och väljer sedan hello **Lägg till händelse Manifest** knappen.</span><span class="sxs-lookup"><span data-stu-id="57377-270">Similarly, you can specify an event manifest in hello **Event Manifests** section and then choose hello **Add Event Manifest** button.</span></span>

  ![ETW-loggar](./media/vs-azure-tools-diagnostics-for-cloud-services-and-virtual-machines/IC766025.png)

  <span data-ttu-id="57377-272">hello ETW framework stöds i ASP.NET via klasser i hello [System.Diagnostics.aspx] (https://msdn.microsoft.com/library/system.diagnostics (v=vs.110) namnområde.</span><span class="sxs-lookup"><span data-stu-id="57377-272">hello ETW framework is supported in ASP.NET through classes in hello [System.Diagnostics.aspx](https://msdn.microsoft.com/library/system.diagnostics(v=vs.110) namespace.</span></span> <span data-ttu-id="57377-273">Hej Microsoft.WindowsAzure.Diagnostics namnområde som ärver från och utökar standard [System.Diagnostics.aspx] (https://msdn.microsoft.com/library/system.diagnostics (v=vs.110) klasser, aktiverar hello användning av () [System.Diagnostics.aspx] https://msdn.microsoft.com/library/system.Diagnostics (v=vs.110) som ett loggningsramverk i hello Azure-miljön.</span><span class="sxs-lookup"><span data-stu-id="57377-273">hello Microsoft.WindowsAzure.Diagnostics namespace, which inherits from and extends standard [System.Diagnostics.aspx](https://msdn.microsoft.com/library/system.diagnostics(v=vs.110) classes, enables hello use of [System.Diagnostics.aspx](https://msdn.microsoft.com/library/system.diagnostics(v=vs.110) as a logging framework in hello Azure environment.</span></span> <span data-ttu-id="57377-274">Mer information finns i [ta kontroll av loggning och spårning i Microsoft Azure](https://msdn.microsoft.com/magazine/ff714589.aspx) och [aktiverar diagnostik i Azure-molntjänster och virtuella datorer](cloud-services/cloud-services-dotnet-diagnostics.md).</span><span class="sxs-lookup"><span data-stu-id="57377-274">For more information, see [Take Control of Logging and Tracing in Microsoft Azure](https://msdn.microsoft.com/magazine/ff714589.aspx) and [Enabling Diagnostics in Azure Cloud Services and Virtual Machines](cloud-services/cloud-services-dotnet-diagnostics.md).</span></span>

### <a name="crash-dumps"></a><span data-ttu-id="57377-275">Krasch minnesdumpar</span><span class="sxs-lookup"><span data-stu-id="57377-275">Crash dumps</span></span>
<span data-ttu-id="57377-276">Om du vill toocapture information om när en rollinstans kraschar, Välj hello **Aktivera överföring av krascher Dumpar** kryssrutan.</span><span class="sxs-lookup"><span data-stu-id="57377-276">If you want toocapture information about when a role instance crashes, select hello **Enable transfer of Crash Dumps** check box.</span></span> <span data-ttu-id="57377-277">(Eftersom ASP.NET hanterar de flesta undantag, detta är vanligtvis bara användbar för arbetsroller.) Du kan öka eller minska hello procentandelen lagring utrymme dedikerade toohello krashdumpar genom att ändra hello **Directory kvoten (%)** värde.</span><span class="sxs-lookup"><span data-stu-id="57377-277">(Because ASP.NET handles most exceptions, this is generally useful only for worker roles.) You can increase or decrease hello percentage of storage space devoted toohello crash dumps by changing hello **Directory Quota (%)** value.</span></span> <span data-ttu-id="57377-278">Du kan ändra hello lagringsbehållaren där hello krascher minnesdumpar lagras och du kan välja om du vill toocapture en **fullständig** eller **Mini** dumpen.</span><span class="sxs-lookup"><span data-stu-id="57377-278">You can change hello storage container where hello crash dumps are stored, and you can select whether you want toocapture a **Full** or **Mini** dump.</span></span>

<span data-ttu-id="57377-279">hello processer som spåras visas.</span><span class="sxs-lookup"><span data-stu-id="57377-279">hello processes currently being tracked are listed.</span></span> <span data-ttu-id="57377-280">Markera kryssrutorna för hello för hello processer som du vill toocapture.</span><span class="sxs-lookup"><span data-stu-id="57377-280">Select hello check boxes for hello processes that you want toocapture.</span></span> <span data-ttu-id="57377-281">tooadd en annan process toohello lista, ange hello processnamn och välj hello **lägga till processen** knappen.</span><span class="sxs-lookup"><span data-stu-id="57377-281">tooadd another process toohello list, enter hello process name and then choose hello **Add Process** button.</span></span>

  ![Krasch minnesdumpar](./media/vs-azure-tools-diagnostics-for-cloud-services-and-virtual-machines/IC766026.png)

  <span data-ttu-id="57377-283">Se [ta kontroll av loggning och spårning i Microsoft Azure](https://msdn.microsoft.com/magazine/ff714589.aspx) och [Microsoft Azure Diagnostics del 4: Anpassad loggning komponenter och Azure Diagnostics 1.3 ändringar](http://justazure.com/microsoft-azure-diagnostics-part-4-custom-logging-components-azure-diagnostics-1-3-changes/) för mer information.</span><span class="sxs-lookup"><span data-stu-id="57377-283">See [Take Control of Logging and Tracing in Microsoft Azure](https://msdn.microsoft.com/magazine/ff714589.aspx) and [Microsoft Azure Diagnostics Part 4: Custom Logging Components and Azure Diagnostics 1.3 Changes](http://justazure.com/microsoft-azure-diagnostics-part-4-custom-logging-components-azure-diagnostics-1-3-changes/) for more information.</span></span>

## <a name="view-hello-diagnostics-data"></a><span data-ttu-id="57377-284">Visa hello diagnostikdata</span><span class="sxs-lookup"><span data-stu-id="57377-284">View hello diagnostics data</span></span>
<span data-ttu-id="57377-285">När du har lagrat hello diagnostikdata för en molnbaserad tjänst eller en virtuell dator, kan du visa den.</span><span class="sxs-lookup"><span data-stu-id="57377-285">After you’ve collected hello diagnostics data for a cloud service or a virtual machine, you can view it.</span></span>

### <a name="tooview-cloud-service-diagnostics-data"></a><span data-ttu-id="57377-286">diagnostikdata för tooview cloud service</span><span class="sxs-lookup"><span data-stu-id="57377-286">tooview cloud service diagnostics data</span></span>
1. <span data-ttu-id="57377-287">Distribuera din molntjänst som vanligt och sedan köra den.</span><span class="sxs-lookup"><span data-stu-id="57377-287">Deploy your cloud service as usual and then run it.</span></span>
2. <span data-ttu-id="57377-288">Du kan visa hello diagnostikdata i en rapport som Visual Studio genererar eller tabeller i ditt lagringskonto.</span><span class="sxs-lookup"><span data-stu-id="57377-288">You can view hello diagnostics data in either a report that Visual Studio generates or tables in your storage account.</span></span> <span data-ttu-id="57377-289">Öppna tooview hello data i en rapport **Cloud Explorer** eller **Server Explorer**, öppna hello snabbmenyn för hello nod för hello roll som du är intresserad av och välj sedan **visa diagnostikdata** .</span><span class="sxs-lookup"><span data-stu-id="57377-289">tooview hello data in a report, open **Cloud Explorer** or **Server Explorer**, open hello shortcut menu of hello node for hello role that interests you, and then choose **View Diagnostic Data**.</span></span>
   
    ![Visa diagnostik-Data](./media/vs-azure-tools-diagnostics-for-cloud-services-and-virtual-machines/IC748912.png)
   
    <span data-ttu-id="57377-291">En rapport som visar hello tillgängliga data visas.</span><span class="sxs-lookup"><span data-stu-id="57377-291">A report that shows hello available data appears.</span></span>
   
    ![Microsoft Azure Diagnostics rapporten i Visual Studio](./media/vs-azure-tools-diagnostics-for-cloud-services-and-virtual-machines/IC796666.png)
   
    <span data-ttu-id="57377-293">Om hello senaste data inte visas kan kanske du toowait för hello överföring period tooelapse.</span><span class="sxs-lookup"><span data-stu-id="57377-293">If hello most recent data doesn't appear, you might have toowait for hello transfer period tooelapse.</span></span>
   
    <span data-ttu-id="57377-294">Välj hello **uppdatera** länka tooimmediately uppdatering hello data eller välj ett intervall i hello **uppdatera** nedrullningsbara listan rutan toohave hello data uppdateras automatiskt.</span><span class="sxs-lookup"><span data-stu-id="57377-294">Choose hello **Refresh** link tooimmediately update hello data, or choose an interval in hello **Auto-Refresh** dropdown list box toohave hello data updated automatically.</span></span> <span data-ttu-id="57377-295">tooexport hello Feldata, Välj hello **exportera tooCSV** knappen toocreate en CSV-fil som kan öppnas i ett kalkylblad.</span><span class="sxs-lookup"><span data-stu-id="57377-295">tooexport hello error data, choose hello **Export tooCSV** button toocreate a comma-separated value file you can open in a spreadsheet.</span></span>
   
    <span data-ttu-id="57377-296">I **Cloud Explorer** eller **Server Explorer**, öppna hello storage-konto som är kopplad till hello-distribution.</span><span class="sxs-lookup"><span data-stu-id="57377-296">In **Cloud Explorer** or **Server Explorer**, open hello storage account that's associated with hello deployment.</span></span>
3. <span data-ttu-id="57377-297">Öppna hello diagnostik tabeller i hello tabell viewer och granska hello data som du samlade in.</span><span class="sxs-lookup"><span data-stu-id="57377-297">Open hello diagnostics tables in hello table viewer, and then review hello data that you collected.</span></span> <span data-ttu-id="57377-298">Du kan öppna en blob-behållare för IIS-loggar och anpassade loggar.</span><span class="sxs-lookup"><span data-stu-id="57377-298">For IIS logs and custom logs, you can open a blob container.</span></span> <span data-ttu-id="57377-299">Du kan hitta hello tabell eller blob-behållare som innehåller hello data som intresserar dig genom att granska hello i den följande tabellen.</span><span class="sxs-lookup"><span data-stu-id="57377-299">By reviewing hello following table, you can find hello table or blob container that contains hello data that interests you.</span></span> <span data-ttu-id="57377-300">Dessutom toohello data för som loggfilen, hello tabellposter innehålla EventTickCount, DeploymentId, roll och RoleInstance toohelp du identifiera vilka virtuella datorer och rollen som har genererats hello och när.</span><span class="sxs-lookup"><span data-stu-id="57377-300">In addition toohello data for that log file, hello table entries contain EventTickCount, DeploymentId, Role, and RoleInstance toohelp you identify what virtual machine and role generated hello data and when.</span></span> 
   
   | <span data-ttu-id="57377-301">Diagnostikdata</span><span class="sxs-lookup"><span data-stu-id="57377-301">Diagnostic data</span></span> | <span data-ttu-id="57377-302">Beskrivning</span><span class="sxs-lookup"><span data-stu-id="57377-302">Description</span></span> | <span data-ttu-id="57377-303">Plats</span><span class="sxs-lookup"><span data-stu-id="57377-303">Location</span></span> |
   | --- | --- | --- |
   | <span data-ttu-id="57377-304">Programloggar</span><span class="sxs-lookup"><span data-stu-id="57377-304">Application Logs</span></span> |<span data-ttu-id="57377-305">Loggar som genereras av din kod genom att anropa metoder i hello System.Diagnostics.Trace klass.</span><span class="sxs-lookup"><span data-stu-id="57377-305">Logs that your code generates by calling methods of hello System.Diagnostics.Trace class.</span></span> |<span data-ttu-id="57377-306">WADLogsTable</span><span class="sxs-lookup"><span data-stu-id="57377-306">WADLogsTable</span></span> |
   | <span data-ttu-id="57377-307">Händelseloggar</span><span class="sxs-lookup"><span data-stu-id="57377-307">Event Logs</span></span> |<span data-ttu-id="57377-308">Dessa data är från hello Windows-händelseloggar på hello virtuella datorer.</span><span class="sxs-lookup"><span data-stu-id="57377-308">This data is from hello Windows event logs on hello virtual machines.</span></span> <span data-ttu-id="57377-309">Windows lagrar information i dessa loggar, men program och tjänster som också använder dem tooreport fel eller logga information.</span><span class="sxs-lookup"><span data-stu-id="57377-309">Windows stores information in these logs, but applications and services also use them tooreport errors or log information.</span></span> |<span data-ttu-id="57377-310">WADWindowsEventLogsTable</span><span class="sxs-lookup"><span data-stu-id="57377-310">WADWindowsEventLogsTable</span></span> |
   | <span data-ttu-id="57377-311">Prestandaräknare</span><span class="sxs-lookup"><span data-stu-id="57377-311">Performance Counters</span></span> |<span data-ttu-id="57377-312">Du kan samla in data på alla prestandaräknare som är tillgänglig på hello virtuella datorn.</span><span class="sxs-lookup"><span data-stu-id="57377-312">You can collect data on any performance counter that’s available on hello virtual machine.</span></span> <span data-ttu-id="57377-313">hello operativsystemet tillhandahåller prestandaräknare som innehåller många statistik, till exempel minne användnings- och tid.</span><span class="sxs-lookup"><span data-stu-id="57377-313">hello operating system provides performance counters, which include many statistics such as memory usage and processor time.</span></span> |<span data-ttu-id="57377-314">WADPerformanceCountersTable</span><span class="sxs-lookup"><span data-stu-id="57377-314">WADPerformanceCountersTable</span></span> |
   | <span data-ttu-id="57377-315">Infrastruktur-loggar</span><span class="sxs-lookup"><span data-stu-id="57377-315">Infrastructure Logs</span></span> |<span data-ttu-id="57377-316">Dessa loggar genereras från hello diagnostik infrastruktur sig själv.</span><span class="sxs-lookup"><span data-stu-id="57377-316">These logs are generated from hello diagnostics infrastructure itself.</span></span> |<span data-ttu-id="57377-317">WADDiagnosticInfrastructureLogsTable</span><span class="sxs-lookup"><span data-stu-id="57377-317">WADDiagnosticInfrastructureLogsTable</span></span> |
   | <span data-ttu-id="57377-318">IIS-loggar</span><span class="sxs-lookup"><span data-stu-id="57377-318">IIS Logs</span></span> |<span data-ttu-id="57377-319">De här loggarna registrera webbegäranden.</span><span class="sxs-lookup"><span data-stu-id="57377-319">These logs record web requests.</span></span> <span data-ttu-id="57377-320">Om din molntjänst hämtar en stor mängd trafik, kan dessa loggar vara ganska långa, så du bör samla in och lagra dessa data endast när du behöver den.</span><span class="sxs-lookup"><span data-stu-id="57377-320">If your cloud service gets a significant amount of traffic, these logs can be quite lengthy, so you should collect and store this data only when you need it.</span></span> |<span data-ttu-id="57377-321">Du kan hitta misslyckades begäran loggas i hello blob-behållare under bomullstuss iis failedreqlogs under en sökväg för den distribution, roll och instans.</span><span class="sxs-lookup"><span data-stu-id="57377-321">You can find failed-request logs in hello blob container under wad-iis-failedreqlogs under a path for that deployment, role, and instance.</span></span> <span data-ttu-id="57377-322">Du kan hitta klar loggar under bomullstuss-iis-loggfiler.</span><span class="sxs-lookup"><span data-stu-id="57377-322">You can find complete logs under wad-iis-logfiles.</span></span> <span data-ttu-id="57377-323">För varje fil skapas transaktioner i hello WADDirectories tabell.</span><span class="sxs-lookup"><span data-stu-id="57377-323">Entries for each file are made in hello WADDirectories table.</span></span> |
   | <span data-ttu-id="57377-324">Krasch minnesdumpar</span><span class="sxs-lookup"><span data-stu-id="57377-324">Crash dumps</span></span> |<span data-ttu-id="57377-325">Den här informationen innehåller binära avbildningar av din molntjänst processen (vanligtvis en arbetsroll).</span><span class="sxs-lookup"><span data-stu-id="57377-325">This information provides binary images of your cloud service’s process (typically a worker role).</span></span> |<span data-ttu-id="57377-326">bomullstuss-crush-Dumpar blob-behållare</span><span class="sxs-lookup"><span data-stu-id="57377-326">wad-crush-dumps blob container</span></span> |
   | <span data-ttu-id="57377-327">Anpassade loggfiler</span><span class="sxs-lookup"><span data-stu-id="57377-327">Custom log files</span></span> |<span data-ttu-id="57377-328">Loggar av data som du fördefinierade.</span><span class="sxs-lookup"><span data-stu-id="57377-328">Logs of data that you predefined.</span></span> |<span data-ttu-id="57377-329">Du kan ange i koden hello platsen för anpassade loggfiler i ditt lagringskonto.</span><span class="sxs-lookup"><span data-stu-id="57377-329">You can specify in code hello location of custom log files in your storage account.</span></span> <span data-ttu-id="57377-330">Du kan till exempel ange en anpassad blob-behållare.</span><span class="sxs-lookup"><span data-stu-id="57377-330">For example, you can specify a custom blob container.</span></span> |
4. <span data-ttu-id="57377-331">Om data av valfri typ trunkeras kan du öka hello buffert för datatypen eller förkorta hello intervallet mellan dataöverföringar från hello virtuella tooyour storage-konto.</span><span class="sxs-lookup"><span data-stu-id="57377-331">If data of any type is truncated, you can try increasing hello buffer for that data type or shortening hello interval between transfers of data from hello virtual machine tooyour storage account.</span></span>
5. <span data-ttu-id="57377-332">(valfritt) Rensa data från hello lagring kontot ibland tooreduce totala lagringskostnader.</span><span class="sxs-lookup"><span data-stu-id="57377-332">(optional) Purge data from hello storage account occasionally tooreduce overall storage costs.</span></span>
6. <span data-ttu-id="57377-333">När du gör en fullständig distribution hello diagnostics.cscfg filen (.wadcfgx för Azure SDK 2.5) uppdateras i Azure och din molntjänst hämtar ändringar tooyour diagnostik konfiguration.</span><span class="sxs-lookup"><span data-stu-id="57377-333">When you do a full deployment, hello diagnostics.cscfg file (.wadcfgx for Azure SDK 2.5) is updated in Azure, and your cloud service picks up any changes tooyour diagnostics configuration.</span></span> <span data-ttu-id="57377-334">Om du, i stället uppdaterar en befintlig distribution, uppdateras inte hello .cscfg-filen i Azure.</span><span class="sxs-lookup"><span data-stu-id="57377-334">If you, instead, update an existing deployment, hello .cscfg file isn’t updated in Azure.</span></span> <span data-ttu-id="57377-335">Du kan fortfarande ändra diagnostikinställningarna, men genom att följa hello stegen i nästa avsnitt om hello.</span><span class="sxs-lookup"><span data-stu-id="57377-335">You can still change diagnostics settings, though, by following hello steps in hello next section.</span></span> <span data-ttu-id="57377-336">Mer information om hur du utför en fullständig distribution uppdaterar en befintlig distribution finns [Publiceringsguiden för Azure-program](vs-azure-tools-publish-azure-application-wizard.md).</span><span class="sxs-lookup"><span data-stu-id="57377-336">For more information about performing a full deployment and updating an existing deployment, see [Publish Azure Application Wizard](vs-azure-tools-publish-azure-application-wizard.md).</span></span>

### <a name="tooview-virtual-machine-diagnostics-data"></a><span data-ttu-id="57377-337">tooview diagnostikdata för virtuell dator</span><span class="sxs-lookup"><span data-stu-id="57377-337">tooview virtual machine diagnostics data</span></span>
1. <span data-ttu-id="57377-338">Välj på snabbmenyn för virtuell dator är hello hello **visa diagnostikdata**.</span><span class="sxs-lookup"><span data-stu-id="57377-338">On hello shortcut menu for hello virtual machine, choose **View Diagnostics Data**.</span></span>
   
    ![Visa diagnostik-data i Azure-dator](./media/vs-azure-tools-diagnostics-for-cloud-services-and-virtual-machines/IC766027.png)
   
    <span data-ttu-id="57377-340">Då öppnas hello **diagnostik sammanfattning** fönster.</span><span class="sxs-lookup"><span data-stu-id="57377-340">This opens hello **Diagnostics summary** window.</span></span>
   
    ![Virtuell dator i Azure diagnostics sammanfattning](./media/vs-azure-tools-diagnostics-for-cloud-services-and-virtual-machines/IC796667.png)  
   
    <span data-ttu-id="57377-342">Om hello senaste data inte visas kan kanske du toowait för hello överföring period tooelapse.</span><span class="sxs-lookup"><span data-stu-id="57377-342">If hello most recent data doesn't appear, you might have toowait for hello transfer period tooelapse.</span></span>
   
    <span data-ttu-id="57377-343">Välj hello **uppdatera** länka tooimmediately uppdatering hello data eller välj ett intervall i hello **uppdatera** nedrullningsbara listan rutan toohave hello data uppdateras automatiskt.</span><span class="sxs-lookup"><span data-stu-id="57377-343">Choose hello **Refresh** link tooimmediately update hello data, or choose an interval in hello **Auto-Refresh** dropdown list box toohave hello data updated automatically.</span></span> <span data-ttu-id="57377-344">tooexport hello Feldata, Välj hello **exportera tooCSV** knappen toocreate en CSV-fil som kan öppnas i ett kalkylblad.</span><span class="sxs-lookup"><span data-stu-id="57377-344">tooexport hello error data, choose hello **Export tooCSV** button toocreate a comma-separated value file you can open in a spreadsheet.</span></span>

## <a name="configure-cloud-service-diagnostics-after-deployment"></a><span data-ttu-id="57377-345">Konfigurera cloud service diagnostik efter distribution</span><span class="sxs-lookup"><span data-stu-id="57377-345">Configure cloud service diagnostics after deployment</span></span>
<span data-ttu-id="57377-346">Om du vill veta problem med en molnbaserad tjänst som redan körs, kanske du vill toocollect data som du inte har angett innan du ursprungligen distribuerade hello-rollen.</span><span class="sxs-lookup"><span data-stu-id="57377-346">If you're investigating a problem with a cloud service that already running, you might want toocollect data that you didn't specify before you originally deployed hello role.</span></span> <span data-ttu-id="57377-347">Du kan då starta toocollect dessa data med hjälp av hello inställningar i Server Explorer.</span><span class="sxs-lookup"><span data-stu-id="57377-347">In this case, you can start toocollect that data by using hello settings in Server Explorer.</span></span> <span data-ttu-id="57377-348">Du kan konfigurera diagnostik för en enda instans eller alla hello-instanser i en roll, beroende på om du öppnar dialogrutan diagnostik konfiguration av hello hello snabbmenyn hello-instans eller en hello roll.</span><span class="sxs-lookup"><span data-stu-id="57377-348">You can configure diagnostics for either a single instance or all hello instances in a role, depending on whether you open hello Diagnostics Configuration dialog box from hello shortcut menu for hello instance or hello role.</span></span> <span data-ttu-id="57377-349">Om du konfigurerar hello rollen nod, tillämpas ändringar tooall instanser.</span><span class="sxs-lookup"><span data-stu-id="57377-349">If you configure hello role node, any changes apply tooall instances.</span></span> <span data-ttu-id="57377-350">Om du konfigurerar hello instans nod, tillämpas ändringar toothat-instans.</span><span class="sxs-lookup"><span data-stu-id="57377-350">If you configure hello instance node, any changes apply toothat instance only.</span></span>

### <a name="tooconfigure-diagnostics-for-a-running-cloud-service"></a><span data-ttu-id="57377-351">tooconfigure diagnostik för en molnbaserad tjänst som körs</span><span class="sxs-lookup"><span data-stu-id="57377-351">tooconfigure diagnostics for a running cloud service</span></span>
1. <span data-ttu-id="57377-352">I Server Explorer expanderar du hello **molntjänster** nod, och sedan Expandera noderna toolocate hello roll eller instans som du vill tooinvestigate eller båda.</span><span class="sxs-lookup"><span data-stu-id="57377-352">In Server Explorer, expand hello **Cloud Services** node, and then expand nodes toolocate hello role or instance that you want tooinvestigate or both.</span></span>
   
    ![Konfigurera diagnostik](./media/vs-azure-tools-diagnostics-for-cloud-services-and-virtual-machines/IC748913.png)
2. <span data-ttu-id="57377-354">Välj på hello snabbmenyn för en instans noden eller en roll **uppdatera diagnostikinställningar**, och välj sedan hello diagnostikinställningarna som du vill toocollect.</span><span class="sxs-lookup"><span data-stu-id="57377-354">On hello shortcut menu for an instance node or a role node, choose **Update Diagnostics Settings**, and then choose hello diagnostic settings that you want toocollect.</span></span>
   
    <span data-ttu-id="57377-355">Information om konfigurationsinställningar för hello finns **konfigurera diagnostik-datakällor** i det här avsnittet.</span><span class="sxs-lookup"><span data-stu-id="57377-355">For information about hello configuration settings, see **Configure diagnostics data sources** in this topic.</span></span> <span data-ttu-id="57377-356">Information om hur tooview hello diagnostikdata finns **visa hello diagnostikdata** i det här avsnittet.</span><span class="sxs-lookup"><span data-stu-id="57377-356">For information about how tooview hello diagnostics data, see **View hello diagnostics data** in this topic.</span></span>
   
    <span data-ttu-id="57377-357">Om du ändrar datainsamling i **Server Explorer**, ändringarna gäller tills du distribuerar fullständigt Molntjänsten.</span><span class="sxs-lookup"><span data-stu-id="57377-357">If you change data collection in **Server Explorer**, these changes remain in effect until you fully redeploy your cloud service.</span></span> <span data-ttu-id="57377-358">Om du använder hello standard Publiceringsinställningar hello ändringar är inte över, eftersom hello standard publicera inställningen är tooupdate hello befintlig distribution, i stället för att göra en fullständig omdistributionen.</span><span class="sxs-lookup"><span data-stu-id="57377-358">If you use hello default publish settings, hello changes are not overwritten, since hello default publish setting is tooupdate hello existing deployment, rather than do a full redeployment.</span></span> <span data-ttu-id="57377-359">toomake att hello inställningar Rensa vid tidpunkten för distribution går toohello **avancerade inställningar** fliken i hello publicera guiden och avmarkera hello **uppdatering av programdistribution** kryssrutan.</span><span class="sxs-lookup"><span data-stu-id="57377-359">toomake sure hello settings clear at deployment time, go toohello **Advanced Settings** tab in hello Publish wizard and clear hello **Deployment update** checkbox.</span></span> <span data-ttu-id="57377-360">När du distribuerar med kryssrutan avmarkerad återställas hello inställningar toothose i hello .wadcfgx (eller .wadcfg) som angetts via hello Egenskapsredigeraren för hello roll.</span><span class="sxs-lookup"><span data-stu-id="57377-360">When you redeploy with that checkbox cleared, hello settings revert toothose in hello .wadcfgx (or .wadcfg) file as set through hello Properties editor for hello role.</span></span> <span data-ttu-id="57377-361">Om du uppdaterar din distribution, behåller Azure hello gamla inställningar.</span><span class="sxs-lookup"><span data-stu-id="57377-361">If you update your deployment, Azure keeps hello old settings.</span></span>

## <a name="troubleshoot-azure-cloud-service-issues"></a><span data-ttu-id="57377-362">Felsökning av problem med Azure cloud service</span><span class="sxs-lookup"><span data-stu-id="57377-362">Troubleshoot Azure cloud service issues</span></span>
<span data-ttu-id="57377-363">Om du får problem med ditt molntjänstprojekt, till exempel en roll som hämtar fastnat i statusen ”upptagen” återanvänds, eller flera utlöser ett internt serverfel finns det verktyg och tekniker som du kan använda toodiagnose och åtgärda problemen.</span><span class="sxs-lookup"><span data-stu-id="57377-363">If you experience problems with your cloud service projects, such as a role that gets stuck in a "busy" status, repeatedly recycles, or throws an internal server error, there are tools and techniques you can use toodiagnose and fix these problems.</span></span> <span data-ttu-id="57377-364">Exempel på vanliga problem och lösningar specifika, samt en översikt över hello begrepp och verktyg användas toodiagnose och åtgärda dessa fel finns [Compute diagnostikdata i Azure PaaS](http://blogs.msdn.com/b/kwill/archive/2013/08/09/windows-azure-paas-compute-diagnostics-data.aspx).</span><span class="sxs-lookup"><span data-stu-id="57377-364">For specific examples of common problems and solutions, as well as an overview of hello concepts and tools used toodiagnose and fix such errors, see [Azure PaaS Compute Diagnostics Data](http://blogs.msdn.com/b/kwill/archive/2013/08/09/windows-azure-paas-compute-diagnostics-data.aspx).</span></span>

## <a name="q--a"></a><span data-ttu-id="57377-365">Frågor och svar</span><span class="sxs-lookup"><span data-stu-id="57377-365">Q & A</span></span>
<span data-ttu-id="57377-366">**Vad är hello buffertstorlek och hur stor ska den vara?**</span><span class="sxs-lookup"><span data-stu-id="57377-366">**What is hello buffer size, and how large should it be?**</span></span>

<span data-ttu-id="57377-367">På varje virtuell dator-instans begränsa kvoter hur mycket diagnostiska data kan lagras på hello lokala filsystem.</span><span class="sxs-lookup"><span data-stu-id="57377-367">On each virtual machine instance, quotas limit how much diagnostic data can be stored on hello local file system.</span></span> <span data-ttu-id="57377-368">Dessutom kan ange du en buffertstorlek för varje typ av diagnostiska data, som är tillgänglig.</span><span class="sxs-lookup"><span data-stu-id="57377-368">In addition, you specify a buffer size for each type of diagnostic data that's available.</span></span> <span data-ttu-id="57377-369">Den här buffertstorlek fungerar som en individuell kvot för den typ av data.</span><span class="sxs-lookup"><span data-stu-id="57377-369">This buffer size acts like an individual quota for that type of data.</span></span> <span data-ttu-id="57377-370">Du kan fastställa genom att kontrollera hello längst ned i dialogrutan för hello hello övergripande kvoten och hello mängden minne som finns kvar.</span><span class="sxs-lookup"><span data-stu-id="57377-370">By checking hello bottom of hello dialog box, you can determine hello overall quota and hello amount of memory that remains.</span></span> <span data-ttu-id="57377-371">Om du anger större buffertar eller fler typer av data, hanterar du hello övergripande kvoten.</span><span class="sxs-lookup"><span data-stu-id="57377-371">If you specify larger buffers or more types of data, you'll approach hello overall quota.</span></span> <span data-ttu-id="57377-372">Du kan ändra hello övergripande kvot genom att ändra hello diagnostics.wadcfg/.wadcfgx konfigurationsfilen.</span><span class="sxs-lookup"><span data-stu-id="57377-372">You can change hello overall quota by modifying hello diagnostics.wadcfg/.wadcfgx configuration file.</span></span> <span data-ttu-id="57377-373">hello diagnostik data lagras på hello samma filsystem som programdata, så om programmet använder mycket diskutrymme, bör du öka hello övergripande diagnostik kvoten.</span><span class="sxs-lookup"><span data-stu-id="57377-373">hello diagnostics data is stored on hello same filesystem as your application’s data, so if your application uses a lot of disk space, you shouldn’t increase hello overall diagnostics quota.</span></span>

<span data-ttu-id="57377-374">**Vad är hello överföring period och hur lång tid ska den vara?**</span><span class="sxs-lookup"><span data-stu-id="57377-374">**What is hello transfer period, and how long should it be?**</span></span>

<span data-ttu-id="57377-375">hello överföringsperioden är hello mängden tid som förflutit mellan data samlar in.</span><span class="sxs-lookup"><span data-stu-id="57377-375">hello transfer period is hello amount of time that elapses between data captures.</span></span> <span data-ttu-id="57377-376">Efter varje överföring period flyttas data från hello lokala filsystem på en virtuell dator tootables i ditt lagringskonto.</span><span class="sxs-lookup"><span data-stu-id="57377-376">After each transfer period, data is moved from hello local filesystem on a virtual machine tootables in your storage account.</span></span> <span data-ttu-id="57377-377">Om hello mängden data som samlas in överskrider kvoten hello innan hello slutet av överföringsperioden, ignoreras äldre data.</span><span class="sxs-lookup"><span data-stu-id="57377-377">If hello amount of data that's collected exceeds hello quota before hello end of a transfer period, older data is discarded.</span></span> <span data-ttu-id="57377-378">Om du är att förlora data eftersom dina data överskrider buffertstorleken hello eller hello övergripande kvoten kanske du vill toodecrease hello överföring period.</span><span class="sxs-lookup"><span data-stu-id="57377-378">You might want toodecrease hello transfer period if you're losing data because your data exceeds hello buffer size or hello overall quota.</span></span>

<span data-ttu-id="57377-379">**Vilken tidszon är hello tidsstämplar i?**</span><span class="sxs-lookup"><span data-stu-id="57377-379">**What time zone are hello time stamps in?**</span></span>

<span data-ttu-id="57377-380">hello tidsstämplar finns i hello lokala tidszon hello datacenter som är värd för Molntjänsten.</span><span class="sxs-lookup"><span data-stu-id="57377-380">hello time stamps are in hello local time zone of hello data center that hosts your cloud service.</span></span> <span data-ttu-id="57377-381">hello används följande tre timestamp-kolumner i tabellerna hello.</span><span class="sxs-lookup"><span data-stu-id="57377-381">hello following three timestamp columns in hello log tables are used.</span></span>

* <span data-ttu-id="57377-382">**PreciseTimeStamp** hello ETW tidsstämpeln för hello-händelse.</span><span class="sxs-lookup"><span data-stu-id="57377-382">**PreciseTimeStamp** is hello ETW timestamp of hello event.</span></span> <span data-ttu-id="57377-383">Det vill säga loggas hello tid hello händelsen hello-klient.</span><span class="sxs-lookup"><span data-stu-id="57377-383">That is, hello time hello event is logged from hello client.</span></span>
* <span data-ttu-id="57377-384">**TIDSSTÄMPEL** PreciseTimeStamp avrundas nedåt toohello överför frekvens gräns.</span><span class="sxs-lookup"><span data-stu-id="57377-384">**TIMESTAMP** is PreciseTimeStamp rounded down toohello upload frequency boundary.</span></span> <span data-ttu-id="57377-385">Så om din överföringsfrekvensen är 5 minuter och hello händelse tid 00:17:12, blir TIDSSTÄMPEL 00:15:00.</span><span class="sxs-lookup"><span data-stu-id="57377-385">So, if your upload frequency is 5 minutes and hello event time 00:17:12, TIMESTAMP will be 00:15:00.</span></span>
* <span data-ttu-id="57377-386">**Tidsstämpel** hello tidsstämpeln på vilka hello entiteten skapades i hello Azure-tabellen.</span><span class="sxs-lookup"><span data-stu-id="57377-386">**Timestamp** is hello timestamp at which hello entity was created in hello Azure table.</span></span>

<span data-ttu-id="57377-387">**Hur hanterar jag kostnader vid insamling av diagnostikinformation?**</span><span class="sxs-lookup"><span data-stu-id="57377-387">**How do I manage costs when collecting diagnostic information?**</span></span>

<span data-ttu-id="57377-388">hello standardinställningar (**Certifikatutfärdarnivå** ställa in också**fel** och **överföring period** ställa in också**1 minut**) är utformad toominimize kostnad.</span><span class="sxs-lookup"><span data-stu-id="57377-388">hello default settings (**Log level** set too**Error** and **Transfer period** set too**1 minute**) are designed toominimize cost.</span></span> <span data-ttu-id="57377-389">Compute-kostnaderna ökar om du samlar in mer diagnostikdata och minska hello överföring period.</span><span class="sxs-lookup"><span data-stu-id="57377-389">Your compute costs will increase if you collect more diagnostic data or decrease hello transfer period.</span></span> <span data-ttu-id="57377-390">Samla inte in mer data än vad du behöver och Glöm inte toodisable datainsamling när du inte längre behöver.</span><span class="sxs-lookup"><span data-stu-id="57377-390">Don’t collect more data than you need, and don’t forget toodisable data collection when you no longer need it.</span></span> <span data-ttu-id="57377-391">Du kan alltid aktivera det igen, även vid körning, som visas i hello föregående avsnitt.</span><span class="sxs-lookup"><span data-stu-id="57377-391">You can always enable it again, even at runtime, as shown in hello previous section.</span></span>

<span data-ttu-id="57377-392">**Hur samlar misslyckades begäran loggar från IIS?**</span><span class="sxs-lookup"><span data-stu-id="57377-392">**How do I collect failed-request logs from IIS?**</span></span>

<span data-ttu-id="57377-393">Som standard IIS inte samla in loggar misslyckades-begäran.</span><span class="sxs-lookup"><span data-stu-id="57377-393">By default, IIS doesn’t collect failed-request logs.</span></span> <span data-ttu-id="57377-394">Du kan konfigurera IIS toocollect dem om du redigerar hello web.config-filen för webbrollen.</span><span class="sxs-lookup"><span data-stu-id="57377-394">You can configure IIS toocollect them if you edit hello web.config file for your web role.</span></span>

<span data-ttu-id="57377-395">**Jag får inte spårningsinformation från RoleEntryPoint metoder som OnStart. Vad är fel?**</span><span class="sxs-lookup"><span data-stu-id="57377-395">**I’m not getting trace information from RoleEntryPoint methods like OnStart. What’s wrong?**</span></span>

<span data-ttu-id="57377-396">hello-metoder för RoleEntryPoint kallas hello gäller WAIISHost.exe inte IIS.</span><span class="sxs-lookup"><span data-stu-id="57377-396">hello methods of RoleEntryPoint are called in hello context of WAIISHost.exe, not IIS.</span></span> <span data-ttu-id="57377-397">Därför hello konfigurationsinformation i web.config som normalt inte gäller aktiverar spårning.</span><span class="sxs-lookup"><span data-stu-id="57377-397">Therefore, hello configuration information in web.config that normally enables tracing doesn’t apply.</span></span> <span data-ttu-id="57377-398">tooresolve problemet, Lägg till en .config-fil tooyour webbrollsprojektet och namnge hello filen toomatch hello utdata sammansättningen som innehåller hello RoleEntryPoint kod.</span><span class="sxs-lookup"><span data-stu-id="57377-398">tooresolve this issue, add a .config file tooyour web role project, and name hello file toomatch hello output assembly that contains hello RoleEntryPoint code.</span></span> <span data-ttu-id="57377-399">I hello standard webbrollsprojektet, skulle hello hello .config-fil vara WAIISHost.exe.config. Lägg sedan till följande rader toothis hello:</span><span class="sxs-lookup"><span data-stu-id="57377-399">In hello default web role project, hello name of hello .config file would be WAIISHost.exe.config. Then add hello following lines toothis file:</span></span>

```
<system.diagnostics>
  <trace>
      <listeners>
          <add name “AzureDiagnostics” type=”Microsoft.WindowsAzure.Diagnostics.DiagnosticMonitorTraceListener”>
              <filter type=”” />
          </add>
      </listeners>
  </trace>
</system.diagnostics>
```

<span data-ttu-id="57377-400">Nu i hello **egenskaper** fönster, ange hello **kopiera tooOutput Directory** egenskapen för**Kopiera alltid**.</span><span class="sxs-lookup"><span data-stu-id="57377-400">Now, in hello **Properties** window, set hello **Copy tooOutput Directory** property too**Copy always**.</span></span>

## <a name="next-steps"></a><span data-ttu-id="57377-401">Nästa steg</span><span class="sxs-lookup"><span data-stu-id="57377-401">Next steps</span></span>
<span data-ttu-id="57377-402">toolearn mer om diagnostik loggning i Azure, se [aktiverar diagnostik i Azure-molntjänster och virtuella datorer](cloud-services/cloud-services-dotnet-diagnostics.md) och [aktivera diagnostikloggning för web apps i Azure App Service](app-service-web/web-sites-enable-diagnostic-log.md).</span><span class="sxs-lookup"><span data-stu-id="57377-402">toolearn more about diagnostics logging in Azure, see [Enabling Diagnostics in Azure Cloud Services and Virtual Machines](cloud-services/cloud-services-dotnet-diagnostics.md) and [Enable diagnostics logging for web apps in Azure App Service](app-service-web/web-sites-enable-diagnostic-log.md).</span></span>


---
title: aaaCloud Cruiser och Microsoft Azure Billing API-integrering | Microsoft Docs
description: "Ger ett unikt perspektiv från Microsoft Azure Billing partner molnet Cruiser på deras upplevelser integrera hello Azure Billing API: erna i sin produkt.  Detta är särskilt användbart för Azure och molnet Cruiser kunder som vill använda/försök molnet Cruiser för Microsoft Azure-paket."
services: 
documentationcenter: 
author: BryanLa
manager: tonguyen
editor: 
tags: billing
ms.assetid: b65128cf-5d4d-4cbd-b81e-d3dceab44271
ms.service: billing
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: billing
ms.date: 02/03/2017
ms.author: mobandyo;sirishap;bryanla
ms.openlocfilehash: 74cc19bdeed26c6684210736caa0cb365e8f8821
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: sv-SE
ms.lasthandoff: 10/06/2017
---
# <a name="cloud-cruiser-and-microsoft-azure-billing-api-integration"></a><span data-ttu-id="a487a-104">Molnet Cruiser och Microsoft Azure Billing API-integrering</span><span class="sxs-lookup"><span data-stu-id="a487a-104">Cloud Cruiser and Microsoft Azure Billing API Integration</span></span>
<span data-ttu-id="a487a-105">Den här artikeln beskriver hur hello information som samlas in från hello nya Microsoft Azure Billing API: er kan användas i molnet Cruiser för arbetsflödet kostnad simulering och analys.</span><span class="sxs-lookup"><span data-stu-id="a487a-105">This article describes how hello information collected from hello new Microsoft Azure Billing APIs can be used in Cloud Cruiser for workflow cost simulation and analysis.</span></span>

## <a name="azure-ratecard-api"></a><span data-ttu-id="a487a-106">Azure RateCard API</span><span class="sxs-lookup"><span data-stu-id="a487a-106">Azure RateCard API</span></span>
<span data-ttu-id="a487a-107">Hej RateCard API ger hastighet information från Azure.</span><span class="sxs-lookup"><span data-stu-id="a487a-107">hello RateCard API provides rate information from Azure.</span></span> <span data-ttu-id="a487a-108">När autentisering med rätt autentiseringsuppgifter för hello, kan du fråga hello API toocollect metadata om hello-tjänster som är tillgängliga på Azure, tillsammans med hello priser som är associerade med ditt som erbjuder-ID.</span><span class="sxs-lookup"><span data-stu-id="a487a-108">After authenticating with hello proper credentials, you can query hello API toocollect metadata about hello services available on Azure, along with hello rates associated with your Offer ID.</span></span>

<span data-ttu-id="a487a-109">hello följande är ett exempelsvar från hello-API som visar hello priser för hello A0 (Windows) instans:</span><span class="sxs-lookup"><span data-stu-id="a487a-109">hello following is a sample response from hello API showing hello prices for hello A0 (Windows) instance:</span></span>

    {
        "MeterId": "0e59ad56-03e5-4c3d-90d4-6670874d7e29",
        "MeterName": "Compute Hours",
        "MeterCategory": "Virtual Machines",
        "MeterSubCategory": "A0 VM (Windows)",
        "Unit": "Hours",
        "MeterRates":
        {
            "0": 0.029
        },
        "EffectiveDate": "2014-08-01T00:00:00Z",
        "IncludedQuantity": 0.0,
        "MeterStatus": "Active"
    },

### <a name="cloud-cruisers-interface-tooazure-ratecard-api"></a><span data-ttu-id="a487a-110">Molnet Cruisers gränssnittet tooAzure RateCard API</span><span class="sxs-lookup"><span data-stu-id="a487a-110">Cloud Cruiser’s Interface tooAzure RateCard API</span></span>
<span data-ttu-id="a487a-111">Molnet Cruiser kan utnyttja hello RateCard API information på olika sätt.</span><span class="sxs-lookup"><span data-stu-id="a487a-111">Cloud Cruiser can leverage hello RateCard API information in different ways.</span></span> <span data-ttu-id="a487a-112">I den här artikeln visar vi hur det kan vara används toomake IaaS arbetsbelastning kostnaden simulering och analys.</span><span class="sxs-lookup"><span data-stu-id="a487a-112">For this article, we will show how it can be used toomake IaaS workload cost simulation and analysis.</span></span>

<span data-ttu-id="a487a-113">toodemonstrate detta användningsfall, anta en arbetsbelastning med flera instanser som körs på Microsoft Azure-paket.</span><span class="sxs-lookup"><span data-stu-id="a487a-113">toodemonstrate this use case, imagine a workload of several instances running on Microsoft Azure Pack (WAP).</span></span> <span data-ttu-id="a487a-114">hello målet är toosimulate samma arbetsbelastningen på Azure och uppskattning hello kostnader för att göra sådana migrering.</span><span class="sxs-lookup"><span data-stu-id="a487a-114">hello goal is toosimulate this same workload on Azure, and estimate hello costs of doing such migration.</span></span> <span data-ttu-id="a487a-115">Ordna toocreate simuleringen finns det två huvuduppgifter toobe utföras:</span><span class="sxs-lookup"><span data-stu-id="a487a-115">In order toocreate this simulation, there are two main tasks toobe performed:</span></span>

1. <span data-ttu-id="a487a-116">**Importera och processen hello tjänstinformation som samlats in från hello RateCard API.**</span><span class="sxs-lookup"><span data-stu-id="a487a-116">**Import and process hello service information collected from hello RateCard API.**</span></span> <span data-ttu-id="a487a-117">Den här uppgiften utförs också på hello arbetsböcker, där hello utdrag ur hello RateCard API är transformerad och publicerade tooa nya abonnemang.</span><span class="sxs-lookup"><span data-stu-id="a487a-117">This task is also performed on hello workbooks, where hello extract from hello RateCard API is transformed and published tooa new rate plan.</span></span> <span data-ttu-id="a487a-118">Den här nya abonnemang ska användas på hello simulering tooestimate hello Azure priser.</span><span class="sxs-lookup"><span data-stu-id="a487a-118">This new rate plan will be used on hello simulations tooestimate hello Azure prices.</span></span>
2. <span data-ttu-id="a487a-119">**Normalisera WAP-tjänster och Azure IaaS-tjänster.**</span><span class="sxs-lookup"><span data-stu-id="a487a-119">**Normalize WAP services and Azure services for IaaS.**</span></span> <span data-ttu-id="a487a-120">Som standard WAP tjänster baseras på enskilda resurser (CPU, minne, diskens storlek osv.) medan Azure services baseras på instansstorleken (A0, A1, A2 osv.).</span><span class="sxs-lookup"><span data-stu-id="a487a-120">By default, WAP services are based on individual resources (CPU, Memory Size, Disk Size, etc.) while Azure services are based on instance size (A0, A1, A2, etc.).</span></span> <span data-ttu-id="a487a-121">Den här första uppgiften kan utföras av molnet Cruiser ETL-motorn, kallas arbetsböcker, där resurserna kan ligga på instansen storlekar och liknande tooAzure instans tjänster.</span><span class="sxs-lookup"><span data-stu-id="a487a-121">This first task can be performed by Cloud Cruiser’s ETL engine, called workbooks, where these resources can be bundled on instance sizes, analogous tooAzure instance services.</span></span>

### <a name="import-data-from-hello-ratecard-api"></a><span data-ttu-id="a487a-122">Importera data från hello RateCard API</span><span class="sxs-lookup"><span data-stu-id="a487a-122">Import data from hello RateCard API</span></span>
<span data-ttu-id="a487a-123">Molnet Cruiser arbetsböcker innehåller en automatiserad metod för toocollect och bearbeta information från hello RateCard API.</span><span class="sxs-lookup"><span data-stu-id="a487a-123">Cloud Cruiser workbooks provide an automated way toocollect and process information from hello RateCard API.</span></span>  <span data-ttu-id="a487a-124">ETL (extract-transform-load) arbetsböcker kan du tooconfigure hello insamling, omvandling och publicering av data i hello molnet Cruiser databas.</span><span class="sxs-lookup"><span data-stu-id="a487a-124">ETL (extract-transform-load) workbooks allow you tooconfigure hello collection, transformation, and publishing of data into hello Cloud Cruiser database.</span></span>

<span data-ttu-id="a487a-125">Varje arbetsbok kan ha en eller flera samlingar, så att du toocorrelate information från olika källor toocomplement eller utöka hello användningsdata.</span><span class="sxs-lookup"><span data-stu-id="a487a-125">Each workbook can have one or multiple collections, allowing you toocorrelate information from different sources toocomplement or augment hello usage data.</span></span> <span data-ttu-id="a487a-126">följande två skärmdumpar visar hur hello toocreate en ny *samling* i en befintlig arbetsbok och importera information till hello *samling* från hello RateCard API:</span><span class="sxs-lookup"><span data-stu-id="a487a-126">hello following two screenshots show how toocreate a new *collection* in an existing workbook, and importing information into hello *collection* from hello RateCard API:</span></span>

<span data-ttu-id="a487a-127">![Bild 1 - skapa en ny samling][1]</span><span class="sxs-lookup"><span data-stu-id="a487a-127">![Figure 1 - Creating a new collection][1]</span></span>

<span data-ttu-id="a487a-128">![Bild 2 - importera data från hello ny samling][2]</span><span class="sxs-lookup"><span data-stu-id="a487a-128">![Figure 2 - Import data from hello new collection][2]</span></span>

<span data-ttu-id="a487a-129">När du importerar hello data i arbetsboken hello, det är möjligt toocreate flera steg och processer för omvandling, toomodify och modellen hello data.</span><span class="sxs-lookup"><span data-stu-id="a487a-129">After importing hello data into hello workbook, it’s possible toocreate multiple steps and transformation processes, toomodify and model hello data.</span></span> <span data-ttu-id="a487a-130">I det här exemplet eftersom det bara är intresserad av infrastruktur-som-en-tjänst (IaaS) vi kan använda hello omvandling steg tooremove onödiga rader eller poster som är relaterade tooservices än IaaS.</span><span class="sxs-lookup"><span data-stu-id="a487a-130">For this example, since we are only interested in infrastructure-as-a-Service (IaaS) we can use hello transformation steps tooremove unnecessary rows, or records, related tooservices other than IaaS.</span></span>

<span data-ttu-id="a487a-131">hello följande skärmbild visar hello omvandling steg används tooprocess hello data som samlas in från RateCard API:</span><span class="sxs-lookup"><span data-stu-id="a487a-131">hello following screenshot shows hello transformation steps used tooprocess hello data collected from RateCard API:</span></span>

<span data-ttu-id="a487a-132">![Bild 3 - Transformation steg tooprocess insamlade data från RateCard API: et][3]</span><span class="sxs-lookup"><span data-stu-id="a487a-132">![Figure 3 - Transformation steps tooprocess collected data from RateCard API][3]</span></span>

### <a name="defining-new-services-and-rate-plans"></a><span data-ttu-id="a487a-133">Definiera nya tjänster och hastighet planer</span><span class="sxs-lookup"><span data-stu-id="a487a-133">Defining New Services and Rate Plans</span></span>
<span data-ttu-id="a487a-134">Det finns olika sätt toodefine tjänster på molnet Cruiser.</span><span class="sxs-lookup"><span data-stu-id="a487a-134">There are different ways toodefine services on Cloud Cruiser.</span></span> <span data-ttu-id="a487a-135">En av hello alternativ är tooimport hello tjänster från hello användningsdata.</span><span class="sxs-lookup"><span data-stu-id="a487a-135">One of hello options is tooimport hello services from hello usage data.</span></span> <span data-ttu-id="a487a-136">Den här metoden används ofta när du arbetar med offentliga moln, där hello services redan har definierats av hello-providern.</span><span class="sxs-lookup"><span data-stu-id="a487a-136">This method is commonly used when working with public clouds, where hello services are already defined by hello provider.</span></span>

<span data-ttu-id="a487a-137">Planera en hastighet är en uppsättning priser eller priser som kan vara tillämpade toodifferent tjänster som bygger på giltighetsdatum eller grupp av kunder, bland andra alternativ.</span><span class="sxs-lookup"><span data-stu-id="a487a-137">A Rate Plan is a set of rates or prices that can be applied toodifferent services, based on effective dates, or group of customers, among other options.</span></span> <span data-ttu-id="a487a-138">Priser kan även användas på molnet Cruiser toocreate simuleringen eller ”vad händer om”-scenarier, toounderstand hur förändringar i tjänster kan påverka hello totalkostnaden för en arbetsbelastning.</span><span class="sxs-lookup"><span data-stu-id="a487a-138">Rate Plans can also be used on Cloud Cruiser toocreate simulation or “What-if” scenarios, toounderstand how changes in services can affect hello total cost of a workload.</span></span>

<span data-ttu-id="a487a-139">I det här exemplet använder vi hello tjänstinformation från hello RateCard API toodefine nya tjänster i molnet Cruiser.</span><span class="sxs-lookup"><span data-stu-id="a487a-139">In this example, we will use hello service information from hello RateCard API toodefine new services in Cloud Cruiser.</span></span> <span data-ttu-id="a487a-140">Hello samma sätt, vi kan använda hello priser som är kopplade toohello services toocreate en ny hastighet planera på molnet Cruiser.</span><span class="sxs-lookup"><span data-stu-id="a487a-140">In hello same way, we can use hello rates associated toohello services toocreate a new Rate Plan on Cloud Cruiser.</span></span>

<span data-ttu-id="a487a-141">Hello slutet av hello omvandling av processen, det är möjligt toocreate ett nytt steg och publicera hello data från hello RateCard API som nya tjänster och priser.</span><span class="sxs-lookup"><span data-stu-id="a487a-141">At hello end of hello transformation process, it is possible toocreate a new step and publish hello data from hello RateCard API as new services and rates.</span></span>

<span data-ttu-id="a487a-142">![Bild 4 - publicera hello data från hello RateCard API som nya tjänster och priser][4]</span><span class="sxs-lookup"><span data-stu-id="a487a-142">![Figure 4 - Publishing hello data from hello RateCard API as new Services and Rates][4]</span></span>

### <a name="verify-azure-services-and-rates"></a><span data-ttu-id="a487a-143">Verifiera Azure-tjänster och priser</span><span class="sxs-lookup"><span data-stu-id="a487a-143">Verify Azure Services and Rates</span></span>
<span data-ttu-id="a487a-144">När du har publicerat hello tjänster och priser, kan du kontrollera hello listan över importerade tjänster i molnet Cruiser *Services* fliken:</span><span class="sxs-lookup"><span data-stu-id="a487a-144">After publishing hello services and rates, you can verify hello list of imported services in Cloud Cruiser’s *Services* tab:</span></span>

<span data-ttu-id="a487a-145">![Bild 5 – verifiera hello nya tjänster][5]</span><span class="sxs-lookup"><span data-stu-id="a487a-145">![Figure 5 - Verifying hello new Services][5]</span></span>

<span data-ttu-id="a487a-146">På hello *hastighet planer* fliken kan du hello nya hastighet plan som heter ”AzureSimulation” med hello priser importeras från hello RateCard API.</span><span class="sxs-lookup"><span data-stu-id="a487a-146">On hello *Rate Plans* tab, you can check hello new rate plan called “AzureSimulation” with hello rates imported from hello RateCard API.</span></span>

<span data-ttu-id="a487a-147">![Bild 6 - verifierar hello nya priser och associerade priser][6]</span><span class="sxs-lookup"><span data-stu-id="a487a-147">![Figure 6 - Verifying hello new Rate Plan and associated rates][6]</span></span>

### <a name="normalize-wap-and-azure-services"></a><span data-ttu-id="a487a-148">Normalisera WAP och Azure-tjänster</span><span class="sxs-lookup"><span data-stu-id="a487a-148">Normalize WAP and Azure Services</span></span>
<span data-ttu-id="a487a-149">Som standard innehåller WAP användningsinformation baserat på hello användningen av beräkningar, minne och nätverksresurser.</span><span class="sxs-lookup"><span data-stu-id="a487a-149">By default, WAP provides usage information based on hello use of compute, memory, and network resources.</span></span> <span data-ttu-id="a487a-150">Du kan definiera dina tjänster som baseras direkt på hello allokering eller förbrukade användning av dessa resurser i molnet Cruiser.</span><span class="sxs-lookup"><span data-stu-id="a487a-150">In Cloud Cruiser, you can define your services based directly on hello allocation or metered usage of these resources.</span></span> <span data-ttu-id="a487a-151">Exempelvis kan du ange en grundläggande hastighet för varje timme av CPU-användning eller kostnad hello GB minne som allokerats tooan instans.</span><span class="sxs-lookup"><span data-stu-id="a487a-151">For example, you can set a basic rate for each hour of CPU usage, or charge hello GB of memory allocated tooan instance.</span></span>

<span data-ttu-id="a487a-152">I det här exemplet i kostnader för toocompare mellan WAP och Azure, behöver vi tooaggregate hello resursanvändning på WAP i paket, som sedan kan mappade tooAzure tjänster.</span><span class="sxs-lookup"><span data-stu-id="a487a-152">For this example, in order toocompare costs between WAP and Azure, we need tooaggregate hello resource usage on WAP into bundles, which can then be mapped tooAzure services.</span></span> <span data-ttu-id="a487a-153">Den här omvandlingen kan enkelt implementeras i hello arbetsböcker:</span><span class="sxs-lookup"><span data-stu-id="a487a-153">This transformation can be implemented easily in hello workbooks:</span></span>

<span data-ttu-id="a487a-154">![Figur 7 – omvandla WAP toonormalize datatjänster][7]</span><span class="sxs-lookup"><span data-stu-id="a487a-154">![Figure 7 - Transforming WAP data toonormalize services][7]</span></span>

<span data-ttu-id="a487a-155">hello sista steget i hello arbetsboken är toopublish hello data till hello molnet Cruiser databas.</span><span class="sxs-lookup"><span data-stu-id="a487a-155">hello last step at hello workbook is toopublish hello data into hello Cloud Cruiser database.</span></span> <span data-ttu-id="a487a-156">Det här steget hello användningsdata nu finns i tjänster (som mappar toohello Azure-tjänster) och knuten toodefault priser toocreate hello avgifter.</span><span class="sxs-lookup"><span data-stu-id="a487a-156">During this step, hello usage data is now bundled into services (that map toohello Azure Services) and tied toodefault rates toocreate hello charges.</span></span>

<span data-ttu-id="a487a-157">Du kan automatisera hello bearbetning av hello data genom att lägga till en aktivitet på hello Schemaläggaren och ange hello frekvens och tidpunkt för hello arbetsboken toorun efter färdigställa hello arbetsboken.</span><span class="sxs-lookup"><span data-stu-id="a487a-157">After finishing hello workbook, you can automate hello processing of hello data, by adding a task on hello scheduler and specifying hello frequency and time for hello workbook toorun.</span></span>

<span data-ttu-id="a487a-158">![Figur 8 - arbetsbok schemaläggning][8]</span><span class="sxs-lookup"><span data-stu-id="a487a-158">![Figure 8 - Workbook scheduling][8]</span></span>

### <a name="create-reports-for-workload-cost-simulation-analysis"></a><span data-ttu-id="a487a-159">Skapa rapporter för arbetsbelastningen kostnad simuleringen analys</span><span class="sxs-lookup"><span data-stu-id="a487a-159">Create Reports for Workload Cost Simulation Analysis</span></span>
<span data-ttu-id="a487a-160">När hello användningsinformation som samlas in och avgifter läses in i hello molnet Cruiser databasen, kan vi utnyttja hello molnet Cruiser insikter modulen toocreate hello arbetsbelastning kostnaden simuleringen som vi vill ha.</span><span class="sxs-lookup"><span data-stu-id="a487a-160">After hello usage is collected and charges are loaded into hello Cloud Cruiser database, we can leverage hello Cloud Cruiser Insights module toocreate hello workload cost simulation that we desire.</span></span>

<span data-ttu-id="a487a-161">I ordning toodemonstrate i det här scenariot vi har skapat hello följande rapport:</span><span class="sxs-lookup"><span data-stu-id="a487a-161">In order toodemonstrate this scenario, we created hello following report:</span></span>

<span data-ttu-id="a487a-162">![Jämförelse av kostnader][9]</span><span class="sxs-lookup"><span data-stu-id="a487a-162">![Cost Comparison][9]</span></span>

<span data-ttu-id="a487a-163">hello översta diagrammet visar en kostnadsjämförelse av tjänster, jämföra hello priset för hello arbetsbelastning för varje specifik tjänst mellan WAP (mörkt blå) och Azure (lätta blå).</span><span class="sxs-lookup"><span data-stu-id="a487a-163">hello top graph shows a cost comparison by services, comparing hello price of running hello workload for each specific service between WAP (dark blue) and Azure (light blue).</span></span>

<span data-ttu-id="a487a-164">hello ned diagrammet visar hello samma data men uppdelade efter avdelning.</span><span class="sxs-lookup"><span data-stu-id="a487a-164">hello bottom graph shows hello same data but broken down by department.</span></span> <span data-ttu-id="a487a-165">Detta visar hello kostnader för varje avdelning toorun arbetsbelastningen på WAP och Azure, tillsammans med hello skillnaden mellan dem i hello besparingar-fältet (grön).</span><span class="sxs-lookup"><span data-stu-id="a487a-165">This shows hello costs for each department toorun their workload on WAP and Azure, along with hello difference between them in hello Savings bar (green).</span></span>

## <a name="azure-usage-api"></a><span data-ttu-id="a487a-166">Användning av Azure API</span><span class="sxs-lookup"><span data-stu-id="a487a-166">Azure Usage API</span></span>
### <a name="introduction"></a><span data-ttu-id="a487a-167">Introduktion</span><span class="sxs-lookup"><span data-stu-id="a487a-167">Introduction</span></span>
<span data-ttu-id="a487a-168">Microsoft introducerade nyligen hello Azure användning API tillåta prenumeranter tooprogrammatically pull i användning data toogain insikter om deras användning.</span><span class="sxs-lookup"><span data-stu-id="a487a-168">Microsoft recently introduced hello Azure Usage API, allowing subscribers tooprogrammatically pull in usage data toogain insights into their consumption.</span></span> <span data-ttu-id="a487a-169">Det här är goda nyheter för molnet Cruiser kunder som kan dra nytta av hello rikare dataset som är tillgängliga via detta API.</span><span class="sxs-lookup"><span data-stu-id="a487a-169">This is great news for Cloud Cruiser customers that can take advantage of hello richer dataset available through this API.</span></span>

<span data-ttu-id="a487a-170">Molnet Cruiser kan utnyttja hello integrering med hello API för användning på flera sätt.</span><span class="sxs-lookup"><span data-stu-id="a487a-170">Cloud Cruiser can leverage hello integration with hello Usage API in several ways.</span></span> <span data-ttu-id="a487a-171">Hej granularitet (varje timme användningsinformation) och metadata resursinformation tillgängliga via hello API ger hello nödvändiga dataset toosupport flexibla Showback eller återbetalning modeller.</span><span class="sxs-lookup"><span data-stu-id="a487a-171">hello granularity (hourly usage information) and resource metadata information available through hello API provides hello necessary dataset toosupport flexible Showback or Chargeback models.</span></span> 

<span data-ttu-id="a487a-172">I den här kursen presenterar vi ett exempel på hur molnet Cruiser kan dra nytta av hello användning API-information.</span><span class="sxs-lookup"><span data-stu-id="a487a-172">In this tutorial, we will present one example of how Cloud Cruiser can benefit from hello Usage API information.</span></span> <span data-ttu-id="a487a-173">Mer specifikt kommer vi skapa en resursgrupp i Azure, associera taggar för hello-konto och beskriver hello processen att dra och bearbetning av hello tagginformation till molnet Cruiser.</span><span class="sxs-lookup"><span data-stu-id="a487a-173">More specifically, we will create a Resource Group on Azure, associate tags for hello account structure, then describe hello process of pulling and processing hello tag information into Cloud Cruiser.</span></span>

<span data-ttu-id="a487a-174">hello slutliga målet är toobe kan toocreate rapporter som hello efter och vara kan tooanalyze kostnad och förbrukning baserat på hello strukturen innehåller hello taggar.</span><span class="sxs-lookup"><span data-stu-id="a487a-174">hello final goal is toobe able toocreate reports like hello following one, and be able tooanalyze cost and consumption based on hello account structure populated by hello tags.</span></span>

<span data-ttu-id="a487a-175">![Bild 10 - rapport med uppdelning med hjälp av taggar][10]</span><span class="sxs-lookup"><span data-stu-id="a487a-175">![Figure 10 - Report with breakdowns using tags][10]</span></span>

### <a name="microsoft-azure-tags"></a><span data-ttu-id="a487a-176">Microsoft Azure-taggar</span><span class="sxs-lookup"><span data-stu-id="a487a-176">Microsoft Azure Tags</span></span>
<span data-ttu-id="a487a-177">hello-data som är tillgängliga via hello Azure användning API innehåller information om förbrukningen utan även resursmetadata, inklusive alla taggar som är kopplade till den.</span><span class="sxs-lookup"><span data-stu-id="a487a-177">hello data available through hello Azure Usage API includes not only consumption information, but also resource metadata including any tags associated with it.</span></span> <span data-ttu-id="a487a-178">Taggar ger ett enkelt sätt tooorganize dina resurser, men i ordning toobe effektivt, behöver du tooensure som:</span><span class="sxs-lookup"><span data-stu-id="a487a-178">Tags provide an easy way tooorganize your resources, but in order toobe effective, you need tooensure that:</span></span>

* <span data-ttu-id="a487a-179">Taggar är korrekt tillämpade toohello resurser etablera som helst</span><span class="sxs-lookup"><span data-stu-id="a487a-179">Tags are correctly applied toohello resources at provision time</span></span>
* <span data-ttu-id="a487a-180">Taggar används korrekt på hello Showback/förbrukning processen tootie hello användning toohello organisations kontostruktur.</span><span class="sxs-lookup"><span data-stu-id="a487a-180">Tags are properly used on hello Showback/Chargeback process tootie hello usage toohello organization’s account structure.</span></span>

<span data-ttu-id="a487a-181">Båda dessa villkor kan vara svårt, särskilt när det är en manuell process på hello etablera eller ladda sida.</span><span class="sxs-lookup"><span data-stu-id="a487a-181">Both of these requirements can be challenging, especially when there is a manual process on hello provision or charging side.</span></span> <span data-ttu-id="a487a-182">Felstavat, felaktigt eller också saknas taggar är vanligt klagomål från kunder när med taggar och dessa fel kan underlätta på hello debitering sida är väldigt svårt.</span><span class="sxs-lookup"><span data-stu-id="a487a-182">Mistyped, incorrect or even missing tags are common complaints from customers when using tags and these errors can make life on hello charging side very difficult.</span></span>

<span data-ttu-id="a487a-183">Med hello nya API för användning av Azure, molnet Cruiser kan ta resursen taggning information och via avancerade ETL verktyget arbetsböcker, korrigera felen för vanliga märkning.</span><span class="sxs-lookup"><span data-stu-id="a487a-183">With hello new Azure Usage API, Cloud Cruiser can pull resource tagging information, and through a sophisticated ETL tool called workbooks, fix these common tagging errors.</span></span> <span data-ttu-id="a487a-184">Genom omvandling med reguljära uttryck och data korrelation, molnet Cruiser identifiera felaktigt formaterad resurser och tillämpa hello rätt taggar, säkerställer hello rätt associering av hello resurser med hello konsumenten.</span><span class="sxs-lookup"><span data-stu-id="a487a-184">Through transformation using regular expressions and data correlation, Cloud Cruiser can identify incorrectly tagged resources and apply hello correct tags, ensuring hello correct association of hello resources with hello consumer.</span></span>

<span data-ttu-id="a487a-185">Hello debitering sida, molnet Cruiser automatiserar hello Showback/förbrukning processen och kan utnyttja hello taggen information tootie hello användning toohello lämplig konsumenten (avdelning, Division, projekt, etc.).</span><span class="sxs-lookup"><span data-stu-id="a487a-185">On hello charging side, Cloud Cruiser automates hello Showback/Chargeback process, and can leverage hello tag information tootie hello usage toohello appropriate consumer (Department, Division, Project, etc.).</span></span> <span data-ttu-id="a487a-186">Denna automatisering ger en enorm förbättring och säkerställa en konsekvent och granskningsbara laddas process.</span><span class="sxs-lookup"><span data-stu-id="a487a-186">This automation provides a huge improvement and can ensure a consistent and auditable charging process.</span></span>

### <a name="creating-a-resource-group-with-tags-on-microsoft-azure"></a><span data-ttu-id="a487a-187">Skapa en resursgrupp med taggar i Microsoft Azure</span><span class="sxs-lookup"><span data-stu-id="a487a-187">Creating a Resource Group with tags on Microsoft Azure</span></span>
<span data-ttu-id="a487a-188">hello första steget i den här kursen är toocreate en resursgrupp i hello Azure-portalen och sedan skapa nya etiketter tooassociate toohello resurser.</span><span class="sxs-lookup"><span data-stu-id="a487a-188">hello first step in this tutorial is toocreate a Resource Group in hello Azure portal, then create new tags tooassociate toohello resources.</span></span> <span data-ttu-id="a487a-189">I det här exemplet ska vi skapa hello följande taggar: avdelning, miljö, ägare, projekt.</span><span class="sxs-lookup"><span data-stu-id="a487a-189">For this example, we will be creating hello following tags: Department, Environment, Owner, Project.</span></span>

<span data-ttu-id="a487a-190">hello skärmbilden nedan visar ett exempel resursgrupp med hello associerade taggar.</span><span class="sxs-lookup"><span data-stu-id="a487a-190">hello screenshot below shows a sample Resource Group with hello associated tags.</span></span>

<span data-ttu-id="a487a-191">![Figur 11 - resursgrupp med tillhörande taggar på Azure-portalen][11]</span><span class="sxs-lookup"><span data-stu-id="a487a-191">![Figure 11 - Resource Group with associated tags on Azure portal][11]</span></span>

<span data-ttu-id="a487a-192">hello nästa steg är toopull hello information från hello API för användning i molnet Cruiser.</span><span class="sxs-lookup"><span data-stu-id="a487a-192">hello next step is toopull hello information from hello Usage API into Cloud Cruiser.</span></span> <span data-ttu-id="a487a-193">hello användning API tillhandahåller för närvarande svar i JSON-format.</span><span class="sxs-lookup"><span data-stu-id="a487a-193">hello Usage API currently provides responses in JSON format.</span></span> <span data-ttu-id="a487a-194">Här är ett exempel på hello data som hämtats:</span><span class="sxs-lookup"><span data-stu-id="a487a-194">Here is a sample of hello data retrieved:</span></span>

    {
      "id": "/subscriptions/bb678b04-0e48-4b44-XXXX-XXXXXXX/providers/Microsoft.Commerce/UsageAggregates/Daily_BRSDT_20150623_0000",
      "name": "Daily_BRSDT_20150623_0000",
      "type": "Microsoft.Commerce/UsageAggregate",
      "properties":
      {
        "subscriptionId": "bb678b04-0e48-4b44-XXXX-XXXXXXXXX",
        "usageStartTime": "2015-06-22T00:00:00+00:00",
        "usageEndTime": "2015-06-23T00:00:00+00:00",
        "meterName": "Compute Hours",
        "meterRegion": "",
        "meterCategory": "Virtual Machines",
        "meterSubCategory": "Standard_D1 VM (Non-Windows)",
        "unit": "Hours",
        "instanceData": "{\"Microsoft.Resources\":{\"resourceUri\":\"/subscriptions/bb678b04-0e48-4b44-XXXX-XXXXXXXX/resourceGroups/DEMOUSAGEAPI/providers/Microsoft.Compute/virtualMachines/MyDockerVM\",\"location\":\"eastus\",\"tags\":{\"Department\":\"Sales\",\"Project\":\"Demo Usage API\",\"Environment\":\"Test\",\"Owner\":\"RSE\"},\"additionalInfo\":{\"ImageType\":\"Canonical\",\"ServiceType\":\"Standard_D1\"}}}",
        "meterId": "e60caf26-9ba0-413d-a422-6141f58081d6",
        "infoFields": {},
        "quantity": 8

      },
    },


### <a name="import-data-from-hello-usage-api-into-cloud-cruiser"></a><span data-ttu-id="a487a-195">Importera data från hello användning API till molnet Cruiser</span><span class="sxs-lookup"><span data-stu-id="a487a-195">Import data from hello Usage API into Cloud Cruiser</span></span>
<span data-ttu-id="a487a-196">Molnet Cruiser arbetsböcker innehåller en automatiserad metod för toocollect och bearbeta information från hello användning API.</span><span class="sxs-lookup"><span data-stu-id="a487a-196">Cloud Cruiser workbooks provide an automated way toocollect and process information from hello Usage API.</span></span> <span data-ttu-id="a487a-197">En arbetsbok för ETL (extract-transform-load) kan du tooconfigure hello insamling, omvandling och publicering av data i hello molnet Cruiser databas.</span><span class="sxs-lookup"><span data-stu-id="a487a-197">An ETL (extract-transform-load) workbook allows you tooconfigure hello collection, transformation, and publishing of data into hello Cloud Cruiser database.</span></span>

<span data-ttu-id="a487a-198">Varje arbetsbok kan ha en eller flera samlingar.</span><span class="sxs-lookup"><span data-stu-id="a487a-198">Each workbook can have one or multiple collections.</span></span> <span data-ttu-id="a487a-199">Detta ger dig toocorrelate information från olika källor toocomplement eller utöka hello användningsdata.</span><span class="sxs-lookup"><span data-stu-id="a487a-199">This allows you toocorrelate information from different sources toocomplement or augment hello usage data.</span></span> <span data-ttu-id="a487a-200">I det här exemplet skapar vi ett nytt blad i arbetsboken för hello Azure-mall (*UsageAPI)* och ange en ny *samling* tooimport information från hello användning API.</span><span class="sxs-lookup"><span data-stu-id="a487a-200">For this example, we will create a new sheet in hello Azure template workbook (*UsageAPI)* and set a new *collection* tooimport information from hello Usage API.</span></span>

<span data-ttu-id="a487a-201">![Bild 3 - användningsdata API som importeras till hello UsageAPI blad][12]</span><span class="sxs-lookup"><span data-stu-id="a487a-201">![Figure 3 - Usage API data imported into hello UsageAPI sheet][12]</span></span>

<span data-ttu-id="a487a-202">Observera att den här arbetsboken redan har andra ark tooimport tjänster från Azure (*ImportServices*), och bearbeta hello förbrukning information från hello fakturering API (*PublishData*).</span><span class="sxs-lookup"><span data-stu-id="a487a-202">Notice that this workbook already has other sheets tooimport services from Azure (*ImportServices*), and process hello consumption information from hello Billing API (*PublishData*).</span></span>

<span data-ttu-id="a487a-203">Nu kommer vi att använda hello användning API toopopulate hello *UsageAPI* blad och korrelera hello information med hello förbrukningsdata från hello fakturering API på hello *PublishData* blad.</span><span class="sxs-lookup"><span data-stu-id="a487a-203">Next we will use hello Usage API toopopulate hello *UsageAPI* sheet, and correlate hello information with hello consumption data from hello Billing API on hello *PublishData* sheet.</span></span>

### <a name="processing-hello-tag-information-from-hello-usage-api"></a><span data-ttu-id="a487a-204">Bearbetning av hello tagginformation från hello användning API</span><span class="sxs-lookup"><span data-stu-id="a487a-204">Processing hello tag information from hello Usage API</span></span>
<span data-ttu-id="a487a-205">När du har importerat hello data i arbetsboken hello vi kommer att skapa omvandling av stegen i hello *UsageAPI* blad i ordning tooprocess hello information från hello API.</span><span class="sxs-lookup"><span data-stu-id="a487a-205">After importing hello data into hello workbook, we will create transformation steps in hello *UsageAPI* sheet in order tooprocess hello information from hello API.</span></span> <span data-ttu-id="a487a-206">Första steget är toouse en ”JSON dela” processor tooextract hello taggar från ett enda fält och sedan skapa fält för var och en av dem (avdelning, projekt, ägare och miljö).</span><span class="sxs-lookup"><span data-stu-id="a487a-206">First step is toouse a “JSON split” processor tooextract hello tags from a single field, then create fields for each one of them (Department, Project, Owner, and Environment).</span></span>

<span data-ttu-id="a487a-207">![Bild 4 - skapa nya fält för hello tagginformation][13]</span><span class="sxs-lookup"><span data-stu-id="a487a-207">![Figure 4 - Create new fields for hello tag information][13]</span></span>

<span data-ttu-id="a487a-208">Meddelande hello ”nätverk” tjänsten saknar hello tagginformation (gul ruta), men vi kan verifiera att den är en del av hello samma resursgrupp genom att titta på hello *ResourceGroupName* fältet.</span><span class="sxs-lookup"><span data-stu-id="a487a-208">Notice hello “Networking” service is missing hello tag information (yellow box), but we can verify that it is part of hello same Resource Group by looking at hello *ResourceGroupName* field.</span></span> <span data-ttu-id="a487a-209">Eftersom vi har hello taggar för hello andra resurser från den här resursgruppen kan använda vi den här informationen tooapply hello taggar toothis resursen senare i processen för hello saknas.</span><span class="sxs-lookup"><span data-stu-id="a487a-209">Since we have hello tags for hello other resources from this Resource Group, we can use this information tooapply hello missing tags toothis resource later in hello process.</span></span>

<span data-ttu-id="a487a-210">hello nästa steg är toocreate en sökning tabell associera hello information från hello taggar toohello *ResourceGroupName*.</span><span class="sxs-lookup"><span data-stu-id="a487a-210">hello next step is toocreate a lookup table associating hello information from hello tags toohello *ResourceGroupName*.</span></span> <span data-ttu-id="a487a-211">Den här uppslagstabellen ska användas på hello nästa steg tooenrich hello förbrukningsdata med tagginformation.</span><span class="sxs-lookup"><span data-stu-id="a487a-211">This lookup table will be used on hello next step tooenrich hello consumption data with tag information.</span></span>

### <a name="adding-hello-tag-information-toohello-consumption-data"></a><span data-ttu-id="a487a-212">Lägga till hello information toohello förbrukning taggdata</span><span class="sxs-lookup"><span data-stu-id="a487a-212">Adding hello tag information toohello consumption data</span></span>
<span data-ttu-id="a487a-213">Nu kan vi gå toohello *PublishData* blad, vilka processer hello förbrukning information från hello fakturering API och lägga till hello fält som extraheras från hello taggar.</span><span class="sxs-lookup"><span data-stu-id="a487a-213">Now we can jump toohello *PublishData* sheet, which processes hello consumption information from hello Billing API, and add hello fields extracted from hello tags.</span></span> <span data-ttu-id="a487a-214">Den här processen utförs genom att titta på hello uppslagstabell skapas på hello föregående steg, med hello *ResourceGroupName* som hello nyckel för hello sökningar.</span><span class="sxs-lookup"><span data-stu-id="a487a-214">This process is performed by looking at hello lookup table created on hello previous step, using hello *ResourceGroupName* as hello key for hello lookups.</span></span>

<span data-ttu-id="a487a-215">![Bild 5 - fylla hello kontostruktur med hello information från hello-sökningar][14]</span><span class="sxs-lookup"><span data-stu-id="a487a-215">![Figure 5 - Populating hello account structure with hello information from hello lookups][14]</span></span>

<span data-ttu-id="a487a-216">Observera att hello lämpligt konto struktur fält för hello ”nätverk” service har tillämpats, åtgärda hello problem med hello saknas taggar.</span><span class="sxs-lookup"><span data-stu-id="a487a-216">Notice that hello appropriate account structure fields for hello “Networking” service were applied, fixing hello issue with hello missing tags.</span></span> <span data-ttu-id="a487a-217">Vi också fyllts hello struktur fälten för resurser än våra mål resursgrupp med ”andra”, i ordning toodifferentiate dem på hello rapporter.</span><span class="sxs-lookup"><span data-stu-id="a487a-217">We also populated hello account structure fields for resources other than our target Resource Group with “Other”, in order toodifferentiate them on hello reports.</span></span>

<span data-ttu-id="a487a-218">Nu måste vi bara tooadd ett steg toopublish hello användningsdata.</span><span class="sxs-lookup"><span data-stu-id="a487a-218">Now we just need tooadd a step toopublish hello usage data.</span></span> <span data-ttu-id="a487a-219">Under det här steget hello lämpliga priser för varje tjänst som definierats på våra priser inte tillämpade toohello användningsinformation med hello resulterande kostnad läses in i hello-databasen.</span><span class="sxs-lookup"><span data-stu-id="a487a-219">During this step, hello appropriate rates for each service defined on our Rate Plan will be applied toohello usage information, with hello resulting charge loaded into hello database.</span></span>

<span data-ttu-id="a487a-220">hello bästa delen är att du bara har toogo genom den här processen en gång.</span><span class="sxs-lookup"><span data-stu-id="a487a-220">hello best part is that you only have toogo through this process once.</span></span> <span data-ttu-id="a487a-221">När hello arbetsboken har slutförts, behöver du bara tooadd den toohello scheduler och den kommer att köras varje timme eller varje dag på hello schemalagda tid.</span><span class="sxs-lookup"><span data-stu-id="a487a-221">When hello workbook is completed, you just need tooadd it toohello scheduler and it will run hourly or daily at hello scheduled time.</span></span> <span data-ttu-id="a487a-222">Är det bara gäller att skapa nya rapporter och anpassa befintliga, i ordning tooanalyze hello data tooget meningsfulla insikter från dina molnanvändning.</span><span class="sxs-lookup"><span data-stu-id="a487a-222">Then it’s just a matter of creating new reports, or customizing existing ones, in order tooanalyze hello data tooget meaningful insights from your cloud usage.</span></span>

### <a name="next-steps"></a><span data-ttu-id="a487a-223">Nästa steg</span><span class="sxs-lookup"><span data-stu-id="a487a-223">Next Steps</span></span>
* <span data-ttu-id="a487a-224">För detaljerade anvisningar om hur du skapar moln Cruiser arbetsböcker och rapporter, se tooCloud Cruiser är online [dokumentationen](http://docs.cloudcruiser.com/) (giltig inloggning krävs).</span><span class="sxs-lookup"><span data-stu-id="a487a-224">For detailed instructions on creating Cloud Cruiser workbooks and reports, please refer tooCloud Cruiser’s online [documentation](http://docs.cloudcruiser.com/) (valid login required).</span></span>  <span data-ttu-id="a487a-225">Mer information om molnet Cruiser Kontakta [ info@cloudcruiser.com ](mailto:info@cloudcruiser.com).</span><span class="sxs-lookup"><span data-stu-id="a487a-225">For more information about Cloud Cruiser, please contact [info@cloudcruiser.com](mailto:info@cloudcruiser.com).</span></span>
* <span data-ttu-id="a487a-226">Se [få insikter om dina Microsoft Azure-resursförbrukning](billing-usage-rate-card-overview.md) en översikt över hello Azure Resursanvändning och RateCard APIs.</span><span class="sxs-lookup"><span data-stu-id="a487a-226">See [Gain insights into your Microsoft Azure resource consumption](billing-usage-rate-card-overview.md) for an overview of hello Azure Resource Usage and RateCard APIs.</span></span>
* <span data-ttu-id="a487a-227">Kolla in hello [Azure Billing REST API-referens](https://msdn.microsoft.com/library/azure/1ea5b323-54bb-423d-916f-190de96c6a3c) mer information om både API: er som är en del av hello uppsättning API: er som tillhandahålls av hello Azure Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="a487a-227">Check out hello [Azure Billing REST API Reference](https://msdn.microsoft.com/library/azure/1ea5b323-54bb-423d-916f-190de96c6a3c) for more information on both APIs, which are part of hello set of APIs provided by hello Azure Resource Manager.</span></span>
* <span data-ttu-id="a487a-228">Om du vill toodive i hello exempelkod checka ut våra Microsoft Azure Billing API kodexempel på [Azure kodexempel](https://azure.microsoft.com/documentation/samples/?term=billing).</span><span class="sxs-lookup"><span data-stu-id="a487a-228">If you would like toodive right into hello sample code, check out our Microsoft Azure Billing API Code Samples on [Azure Code Samples](https://azure.microsoft.com/documentation/samples/?term=billing).</span></span>

### <a name="learn-more"></a><span data-ttu-id="a487a-229">Läs mer</span><span class="sxs-lookup"><span data-stu-id="a487a-229">Learn More</span></span>
* <span data-ttu-id="a487a-230">Se hello [översikt över Azure Resource Manager](../azure-resource-manager/resource-group-overview.md) artikel toolearn mer om hello Azure Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="a487a-230">See hello [Azure Resource Manager Overview](../azure-resource-manager/resource-group-overview.md) article toolearn more about hello Azure Resource Manager.</span></span>

<!--Image references-->

[1]: ./media/billing-usage-rate-card-partner-solution-cloudcruiser/Create-New-Workbook-Collection.png "Bild 1 - skapa en ny samling"
[2]: ./media/billing-usage-rate-card-partner-solution-cloudcruiser/Import-Data-From-RateCard.png "Bild 2 - importera data från hello ny samling"
[3]: ./media/billing-usage-rate-card-partner-solution-cloudcruiser/Transformation-Steps-Process-RateCard-Data.png "Bild 3 - Transformation steg tooprocess insamlade data från RateCard API: et"
[4]: ./media/billing-usage-rate-card-partner-solution-cloudcruiser/Publish-RateCard-Data-New-Services-Rates.png "Bild 4 - publicera hello data från hello RateCard API som nya tjänster och priser"
[5]: ./media/billing-usage-rate-card-partner-solution-cloudcruiser/Verify-Azure-Services-And-Pricing1.png "Bild 5 – verifiera hello nya tjänster"
[6]: ./media/billing-usage-rate-card-partner-solution-cloudcruiser/Verify-Azure-Services-And-Pricing2.png "Bild 6 - verifierar hello nya priser och associerade priser"
[7]: ./media/billing-usage-rate-card-partner-solution-cloudcruiser/Transforming-WAP-Normalize-Services.png "Figur 7 – omvandla WAP toonormalize datatjänster"
[8]: ./media/billing-usage-rate-card-partner-solution-cloudcruiser/Workbook-Scheduling.png "Figur 8 - arbetsbok schemaläggning"
[9]: ./media/billing-usage-rate-card-partner-solution-cloudcruiser/Workload-Cost-Simulation-Report.png "Bild 9 - exempelrapporten för hello arbetsbelastning kostnaden jämförelse scenario"
[10]: ./media/billing-usage-rate-card-partner-solution-cloudcruiser/1_ReportWithTags.png "Bild 10 - rapport med uppdelning med hjälp av taggar"
[11]: ./media/billing-usage-rate-card-partner-solution-cloudcruiser/2_ResourceGroupsWithTags.png "Figur 11 - resursgrupp med tillhörande taggar på Azure-portalen"
[12]: ./media/billing-usage-rate-card-partner-solution-cloudcruiser/3_ImportIntoUsageAPISheet.png "Figur 12 - användningsdata API som importeras till hello UsageAPI blad"
[13]: ./media/billing-usage-rate-card-partner-solution-cloudcruiser/4_NewTagField.png "Figur 13 - skapa nya fält för hello tagginformation"
[14]: ./media/billing-usage-rate-card-partner-solution-cloudcruiser/5_PopulateAccountStructure.png "Figur 14 - fylla hello kontostruktur med hello information från hello-sökningar"

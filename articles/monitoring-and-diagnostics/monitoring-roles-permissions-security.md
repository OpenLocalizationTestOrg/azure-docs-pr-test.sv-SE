---
title: "aaaGet igång med roller, behörigheter och säkerhet med Azure-Monitor | Microsoft Docs"
description: "Lär dig hur toouse Azure övervakaren inbyggda roller och behörigheter toorestrict åt toomonitoring resurser."
author: johnkemnetz
manager: orenr
editor: 
services: monitoring-and-diagnostics
documentationcenter: monitoring-and-diagnostics
ms.assetid: 2686e53b-72f0-4312-bcd3-3dc1b4a9b912
ms.service: monitoring-and-diagnostics
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 09/26/2016
ms.author: johnkem
ms.openlocfilehash: 44fdf2a697050309480dfc164ebab51445b19bc8
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: sv-SE
ms.lasthandoff: 10/06/2017
---
# <a name="get-started-with-roles-permissions-and-security-with-azure-monitor"></a><span data-ttu-id="c9602-103">Kom igång med roller, behörigheter och säkerhet med Azure-Monitor</span><span class="sxs-lookup"><span data-stu-id="c9602-103">Get started with roles, permissions, and security with Azure Monitor</span></span>
<span data-ttu-id="c9602-104">Många grupper behöver toostrictly reglera åtkomst toomonitoring data och inställningar.</span><span class="sxs-lookup"><span data-stu-id="c9602-104">Many teams need toostrictly regulate access toomonitoring data and settings.</span></span> <span data-ttu-id="c9602-105">Till exempel om du har gruppmedlemmar som arbetar enbart om hur du övervakar (supporttekniker, devops engineers) eller om du använder en leverantör av hanterade tjänster, kanske du vill toogrant dem åtkomst till övervakningsdata samtidigt begränsa deras möjlighet toocreate tooonly, ändra, eller ta bort resurser.</span><span class="sxs-lookup"><span data-stu-id="c9602-105">For example, if you have team members who work exclusively on monitoring (support engineers, devops engineers) or if you use a managed service provider, you may want toogrant them access tooonly monitoring data while restricting their ability toocreate, modify, or delete resources.</span></span> <span data-ttu-id="c9602-106">Den här artikeln visar hur tooquickly tillämpa en inbyggd övervakning RBAC rollen tooa användare i Azure eller skapa egna anpassade roll för en användare behöver begränsade behörigheter för övervakning.</span><span class="sxs-lookup"><span data-stu-id="c9602-106">This article shows how tooquickly apply a built-in monitoring RBAC role tooa user in Azure or build your own custom role for a user who needs limited monitoring permissions.</span></span> <span data-ttu-id="c9602-107">Den sedan behandlar säkerhetsaspekter för dina Azure-Monitor-relaterade resurser och hur du kan begränsa åtkomst till toohello data de innehåller.</span><span class="sxs-lookup"><span data-stu-id="c9602-107">It then discusses security considerations for your Azure Monitor-related resources and how you can limit access toohello data they contain.</span></span>

## <a name="built-in-monitoring-roles"></a><span data-ttu-id="c9602-108">Inbyggda övervakning roller</span><span class="sxs-lookup"><span data-stu-id="c9602-108">Built-in monitoring roles</span></span>
<span data-ttu-id="c9602-109">Azure övervakaren inbyggda roller är utformad toohelp begränsa åtkomst tooresources i en prenumeration samtidigt som de ansvariga för övervakning av infrastruktur tooobtain och konfigurera hello data de behöver.</span><span class="sxs-lookup"><span data-stu-id="c9602-109">Azure Monitor’s built-in roles are designed toohelp limit access tooresources in a subscription while still enabling those responsible for monitoring infrastructure tooobtain and configure hello data they need.</span></span> <span data-ttu-id="c9602-110">Azure övervakning ger två out box-roller: en övervakning läsare och deltagare övervakning.</span><span class="sxs-lookup"><span data-stu-id="c9602-110">Azure Monitor provides two out-of-the-box roles: A Monitoring Reader and a Monitoring Contributor.</span></span>

### <a name="monitoring-reader"></a><span data-ttu-id="c9602-111">Övervaka läsare</span><span class="sxs-lookup"><span data-stu-id="c9602-111">Monitoring Reader</span></span>
<span data-ttu-id="c9602-112">Personer hello övervakning Reader rollen kan visa alla övervakningsdata i en prenumeration men det går inte att ändra alla resurser eller redigera inställningar relaterade toomonitoring resurser.</span><span class="sxs-lookup"><span data-stu-id="c9602-112">People assigned hello Monitoring Reader role can view all monitoring data in a subscription but cannot modify any resource or edit any settings related toomonitoring resources.</span></span> <span data-ttu-id="c9602-113">Den här rollen är lämplig för användare i en organisation, till exempel support eller åtgärder tekniker som måste toobe kunna:</span><span class="sxs-lookup"><span data-stu-id="c9602-113">This role is appropriate for users in an organization, such as support or operations engineers, who need toobe able to:</span></span>

* <span data-ttu-id="c9602-114">Visa övervakning instrumentpaneler i hello portal och skapa sina egna privata övervakning instrumentpaneler.</span><span class="sxs-lookup"><span data-stu-id="c9602-114">View monitoring dashboards in hello portal and create their own private monitoring dashboards.</span></span>
* <span data-ttu-id="c9602-115">Frågan för mått med hello [REST-API för Azure-Monitor](https://msdn.microsoft.com/library/azure/dn931930.aspx), [PowerShell-cmdlets](insights-powershell-samples.md), eller [plattformsoberoende CLI](insights-cli-samples.md).</span><span class="sxs-lookup"><span data-stu-id="c9602-115">Query for metrics using hello [Azure Monitor REST API](https://msdn.microsoft.com/library/azure/dn931930.aspx), [PowerShell cmdlets](insights-powershell-samples.md), or [cross-platform CLI](insights-cli-samples.md).</span></span>
* <span data-ttu-id="c9602-116">Frågan hello aktivitetsloggen med hello-portalen, Azure övervakaren REST API: et, PowerShell-cmdlets eller plattformsoberoende CLI.</span><span class="sxs-lookup"><span data-stu-id="c9602-116">Query hello Activity Log using hello portal, Azure Monitor REST API, PowerShell cmdlets, or cross-platform CLI.</span></span>
* <span data-ttu-id="c9602-117">Visa hello [diagnostikinställningar](monitoring-overview-of-diagnostic-logs.md#resource-diagnostic-settings) för en resurs.</span><span class="sxs-lookup"><span data-stu-id="c9602-117">View hello [diagnostic settings](monitoring-overview-of-diagnostic-logs.md#resource-diagnostic-settings) for a resource.</span></span>
* <span data-ttu-id="c9602-118">Visa hello [logga profil](monitoring-overview-activity-logs.md#export-the-activity-log-with-a-log-profile) för en prenumeration.</span><span class="sxs-lookup"><span data-stu-id="c9602-118">View hello [log profile](monitoring-overview-activity-logs.md#export-the-activity-log-with-a-log-profile) for a subscription.</span></span>
* <span data-ttu-id="c9602-119">Visa Autoskala inställningar.</span><span class="sxs-lookup"><span data-stu-id="c9602-119">View autoscale settings.</span></span>
* <span data-ttu-id="c9602-120">Visa avisering aktivitet och inställningar.</span><span class="sxs-lookup"><span data-stu-id="c9602-120">View alert activity and settings.</span></span>
* <span data-ttu-id="c9602-121">Åtkomst till Application Insights-data och visa data i AI Analytics.</span><span class="sxs-lookup"><span data-stu-id="c9602-121">Access Application Insights data and view data in AI Analytics.</span></span>
* <span data-ttu-id="c9602-122">Sök logganalys (OMS) arbetsytan data inklusive användningsdata för hello arbetsytan.</span><span class="sxs-lookup"><span data-stu-id="c9602-122">Search Log Analytics (OMS) workspace data including usage data for hello workspace.</span></span>
* <span data-ttu-id="c9602-123">Visa hanteringsgrupper för logganalys (OMS).</span><span class="sxs-lookup"><span data-stu-id="c9602-123">View Log Analytics (OMS) management groups.</span></span>
* <span data-ttu-id="c9602-124">Hämta hello logganalys (OMS) Sök schemat.</span><span class="sxs-lookup"><span data-stu-id="c9602-124">Retrieve hello Log Analytics (OMS) search schema.</span></span>
* <span data-ttu-id="c9602-125">Lista över logganalys (OMS) intelligence Pack.</span><span class="sxs-lookup"><span data-stu-id="c9602-125">List Log Analytics (OMS) intelligence packs.</span></span>
* <span data-ttu-id="c9602-126">Hämta och köra logganalys (OMS) sparade sökningar.</span><span class="sxs-lookup"><span data-stu-id="c9602-126">Retrieve and execute Log Analytics (OMS) saved searches.</span></span>
* <span data-ttu-id="c9602-127">Hämta hello konfiguration för logganalys (OMS).</span><span class="sxs-lookup"><span data-stu-id="c9602-127">Retrieve hello Log Analytics (OMS) storage configuration.</span></span>

> [!NOTE]
> <span data-ttu-id="c9602-128">Den här rollen ger inte läsbehörighet toolog data som har direktuppspelat tooan händelsehubb eller lagras i ett lagringskonto.</span><span class="sxs-lookup"><span data-stu-id="c9602-128">This role does not give read access toolog data that has been streamed tooan event hub or stored in a storage account.</span></span> <span data-ttu-id="c9602-129">[Se nedan](#security-considerations-for-monitoring-data) information om hur du konfigurerar åtkomst toothese resurser.</span><span class="sxs-lookup"><span data-stu-id="c9602-129">[See below](#security-considerations-for-monitoring-data) for information on configuring access toothese resources.</span></span>
> 
> 

### <a name="monitoring-contributor"></a><span data-ttu-id="c9602-130">Övervakning av deltagare</span><span class="sxs-lookup"><span data-stu-id="c9602-130">Monitoring Contributor</span></span>
<span data-ttu-id="c9602-131">Personer som är tilldelade hello övervakning deltagare rollen kan visa alla övervakningsdata i en prenumeration och skapa eller ändra inställningar för övervakning, men kan inte ändra andra resurser.</span><span class="sxs-lookup"><span data-stu-id="c9602-131">People assigned hello Monitoring Contributor role can view all monitoring data in a subscription and create or modify monitoring settings, but cannot modify any other resources.</span></span> <span data-ttu-id="c9602-132">Den här rollen är en supermängd hello övervakning Reader roll och är lämplig för medlemmar i en organisation övervakning team eller hanterade leverantörer som dessutom toohello behörigheter ovan, måste också toobe kunna:</span><span class="sxs-lookup"><span data-stu-id="c9602-132">This role is a superset of hello Monitoring Reader role, and is appropriate for members of an organization’s monitoring team or managed service providers who, in addition toohello permissions above, also need toobe able to:</span></span>

* <span data-ttu-id="c9602-133">Publicera övervakning instrumentpaneler som en delad instrumentpanel.</span><span class="sxs-lookup"><span data-stu-id="c9602-133">Publish monitoring dashboards as a shared dashboard.</span></span>
* <span data-ttu-id="c9602-134">Ange [diagnostikinställningar](monitoring-overview-of-diagnostic-logs.md#resource-diagnostic-settings) för en resource.*</span><span class="sxs-lookup"><span data-stu-id="c9602-134">Set [diagnostic settings](monitoring-overview-of-diagnostic-logs.md#resource-diagnostic-settings) for a resource.*</span></span>
* <span data-ttu-id="c9602-135">Ange hello [logga profil](monitoring-overview-activity-logs.md#export-the-activity-log-with-a-log-profile) för en subscription.*</span><span class="sxs-lookup"><span data-stu-id="c9602-135">Set hello [log profile](monitoring-overview-activity-logs.md#export-the-activity-log-with-a-log-profile) for a subscription.*</span></span>
* <span data-ttu-id="c9602-136">Ange varning aktivitet och inställningar.</span><span class="sxs-lookup"><span data-stu-id="c9602-136">Set alert activity and settings.</span></span>
* <span data-ttu-id="c9602-137">Skapa webbtester med Application Insights och komponenter.</span><span class="sxs-lookup"><span data-stu-id="c9602-137">Create Application Insights web tests and components.</span></span>
* <span data-ttu-id="c9602-138">Logganalys (OMS) arbetsyta delade nycklar.</span><span class="sxs-lookup"><span data-stu-id="c9602-138">List Log Analytics (OMS) workspace shared keys.</span></span>
* <span data-ttu-id="c9602-139">Aktivera eller inaktivera logganalys (OMS) intelligence Pack.</span><span class="sxs-lookup"><span data-stu-id="c9602-139">Enable or disable Log Analytics (OMS) intelligence packs.</span></span>
* <span data-ttu-id="c9602-140">Skapa och ta bort och köra logganalys (OMS) sparade sökningar.</span><span class="sxs-lookup"><span data-stu-id="c9602-140">Create and delete and execute Log Analytics (OMS) saved searches.</span></span>
* <span data-ttu-id="c9602-141">Skapa och ta bort konfiguration för lagring av hello logganalys (OMS).</span><span class="sxs-lookup"><span data-stu-id="c9602-141">Create and delete hello Log Analytics (OMS) storage configuration.</span></span>

<span data-ttu-id="c9602-142">* användaren måste också ha behörigheten ListKeys på hello mål resurs (storage-konto eller händelse hubb namnområde) tooset en logg-profil eller diagnostikinställningen.</span><span class="sxs-lookup"><span data-stu-id="c9602-142">*user must also separately be granted ListKeys permission on hello target resource (storage account or event hub namespace) tooset a log profile or diagnostic setting.</span></span>

> [!NOTE]
> <span data-ttu-id="c9602-143">Den här rollen ger inte läsbehörighet toolog data som har direktuppspelat tooan händelsehubb eller lagras i ett lagringskonto.</span><span class="sxs-lookup"><span data-stu-id="c9602-143">This role does not give read access toolog data that has been streamed tooan event hub or stored in a storage account.</span></span> <span data-ttu-id="c9602-144">[Se nedan](#security-considerations-for-monitoring-data) information om hur du konfigurerar åtkomst toothese resurser.</span><span class="sxs-lookup"><span data-stu-id="c9602-144">[See below](#security-considerations-for-monitoring-data) for information on configuring access toothese resources.</span></span>
> 
> 

## <a name="monitoring-permissions-and-custom-rbac-roles"></a><span data-ttu-id="c9602-145">Övervaka behörigheter och anpassade RBAC-roller</span><span class="sxs-lookup"><span data-stu-id="c9602-145">Monitoring permissions and custom RBAC roles</span></span>
<span data-ttu-id="c9602-146">Om hello ovan inbyggda roller inte uppfyller hello exakt behoven för din grupp, kan du [skapa en anpassad roll RBAC](../active-directory/role-based-access-control-custom-roles.md) med mer detaljerade behörigheter.</span><span class="sxs-lookup"><span data-stu-id="c9602-146">If hello above built-in roles don’t meet hello exact needs of your team, you can [create a custom RBAC role](../active-directory/role-based-access-control-custom-roles.md) with more granular permissions.</span></span> <span data-ttu-id="c9602-147">Nedan finns hello vanliga Azure övervakaren RBAC-åtgärder med deras beskrivningar.</span><span class="sxs-lookup"><span data-stu-id="c9602-147">Below are hello common Azure Monitor RBAC operations with their descriptions.</span></span>

| <span data-ttu-id="c9602-148">Åtgärd</span><span class="sxs-lookup"><span data-stu-id="c9602-148">Operation</span></span> | <span data-ttu-id="c9602-149">Beskrivning</span><span class="sxs-lookup"><span data-stu-id="c9602-149">Description</span></span> |
| --- | --- |
| <span data-ttu-id="c9602-150">Ta bort Microsoft.Insights/AlertRules/[Read, skriva]</span><span class="sxs-lookup"><span data-stu-id="c9602-150">Microsoft.Insights/AlertRules/[Read, Write, Delete]</span></span> |<span data-ttu-id="c9602-151">Läs/Skriv/ta bort Varningsregler.</span><span class="sxs-lookup"><span data-stu-id="c9602-151">Read/write/delete alert rules.</span></span> |
| <span data-ttu-id="c9602-152">Microsoft.Insights/AlertRules/Incidents/Read</span><span class="sxs-lookup"><span data-stu-id="c9602-152">Microsoft.Insights/AlertRules/Incidents/Read</span></span> |<span data-ttu-id="c9602-153">Lista över incidenter (historik hello varningsregel som utlöses) för Varningsregler.</span><span class="sxs-lookup"><span data-stu-id="c9602-153">List incidents (history of hello alert rule being triggered) for alert rules.</span></span> <span data-ttu-id="c9602-154">Detta gäller endast toohello portal.</span><span class="sxs-lookup"><span data-stu-id="c9602-154">This only applies toohello portal.</span></span> |
| <span data-ttu-id="c9602-155">Ta bort Microsoft.Insights/AutoscaleSettings/[Read, skriva]</span><span class="sxs-lookup"><span data-stu-id="c9602-155">Microsoft.Insights/AutoscaleSettings/[Read, Write, Delete]</span></span> |<span data-ttu-id="c9602-156">Läs/Skriv/ta bort Autoskala inställningar.</span><span class="sxs-lookup"><span data-stu-id="c9602-156">Read/write/delete autoscale settings.</span></span> |
| <span data-ttu-id="c9602-157">Ta bort Microsoft.Insights/DiagnosticSettings/[Read, skriva]</span><span class="sxs-lookup"><span data-stu-id="c9602-157">Microsoft.Insights/DiagnosticSettings/[Read, Write, Delete]</span></span> |<span data-ttu-id="c9602-158">Diagnostikinställningar för Läs/Skriv/ta bort.</span><span class="sxs-lookup"><span data-stu-id="c9602-158">Read/write/delete diagnostic settings.</span></span> |
| <span data-ttu-id="c9602-159">Microsoft.Insights/eventtypes/digestevents/Read</span><span class="sxs-lookup"><span data-stu-id="c9602-159">Microsoft.Insights/eventtypes/digestevents/Read</span></span> |<span data-ttu-id="c9602-160">Den här behörigheten krävs för användare som behöver åtkomst till tooActivity loggar via hello-portalen.</span><span class="sxs-lookup"><span data-stu-id="c9602-160">This permission is necessary for users who need access tooActivity Logs via hello portal.</span></span> |
| <span data-ttu-id="c9602-161">Microsoft.Insights/eventtypes/values/Read</span><span class="sxs-lookup"><span data-stu-id="c9602-161">Microsoft.Insights/eventtypes/values/Read</span></span> |<span data-ttu-id="c9602-162">Lista över aktivitetsloggen händelser (management-händelser) i en prenumeration.</span><span class="sxs-lookup"><span data-stu-id="c9602-162">List Activity Log events (management events) in a subscription.</span></span> <span data-ttu-id="c9602-163">Den här behörigheten är tillämpliga tooboth programmässiga och portalen toohello aktivitetsloggen.</span><span class="sxs-lookup"><span data-stu-id="c9602-163">This permission is applicable tooboth programmatic and portal access toohello Activity Log.</span></span> |
| <span data-ttu-id="c9602-164">Microsoft.Insights/LogDefinitions/Read</span><span class="sxs-lookup"><span data-stu-id="c9602-164">Microsoft.Insights/LogDefinitions/Read</span></span> |<span data-ttu-id="c9602-165">Den här behörigheten krävs för användare som behöver åtkomst till tooActivity loggar via hello-portalen.</span><span class="sxs-lookup"><span data-stu-id="c9602-165">This permission is necessary for users who need access tooActivity Logs via hello portal.</span></span> |
| <span data-ttu-id="c9602-166">Microsoft.Insights/MetricDefinitions/Read</span><span class="sxs-lookup"><span data-stu-id="c9602-166">Microsoft.Insights/MetricDefinitions/Read</span></span> |<span data-ttu-id="c9602-167">Läs måttdefinitionerna (lista över tillgängliga mått typer för en resurs).</span><span class="sxs-lookup"><span data-stu-id="c9602-167">Read metric definitions (list of available metric types for a resource).</span></span> |
| <span data-ttu-id="c9602-168">Microsoft.Insights/Metrics/Read</span><span class="sxs-lookup"><span data-stu-id="c9602-168">Microsoft.Insights/Metrics/Read</span></span> |<span data-ttu-id="c9602-169">Läsa måtten för en resurs.</span><span class="sxs-lookup"><span data-stu-id="c9602-169">Read metrics for a resource.</span></span> |

> [!NOTE]
> <span data-ttu-id="c9602-170">Komma åt tooalerts, diagnostikinställningar och mått för en resurs kräver hello användaren har läsbehörighet toohello resurstyp och omfånget för den här resursen.</span><span class="sxs-lookup"><span data-stu-id="c9602-170">Access tooalerts, diagnostic settings, and metrics for a resource requires that hello user has Read access toohello resource type and scope of that resource.</span></span> <span data-ttu-id="c9602-171">Skapa (”write”) har en inställning eller loggen diagnostikprofil att Arkiv tooa storage-konto eller dataströmmar tooevent hubbar kräver hello användaren tooalso ListKeys behörighet på hello målresursen.</span><span class="sxs-lookup"><span data-stu-id="c9602-171">Creating (“write”) a diagnostic setting or log profile that archives tooa storage account or streams tooevent hubs requires hello user tooalso have ListKeys permission on hello target resource.</span></span>
> 
> 

<span data-ttu-id="c9602-172">Till exempel kan med hello ovanför tabell du skapa en anpassad RBAC-roll för en ”aktivitet Händelseloggläsare” så här:</span><span class="sxs-lookup"><span data-stu-id="c9602-172">For example, using hello above table you could create a custom RBAC role for an “Activity Log Reader” like this:</span></span>

```powershell
$role = Get-AzureRmRoleDefinition "Reader"
$role.Id = $null
$role.Name = "Activity Log Reader"
$role.Description = "Can view activity logs."
$role.Actions.Clear()
$role.Actions.Add("Microsoft.Insights/eventtypes/*")
$role.AssignableScopes.Clear()
$role.AssignableScopes.Add("/subscriptions/mySubscription")
New-AzureRmRoleDefinition -Role $role 
```

## <a name="security-considerations-for-monitoring-data"></a><span data-ttu-id="c9602-173">Säkerhetsaspekter för övervakning av data</span><span class="sxs-lookup"><span data-stu-id="c9602-173">Security considerations for monitoring data</span></span>
<span data-ttu-id="c9602-174">Övervakningsdata – särskilt loggfiler, kan innehålla känslig information, till exempel IP-adresser eller användarnamn.</span><span class="sxs-lookup"><span data-stu-id="c9602-174">Monitoring data—particularly log files—can contain sensitive information, such as IP addresses or user names.</span></span> <span data-ttu-id="c9602-175">Övervakningsdata från Azure levereras i tre grundläggande formulär:</span><span class="sxs-lookup"><span data-stu-id="c9602-175">Monitoring data from Azure comes in three basic forms:</span></span>

1. <span data-ttu-id="c9602-176">hello aktivitetsloggen, som beskriver alla kontroll-plan åtgärder på Azure-prenumerationen.</span><span class="sxs-lookup"><span data-stu-id="c9602-176">hello Activity Log, which describes all control-plane actions on your Azure subscription.</span></span>
2. <span data-ttu-id="c9602-177">Diagnostikloggar som loggar som orsakat av en resurs.</span><span class="sxs-lookup"><span data-stu-id="c9602-177">Diagnostic Logs, which are logs emitted by a resource.</span></span>
3. <span data-ttu-id="c9602-178">Mått som orsakat av resurser.</span><span class="sxs-lookup"><span data-stu-id="c9602-178">Metrics, which are emitted by resources.</span></span>

<span data-ttu-id="c9602-179">Alla tre av följande datatyper kan lagras i ett lagringskonto eller direktuppspelas tooEvent hubben, som är allmänt Azure-resurser.</span><span class="sxs-lookup"><span data-stu-id="c9602-179">All three of these data types can be stored in a storage account or streamed tooEvent Hub, both of which are general-purpose Azure resources.</span></span> <span data-ttu-id="c9602-180">Eftersom de är allmänna resurser är att skapa, ta bort och att nå dem en privilegierad åtgärd som vanligtvis är reserverade för en administratör.</span><span class="sxs-lookup"><span data-stu-id="c9602-180">Because these are general-purpose resources, creating, deleting, and accessing them is a privileged operation usually reserved for an administrator.</span></span> <span data-ttu-id="c9602-181">Vi rekommenderar att du använder följande metoder för att övervaka-relaterade resurser tooprevent missbruk hello:</span><span class="sxs-lookup"><span data-stu-id="c9602-181">We suggest that you use hello following practices for monitoring-related resources tooprevent misuse:</span></span>

* <span data-ttu-id="c9602-182">Använd ett enda, särskilt storage-konto för övervakningsdata.</span><span class="sxs-lookup"><span data-stu-id="c9602-182">Use a single, dedicated storage account for monitoring data.</span></span> <span data-ttu-id="c9602-183">Om du behöver tooseparate övervakningsdata i flera lagringskonton Dela aldrig användning av ett lagringskonto mellan övervakning och icke-övervakning av data, som det av misstag kan ge dem som bara behöver åtkomst till toomonitoring data (t.ex.</span><span class="sxs-lookup"><span data-stu-id="c9602-183">If you need tooseparate monitoring data into multiple storage accounts, never share usage of a storage account between monitoring and non-monitoring data, as this may inadvertently give those who only need access toomonitoring data (eg.</span></span> <span data-ttu-id="c9602-184">en tredje parts SIEM) dataåtkomst toonon-övervakning.</span><span class="sxs-lookup"><span data-stu-id="c9602-184">a third-party SIEM) access toonon-monitoring data.</span></span>
* <span data-ttu-id="c9602-185">Använd ett enda, särskilt Service Bus eller Event Hub namnområde i alla diagnostikinställningar för hello samma skäl som ovan.</span><span class="sxs-lookup"><span data-stu-id="c9602-185">Use a single, dedicated Service Bus or Event Hub namespace across all diagnostic settings for hello same reason as above.</span></span>
* <span data-ttu-id="c9602-186">Begränsa åtkomst toomonitoring-relaterade storage-konton eller event hubs genom att hålla dem i en separat resursgrupp och [använda omfång](../active-directory/role-based-access-control-what-is.md#basics-of-access-management-in-azure) på din övervakning roller toolimit åtkomst tooonly som resursgruppen.</span><span class="sxs-lookup"><span data-stu-id="c9602-186">Limit access toomonitoring-related storage accounts or event hubs by keeping them in a separate resource group, and [use scope](../active-directory/role-based-access-control-what-is.md#basics-of-access-management-in-azure) on your monitoring roles toolimit access tooonly that resource group.</span></span>
* <span data-ttu-id="c9602-187">Aldrig tillåta hello ListKeys storage-konton eller händelsehubbar definitionsområdet prenumeration när en användare bara behöver åtkomst till toomonitoring data.</span><span class="sxs-lookup"><span data-stu-id="c9602-187">Never grant hello ListKeys permission for either storage accounts or event hubs at subscription scope when a user only needs access toomonitoring data.</span></span> <span data-ttu-id="c9602-188">I stället ge dessa behörigheter toohello användare på en resurs eller resursgrupp (om du har en särskild övervakning resursgrupp) omfång.</span><span class="sxs-lookup"><span data-stu-id="c9602-188">Instead, give these permissions toohello user at a resource or resource group (if you have a dedicated monitoring resource group) scope.</span></span>

### <a name="limiting-access-toomonitoring-related-storage-accounts"></a><span data-ttu-id="c9602-189">Begränsa åtkomst toomonitoring-relaterade storage-konton</span><span class="sxs-lookup"><span data-stu-id="c9602-189">Limiting access toomonitoring-related storage accounts</span></span>
<span data-ttu-id="c9602-190">När en användare eller ett program behöver åtkomst till toomonitoring data i ett lagringskonto, bör du [Generera en konto-SAS](https://msdn.microsoft.com/library/azure/mt584140.aspx) för hello storage-konto som innehåller övervakningsdata med servicenivåer läsbehörighet tooblob lagring.</span><span class="sxs-lookup"><span data-stu-id="c9602-190">When a user or application needs access toomonitoring data in a storage account, you should [generate an Account SAS](https://msdn.microsoft.com/library/azure/mt584140.aspx) on hello storage account that contains monitoring data with service-level read-only access tooblob storage.</span></span> <span data-ttu-id="c9602-191">Detta kan se ut i PowerShell:</span><span class="sxs-lookup"><span data-stu-id="c9602-191">In PowerShell, this might look like:</span></span>

```powershell
$context = New-AzureStorageContext -ConnectionString "[connection string for your monitoring Storage Account]"
$token = New-AzureStorageAccountSASToken -ResourceType Service -Service Blob -Permission "rl" -Context $context
```

<span data-ttu-id="c9602-192">Du kan sedan ge hello token toohello entitet som behöver tooread från detta lagringskonto och den kan listan och läsa från alla blobbar i det storage-kontot.</span><span class="sxs-lookup"><span data-stu-id="c9602-192">You can then give hello token toohello entity that needs tooread from that storage account, and it can list and read from all blobs in that storage account.</span></span>

<span data-ttu-id="c9602-193">Om du behöver toocontrol behörigheten med RBAC kan bevilja du den entitet hello Microsoft.Storage/storageAccounts/listkeys/action behörighet för att viss storage-konto.</span><span class="sxs-lookup"><span data-stu-id="c9602-193">Alternatively, if you need toocontrol this permission with RBAC, you can grant that entity hello Microsoft.Storage/storageAccounts/listkeys/action permission on that particular storage account.</span></span> <span data-ttu-id="c9602-194">Detta är nödvändigt för användare som behöver toobe kan tooset ett diagnostiska inställningen eller loggfil profil tooarchive tooa storage-konto.</span><span class="sxs-lookup"><span data-stu-id="c9602-194">This is necessary for users who need toobe able tooset a diagnostic setting or log profile tooarchive tooa storage account.</span></span> <span data-ttu-id="c9602-195">Du kan till exempel skapa hello följande anpassade RBAC roll för en användare eller program som bara behöver tooread från ett lagringskonto:</span><span class="sxs-lookup"><span data-stu-id="c9602-195">For example, you could create hello following custom RBAC role for a user or application that only needs tooread from one storage account:</span></span>

```powershell
$role = Get-AzureRmRoleDefinition "Reader"
$role.Id = $null
$role.Name = "Monitoring Storage Account Reader"
$role.Description = "Can get hello storage account keys for a monitoring storage account."
$role.Actions.Clear()
$role.Actions.Add("Microsoft.Storage/storageAccounts/listkeys/action")
$role.Actions.Add("Microsoft.Storage/storageAccounts/Read")
$role.AssignableScopes.Clear()
$role.AssignableScopes.Add("/subscriptions/mySubscription/resourceGroups/myResourceGroup/providers/Microsoft.Storage/storageAccounts/myMonitoringStorageAccount")
New-AzureRmRoleDefinition -Role $role 
```

> [!WARNING]
> <span data-ttu-id="c9602-196">Hej ListKeys behörighet kan hello användaren toolist hello primära och sekundära nycklar för lagringskonto.</span><span class="sxs-lookup"><span data-stu-id="c9602-196">hello ListKeys permission enables hello user toolist hello primary and secondary storage account keys.</span></span> <span data-ttu-id="c9602-197">De här nycklarna bevilja hello alla signerade behörigheter (läsa, skriva, skapa BLOB, ta bort blobbar osv) för alla signerade tjänster (blob, kön, tabell, fil) i detta lagringskonto.</span><span class="sxs-lookup"><span data-stu-id="c9602-197">These keys grant hello user all signed permissions (read, write, create blobs, delete blobs, etc.) across all signed services (blob, queue, table, file) in that storage account.</span></span> <span data-ttu-id="c9602-198">Vi rekommenderar att du använder en konto-SAS ovan när det är möjligt.</span><span class="sxs-lookup"><span data-stu-id="c9602-198">We recommend using an Account SAS described above when possible.</span></span>
> 
> 

### <a name="limiting-access-toomonitoring-related-event-hubs"></a><span data-ttu-id="c9602-199">Begränsa åtkomst toomonitoring-relaterade händelsehubbar</span><span class="sxs-lookup"><span data-stu-id="c9602-199">Limiting access toomonitoring-related event hubs</span></span>
<span data-ttu-id="c9602-200">Ett liknande mönster kan följas av händelsehubbar, men du måste först toocreate en dedikerad lyssna auktoriseringsregel.</span><span class="sxs-lookup"><span data-stu-id="c9602-200">A similar pattern can be followed with event hubs, but first you need toocreate a dedicated Listen authorization rule.</span></span> <span data-ttu-id="c9602-201">Om du vill toogrant åtkomst tooan program som bara behöver toolisten toomonitoring-relaterade händelsehubbar hello följande:</span><span class="sxs-lookup"><span data-stu-id="c9602-201">If you want toogrant access tooan application that only needs toolisten toomonitoring-related event hubs, do hello following:</span></span>

1. <span data-ttu-id="c9602-202">Skapa en princip för delad åtkomst på hello händelse nav som har skapats för strömning övervakningsdata med endast lyssna anspråk.</span><span class="sxs-lookup"><span data-stu-id="c9602-202">Create a shared access policy on hello event hub(s) that were created for streaming monitoring data with only Listen claims.</span></span> <span data-ttu-id="c9602-203">Detta kan göras i hello-portalen.</span><span class="sxs-lookup"><span data-stu-id="c9602-203">This can be done in hello portal.</span></span> <span data-ttu-id="c9602-204">T.ex, kan du anropa den ”monitoringReadOnly”.</span><span class="sxs-lookup"><span data-stu-id="c9602-204">For example, you might call it “monitoringReadOnly.”</span></span> <span data-ttu-id="c9602-205">Om det är möjligt ska toogive som nyckeln direkt toohello konsumenten och hoppa över hello nästa steg.</span><span class="sxs-lookup"><span data-stu-id="c9602-205">If possible, you will want toogive that key directly toohello consumer and skip hello next step.</span></span>
2. <span data-ttu-id="c9602-206">Om hello konsumenten måste toobe kan tooget hello viktiga ad hoc-, bevilja hello hello ListKeys användaråtgärder för den händelsehubben.</span><span class="sxs-lookup"><span data-stu-id="c9602-206">If hello consumer needs toobe able tooget hello key ad-hoc, grant hello user hello ListKeys action for that event hub.</span></span> <span data-ttu-id="c9602-207">Detta är också nödvändigt om en användare behöver toobe kan tooset en diagnostikinställningen eller logga profil toostream tooevent hubs.</span><span class="sxs-lookup"><span data-stu-id="c9602-207">This is also necessary for users who need toobe able tooset a diagnostic setting or log profile toostream tooevent hubs.</span></span> <span data-ttu-id="c9602-208">Du kan till exempel skapa en regel för RBAC:</span><span class="sxs-lookup"><span data-stu-id="c9602-208">For example, you might create an RBAC rule:</span></span>
   
   ```powershell
   $role = Get-AzureRmRoleDefinition "Reader"
   $role.Id = $null
   $role.Name = "Monitoring Event Hub Listener"
   $role.Description = "Can get hello key toolisten tooan event hub streaming monitoring data."
   $role.Actions.Clear()
   $role.Actions.Add("Microsoft.ServiceBus/namespaces/authorizationrules/listkeys/action")
   $role.Actions.Add("Microsoft.ServiceBus/namespaces/Read")
   $role.AssignableScopes.Clear()
   $role.AssignableScopes.Add("/subscriptions/mySubscription/resourceGroups/myResourceGroup/providers/Microsoft.ServiceBus/namespaces/mySBNameSpace")
   New-AzureRmRoleDefinition -Role $role 
   ```

## <a name="next-steps"></a><span data-ttu-id="c9602-209">Nästa steg</span><span class="sxs-lookup"><span data-stu-id="c9602-209">Next steps</span></span>
* [<span data-ttu-id="c9602-210">Läs mer om RBAC och behörigheter i Resource Manager</span><span class="sxs-lookup"><span data-stu-id="c9602-210">Read about RBAC and permissions in Resource Manager</span></span>](../active-directory/role-based-access-control-what-is.md)
* [<span data-ttu-id="c9602-211">Läs hello översikt över övervakning i Azure</span><span class="sxs-lookup"><span data-stu-id="c9602-211">Read hello overview of monitoring in Azure</span></span>](monitoring-overview.md)


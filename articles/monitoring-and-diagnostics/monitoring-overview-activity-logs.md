---
title: "Översikt över Azure aktivitetsloggen | Microsoft Docs"
description: "Lär dig vad Azure-aktivitetsloggen är och hur du kan använda den för att förstå händelser i din Azure-prenumeration."
author: johnkemnetz
manager: orenr
editor: 
services: monitoring-and-diagnostics
documentationcenter: monitoring-and-diagnostics
ms.assetid: c274782f-039d-4c28-9ddb-f89ce21052c7
ms.service: monitoring-and-diagnostics
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 08/02/2017
ms.author: johnkem
ms.openlocfilehash: 8ff9f73fc0732cd2227b7e0cc1091e04d69014eb
ms.sourcegitcommit: 50e23e8d3b1148ae2d36dad3167936b4e52c8a23
ms.translationtype: MT
ms.contentlocale: sv-SE
ms.lasthandoff: 08/18/2017
---
# <a name="monitor-subscription-activity-with-the-azure-activity-log"></a><span data-ttu-id="74b28-103">Övervakaraktiviteten i prenumerationen med Azure-aktivitetsloggen</span><span class="sxs-lookup"><span data-stu-id="74b28-103">Monitor Subscription Activity with the Azure Activity Log</span></span>
<span data-ttu-id="74b28-104">Den **Azure-aktivitetsloggen** är en prenumerationslogg som ger inblick i prenumerationsnivån händelser som har inträffat i Azure.</span><span class="sxs-lookup"><span data-stu-id="74b28-104">The **Azure Activity Log** is a subscription log that provides insight into subscription-level events that have occurred in Azure.</span></span> <span data-ttu-id="74b28-105">Detta omfattar en mängd data från Azure Resource Manager användningsdata till uppdateringar på händelser för Hälsotjänst.</span><span class="sxs-lookup"><span data-stu-id="74b28-105">This includes a range of data, from Azure Resource Manager operational data to updates on Service Health events.</span></span> <span data-ttu-id="74b28-106">Aktivitetsloggen tidigare kallades ”granskningsloggar” eller ”operativa loggar” eftersom de administrativa kategorin rapporter kontroll-plan händelserna för dina prenumerationer.</span><span class="sxs-lookup"><span data-stu-id="74b28-106">The Activity Log was previously known as “Audit Logs” or “Operational Logs,” since the Administrative category reports control-plane events for your subscriptions.</span></span> <span data-ttu-id="74b28-107">Använder aktivitetsloggen, kan du bestämma den ' vad som, och när ' för alla skrivåtgärder (PUT, POST, ta bort) tas för de resurser i din prenumeration.</span><span class="sxs-lookup"><span data-stu-id="74b28-107">Using the Activity Log, you can determine the ‘what, who, and when’ for any write operations (PUT, POST, DELETE) taken on the resources in your subscription.</span></span> <span data-ttu-id="74b28-108">Du kan också få status för åtgärden och andra relevanta egenskaper.</span><span class="sxs-lookup"><span data-stu-id="74b28-108">You can also understand the status of the operation and other relevant properties.</span></span> <span data-ttu-id="74b28-109">Aktivitetsloggen omfattar inte läsåtgärder (GET) eller åtgärder för resurser som använder klassiskt / ”RDFE” modellen.</span><span class="sxs-lookup"><span data-stu-id="74b28-109">The Activity Log does not include read (GET) operations or operations for resources that use the Classic/"RDFE" model.</span></span>

![<span data-ttu-id="74b28-110">Aktiviteten loggar eller andra typer av loggar</span><span class="sxs-lookup"><span data-stu-id="74b28-110">Activity Logs vs other types of logs</span></span> ](./media/monitoring-overview-activity-logs/Activity_Log_vs_other_logs_v5.png)

<span data-ttu-id="74b28-111">Bild 1: Skicka aktivitetsloggar vs andra typer av loggar</span><span class="sxs-lookup"><span data-stu-id="74b28-111">Figure 1: Activity Logs vs other types of logs</span></span>

<span data-ttu-id="74b28-112">Aktivitetsloggen skiljer sig från [diagnostikloggar](monitoring-overview-of-diagnostic-logs.md).</span><span class="sxs-lookup"><span data-stu-id="74b28-112">The Activity Log differs from [Diagnostic Logs](monitoring-overview-of-diagnostic-logs.md).</span></span> <span data-ttu-id="74b28-113">Aktivitetsloggar ger information om åtgärder på en resurs från utsidan (”kontrollplan”).</span><span class="sxs-lookup"><span data-stu-id="74b28-113">Activity Logs provide data about the operations on a resource from the outside (the "control plane").</span></span> <span data-ttu-id="74b28-114">Diagnostik loggar orsakat av en resurs och ger information om handhavandet av resursen (”dataplan”).</span><span class="sxs-lookup"><span data-stu-id="74b28-114">Diagnostics Logs are emitted by a resource and provide information about the operation of that resource (the "data plane").</span></span>

<span data-ttu-id="74b28-115">Du kan hämta händelser från din aktivitetsloggen med Azure-portalen, CLI, PowerShell-cmdletar och REST-API för Azure-Monitor.</span><span class="sxs-lookup"><span data-stu-id="74b28-115">You can retrieve events from your Activity Log using the Azure portal, CLI, PowerShell cmdlets, and Azure Monitor REST API.</span></span>


> [!WARNING]
> <span data-ttu-id="74b28-116">Azure-aktivitetsloggen är främst för aktiviteter som sker i Azure Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="74b28-116">The Azure Activity Log is primarily for activities that occur in Azure Resource Manager.</span></span> <span data-ttu-id="74b28-117">Den spårar inte resurser med hjälp av den klassiska/RDFE-modellen.</span><span class="sxs-lookup"><span data-stu-id="74b28-117">It does not track resources using the Classic/RDFE model.</span></span> <span data-ttu-id="74b28-118">Vissa typer av klassiska resurser har en proxy-resursprovidern i Azure Resource Manager (till exempel Microsoft.ClassicCompute).</span><span class="sxs-lookup"><span data-stu-id="74b28-118">Some Classic resource types have a proxy resource provider in Azure Resource Manager (for example, Microsoft.ClassicCompute).</span></span> <span data-ttu-id="74b28-119">Om du interagerar med en klassisk resurstyp via Azure Resource Manager med hjälp av dessa providers för proxy-resurs visas åtgärderna i aktivitetsloggen.</span><span class="sxs-lookup"><span data-stu-id="74b28-119">If you interact with a Classic resource type through Azure Resource Manager using these proxy resource providers, the operations appear in the Activity Log.</span></span> <span data-ttu-id="74b28-120">Om du interagerar med en klassisk resurstyp i klassiskt portalen eller på annat sätt utanför Azure Resource Manager-proxyservrar registrerade dina åtgärder endast i loggen igen.</span><span class="sxs-lookup"><span data-stu-id="74b28-120">If you interact with a Classic resource type in the Classic portal or otherwise outside of the Azure Resource Manager proxies, your actions are only recorded in the Operation Log.</span></span> <span data-ttu-id="74b28-121">Loggen för åtgärden är endast tillgänglig i den klassiska portalen.</span><span class="sxs-lookup"><span data-stu-id="74b28-121">The Operation Log is accessible only in the Classic portal.</span></span>
>
>

<span data-ttu-id="74b28-122">Visa följande videoklipp introduktion till aktivitetsloggen.</span><span class="sxs-lookup"><span data-stu-id="74b28-122">View the following video introducing the Activity Log.</span></span>
> [!VIDEO https://channel9.msdn.com/Blogs/Seth-Juarez/Logs-John-Kemnetz/player]
> 
>

## <a name="categories-in-the-activity-log"></a><span data-ttu-id="74b28-123">Kategorier i aktivitetsloggen</span><span class="sxs-lookup"><span data-stu-id="74b28-123">Categories in the Activity Log</span></span>
<span data-ttu-id="74b28-124">Aktivitetsloggen innehåller flera kategorier av data.</span><span class="sxs-lookup"><span data-stu-id="74b28-124">The Activity Log contains several categories of data.</span></span> <span data-ttu-id="74b28-125">Mer information om scheman av dessa kategorier [finns i den här artikeln](monitoring-activity-log-schema.md).</span><span class="sxs-lookup"><span data-stu-id="74b28-125">For full details on the schemata of these categories, [see this article](monitoring-activity-log-schema.md).</span></span> <span data-ttu-id="74b28-126">Exempel på dessa är:</span><span class="sxs-lookup"><span data-stu-id="74b28-126">These include:</span></span>
* <span data-ttu-id="74b28-127">**Administrativa** -den här kategorin innehåller posten för alla skapa, uppdatera, ta bort och åtgärden åtgärder utföras via Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="74b28-127">**Administrative** - This category contains the record of all create, update, delete, and action operations performed through Resource Manager.</span></span> <span data-ttu-id="74b28-128">Exempel på vilka typer av händelser som visas i den här kategorin är ”Skapa virtuell dator” och ”ta bort nätverkssäkerhetsgrupp” varje åtgärd som en användare eller program med hjälp av hanteraren för filserverresurser modelleras som en åtgärd på en viss resurstyp.</span><span class="sxs-lookup"><span data-stu-id="74b28-128">Examples of the types of events you would see in this category include "create virtual machine" and "delete network security group" Every action taken by a user or application using Resource Manager is modeled as an operation on a particular resource type.</span></span> <span data-ttu-id="74b28-129">Om åtgärdstypen är Write-, Delete- eller åtgärd, är start-och lyckas eller misslyckas för denna åtgärd registrerade i den administrativa kategorin.</span><span class="sxs-lookup"><span data-stu-id="74b28-129">If the operation type is Write, Delete, or Action, the records of both the start and success or fail of that operation are recorded in the Administrative category.</span></span> <span data-ttu-id="74b28-130">Den administrativa kategorin omfattar även ändringar rollbaserad åtkomstkontroll i en prenumeration.</span><span class="sxs-lookup"><span data-stu-id="74b28-130">The Administrative category also includes any changes to role-based access control in a subscription.</span></span>
* <span data-ttu-id="74b28-131">**Tjänstens hälsa** -den här kategorin innehåller posten för alla service hälsa incidenter som har inträffat i Azure.</span><span class="sxs-lookup"><span data-stu-id="74b28-131">**Service Health** - This category contains the record of any service health incidents that have occurred in Azure.</span></span> <span data-ttu-id="74b28-132">Ett exempel på typen av händelse visas i den här kategorin är ”SQL Azure i östra USA upplever driftstopp”.</span><span class="sxs-lookup"><span data-stu-id="74b28-132">An example of the type of event you would see in this category is "SQL Azure in East US is experiencing downtime."</span></span> <span data-ttu-id="74b28-133">Hälsa av tjänsten-händelser finns i fem sorter: åtgärd krävs stödd återställning, Incident, underhåll, Information eller säkerhet, och visas endast om du har en resurs i den prenumeration som skulle påverkas av händelsen.</span><span class="sxs-lookup"><span data-stu-id="74b28-133">Service health events come in five varieties: Action Required, Assisted Recovery, Incident, Maintenance, Information, or Security, and only appear if you have a resource in the subscription that would be impacted by the event.</span></span>
* <span data-ttu-id="74b28-134">**Varning** -den här kategorin innehåller posten för alla aktiveringar av Azure-aviseringar.</span><span class="sxs-lookup"><span data-stu-id="74b28-134">**Alert** - This category contains the record of all activations of Azure alerts.</span></span> <span data-ttu-id="74b28-135">Ett exempel på typen av händelse visas i den här kategorin är ”processor på myVM har varit över 80 under de senaste fem minuterna”.</span><span class="sxs-lookup"><span data-stu-id="74b28-135">An example of the type of event you would see in this category is "CPU % on myVM has been over 80 for the past 5 minutes."</span></span> <span data-ttu-id="74b28-136">En mängd Azure system har en aviseringar begrepp – du kan definiera en regel av något slag och ett meddelande när villkor matchar regeln.</span><span class="sxs-lookup"><span data-stu-id="74b28-136">A variety of Azure systems have an alerting concept -- you can define a rule of some sort and receive a notification when conditions match that rule.</span></span> <span data-ttu-id="74b28-137">Varje gång en stöds Azure aviseringstyp 'aktiveras,' eller villkoren är uppfyllda för att generera ett meddelande, en post på aktiveringen skickas även till den här kategorin för aktivitetsloggen.</span><span class="sxs-lookup"><span data-stu-id="74b28-137">Each time a supported Azure alert type 'activates,' or the conditions are met to generate a notification, a record of the activation is also pushed to this category of the Activity Log.</span></span>
* <span data-ttu-id="74b28-138">**Autoskala** -den här kategorin innehåller posten för alla händelser relaterade till åtgärden Autoskala motorns baserat på automatiska inställningar du har definierat i din prenumeration.</span><span class="sxs-lookup"><span data-stu-id="74b28-138">**Autoscale** - This category contains the record of any events related to the operation of the autoscale engine based on any autoscale settings you have defined in your subscription.</span></span> <span data-ttu-id="74b28-139">Ett exempel på typen av händelse visas i den här kategorin är ”Autoskala skalas upp misslyckades”.</span><span class="sxs-lookup"><span data-stu-id="74b28-139">An example of the type of event you would see in this category is "Autoscale scale up action failed."</span></span> <span data-ttu-id="74b28-140">Använda autoskalning kan du automatiskt skala ut eller skala antalet instanser i en stöds resurstyp baserat på tid på dagen och/eller belastningen (mått) data med hjälp av en autoskalningsinställning.</span><span class="sxs-lookup"><span data-stu-id="74b28-140">Using autoscale, you can automatically scale out or scale in the number of instances in a supported resource type based on time of day and/or load (metric) data using an autoscale setting.</span></span> <span data-ttu-id="74b28-141">När villkoren är uppfyllda för att skala upp eller ned, start- och lyckades eller misslyckades händelser registreras i den här kategorin.</span><span class="sxs-lookup"><span data-stu-id="74b28-141">When the conditions are met to scale up or down, the start and succeeded or failed events are recorded in this category.</span></span>
* <span data-ttu-id="74b28-142">**Rekommendation** -den här kategorin innehåller rekommendation händelser från vissa typer av resurser, till exempel webbplatser och SQL-servrar.</span><span class="sxs-lookup"><span data-stu-id="74b28-142">**Recommendation** - This category contains recommendation events from certain resource types, such as web sites and SQL servers.</span></span> <span data-ttu-id="74b28-143">Dessa händelser ger rekommendationer för hur du bättre utnyttja dina resurser.</span><span class="sxs-lookup"><span data-stu-id="74b28-143">These events offer recommendations for how to better utilize your resources.</span></span> <span data-ttu-id="74b28-144">Du får bara händelser för den här typen om du har resurser som genererar rekommendationer.</span><span class="sxs-lookup"><span data-stu-id="74b28-144">You only receive events of this type if you have resources that emit recommendations.</span></span>
* <span data-ttu-id="74b28-145">**Princip-, säkerhets- och Resource Health** -dessa kategorier innehåller inte några händelser, de är reserverad för framtida användning.</span><span class="sxs-lookup"><span data-stu-id="74b28-145">**Policy, Security, and Resource Health** - These categories do not contain any events; they are reserved for future use.</span></span>

## <a name="event-schema-per-category"></a><span data-ttu-id="74b28-146">Händelseschema per kategori</span><span class="sxs-lookup"><span data-stu-id="74b28-146">Event schema per category</span></span>
[<span data-ttu-id="74b28-147">Se den här artikeln för att förstå aktivitetsloggen Händelseschema per kategori.</span><span class="sxs-lookup"><span data-stu-id="74b28-147">See this article to understand the Activity Log event schema per category.</span></span>](monitoring-activity-log-schema.md)

## <a name="what-you-can-do-with-the-activity-log"></a><span data-ttu-id="74b28-148">Vad du kan göra med aktivitetsloggen</span><span class="sxs-lookup"><span data-stu-id="74b28-148">What you can do with the Activity Log</span></span>
<span data-ttu-id="74b28-149">Här följer några av de saker som du kan göra med aktivitetsloggen:</span><span class="sxs-lookup"><span data-stu-id="74b28-149">Here are some of the things you can do with the Activity Log:</span></span>

![Azure-aktivitetsloggen](./media/monitoring-overview-activity-logs/Activity_Log_Overview_v3.png)


* <span data-ttu-id="74b28-151">Fråga efter och visa den i den **Azure-portalen**.</span><span class="sxs-lookup"><span data-stu-id="74b28-151">Query and view it in the **Azure portal**.</span></span>
* [<span data-ttu-id="74b28-152">Skapa en avisering för en aktivitet händelselogg.</span><span class="sxs-lookup"><span data-stu-id="74b28-152">Create an alert on an Activity Log event.</span></span>](monitoring-activity-log-alerts.md)
* <span data-ttu-id="74b28-153">[Strömma den till en **Händelsehubb** ](monitoring-stream-activity-logs-event-hubs.md) för införandet av en tjänst från tredje part eller anpassade analytics lösning, till exempel PowerBI.</span><span class="sxs-lookup"><span data-stu-id="74b28-153">[Stream it to an **Event Hub**](monitoring-stream-activity-logs-event-hubs.md) for ingestion by a third-party service or custom analytics solution such as PowerBI.</span></span>
* <span data-ttu-id="74b28-154">Analysera i PowerBI med hjälp av den [ **PowerBI Innehållspaketet**](https://powerbi.microsoft.com/documentation/powerbi-content-pack-azure-audit-logs/).</span><span class="sxs-lookup"><span data-stu-id="74b28-154">Analyze it in PowerBI using the [**PowerBI content pack**](https://powerbi.microsoft.com/documentation/powerbi-content-pack-azure-audit-logs/).</span></span>
* <span data-ttu-id="74b28-155">[Spara den till en **Lagringskonto** för arkivering eller Manuell kontroll](monitoring-archive-activity-log.md).</span><span class="sxs-lookup"><span data-stu-id="74b28-155">[Save it to a **Storage Account** for archival or manual inspection](monitoring-archive-activity-log.md).</span></span> <span data-ttu-id="74b28-156">Du kan ange kvarhållning tid (i dagar) med den **loggen profil**.</span><span class="sxs-lookup"><span data-stu-id="74b28-156">You can specify the retention time (in days) using the **Log Profile**.</span></span>
* <span data-ttu-id="74b28-157">Fråga den via PowerShell-cmdleten, CLI eller REST API.</span><span class="sxs-lookup"><span data-stu-id="74b28-157">Query it via PowerShell Cmdlet, CLI, or REST API.</span></span>

## <a name="query-the-activity-log-in-the-azure-portal"></a><span data-ttu-id="74b28-158">Frågan aktivitetsloggen i Azure-portalen</span><span class="sxs-lookup"><span data-stu-id="74b28-158">Query the Activity Log in the Azure portal</span></span>
<span data-ttu-id="74b28-159">Du kan visa din aktivitetsloggen på flera platser i Azure-portalen:</span><span class="sxs-lookup"><span data-stu-id="74b28-159">Within the Azure portal you can view your Activity Log in several places:</span></span>
* <span data-ttu-id="74b28-160">Den **aktivitetsloggen bladet**, du kan komma åt genom att söka efter aktivitetsloggen under ”fler tjänster” i det vänstra navigeringsfönstret.</span><span class="sxs-lookup"><span data-stu-id="74b28-160">The **Activity Log blade**, which you can access by searching for the Activity Log under "More Services" in the left-hand navigation pane.</span></span>
* <span data-ttu-id="74b28-161">Den **övervakaren bladet**, som visas som standard i det vänstra navigeringsfönstret.</span><span class="sxs-lookup"><span data-stu-id="74b28-161">The **Monitor blade**, which appears by default in the left-hand navigation pane.</span></span> <span data-ttu-id="74b28-162">Aktivitetsloggen är en del av den här Azure-Monitor-bladet.</span><span class="sxs-lookup"><span data-stu-id="74b28-162">The Activity Log is one section of this Azure Monitor blade.</span></span>
* <span data-ttu-id="74b28-163">Alla resurser **resursbladet**, till exempel bladet konfigurationen för en virtuell dator.</span><span class="sxs-lookup"><span data-stu-id="74b28-163">Any resource's **resource blade**, for example, the configuration blade for a Virtual Machine.</span></span> <span data-ttu-id="74b28-164">Aktivitetsloggen är vara något av avsnitten om de flesta av dessa resurs-blad och klicka på den automatiskt filtrerar händelser som rör specifika resursen.</span><span class="sxs-lookup"><span data-stu-id="74b28-164">The Activity Log is be one of the sections on most of these resource blades, and clicking on it automatically filters the events to those related to that specific resource.</span></span>

<span data-ttu-id="74b28-165">Du kan filtrera din aktivitetsloggen av fälten i Azure-portalen:</span><span class="sxs-lookup"><span data-stu-id="74b28-165">In the Azure portal, you can filter your Activity Log by these fields:</span></span>
* <span data-ttu-id="74b28-166">TimeSpan - tiden för start- och slutdatum för händelser.</span><span class="sxs-lookup"><span data-stu-id="74b28-166">Timespan - The start and end time for events.</span></span>
* <span data-ttu-id="74b28-167">Kategori – händelsekategori enligt beskrivningen ovan.</span><span class="sxs-lookup"><span data-stu-id="74b28-167">Category - The event category as described above.</span></span>
* <span data-ttu-id="74b28-168">Prenumerationen - namn för en eller flera Azure-prenumeration.</span><span class="sxs-lookup"><span data-stu-id="74b28-168">Subscription - One or more Azure subscription names.</span></span>
* <span data-ttu-id="74b28-169">Resursgrupp – en eller flera resursgrupper i dessa prenumerationer.</span><span class="sxs-lookup"><span data-stu-id="74b28-169">Resource group - One or more resource groups within those subscriptions.</span></span>
* <span data-ttu-id="74b28-170">Resurs (namn) - namnet på en viss resurs.</span><span class="sxs-lookup"><span data-stu-id="74b28-170">Resource (name) - The name of a specific resource.</span></span>
* <span data-ttu-id="74b28-171">Resurstyp - typ av resurs, till exempel Microsoft.Compute/virtualmachines.</span><span class="sxs-lookup"><span data-stu-id="74b28-171">Resource type - The type of resource, for example, Microsoft.Compute/virtualmachines.</span></span>
* <span data-ttu-id="74b28-172">Åtgärdsnamnet - namnet på en Azure Resource Manager-åtgärd, till exempel Microsoft.SQL/servers/Write.</span><span class="sxs-lookup"><span data-stu-id="74b28-172">Operation name - The name of an Azure Resource Manager operation, for example, Microsoft.SQL/servers/Write.</span></span>
* <span data-ttu-id="74b28-173">Allvarlighetsgrad - allvarlighetsgrad för händelse (kritisk information, varning, fel,).</span><span class="sxs-lookup"><span data-stu-id="74b28-173">Severity - The severity level of the event (Informational, Warning, Error, Critical).</span></span>
* <span data-ttu-id="74b28-174">Händelse som initieras av - 'anroparen' eller användaren som utförde åtgärden.</span><span class="sxs-lookup"><span data-stu-id="74b28-174">Event initiated by - The 'caller,' or user who performed the operation.</span></span>
* <span data-ttu-id="74b28-175">Öppna sökning - detta är en öppen Sök textruta som söker efter strängen i alla fält i alla händelser.</span><span class="sxs-lookup"><span data-stu-id="74b28-175">Open search - This is an open text search box that searches for that string across all fields in all events.</span></span>

<span data-ttu-id="74b28-176">När du har definierat en uppsättning filter kan spara du den som en fråga som är beständiga mellan sessioner om du behöver utföra samma fråga med dessa filter igen i framtiden.</span><span class="sxs-lookup"><span data-stu-id="74b28-176">Once you have defined a set of filters, you can save it as a query that is persisted across sessions if you ever need to perform the same query with those filters applied again in the future.</span></span> <span data-ttu-id="74b28-177">Du kan även fästa en fråga på instrumentpanelen i Azure ska alltid hålla ett öga på specifika händelser.</span><span class="sxs-lookup"><span data-stu-id="74b28-177">You can also pin a query to your Azure dashboard to always keep an eye on specific events.</span></span>

<span data-ttu-id="74b28-178">Klicka på ”Använd” kör frågan och visa alla matchande händelser.</span><span class="sxs-lookup"><span data-stu-id="74b28-178">Clicking "Apply" runs your query and show all matching events.</span></span> <span data-ttu-id="74b28-179">När du klickar på en händelse i listan visar en sammanfattning av händelsen samt att händelsen fullständig rådata JSON.</span><span class="sxs-lookup"><span data-stu-id="74b28-179">Clicking on any event in the list shows the summary of that event as well as the full raw JSON of that event.</span></span>

<span data-ttu-id="74b28-180">För ännu mer kraft kan du klicka på den **loggen Sök** ikon som visar data i aktivitetsloggen den [Log Analytics aktivitet logganalys lösning](../log-analytics/log-analytics-activity.md).</span><span class="sxs-lookup"><span data-stu-id="74b28-180">For even more power, you can click the **Log Search** icon, which displays your Activity Log data in the [Log Analytics Activity Log Analytics solution](../log-analytics/log-analytics-activity.md).</span></span> <span data-ttu-id="74b28-181">Bladet aktivitetsloggen erbjuder en grundläggande filter/Bläddra upplevelse på loggar, men Log Analytics gör det möjligt att pivotera, fråga och visualisera dina data mer kraftfulla sätt.</span><span class="sxs-lookup"><span data-stu-id="74b28-181">The Activity Log blade offers a basic filter/browse experience on logs, but Log Analytics enables you to pivot, query, and visualize your data in more powerful ways.</span></span>

## <a name="export-the-activity-log-with-a-log-profile"></a><span data-ttu-id="74b28-182">Exportera aktivitetsloggen med en logg-profil</span><span class="sxs-lookup"><span data-stu-id="74b28-182">Export the Activity Log with a Log Profile</span></span>
<span data-ttu-id="74b28-183">En **loggen profil** styr hur din aktivitetsloggen exporteras.</span><span class="sxs-lookup"><span data-stu-id="74b28-183">A **Log Profile** controls how your Activity Log is exported.</span></span> <span data-ttu-id="74b28-184">Med en logg-profil kan konfigurera du:</span><span class="sxs-lookup"><span data-stu-id="74b28-184">Using a Log Profile, you can configure:</span></span>

* <span data-ttu-id="74b28-185">Där aktivitetsloggen ska skickas (Storage-konto eller Händelsehubbar)</span><span class="sxs-lookup"><span data-stu-id="74b28-185">Where the Activity Log should be sent (Storage Account or Event Hubs)</span></span>
* <span data-ttu-id="74b28-186">Vilka kategorier (, ta bort, skrivåtgärd) ska skickas.</span><span class="sxs-lookup"><span data-stu-id="74b28-186">Which event categories (Write, Delete, Action) should be sent.</span></span> <span data-ttu-id="74b28-187">*Enligt ”kategori” i loggen profiler och aktivitetsloggen händelser är olika. I profilen loggen representerar ”kategori” typ av åtgärd (, ta bort, skrivåtgärd). Egenskapen ”kategori” representerar käll- eller typen av händelse (till exempel Administration, ServiceHealth, aviseringen och mer) i en aktivitet händelselogg.*</span><span class="sxs-lookup"><span data-stu-id="74b28-187">*The meaning of "category" in Log Profiles and Activity Log events is different. In the Log Profile, "Category" represents the operation type (Write, Delete, Action). In an Activity Log event, the "category" property represents the source or type of event (for example, Administration, ServiceHealth, Alert, and more).*</span></span>
* <span data-ttu-id="74b28-188">Vilka regioner (platser) ska exporteras.</span><span class="sxs-lookup"><span data-stu-id="74b28-188">Which regions (locations) should be exported.</span></span> <span data-ttu-id="74b28-189">Se till att inkludera ”globala” som många händelser i aktivitetsloggen är globala händelser.</span><span class="sxs-lookup"><span data-stu-id="74b28-189">Make sure to include "global," as many events in the Activity Log are global events.</span></span>
* <span data-ttu-id="74b28-190">Hur länge aktivitetsloggen ska behållas i ett Lagringskonto.</span><span class="sxs-lookup"><span data-stu-id="74b28-190">How long the Activity Log should be retained in a Storage Account.</span></span>
    - <span data-ttu-id="74b28-191">En kvarhållning av noll dagar innebär loggar behålls alltid.</span><span class="sxs-lookup"><span data-stu-id="74b28-191">A retention of zero days means logs are kept forever.</span></span> <span data-ttu-id="74b28-192">I annat fall kan värdet vara valfritt antal dagar mellan 1 och 2147483647.</span><span class="sxs-lookup"><span data-stu-id="74b28-192">Otherwise, the value can be any number of days between 1 and 2147483647.</span></span>
    - <span data-ttu-id="74b28-193">Om bevarandeprinciper har angetts men lagring loggar i ett Storage-konto har inaktiverats (till exempel om endast Händelsehubbar eller OMS-alternativen är markerade), har bevarandeprinciper ingen effekt.</span><span class="sxs-lookup"><span data-stu-id="74b28-193">If retention policies are set but storing logs in a Storage Account is disabled (for example, if only Event Hubs or OMS options are selected), the retention policies have no effect.</span></span>
    - <span data-ttu-id="74b28-194">Bevarandeprinciper är tillämpade per dag, så i slutet av dagen (UTC) loggar från den dagen är nu utöver kvarhållning princip tas bort.</span><span class="sxs-lookup"><span data-stu-id="74b28-194">Retention policies are applied per-day, so at the end of a day (UTC), logs from the day that is now beyond the retention policy are deleted.</span></span> <span data-ttu-id="74b28-195">Till exempel om du har en bevarandeprincip på en dag skulle i början av dagen idag loggar från dag före igår tas bort.</span><span class="sxs-lookup"><span data-stu-id="74b28-195">For example, if you had a retention policy of one day, at the beginning of the day today the logs from the day before yesterday would be deleted.</span></span>

<span data-ttu-id="74b28-196">Du kan använda ett lagringsutrymme konto eller händelse hubb namnområde som inte är i samma prenumeration som en avger loggar.</span><span class="sxs-lookup"><span data-stu-id="74b28-196">You can use a storage account or event hub namespace that is not in the same subscription as the one emitting logs.</span></span> <span data-ttu-id="74b28-197">Den användare som konfigurerar inställningen måste ha RBAC lämplig åtkomst till båda prenumerationer.</span><span class="sxs-lookup"><span data-stu-id="74b28-197">The user who configures the setting must have the appropriate RBAC access to both subscriptions.</span></span>

<span data-ttu-id="74b28-198">De här inställningarna kan konfigureras via alternativet ”Export” i bladet aktivitetsloggen i portalen.</span><span class="sxs-lookup"><span data-stu-id="74b28-198">These settings can be configured via the “Export” option in the Activity Log blade in the portal.</span></span> <span data-ttu-id="74b28-199">De kan också konfigureras via programmering [med hjälp av REST API för Azure-Monitor](https://msdn.microsoft.com/library/azure/dn931927.aspx), PowerShell-cmdlets eller CLI.</span><span class="sxs-lookup"><span data-stu-id="74b28-199">They can also be configured programmatically [using the Azure Monitor REST API](https://msdn.microsoft.com/library/azure/dn931927.aspx), PowerShell cmdlets, or CLI.</span></span> <span data-ttu-id="74b28-200">En prenumeration kan bara ha en logg-profil.</span><span class="sxs-lookup"><span data-stu-id="74b28-200">A subscription can only have one log profile.</span></span>

### <a name="configure-log-profiles-using-the-azure-portal"></a><span data-ttu-id="74b28-201">Konfigurera loggen profiler med hjälp av Azure portal</span><span class="sxs-lookup"><span data-stu-id="74b28-201">Configure log profiles using the Azure portal</span></span>
<span data-ttu-id="74b28-202">Du kan strömma aktivitetsloggen till en Händelsehubb eller lagra dem i ett Lagringskonto med hjälp av alternativet ”Export” i Azure-portalen.</span><span class="sxs-lookup"><span data-stu-id="74b28-202">You can stream the Activity Log to an Event Hub or store them in a Storage Account by using the “Export” option in the Azure portal.</span></span>

1. <span data-ttu-id="74b28-203">Navigera till den **aktivitetsloggen** blad med hjälp av menyn till vänster i portalen.</span><span class="sxs-lookup"><span data-stu-id="74b28-203">Navigate to the **Activity Log** blade using the menu on the left side of the portal.</span></span>

    ![Navigera till aktivitetsloggen i portalen](./media/monitoring-overview-activity-logs/activity-logs-portal-navigate.png)
2. <span data-ttu-id="74b28-205">Klicka på den **exportera** längst upp på bladet.</span><span class="sxs-lookup"><span data-stu-id="74b28-205">Click the **Export** button at the top of the blade.</span></span>

    ![Exportera-knappen i portalen](./media/monitoring-overview-activity-logs/activity-logs-portal-export.png)
3. <span data-ttu-id="74b28-207">Du kan välja i bladet som visas:</span><span class="sxs-lookup"><span data-stu-id="74b28-207">In the blade that appears, you can select:</span></span>  
  * <span data-ttu-id="74b28-208">regioner som du vill exportera händelser</span><span class="sxs-lookup"><span data-stu-id="74b28-208">regions for which you would like to export events</span></span>
  * <span data-ttu-id="74b28-209">Storage-konto som du vill spara händelser</span><span class="sxs-lookup"><span data-stu-id="74b28-209">the Storage Account to which you would like to save events</span></span>
  * <span data-ttu-id="74b28-210">antal dagar som du vill behålla dessa händelser i lagringen.</span><span class="sxs-lookup"><span data-stu-id="74b28-210">the number of days you want to retain these events in storage.</span></span> <span data-ttu-id="74b28-211">En inställning på 0 dagar behåller alltid loggarna.</span><span class="sxs-lookup"><span data-stu-id="74b28-211">A setting of 0 days retains the logs forever.</span></span>
  * <span data-ttu-id="74b28-212">Service Bus Namespace som du vill att en Händelsehubb skapas för direktuppspelning av dessa händelser.</span><span class="sxs-lookup"><span data-stu-id="74b28-212">the Service Bus Namespace in which you would like an Event Hub to be created for streaming these events.</span></span>

     ![Exportera aktivitetsloggen bladet](./media/monitoring-overview-activity-logs/activity-logs-portal-export-blade.png)
4. <span data-ttu-id="74b28-214">Klicka på **spara** dessa inställningar ska sparas.</span><span class="sxs-lookup"><span data-stu-id="74b28-214">Click **Save** to save these settings.</span></span> <span data-ttu-id="74b28-215">Inställningarna tillämpas omedelbart till din prenumeration.</span><span class="sxs-lookup"><span data-stu-id="74b28-215">The settings are immediately be applied to your subscription.</span></span>

### <a name="configure-log-profiles-using-the-azure-powershell-cmdlets"></a><span data-ttu-id="74b28-216">Konfigurera loggen profiler med hjälp av Azure PowerShell-Cmdlets</span><span class="sxs-lookup"><span data-stu-id="74b28-216">Configure log profiles using the Azure PowerShell Cmdlets</span></span>
#### <a name="get-existing-log-profile"></a><span data-ttu-id="74b28-217">Hämta befintlig logg-profil</span><span class="sxs-lookup"><span data-stu-id="74b28-217">Get existing log profile</span></span>
```
Get-AzureRmLogProfile
```

#### <a name="add-a-log-profile"></a><span data-ttu-id="74b28-218">Lägg till en logg-profil</span><span class="sxs-lookup"><span data-stu-id="74b28-218">Add a log profile</span></span>
```
Add-AzureRmLogProfile -Name my_log_profile -StorageAccountId /subscriptions/s1/resourceGroups/myrg1/providers/Microsoft.Storage/storageAccounts/my_storage -serviceBusRuleId /subscriptions/s1/resourceGroups/Default-ServiceBus-EastUS/providers/Microsoft.ServiceBus/namespaces/mytestSB/authorizationrules/RootManageSharedAccessKey -Locations global,westus,eastus -RetentionInDays 90 -Categories Write,Delete,Action
```

| <span data-ttu-id="74b28-219">Egenskap</span><span class="sxs-lookup"><span data-stu-id="74b28-219">Property</span></span> | <span data-ttu-id="74b28-220">Krävs</span><span class="sxs-lookup"><span data-stu-id="74b28-220">Required</span></span> | <span data-ttu-id="74b28-221">Beskrivning</span><span class="sxs-lookup"><span data-stu-id="74b28-221">Description</span></span> |
| --- | --- | --- |
| <span data-ttu-id="74b28-222">Namn</span><span class="sxs-lookup"><span data-stu-id="74b28-222">Name</span></span> |<span data-ttu-id="74b28-223">Ja</span><span class="sxs-lookup"><span data-stu-id="74b28-223">Yes</span></span> |<span data-ttu-id="74b28-224">Namnet på loggen profilen.</span><span class="sxs-lookup"><span data-stu-id="74b28-224">Name of your log profile.</span></span> |
| <span data-ttu-id="74b28-225">StorageAccountId</span><span class="sxs-lookup"><span data-stu-id="74b28-225">StorageAccountId</span></span> |<span data-ttu-id="74b28-226">Nej</span><span class="sxs-lookup"><span data-stu-id="74b28-226">No</span></span> |<span data-ttu-id="74b28-227">Resurs-ID för det Lagringskonto där aktivitetsloggen ska sparas.</span><span class="sxs-lookup"><span data-stu-id="74b28-227">Resource ID of the Storage Account to which the Activity Log should be saved.</span></span> |
| <span data-ttu-id="74b28-228">serviceBusRuleId</span><span class="sxs-lookup"><span data-stu-id="74b28-228">serviceBusRuleId</span></span> |<span data-ttu-id="74b28-229">Nej</span><span class="sxs-lookup"><span data-stu-id="74b28-229">No</span></span> |<span data-ttu-id="74b28-230">Service Bus regel-ID för Service Bus-namnområde som har skapats i händelsehubbar.</span><span class="sxs-lookup"><span data-stu-id="74b28-230">Service Bus Rule ID for the Service Bus namespace you would like to have event hubs created in.</span></span> <span data-ttu-id="74b28-231">Är en sträng med formatet: `{service bus resource ID}/authorizationrules/{key name}`.</span><span class="sxs-lookup"><span data-stu-id="74b28-231">Is a string with this format: `{service bus resource ID}/authorizationrules/{key name}`.</span></span> |
| <span data-ttu-id="74b28-232">Platser</span><span class="sxs-lookup"><span data-stu-id="74b28-232">Locations</span></span> |<span data-ttu-id="74b28-233">Ja</span><span class="sxs-lookup"><span data-stu-id="74b28-233">Yes</span></span> |<span data-ttu-id="74b28-234">Kommaavgränsad lista över regioner som du vill samla in händelser för aktivitetsloggen.</span><span class="sxs-lookup"><span data-stu-id="74b28-234">Comma-separated list of regions for which you would like to collect Activity Log events.</span></span> |
| <span data-ttu-id="74b28-235">retentionInDays</span><span class="sxs-lookup"><span data-stu-id="74b28-235">RetentionInDays</span></span> |<span data-ttu-id="74b28-236">Ja</span><span class="sxs-lookup"><span data-stu-id="74b28-236">Yes</span></span> |<span data-ttu-id="74b28-237">Antal dagar för vilka händelser som ska behållas, mellan 1 och 2147483647.</span><span class="sxs-lookup"><span data-stu-id="74b28-237">Number of days for which events should be retained, between 1 and 2147483647.</span></span> <span data-ttu-id="74b28-238">Värdet noll lagrar loggarna på obestämd tid (alltid).</span><span class="sxs-lookup"><span data-stu-id="74b28-238">A value of zero stores the logs indefinitely (forever).</span></span> |
| <span data-ttu-id="74b28-239">Kategorier</span><span class="sxs-lookup"><span data-stu-id="74b28-239">Categories</span></span> |<span data-ttu-id="74b28-240">Nej</span><span class="sxs-lookup"><span data-stu-id="74b28-240">No</span></span> |<span data-ttu-id="74b28-241">Kommaavgränsad lista över kategorier som ska samlas in.</span><span class="sxs-lookup"><span data-stu-id="74b28-241">Comma-separated list of event categories that should be collected.</span></span> <span data-ttu-id="74b28-242">Möjliga värden är skriva och ta bort åtgärd.</span><span class="sxs-lookup"><span data-stu-id="74b28-242">Possible values are Write, Delete, and Action.</span></span> |

#### <a name="remove-a-log-profile"></a><span data-ttu-id="74b28-243">Ta bort en logg-profil</span><span class="sxs-lookup"><span data-stu-id="74b28-243">Remove a log profile</span></span>
```
Remove-AzureRmLogProfile -name my_log_profile
```

### <a name="configure-log-profiles-using-the-azure-cross-platform-cli"></a><span data-ttu-id="74b28-244">Konfigurera loggen profiler som använder Azure CLI för flera plattformar</span><span class="sxs-lookup"><span data-stu-id="74b28-244">Configure log profiles Using the Azure Cross-Platform CLI</span></span>
#### <a name="get-existing-log-profile"></a><span data-ttu-id="74b28-245">Hämta befintlig logg-profil</span><span class="sxs-lookup"><span data-stu-id="74b28-245">Get existing log profile</span></span>
```
azure insights logprofile list
```
```
azure insights logprofile get --name my_log_profile
```
<span data-ttu-id="74b28-246">Den `name` egenskapen ska vara namnet på loggen-profilen.</span><span class="sxs-lookup"><span data-stu-id="74b28-246">The `name` property should be the name of your log profile.</span></span>

#### <a name="add-a-log-profile"></a><span data-ttu-id="74b28-247">Lägg till en logg-profil</span><span class="sxs-lookup"><span data-stu-id="74b28-247">Add a log profile</span></span>
```
azure insights logprofile add --name my_log_profile --storageId /subscriptions/s1/resourceGroups/insights-integration/providers/Microsoft.Storage/storageAccounts/my_storage --serviceBusRuleId /subscriptions/s1/resourceGroups/Default-ServiceBus-EastUS/providers/Microsoft.ServiceBus/namespaces/mytestSB/authorizationrules/RootManageSharedAccessKey --locations global,westus,eastus,northeurope --retentionInDays 90 –categories Write,Delete,Action
```

| <span data-ttu-id="74b28-248">Egenskap</span><span class="sxs-lookup"><span data-stu-id="74b28-248">Property</span></span> | <span data-ttu-id="74b28-249">Krävs</span><span class="sxs-lookup"><span data-stu-id="74b28-249">Required</span></span> | <span data-ttu-id="74b28-250">Beskrivning</span><span class="sxs-lookup"><span data-stu-id="74b28-250">Description</span></span> |
| --- | --- | --- |
| <span data-ttu-id="74b28-251">namn</span><span class="sxs-lookup"><span data-stu-id="74b28-251">name</span></span> |<span data-ttu-id="74b28-252">Ja</span><span class="sxs-lookup"><span data-stu-id="74b28-252">Yes</span></span> |<span data-ttu-id="74b28-253">Namnet på loggen profilen.</span><span class="sxs-lookup"><span data-stu-id="74b28-253">Name of your log profile.</span></span> |
| <span data-ttu-id="74b28-254">storageId</span><span class="sxs-lookup"><span data-stu-id="74b28-254">storageId</span></span> |<span data-ttu-id="74b28-255">Nej</span><span class="sxs-lookup"><span data-stu-id="74b28-255">No</span></span> |<span data-ttu-id="74b28-256">Resurs-ID för det Lagringskonto där aktivitetsloggen ska sparas.</span><span class="sxs-lookup"><span data-stu-id="74b28-256">Resource ID of the Storage Account to which the Activity Log should be saved.</span></span> |
| <span data-ttu-id="74b28-257">serviceBusRuleId</span><span class="sxs-lookup"><span data-stu-id="74b28-257">serviceBusRuleId</span></span> |<span data-ttu-id="74b28-258">Nej</span><span class="sxs-lookup"><span data-stu-id="74b28-258">No</span></span> |<span data-ttu-id="74b28-259">Service Bus regel-ID för Service Bus-namnområde som har skapats i händelsehubbar.</span><span class="sxs-lookup"><span data-stu-id="74b28-259">Service Bus Rule ID for the Service Bus namespace you would like to have event hubs created in.</span></span> <span data-ttu-id="74b28-260">Är en sträng med formatet: `{service bus resource ID}/authorizationrules/{key name}`.</span><span class="sxs-lookup"><span data-stu-id="74b28-260">Is a string with this format: `{service bus resource ID}/authorizationrules/{key name}`.</span></span> |
| <span data-ttu-id="74b28-261">Platser</span><span class="sxs-lookup"><span data-stu-id="74b28-261">locations</span></span> |<span data-ttu-id="74b28-262">Ja</span><span class="sxs-lookup"><span data-stu-id="74b28-262">Yes</span></span> |<span data-ttu-id="74b28-263">Kommaavgränsad lista över regioner som du vill samla in händelser för aktivitetsloggen.</span><span class="sxs-lookup"><span data-stu-id="74b28-263">Comma-separated list of regions for which you would like to collect Activity Log events.</span></span> |
| <span data-ttu-id="74b28-264">retentionInDays</span><span class="sxs-lookup"><span data-stu-id="74b28-264">retentionInDays</span></span> |<span data-ttu-id="74b28-265">Ja</span><span class="sxs-lookup"><span data-stu-id="74b28-265">Yes</span></span> |<span data-ttu-id="74b28-266">Antal dagar för vilka händelser som ska behållas, mellan 1 och 2147483647.</span><span class="sxs-lookup"><span data-stu-id="74b28-266">Number of days for which events should be retained, between 1 and 2147483647.</span></span> <span data-ttu-id="74b28-267">Värdet noll lagrar loggarna på obestämd tid (alltid).</span><span class="sxs-lookup"><span data-stu-id="74b28-267">A value of zero stores the logs indefinitely (forever).</span></span> |
| <span data-ttu-id="74b28-268">Kategorier</span><span class="sxs-lookup"><span data-stu-id="74b28-268">categories</span></span> |<span data-ttu-id="74b28-269">Nej</span><span class="sxs-lookup"><span data-stu-id="74b28-269">No</span></span> |<span data-ttu-id="74b28-270">Kommaavgränsad lista över kategorier som ska samlas in.</span><span class="sxs-lookup"><span data-stu-id="74b28-270">Comma-separated list of event categories that should be collected.</span></span> <span data-ttu-id="74b28-271">Möjliga värden är skriva och ta bort åtgärd.</span><span class="sxs-lookup"><span data-stu-id="74b28-271">Possible values are Write, Delete, and Action.</span></span> |

#### <a name="remove-a-log-profile"></a><span data-ttu-id="74b28-272">Ta bort en logg-profil</span><span class="sxs-lookup"><span data-stu-id="74b28-272">Remove a log profile</span></span>
```
azure insights logprofile delete --name my_log_profile
```

## <a name="next-steps"></a><span data-ttu-id="74b28-273">Nästa steg</span><span class="sxs-lookup"><span data-stu-id="74b28-273">Next Steps</span></span>
* [<span data-ttu-id="74b28-274">Mer information om aktivitetsloggen (tidigare granskningsloggar)</span><span class="sxs-lookup"><span data-stu-id="74b28-274">Learn more about the Activity Log (formerly Audit Logs)</span></span>](../azure-resource-manager/resource-group-audit.md)
* [<span data-ttu-id="74b28-275">Dataströmmen Azure aktivitetsloggen i Händelsehubbar</span><span class="sxs-lookup"><span data-stu-id="74b28-275">Stream the Azure Activity Log to Event Hubs</span></span>](monitoring-stream-activity-logs-event-hubs.md)

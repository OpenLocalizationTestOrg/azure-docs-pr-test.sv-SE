---
title: "aaaCommon orsaker till Molntjänsten roller återvinning | Microsoft Docs"
description: "En rolltjänst för molnet plötsligt återanvänds kan medföra betydande driftstopp. Här följer några vanliga problem som orsakar roller toobe återvinns, som kan hjälpa dig att minska driftstopp."
services: cloud-services
documentationcenter: 
author: simonxjx
manager: felixwu
editor: 
tags: top-support-issue
ms.assetid: 533930d1-8035-4402-b16a-cf887b2c4f85
ms.service: cloud-services
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: tbd
ms.date: 7/26/2017
ms.author: v-six
ms.openlocfilehash: 8fa152b33d2b22a8a02f834d4bc38519b4272f7b
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: sv-SE
ms.lasthandoff: 10/06/2017
---
# <a name="common-issues-that-cause-roles-toorecycle"></a><span data-ttu-id="2fa58-104">Vanliga problem som orsakar roller toorecycle</span><span class="sxs-lookup"><span data-stu-id="2fa58-104">Common issues that cause roles toorecycle</span></span>
<span data-ttu-id="2fa58-105">Den här artikeln beskrivs några av hello vanliga orsaker till problem med distribution och felsökning tips toohelp de här problemen.</span><span class="sxs-lookup"><span data-stu-id="2fa58-105">This article discusses some of hello common causes of deployment problems and provides troubleshooting tips toohelp you resolve these problems.</span></span> <span data-ttu-id="2fa58-106">En indikation på att det finns ett problem med ett program är när hälsningspaket rollinstansen misslyckas toostart eller den växlar mellan hello initiera upptagen och stoppas.</span><span class="sxs-lookup"><span data-stu-id="2fa58-106">An indication that a problem exists with an application is when hello role instance fails toostart, or it cycles between hello initializing, busy, and stopping states.</span></span>

[!INCLUDE [support-disclaimer](../../includes/support-disclaimer.md)]

## <a name="missing-runtime-dependencies"></a><span data-ttu-id="2fa58-107">Runtime-beroenden som saknas</span><span class="sxs-lookup"><span data-stu-id="2fa58-107">Missing runtime dependencies</span></span>
<span data-ttu-id="2fa58-108">Om en roll i ditt program är beroende av en sammansättning som inte är en del av hello .NET Framework eller hello Azure hanterade biblioteket, måste du uttryckligen inkludera sammansättningen i hello programpaket.</span><span class="sxs-lookup"><span data-stu-id="2fa58-108">If a role in your application relies on any assembly that is not part of hello .NET Framework or hello Azure managed library, you must explicitly include that assembly in hello application package.</span></span> <span data-ttu-id="2fa58-109">Tänk på att andra Microsoft-ramverk inte är tillgängliga på Azure som standard.</span><span class="sxs-lookup"><span data-stu-id="2fa58-109">Keep in mind that other Microsoft frameworks are not available on Azure by default.</span></span> <span data-ttu-id="2fa58-110">Om din roll är beroende av dessa ramverk, måste du lägga till dessa sammansättningar toohello programpaket.</span><span class="sxs-lookup"><span data-stu-id="2fa58-110">If your role relies on such a framework, you must add those assemblies toohello application package.</span></span>

<span data-ttu-id="2fa58-111">Kontrollera hello följande innan du skapar och paketera programmet:</span><span class="sxs-lookup"><span data-stu-id="2fa58-111">Before you build and package your application, verify hello following:</span></span>

* <span data-ttu-id="2fa58-112">Om du använder Visual studio gör att hello **kopiera lokala** egenskapen för**SANT** för varje refererar till sammansättningen i projektet som inte är en del av hello Azure SDK eller hello .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="2fa58-112">If using Visual studio, make sure hello **Copy Local** property is set too**True** for each referenced assembly in your project that is not part of hello Azure SDK or hello .NET Framework.</span></span>
* <span data-ttu-id="2fa58-113">Kontrollera att hello web.config-filen inte refererar till några oanvända sammansättningar i hello kompilering element.</span><span class="sxs-lookup"><span data-stu-id="2fa58-113">Make sure hello web.config file does not reference any unused assemblies in hello compilation element.</span></span>
* <span data-ttu-id="2fa58-114">Hej **Skapa åtgärd** av varje .cshtml fil har angetts för**innehåll**.</span><span class="sxs-lookup"><span data-stu-id="2fa58-114">hello **Build Action** of every .cshtml file is set too**Content**.</span></span> <span data-ttu-id="2fa58-115">Detta säkerställer att hello filer visas korrekt i hello paketet och gör andra referensfiler tooappear i hello-paketet.</span><span class="sxs-lookup"><span data-stu-id="2fa58-115">This ensures that hello files will appear correctly in hello package and enables other referenced files tooappear in hello package.</span></span>

## <a name="assembly-targets-wrong-platform"></a><span data-ttu-id="2fa58-116">Sammansättningen mål fel plattform</span><span class="sxs-lookup"><span data-stu-id="2fa58-116">Assembly targets wrong platform</span></span>
<span data-ttu-id="2fa58-117">Azure är en 64-bitars-miljö.</span><span class="sxs-lookup"><span data-stu-id="2fa58-117">Azure is a 64-bit environment.</span></span> <span data-ttu-id="2fa58-118">Därför fungerar inte .NET-sammansättningar som kompilerats för ett 32-bitars mål på Azure.</span><span class="sxs-lookup"><span data-stu-id="2fa58-118">Therefore, .NET assemblies compiled for a 32-bit target won't work on Azure.</span></span>

## <a name="role-throws-unhandled-exceptions-while-initializing-or-stopping"></a><span data-ttu-id="2fa58-119">Rollen utlöser ett ohanterat undantag vid initiering eller stoppar</span><span class="sxs-lookup"><span data-stu-id="2fa58-119">Role throws unhandled exceptions while initializing or stopping</span></span>
<span data-ttu-id="2fa58-120">Alla undantag som utlöses av hello hello [RoleEntryPoint] -klassen, som innehåller hello [OnStart], [OnStop], och [kör]metoder, är ohanterade undantag.</span><span class="sxs-lookup"><span data-stu-id="2fa58-120">Any exceptions that are thrown by hello methods of hello [RoleEntryPoint] class, which includes hello [OnStart], [OnStop], and [Run] methods, are unhandled exceptions.</span></span> <span data-ttu-id="2fa58-121">Om det uppstår ett ohanterat undantag i någon av dessa metoder kan hello rollen kommer att återanvändas.</span><span class="sxs-lookup"><span data-stu-id="2fa58-121">If an unhandled exception occurs in one of these methods, hello role will recycle.</span></span> <span data-ttu-id="2fa58-122">Om hello rollen återvinning upprepade gånger kan det utlöser ett undantag när den försöker toostart.</span><span class="sxs-lookup"><span data-stu-id="2fa58-122">If hello role is recycling repeatedly, it may be throwing an unhandled exception each time it tries toostart.</span></span>

## <a name="role-returns-from-run-method"></a><span data-ttu-id="2fa58-123">Rollen som returneras från metoden</span><span class="sxs-lookup"><span data-stu-id="2fa58-123">Role returns from Run method</span></span>
<span data-ttu-id="2fa58-124">Hej [kör] metoden är avsedda toorun på obestämd tid.</span><span class="sxs-lookup"><span data-stu-id="2fa58-124">hello [Run] method is intended toorun indefinitely.</span></span> <span data-ttu-id="2fa58-125">Om din kod åsidosätter hello [kör] metod det ska vila på obestämd tid.</span><span class="sxs-lookup"><span data-stu-id="2fa58-125">If your code overrides hello [Run] method, it should sleep indefinitely.</span></span> <span data-ttu-id="2fa58-126">Om hello [kör] metoden returnerar hello rollen återanvänds.</span><span class="sxs-lookup"><span data-stu-id="2fa58-126">If hello [Run] method returns, hello role recycles.</span></span>

## <a name="incorrect-diagnosticsconnectionstring-setting"></a><span data-ttu-id="2fa58-127">Felaktig DiagnosticsConnectionString-inställning</span><span class="sxs-lookup"><span data-stu-id="2fa58-127">Incorrect DiagnosticsConnectionString setting</span></span>
<span data-ttu-id="2fa58-128">Om programmet använder Azure-diagnostik, din tjänstekonfigurationsfil måste ange hello `DiagnosticsConnectionString` konfigurationsinställning.</span><span class="sxs-lookup"><span data-stu-id="2fa58-128">If application uses Azure Diagnostics, your service configuration file must specify hello `DiagnosticsConnectionString` configuration setting.</span></span> <span data-ttu-id="2fa58-129">Den här inställningen ska ange ett HTTPS-anslutning tooyour storage-konto i Azure.</span><span class="sxs-lookup"><span data-stu-id="2fa58-129">This setting should specify an HTTPS connection tooyour storage account in Azure.</span></span>

<span data-ttu-id="2fa58-130">tooensure som din `DiagnosticsConnectionString` är korrekt innan du distribuerar ditt program paketet tooAzure, kontrollera hello följande:</span><span class="sxs-lookup"><span data-stu-id="2fa58-130">tooensure that your `DiagnosticsConnectionString` setting is correct before you deploy your application package tooAzure, verify hello following:</span></span>  

* <span data-ttu-id="2fa58-131">Hej `DiagnosticsConnectionString` inställningen punkter tooa giltigt lagringskonto i Azure.</span><span class="sxs-lookup"><span data-stu-id="2fa58-131">hello `DiagnosticsConnectionString` setting points tooa valid storage account in Azure.</span></span>  
  <span data-ttu-id="2fa58-132">Som standard pekar inställningen toohello emulerade storage-konto, så du måste uttryckligen ändra inställningen innan du distribuerar ditt programpaket.</span><span class="sxs-lookup"><span data-stu-id="2fa58-132">By default, this setting points toohello emulated storage account, so you must explicitly change this setting before you deploy your application package.</span></span> <span data-ttu-id="2fa58-133">Om du inte ändrar den här inställningen genereras ett undantag när hälsningspaket rollinstansen försöker toostart hello diagnostikövervakare.</span><span class="sxs-lookup"><span data-stu-id="2fa58-133">If you do not change this setting, an exception is thrown when hello role instance attempts toostart hello diagnostic monitor.</span></span> <span data-ttu-id="2fa58-134">Detta kan orsaka hello rollen instans toorecycle på obestämd tid.</span><span class="sxs-lookup"><span data-stu-id="2fa58-134">This may cause hello role instance toorecycle indefinitely.</span></span>
* <span data-ttu-id="2fa58-135">hello anslutningssträngen har angetts i hello följande [format](../storage/common/storage-configure-connection-string.md).</span><span class="sxs-lookup"><span data-stu-id="2fa58-135">hello connection string is specified in hello following [format](../storage/common/storage-configure-connection-string.md).</span></span> <span data-ttu-id="2fa58-136">(hello-protokollet måste anges som HTTPS). Ersätt *MyAccountName* med hello namnet på ditt lagringskonto och *MyAccountKey* med din åtkomstnyckel:</span><span class="sxs-lookup"><span data-stu-id="2fa58-136">(hello protocol must be specified as HTTPS.) Replace *MyAccountName* with hello name of your storage account, and *MyAccountKey* with your access key:</span></span>    

        DefaultEndpointsProtocol=https;AccountName=MyAccountName;AccountKey=MyAccountKey

  <span data-ttu-id="2fa58-137">Om du utvecklar programmet med hjälp av Azure-verktyg för Microsoft Visual Studio kan du använda hello egenskapen sidor tooset det här värdet.</span><span class="sxs-lookup"><span data-stu-id="2fa58-137">If you are developing your application by using Azure Tools for Microsoft Visual Studio, you can use hello property pages tooset this value.</span></span>

## <a name="exported-certificate-does-not-include-private-key"></a><span data-ttu-id="2fa58-138">Exporterade certifikatet innehåller ingen privat nyckel</span><span class="sxs-lookup"><span data-stu-id="2fa58-138">Exported certificate does not include private key</span></span>
<span data-ttu-id="2fa58-139">toorun en webbroll under SSL, måste du kontrollera att din exporterade certifikat innehåller hello privata nyckel.</span><span class="sxs-lookup"><span data-stu-id="2fa58-139">toorun a web role under SSL, you must ensure that your exported management certificate includes hello private key.</span></span> <span data-ttu-id="2fa58-140">Om du använder hello *Windows Certificate Manager* tooexport hello certifikatet vara säker på att tooselect **Ja** för hello **Export hello privata nyckeln** alternativet.</span><span class="sxs-lookup"><span data-stu-id="2fa58-140">If you use hello *Windows Certificate Manager* tooexport hello certificate, be sure tooselect **Yes** for hello **Export hello private key** option.</span></span> <span data-ttu-id="2fa58-141">hello certifikatet måste exporteras i hello PFX-format, vilket är hello endast format som stöds för närvarande.</span><span class="sxs-lookup"><span data-stu-id="2fa58-141">hello certificate must be exported in hello PFX format, which is hello only format currently supported.</span></span>

## <a name="next-steps"></a><span data-ttu-id="2fa58-142">Nästa steg</span><span class="sxs-lookup"><span data-stu-id="2fa58-142">Next steps</span></span>
<span data-ttu-id="2fa58-143">Visa mer [felsökning artiklar](https://azure.microsoft.com/documentation/articles/?tag=top-support-issue&product=cloud-services) för molntjänster.</span><span class="sxs-lookup"><span data-stu-id="2fa58-143">View more [troubleshooting articles](https://azure.microsoft.com/documentation/articles/?tag=top-support-issue&product=cloud-services) for cloud services.</span></span>

<span data-ttu-id="2fa58-144">Visa mer rollåtervinning scenarier vid [Kevin Williamson bloggserie](http://blogs.msdn.com/b/kwill/archive/2013/08/09/windows-azure-paas-compute-diagnostics-data.aspx).</span><span class="sxs-lookup"><span data-stu-id="2fa58-144">View more role recycling scenarios at [Kevin Williamson's blog series](http://blogs.msdn.com/b/kwill/archive/2013/08/09/windows-azure-paas-compute-diagnostics-data.aspx).</span></span>

[RoleEntryPoint]: https://msdn.microsoft.com/library/microsoft.windowsazure.serviceruntime.roleentrypoint.aspx
[OnStart]: https://msdn.microsoft.com/library/microsoft.windowsazure.serviceruntime.roleentrypoint.onstart.aspx
[OnStop]: https://msdn.microsoft.com/library/microsoft.windowsazure.serviceruntime.roleentrypoint.onstop.aspx
[kör]: https://msdn.microsoft.com/library/microsoft.windowsazure.serviceruntime.roleentrypoint.run.aspx

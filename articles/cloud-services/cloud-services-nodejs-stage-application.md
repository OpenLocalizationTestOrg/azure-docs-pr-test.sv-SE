---
title: "Förbered en distribution av service (Node.js) | Microsoft Docs"
description: "Lär dig mer om att distribuera din Azure-program till en fristående miljö och sedan distribuera till en produktionsmiljö med virtuella IP-adresser (VIP) växlingen."
services: cloud-services
documentationcenter: nodejs
author: TomArcher
manager: routlaw
editor: 
ms.assetid: d65d26a6-b424-49cd-a88c-7ef46bb112a8
ms.service: cloud-services
ms.workload: tbd
ms.tgt_pltfrm: na
ms.devlang: nodejs
ms.topic: article
ms.date: 08/17/2017
ms.author: tarcher
ms.openlocfilehash: b3000ed769e8c60eccb21e26f53ce7ccb7e68d7f
ms.sourcegitcommit: 50e23e8d3b1148ae2d36dad3167936b4e52c8a23
ms.translationtype: MT
ms.contentlocale: sv-SE
ms.lasthandoff: 08/18/2017
---
# <a name="staging-an-application-in-azure"></a><span data-ttu-id="8f975-103">Mellanlagring av ett program i Azure</span><span class="sxs-lookup"><span data-stu-id="8f975-103">Staging an Application in Azure</span></span>
<span data-ttu-id="8f975-104">En paketerad App kan distribueras till mellanlagringsmiljön i Azure som ska testas innan du flyttar den till produktionsmiljön som programmet är tillgängligt på Internet.</span><span class="sxs-lookup"><span data-stu-id="8f975-104">A packaged application can be deployed to the staging environment in Azure to be tested before you move it to the production environment in which the application is accessible on the Internet.</span></span> <span data-ttu-id="8f975-105">Mellanlagringsmiljön är exakt samma sätt som produktionsmiljön, förutom att du kan bara komma åt mellanlagrade programmet med en fördunklade URL som genereras av Azure.</span><span class="sxs-lookup"><span data-stu-id="8f975-105">The staging environment is exactly like the production environment, except that you can only access the staged application with an obfuscated URL that is generated by Azure.</span></span> <span data-ttu-id="8f975-106">När du har kontrollerat att programmet fungerar korrekt, kan det distribueras till produktionsmiljön genom att utföra en växling för virtuella IP-adresser (VIP).</span><span class="sxs-lookup"><span data-stu-id="8f975-106">After you have verified that your application is working correctly, it can be deployed to the production environment by performing a Virtual IP (VIP) swap.</span></span>

> [!NOTE]
> <span data-ttu-id="8f975-107">Stegen i den här artikeln gäller endast för noden programmen som en tjänst i Azure-molnet.</span><span class="sxs-lookup"><span data-stu-id="8f975-107">The steps in this article only apply to node applications hosted as an Azure Cloud Service.</span></span>
> 
> 

## <a name="step-1-stage-an-application"></a><span data-ttu-id="8f975-108">Steg 1: Förbered ett program</span><span class="sxs-lookup"><span data-stu-id="8f975-108">Step 1: Stage an Application</span></span>
<span data-ttu-id="8f975-109">Den här uppgiften täcker hur man Mellanlagra ett program med hjälp av den **Microsoft Azure PowerShell**.</span><span class="sxs-lookup"><span data-stu-id="8f975-109">This task covers how to stage an application by using the **Microsoft Azure PowerShell**.</span></span>

1. <span data-ttu-id="8f975-110">När du publicerar en tjänst skickar den **-fack** parametern till den **Publish-AzureServiceProject** cmdlet.</span><span class="sxs-lookup"><span data-stu-id="8f975-110">When publishing a service, simply pass the **-Slot** parameter to the **Publish-AzureServiceProject** cmdlet.</span></span>
   
   ```powershell
   Publish-AzureServiceProject -Slot staging
   ```
2. <span data-ttu-id="8f975-111">Logga in på den [klassiska Azure-portalen] och välj **molntjänster**.</span><span class="sxs-lookup"><span data-stu-id="8f975-111">Log on to the [Azure classic portal] and select **Cloud Services**.</span></span> <span data-ttu-id="8f975-112">När molnet tjänst skapas och **mellanlagring** kolumnen status har uppdaterats till **kör**, klicka på namnet på tjänsten.</span><span class="sxs-lookup"><span data-stu-id="8f975-112">After the cloud service is created and the **Staging** column status has been updated to **Running**, click on the service name.</span></span>
   
   ![portalen visar en aktiv tjänst][cloud-service]
3. <span data-ttu-id="8f975-114">Välj den **instrumentpanelen**, och välj sedan **mellanlagring**.</span><span class="sxs-lookup"><span data-stu-id="8f975-114">Select the **Dashboard**, and then select **Staging**.</span></span>
   
   ![cloud service-instrumentpanelen][cloud-service-dashboard]
4. <span data-ttu-id="8f975-116">Observera värdet i den **Webbadress** post till höger.</span><span class="sxs-lookup"><span data-stu-id="8f975-116">Note the value in the **Site URL** entry to the right.</span></span> <span data-ttu-id="8f975-117">DNS-namnet är ett dolda interna ID som genereras av Azure.</span><span class="sxs-lookup"><span data-stu-id="8f975-117">The DNS name is an obfuscated internal ID that Azure generated.</span></span>
   
    ![webbadress][cloud-service-staging-url]

<span data-ttu-id="8f975-119">Nu kan du kontrollera att programmet fungerar korrekt i mellanlagringsmiljön med hjälp av fristående webbplatsens URL.</span><span class="sxs-lookup"><span data-stu-id="8f975-119">Now you can verify that the application is working correctly in the staging environment by using the staging site URL.</span></span>

## <a name="step-2-upgrade-an-application-in-production-by-swapping-vips"></a><span data-ttu-id="8f975-120">Steg 2: Uppgradera ett program i produktion av växling VIP: er</span><span class="sxs-lookup"><span data-stu-id="8f975-120">Step 2: Upgrade an Application in Production by Swapping VIPs</span></span>
<span data-ttu-id="8f975-121">När du har kontrollerat den uppgraderade versionen av ett program i mellanlagringsmiljön du snabbt den tillgänglig i produktionen genom att byta den virtuella IP-adresser (VIP) för mellanlagrings- och produktionsmiljöer.</span><span class="sxs-lookup"><span data-stu-id="8f975-121">After you have verified the upgraded version of an application in the staging environment, you can quickly make it available in production by swapping the virtual IPs (VIPs) of the staging and production environments.</span></span>

> [!NOTE]
> <span data-ttu-id="8f975-122">Det här steget förutsätter att du redan har distribuerat ett program till produktion och mellanlagrad den uppgraderade versionen av programmet.</span><span class="sxs-lookup"><span data-stu-id="8f975-122">This step assumes that you have already deployed an application to production and staged the upgraded version of the application.</span></span>
> 
> 

1. <span data-ttu-id="8f975-123">Logga in på den [klassiska Azure-portalen], klickar du på **molntjänster** och välj sedan namnet på tjänsten.</span><span class="sxs-lookup"><span data-stu-id="8f975-123">Log into the [Azure classic portal], click **Cloud Services** and then select the service name.</span></span>
2. <span data-ttu-id="8f975-124">Från den **instrumentpanelen**väljer **mellanlagring**, och klicka sedan på **växla** längst ned på sidan.</span><span class="sxs-lookup"><span data-stu-id="8f975-124">From the **Dashboard**, select **Staging**, and then click **Swap** at the bottom of the page.</span></span> <span data-ttu-id="8f975-125">Detta öppnar dialogrutan VIP-växling.</span><span class="sxs-lookup"><span data-stu-id="8f975-125">This opens the VIP Swap dialog.</span></span>
   
   ![VIP-växling dialogrutan][vip-swap-dialog]
3. <span data-ttu-id="8f975-127">Granska informationen och klicka sedan på **OK**.</span><span class="sxs-lookup"><span data-stu-id="8f975-127">Review the information, and then click **OK**.</span></span> <span data-ttu-id="8f975-128">Två distributioner börja uppdatera som fristående distributionen växlar till produktion och produktionsdistributionen växlar till Förproduktion.</span><span class="sxs-lookup"><span data-stu-id="8f975-128">The two deployments begin updating as the staging deployment switches to production and the production deployment switches to staging.</span></span>

<span data-ttu-id="8f975-129">Du har mellanlagrad en distribution och uppgraderas en Produktionsdistribution av växla VIP: er med distributionen i Förproduktion.</span><span class="sxs-lookup"><span data-stu-id="8f975-129">You have successfully staged a deployment and upgraded a production deployment by swapping VIPs with the deployment in staging.</span></span>

## <a name="additional-resources"></a><span data-ttu-id="8f975-130">Ytterligare resurser</span><span class="sxs-lookup"><span data-stu-id="8f975-130">Additional Resources</span></span>
* <span data-ttu-id="8f975-131">[Distribuera en Serviceuppgradering av till produktion av växla VIP: er i Azure]</span><span class="sxs-lookup"><span data-stu-id="8f975-131">[How to Deploy a Service Upgrade to Production by Swapping VIPs in Azure]</span></span>

<span data-ttu-id="8f975-132">[klassiska Azure-portalen]: http://manage.windowsazure.com</span><span class="sxs-lookup"><span data-stu-id="8f975-132">[Azure classic portal]: http://manage.windowsazure.com</span></span>
[cloud-service]: ./media/cloud-services-nodejs-stage-application/staging-cloud-service-running.png
[cloud-service-dashboard]: ./media/cloud-services-nodejs-stage-application/cloud-service-dashboard-staging.png
[cloud-service-staging-url]: ./media/cloud-services-nodejs-stage-application/cloud-service-staging-url.png
[vip-swap-dialog]: ./media/cloud-services-nodejs-stage-application/vip-swap-dialog.png
<span data-ttu-id="8f975-133">[Distribuera en Serviceuppgradering av till produktion av växla VIP: er i Azure]: cloud-services-how-to-manage.md#how-to-swap-deployments-to-promote-a-staged-deployment-to-production</span><span class="sxs-lookup"><span data-stu-id="8f975-133">[How to Deploy a Service Upgrade to Production by Swapping VIPs in Azure]: cloud-services-how-to-manage.md#how-to-swap-deployments-to-promote-a-staged-deployment-to-production</span></span>

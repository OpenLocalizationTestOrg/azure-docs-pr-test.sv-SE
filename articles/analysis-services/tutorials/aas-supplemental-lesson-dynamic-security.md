---
<span data-ttu-id="610dc-101">Rubrik: aaa ”Azure Analysis Services självstudiekursen kompletterande lektionen: dynamiska säkerhet | Microsoft Docs ”beskrivning: Beskriver hur toouse dynamiska säkerhet med hjälp av raden filter i hello Azure Analysis Services-kursen.</span><span class="sxs-lookup"><span data-stu-id="610dc-101">title: aaa"Azure Analysis Services tutorial supplemental lesson: Dynamic security | Microsoft Docs" description: Describes how toouse dynamic security by using row filters in hello Azure Analysis Services tutorial.</span></span>
<span data-ttu-id="610dc-102">tjänster: analysis services dokumentationcenter: '' författare: minewiskan manager: erikre editor: '' taggar: ''</span><span class="sxs-lookup"><span data-stu-id="610dc-102">services: analysis-services documentationcenter: '' author: minewiskan manager: erikre editor: '' tags: ''</span></span>

<span data-ttu-id="610dc-103">MS.AssetID: ms.service: analysis services ms.devlang: NA ms.topic: get-started-article ms.tgt_pltfrm: NA ms.workload: na ms.date: 2017-05/26 ms.author: owend</span><span class="sxs-lookup"><span data-stu-id="610dc-103">ms.assetid: ms.service: analysis-services ms.devlang: NA ms.topic: get-started-article ms.tgt_pltfrm: NA ms.workload: na ms.date: 05/26/2017 ms.author: owend</span></span>
---
# <a name="supplemental-lesson---dynamic-security"></a><span data-ttu-id="610dc-104">Kompletterande lektion – Dynamisk säkerhet</span><span class="sxs-lookup"><span data-stu-id="610dc-104">Supplemental lesson - Dynamic security</span></span>

[!INCLUDE[analysis-services-appliesto-aas-sql2017-later](../../../includes/analysis-services-appliesto-aas-sql2017-later.md)]

<span data-ttu-id="610dc-105">I den här kompletterande lektionen skapar du en ytterligare roll som implementerar dynamisk säkerhet.</span><span class="sxs-lookup"><span data-stu-id="610dc-105">In this supplemental lesson, you create an additional role that implements dynamic security.</span></span> <span data-ttu-id="610dc-106">Dynamisk säkerhet skyddar radnivå baserat på hello användar namn eller inloggnings-id för hello inloggade användaren.</span><span class="sxs-lookup"><span data-stu-id="610dc-106">Dynamic security provides row-level security based on hello user name or login id of hello user currently logged on.</span></span> 
  
<span data-ttu-id="610dc-107">tooimplement dynamiska säkerhet kan du lägga en tabell tooyour modell som innehåller hello användarnamnen för de användare som kan ansluta toohello modell och bläddra modellobjekt och data.</span><span class="sxs-lookup"><span data-stu-id="610dc-107">tooimplement dynamic security, you add a table tooyour model containing hello user names of those users that can connect toohello model and browse model objects and data.</span></span> <span data-ttu-id="610dc-108">hello-modell som du skapar med den här kursen är i hello kontexten för Adventure Works; dock toocomplete detta lektion, måste du lägga till en tabell som innehåller användare från din egen domän.</span><span class="sxs-lookup"><span data-stu-id="610dc-108">hello model you create using this tutorial is in hello context of Adventure Works; however, toocomplete this lesson, you must add a table containing users from your own domain.</span></span> <span data-ttu-id="610dc-109">Du behöver inte hello lösenord för hello användarnamn som har lagts till.</span><span class="sxs-lookup"><span data-stu-id="610dc-109">You do not need hello passwords for hello user names that are added.</span></span> <span data-ttu-id="610dc-110">toocreate en EmployeeSecurity-tabell med ett litet antal användare från din egen domän du använda hello klistra in funktionen Klistra in data från ett Excel-kalkylblad.</span><span class="sxs-lookup"><span data-stu-id="610dc-110">toocreate an EmployeeSecurity table, with a small sample of users from your own domain, you use hello Paste feature, pasting employee data from an Excel spreadsheet.</span></span> <span data-ttu-id="610dc-111">I ett verkligt scenario skulle hello tabell som innehåller användarnamn vanligtvis vara en tabell från en faktiska databasen som en datakälla. till exempel en verklig DimEmployee tabell.</span><span class="sxs-lookup"><span data-stu-id="610dc-111">In a real-world scenario, hello table containing user names would typically be a table from an actual database as a data source; for example, a real DimEmployee table.</span></span>  
  
<span data-ttu-id="610dc-112">tooimplement dynamiska säkerhet kan du använda två DAX-funktioner: [användarnamn funktionen (DAX)](http://msdn.microsoft.com/22dddc4b-1648-4c89-8c93-f1151162b93f) och [LOOKUPVALUE funktionen (DAX)](http://msdn.microsoft.com/73a51c4d-131c-4c33-a139-b1342d10caab).</span><span class="sxs-lookup"><span data-stu-id="610dc-112">tooimplement dynamic security, you use two DAX functions: [USERNAME Function (DAX)](http://msdn.microsoft.com/22dddc4b-1648-4c89-8c93-f1151162b93f) and [LOOKUPVALUE Function (DAX)](http://msdn.microsoft.com/73a51c4d-131c-4c33-a139-b1342d10caab).</span></span> <span data-ttu-id="610dc-113">Dessa funktioner, som tillämpas i en radfilterformel, definieras i en ny roll.</span><span class="sxs-lookup"><span data-stu-id="610dc-113">These functions, applied in a row filter formula, are defined in a new role.</span></span> <span data-ttu-id="610dc-114">Med funktionen hello LOOKUPVALUE anger hello formeln ett värde från hello EmployeeSecurity tabell.</span><span class="sxs-lookup"><span data-stu-id="610dc-114">By using hello LOOKUPVALUE function, hello formula specifies a value from hello EmployeeSecurity table.</span></span> <span data-ttu-id="610dc-115">hello formeln skickar sedan att värdet toohello användarnamn funktion, vilket anger hello hello användares användarnamn inloggad tillhör toothis roll.</span><span class="sxs-lookup"><span data-stu-id="610dc-115">hello formula then passes that value toohello USERNAME function, which specifies hello user name of hello user logged on belongs toothis role.</span></span> <span data-ttu-id="610dc-116">hello-användare kan sedan bläddra endast de data som anges av hello rollen radfilter.</span><span class="sxs-lookup"><span data-stu-id="610dc-116">hello user can then browse only data specified by hello role’s row filters.</span></span> <span data-ttu-id="610dc-117">I det här scenariot kan ange du att försäljning anställda endast kan bläddra Internet försäljningsdata för hello Försäljningsdistrikt som de är en medlem.</span><span class="sxs-lookup"><span data-stu-id="610dc-117">In this scenario, you specify that sales employees can only browse Internet sales data for hello sales territories in which they are a member.</span></span>  
  
<span data-ttu-id="610dc-118">De aktiviteter som är unikt toothis Adventure Works tabellmodell scenariot, men inte nödvändigtvis tillämpas tooa verkligt scenario identifieras som sådana.</span><span class="sxs-lookup"><span data-stu-id="610dc-118">Those tasks that are unique toothis Adventure Works tabular model scenario, but would not necessarily apply tooa real-world scenario are identified as such.</span></span> <span data-ttu-id="610dc-119">Varje aktivitet innehåller ytterligare information som beskriver hello syftet hello-aktivitet.</span><span class="sxs-lookup"><span data-stu-id="610dc-119">Each task includes additional information describing hello purpose of hello task.</span></span>  
  
<span data-ttu-id="610dc-120">Uppskattad tid toocomplete lektionen: **30 minuter**</span><span class="sxs-lookup"><span data-stu-id="610dc-120">Estimated time toocomplete this lesson: **30 minutes**</span></span>  
  
## <a name="prerequisites"></a><span data-ttu-id="610dc-121">Krav</span><span class="sxs-lookup"><span data-stu-id="610dc-121">Prerequisites</span></span>  
<span data-ttu-id="610dc-122">Den här kompletterande lektionen ingår i självstudiekursen för tabellmodellering som bör slutföras i rätt ordning.</span><span class="sxs-lookup"><span data-stu-id="610dc-122">This supplemental lesson topic is part of a tabular modeling tutorial, which should be completed in order.</span></span> <span data-ttu-id="610dc-123">Innan du utför hello uppgifter i den här kompletterande lektionen bör du har slutfört alla tidigare erfarenheter.</span><span class="sxs-lookup"><span data-stu-id="610dc-123">Before performing hello tasks in this supplemental lesson, you should have completed all previous lessons.</span></span>  
  
## <a name="add-hello-dimsalesterritory-table-toohello-aw-internet-sales-tabular-model-project"></a><span data-ttu-id="610dc-124">Lägg till hello DimSalesTerritory tabell toohello AW Internet försäljning modellen Tabellprojekt</span><span class="sxs-lookup"><span data-stu-id="610dc-124">Add hello DimSalesTerritory table toohello AW Internet Sales Tabular Model Project</span></span>  
<span data-ttu-id="610dc-125">tooimplement dynamiska säkerhet för det här scenariot för Adventure Works, måste du lägga till två ytterligare tabeller tooyour modell.</span><span class="sxs-lookup"><span data-stu-id="610dc-125">tooimplement dynamic security for this Adventure Works scenario, you must add two additional tables tooyour model.</span></span> <span data-ttu-id="610dc-126">hello första tabellen som du lägger till är DimSalesTerritory (som Försäljningsdistrikt) från hello samma AdventureWorksDW-databasen.</span><span class="sxs-lookup"><span data-stu-id="610dc-126">hello first table you add is DimSalesTerritory (as Sales Territory) from hello same AdventureWorksDW database.</span></span> <span data-ttu-id="610dc-127">Du senare använda en rad filter toohello SalesTerritory tabell som definierar hello viss data hello inloggade användare kan bläddra.</span><span class="sxs-lookup"><span data-stu-id="610dc-127">You later apply a row filter toohello SalesTerritory table that defines hello particular data hello logged on user can browse.</span></span>  
  
#### <a name="tooadd-hello-dimsalesterritory-table"></a><span data-ttu-id="610dc-128">tooadd hello DimSalesTerritory tabell</span><span class="sxs-lookup"><span data-stu-id="610dc-128">tooadd hello DimSalesTerritory table</span></span>  
  
1.  <span data-ttu-id="610dc-129">I tabellmodellutforskaren > **Datakällor** högerklickar du på din anslutning och sedan på **Importera nya tabeller**.</span><span class="sxs-lookup"><span data-stu-id="610dc-129">In Tabular Model Explorer > **Data Sources**, right-click your connection, and then click **Import New Tables**.</span></span>  

    <span data-ttu-id="610dc-130">Hello autentiseringsuppgifter för personifiering dialogrutan visas skriver du hello personifiering autentiseringsuppgifter som du använde i lektionen 2: Lägg till Data.</span><span class="sxs-lookup"><span data-stu-id="610dc-130">If hello Impersonation Credentials dialog box appears, type hello impersonation credentials you used in Lesson 2: Add Data.</span></span>
  
2.  <span data-ttu-id="610dc-131">Välj hello i Navigator **DimSalesTerritory** tabell och klicka sedan på **OK**.</span><span class="sxs-lookup"><span data-stu-id="610dc-131">In Navigator, select hello **DimSalesTerritory** table, and then click **OK**.</span></span>    
  
3.  <span data-ttu-id="610dc-132">I frågeredigeraren klickar du på hello **DimSalesTerritory** fråga och ta sedan bort **SalesTerritoryAlternateKey** kolumn.</span><span class="sxs-lookup"><span data-stu-id="610dc-132">In Query Editor, click hello **DimSalesTerritory** query, and then remove **SalesTerritoryAlternateKey** column.</span></span>  
  
7.  <span data-ttu-id="610dc-133">Klicka på **Importera**.</span><span class="sxs-lookup"><span data-stu-id="610dc-133">Click **Import**.</span></span>  
  
    <span data-ttu-id="610dc-134">hello ny tabell läggs toohello modellen arbetsytan.</span><span class="sxs-lookup"><span data-stu-id="610dc-134">hello new table is added toohello model workspace.</span></span> <span data-ttu-id="610dc-135">Objekt och data från hello källtabellen DimSalesTerritory importeras sedan till Tabellmodell din AW Internet försäljning.</span><span class="sxs-lookup"><span data-stu-id="610dc-135">Objects and data from hello source DimSalesTerritory table are then imported into your AW Internet Sales Tabular Model.</span></span>  
  
9. <span data-ttu-id="610dc-136">När hello tabellen har importerats, klickar du på **Stäng**.</span><span class="sxs-lookup"><span data-stu-id="610dc-136">After hello table has been imported successfully, click **Close**.</span></span>  

## <a name="add-a-table-with-user-name-data"></a><span data-ttu-id="610dc-137">Lägga till en tabell med användarnamndata</span><span class="sxs-lookup"><span data-stu-id="610dc-137">Add a table with user name data</span></span>  
<span data-ttu-id="610dc-138">Hej DimEmployee tabellen i hello AdventureWorksDW som exempeldatabas innehåller användare från hello AdventureWorks domän.</span><span class="sxs-lookup"><span data-stu-id="610dc-138">hello DimEmployee table in hello AdventureWorksDW sample database contains users from hello AdventureWorks domain.</span></span> <span data-ttu-id="610dc-139">Dessa användarnamn finns inte i din egen miljö.</span><span class="sxs-lookup"><span data-stu-id="610dc-139">Those user names do not exist in your own environment.</span></span> <span data-ttu-id="610dc-140">Du måste skapa en tabell i din modell som innehåller ett litet antal (minst tre) faktiska användare från din organisation.</span><span class="sxs-lookup"><span data-stu-id="610dc-140">You must create a table in your model that contains a small sample (at least three) of actual users from your organization.</span></span> <span data-ttu-id="610dc-141">Du lägger sedan till användarna som medlemmar toohello ny roll.</span><span class="sxs-lookup"><span data-stu-id="610dc-141">You then add these users as members toohello new role.</span></span> <span data-ttu-id="610dc-142">Du behöver inte hello lösenord för hello exempel användarnamn, men du behöver faktiska Windows-användarnamn från en egen domän.</span><span class="sxs-lookup"><span data-stu-id="610dc-142">You do not need hello passwords for hello sample user names, but you do need actual Windows user names from your own domain.</span></span>  
  
#### <a name="tooadd-an-employeesecurity-table"></a><span data-ttu-id="610dc-143">tooadd en EmployeeSecurity tabell</span><span class="sxs-lookup"><span data-stu-id="610dc-143">tooadd an EmployeeSecurity table</span></span>  
  
1.  <span data-ttu-id="610dc-144">Öppna Microsoft Excel och skapa ett kalkylblad.</span><span class="sxs-lookup"><span data-stu-id="610dc-144">Open Microsoft Excel, creating a worksheet.</span></span>  
  
2.  <span data-ttu-id="610dc-145">Kopiera hello i den följande tabellen, inklusive hello rubrikraden och klistra in den i hello kalkylblad.</span><span class="sxs-lookup"><span data-stu-id="610dc-145">Copy hello following table, including hello header row, and then paste it into hello worksheet.</span></span>  

    ```
      |EmployeeId|SalesTerritoryId|FirstName|LastName|LoginId|  
      |---------------|----------------------|--------------|-------------|------------|  
      |1|2|<user first name>|<user last name>|\<domain\username>|  
      |1|3|<user first name>|<user last name>|\<domain\username>|  
      |2|4|<user first name>|<user last name>|\<domain\username>|  
      |3|5|<user first name>|<user last name>|\<domain\username>|  
    ```

3.  <span data-ttu-id="610dc-146">Ersätt hello förnamn, efternamn och domän\användarnamn med hello namn och inloggnings-ID för tre användare i din organisation.</span><span class="sxs-lookup"><span data-stu-id="610dc-146">Replace hello first name, last name, and domain\username with hello names and login ids of three users in your organization.</span></span> <span data-ttu-id="610dc-147">Placera hello samma användare på hello två första raderna för EmployeeId 1, visar den här användaren tillhör toomore än en försäljning territorium.</span><span class="sxs-lookup"><span data-stu-id="610dc-147">Put hello same user on hello first two rows, for EmployeeId 1, showing this user belongs toomore than one sales territory.</span></span> <span data-ttu-id="610dc-148">Lämna hello EmployeeId och SalesTerritoryId som de är.</span><span class="sxs-lookup"><span data-stu-id="610dc-148">Leave hello EmployeeId and SalesTerritoryId fields as they are.</span></span>  
  
4.  <span data-ttu-id="610dc-149">Spara hello kalkylblad som **SampleEmployee**.</span><span class="sxs-lookup"><span data-stu-id="610dc-149">Save hello worksheet as **SampleEmployee**.</span></span>  
  
5.  <span data-ttu-id="610dc-150">Hello kalkylblad, markerar du alla hello-celler med data om anställda, inklusive hello sidhuvud, och sedan högerklicka hello markerade data och klicka på **kopiera**.</span><span class="sxs-lookup"><span data-stu-id="610dc-150">In hello worksheet, select all hello cells with employee data, including hello headers, then right-click hello selected data, and then click **Copy**.</span></span>  
  
6.  <span data-ttu-id="610dc-151">Klicka på hello i SSDT, **redigera** -menyn och klicka sedan på **klistra in**.</span><span class="sxs-lookup"><span data-stu-id="610dc-151">In SSDT, click hello **Edit** menu, and then click **Paste**.</span></span>  
  
    <span data-ttu-id="610dc-152">Om klistra in är nedtonad klickar du på någon kolumn i en tabell i hello modellen designer-fönstret och försök igen.</span><span class="sxs-lookup"><span data-stu-id="610dc-152">If Paste is grayed out, click any column in any table in hello model designer window, and try again.</span></span>  
  
7.  <span data-ttu-id="610dc-153">I hello **klistra in Preview** i dialogrutan **tabellnamn**, typen **EmployeeSecurity**.</span><span class="sxs-lookup"><span data-stu-id="610dc-153">In hello **Paste Preview** dialog box, in **Table Name**, type **EmployeeSecurity**.</span></span>  
  
8.  <span data-ttu-id="610dc-154">I **Data toobe klistras in**, kontrollera hello data omfattar alla hello användardata och rubriker från hello SampleEmployee kalkylblad.</span><span class="sxs-lookup"><span data-stu-id="610dc-154">In **Data toobe pasted**, verify hello data includes all hello user data and headers from hello SampleEmployee worksheet.</span></span>  
  
9. <span data-ttu-id="610dc-155">Kontrollera att **Låt första raden utgöra kolumnrubriker** är markerat och klicka sedan på **Ok**.</span><span class="sxs-lookup"><span data-stu-id="610dc-155">Verify **Use first row as column headers** is checked, and then click **Ok**.</span></span>  
  
    <span data-ttu-id="610dc-156">En ny tabell med namnet EmployeeSecurity med medarbetardata som kopieras från hello SampleEmployee kalkylblad skapas.</span><span class="sxs-lookup"><span data-stu-id="610dc-156">A new table named EmployeeSecurity with employee data copied from hello SampleEmployee worksheet is created.</span></span>  
  
## <a name="create-relationships-between-factinternetsales-dimgeography-and-dimsalesterritory-table"></a><span data-ttu-id="610dc-157">Skapa relationer mellan tabellerna FactInternetSales, DimGeography och DimSalesTerritory</span><span class="sxs-lookup"><span data-stu-id="610dc-157">Create relationships between FactInternetSales, DimGeography, and DimSalesTerritory table</span></span>  
<span data-ttu-id="610dc-158">Hej FactInternetSales och DimGeography DimSalesTerritory tabellen alla innehålla en gemensam kolumn SalesTerritoryId.</span><span class="sxs-lookup"><span data-stu-id="610dc-158">hello FactInternetSales, DimGeography, and DimSalesTerritory table all contain a common column, SalesTerritoryId.</span></span> <span data-ttu-id="610dc-159">Hej SalesTerritoryId kolumnen i hello DimSalesTerritory tabellen innehåller värden med ett annat Id för alla områden.</span><span class="sxs-lookup"><span data-stu-id="610dc-159">hello SalesTerritoryId column in hello DimSalesTerritory table contains values with a different Id for each sales territory.</span></span>  
  
#### <a name="toocreate-relationships-between-hello-factinternetsales-dimgeography-and-hello-dimsalesterritory-table"></a><span data-ttu-id="610dc-160">toocreate relationer mellan hello FactInternetSales, DimGeography och hello DimSalesTerritory tabell</span><span class="sxs-lookup"><span data-stu-id="610dc-160">toocreate relationships between hello FactInternetSales, DimGeography, and hello DimSalesTerritory table</span></span>  
  
1.  <span data-ttu-id="610dc-161">I diagramvyn i hello **DimGeography** tabell, klicka och håll på hello **SalesTerritoryId** kolumn, och sedan dra hello markören toohello **SalesTerritoryId** kolumn i hello **DimSalesTerritory** tabell och släpp.</span><span class="sxs-lookup"><span data-stu-id="610dc-161">In Diagram View, in hello **DimGeography** table, click, and hold on hello **SalesTerritoryId** column, then drag hello cursor toohello **SalesTerritoryId** column in hello **DimSalesTerritory** table, and then release.</span></span>  
  
2.  <span data-ttu-id="610dc-162">I hello **FactInternetSales** tabell, klicka och håll på hello **SalesTerritoryId** kolumn, och sedan dra hello markören toohello **SalesTerritoryId** kolumn i hello  **DimSalesTerritory** tabell och släpp.</span><span class="sxs-lookup"><span data-stu-id="610dc-162">In hello **FactInternetSales** table, click, and hold on hello **SalesTerritoryId** column, then drag hello cursor toohello **SalesTerritoryId** column in hello **DimSalesTerritory** table, and then release.</span></span>  
  
    <span data-ttu-id="610dc-163">Meddelande hello Active-egenskapen för den här relationen är False, vilket innebär att det är inaktivt.</span><span class="sxs-lookup"><span data-stu-id="610dc-163">Notice hello Active property for this relationship is False, meaning it's inactive.</span></span> <span data-ttu-id="610dc-164">hello har redan tabellen FactInternetSales en annan aktiv relation.</span><span class="sxs-lookup"><span data-stu-id="610dc-164">hello FactInternetSales table already has another active relationship.</span></span>  
  
## <a name="hide-hello-employeesecurity-table-from-client-applications"></a><span data-ttu-id="610dc-165">Dölj hello EmployeeSecurity tabell från klientprogram</span><span class="sxs-lookup"><span data-stu-id="610dc-165">Hide hello EmployeeSecurity Table from client applications</span></span>  
<span data-ttu-id="610dc-166">I det här steget dölja du hello EmployeeSecurity tabell, som visas i ett klientprogram fältlistan.</span><span class="sxs-lookup"><span data-stu-id="610dc-166">In this task, you hide hello EmployeeSecurity table, keeping it from appearing in a client application’s field list.</span></span> <span data-ttu-id="610dc-167">Tänk på att du inte skyddar tabellen genom att dölja den.</span><span class="sxs-lookup"><span data-stu-id="610dc-167">Keep in mind that hiding a table does not secure it.</span></span> <span data-ttu-id="610dc-168">Användare kan fortfarande fråga på EmployeeSecurity-tabelldata om de vet hur man gör.</span><span class="sxs-lookup"><span data-stu-id="610dc-168">Users can still query EmployeeSecurity table data if they know how.</span></span> <span data-ttu-id="610dc-169">toosecure Hej EmployeeSecurity tabelldata hindrar användare från att kunna tooquery datainnehåll, du använda ett filter för en aktivitet med senare.</span><span class="sxs-lookup"><span data-stu-id="610dc-169">toosecure hello EmployeeSecurity table data, preventing users from being able tooquery any of its data, you apply a filter in a later task.</span></span>  
  
#### <a name="toohide-hello-employeesecurity-table-from-client-applications"></a><span data-ttu-id="610dc-170">toohide hello EmployeeSecurity tabell från klientprogram</span><span class="sxs-lookup"><span data-stu-id="610dc-170">toohide hello EmployeeSecurity table from client applications</span></span>  
  
-   <span data-ttu-id="610dc-171">Högerklicka i hello modellen designer i diagramvyn hello **medarbetare** tabell rubrik och klicka sedan på **dölja från klientverktyg**.</span><span class="sxs-lookup"><span data-stu-id="610dc-171">In hello model designer, in Diagram View, right-click hello **Employee** table heading, and then click **Hide from Client Tools**.</span></span>  
  
## <a name="create-a-sales-employees-by-territory-user-role"></a><span data-ttu-id="610dc-172">Skapa användarrollen Säljpersonal per område</span><span class="sxs-lookup"><span data-stu-id="610dc-172">Create a Sales Employees by Territory user role</span></span>  
<span data-ttu-id="610dc-173">I den här aktiviteten skapar du en användarroll.</span><span class="sxs-lookup"><span data-stu-id="610dc-173">In this task, you create a user role.</span></span> <span data-ttu-id="610dc-174">Den här rollen omfattar ett radfilter som definierar vilka rader i hello DimSalesTerritory tabell är synliga toousers.</span><span class="sxs-lookup"><span data-stu-id="610dc-174">This role includes a row filter defining which rows of hello DimSalesTerritory table are visible toousers.</span></span> <span data-ttu-id="610dc-175">hello filter tillämpas sedan i hello en-till-många-relation riktning tooall andra tabeller relaterade tooDimSalesTerritory.</span><span class="sxs-lookup"><span data-stu-id="610dc-175">hello filter is then applied in hello one-to-many relationship direction tooall other tables related tooDimSalesTerritory.</span></span> <span data-ttu-id="610dc-176">Du kan också använda ett filter som skyddar hello hela EmployeeSecurity tabellen från att frågbar av alla användare som är medlem i rollen hello.</span><span class="sxs-lookup"><span data-stu-id="610dc-176">You also apply a filter that secures hello entire EmployeeSecurity table from being queryable by any user that is a member of hello role.</span></span>  
  
> [!NOTE]  
> <span data-ttu-id="610dc-177">hello försäljning anställda av territorium roll som du skapar i den här lektionen begränsar medlemmar toobrowse (eller fråga) endast försäljningsdata för hello försäljning territorium toowhich de tillhör.</span><span class="sxs-lookup"><span data-stu-id="610dc-177">hello Sales Employees by Territory role you create in this lesson restricts members toobrowse (or query) only sales data for hello sales territory toowhich they belong.</span></span> <span data-ttu-id="610dc-178">Om du lägger till en användare som en medlem toohello försäljning anställda av territorium roll som också finns en medlem i en roll som skapas i [lektionen 11: skapa roller](../tutorials/aas-lesson-11-create-roles.md), får du en kombination av behörigheter.</span><span class="sxs-lookup"><span data-stu-id="610dc-178">If you add a user as a member toohello Sales Employees by Territory role that also exists as a member in a role created in [Lesson 11: Create Roles](../tutorials/aas-lesson-11-create-roles.md), you get a combination of permissions.</span></span> <span data-ttu-id="610dc-179">När en användare är medlem i flera roller, hello behörigheter och radfilter som definierats för varje roll är kumulativa.</span><span class="sxs-lookup"><span data-stu-id="610dc-179">When a user is a member of multiple roles, hello permissions, and row filters defined for each role are cumulative.</span></span> <span data-ttu-id="610dc-180">Det vill säga har hello användare hello större behörigheter som anges av hello kombination av roller.</span><span class="sxs-lookup"><span data-stu-id="610dc-180">That is, hello user has hello greater permissions determined by hello combination of roles.</span></span>  
  
#### <a name="toocreate-a-sales-employees-by-territory-user-role"></a><span data-ttu-id="610dc-181">toocreate en försäljning anställda av territorium användarroll</span><span class="sxs-lookup"><span data-stu-id="610dc-181">toocreate a Sales Employees by Territory user role</span></span>  
  
1.  <span data-ttu-id="610dc-182">Klicka på hello i SSDT, **modellen** -menyn och klicka sedan på **roller**.</span><span class="sxs-lookup"><span data-stu-id="610dc-182">In SSDT, click hello **Model** menu, and then click **Roles**.</span></span>  
  
2.  <span data-ttu-id="610dc-183">Klicka på **Ny** i **rollhanteraren**.</span><span class="sxs-lookup"><span data-stu-id="610dc-183">In **Role Manager**, click **New**.</span></span>  
  
    <span data-ttu-id="610dc-184">En ny roll med hello ingen behörighet har lagts till toohello lista.</span><span class="sxs-lookup"><span data-stu-id="610dc-184">A new role with hello None permission is added toohello list.</span></span>  
  
3.  <span data-ttu-id="610dc-185">Klicka på hello ny roll, och klicka sedan på hello **namn** kolumn, byta namn på hello rollen för**anställda försäljning per område**.</span><span class="sxs-lookup"><span data-stu-id="610dc-185">Click hello new role, and then in hello **Name** column, rename hello role too**Sales Employees by Territory**.</span></span>  
  
4.  <span data-ttu-id="610dc-186">I hello **behörigheter** kolumnen, klickar du på hello listrutan och välj sedan hello **Läs** behörighet.</span><span class="sxs-lookup"><span data-stu-id="610dc-186">In hello **Permissions** column, click hello dropdown list, and then select hello **Read** permission.</span></span>  
  
5.  <span data-ttu-id="610dc-187">Klicka på hello **medlemmar** fliken och klicka sedan på **Lägg till**.</span><span class="sxs-lookup"><span data-stu-id="610dc-187">Click hello **Members** tab, and then click **Add**.</span></span>  
  
6.  <span data-ttu-id="610dc-188">I hello **Välj användare eller grupp** i dialogrutan **RETUR hello-objekt med namnet tooselect**, Skriv hello första exemplet användarnamn du använde när du skapar hello EmployeeSecurity tabell.</span><span class="sxs-lookup"><span data-stu-id="610dc-188">In hello **Select User or Group** dialog box, in **Enter hello object named tooselect**, type hello first sample user name you used when creating hello EmployeeSecurity table.</span></span> <span data-ttu-id="610dc-189">Klicka på **Kontrollera namn** tooverify hello användarnamn är giltig och klicka sedan på **Ok**.</span><span class="sxs-lookup"><span data-stu-id="610dc-189">Click **Check Names** tooverify hello user name is valid, and then click **Ok**.</span></span>  
  
    <span data-ttu-id="610dc-190">Upprepa det här steget lägger till hello andra Exempelnamn för användare som du använde när du skapar hello EmployeeSecurity tabell.</span><span class="sxs-lookup"><span data-stu-id="610dc-190">Repeat this step, adding hello other sample user names you used when creating hello EmployeeSecurity table.</span></span>  
  
7.  <span data-ttu-id="610dc-191">Klicka på hello **radfilter** fliken.</span><span class="sxs-lookup"><span data-stu-id="610dc-191">Click hello **Row Filters** tab.</span></span>  
  
8.  <span data-ttu-id="610dc-192">För hello **EmployeeSecurity** tabell i hello **DAX-Filter** kolumn, typen hello följande formel:</span><span class="sxs-lookup"><span data-stu-id="610dc-192">For hello **EmployeeSecurity** table, in hello **DAX Filter** column, type hello following formula:</span></span>  
  
    ```
      =FALSE()  
    ```
  
    <span data-ttu-id="610dc-193">Den här formeln anger att alla kolumner matcha toohello FALSKT booleskt villkor.</span><span class="sxs-lookup"><span data-stu-id="610dc-193">This formula specifies that all columns resolve toohello false Boolean condition.</span></span> <span data-ttu-id="610dc-194">Inga kolumner har valts för hello EmployeeSecurity tabellen kan efterfrågas av en medlem i hello försäljning anställda av territorium användarroll.</span><span class="sxs-lookup"><span data-stu-id="610dc-194">No columns for hello EmployeeSecurity table can be queried by a member of hello Sales Employees by Territory user role.</span></span>  
  
9. <span data-ttu-id="610dc-195">För hello **DimSalesTerritory** tabell, typen hello följande formel:</span><span class="sxs-lookup"><span data-stu-id="610dc-195">For hello **DimSalesTerritory** table, type hello following formula:</span></span>  

    ```  
    ='Sales Territory'[Sales Territory Id]=LOOKUPVALUE('Employee Security'[Sales Territory Id], 
      'Employee Security'[Login Id], USERNAME(), 
      'Employee Security'[Sales Territory Id], 
      'Sales Territory'[Sales Territory Id]) 
    ```
  
    <span data-ttu-id="610dc-196">I den här formeln returnerar hello funktionen LOOKUPVALUE alla värden för hello DimEmployeeSecurity [SalesTerritoryId]-kolumnen, där hello EmployeeSecurity [LoginId] är hello samma som hello aktuella inloggade Windows-användarnamn och EmployeeSecurity [ SalesTerritoryId] är hello samma som hello DimSalesTerritory [SalesTerritoryId].</span><span class="sxs-lookup"><span data-stu-id="610dc-196">In this formula, hello LOOKUPVALUE function returns all values for hello DimEmployeeSecurity[SalesTerritoryId] column, where hello EmployeeSecurity[LoginId] is hello same as hello current logged on Windows user name, and EmployeeSecurity[SalesTerritoryId] is hello same as hello DimSalesTerritory[SalesTerritoryId].</span></span>  
  
    <span data-ttu-id="610dc-197">hello är försäljning territorium-ID: N som returneras av LOOKUPVALUE och sedan använda toorestrict hello rader som visas i hello DimSalesTerritory tabell.</span><span class="sxs-lookup"><span data-stu-id="610dc-197">hello set of sales territory IDs returned by LOOKUPVALUE is then used toorestrict hello rows shown in hello DimSalesTerritory table.</span></span> <span data-ttu-id="610dc-198">Endast rader där hello SalesTerritoryID för hello rad är i hello uppsättning ID som returnerades av funktionen för hello LOOKUPVALUE visas.</span><span class="sxs-lookup"><span data-stu-id="610dc-198">Only rows where hello SalesTerritoryID for hello row is in hello set of IDs returned by hello LOOKUPVALUE function are displayed.</span></span>  
  
10. <span data-ttu-id="610dc-199">Klicka på **Ok** i rollhanteraren.</span><span class="sxs-lookup"><span data-stu-id="610dc-199">In Role Manager, click **Ok**.</span></span>  
  
## <a name="test-hello-sales-employees-by-territory-user-role"></a><span data-ttu-id="610dc-200">Testa hello försäljning anställda av territorium användarroll</span><span class="sxs-lookup"><span data-stu-id="610dc-200">Test hello Sales Employees by Territory User Role</span></span>  
<span data-ttu-id="610dc-201">I det här steget använder du hello analysera i Excel-funktionen i SSDT tootest hello effekt hello försäljning anställda av territorium användarroll.</span><span class="sxs-lookup"><span data-stu-id="610dc-201">In this task, you use hello Analyze in Excel feature in SSDT tootest hello efficacy of hello Sales Employees by Territory user role.</span></span> <span data-ttu-id="610dc-202">Du anger ett av hello användarnamn du har lagt till toohello EmployeeSecurity tabellen och som en medlem i rollen hello.</span><span class="sxs-lookup"><span data-stu-id="610dc-202">You specify one of hello user names you added toohello EmployeeSecurity table and as a member of hello role.</span></span> <span data-ttu-id="610dc-203">Det här användarnamnet används sedan som hello gällande namnet i hello anslutningen mellan Excel och hello modellen.</span><span class="sxs-lookup"><span data-stu-id="610dc-203">This user name is then used as hello effective user name in hello connection created between Excel and hello model.</span></span>  
  
#### <a name="tootest-hello-sales-employees-by-territory-user-role"></a><span data-ttu-id="610dc-204">tootest hello försäljning anställda av territorium användarroll</span><span class="sxs-lookup"><span data-stu-id="610dc-204">tootest hello Sales Employees by Territory user role</span></span>  
  
1.  <span data-ttu-id="610dc-205">Klicka på hello i SSDT, **modellen** -menyn och klicka sedan på **analysera i Excel**.</span><span class="sxs-lookup"><span data-stu-id="610dc-205">In SSDT, click hello **Model** menu, and then click **Analyze in Excel**.</span></span>  
  
2.  <span data-ttu-id="610dc-206">I hello **analysera i Excel** i dialogrutan **ange hello namn eller roll toouse tooconnect toohello användarmodellen**väljer **andra Windows-användare**, och klicka sedan på **Bläddra**.</span><span class="sxs-lookup"><span data-stu-id="610dc-206">In hello **Analyze in Excel** dialog box, in **Specify hello user name or role toouse tooconnect toohello model**, select **Other Windows User**, and then click **Browse**.</span></span>  
  
3.  <span data-ttu-id="610dc-207">I hello **Välj användare eller grupp** i dialogrutan **ange hello objektet namnet tooselect**, ange ett användarnamn som du har inkluderat i hello EmployeeSecurity tabell och klicka sedan på **Kontrollera namn**.</span><span class="sxs-lookup"><span data-stu-id="610dc-207">In hello **Select User or Group** dialog box, in **Enter hello object name tooselect**, type a user name you included in hello EmployeeSecurity table, and then click **Check Names**.</span></span>  
  
4.  <span data-ttu-id="610dc-208">Klicka på **Ok** tooclose hello **Välj användare eller grupp** dialogrutan och klicka sedan på **Ok** tooclose hello **analysera i Excel** dialogrutan.</span><span class="sxs-lookup"><span data-stu-id="610dc-208">Click **Ok** tooclose hello **Select User or Group** dialog box, and then click **Ok** tooclose hello **Analyze in Excel** dialog box.</span></span>  
  
    <span data-ttu-id="610dc-209">Excel öppnas med en ny arbetsbok.</span><span class="sxs-lookup"><span data-stu-id="610dc-209">Excel opens with a new workbook.</span></span> <span data-ttu-id="610dc-210">En pivottabell skapas automatiskt.</span><span class="sxs-lookup"><span data-stu-id="610dc-210">A PivotTable is automatically created.</span></span> <span data-ttu-id="610dc-211">hello PivotTable-Fields listan innehåller de flesta av hello datafält som är tillgängliga i din nya modell.</span><span class="sxs-lookup"><span data-stu-id="610dc-211">hello PivotTable Fields list includes most of hello data fields available in your new model.</span></span>  
  
    <span data-ttu-id="610dc-212">Meddelande hello EmployeeSecurity tabellen visas inte i hello PivotTable-Fields lista.</span><span class="sxs-lookup"><span data-stu-id="610dc-212">Notice hello EmployeeSecurity table is not visible in hello PivotTable Fields list.</span></span> <span data-ttu-id="610dc-213">Du valde att dölja den här tabellen för klientverktyg i en föregående aktivitet.</span><span class="sxs-lookup"><span data-stu-id="610dc-213">You hid this table from client tools in a previous task.</span></span>  
  
5.  <span data-ttu-id="610dc-214">I hello **fält** under **∑ Internet försäljning** (mått), Välj hello **InternetTotalSales** mått.</span><span class="sxs-lookup"><span data-stu-id="610dc-214">In hello **Fields** list, in **∑ Internet Sales** (measures), select hello **InternetTotalSales** measure.</span></span> <span data-ttu-id="610dc-215">hello mått har angetts i hello **värden** fält.</span><span class="sxs-lookup"><span data-stu-id="610dc-215">hello measure is entered into hello **Values** fields.</span></span>  
  
6.  <span data-ttu-id="610dc-216">Välj hello **SalesTerritoryId** kolumn från hello **DimSalesTerritory** tabell.</span><span class="sxs-lookup"><span data-stu-id="610dc-216">Select hello **SalesTerritoryId** column from hello **DimSalesTerritory** table.</span></span> <span data-ttu-id="610dc-217">hello kolumn har angetts i hello **radetiketter** fält.</span><span class="sxs-lookup"><span data-stu-id="610dc-217">hello column is entered into hello **Row Labels** fields.</span></span>  
  
    <span data-ttu-id="610dc-218">Meddelande Internet försäljningssiffrorna visas bara för hello en region toowhich hello gällande användarnamnet du använde tillhör.</span><span class="sxs-lookup"><span data-stu-id="610dc-218">Notice Internet sales figures appear only for hello one region toowhich hello effective user name you used belongs.</span></span> <span data-ttu-id="610dc-219">Om du väljer en annan kolumn, visas som stad från hello DimGeography tabellen som rad Etikettfält, endast städer i hello försäljning territorium toowhich hello effektiva användaren tillhör.</span><span class="sxs-lookup"><span data-stu-id="610dc-219">If you select another column, like City from hello DimGeography table as Row Label field, only cities in hello sales territory toowhich hello effective user belongs are displayed.</span></span>  
  
    <span data-ttu-id="610dc-220">Den här användaren kan inte bläddra eller fråga alla Internet-försäljningsdata för områden än hello en de tillhör.</span><span class="sxs-lookup"><span data-stu-id="610dc-220">This user cannot browse or query any Internet sales data for territories other than hello one they belong to.</span></span> <span data-ttu-id="610dc-221">Den här begränsningen beror på att hello radfilter som definierats för hello DimSalesTerritory tabell i hello försäljning anställda av territorium användarrollen skyddar data för alla data som rör tooother Försäljningsdistrikt.</span><span class="sxs-lookup"><span data-stu-id="610dc-221">This restriction is because hello row filter defined for hello DimSalesTerritory table, in hello Sales Employees by Territory user role, secures data for all data related tooother sales territories.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="610dc-222">Se även</span><span class="sxs-lookup"><span data-stu-id="610dc-222">See Also</span></span>  
[<span data-ttu-id="610dc-223">Funktionen USERNAME (DAX)</span><span class="sxs-lookup"><span data-stu-id="610dc-223">USERNAME Function (DAX)</span></span>](https://msdn.microsoft.com/library/hh230954.aspx)  
[<span data-ttu-id="610dc-224">Funktionen LOOKUPVALUE (DAX)</span><span class="sxs-lookup"><span data-stu-id="610dc-224">LOOKUPVALUE Function (DAX)</span></span>](https://msdn.microsoft.com/library/gg492170.aspx)  
[<span data-ttu-id="610dc-225">Funktionen CUSTOMDATA (DAX)</span><span class="sxs-lookup"><span data-stu-id="610dc-225">CUSTOMDATA Function (DAX)</span></span>](https://msdn.microsoft.com/library/hh213140.aspx)  
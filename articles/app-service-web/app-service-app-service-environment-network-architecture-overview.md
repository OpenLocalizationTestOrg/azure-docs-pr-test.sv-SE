---
title: "aaaNetwork arkitektur översikt av Apptjänstmiljöer"
description: "Översikt över arkitekturen i nätverket topologi ofApp miljöer."
services: app-service
documentationcenter: 
author: stefsch
manager: erikre
editor: 
ms.assetid: 13d03a37-1fe2-4e3e-9d57-46dfb330ba52
ms.service: app-service
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 10/04/2016
ms.author: stefsch
ms.openlocfilehash: 3cbc86883f5687a9ada35a3ab2f577a450a3fa0b
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: sv-SE
ms.lasthandoff: 10/06/2017
---
# <a name="network-architecture-overview-of-app-service-environments"></a><span data-ttu-id="4cf42-103">Översikt över nätverksarkitekturen i App Service-miljöer</span><span class="sxs-lookup"><span data-stu-id="4cf42-103">Network Architecture Overview of App Service Environments</span></span>
## <a name="introduction"></a><span data-ttu-id="4cf42-104">Introduktion</span><span class="sxs-lookup"><span data-stu-id="4cf42-104">Introduction</span></span>
<span data-ttu-id="4cf42-105">Apptjänstmiljöer skapas alltid i ett undernät för en [virtuellt nätverk] [ virtualnetwork] -appar som körs i en Apptjänst-miljö kan kommunicera med privata slutpunkter som ligger inom hello samma virtuella nätverkets topologi.</span><span class="sxs-lookup"><span data-stu-id="4cf42-105">App Service Environments are always created within a subnet of a [virtual network][virtualnetwork] - apps running in an App Service Environment can communicate with private endpoints located within hello same virtual network topology.</span></span>  <span data-ttu-id="4cf42-106">Eftersom kunder kan låsa delar av deras virtuella nätverksinfrastruktur, är det viktigt toounderstand hello typer av nätverksflöden för kommunikation som sker med en Apptjänst-miljö.</span><span class="sxs-lookup"><span data-stu-id="4cf42-106">Since customers may lock down parts of their virtual network infrastructure, it is important toounderstand hello types of network communication flows that occur with an App Service Environment.</span></span>

## <a name="general-network-flow"></a><span data-ttu-id="4cf42-107">Allmänna flödet för nätverk</span><span class="sxs-lookup"><span data-stu-id="4cf42-107">General Network Flow</span></span>
<span data-ttu-id="4cf42-108">När en App Service miljö (ASE) använder en offentlig virtuella IP-adress (VIP) för appar, kommer all inkommande trafik på den offentliga VIP.</span><span class="sxs-lookup"><span data-stu-id="4cf42-108">When an App Service Environment (ASE) uses a public virtual IP address (VIP) for apps, all inbound traffic arrives on that public VIP.</span></span>  <span data-ttu-id="4cf42-109">Det inkluderar HTTP och HTTPS-trafik för appar, samt annan trafik för FTP, felsökning fjärrfunktioner och Azure hanteringsåtgärder.</span><span class="sxs-lookup"><span data-stu-id="4cf42-109">This includes HTTP and HTTPS traffic for apps, as well as other traffic for FTP, remote debugging functionality, and Azure management operations.</span></span>  <span data-ttu-id="4cf42-110">En fullständig lista över hello specifika portar (obligatoriska och valfria) som är tillgängliga på hello offentliga VIP finns hello artikel på [styra inkommande trafik] [ controllinginboundtraffic] tooan Apptjänst-miljö.</span><span class="sxs-lookup"><span data-stu-id="4cf42-110">For a full list of hello specific ports (both required and optional) that are available on hello public VIP see hello article on [controlling inbound traffic][controllinginboundtraffic] tooan App Service Environment.</span></span> 

<span data-ttu-id="4cf42-111">Apptjänstmiljöer stöder också körs appar som är bundna endast tooa virtuella datornätverket interna adressen kallas tooas ILB (intern belastningsutjämnare)-adressen.</span><span class="sxs-lookup"><span data-stu-id="4cf42-111">App Service Environments also support running apps that are bound only tooa virtual network internal address, also referred tooas an ILB (internal load balancer) address.</span></span>  <span data-ttu-id="4cf42-112">På en ILB inkommer aktiverad ASE, HTTP och HTTPS-trafik för appar samt felsökning fjärranrop till hello ILB-adress.</span><span class="sxs-lookup"><span data-stu-id="4cf42-112">On an ILB enabled ASE, HTTP and HTTPS traffic for apps as well as remote debugging calls, arrive on hello ILB address.</span></span>  <span data-ttu-id="4cf42-113">För de vanligaste ILB ASE konfigurationer kommer också FTP-/ FTPS-trafik på hello ILB-adress.</span><span class="sxs-lookup"><span data-stu-id="4cf42-113">For most common ILB-ASE configurations, FTP/FTPS traffic will also arrive on hello ILB address.</span></span>  <span data-ttu-id="4cf42-114">Däremot aktiverad Azure hanteringsåtgärder flödar fortfarande tooports 454/455 på hello offentliga VIP för en ILB ASE.</span><span class="sxs-lookup"><span data-stu-id="4cf42-114">However Azure management operations will still flow tooports 454/455 on hello public VIP of an ILB enabled ASE.</span></span>

<span data-ttu-id="4cf42-115">hello diagrammet nedan visar en översikt över hello olika inkommande och utgående nätverksflöden för en Apptjänst-miljö där hello appar som är bundna tooa offentliga virtuella IP-adressen:</span><span class="sxs-lookup"><span data-stu-id="4cf42-115">hello diagram below shows an overview of hello various inbound and outbound network flows for an App Service Environment where hello apps are bound tooa public virtual IP address:</span></span>

![Allmänna nätverksflöden][GeneralNetworkFlows]

<span data-ttu-id="4cf42-117">En Apptjänst-miljö kan kommunicera med en mängd olika privata kunden slutpunkter.</span><span class="sxs-lookup"><span data-stu-id="4cf42-117">An App Service Environment can communicate with a variety of private customer endpoints.</span></span>  <span data-ttu-id="4cf42-118">Till exempel hello appar som körs i hello Apptjänst-miljö kan ansluta toodatabase servrar som körs på IaaS-virtuella datorer i samma virtuella nätverkstopologin.</span><span class="sxs-lookup"><span data-stu-id="4cf42-118">For example, apps running in hello App Service Environment can connect toodatabase server(s) running on IaaS virtual machines in hello same virtual network topology.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="4cf42-119">Titta på hello nätverksdiagram hello ”andra beräkna resurser” distribueras i ett annat undernät från hello Apptjänst-miljö.</span><span class="sxs-lookup"><span data-stu-id="4cf42-119">Looking at hello network diagram, hello "Other Compute Resources" are deployed in a different Subnet from hello App Service Environment.</span></span> <span data-ttu-id="4cf42-120">Distribuera resurser i hello blockerar samma undernät med hello ASE anslutningen från ASE toothose resurser (förutom för specifika intra-ASE routning).</span><span class="sxs-lookup"><span data-stu-id="4cf42-120">Deploying resources in hello same Subnet with hello ASE will block connectivity from ASE toothose resources (except for specific intra-ASE routing).</span></span> <span data-ttu-id="4cf42-121">Distribuera tooa olika undernät i stället (i hello samma virtuella nätverk).</span><span class="sxs-lookup"><span data-stu-id="4cf42-121">Deploy tooa different Subnet instead (in hello same VNET).</span></span> <span data-ttu-id="4cf42-122">Hej Apptjänstmiljö kommer sedan att kunna tooconnect.</span><span class="sxs-lookup"><span data-stu-id="4cf42-122">hello App Service Environment will then be able tooconnect.</span></span> <span data-ttu-id="4cf42-123">Det krävs ingen ytterligare konfiguration.</span><span class="sxs-lookup"><span data-stu-id="4cf42-123">No additional configuration is necessary.</span></span>
> 
> 

<span data-ttu-id="4cf42-124">Apptjänstmiljöer också kommunicera med Sql-databas och Azure Storage resurser som krävs för att hantera och driva en Apptjänst-miljö.</span><span class="sxs-lookup"><span data-stu-id="4cf42-124">App Service Environments also communicate with Sql DB and Azure Storage resources necessary for managing and operating an App Service Environment.</span></span>  <span data-ttu-id="4cf42-125">Hello Sql- och resurser som en Apptjänst-miljö kommunicerar med finns i hello samma region som hello Apptjänst-miljön, medan andra finns i Azure-regioner.</span><span class="sxs-lookup"><span data-stu-id="4cf42-125">Some of hello Sql and Storage resources that an App Service Environment communicates with are located in hello same region as hello App Service Environment, while others are located in remote Azure regions.</span></span>  <span data-ttu-id="4cf42-126">Därför utgående anslutning toohello Internet krävs alltid för en Apptjänstmiljö toofunction korrekt.</span><span class="sxs-lookup"><span data-stu-id="4cf42-126">As a result, outbound connectivity toohello Internet is always required for an App Service Environment toofunction properly.</span></span> 

<span data-ttu-id="4cf42-127">Eftersom en Apptjänst-miljö har distribuerats i ett undernät, nätverkssäkerhetsgrupper vara används toocontrol toohello undernätet för inkommande trafik.</span><span class="sxs-lookup"><span data-stu-id="4cf42-127">Since an App Service Environment is deployed in a subnet, network security groups can be used toocontrol inbound traffic toohello subnet.</span></span>  <span data-ttu-id="4cf42-128">Mer information om hur toocontrol inkommande trafik tooan Apptjänst-miljö finns hello följande [artikel][controllinginboundtraffic].</span><span class="sxs-lookup"><span data-stu-id="4cf42-128">For details on how toocontrol inbound traffic tooan App Service Environment, see hello following [article][controllinginboundtraffic].</span></span>

<span data-ttu-id="4cf42-129">Mer information om hur tooallow utgående Internetanslutning från en Apptjänst-miljö, se följande artikel om hur du arbetar med hello [Expressroute][ExpressRoute].</span><span class="sxs-lookup"><span data-stu-id="4cf42-129">For details on how tooallow outbound Internet connectivity from an App Service Environment, see hello following article about working with [Express Route][ExpressRoute].</span></span>  <span data-ttu-id="4cf42-130">hello samma metod som beskrivs i hello artikeln gäller när du arbetar med plats-till-plats-anslutning och använder Tvingad tunneltrafik.</span><span class="sxs-lookup"><span data-stu-id="4cf42-130">hello same approach described in hello article applies when working with Site-to-Site connectivity and using forced tunneling.</span></span>

## <a name="outbound-network-addresses"></a><span data-ttu-id="4cf42-131">Utgående nätverksadresser</span><span class="sxs-lookup"><span data-stu-id="4cf42-131">Outbound Network Addresses</span></span>
<span data-ttu-id="4cf42-132">När en Apptjänst-miljö gör utgående samtal, är alltid en IP-adress kopplad till hello utgående samtal.</span><span class="sxs-lookup"><span data-stu-id="4cf42-132">When an App Service Environment makes outbound calls, an IP Address is always associated with hello outbound calls.</span></span>  <span data-ttu-id="4cf42-133">hello specifik IP-adress som används beror på om hello-slutpunkt anropas finns i hello virtuella nätverkstopologin eller utanför hello virtuella nätverkstopologin.</span><span class="sxs-lookup"><span data-stu-id="4cf42-133">hello specific IP address that is used depends on whether hello endpoint being called is located within hello virtual network topology, or outside of hello virtual network topology.</span></span>

<span data-ttu-id="4cf42-134">Om hello-slutpunkt anropas är **utanför** hello virtuella nätverkets topologi och sedan hello utgående adress (aka hello utgående NAT-adress) som används är hello offentliga VIP för hello Apptjänst-miljö.</span><span class="sxs-lookup"><span data-stu-id="4cf42-134">If hello endpoint being called is **outside** of hello virtual network topology, then hello outbound address (aka hello outbound NAT address) that is used is hello public VIP of hello App Service Environment.</span></span>  <span data-ttu-id="4cf42-135">Den här adressen finns i hello portalens användargränssnitt för hello Apptjänstmiljö i egenskapsbladet.</span><span class="sxs-lookup"><span data-stu-id="4cf42-135">This address can be found in hello portal user interface for hello App Service Environment in Properties blade.</span></span>

![Utgående IP-adress][OutboundIPAddress]

<span data-ttu-id="4cf42-137">Den här adressen kan även fastställas för ASEs som bara har en offentlig VIP genom att skapa en app i hello Apptjänst-miljö och utför sedan en *nslookup* hello app-adressen.</span><span class="sxs-lookup"><span data-stu-id="4cf42-137">This address can also be determined for ASEs that only have a public VIP by creating an app in hello App Service Environment, and then performing an *nslookup* on hello app's address.</span></span> <span data-ttu-id="4cf42-138">hello gällande IP-adressen är både hello offentliga VIP samt hello Apptjänstmiljös utgående NAT-adress.</span><span class="sxs-lookup"><span data-stu-id="4cf42-138">hello resultant IP address is both hello public VIP, as well as hello App Service Environment's outbound NAT address.</span></span>

<span data-ttu-id="4cf42-139">Om hello-slutpunkt anropas är **i** för hello virtuella nätverkets topologi hello utgående adress hello anropa app kommer att vara hello interna IP-adress hello enskilda beräkningsresurser kör hello app.</span><span class="sxs-lookup"><span data-stu-id="4cf42-139">If hello endpoint being called is **inside** of hello virtual network topology, hello outbound address of hello calling app will be hello internal IP address of hello individual compute resource running hello app.</span></span>  <span data-ttu-id="4cf42-140">Men det är inte en beständig mappning av virtuellt nätverk interna IP-adresser tooapps.</span><span class="sxs-lookup"><span data-stu-id="4cf42-140">However there is not a persistent mapping of virtual network internal IP addresses tooapps.</span></span>  <span data-ttu-id="4cf42-141">Appar kan flytta över olika beräkningsresurser och hello-pool med tillgängliga beräkningsresurser i en Apptjänst-miljö kan ändra på grund av tooscaling åtgärder.</span><span class="sxs-lookup"><span data-stu-id="4cf42-141">Apps can move around across different compute resources, and hello pool of available compute resources in an App Service Environment can change due tooscaling operations.</span></span>

<span data-ttu-id="4cf42-142">Eftersom en Apptjänst-miljö finns alltid i ett undernät kan garanteras du dock att hello interna IP-adressen för en beräkningsresurser som kör en app alltid ska ligga inom hello CIDR-intervall för hello undernät.</span><span class="sxs-lookup"><span data-stu-id="4cf42-142">However, since an App Service Environment is always located within a subnet, you are guaranteed that hello internal IP address of a compute resource running an app will always lie within hello CIDR range of hello subnet.</span></span>  <span data-ttu-id="4cf42-143">Därför när detaljerade ACL: er eller nätverkssäkerhetsgrupper används toosecure tooother slutpunkter inom hello virtuellt nätverk kan hello undernätsintervall som innehåller hello Apptjänstmiljö behov toobe beviljas åtkomst.</span><span class="sxs-lookup"><span data-stu-id="4cf42-143">As a result, when fine-grained ACLs or network security groups are used toosecure access tooother endpoints within hello virtual network, hello subnet range containing hello App Service Environment needs toobe granted access.</span></span>

<span data-ttu-id="4cf42-144">hello följande diagram visar dessa koncept i detalj:</span><span class="sxs-lookup"><span data-stu-id="4cf42-144">hello following diagram shows these concepts in more detail:</span></span>

![Utgående nätverksadresser][OutboundNetworkAddresses]

<span data-ttu-id="4cf42-146">I hello ovan diagram:</span><span class="sxs-lookup"><span data-stu-id="4cf42-146">In hello above diagram:</span></span>

* <span data-ttu-id="4cf42-147">Eftersom hello offentliga VIP för hello Apptjänstmiljö 192.23.1.2, som är hello utgående IP-adress som används när du anropar för ”Internet” slutpunkter.</span><span class="sxs-lookup"><span data-stu-id="4cf42-147">Since hello public VIP of hello App Service Environment is 192.23.1.2, that is hello outbound IP address used when making calls too"Internet" endpoints.</span></span>
* <span data-ttu-id="4cf42-148">hello CIDR-intervall för hello som innehåller undernät för hello Apptjänst-miljö är 10.0.1.0/26.</span><span class="sxs-lookup"><span data-stu-id="4cf42-148">hello CIDR range of hello containing subnet for hello App Service Environment is 10.0.1.0/26.</span></span>  <span data-ttu-id="4cf42-149">Slutpunkter inom hello samma infrastruktur för virtuellt nätverk ser anrop från appar som härrör från någonstans i den här adressintervallet.</span><span class="sxs-lookup"><span data-stu-id="4cf42-149">Other endpoints within hello same virtual network infrastructure will see calls from apps as originating from somewhere within this address range.</span></span>

## <a name="calls-between-app-service-environments"></a><span data-ttu-id="4cf42-150">Anrop mellan Apptjänstmiljöer</span><span class="sxs-lookup"><span data-stu-id="4cf42-150">Calls Between App Service Environments</span></span>
<span data-ttu-id="4cf42-151">En mer komplex situationen kan uppstå om du distribuerar flera Apptjänstmiljöer i hello samma virtuella nätverk och utgående anrop från en Apptjänst-miljö tooanother Apptjänst-miljö.</span><span class="sxs-lookup"><span data-stu-id="4cf42-151">A more complex scenario can occur if you deploy multiple App Service Environments in hello same virtual network, and make outbound calls from one App Service Environment tooanother App Service Environment.</span></span>  <span data-ttu-id="4cf42-152">Dessa typer av mellan Apptjänstmiljö anrop kommer också att behandlas som ”Internet” anrop.</span><span class="sxs-lookup"><span data-stu-id="4cf42-152">These types of cross App Service Environment calls will also be treated as "Internet" calls.</span></span>

<span data-ttu-id="4cf42-153">hello följande diagram visar ett exempel på en skiktad arkitektur med appar på en Apptjänst-miljö (t.ex.) ”Dörren” web apps) anropa appar på en andra Apptjänst-miljö (t.ex. interna backend-API apps inte avsedda toobe som är tillgänglig från hello Internet).</span><span class="sxs-lookup"><span data-stu-id="4cf42-153">hello following diagram shows an example of a layered architecture with apps on one App Service Environment (e.g. "Front door" web apps) calling apps on a second App Service Environment (e.g. internal back-end API apps not intended toobe accessible from hello Internet).</span></span> 

![Anrop mellan Apptjänstmiljöer][CallsBetweenAppServiceEnvironments] 

<span data-ttu-id="4cf42-155">I hello har 192.23.1.2 utgående IP-adressen i exemplet ovan hello Apptjänstmiljö ”ASE en”.</span><span class="sxs-lookup"><span data-stu-id="4cf42-155">In hello example above hello App Service Environment "ASE One" has an outbound IP address of 192.23.1.2.</span></span>  <span data-ttu-id="4cf42-156">Om en app som körs på den här Apptjänst-miljön gör en utgående samtal tooan app som körs på en andra Apptjänstmiljö (”ASE två”) finns i samma virtuella nätverk, hello hello utgående behandlas anropet som ett anrop för ”Internet”.</span><span class="sxs-lookup"><span data-stu-id="4cf42-156">If an app running on this App Service Environment makes an outbound call tooan app running on a second App Service Environment ("ASE Two") located in hello same virtual network, hello outbound call will be treated as an "Internet" call.</span></span>  <span data-ttu-id="4cf42-157">Därmed visas hello nätverkstrafik som inkommer på hello andra Apptjänstmiljö som härrör från 192.23.1.2 (d.v.s. inte hello undernät adressintervall hello första Apptjänst-miljö).</span><span class="sxs-lookup"><span data-stu-id="4cf42-157">As a result hello network traffic arriving on hello second App Service Environment will show as originating from 192.23.1.2 (i.e. not hello subnet address range of hello first App Service Environment).</span></span>

<span data-ttu-id="4cf42-158">Även om anrop mellan olika Apptjänstmiljöer behandlas som ”Internet” anrop, när båda Apptjänstmiljöer befinner sig i hello samma Azure-region hello-nätverkstrafik finns kvar på hello regionala Azure-nätverk och flödar inte fysiskt över hello offentliga Internet.</span><span class="sxs-lookup"><span data-stu-id="4cf42-158">Even though calls between different App Service Environments are treated as "Internet" calls, when both App Service Environments are located in hello same Azure region hello network traffic will remain on hello regional Azure network and will not physically flow over hello public Internet.</span></span>  <span data-ttu-id="4cf42-159">Därför kan du använda en nätverkssäkerhetsgrupp på hello undernätet för hello hello andra Apptjänstmiljö tooonly tillåta inkommande anrop från första Apptjänst-miljö (vars utgående IP-adress är 192.23.1.2), därför att säkerställa säker kommunikation mellan hello Apptjänst-miljöer.</span><span class="sxs-lookup"><span data-stu-id="4cf42-159">As a result you can use a network security group on hello subnet of hello second App Service Environment tooonly allow inbound calls from hello first App Service Environment (whose outbound IP address is 192.23.1.2), thus ensuring secure communication between hello App Service Environments.</span></span>

## <a name="additional-links-and-information"></a><span data-ttu-id="4cf42-160">Information och ytterligare länkar</span><span class="sxs-lookup"><span data-stu-id="4cf42-160">Additional Links and Information</span></span>
<span data-ttu-id="4cf42-161">Alla artiklar och hur-att datorns för Apptjänstmiljöer finns tillgängliga i hello [viktigt för Programtjänstmiljöer](../app-service/app-service-app-service-environments-readme.md).</span><span class="sxs-lookup"><span data-stu-id="4cf42-161">All articles and How-To's for App Service Environments are available in hello [README for Application Service Environments](../app-service/app-service-app-service-environments-readme.md).</span></span>

<span data-ttu-id="4cf42-162">Information om inkommande portar som används av Apptjänstmiljöer och använda network security grupper toocontrol inkommande trafik finns [här][controllinginboundtraffic].</span><span class="sxs-lookup"><span data-stu-id="4cf42-162">Details on inbound ports used by App Service Environments and using network security groups toocontrol inbound traffic is available [here][controllinginboundtraffic].</span></span>

<span data-ttu-id="4cf42-163">Information om hur du använder användardefinierade vägar toogrant utgående Internet access tooApp miljöer finns i det här [artikel][ExpressRoute].</span><span class="sxs-lookup"><span data-stu-id="4cf42-163">Details on using user defined routes toogrant outbound Internet access tooApp Service Environments is available in this [article][ExpressRoute].</span></span> 

<!-- LINKS -->
[virtualnetwork]: http://azure.microsoft.com/services/virtual-network/
[controllinginboundtraffic]:  http://azure.microsoft.com/documentation/articles/app-service-app-service-environment-control-inbound-traffic/
[ExpressRoute]:  http://azure.microsoft.com/documentation/articles/app-service-app-service-environment-network-configuration-expressroute/

<!-- IMAGES -->
[GeneralNetworkFlows]: ./media/app-service-app-service-environment-network-architecture-overview/NetworkOverview-1.png
[OutboundIPAddress]: ./media/app-service-app-service-environment-network-architecture-overview/OutboundIPAddress-1.png
[OutboundNetworkAddresses]: ./media/app-service-app-service-environment-network-architecture-overview/OutboundNetworkAddresses-1.png
[CallsBetweenAppServiceEnvironments]: ./media/app-service-app-service-environment-network-architecture-overview/CallsBetweenEnvironments-1.png


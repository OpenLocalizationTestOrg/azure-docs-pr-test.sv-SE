---
title: "aaaProvision och distribuera mikrotjänster förutsägbart i Azure"
description: "Lär dig hur toodeploy ett program består av mikrotjänster i Azure App Service som en enhet och förutsägbart med hjälp av JSON resurs mallar och PowerShell-skript."
services: app-service
documentationcenter: 
author: cephalin
manager: erikre
editor: jimbe
ms.assetid: bb51e565-e462-4c60-929a-2ff90121f41d
ms.service: app-service
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 01/06/2016
ms.author: cephalin
ms.openlocfilehash: d32c2fc82a8b09e89224ec437e5819b65b2e9e78
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: sv-SE
ms.lasthandoff: 10/06/2017
---
# <a name="provision-and-deploy-microservices-predictably-in-azure"></a><span data-ttu-id="bba69-103">Etablera och distribuera mikrotjänster förutsägbart i Azure</span><span class="sxs-lookup"><span data-stu-id="bba69-103">Provision and deploy microservices predictably in Azure</span></span>
<span data-ttu-id="bba69-104">Den här kursen visar hur tooprovision och distribuera ett program som består av [mikrotjänster](https://en.wikipedia.org/wiki/Microservices) i [Azure App Service](/services/app-service/) som en enhet och förutsägbart JSON resurs mallar och PowerShell-skript.</span><span class="sxs-lookup"><span data-stu-id="bba69-104">This tutorial shows how tooprovision and deploy an application composed of [microservices](https://en.wikipedia.org/wiki/Microservices) in [Azure App Service](/services/app-service/) as a single unit and in a predictable manner using JSON resource group templates and PowerShell scripting.</span></span> 

<span data-ttu-id="bba69-105">Är avgörande toosuccess när etablering och distribuera hög skala program som består av hög frikopplad mikrotjänster, repeterbarhet och förutsägbarhet.</span><span class="sxs-lookup"><span data-stu-id="bba69-105">When provisioning and deploying high-scale applications that are composed of highly decoupled microservices, repeatability and predictability are crucial toosuccess.</span></span> <span data-ttu-id="bba69-106">[Azure Apptjänst](/services/app-service/) kan du toocreate mikrotjänster med webbappar, mobilappar, API apps och logikappar.</span><span class="sxs-lookup"><span data-stu-id="bba69-106">[Azure App Service](/services/app-service/) enables you toocreate microservices that include web apps, mobile apps, API apps, and logic apps.</span></span> <span data-ttu-id="bba69-107">[Azure Resource Manager](../azure-resource-manager/resource-group-overview.md) aktiverar du toomanage alla hello mikrotjänster som en enhet, tillsammans med resursberoenden, till exempel inställningar för databas- och åtkomstkontroll.</span><span class="sxs-lookup"><span data-stu-id="bba69-107">[Azure Resource Manager](../azure-resource-manager/resource-group-overview.md) enables you toomanage all hello microservices as a unit, together with resource dependencies such as database and source control settings.</span></span> <span data-ttu-id="bba69-108">Du kan också distribuera sådant program med hjälp av JSON-mallarna och enkla PowerShell-skript.</span><span class="sxs-lookup"><span data-stu-id="bba69-108">Now, you can also deploy such an application using JSON templates and simple PowerShell scripting.</span></span> 

[!INCLUDE [app-service-web-to-api-and-mobile](../../includes/app-service-web-to-api-and-mobile.md)]

## <a name="what-you-will-do"></a><span data-ttu-id="bba69-109">Vad du ska göra</span><span class="sxs-lookup"><span data-stu-id="bba69-109">What you will do</span></span>
<span data-ttu-id="bba69-110">I hello kursen distribuerar du ett program som innehåller:</span><span class="sxs-lookup"><span data-stu-id="bba69-110">In hello tutorial, you will deploy an application that includes:</span></span>

* <span data-ttu-id="bba69-111">Två webbappar (d.v.s. två mikrotjänster)</span><span class="sxs-lookup"><span data-stu-id="bba69-111">Two web apps (i.e. two microservices)</span></span>
* <span data-ttu-id="bba69-112">En serverdel SQL-databas</span><span class="sxs-lookup"><span data-stu-id="bba69-112">A backend SQL Database</span></span>
* <span data-ttu-id="bba69-113">App-inställningar och anslutningssträngar källkontroll</span><span class="sxs-lookup"><span data-stu-id="bba69-113">App settings, connection strings, and source control</span></span>
* <span data-ttu-id="bba69-114">Programinsikter, aviseringar, autoskalning inställningar</span><span class="sxs-lookup"><span data-stu-id="bba69-114">Application insights, alerts, autoscaling settings</span></span>

## <a name="tools-you-will-use"></a><span data-ttu-id="bba69-115">Verktyg som du vill använda</span><span class="sxs-lookup"><span data-stu-id="bba69-115">Tools you will use</span></span>
<span data-ttu-id="bba69-116">I den här kursen använder hello följande verktyg.</span><span class="sxs-lookup"><span data-stu-id="bba69-116">In this tutorial, you will use hello following tools.</span></span> <span data-ttu-id="bba69-117">Eftersom den inte är omfattande diskussion om verktyg I villig toostick toohello slutpunkt till slutpunkt scenario och bara ge dig en kort introduktion tooeach och var du hittar mer information om den.</span><span class="sxs-lookup"><span data-stu-id="bba69-117">Since it’s not comprehensive discussion on tools, I’m going toostick toohello end-to-end scenario and just give you a brief intro tooeach, and where you can find more information on it.</span></span> 

### <a name="azure-resource-manager-templates-json"></a><span data-ttu-id="bba69-118">Azure Resource Manager-mallar (JSON)</span><span class="sxs-lookup"><span data-stu-id="bba69-118">Azure Resource Manager templates (JSON)</span></span>
<span data-ttu-id="bba69-119">Varje gång du skapar en webbapp i Azure App Service, till exempel använder Azure Resource Manager JSON mallen toocreate hello hela gruppen med hello komponenten resurser.</span><span class="sxs-lookup"><span data-stu-id="bba69-119">Every time you create a web app in Azure App Service, for example, Azure Resource Manager uses a JSON template toocreate hello entire resource group with hello component resources.</span></span> <span data-ttu-id="bba69-120">En komplex mall från hello [Azure Marketplace](/marketplace) som hello [skalbar WordPress](/marketplace/partners/wordpress/scalablewordpress/) app kan innehålla hello MySQL-databas, storage-konton, hello App Service-plan, hello webbprogrammet själva, Varningsregler, app inställningar, Autoskala inställningar och mer och alla dessa mallar är tillgängliga tooyou via PowerShell.</span><span class="sxs-lookup"><span data-stu-id="bba69-120">A complex template from hello [Azure Marketplace](/marketplace) like hello [Scalable WordPress](/marketplace/partners/wordpress/scalablewordpress/) app can include hello MySQL database, storage accounts, hello App Service plan, hello web app itself, alert rules, app settings, autoscale settings, and more, and all these templates are available tooyou through PowerShell.</span></span> <span data-ttu-id="bba69-121">Mer information om hur toodownload och använda mallarna, se [med hjälp av Azure PowerShell med Azure Resource Manager](../powershell-azure-resource-manager.md).</span><span class="sxs-lookup"><span data-stu-id="bba69-121">For information on how toodownload and use these templates, see [Using Azure PowerShell with Azure Resource Manager](../powershell-azure-resource-manager.md).</span></span>

<span data-ttu-id="bba69-122">Mer information om hello Azure Resource Manager-mallar finns [redigera Azure Resource Manager-mallar](../azure-resource-manager/resource-group-authoring-templates.md)</span><span class="sxs-lookup"><span data-stu-id="bba69-122">For more information on hello Azure Resource Manager templates, see [Authoring Azure Resource Manager Templates](../azure-resource-manager/resource-group-authoring-templates.md)</span></span>

### <a name="azure-sdk-26-for-visual-studio"></a><span data-ttu-id="bba69-123">Azure SDK 2.6 för Visual Studio</span><span class="sxs-lookup"><span data-stu-id="bba69-123">Azure SDK 2.6 for Visual Studio</span></span>
<span data-ttu-id="bba69-124">hello innehåller senaste SDK förbättringar toohello mallstöd för Resource Manager-i hello JSON-redigerare.</span><span class="sxs-lookup"><span data-stu-id="bba69-124">hello newest SDK contains improvements toohello Resource Manager template support in hello JSON editor.</span></span> <span data-ttu-id="bba69-125">Du kan använda den här tooquickly Skapa mall för en resurs från grunden eller öppna en befintlig JSON-mall (t.ex en mall för hämtade galleriet) för redigering, fylla hello parameterfilen och även distribuera hello resursgruppen direkt från en Azure Resursgruppen lösning.</span><span class="sxs-lookup"><span data-stu-id="bba69-125">You can use this tooquickly create a resource group template from scratch or open an existing JSON template (such as a downloaded gallery template) for modification, populate hello parameters file, and even deploy hello resource group directly from an Azure Resource Group solution.</span></span>

<span data-ttu-id="bba69-126">Mer information finns i [2.6 av Azure SDK för Visual Studio](https://azure.microsoft.com/blog/2015/04/29/announcing-the-azure-sdk-2-6-for-net/).</span><span class="sxs-lookup"><span data-stu-id="bba69-126">For more information, see [Azure SDK 2.6 for Visual Studio](https://azure.microsoft.com/blog/2015/04/29/announcing-the-azure-sdk-2-6-for-net/).</span></span>

### <a name="azure-powershell-080-or-later"></a><span data-ttu-id="bba69-127">Azure PowerShell 0.8.0 eller senare</span><span class="sxs-lookup"><span data-stu-id="bba69-127">Azure PowerShell 0.8.0 or later</span></span>
<span data-ttu-id="bba69-128">Från och med version 0.8.0 innehåller hello Azure PowerShell-installationen hello Azure Resource Manager-modulen lägga toohello Azure-modulen.</span><span class="sxs-lookup"><span data-stu-id="bba69-128">Beginning in version 0.8.0, hello Azure PowerShell installation includes hello Azure Resource Manager module in addition toohello Azure module.</span></span> <span data-ttu-id="bba69-129">Den här nya modulen kan du tooscript hello distributionen av resursgrupper.</span><span class="sxs-lookup"><span data-stu-id="bba69-129">This new module enables you tooscript hello deployment of resource groups.</span></span>

<span data-ttu-id="bba69-130">Mer information finns i [med hjälp av Azure PowerShell med Azure Resource Manager](../powershell-azure-resource-manager.md)</span><span class="sxs-lookup"><span data-stu-id="bba69-130">For more information, see [Using Azure PowerShell with Azure Resource Manager](../powershell-azure-resource-manager.md)</span></span>

### <a name="azure-resource-explorer"></a><span data-ttu-id="bba69-131">Azure Resource Explorer</span><span class="sxs-lookup"><span data-stu-id="bba69-131">Azure Resource Explorer</span></span>
<span data-ttu-id="bba69-132">Detta [preview verktyget](https://resources.azure.com) kan du tooexplore hello JSON definitioner av alla hello resursgrupper i din prenumeration och hello enskilda resurser.</span><span class="sxs-lookup"><span data-stu-id="bba69-132">This [preview tool](https://resources.azure.com) enables you tooexplore hello JSON definitions of all hello resource groups in your subscription and hello individual resources.</span></span> <span data-ttu-id="bba69-133">Du kan redigera hello JSON definitioner av en resurs, ta bort en hel hierarki av resurser och skapa nya resurser i hello-verktyget.</span><span class="sxs-lookup"><span data-stu-id="bba69-133">In hello tool, you can edit hello JSON definitions of a resource, delete an entire hierarchy of resources, and create new resources.</span></span>  <span data-ttu-id="bba69-134">hello information tillgänglig i det här verktyget är mycket användbart vid redigering av mallen eftersom den visar vilka egenskaper som du behöver tooset för en viss typ av resurs, hello korrigera värden, osv. Du kan även skapa resursgruppen i hello [Azure Portal](https://portal.azure.com/), granska definitionerna JSON i hello explorer verktyget toohelp du templatize hello resursgruppen.</span><span class="sxs-lookup"><span data-stu-id="bba69-134">hello information readily available in this tool is very helpful for template authoring because it shows you what properties you need tooset for a particular type of resource, hello correct values, etc. You can even create your resource group in hello [Azure Portal](https://portal.azure.com/), then inspect its JSON definitions in hello explorer tool toohelp you templatize hello resource group.</span></span>

### <a name="deploy-tooazure-button"></a><span data-ttu-id="bba69-135">TooAzure knappen distribuera</span><span class="sxs-lookup"><span data-stu-id="bba69-135">Deploy tooAzure button</span></span>
<span data-ttu-id="bba69-136">Om du använder GitHub för källkontroll kan du placera en [distribuera tooAzure knappen](https://azure.microsoft.com/blog/2014/11/13/deploy-to-azure-button-for-azure-websites-2/) i din viktigt. MD, vilket gör att en nyckelfärdig distribution UI tooAzure.</span><span class="sxs-lookup"><span data-stu-id="bba69-136">If you use GitHub for source control, you can put a [Deploy tooAzure button](https://azure.microsoft.com/blog/2014/11/13/deploy-to-azure-button-for-azure-websites-2/) into your README.MD, which enables a turn-key deployment UI tooAzure.</span></span> <span data-ttu-id="bba69-137">Medan du kan göra detta för ett enkelt webbprogram, kan du utöka den här tooenable distribuera en hela resursgruppen genom att placera en fil azuredeploy.json i hello Lagringsplatsens rot.</span><span class="sxs-lookup"><span data-stu-id="bba69-137">While you can do this for any simple web app, you can extend this tooenable deploying an entire resource group by putting an azuredeploy.json file in hello repository root.</span></span> <span data-ttu-id="bba69-138">Den här JSON-fil som innehåller hello resource group mallen ska användas av hello distribuera tooAzure knappen toocreate hello resursgruppen.</span><span class="sxs-lookup"><span data-stu-id="bba69-138">This JSON file, which contains hello resource group template, will be used by hello Deploy tooAzure button toocreate hello resource group.</span></span> <span data-ttu-id="bba69-139">Ett exempel finns hello [ToDoApp](https://github.com/azure-appservice-samples/ToDoApp) exempel som ska användas i den här kursen.</span><span class="sxs-lookup"><span data-stu-id="bba69-139">For an example, see hello [ToDoApp](https://github.com/azure-appservice-samples/ToDoApp) sample, which you will use in this tutorial.</span></span>

## <a name="get-hello-sample-resource-group-template"></a><span data-ttu-id="bba69-140">Hämta hello exempelmall resurs grupp</span><span class="sxs-lookup"><span data-stu-id="bba69-140">Get hello sample resource group template</span></span>
<span data-ttu-id="bba69-141">Nu ska vi gå rätt tooit.</span><span class="sxs-lookup"><span data-stu-id="bba69-141">So now let’s get right tooit.</span></span>

1. <span data-ttu-id="bba69-142">Navigera toohello [ToDoApp](https://github.com/azure-appservice-samples/ToDoApp) Apptjänst exempel.</span><span class="sxs-lookup"><span data-stu-id="bba69-142">Navigate toohello [ToDoApp](https://github.com/azure-appservice-samples/ToDoApp) App Service sample.</span></span>
2. <span data-ttu-id="bba69-143">Klicka på readme.md, **distribuera tooAzure**.</span><span class="sxs-lookup"><span data-stu-id="bba69-143">In readme.md, click **Deploy tooAzure**.</span></span>
3. <span data-ttu-id="bba69-144">Du har vidtagit toohello [distribuera till azure](https://deploy.azure.com) plats och vanliga tooinput distribution parametrar.</span><span class="sxs-lookup"><span data-stu-id="bba69-144">You’re taken toohello [deploy-to-azure](https://deploy.azure.com) site and asked tooinput deployment parameters.</span></span> <span data-ttu-id="bba69-145">Observera att de flesta av hello fält fylls med hello databasnamn och vissa slumpmässiga strängar för dig.</span><span class="sxs-lookup"><span data-stu-id="bba69-145">Notice that most of hello fields are populated with hello repository name and some random strings for you.</span></span> <span data-ttu-id="bba69-146">Du kan ändra alla hello fält om du vill, men endast hello saker som du har tooenter administrativa hello SQL Server-inloggning och hello lösenord och klicka sedan på **nästa**.</span><span class="sxs-lookup"><span data-stu-id="bba69-146">You can change all hello fields if you want, but hello only things you have tooenter are hello SQL Server administrative login and hello password, then click **Next**.</span></span>
   
   ![](./media/app-service-deploy-complex-application-predictably/gettemplate-1-deploybuttonui.png)
4. <span data-ttu-id="bba69-147">Klicka sedan på **distribuera** toostart hello distributionsprocessen.</span><span class="sxs-lookup"><span data-stu-id="bba69-147">Next, click **Deploy** toostart hello deployment process.</span></span> <span data-ttu-id="bba69-148">När hello processen körs toocompletion, klickar du på hello http://todoapp*XXXX*. azurewebsites.net länk toobrowse hello distribuerat program.</span><span class="sxs-lookup"><span data-stu-id="bba69-148">Once hello process runs toocompletion, click hello http://todoapp*XXXX*.azurewebsites.net link toobrowse hello deployed application.</span></span> 
   
   ![](./media/app-service-deploy-complex-application-predictably/gettemplate-2-deployprogress.png)
   
   <span data-ttu-id="bba69-149">hello Användargränssnittet är lite långsamt när du bläddrar först tooit eftersom hello appar bara startar, men övertyga dig om att det är ett fullt fungerande program.</span><span class="sxs-lookup"><span data-stu-id="bba69-149">hello UI would be a little slow when you first browse tooit because hello apps are just starting up, but convince yourself that it’s a fully-functional application.</span></span>
5. <span data-ttu-id="bba69-150">Tillbaka på hello distribuera klickar du på hello **hantera** länka toosee hello nytt program i hello Azure-portalen.</span><span class="sxs-lookup"><span data-stu-id="bba69-150">Back in hello Deploy page, click hello **Manage** link toosee hello new application in hello Azure Portal.</span></span>
6. <span data-ttu-id="bba69-151">I hello **Essentials** listrutan, klickar du på hello resurslänken grupp.</span><span class="sxs-lookup"><span data-stu-id="bba69-151">In hello **Essentials** dropdown, click hello resource group link.</span></span> <span data-ttu-id="bba69-152">Observera också att hello webbprogrammet är redan ansluten toohello GitHub-lagringsplatsen under **externt projekt**.</span><span class="sxs-lookup"><span data-stu-id="bba69-152">Note also that hello web app is already connected toohello GitHub repository under **External Project**.</span></span> 
   
   ![](./media/app-service-deploy-complex-application-predictably/gettemplate-3-portalresourcegroup.png)
7. <span data-ttu-id="bba69-153">Observera att det finns redan två webbprogram och en SQL-databasen i resursgruppen hello i hello resursgruppsbladet.</span><span class="sxs-lookup"><span data-stu-id="bba69-153">In hello resource group blade, note that there are already two web apps and one SQL Database in hello resource group.</span></span>
   
   ![](./media/app-service-deploy-complex-application-predictably/gettemplate-4-portalresourcegroupclicked.png)

<span data-ttu-id="bba69-154">Allt som du just har sett i en kort stund ett fullständigt distribuerad två mikrotjänster program med alla hello komponenter, beroenden, inställningar, databas och kontinuerlig publicering ställs in med en automatisk orchestration i Azure Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="bba69-154">Everything that you just saw in a few short minutes is a fully deployed two-microservice application, with all hello components, dependencies, settings, database, and continuous publishing, set up by an automated orchestration in Azure Resource Manager.</span></span> <span data-ttu-id="bba69-155">Detta görs genom att två saker:</span><span class="sxs-lookup"><span data-stu-id="bba69-155">All this was done by two things:</span></span>

* <span data-ttu-id="bba69-156">hello distribuera tooAzure knappen</span><span class="sxs-lookup"><span data-stu-id="bba69-156">hello Deploy tooAzure button</span></span>
* <span data-ttu-id="bba69-157">azuredeploy.JSON i hello lagringsplatsen rot</span><span class="sxs-lookup"><span data-stu-id="bba69-157">azuredeploy.json in hello repo root</span></span>

<span data-ttu-id="bba69-158">Du kan distribuera den här samma program flera, hundratals eller tusentals gånger och har hello exakt samma konfiguration varje gång.</span><span class="sxs-lookup"><span data-stu-id="bba69-158">You can deploy this same application tens, hundreds, or thousands of times and have hello exact same configuration every time.</span></span> <span data-ttu-id="bba69-159">hello repeterbarhet och hello förutsägbarheten för den här metoden kan du toodeploy hög skala program med enkel och förtroende.</span><span class="sxs-lookup"><span data-stu-id="bba69-159">hello repeatability and hello predictability of this approach enables you toodeploy high-scale applications with ease and confidence.</span></span>

## <a name="examine-or-edit-azuredeployjson"></a><span data-ttu-id="bba69-160">Granska (eller redigera) AZUREDEPLOY. JSON</span><span class="sxs-lookup"><span data-stu-id="bba69-160">Examine (or edit) AZUREDEPLOY.JSON</span></span>
<span data-ttu-id="bba69-161">Nu ska vi titta på hur hello GitHub-lagringsplatsen har ställts in.</span><span class="sxs-lookup"><span data-stu-id="bba69-161">Now let’s look at how hello GitHub repository was set up.</span></span> <span data-ttu-id="bba69-162">Du kommer att använda hello JSON-redigerare i hello Azure .NET SDK, så om du inte redan har installerat [Azure .NET SDK 2.6](/downloads/), göra det nu.</span><span class="sxs-lookup"><span data-stu-id="bba69-162">You will be using hello JSON editor in hello Azure .NET SDK, so if you haven’t already installed [Azure .NET SDK 2.6](/downloads/), do it now.</span></span>

1. <span data-ttu-id="bba69-163">Klona hello [ToDoApp](https://github.com/azure-appservice-samples/ToDoApp) databas med hjälp av din favorit git-verktyget.</span><span class="sxs-lookup"><span data-stu-id="bba69-163">Clone hello [ToDoApp](https://github.com/azure-appservice-samples/ToDoApp) repository using your favorite git tool.</span></span> <span data-ttu-id="bba69-164">I hello skärmbilden nedan göra jag detta i hello Team Explorer i Visual Studio 2013.</span><span class="sxs-lookup"><span data-stu-id="bba69-164">In hello screenshot below, I’m doing this in hello Team Explorer in Visual Studio 2013.</span></span>
   
   ![](./media/app-service-deploy-complex-application-predictably/examinejson-1-vsclone.png)
2. <span data-ttu-id="bba69-165">Öppna azuredeploy.json i Visual Studio hello Lagringsplatsens rot.</span><span class="sxs-lookup"><span data-stu-id="bba69-165">From hello repository root, open azuredeploy.json in Visual Studio.</span></span> <span data-ttu-id="bba69-166">Om du inte ser hello JSON-disposition fönstret måste tooinstall Azure .NET SDK.</span><span class="sxs-lookup"><span data-stu-id="bba69-166">If you don’t see hello JSON Outline pane, you need tooinstall Azure .NET SDK.</span></span>
   
   ![](./media/app-service-deploy-complex-application-predictably/examinejson-2-vsjsoneditor.png)

<span data-ttu-id="bba69-167">Jag vill inte pågående toodescribe av hello JSON-format, men hello [mer resurser](#resources) avsnitt finns länkar för hello resurs grupp mallspråk.</span><span class="sxs-lookup"><span data-stu-id="bba69-167">I’m not going toodescribe every detail of hello JSON format, but hello [More Resources](#resources) section has links for learning hello resource group template language.</span></span> <span data-ttu-id="bba69-168">Här kan bara vi tooshow du hello intressanta funktioner som kan hjälpa dig att komma igång med att göra en egen anpassad mall för distribution av appen.</span><span class="sxs-lookup"><span data-stu-id="bba69-168">Here, I’m just going tooshow you hello interesting features that can help you get started in making your own custom template for app deployment.</span></span>

### <a name="parameters"></a><span data-ttu-id="bba69-169">Parametrar</span><span class="sxs-lookup"><span data-stu-id="bba69-169">Parameters</span></span>
<span data-ttu-id="bba69-170">Ta en titt på hello parametrar avsnittet toosee att de flesta av dessa parametrar är vilka hello **distribuera tooAzure** efterfrågar tooinput knappen.</span><span class="sxs-lookup"><span data-stu-id="bba69-170">Take a look at hello parameters section toosee that most of these parameters are what hello **Deploy tooAzure** button prompts you tooinput.</span></span> <span data-ttu-id="bba69-171">hello plats bakom hello **distribuera tooAzure** knappen fyller hello indata användargränssnitt med hello parametrar som definierats i azuredeploy.json.</span><span class="sxs-lookup"><span data-stu-id="bba69-171">hello site behind hello **Deploy tooAzure** button populates hello input UI using hello parameters defined in azuredeploy.json.</span></span> <span data-ttu-id="bba69-172">Dessa parametrar används i hela hello resursdefinitionerna resursnamn, egenskapsvärden, t.ex.</span><span class="sxs-lookup"><span data-stu-id="bba69-172">These parameters are used throughout hello resource definitions, such as resource names, property values, etc.</span></span>

### <a name="resources"></a><span data-ttu-id="bba69-173">Resurser</span><span class="sxs-lookup"><span data-stu-id="bba69-173">Resources</span></span>
<span data-ttu-id="bba69-174">Du kan se att 4 översta resurser definieras, inklusive en SQL Server-instans, en apptjänstplan och två webbprogram i hello resurser noden.</span><span class="sxs-lookup"><span data-stu-id="bba69-174">In hello resources node, you can see that 4 top-level resources are defined, including a SQL Server instance, an App Service plan, and two web apps.</span></span> 

#### <a name="app-service-plan"></a><span data-ttu-id="bba69-175">App Service-plan</span><span class="sxs-lookup"><span data-stu-id="bba69-175">App Service plan</span></span>
<span data-ttu-id="bba69-176">Låt oss börja med en enkel rotnivå resurs i hello JSON.</span><span class="sxs-lookup"><span data-stu-id="bba69-176">Let’s start with a simple root-level resource in hello JSON.</span></span> <span data-ttu-id="bba69-177">I hello JSON-disposition, klickar du på hello App Service-plan med namnet **[hostingPlanName]** toohighlight hello motsvarande JSON-kod.</span><span class="sxs-lookup"><span data-stu-id="bba69-177">In hello JSON Outline, click hello App Service plan named **[hostingPlanName]** toohighlight hello corresponding JSON code.</span></span> 

![](./media/app-service-deploy-complex-application-predictably/examinejson-3-appserviceplan.png)

<span data-ttu-id="bba69-178">Observera att hello `type` elementet anger hello sträng för en App Service-plan (den anropades en servergrupp med en lång, lång tid sedan) och andra element och egenskaper fylls i med hjälp av hello parametrar som definierats i hello JSON-fil och har inte den här resursen alla kapslade resurser.</span><span class="sxs-lookup"><span data-stu-id="bba69-178">Note that hello `type` element specifies hello string for an App Service plan (it was called a server farm a long, long time ago), and other elements and properties are filled in using hello parameters defined in hello JSON file, and this resource doesn’t have any nested resources.</span></span>

> [!NOTE]
> <span data-ttu-id="bba69-179">Observera också att hello-värdet för `apiVersion` anger vilken version av hello REST API toouse hello JSON resursdefinitionen med, och det kan påverka hur hello resursen ska formateras i hello Azure `{}`.</span><span class="sxs-lookup"><span data-stu-id="bba69-179">Note also that hello value of `apiVersion` tells Azure which version of hello REST API toouse hello JSON resource definition with, and it can affect how hello resource should be formatted inside hello `{}`.</span></span> 
> 
> 

#### <a name="sql-server"></a><span data-ttu-id="bba69-180">SQL Server</span><span class="sxs-lookup"><span data-stu-id="bba69-180">SQL Server</span></span>
<span data-ttu-id="bba69-181">Klicka på hello SQL Server-resurs med namnet **SQLServer** i hello JSON-disposition.</span><span class="sxs-lookup"><span data-stu-id="bba69-181">Next, click on hello SQL Server resource named **SQLServer** in hello JSON Outline.</span></span>

![](./media/app-service-deploy-complex-application-predictably/examinejson-4-sqlserver.png)

<span data-ttu-id="bba69-182">Obs hello följande om hello markerat JSON-kod:</span><span class="sxs-lookup"><span data-stu-id="bba69-182">Note hello following about hello highlighted JSON code:</span></span>

* <span data-ttu-id="bba69-183">hello användning av parametrar säkerställer att hello skapade resurser är namnet och konfigurerats på ett sätt som gör dem överensstämmer med varandra.</span><span class="sxs-lookup"><span data-stu-id="bba69-183">hello use of parameters ensures that hello created resources are named and configured in a way that makes them consistent with one another.</span></span>
* <span data-ttu-id="bba69-184">hello SQLServer resurs har två kapslade resurser, var och en har ett annat värde för `type`.</span><span class="sxs-lookup"><span data-stu-id="bba69-184">hello SQLServer resource has two nested resources, each has a different value for `type`.</span></span>
* <span data-ttu-id="bba69-185">hello kapslade resurser inuti `“resources”: […]`, där hello databasen och hello brandväggsregler definieras, har en `dependsOn` element som anger hello resurs-ID för hello rotnivå SQLServer resurs.</span><span class="sxs-lookup"><span data-stu-id="bba69-185">hello nested resources inside `“resources”: […]`, where hello database and hello firewall rules are defined, have a `dependsOn` element that specifies hello resource ID of hello root-level SQLServer resource.</span></span> <span data-ttu-id="bba69-186">Detta talar om Azure Resource Manager ”innan du skapar den här resursen som andra resurser måste redan finnas; och om den andra resursen har definierats i mallen för hello sedan skapa den första ”.</span><span class="sxs-lookup"><span data-stu-id="bba69-186">This tells Azure Resource Manager, “before you create this resource, that other resource must already exist; and if that other resource is defined in hello template, then create that one first”.</span></span>
  
  > [!NOTE]
  > <span data-ttu-id="bba69-187">Detaljerad information om hur toouse hello `resourceId()` finns [Azure Resource Manager mallen Functions](../azure-resource-manager/resource-group-template-functions-resource.md#resourceid).</span><span class="sxs-lookup"><span data-stu-id="bba69-187">For detailed information on how toouse hello `resourceId()` function, see [Azure Resource Manager Template Functions](../azure-resource-manager/resource-group-template-functions-resource.md#resourceid).</span></span>
  > 
  > 
* <span data-ttu-id="bba69-188">Hej effekten av hello `dependsOn` elementet är att Azure Resource Manager vet vilka resurser kan skapas parallellt och vilka resurser måste vara sekventiellt.</span><span class="sxs-lookup"><span data-stu-id="bba69-188">hello effect of hello `dependsOn` element is that Azure Resource Manager can know which resources can be created in parallel and which resources must be created sequentially.</span></span> 

#### <a name="web-app"></a><span data-ttu-id="bba69-189">Webbapp</span><span class="sxs-lookup"><span data-stu-id="bba69-189">Web app</span></span>
<span data-ttu-id="bba69-190">Nu ska vi gå vidare toohello faktiska webbprogram själva, vilket är mer komplicerad.</span><span class="sxs-lookup"><span data-stu-id="bba69-190">Now, let’s move on toohello actual web apps themselves, which are more complicated.</span></span> <span data-ttu-id="bba69-191">Klicka på hello [variables('apiSiteName')] webbapp i hello JSON-disposition toohighlight dess JSON-kod.</span><span class="sxs-lookup"><span data-stu-id="bba69-191">Click hello [variables(‘apiSiteName’)] web app in hello JSON Outline toohighlight its JSON code.</span></span> <span data-ttu-id="bba69-192">Lägg märke till att saker får mycket mer intressant.</span><span class="sxs-lookup"><span data-stu-id="bba69-192">You’ll notice that things are getting much more interesting.</span></span> <span data-ttu-id="bba69-193">För detta ändamål ska jag berätta om hello funktioner i taget:</span><span class="sxs-lookup"><span data-stu-id="bba69-193">For this purpose, I’ll talk about hello features one by one:</span></span>

##### <a name="root-resource"></a><span data-ttu-id="bba69-194">Rot-resurs</span><span class="sxs-lookup"><span data-stu-id="bba69-194">Root resource</span></span>
<span data-ttu-id="bba69-195">hello webbprogrammet beror på två olika resurser.</span><span class="sxs-lookup"><span data-stu-id="bba69-195">hello web app depends on two different resources.</span></span> <span data-ttu-id="bba69-196">Det innebär att Azure Resource Manager skapar hello webbprogrammet förrän båda hello App Service-plan och hello SQL Server-instans skapas.</span><span class="sxs-lookup"><span data-stu-id="bba69-196">This means that Azure Resource Manager will create hello web app only after both hello App Service plan and hello SQL Server instance are created.</span></span>

![](./media/app-service-deploy-complex-application-predictably/examinejson-5-webapproot.png)

##### <a name="app-settings"></a><span data-ttu-id="bba69-197">App-inställningar</span><span class="sxs-lookup"><span data-stu-id="bba69-197">App settings</span></span>
<span data-ttu-id="bba69-198">hello app-inställningar också definieras som en kapslad resurs.</span><span class="sxs-lookup"><span data-stu-id="bba69-198">hello app settings are also defined as a nested resource.</span></span>

![](./media/app-service-deploy-complex-application-predictably/examinejson-6-webappsettings.png)

<span data-ttu-id="bba69-199">I hello `properties` element för `config/appsettings`, du har två appinställningar hello format `“<name>” : “<value>”`.</span><span class="sxs-lookup"><span data-stu-id="bba69-199">In hello `properties` element for `config/appsettings`, you have two app settings in hello format `“<name>” : “<value>”`.</span></span>

* <span data-ttu-id="bba69-200">`PROJECT`är en [KUDU inställningen](https://github.com/projectkudu/kudu/wiki/Customizing-deployments) som talar om Azure-distribution som projektet toouse i en Visual Studio-lösning med flera projekt.</span><span class="sxs-lookup"><span data-stu-id="bba69-200">`PROJECT` is a [KUDU setting](https://github.com/projectkudu/kudu/wiki/Customizing-deployments) that tells Azure deployment which project toouse in a multi-project Visual Studio solution.</span></span> <span data-ttu-id="bba69-201">Jag får du lära dig hur källkontrollen har konfigurerats, men eftersom hello ToDoApp kod i ett Visual Studio-lösning med flera projekt kan vi behöver den här inställningen.</span><span class="sxs-lookup"><span data-stu-id="bba69-201">I will show you later how source control is configured, but since hello ToDoApp code is in a multi-project Visual Studio solution, we need this setting.</span></span>
* <span data-ttu-id="bba69-202">`clientUrl`är helt enkelt en app som anger att hello programkod använder.</span><span class="sxs-lookup"><span data-stu-id="bba69-202">`clientUrl` is simply an app setting that hello application code uses.</span></span>

##### <a name="connection-strings"></a><span data-ttu-id="bba69-203">Anslutningssträngar</span><span class="sxs-lookup"><span data-stu-id="bba69-203">Connection strings</span></span>
<span data-ttu-id="bba69-204">hello anslutningssträngar också definieras som en kapslad resurs.</span><span class="sxs-lookup"><span data-stu-id="bba69-204">hello connection strings are also defined as a nested resource.</span></span>

![](./media/app-service-deploy-complex-application-predictably/examinejson-7-webappconnstr.png)

<span data-ttu-id="bba69-205">I hello `properties` element för `config/connectionstrings`, varje anslutningssträngen har definierats som ett namn: värde-par med hello specifika format för `“<name>” : {“value”: “…”, “type”: “…”}`.</span><span class="sxs-lookup"><span data-stu-id="bba69-205">In hello `properties` element for `config/connectionstrings`, each connection string is also defined as a name:value pair, with hello specific format of `“<name>” : {“value”: “…”, “type”: “…”}`.</span></span> <span data-ttu-id="bba69-206">För hello `type` elementet möjliga värden är `MySql`, `SQLServer`, `SQLAzure`, och `Custom`.</span><span class="sxs-lookup"><span data-stu-id="bba69-206">For hello `type` element, possible values are `MySql`, `SQLServer`, `SQLAzure`, and `Custom`.</span></span>

> [!TIP]
> <span data-ttu-id="bba69-207">För en fullständig förteckning över hello anslutningstyper sträng kör följande kommando i Azure PowerShell hello: \[Enum]::GetNames("Microsoft.WindowsAzure.Commands.Utilities.Websites.Services.WebEntities.DatabaseType")</span><span class="sxs-lookup"><span data-stu-id="bba69-207">For a definitive list of hello connection string types, run hello following command in Azure PowerShell: \[Enum]::GetNames("Microsoft.WindowsAzure.Commands.Utilities.Websites.Services.WebEntities.DatabaseType")</span></span>
> 
> 

##### <a name="source-control"></a><span data-ttu-id="bba69-208">Källkontrollen</span><span class="sxs-lookup"><span data-stu-id="bba69-208">Source control</span></span>
<span data-ttu-id="bba69-209">inställningar för hello källkontrollen också definieras som en kapslad resurs.</span><span class="sxs-lookup"><span data-stu-id="bba69-209">hello source control settings are also defined as a nested resource.</span></span> <span data-ttu-id="bba69-210">Azure Resource Manager använder den här tooconfigure kontinuerlig resurspublicering (se begränsning på `IsManualIntegration` senare) och även tookick av hello distribution av programkoden automatiskt under hello bearbetningen av hello JSON-fil.</span><span class="sxs-lookup"><span data-stu-id="bba69-210">Azure Resource Manager uses this resource tooconfigure continuous publishing (see caveat on `IsManualIntegration` later) and also tookick off hello deployment of application code automatically during hello processing of hello JSON file.</span></span>

![](./media/app-service-deploy-complex-application-predictably/examinejson-8-webappsourcecontrol.png)

<span data-ttu-id="bba69-211">`RepoUrl`och `branch` bör vara ganska intuitiva och ska peka toohello Git-lagringsplatsen och hello namnet på hello gren toopublish från.</span><span class="sxs-lookup"><span data-stu-id="bba69-211">`RepoUrl` and `branch` should be pretty intuitive and should point toohello Git repository and hello name of hello branch toopublish from.</span></span> <span data-ttu-id="bba69-212">Dessa definieras igen av indataparametrar.</span><span class="sxs-lookup"><span data-stu-id="bba69-212">Again, these are defined by input parameters.</span></span> 

<span data-ttu-id="bba69-213">Notera i hello `dependsOn` element som i tillägg toohello webbresursen app, `sourcecontrols/web` beror också på `config/appsettings` och `config/connectionstrings`.</span><span class="sxs-lookup"><span data-stu-id="bba69-213">Note in hello `dependsOn` element that, in addition toohello web app resource itself, `sourcecontrols/web` also depends on `config/appsettings` and `config/connectionstrings`.</span></span> <span data-ttu-id="bba69-214">Detta beror på att när `sourcecontrols/web` är konfigurerad, hello Azure distributionsprocessen försöker automatiskt toodeploy, skapa och starta hello programkod.</span><span class="sxs-lookup"><span data-stu-id="bba69-214">This is because once `sourcecontrols/web` is configured, hello Azure deployment process will automatically attempt toodeploy, build, and start hello application code.</span></span> <span data-ttu-id="bba69-215">Lägga till den här beroende kan du se till att måste programmet hello därför åtkomstinställningar toohello krävs app och anslutningssträngar innan hello programkoden körs.</span><span class="sxs-lookup"><span data-stu-id="bba69-215">Therefore, inserting this dependency helps you make sure that hello application has access toohello required app settings and connection strings before hello application code is run.</span></span> 

> [!NOTE]
> <span data-ttu-id="bba69-216">Observera också att `IsManualIntegration` har angetts för`true`.</span><span class="sxs-lookup"><span data-stu-id="bba69-216">Note also that `IsManualIntegration` is set too`true`.</span></span> <span data-ttu-id="bba69-217">Den här egenskapen är nödvändiga i den här självstudiekursen eftersom du inte verkligen äger hello GitHub-lagringsplatsen och därmed faktiskt går inte att bevilja behörighet tooAzure tooconfigure kontinuerlig publicering från [ToDoApp](https://github.com/azure-appservice-samples/ToDoApp) (d.v.s. push automatisk databas uppdateras tooAzure).</span><span class="sxs-lookup"><span data-stu-id="bba69-217">This property is necessary in this tutorial because you do not actually own hello GitHub repository, and thus cannot actually grant permission tooAzure tooconfigure continuous publishing from [ToDoApp](https://github.com/azure-appservice-samples/ToDoApp) (i.e. push automatic repository updates tooAzure).</span></span> <span data-ttu-id="bba69-218">Du kan använda standardvärdet för hello `false` för hello angivna lagringsplats endast om du har konfigurerat hello ägarens GitHub autentiseringsuppgifter i hello [Azure-portalen](https://portal.azure.com/) innan.</span><span class="sxs-lookup"><span data-stu-id="bba69-218">You can use hello default value `false` for hello specified repository only if you have configured hello owner’s GitHub credentials in hello [Azure portal](https://portal.azure.com/) before.</span></span> <span data-ttu-id="bba69-219">Med andra ord, om du har ställt in källa kontrollen tooGitHub eller BitBucket för en app i hello [Azure Portal](https://portal.azure.com/) tidigare med ditt användar-autentiseringsuppgifter, och sedan Azure kommer ihåg hello autentiseringsuppgifter och använda dem när du distribuerar en app från GitHub eller BitBucket i hello framtida.</span><span class="sxs-lookup"><span data-stu-id="bba69-219">In other words, if you have set up source control tooGitHub or BitBucket for any app in hello [Azure Portal](https://portal.azure.com/) previously, using your user credentials, then Azure will remember hello credentials and use them whenever you deploy any app from GitHub or BitBucket in hello future.</span></span> <span data-ttu-id="bba69-220">Men om du inte redan har gjort det, att distribution av hello JSON-mall misslyckas när Azure Resource Manager försöker tooconfigure hello webbprogram inställningar för källkontrollen eftersom den inte kan logga in GitHub eller BitBucket med hello databasens ägare autentiseringsuppgifter.</span><span class="sxs-lookup"><span data-stu-id="bba69-220">However, if you haven’t done this already, deployment of hello JSON template will fail when Azure Resource Manager tries tooconfigure hello web app’s source control settings because it cannot log into GitHub or BitBucket with hello repository owner’s credentials.</span></span>
> 
> 

## <a name="compare-hello-json-template-with-deployed-resource-group"></a><span data-ttu-id="bba69-221">Jämför hello JSON-mall med distribuerade resursgruppen.</span><span class="sxs-lookup"><span data-stu-id="bba69-221">Compare hello JSON template with deployed resource group</span></span>
<span data-ttu-id="bba69-222">Här kan du kan gå igenom alla hello webbprogram blad i hello [Azure Portal](https://portal.azure.com/), men det finns ett annat verktyg som inte är precis som användbart, om mer.</span><span class="sxs-lookup"><span data-stu-id="bba69-222">Here, you can go through all hello web app’s blades in hello [Azure Portal](https://portal.azure.com/), but there’s another tool that’s just as useful, if not more.</span></span> <span data-ttu-id="bba69-223">Gå toohello [resursutforskaren Azure](https://resources.azure.com) preview verktyg som ger dig en JSON-representation av alla hello resursgrupper i dina prenumerationer som de finns i hello Azure-serverdel.</span><span class="sxs-lookup"><span data-stu-id="bba69-223">Go toohello [Azure Resource Explorer](https://resources.azure.com) preview tool, which gives you a JSON representation of all hello resource groups in your subscriptions, as they actually exist in hello Azure backend.</span></span> <span data-ttu-id="bba69-224">Du kan också se hur hello resursgruppens JSON-hierarki i Azure motsvarar hello hierarki i hello mallfilen som har använt toocreate den.</span><span class="sxs-lookup"><span data-stu-id="bba69-224">You can also see how hello resource group’s JSON hierarchy in Azure corresponds with hello hierarchy in hello template file that’s used toocreate it.</span></span>

<span data-ttu-id="bba69-225">Till exempel när jag go toohello [resursutforskaren Azure](https://resources.azure.com) verktyg och expandera hello noder i hello explorer, syns hello resursgrupp och hello rotnivå resurser som samlas in under deras respektive resurstyper.</span><span class="sxs-lookup"><span data-stu-id="bba69-225">For example, when I go toohello [Azure Resource Explorer](https://resources.azure.com) tool and expand hello nodes in hello explorer, I can see hello resource group and hello root-level resources that are collected under their respective resource types.</span></span>

![](./media/app-service-deploy-complex-application-predictably/ARM-1-treeview.png)

<span data-ttu-id="bba69-226">Om du detaljnivån tooa webbprogrammet ska kunna toosee web app configuration information liknande toohello nedan skärmbild:</span><span class="sxs-lookup"><span data-stu-id="bba69-226">If you drill down tooa web app, you should be able toosee web app configuration details similar toohello below screenshot:</span></span>

![](./media/app-service-deploy-complex-application-predictably/ARM-2-jsonview.png)

<span data-ttu-id="bba69-227">Återigen hello kapslade resurser bör ha en mycket lik toothose hierarki i JSON-mallfilen och du bör se hello app-inställningar, anslutningssträngar m.m. avspeglas korrekt i hello JSON-fönstret.</span><span class="sxs-lookup"><span data-stu-id="bba69-227">Again, hello nested resources should have a hierarchy very similar toothose in your JSON template file, and you should see hello app settings, connection strings, etc., properly reflected in hello JSON pane.</span></span> <span data-ttu-id="bba69-228">hello avsaknaden av inställningar här kan tyda på ett problem med JSON-filen och kan hjälpa dig att felsöka en JSON-fil i mallen.</span><span class="sxs-lookup"><span data-stu-id="bba69-228">hello absence of settings here may indicate an issue with your JSON file and can help you troubleshoot your JSON template file.</span></span>

## <a name="deploy-hello-resource-group-template-yourself"></a><span data-ttu-id="bba69-229">Distribuera hello resurs grupp mallen själv</span><span class="sxs-lookup"><span data-stu-id="bba69-229">Deploy hello resource group template yourself</span></span>
<span data-ttu-id="bba69-230">Hej **distribuera tooAzure** knappen är bra, men det gör du toodeploy hello resource group mallen i azuredeploy.json endast om du redan har pushas azuredeploy.json tooGitHub.</span><span class="sxs-lookup"><span data-stu-id="bba69-230">hello **Deploy tooAzure** button is great, but it allows you toodeploy hello resource group template in azuredeploy.json only if you have already pushed azuredeploy.json tooGitHub.</span></span> <span data-ttu-id="bba69-231">hello Azure .NET SDK innehåller också hello verktyg för du toodeploy alla JSON-mallfil direkt från din lokala dator.</span><span class="sxs-lookup"><span data-stu-id="bba69-231">hello Azure .NET SDK also provides hello tools for you toodeploy any JSON template file directly from your local machine.</span></span> <span data-ttu-id="bba69-232">toodo detta, följ hello stegen nedan:</span><span class="sxs-lookup"><span data-stu-id="bba69-232">toodo this, follow hello steps below:</span></span>

1. <span data-ttu-id="bba69-233">I Visual Studio klickar du på **filen** > **ny** > **projekt**.</span><span class="sxs-lookup"><span data-stu-id="bba69-233">In Visual Studio, click **File** > **New** > **Project**.</span></span>
2. <span data-ttu-id="bba69-234">Klicka på **Visual C#** > **moln** > **Azure-resursgrupp**, klicka på **OK**.</span><span class="sxs-lookup"><span data-stu-id="bba69-234">Click **Visual C#** > **Cloud** > **Azure Resource Group**, then click **OK**.</span></span>
   
   ![](./media/app-service-deploy-complex-application-predictably/deploy-1-vsproject.png)
3. <span data-ttu-id="bba69-235">I **Välj Azure-mall**väljer **tom mall** och på **OK**.</span><span class="sxs-lookup"><span data-stu-id="bba69-235">In **Select Azure Template**, select **Blank Template** and click **OK**.</span></span>
4. <span data-ttu-id="bba69-236">Dra azuredeploy.json till hello **mallen** mapp med det nya projektet.</span><span class="sxs-lookup"><span data-stu-id="bba69-236">Drag azuredeploy.json into hello **Template** folder of your new project.</span></span>
   
   ![](./media/app-service-deploy-complex-application-predictably/deploy-2-copyjson.png)
5. <span data-ttu-id="bba69-237">Öppna hello kopieras azuredeploy.json i Solution Explorer.</span><span class="sxs-lookup"><span data-stu-id="bba69-237">From Solution Explorer, open hello copied azuredeploy.json.</span></span>
6. <span data-ttu-id="bba69-238">För hello dig ut av hello demonstrationen ska vi lägga till vissa standard Application Insights resurser tooour JSON-fil, genom att klicka på **Lägg till resurs**.</span><span class="sxs-lookup"><span data-stu-id="bba69-238">Just for hello sake of hello demonstration, let’s add some standard Application Insight resources tooour JSON file, by clicking **Add Resource**.</span></span> <span data-ttu-id="bba69-239">Om du är intresserad av distribuera hello JSON-fil kan du hoppa över toohello distribuera steg.</span><span class="sxs-lookup"><span data-stu-id="bba69-239">If you’re just interested in deploying hello JSON file, skip toohello deploy steps.</span></span>
   
   ![](./media/app-service-deploy-complex-application-predictably/deploy-3-newresource.png)
7. <span data-ttu-id="bba69-240">Välj **Programinsikter för Web Apps**, kontrollera att en befintlig App Service-plan och webb-app är markerad och klicka sedan på **Lägg till**.</span><span class="sxs-lookup"><span data-stu-id="bba69-240">Select **Application Insights for Web Apps**, then make sure an existing App Service plan and web app is selected, and then click **Add**.</span></span>
   
   ![](./media/app-service-deploy-complex-application-predictably/deploy-4-newappinsight.png)
   
   <span data-ttu-id="bba69-241">Du kommer nu att kan toosee flera nya resurser, beroende på hello resurs så att den inte kan ha beroenden i antingen hello App Service-plan eller hello webbprogrammet.</span><span class="sxs-lookup"><span data-stu-id="bba69-241">You’ll now be able toosee several new resources that, depending on hello resource and what it does, have dependencies on either hello App Service plan or hello web app.</span></span> <span data-ttu-id="bba69-242">Dessa resurser är inte aktiverade som deras befintliga definitionen och du kommer toochange som.</span><span class="sxs-lookup"><span data-stu-id="bba69-242">These resources are not enabled by their existing definition and you’re going toochange that.</span></span>
   
   ![](./media/app-service-deploy-complex-application-predictably/deploy-5-appinsightresources.png)
8. <span data-ttu-id="bba69-243">Klicka på hello JSON-disposition, **appInsights Autoskala** toohighlight dess JSON-kod.</span><span class="sxs-lookup"><span data-stu-id="bba69-243">In hello JSON Outline, click **appInsights AutoScale** toohighlight its JSON code.</span></span> <span data-ttu-id="bba69-244">Detta är hello skalning inställning för din programtjänstplan.</span><span class="sxs-lookup"><span data-stu-id="bba69-244">This is hello scaling setting for your App Service plan.</span></span>
9. <span data-ttu-id="bba69-245">I hello markerade JSON-kod, leta upp hello `location` och `enabled` egenskaper och ange dem som visas nedan.</span><span class="sxs-lookup"><span data-stu-id="bba69-245">In hello highlighted JSON code, locate hello `location` and `enabled` properties and set them as shown below.</span></span>
   
   ![](./media/app-service-deploy-complex-application-predictably/deploy-6-autoscalesettings.png)
10. <span data-ttu-id="bba69-246">Klicka på hello JSON-disposition, **CPUHigh appInsights** toohighlight dess JSON-kod.</span><span class="sxs-lookup"><span data-stu-id="bba69-246">In hello JSON Outline, click **CPUHigh appInsights** toohighlight its JSON code.</span></span> <span data-ttu-id="bba69-247">Detta är en varning.</span><span class="sxs-lookup"><span data-stu-id="bba69-247">This is an alert.</span></span>
11. <span data-ttu-id="bba69-248">Leta upp hello `location` och `isEnabled` egenskaper och ange dem som visas nedan.</span><span class="sxs-lookup"><span data-stu-id="bba69-248">Locate hello `location` and `isEnabled` properties and set them as shown below.</span></span> <span data-ttu-id="bba69-249">Hello samma för hello andra tre aviseringar (lila lökar).</span><span class="sxs-lookup"><span data-stu-id="bba69-249">Do hello same for hello other three alerts (purple bulbs).</span></span>
    
    ![](./media/app-service-deploy-complex-application-predictably/deploy-7-alerts.png)
12. <span data-ttu-id="bba69-250">Nu är du redo toodeploy.</span><span class="sxs-lookup"><span data-stu-id="bba69-250">You’re now ready toodeploy.</span></span> <span data-ttu-id="bba69-251">Högerklicka på hello-projektet och välj **distribuera** > **ny distribution**.</span><span class="sxs-lookup"><span data-stu-id="bba69-251">Right-click hello project and select **Deploy** > **New Deployment**.</span></span>
    
    ![](./media/app-service-deploy-complex-application-predictably/deploy-8-newdeployment.png)
13. <span data-ttu-id="bba69-252">Logga in på ditt Azure-konto om du inte redan gjort det..</span><span class="sxs-lookup"><span data-stu-id="bba69-252">Log into your Azure account if you haven’t already done so.</span></span>
14. <span data-ttu-id="bba69-253">Välj en befintlig resursgrupp i din prenumeration eller skapa ett nytt en, Välj **azuredeploy.json**, och klicka sedan på **redigera parametrar**.</span><span class="sxs-lookup"><span data-stu-id="bba69-253">Select an existing resource group in your subscription or create a new one, select **azuredeploy.json**, and then click **Edit Parameters**.</span></span>
    
    ![](./media/app-service-deploy-complex-application-predictably/deploy-9-deployconfig.png)
    
    <span data-ttu-id="bba69-254">Du kommer nu att kan tooedit alla hello parametrar som definierats i hello mallfilen i en bra tabell.</span><span class="sxs-lookup"><span data-stu-id="bba69-254">You’ll now be able tooedit all hello parameters defined in hello template file in a nice table.</span></span> <span data-ttu-id="bba69-255">Parametrar som definierar standardvärden har redan sina standardvärden och parametrar som definierar en lista över tillåtna värden som ska visas som nedrullningsbara listorna.</span><span class="sxs-lookup"><span data-stu-id="bba69-255">Parameters that define defaults will already have their default values, and parameters that define a list of allowed values will be shown as dropdowns.</span></span>
    
    ![](./media/app-service-deploy-complex-application-predictably/deploy-10-parametereditor.png)
15. <span data-ttu-id="bba69-256">Fyll i alla hello tom parametrar och använda hello [GitHub-repo-adress för ToDoApp](https://github.com/azure-appservice-samples/ToDoApp.git) i **repoUrl**.</span><span class="sxs-lookup"><span data-stu-id="bba69-256">Fill in all hello empty parameters, and use hello [GitHub repo address for ToDoApp](https://github.com/azure-appservice-samples/ToDoApp.git) in **repoUrl**.</span></span> <span data-ttu-id="bba69-257">Klicka på **spara**.</span><span class="sxs-lookup"><span data-stu-id="bba69-257">Then, click **Save**.</span></span>
    
    ![](./media/app-service-deploy-complex-application-predictably/deploy-11-parametereditorfilled.png)
    
    > [!NOTE]
    > <span data-ttu-id="bba69-258">Autoskalning är en funktion som erbjuds i **Standard** nivå eller högre och planera nivå aviseringar finns funktioner som erbjuds i **grundläggande** tjänstnivån eller högre, behöver du tooset hello **sku** Parametern för**Standard** eller **Premium** ordning toosee alla din nya App Insights-resurser lysa.</span><span class="sxs-lookup"><span data-stu-id="bba69-258">Autoscaling is a feature offered in **Standard** tier or higher, and plan-level alerts are features offered in **Basic** tier or higher, you’ll need tooset hello **sku** parameter too**Standard** or **Premium** in order toosee all your new App Insights resources light up.</span></span>
    > 
    > 
16. <span data-ttu-id="bba69-259">Klicka på **distribuera**.</span><span class="sxs-lookup"><span data-stu-id="bba69-259">Click **Deploy**.</span></span> <span data-ttu-id="bba69-260">Om du har valt **spara lösenord**, hello lösenordet sparas i parameterfilen hello **i klartext**.</span><span class="sxs-lookup"><span data-stu-id="bba69-260">If you selected **Save passwords**, hello password will be saved in hello parameter file **in plain text**.</span></span> <span data-ttu-id="bba69-261">Annars blir du ombedd tooinput hello lösenord under hello distribueringen.</span><span class="sxs-lookup"><span data-stu-id="bba69-261">Otherwise, you’ll be asked tooinput hello database password during hello deployment process.</span></span>

<span data-ttu-id="bba69-262">Klart!</span><span class="sxs-lookup"><span data-stu-id="bba69-262">That’s it!</span></span> <span data-ttu-id="bba69-263">Nu behöver du bara toogo toohello [Azure Portal](https://portal.azure.com/) och hello [resursutforskaren Azure](https://resources.azure.com) verktyget toosee hello nya aviseringar och Autoskala inställningar läggs tooyour JSON distribuerat program.</span><span class="sxs-lookup"><span data-stu-id="bba69-263">Now you just need toogo toohello [Azure Portal](https://portal.azure.com/) and hello [Azure Resource Explorer](https://resources.azure.com) tool toosee hello new alerts and autoscale settings added tooyour JSON deployed application.</span></span>

<span data-ttu-id="bba69-264">Steg i det här avsnittet åstadkommas huvudsakligen hello följande:</span><span class="sxs-lookup"><span data-stu-id="bba69-264">Your steps in this section mainly accomplished hello following:</span></span>

1. <span data-ttu-id="bba69-265">Förberedda hello mallfil</span><span class="sxs-lookup"><span data-stu-id="bba69-265">Prepared hello template file</span></span>
2. <span data-ttu-id="bba69-266">Skapa en parameter filen toogo med hello mallfilen</span><span class="sxs-lookup"><span data-stu-id="bba69-266">Created a parameter file toogo with hello template file</span></span>
3. <span data-ttu-id="bba69-267">Distribuerade hello mallfilen med hello parameterfilen</span><span class="sxs-lookup"><span data-stu-id="bba69-267">Deployed hello template file with hello parameter file</span></span>

<span data-ttu-id="bba69-268">hello sista steget görs enkelt genom en PowerShell-cmdlet.</span><span class="sxs-lookup"><span data-stu-id="bba69-268">hello last step is easily done by a PowerShell cmdlet.</span></span> <span data-ttu-id="bba69-269">toosee vad Visual Studio gjorde när den distribuerats ditt program, öppna Scripts\Deploy-AzureResourceGroup.ps1.</span><span class="sxs-lookup"><span data-stu-id="bba69-269">toosee what Visual Studio did when it deployed your application, open Scripts\Deploy-AzureResourceGroup.ps1.</span></span> <span data-ttu-id="bba69-270">Det är mycket kod det, men bara vi toohighlight alla relevanta hello kod som du måste toodeploy hello mallfilen med hello parameterfil.</span><span class="sxs-lookup"><span data-stu-id="bba69-270">There’s a lot of code there, but I’m just going toohighlight all hello pertinent code you need toodeploy hello template file with hello parameter file.</span></span>

![](./media/app-service-deploy-complex-application-predictably/deploy-12-powershellsnippet.png)

<span data-ttu-id="bba69-271">Hej senaste cmdlet `New-AzureResourceGroup`, är hello som faktiskt utför hello-åtgärd.</span><span class="sxs-lookup"><span data-stu-id="bba69-271">hello last cmdlet, `New-AzureResourceGroup`, is hello one that actually performs hello action.</span></span> <span data-ttu-id="bba69-272">Allt detta ska visa att med hjälp av hello av verktygsuppsättning, det är relativt enkelt toodeploy tooyou ditt moln programmet förutsägbart.</span><span class="sxs-lookup"><span data-stu-id="bba69-272">All this should demonstrate tooyou that, with hello help of tooling, it is relatively straightforward toodeploy your cloud application predictably.</span></span> <span data-ttu-id="bba69-273">Varje gång som du kör cmdlet hello på hello samma mall med hello samma parameterfil, ska tooget hello samma resultat.</span><span class="sxs-lookup"><span data-stu-id="bba69-273">Every time you run hello cmdlet on hello same template with hello same parameter file, you’re going tooget hello same result.</span></span>

## <a name="summary"></a><span data-ttu-id="bba69-274">Sammanfattning</span><span class="sxs-lookup"><span data-stu-id="bba69-274">Summary</span></span>
<span data-ttu-id="bba69-275">DevOps är repeterbarhet och förutsägbarhet nycklar tooany lyckad distribution av en hög skala program består av mikrotjänster.</span><span class="sxs-lookup"><span data-stu-id="bba69-275">In DevOps, repeatability and predictability are keys tooany successful deployment of a high-scale application composed of microservices.</span></span> <span data-ttu-id="bba69-276">Du har distribuerat en två-mikrotjänster programmet tooAzure som en enskild resursgrupp med hello Azure Resource Manager-mall i den här självstudiekursen.</span><span class="sxs-lookup"><span data-stu-id="bba69-276">In this tutorial, you have deployed a two-microservice application tooAzure as a single resource group using hello Azure Resource Manager template.</span></span> <span data-ttu-id="bba69-277">Förhoppningsvis det du har fått hello kunskap du behöver i ordning toostart konvertera ditt program i Azure till en mall och etablera och distribuera den förutsägbart.</span><span class="sxs-lookup"><span data-stu-id="bba69-277">Hopefully, it has given you hello knowledge you need in order toostart converting your application in Azure into a template and can provision and deploy it predictably.</span></span> 

## <a name="next-steps"></a><span data-ttu-id="bba69-278">Nästa steg</span><span class="sxs-lookup"><span data-stu-id="bba69-278">Next Steps</span></span>
<span data-ttu-id="bba69-279">Ta reda på hur för[gäller flexibel metoder och kontinuerligt publicera programmet mikrotjänster med enkel](app-service-agile-software-development.md) och avancerade tekniker för programdistribution som [förhandsversionstestning distribution](app-service-web-test-in-production-controlled-test-flight.md) enkelt.</span><span class="sxs-lookup"><span data-stu-id="bba69-279">Find out how too[apply agile methodologies and continuously publish your microservices application with ease](app-service-agile-software-development.md) and advanced deployment techniques like [flighting deployment](app-service-web-test-in-production-controlled-test-flight.md) easily.</span></span>

<a name="resources"></a>

## <a name="more-resources"></a><span data-ttu-id="bba69-280">Fler resurser</span><span class="sxs-lookup"><span data-stu-id="bba69-280">More resources</span></span>
* [<span data-ttu-id="bba69-281">Språk för Azure Resource Manager-mallen</span><span class="sxs-lookup"><span data-stu-id="bba69-281">Azure Resource Manager Template Language</span></span>](../azure-resource-manager/resource-group-authoring-templates.md)
* [<span data-ttu-id="bba69-282">Redigera Azure Resource Manager-mallar</span><span class="sxs-lookup"><span data-stu-id="bba69-282">Authoring Azure Resource Manager Templates</span></span>](../azure-resource-manager/resource-group-authoring-templates.md)
* [<span data-ttu-id="bba69-283">Azure Resource Manager Mallfunktioner</span><span class="sxs-lookup"><span data-stu-id="bba69-283">Azure Resource Manager Template Functions</span></span>](../azure-resource-manager/resource-group-template-functions.md)
* [<span data-ttu-id="bba69-284">Distribuera ett program med Azure Resource Manager-mall</span><span class="sxs-lookup"><span data-stu-id="bba69-284">Deploy an application with Azure Resource Manager template</span></span>](../azure-resource-manager/resource-group-template-deploy.md)
* [<span data-ttu-id="bba69-285">Använda Azure PowerShell med Azure Resource Manager</span><span class="sxs-lookup"><span data-stu-id="bba69-285">Using Azure PowerShell with Azure Resource Manager</span></span>](../azure-resource-manager/powershell-azure-resource-manager.md)
* [<span data-ttu-id="bba69-286">Felsökning av resursgruppen distributioner i Azure</span><span class="sxs-lookup"><span data-stu-id="bba69-286">Troubleshooting Resource Group Deployments in Azure</span></span>](../azure-resource-manager/resource-manager-common-deployment-errors.md)


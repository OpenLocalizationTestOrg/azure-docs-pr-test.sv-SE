---
title: "aaaGeo distribuerade skala med Apptjänstmiljöer"
description: "Lär dig hur toohorizontally skala appar med geo-distribution med Traffic Manager och App-miljöer."
services: app-service
documentationcenter: 
author: stefsch
manager: erikre
editor: 
ms.assetid: c1b05ca8-3703-4d87-a9ae-819d741787fb
ms.service: app-service
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 09/07/2016
ms.author: stefsch
ms.openlocfilehash: 9b441f637d8b7f679b3d83240baf99b8ee57e8f3
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: sv-SE
ms.lasthandoff: 10/06/2017
---
# <a name="geo-distributed-scale-with-app-service-environments"></a><span data-ttu-id="78e43-103">Geodistribuerad skalning med App Service Environment</span><span class="sxs-lookup"><span data-stu-id="78e43-103">Geo Distributed Scale with App Service Environments</span></span>
## <a name="overview"></a><span data-ttu-id="78e43-104">Översikt</span><span class="sxs-lookup"><span data-stu-id="78e43-104">Overview</span></span>
<span data-ttu-id="78e43-105">Programscenarier som kräver storskalighet kan överskrida hello beräkning resurs kapacitet tillgängliga tooa distribution av en app.</span><span class="sxs-lookup"><span data-stu-id="78e43-105">Application scenarios which require very high scale can exceed hello compute resource capacity available tooa single deployment of an app.</span></span>  <span data-ttu-id="78e43-106">Röstning program, är sport händelser och TV underhållning händelser alla exempel på scenarier som kräver mycket hög skala.</span><span class="sxs-lookup"><span data-stu-id="78e43-106">Voting applications, sporting events, and televised entertainment events are all examples of scenarios that require extremely high scale.</span></span> <span data-ttu-id="78e43-107">Hög skalning kraven kan uppfyllas genom att skala ut appar, vågrätt med flera appdistributioner görs inom en enskild region, samt över regioner, toohandle extrema belastningskraven.</span><span class="sxs-lookup"><span data-stu-id="78e43-107">High scale requirements can be met by horizontally scaling out apps, with multiple app deployments being made within a single region, as well as across regions, toohandle extreme load requirements.</span></span>

<span data-ttu-id="78e43-108">Apptjänstmiljöer finns en perfekt plattform för vågrät skala ut.  När en Apptjänst-miljö konfiguration har valts som kan stödja en känd förfrågningar kan utvecklare distribuera ytterligare Apptjänstmiljöer i ”kakmall” sätt tooattain en önskad belastning belastningen kapacitet.</span><span class="sxs-lookup"><span data-stu-id="78e43-108">App Service Environments are an ideal platform for horizontal scale out.  Once an App Service Environment configuration has been selected that can support a known request rate, developers can deploy additional App Service Environments in "cookie cutter" fashion tooattain a desired peak load capacity.</span></span>

<span data-ttu-id="78e43-109">Anta till exempel att en app som körs på en Apptjänstmiljö konfiguration har testats toohandle 20K begäranden per sekund (RPS).</span><span class="sxs-lookup"><span data-stu-id="78e43-109">For example suppose an app running on an App Service Environment configuration has been tested toohandle 20K requests per second (RPS).</span></span>  <span data-ttu-id="78e43-110">Om hello önskade belastning läser in kapacitet är 100K RPS, Apptjänstmiljöer fem (5) kan skapas och konfigurerade tooensure hello-programmet kan hantera hello största planerade belastning.</span><span class="sxs-lookup"><span data-stu-id="78e43-110">If hello desired peak load capacity is 100K RPS, then five (5) App Service Environments can be created and configured tooensure hello application can handle hello maximum projected load.</span></span>

<span data-ttu-id="78e43-111">Eftersom kunder normalt kommer åt appar som använder en anpassad (eller alternativa)-domän, utvecklare behöver begär en sätt toodistribute app för alla instanser av hello Apptjänst-miljö.</span><span class="sxs-lookup"><span data-stu-id="78e43-111">Since customers typically access apps using a custom (or vanity) domain, developers need a way toodistribute app requests across all of hello App Service Environment instances.</span></span>  <span data-ttu-id="78e43-112">Ett bra sätt tooaccomplish är tooresolve hello en anpassad domän med hjälp av en [Azure Traffic Manager-profilen][AzureTrafficManagerProfile].</span><span class="sxs-lookup"><span data-stu-id="78e43-112">A great way tooaccomplish this is tooresolve hello custom domain using an [Azure Traffic Manager profile][AzureTrafficManagerProfile].</span></span>  <span data-ttu-id="78e43-113">hello Traffic Manager-profil kan vara konfigurerade toopoint på alla hello enskilda Apptjänstmiljöer.</span><span class="sxs-lookup"><span data-stu-id="78e43-113">hello Traffic Manager profile can be configured toopoint at all of hello individual App Service Environments.</span></span>  <span data-ttu-id="78e43-114">Traffic Manager hanterar automatiskt distribuerar kunder för alla hello Apptjänstmiljöer baserat på hello inställningar i hello Traffic Manager-profil för belastningsutjämning.</span><span class="sxs-lookup"><span data-stu-id="78e43-114">Traffic Manager will automatically handle distributing customers across all of hello App Service Environments based on hello load balancing settings in hello Traffic Manager profile.</span></span>  <span data-ttu-id="78e43-115">Den här metoden fungerar oavsett om alla hello Apptjänstmiljöer är distribuerat i en enda Azure region eller distribueras i hela världen över flera Azure-regioner.</span><span class="sxs-lookup"><span data-stu-id="78e43-115">This approach works regardless of whether all of hello App Service Environments are deployed in a single Azure region, or deployed worldwide across multiple Azure regions.</span></span>

<span data-ttu-id="78e43-116">Eftersom kunder åtkomst till appar via hello alternativa domän, inte dessutom kunder känner till hello antalet Apptjänstmiljöer som kör en app.</span><span class="sxs-lookup"><span data-stu-id="78e43-116">Furthermore, since customers access apps through hello vanity domain, customers are unaware of hello number of App Service Environments running an app.</span></span>  <span data-ttu-id="78e43-117">Därför kan utvecklare snabbt och enkelt lägga till och ta bort Apptjänstmiljöer baserat på observerade trafikbelastningen.</span><span class="sxs-lookup"><span data-stu-id="78e43-117">As a result developers can quickly and easily add, and remove, App Service Environments based on observed traffic load.</span></span>

<span data-ttu-id="78e43-118">hello konceptuella diagrammet nedan visar en app vågrätt skala ut över tre Apptjänstmiljöer inom en enskild region.</span><span class="sxs-lookup"><span data-stu-id="78e43-118">hello conceptual diagram below depicts an app horizontally scaled out across three App Service Environments within a single region.</span></span>

![Konceptuell arkitektur][ConceptualArchitecture] 

<span data-ttu-id="78e43-120">hello resten av det här avsnittet går igenom hello tillvägagångssättet med att konfigurera en distribuerad topologi för hello sample-appen med hjälp av flera Apptjänstmiljöer.</span><span class="sxs-lookup"><span data-stu-id="78e43-120">hello remainder of this topic walks through hello steps involved with setting up a distributed topology for hello sample app using multiple App Service Environments.</span></span>

## <a name="planning-hello-topology"></a><span data-ttu-id="78e43-121">Planera hello topologi</span><span class="sxs-lookup"><span data-stu-id="78e43-121">Planning hello Topology</span></span>
<span data-ttu-id="78e43-122">Innan du bygga ut en distribuerad app storleken hjälper toohave några delar information i förväg.</span><span class="sxs-lookup"><span data-stu-id="78e43-122">Before building out a distributed app footprint, it helps toohave a few pieces information ahead of time.</span></span>

* <span data-ttu-id="78e43-123">**Anpassad domän för hello app:** vad är hello domännamn kunder kommer att använda tooaccess hello app?</span><span class="sxs-lookup"><span data-stu-id="78e43-123">**Custom domain for hello app:**  What is hello custom domain name that customers will use tooaccess hello app?</span></span>  <span data-ttu-id="78e43-124">Hello exempel hello anpassade tillämpningsdomän är namn *www.scalableasedemo.com*</span><span class="sxs-lookup"><span data-stu-id="78e43-124">For hello sample app hello custom domain name is *www.scalableasedemo.com*</span></span>
* <span data-ttu-id="78e43-125">**Traffic Manager-domän:** ett domännamn måste toobe valt när du skapar en [Azure Traffic Manager-profilen][AzureTrafficManagerProfile].</span><span class="sxs-lookup"><span data-stu-id="78e43-125">**Traffic Manager domain:**  A domain name needs toobe chosen when creating an [Azure Traffic Manager profile][AzureTrafficManagerProfile].</span></span>  <span data-ttu-id="78e43-126">Det här namnet kommer att kombineras med hello *trafficmanager.net* tooregister en post för domänen som hanteras av Traffic Manager-suffix.</span><span class="sxs-lookup"><span data-stu-id="78e43-126">This name will be combined with hello *trafficmanager.net* suffix tooregister a domain entry that is managed by Traffic Manager.</span></span>  <span data-ttu-id="78e43-127">Hej exempelapp hello namn som väljs är *skalbara ase demo*.</span><span class="sxs-lookup"><span data-stu-id="78e43-127">For hello sample app, hello name chosen is *scalable-ase-demo*.</span></span>  <span data-ttu-id="78e43-128">Därför hello fullständiga domännamn som hanteras av Traffic Manager är *skalbara ase demo.trafficmanager.net*.</span><span class="sxs-lookup"><span data-stu-id="78e43-128">As a result hello full domain name that is managed by Traffic Manager is *scalable-ase-demo.trafficmanager.net*.</span></span>
* <span data-ttu-id="78e43-129">**Strategin för skalning hello app storleken:** hello programmet storleken distribueras över flera Apptjänstmiljöer i en region?</span><span class="sxs-lookup"><span data-stu-id="78e43-129">**Strategy for scaling hello app footprint:**  Will hello application footprint be distributed across multiple App Service Environments in a single region?</span></span>  <span data-ttu-id="78e43-130">Flera regioner?</span><span class="sxs-lookup"><span data-stu-id="78e43-130">Multiple regions?</span></span>  <span data-ttu-id="78e43-131">En blanda och matcha-med båda metoderna?</span><span class="sxs-lookup"><span data-stu-id="78e43-131">A mix-and-match of both approaches?</span></span>  <span data-ttu-id="78e43-132">hello beslut ska baseras på förväntningar där kunden trafik kommer kommer, samt hur väl hello resten av en app stöd för backend-infrastruktur kan skala.</span><span class="sxs-lookup"><span data-stu-id="78e43-132">hello decision should be based on expectations of where customer traffic will originate, as well as how well hello rest of an app's supporting back-end infrastructure can scale.</span></span>  <span data-ttu-id="78e43-133">Till exempel med ett 100% tillståndslösa program, kan en app massivt skalas med en kombination av flera Apptjänstmiljöer per Azure-region, multiplicerat med Apptjänstmiljöer distribution över flera Azure-regioner.</span><span class="sxs-lookup"><span data-stu-id="78e43-133">For example, with a 100% stateless application, an app can be massively scaled using a combination of multiple App Service Environments per Azure region,  multiplied by App Service Environments deployed across multiple Azure regions.</span></span>  <span data-ttu-id="78e43-134">Med 15 + offentliga Azure-regioner tillgängliga toochoose från bygga kunder verkligen ett globalt storskaliga program storleken.</span><span class="sxs-lookup"><span data-stu-id="78e43-134">With 15+ public Azure regions available toochoose from, customers can truly build a world-wide hyper-scale application footprint.</span></span>  <span data-ttu-id="78e43-135">För hello sample-appen används för den här artikeln, har tre Apptjänstmiljöer skapats i en enda Azure region (södra centrala USA).</span><span class="sxs-lookup"><span data-stu-id="78e43-135">For hello sample app used for this article, three App Service Environments were created in a single Azure region (South Central US).</span></span>
* <span data-ttu-id="78e43-136">**Namnkonventionen för hello Apptjänstmiljöer:** varje Apptjänst-miljön kräver ett unikt namn.</span><span class="sxs-lookup"><span data-stu-id="78e43-136">**Naming convention for hello App Service Environments:**  Each App Service Environment requires a unique name.</span></span>  <span data-ttu-id="78e43-137">Utöver en eller två Apptjänstmiljöer är det bra toohave en namngivningskonvention toohelp identifiera varje Apptjänst-miljö.</span><span class="sxs-lookup"><span data-stu-id="78e43-137">Beyond one or two App Service Environments it is helpful toohave a naming convention toohelp identify each App Service Environment.</span></span>  <span data-ttu-id="78e43-138">En enkel namngivningskonvention användes för hello sample-appen.</span><span class="sxs-lookup"><span data-stu-id="78e43-138">For hello sample app a simple naming convention was used.</span></span>  <span data-ttu-id="78e43-139">hello namnen på hello tre Apptjänstmiljöer är *fe1ase*, *fe2ase*, och *fe3ase*.</span><span class="sxs-lookup"><span data-stu-id="78e43-139">hello names of hello three App Service Environments are *fe1ase*, *fe2ase*, and *fe3ase*.</span></span>
* <span data-ttu-id="78e43-140">**Namnkonventionen för hello appar:** eftersom flera instanser av hello appen ska distribueras, krävs ett namn för varje instans av hello distribuerade appen.</span><span class="sxs-lookup"><span data-stu-id="78e43-140">**Naming convention for hello apps:**  Since multiple instances of hello app will be deployed, a name is needed for each instance of hello deployed app.</span></span>  <span data-ttu-id="78e43-141">En mindre kända men praktiskt funktion i Apptjänstmiljöer är att hello samma appnamn kan användas på flera Apptjänstmiljöer.</span><span class="sxs-lookup"><span data-stu-id="78e43-141">One little-known but very convenient feature of App Service Environments is that hello same app name can be used across multiple App Service Environments.</span></span>  <span data-ttu-id="78e43-142">Eftersom varje Apptjänstmiljö har ett unikt domänsuffix, kan utvecklare välja toore Använd hello exakt samma appnamn i varje miljö.</span><span class="sxs-lookup"><span data-stu-id="78e43-142">Since each App Service Environment has a unique domain suffix, developers can choose toore-use hello exact same app name in each environment.</span></span>  <span data-ttu-id="78e43-143">En utvecklare kan till exempel ha appar med namnet på följande sätt: *myapp.foo1.p.azurewebsites.net*, *myapp.foo2.p.azurewebsites.net*, *myapp.foo3.p.azurewebsites.net*osv.  För hello exempelapp även om varje app-instansen har även ett unikt namn.</span><span class="sxs-lookup"><span data-stu-id="78e43-143">For example a developer could have apps named as follows:  *myapp.foo1.p.azurewebsites.net*, *myapp.foo2.p.azurewebsites.net*, *myapp.foo3.p.azurewebsites.net*, etc.  For hello sample app though each app instance also has a unique name.</span></span>  <span data-ttu-id="78e43-144">hello app instansnamn som används är *webfrontend1*, *webfrontend2*, och *webfrontend3*.</span><span class="sxs-lookup"><span data-stu-id="78e43-144">hello app instance names used are *webfrontend1*, *webfrontend2*, and *webfrontend3*.</span></span>

## <a name="setting-up-hello-traffic-manager-profile"></a><span data-ttu-id="78e43-145">Konfigurera hello Traffic Manager-profilen</span><span class="sxs-lookup"><span data-stu-id="78e43-145">Setting up hello Traffic Manager Profile</span></span>
<span data-ttu-id="78e43-146">När flera instanser av en app distribueras på flera Apptjänstmiljöer kan hello enskilda app-instanser registreras med Traffic Manager.</span><span class="sxs-lookup"><span data-stu-id="78e43-146">Once multiple instances of an app are deployed on multiple App Service Environments, hello  individual app instances can be registered with Traffic Manager.</span></span>  <span data-ttu-id="78e43-147">För hello sample-appen en Traffic Manager profil krävs för *skalbara ase demo.trafficmanager.net* som kan vidarebefordra kunder tooany av hello följa distribuerade app-instanser:</span><span class="sxs-lookup"><span data-stu-id="78e43-147">For hello sample app a Traffic Manager profile is needed for *scalable-ase-demo.trafficmanager.net* that can route customers tooany of hello following deployed app instances:</span></span>

* <span data-ttu-id="78e43-148">**webfrontend1.fe1ase.p.azurewebsites.NET:** en instans av hello sample-appen har distribuerats på hello första Apptjänstmiljö.</span><span class="sxs-lookup"><span data-stu-id="78e43-148">**webfrontend1.fe1ase.p.azurewebsites.net:**  An instance of hello sample app deployed on hello first App Service Environment.</span></span>
* <span data-ttu-id="78e43-149">**webfrontend2.fe2ase.p.azurewebsites.NET:** en instans av hello sample-appen har distribuerats på hello andra Apptjänst-miljö.</span><span class="sxs-lookup"><span data-stu-id="78e43-149">**webfrontend2.fe2ase.p.azurewebsites.net:**  An instance of hello sample app deployed on hello second App Service Environment.</span></span>
* <span data-ttu-id="78e43-150">**webfrontend3.fe3ase.p.azurewebsites.NET:** en instans av hello sample-appen har distribuerats på hello tredje Apptjänstmiljö.</span><span class="sxs-lookup"><span data-stu-id="78e43-150">**webfrontend3.fe3ase.p.azurewebsites.net:**  An instance of hello sample app deployed on hello third App Service Environment.</span></span>

<span data-ttu-id="78e43-151">Hej enklaste sättet tooregister flera Azure App Service-slutpunkter kan alla körs i hello **samma** Azure-regionen är med hello Powershell [stöd för Azure Resource Manager Traffic Manager] [ ARMTrafficManager].</span><span class="sxs-lookup"><span data-stu-id="78e43-151">hello easiest way tooregister multiple Azure App Service endpoints, all running in hello **same** Azure region, is with hello Powershell [Azure Resource Manager Traffic Manager support][ARMTrafficManager].</span></span>  

<span data-ttu-id="78e43-152">hello första steget är toocreate en Azure Traffic Manager-profil.</span><span class="sxs-lookup"><span data-stu-id="78e43-152">hello first step is toocreate an Azure Traffic Manager profile.</span></span>  <span data-ttu-id="78e43-153">hello koden nedan visar hur hello profilen har skapats för hello sample-appen:</span><span class="sxs-lookup"><span data-stu-id="78e43-153">hello code below shows how hello profile was created for hello sample app:</span></span>

    $profile = New-AzureTrafficManagerProfile –Name scalableasedemo -ResourceGroupName yourRGNameHere -TrafficRoutingMethod Weighted -RelativeDnsName scalable-ase-demo -Ttl 30 -MonitorProtocol HTTP -MonitorPort 80 -MonitorPath "/"

<span data-ttu-id="78e43-154">Observera hur hello *RelativeDnsName* parameter har angetts för*skalbara ase demo*.</span><span class="sxs-lookup"><span data-stu-id="78e43-154">Notice how hello *RelativeDnsName* parameter was set too*scalable-ase-demo*.</span></span>  <span data-ttu-id="78e43-155">Detta är hur hello domännamn *skalbara ase demo.trafficmanager.net* som associeras med en Traffic Manager-profil.</span><span class="sxs-lookup"><span data-stu-id="78e43-155">This is how hello domain name *scalable-ase-demo.trafficmanager.net* is created and associated with a Traffic Manager profile.</span></span>

<span data-ttu-id="78e43-156">Hej *TrafficRoutingMethod* parametern definierar hello princip för Traffic Manager kommer att använda toodetermine hur toospread kundbelastning över alla tillgängliga hello-slutpunkter för belastningsutjämning.</span><span class="sxs-lookup"><span data-stu-id="78e43-156">hello *TrafficRoutingMethod* parameter defines hello load balancing policy Traffic Manager will use toodetermine how toospread customer load across all of hello available endpoints.</span></span>  <span data-ttu-id="78e43-157">I det här exemplet hello *viktat* har valt metoden.</span><span class="sxs-lookup"><span data-stu-id="78e43-157">In this example hello *Weighted* method was chosen.</span></span>  <span data-ttu-id="78e43-158">Detta resulterar i kundernas önskemål som sprids hello registrerade programmet slutpunkterna baserat på hello relativa vikten som är associerade med varje slutpunkt.</span><span class="sxs-lookup"><span data-stu-id="78e43-158">This will result in customer requests being spread across all of hello registered application endpoints based on hello relative weights associated with each endpoint.</span></span> 

<span data-ttu-id="78e43-159">Med hello profilen har skapats, varje app-instansen till toohello profil som en intern Azure-slutpunkt.</span><span class="sxs-lookup"><span data-stu-id="78e43-159">With hello profile created, each app instance is added toohello profile as a native Azure endpoint.</span></span>  <span data-ttu-id="78e43-160">hello koden nedan hämtar en referens tooeach frontend-webbprogram och lägger sedan till varje app som en Traffic Manager-slutpunkt som hello *TargetResourceId* parameter.</span><span class="sxs-lookup"><span data-stu-id="78e43-160">hello code below fetches a reference tooeach front end web app, and then adds each app as a Traffic Manager endpoint by way of hello *TargetResourceId* parameter.</span></span>

    $webapp1 = Get-AzureRMWebApp -Name webfrontend1
    Add-AzureTrafficManagerEndpointConfig –EndpointName webfrontend1 –TrafficManagerProfile $profile –Type AzureEndpoints -TargetResourceId $webapp1.Id –EndpointStatus Enabled –Weight 10

    $webapp2 = Get-AzureRMWebApp -Name webfrontend2
    Add-AzureTrafficManagerEndpointConfig –EndpointName webfrontend2 –TrafficManagerProfile $profile –Type AzureEndpoints -TargetResourceId $webapp2.Id –EndpointStatus Enabled –Weight 10

    $webapp3 = Get-AzureRMWebApp -Name webfrontend3
    Add-AzureTrafficManagerEndpointConfig –EndpointName webfrontend3 –TrafficManagerProfile $profile –Type AzureEndpoints -TargetResourceId $webapp3.Id –EndpointStatus Enabled –Weight 10

    Set-AzureTrafficManagerProfile –TrafficManagerProfile $profile

<span data-ttu-id="78e43-161">Observera hur det är ett anrop för*Lägg till AzureTrafficManagerEndpointConfig* för varje enskild app-instansen.</span><span class="sxs-lookup"><span data-stu-id="78e43-161">Notice how there is one call too*Add-AzureTrafficManagerEndpointConfig* for each individual app instance.</span></span>  <span data-ttu-id="78e43-162">Hej *TargetResourceId* i varje Powershell-kommando refererar till ett av hello tre distribuerad app instanser.</span><span class="sxs-lookup"><span data-stu-id="78e43-162">hello *TargetResourceId* parameter in each Powershell command references one of hello three deployed app instances.</span></span>  <span data-ttu-id="78e43-163">hello Traffic Manager-profilen ska spridas belastningen för alla tre slutpunkterna som registrerats i hello profilen.</span><span class="sxs-lookup"><span data-stu-id="78e43-163">hello Traffic Manager profile will spread load across all three endpoints registered in hello profile.</span></span>

<span data-ttu-id="78e43-164">Alla tre slutpunkterna använda hello hello samma värde (10) för hello *vikt* parameter.</span><span class="sxs-lookup"><span data-stu-id="78e43-164">All of hello three endpoints use hello same value (10) for hello *Weight* parameter.</span></span>  <span data-ttu-id="78e43-165">Detta resulterar i Traffic Manager sprids kundönskemål i alla tre app instanser jämnt.</span><span class="sxs-lookup"><span data-stu-id="78e43-165">This results in Traffic Manager spreading customer requests across all three app instances relatively evenly.</span></span> 

## <a name="pointing-hello-apps-custom-domain-at-hello-traffic-manager-domain"></a><span data-ttu-id="78e43-166">Pekar hello App anpassad domän på hello Traffic Manager-domän</span><span class="sxs-lookup"><span data-stu-id="78e43-166">Pointing hello App's Custom Domain at hello Traffic Manager Domain</span></span>
<span data-ttu-id="78e43-167">hello sista steget behövs är toopoint hello domänen hello app på hello Traffic Manager-domän.</span><span class="sxs-lookup"><span data-stu-id="78e43-167">hello final step necessary is toopoint hello custom domain of hello app at hello Traffic Manager domain.</span></span>  <span data-ttu-id="78e43-168">För hello exempelapp innebär detta att peka *www.scalableasedemo.com* på *skalbara ase demo.trafficmanager.net*.</span><span class="sxs-lookup"><span data-stu-id="78e43-168">For hello sample app this means pointing *www.scalableasedemo.com* at *scalable-ase-demo.trafficmanager.net*.</span></span>  <span data-ttu-id="78e43-169">Det här steget måste toobe slutfördes med hello domänregistrator som hanterar hello anpassade domäner.</span><span class="sxs-lookup"><span data-stu-id="78e43-169">This step needs toobe completed with hello domain registrar that manages hello custom domain.</span></span>  

<span data-ttu-id="78e43-170">Använda din registrator domän hanteringsverktyg, skapa en CNAME-poster måste toobe domänen som pekar hello på hello Traffic Manager-domän.</span><span class="sxs-lookup"><span data-stu-id="78e43-170">Using your registrar's domain management tools, a CNAME records needs toobe created which points hello custom domain at hello Traffic Manager domain.</span></span>  <span data-ttu-id="78e43-171">hello bilden nedan visas ett exempel på hur den här CNAME-konfigurationen ser ut:</span><span class="sxs-lookup"><span data-stu-id="78e43-171">hello picture below shows an example of what this CNAME configuration looks like:</span></span>

![CNAME-post för den anpassade domänen][CNAMEforCustomDomain] 

<span data-ttu-id="78e43-173">Kom ihåg att varje enskild app-instansen måste toohave hello domänen registrerats med den samt men som inte omfattas i det här avsnittet.</span><span class="sxs-lookup"><span data-stu-id="78e43-173">Although not covered in this topic, remember that each individual app instance needs toohave hello custom domain registered with it as well.</span></span>  <span data-ttu-id="78e43-174">Om en begäran gör det tooan app-instansen och hello programmet saknar hello domänen som är registrerade med hello app, annars misslyckas hello begäran.</span><span class="sxs-lookup"><span data-stu-id="78e43-174">Otherwise if a request makes it tooan app instance, and hello application does not have hello custom domain registered with hello app, hello request will fail.</span></span>  

<span data-ttu-id="78e43-175">I det här exemplet hello domänen är *www.scalableasedemo.com*, och varje instans av programmet har hello anpassade domäner som är kopplade till den.</span><span class="sxs-lookup"><span data-stu-id="78e43-175">In this example hello custom domain is *www.scalableasedemo.com*, and each application instance has hello custom domain associated with it.</span></span>

![Egen domän][CustomDomain] 

<span data-ttu-id="78e43-177">En sammanfattning av registreringen av en anpassad domän med Azure Apptjänst-appar finns i följande artikel hello [registrera anpassade domäner][RegisterCustomDomain].</span><span class="sxs-lookup"><span data-stu-id="78e43-177">For a recap of of registering a custom domain with Azure App Service apps, see hello following article on [registering custom domains][RegisterCustomDomain].</span></span>

## <a name="trying-out-hello-distributed-topology"></a><span data-ttu-id="78e43-178">Testar hello distribuerad topologi</span><span class="sxs-lookup"><span data-stu-id="78e43-178">Trying out hello Distributed Topology</span></span>
<span data-ttu-id="78e43-179">hello slutresultatet av hello Traffic Manager- och DNS är som begär för *www.scalableasedemo.com* flödar via hello följande ordning:</span><span class="sxs-lookup"><span data-stu-id="78e43-179">hello end result of hello Traffic Manager and DNS configuration is that requests for *www.scalableasedemo.com* will flow through hello following sequence:</span></span>

1. <span data-ttu-id="78e43-180">En webbläsare eller en enhet blir en DNS-sökning *www.scalableasedemo.com*</span><span class="sxs-lookup"><span data-stu-id="78e43-180">A browser or device will make a DNS lookup for *www.scalableasedemo.com*</span></span>
2. <span data-ttu-id="78e43-181">hello CNAME-post hos hello domänregistrator gör hello DNS-sökning toobe omdirigeras tooAzure Traffic Manager.</span><span class="sxs-lookup"><span data-stu-id="78e43-181">hello CNAME entry at hello domain registrar causes hello DNS lookup toobe redirected tooAzure Traffic Manager.</span></span>
3. <span data-ttu-id="78e43-182">En DNS-sökning görs för *skalbara ase demo.trafficmanager.net* mot en hello Azure Traffic Manager DNS-servrar.</span><span class="sxs-lookup"><span data-stu-id="78e43-182">A DNS lookup is made for *scalable-ase-demo.trafficmanager.net* against one of hello Azure Traffic Manager DNS servers.</span></span>
4. <span data-ttu-id="78e43-183">Baserat på hello princip för belastningsutjämning (hello *TrafficRoutingMethod* parameter används tidigare när du skapar hello Traffic Manager-profil), Traffic Manager kommer väljer ett av hello konfigurerade slutpunkter och returnera hello FQDN för som slutpunkten toohello webbläsare och enheter.</span><span class="sxs-lookup"><span data-stu-id="78e43-183">Based on hello load balancing policy (hello *TrafficRoutingMethod* parameter used earlier when creating hello Traffic Manager profile), Traffic Manager will select one of hello configured endpoints and return hello FQDN of that endpoint toohello browser or device.</span></span>
5. <span data-ttu-id="78e43-184">Eftersom hello FQDN för hello endpoint hello-Url för en app-instans som körs på en Apptjänst-miljö, hello webbläsare och enheter kommer att fråga en Microsoft Azure DNS-server tooresolve hello FQDN tooan IP-adress.</span><span class="sxs-lookup"><span data-stu-id="78e43-184">Since hello FQDN of hello endpoint is hello Url of an app instance running on an App Service Environment, hello browser or device will ask a Microsoft Azure DNS server tooresolve hello FQDN tooan IP address.</span></span> 
6. <span data-ttu-id="78e43-185">hello webbläsare och enheter skickar hello HTTP/S begäran toohello IP-adress.</span><span class="sxs-lookup"><span data-stu-id="78e43-185">hello browser or device will send hello HTTP/S request toohello IP address.</span></span>  
7. <span data-ttu-id="78e43-186">hello begäran anländer till en hello app-instanser som körs på en av hello Apptjänstmiljöer.</span><span class="sxs-lookup"><span data-stu-id="78e43-186">hello request will arrive at one of hello app instances running on one of hello App Service Environments.</span></span>

<span data-ttu-id="78e43-187">hello konsolen bilden nedan visas en DNS-sökning för hello exempel appens anpassade domäner har lösa tooan app-instansen körs på en av hello tre exempel Apptjänstmiljöer (i det här fallet hello hello tre Apptjänstmiljöer sekund):</span><span class="sxs-lookup"><span data-stu-id="78e43-187">hello console picture below shows a DNS lookup for hello sample app's custom domain successfully resolving tooan app instance running on one of hello three sample App Service Environments (in this case hello second of hello three App Service Environments):</span></span>

![DNS-sökning][DNSLookup] 

## <a name="additional-links-and-information"></a><span data-ttu-id="78e43-189">Information och ytterligare länkar</span><span class="sxs-lookup"><span data-stu-id="78e43-189">Additional Links and Information</span></span>
<span data-ttu-id="78e43-190">Alla artiklar och hur-att datorns för Apptjänstmiljöer finns tillgängliga i hello [viktigt för Programtjänstmiljöer](../app-service/app-service-app-service-environments-readme.md).</span><span class="sxs-lookup"><span data-stu-id="78e43-190">All articles and How-To's for App Service Environments are available in hello [README for Application Service Environments](../app-service/app-service-app-service-environments-readme.md).</span></span>

<span data-ttu-id="78e43-191">Dokumentation om hello Powershell [stöd för Azure Resource Manager Traffic Manager][ARMTrafficManager].</span><span class="sxs-lookup"><span data-stu-id="78e43-191">Documentation on hello Powershell [Azure Resource Manager Traffic Manager support][ARMTrafficManager].</span></span>  

[!INCLUDE [app-service-web-whats-changed](../../includes/app-service-web-whats-changed.md)]

[!INCLUDE [app-service-web-try-app-service](../../includes/app-service-web-try-app-service.md)]

<!-- LINKS -->
[AzureTrafficManagerProfile]: ../traffic-manager/traffic-manager-manage-profiles.md
[ARMTrafficManager]: ../traffic-manager/traffic-manager-powershell-arm.md
[RegisterCustomDomain]: app-service-web-tutorial-custom-domain.md


<!-- IMAGES -->
[ConceptualArchitecture]: ./media/app-service-app-service-environment-geo-distributed-scale/ConceptualArchitecture-1.png
[CNAMEforCustomDomain]:  ./media/app-service-app-service-environment-geo-distributed-scale/CNAMECustomDomain-1.png
[DNSLookup]:  ./media/app-service-app-service-environment-geo-distributed-scale/DNSLookup-1.png
[CustomDomain]:  ./media/app-service-app-service-environment-geo-distributed-scale/CustomDomain-1.png 

---
title: "Långsam web app i App Service | Microsoft Docs"
description: "Den här artikeln hjälper dig att felsöka problem med långsam web app prestanda i Azure App Service."
services: app-service\web
documentationcenter: 
author: cephalin
manager: erikre
editor: 
tags: top-support-issue
keywords: "Web app prestanda, långsam app app som är långsam"
ms.assetid: b8783c10-3a4a-4dd6-af8c-856baafbdde5
ms.service: app-service-web
ms.workload: web
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 08/03/2016
ms.author: cephalin
ms.openlocfilehash: 1cfe7ec37ad8b24a8bd9ab2bf67e95675a57b675
ms.sourcegitcommit: 50e23e8d3b1148ae2d36dad3167936b4e52c8a23
ms.translationtype: MT
ms.contentlocale: sv-SE
ms.lasthandoff: 08/18/2017
---
# <a name="troubleshoot-slow-web-app-performance-issues-in-azure-app-service"></a><span data-ttu-id="9f1e8-104">Felsöka problem med långsam web app prestanda i Azure App Service</span><span class="sxs-lookup"><span data-stu-id="9f1e8-104">Troubleshoot slow web app performance issues in Azure App Service</span></span>
<span data-ttu-id="9f1e8-105">Den här artikeln hjälper dig att felsöka problem med långsam web app prestanda i [Azure App Service](http://go.microsoft.com/fwlink/?LinkId=529714).</span><span class="sxs-lookup"><span data-stu-id="9f1e8-105">This article helps you troubleshoot slow web app performance issues in [Azure App Service](http://go.microsoft.com/fwlink/?LinkId=529714).</span></span>

<span data-ttu-id="9f1e8-106">Om du behöver mer hjälp när som helst i den här artikeln kan du kontakta Azure-experter på [MSDN Azure och Stack Overflow-forum](https://azure.microsoft.com/support/forums/).</span><span class="sxs-lookup"><span data-stu-id="9f1e8-106">If you need more help at any point in this article, you can contact the Azure experts on [the MSDN Azure and the Stack Overflow forums](https://azure.microsoft.com/support/forums/).</span></span> <span data-ttu-id="9f1e8-107">Alternativt kan du även filen en incident i Azure-supporten.</span><span class="sxs-lookup"><span data-stu-id="9f1e8-107">Alternatively, you can also file an Azure support incident.</span></span> <span data-ttu-id="9f1e8-108">Gå till den [Azure supportwebbplats](https://azure.microsoft.com/support/options/) och klicka på **Get Support**.</span><span class="sxs-lookup"><span data-stu-id="9f1e8-108">Go to the [Azure Support site](https://azure.microsoft.com/support/options/) and click on **Get Support**.</span></span>

## <a name="symptom"></a><span data-ttu-id="9f1e8-109">Symtom</span><span class="sxs-lookup"><span data-stu-id="9f1e8-109">Symptom</span></span>
<span data-ttu-id="9f1e8-110">När du bläddrar webbprogrammet sidor belastningen långsamt och ibland timeout.</span><span class="sxs-lookup"><span data-stu-id="9f1e8-110">When you browse the web app, the pages load slowly and sometimes timeout.</span></span>

## <a name="cause"></a><span data-ttu-id="9f1e8-111">Orsak</span><span class="sxs-lookup"><span data-stu-id="9f1e8-111">Cause</span></span>
<span data-ttu-id="9f1e8-112">Det här problemet beror ofta på nivån programproblem som:</span><span class="sxs-lookup"><span data-stu-id="9f1e8-112">This problem is often caused by application level issues, such as:</span></span>

* <span data-ttu-id="9f1e8-113">nätverksbegäranden tar lång tid</span><span class="sxs-lookup"><span data-stu-id="9f1e8-113">network requests taking a long time</span></span>
* <span data-ttu-id="9f1e8-114">program-kod eller database-frågor som är ineffektiv</span><span class="sxs-lookup"><span data-stu-id="9f1e8-114">application code or database queries being inefficient</span></span>
* <span data-ttu-id="9f1e8-115">program med hög minne/processor</span><span class="sxs-lookup"><span data-stu-id="9f1e8-115">application using high memory/CPU</span></span>
* <span data-ttu-id="9f1e8-116">programmet kraschar på grund av ett undantag</span><span class="sxs-lookup"><span data-stu-id="9f1e8-116">application crashing due to an exception</span></span>

## <a name="troubleshooting-steps"></a><span data-ttu-id="9f1e8-117">Felsökningssteg</span><span class="sxs-lookup"><span data-stu-id="9f1e8-117">Troubleshooting steps</span></span>
<span data-ttu-id="9f1e8-118">Felsökning kan delas in i tre olika uppgifter i sekventiell ordning:</span><span class="sxs-lookup"><span data-stu-id="9f1e8-118">Troubleshooting can be divided into three distinct tasks, in sequential order:</span></span>

1. [<span data-ttu-id="9f1e8-119">Observera och övervaka programmets beteende</span><span class="sxs-lookup"><span data-stu-id="9f1e8-119">Observe and monitor application behavior</span></span>](#observe)
2. [<span data-ttu-id="9f1e8-120">Samla in data</span><span class="sxs-lookup"><span data-stu-id="9f1e8-120">Collect data</span></span>](#collect)
3. [<span data-ttu-id="9f1e8-121">Åtgärda problemet</span><span class="sxs-lookup"><span data-stu-id="9f1e8-121">Mitigate the issue</span></span>](#mitigate)

<span data-ttu-id="9f1e8-122">[App Service Web Apps](/services/app-service/web/) ger olika alternativ i varje steg.</span><span class="sxs-lookup"><span data-stu-id="9f1e8-122">[App Service Web Apps](/services/app-service/web/) gives you various options at each step.</span></span>

<a name="observe" />

### <a name="1-observe-and-monitor-application-behavior"></a><span data-ttu-id="9f1e8-123">1. Observera och övervaka programmets beteende</span><span class="sxs-lookup"><span data-stu-id="9f1e8-123">1. Observe and monitor application behavior</span></span>
#### <a name="track-service-health"></a><span data-ttu-id="9f1e8-124">Spåra tjänstens hälsa</span><span class="sxs-lookup"><span data-stu-id="9f1e8-124">Track Service health</span></span>
<span data-ttu-id="9f1e8-125">Microsoft Azure publicizes varje gång en tjänst avbrott eller prestanda försämras.</span><span class="sxs-lookup"><span data-stu-id="9f1e8-125">Microsoft Azure publicizes each time there is a service interruption or performance degradation.</span></span> <span data-ttu-id="9f1e8-126">Du kan spåra hälsotillståndet för tjänsten på den [Azure-portalen](https://portal.azure.com/).</span><span class="sxs-lookup"><span data-stu-id="9f1e8-126">You can track the health of the service on the [Azure portal](https://portal.azure.com/).</span></span> <span data-ttu-id="9f1e8-127">Mer information finns i [spåra tjänstens hälsa](../monitoring-and-diagnostics/insights-service-health.md).</span><span class="sxs-lookup"><span data-stu-id="9f1e8-127">For more information, see [Track service health](../monitoring-and-diagnostics/insights-service-health.md).</span></span>

#### <a name="monitor-your-web-app"></a><span data-ttu-id="9f1e8-128">Övervaka ditt webbprogram</span><span class="sxs-lookup"><span data-stu-id="9f1e8-128">Monitor your web app</span></span>
<span data-ttu-id="9f1e8-129">Det här alternativet kan du ta reda på om ditt program är har problem.</span><span class="sxs-lookup"><span data-stu-id="9f1e8-129">This option enables you to find out if your application is having any issues.</span></span> <span data-ttu-id="9f1e8-130">I din webbapps blad klickar du på den **begäranden och fel** panelen.</span><span class="sxs-lookup"><span data-stu-id="9f1e8-130">In your web app’s blade, click the **Requests and errors** tile.</span></span> <span data-ttu-id="9f1e8-131">Den **mått** bladet visar alla mått som du kan lägga till.</span><span class="sxs-lookup"><span data-stu-id="9f1e8-131">The **Metric** blade shows you all the metrics you can add.</span></span>

<span data-ttu-id="9f1e8-132">Några av de mått som du kanske vill övervaka för webbappen</span><span class="sxs-lookup"><span data-stu-id="9f1e8-132">Some of the metrics that you might want to monitor for your web app are</span></span>

* <span data-ttu-id="9f1e8-133">Genomsnittlig minne arbetsminne</span><span class="sxs-lookup"><span data-stu-id="9f1e8-133">Average memory working set</span></span>
* <span data-ttu-id="9f1e8-134">Genomsnittlig svarstid</span><span class="sxs-lookup"><span data-stu-id="9f1e8-134">Average response time</span></span>
* <span data-ttu-id="9f1e8-135">CPU-tid</span><span class="sxs-lookup"><span data-stu-id="9f1e8-135">CPU time</span></span>
* <span data-ttu-id="9f1e8-136">Arbetsminnet för minne</span><span class="sxs-lookup"><span data-stu-id="9f1e8-136">Memory working set</span></span>
* <span data-ttu-id="9f1e8-137">Begäranden</span><span class="sxs-lookup"><span data-stu-id="9f1e8-137">Requests</span></span>

![övervaka prestanda för web app](./media/app-service-web-troubleshoot-performance-degradation/1-monitor-metrics.png)

<span data-ttu-id="9f1e8-139">Mer information finns i:</span><span class="sxs-lookup"><span data-stu-id="9f1e8-139">For more information, see:</span></span>

* [<span data-ttu-id="9f1e8-140">Övervakaren Web Apps i Azure App Service</span><span class="sxs-lookup"><span data-stu-id="9f1e8-140">Monitor Web Apps in Azure App Service</span></span>](web-sites-monitor.md)
* [<span data-ttu-id="9f1e8-141">Få varningsmeddelanden</span><span class="sxs-lookup"><span data-stu-id="9f1e8-141">Receive alert notifications</span></span>](../monitoring-and-diagnostics/insights-receive-alert-notifications.md)

#### <a name="monitor-web-endpoint-status"></a><span data-ttu-id="9f1e8-142">Övervaka status på slutpunkt</span><span class="sxs-lookup"><span data-stu-id="9f1e8-142">Monitor web endpoint status</span></span>
<span data-ttu-id="9f1e8-143">Om du kör ditt webbprogram i den **Standard** prisnivån, Web Apps kan du övervaka två slutpunkter från tre geografiska platser.</span><span class="sxs-lookup"><span data-stu-id="9f1e8-143">If you are running your web app in the **Standard** pricing tier, Web Apps lets you monitor two endpoints from three geographic locations.</span></span>

<span data-ttu-id="9f1e8-144">Slutpunktsövervakning konfigurerar webbtester från fördelade platser som testar svarstid och upptid för webbadresser.</span><span class="sxs-lookup"><span data-stu-id="9f1e8-144">Endpoint monitoring configures web tests from geo-distributed locations that test response time and uptime of web URLs.</span></span> <span data-ttu-id="9f1e8-145">Testet utför en HTTP GET-åtgärd på Webbadressen för att fastställa svarstid och drifttid från varje plats.</span><span class="sxs-lookup"><span data-stu-id="9f1e8-145">The test performs an HTTP GET operation on the web URL to determine the response time and uptime from each location.</span></span> <span data-ttu-id="9f1e8-146">Varje konfigurerad plats kör ett test var femte minut.</span><span class="sxs-lookup"><span data-stu-id="9f1e8-146">Each configured location runs a test every five minutes.</span></span>

<span data-ttu-id="9f1e8-147">Drifttid kontrolleras med hjälp av HTTP-svarskoder och svarstid mäts i millisekunder.</span><span class="sxs-lookup"><span data-stu-id="9f1e8-147">Uptime is monitored using HTTP response codes, and response time is measured in milliseconds.</span></span> <span data-ttu-id="9f1e8-148">En övervakning testet misslyckas om HTTP-svarskoden är större än eller lika med 400 eller om svaret tar mer än 30 sekunder.</span><span class="sxs-lookup"><span data-stu-id="9f1e8-148">A monitoring test fails if the HTTP response code is greater than or equal to 400 or if the response takes more than 30 seconds.</span></span> <span data-ttu-id="9f1e8-149">En slutpunkt anses vara tillgänglig om övervakning testerna lyckas från angivna platser.</span><span class="sxs-lookup"><span data-stu-id="9f1e8-149">An endpoint is considered available if its monitoring tests succeed from all the specified locations.</span></span>

<span data-ttu-id="9f1e8-150">Om du vill konfigurera, se [övervaka appar i Azure App Service](web-sites-monitor.md).</span><span class="sxs-lookup"><span data-stu-id="9f1e8-150">To set it up, see [Monitor apps in Azure App Service](web-sites-monitor.md).</span></span>

<span data-ttu-id="9f1e8-151">Se även [hålla Azure-webbplatser in plus Slutpunktsövervakning - med Stefan Schackow](https://channel9.msdn.com/Shows/Azure-Friday/Keeping-Azure-Web-Sites-up-plus-Endpoint-Monitoring-with-Stefan-Schackow) en video om slutpunktsövervakning.</span><span class="sxs-lookup"><span data-stu-id="9f1e8-151">Also, see [Keeping Azure Web Sites up plus Endpoint Monitoring - with Stefan Schackow](https://channel9.msdn.com/Shows/Azure-Friday/Keeping-Azure-Web-Sites-up-plus-Endpoint-Monitoring-with-Stefan-Schackow) for a video on endpoint monitoring.</span></span>

#### <a name="application-performance-monitoring-using-extensions"></a><span data-ttu-id="9f1e8-152">Övervakning av programprestanda med tillägg</span><span class="sxs-lookup"><span data-stu-id="9f1e8-152">Application performance monitoring using Extensions</span></span>
<span data-ttu-id="9f1e8-153">Du kan också övervaka programmets prestanda genom att använda *plats tillägg*.</span><span class="sxs-lookup"><span data-stu-id="9f1e8-153">You can also monitor your application performance by using *site extensions*.</span></span>

<span data-ttu-id="9f1e8-154">Varje App Service webbapp tillhandahåller en utökningsbar management-slutpunkt som du kan använda en kraftfull uppsättning av verktyg som distribueras som webbplatstillägg.</span><span class="sxs-lookup"><span data-stu-id="9f1e8-154">Each App Service web app provides an extensible management end point that allows you to use a powerful set of tools deployed as site extensions.</span></span> <span data-ttu-id="9f1e8-155">Tillägg är:</span><span class="sxs-lookup"><span data-stu-id="9f1e8-155">Extensions include:</span></span> 

- <span data-ttu-id="9f1e8-156">Källan kod redigerare som [Visual Studio Team Services](https://www.visualstudio.com/products/what-is-visual-studio-online-vs.aspx).</span><span class="sxs-lookup"><span data-stu-id="9f1e8-156">Source code editors like [Visual Studio Team Services](https://www.visualstudio.com/products/what-is-visual-studio-online-vs.aspx).</span></span> 
- <span data-ttu-id="9f1e8-157">Hanteringsverktyg för anslutna resurser, till exempel en MySQL-databas som är ansluten till ett webbprogram.</span><span class="sxs-lookup"><span data-stu-id="9f1e8-157">Management tools for connected resources such as a MySQL database connected to a web app.</span></span>

<span data-ttu-id="9f1e8-158">[Azure Application Insights](/services/application-insights/) och [New Relic](/marketplace/partners/newrelic/newrelic/) finns två webbplatstillägg som är tillgängliga för prestandaövervakning.</span><span class="sxs-lookup"><span data-stu-id="9f1e8-158">[Azure Application Insights](/services/application-insights/) and [New Relic](/marketplace/partners/newrelic/newrelic/) are two of the performance monitoring site extensions that are available.</span></span> <span data-ttu-id="9f1e8-159">För att använda New Relic måste installera du en agent vid körning.</span><span class="sxs-lookup"><span data-stu-id="9f1e8-159">To use New Relic, you install an agent at runtime.</span></span> <span data-ttu-id="9f1e8-160">Om du vill använda Azure Application Insights du återskapar din kod med en SDK och du kan också installera ett tillägg som ger åtkomst till ytterligare data.</span><span class="sxs-lookup"><span data-stu-id="9f1e8-160">To use Azure Application Insights, you rebuild your code with an SDK, and you can also install an extension that provides access to additional data.</span></span> <span data-ttu-id="9f1e8-161">SDK kan du skriva kod för att övervaka användningen och prestanda för din app i detalj.</span><span class="sxs-lookup"><span data-stu-id="9f1e8-161">The SDK lets you write code to monitor the usage and performance of your app in more detail.</span></span>

<span data-ttu-id="9f1e8-162">Om du vill använda Application Insights finns [övervaka prestanda i webbprogram](../application-insights/app-insights-web-monitor-performance.md).</span><span class="sxs-lookup"><span data-stu-id="9f1e8-162">To use Application Insights, see [Monitor performance in web applications](../application-insights/app-insights-web-monitor-performance.md).</span></span>

<span data-ttu-id="9f1e8-163">Om du vill använda New Relic finns [nya Relic prestanda programhantering på Azure](../store-new-relic-cloud-services-dotnet-application-performance-management.md).</span><span class="sxs-lookup"><span data-stu-id="9f1e8-163">To use New Relic, see [New Relic Application Performance Management on Azure](../store-new-relic-cloud-services-dotnet-application-performance-management.md).</span></span>

<a name="collect" />

### <a name="2-collect-data"></a><span data-ttu-id="9f1e8-164">2. Samla in data</span><span class="sxs-lookup"><span data-stu-id="9f1e8-164">2. Collect data</span></span>
<span data-ttu-id="9f1e8-165">Web Apps miljön innehåller diagnostikfunktion för att logga information från både webbservern och webbprogrammet.</span><span class="sxs-lookup"><span data-stu-id="9f1e8-165">The Web Apps environment provides diagnostic functionality for logging information from both the web server and the web application.</span></span> <span data-ttu-id="9f1e8-166">Informationen är indelade i web serverdiagnostik- och programdiagnostik.</span><span class="sxs-lookup"><span data-stu-id="9f1e8-166">The information is separated into web server diagnostics and application diagnostics.</span></span>

#### <a name="enable-web-server-diagnostics"></a><span data-ttu-id="9f1e8-167">Aktivera web serverdiagnostik</span><span class="sxs-lookup"><span data-stu-id="9f1e8-167">Enable web server diagnostics</span></span>
<span data-ttu-id="9f1e8-168">Du kan aktivera eller inaktivera följande typer av loggar:</span><span class="sxs-lookup"><span data-stu-id="9f1e8-168">You can enable or disable the following kinds of logs:</span></span>

* <span data-ttu-id="9f1e8-169">**Detaljerad felloggning** -information om felet för HTTP-statuskoder som indikerar att en (statuskod 400 eller högre).</span><span class="sxs-lookup"><span data-stu-id="9f1e8-169">**Detailed Error Logging** - Detailed error information for HTTP status codes that indicate a failure (status code 400 or greater).</span></span> <span data-ttu-id="9f1e8-170">Detta kan innehålla information som kan hjälpa dig att avgöra varför servern returnerade felkoden.</span><span class="sxs-lookup"><span data-stu-id="9f1e8-170">This may contain information that can help determine why the server returned the error code.</span></span>
* <span data-ttu-id="9f1e8-171">**Kunde inte begäran spårning** -detaljerad information om misslyckade förfrågningar, inklusive en spårning av IIS-komponenter som används för att bearbeta begäran och tidsåtgång i varje komponent.</span><span class="sxs-lookup"><span data-stu-id="9f1e8-171">**Failed Request Tracing** - Detailed information on failed requests, including a trace of the IIS components used to process the request and the time taken in each component.</span></span> <span data-ttu-id="9f1e8-172">Detta kan vara användbart om du vill förbättra app eller isolera vad som orsakar ett specifikt HTTP-fel.</span><span class="sxs-lookup"><span data-stu-id="9f1e8-172">This can be useful if you are attempting to improve web app performance or isolate what is causing a specific HTTP error.</span></span>
* <span data-ttu-id="9f1e8-173">**Web Server-loggning** -Information om HTTP-transaktioner med W3C utökat loggfilsformat.</span><span class="sxs-lookup"><span data-stu-id="9f1e8-173">**Web Server Logging** - Information about HTTP transactions using the W3C extended log file format.</span></span> <span data-ttu-id="9f1e8-174">Detta är användbart när du fastställer övergripande web app mätvärden, till exempel antalet förfrågningar som hanteras eller hur många förfrågningar som kommer från en specifik IP-adress.</span><span class="sxs-lookup"><span data-stu-id="9f1e8-174">This is useful when determining overall web app metrics, such as the number of requests handled or how many requests are from a specific IP address.</span></span>

#### <a name="enable-application-diagnostics"></a><span data-ttu-id="9f1e8-175">Aktivera programdiagnostik</span><span class="sxs-lookup"><span data-stu-id="9f1e8-175">Enable application diagnostics</span></span>
<span data-ttu-id="9f1e8-176">Det finns flera alternativ för att samla in prestandadata för programmet från Web Apps profil programmet live från Visual Studio eller ändra din programkod för att logga mer information och spår.</span><span class="sxs-lookup"><span data-stu-id="9f1e8-176">There are several options to collect application performance data from Web Apps, profile your application live from Visual Studio, or modify your application code to log more information and traces.</span></span> <span data-ttu-id="9f1e8-177">Du kan välja alternativ baserat på verktyg du hur mycket åtkomst till programmet och vad du har sett från övervakningen.</span><span class="sxs-lookup"><span data-stu-id="9f1e8-177">You can choose the options based on how much access you have to the application and what you observed from the monitoring tools.</span></span>

##### <a name="use-application-insights-profiler"></a><span data-ttu-id="9f1e8-178">Använda Application Insights Profiler</span><span class="sxs-lookup"><span data-stu-id="9f1e8-178">Use Application Insights Profiler</span></span>
<span data-ttu-id="9f1e8-179">Du kan aktivera Application Insights profileraren att börja samla in spårningar detaljerad prestanda.</span><span class="sxs-lookup"><span data-stu-id="9f1e8-179">You can enable the Application Insights Profiler to start capturing detailed performance traces.</span></span> <span data-ttu-id="9f1e8-180">Du kan komma åt spårningar fångas upp till fem dagar sedan när du behöver undersöka problem har inträffat i förflutna.</span><span class="sxs-lookup"><span data-stu-id="9f1e8-180">You can access traces captured up to five days ago when you need to investigate problems happened in the past.</span></span> <span data-ttu-id="9f1e8-181">Du kan välja det här alternativet så länge som du har åtkomst till webbappen Application Insights-resurs på Azure-portalen.</span><span class="sxs-lookup"><span data-stu-id="9f1e8-181">You can choose this option as long as you have access to the web app's Application Insights resource on Azure portal.</span></span>

<span data-ttu-id="9f1e8-182">Application Insights Profiler innehåller statistik om svarstiden för varje webbtjänst-anrop och spår som visar vilka kodrad orsakas långsamt svar.</span><span class="sxs-lookup"><span data-stu-id="9f1e8-182">Application Insights Profiler provides statistics on response time for each web call and traces that indicates which line of code caused the slow responses.</span></span> <span data-ttu-id="9f1e8-183">Ibland App Service-appen är långsam eftersom vissa kod inte skrivs i en performant sätt.</span><span class="sxs-lookup"><span data-stu-id="9f1e8-183">Sometimes the App Service app is slow because certain code is not written in a performant way.</span></span> <span data-ttu-id="9f1e8-184">Exempel är sekventiella kod som kan köras i parallella och oönskat databasen Lås contentions.</span><span class="sxs-lookup"><span data-stu-id="9f1e8-184">Examples include sequential code that can be run in parallel and undesired database lock contentions.</span></span> <span data-ttu-id="9f1e8-185">Om du tar bort dessa flaskhalsar i koden ökar appens prestanda, men de är svåra att upptäcka utan att ställa in avancerade spårningar och loggar.</span><span class="sxs-lookup"><span data-stu-id="9f1e8-185">Removing these bottlenecks in the code increases the app's performance, but they are hard to detect without setting up elaborate traces and logs.</span></span> <span data-ttu-id="9f1e8-186">Spårningssessioner samlas in av Application Insights Profiler kan identifiera rader med kod som långsammare programmet och lösa denna utmaning för Apptjänst-appar.</span><span class="sxs-lookup"><span data-stu-id="9f1e8-186">The traces collected by Application Insights Profiler helps identifying the lines of code that slows down the application and overcome this challenge for App Service apps.</span></span>

 <span data-ttu-id="9f1e8-187">Mer information finns i [Profiling live Azure-webbappar med Application Insights](../application-insights/app-insights-profiler.md).</span><span class="sxs-lookup"><span data-stu-id="9f1e8-187">For more information, see [Profiling live Azure web apps with Application Insights](../application-insights/app-insights-profiler.md).</span></span>

##### <a name="use-remote-profiling"></a><span data-ttu-id="9f1e8-188">Använd Remote profilering</span><span class="sxs-lookup"><span data-stu-id="9f1e8-188">Use Remote Profiling</span></span>
<span data-ttu-id="9f1e8-189">I Azure App Service Web Apps API Apps och WebJobs kan vara från en fjärrdator i listan.</span><span class="sxs-lookup"><span data-stu-id="9f1e8-189">In Azure App Service, Web Apps, API Apps, and WebJobs can be remotely profiled.</span></span> <span data-ttu-id="9f1e8-190">Välj det här alternativet om du har åtkomst till webbresursen för appen och du vet hur du återskapa problemet eller om du vet exakt tidsintervallet prestandaproblem händer.</span><span class="sxs-lookup"><span data-stu-id="9f1e8-190">Choose this option if you have access to the web app resource and you know how to reproduce the issue, or if you know the exact time interval the performance issue happens.</span></span>

<span data-ttu-id="9f1e8-191">Remote Profiling är användbart om CPU-användningen för processen är hög och processen körs långsammare än förväntat eller svarstiden för HTTP-begäranden är högre än normalt, du via fjärranslutning kan profilen processen och få anrop-stackar CPU samplingsfrekvensen för att analysera processen aktivitet och koden varm sökvägar.</span><span class="sxs-lookup"><span data-stu-id="9f1e8-191">Remote Profiling is useful if the CPU usage of the process is high and your process is running slower than expected, or the latency of HTTP requests are higher than normal, you can remotely profile your process and get the CPU sampling call stacks to analyze the process activity and code hot paths.</span></span>

<span data-ttu-id="9f1e8-192">Mer information finns i [Remote profilering stöd i Azure App Service](https://azure.microsoft.com/blog/remote-profiling-support-in-azure-app-service).</span><span class="sxs-lookup"><span data-stu-id="9f1e8-192">For more information, see [Remote Profiling support in Azure App Service](https://azure.microsoft.com/blog/remote-profiling-support-in-azure-app-service).</span></span>

##### <a name="set-up-diagnostic-traces-manually"></a><span data-ttu-id="9f1e8-193">Ställ in diagnostikspår manuellt</span><span class="sxs-lookup"><span data-stu-id="9f1e8-193">Set up diagnostic traces manually</span></span>
<span data-ttu-id="9f1e8-194">Om du har åtkomst till web-programmets källkod kan du samla in information som produceras av ett webbprogram i Application diagnostics.</span><span class="sxs-lookup"><span data-stu-id="9f1e8-194">If you have access to the web application source code, Application diagnostics enables you to capture information produced by a web application.</span></span> <span data-ttu-id="9f1e8-195">ASP.NET-program kan använda den `System.Diagnostics.Trace` klassen för att logga information till diagnostik programloggen.</span><span class="sxs-lookup"><span data-stu-id="9f1e8-195">ASP.NET applications can use the `System.Diagnostics.Trace` class to log information to the application diagnostics log.</span></span> <span data-ttu-id="9f1e8-196">Men måste du ändra koden och distribuera ditt program.</span><span class="sxs-lookup"><span data-stu-id="9f1e8-196">However, you need to change the code and redeploy your application.</span></span> <span data-ttu-id="9f1e8-197">Den här metoden rekommenderas om din app körs på en testmiljö.</span><span class="sxs-lookup"><span data-stu-id="9f1e8-197">This method is recommended if your app is running on a testing environment.</span></span>

<span data-ttu-id="9f1e8-198">Detaljerade instruktioner om hur du konfigurerar ditt program för loggning finns [aktivera diagnostikloggning för web apps i Azure App Service](web-sites-enable-diagnostic-log.md).</span><span class="sxs-lookup"><span data-stu-id="9f1e8-198">For detailed instructions on how to configure your application for logging, see [Enable diagnostics logging for web apps in Azure App Service](web-sites-enable-diagnostic-log.md).</span></span>

#### <a name="use-the-azure-app-service-support-portal"></a><span data-ttu-id="9f1e8-199">Använda portalen för Azure App Service-stöd</span><span class="sxs-lookup"><span data-stu-id="9f1e8-199">Use the Azure App Service support portal</span></span>
<span data-ttu-id="9f1e8-200">Web Apps ger dig möjlighet att felsöka problem med ditt webbprogram genom att titta på http-loggar, händelseloggar, process Dumpar och mycket mer.</span><span class="sxs-lookup"><span data-stu-id="9f1e8-200">Web Apps provides you with the ability to troubleshoot issues related to your web app by looking at HTTP logs, event logs, process dumps, and more.</span></span> <span data-ttu-id="9f1e8-201">Du kan komma åt den här informationen med hjälp av vår portal Support vid **http://&lt;appens namn >.scm.azurewebsites.net/Support**</span><span class="sxs-lookup"><span data-stu-id="9f1e8-201">You can access all this information using our Support portal at **http://&lt;your app name>.scm.azurewebsites.net/Support**</span></span>

<span data-ttu-id="9f1e8-202">Portal för Azure App Service-stöd ger tre separata flikar som stöd för ett vanligt scenario för felsökning tre steg:</span><span class="sxs-lookup"><span data-stu-id="9f1e8-202">The Azure App Service support portal provides you with three separate tabs to support the three steps of a common troubleshooting scenario:</span></span>

1. <span data-ttu-id="9f1e8-203">Se aktuella beteende</span><span class="sxs-lookup"><span data-stu-id="9f1e8-203">Observe current behavior</span></span>
2. <span data-ttu-id="9f1e8-204">Analysera genom att samla in diagnostikinformation och köra de inbyggda analyzers</span><span class="sxs-lookup"><span data-stu-id="9f1e8-204">Analyze by collecting diagnostics information and running the built-in analyzers</span></span>
3. <span data-ttu-id="9f1e8-205">Minimera</span><span class="sxs-lookup"><span data-stu-id="9f1e8-205">Mitigate</span></span>

<span data-ttu-id="9f1e8-206">Om problemet sker just nu, klickar du på **analysera** > **diagnostik** > **diagnostisera nu** för att skapa en diagnostisk session du, som samlar in HTTP loggar, loggar i Loggboken, minne Dumpar, PHP felloggarna och PHP bearbeta rapporten.</span><span class="sxs-lookup"><span data-stu-id="9f1e8-206">If the issue is happening right now, click **Analyze** > **Diagnostics** > **Diagnose Now** to create a diagnostic session for you, which collects HTTP logs, event viewer logs, memory dumps, PHP error logs, and PHP process report.</span></span>

<span data-ttu-id="9f1e8-207">När data samlas in, support portal körs en analys på data och ger dig en HTML-rapport.</span><span class="sxs-lookup"><span data-stu-id="9f1e8-207">Once the data is collected, the support portal runs an analysis on the data and provides you with an HTML report.</span></span>

<span data-ttu-id="9f1e8-208">Om du vill hämta data, som standard lagras den i mappen D:\home\data\DaaS.</span><span class="sxs-lookup"><span data-stu-id="9f1e8-208">In case you want to download the data, by default, it would be stored in the D:\home\data\DaaS folder.</span></span>

<span data-ttu-id="9f1e8-209">Mer information om support-portal Azure App Service finns [nya uppdateringar till stöd för plats-tillägg för Azure Websites](https://azure.microsoft.com/blog/new-updates-to-support-site-extension-for-azure-websites).</span><span class="sxs-lookup"><span data-stu-id="9f1e8-209">For more information on the Azure App Service support portal, see [New Updates to Support Site Extension for Azure Websites](https://azure.microsoft.com/blog/new-updates-to-support-site-extension-for-azure-websites).</span></span>

#### <a name="use-the-kudu-debug-console"></a><span data-ttu-id="9f1e8-210">Använd Kudu-Felsökningskonsolen</span><span class="sxs-lookup"><span data-stu-id="9f1e8-210">Use the Kudu Debug Console</span></span>
<span data-ttu-id="9f1e8-211">Web Apps levereras med en Felsökningskonsolen som du kan använda för felsökning, utforska, ladda upp filer, samt JSON-slutpunkter för att hämta information om din miljö.</span><span class="sxs-lookup"><span data-stu-id="9f1e8-211">Web Apps comes with a debug console that you can use for debugging, exploring, uploading files, as well as JSON endpoints for getting information about your environment.</span></span> <span data-ttu-id="9f1e8-212">Den här konsolen kallas den *Kudu konsolen* eller *SCM instrumentpanelen* för ditt webbprogram.</span><span class="sxs-lookup"><span data-stu-id="9f1e8-212">This console is called the *Kudu Console* or the *SCM Dashboard* for your web app.</span></span>

<span data-ttu-id="9f1e8-213">Du kan komma åt den här instrumentpanelen genom att gå till länken **https://&lt;appens namn >.scm.azurewebsites.net/**.</span><span class="sxs-lookup"><span data-stu-id="9f1e8-213">You can access this dashboard by going to the link **https://&lt;Your app name>.scm.azurewebsites.net/**.</span></span>

<span data-ttu-id="9f1e8-214">Några av de saker som Kudu tillhandahåller är:</span><span class="sxs-lookup"><span data-stu-id="9f1e8-214">Some of the things that Kudu provides are:</span></span>

* <span data-ttu-id="9f1e8-215">inställningar för ditt program</span><span class="sxs-lookup"><span data-stu-id="9f1e8-215">environment settings for your application</span></span>
* <span data-ttu-id="9f1e8-216">loggström</span><span class="sxs-lookup"><span data-stu-id="9f1e8-216">log stream</span></span>
* <span data-ttu-id="9f1e8-217">diagnostiska dump</span><span class="sxs-lookup"><span data-stu-id="9f1e8-217">diagnostic dump</span></span>
* <span data-ttu-id="9f1e8-218">Felsöka konsolen där du kan köra Powershell-cmdlets och grundläggande DOS-kommandon.</span><span class="sxs-lookup"><span data-stu-id="9f1e8-218">debug console in which you can run Powershell cmdlets and basic DOS commands.</span></span>

<span data-ttu-id="9f1e8-219">En annan användbar funktion i Kudu är att, om ditt program är att första chans undantag, kan du använda Kudu och verktyget SysInternals Procdump att skapa minne Dumpar.</span><span class="sxs-lookup"><span data-stu-id="9f1e8-219">Another useful feature of Kudu is that, in case your application is throwing first-chance exceptions, you can use Kudu and the SysInternals tool Procdump to create memory dumps.</span></span> <span data-ttu-id="9f1e8-220">Dessa minnesdumpar är ögonblicksbilder av processen och ofta kan hjälpa dig att felsöka mer komplicerade problem med ditt webbprogram.</span><span class="sxs-lookup"><span data-stu-id="9f1e8-220">These memory dumps are snapshots of the process and can often help you troubleshoot more complicated issues with your web app.</span></span>

<span data-ttu-id="9f1e8-221">Mer information om funktionerna i Kudu finns [Azure webbplatser Team Services-verktyg som du bör känna till om](https://azure.microsoft.com/blog/windows-azure-websites-online-tools-you-should-know-about/).</span><span class="sxs-lookup"><span data-stu-id="9f1e8-221">For more information on features available in Kudu, see [Azure Websites Team Services tools you should know about](https://azure.microsoft.com/blog/windows-azure-websites-online-tools-you-should-know-about/).</span></span>

<a name="mitigate" />

### <a name="3-mitigate-the-issue"></a><span data-ttu-id="9f1e8-222">3. Åtgärda problemet</span><span class="sxs-lookup"><span data-stu-id="9f1e8-222">3. Mitigate the issue</span></span>
#### <a name="scale-the-web-app"></a><span data-ttu-id="9f1e8-223">Skala webbprogrammet</span><span class="sxs-lookup"><span data-stu-id="9f1e8-223">Scale the web app</span></span>
<span data-ttu-id="9f1e8-224">I Azure App Service kan för bättre prestanda och genomflöde, du justera skalan där du kör programmet.</span><span class="sxs-lookup"><span data-stu-id="9f1e8-224">In Azure App Service, for increased performance and throughput,  you can adjust the scale at which you are running your application.</span></span> <span data-ttu-id="9f1e8-225">Skala upp ett webbprogram omfattar två relaterade åtgärder: ändra din programtjänstplan till en högre prisnivå och konfigurera vissa inställningar när du har växlat till högre prisnivå.</span><span class="sxs-lookup"><span data-stu-id="9f1e8-225">Scaling up a web app involves two related actions: changing your App Service plan to a higher pricing tier, and configuring certain settings after you have switched to the higher pricing tier.</span></span>

<span data-ttu-id="9f1e8-226">Läs mer om att skala [skala en webbapp i Azure App Service](web-sites-scale.md).</span><span class="sxs-lookup"><span data-stu-id="9f1e8-226">For more information on scaling, see [Scale a web app in Azure App Service](web-sites-scale.md).</span></span>

<span data-ttu-id="9f1e8-227">Dessutom kan du välja att köra programmet på mer än en instans.</span><span class="sxs-lookup"><span data-stu-id="9f1e8-227">Additionally, you can choose to run your application on more than one instance.</span></span> <span data-ttu-id="9f1e8-228">Skala ut inte bara ger mer bearbetningskapacitet, men ger dig även vissa delar av feltolerans.</span><span class="sxs-lookup"><span data-stu-id="9f1e8-228">Scaling out not only provides you with more processing capability, but also gives you some amount of fault tolerance.</span></span> <span data-ttu-id="9f1e8-229">Andra instanser fortsätter att betjäna förfrågningar om processen kraschar på en instans.</span><span class="sxs-lookup"><span data-stu-id="9f1e8-229">If the process goes down on one instance, the other instances continue to serve requests.</span></span>

<span data-ttu-id="9f1e8-230">Du kan ange skalning till manuell eller automatisk.</span><span class="sxs-lookup"><span data-stu-id="9f1e8-230">You can set the scaling to be Manual or Automatic.</span></span>

#### <a name="use-autoheal"></a><span data-ttu-id="9f1e8-231">Använd säkert att AutoHeal</span><span class="sxs-lookup"><span data-stu-id="9f1e8-231">Use AutoHeal</span></span>
<span data-ttu-id="9f1e8-232">Säkert att AutoHeal återanvänder arbetsprocessen för din app baserat på dina inställningar (till exempel konfigurationsändringar begäranden, minnesbaserade gränser eller den tid som krävs för att utföra en begäran).</span><span class="sxs-lookup"><span data-stu-id="9f1e8-232">AutoHeal recycles the worker process for your app based on settings you choose (like configuration changes, requests, memory-based limits, or the time needed to execute a request).</span></span> <span data-ttu-id="9f1e8-233">I de flesta fall, är omarbetning av processen det snabbaste sättet att återställa från ett problem.</span><span class="sxs-lookup"><span data-stu-id="9f1e8-233">Most of the time, recycle the process is the fastest way to recover from a problem.</span></span> <span data-ttu-id="9f1e8-234">Även om du kan alltid starta om webbprogrammet från direkt i Azure-portalen, fungerar säkert att AutoHeal automatiskt åt dig.</span><span class="sxs-lookup"><span data-stu-id="9f1e8-234">Though you can always restart the web app from directly within the Azure portal, AutoHeal does it automatically for you.</span></span> <span data-ttu-id="9f1e8-235">Allt du behöver göra är att lägga till vissa utlösare i rot-web.config för ditt webbprogram.</span><span class="sxs-lookup"><span data-stu-id="9f1e8-235">All you need to do is add some triggers in the root web.config for your web app.</span></span> <span data-ttu-id="9f1e8-236">De här inställningarna fungerar på samma sätt, även om programmet inte är en .net-app.</span><span class="sxs-lookup"><span data-stu-id="9f1e8-236">These settings would work in the same way even if your application is not a .Net app.</span></span>

<span data-ttu-id="9f1e8-237">Mer information finns i [automatisk återställning Azure webbplatser](https://azure.microsoft.com/blog/auto-healing-windows-azure-web-sites/).</span><span class="sxs-lookup"><span data-stu-id="9f1e8-237">For more information, see [Auto-Healing Azure Web Sites](https://azure.microsoft.com/blog/auto-healing-windows-azure-web-sites/).</span></span>

#### <a name="restart-the-web-app"></a><span data-ttu-id="9f1e8-238">Starta om webbprogrammet</span><span class="sxs-lookup"><span data-stu-id="9f1e8-238">Restart the web app</span></span>
<span data-ttu-id="9f1e8-239">Starta om är ofta det enklaste sättet att återställa engångsproblem.</span><span class="sxs-lookup"><span data-stu-id="9f1e8-239">Restarting is often the simplest way to recover from one-time issues.</span></span> <span data-ttu-id="9f1e8-240">På den [Azure-portalen](https://portal.azure.com/), på bladet för ditt webbprogram har du alternativ för att stoppa eller starta om din app.</span><span class="sxs-lookup"><span data-stu-id="9f1e8-240">On the [Azure portal](https://portal.azure.com/), on your web app’s blade, you have the options to stop or restart your app.</span></span>

 ![Starta om webbprogram för att lösa prestandaproblem](./media/app-service-web-troubleshoot-performance-degradation/2-restart.png)

<span data-ttu-id="9f1e8-242">Du kan också hantera ditt webbprogram med hjälp av Azure Powershell.</span><span class="sxs-lookup"><span data-stu-id="9f1e8-242">You can also manage your web app using Azure Powershell.</span></span> <span data-ttu-id="9f1e8-243">Mer information finns i [Använda Azure PowerShell med Azure Resource Manager](../powershell-azure-resource-manager.md).</span><span class="sxs-lookup"><span data-stu-id="9f1e8-243">For more information, see [Using Azure PowerShell with Azure Resource Manager](../powershell-azure-resource-manager.md).</span></span>

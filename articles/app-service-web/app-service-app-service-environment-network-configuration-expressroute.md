---
title: "aaaNetwork konfigurationsinformation för att arbeta med Express Route"
description: "Konfigurationsinformation för nätverket för att köra Apptjänstmiljöer i virtuella nätverk anslutet tooan ExpressRoute-kretsen."
services: app-service
documentationcenter: 
author: stefsch
manager: nirma
editor: 
ms.assetid: 34b49178-2595-4d32-9b41-110c96dde6bf
ms.service: app-service
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 10/14/2016
ms.author: stefsch
ms.openlocfilehash: 85bbc45cfed619485957ee2a898aa0a7604173cb
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: sv-SE
ms.lasthandoff: 10/06/2017
---
# <a name="network-configuration-details-for-app-service-environments-with-expressroute"></a><span data-ttu-id="ffce9-103">Information om nätverkskonfiguration för App Service-miljöer med ExpressRoute</span><span class="sxs-lookup"><span data-stu-id="ffce9-103">Network Configuration Details for App Service Environments with ExpressRoute</span></span>
## <a name="overview"></a><span data-ttu-id="ffce9-104">Översikt</span><span class="sxs-lookup"><span data-stu-id="ffce9-104">Overview</span></span>
<span data-ttu-id="ffce9-105">Kunder kan ansluta en [Azure ExpressRoute] [ ExpressRoute] krets tootheir virtuell nätverksinfrastruktur, vilket utöka sina lokala nätverk tooAzure.</span><span class="sxs-lookup"><span data-stu-id="ffce9-105">Customers can connect an [Azure ExpressRoute][ExpressRoute] circuit tootheir virtual network infrastructure, thus extending their on-premises network tooAzure.</span></span>  <span data-ttu-id="ffce9-106">En Apptjänst-miljö kan skapas i ett undernät för det här [virtuellt nätverk] [ virtualnetwork] infrastruktur.</span><span class="sxs-lookup"><span data-stu-id="ffce9-106">An App Service Environment can  be created in a subnet of this [virtual network][virtualnetwork] infrastructure.</span></span>  <span data-ttu-id="ffce9-107">Appar som körs på hello Apptjänst-miljö kan upprätta säkra anslutningar tooback slutpunkt resurser tillgängliga om de endast med hello ExpressRoute-anslutning.</span><span class="sxs-lookup"><span data-stu-id="ffce9-107">Apps running on hello App Service Environment can then establish secure connections tooback-end resources accessible only over hello ExpressRoute connection.</span></span>  

<span data-ttu-id="ffce9-108">En Apptjänst-miljö kan skapas i **antingen** ett virtuellt nätverk i Azure Resource Manager **eller** klassisk distribution modellen virtuella nätverk.</span><span class="sxs-lookup"><span data-stu-id="ffce9-108">An App Service Environment can be created in **either** an Azure Resource Manager virtual network, **or** a classic deployment model virtual network.</span></span>  <span data-ttu-id="ffce9-109">Med en ändring görs i juni 2016 distribueras ASEs nu också till virtuella nätverk som använder offentliga-adressintervall eller RFC1918 adressutrymmen (d.v.s. privata adresser).</span><span class="sxs-lookup"><span data-stu-id="ffce9-109">With a recent change made in June 2016, ASEs can also now be deployed into virtual networks that use either public address ranges, or RFC1918 address spaces (i.e. private addresses).</span></span> 

[!INCLUDE [app-service-web-to-api-and-mobile](../../includes/app-service-web-to-api-and-mobile.md)]

## <a name="required-network-connectivity"></a><span data-ttu-id="ffce9-110">Nödvändiga nätverksanslutning</span><span class="sxs-lookup"><span data-stu-id="ffce9-110">Required Network Connectivity</span></span>
<span data-ttu-id="ffce9-111">Det finns anslutningskrav för Apptjänstmiljöer som inte kanske ursprungligen uppfyllas i ett virtuellt nätverk anslutet tooan ExpressRoute.</span><span class="sxs-lookup"><span data-stu-id="ffce9-111">There are network connectivity requirements for App Service Environments that may not be initially met in a virtual network connected tooan ExpressRoute.</span></span>  <span data-ttu-id="ffce9-112">Apptjänstmiljöer kräver alla hello följande i ordning toofunction korrekt:</span><span class="sxs-lookup"><span data-stu-id="ffce9-112">App Service Environments require all of hello following in order toofunction properly:</span></span>

* <span data-ttu-id="ffce9-113">Utgående anslutning tooAzure lagring nätverksslutpunkter över hela världen på båda portarna 80 och 443.</span><span class="sxs-lookup"><span data-stu-id="ffce9-113">Outbound network connectivity tooAzure Storage endpoints worldwide on both ports 80 and 443.</span></span>  <span data-ttu-id="ffce9-114">Detta inkluderar slutpunkter finns i hello samma region som hello Apptjänst-miljö, samt lagring slutpunkter finns i **andra** Azure-regioner.</span><span class="sxs-lookup"><span data-stu-id="ffce9-114">This includes endpoints located in hello same region as hello App Service Environment, as well as storage endpoints located in **other** Azure regions.</span></span>  <span data-ttu-id="ffce9-115">Azure Storage-slutpunkter lösa under hello följande DNS-domäner: *table.core.windows.net*, *blob.core.windows.net*, *queue.core.windows.net* och *file.core.windows.net*.</span><span class="sxs-lookup"><span data-stu-id="ffce9-115">Azure Storage endpoints resolve under hello following DNS domains: *table.core.windows.net*, *blob.core.windows.net*, *queue.core.windows.net* and *file.core.windows.net*.</span></span>  
* <span data-ttu-id="ffce9-116">Utgående network connectivity toohello filer för Azure-tjänsten på port 445.</span><span class="sxs-lookup"><span data-stu-id="ffce9-116">Outbound network connectivity toohello Azure Files service on port 445.</span></span>
* <span data-ttu-id="ffce9-117">Utgående anslutning tooSql DB nätverksslutpunkter finns i hello samma region som hello Apptjänst-miljö.</span><span class="sxs-lookup"><span data-stu-id="ffce9-117">Outbound network connectivity tooSql DB endpoints located in hello same region as hello App Service Environment.</span></span>  <span data-ttu-id="ffce9-118">SQL DB slutpunkter lösa under hello följande domän: *database.windows.net*.</span><span class="sxs-lookup"><span data-stu-id="ffce9-118">Sql DB endpoints resolve under hello following domain:  *database.windows.net*.</span></span>  <span data-ttu-id="ffce9-119">Detta kräver att öppna åtkomst tooports 1433, 11000 11999 och 14000 14999.</span><span class="sxs-lookup"><span data-stu-id="ffce9-119">This requires opening access tooports 1433, 11000-11999 and 14000-14999.</span></span>  <span data-ttu-id="ffce9-120">Mer information finns [i den här artikeln på Sql Database V12 portar används](../sql-database/sql-database-develop-direct-route-ports-adonet-v12.md).</span><span class="sxs-lookup"><span data-stu-id="ffce9-120">For more details see [this article on Sql Database V12 port usage](../sql-database/sql-database-develop-direct-route-ports-adonet-v12.md).</span></span>
* <span data-ttu-id="ffce9-121">Utgående anslutning toohello Azure management plan nätverksslutpunkter (både ASM och ARM-slutpunkter).</span><span class="sxs-lookup"><span data-stu-id="ffce9-121">Outbound network connectivity toohello Azure management plane endpoints (both ASM and ARM endpoints).</span></span>  <span data-ttu-id="ffce9-122">Detta inkluderar utgående anslutning tooboth *management.core.windows.net* och *management.azure.com*.</span><span class="sxs-lookup"><span data-stu-id="ffce9-122">This includes outbound connectivity tooboth *management.core.windows.net* and *management.azure.com*.</span></span> 
* <span data-ttu-id="ffce9-123">Utgående nätverksanslutningar för*ocsp.msocsp.com*, *mscrl.microsoft.com* och *crl.microsoft.com*.  Detta är nödvändiga toosupport SSL-funktionalitet.</span><span class="sxs-lookup"><span data-stu-id="ffce9-123">Outbound network connectivity too*ocsp.msocsp.com*, *mscrl.microsoft.com* and *crl.microsoft.com*.  This is needed toosupport SSL functionality.</span></span>
* <span data-ttu-id="ffce9-124">hello DNS-konfiguration för hello virtuella nätverket måste kunna lösa alla hello slutpunkter och domäner som anges i hello tidigare punkter.</span><span class="sxs-lookup"><span data-stu-id="ffce9-124">hello DNS configuration for hello virtual network must be capable of resolving all of hello endpoints and domains mentioned in hello earlier points.</span></span>  <span data-ttu-id="ffce9-125">Om dessa slutpunkter inte kan matchas Apptjänstmiljö skapa försök misslyckas och befintliga Apptjänstmiljöer kommer att markeras som ohälsosam.</span><span class="sxs-lookup"><span data-stu-id="ffce9-125">If these endpoints cannot be resolved, App Service Environment creation attempts will fail, and existing App Service Environments will be marked as unhealthy.</span></span>
* <span data-ttu-id="ffce9-126">Utgående åtkomst på port 53 krävs för kommunikation med DNS-servrar.</span><span class="sxs-lookup"><span data-stu-id="ffce9-126">Outbound access on port 53 is required for communication with DNS servers.</span></span>
* <span data-ttu-id="ffce9-127">Om en anpassad DNS-server finns på Hej andra änden av en VPN-gateway, hello DNS-server måste kunna nås från hello undernät som innehåller hello Apptjänst-miljö.</span><span class="sxs-lookup"><span data-stu-id="ffce9-127">If a custom DNS server exists on hello other end of a VPN gateway, hello DNS server must be reachable from hello subnet containing hello App Service Environment.</span></span> 
* <span data-ttu-id="ffce9-128">hello utgående sökvägen kan inte skickas genom interna företagets proxyservrar eller kan den vara force tunneldata tooon lokalt.</span><span class="sxs-lookup"><span data-stu-id="ffce9-128">hello outbound network path cannot travel through internal corporate proxies, nor can it be force tunneled tooon-premises.</span></span>  <span data-ttu-id="ffce9-129">Om du gör det ändringar hello effektiva NAT-adress för utgående nätverkstrafik från hello Apptjänst-miljö.</span><span class="sxs-lookup"><span data-stu-id="ffce9-129">Doing so changes hello effective NAT address of outbound network traffic from hello App Service Environment.</span></span>  <span data-ttu-id="ffce9-130">Ändrar hello NAT-adress för en Apptjänstmiljö utgående nätverkstrafik kan anslutningen fel toomany hello slutpunkter som anges ovan.</span><span class="sxs-lookup"><span data-stu-id="ffce9-130">Changing hello NAT address of an App Service Environment's outbound network traffic will cause connectivity failures toomany of hello endpoints listed above.</span></span>  <span data-ttu-id="ffce9-131">Detta resulterar i misslyckade försök för skapande av Apptjänst-miljö, samt tidigare felfri Apptjänstmiljöer markeras som ohälsosam.</span><span class="sxs-lookup"><span data-stu-id="ffce9-131">This results in failed App Service Environment creation attempts, as well as previously healthy App Service Environments being marked as unhealthy.</span></span>  
* <span data-ttu-id="ffce9-132">Inkommande nätverksportar åtkomst toorequired för Apptjänstmiljöer får enligt beskrivningen i det här [artikel][requiredports].</span><span class="sxs-lookup"><span data-stu-id="ffce9-132">Inbound network access toorequired ports for App Service Environments must be allowed as described in this [article][requiredports].</span></span>

<span data-ttu-id="ffce9-133">hello DNS-krav kan uppfyllas genom att säkerställa att en giltig DNS-infrastruktur konfigurerad och underhålls för hello virtuellt nätverk.</span><span class="sxs-lookup"><span data-stu-id="ffce9-133">hello DNS requirements can be met by ensuring a valid DNS infrastructure is configured and maintained for hello virtual network.</span></span>  <span data-ttu-id="ffce9-134">Om DNS-konfiguration ändras när en Apptjänst-miljö har skapats i någon orsak hello, kan utvecklare tvinga en Apptjänstmiljö toopick hello nya DNS-konfiguration.</span><span class="sxs-lookup"><span data-stu-id="ffce9-134">If for any reason hello DNS configuration is changed after an App Service Environment has been created, developers can force an App Service Environment toopick up hello new DNS configuration.</span></span>  <span data-ttu-id="ffce9-135">Utlöser en rullande miljö omstart med hjälp av hello ”Restart” finns hello överst på bladet hantering av hello Apptjänstmiljö i hello [Azure-portalen] [ NewPortal] kommer hello miljö toopick hello nya DNS-konfiguration.</span><span class="sxs-lookup"><span data-stu-id="ffce9-135">Triggering a rolling environment reboot using hello "Restart" icon located at hello top of hello App Service Environment management blade in hello [Azure portal][NewPortal] will cause hello environment toopick up hello new DNS configuration.</span></span>

<span data-ttu-id="ffce9-136">hello inkommande network access kraven kan uppfyllas genom att konfigurera en [nätverkssäkerhetsgruppen] [ NetworkSecurityGroups] på hello Apptjänstmiljös undernät tooallow hello krävs åtkomst som beskrivs i den här [artikel][requiredports].</span><span class="sxs-lookup"><span data-stu-id="ffce9-136">hello inbound network access requirements can be met by configuring a [network security group][NetworkSecurityGroups] on hello App Service Environment's subnet tooallow hello required access as described in this [article][requiredports].</span></span>

## <a name="enabling-outbound-network-connectivity-for-an-app-service-environment"></a><span data-ttu-id="ffce9-137">Aktivera utgående nätverksanslutning för en Apptjänst-miljö</span><span class="sxs-lookup"><span data-stu-id="ffce9-137">Enabling Outbound Network Connectivity for an App Service Environment</span></span>
<span data-ttu-id="ffce9-138">Som standard annonserar en nyligen skapade ExpressRoute-krets en standardväg som tillåter utgående Internet-anslutning.</span><span class="sxs-lookup"><span data-stu-id="ffce9-138">By default, a newly created ExpressRoute circuit advertises a default route that allows outbound Internet connectivity.</span></span>  <span data-ttu-id="ffce9-139">Med den här konfigurationen för en Apptjänstmiljö att kan tooconnect tooother Azure-slutpunkter.</span><span class="sxs-lookup"><span data-stu-id="ffce9-139">With this configuration an App Service Environment will be able tooconnect tooother Azure endpoints.</span></span>

<span data-ttu-id="ffce9-140">Men en gemensam konfiguration av customer är toodefine sina egna standardvägen (0.0.0.0/0) som tvingar utgående Internet tooinstead trafikflöde lokalt.</span><span class="sxs-lookup"><span data-stu-id="ffce9-140">However a common customer configuration is toodefine their own default route (0.0.0.0/0) which forces outbound Internet traffic tooinstead flow on-premises.</span></span>  <span data-ttu-id="ffce9-141">Den här trafikflöde bryts utan undantag Apptjänstmiljöer eftersom hello utgående trafik är antingen blockerade lokalt eller NAT d tooan okänt uppsättning adresser som inte längre att fungera med olika Azure-slutpunkter.</span><span class="sxs-lookup"><span data-stu-id="ffce9-141">This traffic flow invariably breaks App Service Environments because hello outbound traffic is either blocked on-premises, or NAT'd tooan unrecognizable set of addresses that no longer work with various Azure endpoints.</span></span>

<span data-ttu-id="ffce9-142">hello-lösning är toodefine (minst) användardefinierade vägar (udr: er) i hello undernät som innehåller hello Apptjänst-miljö.</span><span class="sxs-lookup"><span data-stu-id="ffce9-142">hello solution is toodefine one (or more) user defined routes (UDRs) on hello subnet that contains hello App Service Environment.</span></span>  <span data-ttu-id="ffce9-143">En UDR definierar undernät-specifika vägar som ska användas i stället för hello standardväg.</span><span class="sxs-lookup"><span data-stu-id="ffce9-143">A UDR defines subnet-specific routes that will be honored instead of hello default route.</span></span>

<span data-ttu-id="ffce9-144">Om möjligt bör toouse hello följande konfiguration:</span><span class="sxs-lookup"><span data-stu-id="ffce9-144">If possible, it is recommended toouse hello following configuration:</span></span>

* <span data-ttu-id="ffce9-145">Hej ExpressRoute configuration annonserar 0.0.0.0/0 och som standard kraft tunnlar all utgående trafik lokalt.</span><span class="sxs-lookup"><span data-stu-id="ffce9-145">hello ExpressRoute configuration advertises 0.0.0.0/0 and by default force tunnels all outbound traffic on-premises.</span></span>
* <span data-ttu-id="ffce9-146">Hej UDR tillämpas toohello undernät som innehåller hello Apptjänstmiljö definierar 0.0.0.0/0 med ett nexthop-typ för Internet (ett exempel på detta finns längre ned i den här artikeln).</span><span class="sxs-lookup"><span data-stu-id="ffce9-146">hello UDR applied toohello subnet containing hello App Service Environment defines 0.0.0.0/0 with a next hop type of Internet (an example of this is farther down in this article).</span></span>

<span data-ttu-id="ffce9-147">hello är kombinerade effekten av dessa steg att hello undernätverksnivå UDR företräde framför hello ExpressRoute Tvingad tunneltrafik tillse utgående Internetåtkomst från hello Apptjänst-miljö.</span><span class="sxs-lookup"><span data-stu-id="ffce9-147">hello combined effect of these steps is that hello subnet level UDR will take precedence over hello ExpressRoute forced tunneling, thus ensuring outbound Internet access from hello App Service Environment.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="ffce9-148">Hej vägar som definierats i en UDR **måste** vara tillräckligt specifikt för åsidosätter över alla vägar annonseras av hello ExpressRoute konfiguration.</span><span class="sxs-lookup"><span data-stu-id="ffce9-148">hello routes defined in a UDR **must** be specific enough too take precedence over any routes advertised by hello ExpressRoute configuration.</span></span>  <span data-ttu-id="ffce9-149">hello exemplet nedan använder hello bred 0.0.0.0/0 adressintervallet och som sådan kan potentiellt av misstag åsidosättas av flödet annonser med hjälp av mer specifika adressintervall.</span><span class="sxs-lookup"><span data-stu-id="ffce9-149">hello example below uses hello broad 0.0.0.0/0 address range, and as such can potentially be accidentally overridden by route advertisements using more specific address ranges.</span></span>
> 
> <span data-ttu-id="ffce9-150">Apptjänstmiljöer stöds inte med ExpressRoute-konfigurationer som **annonserar vägar från hello offentlig peering sökväg toohello privat peering sökväg mellan**.</span><span class="sxs-lookup"><span data-stu-id="ffce9-150">App Service Environments are not supported with ExpressRoute configurations that **cross-advertise routes from hello public peering path toohello private peering path**.</span></span>  <span data-ttu-id="ffce9-151">ExpressRoute-konfigurationer som har konfigurerats, offentlig peering får vägannonser från Microsoft för ett stort antal Microsoft Azure IP-adressintervall.</span><span class="sxs-lookup"><span data-stu-id="ffce9-151">ExpressRoute configurations that have public peering configured, will receive route advertisements from Microsoft for a large set of Microsoft Azure IP address ranges.</span></span>  <span data-ttu-id="ffce9-152">Om dessa adressintervall mellan annonseras på hello privat peering sökväg, är hello slutresultatet att alla utgående paket från hello Apptjänstmiljös undernät kommer vara force tunneldata tooa kundens lokala nätverkets infrastruktur.</span><span class="sxs-lookup"><span data-stu-id="ffce9-152">If these address ranges are cross-advertised on hello private peering path, hello end result is that all outbound network packets from hello App Service Environment's subnet will be force-tunneled tooa customer's on-premises network infrastructure.</span></span>  <span data-ttu-id="ffce9-153">Det här flödet i nätverk stöds för närvarande inte med Apptjänstmiljöer.</span><span class="sxs-lookup"><span data-stu-id="ffce9-153">This network flow is currently not supported with App Service Environments.</span></span>  <span data-ttu-id="ffce9-154">En lösning toothis problemet är toostop mellan reklam vägar från hello offentlig peering sökväg toohello privat peering sökväg.</span><span class="sxs-lookup"><span data-stu-id="ffce9-154">One solution toothis problem is toostop cross-advertising routes from hello public peering path toohello private peering path.</span></span>
> 
> 

<span data-ttu-id="ffce9-155">Bakgrundsinformation om användardefinierade vägar är tillgänglig i det här [översikt][UDROverview].</span><span class="sxs-lookup"><span data-stu-id="ffce9-155">Background information on user defined routes is available in this [overview][UDROverview].</span></span>  

<span data-ttu-id="ffce9-156">Information om hur du skapar och konfigurerar användardefinierade vägar är tillgänglig i det här [hur tooGuide][UDRHowTo].</span><span class="sxs-lookup"><span data-stu-id="ffce9-156">Details on creating and configuring user defined routes is available in this [How tooGuide][UDRHowTo].</span></span>

## <a name="example-udr-configuration-for-an-app-service-environment"></a><span data-ttu-id="ffce9-157">Exempel på UDR konfiguration för en Apptjänst-miljö</span><span class="sxs-lookup"><span data-stu-id="ffce9-157">Example UDR Configuration for an App Service Environment</span></span>
<span data-ttu-id="ffce9-158">**Förutsättningar**</span><span class="sxs-lookup"><span data-stu-id="ffce9-158">**Pre-requisites**</span></span>

1. <span data-ttu-id="ffce9-159">Installera Azure Powershell från hello [Azure hämtar sidan] [ AzureDownloads] (funktionsdokumentationen juni 2015 eller senare).</span><span class="sxs-lookup"><span data-stu-id="ffce9-159">Install Azure Powershell from hello [Azure Downloads page][AzureDownloads] (dated June 2015 or later).</span></span>  <span data-ttu-id="ffce9-160">Under ”kommandoradsverktyg” finns det en länk för ”installera” under ”Windows Powershell” som ska installera hello senaste Powershell-cmdlets.</span><span class="sxs-lookup"><span data-stu-id="ffce9-160">Under "Command-line tools" there is an "Install" link under "Windows Powershell" that will install hello latest Powershell cmdlets.</span></span>
2. <span data-ttu-id="ffce9-161">Vi rekommenderar att du skapat ett unikt undernät för exklusiv användning av en Apptjänst-miljö.</span><span class="sxs-lookup"><span data-stu-id="ffce9-161">It is recommended that a unique subnet is created for exclusive use by an App Service Environment.</span></span>  <span data-ttu-id="ffce9-162">Detta säkerställer att hello udr: er används toohello undernätet öppnas endast utgående trafik för hello Apptjänst-miljö.</span><span class="sxs-lookup"><span data-stu-id="ffce9-162">This ensures that hello UDRs applied toohello subnet will only open outbound traffic for hello App Service Environment.</span></span>
3. <span data-ttu-id="ffce9-163">**Viktiga**: Distribuera inte hello Apptjänstmiljö tills **när** hello följande konfigurationssteg följs.</span><span class="sxs-lookup"><span data-stu-id="ffce9-163">**Important**:  do not deploy hello App Service Environment until **after** hello following configuration steps are followed.</span></span>  <span data-ttu-id="ffce9-164">Detta säkerställer att utgående nätverksanslutningen är tillgänglig innan du försöker toodeploy en Apptjänst-miljö.</span><span class="sxs-lookup"><span data-stu-id="ffce9-164">This ensures that outbound network connectivity is available before attempting toodeploy an App Service Environment.</span></span>

<span data-ttu-id="ffce9-165">**Steg 1: Skapa en namngiven routningstabell**</span><span class="sxs-lookup"><span data-stu-id="ffce9-165">**Step 1:  Create a named route table**</span></span>

<span data-ttu-id="ffce9-166">hello skapar följande kodavsnitt en routningstabell som kallas ”DirectInternetRouteTable” i hello West US Azure-region:</span><span class="sxs-lookup"><span data-stu-id="ffce9-166">hello following snippet creates a route table called "DirectInternetRouteTable" in hello West US Azure region:</span></span>

    New-AzureRouteTable -Name 'DirectInternetRouteTable' -Location uswest

<span data-ttu-id="ffce9-167">**Steg 2: Skapa en eller flera vägar i routningstabellen för hello**</span><span class="sxs-lookup"><span data-stu-id="ffce9-167">**Step 2:  Create one or more routes in hello route table**</span></span>

<span data-ttu-id="ffce9-168">Du behöver tooadd en eller flera vägar toohello routningstabellen i ordning tooenable utgående Internetåtkomst.</span><span class="sxs-lookup"><span data-stu-id="ffce9-168">You will need tooadd one or more routes toohello route table in order tooenable outbound Internet access.</span></span>  

<span data-ttu-id="ffce9-169">hello rekommenderat tillvägagångssätt för att konfigurera utgående åtkomst toohello Internet är toodefine en väg för 0.0.0.0/0 som visas nedan.</span><span class="sxs-lookup"><span data-stu-id="ffce9-169">hello recommended approach for configuring outbound access toohello Internet is toodefine a route for 0.0.0.0/0 as shown below.</span></span>

    Get-AzureRouteTable -Name 'DirectInternetRouteTable' | Set-AzureRoute -RouteName 'Direct Internet Range 0' -AddressPrefix 0.0.0.0/0 -NextHopType Internet

<span data-ttu-id="ffce9-170">Kom ihåg att 0.0.0.0/0 är en bred adressintervallet och därmed åsidosätts av mer specifika adressintervall annonseras av hello ExpressRoute.</span><span class="sxs-lookup"><span data-stu-id="ffce9-170">Remember that 0.0.0.0/0 is a broad address range, and as such will be overridden by more specific address ranges advertised by hello ExpressRoute.</span></span>  <span data-ttu-id="ffce9-171">toore-iterera hello tidigare rekommendation, en UDR med en 0.0.0.0/0 väg bör användas tillsammans med en konfiguration för ExressRoute som bara annonserar 0.0.0.0/0 samt.</span><span class="sxs-lookup"><span data-stu-id="ffce9-171">toore-iterate hello earlier recommendation, a UDR with a 0.0.0.0/0 route should be used in conjunction with an ExressRoute configuration that only advertises 0.0.0.0/0 as well.</span></span> 

<span data-ttu-id="ffce9-172">Alternativt kan hämta du en omfattande och uppdaterad lista över CIDR-intervallen som används av Azure.</span><span class="sxs-lookup"><span data-stu-id="ffce9-172">As an alternative, you can download a comprehensive and updated list of CIDR ranges in use by Azure.</span></span>  <span data-ttu-id="ffce9-173">hello Xml-filen som innehåller alla hello Azure IP-adressintervall är tillgängliga från hello [Microsoft Download Center][DownloadCenterAddressRanges].</span><span class="sxs-lookup"><span data-stu-id="ffce9-173">hello Xml file containing all of hello Azure IP address ranges is available from hello [Microsoft Download Center][DownloadCenterAddressRanges].</span></span>  

<span data-ttu-id="ffce9-174">Observera dock att dessa intervall ändras med tiden, vilket kräver manuell periodiska uppdateringar toohello användardefinierade vägar tookeep synkroniserade.  Dessutom eftersom det finns en standard som övre gräns för 100 vägar i en enda UDR du behöver för ”sammanfattas” hello Azure IP-adress intervall toofit inom hello 100 vägen måste och Tänk på att UDR användardefinierade vägar toobe mer specifik än hello vägarna som annonseras av din ExpressRoute.</span><span class="sxs-lookup"><span data-stu-id="ffce9-174">Note though that these ranges change over time, thus necessitating periodic manual updates toohello user defined routes tookeep in sync.  Also, since there is a default upper limit of 100 routes in a single UDR, you will need too"summarize" hello Azure IP address ranges toofit within hello 100 route limit, keeping in mind that UDR defined routes need toobe more specific than hello routes advertised by your ExpressRoute.</span></span>  

<span data-ttu-id="ffce9-175">**Steg 3: Koppla hello flödet tabell toohello undernät som innehåller hello Apptjänstmiljö**</span><span class="sxs-lookup"><span data-stu-id="ffce9-175">**Step 3:  Associate hello route table toohello subnet containing hello App Service Environment**</span></span>

<span data-ttu-id="ffce9-176">hello sista konfigurationssteget är tooassociate hello flödet tabell toohello undernät där hello Apptjänstmiljö ska distribueras.</span><span class="sxs-lookup"><span data-stu-id="ffce9-176">hello last  configuration step is tooassociate hello route table toohello subnet where hello App Service Environment will be deployed.</span></span>  <span data-ttu-id="ffce9-177">hello associerar följande kommando hello ”DirectInternetRouteTable” toohello ”ASESubnet” som slutligen innehåller en Apptjänst-miljö.</span><span class="sxs-lookup"><span data-stu-id="ffce9-177">hello following command associates hello "DirectInternetRouteTable" toohello "ASESubnet" that will eventually contain an App Service Environment.</span></span>

    Set-AzureSubnetRouteTable -VirtualNetworkName 'YourVirtualNetworkNameHere' -SubnetName 'ASESubnet' -RouteTableName 'DirectInternetRouteTable'


<span data-ttu-id="ffce9-178">**Steg 4: Sista stegen**</span><span class="sxs-lookup"><span data-stu-id="ffce9-178">**Step 4:  Final Steps**</span></span>

<span data-ttu-id="ffce9-179">När hello routningstabellen är bundna toohello undernät, rekommenderas toofirst test och bekräfta hello avsedd effekt.</span><span class="sxs-lookup"><span data-stu-id="ffce9-179">Once hello route table is bound toohello subnet, it is recommended toofirst test and confirm hello intended effect.</span></span>  <span data-ttu-id="ffce9-180">Till exempel distribuera en virtuell dator i hello undernät och kontrollera att:</span><span class="sxs-lookup"><span data-stu-id="ffce9-180">For example, deploy a virtual machine into hello subnet and confirm that:</span></span>

* <span data-ttu-id="ffce9-181">Utgående trafik tooboth Azure och Azure-slutpunkter nämnts tidigare i den här artikeln är **inte** flödar ned hello ExpressRoute-kretsen.</span><span class="sxs-lookup"><span data-stu-id="ffce9-181">Outbound traffic tooboth Azure and non-Azure endpoints mentioned earlier in this article is **not** flowing down hello ExpressRoute circuit.</span></span>  <span data-ttu-id="ffce9-182">Det är mycket viktigt tooverify problemet eftersom om utgående trafik från hello undernät är fortfarande tvingas tunneldata lokalt, skapa en Apptjänst-miljön kommer alltid att misslyckas.</span><span class="sxs-lookup"><span data-stu-id="ffce9-182">It is very important tooverify this behavior, since if outbound traffic from hello subnet is still being forced tunneled on-premises, App Service Environment creation will always fail.</span></span> 
* <span data-ttu-id="ffce9-183">DNS-sökning för hello slutpunkter som nämnts tidigare alla löser korrekt.</span><span class="sxs-lookup"><span data-stu-id="ffce9-183">DNS lookups for hello endpoints mentioned earlier are all resolving properly.</span></span> 

<span data-ttu-id="ffce9-184">När hello senare steg bekräftas måste toodelete hello virtuell dator eftersom hello undernät toobe ”tomt” på hello tid hello Apptjänst-miljö skapas.</span><span class="sxs-lookup"><span data-stu-id="ffce9-184">Once hello above steps are confirmed, you will need toodelete hello virtual machine because hello subnet needs toobe "empty" at hello time hello App Service Environment is created.</span></span>

<span data-ttu-id="ffce9-185">Fortsätt sedan med att skapa en Apptjänst-miljö.</span><span class="sxs-lookup"><span data-stu-id="ffce9-185">Then proceed with creating an App Service Environment!</span></span>

## <a name="getting-started"></a><span data-ttu-id="ffce9-186">Komma igång</span><span class="sxs-lookup"><span data-stu-id="ffce9-186">Getting started</span></span>
<span data-ttu-id="ffce9-187">Alla artiklar och hur-att datorns för Apptjänstmiljöer finns tillgängliga i hello [viktigt för Programtjänstmiljöer](../app-service/app-service-app-service-environments-readme.md).</span><span class="sxs-lookup"><span data-stu-id="ffce9-187">All articles and How-To's for App Service Environments are available in hello [README for Application Service Environments](../app-service/app-service-app-service-environments-readme.md).</span></span>

<span data-ttu-id="ffce9-188">tooget igång med Apptjänstmiljöer, se [introduktion tooApp-miljö][IntroToAppServiceEnvironment]</span><span class="sxs-lookup"><span data-stu-id="ffce9-188">tooget started with App Service Environments, see [Introduction tooApp Service Environment][IntroToAppServiceEnvironment]</span></span>

<span data-ttu-id="ffce9-189">Mer information om hello Azure Apptjänst-plattformen finns [Azure App Service][AzureAppService].</span><span class="sxs-lookup"><span data-stu-id="ffce9-189">For more information about hello Azure App Service platform, see [Azure App Service][AzureAppService].</span></span>

<!-- LINKS -->
[virtualnetwork]: http://azure.microsoft.com/services/virtual-network/
[ExpressRoute]: http://azure.microsoft.com/services/expressroute/
[requiredports]: http://azure.microsoft.com/documentation/articles/app-service-app-service-environment-control-inbound-traffic/
[NetworkSecurityGroups]: http://azure.microsoft.com/documentation/articles/virtual-networks-nsg/
[UDROverview]: http://azure.microsoft.com/documentation/articles/virtual-networks-udr-overview/
[UDRHowTo]: http://azure.microsoft.com/documentation/articles/virtual-networks-udr-how-to/
[HowToCreateAnAppServiceEnvironment]: http://azure.microsoft.com/documentation/articles/app-service-web-how-to-create-an-app-service-environment/
[AzureDownloads]: http://azure.microsoft.com/en-us/downloads/ 
[DownloadCenterAddressRanges]: http://www.microsoft.com/download/details.aspx?id=41653  
[NetworkSecurityGroups]: https://azure.microsoft.com/documentation/articles/virtual-networks-nsg/
[AzureAppService]: http://azure.microsoft.com/documentation/articles/app-service-value-prop-what-is/
[IntroToAppServiceEnvironment]:  http://azure.microsoft.com/documentation/articles/app-service-app-service-environment-intro/
[NewPortal]:  https://portal.azure.com


<!-- IMAGES -->

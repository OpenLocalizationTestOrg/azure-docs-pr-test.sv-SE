---
title: "aaaBuild en IoT-lösning med hjälp av Stream Analytics | Microsoft Docs"
description: "Komma igång-kursen för hello Stream Analytics IoT-lösningen på ett scenario med vaktkur"
keywords: "IOT-lösningen, fönstrets funktioner"
documentationcenter: 
services: stream-analytics
author: samacha
manager: jhubbard
editor: cgronlun
ms.assetid: a473ea0a-3eaa-4e5b-aaa1-fec7e9069f20
ms.service: stream-analytics
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: data-services
ms.date: 03/28/2017
ms.author: samacha
ms.openlocfilehash: e37fc5b56c4ffc4a2d7b820afe0c17631e577ea0
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: sv-SE
ms.lasthandoff: 10/06/2017
---
# <a name="build-an-iot-solution-by-using-stream-analytics"></a><span data-ttu-id="130b7-104">Skapa en IoT-lösning med hjälp av Stream Analytics</span><span class="sxs-lookup"><span data-stu-id="130b7-104">Build an IoT solution by using Stream Analytics</span></span>
## <a name="introduction"></a><span data-ttu-id="130b7-105">Introduktion</span><span class="sxs-lookup"><span data-stu-id="130b7-105">Introduction</span></span>
<span data-ttu-id="130b7-106">I den här kursen får du lära dig hur toouse Azure Stream Analytics tooget realtidsinsikter från dina data.</span><span class="sxs-lookup"><span data-stu-id="130b7-106">In this tutorial, you will learn how toouse Azure Stream Analytics tooget real-time insights from your data.</span></span> <span data-ttu-id="130b7-107">Utvecklare kan enkelt kombinera dataströmmar, till exempel klicka på dataströmmar, loggar och händelser som genereras av enheten med historisk poster eller referens data tooderive affärsinsikter.</span><span class="sxs-lookup"><span data-stu-id="130b7-107">Developers can easily combine streams of data, such as click-streams, logs, and device-generated events, with historical records or reference data tooderive business insights.</span></span> <span data-ttu-id="130b7-108">Som en helt hanterad, realtid dataströmmen beräkning tjänst som finns i Microsoft Azure tillhandahåller Azure Stream Analytics inbyggd återhämtning, låg latens och skalbarhet tooget du upp och körs i minuter.</span><span class="sxs-lookup"><span data-stu-id="130b7-108">As a fully managed, real-time stream computation service that's hosted in Microsoft Azure, Azure Stream Analytics provides built-in resiliency, low latency, and scalability tooget you up and running in minutes.</span></span>

<span data-ttu-id="130b7-109">När du har slutfört den här självstudiekursen kommer du att kunna:</span><span class="sxs-lookup"><span data-stu-id="130b7-109">After completing this tutorial, you will be able to:</span></span>

* <span data-ttu-id="130b7-110">Bekanta dig med hello Azure Stream Analytics-portalen.</span><span class="sxs-lookup"><span data-stu-id="130b7-110">Familiarize yourself with hello Azure Stream Analytics portal.</span></span>
* <span data-ttu-id="130b7-111">Konfigurera och distribuera ett direktuppspelningsjobb.</span><span class="sxs-lookup"><span data-stu-id="130b7-111">Configure and deploy a streaming job.</span></span>
* <span data-ttu-id="130b7-112">Tydligt verkliga problem och lösa dem med hjälp av hello Stream Analytics-frågespråket.</span><span class="sxs-lookup"><span data-stu-id="130b7-112">Articulate real-world problems and solve them by using hello Stream Analytics query language.</span></span>
* <span data-ttu-id="130b7-113">Utveckla strömning lösningar för kunderna genom att använda Stream Analytics med förtroende.</span><span class="sxs-lookup"><span data-stu-id="130b7-113">Develop streaming solutions for your customers by using Stream Analytics with confidence.</span></span>
* <span data-ttu-id="130b7-114">Använd hello övervakning och loggning upplevelse tootroubleshoot problem.</span><span class="sxs-lookup"><span data-stu-id="130b7-114">Use hello monitoring and logging experience tootroubleshoot issues.</span></span>

## <a name="prerequisites"></a><span data-ttu-id="130b7-115">Krav</span><span class="sxs-lookup"><span data-stu-id="130b7-115">Prerequisites</span></span>
<span data-ttu-id="130b7-116">Du kommer måste hello följande förutsättningar toocomplete den här kursen:</span><span class="sxs-lookup"><span data-stu-id="130b7-116">You will need hello following prerequisites toocomplete this tutorial:</span></span>

* <span data-ttu-id="130b7-117">hello senaste versionen av [Azure PowerShell](/powershell/azure/overview)</span><span class="sxs-lookup"><span data-stu-id="130b7-117">hello latest version of [Azure PowerShell](/powershell/azure/overview)</span></span>
* <span data-ttu-id="130b7-118">Visual Studio 2017 2015 eller hello ledigt [Visual Studio Community](https://www.visualstudio.com/products/visual-studio-community-vs.aspx)</span><span class="sxs-lookup"><span data-stu-id="130b7-118">Visual Studio 2017, 2015, or hello free [Visual Studio Community](https://www.visualstudio.com/products/visual-studio-community-vs.aspx)</span></span>
* <span data-ttu-id="130b7-119">En [Azure-prenumeration](https://azure.microsoft.com/pricing/free-trial/)</span><span class="sxs-lookup"><span data-stu-id="130b7-119">An [Azure subscription](https://azure.microsoft.com/pricing/free-trial/)</span></span>
* <span data-ttu-id="130b7-120">Administratörsbehörighet på datorn hello</span><span class="sxs-lookup"><span data-stu-id="130b7-120">Administrative privileges on hello computer</span></span>
* <span data-ttu-id="130b7-121">Hämtning av [TollApp.zip](https://github.com/Azure/azure-stream-analytics/blob/master/Samples/TollApp/TollApp.zip) från hello Microsoft Download Center</span><span class="sxs-lookup"><span data-stu-id="130b7-121">Download of [TollApp.zip](https://github.com/Azure/azure-stream-analytics/blob/master/Samples/TollApp/TollApp.zip) from hello Microsoft Download Center</span></span>
* <span data-ttu-id="130b7-122">Valfritt: Källkod för hello TollApp händelse generator i [GitHub](https://aka.ms/azure-stream-analytics-toll-source)</span><span class="sxs-lookup"><span data-stu-id="130b7-122">Optional: Source code for hello TollApp event generator in [GitHub](https://aka.ms/azure-stream-analytics-toll-source)</span></span>

## <a name="scenario-introduction-hello-toll"></a><span data-ttu-id="130b7-123">Scenariot introduktion: ”Hello, avgift”!</span><span class="sxs-lookup"><span data-stu-id="130b7-123">Scenario introduction: “Hello, Toll!”</span></span>
<span data-ttu-id="130b7-124">En avgift station är en gemensam företeelse.</span><span class="sxs-lookup"><span data-stu-id="130b7-124">A toll station is a common phenomenon.</span></span> <span data-ttu-id="130b7-125">Du hittar dem i många utsättas bryggor och tunnlar mellan hello world.</span><span class="sxs-lookup"><span data-stu-id="130b7-125">You encounter them on many expressways, bridges, and tunnels across hello world.</span></span> <span data-ttu-id="130b7-126">Varje station avgift har flera avgift kabiner.</span><span class="sxs-lookup"><span data-stu-id="130b7-126">Each toll station has multiple toll booths.</span></span> <span data-ttu-id="130b7-127">Vid manuell kabiner stoppa toopay hello avgift tooan attendant.</span><span class="sxs-lookup"><span data-stu-id="130b7-127">At manual booths, you stop toopay hello toll tooan attendant.</span></span> <span data-ttu-id="130b7-128">Vid automatisk kabiner söker en sensor ovanpå varje monter RFID-kort som är anbringad toohello vindrutan av din fordon som du skickar hello avgift monter.</span><span class="sxs-lookup"><span data-stu-id="130b7-128">At automated booths, a sensor on top of each booth scans an RFID card that's affixed toohello windshield of your vehicle as you pass hello toll booth.</span></span> <span data-ttu-id="130b7-129">Det är enkelt toovisualize hello övergången genom dessa avgift stationer som en händelse dataström som intressanta åtgärder kan utföras.</span><span class="sxs-lookup"><span data-stu-id="130b7-129">It is easy toovisualize hello passage of vehicles through these toll stations as an event stream over which interesting operations can be performed.</span></span>

![Bild av bilar på avgift kabiner](media/stream-analytics-build-an-iot-solution-using-stream-analytics/image1.jpg)

## <a name="incoming-data"></a><span data-ttu-id="130b7-131">Inkommande data</span><span class="sxs-lookup"><span data-stu-id="130b7-131">Incoming data</span></span>
<span data-ttu-id="130b7-132">Den här kursen fungerar med två dataströmmar.</span><span class="sxs-lookup"><span data-stu-id="130b7-132">This tutorial works with two streams of data.</span></span> <span data-ttu-id="130b7-133">Sensorer installerade hello ingång och avsluta hello avgift stationer producera hello första dataströmmen.</span><span class="sxs-lookup"><span data-stu-id="130b7-133">Sensors installed in hello entrance and exit of hello toll stations produce hello first stream.</span></span> <span data-ttu-id="130b7-134">hello är andra en statisk sökning datamängd som har vehicle registreringsdata.</span><span class="sxs-lookup"><span data-stu-id="130b7-134">hello second stream is a static lookup dataset that has vehicle registration data.</span></span>

### <a name="entry-data-stream"></a><span data-ttu-id="130b7-135">Posten dataström</span><span class="sxs-lookup"><span data-stu-id="130b7-135">Entry data stream</span></span>
<span data-ttu-id="130b7-136">dataströmmen för hello post innehåller information om bilar då de anträder avgift stationer.</span><span class="sxs-lookup"><span data-stu-id="130b7-136">hello entry data stream contains information about cars as they enter toll stations.</span></span>

| <span data-ttu-id="130b7-137">TollID</span><span class="sxs-lookup"><span data-stu-id="130b7-137">TollID</span></span> | <span data-ttu-id="130b7-138">EntryTime</span><span class="sxs-lookup"><span data-stu-id="130b7-138">EntryTime</span></span> | <span data-ttu-id="130b7-139">LicensePlate</span><span class="sxs-lookup"><span data-stu-id="130b7-139">LicensePlate</span></span> | <span data-ttu-id="130b7-140">Status</span><span class="sxs-lookup"><span data-stu-id="130b7-140">State</span></span> | <span data-ttu-id="130b7-141">Kontrollera</span><span class="sxs-lookup"><span data-stu-id="130b7-141">Make</span></span> | <span data-ttu-id="130b7-142">Modellen</span><span class="sxs-lookup"><span data-stu-id="130b7-142">Model</span></span> | <span data-ttu-id="130b7-143">VehicleType</span><span class="sxs-lookup"><span data-stu-id="130b7-143">VehicleType</span></span> | <span data-ttu-id="130b7-144">VehicleWeight</span><span class="sxs-lookup"><span data-stu-id="130b7-144">VehicleWeight</span></span> | <span data-ttu-id="130b7-145">Avgift</span><span class="sxs-lookup"><span data-stu-id="130b7-145">Toll</span></span> | <span data-ttu-id="130b7-146">Tagga</span><span class="sxs-lookup"><span data-stu-id="130b7-146">Tag</span></span> |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| <span data-ttu-id="130b7-147">1</span><span class="sxs-lookup"><span data-stu-id="130b7-147">1</span></span> |<span data-ttu-id="130b7-148">2014-09-10 12:01:00.000</span><span class="sxs-lookup"><span data-stu-id="130b7-148">2014-09-10 12:01:00.000</span></span> |<span data-ttu-id="130b7-149">JNB 7001</span><span class="sxs-lookup"><span data-stu-id="130b7-149">JNB 7001</span></span> |<span data-ttu-id="130b7-150">NY</span><span class="sxs-lookup"><span data-stu-id="130b7-150">NY</span></span> |<span data-ttu-id="130b7-151">Honda</span><span class="sxs-lookup"><span data-stu-id="130b7-151">Honda</span></span> |<span data-ttu-id="130b7-152">CRV</span><span class="sxs-lookup"><span data-stu-id="130b7-152">CRV</span></span> |<span data-ttu-id="130b7-153">1</span><span class="sxs-lookup"><span data-stu-id="130b7-153">1</span></span> |<span data-ttu-id="130b7-154">0</span><span class="sxs-lookup"><span data-stu-id="130b7-154">0</span></span> |<span data-ttu-id="130b7-155">7</span><span class="sxs-lookup"><span data-stu-id="130b7-155">7</span></span> | |
| <span data-ttu-id="130b7-156">1</span><span class="sxs-lookup"><span data-stu-id="130b7-156">1</span></span> |<span data-ttu-id="130b7-157">2014-09-10 12:02:00.000</span><span class="sxs-lookup"><span data-stu-id="130b7-157">2014-09-10 12:02:00.000</span></span> |<span data-ttu-id="130b7-158">YXZ 1001</span><span class="sxs-lookup"><span data-stu-id="130b7-158">YXZ 1001</span></span> |<span data-ttu-id="130b7-159">NY</span><span class="sxs-lookup"><span data-stu-id="130b7-159">NY</span></span> |<span data-ttu-id="130b7-160">Toyota</span><span class="sxs-lookup"><span data-stu-id="130b7-160">Toyota</span></span> |<span data-ttu-id="130b7-161">Camry</span><span class="sxs-lookup"><span data-stu-id="130b7-161">Camry</span></span> |<span data-ttu-id="130b7-162">1</span><span class="sxs-lookup"><span data-stu-id="130b7-162">1</span></span> |<span data-ttu-id="130b7-163">0</span><span class="sxs-lookup"><span data-stu-id="130b7-163">0</span></span> |<span data-ttu-id="130b7-164">4</span><span class="sxs-lookup"><span data-stu-id="130b7-164">4</span></span> |<span data-ttu-id="130b7-165">123456789</span><span class="sxs-lookup"><span data-stu-id="130b7-165">123456789</span></span> |
| <span data-ttu-id="130b7-166">3</span><span class="sxs-lookup"><span data-stu-id="130b7-166">3</span></span> |<span data-ttu-id="130b7-167">2014-09-10 12:02:00.000</span><span class="sxs-lookup"><span data-stu-id="130b7-167">2014-09-10 12:02:00.000</span></span> |<span data-ttu-id="130b7-168">ABC 1004</span><span class="sxs-lookup"><span data-stu-id="130b7-168">ABC 1004</span></span> |<span data-ttu-id="130b7-169">DATAFÄLT</span><span class="sxs-lookup"><span data-stu-id="130b7-169">CT</span></span> |<span data-ttu-id="130b7-170">Ford</span><span class="sxs-lookup"><span data-stu-id="130b7-170">Ford</span></span> |<span data-ttu-id="130b7-171">Taurus</span><span class="sxs-lookup"><span data-stu-id="130b7-171">Taurus</span></span> |<span data-ttu-id="130b7-172">1</span><span class="sxs-lookup"><span data-stu-id="130b7-172">1</span></span> |<span data-ttu-id="130b7-173">0</span><span class="sxs-lookup"><span data-stu-id="130b7-173">0</span></span> |<span data-ttu-id="130b7-174">5</span><span class="sxs-lookup"><span data-stu-id="130b7-174">5</span></span> |<span data-ttu-id="130b7-175">456789123</span><span class="sxs-lookup"><span data-stu-id="130b7-175">456789123</span></span> |
| <span data-ttu-id="130b7-176">2</span><span class="sxs-lookup"><span data-stu-id="130b7-176">2</span></span> |<span data-ttu-id="130b7-177">2014-09-10 12:03:00.000</span><span class="sxs-lookup"><span data-stu-id="130b7-177">2014-09-10 12:03:00.000</span></span> |<span data-ttu-id="130b7-178">XYZ 1003</span><span class="sxs-lookup"><span data-stu-id="130b7-178">XYZ 1003</span></span> |<span data-ttu-id="130b7-179">DATAFÄLT</span><span class="sxs-lookup"><span data-stu-id="130b7-179">CT</span></span> |<span data-ttu-id="130b7-180">Toyota</span><span class="sxs-lookup"><span data-stu-id="130b7-180">Toyota</span></span> |<span data-ttu-id="130b7-181">Corolla</span><span class="sxs-lookup"><span data-stu-id="130b7-181">Corolla</span></span> |<span data-ttu-id="130b7-182">1</span><span class="sxs-lookup"><span data-stu-id="130b7-182">1</span></span> |<span data-ttu-id="130b7-183">0</span><span class="sxs-lookup"><span data-stu-id="130b7-183">0</span></span> |<span data-ttu-id="130b7-184">4</span><span class="sxs-lookup"><span data-stu-id="130b7-184">4</span></span> | |
| <span data-ttu-id="130b7-185">1</span><span class="sxs-lookup"><span data-stu-id="130b7-185">1</span></span> |<span data-ttu-id="130b7-186">2014-09-10 12:03:00.000</span><span class="sxs-lookup"><span data-stu-id="130b7-186">2014-09-10 12:03:00.000</span></span> |<span data-ttu-id="130b7-187">BNJ 1007</span><span class="sxs-lookup"><span data-stu-id="130b7-187">BNJ 1007</span></span> |<span data-ttu-id="130b7-188">NY</span><span class="sxs-lookup"><span data-stu-id="130b7-188">NY</span></span> |<span data-ttu-id="130b7-189">Honda</span><span class="sxs-lookup"><span data-stu-id="130b7-189">Honda</span></span> |<span data-ttu-id="130b7-190">CRV</span><span class="sxs-lookup"><span data-stu-id="130b7-190">CRV</span></span> |<span data-ttu-id="130b7-191">1</span><span class="sxs-lookup"><span data-stu-id="130b7-191">1</span></span> |<span data-ttu-id="130b7-192">0</span><span class="sxs-lookup"><span data-stu-id="130b7-192">0</span></span> |<span data-ttu-id="130b7-193">5</span><span class="sxs-lookup"><span data-stu-id="130b7-193">5</span></span> |<span data-ttu-id="130b7-194">789123456</span><span class="sxs-lookup"><span data-stu-id="130b7-194">789123456</span></span> |
| <span data-ttu-id="130b7-195">2</span><span class="sxs-lookup"><span data-stu-id="130b7-195">2</span></span> |<span data-ttu-id="130b7-196">2014-09-10 12:05:00.000</span><span class="sxs-lookup"><span data-stu-id="130b7-196">2014-09-10 12:05:00.000</span></span> |<span data-ttu-id="130b7-197">CDE 1007</span><span class="sxs-lookup"><span data-stu-id="130b7-197">CDE 1007</span></span> |<span data-ttu-id="130b7-198">NJ</span><span class="sxs-lookup"><span data-stu-id="130b7-198">NJ</span></span> |<span data-ttu-id="130b7-199">Toyota</span><span class="sxs-lookup"><span data-stu-id="130b7-199">Toyota</span></span> |<span data-ttu-id="130b7-200">4 x 4</span><span class="sxs-lookup"><span data-stu-id="130b7-200">4x4</span></span> |<span data-ttu-id="130b7-201">1</span><span class="sxs-lookup"><span data-stu-id="130b7-201">1</span></span> |<span data-ttu-id="130b7-202">0</span><span class="sxs-lookup"><span data-stu-id="130b7-202">0</span></span> |<span data-ttu-id="130b7-203">6</span><span class="sxs-lookup"><span data-stu-id="130b7-203">6</span></span> |<span data-ttu-id="130b7-204">321987654</span><span class="sxs-lookup"><span data-stu-id="130b7-204">321987654</span></span> |

<span data-ttu-id="130b7-205">Här är en kort beskrivning av hello kolumner:</span><span class="sxs-lookup"><span data-stu-id="130b7-205">Here is a short description of hello columns:</span></span>

| <span data-ttu-id="130b7-206">Kolumn</span><span class="sxs-lookup"><span data-stu-id="130b7-206">Column</span></span> | <span data-ttu-id="130b7-207">Beskrivning</span><span class="sxs-lookup"><span data-stu-id="130b7-207">Description</span></span> |
| --- | --- |
| <span data-ttu-id="130b7-208">TollID</span><span class="sxs-lookup"><span data-stu-id="130b7-208">TollID</span></span> |<span data-ttu-id="130b7-209">hello avgift monter ID som unikt identifierar en avgift monter</span><span class="sxs-lookup"><span data-stu-id="130b7-209">hello toll booth ID that uniquely identifies a toll booth</span></span> |
| <span data-ttu-id="130b7-210">EntryTime</span><span class="sxs-lookup"><span data-stu-id="130b7-210">EntryTime</span></span> |<span data-ttu-id="130b7-211">hello datum och tid för registrering av hello vehicle toohello avgift monter i UTC</span><span class="sxs-lookup"><span data-stu-id="130b7-211">hello date and time of entry of hello vehicle toohello toll booth in UTC</span></span> |
| <span data-ttu-id="130b7-212">LicensePlate</span><span class="sxs-lookup"><span data-stu-id="130b7-212">LicensePlate</span></span> |<span data-ttu-id="130b7-213">hello licens skylt antalet hello vehicle</span><span class="sxs-lookup"><span data-stu-id="130b7-213">hello license plate number of hello vehicle</span></span> |
| <span data-ttu-id="130b7-214">Status</span><span class="sxs-lookup"><span data-stu-id="130b7-214">State</span></span> |<span data-ttu-id="130b7-215">Ett tillstånd i USA</span><span class="sxs-lookup"><span data-stu-id="130b7-215">A state in United States</span></span> |
| <span data-ttu-id="130b7-216">Kontrollera</span><span class="sxs-lookup"><span data-stu-id="130b7-216">Make</span></span> |<span data-ttu-id="130b7-217">hello tillverkaren av hello bil</span><span class="sxs-lookup"><span data-stu-id="130b7-217">hello manufacturer of hello automobile</span></span> |
| <span data-ttu-id="130b7-218">Modellen</span><span class="sxs-lookup"><span data-stu-id="130b7-218">Model</span></span> |<span data-ttu-id="130b7-219">hello modellnumret för hello bil</span><span class="sxs-lookup"><span data-stu-id="130b7-219">hello model number of hello automobile</span></span> |
| <span data-ttu-id="130b7-220">VehicleType</span><span class="sxs-lookup"><span data-stu-id="130b7-220">VehicleType</span></span> |<span data-ttu-id="130b7-221">Antingen 1 för fordon eller 2 för kommersiella fordon</span><span class="sxs-lookup"><span data-stu-id="130b7-221">Either 1 for passenger vehicles or 2 for commercial vehicles</span></span> |
| <span data-ttu-id="130b7-222">WeightType</span><span class="sxs-lookup"><span data-stu-id="130b7-222">WeightType</span></span> |<span data-ttu-id="130b7-223">Vehicle vikt i ton; 0 för fordon</span><span class="sxs-lookup"><span data-stu-id="130b7-223">Vehicle weight in tons; 0 for passenger vehicles</span></span> |
| <span data-ttu-id="130b7-224">Avgift</span><span class="sxs-lookup"><span data-stu-id="130b7-224">Toll</span></span> |<span data-ttu-id="130b7-225">hello avgift värdet i USD</span><span class="sxs-lookup"><span data-stu-id="130b7-225">hello toll value in USD</span></span> |
| <span data-ttu-id="130b7-226">Tagga</span><span class="sxs-lookup"><span data-stu-id="130b7-226">Tag</span></span> |<span data-ttu-id="130b7-227">hello e-tagg på hello bil som automatiserar betalning. tomt där hello betalning gjordes manuellt</span><span class="sxs-lookup"><span data-stu-id="130b7-227">hello e-Tag on hello automobile that automates payment; blank where hello payment was done manually</span></span> |

### <a name="exit-data-stream"></a><span data-ttu-id="130b7-228">Avsluta dataström</span><span class="sxs-lookup"><span data-stu-id="130b7-228">Exit data stream</span></span>
<span data-ttu-id="130b7-229">hello avsluta dataströmmen innehåller information om bilar lämnar hello avgift station.</span><span class="sxs-lookup"><span data-stu-id="130b7-229">hello exit data stream contains information about cars leaving hello toll station.</span></span>

| <span data-ttu-id="130b7-230">**TollId**</span><span class="sxs-lookup"><span data-stu-id="130b7-230">**TollId**</span></span> | <span data-ttu-id="130b7-231">**ExitTime**</span><span class="sxs-lookup"><span data-stu-id="130b7-231">**ExitTime**</span></span> | <span data-ttu-id="130b7-232">**LicensePlate**</span><span class="sxs-lookup"><span data-stu-id="130b7-232">**LicensePlate**</span></span> |
| --- | --- | --- |
| <span data-ttu-id="130b7-233">1</span><span class="sxs-lookup"><span data-stu-id="130b7-233">1</span></span> |<span data-ttu-id="130b7-234">2014-09-10T12:03:00.0000000Z</span><span class="sxs-lookup"><span data-stu-id="130b7-234">2014-09-10T12:03:00.0000000Z</span></span> |<span data-ttu-id="130b7-235">JNB 7001</span><span class="sxs-lookup"><span data-stu-id="130b7-235">JNB 7001</span></span> |
| <span data-ttu-id="130b7-236">1</span><span class="sxs-lookup"><span data-stu-id="130b7-236">1</span></span> |<span data-ttu-id="130b7-237">2014-09-10T12:03:00.0000000Z</span><span class="sxs-lookup"><span data-stu-id="130b7-237">2014-09-10T12:03:00.0000000Z</span></span> |<span data-ttu-id="130b7-238">YXZ 1001</span><span class="sxs-lookup"><span data-stu-id="130b7-238">YXZ 1001</span></span> |
| <span data-ttu-id="130b7-239">3</span><span class="sxs-lookup"><span data-stu-id="130b7-239">3</span></span> |<span data-ttu-id="130b7-240">2014-09-10T12:04:00.0000000Z</span><span class="sxs-lookup"><span data-stu-id="130b7-240">2014-09-10T12:04:00.0000000Z</span></span> |<span data-ttu-id="130b7-241">ABC 1004</span><span class="sxs-lookup"><span data-stu-id="130b7-241">ABC 1004</span></span> |
| <span data-ttu-id="130b7-242">2</span><span class="sxs-lookup"><span data-stu-id="130b7-242">2</span></span> |<span data-ttu-id="130b7-243">2014-09-10T12:07:00.0000000Z</span><span class="sxs-lookup"><span data-stu-id="130b7-243">2014-09-10T12:07:00.0000000Z</span></span> |<span data-ttu-id="130b7-244">XYZ 1003</span><span class="sxs-lookup"><span data-stu-id="130b7-244">XYZ 1003</span></span> |
| <span data-ttu-id="130b7-245">1</span><span class="sxs-lookup"><span data-stu-id="130b7-245">1</span></span> |<span data-ttu-id="130b7-246">2014-09-10T12:08:00.0000000Z</span><span class="sxs-lookup"><span data-stu-id="130b7-246">2014-09-10T12:08:00.0000000Z</span></span> |<span data-ttu-id="130b7-247">BNJ 1007</span><span class="sxs-lookup"><span data-stu-id="130b7-247">BNJ 1007</span></span> |
| <span data-ttu-id="130b7-248">2</span><span class="sxs-lookup"><span data-stu-id="130b7-248">2</span></span> |<span data-ttu-id="130b7-249">2014-09-10T12:07:00.0000000Z</span><span class="sxs-lookup"><span data-stu-id="130b7-249">2014-09-10T12:07:00.0000000Z</span></span> |<span data-ttu-id="130b7-250">CDE 1007</span><span class="sxs-lookup"><span data-stu-id="130b7-250">CDE 1007</span></span> |

<span data-ttu-id="130b7-251">Här är en kort beskrivning av hello kolumner:</span><span class="sxs-lookup"><span data-stu-id="130b7-251">Here is a short description of hello columns:</span></span>

| <span data-ttu-id="130b7-252">Kolumn</span><span class="sxs-lookup"><span data-stu-id="130b7-252">Column</span></span> | <span data-ttu-id="130b7-253">Beskrivning</span><span class="sxs-lookup"><span data-stu-id="130b7-253">Description</span></span> |
| --- | --- |
| <span data-ttu-id="130b7-254">TollID</span><span class="sxs-lookup"><span data-stu-id="130b7-254">TollID</span></span> |<span data-ttu-id="130b7-255">hello avgift monter ID som unikt identifierar en avgift monter</span><span class="sxs-lookup"><span data-stu-id="130b7-255">hello toll booth ID that uniquely identifies a toll booth</span></span> |
| <span data-ttu-id="130b7-256">ExitTime</span><span class="sxs-lookup"><span data-stu-id="130b7-256">ExitTime</span></span> |<span data-ttu-id="130b7-257">hello datum och tid för Avsluta hello fordon från avgift monter i UTC</span><span class="sxs-lookup"><span data-stu-id="130b7-257">hello date and time of exit of hello vehicle from toll booth in UTC</span></span> |
| <span data-ttu-id="130b7-258">LicensePlate</span><span class="sxs-lookup"><span data-stu-id="130b7-258">LicensePlate</span></span> |<span data-ttu-id="130b7-259">hello licens skylt antalet hello vehicle</span><span class="sxs-lookup"><span data-stu-id="130b7-259">hello license plate number of hello vehicle</span></span> |

### <a name="commercial-vehicle-registration-data"></a><span data-ttu-id="130b7-260">Kommersiellt fordon registreringsdata</span><span class="sxs-lookup"><span data-stu-id="130b7-260">Commercial vehicle registration data</span></span>
<span data-ttu-id="130b7-261">hello kursen använder en statisk ögonblicksbild av en databas för registrering av kommersiellt fordon.</span><span class="sxs-lookup"><span data-stu-id="130b7-261">hello tutorial uses a static snapshot of a commercial vehicle registration database.</span></span>

| <span data-ttu-id="130b7-262">LicensePlate</span><span class="sxs-lookup"><span data-stu-id="130b7-262">LicensePlate</span></span> | <span data-ttu-id="130b7-263">RegistrationId</span><span class="sxs-lookup"><span data-stu-id="130b7-263">RegistrationId</span></span> | <span data-ttu-id="130b7-264">Upphört att gälla</span><span class="sxs-lookup"><span data-stu-id="130b7-264">Expired</span></span> |
| --- | --- | --- |
| <span data-ttu-id="130b7-265">SVT 6023</span><span class="sxs-lookup"><span data-stu-id="130b7-265">SVT 6023</span></span> |<span data-ttu-id="130b7-266">285429838</span><span class="sxs-lookup"><span data-stu-id="130b7-266">285429838</span></span> |<span data-ttu-id="130b7-267">1</span><span class="sxs-lookup"><span data-stu-id="130b7-267">1</span></span> |
| <span data-ttu-id="130b7-268">XLZ 3463</span><span class="sxs-lookup"><span data-stu-id="130b7-268">XLZ 3463</span></span> |<span data-ttu-id="130b7-269">362715656</span><span class="sxs-lookup"><span data-stu-id="130b7-269">362715656</span></span> |<span data-ttu-id="130b7-270">0</span><span class="sxs-lookup"><span data-stu-id="130b7-270">0</span></span> |
| <span data-ttu-id="130b7-271">SÄKERHETS 1005</span><span class="sxs-lookup"><span data-stu-id="130b7-271">BAC 1005</span></span> |<span data-ttu-id="130b7-272">876133137</span><span class="sxs-lookup"><span data-stu-id="130b7-272">876133137</span></span> |<span data-ttu-id="130b7-273">1</span><span class="sxs-lookup"><span data-stu-id="130b7-273">1</span></span> |
| <span data-ttu-id="130b7-274">RIV 8632</span><span class="sxs-lookup"><span data-stu-id="130b7-274">RIV 8632</span></span> |<span data-ttu-id="130b7-275">992711956</span><span class="sxs-lookup"><span data-stu-id="130b7-275">992711956</span></span> |<span data-ttu-id="130b7-276">0</span><span class="sxs-lookup"><span data-stu-id="130b7-276">0</span></span> |
| <span data-ttu-id="130b7-277">SNY 7188</span><span class="sxs-lookup"><span data-stu-id="130b7-277">SNY 7188</span></span> |<span data-ttu-id="130b7-278">592133890</span><span class="sxs-lookup"><span data-stu-id="130b7-278">592133890</span></span> |<span data-ttu-id="130b7-279">0</span><span class="sxs-lookup"><span data-stu-id="130b7-279">0</span></span> |
| <span data-ttu-id="130b7-280">ELH 9896</span><span class="sxs-lookup"><span data-stu-id="130b7-280">ELH 9896</span></span> |<span data-ttu-id="130b7-281">678427724</span><span class="sxs-lookup"><span data-stu-id="130b7-281">678427724</span></span> |<span data-ttu-id="130b7-282">1</span><span class="sxs-lookup"><span data-stu-id="130b7-282">1</span></span> |

<span data-ttu-id="130b7-283">Här är en kort beskrivning av hello kolumner:</span><span class="sxs-lookup"><span data-stu-id="130b7-283">Here is a short description of hello columns:</span></span>

| <span data-ttu-id="130b7-284">Kolumn</span><span class="sxs-lookup"><span data-stu-id="130b7-284">Column</span></span> | <span data-ttu-id="130b7-285">Beskrivning</span><span class="sxs-lookup"><span data-stu-id="130b7-285">Description</span></span> |
| --- | --- |
| <span data-ttu-id="130b7-286">LicensePlate</span><span class="sxs-lookup"><span data-stu-id="130b7-286">LicensePlate</span></span> |<span data-ttu-id="130b7-287">hello licens skylt antalet hello vehicle</span><span class="sxs-lookup"><span data-stu-id="130b7-287">hello license plate number of hello vehicle</span></span> |
| <span data-ttu-id="130b7-288">RegistrationId</span><span class="sxs-lookup"><span data-stu-id="130b7-288">RegistrationId</span></span> |<span data-ttu-id="130b7-289">hello vehicle registrerings-ID</span><span class="sxs-lookup"><span data-stu-id="130b7-289">hello vehicle's registration ID</span></span> |
| <span data-ttu-id="130b7-290">Upphört att gälla</span><span class="sxs-lookup"><span data-stu-id="130b7-290">Expired</span></span> |<span data-ttu-id="130b7-291">Hej registreringsstatus hello fordon: 0 om vehicle registrering är aktiv, 1 om registreringen har upphört att gälla</span><span class="sxs-lookup"><span data-stu-id="130b7-291">hello registration status of hello vehicle: 0 if vehicle registration is active, 1 if registration is expired</span></span> |

## <a name="set-up-hello-environment-for-azure-stream-analytics"></a><span data-ttu-id="130b7-292">Konfigurera hello miljö för Azure Stream Analytics</span><span class="sxs-lookup"><span data-stu-id="130b7-292">Set up hello environment for Azure Stream Analytics</span></span>
<span data-ttu-id="130b7-293">toocomplete den här självstudiekursen kommer du behöver ett Microsoft Azure-prenumeration.</span><span class="sxs-lookup"><span data-stu-id="130b7-293">toocomplete this tutorial, you need a Microsoft Azure subscription.</span></span> <span data-ttu-id="130b7-294">Microsoft erbjuder kostnadsfri utvärderingsversion för Microsoft Azure-tjänster.</span><span class="sxs-lookup"><span data-stu-id="130b7-294">Microsoft offers free trial for Microsoft Azure services.</span></span>

<span data-ttu-id="130b7-295">Om du inte har ett Azure-konto kan du [begära en kostnadsfri utvärderingsversion](http://azure.microsoft.com/pricing/free-trial/).</span><span class="sxs-lookup"><span data-stu-id="130b7-295">If you do not have an Azure account, you can [request a free trial version](http://azure.microsoft.com/pricing/free-trial/).</span></span>

> [!NOTE]
> <span data-ttu-id="130b7-296">toosign dig för en kostnadsfri utvärderingsversion, behöver du en mobil enhet som kan ta emot textmeddelanden och ett giltigt kreditkort.</span><span class="sxs-lookup"><span data-stu-id="130b7-296">toosign up for a free trial, you need a mobile device that can receive text messages and a valid credit card.</span></span>
> 
> 

<span data-ttu-id="130b7-297">Glöm toofollow hello stegen i avsnittet ”Rensa ditt Azure-konto” hello för hello slutet av den här artikeln så att du kan göra hello bästa användning av Azure-kredit.</span><span class="sxs-lookup"><span data-stu-id="130b7-297">Be sure toofollow hello steps in hello “Clean up your Azure account” section at hello end of this article so that you can make hello best use of your Azure credit.</span></span>

## <a name="provision-azure-resources-required-for-hello-tutorial"></a><span data-ttu-id="130b7-298">Etablera Azure-resurser som krävs för hello självstudiekursen</span><span class="sxs-lookup"><span data-stu-id="130b7-298">Provision Azure resources required for hello tutorial</span></span>
<span data-ttu-id="130b7-299">Den här kursen kräver två event hubs tooreceive *post* och *avsluta* dataströmmar.</span><span class="sxs-lookup"><span data-stu-id="130b7-299">This tutorial requires two event hubs tooreceive *entry* and *exit* data streams.</span></span> <span data-ttu-id="130b7-300">Azure SQL Database överför hello resultaten av hello Stream Analytics-jobb.</span><span class="sxs-lookup"><span data-stu-id="130b7-300">Azure SQL Database outputs hello results of hello Stream Analytics jobs.</span></span> <span data-ttu-id="130b7-301">Azure Storage lagrar referensdata om vehicle registreringar.</span><span class="sxs-lookup"><span data-stu-id="130b7-301">Azure Storage stores reference data about vehicle registrations.</span></span>

<span data-ttu-id="130b7-302">Du kan använda hello Setup.ps1 skript i hello TollApp mapp på GitHub toocreate alla nödvändiga resurser.</span><span class="sxs-lookup"><span data-stu-id="130b7-302">You can use hello Setup.ps1 script in hello TollApp folder on GitHub toocreate all required resources.</span></span> <span data-ttu-id="130b7-303">Hello intresse tid rekommenderar vi att du kör den.</span><span class="sxs-lookup"><span data-stu-id="130b7-303">In hello interest of time, we recommend that you run it.</span></span> <span data-ttu-id="130b7-304">Om du vill läsa mer om hur tooconfigure resurserna i hello Azure-portalen finns toolearn toohello ”konfigurera självstudiekurs resurser i Azure-portalen” tillägg.</span><span class="sxs-lookup"><span data-stu-id="130b7-304">If you would like toolearn more about how tooconfigure these resources in hello Azure portal, refer toohello “Configuring tutorial resources in Azure portal” appendix.</span></span>

<span data-ttu-id="130b7-305">Hämta och spara hello stöder [TollApp](https://github.com/Azure/azure-stream-analytics/blob/master/Samples/TollApp/TollApp.zip) mappar och filer.</span><span class="sxs-lookup"><span data-stu-id="130b7-305">Download and save hello supporting [TollApp](https://github.com/Azure/azure-stream-analytics/blob/master/Samples/TollApp/TollApp.zip) folder and files.</span></span>

<span data-ttu-id="130b7-306">Öppna en **Microsoft Azure PowerShell** fönstret *som administratör*.</span><span class="sxs-lookup"><span data-stu-id="130b7-306">Open a **Microsoft Azure PowerShell** window *as an administrator*.</span></span> <span data-ttu-id="130b7-307">Om du inte ännu har Azure PowerShell, följer du anvisningarna för hello i [installera och konfigurera Azure PowerShell](/powershell/azure/overview) tooinstall den.</span><span class="sxs-lookup"><span data-stu-id="130b7-307">If you do not yet have Azure PowerShell, follow hello instructions in [Install and configure Azure PowerShell](/powershell/azure/overview) tooinstall it.</span></span>

<span data-ttu-id="130b7-308">Eftersom Windows blockerar automatiskt .ps1, .dll och .exe-filer, måste tooset hello körningsprincipen innan du kör hello skript.</span><span class="sxs-lookup"><span data-stu-id="130b7-308">Because Windows automatically blocks .ps1, .dll, and .exe files, you need tooset hello execution policy before you run hello script.</span></span> <span data-ttu-id="130b7-309">Se till att hello Azure PowerShell-fönstret körs *som administratör*.</span><span class="sxs-lookup"><span data-stu-id="130b7-309">Make sure hello Azure PowerShell window is running *as an administrator*.</span></span> <span data-ttu-id="130b7-310">Kör **Set-ExecutionPolicy obegränsad**.</span><span class="sxs-lookup"><span data-stu-id="130b7-310">Run **Set-ExecutionPolicy unrestricted**.</span></span> <span data-ttu-id="130b7-311">När du uppmanas ange **Y**.</span><span class="sxs-lookup"><span data-stu-id="130b7-311">When prompted, type **Y**.</span></span>

![Skärmbild av ”Set-ExecutionPolicy obegränsad” körs i Azure PowerShell-fönster](media/stream-analytics-build-an-iot-solution-using-stream-analytics/image2.png)

<span data-ttu-id="130b7-313">Kör **Get-ExecutionPolicy** toomake till att hello kommandot fungerade.</span><span class="sxs-lookup"><span data-stu-id="130b7-313">Run **Get-ExecutionPolicy** toomake sure that hello command worked.</span></span>

![Skärmbild av ”Get-ExecutionPolicy” körs i Azure PowerShell-fönster](media/stream-analytics-build-an-iot-solution-using-stream-analytics/image3.png)

<span data-ttu-id="130b7-315">Gå toohello directory som har hello skript och generator program.</span><span class="sxs-lookup"><span data-stu-id="130b7-315">Go toohello directory that has hello scripts and generator application.</span></span>

![Skärmbild av ”cd .\TollApp\TollApp” körs i hello Azure PowerShell-fönster](media/stream-analytics-build-an-iot-solution-using-stream-analytics/image4.png)

<span data-ttu-id="130b7-317">Typen **.\\ Setup.ps1** tooset in din Azure-konto, skapa och konfigurera alla nödvändiga resurser och starta toogenerate händelser.</span><span class="sxs-lookup"><span data-stu-id="130b7-317">Type **.\\Setup.ps1** tooset up your Azure account, create and configure all required resources, and start toogenerate events.</span></span> <span data-ttu-id="130b7-318">hello skript hämtar slumpmässigt en region toocreate dina resurser.</span><span class="sxs-lookup"><span data-stu-id="130b7-318">hello script randomly picks up a region toocreate your resources.</span></span> <span data-ttu-id="130b7-319">tooexplicitly anger en region, du kan skicka hello **-plats** parameter som i följande exempel hello:</span><span class="sxs-lookup"><span data-stu-id="130b7-319">tooexplicitly specify a region, you can pass hello **-location** parameter as in hello following example:</span></span>

<span data-ttu-id="130b7-320">**. \\Setup.ps1-platsen ”centrala USA”**</span><span class="sxs-lookup"><span data-stu-id="130b7-320">**.\\Setup.ps1 -location “Central US”**</span></span>

![Skärmbild av sidan hello Azure-inloggning](media/stream-analytics-build-an-iot-solution-using-stream-analytics/image5.png)

<span data-ttu-id="130b7-322">hello skriptet öppnas hello **logga In** sidan för Microsoft Azure.</span><span class="sxs-lookup"><span data-stu-id="130b7-322">hello script opens hello **Sign In** page for Microsoft Azure.</span></span> <span data-ttu-id="130b7-323">Ange autentiseringsuppgifterna för ditt konto.</span><span class="sxs-lookup"><span data-stu-id="130b7-323">Enter your account credentials.</span></span>

> [!NOTE]
> <span data-ttu-id="130b7-324">Om ditt konto har åtkomst toomultiple prenumerationer, kommer du att och tooenter hello prenumerationsnamn som du vill toouse hello genomgång.</span><span class="sxs-lookup"><span data-stu-id="130b7-324">If your account has access toomultiple subscriptions, you will be asked tooenter hello subscription name that you want toouse for hello tutorial.</span></span>
> 
> 

<span data-ttu-id="130b7-325">hello skript kan ta flera minuter toorun.</span><span class="sxs-lookup"><span data-stu-id="130b7-325">hello script can take several minutes toorun.</span></span> <span data-ttu-id="130b7-326">När den är klar hello utdata bör se ut som följande skärmbild hello.</span><span class="sxs-lookup"><span data-stu-id="130b7-326">After it finishes, hello output should look like hello following screenshot.</span></span>

![Skärmbild av utdata hello skriptet i hello Azure PowerShell-fönster](media/stream-analytics-build-an-iot-solution-using-stream-analytics/image6.PNG)

<span data-ttu-id="130b7-328">Ett annat fönster som är liknande toohello följande skärmbild visas också.</span><span class="sxs-lookup"><span data-stu-id="130b7-328">You will also see another window that's similar toohello following screenshot.</span></span> <span data-ttu-id="130b7-329">Det här programmet skickar händelser tooAzure Händelsehubbar som är nödvändiga toorun hello kursen.</span><span class="sxs-lookup"><span data-stu-id="130b7-329">This application is sending events tooAzure Event Hubs, which is required toorun hello tutorial.</span></span> <span data-ttu-id="130b7-330">Därför inte stoppa hello program eller stänga det här fönstret förrän du har avslutat hello kursen.</span><span class="sxs-lookup"><span data-stu-id="130b7-330">So, do not stop hello application or close this window until you finish hello tutorial.</span></span>

![Skärmbild av ”skicka event hub data”](media/stream-analytics-build-an-iot-solution-using-stream-analytics/image7.png)

<span data-ttu-id="130b7-332">Du ska kunna toosee dina resurser i Azure-portalen nu.</span><span class="sxs-lookup"><span data-stu-id="130b7-332">You should be able toosee your resources in Azure portal now.</span></span> <span data-ttu-id="130b7-333">Gå för<https://portal.azure.com>, och logga in med autentiseringsuppgifterna för ditt konto.</span><span class="sxs-lookup"><span data-stu-id="130b7-333">Go too<https://portal.azure.com>, and sign in with your account credentials.</span></span> <span data-ttu-id="130b7-334">Observera att för närvarande vissa funktioner använder hello klassiska portalen.</span><span class="sxs-lookup"><span data-stu-id="130b7-334">Note that currently some functionality utilizes hello classic portal.</span></span> <span data-ttu-id="130b7-335">De här stegen att tydligt anges.</span><span class="sxs-lookup"><span data-stu-id="130b7-335">These steps will be clearly indicated.</span></span>

### <a name="azure-event-hubs"></a><span data-ttu-id="130b7-336">Azure Event Hubs</span><span class="sxs-lookup"><span data-stu-id="130b7-336">Azure Event Hubs</span></span>
<span data-ttu-id="130b7-337">I hello Azure-portalen klickar du på **fler tjänster** hello längst ned i hello hantering av vänstra fönstret.</span><span class="sxs-lookup"><span data-stu-id="130b7-337">In hello Azure portal, click **More services** on hello bottom of hello left management pane.</span></span> <span data-ttu-id="130b7-338">Typen **händelsehubbar** i hello fältet och klickar på **händelsehubbar**.</span><span class="sxs-lookup"><span data-stu-id="130b7-338">Type **Event hubs** in hello field provided and click **Event hubs**.</span></span> <span data-ttu-id="130b7-339">Detta startar en ny webbläsare fönstret toodisplay hello **SERVICE BUS** område i hello **klassiska portalen**.</span><span class="sxs-lookup"><span data-stu-id="130b7-339">This launches a new browser window toodisplay hello **SERVICE BUS** area in hello **classic portal**.</span></span> <span data-ttu-id="130b7-340">Här kan du se hello Event Hub som skapats av hello Setup.ps1 skript.</span><span class="sxs-lookup"><span data-stu-id="130b7-340">Here you can see hello Event Hub created by hello Setup.ps1 script.</span></span>

![Service Bus](media/stream-analytics-build-an-iot-solution-using-stream-analytics/image8.png)

<span data-ttu-id="130b7-342">Klicka på hello som börjar med *tolldata*.</span><span class="sxs-lookup"><span data-stu-id="130b7-342">Click hello one that starts with *tolldata*.</span></span> <span data-ttu-id="130b7-343">Klicka på hello **HÄNDELSEHUBBAR** fliken. Du ser två händelsehubbar med namnet *post* och *avsluta* skapas i det här namnområdet.</span><span class="sxs-lookup"><span data-stu-id="130b7-343">Click hello **EVENT HUBS** tab. You will see two event hubs named *entry* and *exit* created in this namespace.</span></span>

![Event Hubs fliken i hello klassiska portalen](media/stream-analytics-build-an-iot-solution-using-stream-analytics/image9.png)

### <a name="azure-storage-container"></a><span data-ttu-id="130b7-345">Azure Storage-behållare</span><span class="sxs-lookup"><span data-stu-id="130b7-345">Azure Storage container</span></span>
1. <span data-ttu-id="130b7-346">Gå tillbaka toohello fliken i din webbläsare öppna tooAzure portal.</span><span class="sxs-lookup"><span data-stu-id="130b7-346">Go back toohello tab in your browser open tooAzure portal.</span></span> <span data-ttu-id="130b7-347">Klicka på **lagring** på vänster sida av hello Azure portal toosee hello Azure Storage-behållare som används i självstudiekursen hello hello.</span><span class="sxs-lookup"><span data-stu-id="130b7-347">Click **STORAGE** on hello left side of hello Azure portal toosee hello Azure Storage container that's used in hello tutorial.</span></span>
   
    ![Menyalternativet för lagring](media/stream-analytics-build-an-iot-solution-using-stream-analytics/image11.png)
2. <span data-ttu-id="130b7-349">Klicka på hello något som börjar med *tolldata*.</span><span class="sxs-lookup"><span data-stu-id="130b7-349">Click hello one that start with *tolldata*.</span></span> <span data-ttu-id="130b7-350">Klicka på hello **behållare** fliken toosee hello skapas behållaren.</span><span class="sxs-lookup"><span data-stu-id="130b7-350">Click hello **CONTAINERS** tab toosee hello created container.</span></span>
   
    ![Fliken behållare i hello Azure-portalen](media/stream-analytics-build-an-iot-solution-using-stream-analytics/image10.png)
3. <span data-ttu-id="130b7-352">Klicka på hello **tolldata** behållare toosee hello upp JSON-fil som har vehicle registreringsdata.</span><span class="sxs-lookup"><span data-stu-id="130b7-352">Click hello **tolldata** container toosee hello uploaded JSON file that has vehicle registration data.</span></span>
   
    ![Skärmbild av hello registration.json filen i hello behållaren](media/stream-analytics-build-an-iot-solution-using-stream-analytics/image12.png)

### <a name="azure-sql-database"></a><span data-ttu-id="130b7-354">Azure SQL Database</span><span class="sxs-lookup"><span data-stu-id="130b7-354">Azure SQL Database</span></span>
1. <span data-ttu-id="130b7-355">Gå tillbaka toohello Azure-portalen på hello första fliken som har öppnats i hello webbläsare.</span><span class="sxs-lookup"><span data-stu-id="130b7-355">Go back toohello Azure portal on hello first tab that was opened in hello browser.</span></span> <span data-ttu-id="130b7-356">Klicka på **SQL-databaser** på vänster sida av hello Azure portal toosee hello SQL-databas som ska användas i hello självstudier och klickar på hello **tolldatadb**.</span><span class="sxs-lookup"><span data-stu-id="130b7-356">Click **SQL DATABASES** on hello left side of hello Azure portal toosee hello SQL database that will be used in hello tutorial and click **tolldatadb**.</span></span>
   
    ![Skärmbild av hello skapade SQL-databas](media/stream-analytics-build-an-iot-solution-using-stream-analytics/image15.png)
2. <span data-ttu-id="130b7-358">Kopiera hello servernamn utan hello portnummer (*servername*. database.windows.net, till exempel).</span><span class="sxs-lookup"><span data-stu-id="130b7-358">Copy hello server name without hello port number (*servername*.database.windows.net, for example).</span></span>
    <span data-ttu-id="130b7-359">![Skärmbild av hello skapade SQL-databas db](media/stream-analytics-build-an-iot-solution-using-stream-analytics/image15a.png)</span><span class="sxs-lookup"><span data-stu-id="130b7-359">![Screenshot of hello created SQL database db](media/stream-analytics-build-an-iot-solution-using-stream-analytics/image15a.png)</span></span>

## <a name="connect-toohello-database-from-visual-studio"></a><span data-ttu-id="130b7-360">Ansluta toohello databasen från Visual Studio</span><span class="sxs-lookup"><span data-stu-id="130b7-360">Connect toohello database from Visual Studio</span></span>
<span data-ttu-id="130b7-361">Använd Visual Studio tooaccess frågeresultat i hello Utdatadatabasen.</span><span class="sxs-lookup"><span data-stu-id="130b7-361">Use Visual Studio tooaccess query results in hello output database.</span></span>

<span data-ttu-id="130b7-362">Anslut toohello SQL-databas (hello mål) från Visual Studio:</span><span class="sxs-lookup"><span data-stu-id="130b7-362">Connect toohello SQL database (hello destination) from Visual Studio:</span></span>

1. <span data-ttu-id="130b7-363">Öppna Visual Studio och klicka sedan på **verktyg** > **ansluta tooDatabase**.</span><span class="sxs-lookup"><span data-stu-id="130b7-363">Open Visual Studio, and then click **Tools** > **Connect tooDatabase**.</span></span>
2. <span data-ttu-id="130b7-364">Om du blir tillfrågad, klickar du på **Microsoft SQL Server** som en datakälla.</span><span class="sxs-lookup"><span data-stu-id="130b7-364">If asked, click **Microsoft SQL Server** as a data source.</span></span>
   
    ![Ändra dialogrutan för datakälla](media/stream-analytics-build-an-iot-solution-using-stream-analytics/image16.png)
3. <span data-ttu-id="130b7-366">I hello **servernamn** fältet, klistra in hello-namn som du kopierade i föregående avsnitt i hello från hello Azure-portalen (det vill säga *servername*. database.windows.net).</span><span class="sxs-lookup"><span data-stu-id="130b7-366">In hello **Server name** field, paste hello name that you copied in hello previous section from hello Azure portal (that is, *servername*.database.windows.net).</span></span>
4. <span data-ttu-id="130b7-367">Klicka på **använda SQL Server-autentisering**.</span><span class="sxs-lookup"><span data-stu-id="130b7-367">Click **Use SQL Server Authentication**.</span></span>
5. <span data-ttu-id="130b7-368">Ange **tolladmin** i hello **användarnamn** fält och **123toll!**</span><span class="sxs-lookup"><span data-stu-id="130b7-368">Enter **tolladmin** in hello **User name** field and **123toll!**</span></span> <span data-ttu-id="130b7-369">i hello **lösenord** fältet.</span><span class="sxs-lookup"><span data-stu-id="130b7-369">in hello **Password** field.</span></span>
6. <span data-ttu-id="130b7-370">Klicka på **Välj eller ange ett databasnamn**, och välj **TollDataDB** som hello-databas.</span><span class="sxs-lookup"><span data-stu-id="130b7-370">Click **Select or enter a database name**, and select **TollDataDB** as hello database.</span></span>
   
    ![Lägg till dialogrutan anslutning](media/stream-analytics-build-an-iot-solution-using-stream-analytics/image17.jpg)
7. <span data-ttu-id="130b7-372">Klicka på **OK**.</span><span class="sxs-lookup"><span data-stu-id="130b7-372">Click **OK**.</span></span>
8. <span data-ttu-id="130b7-373">Öppna Server Explorer.</span><span class="sxs-lookup"><span data-stu-id="130b7-373">Open Server Explorer.</span></span>
   
    ![Server Explorer](media/stream-analytics-build-an-iot-solution-using-stream-analytics/image18.png)
9. <span data-ttu-id="130b7-375">Se fyra tabeller i hello TollDataDB databas.</span><span class="sxs-lookup"><span data-stu-id="130b7-375">See four tables in hello TollDataDB database.</span></span>
   
    ![Tabeller i hello TollDataDB databas](media/stream-analytics-build-an-iot-solution-using-stream-analytics/image19.jpg)

## <a name="event-generator-tollapp-sample-project"></a><span data-ttu-id="130b7-377">Händelsen generator: TollApp exempelprojektet</span><span class="sxs-lookup"><span data-stu-id="130b7-377">Event generator: TollApp sample project</span></span>
<span data-ttu-id="130b7-378">hello PowerShell-skript startar automatiskt toosend händelser med hjälp av hello TollApp programmet exempelprogrammet.</span><span class="sxs-lookup"><span data-stu-id="130b7-378">hello PowerShell script automatically starts toosend events by using hello TollApp sample application program.</span></span> <span data-ttu-id="130b7-379">Du behöver inte tooperform eventuella ytterligare steg.</span><span class="sxs-lookup"><span data-stu-id="130b7-379">You don’t need tooperform any additional steps.</span></span>

<span data-ttu-id="130b7-380">Du är intresserad av implementeringsdetaljer kan du söka efter hello källkoden för hello TollApp program i GitHub [exempel/TollApp](https://aka.ms/azure-stream-analytics-toll-source).</span><span class="sxs-lookup"><span data-stu-id="130b7-380">However, if you are interested in implementation details, you can find hello source code of hello TollApp application in GitHub [samples/TollApp](https://aka.ms/azure-stream-analytics-toll-source).</span></span>

![Skärmbild av exempelkod som visas i Visual Studio](media/stream-analytics-build-an-iot-solution-using-stream-analytics/image20.png)

## <a name="create-a-stream-analytics-job"></a><span data-ttu-id="130b7-382">Skapa ett Stream Analytics-jobb</span><span class="sxs-lookup"><span data-stu-id="130b7-382">Create a Stream Analytics job</span></span>
1. <span data-ttu-id="130b7-383">I hello Azure-portalen hello Klicka grönt plustecken i hello övre vänstra hörnet i hello sidan toocreate ett nytt Stream Analytics-jobb.</span><span class="sxs-lookup"><span data-stu-id="130b7-383">In hello Azure portal, click hello green plus sign in hello top-left corner of hello page toocreate a new Stream Analytics job.</span></span> <span data-ttu-id="130b7-384">Välj **Intelligence + analys** och klicka sedan på **Stream Analytics-jobbet**.</span><span class="sxs-lookup"><span data-stu-id="130b7-384">Select **Intelligence + Analytics** and then click **Stream Analytics job**.</span></span>
   
    ![Knappen Nytt](media/stream-analytics-build-an-iot-solution-using-stream-analytics/image21.png)
2. <span data-ttu-id="130b7-386">Ange ett jobbnamn, verifiera hello prenumerationen är korrekt och sedan skapa en ny resursgrupp i hello samma region som hello Event hub lagring (standard är södra centrala USA för hello skriptet).</span><span class="sxs-lookup"><span data-stu-id="130b7-386">Provide a job name, validate hello subscription is correct and then create a new Resource group in hello same region as hello Event hub storage (default is South Central US for hello script).</span></span>
3. <span data-ttu-id="130b7-387">Klicka på **PIN-kod toodashboard** och sedan **skapa** på hello hello sidans nederkant.</span><span class="sxs-lookup"><span data-stu-id="130b7-387">Click **Pin toodashboard** and then **CREATE** at hello bottom of hello page.</span></span>
   
    ![Skapa Stream Analytics-jobbet alternativ](media/stream-analytics-build-an-iot-solution-using-stream-analytics/image22.png)

## <a name="define-input-sources"></a><span data-ttu-id="130b7-389">Definiera indatakällor</span><span class="sxs-lookup"><span data-stu-id="130b7-389">Define input sources</span></span>
1. <span data-ttu-id="130b7-390">hello jobbet skapar och öppnar hello jobbet sidan.</span><span class="sxs-lookup"><span data-stu-id="130b7-390">hello job will create and open hello job page.</span></span> <span data-ttu-id="130b7-391">Eller klicka hello skapas analytics-jobbet på hello portalens instrumentpanel.</span><span class="sxs-lookup"><span data-stu-id="130b7-391">Or you can click hello created analytics job on hello portal dashboard.</span></span>

2. <span data-ttu-id="130b7-392">Klicka på hello **indata** fliken toodefine hello källdata.</span><span class="sxs-lookup"><span data-stu-id="130b7-392">Click hello **INPUTS** tab toodefine hello source data.</span></span>
   
    ![hello indata fliken](media/stream-analytics-build-an-iot-solution-using-stream-analytics/image24.png)
3. <span data-ttu-id="130b7-394">Klicka på **lägga till indata**.</span><span class="sxs-lookup"><span data-stu-id="130b7-394">Click **ADD AN INPUT**.</span></span>
   
    ![hello Lägg till ett indata-alternativ](media/stream-analytics-build-an-iot-solution-using-stream-analytics/image25.png)
4. <span data-ttu-id="130b7-396">Ange **EntryStream** som **INMATADE ALIASET**.</span><span class="sxs-lookup"><span data-stu-id="130b7-396">Enter **EntryStream** as **INPUT ALIAS**.</span></span>
5. <span data-ttu-id="130b7-397">Datakällans typ är **dataström**</span><span class="sxs-lookup"><span data-stu-id="130b7-397">Source Type is **Data Stream**</span></span>
6. <span data-ttu-id="130b7-398">Källan är **händelsehubb**.</span><span class="sxs-lookup"><span data-stu-id="130b7-398">Source is **Event hub**.</span></span>
7. <span data-ttu-id="130b7-399">**Service bus-namnrymd** ska vara hello TollData något i hello listrutan.</span><span class="sxs-lookup"><span data-stu-id="130b7-399">**Service bus namespace** should be hello TollData one in hello drop down.</span></span>
8. <span data-ttu-id="130b7-400">**Namnet på händelsehubben** ska anges för**post**.</span><span class="sxs-lookup"><span data-stu-id="130b7-400">**Event hub name** should be set too**entry**.</span></span>
9. <span data-ttu-id="130b7-401">**Namnet på händelsehubben princip*är **RootManageSharedAccessKey** (hello standardvärdet).</span><span class="sxs-lookup"><span data-stu-id="130b7-401">**Event hub policy name*is **RootManageSharedAccessKey**  (hello default value).</span></span>
10. <span data-ttu-id="130b7-402">Välj **JSON** för **händelse SERIALISERINGSFORMAT** och **UTF8** för **KODNING**.</span><span class="sxs-lookup"><span data-stu-id="130b7-402">Select **JSON** for **EVENT SERIALIZATION FORMAT** and **UTF8** for **ENCODING**.</span></span>
   
    <span data-ttu-id="130b7-403">Dina inställningar kommer att se ut:</span><span class="sxs-lookup"><span data-stu-id="130b7-403">Your settings will look like:</span></span>
   
    ![Händelsehubbsinställningar](media/stream-analytics-build-an-iot-solution-using-stream-analytics/image28.png)

10. <span data-ttu-id="130b7-405">Klicka på **skapa** längst hello hello toofinish hello guiden.</span><span class="sxs-lookup"><span data-stu-id="130b7-405">Click **Create** at hello bottom of hello page toofinish hello wizard.</span></span>
    
    <span data-ttu-id="130b7-406">Nu när du har skapat hello post stream, ska du följa hello samma steg toocreate hello avsluta dataström.</span><span class="sxs-lookup"><span data-stu-id="130b7-406">Now that you've created hello entry stream, you will follow hello same steps toocreate hello exit stream.</span></span> <span data-ttu-id="130b7-407">Vara säker på att tooenter värden som på hello följande skärmbild.</span><span class="sxs-lookup"><span data-stu-id="130b7-407">Be sure tooenter values as on hello following screenshot.</span></span>
    
    ![Inställningar för hello avsluta ström](media/stream-analytics-build-an-iot-solution-using-stream-analytics/image31.png)
    
    <span data-ttu-id="130b7-409">Du har definierat två inkommande dataströmmar:</span><span class="sxs-lookup"><span data-stu-id="130b7-409">You have defined two input streams:</span></span>
    
    ![Definierats inkommande dataströmmar i hello Azure-portalen](media/stream-analytics-build-an-iot-solution-using-stream-analytics/image32.png)
    
    <span data-ttu-id="130b7-411">Sedan ska du lägga till referensindata för hello blob-fil som innehåller bil registreringsdata.</span><span class="sxs-lookup"><span data-stu-id="130b7-411">Next, you will add reference data input for hello blob file that contains car registration data.</span></span>
11. <span data-ttu-id="130b7-412">Klicka på **lägga till**, och följ sedan hello samma process för hello dataströmmen indata men väljer **REFERENSDATA** i stället för **dataströmmen** och hello **indata Alias**  är **registrering**.</span><span class="sxs-lookup"><span data-stu-id="130b7-412">Click **ADD**, and then follow hello same process for hello stream inputs but select **REFERENCE DATA** instead of **Data Stream** and hello **Input Alias** is **Registration**.</span></span>

12. <span data-ttu-id="130b7-413">Storage-konto som börjar med **tolldata**.</span><span class="sxs-lookup"><span data-stu-id="130b7-413">storage account that starts with **tolldata**.</span></span> <span data-ttu-id="130b7-414">hello behållarens namn bör vara **tolldata**, och hello **SÖKVÄGAR** ska vara **registration.json**.</span><span class="sxs-lookup"><span data-stu-id="130b7-414">hello container name should be **tolldata**, and hello **PATH PATTERN** should be **registration.json**.</span></span> <span data-ttu-id="130b7-415">Det här namnet är skiftlägeskänsligt och måste vara **gemener**.</span><span class="sxs-lookup"><span data-stu-id="130b7-415">This file name is case sensitive and should be **lowercase**.</span></span>
    
    ![Inställningar för lagring av blogg](media/stream-analytics-build-an-iot-solution-using-stream-analytics/image34.png)
13. <span data-ttu-id="130b7-417">Klicka på **skapa** toofinish hello guiden.</span><span class="sxs-lookup"><span data-stu-id="130b7-417">Click **Create** toofinish hello wizard.</span></span>

<span data-ttu-id="130b7-418">Nu har alla indata definierats.</span><span class="sxs-lookup"><span data-stu-id="130b7-418">Now all inputs are defined.</span></span>

## <a name="define-output"></a><span data-ttu-id="130b7-419">Definiera målet</span><span class="sxs-lookup"><span data-stu-id="130b7-419">Define output</span></span>
1. <span data-ttu-id="130b7-420">Översiktsrutan hello Stream Analytics-jobbet, Välj **utdata**.</span><span class="sxs-lookup"><span data-stu-id="130b7-420">On hello Stream Analytics job overview pane, select **OUTPUTS**.</span></span>
   
    ![Hej fliken utmatning och alternativet ”Lägg till utdata”](media/stream-analytics-build-an-iot-solution-using-stream-analytics/image37.png)
2. <span data-ttu-id="130b7-422">Klicka på **Lägg till**.</span><span class="sxs-lookup"><span data-stu-id="130b7-422">Click **Add**.</span></span>
3. <span data-ttu-id="130b7-423">Ange hello **utdataalias** too'output ”och sedan **Sink** för**SQL-databas**.</span><span class="sxs-lookup"><span data-stu-id="130b7-423">Set hello **Output alias** too'output' and then **Sink** too**SQL database**.</span></span>
3. <span data-ttu-id="130b7-424">Välj hello servernamnet som användes i hello ”Anslut tooDatabase från Visual Studio” avsnittet av hello artikel.</span><span class="sxs-lookup"><span data-stu-id="130b7-424">Select hello server name that was used in hello “Connect tooDatabase from Visual Studio” section of hello article.</span></span> <span data-ttu-id="130b7-425">hello databasnamnet är **TollDataDB**.</span><span class="sxs-lookup"><span data-stu-id="130b7-425">hello database name is **TollDataDB**.</span></span>
4. <span data-ttu-id="130b7-426">Ange **tolladmin** i hello **användarnamn** fältet **123toll!**</span><span class="sxs-lookup"><span data-stu-id="130b7-426">Enter **tolladmin** in hello **USERNAME** field, **123toll!**</span></span> <span data-ttu-id="130b7-427">i hello **lösenord** fältet och **TollDataRefJoin** i hello **tabell** fältet.</span><span class="sxs-lookup"><span data-stu-id="130b7-427">in hello **PASSWORD** field, and **TollDataRefJoin** in hello **TABLE** field.</span></span>
   
    ![Inställningar för SQL-databas](media/stream-analytics-build-an-iot-solution-using-stream-analytics/image38.png)
5. <span data-ttu-id="130b7-429">Klicka på **Skapa**.</span><span class="sxs-lookup"><span data-stu-id="130b7-429">Click **Create**.</span></span>

## <a name="azure-stream-analytics-query"></a><span data-ttu-id="130b7-430">Azure Stream analytics-fråga</span><span class="sxs-lookup"><span data-stu-id="130b7-430">Azure Stream analytics query</span></span>
<span data-ttu-id="130b7-431">Hej **FRÅGAN** fliken innehåller en SQL-fråga att transformeringar hello inkommande data.</span><span class="sxs-lookup"><span data-stu-id="130b7-431">hello **QUERY** tab contains a SQL query that transforms hello incoming data.</span></span>

![En fråga läggs fliken för toohello fråga](media/stream-analytics-build-an-iot-solution-using-stream-analytics/image39.png)

<span data-ttu-id="130b7-433">Den här självstudiekursen försöker tooanswer flera företag frågor om tootoll data och konstruktioner Stream Analytics-frågor som kan användas i Azure Stream Analytics tooprovide relevant svar.</span><span class="sxs-lookup"><span data-stu-id="130b7-433">This tutorial attempts tooanswer several business questions that are related tootoll data and constructs Stream Analytics queries that can be used in Azure Stream Analytics tooprovide a relevant answer.</span></span>

<span data-ttu-id="130b7-434">Innan du börjar din första Stream Analytics-jobbet utforska vi några scenarier och hello frågesyntaxen.</span><span class="sxs-lookup"><span data-stu-id="130b7-434">Before you start your first Stream Analytics job, let’s explore a few scenarios and hello query syntax.</span></span>

## <a name="introduction-tooazure-stream-analytics-query-language"></a><span data-ttu-id="130b7-435">Introduktion tooAzure Stream Analytics-frågespråket</span><span class="sxs-lookup"><span data-stu-id="130b7-435">Introduction tooAzure Stream Analytics query language</span></span>
- - -
<span data-ttu-id="130b7-436">Anta att du behöver toocount hello antalet fordon som anger en avgift monter.</span><span class="sxs-lookup"><span data-stu-id="130b7-436">Let’s say that you need toocount hello number of vehicles that enter a toll booth.</span></span> <span data-ttu-id="130b7-437">Eftersom detta är en ständig ström med händelser har du toodefine en ”period tid”.</span><span class="sxs-lookup"><span data-stu-id="130b7-437">Because this is a continuous stream of events, you have toodefine a “period of time.”</span></span> <span data-ttu-id="130b7-438">Nu ska vi ändra hello fråga toobe ”hur många fordon anger en avgift monter alla tre minuter”?.</span><span class="sxs-lookup"><span data-stu-id="130b7-438">Let's modify hello question toobe “How many vehicles enter a toll booth every three minutes?”.</span></span> <span data-ttu-id="130b7-439">Det här är ofta hänvisas tooas hello rullande count.</span><span class="sxs-lookup"><span data-stu-id="130b7-439">This is commonly referred tooas hello tumbling count.</span></span>

<span data-ttu-id="130b7-440">Nu ska vi titta på hello Azure Stream Analytics-fråga som svar på den här frågan:</span><span class="sxs-lookup"><span data-stu-id="130b7-440">Let’s look at hello Azure Stream Analytics query that answers this question:</span></span>

    SELECT TollId, System.Timestamp AS WindowEnd, COUNT(*) AS Count
    FROM EntryStream TIMESTAMP BY EntryTime
    GROUP BY TUMBLINGWINDOW(minute, 3), TollId

<span data-ttu-id="130b7-441">Som du kan se använder Azure Stream Analytics ett frågespråk som som SQL och lägger till några tillägg toospecify tidsrelaterade aspekter av hello frågan.</span><span class="sxs-lookup"><span data-stu-id="130b7-441">As you can see, Azure Stream Analytics uses a query language that's like SQL and adds a few extensions toospecify time-related aspects of hello query.</span></span>

<span data-ttu-id="130b7-442">Mer information finns i avsnittet om [tidshantering](https://msdn.microsoft.com/library/azure/mt582045.aspx) och [fönsterhantering](https://msdn.microsoft.com/library/azure/dn835019.aspx) konstruktioner som används i hello frågan från MSDN.</span><span class="sxs-lookup"><span data-stu-id="130b7-442">For more details, read about [Time Management](https://msdn.microsoft.com/library/azure/mt582045.aspx) and [Windowing](https://msdn.microsoft.com/library/azure/dn835019.aspx) constructs used in hello query from MSDN.</span></span>

## <a name="testing-azure-stream-analytics-queries"></a><span data-ttu-id="130b7-443">Testa Azure Stream Analytics-frågor</span><span class="sxs-lookup"><span data-stu-id="130b7-443">Testing Azure Stream Analytics queries</span></span>
<span data-ttu-id="130b7-444">Nu när du har skrivit ditt första Azure Stream Analytics-fråga är tid tootest den med hjälp av exempeldatafiler finns i mappen TollApp i hello följande sökväg:</span><span class="sxs-lookup"><span data-stu-id="130b7-444">Now that you have written your first Azure Stream Analytics query, it is time tootest it by using sample data files located in your TollApp folder in hello following path:</span></span>

<span data-ttu-id="130b7-445">**.. \\TollApp\\TollApp\\Data**</span><span class="sxs-lookup"><span data-stu-id="130b7-445">**..\\TollApp\\TollApp\\Data**</span></span>

<span data-ttu-id="130b7-446">Den här mappen innehåller hello följande filer:</span><span class="sxs-lookup"><span data-stu-id="130b7-446">This folder contains hello following files:</span></span>

* <span data-ttu-id="130b7-447">Entry.JSON</span><span class="sxs-lookup"><span data-stu-id="130b7-447">Entry.json</span></span>
* <span data-ttu-id="130b7-448">Exit.JSON</span><span class="sxs-lookup"><span data-stu-id="130b7-448">Exit.json</span></span>
* <span data-ttu-id="130b7-449">Registration.JSON</span><span class="sxs-lookup"><span data-stu-id="130b7-449">Registration.json</span></span>

## <a name="question-1-number-of-vehicles-entering-a-toll-booth"></a><span data-ttu-id="130b7-450">Fråga 1: Antal fordon att ange en avgift monter</span><span class="sxs-lookup"><span data-stu-id="130b7-450">Question 1: Number of vehicles entering a toll booth</span></span>
1. <span data-ttu-id="130b7-451">Öppna hello Azure-portalen och gå tooyour skapade Azure Stream Analytics-jobbet.</span><span class="sxs-lookup"><span data-stu-id="130b7-451">Open hello Azure portal and go tooyour created Azure Stream Analytics job.</span></span> <span data-ttu-id="130b7-452">Klicka på hello **FRÅGAN** fliken och klistra in frågan från hello föregående avsnitt.</span><span class="sxs-lookup"><span data-stu-id="130b7-452">Click hello **QUERY** tab and paste query from hello previous section.</span></span>

2. <span data-ttu-id="130b7-453">toovalidate den här frågan mot exempeldata, överför hello data till hello EntryStream indata genom att klicka på hello... symbol och välja **ladda upp exempeldata från filen**.</span><span class="sxs-lookup"><span data-stu-id="130b7-453">toovalidate this query against sample data, upload hello data into hello EntryStream input by clicking hello ... symbol and selecting **Upload sample data from file**.</span></span>

    ![Skärmbild av hello Entry.json fil](media/stream-analytics-build-an-iot-solution-using-stream-analytics/image41.png)
3. <span data-ttu-id="130b7-455">Hello i fönstret som visas väljer hello-fil (Entry.json) på din lokala dator och klicka på **OK**.</span><span class="sxs-lookup"><span data-stu-id="130b7-455">In hello pane that appears select hello file (Entry.json) on your local machine and click **OK**.</span></span> <span data-ttu-id="130b7-456">Hej **Test** ikon kommer nu belysa och vara klickbara.</span><span class="sxs-lookup"><span data-stu-id="130b7-456">hello **Test** icon will now illuminate and be clickable.</span></span>
   
    ![Skärmbild av hello Entry.json fil](media/stream-analytics-build-an-iot-solution-using-stream-analytics/image42.png)
3. <span data-ttu-id="130b7-458">Verifiera att hello utdata från hello frågan är korrekt:</span><span class="sxs-lookup"><span data-stu-id="130b7-458">Validate that hello output of hello query is as expected:</span></span>
   
    ![Resultaten av hello test](media/stream-analytics-build-an-iot-solution-using-stream-analytics/image43.png)

## <a name="question-2-report-total-time-for-each-car-toopass-through-hello-toll-booth"></a><span data-ttu-id="130b7-460">Fråga 2: Rapporten total tid för varje bil toopass via hello avgift monter</span><span class="sxs-lookup"><span data-stu-id="130b7-460">Question 2: Report total time for each car toopass through hello toll booth</span></span>
<span data-ttu-id="130b7-461">hello Genomsnittlig tid som krävs för en bil toopass via hello avgift hjälper tooassess hello effektiviteten för hello processen och hello kundupplevelsen.</span><span class="sxs-lookup"><span data-stu-id="130b7-461">hello average time that's required for a car toopass through hello toll helps tooassess hello efficiency of hello process and hello customer experience.</span></span>

<span data-ttu-id="130b7-462">toofind hello totala tiden du behöver toojoin hello EntryTime ström med hello ExitTime dataströmmen.</span><span class="sxs-lookup"><span data-stu-id="130b7-462">toofind hello total time, you need toojoin hello EntryTime stream with hello ExitTime stream.</span></span> <span data-ttu-id="130b7-463">Du kommer att ansluta till hello dataströmmar för TollId och LicencePlate kolumner.</span><span class="sxs-lookup"><span data-stu-id="130b7-463">You will join hello streams on TollId and LicencePlate columns.</span></span> <span data-ttu-id="130b7-464">Hej **ansluta** operatören kräver toospecify temporal handtag som beskriver hello acceptabel tid skillnaden mellan hello ansluten händelser.</span><span class="sxs-lookup"><span data-stu-id="130b7-464">hello **JOIN** operator requires you toospecify temporal leeway that describes hello acceptable time difference between hello joined events.</span></span> <span data-ttu-id="130b7-465">Du kommer att använda **DATEDIFF** fungerar toospecify att händelser ska vara mer än 15 minuter från varandra.</span><span class="sxs-lookup"><span data-stu-id="130b7-465">You will use **DATEDIFF** function toospecify that events should be no more than 15 minutes from each other.</span></span> <span data-ttu-id="130b7-466">Du kan också använda hello **DATEDIFF** funktionen tooexit och transaktionen tider toocompute hello faktiska tiden som en bil tillbringar i hello avgiftsbelagt station.</span><span class="sxs-lookup"><span data-stu-id="130b7-466">You will also apply hello **DATEDIFF** function tooexit and entry times toocompute hello actual time that a car spends in hello toll station.</span></span> <span data-ttu-id="130b7-467">Observera hello skillnaden mellan hello användning av **DATEDIFF** när den används i en **Välj** instruktionen snarare än en **ansluta** villkor.</span><span class="sxs-lookup"><span data-stu-id="130b7-467">Note hello difference of hello use of **DATEDIFF** when it's used in a **SELECT** statement rather than a **JOIN** condition.</span></span>

    SELECT EntryStream.TollId, EntryStream.EntryTime, ExitStream.ExitTime, EntryStream.LicensePlate, DATEDIFF (minute , EntryStream.EntryTime, ExitStream.ExitTime) AS DurationInMinutes
    FROM EntryStream TIMESTAMP BY EntryTime
    JOIN ExitStream TIMESTAMP BY ExitTime
    ON (EntryStream.TollId= ExitStream.TollId AND EntryStream.LicensePlate = ExitStream.LicensePlate)
    AND DATEDIFF (minute, EntryStream, ExitStream ) BETWEEN 0 AND 15

1. <span data-ttu-id="130b7-468">tootest den här frågan update hello-fråga på hello **FRÅGAN** för hello jobbet.</span><span class="sxs-lookup"><span data-stu-id="130b7-468">tootest this query, update hello query on hello **QUERY** for hello job.</span></span> <span data-ttu-id="130b7-469">Lägg till hello testfil för **ExitStream** precis som **EntryStream** angavs ovan.</span><span class="sxs-lookup"><span data-stu-id="130b7-469">Add hello test file for **ExitStream** just like **EntryStream** was entered above.</span></span>
   
2. <span data-ttu-id="130b7-470">Klicka på **Test**.</span><span class="sxs-lookup"><span data-stu-id="130b7-470">Click **Test**.</span></span>

3. <span data-ttu-id="130b7-471">Välj hello kryssrutan tootest hello frågan och visa hello utdata:</span><span class="sxs-lookup"><span data-stu-id="130b7-471">Select hello check box tootest hello query and view hello output:</span></span>
   
    ![Utdata från hello test](media/stream-analytics-build-an-iot-solution-using-stream-analytics/image45.png)

## <a name="question-3-report-all-commercial-vehicles-with-expired-registration"></a><span data-ttu-id="130b7-473">Fråga 3: Rapportera alla kommersiella fordon med utgångna registrering</span><span class="sxs-lookup"><span data-stu-id="130b7-473">Question 3: Report all commercial vehicles with expired registration</span></span>
<span data-ttu-id="130b7-474">Azure Stream Analytics kan använda statiska ögonblicksbilder av data toojoin med temporala dataströmmar.</span><span class="sxs-lookup"><span data-stu-id="130b7-474">Azure Stream Analytics can use static snapshots of data toojoin with temporal data streams.</span></span> <span data-ttu-id="130b7-475">toodemonstrate den här funktionen kan använda hello följande exempel fråga.</span><span class="sxs-lookup"><span data-stu-id="130b7-475">toodemonstrate this capability, use hello following sample question.</span></span>

<span data-ttu-id="130b7-476">Om en kommersiell vehicle registreras med hello avgift företag, släpper den igenom hello avgift monter utan att ha stoppats för inspektion.</span><span class="sxs-lookup"><span data-stu-id="130b7-476">If a commercial vehicle is registered with hello toll company, it can pass through hello toll booth without being stopped for inspection.</span></span> <span data-ttu-id="130b7-477">Du använder kommersiellt fordon registrering sökning tabell tooidentify alla kommersiella fordon som har upphört att gälla registreringar.</span><span class="sxs-lookup"><span data-stu-id="130b7-477">You will use Commercial Vehicle Registration lookup table tooidentify all commercial vehicles that have expired registrations.</span></span>

```
SELECT EntryStream.EntryTime, EntryStream.LicensePlate, EntryStream.TollId, Registration.RegistrationId
FROM EntryStream TIMESTAMP BY EntryTime
JOIN Registration
ON EntryStream.LicensePlate = Registration.LicensePlate
WHERE Registration.Expired = '1'
```

<span data-ttu-id="130b7-478">tootest en fråga med hjälp av referensdata, behöver du toodefine ingen källa för hello referensdata som du redan har gjort.</span><span class="sxs-lookup"><span data-stu-id="130b7-478">tootest a query by using reference data, you need toodefine an input source for hello reference data, which you have done already.</span></span>

<span data-ttu-id="130b7-479">tootest den här frågan, klistra in hello frågan i hello **FRÅGAN** klickar du på **Test**, och ange hello två indatakällor hello registrering exempeldata och klicka på **Test**.</span><span class="sxs-lookup"><span data-stu-id="130b7-479">tootest this query, paste hello query into hello **QUERY** tab, click **Test**, and specify hello two input sources and hello registration sample data and click **Test**.</span></span>  
   
![Utdata från hello test](media/stream-analytics-build-an-iot-solution-using-stream-analytics/image46.png)

## <a name="start-hello-stream-analytics-job"></a><span data-ttu-id="130b7-481">Starta hello Stream Analytics-jobbet</span><span class="sxs-lookup"><span data-stu-id="130b7-481">Start hello Stream Analytics job</span></span>
<span data-ttu-id="130b7-482">Nu är det toofinish hello konfiguration och starta hello jobbet.</span><span class="sxs-lookup"><span data-stu-id="130b7-482">Now it's time toofinish hello configuration and start hello job.</span></span> <span data-ttu-id="130b7-483">Spara hello frågan från fråga 3 som resultat som matchar hello schemat för hello **TollDataRefJoin** utdatatabellen.</span><span class="sxs-lookup"><span data-stu-id="130b7-483">Save hello query from Question 3, which will produce output that matches hello schema of hello **TollDataRefJoin** output table.</span></span>

<span data-ttu-id="130b7-484">Gå toohello jobbet **INSTRUMENTPANELEN**, och klicka på **starta**.</span><span class="sxs-lookup"><span data-stu-id="130b7-484">Go toohello job **DASHBOARD**, and click **START**.</span></span>

![Skärmbild av hello Start-knappen i hello jobbet instrumentpanel](media/stream-analytics-build-an-iot-solution-using-stream-analytics/image48.png)

<span data-ttu-id="130b7-486">Ändra hello hello dialogrutan som öppnas, **starta utdata** tid för**anpassad tid**.</span><span class="sxs-lookup"><span data-stu-id="130b7-486">In hello dialog box that opens, change hello **START OUTPUT** time too**CUSTOM TIME**.</span></span> <span data-ttu-id="130b7-487">Ändra hello timme tooone timme före hello aktuell tid.</span><span class="sxs-lookup"><span data-stu-id="130b7-487">Change hello hour tooone hour before hello current time.</span></span> <span data-ttu-id="130b7-488">Den här ändringen gör att alla händelser från hello händelsehubb bearbetas eftersom du startade toogenerate hello händelser hello början av hello kursen.</span><span class="sxs-lookup"><span data-stu-id="130b7-488">This change ensures that all events from hello event hub are processed since you started toogenerate hello events at hello beginning of hello tutorial.</span></span> <span data-ttu-id="130b7-489">Klicka på hello **starta** knappen toostart hello jobb.</span><span class="sxs-lookup"><span data-stu-id="130b7-489">Now click hello **Start** button toostart hello job.</span></span>

![Val av anpassade tid](media/stream-analytics-build-an-iot-solution-using-stream-analytics/image49.png)

<span data-ttu-id="130b7-491">Startar hello jobb kan ta några minuter.</span><span class="sxs-lookup"><span data-stu-id="130b7-491">Starting hello job can take a few minutes.</span></span> <span data-ttu-id="130b7-492">Du kan se status för hello på översta nivån hello-sidan för Stream Analytics.</span><span class="sxs-lookup"><span data-stu-id="130b7-492">You can see hello status on hello top-level page for Stream Analytics.</span></span>

![Skärmbild av hello hello jobbets status](media/stream-analytics-build-an-iot-solution-using-stream-analytics/image50.png)

## <a name="check-results-in-visual-studio"></a><span data-ttu-id="130b7-494">Kontrollera resultaten i Visual Studio</span><span class="sxs-lookup"><span data-stu-id="130b7-494">Check results in Visual Studio</span></span>
1. <span data-ttu-id="130b7-495">Öppna Visual Studio Server Explorer och högerklicka på hello **TollDataRefJoin** tabell.</span><span class="sxs-lookup"><span data-stu-id="130b7-495">Open Visual Studio Server Explorer, and right-click hello **TollDataRefJoin** table.</span></span>
2. <span data-ttu-id="130b7-496">Klicka på **visa tabelldata** toosee hello utdata för jobbet.</span><span class="sxs-lookup"><span data-stu-id="130b7-496">Click **Show Table Data** toosee hello output of your job.</span></span>
   
    ![Val av ”Visa Data för tabell” i Server Explorer](media/stream-analytics-build-an-iot-solution-using-stream-analytics/image51.jpg)

## <a name="scale-out-azure-stream-analytics-jobs"></a><span data-ttu-id="130b7-498">Skala ut Azure Stream Analytics-jobb</span><span class="sxs-lookup"><span data-stu-id="130b7-498">Scale out Azure Stream Analytics jobs</span></span>
<span data-ttu-id="130b7-499">Azure Stream Analytics utformats tooelastically skala så att den kan hantera stora mängder data.</span><span class="sxs-lookup"><span data-stu-id="130b7-499">Azure Stream Analytics is designed tooelastically scale so that it can handle a lot of data.</span></span> <span data-ttu-id="130b7-500">hello Azure Stream Analytics-fråga kan använda en **PARTITION BY** satsen tootell hello system som det här steget ska skalas ut. **PartitionId** är en särskild kolumn som hello system lägger till toomatch hello partitions-ID för hello-indata (händelsehubb).</span><span class="sxs-lookup"><span data-stu-id="130b7-500">hello Azure Stream Analytics query can use a **PARTITION BY** clause tootell hello system that this step will scale out. **PartitionId** is a special column that hello system adds toomatch hello partition ID of hello input (event hub).</span></span>

    SELECT TollId, System.Timestamp AS WindowEnd, COUNT(*)AS Count
    FROM EntryStream TIMESTAMP BY EntryTime PARTITION BY PartitionId
    GROUP BY TUMBLINGWINDOW(minute,3), TollId, PartitionId

1. <span data-ttu-id="130b7-501">Stoppa hello aktuella jobb, uppdatering hello frågan i hello **FRÅGAN** flik och öppna hello **inställningar** redskap hello jobbet instrumentpanelen.</span><span class="sxs-lookup"><span data-stu-id="130b7-501">Stop hello current job, update hello query in hello **QUERY** tab, and open hello **Settings** gear in hello job dashboard.</span></span> <span data-ttu-id="130b7-502">Klicka på **skala**.</span><span class="sxs-lookup"><span data-stu-id="130b7-502">Click **Scale**.</span></span>
   
    <span data-ttu-id="130b7-503">**STREAMING enheter** definiera hello mycket datorkraft som hello jobb kan ta emot.</span><span class="sxs-lookup"><span data-stu-id="130b7-503">**STREAMING UNITS** define hello amount of compute power that hello job can receive.</span></span>
2. <span data-ttu-id="130b7-504">Ändra hello nedrullningsbara från 1 från 6.</span><span class="sxs-lookup"><span data-stu-id="130b7-504">Change hello drop down from 1 from 6.</span></span>
   
    ![Skärmbild av du väljer 6 enheter för strömning](media/stream-analytics-build-an-iot-solution-using-stream-analytics/image52.png)
3. <span data-ttu-id="130b7-506">Gå toohello **utdata** fliken och ändra hello namnet på hello SQL-tabellen för**TollDataTumblingCountPartitioned**.</span><span class="sxs-lookup"><span data-stu-id="130b7-506">Go toohello **OUTPUTS** tab and change hello name of hello SQL table too**TollDataTumblingCountPartitioned**.</span></span>

<span data-ttu-id="130b7-507">Om du startar hello jobbet nu kan Azure Stream Analytics distribuera arbete i fler beräkningsresurser och få bättre genomströmning.</span><span class="sxs-lookup"><span data-stu-id="130b7-507">If you start hello job now, Azure Stream Analytics can distribute work across more compute resources and achieve better throughput.</span></span> <span data-ttu-id="130b7-508">Observera att hello TollApp programmet även skickar händelser som har partitionerats med TollId.</span><span class="sxs-lookup"><span data-stu-id="130b7-508">Please note that hello TollApp application is also sending events partitioned by TollId.</span></span>

## <a name="monitor"></a><span data-ttu-id="130b7-509">Övervaka</span><span class="sxs-lookup"><span data-stu-id="130b7-509">Monitor</span></span>
<span data-ttu-id="130b7-510">Hej **ÖVERVAKAREN** innehåller statistik om hello köra jobb.</span><span class="sxs-lookup"><span data-stu-id="130b7-510">hello **MONITOR** area contains statistics about hello running job.</span></span> <span data-ttu-id="130b7-511">Första gången konfiguration behövs toouse hello storage-konto i hello samma region (namnet avgift som hello resten av det här dokumentet).</span><span class="sxs-lookup"><span data-stu-id="130b7-511">First time configuration is needed toouse hello storage account in hello same region (name toll like hello rest of this document).</span></span>   

![Skärmbild av Övervakare](media/stream-analytics-build-an-iot-solution-using-stream-analytics/monitoring.png)

<span data-ttu-id="130b7-513">Du kan komma åt **aktivitetsloggar** hello jobbet instrumentpanel **inställningar** samt område.</span><span class="sxs-lookup"><span data-stu-id="130b7-513">You can access **Activity Logs** from hello job dashboard **Settings** area as well.</span></span>


## <a name="conclusion"></a><span data-ttu-id="130b7-514">Slutsats</span><span class="sxs-lookup"><span data-stu-id="130b7-514">Conclusion</span></span>
<span data-ttu-id="130b7-515">Den här kursen introduceras toohello Azure Stream Analytics-tjänsten.</span><span class="sxs-lookup"><span data-stu-id="130b7-515">This tutorial introduced you toohello Azure Stream Analytics service.</span></span> <span data-ttu-id="130b7-516">Det visas hur tooconfigure indata och utdata för hello Stream Analytics-jobbet.</span><span class="sxs-lookup"><span data-stu-id="130b7-516">It demonstrated how tooconfigure inputs and outputs for hello Stream Analytics job.</span></span> <span data-ttu-id="130b7-517">Med hello avgift Data scenariot beskrivs hello kursen vanliga problem som uppstår i hello utrymme för data i rörelse och hur de kan lösas med den enkla SQL-liknande frågor i Azure Stream Analytics.</span><span class="sxs-lookup"><span data-stu-id="130b7-517">Using hello Toll Data scenario, hello tutorial explained common types of problems that arise in hello space of data in motion and how they can be solved with simple SQL-like queries in Azure Stream Analytics.</span></span> <span data-ttu-id="130b7-518">hello kursen beskrivs SQL tillägget konstruktioner för att arbeta med temporala data.</span><span class="sxs-lookup"><span data-stu-id="130b7-518">hello tutorial described SQL extension constructs for working with temporal data.</span></span> <span data-ttu-id="130b7-519">Den visade hur toojoin dataströmmar, hur tooenrich hello dataströmmen med statiska referensdata och hur tooscale ut en fråga tooachieve högre genomströmning.</span><span class="sxs-lookup"><span data-stu-id="130b7-519">It showed how toojoin data streams, how tooenrich hello data stream with static reference data, and how tooscale out a query tooachieve higher throughput.</span></span>

<span data-ttu-id="130b7-520">Även om den här kursen ger en bra introduktion, är det inte fullständig på något sätt.</span><span class="sxs-lookup"><span data-stu-id="130b7-520">Although this tutorial provides a good introduction, it is not complete by any means.</span></span> <span data-ttu-id="130b7-521">Du kan hitta mer frågemönster med hello SAQL språk på [fråga exempel för vanliga Stream Analytics användningsmönster](stream-analytics-stream-analytics-query-patterns.md).</span><span class="sxs-lookup"><span data-stu-id="130b7-521">You can find more query patterns using hello SAQL language at [Query examples for common Stream Analytics usage patterns](stream-analytics-stream-analytics-query-patterns.md).</span></span>
<span data-ttu-id="130b7-522">Se toohello [onlinedokumentation](https://azure.microsoft.com/documentation/services/stream-analytics/) toolearn mer om Azure Stream Analytics.</span><span class="sxs-lookup"><span data-stu-id="130b7-522">Refer toohello [online documentation](https://azure.microsoft.com/documentation/services/stream-analytics/) toolearn more about Azure Stream Analytics.</span></span>

## <a name="clean-up-your-azure-account"></a><span data-ttu-id="130b7-523">Rensa ditt Azure-konto</span><span class="sxs-lookup"><span data-stu-id="130b7-523">Clean up your Azure account</span></span>
1. <span data-ttu-id="130b7-524">Stoppa hello Stream Analytics-jobbet i hello Azure-portalen.</span><span class="sxs-lookup"><span data-stu-id="130b7-524">Stop hello Stream Analytics job in hello Azure portal.</span></span>
   
    <span data-ttu-id="130b7-525">Hej Setup.ps1 skript skapar två händelsehubbar och en SQL-databas.</span><span class="sxs-lookup"><span data-stu-id="130b7-525">hello Setup.ps1 script creates two event hubs and a SQL database.</span></span> <span data-ttu-id="130b7-526">följande instruktioner hjälp Rensa resurser hello slutet av kursen hello hello.</span><span class="sxs-lookup"><span data-stu-id="130b7-526">hello following instructions help you clean up resources at hello end of hello tutorial.</span></span>
2. <span data-ttu-id="130b7-527">Ange i ett PowerShell-fönster **.\\ CleanUp.ps1** toostart hello skript som tar bort resurser som används i hello självstudiekursen.</span><span class="sxs-lookup"><span data-stu-id="130b7-527">In a PowerShell window, type **.\\Cleanup.ps1** toostart hello script that deletes resources used in hello tutorial.</span></span>
   
   > [!NOTE]
   > <span data-ttu-id="130b7-528">Resurser som identifieras av hello namn.</span><span class="sxs-lookup"><span data-stu-id="130b7-528">Resources are identified by hello name.</span></span> <span data-ttu-id="130b7-529">Kontrollera att varje objekt granska noggrant innan du bekräftar borttagningen.</span><span class="sxs-lookup"><span data-stu-id="130b7-529">Make sure you carefully review each item before confirming removal.</span></span>
   > 
   > 



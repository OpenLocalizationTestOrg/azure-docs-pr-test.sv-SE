---
title: "Felsökningsguide för Azure Stream Analytics | Microsoft Docs"
description: "Så här felsöker du Stream Analytics-jobbet"
keywords: "Felsöka programguiden"
documentationcenter: 
services: stream-analytics
author: jeffstokes72
manager: jhubbard
editor: cgronlun
ms.assetid: 
ms.service: stream-analytics
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: data-services
ms.date: 04/20/2017
ms.author: jeffstok
ms.openlocfilehash: 8ecf279047f06691cef1bc0db06888974405a9f0
ms.sourcegitcommit: 18ad9bc049589c8e44ed277f8f43dcaa483f3339
ms.translationtype: MT
ms.contentlocale: sv-SE
ms.lasthandoff: 08/29/2017
---
# <a name="troubleshooting-guide-for-azure-stream-analytics"></a><span data-ttu-id="6f747-104">Felsökningsguide för Azure Stream Analytics</span><span class="sxs-lookup"><span data-stu-id="6f747-104">Troubleshooting guide for Azure Stream Analytics</span></span>

<span data-ttu-id="6f747-105">Felsökning av Azure Stream Analytics kan verka vara besvärligt vid en första titt.</span><span class="sxs-lookup"><span data-stu-id="6f747-105">Azure Stream Analytics troubleshooting can appear to be a complex effort at first glance.</span></span> <span data-ttu-id="6f747-106">Vi har skapat den här guiden för att förenkla processen och ta bort gissningar om indata, utdata, frågor och funktioner när du arbetar med många användare.</span><span class="sxs-lookup"><span data-stu-id="6f747-106">After working with many users, we have created this guide to help streamline the process and remove the guesswork about your inputs, outputs, queries, and functions.</span></span>

## <a name="troubleshoot-your-stream-analytics-job"></a><span data-ttu-id="6f747-107">Felsöka Stream Analytics-jobbet</span><span class="sxs-lookup"><span data-stu-id="6f747-107">Troubleshoot your Stream Analytics job</span></span>

<span data-ttu-id="6f747-108">Använd följande riktlinjer för bästa resultat vid felsökning Stream Analytics-jobbet:</span><span class="sxs-lookup"><span data-stu-id="6f747-108">For best results in troubleshooting your Stream Analytics job, use the following guidelines:</span></span>

1.  <span data-ttu-id="6f747-109">Testa anslutningen:</span><span class="sxs-lookup"><span data-stu-id="6f747-109">Test your connectivity:</span></span>
    - <span data-ttu-id="6f747-110">Kontrollera anslutningen till in- och utdataenheter med hjälp av den **Testanslutningen** knappen för varje indata och utdata.</span><span class="sxs-lookup"><span data-stu-id="6f747-110">Verify connectivity to inputs and outputs by using the **Test Connection** button for each input and output.</span></span>

2.  <span data-ttu-id="6f747-111">Granska dina indata:</span><span class="sxs-lookup"><span data-stu-id="6f747-111">Examine your input data:</span></span>
    - <span data-ttu-id="6f747-112">Använd för att kontrollera att indata flödar till Händelsehubben [Service Bus Explorer](https://code.msdn.microsoft.com/windowsapps/Service-Bus-Explorer-f2abca5a) att ansluta till Azure Event Hub (om Event Hub indata används).</span><span class="sxs-lookup"><span data-stu-id="6f747-112">To verify that input data is flowing into Event Hub, use [Service Bus Explorer](https://code.msdn.microsoft.com/windowsapps/Service-Bus-Explorer-f2abca5a) to connect to Azure Event Hub (if Event Hub input is used).</span></span>  
    - <span data-ttu-id="6f747-113">Använd den [ **exempeldata** ](stream-analytics-sample-data-input.md) knappen för varje indata och hämta inkommande exempeldata.</span><span class="sxs-lookup"><span data-stu-id="6f747-113">Use the [**Sample Data**](stream-analytics-sample-data-input.md) button for each input, and download the input sample data.</span></span>
    - <span data-ttu-id="6f747-114">Inspektera exempeldata för att förstå formen av data: schemat och [datatyper](https://msdn.microsoft.com/library/azure/dn835065.aspx).</span><span class="sxs-lookup"><span data-stu-id="6f747-114">Inspect the sample data to understand the shape of the data: the schema and the [data types](https://msdn.microsoft.com/library/azure/dn835065.aspx).</span></span>

3.  <span data-ttu-id="6f747-115">Testa din fråga:</span><span class="sxs-lookup"><span data-stu-id="6f747-115">Test your query:</span></span>
    - <span data-ttu-id="6f747-116">På den **frågan** använder den **testa** knappen Testa frågan och använda hämtade exempeldata till [testa frågan](stream-analytics-test-query.md).</span><span class="sxs-lookup"><span data-stu-id="6f747-116">On the **Query** tab, use the **Test** button to test the query, and use the downloaded sample data to [test the query](stream-analytics-test-query.md).</span></span> <span data-ttu-id="6f747-117">Granska eventuella fel och försöka korrigera dem.</span><span class="sxs-lookup"><span data-stu-id="6f747-117">Examine any errors and attempt to correct them.</span></span>
    - <span data-ttu-id="6f747-118">Om du använder [ **Timestamp By**](https://msdn.microsoft.com/library/azure/mt573293.aspx), kontrollera att händelserna har tidsstämplar som är större än den [jobbet starttid](stream-analytics-out-of-order-and-late-events.md).</span><span class="sxs-lookup"><span data-stu-id="6f747-118">If you use [**Timestamp By**](https://msdn.microsoft.com/library/azure/mt573293.aspx), verify that the events have timestamps greater than the [job start time](stream-analytics-out-of-order-and-late-events.md).</span></span>

4.  <span data-ttu-id="6f747-119">Felsöka din fråga:</span><span class="sxs-lookup"><span data-stu-id="6f747-119">Debug your query:</span></span>
    - <span data-ttu-id="6f747-120">Återskapa frågan progressivt från enkla select-instruktion för mer komplexa mängder med hjälp av stegen.</span><span class="sxs-lookup"><span data-stu-id="6f747-120">Rebuild the query progressively from simple select statement to more complex aggregates by using steps.</span></span> <span data-ttu-id="6f747-121">Du kan skapa fråga logiken steg för steg, Använd [WITH](https://msdn.microsoft.com/library/azure/dn835049.aspx) satser.</span><span class="sxs-lookup"><span data-stu-id="6f747-121">To build up the query logic step by step, use [WITH](https://msdn.microsoft.com/library/azure/dn835049.aspx) clauses.</span></span>
    - <span data-ttu-id="6f747-122">Använd [SELECT INTO](stream-analytics-select-into.md) felsöka frågesteg.</span><span class="sxs-lookup"><span data-stu-id="6f747-122">Use [SELECT INTO](stream-analytics-select-into.md) to debug query steps.</span></span>

5.  <span data-ttu-id="6f747-123">Undvika vanliga fallgropar som:</span><span class="sxs-lookup"><span data-stu-id="6f747-123">Eliminate common pitfalls, such as:</span></span>
    - <span data-ttu-id="6f747-124">En [ **där** ](https://msdn.microsoft.com/library/azure/dn835048.aspx) -sats i frågan har filtrerats ut alla händelser som förhindrar att inga utdata som genereras.</span><span class="sxs-lookup"><span data-stu-id="6f747-124">A [**WHERE**](https://msdn.microsoft.com/library/azure/dn835048.aspx) clause in the query filtered out all events, preventing any output from being generated.</span></span>
    - <span data-ttu-id="6f747-125">När du använder Windows-funktioner, vänta tills hela fönstret varaktigheten Se utdata från frågan.</span><span class="sxs-lookup"><span data-stu-id="6f747-125">When you use window functions, wait for the entire window duration to see an output from the query.</span></span>
    - <span data-ttu-id="6f747-126">Tidsstämpel för händelser som föregår jobbets starttid och därför händelser släpps.</span><span class="sxs-lookup"><span data-stu-id="6f747-126">The timestamp for events precedes the job start time and, therefore, events are being dropped.</span></span>

6.  <span data-ttu-id="6f747-127">Använd händelsen ordning:</span><span class="sxs-lookup"><span data-stu-id="6f747-127">Use event ordering:</span></span>
    - <span data-ttu-id="6f747-128">Om de föregående stegen fungerade bra, går du till den **inställningar** och välj [ **händelse ordning**](stream-analytics-out-of-order-and-late-events.md).</span><span class="sxs-lookup"><span data-stu-id="6f747-128">If all the previous steps worked fine, go to the **Settings** blade and select [**Event Ordering**](stream-analytics-out-of-order-and-late-events.md).</span></span> <span data-ttu-id="6f747-129">Kontrollera att den här principen är konfigurerad för vad klokt i ditt scenario.</span><span class="sxs-lookup"><span data-stu-id="6f747-129">Verify that this policy is configured for what makes sense in your scenario.</span></span> <span data-ttu-id="6f747-130">Principen är *inte* tillämpas när du använder den **testa** knappen för att testa frågan.</span><span class="sxs-lookup"><span data-stu-id="6f747-130">The policy is *not* applied when you use the **Test** button to test the query.</span></span> <span data-ttu-id="6f747-131">Resultatet är en skillnaden mellan testning i webbläsaren och kör jobbet i produktion.</span><span class="sxs-lookup"><span data-stu-id="6f747-131">This result is one difference between testing in-browser versus running the job in production.</span></span>

7.  <span data-ttu-id="6f747-132">Felsöka med hjälp av mätvärden:</span><span class="sxs-lookup"><span data-stu-id="6f747-132">Debug by using metrics:</span></span>
    - <span data-ttu-id="6f747-133">Om du hämtar inga utdata när förväntad varaktighet (baserat på frågan) kan du testa följande:</span><span class="sxs-lookup"><span data-stu-id="6f747-133">If you obtain no output after the expected duration (based on the query), try the following:</span></span>
        - <span data-ttu-id="6f747-134">Titta på [ **övervakningen mätvärdena** ](stream-analytics-monitoring.md) på den **övervakaren** fliken. Eftersom värdena aggregeras fördröjs mätvärdena med ett par minuter.</span><span class="sxs-lookup"><span data-stu-id="6f747-134">Look at [**Monitoring Metrics**](stream-analytics-monitoring.md) on the **Monitor** tab. Because the values are aggregated, the metrics are delayed by a few minutes.</span></span>
            - <span data-ttu-id="6f747-135">Om inkommande händelser > 0 jobbet kan läsa indata.</span><span class="sxs-lookup"><span data-stu-id="6f747-135">If Input Events > 0, the job is able to read input data.</span></span> <span data-ttu-id="6f747-136">Om händelser för indata inte är > 0:</span><span class="sxs-lookup"><span data-stu-id="6f747-136">If Input Events is not > 0, then:</span></span>
                - <span data-ttu-id="6f747-137">Om du vill se om datakällan har giltiga data, kontrollerar du den med [Service Bus Explorer](https://code.msdn.microsoft.com/windowsapps/Service-Bus-Explorer-f2abca5a).</span><span class="sxs-lookup"><span data-stu-id="6f747-137">To see whether the data source has valid data, check it by using [Service Bus Explorer](https://code.msdn.microsoft.com/windowsapps/Service-Bus-Explorer-f2abca5a).</span></span> <span data-ttu-id="6f747-138">Den här kontrollen utförs om jobbet använder Event Hub som indata.</span><span class="sxs-lookup"><span data-stu-id="6f747-138">This check applies if the job is using Event Hub as input.</span></span>
                - <span data-ttu-id="6f747-139">Kontrollera om data serialiseringsformat och datakodning är som förväntat.</span><span class="sxs-lookup"><span data-stu-id="6f747-139">Check to see whether the data serialization format and data encoding are as expected.</span></span>
                - <span data-ttu-id="6f747-140">Om jobbet använder en Händelsehubb, kontrollera om innehållet i meddelandet är *Null*.</span><span class="sxs-lookup"><span data-stu-id="6f747-140">If the job is using an Event Hub, check to see whether the body of the message is *Null*.</span></span>
            - <span data-ttu-id="6f747-141">Om Data Konverteringsfel > 0 och skapa följande kan vara sant:</span><span class="sxs-lookup"><span data-stu-id="6f747-141">If Data Conversion Errors > 0 and climbing, the following might be true:</span></span>
                - <span data-ttu-id="6f747-142">Jobbet kan inte deserialisera händelser.</span><span class="sxs-lookup"><span data-stu-id="6f747-142">The job might not be able to de-serialize the events.</span></span>
                - <span data-ttu-id="6f747-143">Händelseschemat överensstämmer inte med definierade eller förväntade schemat för händelser i frågan.</span><span class="sxs-lookup"><span data-stu-id="6f747-143">The event schema might not match the defined or expected schema of the events in the query.</span></span>
                - <span data-ttu-id="6f747-144">Datatyper i vissa fält kanske i inte stämmer förväntningar.</span><span class="sxs-lookup"><span data-stu-id="6f747-144">The datatypes of some of the fields in the event might not match expectations.</span></span>
            - <span data-ttu-id="6f747-145">Om körningsfel > 0, innebär det att jobbet kan ta emot data men det uppstår fel under bearbetning av frågan.</span><span class="sxs-lookup"><span data-stu-id="6f747-145">If Runtime Errors > 0, it means that the job can receive the data but is generating errors while processing the query.</span></span>
                - <span data-ttu-id="6f747-146">Om du vill söka efter fel, gå till den [granskningsloggar](../azure-resource-manager/resource-group-audit.md) och filtrera på *misslyckades* status.</span><span class="sxs-lookup"><span data-stu-id="6f747-146">To find the errors, go to the [Audit Logs](../azure-resource-manager/resource-group-audit.md) and filter on *Failed* status.</span></span>
            - <span data-ttu-id="6f747-147">Om InputEvents > 0 och OutputEvents = 0, betyder det att något av följande är sant:</span><span class="sxs-lookup"><span data-stu-id="6f747-147">If InputEvents > 0 and OutputEvents = 0, it means that one of the following is true:</span></span>
                - <span data-ttu-id="6f747-148">Frågebearbetningen resulterade i noll utdata-händelser.</span><span class="sxs-lookup"><span data-stu-id="6f747-148">Query processing resulted in zero output events.</span></span>
                - <span data-ttu-id="6f747-149">Händelser eller dess fält kan vara felaktig, vilket resulterar i noll utdata efter bearbetning.</span><span class="sxs-lookup"><span data-stu-id="6f747-149">Events or its fields might be malformed, resulting in zero output after query processing.</span></span>
                - <span data-ttu-id="6f747-150">Jobbet kunde inte pusha data till den [utdatamottagaren](stream-analytics-select-into.md) av anslutning eller autentisering skäl.</span><span class="sxs-lookup"><span data-stu-id="6f747-150">The job was unable to push data to the [output sink](stream-analytics-select-into.md) for connectivity or authentication reasons.</span></span>
        - <span data-ttu-id="6f747-151">I alla de tidigare nämnda fel fall operations loggmeddelanden beskrivs ytterligare information (inklusive vad som händer), förutom i fall där frågan logiken filtreras bort alla händelser.</span><span class="sxs-lookup"><span data-stu-id="6f747-151">In all the previously mentioned error cases, operations log messages explain additional details (including what is happening), except in cases where the query logic filtered out all events.</span></span> <span data-ttu-id="6f747-152">Om bearbetningen av flera händelser genererar fel, loggar Stream Analytics de första tre felmeddelandena av samma typ inom 10 minuter att Operations logs.</span><span class="sxs-lookup"><span data-stu-id="6f747-152">If the processing of multiple events generates errors, Stream Analytics logs the first three error messages of the same type within 10 minutes to Operations logs.</span></span> <span data-ttu-id="6f747-153">Sedan undertrycks ytterligare identiska fel med meddelandet ”fel sker för snabbt, dessa är dolt”.</span><span class="sxs-lookup"><span data-stu-id="6f747-153">It then suppresses additional identical errors with a message that reads “Errors are happening too rapidly, these are being suppressed.”</span></span>

8. <span data-ttu-id="6f747-154">Felsöka med hjälp av gransknings- och diagnostikloggar:</span><span class="sxs-lookup"><span data-stu-id="6f747-154">Debug by using audit and diagnostic logs:</span></span>
    - <span data-ttu-id="6f747-155">Använd [granskningsloggar](../azure-resource-manager/resource-group-audit.md), och filter för att identifiera och felsöka fel.</span><span class="sxs-lookup"><span data-stu-id="6f747-155">Use [Audit Logs](../azure-resource-manager/resource-group-audit.md), and filter to identify and debug errors.</span></span>
    - <span data-ttu-id="6f747-156">Använd [jobbet diagnostikloggar](stream-analytics-job-diagnostic-logs.md) att identifiera och felsöka fel.</span><span class="sxs-lookup"><span data-stu-id="6f747-156">Use [job diagnostic logs](stream-analytics-job-diagnostic-logs.md) to identify and debug errors.</span></span>

9. <span data-ttu-id="6f747-157">Granska utdata:</span><span class="sxs-lookup"><span data-stu-id="6f747-157">Examine the outputs:</span></span>
    - <span data-ttu-id="6f747-158">När jobbet har statusen är *kör*, beroende på den varaktighet som anges i frågan, kan du se utdata i datakällan mottagare.</span><span class="sxs-lookup"><span data-stu-id="6f747-158">When the job status is *Running*, depending on the duration that's stipulated in the query, you can see the output in the sink data source.</span></span>
    - <span data-ttu-id="6f747-159">Om du inte kan se utdata som kommer att en specifik utdatatypen omdirigera dem till Utdatatyp som är mindre komplex, till exempel en Azure-Blob.</span><span class="sxs-lookup"><span data-stu-id="6f747-159">If you cannot see outputs that are going to a specific output type, redirect them to an output type that is less complex, such as an Azure Blob.</span></span> <span data-ttu-id="6f747-160">Kontrollera med hjälp av Lagringsutforskaren utdata kan visas.</span><span class="sxs-lookup"><span data-stu-id="6f747-160">By using Storage Explorer, check to see whether the output can be seen.</span></span> <span data-ttu-id="6f747-161">Kontrollera om bandbreddsbegränsning gränser på utdata förhindrar data tas emot.</span><span class="sxs-lookup"><span data-stu-id="6f747-161">Additionally, verify whether throttling limits at the output are preventing data from being received.</span></span>

10. <span data-ttu-id="6f747-162">Använd dataflöde analys med jobbet diagram:</span><span class="sxs-lookup"><span data-stu-id="6f747-162">Use data-flow analysis with job diagram metrics:</span></span>
    - <span data-ttu-id="6f747-163">Analysera dataflöde och identifiera problem genom att använda den [jobbet diagram med](stream-analytics-job-diagram-with-metrics.md).</span><span class="sxs-lookup"><span data-stu-id="6f747-163">To analyze data flow and identify issues, use the [job diagram with metrics](stream-analytics-job-diagram-with-metrics.md).</span></span>

11. <span data-ttu-id="6f747-164">Öppna ett supportärende:</span><span class="sxs-lookup"><span data-stu-id="6f747-164">Open a support case:</span></span>
    - <span data-ttu-id="6f747-165">Slutligen, om allt annat misslyckas, öppna ett supportärende för Microsoft använder prenumerations-ID som innehåller ditt jobb.</span><span class="sxs-lookup"><span data-stu-id="6f747-165">Finally, if all else fails, open a Microsoft support case by using the SubscriptionID that contains your job.</span></span>

## <a name="get-help"></a><span data-ttu-id="6f747-166">Få hjälp</span><span class="sxs-lookup"><span data-stu-id="6f747-166">Get help</span></span>

<span data-ttu-id="6f747-167">För ytterligare hjälp försök vår [Azure Stream Analytics-forum](https://social.msdn.microsoft.com/Forums/en-US/home?forum=AzureStreamAnalytics).</span><span class="sxs-lookup"><span data-stu-id="6f747-167">For further assistance, try our [Azure Stream Analytics forum](https://social.msdn.microsoft.com/Forums/en-US/home?forum=AzureStreamAnalytics).</span></span>

## <a name="next-steps"></a><span data-ttu-id="6f747-168">Nästa steg</span><span class="sxs-lookup"><span data-stu-id="6f747-168">Next steps</span></span>

* [<span data-ttu-id="6f747-169">Introduktion till Azure Stream Analytics</span><span class="sxs-lookup"><span data-stu-id="6f747-169">Introduction to Azure Stream Analytics</span></span>](stream-analytics-introduction.md)
* [<span data-ttu-id="6f747-170">Komma igång med Azure Stream Analytics</span><span class="sxs-lookup"><span data-stu-id="6f747-170">Get started using Azure Stream Analytics</span></span>](stream-analytics-real-time-fraud-detection.md)
* [<span data-ttu-id="6f747-171">Skala Azure Stream Analytics-jobb</span><span class="sxs-lookup"><span data-stu-id="6f747-171">Scale Azure Stream Analytics jobs</span></span>](stream-analytics-scale-jobs.md)
* [<span data-ttu-id="6f747-172">Referens för Azure Stream Analytics-frågespråket</span><span class="sxs-lookup"><span data-stu-id="6f747-172">Azure Stream Analytics Query Language Reference</span></span>](https://msdn.microsoft.com/library/azure/dn834998.aspx)
* [<span data-ttu-id="6f747-173">Referens för Azure Stream Analytics Management REST API</span><span class="sxs-lookup"><span data-stu-id="6f747-173">Azure Stream Analytics Management REST API Reference</span></span>](https://msdn.microsoft.com/library/azure/dn835031.aspx)

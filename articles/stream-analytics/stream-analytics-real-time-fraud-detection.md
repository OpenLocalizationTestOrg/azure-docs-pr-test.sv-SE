# <a name="get-started-using-azure-stream-analytics-real-time-fraud-detection"></a><span data-ttu-id="8656f-101">Komma igång med Azure Stream Analytics: att upptäcka bedrägerier i realtid</span><span class="sxs-lookup"><span data-stu-id="8656f-101">Get started using Azure Stream Analytics: Real-time fraud detection</span></span>

<span data-ttu-id="8656f-102">Den här självstudiekursen innehåller en slutpunkt till slutpunkt illustration av hur toouse Azure Stream Analytics.</span><span class="sxs-lookup"><span data-stu-id="8656f-102">This tutorial provides an end-to-end illustration of how toouse Azure Stream Analytics.</span></span> <span data-ttu-id="8656f-103">Lär dig att:</span><span class="sxs-lookup"><span data-stu-id="8656f-103">You learn how to:</span></span> 

* <span data-ttu-id="8656f-104">Ta strömning händelser till en instans av Händelsehubbar i Azure.</span><span class="sxs-lookup"><span data-stu-id="8656f-104">Bring streaming events into an instance of Azure Event Hubs.</span></span> <span data-ttu-id="8656f-105">I den här kursen ska du använda en app som vi tillhandahåller som simulerar en dataström med metadata för mobiltelefon poster.</span><span class="sxs-lookup"><span data-stu-id="8656f-105">In this tutorial, you'll use an app that we provide that simulates a stream of mobile-phone metadata records.</span></span>

* <span data-ttu-id="8656f-106">Skriva SQL-liknande Stream Analytics-frågor tootransform data, samla information eller söker efter mönster.</span><span class="sxs-lookup"><span data-stu-id="8656f-106">Write SQL-like Stream Analytics queries tootransform data, aggregating information or looking for patterns.</span></span> <span data-ttu-id="8656f-107">Du ser hur toouse en fråga tooexamine hello inkommande dataström och leta efter anrop som kan vara falsk.</span><span class="sxs-lookup"><span data-stu-id="8656f-107">You will see how toouse a query tooexamine hello incoming stream and look for calls that might be fraudulent.</span></span>

* <span data-ttu-id="8656f-108">Skicka hello resultat tooan utdatamottagaren (lagring) som du kan analysera för ytterligare information.</span><span class="sxs-lookup"><span data-stu-id="8656f-108">Send hello results tooan output sink (storage) that you can analyze for additional insights.</span></span> <span data-ttu-id="8656f-109">I det här fallet ska du skicka hello misstänkta anropet data tooAzure Blob storage.</span><span class="sxs-lookup"><span data-stu-id="8656f-109">In this case, you'll send hello suspicious call data tooAzure Blob storage.</span></span>

<span data-ttu-id="8656f-110">Vi använder hello exempel på realtid bedrägeri identifiering baserat på telefonsamtal data i de här självstudierna.</span><span class="sxs-lookup"><span data-stu-id="8656f-110">In  this tutorial, we use hello example of real-time fraud detection based on phone-call data.</span></span> <span data-ttu-id="8656f-111">Men hello-tekniken som beskriver vi är passar också för andra typer av att upptäcka bedrägerier, till exempel kreditkort bedrägeri eller identitetsstöld.</span><span class="sxs-lookup"><span data-stu-id="8656f-111">But hello technique we illustrate is also suited for other types of fraud detection, such as credit card fraud or identity theft.</span></span> 

## <a name="scenario-telecommunications-and-sim-fraud-detection-in-real-time"></a><span data-ttu-id="8656f-112">Scenario: Telekommunikation och SIM att upptäcka bedrägerier i realtid</span><span class="sxs-lookup"><span data-stu-id="8656f-112">Scenario: Telecommunications and SIM fraud detection in real time</span></span>

<span data-ttu-id="8656f-113">Ett telekommunikation företag har stora mängder data för inkommande samtal.</span><span class="sxs-lookup"><span data-stu-id="8656f-113">A telecommunications company has a large volume of data for incoming calls.</span></span> <span data-ttu-id="8656f-114">hello företaget vill ha toodetect bedrägliga anropar i realtid så att de kan meddela kunder eller stänga av tjänsten för ett visst tal.</span><span class="sxs-lookup"><span data-stu-id="8656f-114">hello company wants toodetect fraudulent calls in real time so that they can notify customers or shut down service for a specific number.</span></span> <span data-ttu-id="8656f-115">En typ av SIM bedrägeri omfattar flera anrop från hello samma identitet runt hello samma tid men med geografiskt olika platser.</span><span class="sxs-lookup"><span data-stu-id="8656f-115">One type of SIM fraud involves multiple calls from hello same identity around hello same time but in geographically different locations.</span></span> <span data-ttu-id="8656f-116">toodetect den här typen av bedrägerier, hello företagets behov tooexamine inkommande phone poster och leta efter specifika mönster – i det här fallet för gjorts runt hello-anrop samtidigt i olika länder.</span><span class="sxs-lookup"><span data-stu-id="8656f-116">toodetect this type of fraud, hello company needs tooexamine incoming phone records and look for specific patterns—in this case, for calls made around hello same time in different countries.</span></span> <span data-ttu-id="8656f-117">Alla telefonen poster som tillhör den här kategorin skrivs toostorage för efterföljande analys.</span><span class="sxs-lookup"><span data-stu-id="8656f-117">Any phone records that fall into this category are written toostorage for subsequent analysis.</span></span>

## <a name="prerequisites"></a><span data-ttu-id="8656f-118">Krav</span><span class="sxs-lookup"><span data-stu-id="8656f-118">Prerequisites</span></span>

<span data-ttu-id="8656f-119">I den här självstudiekursen kommer du simulera telefonsamtal data med hjälp av ett klientprogram som genererar exempel telefonsamtal metadata.</span><span class="sxs-lookup"><span data-stu-id="8656f-119">In this tutorial, you'll simulate phone-call data by using a client app that generates sample phone call metadata.</span></span> <span data-ttu-id="8656f-120">Vissa av hello-poster som hello app producerar ser ut som bedrägliga anrop.</span><span class="sxs-lookup"><span data-stu-id="8656f-120">Some of hello records that hello app produces look like fraudulent calls.</span></span> 

<span data-ttu-id="8656f-121">Innan du börjar bör du kontrollera att du har hello följande:</span><span class="sxs-lookup"><span data-stu-id="8656f-121">Before you start, make sure you have hello following:</span></span>

* <span data-ttu-id="8656f-122">Ett Azure-konto.</span><span class="sxs-lookup"><span data-stu-id="8656f-122">An Azure account.</span></span>
* <span data-ttu-id="8656f-123">hello anropet händelse generator app.</span><span class="sxs-lookup"><span data-stu-id="8656f-123">hello call-event generator app.</span></span> <span data-ttu-id="8656f-124">Du kan få detta genom att hämta hello [TelcoGenerator.zip filen](http://download.microsoft.com/download/8/B/D/8BD50991-8D54-4F59-AB83-3354B69C8A7E/TelcoGenerator.zip) från hello Microsoft Download Center.</span><span class="sxs-lookup"><span data-stu-id="8656f-124">You can get this by downloading hello [TelcoGenerator.zip file](http://download.microsoft.com/download/8/B/D/8BD50991-8D54-4F59-AB83-3354B69C8A7E/TelcoGenerator.zip) from hello Microsoft Download Center.</span></span> <span data-ttu-id="8656f-125">Packa upp paketet till en mapp på datorn.</span><span class="sxs-lookup"><span data-stu-id="8656f-125">Unzip this package into a folder on your computer.</span></span> <span data-ttu-id="8656f-126">Om du vill toosee hello källkoden och kör hello app i en felsökare, kan du få hello app källkod från [GitHub](https://aka.ms/azure-stream-analytics-telcogenerator).</span><span class="sxs-lookup"><span data-stu-id="8656f-126">If you want toosee hello source code and run hello app in a debugger, you can get hello app source code from [GitHub](https://aka.ms/azure-stream-analytics-telcogenerator).</span></span> 

    >[!NOTE]
    ><span data-ttu-id="8656f-127">Windows kan blockera hello hämtade ZIP-filen.</span><span class="sxs-lookup"><span data-stu-id="8656f-127">Windows might block hello downloaded .zip file.</span></span> <span data-ttu-id="8656f-128">Om du går inte att packa upp Högerklicka hello-filen och välj **egenskaper**.</span><span class="sxs-lookup"><span data-stu-id="8656f-128">If you can't unzip it, right-click hello file and select **Properties**.</span></span> <span data-ttu-id="8656f-129">Om du ser hello meddelandet ”den här filen kommer från en annan dator och kan vara blockerade toohelp skydda den här datorn”, Välj hello **avblockera** alternativ och klickar sedan på **tillämpa**.</span><span class="sxs-lookup"><span data-stu-id="8656f-129">If you see hello "This file came from another computer and might be blocked toohelp protect this computer" message, select hello **Unblock** option and then click **Apply**.</span></span>

<span data-ttu-id="8656f-130">Om du vill tooexamine hello resultaten av hello Streaming Analytics-jobbet, måste du också ett verktyg för att visa hello innehållet i en Azure Blob Storage-behållare.</span><span class="sxs-lookup"><span data-stu-id="8656f-130">If you want tooexamine hello results of hello Streaming Analytics job, you also need a tool for viewing hello contents of a Azure Blob Storage container.</span></span> <span data-ttu-id="8656f-131">Om du använder Visual Studio, kan du använda [Azure Tools för Visual Studio](https://docs.microsoft.com/en-us/azure/vs-azure-tools-storage-resources-server-explorer-browse-manage) eller [Visual Studio Cloud Explorer](https://docs.microsoft.com/en-us/azure/vs-azure-tools-resources-managing-with-cloud-explorer).</span><span class="sxs-lookup"><span data-stu-id="8656f-131">If you use Visual Studio, you can use [Azure Tools for Visual Studio](https://docs.microsoft.com/en-us/azure/vs-azure-tools-storage-resources-server-explorer-browse-manage) or [Visual Studio Cloud Explorer](https://docs.microsoft.com/en-us/azure/vs-azure-tools-resources-managing-with-cloud-explorer).</span></span> <span data-ttu-id="8656f-132">Du kan också installera fristående verktyg som [Azure Lagringsutforskaren](http://storageexplorer.com/) eller [Azure Explorer](http://www.cerebrata.com/products/azure-explorer/introduction).</span><span class="sxs-lookup"><span data-stu-id="8656f-132">Alternatively, you can install standalone tools like [Azure Storage Explorer](http://storageexplorer.com/) or [Azure Explorer](http://www.cerebrata.com/products/azure-explorer/introduction).</span></span> 

## <a name="create-an-azure-event-hubs-tooingest-events"></a><span data-ttu-id="8656f-133">Skapa en Azure händelse hubbar tooingest händelser</span><span class="sxs-lookup"><span data-stu-id="8656f-133">Create an Azure event hubs tooingest events</span></span>

<span data-ttu-id="8656f-134">tooanalyze en dataström du *infognings-* till Azure.</span><span class="sxs-lookup"><span data-stu-id="8656f-134">tooanalyze a data stream, you *ingest* it into Azure.</span></span> <span data-ttu-id="8656f-135">Ett vanligt tooingest data är toouse [Azure Event Hubs](../event-hubs/event-hubs-what-is-event-hubs.md), där du kan mata in miljontals händelser per sekund och sedan bearbeta och lagra hello händelseinformation.</span><span class="sxs-lookup"><span data-stu-id="8656f-135">A typical way tooingest data is toouse [Azure Event Hubs](../event-hubs/event-hubs-what-is-event-hubs.md), which lets you ingest millions of events per second and then process and store hello event information.</span></span> <span data-ttu-id="8656f-136">För den här självstudiekursen skapar en händelsehubb och har hello anropet händelse generator app skicka anrop data toothat händelsehubb.</span><span class="sxs-lookup"><span data-stu-id="8656f-136">For this tutorial, you create an event hub and then have hello call-event generator app send call data toothat event hub.</span></span> <span data-ttu-id="8656f-137">Mer information om händelsehubbar finns i hello [Azure Service Bus-dokumentationen](https://docs.microsoft.com/en-us/azure/service-bus/).</span><span class="sxs-lookup"><span data-stu-id="8656f-137">For more about event hubs, see hello [Azure Service Bus documentation](https://docs.microsoft.com/en-us/azure/service-bus/).</span></span>

>[!NOTE]
><span data-ttu-id="8656f-138">En mer detaljerad version av den här proceduren finns [skapa ett namnområde för Händelsehubbar och en händelse hubb med hello Azure-portalen](../event-hubs/event-hubs-create.md).</span><span class="sxs-lookup"><span data-stu-id="8656f-138">For a more detailed version of this procedure, see [Create an Event Hubs namespace and an event hub using hello Azure portal](../event-hubs/event-hubs-create.md).</span></span> 

### <a name="create-a-namespace-and-event-hub"></a><span data-ttu-id="8656f-139">Skapa ett namnområde och händelse-hubb</span><span class="sxs-lookup"><span data-stu-id="8656f-139">Create a namespace and event hub</span></span>
<span data-ttu-id="8656f-140">I den här proceduren du först skapa en event hub-namnområde och sedan lägger du till en event hub toothat namepsace.</span><span class="sxs-lookup"><span data-stu-id="8656f-140">In this procedure, you first create an event hub namespace, and then you add an event hub toothat namepsace.</span></span> <span data-ttu-id="8656f-141">Event hub namnområden används toologically gruppera relaterade händelser-bussen instanser.</span><span class="sxs-lookup"><span data-stu-id="8656f-141">Event hub namespaces are used toologically group related event bus instances.</span></span> 

1. <span data-ttu-id="8656f-142">Logga in på hello Azure-portalen och på **ny** > **Sakernas Internet** > **Händelsehubb**.</span><span class="sxs-lookup"><span data-stu-id="8656f-142">Log  into hello Azure portal and click **New** > **Internet of Things** > **Event Hub**.</span></span> 

2. <span data-ttu-id="8656f-143">I hello **skapa namnområdet** bladet, ange ett namn för namnområdet som `<yourname>-eh-ns-demo`.</span><span class="sxs-lookup"><span data-stu-id="8656f-143">In hello **Create namespace** blade, enter a namespace name such as `<yourname>-eh-ns-demo`.</span></span> <span data-ttu-id="8656f-144">Du kan använda valfritt namn för hello namnområde, men hello-namnet måste vara giltigt för en URL och det måste vara unikt i Azure.</span><span class="sxs-lookup"><span data-stu-id="8656f-144">You can use any name for hello namespace, but hello name must be valid for a URL and it must be unique across Azure.</span></span> 
    
3. <span data-ttu-id="8656f-145">Välj en prenumeration och skapa eller välja en resursgrupp och sedan klicka på **skapa**.</span><span class="sxs-lookup"><span data-stu-id="8656f-145">Select a subscription and create or choose a resource group , then click **Create**.</span></span> 

    ![Skapa ett namnområde för event hub](./media/stream-analytics-real-time-fraud-detection/stream-analytics-create-eventhub-namespace-new-portal.png)
 
4. <span data-ttu-id="8656f-147">Hitta hello event hub namnområde i din lista över Azure-resurser när distribution hello namnområde har slutförts.</span><span class="sxs-lookup"><span data-stu-id="8656f-147">When hello namespace has finished deploying, find hello event hub namespace in your list of Azure resources.</span></span> 

5. <span data-ttu-id="8656f-148">Klicka på hello Nytt namnområde och hello namnområde bladet på  **+ &nbsp;Händelsehubb**.</span><span class="sxs-lookup"><span data-stu-id="8656f-148">Click hello new namespace, and in hello namespace blade, click **+&nbsp;Event Hub**.</span></span> 

    ![<span data-ttu-id="8656f-149">hello lägga till Event Hub-knappen för att skapa en ny händelsehubb</span><span class="sxs-lookup"><span data-stu-id="8656f-149">hello Add Event Hub button for creating a new event hub</span></span> ](./media/stream-analytics-real-time-fraud-detection/stream-analytics-create-eventhub-button-new-portal.png)    
 
6. <span data-ttu-id="8656f-150">Namnet hello ny händelsehubb `sa-eh-frauddetection-demo`.</span><span class="sxs-lookup"><span data-stu-id="8656f-150">Name hello new event hub `sa-eh-frauddetection-demo`.</span></span> <span data-ttu-id="8656f-151">Du kan använda ett annat namn.</span><span class="sxs-lookup"><span data-stu-id="8656f-151">You can use a different name.</span></span> <span data-ttu-id="8656f-152">Om du vill anteckna, eftersom du måste ha namnet hello senare.</span><span class="sxs-lookup"><span data-stu-id="8656f-152">If you do, make a note of it, because you need hello name later.</span></span> <span data-ttu-id="8656f-153">Du behöver inte tooset andra alternativ för hello händelsehubb just nu.</span><span class="sxs-lookup"><span data-stu-id="8656f-153">You don't need tooset any other options for hello event hub right now.</span></span>

    ![Bladet för att skapa en ny händelsehubb](./media/stream-analytics-real-time-fraud-detection/stream-analytics-create-eventhub-new-portal.png)
    
 
7. <span data-ttu-id="8656f-155">Klicka på **Skapa**.</span><span class="sxs-lookup"><span data-stu-id="8656f-155">Click **Create**.</span></span>
### <a name="grant-access-toohello-event-hub-and-get-a-connection-string"></a><span data-ttu-id="8656f-156">Bevilja åtkomst toohello händelsehubb och få en anslutningssträng</span><span class="sxs-lookup"><span data-stu-id="8656f-156">Grant access toohello event hub and get a connection string</span></span>

<span data-ttu-id="8656f-157">Innan en process kan skicka data tooan händelsehubb, måste hello händelsehubb ha en princip som tillåter åtkomstbehörighet.</span><span class="sxs-lookup"><span data-stu-id="8656f-157">Before a process can send data tooan event hub, hello event hub must have a policy that allows appropriate access.</span></span> <span data-ttu-id="8656f-158">hello åtkomstprincip producerar en anslutningssträng som innehåller auktoriseringsinformation om.</span><span class="sxs-lookup"><span data-stu-id="8656f-158">hello access policy produces a connection string that includes authorization information.</span></span>

1.  <span data-ttu-id="8656f-159">I hello händelse namnområde bladet, klickar du på **Händelsehubbar** och klicka sedan på hello namnet på din nya event hub.</span><span class="sxs-lookup"><span data-stu-id="8656f-159">In hello event namespace blade, click **Event Hubs** and then click hello name of your new event hub.</span></span>

2.  <span data-ttu-id="8656f-160">I hello event hub-blad klickar du på **principer för delad åtkomst** och klicka sedan på  **+ &nbsp;Lägg till**.</span><span class="sxs-lookup"><span data-stu-id="8656f-160">In hello event hub blade, click **Shared access policies** and then click **+&nbsp;Add**.</span></span>

    >[!NOTE]
    ><span data-ttu-id="8656f-161">Kontrollera att du arbetar med hello händelsehubb, inte hello event hub namnområde.</span><span class="sxs-lookup"><span data-stu-id="8656f-161">Make sure you're working with hello event hub, not hello event hub namespace.</span></span>

3.  <span data-ttu-id="8656f-162">Lägg till en princip med namnet `sa-policy-manage-demo` och **anspråk**väljer **hantera**.</span><span class="sxs-lookup"><span data-stu-id="8656f-162">Add a policy named `sa-policy-manage-demo` and for **Claim**, select **Manage**.</span></span>

    ![Bladet för att skapa en ny händelse hubb princip](./media/stream-analytics-real-time-fraud-detection/stream-analytics-create-shared-access-policy-manage-new-portal.png)
 
4.  <span data-ttu-id="8656f-164">Klicka på **Skapa**.</span><span class="sxs-lookup"><span data-stu-id="8656f-164">Click **Create**.</span></span>

5.  <span data-ttu-id="8656f-165">Efter hello principen har distribuerats, klickar du på hello lista över principer för delad åtkomst.</span><span class="sxs-lookup"><span data-stu-id="8656f-165">After hello policy has been deployed, click it in hello list of shared access policies.</span></span>

6.  <span data-ttu-id="8656f-166">Hitta hello rutan **sträng-primära ANSLUTNINGSNYCKEL** och klicka på hello Kopiera knappen Nästa toohello-anslutningssträng.</span><span class="sxs-lookup"><span data-stu-id="8656f-166">Find hello box labeled **CONNECTION STRING-PRIMARY KEY** and click hello copy button next toohello connection string.</span></span> 
    
    ![Kopiera hello primära sträng anslutningsnyckel från hello åtkomstprincipen](./media/stream-analytics-real-time-fraud-detection/stream-analytics-shared-access-policy-copy-connection-string-new-portal.png)
 
7.  <span data-ttu-id="8656f-168">Klistra in hello anslutningssträngen i en textredigerare.</span><span class="sxs-lookup"><span data-stu-id="8656f-168">Paste hello connection string into a text editor.</span></span> <span data-ttu-id="8656f-169">Du behöver den här anslutningssträngen för hello nästa avsnitt, när du har gjort vissa små redigeringar tooit.</span><span class="sxs-lookup"><span data-stu-id="8656f-169">You need this connection string for hello next section, after you make some small edits tooit.</span></span>

    <span data-ttu-id="8656f-170">hello anslutningssträngen ser ut så här:</span><span class="sxs-lookup"><span data-stu-id="8656f-170">hello connection string looks like this:</span></span>

        Endpoint=sb://YOURNAME-eh-ns-demo.servicebus.windows.net/;SharedAccessKeyName=sa-policy-manage-demo;SharedAccessKey=Gw2NFZwU1Di+rxA2T+6hJYAtFExKRXaC2oSQa0ZsPkI=;EntityPath=sa-eh-frauddetection-demo

    <span data-ttu-id="8656f-171">Observera att hello-anslutningssträngen innehåller flera nyckel-värdepar, avgränsade med semikolon: `Endpoint`, `SharedAccessKeyName`, `SharedAccessKey`, och `EntityPath`.</span><span class="sxs-lookup"><span data-stu-id="8656f-171">Notice that hello connection string contains multiple key-value pairs, separated with semicolons: `Endpoint`, `SharedAccessKeyName`, `SharedAccessKey`, and `EntityPath`.</span></span>  

## <a name="configure-and-start-hello-event-generator-application"></a><span data-ttu-id="8656f-172">Konfigurera och starta hello händelse generator program</span><span class="sxs-lookup"><span data-stu-id="8656f-172">Configure and start hello event generator application</span></span>

<span data-ttu-id="8656f-173">Innan du börjar hello TelcoGenerator app måste konfigurera du den så att den skickar anropet poster toohello händelsehubb du just har skapat.</span><span class="sxs-lookup"><span data-stu-id="8656f-173">Before you start hello TelcoGenerator app, you configure it so that it will send call records toohello event hub you just created.</span></span>

### <a name="configure-hello-telcogeneratorapp"></a><span data-ttu-id="8656f-174">Konfigurera hello TelcoGeneratorapp</span><span class="sxs-lookup"><span data-stu-id="8656f-174">Configure hello TelcoGeneratorapp</span></span>

1.  <span data-ttu-id="8656f-175">I Redigeraren för hello dit du kopierade hello anslutningssträngen anteckna hello `EntityPath` värdet och ta sedan bort hello `EntityPath` par (inte Glöm tooremove hello semikolon som föregår den).</span><span class="sxs-lookup"><span data-stu-id="8656f-175">In hello editor where you copied hello connection string, make a note of hello `EntityPath` value, and then remove hello `EntityPath` pair (don't forget tooremove hello semicolon that precedes it).</span></span> 

2.  <span data-ttu-id="8656f-176">Öppna i hello mappen där du uppackade hello TelcoGenerator.zip filen hello telcodatagen.exe.config fil i en textredigerare.</span><span class="sxs-lookup"><span data-stu-id="8656f-176">In hello folder where you unzipped hello TelcoGenerator.zip file, open hello telcodatagen.exe.config file in an editor.</span></span> <span data-ttu-id="8656f-177">(Det finns fler än en .config-fil, så Tänk på att du öppnar hello höger en).</span><span class="sxs-lookup"><span data-stu-id="8656f-177">(There is more than one .config file, so be sure that you open hello right one.)</span></span>

3.  <span data-ttu-id="8656f-178">I hello `<appSettings>` element, göra detta:</span><span class="sxs-lookup"><span data-stu-id="8656f-178">In hello `<appSettings>` element, do this:</span></span>

    * <span data-ttu-id="8656f-179">Värdet för hello hello `EventHubName` viktiga toohello händelsehubbens namn (det vill säga toohello värdet hello entitet sökväg).</span><span class="sxs-lookup"><span data-stu-id="8656f-179">Set hello value of hello `EventHubName` key toohello event hub name (that is, toohello value of hello entity path).</span></span>
    * <span data-ttu-id="8656f-180">Värdet för hello hello `Microsoft.ServiceBus.ConnectionString` nyckeln toohello anslutningssträngen.</span><span class="sxs-lookup"><span data-stu-id="8656f-180">Set hello value of hello `Microsoft.ServiceBus.ConnectionString` key toohello connection string.</span></span> 

    <span data-ttu-id="8656f-181">Hej `<appSettings>` avsnitt ser ut hello följande exempel.</span><span class="sxs-lookup"><span data-stu-id="8656f-181">hello `<appSettings>` section will look like hello following example.</span></span> <span data-ttu-id="8656f-182">(För tydlighetens skull vi omsluten hello rader och ta bort vissa tecken från hello autentiseringstoken.)</span><span class="sxs-lookup"><span data-stu-id="8656f-182">(For clarity, we wrapped hello lines and removed some characters from hello authorization token.)</span></span>

    ![Konfigurationsfilen för TelcoGenerator app visar hello händelse hubb och anslutningssträngen](./media/stream-analytics-real-time-fraud-detection/stream-analytics-telcogenerator-config-file-app-settings.png)
 
4.  <span data-ttu-id="8656f-184">Spara hello-filen.</span><span class="sxs-lookup"><span data-stu-id="8656f-184">Save hello file.</span></span> 

### <a name="start-hello-app"></a><span data-ttu-id="8656f-185">Starta hello app</span><span class="sxs-lookup"><span data-stu-id="8656f-185">Start hello app</span></span>
1.  <span data-ttu-id="8656f-186">Öppna ett kommandofönster och ändra toohello mappen där hello TelcoGenerator app uppackade.</span><span class="sxs-lookup"><span data-stu-id="8656f-186">Open a command window and change toohello folder where hello TelcoGenerator app is unzipped.</span></span>
2.  <span data-ttu-id="8656f-187">Ange hello följande kommando:</span><span class="sxs-lookup"><span data-stu-id="8656f-187">Enter hello following command:</span></span>

        telcodatagen.exe 1000 .2 2

    <span data-ttu-id="8656f-188">hello-parametrar är:</span><span class="sxs-lookup"><span data-stu-id="8656f-188">hello parameters are:</span></span> 

    * <span data-ttu-id="8656f-189">Antal skivor per timme.</span><span class="sxs-lookup"><span data-stu-id="8656f-189">Number of CDRs per hour.</span></span> 
    * <span data-ttu-id="8656f-190">SIM-kort bedrägeri sannolikhet: Hur ofta som en procentandel av alla anrop hello appen bör Simulera ett bedrägliga anrop.</span><span class="sxs-lookup"><span data-stu-id="8656f-190">SIM Card Fraud Probability: How often, as a percentage of all calls, that hello app should simulate a fraudulent call.</span></span> <span data-ttu-id="8656f-191">hello värdet.2 innebär att cirka 20% av hello anropet poster ser falska.</span><span class="sxs-lookup"><span data-stu-id="8656f-191">hello value .2 means that about 20% of hello call records will look fraudulent.</span></span>
    * <span data-ttu-id="8656f-192">Varaktighet i timmar.</span><span class="sxs-lookup"><span data-stu-id="8656f-192">Duration in hours.</span></span> <span data-ttu-id="8656f-193">hello antal timmar som hello app ska köras.</span><span class="sxs-lookup"><span data-stu-id="8656f-193">hello number of hours that hello app should run.</span></span> <span data-ttu-id="8656f-194">Du kan även stoppa hello app helst genom att trycka på Ctrl + C hello-kommandoraden.</span><span class="sxs-lookup"><span data-stu-id="8656f-194">You can also stop hello app any time by pressing Ctrl+C at hello command line.</span></span>

    <span data-ttu-id="8656f-195">Efter några sekunder hello appen startar visa telefonsamtal poster på hello-skärmen när den skickar toohello händelsehubb.</span><span class="sxs-lookup"><span data-stu-id="8656f-195">After a few seconds, hello app starts displaying phone call records on hello screen as it sends them toohello event hub.</span></span>

<span data-ttu-id="8656f-196">Är några av hello nyckelfälten som du ska använda i realtid bedrägeri identifiering av programmet hello följande:</span><span class="sxs-lookup"><span data-stu-id="8656f-196">Some of hello key fields that you will be using in this real-time fraud detection application are hello following:</span></span>

|<span data-ttu-id="8656f-197">**Post**</span><span class="sxs-lookup"><span data-stu-id="8656f-197">**Record**</span></span>|<span data-ttu-id="8656f-198">**Definition**</span><span class="sxs-lookup"><span data-stu-id="8656f-198">**Definition**</span></span>|
|----------|--------------|
|`CallrecTime`|<span data-ttu-id="8656f-199">hello tidsstämpel för hello anrop starttid.</span><span class="sxs-lookup"><span data-stu-id="8656f-199">hello timestamp for hello call start time.</span></span> |
|`SwitchNum`|<span data-ttu-id="8656f-200">hello telefonväxeln används tooconnect hello anrop.</span><span class="sxs-lookup"><span data-stu-id="8656f-200">hello telephone switch used tooconnect hello call.</span></span> <span data-ttu-id="8656f-201">I det här exemplet är hello växlar strängar som representerar hello land ursprungsplats (USA Kina, Storbritannien, Tyskland eller Australien).</span><span class="sxs-lookup"><span data-stu-id="8656f-201">For this example, hello switches are strings that represent hello country of origin (US, China, UK, Germany, or Australia).</span></span> |
|`CallingNum`|<span data-ttu-id="8656f-202">hello telefonnummer hello anroparen.</span><span class="sxs-lookup"><span data-stu-id="8656f-202">hello phone number of hello caller.</span></span> |
|`CallingIMSI`|<span data-ttu-id="8656f-203">hello International Mobile Subscriber Identity IMSI ().</span><span class="sxs-lookup"><span data-stu-id="8656f-203">hello International Mobile Subscriber Identity (IMSI).</span></span> <span data-ttu-id="8656f-204">Detta är hello Unik identifierare för hello anroparen.</span><span class="sxs-lookup"><span data-stu-id="8656f-204">This is hello Unique identifier of hello caller.</span></span> |
|`CalledNum`|<span data-ttu-id="8656f-205">hello telefonnummer hello anropet mottagaren.</span><span class="sxs-lookup"><span data-stu-id="8656f-205">hello phone number of hello call recipient.</span></span> |
|`CalledIMSI`|<span data-ttu-id="8656f-206">Internationella Mobile Subscriber Identity (IMSI).</span><span class="sxs-lookup"><span data-stu-id="8656f-206">International Mobile Subscriber Identity (IMSI).</span></span> <span data-ttu-id="8656f-207">Detta är hello Unik identifierare för hello anropet mottagaren.</span><span class="sxs-lookup"><span data-stu-id="8656f-207">This is hello unique identifier of hello call recipient.</span></span> |


## <a name="create-a-stream-analytics-job-toomanage-streaming-data"></a><span data-ttu-id="8656f-208">Skapa ett Stream Analytics-jobbet toomanage strömmande data</span><span class="sxs-lookup"><span data-stu-id="8656f-208">Create a Stream Analytics job toomanage streaming data</span></span>

<span data-ttu-id="8656f-209">Nu när du har en dataström med anropet händelser kan ställa du in ett Stream Analytics-jobb.</span><span class="sxs-lookup"><span data-stu-id="8656f-209">Now that you have a stream of call events, you can set up a Stream Analytics job.</span></span> <span data-ttu-id="8656f-210">hello-jobbet kommer att läsa data från hello händelsehubb som du ställer in.</span><span class="sxs-lookup"><span data-stu-id="8656f-210">hello job will read data from hello event hub that you set up.</span></span> 

### <a name="create-hello-job"></a><span data-ttu-id="8656f-211">Skapa hello jobb</span><span class="sxs-lookup"><span data-stu-id="8656f-211">Create hello job</span></span> 

1. <span data-ttu-id="8656f-212">I hello Azure-portalen klickar du på **ny** > **Sakernas Internet** > **Stream Analytics-jobbet**.</span><span class="sxs-lookup"><span data-stu-id="8656f-212">In hello Azure portal, click **New** > **Internet of Things** > **Stream Analytics job**.</span></span>

2. <span data-ttu-id="8656f-213">Hello jobb `sa_frauddetection_job_demo`, ange en prenumeration, resursgrupp och plats.</span><span class="sxs-lookup"><span data-stu-id="8656f-213">Name hello job `sa_frauddetection_job_demo`, specify a subscription, resource group, and location.</span></span>

    <span data-ttu-id="8656f-214">Det är en bra idé tooplace hello jobbet och hello händelsehubb i hello samma region för bästa prestanda och så att du inte betalar tootransfer data mellan regioner.</span><span class="sxs-lookup"><span data-stu-id="8656f-214">It's a good idea tooplace hello job and hello event hub in hello same region for best performance and so that you don't pay tootransfer data between regions.</span></span>

    ![Skapa nytt Stream Analytics-jobb](./media/stream-analytics-real-time-fraud-detection/stream-analytics-create-sa-job-new-portal.png)

3. <span data-ttu-id="8656f-216">Klicka på **Skapa**.</span><span class="sxs-lookup"><span data-stu-id="8656f-216">Click **Create**.</span></span>

    <span data-ttu-id="8656f-217">hello jobb skapas och hello portalen visar jobbinformation.</span><span class="sxs-lookup"><span data-stu-id="8656f-217">hello job is created and hello portal displays job details.</span></span> <span data-ttu-id="8656f-218">Inget kör ännu, men – du har tooconfigure hello jobb innan den kan startas.</span><span class="sxs-lookup"><span data-stu-id="8656f-218">Nothing is running yet, though—you have tooconfigure hello job before it can be started.</span></span>

### <a name="configure-job-input"></a><span data-ttu-id="8656f-219">Konfigurera jobbet indata</span><span class="sxs-lookup"><span data-stu-id="8656f-219">Configure job input</span></span>

1. <span data-ttu-id="8656f-220">I hello instrumentpanel eller hello **alla resurser** bladet, söka efter och välj hello `sa_frauddetection_job_demo` Stream Analytics-jobbet.</span><span class="sxs-lookup"><span data-stu-id="8656f-220">In hello dashboard or hello **All resources** blade, find and select hello `sa_frauddetection_job_demo` Stream Analytics job.</span></span> 
2. <span data-ttu-id="8656f-221">I hello **jobbet topologi** avsnitt i hello Stream Analytics-jobbet bladet, klickar du på hello **indata** rutan.</span><span class="sxs-lookup"><span data-stu-id="8656f-221">In hello **Job Topology** section of hello Stream Analytics job blade, click hello **Input** box.</span></span>

    ![Textrutan under topologi i hello Streaming Analytics-jobbet bladet](./media/stream-analytics-real-time-fraud-detection/stream-analytics-sa-job-input-box-new-portal.png)
 
3. <span data-ttu-id="8656f-223">Klicka på  **+ &nbsp;Lägg till** och fyller sedan hello bladet med dessa värden:</span><span class="sxs-lookup"><span data-stu-id="8656f-223">Click **+&nbsp;Add** and then fill out hello blade with these values:</span></span>

    * <span data-ttu-id="8656f-224">**Ett inmatat alias**: Använd hello namn `CallStream`.</span><span class="sxs-lookup"><span data-stu-id="8656f-224">**Input alias**: Use hello name `CallStream`.</span></span> <span data-ttu-id="8656f-225">Om du använder ett annat namn, notera den eftersom du behöver senare.</span><span class="sxs-lookup"><span data-stu-id="8656f-225">If you use a different name, make a note of it because you'll need it later.</span></span>
    * <span data-ttu-id="8656f-226">**Typ av datakälla**: Välj **dataströmmen**.</span><span class="sxs-lookup"><span data-stu-id="8656f-226">**Source type**: Select **Data stream**.</span></span> <span data-ttu-id="8656f-227">(**Referensdata** refererar toostatic sökning data, som du inte använder i den här självstudiekursen.)</span><span class="sxs-lookup"><span data-stu-id="8656f-227">(**Reference data** refers toostatic lookup data, which you won't use in this tutorial.)</span></span>
    * <span data-ttu-id="8656f-228">**Källan**: Välj **händelsehubb**.</span><span class="sxs-lookup"><span data-stu-id="8656f-228">**Source**: Select **Event hub**.</span></span>
    * <span data-ttu-id="8656f-229">**Importera alternativet**: Välj **Använd händelsehubb från aktuell prenumeration**.</span><span class="sxs-lookup"><span data-stu-id="8656f-229">**Import option**: Select **Use event hub from current subscription**.</span></span> 
    * <span data-ttu-id="8656f-230">**Service bus-namnrymd**: Markera hello event hub namnområde som du skapade tidigare (`<yourname>-eh-ns-demo`).</span><span class="sxs-lookup"><span data-stu-id="8656f-230">**Service bus namespace**: Select hello event hub namespace that you created earlier (`<yourname>-eh-ns-demo`).</span></span>
    * <span data-ttu-id="8656f-231">**Händelsehubb**: Välj hello händelsehubb som du skapade tidigare (`sa-eh-frauddetection-demo`).</span><span class="sxs-lookup"><span data-stu-id="8656f-231">**Event hub**: Select hello event hub that you created earlier (`sa-eh-frauddetection-demo`).</span></span>
    * <span data-ttu-id="8656f-232">**Namnet på händelsehubben princip**: Välj hello åtkomstprincip som du skapade tidigare (`sa-policy-manage-demo`).</span><span class="sxs-lookup"><span data-stu-id="8656f-232">**Event hub policy name**: Select hello access policy that you created earlier (`sa-policy-manage-demo`).</span></span>

    ![Skapa nya indata för Streaming Analytics-jobbet](./media/stream-analytics-real-time-fraud-detection/stream-analytics-create-sa-input-new-portal.png)

4. <span data-ttu-id="8656f-234">Klicka på **Skapa**.</span><span class="sxs-lookup"><span data-stu-id="8656f-234">Click **Create**.</span></span>

## <a name="create-queries-tootransform-real-time-data"></a><span data-ttu-id="8656f-235">Skapa frågor tootransform realtidsdata</span><span class="sxs-lookup"><span data-stu-id="8656f-235">Create queries tootransform real-time data</span></span>

<span data-ttu-id="8656f-236">Du har nu en Stream Analytics-jobbet konfigurera tooread en inkommande dataström.</span><span class="sxs-lookup"><span data-stu-id="8656f-236">At this point, you have a Stream Analytics job set up tooread an incoming data stream.</span></span> <span data-ttu-id="8656f-237">hello nästa steg är toocreate en omvandling som analyserar hello data i realtid.</span><span class="sxs-lookup"><span data-stu-id="8656f-237">hello next step is toocreate a transformation that analyzes hello data in real time.</span></span> <span data-ttu-id="8656f-238">Det gör du genom att skapa en fråga.</span><span class="sxs-lookup"><span data-stu-id="8656f-238">You do this by creating a query.</span></span> <span data-ttu-id="8656f-239">Stream Analytics stöder en enkel, deklarativ frågemodell som beskriver omvandlingarna för realtidsbearbetning.</span><span class="sxs-lookup"><span data-stu-id="8656f-239">Stream Analytics supports a simple, declarative query model that describes transformations for real-time processing.</span></span> <span data-ttu-id="8656f-240">hello frågor via en SQL-liknande språk som har vissa tillägg specifika toostream analytics.</span><span class="sxs-lookup"><span data-stu-id="8656f-240">hello queries use a SQL-like language that has some extensions specific toostream analytics.</span></span> 

<span data-ttu-id="8656f-241">En mycket enkel fråga kan bara läsa alla hello inkommande data.</span><span class="sxs-lookup"><span data-stu-id="8656f-241">A very simple query might simply read all hello incoming data.</span></span> <span data-ttu-id="8656f-242">Men skapa du ofta frågor som ser ut för specifika data eller relationer i hello data.</span><span class="sxs-lookup"><span data-stu-id="8656f-242">However, you often create queries that look for specific data or for relationships in hello data.</span></span> <span data-ttu-id="8656f-243">I det här avsnittet av kursen hello ska du skapa och testa flera frågor toolearn några sätt som du kan omvandla en indataström för analys.</span><span class="sxs-lookup"><span data-stu-id="8656f-243">In this section of hello tutorial, you will create and test several queries toolearn a few ways in which you can transform an input stream for analysis.</span></span> 

<span data-ttu-id="8656f-244">hello-frågor som du skapar här visas bara hello transformerade data toohello skärmen.</span><span class="sxs-lookup"><span data-stu-id="8656f-244">hello queries you create here will just display hello transformed data toohello screen.</span></span> <span data-ttu-id="8656f-245">I ett senare avsnitt får du konfigurera utdatamottagare och en fråga som skriver hello transformerade data toothat mottagare.</span><span class="sxs-lookup"><span data-stu-id="8656f-245">In a later section, you'll configure an output sink and a query that writes hello transformed data toothat sink.</span></span>

<span data-ttu-id="8656f-246">toolearn mer om hello språk finns hello [referens för Azure Stream Analytics Query Language](https://msdn.microsoft.com/library/dn834998.aspx).</span><span class="sxs-lookup"><span data-stu-id="8656f-246">toolearn more about hello language, see hello [Azure Stream Analytics Query Language Reference](https://msdn.microsoft.com/library/dn834998.aspx).</span></span>

### <a name="get-sample-data-for-testing-queries"></a><span data-ttu-id="8656f-247">Hämta exempeldata för att testa frågor</span><span class="sxs-lookup"><span data-stu-id="8656f-247">Get sample data for testing queries</span></span>

<span data-ttu-id="8656f-248">Hej TelcoGenerator appen skickar anropet poster toohello händelsehubb och Stream Analytics-jobbet är konfigurerade tooread från hello händelsehubb.</span><span class="sxs-lookup"><span data-stu-id="8656f-248">hello TelcoGenerator app is sending call records toohello event hub, and your Stream Analytics job is configured tooread from hello event hub.</span></span> <span data-ttu-id="8656f-249">Du kan använda en fråga tootest hello jobbet toomake att läsa på rätt sätt.</span><span class="sxs-lookup"><span data-stu-id="8656f-249">You can use a query tootest hello job toomake sure that it's reading correctly.</span></span> <span data-ttu-id="8656f-250">Testa för en fråga i hello Azure-konsolen måste du exempeldata.</span><span class="sxs-lookup"><span data-stu-id="8656f-250">too test a query in hello Azure console, you need sample data.</span></span> <span data-ttu-id="8656f-251">I den här genomgången ska du extrahera exempeldata från hello-dataström som kommer till hello händelsehubb.</span><span class="sxs-lookup"><span data-stu-id="8656f-251">For this walkthrough, you'll extract sample data from hello stream that's coming into hello event hub.</span></span>

1. <span data-ttu-id="8656f-252">Kontrollera att hello TelcoGenerator appen körs och producerar anropet poster.</span><span class="sxs-lookup"><span data-stu-id="8656f-252">Make sure that hello TelcoGenerator app is running and producing call records.</span></span>
2. <span data-ttu-id="8656f-253">Returnera toohello Streaming Analytics-jobbet bladet i hello-portalen.</span><span class="sxs-lookup"><span data-stu-id="8656f-253">In hello portal, return toohello Streaming Analytics job blade.</span></span> <span data-ttu-id="8656f-254">(Om du har stängt hello-bladet, söka efter `sa_frauddetection_job_demo` i hello **alla resurser** bladet.)</span><span class="sxs-lookup"><span data-stu-id="8656f-254">(If you closed hello blade, search for `sa_frauddetection_job_demo` in hello **All resources** blade.)</span></span>
3. <span data-ttu-id="8656f-255">Klicka på hello **frågan** rutan.</span><span class="sxs-lookup"><span data-stu-id="8656f-255">Click hello **Query** box.</span></span> <span data-ttu-id="8656f-256">Azure visar hello indata och utdata som är konfigurerade för hello jobbet och kan du skapa en fråga som kan du omvandla hello Indataströmmen som toohello utdata skickas.</span><span class="sxs-lookup"><span data-stu-id="8656f-256">Azure lists hello inputs and outputs that are configured for hello job, and lets you create a query that lets you transform hello input stream as it is sent toohello output.</span></span>
4. <span data-ttu-id="8656f-257">I hello **frågan** bladet, klickar du på hello punkter nästa toohello `CallStream` indata och välj sedan **exempeldata från indata**.</span><span class="sxs-lookup"><span data-stu-id="8656f-257">In hello **Query** blade, click hello dots next toohello `CallStream` input and then select **Sample data from input**.</span></span>

    ![Menyn Alternativ toouse exempeldata för hello Streaming Analytics-jobbet post med ”exempeldata från indata” markerad](./media/stream-analytics-real-time-fraud-detection/stream-analytics-create-sample-data-from-input.png)

    <span data-ttu-id="8656f-259">Då öppnas ett blad som du kan ange hur mycket exempel data tooget som definierats i hur länge tooread hello inkommande dataström.</span><span class="sxs-lookup"><span data-stu-id="8656f-259">This opens a blade that lets you specify how much sample data tooget, defined in terms of how long tooread hello input stream.</span></span>

5. <span data-ttu-id="8656f-260">Ange **minuter** too3 och klicka sedan på **OK**.</span><span class="sxs-lookup"><span data-stu-id="8656f-260">Set **Minutes** too3 and then click **OK**.</span></span> 
    
    ![Alternativ för provtagning hello Indataströmmen, med ”3 minuter” markerad.](./media/stream-analytics-real-time-fraud-detection/stream-analytics-input-create-sample-data.png)

    <span data-ttu-id="8656f-262">Azure exempel 3 minuter kan du se från hello Indataströmmen och meddelar dig när hello exempeldata är klar.</span><span class="sxs-lookup"><span data-stu-id="8656f-262">Azure samples 3 minutes' worth of data from hello input stream and notifies you when hello sample data is ready.</span></span> <span data-ttu-id="8656f-263">(Detta tar en stund.)</span><span class="sxs-lookup"><span data-stu-id="8656f-263">(This takes a short while.)</span></span> 

<span data-ttu-id="8656f-264">hello exempeldata lagras tillfälligt och är tillgänglig när du har hello frågefönster öppnas.</span><span class="sxs-lookup"><span data-stu-id="8656f-264">hello sample data is stored temporarily and is available while you have hello query window open.</span></span> <span data-ttu-id="8656f-265">Om du stänger hello frågefönstret hello exempeldata ignoreras och du har toocreate en ny uppsättning exempeldata.</span><span class="sxs-lookup"><span data-stu-id="8656f-265">If you close hello query window, hello sample data is discarded, and you'll have toocreate a new set of sample data.</span></span> 

<span data-ttu-id="8656f-266">Alternativt kan du hämta en JSON-fil som innehåller exempeldata [från GitHub](https://github.com/Azure/azure-stream-analytics/blob/master/Sample%20Data/telco.json), och sedan ladda upp toouse som JSON-fil som exempeldata för hello `CallStream` indata.</span><span class="sxs-lookup"><span data-stu-id="8656f-266">As an alternative, you can get a .json file that has sample data in it [from GitHub](https://github.com/Azure/azure-stream-analytics/blob/master/Sample%20Data/telco.json), and then upload that .json file toouse as sample data for hello `CallStream` input .</span></span> 

### <a name="test-using-a-pass-through-query"></a><span data-ttu-id="8656f-267">Testa med en direktfråga</span><span class="sxs-lookup"><span data-stu-id="8656f-267">Test using a pass-through query</span></span>

<span data-ttu-id="8656f-268">Om du vill tooarchive varje händelse, kan du använda en direktfråga tooread alla hello fält i hello nyttolast hello-händelse.</span><span class="sxs-lookup"><span data-stu-id="8656f-268">If you want tooarchive every event, you can use a pass-through query tooread all hello fields in hello payload of hello event.</span></span>

1. <span data-ttu-id="8656f-269">Ange den här frågan i frågefönstret hello:</span><span class="sxs-lookup"><span data-stu-id="8656f-269">In hello query window, enter this query:</span></span>

        SELECT 
            *
        FROM 
            CallStream

    >[!NOTE]
    ><span data-ttu-id="8656f-270">Precis som med SQL, nyckelord är inte skiftlägeskänsliga och blanksteg är inte viktig.</span><span class="sxs-lookup"><span data-stu-id="8656f-270">As with SQL, keywords are not case sensitive, and whitespace is not significant.</span></span>

    <span data-ttu-id="8656f-271">I den här frågan `CallStream` är hello alias som du angav när du skapade hello indata.</span><span class="sxs-lookup"><span data-stu-id="8656f-271">In this query, `CallStream` is hello alias that you specified when you created hello input.</span></span> <span data-ttu-id="8656f-272">Om du använde ett annat alias kan du använda det namnet i stället.</span><span class="sxs-lookup"><span data-stu-id="8656f-272">If you used a different alias, use that name instead.</span></span>

2. <span data-ttu-id="8656f-273">Klicka på **Test**.</span><span class="sxs-lookup"><span data-stu-id="8656f-273">Click **Test**.</span></span>

    <span data-ttu-id="8656f-274">hello Stream Analytics-jobbet körs hello frågan mot hello exempeldata och visar hello utdata längst hello hello-fönstret.</span><span class="sxs-lookup"><span data-stu-id="8656f-274">hello Stream Analytics job runs hello query against hello sample data and displays hello output at hello bottom of hello window.</span></span> <span data-ttu-id="8656f-275">Du ser att hello händelsehubb och hello Streaming Analytics-jobbet är korrekt konfigurerade.</span><span class="sxs-lookup"><span data-stu-id="8656f-275">This tells you that hello event hub and hello Streaming Analytics job are configured correctly.</span></span> <span data-ttu-id="8656f-276">(Som anges senare skapar du utdatamottagare som hello fråga kan skriva data till.)</span><span class="sxs-lookup"><span data-stu-id="8656f-276">(As noted, later you'll create an output sink that hello query can write data to.)</span></span>

    ![Stream Analytics-jobbet utdata visar 73 poster som genereras](./media/stream-analytics-real-time-fraud-detection/stream-analytics-sa-job-sample-output.png)

    <span data-ttu-id="8656f-278">hello exakta antalet poster som visas beror på hur många poster som har hämtats i ditt exempel 3 minuter.</span><span class="sxs-lookup"><span data-stu-id="8656f-278">hello exact number of records you see will depend on how many records were captured in your 3-minute sample.</span></span>
 
### <a name="reduce-hello-number-of-fields-using-a-column-projection"></a><span data-ttu-id="8656f-279">Minska hello antalet fält med en kolumn projektion</span><span class="sxs-lookup"><span data-stu-id="8656f-279">Reduce hello number of fields using a column projection</span></span>

<span data-ttu-id="8656f-280">I många fall måste inte dina analyser alla hello kolumner från hello Indataströmmen.</span><span class="sxs-lookup"><span data-stu-id="8656f-280">In many cases, your analysis doesn't need all hello columns from hello input stream.</span></span> <span data-ttu-id="8656f-281">Du kan använda en fråga tooproject en mindre uppsättning returneras fält än i hello direktfråga.</span><span class="sxs-lookup"><span data-stu-id="8656f-281">You can use a query tooproject a smaller set of returned fields than in hello pass-through query.</span></span>

1. <span data-ttu-id="8656f-282">Ändra hello frågan i hello kod editor toohello följande:</span><span class="sxs-lookup"><span data-stu-id="8656f-282">Change hello query in hello code editor toohello following:</span></span>

        SELECT CallRecTime, SwitchNum, CallingIMSI, CallingNum, CalledNum 
        FROM 
            CallStream

2. <span data-ttu-id="8656f-283">Klicka på **Test** igen.</span><span class="sxs-lookup"><span data-stu-id="8656f-283">Click **Test** again.</span></span> 

    ![Stream Analytics-jobbet utdata för projektion som visar 25 poster som genereras](./media/stream-analytics-real-time-fraud-detection/stream-analytics-sa-job-sample-output-projection.png)
 
### <a name="count-incoming-calls-by-region-tumbling-window-with-aggregation"></a><span data-ttu-id="8656f-285">Antal inkommande anrop per region: rullande fönster med aggregering</span><span class="sxs-lookup"><span data-stu-id="8656f-285">Count incoming calls by region: Tumbling window with aggregation</span></span>

<span data-ttu-id="8656f-286">Anta att du vill toocount hello antal inkommande anrop per region.</span><span class="sxs-lookup"><span data-stu-id="8656f-286">Suppose you want toocount hello number of incoming calls per region.</span></span> <span data-ttu-id="8656f-287">I strömmande data när du vill tooperform mängdfunktioner som inventering, behöver du toosegment hello dataström i temporal enheter (eftersom hello dataströmmen själva är effektivt oändliga).</span><span class="sxs-lookup"><span data-stu-id="8656f-287">In streaming data, when you want tooperform aggregate functions like counting, you need toosegment hello stream into temporal units (since hello data stream itself is effectively endless).</span></span> <span data-ttu-id="8656f-288">Du gör detta med hjälp av en Streaming Analytics [fönstret funktionen](stream-analytics-window-functions.md).</span><span class="sxs-lookup"><span data-stu-id="8656f-288">You do this using a Streaming Analytics [window function](stream-analytics-window-functions.md).</span></span> <span data-ttu-id="8656f-289">Du kan arbeta med hello informationen i fönstret som en enhet.</span><span class="sxs-lookup"><span data-stu-id="8656f-289">You can then work with hello data inside that window as a unit.</span></span>

<span data-ttu-id="8656f-290">Den här omvandlingen du vill ha en sekvens av temporala windows som inte överlappar varandra – varje fönster har en separat uppsättning data som du kan gruppera och aggregering.</span><span class="sxs-lookup"><span data-stu-id="8656f-290">For this transformation, you want a sequence of temporal windows that don't overlap—each window will have a discrete set of data that you can group and aggregate.</span></span> <span data-ttu-id="8656f-291">Den här typen av fönstret är refererad tooas en *rullande fönster* .</span><span class="sxs-lookup"><span data-stu-id="8656f-291">This type of window is referred tooas a *Tumbling window* .</span></span> <span data-ttu-id="8656f-292">Inom hello rullande fönster kan du räkna hello inkommande samtal grupperade efter `SwitchNum`, som representerar hello land där hello anropet har sitt ursprung.</span><span class="sxs-lookup"><span data-stu-id="8656f-292">Within hello Tumbling window, you can get a count of hello incoming calls grouped by `SwitchNum`, which represents hello country where hello call originated.</span></span> 

1. <span data-ttu-id="8656f-293">Ändra hello frågan i hello kod editor toohello följande:</span><span class="sxs-lookup"><span data-stu-id="8656f-293">Change hello query in hello code editor toohello following:</span></span>

        SELECT 
            System.Timestamp as WindowEnd, SwitchNum, COUNT(*) as CallCount 
        FROM
            CallStream TIMESTAMP BY CallRecTime 
        GROUP BY TUMBLINGWINDOW(s, 5), SwitchNum

    <span data-ttu-id="8656f-294">Den här frågan använder hello `Timestamp By` nyckelord i hello `FROM` satsen toospecify vilket tidsstämpelfält i hello inkommande dataströmmen toouse toodefine hello rullande fönster.</span><span class="sxs-lookup"><span data-stu-id="8656f-294">This query uses hello `Timestamp By` keyword in hello `FROM` clause toospecify which timestamp field in hello input stream toouse toodefine hello Tumbling window.</span></span> <span data-ttu-id="8656f-295">I det här fallet hello fönstret dividerar hello data i segment med hello `CallRecTime` i varje post.</span><span class="sxs-lookup"><span data-stu-id="8656f-295">In this case, hello window divides hello data into segments by hello `CallRecTime` field in each record.</span></span> <span data-ttu-id="8656f-296">(Om inget fält har angetts hello fönsterhantering åtgärden använder hello länge varje händelse når hello händelsehubb.</span><span class="sxs-lookup"><span data-stu-id="8656f-296">(If no field is specified, hello windowing operation uses hello time that each event arrives at hello event hub.</span></span> <span data-ttu-id="8656f-297">Se ”tid Vs programmet ankomsttid” i [strömma Analytics Query Language Reference](https://msdn.microsoft.com/library/azure/dn834998.aspx).</span><span class="sxs-lookup"><span data-stu-id="8656f-297">See "Arrival Time Vs Application Time" in [Stream Analytics Query Language Reference](https://msdn.microsoft.com/library/azure/dn834998.aspx).</span></span> 

    <span data-ttu-id="8656f-298">hello projektion innehåller `System.Timestamp`, som returnerar en tidsstämpel för hello slutet av varje fönster.</span><span class="sxs-lookup"><span data-stu-id="8656f-298">hello projection includes `System.Timestamp`, which returns a timestamp for hello end of each window.</span></span> 

    <span data-ttu-id="8656f-299">toospecify som du vill toouse en rullande fönster, använda hello [TUMBLINGWINDOW](https://msdn.microsoft.com/library/dn835055.aspx) funktion i hello `GROUP BY `satsen.</span><span class="sxs-lookup"><span data-stu-id="8656f-299">toospecify that you want toouse a Tumbling window, you use hello [TUMBLINGWINDOW](https://msdn.microsoft.com/library/dn835055.aspx) function in hello `GROUP BY `clause.</span></span> <span data-ttu-id="8656f-300">I hello-funktionen anger du en tidsenhet (mellan en mikrosekundnivå tooa dag) och en fönsterstorlek (hur många enheter).</span><span class="sxs-lookup"><span data-stu-id="8656f-300">In hello function, you specify a time unit (anywhere from a microsecond tooa day) and a window size (how many units).</span></span> <span data-ttu-id="8656f-301">I det här exemplet består hello rullande fönster av 5 sekunder intervall, så du får ett antal per land för samtal som var femte sekund.</span><span class="sxs-lookup"><span data-stu-id="8656f-301">In this example, hello Tumbling window consists of 5-second intervals, so you will get a count by country for every 5 seconds' worth of calls.</span></span>

2. <span data-ttu-id="8656f-302">Klicka på **Test** igen.</span><span class="sxs-lookup"><span data-stu-id="8656f-302">Click **Test** again.</span></span> <span data-ttu-id="8656f-303">Observera att hello tidsstämplar under i hello resultat **WindowEnd** finns i steg 5 sekunder.</span><span class="sxs-lookup"><span data-stu-id="8656f-303">In hello results, notice that hello timestamps under **WindowEnd** are in 5-second increments.</span></span>

    ![Stream Analytics-jobbet utdata för aggregering, visar 13 poster som genereras](./media/stream-analytics-real-time-fraud-detection/stream-analytics-sa-job-sample-output-aggregation.png)
 
### <a name="detect-sim-fraud-using-a-self-join"></a><span data-ttu-id="8656f-305">Identifiera SIM bedrägeri med hjälp av en självkoppling</span><span class="sxs-lookup"><span data-stu-id="8656f-305">Detect SIM fraud using a self-join</span></span>

<span data-ttu-id="8656f-306">I det här exemplet vi kan överväga användning av falska toobe anrop som kommer från hello samma användare men på olika platser inom 5 sekunder från varandra.</span><span class="sxs-lookup"><span data-stu-id="8656f-306">For this example, we can consider fraudulent usage toobe calls that originate from hello same user but in different locations within 5 seconds of one another.</span></span> <span data-ttu-id="8656f-307">Exempelvis hello samma användare kan inte legitimt gör ett anrop från hello USA och Australien vid hello samtidigt.</span><span class="sxs-lookup"><span data-stu-id="8656f-307">For example, hello same user can't legitimately make a call from hello US and Australia at hello same time.</span></span> 

<span data-ttu-id="8656f-308">toocheck för dessa fall, du kan använda en självkoppling för hello strömmande data toojoin hello dataströmmen tooitself baserat på hello `CallRecTime` värde.</span><span class="sxs-lookup"><span data-stu-id="8656f-308">toocheck for these cases, you can use a self-join of hello streaming data toojoin hello stream tooitself based on hello `CallRecTime` value.</span></span> <span data-ttu-id="8656f-309">Du kan sedan söka för anrop posterna för hello `CallingIMSI` värde (hello ursprung nummer) är hello detsamma, men hello `SwitchNum` värde (land för ursprung) är inte hello samma.</span><span class="sxs-lookup"><span data-stu-id="8656f-309">You can then look for call records where hello `CallingIMSI` value (hello originating number) is hello same, but hello `SwitchNum` value (country of origin) is not hello same.</span></span>

<span data-ttu-id="8656f-310">När du använder en koppling med strömmande data måste hello koppling ange vissa begränsningar på hur långt hello matchande rader kan delas upp i tid.</span><span class="sxs-lookup"><span data-stu-id="8656f-310">When you use a join with streaming data, hello join must provide some limits on how far hello matching rows can be separated in time.</span></span> <span data-ttu-id="8656f-311">(Som tidigare nämnts hello strömmande data är effektivt oändlig.) hello tid gränser för hello relationen har angetts i hello `ON` -satsen i hello koppling, med hello `DATEDIFF` funktion.</span><span class="sxs-lookup"><span data-stu-id="8656f-311">(As noted earlier, hello streaming data is effectively endless.) hello time bounds for hello relationship are specified inside hello `ON` clause of hello join, using hello `DATEDIFF` function .</span></span> <span data-ttu-id="8656f-312">I det här fallet baseras hello koppling på ett samtal data 5 sekunder tidsintervall.</span><span class="sxs-lookup"><span data-stu-id="8656f-312">In this case, hello join is based on a 5-second interval of call data .</span></span>

1. <span data-ttu-id="8656f-313">Ändra hello frågan i hello kod editor toohello följande:</span><span class="sxs-lookup"><span data-stu-id="8656f-313">Change hello query in hello code editor toohello following:</span></span> 

        SELECT  System.Timestamp as Time, 
            CS1.CallingIMSI, 
            CS1.CallingNum as CallingNum1, 
            CS2.CallingNum as CallingNum2, 
            CS1.SwitchNum as Switch1, 
            CS2.SwitchNum as Switch2 
        FROM CallStream CS1 TIMESTAMP BY CallRecTime 
            JOIN CallStream CS2 TIMESTAMP BY CallRecTime 
            ON CS1.CallingIMSI = CS2.CallingIMSI 
            AND DATEDIFF(ss, CS1, CS2) BETWEEN 1 AND 5 
        WHERE CS1.SwitchNum != CS2.SwitchNum

    <span data-ttu-id="8656f-314">Den här frågan är precis som alla SQL-koppling förutom hello `DATEDIFF` funktion i hello koppling.</span><span class="sxs-lookup"><span data-stu-id="8656f-314">This query is like any SQL join except for hello `DATEDIFF` function in hello join.</span></span> <span data-ttu-id="8656f-315">Detta är en version av `DATEDIFF` som är specifika tooStreaming Analytics och det måste visas i hello `ON...BETWEEN` satsen.</span><span class="sxs-lookup"><span data-stu-id="8656f-315">This is a version of `DATEDIFF` that's specific tooStreaming Analytics, and it must appear in hello `ON...BETWEEN` clause.</span></span> <span data-ttu-id="8656f-316">hello parametrar är en tidsenhet (sekunder i det här exemplet) och hello-alias hello två källor för hello koppling.</span><span class="sxs-lookup"><span data-stu-id="8656f-316">hello parameters are a time unit (seconds in this example) and hello aliases of hello two sources for hello join.</span></span> <span data-ttu-id="8656f-317">(Detta skiljer sig från hello standard SQL `DATEDIFF` funktionen.)</span><span class="sxs-lookup"><span data-stu-id="8656f-317">(This is different from hello standard SQL `DATEDIFF` function.)</span></span> 

    <span data-ttu-id="8656f-318">Hej `WHERE` -instruktionen innehåller hello villkor som flaggar hello bedrägliga anropet: hello ursprungliga växlar är inte hello samma.</span><span class="sxs-lookup"><span data-stu-id="8656f-318">hello `WHERE` clause includes hello condition that flags hello fraudulent call: hello originating switches are not hello same.</span></span> 

2. <span data-ttu-id="8656f-319">Klicka på **Test** igen.</span><span class="sxs-lookup"><span data-stu-id="8656f-319">Click **Test** again.</span></span> 

    ![Stream Analytics-jobbet utdata för självkoppling, visar 6 poster som genereras](./media/stream-analytics-real-time-fraud-detection/stream-analytics-sa-job-sample-output-self-join.png)

3. <span data-ttu-id="8656f-321">Klicka på **Spara**.</span><span class="sxs-lookup"><span data-stu-id="8656f-321">Click **Save**.</span></span> <span data-ttu-id="8656f-322">Detta sparar hello självkoppling frågan som en del av hello Streaming Analytics-jobbet.</span><span class="sxs-lookup"><span data-stu-id="8656f-322">This saves hello self-join query as part of hello Streaming Analytics job.</span></span> <span data-ttu-id="8656f-323">(Den inte spara hello exempeldata.)</span><span class="sxs-lookup"><span data-stu-id="8656f-323">(It doesn't save hello sample data.)</span></span>

    ![Spara Stream Analytics-jobbet](./media/stream-analytics-real-time-fraud-detection/stream-analytics-query-editor-save-button-new-portal.png)

## <a name="create-an-output-sink-toostore-transformed-data"></a><span data-ttu-id="8656f-325">Skapa en mottagare toostore omvandlas av utdata</span><span class="sxs-lookup"><span data-stu-id="8656f-325">Create an output sink toostore transformed data</span></span>

<span data-ttu-id="8656f-326">Du har definierat en händelseström, event hub inkommande tooingest händelser och en fråga tooperform en omvandling över hello dataströmmen.</span><span class="sxs-lookup"><span data-stu-id="8656f-326">You've defined an event stream, an event hub input tooingest events, and a query tooperform a transformation over hello stream.</span></span> <span data-ttu-id="8656f-327">hello sista steget är toodefine utdatamottagare för hello jobb – det vill säga en plats toowrite hello omvandlas dataström som.</span><span class="sxs-lookup"><span data-stu-id="8656f-327">hello last step is toodefine an output sink for hello job—that is, a place toowrite hello transformed stream to.</span></span> 

<span data-ttu-id="8656f-328">Du kan använda många resurser som utdata sänkor – SQL Server-databasen, tabellagring, Data Lake lagring, Power BI och en annan händelsehubb.</span><span class="sxs-lookup"><span data-stu-id="8656f-328">You can use many resources as output sinks—a SQL Server database, table storage, Data Lake storage, Power BI, and even another event hub.</span></span> <span data-ttu-id="8656f-329">Den här självstudiekursen skriver du hello dataströmmen tooAzure Blob Storage, vilket är ett vanliga alternativ för att samla in händelseinformation för senare analys, eftersom den innehåller Ostrukturerade data.</span><span class="sxs-lookup"><span data-stu-id="8656f-329">For this tutorial, you'll write hello stream tooAzure Blob Storage, which is a typical choice for collecting event information for later analysis, since it accommodates unstructured data .</span></span>

<span data-ttu-id="8656f-330">Om du har en befintlig blob storage-konto kan använda du som.</span><span class="sxs-lookup"><span data-stu-id="8656f-330">If you have an existing blob storage account, you can use that.</span></span> <span data-ttu-id="8656f-331">Den här självstudiekursen lär du hur toocreate en ny lagringsplats kontot för den här kursen.</span><span class="sxs-lookup"><span data-stu-id="8656f-331">For this tutorial, we'll show you how toocreate a new storage account just for this tutorial.</span></span>

### <a name="create-an-azure-blob-storage-account"></a><span data-ttu-id="8656f-332">Skapa ett Azure Blob Storage-konto</span><span class="sxs-lookup"><span data-stu-id="8656f-332">Create an Azure Blob Storage account</span></span>

1. <span data-ttu-id="8656f-333">Returnera toohello Streaming Analytics-jobbet bladet i hello Azure-portalen.</span><span class="sxs-lookup"><span data-stu-id="8656f-333">In hello Azure portal, return toohello Streaming Analytics job blade.</span></span> <span data-ttu-id="8656f-334">(Om du har stängt hello-bladet, söka efter `sa_frauddetection_job_demo` i hello **alla resurser** bladet.)</span><span class="sxs-lookup"><span data-stu-id="8656f-334">(If you closed hello blade, search for `sa_frauddetection_job_demo` in hello **All resources** blade.)</span></span>
2. <span data-ttu-id="8656f-335">I hello **jobbet topologi** klickar du på hello **utdata** rutan.</span><span class="sxs-lookup"><span data-stu-id="8656f-335">In hello **Job Topology** section, click hello **Output** box.</span></span> 
3. <span data-ttu-id="8656f-336">I hello **utdata** bladet, klickar du på  **+ &nbsp;Lägg till** och fyller sedan hello bladet med dessa värden:</span><span class="sxs-lookup"><span data-stu-id="8656f-336">In hello **Outputs** blade, click **+&nbsp;Add** and then fill out hello blade with these values:</span></span>

    * <span data-ttu-id="8656f-337">**Ett utdataalias**: Använd hello namn `CallStream-FraudulentCalls`.</span><span class="sxs-lookup"><span data-stu-id="8656f-337">**Output alias**: Use hello name `CallStream-FraudulentCalls`.</span></span> 
    * <span data-ttu-id="8656f-338">**Sink**: Välj **Blob storage**.</span><span class="sxs-lookup"><span data-stu-id="8656f-338">**Sink**: Select **Blob storage**.</span></span>
    * <span data-ttu-id="8656f-339">**Importalternativ**: Välj **använda blob storage från aktuell prenumeration**.</span><span class="sxs-lookup"><span data-stu-id="8656f-339">**Import options**: Select **Use blob storage from current subscription**.</span></span>
    * <span data-ttu-id="8656f-340">**Lagringskontot**.</span><span class="sxs-lookup"><span data-stu-id="8656f-340">**Storage account**.</span></span> <span data-ttu-id="8656f-341">Välj **Skapa nytt lagringskonto.**</span><span class="sxs-lookup"><span data-stu-id="8656f-341">Select **Create new storage account.**</span></span>
    * <span data-ttu-id="8656f-342">**Lagringskontot** (andra rutan).</span><span class="sxs-lookup"><span data-stu-id="8656f-342">**Storage account** (second box).</span></span> <span data-ttu-id="8656f-343">Ange `YOURNAMEsademo`, där `YOURNAME` är ditt namn eller en annan unik sträng.</span><span class="sxs-lookup"><span data-stu-id="8656f-343">Enter `YOURNAMEsademo`, where `YOURNAME` is your name or another unique string.</span></span> <span data-ttu-id="8656f-344">hello namn kan använda bara gemena bokstäver och siffror, och den måste vara unikt i Azure.</span><span class="sxs-lookup"><span data-stu-id="8656f-344">hello name can use only lowercase letters and numbers, and it must be unique across Azure.</span></span> 
    * <span data-ttu-id="8656f-345">**Behållaren**.</span><span class="sxs-lookup"><span data-stu-id="8656f-345">**Container**.</span></span> <span data-ttu-id="8656f-346">Ange `sa-fraudulentcalls-demo`.</span><span class="sxs-lookup"><span data-stu-id="8656f-346">Enter `sa-fraudulentcalls-demo`.</span></span>
    <span data-ttu-id="8656f-347">Hej lagringskontonamn och behållarnamn är används tillsammans tooprovide en URI för hello blob storage, så här:</span><span class="sxs-lookup"><span data-stu-id="8656f-347">hello storage account name and container name are used together tooprovide a URI for hello blob storage, like this:</span></span> 

    `http://yournamesademo.blob.core.windows.net/sa-fraudulentcalls-demo/...`
    
    ![”Nya utdata” bladet för Stream Analytics-jobbet](./media/stream-analytics-real-time-fraud-detection/stream-analytics-create-output-blob-storage-new-console.png)
    
4. <span data-ttu-id="8656f-349">Klicka på **Skapa**.</span><span class="sxs-lookup"><span data-stu-id="8656f-349">Click **Create**.</span></span> 

    <span data-ttu-id="8656f-350">Azure skapar hello storage-konto och skapar automatiskt en nyckel.</span><span class="sxs-lookup"><span data-stu-id="8656f-350">Azure creates hello storage account and generates a key automatically.</span></span> 

5. <span data-ttu-id="8656f-351">Stäng hello **utdata** bladet.</span><span class="sxs-lookup"><span data-stu-id="8656f-351">Close hello **Outputs** blade.</span></span> 

## <a name="start-hello-streaming-analytics-job"></a><span data-ttu-id="8656f-352">Starta hello Streaming Analytics-jobbet</span><span class="sxs-lookup"><span data-stu-id="8656f-352">Start hello Streaming Analytics job</span></span>

<span data-ttu-id="8656f-353">hello-jobbet har nu konfigurerats.</span><span class="sxs-lookup"><span data-stu-id="8656f-353">hello job is now configured.</span></span> <span data-ttu-id="8656f-354">Du har angett indata (hello händelsehubb), en omvandling (hello frågan toolook för bedrägliga anrop) och utdata (blobblagring).</span><span class="sxs-lookup"><span data-stu-id="8656f-354">You've specified an input (hello event hub), a transformation (hello query toolook for fraudulent calls), and an output (blob storage).</span></span> <span data-ttu-id="8656f-355">Du kan nu starta hello jobb.</span><span class="sxs-lookup"><span data-stu-id="8656f-355">You can now start hello job.</span></span> 

1. <span data-ttu-id="8656f-356">Kontrollera att hello TelcoGenerator appen körs.</span><span class="sxs-lookup"><span data-stu-id="8656f-356">Make sure hello TelcoGenerator app is running.</span></span>

2. <span data-ttu-id="8656f-357">I hello jobb-bladet, klickar du på **starta**.</span><span class="sxs-lookup"><span data-stu-id="8656f-357">In hello job blade, click **Start**.</span></span>

    ![Starta hello Stream Analytics-jobbet](./media/stream-analytics-real-time-fraud-detection/stream-analytics-sa-job-start-output.png)

3. <span data-ttu-id="8656f-359">I hello **startjobb** bladet för utdata starttid, Välj **nu**.</span><span class="sxs-lookup"><span data-stu-id="8656f-359">In hello **Start job** blade, for Job output start time, select **Now**.</span></span> 

4. <span data-ttu-id="8656f-360">Klicka på **starta**.</span><span class="sxs-lookup"><span data-stu-id="8656f-360">Click **Start**.</span></span> 

    ![”Starta jobbet” bladet för hello Stream Analytics-jobbet](./media/stream-analytics-real-time-fraud-detection/stream-analytics-sa-job-start-job-blade.png)

    <span data-ttu-id="8656f-362">Azure meddelar dig när hello jobb har startat, och i hello jobb-bladet hello visas statusen **kör**.</span><span class="sxs-lookup"><span data-stu-id="8656f-362">Azure notifies you when hello job has started, and in hello job blade, hello status is displayed as **Running**.</span></span>

    ![Stream Analytics-jobbstatusen, visar ”körs”](./media/stream-analytics-real-time-fraud-detection/stream-analytics-sa-job-running-status.png)
    

## <a name="examine-hello-transformed-data"></a><span data-ttu-id="8656f-364">Granska hello omvandlas data</span><span class="sxs-lookup"><span data-stu-id="8656f-364">Examine hello transformed data</span></span>

<span data-ttu-id="8656f-365">Nu har du en fullständig Streaming Analytics-jobbet.</span><span class="sxs-lookup"><span data-stu-id="8656f-365">You now have a complete Streaming Analytics job.</span></span> <span data-ttu-id="8656f-366">hello jobbet undersöka en dataström med metadata för telefonsamtal, söker efter bedrägliga telefonsamtal i realtid och skriva information om dessa falska anrop toostorage.</span><span class="sxs-lookup"><span data-stu-id="8656f-366">hello job is examining a stream of phone call metadata, looking for fraudulent phone calls in real time, and writing information about those fraudulent calls toostorage.</span></span> 

<span data-ttu-id="8656f-367">toocomplete den här självstudiekursen kommer du kanske vill toolook hello data som avbildas av hello Streaming Analytics-jobbet.</span><span class="sxs-lookup"><span data-stu-id="8656f-367">toocomplete this tutorial, you might want toolook at hello data being captured by hello Streaming Analytics job.</span></span> <span data-ttu-id="8656f-368">hello data skrivs tooAzure blogg lagring i segment (filer).</span><span class="sxs-lookup"><span data-stu-id="8656f-368">hello data is being written tooAzure Blog Storage in chunks (files).</span></span> <span data-ttu-id="8656f-369">Du kan använda ett verktyg som läser Azure Blob Storage.</span><span class="sxs-lookup"><span data-stu-id="8656f-369">You can use any tool that reads Azure Blob Storage.</span></span> <span data-ttu-id="8656f-370">Enligt beskrivningen i hello avsnittet förutsättningar, du kan använda Azure tillägg i Visual Studio och du kan använda ett verktyg som [Azure Lagringsutforskaren](http://storageexplorer.com/) eller [Azure Explorer](http://www.cerebrata.com/products/azure-explorer/introduction).</span><span class="sxs-lookup"><span data-stu-id="8656f-370">As noted in hello Prerequisites section, you can use Azure extensions in Visual Studio, or you can use a tool like [Azure Storage Explorer](http://storageexplorer.com/) or [Azure Explorer](http://www.cerebrata.com/products/azure-explorer/introduction).</span></span> 

<span data-ttu-id="8656f-371">När du undersöker hello innehållet i en fil i blob storage finns ungefär hello följande:</span><span class="sxs-lookup"><span data-stu-id="8656f-371">When you examine hello contents of a file in blob storage, you see something like hello following :</span></span>

![Azure blob storage med Streaming Analytics-utdata](./media/stream-analytics-real-time-fraud-detection/stream-analytics-sa-job-blob-storage-view.png)
 

## <a name="clean-up-resources"></a><span data-ttu-id="8656f-373">Rensa resurser</span><span class="sxs-lookup"><span data-stu-id="8656f-373">Clean up resources</span></span>

<span data-ttu-id="8656f-374">Vi har ytterligare artiklar som fortsätta med hello upptäckt av bedrägerier scenariot och som använder hello-resurser som du har skapat i den här kursen.</span><span class="sxs-lookup"><span data-stu-id="8656f-374">We have additional articles that continue with hello fraud-detection scenario and that use hello resources that you've created in this tutorial.</span></span> <span data-ttu-id="8656f-375">Om du vill toocontinue finns hello förslag under **nästa steg** senare.</span><span class="sxs-lookup"><span data-stu-id="8656f-375">If you want toocontinue, see hello suggestions under **Next steps** later.</span></span>

<span data-ttu-id="8656f-376">Men om du är klar och du behöver inte hello-resurser som du har skapat, du kan ta bort dem så att du inte debiteras onödiga Azure.</span><span class="sxs-lookup"><span data-stu-id="8656f-376">However, if you're done and you don't need hello resources you've created, you can delete them so that you don't incur unnecessary Azure charges.</span></span> <span data-ttu-id="8656f-377">I så fall föreslår vi att du hello följande:</span><span class="sxs-lookup"><span data-stu-id="8656f-377">In that case, we suggest that you do hello following:</span></span>

1. <span data-ttu-id="8656f-378">Stoppa hello Streaming Analytics-jobbet.</span><span class="sxs-lookup"><span data-stu-id="8656f-378">Stop hello Streaming Analytics job.</span></span> <span data-ttu-id="8656f-379">I hello **jobb** bladet, klickar du på **stoppa** hello överst.</span><span class="sxs-lookup"><span data-stu-id="8656f-379">In hello **Jobs** blade, click **Stop** at hello top.</span></span>
2. <span data-ttu-id="8656f-380">Stoppa hello anger Generator app.</span><span class="sxs-lookup"><span data-stu-id="8656f-380">Stop hello Telco Generator app.</span></span> <span data-ttu-id="8656f-381">Tryck på Ctrl + C i hello-kommandofönster som du startade hello app.</span><span class="sxs-lookup"><span data-stu-id="8656f-381">In hello command window where you started hello app, press Ctrl+C.</span></span>
3. <span data-ttu-id="8656f-382">Ta bort om du har skapat en ny blob storage-konto för den här kursen.</span><span class="sxs-lookup"><span data-stu-id="8656f-382">If you created a new blob storage account just for this tutorial, delete it.</span></span> 
4. <span data-ttu-id="8656f-383">Ta bort hello Streaming Analytics-jobbet.</span><span class="sxs-lookup"><span data-stu-id="8656f-383">Delete hello Streaming Analytics job.</span></span>
5. <span data-ttu-id="8656f-384">Ta bort hello händelsehubb.</span><span class="sxs-lookup"><span data-stu-id="8656f-384">Delete hello event hub.</span></span>
6. <span data-ttu-id="8656f-385">Ta bort hello event hub namnområdet.</span><span class="sxs-lookup"><span data-stu-id="8656f-385">Delete hello event hub namespace.</span></span>

## <a name="get-support"></a><span data-ttu-id="8656f-386">Få support</span><span class="sxs-lookup"><span data-stu-id="8656f-386">Get support</span></span>

<span data-ttu-id="8656f-387">För ytterligare hjälp försök vår [Azure Stream Analytics-forum](https://social.msdn.microsoft.com/Forums/en-US/home?forum=AzureStreamAnalytics).</span><span class="sxs-lookup"><span data-stu-id="8656f-387">For further assistance, try our [Azure Stream Analytics forum](https://social.msdn.microsoft.com/Forums/en-US/home?forum=AzureStreamAnalytics).</span></span>

## <a name="next-steps"></a><span data-ttu-id="8656f-388">Nästa steg</span><span class="sxs-lookup"><span data-stu-id="8656f-388">Next steps</span></span>

<span data-ttu-id="8656f-389">Den här kursen kan du fortsätta med hello följande artiklar:</span><span class="sxs-lookup"><span data-stu-id="8656f-389">You can continue this tutorial with hello following articles:</span></span>

* <span data-ttu-id="8656f-390">[Strömma analyser och Power BI: en analys i realtid instrumentpanel för strömmande data](stream-analytics-power-bi-dashboard.md).</span><span class="sxs-lookup"><span data-stu-id="8656f-390">[Stream Analytics and Power BI: A real-time analytics dashboard for streaming data](stream-analytics-power-bi-dashboard.md).</span></span> <span data-ttu-id="8656f-391">Den här artikeln visar hur toosend hello anger utdata från hello Stream Analytics-jobbet tooPower BI för visualisering i realtid och analys.</span><span class="sxs-lookup"><span data-stu-id="8656f-391">This article shows you how toosend hello TelCo output of hello Stream Analytics job tooPower BI for real-time visualization and analysis.</span></span>
* <span data-ttu-id="8656f-392">[Hur toostore data från Azure Stream Analytics i en Azure Redis-Cache med hjälp av Azure Functions](stream-analytics-functions-redis.md).</span><span class="sxs-lookup"><span data-stu-id="8656f-392">[How toostore data from Azure Stream Analytics in an Azure Redis Cache using Azure Functions](stream-analytics-functions-redis.md).</span></span> <span data-ttu-id="8656f-393">Den här artikeln visar hur toouse Azure Functions toowrite bedrägliga anropar tooan Azure Redis-cache via en Service Bus-kö.</span><span class="sxs-lookup"><span data-stu-id="8656f-393">This article shows how toouse Azure Functions toowrite fraudulent calls tooan Azure Redis cache via a Service Bus queue.</span></span>

<span data-ttu-id="8656f-394">Mer information om Stream Analytics i allmänhet försök dessa artiklar:</span><span class="sxs-lookup"><span data-stu-id="8656f-394">For more information about Stream Analytics in general, try these articles:</span></span>

* [<span data-ttu-id="8656f-395">Introduktion tooAzure Stream Analytics</span><span class="sxs-lookup"><span data-stu-id="8656f-395">Introduction tooAzure Stream Analytics</span></span>](stream-analytics-introduction.md)
* [<span data-ttu-id="8656f-396">Skala Azure Stream Analytics-jobb</span><span class="sxs-lookup"><span data-stu-id="8656f-396">Scale Azure Stream Analytics jobs</span></span>](stream-analytics-scale-jobs.md)
* [<span data-ttu-id="8656f-397">Referens för Azure Stream Analytics-frågespråket</span><span class="sxs-lookup"><span data-stu-id="8656f-397">Azure Stream Analytics Query Language Reference</span></span>](https://msdn.microsoft.com/library/azure/dn834998.aspx)
* [<span data-ttu-id="8656f-398">Referens för Azure Stream Analytics Management REST API</span><span class="sxs-lookup"><span data-stu-id="8656f-398">Azure Stream Analytics Management REST API Reference</span></span>](https://msdn.microsoft.com/library/azure/dn835031.aspx)

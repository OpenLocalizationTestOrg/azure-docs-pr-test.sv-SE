---
title: "Nätverk topologiöverväganden när du använder Azure Active Directory Application Proxy | Microsoft Docs"
description: "Beskriver topologiöverväganden för nätverk när du använder Azure AD Application Proxy."
services: active-directory
documentationcenter: 
author: kgremban
manager: femila
ms.assetid: 
ms.service: active-directory
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 07/28/2017
ms.author: kgremban
ms.reviewer: harshja
ms.custom: it-pro
ms.openlocfilehash: 11244e0044eef8441e3a37ab8aeff0da30dacdb8
ms.sourcegitcommit: 50e23e8d3b1148ae2d36dad3167936b4e52c8a23
ms.translationtype: MT
ms.contentlocale: sv-SE
ms.lasthandoff: 08/18/2017
---
# <a name="network-topology-considerations-when-using-azure-active-directory-application-proxy"></a><span data-ttu-id="09ff4-103">Topologiöverväganden nätverk när du använder Azure Active Directory Application Proxy</span><span class="sxs-lookup"><span data-stu-id="09ff4-103">Network topology considerations when using Azure Active Directory Application Proxy</span></span>

<span data-ttu-id="09ff4-104">Den här artikeln förklarar topologiöverväganden för nätverk när du använder Azure Active Directory (Azure AD) Application Proxy för att publicera och åtkomst till dina program via fjärranslutning.</span><span class="sxs-lookup"><span data-stu-id="09ff4-104">This article explains network topology considerations when using Azure Active Directory (Azure AD) Application Proxy for publishing and accessing your applications remotely.</span></span>

## <a name="traffic-flow"></a><span data-ttu-id="09ff4-105">Trafikflöde</span><span class="sxs-lookup"><span data-stu-id="09ff4-105">Traffic flow</span></span>

<span data-ttu-id="09ff4-106">Om ett program har publicerats till Azure AD Application Proxy flödar trafik från användarna till programmen via tre anslutningar:</span><span class="sxs-lookup"><span data-stu-id="09ff4-106">When an application is published through Azure AD Application Proxy, traffic from the users to the applications flows through three connections:</span></span>

1. <span data-ttu-id="09ff4-107">Användaren ansluter till Azure AD Application Proxy offentliga tjänstslutpunkten på Azure</span><span class="sxs-lookup"><span data-stu-id="09ff4-107">The user connects to the Azure AD Application Proxy service public endpoint on Azure</span></span>
2. <span data-ttu-id="09ff4-108">Application Proxy-tjänsten ansluter till Application Proxy connector</span><span class="sxs-lookup"><span data-stu-id="09ff4-108">The Application Proxy service connects to the Application Proxy connector</span></span>
3. <span data-ttu-id="09ff4-109">Application Proxy connector ansluter till målprogrammet</span><span class="sxs-lookup"><span data-stu-id="09ff4-109">The Application Proxy connector connects to the target application</span></span>

![Diagram över trafikflödet från användaren till målprogrammet](./media/application-proxy-network-topologies/application-proxy-three-hops.png)

## <a name="tenant-location-and-application-proxy-service"></a><span data-ttu-id="09ff4-111">Klient-plats och tjänsten för Webbprogramproxy</span><span class="sxs-lookup"><span data-stu-id="09ff4-111">Tenant location and Application Proxy service</span></span>

<span data-ttu-id="09ff4-112">När du registrerar dig för en Azure AD-klient bestäms regionen för din klient av det land som du anger.</span><span class="sxs-lookup"><span data-stu-id="09ff4-112">When you sign up for an Azure AD tenant, the region of your tenant is determined by the country you specify.</span></span> <span data-ttu-id="09ff4-113">När du aktiverar Application Proxy valt tjänstinstanser programproxyn för din klient eller skapats i samma region som din Azure AD-klient eller till den närmaste regionen.</span><span class="sxs-lookup"><span data-stu-id="09ff4-113">When you enable Application Proxy, the Application Proxy service instances for your tenant are chosen or created in the same region as your Azure AD tenant, or the closest region to it.</span></span>

<span data-ttu-id="09ff4-114">Till exempel om regionen för din Azure AD-klient är Europeiska unionen (EU), använda alla Application Proxy-kopplingar tjänstinstanser i Azure-datacenter i EU.</span><span class="sxs-lookup"><span data-stu-id="09ff4-114">For example, if your Azure AD tenant’s region is the European Union (EU), all your Application Proxy connectors use service instances in Azure datacenters in the EU.</span></span> <span data-ttu-id="09ff4-115">När dina användare få tillgång till publicerade program, sin trafik som passerar tjänstinstanser Application Proxy på den här platsen.</span><span class="sxs-lookup"><span data-stu-id="09ff4-115">When your users access published applications, their traffic goes through the Application Proxy service instances in this location.</span></span>

## <a name="considerations-for-reducing-latency"></a><span data-ttu-id="09ff4-116">Överväganden för att minska svarstiden</span><span class="sxs-lookup"><span data-stu-id="09ff4-116">Considerations for reducing latency</span></span>

<span data-ttu-id="09ff4-117">Alla proxylösningar för introducera fördröjning i anslutningen.</span><span class="sxs-lookup"><span data-stu-id="09ff4-117">All proxy solutions introduce latency into your network connection.</span></span> <span data-ttu-id="09ff4-118">Oavsett vilken proxy- eller VPN-lösning som du väljer som din lösning för fjärråtkomst, innehåller den alltid en uppsättning servrar som möjliggör anslutning till i företagsnätverket.</span><span class="sxs-lookup"><span data-stu-id="09ff4-118">No matter which proxy or VPN solution you choose as your remote access solution, it always includes a set of servers enabling the connection to inside your corporate network.</span></span>

<span data-ttu-id="09ff4-119">Organisationer inkluderar vanligtvis server-slutpunkter i sina perimeternätverk.</span><span class="sxs-lookup"><span data-stu-id="09ff4-119">Organizations typically include server endpoints in their perimeter network.</span></span> <span data-ttu-id="09ff4-120">Med Azure AD Application Proxy, men flödar trafiken via proxytjänst i molnet medan kopplingar finns i företagsnätverket.</span><span class="sxs-lookup"><span data-stu-id="09ff4-120">With Azure AD Application Proxy, however, traffic flows through the proxy service in the cloud while the connectors reside on your corporate network.</span></span> <span data-ttu-id="09ff4-121">Det krävs inga perimeternätverk.</span><span class="sxs-lookup"><span data-stu-id="09ff4-121">No perimeter network is required.</span></span>

<span data-ttu-id="09ff4-122">I nästa avsnitt innehåller ytterligare förslag för att hjälpa dig att minska svarstiden ytterligare.</span><span class="sxs-lookup"><span data-stu-id="09ff4-122">The next sections contain additional suggestions to help you reduce latency even further.</span></span> 

### <a name="connector-placement"></a><span data-ttu-id="09ff4-123">Placering av koppling</span><span class="sxs-lookup"><span data-stu-id="09ff4-123">Connector placement</span></span>

<span data-ttu-id="09ff4-124">Programproxy väljer placeringen av instanser för dig, baserat på klient-plats.</span><span class="sxs-lookup"><span data-stu-id="09ff4-124">Application Proxy chooses the location of instances for you, based on your tenant location.</span></span> <span data-ttu-id="09ff4-125">Men kommer du till Bestäm var du vill installera connector, vilket ger dig möjlighet att definiera egenskaperna för fördröjning av nätverkstrafiken.</span><span class="sxs-lookup"><span data-stu-id="09ff4-125">However, you get to decide where to install the connector, giving you the power to define the latency characteristics of your network traffic.</span></span>

<span data-ttu-id="09ff4-126">När du konfigurerar tjänsten Application Proxy kan du ställa följande frågor:</span><span class="sxs-lookup"><span data-stu-id="09ff4-126">When setting up the Application Proxy service, ask the following questions:</span></span>

* <span data-ttu-id="09ff4-127">Var finns appen?</span><span class="sxs-lookup"><span data-stu-id="09ff4-127">Where is the app located?</span></span>
* <span data-ttu-id="09ff4-128">Var finns de flesta användare som har åtkomst till appen?</span><span class="sxs-lookup"><span data-stu-id="09ff4-128">Where are most users who access the app located?</span></span>
* <span data-ttu-id="09ff4-129">Var finns Application Proxy-instans</span><span class="sxs-lookup"><span data-stu-id="09ff4-129">Where is the Application Proxy instance located?</span></span>
* <span data-ttu-id="09ff4-130">Du redan har en dedikerad nätverksanslutning till Azure-Datacenter konfigurera Azure ExpressRoute eller en liknande VPN?</span><span class="sxs-lookup"><span data-stu-id="09ff4-130">Do you already have a dedicated network connection to Azure datacenters set up, like Azure ExpressRoute or a similar VPN?</span></span>

<span data-ttu-id="09ff4-131">Kopplingen har att kommunicera med både Azure och dina program (steg 2 och 3 i trafikflödesdiagram), så placeringen av kopplingen påverkar svarstiden för dessa två anslutningar.</span><span class="sxs-lookup"><span data-stu-id="09ff4-131">The connector has to communicate with both Azure and your applications (steps 2 and 3 in the Traffic flow diagram), so the placement of the connector affects the latency of those two connections.</span></span> <span data-ttu-id="09ff4-132">När du utvärderar placeringen av kopplingen, Tänk på följande:</span><span class="sxs-lookup"><span data-stu-id="09ff4-132">When evaluating the placement of the connector, keep in mind the following points:</span></span>

* <span data-ttu-id="09ff4-133">Om du vill använda Kerberos-begränsad delegering (KCD) för enkel inloggning måste kopplingen en fri ett datacenter.</span><span class="sxs-lookup"><span data-stu-id="09ff4-133">If you want to use Kerberos constrained delegation (KCD) for single sign-on, then the connector needs a line of sight to a datacenter.</span></span> <span data-ttu-id="09ff4-134">Dessutom måste connector-servern vara ansluten till en domän.</span><span class="sxs-lookup"><span data-stu-id="09ff4-134">Additionally, the connector server needs to be domain joined.</span></span>  
* <span data-ttu-id="09ff4-135">Installera connector närmare till programmet i osäker.</span><span class="sxs-lookup"><span data-stu-id="09ff4-135">When in doubt, install the connector closer to the application.</span></span>

### <a name="general-approach-to-minimize-latency"></a><span data-ttu-id="09ff4-136">Allmän metod för att minimera svarstider</span><span class="sxs-lookup"><span data-stu-id="09ff4-136">General approach to minimize latency</span></span>

<span data-ttu-id="09ff4-137">Du kan minimera svarstiden för slutpunkt till slutpunkt-trafik genom att optimera varje nätverksanslutning.</span><span class="sxs-lookup"><span data-stu-id="09ff4-137">You can minimize the latency of the end-to-end traffic by optimizing each network connection.</span></span> <span data-ttu-id="09ff4-138">Varje anslutning kan optimeras genom att:</span><span class="sxs-lookup"><span data-stu-id="09ff4-138">Each connection can be optimized by:</span></span>

* <span data-ttu-id="09ff4-139">Minskar avståndet mellan de två parterna hopp.</span><span class="sxs-lookup"><span data-stu-id="09ff4-139">Reducing the distance between the two ends of the hop.</span></span>
* <span data-ttu-id="09ff4-140">Om du väljer rätt nätverket för att bläddra i.</span><span class="sxs-lookup"><span data-stu-id="09ff4-140">Choosing the right network to traverse.</span></span> <span data-ttu-id="09ff4-141">Till exempel kan gå igenom ett privat nätverk i stället för det offentliga Internet gå snabbare, på grund av dedicerade länkar.</span><span class="sxs-lookup"><span data-stu-id="09ff4-141">For example, traversing a private network rather than the public Internet may be faster, due to dedicated links.</span></span>

<span data-ttu-id="09ff4-142">Om du har en fast VPN eller ExpressRoute-länk mellan Azure och företagets nätverk, kan du vill använda.</span><span class="sxs-lookup"><span data-stu-id="09ff4-142">If you have a dedicated VPN or ExpressRoute link between Azure and your corporate network, you may want to use that.</span></span>

## <a name="focus-your-optimization-strategy"></a><span data-ttu-id="09ff4-143">Fokusera din strategi för optimering</span><span class="sxs-lookup"><span data-stu-id="09ff4-143">Focus your optimization strategy</span></span>

<span data-ttu-id="09ff4-144">Det finns mycket mer som du kan göra om du vill kontrollera anslutningen mellan användare och tjänsten Application Proxy.</span><span class="sxs-lookup"><span data-stu-id="09ff4-144">There's little that you can do to control the connection between your users and the Application Proxy service.</span></span> <span data-ttu-id="09ff4-145">Användare kan komma åt dina appar från ett hemnätverk, ett kafé eller ett annat land.</span><span class="sxs-lookup"><span data-stu-id="09ff4-145">Users may access your apps from a home network, a coffee shop, or a different country.</span></span> <span data-ttu-id="09ff4-146">I stället kan du optimera anslutningar från tjänsten Application Proxy till Application Proxy-kopplingar för appar.</span><span class="sxs-lookup"><span data-stu-id="09ff4-146">Instead, you can optimize the connections from the Application Proxy service to the Application Proxy connectors to the apps.</span></span> <span data-ttu-id="09ff4-147">Överväg att använda följande mönster i din miljö.</span><span class="sxs-lookup"><span data-stu-id="09ff4-147">Consider incorporating the following patterns in your environment.</span></span>

### <a name="pattern-1-put-the-connector-close-to-the-application"></a><span data-ttu-id="09ff4-148">Mönstret 1: Placera kopplingen nära programmet</span><span class="sxs-lookup"><span data-stu-id="09ff4-148">Pattern 1: Put the connector close to the application</span></span>

<span data-ttu-id="09ff4-149">Placera kopplingen nära målprogrammet i kundens nätverk.</span><span class="sxs-lookup"><span data-stu-id="09ff4-149">Place the connector close to the target application in the customer network.</span></span> <span data-ttu-id="09ff4-150">Den här konfigurationen minimerar steg 3 i diagrammet topografi eftersom anslutningen och program är nära.</span><span class="sxs-lookup"><span data-stu-id="09ff4-150">This configuration minimizes step 3 in the topography diagram, because the connector and application are close.</span></span> 

<span data-ttu-id="09ff4-151">Om din anslutningstjänst måste en fri domänkontrollanten, är det fördelaktigt med det här mönstret.</span><span class="sxs-lookup"><span data-stu-id="09ff4-151">If your connector needs a line of sight to the domain controller, then this pattern is advantageous.</span></span> <span data-ttu-id="09ff4-152">De flesta av våra kunder att använda det här mönstret eftersom det fungerar bra för de flesta scenarier.</span><span class="sxs-lookup"><span data-stu-id="09ff4-152">Most of our customers use this pattern, because it works well for most scenarios.</span></span> <span data-ttu-id="09ff4-153">Det här mönstret kan även kombineras med mönstret 2 att optimera trafik mellan service och anslutningen.</span><span class="sxs-lookup"><span data-stu-id="09ff4-153">This pattern can also be combined with pattern 2 to optimize traffic between the service and the connector.</span></span>

### <a name="pattern-2-take-advantage-of-expressroute-with-public-peering"></a><span data-ttu-id="09ff4-154">Mönstret 2: Dra nytta av ExpressRoute med offentlig peering</span><span class="sxs-lookup"><span data-stu-id="09ff4-154">Pattern 2: Take advantage of ExpressRoute with public peering</span></span>

<span data-ttu-id="09ff4-155">Om du har konfigurerats med offentlig peering ExpressRoute kan använda du snabbare ExpressRoute-anslutningen för trafik mellan Application Proxy och anslutningen.</span><span class="sxs-lookup"><span data-stu-id="09ff4-155">If you have ExpressRoute set up with public peering, you can use the faster ExpressRoute connection for traffic between Application Proxy and the connector.</span></span> <span data-ttu-id="09ff4-156">Anslutningen är fortfarande i nätverket, nära appen.</span><span class="sxs-lookup"><span data-stu-id="09ff4-156">The connector is still on your network, close to the app.</span></span>

### <a name="pattern-3-take-advantage-of-expressroute-with-private-peering"></a><span data-ttu-id="09ff4-157">Mönster 3: Dra nytta av ExpressRoute med privat peering</span><span class="sxs-lookup"><span data-stu-id="09ff4-157">Pattern 3: Take advantage of ExpressRoute with private peering</span></span>

<span data-ttu-id="09ff4-158">Om du har en dedikerad VPN eller ExpressRoute som konfigurerats med privat peering mellan Azure och företagets nätverk, har du ett annat alternativ.</span><span class="sxs-lookup"><span data-stu-id="09ff4-158">If you have a dedicated VPN or ExpressRoute set up with private peering between Azure and your corporate network, you have another option.</span></span> <span data-ttu-id="09ff4-159">I den här konfigurationen anses vanligtvis det virtuella nätverket i Azure som ett tillägg till företagets nätverk.</span><span class="sxs-lookup"><span data-stu-id="09ff4-159">In this configuration, the virtual network in Azure is typically considered as an extension of the corporate network.</span></span> <span data-ttu-id="09ff4-160">Så kan du installera connector i Azure-datacentret och fortfarande uppfyller kraven låg latens för anslutningen till app-anslutningen.</span><span class="sxs-lookup"><span data-stu-id="09ff4-160">So you can install the connector in the Azure datacenter, and still satisfy the low latency requirements of the connector-to-app connection.</span></span>

<span data-ttu-id="09ff4-161">Latens manipuleras inte eftersom trafiken flödar via en dedikerad anslutning.</span><span class="sxs-lookup"><span data-stu-id="09ff4-161">Latency is not compromised because traffic is flowing over a dedicated connection.</span></span> <span data-ttu-id="09ff4-162">Du kan också få bättre svarstid för Application Proxy-tjänstanslutning eftersom kopplingen är installerad i ett Azure-datacenter nära din plats för Azure AD-klient.</span><span class="sxs-lookup"><span data-stu-id="09ff4-162">You also get improved Application Proxy service-to-connector latency because the connector is installed in an Azure datacenter close to your Azure AD tenant location.</span></span>

![Diagram över anslutning är installerad i ett Azure-datacenter](./media/application-proxy-network-topologies/application-proxy-expressroute-private.png)

### <a name="other-approaches"></a><span data-ttu-id="09ff4-164">Andra metoder</span><span class="sxs-lookup"><span data-stu-id="09ff4-164">Other approaches</span></span>

<span data-ttu-id="09ff4-165">Den här artikeln fokuserar på placering av koppling, men du kan också ändra placeringen av programmet för att få bättre svarstid egenskaper.</span><span class="sxs-lookup"><span data-stu-id="09ff4-165">Although the focus of this article is connector placement, you can also change the placement of the application to get better latency characteristics.</span></span>

<span data-ttu-id="09ff4-166">Mer och mer flyttar organisationer sina nätverk i värdbaserade miljöer.</span><span class="sxs-lookup"><span data-stu-id="09ff4-166">Increasingly, organizations are moving their networks into hosted environments.</span></span> <span data-ttu-id="09ff4-167">Detta gör det enkelt att placera sina appar i en värdmiljö som ingår också i företagsnätverket, och fortfarande i domänen.</span><span class="sxs-lookup"><span data-stu-id="09ff4-167">This enables them to place their apps in a hosted environment that is also part of their corporate network, and still be within the domain.</span></span> <span data-ttu-id="09ff4-168">I det här fallet kan de mönster som beskrivs i föregående avsnitt tillämpas på den nya platsen för programmet.</span><span class="sxs-lookup"><span data-stu-id="09ff4-168">In this case, the patterns discussed in the preceding sections can be applied to the new application location.</span></span> <span data-ttu-id="09ff4-169">Om du funderar på det här alternativet, se [Azure AD Domain Services](../active-directory-domain-services/active-directory-ds-overview.md).</span><span class="sxs-lookup"><span data-stu-id="09ff4-169">If you're considering this option, see [Azure AD Domain Services](../active-directory-domain-services/active-directory-ds-overview.md).</span></span>

<span data-ttu-id="09ff4-170">Dessutom kan du överväga att ordna dina kopplingar med [connector grupper](active-directory-application-proxy-connectors.md) till mål-appar som finns i olika platser och nätverk.</span><span class="sxs-lookup"><span data-stu-id="09ff4-170">Additionally, consider organizing your connectors using [connector groups](active-directory-application-proxy-connectors.md) to target apps that are in different locations and networks.</span></span> 

## <a name="common-use-cases"></a><span data-ttu-id="09ff4-171">Vanliga användarsituationer</span><span class="sxs-lookup"><span data-stu-id="09ff4-171">Common use cases</span></span>

<span data-ttu-id="09ff4-172">I det här avsnittet går vi igenom några vanliga scenarier.</span><span class="sxs-lookup"><span data-stu-id="09ff4-172">In this section, we walk through a few common scenarios.</span></span> <span data-ttu-id="09ff4-173">Anta att den Azure AD-klient (och därför proxy tjänstslutpunkten) finns i USA (US).</span><span class="sxs-lookup"><span data-stu-id="09ff4-173">Assume that the Azure AD tenant (and therefore proxy service endpoint) is located in the United States (US).</span></span> <span data-ttu-id="09ff4-174">Överväganden som beskrivs i dessa fall gäller även för andra regioner över hela världen användning.</span><span class="sxs-lookup"><span data-stu-id="09ff4-174">The considerations discussed in these use cases also apply to other regions around the globe.</span></span>

<span data-ttu-id="09ff4-175">För dessa scenarier kan vi anropa ett ”hopp” för varje anslutning och antal dem lättare beskrivning</span><span class="sxs-lookup"><span data-stu-id="09ff4-175">For these scenarios, we call each connection a "hop" and number them for easier discussion:</span></span>

- <span data-ttu-id="09ff4-176">**Hopp 1**: användaren att tjänsten Application Proxy</span><span class="sxs-lookup"><span data-stu-id="09ff4-176">**Hop 1**: User to the Application Proxy service</span></span>
- <span data-ttu-id="09ff4-177">**Hopp 2**: Application Proxy-tjänsten till Application Proxy connector</span><span class="sxs-lookup"><span data-stu-id="09ff4-177">**Hop 2**: Application Proxy service to the Application Proxy connector</span></span>
- <span data-ttu-id="09ff4-178">**Hopp 3**: Application Proxy connector till målprogrammet</span><span class="sxs-lookup"><span data-stu-id="09ff4-178">**Hop 3**: Application Proxy connector to the target application</span></span> 

### <a name="use-case-1"></a><span data-ttu-id="09ff4-179">Användningsfall 1</span><span class="sxs-lookup"><span data-stu-id="09ff4-179">Use case 1</span></span>

<span data-ttu-id="09ff4-180">**Scenario:** appen är i en organisations nätverk i USA med användare i samma region.</span><span class="sxs-lookup"><span data-stu-id="09ff4-180">**Scenario:** The app is in an organization's network in the US, with users in the same region.</span></span> <span data-ttu-id="09ff4-181">Inga ExpressRoute eller VPN finns mellan Azure-datacentret och företagets nätverk.</span><span class="sxs-lookup"><span data-stu-id="09ff4-181">No ExpressRoute or VPN exists between the Azure datacenter and the corporate network.</span></span>

<span data-ttu-id="09ff4-182">**Rekommendation:** följer mönstret 1, som beskrivs i föregående avsnitt.</span><span class="sxs-lookup"><span data-stu-id="09ff4-182">**Recommendation:** Follow pattern 1, explained in the previous section.</span></span> <span data-ttu-id="09ff4-183">Överväg att använda ExpressRoute för bättre svarstid, om det behövs.</span><span class="sxs-lookup"><span data-stu-id="09ff4-183">For improved latency, consider using ExpressRoute, if needed.</span></span>

<span data-ttu-id="09ff4-184">Det här är ett enkelt mönster.</span><span class="sxs-lookup"><span data-stu-id="09ff4-184">This is a simple pattern.</span></span> <span data-ttu-id="09ff4-185">Du kan optimera hopp 3 genom att placera kopplingen nära appen.</span><span class="sxs-lookup"><span data-stu-id="09ff4-185">You optimize hop 3 by placing the connector near the app.</span></span> <span data-ttu-id="09ff4-186">Detta är också en naturlig valet eftersom anslutningen installeras normalt med fri till appen och till att utföra åtgärder för KCD-datacenter.</span><span class="sxs-lookup"><span data-stu-id="09ff4-186">This is also a natural choice, because the connector typically is installed with line of sight to the app and to the datacenter to perform KCD operations.</span></span>

![Diagram över användare, proxy, koppling och app finns i USA](./media/application-proxy-network-topologies/application-proxy-pattern1.png)

### <a name="use-case-2"></a><span data-ttu-id="09ff4-188">Användningsfall 2</span><span class="sxs-lookup"><span data-stu-id="09ff4-188">Use case 2</span></span>

<span data-ttu-id="09ff4-189">**Scenario:** appen är i en organisations nätverk i USA med användare som spridda globalt.</span><span class="sxs-lookup"><span data-stu-id="09ff4-189">**Scenario:** The app is in an organization's network in the US, with users spread out globally.</span></span> <span data-ttu-id="09ff4-190">Inga ExpressRoute eller VPN finns mellan Azure-datacentret och företagets nätverk.</span><span class="sxs-lookup"><span data-stu-id="09ff4-190">No ExpressRoute or VPN exists between the Azure datacenter and the corporate network.</span></span>

<span data-ttu-id="09ff4-191">**Rekommendation:** följer mönstret 1, som beskrivs i föregående avsnitt.</span><span class="sxs-lookup"><span data-stu-id="09ff4-191">**Recommendation:** Follow pattern 1, explained in the previous section.</span></span> 

<span data-ttu-id="09ff4-192">Igen är det vanliga mönstret att optimera hopp 3, placerar du kopplingen nära appen.</span><span class="sxs-lookup"><span data-stu-id="09ff4-192">Again, the common pattern is to optimize hop 3, where you place the connector near the app.</span></span> <span data-ttu-id="09ff4-193">Hopp 3 är inte vanligtvis dyrbara, om det är allt i samma region.</span><span class="sxs-lookup"><span data-stu-id="09ff4-193">Hop 3 is not typically expensive, if it is all within the same region.</span></span> <span data-ttu-id="09ff4-194">Hopp 1 kan dock vara dyrare beroende på var användaren finns, eftersom användare över hela världen måste ha åtkomst till Application Proxy-instans i USA.</span><span class="sxs-lookup"><span data-stu-id="09ff4-194">However, hop 1 can be more expensive depending on where the user is, because users across the world must access the Application Proxy instance in the US.</span></span> <span data-ttu-id="09ff4-195">Det är värt att nämna att en proxy-lösning har liknande egenskaper för användare att sprida ut globalt.</span><span class="sxs-lookup"><span data-stu-id="09ff4-195">It's worth noting that any proxy solution has similar characteristics regarding users being spread out globally.</span></span>

![Diagram som visar som användare sprids globalt, men proxy-, anslutnings- och app finns i USA](./media/application-proxy-network-topologies/application-proxy-pattern2.png)

### <a name="use-case-3"></a><span data-ttu-id="09ff4-197">Användningsfall 3</span><span class="sxs-lookup"><span data-stu-id="09ff4-197">Use case 3</span></span>

<span data-ttu-id="09ff4-198">**Scenario:** appen är i en organisations nätverk i USA.</span><span class="sxs-lookup"><span data-stu-id="09ff4-198">**Scenario:** The app is in an organization's network in the US.</span></span> <span data-ttu-id="09ff4-199">ExpressRoute med offentlig peering finns mellan Azure och företagets nätverk.</span><span class="sxs-lookup"><span data-stu-id="09ff4-199">ExpressRoute with public peering exists between Azure and the corporate network.</span></span>

<span data-ttu-id="09ff4-200">**Rekommendation:** följer mönster 1 och 2, som beskrivs i föregående avsnitt.</span><span class="sxs-lookup"><span data-stu-id="09ff4-200">**Recommendation:** Follow patterns 1 and 2, explained in the previous section.</span></span>

<span data-ttu-id="09ff4-201">Placera först anslutaren så nära som möjligt till appen.</span><span class="sxs-lookup"><span data-stu-id="09ff4-201">First, place the connector as close as possible to the app.</span></span> <span data-ttu-id="09ff4-202">Systemet använder sedan automatiskt ExpressRoute för hopp 2.</span><span class="sxs-lookup"><span data-stu-id="09ff4-202">Then, the system automatically uses ExpressRoute for hop 2.</span></span> 

<span data-ttu-id="09ff4-203">Om länken ExpressRoute använder offentlig peering, överlappar trafiken mellan proxyservern och connector länken.</span><span class="sxs-lookup"><span data-stu-id="09ff4-203">If the ExpressRoute link is using public peering, the traffic between the proxy and the connector flows over that link.</span></span> <span data-ttu-id="09ff4-204">Hopp 2 har optimerats svarstid.</span><span class="sxs-lookup"><span data-stu-id="09ff4-204">Hop 2 has optimized latency.</span></span>

![Diagram över ExpressRoute mellan proxyservern och connector](./media/application-proxy-network-topologies/application-proxy-pattern3.png)

### <a name="use-case-4"></a><span data-ttu-id="09ff4-206">Användningsfall 4</span><span class="sxs-lookup"><span data-stu-id="09ff4-206">Use case 4</span></span>

<span data-ttu-id="09ff4-207">**Scenario:** appen är i en organisations nätverk i USA.</span><span class="sxs-lookup"><span data-stu-id="09ff4-207">**Scenario:** The app is in an organization's network in the US.</span></span> <span data-ttu-id="09ff4-208">ExpressRoute med privat peering finns mellan Azure och företagets nätverk.</span><span class="sxs-lookup"><span data-stu-id="09ff4-208">ExpressRoute with private peering exists between Azure and the corporate network.</span></span>

<span data-ttu-id="09ff4-209">**Rekommendation:** följer mönstret 3, som beskrivs i föregående avsnitt.</span><span class="sxs-lookup"><span data-stu-id="09ff4-209">**Recommendation:** Follow pattern 3, explained in the previous section.</span></span>

<span data-ttu-id="09ff4-210">Placera kopplingen i Azure-datacentret som är ansluten till företagsnätverket via privata ExpressRoute-peering.</span><span class="sxs-lookup"><span data-stu-id="09ff4-210">Place the connector in the Azure datacenter that is connected to the corporate network through ExpressRoute private peering.</span></span> 

<span data-ttu-id="09ff4-211">Kopplingen kan placeras i Azure-datacenter.</span><span class="sxs-lookup"><span data-stu-id="09ff4-211">The connector can be placed in the Azure datacenter.</span></span> <span data-ttu-id="09ff4-212">Eftersom anslutningen har ändå en fri programmet och datacenter via det privata nätverket, förblir hopp 3 optimerad.</span><span class="sxs-lookup"><span data-stu-id="09ff4-212">Since the connector still has a line of sight to the application and the datacenter through the private network, hop 3 remains optimized.</span></span> <span data-ttu-id="09ff4-213">Dessutom kan optimeras hopp 2 ytterligare.</span><span class="sxs-lookup"><span data-stu-id="09ff4-213">In addition, hop 2 is optimized further.</span></span>

![Diagram över kopplingen i ett Azure-datacenter och ExpressRoute mellan koppling och appen](./media/application-proxy-network-topologies/application-proxy-pattern4.png)

### <a name="use-case-5"></a><span data-ttu-id="09ff4-215">Användningsfall 5</span><span class="sxs-lookup"><span data-stu-id="09ff4-215">Use case 5</span></span>

<span data-ttu-id="09ff4-216">**Scenario:** appen är i en organisations nätverk i Europa med Application Proxy-instans och de flesta användare i USA.</span><span class="sxs-lookup"><span data-stu-id="09ff4-216">**Scenario:** The app is in an organization's network in the EU, with the Application Proxy instance and most users in the US.</span></span>

<span data-ttu-id="09ff4-217">**Rekommendation:** placera kopplingen nära appen.</span><span class="sxs-lookup"><span data-stu-id="09ff4-217">**Recommendation:** Place the connector near the app.</span></span> <span data-ttu-id="09ff4-218">Eftersom USA användarna kommer åt en Application Proxy-instans som befinner sig i samma region, är hopp 1 inte för dyr.</span><span class="sxs-lookup"><span data-stu-id="09ff4-218">Because US users are accessing an Application Proxy instance that happens to be in the same region, hop 1 is not too expensive.</span></span> <span data-ttu-id="09ff4-219">Hopp 3 är optimerad.</span><span class="sxs-lookup"><span data-stu-id="09ff4-219">Hop 3 is optimized.</span></span> <span data-ttu-id="09ff4-220">Överväg att använda ExpressRoute för att optimera hopp 2.</span><span class="sxs-lookup"><span data-stu-id="09ff4-220">Consider using ExpressRoute to optimize hop 2.</span></span> 

![Diagram över användare och proxy i USA med kopplingen och appen i EU](./media/application-proxy-network-topologies/application-proxy-pattern5b.png)

<span data-ttu-id="09ff4-222">Du kan också använda en variant i den här situationen.</span><span class="sxs-lookup"><span data-stu-id="09ff4-222">You can also consider using one other variant in this situation.</span></span> <span data-ttu-id="09ff4-223">Om de flesta användare i organisationen finns i USA, så risken som utökar ditt nätverk till USA samt.</span><span class="sxs-lookup"><span data-stu-id="09ff4-223">If most users in the organization are in the US, then chances are that your network extends to the US as well.</span></span> <span data-ttu-id="09ff4-224">Placera kopplingen i USA och använda dedicerade interna företagsnätverket raden till programmet i EU.</span><span class="sxs-lookup"><span data-stu-id="09ff4-224">Place the connector in the US, and use the dedicated internal corporate network line to the application in the EU.</span></span> <span data-ttu-id="09ff4-225">Det här sättet hopp 2 och 3 är optimerad.</span><span class="sxs-lookup"><span data-stu-id="09ff4-225">This way hops 2 and 3 are optimized.</span></span>

![Diagram över användare och proxy connector i USA-app i EU](./media/application-proxy-network-topologies/application-proxy-pattern5c.png)

## <a name="next-steps"></a><span data-ttu-id="09ff4-227">Nästa steg</span><span class="sxs-lookup"><span data-stu-id="09ff4-227">Next steps</span></span>

- [<span data-ttu-id="09ff4-228">Aktivera Application Proxy</span><span class="sxs-lookup"><span data-stu-id="09ff4-228">Enable Application Proxy</span></span>](active-directory-application-proxy-enable.md)
- [<span data-ttu-id="09ff4-229">Aktivera enkel inloggning</span><span class="sxs-lookup"><span data-stu-id="09ff4-229">Enable single-sign on</span></span>](active-directory-application-proxy-sso-using-kcd.md)
- [<span data-ttu-id="09ff4-230">Aktivera villkorlig åtkomst</span><span class="sxs-lookup"><span data-stu-id="09ff4-230">Enable conditional access</span></span>](active-directory-application-proxy-conditional-access.md)
- [<span data-ttu-id="09ff4-231">Felsökning av problem med Application Proxy</span><span class="sxs-lookup"><span data-stu-id="09ff4-231">Troubleshoot issues you're having with Application Proxy</span></span>](active-directory-application-proxy-troubleshoot.md)

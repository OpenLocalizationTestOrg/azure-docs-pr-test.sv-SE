---
title: "Hantera åtkomst till molnappar genom att begränsa klienter – Azure | Microsoft Docs"
description: "Hur du använder klient begränsningar för att hantera vilka användare kan öppna programmen baserat på sina Azure AD-klient."
services: active-directory
documentationcenter: 
author: kgremban
manager: femila
editor: yossib
ms.assetid: 
ms.service: active-directory
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 05/10/2017
ms.author: kgremban
ms.openlocfilehash: 7288f8fa173f8018570cd17aa7274f56a4eead41
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: sv-SE
ms.lasthandoff: 07/11/2017
---
# <a name="use-tenant-restrictions-to-manage-access-to-saas-cloud-applications"></a><span data-ttu-id="02e08-103">Använd klient begränsningar för att hantera åtkomst till SaaS molnprogram</span><span class="sxs-lookup"><span data-stu-id="02e08-103">Use Tenant Restrictions to manage access to SaaS cloud applications</span></span>

<span data-ttu-id="02e08-104">Stora organisationer som betona säkerhet vill flytta till molntjänster som Office 365, men behöver veta för att användarna bara kan komma åt resurser som är godkända.</span><span class="sxs-lookup"><span data-stu-id="02e08-104">Large organizations that emphasize security want to move to cloud services like Office 365, but need to know that their users only can access approved resources.</span></span> <span data-ttu-id="02e08-105">Företag begränsa traditionellt domännamn eller IP-adresser när de vill hantera åtkomst.</span><span class="sxs-lookup"><span data-stu-id="02e08-105">Traditionally, companies restrict domain names or IP addresses when they want to manage access.</span></span> <span data-ttu-id="02e08-106">Den här metoden misslyckas i en värld där SaaS-appar finns i ett offentligt moln som körs på delade domännamn som outlook.office.com och login.microsoftonline.com.</span><span class="sxs-lookup"><span data-stu-id="02e08-106">This approach fails in a world where SaaS apps are hosted in a public cloud, running on shared domain names like outlook.office.com and login.microsoftonline.com.</span></span> <span data-ttu-id="02e08-107">Blockerar adresserna skulle förhindra att användare ansluter till Outlook på webben helt, i stället för bara begränsa dem till godkända identiteter och resurser.</span><span class="sxs-lookup"><span data-stu-id="02e08-107">Blocking these addresses would keep users from accessing Outlook on the web entirely, instead of merely restricting them to approved identities and resources.</span></span>

<span data-ttu-id="02e08-108">Azure Active Directory-lösningen på denna utmaning är en funktion som kallas klient begränsningar.</span><span class="sxs-lookup"><span data-stu-id="02e08-108">Azure Active Directory's solution to this challenge is a feature called Tenant Restrictions.</span></span> <span data-ttu-id="02e08-109">Klient begränsningar kan organisationer att kontrollera åtkomst till SaaS-molnprogram, baserat på Azure AD-klient som programmen använder för enkel inloggning.</span><span class="sxs-lookup"><span data-stu-id="02e08-109">Tenant Restrictions enables organizations to control access to SaaS cloud applications, based on the Azure AD tenant the applications use for single sign-on.</span></span> <span data-ttu-id="02e08-110">Du kanske vill tillåta åtkomst till din organisations Office 365-program, samtidigt som du förhindrar åtkomst till andra organisationer instanser av samma programmen.</span><span class="sxs-lookup"><span data-stu-id="02e08-110">For example, you may want to allow access to your organization’s Office 365 applications, while preventing access to other organizations’ instances of these same applications.</span></span>  

<span data-ttu-id="02e08-111">Klient begränsningar ger organisationer möjlighet att ange en lista över klienter som användarna beviljas åtkomst till.</span><span class="sxs-lookup"><span data-stu-id="02e08-111">Tenant Restrictions gives organizations the ability to specify the list of tenants that their users are permitted to access.</span></span> <span data-ttu-id="02e08-112">Azure AD sedan ger endast åtkomst till dessa tillåtna klienter.</span><span class="sxs-lookup"><span data-stu-id="02e08-112">Azure AD then only grants access to these permitted tenants.</span></span>

<span data-ttu-id="02e08-113">Den här artikeln fokuserar på klient begränsningar för Office 365, men funktionen ska fungera med alla SaaS-molnappar som använder modern autentiseringsprotokoll med Azure AD för enkel inloggning.</span><span class="sxs-lookup"><span data-stu-id="02e08-113">This article focuses on Tenant Restrictions for Office 365, but the feature should work with any SaaS cloud app that uses modern authentication protocols with Azure AD for single sign-on.</span></span> <span data-ttu-id="02e08-114">Om du använder SaaS-appar med en annan Azure AD-klient från klienten som används av Office 365, se till att alla nödvändiga klienter tillåts.</span><span class="sxs-lookup"><span data-stu-id="02e08-114">If you use SaaS apps with a different Azure AD tenant from the tenant used by Office 365, make sure that all required tenants are permitted.</span></span> <span data-ttu-id="02e08-115">Mer information om SaaS molnappar finns i [Active Directory Marketplace](https://azure.microsoft.com/en-us/marketplace/active-directory/).</span><span class="sxs-lookup"><span data-stu-id="02e08-115">For more information about SaaS cloud apps, see the [Active Directory Marketplace](https://azure.microsoft.com/en-us/marketplace/active-directory/).</span></span>

## <a name="how-it-works"></a><span data-ttu-id="02e08-116">Hur det fungerar</span><span class="sxs-lookup"><span data-stu-id="02e08-116">How it works</span></span>

<span data-ttu-id="02e08-117">Virtualiseringslösningen består av följande komponenter:</span><span class="sxs-lookup"><span data-stu-id="02e08-117">The overall solution comprises the following components:</span></span> 

1. <span data-ttu-id="02e08-118">**Azure AD** – om den `Restrict-Access-To-Tenants: <permitted tenant list>` är finns, Azure AD endast problem säkerhetstoken för tillåtna klienter.</span><span class="sxs-lookup"><span data-stu-id="02e08-118">**Azure AD** – If the `Restrict-Access-To-Tenants: <permitted tenant list>` is present, Azure AD only issues security tokens for the permitted tenants.</span></span> 

2. <span data-ttu-id="02e08-119">**Lokal infrastruktur för server** – en proxy-enhet kan SSL-kontroll som konfigurerats för att infoga huvudet som innehåller listan över tillåtna hyresgäster i trafiken till Azure AD.</span><span class="sxs-lookup"><span data-stu-id="02e08-119">**On-premises proxy server infrastructure** – a proxy device capable of SSL inspection, configured to insert the header containing the list of permitted tenants into traffic destined for Azure AD.</span></span> 

3. <span data-ttu-id="02e08-120">**Klientprogrammet** – för att stödja klienten begränsningar klientprogrammet måste begära token direkt från Azure AD så att trafik kan avlyssnas av proxy-infrastruktur.</span><span class="sxs-lookup"><span data-stu-id="02e08-120">**Client software** – to support Tenant Restrictions, client software must request tokens directly from Azure AD, so that traffic can be intercepted by the proxy infrastructure.</span></span> <span data-ttu-id="02e08-121">Begränsningar för klienten stöds för närvarande genom webbläsarbaserad Office 365-program och Office-klienter när du använder modern autentisering (till exempel OAuth 2.0).</span><span class="sxs-lookup"><span data-stu-id="02e08-121">Tenant Restrictions is currently supported by browser-based Office 365 applications and by Office clients when modern authentication (like OAuth 2.0) is used.</span></span> 

4. <span data-ttu-id="02e08-122">**Modern autentisering** – molntjänster måste använda modern autentisering för att använda begränsningar för klient och blockera åtkomst till alla klienter som inte tillåts.</span><span class="sxs-lookup"><span data-stu-id="02e08-122">**Modern Authentication** – cloud services must use modern authentication to use Tenant Restrictions and block access to all non-permitted tenants.</span></span> <span data-ttu-id="02e08-123">Office 365 molntjänster måste konfigureras för att använda protokoll för modern autentisering som standard.</span><span class="sxs-lookup"><span data-stu-id="02e08-123">Office 365 cloud services must be configured to use modern authentication protocols by default.</span></span> <span data-ttu-id="02e08-124">Den senaste informationen på Office 365-stöd för modern autentisering kan läsa [uppdateras Office 365 modern autentisering](https://blogs.office.com/2015/11/19/updated-office-365-modern-authentication-public-preview/).</span><span class="sxs-lookup"><span data-stu-id="02e08-124">For the latest information on Office 365 support for modern authentication, read [Updated Office 365 modern authentication](https://blogs.office.com/2015/11/19/updated-office-365-modern-authentication-public-preview/).</span></span>

<span data-ttu-id="02e08-125">Följande diagram illustrerar övergripande trafikflöde.</span><span class="sxs-lookup"><span data-stu-id="02e08-125">The following diagram illustrates the high-level traffic flow.</span></span> <span data-ttu-id="02e08-126">SSL-kontroll krävs bara på trafik till Azure AD, inte till Office 365-molntjänster.</span><span class="sxs-lookup"><span data-stu-id="02e08-126">SSL inspection is only required on traffic to Azure AD, not to the Office 365 cloud services.</span></span> <span data-ttu-id="02e08-127">Skillnaden är viktig eftersom trafikvolym för autentisering till Azure AD är vanligtvis mycket lägre än trafikvolym för SaaS-program som Exchange Online och SharePoint Online.</span><span class="sxs-lookup"><span data-stu-id="02e08-127">This distinction is important because the traffic volume for authentication to Azure AD is typically much lower than traffic volume to SaaS applications like Exchange Online and SharePoint Online.</span></span>

![Klient begränsningar trafikflöde – diagram](./media/active-directory-tenant-restrictions/traffic-flow.png)

## <a name="set-up-tenant-restrictions"></a><span data-ttu-id="02e08-129">Konfigurera begränsningar för klient</span><span class="sxs-lookup"><span data-stu-id="02e08-129">Set up Tenant Restrictions</span></span>

<span data-ttu-id="02e08-130">Det finns två steg för att komma igång med klient-begränsningar.</span><span class="sxs-lookup"><span data-stu-id="02e08-130">There are two steps to get started with Tenant Restrictions.</span></span> <span data-ttu-id="02e08-131">Det första steget är att se till att klienterna kan ansluta till rätt adresser.</span><span class="sxs-lookup"><span data-stu-id="02e08-131">The first step is to make sure that your clients can connect to the right addresses.</span></span> <span data-ttu-id="02e08-132">Andra är att konfigurera din infrastruktur.</span><span class="sxs-lookup"><span data-stu-id="02e08-132">The second is to configure your proxy infrastructure.</span></span>

### <a name="urls-and-ip-addresses"></a><span data-ttu-id="02e08-133">URL: er och IP-adresser</span><span class="sxs-lookup"><span data-stu-id="02e08-133">URLs and IP addresses</span></span>

<span data-ttu-id="02e08-134">Om du vill använda klient begränsningar klienterna måste vara kan ansluta till följande webbadresser med Azure AD autentisera: login.microsoftonline.com, login.microsoft.com och login.windows.net.</span><span class="sxs-lookup"><span data-stu-id="02e08-134">To use Tenant Restrictions, your clients must be able to connect to the following Azure AD URLs to authenticate: login.microsoftonline.com, login.microsoft.com, and login.windows.net.</span></span> <span data-ttu-id="02e08-135">Dessutom att få åtkomst till Office 365 klienterna måste också kunna ansluta till FQDN/URL-adresser och IP-adresser som definierats i [Office 365-URL: er och IP-adressintervall](https://support.office.com/article/Office-365-URLs-and-IP-address-ranges-8548a211-3fe7-47cb-abb1-355ea5aa88a2).</span><span class="sxs-lookup"><span data-stu-id="02e08-135">Additionally, to access Office 365, your clients must also be able to connect to the FQDNs/URLs and IP addresses defined in [Office 365 URLs and IP address ranges](https://support.office.com/article/Office-365-URLs-and-IP-address-ranges-8548a211-3fe7-47cb-abb1-355ea5aa88a2).</span></span> 

### <a name="proxy-configuration-and-requirements"></a><span data-ttu-id="02e08-136">Proxykonfigurationen och krav</span><span class="sxs-lookup"><span data-stu-id="02e08-136">Proxy configuration and requirements</span></span>

<span data-ttu-id="02e08-137">Följande konfiguration krävs för att aktivera begränsningar för klient via proxy-infrastruktur.</span><span class="sxs-lookup"><span data-stu-id="02e08-137">The following configuration is required to enable Tenant Restrictions through your proxy infrastructure.</span></span> <span data-ttu-id="02e08-138">Den här vägledningen är generisk, så du bör se proxy leverantörens dokumentation för specifika stegen.</span><span class="sxs-lookup"><span data-stu-id="02e08-138">This guidance is generic, so you should refer to your proxy vendor’s documentation for specific implementation steps.</span></span>

#### <a name="prerequisites"></a><span data-ttu-id="02e08-139">Krav</span><span class="sxs-lookup"><span data-stu-id="02e08-139">Prerequisites</span></span>

- <span data-ttu-id="02e08-140">Proxyservern måste kunna utföra SSL avlyssning, HTTP-huvudet infogning och filtrera mål med hjälp av FQDN/URL: er.</span><span class="sxs-lookup"><span data-stu-id="02e08-140">The proxy must be able to perform SSL interception, HTTP header insertion, and filter destinations using FQDNs/URLs.</span></span> 

- <span data-ttu-id="02e08-141">Klienter måste lita certifikatkedjan presenteras av proxyn för SSL-kommunikation.</span><span class="sxs-lookup"><span data-stu-id="02e08-141">Clients must trust the certificate chain presented by the proxy for SSL communications.</span></span> <span data-ttu-id="02e08-142">Till exempel om certifikat från en intern PKI används måste de interna utfärdande certifikat certifikatet för rotutfärdare vara betrodda.</span><span class="sxs-lookup"><span data-stu-id="02e08-142">For example, if certificates from an internal PKI are used, the internal issuing root certificate authority certificate must be trusted.</span></span>

- <span data-ttu-id="02e08-143">Den här funktionen ingår i Office 365-prenumerationer, men om du vill använda klient begränsningar för att styra åtkomst till andra SaaS-appar sedan Azure AD Premium 1 licenser krävs.</span><span class="sxs-lookup"><span data-stu-id="02e08-143">This feature is included in Office 365 subscriptions, but if you want to use Tenant Restrictions to control access to other SaaS apps then Azure AD Premium 1 licenses are required.</span></span>

#### <a name="configuration"></a><span data-ttu-id="02e08-144">Konfiguration</span><span class="sxs-lookup"><span data-stu-id="02e08-144">Configuration</span></span>

<span data-ttu-id="02e08-145">Infoga två HTTP-huvuden för varje inkommande begäran att login.microsoftonline.com och login.microsoft.com login.windows.net: *begränsa åtkomst till klienter* och *begränsa åtkomst kontext*.</span><span class="sxs-lookup"><span data-stu-id="02e08-145">For each incoming request to login.microsoftonline.com, login.microsoft.com, and login.windows.net, insert two HTTP headers: *Restrict-Access-To-Tenants* and *Restrict-Access-Context*.</span></span>

<span data-ttu-id="02e08-146">Sidhuvuden bör innehålla följande element:</span><span class="sxs-lookup"><span data-stu-id="02e08-146">The headers should include the following elements:</span></span> 
- <span data-ttu-id="02e08-147">För *begränsa åtkomst till klienter*, värdet \<tillåts klienten listan\>, vilket är en kommaavgränsad lista över klienter som du vill ge användare åtkomst till.</span><span class="sxs-lookup"><span data-stu-id="02e08-147">For *Restrict-Access-To-Tenants*, a value of \<permitted tenant list\>, which is a comma-separated list of tenants you want to allow users to access.</span></span> <span data-ttu-id="02e08-148">Alla domäner som har registrerats med en klient kan användas för att identifiera klienten i den här listan.</span><span class="sxs-lookup"><span data-stu-id="02e08-148">Any domain that is registered with a tenant can be used to identify the tenant in this list.</span></span> <span data-ttu-id="02e08-149">Till exempel om du vill tillåta åtkomst till både Contoso och Fabrikam hyresgäster namn/värde-par ser ut som:`Restrict-Access-To-Tenants: contoso.onmicrosoft.com,fabrikam.onmicrosoft.com`</span><span class="sxs-lookup"><span data-stu-id="02e08-149">For example, to permit access to both Contoso and Fabrikam tenants, the name/value pair looks like:  `Restrict-Access-To-Tenants: contoso.onmicrosoft.com,fabrikam.onmicrosoft.com`</span></span> 
- <span data-ttu-id="02e08-150">För *begränsa åtkomst kontext*, ett värde av en enskild katalog-ID, deklarerar vilken är att lägga till begränsningar för innehavare.</span><span class="sxs-lookup"><span data-stu-id="02e08-150">For *Restrict-Access-Context*, a value of a single directory ID, declaring which tenant is setting the Tenant Restrictions.</span></span> <span data-ttu-id="02e08-151">Till exempel för att deklarera Contoso som klienten som anger klient begränsningar principen namn/värde-par ser ut som:`Restrict-Access-Context: 456ff232-35l2-5h23-b3b3-3236w0826f3d`</span><span class="sxs-lookup"><span data-stu-id="02e08-151">For example, to declare Contoso as the tenant that set the Tenant Restrictions policy, the name/value pair looks like: `Restrict-Access-Context: 456ff232-35l2-5h23-b3b3-3236w0826f3d`</span></span>  

> [!TIP]
> <span data-ttu-id="02e08-152">Du kan hitta din katalog-ID i den [Azure-portalen](https://portal.azure.com).</span><span class="sxs-lookup"><span data-stu-id="02e08-152">You can find your directory ID in the [Azure portal](https://portal.azure.com).</span></span> <span data-ttu-id="02e08-153">Logga in som administratör, Välj **Azure Active Directory**och välj **egenskaper**.</span><span class="sxs-lookup"><span data-stu-id="02e08-153">Sign in as an administrator, select **Azure Active Directory**, then select **Properties**.</span></span>

<span data-ttu-id="02e08-154">Om du vill hindra användare från att lägga till egna HTTP-huvud med icke-godkända klienter, behöver proxyn ersätta rubriken Begränsa åtkomst till klienter om det finns redan i den inkommande begäranden.</span><span class="sxs-lookup"><span data-stu-id="02e08-154">To prevent users from inserting their own HTTP header with non-approved tenants, the proxy needs to replace the Restrict-Access-To-Tenants header if it is already present in the incoming request.</span></span> 

<span data-ttu-id="02e08-155">Klienter måste tvingas att använda proxy för alla förfrågningar till login.microsoftonline.com och login.microsoft.com login.windows.net.</span><span class="sxs-lookup"><span data-stu-id="02e08-155">Clients must be forced to use the proxy for all requests to login.microsoftonline.com, login.microsoft.com, and login.windows.net.</span></span> <span data-ttu-id="02e08-156">Till exempel om PAC-filer används för att dirigera klienterna att använda proxy, får slutanvändare inte vara att redigera eller inaktivera PAC-filer.</span><span class="sxs-lookup"><span data-stu-id="02e08-156">For example, if PAC files are used to direct clients to use the proxy, end users should not be able to edit or disable the PAC files.</span></span>

## <a name="the-user-experience"></a><span data-ttu-id="02e08-157">Användarens upplevelse</span><span class="sxs-lookup"><span data-stu-id="02e08-157">The user experience</span></span>

<span data-ttu-id="02e08-158">Detta avsnitt visar upplevelsen för både användare och administratörer.</span><span class="sxs-lookup"><span data-stu-id="02e08-158">This section shows the experience for both end users and admins.</span></span>

### <a name="end-user-experience"></a><span data-ttu-id="02e08-159">Slutanvändarens upplevelse</span><span class="sxs-lookup"><span data-stu-id="02e08-159">End-user experience</span></span>

<span data-ttu-id="02e08-160">Ett exempel på användare i Contoso-nätverket, men försöker komma åt ett delat SaaS-program som Outlook online Fabrikam-instansen.</span><span class="sxs-lookup"><span data-stu-id="02e08-160">An example user is on the Contoso network, but is trying to access the Fabrikam instance of a shared SaaS application like Outlook online.</span></span> <span data-ttu-id="02e08-161">Om Contoso är en klient som inte tillåts för instansen, ser användaren följande sida:</span><span class="sxs-lookup"><span data-stu-id="02e08-161">If Contoso is a non-permitted tenant for that instance, the user sees the following page:</span></span>

![Åtkomst nekades för användare i ej tillåten klienter](./media/active-directory-tenant-restrictions/end-user-denied.png)

### <a name="admin-experience"></a><span data-ttu-id="02e08-163">Administratörsupplevelse</span><span class="sxs-lookup"><span data-stu-id="02e08-163">Admin experience</span></span>

<span data-ttu-id="02e08-164">När konfigurationen av klient begränsningar görs på företagets proxy-infrastruktur, Administratörer kan komma åt rapporterna klient begränsningar i Azure portal direkt.</span><span class="sxs-lookup"><span data-stu-id="02e08-164">While configuration of Tenant Restrictions is done on the corporate proxy infrastructure, admins can access the Tenant Restrictions reports in the Azure portal directly.</span></span> <span data-ttu-id="02e08-165">Gå till sidan översikt av Azure Active Directory för att visa rapporter, och sedan tittar du under andra funktioner.</span><span class="sxs-lookup"><span data-stu-id="02e08-165">To view the reports, go to the Azure Active Directory Overview page, then look under ‘Other capabilities’.</span></span>

<span data-ttu-id="02e08-166">Administratör för klienten som angetts som begränsad åtkomst kontext klienten kan använda den här rapporten för att se alla inloggningar blockerats på grund av begränsningar för klient-princip, inklusive den identitet som används och målkatalogen-ID.</span><span class="sxs-lookup"><span data-stu-id="02e08-166">The admin for the tenant specified as the Restricted-Access-Context tenant can use this report to see all sign-ins blocked because of the Tenant Restrictions policy, including the identity used and the target directory ID.</span></span>

![Använda Azure portal för att visa begränsade inloggningsförsök](./media/active-directory-tenant-restrictions/portal-report.png)

<span data-ttu-id="02e08-168">Du kan använda filter som andra rapporter i Azure-portalen för att ange omfånget för rapporten.</span><span class="sxs-lookup"><span data-stu-id="02e08-168">Like other reports in the Azure portal, you can use filters to specify the scope of your report.</span></span> <span data-ttu-id="02e08-169">Du kan filtrera efter en viss användare, program, klienter eller tidsintervall.</span><span class="sxs-lookup"><span data-stu-id="02e08-169">You can filter on a specific user, application, client, or time interval.</span></span>

## <a name="office-365-support"></a><span data-ttu-id="02e08-170">Stöd för Office 365</span><span class="sxs-lookup"><span data-stu-id="02e08-170">Office 365 support</span></span>

<span data-ttu-id="02e08-171">Office 365-program måste uppfylla två kriterier för att fullständigt stöd för klient begränsningar:</span><span class="sxs-lookup"><span data-stu-id="02e08-171">Office 365 applications must meet two criteria to fully support Tenant Restrictions:</span></span>

1. <span data-ttu-id="02e08-172">Klienten använde stöder modern autentisering</span><span class="sxs-lookup"><span data-stu-id="02e08-172">The client used supports modern authentication</span></span>
2. <span data-ttu-id="02e08-173">Modern autentisering är aktiverat som standardautentiseringsprotokoll för Molntjänsten.</span><span class="sxs-lookup"><span data-stu-id="02e08-173">Modern authentication is enabled as the default authentication protocol for the cloud service.</span></span>

<span data-ttu-id="02e08-174">Referera till [uppdateras Office 365 modern autentisering](https://blogs.office.com/2015/11/19/updated-office-365-modern-authentication-public-preview/) för den senaste informationen om vilka Office klienter för närvarande stöder modern autentisering.</span><span class="sxs-lookup"><span data-stu-id="02e08-174">Refer to [Updated Office 365 modern authentication](https://blogs.office.com/2015/11/19/updated-office-365-modern-authentication-public-preview/) for the latest information on which Office clients currently support modern authentication.</span></span> <span data-ttu-id="02e08-175">Sidan innehåller också länkar till instruktioner för att aktivera modern autentisering på specifika Exchange Online och Skype för företag – Online-innehavare.</span><span class="sxs-lookup"><span data-stu-id="02e08-175">That page also includes links to instructions for enabling modern authentication on specific Exchange Online and Skype for Business Online tenants.</span></span> <span data-ttu-id="02e08-176">Modern autentisering är redan aktiverat som standard i SharePoint Online.</span><span class="sxs-lookup"><span data-stu-id="02e08-176">Modern authentication is already enabled by default in SharePoint Online.</span></span>

<span data-ttu-id="02e08-177">Klient-begränsningar för närvarande stöds av Office 365-webbläsarbaserade program (Office-portalen Yammer, SharePoint-platser, Outlook Web osv.).</span><span class="sxs-lookup"><span data-stu-id="02e08-177">Tenant Restrictions is currently supported by Office 365 browser-based applications (the Office Portal, Yammer, SharePoint sites, Outlook on the Web, etc.).</span></span> <span data-ttu-id="02e08-178">För tjock klienter (Outlook, Skype för företag, Word, Excel, PowerPoint, etc.) Klient begränsningar kan bara tillämpas när modern autentisering används.</span><span class="sxs-lookup"><span data-stu-id="02e08-178">For thick clients (Outlook, Skype for Business, Word, Excel, PowerPoint, etc.) Tenant Restrictions can only be enforced when modern authentication is used.</span></span>  

<span data-ttu-id="02e08-179">Outlook och Skype för företag-klienter som stöder modern autentisering kan fortfarande använda äldre protokoll mot klienter där modern autentisering inte har aktiverats, effektivt kringgå klient begränsningar.</span><span class="sxs-lookup"><span data-stu-id="02e08-179">Outlook and Skype for Business clients that support modern authentication are still able to use legacy protocols against tenants where modern authentication is not enabled, effectively bypassing Tenant Restrictions.</span></span> <span data-ttu-id="02e08-180">För Outlook på Windows kan kunderna välja att implementera begränsningar som hindrar användare från att lägga till icke-godkända e-postkonto till deras profiler.</span><span class="sxs-lookup"><span data-stu-id="02e08-180">For Outlook on Windows, customers may choose to implement restrictions preventing end users from adding non-approved mail accounts to their profiles.</span></span> <span data-ttu-id="02e08-181">Se exempelvis den [förhindra att lägga till konton som inte är standard Exchange](http://gpsearch.azurewebsites.net/default.aspx?ref=1) grupprincipinställning.</span><span class="sxs-lookup"><span data-stu-id="02e08-181">For example, see the [Prevent adding non-default Exchange accounts](http://gpsearch.azurewebsites.net/default.aspx?ref=1) group policy setting.</span></span> <span data-ttu-id="02e08-182">Fullständigt stöd för klienten är inte tillgängliga för Outlook på Windows-plattformar och för Skype för företag på alla plattformar.</span><span class="sxs-lookup"><span data-stu-id="02e08-182">For Outlook on non-Windows platforms, and for Skype for Business on all platforms, full support for Tenant Restrictions is not currently available.</span></span>

## <a name="testing"></a><span data-ttu-id="02e08-183">Testning</span><span class="sxs-lookup"><span data-stu-id="02e08-183">Testing</span></span>

<span data-ttu-id="02e08-184">Om du vill testa klient begränsningar innan du implementerar för hela organisationen, det finns två alternativ: en värdbaserad metod med ett verktyg som Fiddler eller en stegvis distribution av proxy-inställningar.</span><span class="sxs-lookup"><span data-stu-id="02e08-184">If you want to try out Tenant Restrictions before implementing it for your whole organization, there are two options: a host-based approach using a tool like Fiddler, or a staged rollout of proxy settings.</span></span>

### <a name="fiddler-for-a-host-based-approach"></a><span data-ttu-id="02e08-185">Fiddler för en värdbaserad metod</span><span class="sxs-lookup"><span data-stu-id="02e08-185">Fiddler for a host-based approach</span></span>

<span data-ttu-id="02e08-186">Fiddler är en gratis webbplatser felsökning proxy som kan användas för att samla in och modifiera HTTP/HTTPS-trafik, inklusive lägga till HTTP-huvuden.</span><span class="sxs-lookup"><span data-stu-id="02e08-186">Fiddler is a free web debugging proxy that can be used to capture and modify HTTP/HTTPS traffic, including inserting HTTP headers.</span></span> <span data-ttu-id="02e08-187">Utför följande steg för att konfigurera Fiddler för att testa klienten begränsningar:</span><span class="sxs-lookup"><span data-stu-id="02e08-187">To configure Fiddler to test Tenant Restrictions, perform the following steps:</span></span>

1.  <span data-ttu-id="02e08-188">[Hämta och installera Fiddler](http://www.telerik.com/fiddler).</span><span class="sxs-lookup"><span data-stu-id="02e08-188">[Download and install Fiddler](http://www.telerik.com/fiddler).</span></span>
2.  <span data-ttu-id="02e08-189">Konfigurera Fiddler för att dekryptera HTTPS-trafik [Fiddlers hjälpdokumentationen](http://docs.telerik.com/fiddler/Configure-Fiddler/Tasks/DecryptHTTPS).</span><span class="sxs-lookup"><span data-stu-id="02e08-189">Configure Fiddler to decrypt HTTPS traffic, per [Fiddler’s help documentation](http://docs.telerik.com/fiddler/Configure-Fiddler/Tasks/DecryptHTTPS).</span></span>
3.  <span data-ttu-id="02e08-190">Konfigurera Fiddler att infoga den *begränsa åtkomst till klienter* och *begränsa åtkomst kontext* huvuden med hjälp av anpassade regler:</span><span class="sxs-lookup"><span data-stu-id="02e08-190">Configure Fiddler to insert the *Restrict-Access-To-Tenants* and *Restrict-Access-Context* headers using custom rules:</span></span>
  1. <span data-ttu-id="02e08-191">I verktyget Fiddler Web Debugger väljer du den **regler** -menyn och välj **anpassa regler...**</span><span class="sxs-lookup"><span data-stu-id="02e08-191">In the Fiddler Web Debugger tool, select the **Rules** menu and select **Customize Rules…**</span></span> <span data-ttu-id="02e08-192">att öppna filen CustomRules.</span><span class="sxs-lookup"><span data-stu-id="02e08-192">to open the CustomRules file.</span></span>
  2. <span data-ttu-id="02e08-193">Lägg till följande rader i början av den *OnBeforeRequest* funktion.</span><span class="sxs-lookup"><span data-stu-id="02e08-193">Add the following lines at the beginning of the *OnBeforeRequest* function.</span></span> <span data-ttu-id="02e08-194">Ersätt \<klientdomänen\> för en domän registrerats med din klient, till exempel contoso.onmicrosoft.com.</span><span class="sxs-lookup"><span data-stu-id="02e08-194">Replace \<tenant domain\> with a domain registered with your tenant, for example, contoso.onmicrosoft.com.</span></span> <span data-ttu-id="02e08-195">Ersätt \<katalog-ID\> med din klients Azure AD-GUID-identifierare.</span><span class="sxs-lookup"><span data-stu-id="02e08-195">Replace \<directory ID\> with your tenant's Azure AD GUID identifier.</span></span>

  ```
  if (oSession.HostnameIs("login.microsoftonline.com") || oSession.HostnameIs("login.microsoft.com") || oSession.HostnameIs("login.windows.net")){      oSession.oRequest["Restrict-Access-To-Tenants"] = "<tenant domain>";      oSession.oRequest["Restrict-Access-Context"] = "<directory ID>";}
  ```

  <span data-ttu-id="02e08-196">Om du vill tillåta flera klienter kan du använda ett kommatecken för att separera namn för innehavaren.</span><span class="sxs-lookup"><span data-stu-id="02e08-196">If you need to allow multiple tenants, use a comma to separate the tenant names.</span></span> <span data-ttu-id="02e08-197">Exempel:</span><span class="sxs-lookup"><span data-stu-id="02e08-197">For example:</span></span>

  ```
  oSession.oRequest["Restrict-Access-To-Tenants"] = "contoso.onmicrosoft.com,fabrikam.onmicrosoft.com";
  ```

4. <span data-ttu-id="02e08-198">Spara och stäng filen CustomRules.</span><span class="sxs-lookup"><span data-stu-id="02e08-198">Save and close the CustomRules file.</span></span>

<span data-ttu-id="02e08-199">När du har konfigurerat Fiddler kan du fånga in trafik genom att gå till den **filen** menyn och välja **fånga in trafik**.</span><span class="sxs-lookup"><span data-stu-id="02e08-199">After you configure Fiddler, you can capture traffic by going to the **File** menu and selecting **Capture Traffic**.</span></span>

### <a name="staged-rollout-of-proxy-settings"></a><span data-ttu-id="02e08-200">Stegvis distribution av proxy-inställningar</span><span class="sxs-lookup"><span data-stu-id="02e08-200">Staged rollout of proxy settings</span></span>

<span data-ttu-id="02e08-201">Beroende på din infrastruktur, kan du kunna mellanlagra driftsättningen av inställningar till användarna.</span><span class="sxs-lookup"><span data-stu-id="02e08-201">Depending on the capabilities of your proxy infrastructure, you may be able to stage the rollout of settings to your users.</span></span> <span data-ttu-id="02e08-202">Här följer några avancerade alternativ hänsyn till:</span><span class="sxs-lookup"><span data-stu-id="02e08-202">Here are a couple high-level options for consideration:</span></span>

1.  <span data-ttu-id="02e08-203">Använd PAC filer för att peka en proxy infrastruktur test testanvändare medan normal användare fortsätter att använda proxy produktionsinfrastruktur.</span><span class="sxs-lookup"><span data-stu-id="02e08-203">Use PAC files to point test users to a test proxy infrastructure, while normal users continue to use the production proxy infrastructure.</span></span>
2.  <span data-ttu-id="02e08-204">Vissa proxyservrar kanske stöder olika konfigurationer med hjälp av grupper.</span><span class="sxs-lookup"><span data-stu-id="02e08-204">Some proxy servers may support different configurations using groups.</span></span>

<span data-ttu-id="02e08-205">Referera till proxy server-dokumentationen för mer information.</span><span class="sxs-lookup"><span data-stu-id="02e08-205">Refer to your proxy server documentation for specific details.</span></span>

## <a name="next-steps"></a><span data-ttu-id="02e08-206">Nästa steg</span><span class="sxs-lookup"><span data-stu-id="02e08-206">Next steps</span></span>

- <span data-ttu-id="02e08-207">Läs mer om [uppdateras Office 365 modern autentisering](https://blogs.office.com/2015/11/19/updated-office-365-modern-authentication-public-preview/)</span><span class="sxs-lookup"><span data-stu-id="02e08-207">Read about [Updated Office 365 modern authentication](https://blogs.office.com/2015/11/19/updated-office-365-modern-authentication-public-preview/)</span></span>

- <span data-ttu-id="02e08-208">Granska de [Office 365-URL: er och IP-adressintervall](https://support.office.com/article/Office-365-URLs-and-IP-address-ranges-8548a211-3fe7-47cb-abb1-355ea5aa88a2)</span><span class="sxs-lookup"><span data-stu-id="02e08-208">Review the [Office 365 URLs and IP address ranges](https://support.office.com/article/Office-365-URLs-and-IP-address-ranges-8548a211-3fe7-47cb-abb1-355ea5aa88a2)</span></span>

---
title: "Förstå Azure AD Application Proxy kopplingar | Microsoft Docs"
description: Beskriver grunderna om Azure AD Application Proxy-kopplingar.
services: active-directory
documentationcenter: 
author: kgremban
manager: femila
ms.assetid: 
ms.service: active-directory
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 08/03/2017
ms.author: kgremban
ms.reviewer: harshja
ms.custom: it-pro
ms.openlocfilehash: c18d0a2bff654573e6e28a7cd7fad853b3a11346
ms.sourcegitcommit: 50e23e8d3b1148ae2d36dad3167936b4e52c8a23
ms.translationtype: MT
ms.contentlocale: sv-SE
ms.lasthandoff: 08/18/2017
---
# <a name="understand-azure-ad-application-proxy-connectors"></a><span data-ttu-id="211e6-103">Förstå Azure AD Application Proxy-kopplingar</span><span class="sxs-lookup"><span data-stu-id="211e6-103">Understand Azure AD Application Proxy connectors</span></span>

<span data-ttu-id="211e6-104">Kopplingar är vad gör att Azure AD Application Proxy är möjligt.</span><span class="sxs-lookup"><span data-stu-id="211e6-104">Connectors are what make Azure AD Application Proxy possible.</span></span> <span data-ttu-id="211e6-105">De är enkla lätt att distribuera och underhålla och super kraftfulla.</span><span class="sxs-lookup"><span data-stu-id="211e6-105">They are simple, easy to deploy and maintain, and super powerful.</span></span> <span data-ttu-id="211e6-106">Den här artikeln beskriver vilka kopplingar är hur de fungerar och några förslag på hur du optimerar distributionen.</span><span class="sxs-lookup"><span data-stu-id="211e6-106">This article discusses what connectors are, how they work, and some suggestions for how to optimize your deployment.</span></span> 

## <a name="what-is-an-application-proxy-connector"></a><span data-ttu-id="211e6-107">Vad är en Application Proxy connector</span><span class="sxs-lookup"><span data-stu-id="211e6-107">What is an Application Proxy connector</span></span>

<span data-ttu-id="211e6-108">Kopplingar är förenklad agenter som sitter lokalt och underlätta utgående anslutning till tjänsten Application Proxy.</span><span class="sxs-lookup"><span data-stu-id="211e6-108">Connectors are lightweight agents that sit on-premises and facilitate the outbound connection to the Application Proxy service.</span></span> <span data-ttu-id="211e6-109">Kopplingar måste installeras på en Windows-Server som har åtkomst till backend-programmet.</span><span class="sxs-lookup"><span data-stu-id="211e6-109">Connectors must be installed on a Windows Server that has access to the backend application.</span></span> <span data-ttu-id="211e6-110">Du kan sortera kopplingar i kopplingen grupper med varje grupp som hanterar trafik till specifika program.</span><span class="sxs-lookup"><span data-stu-id="211e6-110">You can organize connectors into connector groups, with each group handling traffic to specific applications.</span></span> <span data-ttu-id="211e6-111">Kopplingar belastningen automatiskt, och kan hjälpa dig för att optimera nätverksinfrastrukturen.</span><span class="sxs-lookup"><span data-stu-id="211e6-111">Connectors load-balance automatically, and can help to optimize your network structure.</span></span> 

## <a name="requirements-and-deployment"></a><span data-ttu-id="211e6-112">Krav och distribution</span><span class="sxs-lookup"><span data-stu-id="211e6-112">Requirements and deployment</span></span>

<span data-ttu-id="211e6-113">Om du vill distribuera Application Proxy har du behöver minst en koppling, men vi rekommenderar två eller fler för större flexibilitet.</span><span class="sxs-lookup"><span data-stu-id="211e6-113">To deploy Application Proxy successfully, you need at least one connector, but we recommend two or more for greater resiliency.</span></span> <span data-ttu-id="211e6-114">Installera anslutningen på en Windows Server 2012 R2 eller 2016-dator.</span><span class="sxs-lookup"><span data-stu-id="211e6-114">Install the connector on a Windows Server 2012 R2 or 2016 machine.</span></span> <span data-ttu-id="211e6-115">Anslutningen måste kunna kommunicera med tjänsten Application Proxy samt lokala program som du publicerar.</span><span class="sxs-lookup"><span data-stu-id="211e6-115">The connector needs to be able to communicate with the Application Proxy service as well as the on-premises applications that you publish.</span></span> 

<span data-ttu-id="211e6-116">Mer information om nätverkskraven för connector-servern finns [komma igång med Application Proxy och installera en koppling](active-directory-application-proxy-enable.md).</span><span class="sxs-lookup"><span data-stu-id="211e6-116">For more information about the network requirements for the connector server, see [Get started with Application Proxy and install a connector](active-directory-application-proxy-enable.md).</span></span>

## <a name="maintenance"></a><span data-ttu-id="211e6-117">Underhåll</span><span class="sxs-lookup"><span data-stu-id="211e6-117">Maintenance</span></span>
<span data-ttu-id="211e6-118">Kopplingar och tjänsten tar hand om alla aktiviteter för hög tillgänglighet.</span><span class="sxs-lookup"><span data-stu-id="211e6-118">The connectors and the service take care of all the high availability tasks.</span></span> <span data-ttu-id="211e6-119">De kan läggas till eller tas bort dynamiskt.</span><span class="sxs-lookup"><span data-stu-id="211e6-119">They can be added or removed dynamically.</span></span> <span data-ttu-id="211e6-120">Varje gång en ny begäran kommer dirigeras till en av de kopplingar som är tillgänglig.</span><span class="sxs-lookup"><span data-stu-id="211e6-120">Each time a new request arrives it is routed to one of the connectors that is currently available.</span></span> <span data-ttu-id="211e6-121">Om en koppling inte är tillgänglig, kan den inte svara på den här trafiken.</span><span class="sxs-lookup"><span data-stu-id="211e6-121">If a connector is temporarily not available, it doesn't respond to this traffic.</span></span>

<span data-ttu-id="211e6-122">Kopplingarna är tillståndslösa och har några konfigurationsdata på datorn.</span><span class="sxs-lookup"><span data-stu-id="211e6-122">The connectors are stateless and have no configuration data on the machine.</span></span> <span data-ttu-id="211e6-123">De enda data som lagras är inställningarna för att ansluta tjänsten och dess certifikat för serverautentisering.</span><span class="sxs-lookup"><span data-stu-id="211e6-123">The only data they store is the settings for connecting the service and its authentication certificate.</span></span> <span data-ttu-id="211e6-124">När de ansluter till tjänsten hämtar alla konfigurationsdata som krävs och uppdatera den varje par minuter.</span><span class="sxs-lookup"><span data-stu-id="211e6-124">When they connect to the service, they pull all the required configuration data and refresh it every couple of minutes.</span></span>

<span data-ttu-id="211e6-125">Kopplingar avsöka också servern för att ta reda på om det finns en nyare version av kopplingen.</span><span class="sxs-lookup"><span data-stu-id="211e6-125">Connectors also poll the server to find out whether there is a newer version of the connector.</span></span> <span data-ttu-id="211e6-126">Om en sådan finns, uppdateras kopplingar.</span><span class="sxs-lookup"><span data-stu-id="211e6-126">If one is found, the connectors update themselves.</span></span>

<span data-ttu-id="211e6-127">Du kan övervaka dina kopplingar från den dator som körs på, med hjälp av du händelseloggen och prestandaräknare.</span><span class="sxs-lookup"><span data-stu-id="211e6-127">You can monitor your connectors from the machine they are running on, using either the event log and performance counters.</span></span> <span data-ttu-id="211e6-128">Eller så kan du visa deras status från sidan Application Proxy på Azure-portalen:</span><span class="sxs-lookup"><span data-stu-id="211e6-128">Or you can view their status from the Application Proxy page of the Azure portal:</span></span>

 ![AzureAD Application Proxy kopplingar](./media/application-proxy-understand-connectors/app-proxy-connectors.png)

<span data-ttu-id="211e6-130">Du behöver inte manuellt ta bort kopplingar som inte används.</span><span class="sxs-lookup"><span data-stu-id="211e6-130">You don't have to manually delete connectors that are unused.</span></span> <span data-ttu-id="211e6-131">När du kör en koppling förblir den aktiv när den ansluter till tjänsten.</span><span class="sxs-lookup"><span data-stu-id="211e6-131">When a connector is running, it remains active as it connects to the service.</span></span> <span data-ttu-id="211e6-132">Oanvända anslutningar märks _inaktiva_ och tas bort efter 10 dagar av inaktivitet.</span><span class="sxs-lookup"><span data-stu-id="211e6-132">Unused connectors are tagged as _inactive_ and are removed after 10 days of inactivity.</span></span> <span data-ttu-id="211e6-133">Om du vill avinstallera en koppling, men avinstallera både anslutningstjänsten och uppdateringstjänsten från servern.</span><span class="sxs-lookup"><span data-stu-id="211e6-133">If you do want to uninstall a connector, though, uninstall both the Connector service and the Updater service from the server.</span></span> <span data-ttu-id="211e6-134">Ta bort tjänsten helt och hållet genom att starta om datorn.</span><span class="sxs-lookup"><span data-stu-id="211e6-134">Restart your computer to fully remove the service.</span></span>

## <a name="automatic-updates"></a><span data-ttu-id="211e6-135">Automatiska uppdateringar</span><span class="sxs-lookup"><span data-stu-id="211e6-135">Automatic updates</span></span>

<span data-ttu-id="211e6-136">Azure AD innehåller automatiska uppdateringar för alla kopplingar som du distribuerar.</span><span class="sxs-lookup"><span data-stu-id="211e6-136">Azure AD provides automatic updates for all the connectors that you deploy.</span></span> <span data-ttu-id="211e6-137">Kopplingar uppdateras automatiskt så länge som Application Proxy Connector Updater-tjänsten körs.</span><span class="sxs-lookup"><span data-stu-id="211e6-137">As long as the Application Proxy Connector Updater service is running, your connectors update automatically.</span></span> <span data-ttu-id="211e6-138">Om du inte ser Connector Updater-tjänsten på servern, behöver du [installerar om din anslutning](active-directory-application-proxy-enable.md) att hämta uppdateringar.</span><span class="sxs-lookup"><span data-stu-id="211e6-138">If you don’t see the Connector Updater service on your server, you need to [reinstall your connector](active-directory-application-proxy-enable.md) to get any updates.</span></span> 

<span data-ttu-id="211e6-139">Om du inte vill vänta på en automatisk uppdatering att gå till din koppling, kan du utföra en manuell uppgradering.</span><span class="sxs-lookup"><span data-stu-id="211e6-139">If you don't want to wait for an automatic update to come to your connector, you can perform a manual upgrade.</span></span> <span data-ttu-id="211e6-140">Gå till den [connector hämtningssidan](https://download.msappproxy.net/subscription/d3c8b69d-6bf7-42be-a529-3fe9c2e70c90/connector/download) på den server där din koppling finns och välj **hämta**.</span><span class="sxs-lookup"><span data-stu-id="211e6-140">Go to the [connector download page](https://download.msappproxy.net/subscription/d3c8b69d-6bf7-42be-a529-3fe9c2e70c90/connector/download) on the server where your connector is located and select **Download**.</span></span> <span data-ttu-id="211e6-141">Den här processen som aktiveras av en uppgradering för den lokala anslutningen.</span><span class="sxs-lookup"><span data-stu-id="211e6-141">This process kicks off an upgrade for the local connector.</span></span> 

<span data-ttu-id="211e6-142">För klienter med flera kopplingar mål automatiska uppdateringar en anslutning i taget i varje grupp för att förhindra avbrott i din miljö.</span><span class="sxs-lookup"><span data-stu-id="211e6-142">For tenants with multiple connectors, the automatic updates target one connector at a time in each group to prevent downtime in your environment.</span></span> 

<span data-ttu-id="211e6-143">Driftstopp uppstår när din anslutningstjänst uppdateringar om:</span><span class="sxs-lookup"><span data-stu-id="211e6-143">You may experience downtime when your connector updates if:</span></span>  
- <span data-ttu-id="211e6-144">Du kan bara ha en anslutning.</span><span class="sxs-lookup"><span data-stu-id="211e6-144">You only have one connector.</span></span> <span data-ttu-id="211e6-145">Om du vill undvika det här driftstopp och förbättra hög tillgänglighet rekommenderar vi du installerar ytterligare en koppling och [skapar du en koppling grupp](active-directory-application-proxy-connectors-azure-portal.md).</span><span class="sxs-lookup"><span data-stu-id="211e6-145">To avoid this downtime and improve high availability, we recommend you install a second connector and [create a connector group](active-directory-application-proxy-connectors-azure-portal.md).</span></span>  
- <span data-ttu-id="211e6-146">En koppling var mitt i en transaktion när uppdateringen påbörjades.</span><span class="sxs-lookup"><span data-stu-id="211e6-146">A connector was in the middle of a transaction when the update began.</span></span> <span data-ttu-id="211e6-147">Även om den första transaktionen har gått förlorade måste webbläsaren ska automatiskt försök igen eller så kan du uppdatera sidan.</span><span class="sxs-lookup"><span data-stu-id="211e6-147">Although the initial transaction is lost, your browser should automatically retry the operation or you can refresh your page.</span></span> <span data-ttu-id="211e6-148">När begäran skickas igen dirigeras trafiken till en säkerhetskopiering koppling.</span><span class="sxs-lookup"><span data-stu-id="211e6-148">When the request is resent, the traffic is routed to a backup connector.</span></span>

## <a name="creating-connector-groups"></a><span data-ttu-id="211e6-149">Skapa grupper för anslutningstjänsten</span><span class="sxs-lookup"><span data-stu-id="211e6-149">Creating connector groups</span></span>

<span data-ttu-id="211e6-150">Kopplingen grupper kan du tilldela specifika kopplingar för att hantera specifika program.</span><span class="sxs-lookup"><span data-stu-id="211e6-150">Connector groups enable you to assign specific connectors to serve specific applications.</span></span> <span data-ttu-id="211e6-151">Du kan gruppera ett antal kopplingar och sedan tilldela varje program till en grupp.</span><span class="sxs-lookup"><span data-stu-id="211e6-151">You can group a number of connectors together, and then assign each application to a group.</span></span> 

<span data-ttu-id="211e6-152">Kopplingen grupper gör det enklare att hantera stora distributioner.</span><span class="sxs-lookup"><span data-stu-id="211e6-152">Connector groups make it easier to manage large deployments.</span></span> <span data-ttu-id="211e6-153">De kan också förbättra svarstiden för klienter som har program som finns i olika regioner, eftersom du kan skapa platsbaserad connector grupper för att hantera endast lokala program.</span><span class="sxs-lookup"><span data-stu-id="211e6-153">They also improve latency for tenants that have applications hosted in different regions, because you can create location-based connector groups to serve only local applications.</span></span> 

<span data-ttu-id="211e6-154">Mer information om koppling grupper finns [publicera program på separata nätverk och platser med hjälp av grupper för anslutningstjänsten](active-directory-application-proxy-connectors-azure-portal.md).</span><span class="sxs-lookup"><span data-stu-id="211e6-154">To learn more about connector groups, see [Publish applications on separate networks and locations using connector groups](active-directory-application-proxy-connectors-azure-portal.md).</span></span>

## <a name="security-and-networking"></a><span data-ttu-id="211e6-155">Säkerhet och nätverk</span><span class="sxs-lookup"><span data-stu-id="211e6-155">Security and networking</span></span>

<span data-ttu-id="211e6-156">Kopplingar kan installeras var som helst i nätverket som kan användas för att skicka begäranden till Application Proxy-tjänsten.</span><span class="sxs-lookup"><span data-stu-id="211e6-156">Connectors can be installed anywhere on the network that allows them to send requests to the Application Proxy service.</span></span> <span data-ttu-id="211e6-157">Vad är viktigt är att den dator som kör anslutningstjänsten även har åtkomst till dina appar.</span><span class="sxs-lookup"><span data-stu-id="211e6-157">What's important is that the computer running the connector also has access to your apps.</span></span> <span data-ttu-id="211e6-158">Du kan installera kopplingar inuti företagsnätverket eller på en virtuell dator som körs i molnet.</span><span class="sxs-lookup"><span data-stu-id="211e6-158">You can install connectors inside of your corporate network or on a virtual machine that runs in the cloud.</span></span> <span data-ttu-id="211e6-159">Kopplingar kan köras inom en demilitariserad zon (DMZ), men det är inte nödvändigt eftersom all trafik är utgående så nätverket förblir säkra.</span><span class="sxs-lookup"><span data-stu-id="211e6-159">Connectors can run within a demilitarized zone (DMZ), but it's not necessary because all traffic is outbound so your network stays secure.</span></span>

<span data-ttu-id="211e6-160">Kopplingar kan bara skicka utgående förfrågningar.</span><span class="sxs-lookup"><span data-stu-id="211e6-160">Connectors only send outbound requests.</span></span> <span data-ttu-id="211e6-161">Utgående trafik som skickas till Application Proxy-tjänsten och till publicerade program.</span><span class="sxs-lookup"><span data-stu-id="211e6-161">The outbound traffic is sent to the Application Proxy service and to the published applications.</span></span> <span data-ttu-id="211e6-162">Du behöver öppna ingående portar eftersom trafiken flödar båda sätten när en session har upprättats.</span><span class="sxs-lookup"><span data-stu-id="211e6-162">You don't have to open inbound ports because traffic flows both ways once a session is established.</span></span> <span data-ttu-id="211e6-163">Du behöver inte konfigurera belastningsutjämning mellan kopplingarna eller konfigurera inkommande åtkomst via dina brandväggar.</span><span class="sxs-lookup"><span data-stu-id="211e6-163">You don't have to set up load balancing between the connectors or configure inbound access through your firewalls.</span></span> 

<span data-ttu-id="211e6-164">Mer information om hur du konfigurerar utgående brandväggsregler finns [fungerar med befintliga lokala proxyservrar](application-proxy-working-with-proxy-servers.md).</span><span class="sxs-lookup"><span data-stu-id="211e6-164">For more information about configuring outbound firewall rules, see [Work with existing on-premises proxy servers](application-proxy-working-with-proxy-servers.md).</span></span>

<span data-ttu-id="211e6-165">Använd den [Azure AD Application Proxy Connector portar Test Tool](https://aadap-portcheck.connectorporttest.msappproxy.net/) att verifiera att din connector kan nå tjänsten Application Proxy.</span><span class="sxs-lookup"><span data-stu-id="211e6-165">Use the [Azure AD Application Proxy Connector Ports Test Tool](https://aadap-portcheck.connectorporttest.msappproxy.net/) to verify that your connector can reach the Application Proxy service.</span></span> <span data-ttu-id="211e6-166">Kontrollera att den centrala USA och region som är närmast dig har alla gröna bockmarkeringarna minimum.</span><span class="sxs-lookup"><span data-stu-id="211e6-166">At a minimum, make sure that the Central US region and the region closest to you have all green checkmarks.</span></span> <span data-ttu-id="211e6-167">Utöver det kan innebär mer gröna bockmarkeringarna större flexibilitet.</span><span class="sxs-lookup"><span data-stu-id="211e6-167">Beyond that, more green checkmarks means greater resiliency.</span></span> 

## <a name="performance-and-scalability"></a><span data-ttu-id="211e6-168">Prestanda och skalbarhet</span><span class="sxs-lookup"><span data-stu-id="211e6-168">Performance and scalability</span></span>

<span data-ttu-id="211e6-169">Skala för tjänsten Application Proxy är transparent, men skalan är en faktor för kopplingar.</span><span class="sxs-lookup"><span data-stu-id="211e6-169">Scale for the Application Proxy service is transparent, but scale is a factor for connectors.</span></span> <span data-ttu-id="211e6-170">Du måste ha tillräckligt med kopplingar ska hantera högtrafik.</span><span class="sxs-lookup"><span data-stu-id="211e6-170">You need to have enough connectors to handle peak traffic.</span></span> <span data-ttu-id="211e6-171">Dock behöver du inte konfigurera belastningsutjämning eftersom alla kopplingar i en grupp för anslutningen automatiskt belastningsutjämna.</span><span class="sxs-lookup"><span data-stu-id="211e6-171">However, you don't need to configure load balancing because all connectors within a connector group automatically load balance.</span></span>

<span data-ttu-id="211e6-172">Eftersom kopplingar tillståndslös bör påverkas de inte av antalet användare eller sessioner.</span><span class="sxs-lookup"><span data-stu-id="211e6-172">Since connectors are stateless, they are not affected by the number of users or sessions.</span></span> <span data-ttu-id="211e6-173">I stället svarar de på antalet begäranden och deras nyttolastens storlek.</span><span class="sxs-lookup"><span data-stu-id="211e6-173">Instead, they respond to the number of requests and their payload size.</span></span> <span data-ttu-id="211e6-174">Med standard webbtrafik, kan en genomsnittlig virtuell dator hantera några tusen begäranden per sekund.</span><span class="sxs-lookup"><span data-stu-id="211e6-174">With standard web traffic, an average machine can handle a couple thousand requests per second.</span></span> <span data-ttu-id="211e6-175">Den aktuella kapaciteten beror på de exakta dator egenskaperna.</span><span class="sxs-lookup"><span data-stu-id="211e6-175">The specific capacity depends on the exact machine characteristics.</span></span> 

<span data-ttu-id="211e6-176">Prestanda för kopplingen bundna av processor- och nätverk.</span><span class="sxs-lookup"><span data-stu-id="211e6-176">The connector performance is bound by CPU and networking.</span></span> <span data-ttu-id="211e6-177">CPU-prestanda krävs för SSL-kryptering och dekryptering, medan nätverk är viktigt att få en snabb anslutning till program och tjänsten online i Azure.</span><span class="sxs-lookup"><span data-stu-id="211e6-177">CPU performance is needed for SSL encryption and decryption, while networking is important to get fast connectivity to the applications and the online service in Azure.</span></span>

<span data-ttu-id="211e6-178">Minnet är däremot mindre problem för kopplingar.</span><span class="sxs-lookup"><span data-stu-id="211e6-178">In contrast, memory is less of an issue for connectors.</span></span> <span data-ttu-id="211e6-179">Tjänsten online hand tar om mycket bearbetning och all trafik som inte har autentiserats.</span><span class="sxs-lookup"><span data-stu-id="211e6-179">The online service takes care of much of the processing and all unauthenticated traffic.</span></span> <span data-ttu-id="211e6-180">Allt som kan göras i molnet görs i molnet.</span><span class="sxs-lookup"><span data-stu-id="211e6-180">Everything that can be done in the cloud is done in the cloud.</span></span> 

<span data-ttu-id="211e6-181">En annan faktor som påverkar prestanda är kvaliteten på nätverk mellan kopplingar, inklusive:</span><span class="sxs-lookup"><span data-stu-id="211e6-181">Another factor that affects performance is the quality of the networking between the connectors, including:</span></span> 

* <span data-ttu-id="211e6-182">**Tjänsten online**: långsam eller lång tidsfördröjning anslutningar till Application Proxy-tjänsten i Azure påverkan prestanda för kopplingen.</span><span class="sxs-lookup"><span data-stu-id="211e6-182">**The online service**: Slow or high-latency connections to the Application Proxy service in Azure influence the connector performance.</span></span> <span data-ttu-id="211e6-183">Anslut din organisation till Azure med Express Route för bästa prestanda.</span><span class="sxs-lookup"><span data-stu-id="211e6-183">For the best performance, connect your organization to Azure with Express Route.</span></span> <span data-ttu-id="211e6-184">I annat fall har teamet nätverk, se till att anslutningar till Azure hanteras så effektivt som möjligt.</span><span class="sxs-lookup"><span data-stu-id="211e6-184">Otherwise, have your networking team ensure that connections to Azure are handled as efficiently as possible.</span></span> 
* <span data-ttu-id="211e6-185">**Backend-program**: I vissa fall finns proxy mellan kopplingen och backend-program som kan långsamma eller förhindra anslutningar.</span><span class="sxs-lookup"><span data-stu-id="211e6-185">**The backend applications**: In some cases, there are additional proxies between the connector and the backend applications that can slow or prevent connections.</span></span> <span data-ttu-id="211e6-186">Om du vill felsöka det här scenariot öppna en webbläsare från anslutningsservern och försök få åtkomst till programmet.</span><span class="sxs-lookup"><span data-stu-id="211e6-186">To troubleshoot this scenario, open a browser from the connector server and try to access the application.</span></span> <span data-ttu-id="211e6-187">Om du kör kopplingarna i Azure, men program som finns lokalt, kanske upplevelsen inte användarna förväntar dig.</span><span class="sxs-lookup"><span data-stu-id="211e6-187">If you run the connectors in Azure but the applications are on-premises, the experience might not be what your users expect.</span></span>
* <span data-ttu-id="211e6-188">**Domänkontrollanterna**: om kopplingarna utför enkel inloggning med hjälp av Kerberos-begränsad delegering kan de kontakta domänkontrollanter innan begäran skickades till serverdelen.</span><span class="sxs-lookup"><span data-stu-id="211e6-188">**The domain controllers**: If the connectors perform SSO using Kerberos Constrained Delegation, they contact the domain controllers before sending the request to the backend.</span></span> <span data-ttu-id="211e6-189">Kopplingar som har en cache med Kerberos-biljetter, men i en miljö med upptagen svarstiderna domänkontrollanter kan påverka prestanda.</span><span class="sxs-lookup"><span data-stu-id="211e6-189">The connectors have a cache of Kerberos tickets, but in a busy environment the responsiveness of the domain controllers can affect performance.</span></span> <span data-ttu-id="211e6-190">Det här problemet är vanligare för kopplingar som körs i Azure men kommunicerar med domänkontrollanter som finns lokalt.</span><span class="sxs-lookup"><span data-stu-id="211e6-190">This issue is more common for connectors that run in Azure but communicate with domain controllers that are on-premises.</span></span> 

<span data-ttu-id="211e6-191">Mer information om hur du optimerar nätverket finns [nätverk topologiöverväganden när du använder Azure Active Directory Application Proxy](application-proxy-network-topology-considerations.md).</span><span class="sxs-lookup"><span data-stu-id="211e6-191">For more information about optimizing your network, see [Network topology considerations when using Azure Active Directory Application Proxy](application-proxy-network-topology-considerations.md).</span></span>

## <a name="domain-joining"></a><span data-ttu-id="211e6-192">Ansluta till domänen</span><span class="sxs-lookup"><span data-stu-id="211e6-192">Domain joining</span></span>

<span data-ttu-id="211e6-193">Kopplingar kan köras på en dator som inte är ansluten till domänen.</span><span class="sxs-lookup"><span data-stu-id="211e6-193">Connectors can run on a machine that is not domain-joined.</span></span> <span data-ttu-id="211e6-194">Om du vill använda enkel inloggning (SSO) för program som använder integrerad autentisering IWA (Windows) måste dock en domänansluten dator.</span><span class="sxs-lookup"><span data-stu-id="211e6-194">However, if you want single sign-on (SSO) to applications that use Integrated Windows Authentication (IWA), you need a domain-joined machine.</span></span> <span data-ttu-id="211e6-195">I det här fallet connector-datorer måste vara ansluten till en domän som kan utföra [Kerberos](https://web.mit.edu/kerberos) begränsad delegering för användare av publicerade program.</span><span class="sxs-lookup"><span data-stu-id="211e6-195">In this case, the connector machines must be joined to a domain that can perform [Kerberos](https://web.mit.edu/kerberos) Constrained Delegation on behalf of the users for the published applications.</span></span>

<span data-ttu-id="211e6-196">Kopplingar kan också anslutas till domäner eller skogar som har ett partiellt förtroende eller till skrivskyddade domänkontrollanter.</span><span class="sxs-lookup"><span data-stu-id="211e6-196">Connectors can also be joined to domains or forests that have a partial trust, or to read-only domain controllers.</span></span>

## <a name="connector-deployments-on-hardened-environments"></a><span data-ttu-id="211e6-197">Kopplingen distributioner på strikt miljöer</span><span class="sxs-lookup"><span data-stu-id="211e6-197">Connector deployments on hardened environments</span></span>

<span data-ttu-id="211e6-198">Vanligtvis är enkla connector distribution och kräver ingen särskild konfiguration.</span><span class="sxs-lookup"><span data-stu-id="211e6-198">Usually, connector deployment is straightforward and requires no special configuration.</span></span> <span data-ttu-id="211e6-199">Det finns emellertid vissa unika villkor som ska övervägas:</span><span class="sxs-lookup"><span data-stu-id="211e6-199">However, there are some unique conditions that should be considered:</span></span>

* <span data-ttu-id="211e6-200">Organisationer som begränsar den utgående trafiken måste [öppna portar som krävs](active-directory-application-proxy-enable.md#open-your-ports).</span><span class="sxs-lookup"><span data-stu-id="211e6-200">Organizations that limit the outbound traffic must [open required ports](active-directory-application-proxy-enable.md#open-your-ports).</span></span>
* <span data-ttu-id="211e6-201">FIPS-kompatibla datorer kan krävas för att ändra konfigurationen så att connector-processer att generera och lagra ett certifikat.</span><span class="sxs-lookup"><span data-stu-id="211e6-201">FIPS-compliant machines might be required to change their configuration to allow the connector processes to generate and store a certificate.</span></span>
* <span data-ttu-id="211e6-202">Organisationer som låsa deras miljö baserat på de processer som utfärdar nätverk begäranden har se till att båda connector-tjänster är aktiverade för åtkomst till alla portar som krävs och IP-adresser.</span><span class="sxs-lookup"><span data-stu-id="211e6-202">Organizations that lock down their environment based on the processes that issue the networking requests have to make sure that both connector services are enabled to access all required ports and IPs.</span></span>
* <span data-ttu-id="211e6-203">I vissa fall utgående vidarebefordra proxyservrar Bryt dubbelriktat certifikatautentisering och orsaka kommunikationen misslyckas.</span><span class="sxs-lookup"><span data-stu-id="211e6-203">In some cases, outbound forward proxies may break the two-way certificate authentication and cause the communication to fail.</span></span>

## <a name="connector-authentication"></a><span data-ttu-id="211e6-204">Kopplingen autentisering</span><span class="sxs-lookup"><span data-stu-id="211e6-204">Connector authentication</span></span>

<span data-ttu-id="211e6-205">För att tillhandahålla en säker service kopplingar som har att autentisera mot tjänsten och tjänsten har att autentisera mot kopplingen.</span><span class="sxs-lookup"><span data-stu-id="211e6-205">To provide a secure service, connectors have to authenticate toward the service, and the service has to authenticate toward the connector.</span></span> <span data-ttu-id="211e6-206">Den här autentiseringen görs med hjälp av klient- och servercertifikat när kopplingarna upprätta anslutningen.</span><span class="sxs-lookup"><span data-stu-id="211e6-206">This authentication is done using client and server certificates when the connectors initiate the connection.</span></span> <span data-ttu-id="211e6-207">Det här sättet administratörens användarnamn och lösenord lagras inte på datorn för anslutningen.</span><span class="sxs-lookup"><span data-stu-id="211e6-207">This way the administrator’s username and password are not stored on the connector machine.</span></span>

<span data-ttu-id="211e6-208">De certifikat som används är specifika för tjänsten Application Proxy.</span><span class="sxs-lookup"><span data-stu-id="211e6-208">The certificates used are specific to the Application Proxy service.</span></span> <span data-ttu-id="211e6-209">De skapas under registreringen och automatiskt förnyas av kopplingarna varje par månader.</span><span class="sxs-lookup"><span data-stu-id="211e6-209">They get created during the initial registration and are automatically renewed by the connectors every couple of months.</span></span> 

<span data-ttu-id="211e6-210">Om en anslutning inte är ansluten till tjänsten för flera månader kan certifikat vara inaktuell.</span><span class="sxs-lookup"><span data-stu-id="211e6-210">If a connector is not connected to the service for several months, its certificates may be outdated.</span></span> <span data-ttu-id="211e6-211">I det här fallet avinstallera och installera om kopplingen för att registrering av utlösare.</span><span class="sxs-lookup"><span data-stu-id="211e6-211">In this case, uninstall and reinstall the connector to trigger registration.</span></span> <span data-ttu-id="211e6-212">Du kan köra följande PowerShell-kommandon:</span><span class="sxs-lookup"><span data-stu-id="211e6-212">You can run the following PowerShell commands:</span></span>

```
Import-module AppProxyPSModule
Register-AppProxyConnector
```

## <a name="under-the-hood"></a><span data-ttu-id="211e6-213">Under huven</span><span class="sxs-lookup"><span data-stu-id="211e6-213">Under the hood</span></span>

<span data-ttu-id="211e6-214">Kopplingar är baserade på Windows Server Web Application Proxy, så de har de flesta av samma hanteringsverktyg, inklusive Windows-händelseloggar</span><span class="sxs-lookup"><span data-stu-id="211e6-214">Connectors are based on Windows Server Web Application Proxy, so they have most of the same management tools including Windows Event Logs</span></span>

 ![Hantera händelseloggar med Loggboken](./media/application-proxy-understand-connectors/event-view-window.png)

<span data-ttu-id="211e6-216">och Windows-prestandaräknare.</span><span class="sxs-lookup"><span data-stu-id="211e6-216">and Windows performance counters.</span></span> 

 ![Lägga till räknare i kopplingen med Resursövervakaren](./media/application-proxy-understand-connectors/performance-monitor.png)

<span data-ttu-id="211e6-218">Anslutningarna har både admin och sessionen loggar.</span><span class="sxs-lookup"><span data-stu-id="211e6-218">The connectors have both admin and session logs.</span></span> <span data-ttu-id="211e6-219">Administratörsloggar innehåller viktiga händelser och deras fel.</span><span class="sxs-lookup"><span data-stu-id="211e6-219">The admin logs include key events and their errors.</span></span> <span data-ttu-id="211e6-220">Sessionsloggar innehåller alla transaktioner och information om bearbetning.</span><span class="sxs-lookup"><span data-stu-id="211e6-220">The session logs include all the transactions and their processing details.</span></span> 

<span data-ttu-id="211e6-221">Loggarna, gå till Loggboken, öppna den **visa** -menyn och aktivera **visa analytiska loggar och felsökningsloggar**.</span><span class="sxs-lookup"><span data-stu-id="211e6-221">To see the logs, go to the Event Viewer, open the **View** menu, and enable **Show analytic and debug logs**.</span></span> <span data-ttu-id="211e6-222">Aktivera sedan att börja samla in händelser.</span><span class="sxs-lookup"><span data-stu-id="211e6-222">Then, enable them to start collecting events.</span></span> <span data-ttu-id="211e6-223">Dessa loggar visas inte i Web Application Proxy i Windows Server 2012 R2 som kopplingarna baseras på en senare version.</span><span class="sxs-lookup"><span data-stu-id="211e6-223">These logs do not appear in Web Application Proxy in Windows Server 2012 R2, as the connectors are based on a more recent version.</span></span>

<span data-ttu-id="211e6-224">Du kan undersöka statusen för tjänsten i fönstret tjänster.</span><span class="sxs-lookup"><span data-stu-id="211e6-224">You can examine the state of the service in the Services window.</span></span> <span data-ttu-id="211e6-225">Kopplingen består av två Windows-tjänster: den faktiska anslutningen och uppdateringsfilen.</span><span class="sxs-lookup"><span data-stu-id="211e6-225">The connector comprises two Windows Services: the actual connector, and the updater.</span></span> <span data-ttu-id="211e6-226">Båda måste köras hela tiden.</span><span class="sxs-lookup"><span data-stu-id="211e6-226">Both of them must run all the time.</span></span>

 ![AzureAD tjänster lokalt](./media/application-proxy-understand-connectors/aad-connector-services.png)

## <a name="next-steps"></a><span data-ttu-id="211e6-228">Nästa steg</span><span class="sxs-lookup"><span data-stu-id="211e6-228">Next steps</span></span>


* [<span data-ttu-id="211e6-229">Publicera program på separata nätverk och platser med hjälp av connector-grupper</span><span class="sxs-lookup"><span data-stu-id="211e6-229">Publish applications on separate networks and locations using connector groups</span></span>](active-directory-application-proxy-connectors-azure-portal.md)
* [<span data-ttu-id="211e6-230">Arbeta med befintliga lokala proxyservrar</span><span class="sxs-lookup"><span data-stu-id="211e6-230">Work with existing on-premises proxy servers</span></span>](application-proxy-working-with-proxy-servers.md)
* [<span data-ttu-id="211e6-231">Felsöka Application Proxy och connector</span><span class="sxs-lookup"><span data-stu-id="211e6-231">Troubleshoot Application Proxy and connector errors</span></span>](active-directory-application-proxy-troubleshoot.md)
* [<span data-ttu-id="211e6-232">Tyst installation av Azure AD Application Proxy Connector</span><span class="sxs-lookup"><span data-stu-id="211e6-232">How to silently install the Azure AD Application Proxy Connector</span></span>](active-directory-application-proxy-silent-installation.md)


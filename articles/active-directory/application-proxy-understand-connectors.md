---
title: aaaUnderstand Azure AD Application Proxy kopplingar | Microsoft Docs
description: Beskriver hello grunderna om Azure AD Application Proxy-kopplingar.
services: active-directory
documentationcenter: 
author: kgremban
manager: femila
ms.assetid: 
ms.service: active-directory
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 08/03/2017
ms.author: kgremban
ms.reviewer: harshja
ms.custom: it-pro
ms.openlocfilehash: 294cb26803ef7cf8be9f3af0678d6d2e64f6cc14
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: sv-SE
ms.lasthandoff: 10/06/2017
---
# <a name="understand-azure-ad-application-proxy-connectors"></a><span data-ttu-id="ec5a5-103">Förstå Azure AD Application Proxy-kopplingar</span><span class="sxs-lookup"><span data-stu-id="ec5a5-103">Understand Azure AD Application Proxy connectors</span></span>

<span data-ttu-id="ec5a5-104">Kopplingar är vad gör att Azure AD Application Proxy är möjligt.</span><span class="sxs-lookup"><span data-stu-id="ec5a5-104">Connectors are what make Azure AD Application Proxy possible.</span></span> <span data-ttu-id="ec5a5-105">De är snabb och enkel toodeploy och underhåll och super kraftfulla.</span><span class="sxs-lookup"><span data-stu-id="ec5a5-105">They are simple, easy toodeploy and maintain, and super powerful.</span></span> <span data-ttu-id="ec5a5-106">Den här artikeln beskriver vilka kopplingar är hur de fungerar och några förslag på hur toooptimize din distribution.</span><span class="sxs-lookup"><span data-stu-id="ec5a5-106">This article discusses what connectors are, how they work, and some suggestions for how toooptimize your deployment.</span></span> 

## <a name="what-is-an-application-proxy-connector"></a><span data-ttu-id="ec5a5-107">Vad är en Application Proxy connector</span><span class="sxs-lookup"><span data-stu-id="ec5a5-107">What is an Application Proxy connector</span></span>

<span data-ttu-id="ec5a5-108">Kopplingar är förenklad agenter som sitter lokalt och underlätta hello utgående anslutning toohello Application Proxy-tjänsten.</span><span class="sxs-lookup"><span data-stu-id="ec5a5-108">Connectors are lightweight agents that sit on-premises and facilitate hello outbound connection toohello Application Proxy service.</span></span> <span data-ttu-id="ec5a5-109">Kopplingar måste installeras på en Windows-Server som har åtkomst toohello backend-programmet.</span><span class="sxs-lookup"><span data-stu-id="ec5a5-109">Connectors must be installed on a Windows Server that has access toohello backend application.</span></span> <span data-ttu-id="ec5a5-110">Du kan sortera kopplingar i kopplingen grupper med varje grupp som hanterar trafik toospecific program.</span><span class="sxs-lookup"><span data-stu-id="ec5a5-110">You can organize connectors into connector groups, with each group handling traffic toospecific applications.</span></span> <span data-ttu-id="ec5a5-111">Kopplingar belastningen automatiskt, och kan hjälpa toooptimize nätverksinfrastrukturen.</span><span class="sxs-lookup"><span data-stu-id="ec5a5-111">Connectors load-balance automatically, and can help toooptimize your network structure.</span></span> 

## <a name="requirements-and-deployment"></a><span data-ttu-id="ec5a5-112">Krav och distribution</span><span class="sxs-lookup"><span data-stu-id="ec5a5-112">Requirements and deployment</span></span>

<span data-ttu-id="ec5a5-113">toodeploy Application Proxy, behöver du minst en koppling, men vi rekommenderar två eller fler för större flexibilitet.</span><span class="sxs-lookup"><span data-stu-id="ec5a5-113">toodeploy Application Proxy successfully, you need at least one connector, but we recommend two or more for greater resiliency.</span></span> <span data-ttu-id="ec5a5-114">Installera hello connector på en Windows Server 2012 R2 eller 2016-dator.</span><span class="sxs-lookup"><span data-stu-id="ec5a5-114">Install hello connector on a Windows Server 2012 R2 or 2016 machine.</span></span> <span data-ttu-id="ec5a5-115">hello connector måste toobe kan toocommunicate med hello Application Proxy-tjänsten samt hello lokalt program som du publicerar.</span><span class="sxs-lookup"><span data-stu-id="ec5a5-115">hello connector needs toobe able toocommunicate with hello Application Proxy service as well as hello on-premises applications that you publish.</span></span> 

<span data-ttu-id="ec5a5-116">Läs mer om hello nätverkskraven för hello-anslutningsservern [komma igång med Application Proxy och installera en koppling](active-directory-application-proxy-enable.md).</span><span class="sxs-lookup"><span data-stu-id="ec5a5-116">For more information about hello network requirements for hello connector server, see [Get started with Application Proxy and install a connector](active-directory-application-proxy-enable.md).</span></span>

## <a name="maintenance"></a><span data-ttu-id="ec5a5-117">Underhåll</span><span class="sxs-lookup"><span data-stu-id="ec5a5-117">Maintenance</span></span>
<span data-ttu-id="ec5a5-118">hello hand kopplingar och hello tjänsten tar om alla aktiviteter som hello hög tillgänglighet.</span><span class="sxs-lookup"><span data-stu-id="ec5a5-118">hello connectors and hello service take care of all hello high availability tasks.</span></span> <span data-ttu-id="ec5a5-119">De kan läggas till eller tas bort dynamiskt.</span><span class="sxs-lookup"><span data-stu-id="ec5a5-119">They can be added or removed dynamically.</span></span> <span data-ttu-id="ec5a5-120">Varje gång en ny begäran kommer är routade tooone hello kopplingar som är tillgänglig.</span><span class="sxs-lookup"><span data-stu-id="ec5a5-120">Each time a new request arrives it is routed tooone of hello connectors that is currently available.</span></span> <span data-ttu-id="ec5a5-121">Om en koppling inte är tillgänglig, kan den inte svarar toothis trafik.</span><span class="sxs-lookup"><span data-stu-id="ec5a5-121">If a connector is temporarily not available, it doesn't respond toothis traffic.</span></span>

<span data-ttu-id="ec5a5-122">hello kopplingar är tillståndslösa och har några konfigurationsdata på hello-datorn.</span><span class="sxs-lookup"><span data-stu-id="ec5a5-122">hello connectors are stateless and have no configuration data on hello machine.</span></span> <span data-ttu-id="ec5a5-123">hello endast data lagras är hello inställningarna för att ansluta hello service och dess certifikat för serverautentisering.</span><span class="sxs-lookup"><span data-stu-id="ec5a5-123">hello only data they store is hello settings for connecting hello service and its authentication certificate.</span></span> <span data-ttu-id="ec5a5-124">När de ansluter toohello service hämtar alla konfigurationsdata för hello som krävs och uppdatera den varje par minuter.</span><span class="sxs-lookup"><span data-stu-id="ec5a5-124">When they connect toohello service, they pull all hello required configuration data and refresh it every couple of minutes.</span></span>

<span data-ttu-id="ec5a5-125">Kopplingar också avsöka hello server toofind reda på om det finns en nyare version av hello-anslutningen.</span><span class="sxs-lookup"><span data-stu-id="ec5a5-125">Connectors also poll hello server toofind out whether there is a newer version of hello connector.</span></span> <span data-ttu-id="ec5a5-126">Om en sådan finns, uppdateras hello kopplingar.</span><span class="sxs-lookup"><span data-stu-id="ec5a5-126">If one is found, hello connectors update themselves.</span></span>

<span data-ttu-id="ec5a5-127">Du kan övervaka dina kopplingar från hello-dator som körs på, med hello händelseloggen och prestandaräknare.</span><span class="sxs-lookup"><span data-stu-id="ec5a5-127">You can monitor your connectors from hello machine they are running on, using either hello event log and performance counters.</span></span> <span data-ttu-id="ec5a5-128">Eller så kan du visa deras status hello Application Proxy-sidan för hello Azure-portalen:</span><span class="sxs-lookup"><span data-stu-id="ec5a5-128">Or you can view their status from hello Application Proxy page of hello Azure portal:</span></span>

 ![AzureAD Application Proxy kopplingar](./media/application-proxy-understand-connectors/app-proxy-connectors.png)

<span data-ttu-id="ec5a5-130">Du har inte toomanually ta bort kopplingar som inte används.</span><span class="sxs-lookup"><span data-stu-id="ec5a5-130">You don't have toomanually delete connectors that are unused.</span></span> <span data-ttu-id="ec5a5-131">När du kör en koppling förblir den aktiv eftersom det ansluter toohello service.</span><span class="sxs-lookup"><span data-stu-id="ec5a5-131">When a connector is running, it remains active as it connects toohello service.</span></span> <span data-ttu-id="ec5a5-132">Oanvända anslutningar märks _inaktiva_ och tas bort efter 10 dagar av inaktivitet.</span><span class="sxs-lookup"><span data-stu-id="ec5a5-132">Unused connectors are tagged as _inactive_ and are removed after 10 days of inactivity.</span></span> <span data-ttu-id="ec5a5-133">Om du vill toouninstall en koppling, avinstallerar du dock både hello kopplingstjänsten och hello uppdateringstjänsten från hello-servern.</span><span class="sxs-lookup"><span data-stu-id="ec5a5-133">If you do want toouninstall a connector, though, uninstall both hello Connector service and hello Updater service from hello server.</span></span> <span data-ttu-id="ec5a5-134">Starta om datorn toofully ta bort hello tjänsten.</span><span class="sxs-lookup"><span data-stu-id="ec5a5-134">Restart your computer toofully remove hello service.</span></span>

## <a name="automatic-updates"></a><span data-ttu-id="ec5a5-135">Automatiska uppdateringar</span><span class="sxs-lookup"><span data-stu-id="ec5a5-135">Automatic updates</span></span>

<span data-ttu-id="ec5a5-136">Azure AD innehåller automatiska uppdateringar för alla hello kopplingar som du distribuerar.</span><span class="sxs-lookup"><span data-stu-id="ec5a5-136">Azure AD provides automatic updates for all hello connectors that you deploy.</span></span> <span data-ttu-id="ec5a5-137">Kopplingar uppdateras automatiskt så länge hello Application Proxy Connector Updater-tjänsten körs.</span><span class="sxs-lookup"><span data-stu-id="ec5a5-137">As long as hello Application Proxy Connector Updater service is running, your connectors update automatically.</span></span> <span data-ttu-id="ec5a5-138">Om du inte ser hello Connector Updater-tjänsten på servern måste du för[installerar om din anslutning](active-directory-application-proxy-enable.md) tooget eventuella uppdateringar.</span><span class="sxs-lookup"><span data-stu-id="ec5a5-138">If you don’t see hello Connector Updater service on your server, you need too[reinstall your connector](active-directory-application-proxy-enable.md) tooget any updates.</span></span> 

<span data-ttu-id="ec5a5-139">Om du inte vill toowait för en automatisk uppdatering toocome tooyour koppling, kan du utföra en manuell uppgradering.</span><span class="sxs-lookup"><span data-stu-id="ec5a5-139">If you don't want toowait for an automatic update toocome tooyour connector, you can perform a manual upgrade.</span></span> <span data-ttu-id="ec5a5-140">Gå toohello [connector hämtningssidan](https://download.msappproxy.net/subscription/d3c8b69d-6bf7-42be-a529-3fe9c2e70c90/connector/download) på hello server där din koppling finns och välj **hämta**.</span><span class="sxs-lookup"><span data-stu-id="ec5a5-140">Go toohello [connector download page](https://download.msappproxy.net/subscription/d3c8b69d-6bf7-42be-a529-3fe9c2e70c90/connector/download) on hello server where your connector is located and select **Download**.</span></span> <span data-ttu-id="ec5a5-141">Den här processen som aktiveras av en uppgradering för hello lokal connector.</span><span class="sxs-lookup"><span data-stu-id="ec5a5-141">This process kicks off an upgrade for hello local connector.</span></span> 

<span data-ttu-id="ec5a5-142">För klienter med flera kopplingar mål hello automatiska uppdateringar en anslutning i taget i varje grupp tooprevent driftavbrott.</span><span class="sxs-lookup"><span data-stu-id="ec5a5-142">For tenants with multiple connectors, hello automatic updates target one connector at a time in each group tooprevent downtime in your environment.</span></span> 

<span data-ttu-id="ec5a5-143">Driftstopp uppstår när din anslutningstjänst uppdateringar om:</span><span class="sxs-lookup"><span data-stu-id="ec5a5-143">You may experience downtime when your connector updates if:</span></span>  
- <span data-ttu-id="ec5a5-144">Du kan bara ha en anslutning.</span><span class="sxs-lookup"><span data-stu-id="ec5a5-144">You only have one connector.</span></span> <span data-ttu-id="ec5a5-145">tooavoid denna driftstopp och förbättra hög tillgänglighet rekommenderar vi att du installerar ytterligare en koppling och [skapar du en koppling grupp](active-directory-application-proxy-connectors-azure-portal.md).</span><span class="sxs-lookup"><span data-stu-id="ec5a5-145">tooavoid this downtime and improve high availability, we recommend you install a second connector and [create a connector group](active-directory-application-proxy-connectors-azure-portal.md).</span></span>  
- <span data-ttu-id="ec5a5-146">En koppling hade hello mitten av en transaktion när hello update började.</span><span class="sxs-lookup"><span data-stu-id="ec5a5-146">A connector was in hello middle of a transaction when hello update began.</span></span> <span data-ttu-id="ec5a5-147">Även om hello inledande transaktion har gått förlorade måste webbläsaren ska automatiskt försök hello åtgärden eller kan du uppdatera sidan.</span><span class="sxs-lookup"><span data-stu-id="ec5a5-147">Although hello initial transaction is lost, your browser should automatically retry hello operation or you can refresh your page.</span></span> <span data-ttu-id="ec5a5-148">När hello-begäran skickas, är hello trafik dirigeras tooa säkerhetskopiering connector.</span><span class="sxs-lookup"><span data-stu-id="ec5a5-148">When hello request is resent, hello traffic is routed tooa backup connector.</span></span>

## <a name="creating-connector-groups"></a><span data-ttu-id="ec5a5-149">Skapa grupper för anslutningstjänsten</span><span class="sxs-lookup"><span data-stu-id="ec5a5-149">Creating connector groups</span></span>

<span data-ttu-id="ec5a5-150">Kopplingen grupper kan tooassign specifika kopplingar tooserve specifika program.</span><span class="sxs-lookup"><span data-stu-id="ec5a5-150">Connector groups enable you tooassign specific connectors tooserve specific applications.</span></span> <span data-ttu-id="ec5a5-151">Du kan gruppera ett antal kopplingar och sedan tilldela varje tooa programgrupp.</span><span class="sxs-lookup"><span data-stu-id="ec5a5-151">You can group a number of connectors together, and then assign each application tooa group.</span></span> 

<span data-ttu-id="ec5a5-152">Kopplingen grupper gör det enklare toomanage stora distributioner.</span><span class="sxs-lookup"><span data-stu-id="ec5a5-152">Connector groups make it easier toomanage large deployments.</span></span> <span data-ttu-id="ec5a5-153">De kan också förbättra svarstiden för klienter som har program som finns i olika regioner, eftersom du kan skapa grupper för plats-baserad connector tooserve endast lokala program.</span><span class="sxs-lookup"><span data-stu-id="ec5a5-153">They also improve latency for tenants that have applications hosted in different regions, because you can create location-based connector groups tooserve only local applications.</span></span> 

<span data-ttu-id="ec5a5-154">toolearn mer om koppling grupper finns [publicera program på separata nätverk och platser med hjälp av grupper för anslutningstjänsten](active-directory-application-proxy-connectors-azure-portal.md).</span><span class="sxs-lookup"><span data-stu-id="ec5a5-154">toolearn more about connector groups, see [Publish applications on separate networks and locations using connector groups](active-directory-application-proxy-connectors-azure-portal.md).</span></span>

## <a name="security-and-networking"></a><span data-ttu-id="ec5a5-155">Säkerhet och nätverk</span><span class="sxs-lookup"><span data-stu-id="ec5a5-155">Security and networking</span></span>

<span data-ttu-id="ec5a5-156">Kopplingar kan installeras var som helst på hello-nätverk som tillåter dem. toosend begäranden toohello Application Proxy-tjänsten.</span><span class="sxs-lookup"><span data-stu-id="ec5a5-156">Connectors can be installed anywhere on hello network that allows them toosend requests toohello Application Proxy service.</span></span> <span data-ttu-id="ec5a5-157">Vad är viktigt har hello datorn kör hello anslutningstjänsten även åtkomst tooyour appar.</span><span class="sxs-lookup"><span data-stu-id="ec5a5-157">What's important is that hello computer running hello connector also has access tooyour apps.</span></span> <span data-ttu-id="ec5a5-158">Du kan installera kopplingar inuti företagsnätverket eller på en virtuell dator som körs i molnet hello.</span><span class="sxs-lookup"><span data-stu-id="ec5a5-158">You can install connectors inside of your corporate network or on a virtual machine that runs in hello cloud.</span></span> <span data-ttu-id="ec5a5-159">Kopplingar kan köras inom en demilitariserad zon (DMZ), men det är inte nödvändigt eftersom all trafik är utgående så nätverket förblir säkra.</span><span class="sxs-lookup"><span data-stu-id="ec5a5-159">Connectors can run within a demilitarized zone (DMZ), but it's not necessary because all traffic is outbound so your network stays secure.</span></span>

<span data-ttu-id="ec5a5-160">Kopplingar kan bara skicka utgående förfrågningar.</span><span class="sxs-lookup"><span data-stu-id="ec5a5-160">Connectors only send outbound requests.</span></span> <span data-ttu-id="ec5a5-161">hello utgående trafik skickas toohello Application Proxy-tjänsten och toohello publicerade program.</span><span class="sxs-lookup"><span data-stu-id="ec5a5-161">hello outbound traffic is sent toohello Application Proxy service and toohello published applications.</span></span> <span data-ttu-id="ec5a5-162">Du har inte tooopen ingående portar eftersom trafiken flödar båda sätten när en session har upprättats.</span><span class="sxs-lookup"><span data-stu-id="ec5a5-162">You don't have tooopen inbound ports because traffic flows both ways once a session is established.</span></span> <span data-ttu-id="ec5a5-163">Du inte har tooset in belastningsutjämning mellan hello kopplingar eller konfigurera inkommande åtkomst via dina brandväggar.</span><span class="sxs-lookup"><span data-stu-id="ec5a5-163">You don't have tooset up load balancing between hello connectors or configure inbound access through your firewalls.</span></span> 

<span data-ttu-id="ec5a5-164">Mer information om hur du konfigurerar utgående brandväggsregler finns [fungerar med befintliga lokala proxyservrar](application-proxy-working-with-proxy-servers.md).</span><span class="sxs-lookup"><span data-stu-id="ec5a5-164">For more information about configuring outbound firewall rules, see [Work with existing on-premises proxy servers](application-proxy-working-with-proxy-servers.md).</span></span>

<span data-ttu-id="ec5a5-165">Använd hello [Azure AD Application Proxy Connector portar Test Tool](https://aadap-portcheck.connectorporttest.msappproxy.net/) tooverify att din connector kan nå hello Application Proxy-tjänsten.</span><span class="sxs-lookup"><span data-stu-id="ec5a5-165">Use hello [Azure AD Application Proxy Connector Ports Test Tool](https://aadap-portcheck.connectorporttest.msappproxy.net/) tooverify that your connector can reach hello Application Proxy service.</span></span> <span data-ttu-id="ec5a5-166">Se till att hello centrala USA region och hello region närmaste tooyou har alla gröna bockmarkeringarna minimum.</span><span class="sxs-lookup"><span data-stu-id="ec5a5-166">At a minimum, make sure that hello Central US region and hello region closest tooyou have all green checkmarks.</span></span> <span data-ttu-id="ec5a5-167">Utöver det kan innebär mer gröna bockmarkeringarna större flexibilitet.</span><span class="sxs-lookup"><span data-stu-id="ec5a5-167">Beyond that, more green checkmarks means greater resiliency.</span></span> 

## <a name="performance-and-scalability"></a><span data-ttu-id="ec5a5-168">Prestanda och skalbarhet</span><span class="sxs-lookup"><span data-stu-id="ec5a5-168">Performance and scalability</span></span>

<span data-ttu-id="ec5a5-169">Skala för hello Application Proxy-tjänsten är transparent, men skalan är en faktor för kopplingar.</span><span class="sxs-lookup"><span data-stu-id="ec5a5-169">Scale for hello Application Proxy service is transparent, but scale is a factor for connectors.</span></span> <span data-ttu-id="ec5a5-170">Du måste toohave tillräckligt med kopplingar toohandle högtrafik.</span><span class="sxs-lookup"><span data-stu-id="ec5a5-170">You need toohave enough connectors toohandle peak traffic.</span></span> <span data-ttu-id="ec5a5-171">Dock behöver du inte tooconfigure belastningsutjämning eftersom alla kopplingar i en grupp för anslutningen automatiskt belastningsutjämna.</span><span class="sxs-lookup"><span data-stu-id="ec5a5-171">However, you don't need tooconfigure load balancing because all connectors within a connector group automatically load balance.</span></span>

<span data-ttu-id="ec5a5-172">Eftersom kopplingar är tillståndslös påverkas inte av hello antal användare eller sessioner.</span><span class="sxs-lookup"><span data-stu-id="ec5a5-172">Since connectors are stateless, they are not affected by hello number of users or sessions.</span></span> <span data-ttu-id="ec5a5-173">I stället svara de toohello antalet begäranden och deras nyttolastens storlek.</span><span class="sxs-lookup"><span data-stu-id="ec5a5-173">Instead, they respond toohello number of requests and their payload size.</span></span> <span data-ttu-id="ec5a5-174">Med standard webbtrafik, kan en genomsnittlig virtuell dator hantera några tusen begäranden per sekund.</span><span class="sxs-lookup"><span data-stu-id="ec5a5-174">With standard web traffic, an average machine can handle a couple thousand requests per second.</span></span> <span data-ttu-id="ec5a5-175">hello specifik kapacitet beror på hello exakt datorn egenskaper.</span><span class="sxs-lookup"><span data-stu-id="ec5a5-175">hello specific capacity depends on hello exact machine characteristics.</span></span> 

<span data-ttu-id="ec5a5-176">prestanda för hello kopplingen bundna av processor- och nätverk.</span><span class="sxs-lookup"><span data-stu-id="ec5a5-176">hello connector performance is bound by CPU and networking.</span></span> <span data-ttu-id="ec5a5-177">CPU-prestanda krävs för SSL-kryptering och dekryptering, men nätverk är viktiga tooget snabb anslutning toohello program hello online-tjänsten i Azure.</span><span class="sxs-lookup"><span data-stu-id="ec5a5-177">CPU performance is needed for SSL encryption and decryption, while networking is important tooget fast connectivity toohello applications and hello online service in Azure.</span></span>

<span data-ttu-id="ec5a5-178">Minnet är däremot mindre problem för kopplingar.</span><span class="sxs-lookup"><span data-stu-id="ec5a5-178">In contrast, memory is less of an issue for connectors.</span></span> <span data-ttu-id="ec5a5-179">hello onlinetjänst hand tar om mycket hello bearbetning och alla oautentiserad trafik.</span><span class="sxs-lookup"><span data-stu-id="ec5a5-179">hello online service takes care of much of hello processing and all unauthenticated traffic.</span></span> <span data-ttu-id="ec5a5-180">Allt som kan göras i hello molnet görs i hello molnet.</span><span class="sxs-lookup"><span data-stu-id="ec5a5-180">Everything that can be done in hello cloud is done in hello cloud.</span></span> 

<span data-ttu-id="ec5a5-181">En annan faktor som påverkar prestanda är hello kvaliteten på hello nätverk mellan hello kopplingar, inklusive:</span><span class="sxs-lookup"><span data-stu-id="ec5a5-181">Another factor that affects performance is hello quality of hello networking between hello connectors, including:</span></span> 

* <span data-ttu-id="ec5a5-182">**Hej onlinetjänst**: långsam eller lång tidsfördröjning anslutningar toohello Application Proxy-tjänst i Azure påverkan hello prestanda för kopplingen.</span><span class="sxs-lookup"><span data-stu-id="ec5a5-182">**hello online service**: Slow or high-latency connections toohello Application Proxy service in Azure influence hello connector performance.</span></span> <span data-ttu-id="ec5a5-183">Anslut din organisation tooAzure med Express Route hello bästa prestanda.</span><span class="sxs-lookup"><span data-stu-id="ec5a5-183">For hello best performance, connect your organization tooAzure with Express Route.</span></span> <span data-ttu-id="ec5a5-184">I annat fall har teamet nätverk, se till att anslutningar tooAzure hanteras så effektivt som möjligt.</span><span class="sxs-lookup"><span data-stu-id="ec5a5-184">Otherwise, have your networking team ensure that connections tooAzure are handled as efficiently as possible.</span></span> 
* <span data-ttu-id="ec5a5-185">**Hej backend program**: I vissa fall finns proxy mellan hello koppling och hello backend-program som kan långsamma eller förhindra anslutningar.</span><span class="sxs-lookup"><span data-stu-id="ec5a5-185">**hello backend applications**: In some cases, there are additional proxies between hello connector and hello backend applications that can slow or prevent connections.</span></span> <span data-ttu-id="ec5a5-186">tootroubleshoot det här scenariot, öppna en webbläsare från hello-anslutningsservern och försök tooaccess hello program.</span><span class="sxs-lookup"><span data-stu-id="ec5a5-186">tootroubleshoot this scenario, open a browser from hello connector server and try tooaccess hello application.</span></span> <span data-ttu-id="ec5a5-187">Om du kör hello kopplingar i Azure men hello program lokalt, kanske hello upplevelse inte användarna förväntar dig.</span><span class="sxs-lookup"><span data-stu-id="ec5a5-187">If you run hello connectors in Azure but hello applications are on-premises, hello experience might not be what your users expect.</span></span>
* <span data-ttu-id="ec5a5-188">**Hej domänkontrollanter**: om hello kopplingar utför enkel inloggning med hjälp av Kerberos-begränsad delegering kan de kontakta hello domänkontrollanter innan du skickar hello begäran toohello backend.</span><span class="sxs-lookup"><span data-stu-id="ec5a5-188">**hello domain controllers**: If hello connectors perform SSO using Kerberos Constrained Delegation, they contact hello domain controllers before sending hello request toohello backend.</span></span> <span data-ttu-id="ec5a5-189">hello kopplingar har en cache med Kerberos-biljetter, men i en miljö med upptagen hello svarstiderna hos hello domänkontrollanter kan påverka prestanda.</span><span class="sxs-lookup"><span data-stu-id="ec5a5-189">hello connectors have a cache of Kerberos tickets, but in a busy environment hello responsiveness of hello domain controllers can affect performance.</span></span> <span data-ttu-id="ec5a5-190">Det här problemet är vanligare för kopplingar som körs i Azure men kommunicerar med domänkontrollanter som finns lokalt.</span><span class="sxs-lookup"><span data-stu-id="ec5a5-190">This issue is more common for connectors that run in Azure but communicate with domain controllers that are on-premises.</span></span> 

<span data-ttu-id="ec5a5-191">Mer information om hur du optimerar nätverket finns [nätverk topologiöverväganden när du använder Azure Active Directory Application Proxy](application-proxy-network-topology-considerations.md).</span><span class="sxs-lookup"><span data-stu-id="ec5a5-191">For more information about optimizing your network, see [Network topology considerations when using Azure Active Directory Application Proxy](application-proxy-network-topology-considerations.md).</span></span>

## <a name="domain-joining"></a><span data-ttu-id="ec5a5-192">Ansluta till domänen</span><span class="sxs-lookup"><span data-stu-id="ec5a5-192">Domain joining</span></span>

<span data-ttu-id="ec5a5-193">Kopplingar kan köras på en dator som inte är ansluten till domänen.</span><span class="sxs-lookup"><span data-stu-id="ec5a5-193">Connectors can run on a machine that is not domain-joined.</span></span> <span data-ttu-id="ec5a5-194">Om du vill använda enkel inloggning (SSO) tooapplications som använder integrerad autentisering IWA (Windows) måste dock en domänansluten dator.</span><span class="sxs-lookup"><span data-stu-id="ec5a5-194">However, if you want single sign-on (SSO) tooapplications that use Integrated Windows Authentication (IWA), you need a domain-joined machine.</span></span> <span data-ttu-id="ec5a5-195">I det här fallet hello connector datorer måste vara domänanslutna tooa som kan utföra [Kerberos](https://web.mit.edu/kerberos) begränsad delegering åt hello användare för hello publicerade program.</span><span class="sxs-lookup"><span data-stu-id="ec5a5-195">In this case, hello connector machines must be joined tooa domain that can perform [Kerberos](https://web.mit.edu/kerberos) Constrained Delegation on behalf of hello users for hello published applications.</span></span>

<span data-ttu-id="ec5a5-196">Kopplingar kan också vara domänansluten toodomains eller skogar som har ett partiellt förtroende eller endast tooread-domänkontrollanter.</span><span class="sxs-lookup"><span data-stu-id="ec5a5-196">Connectors can also be joined toodomains or forests that have a partial trust, or tooread-only domain controllers.</span></span>

## <a name="connector-deployments-on-hardened-environments"></a><span data-ttu-id="ec5a5-197">Kopplingen distributioner på strikt miljöer</span><span class="sxs-lookup"><span data-stu-id="ec5a5-197">Connector deployments on hardened environments</span></span>

<span data-ttu-id="ec5a5-198">Vanligtvis är enkla connector distribution och kräver ingen särskild konfiguration.</span><span class="sxs-lookup"><span data-stu-id="ec5a5-198">Usually, connector deployment is straightforward and requires no special configuration.</span></span> <span data-ttu-id="ec5a5-199">Det finns emellertid vissa unika villkor som ska övervägas:</span><span class="sxs-lookup"><span data-stu-id="ec5a5-199">However, there are some unique conditions that should be considered:</span></span>

* <span data-ttu-id="ec5a5-200">Organisationer som begränsar hello utgående trafik måste [öppna portar som krävs](active-directory-application-proxy-enable.md#open-your-ports).</span><span class="sxs-lookup"><span data-stu-id="ec5a5-200">Organizations that limit hello outbound traffic must [open required ports](active-directory-application-proxy-enable.md#open-your-ports).</span></span>
* <span data-ttu-id="ec5a5-201">FIPS-kompatibla datorer kan vara nödvändiga toochange deras konfiguration tooallow hello connector processer toogenerate och lagra ett certifikat.</span><span class="sxs-lookup"><span data-stu-id="ec5a5-201">FIPS-compliant machines might be required toochange their configuration tooallow hello connector processes toogenerate and store a certificate.</span></span>
* <span data-ttu-id="ec5a5-202">Organisationer som låser deras miljö baserat på hello processer som problemet hello nätverk begäranden har toomake till att båda connector-tjänster är aktiverade tooaccess alla krävs portar och IP-adresser.</span><span class="sxs-lookup"><span data-stu-id="ec5a5-202">Organizations that lock down their environment based on hello processes that issue hello networking requests have toomake sure that both connector services are enabled tooaccess all required ports and IPs.</span></span>
* <span data-ttu-id="ec5a5-203">I vissa fall utgående vidarebefordra proxyservrar Bryt hello dubbelriktat certifikatautentisering och orsaka hello kommunikation toofail.</span><span class="sxs-lookup"><span data-stu-id="ec5a5-203">In some cases, outbound forward proxies may break hello two-way certificate authentication and cause hello communication toofail.</span></span>

## <a name="connector-authentication"></a><span data-ttu-id="ec5a5-204">Kopplingen autentisering</span><span class="sxs-lookup"><span data-stu-id="ec5a5-204">Connector authentication</span></span>

<span data-ttu-id="ec5a5-205">tooprovide en säker tjänst kopplingar tooauthenticate mot hello-tjänsten, och hello-tjänsten har tooauthenticate mot hello-anslutningen.</span><span class="sxs-lookup"><span data-stu-id="ec5a5-205">tooprovide a secure service, connectors have tooauthenticate toward hello service, and hello service has tooauthenticate toward hello connector.</span></span> <span data-ttu-id="ec5a5-206">Den här autentiseringen görs med hjälp av klient- och servercertifikat när hello kopplingar initierar hello-anslutningen.</span><span class="sxs-lookup"><span data-stu-id="ec5a5-206">This authentication is done using client and server certificates when hello connectors initiate hello connection.</span></span> <span data-ttu-id="ec5a5-207">Det här sättet hello administratörens användarnamn och lösenord lagras inte på hello connector datorn.</span><span class="sxs-lookup"><span data-stu-id="ec5a5-207">This way hello administrator’s username and password are not stored on hello connector machine.</span></span>

<span data-ttu-id="ec5a5-208">hello-certifikat som används är särskilda toohello Application Proxy-tjänsten.</span><span class="sxs-lookup"><span data-stu-id="ec5a5-208">hello certificates used are specific toohello Application Proxy service.</span></span> <span data-ttu-id="ec5a5-209">De skapas under hello första registreringen och automatiskt förnyas hello kopplingar varje par månader.</span><span class="sxs-lookup"><span data-stu-id="ec5a5-209">They get created during hello initial registration and are automatically renewed by hello connectors every couple of months.</span></span> 

<span data-ttu-id="ec5a5-210">Om en anslutning inte är ansluten toohello tjänsten för flera månader, certifikat kan vara inaktuell.</span><span class="sxs-lookup"><span data-stu-id="ec5a5-210">If a connector is not connected toohello service for several months, its certificates may be outdated.</span></span> <span data-ttu-id="ec5a5-211">I det här fallet avinstallera och installera hello connector tootrigger registrering.</span><span class="sxs-lookup"><span data-stu-id="ec5a5-211">In this case, uninstall and reinstall hello connector tootrigger registration.</span></span> <span data-ttu-id="ec5a5-212">Du kan köra hello följande PowerShell-kommandon:</span><span class="sxs-lookup"><span data-stu-id="ec5a5-212">You can run hello following PowerShell commands:</span></span>

```
Import-module AppProxyPSModule
Register-AppProxyConnector
```

## <a name="under-hello-hood"></a><span data-ttu-id="ec5a5-213">Under huven hello</span><span class="sxs-lookup"><span data-stu-id="ec5a5-213">Under hello hood</span></span>

<span data-ttu-id="ec5a5-214">Kopplingar är baserade på Windows Server Web Application Proxy, så de har de flesta hello samma hanteringsverktyg, inklusive Windows-händelseloggar</span><span class="sxs-lookup"><span data-stu-id="ec5a5-214">Connectors are based on Windows Server Web Application Proxy, so they have most of hello same management tools including Windows Event Logs</span></span>

 ![Hantera händelseloggar med hello Loggboken](./media/application-proxy-understand-connectors/event-view-window.png)

<span data-ttu-id="ec5a5-216">och Windows-prestandaräknare.</span><span class="sxs-lookup"><span data-stu-id="ec5a5-216">and Windows performance counters.</span></span> 

 ![Lägg till räknare toohello koppling med hello Prestandaövervakaren](./media/application-proxy-understand-connectors/performance-monitor.png)

<span data-ttu-id="ec5a5-218">hello kopplingar har både admin och sessionen loggar.</span><span class="sxs-lookup"><span data-stu-id="ec5a5-218">hello connectors have both admin and session logs.</span></span> <span data-ttu-id="ec5a5-219">Hej administratörsloggar innehåller viktiga händelser och deras fel.</span><span class="sxs-lookup"><span data-stu-id="ec5a5-219">hello admin logs include key events and their errors.</span></span> <span data-ttu-id="ec5a5-220">hello sessionsloggar innehåller alla hello transaktioner och information om bearbetning.</span><span class="sxs-lookup"><span data-stu-id="ec5a5-220">hello session logs include all hello transactions and their processing details.</span></span> 

<span data-ttu-id="ec5a5-221">toosee hello loggar gå toohello Loggboken, öppna hello **visa** -menyn och aktivera **visa analytiska loggar och felsökningsloggar**.</span><span class="sxs-lookup"><span data-stu-id="ec5a5-221">toosee hello logs, go toohello Event Viewer, open hello **View** menu, and enable **Show analytic and debug logs**.</span></span> <span data-ttu-id="ec5a5-222">Sedan kan aktivera dem toostart samla händelser.</span><span class="sxs-lookup"><span data-stu-id="ec5a5-222">Then, enable them toostart collecting events.</span></span> <span data-ttu-id="ec5a5-223">Dessa loggar visas inte i Web Application Proxy i Windows Server 2012 R2 som hello kopplingar är baserade på en senare version.</span><span class="sxs-lookup"><span data-stu-id="ec5a5-223">These logs do not appear in Web Application Proxy in Windows Server 2012 R2, as hello connectors are based on a more recent version.</span></span>

<span data-ttu-id="ec5a5-224">Du kan undersöka hello tjänstens i fönstret hello hello tillstånd.</span><span class="sxs-lookup"><span data-stu-id="ec5a5-224">You can examine hello state of hello service in hello Services window.</span></span> <span data-ttu-id="ec5a5-225">hello connector består av två Windows-tjänster: hello faktiska koppling och hello Update.</span><span class="sxs-lookup"><span data-stu-id="ec5a5-225">hello connector comprises two Windows Services: hello actual connector, and hello updater.</span></span> <span data-ttu-id="ec5a5-226">Båda måste köra alla hello tid.</span><span class="sxs-lookup"><span data-stu-id="ec5a5-226">Both of them must run all hello time.</span></span>

 ![AzureAD tjänster lokalt](./media/application-proxy-understand-connectors/aad-connector-services.png)

## <a name="next-steps"></a><span data-ttu-id="ec5a5-228">Nästa steg</span><span class="sxs-lookup"><span data-stu-id="ec5a5-228">Next steps</span></span>


* [<span data-ttu-id="ec5a5-229">Publicera program på separata nätverk och platser med hjälp av connector-grupper</span><span class="sxs-lookup"><span data-stu-id="ec5a5-229">Publish applications on separate networks and locations using connector groups</span></span>](active-directory-application-proxy-connectors-azure-portal.md)
* [<span data-ttu-id="ec5a5-230">Arbeta med befintliga lokala proxyservrar</span><span class="sxs-lookup"><span data-stu-id="ec5a5-230">Work with existing on-premises proxy servers</span></span>](application-proxy-working-with-proxy-servers.md)
* [<span data-ttu-id="ec5a5-231">Felsöka Application Proxy och connector</span><span class="sxs-lookup"><span data-stu-id="ec5a5-231">Troubleshoot Application Proxy and connector errors</span></span>](active-directory-application-proxy-troubleshoot.md)
* [<span data-ttu-id="ec5a5-232">Hur toosilently installerar hello Azure AD Application Proxy Connector</span><span class="sxs-lookup"><span data-stu-id="ec5a5-232">How toosilently install hello Azure AD Application Proxy Connector</span></span>](active-directory-application-proxy-silent-installation.md)


---
title: "Azure AD Connect: Uppgradera från en tidigare version | Microsoft Docs"
description: "Förklarar hello olika metoder tooupgrade toohello senaste versionen av Azure Active Directory Connect, inklusive en uppgradering på plats och en öppning migrering."
services: active-directory
documentationcenter: 
author: AndKjell
manager: femila
editor: 
ms.assetid: 31f084d8-2b89-478c-9079-76cf92e6618f
ms.service: active-directory
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: Identity
ms.date: 07/12/2017
ms.author: billmath
ms.openlocfilehash: 57bd5b094654e4983cafa303b6f3daecadafb01c
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: sv-SE
ms.lasthandoff: 10/06/2017
---
# <a name="azure-ad-connect-upgrade-from-a-previous-version-toohello-latest"></a><span data-ttu-id="d740f-103">Azure AD Connect: Uppgradera från en tidigare version toohello senaste</span><span class="sxs-lookup"><span data-stu-id="d740f-103">Azure AD Connect: Upgrade from a previous version toohello latest</span></span>
<span data-ttu-id="d740f-104">Det här avsnittet beskriver hello olika metoder som du kan använda tooupgrade din Azure Active Directory (AD Azure) Anslut installation toohello senaste versionen.</span><span class="sxs-lookup"><span data-stu-id="d740f-104">This topic describes hello different methods that you can use tooupgrade your Azure Active Directory (Azure AD) Connect installation toohello latest release.</span></span> <span data-ttu-id="d740f-105">Vi rekommenderar att du hålla dig uppdaterad med hello versioner av Azure AD Connect.</span><span class="sxs-lookup"><span data-stu-id="d740f-105">We recommend that you keep yourself current with hello releases of Azure AD Connect.</span></span> <span data-ttu-id="d740f-106">Du också använda hello steg i hello [svänga migrering](#swing-migration) avsnittet när du gör en betydande konfigurationsändring.</span><span class="sxs-lookup"><span data-stu-id="d740f-106">You also use hello steps in hello [Swing migration](#swing-migration) section when you make a substantial configuration change.</span></span>

<span data-ttu-id="d740f-107">Om du vill tooupgrade från DirSync, se [uppgradera från Azure AD-synkroniseringsverktyget (DirSync)](active-directory-aadconnect-dirsync-upgrade-get-started.md) i stället.</span><span class="sxs-lookup"><span data-stu-id="d740f-107">If you want tooupgrade from DirSync, see [Upgrade from Azure AD sync tool (DirSync)](active-directory-aadconnect-dirsync-upgrade-get-started.md) instead.</span></span>

<span data-ttu-id="d740f-108">Det finns några olika strategier som du kan använda tooupgrade Azure AD Connect.</span><span class="sxs-lookup"><span data-stu-id="d740f-108">There are a few different strategies that you can use tooupgrade Azure AD Connect.</span></span>

| <span data-ttu-id="d740f-109">Metod</span><span class="sxs-lookup"><span data-stu-id="d740f-109">Method</span></span> | <span data-ttu-id="d740f-110">Beskrivning</span><span class="sxs-lookup"><span data-stu-id="d740f-110">Description</span></span> |
| --- | --- |
| [<span data-ttu-id="d740f-111">Automatisk uppgradering</span><span class="sxs-lookup"><span data-stu-id="d740f-111">Automatic upgrade</span></span>](active-directory-aadconnect-feature-automatic-upgrade.md) |<span data-ttu-id="d740f-112">Detta är hello enklaste sättet för kunder med en snabb installation.</span><span class="sxs-lookup"><span data-stu-id="d740f-112">This is hello easiest method for customers with an express installation.</span></span> |
| [<span data-ttu-id="d740f-113">Uppgradering på plats</span><span class="sxs-lookup"><span data-stu-id="d740f-113">In-place upgrade</span></span>](#in-place-upgrade) |<span data-ttu-id="d740f-114">Om du har en enda server, kan du uppgradera hello installation på plats på hello samma server.</span><span class="sxs-lookup"><span data-stu-id="d740f-114">If you have a single server, you can upgrade hello installation in-place on hello same server.</span></span> |
| [<span data-ttu-id="d740f-115">Öppning migrering</span><span class="sxs-lookup"><span data-stu-id="d740f-115">Swing migration</span></span>](#swing-migration) |<span data-ttu-id="d740f-116">Med två servrar du förbereder en hello servrar med hello ny utgåva eller konfiguration och ändra hello aktiva servern när du är klar.</span><span class="sxs-lookup"><span data-stu-id="d740f-116">With two servers, you can prepare one of hello servers with hello new release or configuration, and change hello active server when you're ready.</span></span> |

<span data-ttu-id="d740f-117">Behörighetsinformation finns i hello [behörigheter som krävs för en uppgradering](active-directory-aadconnect-accounts-permissions.md#upgrade).</span><span class="sxs-lookup"><span data-stu-id="d740f-117">For permissions information, see hello [permissions required for an upgrade](active-directory-aadconnect-accounts-permissions.md#upgrade).</span></span>

> [!NOTE]
> <span data-ttu-id="d740f-118">När du har aktiverat din nya Azure AD Connect-servern toostart synkroniserar ändringar tooAzure AD, måste du inte återställa toousing DirSync eller Azure AD Sync. Nedgradering från Azure AD Connect toolegacy klienter, inklusive DirSync och Azure AD Sync stöds inte och kan leda tooissues, till exempel förlust av data i Azure AD.</span><span class="sxs-lookup"><span data-stu-id="d740f-118">After you've enabled your new Azure AD Connect server toostart synchronizing changes tooAzure AD, you must not roll back toousing DirSync or Azure AD Sync. Downgrading from Azure AD Connect toolegacy clients, including DirSync and Azure AD Sync, isn't supported and can lead tooissues such as data loss in Azure AD.</span></span>

## <a name="in-place-upgrade"></a><span data-ttu-id="d740f-119">Uppgradering på plats</span><span class="sxs-lookup"><span data-stu-id="d740f-119">In-place upgrade</span></span>
<span data-ttu-id="d740f-120">En uppgradering på plats fungerar för att flytta från Azure AD Sync eller Azure AD Connect.</span><span class="sxs-lookup"><span data-stu-id="d740f-120">An in-place upgrade works for moving from Azure AD Sync or Azure AD Connect.</span></span> <span data-ttu-id="d740f-121">Det fungerar inte för att flytta från DirSync eller för en lösning med Forefront Identity Manager (FIM) + Azure AD-koppling.</span><span class="sxs-lookup"><span data-stu-id="d740f-121">It doesn't work for moving from DirSync or for a solution with Forefront Identity Manager (FIM) + Azure AD Connector.</span></span>

<span data-ttu-id="d740f-122">Den här metoden är att föredra när du har en enda server och på mindre än 100 000 objekt.</span><span class="sxs-lookup"><span data-stu-id="d740f-122">This method is preferred when you have a single server and less than about 100,000 objects.</span></span> <span data-ttu-id="d740f-123">Om det finns ändringar toohello out-of-box sync regler, sker en fullständig import och en fullständig synkronisering efter hello uppgraderingen.</span><span class="sxs-lookup"><span data-stu-id="d740f-123">If there are any changes toohello out-of-box sync rules, a full import and full synchronization occur after hello upgrade.</span></span> <span data-ttu-id="d740f-124">Den här metoden garanterar att nya hello-konfigurationen är tillämpade tooall befintliga objekt i hello system.</span><span class="sxs-lookup"><span data-stu-id="d740f-124">This method ensures that hello new configuration is applied tooall existing objects in hello system.</span></span> <span data-ttu-id="d740f-125">Det här körs kan ta några timmar, beroende på hello antalet objekt i omfånget för hello Synkroniseringsmotorn.</span><span class="sxs-lookup"><span data-stu-id="d740f-125">This run might take a few hours, depending on hello number of objects that are in scope of hello sync engine.</span></span> <span data-ttu-id="d740f-126">hello normal delta schemaläggare för synkronisering (som synkroniserar var 30: e minut som standard) har pausats, men Lösenordssynkronisering fortsätter.</span><span class="sxs-lookup"><span data-stu-id="d740f-126">hello normal delta synchronization scheduler (which synchronizes every 30 minutes by default) is suspended, but password synchronization continues.</span></span> <span data-ttu-id="d740f-127">Du kan även göra hello platsuppgradering när en helg.</span><span class="sxs-lookup"><span data-stu-id="d740f-127">You might consider doing hello in-place upgrade during a weekend.</span></span> <span data-ttu-id="d740f-128">Om det finns ingen ändringar toohello out-of-box-konfiguration med hello nya Azure AD Connect-versionen, sedan en normal import/Deltasynkronisering startar i stället.</span><span class="sxs-lookup"><span data-stu-id="d740f-128">If there are no changes toohello out-of-box configuration with hello new Azure AD Connect release, then a normal delta import/sync starts instead.</span></span>  
![Uppgradering på plats](./media/active-directory-aadconnect-upgrade-previous-version/inplaceupgrade.png)

<span data-ttu-id="d740f-130">Om du har gjort ändringar toohello out-of-box Synkroniseringsregler sedan dessa regler är inställda tillbaka toohello standardkonfigurationen vid uppgradering.</span><span class="sxs-lookup"><span data-stu-id="d740f-130">If you've made changes toohello out-of-box synchronization rules, then these rules are set back toohello default configuration on upgrade.</span></span> <span data-ttu-id="d740f-131">toomake till att konfigurationen förblir mellan uppgraderingar, se till att du gör ändringar som de är beskrivs i [bästa praxis för att ändra standardkonfigurationen för hello](active-directory-aadconnectsync-best-practices-changing-default-configuration.md).</span><span class="sxs-lookup"><span data-stu-id="d740f-131">toomake sure that your configuration is kept between upgrades, make sure that you make changes as they're described in [Best practices for changing hello default configuration](active-directory-aadconnectsync-best-practices-changing-default-configuration.md).</span></span>

<span data-ttu-id="d740f-132">Under uppgradering på plats, kanske ändringar som kräver specifika synkronisering aktiviteter (inklusive fullständig Import steg och fullständig synkronisering) toobe utförs efter uppgraderingen har slutförts.</span><span class="sxs-lookup"><span data-stu-id="d740f-132">During in-place upgrade, there may be changes introduced that require specific synchronization activities (including Full Import step and Full Synchronization step) toobe executed after upgrade completes.</span></span> <span data-ttu-id="d740f-133">toodefer sådana aktiviteter finns toosection [hur toodefer fullständig synkronisering efter uppgraderingen](#how-to-defer-full-synchronization-after-upgrade).</span><span class="sxs-lookup"><span data-stu-id="d740f-133">toodefer such activities, refer toosection [How toodefer full synchronization after upgrade](#how-to-defer-full-synchronization-after-upgrade).</span></span>

## <a name="swing-migration"></a><span data-ttu-id="d740f-134">Swingmigrering</span><span class="sxs-lookup"><span data-stu-id="d740f-134">Swing migration</span></span>
<span data-ttu-id="d740f-135">Om du har en komplex distribution eller många objekt, kan det vara opraktiska toodo uppgradering på plats i hello live-system.</span><span class="sxs-lookup"><span data-stu-id="d740f-135">If you have a complex deployment or many objects, it might be impractical toodo an in-place upgrade on hello live system.</span></span> <span data-ttu-id="d740f-136">Den här processen kan ta flera dagar--för vissa kunder och under denna tid kan ingen deltaändringar bearbetas.</span><span class="sxs-lookup"><span data-stu-id="d740f-136">For some customers, this process might take multiple days--and during this time, no delta changes are processed.</span></span> <span data-ttu-id="d740f-137">Du kan också använda den här metoden när du planerar toomake betydande ändringar tooyour konfiguration och du vill tootry dem ut innan de är vidare toohello moln.</span><span class="sxs-lookup"><span data-stu-id="d740f-137">You can also use this method when you plan toomake substantial changes tooyour configuration and you want tootry them out before they're pushed toohello cloud.</span></span>

<span data-ttu-id="d740f-138">hello rekommenderad metod för dessa scenarier är toouse en öppning migrering.</span><span class="sxs-lookup"><span data-stu-id="d740f-138">hello recommended method for these scenarios is toouse a swing migration.</span></span> <span data-ttu-id="d740f-139">Du måste (minst) två servrar – en active server och en fristående server.</span><span class="sxs-lookup"><span data-stu-id="d740f-139">You need (at least) two servers--one active server and one staging server.</span></span> <span data-ttu-id="d740f-140">hello aktiva servern (visas med fasta blå rader i följande bild hello) ansvarar för hello aktiv produktion.</span><span class="sxs-lookup"><span data-stu-id="d740f-140">hello active server (shown with solid blue lines in hello following picture) is responsible for hello active production load.</span></span> <span data-ttu-id="d740f-141">hello mellanlagring server (visas med streckad lila) har förberetts med hello ny utgåva eller konfiguration.</span><span class="sxs-lookup"><span data-stu-id="d740f-141">hello staging server (shown with dashed purple lines) is prepared with hello new release or configuration.</span></span> <span data-ttu-id="d740f-142">Den här servern har aktiverats när den är helt klar.</span><span class="sxs-lookup"><span data-stu-id="d740f-142">When it's fully ready, this server is made active.</span></span> <span data-ttu-id="d740f-143">hello tidigare active server, som nu har hello gamla version eller konfiguration installerad, görs till hello fristående server och har uppgraderats.</span><span class="sxs-lookup"><span data-stu-id="d740f-143">hello previous active server, which now has hello old version or configuration installed, is made into hello staging server and is upgraded.</span></span>

<span data-ttu-id="d740f-144">hello två servrar kan använda olika versioner.</span><span class="sxs-lookup"><span data-stu-id="d740f-144">hello two servers can use different versions.</span></span> <span data-ttu-id="d740f-145">Till exempel hello active server som du planerar toodecommission kan använda Azure AD Sync och hello nya testserver kan använda Azure AD Connect.</span><span class="sxs-lookup"><span data-stu-id="d740f-145">For example, hello active server that you plan toodecommission can use Azure AD Sync, and hello new staging server can use Azure AD Connect.</span></span> <span data-ttu-id="d740f-146">Om du använder öppning migrering toodevelop hello en ny konfiguration, det är en bra idé toohave hello samma versioner på två servrar.</span><span class="sxs-lookup"><span data-stu-id="d740f-146">If you use swing migration toodevelop a new configuration, it's a good idea toohave hello same versions on hello two servers.</span></span>  
![Server för Förproduktion](./media/active-directory-aadconnect-upgrade-previous-version/stagingserver1.png)

> [!NOTE]
> <span data-ttu-id="d740f-148">Vissa kunder föredrar toohave tre eller fyra servrar för det här scenariot.</span><span class="sxs-lookup"><span data-stu-id="d740f-148">Some customers prefer toohave three or four servers for this scenario.</span></span> <span data-ttu-id="d740f-149">När hello mellanlagring servern har uppgraderats kan du inte har en reservserver för [katastrofåterställning](active-directory-aadconnectsync-operations.md#disaster-recovery).</span><span class="sxs-lookup"><span data-stu-id="d740f-149">When hello staging server is upgraded, you don't have a backup server for [disaster recovery](active-directory-aadconnectsync-operations.md#disaster-recovery).</span></span> <span data-ttu-id="d740f-150">Med tre eller fyra servrar, kan du förbereda en uppsättning primära/vänteläge-servrar med nya hello-versionen, vilket garanterar att det alltid är en testserver som är redo tootake över.</span><span class="sxs-lookup"><span data-stu-id="d740f-150">With three or four servers, you can prepare one set of primary/standby servers with hello new version, which ensures that there is always a staging server that's ready tootake over.</span></span>

<span data-ttu-id="d740f-151">De här stegen fungerar också toomove från Azure AD Sync eller en lösning med FIM + Azure AD-koppling.</span><span class="sxs-lookup"><span data-stu-id="d740f-151">These steps also work toomove from Azure AD Sync or a solution with FIM + Azure AD Connector.</span></span> <span data-ttu-id="d740f-152">De här stegen fungerar inte för DirSync, men hello samma öppning migreringsmetod (kallas även parallell distribution) med steg för DirSync finns i [uppgradera Azure Active Directory sync (DirSync)](active-directory-aadconnect-dirsync-upgrade-get-started.md).</span><span class="sxs-lookup"><span data-stu-id="d740f-152">These steps don't work for DirSync, but hello same swing migration method (also called parallel deployment) with steps for DirSync is in [Upgrade Azure Active Directory sync (DirSync)](active-directory-aadconnect-dirsync-upgrade-get-started.md).</span></span>

### <a name="use-a-swing-migration-tooupgrade"></a><span data-ttu-id="d740f-153">Använd en öppning migrering tooupgrade</span><span class="sxs-lookup"><span data-stu-id="d740f-153">Use a swing migration tooupgrade</span></span>
1. <span data-ttu-id="d740f-154">Om du använder Azure AD Connect på både servrar och planera tooonly gör en konfigurationsändring, se till att din aktiva server och fristående server är både med hello samma version.</span><span class="sxs-lookup"><span data-stu-id="d740f-154">If you use Azure AD Connect on both servers and plan tooonly make a configuration change, make sure that your active server and staging server are both using hello same version.</span></span> <span data-ttu-id="d740f-155">Det gör det enklare toocompare skillnader senare.</span><span class="sxs-lookup"><span data-stu-id="d740f-155">That makes it easier toocompare differences later.</span></span> <span data-ttu-id="d740f-156">Om du uppgraderar från Azure AD Sync har olika versioner av dessa servrar.</span><span class="sxs-lookup"><span data-stu-id="d740f-156">If you're upgrading from Azure AD Sync, then these servers have different versions.</span></span> <span data-ttu-id="d740f-157">Om du uppgraderar från en äldre version av Azure AD Connect är det en bra idé toostart med hello två servrar som är med hjälp av hello samma version, men det krävs inte.</span><span class="sxs-lookup"><span data-stu-id="d740f-157">If you're upgrading from an older version of Azure AD Connect, it's a good idea toostart with hello two servers that are using hello same version, but it's not required.</span></span>
2. <span data-ttu-id="d740f-158">Du har gjort en anpassad konfiguration testservern inte har den och gör om hello under [flytta en anpassad konfiguration från hello active server toohello mellanlagring server](#move-custom-configuration-from-active-to-staging-server).</span><span class="sxs-lookup"><span data-stu-id="d740f-158">If you've made a custom configuration and your staging server doesn't have it, follow hello steps under [Move a custom configuration from hello active server toohello staging server](#move-custom-configuration-from-active-to-staging-server).</span></span>
3. <span data-ttu-id="d740f-159">Uppgradera hello mellanlagring server toohello senaste versionen om du uppgraderar från en tidigare version av Azure AD Connect.</span><span class="sxs-lookup"><span data-stu-id="d740f-159">If you're upgrading from an earlier release of Azure AD Connect, upgrade hello staging server toohello latest version.</span></span> <span data-ttu-id="d740f-160">Om du flyttar från Azure AD Sync, installera Azure AD Connect på testservern.</span><span class="sxs-lookup"><span data-stu-id="d740f-160">If you're moving from Azure AD Sync, then install Azure AD Connect on your staging server.</span></span>
4. <span data-ttu-id="d740f-161">För att hello sync motorn som kör fullständig import och fullständig synkronisering på testservern.</span><span class="sxs-lookup"><span data-stu-id="d740f-161">Let hello sync engine run full import and full synchronization on your staging server.</span></span>
5. <span data-ttu-id="d740f-162">Verifiera den nya konfigurationen hello inte orsakar ändringar oväntat med hello åtgärder under ”verifiera” i [Kontrollera hello konfigurationen för en server](active-directory-aadconnectsync-operations.md#verify-the-configuration-of-a-server).</span><span class="sxs-lookup"><span data-stu-id="d740f-162">Verify that hello new configuration didn't cause any unexpected changes by using hello steps under "Verify" in [Verify hello configuration of a server](active-directory-aadconnectsync-operations.md#verify-the-configuration-of-a-server).</span></span> <span data-ttu-id="d740f-163">Om något inte som förväntat, korrekt, kör hello import och synkronisering och verifiera hello data förrän den ser bra ut, genom att följa stegen i hello.</span><span class="sxs-lookup"><span data-stu-id="d740f-163">If something isn't as expected, correct it, run hello import and sync, and verify hello data until it looks good, by following hello steps.</span></span>
6. <span data-ttu-id="d740f-164">Växla hello mellanlagring server toobe hello aktiva servern.</span><span class="sxs-lookup"><span data-stu-id="d740f-164">Switch hello staging server toobe hello active server.</span></span> <span data-ttu-id="d740f-165">Detta är hello sista steget ”växel active server” i [Kontrollera hello konfigurationen för en server](active-directory-aadconnectsync-operations.md#verify-the-configuration-of-a-server).</span><span class="sxs-lookup"><span data-stu-id="d740f-165">This is hello final step "Switch active server" in [Verify hello configuration of a server](active-directory-aadconnectsync-operations.md#verify-the-configuration-of-a-server).</span></span>
7. <span data-ttu-id="d740f-166">Uppgradera hello-server som är nu i Förproduktion läge toohello senaste versionen om du uppgraderar Azure AD Connect.</span><span class="sxs-lookup"><span data-stu-id="d740f-166">If you're upgrading Azure AD Connect, upgrade hello server that's now in staging mode toohello latest release.</span></span> <span data-ttu-id="d740f-167">Följ samma steg som före tooget hello data och konfigurationsinformation uppgraderas hello.</span><span class="sxs-lookup"><span data-stu-id="d740f-167">Follow hello same steps as before tooget hello data and configuration upgraded.</span></span> <span data-ttu-id="d740f-168">Om du har uppgraderat från Azure AD Sync kan nu stänga av och inaktivera den gamla servern.</span><span class="sxs-lookup"><span data-stu-id="d740f-168">If you upgraded from Azure AD Sync, you can now turn off and decommission your old server.</span></span>

### <a name="move-a-custom-configuration-from-hello-active-server-toohello-staging-server"></a><span data-ttu-id="d740f-169">Flytta en anpassad konfiguration från hello active toohello fristående server</span><span class="sxs-lookup"><span data-stu-id="d740f-169">Move a custom configuration from hello active server toohello staging server</span></span>
<span data-ttu-id="d740f-170">Om du har gjort ändringar toohello active konfigurationsservern måste toomake Kontrollera som hello samma ändras tillämpade toohello mellanlagring av servern.</span><span class="sxs-lookup"><span data-stu-id="d740f-170">If you've made configuration changes toohello active server, you need toomake sure that hello same changes are applied toohello staging server.</span></span> <span data-ttu-id="d740f-171">toohelp med den här flyttar du kan använda hello [Azure AD Connect configuration Dokumenteraren](https://github.com/Microsoft/AADConnectConfigDocumenter).</span><span class="sxs-lookup"><span data-stu-id="d740f-171">toohelp with this move, you can use hello [Azure AD Connect configuration documenter](https://github.com/Microsoft/AADConnectConfigDocumenter).</span></span>

<span data-ttu-id="d740f-172">Du kan flytta hello anpassade sync regler som du har skapat med hjälp av PowerShell.</span><span class="sxs-lookup"><span data-stu-id="d740f-172">You can move hello custom sync rules that you've created by using PowerShell.</span></span> <span data-ttu-id="d740f-173">Du måste tillämpa andra ändringar hello likadant på både system och du kan inte migrera hello ändringar.</span><span class="sxs-lookup"><span data-stu-id="d740f-173">You must apply other changes hello same way on both systems, and you can't migrate hello changes.</span></span> <span data-ttu-id="d740f-174">Hej [configuration Dokumenteraren](https://github.com/Microsoft/AADConnectConfigDocumenter) kan hjälpa dig att jämföra hello två system toomake att de är identiska.</span><span class="sxs-lookup"><span data-stu-id="d740f-174">hello [configuration documenter](https://github.com/Microsoft/AADConnectConfigDocumenter) can help you comparing hello two systems toomake sure they are identical.</span></span> <span data-ttu-id="d740f-175">hello-verktyget kan också om du vill automatisera hello stegen i det här avsnittet.</span><span class="sxs-lookup"><span data-stu-id="d740f-175">hello tool can also help in automating hello steps found in this section.</span></span>

<span data-ttu-id="d740f-176">Du behöver tooconfigure hello följande saker hello samma sätt på båda servrarna:</span><span class="sxs-lookup"><span data-stu-id="d740f-176">You need tooconfigure hello following things hello same way on both servers:</span></span>

* <span data-ttu-id="d740f-177">Anslutningen toohello samma skogar</span><span class="sxs-lookup"><span data-stu-id="d740f-177">Connection toohello same forests</span></span>
* <span data-ttu-id="d740f-178">Alla domän- och organisationsenhetsfiltrering</span><span class="sxs-lookup"><span data-stu-id="d740f-178">Any domain and OU filtering</span></span>
* <span data-ttu-id="d740f-179">Hej samma valfria funktioner, till exempel Lösenordssynkronisering och tillbakaskrivning av lösenord</span><span class="sxs-lookup"><span data-stu-id="d740f-179">hello same optional features, such as password sync and password writeback</span></span>

<span data-ttu-id="d740f-180">**Flytta anpassade Synkroniseringsregler**</span><span class="sxs-lookup"><span data-stu-id="d740f-180">**Move custom synchronization rules**</span></span>  
<span data-ttu-id="d740f-181">toomove anpassade Synkroniseringsregler hello följande:</span><span class="sxs-lookup"><span data-stu-id="d740f-181">toomove custom synchronization rules, do hello following:</span></span>

1. <span data-ttu-id="d740f-182">Öppna **Synchronization regler Editor** på din aktiva server.</span><span class="sxs-lookup"><span data-stu-id="d740f-182">Open **Synchronization Rules Editor** on your active server.</span></span>
2. <span data-ttu-id="d740f-183">Välj en anpassad regel.</span><span class="sxs-lookup"><span data-stu-id="d740f-183">Select a custom rule.</span></span> <span data-ttu-id="d740f-184">Klicka på **exportera**.</span><span class="sxs-lookup"><span data-stu-id="d740f-184">Click **Export**.</span></span> <span data-ttu-id="d740f-185">Detta öppnar ett fönster för anteckningar.</span><span class="sxs-lookup"><span data-stu-id="d740f-185">This brings up a Notepad window.</span></span> <span data-ttu-id="d740f-186">Spara hello temporär fil med tillägget PS1.</span><span class="sxs-lookup"><span data-stu-id="d740f-186">Save hello temporary file with a PS1 extension.</span></span> <span data-ttu-id="d740f-187">Detta gör att det PowerShell-skript.</span><span class="sxs-lookup"><span data-stu-id="d740f-187">This makes it a PowerShell script.</span></span> <span data-ttu-id="d740f-188">Kopiera hello PS1 filen toohello mellanlagring av servern.</span><span class="sxs-lookup"><span data-stu-id="d740f-188">Copy hello PS1 file toohello staging server.</span></span>  
   <span data-ttu-id="d740f-189">![Synkronisera regeln export](./media/active-directory-aadconnect-upgrade-previous-version/exportrule.png)</span><span class="sxs-lookup"><span data-stu-id="d740f-189">![Sync rule export](./media/active-directory-aadconnect-upgrade-previous-version/exportrule.png)</span></span>
3. <span data-ttu-id="d740f-190">hello Connector GUID skiljer sig åt på hello mellanlagring server och du måste ändra den.</span><span class="sxs-lookup"><span data-stu-id="d740f-190">hello Connector GUID is different on hello staging server, and you must change it.</span></span> <span data-ttu-id="d740f-191">tooget hello GUID, starta **Synchronization regler Editor**, väljer du något av hello out-of-box regler som representerar hello samma anslutna system och klicka på **exportera**.</span><span class="sxs-lookup"><span data-stu-id="d740f-191">tooget hello GUID, start **Synchronization Rules Editor**, select one of hello out-of-box rules that represent hello same connected system, and click **Export**.</span></span> <span data-ttu-id="d740f-192">Ersätt hello GUID i PS1-fil med hello GUID från hello mellanlagring av servern.</span><span class="sxs-lookup"><span data-stu-id="d740f-192">Replace hello GUID in your PS1 file with hello GUID from hello staging server.</span></span>
4. <span data-ttu-id="d740f-193">I PowerShell-Kommandotolken kör du hello PS1-fil.</span><span class="sxs-lookup"><span data-stu-id="d740f-193">In a PowerShell prompt, run hello PS1 file.</span></span> <span data-ttu-id="d740f-194">Detta skapar hello anpassade synkroniseringsregeln på hello mellanlagring av servern.</span><span class="sxs-lookup"><span data-stu-id="d740f-194">This creates hello custom synchronization rule on hello staging server.</span></span>
5. <span data-ttu-id="d740f-195">Upprepa detta för alla anpassade regler.</span><span class="sxs-lookup"><span data-stu-id="d740f-195">Repeat this for all your custom rules.</span></span>

## <a name="how-toodefer-full-synchronization-after-upgrade"></a><span data-ttu-id="d740f-196">Hur toodefer fullständig synkronisering efter uppgradering</span><span class="sxs-lookup"><span data-stu-id="d740f-196">How toodefer full synchronization after upgrade</span></span>
<span data-ttu-id="d740f-197">Under uppgradering på plats, kanske ändringar som kräver specifika synkronisering aktiviteter (inklusive fullständig Import steg och fullständig synkronisering) toobe körs.</span><span class="sxs-lookup"><span data-stu-id="d740f-197">During in-place upgrade, there may be changes introduced that require specific synchronization activities (including Full Import step and Full Synchronization step) toobe executed.</span></span> <span data-ttu-id="d740f-198">Exempelvis kräver connector schemaändringar **fullständig import** steg och out-of-box synkronisering regeln kräver **fullständig synkronisering** steg toobe utfördes berörda kopplingar.</span><span class="sxs-lookup"><span data-stu-id="d740f-198">For example, connector schema changes require **full import** step and out-of-box synchronization rule changes require **full synchronization** step toobe executed on affected connectors.</span></span> <span data-ttu-id="d740f-199">Under uppgraderingen, Azure AD Connect avgör vilka synkronisering aktiviteter som krävs och registrerar dem som *åsidosätter*.</span><span class="sxs-lookup"><span data-stu-id="d740f-199">During upgrade, Azure AD Connect determines what synchronization activities are required and records them as *overrides*.</span></span> <span data-ttu-id="d740f-200">I följande synkroniseringscykel hello, hello synkronisering scheduler hämtar dessa åsidosättningar och kör dem..</span><span class="sxs-lookup"><span data-stu-id="d740f-200">In hello following synchronization cycle, hello synchronization scheduler picks up these overrides and executes them.</span></span> <span data-ttu-id="d740f-201">När en åsidosättning har körts tas bort.</span><span class="sxs-lookup"><span data-stu-id="d740f-201">Once an override is successfully executed, it is removed.</span></span>

<span data-ttu-id="d740f-202">Det kan finnas situationer där du inte vill att dessa åsidosättningar tootake plats omedelbart efter uppgraderingen.</span><span class="sxs-lookup"><span data-stu-id="d740f-202">There may be situations where you do not want these overrides tootake place immediately after upgrade.</span></span> <span data-ttu-id="d740f-203">Till exempel du har ett stort antal synkroniserade objekt och du vill att dessa synkronisering steg toooccur efter kontorstid.</span><span class="sxs-lookup"><span data-stu-id="d740f-203">For example, you have numerous synchronized objects and you would like these synchronization steps toooccur after business hours.</span></span> <span data-ttu-id="d740f-204">tooremove dessa åsidosättningar:</span><span class="sxs-lookup"><span data-stu-id="d740f-204">tooremove these overrides:</span></span>

1. <span data-ttu-id="d740f-205">Under uppgraderingen **avmarkera** hello alternativet **starta synkroniseringsprocessen hello när konfigurationen är klar**.</span><span class="sxs-lookup"><span data-stu-id="d740f-205">During upgrade, **uncheck** hello option **Start hello synchronization process when configuration completes**.</span></span> <span data-ttu-id="d740f-206">Detta inaktiverar hello synkronisering Schemaläggaren och förhindrar att synkroniseringscykel äger rum automatiskt innan hello åsidosättningar tas bort.</span><span class="sxs-lookup"><span data-stu-id="d740f-206">This disables hello synchronization scheduler and prevents synchronization cycle from taking place automatically before hello overrides are removed.</span></span>

   ![DisableFullSyncAfterUpgrade](./media/active-directory-aadconnect-upgrade-previous-version/disablefullsync01.png)

2. <span data-ttu-id="d740f-208">När uppgraderingen är klar kör du hello följande cmdlet toofind reda på vilka åsidosättningar har lagts till:`Get-ADSyncSchedulerConnectorOverride | fl`</span><span class="sxs-lookup"><span data-stu-id="d740f-208">After upgrade completes, run hello following cmdlet toofind out what overrides have been added: `Get-ADSyncSchedulerConnectorOverride | fl`</span></span>

   >[!NOTE]
   > <span data-ttu-id="d740f-209">hello åsidosättningar är specifika för anslutningen.</span><span class="sxs-lookup"><span data-stu-id="d740f-209">hello overrides are connector-specific.</span></span> <span data-ttu-id="d740f-210">I hello följande exempel, fullständig Import steg och fullständig synkronisering lagts tooboth hello lokala AD-koppling och Azure AD-koppling.</span><span class="sxs-lookup"><span data-stu-id="d740f-210">In hello following example, Full Import step and Full Synchronization step have been added tooboth hello on-premises AD Connector and Azure AD Connector.</span></span>

   ![DisableFullSyncAfterUpgrade](./media/active-directory-aadconnect-upgrade-previous-version/disablefullsync02.png)

3. <span data-ttu-id="d740f-212">Notera hello befintliga åsidosättningar som lagts till.</span><span class="sxs-lookup"><span data-stu-id="d740f-212">Note down hello existing overrides that have been added.</span></span>
   
4. <span data-ttu-id="d740f-213">tooremove hello åsidosättningar för både fullständig import och fullständig synkronisering på en godtycklig koppling kör hello följande cmdlet:`Set-ADSyncSchedulerConnectorOverride -ConnectorIdentifier <Guid-of-ConnectorIdentifier> -FullImportRequired $false -FullSyncRequired $false`</span><span class="sxs-lookup"><span data-stu-id="d740f-213">tooremove hello overrides for both full import and full synchronization on an arbitrary connector, run hello following cmdlet: `Set-ADSyncSchedulerConnectorOverride -ConnectorIdentifier <Guid-of-ConnectorIdentifier> -FullImportRequired $false -FullSyncRequired $false`</span></span>

   <span data-ttu-id="d740f-214">tooremove hello åsidosättningar för alla kopplingar kör hello följande PowerShell-skript:</span><span class="sxs-lookup"><span data-stu-id="d740f-214">tooremove hello overrides on all connectors, execute hello following PowerShell script:</span></span>

   ```
   foreach ($connectorOverride in Get-ADSyncSchedulerConnectorOverride)
   {
       Set-ADSyncSchedulerConnectorOverride -ConnectorIdentifier $connectorOverride.ConnectorIdentifier.Guid -FullSyncRequired $false -FullImportRequired $false
   }
   ```

5. <span data-ttu-id="d740f-215">tooresume hello scheduler, kör följande cmdlet hello:`Set-ADSyncScheduler -SyncCycleEnabled $true`</span><span class="sxs-lookup"><span data-stu-id="d740f-215">tooresume hello scheduler, run hello following cmdlet: `Set-ADSyncScheduler -SyncCycleEnabled $true`</span></span>

   >[!IMPORTANT]
   > <span data-ttu-id="d740f-216">Kom ihåg synkroniseringssteg i tooexecute hello krävs när det tidigaste dig.</span><span class="sxs-lookup"><span data-stu-id="d740f-216">Remember tooexecute hello required synchronization steps at your earliest convenience.</span></span> <span data-ttu-id="d740f-217">Du kan manuellt utföra dessa steg med hello Synchronization Service Manager eller Lägg till hello åsidosättningar tillbaka cmdleten hello Set-ADSyncSchedulerConnectorOverride.</span><span class="sxs-lookup"><span data-stu-id="d740f-217">You can either manually execute these steps using hello Synchronization Service Manager or add hello overrides back using hello Set-ADSyncSchedulerConnectorOverride cmdlet.</span></span>

<span data-ttu-id="d740f-218">tooadd hello åsidosättningar för både fullständig import och fullständig synkronisering på en godtycklig koppling kör hello följande cmdlet:`Set-ADSyncSchedulerConnectorOverride -ConnectorIdentifier <Guid> -FullImportRequired $true -FullSyncRequired $true`</span><span class="sxs-lookup"><span data-stu-id="d740f-218">tooadd hello overrides for both full import and full synchronization on an arbitrary connector, run hello following cmdlet:  `Set-ADSyncSchedulerConnectorOverride -ConnectorIdentifier <Guid> -FullImportRequired $true -FullSyncRequired $true`</span></span>

## <a name="next-steps"></a><span data-ttu-id="d740f-219">Nästa steg</span><span class="sxs-lookup"><span data-stu-id="d740f-219">Next steps</span></span>
<span data-ttu-id="d740f-220">Lär dig mer om [integrera dina lokala identiteter med Azure Active Directory](active-directory-aadconnect.md).</span><span class="sxs-lookup"><span data-stu-id="d740f-220">Learn more about [integrating your on-premises identities with Azure Active Directory](active-directory-aadconnect.md).</span></span>

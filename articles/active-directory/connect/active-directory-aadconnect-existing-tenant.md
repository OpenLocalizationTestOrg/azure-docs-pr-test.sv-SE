---
title: 'Azure AD Connect: Om du redan har Azure AD | Microsoft Docs'
description: "Det här avsnittet beskrivs hur toouse ansluter när du har en befintlig Azure AD-klient."
services: active-directory
documentationcenter: 
author: andkjell
manager: femila
editor: 
ms.assetid: 
ms.service: active-directory
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 07/13/2017
ms.author: billmath
ms.openlocfilehash: f7b166e9e85c1f03330e8e0074d4afa4036738c2
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: sv-SE
ms.lasthandoff: 10/06/2017
---
# <a name="azure-ad-connect-when-you-have-an-existent-tenant"></a><span data-ttu-id="50702-103">Azure AD Connect: När du har en befintliga klient</span><span class="sxs-lookup"><span data-stu-id="50702-103">Azure AD Connect: When you have an existent tenant</span></span>
<span data-ttu-id="50702-104">De flesta av hello avsnitt om hur toouse Azure AD Connect förutsätter att du börjar med en ny Azure AD-klient och att det finns inga användare eller det andra objekt.</span><span class="sxs-lookup"><span data-stu-id="50702-104">Most of hello topics for how toouse Azure AD Connect assumes you start with a new Azure AD tenant and that there are no users or other objects there.</span></span> <span data-ttu-id="50702-105">Men om du har börjat med Azure AD-klient fylls med användare och andra objekt, och nu vill toouse Connect, sedan det här avsnittet är för dig.</span><span class="sxs-lookup"><span data-stu-id="50702-105">But if you have started with an Azure AD tenant, populated it with users and other objects, and now want toouse Connect, then this topic is for you.</span></span>

## <a name="hello-basics"></a><span data-ttu-id="50702-106">hello-grunderna</span><span class="sxs-lookup"><span data-stu-id="50702-106">hello basics</span></span>
<span data-ttu-id="50702-107">Ett objekt i Azure AD antingen lärt dig i hello molnet (Azure AD) eller lokalt.</span><span class="sxs-lookup"><span data-stu-id="50702-107">An object in Azure AD is either mastered in hello cloud (Azure AD) or on-premises.</span></span> <span data-ttu-id="50702-108">För ett enskilt objekt kan du hantera vissa attribut för lokala och vissa andra attribut i Azure AD.</span><span class="sxs-lookup"><span data-stu-id="50702-108">For one single object, you cannot manage some attributes on-premises and some other attributes in Azure AD.</span></span> <span data-ttu-id="50702-109">Varje objekt har en flagga som indikerar där hello-objekt hanteras.</span><span class="sxs-lookup"><span data-stu-id="50702-109">Each object has a flag indicating where hello object is managed.</span></span>

<span data-ttu-id="50702-110">Du kan hantera vissa användare på lokalt och andra i hello molnet.</span><span class="sxs-lookup"><span data-stu-id="50702-110">You can manage some users on-premises and other in hello cloud.</span></span> <span data-ttu-id="50702-111">Ett vanligt scenario för den här konfigurationen är en organisation med en blandning av redovisning arbetare och försäljning personer.</span><span class="sxs-lookup"><span data-stu-id="50702-111">A common scenario for this configuration is an organization with a mix of accounting workers and sales workers.</span></span> <span data-ttu-id="50702-112">hello redovisning arbetare har en lokal AD-kontot, men hello försäljning anställda inte, har ett konto i Azure AD.</span><span class="sxs-lookup"><span data-stu-id="50702-112">hello accounting workers have an on-premises AD account, but hello sales workers do not, they have an account in Azure AD.</span></span> <span data-ttu-id="50702-113">Du kan hantera vissa användare lokalt och vissa i Azure AD.</span><span class="sxs-lookup"><span data-stu-id="50702-113">You would manage some users on-premises and some in Azure AD.</span></span>

<span data-ttu-id="50702-114">Om du startade toomanage användare i Azure AD finns också i lokala AD och senare vill toouse Connect, och det finns några ytterligare frågor som du behöver tooconsider.</span><span class="sxs-lookup"><span data-stu-id="50702-114">If you started toomanage users in Azure AD that are also in on-premises AD and later want toouse Connect, then there are some additional concerns you need tooconsider.</span></span>

## <a name="sync-with-existing-users-in-azure-ad"></a><span data-ttu-id="50702-115">Synkronisera med befintliga användare i Azure AD</span><span class="sxs-lookup"><span data-stu-id="50702-115">Sync with existing users in Azure AD</span></span>
<span data-ttu-id="50702-116">När du installerar Azure AD Connect och du startar synkroniseringen, hello Azure AD sync-tjänsten (i Azure AD) har en kontroll av alla nya objekt och försök toofind toomatch för ett befintligt objekt.</span><span class="sxs-lookup"><span data-stu-id="50702-116">When you install Azure AD Connect and you start synchronizing, hello Azure AD sync service (in Azure AD) does a check on every new object and try toofind an existing object toomatch.</span></span> <span data-ttu-id="50702-117">Det finns tre attribut som används för den här processen: **userPrincipalName**, **proxyAddresses**, och **sourceAnchor**/**immutableID** .</span><span class="sxs-lookup"><span data-stu-id="50702-117">There are three attributes used for this process: **userPrincipalName**, **proxyAddresses**, and **sourceAnchor**/**immutableID**.</span></span> <span data-ttu-id="50702-118">En matchning på **userPrincipalName** och **proxyAddresses** kallas en **mjuka matchar**.</span><span class="sxs-lookup"><span data-stu-id="50702-118">A match on **userPrincipalName** and **proxyAddresses** is known as a **soft match**.</span></span> <span data-ttu-id="50702-119">En matchning på **sourceAnchor** kallas **hårda matchar**.</span><span class="sxs-lookup"><span data-stu-id="50702-119">A match on **sourceAnchor** is known as **hard match**.</span></span> <span data-ttu-id="50702-120">För hello **proxyAddresses** attributvärdet endast hello med **SMTP:**, som är hello primära e-postadress, används för hello utvärdering.</span><span class="sxs-lookup"><span data-stu-id="50702-120">For hello **proxyAddresses** attribute only hello value with **SMTP:**, that is hello primary email address, is used for hello evaluation.</span></span>

<span data-ttu-id="50702-121">hello matchar utvärderas bara för nya objekt som kommer från Connect.</span><span class="sxs-lookup"><span data-stu-id="50702-121">hello match is only evaluated for new objects coming from Connect.</span></span> <span data-ttu-id="50702-122">Om du ändrar en befintlig objekt så att den matchar någon av dessa attribut kan se du ett fel i stället.</span><span class="sxs-lookup"><span data-stu-id="50702-122">If you change an exiting object so it is matching any of these attributes, then you see an error instead.</span></span>

<span data-ttu-id="50702-123">Om Azure AD hittar ett objekt där hello attributvärden hello samma för ett objekt som kommer från Connect och att det finns redan i Azure AD och hello objektet i Azure AD tas över av Connect.</span><span class="sxs-lookup"><span data-stu-id="50702-123">If Azure AD finds an object where hello attribute values are hello same for an object coming from Connect and that it is already present in Azure AD, then hello object in Azure AD is taken over by Connect.</span></span> <span data-ttu-id="50702-124">hello tidigare flaggas molnhanterade objekt som lokalt hanteras.</span><span class="sxs-lookup"><span data-stu-id="50702-124">hello previously cloud-managed object is flagged as on-premises managed.</span></span> <span data-ttu-id="50702-125">Alla attribut i Azure AD med ett värde i lokala AD skrivs över med hello lokalt värde.</span><span class="sxs-lookup"><span data-stu-id="50702-125">All attributes in Azure AD with a value in on-premises AD are overwritten with hello on-premises value.</span></span> <span data-ttu-id="50702-126">hello undantaget är när ett attribut har en **NULL** värdet lokalt.</span><span class="sxs-lookup"><span data-stu-id="50702-126">hello exception is when an attribute has a **NULL** value on-premises.</span></span> <span data-ttu-id="50702-127">I det här fallet kan hello värdet i Azure AD finns kvar, men du fortfarande endast ändra den lokala toosomething annan.</span><span class="sxs-lookup"><span data-stu-id="50702-127">In this case, hello value in Azure AD remains, but you can still only change it on-premises toosomething else.</span></span>

> [!WARNING]
> <span data-ttu-id="50702-128">Eftersom alla attribut i Azure AD ska toobe skrivs över av hello lokalt värde, kontrollera att du har bra data lokalt.</span><span class="sxs-lookup"><span data-stu-id="50702-128">Since all attributes in Azure AD are going toobe overwritten by hello on-premises value, make sure you have good data on-premises.</span></span> <span data-ttu-id="50702-129">Till exempel om du bara har hanterat e-postadress i Office 365 och inte kvar den uppdateras i lokal AD DS, och du förlorar alla värden i Azure AD/Office 365 finns inte i AD DS.</span><span class="sxs-lookup"><span data-stu-id="50702-129">For example, if you only have managed email address in Office 365 and not kept it updated in on-premises AD DS, then you lose any values in Azure AD/Office 365 not present in AD DS.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="50702-130">Om du använder Lösenordssynkronisering används alltid av standardinställningar, sedan hello lösenord i Azure AD skrivs över med hello lösenord i lokala AD.</span><span class="sxs-lookup"><span data-stu-id="50702-130">If you use password sync, which is always used by express settings, then hello password in Azure AD is overwritten with hello password in on-premises AD.</span></span> <span data-ttu-id="50702-131">Om användarna har använt toomanage olika lösenord måste tooinform hello dem som de ska använda lokala lösenordet när du har installerat Connect.</span><span class="sxs-lookup"><span data-stu-id="50702-131">If your users are used toomanage different passwords, then you need tooinform them that they should use hello on-premises password when you have installed Connect.</span></span>

<span data-ttu-id="50702-132">hello föregående avsnitt och varning måste beaktas i planeringen.</span><span class="sxs-lookup"><span data-stu-id="50702-132">hello previous section and warning must be considered in your planning.</span></span> <span data-ttu-id="50702-133">Om du har gjort många ändringar i Azure AD inte återspeglas i lokala AD DS måste tooplan för hur toopopulate AD DS med hello uppdateras värden innan du synkroniserar dina objekt med Azure AD Connect.</span><span class="sxs-lookup"><span data-stu-id="50702-133">If you have made many changes in Azure AD not reflected in on-premises AD DS, then you need tooplan for how toopopulate AD DS with hello updated values before you sync your objects with Azure AD Connect.</span></span>

<span data-ttu-id="50702-134">Om du matchar din objekt med en mjuk matchning sedan hello **sourceAnchor** läggs toohello objektet i Azure AD så att en hård matchning kan användas senare.</span><span class="sxs-lookup"><span data-stu-id="50702-134">If you matched your objects with a soft-match, then hello **sourceAnchor** is added toohello object in Azure AD so a hard match can be used later.</span></span>

### <a name="hard-match-vs-soft-match"></a><span data-ttu-id="50702-135">Hård-match eller Soft-matchning</span><span class="sxs-lookup"><span data-stu-id="50702-135">Hard-match vs Soft-match</span></span>
<span data-ttu-id="50702-136">För en ny installation av Connect finns inga praktiska skillnaden mellan soft- och en hård matchning.</span><span class="sxs-lookup"><span data-stu-id="50702-136">For a new installation of Connect, there is no practical difference between a soft- and a hard-match.</span></span> <span data-ttu-id="50702-137">hello skillnaden är i en situation med disaster recovery.</span><span class="sxs-lookup"><span data-stu-id="50702-137">hello difference is in a disaster recovery situation.</span></span> <span data-ttu-id="50702-138">Om du har förlorat din server med Azure AD Connect kan installera du en ny instans utan att förlora data.</span><span class="sxs-lookup"><span data-stu-id="50702-138">If you have lost your server with Azure AD Connect, you can reinstall a new instance without losing any data.</span></span> <span data-ttu-id="50702-139">Ett objekt med en sourceAnchor skickas tooConnect under första installationen.</span><span class="sxs-lookup"><span data-stu-id="50702-139">An object with a sourceAnchor is sent tooConnect during initial install.</span></span> <span data-ttu-id="50702-140">hello matchar kan sedan utvärderas av hello-klienten (Azure AD Connect), vilket är mycket snabbare än att göra hello samma i Azure AD.</span><span class="sxs-lookup"><span data-stu-id="50702-140">hello match can then be evaluated by hello client (Azure AD Connect), which is a lot faster than doing hello same in Azure AD.</span></span> <span data-ttu-id="50702-141">En hård matchning ska utvärderas efter Connect och av Azure AD.</span><span class="sxs-lookup"><span data-stu-id="50702-141">A hard match is evaluated both by Connect and by Azure AD.</span></span> <span data-ttu-id="50702-142">En mjuk matchning utvärderas bara av Azure AD.</span><span class="sxs-lookup"><span data-stu-id="50702-142">A soft match is only evaluated by Azure AD.</span></span>

### <a name="other-objects-than-users"></a><span data-ttu-id="50702-143">Andra objekt än användare</span><span class="sxs-lookup"><span data-stu-id="50702-143">Other objects than users</span></span>
<span data-ttu-id="50702-144">Användare har både userPrincipalName och proxyAddresses, vilket gör hello matchar enkelt.</span><span class="sxs-lookup"><span data-stu-id="50702-144">Users usually have both userPrincipalName and proxyAddresses, making hello match easy.</span></span> <span data-ttu-id="50702-145">Men andra objekt, till exempel säkerhetsgrupper, har inte de.</span><span class="sxs-lookup"><span data-stu-id="50702-145">But other objects, such as security groups, do not have those.</span></span> <span data-ttu-id="50702-146">I det här fallet kan du bara matcha på hårddisken matchning med hello sourceAnchor.</span><span class="sxs-lookup"><span data-stu-id="50702-146">In this case, you can only match on a hard match using hello sourceAnchor.</span></span> <span data-ttu-id="50702-147">Hej sourceAnchor är alltid hello Base64 konverteras **objectGUID** lokalt, så måste du uppdatera hello värdet i Azure AD när du behöver två objekt toomatch.</span><span class="sxs-lookup"><span data-stu-id="50702-147">hello sourceAnchor is always hello Base64 converted **objectGUID** on-premises, so you must update hello value in Azure AD when you need two objects toomatch.</span></span> <span data-ttu-id="50702-148">Hej sourceAnchor/immutableID kan bara uppdateras med PowerShell och inte via hello portaler.</span><span class="sxs-lookup"><span data-stu-id="50702-148">hello sourceAnchor/immutableID can only be updated with PowerShell and not through hello portals.</span></span>

## <a name="create-a-new-on-premises-active-directory-from-data-in-azure-ad"></a><span data-ttu-id="50702-149">Skapa en ny Active Directory för lokala data i Azure AD</span><span class="sxs-lookup"><span data-stu-id="50702-149">Create a new on-premises Active Directory from data in Azure AD</span></span>
<span data-ttu-id="50702-150">Vissa kunder börja med en molnbaserad lösning med Azure AD och de inte har en lokal AD.</span><span class="sxs-lookup"><span data-stu-id="50702-150">Some customers start with a cloud-only solution with Azure AD and they do not have an on-premises AD.</span></span> <span data-ttu-id="50702-151">Senare de vill tooconsume lokala resurser och vill toobuild en lokal AD-baserad på data i Azure AD.</span><span class="sxs-lookup"><span data-stu-id="50702-151">Later they want tooconsume on-premises resources and want toobuild an on-premises AD based on Azure AD data.</span></span> <span data-ttu-id="50702-152">Azure AD Connect kan hjälpa dig för det här scenariot.</span><span class="sxs-lookup"><span data-stu-id="50702-152">Azure AD Connect cannot help you for this scenario.</span></span> <span data-ttu-id="50702-153">Den skapar inte användare lokala och har inte någon möjlighet tooset hello lösenord lokalt toohello samma som i Azure AD.</span><span class="sxs-lookup"><span data-stu-id="50702-153">It does not create users on-premises and it does not have any ability tooset hello password on-premises toohello same as in Azure AD.</span></span>

<span data-ttu-id="50702-154">Om hello endast orsak varför du planerar tooadd lokala AD är toosupport LOB (Line-of-Business-appar) och sedan kanske bör du toouse [Azure AD domain services](../../active-directory-domain-services/index.md) i stället.</span><span class="sxs-lookup"><span data-stu-id="50702-154">If hello only reason why you plan tooadd on-premises AD is toosupport LOBs (Line-of-Business apps), then maybe you should consider toouse [Azure AD domain services](../../active-directory-domain-services/index.md) instead.</span></span>

## <a name="next-steps"></a><span data-ttu-id="50702-155">Nästa steg</span><span class="sxs-lookup"><span data-stu-id="50702-155">Next steps</span></span>
<span data-ttu-id="50702-156">Läs mer om hur du [integrerar dina lokala identiteter med Azure Active Directory](active-directory-aadconnect.md).</span><span class="sxs-lookup"><span data-stu-id="50702-156">Learn more about [Integrating your on-premises identities with Azure Active Directory](active-directory-aadconnect.md).</span></span>

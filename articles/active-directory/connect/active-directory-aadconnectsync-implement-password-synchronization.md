---
title: "aaaImplement Lösenordssynkronisering med Azure AD Connect-synkronisering | Microsoft Docs"
description: "Innehåller information om hur fungerar Lösenordssynkronisering och tooset upp."
services: active-directory
documentationcenter: 
author: MarkusVi
manager: femila
editor: 
ms.assetid: 05f16c3e-9d23-45dc-afca-3d0fa9dbf501
ms.service: active-directory
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 07/17/2017
ms.author: billmath
ms.openlocfilehash: a0401640f2a4d914419ee4446f923bb3a972389d
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: sv-SE
ms.lasthandoff: 10/06/2017
---
# <a name="implement-password-synchronization-with-azure-ad-connect-sync"></a><span data-ttu-id="8a90d-103">Implementera Lösenordssynkronisering med Azure AD Connect-synkronisering</span><span class="sxs-lookup"><span data-stu-id="8a90d-103">Implement password synchronization with Azure AD Connect sync</span></span>
<span data-ttu-id="8a90d-104">Den här artikeln innehåller information som du behöver toosynchronize användarlösenord från en lokal Active Directory-instans tooa molnbaserad Azure Active Directory (Azure AD)-instans.</span><span class="sxs-lookup"><span data-stu-id="8a90d-104">This article provides information that you need toosynchronize your user passwords from an on-premises Active Directory instance tooa cloud-based Azure Active Directory (Azure AD) instance.</span></span>

## <a name="what-is-password-synchronization"></a><span data-ttu-id="8a90d-105">Vad är synkronisering av lösenord</span><span class="sxs-lookup"><span data-stu-id="8a90d-105">What is password synchronization</span></span>
<span data-ttu-id="8a90d-106">hello sannolikheten att du är blockerade från att få jobbet gjort, på grund av tooa glömt lösenord är relaterad toohello många olika lösenord du måste tooremember.</span><span class="sxs-lookup"><span data-stu-id="8a90d-106">hello probability that you're blocked from getting your work done due tooa forgotten password is related toohello number of different passwords you need tooremember.</span></span> <span data-ttu-id="8a90d-107">Hej måste tooremember hello högre hello sannolikhet tooforget något lösenord.</span><span class="sxs-lookup"><span data-stu-id="8a90d-107">hello more passwords you need tooremember, hello higher hello probability tooforget one.</span></span> <span data-ttu-id="8a90d-108">Frågor och anrop om lösenordsåterställning och andra problem med lösenord begäran hello mest supportavdelningen resurser.</span><span class="sxs-lookup"><span data-stu-id="8a90d-108">Questions and calls about password resets and other password-related issues demand hello most helpdesk resources.</span></span>

<span data-ttu-id="8a90d-109">Lösenordssynkronisering är en funktion används toosynchronize lösenord från en lokal Active Directory-instans tooa molnbaserad Azure AD-instans.</span><span class="sxs-lookup"><span data-stu-id="8a90d-109">Password synchronization is a feature used toosynchronize user passwords from an on-premises Active Directory instance tooa cloud-based Azure AD instance.</span></span>
<span data-ttu-id="8a90d-110">Använd den här funktionen toosign i tooAzure AD-tjänster som Office 365, Microsoft Intune, CRM Online och Azure Active Directory Domain Services (Azure AD DS).</span><span class="sxs-lookup"><span data-stu-id="8a90d-110">Use this feature toosign in tooAzure AD services like Office 365, Microsoft Intune, CRM Online, and Azure Active Directory Domain Services (Azure AD DS).</span></span> <span data-ttu-id="8a90d-111">Du loggar in toohello tjänsten med hjälp av hello samma lösenord som du använder toosign i tooyour lokala Active Directory-instans.</span><span class="sxs-lookup"><span data-stu-id="8a90d-111">You sign in toohello service by using hello same password you use toosign in tooyour on-premises Active Directory instance.</span></span>

![Vad är Azure AD Connect?](./media/active-directory-aadconnectsync-implement-password-synchronization/arch1.png)

<span data-ttu-id="8a90d-113">Genom att minska hello antal lösenord, måste användarna toomaintain toojust en.</span><span class="sxs-lookup"><span data-stu-id="8a90d-113">By reducing hello number of passwords, your users need toomaintain toojust one.</span></span> <span data-ttu-id="8a90d-114">Lösenordssynkronisering kan du:</span><span class="sxs-lookup"><span data-stu-id="8a90d-114">Password synchronization helps you to:</span></span>

* <span data-ttu-id="8a90d-115">Förbättra hello användarnas produktivitet.</span><span class="sxs-lookup"><span data-stu-id="8a90d-115">Improve hello productivity of your users.</span></span>
* <span data-ttu-id="8a90d-116">Minska supportkostnaderna.</span><span class="sxs-lookup"><span data-stu-id="8a90d-116">Reduce your helpdesk costs.</span></span>  

<span data-ttu-id="8a90d-117">Även om du väljer toouse [Federation med Active Directory Federation Services (AD FS)](https://channel9.msdn.com/Series/Azure-Active-Directory-Videos-Demos/Configuring-AD-FS-for-user-sign-in-with-Azure-AD-Connect), du kan du konfigurera Lösenordssynkronisering som en säkerhetskopia om det inte går att AD FS-infrastrukturen.</span><span class="sxs-lookup"><span data-stu-id="8a90d-117">Also, if you decide toouse [Federation with Active Directory Federation Services (AD FS)](https://channel9.msdn.com/Series/Azure-Active-Directory-Videos-Demos/Configuring-AD-FS-for-user-sign-in-with-Azure-AD-Connect), you can optionally set up password synchronization as a backup in case your AD FS infrastructure fails.</span></span>

<span data-ttu-id="8a90d-118">Lösenordssynkronisering är ett tillägg toohello directory synkroniseringsfunktionen implementeras av Azure AD Connect-synkronisering. toouse synkronisering av lösenord i din miljö måste du:</span><span class="sxs-lookup"><span data-stu-id="8a90d-118">Password synchronization is an extension toohello directory synchronization feature implemented by Azure AD Connect sync. toouse password synchronization in your environment, you need to:</span></span>

* <span data-ttu-id="8a90d-119">Installera Azure AD Connect.</span><span class="sxs-lookup"><span data-stu-id="8a90d-119">Install Azure AD Connect.</span></span>  
* <span data-ttu-id="8a90d-120">Konfigurera katalogsynkronisering mellan din lokala Active Directory och Azure Active Directory-instans.</span><span class="sxs-lookup"><span data-stu-id="8a90d-120">Configure directory synchronization between your on-premises Active Directory instance and your Azure Active Directory instance.</span></span>
* <span data-ttu-id="8a90d-121">Aktivera Lösenordssynkronisering.</span><span class="sxs-lookup"><span data-stu-id="8a90d-121">Enable password synchronization.</span></span>

<span data-ttu-id="8a90d-122">Mer information finns i [Integrera dina lokala identiteter med Azure Active Directory](active-directory-aadconnect.md).</span><span class="sxs-lookup"><span data-stu-id="8a90d-122">For more details, see [Integrating your on-premises identities with Azure Active Directory](active-directory-aadconnect.md).</span></span>

> [!NOTE]
> <span data-ttu-id="8a90d-123">Mer information om Azure Active Directory Domain Services konfigurerats för FIPS och Lösenordssynkronisering finns i ”Lösenordssynkronisering och FIPS” senare i den här artikeln.</span><span class="sxs-lookup"><span data-stu-id="8a90d-123">For more details about Azure Active Directory Domain Services configured for FIPS and password synchronization, see "Password synchronization and FIPS" later in this article.</span></span>
>
>

## <a name="how-password-synchronization-works"></a><span data-ttu-id="8a90d-124">Så här fungerar Lösenordssynkronisering</span><span class="sxs-lookup"><span data-stu-id="8a90d-124">How password synchronization works</span></span>
<span data-ttu-id="8a90d-125">hello Active Directory domain service lösenord ska lagras i hello form av en hash-värdet representation av hello faktiska användarens lösenord.</span><span class="sxs-lookup"><span data-stu-id="8a90d-125">hello Active Directory domain service stores passwords in hello form of a hash value representation of hello actual user password.</span></span> <span data-ttu-id="8a90d-126">Ett hash-värde är ett resultat av en enkelriktad matematisk funktion (hello *hash-algoritm*).</span><span class="sxs-lookup"><span data-stu-id="8a90d-126">A hash value is a result of a one-way mathematical function (hello *hashing algorithm*).</span></span> <span data-ttu-id="8a90d-127">Det finns ingen metod toorevert hello resultatet av en envägs funktion toohello oformaterad Textversion av ett lösenord.</span><span class="sxs-lookup"><span data-stu-id="8a90d-127">There is no method toorevert hello result of a one-way function toohello plain text version of a password.</span></span> <span data-ttu-id="8a90d-128">Du kan inte använda ett lösenord hash toosign tooyour lokalt nätverk.</span><span class="sxs-lookup"><span data-stu-id="8a90d-128">You cannot use a password hash toosign in tooyour on-premises network.</span></span>

<span data-ttu-id="8a90d-129">ditt lösenord, Azure AD Connect-synkronisering extraherar lösenords-hash från toosynchronize hello lokala Active Directory-instans.</span><span class="sxs-lookup"><span data-stu-id="8a90d-129">toosynchronize your password, Azure AD Connect sync extracts your password hash from hello on-premises Active Directory instance.</span></span> <span data-ttu-id="8a90d-130">Behandling av extra säkerhet tillämpas toohello lösenords-hash innan den är synkroniserad toohello Azure Active Directory authentication-tjänsten.</span><span class="sxs-lookup"><span data-stu-id="8a90d-130">Extra security processing is applied toohello password hash before it is synchronized toohello Azure Active Directory authentication service.</span></span> <span data-ttu-id="8a90d-131">Lösenord synkroniseras på per användare och i kronologisk ordning.</span><span class="sxs-lookup"><span data-stu-id="8a90d-131">Passwords are synchronized on a per-user basis and in chronological order.</span></span>

<span data-ttu-id="8a90d-132">hello faktiska dataflöde för hello processen för synkronisering av lösenord är liknande toohello synkronisering av användardata, till exempel DisplayName eller e-postadresser.</span><span class="sxs-lookup"><span data-stu-id="8a90d-132">hello actual data flow of hello password synchronization process is similar toohello synchronization of user data such as DisplayName or Email Addresses.</span></span> <span data-ttu-id="8a90d-133">Dock synkroniseras lösenord oftare än hello standard directory synkronisering fönster för andra attribut.</span><span class="sxs-lookup"><span data-stu-id="8a90d-133">However, passwords are synchronized more frequently than hello standard directory synchronization window for other attributes.</span></span> <span data-ttu-id="8a90d-134">processen för synkronisering av lösenord i hello körs varannan minut.</span><span class="sxs-lookup"><span data-stu-id="8a90d-134">hello password synchronization process runs every 2 minutes.</span></span> <span data-ttu-id="8a90d-135">Du kan inte ändra hello frekvensen för den här processen.</span><span class="sxs-lookup"><span data-stu-id="8a90d-135">You cannot modify hello frequency of this process.</span></span> <span data-ttu-id="8a90d-136">När du synkroniserar lösenord över hello befintliga lösenord i molnet.</span><span class="sxs-lookup"><span data-stu-id="8a90d-136">When you synchronize a password, it overwrites hello existing cloud password.</span></span>

<span data-ttu-id="8a90d-137">hello genomför första gången som du aktiverar funktionen för synkronisering av hello lösenord, den en inledande synkronisering av hello lösenord för användare i omfånget.</span><span class="sxs-lookup"><span data-stu-id="8a90d-137">hello first time you enable hello password synchronization feature, it performs an initial synchronization of hello passwords of all in-scope users.</span></span> <span data-ttu-id="8a90d-138">Du kan inte explicit definiera en delmängd av lösenord som du vill toosynchronize.</span><span class="sxs-lookup"><span data-stu-id="8a90d-138">You cannot explicitly define a subset of user passwords that you want toosynchronize.</span></span>

<span data-ttu-id="8a90d-139">När du ändrar ett lösenord för lokala synkroniseras hello uppdateras lösenord, oftast på några minuter.</span><span class="sxs-lookup"><span data-stu-id="8a90d-139">When you change an on-premises password, hello updated password is synchronized, most often in a matter of minutes.</span></span>
<span data-ttu-id="8a90d-140">hello lösenord synkroniseringsfunktionen försöker automatiskt misslyckade synkroniseringsförsök.</span><span class="sxs-lookup"><span data-stu-id="8a90d-140">hello password synchronization feature automatically retries failed synchronization attempts.</span></span> <span data-ttu-id="8a90d-141">Om ett fel inträffar under ett försök toosynchronize ett lösenord, loggas ett fel i din Loggboken.</span><span class="sxs-lookup"><span data-stu-id="8a90d-141">If an error occurs during an attempt toosynchronize a password, an error is logged in your event viewer.</span></span>

<span data-ttu-id="8a90d-142">hello synkronisering av lösenord har ingen inverkan på hello användare är inloggad för tillfället.</span><span class="sxs-lookup"><span data-stu-id="8a90d-142">hello synchronization of a password has no impact on hello user  who is currently signed in.</span></span>
<span data-ttu-id="8a90d-143">Den aktuella cloud service sessionen är omedelbart påverkas inte av en synkroniserade lösenordsändring som uppstår när du är inloggad i tooa Molntjänsten.</span><span class="sxs-lookup"><span data-stu-id="8a90d-143">Your current cloud service session is not immediately affected by a synchronized password change that occurs while you are signed in tooa cloud service.</span></span> <span data-ttu-id="8a90d-144">När Molntjänsten hello kräver att du tooauthenticate igen, måste du dock tooprovide ditt nya lösenord.</span><span class="sxs-lookup"><span data-stu-id="8a90d-144">However, when hello cloud service requires you tooauthenticate again, you need tooprovide your new password.</span></span>

<span data-ttu-id="8a90d-145">En användare måste ange sina autentiseringsuppgifter för företaget en andra gång tooauthenticate tooAzure AD, oavsett om de har loggat in tootheir företagsnätverket.</span><span class="sxs-lookup"><span data-stu-id="8a90d-145">A user must enter their corporate credentials a second time tooauthenticate tooAzure AD, regardless of whether they're signed in tootheir corporate network.</span></span> <span data-ttu-id="8a90d-146">Dessa mönster kan minimeras, men om hello användaren väljer hello Keep mig signerade (KMSI) kryssrutan vid inloggning.</span><span class="sxs-lookup"><span data-stu-id="8a90d-146">These pattern can be minimized, however, if hello user selects hello Keep me signed in (KMSI) check box at sign in.</span></span> <span data-ttu-id="8a90d-147">Det här alternativet anger en sessions-cookie som kringgår autentisering under en kort period.</span><span class="sxs-lookup"><span data-stu-id="8a90d-147">This selection sets a session cookie that bypasses authentication for a short period.</span></span> <span data-ttu-id="8a90d-148">KMSI beteende kan aktiveras eller inaktiveras av hello Azure AD-administratör.</span><span class="sxs-lookup"><span data-stu-id="8a90d-148">KMSI behavior can be enabled or disabled by hello Azure AD administrator.</span></span>

> [!NOTE]
> <span data-ttu-id="8a90d-149">Lösenordssynkronisering stöds endast för hello objektet typ användare i Active Directory.</span><span class="sxs-lookup"><span data-stu-id="8a90d-149">Password sync is only supported for hello object type user in Active Directory.</span></span> <span data-ttu-id="8a90d-150">Det finns inte stöd för hello iNetOrgPerson objekttypen.</span><span class="sxs-lookup"><span data-stu-id="8a90d-150">It is not supported for hello iNetOrgPerson object type.</span></span>

### <a name="detailed-description-of-how-password-synchronization-works"></a><span data-ttu-id="8a90d-151">Detaljerad beskrivning av hur det fungerar Lösenordssynkronisering</span><span class="sxs-lookup"><span data-stu-id="8a90d-151">Detailed description of how password synchronization works</span></span>
<span data-ttu-id="8a90d-152">hello nedan beskrivs djupgående så här fungerar Lösenordssynkronisering mellan Active Directory och Azure AD.</span><span class="sxs-lookup"><span data-stu-id="8a90d-152">hello following describes in-depth how password synchronization works between Active Directory and Azure AD.</span></span>

![Detaljerad lösenord flöde](./media/active-directory-aadconnectsync-implement-password-synchronization/arch3.png)


1. <span data-ttu-id="8a90d-154">Varannan minut, hello lösenordssynkroniseringsagenten på hello AD Connect-servern begär lagrade lösenordshashvärden (hello unicodePwd attribut) från en Domänkontrollant via hello standard [MS-DRSR](https://msdn.microsoft.com/library/cc228086.aspx) replikering protokoll som används toosynchronize data mellan domänkontrollanter.</span><span class="sxs-lookup"><span data-stu-id="8a90d-154">Every two minutes, hello password synchronization agent on hello AD Connect server requests stored password hashes (hello unicodePwd attribute) from a DC via hello standard [MS-DRSR](https://msdn.microsoft.com/library/cc228086.aspx) replication protocol used toosynchronize data between DCs.</span></span> <span data-ttu-id="8a90d-155">hello-tjänstkontot måste ha Replikera katalogändringar och replikera Directory alla ändringar AD behörigheter (som standard på installation) tooobtain hello lösenordshashvärden.</span><span class="sxs-lookup"><span data-stu-id="8a90d-155">hello service account must have Replicate Directory Changes and Replicate Directory Changes All AD permissions (granted by default on installation) tooobtain hello password hashes.</span></span>
2. <span data-ttu-id="8a90d-156">Innan du skickar, krypterar hello DC hello MD4 lösenords-hash med hjälp av en nyckel som är en [MD5](http://www.rfc-editor.org/rfc/rfc1321.txt) hash för hello RPC-sessionsnyckel och en salt.</span><span class="sxs-lookup"><span data-stu-id="8a90d-156">Before sending, hello DC encrypts hello MD4 password hash by using a key that is a [MD5](http://www.rfc-editor.org/rfc/rfc1321.txt) hash of hello RPC session key and a salt.</span></span> <span data-ttu-id="8a90d-157">Hello resultatet toohello lösenordssynkroniseringsagenten skickar sedan över RPC.</span><span class="sxs-lookup"><span data-stu-id="8a90d-157">It then sends hello result toohello password synchronization agent over RPC.</span></span> <span data-ttu-id="8a90d-158">hello skickar DC också hello salt toohello lösenordssynkroniseringsagenten via protokollet hello DC replikering, så hello agenten kommer att kunna toodecrypt hello-kuvertet.</span><span class="sxs-lookup"><span data-stu-id="8a90d-158">hello DC also passes hello salt toohello synchronization agent by using hello DC replication protocol, so hello agent will be able toodecrypt hello envelope.</span></span>
3.  <span data-ttu-id="8a90d-159">När hello lösenordssynkroniseringsagenten har hello krypterade kuvert, används [MD5CryptoServiceProvider](https://msdn.microsoft.com/library/System.Security.Cryptography.MD5CryptoServiceProvider.aspx) och hello salt toogenerate ett viktiga toodecrypt hello emot tillbaka tooits ursprungliga MD4 dataformat.</span><span class="sxs-lookup"><span data-stu-id="8a90d-159">After hello password synchronization agent has hello encrypted envelope, it uses [MD5CryptoServiceProvider](https://msdn.microsoft.com/library/System.Security.Cryptography.MD5CryptoServiceProvider.aspx) and hello salt toogenerate a key toodecrypt hello received data back tooits original MD4 format.</span></span> <span data-ttu-id="8a90d-160">På någon punkt har hello lösenordssynkroniseringsagenten åtkomst toohello lösenord i klartext.</span><span class="sxs-lookup"><span data-stu-id="8a90d-160">At no point does hello password synchronization agent have access toohello clear text password.</span></span> <span data-ttu-id="8a90d-161">hello lösenord synkronisering agent användningen av MD5 gäller enbart för replikering protokollet kompatibilitet med hello DC och används bara på lokala mellan hello DC och hello lösenordssynkroniseringsagenten.</span><span class="sxs-lookup"><span data-stu-id="8a90d-161">hello password synchronization agent’s use of MD5 is strictly for replication protocol compatibility with hello DC, and it is only used on premises between hello DC and hello password synchronization agent.</span></span>
4.  <span data-ttu-id="8a90d-162">Hej lösenordssynkroniseringsagenten expanderar hello 16 byte binära lösenord hash too64 byte av första konvertering hello hash tooa 32 byte hexadecimal sträng, och sedan konvertera den här strängen tillbaka till binär kodning i UTF-16.</span><span class="sxs-lookup"><span data-stu-id="8a90d-162">hello password synchronization agent expands hello 16-byte binary password hash too64 bytes by first converting hello hash tooa 32-byte hexadecimal string, then converting this string back into binary with UTF-16 encoding.</span></span>
5.  <span data-ttu-id="8a90d-163">Hej lösenordssynkroniseringsagenten läggs en salt som består av en längd på 10 byte salt, toohello 64 byte binära toofurther skydda hello ursprungliga hash.</span><span class="sxs-lookup"><span data-stu-id="8a90d-163">hello password synchronization agent adds a salt, consisting of a 10-byte length salt, toohello 64-byte binary toofurther protect hello original hash.</span></span>
6.  <span data-ttu-id="8a90d-164">Hej lösenordssynkroniseringsagenten sedan kombinerar hello MD4-hash plus salt och inmatningar i hello [PBKDF2](https://www.ietf.org/rfc/rfc2898.txt) funktion.</span><span class="sxs-lookup"><span data-stu-id="8a90d-164">hello password synchronization agent then combines hello MD4 hash plus salt, and inputs it into hello [PBKDF2](https://www.ietf.org/rfc/rfc2898.txt) function.</span></span> <span data-ttu-id="8a90d-165">1000 iterationer av hello [HMAC SHA256](https://msdn.microsoft.com/library/system.security.cryptography.hmacsha256.aspx) nycklad hashalgoritm används.</span><span class="sxs-lookup"><span data-stu-id="8a90d-165">1000 iterations of hello [HMAC-SHA256](https://msdn.microsoft.com/library/system.security.cryptography.hmacsha256.aspx) keyed hashing algorithm is used.</span></span> 
7.  <span data-ttu-id="8a90d-166">hello lösenordssynkroniseringsagenten tar hello resulterande 32-byte-hash, sammanfogar båda hello salt och hello antalet SHA256 iterationer tooit (för användning av Azure AD) och sedan överför hello sträng från Azure AD Connect tooAzure AD via SSL.</span><span class="sxs-lookup"><span data-stu-id="8a90d-166">hello password synchronization agent takes hello resulting 32-byte hash, concatenates both hello salt and hello number of SHA256 iterations tooit (for use by Azure AD), then transmits hello string from Azure AD Connect tooAzure AD over SSL.</span></span></br> 
8.  <span data-ttu-id="8a90d-167">När en användare försöker toosign i tooAzure AD och anger sina lösenord, hello lösenord körs via hello samma MD4 + salt + PBKDF2 + HMAC SHA256-processen.</span><span class="sxs-lookup"><span data-stu-id="8a90d-167">When a user attempts toosign in tooAzure AD and enters their password, hello password is run through hello same MD4+salt+PBKDF2+HMAC-SHA256 process.</span></span> <span data-ttu-id="8a90d-168">Om hello resulterande hash matchar hello hash lagras i Azure AD, hello användaren har angett rätt lösenord för hello och autentiseras.</span><span class="sxs-lookup"><span data-stu-id="8a90d-168">If hello resulting hash matches hello hash stored in Azure AD, hello user has entered hello correct password and is authenticated.</span></span> 

>[!Note] 
><span data-ttu-id="8a90d-169">hello ursprungliga MD4-hash är inte överförda tooAzure AD.</span><span class="sxs-lookup"><span data-stu-id="8a90d-169">hello original MD4 hash is not transmitted tooAzure AD.</span></span> <span data-ttu-id="8a90d-170">I stället överförs hello SHA256-hash för hello ursprungliga MD4-hash.</span><span class="sxs-lookup"><span data-stu-id="8a90d-170">Instead, hello SHA256 hash of hello original MD4 hash is transmitted.</span></span> <span data-ttu-id="8a90d-171">Därför om hello hash lagras i Azure AD har erhållit kan den inte användas i en lokal pass-the-hash-attack.</span><span class="sxs-lookup"><span data-stu-id="8a90d-171">As a result, if hello hash stored in Azure AD is obtained, it cannot be used in an on-premises pass-the-hash attack.</span></span>

### <a name="how-password-synchronization-works-with-azure-active-directory-domain-services"></a><span data-ttu-id="8a90d-172">Så här fungerar Lösenordssynkronisering med Azure Active Directory Domain Services</span><span class="sxs-lookup"><span data-stu-id="8a90d-172">How password synchronization works with Azure Active Directory Domain Services</span></span>
<span data-ttu-id="8a90d-173">Du kan också använda hello lösenord synkronisering funktionen toosynchronize lokala lösenord för[Azure Active Directory Domain Services](../../active-directory-domain-services/active-directory-ds-overview.md).</span><span class="sxs-lookup"><span data-stu-id="8a90d-173">You can also use hello password synchronization feature toosynchronize your on-premises passwords too[Azure Active Directory Domain Services](../../active-directory-domain-services/active-directory-ds-overview.md).</span></span> <span data-ttu-id="8a90d-174">I det här scenariot verifierar hello Azure Active Directory Domain Services-instans användarna i hello moln med alla hello metoder som är tillgängliga i din lokala Active Directory-instans.</span><span class="sxs-lookup"><span data-stu-id="8a90d-174">In this scenario, hello Azure Active Directory Domain Services instance authenticates your users in hello cloud with all hello methods available in your on-premises Active Directory instance.</span></span> <span data-ttu-id="8a90d-175">hello upplevelse i det här scenariot är liknande toousing hello Active Directory Migration Tool (ADMT) i en lokal miljö.</span><span class="sxs-lookup"><span data-stu-id="8a90d-175">hello experience of this scenario is similar toousing hello Active Directory Migration Tool (ADMT) in an on-premises environment.</span></span>

### <a name="security-considerations"></a><span data-ttu-id="8a90d-176">Säkerhetsöverväganden</span><span class="sxs-lookup"><span data-stu-id="8a90d-176">Security considerations</span></span>
<span data-ttu-id="8a90d-177">Vid synkronisering av lösenord, hello oformaterad text versionen för att lösenordet är inte synliga toohello lösenord synkroniseringsfunktionen tooAzure AD eller någon av hello associerade tjänster.</span><span class="sxs-lookup"><span data-stu-id="8a90d-177">When synchronizing passwords, hello plain-text version of your password is not exposed toohello password synchronization feature, tooAzure AD, or any of hello associated services.</span></span>

<span data-ttu-id="8a90d-178">Användarautentisering utförs mot Azure AD i stället för mot hello organisationens egen Active Directory-instans.</span><span class="sxs-lookup"><span data-stu-id="8a90d-178">User authentication takes place against Azure AD rather than against hello organization's own Active Directory instance.</span></span> <span data-ttu-id="8a90d-179">Om din organisation har frågor om lösenordsdata som lämnar hello lokala bör du överväga att hello faktum att hello SHA256 lösenordsdata som lagras i Azure AD--är en hash av hello ursprungliga MD4-hash--avsevärt säkrare än vad som lagras i Active Directory.</span><span class="sxs-lookup"><span data-stu-id="8a90d-179">If your organization has concerns about password data in any form leaving hello premises, consider hello fact that hello SHA256 password data stored in Azure AD--a hash of hello original MD4 hash--is significantly more secure than what is stored in Active Directory.</span></span> <span data-ttu-id="8a90d-180">Vara dessutom eftersom SHA256-hash inte kan dekrypteras så den kan inte återförts toohello organisationens Active Directory-miljö och visas som ett giltigt lösenord i en attack med pass-the-hash.</span><span class="sxs-lookup"><span data-stu-id="8a90d-180">Further, because this SHA256 hash cannot be decrypted, it cannot be brought back toohello organization's Active Directory environment and presented as a valid user password in a pass-the-hash attack.</span></span>





### <a name="password-policy-considerations"></a><span data-ttu-id="8a90d-181">Överväganden om principer lösenord</span><span class="sxs-lookup"><span data-stu-id="8a90d-181">Password policy considerations</span></span>
<span data-ttu-id="8a90d-182">Det finns två typer av principer för lösenord som påverkas genom att aktivera synkronisering av lösenord:</span><span class="sxs-lookup"><span data-stu-id="8a90d-182">There are two types of password policies that are affected by enabling password synchronization:</span></span>

* <span data-ttu-id="8a90d-183">Principen för komplexitet för lösenord</span><span class="sxs-lookup"><span data-stu-id="8a90d-183">Password complexity policy</span></span>
* <span data-ttu-id="8a90d-184">Förfalloprincipen för lösenord</span><span class="sxs-lookup"><span data-stu-id="8a90d-184">Password expiration policy</span></span>

#### <a name="password-complexity-policy"></a><span data-ttu-id="8a90d-185">Principen för komplexitet för lösenord</span><span class="sxs-lookup"><span data-stu-id="8a90d-185">Password complexity policy</span></span>  
<span data-ttu-id="8a90d-186">När synkronisering av lösenord är aktiverat, principändringar hello komplexitet lösenordsprinciper i din lokala Active Directory-instans komplexiteten i hello molnet för synkroniserade användare.</span><span class="sxs-lookup"><span data-stu-id="8a90d-186">When password synchronization is enabled, hello password complexity policies in your on-premises Active Directory instance override complexity policies in hello cloud for synchronized users.</span></span> <span data-ttu-id="8a90d-187">Du kan använda alla hello giltigt lösenord från din lokala Active Directory-instans tooaccess Azure AD-tjänster.</span><span class="sxs-lookup"><span data-stu-id="8a90d-187">You can use all of hello valid passwords from your on-premises Active Directory instance tooaccess Azure AD services.</span></span>

> [!NOTE]
> <span data-ttu-id="8a90d-188">Lösenord för användare som skapas direkt i hello molnet är fortfarande ämne toopassword principer som definierats i hello molnet.</span><span class="sxs-lookup"><span data-stu-id="8a90d-188">Passwords for users that are created directly in hello cloud are still subject toopassword policies as defined in hello cloud.</span></span>

#### <a name="password-expiration-policy"></a><span data-ttu-id="8a90d-189">Förfalloprincipen för lösenord</span><span class="sxs-lookup"><span data-stu-id="8a90d-189">Password expiration policy</span></span>  
<span data-ttu-id="8a90d-190">Om en användare finns i hello omfånget för synkronisering av lösenord, hello molnet lösenord har angetts för*aldrig går ut*.</span><span class="sxs-lookup"><span data-stu-id="8a90d-190">If a user is in hello scope of password synchronization, hello cloud account password is set too*Never Expire*.</span></span>

<span data-ttu-id="8a90d-191">Du kan fortsätta toosign i tooyour molntjänster med ett synkroniserade lösenord som har upphört att gälla i din lokala miljö.</span><span class="sxs-lookup"><span data-stu-id="8a90d-191">You can continue toosign in tooyour cloud services by using a synchronized password that is expired in your on-premises environment.</span></span> <span data-ttu-id="8a90d-192">Lösenordet molnet uppdateras hello nästa gång du ändrar hello lösenordet i hello lokala miljö.</span><span class="sxs-lookup"><span data-stu-id="8a90d-192">Your cloud password is updated hello next time you change hello password in hello on-premises environment.</span></span>

#### <a name="account-expiration"></a><span data-ttu-id="8a90d-193">Kontots giltighetstid</span><span class="sxs-lookup"><span data-stu-id="8a90d-193">Account expiration</span></span>
<span data-ttu-id="8a90d-194">Om din organisation använder hello accountExpires attribut som en del av hantering av användarkonton, Tänk på att det här attributet inte är synkroniserade tooAzure AD.</span><span class="sxs-lookup"><span data-stu-id="8a90d-194">If your organization uses hello accountExpires attribute as part of user account management, be aware that this attribute is not synchronized tooAzure AD.</span></span> <span data-ttu-id="8a90d-195">Därför ett utgånget Active Directory-konto i en miljö som konfigurerats för synkronisering av lösenord kommer fortfarande att vara aktiv i Azure AD.</span><span class="sxs-lookup"><span data-stu-id="8a90d-195">As a result, an expired Active Directory account in an environment configured for password synchronization will still be active in Azure AD.</span></span> <span data-ttu-id="8a90d-196">Vi rekommenderar att en arbetsflödesåtgärd ska utlösa ett PowerShell-skript som inaktiverar hello användarens Azure AD-kontot om hello kontot har upphört att gälla.</span><span class="sxs-lookup"><span data-stu-id="8a90d-196">We recommend that if hello account is expired, a workflow action should trigger a PowerShell script that disables hello user's Azure AD account.</span></span> <span data-ttu-id="8a90d-197">Däremot när hello kontot aktiveras vara hello Azure AD-instans aktiverad.</span><span class="sxs-lookup"><span data-stu-id="8a90d-197">Conversely, when hello account is turned on, hello Azure AD instance should be turned on.</span></span>

### <a name="overwrite-synchronized-passwords"></a><span data-ttu-id="8a90d-198">Skriv över synkroniserade lösenord</span><span class="sxs-lookup"><span data-stu-id="8a90d-198">Overwrite synchronized passwords</span></span>
<span data-ttu-id="8a90d-199">En administratör återställa manuellt ditt lösenord med hjälp av Windows PowerShell.</span><span class="sxs-lookup"><span data-stu-id="8a90d-199">An administrator can manually reset your password by using Windows PowerShell.</span></span>

<span data-ttu-id="8a90d-200">I det här fallet hello nytt lösenord åsidosätter lösenordet synkroniserade och alla lösenordsprinciper som definierats i hello molnet är tillämpade toohello nytt lösenord.</span><span class="sxs-lookup"><span data-stu-id="8a90d-200">In this case, hello new password overrides your synchronized password, and all password policies defined in hello cloud are applied toohello new password.</span></span>

<span data-ttu-id="8a90d-201">Om du ändrar lösenordet lokalt, hello nya lösenordet är synkroniserat toohello molnet och åsidosätter hello manuellt uppdatera lösenordet.</span><span class="sxs-lookup"><span data-stu-id="8a90d-201">If you change your on-premises password again, hello new password is synchronized toohello cloud, and it overrides hello manually updated password.</span></span>

<span data-ttu-id="8a90d-202">hello synkronisering av lösenord har ingen inverkan på hello Azure användare är inloggad.</span><span class="sxs-lookup"><span data-stu-id="8a90d-202">hello synchronization of a password has no impact on hello Azure user who is signed in.</span></span> <span data-ttu-id="8a90d-203">Den aktuella cloud service sessionen är omedelbart påverkas inte av en synkroniserade lösenordsändring som uppstår när du är inloggad i tooa Molntjänsten.</span><span class="sxs-lookup"><span data-stu-id="8a90d-203">Your current cloud service session is not immediately affected by a synchronized password change that occurs while you're signed in tooa cloud service.</span></span> <span data-ttu-id="8a90d-204">KMSI utökar hello varaktighet för denna skillnad.</span><span class="sxs-lookup"><span data-stu-id="8a90d-204">KMSI extends hello duration of this difference.</span></span> <span data-ttu-id="8a90d-205">När Molntjänsten hello kräver att du tooauthenticate igen, måste tooprovide ditt nya lösenord.</span><span class="sxs-lookup"><span data-stu-id="8a90d-205">When hello cloud service requires you tooauthenticate again, you need tooprovide your new password.</span></span>

### <a name="additional-advantages"></a><span data-ttu-id="8a90d-206">Ytterligare fördelar</span><span class="sxs-lookup"><span data-stu-id="8a90d-206">Additional advantages</span></span>

- <span data-ttu-id="8a90d-207">Lösenordssynkronisering är oftast enklare tooimplement än en federationstjänst.</span><span class="sxs-lookup"><span data-stu-id="8a90d-207">Generally, password synchronization is simpler tooimplement than a federation service.</span></span> <span data-ttu-id="8a90d-208">Det kräver inte några ytterligare servrar och eliminerar beroendet av en högtillgänglig federation service tooauthenticate användare.</span><span class="sxs-lookup"><span data-stu-id="8a90d-208">It doesn't require any additional servers, and eliminates dependence on a highly available federation service tooauthenticate users.</span></span> 
- <span data-ttu-id="8a90d-209">Lösenordssynkronisering kan även aktiveras i tillägg toofederation.</span><span class="sxs-lookup"><span data-stu-id="8a90d-209">Password synchronization can also be enabled in addition toofederation.</span></span> <span data-ttu-id="8a90d-210">Den kan användas som reserv om ett avbrott inträffar i din federationstjänst.</span><span class="sxs-lookup"><span data-stu-id="8a90d-210">It may be used as a fallback if your federation service experiences an outage.</span></span>












## <a name="enable-password-synchronization"></a><span data-ttu-id="8a90d-211">Aktivera Lösenordssynkronisering</span><span class="sxs-lookup"><span data-stu-id="8a90d-211">Enable password synchronization</span></span>
<span data-ttu-id="8a90d-212">När du installerar Azure AD Connect med hjälp av hello **standardinställningar** alternativet Lösenordssynkronisering aktiveras automatiskt.</span><span class="sxs-lookup"><span data-stu-id="8a90d-212">When you install Azure AD Connect by using hello **Express Settings** option, password synchronization is automatically enabled.</span></span> <span data-ttu-id="8a90d-213">Mer information finns i [komma igång med Azure AD Connect med standardinställningar](active-directory-aadconnect-get-started-express.md).</span><span class="sxs-lookup"><span data-stu-id="8a90d-213">For more details, see [Getting started with Azure AD Connect using express settings](active-directory-aadconnect-get-started-express.md).</span></span>

<span data-ttu-id="8a90d-214">Lösenordssynkronisering är tillgänglig på hello användaren inloggningssidan om du använder anpassade inställningar när du installerar Azure AD Connect.</span><span class="sxs-lookup"><span data-stu-id="8a90d-214">If you use custom settings when you install Azure AD Connect, password synchronization is available on hello user sign-in page.</span></span> <span data-ttu-id="8a90d-215">Mer information finns i [anpassad installation av Azure AD Connect](active-directory-aadconnect-get-started-custom.md).</span><span class="sxs-lookup"><span data-stu-id="8a90d-215">For more details, see [Custom installation of Azure AD Connect](active-directory-aadconnect-get-started-custom.md).</span></span>

![Aktivera Lösenordssynkronisering](./media/active-directory-aadconnectsync-implement-password-synchronization/usersignin.png)

### <a name="password-synchronization-and-fips"></a><span data-ttu-id="8a90d-217">Lösenordssynkronisering och FIPS</span><span class="sxs-lookup"><span data-stu-id="8a90d-217">Password synchronization and FIPS</span></span>
<span data-ttu-id="8a90d-218">Om servern har låsts enligt tooFederal Information bearbetning FIPS (Standard), har MD5 inaktiverats.</span><span class="sxs-lookup"><span data-stu-id="8a90d-218">If your server has been locked down according tooFederal Information Processing Standard (FIPS), then MD5 is disabled.</span></span>

<span data-ttu-id="8a90d-219">**tooenable MD5 för synkronisering av lösenord utför hello följande steg:**</span><span class="sxs-lookup"><span data-stu-id="8a90d-219">**tooenable MD5 for password synchronization, perform hello following steps:**</span></span>

1. <span data-ttu-id="8a90d-220">Gå too%programfiles%\Azure AD Sync\Bin.</span><span class="sxs-lookup"><span data-stu-id="8a90d-220">Go too%programfiles%\Azure AD Sync\Bin.</span></span>
2. <span data-ttu-id="8a90d-221">Öppna miiserver.exe.config.</span><span class="sxs-lookup"><span data-stu-id="8a90d-221">Open miiserver.exe.config.</span></span>
3. <span data-ttu-id="8a90d-222">Gå toohello configuration/runtime noden hello slutet av hello-filen.</span><span class="sxs-lookup"><span data-stu-id="8a90d-222">Go toohello configuration/runtime node at hello end of hello file.</span></span>
4. <span data-ttu-id="8a90d-223">Lägg till följande nod hello:`<enforceFIPSPolicy enabled="false"/>`</span><span class="sxs-lookup"><span data-stu-id="8a90d-223">Add hello following node: `<enforceFIPSPolicy enabled="false"/>`</span></span>
5. <span data-ttu-id="8a90d-224">Spara ändringarna.</span><span class="sxs-lookup"><span data-stu-id="8a90d-224">Save your changes.</span></span>

<span data-ttu-id="8a90d-225">Referens är den här fragment hur det ska se ut:</span><span class="sxs-lookup"><span data-stu-id="8a90d-225">For reference, this snippet is what it should look like:</span></span>

```
    <configuration>
        <runtime>
            <enforceFIPSPolicy enabled="false"/>
        </runtime>
    </configuration>
```

<span data-ttu-id="8a90d-226">Information om säkerhet och FIPS finns [AAD-synkronisering av lösenord, kryptering och FIPS-kompatibilitet](https://blogs.technet.microsoft.com/enterprisemobility/2014/06/28/aad-password-sync-encryption-and-fips-compliance/).</span><span class="sxs-lookup"><span data-stu-id="8a90d-226">For information about security and FIPS, see [AAD Password Sync, encryption and FIPS compliance](https://blogs.technet.microsoft.com/enterprisemobility/2014/06/28/aad-password-sync-encryption-and-fips-compliance/).</span></span>

## <a name="troubleshoot-password-synchronization"></a><span data-ttu-id="8a90d-227">Felsöka Lösenordssynkronisering</span><span class="sxs-lookup"><span data-stu-id="8a90d-227">Troubleshoot password synchronization</span></span>
<span data-ttu-id="8a90d-228">Om du har problem med synkronisering av lösenord, se [Felsöka Lösenordssynkronisering](active-directory-aadconnectsync-troubleshoot-password-synchronization.md).</span><span class="sxs-lookup"><span data-stu-id="8a90d-228">If you have problems with password synchronization, see [Troubleshoot password synchronization](active-directory-aadconnectsync-troubleshoot-password-synchronization.md).</span></span>

## <a name="next-steps"></a><span data-ttu-id="8a90d-229">Nästa steg</span><span class="sxs-lookup"><span data-stu-id="8a90d-229">Next steps</span></span>
* [<span data-ttu-id="8a90d-230">Azure AD Connect-synkronisering: anpassa synkroniseringsalternativ</span><span class="sxs-lookup"><span data-stu-id="8a90d-230">Azure AD Connect sync: Customizing synchronization options</span></span>](active-directory-aadconnectsync-whatis.md)
* [<span data-ttu-id="8a90d-231">Integrera dina lokala identiteter med Azure Active Directory</span><span class="sxs-lookup"><span data-stu-id="8a90d-231">Integrating your on-premises identities with Azure Active Directory</span></span>](active-directory-aadconnect.md)

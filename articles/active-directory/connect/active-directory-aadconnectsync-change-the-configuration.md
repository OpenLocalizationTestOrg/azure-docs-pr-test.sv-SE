---
title: "Azure AD Connect-synkronisering: gjort en konfigurationsändring i Azure AD Connect-synkronisering | Microsoft Docs"
description: "Vägleder dig igenom hur toomake en ändra toohello konfiguration i Azure AD Connect synkroniserar."
services: active-directory
documentationcenter: 
author: andkjell
manager: femila
editor: 
ms.assetid: 7b9df836-e8a5-4228-97da-2faec9238b31
ms.service: active-directory
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 07/12/2017
ms.author: billmath
ms.openlocfilehash: 78e96d9166831a668439c2b8aa6a0022bc472da4
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: sv-SE
ms.lasthandoff: 10/06/2017
---
# <a name="azure-ad-connect-sync-how-toomake-a-change-toohello-default-configuration"></a><span data-ttu-id="0369c-103">Azure AD Connect-synkronisering: hur toomake en ändring toohello standard konfiguration</span><span class="sxs-lookup"><span data-stu-id="0369c-103">Azure AD Connect sync: How toomake a change toohello default configuration</span></span>
<span data-ttu-id="0369c-104">hello syftet med det här avsnittet är toowalk igenom hur toomake ändras toohello standardkonfigurationen i Azure AD Connect-synkronisering. Den innehåller steg för några vanliga scenarier.</span><span class="sxs-lookup"><span data-stu-id="0369c-104">hello purpose of this topic is toowalk you through how toomake changes toohello default configuration in Azure AD Connect sync. It provides steps for some common scenarios.</span></span> <span data-ttu-id="0369c-105">Med den kunskapen ska kunna toomake några enkla förändringar tooyour äger konfiguration baserat på dina egna regler.</span><span class="sxs-lookup"><span data-stu-id="0369c-105">With this knowledge, you should be able toomake some simple changes tooyour own configuration based on your own business rules.</span></span>

## <a name="synchronization-rules-editor"></a><span data-ttu-id="0369c-106">Redigeraren för regler för synkronisering</span><span class="sxs-lookup"><span data-stu-id="0369c-106">Synchronization Rules Editor</span></span>
<span data-ttu-id="0369c-107">hello Synchronization regler Editor är används toosee och ändrar hello standardkonfigurationen.</span><span class="sxs-lookup"><span data-stu-id="0369c-107">hello Synchronization Rules Editor is used toosee and change hello default configuration.</span></span> <span data-ttu-id="0369c-108">Du hittar i hello Start-menyn under hello **Azure AD Connect** grupp.</span><span class="sxs-lookup"><span data-stu-id="0369c-108">You can find it in hello Start Menu under hello **Azure AD Connect** group.</span></span>  
<span data-ttu-id="0369c-109">![Start-menyn med synkronisering Rule Editor](./media/active-directory-aadconnectsync-change-the-configuration/startmenu2.png)</span><span class="sxs-lookup"><span data-stu-id="0369c-109">![Start Menu with Sync Rule Editor](./media/active-directory-aadconnectsync-change-the-configuration/startmenu2.png)</span></span>

<span data-ttu-id="0369c-110">När du öppnar den finns hello standardregler för out-of-box.</span><span class="sxs-lookup"><span data-stu-id="0369c-110">When you open it, you see hello default out-of-box rules.</span></span>

![Synkronisera Rule Editor](./media/active-directory-aadconnectsync-change-the-configuration/sre2.png)

### <a name="navigating-in-hello-editor"></a><span data-ttu-id="0369c-112">Navigera i hello-redigeraren</span><span class="sxs-lookup"><span data-stu-id="0369c-112">Navigating in hello editor</span></span>
<span data-ttu-id="0369c-113">hello-listrutor hello överst i Redigeraren för hello Tillåt tooquickly söka efter en viss regel.</span><span class="sxs-lookup"><span data-stu-id="0369c-113">hello drop-downs at hello top of hello editor allow you tooquickly find a particular rule.</span></span> <span data-ttu-id="0369c-114">Om du vill toosee hello regler där hello attributet proxyAddresses inkluderas kan ändrar du till exempel hello-listrutor toohello följande:</span><span class="sxs-lookup"><span data-stu-id="0369c-114">For example, if you want toosee hello rules where hello attribute proxyAddresses is included, you would change hello drop-downs toohello following:</span></span>  
<span data-ttu-id="0369c-115">![SRE filtrering](./media/active-directory-aadconnectsync-change-the-configuration/filtering.png)</span><span class="sxs-lookup"><span data-stu-id="0369c-115">![SRE filtering](./media/active-directory-aadconnectsync-change-the-configuration/filtering.png)</span></span>  
<span data-ttu-id="0369c-116">Tryck på tooreset filtrering och läsa in en ny konfiguration **F5** på hello tangentbord.</span><span class="sxs-lookup"><span data-stu-id="0369c-116">tooreset filtering and load a fresh configuration, press **F5** on hello keyboard.</span></span>

<span data-ttu-id="0369c-117">toohello längst upp till höger som du har en knapp **Lägg till ny regel**.</span><span class="sxs-lookup"><span data-stu-id="0369c-117">toohello top right, you have a button **Add new rule**.</span></span> <span data-ttu-id="0369c-118">Den här knappen är används toocreate en egen anpassad regel.</span><span class="sxs-lookup"><span data-stu-id="0369c-118">This button is used toocreate your own custom rule.</span></span>

<span data-ttu-id="0369c-119">Hello längst ned i ha knappar för fungerar på en vald synkroniseringsregel.</span><span class="sxs-lookup"><span data-stu-id="0369c-119">At hello bottom, you have buttons for acting on a selected sync rule.</span></span> <span data-ttu-id="0369c-120">**Redigera** och **ta bort** göra vad du förväntade dig.</span><span class="sxs-lookup"><span data-stu-id="0369c-120">**Edit** and **Delete** do what you expect them to.</span></span> <span data-ttu-id="0369c-121">**Exportera** genererar ett PowerShell-skript för att återskapa hello synkroniseringsregel.</span><span class="sxs-lookup"><span data-stu-id="0369c-121">**Export** produces a PowerShell script for recreating hello sync rule.</span></span> <span data-ttu-id="0369c-122">Den här proceduren kan du toomove en synkroniseringsregel från en server tooanother.</span><span class="sxs-lookup"><span data-stu-id="0369c-122">This procedure allows you toomove a sync rule from one server tooanother.</span></span>

## <a name="create-your-first-custom-rule"></a><span data-ttu-id="0369c-123">Skapa din första anpassad regel</span><span class="sxs-lookup"><span data-stu-id="0369c-123">Create your first custom rule</span></span>
<span data-ttu-id="0369c-124">hello vanligaste ändringen är ändringar toohello attributflöden.</span><span class="sxs-lookup"><span data-stu-id="0369c-124">hello most common change is changes toohello attribute flows.</span></span> <span data-ttu-id="0369c-125">hello data i källkatalogen kanske inte som Azure AD.</span><span class="sxs-lookup"><span data-stu-id="0369c-125">hello data in your source directory might not be as in Azure AD.</span></span> <span data-ttu-id="0369c-126">I hello exemplet i det här avsnittet som du vill att hello förnamn för en användare är alltid i toomake **rätt skiftläge**.</span><span class="sxs-lookup"><span data-stu-id="0369c-126">In hello example in this section, you want toomake sure hello given name of a user is always in **Proper case**.</span></span>

### <a name="disable-hello-scheduler"></a><span data-ttu-id="0369c-127">Inaktivera hello Schemaläggaren</span><span class="sxs-lookup"><span data-stu-id="0369c-127">Disable hello scheduler</span></span>
<span data-ttu-id="0369c-128">Hej [scheduler](active-directory-aadconnectsync-feature-scheduler.md) körs var 30: e minut som standard.</span><span class="sxs-lookup"><span data-stu-id="0369c-128">hello [scheduler](active-directory-aadconnectsync-feature-scheduler.md) runs every 30 minutes by default.</span></span> <span data-ttu-id="0369c-129">Vill du toomake att den inte startar när du gör ändringar och felsöka din nya regler.</span><span class="sxs-lookup"><span data-stu-id="0369c-129">You want toomake sure it is not starting while you are making changes and troubleshoot your new rules.</span></span> <span data-ttu-id="0369c-130">tootemporarily inaktiverar hello Schemaläggaren, starta PowerShell och kör`Set-ADSyncScheduler -SyncCycleEnabled $false`</span><span class="sxs-lookup"><span data-stu-id="0369c-130">tootemporarily disable hello scheduler, start PowerShell, and run `Set-ADSyncScheduler -SyncCycleEnabled $false`</span></span>

![Inaktivera hello Schemaläggaren](./media/active-directory-aadconnectsync-change-the-configuration/schedulerdisable.png)  

### <a name="create-hello-rule"></a><span data-ttu-id="0369c-132">Skapa hello regel</span><span class="sxs-lookup"><span data-stu-id="0369c-132">Create hello rule</span></span>
1. <span data-ttu-id="0369c-133">Klicka på **Lägg till ny regel**.</span><span class="sxs-lookup"><span data-stu-id="0369c-133">Click **Add new rule**.</span></span>
2. <span data-ttu-id="0369c-134">På hello **beskrivning** sidan Ange hello följande:</span><span class="sxs-lookup"><span data-stu-id="0369c-134">On hello **Description** page enter hello following:</span></span>  
   <span data-ttu-id="0369c-135">![Inkommande regel filtrering](./media/active-directory-aadconnectsync-change-the-configuration/description2.png)</span><span class="sxs-lookup"><span data-stu-id="0369c-135">![Inbound rule filtering](./media/active-directory-aadconnectsync-change-the-configuration/description2.png)</span></span>  
   * <span data-ttu-id="0369c-136">Namn: Ge hello regeln ett beskrivande namn.</span><span class="sxs-lookup"><span data-stu-id="0369c-136">Name: Give hello rule a descriptive name.</span></span>
   * <span data-ttu-id="0369c-137">Beskrivning: Vissa information så att någon annan kan förstå vilken hello regeln gäller.</span><span class="sxs-lookup"><span data-stu-id="0369c-137">Description: Some clarification so someone else can understand what hello rule is for.</span></span>
   * <span data-ttu-id="0369c-138">Anslutna system: hello system hello-objektet finns i.</span><span class="sxs-lookup"><span data-stu-id="0369c-138">Connected system: hello system hello object can be found in.</span></span> <span data-ttu-id="0369c-139">I det här fallet Välj hello Active Directory-kopplingen.</span><span class="sxs-lookup"><span data-stu-id="0369c-139">In this case, select hello Active Directory Connector.</span></span>
   * <span data-ttu-id="0369c-140">Anslutna System/metaversum-objekttyp: Välj **användare** och **Person** respektive.</span><span class="sxs-lookup"><span data-stu-id="0369c-140">Connected System/Metaverse Object Type: Select **User** and **Person** respectively.</span></span>
   * <span data-ttu-id="0369c-141">Länktypen: Ändra värdet för**ansluta**.</span><span class="sxs-lookup"><span data-stu-id="0369c-141">Link Type: Change this value too**Join**.</span></span>
   * <span data-ttu-id="0369c-142">Prioritet: Ange ett värde som är unikt i hello system.</span><span class="sxs-lookup"><span data-stu-id="0369c-142">Precedence: Provide a value that is unique in hello system.</span></span> <span data-ttu-id="0369c-143">Ett lägre numeriskt värde anger högre prioritet.</span><span class="sxs-lookup"><span data-stu-id="0369c-143">A lower numeric value indicates higher precedence.</span></span>
   * <span data-ttu-id="0369c-144">Tagg: Lämna tomt.</span><span class="sxs-lookup"><span data-stu-id="0369c-144">Tag: Leave empty.</span></span> <span data-ttu-id="0369c-145">Endast out-of-box regler från Microsoft ska ha den här rutan fylls i med ett värde.</span><span class="sxs-lookup"><span data-stu-id="0369c-145">Only out-of-box rules from Microsoft should have this box populated with a value.</span></span>
3. <span data-ttu-id="0369c-146">På hello **Scoping filter** anger **givenName ISNOTNULL**.</span><span class="sxs-lookup"><span data-stu-id="0369c-146">On hello **Scoping filter** page, enter **givenName ISNOTNULL**.</span></span>  
   <span data-ttu-id="0369c-147">![Regel för inkommande trafik Omfångsfilter](./media/active-directory-aadconnectsync-change-the-configuration/scopingfilter.png)</span><span class="sxs-lookup"><span data-stu-id="0369c-147">![Inbound rule scoping filter](./media/active-directory-aadconnectsync-change-the-configuration/scopingfilter.png)</span></span>  
   <span data-ttu-id="0369c-148">Det här avsnittet är används toodefine vilka objekt hello regeln ska tillämpas på.</span><span class="sxs-lookup"><span data-stu-id="0369c-148">This section is used toodefine which objects hello rule should apply to.</span></span> <span data-ttu-id="0369c-149">Om tomt skulle hello regeln tooall användarobjekt.</span><span class="sxs-lookup"><span data-stu-id="0369c-149">If left empty, hello rule would apply tooall user objects.</span></span> <span data-ttu-id="0369c-150">Men som även konferensrum, tjänstkonton och andra icke personer användarobjekt.</span><span class="sxs-lookup"><span data-stu-id="0369c-150">But that would include conference rooms, service accounts, and other non-people user objects.</span></span>
4. <span data-ttu-id="0369c-151">På hello **ansluta regler**, lämna det tomt.</span><span class="sxs-lookup"><span data-stu-id="0369c-151">On hello **Join rules**, leave it empty.</span></span>
5. <span data-ttu-id="0369c-152">På hello **transformationer** ändrar hello ExchangeRate för FlowType för**uttryck**.</span><span class="sxs-lookup"><span data-stu-id="0369c-152">On hello **Transformations** page, change hello FlowType too**Expression**.</span></span> <span data-ttu-id="0369c-153">Välj hello målattribut **givenName**, och ange i källan `PCase([givenName])`.</span><span class="sxs-lookup"><span data-stu-id="0369c-153">Select hello Target Attribute **givenName**, and in Source enter `PCase([givenName])`.</span></span>
   <span data-ttu-id="0369c-154">![Regel för inkommande trafik omvandlingar](./media/active-directory-aadconnectsync-change-the-configuration/transformations.png)</span><span class="sxs-lookup"><span data-stu-id="0369c-154">![Inbound rule transformations](./media/active-directory-aadconnectsync-change-the-configuration/transformations.png)</span></span>  
   <span data-ttu-id="0369c-155">Hej Synkroniseringsmotorn är skiftlägeskänslig både hello funktionsnamn och hello hello attributets namn.</span><span class="sxs-lookup"><span data-stu-id="0369c-155">hello sync engine is case-sensitive both on hello function name and hello name of hello attribute.</span></span> <span data-ttu-id="0369c-156">Om du skriver något fel, se en varning när du lägger till hello regeln.</span><span class="sxs-lookup"><span data-stu-id="0369c-156">If you type something wrong, you see a warning when you add hello rule.</span></span> <span data-ttu-id="0369c-157">hello editor kan du toosave och fortsätta, så har du tooreopen hello och rätt hello-regel.</span><span class="sxs-lookup"><span data-stu-id="0369c-157">hello editor allows you toosave and continue, so you would have tooreopen hello rule and correct hello rule.</span></span>
6. <span data-ttu-id="0369c-158">Klicka på **Lägg till** toosave hello regeln.</span><span class="sxs-lookup"><span data-stu-id="0369c-158">Click **Add** toosave hello rule.</span></span>

<span data-ttu-id="0369c-159">Den nya anpassa regeln ska visas med hello andra synkronisera regler i hello system.</span><span class="sxs-lookup"><span data-stu-id="0369c-159">Your new custom rule should be visible with hello other sync rules in hello system.</span></span>

### <a name="verify-hello-change"></a><span data-ttu-id="0369c-160">Kontrollera hello ändring</span><span class="sxs-lookup"><span data-stu-id="0369c-160">Verify hello change</span></span>
<span data-ttu-id="0369c-161">Med den här nya ändringar vill du toomake till att den fungerar som väntat och inte som utlöste eventuella fel.</span><span class="sxs-lookup"><span data-stu-id="0369c-161">With this new change, you want toomake sure it is working as expected and is not throwing any errors.</span></span> <span data-ttu-id="0369c-162">Beroende på hello antalet objekt som du har, finns det två olika sätt toodo det här steget.</span><span class="sxs-lookup"><span data-stu-id="0369c-162">Depending on hello number of objects you have, there are two different ways toodo this step.</span></span>

1. <span data-ttu-id="0369c-163">Kör en fullständig synkronisering för alla objekt</span><span class="sxs-lookup"><span data-stu-id="0369c-163">Run a full sync on all objects</span></span>
2. <span data-ttu-id="0369c-164">Kör en förhandsgranskning och en fullständig synkronisering på ett objekt</span><span class="sxs-lookup"><span data-stu-id="0369c-164">Run a preview and full sync on a single object</span></span>

<span data-ttu-id="0369c-165">Starta **synkroniseringstjänsten** hello start-menyn.</span><span class="sxs-lookup"><span data-stu-id="0369c-165">Start **Synchronization Service** from hello start menu.</span></span> <span data-ttu-id="0369c-166">hello stegen i det här avsnittet finns i det här verktyget.</span><span class="sxs-lookup"><span data-stu-id="0369c-166">hello steps in this section are all in this tool.</span></span>

1. <span data-ttu-id="0369c-167">**Fullständig synkronisering för alla objekt**</span><span class="sxs-lookup"><span data-stu-id="0369c-167">**Full sync on all objects**</span></span>  
   <span data-ttu-id="0369c-168">Välj **kopplingar** hello överst.</span><span class="sxs-lookup"><span data-stu-id="0369c-168">Select **Connectors** at hello top.</span></span> <span data-ttu-id="0369c-169">Identifiera hello Connector som du har gjort en ändring tooin hello föregående avsnitt i det här fallet hello Active Directory Domain Services och markera den.</span><span class="sxs-lookup"><span data-stu-id="0369c-169">Identify hello Connector you made a change tooin hello previous section, in this case hello Active Directory Domain Services, and select it.</span></span> <span data-ttu-id="0369c-170">Välj **kör** åtgärder och välj **fullständig synkronisering** och **OK**.</span><span class="sxs-lookup"><span data-stu-id="0369c-170">Select **Run** from Actions and select **Full Synchronization** and **OK**.</span></span>
   <span data-ttu-id="0369c-171">![Fullständig synkronisering](./media/active-directory-aadconnectsync-change-the-configuration/fullsync.png)</span><span class="sxs-lookup"><span data-stu-id="0369c-171">![Full sync](./media/active-directory-aadconnectsync-change-the-configuration/fullsync.png)</span></span>  
   <span data-ttu-id="0369c-172">hello-objekt har uppdaterats i hello metaversum.</span><span class="sxs-lookup"><span data-stu-id="0369c-172">hello objects are now updated in hello metaverse.</span></span> <span data-ttu-id="0369c-173">Nu vill toolook på hello objekt i hello metaversum.</span><span class="sxs-lookup"><span data-stu-id="0369c-173">You now want toolook at hello object in hello metaverse.</span></span>
2. <span data-ttu-id="0369c-174">**Förhandsgranskning och fullständig synkronisering på ett objekt**</span><span class="sxs-lookup"><span data-stu-id="0369c-174">**Preview and full sync on a single object**</span></span>  
   <span data-ttu-id="0369c-175">Välj **kopplingar** hello överst.</span><span class="sxs-lookup"><span data-stu-id="0369c-175">Select **Connectors** at hello top.</span></span> <span data-ttu-id="0369c-176">Identifiera hello Connector som du har gjort en ändring tooin hello föregående avsnitt i det här fallet hello Active Directory Domain Services och markera den.</span><span class="sxs-lookup"><span data-stu-id="0369c-176">Identify hello Connector you made a change tooin hello previous section, in this case hello Active Directory Domain Services, and select it.</span></span> <span data-ttu-id="0369c-177">Välj **söka Anslutarplats**.</span><span class="sxs-lookup"><span data-stu-id="0369c-177">Select **Search Connector Space**.</span></span> <span data-ttu-id="0369c-178">Använda omfång toofind ett objekt som du vill toouse tootest hello ändringen.</span><span class="sxs-lookup"><span data-stu-id="0369c-178">Use scope toofind an object you want toouse tootest hello change.</span></span> <span data-ttu-id="0369c-179">Välj hello objekt och klicka på **Preview**.</span><span class="sxs-lookup"><span data-stu-id="0369c-179">Select hello object and click **Preview**.</span></span> <span data-ttu-id="0369c-180">Välj i nya hello-skärmen **genomför Preview**.</span><span class="sxs-lookup"><span data-stu-id="0369c-180">In hello new screen, select **Commit Preview**.</span></span>  
   <span data-ttu-id="0369c-181">![Genomför preview](./media/active-directory-aadconnectsync-change-the-configuration/commitpreview.png)</span><span class="sxs-lookup"><span data-stu-id="0369c-181">![Commit preview](./media/active-directory-aadconnectsync-change-the-configuration/commitpreview.png)</span></span>  
   <span data-ttu-id="0369c-182">hello ändringen är nu allokerade toohello metaversum.</span><span class="sxs-lookup"><span data-stu-id="0369c-182">hello change is now committed toohello metaverse.</span></span>

<span data-ttu-id="0369c-183">**Titta på hello objekt i hello metaversum**</span><span class="sxs-lookup"><span data-stu-id="0369c-183">**Look at hello object in hello metaverse**</span></span>  
<span data-ttu-id="0369c-184">Nu vill toopick några objekt toomake att hello exempelvärde förväntas och hello regeln tillämpas.</span><span class="sxs-lookup"><span data-stu-id="0369c-184">You now want toopick a few sample objects toomake sure hello value is expected and that hello rule applied.</span></span> <span data-ttu-id="0369c-185">Välj **metaversumsökningen** hello uppifrån.</span><span class="sxs-lookup"><span data-stu-id="0369c-185">Select **Metaverse Search** from hello top.</span></span> <span data-ttu-id="0369c-186">Lägg till eventuella filter som du behöver toofind hello relevanta objekt.</span><span class="sxs-lookup"><span data-stu-id="0369c-186">Add any filter you need toofind hello relevant objects.</span></span> <span data-ttu-id="0369c-187">Öppna ett objekt från hello sökresultatet.</span><span class="sxs-lookup"><span data-stu-id="0369c-187">From hello search result, open an object.</span></span> <span data-ttu-id="0369c-188">Titta på hello attributvärden och Kontrollera också i hello **Sync regler** kolumn som hello regeln tillämpas som förväntat.</span><span class="sxs-lookup"><span data-stu-id="0369c-188">Look at hello attribute values and also verify in hello **Sync Rules** column that hello rule applied as expected.</span></span>  
<span data-ttu-id="0369c-189">![Metaversumsökning](./media/active-directory-aadconnectsync-change-the-configuration/mvsearch.png)</span><span class="sxs-lookup"><span data-stu-id="0369c-189">![Metaverse search](./media/active-directory-aadconnectsync-change-the-configuration/mvsearch.png)</span></span>  

### <a name="enable-hello-scheduler"></a><span data-ttu-id="0369c-190">Aktivera hello Schemaläggaren</span><span class="sxs-lookup"><span data-stu-id="0369c-190">Enable hello scheduler</span></span>
<span data-ttu-id="0369c-191">Om allt är som förväntat, kan du aktivera hello Schemaläggaren igen.</span><span class="sxs-lookup"><span data-stu-id="0369c-191">If everything is as expected, you can enable hello scheduler again.</span></span> <span data-ttu-id="0369c-192">Kör från PowerShell `Set-ADSyncScheduler -SyncCycleEnabled $true`.</span><span class="sxs-lookup"><span data-stu-id="0369c-192">From PowerShell, run `Set-ADSyncScheduler -SyncCycleEnabled $true`.</span></span>

## <a name="other-common-attribute-flow-changes"></a><span data-ttu-id="0369c-193">Andra vanliga flödet attributändringar</span><span class="sxs-lookup"><span data-stu-id="0369c-193">Other common attribute flow changes</span></span>
<span data-ttu-id="0369c-194">hello föregående avsnitt beskrivs hur toomake ändras tooan attributflöde.</span><span class="sxs-lookup"><span data-stu-id="0369c-194">hello previous section described how toomake changes tooan attribute flow.</span></span> <span data-ttu-id="0369c-195">I det här avsnittet finns ytterligare exempel.</span><span class="sxs-lookup"><span data-stu-id="0369c-195">In this section, some additional examples are provided.</span></span> <span data-ttu-id="0369c-196">hello anvisningar för hur toocreate hello synkroniseringsregel förkortas, men du kan hitta hello fullständig steg hello föregående avsnitt.</span><span class="sxs-lookup"><span data-stu-id="0369c-196">hello steps for how toocreate hello sync rule is abbreviated, but you can find hello full steps in hello previous section.</span></span>

### <a name="use-another-attribute-than-hello-default"></a><span data-ttu-id="0369c-197">Använd ett annat attribut än hello som standard</span><span class="sxs-lookup"><span data-stu-id="0369c-197">Use another attribute than hello default</span></span>
<span data-ttu-id="0369c-198">Det finns en skog där hello lokala alfabetet används för förnamn, efternamn och namn på Fabrikam.</span><span class="sxs-lookup"><span data-stu-id="0369c-198">At Fabrikam, there is a forest where hello local alphabet is used for given name, surname, and display name.</span></span> <span data-ttu-id="0369c-199">hello latinska teckenrepresentation av dessa attribut finns i hello tilläggsattribut.</span><span class="sxs-lookup"><span data-stu-id="0369c-199">hello Latin character representation of these attributes can be found in hello extension attributes.</span></span> <span data-ttu-id="0369c-200">När du skapar hello globala adresslista i Azure AD och Office 365 hello organisationen vill dessa attribut toobe som används i stället.</span><span class="sxs-lookup"><span data-stu-id="0369c-200">When building hello global address list in Azure AD and Office 365, hello organization wants these attributes toobe used instead.</span></span>

<span data-ttu-id="0369c-201">Med en standardkonfiguration ett objekt från hello lokala skogen ser ut så här:</span><span class="sxs-lookup"><span data-stu-id="0369c-201">With a default configuration, an object from hello local forest looks like this:</span></span>  
![Attributflöde 1](./media/active-directory-aadconnectsync-change-the-configuration/attributeflowjp1.png)

<span data-ttu-id="0369c-203">toocreate en regel med andra attributflöden hello följande:</span><span class="sxs-lookup"><span data-stu-id="0369c-203">toocreate a rule with other attribute flows, do hello following:</span></span>

* <span data-ttu-id="0369c-204">Starta **Synchronization Rule Editor** hello start-menyn.</span><span class="sxs-lookup"><span data-stu-id="0369c-204">Start **Synchronization Rule Editor** from hello start menu.</span></span>
* <span data-ttu-id="0369c-205">Med **inkommande** fortfarande valda toohello vänster, klicka på hello **Lägg till ny regel**.</span><span class="sxs-lookup"><span data-stu-id="0369c-205">With **Inbound** still selected toohello left, click hello button **Add new rule**.</span></span>
* <span data-ttu-id="0369c-206">Ge hello regeln ett namn och beskrivning.</span><span class="sxs-lookup"><span data-stu-id="0369c-206">Give hello rule a name and description.</span></span> <span data-ttu-id="0369c-207">Välj hello lokala Active Directory och hello relevanta objekttyper.</span><span class="sxs-lookup"><span data-stu-id="0369c-207">Select hello on-premises Active Directory and hello relevant object types.</span></span> <span data-ttu-id="0369c-208">I **länktypen**väljer **ansluta**.</span><span class="sxs-lookup"><span data-stu-id="0369c-208">In **Link Type**, select **Join**.</span></span> <span data-ttu-id="0369c-209">Välj ett värde som inte används av en annan regel för prioritet.</span><span class="sxs-lookup"><span data-stu-id="0369c-209">For precedence, pick a number that is not used by another rule.</span></span> <span data-ttu-id="0369c-210">hello out-of-box regler börja med 100, så hello värdet 50 kan användas i det här exemplet.</span><span class="sxs-lookup"><span data-stu-id="0369c-210">hello out-of-box rules start with 100, so hello value 50 can be used in this example.</span></span>
  <span data-ttu-id="0369c-211">![Attributflöde 2](./media/active-directory-aadconnectsync-change-the-configuration/attributeflowjp2.png)</span><span class="sxs-lookup"><span data-stu-id="0369c-211">![Attribute flow 2](./media/active-directory-aadconnectsync-change-the-configuration/attributeflowjp2.png)</span></span>
* <span data-ttu-id="0369c-212">Lämna det tomt omfång (det vill säga tillämpas tooall användarobjekt i hello skog).</span><span class="sxs-lookup"><span data-stu-id="0369c-212">Leave scope empty (that is, should apply tooall user objects in hello forest).</span></span>
* <span data-ttu-id="0369c-213">Lämna anslutning till regler tomt (med är, vilka hello out-of-box regeln referensen eventuella kopplingar).</span><span class="sxs-lookup"><span data-stu-id="0369c-213">Leave join rules empty (that is, let hello out-of-box rule handle any joins).</span></span>
* <span data-ttu-id="0369c-214">Skapa följande flöden hello i omvandlingar:</span><span class="sxs-lookup"><span data-stu-id="0369c-214">In Transformations, create hello following flows:</span></span>  
  ![Attributflöde 3](./media/active-directory-aadconnectsync-change-the-configuration/attributeflowjp3.png)
* <span data-ttu-id="0369c-216">Klicka på **Lägg till** toosave hello regeln.</span><span class="sxs-lookup"><span data-stu-id="0369c-216">Click **Add** toosave hello rule.</span></span>
* <span data-ttu-id="0369c-217">Gå för**Synchronization Service Manager**.</span><span class="sxs-lookup"><span data-stu-id="0369c-217">Go too**Synchronization Service Manager**.</span></span> <span data-ttu-id="0369c-218">På **kopplingar**, Välj hello Connector där vi har lagt till hello regeln.</span><span class="sxs-lookup"><span data-stu-id="0369c-218">On **Connectors**, select hello Connector where we added hello rule.</span></span> <span data-ttu-id="0369c-219">Välj **kör**, och **fullständig synkronisering**.</span><span class="sxs-lookup"><span data-stu-id="0369c-219">Select **Run**, and **Full Synchronization**.</span></span> <span data-ttu-id="0369c-220">En fullständig synkronisering beräknar alla objekt med aktuella hello-regler.</span><span class="sxs-lookup"><span data-stu-id="0369c-220">A Full Synchronization recalculates all objects using hello current rules.</span></span>

<span data-ttu-id="0369c-221">Detta är hello resultat för samma objekt med den här anpassade regeln hello:</span><span class="sxs-lookup"><span data-stu-id="0369c-221">This is hello result for hello same object with this custom rule:</span></span>  
![Attributflöde 4](./media/active-directory-aadconnectsync-change-the-configuration/attributeflowjp4.png)

### <a name="length-of-attributes"></a><span data-ttu-id="0369c-223">Längden på attribut</span><span class="sxs-lookup"><span data-stu-id="0369c-223">Length of attributes</span></span>
<span data-ttu-id="0369c-224">Attribut för anslutningssträngen är som standard set toobe indexeras och hello maximala längden är 448 tecken.</span><span class="sxs-lookup"><span data-stu-id="0369c-224">String attributes are by default set toobe indexable and hello maximum length is 448 characters.</span></span> <span data-ttu-id="0369c-225">Om du arbetar med string-attribut som kan innehålla flera gör du följande för att tooinclude hello i hello attributflöde:</span><span class="sxs-lookup"><span data-stu-id="0369c-225">If you are working with string attributes that might contain more, then make sure tooinclude hello following in hello attribute flow:</span></span>  
`attributeName` <- `Left([attributeName],448)`

### <a name="changing-hello-userprincipalsuffix"></a><span data-ttu-id="0369c-226">Ändra hello userPrincipalSuffix</span><span class="sxs-lookup"><span data-stu-id="0369c-226">Changing hello userPrincipalSuffix</span></span>
<span data-ttu-id="0369c-227">hello userPrincipalName attribut i Active Directory inte alltid är känt av hello användare och kan inte användas som hello inloggnings-ID.</span><span class="sxs-lookup"><span data-stu-id="0369c-227">hello userPrincipalName attribute in Active Directory is not always known by hello users and might not be suitable as hello sign-in ID.</span></span> <span data-ttu-id="0369c-228">hello Azure AD Connect sync-installationsguiden kan välja ett annat attribut, till exempel e-post.</span><span class="sxs-lookup"><span data-stu-id="0369c-228">hello Azure AD Connect sync installation wizard allows picking a different attribute, for example mail.</span></span> <span data-ttu-id="0369c-229">Men i vissa fall hello attributet måste beräknas.</span><span class="sxs-lookup"><span data-stu-id="0369c-229">But in some cases hello attribute must be calculated.</span></span> <span data-ttu-id="0369c-230">Hello företaget Contoso har till exempel två Azure AD-kataloger, en för produktion och en för testning.</span><span class="sxs-lookup"><span data-stu-id="0369c-230">For example, hello company Contoso has two Azure AD directories, one for production and one for testing.</span></span> <span data-ttu-id="0369c-231">De vill hello användare i deras test klient toouse en annan suffix i hello inloggnings-ID.</span><span class="sxs-lookup"><span data-stu-id="0369c-231">They want hello users in their test tenant toouse another suffix in hello sign-in ID.</span></span>  
`userPrincipalName` <- `Word([userPrincipalName],1,"@") & "@contosotest.com"`

<span data-ttu-id="0369c-232">I det här uttrycket ta allt vänsterkant hello först @-sign (Word) och sammanfoga med en fast sträng.</span><span class="sxs-lookup"><span data-stu-id="0369c-232">In this expression, take everything left of hello first @-sign (Word) and concatenate with a fixed string.</span></span>

### <a name="convert-a-multi-value-tooa-single-value"></a><span data-ttu-id="0369c-233">Konvertera ett Flervärde tooa värde</span><span class="sxs-lookup"><span data-stu-id="0369c-233">Convert a multi-value tooa single-value</span></span>
<span data-ttu-id="0369c-234">Vissa attribut i Active Directory är flera värden i hello schemat även om de letar enda värden i Active Directory-användare och datorer.</span><span class="sxs-lookup"><span data-stu-id="0369c-234">Some attributes in Active Directory are multi-valued in hello schema even though they look single valued in Active Directory Users and Computers.</span></span> <span data-ttu-id="0369c-235">Ett exempel är hello beskrivningsattribut.</span><span class="sxs-lookup"><span data-stu-id="0369c-235">An example is hello description attribute.</span></span>  
`description` <- `IIF(IsNullOrEmpty([description]),NULL,Left(Trim(Item([description],1)),448))`

<span data-ttu-id="0369c-236">I det här uttrycket om hello-attributet har ett värde, ta hello första objektet (objekt) i hello attribut, ta bort inledande och avslutande blanksteg (Trim) och sedan se hello först 448 tecken (till vänster) i hello-sträng.</span><span class="sxs-lookup"><span data-stu-id="0369c-236">In this expression in case hello attribute has a value, take hello first item (Item) in hello attribute, remove leading and trailing spaces (Trim), and then keep hello first 448 characters (Left) in hello string.</span></span>

### <a name="do-not-flow-an-attribute"></a><span data-ttu-id="0369c-237">Flöda inte ett attribut</span><span class="sxs-lookup"><span data-stu-id="0369c-237">Do not flow an attribute</span></span>
<span data-ttu-id="0369c-238">Bakgrundsinformation om hello scenario för det här avsnittet finns [styra hello attributet flödet processen](active-directory-aadconnectsync-understanding-declarative-provisioning.md#control-the-attribute-flow-process).</span><span class="sxs-lookup"><span data-stu-id="0369c-238">For background on hello scenario for this section, see [Control hello attribute flow process](active-directory-aadconnectsync-understanding-declarative-provisioning.md#control-the-attribute-flow-process).</span></span>

<span data-ttu-id="0369c-239">Det finns två sätt toonot flöda ett attribut.</span><span class="sxs-lookup"><span data-stu-id="0369c-239">There are two ways toonot flow an attribute.</span></span> <span data-ttu-id="0369c-240">hello först finns i installationsguiden för hello och låter dig för[ta bort markerade attributen](active-directory-aadconnect-get-started-custom.md#azure-ad-app-and-attribute-filtering).</span><span class="sxs-lookup"><span data-stu-id="0369c-240">hello first is available in hello installation wizard and allows you too[remove selected attributes](active-directory-aadconnect-get-started-custom.md#azure-ad-app-and-attribute-filtering).</span></span> <span data-ttu-id="0369c-241">Det här alternativet fungerar om du inte har synkroniserat hello attributet innan.</span><span class="sxs-lookup"><span data-stu-id="0369c-241">This option works if you have never synchronized hello attribute before.</span></span> <span data-ttu-id="0369c-242">Om du har startat toosynchronize det här attributet och tar bort med den här funktionen sedan hello Synkroniseringsmotorn slutar att hantera hello attribut och hello befintliga värden finns kvar i Azure AD.</span><span class="sxs-lookup"><span data-stu-id="0369c-242">However, if you have started toosynchronize this attribute and later remove it with this feature, then hello sync engine stops managing hello attribute and hello existing values are left in Azure AD.</span></span>

<span data-ttu-id="0369c-243">Om du vill tooremove hello värdet för ett attribut och kontrollera att den inte flödar i hello framtida måste du skapa en anpassad regel i stället.</span><span class="sxs-lookup"><span data-stu-id="0369c-243">If you want tooremove hello value of an attribute and make sure it does not flow in hello future, you need create a custom rule instead.</span></span>

<span data-ttu-id="0369c-244">På Fabrikam, har vi insåg att vissa av hello attribut som vi synkronisera toohello molnet inte får vara det.</span><span class="sxs-lookup"><span data-stu-id="0369c-244">At Fabrikam, we have realized that some of hello attributes we synchronize toohello cloud should not be there.</span></span> <span data-ttu-id="0369c-245">Vi vill toomake att attributen tas bort från Azure AD.</span><span class="sxs-lookup"><span data-stu-id="0369c-245">We want toomake sure these attributes are removed from Azure AD.</span></span>  
![Felaktig tilläggsattribut](./media/active-directory-aadconnectsync-change-the-configuration/badextensionattribute.png)

* <span data-ttu-id="0369c-247">Skapa en ny regel för inkommande synkronisering och fylla hello beskrivning ![beskrivningar](./media/active-directory-aadconnectsync-change-the-configuration/syncruledescription.png)</span><span class="sxs-lookup"><span data-stu-id="0369c-247">Create a new inbound Synchronization Rule and populate hello description ![Descriptions](./media/active-directory-aadconnectsync-change-the-configuration/syncruledescription.png)</span></span>
* <span data-ttu-id="0369c-248">Skapa attributflöden av typen **uttryck** och med hello källan **AuthoritativeNull**.</span><span class="sxs-lookup"><span data-stu-id="0369c-248">Create attribute flows of type **Expression** and with hello source **AuthoritativeNull**.</span></span> <span data-ttu-id="0369c-249">hello literal **AuthoritativeNull** anger att hello värdet ska vara tomt i hello MV även om en lägre prioritet synkroniseringsregel försöker toopopulate hello värde.</span><span class="sxs-lookup"><span data-stu-id="0369c-249">hello literal **AuthoritativeNull** indicates that hello value should be empty in hello MV even if a lower precedence sync rule tries toopopulate hello value.</span></span>
  <span data-ttu-id="0369c-250">![Omvandlingen för tilläggsattribut](./media/active-directory-aadconnectsync-change-the-configuration/syncruletransformations.png)</span><span class="sxs-lookup"><span data-stu-id="0369c-250">![Transformation for Extension Attributes](./media/active-directory-aadconnectsync-change-the-configuration/syncruletransformations.png)</span></span>
* <span data-ttu-id="0369c-251">Spara hello Synkroniseringsregel.</span><span class="sxs-lookup"><span data-stu-id="0369c-251">Save hello Sync Rule.</span></span> <span data-ttu-id="0369c-252">Starta **synkroniseringstjänsten**, hitta hello koppling, Välj **kör**, och **fullständig synkronisering**.</span><span class="sxs-lookup"><span data-stu-id="0369c-252">Start **Synchronization Service**, find hello Connector, select **Run**, and **Full Synchronization**.</span></span> <span data-ttu-id="0369c-253">Det här steget beräknar alla attributflöden.</span><span class="sxs-lookup"><span data-stu-id="0369c-253">This step recalculates all attribute flows.</span></span>
* <span data-ttu-id="0369c-254">Kontrollera att hello avsedd ändras om toobe exporteras genom att söka hello anslutningsplatsen.</span><span class="sxs-lookup"><span data-stu-id="0369c-254">Verify that hello intended changes are about toobe exported by searching hello connector space.</span></span>
  <span data-ttu-id="0369c-255">![Stegvis ta bort](./media/active-directory-aadconnectsync-change-the-configuration/deletetobeexported.png)</span><span class="sxs-lookup"><span data-stu-id="0369c-255">![Staged delete](./media/active-directory-aadconnectsync-change-the-configuration/deletetobeexported.png)</span></span>

## <a name="create-rules-with-powershell"></a><span data-ttu-id="0369c-256">Skapa regler med PowerShell</span><span class="sxs-lookup"><span data-stu-id="0369c-256">Create rules with PowerShell</span></span>
<span data-ttu-id="0369c-257">Med hjälp av hello sync Regelredigerare fungerar bra när du bara har några ändringar toomake.</span><span class="sxs-lookup"><span data-stu-id="0369c-257">Using hello sync rule editor works fine when you only have a few changes toomake.</span></span> <span data-ttu-id="0369c-258">Om du behöver toomake många ändringar kan PowerShell vara ett bättre alternativ.</span><span class="sxs-lookup"><span data-stu-id="0369c-258">If you need toomake many changes, then PowerShell might be a better option.</span></span> <span data-ttu-id="0369c-259">Vissa avancerade funktioner är bara tillgängliga med PowerShell.</span><span class="sxs-lookup"><span data-stu-id="0369c-259">Some advanced features are only available with PowerShell.</span></span>

### <a name="get-hello-powershell-script-for-an-out-of-box-rule"></a><span data-ttu-id="0369c-260">Hämta hello PowerShell-skript för en out-of-box-regel</span><span class="sxs-lookup"><span data-stu-id="0369c-260">Get hello PowerShell script for an out-of-box rule</span></span>
<span data-ttu-id="0369c-261">toosee hello PowerShell-skript som skapats av en out-of-box regeln, väljer hello regeln i hello sync regler redigeraren och klicka på **exportera**.</span><span class="sxs-lookup"><span data-stu-id="0369c-261">toosee hello PowerShell script that created an out-of-box rule, select hello rule in hello sync rules editor and click **Export**.</span></span> <span data-ttu-id="0369c-262">Den här åtgärden ger du hello PowerShell script skapade hello regeln.</span><span class="sxs-lookup"><span data-stu-id="0369c-262">This action gives you hello PowerShell script that created hello rule.</span></span>

### <a name="advanced-precedence"></a><span data-ttu-id="0369c-263">Avancerade prioritet</span><span class="sxs-lookup"><span data-stu-id="0369c-263">Advanced precedence</span></span>
<span data-ttu-id="0369c-264">hello out-of-box sync regler börja med högre prioriteringsvärdet 100.</span><span class="sxs-lookup"><span data-stu-id="0369c-264">hello out-of-box sync rules start with a precedence value of 100.</span></span> <span data-ttu-id="0369c-265">Om du har många skogar och du behöver toomake kanske många egna ändringar och sedan 99 sync regler inte finns tillräckligt med.</span><span class="sxs-lookup"><span data-stu-id="0369c-265">If you have many forests and you need toomake many custom changes, then 99 sync rules might not be enough.</span></span>

<span data-ttu-id="0369c-266">Du kan instruera hello Synkroniseringsmotorn som du vill att ytterligare regler som infogas före hello out-of-box-regler.</span><span class="sxs-lookup"><span data-stu-id="0369c-266">You can instruct hello Sync Engine that you want additional rules inserted before hello out-of-box rules.</span></span> <span data-ttu-id="0369c-267">tooget problemet, gör du följande:</span><span class="sxs-lookup"><span data-stu-id="0369c-267">tooget this behavior, follow these steps:</span></span>

1. <span data-ttu-id="0369c-268">Markera hello första out-of-box synkroniseringsregel (den här regeln är hello **i från AD-användare ansluta**) i hello sync Regelredigeraren och välj **exportera**.</span><span class="sxs-lookup"><span data-stu-id="0369c-268">Mark hello first out-of-box sync rule (this rule is hello **In from AD-User Join**) in hello sync rule editor and select **Export**.</span></span> <span data-ttu-id="0369c-269">Kopiera hello SR ID-värde.</span><span class="sxs-lookup"><span data-stu-id="0369c-269">Copy hello SR Identifier value.</span></span>  
<span data-ttu-id="0369c-270">![PowerShell före ändringen](./media/active-directory-aadconnectsync-change-the-configuration/powershell1.png)</span><span class="sxs-lookup"><span data-stu-id="0369c-270">![PowerShell before change](./media/active-directory-aadconnectsync-change-the-configuration/powershell1.png)</span></span>  
2. <span data-ttu-id="0369c-271">Skapa hello ny regel för synkronisering.</span><span class="sxs-lookup"><span data-stu-id="0369c-271">Create hello new sync rule.</span></span> <span data-ttu-id="0369c-272">Du kan använda hello sync regeln editor toocreate den.</span><span class="sxs-lookup"><span data-stu-id="0369c-272">You can use hello sync rule editor toocreate it.</span></span> <span data-ttu-id="0369c-273">Exportera hello regeln tooa PowerShell-skript.</span><span class="sxs-lookup"><span data-stu-id="0369c-273">Export hello rule tooa PowerShell script.</span></span>
3. <span data-ttu-id="0369c-274">I hello egenskapen **PrecedenceBefore**, infoga hello ID-värde från hello out-of-box regeln.</span><span class="sxs-lookup"><span data-stu-id="0369c-274">In hello property **PrecedenceBefore**, insert hello identifier value from hello out-of-box rule.</span></span> <span data-ttu-id="0369c-275">Ange hello **prioritet** för**0**.</span><span class="sxs-lookup"><span data-stu-id="0369c-275">Set hello **Precedence** too**0**.</span></span> <span data-ttu-id="0369c-276">Kontrollera att hello identifierarattribut är unikt och du inte återanvänder en GUID från en annan regel.</span><span class="sxs-lookup"><span data-stu-id="0369c-276">Make sure hello Identifier attribute is unique and you are not reusing a GUID from another rule.</span></span> <span data-ttu-id="0369c-277">Kontrollera också att hello **ImmutableTag** anges inte egenskapen; den här egenskapen får endast anges för en out-of-box-regel.</span><span class="sxs-lookup"><span data-stu-id="0369c-277">Also make sure that hello **ImmutableTag** property is not set; this property should only be set for an out-of-box rule.</span></span> <span data-ttu-id="0369c-278">Spara hello PowerShell-skript och köra den.</span><span class="sxs-lookup"><span data-stu-id="0369c-278">Save hello PowerShell script and run it.</span></span> <span data-ttu-id="0369c-279">hello resultatet är att en anpassad regel tilldelas hello prioritet värde på 100 och alla andra regler i out-of-box ökas.</span><span class="sxs-lookup"><span data-stu-id="0369c-279">hello result is that your custom rule is assigned hello precedence value of 100 and all other out-of-box rules are incremented.</span></span>  
<span data-ttu-id="0369c-280">![PowerShell efter ändring](./media/active-directory-aadconnectsync-change-the-configuration/powershell2.png)</span><span class="sxs-lookup"><span data-stu-id="0369c-280">![PowerShell after change](./media/active-directory-aadconnectsync-change-the-configuration/powershell2.png)</span></span>  

<span data-ttu-id="0369c-281">Du kan ha många anpassade sync regler med hjälp av hello samma **PrecedenceBefore** värdet vid behov.</span><span class="sxs-lookup"><span data-stu-id="0369c-281">You can have many custom sync rules using hello same **PrecedenceBefore** value when needed.</span></span>


## <a name="enable-synchronization-of-preferreddatalocation"></a><span data-ttu-id="0369c-282">Aktivera synkroniseringen av PreferredDataLocation</span><span class="sxs-lookup"><span data-stu-id="0369c-282">Enable synchronization of PreferredDataLocation</span></span>
<span data-ttu-id="0369c-283">Azure AD Connect har stöd för synkronisering av hello **PreferredDataLocation** attribut för **användaren** objekt i version 1.1.524.0 och efter.</span><span class="sxs-lookup"><span data-stu-id="0369c-283">Azure AD Connect supports synchronization of hello **PreferredDataLocation** attribute for **User** objects in version 1.1.524.0 and after.</span></span> <span data-ttu-id="0369c-284">Följande ändringar har införts mer specifikt:</span><span class="sxs-lookup"><span data-stu-id="0369c-284">More specifically, following changes have been introduced:</span></span>

* <span data-ttu-id="0369c-285">hello schemat för hello objekttyp **användaren** i hello Azure AD Connector utökas tooinclude PreferredDataLocation attribut som är av typen string och enkelvärdesattribut.</span><span class="sxs-lookup"><span data-stu-id="0369c-285">hello schema of hello object type **User** in hello Azure AD Connector is extended tooinclude PreferredDataLocation attribute, which is of type string and is single-valued.</span></span>

* <span data-ttu-id="0369c-286">hello schemat för hello objekttyp **Person** i hello metaversum utökas tooinclude PreferredDataLocation attribut som är av typen string och enkelvärdesattribut.</span><span class="sxs-lookup"><span data-stu-id="0369c-286">hello schema of hello object type **Person** in hello Metaverse is extended tooinclude PreferredDataLocation attribute, which is of type string and is single-valued.</span></span>

<span data-ttu-id="0369c-287">Som standard aktiveras inte hello PreferredDataLocation attribut för synkronisering eftersom det inte finns något motsvarande attribut för PreferredDataLocation i lokala Active Directory.</span><span class="sxs-lookup"><span data-stu-id="0369c-287">By default, hello PreferredDataLocation attribute is not enabled for synchronization because there is no corresponding PreferredDataLocation attribute in on-premises Active Directory.</span></span> <span data-ttu-id="0369c-288">Du måste manuellt Aktivera synkronisering.</span><span class="sxs-lookup"><span data-stu-id="0369c-288">You must manually enable synchronization.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="0369c-289">Azure AD kan för närvarande hello PreferredDataLocation attributet på både synkroniserade objekt och i molnet användaren objekt toobe direkt konfigureras med Azure AD PowerShell.</span><span class="sxs-lookup"><span data-stu-id="0369c-289">Currently, Azure AD allows hello PreferredDataLocation attribute on both synchronized User objects and cloud User objects toobe directly configured using Azure AD PowerShell.</span></span> <span data-ttu-id="0369c-290">När du har aktiverat synkronisering av hello PreferredDataLocation attribut, måste du sluta använda Azure AD PowerShell tooconfigure hello attributet på **synkroniseras användarobjekt** som Azure AD Connect åsidosätter dem baserat på hello källa attributvärden i lokala Active Directory.</span><span class="sxs-lookup"><span data-stu-id="0369c-290">Once you have enabled synchronization of hello PreferredDataLocation attribute, you must stop using Azure AD PowerShell tooconfigure hello attribute on **synchronized User objects** as Azure AD Connect will override them based on hello source attribute values in on-premises Active Directory.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="0369c-291">I September 1 2017, Azure AD inte längre att tillåta hello PreferredDataLocation attributet på **synkroniseras användarobjekt** toobe direkt konfigureras med Azure AD PowerShell.</span><span class="sxs-lookup"><span data-stu-id="0369c-291">On September 1 2017, Azure AD will no longer allow hello PreferredDataLocation attribute on **synchronized User objects** toobe directly configured using Azure AD PowerShell.</span></span> <span data-ttu-id="0369c-292">tooconfigure PreferredLocation-attributet på synkroniserade objekt måste du använda Azure AD Connect endast.</span><span class="sxs-lookup"><span data-stu-id="0369c-292">tooconfigure PreferredLocation attribute on synchronized User objects, you must use Azure AD Connect only.</span></span>

<span data-ttu-id="0369c-293">Innan du aktiverar synkronisering av hello PreferredDataLocation attribut, måste du:</span><span class="sxs-lookup"><span data-stu-id="0369c-293">Before enabling synchronization of hello PreferredDataLocation attribute, you must:</span></span>

 * <span data-ttu-id="0369c-294">Bestäm vilka lokala Active Directory-attributet toobe används som hello källattribut först.</span><span class="sxs-lookup"><span data-stu-id="0369c-294">First, decide which on-premises Active Directory attribute toobe used as hello source attribute.</span></span> <span data-ttu-id="0369c-295">Det ska vara av typen **sträng** och **enstaka**.</span><span class="sxs-lookup"><span data-stu-id="0369c-295">It should be of type **string** and is **single-valued**.</span></span>

 * <span data-ttu-id="0369c-296">Om du tidigare har konfigurerat hello PreferredDataLocation attributet på befintliga synkroniseras användarobjekt i Azure AD med hjälp av Azure AD PowerShell, måste du **backport** hello attributet värden toohello motsvarande användarobjekt i lokala Active Directory.</span><span class="sxs-lookup"><span data-stu-id="0369c-296">If you have previously configured hello PreferredDataLocation attribute on existing synchronized User objects in Azure AD using Azure AD PowerShell, you must **backport** hello attribute values toohello corresponding User objects in on-premises Active Directory.</span></span>
 
    > [!IMPORTANT]
    > <span data-ttu-id="0369c-297">Om du gör inte backport hello attributet värden toohello motsvarande användarobjekt i lokala Active Directory och tar Azure AD Connect bort hello befintliga attributvärden i Azure AD när synkroniseringen för hello PreferredDataLocation attributet är aktiverad.</span><span class="sxs-lookup"><span data-stu-id="0369c-297">If you do not backport hello attribute values toohello corresponding User objects in on-premises Active Directory, Azure AD Connect will remove hello existing attribute values in Azure AD when synchronization for hello PreferredDataLocation attribute is enabled.</span></span>

 * <span data-ttu-id="0369c-298">Bör du konfigurera hello källattribut på minst några lokala AD-användare objekt nu, som kan användas för verifiering senare.</span><span class="sxs-lookup"><span data-stu-id="0369c-298">It is recommended you configure hello source attribute on at least a couple of on-premises AD User objects now, which can be used for verification later.</span></span>
 
<span data-ttu-id="0369c-299">hello steg tooenable synkronisering av hello PreferredDataLocation attribut kan sammanfattas som:</span><span class="sxs-lookup"><span data-stu-id="0369c-299">hello steps tooenable synchronization of hello PreferredDataLocation attribute can be summarized as:</span></span>

1. <span data-ttu-id="0369c-300">Inaktivera sync scheduler och kontrollera att det finns ingen synkronisering pågår</span><span class="sxs-lookup"><span data-stu-id="0369c-300">Disable sync scheduler and verify there is no synchronization in progress</span></span>

2. <span data-ttu-id="0369c-301">Lägg till hello källa attributet toohello lokala AD-koppling schema</span><span class="sxs-lookup"><span data-stu-id="0369c-301">Add hello source attribute toohello on-premises AD Connector schema</span></span>

3. <span data-ttu-id="0369c-302">Lägg till PreferredDataLocation toohello Azure AD Connector schema</span><span class="sxs-lookup"><span data-stu-id="0369c-302">Add PreferredDataLocation toohello Azure AD Connector schema</span></span>

4. <span data-ttu-id="0369c-303">Skapa ett attributvärde för inkommande synkronisering regeln tooflow hello från lokala Active Directory</span><span class="sxs-lookup"><span data-stu-id="0369c-303">Create an inbound synchronization rule tooflow hello attribute value from on-premises Active Directory</span></span>

5. <span data-ttu-id="0369c-304">Skapa ett utgående synkronisering regeln tooflow hello-attributet värdet tooAzure AD</span><span class="sxs-lookup"><span data-stu-id="0369c-304">Create an outbound synchronization rule tooflow hello attribute value tooAzure AD</span></span>

6. <span data-ttu-id="0369c-305">Kör fullständig synkroniseringscykel</span><span class="sxs-lookup"><span data-stu-id="0369c-305">Run Full Synchronization cycle</span></span>

7. <span data-ttu-id="0369c-306">Aktivera sync scheduler</span><span class="sxs-lookup"><span data-stu-id="0369c-306">Enable sync scheduler</span></span>

> [!NOTE]
> <span data-ttu-id="0369c-307">hello resten av det här avsnittet beskriver de här stegen i information.</span><span class="sxs-lookup"><span data-stu-id="0369c-307">hello rest of this section covers these steps in details.</span></span> <span data-ttu-id="0369c-308">De beskrivs i hello kontexten för en Azure AD-distribution med en skog topologi och utan anpassade Synkroniseringsregler.</span><span class="sxs-lookup"><span data-stu-id="0369c-308">They are described in hello context of an Azure AD deployment with single-forest topology and without custom synchronization rules.</span></span> <span data-ttu-id="0369c-309">Om du har flera skogar topologi anpassade Synkroniseringsregler konfigurerats eller har en fristående server måste du tooadjust hello steg i enlighet med detta.</span><span class="sxs-lookup"><span data-stu-id="0369c-309">If you have multi-forest topology, custom synchronization rules configured or have a staging server, you need tooadjust hello steps accordingly.</span></span>

### <a name="step-1-disable-sync-scheduler-and-verify-there-is-no-synchronization-in-progress"></a><span data-ttu-id="0369c-310">Steg 1: Inaktivera sync scheduler och kontrollera att det finns ingen synkronisering pågår</span><span class="sxs-lookup"><span data-stu-id="0369c-310">Step 1: Disable sync scheduler and verify there is no synchronization in progress</span></span>
<span data-ttu-id="0369c-311">Se till att ingen synkronisering sker när du arbetar med hello mitten av uppdatering synkronisering regler tooavoid oavsiktliga ändringar som exporteras tooAzure AD.</span><span class="sxs-lookup"><span data-stu-id="0369c-311">Ensure no synchronization takes place while you are in hello middle of updating synchronization rules tooavoid unintended changes being exported tooAzure AD.</span></span> <span data-ttu-id="0369c-312">toodisable hello inbyggda sync scheduler:</span><span class="sxs-lookup"><span data-stu-id="0369c-312">toodisable hello built-in sync scheduler:</span></span>

 1. <span data-ttu-id="0369c-313">Starta PowerShell-session på hello Azure AD Connect-servern.</span><span class="sxs-lookup"><span data-stu-id="0369c-313">Start PowerShell session on hello Azure AD Connect server.</span></span>

 2. <span data-ttu-id="0369c-314">Inaktivera schemalagda synkroniseringen genom att köra cmdlet:`Set-ADSyncScheduler -SyncCycleEnabled $false`</span><span class="sxs-lookup"><span data-stu-id="0369c-314">Disable scheduled synchronization by running cmdlet: `Set-ADSyncScheduler -SyncCycleEnabled $false`</span></span>
 
 3. <span data-ttu-id="0369c-315">Starta hello **Synchronization Service Manager** genom att gå tooSTART → synkroniseringstjänsten.</span><span class="sxs-lookup"><span data-stu-id="0369c-315">Start hello **Synchronization Service Manager** by going tooSTART → Synchronization Service.</span></span>
 
 4. <span data-ttu-id="0369c-316">Gå toohello **Operations** fliken och bekräfta att ingen åtgärd vars status är *”pågår”.*</span><span class="sxs-lookup"><span data-stu-id="0369c-316">Go toohello **Operations** tab and confirm there is no operation whose status is *“in progress.”*</span></span>

![Synchronization Service Manager - Kontrollera att inga åtgärder pågår](./media/active-directory-aadconnectsync-change-the-configuration/preferredDataLocation-step1.png)

### <a name="step-2-add-hello-source-attribute-toohello-on-premises-ad-connector-schema"></a><span data-ttu-id="0369c-318">Steg 2: Lägg till hello källa attributet toohello lokala AD-koppling schema</span><span class="sxs-lookup"><span data-stu-id="0369c-318">Step 2: Add hello source attribute toohello on-premises AD Connector schema</span></span>
<span data-ttu-id="0369c-319">Inte alla AD-attribut kan importeras till hello lokala AD-anslutningsplatsen.</span><span class="sxs-lookup"><span data-stu-id="0369c-319">Not all AD attributes are imported into hello on-premises AD Connector Space.</span></span> <span data-ttu-id="0369c-320">tooadd hello källa toohello attributlistan för hello importeras attribut:</span><span class="sxs-lookup"><span data-stu-id="0369c-320">tooadd hello source attribute toohello list of hello imported attributes:</span></span>

 1. <span data-ttu-id="0369c-321">Gå toohello **kopplingar** fliken i hello Synchronization Service Manager.</span><span class="sxs-lookup"><span data-stu-id="0369c-321">Go toohello **Connectors** tab in hello Synchronization Service Manager.</span></span>
 
 2. <span data-ttu-id="0369c-322">Högerklicka på hello **lokala AD-koppling** och välj **egenskaper**.</span><span class="sxs-lookup"><span data-stu-id="0369c-322">Right-click on hello **on-premises AD Connector** and select **Properties**.</span></span>
 
 3. <span data-ttu-id="0369c-323">Hello popup-fönstret, Välj toohello **Välj attribut** fliken.</span><span class="sxs-lookup"><span data-stu-id="0369c-323">In hello pop-up dialog, go toohello **Select Attributes** tab.</span></span>
 
 4. <span data-ttu-id="0369c-324">Kontrollera att hello källattributet är markerat i hello attributlistan.</span><span class="sxs-lookup"><span data-stu-id="0369c-324">Make sure hello source attribute is checked in hello attribute list.</span></span>
 
 5. <span data-ttu-id="0369c-325">Klicka på **OK** toosave.</span><span class="sxs-lookup"><span data-stu-id="0369c-325">Click **OK** toosave.</span></span>

![Lägg till källan attributet tooon lokala AD-koppling schema](./media/active-directory-aadconnectsync-change-the-configuration/preferredDataLocation-step2.png)

### <a name="step-3-add-preferreddatalocation-toohello-azure-ad-connector-schema"></a><span data-ttu-id="0369c-327">Steg 3: Lägg till PreferredDataLocation toohello Azure AD Connector schema</span><span class="sxs-lookup"><span data-stu-id="0369c-327">Step 3: Add PreferredDataLocation toohello Azure AD Connector schema</span></span>
<span data-ttu-id="0369c-328">Hej PreferredDataLocation attributet är som standard inte importeras till hello Azure AD Connect utrymme.</span><span class="sxs-lookup"><span data-stu-id="0369c-328">By default, hello PreferredDataLocation attribute is not imported into hello Azure AD Connect Space.</span></span> <span data-ttu-id="0369c-329">tooadd hello PreferredDataLocation attributet toohello listan över importerade attribut:</span><span class="sxs-lookup"><span data-stu-id="0369c-329">tooadd hello PreferredDataLocation attribute toohello list of imported attributes:</span></span>

 1. <span data-ttu-id="0369c-330">Gå toohello **kopplingar** fliken i hello Synchronization Service Manager.</span><span class="sxs-lookup"><span data-stu-id="0369c-330">Go toohello **Connectors** tab in hello Synchronization Service Manager.</span></span>

 2. <span data-ttu-id="0369c-331">Högerklicka på hello **Azure AD Connector** och välj **egenskaper**.</span><span class="sxs-lookup"><span data-stu-id="0369c-331">Right-click on hello **Azure AD Connector** and select **Properties**.</span></span>

 3. <span data-ttu-id="0369c-332">Hello popup-fönstret, Välj toohello **Välj attribut** fliken.</span><span class="sxs-lookup"><span data-stu-id="0369c-332">In hello pop-up dialog, go toohello **Select Attributes** tab.</span></span>

 4. <span data-ttu-id="0369c-333">Kontrollera att kontrolleras hello PreferredDataLocation attribut i attributlistan hello.</span><span class="sxs-lookup"><span data-stu-id="0369c-333">Make sure hello PreferredDataLocation attribute is checked in hello attribute list.</span></span>

 5. <span data-ttu-id="0369c-334">Klicka på **OK** toosave.</span><span class="sxs-lookup"><span data-stu-id="0369c-334">Click **OK** toosave.</span></span>

![Lägg till källan attributet tooAzure schemat för AD-koppling](./media/active-directory-aadconnectsync-change-the-configuration/preferredDataLocation-step3.png)

### <a name="step-4-create-an-inbound-synchronization-rule-tooflow-hello-attribute-value-from-on-premises-active-directory"></a><span data-ttu-id="0369c-336">Steg 4: Skapa ett attributvärde för inkommande synkronisering regeln tooflow hello från lokala Active Directory</span><span class="sxs-lookup"><span data-stu-id="0369c-336">Step 4: Create an inbound synchronization rule tooflow hello attribute value from on-premises Active Directory</span></span>
<span data-ttu-id="0369c-337">regel för inkommande synkronisering av hello tillåter hello-attributet värdet tooflow från hello källattribut från lokala Active Directory toohello metaversum:</span><span class="sxs-lookup"><span data-stu-id="0369c-337">hello inbound synchronization rule permits hello attribute value tooflow from hello source attribute from on-premises Active Directory toohello Metaverse:</span></span>

1. <span data-ttu-id="0369c-338">Starta hello **Synchronization regler Editor** genom att gå tooSTART → synkronisering regler Editor.</span><span class="sxs-lookup"><span data-stu-id="0369c-338">Start hello **Synchronization Rules Editor** by going tooSTART → Synchronization Rules Editor.</span></span>

2. <span data-ttu-id="0369c-339">Ange hello sökfilter **riktning** toobe **inkommande**.</span><span class="sxs-lookup"><span data-stu-id="0369c-339">Set hello search filter **Direction** toobe **Inbound**.</span></span>

3. <span data-ttu-id="0369c-340">Klicka på **Lägg till ny regel** knappen toocreate en ny inkommande regel.</span><span class="sxs-lookup"><span data-stu-id="0369c-340">Click **Add new rule** button toocreate a new inbound rule.</span></span>

4. <span data-ttu-id="0369c-341">Under hello **beskrivning** fliken, ange hello följande konfiguration:</span><span class="sxs-lookup"><span data-stu-id="0369c-341">Under hello **Description** tab, provide hello following configuration:</span></span>
 
    | <span data-ttu-id="0369c-342">Attribut</span><span class="sxs-lookup"><span data-stu-id="0369c-342">Attribute</span></span> | <span data-ttu-id="0369c-343">Värde</span><span class="sxs-lookup"><span data-stu-id="0369c-343">Value</span></span> | <span data-ttu-id="0369c-344">Information</span><span class="sxs-lookup"><span data-stu-id="0369c-344">Details</span></span> |
    | --- | --- | --- |
    | <span data-ttu-id="0369c-345">Namn</span><span class="sxs-lookup"><span data-stu-id="0369c-345">Name</span></span> | <span data-ttu-id="0369c-346">*Ange ett namn*</span><span class="sxs-lookup"><span data-stu-id="0369c-346">*Provide a name*</span></span> | <span data-ttu-id="0369c-347">Till exempel *”i från AD-användaren PreferredDataLocation”*</span><span class="sxs-lookup"><span data-stu-id="0369c-347">For example, *“In from AD – User PreferredDataLocation”*</span></span> |
    | <span data-ttu-id="0369c-348">Beskrivning</span><span class="sxs-lookup"><span data-stu-id="0369c-348">Description</span></span> | <span data-ttu-id="0369c-349">*Ange en beskrivning*</span><span class="sxs-lookup"><span data-stu-id="0369c-349">*Provide a description*</span></span> |  |
    | <span data-ttu-id="0369c-350">Det anslutna systemet</span><span class="sxs-lookup"><span data-stu-id="0369c-350">Connected System</span></span> | <span data-ttu-id="0369c-351">*Välj hello lokala AD-koppling*</span><span class="sxs-lookup"><span data-stu-id="0369c-351">*Pick hello on-premises AD connector*</span></span> |  |
    | <span data-ttu-id="0369c-352">Anslutna System objekttyp</span><span class="sxs-lookup"><span data-stu-id="0369c-352">Connected System Object Type</span></span> | <span data-ttu-id="0369c-353">**Användaren**</span><span class="sxs-lookup"><span data-stu-id="0369c-353">**User**</span></span> |  |
    | <span data-ttu-id="0369c-354">Typ av Metaversumobjekt</span><span class="sxs-lookup"><span data-stu-id="0369c-354">Metaverse Object Type</span></span> | <span data-ttu-id="0369c-355">**Person**</span><span class="sxs-lookup"><span data-stu-id="0369c-355">**Person**</span></span> |  |
    | <span data-ttu-id="0369c-356">Länktypen</span><span class="sxs-lookup"><span data-stu-id="0369c-356">Link Type</span></span> | <span data-ttu-id="0369c-357">**Anslut dig**</span><span class="sxs-lookup"><span data-stu-id="0369c-357">**Join**</span></span> |  |
    | <span data-ttu-id="0369c-358">Prioritet</span><span class="sxs-lookup"><span data-stu-id="0369c-358">Precedence</span></span> | <span data-ttu-id="0369c-359">*Välj ett tal mellan 1 – 99*</span><span class="sxs-lookup"><span data-stu-id="0369c-359">*Choose a number between 1 – 99*</span></span> | <span data-ttu-id="0369c-360">1 – 99 är reserverat för synkronisering av anpassade regler.</span><span class="sxs-lookup"><span data-stu-id="0369c-360">1 – 99 is reserved for custom sync rules.</span></span> <span data-ttu-id="0369c-361">Välj inte ett värde som används av en annan regel för synkronisering.</span><span class="sxs-lookup"><span data-stu-id="0369c-361">Do not pick a value that is used by another synchronization rule.</span></span> |

5. <span data-ttu-id="0369c-362">Gå toohello **Scoping filter** fliken och Lägg till en **målgrupp filter grupp med hello följande sats**:</span><span class="sxs-lookup"><span data-stu-id="0369c-362">Go toohello **Scoping filter** tab and add a **single scoping filter group with hello following clause**:</span></span>
 
    | <span data-ttu-id="0369c-363">Attribut</span><span class="sxs-lookup"><span data-stu-id="0369c-363">Attribute</span></span> | <span data-ttu-id="0369c-364">Operatorn</span><span class="sxs-lookup"><span data-stu-id="0369c-364">Operator</span></span> | <span data-ttu-id="0369c-365">Värde</span><span class="sxs-lookup"><span data-stu-id="0369c-365">Value</span></span> |
    | --- | --- | --- |
    | <span data-ttu-id="0369c-366">administratörsbeskrivning</span><span class="sxs-lookup"><span data-stu-id="0369c-366">adminDescription</span></span> | <span data-ttu-id="0369c-367">NOTSTARTWITH</span><span class="sxs-lookup"><span data-stu-id="0369c-367">NOTSTARTWITH</span></span> | <span data-ttu-id="0369c-368">Användaren\_</span><span class="sxs-lookup"><span data-stu-id="0369c-368">User\_</span></span> | 
 
    <span data-ttu-id="0369c-369">Målgrupp filter avgör vilka lokala AD-objekt den här regeln för inkommande synkronisering tillämpas på.</span><span class="sxs-lookup"><span data-stu-id="0369c-369">Scoping filter determines which on-premises AD objects this inbound synchronization rule is applied to.</span></span> <span data-ttu-id="0369c-370">I det här exemplet använder vi hello samma målgrupp filter används som *”i från AD-användaren gemensamma”* OOB synkroniseringsregeln, vilket förhindrar att hello synkroniseringsregeln tillämpas tooUser objekt som skapats via tillbakaskrivning av Azure AD-användare funktionen.</span><span class="sxs-lookup"><span data-stu-id="0369c-370">In this example, we use hello same scoping filter used as *“In from AD – User Common”* OOB synchronization rule, which prevents hello synchronization rule from being applied tooUser objects created through Azure AD User writeback feature.</span></span> <span data-ttu-id="0369c-371">Du kan behöva tootweak hello målgrupp filter enligt tooyour Azure AD Connect-distribution.</span><span class="sxs-lookup"><span data-stu-id="0369c-371">You may need tootweak hello scoping filter according tooyour Azure AD Connect deployment.</span></span>

6. <span data-ttu-id="0369c-372">Gå toohello **omvandling fliken** och implementera hello följande omvandlingsregeln:</span><span class="sxs-lookup"><span data-stu-id="0369c-372">Go toohello **Transformation tab** and implement hello following transformation rule:</span></span>
 
    | <span data-ttu-id="0369c-373">Flöde</span><span class="sxs-lookup"><span data-stu-id="0369c-373">Flow Type</span></span> | <span data-ttu-id="0369c-374">Målattribut</span><span class="sxs-lookup"><span data-stu-id="0369c-374">Target Attribute</span></span> | <span data-ttu-id="0369c-375">Källa</span><span class="sxs-lookup"><span data-stu-id="0369c-375">Source</span></span> | <span data-ttu-id="0369c-376">Använda en gång</span><span class="sxs-lookup"><span data-stu-id="0369c-376">Apply Once</span></span> | <span data-ttu-id="0369c-377">Kopplingstyp</span><span class="sxs-lookup"><span data-stu-id="0369c-377">Merge Type</span></span> |
    | --- | --- | --- | --- | --- |
    | <span data-ttu-id="0369c-378">Direkt</span><span class="sxs-lookup"><span data-stu-id="0369c-378">Direct</span></span> | <span data-ttu-id="0369c-379">PreferredDataLocation</span><span class="sxs-lookup"><span data-stu-id="0369c-379">PreferredDataLocation</span></span> | <span data-ttu-id="0369c-380">Välj hello källattribut</span><span class="sxs-lookup"><span data-stu-id="0369c-380">Pick hello source attribute</span></span> | <span data-ttu-id="0369c-381">Alternativet är avmarkerat</span><span class="sxs-lookup"><span data-stu-id="0369c-381">Unchecked</span></span> | <span data-ttu-id="0369c-382">Uppdatering</span><span class="sxs-lookup"><span data-stu-id="0369c-382">Update</span></span> |

7. <span data-ttu-id="0369c-383">Klicka på **Lägg till** toocreate hello inkommande regel.</span><span class="sxs-lookup"><span data-stu-id="0369c-383">Click **Add** toocreate hello inbound rule.</span></span>

![Skapa regel för inkommande synkronisering](./media/active-directory-aadconnectsync-change-the-configuration/preferredDataLocation-step4.png)

### <a name="step-5-create-an-outbound-synchronization-rule-tooflow-hello-attribute-value-tooazure-ad"></a><span data-ttu-id="0369c-385">Steg 5: Skapa ett utgående synkronisering regeln tooflow hello-attributet värdet tooAzure AD</span><span class="sxs-lookup"><span data-stu-id="0369c-385">Step 5: Create an outbound synchronization rule tooflow hello attribute value tooAzure AD</span></span>
<span data-ttu-id="0369c-386">hello utgående synkroniseringsregel tillåter hello-attributet värdet tooflow från hello metaversum toohello PreferredDataLocation attribut i Azure AD:</span><span class="sxs-lookup"><span data-stu-id="0369c-386">hello outbound synchronization rule permits hello attribute value tooflow from hello Metaverse toohello PreferredDataLocation attribute in Azure AD:</span></span>

1. <span data-ttu-id="0369c-387">Gå toohello **Synkroniseringsregler** Editor.</span><span class="sxs-lookup"><span data-stu-id="0369c-387">Go toohello **Synchronization Rules** Editor.</span></span>

2. <span data-ttu-id="0369c-388">Ange hello sökfilter **riktning** toobe **utgående**.</span><span class="sxs-lookup"><span data-stu-id="0369c-388">Set hello search filter **Direction** toobe **Outbound**.</span></span>

3. <span data-ttu-id="0369c-389">Klicka på **Lägg till ny regel** knappen.</span><span class="sxs-lookup"><span data-stu-id="0369c-389">Click **Add new rule** button.</span></span>

4. <span data-ttu-id="0369c-390">Under hello **beskrivning** fliken, ange hello följande konfiguration:</span><span class="sxs-lookup"><span data-stu-id="0369c-390">Under hello **Description** tab, provide hello following configuration:</span></span>

    | <span data-ttu-id="0369c-391">Attribut</span><span class="sxs-lookup"><span data-stu-id="0369c-391">Attribute</span></span> | <span data-ttu-id="0369c-392">Värde</span><span class="sxs-lookup"><span data-stu-id="0369c-392">Value</span></span> | <span data-ttu-id="0369c-393">Information</span><span class="sxs-lookup"><span data-stu-id="0369c-393">Details</span></span> |
    | --- | --- | --- |
    | <span data-ttu-id="0369c-394">Namn</span><span class="sxs-lookup"><span data-stu-id="0369c-394">Name</span></span> | <span data-ttu-id="0369c-395">*Ange ett namn*</span><span class="sxs-lookup"><span data-stu-id="0369c-395">*Provide a name*</span></span> | <span data-ttu-id="0369c-396">Till exempel ”ut tooAAD – användaren PreferredDataLocation”</span><span class="sxs-lookup"><span data-stu-id="0369c-396">For example, “Out tooAAD – User PreferredDataLocation”</span></span> |
    | <span data-ttu-id="0369c-397">Beskrivning</span><span class="sxs-lookup"><span data-stu-id="0369c-397">Description</span></span> | <span data-ttu-id="0369c-398">*Ange en beskrivning*</span><span class="sxs-lookup"><span data-stu-id="0369c-398">*Provide a description*</span></span> |
    | <span data-ttu-id="0369c-399">Det anslutna systemet</span><span class="sxs-lookup"><span data-stu-id="0369c-399">Connected System</span></span> | <span data-ttu-id="0369c-400">*Välj hello AAD-koppling*</span><span class="sxs-lookup"><span data-stu-id="0369c-400">*Select hello AAD connector*</span></span> |
    | <span data-ttu-id="0369c-401">Anslutna System objekttyp</span><span class="sxs-lookup"><span data-stu-id="0369c-401">Connected System Object Type</span></span> | <span data-ttu-id="0369c-402">Användare</span><span class="sxs-lookup"><span data-stu-id="0369c-402">User</span></span> ||
    | <span data-ttu-id="0369c-403">Typ av Metaversumobjekt</span><span class="sxs-lookup"><span data-stu-id="0369c-403">Metaverse Object Type</span></span> | <span data-ttu-id="0369c-404">**Person**</span><span class="sxs-lookup"><span data-stu-id="0369c-404">**Person**</span></span> ||
    | <span data-ttu-id="0369c-405">Länktypen</span><span class="sxs-lookup"><span data-stu-id="0369c-405">Link Type</span></span> | <span data-ttu-id="0369c-406">**Anslut dig**</span><span class="sxs-lookup"><span data-stu-id="0369c-406">**Join**</span></span> ||
    | <span data-ttu-id="0369c-407">Prioritet</span><span class="sxs-lookup"><span data-stu-id="0369c-407">Precedence</span></span> | <span data-ttu-id="0369c-408">*Välj ett tal mellan 1 – 99*</span><span class="sxs-lookup"><span data-stu-id="0369c-408">*Choose a number between 1 – 99*</span></span> | <span data-ttu-id="0369c-409">1 – 99 är reserverat för synkronisering av anpassade regler.</span><span class="sxs-lookup"><span data-stu-id="0369c-409">1 – 99 is reserved for custom sync rules.</span></span> <span data-ttu-id="0369c-410">YDo inte hämtar ett värde som används av en annan regel för synkronisering.</span><span class="sxs-lookup"><span data-stu-id="0369c-410">YDo not pick a value that is used by another synchronization rule.</span></span> |

5. <span data-ttu-id="0369c-411">Gå toohello **Scoping filter** fliken och Lägg till en **målgrupp filter grupp med två klausuler**:</span><span class="sxs-lookup"><span data-stu-id="0369c-411">Go toohello **Scoping filter** tab and add a **single scoping filter group with two clauses**:</span></span>
 
    | <span data-ttu-id="0369c-412">Attribut</span><span class="sxs-lookup"><span data-stu-id="0369c-412">Attribute</span></span> | <span data-ttu-id="0369c-413">Operatorn</span><span class="sxs-lookup"><span data-stu-id="0369c-413">Operator</span></span> | <span data-ttu-id="0369c-414">Värde</span><span class="sxs-lookup"><span data-stu-id="0369c-414">Value</span></span> |
    | --- | --- | --- |
    | <span data-ttu-id="0369c-415">sourceObjectType</span><span class="sxs-lookup"><span data-stu-id="0369c-415">sourceObjectType</span></span> | <span data-ttu-id="0369c-416">LIKA MED</span><span class="sxs-lookup"><span data-stu-id="0369c-416">EQUAL</span></span> | <span data-ttu-id="0369c-417">Användare</span><span class="sxs-lookup"><span data-stu-id="0369c-417">User</span></span> |
    | <span data-ttu-id="0369c-418">cloudMastered</span><span class="sxs-lookup"><span data-stu-id="0369c-418">cloudMastered</span></span> | <span data-ttu-id="0369c-419">NOTEQUAL</span><span class="sxs-lookup"><span data-stu-id="0369c-419">NOTEQUAL</span></span> | <span data-ttu-id="0369c-420">True</span><span class="sxs-lookup"><span data-stu-id="0369c-420">True</span></span> |

    <span data-ttu-id="0369c-421">Målgrupp filter avgör vilka Azure AD-objekt den här utgående synkroniseringsregeln tillämpas på.</span><span class="sxs-lookup"><span data-stu-id="0369c-421">Scoping filter determines which Azure AD objects this outbound synchronization rule is applied to.</span></span> <span data-ttu-id="0369c-422">I det här exemplet använder vi hello samma målgrupp filter från ”ut tooAD – användaridentitet” OOB synkroniseringsregeln.</span><span class="sxs-lookup"><span data-stu-id="0369c-422">In this example, we use hello same scoping filter from “Out tooAD – User Identity” OOB synchronization rule.</span></span> <span data-ttu-id="0369c-423">Det förhindrar hello synkroniseringsregeln tillämpade tooUser objekt som inte synkroniseras från lokala Active Directory.</span><span class="sxs-lookup"><span data-stu-id="0369c-423">It prevents hello synchronization rule from being applied tooUser objects which are not synchronized from on-premises Active Directory.</span></span> <span data-ttu-id="0369c-424">Du kan behöva tootweak hello målgrupp filter enligt tooyour Azure AD Connect-distribution.</span><span class="sxs-lookup"><span data-stu-id="0369c-424">You may need tootweak hello scoping filter according tooyour Azure AD Connect deployment.</span></span>
    
6. <span data-ttu-id="0369c-425">Gå toohello **omvandling** fliken och implementera hello följande omvandlingsregeln:</span><span class="sxs-lookup"><span data-stu-id="0369c-425">Go toohello **Transformation** tab and implement hello following transformation rule:</span></span>

    | <span data-ttu-id="0369c-426">Flöde</span><span class="sxs-lookup"><span data-stu-id="0369c-426">Flow Type</span></span> | <span data-ttu-id="0369c-427">Målattribut</span><span class="sxs-lookup"><span data-stu-id="0369c-427">Target Attribute</span></span> | <span data-ttu-id="0369c-428">Källa</span><span class="sxs-lookup"><span data-stu-id="0369c-428">Source</span></span> | <span data-ttu-id="0369c-429">Använda en gång</span><span class="sxs-lookup"><span data-stu-id="0369c-429">Apply Once</span></span> | <span data-ttu-id="0369c-430">Kopplingstyp</span><span class="sxs-lookup"><span data-stu-id="0369c-430">Merge Type</span></span> |
    | --- | --- | --- | --- | --- |
    | <span data-ttu-id="0369c-431">Direkt</span><span class="sxs-lookup"><span data-stu-id="0369c-431">Direct</span></span> | <span data-ttu-id="0369c-432">PreferredDataLocation</span><span class="sxs-lookup"><span data-stu-id="0369c-432">PreferredDataLocation</span></span> | <span data-ttu-id="0369c-433">PreferredDataLocation</span><span class="sxs-lookup"><span data-stu-id="0369c-433">PreferredDataLocation</span></span> | <span data-ttu-id="0369c-434">Alternativet är avmarkerat</span><span class="sxs-lookup"><span data-stu-id="0369c-434">Unchecked</span></span> | <span data-ttu-id="0369c-435">Uppdatering</span><span class="sxs-lookup"><span data-stu-id="0369c-435">Update</span></span> |

7. <span data-ttu-id="0369c-436">Stäng **Lägg till** toocreate hello regel för utgående trafik.</span><span class="sxs-lookup"><span data-stu-id="0369c-436">Close **Add** toocreate hello outbound rule.</span></span>

![Skapa regel för utgående synkronisering](./media/active-directory-aadconnectsync-change-the-configuration/preferredDataLocation-step5.png)

### <a name="step-6-run-full-synchronization-cycle"></a><span data-ttu-id="0369c-438">Steg 6: Kör fullständig synkroniseringscykel</span><span class="sxs-lookup"><span data-stu-id="0369c-438">Step 6: Run Full Synchronization cycle</span></span>
<span data-ttu-id="0369c-439">I allmänhet krävs fullständig synkroniseringscykel eftersom vi har lagt till nya attribut tooboth hello AD och Azure AD Connector schema och introduceras anpassade Synkroniseringsregler.</span><span class="sxs-lookup"><span data-stu-id="0369c-439">In general, full synchronization cycle is required since we have added new attributes tooboth hello AD and Azure AD Connector schema, and introduced custom synchronization rules.</span></span> <span data-ttu-id="0369c-440">Vi rekommenderar att du kontrollerar hello ändringar innan du exporterar dem tooAzure AD.</span><span class="sxs-lookup"><span data-stu-id="0369c-440">It is recommended that you verify hello changes before exporting them tooAzure AD.</span></span> <span data-ttu-id="0369c-441">Du kan använda följande steg tooverify hello ändringar när du kör manuellt hello steg som utgör en fullständig synkroniseringscykel hello.</span><span class="sxs-lookup"><span data-stu-id="0369c-441">You can use hello following steps tooverify hello changes while manually running hello steps that make up a full synchronization cycle.</span></span> 

1. <span data-ttu-id="0369c-442">Kör **fullständig import** steg på hello **lokala AD-koppling**:</span><span class="sxs-lookup"><span data-stu-id="0369c-442">Run **Full import** step on hello **on-premises AD Connector**:</span></span>

   1. <span data-ttu-id="0369c-443">Gå toohello **Operations** fliken i hello Synchronization Service Manager.</span><span class="sxs-lookup"><span data-stu-id="0369c-443">Go toohello **Operations** tab in hello Synchronization Service Manager.</span></span>

   2. <span data-ttu-id="0369c-444">Högerklicka på hello **lokala AD-koppling** och välj **kör...**</span><span class="sxs-lookup"><span data-stu-id="0369c-444">Right-click on hello **on-premises AD Connector** and select **Run...**</span></span>

   3. <span data-ttu-id="0369c-445">I popup-dialogrutan hello väljer **fullständig Import** och på **OK**.</span><span class="sxs-lookup"><span data-stu-id="0369c-445">In hello pop-up dialog, select **Full Import** and click **OK**.</span></span>
    
   4. <span data-ttu-id="0369c-446">Vänta tills åtgärden toocomplete.</span><span class="sxs-lookup"><span data-stu-id="0369c-446">Wait for operation toocomplete.</span></span>

    > [!NOTE]
    > <span data-ttu-id="0369c-447">Du kan hoppa över fullständig Import på hello lokala AD-koppling om hello källattribut ingår redan i hello listan över importerade attribut.</span><span class="sxs-lookup"><span data-stu-id="0369c-447">You can skip Full Import on hello on-premises AD Connector if hello source attribute is already included in hello list of imported attributes.</span></span> <span data-ttu-id="0369c-448">Med andra ord du inte har toomake ändringar under [steg 2: Lägg till hello källa attributet toohello lokala AD-koppling schemat](#step-2-add-the-source-attribute-to-the-on-premises-ad-connector-schema).</span><span class="sxs-lookup"><span data-stu-id="0369c-448">In other words, you did not have toomake any change during [Step 2: Add hello source attribute toohello on-premises AD Connector schema](#step-2-add-the-source-attribute-to-the-on-premises-ad-connector-schema).</span></span>

2. <span data-ttu-id="0369c-449">Kör **fullständig import** steg på hello **Azure AD Connector**:</span><span class="sxs-lookup"><span data-stu-id="0369c-449">Run **Full import** step on hello **Azure AD Connector**:</span></span>

   1. <span data-ttu-id="0369c-450">Högerklicka på hello **Azure AD Connector** och välj **kör...**</span><span class="sxs-lookup"><span data-stu-id="0369c-450">Right-click on hello **Azure AD Connector** and select **Run...**</span></span>

   2. <span data-ttu-id="0369c-451">I popup-dialogrutan hello väljer **fullständig Import** och på **OK**.</span><span class="sxs-lookup"><span data-stu-id="0369c-451">In hello pop-up dialog, select **Full Import** and click **OK**.</span></span>
   
   3. <span data-ttu-id="0369c-452">Vänta tills åtgärden toocomplete.</span><span class="sxs-lookup"><span data-stu-id="0369c-452">Wait for operation toocomplete.</span></span>

3. <span data-ttu-id="0369c-453">Kontrollera hello synkronisering regeländringar på ett befintligt användarobjekt:</span><span class="sxs-lookup"><span data-stu-id="0369c-453">Verify hello synchronization rule changes on an existing User object:</span></span>

<span data-ttu-id="0369c-454">hello källattribut från lokala Active Directory och PreferredDataLocation från Azure AD har importerats till hello respektive anslutningen utrymme.</span><span class="sxs-lookup"><span data-stu-id="0369c-454">hello source attribute from on-premises Active Directory and PreferredDataLocation from Azure AD have been imported into hello respective Connecter Space.</span></span> <span data-ttu-id="0369c-455">Innan du fortsätter med fullständig synkronisering steg, bör du göra en **Preview** på en befintlig användares objekt i hello lokala AD-anslutningsplatsen.</span><span class="sxs-lookup"><span data-stu-id="0369c-455">Before proceeding with Full Synchronization step, it is recommended that you do a **Preview** on an existing User object in hello on-premises AD Connector Space.</span></span> <span data-ttu-id="0369c-456">hello objekt du valt bör ha hello källattribut fylls i.</span><span class="sxs-lookup"><span data-stu-id="0369c-456">hello object you picked should have hello source attribute populated.</span></span> <span data-ttu-id="0369c-457">En lyckad **Preview** med hello PreferredDataLocation i hello metaversum är en bra indikator som du har konfigurerat hello Synkroniseringsregler korrekt.</span><span class="sxs-lookup"><span data-stu-id="0369c-457">A successful **Preview** with hello PreferredDataLocation populated in hello Metaverse is a good indicator that you have configured hello synchronization rules correctly.</span></span> <span data-ttu-id="0369c-458">Information om hur toodo en **Preview**, se toosection [verifiera hello ändra](#verify-the-change).</span><span class="sxs-lookup"><span data-stu-id="0369c-458">For information about how toodo a **Preview**, refer toosection [Verify hello change](#verify-the-change).</span></span>

4. <span data-ttu-id="0369c-459">Kör **fullständig synkronisering** steg på hello **lokala AD-koppling**:</span><span class="sxs-lookup"><span data-stu-id="0369c-459">Run **Full Synchronization** step on hello **on-premises AD Connector**:</span></span>

   1. <span data-ttu-id="0369c-460">Högerklicka på hello **lokala AD-koppling** och välj **kör...**</span><span class="sxs-lookup"><span data-stu-id="0369c-460">Right-click on hello **on-premises AD Connector** and select **Run...**</span></span>
  
   2. <span data-ttu-id="0369c-461">I popup-dialogrutan hello väljer **fullständig synkronisering** och på **OK**.</span><span class="sxs-lookup"><span data-stu-id="0369c-461">In hello pop-up dialog, select **Full Synchronization** and click **OK**.</span></span>
   
   3. <span data-ttu-id="0369c-462">Vänta tills åtgärden toocomplete.</span><span class="sxs-lookup"><span data-stu-id="0369c-462">Wait for operation toocomplete.</span></span>

5. <span data-ttu-id="0369c-463">Kontrollera **väntande exporter** tooAzure AD:</span><span class="sxs-lookup"><span data-stu-id="0369c-463">Verify **Pending Exports** tooAzure AD:</span></span>

   1. <span data-ttu-id="0369c-464">Högerklicka på hello **Azure AD Connector** och välj **söka Anslutarplats**.</span><span class="sxs-lookup"><span data-stu-id="0369c-464">Right-click on hello **Azure AD Connector** and select **Search Connector Space**.</span></span>

   2. <span data-ttu-id="0369c-465">I hello Sök anslutningsplatsen popup-fönstret:</span><span class="sxs-lookup"><span data-stu-id="0369c-465">In hello Search Connector Space pop-up dialog:</span></span>

      1. <span data-ttu-id="0369c-466">Ange **omfång** för**väntande exportera**.</span><span class="sxs-lookup"><span data-stu-id="0369c-466">Set **Scope** too**Pending Export**.</span></span>
      
      2. <span data-ttu-id="0369c-467">Markera alla tre kryssrutorna, inklusive **lägga till, ändra och ta bort**.</span><span class="sxs-lookup"><span data-stu-id="0369c-467">Check all three checkboxes, including **Add, Modify, and Delete**.</span></span>
      
      3. <span data-ttu-id="0369c-468">Klicka på hello **Sök** knappen tooget hello lista med objekt med ändringar toobe exporteras.</span><span class="sxs-lookup"><span data-stu-id="0369c-468">Click hello **Search** button tooget hello list of objects with changes toobe exported.</span></span> <span data-ttu-id="0369c-469">tooexamine hello ändringar för ett angivet objekt dubbelklicka hello-objektet.</span><span class="sxs-lookup"><span data-stu-id="0369c-469">tooexamine hello changes for a given object, double-click hello object.</span></span>
      
      4. <span data-ttu-id="0369c-470">Kontrollera hello ändringar förväntas.</span><span class="sxs-lookup"><span data-stu-id="0369c-470">Verify hello changes are expected.</span></span>

6. <span data-ttu-id="0369c-471">Kör **exportera** steg på hello **Azure AD-koppling**</span><span class="sxs-lookup"><span data-stu-id="0369c-471">Run **Export** step on hello **Azure AD Connector**</span></span>
      
   1. <span data-ttu-id="0369c-472">Högerklicka på hello **Azure AD Connector** och välj **kör...**</span><span class="sxs-lookup"><span data-stu-id="0369c-472">Right-click hello **Azure AD Connector** and select **Run...**</span></span>
   
   2. <span data-ttu-id="0369c-473">I hello kör Connector popup-fönstret, Välj **exportera** och på **OK**.</span><span class="sxs-lookup"><span data-stu-id="0369c-473">In hello Run Connector pop-up dialog, select **Export** and click **OK**.</span></span>
   
   3. <span data-ttu-id="0369c-474">Vänta tills exporten tooAzure AD toocomplete.</span><span class="sxs-lookup"><span data-stu-id="0369c-474">Wait for Export tooAzure AD toocomplete.</span></span>

> [!NOTE]
> <span data-ttu-id="0369c-475">Det kan hända att hello stegen inte omfattar hello fullständig synkronisering steg och Export på hello Azure AD-koppling.</span><span class="sxs-lookup"><span data-stu-id="0369c-475">You may notice that hello steps do not include hello Full Synchronization step and Export step on hello Azure AD Connector.</span></span> <span data-ttu-id="0369c-476">hello steg behövs inte eftersom hello attributvärden som flödar in från lokala Active Directory tooAzure AD endast.</span><span class="sxs-lookup"><span data-stu-id="0369c-476">hello steps are not required since hello attribute values are flowing from on-premises Active Directory tooAzure AD only.</span></span>

### <a name="step-7-re-enable-sync-scheduler"></a><span data-ttu-id="0369c-477">Steg 7: Återaktivera sync scheduler</span><span class="sxs-lookup"><span data-stu-id="0369c-477">Step 7: Re-enable sync scheduler</span></span>
<span data-ttu-id="0369c-478">Återaktivera hello inbyggda sync scheduler:</span><span class="sxs-lookup"><span data-stu-id="0369c-478">Re-enable hello built-in sync scheduler:</span></span>

1. <span data-ttu-id="0369c-479">Starta PowerShell-session.</span><span class="sxs-lookup"><span data-stu-id="0369c-479">Start PowerShell session.</span></span>

2. <span data-ttu-id="0369c-480">Aktivera schemalagd synkronisering igen genom att köra cmdlet:`Set-ADSyncScheduler -SyncCycleEnabled $true`</span><span class="sxs-lookup"><span data-stu-id="0369c-480">Re-enable scheduled synchronization by running cmdlet: `Set-ADSyncScheduler -SyncCycleEnabled $true`</span></span>



## <a name="next-steps"></a><span data-ttu-id="0369c-481">Nästa steg</span><span class="sxs-lookup"><span data-stu-id="0369c-481">Next steps</span></span>
* <span data-ttu-id="0369c-482">Läs mer om hello Konfigurationsmodell i [förstå deklarativ etablering](active-directory-aadconnectsync-understanding-declarative-provisioning.md).</span><span class="sxs-lookup"><span data-stu-id="0369c-482">Read more about hello configuration model in [Understanding Declarative Provisioning](active-directory-aadconnectsync-understanding-declarative-provisioning.md).</span></span>
* <span data-ttu-id="0369c-483">Läs mer om hello Uttrycksspråk i [förstå uttryck för deklarativ etablering](active-directory-aadconnectsync-understanding-declarative-provisioning-expressions.md).</span><span class="sxs-lookup"><span data-stu-id="0369c-483">Read more about hello expression language in [Understanding Declarative Provisioning Expressions](active-directory-aadconnectsync-understanding-declarative-provisioning-expressions.md).</span></span>

<span data-ttu-id="0369c-484">**Översiktsavsnitt**</span><span class="sxs-lookup"><span data-stu-id="0369c-484">**Overview topics**</span></span>

* [<span data-ttu-id="0369c-485">Azure AD Connect-synkronisering: Förstå och anpassa synkronisering</span><span class="sxs-lookup"><span data-stu-id="0369c-485">Azure AD Connect sync: Understand and customize synchronization</span></span>](active-directory-aadconnectsync-whatis.md)
* [<span data-ttu-id="0369c-486">Integrera dina lokala identiteter med Azure Active Directory</span><span class="sxs-lookup"><span data-stu-id="0369c-486">Integrating your on-premises identities with Azure Active Directory</span></span>](active-directory-aadconnect.md)

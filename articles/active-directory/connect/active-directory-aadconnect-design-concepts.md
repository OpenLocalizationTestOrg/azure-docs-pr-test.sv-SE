---
title: 'Azure AD Connect: Designbegreppen | Microsoft Docs'
description: "Det här avsnittet beskrivs vissa implementering design områden"
services: active-directory
documentationcenter: 
author: billmath
manager: femila
editor: 
ms.assetid: 4114a6c0-f96a-493c-be74-1153666ce6c9
ms.service: active-directory
ms.custom: azure-ad-connect
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: Identity
ms.date: 07/13/2017
ms.author: billmath
ms.openlocfilehash: f23443d438c95a784f655fb9a5f20dfcf37be189
ms.sourcegitcommit: 02e69c4a9d17645633357fe3d46677c2ff22c85a
ms.translationtype: MT
ms.contentlocale: sv-SE
ms.lasthandoff: 08/03/2017
---
# <a name="azure-ad-connect-design-concepts"></a><span data-ttu-id="4f18e-103">Azure AD Connect: Designbegrepp</span><span class="sxs-lookup"><span data-stu-id="4f18e-103">Azure AD Connect: Design concepts</span></span>
<span data-ttu-id="4f18e-104">Syftet med det här avsnittet är att beskriva områden som måste betraktas under genomförandet designen av Azure AD Connect.</span><span class="sxs-lookup"><span data-stu-id="4f18e-104">The purpose of this topic is to describe areas that must be thought through during the implementation design of Azure AD Connect.</span></span> <span data-ttu-id="4f18e-105">Det här avsnittet är en djupdykning i vissa områden och dessa koncept beskrivs kortfattat i andra avsnitt samt.</span><span class="sxs-lookup"><span data-stu-id="4f18e-105">This topic is a deep dive on certain areas and these concepts are briefly described in other topics as well.</span></span>

## <a name="sourceanchor"></a><span data-ttu-id="4f18e-106">sourceAnchor</span><span class="sxs-lookup"><span data-stu-id="4f18e-106">sourceAnchor</span></span>
<span data-ttu-id="4f18e-107">Attributet sourceAnchor definieras som *ett attribut som inte ändras under livslängden för ett objekt*.</span><span class="sxs-lookup"><span data-stu-id="4f18e-107">The sourceAnchor attribute is defined as *an attribute immutable during the lifetime of an object*.</span></span> <span data-ttu-id="4f18e-108">Den identifierar ett objekt som den samma objekt lokalt och i Azure AD.</span><span class="sxs-lookup"><span data-stu-id="4f18e-108">It uniquely identifies an object as being the same object on-premises and in Azure AD.</span></span> <span data-ttu-id="4f18e-109">Attributet kallas även **immutableId** och de två namnen används utbytbara.</span><span class="sxs-lookup"><span data-stu-id="4f18e-109">The attribute is also called **immutableId** and the two names are used interchangeable.</span></span>

<span data-ttu-id="4f18e-110">Ordet ändras, som är ”kan inte ändras”, är viktigt att det här avsnittet.</span><span class="sxs-lookup"><span data-stu-id="4f18e-110">The word immutable, that is "cannot be changed", is important to this topic.</span></span> <span data-ttu-id="4f18e-111">Eftersom värdet för det här attributet inte kan ändras när den väl har angetts, är det viktigt att välja en design som har stöd för ditt scenario.</span><span class="sxs-lookup"><span data-stu-id="4f18e-111">Since this attribute’s value cannot be changed after it has been set, it is important to pick a design that supports your scenario.</span></span>

<span data-ttu-id="4f18e-112">Attributet används för följande scenarier:</span><span class="sxs-lookup"><span data-stu-id="4f18e-112">The attribute is used for the following scenarios:</span></span>

* <span data-ttu-id="4f18e-113">När en ny synkroniseringsserver för motorn inbyggda eller återskapas efter en katastrofåterställning, länkar det här attributet befintliga objekt i Azure AD med objekt på lokalt.</span><span class="sxs-lookup"><span data-stu-id="4f18e-113">When a new sync engine server is built, or rebuilt after a disaster recovery scenario, this attribute links existing objects in Azure AD with objects on-premises.</span></span>
* <span data-ttu-id="4f18e-114">Om du flyttar från en molnbaserad identitet till en modell för synkroniserade identitet, kan det här attributet objekt ”hårda matchar” befintliga objekt i Azure AD med lokalt objekt.</span><span class="sxs-lookup"><span data-stu-id="4f18e-114">If you move from a cloud-only identity to a synchronized identity model, then this attribute allows objects to "hard match" existing objects in Azure AD with on-premises objects.</span></span>
* <span data-ttu-id="4f18e-115">Om du använder federation och sedan det här attributet tillsammans med den **userPrincipalName** används för att unikt identifiera en användare i anspråket.</span><span class="sxs-lookup"><span data-stu-id="4f18e-115">If you use federation, then this attribute together with the **userPrincipalName** is used in the claim to uniquely identify a user.</span></span>

<span data-ttu-id="4f18e-116">Det här avsnittet handlar bara om sourceAnchor relateras till användare.</span><span class="sxs-lookup"><span data-stu-id="4f18e-116">This topic only talks about sourceAnchor as it relates to users.</span></span> <span data-ttu-id="4f18e-117">Samma regler gäller för alla typer av objekt, men endast för användare är det här problemet är vanligtvis ett problem.</span><span class="sxs-lookup"><span data-stu-id="4f18e-117">The same rules apply to all object types, but it is only for users this problem usually is a concern.</span></span>

### <a name="selecting-a-good-sourceanchor-attribute"></a><span data-ttu-id="4f18e-118">Att välja en bra sourceAnchor attribut</span><span class="sxs-lookup"><span data-stu-id="4f18e-118">Selecting a good sourceAnchor attribute</span></span>
<span data-ttu-id="4f18e-119">Attributvärdet som måste följa följande regler:</span><span class="sxs-lookup"><span data-stu-id="4f18e-119">The attribute value must follow the following rules:</span></span>

* <span data-ttu-id="4f18e-120">Vara mindre än 60 tecken</span><span class="sxs-lookup"><span data-stu-id="4f18e-120">Be less than 60 characters in length</span></span>
  * <span data-ttu-id="4f18e-121">Tecken som inte är a-z, A-Z eller 0-9 kodas och räknas som 3 tecken</span><span class="sxs-lookup"><span data-stu-id="4f18e-121">Characters not being a-z, A-Z, or 0-9 are encoded and counted as 3 characters</span></span>
* <span data-ttu-id="4f18e-122">Inte innehåller ett specialtecken: &#92;!</span><span class="sxs-lookup"><span data-stu-id="4f18e-122">Not contain a special character: &#92; !</span></span> <span data-ttu-id="4f18e-123"># $ % & * + / = ?</span><span class="sxs-lookup"><span data-stu-id="4f18e-123"># $ % & * + / = ?</span></span> <span data-ttu-id="4f18e-124">^ &#96; { } | ~ < > ( ) ' ; : , [ ] " @ _</span><span class="sxs-lookup"><span data-stu-id="4f18e-124">^ &#96; { } | ~ < > ( ) ' ; : , [ ] " @ _</span></span>
* <span data-ttu-id="4f18e-125">Måste vara globalt unika</span><span class="sxs-lookup"><span data-stu-id="4f18e-125">Must be globally unique</span></span>
* <span data-ttu-id="4f18e-126">Måste vara en sträng, heltal eller binär</span><span class="sxs-lookup"><span data-stu-id="4f18e-126">Must be either a string, integer, or binary</span></span>
* <span data-ttu-id="4f18e-127">Ska inte baseras på användarens namn, ändringarna</span><span class="sxs-lookup"><span data-stu-id="4f18e-127">Should not be based on user's name, these changes</span></span>
* <span data-ttu-id="4f18e-128">Bör inte skiftlägeskänsliga och undvika värden som kan variera efter fall</span><span class="sxs-lookup"><span data-stu-id="4f18e-128">Should not be case-sensitive and avoid values that may vary by case</span></span>
* <span data-ttu-id="4f18e-129">Ska tilldelas när objektet har skapats</span><span class="sxs-lookup"><span data-stu-id="4f18e-129">Should be assigned when the object is created</span></span>

<span data-ttu-id="4f18e-130">Om den valda sourceAnchor inte är av typen string, Azure AD Connect Base64Encode attributvärdet så inga specialtecken visas.</span><span class="sxs-lookup"><span data-stu-id="4f18e-130">If the selected sourceAnchor is not of type string, then Azure AD Connect Base64Encode the attribute value to ensure no special characters appear.</span></span> <span data-ttu-id="4f18e-131">Om du använder en annan federationsserver än AD FS kan du kontrollera om servern kan också Base64Encode attributet.</span><span class="sxs-lookup"><span data-stu-id="4f18e-131">If you use another federation server than ADFS, make sure your server can also Base64Encode the attribute.</span></span>

<span data-ttu-id="4f18e-132">Attributet sourceAnchor är skiftlägeskänsliga.</span><span class="sxs-lookup"><span data-stu-id="4f18e-132">The sourceAnchor attribute is case-sensitive.</span></span> <span data-ttu-id="4f18e-133">Värdet ”AndersSvensson” är inte samma som ”AndersSvensson”.</span><span class="sxs-lookup"><span data-stu-id="4f18e-133">A value of “JohnDoe” is not the same as “johndoe”.</span></span> <span data-ttu-id="4f18e-134">Men du bör inte ha två olika objekt med endast en avvikelse i fall.</span><span class="sxs-lookup"><span data-stu-id="4f18e-134">But you should not have two different objects with only a difference in case.</span></span>

<span data-ttu-id="4f18e-135">Om du har en enda skog är lokalt, sedan attributet bör du använda **objectGUID**.</span><span class="sxs-lookup"><span data-stu-id="4f18e-135">If you have a single forest on-premises, then the attribute you should use is **objectGUID**.</span></span> <span data-ttu-id="4f18e-136">Detta är också det attribut som används när du använder standardinställningar i Azure AD Connect och det attribut som används av DirSync.</span><span class="sxs-lookup"><span data-stu-id="4f18e-136">This is also the attribute used when you use express settings in Azure AD Connect and also the attribute used by DirSync.</span></span>

<span data-ttu-id="4f18e-137">Om du har flera skogar och flytta inte användare mellan skogar och domäner, sedan **objectGUID** är en bra attribut som ska användas även i det här fallet.</span><span class="sxs-lookup"><span data-stu-id="4f18e-137">If you have multiple forests and do not move users between forests and domains, then **objectGUID** is a good attribute to use even in this case.</span></span>

<span data-ttu-id="4f18e-138">Om du flyttar användare mellan skogar och domäner, måste du hitta ett attribut som inte ändras eller kan flyttas med användarna under flytten.</span><span class="sxs-lookup"><span data-stu-id="4f18e-138">If you move users between forests and domains, then you must find an attribute that does not change or can be moved with the users during the move.</span></span> <span data-ttu-id="4f18e-139">En rekommenderad metod är att införa en syntetisk attribut.</span><span class="sxs-lookup"><span data-stu-id="4f18e-139">A recommended approach is to introduce a synthetic attribute.</span></span> <span data-ttu-id="4f18e-140">Ett attribut som kan innehålla något som ser ut som ett GUID skulle vara lämplig.</span><span class="sxs-lookup"><span data-stu-id="4f18e-140">An attribute that could hold something that looks like a GUID would be suitable.</span></span> <span data-ttu-id="4f18e-141">När objekt skapas en ny GUID skapas och stämplad på användaren.</span><span class="sxs-lookup"><span data-stu-id="4f18e-141">During object creation, a new GUID is created and stamped on the user.</span></span> <span data-ttu-id="4f18e-142">En anpassad synkroniseringsregel kan skapas i synkroniseringsserver för motorn för att skapa det här värdet baserat på de **objectGUID** och uppdatera det markerade attributet i lägger till.</span><span class="sxs-lookup"><span data-stu-id="4f18e-142">A custom sync rule can be created in the sync engine server to create this value based on the **objectGUID** and update the selected attribute in ADDS.</span></span> <span data-ttu-id="4f18e-143">När du flyttar objektet, kontrollera att också kopiera innehållet i det här värdet.</span><span class="sxs-lookup"><span data-stu-id="4f18e-143">When you move the object, make sure to also copy the content of this value.</span></span>

<span data-ttu-id="4f18e-144">En annan lösning är att välja ett befintligt attribut som du vet inte ändras.</span><span class="sxs-lookup"><span data-stu-id="4f18e-144">Another solution is to pick an existing attribute you know does not change.</span></span> <span data-ttu-id="4f18e-145">Vanliga attribut inkluderar **employeeID**.</span><span class="sxs-lookup"><span data-stu-id="4f18e-145">Commonly used attributes include **employeeID**.</span></span> <span data-ttu-id="4f18e-146">Om du anser att ett attribut som innehåller bokstäverna, kontrollera att det finns ingen risk fallet (versal eller gemen) kan ändra för attributets värde.</span><span class="sxs-lookup"><span data-stu-id="4f18e-146">If you consider an attribute that contains letters, make sure there is no chance the case (upper case vs. lower case) can change for the attribute's value.</span></span> <span data-ttu-id="4f18e-147">Felaktigt attribut som inte ska användas med dessa attribut med namnet på användaren.</span><span class="sxs-lookup"><span data-stu-id="4f18e-147">Bad attributes that should not be used include those attributes with the name of the user.</span></span> <span data-ttu-id="4f18e-148">I en annullering eller äktenskapsskillnad förväntas namnet ändra, vilket inte är tillåtet för det här attributet.</span><span class="sxs-lookup"><span data-stu-id="4f18e-148">In a marriage or divorce, the name is expected to change, which is not allowed for this attribute.</span></span> <span data-ttu-id="4f18e-149">Detta är också ett skäl till varför attribut som **userPrincipalName**, **e**, och **targetAddress** inte är även möjligt att välja i Azure AD Connect-installationen guiden.</span><span class="sxs-lookup"><span data-stu-id="4f18e-149">This is also one reason why attributes such as **userPrincipalName**, **mail**, and **targetAddress** are not even possible to select in the Azure AD Connect installation wizard.</span></span> <span data-ttu-id="4f18e-150">Dessa attribut även innehålla de ”@” tecken som inte tillåts i sourceAnchor.</span><span class="sxs-lookup"><span data-stu-id="4f18e-150">Those attributes also contain the "@" character, which is not allowed in the sourceAnchor.</span></span>

### <a name="changing-the-sourceanchor-attribute"></a><span data-ttu-id="4f18e-151">Ändra attributet sourceAnchor</span><span class="sxs-lookup"><span data-stu-id="4f18e-151">Changing the sourceAnchor attribute</span></span>
<span data-ttu-id="4f18e-152">Värdet för attributet sourceAnchor kan inte ändras efter att objektet har skapats i Azure AD och identitet synkroniseras.</span><span class="sxs-lookup"><span data-stu-id="4f18e-152">The sourceAnchor attribute value cannot be changed after the object has been created in Azure AD and the identity is synchronized.</span></span>

<span data-ttu-id="4f18e-153">Därför gäller följande begränsningar för Azure AD Connect:</span><span class="sxs-lookup"><span data-stu-id="4f18e-153">For this reason, the following restrictions apply to Azure AD Connect:</span></span>

* <span data-ttu-id="4f18e-154">Attributet sourceAnchor kan endast anges under installationen.</span><span class="sxs-lookup"><span data-stu-id="4f18e-154">The sourceAnchor attribute can only be set during initial installation.</span></span> <span data-ttu-id="4f18e-155">Om du kör installationsguiden av är det här alternativet skrivskyddad.</span><span class="sxs-lookup"><span data-stu-id="4f18e-155">If you rerun the installation wizard, this option is read-only.</span></span> <span data-ttu-id="4f18e-156">Om du behöver ändra den här inställningen måste du avinstallera och installera.</span><span class="sxs-lookup"><span data-stu-id="4f18e-156">If you need to change this setting, then you must uninstall and reinstall.</span></span>
* <span data-ttu-id="4f18e-157">Om du har installerat en annan Azure AD Connect-server måste du välja samma sourceAnchor attribut som tidigare använt.</span><span class="sxs-lookup"><span data-stu-id="4f18e-157">If you install another Azure AD Connect server, then you must select the same sourceAnchor attribute as previously used.</span></span> <span data-ttu-id="4f18e-158">Om du tidigare har använt DirSync och flyttar till Azure AD Connect och sedan måste du använda **objectGUID** eftersom det är det attribut som används av DirSync.</span><span class="sxs-lookup"><span data-stu-id="4f18e-158">If you have earlier been using DirSync and move to Azure AD Connect, then you must use **objectGUID** since that is the attribute used by DirSync.</span></span>
* <span data-ttu-id="4f18e-159">Om värdet för sourceAnchor har ändrats efter har objektet exporterats till Azure AD och sedan Azure AD Connect-synkronisering genererar ett fel och tillåter inte några fler ändringar på objektet innan problemet har åtgärdats och sourceAnchor ändras tillbaka i källan director y.</span><span class="sxs-lookup"><span data-stu-id="4f18e-159">If the value for sourceAnchor is changed after the object has been exported to Azure AD, then Azure AD Connect sync throws an error and does not allow any more changes on that object before the issue has been fixed and the sourceAnchor is changed back in the source directory.</span></span>

## <a name="using-msds-consistencyguid-as-sourceanchor"></a><span data-ttu-id="4f18e-160">Med msDS-ConsistencyGuid som sourceAnchor</span><span class="sxs-lookup"><span data-stu-id="4f18e-160">Using msDS-ConsistencyGuid as sourceAnchor</span></span>
<span data-ttu-id="4f18e-161">Som standard, Azure AD Connect (version 1.1.486.0 och äldre) använder objectGUID som attributet sourceAnchor.</span><span class="sxs-lookup"><span data-stu-id="4f18e-161">By default, Azure AD Connect (version 1.1.486.0 and older) uses objectGUID as the sourceAnchor attribute.</span></span> <span data-ttu-id="4f18e-162">ObjectGUID är systemgenererad.</span><span class="sxs-lookup"><span data-stu-id="4f18e-162">ObjectGUID is system-generated.</span></span> <span data-ttu-id="4f18e-163">Du kan inte ange värdet när du skapar lokala AD-objekt.</span><span class="sxs-lookup"><span data-stu-id="4f18e-163">You cannot specify its value when creating on-premises AD objects.</span></span> <span data-ttu-id="4f18e-164">Enligt beskrivningen i avsnittet [sourceAnchor](#sourceanchor), det finns scenarier där du måste ange sourceAnchor-värde.</span><span class="sxs-lookup"><span data-stu-id="4f18e-164">As explained in section [sourceAnchor](#sourceanchor), there are scenarios where you need to specify the sourceAnchor value.</span></span> <span data-ttu-id="4f18e-165">Om scenarier som är tillämpliga för dig, måste du använda en konfigurerbar AD-attributet (till exempel msDS-ConsistencyGuid) som attributet sourceAnchor.</span><span class="sxs-lookup"><span data-stu-id="4f18e-165">If the scenarios are applicable to you, you must use a configurable AD attribute (for example, msDS-ConsistencyGuid) as the sourceAnchor attribute.</span></span>

<span data-ttu-id="4f18e-166">Azure AD Connect (version 1.1.524.0 och efter) nu underlättar användningen av msDS-ConsistencyGuid som attributet sourceAnchor.</span><span class="sxs-lookup"><span data-stu-id="4f18e-166">Azure AD Connect (version 1.1.524.0 and after) now facilitates the use of msDS-ConsistencyGuid as sourceAnchor attribute.</span></span> <span data-ttu-id="4f18e-167">När du använder den här funktionen konfigurerar Synkroniseringsregler till automatiskt i Azure AD Connect:</span><span class="sxs-lookup"><span data-stu-id="4f18e-167">When using this feature, Azure AD Connect automatically configures the synchronization rules to:</span></span>

1. <span data-ttu-id="4f18e-168">Använda msDS-ConsistencyGuid som attributet sourceAnchor för användarobjekt.</span><span class="sxs-lookup"><span data-stu-id="4f18e-168">Use msDS-ConsistencyGuid as the sourceAnchor attribute for User objects.</span></span> <span data-ttu-id="4f18e-169">ObjectGUID används för andra objekttyper.</span><span class="sxs-lookup"><span data-stu-id="4f18e-169">ObjectGUID is used for other object types.</span></span>

2. <span data-ttu-id="4f18e-170">För alla angivna lokala AD-användare vars attributet msDS-ConsistencyGuid inte är ifylld, Azure AD Connect-skrivningar objectGUID värdet tillbaka till attributet msDS-ConsistencyGuid i lokala Active Directory-objekt.</span><span class="sxs-lookup"><span data-stu-id="4f18e-170">For any given on-premises AD User object whose msDS-ConsistencyGuid attribute isn't populated, Azure AD Connect writes its objectGUID value back to the msDS-ConsistencyGuid attribute in on-premises Active Directory.</span></span> <span data-ttu-id="4f18e-171">När attributet msDS-ConsistencyGuid fylls exporterar Azure AD Connect sedan objektet till Azure AD.</span><span class="sxs-lookup"><span data-stu-id="4f18e-171">After the msDS-ConsistencyGuid attribute is populated, Azure AD Connect then exports the object to Azure AD.</span></span>

>[!NOTE]
> <span data-ttu-id="4f18e-172">När en lokal AD-objekt har importerats till Azure AD Connect (som, importeras till anslutningsplatsen AD och planerad i metaversum), du kan inte ändra dess sourceAnchor värde längre.</span><span class="sxs-lookup"><span data-stu-id="4f18e-172">Once an on-premises AD object is imported into Azure AD Connect (that is, imported into the AD Connector Space and projected into the Metaverse), you cannot change its sourceAnchor value anymore.</span></span> <span data-ttu-id="4f18e-173">Ange sourceAnchor-värdet för ett givet lokala AD objekt, konfigurera ett attributet msDS-ConsistencyGuid innan den har importerats till Azure AD Connect.</span><span class="sxs-lookup"><span data-stu-id="4f18e-173">To specify the sourceAnchor value for a given on-premises AD object, configure its msDS-ConsistencyGuid attribute before it is imported into Azure AD Connect.</span></span>

### <a name="permission-required"></a><span data-ttu-id="4f18e-174">Behörigheten som krävs</span><span class="sxs-lookup"><span data-stu-id="4f18e-174">Permission required</span></span>
<span data-ttu-id="4f18e-175">AD DS-konto som används för att synkronisera med lokala Active Directory måste beviljas behörighet att skriva till attributet msDS-ConsistencyGuid i lokala Active Directory för för den här funktionen ska fungera.</span><span class="sxs-lookup"><span data-stu-id="4f18e-175">For this feature to work, the AD DS account used to synchronize with on-premises Active Directory must be granted write permission to the msDS-ConsistencyGuid attribute in on-premises Active Directory.</span></span>

### <a name="how-to-enable-the-consistencyguid-feature---new-installation"></a><span data-ttu-id="4f18e-176">Så här aktiverar du funktionen ConsistencyGuid - ny installation</span><span class="sxs-lookup"><span data-stu-id="4f18e-176">How to enable the ConsistencyGuid feature - New installation</span></span>
<span data-ttu-id="4f18e-177">Du kan aktivera användningen av ConsistencyGuid som sourceAnchor vid nyinstallation.</span><span class="sxs-lookup"><span data-stu-id="4f18e-177">You can enable the use of ConsistencyGuid as sourceAnchor during new installation.</span></span> <span data-ttu-id="4f18e-178">Det här avsnittet beskriver både snabb och anpassad installation i informationen.</span><span class="sxs-lookup"><span data-stu-id="4f18e-178">This section covers both Express and Custom installation in details.</span></span>

  >[!NOTE]
  > <span data-ttu-id="4f18e-179">Endast nyare versioner av Azure AD Connect (1.1.524.0 och efter) stöder användning av ConsistencyGuid som sourceAnchor under ny installation.</span><span class="sxs-lookup"><span data-stu-id="4f18e-179">Only newer versions of Azure AD Connect (1.1.524.0 and after) supports the use of ConsistencyGuid as sourceAnchor during new installation.</span></span>

### <a name="how-to-enable-the-consistencyguid-feature"></a><span data-ttu-id="4f18e-180">Så här aktiverar du funktionen ConsistencyGuid</span><span class="sxs-lookup"><span data-stu-id="4f18e-180">How to enable the ConsistencyGuid feature</span></span>
<span data-ttu-id="4f18e-181">Funktionen kan för närvarande kan endast aktiveras under endast nya Azure AD Connect-installationen.</span><span class="sxs-lookup"><span data-stu-id="4f18e-181">Currently, the feature can only be enabled during new Azure AD Connect installation only.</span></span>

#### <a name="express-installation"></a><span data-ttu-id="4f18e-182">Expressfunktion för Installation</span><span class="sxs-lookup"><span data-stu-id="4f18e-182">Express Installation</span></span>
<span data-ttu-id="4f18e-183">När du installerar Azure AD Connect med Express-läge, bestämmer det lämpligaste AD-attributet som ska användas som attributet sourceAnchor med hjälp av följande logik automatiskt i Azure AD Connect-guiden:</span><span class="sxs-lookup"><span data-stu-id="4f18e-183">When installing Azure AD Connect with Express mode, the Azure AD Connect wizard automatically determines the most appropriate AD attribute to use as the sourceAnchor attribute using the following logic:</span></span>

* <span data-ttu-id="4f18e-184">Azure AD Connect-guiden frågar först Azure AD-klienten för att hämta AD-attribut som används som attributet sourceAnchor i den tidigare Azure AD Connect-installationen (om sådan finns).</span><span class="sxs-lookup"><span data-stu-id="4f18e-184">First, the Azure AD Connect wizard queries your Azure AD tenant to retrieve the AD attribute used as the sourceAnchor attribute in the previous Azure AD Connect installation (if any).</span></span> <span data-ttu-id="4f18e-185">Om denna information är tillgänglig använder Azure AD Connect samma AD-attribut.</span><span class="sxs-lookup"><span data-stu-id="4f18e-185">If this information is available, Azure AD Connect uses the same AD attribute.</span></span>

  >[!NOTE]
  > <span data-ttu-id="4f18e-186">Endast nyare versioner av Azure AD Connect (1.1.524.0 och efter) lagrar information i Azure AD-klienten om attributet sourceAnchor användas under installationen.</span><span class="sxs-lookup"><span data-stu-id="4f18e-186">Only newer versions of Azure AD Connect (1.1.524.0 and after) stores information in your Azure AD tenant about the sourceAnchor attribute used during installation.</span></span> <span data-ttu-id="4f18e-187">Äldre versioner av Azure AD Connect inte.</span><span class="sxs-lookup"><span data-stu-id="4f18e-187">Older versions of Azure AD Connect do not.</span></span>

* <span data-ttu-id="4f18e-188">Om information om attributet sourceAnchor används inte är tillgänglig i guiden kontrollerar tillståndet för attributet msDS-ConsistencyGuid i din lokala Active Directory.</span><span class="sxs-lookup"><span data-stu-id="4f18e-188">If information about the sourceAnchor attribute used isn't available, the wizard checks the state of the msDS-ConsistencyGuid attribute in your on-premises Active Directory.</span></span> <span data-ttu-id="4f18e-189">Om attributet inte är konfigurerad på alla objekt i katalogen, använder guiden msDS-ConsistencyGuid som attributet sourceAnchor.</span><span class="sxs-lookup"><span data-stu-id="4f18e-189">If the attribute isn't configured on any object in the directory, the wizard uses the msDS-ConsistencyGuid as the sourceAnchor attribute.</span></span> <span data-ttu-id="4f18e-190">Om attributet har konfigurerats på ett eller flera objekt i katalogen, avslutar guiden attributet används av andra program och är inte lämpligt som attributet sourceAnchor...</span><span class="sxs-lookup"><span data-stu-id="4f18e-190">If the attribute is configured on one or more objects in the directory, the wizard concludes the attribute is being used by other applications and is not suitable as sourceAnchor attribute...</span></span>

* <span data-ttu-id="4f18e-191">I så fall guiden använder till med objectGUID som attributet sourceAnchor.</span><span class="sxs-lookup"><span data-stu-id="4f18e-191">In which case, the wizard falls back to using objectGUID as the sourceAnchor attribute.</span></span>

* <span data-ttu-id="4f18e-192">När attributet sourceAnchor är valt lagras i guiden i Azure AD-klienten.</span><span class="sxs-lookup"><span data-stu-id="4f18e-192">Once the sourceAnchor attribute is decided, the wizard stores the information in your Azure AD tenant.</span></span> <span data-ttu-id="4f18e-193">Informationen kommer att användas av framtida installation av Azure AD Connect.</span><span class="sxs-lookup"><span data-stu-id="4f18e-193">The information will be used by future installation of Azure AD Connect.</span></span>

<span data-ttu-id="4f18e-194">När Express-installationen är klar, informerar guiden vilket attribut har plockats som Källfästpunkten-attribut.</span><span class="sxs-lookup"><span data-stu-id="4f18e-194">Once Express installation completes, the wizard informs you which attribute has been picked as the Source Anchor attribute.</span></span>

![Guiden informerar AD attributet sourceAnchor har valts](./media/active-directory-aadconnect-design-concepts/consistencyGuid-01.png)

#### <a name="custom-installation"></a><span data-ttu-id="4f18e-196">Anpassad installation</span><span class="sxs-lookup"><span data-stu-id="4f18e-196">Custom installation</span></span>
<span data-ttu-id="4f18e-197">När du installerar Azure AD Connect med anpassade läge, innehåller Azure AD Connect-guiden två alternativ när du konfigurerar attributet sourceAnchor:</span><span class="sxs-lookup"><span data-stu-id="4f18e-197">When installing Azure AD Connect with Custom mode, the Azure AD Connect wizard provides two options when configuring sourceAnchor attribute:</span></span>

![Anpassad installation – sourceAnchor konfiguration](./media/active-directory-aadconnect-design-concepts/consistencyGuid-02.png)

| <span data-ttu-id="4f18e-199">Inställning</span><span class="sxs-lookup"><span data-stu-id="4f18e-199">Setting</span></span> | <span data-ttu-id="4f18e-200">Beskrivning</span><span class="sxs-lookup"><span data-stu-id="4f18e-200">Description</span></span> |
| --- | --- |
| <span data-ttu-id="4f18e-201">Låt Azure hantera källfästpunkten</span><span class="sxs-lookup"><span data-stu-id="4f18e-201">Let Azure manage the source anchor for me</span></span> | <span data-ttu-id="4f18e-202">Välj det här alternativet om du vill att Azure AD ska hämta attributet.</span><span class="sxs-lookup"><span data-stu-id="4f18e-202">Select this option if you want Azure AD to pick the attribute for you.</span></span> <span data-ttu-id="4f18e-203">Om du väljer det här alternativet, Azure AD Connect-guiden gäller samma [sourceAnchor attributet markeringen logik som används under snabbinstallationen](#express-installation).</span><span class="sxs-lookup"><span data-stu-id="4f18e-203">If you select this option, Azure AD Connect wizard applies the same [sourceAnchor attribute selection logic used during Express installation](#express-installation).</span></span> <span data-ttu-id="4f18e-204">Liknar snabbinstallationen, guiden informerar vilket attribut har plockats som Källfästpunkten attribut när anpassade installationen är klar.</span><span class="sxs-lookup"><span data-stu-id="4f18e-204">Similar to Express installation, the wizard informs you which attribute has been picked as the Source Anchor attribute after Custom installation completes.</span></span> |
| <span data-ttu-id="4f18e-205">Ett specifikt attribut</span><span class="sxs-lookup"><span data-stu-id="4f18e-205">A specific attribute</span></span> | <span data-ttu-id="4f18e-206">Välj det här alternativet om du vill ange ett befintligt AD-attribut som sourceAnchor-attribut.</span><span class="sxs-lookup"><span data-stu-id="4f18e-206">Select this option if you wish to specify an existing AD attribute as the sourceAnchor attribute.</span></span> |

### <a name="how-to-enable-the-consistencyguid-feature---existing-deployment"></a><span data-ttu-id="4f18e-207">Så här aktiverar du funktionen ConsistencyGuid - befintlig distribution</span><span class="sxs-lookup"><span data-stu-id="4f18e-207">How to enable the ConsistencyGuid feature - Existing deployment</span></span>
<span data-ttu-id="4f18e-208">Om du har en befintlig Azure AD Connect-distribution som använder objectGUID som attributet Källfästpunkten växla du den att använda ConsistencyGuid i stället.</span><span class="sxs-lookup"><span data-stu-id="4f18e-208">If you have an existing Azure AD Connect deployment which is using objectGUID as the Source Anchor attribute, you can switch it to using ConsistencyGuid instead.</span></span>

>[!NOTE]
> <span data-ttu-id="4f18e-209">Endast nyare versioner av Azure AD Connect (1.1.552.0 och efter) har stöd för växlar från ObjectGuid till ConsistencyGuid som Källfästpunkten-attribut.</span><span class="sxs-lookup"><span data-stu-id="4f18e-209">Only newer versions of Azure AD Connect (1.1.552.0 and after) supports switching from ObjectGuid to ConsistencyGuid as the Source Anchor attribute.</span></span>

<span data-ttu-id="4f18e-210">Växla från objectGUID till ConsistencyGuid som Källfästpunkten-attribut:</span><span class="sxs-lookup"><span data-stu-id="4f18e-210">To switch from objectGUID to ConsistencyGuid as the Source Anchor attribute:</span></span>

1. <span data-ttu-id="4f18e-211">Starta Azure AD Connect-guiden och klicka på **konfigurera** att gå till skärmen uppgifter.</span><span class="sxs-lookup"><span data-stu-id="4f18e-211">Start the Azure AD Connect wizard and click **Configure** to go to the Tasks screen.</span></span>

2. <span data-ttu-id="4f18e-212">Välj den **konfigurera Källfästpunkten** uppgift alternativ och klickar på **nästa**.</span><span class="sxs-lookup"><span data-stu-id="4f18e-212">Select the **Configure Source Anchor** task option and click **Next**.</span></span>

   ![Aktivera ConsistencyGuid för befintliga distribution – steg 2](./media/active-directory-aadconnect-design-concepts/consistencyguidexistingdeployment01.png)

3. <span data-ttu-id="4f18e-214">Ange dina autentiseringsuppgifter för Azure AD-administratör och klicka på **nästa**.</span><span class="sxs-lookup"><span data-stu-id="4f18e-214">Enter your Azure AD Administrator credentials and click **Next**.</span></span>

4. <span data-ttu-id="4f18e-215">Azure AD Connect-guiden analyserar tillståndet för attributet msDS-ConsistencyGuid i din lokala Active Directory.</span><span class="sxs-lookup"><span data-stu-id="4f18e-215">Azure AD Connect wizard analyzes the state of the msDS-ConsistencyGuid attribute in your on-premises Active Directory.</span></span> <span data-ttu-id="4f18e-216">Om attributet inte är konfigurerad på alla objekt i katalogen, slutsatsen att inget annat program använder attributet och är säkert att använda det som attributet Källfästpunkt i Azure AD Connect.</span><span class="sxs-lookup"><span data-stu-id="4f18e-216">If the attribute isn't configured on any object in the directory, Azure AD Connect concludes that no other application is currently using the attribute and is safe to use it as the Source Anchor attribute.</span></span> <span data-ttu-id="4f18e-217">Klicka på **nästa** att fortsätta.</span><span class="sxs-lookup"><span data-stu-id="4f18e-217">Click **Next** to continue.</span></span>

   ![Aktivera ConsistencyGuid för befintliga distribution – steg 4](./media/active-directory-aadconnect-design-concepts/consistencyguidexistingdeployment02.png)

5. <span data-ttu-id="4f18e-219">I den **redo att konfigurera** klickar du på **konfigurera** att göra konfigurationsändringen.</span><span class="sxs-lookup"><span data-stu-id="4f18e-219">In the **Ready to Configure** screen, click **Configure** to make the configuration change.</span></span>

   ![Aktivera ConsistencyGuid för befintliga distribution – steg 5](./media/active-directory-aadconnect-design-concepts/consistencyguidexistingdeployment03.png)

6. <span data-ttu-id="4f18e-221">När konfigurationen är klar visar guiden att msDS-ConsistencyGuid används som Källfästpunkten-attribut.</span><span class="sxs-lookup"><span data-stu-id="4f18e-221">Once the configuration completes, the wizard indicates that msDS-ConsistencyGuid is now being used as the Source Anchor attribute.</span></span>

   ![Aktivera ConsistencyGuid för befintliga distribution – steg 6](./media/active-directory-aadconnect-design-concepts/consistencyguidexistingdeployment04.png)

<span data-ttu-id="4f18e-223">Under analysen (steg 4) om attributet har konfigurerats på ett eller flera objekt i katalogen, slutsatsen guiden attributet som används av ett annat program och returnerar ett fel som visas i diagrammet nedan.</span><span class="sxs-lookup"><span data-stu-id="4f18e-223">During the analysis (step 4), if the attribute is configured on one or more objects in the directory, the wizard concludes the attribute is being used by another application and returns an error as illustrated in the diagram below.</span></span> <span data-ttu-id="4f18e-224">Om du är säker på att attributet inte är används av befintliga program, måste du kontakta Support för information om hur du kan ignorera felet.</span><span class="sxs-lookup"><span data-stu-id="4f18e-224">If you are certain that the attribute isn't used by existing applications, you need to contact Support for information on how to suppress the error.</span></span>

![Aktivera ConsistencyGuid för befintliga distribution – fel](./media/active-directory-aadconnect-design-concepts/consistencyguidexistingdeploymenterror.png)

### <a name="impact-on-ad-fs-or-third-party-federation-configuration"></a><span data-ttu-id="4f18e-226">Påverkan på AD FS eller tredje parts federation-konfiguration</span><span class="sxs-lookup"><span data-stu-id="4f18e-226">Impact on AD FS or third-party federation configuration</span></span>
<span data-ttu-id="4f18e-227">Om du använder Azure AD Connect att hantera lokala AD FS-distribution, Azure AD Connect uppdateras automatiskt anspråksregler för att använda samma AD-attribut som sourceAnchor.</span><span class="sxs-lookup"><span data-stu-id="4f18e-227">If you are using Azure AD Connect to manage on-premises AD FS deployment, the Azure AD Connect automatically updates the claim rules to use the same AD attribute as sourceAnchor.</span></span> <span data-ttu-id="4f18e-228">Detta säkerställer att ImmutableID anspråket som genererats av AD FS är konsekventa med sourceAnchor värdena exporteras till Azure AD.</span><span class="sxs-lookup"><span data-stu-id="4f18e-228">This ensures that the ImmutableID claim generated by ADFS is consistent with the sourceAnchor values exported to Azure AD.</span></span>

<span data-ttu-id="4f18e-229">Om du hanterar AD FS utanför Azure AD Connect eller om du använder federationsservrar från tredje part för autentisering, måste du manuellt uppdatera anspråksregler för ImmutableID anspråk till att det stämmer överens med sourceAnchor värden exporteras till Azure AD som beskrivs i artikel avsnittet [ändra AD FS anspråksregler](https://docs.microsoft.com/azure/active-directory/connect/active-directory-aadconnect-federation-management#modclaims).</span><span class="sxs-lookup"><span data-stu-id="4f18e-229">If you are managing AD FS outside of Azure AD Connect or you are using third-party federation servers for authentication, you must manually update the claim rules for ImmutableID claim to be consistent with the sourceAnchor values exported to Azure AD as described in article section [Modify AD FS claim rules](https://docs.microsoft.com/azure/active-directory/connect/active-directory-aadconnect-federation-management#modclaims).</span></span> <span data-ttu-id="4f18e-230">Guiden returnerar följande varning när installationen är klar:</span><span class="sxs-lookup"><span data-stu-id="4f18e-230">The wizard returns the following warning after installation completes:</span></span>

![Tredjeparts federation-konfiguration](./media/active-directory-aadconnect-design-concepts/consistencyGuid-03.png)

### <a name="adding-new-directories-to-existing-deployment"></a><span data-ttu-id="4f18e-232">Lägga till nya kataloger till befintlig distribution</span><span class="sxs-lookup"><span data-stu-id="4f18e-232">Adding new directories to existing deployment</span></span>
<span data-ttu-id="4f18e-233">Anta att du har distribuerat Azure AD Connect med funktionen ConsistencyGuid aktiverad och nu vill du lägga till en annan katalog i distributionen.</span><span class="sxs-lookup"><span data-stu-id="4f18e-233">Suppose you have deployed Azure AD Connect with the ConsistencyGuid feature enabled, and now you would like to add another directory to the deployment.</span></span> <span data-ttu-id="4f18e-234">När du försöker lägga till katalogen kontrollerar Azure AD Connect-guiden status för attributet mSDS-ConsistencyGuid i katalogen.</span><span class="sxs-lookup"><span data-stu-id="4f18e-234">When you try to add the directory, Azure AD Connect wizard checks the state of the mSDS-ConsistencyGuid attribute in the directory.</span></span> <span data-ttu-id="4f18e-235">Om attributet har konfigurerats på ett eller flera objekt i katalogen, avslutar guiden attributet används av andra program och returnerar ett fel som visas i diagrammet nedan.</span><span class="sxs-lookup"><span data-stu-id="4f18e-235">If the attribute is configured on one or more objects in the directory, the wizard concludes the attribute is being used by other applications and returns an error as illustrated in the diagram below.</span></span> <span data-ttu-id="4f18e-236">Om du är säker på att attributet inte är används av befintliga program, måste du kontakta Support för information om hur du kan ignorera felet.</span><span class="sxs-lookup"><span data-stu-id="4f18e-236">If you are certain that the attribute isn't used by existing applications, you need to contact Support for information on how to suppress the error.</span></span>

![Lägga till nya kataloger till befintlig distribution](./media/active-directory-aadconnect-design-concepts/consistencyGuid-04.png)

## <a name="azure-ad-sign-in"></a><span data-ttu-id="4f18e-238">Azure AD-inloggning</span><span class="sxs-lookup"><span data-stu-id="4f18e-238">Azure AD sign-in</span></span>
<span data-ttu-id="4f18e-239">När du integrerar din lokala katalog med Azure AD, är det viktigt att förstå hur synkroniseringsinställningarna kan påverka hur användaren autentiseras.</span><span class="sxs-lookup"><span data-stu-id="4f18e-239">While integrating your on-premises directory with Azure AD, it is important to understand how the synchronization settings can affect the way user authenticates.</span></span> <span data-ttu-id="4f18e-240">Azure AD använder userPrincipalName (UPN) för att autentisera användaren.</span><span class="sxs-lookup"><span data-stu-id="4f18e-240">Azure AD uses userPrincipalName (UPN) to authenticate the user.</span></span> <span data-ttu-id="4f18e-241">När du synkroniserar dina användare, måste du välja attribut som ska användas för userPrincipalName värdet noggrant.</span><span class="sxs-lookup"><span data-stu-id="4f18e-241">However, when you synchronize your users, you must choose the attribute to be used for value of userPrincipalName carefully.</span></span>

### <a name="choosing-the-attribute-for-userprincipalname"></a><span data-ttu-id="4f18e-242">Att välja attribut för userPrincipalName</span><span class="sxs-lookup"><span data-stu-id="4f18e-242">Choosing the attribute for userPrincipalName</span></span>
<span data-ttu-id="4f18e-243">När du väljer attribut för att ange bör värdet för UPN som ska användas i Azure som Kontrollera</span><span class="sxs-lookup"><span data-stu-id="4f18e-243">When you are selecting the attribute for providing the value of UPN to be used in Azure one should ensure</span></span>

* <span data-ttu-id="4f18e-244">Attributvärden motsvarar UPN-syntaxen (RFC 822), som det ska vara i formatetusername@domain</span><span class="sxs-lookup"><span data-stu-id="4f18e-244">The attribute values conform to the UPN syntax (RFC 822), that is it should be of the format username@domain</span></span>
* <span data-ttu-id="4f18e-245">Suffixet i värdena matchar en verifierad anpassade domäner i Azure AD</span><span class="sxs-lookup"><span data-stu-id="4f18e-245">The suffix in the values matches to one of the verified custom domains in Azure AD</span></span>

<span data-ttu-id="4f18e-246">I standardinställningar är det antagna valet för attributet userPrincipalName.</span><span class="sxs-lookup"><span data-stu-id="4f18e-246">In express settings, the assumed choice for the attribute is userPrincipalName.</span></span> <span data-ttu-id="4f18e-247">Om attributet userPrincipalName inte innehåller värdet du vill att användarna att logga in på Azure och du måste välja **Anpassad Installation**.</span><span class="sxs-lookup"><span data-stu-id="4f18e-247">If the userPrincipalName attribute does not contain the value you want your users to sign in to Azure, then you must choose **Custom Installation**.</span></span>

### <a name="custom-domain-state-and-upn"></a><span data-ttu-id="4f18e-248">Tillstånd för anpassad domän- och UPN</span><span class="sxs-lookup"><span data-stu-id="4f18e-248">Custom domain state and UPN</span></span>
<span data-ttu-id="4f18e-249">Det är viktigt att se till att det finns en verifierad domän för UPN-suffixet.</span><span class="sxs-lookup"><span data-stu-id="4f18e-249">It is important to ensure that there is a verified domain for the UPN suffix.</span></span>

<span data-ttu-id="4f18e-250">John är en användare i contoso.com.</span><span class="sxs-lookup"><span data-stu-id="4f18e-250">John is a user in contoso.com.</span></span> <span data-ttu-id="4f18e-251">Du vill Johan använda lokala UPN john@contoso.com logga in till Azure när du har synkroniserat användare till din Azure AD directory contoso.onmicrosoft.com.</span><span class="sxs-lookup"><span data-stu-id="4f18e-251">You want John to use the on-premises UPN john@contoso.com to sign in to Azure after you have synced users to your Azure AD directory contoso.onmicrosoft.com.</span></span> <span data-ttu-id="4f18e-252">Om du vill göra det, måste du lägga till och verifierar contoso.com som en anpassad domän i Azure AD innan du börjar synkronisera användare.</span><span class="sxs-lookup"><span data-stu-id="4f18e-252">To do so, you need to add and verify contoso.com as a custom domain in Azure AD before you can start syncing the users.</span></span> <span data-ttu-id="4f18e-253">Om UPN-suffixet John, till exempel contoso.com inte matchar en verifierad domän i Azure AD, ersätter Azure AD UPN-suffixet med contoso.onmicrosoft.com.</span><span class="sxs-lookup"><span data-stu-id="4f18e-253">If the UPN suffix of John, for example contoso.com, does not match a verified domain in Azure AD, then Azure AD replaces the UPN suffix with contoso.onmicrosoft.com.</span></span>

### <a name="non-routable-on-premises-domains-and-upn-for-azure-ad"></a><span data-ttu-id="4f18e-254">Icke-dirigerbara lokala domäner och UPN för Azure AD</span><span class="sxs-lookup"><span data-stu-id="4f18e-254">Non-routable on-premises domains and UPN for Azure AD</span></span>
<span data-ttu-id="4f18e-255">Vissa organisationer har icke-dirigerbara domäner, t.ex. contoso.local eller enkel etikett domäner som contoso.</span><span class="sxs-lookup"><span data-stu-id="4f18e-255">Some organizations have non-routable domains, like contoso.local, or simple single label domains like contoso.</span></span> <span data-ttu-id="4f18e-256">Det går inte att verifiera en icke-dirigerbara domän i Azure AD.</span><span class="sxs-lookup"><span data-stu-id="4f18e-256">You are not able to verify a non-routable domain in Azure AD.</span></span> <span data-ttu-id="4f18e-257">Azure AD Connect kan synkronisera med endast en verifierad domän i Azure AD.</span><span class="sxs-lookup"><span data-stu-id="4f18e-257">Azure AD Connect can sync to only a verified domain in Azure AD.</span></span> <span data-ttu-id="4f18e-258">När du skapar en Azure AD-katalog skapar en dirigerbara domän som blir standarddomän för din Azure AD, till exempel contoso.onmicrosoft.com.</span><span class="sxs-lookup"><span data-stu-id="4f18e-258">When you create an Azure AD directory, it creates a routable domain that becomes default domain for your Azure AD for example, contoso.onmicrosoft.com.</span></span> <span data-ttu-id="4f18e-259">Därför blir det nödvändigt att kontrollera andra dirigerbara domänen i ett sådant scenario om du inte vill synkronisera till för standarddomänen onmicrosoft.com.</span><span class="sxs-lookup"><span data-stu-id="4f18e-259">Therefore, it becomes necessary to verify any other routable domain in such a scenario in case you don't want to sync to the default onmicrosoft.com domain.</span></span>

<span data-ttu-id="4f18e-260">Läs [lägga till ett eget domännamn i Azure Active Directory](../active-directory-add-domain.md) för mer information om att lägga till och verifiera domäner.</span><span class="sxs-lookup"><span data-stu-id="4f18e-260">Read [Add your custom domain name to Azure Active Directory](../active-directory-add-domain.md) for more info on adding and verifying domains.</span></span>

<span data-ttu-id="4f18e-261">Azure AD Connect identifierar om du kör i en icke-dirigerbara domänmiljö och korrekt skulle varnar dig från att gå vidare med standardinställningar.</span><span class="sxs-lookup"><span data-stu-id="4f18e-261">Azure AD Connect detects if you are running in a non-routable domain environment and would appropriately warn you from going ahead with express settings.</span></span> <span data-ttu-id="4f18e-262">Om du arbetar i en icke-dirigerbara domän, är det troligt att UPN för användarna har icke-dirigerbara suffix för.</span><span class="sxs-lookup"><span data-stu-id="4f18e-262">If you are operating in a non-routable domain, then it is likely that the UPN of the users have non-routable suffixes too.</span></span> <span data-ttu-id="4f18e-263">Till exempel föreslår, om du kör under contoso.local, Azure AD Connect du om du vill använda anpassade inställningar i stället för med standardinställningar.</span><span class="sxs-lookup"><span data-stu-id="4f18e-263">For example, if you are running under contoso.local, Azure AD Connect suggests you to use custom settings rather than using express settings.</span></span> <span data-ttu-id="4f18e-264">Med anpassade inställningar kan du ange attributet som ska användas som UPN för att logga in på Azure när användarna har synkroniserats till Azure AD.</span><span class="sxs-lookup"><span data-stu-id="4f18e-264">Using custom settings, you are able to specify the attribute that should be used as UPN to sign in to Azure after the users are synced to Azure AD.</span></span>

## <a name="next-steps"></a><span data-ttu-id="4f18e-265">Nästa steg</span><span class="sxs-lookup"><span data-stu-id="4f18e-265">Next steps</span></span>
<span data-ttu-id="4f18e-266">Läs mer om hur du [integrerar dina lokala identiteter med Azure Active Directory](active-directory-aadconnect.md).</span><span class="sxs-lookup"><span data-stu-id="4f18e-266">Learn more about [Integrating your on-premises identities with Azure Active Directory](active-directory-aadconnect.md).</span></span>

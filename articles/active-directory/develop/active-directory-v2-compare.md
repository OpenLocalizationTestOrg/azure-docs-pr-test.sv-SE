---
title: "Vad är olika i Azure AD v2.0-slutpunkten? | Microsoft Docs"
description: "En jämförelse mellan den ursprungliga Azure AD och v2.0-slutpunkter."
services: active-directory
documentationcenter: 
author: dstrockis
manager: mbaldwin
editor: 
ms.assetid: 5060da46-b091-4e25-9fa8-af4ae4359b6c
ms.service: active-directory
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 05/01/2017
ms.author: dastrock
ms.custom: aaddev
ms.openlocfilehash: 81de65b0e825dec64383f52b02c5ee56c9434807
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: sv-SE
ms.lasthandoff: 07/11/2017
---
# <a name="whats-different-about-the-v20-endpoint"></a><span data-ttu-id="0815f-104">Vad är skillnaden mellan v2.0-slutpunkten?</span><span class="sxs-lookup"><span data-stu-id="0815f-104">What's different about the v2.0 endpoint?</span></span>
<span data-ttu-id="0815f-105">Om du är bekant med Azure Active Directory eller ha integrerade appar med Azure AD tidigare, kan det finnas vissa skillnader i v2.0-slutpunkten som du inte förväntar dig.</span><span class="sxs-lookup"><span data-stu-id="0815f-105">If you're familiar with Azure Active Directory or have integrated apps with Azure AD in the past, there may be some differences in the v2.0 endpoint that you would not expect.</span></span>  <span data-ttu-id="0815f-106">Det här dokumentet visar dessa skillnader för din förståelse.</span><span class="sxs-lookup"><span data-stu-id="0815f-106">This document calls out those differences for your understanding.</span></span>

> [!NOTE]
> <span data-ttu-id="0815f-107">Inte alla Azure Active Directory-scenarier och funktioner som stöds av v2.0-slutpunkten.</span><span class="sxs-lookup"><span data-stu-id="0815f-107">Not all Azure Active Directory scenarios & features are supported by the v2.0 endpoint.</span></span>  <span data-ttu-id="0815f-108">Läs mer om för att avgöra om du ska använda v2.0-slutpunkten [v2.0 begränsningar](active-directory-v2-limitations.md).</span><span class="sxs-lookup"><span data-stu-id="0815f-108">To determine if you should use the v2.0 endpoint, read about [v2.0 limitations](active-directory-v2-limitations.md).</span></span>
>

## <a name="microsoft-accounts-and-azure-ad-accounts"></a><span data-ttu-id="0815f-109">Microsoft-konton och Azure AD-konton</span><span class="sxs-lookup"><span data-stu-id="0815f-109">Microsoft accounts and Azure AD accounts</span></span>
<span data-ttu-id="0815f-110">V2.0-slutpunkten kan utvecklare skriva appar som accepterar logga in från både Microsoft Accounts och Azure AD-konton med hjälp av en enda auth-slutpunkt.</span><span class="sxs-lookup"><span data-stu-id="0815f-110">The v2.0 endpoint allow developers to write apps that accept sign-in from both Microsoft Accounts and Azure AD accounts, using a single auth endpoint.</span></span>  <span data-ttu-id="0815f-111">Detta ger dig möjlighet att skriva din app helt konto-oberoende; Det kan vara ignorant för typ av konto som användaren loggar in med.</span><span class="sxs-lookup"><span data-stu-id="0815f-111">This gives you the ability to write your app completely account-agnostic; it can be ignorant of the type of account that the user signs in with.</span></span>  <span data-ttu-id="0815f-112">Naturligtvis kan du *kan* göra appen känner till vilken typ av konto som används i en viss session, men du behöver.</span><span class="sxs-lookup"><span data-stu-id="0815f-112">Of course, you *can* make your app aware of the type of account being used in a particular session, but you don't have to.</span></span>

<span data-ttu-id="0815f-113">Till exempel om din app anropar den [Microsoft Graph](https://graph.microsoft.io), vissa ytterligare funktioner och data kommer att användas företaget, till exempel sina SharePoint-webbplatser eller katalogdata.</span><span class="sxs-lookup"><span data-stu-id="0815f-113">For instance, if your app calls the [Microsoft Graph](https://graph.microsoft.io), some additional functionality and data will be available to enterprise users, such as their SharePoint sites or Directory data.</span></span>  <span data-ttu-id="0815f-114">Men för många åtgärder, t.ex [läsa en användares e-post](https://graph.microsoft.io/docs/api-reference/v1.0/resources/message), koden kan skrivas exakt samma för både Microsoft Accounts och Azure AD-konton.</span><span class="sxs-lookup"><span data-stu-id="0815f-114">But for many actions, such as [Reading a user's mail](https://graph.microsoft.io/docs/api-reference/v1.0/resources/message), the code can be written exactly the same for both Microsoft Accounts and Azure AD accounts.</span></span>  

<span data-ttu-id="0815f-115">Integrera din app med Azure AD och Microsoft Accounts är nu en enkel process.</span><span class="sxs-lookup"><span data-stu-id="0815f-115">Integrating your app with Microsoft Accounts and Azure AD accounts is now one simple process.</span></span>  <span data-ttu-id="0815f-116">Du kan använda en enda uppsättning slutpunkter, ett enda bibliotek och en enda app-registrering för att få åtkomst till både klienten och enterprise.</span><span class="sxs-lookup"><span data-stu-id="0815f-116">You can use a single set of endpoints, a single library, and a single app registration to gain access to both the consumer and enterprise worlds.</span></span>  <span data-ttu-id="0815f-117">Mer information om v2.0-slutpunkten kolla [översikten](active-directory-appmodel-v2-overview.md).</span><span class="sxs-lookup"><span data-stu-id="0815f-117">To learn more about the v2.0 endpoint, check out [the overview](active-directory-appmodel-v2-overview.md).</span></span>

## <a name="new-app-registration-portal"></a><span data-ttu-id="0815f-118">Portalen för registrering av nya app</span><span class="sxs-lookup"><span data-stu-id="0815f-118">New app registration portal</span></span>
<span data-ttu-id="0815f-119">Om du vill registrera en app som fungerar med v2.0-slutpunkten måste du använda en ny app-portalen för registrering: [apps.dev.microsoft.com](https://apps.dev.microsoft.com/?referrer=https://azure.microsoft.com/documentation/articles&deeplink=/appList).</span><span class="sxs-lookup"><span data-stu-id="0815f-119">To register an app that works with the v2.0 endpoint, you must use a new app registration portal: [apps.dev.microsoft.com](https://apps.dev.microsoft.com/?referrer=https://azure.microsoft.com/documentation/articles&deeplink=/appList).</span></span>  <span data-ttu-id="0815f-120">Detta är portal där du kan hämta ett program-ID, anpassa utseendet på inloggningssidan för din app och mycket mer.</span><span class="sxs-lookup"><span data-stu-id="0815f-120">This is the portal where you can obtain an application ID, customize the appearance of your app's sign-in page, and more.</span></span>  <span data-ttu-id="0815f-121">Allt du behöver åtkomst till portalen är ett påslagen microsoftkonto - personlig eller arbete/Skol-konto.</span><span class="sxs-lookup"><span data-stu-id="0815f-121">All you need to access the portal is a Microsoft powered account - either personal or work/school account.</span></span>

## <a name="one-app-id-for-all-platforms"></a><span data-ttu-id="0815f-122">En app-ID för alla plattformar</span><span class="sxs-lookup"><span data-stu-id="0815f-122">One app ID for all platforms</span></span>
<span data-ttu-id="0815f-123">Om du har använt Azure Active Directory, har du förmodligen registrerad flera olika program för ett projekt.</span><span class="sxs-lookup"><span data-stu-id="0815f-123">If you've used Azure Active Directory, you've probably registered several different apps for a single project.</span></span>  <span data-ttu-id="0815f-124">Till exempel om du har skapat både en webbplats och en iOS-app var du tvungen att registrera dem separat, med två olika program-ID: N.</span><span class="sxs-lookup"><span data-stu-id="0815f-124">For example, if you built both a website and an iOS app, you had to register them separately, using two different Application Ids.</span></span> <span data-ttu-id="0815f-125">Portalen för registrering av Azure AD app måste du göra denna skillnad under registreringen:</span><span class="sxs-lookup"><span data-stu-id="0815f-125">The Azure AD app registration portal forced you to make this distinction during registration:</span></span>

![Gamla programregistrering UI](../../media/active-directory-v2-flows/old_app_registration.PNG)

<span data-ttu-id="0815f-127">På samma sätt om du har en webbplats och en serverdel webb-api, kanske du har registrerat varje som en separat app i Azure AD.</span><span class="sxs-lookup"><span data-stu-id="0815f-127">Similarly, if you had a website and a backend web api, you might have registered each as a separate app in Azure AD.</span></span>  <span data-ttu-id="0815f-128">Eller om du en iOS-app och en Android-app måste du även kan har registrerat två olika appar.</span><span class="sxs-lookup"><span data-stu-id="0815f-128">Or if you had an iOS app and an Android app, you also might have registered two different apps.</span></span>  <span data-ttu-id="0815f-129">Registrering av varje komponent i ett program ledde till vissa oväntat beteende för utvecklare och sina kunder:</span><span class="sxs-lookup"><span data-stu-id="0815f-129">Registering each component of an application led to some unexpected behaviors for developers and their customers:</span></span>

* <span data-ttu-id="0815f-130">Varje komponent visades som en separat app i Azure Active Directory-klient för varje kund.</span><span class="sxs-lookup"><span data-stu-id="0815f-130">Each component appeared as a separate app in the Azure Active Directory tenant of each customer.</span></span>
* <span data-ttu-id="0815f-131">När en Innehavaradministratör försökte tillämpa principen för att hantera åtkomst till eller ta bort en app, måste de göra det för varje komponent i appen.</span><span class="sxs-lookup"><span data-stu-id="0815f-131">When a tenant administrator attempted to apply policy to, manage access to, or delete an app, they would have to do so for each component of the app.</span></span>
* <span data-ttu-id="0815f-132">När kunder samtyckt till ett program, visas varje komponent på skärmen medgivande som olika program.</span><span class="sxs-lookup"><span data-stu-id="0815f-132">When customers consented to an application, each component would appear in the consent screen as a distinct application.</span></span>

<span data-ttu-id="0815f-133">Med v2.0-slutpunkten du nu registrera alla komponenter i ditt projekt som en enda app-registrering och använder ett enda program-Id för hela projektet.</span><span class="sxs-lookup"><span data-stu-id="0815f-133">With the v2.0 endpoint, you can now register all components of your project as a single app registration, and use a single Application Id for your entire project.</span></span>  <span data-ttu-id="0815f-134">Du kan lägga till flera ”plattformar” i en varje projekt och ange lämpliga data för varje plattform som du lägger till.</span><span class="sxs-lookup"><span data-stu-id="0815f-134">You can add several "platforms" to a each project, and provide the appropriate data for each platform you add.</span></span>  <span data-ttu-id="0815f-135">Naturligtvis kan du skapa så många appar som du vill beroende på dina krav, men bara en program-Id för flesta fall bör vara nödvändigt.</span><span class="sxs-lookup"><span data-stu-id="0815f-135">Of course, you can create as many apps as you like depending on your requirements, but for the majority of cases only one Application Id should be necessary.</span></span>

<span data-ttu-id="0815f-136">Vårt mål är att det kommer leda till ett mer förenklad hantering och utvecklingsarbetet och skapa en mer samlad vy över ett projekt som du kanske arbetar på.</span><span class="sxs-lookup"><span data-stu-id="0815f-136">Our aim is that this will lead to a more simplified app management and development experience, and create a more consolidated view of a single project that you might be working on.</span></span>

## <a name="scopes-not-resources"></a><span data-ttu-id="0815f-137">Scope, inte resurser</span><span class="sxs-lookup"><span data-stu-id="0815f-137">Scopes, not resources</span></span>
<span data-ttu-id="0815f-138">I Azure Active Directory, en app kan fungera som en **resurs**, eller en mottagare av token.</span><span class="sxs-lookup"><span data-stu-id="0815f-138">In Azure Active Directory, an app can behave as a **resource**, or a recipient of tokens.</span></span>  <span data-ttu-id="0815f-139">En resurs kan definiera ett antal **scope** eller **oAuth2Permissions** som kan användas, vilket gör att klientdatorer appar att begära token till resursen för en viss uppsättning scope.</span><span class="sxs-lookup"><span data-stu-id="0815f-139">A resource can define a number of **scopes** or **oAuth2Permissions** that it understands, allowing client apps to request tokens to that resource for a certain set of scopes.</span></span>  <span data-ttu-id="0815f-140">Överväg att Azure AD Graph-API som ett exempel på en resurs:</span><span class="sxs-lookup"><span data-stu-id="0815f-140">Consider the Azure AD Graph API as an example of a resource:</span></span>

* <span data-ttu-id="0815f-141">Resurs-ID eller `AppID URI`:`https://graph.windows.net/`</span><span class="sxs-lookup"><span data-stu-id="0815f-141">Resource Identifier, or `AppID URI`: `https://graph.windows.net/`</span></span>
* <span data-ttu-id="0815f-142">Scope, eller `OAuth2Permissions`: `Directory.Read`, `Directory.Write`osv.</span><span class="sxs-lookup"><span data-stu-id="0815f-142">Scopes, or `OAuth2Permissions`: `Directory.Read`, `Directory.Write`, etc.</span></span>  

<span data-ttu-id="0815f-143">Allt detta gäller för den v2.0-slutpunkten.</span><span class="sxs-lookup"><span data-stu-id="0815f-143">All of this holds true for the the v2.0 endpoint.</span></span>  <span data-ttu-id="0815f-144">En app kan fortfarande fungera som resurs, definiera omfång och identifieras av en URI.</span><span class="sxs-lookup"><span data-stu-id="0815f-144">An app can still behave as resource, define scopes, and be identified by a URI.</span></span>  <span data-ttu-id="0815f-145">Klientprogram kan fortfarande att begära åtkomst till sådana omfattningar.</span><span class="sxs-lookup"><span data-stu-id="0815f-145">Client apps can still request access to those scopes.</span></span>  <span data-ttu-id="0815f-146">Men har det sätt som en klient begär de behörigheterna som ändrats.</span><span class="sxs-lookup"><span data-stu-id="0815f-146">However, the way in which a client requests those permissions has changed.</span></span>  <span data-ttu-id="0815f-147">Tidigare auktorisera en OAuth 2.0 kan har sökt begäran till Azure AD som:</span><span class="sxs-lookup"><span data-stu-id="0815f-147">In the past, an OAuth 2.0 authorize request to Azure AD might have looked like:</span></span>

```
GET https://login.microsoftonline.com/common/oauth2/authorize?
client_id=2d4d11a2-f814-46a7-890a-274a72a7309e
&resource=https%3A%2F%2Fgraph.windows.net%2F
...
```

<span data-ttu-id="0815f-148">där den **resurs** parameter anges vilken resurs som klientappen begär tillstånd för.</span><span class="sxs-lookup"><span data-stu-id="0815f-148">where the **resource** parameter indicated which resource the client app is requesting authorization for.</span></span>  <span data-ttu-id="0815f-149">Azure AD beräknas de behörigheter som krävs av appen baserat på statisk konfiguration i Azure-portalen och därefter utfärdade token.</span><span class="sxs-lookup"><span data-stu-id="0815f-149">Azure AD computed the permissions required by the app based on static configuration in the Azure Portal, and issued tokens accordingly.</span></span>  <span data-ttu-id="0815f-150">Nu godkänna samma OAuth 2.0 begäran ser ut som:</span><span class="sxs-lookup"><span data-stu-id="0815f-150">Now, the same OAuth 2.0 authorize request looks like:</span></span>

```
GET https://login.microsoftonline.com/common/oauth2/v2.0/authorize?
client_id=2d4d11a2-f814-46a7-890a-274a72a7309e
&scope=https%3A%2F%2Fgraph.windows.net%2Fdirectory.read%20https%3A%2F%2Fgraph.windows.net%2Fdirectory.write
...
```

<span data-ttu-id="0815f-151">där den **omfång** parametern anger vilken resurs och behörigheter appen begär tillstånd för.</span><span class="sxs-lookup"><span data-stu-id="0815f-151">where the **scope** parameter indicates which resource and permissions the app is requesting authorization for.</span></span> <span data-ttu-id="0815f-152">En resurs finns fortfarande mycket i begäran - finns bara i värden för parametern omfång.</span><span class="sxs-lookup"><span data-stu-id="0815f-152">The desired resource is still very present in the request - it is simply encompassed in each of the values of the scope parameter.</span></span>  <span data-ttu-id="0815f-153">Använda omfattningsparametern i det här sättet kan v2.0-slutpunkten är mer kompatibel med OAuth 2.0-specifikationen och justerar närmare med vanliga branschens praxis.</span><span class="sxs-lookup"><span data-stu-id="0815f-153">Using the scope parameter in this manner allows the v2.0 endpoint to be more compliant with the OAuth 2.0 specification, and aligns more closely with common industry practices.</span></span>  <span data-ttu-id="0815f-154">Det gör också att appar att utföra [inkrementell medgivande](#incremental-and-dynamic-consent), vilket beskrivs i nästa avsnitt.</span><span class="sxs-lookup"><span data-stu-id="0815f-154">It also enables apps to perform [incremental consent](#incremental-and-dynamic-consent), which is described in the next section.</span></span>

## <a name="incremental-and-dynamic-consent"></a><span data-ttu-id="0815f-155">Inkrementell och dynamiska medgivande</span><span class="sxs-lookup"><span data-stu-id="0815f-155">Incremental and dynamic consent</span></span>
<span data-ttu-id="0815f-156">Appar som är registrerad i Azure AD som tidigare behövs för att ange behörigheterna som krävs för OAuth 2.0 i Azure-portalen vid tidpunkten för skapandet av app:</span><span class="sxs-lookup"><span data-stu-id="0815f-156">Apps registered in Azure AD previously needed to specify their required OAuth 2.0 permissions in the Azure Portal, at app creation time:</span></span>

![Behörigheter för registrering av Användargränssnittet](../../media/active-directory-v2-flows/app_reg_permissions.PNG)

<span data-ttu-id="0815f-158">De behörigheter som har konfigurerats i en app krävs **statiskt**.</span><span class="sxs-lookup"><span data-stu-id="0815f-158">The permissions an app required were configured **statically**.</span></span>  <span data-ttu-id="0815f-159">När detta tillåts konfigurationen av appen finns i Azure Portal och hålls koden nice och enkel uppstår några problem för utvecklare:</span><span class="sxs-lookup"><span data-stu-id="0815f-159">While this allowed configuration of the app to exist in the Azure Portal and kept the code nice and simple, it presents a few issues for developers:</span></span>

* <span data-ttu-id="0815f-160">En app behövt känner till alla de behörigheter som behöver någonsin vid tidpunkten för skapandet av appen.</span><span class="sxs-lookup"><span data-stu-id="0815f-160">An app had to know all of the permissions it would ever need at app creation time.</span></span>  <span data-ttu-id="0815f-161">Lägga till behörigheter över tid var svåra.</span><span class="sxs-lookup"><span data-stu-id="0815f-161">Adding permissions over time was a difficult process.</span></span>
* <span data-ttu-id="0815f-162">En app behövt känner till alla resurser som den skulle någonsin komma i förväg.</span><span class="sxs-lookup"><span data-stu-id="0815f-162">An app had to know all of the resources it would ever access ahead of time.</span></span>  <span data-ttu-id="0815f-163">Det var svårt att skapa appar som kan komma åt ett godtyckligt antal resurser.</span><span class="sxs-lookup"><span data-stu-id="0815f-163">It was difficult to create apps that could access an arbitrary number of resources.</span></span>
* <span data-ttu-id="0815f-164">En app var tvunget att begära alla behörigheter som behöver någonsin vid användarens första inloggning.</span><span class="sxs-lookup"><span data-stu-id="0815f-164">An app had to request all the permissions it would ever need upon the user's first sign-in.</span></span>  <span data-ttu-id="0815f-165">I vissa fall kan detta ledde till en lång lista med behörigheter som rekommenderas inte slutanvändare från godkänner appens åtkomst på första inloggning.</span><span class="sxs-lookup"><span data-stu-id="0815f-165">In some cases this led to a very long list of permissions, which discouraged end-users from approving the app's access on initial sign-in.</span></span>

<span data-ttu-id="0815f-166">Med v2.0-slutpunkten kan du ange behörigheterna som din app måste **dynamiskt**, vid körning under vanlig användning av din app.</span><span class="sxs-lookup"><span data-stu-id="0815f-166">With the v2.0 endpoint, you can specify the permissions your app needs **dynamically**, at runtime, during regular usage of your app.</span></span>  <span data-ttu-id="0815f-167">Om du vill göra det, du kan ange omfång som din app måste vid en viss tidpunkt genom att inkludera dem i den `scope` -parametern för en begäran om godkännande:</span><span class="sxs-lookup"><span data-stu-id="0815f-167">To do so, you can specify the scopes your app needs at any given point in time by including them in the `scope` parameter of an authorization request:</span></span>

```
GET https://login.microsoftonline.com/common/oauth2/v2.0/authorize?
client_id=2d4d11a2-f814-46a7-890a-274a72a7309e
&scope=https%3A%2F%2Fgraph.windows.net%2Fdirectory.read%20https%3A%2F%2Fgraph.windows.net%2Fdirectory.write
...
```

<span data-ttu-id="0815f-168">Ovanstående begäranden behörigheten för appen att läsa katalogdata i en Azure AD-användare, samt skriva data till sina kataloger.</span><span class="sxs-lookup"><span data-stu-id="0815f-168">The above requests permission for the app to read an Azure AD user's directory data, as well as write data to their directory.</span></span>  <span data-ttu-id="0815f-169">Om användaren har godkänt för dessa behörigheter i förflutna för den här specifika appen, kommer bara att ange sina autentiseringsuppgifter och vara inloggad i appen.</span><span class="sxs-lookup"><span data-stu-id="0815f-169">If the user has consented to those permissions in the past for this particular app, they will simply enter their credentials and be signed into the app.</span></span>  <span data-ttu-id="0815f-170">Om användaren inte har godkänt till någon av dessa behörigheter, frågar v2.0-slutpunkten användaren om medgivande till dessa behörigheter.</span><span class="sxs-lookup"><span data-stu-id="0815f-170">If the user has not consented to any of these permissions, the v2.0 endpoint will ask the user for consent to those permissions.</span></span>  <span data-ttu-id="0815f-171">Om du vill veta mer kan du läsa mer om [behörigheter, medgivande och scope](active-directory-v2-scopes.md).</span><span class="sxs-lookup"><span data-stu-id="0815f-171">To learn more, you can read up on [permissions, consent, and scopes](active-directory-v2-scopes.md).</span></span>

<span data-ttu-id="0815f-172">Att tillåta en app begär behörighet dynamiskt via den `scope` parametern ger dig fullständig kontroll över din användarupplevelse.</span><span class="sxs-lookup"><span data-stu-id="0815f-172">Allowing an app to request permissions dynamically via the `scope` parameter gives you full control over your user's experience.</span></span>  <span data-ttu-id="0815f-173">Om du vill kan välja du att frontload ditt medgivande får och fråga efter alla behörigheter i en begäran för ursprungliga tillståndet.</span><span class="sxs-lookup"><span data-stu-id="0815f-173">If you wish, you can choose to frontload your consent experience and ask for all permissions in one initial authorization request.</span></span>  <span data-ttu-id="0815f-174">Eller om din app kräver ett stort antal behörigheter, kan du samla in dessa behörigheter från användaren inkrementellt, när de försöker använda vissa funktioner i din app med tiden.</span><span class="sxs-lookup"><span data-stu-id="0815f-174">Or if your app requires a large number of permissions, you can choose to gather those permissions from the user incrementally, as they attempt to use certain features of your app over time.</span></span>

## <a name="well-known-scopes"></a><span data-ttu-id="0815f-175">Välkända scope</span><span class="sxs-lookup"><span data-stu-id="0815f-175">Well-known scopes</span></span>
#### <a name="offline-access"></a><span data-ttu-id="0815f-176">Offline-åtkomst</span><span class="sxs-lookup"><span data-stu-id="0815f-176">Offline access</span></span>
<span data-ttu-id="0815f-177">Appar med v2.0-slutpunkten kan kräva användning av en ny välkända behörighet för appar – den `offline_access` omfång.</span><span class="sxs-lookup"><span data-stu-id="0815f-177">Apps using the v2.0 endpoint may require the use of a new well-known permission for apps - the `offline_access` scope.</span></span>  <span data-ttu-id="0815f-178">Alla appar måste du begära denna behörighet om de behöver för att komma åt resurser på uppdrag av en användare för en längre tidsperiod, även när användaren inte aktivt använder appen.</span><span class="sxs-lookup"><span data-stu-id="0815f-178">All apps will need to request this permission if they need to access resources on the behalf of a user for a prolonged period of time, even when the user may not be actively using the app.</span></span>  <span data-ttu-id="0815f-179">Den `offline_access` omfattningen visas för användaren i dialogrutor medgivande som ”åtkomst till data offline” som användaren måste acceptera att.</span><span class="sxs-lookup"><span data-stu-id="0815f-179">The `offline_access` scope will appear to the user in consent dialogs as "Access your data offline", which the user must agree to.</span></span>  <span data-ttu-id="0815f-180">Begär den `offline_access` behörighet kan ditt webbprogram att ta emot OAuth 2.0 refresh_tokens från v2.0-slutpunkten.</span><span class="sxs-lookup"><span data-stu-id="0815f-180">Requesting the `offline_access` permission will enable your web app to receive OAuth 2.0 refresh_tokens from the v2.0 endpoint.</span></span>  <span data-ttu-id="0815f-181">Refresh_tokens är långlivade och kan utbyta för nya OAuth 2.0-access_tokens under långa perioder åtkomst.</span><span class="sxs-lookup"><span data-stu-id="0815f-181">Refresh_tokens are long-lived, and can be exchanged for new OAuth 2.0 access_tokens for extended periods of access.</span></span>  

<span data-ttu-id="0815f-182">Om din app inte begär den `offline_access` omfång, får den inte refresh_tokens.</span><span class="sxs-lookup"><span data-stu-id="0815f-182">If your app does not request the `offline_access` scope, it will not receive refresh_tokens.</span></span>  <span data-ttu-id="0815f-183">Det innebär att när du lösa in en authorization_code i OAuth 2.0-auktoriseringskodflödet endast får du tillbaka en access_token från den `/token` slutpunkt.</span><span class="sxs-lookup"><span data-stu-id="0815f-183">This means that when you redeem an authorization_code in the OAuth 2.0 authorization code flow, you will only receive back an access_token from the `/token` endpoint.</span></span>  <span data-ttu-id="0815f-184">Den access_token förblir giltig för en kort tidsperiod (vanligtvis en timme), men till slut upphör att gälla.</span><span class="sxs-lookup"><span data-stu-id="0815f-184">That access_token will remain valid for a short period of time (typically one hour), but will eventually expire.</span></span>  <span data-ttu-id="0815f-185">Vid tidpunkten, din app behöver du omdirigera användaren tillbaka till den `/authorize` slutpunkten för att hämta en ny authorization_code.</span><span class="sxs-lookup"><span data-stu-id="0815f-185">At that point in time, your app will need to redirect the user back to the `/authorize` endpoint to retrieve a new authorization_code.</span></span>  <span data-ttu-id="0815f-186">Under den här omdirigera användaren kan eller inte behöva ange sina autentiseringsuppgifter igen eller nytt samtycker till att behörigheter, beroende på den typen av app.</span><span class="sxs-lookup"><span data-stu-id="0815f-186">During this redirect, the user may or may not need to enter their credentials again or re-consent to permissions, depending on the the type of app.</span></span>

<span data-ttu-id="0815f-187">Mer information om OAuth 2.0 och refresh_tokens access_tokens ta en titt på [protokollreferens för v2.0](active-directory-v2-protocols.md).</span><span class="sxs-lookup"><span data-stu-id="0815f-187">To learn more about OAuth 2.0, refresh_tokens, and access_tokens, check out the [v2.0 protocol reference](active-directory-v2-protocols.md).</span></span>

#### <a name="openid-profile-and-email"></a><span data-ttu-id="0815f-188">OpenID profil och e-post</span><span class="sxs-lookup"><span data-stu-id="0815f-188">OpenID, profile and email</span></span>
<span data-ttu-id="0815f-189">Tidigare skulle mest grundläggande OpenID Connect inloggning flödet med Azure Active Directory innehåller en mängd information om användaren i den resulterande id_token.</span><span class="sxs-lookup"><span data-stu-id="0815f-189">Historically, the most basic OpenID Connect sign-in flow with Azure Active Directory would provide a wealth of information about the user in the resulting id_token.</span></span>  <span data-ttu-id="0815f-190">Anspråk i en id_token kan innehålla användarens namn, prioriterade användarnamn, e-postadress, objekt-ID och mer.</span><span class="sxs-lookup"><span data-stu-id="0815f-190">The claims in an id_token can include the user's name, preferred username, email address, object ID, and more.</span></span>

<span data-ttu-id="0815f-191">Vi nu är att begränsa informationen som den `openid` omfång ger din appåtkomst till.</span><span class="sxs-lookup"><span data-stu-id="0815f-191">We are now restricting the information that the `openid` scope affords your app access to.</span></span>  <span data-ttu-id="0815f-192">Området 'openid' kommer endast att din app kan logga in användaren i och ta emot en appspecifika identifierare för användaren.</span><span class="sxs-lookup"><span data-stu-id="0815f-192">The ‘openid’ scope will only allow your app to sign the user in, and receive an app-specific identifier for the user.</span></span>  <span data-ttu-id="0815f-193">Om du vill hämta personligt identifierbar information (PII) om användaren i din app behöver din app och begär ytterligare behörighet från användaren.</span><span class="sxs-lookup"><span data-stu-id="0815f-193">If you want to obtain personally identifiable information (PII) about the user in your app, your app will need to request additional permissions from the user.</span></span>  <span data-ttu-id="0815f-194">Vi introducerar två nya scope – den `email` och `profile` scope – som gör att du gör.</span><span class="sxs-lookup"><span data-stu-id="0815f-194">We are introducing two new scopes – the `email` and `profile` scopes – which allow you to do so.</span></span>

<span data-ttu-id="0815f-195">Den `email` scope är mycket enkelt – den kan din appåtkomst till användarens primära e-postadress via den `email` anspråk i id_token.</span><span class="sxs-lookup"><span data-stu-id="0815f-195">The `email` scope is very straightforward – it allows your app access to the user’s primary email address via the `email` claim in the id_token.</span></span>  <span data-ttu-id="0815f-196">Den `profile` omfång ger din appåtkomst till andra grundläggande information om användare – deras namn, prioriterade username, objekt-ID och så vidare.</span><span class="sxs-lookup"><span data-stu-id="0815f-196">The `profile` scope affords your app access to all other basic information about the user – their name, preferred username, object ID, and so on.</span></span>

<span data-ttu-id="0815f-197">Du kan code din app på en minimal avslöjande sätt – endast kan du be användaren för informationen att din app kräver för att utföra sitt jobb.</span><span class="sxs-lookup"><span data-stu-id="0815f-197">This allows you to code your app in a minimal-disclosure fashion – you can only ask the user for the set of information that your app requires to do its job.</span></span>  <span data-ttu-id="0815f-198">Mer information om dessa scope avser [omfattningsreferens v2.0](active-directory-v2-scopes.md).</span><span class="sxs-lookup"><span data-stu-id="0815f-198">For more information on these scopes, refer to [the v2.0 scope reference](active-directory-v2-scopes.md).</span></span>

## <a name="token-claims"></a><span data-ttu-id="0815f-199">Token anspråk</span><span class="sxs-lookup"><span data-stu-id="0815f-199">Token Claims</span></span>
<span data-ttu-id="0815f-200">Anspråk i token som utfärdats av v2.0-slutpunkten inte vara identiskt med token som utfärdats av den allmänt tillgängliga Azure AD-slutpunkter – appar migrera till den nya tjänsten kan inte utgå från ett visst anspråk kommer att finnas i id_tokens eller access_tokens.</span><span class="sxs-lookup"><span data-stu-id="0815f-200">The claims in tokens issued by the v2.0 endpoint will not be identical to tokens issued by the generally available Azure AD endpoints - apps migrating to the new service should not assume a particular claim will exist in id_tokens or access_tokens.</span></span> <span data-ttu-id="0815f-201">Mer information om specifika anspråk som hänvisas till i v2.0-token, finns det [v2.0 tokenreferens](active-directory-v2-tokens.md).</span><span class="sxs-lookup"><span data-stu-id="0815f-201">To learn about the specific claims emitted in v2.0 tokens, see the [v2.0 token reference](active-directory-v2-tokens.md).</span></span>

## <a name="limitations"></a><span data-ttu-id="0815f-202">Begränsningar</span><span class="sxs-lookup"><span data-stu-id="0815f-202">Limitations</span></span>
<span data-ttu-id="0815f-203">Det finns några begränsningar vara medveten om när du använder v2.0-punkten.</span><span class="sxs-lookup"><span data-stu-id="0815f-203">There are a few restrictions to be aware of when using the v2.0 point.</span></span>  <span data-ttu-id="0815f-204">Mer information finns i [v2.0 begränsningar doc](active-directory-v2-limitations.md) att se om någon av dessa begränsningar gäller för ditt specifika scenario.</span><span class="sxs-lookup"><span data-stu-id="0815f-204">Please refer to the [v2.0 limitations doc](active-directory-v2-limitations.md) to see if any of these restrictions apply to your particular scenario.</span></span>

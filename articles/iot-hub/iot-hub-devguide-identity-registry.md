---
title: aaaUnderstand hello Azure IoT Hub identitetsregistret | Microsoft Docs
description: "Utvecklarhandbok - beskrivning av hello IoT-hubb identitetsregistret och hur toouse den toomanage dina enheter. Innehåller information om hello import och export av enheten identiteter gruppvis."
services: iot-hub
documentationcenter: .net
author: dominicbetts
manager: timlt
editor: 
ms.assetid: 0706eccd-e84c-4ae7-bbd4-2b1a22241147
ms.service: iot-hub
ms.devlang: multiple
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: na
ms.date: 08/08/2017
ms.author: dobett
ms.custom: H1Hack27Feb2017
ms.openlocfilehash: c9fe3730a4608e28c47807ecb42e13e73f6a2e80
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: sv-SE
ms.lasthandoff: 10/06/2017
---
# <a name="understand-hello-identity-registry-in-your-iot-hub"></a><span data-ttu-id="ed127-104">Förstå hello identitetsregistret i din IoT-hubb</span><span class="sxs-lookup"><span data-stu-id="ed127-104">Understand hello identity registry in your IoT hub</span></span>

<span data-ttu-id="ed127-105">Alla IoT-hubben har en identitetsregistret som lagrar information om hello enheter tillåts tooconnect toohello IoT-hubb.</span><span class="sxs-lookup"><span data-stu-id="ed127-105">Every IoT hub has an identity registry that stores information about hello devices permitted tooconnect toohello IoT hub.</span></span> <span data-ttu-id="ed127-106">Innan en enhet kan ansluta tooan IoT-hubb kan finnas det en post för enheten i hello IoT hub identitetsregistret.</span><span class="sxs-lookup"><span data-stu-id="ed127-106">Before a device can connect tooan IoT hub, there must be an entry for that device in hello IoT hub's identity registry.</span></span> <span data-ttu-id="ed127-107">En enhet måste också autentisera med hello IoT-hubben utifrån autentiseringsuppgifter som lagras i hello identitetsregistret.</span><span class="sxs-lookup"><span data-stu-id="ed127-107">A device must also authenticate with hello IoT hub based on credentials stored in hello identity registry.</span></span>

<span data-ttu-id="ed127-108">hello enhets-ID som lagras i hello identitetsregistret är skiftlägeskänslig.</span><span class="sxs-lookup"><span data-stu-id="ed127-108">hello device ID stored in hello identity registry is case-sensitive.</span></span>

<span data-ttu-id="ed127-109">På en hög nivå är hello identitetsregistret en REST-kompatibla samling enhetsresurser identitet.</span><span class="sxs-lookup"><span data-stu-id="ed127-109">At a high level, hello identity registry is a REST-capable collection of device identity resources.</span></span> <span data-ttu-id="ed127-110">När du lägger till en post i hello identitetsregistret skapar IoT-hubb en uppsättning resurser per enhet, till exempel hello kö som innehåller relä moln till enhet meddelanden.</span><span class="sxs-lookup"><span data-stu-id="ed127-110">When you add an entry in hello identity registry, IoT Hub creates a set of per-device resources such as hello queue that contains in-flight cloud-to-device messages.</span></span>

### <a name="when-toouse"></a><span data-ttu-id="ed127-111">När toouse</span><span class="sxs-lookup"><span data-stu-id="ed127-111">When toouse</span></span>

<span data-ttu-id="ed127-112">Använd hello identitetsregistret när du behöver:</span><span class="sxs-lookup"><span data-stu-id="ed127-112">Use hello identity registry when you need to:</span></span>

* <span data-ttu-id="ed127-113">Etablera enheter som ansluter tooyour IoT-hubb.</span><span class="sxs-lookup"><span data-stu-id="ed127-113">Provision devices that connect tooyour IoT hub.</span></span>
* <span data-ttu-id="ed127-114">Styra per enhet åtkomst tooyour hubbens enheten riktade slutpunkter.</span><span class="sxs-lookup"><span data-stu-id="ed127-114">Control per-device access tooyour hub's device-facing endpoints.</span></span>

> [!NOTE]
> <span data-ttu-id="ed127-115">Hej identitetsregistret innehåller inte några programspecifika metadata.</span><span class="sxs-lookup"><span data-stu-id="ed127-115">hello identity registry does not contain any application-specific metadata.</span></span>

## <a name="identity-registry-operations"></a><span data-ttu-id="ed127-116">Identitetsregisteråtgärder</span><span class="sxs-lookup"><span data-stu-id="ed127-116">Identity registry operations</span></span>

<span data-ttu-id="ed127-117">Hej IoT-hubb identitetsregistret visar hello följande åtgärder:</span><span class="sxs-lookup"><span data-stu-id="ed127-117">hello IoT Hub identity registry exposes hello following operations:</span></span>

* <span data-ttu-id="ed127-118">Skapa enhetsidentitet</span><span class="sxs-lookup"><span data-stu-id="ed127-118">Create device identity</span></span>
* <span data-ttu-id="ed127-119">Uppdatera enhetsidentitet</span><span class="sxs-lookup"><span data-stu-id="ed127-119">Update device identity</span></span>
* <span data-ttu-id="ed127-120">Hämta enhetsidentitet-ID: t</span><span class="sxs-lookup"><span data-stu-id="ed127-120">Retrieve device identity by ID</span></span>
* <span data-ttu-id="ed127-121">Ta bort enhetens identitet</span><span class="sxs-lookup"><span data-stu-id="ed127-121">Delete device identity</span></span>
* <span data-ttu-id="ed127-122">Fram too1000 identiteter</span><span class="sxs-lookup"><span data-stu-id="ed127-122">List up too1000 identities</span></span>
* <span data-ttu-id="ed127-123">Exportera alla identiteter tooAzure blob-lagring</span><span class="sxs-lookup"><span data-stu-id="ed127-123">Export all identities tooAzure blob storage</span></span>
* <span data-ttu-id="ed127-124">Importera identiteter från Azure blob storage</span><span class="sxs-lookup"><span data-stu-id="ed127-124">Import identities from Azure blob storage</span></span>

<span data-ttu-id="ed127-125">Dessa åtgärder kan använda Optimistisk samtidighet som anges i [RFC7232][lnk-rfc7232].</span><span class="sxs-lookup"><span data-stu-id="ed127-125">All these operations can use optimistic concurrency, as specified in [RFC7232][lnk-rfc7232].</span></span>

> [!IMPORTANT]
> <span data-ttu-id="ed127-126">Hej endast sätt tooretrieve alla identiteter i en IoT-hubb identitetsregistret är toouse hello [exportera] [ lnk-export] funktioner.</span><span class="sxs-lookup"><span data-stu-id="ed127-126">hello only way tooretrieve all identities in an IoT hub's identity registry is toouse hello [Export][lnk-export] functionality.</span></span>

<span data-ttu-id="ed127-127">En IoT-hubb identitetsregistret:</span><span class="sxs-lookup"><span data-stu-id="ed127-127">An IoT Hub identity registry:</span></span>

* <span data-ttu-id="ed127-128">Innehåller inte några metadata för program.</span><span class="sxs-lookup"><span data-stu-id="ed127-128">Does not contain any application metadata.</span></span>
* <span data-ttu-id="ed127-129">Kan användas som en ordlista med hjälp av hello **deviceId** som hello nyckel.</span><span class="sxs-lookup"><span data-stu-id="ed127-129">Can be accessed like a dictionary, by using hello **deviceId** as hello key.</span></span>
* <span data-ttu-id="ed127-130">Stöder inte lättfattliga frågor.</span><span class="sxs-lookup"><span data-stu-id="ed127-130">Does not support expressive queries.</span></span>

<span data-ttu-id="ed127-131">En IoT-lösning har vanligtvis ett separat Arkiv för Lösningsspecifika som innehåller programspecifika metadata.</span><span class="sxs-lookup"><span data-stu-id="ed127-131">An IoT solution typically has a separate solution-specific store that contains application-specific metadata.</span></span> <span data-ttu-id="ed127-132">Till exempel skulle hello Lösningsspecifika store i en lösning för smart byggnad registrera hello plats där en temperatursensor distribueras.</span><span class="sxs-lookup"><span data-stu-id="ed127-132">For example, hello solution-specific store in a smart building solution would record hello room in which a temperature sensor is deployed.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="ed127-133">Använd endast hello identitetsregistret för enhetshantering och etablerar operations.</span><span class="sxs-lookup"><span data-stu-id="ed127-133">Only use hello identity registry for device management and provisioning operations.</span></span> <span data-ttu-id="ed127-134">Hög genomströmning åtgärder vid körning bör inte beroende utför åtgärder i hello identitetsregistret.</span><span class="sxs-lookup"><span data-stu-id="ed127-134">High throughput operations at run time should not depend on performing operations in hello identity registry.</span></span> <span data-ttu-id="ed127-135">Till exempel är kontrollerar hello anslutningsstatus för en enhet innan du skickar ett kommando inte ett mönster som stöds.</span><span class="sxs-lookup"><span data-stu-id="ed127-135">For example, checking hello connection state of a device before sending a command is not a supported pattern.</span></span> <span data-ttu-id="ed127-136">Se till att toocheck hello [begränsning priser] [ lnk-quotas] för hello identitetsregistret och hello [enheten pulsslag] [ lnk-guidance-heartbeat] mönster.</span><span class="sxs-lookup"><span data-stu-id="ed127-136">Make sure toocheck hello [throttling rates][lnk-quotas] for hello identity registry, and hello [device heartbeat][lnk-guidance-heartbeat] pattern.</span></span>

## <a name="disable-devices"></a><span data-ttu-id="ed127-137">Inaktivera enheter</span><span class="sxs-lookup"><span data-stu-id="ed127-137">Disable devices</span></span>

<span data-ttu-id="ed127-138">Du kan inaktivera enheter genom att uppdatera hello **status** -egenskapen för en identitet i hello identitetsregistret.</span><span class="sxs-lookup"><span data-stu-id="ed127-138">You can disable devices by updating hello **status** property of an identity in hello identity registry.</span></span> <span data-ttu-id="ed127-139">Normalt använder du den här egenskapen i två scenarier:</span><span class="sxs-lookup"><span data-stu-id="ed127-139">Typically, you use this property in two scenarios:</span></span>

* <span data-ttu-id="ed127-140">Under en allokering orchestration-process.</span><span class="sxs-lookup"><span data-stu-id="ed127-140">During a provisioning orchestration process.</span></span> <span data-ttu-id="ed127-141">Mer information finns i [Enhetsetableringen][lnk-guidance-provisioning].</span><span class="sxs-lookup"><span data-stu-id="ed127-141">For more information, see [Device Provisioning][lnk-guidance-provisioning].</span></span>
* <span data-ttu-id="ed127-142">Om du av någon anledning du en enhet har komprometterats eller blivit obehörig.</span><span class="sxs-lookup"><span data-stu-id="ed127-142">If, for any reason, you consider a device is compromised or has become unauthorized.</span></span>

## <a name="import-and-export-device-identities"></a><span data-ttu-id="ed127-143">Importera och exportera enheten identiteter</span><span class="sxs-lookup"><span data-stu-id="ed127-143">Import and export device identities</span></span>

<span data-ttu-id="ed127-144">Du kan exportera enheten identiteter i grupp från en IoT-hubb identitetsregistret med hjälp av asynkrona åtgärder på hello [IoT-hubb resurs leverantörsslutpunkt][lnk-endpoints].</span><span class="sxs-lookup"><span data-stu-id="ed127-144">You can export device identities in bulk from an IoT hub's identity registry, by using asynchronous operations on hello [IoT Hub resource provider endpoint][lnk-endpoints].</span></span> <span data-ttu-id="ed127-145">Export är långvariga jobb som använder en kundens blob-behållaren toosave identitet enhetsdata läsa från hello identitetsregistret.</span><span class="sxs-lookup"><span data-stu-id="ed127-145">Exports are long-running jobs that use a customer-supplied blob container toosave device identity data read from hello identity registry.</span></span>

<span data-ttu-id="ed127-146">Du kan importera enheten identiteter i bulk tooan IoT-hubbs identitetsregistret med hjälp av asynkrona åtgärder på hello [IoT-hubb resurs leverantörsslutpunkt][lnk-endpoints].</span><span class="sxs-lookup"><span data-stu-id="ed127-146">You can import device identities in bulk tooan IoT hub's identity registry, by using asynchronous operations on hello [IoT Hub resource provider endpoint][lnk-endpoints].</span></span> <span data-ttu-id="ed127-147">Import är långvariga jobb som använder data i en kundens blob-behållaren toowrite identitet enhetsdata till hello identitetsregistret.</span><span class="sxs-lookup"><span data-stu-id="ed127-147">Imports are long-running jobs that use data in a customer-supplied blob container toowrite device identity data into hello identity registry.</span></span>

* <span data-ttu-id="ed127-148">Detaljerad information om hello import och export API: er finns [IoT-hubb resursprovidern REST API: er][lnk-resource-provider-apis].</span><span class="sxs-lookup"><span data-stu-id="ed127-148">For detailed information about hello import and export APIs, see [IoT Hub resource provider REST APIs][lnk-resource-provider-apis].</span></span>
* <span data-ttu-id="ed127-149">toolearn mer om körs importera och exportera jobben, se [Massredigera hantering av identiteter för IoT-hubb enheten][lnk-bulk-identity].</span><span class="sxs-lookup"><span data-stu-id="ed127-149">toolearn more about running import and export jobs, see [Bulk management of IoT Hub device identities][lnk-bulk-identity].</span></span>

## <a name="device-provisioning"></a><span data-ttu-id="ed127-150">Enhetsetableringen</span><span class="sxs-lookup"><span data-stu-id="ed127-150">Device provisioning</span></span>

<span data-ttu-id="ed127-151">hello enhetsdata som lagras i en viss IoT-lösningen är beroende av hello särskilda krav för lösningen.</span><span class="sxs-lookup"><span data-stu-id="ed127-151">hello device data that a given IoT solution stores depends on hello specific requirements of that solution.</span></span> <span data-ttu-id="ed127-152">Men minst en lösning måste lagra enheten identiteter och autentiseringsnycklar.</span><span class="sxs-lookup"><span data-stu-id="ed127-152">But, as a minimum, a solution must store device identities and authentication keys.</span></span> <span data-ttu-id="ed127-153">Azure IoT-hubb innehåller en identitetsregistret som kan lagra värdena för varje enhet, t.ex ID, autentiseringsnycklar och statuskoder.</span><span class="sxs-lookup"><span data-stu-id="ed127-153">Azure IoT Hub includes an identity registry that can store values for each device such as IDs, authentication keys, and status codes.</span></span> <span data-ttu-id="ed127-154">En lösning kan använda andra Azure-tjänster, till exempel tabellagring eller blob storage Cosmos DB toostore alla övriga data.</span><span class="sxs-lookup"><span data-stu-id="ed127-154">A solution can use other Azure services such as table storage, blob storage, or Cosmos DB toostore any additional device data.</span></span>

<span data-ttu-id="ed127-155">*Enhetsetableringen* är hello process för att lägga till hello inledande toohello datalager i din lösning.</span><span class="sxs-lookup"><span data-stu-id="ed127-155">*Device provisioning* is hello process of adding hello initial device data toohello stores in your solution.</span></span> <span data-ttu-id="ed127-156">tooenable en ny enhet tooconnect tooyour hubb, måste du lägga till enheten ID och nycklar toohello IoT-hubb identitetsregistret.</span><span class="sxs-lookup"><span data-stu-id="ed127-156">tooenable a new device tooconnect tooyour hub, you must add a device ID and keys toohello IoT Hub identity registry.</span></span> <span data-ttu-id="ed127-157">Som en del av hello etableringsprocessen, kanske du måste tooinitialize enhetsspecifika data i andra lösning Arkiv.</span><span class="sxs-lookup"><span data-stu-id="ed127-157">As part of hello provisioning process, you might need tooinitialize device-specific data in other solution stores.</span></span>

## <a name="device-heartbeat"></a><span data-ttu-id="ed127-158">Enheten pulsslag</span><span class="sxs-lookup"><span data-stu-id="ed127-158">Device heartbeat</span></span>

<span data-ttu-id="ed127-159">Hej IoT-hubb identitetsregistret innehåller ett fält med namnet **connectionState**.</span><span class="sxs-lookup"><span data-stu-id="ed127-159">hello IoT Hub identity registry contains a field called **connectionState**.</span></span> <span data-ttu-id="ed127-160">Använd bara hello **connectionState** fältet under utveckling och felsökning.</span><span class="sxs-lookup"><span data-stu-id="ed127-160">Only use hello **connectionState** field during development and debugging.</span></span> <span data-ttu-id="ed127-161">IoT-lösningar bör inte fråga hello fält vid körning.</span><span class="sxs-lookup"><span data-stu-id="ed127-161">IoT solutions should not query hello field at run time.</span></span> <span data-ttu-id="ed127-162">Till exempel fråga inte hello **connectionState** fältet toocheck om en enhet är ansluten innan du skickar ett moln till enhet eller ett SMS.</span><span class="sxs-lookup"><span data-stu-id="ed127-162">For example, do not query hello **connectionState** field toocheck if a device is connected before you send a cloud-to-device message or an SMS.</span></span>

<span data-ttu-id="ed127-163">Om din IoT-lösningen behöver tooknow om en enhet är ansluten, bör du implementera hello *pulsslag mönster*.</span><span class="sxs-lookup"><span data-stu-id="ed127-163">If your IoT solution needs tooknow if a device is connected, you should implement hello *heartbeat pattern*.</span></span>

<span data-ttu-id="ed127-164">I mönstret pulsslag hello hello enhet skickar meddelanden från enhet till moln minst en gång var fast tidsperiod (t.ex, minst en gång i timmen).</span><span class="sxs-lookup"><span data-stu-id="ed127-164">In hello heartbeat pattern, hello device sends device-to-cloud messages at least once every fixed amount of time (for example, at least once every hour).</span></span> <span data-ttu-id="ed127-165">Därför även om en enhet inte har några data toosend skickar fortfarande den ett tomt meddelande enhet till moln (vanligtvis med en egenskap som identifierar den som ett pulsslag).</span><span class="sxs-lookup"><span data-stu-id="ed127-165">Therefore, even if a device does not have any data toosend, it still sends an empty device-to-cloud message (usually with a property that identifies it as a heartbeat).</span></span> <span data-ttu-id="ed127-166">På hello tjänstsidan upprätthåller hello en karta med hello senaste pulsslag togs emot för varje enhet.</span><span class="sxs-lookup"><span data-stu-id="ed127-166">On hello service side, hello solution maintains a map with hello last heartbeat received for each device.</span></span> <span data-ttu-id="ed127-167">Om hello lösningen inte får ett heartbeat-meddelande inom hello förväntade tiden från hello enhet förutsätter att det finns problem med hello enhet.</span><span class="sxs-lookup"><span data-stu-id="ed127-167">If hello solution does not receive a heartbeat message within hello expected time from hello device, it assumes that there is a problem with hello device.</span></span>

<span data-ttu-id="ed127-168">En mer komplex implementering kan omfatta hello information från [operations övervakning] [ lnk-devguide-opmon] tooidentify enheter som försöker tooconnect eller kommunicera men misslyckas.</span><span class="sxs-lookup"><span data-stu-id="ed127-168">A more complex implementation could include hello information from [operations monitoring][lnk-devguide-opmon] tooidentify devices that are trying tooconnect or communicate but failing.</span></span> <span data-ttu-id="ed127-169">När du implementerar hello pulsslag mönstret gör att toocheck [IoT-hubb kvoter och begränsningar][lnk-quotas].</span><span class="sxs-lookup"><span data-stu-id="ed127-169">When you implement hello heartbeat pattern, make sure toocheck [IoT Hub Quotas and Throttles][lnk-quotas].</span></span>

> [!NOTE]
> <span data-ttu-id="ed127-170">Om en IoT-lösningen använder hello anslutning tillstånd enbart toodetermine om toosend moln till enhet meddelanden och meddelanden är broadcast toolarge uppsättningar av enheter, bör du använda hello enklare inte *kort förfallotid* mönster.</span><span class="sxs-lookup"><span data-stu-id="ed127-170">If an IoT solution uses hello connection state solely toodetermine whether toosend cloud-to-device messages, and messages are not broadcast toolarge sets of devices, consider using hello simpler *short expiry time* pattern.</span></span> <span data-ttu-id="ed127-171">Det här mönstret uppnår hello samma resultat som du underhålla enheten anslutning tillstånd registret med hjälp av mönster för pulsslag hello samtidigt som det är mer effektivt.</span><span class="sxs-lookup"><span data-stu-id="ed127-171">This pattern achieves hello same result as maintaining a device connection state registry using hello heartbeat pattern, while being more efficient.</span></span> <span data-ttu-id="ed127-172">Om du begär meddelande bekräftelser kan IoT-hubb meddela dig om vilka enheter som kan tooreceive meddelanden och som inte är.</span><span class="sxs-lookup"><span data-stu-id="ed127-172">If you request message acknowledgements, IoT Hub can notify you about which devices are able tooreceive messages and which are not.</span></span>

## <a name="device-lifecycle-notifications"></a><span data-ttu-id="ed127-173">Enheten livscykelmeddelanden</span><span class="sxs-lookup"><span data-stu-id="ed127-173">Device lifecycle notifications</span></span>

<span data-ttu-id="ed127-174">IoT-hubb kan meddela din IoT-lösning när en enhetsidentitet skapas eller tas bort genom att skicka meddelanden för enheten livscykel.</span><span class="sxs-lookup"><span data-stu-id="ed127-174">IoT Hub can notify your IoT solution when a device identity is created or deleted by sending device lifecycle notifications.</span></span> <span data-ttu-id="ed127-175">toodo så IoT-lösningen behöver toocreate en väg och tooset hello datakällan lika för*DeviceLifecycleEvents*.</span><span class="sxs-lookup"><span data-stu-id="ed127-175">toodo so, your IoT solution needs toocreate a route and tooset hello Data Source equal too*DeviceLifecycleEvents*.</span></span> <span data-ttu-id="ed127-176">Inga livscykelmeddelanden skickas som standard, som är det inför finns ingen sådan vägar.</span><span class="sxs-lookup"><span data-stu-id="ed127-176">By default, no lifecycle notifications are sent, that is, no such routes pre-exist.</span></span> <span data-ttu-id="ed127-177">hello-meddelande innehåller egenskaperna och innehållet.</span><span class="sxs-lookup"><span data-stu-id="ed127-177">hello notification message includes properties, and body.</span></span>

<span data-ttu-id="ed127-178">Egenskaper: Meddelandet Systemegenskaper föregås hello `'$'` symbolen.</span><span class="sxs-lookup"><span data-stu-id="ed127-178">Properties: Message system properties are prefixed with hello `'$'` symbol.</span></span>

| <span data-ttu-id="ed127-179">Namn</span><span class="sxs-lookup"><span data-stu-id="ed127-179">Name</span></span> | <span data-ttu-id="ed127-180">Värde</span><span class="sxs-lookup"><span data-stu-id="ed127-180">Value</span></span> |
| --- | --- |
<span data-ttu-id="ed127-181">$content-typ</span><span class="sxs-lookup"><span data-stu-id="ed127-181">$content-type</span></span> | <span data-ttu-id="ed127-182">application/json</span><span class="sxs-lookup"><span data-stu-id="ed127-182">application/json</span></span> |
<span data-ttu-id="ed127-183">$iothub-enqueuedtime</span><span class="sxs-lookup"><span data-stu-id="ed127-183">$iothub-enqueuedtime</span></span> |  <span data-ttu-id="ed127-184">Tid när hello-meddelande skickades</span><span class="sxs-lookup"><span data-stu-id="ed127-184">Time when hello notification was sent</span></span> |
<span data-ttu-id="ed127-185">$iothub-meddelande-källa</span><span class="sxs-lookup"><span data-stu-id="ed127-185">$iothub-message-source</span></span> | <span data-ttu-id="ed127-186">deviceLifecycleEvents</span><span class="sxs-lookup"><span data-stu-id="ed127-186">deviceLifecycleEvents</span></span> |
<span data-ttu-id="ed127-187">$content-kodning</span><span class="sxs-lookup"><span data-stu-id="ed127-187">$content-encoding</span></span> | <span data-ttu-id="ed127-188">UTF-8</span><span class="sxs-lookup"><span data-stu-id="ed127-188">utf-8</span></span> |
<span data-ttu-id="ed127-189">opType</span><span class="sxs-lookup"><span data-stu-id="ed127-189">opType</span></span> | <span data-ttu-id="ed127-190">**createDeviceIdentity** eller **deleteDeviceIdentity**</span><span class="sxs-lookup"><span data-stu-id="ed127-190">**createDeviceIdentity** or **deleteDeviceIdentity**</span></span> |
<span data-ttu-id="ed127-191">hubName</span><span class="sxs-lookup"><span data-stu-id="ed127-191">hubName</span></span> | <span data-ttu-id="ed127-192">Namnet på IoT-hubb</span><span class="sxs-lookup"><span data-stu-id="ed127-192">Name of IoT Hub</span></span> |
<span data-ttu-id="ed127-193">deviceId</span><span class="sxs-lookup"><span data-stu-id="ed127-193">deviceId</span></span> | <span data-ttu-id="ed127-194">ID för hello-enhet</span><span class="sxs-lookup"><span data-stu-id="ed127-194">ID of hello device</span></span> |
<span data-ttu-id="ed127-195">operationTimestamp</span><span class="sxs-lookup"><span data-stu-id="ed127-195">operationTimestamp</span></span> | <span data-ttu-id="ed127-196">ISO8601 tidsstämpeln för åtgärden</span><span class="sxs-lookup"><span data-stu-id="ed127-196">ISO8601 timestamp of operation</span></span> |
<span data-ttu-id="ed127-197">iothub-meddelande-schema</span><span class="sxs-lookup"><span data-stu-id="ed127-197">iothub-message-schema</span></span> | <span data-ttu-id="ed127-198">deviceLifecycleNotification</span><span class="sxs-lookup"><span data-stu-id="ed127-198">deviceLifecycleNotification</span></span> |

<span data-ttu-id="ed127-199">Body: Det här avsnittet är i JSON-format och representerar hello dubbla av hello skapade enhetens identitet.</span><span class="sxs-lookup"><span data-stu-id="ed127-199">Body: This section is in JSON format and represents hello twin of hello created device identity.</span></span> <span data-ttu-id="ed127-200">Exempel:</span><span class="sxs-lookup"><span data-stu-id="ed127-200">For example,</span></span>

```json
{
    "deviceId":"11576-ailn-test-0-67333793211",
    "etag":"AAAAAAAAAAE=",
    "properties": {
        "desired": {
            "$metadata": {
                "$lastUpdated": "2016-02-30T16:24:48.789Z"
            },
            "$version": 1
        },
        "reported": {
            "$metadata": {
                "$lastUpdated": "2016-02-30T16:24:48.789Z"
            },
            "$version": 1
        }
    }
}
```

## <a name="reference-topics"></a><span data-ttu-id="ed127-201">Referensinformation:</span><span class="sxs-lookup"><span data-stu-id="ed127-201">Reference topics:</span></span>

<span data-ttu-id="ed127-202">hello ger följande Referensinformation dig mer om hello identitetsregistret.</span><span class="sxs-lookup"><span data-stu-id="ed127-202">hello following reference topics provide you with more information about hello identity registry.</span></span>

## <a name="device-identity-properties"></a><span data-ttu-id="ed127-203">Egenskaper för enhet identitet</span><span class="sxs-lookup"><span data-stu-id="ed127-203">Device identity properties</span></span>

<span data-ttu-id="ed127-204">Enheten identiteter representeras som JSON-dokument med hello följande egenskaper:</span><span class="sxs-lookup"><span data-stu-id="ed127-204">Device identities are represented as JSON documents with hello following properties:</span></span>

| <span data-ttu-id="ed127-205">Egenskap</span><span class="sxs-lookup"><span data-stu-id="ed127-205">Property</span></span> | <span data-ttu-id="ed127-206">Alternativ</span><span class="sxs-lookup"><span data-stu-id="ed127-206">Options</span></span> | <span data-ttu-id="ed127-207">Beskrivning</span><span class="sxs-lookup"><span data-stu-id="ed127-207">Description</span></span> |
| --- | --- | --- |
| <span data-ttu-id="ed127-208">deviceId</span><span class="sxs-lookup"><span data-stu-id="ed127-208">deviceId</span></span> |<span data-ttu-id="ed127-209">krävs, skrivskyddad på uppdateringar</span><span class="sxs-lookup"><span data-stu-id="ed127-209">required, read-only on updates</span></span> |<span data-ttu-id="ed127-210">En skiftlägeskänslig sträng (upp too128 tecken) av alfanumeriska tecken, ASCII-7-bitars + `{'-', ':', '.', '+', '%', '_', '#', '*', '?', '!', '(', ')', ',', '=', '@', ';', '$', '''}`.</span><span class="sxs-lookup"><span data-stu-id="ed127-210">A case-sensitive string (up too128 characters long) of ASCII 7-bit alphanumeric characters + `{'-', ':', '.', '+', '%', '_', '#', '*', '?', '!', '(', ')', ',', '=', '@', ';', '$', '''}`.</span></span> |
| <span data-ttu-id="ed127-211">ID för virtuella datorer</span><span class="sxs-lookup"><span data-stu-id="ed127-211">generationId</span></span> |<span data-ttu-id="ed127-212">krävs, skrivskyddad</span><span class="sxs-lookup"><span data-stu-id="ed127-212">required, read-only</span></span> |<span data-ttu-id="ed127-213">En IoT hub-genererade, skiftlägeskänsliga sträng in too128 tecken.</span><span class="sxs-lookup"><span data-stu-id="ed127-213">An IoT hub-generated, case-sensitive string up too128 characters long.</span></span> <span data-ttu-id="ed127-214">Det här värdet är används toodistinguish enheter med hello samma **deviceId**, när de har tagits bort och återskapas.</span><span class="sxs-lookup"><span data-stu-id="ed127-214">This value is used toodistinguish devices with hello same **deviceId**, when they have been deleted and re-created.</span></span> |
| <span data-ttu-id="ed127-215">ETag</span><span class="sxs-lookup"><span data-stu-id="ed127-215">etag</span></span> |<span data-ttu-id="ed127-216">krävs, skrivskyddad</span><span class="sxs-lookup"><span data-stu-id="ed127-216">required, read-only</span></span> |<span data-ttu-id="ed127-217">En sträng som representerar en svag ETag för hello enhetsidentitet enligt [RFC7232][lnk-rfc7232].</span><span class="sxs-lookup"><span data-stu-id="ed127-217">A string representing a weak ETag for hello device identity, as per [RFC7232][lnk-rfc7232].</span></span> |
| <span data-ttu-id="ed127-218">auth</span><span class="sxs-lookup"><span data-stu-id="ed127-218">auth</span></span> |<span data-ttu-id="ed127-219">Valfria</span><span class="sxs-lookup"><span data-stu-id="ed127-219">optional</span></span> |<span data-ttu-id="ed127-220">En sammansatt objekt som innehåller information och säkerhet material för autentisering.</span><span class="sxs-lookup"><span data-stu-id="ed127-220">A composite object containing authentication information and security materials.</span></span> |
| <span data-ttu-id="ed127-221">auth.symkey</span><span class="sxs-lookup"><span data-stu-id="ed127-221">auth.symkey</span></span> |<span data-ttu-id="ed127-222">Valfria</span><span class="sxs-lookup"><span data-stu-id="ed127-222">optional</span></span> |<span data-ttu-id="ed127-223">En sammansatt objekt som innehåller en primär och en sekundär nyckel lagrad i base64-format.</span><span class="sxs-lookup"><span data-stu-id="ed127-223">A composite object containing a primary and a secondary key, stored in base64 format.</span></span> |
| <span data-ttu-id="ed127-224">status</span><span class="sxs-lookup"><span data-stu-id="ed127-224">status</span></span> |<span data-ttu-id="ed127-225">Krävs</span><span class="sxs-lookup"><span data-stu-id="ed127-225">required</span></span> |<span data-ttu-id="ed127-226">En åtkomst-indikator.</span><span class="sxs-lookup"><span data-stu-id="ed127-226">An access indicator.</span></span> <span data-ttu-id="ed127-227">Kan vara **aktiverad** eller **inaktiverade**.</span><span class="sxs-lookup"><span data-stu-id="ed127-227">Can be **Enabled** or **Disabled**.</span></span> <span data-ttu-id="ed127-228">Om **aktiverad**, hello enhet får tooconnect.</span><span class="sxs-lookup"><span data-stu-id="ed127-228">If **Enabled**, hello device is allowed tooconnect.</span></span> <span data-ttu-id="ed127-229">Om **inaktiverad**, den här enheten har inte åtkomst till valfri enhet riktade slutpunkt.</span><span class="sxs-lookup"><span data-stu-id="ed127-229">If **Disabled**, this device cannot access any device-facing endpoint.</span></span> |
| <span data-ttu-id="ed127-230">statusReason</span><span class="sxs-lookup"><span data-stu-id="ed127-230">statusReason</span></span> |<span data-ttu-id="ed127-231">Valfria</span><span class="sxs-lookup"><span data-stu-id="ed127-231">optional</span></span> |<span data-ttu-id="ed127-232">128 tecken lång sträng lagrar hello därför för hello Enhetsstatus identitet.</span><span class="sxs-lookup"><span data-stu-id="ed127-232">A 128 character-long string that stores hello reason for hello device identity status.</span></span> <span data-ttu-id="ed127-233">Alla UTF-8-tecken tillåts.</span><span class="sxs-lookup"><span data-stu-id="ed127-233">All UTF-8 characters are allowed.</span></span> |
| <span data-ttu-id="ed127-234">statusUpdateTime</span><span class="sxs-lookup"><span data-stu-id="ed127-234">statusUpdateTime</span></span> |<span data-ttu-id="ed127-235">Skrivskyddad</span><span class="sxs-lookup"><span data-stu-id="ed127-235">read-only</span></span> |<span data-ttu-id="ed127-236">En temporal indikator som visar hello datum och tid för senaste statusuppdatering-hello.</span><span class="sxs-lookup"><span data-stu-id="ed127-236">A temporal indicator, showing hello date and time of hello last status update.</span></span> |
| <span data-ttu-id="ed127-237">connectionState</span><span class="sxs-lookup"><span data-stu-id="ed127-237">connectionState</span></span> |<span data-ttu-id="ed127-238">Skrivskyddad</span><span class="sxs-lookup"><span data-stu-id="ed127-238">read-only</span></span> |<span data-ttu-id="ed127-239">Ett fält som anger status för användaranslutning: antingen **ansluten** eller **frånkopplad**.</span><span class="sxs-lookup"><span data-stu-id="ed127-239">A field indicating connection status: either **Connected** or **Disconnected**.</span></span> <span data-ttu-id="ed127-240">Det här fältet motsvarar hello IoT-hubb vy över hello enhetens anslutningsstatus.</span><span class="sxs-lookup"><span data-stu-id="ed127-240">This field represents hello IoT Hub view of hello device connection status.</span></span> <span data-ttu-id="ed127-241">**Viktiga**: det här fältet bör användas endast för utveckling/felsökning.</span><span class="sxs-lookup"><span data-stu-id="ed127-241">**Important**: This field should be used only for development/debugging purposes.</span></span> <span data-ttu-id="ed127-242">hello anslutningens status uppdateras bara för enheter med hjälp av MQTT eller AMQP.</span><span class="sxs-lookup"><span data-stu-id="ed127-242">hello connection state is updated only for devices using MQTT or AMQP.</span></span> <span data-ttu-id="ed127-243">Dessutom baseras på protokollnivå pingar (MQTT pingar eller AMQP ping) och den kan ha en maximal fördröjning på endast 5 minuter.</span><span class="sxs-lookup"><span data-stu-id="ed127-243">Also, it is based on protocol-level pings (MQTT pings, or AMQP pings), and it can have a maximum delay of only 5 minutes.</span></span> <span data-ttu-id="ed127-244">Därmed behöver kan det finnas falska positiva identifieringar, t.ex enheter rapporteras som är ansluten men som inte är ansluten.</span><span class="sxs-lookup"><span data-stu-id="ed127-244">For these reasons, there can be false positives, such as devices reported as connected but that are disconnected.</span></span> |
| <span data-ttu-id="ed127-245">connectionStateUpdatedTime</span><span class="sxs-lookup"><span data-stu-id="ed127-245">connectionStateUpdatedTime</span></span> |<span data-ttu-id="ed127-246">Skrivskyddad</span><span class="sxs-lookup"><span data-stu-id="ed127-246">read-only</span></span> |<span data-ttu-id="ed127-247">En temporal indikator som visar hello datum och senaste gången hello anslutningens status uppdaterades.</span><span class="sxs-lookup"><span data-stu-id="ed127-247">A temporal indicator, showing hello date and last time hello connection state was updated.</span></span> |
| <span data-ttu-id="ed127-248">lastActivityTime</span><span class="sxs-lookup"><span data-stu-id="ed127-248">lastActivityTime</span></span> |<span data-ttu-id="ed127-249">Skrivskyddad</span><span class="sxs-lookup"><span data-stu-id="ed127-249">read-only</span></span> |<span data-ttu-id="ed127-250">En temporal indikator som visar hello datum och senaste gången hello enhet ansluten, tas emot eller skickade ett meddelande.</span><span class="sxs-lookup"><span data-stu-id="ed127-250">A temporal indicator, showing hello date and last time hello device connected, received, or sent a message.</span></span> |

> [!NOTE]
> <span data-ttu-id="ed127-251">Status för anslutningen kan endast representera hello IoT-hubb vy över hello hello anslutningens status.</span><span class="sxs-lookup"><span data-stu-id="ed127-251">Connection state can only represent hello IoT Hub view of hello status of hello connection.</span></span> <span data-ttu-id="ed127-252">Vara kan fördröjd uppdateringar toothis tillstånd beroende på nätverkets tillstånd och konfigurationer.</span><span class="sxs-lookup"><span data-stu-id="ed127-252">Updates toothis state may be delayed, depending on network conditions and configurations.</span></span>

## <a name="additional-reference-material"></a><span data-ttu-id="ed127-253">Ytterligare referensmaterialet</span><span class="sxs-lookup"><span data-stu-id="ed127-253">Additional reference material</span></span>

<span data-ttu-id="ed127-254">Andra referensavsnitten i hello IoT-hubb Utvecklarhandbok inkluderar:</span><span class="sxs-lookup"><span data-stu-id="ed127-254">Other reference topics in hello IoT Hub developer guide include:</span></span>

* <span data-ttu-id="ed127-255">[IoT-hubbslutpunkter] [ lnk-endpoints] beskriver hello olika slutpunkter som varje IoT-hubb visar för körning och hanteringsåtgärder.</span><span class="sxs-lookup"><span data-stu-id="ed127-255">[IoT Hub endpoints][lnk-endpoints] describes hello various endpoints that each IoT hub exposes for run-time and management operations.</span></span>
* <span data-ttu-id="ed127-256">[Begränsning och kvoter] [ lnk-quotas] beskriver hello kvoter och begränsning beteenden som tillämpas toohello IoT-hubb-tjänsten.</span><span class="sxs-lookup"><span data-stu-id="ed127-256">[Throttling and quotas][lnk-quotas] describes hello quotas and throttling behaviors that apply toohello IoT Hub service.</span></span>
* <span data-ttu-id="ed127-257">[Azure IoT-enheten och tjänsten SDK] [ lnk-sdks] visar hello olika språk SDK: er som du kan använda när du utvecklar appar för både enheten och tjänsten som interagerar med IoT-hubben.</span><span class="sxs-lookup"><span data-stu-id="ed127-257">[Azure IoT device and service SDKs][lnk-sdks] lists hello various language SDKs you can use when you develop both device and service apps that interact with IoT Hub.</span></span>
* <span data-ttu-id="ed127-258">[IoT-hubb frågespråket] [ lnk-query] beskriver hello frågespråk som du kan använda tooretrieve information från IoT-hubb om enheten twins och jobb.</span><span class="sxs-lookup"><span data-stu-id="ed127-258">[IoT Hub query language][lnk-query] describes hello query language you can use tooretrieve information from IoT Hub about your device twins and jobs.</span></span>
* <span data-ttu-id="ed127-259">[Stöd för IoT-hubb MQTT] [ lnk-devguide-mqtt] ger mer information om stöd för IoT-hubb för hello MQTT protokollet.</span><span class="sxs-lookup"><span data-stu-id="ed127-259">[IoT Hub MQTT support][lnk-devguide-mqtt] provides more information about IoT Hub support for hello MQTT protocol.</span></span>

## <a name="next-steps"></a><span data-ttu-id="ed127-260">Nästa steg</span><span class="sxs-lookup"><span data-stu-id="ed127-260">Next steps</span></span>

<span data-ttu-id="ed127-261">Nu har du lärt dig hur toouse hello IoT-hubb identitetsregistret du vill ha i följande avsnitt i IoT-hubb developer hello:</span><span class="sxs-lookup"><span data-stu-id="ed127-261">Now you have learned how toouse hello IoT Hub identity registry, you may be interested in hello following IoT Hub developer guide topics:</span></span>

* <span data-ttu-id="ed127-262">[Kontrollera åtkomst tooIoT Hub][lnk-devguide-security]</span><span class="sxs-lookup"><span data-stu-id="ed127-262">[Control access tooIoT Hub][lnk-devguide-security]</span></span>
* <span data-ttu-id="ed127-263">[Använda enhetstillstånd twins toosynchronize och konfigurationer][lnk-devguide-device-twins]</span><span class="sxs-lookup"><span data-stu-id="ed127-263">[Use device twins toosynchronize state and configurations][lnk-devguide-device-twins]</span></span>
* <span data-ttu-id="ed127-264">[Anropa en metod som är direkt på en enhet][lnk-devguide-directmethods]</span><span class="sxs-lookup"><span data-stu-id="ed127-264">[Invoke a direct method on a device][lnk-devguide-directmethods]</span></span>
* <span data-ttu-id="ed127-265">[Schema-jobb på flera enheter][lnk-devguide-jobs]</span><span class="sxs-lookup"><span data-stu-id="ed127-265">[Schedule jobs on multiple devices][lnk-devguide-jobs]</span></span>

<span data-ttu-id="ed127-266">Om du vill tootry titt på hello begrepp som beskrivs i den här artikeln får du är intresserad av hello följande IoT-hubb kursen:</span><span class="sxs-lookup"><span data-stu-id="ed127-266">If you would like tootry out some of hello concepts described in this article, you may be interested in hello following IoT Hub tutorial:</span></span>

* <span data-ttu-id="ed127-267">[Kom igång med Azure IoT-hubb][lnk-getstarted-tutorial]</span><span class="sxs-lookup"><span data-stu-id="ed127-267">[Get started with Azure IoT Hub][lnk-getstarted-tutorial]</span></span>

<!-- Links and images -->

[lnk-endpoints]: iot-hub-devguide-endpoints.md
[lnk-quotas]: iot-hub-devguide-quotas-throttling.md
[lnk-sdks]: iot-hub-devguide-sdks.md
[lnk-query]: iot-hub-devguide-query-language.md
[lnk-devguide-mqtt]: iot-hub-mqtt-support.md
[lnk-resource-provider-apis]: https://docs.microsoft.com/rest/api/iothub/iothubresource
[lnk-guidance-provisioning]: iot-hub-devguide-identity-registry.md#device-provisioning
[lnk-guidance-heartbeat]: iot-hub-devguide-identity-registry.md#device-heartbeat
[lnk-rfc7232]: https://tools.ietf.org/html/rfc7232
[lnk-bulk-identity]: iot-hub-bulk-identity-mgmt.md
[lnk-export]: iot-hub-devguide-identity-registry.md#import-and-export-device-identities
[lnk-devguide-opmon]: iot-hub-operations-monitoring.md

[lnk-devguide-security]: iot-hub-devguide-security.md
[lnk-devguide-device-twins]: iot-hub-devguide-device-twins.md
[lnk-devguide-directmethods]: iot-hub-devguide-direct-methods.md
[lnk-devguide-jobs]: iot-hub-devguide-jobs.md

[lnk-getstarted-tutorial]: iot-hub-csharp-csharp-getstarted.md

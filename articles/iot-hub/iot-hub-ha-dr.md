---
title: "Azure IoT-hubb hög tillgänglighet och disaster recovery | Microsoft Docs"
description: "Beskriver funktionerna i Azure och IoT-hubb som hjälper dig att skapa hög tillgänglighet Azure IoT-lösningar med katastrofåterställning återställningsfunktioner."
services: iot-hub
documentationcenter: 
author: fsautomata
manager: timlt
editor: 
ms.assetid: ae320e58-aa20-45b9-abdc-fa4faae8e6dd
ms.service: iot-hub
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: na
ms.date: 11/16/2016
ms.author: elioda
ms.openlocfilehash: 76c3187549e1821908263c30e394db26ee6f75e6
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: sv-SE
ms.lasthandoff: 07/11/2017
---
# <a name="iot-hub-high-availability-and-disaster-recovery"></a><span data-ttu-id="cd834-103">IoT-hubb hög tillgänglighet och disaster recovery</span><span class="sxs-lookup"><span data-stu-id="cd834-103">IoT Hub high availability and disaster recovery</span></span>
<span data-ttu-id="cd834-104">IoT-hubb ger hög tillgänglighet (HA) med hjälp av uppsägningar på nivån Azure-region utan ytterligare krävs för lösningen som en Azure-tjänst.</span><span class="sxs-lookup"><span data-stu-id="cd834-104">As an Azure service, IoT Hub provides high availability (HA) using redundancies at the Azure region level, without any additional work required by the solution.</span></span> <span data-ttu-id="cd834-105">Microsoft Azure-plattformen innehåller också funktioner för att skapa lösningar med funktioner för katastrofåterställning (DR) eller mellan regional tillgänglighet.</span><span class="sxs-lookup"><span data-stu-id="cd834-105">The Microsoft Azure platform also includes features to help you build solutions with disaster recovery (DR) capabilities or cross-region availability.</span></span> <span data-ttu-id="cd834-106">Om du vill tillhandahålla hög tillgänglighet för global, cross-region för enheter eller användare, utforma och förbereda dina lösningar kan dra nytta av dessa Azure DR-funktioner.</span><span class="sxs-lookup"><span data-stu-id="cd834-106">If you want to provide global, cross-region high availability for devices or users, design and prepare your solutions to take advantage of these Azure DR features.</span></span> <span data-ttu-id="cd834-107">Artikeln [Azure Business Continuity teknisk vägledning](../resiliency/resiliency-technical-guidance.md) beskrivs de inbyggda funktionerna i Azure för kontinuitet för företag och Katastrofåterställning.</span><span class="sxs-lookup"><span data-stu-id="cd834-107">The article [Azure Business Continuity Technical Guidance](../resiliency/resiliency-technical-guidance.md) describes the built-in features in Azure for business continuity and DR.</span></span> <span data-ttu-id="cd834-108">Den [katastrofåterställning och hög tillgänglighet för Azure-program] [ Disaster recovery and high availability for Azure applications] dokumentet innehåller arkitekturvägledning om strategier för Azure-program att uppnå hög tillgänglighet och Katastrofåterställning.</span><span class="sxs-lookup"><span data-stu-id="cd834-108">The [Disaster recovery and high availability for Azure applications][Disaster recovery and high availability for Azure applications] paper provides architecture guidance on strategies for Azure applications to achieve HA and DR.</span></span>

## <a name="azure-iot-hub-dr"></a><span data-ttu-id="cd834-109">Azure IoT-hubb-Katastrofåterställning</span><span class="sxs-lookup"><span data-stu-id="cd834-109">Azure IoT Hub DR</span></span>
<span data-ttu-id="cd834-110">Förutom intra-region hög tillgänglighet implementerar IoT-hubb redundans mekanismer för katastrofåterställning som kräver ingen åtgärd från användaren.</span><span class="sxs-lookup"><span data-stu-id="cd834-110">In addition to intra-region HA, IoT Hub implements failover mechanisms for disaster recovery that require no intervention from the user.</span></span> <span data-ttu-id="cd834-111">IoT Hub DR själva initieras och har en återställning tid mål för Återställningstid 2-26 timmar och följande återställningspunktmål (återställningspunkter).</span><span class="sxs-lookup"><span data-stu-id="cd834-111">IoT Hub DR is self-initiated and has a recovery time objective (RTO) of 2-26 hours, and the following recovery point objectives (RPOs).</span></span>

| <span data-ttu-id="cd834-112">Funktioner</span><span class="sxs-lookup"><span data-stu-id="cd834-112">Functionality</span></span> | <span data-ttu-id="cd834-113">ÅTERSTÄLLNINGSPUNKTMÅL</span><span class="sxs-lookup"><span data-stu-id="cd834-113">RPO</span></span> |
| --- | --- |
| <span data-ttu-id="cd834-114">Tjänsttillgänglighet för registret och kommunikation</span><span class="sxs-lookup"><span data-stu-id="cd834-114">Service availability for registry and communication operations</span></span> |<span data-ttu-id="cd834-115">Förlust av CName</span><span class="sxs-lookup"><span data-stu-id="cd834-115">Possible CName loss</span></span> |
| <span data-ttu-id="cd834-116">Identitetsuppgifter i identitetsregistret</span><span class="sxs-lookup"><span data-stu-id="cd834-116">Identity data in identity registry</span></span> |<span data-ttu-id="cd834-117">0-5 minuter dataförlust</span><span class="sxs-lookup"><span data-stu-id="cd834-117">0-5 mins data loss</span></span> |
| <span data-ttu-id="cd834-118">Meddelanden från enheten till molnet</span><span class="sxs-lookup"><span data-stu-id="cd834-118">Device-to-cloud messages</span></span> |<span data-ttu-id="cd834-119">Alla oläst meddelanden försvinner</span><span class="sxs-lookup"><span data-stu-id="cd834-119">All unread messages are lost</span></span> |
| <span data-ttu-id="cd834-120">Åtgärder som övervakning av meddelanden</span><span class="sxs-lookup"><span data-stu-id="cd834-120">Operations monitoring messages</span></span> |<span data-ttu-id="cd834-121">Alla oläst meddelanden försvinner</span><span class="sxs-lookup"><span data-stu-id="cd834-121">All unread messages are lost</span></span> |
| <span data-ttu-id="cd834-122">Meddelanden moln till enhet</span><span class="sxs-lookup"><span data-stu-id="cd834-122">Cloud-to-device messages</span></span> |<span data-ttu-id="cd834-123">0-5 minuter dataförlust</span><span class="sxs-lookup"><span data-stu-id="cd834-123">0-5 mins data loss</span></span> |
| <span data-ttu-id="cd834-124">Feedbackkö moln till enhet</span><span class="sxs-lookup"><span data-stu-id="cd834-124">Cloud-to-device feedback queue</span></span> |<span data-ttu-id="cd834-125">Alla oläst meddelanden försvinner</span><span class="sxs-lookup"><span data-stu-id="cd834-125">All unread messages are lost</span></span> |

## <a name="regional-failover-with-iot-hub"></a><span data-ttu-id="cd834-126">Regional växling vid fel med IoT-hubb</span><span class="sxs-lookup"><span data-stu-id="cd834-126">Regional failover with IoT Hub</span></span>
<span data-ttu-id="cd834-127">En fullständig behandling av distributionstopologier i IoT-lösningar som ligger utanför omfånget för den här artikeln.</span><span class="sxs-lookup"><span data-stu-id="cd834-127">A complete treatment of deployment topologies in IoT solutions is outside the scope of this article.</span></span> <span data-ttu-id="cd834-128">Här beskrivs de *regional växling vid fel* distributionsmodell för hög tillgänglighet och katastrofåterställning återställning.</span><span class="sxs-lookup"><span data-stu-id="cd834-128">The article discusses the *regional failover* deployment model for the purpose of high availability and disaster recovery.</span></span>

<span data-ttu-id="cd834-129">I en modell för regional växling vid fel distribueras lösning tillbaka slutet körs främst i en datacenter-plats och en sekundär IoT-hubb och tillbaka slutet på en annan plats för datacenter.</span><span class="sxs-lookup"><span data-stu-id="cd834-129">In a regional failover model, the solution back end runs primarily in one datacenter location, and a secondary IoT hub and back end are deployed in another datacenter location.</span></span> <span data-ttu-id="cd834-130">Om IoT-hubb i det primära datacentret drabbas av ett avbrott eller nätverksanslutningen från enheten till det primära datacentret avbryts.</span><span class="sxs-lookup"><span data-stu-id="cd834-130">If the IoT hub in the primary datacenter suffers an outage or the network connectivity from the device to the primary datacenter is interrupted.</span></span> <span data-ttu-id="cd834-131">Enheterna använder en sekundär tjänstslutpunkt när den primära gatewayen inte kan nås.</span><span class="sxs-lookup"><span data-stu-id="cd834-131">Devices use a secondary service endpoint whenever the primary gateway cannot be reached.</span></span> <span data-ttu-id="cd834-132">Med en mellan region redundanskapacitet kan lösning tillgängligheten förbättras utöver den höga tillgängligheten för en enskild region.</span><span class="sxs-lookup"><span data-stu-id="cd834-132">With a cross-region failover capability, the solution availability can be improved beyond the high availability of a single region.</span></span>

<span data-ttu-id="cd834-133">På en hög nivå om du vill implementera en modell för regional växling vid fel med IoT-hubben, behöver du följande:</span><span class="sxs-lookup"><span data-stu-id="cd834-133">At a high level, to implement a regional failover model with IoT Hub, you need the following:</span></span>

* <span data-ttu-id="cd834-134">**En sekundär IoT-hubb och enheten routning logik**: vid ett avbrott i tjänsten i din primära region måste enheter måste börja ansluter till din sekundära regionen.</span><span class="sxs-lookup"><span data-stu-id="cd834-134">**A secondary IoT hub and device routing logic**: In the case of a service disruption in your primary region, devices must start connecting to your secondary region.</span></span> <span data-ttu-id="cd834-135">Eftersom tillståndsmedveten de flesta tjänster ingår, är det vanligt att lösningen administratörer som kan utlösa mellan region failover-processen.</span><span class="sxs-lookup"><span data-stu-id="cd834-135">Given the state-aware nature of most services involved, it is common for solution administrators to trigger the inter-region failover process.</span></span> <span data-ttu-id="cd834-136">Det bästa sättet att kommunicera ny slutpunkt till enheter, samtidigt som kontrollen över processen är att be dem regelbundet kontrollera en *concierge* tjänsten för den aktuella aktiva slutpunkten.</span><span class="sxs-lookup"><span data-stu-id="cd834-136">The best way to communicate the new endpoint to devices, while maintaining control of the process, is to have them regularly check a *concierge* service for the current active endpoint.</span></span> <span data-ttu-id="cd834-137">Tjänsten concierge kan vara ett webbprogram som ska replikeras och sparas kan nås med hjälp av DNS-omdirigering tekniker (till exempel med hjälp av [Azure Traffic Manager][Azure Traffic Manager]).</span><span class="sxs-lookup"><span data-stu-id="cd834-137">The concierge service can be a web application that is replicated and kept reachable using DNS-redirection techniques (for example, using [Azure Traffic Manager][Azure Traffic Manager]).</span></span>
* <span data-ttu-id="cd834-138">**Identitet Registerreplikering** – du kan användas, sekundära IoT-hubben måste innehålla alla enheten identiteter som kan ansluta till lösningen.</span><span class="sxs-lookup"><span data-stu-id="cd834-138">**Identity registry replication** - To be usable, the secondary IoT hub must contain all device identities that can connect to the solution.</span></span> <span data-ttu-id="cd834-139">Lösningen ska hålla georeplikerad säkerhetskopior av enheten identiteter och överför dem till sekundära IoT-hubben innan du byter aktiv slutpunkt för enheter.</span><span class="sxs-lookup"><span data-stu-id="cd834-139">The solution should keep geo-replicated backups of device identities, and upload them to the secondary IoT hub before switching the active endpoint for the devices.</span></span> <span data-ttu-id="cd834-140">Exportfunktionen enheten identitet för IoT-hubben är användbart i detta sammanhang.</span><span class="sxs-lookup"><span data-stu-id="cd834-140">The device identity export functionality of IoT Hub is useful in this context.</span></span> <span data-ttu-id="cd834-141">Mer information finns i [IoT-hubb Utvecklarhandbok - identitetsregistret][IoT Hub developer guide - identity registry].</span><span class="sxs-lookup"><span data-stu-id="cd834-141">For more information, see [IoT Hub developer guide - identity registry][IoT Hub developer guide - identity registry].</span></span>
* <span data-ttu-id="cd834-142">**Sammanslagning av logik** – när den primära regionen blir tillgänglig igen alla tillstånd och data som har skapats på den sekundära platsen måste flyttas tillbaka till den primära regionen.</span><span class="sxs-lookup"><span data-stu-id="cd834-142">**Merging logic** - When the primary region becomes available again, all the state and data that have been created in the secondary site must be migrated back to the primary region.</span></span> <span data-ttu-id="cd834-143">Detta tillstånd och data avser främst enheten identiteter och programmetadata måste slås samman med den primära IoT-hubben och andra programspecifika data lagras i den primära regionen.</span><span class="sxs-lookup"><span data-stu-id="cd834-143">This state and data mostly relates to device identities and application metadata, which must be merged with the primary IoT hub and any other application-specific stores in the primary region.</span></span> <span data-ttu-id="cd834-144">Du bör använda idempotent åtgärder för att förenkla det här steget.</span><span class="sxs-lookup"><span data-stu-id="cd834-144">To simplify this step, you should use idempotent operations.</span></span> <span data-ttu-id="cd834-145">Idempotent operations minimera sidoeffekter eventuell konsekvent distribution av händelser och från dubbletter eller out-ordning leverans av händelser.</span><span class="sxs-lookup"><span data-stu-id="cd834-145">Idempotent operations minimize the side-effects from the eventual consistent distribution of events, and from duplicates or out-of-order delivery of events.</span></span> <span data-ttu-id="cd834-146">Dessutom designas programlogiken klarar potentiella inkonsekvenser eller ”något” utanför datum-tillstånd.</span><span class="sxs-lookup"><span data-stu-id="cd834-146">In addition, the application logic should be designed to tolerate potential inconsistencies or "slightly" out of date-state.</span></span> <span data-ttu-id="cd834-147">Den här situationen kan inträffa på grund av den extra tid det tar för systemet kan ”reparera” baserat på återställningspunktmål (RPO).</span><span class="sxs-lookup"><span data-stu-id="cd834-147">This situation can occur due to the additional time it takes for the system to "heal" based on recovery point objectives (RPO).</span></span>

## <a name="next-steps"></a><span data-ttu-id="cd834-148">Nästa steg</span><span class="sxs-lookup"><span data-stu-id="cd834-148">Next steps</span></span>
<span data-ttu-id="cd834-149">Du kan följa dessa länkar om du vill veta mer om Azure IoT-hubb:</span><span class="sxs-lookup"><span data-stu-id="cd834-149">Follow these links to learn more about Azure IoT Hub:</span></span>

* <span data-ttu-id="cd834-150">[Kom igång med IoT-hubbar (självstudier)][lnk-get-started]</span><span class="sxs-lookup"><span data-stu-id="cd834-150">[Get started with IoT Hubs (Tutorial)][lnk-get-started]</span></span>
* <span data-ttu-id="cd834-151">[Vad är Azure IoT Hub?][What is Azure IoT Hub?]</span><span class="sxs-lookup"><span data-stu-id="cd834-151">[What is Azure IoT Hub?][What is Azure IoT Hub?]</span></span>

[Disaster recovery and high availability for Azure applications]: ../resiliency/resiliency-disaster-recovery-high-availability-azure-applications.md
[Azure Business Continuity Technical Guidance]: https://azure.microsoft.com/documentation/articles/resiliency-technical-guidance/
[Azure Traffic Manager]: https://azure.microsoft.com/documentation/services/traffic-manager/
[IoT Hub developer guide - identity registry]: iot-hub-devguide-identity-registry.md

[lnk-get-started]: iot-hub-csharp-csharp-getstarted.md
[What is Azure IoT Hub?]: iot-hub-what-is-iot-hub.md

---
title: "aaaAzure IoT-hubb hög tillgänglighet och disaster recovery | Microsoft Docs"
description: "Beskriver hello Azure- och IoT-hubb funktioner som hjälper dig toobuild högtillgänglig Azure IoT-lösningar med funktioner för katastrofåterställning."
services: iot-hub
documentationcenter: 
author: fsautomata
manager: timlt
editor: 
ms.assetid: ae320e58-aa20-45b9-abdc-fa4faae8e6dd
ms.service: iot-hub
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: na
ms.date: 11/16/2016
ms.author: elioda
ms.openlocfilehash: 74e1fa1682258819ffb3fd84eb79e42fc6e4120f
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: sv-SE
ms.lasthandoff: 10/06/2017
---
# <a name="iot-hub-high-availability-and-disaster-recovery"></a><span data-ttu-id="daeda-103">IoT-hubb hög tillgänglighet och disaster recovery</span><span class="sxs-lookup"><span data-stu-id="daeda-103">IoT Hub high availability and disaster recovery</span></span>
<span data-ttu-id="daeda-104">IoT-hubb ger hög tillgänglighet (HA) med hjälp av uppsägningar nivån hello Azure-region, utan ytterligare krävs av hello-lösning som en Azure-tjänst.</span><span class="sxs-lookup"><span data-stu-id="daeda-104">As an Azure service, IoT Hub provides high availability (HA) using redundancies at hello Azure region level, without any additional work required by hello solution.</span></span> <span data-ttu-id="daeda-105">hello Microsoft Azure-plattformen innehåller också funktioner toohelp du skapa lösningar med funktioner för katastrofåterställning (DR) eller mellan regional tillgänglighet.</span><span class="sxs-lookup"><span data-stu-id="daeda-105">hello Microsoft Azure platform also includes features toohelp you build solutions with disaster recovery (DR) capabilities or cross-region availability.</span></span> <span data-ttu-id="daeda-106">Om du vill tooprovide globala mellan region hög tillgänglighet för enheter eller användare, utforma och förbereda dina lösningar tootake använda dessa Azure DR-funktioner.</span><span class="sxs-lookup"><span data-stu-id="daeda-106">If you want tooprovide global, cross-region high availability for devices or users, design and prepare your solutions tootake advantage of these Azure DR features.</span></span> <span data-ttu-id="daeda-107">hello artikel [Azure Business Continuity teknisk vägledning](../resiliency/resiliency-technical-guidance.md) beskriver hello inbyggda funktioner i Azure för kontinuitet för företag och Katastrofåterställning.</span><span class="sxs-lookup"><span data-stu-id="daeda-107">hello article [Azure Business Continuity Technical Guidance](../resiliency/resiliency-technical-guidance.md) describes hello built-in features in Azure for business continuity and DR.</span></span> <span data-ttu-id="daeda-108">Hej [katastrofåterställning och hög tillgänglighet för Azure-program] [ Disaster recovery and high availability for Azure applications] rapporten innehåller arkitekturvägledning på strategier för Azure-program tooachieve hög tillgänglighet och Katastrofåterställning.</span><span class="sxs-lookup"><span data-stu-id="daeda-108">hello [Disaster recovery and high availability for Azure applications][Disaster recovery and high availability for Azure applications] paper provides architecture guidance on strategies for Azure applications tooachieve HA and DR.</span></span>

## <a name="azure-iot-hub-dr"></a><span data-ttu-id="daeda-109">Azure IoT-hubb-Katastrofåterställning</span><span class="sxs-lookup"><span data-stu-id="daeda-109">Azure IoT Hub DR</span></span>
<span data-ttu-id="daeda-110">Dessutom toointra region HA IoT-hubb implementerar redundans mekanismer för katastrofåterställning som kräver ingen åtgärd från användaren hello.</span><span class="sxs-lookup"><span data-stu-id="daeda-110">In addition toointra-region HA, IoT Hub implements failover mechanisms for disaster recovery that require no intervention from hello user.</span></span> <span data-ttu-id="daeda-111">IoT Hub DR själva initieras och har en återställning tid mål för Återställningstid 2-26 timmar och hello efter återställningspunktmål (återställningspunkter).</span><span class="sxs-lookup"><span data-stu-id="daeda-111">IoT Hub DR is self-initiated and has a recovery time objective (RTO) of 2-26 hours, and hello following recovery point objectives (RPOs).</span></span>

| <span data-ttu-id="daeda-112">Funktioner</span><span class="sxs-lookup"><span data-stu-id="daeda-112">Functionality</span></span> | <span data-ttu-id="daeda-113">ÅTERSTÄLLNINGSPUNKTMÅL</span><span class="sxs-lookup"><span data-stu-id="daeda-113">RPO</span></span> |
| --- | --- |
| <span data-ttu-id="daeda-114">Tjänsttillgänglighet för registret och kommunikation</span><span class="sxs-lookup"><span data-stu-id="daeda-114">Service availability for registry and communication operations</span></span> |<span data-ttu-id="daeda-115">Förlust av CName</span><span class="sxs-lookup"><span data-stu-id="daeda-115">Possible CName loss</span></span> |
| <span data-ttu-id="daeda-116">Identitetsuppgifter i identitetsregistret</span><span class="sxs-lookup"><span data-stu-id="daeda-116">Identity data in identity registry</span></span> |<span data-ttu-id="daeda-117">0-5 minuter dataförlust</span><span class="sxs-lookup"><span data-stu-id="daeda-117">0-5 mins data loss</span></span> |
| <span data-ttu-id="daeda-118">Meddelanden från enheten till molnet</span><span class="sxs-lookup"><span data-stu-id="daeda-118">Device-to-cloud messages</span></span> |<span data-ttu-id="daeda-119">Alla oläst meddelanden försvinner</span><span class="sxs-lookup"><span data-stu-id="daeda-119">All unread messages are lost</span></span> |
| <span data-ttu-id="daeda-120">Åtgärder som övervakning av meddelanden</span><span class="sxs-lookup"><span data-stu-id="daeda-120">Operations monitoring messages</span></span> |<span data-ttu-id="daeda-121">Alla oläst meddelanden försvinner</span><span class="sxs-lookup"><span data-stu-id="daeda-121">All unread messages are lost</span></span> |
| <span data-ttu-id="daeda-122">Meddelanden moln till enhet</span><span class="sxs-lookup"><span data-stu-id="daeda-122">Cloud-to-device messages</span></span> |<span data-ttu-id="daeda-123">0-5 minuter dataförlust</span><span class="sxs-lookup"><span data-stu-id="daeda-123">0-5 mins data loss</span></span> |
| <span data-ttu-id="daeda-124">Feedbackkö moln till enhet</span><span class="sxs-lookup"><span data-stu-id="daeda-124">Cloud-to-device feedback queue</span></span> |<span data-ttu-id="daeda-125">Alla oläst meddelanden försvinner</span><span class="sxs-lookup"><span data-stu-id="daeda-125">All unread messages are lost</span></span> |

## <a name="regional-failover-with-iot-hub"></a><span data-ttu-id="daeda-126">Regional växling vid fel med IoT-hubb</span><span class="sxs-lookup"><span data-stu-id="daeda-126">Regional failover with IoT Hub</span></span>
<span data-ttu-id="daeda-127">En fullständig behandling av distributionstopologier i IoT-lösningar är utanför hello omfånget för den här artikeln.</span><span class="sxs-lookup"><span data-stu-id="daeda-127">A complete treatment of deployment topologies in IoT solutions is outside hello scope of this article.</span></span> <span data-ttu-id="daeda-128">hello artikeln hello *regional växling vid fel* distributionsmodell för hello syftet med hög tillgänglighet och katastrofåterställning återställning.</span><span class="sxs-lookup"><span data-stu-id="daeda-128">hello article discusses hello *regional failover* deployment model for hello purpose of high availability and disaster recovery.</span></span>

<span data-ttu-id="daeda-129">Hello lösning tillbaka slutet körs i första hand i en datacenter-plats i en modell för regional växling vid fel, och en sekundär IoT-hubb och serverdel distribueras på en annan plats för datacenter.</span><span class="sxs-lookup"><span data-stu-id="daeda-129">In a regional failover model, hello solution back end runs primarily in one datacenter location, and a secondary IoT hub and back end are deployed in another datacenter location.</span></span> <span data-ttu-id="daeda-130">Om hello IoT-hubb i hello primära datacenter drabbas av ett avbrott eller hello nätverksanslutningen från hello enheten toohello primära datacenter avbryts.</span><span class="sxs-lookup"><span data-stu-id="daeda-130">If hello IoT hub in hello primary datacenter suffers an outage or hello network connectivity from hello device toohello primary datacenter is interrupted.</span></span> <span data-ttu-id="daeda-131">Enheterna använder en sekundär tjänstslutpunkt när hello primära gateway inte kan nås.</span><span class="sxs-lookup"><span data-stu-id="daeda-131">Devices use a secondary service endpoint whenever hello primary gateway cannot be reached.</span></span> <span data-ttu-id="daeda-132">Med en mellan region redundanskapacitet kan hello lösning tillgänglighet förbättras utöver hello hög tillgänglighet för en enskild region.</span><span class="sxs-lookup"><span data-stu-id="daeda-132">With a cross-region failover capability, hello solution availability can be improved beyond hello high availability of a single region.</span></span>

<span data-ttu-id="daeda-133">På en hög nivå tooimplement en modell för regional växling vid fel med IoT-hubb måste hello följande:</span><span class="sxs-lookup"><span data-stu-id="daeda-133">At a high level, tooimplement a regional failover model with IoT Hub, you need hello following:</span></span>

* <span data-ttu-id="daeda-134">**En sekundär IoT-hubb och enheten routning logik**: hello gäller störningar i din primära region, enheter måste börja anslutande tooyour sekundär region.</span><span class="sxs-lookup"><span data-stu-id="daeda-134">**A secondary IoT hub and device routing logic**: In hello case of a service disruption in your primary region, devices must start connecting tooyour secondary region.</span></span> <span data-ttu-id="daeda-135">Eftersom hello tillståndsmedveten de flesta tjänster ingår, är det vanligt att administratörer tootrigger hello mellan region redundans lösningsprocessen.</span><span class="sxs-lookup"><span data-stu-id="daeda-135">Given hello state-aware nature of most services involved, it is common for solution administrators tootrigger hello inter-region failover process.</span></span> <span data-ttu-id="daeda-136">hello bästa sätt toocommunicate hello ny slutpunkt toodevices, men behålla kontrollen över hello processen är toohave dem regelbundet kontrollera en *concierge* tjänsten för hello aktuella aktiv slutpunkt.</span><span class="sxs-lookup"><span data-stu-id="daeda-136">hello best way toocommunicate hello new endpoint toodevices, while maintaining control of hello process, is toohave them regularly check a *concierge* service for hello current active endpoint.</span></span> <span data-ttu-id="daeda-137">hello concierge-tjänsten kan vara ett webbprogram som ska replikeras och sparas kan nås med hjälp av DNS-omdirigering tekniker (till exempel med hjälp av [Azure Traffic Manager][Azure Traffic Manager]).</span><span class="sxs-lookup"><span data-stu-id="daeda-137">hello concierge service can be a web application that is replicated and kept reachable using DNS-redirection techniques (for example, using [Azure Traffic Manager][Azure Traffic Manager]).</span></span>
* <span data-ttu-id="daeda-138">**Identitet Registerreplikering** -toobe som är användbara hello sekundära IoT-hubb måste innehålla alla enheten identiteter som kan ansluta toohello lösning.</span><span class="sxs-lookup"><span data-stu-id="daeda-138">**Identity registry replication** - toobe usable, hello secondary IoT hub must contain all device identities that can connect toohello solution.</span></span> <span data-ttu-id="daeda-139">hello lösningen behåller georeplikerad säkerhetskopior av enheten identiteter, och överföra toohello sekundära IoT-hubb innan du byter hello aktiv slutpunkt för hello-enheter.</span><span class="sxs-lookup"><span data-stu-id="daeda-139">hello solution should keep geo-replicated backups of device identities, and upload them toohello secondary IoT hub before switching hello active endpoint for hello devices.</span></span> <span data-ttu-id="daeda-140">hello enheten identitet exportfunktionen för IoT-hubben är användbart i detta sammanhang.</span><span class="sxs-lookup"><span data-stu-id="daeda-140">hello device identity export functionality of IoT Hub is useful in this context.</span></span> <span data-ttu-id="daeda-141">Mer information finns i [IoT-hubb Utvecklarhandbok - identitetsregistret][IoT Hub developer guide - identity registry].</span><span class="sxs-lookup"><span data-stu-id="daeda-141">For more information, see [IoT Hub developer guide - identity registry][IoT Hub developer guide - identity registry].</span></span>
* <span data-ttu-id="daeda-142">**Sammanslagning av logik** – när hello primär region blir tillgänglig igen, alla hello tillstånd och data som har skapats i hello sekundär plats måste vara migrerade tillbaka toohello primär region.</span><span class="sxs-lookup"><span data-stu-id="daeda-142">**Merging logic** - When hello primary region becomes available again, all hello state and data that have been created in hello secondary site must be migrated back toohello primary region.</span></span> <span data-ttu-id="daeda-143">Detta tillstånd och data handlar om främst toodevice identiteter och programmetadata måste slås samman med hello primära IoT-hubb och andra programspecifika butiker i hello primär region.</span><span class="sxs-lookup"><span data-stu-id="daeda-143">This state and data mostly relates toodevice identities and application metadata, which must be merged with hello primary IoT hub and any other application-specific stores in hello primary region.</span></span> <span data-ttu-id="daeda-144">toosimplify det här steget ska du använda idempotent åtgärder.</span><span class="sxs-lookup"><span data-stu-id="daeda-144">toosimplify this step, you should use idempotent operations.</span></span> <span data-ttu-id="daeda-145">Idempotent operations minimera hello sidoeffekter hello eventuell konsekvent distribution av händelser och från dubbletter eller out-ordning leverans av händelser.</span><span class="sxs-lookup"><span data-stu-id="daeda-145">Idempotent operations minimize hello side-effects from hello eventual consistent distribution of events, and from duplicates or out-of-order delivery of events.</span></span> <span data-ttu-id="daeda-146">Hello programlogik ska dessutom vara utformad tootolerate eventuella inkonsekvenser eller ”något” utanför datum-tillstånd.</span><span class="sxs-lookup"><span data-stu-id="daeda-146">In addition, hello application logic should be designed tootolerate potential inconsistencies or "slightly" out of date-state.</span></span> <span data-ttu-id="daeda-147">Den här situationen kan inträffa på grund av toohello extra tid det tar för hello system för ”läka” baserat på återställningspunktmål (RPO).</span><span class="sxs-lookup"><span data-stu-id="daeda-147">This situation can occur due toohello additional time it takes for hello system too"heal" based on recovery point objectives (RPO).</span></span>

## <a name="next-steps"></a><span data-ttu-id="daeda-148">Nästa steg</span><span class="sxs-lookup"><span data-stu-id="daeda-148">Next steps</span></span>
<span data-ttu-id="daeda-149">Följ dessa länkar toolearn mer om Azure IoT-hubb:</span><span class="sxs-lookup"><span data-stu-id="daeda-149">Follow these links toolearn more about Azure IoT Hub:</span></span>

* <span data-ttu-id="daeda-150">[Kom igång med IoT-hubbar (självstudier)][lnk-get-started]</span><span class="sxs-lookup"><span data-stu-id="daeda-150">[Get started with IoT Hubs (Tutorial)][lnk-get-started]</span></span>
* <span data-ttu-id="daeda-151">[Vad är Azure IoT Hub?][What is Azure IoT Hub?]</span><span class="sxs-lookup"><span data-stu-id="daeda-151">[What is Azure IoT Hub?][What is Azure IoT Hub?]</span></span>

[Disaster recovery and high availability for Azure applications]: ../resiliency/resiliency-disaster-recovery-high-availability-azure-applications.md
[Azure Business Continuity Technical Guidance]: https://azure.microsoft.com/documentation/articles/resiliency-technical-guidance/
[Azure Traffic Manager]: https://azure.microsoft.com/documentation/services/traffic-manager/
[IoT Hub developer guide - identity registry]: iot-hub-devguide-identity-registry.md

[lnk-get-started]: iot-hub-csharp-csharp-getstarted.md
[What is Azure IoT Hub?]: iot-hub-what-is-iot-hub.md

---
title: "aaaAzure Traffic Manager-slutpunktsövervakning | Microsoft Docs"
description: "Den här artikeln kan hjälpa dig att förstå hur Traffic Manager använder slutpunktsövervakning och automatisk endpoint redundans toohelp Azure kunder distribuera program med hög tillgänglighet"
services: traffic-manager
documentationcenter: 
author: kumudd
manager: timlt
editor: 
ms.assetid: fff25ac3-d13a-4af9-8916-7c72e3d64bc7
ms.service: traffic-manager
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 06/22/2017
ms.author: kumud
ms.openlocfilehash: b4862499c88bdb1951833d06199b034a07ac7576
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: sv-SE
ms.lasthandoff: 10/06/2017
---
# <a name="traffic-manager-endpoint-monitoring"></a><span data-ttu-id="9d35f-103">Slutpunktsövervakning av Traffic Manager</span><span class="sxs-lookup"><span data-stu-id="9d35f-103">Traffic Manager endpoint monitoring</span></span>

<span data-ttu-id="9d35f-104">Azure Traffic Manager innehåller inbyggda slutpunktsövervakning och automatisk endpoint redundans.</span><span class="sxs-lookup"><span data-stu-id="9d35f-104">Azure Traffic Manager includes built-in endpoint monitoring and automatic endpoint failover.</span></span> <span data-ttu-id="9d35f-105">Den här funktionen hjälper dig att leverera program med hög tillgänglighet som är flexibel tooendpoint fel, inklusive Azure-region fel.</span><span class="sxs-lookup"><span data-stu-id="9d35f-105">This feature helps you deliver high-availability applications that are resilient tooendpoint failure, including Azure region failures.</span></span>

## <a name="configure-endpoint-monitoring"></a><span data-ttu-id="9d35f-106">Konfigurera slutpunktsövervakning</span><span class="sxs-lookup"><span data-stu-id="9d35f-106">Configure endpoint monitoring</span></span>

<span data-ttu-id="9d35f-107">tooconfigure slutpunktsövervakning, måste du ange hello följande inställningar på Traffic Manager-profilen:</span><span class="sxs-lookup"><span data-stu-id="9d35f-107">tooconfigure endpoint monitoring, you must specify hello following settings on your Traffic Manager profile:</span></span>

* <span data-ttu-id="9d35f-108">**Protokollet**.</span><span class="sxs-lookup"><span data-stu-id="9d35f-108">**Protocol**.</span></span> <span data-ttu-id="9d35f-109">Välj HTTP, HTTPS eller TCP som hello protokoll med Traffic Manager när sökning endpoint-toocheck dess hälsa.</span><span class="sxs-lookup"><span data-stu-id="9d35f-109">Choose HTTP, HTTPS, or TCP as hello protocol that Traffic Manager uses when probing your endpoint toocheck its health.</span></span> <span data-ttu-id="9d35f-110">HTTPS-övervakning kontrollerar inte om SSL-certifikatet är giltigt--den kontrollerar att hello certifikat.</span><span class="sxs-lookup"><span data-stu-id="9d35f-110">HTTPS monitoring does not verify whether your SSL certificate is valid--it only checks that hello certificate is present.</span></span>
* <span data-ttu-id="9d35f-111">**Port**.</span><span class="sxs-lookup"><span data-stu-id="9d35f-111">**Port**.</span></span> <span data-ttu-id="9d35f-112">Välj hello-port som används för hello-begäran.</span><span class="sxs-lookup"><span data-stu-id="9d35f-112">Choose hello port used for hello request.</span></span>
* <span data-ttu-id="9d35f-113">**Sökvägen**.</span><span class="sxs-lookup"><span data-stu-id="9d35f-113">**Path**.</span></span> <span data-ttu-id="9d35f-114">Den här inställningen gäller bara för hello HTTP och HTTPS-protokoll, som att ange hello sökvägsinställningen är obligatorisk.</span><span class="sxs-lookup"><span data-stu-id="9d35f-114">This configuration setting is valid only for hello HTTP and HTTPS protocols, for which specifying hello path setting is required.</span></span> <span data-ttu-id="9d35f-115">Att erbjuda den här inställningen för hello TCP-protokollet övervakningsresultaten i ett fel.</span><span class="sxs-lookup"><span data-stu-id="9d35f-115">Providing this setting for hello TCP monitoring protocol results in an error.</span></span> <span data-ttu-id="9d35f-116">TCP-protokollet ge hello relativa sökvägen och hello webbsidan hello eller hello-fil som hello övervakning har åtkomst.</span><span class="sxs-lookup"><span data-stu-id="9d35f-116">For TCP protocol, give hello relative path and hello name of hello webpage or hello file that hello monitoring accesses.</span></span> <span data-ttu-id="9d35f-117">Ett snedstreck (/) är ett giltigt för hello relativ sökväg.</span><span class="sxs-lookup"><span data-stu-id="9d35f-117">A forward slash (/) is a valid entry for hello relative path.</span></span> <span data-ttu-id="9d35f-118">Det här värdet innebär att hello-filen är i hello rotkatalog (standard).</span><span class="sxs-lookup"><span data-stu-id="9d35f-118">This value implies that hello file is in hello root directory (default).</span></span>
* <span data-ttu-id="9d35f-119">**Avsökning av intervall**.</span><span class="sxs-lookup"><span data-stu-id="9d35f-119">**Probing Interval**.</span></span> <span data-ttu-id="9d35f-120">Det här värdet anger hur ofta en slutpunkt är markerat för dess hälsa från en avsöknings Traffic Manager-agent.</span><span class="sxs-lookup"><span data-stu-id="9d35f-120">This value specifies how often an endpoint is checked for its health from a Traffic Manager probing agent.</span></span> <span data-ttu-id="9d35f-121">Du kan ange två värden här: 30 sekunder (vanlig sökning) och 10 sekunder (snabb avsökning).</span><span class="sxs-lookup"><span data-stu-id="9d35f-121">You can specify two values here: 30 seconds (normal probing) and 10 seconds (fast probing).</span></span> <span data-ttu-id="9d35f-122">Om inga värden har angetts, anger hello profil tooa standardvärdet på 30 sekunder.</span><span class="sxs-lookup"><span data-stu-id="9d35f-122">If no values are provided, hello profile sets tooa default value of 30 seconds.</span></span> <span data-ttu-id="9d35f-123">Besök hello [Traffic Manager priser](https://azure.microsoft.com/pricing/details/traffic-manager) sidan toolearn mer om snabb avsöknings priser.</span><span class="sxs-lookup"><span data-stu-id="9d35f-123">Visit hello [Traffic Manager Pricing](https://azure.microsoft.com/pricing/details/traffic-manager) page toolearn more about fast probing pricing.</span></span>
* <span data-ttu-id="9d35f-124">**Antalet fel tolereras**.</span><span class="sxs-lookup"><span data-stu-id="9d35f-124">**Tolerated Number of Failures**.</span></span> <span data-ttu-id="9d35f-125">Det här värdet anger hur många fel som en avsöknings Traffic Manager-agenten kan tolerera innan du markerar den slutpunkten som ohälsosamt.</span><span class="sxs-lookup"><span data-stu-id="9d35f-125">This value specifies how many failures a Traffic Manager probing agent tolerates before marking that endpoint as unhealthy.</span></span> <span data-ttu-id="9d35f-126">Värdet kan variera mellan 0 och 9.</span><span class="sxs-lookup"><span data-stu-id="9d35f-126">Its value can range between 0 and 9.</span></span> <span data-ttu-id="9d35f-127">Värdet 0 innebär ett enstaka övervakning fel kan orsaka att slutpunkten toobe markeras som ohälsosam.</span><span class="sxs-lookup"><span data-stu-id="9d35f-127">A value of 0 means a single monitoring failure can cause that endpoint toobe marked as unhealthy.</span></span> <span data-ttu-id="9d35f-128">Om inget värde anges används hello standardvärdet 3.</span><span class="sxs-lookup"><span data-stu-id="9d35f-128">If no value is specified, it uses hello default value of 3.</span></span>
* <span data-ttu-id="9d35f-129">**Övervaka Timeout**.</span><span class="sxs-lookup"><span data-stu-id="9d35f-129">**Monitoring Timeout**.</span></span> <span data-ttu-id="9d35f-130">Den här egenskapen anger hello mängden tid hello Traffic Manager avsöknings agent ska vänta innan som kontrollerar ett fel när en avsökning för kontroll av hälsotillstånd skickas toohello slutpunkt.</span><span class="sxs-lookup"><span data-stu-id="9d35f-130">This property specifies hello amount of time hello Traffic Manager probing agent should wait before considering that check a failure when a health check probe is sent toohello endpoint.</span></span> <span data-ttu-id="9d35f-131">Om hello avsökning av intervallet anges too30 sekunder och du kan ange hello Timeout-värde mellan 5 och 10 sekunder.</span><span class="sxs-lookup"><span data-stu-id="9d35f-131">If hello Probing Interval is set too30 seconds, then you can set hello Timeout value between 5 and 10 seconds.</span></span> <span data-ttu-id="9d35f-132">Om inget värde anges används standardvärdet 10 sekunder.</span><span class="sxs-lookup"><span data-stu-id="9d35f-132">If no value is specified, it uses a default value of 10 seconds.</span></span> <span data-ttu-id="9d35f-133">Om hello avsökning av intervallet anges too10 sekunder och du kan ange hello Timeout-värde mellan 5 och 9 sekunder.</span><span class="sxs-lookup"><span data-stu-id="9d35f-133">If hello Probing Interval is set too10 seconds, then you can set hello Timeout value between 5 and 9 seconds.</span></span> <span data-ttu-id="9d35f-134">Om inget Timeout-värde har angetts används standardvärdet 9 sekunder.</span><span class="sxs-lookup"><span data-stu-id="9d35f-134">If no Timeout value is specified, it uses a default value of 9 seconds.</span></span>

![Slutpunktsövervakning av Traffic Manager](./media/traffic-manager-monitoring/endpoint-monitoring-settings.png)

<span data-ttu-id="9d35f-136">**Bild 1: Traffic Manager-slutpunktsövervakning**</span><span class="sxs-lookup"><span data-stu-id="9d35f-136">**Figure 1:  Traffic Manager endpoint monitoring**</span></span>

## <a name="how-endpoint-monitoring-works"></a><span data-ttu-id="9d35f-137">Så här fungerar slutpunktsövervakning</span><span class="sxs-lookup"><span data-stu-id="9d35f-137">How endpoint monitoring works</span></span>

<span data-ttu-id="9d35f-138">Om hello övervakning är HTTP eller HTTPS, gör avsöknings hello Traffic Manager-agenten en GET-begäran toohello slutpunkten med hjälp av hello protokoll, portar och relativ sökväg som anges.</span><span class="sxs-lookup"><span data-stu-id="9d35f-138">If hello monitoring protocol is set as HTTP or HTTPS, hello Traffic Manager probing agent makes a GET request toohello endpoint using hello protocol, port, and relative path given.</span></span> <span data-ttu-id="9d35f-139">Om du hämtar tillbaka ett svar 200 OK, och sedan denna slutpunkt anses felfri.</span><span class="sxs-lookup"><span data-stu-id="9d35f-139">If it gets back a 200-OK response, then that endpoint is considered healthy.</span></span> <span data-ttu-id="9d35f-140">Om hello svaret är ett annat värde eller, om inget svar tas emot inom tidsgränsen för hello anges, sedan hello Traffic Manager sökning agent försöker på nytt enligt toohello tolereras antalet fel inställningen (inget nytt försök görs om den här inställningen är 0) .</span><span class="sxs-lookup"><span data-stu-id="9d35f-140">If hello response is a different value, or, if no response is received within hello timeout period specified, then hello Traffic Manager probing agent re-attempts according toohello Tolerated Number of Failures setting (no re-attempts are done if this setting is 0).</span></span> <span data-ttu-id="9d35f-141">Om hello antal upprepade fel är högre än hello tolereras antalet fel, sedan markeras denna slutpunkt som ohälsosam.</span><span class="sxs-lookup"><span data-stu-id="9d35f-141">If hello number of consecutive failures is higher than hello Tolerated Number of Failures setting, then that endpoint is marked as unhealthy.</span></span> 

<span data-ttu-id="9d35f-142">Om hello övervakning protokollet är TCP, initierar avsöknings hello Traffic Manager-agenten en TCP-anslutningsbegäran med hjälp av angivna hello-porten.</span><span class="sxs-lookup"><span data-stu-id="9d35f-142">If hello monitoring protocol is TCP, hello Traffic Manager probing agent initiates a TCP connection request using hello port specified.</span></span> <span data-ttu-id="9d35f-143">Om hello-ändpunkten svarar toohello begäran med en svar tooestablish hello-anslutning att hälsokontroll har markerats som lyckas och avsöknings hello Traffic Manager-agenten återställer hello TCP-anslutning.</span><span class="sxs-lookup"><span data-stu-id="9d35f-143">If hello endpoint responds toohello request with a response tooestablish hello connection, that health check is marked as a success and hello Traffic Manager probing agent resets hello TCP connection.</span></span> <span data-ttu-id="9d35f-144">Om hello svaret är ett annat värde, eller om inget svar tas emot inom anges tidsgränsen för hello hello Traffic Manager sökning agent försöker på nytt enligt toohello tolereras antalet fel inställningen (inget nytt försök görs om den här inställningen är 0).</span><span class="sxs-lookup"><span data-stu-id="9d35f-144">If hello response is a different value, or if no response is received within hello timeout period specified, hello Traffic Manager probing agent re-attempts according toohello Tolerated Number of Failures setting (no re-attempts are made if this setting is 0).</span></span> <span data-ttu-id="9d35f-145">Om hello antal upprepade fel är högre än hello tolereras antalet fel inställningen, markeras den slutpunkten feltillstånd.</span><span class="sxs-lookup"><span data-stu-id="9d35f-145">If hello number of consecutive failures is higher than hello Tolerated Number of Failures setting, then that endpoint is marked unhealthy.</span></span>

<span data-ttu-id="9d35f-146">I samtliga fall Traffic Manager-avsökningar från flera platser och hello på varandra följande fel bestämning sker inom varje region.</span><span class="sxs-lookup"><span data-stu-id="9d35f-146">In all cases, Traffic Manager probes from multiple locations and hello consecutive failure determination happens within each region.</span></span> <span data-ttu-id="9d35f-147">Det innebär också att slutpunkter får hälsoavsökningar från Traffic Manager med en frekvens som är högre än hello-inställningen som används för avsökning av intervallet.</span><span class="sxs-lookup"><span data-stu-id="9d35f-147">This also means that endpoints are receiving health probes from Traffic Manager with a higher frequency than hello setting used for Probing Interval.</span></span>

>[!NOTE]
><span data-ttu-id="9d35f-148">För HTTP eller HTTPS övervakning är vanligt på hello endpoint sida tooimplement en anpassad sida i ditt program – till exempel /health.aspx.</span><span class="sxs-lookup"><span data-stu-id="9d35f-148">For HTTP or HTTPS monitoring protocol, a common practice on hello endpoint side is tooimplement a custom page within your application - for example, /health.aspx.</span></span> <span data-ttu-id="9d35f-149">Du kan utföra programspecifika kontroller, till exempel kontrollerar prestandaräknare eller Verifiera databasens tillgänglighet med hjälp av den här sökvägen för övervakning.</span><span class="sxs-lookup"><span data-stu-id="9d35f-149">Using this path for monitoring, you can perform application-specific checks, such as checking performance counters or verifying database availability.</span></span> <span data-ttu-id="9d35f-150">Hello sidan returnerar baserat på dessa anpassade kontroller, en lämplig HTTP-statuskod.</span><span class="sxs-lookup"><span data-stu-id="9d35f-150">Based on these custom checks, hello page returns an appropriate HTTP status code.</span></span>

<span data-ttu-id="9d35f-151">Alla slutpunkter i en Traffic Manager-profil dela inställningarna för övervakning.</span><span class="sxs-lookup"><span data-stu-id="9d35f-151">All endpoints in a Traffic Manager profile share monitoring settings.</span></span> <span data-ttu-id="9d35f-152">Om du behöver toouse olika inställningar för olika slutpunkter för övervakning, kan du skapa [kapslade Traffic Manager-profiler](traffic-manager-nested-profiles.md#example-5-per-endpoint-monitoring-settings).</span><span class="sxs-lookup"><span data-stu-id="9d35f-152">If you need toouse different monitoring settings for different endpoints, you can create [nested Traffic Manager profiles](traffic-manager-nested-profiles.md#example-5-per-endpoint-monitoring-settings).</span></span>

## <a name="endpoint-and-profile-status"></a><span data-ttu-id="9d35f-153">Status för slutpunkt och profil</span><span class="sxs-lookup"><span data-stu-id="9d35f-153">Endpoint and profile status</span></span>

<span data-ttu-id="9d35f-154">Du kan aktivera och inaktivera Traffic Manager-profiler och slutpunkter.</span><span class="sxs-lookup"><span data-stu-id="9d35f-154">You can enable and disable Traffic Manager profiles and endpoints.</span></span> <span data-ttu-id="9d35f-155">Men inträffa en ändring i slutpunkt status även som ett resultat av Traffic Manager automatiserade inställningar och processer.</span><span class="sxs-lookup"><span data-stu-id="9d35f-155">However, a change in endpoint status also might occur as a result of Traffic Manager automated settings and processes.</span></span>

### <a name="endpoint-status"></a><span data-ttu-id="9d35f-156">Status för endpoint</span><span class="sxs-lookup"><span data-stu-id="9d35f-156">Endpoint status</span></span>

<span data-ttu-id="9d35f-157">Du kan aktivera eller inaktivera en viss slutpunkt.</span><span class="sxs-lookup"><span data-stu-id="9d35f-157">You can enable or disable a specific endpoint.</span></span> <span data-ttu-id="9d35f-158">hello underliggande tjänst, vilket kan fortfarande vara felfria påverkas inte.</span><span class="sxs-lookup"><span data-stu-id="9d35f-158">hello underlying service, which might still be healthy, is unaffected.</span></span> <span data-ttu-id="9d35f-159">Ändra hello endpoint status kontroller hello tillgängligheten för hello slutpunkt i hello Traffic Manager-profilen.</span><span class="sxs-lookup"><span data-stu-id="9d35f-159">Changing hello endpoint status controls hello availability of hello endpoint in hello Traffic Manager profile.</span></span> <span data-ttu-id="9d35f-160">När en slutpunkt status är inaktiverad Traffic Manager kontrollerar inte dess hälsa och hello slutpunkten ingår inte i ett DNS-svar.</span><span class="sxs-lookup"><span data-stu-id="9d35f-160">When an endpoint status is disabled, Traffic Manager does not check its health and hello endpoint is not included in a DNS response.</span></span>

### <a name="profile-status"></a><span data-ttu-id="9d35f-161">Profilstatusen</span><span class="sxs-lookup"><span data-stu-id="9d35f-161">Profile status</span></span>

<span data-ttu-id="9d35f-162">Använder hello profilinställningen status, kan du aktivera eller inaktivera en viss profil.</span><span class="sxs-lookup"><span data-stu-id="9d35f-162">Using hello profile status setting, you can enable or disable a specific profile.</span></span> <span data-ttu-id="9d35f-163">När status för endpoint påverkar en enda slutpunkt, påverkar profilstatusen hello hela profilen, inklusive alla slutpunkter.</span><span class="sxs-lookup"><span data-stu-id="9d35f-163">While endpoint status affects a single endpoint, profile status affects hello entire profile, including all endpoints.</span></span> <span data-ttu-id="9d35f-164">När du inaktiverar en profil hello slutpunkter kontrolleras inte för hälsotillstånd och inga slutpunkter ingår i ett DNS-svar.</span><span class="sxs-lookup"><span data-stu-id="9d35f-164">When you disable a profile, hello endpoints are not checked for health and no endpoints are included in a DNS response.</span></span> <span data-ttu-id="9d35f-165">En [NXDOMAIN](https://tools.ietf.org/html/rfc2308) svarskoden returneras för hello DNS-fråga.</span><span class="sxs-lookup"><span data-stu-id="9d35f-165">An [NXDOMAIN](https://tools.ietf.org/html/rfc2308) response code is returned for hello DNS query.</span></span>

### <a name="endpoint-monitor-status"></a><span data-ttu-id="9d35f-166">Övervaka status för endpoint</span><span class="sxs-lookup"><span data-stu-id="9d35f-166">Endpoint monitor status</span></span>

<span data-ttu-id="9d35f-167">Övervaka status för endpoint är ett Traffic Manager-värde som visar hello status hello slutpunkt.</span><span class="sxs-lookup"><span data-stu-id="9d35f-167">Endpoint monitor status is a Traffic Manager-generated value that shows hello status of hello endpoint.</span></span> <span data-ttu-id="9d35f-168">Du kan inte ändra den här inställningen manuellt.</span><span class="sxs-lookup"><span data-stu-id="9d35f-168">You cannot change this setting manually.</span></span> <span data-ttu-id="9d35f-169">övervaka status för hello endpoint är en kombination av hello resultaten av slutpunktsövervakning och hello konfigurerad slutpunkt status.</span><span class="sxs-lookup"><span data-stu-id="9d35f-169">hello endpoint monitor status is a combination of hello results of endpoint monitoring and hello configured endpoint status.</span></span> <span data-ttu-id="9d35f-170">hello möjliga värden för status för endpoint Övervakare visas i hello följande tabell:</span><span class="sxs-lookup"><span data-stu-id="9d35f-170">hello possible values of endpoint monitor status are shown in hello following table:</span></span>

| <span data-ttu-id="9d35f-171">Profilstatusen</span><span class="sxs-lookup"><span data-stu-id="9d35f-171">Profile status</span></span> | <span data-ttu-id="9d35f-172">Status för endpoint</span><span class="sxs-lookup"><span data-stu-id="9d35f-172">Endpoint status</span></span> | <span data-ttu-id="9d35f-173">Övervaka status för endpoint</span><span class="sxs-lookup"><span data-stu-id="9d35f-173">Endpoint monitor status</span></span> | <span data-ttu-id="9d35f-174">Anteckningar</span><span class="sxs-lookup"><span data-stu-id="9d35f-174">Notes</span></span> |
| --- | --- | --- | --- |
| <span data-ttu-id="9d35f-175">Disabled</span><span class="sxs-lookup"><span data-stu-id="9d35f-175">Disabled</span></span> |<span data-ttu-id="9d35f-176">Enabled</span><span class="sxs-lookup"><span data-stu-id="9d35f-176">Enabled</span></span> |<span data-ttu-id="9d35f-177">Inaktiva</span><span class="sxs-lookup"><span data-stu-id="9d35f-177">Inactive</span></span> |<span data-ttu-id="9d35f-178">hello profilen har inaktiverats.</span><span class="sxs-lookup"><span data-stu-id="9d35f-178">hello profile has been disabled.</span></span> <span data-ttu-id="9d35f-179">Även om hello endpoint status är aktiverad företräde hello profilstatusen (inaktiverat).</span><span class="sxs-lookup"><span data-stu-id="9d35f-179">Although hello endpoint status is Enabled, hello profile status (Disabled) takes precedence.</span></span> <span data-ttu-id="9d35f-180">Slutpunkter i inaktiverad profiler övervakas inte.</span><span class="sxs-lookup"><span data-stu-id="9d35f-180">Endpoints in disabled profiles are not monitored.</span></span> <span data-ttu-id="9d35f-181">Ett NXDOMAIN svarskoden returneras för hello DNS-fråga.</span><span class="sxs-lookup"><span data-stu-id="9d35f-181">An NXDOMAIN response code is returned for hello DNS query.</span></span> |
| <span data-ttu-id="9d35f-182">&lt;alla&gt;</span><span class="sxs-lookup"><span data-stu-id="9d35f-182">&lt;any&gt;</span></span> |<span data-ttu-id="9d35f-183">Disabled</span><span class="sxs-lookup"><span data-stu-id="9d35f-183">Disabled</span></span> |<span data-ttu-id="9d35f-184">Disabled</span><span class="sxs-lookup"><span data-stu-id="9d35f-184">Disabled</span></span> |<span data-ttu-id="9d35f-185">hello-slutpunkten har inaktiverats.</span><span class="sxs-lookup"><span data-stu-id="9d35f-185">hello endpoint has been disabled.</span></span> <span data-ttu-id="9d35f-186">Inaktiverad slutpunkter övervakas inte.</span><span class="sxs-lookup"><span data-stu-id="9d35f-186">Disabled endpoints are not monitored.</span></span> <span data-ttu-id="9d35f-187">hello slutpunkten ingår inte i DNS-svar, därför kan den tar emot inte trafik.</span><span class="sxs-lookup"><span data-stu-id="9d35f-187">hello endpoint is not included in DNS responses, therefore, it does not receive traffic.</span></span> |
| <span data-ttu-id="9d35f-188">Enabled</span><span class="sxs-lookup"><span data-stu-id="9d35f-188">Enabled</span></span> |<span data-ttu-id="9d35f-189">Enabled</span><span class="sxs-lookup"><span data-stu-id="9d35f-189">Enabled</span></span> |<span data-ttu-id="9d35f-190">Online</span><span class="sxs-lookup"><span data-stu-id="9d35f-190">Online</span></span> |<span data-ttu-id="9d35f-191">hello endpoint övervakas och är felfri.</span><span class="sxs-lookup"><span data-stu-id="9d35f-191">hello endpoint is monitored and is healthy.</span></span> <span data-ttu-id="9d35f-192">Den ingår i DNS-svar och kan ta emot trafik.</span><span class="sxs-lookup"><span data-stu-id="9d35f-192">It is included in DNS responses and can receive traffic.</span></span> |
| <span data-ttu-id="9d35f-193">Enabled</span><span class="sxs-lookup"><span data-stu-id="9d35f-193">Enabled</span></span> |<span data-ttu-id="9d35f-194">Enabled</span><span class="sxs-lookup"><span data-stu-id="9d35f-194">Enabled</span></span> |<span data-ttu-id="9d35f-195">Försämrad</span><span class="sxs-lookup"><span data-stu-id="9d35f-195">Degraded</span></span> |<span data-ttu-id="9d35f-196">Slutpunkten övervakning hälsokontroller misslyckas.</span><span class="sxs-lookup"><span data-stu-id="9d35f-196">Endpoint monitoring health checks are failing.</span></span> <span data-ttu-id="9d35f-197">hello slutpunkten ingår inte i DNS-svar och tar inte emot trafik.</span><span class="sxs-lookup"><span data-stu-id="9d35f-197">hello endpoint is not included in DNS responses and does not receive traffic.</span></span> <br><span data-ttu-id="9d35f-198">Ett undantag toothis är om alla slutpunkter är försämrade då alla anses toobe returneras i hello frågesvar).</span><span class="sxs-lookup"><span data-stu-id="9d35f-198">An exception toothis is if all endpoints are degraded, in which case all of them are considered toobe returned in hello query response).</span></span></br>|
| <span data-ttu-id="9d35f-199">Enabled</span><span class="sxs-lookup"><span data-stu-id="9d35f-199">Enabled</span></span> |<span data-ttu-id="9d35f-200">Enabled</span><span class="sxs-lookup"><span data-stu-id="9d35f-200">Enabled</span></span> |<span data-ttu-id="9d35f-201">CheckingEndpoint</span><span class="sxs-lookup"><span data-stu-id="9d35f-201">CheckingEndpoint</span></span> |<span data-ttu-id="9d35f-202">hello endpoint övervakas, men hello resultaten av hello första sensorn har ännu inte tagits emot.</span><span class="sxs-lookup"><span data-stu-id="9d35f-202">hello endpoint is monitored, but hello results of hello first probe have not been received yet.</span></span> <span data-ttu-id="9d35f-203">CheckingEndpoint är ett tillfälligt tillstånd som vanligtvis sker omedelbart efter att lägga till eller aktivera en slutpunkt i hello profil.</span><span class="sxs-lookup"><span data-stu-id="9d35f-203">CheckingEndpoint is a temporary state that usually occurs immediately after adding or enabling an endpoint in hello profile.</span></span> <span data-ttu-id="9d35f-204">En slutpunkt i det här tillståndet ingår i DNS-svar och kan ta emot trafik.</span><span class="sxs-lookup"><span data-stu-id="9d35f-204">An endpoint in this state is included in DNS responses and can receive traffic.</span></span> |
| <span data-ttu-id="9d35f-205">Enabled</span><span class="sxs-lookup"><span data-stu-id="9d35f-205">Enabled</span></span> |<span data-ttu-id="9d35f-206">Enabled</span><span class="sxs-lookup"><span data-stu-id="9d35f-206">Enabled</span></span> |<span data-ttu-id="9d35f-207">Stoppad</span><span class="sxs-lookup"><span data-stu-id="9d35f-207">Stopped</span></span> |<span data-ttu-id="9d35f-208">hello cloud service eller web app som hello endpoint punkter toois körs inte.</span><span class="sxs-lookup"><span data-stu-id="9d35f-208">hello cloud service or web app that hello endpoint points toois not running.</span></span> <span data-ttu-id="9d35f-209">Kontrollera hello cloud service- eller web app.</span><span class="sxs-lookup"><span data-stu-id="9d35f-209">Check hello cloud service or web app settings.</span></span> <span data-ttu-id="9d35f-210">Detta kan också inträffa om hello-slutpunkten är i Skriv kapslade slutpunkt och hello underordnade profilen har inaktiverats eller är inaktiv.</span><span class="sxs-lookup"><span data-stu-id="9d35f-210">This can also happen if hello endpoint is of type nested endpoint and hello child profile is disabled or is inactive.</span></span> <br><span data-ttu-id="9d35f-211">En slutpunkt med status stoppad övervakas inte.</span><span class="sxs-lookup"><span data-stu-id="9d35f-211">An endpoint with a Stopped status is not monitored.</span></span> <span data-ttu-id="9d35f-212">Den ingår inte i DNS-svar och ta emot inte trafik.</span><span class="sxs-lookup"><span data-stu-id="9d35f-212">It is not included in DNS responses and does not receive traffic.</span></span> <span data-ttu-id="9d35f-213">Ett undantag toothis är om alla slutpunkter är försämrade då alla beaktas toobe returneras i hello frågesvar.</span><span class="sxs-lookup"><span data-stu-id="9d35f-213">An exception toothis is if all endpoints are degraded, in which case all of them will be considered toobe returned in hello query response.</span></span></br>|

<span data-ttu-id="9d35f-214">Mer information om hur övervaka status för endpoint beräknas för kapslade slutpunkter finns [kapslade Traffic Manager-profiler](traffic-manager-nested-profiles.md).</span><span class="sxs-lookup"><span data-stu-id="9d35f-214">For details about how endpoint monitor status is calculated for nested endpoints, see [nested Traffic Manager profiles](traffic-manager-nested-profiles.md).</span></span>

### <a name="profile-monitor-status"></a><span data-ttu-id="9d35f-215">Övervaka profilstatusen</span><span class="sxs-lookup"><span data-stu-id="9d35f-215">Profile monitor status</span></span>

<span data-ttu-id="9d35f-216">Hej profilstatusen övervakaren är en kombination av hello konfigurerad profil status och slutpunkten hello övervakaren statusvärden för alla slutpunkter.</span><span class="sxs-lookup"><span data-stu-id="9d35f-216">hello profile monitor status is a combination of hello configured profile status and hello endpoint monitor status values for all endpoints.</span></span> <span data-ttu-id="9d35f-217">hello möjliga värden beskrivs i följande tabell hello:</span><span class="sxs-lookup"><span data-stu-id="9d35f-217">hello possible values are described in hello following table:</span></span>

| <span data-ttu-id="9d35f-218">Profilstatusen (som har konfigurerats)</span><span class="sxs-lookup"><span data-stu-id="9d35f-218">Profile status (as configured)</span></span> | <span data-ttu-id="9d35f-219">Övervaka status för endpoint</span><span class="sxs-lookup"><span data-stu-id="9d35f-219">Endpoint monitor status</span></span> | <span data-ttu-id="9d35f-220">Övervaka profilstatusen</span><span class="sxs-lookup"><span data-stu-id="9d35f-220">Profile monitor status</span></span> | <span data-ttu-id="9d35f-221">Anteckningar</span><span class="sxs-lookup"><span data-stu-id="9d35f-221">Notes</span></span> |
| --- | --- | --- | --- |
| <span data-ttu-id="9d35f-222">Disabled</span><span class="sxs-lookup"><span data-stu-id="9d35f-222">Disabled</span></span> |<span data-ttu-id="9d35f-223">&lt;alla&gt; eller en profil med några definierade slutpunkter.</span><span class="sxs-lookup"><span data-stu-id="9d35f-223">&lt;any&gt; or a profile with no defined endpoints.</span></span> |<span data-ttu-id="9d35f-224">Disabled</span><span class="sxs-lookup"><span data-stu-id="9d35f-224">Disabled</span></span> |<span data-ttu-id="9d35f-225">hello profilen har inaktiverats.</span><span class="sxs-lookup"><span data-stu-id="9d35f-225">hello profile has been disabled.</span></span> |
| <span data-ttu-id="9d35f-226">Enabled</span><span class="sxs-lookup"><span data-stu-id="9d35f-226">Enabled</span></span> |<span data-ttu-id="9d35f-227">hello status för minst en slutpunkt har degraderats.</span><span class="sxs-lookup"><span data-stu-id="9d35f-227">hello status of at least one endpoint is Degraded.</span></span> |<span data-ttu-id="9d35f-228">Försämrad</span><span class="sxs-lookup"><span data-stu-id="9d35f-228">Degraded</span></span> |<span data-ttu-id="9d35f-229">Granska hello enskilda endpoint status värden toodetermine vilka slutpunkter kräva ytterligare åtgärder.</span><span class="sxs-lookup"><span data-stu-id="9d35f-229">Review hello individual endpoint status values toodetermine which endpoints require further attention.</span></span> |
| <span data-ttu-id="9d35f-230">Enabled</span><span class="sxs-lookup"><span data-stu-id="9d35f-230">Enabled</span></span> |<span data-ttu-id="9d35f-231">Hej är för minst en slutpunkt Online.</span><span class="sxs-lookup"><span data-stu-id="9d35f-231">hello status of at least one endpoint is Online.</span></span> <span data-ttu-id="9d35f-232">Inga slutpunkter har statusen degraderad.</span><span class="sxs-lookup"><span data-stu-id="9d35f-232">No endpoints have a Degraded status.</span></span> |<span data-ttu-id="9d35f-233">Online</span><span class="sxs-lookup"><span data-stu-id="9d35f-233">Online</span></span> |<span data-ttu-id="9d35f-234">hello tjänsten tar emot trafik.</span><span class="sxs-lookup"><span data-stu-id="9d35f-234">hello service is accepting traffic.</span></span> <span data-ttu-id="9d35f-235">Ingen ytterligare åtgärd krävs.</span><span class="sxs-lookup"><span data-stu-id="9d35f-235">No further action is required.</span></span> |
| <span data-ttu-id="9d35f-236">Enabled</span><span class="sxs-lookup"><span data-stu-id="9d35f-236">Enabled</span></span> |<span data-ttu-id="9d35f-237">Hej är för minst en slutpunkt CheckingEndpoint.</span><span class="sxs-lookup"><span data-stu-id="9d35f-237">hello status of at least one endpoint is CheckingEndpoint.</span></span> <span data-ttu-id="9d35f-238">Inga slutpunkter är Online eller degraderad status.</span><span class="sxs-lookup"><span data-stu-id="9d35f-238">No endpoints are in Online or Degraded status.</span></span> |<span data-ttu-id="9d35f-239">CheckingEndpoints</span><span class="sxs-lookup"><span data-stu-id="9d35f-239">CheckingEndpoints</span></span> |<span data-ttu-id="9d35f-240">Den här övergångstillstånd inträffar när en profil om skapade eller aktiverade.</span><span class="sxs-lookup"><span data-stu-id="9d35f-240">This transition state occurs when a profile if created or enabled.</span></span> <span data-ttu-id="9d35f-241">hello endpoint hälsa kontrolleras för hello första gången.</span><span class="sxs-lookup"><span data-stu-id="9d35f-241">hello endpoint health is being checked for hello first time.</span></span> |
| <span data-ttu-id="9d35f-242">Enabled</span><span class="sxs-lookup"><span data-stu-id="9d35f-242">Enabled</span></span> |<span data-ttu-id="9d35f-243">hello status för alla slutpunkter i profilen för hello är inaktiverad eller stoppad eller hello profilen har inga definierade slutpunkter.</span><span class="sxs-lookup"><span data-stu-id="9d35f-243">hello statuses of all endpoints in hello profile are either Disabled or Stopped, or hello profile has no defined endpoints.</span></span> |<span data-ttu-id="9d35f-244">Inaktiva</span><span class="sxs-lookup"><span data-stu-id="9d35f-244">Inactive</span></span> |<span data-ttu-id="9d35f-245">Inga slutpunkter är aktiva men hello profil är fortfarande aktiverat.</span><span class="sxs-lookup"><span data-stu-id="9d35f-245">No endpoints are active, but hello profile is still Enabled.</span></span> |

## <a name="endpoint-failover-and-recovery"></a><span data-ttu-id="9d35f-246">Slutpunkten redundans och återställning</span><span class="sxs-lookup"><span data-stu-id="9d35f-246">Endpoint failover and recovery</span></span>

<span data-ttu-id="9d35f-247">Traffic Manager kontrollerar regelbundet hello hälsotillståndet för varje slutpunkt, inklusive ohälsosamt slutpunkter.</span><span class="sxs-lookup"><span data-stu-id="9d35f-247">Traffic Manager periodically checks hello health of every endpoint, including unhealthy endpoints.</span></span> <span data-ttu-id="9d35f-248">Traffic Manager identifierar när en slutpunkt blir felfritt och ger dig tillbaka till rotation.</span><span class="sxs-lookup"><span data-stu-id="9d35f-248">Traffic Manager detects when an endpoint becomes healthy and brings it back into rotation.</span></span>

<span data-ttu-id="9d35f-249">En slutpunkt är ohälsosamt när någon av hello följande händelser inträffar:</span><span class="sxs-lookup"><span data-stu-id="9d35f-249">An endpoint is unhealthy when any of hello following events occur:</span></span>
- <span data-ttu-id="9d35f-250">Om hello övervakning är HTTP eller HTTPS:</span><span class="sxs-lookup"><span data-stu-id="9d35f-250">If hello monitoring protocol is HTTP or HTTPS:</span></span>
    - <span data-ttu-id="9d35f-251">Icke-200 svar (inklusive en annan 2xx-kod eller en 301/302-omdirigering).</span><span class="sxs-lookup"><span data-stu-id="9d35f-251">A non-200 response is received (including a different 2xx code, or a 301/302 redirect).</span></span>
- <span data-ttu-id="9d35f-252">Om hello övervakning protokollet är TCP:</span><span class="sxs-lookup"><span data-stu-id="9d35f-252">If hello monitoring protocol is TCP:</span></span> 
    - <span data-ttu-id="9d35f-253">Ett svar skickas än ACK eller SYN ACK tas emot i svaret toohello synkroniseringsbegäran av Traffic Manager tooattempt upprätta en anslutning.</span><span class="sxs-lookup"><span data-stu-id="9d35f-253">A response other than ACK or SYN-ACK is received in response toohello SYNC request sent by Traffic Manager tooattempt a connection establishment.</span></span>
- <span data-ttu-id="9d35f-254">Timeout.</span><span class="sxs-lookup"><span data-stu-id="9d35f-254">Timeout.</span></span> 
- <span data-ttu-id="9d35f-255">Alla andra anslutningsproblem ledde hello-slutpunkt som inte kan nås.</span><span class="sxs-lookup"><span data-stu-id="9d35f-255">Any other connection issue resulting in hello endpoint being not reachable.</span></span>

<span data-ttu-id="9d35f-256">Mer information om felsökning av misslyckade kontroller finns [felsökning försämrad status på Azure Traffic Manager](traffic-manager-troubleshooting-degraded.md).</span><span class="sxs-lookup"><span data-stu-id="9d35f-256">For more information about troubleshooting failed checks, see [Troubleshooting Degraded status on Azure Traffic Manager](traffic-manager-troubleshooting-degraded.md).</span></span> 

<span data-ttu-id="9d35f-257">hello följande tidslinjen i bild 2 är en detaljerad beskrivning av hello övervaka processen för Traffic Manager-slutpunkt som har hello följande inställningar: övervaka protokollet är HTTP, avsöknings är 30 sekunder, antalet tillåten fel är 3, timeout-värde är 10 sekunder och DNS TTL är 30 sekunder.</span><span class="sxs-lookup"><span data-stu-id="9d35f-257">hello following timeline in Figure 2 is a detailed description of hello monitoring process of Traffic Manager endpoint that has hello following settings: monitoring protocol is HTTP, probing interval is 30 seconds, number of tolerated failures is 3, timeout value is 10 seconds, and DNS TTL is 30 seconds.</span></span>

![Traffic Manager-slutpunkt redundans och återställning efter fel-sekvens](./media/traffic-manager-monitoring/timeline.png)

<span data-ttu-id="9d35f-259">**Bild 2: Traffic manager-slutpunkten redundans och återställning sekvens**</span><span class="sxs-lookup"><span data-stu-id="9d35f-259">**Figure 2:  Traffic manager endpoint failover and recovery sequence**</span></span>

1. <span data-ttu-id="9d35f-260">**HÄMTA**.</span><span class="sxs-lookup"><span data-stu-id="9d35f-260">**GET**.</span></span> <span data-ttu-id="9d35f-261">För varje slutpunkt utför hello Traffic Manager övervakningssystemet hello sökväg som anges i hello övervakningsinställningarna en GET-begäran.</span><span class="sxs-lookup"><span data-stu-id="9d35f-261">For each endpoint, hello Traffic Manager monitoring system performs a GET request on hello path specified in hello monitoring settings.</span></span>
2. <span data-ttu-id="9d35f-262">**200 OK**.</span><span class="sxs-lookup"><span data-stu-id="9d35f-262">**200 OK**.</span></span> <span data-ttu-id="9d35f-263">hello övervakningssystem förväntar sig en HTTP-200 OK meddelandet toobe returnerade inom 10 sekunder.</span><span class="sxs-lookup"><span data-stu-id="9d35f-263">hello monitoring system expects an HTTP 200 OK message toobe returned within 10 seconds.</span></span> <span data-ttu-id="9d35f-264">När den tar emot svaret identifierar att hello-tjänsten är tillgänglig.</span><span class="sxs-lookup"><span data-stu-id="9d35f-264">When it receives this response, it recognizes that hello service is available.</span></span>
3. <span data-ttu-id="9d35f-265">**30 sekunder mellan kontroller**.</span><span class="sxs-lookup"><span data-stu-id="9d35f-265">**30 seconds between checks**.</span></span> <span data-ttu-id="9d35f-266">hello endpoint hälsokontroll upprepas var 30: e sekund.</span><span class="sxs-lookup"><span data-stu-id="9d35f-266">hello endpoint health check is repeated every 30 seconds.</span></span>
4. <span data-ttu-id="9d35f-267">**Tjänsten är inte tillgänglig**.</span><span class="sxs-lookup"><span data-stu-id="9d35f-267">**Service unavailable**.</span></span> <span data-ttu-id="9d35f-268">hello tjänsten blir otillgänglig.</span><span class="sxs-lookup"><span data-stu-id="9d35f-268">hello service becomes unavailable.</span></span> <span data-ttu-id="9d35f-269">Traffic Manager märker inte förrän hello nästa hälsokontroll.</span><span class="sxs-lookup"><span data-stu-id="9d35f-269">Traffic Manager will not know until hello next health check.</span></span>
5. <span data-ttu-id="9d35f-270">**Försök tooaccess hello övervakning sökvägen**.</span><span class="sxs-lookup"><span data-stu-id="9d35f-270">**Attempts tooaccess hello monitoring path**.</span></span> <span data-ttu-id="9d35f-271">hello övervakningssystem utför en GET-begäran, men inte tar emot ett svar inom tidsgränsen för hello 10 sekunder (du kan också ett icke-200 svar kan tas emot).</span><span class="sxs-lookup"><span data-stu-id="9d35f-271">hello monitoring system performs a GET request, but does not receive a response within hello timeout period of 10 seconds (alternatively, a non-200 response may be received).</span></span> <span data-ttu-id="9d35f-272">Försöker den med tre gånger, med 30 sekunders intervall.</span><span class="sxs-lookup"><span data-stu-id="9d35f-272">It then tries three more times, at 30-second intervals.</span></span> <span data-ttu-id="9d35f-273">Om en av hello försöker lyckas, återställs hello antal försök.</span><span class="sxs-lookup"><span data-stu-id="9d35f-273">If one of hello tries is successful, then hello number of tries is reset.</span></span>
6. <span data-ttu-id="9d35f-274">**Statusen tooDegraded**.</span><span class="sxs-lookup"><span data-stu-id="9d35f-274">**Status set tooDegraded**.</span></span> <span data-ttu-id="9d35f-275">Efter en fjärde på varandra följande fel markerar hello övervakningssystem hello tillgänglig slutpunkt status som degraderad.</span><span class="sxs-lookup"><span data-stu-id="9d35f-275">After a fourth consecutive failure, hello monitoring system marks hello unavailable endpoint status as Degraded.</span></span>
7. <span data-ttu-id="9d35f-276">**Trafiken är distribueras tooother slutpunkter**.</span><span class="sxs-lookup"><span data-stu-id="9d35f-276">**Traffic is diverted tooother endpoints**.</span></span> <span data-ttu-id="9d35f-277">hello Traffic Manager DNS-namnservrar uppdateras och Traffic Manager inte längre returnerar hello slutpunkt i svaret tooDNS frågor.</span><span class="sxs-lookup"><span data-stu-id="9d35f-277">hello Traffic Manager DNS name servers are updated and Traffic Manager no longer returns hello endpoint in response tooDNS queries.</span></span> <span data-ttu-id="9d35f-278">Nya anslutningar är riktat tooother, tillgängliga slutpunkter.</span><span class="sxs-lookup"><span data-stu-id="9d35f-278">New connections are directed tooother, available endpoints.</span></span> <span data-ttu-id="9d35f-279">Tidigare DNS-svar som innehåller den här slutpunkten kan dock fortfarande cachelagras av rekursiva DNS-servrar och DNS-klienter.</span><span class="sxs-lookup"><span data-stu-id="9d35f-279">However, previous DNS responses that include this endpoint may still be cached by recursive DNS servers and DNS clients.</span></span> <span data-ttu-id="9d35f-280">Klienter fortsätta toouse hello endpoint förrän hello DNS-cachen upphör att gälla.</span><span class="sxs-lookup"><span data-stu-id="9d35f-280">Clients continue toouse hello endpoint until hello DNS cache expires.</span></span> <span data-ttu-id="9d35f-281">Eftersom hello DNS-cachen upphör att gälla klienter gör den nya DNS-frågor och är riktat toodifferent slutpunkter.</span><span class="sxs-lookup"><span data-stu-id="9d35f-281">As hello DNS cache expires, clients make new DNS queries and are directed toodifferent endpoints.</span></span> <span data-ttu-id="9d35f-282">hello cachelagringens varaktighet styrs av hello TTL-inställningen i hello Traffic Manager-profil, till exempel 30 sekunder.</span><span class="sxs-lookup"><span data-stu-id="9d35f-282">hello cache duration is controlled by hello TTL setting in hello Traffic Manager profile, for example, 30 seconds.</span></span>
8. <span data-ttu-id="9d35f-283">**Hälsotillstånd kontrollerar fortsätta**.</span><span class="sxs-lookup"><span data-stu-id="9d35f-283">**Health checks continue**.</span></span> <span data-ttu-id="9d35f-284">Traffic Manager fortsätter toocheck hello hälsotillstånd hello slutpunkt när den har statusen degraderad.</span><span class="sxs-lookup"><span data-stu-id="9d35f-284">Traffic Manager continues toocheck hello health of hello endpoint while it has a Degraded status.</span></span> <span data-ttu-id="9d35f-285">Traffic Manager identifierar när hello endpoint returnerar toohealth.</span><span class="sxs-lookup"><span data-stu-id="9d35f-285">Traffic Manager detects when hello endpoint returns toohealth.</span></span>
9. <span data-ttu-id="9d35f-286">**Tjänsten är online igen**.</span><span class="sxs-lookup"><span data-stu-id="9d35f-286">**Service comes back online**.</span></span> <span data-ttu-id="9d35f-287">hello tjänsten blir tillgänglig.</span><span class="sxs-lookup"><span data-stu-id="9d35f-287">hello service becomes available.</span></span> <span data-ttu-id="9d35f-288">hello endpoint behåller statusen degraderad i Traffic Manager tills hello övervakningssystem utför dess nästa hälsokontroll.</span><span class="sxs-lookup"><span data-stu-id="9d35f-288">hello endpoint retains its Degraded status in Traffic Manager until hello monitoring system performs its next health check.</span></span>
10. <span data-ttu-id="9d35f-289">**Fortsätter med att trafiken tooservice**.</span><span class="sxs-lookup"><span data-stu-id="9d35f-289">**Traffic tooservice resumes**.</span></span> <span data-ttu-id="9d35f-290">Traffic Manager skickar en GET-begäran och tar emot ett statussvar 200 OK.</span><span class="sxs-lookup"><span data-stu-id="9d35f-290">Traffic Manager sends a GET request and receives a 200 OK status response.</span></span> <span data-ttu-id="9d35f-291">hello tjänsten returnerade tooa felfritt tillstånd.</span><span class="sxs-lookup"><span data-stu-id="9d35f-291">hello service has returned tooa healthy state.</span></span> <span data-ttu-id="9d35f-292">hello Traffic Manager-namnservrar uppdateras och de börjar toohand ut hello tjänsten DNS-namnet i DNS-svar.</span><span class="sxs-lookup"><span data-stu-id="9d35f-292">hello Traffic Manager name servers are updated, and they begin toohand out hello service's DNS name in DNS responses.</span></span> <span data-ttu-id="9d35f-293">Trafik returnerar toohello slutpunkt som cachelagrade DNS-svar som returnerar andra slutpunkter upphör att gälla och som befintliga anslutningar tooother slutpunkter avslutas.</span><span class="sxs-lookup"><span data-stu-id="9d35f-293">Traffic returns toohello endpoint as cached DNS responses that return other endpoints expire, and as existing connections tooother endpoints are terminated.</span></span>

    > [!NOTE]
    > <span data-ttu-id="9d35f-294">Eftersom Traffic Manager fungerar på hello DNS-nivån, kan det påverka befintliga anslutningar tooany slutpunkten.</span><span class="sxs-lookup"><span data-stu-id="9d35f-294">Because Traffic Manager works at hello DNS level, it cannot influence existing connections tooany endpoint.</span></span> <span data-ttu-id="9d35f-295">När den dirigerar trafik mellan slutpunkter (antingen av ändrade inställningar eller under växling vid fel eller återställning efter fel) leder Traffic Manager nya anslutningar tooavailable slutpunkter.</span><span class="sxs-lookup"><span data-stu-id="9d35f-295">When it directs traffic between endpoints (either by changed profile settings, or during failover or failback), Traffic Manager directs new connections tooavailable endpoints.</span></span> <span data-ttu-id="9d35f-296">Slutpunkter kan dock fortsätta tooreceive trafik via befintliga anslutningar förrän sessionerna avslutas.</span><span class="sxs-lookup"><span data-stu-id="9d35f-296">However, other endpoints might continue tooreceive traffic via existing connections until those sessions are terminated.</span></span> <span data-ttu-id="9d35f-297">tooenable trafik toodrain från befintliga anslutningar, program bör begränsa hello varaktighet för sessionen som används med varje slutpunkt.</span><span class="sxs-lookup"><span data-stu-id="9d35f-297">tooenable traffic toodrain from existing connections, applications should limit hello session duration used with each endpoint.</span></span>

## <a name="traffic-routing-methods"></a><span data-ttu-id="9d35f-298">Routning av nätverkstrafik metoder</span><span class="sxs-lookup"><span data-stu-id="9d35f-298">Traffic-routing methods</span></span>

<span data-ttu-id="9d35f-299">När en slutpunkt har status degraderad kan tillbaka den inte längre i svaret tooDNS frågor.</span><span class="sxs-lookup"><span data-stu-id="9d35f-299">When an endpoint has a Degraded status, it is no longer returned in response tooDNS queries.</span></span> <span data-ttu-id="9d35f-300">I stället är en annan slutpunkt valt och returneras.</span><span class="sxs-lookup"><span data-stu-id="9d35f-300">Instead, an alternative endpoint is chosen and returned.</span></span> <span data-ttu-id="9d35f-301">hello routning av nätverkstrafik metoden som konfigurerats i hello profil avgör hur hello alternativa slutpunkten är valt.</span><span class="sxs-lookup"><span data-stu-id="9d35f-301">hello traffic-routing method configured in hello profile determines how hello alternative endpoint is chosen.</span></span>

* <span data-ttu-id="9d35f-302">**Prioritet**.</span><span class="sxs-lookup"><span data-stu-id="9d35f-302">**Priority**.</span></span> <span data-ttu-id="9d35f-303">Slutpunkter utgör en prioriterad lista.</span><span class="sxs-lookup"><span data-stu-id="9d35f-303">Endpoints form a prioritized list.</span></span> <span data-ttu-id="9d35f-304">hello första tillgängliga slutpunkten hello listan returneras alltid.</span><span class="sxs-lookup"><span data-stu-id="9d35f-304">hello first available endpoint on hello list is always returned.</span></span> <span data-ttu-id="9d35f-305">Om statusen för slutpunkten är försämrad returneras hello nästa slutpunkt.</span><span class="sxs-lookup"><span data-stu-id="9d35f-305">If an endpoint status is Degraded, then hello next available endpoint is returned.</span></span>
* <span data-ttu-id="9d35f-306">**Viktade**.</span><span class="sxs-lookup"><span data-stu-id="9d35f-306">**Weighted**.</span></span> <span data-ttu-id="9d35f-307">Alla tillgängliga endpoint väljs slumpmässigt baserat på deras tilldelade vikt och hello vikten av hello tillgängliga slutpunkter.</span><span class="sxs-lookup"><span data-stu-id="9d35f-307">Any available endpoint is chosen at random based on their assigned weights and hello weights of hello other available endpoints.</span></span>
* <span data-ttu-id="9d35f-308">**Prestanda**.</span><span class="sxs-lookup"><span data-stu-id="9d35f-308">**Performance**.</span></span> <span data-ttu-id="9d35f-309">hello endpoint närmaste toohello slutanvändaren returneras.</span><span class="sxs-lookup"><span data-stu-id="9d35f-309">hello endpoint closest toohello end user is returned.</span></span> <span data-ttu-id="9d35f-310">Om den är inte tillgänglig, en slutpunkt väljs slumpmässigt från alla hello tillgängliga slutpunkter.</span><span class="sxs-lookup"><span data-stu-id="9d35f-310">If that endpoint is unavailable, an endpoint is randomly chosen from all hello other available endpoints.</span></span> <span data-ttu-id="9d35f-311">Om du väljer en slumpmässig slutpunkt undviker ett sammanhängande fel som kan uppstå när hello nästa närmaste endpoint blir överbelastad.</span><span class="sxs-lookup"><span data-stu-id="9d35f-311">Choosing a random endpoint avoids a cascading failure that can occur when hello next-closest endpoint becomes overloaded.</span></span> <span data-ttu-id="9d35f-312">Du kan konfigurera alternativa redundans planer för routning av prestanda-trafik med hjälp av [kapslade Traffic Manager-profiler](traffic-manager-nested-profiles.md#example-4-controlling-performance-traffic-routing-between-multiple-endpoints-in-the-same-region).</span><span class="sxs-lookup"><span data-stu-id="9d35f-312">You can configure alternative failover plans for performance traffic-routing by using [nested Traffic Manager profiles](traffic-manager-nested-profiles.md#example-4-controlling-performance-traffic-routing-between-multiple-endpoints-in-the-same-region).</span></span>
* <span data-ttu-id="9d35f-313">**Geografisk**.</span><span class="sxs-lookup"><span data-stu-id="9d35f-313">**Geographic**.</span></span> <span data-ttu-id="9d35f-314">hello endpoint mappas tooserve hello geografisk plats baserat på hello fråga IP-adresserna returneras.</span><span class="sxs-lookup"><span data-stu-id="9d35f-314">hello endpoint mapped tooserve hello geographic location based on hello query request IP’s is returned.</span></span> <span data-ttu-id="9d35f-315">Om den är inte tillgänglig, en annan slutpunkt inte valda toofailover, eftersom en geografisk plats kan vara mappade endast tooone slutpunkt i en profil (Mer information finns i hello [vanliga frågor och svar](traffic-manager-FAQs.md#traffic-manager-geographic-traffic-routing-method)).</span><span class="sxs-lookup"><span data-stu-id="9d35f-315">If that endpoint is unavailable, another endpoint will not be selected toofailover to, since a geographic location can be mapped only tooone endpoint in a profile (more details are in hello [FAQ](traffic-manager-FAQs.md#traffic-manager-geographic-traffic-routing-method)).</span></span> <span data-ttu-id="9d35f-316">Som bästa praxis, när du använder geografiska routning, rekommenderar vi kunder toouse kapslade Traffic Manager-profiler med mer än en slutpunkt som hello slutpunkter för hello-profilen.</span><span class="sxs-lookup"><span data-stu-id="9d35f-316">As a best practice, when using geographic routing, we recommend customers toouse nested Traffic Manager profiles with more than one endpoint as hello endpoints of hello profile.</span></span>

<span data-ttu-id="9d35f-317">Mer information finns i [Traffic Manager routning av nätverkstrafik metoder](traffic-manager-routing-methods.md).</span><span class="sxs-lookup"><span data-stu-id="9d35f-317">For more information, see [Traffic Manager traffic-routing methods](traffic-manager-routing-methods.md).</span></span>

> [!NOTE]
> <span data-ttu-id="9d35f-318">Ett inträffar undantag toonormal routning av nätverkstrafik när alla berättigade slutpunkter har status degraderad.</span><span class="sxs-lookup"><span data-stu-id="9d35f-318">One exception toonormal traffic-routing behavior occurs when all eligible endpoints have a degraded status.</span></span> <span data-ttu-id="9d35f-319">Traffic Manager gör ”bästa prestanda” försök och *som om alla hello degraderad status slutpunkterna är faktiskt i ett onlinetillstånd*.</span><span class="sxs-lookup"><span data-stu-id="9d35f-319">Traffic Manager makes a "best effort" attempt and *responds as if all hello Degraded status endpoints actually are in an online state*.</span></span> <span data-ttu-id="9d35f-320">Det här beteendet är bättre toohello alternativ som är toonot returnera valfri slutpunkt i hello DNS-svar.</span><span class="sxs-lookup"><span data-stu-id="9d35f-320">This behavior is preferable toohello alternative, which would be toonot return any endpoint in hello DNS response.</span></span> <span data-ttu-id="9d35f-321">Inaktiverad eller stoppad slutpunkter övervakas inte, därför kan de anses inte vara berättigad till trafik.</span><span class="sxs-lookup"><span data-stu-id="9d35f-321">Disabled or Stopped endpoints are not monitored, therefore, they are not considered eligible for traffic.</span></span>
>
> <span data-ttu-id="9d35f-322">Detta tillstånd orsakas vanligen av felaktig konfiguration av hello-tjänsten, som:</span><span class="sxs-lookup"><span data-stu-id="9d35f-322">This condition is commonly caused by improper configuration of hello service, such as:</span></span>
>
> * <span data-ttu-id="9d35f-323">En ACL access control list [] blockerar hello Traffic Manager-hälsokontroller.</span><span class="sxs-lookup"><span data-stu-id="9d35f-323">An access control list [ACL] blocking hello Traffic Manager health checks.</span></span>
> * <span data-ttu-id="9d35f-324">En felaktig konfiguration av hello övervakning port eller protokollet i hello Traffic manager-profil.</span><span class="sxs-lookup"><span data-stu-id="9d35f-324">An improper configuration of hello monitoring port or protocol in hello Traffic manager profile.</span></span>
>
> <span data-ttu-id="9d35f-325">hello följd av detta beteende är att om Traffic Manager-hälsokontroller inte är korrekt konfigurerad, kan det verka från hello trafik som routning Traffic Manager *är* fungerar korrekt.</span><span class="sxs-lookup"><span data-stu-id="9d35f-325">hello consequence of this behavior is that if Traffic Manager health checks are not configured correctly, it might appear from hello traffic routing as though Traffic Manager *is* working properly.</span></span> <span data-ttu-id="9d35f-326">Men i det här fallet kan endpoint växling vid fel inträffa som påverkar övergripande tillgänglighet.</span><span class="sxs-lookup"><span data-stu-id="9d35f-326">However, in this case, endpoint failover cannot happen which affects overall application availability.</span></span> <span data-ttu-id="9d35f-327">Det är viktigt toocheck att hello profil visar statusen Online inte statusen degraderad.</span><span class="sxs-lookup"><span data-stu-id="9d35f-327">It is important toocheck that hello profile shows an Online status, not a Degraded status.</span></span> <span data-ttu-id="9d35f-328">En Online-status anger att hello Traffic Manager hälsa kontrollerar fungerar som förväntat.</span><span class="sxs-lookup"><span data-stu-id="9d35f-328">An Online status indicates that hello Traffic Manager health checks are working as expected.</span></span>

<span data-ttu-id="9d35f-329">Mer information om hur du felsöker misslyckades hälsokontroller, se [felsökning försämrad status på Azure Traffic Manager](traffic-manager-troubleshooting-degraded.md).</span><span class="sxs-lookup"><span data-stu-id="9d35f-329">For more information about troubleshooting failed health checks, see [Troubleshooting Degraded status on Azure Traffic Manager](traffic-manager-troubleshooting-degraded.md).</span></span>



## <a name="next-steps"></a><span data-ttu-id="9d35f-330">Nästa steg</span><span class="sxs-lookup"><span data-stu-id="9d35f-330">Next steps</span></span>

<span data-ttu-id="9d35f-331">Läs [hur Traffic Manager fungerar](traffic-manager-how-traffic-manager-works.md)</span><span class="sxs-lookup"><span data-stu-id="9d35f-331">Learn [how Traffic Manager works](traffic-manager-how-traffic-manager-works.md)</span></span>

<span data-ttu-id="9d35f-332">Mer information om hello [routning av nätverkstrafik metoder](traffic-manager-routing-methods.md) stöds av Traffic Manager</span><span class="sxs-lookup"><span data-stu-id="9d35f-332">Learn more about hello [traffic-routing methods](traffic-manager-routing-methods.md) supported by Traffic Manager</span></span>

<span data-ttu-id="9d35f-333">Lär dig hur för[skapa en Traffic Manager-profil](traffic-manager-manage-profiles.md)</span><span class="sxs-lookup"><span data-stu-id="9d35f-333">Learn how too[create a Traffic Manager profile](traffic-manager-manage-profiles.md)</span></span>

<span data-ttu-id="9d35f-334">[Felsöka status degraderad](traffic-manager-troubleshooting-degraded.md) på en Traffic Manager-slutpunkt</span><span class="sxs-lookup"><span data-stu-id="9d35f-334">[Troubleshoot Degraded status](traffic-manager-troubleshooting-degraded.md) on a Traffic Manager endpoint</span></span>

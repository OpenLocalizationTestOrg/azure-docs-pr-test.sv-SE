---
title: "Replikera en flera nivåer IIS baserade webbapp med Azure Site Recovery | Microsoft Docs"
description: "Den här artikeln beskriver hur du replikera IIS web grupp virtuella datorer med hjälp av Azure Site Recovery."
services: site-recovery
documentationcenter: 
author: nsoneji
manager: gauravd
editor: 
ms.assetid: 
ms.service: site-recovery
ms.workload: storage-backup-recovery
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 08/11/2017
ms.author: nisoneji
ms.openlocfilehash: 4ac79df703de00ac009d9845772d8be740e74f29
ms.sourcegitcommit: 50e23e8d3b1148ae2d36dad3167936b4e52c8a23
ms.translationtype: MT
ms.contentlocale: sv-SE
ms.lasthandoff: 08/18/2017
---
# <a name="replicate-a-multi-tier-iis-based-web-application-using-azure-site-recovery"></a><span data-ttu-id="62c89-103">Replikera en IIS-baserad webbtjänst flernivåapp med hjälp av Azure Site Recovery</span><span class="sxs-lookup"><span data-stu-id="62c89-103">Replicate a multi-tier IIS based web application using Azure Site Recovery</span></span>

## <a name="overview"></a><span data-ttu-id="62c89-104">Översikt</span><span class="sxs-lookup"><span data-stu-id="62c89-104">Overview</span></span>


<span data-ttu-id="62c89-105">Programvara är motorn av företagsproduktiviteten i en organisation.</span><span class="sxs-lookup"><span data-stu-id="62c89-105">Application software is the engine of business productivity in an organization.</span></span> <span data-ttu-id="62c89-106">Olika program kan ha olika syften i en organisation.</span><span class="sxs-lookup"><span data-stu-id="62c89-106">Various web applications can serve different purposes in an organization.</span></span> <span data-ttu-id="62c89-107">Vissa av dessa som löneuppgifter bearbetning, ekonomiprogram och kundinriktade webbplatser kan vara ytterst viktigt för organisationen.</span><span class="sxs-lookup"><span data-stu-id="62c89-107">Some of these like payroll processing, financial applications and customer facing websites can be utmost critical for an organization.</span></span> <span data-ttu-id="62c89-108">Ska det vara viktigt för organisationen för att låta och körs på alla gånger för att förhindra förlust av produktivitet och viktigare förhindra skador på varumärken avbildningen av organisationen.</span><span class="sxs-lookup"><span data-stu-id="62c89-108">It will be important for the organization to have them up and running at all times to prevent loss of productivity and more importantly prevent any damage to the brand image of the organization.</span></span>

<span data-ttu-id="62c89-109">Kritiska webbprogram anges vanligtvis som program på flera nivåer med webb-, databas och program på olika nivåer.</span><span class="sxs-lookup"><span data-stu-id="62c89-109">Critical web applications are typically set up as multi-tier applications with the web, database and application on different tiers.</span></span> <span data-ttu-id="62c89-110">Förutom att sprida över olika nivåer, kan programmen också använda flera servrar i varje nivå för att belastningsutjämna trafiken.</span><span class="sxs-lookup"><span data-stu-id="62c89-110">Apart from being spread across various tiers, the applications may also be using multiple servers in each tier to load balance the traffic.</span></span> <span data-ttu-id="62c89-111">Dessutom kan mappningar mellan olika nivåer och på webbservern vara baserad på statiska IP-adresser.</span><span class="sxs-lookup"><span data-stu-id="62c89-111">Moreover, the mappings between various tiers and on the web server may be based on static IP addresses.</span></span> <span data-ttu-id="62c89-112">Vid redundans måste vissa av dessa mappningar uppdateras, särskilt om du har flera webbplatser som är konfigurerade på webbservern.</span><span class="sxs-lookup"><span data-stu-id="62c89-112">On failover, some of these mappings will need to be updated, especially, if you have multiple websites configured on the web server.</span></span> <span data-ttu-id="62c89-113">Vid webbprogram med hjälp av SSL måste-certifikatbindningar uppdateras.</span><span class="sxs-lookup"><span data-stu-id="62c89-113">In case of web applications using SSL, certificate bindings will need to be updated.</span></span>

<span data-ttu-id="62c89-114">Traditionella icke-baserat replikeringsåterställning metoder innebär säkerhetskopiering för olika configuration-filer, registerinställningar, bindningar, anpassade komponenter (COM eller .NET), innehåll och även certifikat och återställer filerna via en uppsättning manuella steg.</span><span class="sxs-lookup"><span data-stu-id="62c89-114">Traditional non-replication based recovery methods involve backing up of various configuration files, registry settings, bindings, custom components (COM or .NET), content and also certificates and recovering the files through a set of manual steps.</span></span> <span data-ttu-id="62c89-115">Dessa tekniker är tydligt besvärlig fel felbenägna och inte skalbara.</span><span class="sxs-lookup"><span data-stu-id="62c89-115">These techniques are clearly cumbersome, error prone and not scalable.</span></span> <span data-ttu-id="62c89-116">Det är till exempel enkelt möjlig för du glömmer säkerhetskopiera certifikat och lämnas med inga val men köpa nya certifikat för servern efter växling vid fel.</span><span class="sxs-lookup"><span data-stu-id="62c89-116">It is, for example, easily possible for you to forget backing up certificates and be left with no choice but to buy new certificates for the server after failover.</span></span>

<span data-ttu-id="62c89-117">En bra lösning för haveriberedskap, ska tillåta modellering av återställningsplaner runt ovanstående programarkitekturer för komplexa och har också möjlighet att lägga till anpassade steg för att hantera mappning mellan olika nivåer som därför att tillhandahålla en enkel klickning att lösningen vid en katastrof som leder till en lägre Återställningstidsmål.</span><span class="sxs-lookup"><span data-stu-id="62c89-117">A good disaster recovery solution, should allow modeling of recovery plans around the above complex application architectures and also have the ability to add customized steps to handle application mappings between various tiers hence providing a single-click sure shot solution in the event of a disaster leading to a lower RTO.</span></span>


<span data-ttu-id="62c89-118">Den här artikeln beskriver hur du skyddar en IIS baserat webbprogram som använder en [Azure Site Recovery](site-recovery-overview.md).</span><span class="sxs-lookup"><span data-stu-id="62c89-118">This article describes how to protect an IIS based web application using a [Azure Site Recovery](site-recovery-overview.md).</span></span> <span data-ttu-id="62c89-119">Den här artikeln beskriver bästa praxis för att replikera en tre nivå IIS baserat webbprogram till Azure, hur du kan göra en katastrof återställningsgranskning och hur du kan redundansväxla programmet till Azure.</span><span class="sxs-lookup"><span data-stu-id="62c89-119">This article will cover best practices for replicating a three tier IIS based web application to Azure, how you can do a disaster recovery drill, and how you can failover the application to Azure.</span></span>


## <a name="prerequisites"></a><span data-ttu-id="62c89-120">Krav</span><span class="sxs-lookup"><span data-stu-id="62c89-120">Prerequisites</span></span>

<span data-ttu-id="62c89-121">Innan du börjar bör du kontrollera att du känna till följande:</span><span class="sxs-lookup"><span data-stu-id="62c89-121">Before you start, make sure you understand the following:</span></span>

1. [<span data-ttu-id="62c89-122">Replikera en virtuell dator till Azure</span><span class="sxs-lookup"><span data-stu-id="62c89-122">Replicating a virtual machine to Azure</span></span>](site-recovery-vmware-to-azure.md)
1. <span data-ttu-id="62c89-123">Så här [utforma ett nätverk för återställning](site-recovery-network-design.md)</span><span class="sxs-lookup"><span data-stu-id="62c89-123">How to [design a recovery network](site-recovery-network-design.md)</span></span>
1. [<span data-ttu-id="62c89-124">Gör ett redundanstest till Azure</span><span class="sxs-lookup"><span data-stu-id="62c89-124">Doing a test failover to Azure</span></span>](./site-recovery-test-failover-to-azure.md)
1. [<span data-ttu-id="62c89-125">Gör en redundansväxling till Azure</span><span class="sxs-lookup"><span data-stu-id="62c89-125">Doing a failover to Azure</span></span>](site-recovery-failover.md)
1. <span data-ttu-id="62c89-126">Så här [replikera en domänkontrollant](site-recovery-active-directory.md)</span><span class="sxs-lookup"><span data-stu-id="62c89-126">How to [replicate a domain controller](site-recovery-active-directory.md)</span></span>
1. <span data-ttu-id="62c89-127">Så här [replikera SQL Server](site-recovery-sql.md)</span><span class="sxs-lookup"><span data-stu-id="62c89-127">How to [replicate SQL Server](site-recovery-sql.md)</span></span>

## <a name="deployment-patterns"></a><span data-ttu-id="62c89-128">Mönster för distribution</span><span class="sxs-lookup"><span data-stu-id="62c89-128">Deployment patterns</span></span>
<span data-ttu-id="62c89-129">Ett IIS-baserade webbprogram följer vanligtvis något av följande distribution mönster:</span><span class="sxs-lookup"><span data-stu-id="62c89-129">An IIS based web application typically follows one of the following deployment patterns:</span></span>

<span data-ttu-id="62c89-130">** Distribution mönstret 1 ** ett IIS-baserade webbgrupp med programmet begär Routing(ARR), IIS-Server och Microsoft SQL Server.</span><span class="sxs-lookup"><span data-stu-id="62c89-130">**Deployment pattern 1 ** An IIS based web farm  with Application Request Routing(ARR), IIS Server and Microsoft SQL Server.</span></span>

![Mönster för distribution](./media/site-recovery-iis/deployment-pattern1.png)

<span data-ttu-id="62c89-132">**Distribution av mönstret 2** en IIS baserade webbservergrupp med programmet begär Routing(ARR), IIS-servern, programserver och Microsoft SQL Server.</span><span class="sxs-lookup"><span data-stu-id="62c89-132">**Deployment pattern 2** An IIS based web farm with Application Request Routing(ARR), IIS Server, Application Server, and Microsoft SQL Server.</span></span>


![Mönster för distribution](./media/site-recovery-iis/deployment-pattern2.png)

## <a name="site-recovery-support"></a><span data-ttu-id="62c89-134">Site Recovery-stöd</span><span class="sxs-lookup"><span data-stu-id="62c89-134">Site Recovery support</span></span>

<span data-ttu-id="62c89-135">För att skapa den här artikeln virtuella VMware-datorer med IIS-servern version 7.5 på Windows Server 2012 R2 Enterprise användes.</span><span class="sxs-lookup"><span data-stu-id="62c89-135">For the purpose of creating this article VMware virtual machines with IIS Server version 7.5 on Windows Server 2012 R2 Enterprise were used.</span></span> <span data-ttu-id="62c89-136">Site recovery replikering är oberoende av programmet, förväntas de rekommendationer som anges här för följande scenarier samt och för olika versioner av IIS.</span><span class="sxs-lookup"><span data-stu-id="62c89-136">As site recovery replication is application agnostic, the recommendations provided here are expected to hold on following scenarios as well and for different version of IIS.</span></span>

### <a name="source-and-target"></a><span data-ttu-id="62c89-137">Källa och mål</span><span class="sxs-lookup"><span data-stu-id="62c89-137">Source and target</span></span>

<span data-ttu-id="62c89-138">**Scenario**</span><span class="sxs-lookup"><span data-stu-id="62c89-138">**Scenario**</span></span> | <span data-ttu-id="62c89-139">**Till en sekundär plats**</span><span class="sxs-lookup"><span data-stu-id="62c89-139">**To a secondary site**</span></span> | <span data-ttu-id="62c89-140">**Till Azure**</span><span class="sxs-lookup"><span data-stu-id="62c89-140">**To Azure**</span></span>
--- | --- | ---
<span data-ttu-id="62c89-141">**Hyper-V**</span><span class="sxs-lookup"><span data-stu-id="62c89-141">**Hyper-V**</span></span> | <span data-ttu-id="62c89-142">Ja</span><span class="sxs-lookup"><span data-stu-id="62c89-142">Yes</span></span> | <span data-ttu-id="62c89-143">Ja</span><span class="sxs-lookup"><span data-stu-id="62c89-143">Yes</span></span>
<span data-ttu-id="62c89-144">**VMware**</span><span class="sxs-lookup"><span data-stu-id="62c89-144">**VMware**</span></span> | <span data-ttu-id="62c89-145">Ja</span><span class="sxs-lookup"><span data-stu-id="62c89-145">Yes</span></span> | <span data-ttu-id="62c89-146">Ja</span><span class="sxs-lookup"><span data-stu-id="62c89-146">Yes</span></span>
<span data-ttu-id="62c89-147">**Fysisk server**</span><span class="sxs-lookup"><span data-stu-id="62c89-147">**Physical server**</span></span> | <span data-ttu-id="62c89-148">Nej</span><span class="sxs-lookup"><span data-stu-id="62c89-148">No</span></span> | <span data-ttu-id="62c89-149">Ja</span><span class="sxs-lookup"><span data-stu-id="62c89-149">Yes</span></span>

## <a name="replicate-virtual-machines"></a><span data-ttu-id="62c89-150">Replikera virtuella datorer</span><span class="sxs-lookup"><span data-stu-id="62c89-150">Replicate virtual machines</span></span>

<span data-ttu-id="62c89-151">Följ [vägledningen](site-recovery-vmware-to-azure.md) att starta replikering av alla IIS web grupp virtuella datorer till Azure.</span><span class="sxs-lookup"><span data-stu-id="62c89-151">Follow [this guidance](site-recovery-vmware-to-azure.md) to start replicating all the IIS web farm virtual machines to Azure.</span></span>

<span data-ttu-id="62c89-152">Om du använder en statisk IP-adress och sedan ange IP-adress som du vill att den virtuella datorn i den [ **mål-IP** ](./site-recovery-replicate-vmware-to-azure.md#view-and-manage-vm-properties) i beräknings-och nätverksinställningar.</span><span class="sxs-lookup"><span data-stu-id="62c89-152">If you are using a static IP then specify the IP that you want the virtual machine to take in the [**Target IP**](./site-recovery-replicate-vmware-to-azure.md#view-and-manage-vm-properties) setting in Compute and Network settings.</span></span>

![Mål-IP](./media/site-recovery-active-directory/dns-target-ip.png)


## <a name="creating-a-recovery-plan"></a><span data-ttu-id="62c89-154">Skapa en återställningsplan</span><span class="sxs-lookup"><span data-stu-id="62c89-154">Creating a recovery plan</span></span>

<span data-ttu-id="62c89-155">En återställningsplan kan ordningsföljd för växling vid fel på olika nivåer i en flernivåapp, därför kan upprätthålla programkonsekvens.</span><span class="sxs-lookup"><span data-stu-id="62c89-155">A recovery plan allows sequencing the failover of various tiers in a multi-tier application, hence, maintaining application consistency.</span></span> <span data-ttu-id="62c89-156">Följ de nedanstående steg när du skapar en återställningsplan för ett webbprogram med flera nivåer.</span><span class="sxs-lookup"><span data-stu-id="62c89-156">Follow the below steps while creating a recovery plan for a multi-tier web application.</span></span>  <span data-ttu-id="62c89-157">[Lär dig mer om hur du skapar en återställningsplan](./site-recovery-create-recovery-plans.md).</span><span class="sxs-lookup"><span data-stu-id="62c89-157">[Learn more about creating a recovery plan](./site-recovery-create-recovery-plans.md).</span></span>

### <a name="adding-virtual-machines-to-failover-groups"></a><span data-ttu-id="62c89-158">Lägga till virtuella datorer till grupper för växling vid fel</span><span class="sxs-lookup"><span data-stu-id="62c89-158">Adding virtual machines to failover groups</span></span>
<span data-ttu-id="62c89-159">Ett typiskt flera nivåer IIS-webbprogram utgörs av en databasnivå med SQL virtuella datorer, webbnivå utgörs av en IIS-server och en program-nivå.</span><span class="sxs-lookup"><span data-stu-id="62c89-159">A typical multi-tier IIS web application will consist of a database tier with SQL virtual machines, the web tier constituted by a IIS server and an application tier.</span></span> <span data-ttu-id="62c89-160">Lägg till dessa virtuella datorer till annan grupp baserat på nivå som nedan.</span><span class="sxs-lookup"><span data-stu-id="62c89-160">Add all these virtual machines to different group based on tier as below.</span></span> <span data-ttu-id="62c89-161">[Mer information om att anpassa återställningsplan](site-recovery-runbook-automation.md#customize-the-recovery-plan).</span><span class="sxs-lookup"><span data-stu-id="62c89-161">[Learn more about customising recovery plan](site-recovery-runbook-automation.md#customize-the-recovery-plan).</span></span>

1. <span data-ttu-id="62c89-162">Skapa en återställningsplan.</span><span class="sxs-lookup"><span data-stu-id="62c89-162">Create a recovery plan.</span></span> <span data-ttu-id="62c89-163">Lägg till databas nivå virtuella datorer under grupp 1 för att säkerställa att de är avstängning senast och tas först.</span><span class="sxs-lookup"><span data-stu-id="62c89-163">Add the database tier virtual machines under Group 1 to ensure that they are shutdown last and brought up first.</span></span>

1. <span data-ttu-id="62c89-164">Lägg till program nivå virtuella datorer under Grupp2 så att de förs upp när databasnivån växa upp.</span><span class="sxs-lookup"><span data-stu-id="62c89-164">Add the application tier virtual machines under Group 2 such that they are brought up after the database tier has been brought up.</span></span>

1. <span data-ttu-id="62c89-165">Lägga till virtuella skiktdatorer web i grupp 3 så att de förs upp när programmet nivån växa upp.</span><span class="sxs-lookup"><span data-stu-id="62c89-165">Add the web tier virtual machines in Group 3 such that they are brought up after the application tier has been brought up.</span></span>

1. <span data-ttu-id="62c89-166">Lägg till belastningen belastningsutjämna virtuella datorer i gruppen 4 så att de förs upp efter webbnivån har trätt.</span><span class="sxs-lookup"><span data-stu-id="62c89-166">Add load balance virtual machines in Group 4 such that they are brought up after the web tier has been brought up.</span></span>


### <a name="adding-scripts-to-the-recovery-plan"></a><span data-ttu-id="62c89-167">Att lägga till skript återställningsplanen</span><span class="sxs-lookup"><span data-stu-id="62c89-167">Adding scripts to the recovery plan</span></span>
<span data-ttu-id="62c89-168">Du kan behöva göra vissa åtgärder på virtuella Azure-datorer efter redundans och testning redundansen för att se IIS web servergruppen funktionen korrekt.</span><span class="sxs-lookup"><span data-stu-id="62c89-168">You may need to do some operations on the Azure virtual machines post failover/Test failover to make IIS web farm function correctly.</span></span> <span data-ttu-id="62c89-169">Du kan automatisera efter redundansväxlingen som uppdaterar DNS-posten ändrar webbplatsbindning, ändra i anslutningssträngen genom att lägga till motsvarande skript i återställningsplanen som nedan.</span><span class="sxs-lookup"><span data-stu-id="62c89-169">You can automate the post failover operation like updating DNS entry, changing site binding, change  in connection string  by adding corresponding scripts in the recovery plan as below.</span></span> <span data-ttu-id="62c89-170">[Lär dig mer om att lägga till skript återställningsplan](./site-recovery-create-recovery-plans.md#add-scripts).</span><span class="sxs-lookup"><span data-stu-id="62c89-170">[Learn more about add script recovery plan](./site-recovery-create-recovery-plans.md#add-scripts).</span></span>

#### <a name="dns-update"></a><span data-ttu-id="62c89-171">DNS-uppdatering</span><span class="sxs-lookup"><span data-stu-id="62c89-171">DNS Update</span></span>
<span data-ttu-id="62c89-172">Om DNS-servern har konfigurerats för dynamisk DNS-uppdatering och virtuella datorer vanligtvis uppdatera DNS med den nya IP när de startar.</span><span class="sxs-lookup"><span data-stu-id="62c89-172">If the DNS is configured for dynamic DNS update then virtual machines usually update the DNS with the new IP once they start.</span></span> <span data-ttu-id="62c89-173">Om du vill lägga till ett explicit steg för att uppdatera DNS med den nya IP-adresser för virtuella datorer och lägger till detta [skript för att uppdatera IP-Adressen i DNS](https://aka.ms/asr-dns-update) som en post-åtgärd på recovery planeringsgrupper.</span><span class="sxs-lookup"><span data-stu-id="62c89-173">If you want to add an explicit step to update DNS with the new IPs of the virtual machines then add this [script to update IP in DNS](https://aka.ms/asr-dns-update) as a post action on recovery plan groups.</span></span>  

#### <a name="connection-string-in-an-applications-webconfig"></a><span data-ttu-id="62c89-174">Anslutningssträngen i web.config för ett program</span><span class="sxs-lookup"><span data-stu-id="62c89-174">Connection string in an application’s web.config</span></span>
<span data-ttu-id="62c89-175">Anslutningssträngen anger som webbplatsen kommunicerar med databasen.</span><span class="sxs-lookup"><span data-stu-id="62c89-175">The connection string specifies the database that the web site communicates with.</span></span>

<span data-ttu-id="62c89-176">Om anslutningssträngen har namnet på den virtuella datorn på databasen, inga ytterligare steg krävs efter växling vid fel och programmet kommer att kunna kommunicera automatiskt DB.</span><span class="sxs-lookup"><span data-stu-id="62c89-176">If the connection string carries the name of the database virtual machine, no further steps will be needed post failover and the application will be able to automatically communicate to the DB.</span></span> <span data-ttu-id="62c89-177">Även om IP-adressen för den virtuella datorn för databasen sparas krävs det inte för att uppdatera anslutningssträngen.</span><span class="sxs-lookup"><span data-stu-id="62c89-177">Also, if the IP address for the database virtual machine is retained, it will not be needed to update the connection string.</span></span> <span data-ttu-id="62c89-178">Om anslutningssträngen refererar till databasen virtuella datorer som använder en IP-adress, måste den vara uppdaterade efter växling vid fel.</span><span class="sxs-lookup"><span data-stu-id="62c89-178">If the connection string refers to the database virtual machine using an IP address, it will need to be updated post failover.</span></span> <span data-ttu-id="62c89-179">T.ex.</span><span class="sxs-lookup"><span data-stu-id="62c89-179">E.g.</span></span> <span data-ttu-id="62c89-180">den nedan sträng anslutningspunkter DB med IP-127.0.1.2</span><span class="sxs-lookup"><span data-stu-id="62c89-180">the below connection string points to the DB with IP 127.0.1.2</span></span>

        <?xml version="1.0" encoding="utf-8"?>
        <configuration>
        <connectionStrings>
        <add name="ConnStringDb1" connectionString="Data Source= 127.0.1.2\SqlExpress; Initial Catalog=TestDB1;Integrated Security=False;" />
        </connectionStrings>
        </configuration>

<span data-ttu-id="62c89-181">Du kan uppdatera anslutningssträngen i webbnivå genom att lägga till [skript för IIS-anslutning att uppdatera](https://aka.ms/asr-update-webtier-script-classic) efter grupp 3 i återställningsplanen.</span><span class="sxs-lookup"><span data-stu-id="62c89-181">You can update the connection string in web tier by adding [IIS connection update script](https://aka.ms/asr-update-webtier-script-classic) after Group 3 in the recovery plan.</span></span>

#### <a name="site-bindings-for-the-application"></a><span data-ttu-id="62c89-182">Bindningar för webbplats för programmet</span><span class="sxs-lookup"><span data-stu-id="62c89-182">Site bindings for the application</span></span>
<span data-ttu-id="62c89-183">Varje plats består av bindning information som innehåller typen av bindning, IP-adressen som IIS-servern lyssnar på begäranden för webbplatsen, portnumret och värdnamn för platsen.</span><span class="sxs-lookup"><span data-stu-id="62c89-183">Every site consists of binding information that includes the type of binding, the IP address at which the IIS server listens to the requests for the site, the port number and the host names for the site.</span></span> <span data-ttu-id="62c89-184">Vid tidpunkten för en växling vid fel, kan dessa bindningar måste uppdateras om det finns en ändring i IP-adress som är kopplade till.</span><span class="sxs-lookup"><span data-stu-id="62c89-184">At the time of a failover, these bindings might need to be updated if there is a change in the IP address associated with them.</span></span>

> [!NOTE]
>
> <span data-ttu-id="62c89-185">Om du har markerat 'alla otilldelade' för webbplatsbindning som i exemplet nedan, behöver du inte uppdatera den här bindningen efter redundansen.</span><span class="sxs-lookup"><span data-stu-id="62c89-185">If you have marked ‘all unassigned’ for the site binding as in the example below, you will not need to update this binding post failover.</span></span> <span data-ttu-id="62c89-186">Även om IP-adress som är kopplad till en plats inte ändras efter växling vid fel, webbplatsbindning behöver inte har uppdaterats (kvarhållning av IP-adress beror på nätverksarkitekturen och undernät som har tilldelats till de primära platsen och återställningsplatsen platserna och kan därför eller kanske inte är möjligt för din organisation.)</span><span class="sxs-lookup"><span data-stu-id="62c89-186">Also, if the IP address associated with a site is not changed post failover, the site binding need not be updated (Retention of the IP address depends on the network architecture and subnets assigned to the primary and recovery sites and hence may or may not be feasible for your organization.)</span></span>

![SSL-bindning](./media/site-recovery-iis/sslbinding.png)

<span data-ttu-id="62c89-188">Om IP-adressen har kopplats till en plats, måste du uppdatera alla bindningar för webbplats med den nya IP-adressen.</span><span class="sxs-lookup"><span data-stu-id="62c89-188">If you have associated the IP address with a site, you will need to update all site bindings with the new IP address.</span></span> <span data-ttu-id="62c89-189">Du kan lägga till [webbserver nivå uppdateringsskriptet](https://aka.ms/asr-web-tier-update-runbook-classic) efter grupp 3 i återställningsplan att ändra bindningarna för webbplatsen.</span><span class="sxs-lookup"><span data-stu-id="62c89-189">You can add [IIS Web tier update script](https://aka.ms/asr-web-tier-update-runbook-classic) after Group 3 in recovery plan to change the site bindings.</span></span>


#### <a name="update-load-balancer-ip-address"></a><span data-ttu-id="62c89-190">Uppdatera IP-adressen för belastningsutjämnaren</span><span class="sxs-lookup"><span data-stu-id="62c89-190">Update load balancer IP address</span></span>
<span data-ttu-id="62c89-191">Om du har routning av programbegäran virtuell dator, lägger du till [IIS ARR redundans skriptet](https://aka.ms/asr-iis-arrtier-failover-script-classic) efter grupp 4 att uppdatera IP-adressen.</span><span class="sxs-lookup"><span data-stu-id="62c89-191">If you have  Application Request Routing virtual machine, add [IIS ARR  failover script](https://aka.ms/asr-iis-arrtier-failover-script-classic) after Group 4 to update the IP address.</span></span>

#### <a name="the-ssl-cert-binding-for-an-https-connection"></a><span data-ttu-id="62c89-192">SSL-certifikat-bindning för en https-anslutning</span><span class="sxs-lookup"><span data-stu-id="62c89-192">The SSL cert binding for an https connection</span></span>
<span data-ttu-id="62c89-193">Webbplatser kan ha ett associerat SSL-certifikat som hjälper till att säkerställa en säker kommunikation mellan webbserver och användarens webbläsare.</span><span class="sxs-lookup"><span data-stu-id="62c89-193">Websites can have an associated SSL certificate that helps in ensuring a secure communication between the webserver and the user’s browser.</span></span> <span data-ttu-id="62c89-194">Om webbplatsen har en https-anslutning och en tillhörande https webbplatsbindning IP-adressen för IIS-servern med en SSL-certifikat-bindning, måste en ny bindning för webbplats som ska läggas till efter certifikat med IP-adress för IIS virtuella datorn efter redundans.</span><span class="sxs-lookup"><span data-stu-id="62c89-194">If the website has an https connection and an associated https site binding to the IP address of the IIS server with an SSL cert binding, a new site binding will need to be added for the cert with the IP of the IIS virtual machine post failover.</span></span>

<span data-ttu-id="62c89-195">SSL-certifikat kan utfärdas mot-</span><span class="sxs-lookup"><span data-stu-id="62c89-195">The SSL cert can be issued against-</span></span>

<span data-ttu-id="62c89-196">a) det fullständigt kvalificerade domännamnet för webbplatsen</span><span class="sxs-lookup"><span data-stu-id="62c89-196">a) The fully qualified domain name of the website</span></span><br>
<span data-ttu-id="62c89-197">b) namnet på servern</span><span class="sxs-lookup"><span data-stu-id="62c89-197">b) The name of the server</span></span><br>
<span data-ttu-id="62c89-198">c) ett jokerteckencertifikat för domännamnet</span><span class="sxs-lookup"><span data-stu-id="62c89-198">c) A wildcard certificate for the domain name</span></span><br>
<span data-ttu-id="62c89-199">d) en IP-adress – om SSL-certifikat utfärdas mot IP-Adressen för IIS-server, en annan SSL-certifikat måste utfärdas mot IP-adressen för IIS-servern på Azure-webbplatsen och en ytterligare SSL-bindning för det här certifikatet måste skapas.</span><span class="sxs-lookup"><span data-stu-id="62c89-199">d) An IP address – If the SSL cert is issued against the IP of the IIS server, another SSL cert needs to be issued against the IP address of the IIS server on the Azure site and an additional SSL binding for this certificate will need to be created.</span></span> <span data-ttu-id="62c89-200">Därför rekommenderas att inte använda ett SSL-certifikat som utfärdats för IP.</span><span class="sxs-lookup"><span data-stu-id="62c89-200">Hence, it is advisable to not use an SSL cert issued against IP.</span></span> <span data-ttu-id="62c89-201">Detta är ett alternativ för mindre vanliga och snart kommer att inaktualiseras enligt nya CA/webbläsare forum ändringar.</span><span class="sxs-lookup"><span data-stu-id="62c89-201">This is a less widely used option and will soon be deprecated as per new CA/browser forum changes.</span></span>

#### <a name="update-the-dependency-between-the-web-and-the-application-tier"></a><span data-ttu-id="62c89-202">Uppdatera beroende mellan webbservern och program-nivå</span><span class="sxs-lookup"><span data-stu-id="62c89-202">Update the dependency between the web and the application tier</span></span>
<span data-ttu-id="62c89-203">Om du har ett specifikt tillämpningsprogramberoende baserat på IP-adressen för de virtuella datorerna som du behöver uppdatera den här beroende efter redundansen.</span><span class="sxs-lookup"><span data-stu-id="62c89-203">If you have an application specific dependency based on the IP address of the virtual machines, you need to update this dependency post failover.</span></span>

## <a name="doing-a-test-failover"></a><span data-ttu-id="62c89-204">Gör ett redundanstest</span><span class="sxs-lookup"><span data-stu-id="62c89-204">Doing a test failover</span></span>
<span data-ttu-id="62c89-205">Följ [vägledningen](site-recovery-test-failover-to-azure.md) att göra ett redundanstest.</span><span class="sxs-lookup"><span data-stu-id="62c89-205">Follow [this guidance](site-recovery-test-failover-to-azure.md) to do a test failover.</span></span>

1.  <span data-ttu-id="62c89-206">Gå till Azure-portalen och välj Recovery-tjänsten-valvet.</span><span class="sxs-lookup"><span data-stu-id="62c89-206">Go to Azure portal and select your Recovery Service vault.</span></span>
1.  <span data-ttu-id="62c89-207">Klicka på återställningsplan som skapats för IIS-webbservergrupp.</span><span class="sxs-lookup"><span data-stu-id="62c89-207">Click on the recovery plan created for IIS web farm.</span></span>
1.  <span data-ttu-id="62c89-208">Klicka på Testa redundans.</span><span class="sxs-lookup"><span data-stu-id="62c89-208">Click on 'Test Failover'.</span></span>
1.  <span data-ttu-id="62c89-209">Välj återställningspunkten och Azure-nätverk för att starta processen testa redundans.</span><span class="sxs-lookup"><span data-stu-id="62c89-209">Select recovery point and Azure virtual network to start the test failover process.</span></span>
1.  <span data-ttu-id="62c89-210">Du kan utföra dina verifieringar när den sekundära miljön är upp.</span><span class="sxs-lookup"><span data-stu-id="62c89-210">Once the secondary environment is up, you can perform your validations.</span></span>
1.  <span data-ttu-id="62c89-211">När validering har slutförts, kan du välja verifieringar slutföra och redundanstestmiljön kommer att rensas.</span><span class="sxs-lookup"><span data-stu-id="62c89-211">Once the validations are complete, you can select ‘Validations complete’ and the test failover environment will be cleaned.</span></span>

## <a name="doing-a-failover"></a><span data-ttu-id="62c89-212">Genomför en redundansväxling enligt</span><span class="sxs-lookup"><span data-stu-id="62c89-212">Doing a failover</span></span>
<span data-ttu-id="62c89-213">Följ [vägledningen](site-recovery-failover.md) när du gör en redundansväxling.</span><span class="sxs-lookup"><span data-stu-id="62c89-213">Follow [this guidance](site-recovery-failover.md) when you are doing a failover.</span></span>

1.  <span data-ttu-id="62c89-214">Gå till Azure-portalen och välj Recovery-tjänsten-valvet.</span><span class="sxs-lookup"><span data-stu-id="62c89-214">Go to Azure portal and select your Recovery Service vault.</span></span>
1.  <span data-ttu-id="62c89-215">Klicka på återställningsplan som skapats för IIS-webbservergrupp.</span><span class="sxs-lookup"><span data-stu-id="62c89-215">Click on the recovery plan created for IIS web farm.</span></span>
1.  <span data-ttu-id="62c89-216">Klicka på 'Redundans'.</span><span class="sxs-lookup"><span data-stu-id="62c89-216">Click on 'Failover'.</span></span>
1.  <span data-ttu-id="62c89-217">Välj återställningspunkt för att starta processen för växling vid fel.</span><span class="sxs-lookup"><span data-stu-id="62c89-217">Select recovery point to start the failover process.</span></span>

## <a name="next-steps"></a><span data-ttu-id="62c89-218">Nästa steg</span><span class="sxs-lookup"><span data-stu-id="62c89-218">Next steps</span></span>
<span data-ttu-id="62c89-219">Du kan lära dig mer om [replikera andra program](site-recovery-workload.md) med Site Recovery.</span><span class="sxs-lookup"><span data-stu-id="62c89-219">You can learn more about [replicate other applications](site-recovery-workload.md) using Site Recovery.</span></span>

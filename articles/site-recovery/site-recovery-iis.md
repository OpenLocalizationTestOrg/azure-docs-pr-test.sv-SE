---
title: "aaaReplicate en flera nivåer IIS baserade webbapp med Azure Site Recovery | Microsoft Docs"
description: "Den här artikeln beskriver hur tooreplicate IIS web grupp virtuella datorer med Azure Site Recovery."
services: site-recovery
documentationcenter: 
author: nsoneji
manager: gauravd
editor: 
ms.assetid: 
ms.service: site-recovery
ms.workload: storage-backup-recovery
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 08/11/2017
ms.author: nisoneji
ms.openlocfilehash: 1974265b3cb05f6dc57049876306d2e08424bb97
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: sv-SE
ms.lasthandoff: 10/06/2017
---
# <a name="replicate-a-multi-tier-iis-based-web-application-using-azure-site-recovery"></a><span data-ttu-id="11a45-103">Replikera en IIS-baserad webbtjänst flernivåapp med hjälp av Azure Site Recovery</span><span class="sxs-lookup"><span data-stu-id="11a45-103">Replicate a multi-tier IIS based web application using Azure Site Recovery</span></span>

## <a name="overview"></a><span data-ttu-id="11a45-104">Översikt</span><span class="sxs-lookup"><span data-stu-id="11a45-104">Overview</span></span>


<span data-ttu-id="11a45-105">Programvara är hello motor för företagsproduktiviteten i en organisation.</span><span class="sxs-lookup"><span data-stu-id="11a45-105">Application software is hello engine of business productivity in an organization.</span></span> <span data-ttu-id="11a45-106">Olika program kan ha olika syften i en organisation.</span><span class="sxs-lookup"><span data-stu-id="11a45-106">Various web applications can serve different purposes in an organization.</span></span> <span data-ttu-id="11a45-107">Vissa av dessa som löneuppgifter bearbetning, ekonomiprogram och kundinriktade webbplatser kan vara ytterst viktigt för organisationen.</span><span class="sxs-lookup"><span data-stu-id="11a45-107">Some of these like payroll processing, financial applications and customer facing websites can be utmost critical for an organization.</span></span> <span data-ttu-id="11a45-108">Ska det vara viktigt för organisationen hello toohave dem upp och körs vid alla tidpunkter tooprevent förlust av produktivitet och mer förhindra allt eventuella skador toohello varumärken bild av hello organisation.</span><span class="sxs-lookup"><span data-stu-id="11a45-108">It will be important for hello organization toohave them up and running at all times tooprevent loss of productivity and more importantly prevent any damage toohello brand image of hello organization.</span></span>

<span data-ttu-id="11a45-109">Kritiska webbprogram anges vanligtvis som program på flera nivåer med hello webb-, databas och program på olika nivåer.</span><span class="sxs-lookup"><span data-stu-id="11a45-109">Critical web applications are typically set up as multi-tier applications with hello web, database and application on different tiers.</span></span> <span data-ttu-id="11a45-110">Förutom att sprida över olika nivåer, kan hello program också använda flera servrar i varje nivå tooload Utjämna hello-trafiken.</span><span class="sxs-lookup"><span data-stu-id="11a45-110">Apart from being spread across various tiers, hello applications may also be using multiple servers in each tier tooload balance hello traffic.</span></span> <span data-ttu-id="11a45-111">Dessutom kan hello mappningar mellan olika nivåer och på hello webbservern vara baserad på statiska IP-adresser.</span><span class="sxs-lookup"><span data-stu-id="11a45-111">Moreover, hello mappings between various tiers and on hello web server may be based on static IP addresses.</span></span> <span data-ttu-id="11a45-112">På redundanskluster måste vissa av dessa mappningar toobe uppdateras, särskilt om du har flera webbplatser som är konfigurerade på hello webbserver.</span><span class="sxs-lookup"><span data-stu-id="11a45-112">On failover, some of these mappings will need toobe updated, especially, if you have multiple websites configured on hello web server.</span></span> <span data-ttu-id="11a45-113">Vid webbprogram med hjälp av SSL måste-certifikatbindningar toobe uppdateras.</span><span class="sxs-lookup"><span data-stu-id="11a45-113">In case of web applications using SSL, certificate bindings will need toobe updated.</span></span>

<span data-ttu-id="11a45-114">Traditionella icke-baserat replikeringsåterställning metoder innebär säkerhetskopiering för olika configuration-filer, registerinställningar, bindningar, anpassade komponenter (COM eller .NET), innehåll och även certifikat och återställs hello filer via en uppsättning manuella steg.</span><span class="sxs-lookup"><span data-stu-id="11a45-114">Traditional non-replication based recovery methods involve backing up of various configuration files, registry settings, bindings, custom components (COM or .NET), content and also certificates and recovering hello files through a set of manual steps.</span></span> <span data-ttu-id="11a45-115">Dessa tekniker är tydligt besvärlig fel felbenägna och inte skalbara.</span><span class="sxs-lookup"><span data-stu-id="11a45-115">These techniques are clearly cumbersome, error prone and not scalable.</span></span> <span data-ttu-id="11a45-116">Det är till exempel enkelt möjlig för tooforget säkerhetskopiera certifikat och lämnas nya certifikat för hello server med inga val men toobuy efter växling vid fel.</span><span class="sxs-lookup"><span data-stu-id="11a45-116">It is, for example, easily possible for you tooforget backing up certificates and be left with no choice but toobuy new certificates for hello server after failover.</span></span>

<span data-ttu-id="11a45-117">En bra lösning för haveriberedskap, ska tillåta modellering av återställningsplaner runt hello ovan programarkitekturer för komplexa och har även hello möjlighet tooadd anpassade steg toohandle mappning mellan olika nivåer därför att tillhandahålla en enkelklickning att som lösning för en katastrofåterställning inledande tooa händelsen hello lägre Återställningstidsmål.</span><span class="sxs-lookup"><span data-stu-id="11a45-117">A good disaster recovery solution, should allow modeling of recovery plans around hello above complex application architectures and also have hello ability tooadd customized steps toohandle application mappings between various tiers hence providing a single-click sure shot solution in hello event of a disaster leading tooa lower RTO.</span></span>


<span data-ttu-id="11a45-118">Den här artikeln beskriver hur tooprotect en IIS baserade webbprogram som använder en [Azure Site Recovery](site-recovery-overview.md).</span><span class="sxs-lookup"><span data-stu-id="11a45-118">This article describes how tooprotect an IIS based web application using a [Azure Site Recovery](site-recovery-overview.md).</span></span> <span data-ttu-id="11a45-119">Den här artikeln beskriver bästa praxis för att replikera en tre nivå IIS baserat web application tooAzure, hur du kan göra en katastrof återställningsgranskning och hur du kan redundans hello programmet tooAzure.</span><span class="sxs-lookup"><span data-stu-id="11a45-119">This article will cover best practices for replicating a three tier IIS based web application tooAzure, how you can do a disaster recovery drill, and how you can failover hello application tooAzure.</span></span>


## <a name="prerequisites"></a><span data-ttu-id="11a45-120">Krav</span><span class="sxs-lookup"><span data-stu-id="11a45-120">Prerequisites</span></span>

<span data-ttu-id="11a45-121">Innan du börjar, kontrollera att du förstår hello följande:</span><span class="sxs-lookup"><span data-stu-id="11a45-121">Before you start, make sure you understand hello following:</span></span>

1. [<span data-ttu-id="11a45-122">Replikera en virtuell dator tooAzure</span><span class="sxs-lookup"><span data-stu-id="11a45-122">Replicating a virtual machine tooAzure</span></span>](site-recovery-vmware-to-azure.md)
1. <span data-ttu-id="11a45-123">Hur för[utforma ett nätverk för återställning](site-recovery-network-design.md)</span><span class="sxs-lookup"><span data-stu-id="11a45-123">How too[design a recovery network](site-recovery-network-design.md)</span></span>
1. [<span data-ttu-id="11a45-124">Gör en testa redundans tooAzure</span><span class="sxs-lookup"><span data-stu-id="11a45-124">Doing a test failover tooAzure</span></span>](./site-recovery-test-failover-to-azure.md)
1. [<span data-ttu-id="11a45-125">Gör en tooAzure för växling vid fel</span><span class="sxs-lookup"><span data-stu-id="11a45-125">Doing a failover tooAzure</span></span>](site-recovery-failover.md)
1. <span data-ttu-id="11a45-126">Hur för[replikera en domänkontrollant](site-recovery-active-directory.md)</span><span class="sxs-lookup"><span data-stu-id="11a45-126">How too[replicate a domain controller](site-recovery-active-directory.md)</span></span>
1. <span data-ttu-id="11a45-127">Hur för[replikera SQL Server](site-recovery-sql.md)</span><span class="sxs-lookup"><span data-stu-id="11a45-127">How too[replicate SQL Server](site-recovery-sql.md)</span></span>

## <a name="deployment-patterns"></a><span data-ttu-id="11a45-128">Mönster för distribution</span><span class="sxs-lookup"><span data-stu-id="11a45-128">Deployment patterns</span></span>
<span data-ttu-id="11a45-129">Ett IIS-baserade webbprogram följer vanligtvis en hello efter distributionen mönster:</span><span class="sxs-lookup"><span data-stu-id="11a45-129">An IIS based web application typically follows one of hello following deployment patterns:</span></span>

<span data-ttu-id="11a45-130">** Distribution mönstret 1 ** ett IIS-baserade webbgrupp med programmet begär Routing(ARR), IIS-Server och Microsoft SQL Server.</span><span class="sxs-lookup"><span data-stu-id="11a45-130">**Deployment pattern 1 ** An IIS based web farm  with Application Request Routing(ARR), IIS Server and Microsoft SQL Server.</span></span>

![Mönster för distribution](./media/site-recovery-iis/deployment-pattern1.png)

<span data-ttu-id="11a45-132">**Distribution av mönstret 2** en IIS baserade webbservergrupp med programmet begär Routing(ARR), IIS-servern, programserver och Microsoft SQL Server.</span><span class="sxs-lookup"><span data-stu-id="11a45-132">**Deployment pattern 2** An IIS based web farm with Application Request Routing(ARR), IIS Server, Application Server, and Microsoft SQL Server.</span></span>


![Mönster för distribution](./media/site-recovery-iis/deployment-pattern2.png)

## <a name="site-recovery-support"></a><span data-ttu-id="11a45-134">Site Recovery-stöd</span><span class="sxs-lookup"><span data-stu-id="11a45-134">Site Recovery support</span></span>

<span data-ttu-id="11a45-135">För hello syftet med att skapa den här artikeln virtuella VMware-datorer med IIS-servern version 7.5 på Windows Server 2012 R2 Enterprise användes.</span><span class="sxs-lookup"><span data-stu-id="11a45-135">For hello purpose of creating this article VMware virtual machines with IIS Server version 7.5 on Windows Server 2012 R2 Enterprise were used.</span></span> <span data-ttu-id="11a45-136">Eftersom site recovery replikering oberoende av programmet hello rekommendationer som anges här förväntade toohold på följande scenarier samt och för olika versioner av IIS.</span><span class="sxs-lookup"><span data-stu-id="11a45-136">As site recovery replication is application agnostic, hello recommendations provided here are expected toohold on following scenarios as well and for different version of IIS.</span></span>

### <a name="source-and-target"></a><span data-ttu-id="11a45-137">Källa och mål</span><span class="sxs-lookup"><span data-stu-id="11a45-137">Source and target</span></span>

<span data-ttu-id="11a45-138">**Scenario**</span><span class="sxs-lookup"><span data-stu-id="11a45-138">**Scenario**</span></span> | <span data-ttu-id="11a45-139">**tooa sekundär plats**</span><span class="sxs-lookup"><span data-stu-id="11a45-139">**tooa secondary site**</span></span> | <span data-ttu-id="11a45-140">**tooAzure**</span><span class="sxs-lookup"><span data-stu-id="11a45-140">**tooAzure**</span></span>
--- | --- | ---
<span data-ttu-id="11a45-141">**Hyper-V**</span><span class="sxs-lookup"><span data-stu-id="11a45-141">**Hyper-V**</span></span> | <span data-ttu-id="11a45-142">Ja</span><span class="sxs-lookup"><span data-stu-id="11a45-142">Yes</span></span> | <span data-ttu-id="11a45-143">Ja</span><span class="sxs-lookup"><span data-stu-id="11a45-143">Yes</span></span>
<span data-ttu-id="11a45-144">**VMware**</span><span class="sxs-lookup"><span data-stu-id="11a45-144">**VMware**</span></span> | <span data-ttu-id="11a45-145">Ja</span><span class="sxs-lookup"><span data-stu-id="11a45-145">Yes</span></span> | <span data-ttu-id="11a45-146">Ja</span><span class="sxs-lookup"><span data-stu-id="11a45-146">Yes</span></span>
<span data-ttu-id="11a45-147">**Fysisk server**</span><span class="sxs-lookup"><span data-stu-id="11a45-147">**Physical server**</span></span> | <span data-ttu-id="11a45-148">Nej</span><span class="sxs-lookup"><span data-stu-id="11a45-148">No</span></span> | <span data-ttu-id="11a45-149">Ja</span><span class="sxs-lookup"><span data-stu-id="11a45-149">Yes</span></span>

## <a name="replicate-virtual-machines"></a><span data-ttu-id="11a45-150">Replikera virtuella datorer</span><span class="sxs-lookup"><span data-stu-id="11a45-150">Replicate virtual machines</span></span>

<span data-ttu-id="11a45-151">Följ [vägledningen](site-recovery-vmware-to-azure.md) toostart replikerar alla hello IIS web grupp virtuella datorer tooAzure.</span><span class="sxs-lookup"><span data-stu-id="11a45-151">Follow [this guidance](site-recovery-vmware-to-azure.md) toostart replicating all hello IIS web farm virtual machines tooAzure.</span></span>

<span data-ttu-id="11a45-152">Om du använder en statisk IP-adress och sedan ange hello IP-adress som du vill hello virtuella tootake i hello [ **mål-IP** ](./site-recovery-replicate-vmware-to-azure.md#view-and-manage-vm-properties) i beräknings-och nätverksinställningar.</span><span class="sxs-lookup"><span data-stu-id="11a45-152">If you are using a static IP then specify hello IP that you want hello virtual machine tootake in hello [**Target IP**](./site-recovery-replicate-vmware-to-azure.md#view-and-manage-vm-properties) setting in Compute and Network settings.</span></span>

![Mål-IP](./media/site-recovery-active-directory/dns-target-ip.png)


## <a name="creating-a-recovery-plan"></a><span data-ttu-id="11a45-154">Skapa en återställningsplan</span><span class="sxs-lookup"><span data-stu-id="11a45-154">Creating a recovery plan</span></span>

<span data-ttu-id="11a45-155">En återställningsplan kan ordningsföljd hello växling vid fel på olika nivåer i en flernivåapp, därför kan upprätthålla programkonsekvens.</span><span class="sxs-lookup"><span data-stu-id="11a45-155">A recovery plan allows sequencing hello failover of various tiers in a multi-tier application, hence, maintaining application consistency.</span></span> <span data-ttu-id="11a45-156">Följ hello nedanstående steg när du skapar en återställningsplan för ett webbprogram med flera nivåer.</span><span class="sxs-lookup"><span data-stu-id="11a45-156">Follow hello below steps while creating a recovery plan for a multi-tier web application.</span></span>  <span data-ttu-id="11a45-157">[Lär dig mer om hur du skapar en återställningsplan](./site-recovery-create-recovery-plans.md).</span><span class="sxs-lookup"><span data-stu-id="11a45-157">[Learn more about creating a recovery plan](./site-recovery-create-recovery-plans.md).</span></span>

### <a name="adding-virtual-machines-toofailover-groups"></a><span data-ttu-id="11a45-158">Lägga till virtuella datorer toofailover grupper</span><span class="sxs-lookup"><span data-stu-id="11a45-158">Adding virtual machines toofailover groups</span></span>
<span data-ttu-id="11a45-159">Ett typiskt flera nivåer IIS-webbprogram utgörs av en databasnivå med SQL virtuella datorer, hello webbnivå utgörs av en IIS-server och en program-nivå.</span><span class="sxs-lookup"><span data-stu-id="11a45-159">A typical multi-tier IIS web application will consist of a database tier with SQL virtual machines, hello web tier constituted by a IIS server and an application tier.</span></span> <span data-ttu-id="11a45-160">Lägg till alla dessa virtuella datorer toodifferent-grupp baserat på nivå som nedan.</span><span class="sxs-lookup"><span data-stu-id="11a45-160">Add all these virtual machines toodifferent group based on tier as below.</span></span> <span data-ttu-id="11a45-161">[Mer information om att anpassa återställningsplan](site-recovery-runbook-automation.md#customize-the-recovery-plan).</span><span class="sxs-lookup"><span data-stu-id="11a45-161">[Learn more about customising recovery plan](site-recovery-runbook-automation.md#customize-the-recovery-plan).</span></span>

1. <span data-ttu-id="11a45-162">Skapa en återställningsplan.</span><span class="sxs-lookup"><span data-stu-id="11a45-162">Create a recovery plan.</span></span> <span data-ttu-id="11a45-163">Lägg till hello databasen virtuella skiktdatorer under grupp 1 tooensure att de är avstängning senast och tas först.</span><span class="sxs-lookup"><span data-stu-id="11a45-163">Add hello database tier virtual machines under Group 1 tooensure that they are shutdown last and brought up first.</span></span>

1. <span data-ttu-id="11a45-164">Lägg till programmet hello nivå virtuella datorer under Grupp2 så att de förs upp efter hello databasnivå har trätt.</span><span class="sxs-lookup"><span data-stu-id="11a45-164">Add hello application tier virtual machines under Group 2 such that they are brought up after hello database tier has been brought up.</span></span>

1. <span data-ttu-id="11a45-165">Lägg till hello web nivå virtuella datorer i gruppen 3 så att de förs upp efter hello programmet nivå har trätt.</span><span class="sxs-lookup"><span data-stu-id="11a45-165">Add hello web tier virtual machines in Group 3 such that they are brought up after hello application tier has been brought up.</span></span>

1. <span data-ttu-id="11a45-166">Lägg till belastningen belastningsutjämna virtuella datorer i gruppen 4 så att de förs upp efter hello webbnivå har trätt.</span><span class="sxs-lookup"><span data-stu-id="11a45-166">Add load balance virtual machines in Group 4 such that they are brought up after hello web tier has been brought up.</span></span>


### <a name="adding-scripts-toohello-recovery-plan"></a><span data-ttu-id="11a45-167">Lägga till skript toohello återställningsplan</span><span class="sxs-lookup"><span data-stu-id="11a45-167">Adding scripts toohello recovery plan</span></span>
<span data-ttu-id="11a45-168">Du kan behöva toodo vissa åtgärder på hello Azure virtuella datorer efter redundans och testning redundans toomake IIS web servergruppen funktionen korrekt.</span><span class="sxs-lookup"><span data-stu-id="11a45-168">You may need toodo some operations on hello Azure virtual machines post failover/Test failover toomake IIS web farm function correctly.</span></span> <span data-ttu-id="11a45-169">Du kan automatisera hello post Redundansåtgärden som uppdaterar DNS-posten ändrar webbplatsbindning, ändra i anslutningssträngen genom att lägga till motsvarande skript i hello återställningsplan enligt nedan.</span><span class="sxs-lookup"><span data-stu-id="11a45-169">You can automate hello post failover operation like updating DNS entry, changing site binding, change  in connection string  by adding corresponding scripts in hello recovery plan as below.</span></span> <span data-ttu-id="11a45-170">[Lär dig mer om att lägga till skript återställningsplan](./site-recovery-create-recovery-plans.md#add-scripts).</span><span class="sxs-lookup"><span data-stu-id="11a45-170">[Learn more about add script recovery plan](./site-recovery-create-recovery-plans.md#add-scripts).</span></span>

#### <a name="dns-update"></a><span data-ttu-id="11a45-171">DNS-uppdatering</span><span class="sxs-lookup"><span data-stu-id="11a45-171">DNS Update</span></span>
<span data-ttu-id="11a45-172">Om hello DNS har konfigurerats för dynamisk DNS-uppdatering och virtuella datorer vanligtvis uppdatera hello DNS med nya IP-hello när de startar.</span><span class="sxs-lookup"><span data-stu-id="11a45-172">If hello DNS is configured for dynamic DNS update then virtual machines usually update hello DNS with hello new IP once they start.</span></span> <span data-ttu-id="11a45-173">Om du vill tooadd explicit steg-tooupdate DNS med hello nya IP-adresser hello virtuella datorer lägger du till detta [skript tooupdate IP-Adressen i DNS-](https://aka.ms/asr-dns-update) som en post-åtgärd på recovery planeringsgrupper.</span><span class="sxs-lookup"><span data-stu-id="11a45-173">If you want tooadd an explicit step tooupdate DNS with hello new IPs of hello virtual machines then add this [script tooupdate IP in DNS](https://aka.ms/asr-dns-update) as a post action on recovery plan groups.</span></span>  

#### <a name="connection-string-in-an-applications-webconfig"></a><span data-ttu-id="11a45-174">Anslutningssträngen i web.config för ett program</span><span class="sxs-lookup"><span data-stu-id="11a45-174">Connection string in an application’s web.config</span></span>
<span data-ttu-id="11a45-175">hello anslutningssträngen anger hello-databas som hello webbplats kommunicerar med.</span><span class="sxs-lookup"><span data-stu-id="11a45-175">hello connection string specifies hello database that hello web site communicates with.</span></span>

<span data-ttu-id="11a45-176">Om hello-anslutningssträngen innehåller hello hello databasen virtuella datorns namn, inga ytterligare steg krävs efter växling vid fel och hello programmet ska kunna kommunicera tooautomatically toohello DB.</span><span class="sxs-lookup"><span data-stu-id="11a45-176">If hello connection string carries hello name of hello database virtual machine, no further steps will be needed post failover and hello application will be able tooautomatically communicate toohello DB.</span></span> <span data-ttu-id="11a45-177">Även om hello IP-adress för hello databasen virtuella datorn sparas den inte behövs tooupdate hello anslutningssträngen.</span><span class="sxs-lookup"><span data-stu-id="11a45-177">Also, if hello IP address for hello database virtual machine is retained, it will not be needed tooupdate hello connection string.</span></span> <span data-ttu-id="11a45-178">Om hello anslutningssträngen refererar toohello databasen virtuell dator med en IP-adress, måste toobe uppdateras efter växling vid fel.</span><span class="sxs-lookup"><span data-stu-id="11a45-178">If hello connection string refers toohello database virtual machine using an IP address, it will need toobe updated post failover.</span></span> <span data-ttu-id="11a45-179">T.ex.</span><span class="sxs-lookup"><span data-stu-id="11a45-179">E.g.</span></span> <span data-ttu-id="11a45-180">hello nedan anslutningssträngen pekar toohello DB med IP-127.0.1.2</span><span class="sxs-lookup"><span data-stu-id="11a45-180">hello below connection string points toohello DB with IP 127.0.1.2</span></span>

        <?xml version="1.0" encoding="utf-8"?>
        <configuration>
        <connectionStrings>
        <add name="ConnStringDb1" connectionString="Data Source= 127.0.1.2\SqlExpress; Initial Catalog=TestDB1;Integrated Security=False;" />
        </connectionStrings>
        </configuration>

<span data-ttu-id="11a45-181">Du kan uppdatera hello anslutningssträngen i webbnivå genom att lägga till [skript för IIS-anslutning att uppdatera](https://aka.ms/asr-update-webtier-script-classic) efter grupp 3 i hello återställningsplan.</span><span class="sxs-lookup"><span data-stu-id="11a45-181">You can update hello connection string in web tier by adding [IIS connection update script](https://aka.ms/asr-update-webtier-script-classic) after Group 3 in hello recovery plan.</span></span>

#### <a name="site-bindings-for-hello-application"></a><span data-ttu-id="11a45-182">Bindningar för webbplats för hello program</span><span class="sxs-lookup"><span data-stu-id="11a45-182">Site bindings for hello application</span></span>
<span data-ttu-id="11a45-183">Varje plats består av bindning information som innehåller hello typ av bindning, hello IP-adress på vilken hello IIS-servern lyssnar toohello begäranden för hello plats, hello portnummer och hello värdnamn för hello plats.</span><span class="sxs-lookup"><span data-stu-id="11a45-183">Every site consists of binding information that includes hello type of binding, hello IP address at which hello IIS server listens toohello requests for hello site, hello port number and hello host names for hello site.</span></span> <span data-ttu-id="11a45-184">När hello en växling vid fel måste dessa bindningar kanske toobe uppdateras om det finns en ändring i hello IP-adress som är kopplade till dem.</span><span class="sxs-lookup"><span data-stu-id="11a45-184">At hello time of a failover, these bindings might need toobe updated if there is a change in hello IP address associated with them.</span></span>

> [!NOTE]
>
> <span data-ttu-id="11a45-185">Om du har markerat 'alla otilldelade' för hello webbplatsbindning som hello exemplet nedan kan behöver du inte tooupdate denna bindning efter växling vid fel.</span><span class="sxs-lookup"><span data-stu-id="11a45-185">If you have marked ‘all unassigned’ for hello site binding as in hello example below, you will not need tooupdate this binding post failover.</span></span> <span data-ttu-id="11a45-186">Även om hello IP-adress som är kopplad till en plats inte ändras efter växling vid fel, hello webbplatsbindning behöver inte har uppdaterats (kvarhållning av hello IP-adress beror på hello nätverksarkitektur och undernät tilldelas toohello primära platsen och återställningsplatsen och därför kan eller inte vara möjligt för din organisation.)</span><span class="sxs-lookup"><span data-stu-id="11a45-186">Also, if hello IP address associated with a site is not changed post failover, hello site binding need not be updated (Retention of hello IP address depends on hello network architecture and subnets assigned toohello primary and recovery sites and hence may or may not be feasible for your organization.)</span></span>

![SSL-bindning](./media/site-recovery-iis/sslbinding.png)

<span data-ttu-id="11a45-188">Om du har associerat hello IP-adress med en plats, måste tooupdate alla bindningar för webbplats med hello nya IP-adressen.</span><span class="sxs-lookup"><span data-stu-id="11a45-188">If you have associated hello IP address with a site, you will need tooupdate all site bindings with hello new IP address.</span></span> <span data-ttu-id="11a45-189">Du kan lägga till [webbserver nivå uppdateringsskriptet](https://aka.ms/asr-web-tier-update-runbook-classic) efter grupp 3 i recovery plan toochange hello platsbindningar.</span><span class="sxs-lookup"><span data-stu-id="11a45-189">You can add [IIS Web tier update script](https://aka.ms/asr-web-tier-update-runbook-classic) after Group 3 in recovery plan toochange hello site bindings.</span></span>


#### <a name="update-load-balancer-ip-address"></a><span data-ttu-id="11a45-190">Uppdatera IP-adressen för belastningsutjämnaren</span><span class="sxs-lookup"><span data-stu-id="11a45-190">Update load balancer IP address</span></span>
<span data-ttu-id="11a45-191">Om du har routning av programbegäran virtuell dator, lägger du till [IIS ARR redundans skriptet](https://aka.ms/asr-iis-arrtier-failover-script-classic) efter grupp 4 tooupdate hello IP-adress.</span><span class="sxs-lookup"><span data-stu-id="11a45-191">If you have  Application Request Routing virtual machine, add [IIS ARR  failover script](https://aka.ms/asr-iis-arrtier-failover-script-classic) after Group 4 tooupdate hello IP address.</span></span>

#### <a name="hello-ssl-cert-binding-for-an-https-connection"></a><span data-ttu-id="11a45-192">hello SSL-certifikat-bindning för en https-anslutning</span><span class="sxs-lookup"><span data-stu-id="11a45-192">hello SSL cert binding for an https connection</span></span>
<span data-ttu-id="11a45-193">Webbplatser kan ha ett associerat SSL-certifikat som hjälper till att säkerställa en säker kommunikation mellan hello webbserver och hello användarens webbläsare.</span><span class="sxs-lookup"><span data-stu-id="11a45-193">Websites can have an associated SSL certificate that helps in ensuring a secure communication between hello webserver and hello user’s browser.</span></span> <span data-ttu-id="11a45-194">Om hello webbplats har en https-anslutning och associerade https plats bindning toohello IP-adressen hello IIS-server med en SSL-certifikat-bindning, måste en ny plats-bindning toobe som lagts till för hello cert med hello IP för hello IIS virtuella datorn efter redundans.</span><span class="sxs-lookup"><span data-stu-id="11a45-194">If hello website has an https connection and an associated https site binding toohello IP address of hello IIS server with an SSL cert binding, a new site binding will need toobe added for hello cert with hello IP of hello IIS virtual machine post failover.</span></span>

<span data-ttu-id="11a45-195">hello SSL-certifikat kan utfärdas mot-</span><span class="sxs-lookup"><span data-stu-id="11a45-195">hello SSL cert can be issued against-</span></span>

<span data-ttu-id="11a45-196">en) hello fullständigt kvalificerade domännamnet för hello webbplats</span><span class="sxs-lookup"><span data-stu-id="11a45-196">a) hello fully qualified domain name of hello website</span></span><br>
<span data-ttu-id="11a45-197">b) hello server hello namn</span><span class="sxs-lookup"><span data-stu-id="11a45-197">b) hello name of hello server</span></span><br>
<span data-ttu-id="11a45-198">c) ett jokerteckencertifikat för hello domännamn</span><span class="sxs-lookup"><span data-stu-id="11a45-198">c) A wildcard certificate for hello domain name</span></span><br>
<span data-ttu-id="11a45-199">d) en IP-adress – om hello SSL-certifikat utfärdas mot hello IP hello IIS-servern, en annan behov toobe för SSL-certifikat som utfärdats för hello IP-adressen för hello IIS-servern på hello Azure site och en ytterligare SSL-bindning för det här certifikatet måste toobe skapas.</span><span class="sxs-lookup"><span data-stu-id="11a45-199">d) An IP address – If hello SSL cert is issued against hello IP of hello IIS server, another SSL cert needs toobe issued against hello IP address of hello IIS server on hello Azure site and an additional SSL binding for this certificate will need toobe created.</span></span> <span data-ttu-id="11a45-200">Det är därför lämpligt toonot används ett SSL-certifikat som utfärdats för IP.</span><span class="sxs-lookup"><span data-stu-id="11a45-200">Hence, it is advisable toonot use an SSL cert issued against IP.</span></span> <span data-ttu-id="11a45-201">Detta är ett alternativ för mindre vanliga och snart kommer att inaktualiseras enligt nya CA/webbläsare forum ändringar.</span><span class="sxs-lookup"><span data-stu-id="11a45-201">This is a less widely used option and will soon be deprecated as per new CA/browser forum changes.</span></span>

#### <a name="update-hello-dependency-between-hello-web-and-hello-application-tier"></a><span data-ttu-id="11a45-202">Uppdatera hello beroende mellan hello webb- och hello programmet nivå</span><span class="sxs-lookup"><span data-stu-id="11a45-202">Update hello dependency between hello web and hello application tier</span></span>
<span data-ttu-id="11a45-203">Om du har ett specifikt tillämpningsprogramberoende baserat på hello IP-adressen för hello virtuella datorer måste tooupdate detta beroende efter växling vid fel.</span><span class="sxs-lookup"><span data-stu-id="11a45-203">If you have an application specific dependency based on hello IP address of hello virtual machines, you need tooupdate this dependency post failover.</span></span>

## <a name="doing-a-test-failover"></a><span data-ttu-id="11a45-204">Gör ett redundanstest</span><span class="sxs-lookup"><span data-stu-id="11a45-204">Doing a test failover</span></span>
<span data-ttu-id="11a45-205">Följ [vägledningen](site-recovery-test-failover-to-azure.md) toodo testa redundans.</span><span class="sxs-lookup"><span data-stu-id="11a45-205">Follow [this guidance](site-recovery-test-failover-to-azure.md) toodo a test failover.</span></span>

1.  <span data-ttu-id="11a45-206">Gå tooAzure portal och välj Recovery-tjänsten-valvet.</span><span class="sxs-lookup"><span data-stu-id="11a45-206">Go tooAzure portal and select your Recovery Service vault.</span></span>
1.  <span data-ttu-id="11a45-207">Klicka på hello återställningsplan som skapats för IIS-webbservergrupp.</span><span class="sxs-lookup"><span data-stu-id="11a45-207">Click on hello recovery plan created for IIS web farm.</span></span>
1.  <span data-ttu-id="11a45-208">Klicka på Testa redundans.</span><span class="sxs-lookup"><span data-stu-id="11a45-208">Click on 'Test Failover'.</span></span>
1.  <span data-ttu-id="11a45-209">Välj återställningspunkten och den virtuella Azure-nätverket toostart hello test failover-processen.</span><span class="sxs-lookup"><span data-stu-id="11a45-209">Select recovery point and Azure virtual network toostart hello test failover process.</span></span>
1.  <span data-ttu-id="11a45-210">Du kan utföra din verifieringar när hello sekundära miljön är upp.</span><span class="sxs-lookup"><span data-stu-id="11a45-210">Once hello secondary environment is up, you can perform your validations.</span></span>
1.  <span data-ttu-id="11a45-211">När hello verifieringar har slutförts, kan du välja verifieringar slutföra och hello redundanstestmiljön kommer att rensas.</span><span class="sxs-lookup"><span data-stu-id="11a45-211">Once hello validations are complete, you can select ‘Validations complete’ and hello test failover environment will be cleaned.</span></span>

## <a name="doing-a-failover"></a><span data-ttu-id="11a45-212">Genomför en redundansväxling enligt</span><span class="sxs-lookup"><span data-stu-id="11a45-212">Doing a failover</span></span>
<span data-ttu-id="11a45-213">Följ [vägledningen](site-recovery-failover.md) när du gör en redundansväxling.</span><span class="sxs-lookup"><span data-stu-id="11a45-213">Follow [this guidance](site-recovery-failover.md) when you are doing a failover.</span></span>

1.  <span data-ttu-id="11a45-214">Gå tooAzure portal och välj Recovery-tjänsten-valvet.</span><span class="sxs-lookup"><span data-stu-id="11a45-214">Go tooAzure portal and select your Recovery Service vault.</span></span>
1.  <span data-ttu-id="11a45-215">Klicka på hello återställningsplan som skapats för IIS-webbservergrupp.</span><span class="sxs-lookup"><span data-stu-id="11a45-215">Click on hello recovery plan created for IIS web farm.</span></span>
1.  <span data-ttu-id="11a45-216">Klicka på 'Redundans'.</span><span class="sxs-lookup"><span data-stu-id="11a45-216">Click on 'Failover'.</span></span>
1.  <span data-ttu-id="11a45-217">Välj återställningsprocessen punkt toostart hello växling vid fel.</span><span class="sxs-lookup"><span data-stu-id="11a45-217">Select recovery point toostart hello failover process.</span></span>

## <a name="next-steps"></a><span data-ttu-id="11a45-218">Nästa steg</span><span class="sxs-lookup"><span data-stu-id="11a45-218">Next steps</span></span>
<span data-ttu-id="11a45-219">Du kan lära dig mer om [replikera andra program](site-recovery-workload.md) med Site Recovery.</span><span class="sxs-lookup"><span data-stu-id="11a45-219">You can learn more about [replicate other applications](site-recovery-workload.md) using Site Recovery.</span></span>

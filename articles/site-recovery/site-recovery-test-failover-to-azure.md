---
title: aaaTest redundans tooAzure i Site Recovery | Microsoft Docs
description: "Lär dig mer om att köra ett redundanstest från lokala tooAzure"
services: site-recovery
documentationcenter: 
author: prateek9us
manager: gauravd
editor: 
ms.assetid: 44813a48-c680-4581-a92e-cecc57cc3b1e
ms.service: site-recovery
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: storage-backup-recovery
ms.date: 07/04/2017
ms.author: pratshar
ms.openlocfilehash: fa0a93f409cc9f2c2c06c2d91c65971dc90c507f
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: sv-SE
ms.lasthandoff: 10/06/2017
---
# <a name="test--failover-tooazure-in-site-recovery"></a><span data-ttu-id="bbba7-103">Testa redundans tooAzure i Site Recovery</span><span class="sxs-lookup"><span data-stu-id="bbba7-103">Test  Failover tooAzure in Site Recovery</span></span>



<span data-ttu-id="bbba7-104">Den här artikeln innehåller information och instruktioner för att göra ett redundanstest eller en DR-test av virtuella datorer och fysiska servrar som skyddas med Site Recovery med Azure som hello återställningsplatsen.</span><span class="sxs-lookup"><span data-stu-id="bbba7-104">This article provides information and instructions for doing a test failover or a DR drill of virtual machines and physical servers that are protected with Site Recovery using Azure as hello recovery site.</span></span>

<span data-ttu-id="bbba7-105">Skriv dina kommentarer eller frågor längst ned hello i den här artikeln eller i hello [Azure Recovery Services-forumet](https://social.msdn.microsoft.com/forums/azure/home?forum=hypervrecovmgr).</span><span class="sxs-lookup"><span data-stu-id="bbba7-105">Post any comments or questions at hello bottom of this article, or on hello [Azure Recovery Services Forum](https://social.msdn.microsoft.com/forums/azure/home?forum=hypervrecovmgr).</span></span>

<span data-ttu-id="bbba7-106">Testa redundans är kör toovalidate din replikeringsstrategi för eller utför en katastrofåterställning återställningsgranskning utan avbrott eller dataförlust.</span><span class="sxs-lookup"><span data-stu-id="bbba7-106">Test failover is run toovalidate your replication strategy or perform a disaster recovery drill without any data loss or downtime.</span></span> <span data-ttu-id="bbba7-107">Gör ett redundanstest har inte någon effekt på hello pågående replikering eller i din produktionsmiljö.</span><span class="sxs-lookup"><span data-stu-id="bbba7-107">Doing a test failover doesn't have any impact on hello ongoing replication or on your production environment.</span></span> <span data-ttu-id="bbba7-108">Testa redundans kan utföras på en virtuell dator eller en [återställningsplanen](site-recovery-create-recovery-plans.md).</span><span class="sxs-lookup"><span data-stu-id="bbba7-108">Test failover can be done either on a virtual machine or a [recovery plan](site-recovery-create-recovery-plans.md).</span></span> <span data-ttu-id="bbba7-109">När du utlöser ett redundanstest måste toospecify hello toowhich nätverkstest virtuella datorer ska ansluta till.</span><span class="sxs-lookup"><span data-stu-id="bbba7-109">When triggering a test failover, you need toospecify hello network toowhich test virtual machines would connect to.</span></span> <span data-ttu-id="bbba7-110">När ett redundanstest utlöses, du kan följa förloppet i hello **jobb** sidan.</span><span class="sxs-lookup"><span data-stu-id="bbba7-110">Once a test failover is triggered, you can track progress in hello **Jobs** page.</span></span>  


## <a name="supported-scenarios"></a><span data-ttu-id="bbba7-111">Scenarier som stöds</span><span class="sxs-lookup"><span data-stu-id="bbba7-111">Supported scenarios</span></span>
<span data-ttu-id="bbba7-112">Testa redundans stöds i alla distributionsscenarier än [äldre VMware plats tooAzure](site-recovery-vmware-to-azure-classic-legacy.md).</span><span class="sxs-lookup"><span data-stu-id="bbba7-112">Test failover is supported in all deployment scenarios other than [legacy VMware site tooAzure](site-recovery-vmware-to-azure-classic-legacy.md).</span></span> <span data-ttu-id="bbba7-113">Testa redundans stöds inte även när den virtuella datorn misslyckades under tooAzure.</span><span class="sxs-lookup"><span data-stu-id="bbba7-113">Test failover is also not supported when virtual machine has been failed over tooAzure.</span></span>  


## <a name="run-a-test-failover"></a><span data-ttu-id="bbba7-114">Köra ett redundanstest</span><span class="sxs-lookup"><span data-stu-id="bbba7-114">Run a test failover</span></span>
<span data-ttu-id="bbba7-115">Den här proceduren beskriver hur toorun ett redundanstest för en återställning planerar.</span><span class="sxs-lookup"><span data-stu-id="bbba7-115">This procedure describes how toorun a test failover for a recovery plan.</span></span> <span data-ttu-id="bbba7-116">Alternativt kan du också köra testa redundans för en enda dator med hjälp av hello lämpligt alternativ på den.</span><span class="sxs-lookup"><span data-stu-id="bbba7-116">Alternatively you can also run test failover for a single machine by using hello appropriate option on it.</span></span>

![Testa redundans](./media/site-recovery-test-failover-to-azure/TestFailover.png)


1. <span data-ttu-id="bbba7-118">Välj **Återställningsplaner** > *recoveryplan_name*.</span><span class="sxs-lookup"><span data-stu-id="bbba7-118">Select **Recovery Plans** > *recoveryplan_name*.</span></span> <span data-ttu-id="bbba7-119">Klicka på **Redundanstestningen**.</span><span class="sxs-lookup"><span data-stu-id="bbba7-119">Click **Test Failover**.</span></span>
1. <span data-ttu-id="bbba7-120">Välj en **återställningspunkt** toofailover till.</span><span class="sxs-lookup"><span data-stu-id="bbba7-120">Select a **Recovery Point** toofailover to.</span></span> <span data-ttu-id="bbba7-121">Du kan använda något av följande alternativ för hello:</span><span class="sxs-lookup"><span data-stu-id="bbba7-121">You can use one of hello following options:</span></span>
    1.  <span data-ttu-id="bbba7-122">**Senaste bearbetas**: det här alternativet flyttas över alla virtuella datorer i hello recovery plan toohello senaste återställningspunkten som redan har behandlats av Site Recovery-tjänsten.</span><span class="sxs-lookup"><span data-stu-id="bbba7-122">**Latest processed**: This option fails over all virtual machines of hello recovery plan toohello latest recovery point that has already been processed by Site Recovery service.</span></span> <span data-ttu-id="bbba7-123">När du gör testa redundans för en virtuell dator visas också tidsstämpeln för hello senaste bearbetade återställningspunkten.</span><span class="sxs-lookup"><span data-stu-id="bbba7-123">When you are doing test failover of a virtual machine, time stamp of hello latest processed recovery point is also shown.</span></span> <span data-ttu-id="bbba7-124">Om du gör redundans för en återställningsplan går tooindividual virtuell dator och titta på **senaste återställningspunkter** panelen tooget informationen.</span><span class="sxs-lookup"><span data-stu-id="bbba7-124">If you are doing failover of a recovery plan, you can go tooindividual virtual machine and look at **Latest Recovery Points** tile tooget this information.</span></span> <span data-ttu-id="bbba7-125">Ingen tid läggs tooprocess hello obearbetade data, det här alternativet ger ett alternativ för låga RTO (mål) växling vid fel.</span><span class="sxs-lookup"><span data-stu-id="bbba7-125">As no time is spent tooprocess hello unprocessed data, this option provides a low RTO (Recovery Time Objective) failover option.</span></span>
    1.  <span data-ttu-id="bbba7-126">**Senaste programkonsekventa**: det här alternativet flyttas över alla virtuella datorer i hello recovery plan toohello senaste programkonsekvent återställningspunkt som redan har behandlats av Site Recovery-tjänsten.</span><span class="sxs-lookup"><span data-stu-id="bbba7-126">**Latest app-consistent**: This option fails over all virtual machines of hello recovery plan toohello latest application consistent recovery point that has already been processed by Site Recovery service.</span></span> <span data-ttu-id="bbba7-127">När du gör testa redundans för en virtuell dator visas också tidsstämpeln för hello senaste programkonsekventa återställningspunkten.</span><span class="sxs-lookup"><span data-stu-id="bbba7-127">When you are doing test failover of a virtual machine, time stamp of hello latest app-consistent recovery point is also shown.</span></span> <span data-ttu-id="bbba7-128">Om du gör redundans för en återställningsplan går tooindividual virtuell dator och titta på **senaste återställningspunkter** panelen tooget informationen.</span><span class="sxs-lookup"><span data-stu-id="bbba7-128">If you are doing failover of a recovery plan, you can go tooindividual virtual machine and look at **Latest Recovery Points** tile tooget this information.</span></span>
    1.  <span data-ttu-id="bbba7-129">**Senaste**: det här alternativet först bearbetar alla hello-data som har skickats tooSite Recovery service toocreate en återställningspunkt för varje virtuell dator innan redundansväxlingen tooit.</span><span class="sxs-lookup"><span data-stu-id="bbba7-129">**Latest**: This option first processes all hello data that has been sent tooSite Recovery service toocreate a recovery point for each virtual machine before failing them over tooit.</span></span> <span data-ttu-id="bbba7-130">Det här alternativet får hello lägsta RPO (mål för återställningspunkt) som hello virtuell dator skapas efter växling vid fel måste alla hello data som har replikerats tooSite Recovery-tjänsten när hello redundans utlöstes.</span><span class="sxs-lookup"><span data-stu-id="bbba7-130">This option provides hello lowest RPO (Recovery Point Objective) as hello virtual machine created after failover will have all hello data that has been replicated tooSite Recovery service when hello failover was triggered.</span></span>
    1.  <span data-ttu-id="bbba7-131">**Senaste multi-VM bearbetas**: det här alternativet är endast tillgängligt för återställningsplaner som har minst en virtuell dator med konsekvens för flera på.</span><span class="sxs-lookup"><span data-stu-id="bbba7-131">**Latest multi-VM processed**: This option is only available for recovery plans that have at least one virtual machine with multi-VM consistency ON.</span></span> <span data-ttu-id="bbba7-132">Virtuella datorer som ingår i en grupp redundans toohello senaste vanliga multi-VM konsekvent replikeringsåterställning punkt.</span><span class="sxs-lookup"><span data-stu-id="bbba7-132">Virtual machines that are part of a replication group failover toohello latest common multi-VM consistent recovery point.</span></span> <span data-ttu-id="bbba7-133">Andra virtuella datorer redundans tootheir senaste bearbetade återställningspunkten.</span><span class="sxs-lookup"><span data-stu-id="bbba7-133">Other virtual machines failover tootheir latest processed recovery point.</span></span>  
    1.  <span data-ttu-id="bbba7-134">**Senaste multi-VM programkonsekventa**: det här alternativet är endast tillgängligt för återställningsplaner som har minst en virtuell dator med multi-VM konsekvenskontroll på.</span><span class="sxs-lookup"><span data-stu-id="bbba7-134">**Latest multi-VM app-consistent**: This option is only available for recovery plans that have at least one virtual machine with multi-VM consistency ON.</span></span> <span data-ttu-id="bbba7-135">Virtuella datorer som är en del av en replikering gruppera redundans toohello senaste vanliga multi-VM programkonsekvent återställningspunkt.</span><span class="sxs-lookup"><span data-stu-id="bbba7-135">Virtual machines that are part of a replication group failover toohello latest common multi-VM application-consistent recovery point.</span></span> <span data-ttu-id="bbba7-136">Andra virtuella datorer redundans tootheir senaste programkonsekventa återställningspunkter.</span><span class="sxs-lookup"><span data-stu-id="bbba7-136">Other virtual machines failover tootheir latest application-consistent recovery point.</span></span> 
    1.  <span data-ttu-id="bbba7-137">**Anpassad**: Om du gör testa redundans för en virtuell dator, så du kan använda alternativet toofailover tooa viss återställningspunkten.</span><span class="sxs-lookup"><span data-stu-id="bbba7-137">**Custom**: If you are doing test failover of a virtual machine, then you can use this option toofailover tooa particular recovery point.</span></span>
1. <span data-ttu-id="bbba7-138">Välj en **virtuella Azure-nätverket**: Ange ett virtuellt Azure-nätverk där de virtuella testdatorer som hello skulle skapas.</span><span class="sxs-lookup"><span data-stu-id="bbba7-138">Select an **Azure virtual network**: Provide an Azure virtual network where hello test virtual machines would be created.</span></span> <span data-ttu-id="bbba7-139">Site Recovery försöker toocreate test virtuella datorer i ett undernät med samma namn och använder hello samma IP-adress som som angetts i **beräknings- och nätverksinställningar** inställningarna för hello virtuell dator.</span><span class="sxs-lookup"><span data-stu-id="bbba7-139">Site Recovery attempts toocreate test virtual machines in a subnet of same name and using hello same IP as that provided in **Compute and Network** settings of hello virtual machine.</span></span> <span data-ttu-id="bbba7-140">Om undernät med samma namn inte finns i hello Azure-nätverket för testning av redundans, och sedan testa virtuell dator skapas i hello första undernätet i alfabetisk ordning.</span><span class="sxs-lookup"><span data-stu-id="bbba7-140">If subnet of same name is not available in hello Azure virtual network provided for test failover, then test virtual machine is created in hello first subnet alphabetically.</span></span> <span data-ttu-id="bbba7-141">Om samma IP inte är tillgänglig på undernätet hello hämtar virtuell dator en annan IP-adress som är tillgängliga i hello undernät.</span><span class="sxs-lookup"><span data-stu-id="bbba7-141">If same IP is not available in hello subnet, then virtual machine gets another IP address available in hello subnet.</span></span> <span data-ttu-id="bbba7-142">Läs det här avsnittet för [mer information](#creating-a-network-for-test-failover)</span><span class="sxs-lookup"><span data-stu-id="bbba7-142">Read this section for [more details](#creating-a-network-for-test-failover)</span></span>
1. <span data-ttu-id="bbba7-143">Om du växlar över tooAzure och datakryptering är aktiverat i **krypteringsnyckeln** väljer hello-certifikat som utfärdades när du har aktiverat datakryptering under installationen av providern.</span><span class="sxs-lookup"><span data-stu-id="bbba7-143">If you're failing over tooAzure and data encryption is enabled, in **Encryption Key** select hello certificate that was issued when you enabled data encryption during Provider installation.</span></span> <span data-ttu-id="bbba7-144">Du kan ignorera det här steget om du inte har aktiverat kryptering på hello virtuell dator.</span><span class="sxs-lookup"><span data-stu-id="bbba7-144">You can ignore this step if you have not enabled encryption on hello virtual machine.</span></span>
1. <span data-ttu-id="bbba7-145">Följa redundansförloppet på hello **jobb** fliken. Du ska kunna toosee hello testdatorn replik i hello Azure-portalen.</span><span class="sxs-lookup"><span data-stu-id="bbba7-145">Track failover progress on hello **Jobs** tab. You should be able toosee hello test replica machine in hello Azure portal.</span></span>
1. <span data-ttu-id="bbba7-146">tooinitiate en RDP-anslutning på den virtuella datorn hello måste för[lägga till en offentlig IP-adress](site-recovery-monitoring-and-troubleshooting.md#adding-a-public-ip-on-a-resource-manager-virtual-machine) hello nätverksgränssnittet för hello misslyckades över virtuella datorn.</span><span class="sxs-lookup"><span data-stu-id="bbba7-146">tooinitiate an RDP connection on hello virtual machine, you will need too[add a public ip](site-recovery-monitoring-and-troubleshooting.md#adding-a-public-ip-on-a-resource-manager-virtual-machine) on hello network interface of hello failed over virtual machine.</span></span> <span data-ttu-id="bbba7-147">Om du misslyckas över tooa klassiska virtuella datorn, måste du för[lägga till en slutpunkt](../virtual-machines/windows/classic/setup-endpoints.md) port 3389</span><span class="sxs-lookup"><span data-stu-id="bbba7-147">If you are failing over tooa Classic virtual machine, then you need too[add an endpoint](../virtual-machines/windows/classic/setup-endpoints.md) on port 3389</span></span>
1. <span data-ttu-id="bbba7-148">När du är klar klickar du på **Rensa redundanstestet** på hello återställningsplan.</span><span class="sxs-lookup"><span data-stu-id="bbba7-148">Once you're done, click **Cleanup test failover** on hello recovery plan.</span></span> <span data-ttu-id="bbba7-149">I **anteckningar** spela in och spara observationer från redundanstestningen hello.</span><span class="sxs-lookup"><span data-stu-id="bbba7-149">In **Notes** record and save any observations associated with hello test failover.</span></span> <span data-ttu-id="bbba7-150">Detta tar bort hello virtuella datorer som har skapats under redundanstestningen.</span><span class="sxs-lookup"><span data-stu-id="bbba7-150">This deletes hello virtual machines that were created during test failover.</span></span>


> [!TIP]
> <span data-ttu-id="bbba7-151">Site Recovery försöker toocreate test virtuella datorer i ett undernät med samma namn och använder hello samma IP-adress som som angetts i **beräknings- och nätverksinställningar** inställningarna för hello virtuell dator.</span><span class="sxs-lookup"><span data-stu-id="bbba7-151">Site Recovery attempts toocreate test virtual machines in a subnet of same name and using hello same IP as that provided in **Compute and Network** settings of hello virtual machine.</span></span> <span data-ttu-id="bbba7-152">Om undernät med samma namn inte finns i hello Azure-nätverket för testning av redundans, och sedan testa virtuell dator skapas i hello första undernätet i alfabetisk ordning.</span><span class="sxs-lookup"><span data-stu-id="bbba7-152">If subnet of same name is not available in hello Azure virtual network provided for test failover, then test virtual machine is created in hello first subnet alphabetically.</span></span> <span data-ttu-id="bbba7-153">Om IP-Adressen hello mål är en del av hello valt undernät, försöker platsåterställning toocreate hello testa redundans virtuell dator använder hello mål-IP-adress.</span><span class="sxs-lookup"><span data-stu-id="bbba7-153">If hello target IP is part of hello chosen subnet, then site recovery tries toocreate hello test failover virtual machine using hello target IP.</span></span> <span data-ttu-id="bbba7-154">Om IP-Adressen hello mål inte är del av hello valt undernät hämtar testa redundans virtuell dator skapas använder alla tillgängliga IP-adresser i hello valt undernät.</span><span class="sxs-lookup"><span data-stu-id="bbba7-154">If hello target IP is not part of hello chosen subnet then test failover virtual machine gets created using any available IP in hello chosen subnet.</span></span>
>
>

## <a name="test-failover-job"></a><span data-ttu-id="bbba7-155">Testjobb för växling vid fel</span><span class="sxs-lookup"><span data-stu-id="bbba7-155">Test failover job</span></span>

![Testa redundans](./media/site-recovery-test-failover-to-azure/TestFailoverJob.png)

<span data-ttu-id="bbba7-157">När ett redundanstest utlöses omfattar följande steg:</span><span class="sxs-lookup"><span data-stu-id="bbba7-157">When a test failover is triggered, it involves following steps:</span></span>

1. <span data-ttu-id="bbba7-158">Kravkontroll: det här steget säkerställer att alla krav som gäller för växling vid fel är uppfyllda.</span><span class="sxs-lookup"><span data-stu-id="bbba7-158">Prerequisites check: This step ensures that all conditions required for failover are met</span></span>
1. <span data-ttu-id="bbba7-159">Redundans: Det här steget bearbetar hello data och gör den redo så att en virtuell Azure-dator kan skapas ur den.</span><span class="sxs-lookup"><span data-stu-id="bbba7-159">Failover: This step processes hello data and makes it ready so that an Azure virtual machine can be created out of it.</span></span> <span data-ttu-id="bbba7-160">Om du har valt **senaste** återställningspunkten det här steget skapar en återställningspunkt från hello data som har skickats toohello service.</span><span class="sxs-lookup"><span data-stu-id="bbba7-160">If you have chosen **Latest** recovery point, this step creates a recovery point from hello data that has been sent toohello service.</span></span>
1. <span data-ttu-id="bbba7-161">Starta: Det här steget skapar en virtuell Azure-dator med hjälp av hello data bearbetas i hello föregående steg.</span><span class="sxs-lookup"><span data-stu-id="bbba7-161">Start: This step creates an Azure virtual machine using hello data processed in hello previous step.</span></span>

## <a name="time-taken-for-failover"></a><span data-ttu-id="bbba7-162">Tidsåtgång för redundans</span><span class="sxs-lookup"><span data-stu-id="bbba7-162">Time taken for failover</span></span>

<span data-ttu-id="bbba7-163">I vissa fall kräver redundans för virtuella datorer ett extra steg som tar vanligtvis cirka 8 too10 minuter toocomplete.</span><span class="sxs-lookup"><span data-stu-id="bbba7-163">In certain cases, failover of virtual machines requires an extra intermediate step that usually takes around 8  too10 minutes toocomplete.</span></span> <span data-ttu-id="bbba7-164">Dessa fall är följande:</span><span class="sxs-lookup"><span data-stu-id="bbba7-164">These cases are as following:</span></span>

* <span data-ttu-id="bbba7-165">Med en version av hello mobilitetstjänsten som är äldre än 9.8 virtuella VMware-datorer</span><span class="sxs-lookup"><span data-stu-id="bbba7-165">VMware virtual machines using a version of hello Mobility service older than 9.8</span></span>
* <span data-ttu-id="bbba7-166">Fysiska servrar</span><span class="sxs-lookup"><span data-stu-id="bbba7-166">Physical servers</span></span>
* <span data-ttu-id="bbba7-167">VMware Linux virtuella datorer</span><span class="sxs-lookup"><span data-stu-id="bbba7-167">VMware Linux virtual machines</span></span>
* <span data-ttu-id="bbba7-168">Hyper-V virtuella datorer som skyddas som fysiska servrar</span><span class="sxs-lookup"><span data-stu-id="bbba7-168">Hyper-V virtual machines protected as physical servers</span></span>
* <span data-ttu-id="bbba7-169">VMware-datorer där följande drivrutiner inte finns som startdrivrutiner</span><span class="sxs-lookup"><span data-stu-id="bbba7-169">VMware virtual machines where following drivers are not present as boot drivers</span></span>
    * <span data-ttu-id="bbba7-170">storvsc</span><span class="sxs-lookup"><span data-stu-id="bbba7-170">storvsc</span></span>
    * <span data-ttu-id="bbba7-171">VMBus</span><span class="sxs-lookup"><span data-stu-id="bbba7-171">vmbus</span></span>
    * <span data-ttu-id="bbba7-172">storflt</span><span class="sxs-lookup"><span data-stu-id="bbba7-172">storflt</span></span>
    * <span data-ttu-id="bbba7-173">Intelide</span><span class="sxs-lookup"><span data-stu-id="bbba7-173">intelide</span></span>
    * <span data-ttu-id="bbba7-174">ATAPI</span><span class="sxs-lookup"><span data-stu-id="bbba7-174">atapi</span></span>
* <span data-ttu-id="bbba7-175">Virtuella VMware-datorer som inte har DHCP-tjänsten aktiveras oavsett om de använder DHCP eller statiska IP-adresser</span><span class="sxs-lookup"><span data-stu-id="bbba7-175">VMware virtual machines that don't have DHCP service enabled irrespective of whether they are using DHCP or static IP addresses</span></span>

<span data-ttu-id="bbba7-176">I alla hello andra fall detta mellanliggande steg krävs inte och hello tidsåtgång för hello redundans är betydligt lägre.</span><span class="sxs-lookup"><span data-stu-id="bbba7-176">In all hello other cases this intermediate step is not required and hello time taken for hello failover is significantly lower.</span></span>


## <a name="creating-a-network-for-test-failover"></a><span data-ttu-id="bbba7-177">Skapa ett nätverk för att testa redundans</span><span class="sxs-lookup"><span data-stu-id="bbba7-177">Creating a network for test failover</span></span>
<span data-ttu-id="bbba7-178">Vi rekommenderar att du väljer ett nätverk som är isolerad från nätverket produktion recovery plats som du angav i när du gör ett redundanstest **beräknings- och nätverksinställningar** inställningar för hello virtuell dator.</span><span class="sxs-lookup"><span data-stu-id="bbba7-178">It is recommended that when you are doing a test failover you choose a network that is isolated from your production recovery site network that you provided in **Compute and Network** settings for hello virtual machine.</span></span> <span data-ttu-id="bbba7-179">Som standard när du skapar en Azure-nätverk, är isolerad från andra nätverk.</span><span class="sxs-lookup"><span data-stu-id="bbba7-179">By default when you create an Azure virtual network, it is isolated from other networks.</span></span> <span data-ttu-id="bbba7-180">Det här nätverket ska efterlikna produktionsnätverket:</span><span class="sxs-lookup"><span data-stu-id="bbba7-180">This network should mimic your production network:</span></span>

1. <span data-ttu-id="bbba7-181">Testa nätverk ska ha samma antal undernät som i produktionsnätverket och med samma namn som de hello undernät i produktion hello.</span><span class="sxs-lookup"><span data-stu-id="bbba7-181">Test network should have same number of subnets as that in your production network and with hello same name as those of hello subnets in your production network.</span></span>
1. <span data-ttu-id="bbba7-182">Testnätverket ska använda hello samma IP-adressintervall som produktionsnätverket.</span><span class="sxs-lookup"><span data-stu-id="bbba7-182">Test network should use hello same IP range as that of your production network.</span></span>
1. <span data-ttu-id="bbba7-183">Uppdatera hello DNS hello Testnätverket som hello IP-adress som du gav som mål-IP för hello DNS virtuella datorn under **beräknings- och nätverksinställningar** inställningar.</span><span class="sxs-lookup"><span data-stu-id="bbba7-183">Update hello DNS of hello Test Network as hello IP that you gave as target IP for hello DNS virtual machine under **Compute and Network** settings.</span></span> <span data-ttu-id="bbba7-184">Gå igenom [redundanstestning för active directory](site-recovery-active-directory.md#test-failover-considerations) mer information.</span><span class="sxs-lookup"><span data-stu-id="bbba7-184">Go through [test failover considerations for active directory](site-recovery-active-directory.md#test-failover-considerations) section for more details.</span></span>


## <a name="test-failover-tooa-production-network-on-recovery-site"></a><span data-ttu-id="bbba7-185">Testa redundans tooa produktionsnätverk på återställningsplatsen</span><span class="sxs-lookup"><span data-stu-id="bbba7-185">Test failover tooa production network on recovery site</span></span>
<span data-ttu-id="bbba7-186">Vi rekommenderar att du väljer ett nätverk som skiljer sig från nätverket produktion recovery plats som du angav i när du gör ett redundanstest **beräknings- och nätverksinställningar** inställningar för hello virtuell dator.</span><span class="sxs-lookup"><span data-stu-id="bbba7-186">It is recommended that when you are doing a test failover you choose a network that is different from your production recovery site network that you provided in **Compute and Network** settings for hello virtual machine.</span></span> <span data-ttu-id="bbba7-187">Men om du verkligen toovalidate end tooend nätverksanslutning i en misslyckad Observera följande punkter hello över virtuella datorn:</span><span class="sxs-lookup"><span data-stu-id="bbba7-187">But if you really want toovalidate end tooend network connectivity in a failed over virtual machine, note hello following points:</span></span>

1. <span data-ttu-id="bbba7-188">Kontrollera att hello den primära virtuella datorn är avstängd när du gör hello testa redundans.</span><span class="sxs-lookup"><span data-stu-id="bbba7-188">Make sure that hello primary virtual machine is shutdown when you are doing hello test failover.</span></span> <span data-ttu-id="bbba7-189">Om du inte gör det finns två virtuella datorer med hello samma identitet som körs i hello samma nätverk på hello samtidigt och som kan leda till tooundesired konsekvenser.</span><span class="sxs-lookup"><span data-stu-id="bbba7-189">If you don't do so, there will be two virtual machines with hello same identity running in hello same network at hello same time and that can lead tooundesired consequences.</span></span>
1. <span data-ttu-id="bbba7-190">Alla ändringar du gör i hello testa redundans virtuella datorer skulle gå förlorade när du rensa hello redundans virtuella testdatorer.</span><span class="sxs-lookup"><span data-stu-id="bbba7-190">Any changes that you make into hello test failover virtual machines would be lost when you cleanup hello test failover virtual machines.</span></span> <span data-ttu-id="bbba7-191">De här ändringarna inte replikeras tillbaka toohello primära virtuella datorn.</span><span class="sxs-lookup"><span data-stu-id="bbba7-191">These changes will not be replicated back toohello primary virtual machine.</span></span>
1. <span data-ttu-id="bbba7-192">Det här kan du göra testning leder tooa driftstopp för dina produktionsprogram.</span><span class="sxs-lookup"><span data-stu-id="bbba7-192">This way of doing testing leads tooa downtime of your production application.</span></span> <span data-ttu-id="bbba7-193">Användare av programmet hello ska uppmanas toonot Använd hello programmet när hello DR detaljgranska pågår.</span><span class="sxs-lookup"><span data-stu-id="bbba7-193">Users of hello application should be asked toonot use hello application when hello DR drill is in progress.</span></span>  



## <a name="prepare-active-directory-and-dns"></a><span data-ttu-id="bbba7-194">Förbered Active Directory och DNS</span><span class="sxs-lookup"><span data-stu-id="bbba7-194">Prepare Active Directory and DNS</span></span>
<span data-ttu-id="bbba7-195">toorun ett redundanstest för program, testa, behöver du en kopia av Active Directory-produktionsmiljö hello i din testmiljö.</span><span class="sxs-lookup"><span data-stu-id="bbba7-195">toorun a test failover for application testing, you need a copy of hello production Active Directory environment in your test environment.</span></span> <span data-ttu-id="bbba7-196">Gå igenom [redundanstestning för active directory](site-recovery-active-directory.md#test-failover-considerations) mer information.</span><span class="sxs-lookup"><span data-stu-id="bbba7-196">Go through [test failover considerations for active directory](site-recovery-active-directory.md#test-failover-considerations) section for more details.</span></span>

## <a name="prepare-tooconnect-tooazure-vms-after-failover"></a><span data-ttu-id="bbba7-197">Förbereda tooconnect tooAzure virtuella datorer efter redundans</span><span class="sxs-lookup"><span data-stu-id="bbba7-197">Prepare tooconnect tooAzure VMs after failover</span></span>

<span data-ttu-id="bbba7-198">Om du vill tooconnect tooAzure virtuella datorer med RDP efter en växling vid fel, kontrollera att du hello åtgärder som sammanfattas i hello tabell.</span><span class="sxs-lookup"><span data-stu-id="bbba7-198">If you want tooconnect tooAzure VMs using RDP after failover, make sure you do hello actions summarized in hello table.</span></span>

<span data-ttu-id="bbba7-199">**Växling vid fel**</span><span class="sxs-lookup"><span data-stu-id="bbba7-199">**Failover**</span></span> | <span data-ttu-id="bbba7-200">**Plats**</span><span class="sxs-lookup"><span data-stu-id="bbba7-200">**Location**</span></span> | <span data-ttu-id="bbba7-201">**Åtgärder**</span><span class="sxs-lookup"><span data-stu-id="bbba7-201">**Actions**</span></span>
--- | --- | ---
<span data-ttu-id="bbba7-202">**Azure virtuell dator som kör Windows**</span><span class="sxs-lookup"><span data-stu-id="bbba7-202">**Azure VM running Windows**</span></span> | <span data-ttu-id="bbba7-203">På den lokala datorn före redundans</span><span class="sxs-lookup"><span data-stu-id="bbba7-203">On on-premises machine before failover</span></span> | <span data-ttu-id="bbba7-204">tooaccess hello Azure VM över hello internet, aktiverar du RDP, se till att TCP och UDP-regler har lagts till för hello **offentliga**, och att RDP tillåts i **Windows-brandväggen** > **tillåten Appar**, för alla profiler.</span><span class="sxs-lookup"><span data-stu-id="bbba7-204">tooaccess hello Azure VM over hello internet, enable RDP, make sure TCP, and UDP rules are added for hello **Public**, and that RDP is allowed in **Windows Firewall** > **Allowed Apps**, for all profiles.</span></span><br/><br/> <span data-ttu-id="bbba7-205">tooaccess via en plats-till-plats-anslutning aktiverar du RDP på hello datorn och se till att RDP tillåts i hello **Windows-brandväggen** -> **tillåtna appar och funktioner** för  **Domänen och privat** nätverk.</span><span class="sxs-lookup"><span data-stu-id="bbba7-205">tooaccess over a site-to-site connection, enable RDP on hello machine, and ensure that RDP is allowed in hello **Windows Firewall** -> **Allowed apps and features** for **Domain and Private** networks.</span></span><br/><br/>  <span data-ttu-id="bbba7-206">Se till att hello operativsystemets SAN-principen anges för**OnlineAll**.</span><span class="sxs-lookup"><span data-stu-id="bbba7-206">Make sure hello operating system's SAN policy is set too**OnlineAll**.</span></span> <span data-ttu-id="bbba7-207">[Läs mer](https://support.microsoft.com/kb/3031135).</span><span class="sxs-lookup"><span data-stu-id="bbba7-207">[Learn more](https://support.microsoft.com/kb/3031135).</span></span><br/><br/> <span data-ttu-id="bbba7-208">Kontrollera att det finns ingen Windows-uppdateringar som väntar på hello virtuella datorn när du utlösa redundansväxling.</span><span class="sxs-lookup"><span data-stu-id="bbba7-208">Make sure there are no Windows updates pending on hello virtual machine when you trigger a failover.</span></span> <span data-ttu-id="bbba7-209">Windows update kan starta när du växling vid fel och du inte kommer att kunna toologin toohello virtuella förrän hello uppdateringen är klar.</span><span class="sxs-lookup"><span data-stu-id="bbba7-209">Windows update might start when you failover and you will not be able toologin toohello virtual machine until hello update completes.</span></span> <br/><br/>
<span data-ttu-id="bbba7-210">**Azure virtuell dator som kör Windows**</span><span class="sxs-lookup"><span data-stu-id="bbba7-210">**Azure VM running Windows**</span></span> | <span data-ttu-id="bbba7-211">På Azure VM efter växling vid fel</span><span class="sxs-lookup"><span data-stu-id="bbba7-211">On Azure VM after failover</span></span> | <span data-ttu-id="bbba7-212">För en klassisk virtuell dator [lägga till en offentlig slutpunkt](../virtual-machines/windows/classic/setup-endpoints.md) för hello RDP-protokollet (port 3389)</span><span class="sxs-lookup"><span data-stu-id="bbba7-212">For a classic virtual machine, [add a public endpoint](../virtual-machines/windows/classic/setup-endpoints.md) for hello RDP protocol (port 3389)</span></span><br/><br/>  <span data-ttu-id="bbba7-213">För en virtuell dator Resource Manager [lägga till en offentlig IP-adress](site-recovery-monitoring-and-troubleshooting.md#adding-a-public-ip-on-a-resource-manager-virtual-machine) på den.</span><span class="sxs-lookup"><span data-stu-id="bbba7-213">For a Resource Manager virtual machine, [add a public IP](site-recovery-monitoring-and-troubleshooting.md#adding-a-public-ip-on-a-resource-manager-virtual-machine) on it.</span></span><br/><br/> <span data-ttu-id="bbba7-214">hello regler för nätverkssäkerhetsgrupper på hello redundansväxlats VM och hello Azure-undernät toowhich den ansluts måste tooallow inkommande anslutningar toohello RDP-porten.</span><span class="sxs-lookup"><span data-stu-id="bbba7-214">hello network security group rules on hello failed over VM, and hello Azure subnet toowhich it is connected, need tooallow incoming connections toohello RDP port.</span></span><br/><br/> <span data-ttu-id="bbba7-215">För en virtuell dator Resource Manager kan du **starta diagnostik** toolook på en skärmbild av hello virtuell dator</span><span class="sxs-lookup"><span data-stu-id="bbba7-215">For a Resource Manager virtual machine, you can check **Boot diagnostics** toolook at a screenshot of hello virtual machine</span></span><br/><br/> <span data-ttu-id="bbba7-216">Om du inte kan ansluta Kontrollera virtuella datorn körs hello och titta på dessa [felsökningstips](http://social.technet.microsoft.com/wiki/contents/articles/31666.troubleshooting-remote-desktop-connection-after-failover-using-asr.aspx).</span><span class="sxs-lookup"><span data-stu-id="bbba7-216">If you can't connect, check that hello VM is running and then look at these [troubleshooting tips](http://social.technet.microsoft.com/wiki/contents/articles/31666.troubleshooting-remote-desktop-connection-after-failover-using-asr.aspx).</span></span><br/><br/>
<span data-ttu-id="bbba7-217">**Azure VM som kör Linux**</span><span class="sxs-lookup"><span data-stu-id="bbba7-217">**Azure VM running Linux**</span></span> | <span data-ttu-id="bbba7-218">På den lokala datorn före redundans</span><span class="sxs-lookup"><span data-stu-id="bbba7-218">On on-premises machine before failover</span></span> | <span data-ttu-id="bbba7-219">Se till att hello Secure Shell-tjänsten på hello Azure VM anges toostart automatiskt på datorn startar.</span><span class="sxs-lookup"><span data-stu-id="bbba7-219">Ensure that hello Secure Shell service on hello Azure VM is set toostart automatically on system boot.</span></span><br/><br/> <span data-ttu-id="bbba7-220">Kontrollera att brandväggsreglerna tillåter en SSH-anslutning tooit.</span><span class="sxs-lookup"><span data-stu-id="bbba7-220">Check that firewall rules allow an SSH connection tooit.</span></span>
<span data-ttu-id="bbba7-221">**Azure VM som kör Linux**</span><span class="sxs-lookup"><span data-stu-id="bbba7-221">**Azure VM running Linux**</span></span> | <span data-ttu-id="bbba7-222">Azure VM efter växling vid fel</span><span class="sxs-lookup"><span data-stu-id="bbba7-222">Azure VM after failover</span></span> | <span data-ttu-id="bbba7-223">hello regler för nätverkssäkerhetsgrupper på hello redundansväxlats VM och hello Azure-undernät toowhich den ansluts måste tooallow inkommande anslutningar toohello SSH-port.</span><span class="sxs-lookup"><span data-stu-id="bbba7-223">hello network security group rules on hello failed over VM, and hello Azure subnet toowhich it is connected, need tooallow incoming connections toohello SSH port.</span></span><br/><br/> <span data-ttu-id="bbba7-224">För en klassisk virtuell dator [lägga till en offentlig slutpunkt](../virtual-machines/windows/classic/setup-endpoints.md) ska skapas, tooallow inkommande anslutningar på hello SSH-porten (TCP-port 22 som standard).</span><span class="sxs-lookup"><span data-stu-id="bbba7-224">For  a classic virtual machine, [add a public endpoint](../virtual-machines/windows/classic/setup-endpoints.md) should be created, tooallow incoming connections on hello SSH port (TCP port 22 by default).</span></span><br/><br/> <span data-ttu-id="bbba7-225">För en virtuell dator Resource Manager [lägga till en offentlig IP-adress](site-recovery-monitoring-and-troubleshooting.md#adding-a-public-ip-on-a-resource-manager-virtual-machine) på den.</span><span class="sxs-lookup"><span data-stu-id="bbba7-225">For a Resource Manager virtual machine, [add a public IP](site-recovery-monitoring-and-troubleshooting.md#adding-a-public-ip-on-a-resource-manager-virtual-machine) on it.</span></span><br/><br/> <span data-ttu-id="bbba7-226">För en virtuell dator Resource Manager kan du **starta diagnostik** toolook på en skärmbild av hello virtuell dator</span><span class="sxs-lookup"><span data-stu-id="bbba7-226">For a Resource Manager virtual machine, you can check **Boot diagnostics** toolook at a screenshot of hello virtual machine</span></span><br/><br/>



## <a name="next-steps"></a><span data-ttu-id="bbba7-227">Nästa steg</span><span class="sxs-lookup"><span data-stu-id="bbba7-227">Next steps</span></span>
<span data-ttu-id="bbba7-228">När du har har försökt testa redundans kan du göra en [redundans](site-recovery-failover.md).</span><span class="sxs-lookup"><span data-stu-id="bbba7-228">Once you have successfully tried a test failover you can try doing a [failover](site-recovery-failover.md).</span></span>

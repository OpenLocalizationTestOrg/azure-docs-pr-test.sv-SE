---
title: "Felsök vanliga anslutningsproblem till Azure SQL Database"
description: "Steg för att identifiera och lösa vanliga anslutningsfel för Azure SQL Database."
services: sql-database
documentationcenter: 
author: dalechen
manager: cshepard
editor: 
ms.assetid: ac463d1c-aec8-443d-b66e-fa5eadcccfa8
ms.service: sql-database
ms.custom: monitor & tune
ms.workload: data-management
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 06/13/2017
ms.author: daleche
ms.openlocfilehash: b8abf1285318e491d51aadf90f921103d84ce1a4
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: sv-SE
ms.lasthandoff: 07/11/2017
---
# <a name="troubleshoot-connection-issues-to-azure-sql-database"></a><span data-ttu-id="10b76-103">Felsökning av problem med anslutningen till Azure SQL Database</span><span class="sxs-lookup"><span data-stu-id="10b76-103">Troubleshoot connection issues to Azure SQL Database</span></span>
<span data-ttu-id="10b76-104">När det inte går att ansluta till Azure SQL Database, visas [felmeddelanden](sql-database-develop-error-messages.md).</span><span class="sxs-lookup"><span data-stu-id="10b76-104">When the connection to Azure SQL Database fails, you receive [error messages](sql-database-develop-error-messages.md).</span></span> <span data-ttu-id="10b76-105">Den här artikeln är en centraliserad artikel som hjälper dig att felsöka anslutningsproblem för Azure SQL Database.</span><span class="sxs-lookup"><span data-stu-id="10b76-105">This article is a centralized topic that helps you troubleshoot Azure SQL Database connectivity issues.</span></span> <span data-ttu-id="10b76-106">Det inför [vanliga orsaker](#cause) av anslutningsproblem, rekommenderar [ett verktyg för felsökning](#try-the-troubleshooter-for-azure-sql-database-connectivity-issues) som hjälper dig att identiteten problemet och åtgärder för felsökning som löser [tillfälligt fel](#troubleshoot-transient-errors) och [beständiga eller inte är tillfällig fel](#troubleshoot-persistent-errors).</span><span class="sxs-lookup"><span data-stu-id="10b76-106">It introduces [the common causes](#cause) of connection issues, recommends [a troubleshooting tool](#try-the-troubleshooter-for-azure-sql-database-connectivity-issues) that helps you identity the problem, and provides troubleshooting steps to solve [transient errors](#troubleshoot-transient-errors) and [persistent or non-transient errors](#troubleshoot-persistent-errors).</span></span> 

<span data-ttu-id="10b76-107">Om du stöter på problem med anslutningen kan försöka felsöka stegen som beskrivs i den här artikeln.</span><span class="sxs-lookup"><span data-stu-id="10b76-107">If you encounter the connection issues, try the troubleshoot steps that are described in this article.</span></span>
[!INCLUDE [support-disclaimer](../../includes/support-disclaimer.md)]

## <a name="cause"></a><span data-ttu-id="10b76-108">Orsak</span><span class="sxs-lookup"><span data-stu-id="10b76-108">Cause</span></span>
<span data-ttu-id="10b76-109">Anslutningsproblem kan orsakas av något av följande:</span><span class="sxs-lookup"><span data-stu-id="10b76-109">Connection problems may be caused by any of the following:</span></span>

* <span data-ttu-id="10b76-110">Underlåtenhet att tillämpa metodtips och riktlinjer för utformning under designprocessen för programmet.</span><span class="sxs-lookup"><span data-stu-id="10b76-110">Failure to apply best practices and design guidelines during the application design process.</span></span>  <span data-ttu-id="10b76-111">Se [Utvecklingsöversikt för SQL-databasen](sql-database-develop-overview.md) att komma igång.</span><span class="sxs-lookup"><span data-stu-id="10b76-111">See [SQL Database Development Overview](sql-database-develop-overview.md) to get started.</span></span>
* <span data-ttu-id="10b76-112">Azure SQL Database omkonfiguration</span><span class="sxs-lookup"><span data-stu-id="10b76-112">Azure SQL Database reconfiguration</span></span>
* <span data-ttu-id="10b76-113">Brandväggsinställningar</span><span class="sxs-lookup"><span data-stu-id="10b76-113">Firewall settings</span></span>
* <span data-ttu-id="10b76-114">Timeout-värde</span><span class="sxs-lookup"><span data-stu-id="10b76-114">Connection time-out</span></span>
* <span data-ttu-id="10b76-115">Felaktig inloggningsinformation</span><span class="sxs-lookup"><span data-stu-id="10b76-115">Incorrect login information</span></span>
* <span data-ttu-id="10b76-116">Högsta gränsen på vissa Azure SQL Database-resurser</span><span class="sxs-lookup"><span data-stu-id="10b76-116">Maximum limit reached on some Azure SQL Database resources</span></span>

<span data-ttu-id="10b76-117">I allmänhet kan problem med anslutningen till Azure SQL Database klassificeras enligt följande:</span><span class="sxs-lookup"><span data-stu-id="10b76-117">Generally, connection issues to Azure SQL Database can be classified as follows:</span></span>

* [<span data-ttu-id="10b76-118">Tillfälligt fel (tillfällig eller återkommande)</span><span class="sxs-lookup"><span data-stu-id="10b76-118">Transient errors (short-lived or intermittent)</span></span>](#troubleshoot-transient-errors)
* [<span data-ttu-id="10b76-119">Beständiga eller inte är tillfällig fel (fel regelbundet återkommande)</span><span class="sxs-lookup"><span data-stu-id="10b76-119">Persistent or non-transient errors (errors that regularly recur)</span></span>](#troubleshoot-persistent-errors)

## <a name="try-the-troubleshooter-for-azure-sql-database-connectivity-issues"></a><span data-ttu-id="10b76-120">Försök med felsökaren för Azure SQL Database-anslutningsproblem</span><span class="sxs-lookup"><span data-stu-id="10b76-120">Try the troubleshooter for Azure SQL Database connectivity issues</span></span>
<span data-ttu-id="10b76-121">Om du stöter på en specifik anslutningsfel, försök [verktyget](https://support.microsoft.com/help/10085/troubleshooting-connectivity-issues-with-microsoft-azure-sql-database), som kommer att du snabbt identitet och lösa problemet.</span><span class="sxs-lookup"><span data-stu-id="10b76-121">If you encounter a specific connection error, try [this tool](https://support.microsoft.com/help/10085/troubleshooting-connectivity-issues-with-microsoft-azure-sql-database), which will help you quickly identity and resolve your problem.</span></span>

## <a name="troubleshoot-transient-errors"></a><span data-ttu-id="10b76-122">Felsök tillfälliga fel</span><span class="sxs-lookup"><span data-stu-id="10b76-122">Troubleshoot transient errors</span></span>

<span data-ttu-id="10b76-123">När ett program ansluter till en Azure SQL database, visas följande felmeddelande:</span><span class="sxs-lookup"><span data-stu-id="10b76-123">When an application connects to an Azure SQL database, you receive the following error message:</span></span>

```
Error code 40613: "Database <x> on server <y> is not currently available. Please retry the connection later. If the problem persists, contact customer support, and provide them the session tracing ID of <z>"
```

> [!NOTE]
> <span data-ttu-id="10b76-124">Det här felmeddelandet är vanligen övergående (tillfällig).</span><span class="sxs-lookup"><span data-stu-id="10b76-124">This error message is typically transient (short-lived).</span></span>
> 
> 

<span data-ttu-id="10b76-125">Felet uppstår när Azure-databas håller på att flytta (eller omkonfigureras) och ditt program förlorar sin anslutning till SQL-databasen.</span><span class="sxs-lookup"><span data-stu-id="10b76-125">This error occurs when the Azure database is being moved (or reconfigured) and your application loses its connection to the SQL database.</span></span> <span data-ttu-id="10b76-126">SQL-databas omkonfiguration händelser inträffar på grund av en planerad åtgärd (till exempel programuppdatering) eller en oväntad händelse (till exempel en process krasch eller belastningsutjämning).</span><span class="sxs-lookup"><span data-stu-id="10b76-126">SQL database reconfiguration events occur because of a planned event (for example, a software upgrade) or an unplanned event (for example, a process crash, or load balancing).</span></span> <span data-ttu-id="10b76-127">De flesta omkonfiguration händelser är vanligtvis tillfällig och högst ska slutföras på mindre än 60 sekunder.</span><span class="sxs-lookup"><span data-stu-id="10b76-127">Most reconfiguration events are generally short-lived and should be completed in less than 60 seconds at most.</span></span> <span data-ttu-id="10b76-128">Dessa händelser kan emellertid ibland ta längre tid att slutföra, till exempel när en stor transaktion medför en tidskrävande återställning.</span><span class="sxs-lookup"><span data-stu-id="10b76-128">However, these events can occasionally take longer to finish, such as when a large transaction causes a long-running recovery.</span></span>

### <a name="steps-to-resolve-transient-connectivity-issues"></a><span data-ttu-id="10b76-129">Åtgärder för att lösa tillfälligt anslutningsproblem</span><span class="sxs-lookup"><span data-stu-id="10b76-129">Steps to resolve transient connectivity issues</span></span>

1. <span data-ttu-id="10b76-130">Kontrollera den [Microsoft Azure Service instrumentpanelen](https://azure.microsoft.com/status) för alla kända avbrott som har inträffat under den tid under vilken fel rapporterades av programmet.</span><span class="sxs-lookup"><span data-stu-id="10b76-130">Check the [Microsoft Azure Service Dashboard](https://azure.microsoft.com/status) for any known outages that occurred during the time during which the errors were reported by the application.</span></span>
2. <span data-ttu-id="10b76-131">Program som ansluter till en molntjänst som Azure SQL Database ska förvänta sig periodiska omkonfiguration händelser och implementera försök logik för att hantera de här felen i stället för att visa dessa som programfel för användare.</span><span class="sxs-lookup"><span data-stu-id="10b76-131">Applications that connect to a cloud service such as Azure SQL Database should expect periodic reconfiguration events and implement retry logic to handle these errors instead of surfacing these as application errors to users.</span></span> <span data-ttu-id="10b76-132">Granska de [tillfälliga fel](sql-database-connectivity-issues.md) avsnittet och metodtips och riktlinjer för utformning på [Utvecklingsöversikt för SQL-databasen](sql-database-develop-overview.md) försök strategier för mer information och allmänna.</span><span class="sxs-lookup"><span data-stu-id="10b76-132">Review the [Transient errors](sql-database-connectivity-issues.md) section and the best practices and design guidelines at [SQL Database Development Overview](sql-database-develop-overview.md) for more information and general retry strategies.</span></span> <span data-ttu-id="10b76-133">Kontrollera kodexempel på [anslutningsbibliotek för SQL Database och SQL Server](sql-database-libraries.md) för specifik information.</span><span class="sxs-lookup"><span data-stu-id="10b76-133">Then, see code samples at [Connection Libraries for SQL Database and SQL Server](sql-database-libraries.md) for specifics.</span></span>
3. <span data-ttu-id="10b76-134">När en databas närmar sig gränsen resurs, kan det verka vara ett tillfälligt anslutningsproblem.</span><span class="sxs-lookup"><span data-stu-id="10b76-134">As a database approaches its resource limits, it can seem to be a transient connectivity issue.</span></span> <span data-ttu-id="10b76-135">Se [felsökning av prestandaproblem med](sql-database-troubleshoot-performance.md).</span><span class="sxs-lookup"><span data-stu-id="10b76-135">See [Troubleshooting Performance Issues](sql-database-troubleshoot-performance.md).</span></span>
4. <span data-ttu-id="10b76-136">Om problem med nätverksanslutningen fortsätta, eller om den varaktighet som ditt program lider av felet är längre än 60 sekunder eller om du ser flera förekomster av felet under en viss dag, fil en Azure-supportbegäran genom att välja **få stöd för**på den [Azure-supporten](https://azure.microsoft.com/support/options) plats.</span><span class="sxs-lookup"><span data-stu-id="10b76-136">If connectivity problems continue, or if the duration for which your application encounters the error exceeds 60 seconds or if you see multiple occurrences of the error in a given day, file an Azure support request by selecting **Get Support** on the [Azure Support](https://azure.microsoft.com/support/options) site.</span></span>

## <a name="troubleshoot-persistent-errors"></a><span data-ttu-id="10b76-137">Felsöka beständiga</span><span class="sxs-lookup"><span data-stu-id="10b76-137">Troubleshoot persistent errors</span></span>
<span data-ttu-id="10b76-138">Om programmet beständigt misslyckas med att ansluta till Azure SQL Database anger vanligtvis ett problem med något av följande:</span><span class="sxs-lookup"><span data-stu-id="10b76-138">If the application persistently fails to connect to Azure SQL Database, it usually indicates an issue with one of the following:</span></span>

* <span data-ttu-id="10b76-139">Brandväggskonfigurationen.</span><span class="sxs-lookup"><span data-stu-id="10b76-139">Firewall configuration.</span></span> <span data-ttu-id="10b76-140">Azure SQL database eller klientsidan brandväggen blockerar anslutningar till Azure SQL Database.</span><span class="sxs-lookup"><span data-stu-id="10b76-140">The Azure SQL database or client-side firewall is blocking connections to Azure SQL Database.</span></span>
* <span data-ttu-id="10b76-141">Nätverk omkonfiguration på klientsidan: till exempel en ny IP-adress eller en proxyserver.</span><span class="sxs-lookup"><span data-stu-id="10b76-141">Network reconfiguration on the client side: for example, a new IP address or a proxy server.</span></span>
* <span data-ttu-id="10b76-142">Fel: till exempel skrev du fel anslutningsparametrar, till exempel servernamnet i anslutningssträngen.</span><span class="sxs-lookup"><span data-stu-id="10b76-142">User error: for example, mistyped connection parameters, such as the server name in the connection string.</span></span>

### <a name="steps-to-resolve-persistent-connectivity-issues"></a><span data-ttu-id="10b76-143">Åtgärder för att lösa problem med nätverksanslutningen beständiga</span><span class="sxs-lookup"><span data-stu-id="10b76-143">Steps to resolve persistent connectivity issues</span></span>
1. <span data-ttu-id="10b76-144">Ställ in [regler i brandväggen](sql-database-configure-firewall-settings.md) som tillåter klientens IP-adress.</span><span class="sxs-lookup"><span data-stu-id="10b76-144">Set up [firewall rules](sql-database-configure-firewall-settings.md) to allow the client IP address.</span></span> <span data-ttu-id="10b76-145">För tillfällig testning, ställa in en brandväggsregel med 0.0.0.0 som det första IP-adressintervallet och använda 255.255.255.255 som det sista IP-adressintervallet.</span><span class="sxs-lookup"><span data-stu-id="10b76-145">For temporary testing purposes, set up a firewall rule using 0.0.0.0 as the starting IP address range and using 255.255.255.255 as the ending IP address range.</span></span> <span data-ttu-id="10b76-146">Då öppnas server till alla IP-adresser.</span><span class="sxs-lookup"><span data-stu-id="10b76-146">This will open the server to all IP addresses.</span></span> <span data-ttu-id="10b76-147">Om det löser problemet med anslutningen, ta bort den här regeln och skapa en brandväggsregel för en korrekt begränsade IP-adressen eller adressintervallet.</span><span class="sxs-lookup"><span data-stu-id="10b76-147">If this resolves your connectivity issue, remove this rule and create a firewall rule for an appropriately limited IP address or address range.</span></span> 
2. <span data-ttu-id="10b76-148">Kontrollera att port 1433 är öppen för utgående anslutningar på alla brandväggar mellan klienten och Internet.</span><span class="sxs-lookup"><span data-stu-id="10b76-148">On all firewalls between the client and the Internet, make sure that port 1433 is open for outbound connections.</span></span> <span data-ttu-id="10b76-149">Granska [konfigurera Windows-brandväggen att tillåta åtkomst för SQL Server](https://msdn.microsoft.com/library/cc646023.aspx) och [Hybrid Identity krävs portar och protokoll](https://docs.microsoft.com/azure/active-directory/connect/active-directory-aadconnect-ports) för ytterligare Pekare rör ytterligare portar som behövs för att öppna för Azure Active Directory-autentisering.</span><span class="sxs-lookup"><span data-stu-id="10b76-149">Review [Configure the Windows Firewall to Allow SQL Server Access](https://msdn.microsoft.com/library/cc646023.aspx) and [Hybrid Identity Required Ports and Protocols](https://docs.microsoft.com/azure/active-directory/connect/active-directory-aadconnect-ports) for additional pointers related to additional ports that you need to open for Azure Active Directory authentication.</span></span>
3. <span data-ttu-id="10b76-150">Kontrollera anslutningssträngen och andra inställningar.</span><span class="sxs-lookup"><span data-stu-id="10b76-150">Verify your connection string and other connection settings.</span></span> <span data-ttu-id="10b76-151">Se avsnittet anslutningssträngen i den [anslutning problem avsnittet](sql-database-connectivity-issues.md#connections-to-azure-sql-database).</span><span class="sxs-lookup"><span data-stu-id="10b76-151">See the Connection String section in the [connectivity issues topic](sql-database-connectivity-issues.md#connections-to-azure-sql-database).</span></span>
4. <span data-ttu-id="10b76-152">Kontrollera tjänstens hälsa i instrumentpanelen.</span><span class="sxs-lookup"><span data-stu-id="10b76-152">Check service health in the dashboard.</span></span> <span data-ttu-id="10b76-153">Om du tror att det finns ett regionalt strömavbrott, se [återställa från avbrott](sql-database-disaster-recovery.md) steg för att återställa till en ny region.</span><span class="sxs-lookup"><span data-stu-id="10b76-153">If you think there’s a regional outage, see [Recover from an outage](sql-database-disaster-recovery.md) for steps to recover to a new region.</span></span>

## <a name="next-steps"></a><span data-ttu-id="10b76-154">Nästa steg</span><span class="sxs-lookup"><span data-stu-id="10b76-154">Next steps</span></span>
* [<span data-ttu-id="10b76-155">Felsökning av problem med Azure SQL Database prestanda</span><span class="sxs-lookup"><span data-stu-id="10b76-155">Troubleshoot Azure SQL Database performance issues</span></span>](sql-database-troubleshoot-performance.md)
* [<span data-ttu-id="10b76-156">Sök i dokumentationen på Microsoft Azure</span><span class="sxs-lookup"><span data-stu-id="10b76-156">Search the documentation on Microsoft Azure</span></span>](http://azure.microsoft.com/search/documentation/)
* [<span data-ttu-id="10b76-157">Visa de senaste uppdateringarna till Azure SQL Database-tjänsten</span><span class="sxs-lookup"><span data-stu-id="10b76-157">View the latest updates to the Azure SQL Database service</span></span>](http://azure.microsoft.com/updates/?service=sql-database)

## <a name="additional-resources"></a><span data-ttu-id="10b76-158">Ytterligare resurser</span><span class="sxs-lookup"><span data-stu-id="10b76-158">Additional resources</span></span>
* [<span data-ttu-id="10b76-159">Översikt över SQL Database-utveckling</span><span class="sxs-lookup"><span data-stu-id="10b76-159">SQL Database Development Overview</span></span>](sql-database-develop-overview.md)
* [<span data-ttu-id="10b76-160">Allmänna riktlinjer för tillfälliga fel-hantering</span><span class="sxs-lookup"><span data-stu-id="10b76-160">General transient fault-handling guidance</span></span>](../best-practices-retry-general.md)
* [<span data-ttu-id="10b76-161">Anslutningsbibliotek för SQL Database och SQL Server</span><span class="sxs-lookup"><span data-stu-id="10b76-161">Connection libraries for SQL Database and SQL Server</span></span>](sql-database-libraries.md)


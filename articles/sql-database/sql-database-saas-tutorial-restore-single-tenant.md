---
title: "aaaRestore en Azure SQL-databas i en app för flera innehavare | Microsoft Docs"
description: "Lär dig hur toorestore en enda innehavare SQL database när data har tagits bort av misstag"
keywords: sql database tutorial
services: sql-database
documentationcenter: 
author: stevestein
manager: jhubbard
editor: 
ms.assetid: 
ms.service: sql-database
ms.custom: scale out apps
ms.workload: data-management
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 05/10/2017
ms.author: billgib;sstein
ms.openlocfilehash: 8507ecec2424c135f1859b88ebf2bb4e17538a58
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: sv-SE
ms.lasthandoff: 10/06/2017
---
# <a name="restore-a-wingtip-saas-tenants-sql-database"></a><span data-ttu-id="30d3d-104">Återställa en Wingtip SaaS hyresgäster SQL-databas</span><span class="sxs-lookup"><span data-stu-id="30d3d-104">Restore a Wingtip SaaS tenants SQL database</span></span>

<span data-ttu-id="30d3d-105">hello Wingtip SaaS-appar skapas med en databas per klient-modell där varje innehavare har sin egen databas.</span><span class="sxs-lookup"><span data-stu-id="30d3d-105">hello Wingtip SaaS app is built using a database-per-tenant model, where each tenant has their own database.</span></span> <span data-ttu-id="30d3d-106">En av hello fördelarna med den här modellen är att det är enkelt toorestore data för en enskild klient i isolering utan att påverka andra klienter.</span><span class="sxs-lookup"><span data-stu-id="30d3d-106">One of hello benefits of this model is that it is easy toorestore a single tenant’s data in isolation without impacting other tenants.</span></span>

<span data-ttu-id="30d3d-107">Lär dig två mönster för återställning av data i den här självstudiekursen:</span><span class="sxs-lookup"><span data-stu-id="30d3d-107">In this tutorial you learn two data recovery patterns:</span></span>

> [!div class="checklist"]

> * <span data-ttu-id="30d3d-108">Återställa en databas till en parallell databasen (sida-vid-sida)</span><span class="sxs-lookup"><span data-stu-id="30d3d-108">Restore a database into a parallel database (side-by-side)</span></span>
> * <span data-ttu-id="30d3d-109">Återställa en databas på plats</span><span class="sxs-lookup"><span data-stu-id="30d3d-109">Restore a database in place</span></span>


|||
|:--|:--|
| <span data-ttu-id="30d3d-110">**Återställningspunkt klient tooa tidigare tidpunkt, till en parallell databas**</span><span class="sxs-lookup"><span data-stu-id="30d3d-110">**Restore tenant tooa prior point in time, into a parallel database**</span></span> | <span data-ttu-id="30d3d-111">Det här mönstret kan användas av hello klient för granskning, granskning, kompatibilitet, etc. hello ursprungliga databasen är online och oförändrade.</span><span class="sxs-lookup"><span data-stu-id="30d3d-111">This pattern can be used by hello tenant for review, auditing, compliance, etc. hello original database remains online and unchanged.</span></span> |
| <span data-ttu-id="30d3d-112">**Återställa klient på plats**</span><span class="sxs-lookup"><span data-stu-id="30d3d-112">**Restore tenant in-place**</span></span> | <span data-ttu-id="30d3d-113">Det här mönstret är brukar användas toorecover en klient tooa tidigare punkt i tid, när en klient att av misstag tar bort data.</span><span class="sxs-lookup"><span data-stu-id="30d3d-113">This pattern is typically used toorecover a tenant tooa prior point in time, after a tenant accidentally deletes data.</span></span> <span data-ttu-id="30d3d-114">hello originaldatabasen tas offline och ersätts med hello återställda databasen.</span><span class="sxs-lookup"><span data-stu-id="30d3d-114">hello original database is taken offline, and replaced with hello restored database.</span></span> |
|||

<span data-ttu-id="30d3d-115">den här självstudiekursen, se till att hello följande krav är slutförda toocomplete:</span><span class="sxs-lookup"><span data-stu-id="30d3d-115">toocomplete this tutorial, make sure hello following prerequisites are completed:</span></span>

* <span data-ttu-id="30d3d-116">hello Wingtip SaaS appen har distribuerats.</span><span class="sxs-lookup"><span data-stu-id="30d3d-116">hello Wingtip SaaS app is deployed.</span></span> <span data-ttu-id="30d3d-117">toodeploy på mindre än fem minuter finns [distribuera och utforska hello Wingtip SaaS-program](sql-database-saas-tutorial.md)</span><span class="sxs-lookup"><span data-stu-id="30d3d-117">toodeploy in less than five minutes, see [Deploy and explore hello Wingtip SaaS application](sql-database-saas-tutorial.md)</span></span>
* <span data-ttu-id="30d3d-118">Azure PowerShell ska ha installerats.</span><span class="sxs-lookup"><span data-stu-id="30d3d-118">Azure PowerShell is installed.</span></span> <span data-ttu-id="30d3d-119">Mer information finns i [Komma igång med Azure PowerShell](https://docs.microsoft.com/powershell/azure/get-started-azureps)</span><span class="sxs-lookup"><span data-stu-id="30d3d-119">For details, see [Getting started with Azure PowerShell](https://docs.microsoft.com/powershell/azure/get-started-azureps)</span></span>

## <a name="introduction-toohello-saas-tenant-restore-pattern"></a><span data-ttu-id="30d3d-120">Introduktion toohello SaaS klient återställning mönster</span><span class="sxs-lookup"><span data-stu-id="30d3d-120">Introduction toohello SaaS tenant restore pattern</span></span>

<span data-ttu-id="30d3d-121">Återställa mönster för hello klient finns det två enkla mönster för att återställa en enskild klientorganisation data.</span><span class="sxs-lookup"><span data-stu-id="30d3d-121">For hello tenant restore pattern, there are two simple patterns for restoring an individual tenant's data.</span></span> <span data-ttu-id="30d3d-122">Eftersom klienten databaser är isolerade från varandra, har återställa en klient ingen inverkan på data för alla andra innehavare.</span><span class="sxs-lookup"><span data-stu-id="30d3d-122">Because tenant databases are isolated from each other, restoring one tenant has no impact on any other tenant's data.</span></span>

<span data-ttu-id="30d3d-123">Data har återställts till en ny databas i hello första mönstret.</span><span class="sxs-lookup"><span data-stu-id="30d3d-123">In hello first pattern, data is restored into a new database.</span></span> <span data-ttu-id="30d3d-124">hello klient sedan får åtkomst toothis databasen tillsammans med deras produktionsdata.</span><span class="sxs-lookup"><span data-stu-id="30d3d-124">hello tenant is then given access toothis database alongside their production data.</span></span> <span data-ttu-id="30d3d-125">Det här mönstret gör en klient admin tooreview hello återställt data och använda den potentiellt tooselectively skriva över den aktuella värden.</span><span class="sxs-lookup"><span data-stu-id="30d3d-125">This pattern allows a tenant admin tooreview hello restored data and potentially use it tooselectively overwrite current data values.</span></span> <span data-ttu-id="30d3d-126">Är det upp toohello SaaS app designer toodetermine hur avancerade hello dataåterställning alternativ ska vara.</span><span class="sxs-lookup"><span data-stu-id="30d3d-126">It's up toohello SaaS app designer toodetermine just how sophisticated hello data recovery options should be.</span></span> <span data-ttu-id="30d3d-127">Som bara kan tooreview data i hello tillstånd den hade vid en viss tidpunkt kan vara allt som krävs i vissa scenarier.</span><span class="sxs-lookup"><span data-stu-id="30d3d-127">Simply being able tooreview data in hello state it was in at a given point in time may be all that is required in some scenarios.</span></span> <span data-ttu-id="30d3d-128">Om hello databasen använder [georeplikering](sql-database-geo-replication-overview.md), rekommenderar vi att kopiera hello krävs data från hello återställts kopierar till hello originaldatabasen.</span><span class="sxs-lookup"><span data-stu-id="30d3d-128">If hello database uses [geo-replication](sql-database-geo-replication-overview.md), we recommend copying hello required data from hello restored copy into hello original database.</span></span> <span data-ttu-id="30d3d-129">Om du ersätter hello originaldatabasen med hello återställs databasen behöver tooreconfigure och synkronisera om geo-replikering.</span><span class="sxs-lookup"><span data-stu-id="30d3d-129">If you replace hello original database with hello restored database, you need tooreconfigure and resynchronize geo-replication.</span></span>

<span data-ttu-id="30d3d-130">I andra hello-mönster, vilket förutsätter att hello-klient har haft en förlust eller data skadas, återställs hello klient produktionsdatabasen tooa tidigare tidpunkt.</span><span class="sxs-lookup"><span data-stu-id="30d3d-130">In hello second pattern, which assumes that hello tenant has suffered a loss or corruption of data, hello tenant’s production database is restored tooa prior point in time.</span></span> <span data-ttu-id="30d3d-131">Hej för återställning i plats-mönster tas hello klient offline under en kort tid när hello databasen återställs och online igen.</span><span class="sxs-lookup"><span data-stu-id="30d3d-131">In hello restore in place pattern, hello tenant is taken offline for a brief time while hello database is restored and brought back online.</span></span> <span data-ttu-id="30d3d-132">hello originaldatabasen tas bort, men kan fortfarande återställa från om du behöver toogo tillbaka tooan även tidigare tidpunkt.</span><span class="sxs-lookup"><span data-stu-id="30d3d-132">hello original database is deleted, but can still be restored from if you need toogo back tooan even earlier point in time.</span></span> <span data-ttu-id="30d3d-133">En variant av det här mönstret kunde hello ändra databasens namn i stället för att ta bort den, även om namnbyte hello-databasen innehåller inga ytterligare fördelar vad gäller datasäkerheten.</span><span class="sxs-lookup"><span data-stu-id="30d3d-133">A variation of this pattern could rename hello database instead of deleting it, although renaming hello database offers no additional advantage in terms of data security.</span></span>

## <a name="get-hello-wingtip-application-scripts"></a><span data-ttu-id="30d3d-134">Hämta hello Wingtip programskript</span><span class="sxs-lookup"><span data-stu-id="30d3d-134">Get hello Wingtip application scripts</span></span>

<span data-ttu-id="30d3d-135">hello Wingtip SaaS-skript och programmets källkod är tillgängliga i hello [WingtipSaaS](https://github.com/Microsoft/WingtipSaaS) github-lagringsplatsen.</span><span class="sxs-lookup"><span data-stu-id="30d3d-135">hello Wingtip SaaS scripts and application source code are available in hello [WingtipSaaS](https://github.com/Microsoft/WingtipSaaS) github repo.</span></span> <span data-ttu-id="30d3d-136">[Steg toodownload hello Wingtip SaaS skript](sql-database-wtp-overview.md#download-and-unblock-the-wingtip-saas-scripts).</span><span class="sxs-lookup"><span data-stu-id="30d3d-136">[Steps toodownload hello Wingtip SaaS scripts](sql-database-wtp-overview.md#download-and-unblock-the-wingtip-saas-scripts).</span></span>

## <a name="simulate-a-tenant-accidentally-deleting-data"></a><span data-ttu-id="30d3d-137">Simulera en klient oavsiktlig borttagning av data</span><span class="sxs-lookup"><span data-stu-id="30d3d-137">Simulate a tenant accidentally deleting data</span></span>

<span data-ttu-id="30d3d-138">toodemonstrate dessa återställningsscenarier måste för*av misstag* ta bort vissa data i någon av hello klient databaser.</span><span class="sxs-lookup"><span data-stu-id="30d3d-138">toodemonstrate these recovery scenarios, we need too*accidentally* delete some data in one of hello tenant databases.</span></span> <span data-ttu-id="30d3d-139">Du kan ta bort en post, hämta hello nästa steg ställer in hello demo toonot blockeras av referensintegritet överträdelser!</span><span class="sxs-lookup"><span data-stu-id="30d3d-139">While you can delete any record, hello next step sets up hello demo toonot get blocked by referential integrity violations!</span></span> <span data-ttu-id="30d3d-140">Det ger också vissa biljett köp data som du kan använda senare i hello *Wingtip SaaS Analytics-självstudier*.</span><span class="sxs-lookup"><span data-stu-id="30d3d-140">It also adds some ticket purchase data you can use later in hello *Wingtip SaaS Analytics tutorials*.</span></span>

<span data-ttu-id="30d3d-141">Kör hello biljett generator skript och skapa ytterligare data.</span><span class="sxs-lookup"><span data-stu-id="30d3d-141">Run hello ticket generator script and create additional data.</span></span> <span data-ttu-id="30d3d-142">hello biljett generator köpa avsiktligt inte biljetter för varje innehavare senaste händelse.</span><span class="sxs-lookup"><span data-stu-id="30d3d-142">hello ticket generator intentionally does not purchase tickets for each tenants last event.</span></span>

1. <span data-ttu-id="30d3d-143">Öppna... \\Learning moduler\\verktyg\\*Demo-TicketGenerator.ps1* i hello *PowerShell ISE*</span><span class="sxs-lookup"><span data-stu-id="30d3d-143">Open ...\\Learning Modules\\Utilities\\*Demo-TicketGenerator.ps1* in hello *PowerShell ISE*</span></span>
1. <span data-ttu-id="30d3d-144">Tryck på **F5** toorun hello skript och generera kunder och biljett försäljningsinformation.</span><span class="sxs-lookup"><span data-stu-id="30d3d-144">Press **F5** toorun hello script and generate customers and ticket sales data.</span></span>


### <a name="open-hello-events-app-tooreview-hello-current-events"></a><span data-ttu-id="30d3d-145">Öppna hello händelser app tooreview hello aktuella händelser</span><span class="sxs-lookup"><span data-stu-id="30d3d-145">Open hello Events app tooreview hello current events</span></span>

1. <span data-ttu-id="30d3d-146">Öppna hello *händelser hubb* (http://events.wtp.&lt; användaren&gt;. trafficmanager.net) och klicka på **Contoso samklang Hall**:</span><span class="sxs-lookup"><span data-stu-id="30d3d-146">Open hello *Events Hub* (http://events.wtp.&lt;user&gt;.trafficmanager.net) and click **Contoso Concert Hall**:</span></span>

   ![evenemangshubben](media/sql-database-saas-tutorial-restore-single-tenant/events-hub.png)

1. <span data-ttu-id="30d3d-148">Rulla hello lista över händelser och anteckna hello sista händelsen i hello lista:</span><span class="sxs-lookup"><span data-stu-id="30d3d-148">Scroll hello list of events and make a note of hello last event in hello list:</span></span>

   ![Senaste händelse](media/sql-database-saas-tutorial-restore-single-tenant/last-event.png)


### <a name="run-hello-demo-scenario-tooaccidentally-delete-hello-last-event"></a><span data-ttu-id="30d3d-150">Kör hello demo scenariot tooaccidentally delete hello senaste händelse</span><span class="sxs-lookup"><span data-stu-id="30d3d-150">Run hello demo scenario tooaccidentally delete hello last event</span></span>

1. <span data-ttu-id="30d3d-151">Öppna... \\Learning moduler\\affärskontinuitet och Haveriberedskap\\RestoreTenant\\*Demo-RestoreTenant.ps1* i hello *PowerShell ISE*, och ange hello följande värde:</span><span class="sxs-lookup"><span data-stu-id="30d3d-151">Open ...\\Learning Modules\\Business Continuity and Disaster Recovery\\RestoreTenant\\*Demo-RestoreTenant.ps1* in hello *PowerShell ISE*, and set hello following value:</span></span>
   * <span data-ttu-id="30d3d-152">**$DemoScenario** = **1**, Ställ in för**1** -ta bort händelser utan biljett försäljning.</span><span class="sxs-lookup"><span data-stu-id="30d3d-152">**$DemoScenario** = **1**, Set too**1** - Delete events with no ticket sales.</span></span>
1. <span data-ttu-id="30d3d-153">Tryck på **F5** toorun hello skript och ta bort hello senaste händelse.</span><span class="sxs-lookup"><span data-stu-id="30d3d-153">Press **F5** toorun hello script and delete hello last event.</span></span> <span data-ttu-id="30d3d-154">Du bör se en bekräftelse meddelande liknande toohello följande:</span><span class="sxs-lookup"><span data-stu-id="30d3d-154">You should see a confirmation message similar toohello following:</span></span>

   ```Console
   Deleting unsold events from Contoso Concert Hall ...
   Deleted event 'Seriously Strauss' from Contoso Concert Hall venue.
   ```

1. <span data-ttu-id="30d3d-155">hello Contoso händelser sidan öppnas.</span><span class="sxs-lookup"><span data-stu-id="30d3d-155">hello Contoso events page opens.</span></span> <span data-ttu-id="30d3d-156">Bläddra nedåt och verifiera hello händelsen är borta.</span><span class="sxs-lookup"><span data-stu-id="30d3d-156">Scroll down and verify hello event is gone.</span></span> <span data-ttu-id="30d3d-157">Om hello händelsen är fortfarande i hello-listan, klicka på Uppdatera och kontrollera att det är borta.</span><span class="sxs-lookup"><span data-stu-id="30d3d-157">If hello event is still in hello list, click refresh and verify it is gone.</span></span>

   ![Senaste händelse](media/sql-database-saas-tutorial-restore-single-tenant/last-event-deleted.png)


## <a name="restore-a-tenant-database-in-parallel-with-hello-production-database"></a><span data-ttu-id="30d3d-159">Återställa en databas klient parallellt med hello produktionsdatabasen</span><span class="sxs-lookup"><span data-stu-id="30d3d-159">Restore a tenant database in parallel with hello production database</span></span>

<span data-ttu-id="30d3d-160">Den här övningen återställer hello Contoso samklang Hall databasen tooa punkt i tiden innan hello händelsen har tagits bort.</span><span class="sxs-lookup"><span data-stu-id="30d3d-160">This exercise restores hello Contoso Concert Hall database tooa point in time before hello event was deleted.</span></span> <span data-ttu-id="30d3d-161">När hello händelsen har tagits bort i hello föregående steg, vill toorecover och se hello bort data.</span><span class="sxs-lookup"><span data-stu-id="30d3d-161">After hello event is deleted in hello previous steps, you want toorecover and see hello deleted data.</span></span> <span data-ttu-id="30d3d-162">Du behöver inte toorestore produktionsdatabasen med hello bort posten, men du måste toorecover hello gamla tooaccess hello gamla data från databasen för andra affärsskäl.</span><span class="sxs-lookup"><span data-stu-id="30d3d-162">You don't need toorestore your production database with hello deleted record, but you need toorecover hello old database tooaccess hello old data for other business reasons.</span></span>

 <span data-ttu-id="30d3d-163">Hej *återställning TenantInParallel.ps1* skriptet skapar en parallell klient-databasen och en parallell katalogpost både med namnet *ContosoConcertHall\_gamla*.</span><span class="sxs-lookup"><span data-stu-id="30d3d-163">hello *Restore-TenantInParallel.ps1* script creates a parallel tenant database, and a parallel catalog entry both named *ContosoConcertHall\_old*.</span></span> <span data-ttu-id="30d3d-164">Det här mönstret av återställning passar bäst för att återställa från en mindre dataförlust eller för efterlevnad och granskning återställningsscenarier.</span><span class="sxs-lookup"><span data-stu-id="30d3d-164">This pattern of restore is best suited for recovering from a minor data loss or for compliance and auditing recovery scenarios.</span></span> <span data-ttu-id="30d3d-165">Det är också hello rekommendationer när du använder [georeplikering](sql-database-geo-replication-overview.md).</span><span class="sxs-lookup"><span data-stu-id="30d3d-165">It is also hello recommended approach when you are using [geo-replication](sql-database-geo-replication-overview.md).</span></span>

1. <span data-ttu-id="30d3d-166">Fullständig hello [simulera en användare av misstag tar bort data](#simulate-a-tenant-accidentally-deleting-data) avsnitt.</span><span class="sxs-lookup"><span data-stu-id="30d3d-166">Complete hello [simulate a user accidentally deleting data](#simulate-a-tenant-accidentally-deleting-data) section.</span></span>
1. <span data-ttu-id="30d3d-167">Öppna... \\Learning moduler\\affärskontinuitet och Haveriberedskap\\RestoreTenant\\_Demo-RestoreTenant.ps1_ i hello *PowerShell ISE*.</span><span class="sxs-lookup"><span data-stu-id="30d3d-167">Open ...\\Learning Modules\\Business Continuity and Disaster Recovery\\RestoreTenant\\_Demo-RestoreTenant.ps1_ in hello *PowerShell ISE*.</span></span>
1. <span data-ttu-id="30d3d-168">Ange **$DemoScenario** = **2**, ställa in detta också**2** för*återställning klient parallellt*.</span><span class="sxs-lookup"><span data-stu-id="30d3d-168">Set **$DemoScenario** = **2**, Set this too**2** too*Restore tenant in parallel*.</span></span>
1. <span data-ttu-id="30d3d-169">Tryck på **F5** toorun hello skript.</span><span class="sxs-lookup"><span data-stu-id="30d3d-169">Press **F5** toorun hello script.</span></span>

<span data-ttu-id="30d3d-170">hello skript återställer hello klient database (tooa parallella databas) tooa punkt i tiden innan du tog bort hello händelse i hello föregående avsnitt.</span><span class="sxs-lookup"><span data-stu-id="30d3d-170">hello script restores hello tenant database (tooa parallel database) tooa point in time before you deleted hello event in hello previous section.</span></span> <span data-ttu-id="30d3d-171">Den skapar en andra databas, tar bort alla befintliga katalogen metadata som finns i den här databasen, och lägger till hello databasen toohello katalogen under hello *ContosoConcertHall\_gamla* post.</span><span class="sxs-lookup"><span data-stu-id="30d3d-171">It creates a second database, removes any existing catalog metadata that exists in this database, and adds hello database toohello catalog under hello *ContosoConcertHall\_old* entry.</span></span>

<span data-ttu-id="30d3d-172">Hej demoskript öppnar hello händelser sida i webbläsaren.</span><span class="sxs-lookup"><span data-stu-id="30d3d-172">hello demo script opens hello events page in your browser.</span></span> <span data-ttu-id="30d3d-173">Observera från hello URL: ```http://events.wtp.&lt;user&gt;.trafficmanager.net/contosoconcerthall_old``` att detta visar data från hello återställs databasen där *_old* läggs toohello namn.</span><span class="sxs-lookup"><span data-stu-id="30d3d-173">Note from hello URL: ```http://events.wtp.&lt;user&gt;.trafficmanager.net/contosoconcerthall_old``` that this is showing data from hello restored database where *_old* is added toohello name.</span></span>

<span data-ttu-id="30d3d-174">Rulla hello händelserna som anges i hello webbläsare tooconfirm som hello händelse bort hello föregående avsnitt har återställts.</span><span class="sxs-lookup"><span data-stu-id="30d3d-174">Scroll hello events listed in hello browser tooconfirm that hello event deleted in hello previous section has been restored.</span></span>

<span data-ttu-id="30d3d-175">Observera den medför hello återställts klientorganisationen som en ytterligare klient med egna händelser app toobrowse biljetter är inte troligt toobe hur skulle du anger en klient åtkomst toorestored data, men fungerar tooeasily illustrera hello återställning mönster.</span><span class="sxs-lookup"><span data-stu-id="30d3d-175">Note that exposing hello restored tenant as an additional tenant, with its own Events app toobrowse tickets, is unlikely toobe how you would provide a tenant access toorestored data, but serves tooeasily illustrate hello restore pattern.</span></span>

<span data-ttu-id="30d3d-176">I verkligheten, skulle du förmodligen bara behålla den här återställda databasen för en definierad period.</span><span class="sxs-lookup"><span data-stu-id="30d3d-176">In reality, you would probably only retain this restored database for a defined period.</span></span> <span data-ttu-id="30d3d-177">Du kan ta bort hello återställts klient post när du är klar genom att anropa hello *ta bort RestoredTenant.ps1* skript.</span><span class="sxs-lookup"><span data-stu-id="30d3d-177">You can delete hello restored tenant entry once you are finished by calling hello *Remove-RestoredTenant.ps1* script.</span></span>

1. <span data-ttu-id="30d3d-178">Ange **$DemoScenario** för**4** tooselect hello *ta bort återställts klient* scenario.</span><span class="sxs-lookup"><span data-stu-id="30d3d-178">Set **$DemoScenario** too**4** tooselect hello *remove restored tenant* scenario.</span></span>
1. <span data-ttu-id="30d3d-179">**Köra** **med** **F5**</span><span class="sxs-lookup"><span data-stu-id="30d3d-179">**Execute** **using** **F5**</span></span>
1. <span data-ttu-id="30d3d-180">Hej *ContosoConcertHall\_gamla* post tas bort nu hello-katalogen.</span><span class="sxs-lookup"><span data-stu-id="30d3d-180">hello *ContosoConcertHall\_old* entry is now deleted from hello catalog.</span></span> <span data-ttu-id="30d3d-181">Gå vidare och Stäng hello händelser sidan för den här klienten i webbläsaren.</span><span class="sxs-lookup"><span data-stu-id="30d3d-181">Go ahead and close hello events page for this tenant in your browser.</span></span>


## <a name="restore-a-tenant-in-place-replacing-hello-existing-tenant-database"></a><span data-ttu-id="30d3d-182">Återställa en klient på plats, ersätter hello befintlig klient-databas</span><span class="sxs-lookup"><span data-stu-id="30d3d-182">Restore a tenant in place, replacing hello existing tenant database</span></span>

<span data-ttu-id="30d3d-183">Den här övningen återställer hello Contoso samklang Hall klient tooa punkt i tiden innan hello händelsen har tagits bort.</span><span class="sxs-lookup"><span data-stu-id="30d3d-183">This exercise restores hello Contoso Concert Hall tenant tooa point in time before hello event was deleted.</span></span> <span data-ttu-id="30d3d-184">Hej *återställning TenantInPlace* skript återställer hello aktuella innehavaren tooa nya databasen pekar tooa tidigare punkt i tiden och borttagningar hello originaldatabasen.</span><span class="sxs-lookup"><span data-stu-id="30d3d-184">hello *Restore-TenantInPlace* script restores hello current tenant database tooa new database pointing tooa previous point in time, and deletes hello original database.</span></span> <span data-ttu-id="30d3d-185">Det här mönstret av återställning passar bäst för återställning från allvarliga datafel eftersom det kan finnas dataförluster som hello klient skulle ha tooaccommodate.</span><span class="sxs-lookup"><span data-stu-id="30d3d-185">This pattern of restore is best suited for recovering from serious data corruption as there may be significant data loss that hello tenant would have tooaccommodate.</span></span>

1. <span data-ttu-id="30d3d-186">Öppna **Demo-RestoreTenant.ps1** filen i PowerShell ISE</span><span class="sxs-lookup"><span data-stu-id="30d3d-186">Open **Demo-RestoreTenant.ps1** file in PowerShell ISE</span></span>
1. <span data-ttu-id="30d3d-187">Ange **$DemoScenario** för**5** tooselect hello *återställa klient i plats scenariot*.</span><span class="sxs-lookup"><span data-stu-id="30d3d-187">Set **$DemoScenario** too**5** tooselect hello *restore tenant in place scenario*.</span></span>
1. <span data-ttu-id="30d3d-188">Köra med **F5**.</span><span class="sxs-lookup"><span data-stu-id="30d3d-188">Execute using **F5**.</span></span>

<span data-ttu-id="30d3d-189">hello skript återställer hello klient databasen tooa punkt fem minuter innan hello händelsen har tagits bort.</span><span class="sxs-lookup"><span data-stu-id="30d3d-189">hello script restores hello tenant database tooa point five minutes before hello event was deleted.</span></span> <span data-ttu-id="30d3d-190">Den gör detta genom att först tar hello Contoso samklang Hall klient offline så att det finns ingen ytterligare uppdateringar toohello data.</span><span class="sxs-lookup"><span data-stu-id="30d3d-190">It does this by first taking hello Contoso Concert Hall tenant offline so there are no further updates toohello data.</span></span> <span data-ttu-id="30d3d-191">Sedan en parallell databas genom att återställa från hello återställningspunkt som namnges med en tidsstämpel tooensure hello databasnamnet inte står i konflikt med hello befintlig klient-databasnamn.</span><span class="sxs-lookup"><span data-stu-id="30d3d-191">Then, a parallel database is created by restoring from hello restore point and named with a timestamp tooensure hello database name does not conflict with hello existing tenant database name.</span></span> <span data-ttu-id="30d3d-192">Sedan hello gamla klient databasen tas bort och hello återställda databasen har bytt namn till toohello ursprungliga databasens namn.</span><span class="sxs-lookup"><span data-stu-id="30d3d-192">Next, hello old tenant database is deleted, and hello restored database is renamed toohello original database name.</span></span> <span data-ttu-id="30d3d-193">Slutligen tas Contoso samklang Hall online tooallow hello app åtkomst toohello återställa databasen.</span><span class="sxs-lookup"><span data-stu-id="30d3d-193">Finally, Contoso Concert Hall is brought online tooallow hello app access toohello restored database.</span></span>

<span data-ttu-id="30d3d-194">Du återställt har hello databasen tooa punkt i tiden innan hello händelsen har tagits bort.</span><span class="sxs-lookup"><span data-stu-id="30d3d-194">You successfully restored hello database tooa point in time before hello event was deleted.</span></span> <span data-ttu-id="30d3d-195">Hej händelser sidan öppnas, så kontrollera hello senaste händelse har återställts.</span><span class="sxs-lookup"><span data-stu-id="30d3d-195">hello Events page opens, so confirm hello last event has been restored.</span></span>


## <a name="next-steps"></a><span data-ttu-id="30d3d-196">Nästa steg</span><span class="sxs-lookup"><span data-stu-id="30d3d-196">Next steps</span></span>

<span data-ttu-id="30d3d-197">I den här självstudiekursen lärde du dig att:</span><span class="sxs-lookup"><span data-stu-id="30d3d-197">In this tutorial, you learned how to:</span></span>

> [!div class="checklist"]

> * <span data-ttu-id="30d3d-198">Återställa en databas till en parallell databasen (sida-vid-sida)</span><span class="sxs-lookup"><span data-stu-id="30d3d-198">Restore a database into a parallel database (side-by-side)</span></span>
> * <span data-ttu-id="30d3d-199">Återställa en databas på plats</span><span class="sxs-lookup"><span data-stu-id="30d3d-199">Restore a database in place</span></span>

[<span data-ttu-id="30d3d-200">Hantera databasschemat för klient</span><span class="sxs-lookup"><span data-stu-id="30d3d-200">Manage tenant database schema</span></span>](sql-database-saas-tutorial-schema-management.md)

## <a name="additional-resources"></a><span data-ttu-id="30d3d-201">Ytterligare resurser</span><span class="sxs-lookup"><span data-stu-id="30d3d-201">Additional resources</span></span>

* <span data-ttu-id="30d3d-202">Ytterligare [självstudier som bygger på hello Wingtip SaaS-program](sql-database-wtp-overview.md#sql-database-wingtip-saas-tutorials)</span><span class="sxs-lookup"><span data-stu-id="30d3d-202">Additional [tutorials that build upon hello Wingtip SaaS application](sql-database-wtp-overview.md#sql-database-wingtip-saas-tutorials)</span></span>
* [<span data-ttu-id="30d3d-203">Översikt över verksamhetskontinuitet med Azure SQL Database</span><span class="sxs-lookup"><span data-stu-id="30d3d-203">Overview of business continuity with Azure SQL Database</span></span>](sql-database-business-continuity.md)
* [<span data-ttu-id="30d3d-204">Lär dig mer om säkerhetskopiering av SQL-databaser</span><span class="sxs-lookup"><span data-stu-id="30d3d-204">Learn about SQL Database backups</span></span>](sql-database-automated-backups.md)

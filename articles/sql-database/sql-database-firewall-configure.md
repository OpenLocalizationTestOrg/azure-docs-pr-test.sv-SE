---
title: "Azure SQL Database-brandväggsregler | Microsoft Docs"
description: "Lär dig hur du konfigurerar en SQL Database-brandvägg med brandväggsregler på servernivå och databasnivå för att hantera åtkomst."
keywords: "databasbrandvägg"
services: sql-database
documentationcenter: 
author: BYHAM
manager: jhubbard
editor: cgronlun
tags: 
ms.assetid: ac57f84c-35c3-4975-9903-241c8059011e
ms.service: sql-database
ms.custom: security
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: data-management
ms.date: 04/10/2017
ms.author: rickbyh
ms.openlocfilehash: 583c91376418d20d34db17d57d3fa14a1e71cd3b
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: sv-SE
ms.lasthandoff: 07/11/2017
---
# <a name="azure-sql-database-server-level-and-database-level-firewall-rules"></a><span data-ttu-id="3deeb-104">Azure SQL Database server- och databasnivå brandväggsregler</span><span class="sxs-lookup"><span data-stu-id="3deeb-104">Azure SQL Database server-level and database-level firewall rules</span></span> 

<span data-ttu-id="3deeb-105">Microsoft Azure SQL Database tillhandahåller en relationsdatabastjänst för Azure och andra Internetbaserade program.</span><span class="sxs-lookup"><span data-stu-id="3deeb-105">Microsoft Azure SQL Database provides a relational database service for Azure and other Internet-based applications.</span></span> <span data-ttu-id="3deeb-106">För att skydda dina data förhindrar brandväggar all åtkomst till din databasserver tills du anger vilka datorer som har behörighet.</span><span class="sxs-lookup"><span data-stu-id="3deeb-106">To help protect your data, firewalls prevent all access to your database server until you specify which computers have permission.</span></span> <span data-ttu-id="3deeb-107">Brandväggen ger åtkomst till databaser baserat på vilken IP-adress som varje begäran kommer från.</span><span class="sxs-lookup"><span data-stu-id="3deeb-107">The firewall grants access to databases based on the originating IP address of each request.</span></span>

## <a name="overview"></a><span data-ttu-id="3deeb-108">Översikt</span><span class="sxs-lookup"><span data-stu-id="3deeb-108">Overview</span></span>

<span data-ttu-id="3deeb-109">Till en början blockeras all Transact-SQL-åtkomst till din Azure SQL-server av brandväggen.</span><span class="sxs-lookup"><span data-stu-id="3deeb-109">Initially, all Transact-SQL access to your Azure SQL server is blocked by the firewall.</span></span> <span data-ttu-id="3deeb-110">Om du vill börja använda din Azure SQL-server, måste du ange en eller flera servernivå brandväggsregler som tillåter åtkomst till Azure SQL-servern.</span><span class="sxs-lookup"><span data-stu-id="3deeb-110">To begin using your Azure SQL server, you must specify one or more server-level firewall rules that enable access to your Azure SQL server.</span></span> <span data-ttu-id="3deeb-111">Använd brandväggsreglerna för att ange vilka IP-adressintervall från Internet som tillåts samt för att ange om Azure-program kan försöka ansluta till din Azure SQL Database-server eller inte.</span><span class="sxs-lookup"><span data-stu-id="3deeb-111">Use the firewall rules to specify which IP address ranges from the Internet are allowed, and whether Azure applications can attempt to connect to your Azure SQL server.</span></span>

<span data-ttu-id="3deeb-112">Om du bara vill bevilja åtkomst till en av databaserna på din Azure SQL-server måste du skapa en regel på databasnivå för databasen.</span><span class="sxs-lookup"><span data-stu-id="3deeb-112">To selectively grant access to just one of the databases in your Azure SQL server, you must create a database-level rule for the required database.</span></span> <span data-ttu-id="3deeb-113">Ange ett IP-adressintervall för brandväggsregeln för databasen som ligger utanför det IP-adressintervall som angetts i brandväggsregeln på servernivå och kontrollera att klientens IP-adress ligger inom intervallet som angetts i regeln på databasnivå.</span><span class="sxs-lookup"><span data-stu-id="3deeb-113">Specify an IP address range for the database firewall rule that is beyond the IP address range specified in the server-level firewall rule, and ensure that the IP address of the client falls in the range specified in the database-level rule.</span></span>

<span data-ttu-id="3deeb-114">Anslutningsförsök från Internet och Azure måste först passera brandväggen innan de kan nå din Azure SQL-server eller SQL Database, som du ser i följande diagram:</span><span class="sxs-lookup"><span data-stu-id="3deeb-114">Connection attempts from the Internet and Azure must first pass through the firewall before they can reach your Azure SQL server or SQL Database, as shown in the following diagram:</span></span>

   ![Diagram över brandväggskonfigurationen.][1]

* <span data-ttu-id="3deeb-116">**Brandväggsregler på servernivå:** Dessa regler gör att klienterna kan komma åt hela Azure SQL-servern, det vill säga alla databaser som finns på samma logiska server.</span><span class="sxs-lookup"><span data-stu-id="3deeb-116">**Server-level firewall rules:** These rules enable clients to access your entire Azure SQL server, that is, all the databases within the same logical server.</span></span> <span data-ttu-id="3deeb-117">Dessa regler lagras i **huvuddatabasen**.</span><span class="sxs-lookup"><span data-stu-id="3deeb-117">These rules are stored in the **master** database.</span></span> <span data-ttu-id="3deeb-118">Brandväggsregler på servernivå kan konfigureras via portalen eller med hjälp av Transact-SQL-instruktioner.</span><span class="sxs-lookup"><span data-stu-id="3deeb-118">Server-level firewall rules can be configured by using the portal or by using Transact-SQL statements.</span></span> <span data-ttu-id="3deeb-119">Du måste vara prenumerationsägare eller prenumerationsdeltagare för att skapa brandväggsregler på servernivå med Azure Portal eller PowerShell.</span><span class="sxs-lookup"><span data-stu-id="3deeb-119">To create server-level firewall rules using the Azure portal or PowerShell, you must be the subscription owner or a subscription contributor.</span></span> <span data-ttu-id="3deeb-120">För att skapa en brandväggsregel på servernivå med hjälp av Transact-SQL, måste du ansluta till SQL Database-instansen med huvudsaklig inloggning på servernivå eller som Azure Active Directory-administratör (vilket innebär att en brandväggsregel på servernivå först måste ha skapats av en användare med Azure-behörighet).</span><span class="sxs-lookup"><span data-stu-id="3deeb-120">To create a server-level firewall rule using Transact-SQL, you must connect to the SQL Database instance as the server-level principal login or the Azure Active Directory administrator (which means that a server-level firewall rule must first be created by a user with Azure-level permissions).</span></span>
* <span data-ttu-id="3deeb-121">**Databasnivå brandväggsregler:** reglerna att klienter ska kunna komma åt vissa (säkrare) databaser inom samma logiska server.</span><span class="sxs-lookup"><span data-stu-id="3deeb-121">**Database-level firewall rules:** These rules enable clients to access certain (secure) databases within the same logical server.</span></span> <span data-ttu-id="3deeb-122">Du kan skapa reglerna för varje databas (inklusive den **master** database0) och de lagras i enskilda databaser.</span><span class="sxs-lookup"><span data-stu-id="3deeb-122">You can create these rules for each database (including the **master** database0) and they are stored in the individual databases.</span></span> <span data-ttu-id="3deeb-123">Brandväggsregler på databasnivå kan bara vara konfigurerad med hjälp av Transact-SQL-uttryck och endast när du har konfigurerat den första servernivå brandväggen.</span><span class="sxs-lookup"><span data-stu-id="3deeb-123">Database-level firewall rules can only be configured by using Transact-SQL statements and only after you have configured the first server-level firewall.</span></span> <span data-ttu-id="3deeb-124">Om du anger ett IP-adressintervall i brandväggsregeln på databasnivå som ligger utanför det intervall som angetts i brandväggsregeln på servernivå kan endast klienter som har IP-adresser som ligger i intervallet som angetts för databasnivån komma åt databasen.</span><span class="sxs-lookup"><span data-stu-id="3deeb-124">If you specify an IP address range in the database-level firewall rule that is outside the range specified in the server-level firewall rule, only those clients that have IP addresses in the database-level range can access the database.</span></span> <span data-ttu-id="3deeb-125">Du kan skapa upp till 128 brandväggsregler på databasnivå för en databas.</span><span class="sxs-lookup"><span data-stu-id="3deeb-125">You can have a maximum of 128 database-level firewall rules for a database.</span></span> <span data-ttu-id="3deeb-126">Brandväggsregler på databasnivå för databaserna master och användaren kan bara skapas och hanteras via Transact-SQL.</span><span class="sxs-lookup"><span data-stu-id="3deeb-126">Database-level firewall rules for master and user databases can only be created and managed through Transact-SQL.</span></span> <span data-ttu-id="3deeb-127">Mer information om hur du konfigurerar brandväggsregler på databasnivå finns exempel senare i den här artikeln och se [sp_set_database_firewall_rule (Azure SQL-databaser)](https://msdn.microsoft.com/library/dn270010.aspx).</span><span class="sxs-lookup"><span data-stu-id="3deeb-127">For more information on configuring database-level firewall rules, see the example later in this article and see [sp_set_database_firewall_rule (Azure SQL Databases)](https://msdn.microsoft.com/library/dn270010.aspx).</span></span>

<span data-ttu-id="3deeb-128">**Rekommendation:** Microsoft rekommenderar att du använder brandväggsregler på databasnivå när det är möjligt för att förbättra säkerheten och göra databasen mer portabel.</span><span class="sxs-lookup"><span data-stu-id="3deeb-128">**Recommendation:** Microsoft recommends using database-level firewall rules whenever possible to enhance security and to make your database more portable.</span></span> <span data-ttu-id="3deeb-129">Använd brandväggsregler på servernivå för administratörer och om du har många databaser med samma åtkomstkrav och du inte vill lägga tid på att konfigurera varje databas individuellt.</span><span class="sxs-lookup"><span data-stu-id="3deeb-129">Use server-level firewall rules for administrators and when you have many databases that have the same access requirements and you don't want to spend time configuring each database individually.</span></span>

> [!Note]
> <span data-ttu-id="3deeb-130">Information om portabla databaser i kontexten för företagskontinuitet finns i [Autentiseringskrav för haveriberedskap](sql-database-geo-replication-security-config.md).</span><span class="sxs-lookup"><span data-stu-id="3deeb-130">For information about portable databases in the context of business continuity, see [Authentication requirements for disaster recovery](sql-database-geo-replication-security-config.md).</span></span>
>

### <a name="connecting-from-the-internet"></a><span data-ttu-id="3deeb-131">Ansluta från Internet</span><span class="sxs-lookup"><span data-stu-id="3deeb-131">Connecting from the Internet</span></span>

<span data-ttu-id="3deeb-132">När en dator försöker ansluta till databasservern från Internet kontrollerar brandväggen den ursprungliga IP-adressen för begäran mot brandväggsreglerna på databasnivå för den databas anslutningen begär:</span><span class="sxs-lookup"><span data-stu-id="3deeb-132">When a computer attempts to connect to your database server from the Internet, the firewall first checks the originating IP address of the request against the database-level firewall rules, for the database that the connection is requesting:</span></span>

* <span data-ttu-id="3deeb-133">Om IP-adressen för begäran ligger inom ett intervall som anges i brandväggsreglerna på databasnivå godkänns anslutningen till din SQL Database som innehåller regeln.</span><span class="sxs-lookup"><span data-stu-id="3deeb-133">If the IP address of the request is within one of the ranges specified in the database-level firewall rules, the connection is granted to the SQL Database that contains the rule.</span></span>
* <span data-ttu-id="3deeb-134">Om IP-adressen för begäran inte ligger inom något av intervallen som anges i brandväggsregeln på databasnivå kontrollerar brandväggen brandväggsreglerna på servernivå.</span><span class="sxs-lookup"><span data-stu-id="3deeb-134">If the IP address of the request is not within one of the ranges specified in the database-level firewall rule, the server-level firewall rules are checked.</span></span> <span data-ttu-id="3deeb-135">Om IP-adressen för begäran ligger inom ett intervall som anges i brandväggsreglerna på servernivå godkänns anslutningen.</span><span class="sxs-lookup"><span data-stu-id="3deeb-135">If the IP address of the request is within one of the ranges specified in the server-level firewall rules, the connection is granted.</span></span> <span data-ttu-id="3deeb-136">Brandväggsregler på servernivå gäller för alla SQL-databaser på Azure SQL-servern.</span><span class="sxs-lookup"><span data-stu-id="3deeb-136">Server-level firewall rules apply to all SQL databases on the Azure SQL server.</span></span>  
* <span data-ttu-id="3deeb-137">Om IP-adressen för begäran inte är inom det intervall som anges i någon av databas- eller server-nivå brandväggsreglerna inte anslutningsbegäran.</span><span class="sxs-lookup"><span data-stu-id="3deeb-137">If the IP address of the request is not within the ranges specified in any of the database-level or server-level firewall rules, the connection request fails.</span></span>

> [!NOTE]
> <span data-ttu-id="3deeb-138">För att kunna komma åt Azure SQL Database från din lokala dator måste du kontrollera att brandväggen i nätverket och på den lokala datorn tillåter utgående kommunikation på TCP-port 1433.</span><span class="sxs-lookup"><span data-stu-id="3deeb-138">To access Azure SQL Database from your local computer, ensure the firewall on your network and local computer allows outgoing communication on TCP port 1433.</span></span>
> 

### <a name="connecting-from-azure"></a><span data-ttu-id="3deeb-139">Ansluta från Azure</span><span class="sxs-lookup"><span data-stu-id="3deeb-139">Connecting from Azure</span></span>
<span data-ttu-id="3deeb-140">Om du vill tillåta att program från Azure ansluter till din Azure SQL-server måste Azure-anslutningar vara aktiverade.</span><span class="sxs-lookup"><span data-stu-id="3deeb-140">To allow applications from Azure to connect to your Azure SQL server, Azure connections must be enabled.</span></span> <span data-ttu-id="3deeb-141">När ett program från Azure försöker ansluta till databasservern kontrollerar brandväggen att Azure-anslutningar tillåts.</span><span class="sxs-lookup"><span data-stu-id="3deeb-141">When an application from Azure attempts to connect to your database server, the firewall verifies that Azure connections are allowed.</span></span> <span data-ttu-id="3deeb-142">En brandväggsinställning med start- och slutadresser som är 0.0.0.0 anger att dessa anslutningar tillåts.</span><span class="sxs-lookup"><span data-stu-id="3deeb-142">A firewall setting with starting and ending address equal to 0.0.0.0 indicates these connections are allowed.</span></span> <span data-ttu-id="3deeb-143">Om anslutningsförsöket inte tillåts kommer begäran inte att nå Azure SQL Database-servern.</span><span class="sxs-lookup"><span data-stu-id="3deeb-143">If the connection attempt is not allowed, the request does not reach the Azure SQL Database server.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="3deeb-144">Det här alternativet konfigurerar brandväggen så att alla anslutningar från Azure tillåts, inklusive anslutningar från prenumerationer för andra kunder.</span><span class="sxs-lookup"><span data-stu-id="3deeb-144">This option configures the firewall to allow all connections from Azure including connections from the subscriptions of other customers.</span></span> <span data-ttu-id="3deeb-145">Om du väljer det här alternativet kontrollerar du att dina inloggnings- och användarbehörigheter begränsar åtkomsten till endast auktoriserade användare.</span><span class="sxs-lookup"><span data-stu-id="3deeb-145">When selecting this option, make sure your login and user permissions limit access to only authorized users.</span></span>
> 

## <a name="creating-and-managing-firewall-rules"></a><span data-ttu-id="3deeb-146">Skapa och hantera brandväggsregler</span><span class="sxs-lookup"><span data-stu-id="3deeb-146">Creating and managing firewall rules</span></span>
<span data-ttu-id="3deeb-147">Den första brandväggsinställningen på servernivå kan skapas med hjälp av [Azure-portalen](https://portal.azure.com/) eller programmässigt med [Azure PowerShell](https://msdn.microsoft.com/library/azure/dn546724.aspx), [Azure CLI](/cli/azure/sql/server/firewall-rule#create), eller [REST API](https://msdn.microsoft.com/library/azure/dn505712.aspx).</span><span class="sxs-lookup"><span data-stu-id="3deeb-147">The first server-level firewall setting can be created using the [Azure portal](https://portal.azure.com/) or programmatically using [Azure PowerShell](https://msdn.microsoft.com/library/azure/dn546724.aspx), [Azure CLI](/cli/azure/sql/server/firewall-rule#create), or the [REST API](https://msdn.microsoft.com/library/azure/dn505712.aspx).</span></span> <span data-ttu-id="3deeb-148">Efterföljande brandväggsregler på servernivå kan skapas och hanteras med hjälp av dessa metoder samt via Transact-SQL.</span><span class="sxs-lookup"><span data-stu-id="3deeb-148">Subsequent server-level firewall rules can be created and managed using these methods, and through Transact-SQL.</span></span> 

> [!IMPORTANT]
> <span data-ttu-id="3deeb-149">Brandväggsregler på databasnivå kan bara skapas och hanteras med hjälp av Transact-SQL.</span><span class="sxs-lookup"><span data-stu-id="3deeb-149">Database-level firewall rules can only be created and managed using Transact-SQL.</span></span> 
>

<span data-ttu-id="3deeb-150">För att förbättra prestanda cachelagras brandväggsregler på servernivå tillfälligt på databasnivå.</span><span class="sxs-lookup"><span data-stu-id="3deeb-150">To improve performance, server-level firewall rules are temporarily cached at the database level.</span></span> <span data-ttu-id="3deeb-151">Information om hur du uppdaterar cacheminnet finns i [DBCC FLUSHAUTHCACHE](https://msdn.microsoft.com/library/mt627793.aspx).</span><span class="sxs-lookup"><span data-stu-id="3deeb-151">To refresh the cache, see [DBCC FLUSHAUTHCACHE](https://msdn.microsoft.com/library/mt627793.aspx).</span></span> 

> [!TIP]
> <span data-ttu-id="3deeb-152">Du kan använda [SQL Database Auditing](sql-database-auditing.md) granska ändringar av server- och databasnivå brandvägg.</span><span class="sxs-lookup"><span data-stu-id="3deeb-152">You can use [SQL Database Auditing](sql-database-auditing.md) to audit server-level and database-level firewall changes.</span></span>
>

### <a name="azure-portal"></a><span data-ttu-id="3deeb-153">Azure Portal</span><span class="sxs-lookup"><span data-stu-id="3deeb-153">Azure portal</span></span>

<span data-ttu-id="3deeb-154">Om du vill ange en brandväggsregel på servernivå i Azure-portalen, går antingen du till sidan Översikt för Azure SQL database eller på översiktssidan för din logiska Azure Database-server.</span><span class="sxs-lookup"><span data-stu-id="3deeb-154">To set a server-level firewall rule in the Azure portal, you can either go to the Overview page for your Azure SQL database or the Overview page for your Azure Database logical server.</span></span>

> [!TIP]
> <span data-ttu-id="3deeb-155">En självstudiekurs finns [skapa en databas med hjälp av Azure portal](sql-database-get-started-portal.md).</span><span class="sxs-lookup"><span data-stu-id="3deeb-155">For a tutorial, see [Create a DB using the Azure portal](sql-database-get-started-portal.md).</span></span>
>

<span data-ttu-id="3deeb-156">**Från sidan för databas-översikt**</span><span class="sxs-lookup"><span data-stu-id="3deeb-156">**From database overview page**</span></span>

1. <span data-ttu-id="3deeb-157">Om du vill ange en brandväggsregel på servernivå från översiktssidan för databasen, klickar du på **ange serverbrandvägg** i verktygsfältet som visas i följande bild: den **brandväggsinställningar** öppnas sidan för SQL Database-servern.</span><span class="sxs-lookup"><span data-stu-id="3deeb-157">To set a server-level firewall rule from the database overview page, click **Set server firewall** on the toolbar as shown in the following image: The **Firewall settings** page for the SQL Database server opens.</span></span>

      ![brandväggsregler för server](./media/sql-database-get-started-portal/server-firewall-rule.png) 

2. <span data-ttu-id="3deeb-159">Klicka på **lägga till klientens IP-Adressen** i verktygsfältet för att lägga till IP-adressen för datorn du använder och klicka sedan på **spara**.</span><span class="sxs-lookup"><span data-stu-id="3deeb-159">Click **Add client IP** on the toolbar to add the IP address of the computer you are currently using and then click **Save**.</span></span> <span data-ttu-id="3deeb-160">En brandväggsregel på servernivå skapas för din aktuella IP-adress.</span><span class="sxs-lookup"><span data-stu-id="3deeb-160">A server-level firewall rule is created for your current IP address.</span></span>

      ![ange brandväggsregel för server](./media/sql-database-get-started-portal/server-firewall-rule-set.png) 

<span data-ttu-id="3deeb-162">**Från server översiktssida**</span><span class="sxs-lookup"><span data-stu-id="3deeb-162">**From server overview page**</span></span>

<span data-ttu-id="3deeb-163">På översiktssidan för servern öppnas och visar fullständigt kvalificerade servernamnet (exempelvis **mynewserver20170403.database.windows.net**) och innehåller alternativ för ytterligare konfiguration.</span><span class="sxs-lookup"><span data-stu-id="3deeb-163">The overview page for your server opens, showing you the fully qualified server name (such as **mynewserver20170403.database.windows.net**) and provides options for further configuration.</span></span>

1. <span data-ttu-id="3deeb-164">Om du vill ange en regel för servernivå från översiktssidan för server, klickar du på **brandväggen** i den vänstra menyn under inställningar som visades i följande bild:</span><span class="sxs-lookup"><span data-stu-id="3deeb-164">To set a server-level rule from server overview page, click **Firewall** in the left-hand menu under Settings as showed in the following image:</span></span> 

     ![Översikt över logisk server](./media/sql-database-migrate-your-sql-server-database/logical-server-overview.png)

2. <span data-ttu-id="3deeb-166">Klicka på **lägga till klientens IP-Adressen** i verktygsfältet för att lägga till IP-adressen för datorn du använder och klicka sedan på **spara**.</span><span class="sxs-lookup"><span data-stu-id="3deeb-166">Click **Add client IP** on the toolbar to add the IP address of the computer you are currently using and then click **Save**.</span></span> <span data-ttu-id="3deeb-167">En brandväggsregel på servernivå skapas för din aktuella IP-adress.</span><span class="sxs-lookup"><span data-stu-id="3deeb-167">A server-level firewall rule is created for your current IP address.</span></span>

     ![ange brandväggsregel för server](./media/sql-database-migrate-your-sql-server-database/server-firewall-rule-set.png)

### <a name="transact-sql"></a><span data-ttu-id="3deeb-169">Transact-SQL</span><span class="sxs-lookup"><span data-stu-id="3deeb-169">Transact-SQL</span></span>
| <span data-ttu-id="3deeb-170">Katalogvy eller lagrad procedur</span><span class="sxs-lookup"><span data-stu-id="3deeb-170">Catalog View or Stored Procedure</span></span> | <span data-ttu-id="3deeb-171">Nivå</span><span class="sxs-lookup"><span data-stu-id="3deeb-171">Level</span></span> | <span data-ttu-id="3deeb-172">Beskrivning</span><span class="sxs-lookup"><span data-stu-id="3deeb-172">Description</span></span> |
| --- | --- | --- |
| [<span data-ttu-id="3deeb-173">sys.firewall_rules</span><span class="sxs-lookup"><span data-stu-id="3deeb-173">sys.firewall_rules</span></span>](https://msdn.microsoft.com/library/dn269980.aspx) |<span data-ttu-id="3deeb-174">Server</span><span class="sxs-lookup"><span data-stu-id="3deeb-174">Server</span></span> |<span data-ttu-id="3deeb-175">Visar de aktuella brandväggsreglerna på servernivå</span><span class="sxs-lookup"><span data-stu-id="3deeb-175">Displays the current server-level firewall rules</span></span> |
| [<span data-ttu-id="3deeb-176">sp_set_firewall_rule</span><span class="sxs-lookup"><span data-stu-id="3deeb-176">sp_set_firewall_rule</span></span>](https://msdn.microsoft.com/library/dn270017.aspx) |<span data-ttu-id="3deeb-177">Server</span><span class="sxs-lookup"><span data-stu-id="3deeb-177">Server</span></span> |<span data-ttu-id="3deeb-178">Skapar eller uppdaterar brandväggsregler på servernivå</span><span class="sxs-lookup"><span data-stu-id="3deeb-178">Creates or updates server-level firewall rules</span></span> |
| [<span data-ttu-id="3deeb-179">sp_delete_firewall_rule</span><span class="sxs-lookup"><span data-stu-id="3deeb-179">sp_delete_firewall_rule</span></span>](https://msdn.microsoft.com/library/dn270024.aspx) |<span data-ttu-id="3deeb-180">Server</span><span class="sxs-lookup"><span data-stu-id="3deeb-180">Server</span></span> |<span data-ttu-id="3deeb-181">Tar bort brandväggsregler på servernivå</span><span class="sxs-lookup"><span data-stu-id="3deeb-181">Removes server-level firewall rules</span></span> |
| [<span data-ttu-id="3deeb-182">sys.database_firewall_rules</span><span class="sxs-lookup"><span data-stu-id="3deeb-182">sys.database_firewall_rules</span></span>](https://msdn.microsoft.com/library/dn269982.aspx) |<span data-ttu-id="3deeb-183">Databas</span><span class="sxs-lookup"><span data-stu-id="3deeb-183">Database</span></span> |<span data-ttu-id="3deeb-184">Visar de aktuella brandväggsreglerna på databasnivå</span><span class="sxs-lookup"><span data-stu-id="3deeb-184">Displays the current database-level firewall rules</span></span> |
| [<span data-ttu-id="3deeb-185">sp_set_database_firewall_rule</span><span class="sxs-lookup"><span data-stu-id="3deeb-185">sp_set_database_firewall_rule</span></span>](https://msdn.microsoft.com/library/dn270010.aspx) |<span data-ttu-id="3deeb-186">Databas</span><span class="sxs-lookup"><span data-stu-id="3deeb-186">Database</span></span> |<span data-ttu-id="3deeb-187">Skapar eller uppdaterar brandväggsreglerna på databasnivå</span><span class="sxs-lookup"><span data-stu-id="3deeb-187">Creates or updates the database-level firewall rules</span></span> |
| [<span data-ttu-id="3deeb-188">sp_delete_database_firewall_rule</span><span class="sxs-lookup"><span data-stu-id="3deeb-188">sp_delete_database_firewall_rule</span></span>](https://msdn.microsoft.com/library/dn270030.aspx) |<span data-ttu-id="3deeb-189">Databaser</span><span class="sxs-lookup"><span data-stu-id="3deeb-189">Databases</span></span> |<span data-ttu-id="3deeb-190">Tar bort brandväggsregler på databasnivå</span><span class="sxs-lookup"><span data-stu-id="3deeb-190">Removes database-level firewall rules</span></span> |


<span data-ttu-id="3deeb-191">Granska befintliga regler i följande exempel, aktivera ett intervall med IP-adresser på Contoso-servern och tar bort en brandväggsregel:</span><span class="sxs-lookup"><span data-stu-id="3deeb-191">The following examples review the existing rules, enable a range of IP addresses on the server Contoso, and deletes a firewall rule:</span></span>
   
```sql
SELECT * FROM sys.firewall_rules ORDER BY name;
```
  
<span data-ttu-id="3deeb-192">Lägg sedan till en brandväggsregel.</span><span class="sxs-lookup"><span data-stu-id="3deeb-192">Next, add a firewall rule.</span></span>
   
```sql
EXECUTE sp_set_firewall_rule @name = N'ContosoFirewallRule',
   @start_ip_address = '192.168.1.1', @end_ip_address = '192.168.1.10'
```

<span data-ttu-id="3deeb-193">Kör den lagrade proceduren sp_delete_firewall_rule om du vill ta bort en brandväggsregel på servernivå.</span><span class="sxs-lookup"><span data-stu-id="3deeb-193">To delete a server-level firewall rule, execute the sp_delete_firewall_rule stored procedure.</span></span> <span data-ttu-id="3deeb-194">I följande exempel tar bort regeln med namnet ContosoFirewallRule:</span><span class="sxs-lookup"><span data-stu-id="3deeb-194">The following example deletes the rule named ContosoFirewallRule:</span></span>
   
```sql
EXECUTE sp_delete_firewall_rule @name = N'ContosoFirewallRule'
```   

### <a name="azure-powershell"></a><span data-ttu-id="3deeb-195">Azure PowerShell</span><span class="sxs-lookup"><span data-stu-id="3deeb-195">Azure PowerShell</span></span>
| <span data-ttu-id="3deeb-196">Cmdlet</span><span class="sxs-lookup"><span data-stu-id="3deeb-196">Cmdlet</span></span> | <span data-ttu-id="3deeb-197">Nivå</span><span class="sxs-lookup"><span data-stu-id="3deeb-197">Level</span></span> | <span data-ttu-id="3deeb-198">Beskrivning</span><span class="sxs-lookup"><span data-stu-id="3deeb-198">Description</span></span> |
| --- | --- | --- |
| [<span data-ttu-id="3deeb-199">Get-AzureSqlDatabaseServerFirewallRule</span><span class="sxs-lookup"><span data-stu-id="3deeb-199">Get-AzureSqlDatabaseServerFirewallRule</span></span>](https://msdn.microsoft.com/library/azure/dn546731.aspx) |<span data-ttu-id="3deeb-200">Server</span><span class="sxs-lookup"><span data-stu-id="3deeb-200">Server</span></span> |<span data-ttu-id="3deeb-201">Returnerar de aktuella brandväggsreglerna på servernivå</span><span class="sxs-lookup"><span data-stu-id="3deeb-201">Returns the current server-level firewall rules</span></span> |
| [<span data-ttu-id="3deeb-202">New-AzureSqlDatabaseServerFirewallRule</span><span class="sxs-lookup"><span data-stu-id="3deeb-202">New-AzureSqlDatabaseServerFirewallRule</span></span>](https://msdn.microsoft.com/library/azure/dn546724.aspx) |<span data-ttu-id="3deeb-203">Server</span><span class="sxs-lookup"><span data-stu-id="3deeb-203">Server</span></span> |<span data-ttu-id="3deeb-204">Skapar en ny brandväggsregel på servernivå</span><span class="sxs-lookup"><span data-stu-id="3deeb-204">Creates a new server-level firewall rule</span></span> |
| [<span data-ttu-id="3deeb-205">Set-AzureSqlDatabaseServerFirewallRule</span><span class="sxs-lookup"><span data-stu-id="3deeb-205">Set-AzureSqlDatabaseServerFirewallRule</span></span>](https://msdn.microsoft.com/library/azure/dn546739.aspx) |<span data-ttu-id="3deeb-206">Server</span><span class="sxs-lookup"><span data-stu-id="3deeb-206">Server</span></span> |<span data-ttu-id="3deeb-207">Uppdaterar egenskaperna för en befintlig brandväggsregel på servernivå</span><span class="sxs-lookup"><span data-stu-id="3deeb-207">Updates the properties of an existing server-level firewall rule</span></span> |
| [<span data-ttu-id="3deeb-208">Remove-AzureSqlDatabaseServerFirewallRule</span><span class="sxs-lookup"><span data-stu-id="3deeb-208">Remove-AzureSqlDatabaseServerFirewallRule</span></span>](https://msdn.microsoft.com/library/azure/dn546727.aspx) |<span data-ttu-id="3deeb-209">Server</span><span class="sxs-lookup"><span data-stu-id="3deeb-209">Server</span></span> |<span data-ttu-id="3deeb-210">Tar bort brandväggsregler på servernivå</span><span class="sxs-lookup"><span data-stu-id="3deeb-210">Removes server-level firewall rules</span></span> |


<span data-ttu-id="3deeb-211">I följande exempel anger en brandväggsregel på servernivå med hjälp av PowerShell:</span><span class="sxs-lookup"><span data-stu-id="3deeb-211">The following example sets a server-level firewall rule using PowerShell:</span></span>

```powershell
New-AzureRmSqlServerFirewallRule -ResourceGroupName "myResourceGroup" `
    -ServerName $servername `
    -FirewallRuleName "AllowSome" -StartIpAddress "0.0.0.0" -EndIpAddress "0.0.0.0"
```

> [!TIP]
> <span data-ttu-id="3deeb-212">PowerShell-exemplen i kontexten för en Snabbstart Se [skapa DB - PowerShell](sql-database-get-started-powershell.md) och [skapa en enskild databas och konfigurera en brandväggsregel med hjälp av PowerShell](scripts/sql-database-create-and-configure-database-powershell.md)</span><span class="sxs-lookup"><span data-stu-id="3deeb-212">For PowerShell examples in the context of a quick start, see [Create DB - PowerShell](sql-database-get-started-powershell.md) and [Create a single database and configure a firewall rule using PowerShell](scripts/sql-database-create-and-configure-database-powershell.md)</span></span>
>

### <a name="azure-cli"></a><span data-ttu-id="3deeb-213">Azure CLI</span><span class="sxs-lookup"><span data-stu-id="3deeb-213">Azure CLI</span></span>
| <span data-ttu-id="3deeb-214">Cmdlet</span><span class="sxs-lookup"><span data-stu-id="3deeb-214">Cmdlet</span></span> | <span data-ttu-id="3deeb-215">Nivå</span><span class="sxs-lookup"><span data-stu-id="3deeb-215">Level</span></span> | <span data-ttu-id="3deeb-216">Beskrivning</span><span class="sxs-lookup"><span data-stu-id="3deeb-216">Description</span></span> |
| --- | --- | --- |
| [<span data-ttu-id="3deeb-217">Skapa AZ sql server-brandvägg</span><span class="sxs-lookup"><span data-stu-id="3deeb-217">az sql server firewall create</span></span>](/cli/azure/sql/server/firewall-rule#create) | <span data-ttu-id="3deeb-218">Skapar en brandväggsregel för att tillåta åtkomst till alla SQL-databaser på servern från det angivna IP-adressintervallet.</span><span class="sxs-lookup"><span data-stu-id="3deeb-218">Creates a firewall rule to allow access to all SQL Databases on the server from the entered IP address range.</span></span>|
| [<span data-ttu-id="3deeb-219">ta bort AZ sql server-brandväggen</span><span class="sxs-lookup"><span data-stu-id="3deeb-219">az sql server firewall delete</span></span>](/cli/azure/sql/server/firewall-rule#delete)| <span data-ttu-id="3deeb-220">Tar bort en brandväggsregel.</span><span class="sxs-lookup"><span data-stu-id="3deeb-220">Deletes a firewall rule.</span></span>|
| [<span data-ttu-id="3deeb-221">listan över AZ sql server-brandväggen</span><span class="sxs-lookup"><span data-stu-id="3deeb-221">az sql server firewall list</span></span>](/cli/azure/sql/server/firewall-rule#list)| <span data-ttu-id="3deeb-222">Visar brandväggsreglerna.</span><span class="sxs-lookup"><span data-stu-id="3deeb-222">Lists the firewall rules.</span></span>|
| [<span data-ttu-id="3deeb-223">Visa AZ sql server-brandväggsregel</span><span class="sxs-lookup"><span data-stu-id="3deeb-223">az sql server firewall rule show</span></span>](/cli/azure/sql/server/firewall-rule#show)| <span data-ttu-id="3deeb-224">Visar information om en brandväggsregel.</span><span class="sxs-lookup"><span data-stu-id="3deeb-224">Shows the details of a firewall rule.</span></span>|
| [<span data-ttu-id="3deeb-225">AX uppdatera regel för sql server-brandväggen</span><span class="sxs-lookup"><span data-stu-id="3deeb-225">ax sql server firewall rule update</span></span>](/cli/azure/sql/server/firewall-rule#update)| <span data-ttu-id="3deeb-226">Uppdaterar en brandväggsregel.</span><span class="sxs-lookup"><span data-stu-id="3deeb-226">Updates a firewall rule.</span></span>

<span data-ttu-id="3deeb-227">I följande exempel anger en brandväggsregel på servernivå med hjälp av Azure CLI:</span><span class="sxs-lookup"><span data-stu-id="3deeb-227">The following example sets a server-level firewall rule using the Azure CLI:</span></span> 

```azurecli-interactive
az sql server firewall-rule create --resource-group myResourceGroup --server $servername \
    -n AllowYourIp --start-ip-address 0.0.0.0 --end-ip-address 0.0.0.0
```

> [!TIP]
> <span data-ttu-id="3deeb-228">Azure CLI exempelvis inom ramen för en Snabbstart Se [skapa DDB - Azure CLI](sql-database-get-started-cli.md) och [skapa en enskild databas och konfigurera en brandväggsregel med hjälp av Azure CLI](scripts/sql-database-create-and-configure-database-cli.md)</span><span class="sxs-lookup"><span data-stu-id="3deeb-228">For an Azure CLI example in the context of a quick start, see [Create DDB - Azure CLI](sql-database-get-started-cli.md) and [Create a single database and configure a firewall rule using the Azure CLI](scripts/sql-database-create-and-configure-database-cli.md)</span></span>
>

### <a name="rest-api"></a><span data-ttu-id="3deeb-229">REST API</span><span class="sxs-lookup"><span data-stu-id="3deeb-229">REST API</span></span>
| <span data-ttu-id="3deeb-230">API</span><span class="sxs-lookup"><span data-stu-id="3deeb-230">API</span></span> | <span data-ttu-id="3deeb-231">Nivå</span><span class="sxs-lookup"><span data-stu-id="3deeb-231">Level</span></span> | <span data-ttu-id="3deeb-232">Beskrivning</span><span class="sxs-lookup"><span data-stu-id="3deeb-232">Description</span></span> |
| --- | --- | --- |
| [<span data-ttu-id="3deeb-233">Visa en lista med brandväggsregler</span><span class="sxs-lookup"><span data-stu-id="3deeb-233">List Firewall Rules</span></span>](https://msdn.microsoft.com/library/azure/dn505715.aspx) |<span data-ttu-id="3deeb-234">Server</span><span class="sxs-lookup"><span data-stu-id="3deeb-234">Server</span></span> |<span data-ttu-id="3deeb-235">Visar de aktuella brandväggsreglerna på servernivå</span><span class="sxs-lookup"><span data-stu-id="3deeb-235">Displays the current server-level firewall rules</span></span> |
| [<span data-ttu-id="3deeb-236">Skapa brandväggsregel</span><span class="sxs-lookup"><span data-stu-id="3deeb-236">Create Firewall Rule</span></span>](https://msdn.microsoft.com/library/azure/dn505712.aspx) |<span data-ttu-id="3deeb-237">Server</span><span class="sxs-lookup"><span data-stu-id="3deeb-237">Server</span></span> |<span data-ttu-id="3deeb-238">Skapar eller uppdaterar brandväggsregler på servernivå</span><span class="sxs-lookup"><span data-stu-id="3deeb-238">Creates or updates server-level firewall rules</span></span> |
| [<span data-ttu-id="3deeb-239">Konfigurera brandväggsregel</span><span class="sxs-lookup"><span data-stu-id="3deeb-239">Set Firewall Rule</span></span>](https://msdn.microsoft.com/library/azure/dn505707.aspx) |<span data-ttu-id="3deeb-240">Server</span><span class="sxs-lookup"><span data-stu-id="3deeb-240">Server</span></span> |<span data-ttu-id="3deeb-241">Uppdaterar egenskaperna för en befintlig brandväggsregel på servernivå</span><span class="sxs-lookup"><span data-stu-id="3deeb-241">Updates the properties of an existing server-level firewall rule</span></span> |
| [<span data-ttu-id="3deeb-242">Ta bort brandväggsregel</span><span class="sxs-lookup"><span data-stu-id="3deeb-242">Delete Firewall Rule</span></span>](https://msdn.microsoft.com/library/azure/dn505706.aspx) |<span data-ttu-id="3deeb-243">Server</span><span class="sxs-lookup"><span data-stu-id="3deeb-243">Server</span></span> |<span data-ttu-id="3deeb-244">Tar bort brandväggsregler på servernivå</span><span class="sxs-lookup"><span data-stu-id="3deeb-244">Removes server-level firewall rules</span></span> |

## <a name="server-level-firewall-rule-versus-a-database-level-firewall-rule"></a><span data-ttu-id="3deeb-245">Brandväggsregel på servernivå och en databasnivå brandväggsregel</span><span class="sxs-lookup"><span data-stu-id="3deeb-245">Server-level firewall rule versus a database-level firewall rule</span></span>
<span data-ttu-id="3deeb-246">FRÅGOR.</span><span class="sxs-lookup"><span data-stu-id="3deeb-246">Q.</span></span> <span data-ttu-id="3deeb-247">Användare av en databas isoleras fullständigt från en annan databas?</span><span class="sxs-lookup"><span data-stu-id="3deeb-247">Should users of one database be fully isolated from another database?</span></span>   
  <span data-ttu-id="3deeb-248">Om Ja, kan du bevilja åtkomst med hjälp av brandväggsregler på databasnivå.</span><span class="sxs-lookup"><span data-stu-id="3deeb-248">If yes, grant access using database-level firewall rules.</span></span> <span data-ttu-id="3deeb-249">Detta förhindrar med servernivå brandväggsregler, som tillåter åtkomst via brandväggen för att alla databaser djup säkerheten.</span><span class="sxs-lookup"><span data-stu-id="3deeb-249">This avoids using server-level firewall rules, which permit access through the firewall to all databases, reducing the depth of your defenses.</span></span>   
 
<span data-ttu-id="3deeb-250">FRÅGOR.</span><span class="sxs-lookup"><span data-stu-id="3deeb-250">Q.</span></span> <span data-ttu-id="3deeb-251">Behöver användare på IP-adressen åtkomst till alla databaser?</span><span class="sxs-lookup"><span data-stu-id="3deeb-251">Do users at the IP address’s need access to all databases?</span></span>   
  <span data-ttu-id="3deeb-252">Använda servernivå brandväggsregler för att minska antalet gånger som du måste konfigurera brandväggens regler.</span><span class="sxs-lookup"><span data-stu-id="3deeb-252">Use server-level firewall rules to reduce the number of times you must configure firewall rules.</span></span>   

<span data-ttu-id="3deeb-253">FRÅGOR.</span><span class="sxs-lookup"><span data-stu-id="3deeb-253">Q.</span></span> <span data-ttu-id="3deeb-254">Har åtkomst via Azure portal, PowerShell eller REST API när du den person eller det team att konfigurera brandväggsregler endast?</span><span class="sxs-lookup"><span data-stu-id="3deeb-254">Does the person or team configuring the firewall rules only have access through the Azure portal, PowerShell, or the REST API?</span></span>   
  <span data-ttu-id="3deeb-255">Du måste använda brandväggsregler på servernivå.</span><span class="sxs-lookup"><span data-stu-id="3deeb-255">You must use server-level firewall rules.</span></span> <span data-ttu-id="3deeb-256">Brandväggsregler på databasnivå kan bara konfigureras med hjälp av Transact-SQL.</span><span class="sxs-lookup"><span data-stu-id="3deeb-256">Database-level firewall rules can only be configured using Transact-SQL.</span></span>  

<span data-ttu-id="3deeb-257">FRÅGOR.</span><span class="sxs-lookup"><span data-stu-id="3deeb-257">Q.</span></span> <span data-ttu-id="3deeb-258">Den person eller det team konfigurerar brandväggsregler förbjudna med hög behörighet på databasnivå?</span><span class="sxs-lookup"><span data-stu-id="3deeb-258">Is the person or team configuring the firewall rules prohibited from having high-level permission at the database level?</span></span>   
  <span data-ttu-id="3deeb-259">Använd brandväggsreglerna på servernivå.</span><span class="sxs-lookup"><span data-stu-id="3deeb-259">Use server-level firewall rules.</span></span> <span data-ttu-id="3deeb-260">Konfigurera brandväggsregler på databasnivå med hjälp av Transact-SQL, kräver minst `CONTROL DATABASE` behörigheten på databasnivå.</span><span class="sxs-lookup"><span data-stu-id="3deeb-260">Configuring database-level firewall rules using Transact-SQL, requires at least `CONTROL DATABASE` permission at the database level.</span></span>  

<span data-ttu-id="3deeb-261">FRÅGOR.</span><span class="sxs-lookup"><span data-stu-id="3deeb-261">Q.</span></span> <span data-ttu-id="3deeb-262">Är den person eller det team konfigureras eller granskning brandväggsregler, centralt hantera brandväggsregler för många (kanske 100-tal) av databaser?</span><span class="sxs-lookup"><span data-stu-id="3deeb-262">Is the person or team configuring or auditing the firewall rules, centrally managing firewall rules for many (perhaps 100s) of databases?</span></span>   
  <span data-ttu-id="3deeb-263">Det här valet är beroende av behov och miljö.</span><span class="sxs-lookup"><span data-stu-id="3deeb-263">This selection depends upon your needs and environment.</span></span> <span data-ttu-id="3deeb-264">Brandväggsregler på servernivå kan vara enklare att konfigurera, men skript konfigurera regler på databas-nivå.</span><span class="sxs-lookup"><span data-stu-id="3deeb-264">Server-level firewall rules might be easier to configure, but scripting can configure rules at the database-level.</span></span> <span data-ttu-id="3deeb-265">Och även om du använder brandväggsregler på servernivå kan du behöva granska databas-brandväggsregler, om det finns användare med `CONTROL` -behörighet på databasen har skapat brandväggsregler på databasnivå.</span><span class="sxs-lookup"><span data-stu-id="3deeb-265">And even if you use server-level firewall rules, you might need to audit the database-firewall rules, to see if users with `CONTROL` permission on the database have created database-level firewall rules.</span></span>   

<span data-ttu-id="3deeb-266">FRÅGOR.</span><span class="sxs-lookup"><span data-stu-id="3deeb-266">Q.</span></span> <span data-ttu-id="3deeb-267">Kan jag använda en blandning av både server- och databasnivå brandväggsregler?</span><span class="sxs-lookup"><span data-stu-id="3deeb-267">Can I use a mix of both server-level and database-level firewall rules?</span></span>   
  <span data-ttu-id="3deeb-268">Ja.</span><span class="sxs-lookup"><span data-stu-id="3deeb-268">Yes.</span></span> <span data-ttu-id="3deeb-269">Vissa användare, till exempel Administratörer behöva brandväggsregler på servernivå.</span><span class="sxs-lookup"><span data-stu-id="3deeb-269">Some users, such as administrators might need server-level firewall rules.</span></span> <span data-ttu-id="3deeb-270">Andra användare, till exempel användare i ett databasprogram kan behöva brandväggsregler på databasnivå.</span><span class="sxs-lookup"><span data-stu-id="3deeb-270">Other users, such as users of a database application, might need database-level firewall rules.</span></span>   

## <a name="troubleshooting-the-database-firewall"></a><span data-ttu-id="3deeb-271">Felsöka databasbrandväggen</span><span class="sxs-lookup"><span data-stu-id="3deeb-271">Troubleshooting the database firewall</span></span>
<span data-ttu-id="3deeb-272">Tänk på följande om åtkomsten till Microsoft Azure SQL Database-tjänsten inte fungerar som förväntat:</span><span class="sxs-lookup"><span data-stu-id="3deeb-272">Consider the following points when access to the Microsoft Azure SQL Database service does not behave as you expect:</span></span>

* <span data-ttu-id="3deeb-273">**Lokal brandväggskonfiguration:** Innan din dator kan komma åt Azure SQL Database kan du behöva skapa ett brandväggsundantag på din dator för TCP-port 1433.</span><span class="sxs-lookup"><span data-stu-id="3deeb-273">**Local firewall configuration:** Before your computer can access Azure SQL Database, you may need to create a firewall exception on your computer for TCP port 1433.</span></span> <span data-ttu-id="3deeb-274">Om du skapar anslutningar inom gränsen för Azure-molnet kan du behöva öppna ytterligare portar.</span><span class="sxs-lookup"><span data-stu-id="3deeb-274">If you are making connections inside the Azure cloud boundary, you may have to open additional ports.</span></span> <span data-ttu-id="3deeb-275">Mer information finns i **SQL Database: utanför eller innanför** avsnitt i [portar utöver 1433 för ADO.NET 4.5 och SQL Database](sql-database-develop-direct-route-ports-adonet-v12.md).</span><span class="sxs-lookup"><span data-stu-id="3deeb-275">For more information, see the **SQL Database: Outside vs inside** section of [Ports beyond 1433 for ADO.NET 4.5 and SQL Database](sql-database-develop-direct-route-ports-adonet-v12.md).</span></span>
* <span data-ttu-id="3deeb-276">**NAT (Network Address Translation):** På grund av NAT kanske IP-adressen som används av din dator för att ansluta till Azure SQL Database inte är samma som IP-adressen som visas i datorns IP-konfigurationsinställningar.</span><span class="sxs-lookup"><span data-stu-id="3deeb-276">**Network address translation (NAT):** Due to NAT, the IP address used by your computer to connect to Azure SQL Database may be different than the IP address shown in your computer IP configuration settings.</span></span> <span data-ttu-id="3deeb-277">Du kan visa IP-adressen som din dator använder genom att ansluta till Azure, logga in på portalen och gå till fliken **Konfigurera** på servern som är värd för databasen.</span><span class="sxs-lookup"><span data-stu-id="3deeb-277">To view the IP address your computer is using to connect to Azure, log in to the portal and navigate to the **Configure** tab on the server that hosts your database.</span></span> <span data-ttu-id="3deeb-278">**Aktuell klient-IP-adress** visas under avsnittet **Tillåtna IP-adresser**.</span><span class="sxs-lookup"><span data-stu-id="3deeb-278">Under the **Allowed IP Addresses** section, the **Current Client IP Address** is displayed.</span></span> <span data-ttu-id="3deeb-279">Klicka på **Lägg till** i **Tillåtna IP-adresser** så att den här datorn kan ansluta till servern.</span><span class="sxs-lookup"><span data-stu-id="3deeb-279">Click **Add** to the **Allowed IP Addresses** to allow this computer to access the server.</span></span>
* <span data-ttu-id="3deeb-280">**Ändringarna i listan över tillåtna adresser har inte börjat gälla ännu:** Det kan ta upp till fem minuter innan ändringarna i brandväggskonfigurationen för Azure SQL Database börjar gälla.</span><span class="sxs-lookup"><span data-stu-id="3deeb-280">**Changes to the allow list have not taken effect yet:** There may be as much as a five-minute delay for changes to the Azure SQL Database firewall configuration to take effect.</span></span>
* <span data-ttu-id="3deeb-281">**Inloggningen har inte behörighet eller så har ett felaktigt lösenord använts:** Om en inloggning inte har behörighet på Azure SQL Database-servern eller om lösenordet som användes är fel så nekas anslutningen till Azure SQL Database-servern.</span><span class="sxs-lookup"><span data-stu-id="3deeb-281">**The login is not authorized or an incorrect password was used:** If a login does not have permissions on the Azure SQL Database server or the password used is incorrect, the connection to the Azure SQL Database server is denied.</span></span> <span data-ttu-id="3deeb-282">En brandväggsinställning ger endast klienter möjlighet att försöka ansluta till din server. Varje klient måste fortfarande ange nödvändiga säkerhetsreferenser.</span><span class="sxs-lookup"><span data-stu-id="3deeb-282">Creating a firewall setting only provides clients with an opportunity to attempt connecting to your server; each client must provide the necessary security credentials.</span></span> <span data-ttu-id="3deeb-283">Mer information om hur du förbereder inloggningar finns i avsnittet Managing Databases, Logins, and Users in Azure SQL Database (Hantera databaser, inloggningar och användare i Azure SQL Database).</span><span class="sxs-lookup"><span data-stu-id="3deeb-283">For more information about preparing logins, see Managing Databases, Logins, and Users in Azure SQL Database.</span></span>
* <span data-ttu-id="3deeb-284">**Dynamisk IP-adress:** Om du har en Internetanslutning med dynamisk IP-adressering och du har problem med att passera brandväggen kan du prova någon av följande lösningar:</span><span class="sxs-lookup"><span data-stu-id="3deeb-284">**Dynamic IP address:** If you have an Internet connection with dynamic IP addressing and you are having trouble getting through the firewall, you could try one of the following solutions:</span></span>
  
  * <span data-ttu-id="3deeb-285">Fråga din Internetleverantör efter IP-adressintervallet som tilldelats klientdatorer som ansluter till Azure SQL Database-servern och lägg sedan till IP-adressintervallet som en brandväggsregel.</span><span class="sxs-lookup"><span data-stu-id="3deeb-285">Ask your Internet Service Provider (ISP) for the IP address range assigned to your client computers that access the Azure SQL Database server, and then add the IP address range as a firewall rule.</span></span>
  * <span data-ttu-id="3deeb-286">Använd statisk IP-adressering i stället för dina klientdatorer och lägg sedan till IP-adresserna som brandväggsregler.</span><span class="sxs-lookup"><span data-stu-id="3deeb-286">Get static IP addressing instead for your client computers, and then add the IP addresses as firewall rules.</span></span>

## <a name="next-steps"></a><span data-ttu-id="3deeb-287">Nästa steg</span><span class="sxs-lookup"><span data-stu-id="3deeb-287">Next steps</span></span>

- <span data-ttu-id="3deeb-288">Snabbstart för att skapa en databas och en brandväggsregel på servernivå finns [skapa en Azure SQL database](sql-database-get-started-portal.md).</span><span class="sxs-lookup"><span data-stu-id="3deeb-288">For a quick start on creating a database and a server-level firewall rule, see [Create an Azure SQL database](sql-database-get-started-portal.md).</span></span>
- <span data-ttu-id="3deeb-289">Hjälp med att ansluta till en Azure SQL-databas från öppen källkod eller program från tredje part finns i [Client quick-start code samples to SQL Database](https://msdn.microsoft.com/library/azure/ee336282.aspx) (Snabbstart med kodexempel för att ansluta klienter till SQL Database).</span><span class="sxs-lookup"><span data-stu-id="3deeb-289">For help in connecting to an Azure SQL database from open source or third-party applications, see [Client quick-start code samples to SQL Database](https://msdn.microsoft.com/library/azure/ee336282.aspx).</span></span>
- <span data-ttu-id="3deeb-290">Information om ytterligare portar som du kan behöva öppna finns i **SQL Database: utanför eller innanför** avsnitt i [portar utöver 1433 för ADO.NET 4.5 och SQL-databas](sql-database-develop-direct-route-ports-adonet-v12.md)</span><span class="sxs-lookup"><span data-stu-id="3deeb-290">For information on additional ports that you may need to open, see the **SQL Database: Outside vs inside** section of [Ports beyond 1433 for ADO.NET 4.5 and SQL Database](sql-database-develop-direct-route-ports-adonet-v12.md)</span></span>
- <span data-ttu-id="3deeb-291">En översikt över Azure SQL Database-säkerhet finns i [att säkra din databas](sql-database-security-overview.md)</span><span class="sxs-lookup"><span data-stu-id="3deeb-291">For an overview of Azure SQL Database security, see [Securing your database](sql-database-security-overview.md)</span></span>

<!--Image references-->
[1]: ./media/sql-database-firewall-configure/sqldb-firewall-1.png

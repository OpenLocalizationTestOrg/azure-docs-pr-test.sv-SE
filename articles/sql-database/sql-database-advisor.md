---
title: aaaPerformance rekommendationer - Azure SQL Database | Microsoft Docs
description: "hello Azure SQL Database innehåller rekommendationer för SQL-databaser som kan förbättra aktuella frågeprestanda."
services: sql-database
documentationcenter: 
author: stevestein
manager: jhubbard
editor: monicar
ms.assetid: 1db441ff-58f5-45da-8d38-b54dc2aa6145
ms.service: sql-database
ms.custom: monitor & tune
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: data-management
ms.date: 07/05/2017
ms.author: sstein
ms.openlocfilehash: 77db338a0a395aec78c9e02849ae5ba4f2d01680
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: sv-SE
ms.lasthandoff: 10/06/2017
---
# <a name="performance-recommendations"></a><span data-ttu-id="ed818-103">Rekommendationer</span><span class="sxs-lookup"><span data-stu-id="ed818-103">Performance recommendations</span></span>

<span data-ttu-id="ed818-104">Azure SQL Database lär sig och anpassar sig med ditt program och innehåller anpassade rekommendationer som gör att du toomaximize hello prestanda för SQL-databaser.</span><span class="sxs-lookup"><span data-stu-id="ed818-104">Azure SQL Database learns and adapts with your application and provides customized recommendations enabling you toomaximize hello performance of your SQL databases.</span></span> <span data-ttu-id="ed818-105">Prestandan utvärderas kontinuerligt genom att analysera din användningshistorik för SQL-databas.</span><span class="sxs-lookup"><span data-stu-id="ed818-105">Your performance is continuously assessed by analyzing your SQL Database usage history.</span></span> <span data-ttu-id="ed818-106">hello rekommendationerna baseras på ett unikt arbetsbelastning mönster för databasen och förbättra prestandan.</span><span class="sxs-lookup"><span data-stu-id="ed818-106">hello recommendations that are provided are based on a database unique workload pattern and help improve its performance.</span></span>

> [!NOTE]
> <span data-ttu-id="ed818-107">Rekommenderade sätt att använda rekommendationer är genom att aktivera 'Automatisk justering' på din databas.</span><span class="sxs-lookup"><span data-stu-id="ed818-107">Recommended way of using recommendations is by enabling ‘Automatic tuning’ on your database.</span></span> <span data-ttu-id="ed818-108">Mer information finns i [automatisk justering](sql-database-automatic-tuning.md).</span><span class="sxs-lookup"><span data-stu-id="ed818-108">For details, see [Automatic tuning](sql-database-automatic-tuning.md).</span></span>
>

## <a name="create-index-recommendations"></a><span data-ttu-id="ed818-109">Skapa index-rekommendationer</span><span class="sxs-lookup"><span data-stu-id="ed818-109">Create index recommendations</span></span>
<span data-ttu-id="ed818-110">Azure SQL Database övervakar hello frågor som körs kontinuerligt och identifierar hello index som kan förbättra hello prestanda.</span><span class="sxs-lookup"><span data-stu-id="ed818-110">Azure SQL Database continuously monitors hello queries being executed and identifies hello indexes that could improve hello performance.</span></span> <span data-ttu-id="ed818-111">När tillräckligt med förtroende skapas som ett visst index saknas, en ny **skapa index** rekommendation kommer att skapas.</span><span class="sxs-lookup"><span data-stu-id="ed818-111">Once enough confidence is built that a certain index is missing, a new **Create index** recommendation will be created.</span></span> <span data-ttu-id="ed818-112">Azure SQL Database versioner förtroende genom att uppskatta prestandaindex vinst hello skulle ta över tiden.</span><span class="sxs-lookup"><span data-stu-id="ed818-112">Azure SQL Database builds confidence by estimating performance gain hello index would bring through time.</span></span> <span data-ttu-id="ed818-113">Beroende på hello uppskattad prestandafördelar kategoriseras rekommendationer som hög, medel eller låg.</span><span class="sxs-lookup"><span data-stu-id="ed818-113">Depending on hello estimated performance gain, recommendations are categorized as High, Medium,  or Low.</span></span> 

<span data-ttu-id="ed818-114">Index som skapats med hjälp av rekommendationer flaggas alltid som auto_created index.</span><span class="sxs-lookup"><span data-stu-id="ed818-114">Indexes created using recommendations are always flagged as auto_created indexes.</span></span> <span data-ttu-id="ed818-115">Du kan se vilka index är auto_created genom att titta på sys.indexes vyn.</span><span class="sxs-lookup"><span data-stu-id="ed818-115">You can see which indexes are auto_created by looking at sys.indexes view.</span></span> <span data-ttu-id="ed818-116">Automatiskt skapade index blockera inte ALTER/Byt namn på kommandon.</span><span class="sxs-lookup"><span data-stu-id="ed818-116">Auto created indexes don’t block ALTER/RENAME commands.</span></span> <span data-ttu-id="ed818-117">Om du försöker toodrop hello kolumn med ett automatiskt skapat index över den hello kommandot skickar och hello automatiskt skapat index släpps med hello-kommando.</span><span class="sxs-lookup"><span data-stu-id="ed818-117">If you try toodrop hello column that has an auto created index over it, hello command passes and hello auto created index is dropped with hello command as well.</span></span> <span data-ttu-id="ed818-118">Vanliga index skulle blockera hello ALTER/Byt namn på kommandot för kolumner som indexeras.</span><span class="sxs-lookup"><span data-stu-id="ed818-118">Regular indexes would block hello ALTER/RENAME command on columns that are indexed.</span></span>

<span data-ttu-id="ed818-119">När hello skapar indexrekommendationen tillämpas, Azure SQL-databasen kommer att jämföra prestanda för hello frågor med hello baslinje-prestanda.</span><span class="sxs-lookup"><span data-stu-id="ed818-119">Once hello create index recommendation is applied, Azure SQL Database will compare performance of hello queries with hello baseline performance.</span></span> <span data-ttu-id="ed818-120">Om nytt index föras förbättringar i hello prestanda, rekommendation flaggas lyckas och rapporten blir tillgängliga.</span><span class="sxs-lookup"><span data-stu-id="ed818-120">If new index brought improvements in hello performance, recommendation will be flagged as successful and impact report will be available.</span></span> <span data-ttu-id="ed818-121">Hello-index inte sätta hello fördelar, om det kommer att återställas automatiskt.</span><span class="sxs-lookup"><span data-stu-id="ed818-121">In case hello index didn’t bring hello benefits, it will be automatically reverted.</span></span> <span data-ttu-id="ed818-122">Det här sättet Azure SQL Database ser till att använda rekommendationer endast förbättras hello databasens prestanda.</span><span class="sxs-lookup"><span data-stu-id="ed818-122">This way Azure SQL Database ensures that using recommendations will only improve hello database performance.</span></span>

<span data-ttu-id="ed818-123">Alla **skapa index** rekommendation har en tillbaka av princip som inte tillåter att tillämpa hello rekommendation om hello databas eller poolen DTU-användningen är över 80% i sista 20 minuter eller om hello lagring är över 90% av användning.</span><span class="sxs-lookup"><span data-stu-id="ed818-123">Any **Create index** recommendation has a back off policy that won’t allow applying hello recommendation if hello database or pool DTU usage was above 80% in last 20 minutes or if hello storage is above 90% of usage.</span></span> <span data-ttu-id="ed818-124">I det här fallet ska hello rekommendation skjutas upp.</span><span class="sxs-lookup"><span data-stu-id="ed818-124">In this case, hello recommendation will be postponed.</span></span>

## <a name="drop-index-recommendations"></a><span data-ttu-id="ed818-125">DROP index-rekommendationer</span><span class="sxs-lookup"><span data-stu-id="ed818-125">Drop index recommendations</span></span>
<span data-ttu-id="ed818-126">Dessutom analyserar toodetecting saknas index, Azure SQL Database kontinuerligt hello prestanda för katastrofåterställning.</span><span class="sxs-lookup"><span data-stu-id="ed818-126">In addition toodetecting a missing index, Azure SQL Database continuously analyzes hello performance of existing indexes.</span></span> <span data-ttu-id="ed818-127">Om inte index används rekommenderar Azure SQL Database släpper den.</span><span class="sxs-lookup"><span data-stu-id="ed818-127">If index is not used, Azure SQL Database will recommend dropping it.</span></span> <span data-ttu-id="ed818-128">Du bör släppa ett index i två fall:</span><span class="sxs-lookup"><span data-stu-id="ed818-128">Dropping an index is recommended in two cases:</span></span>
* <span data-ttu-id="ed818-129">Index är en dubblett av ett annat index (samma indexerade och ingår kolumn, partition schemat och filter)</span><span class="sxs-lookup"><span data-stu-id="ed818-129">Index is a duplicate of another index (same indexed and included column, partition schema, and filters)</span></span>
* <span data-ttu-id="ed818-130">Index används inte för långa perioder (93 dagar)</span><span class="sxs-lookup"><span data-stu-id="ed818-130">Index is unused for a prolonged period (93 days)</span></span>

<span data-ttu-id="ed818-131">DROP index-rekommendationer kan också gå igenom hello verifiering efter implementering.</span><span class="sxs-lookup"><span data-stu-id="ed818-131">Drop index recommendations also go through hello verification after implementation.</span></span> <span data-ttu-id="ed818-132">Om bättre prestanda för hello blir hello rapporten tillgänglig.</span><span class="sxs-lookup"><span data-stu-id="ed818-132">If hello performance is improved hello impact report will be available.</span></span> <span data-ttu-id="ed818-133">Om prestandaförsämring upptäcks kommer rekommendation att återställas.</span><span class="sxs-lookup"><span data-stu-id="ed818-133">In case performance degradation is detected, recommendation will be reverted.</span></span>


## <a name="parameterize-queries-recommendations"></a><span data-ttu-id="ed818-134">Parameterstyra frågor rekommendationer</span><span class="sxs-lookup"><span data-stu-id="ed818-134">Parameterize queries recommendations</span></span>
<span data-ttu-id="ed818-135">**Parameterstyra frågor** rekommendationer visas när du har en eller flera frågor som är kompileras ständigt men slutar med hello samma plan för körning av frågan.</span><span class="sxs-lookup"><span data-stu-id="ed818-135">**Parameterize queries** recommendations appear when you have one or more queries that are constantly being recompiled but end up with hello same query execution plan.</span></span> <span data-ttu-id="ed818-136">Det här villkoret öppnas en möjlighet tooapply tvingas parameterisering, vilket innebär att frågeplaner toobe cachelagras och återanvändas i hello framtida förbättra prestandan och minska Resursanvändning.</span><span class="sxs-lookup"><span data-stu-id="ed818-136">This condition opens up an opportunity tooapply forced parameterization, which will allow query plans toobe cached and reused in hello future improving performance and reducing resource usage.</span></span> 

<span data-ttu-id="ed818-137">Varje fråga som ursprungligen utfärdade mot SQL Server måste kompileras toobe toogenerate en åtgärdsplan.</span><span class="sxs-lookup"><span data-stu-id="ed818-137">Every query issued against SQL Server initially needs toobe compiled toogenerate an execution plan.</span></span> <span data-ttu-id="ed818-138">Varje genererade plan läggs toohello plancache och efterföljande körningar av hello samma fråga kan återanvända den här planen från hello cache, eliminera hello behovet av ytterligare sammanställning.</span><span class="sxs-lookup"><span data-stu-id="ed818-138">Each generated plan is added toohello plan cache and subsequent executions of hello same query can reuse this plan from hello cache, eliminating hello need for additional compilation.</span></span> 

<span data-ttu-id="ed818-139">Program som skickar frågor, bland annat icke-parameteriserat värden, kan leda tooa prestanda försämras där för varje sådan fråga med olika parametervärden hello åtgärdsplan kompileras igen.</span><span class="sxs-lookup"><span data-stu-id="ed818-139">Applications that send queries, which include non-parameterized values, can lead tooa performance overhead, where for every such query with different parameter values hello execution plan is compiled again.</span></span> <span data-ttu-id="ed818-140">I många fall hello samma frågor med olika värden generera hello samma körning planer, men dessa planer läggs fortfarande separat toohello plancache.</span><span class="sxs-lookup"><span data-stu-id="ed818-140">In many cases hello same queries with different parameter values generate hello same execution plans, but these plans are still separately added toohello plan cache.</span></span> <span data-ttu-id="ed818-141">Kompilera körning planer använder databasresurser kan öka hello varaktighet tid och spill hello frågeplan cache orsakar planer toobe avlägsnas från hello cache.</span><span class="sxs-lookup"><span data-stu-id="ed818-141">Recompiling execution plans use database resources, increase hello query duration time and overflow hello plan cache causing plans toobe evicted from hello cache.</span></span> <span data-ttu-id="ed818-142">Det här beteendet av SQL Server kan ändras genom att ange hello Tvingad parameterization alternativet på hello-databasen.</span><span class="sxs-lookup"><span data-stu-id="ed818-142">This behavior of SQL Server can be altered by setting hello forced parameterization option on hello database.</span></span> 

<span data-ttu-id="ed818-143">toohelp som du beräkna hello effekten av den här rekommendationen du tillhandahålls med en jämförelse mellan hello faktiska CPU användnings- och hello planerat CPU-användning (som om hello rekommendation valdes).</span><span class="sxs-lookup"><span data-stu-id="ed818-143">toohelp you estimate hello impact of this recommendation, you are provided with a comparison between hello actual CPU usage and hello projected CPU usage (as if hello recommendation was applied).</span></span> <span data-ttu-id="ed818-144">Dessutom tooCPU besparingar din fråga varaktighet minskas för hello tid i kompilering.</span><span class="sxs-lookup"><span data-stu-id="ed818-144">In addition tooCPU savings, your query duration decreases for hello time spent in compilation.</span></span> <span data-ttu-id="ed818-145">Också är mycket mindre försämras på plancache, så att merparten av hello planer toostay i cachen och återanvändas.</span><span class="sxs-lookup"><span data-stu-id="ed818-145">There will also be much less overhead on plan cache, allowing majority of hello plans toostay in cache and be reused.</span></span> <span data-ttu-id="ed818-146">Du kan använda den här rekommendationen snabbt och enkelt genom att klicka på hello **tillämpa** kommando.</span><span class="sxs-lookup"><span data-stu-id="ed818-146">You can apply this recommendation quickly and easily by clicking on hello **Apply** command.</span></span> 

<span data-ttu-id="ed818-147">När du använder den här rekommendationen aktiveras framtvingad parameterization inom minuter på din databas som startar hello övervakning bearbetar som varar cirka 24 timmar.</span><span class="sxs-lookup"><span data-stu-id="ed818-147">Once you apply this recommendation, it will enable forced parameterization within minutes on your database and it starts hello monitoring process which approximately lasts for 24 hours.</span></span> <span data-ttu-id="ed818-148">När den här tiden kommer du att vara kan toosee hello verifieringsrapport som visar CPU-användningen för din databas 24 timmar innan och efter hello rekommendation har tillämpats.</span><span class="sxs-lookup"><span data-stu-id="ed818-148">After this period, you will be able toosee hello validation report that shows CPU usage of your database 24 hours before and after hello recommendation has been applied.</span></span> <span data-ttu-id="ed818-149">SQL Database Advisor har en säkerhetsmekanism som återställs automatiskt hello tillämpas rekommendation om en prestanda regression har upptäckts.</span><span class="sxs-lookup"><span data-stu-id="ed818-149">SQL Database Advisor has a safety mechanism that automatically reverts hello applied recommendation in case a performance regression has been detected.</span></span>

## <a name="fix-schema-issues-recommendations"></a><span data-ttu-id="ed818-150">Åtgärda problem rekommendationer för schemat</span><span class="sxs-lookup"><span data-stu-id="ed818-150">Fix schema issues recommendations</span></span>
<span data-ttu-id="ed818-151">**Åtgärda problem med schemat** rekommendationer visas när hello SQL Database-tjänsten meddelanden avvikelser i hello antal schema-relaterade SQL-fel som händer på din Azure SQL-databas.</span><span class="sxs-lookup"><span data-stu-id="ed818-151">**Fix schema issues** recommendations appear when hello SQL Database service notices an anomaly in hello number of schema-related SQL errors happening on your Azure SQL Database.</span></span> <span data-ttu-id="ed818-152">Denna rekommendation visas vanligen när databasen påträffar flera schema-relaterade fel (Ogiltigt kolumnnamn, Ogiltigt objektnamn osv.) inom en timme.</span><span class="sxs-lookup"><span data-stu-id="ed818-152">This recommendation typically appears when your database encounters multiple schema-related errors (invalid column name, invalid object name, etc.) within an hour.</span></span>

<span data-ttu-id="ed818-153">”Schema” problem är en typ av syntaxfel i SQL Server som inträffar när hello definitionen av hello SQL-fråga och hello definition av hello databasschemat inte är justerade.</span><span class="sxs-lookup"><span data-stu-id="ed818-153">“Schema issues” are a class of syntax errors in SQL Server that happen when hello definition of hello SQL query and hello definition of hello database schema are not aligned.</span></span> <span data-ttu-id="ed818-154">Till exempel en av hello kolumner som förväntades av hello frågan kanske saknas i måltabellen för hello, och vice versa.</span><span class="sxs-lookup"><span data-stu-id="ed818-154">For example, one of hello columns expected by hello query may be missing in hello target table, or vice versa.</span></span> 

<span data-ttu-id="ed818-155">”Åtgärda problemet schema” rekommendation visas när Azure SQL Database-tjänsten meddelanden avvikelser i hello antal schema-relaterade SQL-fel som händer på din Azure SQL-databas.</span><span class="sxs-lookup"><span data-stu-id="ed818-155">“Fix schema issue” recommendation appears when Azure SQL Database service notices an anomaly in hello number of schema-related SQL errors happening on your Azure SQL Database.</span></span> <span data-ttu-id="ed818-156">följande tabell visar hello fel som är relaterade tooschema problem hello:</span><span class="sxs-lookup"><span data-stu-id="ed818-156">hello following table shows hello errors that are related tooschema issues:</span></span>

| <span data-ttu-id="ed818-157">SQL-felkod</span><span class="sxs-lookup"><span data-stu-id="ed818-157">SQL Error Code</span></span> | <span data-ttu-id="ed818-158">Meddelande</span><span class="sxs-lookup"><span data-stu-id="ed818-158">Message</span></span> |
| --- | --- |
| <span data-ttu-id="ed818-159">201</span><span class="sxs-lookup"><span data-stu-id="ed818-159">201</span></span> |<span data-ttu-id="ed818-160">Proceduren eller funktionen '*'förväntar parametern'*', som inte har angetts.</span><span class="sxs-lookup"><span data-stu-id="ed818-160">Procedure or function '*' expects parameter '*', which was not supplied.</span></span> |
| <span data-ttu-id="ed818-161">207</span><span class="sxs-lookup"><span data-stu-id="ed818-161">207</span></span> |<span data-ttu-id="ed818-162">Ogiltigt kolumnnamn ' *'.</span><span class="sxs-lookup"><span data-stu-id="ed818-162">Invalid column name '*'.</span></span> |
| <span data-ttu-id="ed818-163">208</span><span class="sxs-lookup"><span data-stu-id="ed818-163">208</span></span> |<span data-ttu-id="ed818-164">Ogiltigt objektnamn ' *'.</span><span class="sxs-lookup"><span data-stu-id="ed818-164">Invalid object name '*'.</span></span> |
| <span data-ttu-id="ed818-165">213</span><span class="sxs-lookup"><span data-stu-id="ed818-165">213</span></span> |<span data-ttu-id="ed818-166">Kolumnnamnet eller antalet angivna värden stämmer inte med tabelldefinitionen.</span><span class="sxs-lookup"><span data-stu-id="ed818-166">Column name or number of supplied values does not match table definition.</span></span> |
| <span data-ttu-id="ed818-167">2812</span><span class="sxs-lookup"><span data-stu-id="ed818-167">2812</span></span> |<span data-ttu-id="ed818-168">Det gick inte att hitta lagrade proceduren ' *'.</span><span class="sxs-lookup"><span data-stu-id="ed818-168">Could not find stored procedure '*'.</span></span> |
| <span data-ttu-id="ed818-169">8144</span><span class="sxs-lookup"><span data-stu-id="ed818-169">8144</span></span> |<span data-ttu-id="ed818-170">Proceduren eller funktionen * har för många argument.</span><span class="sxs-lookup"><span data-stu-id="ed818-170">Procedure or function * has too many arguments specified.</span></span> |

## <a name="next-steps"></a><span data-ttu-id="ed818-171">Nästa steg</span><span class="sxs-lookup"><span data-stu-id="ed818-171">Next steps</span></span>
<span data-ttu-id="ed818-172">Övervaka dina rekommendationer och fortsätta tooapply dem toorefine prestanda.</span><span class="sxs-lookup"><span data-stu-id="ed818-172">Monitor your recommendations and continue tooapply them toorefine performance.</span></span> <span data-ttu-id="ed818-173">Databasarbetsbelastningar är dynamiska och ändra kontinuerligt.</span><span class="sxs-lookup"><span data-stu-id="ed818-173">Database workloads are dynamic and change continuously.</span></span> <span data-ttu-id="ed818-174">SQL Database advisor fortsätter toomonitor och ger rekommendationer som kan förbättra dina databasprestanda.</span><span class="sxs-lookup"><span data-stu-id="ed818-174">SQL Database advisor continues toomonitor and provide recommendations that can potentially improve your database's performance.</span></span> 

* <span data-ttu-id="ed818-175">Se [rekommendationer i hello Azure-portalen](sql-database-advisor-portal.md) stegvisa instruktioner för hur toouse rekommendationer i hello Azure-portalen.</span><span class="sxs-lookup"><span data-stu-id="ed818-175">See [Performance recommendations in hello Azure portal](sql-database-advisor-portal.md) for steps on how toouse performance recommendations in hello Azure portal.</span></span>
* <span data-ttu-id="ed818-176">Se [insikter i frågeprestanda](sql-database-query-performance.md) toolearn om och visa hello prestandapåverkan top-frågor.</span><span class="sxs-lookup"><span data-stu-id="ed818-176">See [Query Performance Insights](sql-database-query-performance.md) toolearn about and view hello performance impact of your top queries.</span></span>

## <a name="additional-resources"></a><span data-ttu-id="ed818-177">Ytterligare resurser</span><span class="sxs-lookup"><span data-stu-id="ed818-177">Additional resources</span></span>
* [<span data-ttu-id="ed818-178">Query Store</span><span class="sxs-lookup"><span data-stu-id="ed818-178">Query Store</span></span>](https://msdn.microsoft.com/library/dn817826.aspx)
* [<span data-ttu-id="ed818-179">SKAPA INDEX</span><span class="sxs-lookup"><span data-stu-id="ed818-179">CREATE INDEX</span></span>](https://msdn.microsoft.com/library/ms188783.aspx)
* [<span data-ttu-id="ed818-180">Rollbaserad åtkomstkontroll</span><span class="sxs-lookup"><span data-stu-id="ed818-180">Role-based access control</span></span>](../active-directory/role-based-access-control-what-is.md)


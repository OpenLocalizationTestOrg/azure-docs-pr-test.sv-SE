---
title: "Hantera Azure SQL Database-schema i en app för flera klienter | Microsoft Docs"
description: "Hantera scheman för flera klienter i ett program för flera klienter som använder Azure SQL Database"
keywords: sql database tutorial
services: sql-database
documentationcenter: 
author: stevestein
manager: jhubbard
editor: 
ms.assetid: 
ms.service: sql-database
ms.custom: scale out apps
ms.workload: data-management
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 07/28/2017
ms.author: billgib; sstein
ms.openlocfilehash: 78d76efb88bf11fa18a416b59e6f881539141232
ms.sourcegitcommit: 02e69c4a9d17645633357fe3d46677c2ff22c85a
ms.translationtype: MT
ms.contentlocale: sv-SE
ms.lasthandoff: 08/03/2017
---
# <a name="manage-schema-for-multiple-tenants-in-the-wingtip-saas-application"></a><span data-ttu-id="89779-104">Hantera schemat för flera klienter i Wingtip SaaS-program</span><span class="sxs-lookup"><span data-stu-id="89779-104">Manage schema for multiple tenants in the Wingtip SaaS application</span></span>

<span data-ttu-id="89779-105">Den [första Wingtip SaaS-självstudierna](sql-database-saas-tutorial.md) visar hur appen kan etablera en klient-databas och registrera den i katalogen.</span><span class="sxs-lookup"><span data-stu-id="89779-105">The [first Wingtip SaaS tutorial](sql-database-saas-tutorial.md) shows how the app can provision a tenant database and register it in the catalog.</span></span> <span data-ttu-id="89779-106">Precis som alla program Wingtip SaaS-appen kommer att utvecklas över tid och kräver ibland ändringar i databasen.</span><span class="sxs-lookup"><span data-stu-id="89779-106">Like any application, the Wingtip SaaS app will evolve over time, and at times will require changes to the database.</span></span> <span data-ttu-id="89779-107">Ändringarna kan inkludera nya eller ändrade scheman, nya eller ändrade referensdata och vanliga uppgifter för databasunderhåll för att säkerställa optimal apprestanda.</span><span class="sxs-lookup"><span data-stu-id="89779-107">Changes may include new or changed schema, new or changed reference data, and routine database maintenance tasks to ensure optimal app performance.</span></span> <span data-ttu-id="89779-108">Med ett SaaS-program, behöver de här ändringarna distribueras på ett samordnat sätt över en potentiellt massiv mängd klientdatabaser.</span><span class="sxs-lookup"><span data-stu-id="89779-108">With a SaaS application, these changes need to be deployed in a coordinated manner across a potentially massive fleet of tenant databases.</span></span> <span data-ttu-id="89779-109">För att ändringarna ska vara i framtiden klient databaser måste de införlivas i etableringsprocessen.</span><span class="sxs-lookup"><span data-stu-id="89779-109">For these changes to be in future tenant databases, they need to be incorporated into the provisioning process.</span></span>

<span data-ttu-id="89779-110">Den här guiden utforskar två scenarier. Distribuering av uppdateringar av referensdata för alla klienter och återställning av ett index i tabellen med referensdata.</span><span class="sxs-lookup"><span data-stu-id="89779-110">This tutorial explores two scenarios - deploying reference data updates for all tenants, and retuning an index on the table containing the reference data.</span></span> <span data-ttu-id="89779-111">Den [elastiska jobb](sql-database-elastic-jobs-overview.md) funktionen används för att utföra dessa åtgärder på alla klienter och *gyllene* klient-databas som används som en mall för nya databaser.</span><span class="sxs-lookup"><span data-stu-id="89779-111">The [Elastic jobs](sql-database-elastic-jobs-overview.md) feature is used to execute these operations across all tenants, and the *golden* tenant database that is used as a template for new databases.</span></span>

<span data-ttu-id="89779-112">I den här självstudiekursen får du lära du dig att:</span><span class="sxs-lookup"><span data-stu-id="89779-112">In this tutorial you learn how to:</span></span>

> [!div class="checklist"]

> * <span data-ttu-id="89779-113">Skapa ett konto för jobb</span><span class="sxs-lookup"><span data-stu-id="89779-113">Create a job account</span></span>
> * <span data-ttu-id="89779-114">Fråga på flera innehavare</span><span class="sxs-lookup"><span data-stu-id="89779-114">Query across multiple tenants</span></span>
> * <span data-ttu-id="89779-115">Uppdaterar data i alla klientdatabaser</span><span class="sxs-lookup"><span data-stu-id="89779-115">Update data in all tenant databases</span></span>
> * <span data-ttu-id="89779-116">Skapar ett index i en tabell i alla klientdatabaser</span><span class="sxs-lookup"><span data-stu-id="89779-116">Create an index on a table in all tenant databases</span></span>


<span data-ttu-id="89779-117">Se till att följande förhandskrav är slutförda för att kunna slutföra den här guiden:</span><span class="sxs-lookup"><span data-stu-id="89779-117">To complete this tutorial, make sure the following prerequisites are met:</span></span>

* <span data-ttu-id="89779-118">Wingtip SaaS-appen har distribuerats.</span><span class="sxs-lookup"><span data-stu-id="89779-118">The Wingtip SaaS app is deployed.</span></span> <span data-ttu-id="89779-119">För att distribuera på mindre än fem minuter finns [distribuera och utforska Wingtip SaaS-program](sql-database-saas-tutorial.md)</span><span class="sxs-lookup"><span data-stu-id="89779-119">To deploy in less than five minutes, see [Deploy and explore the Wingtip SaaS application](sql-database-saas-tutorial.md)</span></span>
* <span data-ttu-id="89779-120">Azure PowerShell ska ha installerats.</span><span class="sxs-lookup"><span data-stu-id="89779-120">Azure PowerShell is installed.</span></span> <span data-ttu-id="89779-121">Mer information finns i [Kom igång med Azure PowerShell](https://docs.microsoft.com/powershell/azure/get-started-azureps)</span><span class="sxs-lookup"><span data-stu-id="89779-121">For details, see [Getting started with Azure PowerShell](https://docs.microsoft.com/powershell/azure/get-started-azureps)</span></span>
* <span data-ttu-id="89779-122">Den senaste versionen av SQL Server Management Studio (SSMS) ska vara installerad.</span><span class="sxs-lookup"><span data-stu-id="89779-122">The latest version of SQL Server Management Studio (SSMS) is installed.</span></span> [<span data-ttu-id="89779-123">Ladda ned och installera SSMS</span><span class="sxs-lookup"><span data-stu-id="89779-123">Download and Install SSMS</span></span>](https://docs.microsoft.com/sql/ssms/download-sql-server-management-studio-ssms)

<span data-ttu-id="89779-124">*Den här guiden använder funktioner för SQL Database-tjänsten som är i en begränsad förhandsgranskning (elastiska databasjobb). Om du vill följa den här guiden, måste du ange ditt prenumerations-ID till SaaSFeedback@microsoft.com med ämnet = Förhandsgranskning av elastiska jobb. När du fått en bekräftelse att din prenumeration har aktiverats kan du, [ladda ned och installera den senaste förhandsversionen av jobs-cmdletarna](https://github.com/jaredmoo/azure-powershell/releases). Den här förhandsgranskningen är begränsad, så Kontakta SaaSFeedback@microsoft.com för frågor eller support.*</span><span class="sxs-lookup"><span data-stu-id="89779-124">*This tutorial uses features of the SQL Database service that are in a limited preview (Elastic Database jobs). If you wish to do this tutorial, provide your subscription id to SaaSFeedback@microsoft.com with subject=Elastic Jobs Preview. After you receive confirmation that your subscription has been enabled, [download and install the latest pre-release jobs cmdlets](https://github.com/jaredmoo/azure-powershell/releases). This preview is limited, so contact SaaSFeedback@microsoft.com for related questions or support.*</span></span>


## <a name="introduction-to-saas-schema-management-patterns"></a><span data-ttu-id="89779-125">Introduktion till SaaS-schemahanteringsmönster</span><span class="sxs-lookup"><span data-stu-id="89779-125">Introduction to SaaS Schema Management patterns</span></span>

<span data-ttu-id="89779-126">SaaS-mönstret för enskilda innehavare per databas har många fördelar av dataisoleringen som uppstår, men samtidigt introduceras den ytterligare komplexiteten med att underhålla och hantera flera databaser.</span><span class="sxs-lookup"><span data-stu-id="89779-126">The single tenant per database SaaS pattern benefits in many ways from the data isolation that results, but at the same time introduces the additional complexity of maintaining and managing many databases.</span></span> <span data-ttu-id="89779-127">[Elastiska jobb](sql-database-elastic-jobs-overview.md) underlättar administration och hantering av SQL-datanivån.</span><span class="sxs-lookup"><span data-stu-id="89779-127">[Elastic Jobs](sql-database-elastic-jobs-overview.md) facilitates administration and management of the SQL data tier.</span></span> <span data-ttu-id="89779-128">Jobb låter dig säkert och tillförlitligt köra uppgifter (T-SQL-skript) oberoende av användarinteraktion eller indata, mot en grupp databaser.</span><span class="sxs-lookup"><span data-stu-id="89779-128">Jobs enable you to securely and reliably, run tasks (T-SQL scripts) independent of user interaction or input, against a group of databases.</span></span> <span data-ttu-id="89779-129">Den här metoden kan användas för att distribuera schema- och vanliga referensdataändringar för alla klienter i ett program.</span><span class="sxs-lookup"><span data-stu-id="89779-129">This method can be used to deploy schema and common reference data changes across all tenants in an application.</span></span> <span data-ttu-id="89779-130">Elastiska jobb kan även användas för att underhålla en *gyllene* kopia av databasen som används för att skapa nya klienter och säkerställa att den alltid har det senaste schemat och data.</span><span class="sxs-lookup"><span data-stu-id="89779-130">Elastic Jobs can also be used to maintain a *golden* copy of the database used to create new tenants, ensuring it always has the latest schema and reference data.</span></span>

![skärmen](media/sql-database-saas-tutorial-schema-management/schema-management.png)


## <a name="elastic-jobs-limited-preview"></a><span data-ttu-id="89779-132">Elastiska jobb begränsad förhandsvisning</span><span class="sxs-lookup"><span data-stu-id="89779-132">Elastic Jobs limited preview</span></span>

<span data-ttu-id="89779-133">Det finns en ny version av elastiska jobb som nu är en inbyggd funktion i Azure SQL Database (som inte kräver några ytterligare tjänster eller komponenter).</span><span class="sxs-lookup"><span data-stu-id="89779-133">There is a new version of Elastic Jobs that is now an integrated feature of Azure SQL Database (that requires no additional services or components).</span></span> <span data-ttu-id="89779-134">Den här nya versionen av elastiska jobb är för närvarande i begränsad förhandsvisning.</span><span class="sxs-lookup"><span data-stu-id="89779-134">This new version of Elastic Jobs is currently in limited preview.</span></span> <span data-ttu-id="89779-135">Den här begränsade förhandsvisningen stöder för närvarande PowerShell för att skapa jobbkonton och T-SQL för att skapa och hantera jobb.</span><span class="sxs-lookup"><span data-stu-id="89779-135">This limited preview currently supports PowerShell to create job accounts, and T-SQL to create and manage jobs.</span></span>

> [!NOTE]
> <span data-ttu-id="89779-136">*Den här guiden använder funktioner för SQL Database-tjänsten som är i en begränsad förhandsgranskning (elastiska databasjobb). Om du vill följa den här guiden, måste du ange ditt prenumerations-ID till SaaSFeedback@microsoft.com med ämnet = Förhandsgranskning av elastiska jobb. När du fått en bekräftelse att din prenumeration har aktiverats kan du, [ladda ned och installera den senaste förhandsversionen av jobs-cmdletarna](https://github.com/jaredmoo/azure-powershell/releases). Den här förhandsgranskningen är begränsad, så Kontakta SaaSFeedback@microsoft.com för frågor eller support.*</span><span class="sxs-lookup"><span data-stu-id="89779-136">*This tutorial uses features of the SQL Database service that are in a limited preview (Elastic Database jobs). If you wish to do this tutorial, provide your subscription id to SaaSFeedback@microsoft.com with subject=Elastic Jobs Preview. After you receive confirmation that your subscription has been enabled, [download and install the latest pre-release jobs cmdlets](https://github.com/jaredmoo/azure-powershell/releases). This preview is limited, so contact SaaSFeedback@microsoft.com for related questions or support.*</span></span>

## <a name="get-the-wingtip-application-scripts"></a><span data-ttu-id="89779-137">Hämta Wingtip-programskript</span><span class="sxs-lookup"><span data-stu-id="89779-137">Get the Wingtip application scripts</span></span>

<span data-ttu-id="89779-138">Wingtip SaaS-skript och programmets källkod är tillgängliga i den [WingtipSaaS](https://github.com/Microsoft/WingtipSaaS) github-lagringsplatsen.</span><span class="sxs-lookup"><span data-stu-id="89779-138">The Wingtip SaaS scripts and application source code are available in the [WingtipSaaS](https://github.com/Microsoft/WingtipSaaS) github repo.</span></span> <span data-ttu-id="89779-139">[Steg för att hämta Wingtip SaaS-skripten](sql-database-wtp-overview.md#download-and-unblock-the-wingtip-saas-scripts).</span><span class="sxs-lookup"><span data-stu-id="89779-139">[Steps to download the Wingtip SaaS scripts](sql-database-wtp-overview.md#download-and-unblock-the-wingtip-saas-scripts).</span></span>

## <a name="create-a-job-account-database-and-new-job-account"></a><span data-ttu-id="89779-140">Skapa en jobbkonto-databas och ett nytt jobbkonto</span><span class="sxs-lookup"><span data-stu-id="89779-140">Create a job account database and new job account</span></span>

<span data-ttu-id="89779-141">Den här guiden kräver att du använder PowerShell för att skapa jobbkonto-databasen och jobbkontot.</span><span class="sxs-lookup"><span data-stu-id="89779-141">This tutorial requires you use PowerShell to create the job account database and job account.</span></span> <span data-ttu-id="89779-142">Precis som MSDB och SQL Agent så använder elastiska jobb sig av en Azure SQL-databas för att lagra jobbdefinitioner, jobbstatus och historik.</span><span class="sxs-lookup"><span data-stu-id="89779-142">Like MSDB and SQL Agent, Elastic Jobs uses an Azure SQL database to store job definitions, job status, and history.</span></span> <span data-ttu-id="89779-143">När jobbkontot väl skapats, kan du skapa och övervaka jobb omedelbart.</span><span class="sxs-lookup"><span data-stu-id="89779-143">Once the job account is created, you can create and monitor jobs immediately.</span></span>

1. <span data-ttu-id="89779-144">Öppna …\\inlärningsmoduler\\schemahantering\\*Demo-SchemaManagement.ps1* i **PowerShell ISE**.</span><span class="sxs-lookup"><span data-stu-id="89779-144">Open …\\Learning Modules\\Schema Management\\*Demo-SchemaManagement.ps1* in the **PowerShell ISE**.</span></span>
1. <span data-ttu-id="89779-145">Tryck **F5** för att köra skriptet.</span><span class="sxs-lookup"><span data-stu-id="89779-145">Press **F5** to run the script.</span></span>

<span data-ttu-id="89779-146">Skriptet *Demo-SchemaManagement.ps1* anropar skriptet *Deploy-SchemaManagement.ps1* för att skapa en *S2*-databas med namnet **jobaccount** på katalogservern.</span><span class="sxs-lookup"><span data-stu-id="89779-146">The *Demo-SchemaManagement.ps1* script calls the *Deploy-SchemaManagement.ps1* script to create an *S2* database named **jobaccount** on the catalog server.</span></span> <span data-ttu-id="89779-147">Därefter skapar den jobbkontot och skickar jobbkonto-databasen som en parameter vid anropet att skapa jobbkonto.</span><span class="sxs-lookup"><span data-stu-id="89779-147">It then creates the job account, passing the jobaccount database as a parameter to the job account creation call.</span></span>

## <a name="create-a-job-to-deploy-new-reference-data-to-all-tenants"></a><span data-ttu-id="89779-148">Skapa ett jobb för att distribuera nya referensdata till alla klienter</span><span class="sxs-lookup"><span data-stu-id="89779-148">Create a job to deploy new reference data to all tenants</span></span>

<span data-ttu-id="89779-149">Varje klientdatabas inkluderar en uppsättning platstyper som definierar vilken typ av evenemang som hålls på en plats.</span><span class="sxs-lookup"><span data-stu-id="89779-149">Each tenant database includes a set of venue types that define the kind of events that are hosted at a venue.</span></span> <span data-ttu-id="89779-150">I den här övningen, distribuerar du en uppdatering till alla klientdatabaser för att lägga till två ytterligare platstyper: *Motorcycle Racing* och *Swimming Club*.</span><span class="sxs-lookup"><span data-stu-id="89779-150">In this exercise, you deploy an update to all the tenant databases to add two additional venue types: *Motorcycle Racing* and *Swimming Club*.</span></span> <span data-ttu-id="89779-151">De här platstyperna motsvarar bakgrundsbilden du ser i klienternas evenemangsapp.</span><span class="sxs-lookup"><span data-stu-id="89779-151">These venue types correspond to the background image you see in the tenant events app.</span></span>

<span data-ttu-id="89779-152">Klicka på listmenyn platstyp och validera att det bara finns 10 alternativ för platstyp och specifikt att ”Motorcycle Racing” och ”Swimming Club” inte finns med i listan.</span><span class="sxs-lookup"><span data-stu-id="89779-152">Click the Venue Type drop down menu and validate that only 10 venue type options are available, and specifically that ‘Motorcycle Racing’ and ‘Swimming Club’ are not included in the list.</span></span>

<span data-ttu-id="89779-153">Nu skapar vi ett jobb för att uppdatera *VenueTypes*-tabellen i alla klientdatabaser och lägga till de nya platstyperna.</span><span class="sxs-lookup"><span data-stu-id="89779-153">Now let’s create a job to update the *VenueTypes* table in all the tenant databases and add the new venue types.</span></span>

<span data-ttu-id="89779-154">För att skapa ett nytt jobb, använder vi oss av en uppsättning jobbsystemlagrade procedurer som skapats i jobbkonto-databasen när jobbkontot skapades.</span><span class="sxs-lookup"><span data-stu-id="89779-154">To create a new job, we use a set of jobs system stored procedures created in the jobaccount database when the job account was created.</span></span>

1. <span data-ttu-id="89779-155">Öppna SSMS och anslut till katalogservern: catalog-\<användare\>.database.windows.net server</span><span class="sxs-lookup"><span data-stu-id="89779-155">Open SSMS and connect to the catalog server: catalog-\<user\>.database.windows.net server</span></span>
1. <span data-ttu-id="89779-156">Anslut också till klientservern: tenants1-\<användare\>. database.windows.net</span><span class="sxs-lookup"><span data-stu-id="89779-156">Also connect to the tenant server: tenants1-\<user\>.database.windows.net</span></span>
1. <span data-ttu-id="89779-157">Bläddra till *contosoconcerthall*-databasen på *tenants1*-servern och fråga *VenueTypes*-tabellen för att bekräfta att *Motorcycle Racing* och *Swimming Club* **inte finns** i resultatlistan.</span><span class="sxs-lookup"><span data-stu-id="89779-157">Browse to the *contosoconcerthall* database on the *tenants1* server and query the *VenueTypes* table to confirm that *Motorcycle Racing* and *Swimming Club* **are not** in the results list.</span></span>
1. <span data-ttu-id="89779-158">Öppna filen... \\inlärningsmoduler\\schemahantering\\DeployReferenceData.sql</span><span class="sxs-lookup"><span data-stu-id="89779-158">Open the file …\\Learning Modules\\Schema Management\\DeployReferenceData.sql</span></span>
1. <span data-ttu-id="89779-159">Ändra instruktionen: Ange @wtpUser = &lt;användaren&gt; och Ersätt det användar-värde som används när du har distribuerat appen Wingtip</span><span class="sxs-lookup"><span data-stu-id="89779-159">Modify the statement: SET @wtpUser = &lt;user&gt; and substitute the User value used when you deployed the Wingtip app</span></span>
1. <span data-ttu-id="89779-160">Kontrollera att du är ansluten till jobaccount-databasen och tryck **F5** för att köra skriptet</span><span class="sxs-lookup"><span data-stu-id="89779-160">Ensure you are connected to the jobaccount database and press **F5** to run the script</span></span>

* <span data-ttu-id="89779-161">**sp\_add\_target\_group** skapar målgruppnamnet DemoServerGroup, nu behöver vi lägga till målmedlemmar.</span><span class="sxs-lookup"><span data-stu-id="89779-161">**sp\_add\_target\_group** creates the target group name DemoServerGroup, now we need to add target members.</span></span>
* <span data-ttu-id="89779-162">**SP\_lägga till\_mål\_grupp\_medlem** lägger till en *server* mål Medlemstyp som bedömer alla databaser på servern (Obs detta är tenants1-&lt; Användaren&gt; servern som innehåller klient-databaser) vid tiden för jobbet körningen ska inkluderas i jobbet, andra är att lägga till en *databasen* mål Medlemstyp, särskilt 'gyllene-databasen (basetenantdb) som finns i katalogen -&lt;användare&gt; server, och slutligen en annan *databasen* måltyp grupp medlem att inkludera adhocanalytics databasen som används i en senare vägledning.</span><span class="sxs-lookup"><span data-stu-id="89779-162">**sp\_add\_target\_group\_member** adds a *server* target member type, which deems all databases within that server (note this is the tenants1-&lt;User&gt; server containing the tenant databases) at time of job execution should be included in the job, the second is adding a *database* target member type, specifically the ‘golden’ database (basetenantdb) that resides on catalog-&lt;User&gt; server, and lastly another *database* target group member type to include the adhocanalytics database that is used in a later tutorial.</span></span>
* <span data-ttu-id="89779-163">**sp\_add\_job** skapar ett jobb som heter referensdatadistribution</span><span class="sxs-lookup"><span data-stu-id="89779-163">**sp\_add\_job** creates a job called “Reference Data Deployment”</span></span>
* <span data-ttu-id="89779-164">**SP\_lägga till\_jobbsteg** skapar de steg som innehåller text för T-SQL-kommandot om du vill uppdatera referenstabellen VenueTypes</span><span class="sxs-lookup"><span data-stu-id="89779-164">**sp\_add\_jobstep** creates the job step containing T-SQL command text to update the reference table, VenueTypes</span></span>
* <span data-ttu-id="89779-165">De återstående vyerna i skriptet visar att jobbet finns och övervakar jobbkörningen.</span><span class="sxs-lookup"><span data-stu-id="89779-165">The remaining views in the script display the existence of the objects and monitor job execution.</span></span> <span data-ttu-id="89779-166">Använd de här frågorna för att granska statusvärde i den **livscykel** kolumnen att avgöra när jobbet har slutförts på alla klient-databaser och ytterligare två databaserna med referenstabellen.</span><span class="sxs-lookup"><span data-stu-id="89779-166">Use these queries to review the status value in the **lifecycle** column to determine when the job has successfully finished on all tenant databases and the two additional databases containing the reference table.</span></span>

1. <span data-ttu-id="89779-167">I SSMS, bläddrar du till *contosoconcerthall*-databasen på *tenants1*-servern och frågar *VenueTypes*-tabellen för att bekräfta att *Motorcycle Racing* och *Swimming Club* **nu finns** i resultatlistan.</span><span class="sxs-lookup"><span data-stu-id="89779-167">In SSMS, browse to the *contosoconcerthall* database on the *tenants1* server and query the *VenueTypes* table to confirm that *Motorcycle Racing* and *Swimming Club* **are** now in the results list.</span></span>


## <a name="create-a-job-to-manage-the-reference-table-index"></a><span data-ttu-id="89779-168">Skapa ett jobb för att hantera referenstabellindexet</span><span class="sxs-lookup"><span data-stu-id="89779-168">Create a job to manage the reference table index</span></span>

<span data-ttu-id="89779-169">På liknande vis som föregående övning så skapar den här ett jobb för att återskapa indexet på referentabellens primärnyckel, en vanlig åtgärd inom databashantering som en administratör kan utföra efter en stor datainläsning i en tabell.</span><span class="sxs-lookup"><span data-stu-id="89779-169">Similar to the previous exercise, this exercise creates a job to rebuild the index on the reference table primary key, a typical database management operation an administrator might perform after a large data load into a table.</span></span>

<span data-ttu-id="89779-170">Skapa ett jobb med samma jobbs systemlagrade procedurer.</span><span class="sxs-lookup"><span data-stu-id="89779-170">Create a job using the same jobs 'system' stored procedures.</span></span>

1. <span data-ttu-id="89779-171">Öppna SSMS och Anslut till katalogen -&lt;användaren&gt;. database.windows.net server</span><span class="sxs-lookup"><span data-stu-id="89779-171">Open SSMS and connect to the catalog-&lt;User&gt;.database.windows.net server</span></span>
1. <span data-ttu-id="89779-172">Öppna filen... \\inlärningsmoduler\\schemahantering\\OnlineReindex.sql</span><span class="sxs-lookup"><span data-stu-id="89779-172">Open the file …\\Learning Modules\\Schema Management\\OnlineReindex.sql</span></span>
1. <span data-ttu-id="89779-173">Högerklicka på anslutningen och välj ansluta till katalogen -&lt;användaren&gt;. database.windows.net server, om inte redan är ansluten</span><span class="sxs-lookup"><span data-stu-id="89779-173">Right click, select Connection, and connect to the catalog-&lt;User&gt;.database.windows.net server, if not already connected</span></span>
1. <span data-ttu-id="89779-174">Kontrollera att du är ansluten till jobbkonto-databasen och tryck F5 för att köra skriptet</span><span class="sxs-lookup"><span data-stu-id="89779-174">Ensure you are connected to the jobaccount database and press F5 to run the script</span></span>

* <span data-ttu-id="89779-175">sp\_add\_job skapar ett nytt jobb som heter “Online Reindex PK\_\_VenueTyp\_\_265E44FD7FD4C885”</span><span class="sxs-lookup"><span data-stu-id="89779-175">sp\_add\_job creates a new job called “Online Reindex PK\_\_VenueTyp\_\_265E44FD7FD4C885”</span></span>
* <span data-ttu-id="89779-176">sp\_add\_jobstep skapar jobbsteget som innehåller T-SQL-kommandotexten för att uppdatera indexet</span><span class="sxs-lookup"><span data-stu-id="89779-176">sp\_add\_jobstep creates the job step containing T-SQL command text to update the index</span></span>




## <a name="next-steps"></a><span data-ttu-id="89779-177">Nästa steg</span><span class="sxs-lookup"><span data-stu-id="89779-177">Next steps</span></span>

<span data-ttu-id="89779-178">I den här guiden lärde du dig hur man:</span><span class="sxs-lookup"><span data-stu-id="89779-178">In this tutorial you learned how to:</span></span>

> [!div class="checklist"]

> * <span data-ttu-id="89779-179">Skapar ett jobbkonto för att fråga över flera klienter</span><span class="sxs-lookup"><span data-stu-id="89779-179">Create a job account to query across multiple tenants</span></span>
> * <span data-ttu-id="89779-180">Uppdaterar data i alla klientdatabaser</span><span class="sxs-lookup"><span data-stu-id="89779-180">Update data in all tenant databases</span></span>
> * <span data-ttu-id="89779-181">Skapar ett index i en tabell i alla klientdatabaser</span><span class="sxs-lookup"><span data-stu-id="89779-181">Create an index on a table in all tenant databases</span></span>

[<span data-ttu-id="89779-182">Ad-hoc analys-guide</span><span class="sxs-lookup"><span data-stu-id="89779-182">Ad-hoc analytics tutorial</span></span>](sql-database-saas-tutorial-adhoc-analytics.md)


## <a name="additional-resources"></a><span data-ttu-id="89779-183">Ytterligare resurser</span><span class="sxs-lookup"><span data-stu-id="89779-183">Additional resources</span></span>

* [<span data-ttu-id="89779-184">Ytterligare självstudier som bygger på Wingtip SaaS-programdistribution</span><span class="sxs-lookup"><span data-stu-id="89779-184">Additional tutorials that build upon the Wingtip SaaS application deployment</span></span>](sql-database-wtp-overview.md#sql-database-wingtip-saas-tutorials)
* [<span data-ttu-id="89779-185">Hantera utskalade molndatabaser</span><span class="sxs-lookup"><span data-stu-id="89779-185">Managing scaled-out cloud databases</span></span>](sql-database-elastic-jobs-overview.md)
* [<span data-ttu-id="89779-186">Skapa och hantera utskalade molndatabaser</span><span class="sxs-lookup"><span data-stu-id="89779-186">Create and manage scaled-out cloud databases</span></span>](sql-database-elastic-jobs-create-and-manage.md)

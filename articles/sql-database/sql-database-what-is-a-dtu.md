---
title: "SQL Database: Vad är en DTU? | Microsoft Docs"
description: "Förstå vad en Azure SQL Database-transaktionsenhet är."
keywords: databasalternativ, databasprestanda
services: sql-database
documentationcenter: 
author: CarlRabeler
manager: jhubbard
editor: CarlRabeler
ms.assetid: 89e3e9ce-2eeb-4949-b40f-6fc3bf520538
ms.service: sql-database
ms.custom: DBs & servers
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: NA
ms.date: 04/13/2017
ms.author: carlrab
ms.openlocfilehash: fac947fa153d83b614dc35c3cc0d8e640bfe1c95
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: sv-SE
ms.lasthandoff: 07/11/2017
---
# <a name="explaining-database-transaction-units-dtus-and-elastic-database-transaction-units-edtus"></a><span data-ttu-id="fbc99-105">Förklarar vad databastransaktionsenheter (DTU, Database Transaction Unit) och elastiska databastransaktionsenheter (eDTU) är.</span><span class="sxs-lookup"><span data-stu-id="fbc99-105">Explaining Database Transaction Units (DTUs) and elastic Database Transaction Units (eDTUs)</span></span>
<span data-ttu-id="fbc99-106">Den här artikeln förklarar vad databastransaktionsenheter (DTU:er) och elastiska databastransaktionsenheter (eDTU:er) är och vad som händer när du når det högsta antalet tillåtna DTU:er eller eDTU:er.</span><span class="sxs-lookup"><span data-stu-id="fbc99-106">This article explains Database Transaction Units (DTUs) and elastic Database Transaction Units (eDTUs) and what happens when you hit the maximum DTUs or eDTUs.</span></span>  

## <a name="what-are-database-transaction-units-dtus"></a><span data-ttu-id="fbc99-107">Vad är databastransaktionsenheter (DTU:er)?</span><span class="sxs-lookup"><span data-stu-id="fbc99-107">What are Database Transaction Units (DTUs)</span></span>
<span data-ttu-id="fbc99-108">För en enda Azure SQL-databas på specifika prestandanivåer inom en [tjänstnivån](sql-database-service-tiers.md#single-database-service-tiers-and-performance-levels), Microsoft garanterar en viss nivå av resurser för den här databasen (oberoende av andra databas i Azure-molnet), och tillhandahålla en förutsägbar nivå av prestanda.</span><span class="sxs-lookup"><span data-stu-id="fbc99-108">For a single Azure SQL database at a specific performance level within a [service tier](sql-database-service-tiers.md#single-database-service-tiers-and-performance-levels), Microsoft guarantees a certain level of resources for that database (independent of any other database in the Azure cloud) and providing a predictable level of performance.</span></span> <span data-ttu-id="fbc99-109">Den här mängden resurser beräknas som ett antal Database Transaction Units eller dtu: er och är en blandning av processor, minne, i/o (data och transaktionen loggning i/o).</span><span class="sxs-lookup"><span data-stu-id="fbc99-109">This amount of resources is calculated as a number of Database Transaction Units or DTUs, and is a blended measure of CPU, memory, I/O (data and transaction log I/O).</span></span> <span data-ttu-id="fbc99-110">Förhållandet mellan resurserna har ursprungligen bestäms av ett [OLTP-arbetsbelastning benchmark](sql-database-benchmark-overview.md) utformats är typiska för verkliga OLTP-arbetsbelastningar.</span><span class="sxs-lookup"><span data-stu-id="fbc99-110">The ratio amongst these resources was originally determined by an [OLTP benchmark workload](sql-database-benchmark-overview.md) designed to be typical of real-world OLTP workloads.</span></span> <span data-ttu-id="fbc99-111">När din arbetsbelastning överskrider mängden någon av dessa resurser, är din dataflödet begränsad – vilket resulterar i långsammare prestanda och timeout.</span><span class="sxs-lookup"><span data-stu-id="fbc99-111">When your workload exceeds the amount of any of these resources, your throughput is throttled - resulting in slower performance and timeouts.</span></span> <span data-ttu-id="fbc99-112">De resurser som används av din arbetsbelastning påverkar inte resurserna som är tillgängliga för andra SQL-databaser i Azure-molnet och resurs som används av andra arbetsbelastningar som inte påverkar resurserna som är tillgängliga för din SQL-databas.</span><span class="sxs-lookup"><span data-stu-id="fbc99-112">The resources used by your workload do not impact the resources available to other SQL databases in the Azure cloud, and the resource used by other workloads do not impact the resources available to your SQL database.</span></span>

![avgränsningsram](./media/sql-database-what-is-a-dtu/bounding-box.png)

<span data-ttu-id="fbc99-114">Dtu: er är mest användbara för att förstå den relativa mängden resurser mellan Azure SQL-databaser på olika prestandanivåer och servicenivåer.</span><span class="sxs-lookup"><span data-stu-id="fbc99-114">DTUs are most useful for understanding the relative amount of resources between Azure SQL Databases at different performance levels and service tiers.</span></span> <span data-ttu-id="fbc99-115">Till exempel dubblerade dtu: erna genom att öka prestandanivåerna för en databas är lika med dubblerade uppsättning resursen är tillgänglig i den databasen.</span><span class="sxs-lookup"><span data-stu-id="fbc99-115">For example, doubling the DTUs by increasing the performance level of a database equates to doubling the set of resource available to that database.</span></span> <span data-ttu-id="fbc99-116">En premium P11-databas med 1 750 DTU:er erbjuder exempelvis 350 gånger mer DTU-beräkningskraft än en Basic-databas med 5 DTU:er.</span><span class="sxs-lookup"><span data-stu-id="fbc99-116">For example, a Premium P11 database with 1750 DTUs provides 350x more DTU compute power than a Basic database with 5 DTUs.</span></span>  

<span data-ttu-id="fbc99-117">För att få en djupare inblick i resursanvändningen (DTU) för din arbetsbelastning, Använd [Azure SQL Database Query Performance Insight](sql-database-query-performance.md) till:</span><span class="sxs-lookup"><span data-stu-id="fbc99-117">To gain deeper insight into the resource (DTU) consumption of your workload, use [Azure SQL Database Query Performance Insight](sql-database-query-performance.md) to:</span></span>

- <span data-ttu-id="fbc99-118">Identifiera de vanligaste frågorna med CPU/varaktighet/körningar som potentiellt kan anpassas för bättre prestanda.</span><span class="sxs-lookup"><span data-stu-id="fbc99-118">Identify the top queries by CPU/Duration/Execution count that can potentially be tuned for improved performance.</span></span> <span data-ttu-id="fbc99-119">Till exempel en i/o-intensiva fråga kan dra nytta av [i minnet optimeringstekniker](sql-database-in-memory.md) för att bättre utnyttja det tillgängliga minnet på en viss tjänst tjänstnivå och prestandanivå nivå.</span><span class="sxs-lookup"><span data-stu-id="fbc99-119">For example, an I/O intensive query might benefit from the use of [in-memory optimization techniques](sql-database-in-memory.md) to make better use of the available memory at a certain service tier and performance level.</span></span>
- <span data-ttu-id="fbc99-120">Detaljnivån i information om en fråga kan visa text och historik över resursutnyttjandet.</span><span class="sxs-lookup"><span data-stu-id="fbc99-120">Drill down into the details of a query, view its text and history of resource utilization.</span></span>
- <span data-ttu-id="fbc99-121">Rekommendationer som visar åtgärder som utförs av för åtkomst av prestandajustering [SQL Database Advisor](sql-database-advisor.md).</span><span class="sxs-lookup"><span data-stu-id="fbc99-121">Access performance tuning recommendations that show actions performed by [SQL Database Advisor](sql-database-advisor.md).</span></span>

<span data-ttu-id="fbc99-122">Du kan [byta tjänstnivå](sql-database-service-tiers.md) när som helst med minimalt avbrott för dina program (normalt mindre än fyra sekunder).</span><span class="sxs-lookup"><span data-stu-id="fbc99-122">You can [change service tiers](sql-database-service-tiers.md) at any time with minimal downtime to your application (generally averaging under four seconds).</span></span> <span data-ttu-id="fbc99-123">För många företag och appar räcker det att kunna skapa databaser och reglera prestanda för fristående databaser upp eller ner efter behov, speciellt om användningsmönstren är relativt förutsägbara.</span><span class="sxs-lookup"><span data-stu-id="fbc99-123">For many businesses and apps, being able to create databases and dial performance up or down on demand is enough, especially if usage patterns are relatively predictable.</span></span> <span data-ttu-id="fbc99-124">Men om du har oförutsägbara användningsmönster, kan det vara svårt att hantera kostnader och din affärsmodell.</span><span class="sxs-lookup"><span data-stu-id="fbc99-124">But if you have unpredictable usage patterns, it can make it hard to manage costs and your business model.</span></span> <span data-ttu-id="fbc99-125">I det här scenariot använder du en elastisk pool med ett visst antal edtu: er som ska delas mellan flera databaser i poolen.</span><span class="sxs-lookup"><span data-stu-id="fbc99-125">For this scenario, you use an elastic pool with a certain number of eDTUs that are shared among multiple database in the pool.</span></span>

![Introduktion till SQL Database: DTU:er för enkla databaser efter nivå](./media/sql-database-what-is-a-dtu/single_db_dtus.png)

## <a name="what-are-elastic-database-transaction-units-edtus"></a><span data-ttu-id="fbc99-127">Vad är elastiska databastransaktionsenheter (eDTU:er)</span><span class="sxs-lookup"><span data-stu-id="fbc99-127">What are elastic Database Transaction Units (eDTUs)</span></span>
<span data-ttu-id="fbc99-128">Snarare än innehåller en särskild uppsättning resurser (Dtu) till en SQL-databas som alltid är tillgänglig oavsett om de inte behövs kan du placera databaser i en [elastisk pool](sql-database-elastic-pool.md) på en SQL Database-server som delar en pool av resurser bland dessa databas.</span><span class="sxs-lookup"><span data-stu-id="fbc99-128">Rather than provide a dedicated set of resources (DTUs) to a SQL Database that is always available regardless of whether needed not, you can place databases into an [elastic pool](sql-database-elastic-pool.md) on a SQL Database server that shares a pool of resources among those database.</span></span> <span data-ttu-id="fbc99-129">Delade resurser i en elastisk pool som mäts med elastiska Datatransaktionsenheter eller edtu: er.</span><span class="sxs-lookup"><span data-stu-id="fbc99-129">The shared resources in an elastic pool measured by elastic Database Transaction Units or eDTUs.</span></span> <span data-ttu-id="fbc99-130">Elastiska pooler erbjuder en enkel kostnadseffektiv lösning för att hantera prestandamål för flera databaser med mycket varierande och oförutsägbara användningsmönster.</span><span class="sxs-lookup"><span data-stu-id="fbc99-130">Elastic pools provide a simple cost effective solution to manage the performance goals for multiple databases that have widely varying and unpredictable usage patterns.</span></span> <span data-ttu-id="fbc99-131">I en elastisk pool, kan du garantera att ingen en databas använder alla resurser i poolen och även som en minimal mängd resurser alltid är tillgängligt för en databas i en elastisk pool.</span><span class="sxs-lookup"><span data-stu-id="fbc99-131">In an elastic pool, you can guarantee that no one database uses all of the resources in the pool and also that a minimum amount of resources is always available to a database in an elastic pool.</span></span> <span data-ttu-id="fbc99-132">Se [elastiska pooler](sql-database-elastic-pool.md) för mer information.</span><span class="sxs-lookup"><span data-stu-id="fbc99-132">See  [elastic pools](sql-database-elastic-pool.md) for more information.</span></span>

![Introduktion till SQL Database: eDTU:er efter nivå](./media/sql-database-what-is-a-dtu/sqldb_elastic_pools.png)

<span data-ttu-id="fbc99-134">En pool tilldelas ett bestämt antal eDTU:er till ett fast pris.</span><span class="sxs-lookup"><span data-stu-id="fbc99-134">A pool is given a set number of eDTUs, for a set price.</span></span> <span data-ttu-id="fbc99-135">Inom den elastiska poolen har de enskilda databaserna flexibiliteten att skalas automatiskt inom konfigurerade parametrar.</span><span class="sxs-lookup"><span data-stu-id="fbc99-135">Within the elastic pool, individual databases are given the flexibility to auto-scale within the configured boundaries.</span></span> <span data-ttu-id="fbc99-136">En databas under hög belastning kan använda sig av fler eDTU:er för att möta efterfrågan, medan databaser under lätta laster förbrukar färre, upp till databaser utan belastning som inte använder några eDTU:er.</span><span class="sxs-lookup"><span data-stu-id="fbc99-136">Under heavy load, a database can consume more eDTUs to meet demand while databases under light loads consume less, up to the point that databases under no load consume no eDTUs.</span></span> <span data-ttu-id="fbc99-137">Genom att etablera resurser för hela poolen, istället för per databas, blir hanteringsuppgifter förenklade och du får en förutsägbar budget för poolen.</span><span class="sxs-lookup"><span data-stu-id="fbc99-137">By provisioning resources for the entire pool, rather than per database, management tasks are simplified and you have a predictable budget for the pool.</span></span>

<span data-ttu-id="fbc99-138">Ytterligare eDTU:er kan läggas till i en befintlig pool utan avbrott för databasen och utan att databaserna i den elastiska poolen påverkas.</span><span class="sxs-lookup"><span data-stu-id="fbc99-138">Additional eDTUs can be added to an existing pool with no database downtime and with no impact on the databases in the pool.</span></span> <span data-ttu-id="fbc99-139">Om eDTU:er sedan inte längre behövs, kan de tas bort från en befintlig pool när som helst.</span><span class="sxs-lookup"><span data-stu-id="fbc99-139">Similarly, if extra eDTUs are no longer needed, they can be removed from an existing pool at any point in time.</span></span> <span data-ttu-id="fbc99-140">Du kan lägga till eller ta bort databaser i poolen, eller begränsa antalet eDTU:er som en databas kan använda vid hög belastning för att reservera eDTU:er för andra databaser.</span><span class="sxs-lookup"><span data-stu-id="fbc99-140">You can add or subtract databases to the pool, or limit the amount of eDTUs a database can use under heavy load to reserve eDTUs for other databases.</span></span> <span data-ttu-id="fbc99-141">Om en databas förutsägbart underutnyttjar resurser, kan du flytta ut den från poolen och konfigurera den som en enda databas med den förutsägbara mängd resurser som det kräver.</span><span class="sxs-lookup"><span data-stu-id="fbc99-141">If a database is predictably under-utilizing resources, you can move it out of the pool and configure it as a single database with predictable amount of resources it requires.</span></span>

## <a name="how-can-i-determine-the-number-of-dtus-needed-by-my-workload"></a><span data-ttu-id="fbc99-142">Hur vet jag hur många DTU:er min arbetsbelastning behöver?</span><span class="sxs-lookup"><span data-stu-id="fbc99-142">How can I determine the number of DTUs needed by my workload?</span></span>
<span data-ttu-id="fbc99-143">Om du vill migrera en befintlig lokal VM-arbetsbelastning eller en VM-arbetsbelastning i SQL Server till Azure SQL Database kan du använda [DTU-kalkylatorn](http://dtucalculator.azurewebsites.net/) för att göra en ungefärlig uppskattning av hur många DTU:er du behöver.</span><span class="sxs-lookup"><span data-stu-id="fbc99-143">If you are looking to migrate an existing on-premises or SQL Server virtual machine workload to Azure SQL Database, you can use the [DTU Calculator](http://dtucalculator.azurewebsites.net/) to approximate the number of DTUs needed.</span></span> <span data-ttu-id="fbc99-144">För en befintlig Azure SQL Database-arbetsbelastning kan du använda [SQL Database Query Performance Insight](sql-database-query-performance.md) för att förstå databasens resursförbrukning (DTU:er) och få djupare insikt i hur du kan optimera arbetsbelastningen.</span><span class="sxs-lookup"><span data-stu-id="fbc99-144">For an existing Azure SQL Database workload, you can use [SQL Database Query Performance Insight](sql-database-query-performance.md) to understand your database resource consumption (DTUs) to get deeper insight into how to optimize your workload.</span></span> <span data-ttu-id="fbc99-145">Du kan också använda [sys.dm_db_ resource_stats](https://msdn.microsoft.com/library/dn800981.aspx)-DMV:n om du vill hämta information om resursförbrukningen för den senaste timmen.</span><span class="sxs-lookup"><span data-stu-id="fbc99-145">You can also use the [sys.dm_db_ resource_stats](https://msdn.microsoft.com/library/dn800981.aspx) DMV to get the resource consumption information for the last one hour.</span></span> <span data-ttu-id="fbc99-146">Du kan också fråga katalogvyn [sys.resource_stats](http://msdn.microsoft.com/library/dn269979.aspx) om du vill få samma data för de senaste 14 dagarna, dock med lägre tillförlitlighet med medelvärden på fem minuter.</span><span class="sxs-lookup"><span data-stu-id="fbc99-146">Alternatively, the catalog view [sys.resource_stats](http://msdn.microsoft.com/library/dn269979.aspx) can also be queried to get the same data for the last 14 days, although at a lower fidelity of five-minute averages.</span></span>

## <a name="how-do-i-know-if-i-could-benefit-from-an-elastic-pool-of-resources"></a><span data-ttu-id="fbc99-147">Hur vet jag om jag kan dra nytta av en elastisk pool med resurser?</span><span class="sxs-lookup"><span data-stu-id="fbc99-147">How do I know if I could benefit from an elastic pool of resources?</span></span>
<span data-ttu-id="fbc99-148">Pooler lämpar sig för ett stort antal databaser med specifika användningsmönster.</span><span class="sxs-lookup"><span data-stu-id="fbc99-148">Pools are suited for a large number of databases with specific utilization patterns.</span></span> <span data-ttu-id="fbc99-149">För en viss databas kännetecknas det här mönstret av låg genomsnittlig användning med relativt ovanliga användningstoppar.</span><span class="sxs-lookup"><span data-stu-id="fbc99-149">For a given database, this pattern is characterized by low average utilization with relatively infrequent utilization spikes.</span></span> <span data-ttu-id="fbc99-150">SQL Database utvärderar automatiskt den historiska resursanvändningen för databaser på en befintlig SQL Database-server och rekommenderar lämplig poolkonfiguration på Azure Portal.</span><span class="sxs-lookup"><span data-stu-id="fbc99-150">SQL Database automatically evaluates the historical resource usage of databases in an existing SQL Database server and recommends the appropriate pool configuration in the Azure portal.</span></span> <span data-ttu-id="fbc99-151">Mer information finns i [När ska jag använda en elastisk pool?](sql-database-elastic-pool.md)</span><span class="sxs-lookup"><span data-stu-id="fbc99-151">For more information, see [when should an elastic pool be used?](sql-database-elastic-pool.md)</span></span>

## <a name="what-happens-when-i-hit-my-maximum-dtus"></a><span data-ttu-id="fbc99-152">Vad händer när jag når maxgränsen för antalet DTU:er?</span><span class="sxs-lookup"><span data-stu-id="fbc99-152">What happens when I hit my maximum DTUs</span></span>
<span data-ttu-id="fbc99-153">Prestandanivåerna kalibreras och regleras för att tillhandahålla nödvändiga resurser så att din databasarbetsbelastning kan köra upp till den högsta gränsen som tillåts för din valda tjänstnivå/prestandanivå.</span><span class="sxs-lookup"><span data-stu-id="fbc99-153">Performance levels are calibrated and governed to provide the needed resources to run your database workload up to the max limits allowed for your selected service tier/performance level.</span></span> <span data-ttu-id="fbc99-154">Om din arbetsbelastning når någon av gränserna för processor, data-IO eller logg-IO tillhandahålls fortfarande resurser på den högsta tillåtna nivån, men du kan märka att svarstiderna för dina frågor blir längre.</span><span class="sxs-lookup"><span data-stu-id="fbc99-154">If your workload is hitting the limits in one of CPU/Data IO/Log IO limits, you continue to receive the resources at the maximum allowed level, but you are likely to see increased latencies for your queries.</span></span> <span data-ttu-id="fbc99-155">Dessa gränser resulterar inte i fel, men i en långsammare arbetsbelastning, såvida inte fördröjningarna blir så allvarliga att tidsgränsen för frågorna överskrids.</span><span class="sxs-lookup"><span data-stu-id="fbc99-155">These limits do not result in any errors, but rather a slowdown in the workload, unless the slowdown becomes so severe that queries start timing out.</span></span> <span data-ttu-id="fbc99-156">Om du når gränsen för det högsta antalet tillåtna samtidiga användarsessioner/begäranden (arbetstrådar) returneras explicita fel.</span><span class="sxs-lookup"><span data-stu-id="fbc99-156">If you are hitting limits of maximum allowed concurrent user sessions/requests (worker threads), you see explicit errors.</span></span> <span data-ttu-id="fbc99-157">Information om gränserna för andra resurser än processor, minne, data-I/O och transaktionsloggs-I/O finns i [Azure SQL Database-resursgränser](sql-database-resource-limits.md).</span><span class="sxs-lookup"><span data-stu-id="fbc99-157">See [Azure SQL Database resource limits](sql-database-resource-limits.md) for information on limit on resources other than CPU, memory, data I/O, and transaction log I/O.</span></span>

## <a name="next-steps"></a><span data-ttu-id="fbc99-158">Nästa steg</span><span class="sxs-lookup"><span data-stu-id="fbc99-158">Next steps</span></span>
* <span data-ttu-id="fbc99-159">Information om DTU:er och eDTU:er som är tillgängliga för enkla databaser och för elastiska pooler finns i [Tjänstnivå](sql-database-service-tiers.md).</span><span class="sxs-lookup"><span data-stu-id="fbc99-159">See [Service tier](sql-database-service-tiers.md) for information on the DTUs and eDTUs available for single databases and for elastic pools.</span></span>
* <span data-ttu-id="fbc99-160">Information om gränserna för andra resurser än processor, minne, data-I/O och transaktionsloggs-I/O finns i [Azure SQL Database-resursgränser](sql-database-resource-limits.md).</span><span class="sxs-lookup"><span data-stu-id="fbc99-160">See [Azure SQL Database resource limits](sql-database-resource-limits.md) for information on limit on resources other than CPU, memory, data I/O, and transaction log I/O.</span></span>
* <span data-ttu-id="fbc99-161">Information som hjälper dig att avgöra din förbrukning (DTU:er) finns i [SQL Database Query Performance Insight](sql-database-query-performance.md).</span><span class="sxs-lookup"><span data-stu-id="fbc99-161">See [SQL Database Query Performance Insight](sql-database-query-performance.md) to understand your (DTUs) consumption.</span></span>
* <span data-ttu-id="fbc99-162">Information om metodiken bakom benchmark-arbetsbelastningen för OLTP som används för att fastställa DTU-kombinationen finns i [Översikt över SQL Database-benchmark](sql-database-benchmark-overview.md).</span><span class="sxs-lookup"><span data-stu-id="fbc99-162">See [SQL Database benchmark overview](sql-database-benchmark-overview.md) to understand the methodology behind the OLTP benchmark workload used to determine the DTU blend.</span></span>

---
title: aaaManaging utskalat moln databaser | Microsoft Docs
description: "Visar hello elastiska jobb databastjänsten"
metakeywords: azure sql database elastic databases
services: sql-database
documentationcenter: 
manager: jhubbard
author: ddove
ms.assetid: 6fa47cf2-1162-4534-a206-6e2d95b78580
ms.service: sql-database
ms.custom: scale out apps
ms.workload: sql-database
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 10/24/2016
ms.author: ddove
ms.openlocfilehash: b6d330cd712421b8cba781e835830772e6e5b77e
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: sv-SE
ms.lasthandoff: 10/06/2017
---
# <a name="managing-scaled-out-cloud-databases"></a><span data-ttu-id="cefab-103">Hantera databaser som skalats ut moln</span><span class="sxs-lookup"><span data-stu-id="cefab-103">Managing scaled-out cloud databases</span></span>
<span data-ttu-id="cefab-104">toomanage utskalat delat databaser, hello **elastisk databas jobb** funktion (förhandsgranskning) gör du tooreliably köra ett skript för Transact-SQL (T-SQL) över flera databaser, inklusive:</span><span class="sxs-lookup"><span data-stu-id="cefab-104">toomanage scaled-out sharded databases, hello **Elastic Database jobs** feature (preview) enables you tooreliably execute a Transact-SQL (T-SQL) script across a group of databases, including:</span></span>

* <span data-ttu-id="cefab-105">ett egendefinierat mängd databaser (beskrivs nedan)</span><span class="sxs-lookup"><span data-stu-id="cefab-105">a custom-defined collection of databases (explained below)</span></span>
* <span data-ttu-id="cefab-106">alla databaser i en [elastisk pool](sql-database-elastic-pool.md)</span><span class="sxs-lookup"><span data-stu-id="cefab-106">all databases in an [elastic pool](sql-database-elastic-pool.md)</span></span>
* <span data-ttu-id="cefab-107">en uppsättning Fragmentera (skapat med hjälp av [klientbibliotek för elastisk databas](sql-database-elastic-database-client-library.md)).</span><span class="sxs-lookup"><span data-stu-id="cefab-107">a shard set (created using [Elastic Database client library](sql-database-elastic-database-client-library.md)).</span></span> 

## <a name="documentation"></a><span data-ttu-id="cefab-108">Dokumentation</span><span class="sxs-lookup"><span data-stu-id="cefab-108">Documentation</span></span>
* <span data-ttu-id="cefab-109">[Installera hello elastiska jobb](sql-database-elastic-jobs-service-installation.md).</span><span class="sxs-lookup"><span data-stu-id="cefab-109">[Install hello Elastic Database job components](sql-database-elastic-jobs-service-installation.md).</span></span> 
* <span data-ttu-id="cefab-110">[Kom igång med elastisk databas jobb](sql-database-elastic-jobs-getting-started.md).</span><span class="sxs-lookup"><span data-stu-id="cefab-110">[Get started with Elastic Database jobs](sql-database-elastic-jobs-getting-started.md).</span></span>
* <span data-ttu-id="cefab-111">[Skapa och hantera jobb med hjälp av PowerShell](sql-database-elastic-jobs-powershell.md).</span><span class="sxs-lookup"><span data-stu-id="cefab-111">[Create and manage jobs using PowerShell](sql-database-elastic-jobs-powershell.md).</span></span>
* [<span data-ttu-id="cefab-112">Skapa och hantera skaländras ut Azure SQL-databaser</span><span class="sxs-lookup"><span data-stu-id="cefab-112">Create and manage scaled out Azure SQL Databases</span></span>](sql-database-elastic-jobs-getting-started.md)

<span data-ttu-id="cefab-113">**Den elastiska databasen jobb** är för närvarande en kund-värdbaserad Azure Cloud Service som gör att hello körning av ad hoc- och schemalagda administrativa uppgifter, som kallas **jobb**.</span><span class="sxs-lookup"><span data-stu-id="cefab-113">**Elastic Database jobs** is currently a customer-hosted Azure Cloud Service that enables hello execution of ad-hoc and scheduled administrative tasks, which are called **jobs**.</span></span> <span data-ttu-id="cefab-114">Med jobb kan enkelt och tillförlitligt sätt hantera stora grupper med Azure SQL-databaser genom att köra Transact-SQL-skript tooperform administrativa åtgärder.</span><span class="sxs-lookup"><span data-stu-id="cefab-114">With jobs, you can easily and reliably manage large groups of Azure SQL Databases by running Transact-SQL scripts tooperform administrative operations.</span></span> 

![Jobb-tjänsten för elastisk databas][1]

## <a name="why-use-jobs"></a><span data-ttu-id="cefab-116">Varför använda jobb?</span><span class="sxs-lookup"><span data-stu-id="cefab-116">Why use jobs?</span></span>
<span data-ttu-id="cefab-117">**Hantera**</span><span class="sxs-lookup"><span data-stu-id="cefab-117">**Manage**</span></span>

<span data-ttu-id="cefab-118">Enkelt göra schemaändringar, hantering av autentiseringsuppgifter, referens uppdateringar, insamling av prestandadata eller klient (kunden) telemetri samling.</span><span class="sxs-lookup"><span data-stu-id="cefab-118">Easily do schema changes, credentials management, reference data updates, performance data collection or tenant (customer) telemetry collection.</span></span>

<span data-ttu-id="cefab-119">**Rapporter**</span><span class="sxs-lookup"><span data-stu-id="cefab-119">**Reports**</span></span>

<span data-ttu-id="cefab-120">Samla in data från en samling av Azure SQL-databaser till en enda måltabell.</span><span class="sxs-lookup"><span data-stu-id="cefab-120">Aggregate data from a collection of Azure SQL Databases into a single destination table.</span></span>

<span data-ttu-id="cefab-121">**Minska omkostnader**</span><span class="sxs-lookup"><span data-stu-id="cefab-121">**Reduce overhead**</span></span>

<span data-ttu-id="cefab-122">Vanligtvis måste du ansluta tooeach databasen oberoende i ordning toorun Transact-SQL-uttryck eller utföra andra administrativa uppgifter.</span><span class="sxs-lookup"><span data-stu-id="cefab-122">Normally, you must connect tooeach database independently in order toorun Transact-SQL statements or perform other administrative tasks.</span></span> <span data-ttu-id="cefab-123">Ett jobb hanterar hello uppgiften att loggning i tooeach databas i hello målgruppen.</span><span class="sxs-lookup"><span data-stu-id="cefab-123">A job handles hello task of logging in tooeach database in hello target group.</span></span> <span data-ttu-id="cefab-124">Du också definiera, underhålla och bevara Transact-SQL-skript toobe utförs i en grupp med Azure SQL-databaser.</span><span class="sxs-lookup"><span data-stu-id="cefab-124">You also define, maintain and persist Transact-SQL scripts toobe executed across a group of Azure SQL Databases.</span></span>

<span data-ttu-id="cefab-125">**Redovisning**</span><span class="sxs-lookup"><span data-stu-id="cefab-125">**Accounting**</span></span>

<span data-ttu-id="cefab-126">Jobben körs hello skript och logg hello status för körning för varje databas.</span><span class="sxs-lookup"><span data-stu-id="cefab-126">Jobs run hello script and log hello status of execution for each database.</span></span> <span data-ttu-id="cefab-127">Du kan också få automatiska försök igen när fel uppstår.</span><span class="sxs-lookup"><span data-stu-id="cefab-127">You also get automatic retry when failures occur.</span></span>

<span data-ttu-id="cefab-128">**Flexibilitet**</span><span class="sxs-lookup"><span data-stu-id="cefab-128">**Flexibility**</span></span>

<span data-ttu-id="cefab-129">Definiera anpassade grupper med Azure SQL-databaser och definiera scheman för att köra ett jobb.</span><span class="sxs-lookup"><span data-stu-id="cefab-129">Define custom groups of Azure SQL Databases, and define schedules for running a job.</span></span>

> [!NOTE]
> <span data-ttu-id="cefab-130">Hello Azure-portalen, bara en uppsättning funktioner begränsad tooSQL Azure elastiska pooler är tillgänglig i.</span><span class="sxs-lookup"><span data-stu-id="cefab-130">In hello Azure portal, only a reduced set of functions limited tooSQL Azure elastic pools is available.</span></span> <span data-ttu-id="cefab-131">Använd hello PowerShell APIs tooaccess hello fullständig uppsättning aktuella funktionalitet.</span><span class="sxs-lookup"><span data-stu-id="cefab-131">Use hello PowerShell APIs tooaccess hello full set of current functionality.</span></span>
> 
> 

## <a name="applications"></a><span data-ttu-id="cefab-132">Program</span><span class="sxs-lookup"><span data-stu-id="cefab-132">Applications</span></span>
* <span data-ttu-id="cefab-133">Utföra administrativa uppgifter, till exempel att distribuera ett nytt schema.</span><span class="sxs-lookup"><span data-stu-id="cefab-133">Perform administrative tasks, such as deploying a new schema.</span></span>
* <span data-ttu-id="cefab-134">Uppdatera data produkten Referensinformation vanliga över alla databaser.</span><span class="sxs-lookup"><span data-stu-id="cefab-134">Update reference data-product information common across all databases.</span></span> <span data-ttu-id="cefab-135">Eller scheman automatiska uppdateringar varje veckodag efter timmar.</span><span class="sxs-lookup"><span data-stu-id="cefab-135">Or schedules automatic updates every weekday, after hours.</span></span>
* <span data-ttu-id="cefab-136">Återskapa index tooimprove frågeprestanda.</span><span class="sxs-lookup"><span data-stu-id="cefab-136">Rebuild indexes tooimprove query performance.</span></span> <span data-ttu-id="cefab-137">hello återskapa kan vara konfigurerade tooexecute över en mängd databaser med jämna mellanrum, som vid låg belastning.</span><span class="sxs-lookup"><span data-stu-id="cefab-137">hello rebuilding can be configured tooexecute across a collection of databases on a recurring basis, such as during off-peak hours.</span></span>
* <span data-ttu-id="cefab-138">Samla in frågeresultat från en uppsättning databaser till en central tabell på grundval av pågående.</span><span class="sxs-lookup"><span data-stu-id="cefab-138">Collect query results from a set of databases into a central table on an on-going basis.</span></span> <span data-ttu-id="cefab-139">Prestandafrågor kan köras kontinuerligt och konfigurerat tootrigger ytterligare aktiviteter toobe utförs.</span><span class="sxs-lookup"><span data-stu-id="cefab-139">Performance queries can be continually executed and configured tootrigger additional tasks toobe executed.</span></span>
* <span data-ttu-id="cefab-140">Utför längre databearbetning frågor som körs i ett stort utbud av databaser, till exempel hello samling kunden telemetri.</span><span class="sxs-lookup"><span data-stu-id="cefab-140">Execute longer running data processing queries across a large set of databases, for example hello collection of customer telemetry.</span></span> <span data-ttu-id="cefab-141">Samlas in resultaten till en enda måltabell för ytterligare analys.</span><span class="sxs-lookup"><span data-stu-id="cefab-141">Results are collected into a single destination table for further analysis.</span></span>

## <a name="elastic-database-jobs-end-to-end"></a><span data-ttu-id="cefab-142">Den elastiska databasen jobb: slutpunkt till slutpunkt</span><span class="sxs-lookup"><span data-stu-id="cefab-142">Elastic Database jobs: end-to-end</span></span>
1. <span data-ttu-id="cefab-143">Installera hello **elastisk databas jobb** komponenter.</span><span class="sxs-lookup"><span data-stu-id="cefab-143">Install hello **Elastic Database jobs** components.</span></span> <span data-ttu-id="cefab-144">Mer information finns i [installerar elastisk databas jobb](sql-database-elastic-jobs-service-installation.md).</span><span class="sxs-lookup"><span data-stu-id="cefab-144">For more information, see [Installing Elastic Database jobs](sql-database-elastic-jobs-service-installation.md).</span></span> <span data-ttu-id="cefab-145">Om hello installationen misslyckas, se [hur toouninstall](sql-database-elastic-jobs-uninstall.md).</span><span class="sxs-lookup"><span data-stu-id="cefab-145">If hello installation fails, see [how toouninstall](sql-database-elastic-jobs-uninstall.md).</span></span>
2. <span data-ttu-id="cefab-146">Använd hello PowerShell APIs tooaccess fler funktioner, till exempel skapa anpassade databasen samlingar, lägga till scheman och/eller samla in resultatet anger.</span><span class="sxs-lookup"><span data-stu-id="cefab-146">Use hello PowerShell APIs tooaccess more functionality, for example creating custom-defined database collections, adding schedules and/or gathering results sets.</span></span> <span data-ttu-id="cefab-147">Använd hello portal för enkel installation och skapa/övervakning av jobb begränsad tooexecution mot en **elastisk pool**.</span><span class="sxs-lookup"><span data-stu-id="cefab-147">Use hello portal for simple installation and creation/monitoring of jobs limited tooexecution against a **elastic pool**.</span></span> 
3. <span data-ttu-id="cefab-148">Skapa krypterade autentiseringsuppgifter för jobbkörningen och [Lägg till hello användare (eller roll) tooeach databas i gruppen hello](sql-database-security-overview.md).</span><span class="sxs-lookup"><span data-stu-id="cefab-148">Create encrypted credentials for job execution and [add hello user (or role) tooeach database in hello group](sql-database-security-overview.md).</span></span>
4. <span data-ttu-id="cefab-149">Skapa en idempotent T-SQL-skript som kan köras mot varje databas i hello-gruppen.</span><span class="sxs-lookup"><span data-stu-id="cefab-149">Create an idempotent T-SQL script that can be run against every database in hello group.</span></span> 
5. <span data-ttu-id="cefab-150">Följ dessa steg toocreate jobb med hjälp av hello Azure-portalen: [skapa och hantera jobb för elastisk databas](sql-database-elastic-jobs-create-and-manage.md).</span><span class="sxs-lookup"><span data-stu-id="cefab-150">Follow these steps toocreate jobs using hello Azure portal: [Creating and managing Elastic Database jobs](sql-database-elastic-jobs-create-and-manage.md).</span></span> 
6. <span data-ttu-id="cefab-151">Eller Använd PowerShell-skript: [skapa och hantera en SQL-databas för elastisk databas jobb med hjälp av PowerShell (förhandsgranskning)](sql-database-elastic-jobs-powershell.md).</span><span class="sxs-lookup"><span data-stu-id="cefab-151">Or use PowerShell scripts: [Create and manage a SQL Database elastic database jobs using PowerShell (preview)](sql-database-elastic-jobs-powershell.md).</span></span>

## <a name="idempotent-scripts"></a><span data-ttu-id="cefab-152">Idempotent skript</span><span class="sxs-lookup"><span data-stu-id="cefab-152">Idempotent scripts</span></span>
<span data-ttu-id="cefab-153">hello skript måste vara [idempotent](https://en.wikipedia.org/wiki/Idempotence).</span><span class="sxs-lookup"><span data-stu-id="cefab-153">hello scripts must be [idempotent](https://en.wikipedia.org/wiki/Idempotence).</span></span> <span data-ttu-id="cefab-154">Enkelt uttryckt innebär ”idempotent” att om hello skriptet lyckas och kör igen, hello samma resultat sker.</span><span class="sxs-lookup"><span data-stu-id="cefab-154">In simple terms, "idempotent" means that if hello script succeeds, and it is run again, hello same result occurs.</span></span> <span data-ttu-id="cefab-155">Ett skript kan misslyckas på grund av nätverksproblem tootransient.</span><span class="sxs-lookup"><span data-stu-id="cefab-155">A script may fail due tootransient network issues.</span></span> <span data-ttu-id="cefab-156">I så fall försöker automatiskt hello jobbet körs hello skript ett förinställt antal gånger innan desisting.</span><span class="sxs-lookup"><span data-stu-id="cefab-156">In that case, hello job will automatically retry running hello script a preset number of times before desisting.</span></span> <span data-ttu-id="cefab-157">Ett skript för idempotent har hello samma resultat även om har utförts två gånger.</span><span class="sxs-lookup"><span data-stu-id="cefab-157">An idempotent script has hello same result even if has been successfully run twice.</span></span> 

<span data-ttu-id="cefab-158">En enkel skräpposten är tootest för hello förekomsten av ett objekt innan du skapar den.</span><span class="sxs-lookup"><span data-stu-id="cefab-158">A simple tactic is tootest for hello existence of an object before creating it.</span></span>  

    IF NOT EXIST (some_object)
    -- Create hello object 
    -- If it exists, drop hello object before recreating it.

<span data-ttu-id="cefab-159">På liknande sätt kan ett skript måste vara kan tooexecute har genom att logiskt och motverka eventuella villkor som hittas.</span><span class="sxs-lookup"><span data-stu-id="cefab-159">Similarly, a script must be able tooexecute successfully by logically testing for and countering any conditions it finds.</span></span>

## <a name="failures-and-logs"></a><span data-ttu-id="cefab-160">Fel och loggar</span><span class="sxs-lookup"><span data-stu-id="cefab-160">Failures and logs</span></span>
<span data-ttu-id="cefab-161">Om ett skript misslyckas efter flera försök hello jobb loggar hello fel och fortsätter.</span><span class="sxs-lookup"><span data-stu-id="cefab-161">If a script fails after multiple attempts, hello job logs hello error and continues.</span></span> <span data-ttu-id="cefab-162">När ett jobb har upphört kan (vilket innebär en körning mot alla databaser i gruppen hello) du kontrollera listan över misslyckade försök.</span><span class="sxs-lookup"><span data-stu-id="cefab-162">After a job ends (meaning a run against all databases in hello group), you can check its list of failed attempts.</span></span> <span data-ttu-id="cefab-163">hello-loggarna ger information toodebug felaktiga skript.</span><span class="sxs-lookup"><span data-stu-id="cefab-163">hello logs provide details toodebug faulty scripts.</span></span> 

## <a name="group-types-and-creation"></a><span data-ttu-id="cefab-164">Gruppen typer och skapa</span><span class="sxs-lookup"><span data-stu-id="cefab-164">Group types and creation</span></span>
<span data-ttu-id="cefab-165">Det finns två typer av grupper:</span><span class="sxs-lookup"><span data-stu-id="cefab-165">There are two kinds of groups:</span></span> 

1. <span data-ttu-id="cefab-166">Fragmentera uppsättningar</span><span class="sxs-lookup"><span data-stu-id="cefab-166">Shard sets</span></span>
2. <span data-ttu-id="cefab-167">Anpassade grupper</span><span class="sxs-lookup"><span data-stu-id="cefab-167">Custom groups</span></span>

<span data-ttu-id="cefab-168">Fragmentera uppsättning grupper skapas med hjälp av hello [elastisk Databasverktyg](sql-database-elastic-scale-introduction.md).</span><span class="sxs-lookup"><span data-stu-id="cefab-168">Shard set groups are created using hello [Elastic Database tools](sql-database-elastic-scale-introduction.md).</span></span> <span data-ttu-id="cefab-169">När du skapar en Fragmentera set grupp databaser läggs till eller tas bort från hello gruppen automatiskt.</span><span class="sxs-lookup"><span data-stu-id="cefab-169">When you create a shard set group, databases are added or removed from hello group automatically.</span></span> <span data-ttu-id="cefab-170">Till exempel blir en ny Fragmentera automatiskt i hello gruppen när du lägger till den toohello Fragmentera kartan.</span><span class="sxs-lookup"><span data-stu-id="cefab-170">For example, a new shard will be automatically in hello group when you add it toohello shard map.</span></span> <span data-ttu-id="cefab-171">Sedan kan du köra ett jobb mot hello grupp.</span><span class="sxs-lookup"><span data-stu-id="cefab-171">A job can then be run against hello group.</span></span>

<span data-ttu-id="cefab-172">Anpassade grupper på Hej andra sidan, strikt definierad.</span><span class="sxs-lookup"><span data-stu-id="cefab-172">Custom groups, on hello other hand, are rigidly defined.</span></span> <span data-ttu-id="cefab-173">Du måste uttryckligen lägga till eller ta bort databaser från anpassade grupper.</span><span class="sxs-lookup"><span data-stu-id="cefab-173">You must explicitly add or remove databases from custom groups.</span></span> <span data-ttu-id="cefab-174">Om en databas i gruppen hello bryts försöker hello jobbet toorun hello skript mot hello databasen, vilket resulterar i ett eventuella fel.</span><span class="sxs-lookup"><span data-stu-id="cefab-174">If a database in hello group is dropped, hello job will attempt toorun hello script against hello database resulting in an eventual failure.</span></span> <span data-ttu-id="cefab-175">Grupper som skapats med hello Azure-portalen för närvarande är anpassade grupper.</span><span class="sxs-lookup"><span data-stu-id="cefab-175">Groups created using hello Azure portal currently are custom groups.</span></span> 

## <a name="components-and-pricing"></a><span data-ttu-id="cefab-176">Komponenter och prissättning</span><span class="sxs-lookup"><span data-stu-id="cefab-176">Components and pricing</span></span>
<span data-ttu-id="cefab-177">hello fungerar följande komponenter tillsammans toocreate en Azure-molntjänst som aktiverar ad hoc-körning av administrativa jobb.</span><span class="sxs-lookup"><span data-stu-id="cefab-177">hello following components work together toocreate an Azure Cloud service that enables ad-hoc execution of administrative jobs.</span></span> <span data-ttu-id="cefab-178">hello-komponenter installeras och konfigureras automatiskt under installationen, i din prenumeration.</span><span class="sxs-lookup"><span data-stu-id="cefab-178">hello components are installed and configured automatically during setup, in your subscription.</span></span> <span data-ttu-id="cefab-179">Du kan identifiera hello tjänster som alla har hello samma automatiskt genererade namnet.</span><span class="sxs-lookup"><span data-stu-id="cefab-179">You can identify hello services as they all have hello same auto-generated name.</span></span> <span data-ttu-id="cefab-180">hello namn är unikt och består av hello prefixet ”edj” följt av 21 slumpmässigt genererat tecken.</span><span class="sxs-lookup"><span data-stu-id="cefab-180">hello name is unique, and consists of hello prefix "edj" followed by 21 randomly generated characters.</span></span>

* <span data-ttu-id="cefab-181">**Molntjänsten Azure**: elastisk databas jobb (förhandsgranskning) levereras som en kund-värdbaserad Azure Cloud service tooperform körning av hello begärda uppgifter.</span><span class="sxs-lookup"><span data-stu-id="cefab-181">**Azure Cloud Service**: elastic database jobs (preview) is delivered as a customer-hosted Azure Cloud service tooperform execution of hello requested tasks.</span></span> <span data-ttu-id="cefab-182">Från hello-portalen hello-tjänsten distribueras och hanteras i Microsoft Azure-prenumerationen.</span><span class="sxs-lookup"><span data-stu-id="cefab-182">From hello portal, hello service is deployed and hosted in your Microsoft Azure subscription.</span></span> <span data-ttu-id="cefab-183">hello distribueras standardtjänsten körs med hello minst två arbetsroller för hög tillgänglighet.</span><span class="sxs-lookup"><span data-stu-id="cefab-183">hello default deployed service runs with hello minimum of two worker roles for high availability.</span></span> <span data-ttu-id="cefab-184">hello standardstorleken på varje worker-rollen (ElasticDatabaseJobWorker) körs på en A0-instans.</span><span class="sxs-lookup"><span data-stu-id="cefab-184">hello default size of each worker role (ElasticDatabaseJobWorker) runs on an A0 instance.</span></span> <span data-ttu-id="cefab-185">Priser, finns i [molntjänster priser](https://azure.microsoft.com/pricing/details/cloud-services/).</span><span class="sxs-lookup"><span data-stu-id="cefab-185">For pricing, see [Cloud services pricing](https://azure.microsoft.com/pricing/details/cloud-services/).</span></span> 
* <span data-ttu-id="cefab-186">**Azure SQL Database**: hello tjänsten använder Azure SQL-databas kallas hello **databasen** toostore alla hello jobbet metadata.</span><span class="sxs-lookup"><span data-stu-id="cefab-186">**Azure SQL Database**: hello service uses an Azure SQL Database known as hello **control database** toostore all of hello job metadata.</span></span> <span data-ttu-id="cefab-187">hello standard-tjänstnivå är en S0.</span><span class="sxs-lookup"><span data-stu-id="cefab-187">hello default service tier is a S0.</span></span> <span data-ttu-id="cefab-188">Priser, finns i [priser för SQL Database](https://azure.microsoft.com/pricing/details/sql-database/).</span><span class="sxs-lookup"><span data-stu-id="cefab-188">For pricing, see [SQL Database Pricing](https://azure.microsoft.com/pricing/details/sql-database/).</span></span>
* <span data-ttu-id="cefab-189">**Azure Service Bus**: ett Azure Service Bus är för samordning av hello arbetet inom hello Azure Cloud Service.</span><span class="sxs-lookup"><span data-stu-id="cefab-189">**Azure Service Bus**: An Azure Service Bus is for coordination of hello work within hello Azure Cloud Service.</span></span> <span data-ttu-id="cefab-190">Se [Service Bus priser](https://azure.microsoft.com/pricing/details/service-bus/).</span><span class="sxs-lookup"><span data-stu-id="cefab-190">See [Service Bus Pricing](https://azure.microsoft.com/pricing/details/service-bus/).</span></span>
* <span data-ttu-id="cefab-191">**Azure Storage**: ett Azure Storage-konto används toostore diagnostiska utdata loggning i hello händelse som ett problem som kräver ytterligare felsökning (se [aktiverar diagnostik i Azure-molntjänster och virtuella datorer](../cloud-services/cloud-services-dotnet-diagnostics.md)).</span><span class="sxs-lookup"><span data-stu-id="cefab-191">**Azure Storage**: An Azure Storage account is used toostore diagnostic output logging in hello event that an issue requires further debugging (see [Enabling Diagnostics in Azure Cloud Services and Virtual Machines](../cloud-services/cloud-services-dotnet-diagnostics.md)).</span></span> <span data-ttu-id="cefab-192">Priser, finns i [priser för Azure Storage](https://azure.microsoft.com/pricing/details/storage/).</span><span class="sxs-lookup"><span data-stu-id="cefab-192">For pricing, see [Azure Storage Pricing](https://azure.microsoft.com/pricing/details/storage/).</span></span>

## <a name="how-elastic-database-jobs-work"></a><span data-ttu-id="cefab-193">Så här fungerar jobb för elastisk databas</span><span class="sxs-lookup"><span data-stu-id="cefab-193">How Elastic Database jobs work</span></span>
1. <span data-ttu-id="cefab-194">En Azure SQL Database är tilldelad en **databasen** som lagrar alla data för metadata och tillstånd.</span><span class="sxs-lookup"><span data-stu-id="cefab-194">An Azure SQL Database is designated a **control database** which stores all meta-data and state data.</span></span>
2. <span data-ttu-id="cefab-195">databasen för hello används av hello **jobbet service** tooexecute toolaunch och spåra jobb.</span><span class="sxs-lookup"><span data-stu-id="cefab-195">hello control database is accessed by hello **job service** toolaunch and track jobs tooexecute.</span></span>
3. <span data-ttu-id="cefab-196">Två olika roller kommunicerar med databasen för hello:</span><span class="sxs-lookup"><span data-stu-id="cefab-196">Two different roles communicate with hello control database:</span></span> 
   * <span data-ttu-id="cefab-197">Domänkontrollant: Avgör vilka jobb som kräver uppgifter tooperform hello begärda jobbet och försök misslyckade jobb genom att skapa nya jobbuppgifter.</span><span class="sxs-lookup"><span data-stu-id="cefab-197">Controller: Determines which jobs require tasks tooperform hello requested job, and retries failed jobs by creating new job tasks.</span></span>
   * <span data-ttu-id="cefab-198">Jobb för körning av aktiviteten: Utför hello jobbuppgifter.</span><span class="sxs-lookup"><span data-stu-id="cefab-198">Job Task Execution: Carries out hello job tasks.</span></span>

### <a name="job-task-types"></a><span data-ttu-id="cefab-199">Uppgiften jobbtyper</span><span class="sxs-lookup"><span data-stu-id="cefab-199">Job task types</span></span>
<span data-ttu-id="cefab-200">Det finns flera typer av jobbuppgifter som utför körningen av jobb:</span><span class="sxs-lookup"><span data-stu-id="cefab-200">There are multiple types of job tasks that carry out execution of jobs:</span></span>

* <span data-ttu-id="cefab-201">ShardMapRefresh: Frågor hello Fragmentera kartan toodetermine alla hello-databaser som används som delar</span><span class="sxs-lookup"><span data-stu-id="cefab-201">ShardMapRefresh: Queries hello shard map toodetermine all hello databases used as shards</span></span>
* <span data-ttu-id="cefab-202">ScriptSplit: Delningar hello skriptet över 'Gå'-instruktioner i batchar</span><span class="sxs-lookup"><span data-stu-id="cefab-202">ScriptSplit: Splits hello script across ‘GO’ statements into batches</span></span>
* <span data-ttu-id="cefab-203">ExpandJob: Skapar underordnade jobb för varje databas från ett jobb som riktar sig till en grupp databaser</span><span class="sxs-lookup"><span data-stu-id="cefab-203">ExpandJob: Creates child jobs for each database from a job that targets a group of databases</span></span>
* <span data-ttu-id="cefab-204">ScriptExecution: Kör ett skript mot en viss databas med angivna autentiseringsuppgifter</span><span class="sxs-lookup"><span data-stu-id="cefab-204">ScriptExecution: Executes a script against a particular database using defined credentials</span></span>
* <span data-ttu-id="cefab-205">Dacpac: Gäller en DACPAC tooa viss databas med viss autentiseringsuppgifter</span><span class="sxs-lookup"><span data-stu-id="cefab-205">Dacpac: Applies a DACPAC tooa particular database using particular credentials</span></span>

## <a name="end-to-end-job-execution-work-flow"></a><span data-ttu-id="cefab-206">Jobb för slutpunkt till slutpunkt-arbetsflöde för körning</span><span class="sxs-lookup"><span data-stu-id="cefab-206">End-to-end job execution work-flow</span></span>
1. <span data-ttu-id="cefab-207">Med hello portalen eller hello PowerShell API kan infogas ett jobb i hello **databasen**.</span><span class="sxs-lookup"><span data-stu-id="cefab-207">Using either hello Portal or hello PowerShell API, a job is inserted into hello  **control database**.</span></span> <span data-ttu-id="cefab-208">hello jobbet begär körningen av en Transact-SQL-skript mot en grupp databaser med hjälp av autentiseringsuppgifter.</span><span class="sxs-lookup"><span data-stu-id="cefab-208">hello job requests execution of a Transact-SQL script against a group of databases using specific credentials.</span></span>
2. <span data-ttu-id="cefab-209">hello controller identifierar hello nytt jobb.</span><span class="sxs-lookup"><span data-stu-id="cefab-209">hello controller identifies hello new job.</span></span> <span data-ttu-id="cefab-210">Uppgifter i jobbet har skapats och köras toosplit hello skript och toorefresh hello grupp databaser.</span><span class="sxs-lookup"><span data-stu-id="cefab-210">Job tasks are created and executed toosplit hello script and toorefresh hello group’s databases.</span></span> <span data-ttu-id="cefab-211">Slutligen ett nytt jobb skapas och körs tooexpand hello jobbet och skapa nya underordnade jobb där varje underordnad jobb är angivna tooexecute hello Transact-SQL-skript mot en individuell databas i hello gruppen.</span><span class="sxs-lookup"><span data-stu-id="cefab-211">Lastly, a new job is created and executed tooexpand hello job and create new child jobs where each child job is specified tooexecute hello Transact-SQL script against an individual database in hello group.</span></span>
3. <span data-ttu-id="cefab-212">hello controller identifierar hello skapa underordnade jobb.</span><span class="sxs-lookup"><span data-stu-id="cefab-212">hello controller identifies hello created child jobs.</span></span> <span data-ttu-id="cefab-213">För varje jobb hello domänkontrollant skapar och utlöser ett jobb uppgiften tooexecute hello skript mot en databas.</span><span class="sxs-lookup"><span data-stu-id="cefab-213">For each job, hello controller creates and triggers a job task tooexecute hello script against a database.</span></span> 
4. <span data-ttu-id="cefab-214">När alla aktiviteter i jobbet har slutförts, uppdaterar hello controller hello jobb tooa slutfört tillstånd.</span><span class="sxs-lookup"><span data-stu-id="cefab-214">After all job tasks have completed, hello controller updates hello jobs tooa completed state.</span></span> 
   <span data-ttu-id="cefab-215">När som helst under jobbkörningen hello PowerShell API kan använda tooview hello aktuell status för jobbkörningen.</span><span class="sxs-lookup"><span data-stu-id="cefab-215">At any point during job execution, hello PowerShell API can be used tooview hello current state of job execution.</span></span> <span data-ttu-id="cefab-216">Alla tider returneras av hello PowerShell APIs representeras i UTC.</span><span class="sxs-lookup"><span data-stu-id="cefab-216">All times returned by hello PowerShell APIs are represented in UTC.</span></span> <span data-ttu-id="cefab-217">Om du vill, vara en begäran om att avbryta initierade toostop ett jobb.</span><span class="sxs-lookup"><span data-stu-id="cefab-217">If desired, a cancellation request can be initiated toostop a job.</span></span> 

## <a name="next-steps"></a><span data-ttu-id="cefab-218">Nästa steg</span><span class="sxs-lookup"><span data-stu-id="cefab-218">Next steps</span></span>
<span data-ttu-id="cefab-219">[Installera komponenter för hello](sql-database-elastic-jobs-service-installation.md), sedan [skapa och Lägg till en logg i tooeach databas i hello grupp databaser](sql-database-manage-logins.md).</span><span class="sxs-lookup"><span data-stu-id="cefab-219">[Install hello components](sql-database-elastic-jobs-service-installation.md), then [create and add a log in tooeach database in hello group of databases](sql-database-manage-logins.md).</span></span> <span data-ttu-id="cefab-220">toofurther förstå jobbet skapande och hantering, se [skapa och hantera jobb för elastisk databas](sql-database-elastic-jobs-create-and-manage.md).</span><span class="sxs-lookup"><span data-stu-id="cefab-220">toofurther understand job creation and management, see [creating and managing elastic database jobs](sql-database-elastic-jobs-create-and-manage.md).</span></span> <span data-ttu-id="cefab-221">Se även [komma igång med elastisk databas jobb](sql-database-elastic-jobs-getting-started.md).</span><span class="sxs-lookup"><span data-stu-id="cefab-221">See also [Getting started with Elastic Database jobs](sql-database-elastic-jobs-getting-started.md).</span></span>

[!INCLUDE [elastic-scale-include](../../includes/elastic-scale-include.md)]

<!--Image references-->
[1]: ./media/sql-database-elastic-jobs-overview/elastic-jobs.png
<!--anchors-->



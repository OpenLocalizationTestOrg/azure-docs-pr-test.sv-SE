---
title: "aaaAzure SQL-databas elastisk frågan översikt | Microsoft Docs"
description: "Översikt över hello elastisk fråga funktionen"
services: sql-database
documentationcenter: 
manager: jhubbard
author: MladjoA
ms.assetid: a8bf0e2c-bc74-44d0-9b1e-bcc9a6aa2e33
ms.service: sql-database
ms.custom: scale out apps
ms.workload: sql-database
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 04/27/2016
ms.author: mlandzic
ms.openlocfilehash: db17f551882cfcae0da67fdda12708baeb6db81c
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: sv-SE
ms.lasthandoff: 10/06/2017
---
# <a name="azure-sql-database-elastic-query-overview-preview"></a><span data-ttu-id="e1338-103">SQL-databas elastisk frågan översikt över Azure (förhandsversion)</span><span class="sxs-lookup"><span data-stu-id="e1338-103">Azure SQL Database elastic query overview (preview)</span></span>
<span data-ttu-id="e1338-104">hello elastisk fråga funktionen (under förhandsgranskning) kan du toorun en Transact-SQL-fråga som sträcker sig över flera databaser i Azure SQL Database.</span><span class="sxs-lookup"><span data-stu-id="e1338-104">hello elastic query feature (in preview) enables you toorun a Transact-SQL query that spans multiple databases in Azure SQL Database.</span></span> <span data-ttu-id="e1338-105">Kan du tooperform mellan databasfrågor tooaccess fjärrtabeller och tooconnect från Microsoft och tredje parter verktyg (Excel, PowerBI, Tableau, etc.) tooquery över datanivåer med flera databaser.</span><span class="sxs-lookup"><span data-stu-id="e1338-105">It allows you tooperform cross-database queries tooaccess remote tables, and tooconnect Microsoft and third party tools (Excel, PowerBI, Tableau, etc.) tooquery across data tiers with multiple databases.</span></span> <span data-ttu-id="e1338-106">Med den här funktionen kan du skala upp frågor toolarge datanivåer i SQL-databas och visualisera hello resulterar i rapporter för business intelligence (BI).</span><span class="sxs-lookup"><span data-stu-id="e1338-106">Using this feature, you can scale out queries toolarge data tiers in SQL Database and visualize hello results in business intelligence (BI) reports.</span></span>


## <a name="why-use-elastic-queries"></a><span data-ttu-id="e1338-107">Varför använda elastisk frågor?</span><span class="sxs-lookup"><span data-stu-id="e1338-107">Why use elastic queries?</span></span>

<span data-ttu-id="e1338-108">**Azure SQL Database**</span><span class="sxs-lookup"><span data-stu-id="e1338-108">**Azure SQL Database**</span></span>

<span data-ttu-id="e1338-109">Fråga på Azure SQL-databaser helt i T-SQL.</span><span class="sxs-lookup"><span data-stu-id="e1338-109">Query across Azure SQL databases completely in T-SQL.</span></span> <span data-ttu-id="e1338-110">Detta ger skrivskyddad frågor till fjärranslutna databaser.</span><span class="sxs-lookup"><span data-stu-id="e1338-110">This allows for read-only querying of remote databases.</span></span> <span data-ttu-id="e1338-111">Detta ger ett alternativ för aktuell lokal SQL Server-kunder toomigrate program som använder tre och fyra deltid namn eller länkad server tooSQL DB.</span><span class="sxs-lookup"><span data-stu-id="e1338-111">This provides an option for current on-premises SQL Server customers toomigrate applications using three- and four-part names or linked server tooSQL DB.</span></span>

<span data-ttu-id="e1338-112">**Tillgängligt på standardnivån**</span><span class="sxs-lookup"><span data-stu-id="e1338-112">**Available on standard tier**</span></span>

<span data-ttu-id="e1338-113">Elastisk frågan stöds på hello Standard prestandanivån i tillägg toohello premiumnivån prestanda.</span><span class="sxs-lookup"><span data-stu-id="e1338-113">Elastic query is supported on hello Standard performance tier in addition toohello Premium performance tier.</span></span> <span data-ttu-id="e1338-114">Avsnittet hello på begränsningar i förhandsversionen nedan på prestanda begränsningar för lägre prestandanivåer.</span><span class="sxs-lookup"><span data-stu-id="e1338-114">See hello section on Preview Limitations below on performance limitations for lower performance tiers.</span></span>

<span data-ttu-id="e1338-115">**Push tooremote databaser**</span><span class="sxs-lookup"><span data-stu-id="e1338-115">**Push tooremote databases**</span></span>

<span data-ttu-id="e1338-116">Elastisk frågor kan nu push SQL parametrar toohello fjärr-databaser för körning.</span><span class="sxs-lookup"><span data-stu-id="e1338-116">Elastic queries can now push SQL parameters toohello remote databases for execution.</span></span>

<span data-ttu-id="e1338-117">**Lagrade proceduren körning**</span><span class="sxs-lookup"><span data-stu-id="e1338-117">**Stored procedure execution**</span></span>

<span data-ttu-id="e1338-118">Köra lagrade RPC-anrop eller remote funktioner med hjälp av [sp\_köra \_remote](https://msdn.microsoft.com/library/mt703714).</span><span class="sxs-lookup"><span data-stu-id="e1338-118">Execute remote stored procedure calls or remote functions using [sp\_execute \_remote](https://msdn.microsoft.com/library/mt703714).</span></span>

<span data-ttu-id="e1338-119">**Flexibilitet**</span><span class="sxs-lookup"><span data-stu-id="e1338-119">**Flexibility**</span></span>

<span data-ttu-id="e1338-120">Externa tabeller med elastisk fråga kan nu referera tooremote tabeller med ett annat schema eller tabellnamn.</span><span class="sxs-lookup"><span data-stu-id="e1338-120">External tables with elastic query can now refer tooremote tables with a different schema or table name.</span></span>

## <a name="elastic-query-scenarios"></a><span data-ttu-id="e1338-121">Elastisk frågan scenarier</span><span class="sxs-lookup"><span data-stu-id="e1338-121">Elastic query scenarios</span></span>

<span data-ttu-id="e1338-122">hello målet är toofacilitate frågar scenarier där rader bidrar till ett övergripande resultat i flera databaser.</span><span class="sxs-lookup"><span data-stu-id="e1338-122">hello goal is toofacilitate querying scenarios where multiple databases contribute rows into a single overall result.</span></span> <span data-ttu-id="e1338-123">hello fråga kan antingen bestå av hello användare eller program direkt eller indirekt via verktyg som är anslutna toohello databas.</span><span class="sxs-lookup"><span data-stu-id="e1338-123">hello query can either be composed by hello user or application directly, or indirectly through tools that are connected toohello database.</span></span> <span data-ttu-id="e1338-124">Detta är särskilt användbar när du skapar rapporter med hjälp av kommersiella verktyg för integrering av BI eller data, eller alla program som inte kan ändras.</span><span class="sxs-lookup"><span data-stu-id="e1338-124">This is especially useful when creating reports, using commercial BI or data integration tools—or any application that cannot be changed.</span></span> <span data-ttu-id="e1338-125">Du kan fråga över flera databaser med hello välbekanta SQL Server connectivity upplevelse i verktyg som Excel, PowerBI, Tableau eller Cognos med en elastisk fråga.</span><span class="sxs-lookup"><span data-stu-id="e1338-125">With an elastic query, you can query across several databases using hello familiar SQL Server connectivity experience in tools such as Excel, PowerBI, Tableau, or Cognos.</span></span>
<span data-ttu-id="e1338-126">En elastisk fråga kan lätt att komma åt tooan hela uppsättningen av databaser via frågor som utfärdats av SQL Server Management Studio eller Visual Studio och underlättar flera databaser frågar från Entity Framework eller andra ORM-miljöer.</span><span class="sxs-lookup"><span data-stu-id="e1338-126">An elastic query allows easy access tooan entire collection of databases through queries issued by SQL Server Management Studio or Visual Studio, and facilitates cross-database querying from Entity Framework or other ORM environments.</span></span> <span data-ttu-id="e1338-127">Bild 1 visar ett scenario där en befintlig molnet program (som använder hello [klientbibliotek för elastisk databas](sql-database-elastic-database-client-library.md)) nivån bygger på en uppskalad data och en elastisk fråga används för rapportering av flera databaser.</span><span class="sxs-lookup"><span data-stu-id="e1338-127">Figure 1 shows a scenario where an existing cloud application (which uses hello [elastic database client library](sql-database-elastic-database-client-library.md)) builds on a scaled-out data tier, and an elastic query is used for cross-database reporting.</span></span>

<span data-ttu-id="e1338-128">**Bild 1** elastisk fråga som används på utskalat datanivå</span><span class="sxs-lookup"><span data-stu-id="e1338-128">**Figure 1** Elastic query used on scaled-out data tier</span></span>

![Elastisk fråga som används på utskalat datanivå][1]

<span data-ttu-id="e1338-130">Kundscenarier för elastiska frågan kännetecknas av hello följande topologier:</span><span class="sxs-lookup"><span data-stu-id="e1338-130">Customer scenarios for elastic query are characterized by hello following topologies:</span></span>

* <span data-ttu-id="e1338-131">**Vertikal partitionering - mellan databasfrågor** (topologi 1): hello data är partitionerad lodrätt mellan ett antal databaser i en datanivå.</span><span class="sxs-lookup"><span data-stu-id="e1338-131">**Vertical partitioning - Cross-database queries** (Topology 1): hello data is partitioned vertically between a number of databases in a data tier.</span></span> <span data-ttu-id="e1338-132">Vanligtvis finns olika uppsättningar med tabeller på olika databaser.</span><span class="sxs-lookup"><span data-stu-id="e1338-132">Typically, different sets of tables reside on different databases.</span></span> <span data-ttu-id="e1338-133">Det innebär att hello schema skiljer sig på olika databaser.</span><span class="sxs-lookup"><span data-stu-id="e1338-133">That means that hello schema is different on different databases.</span></span> <span data-ttu-id="e1338-134">Till exempel finns alla tabeller för lager på en databas när alla redovisning-relaterade tabeller är på en andra databas.</span><span class="sxs-lookup"><span data-stu-id="e1338-134">For instance, all tables for inventory are on one database while all accounting-related tables are on a second database.</span></span> <span data-ttu-id="e1338-135">Vanliga användningsområden med den här topologin kräver en tooquery över eller toocompile rapporter över tabeller i flera databaser.</span><span class="sxs-lookup"><span data-stu-id="e1338-135">Common use cases with this topology require one tooquery across or toocompile reports across tables in several databases.</span></span>
* <span data-ttu-id="e1338-136">**Horisontell partitionering - horisontell partitionering** (topologi 2): Data är partitionerad vågrätt toodistribute rader i en skaländras ut data tjänstnivån.</span><span class="sxs-lookup"><span data-stu-id="e1338-136">**Horizontal Partitioning - Sharding** (Topology 2): Data is partitioned horizontally toodistribute rows across a scaled out data tier.</span></span> <span data-ttu-id="e1338-137">Hello-schemat är identiska för alla deltagande databaser med den här metoden.</span><span class="sxs-lookup"><span data-stu-id="e1338-137">With this approach, hello schema is identical on all participating databases.</span></span> <span data-ttu-id="e1338-138">Den här metoden kallas även ”delning”.</span><span class="sxs-lookup"><span data-stu-id="e1338-138">This approach is also called “sharding”.</span></span> <span data-ttu-id="e1338-139">Horisontell partitionering kan utföras och hanteras med (1) hello elastisk databas verktyg bibliotek eller (2) self-delning.</span><span class="sxs-lookup"><span data-stu-id="e1338-139">Sharding can be performed and managed using (1) hello elastic database tools libraries or (2) self-sharding.</span></span> <span data-ttu-id="e1338-140">En elastisk frågan är tooquery eller kompilera rapporter över många delar.</span><span class="sxs-lookup"><span data-stu-id="e1338-140">An elastic query is used tooquery or compile reports across many shards.</span></span>

> [!NOTE]
> <span data-ttu-id="e1338-141">Elastisk frågan fungerar bäst för tillfällig reporting scenarier där de flesta av hello bearbetning kan utföras på hello datanivå.</span><span class="sxs-lookup"><span data-stu-id="e1338-141">Elastic query works best for occasional reporting scenarios where most of hello processing can be performed on hello data tier.</span></span> <span data-ttu-id="e1338-142">För tunga reporting arbetsbelastningar eller informationslager-scenarier med mer komplexa frågor kan också överväga att använda [Azure SQL Data Warehouse](https://azure.microsoft.com/services/sql-data-warehouse/).</span><span class="sxs-lookup"><span data-stu-id="e1338-142">For heavy reporting workloads or data warehousing scenarios with more complex queries, also consider using [Azure SQL Data Warehouse](https://azure.microsoft.com/services/sql-data-warehouse/).</span></span>
>  

## <a name="vertical-partitioning---cross-database-queries"></a><span data-ttu-id="e1338-143">Vertikal partitionering - frågor med flera databaser</span><span class="sxs-lookup"><span data-stu-id="e1338-143">Vertical partitioning - cross-database queries</span></span>

<span data-ttu-id="e1338-144">toobegin kodning, se [komma igång med flera databaser fråga (vertikal partitionering)](sql-database-elastic-query-getting-started-vertical.md).</span><span class="sxs-lookup"><span data-stu-id="e1338-144">toobegin coding, see [Getting started with cross-database query (vertical partitioning)](sql-database-elastic-query-getting-started-vertical.md).</span></span>

<span data-ttu-id="e1338-145">En elastisk fråga kan vara används toomake data i en SQL-databas tillgänglig tooother SQL-databaser.</span><span class="sxs-lookup"><span data-stu-id="e1338-145">An elastic query can be used toomake data located in a SQL database available tooother SQL databases.</span></span> <span data-ttu-id="e1338-146">På så sätt kan frågor från en databas toorefer tootables i alla andra fjärranslutna SQL-databasen.</span><span class="sxs-lookup"><span data-stu-id="e1338-146">This allows queries from one database toorefer tootables in any other remote SQL database.</span></span> <span data-ttu-id="e1338-147">hello första steget är toodefine en extern datakälla för varje fjärrdatabasen.</span><span class="sxs-lookup"><span data-stu-id="e1338-147">hello first step is toodefine an external data source for each remote database.</span></span> <span data-ttu-id="e1338-148">hello extern datakälla har definierats i hello lokal databas som du vill toogain åtkomst tootables finns på hello fjärrdatabasen.</span><span class="sxs-lookup"><span data-stu-id="e1338-148">hello external data source is defined in hello local database from which you want toogain access tootables located on hello remote database.</span></span> <span data-ttu-id="e1338-149">Det krävs inga ändringar på hello fjärrdatabasen.</span><span class="sxs-lookup"><span data-stu-id="e1338-149">No changes are necessary on hello remote database.</span></span> <span data-ttu-id="e1338-150">Vanliga vertikal partitionering scenarier där olika databaser har olika scheman, kan elastisk frågor använda tooimplement vanliga användningsområden, till exempel komma åt tooreference data och frågar flera databaser.</span><span class="sxs-lookup"><span data-stu-id="e1338-150">For typical vertical partitioning scenarios where different databases have different schemas, elastic queries can be used tooimplement common use cases such as access tooreference data and cross-database querying.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="e1338-151">Du måste ha behörigheten ALTER ANY extern DATAKÄLLA.</span><span class="sxs-lookup"><span data-stu-id="e1338-151">You must possess ALTER ANY EXTERNAL DATA SOURCE permission.</span></span> <span data-ttu-id="e1338-152">Den här behörigheten ingår i hello ALTER DATABASE-behörighet.</span><span class="sxs-lookup"><span data-stu-id="e1338-152">This permission is included with hello ALTER DATABASE permission.</span></span> <span data-ttu-id="e1338-153">ALTER ANY extern DATAKÄLLA behörigheter är nödvändiga toorefer toohello underliggande datakällan.</span><span class="sxs-lookup"><span data-stu-id="e1338-153">ALTER ANY EXTERNAL DATA SOURCE permissions are needed toorefer toohello underlying data source.</span></span>
>

<span data-ttu-id="e1338-154">**Referensdata**: hello topologi används för hantering av referens.</span><span class="sxs-lookup"><span data-stu-id="e1338-154">**Reference data**: hello topology is used for reference data management.</span></span> <span data-ttu-id="e1338-155">Två tabeller (T1 och T2) med referensdata hålls hello figuren nedan visas på en dedikerad databas.</span><span class="sxs-lookup"><span data-stu-id="e1338-155">In hello figure below, two tables (T1 and T2) with reference data are kept on a dedicated database.</span></span> <span data-ttu-id="e1338-156">Med en elastisk fråga, du kan nu komma åt tabeller T1 och T2 via fjärranslutning från andra databaser som visas i hello bild.</span><span class="sxs-lookup"><span data-stu-id="e1338-156">Using an elastic query, you can now access tables T1 and T2 remotely from other databases, as shown in hello figure.</span></span> <span data-ttu-id="e1338-157">Använd topologi 1 om referenstabellerna är liten eller remote frågor i referenstabellen har selektiv predikat.</span><span class="sxs-lookup"><span data-stu-id="e1338-157">Use topology 1 if reference tables are small or remote queries into reference table have selective predicates.</span></span>

<span data-ttu-id="e1338-158">**Bild 2** vertikal partitionering – med elastisk frågan tooquery referensdata</span><span class="sxs-lookup"><span data-stu-id="e1338-158">**Figure 2** Vertical partitioning - Using elastic query tooquery reference data</span></span>

![Vertikal partitionering – med elastisk frågan tooquery referensdata][3]

<span data-ttu-id="e1338-160">**Flera databaser frågar**: elastiska frågar aktivera användningsområden som kräver fråga över flera SQL-databaser.</span><span class="sxs-lookup"><span data-stu-id="e1338-160">**Cross-database querying**: Elastic queries enable use cases that require querying across several SQL databases.</span></span> <span data-ttu-id="e1338-161">Bild 3 visar fyra olika databaser: CRM, inventering, HR och produkter.</span><span class="sxs-lookup"><span data-stu-id="e1338-161">Figure 3 shows four different databases: CRM, Inventory, HR and Products.</span></span> <span data-ttu-id="e1338-162">Frågor som utförs i en av databaserna hello också behöver komma åt tooone eller alla hello andra databaser.</span><span class="sxs-lookup"><span data-stu-id="e1338-162">Queries performed in one of hello databases also need access tooone or all hello other databases.</span></span> <span data-ttu-id="e1338-163">Du kan med en elastisk fråga för att konfigurera databasen för det här fallet genom att köra några enkla DDL-instruktionerna på varje hello fyra databaser.</span><span class="sxs-lookup"><span data-stu-id="e1338-163">Using an elastic query, you can configure your database for this case by running a few simple DDL statements on each of hello four databases.</span></span> <span data-ttu-id="e1338-164">Efter den här engångskonfiguration är åtkomst tooa fjärrtabell lika enkelt som hänvisar tooa lokal tabell från T-SQL-frågor eller BI-verktyg.</span><span class="sxs-lookup"><span data-stu-id="e1338-164">After this one-time configuration, access tooa remote table is as simple as referring tooa local table from your T-SQL queries or from your BI tools.</span></span> <span data-ttu-id="e1338-165">Den här metoden rekommenderas om hello fjärrfrågor inte returnerar stora resultat.</span><span class="sxs-lookup"><span data-stu-id="e1338-165">This approach is recommended if hello remote queries do not return large results.</span></span>

<span data-ttu-id="e1338-166">**Bild 3** vertikal partitionering – med hjälp av elastisk frågan tooquery mellan olika databaser</span><span class="sxs-lookup"><span data-stu-id="e1338-166">**Figure 3** Vertical partitioning - Using elastic query tooquery across various databases</span></span>

![Vertikal partitionering – med hjälp av elastisk frågan tooquery mellan olika databaser][4]

<span data-ttu-id="e1338-168">hello följande konfigurera elastisk databasfrågor för vertikal partitionering scenarier som kräver åtkomst tooa tabellen finns på fjärranslutna SQL-databaser med hello samma schema:</span><span class="sxs-lookup"><span data-stu-id="e1338-168">hello following steps configure elastic database queries for vertical partitioning scenarios that require access tooa table located on remote SQL databases with hello same schema:</span></span>

* <span data-ttu-id="e1338-169">[Skapa HUVUDNYCKEL](https://msdn.microsoft.com/library/ms174382.aspx) mymasterkey</span><span class="sxs-lookup"><span data-stu-id="e1338-169">[CREATE MASTER KEY](https://msdn.microsoft.com/library/ms174382.aspx) mymasterkey</span></span>
* <span data-ttu-id="e1338-170">[CREATE DATABASE SCOPED CREDENTIAL](https://msdn.microsoft.com/library/mt270260.aspx) mycredential</span><span class="sxs-lookup"><span data-stu-id="e1338-170">[CREATE DATABASE SCOPED CREDENTIAL](https://msdn.microsoft.com/library/mt270260.aspx) mycredential</span></span>
* <span data-ttu-id="e1338-171">[Skapa och släpp extern DATAKÄLLA](https://msdn.microsoft.com/library/dn935022.aspx) mydatasource av typen **RDBMS**</span><span class="sxs-lookup"><span data-stu-id="e1338-171">[CREATE/DROP EXTERNAL DATA SOURCE](https://msdn.microsoft.com/library/dn935022.aspx) mydatasource of type **RDBMS**</span></span>
* <span data-ttu-id="e1338-172">[Skapa och släpp extern tabell](https://msdn.microsoft.com/library/dn935021.aspx) mytable prefix</span><span class="sxs-lookup"><span data-stu-id="e1338-172">[CREATE/DROP EXTERNAL TABLE](https://msdn.microsoft.com/library/dn935021.aspx) mytable</span></span>

<span data-ttu-id="e1338-173">Du kan komma åt hello fjärrtabell ”mytable” som prefix som om det vore en lokal tabell när du har kört hello DDL-instruktioner.</span><span class="sxs-lookup"><span data-stu-id="e1338-173">After running hello DDL statements, you can access hello remote table “mytable” as though it were a local table.</span></span> <span data-ttu-id="e1338-174">Azure SQL Database automatiskt öppnar en anslutning toohello fjärrdatabas, bearbetar din förfrågan på hello fjärrdatabasen och returnerar hello resultat.</span><span class="sxs-lookup"><span data-stu-id="e1338-174">Azure SQL Database automatically opens a connection toohello remote database, processes your request on hello remote database, and returns hello results.</span></span>

## <a name="horizontal-partitioning---sharding"></a><span data-ttu-id="e1338-175">Horisontell partitionering - delning</span><span class="sxs-lookup"><span data-stu-id="e1338-175">Horizontal partitioning - sharding</span></span>
<span data-ttu-id="e1338-176">Elastisk frågan tooperform rapporteringsuppgifter över ett delat, d.v.s., vågrätt partitionerad datanivå kräver en [elastisk databas Fragmentera kartan](sql-database-elastic-scale-shard-map-management.md) toorepresent hello databaser hello datanivå.</span><span class="sxs-lookup"><span data-stu-id="e1338-176">Using elastic query tooperform reporting tasks over a sharded, i.e., horizontally partitioned, data tier requires an [elastic database shard map](sql-database-elastic-scale-shard-map-management.md) toorepresent hello databases of hello data tier .</span></span> <span data-ttu-id="e1338-177">Normalt bara en enda Fragmentera karta används i det här scenariot och en särskild databas med elastisk frågefunktioner (huvudnod) fungerar som hello startpunkten för rapportering frågor.</span><span class="sxs-lookup"><span data-stu-id="e1338-177">Typically, only a single shard map is used in this scenario and a dedicated database with elastic query capabilities (head node) serves as hello entry point for reporting queries.</span></span> <span data-ttu-id="e1338-178">Endast den här databasen måste åtkomst toohello Fragmentera kartan.</span><span class="sxs-lookup"><span data-stu-id="e1338-178">Only this dedicated database needs access toohello shard map.</span></span> <span data-ttu-id="e1338-179">Bild 4 illustrerar den här topologin och dess konfiguration med hello elastisk fråga databasen och Fragmentera karta.</span><span class="sxs-lookup"><span data-stu-id="e1338-179">Figure 4 illustrates this topology and its configuration with hello elastic query database and shard map.</span></span> <span data-ttu-id="e1338-180">hello databaser i hello datanivå kan vara av en Azure SQL Database version eller utgåva.</span><span class="sxs-lookup"><span data-stu-id="e1338-180">hello databases in hello data tier can be of any Azure SQL Database version or edition.</span></span> <span data-ttu-id="e1338-181">Läs mer om hello klientbibliotek för elastisk databas och skapa Fragmentera maps [Fragmentera kartan management](sql-database-elastic-scale-shard-map-management.md).</span><span class="sxs-lookup"><span data-stu-id="e1338-181">For more information about hello elastic database client library and creating shard maps, see [Shard map management](sql-database-elastic-scale-shard-map-management.md).</span></span>

<span data-ttu-id="e1338-182">**Bild 4** vågräta partitionering – med elastisk fråga för rapportering över shardade data kärnnivåerna</span><span class="sxs-lookup"><span data-stu-id="e1338-182">**Figure 4** Horizontal partitioning - Using elastic query for reporting over sharded data tiers</span></span>

![Vågrät partitionering – med elastisk fråga för rapportering över shardade data kärnnivåerna][5]

> [!NOTE]
> <span data-ttu-id="e1338-184">Elastisk fråga databas (huvudnod) kan vara separat databas eller så kan vara hello samma databas som värdar hello Fragmentera mappar.</span><span class="sxs-lookup"><span data-stu-id="e1338-184">Elastic Query Database (head node) can be separate database, or it can be hello same database that hosts hello shard map.</span></span> <span data-ttu-id="e1338-185">Den konfiguration som du väljer, kontrollera att tjänsten och prestanda nivån databasen är tillräckligt högt toohandle hello förväntades mängden inloggning/frågebegäranden.</span><span class="sxs-lookup"><span data-stu-id="e1338-185">Whatever configuration you choose, make sure that service and performance tier of that database is high enough toohandle hello expected  amount of login/query requests.</span></span>

<span data-ttu-id="e1338-186">hello konfigurera följande elastisk databasfrågor för horisontell partitionering scenarier som kräver åtkomst tooa uppsättning tabell som finns på (vanligtvis) flera fjärranslutna SQL-databaser:</span><span class="sxs-lookup"><span data-stu-id="e1338-186">hello following steps configure elastic database queries for horizontal partitioning scenarios that require access tooa set of table that are located on (typically) several remote SQL databases:</span></span>

* <span data-ttu-id="e1338-187">[Skapa HUVUDNYCKEL](https://msdn.microsoft.com/library/ms174382.aspx) mymasterkey</span><span class="sxs-lookup"><span data-stu-id="e1338-187">[CREATE MASTER KEY](https://msdn.microsoft.com/library/ms174382.aspx) mymasterkey</span></span>
* <span data-ttu-id="e1338-188">[CREATE DATABASE SCOPED CREDENTIAL](https://msdn.microsoft.com/library/mt270260.aspx) mycredential</span><span class="sxs-lookup"><span data-stu-id="e1338-188">[CREATE DATABASE SCOPED CREDENTIAL](https://msdn.microsoft.com/library/mt270260.aspx) mycredential</span></span>
* <span data-ttu-id="e1338-189">Skapa en [Fragmentera kartan](sql-database-elastic-scale-shard-map-management.md) som representerar din datanivån med hello klientbibliotek för elastisk databas.</span><span class="sxs-lookup"><span data-stu-id="e1338-189">Create a [shard map](sql-database-elastic-scale-shard-map-management.md) representing your data tier using hello elastic database client library.</span></span>   
* <span data-ttu-id="e1338-190">[Skapa och släpp extern DATAKÄLLA](https://msdn.microsoft.com/library/dn935022.aspx) mydatasource av typen **SHARD_MAP_MANAGER**</span><span class="sxs-lookup"><span data-stu-id="e1338-190">[CREATE/DROP EXTERNAL DATA SOURCE](https://msdn.microsoft.com/library/dn935022.aspx) mydatasource of type **SHARD_MAP_MANAGER**</span></span>
* <span data-ttu-id="e1338-191">[Skapa och släpp extern tabell](https://msdn.microsoft.com/library/dn935021.aspx) mytable prefix</span><span class="sxs-lookup"><span data-stu-id="e1338-191">[CREATE/DROP EXTERNAL TABLE](https://msdn.microsoft.com/library/dn935021.aspx) mytable</span></span>

<span data-ttu-id="e1338-192">När du har utfört dessa steg kan du komma åt hello vågrätt partitionerad tabell ”mytable” som prefix som om det vore en lokal tabell.</span><span class="sxs-lookup"><span data-stu-id="e1338-192">Once you have performed these steps, you can access hello horizontally partitioned table “mytable” as though it were a local table.</span></span> <span data-ttu-id="e1338-193">Azure SQL Database automatiskt öppnar flera parallella anslutningar toohello remote databaser där hello tabeller lagras fysiskt, bearbetar hello begäranden på hello remote databaser och returnerar hello resultat.</span><span class="sxs-lookup"><span data-stu-id="e1338-193">Azure SQL Database automatically opens multiple parallel connections toohello remote databases where hello tables are physically stored, processes hello requests on hello remote databases, and returns hello results.</span></span>
<span data-ttu-id="e1338-194">Mer information om hello steg som krävs för hello horisontell partitionering scenario kan hittas i [elastisk frågan för horisontell partitionering](sql-database-elastic-query-horizontal-partitioning.md).</span><span class="sxs-lookup"><span data-stu-id="e1338-194">More information on hello steps required for hello horizontal partitioning scenario can be found in [elastic query for horizontal partitioning](sql-database-elastic-query-horizontal-partitioning.md).</span></span>

<span data-ttu-id="e1338-195">toobegin kodning, se [komma igång med elastisk frågan för horisontell partitionering (delning)](sql-database-elastic-query-getting-started.md).</span><span class="sxs-lookup"><span data-stu-id="e1338-195">toobegin coding, see [Getting started with elastic query for horizontal partitioning (sharding)](sql-database-elastic-query-getting-started.md).</span></span>

## <a name="t-sql-querying"></a><span data-ttu-id="e1338-196">T-SQL-fråga</span><span class="sxs-lookup"><span data-stu-id="e1338-196">T-SQL querying</span></span>
<span data-ttu-id="e1338-197">När du har definierat din externa datakällor och externa tabeller kan använda du reguljära SQL Server-anslutning strängar tooconnect toohello databaser där du har definierat externa tabeller.</span><span class="sxs-lookup"><span data-stu-id="e1338-197">Once you have defined your external data sources and your external tables, you can use regular SQL Server connection strings tooconnect toohello databases where you defined your external tables.</span></span> <span data-ttu-id="e1338-198">Du kan sedan köra T-SQL-uttryck via externa tabeller för anslutningen med hello begränsningar som beskrivs nedan.</span><span class="sxs-lookup"><span data-stu-id="e1338-198">You can then run T-SQL statements over your external tables on that connection with hello limitations outlined below.</span></span> <span data-ttu-id="e1338-199">Du hittar mer information och exempel för T-SQL-frågor i hello dokumentationen avsnitt [horisontell partitionering](sql-database-elastic-query-horizontal-partitioning.md) och [vertikal partitionering](sql-database-elastic-query-vertical-partitioning.md).</span><span class="sxs-lookup"><span data-stu-id="e1338-199">You can find more information and examples of T-SQL queries in hello documentation topics for [horizontal partitioning](sql-database-elastic-query-horizontal-partitioning.md) and [vertical partitioning](sql-database-elastic-query-vertical-partitioning.md).</span></span>

## <a name="connectivity-for-tools"></a><span data-ttu-id="e1338-200">Anslutning för verktyg</span><span class="sxs-lookup"><span data-stu-id="e1338-200">Connectivity for tools</span></span>
<span data-ttu-id="e1338-201">Du kan använda reguljära strängar tooconnect för SQL Server-anslutning, program och BI eller data integration toodatabases för verktyg som har externa tabeller.</span><span class="sxs-lookup"><span data-stu-id="e1338-201">You can use regular SQL Server connection strings tooconnect your applications and BI or data integration tools toodatabases that have external tables.</span></span> <span data-ttu-id="e1338-202">Kontrollera att SQL Server stöds som en datakälla för verktyget du behöver.</span><span class="sxs-lookup"><span data-stu-id="e1338-202">Make sure that SQL Server is supported as a data source for your tool.</span></span> <span data-ttu-id="e1338-203">När du är ansluten, se toohello elastisk fråga databasen och hello externa tabeller i databasen precis som du gör med andra SQL Server-databasen du ansluter toowith verktyget du behöver.</span><span class="sxs-lookup"><span data-stu-id="e1338-203">Once connected, refer toohello elastic query database and hello external tables in that database just like you would do with any other SQL Server database that you connect toowith your tool.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="e1338-204">Autentisering med hjälp av Azure Active Directory med elastisk frågor stöds inte för närvarande.</span><span class="sxs-lookup"><span data-stu-id="e1338-204">Authentication using Azure Active Directory with elastic queries is not currently supported.</span></span>
> 
> 

## <a name="cost"></a><span data-ttu-id="e1338-205">Kostnad</span><span class="sxs-lookup"><span data-stu-id="e1338-205">Cost</span></span>
<span data-ttu-id="e1338-206">Elastisk frågan ingår i hello kostnaden för Azure SQL Database-databaser.</span><span class="sxs-lookup"><span data-stu-id="e1338-206">Elastic query is included into hello cost of Azure SQL Database databases.</span></span> <span data-ttu-id="e1338-207">Observera att där remote databaserna är i ett annat Datacenter än hello elastisk frågan endpoint-topologier stöds, men datatrafik från fjärranslutna databaser debiteras regular [Azure priser](https://azure.microsoft.com/pricing/details/data-transfers/).</span><span class="sxs-lookup"><span data-stu-id="e1338-207">Note that topologies where your remote databases are in a different data center than hello elastic query endpoint are supported, but data egress from remote databases are charged regular [Azure rates](https://azure.microsoft.com/pricing/details/data-transfers/).</span></span>

## <a name="preview-limitations"></a><span data-ttu-id="e1338-208">Begränsningar i förhandsversionen</span><span class="sxs-lookup"><span data-stu-id="e1338-208">Preview limitations</span></span>
* <span data-ttu-id="e1338-209">Kör ditt första elastisk frågan kan ta upp tooa några minuter på hello Standard prestandanivå.</span><span class="sxs-lookup"><span data-stu-id="e1338-209">Running your first elastic query can take up tooa few minutes on hello Standard performance tier.</span></span> <span data-ttu-id="e1338-210">Nu är nödvändiga tooload hello elastisk frågefunktioner; läser in prestanda förbättras med högre prestandanivåer.</span><span class="sxs-lookup"><span data-stu-id="e1338-210">This time is necessary tooload hello elastic query functionality; loading performance improves with higher performance tiers.</span></span>
* <span data-ttu-id="e1338-211">Skript för externa datakällor eller externa tabeller från SSMS eller SSDT stöds inte ännu.</span><span class="sxs-lookup"><span data-stu-id="e1338-211">Scripting of external data sources or external tables from SSMS or SSDT is not yet supported.</span></span>
* <span data-ttu-id="e1338-212">Import/Export för SQL DB stöder ännu inte externa datakällor och externa tabeller.</span><span class="sxs-lookup"><span data-stu-id="e1338-212">Import/Export for SQL DB does not yet support external data sources and external tables.</span></span> <span data-ttu-id="e1338-213">Om du behöver toouse Import/Export kan ta bort dessa objekt innan du exporterar och sedan återskapa dem när du har importerat.</span><span class="sxs-lookup"><span data-stu-id="e1338-213">If you need toouse Import/Export, drop these objects before exporting and then re-create them after importing.</span></span>
* <span data-ttu-id="e1338-214">Elastisk fråga stöder för närvarande bara läsbehörighet tooexternal tabeller.</span><span class="sxs-lookup"><span data-stu-id="e1338-214">Elastic query currently only supports read-only access tooexternal tables.</span></span> <span data-ttu-id="e1338-215">Du kan dock använda alla T-SQL-funktioner på hello databasen där hello extern tabell definieras.</span><span class="sxs-lookup"><span data-stu-id="e1338-215">You can, however, use full T-SQL functionality on hello database where hello external table is defined.</span></span> <span data-ttu-id="e1338-216">Detta kan vara praktiskt att t.ex. spara tillfälliga resultat, t.ex. Markera med < column_list > till < local_table > eller toodefine lagrade procedurer på hello elastisk fråga databas används tooexternal tabeller.</span><span class="sxs-lookup"><span data-stu-id="e1338-216">This can be useful to, e.g., persist temporary results using, e.g., SELECT <column_list> INTO <local_table>, or toodefine stored procedures on hello elastic query database which refer tooexternal tables.</span></span>
* <span data-ttu-id="e1338-217">Förutom nvarchar(max) stöds inte LOB-typerna i extern tabelldefinitioner.</span><span class="sxs-lookup"><span data-stu-id="e1338-217">Except for nvarchar(max), LOB types are not supported in external table definitions.</span></span> <span data-ttu-id="e1338-218">Som en tillfällig lösning kan du skapa en vy på hello fjärrdatabasen som kastar hello LOB-typ i nvarchar(max), definiera din extern tabell över hello vyn i stället för hello bastabellen och konvertera den tillbaka till hello ursprungliga LOB-typen i dina frågor.</span><span class="sxs-lookup"><span data-stu-id="e1338-218">As a workaround, you can create a view on hello remote database that casts hello LOB type into nvarchar(max), define your external table over hello view instead of hello base table and then cast it back into hello original LOB type in your queries.</span></span>
* <span data-ttu-id="e1338-219">Kolumnstatistik via externa tabeller stöds inte för närvarande.</span><span class="sxs-lookup"><span data-stu-id="e1338-219">Column statistics over external tables are currently not supported.</span></span> <span data-ttu-id="e1338-220">Tabeller statistik stöds, men måste toobe som skapats manuellt.</span><span class="sxs-lookup"><span data-stu-id="e1338-220">Tables statistics are supported, but need toobe created manually.</span></span>

## <a name="feedback"></a><span data-ttu-id="e1338-221">Feedback</span><span class="sxs-lookup"><span data-stu-id="e1338-221">Feedback</span></span>
<span data-ttu-id="e1338-222">Kontrollera dela feedback om din upplevelse med elastisk frågor med oss på Disqus nedan hello MSDN-forum eller Stackoverflow.</span><span class="sxs-lookup"><span data-stu-id="e1338-222">Please share feedback on your experience with elastic queries with us on Disqus below, hello MSDN forums, or on Stackoverflow.</span></span> <span data-ttu-id="e1338-223">Vi är intresserade av alla typer av feedback om hello service (fel, grov kanter, funktionen luckor).</span><span class="sxs-lookup"><span data-stu-id="e1338-223">We are interested in all kinds of feedback about hello service (defects, rough edges, feature gaps).</span></span>

## <a name="next-steps"></a><span data-ttu-id="e1338-224">Nästa steg</span><span class="sxs-lookup"><span data-stu-id="e1338-224">Next steps</span></span>

* <span data-ttu-id="e1338-225">Vertikal partitionering, finns [komma igång med flera databaser fråga (vertikal partitionering)](sql-database-elastic-query-getting-started-vertical.md).</span><span class="sxs-lookup"><span data-stu-id="e1338-225">For a vertical partitioning tutorial, see [Getting started with cross-database query (vertical partitioning)](sql-database-elastic-query-getting-started-vertical.md).</span></span>
* <span data-ttu-id="e1338-226">Syntax och exempel frågor för lodrätt partitionerade finns [frågar lodrätt partitionerad data)](sql-database-elastic-query-vertical-partitioning.md)</span><span class="sxs-lookup"><span data-stu-id="e1338-226">For syntax and sample queries for vertically partitioned data, see [Querying vertically partitioned data)](sql-database-elastic-query-vertical-partitioning.md)</span></span>
* <span data-ttu-id="e1338-227">Horisontell partitionering (delning), finns [komma igång med elastisk frågan för horisontell partitionering (delning)](sql-database-elastic-query-getting-started.md).</span><span class="sxs-lookup"><span data-stu-id="e1338-227">For a horizontal partitioning (sharding) tutorial, see [Getting started with elastic query for horizontal partitioning (sharding)](sql-database-elastic-query-getting-started.md).</span></span>
* <span data-ttu-id="e1338-228">Syntax och exempel frågor för vågrätt partitionerade finns [frågar vågrätt partitionerad data)](sql-database-elastic-query-horizontal-partitioning.md)</span><span class="sxs-lookup"><span data-stu-id="e1338-228">For syntax and sample queries for horizontally partitioned data, see [Querying horizontally partitioned data)](sql-database-elastic-query-horizontal-partitioning.md)</span></span>
* <span data-ttu-id="e1338-229">Se [sp\_köra \_remote](https://msdn.microsoft.com/library/mt703714) för en lagrad procedur som kör en Transact-SQL-instruktion på en enda remote Azure SQL Database eller en uppsättning databaser som fungerar som delar i en vågrät partitioneringsschema.</span><span class="sxs-lookup"><span data-stu-id="e1338-229">See [sp\_execute \_remote](https://msdn.microsoft.com/library/mt703714) for a stored procedure that executes a Transact-SQL statement on a single remote Azure SQL Database or set of databases serving as shards in a horizontal partitioning scheme.</span></span>

<!--Image references-->
[1]: ./media/sql-database-elastic-query-overview/overview.png
[2]: ./media/sql-database-elastic-query-overview/topology1.png
[3]: ./media/sql-database-elastic-query-overview/vertpartrrefdata.png
[4]: ./media/sql-database-elastic-query-overview/verticalpartitioning.png
[5]: ./media/sql-database-elastic-query-overview/horizontalpartitioning.png

<!--anchors-->

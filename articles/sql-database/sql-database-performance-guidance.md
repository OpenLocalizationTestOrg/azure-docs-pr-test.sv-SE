---
title: "aaaAzure vägledning för SQL Database-prestandajustering | Microsoft Docs"
description: "Den här artikeln kan hjälpa dig att avgöra vilka service tier toochoose för ditt program. Den rekommenderar även sätt tootune ditt program tooget hello mesta möjliga av Azure SQL Database."
services: sql-database
documentationcenter: na
author: CarlRabeler
manager: jhubbard
editor: 
ms.assetid: dd8d95fa-24b2-4233-b3f1-8e8952a7a22b
ms.service: sql-database
ms.custom: monitor & tune
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: data-management
ms.date: 02/09/2017
ms.author: carlrab
ms.openlocfilehash: 2699f755391e94ab488ac1e6acedd30f8aec4488
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: sv-SE
ms.lasthandoff: 10/06/2017
---
# <a name="tuning-performance-in-azure-sql-database"></a><span data-ttu-id="73ef0-104">Justera prestanda i Azure SQL Database</span><span class="sxs-lookup"><span data-stu-id="73ef0-104">Tuning performance in Azure SQL Database</span></span>

<span data-ttu-id="73ef0-105">Azure SQL Database tillhandahåller [rekommendationer](sql-database-advisor.md) att du kan använda tooimprove prestandan för din databas eller så kan du låta Azure SQL Database [automatiskt anpassa tooyour programmet](sql-database-automatic-tuning.md) och tillämpa ändringarna som förbättrar prestandan för din arbetsbelastning.</span><span class="sxs-lookup"><span data-stu-id="73ef0-105">Azure SQL Database provides [recommendations](sql-database-advisor.md) that you can use tooimprove performance of your database, or you can let Azure SQL Database [automatically adapt tooyour application](sql-database-automatic-tuning.md) and apply changes that will improve performance of your workload.</span></span>

<span data-ttu-id="73ef0-106">Du har inte några tillämpliga rekommendationer och du fortfarande har problem med prestanda, kan du använda följande metoder tooimprove resultaten hello:</span><span class="sxs-lookup"><span data-stu-id="73ef0-106">In you don't have any applicable recommendations, and you still have performance issues, you might use hello following methods tooimprove performances:</span></span>
1. <span data-ttu-id="73ef0-107">Öka [tjänstnivåer](sql-database-service-tiers.md) och ger mer resurser tooyour databas.</span><span class="sxs-lookup"><span data-stu-id="73ef0-107">Increase [service tiers](sql-database-service-tiers.md) and provide more resources tooyour database.</span></span>
2. <span data-ttu-id="73ef0-108">Finjustera ditt program och tillämpa några metoder som kan förbättra prestanda.</span><span class="sxs-lookup"><span data-stu-id="73ef0-108">Tune your application and apply some best practices that can improve performance.</span></span> 
3. <span data-ttu-id="73ef0-109">Finjustera hello databasen genom att ändra index och frågor toomore effektivt arbeta med data.</span><span class="sxs-lookup"><span data-stu-id="73ef0-109">Tune hello database by changing indexes and queries toomore efficiently work with data.</span></span>

<span data-ttu-id="73ef0-110">Dessa är manuella metoder eftersom du behöver toodecide vad [tjänstnivåer](sql-database-service-tiers.md) väljer du eller om du behöver toorewrite program eller databasen och deply hello ändringar.</span><span class="sxs-lookup"><span data-stu-id="73ef0-110">These are manual methods because you need toodecide what [service tiers](sql-database-service-tiers.md) you would choose or you would need toorewrite application or database code and deply hello changes.</span></span>

## <a name="increasing-performance-tier-of-your-database"></a><span data-ttu-id="73ef0-111">Öka prestandanivån för din databas</span><span class="sxs-lookup"><span data-stu-id="73ef0-111">Increasing performance tier of your database</span></span>

<span data-ttu-id="73ef0-112">Azure SQL Database erbjuder fyra [tjänstnivåer](sql-database-service-tiers.md) som du kan välja mellan: Basic, Standard, Premium och Premium-RS (prestanda mäts i dataöverföringsenheter, eller [dtu: er](sql-database-what-is-a-dtu.md).</span><span class="sxs-lookup"><span data-stu-id="73ef0-112">Azure SQL Database offers four [service tiers](sql-database-service-tiers.md) that you can choose from: Basic, Standard, Premium, and Premium RS (performance is measured in database throughput units, or [DTUs](sql-database-what-is-a-dtu.md).</span></span> <span data-ttu-id="73ef0-113">Varje tjänstnivå isolerar strikt hello resurser att din SQL-databas kan använda och garanterar förutsägbar prestanda för den servicenivån.</span><span class="sxs-lookup"><span data-stu-id="73ef0-113">Each service tier strictly isolates hello resources that your SQL database can use, and guarantees predictable performance for that service level.</span></span> <span data-ttu-id="73ef0-114">Vi erbjuder vägledning som hjälper dig att välja hello tjänstnivå för ditt program i den här artikeln.</span><span class="sxs-lookup"><span data-stu-id="73ef0-114">In this article, we offer guidance that can help you choose hello service tier for your application.</span></span> <span data-ttu-id="73ef0-115">Dessutom diskuterar vi sätt att du kan finjustera din programmet tooget hello mesta möjliga av Azure SQL Database.</span><span class="sxs-lookup"><span data-stu-id="73ef0-115">We also discuss ways that you can tune your application tooget hello most from Azure SQL Database.</span></span>

> [!NOTE]
> <span data-ttu-id="73ef0-116">Den här artikeln fokuserar på prestanda vägledning för enskilda databaser i Azure SQL Database.</span><span class="sxs-lookup"><span data-stu-id="73ef0-116">This article focuses on performance guidance for single databases in Azure SQL Database.</span></span> <span data-ttu-id="73ef0-117">Prestandaråd relaterade tooelastic pooler finns [pris- och prestandaöverväganden för elastiska pooler](sql-database-elastic-pool-guidance.md).</span><span class="sxs-lookup"><span data-stu-id="73ef0-117">For performance guidance related tooelastic pools, see [Price and performance considerations for elastic pools](sql-database-elastic-pool-guidance.md).</span></span> <span data-ttu-id="73ef0-118">Observera dock att du kan använda många hello justera rekommendationerna i den här artikeln toodatabases i en elastisk pool och få liknande prestandafördelarna.</span><span class="sxs-lookup"><span data-stu-id="73ef0-118">Note, though, that you can apply many of hello tuning recommendations in this article toodatabases in an elastic pool, and get similar performance benefits.</span></span>
> 

* <span data-ttu-id="73ef0-119">**Grundläggande**: hello grundläggande service tier erbjudanden goda prestanda förutsägbarhet för varje databas, timme över timme.</span><span class="sxs-lookup"><span data-stu-id="73ef0-119">**Basic**: hello Basic service tier offers good performance predictability for each database, hour over hour.</span></span> <span data-ttu-id="73ef0-120">I en grundläggande databas stöder tillräckligt med resurser för goda prestanda i en liten databas som inte har flera samtidiga begäranden.</span><span class="sxs-lookup"><span data-stu-id="73ef0-120">In a Basic database, sufficient resources support good performance in a small database that doesn't have multiple concurrent requests.</span></span> <span data-ttu-id="73ef0-121">Vanliga användningsområden när du använder grundläggande tjänstnivå är:</span><span class="sxs-lookup"><span data-stu-id="73ef0-121">Typical use cases when you would use Basic service tier are:</span></span>
  * <span data-ttu-id="73ef0-122">**Du precis har börjat med Azure SQL Database**.</span><span class="sxs-lookup"><span data-stu-id="73ef0-122">**You're just getting started with Azure SQL Database**.</span></span> <span data-ttu-id="73ef0-123">Program som är under utveckling ofta behöver inte högpresterande nivåer.</span><span class="sxs-lookup"><span data-stu-id="73ef0-123">Applications that are in development often don't need high-performance levels.</span></span> <span data-ttu-id="73ef0-124">Basic-databaser är en perfekt miljö för utveckling eller testning vid ett lågt pris.</span><span class="sxs-lookup"><span data-stu-id="73ef0-124">Basic databases are an ideal environment for database development or testing, at a low price point.</span></span>
  * <span data-ttu-id="73ef0-125">**Du har en databas med en enda användare**.</span><span class="sxs-lookup"><span data-stu-id="73ef0-125">**You have a database with a single user**.</span></span> <span data-ttu-id="73ef0-126">Program som vanligtvis associerar en användare med en-databas har inte hög kraven för samtidighet och prestanda.</span><span class="sxs-lookup"><span data-stu-id="73ef0-126">Applications that associate a single user with a database typically don’t have high concurrency and performance requirements.</span></span> <span data-ttu-id="73ef0-127">Dessa program lämpar sig för hello grundläggande tjänstnivån.</span><span class="sxs-lookup"><span data-stu-id="73ef0-127">These applications are candidates for hello Basic service tier.</span></span>
* <span data-ttu-id="73ef0-128">**Standard**: hello Standard-tjänstnivå erbjuder bättre prestanda, förutsägbarhet och ger bra prestanda för databaser som har flera samtidiga förfrågningar, som arbetsgrupp och webbprogram.</span><span class="sxs-lookup"><span data-stu-id="73ef0-128">**Standard**: hello Standard service tier offers improved performance predictability and provides good performance for databases that have multiple concurrent requests, like workgroup and web applications.</span></span> <span data-ttu-id="73ef0-129">När du väljer en Standard-nivån tjänstdatabasen, du kan ändra storlek på databasen appen baserat på förutsägbar prestanda, minut över minut.</span><span class="sxs-lookup"><span data-stu-id="73ef0-129">When you choose a Standard service tier database, you can size your database application based on predictable performance, minute over minute.</span></span>
  * <span data-ttu-id="73ef0-130">**Databasen har flera samtidiga förfrågningar**.</span><span class="sxs-lookup"><span data-stu-id="73ef0-130">**Your database has multiple concurrent requests**.</span></span> <span data-ttu-id="73ef0-131">Program som tjänsten mer än en användare åt gången vanligtvis måste högre prestandanivåer.</span><span class="sxs-lookup"><span data-stu-id="73ef0-131">Applications that service more than one user at a time usually need higher performance levels.</span></span> <span data-ttu-id="73ef0-132">Exempelvis är arbetsgrupps- eller webbappar program som har låg toomedium-i/o-trafik krav stöder flera samtidiga frågor bra kandidater för hello Standard-tjänstnivå.</span><span class="sxs-lookup"><span data-stu-id="73ef0-132">For example, workgroup or web applications that have low toomedium IO traffic requirements supporting multiple concurrent queries are good candidates for hello Standard service tier.</span></span>
* <span data-ttu-id="73ef0-133">**Premium**: hello premiumnivån erbjuder förutsägbara prestanda, andra över andra, för varje Premium-databas.</span><span class="sxs-lookup"><span data-stu-id="73ef0-133">**Premium**: hello Premium service tier provides predictable performance, second over second, for each Premium database.</span></span> <span data-ttu-id="73ef0-134">När du väljer hello premiumnivån storleken du databasprogrammet baserat på hello belastning för den här databasen.</span><span class="sxs-lookup"><span data-stu-id="73ef0-134">When you choose hello Premium service tier, you can size your database application based on hello peak load for that database.</span></span> <span data-ttu-id="73ef0-135">hello plan tar bort fall där prestanda varians kan orsaka små frågor tootake längre tid än förväntat i känslig för fördröjningar åtgärder.</span><span class="sxs-lookup"><span data-stu-id="73ef0-135">hello plan removes cases in which performance variance can cause small queries tootake longer than expected in latency-sensitive operations.</span></span> <span data-ttu-id="73ef0-136">Den här modellen kan förenkla hello utvecklings- och validering-cykler för program som behöver toomake starkt uttalanden om resursbehov för belastning, prestanda varians eller svarstid.</span><span class="sxs-lookup"><span data-stu-id="73ef0-136">This model can greatly simplify hello development and product validation cycles for applications that need toomake strong statements about peak resource needs, performance variance, or query latency.</span></span> <span data-ttu-id="73ef0-137">Premium-tjänsten nivå används oftast har en eller flera av följande egenskaper:</span><span class="sxs-lookup"><span data-stu-id="73ef0-137">Most Premium service tier use cases have one or more of these characteristics:</span></span>
  * <span data-ttu-id="73ef0-138">**Hög belastning**.</span><span class="sxs-lookup"><span data-stu-id="73ef0-138">**High peak load**.</span></span> <span data-ttu-id="73ef0-139">Ett program som kräver betydande CPU, minne eller in-/ utdata (I/O) toocomplete åtgärderna kräver en dedikerad, högpresterande nivå.</span><span class="sxs-lookup"><span data-stu-id="73ef0-139">An application that requires substantial CPU, memory, or input/output (I/O) toocomplete its operations requires a dedicated, high-performance level.</span></span> <span data-ttu-id="73ef0-140">Till exempel en databasåtgärd kända tooconsume flera processorkärnor en längre tid är en kandidat för hello premiumnivån.</span><span class="sxs-lookup"><span data-stu-id="73ef0-140">For example, a database operation known tooconsume several CPU cores for an extended time is a candidate for hello Premium service tier.</span></span>
  * <span data-ttu-id="73ef0-141">**Många samtidiga förfrågningar**.</span><span class="sxs-lookup"><span data-stu-id="73ef0-141">**Many concurrent requests**.</span></span> <span data-ttu-id="73ef0-142">Vissa databasprogram tjänst många samtidiga förfrågningar, exempelvis när du hanterar en webbplats som har en hög trafik.</span><span class="sxs-lookup"><span data-stu-id="73ef0-142">Some database applications service many concurrent requests, for example, when serving a website that has a high traffic volume.</span></span> <span data-ttu-id="73ef0-143">Basic och Standard tjänstnivåer begränsa hello antalet samtidiga förfrågningar per databas.</span><span class="sxs-lookup"><span data-stu-id="73ef0-143">Basic and Standard service tiers limit hello number of concurrent requests per database.</span></span> <span data-ttu-id="73ef0-144">Program som kräver fler anslutningar måste toochoose en lämplig reservation storlek toohandle hello maxantalet nödvändiga förfrågningar.</span><span class="sxs-lookup"><span data-stu-id="73ef0-144">Applications that require more connections would need toochoose an appropriate reservation size toohandle hello maximum number of needed requests.</span></span>
  * <span data-ttu-id="73ef0-145">**Låg latens**.</span><span class="sxs-lookup"><span data-stu-id="73ef0-145">**Low latency**.</span></span> <span data-ttu-id="73ef0-146">Vissa program behöver tooguarantee svar från hello databasen i minimal tid.</span><span class="sxs-lookup"><span data-stu-id="73ef0-146">Some applications need tooguarantee a response from hello database in minimal time.</span></span> <span data-ttu-id="73ef0-147">Om en specifik lagrad procedur anropas som en del av en bredare kund-åtgärd, kanske du en krav toohave en retur från anropet i fler än 20 millisekunder 99 procent av hello tid.</span><span class="sxs-lookup"><span data-stu-id="73ef0-147">If a specific stored procedure is called as part of a broader customer operation, you might have a requirement toohave a return from that call in no more than 20 milliseconds, 99 percent of hello time.</span></span> <span data-ttu-id="73ef0-148">Den här typen av programmet hello premiumnivån fördelar, se till att den hello nödvändiga datorkraft toomake är tillgänglig.</span><span class="sxs-lookup"><span data-stu-id="73ef0-148">This type of application benefits from hello Premium service tier, toomake sure that hello required computing power is available.</span></span>
* <span data-ttu-id="73ef0-149">**Premium-RS**: hello Premium RS nivån är utformad för i/o-intensiva arbetsbelastningar som inte kräver hello högsta garantier för tillgänglighet.</span><span class="sxs-lookup"><span data-stu-id="73ef0-149">**Premium RS**: hello Premium RS tier is designed for IO-intensive workloads that do not require hello highest availability guarantees.</span></span> <span data-ttu-id="73ef0-150">Exempel innefattar testning högpresterande arbetsbelastningar eller en analytiska arbetsbelastningar där hello databasen inte är hello system för posten.</span><span class="sxs-lookup"><span data-stu-id="73ef0-150">Examples include testing high-performance workloads, or an analytical workload where hello database is not hello system of record.</span></span>

<span data-ttu-id="73ef0-151">hello servicenivå som du behöver för din SQL-databas är beroende av hello högsta belastningen krav för varje resursdimension.</span><span class="sxs-lookup"><span data-stu-id="73ef0-151">hello service level that you need for your SQL database depends on hello peak load requirements for each resource dimension.</span></span> <span data-ttu-id="73ef0-152">Vissa program använder en trivial mängd en enskild resurs, men har betydande krav för andra resurser.</span><span class="sxs-lookup"><span data-stu-id="73ef0-152">Some applications use a trivial amount of a single resource, but have significant requirements for other resources.</span></span>

### <a name="service-tier-capabilities-and-limits"></a><span data-ttu-id="73ef0-153">Tjänsten funktioner och begränsningar</span><span class="sxs-lookup"><span data-stu-id="73ef0-153">Service tier capabilities and limits</span></span>

<span data-ttu-id="73ef0-154">Vid varje tjänstnivå värdet hello prestandanivå så att du har hello flexibilitet toopay endast för hello kapacitet du behöver.</span><span class="sxs-lookup"><span data-stu-id="73ef0-154">At each service tier, you set hello performance level, so you have hello flexibility toopay only for hello capacity you need.</span></span> <span data-ttu-id="73ef0-155">Du kan [justera kapaciteten](sql-database-service-tiers.md), uppåt eller nedåt när arbetsbelastningen ändras.</span><span class="sxs-lookup"><span data-stu-id="73ef0-155">You can [adjust capacity](sql-database-service-tiers.md), up or down, as workload changes.</span></span> <span data-ttu-id="73ef0-156">Till exempel kan databasen belastningen är hög under hello tillbaka till skolan perioder som jul du öka hello prestandanivån för hello databas för en viss tid, juli via September.</span><span class="sxs-lookup"><span data-stu-id="73ef0-156">For example, if your database workload is high during hello back-to-school shopping season, you might increase hello performance level for hello database for a set time, July through September.</span></span> <span data-ttu-id="73ef0-157">Du kan minska den när belastning-säsongen avslutas.</span><span class="sxs-lookup"><span data-stu-id="73ef0-157">You can reduce it when your peak season ends.</span></span> <span data-ttu-id="73ef0-158">Du kan minimera du betalar genom att optimera molnet miljö toohello säsongsvärdet av ditt företag.</span><span class="sxs-lookup"><span data-stu-id="73ef0-158">You can minimize what you pay by optimizing your cloud environment toohello seasonality of your business.</span></span> <span data-ttu-id="73ef0-159">Den här modellen fungerar också bra för programvara produkten versionen cykler.</span><span class="sxs-lookup"><span data-stu-id="73ef0-159">This model also works well for software product release cycles.</span></span> <span data-ttu-id="73ef0-160">Ett test-team kan allokera kapacitet när det testa körs, och släpper den kapaciteten när de är klara testning.</span><span class="sxs-lookup"><span data-stu-id="73ef0-160">A test team might allocate capacity while it does test runs, and then release that capacity when they finish testing.</span></span> <span data-ttu-id="73ef0-161">I en begäran modell kapacitet betalar du för kapacitet du behöver den och undvika att förlora på dedicerade resurser som du kan använda sällan.</span><span class="sxs-lookup"><span data-stu-id="73ef0-161">In a capacity request model, you pay for capacity as you need it, and avoid spending on dedicated resources that you might rarely use.</span></span>

### <a name="why-service-tiers"></a><span data-ttu-id="73ef0-162">Varför tjänstnivåer?</span><span class="sxs-lookup"><span data-stu-id="73ef0-162">Why service tiers?</span></span>
<span data-ttu-id="73ef0-163">Även om varje arbetsbelastning i databasen kan skilja sig, syftar hello tjänstnivåer tooprovide prestanda förutsägbarhet på olika prestandanivåer.</span><span class="sxs-lookup"><span data-stu-id="73ef0-163">Although each database workload can differ, hello purpose of service tiers is tooprovide performance predictability at various performance levels.</span></span> <span data-ttu-id="73ef0-164">Kunder med stora databasen resurskrav kan arbeta i en mer dedikerade datormiljö.</span><span class="sxs-lookup"><span data-stu-id="73ef0-164">Customers with large-scale database resource requirements can work in a more dedicated computing environment.</span></span>

## <a name="tune-your-application"></a><span data-ttu-id="73ef0-165">Finjustera ditt program</span><span class="sxs-lookup"><span data-stu-id="73ef0-165">Tune your application</span></span>
<span data-ttu-id="73ef0-166">I traditionella lokala SQL Server, är hello processen för inledande kapacitetsplanering ofta skild från hello processen med att köra ett program i produktion.</span><span class="sxs-lookup"><span data-stu-id="73ef0-166">In traditional on-premises SQL Server, hello process of initial capacity planning often is separated from hello process of running an application in production.</span></span> <span data-ttu-id="73ef0-167">Maskin- och licenser köps först och prestandajustering görs efteråt.</span><span class="sxs-lookup"><span data-stu-id="73ef0-167">Hardware and product licenses are purchased first, and performance tuning is done afterward.</span></span> <span data-ttu-id="73ef0-168">När du använder Azure SQL Database är en bra idé toointerweave hello process för att köra ett program och justera den.</span><span class="sxs-lookup"><span data-stu-id="73ef0-168">When you use Azure SQL Database, it's a good idea toointerweave hello process of running an application and tuning it.</span></span> <span data-ttu-id="73ef0-169">Med hello modell för betalar för kapacitet på begäran, kan du finjustera din toouse hello minsta programresurser krävs nu, i stället för överetablering på maskinvara baserat på gissningar framtida tillväxt planer för ett program som ofta är felaktiga.</span><span class="sxs-lookup"><span data-stu-id="73ef0-169">With hello model of paying for capacity on demand, you can tune your application toouse hello minimum resources needed now, instead of overprovisioning on hardware based on guesses of future growth plans for an application, which often are incorrect.</span></span> <span data-ttu-id="73ef0-170">Vissa kunder kan Välj inte tootune ett program och i stället toooverprovision maskinvaruresurser.</span><span class="sxs-lookup"><span data-stu-id="73ef0-170">Some customers might choose not tootune an application, and instead choose toooverprovision hardware resources.</span></span> <span data-ttu-id="73ef0-171">Den här metoden kan vara en bra idé om du inte vill toochange ett program som nyckel under en period som är upptagen.</span><span class="sxs-lookup"><span data-stu-id="73ef0-171">This approach might be a good idea if you don't want toochange a key application during a busy period.</span></span> <span data-ttu-id="73ef0-172">Men inställning av ett program kan minimera resurskraven och lägre månatliga växlar när du använder hello tjänstnivåer i Azure SQL Database.</span><span class="sxs-lookup"><span data-stu-id="73ef0-172">But, tuning an application can minimize resource requirements and lower monthly bills when you use hello service tiers in Azure SQL Database.</span></span>

### <a name="application-characteristics"></a><span data-ttu-id="73ef0-173">Egenskaper för programmet</span><span class="sxs-lookup"><span data-stu-id="73ef0-173">Application characteristics</span></span>
<span data-ttu-id="73ef0-174">Men Azure SQL Database servicenivåer är utformad tooimprove prestanda stabilitet och förutsägbarhet för ett program, kan några rekommendationer hjälpa dig justera programmet toobetter dra nytta av hello resurser på prestandanivå.</span><span class="sxs-lookup"><span data-stu-id="73ef0-174">Although Azure SQL Database service tiers are designed tooimprove performance stability and predictability for an application, some best practices can help you tune your application toobetter take advantage of hello resources at a performance level.</span></span> <span data-ttu-id="73ef0-175">Även om många program har betydande prestandaförbättringar bara av växla tooa högre prestandanivå eller service-nivån, vissa program behöver ytterligare finjustera toobenefit från en högre servicenivå.</span><span class="sxs-lookup"><span data-stu-id="73ef0-175">Although many applications have significant performance gains simply by switching tooa higher performance level or service tier, some applications need additional tuning toobenefit from a higher level of service.</span></span> <span data-ttu-id="73ef0-176">Överväg att ytterligare finjustera för program som har följande egenskaper för bättre prestanda:</span><span class="sxs-lookup"><span data-stu-id="73ef0-176">For increased performance, consider additional application tuning for applications that have these characteristics:</span></span>

* <span data-ttu-id="73ef0-177">**Program som har långsam prestanda på grund av ”chatty” beteende**.</span><span class="sxs-lookup"><span data-stu-id="73ef0-177">**Applications that have slow performance because of "chatty" behavior**.</span></span> <span data-ttu-id="73ef0-178">Chatty program Se stor mängd data access-åtgärder som är känsliga toonetwork svarstid.</span><span class="sxs-lookup"><span data-stu-id="73ef0-178">Chatty applications make excessive data access operations that are sensitive toonetwork latency.</span></span> <span data-ttu-id="73ef0-179">Du kan behöva toomodify dessa typer av program tooreduce hello antal data access operations toohello SQL-databas.</span><span class="sxs-lookup"><span data-stu-id="73ef0-179">You might need toomodify these kinds of applications tooreduce hello number of data access operations toohello SQL database.</span></span> <span data-ttu-id="73ef0-180">Exempelvis kan du förbättra programmets prestanda genom att använda tekniker som batchbearbetning ad hoc-frågor eller flytta hello frågar toostored procedurer.</span><span class="sxs-lookup"><span data-stu-id="73ef0-180">For example, you might improve application performance by using techniques like batching ad-hoc queries or moving hello queries toostored procedures.</span></span> <span data-ttu-id="73ef0-181">Mer information finns i [Batch-frågor](#batch-queries).</span><span class="sxs-lookup"><span data-stu-id="73ef0-181">For more information, see [Batch queries](#batch-queries).</span></span>
* <span data-ttu-id="73ef0-182">**Databaser med en intensiv arbetsbelastning som inte stöds av en enskild dator hela**.</span><span class="sxs-lookup"><span data-stu-id="73ef0-182">**Databases with an intensive workload that can't be supported by an entire single machine**.</span></span> <span data-ttu-id="73ef0-183">Databaser som överskrider hello resurser av hello högsta Premium prestandanivå kan dra nytta av skala ut hello arbetsbelastning.</span><span class="sxs-lookup"><span data-stu-id="73ef0-183">Databases that exceed hello resources of hello highest Premium performance level might benefit from scaling out hello workload.</span></span> <span data-ttu-id="73ef0-184">Mer information finns i [flera databaser horisontell partitionering](#cross-database-sharding) och [funktionella partitionering](#functional-partitioning).</span><span class="sxs-lookup"><span data-stu-id="73ef0-184">For more information, see [Cross-database sharding](#cross-database-sharding) and [Functional partitioning](#functional-partitioning).</span></span>
* <span data-ttu-id="73ef0-185">**Program som har något sämre frågor**.</span><span class="sxs-lookup"><span data-stu-id="73ef0-185">**Applications that have suboptimal queries**.</span></span> <span data-ttu-id="73ef0-186">Program, särskilt de i hello dataåtkomstnivå, som har dåligt justerade frågor kan inte dra nytta av en högre prestandanivå.</span><span class="sxs-lookup"><span data-stu-id="73ef0-186">Applications, especially those in hello data access layer, that have poorly tuned queries might not benefit from a higher performance level.</span></span> <span data-ttu-id="73ef0-187">Detta inkluderar frågor som saknar en WHERE-sats, saknar index eller vara inaktuell statistik.</span><span class="sxs-lookup"><span data-stu-id="73ef0-187">This includes queries that lack a WHERE clause, have missing indexes, or have outdated statistics.</span></span> <span data-ttu-id="73ef0-188">Dessa program utnyttja standardfråga prestandajustering tekniker.</span><span class="sxs-lookup"><span data-stu-id="73ef0-188">These applications benefit from standard query performance-tuning techniques.</span></span> <span data-ttu-id="73ef0-189">Mer information finns i [saknas index](#identifying-and-adding-missing-indexes) och [fråga justera och bl a](#query-tuning-and-hinting).</span><span class="sxs-lookup"><span data-stu-id="73ef0-189">For more information, see [Missing indexes](#identifying-and-adding-missing-indexes) and [Query tuning and hinting](#query-tuning-and-hinting).</span></span>
* <span data-ttu-id="73ef0-190">**Program som har något sämre data åt design**.</span><span class="sxs-lookup"><span data-stu-id="73ef0-190">**Applications that have suboptimal data access design**.</span></span> <span data-ttu-id="73ef0-191">Program som har inbyggd databassamtidighet åtkomstproblem, till exempel deadlocking kan inte dra nytta av en högre prestandanivå.</span><span class="sxs-lookup"><span data-stu-id="73ef0-191">Applications that have inherent data access concurrency issues, for example deadlocking, might not benefit from a higher performance level.</span></span> <span data-ttu-id="73ef0-192">Överväg att minska sändningar mot hello Azure SQL Database av cachelagring på klientsidan för hello med hello Azure Caching service eller en annan teknik för cachelagring.</span><span class="sxs-lookup"><span data-stu-id="73ef0-192">Consider reducing round trips against hello Azure SQL Database by caching data on hello client side with hello Azure Caching service or another caching technology.</span></span> <span data-ttu-id="73ef0-193">Se [programmet nivån cachelagring](#application-tier-caching).</span><span class="sxs-lookup"><span data-stu-id="73ef0-193">See [Application tier caching](#application-tier-caching).</span></span>

## <a name="tune-your-database"></a><span data-ttu-id="73ef0-194">Finjustera din databas</span><span class="sxs-lookup"><span data-stu-id="73ef0-194">Tune your database</span></span>
<span data-ttu-id="73ef0-195">I det här avsnittet ska titta vi på några metoder som du kan använda tootune Azure SQL Database toogain hello bästa prestanda för ditt program och kör det på hello lägsta möjliga prestandanivån.</span><span class="sxs-lookup"><span data-stu-id="73ef0-195">In this section, we look at some techniques that you can use tootune Azure SQL Database toogain hello best performance for your application and run it at hello lowest possible performance level.</span></span> <span data-ttu-id="73ef0-196">Vissa av dessa tekniker matchar traditionella SQL Server justera bästa praxis, men andra är särskilda tooAzure SQL-databas.</span><span class="sxs-lookup"><span data-stu-id="73ef0-196">Some of these techniques match traditional SQL Server tuning best practices, but others are specific tooAzure SQL Database.</span></span> <span data-ttu-id="73ef0-197">I vissa fall kan du undersöka hello används resurser för en databas toofind områden toofurther finjustera och utöka traditionella SQL Server-teknik toowork i Azure SQL Database.</span><span class="sxs-lookup"><span data-stu-id="73ef0-197">In some cases, you can examine hello consumed resources for a database toofind areas toofurther tune and extend traditional SQL Server techniques toowork in Azure SQL Database.</span></span>

### <a name="identify-performance-issues-using-azure-portal"></a><span data-ttu-id="73ef0-198">Identifiera prestandaproblem med hjälp av Azure portal</span><span class="sxs-lookup"><span data-stu-id="73ef0-198">Identify performance issues using Azure portal</span></span>
<span data-ttu-id="73ef0-199">hello följande verktyg i hello Azure-portalen kan hjälpa dig att analysera och åtgärda prestandaproblem med SQL-databasen:</span><span class="sxs-lookup"><span data-stu-id="73ef0-199">hello following tools in hello Azure portal can help you analyze and fix performance issues with your SQL database:</span></span>

* [<span data-ttu-id="73ef0-200">Query Performance Insight</span><span class="sxs-lookup"><span data-stu-id="73ef0-200">Query Performance Insight</span></span>](sql-database-query-performance.md)
* [<span data-ttu-id="73ef0-201">SQL Database Advisor</span><span class="sxs-lookup"><span data-stu-id="73ef0-201">SQL Database Advisor</span></span>](sql-database-advisor.md)

<span data-ttu-id="73ef0-202">hello Azure-portalen har mer information om de här verktygen och hur toouse dem.</span><span class="sxs-lookup"><span data-stu-id="73ef0-202">hello Azure portal has more information about both of these tools and how toouse them.</span></span> <span data-ttu-id="73ef0-203">tooefficiently diagnostisera och åtgärda problem, rekommenderar vi att du först försöka hello verktyg i hello Azure-portalen.</span><span class="sxs-lookup"><span data-stu-id="73ef0-203">tooefficiently diagnose and correct problems, we recommend that you first try hello tools in hello Azure portal.</span></span> <span data-ttu-id="73ef0-204">Vi rekommenderar att du använder hello manuell justera metoder som sedan diskuterar vi för index och frågejusteringar i särskilda fall saknas.</span><span class="sxs-lookup"><span data-stu-id="73ef0-204">We recommend that you use hello manual tuning approaches that we discuss next, for missing indexes and query tuning, in special cases.</span></span>

<span data-ttu-id="73ef0-205">Mer information om hur du identifierar problem i Azure SQL Database på [prestandaövervakning](sql-database-single-database-monitor.md) artikel.</span><span class="sxs-lookup"><span data-stu-id="73ef0-205">Find more information about identifying issues in Azure SQL Database on [performance monitoring](sql-database-single-database-monitor.md) article.</span></span>

### <a name="identifying-and-adding-missing-indexes"></a><span data-ttu-id="73ef0-206">Identifiera och lägga till index som saknas</span><span class="sxs-lookup"><span data-stu-id="73ef0-206">Identifying and adding missing indexes</span></span>
<span data-ttu-id="73ef0-207">Ett vanligt problem i OLTP databasprestanda relaterar toohello fysiska databasdesign.</span><span class="sxs-lookup"><span data-stu-id="73ef0-207">A common problem in OLTP database performance relates toohello physical database design.</span></span> <span data-ttu-id="73ef0-208">Ofta databasen scheman designas och levereras utan att testa i skala (antingen i belastning eller datavolym).</span><span class="sxs-lookup"><span data-stu-id="73ef0-208">Often, database schemas are designed and shipped without testing at scale (either in load or in data volume).</span></span> <span data-ttu-id="73ef0-209">Tyvärr hello prestanda för en frågeplan användas i liten skala men försämras avsevärt under produktion nivå datavolymer.</span><span class="sxs-lookup"><span data-stu-id="73ef0-209">Unfortunately, hello performance of a query plan might be acceptable on a small scale but degrade substantially under production-level data volumes.</span></span> <span data-ttu-id="73ef0-210">hello vanligaste orsaken till problemet är hello saknas rätt index toosatisfy filter eller andra begränsningar i en fråga.</span><span class="sxs-lookup"><span data-stu-id="73ef0-210">hello most common source of this issue is hello lack of appropriate indexes toosatisfy filters or other restrictions in a query.</span></span> <span data-ttu-id="73ef0-211">Saknade index manifest som en tabell skanna ofta när ett index seek kan vara tillräckligt.</span><span class="sxs-lookup"><span data-stu-id="73ef0-211">Often, missing indexes manifests as a table scan when an index seek could suffice.</span></span>

<span data-ttu-id="73ef0-212">I det här exemplet använder hello valda frågeplanen en genomsökning när en sökning skulle vara tillräckligt:</span><span class="sxs-lookup"><span data-stu-id="73ef0-212">In this example, hello selected query plan uses a scan when a seek would suffice:</span></span>

    DROP TABLE dbo.missingindex;
    CREATE TABLE dbo.missingindex (col1 INT IDENTITY PRIMARY KEY, col2 INT);
    DECLARE @a int = 0;
    SET NOCOUNT ON;
    BEGIN TRANSACTION
    WHILE @a < 20000
    BEGIN
        INSERT INTO dbo.missingindex(col2) VALUES (@a);
        SET @a += 1;
    END
    COMMIT TRANSACTION;
    GO
    SELECT m1.col1
    FROM dbo.missingindex m1 INNER JOIN dbo.missingindex m2 ON(m1.col1=m2.col1)
    WHERE m1.col2 = 4;

![En frågeplan med index som saknas](./media/sql-database-performance-guidance/query_plan_missing_indexes.png)

<span data-ttu-id="73ef0-214">Azure SQL Database kan hjälpa dig att hitta och korrigera vanliga saknas index-villkor.</span><span class="sxs-lookup"><span data-stu-id="73ef0-214">Azure SQL Database can help you find and fix common missing index conditions.</span></span> <span data-ttu-id="73ef0-215">Av DMV: er som är inbyggda i Azure SQL Database titta på frågekompileringar där ett index skulle minska avsevärt hello uppskattade kostnaden toorun en fråga.</span><span class="sxs-lookup"><span data-stu-id="73ef0-215">DMVs that are built into Azure SQL Database look at query compilations in which an index would significantly reduce hello estimated cost toorun a query.</span></span> <span data-ttu-id="73ef0-216">SQL-databas håller reda på hur ofta varje frågeplan körs vid körning av fråga och spårar hello uppskattad mellanrummet mellan hello köra frågeplan och hello sätt en där index fanns.</span><span class="sxs-lookup"><span data-stu-id="73ef0-216">During query execution, SQL Database tracks how often each query plan is executed, and tracks hello estimated gap between hello executing query plan and hello imagined one where that index existed.</span></span> <span data-ttu-id="73ef0-217">Du kan använda dessa av DMV: er tooquickly gissning vilka ändringar tooyour fysiska databasdesign kan förbättra övergripande arbetsbelastning kostnaden för en databas och dess faktiska arbetsbelastningen.</span><span class="sxs-lookup"><span data-stu-id="73ef0-217">You can use these DMVs tooquickly guess which changes tooyour physical database design might improve overall workload cost for a database and its real workload.</span></span>

<span data-ttu-id="73ef0-218">Du kan använda den här frågan tooevaluate potentiella saknas index:</span><span class="sxs-lookup"><span data-stu-id="73ef0-218">You can use this query tooevaluate potential missing indexes:</span></span>

    SELECT CONVERT (varchar, getdate(), 126) AS runtime,
        mig.index_group_handle, mid.index_handle,
        CONVERT (decimal (28,1), migs.avg_total_user_cost * migs.avg_user_impact *
                (migs.user_seeks + migs.user_scans)) AS improvement_measure,
        'CREATE INDEX missing_index_' + CONVERT (varchar, mig.index_group_handle) + '_' +
                  CONVERT (varchar, mid.index_handle) + ' ON ' + mid.statement + '
                  (' + ISNULL (mid.equality_columns,'')
                  + CASE WHEN mid.equality_columns IS NOT NULL
                              AND mid.inequality_columns IS NOT NULL
                         THEN ',' ELSE '' END + ISNULL (mid.inequality_columns, '')
                  + ')'
                  + ISNULL (' INCLUDE (' + mid.included_columns + ')', '') AS create_index_statement,
        migs.*,
        mid.database_id,
        mid.[object_id]
    FROM sys.dm_db_missing_index_groups AS mig
    INNER JOIN sys.dm_db_missing_index_group_stats AS migs
        ON migs.group_handle = mig.index_group_handle
    INNER JOIN sys.dm_db_missing_index_details AS mid
        ON mig.index_handle = mid.index_handle
    ORDER BY migs.avg_total_user_cost * migs.avg_user_impact * (migs.user_seeks + migs.user_scans) DESC

<span data-ttu-id="73ef0-219">I det här exemplet resulterade hello frågan i den här:</span><span class="sxs-lookup"><span data-stu-id="73ef0-219">In this example, hello query resulted in this suggestion:</span></span>

    CREATE INDEX missing_index_5006_5005 ON [dbo].[missingindex] ([col2])  

<span data-ttu-id="73ef0-220">När den har skapats hämtar en annan plan som använder en Målsökning i stället för en genomsökning och utför hello plan mer effektivt att samma SELECT-uttryck:</span><span class="sxs-lookup"><span data-stu-id="73ef0-220">After it's created, that same SELECT statement picks a different plan, which uses a seek instead of a scan, and then executes hello plan more efficiently:</span></span>

![En frågeplan med korrigerade index](./media/sql-database-performance-guidance/query_plan_corrected_indexes.png)

<span data-ttu-id="73ef0-222">hello viktiga insikter är att hello i/o-kapacitet för en delad, andra system är mer begränsad än den som en dedikerad server-dator.</span><span class="sxs-lookup"><span data-stu-id="73ef0-222">hello key insight is that hello I/O capacity of a shared, commodity system is more limited than that of a dedicated server machine.</span></span> <span data-ttu-id="73ef0-223">Det finns en premium på Minimera onödiga i/o tootake maximal nytta av hello system i hello DTU för varje prestandanivå hello Azure SQL Database servicenivåer.</span><span class="sxs-lookup"><span data-stu-id="73ef0-223">There's a premium on minimizing unnecessary I/O tootake maximum advantage of hello system in hello DTU of each performance level of hello Azure SQL Database service tiers.</span></span> <span data-ttu-id="73ef0-224">Lämplig fysiska databasen designalternativen kan avsevärt förbättra hello svarstid för enskilda frågor, förbättra samtidiga förfrågningar som hanteras per skalningsenhet hello genomflöde och minimera hello kostnader krävs toosatisfy hello frågan.</span><span class="sxs-lookup"><span data-stu-id="73ef0-224">Appropriate physical database design choices can significantly improve hello latency for individual queries, improve hello throughput of concurrent requests handled per scale unit, and minimize hello costs required toosatisfy hello query.</span></span> <span data-ttu-id="73ef0-225">Mer information om hello saknas index av DMV: er finns [sys.dm_db_missing_index_details](https://msdn.microsoft.com/library/ms345434.aspx).</span><span class="sxs-lookup"><span data-stu-id="73ef0-225">For more information about hello missing index DMVs, see [sys.dm_db_missing_index_details](https://msdn.microsoft.com/library/ms345434.aspx).</span></span>

### <a name="query-tuning-and-hinting"></a><span data-ttu-id="73ef0-226">Frågejusteringar och bl a</span><span class="sxs-lookup"><span data-stu-id="73ef0-226">Query tuning and hinting</span></span>
<span data-ttu-id="73ef0-227">hello Frågeoptimeringen i Azure SQL Database är liknande toohello-frågeoptimeraren för traditionella SQL Server.</span><span class="sxs-lookup"><span data-stu-id="73ef0-227">hello query optimizer in Azure SQL Database is similar toohello traditional SQL Server query optimizer.</span></span> <span data-ttu-id="73ef0-228">De flesta av hello bästa praxis för att finjustera frågor och förstå hello skäl modellen begränsningar för hello frågeoptimeraren även gäller tooAzure SQL-databas.</span><span class="sxs-lookup"><span data-stu-id="73ef0-228">Most of hello best practices for tuning queries and understanding hello reasoning model limitations for hello query optimizer also apply tooAzure SQL Database.</span></span> <span data-ttu-id="73ef0-229">Om du finjustera frågor i Azure SQL Database, kan du få hello fördelen att minska behovet av sammanställda resursdata.</span><span class="sxs-lookup"><span data-stu-id="73ef0-229">If you tune queries in Azure SQL Database, you might get hello additional benefit of reducing aggregate resource demands.</span></span> <span data-ttu-id="73ef0-230">Programmet kan vara kan toorun till en lägre kostnad än untuned motsvarande eftersom det kan köras på en lägre prestandanivå.</span><span class="sxs-lookup"><span data-stu-id="73ef0-230">Your application might be able toorun at a lower cost than an untuned equivalent because it can run at a lower performance level.</span></span>

<span data-ttu-id="73ef0-231">Ett exempel som är vanliga i SQL Server och som också gäller tooAzure SQL-databas är hur hello fråga optimering ”lyssnar” parametrar.</span><span class="sxs-lookup"><span data-stu-id="73ef0-231">An example that is common in SQL Server and which also applies tooAzure SQL Database is how hello query optimizer "sniffs" parameters.</span></span> <span data-ttu-id="73ef0-232">Under kompilering utvärderar hello frågeoptimeraren hello aktuellt värde för en parameter toodetermine om det kan generera en mer optimala frågeplan.</span><span class="sxs-lookup"><span data-stu-id="73ef0-232">During compilation, hello query optimizer evaluates hello current value of a parameter toodetermine whether it can generate a more optimal query plan.</span></span> <span data-ttu-id="73ef0-233">Även om den här strategin ofta kan leda tooa frågeplan som är betydligt snabbare än en plan som kompileras utan kända parametervärden för närvarande fungerar imperfectly både i SQL Server och i Azure SQL Database.</span><span class="sxs-lookup"><span data-stu-id="73ef0-233">Although this strategy often can lead tooa query plan that is significantly faster than a plan compiled without known parameter values, currently it works imperfectly both in SQL Server and in Azure SQL Database.</span></span> <span data-ttu-id="73ef0-234">Hello-parametern är ibland inte någon lyssnar, och ibland hello parametern någon lyssnar men hello genererade planen är något sämre för hello fullständig uppsättning parametervärden i en arbetsbelastning.</span><span class="sxs-lookup"><span data-stu-id="73ef0-234">Sometimes hello parameter is not sniffed, and sometimes hello parameter is sniffed but hello generated plan is suboptimal for hello full set of parameter values in a workload.</span></span> <span data-ttu-id="73ef0-235">Microsoft inkluderar frågetips (direktiven) så att du kan ange avsikt mer avsiktligt och åsidosätta hello standardbeteendet för parametern kontroll.</span><span class="sxs-lookup"><span data-stu-id="73ef0-235">Microsoft includes query hints (directives) so that you can specify intent more deliberately and override hello default behavior of parameter sniffing.</span></span> <span data-ttu-id="73ef0-236">Om du använder tips, ofta, kan du åtgärda fall där hello SQL Server eller Azure SQL Database standardbeteendet är ofullständig för en viss kund-arbetsbelastning.</span><span class="sxs-lookup"><span data-stu-id="73ef0-236">Often, if you use hints, you can fix cases in which hello default SQL Server or Azure SQL Database behavior is imperfect for a specific customer workload.</span></span>

<span data-ttu-id="73ef0-237">hello nästa exemplet visar hur hello frågeprocessorn kan generera en plan som är något sämre både för prestanda och resurskraven.</span><span class="sxs-lookup"><span data-stu-id="73ef0-237">hello next example demonstrates how hello query processor can generate a plan that is suboptimal both for performance and resource requirements.</span></span> <span data-ttu-id="73ef0-238">Det här exemplet visar också att du kan minska Frågekörningen och resursen kraven för SQL-databasen om du använder en frågetipset:</span><span class="sxs-lookup"><span data-stu-id="73ef0-238">This example also shows that if you use a query hint, you can reduce query run time and resource requirements for your SQL database:</span></span>

    DROP TABLE psptest1;
    CREATE TABLE psptest1(col1 int primary key identity, col2 int, col3 binary(200));

    DECLARE @a int = 0;
    SET NOCOUNT ON;
    BEGIN TRANSACTION
    WHILE @a < 20000
    BEGIN
        INSERT INTO psptest1(col2) values (1);
        INSERT INTO psptest1(col2) values (@a);
        SET @a += 1;
    END
    COMMIT TRANSACTION
    CREATE INDEX i1 on psptest1(col2);
    GO

    CREATE PROCEDURE psp1 (@param1 int)
    AS
    BEGIN
        INSERT INTO t1 SELECT * FROM psptest1
        WHERE col2 = @param1
        ORDER BY col2;
    END
    GO

    CREATE PROCEDURE psp2 (@param2 int)
    AS
    BEGIN
        INSERT INTO t1 SELECT * FROM psptest1 WHERE col2 = @param2
        ORDER BY col2
        OPTION (OPTIMIZE FOR (@param2 UNKNOWN))
    END
    GO

    CREATE TABLE t1 (col1 int primary key, col2 int, col3 binary(200));
    GO

<span data-ttu-id="73ef0-239">hello Inställningskod skapar en tabell som har förvrängd Datadistribution.</span><span class="sxs-lookup"><span data-stu-id="73ef0-239">hello setup code creates a table that has skewed data distribution.</span></span> <span data-ttu-id="73ef0-240">hello optimala frågeprestanda plan skiljer sig baserat på vilken parameter är markerad.</span><span class="sxs-lookup"><span data-stu-id="73ef0-240">hello optimal query plan differs based on which parameter is selected.</span></span> <span data-ttu-id="73ef0-241">Tyvärr kompileras inte hello plan funktionssätt för cachelagring alltid hello fråga baserat på de vanligaste hello-parametervärdet.</span><span class="sxs-lookup"><span data-stu-id="73ef0-241">Unfortunately, hello plan caching behavior doesn't always recompile hello query based on hello most common parameter value.</span></span> <span data-ttu-id="73ef0-242">Det är därför möjligt för en något sämre plan toobe cachelagras och används för många värden, även om ett annat schema kan vara bra plan i genomsnitt.</span><span class="sxs-lookup"><span data-stu-id="73ef0-242">So, it's possible for a suboptimal plan toobe cached and used for many values, even when a different plan might be a better plan choice on average.</span></span> <span data-ttu-id="73ef0-243">Sedan skapar hello frågeplan två lagrade procedurer som är identiska, förutom att en har en särskild frågetipset.</span><span class="sxs-lookup"><span data-stu-id="73ef0-243">Then hello query plan creates two stored procedures that are identical, except that one has a special query hint.</span></span>

<span data-ttu-id="73ef0-244">**Exempel, del 1**</span><span class="sxs-lookup"><span data-stu-id="73ef0-244">**Example, part 1**</span></span>

    -- Prime Procedure Cache with scan plan
    EXEC psp1 @param1=1;
    TRUNCATE TABLE t1;

    -- Iterate multiple times tooshow hello performance difference
    DECLARE @i int = 0;
    WHILE @i < 1000
    BEGIN
        EXEC psp1 @param1=2;
        TRUNCATE TABLE t1;
        SET @i += 1;
    END

<span data-ttu-id="73ef0-245">**Exempelvis del 2**</span><span class="sxs-lookup"><span data-stu-id="73ef0-245">**Example, part 2**</span></span>

<span data-ttu-id="73ef0-246">(Vi rekommenderar att du vänta minst 10 minuter innan du börjar del 2 av hello exempelvis så att hello resultat är distinkt i hello resulterande telemetridata.)</span><span class="sxs-lookup"><span data-stu-id="73ef0-246">(We recommend that you wait at least 10 minutes before you begin part 2 of hello example, so that hello results are distinct in hello resulting telemetry data.)</span></span>

    EXEC psp2 @param2=1;
    TRUNCATE TABLE t1;

    DECLARE @i int = 0;
    WHILE @i < 1000
    BEGIN
        EXEC psp2 @param2=2;
        TRUNCATE TABLE t1;
        SET @i += 1;
    END

<span data-ttu-id="73ef0-247">Varje del av det här exemplet försöker toorun ett parametriserat insert-instruktionen 1 000 gånger (toogenerate en tillräcklig belastningen toouse som en datauppsättning för test).</span><span class="sxs-lookup"><span data-stu-id="73ef0-247">Each part of this example attempts toorun a parameterized insert statement 1,000 times (toogenerate a sufficient load toouse as a test data set).</span></span> <span data-ttu-id="73ef0-248">När den körs lagrade procedurer, undersöker hello frågeprocessorn hello parametervärde som skickas toohello proceduren under sin första kompilering (parametern ”identifiering”).</span><span class="sxs-lookup"><span data-stu-id="73ef0-248">When it executes stored procedures, hello query processor examines hello parameter value that is passed toohello procedure during its first compilation (parameter "sniffing").</span></span> <span data-ttu-id="73ef0-249">hello processor cachelagrar hello i planen och använder den för senare anrop, även om hello parametervärdet är olika.</span><span class="sxs-lookup"><span data-stu-id="73ef0-249">hello processor caches hello resulting plan and uses it for later invocations, even if hello parameter value is different.</span></span> <span data-ttu-id="73ef0-250">hello optimala plan kan inte användas i samtliga fall.</span><span class="sxs-lookup"><span data-stu-id="73ef0-250">hello optimal plan might not be used in all cases.</span></span> <span data-ttu-id="73ef0-251">Ibland behöver tooguide hello optimering toopick en plan som är bättre för hello genomsnittlig ärende i stället för hello specifika fall från när hello frågan kompilerades först.</span><span class="sxs-lookup"><span data-stu-id="73ef0-251">Sometimes you need tooguide hello optimizer toopick a plan that is better for hello average case rather than hello specific case from when hello query was first compiled.</span></span> <span data-ttu-id="73ef0-252">I det här exemplet skapar hello ursprungliga planen en ”genomsökning” plan som läser alla rader toofind varje värde som matchar hello parameter:</span><span class="sxs-lookup"><span data-stu-id="73ef0-252">In this example, hello initial plan generates a "scan" plan that reads all rows toofind each value that matches hello parameter:</span></span>

![Fråga justera med hjälp av en plan för sökning](./media/sql-database-performance-guidance/query_tuning_1.png)

<span data-ttu-id="73ef0-254">Eftersom vi köra hello proceduren med hjälp av hello värdet 1 hello i planen är optimala för hello värdet 1 men har något sämre för alla andra värden i hello tabell.</span><span class="sxs-lookup"><span data-stu-id="73ef0-254">Because we executed hello procedure by using hello value 1, hello resulting plan was optimal for hello value 1 but was suboptimal for all other values in hello table.</span></span> <span data-ttu-id="73ef0-255">hello resultatet förmodligen inte vad du kan om du toopick varje planera slumpmässigt eftersom hello plan utför långsammare och använder mer resurser.</span><span class="sxs-lookup"><span data-stu-id="73ef0-255">hello result likely isn't what you would want if you were toopick each plan randomly, because hello plan performs more slowly and uses more resources.</span></span>

<span data-ttu-id="73ef0-256">Om du kör testet hello med `SET STATISTICS IO` ställa in också`ON`, hello logiska sökning i det här exemplet arbetet hello bakgrunden.</span><span class="sxs-lookup"><span data-stu-id="73ef0-256">If you run hello test with `SET STATISTICS IO` set too`ON`, hello logical scan work in this example is done behind hello scenes.</span></span> <span data-ttu-id="73ef0-257">Du kan se att det finns 1,148 läsningar av hello plan (vilket är ineffektiv om hello genomsnittlig tooreturn bara en rad):</span><span class="sxs-lookup"><span data-stu-id="73ef0-257">You can see that there are 1,148 reads done by hello plan (which is inefficient, if hello average case is tooreturn just one row):</span></span>

![Fråga inställning genom att använda en logisk genomsökning](./media/sql-database-performance-guidance/query_tuning_2.png)

<span data-ttu-id="73ef0-259">hello andra delen av hello exempel används en fråga tipset tootell hello optimering toouse ett specifikt värde under hello kompileringsprocessen.</span><span class="sxs-lookup"><span data-stu-id="73ef0-259">hello second part of hello example uses a query hint tootell hello optimizer toouse a specific value during hello compilation process.</span></span> <span data-ttu-id="73ef0-260">I så fall tvingas hello läsa processor tooignore hello värde skickas som hello parameter och i stället tooassume `UNKNOWN`.</span><span class="sxs-lookup"><span data-stu-id="73ef0-260">In this case, it forces hello query processor tooignore hello value that is passed as hello parameter, and instead tooassume `UNKNOWN`.</span></span> <span data-ttu-id="73ef0-261">Detta refererar tooa-värde som har hello genomsnittlig frekvens i hello tabellen (ignoreras skeva).</span><span class="sxs-lookup"><span data-stu-id="73ef0-261">This refers tooa value that has hello average frequency in hello table (ignoring skew).</span></span> <span data-ttu-id="73ef0-262">hello i planen är en plan med seek som är snabbare och använder färre resurser i genomsnitt än hello plan i del 1 i det här exemplet:</span><span class="sxs-lookup"><span data-stu-id="73ef0-262">hello resulting plan is a seek-based plan that is faster and uses fewer resources, on average, than hello plan in part 1 of this example:</span></span>

![Frågejusteringar med hjälp av en ledtråd för frågan](./media/sql-database-performance-guidance/query_tuning_3.png)

<span data-ttu-id="73ef0-264">Du kan se hello effekt i hello **sys.resource_stats** tabellen (det finns en fördröjning från hello tid att köra hello test och när hello data fylls hello tabell).</span><span class="sxs-lookup"><span data-stu-id="73ef0-264">You can see hello effect in hello **sys.resource_stats** table (there is a delay from hello time that you execute hello test and when hello data populates hello table).</span></span> <span data-ttu-id="73ef0-265">För det här exemplet, del 1 körs under tidsperioden för hello 22:25:00 och del 2 utförs 22:35:00.</span><span class="sxs-lookup"><span data-stu-id="73ef0-265">For this example, part 1 executed during hello 22:25:00 time window, and part 2 executed at 22:35:00.</span></span> <span data-ttu-id="73ef0-266">hello används tidigare tidsfönstret mer resurser under den tidsperioden än hello senare version (på grund av planen effektivitet förbättringar).</span><span class="sxs-lookup"><span data-stu-id="73ef0-266">hello earlier time window used more resources in that time window than hello later one (because of plan efficiency improvements).</span></span>

    SELECT TOP 1000 *
    FROM sys.resource_stats
    WHERE database_name = 'resource1'
    ORDER BY start_time DESC

![Prestandajustering exempel frågeresultat](./media/sql-database-performance-guidance/query_tuning_4.png)

> [!NOTE]
> <span data-ttu-id="73ef0-268">Hello volym i det här exemplet är avsiktligt liten kan hello effekten av något sämre parametrarna vara betydande, särskilt på större databaser.</span><span class="sxs-lookup"><span data-stu-id="73ef0-268">Although hello volume in this example is intentionally small, hello effect of suboptimal parameters can be substantial, especially on larger databases.</span></span> <span data-ttu-id="73ef0-269">hello skillnaden i extrema fall kan vara mellan sekunder för snabb fall och timmar för långsam fall.</span><span class="sxs-lookup"><span data-stu-id="73ef0-269">hello difference, in extreme cases, can be between seconds for fast cases and hours for slow cases.</span></span>
> 
> 

<span data-ttu-id="73ef0-270">Du kan undersöka **sys.resource_stats** toodetermine om hello resurs för ett test använder fler eller färre resurser än en annan test.</span><span class="sxs-lookup"><span data-stu-id="73ef0-270">You can examine **sys.resource_stats** toodetermine whether hello resource for a test uses more or fewer resources than another test.</span></span> <span data-ttu-id="73ef0-271">När du jämför data separata hello tidtagningen av testerna så att de inte ingår i hello samma 5 minuter fönster i hello **sys.resource_stats** vyn.</span><span class="sxs-lookup"><span data-stu-id="73ef0-271">When you compare data, separate hello timing of tests so that they are not in hello same 5-minute window in hello **sys.resource_stats** view.</span></span> <span data-ttu-id="73ef0-272">hello är målet hello övningen toominimize hello totala mängden resurser som används och inte toominimize hello belastning resurser.</span><span class="sxs-lookup"><span data-stu-id="73ef0-272">hello goal of hello exercise is toominimize hello total amount of resources used, and not toominimize hello peak resources.</span></span> <span data-ttu-id="73ef0-273">I allmänhet Optimera ett kodavsnitt för fördröjning minskar också risken för förbrukning av nätverksresurser.</span><span class="sxs-lookup"><span data-stu-id="73ef0-273">Generally, optimizing a piece of code for latency also reduces resource consumption.</span></span> <span data-ttu-id="73ef0-274">Se till att hello ändringar tooan program är nödvändiga och att hello ändringar inte påverka hello kundupplevelsen för en person som använder frågetips i hello program.</span><span class="sxs-lookup"><span data-stu-id="73ef0-274">Make sure that hello changes you make tooan application are necessary, and that hello changes don't negatively affect hello customer experience for someone who might be using query hints in hello application.</span></span>

<span data-ttu-id="73ef0-275">Om en arbetsbelastning har en uppsättning frågor upprepas, ofta den gör meningsfullt toocapture och validera hello begränsningar av dina val för planen eftersom den styr hello minsta storlek enhet krävs toohost hello resursdatabasen.</span><span class="sxs-lookup"><span data-stu-id="73ef0-275">If a workload has a set of repeating queries, often it makes sense toocapture and validate hello optimality of your plan choices because it drives hello minimum resource size unit required toohost hello database.</span></span> <span data-ttu-id="73ef0-276">När du validera det ibland på nytt granska hello planer toohelp du se till att de inte har degraderats.</span><span class="sxs-lookup"><span data-stu-id="73ef0-276">After you validate it, occasionally reexamine hello plans toohelp you make sure that they have not degraded.</span></span> <span data-ttu-id="73ef0-277">Du kan lära dig mer om [fråga tips (Transact-SQL)](https://msdn.microsoft.com/library/ms181714.aspx).</span><span class="sxs-lookup"><span data-stu-id="73ef0-277">You can learn more about [query hints (Transact-SQL)](https://msdn.microsoft.com/library/ms181714.aspx).</span></span>

### <a name="cross-database-sharding"></a><span data-ttu-id="73ef0-278">Flera databaser horisontell partitionering</span><span class="sxs-lookup"><span data-stu-id="73ef0-278">Cross-database sharding</span></span>
<span data-ttu-id="73ef0-279">Eftersom Azure SQL Database körs på vanlig maskinvara, är hello kapacitetsbegränsningar för en enskild databas lägre än för en traditionella lokala SQL Server-installation.</span><span class="sxs-lookup"><span data-stu-id="73ef0-279">Because Azure SQL Database runs on commodity hardware, hello capacity limits for a single database are lower than for a traditional on-premises SQL Server installation.</span></span> <span data-ttu-id="73ef0-280">Vissa kunder använder databasåtgärder för horisontell partitionering tekniker toospread över flera databaser om hello operations inte passar i hello gränserna för en enskild databas i Azure SQL Database.</span><span class="sxs-lookup"><span data-stu-id="73ef0-280">Some customers use sharding techniques toospread database operations over multiple databases when hello operations don't fit inside hello limits of a single database in Azure SQL Database.</span></span> <span data-ttu-id="73ef0-281">De flesta kunder som använder tekniker för horisontell partitionering i Azure SQL Database dela sina data på en enda dimension på flera databaser.</span><span class="sxs-lookup"><span data-stu-id="73ef0-281">Most customers who use sharding techniques in Azure SQL Database split their data on a single dimension across multiple databases.</span></span> <span data-ttu-id="73ef0-282">Du måste toounderstand att OLTP ofta programmens transaktioner som gäller tooonly en rad eller tooa liten grupp av rader i hello schemat för den här metoden.</span><span class="sxs-lookup"><span data-stu-id="73ef0-282">For this approach, you need toounderstand that OLTP applications often perform transactions that apply tooonly one row or tooa small group of rows in hello schema.</span></span>

> [!NOTE]
> <span data-ttu-id="73ef0-283">SQL-databasen innehåller nu ett bibliotek tooassist med horisontell partitionering.</span><span class="sxs-lookup"><span data-stu-id="73ef0-283">SQL Database now provides a library tooassist with sharding.</span></span> <span data-ttu-id="73ef0-284">Mer information finns i [översikt över klientbibliotek för elastisk databas](sql-database-elastic-database-client-library.md).</span><span class="sxs-lookup"><span data-stu-id="73ef0-284">For more information, see [Elastic Database client library overview](sql-database-elastic-database-client-library.md).</span></span>
> 
> 

<span data-ttu-id="73ef0-285">Till exempel om en databas har kundnamn, ordning och orderinformationen (t.ex. hello traditionella exempel databasen Northwind som levereras med SQL Server), du kan dela dessa data i flera databaser genom att gruppera en kund med hello relaterade ordning och ordning information information.</span><span class="sxs-lookup"><span data-stu-id="73ef0-285">For example, if a database has customer name, order, and order details (like hello traditional example Northwind database that ships with SQL Server), you could split this data into multiple databases by grouping a customer with hello related order and order detail information.</span></span> <span data-ttu-id="73ef0-286">Du kan garantera hello kundens data förblir i en enskild databas.</span><span class="sxs-lookup"><span data-stu-id="73ef0-286">You can guarantee that hello customer's data stays in a single database.</span></span> <span data-ttu-id="73ef0-287">hello-programmet skulle dela olika kunder på databaser, effektivt sprida hello belastningen över flera databaser.</span><span class="sxs-lookup"><span data-stu-id="73ef0-287">hello application would split different customers across databases, effectively spreading hello load across multiple databases.</span></span> <span data-ttu-id="73ef0-288">Med horisontell partitionering, kunder inte bara kan undvika hello maximala databasens storleksgräns, men Azure SQL Database kan också bearbeta arbetsbelastningar som är betydligt större än hello gränserna för hello olika prestandanivåer, förutsatt att varje enskild databas passar in i dess DTU.</span><span class="sxs-lookup"><span data-stu-id="73ef0-288">With sharding, customers not only can avoid hello maximum database size limit, but Azure SQL Database also can process workloads that are significantly larger than hello limits of hello different performance levels, as long as each individual database fits into its DTU.</span></span>

<span data-ttu-id="73ef0-289">Horisontell partitionering databasen inte minska hello sammanställda resursdata kapacitet för en lösning, är men högeffektiv stöd för mycket stora lösningar som kan sträcka sig över flera databaser.</span><span class="sxs-lookup"><span data-stu-id="73ef0-289">Although database sharding doesn't reduce hello aggregate resource capacity for a solution, it's highly effective at supporting very large solutions that are spread over multiple databases.</span></span> <span data-ttu-id="73ef0-290">Varje databas kan köra på en annan prestanda som är nivå toosupport mycket stora ”effektiva” databaser med höga resurskrav.</span><span class="sxs-lookup"><span data-stu-id="73ef0-290">Each database can run at a different performance level toosupport very large, "effective" databases with high resource requirements.</span></span>

### <a name="functional-partitioning"></a><span data-ttu-id="73ef0-291">Funktionella partitionering</span><span class="sxs-lookup"><span data-stu-id="73ef0-291">Functional partitioning</span></span>
<span data-ttu-id="73ef0-292">SQL Server-användare kombinera ofta många funktioner i en enskild databas.</span><span class="sxs-lookup"><span data-stu-id="73ef0-292">SQL Server users often combine many functions in a single database.</span></span> <span data-ttu-id="73ef0-293">Om ett program har logik toomanage inventeringen av ett Arkiv, kan till exempel att databasen ha logiken som är associerad med inventering, spårning inköps, lagrade procedurer och indexerade eller materialiserade vyer som hanterar rapportering sista månad.</span><span class="sxs-lookup"><span data-stu-id="73ef0-293">For example, if an application has logic toomanage inventory for a store, that database might have logic associated with inventory, tracking purchase orders, stored procedures, and indexed or materialized views that manage end-of-month reporting.</span></span> <span data-ttu-id="73ef0-294">Den här tekniken blir det enklare tooadminister hello databasen för åtgärder som säkerhetskopiering, men kräver också du toosize hello maskinvara toohandle hello belastning över alla funktioner i ett program.</span><span class="sxs-lookup"><span data-stu-id="73ef0-294">This technique makes it easier tooadminister hello database for operations like backup, but it also requires you toosize hello hardware toohandle hello peak load across all functions of an application.</span></span>

<span data-ttu-id="73ef0-295">Om du använder en skalbar arkitektur i Azure SQL Database är en bra idé toosplit olika funktioner för ett program till en annan databas.</span><span class="sxs-lookup"><span data-stu-id="73ef0-295">If you use a scale-out architecture in Azure SQL Database, it's a good idea toosplit different functions of an application into different databases.</span></span> <span data-ttu-id="73ef0-296">Med den här tekniken kan skalas varje program oberoende av varandra.</span><span class="sxs-lookup"><span data-stu-id="73ef0-296">By using this technique, each application scales independently.</span></span> <span data-ttu-id="73ef0-297">Som ett program blir busier (och hello belastningen på hello databasen ökar) kan hello-administratören välja oberoende prestandanivåer för varje funktion i hello program.</span><span class="sxs-lookup"><span data-stu-id="73ef0-297">As an application becomes busier (and hello load on hello database increases), hello administrator can choose independent performance levels for each function in hello application.</span></span> <span data-ttu-id="73ef0-298">Ett program kan vara större än en enskild vara dator kan hantera eftersom hello belastningen är fördelade på flera datorer på hello gränsen med den här arkitekturen.</span><span class="sxs-lookup"><span data-stu-id="73ef0-298">At hello limit, with this architecture, an application can be larger than a single commodity machine can handle because hello load is spread across multiple machines.</span></span>

### <a name="batch-queries"></a><span data-ttu-id="73ef0-299">Batch-frågor</span><span class="sxs-lookup"><span data-stu-id="73ef0-299">Batch queries</span></span>
<span data-ttu-id="73ef0-300">För program som har åtkomst till data med hjälp av stora volymer, ofta ad hoc-frågor till en stor mängd svarstid kan hänföras nätverkskommunikation mellan hello programmet nivå och hello Azure SQL Database-nivå.</span><span class="sxs-lookup"><span data-stu-id="73ef0-300">For applications that access data by using high-volume, frequent, ad hoc querying, a substantial amount of response time is spent on network communication between hello application tier and hello Azure SQL Database tier.</span></span> <span data-ttu-id="73ef0-301">Även om båda hello är program- och Azure SQL Database i hello samma datacenter, hello Nätverksfördröjningen mellan hello två kan förstoras med ett stort antal dataåtgärder åtkomst.</span><span class="sxs-lookup"><span data-stu-id="73ef0-301">Even when both hello application and Azure SQL Database are in hello same data center, hello network latency between hello two might be magnified by a large number of data access operations.</span></span> <span data-ttu-id="73ef0-302">tooreduce hello nätverket avrunda resor för hello data åtkomståtgärder, Överväg att använda hello alternativet tooeither batch hello ad hoc-frågor eller toocompile dem som lagrade procedurer.</span><span class="sxs-lookup"><span data-stu-id="73ef0-302">tooreduce hello network round trips for hello data access operations, consider using hello option tooeither batch hello ad hoc queries, or toocompile them as stored procedures.</span></span> <span data-ttu-id="73ef0-303">Om du batch hello ad hoc-frågor kan du skicka flera frågor som en stor batch i en enda resa tooAzure SQL-databas.</span><span class="sxs-lookup"><span data-stu-id="73ef0-303">If you batch hello ad hoc queries, you can send multiple queries as one large batch in a single trip tooAzure SQL Database.</span></span> <span data-ttu-id="73ef0-304">Om du kompilerar ad hoc-frågor i en lagrad procedur kan du uppnå hello samma resultat som om du batch-dem.</span><span class="sxs-lookup"><span data-stu-id="73ef0-304">If you compile ad hoc queries in a stored procedure, you could achieve hello same result as if you batch them.</span></span> <span data-ttu-id="73ef0-305">Använda en lagrad procedur också ger du hello fördelen med att öka hello risken för cachelagring hello frågeplaner i Azure SQL Database så att du kan använda hello lagrade proceduren igen.</span><span class="sxs-lookup"><span data-stu-id="73ef0-305">Using a stored procedure also gives you hello benefit of increasing hello chances of caching hello query plans in Azure SQL Database so you can use hello stored procedure again.</span></span>

<span data-ttu-id="73ef0-306">Vissa program är processorintensiva skrivning.</span><span class="sxs-lookup"><span data-stu-id="73ef0-306">Some applications are write-intensive.</span></span> <span data-ttu-id="73ef0-307">Ibland kan du minska hello total i/o-belastningen på en databas genom att beakta hur toobatch skriver tillsammans.</span><span class="sxs-lookup"><span data-stu-id="73ef0-307">Sometimes you can reduce hello total I/O load on a database by considering how toobatch writes together.</span></span> <span data-ttu-id="73ef0-308">Oftast är det enkelt med explicita transaktioner i stället för automatiskt genomförande transaktioner i lagrade procedurer och ad hoc-batchar.</span><span class="sxs-lookup"><span data-stu-id="73ef0-308">Often, this is as simple as using explicit transactions instead of auto-commit transactions in stored procedures and ad hoc batches.</span></span> <span data-ttu-id="73ef0-309">En utvärdering av olika metoder som du kan använda finns i [batchbearbetning tekniker för SQL Database-program i Azure](https://msdn.microsoft.com/library/windowsazure/dn132615.aspx).</span><span class="sxs-lookup"><span data-stu-id="73ef0-309">For an evaluation of different techniques you can use, see [Batching techniques for SQL Database applications in Azure](https://msdn.microsoft.com/library/windowsazure/dn132615.aspx).</span></span> <span data-ttu-id="73ef0-310">Experimentera med din egen arbetsbelastning toofind hello rätt modell för batchbearbetning.</span><span class="sxs-lookup"><span data-stu-id="73ef0-310">Experiment with your own workload toofind hello right model for batching.</span></span> <span data-ttu-id="73ef0-311">Vara säker på att toounderstand som en modell kan ha lite garanterar olika transaktionskonsekvens.</span><span class="sxs-lookup"><span data-stu-id="73ef0-311">Be sure toounderstand that a model might have slightly different transactional consistency guarantees.</span></span> <span data-ttu-id="73ef0-312">Hitta hello rätt arbetsbelastning som minimerar Resursanvändning kräver att hitta hello rätt kombination av konsekvens och prestanda avvägningarna.</span><span class="sxs-lookup"><span data-stu-id="73ef0-312">Finding hello right workload that minimizes resource use requires finding hello right combination of consistency and performance trade-offs.</span></span>

### <a name="application-tier-caching"></a><span data-ttu-id="73ef0-313">Programmet skikt cachelagring</span><span class="sxs-lookup"><span data-stu-id="73ef0-313">Application-tier caching</span></span>
<span data-ttu-id="73ef0-314">Vissa databasprogram har läs-frekventa arbetsbelastningarna.</span><span class="sxs-lookup"><span data-stu-id="73ef0-314">Some database applications have read-heavy workloads.</span></span> <span data-ttu-id="73ef0-315">Cachelagring lager kan minska hello belastningen på hello-databasen och kan minska nivå krävs toosupport för hello prestanda en databas med hjälp av Azure SQL Database.</span><span class="sxs-lookup"><span data-stu-id="73ef0-315">Caching layers might reduce hello load on hello database and might potentially reduce hello performance level required toosupport a database by using Azure SQL Database.</span></span> <span data-ttu-id="73ef0-316">Med [Azure Redis-Cache](https://azure.microsoft.com/services/cache/), om du har en Läs frekventa arbetsbelastning kan du läsa hello data en gång (eller kanske en gång per program skikt dator, beroende på hur den är konfigurerad), och sedan lagra dessa data utanför din SQL-databas.</span><span class="sxs-lookup"><span data-stu-id="73ef0-316">With [Azure Redis Cache](https://azure.microsoft.com/services/cache/), if you have a read-heavy workload, you can read hello data once (or perhaps once per application-tier machine, depending on how it is configured), and then store that data outside your SQL database.</span></span> <span data-ttu-id="73ef0-317">Detta är ett sätt tooreduce databasbelastningen (processor och Läs i/o), men det finns en effekt på transaktionskonsekvens eftersom hello data som läses från hello cachen kanske är synkroniserad med hello data i hello-databas.</span><span class="sxs-lookup"><span data-stu-id="73ef0-317">This is a way tooreduce database load (CPU and read I/O), but there is an effect on transactional consistency because hello data being read from hello cache might be out of sync with hello data in hello database.</span></span> <span data-ttu-id="73ef0-318">Även om vissa andelen inkonsekvens är acceptabel för många program, som gäller inte för alla arbetsbelastningar.</span><span class="sxs-lookup"><span data-stu-id="73ef0-318">Although in many applications some level of inconsistency is acceptable, that's not true for all workloads.</span></span> <span data-ttu-id="73ef0-319">Du bör till fullo förstå kraven för application innan du implementerar en strategi för cachelagring av programmet skikt.</span><span class="sxs-lookup"><span data-stu-id="73ef0-319">You should fully understand any application requirements before you implement an application-tier caching strategy.</span></span>

## <a name="next-steps"></a><span data-ttu-id="73ef0-320">Nästa steg</span><span class="sxs-lookup"><span data-stu-id="73ef0-320">Next steps</span></span>
* <span data-ttu-id="73ef0-321">Mer information om tjänstnivåer finns [SQL Database-alternativ och prestanda](sql-database-service-tiers.md)</span><span class="sxs-lookup"><span data-stu-id="73ef0-321">For more information about service tiers, see [SQL Database options and performance](sql-database-service-tiers.md)</span></span>
* <span data-ttu-id="73ef0-322">Läs mer om elastiska pooler [vad är en Azure elastisk pool?](sql-database-elastic-pool.md)</span><span class="sxs-lookup"><span data-stu-id="73ef0-322">For more information about elastic pools, see [What is an Azure elastic pool?](sql-database-elastic-pool.md)</span></span>
* <span data-ttu-id="73ef0-323">Information om prestanda och elastiska pooler finns [när tooconsider en elastisk pool](sql-database-elastic-pool-guidance.md)</span><span class="sxs-lookup"><span data-stu-id="73ef0-323">For information about performance and elastic pools, see [When tooconsider an elastic pool](sql-database-elastic-pool-guidance.md)</span></span>


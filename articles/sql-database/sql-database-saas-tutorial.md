---
title: "Distribuera och utforska flera innehavare Wingtip SaaS-program som använder Azure SQL Database | Microsoft Docs"
description: "Distribuera och utforska Wingtip SaaS flera innehavare-program som visar SaaS mönster med Azure SQL Database."
keywords: sql database tutorial
services: sql-database
documentationcenter: 
author: stevestein
manager: jhubbard
editor: 
ms.assetid: 
ms.service: sql-database
ms.custom: scale out apps
ms.workload: data-management
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 07/26/2017
ms.author: sstein
ms.openlocfilehash: b09bfa8a5bc22a092e963f351e99c16d0e9a57ba
ms.sourcegitcommit: 02e69c4a9d17645633357fe3d46677c2ff22c85a
ms.translationtype: MT
ms.contentlocale: sv-SE
ms.lasthandoff: 08/03/2017
---
# <a name="deploy-and-explore-a-multi-tenant-application-that-uses-azure-sql-database---wingtip-saas"></a><span data-ttu-id="806ba-104">Distribuera och utforska ett program med flera innehavare som använder Azure SQL Database - Wingtip SaaS</span><span class="sxs-lookup"><span data-stu-id="806ba-104">Deploy and explore a multi-tenant application that uses Azure SQL Database - Wingtip SaaS</span></span>

<span data-ttu-id="806ba-105">I kursen får du distribuera och utforska Wingtip SaaS-program.</span><span class="sxs-lookup"><span data-stu-id="806ba-105">In this tutorial, you deploy and explore the Wingtip SaaS application.</span></span> <span data-ttu-id="806ba-106">Programmet använder ett databas-per-klient, SaaS-programmönster för att hantera flera klienter.</span><span class="sxs-lookup"><span data-stu-id="806ba-106">The application uses a database-per-tenant, SaaS application pattern, to service multiple tenants.</span></span> <span data-ttu-id="806ba-107">Programmet är utformad för att presentera Azure SQL Database-funktioner som förenklar aktiverar SaaS-scenarier.</span><span class="sxs-lookup"><span data-stu-id="806ba-107">The application is designed to showcase features of Azure SQL Database that simplify enabling SaaS scenarios.</span></span>

<span data-ttu-id="806ba-108">Fem minuter efter att du klickar på knappen *distribuera till Azure* nedan, har du ett fungerande SaaS-program för flera klienter som använder SQL Database i molnet.</span><span class="sxs-lookup"><span data-stu-id="806ba-108">Five minutes after clicking the *Deploy to Azure* button below, you have a multi-tenant SaaS application, using SQL Database, up and running in the cloud.</span></span> <span data-ttu-id="806ba-109">Programmet har distribuerats med tre exempel klienter, var och en med sin egen databas alla distribuerade till en elastisk SQL-pool.</span><span class="sxs-lookup"><span data-stu-id="806ba-109">The application is deployed with three sample tenants, each with its own database, all deployed into a SQL elastic pool.</span></span> <span data-ttu-id="806ba-110">Appen har distribuerats till din Azure-prenumeration som ger fullständig åtkomst till utforska och fungerar med enskilda programkomponenter.</span><span class="sxs-lookup"><span data-stu-id="806ba-110">The app is deployed to your Azure subscription, giving you full access to explore and work with the individual application components.</span></span> <span data-ttu-id="806ba-111">Programmet källa kod och hantering av skript är tillgängliga i WingtipSaaS GitHub-lagringsplatsen.</span><span class="sxs-lookup"><span data-stu-id="806ba-111">The application source code and management scripts are available in the WingtipSaaS GitHub repo.</span></span>


<span data-ttu-id="806ba-112">I den här guiden lär du dig:</span><span class="sxs-lookup"><span data-stu-id="806ba-112">In this tutorial you learn:</span></span>

> [!div class="checklist"]

> * <span data-ttu-id="806ba-113">Så här distribuerar du Wingtip SaaS-program</span><span class="sxs-lookup"><span data-stu-id="806ba-113">How to deploy the Wingtip SaaS application</span></span>
> * <span data-ttu-id="806ba-114">Var du kan hämta programmets källkod och av hanteringsskript</span><span class="sxs-lookup"><span data-stu-id="806ba-114">Where to get the application source code, and management scripts</span></span>
> * <span data-ttu-id="806ba-115">Om de servrar, pooler och databaser som ingår i appen</span><span class="sxs-lookup"><span data-stu-id="806ba-115">About the servers, pools, and databases that make up the app</span></span>
> * <span data-ttu-id="806ba-116">Hur klienter mappas till sina data med den *katalog*</span><span class="sxs-lookup"><span data-stu-id="806ba-116">How tenants are mapped to their data with the *catalog*</span></span>
> * <span data-ttu-id="806ba-117">Hur du etablerar en ny klient</span><span class="sxs-lookup"><span data-stu-id="806ba-117">How to provision a new tenant</span></span>
> * <span data-ttu-id="806ba-118">Så här övervakar du klient aktivitet i appen</span><span class="sxs-lookup"><span data-stu-id="806ba-118">How to monitor tenant activity in the app</span></span>

<span data-ttu-id="806ba-119">Om du vill utforska olika SaaS design- och hanteringsmönster, finns det en [uppsättning relaterade guider](sql-database-wtp-overview.md#sql-database-wingtip-saas-tutorials) som bygger på den här inledande distributionen.</span><span class="sxs-lookup"><span data-stu-id="806ba-119">To explore various SaaS design and management patterns, a [series of related tutorials](sql-database-wtp-overview.md#sql-database-wingtip-saas-tutorials) is available that build upon this initial deployment.</span></span> <span data-ttu-id="806ba-120">När du går igenom guiderna, kan du undersöka skripten som tillhandahålls och se hur de olika SaaS-mönstren implementeras.</span><span class="sxs-lookup"><span data-stu-id="806ba-120">While going through the tutorials, dive into the provided scripts, and examine how the different SaaS patterns are implemented.</span></span> <span data-ttu-id="806ba-121">Stega dig igenom skripten i varje guide för att få en djupare förståelse för hur man implementerar de olika SQL Database-funktionerna som förenklar utvecklingen av SaaS-program.</span><span class="sxs-lookup"><span data-stu-id="806ba-121">Step through the scripts in each tutorial to gain a deeper understanding how to implement the many SQL Database features that simplify developing SaaS applications.</span></span>

## <a name="prerequisites"></a><span data-ttu-id="806ba-122">Krav</span><span class="sxs-lookup"><span data-stu-id="806ba-122">Prerequisites</span></span>

<span data-ttu-id="806ba-123">Följande krav måste uppfyllas för att kunna köra den här självstudiekursen:</span><span class="sxs-lookup"><span data-stu-id="806ba-123">To complete this tutorial, make sure the following prerequisites are completed:</span></span>

* <span data-ttu-id="806ba-124">Azure PowerShell ska ha installerats.</span><span class="sxs-lookup"><span data-stu-id="806ba-124">Azure PowerShell is installed.</span></span> <span data-ttu-id="806ba-125">Mer information finns i [Komma igång med Azure PowerShell](https://docs.microsoft.com/powershell/azure/get-started-azureps)</span><span class="sxs-lookup"><span data-stu-id="806ba-125">For details, see [Getting started with Azure PowerShell](https://docs.microsoft.com/powershell/azure/get-started-azureps)</span></span>

## <a name="deploy-the-wingtip-saas-application"></a><span data-ttu-id="806ba-126">Distribuera Wingtip SaaS-program</span><span class="sxs-lookup"><span data-stu-id="806ba-126">Deploy the Wingtip SaaS application</span></span>

<span data-ttu-id="806ba-127">Distribuera Wingtip SaaS app:</span><span class="sxs-lookup"><span data-stu-id="806ba-127">Deploy the Wingtip SaaS app:</span></span>

1. <span data-ttu-id="806ba-128">Klicka på den **till Azure** knappen öppnar Distributionsmall Wingtip SaaS Azure portal.</span><span class="sxs-lookup"><span data-stu-id="806ba-128">Clicking the **Deploy to Azure** button opens the Azure portal to the Wingtip SaaS deployment template.</span></span> <span data-ttu-id="806ba-129">Mallen kräver två parametervärden. ett namn för en ny resursgrupp och ett användarnamn som särskiljer den här distributionen från andra distributioner av Wingtip SaaS-app.</span><span class="sxs-lookup"><span data-stu-id="806ba-129">The template requires two parameter values; a name for a new resource group, and a user name that distinguishes this deployment from other deployments of the Wingtip SaaS app.</span></span> <span data-ttu-id="806ba-130">Nästa steg innehåller information för att ange dessa värden.</span><span class="sxs-lookup"><span data-stu-id="806ba-130">The next step provides details for setting these values.</span></span>

   <span data-ttu-id="806ba-131">Se till att Observera exakta värden som du använder, eftersom du behöver ange dem senare i en konfigurationsfil.</span><span class="sxs-lookup"><span data-stu-id="806ba-131">Make sure to note the exact values that you use, because you will need to enter them into a configuration file later.</span></span>

   <a href="http://aka.ms/deploywtpapp" target="_blank"><img src="http://azuredeploy.net/deploybutton.png"/></a>

1. <span data-ttu-id="806ba-132">Ange nödvändiga parametervärden för distribution:</span><span class="sxs-lookup"><span data-stu-id="806ba-132">Enter required parameter values for the deployment:</span></span>

    > [!IMPORTANT]
    > <span data-ttu-id="806ba-133">En del autentisering och brandväggar för servern har avsiktligt lämnats oskyddade i demonstrationssyfte.</span><span class="sxs-lookup"><span data-stu-id="806ba-133">Some authentication, and server firewalls are intentionally unsecured for demonstration purposes.</span></span> <span data-ttu-id="806ba-134">**Skapa en ny resursgrupp**, och Använd inte befintliga resursgrupper, servrar eller pooler.</span><span class="sxs-lookup"><span data-stu-id="806ba-134">**Create a new resource group**, and do not use existing resource groups, servers, or pools.</span></span> <span data-ttu-id="806ba-135">Använd inte det här programmet eller alla resurser som den skapar för produktion.</span><span class="sxs-lookup"><span data-stu-id="806ba-135">Do not use this application, or any resources it creates, for production.</span></span> <span data-ttu-id="806ba-136">Ta bort den här resursgruppen när du är klar med att programmet för att stoppa relaterad fakturering.</span><span class="sxs-lookup"><span data-stu-id="806ba-136">Delete this resource group when you are finished with the application to stop related billing.</span></span>

    * <span data-ttu-id="806ba-137">**Resursgruppen** – Välj **Skapa nytt** och ger en **namn** för resursgruppen.</span><span class="sxs-lookup"><span data-stu-id="806ba-137">**Resource group** - Select **Create new** and provide a **Name** for the resource group.</span></span> <span data-ttu-id="806ba-138">Välj en **plats** från den nedrullningsbara listan.</span><span class="sxs-lookup"><span data-stu-id="806ba-138">Select a **Location** from the drop-down list.</span></span>
    * <span data-ttu-id="806ba-139">**Användaren** -resurser kräver globalt unikt namn.</span><span class="sxs-lookup"><span data-stu-id="806ba-139">**User** - Some resources require names that are globally unique.</span></span> <span data-ttu-id="806ba-140">För att säkerställa unikhet varje gång du distribuerar programmet ange ett värde att skilja mellan resurser som du skapar från resurser som skapats av andra distribution av programmet Wingtip.</span><span class="sxs-lookup"><span data-stu-id="806ba-140">To ensure uniqueness, each time you deploy the application provide a value to differentiate resources you create, from resources created by any other deployment of the Wingtip application.</span></span> <span data-ttu-id="806ba-141">Vi rekommenderar att du använder ett kort **användar**namn, till exempel dina initialer plus ett tal (till exempel *bg1*) och att du sedan använder det som resursgruppens namn (till exempel *wingtip-bg1*).</span><span class="sxs-lookup"><span data-stu-id="806ba-141">It’s recommended to use a short **User** name, such as your initials plus a number (for example, *bg1*), and then use that in the resource group name (for example, *wingtip-bg1*).</span></span> <span data-ttu-id="806ba-142">Den **användaren** parametern kan bara innehålla bokstäver, siffror och bindestreck (inga blanksteg).</span><span class="sxs-lookup"><span data-stu-id="806ba-142">The **User** parameter can only contain letters, numbers, and hyphens (no spaces).</span></span> <span data-ttu-id="806ba-143">Det första och sista tecknet måste vara en bokstav eller en siffra (alla gemener rekommenderas).</span><span class="sxs-lookup"><span data-stu-id="806ba-143">The first and last character must be a letter or a number (all lowercase is recommended).</span></span>


1. <span data-ttu-id="806ba-144">**Distribuera programmet**.</span><span class="sxs-lookup"><span data-stu-id="806ba-144">**Deploy the application**.</span></span>

    * <span data-ttu-id="806ba-145">Klicka om du accepterar villkoren.</span><span class="sxs-lookup"><span data-stu-id="806ba-145">Click to agree to the terms and conditions.</span></span>
    * <span data-ttu-id="806ba-146">Klicka på **Köp**.</span><span class="sxs-lookup"><span data-stu-id="806ba-146">Click **Purchase**.</span></span>

1. <span data-ttu-id="806ba-147">Övervaka distributionsstatus genom att klicka på **aviseringar** (klockikonen till höger om sökrutan).</span><span class="sxs-lookup"><span data-stu-id="806ba-147">Monitor deployment status by clicking **Notifications** (the bell icon right of the search box).</span></span> <span data-ttu-id="806ba-148">Distribuera appen Wingtip SaaS tar cirka fem minuter.</span><span class="sxs-lookup"><span data-stu-id="806ba-148">Deploying the Wingtip SaaS app takes approximately five minutes.</span></span>

   ![distributionen lyckades](media/sql-database-saas-tutorial/succeeded.png)

## <a name="download-and-unblock-the-wingtip-saas-scripts"></a><span data-ttu-id="806ba-150">Hämta och avblockera Wingtip SaaS-skript</span><span class="sxs-lookup"><span data-stu-id="806ba-150">Download and unblock the Wingtip SaaS scripts</span></span>

<span data-ttu-id="806ba-151">Ladda ned källan kod och hantering av skript vid distribution av programmet.</span><span class="sxs-lookup"><span data-stu-id="806ba-151">While the application is deploying, download the source code and management scripts.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="806ba-152">Körbara innehållet (skript, DLL-filer) kan blockeras av Windows när zip-filer laddas ned från en extern källa och extraheras.</span><span class="sxs-lookup"><span data-stu-id="806ba-152">Executable contents (scripts, dlls) may be blocked by Windows when zip files are downloaded from an external source and extracted.</span></span> <span data-ttu-id="806ba-153">Följ stegen nedan för att låsa upp ZIP-filen innan du extraherar när extraherar skript från en zip-fil.</span><span class="sxs-lookup"><span data-stu-id="806ba-153">When extracting the scripts from a zip file, follow the steps below to unblock the .zip file before extracting.</span></span> <span data-ttu-id="806ba-154">Detta säkerställer att skript tillåts köra.</span><span class="sxs-lookup"><span data-stu-id="806ba-154">This ensures the scripts are allowed to run.</span></span>

1. <span data-ttu-id="806ba-155">Bläddra till [github-repo-Wingtip SaaS](https://github.com/Microsoft/WingtipSaaS).</span><span class="sxs-lookup"><span data-stu-id="806ba-155">Browse to [the Wingtip SaaS github repo](https://github.com/Microsoft/WingtipSaaS).</span></span>
1. <span data-ttu-id="806ba-156">Klicka på **kloning eller hämta**.</span><span class="sxs-lookup"><span data-stu-id="806ba-156">Click **Clone or download**.</span></span>
1. <span data-ttu-id="806ba-157">Klicka på **hämta ZIP** och spara filen.</span><span class="sxs-lookup"><span data-stu-id="806ba-157">Click **Download ZIP** and save the file.</span></span>
1. <span data-ttu-id="806ba-158">Högerklicka på den **WingtipSaaS master.zip** fil och markera **egenskaper**.</span><span class="sxs-lookup"><span data-stu-id="806ba-158">Right-click the **WingtipSaaS-master.zip** file, and select **Properties**.</span></span>
1. <span data-ttu-id="806ba-159">På den **allmänna** väljer **avblockera**, och klicka på **tillämpa**.</span><span class="sxs-lookup"><span data-stu-id="806ba-159">On the **General** tab, select **Unblock**, and click **Apply**.</span></span>
1. <span data-ttu-id="806ba-160">Klicka på **OK**.</span><span class="sxs-lookup"><span data-stu-id="806ba-160">Click **OK**.</span></span>
1. <span data-ttu-id="806ba-161">Extrahera filerna.</span><span class="sxs-lookup"><span data-stu-id="806ba-161">Extract the files.</span></span>

<span data-ttu-id="806ba-162">Skript finns i den *... \\WingtipSaaS master\\Learning moduler* mapp.</span><span class="sxs-lookup"><span data-stu-id="806ba-162">Scripts are located in the *..\\WingtipSaaS-master\\Learning Modules* folder.</span></span>

## <a name="update-the-configuration-file-for-this-deployment"></a><span data-ttu-id="806ba-163">Uppdatera konfigurationsfilen för den här distributionen</span><span class="sxs-lookup"><span data-stu-id="806ba-163">Update the configuration file for this deployment</span></span>

<span data-ttu-id="806ba-164">Innan du kör alla skript, ange den *resursgruppen* och *användare* värdena i **UserConfig.psm1**.</span><span class="sxs-lookup"><span data-stu-id="806ba-164">Before running any scripts, set the *resource group* and *user* values in **UserConfig.psm1**.</span></span> <span data-ttu-id="806ba-165">Ange dessa variabler de värden som du anger under distributionen.</span><span class="sxs-lookup"><span data-stu-id="806ba-165">Set these variables to the values you set during deployment.</span></span>

1. <span data-ttu-id="806ba-166">Öppna... \\inlärningsmoduler\\*UserConfig.psm1* i *PowerShell ISE*</span><span class="sxs-lookup"><span data-stu-id="806ba-166">Open ...\\Learning Modules\\*UserConfig.psm1* in the *PowerShell ISE*</span></span>
1. <span data-ttu-id="806ba-167">Uppdatera *ResourceGroupName* och *namn* med specifika värden för din distribution (på rader 10 och 11 endast).</span><span class="sxs-lookup"><span data-stu-id="806ba-167">Update *ResourceGroupName* and *Name* with the specific values for your deployment (on lines 10 and 11 only).</span></span>
1. <span data-ttu-id="806ba-168">Spara ändringarna!</span><span class="sxs-lookup"><span data-stu-id="806ba-168">Save the changes!</span></span>

<span data-ttu-id="806ba-169">Det här helt enkelt att hålla du behöver uppdatera dessa distribution-specifika värden i alla skript.</span><span class="sxs-lookup"><span data-stu-id="806ba-169">Setting this here simply keeps you from having to update these deployment-specific values in every script.</span></span>

## <a name="run-the-application"></a><span data-ttu-id="806ba-170">Köra programmet</span><span class="sxs-lookup"><span data-stu-id="806ba-170">Run the application</span></span>

<span data-ttu-id="806ba-171">Appen visar platser, som konsertlokaler, jazzklubbar, sportklubbar som organiserar evenemang.</span><span class="sxs-lookup"><span data-stu-id="806ba-171">The app showcases venues, such as concert halls, jazz clubs, sports clubs, that host events.</span></span> <span data-ttu-id="806ba-172">Handelsplatser registrera som kunder (eller klienter) i Wingtip-plattformen för ett enkelt sätt att visa en lista över händelser och sälja biljetter.</span><span class="sxs-lookup"><span data-stu-id="806ba-172">Venues register as customers (or tenants) of the Wingtip platform, for an easy way to list events and sell tickets.</span></span> <span data-ttu-id="806ba-173">Varje plats får en personaliserad webbapp för att hantera sina evenemang och sälja biljetter, oberoende och isolerat från andra klienter.</span><span class="sxs-lookup"><span data-stu-id="806ba-173">Each venue gets a personalized web app to manage and list their events and sell tickets, independent and isolated from other tenants.</span></span> <span data-ttu-id="806ba-174">Varje klient hämtar under försättsbladen, en SQL-databas som har distribuerats till en elastisk SQL-pool.</span><span class="sxs-lookup"><span data-stu-id="806ba-174">Under the covers, each tenant gets a SQL database deployed into a SQL elastic pool.</span></span>

<span data-ttu-id="806ba-175">En central **evenemangshubb** innehåller en lista över de klient-URL:er som är specifika för din distribution.</span><span class="sxs-lookup"><span data-stu-id="806ba-175">A central **Events Hub** provides a list of tenant URLs specific to your deployment.</span></span>

1. <span data-ttu-id="806ba-176">Öppna den _händelser hubb_ i webbläsaren: http://events.wtp.&lt; ANVÄNDAREN&gt;. trafficmanager.net (Ersätt med användarnamnet för din distribution):</span><span class="sxs-lookup"><span data-stu-id="806ba-176">Open the _Events Hub_ in your web browser: http://events.wtp.&lt;USER&gt;.trafficmanager.net (replace with your deployment's user name):</span></span>

    ![evenemangshubben](media/sql-database-saas-tutorial/events-hub.png)

1. <span data-ttu-id="806ba-178">Klicka på **Fabrikam Jazzklubb** i *evenemangshubben*.</span><span class="sxs-lookup"><span data-stu-id="806ba-178">Click **Fabrikam Jazz Club** in the *Events Hub*.</span></span>

   ![Händelser](./media/sql-database-saas-tutorial/fabrikam.png)


<span data-ttu-id="806ba-180">Att kontrollera distributionen av inkommande begäranden, appen använder [ *Azure Traffic Manager*](https://docs.microsoft.com/azure/traffic-manager/traffic-manager-overview).</span><span class="sxs-lookup"><span data-stu-id="806ba-180">To control the distribution of incoming requests, the app uses [*Azure Traffic Manager*](https://docs.microsoft.com/azure/traffic-manager/traffic-manager-overview).</span></span> <span data-ttu-id="806ba-181">Evenemangssidorna, som är klientspecifika, kräver att klientnamnen finns med i URL:erna.</span><span class="sxs-lookup"><span data-stu-id="806ba-181">The events pages, which are tenant-specific, require that tenant names are included in the URLs.</span></span> <span data-ttu-id="806ba-182">Alla klient-URL:er inkluderar ditt specifika *användare*-värde och har det här formatet: http://events.wtp.&lt; användare&gt;.trafficmanager.net/*fabrikamjazzclub*.</span><span class="sxs-lookup"><span data-stu-id="806ba-182">All the tenant URLs include your specific *User* value and follow this format: http://events.wtp.&lt;USER&gt;.trafficmanager.net/*fabrikamjazzclub*.</span></span> <span data-ttu-id="806ba-183">Evenemangsappen parsar klientnamnet från URL:en och använder det för att skapa en nyckel för att komma åt katalogen med hjälp av[*fragmentkarthantering*](https://docs.microsoft.com/azure/sql-database/sql-database-elastic-scale-shard-map-management).</span><span class="sxs-lookup"><span data-stu-id="806ba-183">The events app parses the tenant name from the URL and uses it to create a key to access a catalog using [*shard map management*](https://docs.microsoft.com/azure/sql-database/sql-database-elastic-scale-shard-map-management).</span></span> <span data-ttu-id="806ba-184">Katalogen mappar nyckeln till klientens databasplatsen.</span><span class="sxs-lookup"><span data-stu-id="806ba-184">The catalog maps the key to the tenant's database location.</span></span> <span data-ttu-id="806ba-185">Den **händelser hubb** använder utökade metadata i katalogen för att hämta namnet på den klient som är associerade med varje databas för att ange URL-listan.</span><span class="sxs-lookup"><span data-stu-id="806ba-185">The **Events Hub** uses extended metadata in the catalog to retrieve the tenant’s name associated with each database to provide the list of URLs.</span></span>

<span data-ttu-id="806ba-186">I en produktionsmiljö, skulle du vanligtvis skapa en CNAME DNS-post för att [*peka ett företags internetdomän*](https://docs.microsoft.com/azure/traffic-manager/traffic-manager-point-internet-domain) till Traffic Manager-profilen.</span><span class="sxs-lookup"><span data-stu-id="806ba-186">In a production environment, you would typically create a CNAME DNS record to [*point a company internet domain*](https://docs.microsoft.com/azure/traffic-manager/traffic-manager-point-internet-domain) to the traffic manager profile.</span></span>

## <a name="start-generating-load-on-the-tenant-databases"></a><span data-ttu-id="806ba-187">Börja generera belastningar på klient-databaserna</span><span class="sxs-lookup"><span data-stu-id="806ba-187">Start generating load on the tenant databases</span></span>

<span data-ttu-id="806ba-188">Nu när appen har distribuerats, vi få det att fungera!</span><span class="sxs-lookup"><span data-stu-id="806ba-188">Now that the app is deployed, let’s put it to work!</span></span> <span data-ttu-id="806ba-189">Den *Demo-LoadGenerator* PowerShell-skript startar en arbetsbelastning som körs mot alla klient-databaser.</span><span class="sxs-lookup"><span data-stu-id="806ba-189">The *Demo-LoadGenerator* PowerShell script starts a workload running against all tenant databases.</span></span> <span data-ttu-id="806ba-190">Verkliga belastningen på många SaaS-appar är vanligtvis sporadiska och oförutsägbart.</span><span class="sxs-lookup"><span data-stu-id="806ba-190">The real-world load on many SaaS apps is typically sporadic and unpredictable.</span></span> <span data-ttu-id="806ba-191">Om du vill simulera den här typen av belastningen producerar generatorn last fördelad över alla klienter med slumpmässig belastning på varje klient som uppstår vid slumpmässiga intervall.</span><span class="sxs-lookup"><span data-stu-id="806ba-191">To simulate this type of load, the generator produces a load distributed across all tenants, with randomized bursts on each tenant occurring at randomized intervals.</span></span> <span data-ttu-id="806ba-192">Därför det tar flera minuter innan load mönstret ut så är det bäst att låta generator kör minst tre eller fyra minuter innan övervakning belastningen.</span><span class="sxs-lookup"><span data-stu-id="806ba-192">Because of this it takes several minutes for the load pattern to emerge, so it’s best to let the generator run for at least three or four minutes before monitoring the load.</span></span>

1. <span data-ttu-id="806ba-193">I den *PowerShell ISE*öppnar den... \\Learning moduler\\verktyg\\*Demo-LoadGenerator.ps1* skript.</span><span class="sxs-lookup"><span data-stu-id="806ba-193">In the *PowerShell ISE*, open the ...\\Learning Modules\\Utilities\\*Demo-LoadGenerator.ps1* script.</span></span>
1. <span data-ttu-id="806ba-194">Tryck **F5** för att köra skriptet och starta belastningsgeneratorn (Lämna standardvärdet för parametern för tillfället).</span><span class="sxs-lookup"><span data-stu-id="806ba-194">Press **F5** to run the script and start the load generator (leave the default parameter values for now).</span></span>

> [!IMPORTANT]
> <span data-ttu-id="806ba-195">Öppna ett nytt fönster i PowerShell ISE för att köra andra skript.</span><span class="sxs-lookup"><span data-stu-id="806ba-195">To run other scripts, open a new PowerShell ISE window.</span></span> <span data-ttu-id="806ba-196">Belastningsgeneratorn körs som en serie jobb i din lokala PowerShell-session.</span><span class="sxs-lookup"><span data-stu-id="806ba-196">The load generator is running as a series of jobs in your local PowerShell session.</span></span> <span data-ttu-id="806ba-197">Den *Demo-LoadGenerator.ps1* skript systemtillstånd aktiveras faktiska belastningen generator skript som körs som en aktivitet i förgrunden plus en serie belastningen generations bakgrundsjobb.</span><span class="sxs-lookup"><span data-stu-id="806ba-197">The *Demo-LoadGenerator.ps1* script kicks off the actual load generator script, which runs as a foreground task plus a series of background load-generation jobs.</span></span> <span data-ttu-id="806ba-198">Ett jobb belastningen generator anropas för varje databas som har registrerats i katalogen.</span><span class="sxs-lookup"><span data-stu-id="806ba-198">A load-generator job is invoked for each database registered in the catalog.</span></span> <span data-ttu-id="806ba-199">Jobben körs i din lokala PowerShell-session, så att stänga PowerShell-sessionen avbryts alla jobb.</span><span class="sxs-lookup"><span data-stu-id="806ba-199">The jobs are running in your local PowerShell session, so closing the PowerShell session stops all jobs.</span></span> <span data-ttu-id="806ba-200">Om du avbryter din dator, load generation pausas och återupptas när du aktiverar din dator.</span><span class="sxs-lookup"><span data-stu-id="806ba-200">If you suspend your machine, load generation is paused and will resume when you wake up your machine.</span></span>

<span data-ttu-id="806ba-201">När belastningen generator anropar belastningen generations jobb för varje klient, förgrunds-aktiviteten finns kvar i ett jobb startar tillstånd där den startas ytterligare bakgrundsjobb för alla nya klienter som tillhandahålls senare.</span><span class="sxs-lookup"><span data-stu-id="806ba-201">Once the load generator invokes load-generation jobs for each tenant, the foreground task remains in a job-invoking state, where it starts additional background jobs for any new tenants that are subsequently provisioned.</span></span> <span data-ttu-id="806ba-202">Du kan använda *Ctrl-C* eller tryck på den *stoppa* knappen för att stoppa aktiviteten förgrunden, men befintliga bakgrundsjobb fortsätter genererar belastningen på varje databas.</span><span class="sxs-lookup"><span data-stu-id="806ba-202">You can use *Ctrl-C* or press the *Stop* button to stop the foreground task, but existing background jobs will continue generating load on each database.</span></span> <span data-ttu-id="806ba-203">Om du behöver att övervaka och kontrollera bakgrundsjobb, Använd *Get-Job*, *Receive-Job* och *stoppa jobbet*.</span><span class="sxs-lookup"><span data-stu-id="806ba-203">If you need to monitor and control the background jobs, use *Get-Job*, *Receive-Job* and *Stop-Job*.</span></span> <span data-ttu-id="806ba-204">När aktiviteten förgrunden körs kan du inte använda samma PowerShell-session för att köra andra skript.</span><span class="sxs-lookup"><span data-stu-id="806ba-204">While the foreground task is running you cannot use the same PowerShell session to execute other scripts.</span></span> <span data-ttu-id="806ba-205">Öppna ett nytt fönster i PowerShell ISE för att köra andra skript.</span><span class="sxs-lookup"><span data-stu-id="806ba-205">To run other scripts, open a new PowerShell ISE window.</span></span>

<span data-ttu-id="806ba-206">Om du vill starta om belastningen generator sessionen med olika parametrar, till exempel du kan stoppa aktiviteten förgrunden och och kör den *Demo-LoadGenerator.ps1* skript.</span><span class="sxs-lookup"><span data-stu-id="806ba-206">If you want to restart the load generator session, for example with different parameters, you can stop the foreground task and then re-run the *Demo-LoadGenerator.ps1* script.</span></span> <span data-ttu-id="806ba-207">Köra *Demo-LoadGenerator.ps1* första stoppar alla pågående jobb och startar sedan om generator som aktiveras av en ny uppsättning jobb med de aktuella parametrarna.</span><span class="sxs-lookup"><span data-stu-id="806ba-207">Re-running *Demo-LoadGenerator.ps1* first stops any currently running jobs, and then restarts the generator, which kicks off a new set of jobs using the current parameters.</span></span>

<span data-ttu-id="806ba-208">Lämna belastningen generatorn kör i läget anropar jobbet just nu.</span><span class="sxs-lookup"><span data-stu-id="806ba-208">For now, leave the load generator running in the job-invoking state.</span></span>


## <a name="provision-a-new-tenant"></a><span data-ttu-id="806ba-209">Etablera en ny klient</span><span class="sxs-lookup"><span data-stu-id="806ba-209">Provision a new tenant</span></span>

<span data-ttu-id="806ba-210">Den första distributionen skapas tre exempel hyresgäster, men nu ska vi skapa en annan klient om du vill se hur detta påverkar det distribuerade programmet.</span><span class="sxs-lookup"><span data-stu-id="806ba-210">The initial deployment creates three sample tenants, but let’s create another tenant to see how this impacts the deployed application.</span></span> <span data-ttu-id="806ba-211">Wingtip SaaS etablering hyresgäster arbetsflödet beskrivs i den [etablera och katalogen kursen](sql-database-saas-tutorial-provision-and-catalog.md).</span><span class="sxs-lookup"><span data-stu-id="806ba-211">The Wingtip SaaS provisioning-tenants workflow is detailed in the [Provision and catalog tutorial](sql-database-saas-tutorial-provision-and-catalog.md).</span></span> <span data-ttu-id="806ba-212">I det här steget kan skapa du snabbt en ny klient.</span><span class="sxs-lookup"><span data-stu-id="806ba-212">In this step, you quickly create a new tenant.</span></span>

1. <span data-ttu-id="806ba-213">Öppna... \\inlärningsmoduler\etablera och katalogisera\\*Demo-ProvisionAndCatalog.ps1* i *PowerShell ISE*.</span><span class="sxs-lookup"><span data-stu-id="806ba-213">Open ...\\Learning Modules\Provision and Catalog\\*Demo-ProvisionAndCatalog.ps1* in the *PowerShell ISE*.</span></span>
1. <span data-ttu-id="806ba-214">Tryck på **F5** att köra skriptet (lämna standardvärdena för tillfället).</span><span class="sxs-lookup"><span data-stu-id="806ba-214">Press **F5** to run the script (leave the default values for now).</span></span>

   > [!NOTE]
   > <span data-ttu-id="806ba-215">Många SaaS Wingtip skript använder *$PSScriptRoot* att navigera mappar för att anropa funktioner i andra skript.</span><span class="sxs-lookup"><span data-stu-id="806ba-215">Many Wingtip SaaS scripts use *$PSScriptRoot* to allow navigating folders to call functions in other scripts.</span></span> <span data-ttu-id="806ba-216">Den här variabeln utvärderas bara när skriptet har körts genom att trycka på **F5**.</span><span class="sxs-lookup"><span data-stu-id="806ba-216">This variable is only evaluated when the script is executed by pressing **F5**.</span></span>  <span data-ttu-id="806ba-217">Markera och kör en markering (**F8**) kan leda till fel, trycker du på **F5** när du kör skript.</span><span class="sxs-lookup"><span data-stu-id="806ba-217">Highlighting and running a selection (**F8**) can result in errors, so press **F5** when running scripts.</span></span>

<span data-ttu-id="806ba-218">Den nya innehavare databasen skapas i en elastisk SQL-pool, initiera och registreras i katalogen.</span><span class="sxs-lookup"><span data-stu-id="806ba-218">The new tenant database is created in a SQL elastic pool, initialized and registered in the catalog.</span></span> <span data-ttu-id="806ba-219">Efter lyckad etableringen är den nya innehavaren biljett sälja *händelser* platsen visas i webbläsaren:</span><span class="sxs-lookup"><span data-stu-id="806ba-219">After successful provisioning, the new tenant's ticket-selling *Events* site appears in your browser:</span></span>

![Ny klient](./media/sql-database-saas-tutorial/red-maple-racing.png)

<span data-ttu-id="806ba-221">Uppdatera den *händelser hubb* och den nya innehavaren visas i listan.</span><span class="sxs-lookup"><span data-stu-id="806ba-221">Refresh the *Events Hub* and the new tenant now appears in the list.</span></span>


## <a name="explore-the-servers-pools-and-tenant-databases"></a><span data-ttu-id="806ba-222">Utforska servrar, pooler, och klientdatabaser</span><span class="sxs-lookup"><span data-stu-id="806ba-222">Explore the servers, pools, and tenant databases</span></span>

<span data-ttu-id="806ba-223">Nu när du har startat körs en belastning för samlingen av innehavare kan vi titta på några av de resurser som har distribuerats:</span><span class="sxs-lookup"><span data-stu-id="806ba-223">Now that you've started running a load against the collection of tenants, let’s look at some of the resources that were deployed:</span></span>

1. <span data-ttu-id="806ba-224">I den [Azure-portalen](http://portal.azure.com)genom att bläddra i listan över SQL-servrar och öppna den **katalog -&lt;användare&gt;**  server.</span><span class="sxs-lookup"><span data-stu-id="806ba-224">In the [Azure portal](http://portal.azure.com), browse to your list of SQL servers and open the **catalog-&lt;USER&gt;** server.</span></span> <span data-ttu-id="806ba-225">Katalogservern innehåller två databaser.</span><span class="sxs-lookup"><span data-stu-id="806ba-225">The catalog server contains two databases.</span></span> <span data-ttu-id="806ba-226">Den **tenantcatalog**, och **basetenantdb** (en tom *gyllene* eller malldatabasen som kopieras om du vill skapa nya klienter).</span><span class="sxs-lookup"><span data-stu-id="806ba-226">The **tenantcatalog**, and the **basetenantdb** (an empty *golden* or template database that is copied to create new tenants).</span></span>

   ![databaser](./media/sql-database-saas-tutorial/databases.png)

1. <span data-ttu-id="806ba-228">Gå tillbaka till listan med SQL-servrar och öppna den **tenants1 -&lt;användare&gt;**  server som innehåller klient-databaser.</span><span class="sxs-lookup"><span data-stu-id="806ba-228">Go back to your list of SQL servers and open the **tenants1-&lt;USER&gt;** server that holds the tenant databases.</span></span> <span data-ttu-id="806ba-229">Varje klient-databasen är en _elastisk Standard_ databas i en standard 50 eDTU-pool.</span><span class="sxs-lookup"><span data-stu-id="806ba-229">Each tenant database is an _Elastic Standard_ database in a 50 eDTU standard pool.</span></span> <span data-ttu-id="806ba-230">Observera också att det finns en _Röd lönn tävling_ databasen, klient-databasen som du tidigare har etablerats.</span><span class="sxs-lookup"><span data-stu-id="806ba-230">Also notice there is a _Red Maple Racing_ database, the tenant database you provisioned previously.</span></span>

   ![server](./media/sql-database-saas-tutorial/server.png)

## <a name="monitor-the-pool"></a><span data-ttu-id="806ba-232">Övervaka poolen</span><span class="sxs-lookup"><span data-stu-id="806ba-232">Monitor the pool</span></span>

<span data-ttu-id="806ba-233">Om belastningsgeneratorn har kört i flera minuter, borde tillräckliga data finnas tillgänglig för att börja titta på några av de inbyggda övervakningsfunktionerna i poolerna och databaserna.</span><span class="sxs-lookup"><span data-stu-id="806ba-233">If the load generator has been running for several minutes, enough data should be available to start looking at some of the monitoring capabilities built into pools and databases.</span></span>

1. <span data-ttu-id="806ba-234">Bläddra till servern **tenants1 -&lt;användare&gt;**, och klicka på **Pool1** att visa resursanvändningen för poolen (belastningen generator körde för en timme i följande diagram):</span><span class="sxs-lookup"><span data-stu-id="806ba-234">Browse to the server **tenants1-&lt;USER&gt;**, and click **Pool1** to view resource utilization for the pool (the load generator ran for an hour in the following charts):</span></span>

   ![övervaka poolen](./media/sql-database-saas-tutorial/monitor-pool.png)

<span data-ttu-id="806ba-236">De här diagrammen visar hur väl lämpade elastiska pooler och SQL Database är för arbetsbelastningar från SaaS-program.</span><span class="sxs-lookup"><span data-stu-id="806ba-236">What these two charts nicely illustrate, is how well suited elastic pools and SQL Database are for SaaS application workloads.</span></span> <span data-ttu-id="806ba-237">Fyra databaser som toppar på så mycket som 40 eDTU:er stöds enkelt i en 50 eDTU-pool.</span><span class="sxs-lookup"><span data-stu-id="806ba-237">Four databases that are each bursting to as much as 40 eDTUs are easily being supported in a 50 eDTU pool.</span></span> <span data-ttu-id="806ba-238">Om de har etablerats som fristående databaser, de skulle varje måste vara en S2 (50 DTU) för att stödja belastning.</span><span class="sxs-lookup"><span data-stu-id="806ba-238">If they were provisioned as standalone databases, they would each need to be an S2 (50 DTU) to support the bursts.</span></span> <span data-ttu-id="806ba-239">Kostnaden för 4 fristående S2 databaser är nästan 3 gånger priset på poolen och poolen har fortfarande tillräckligt med utrymme för många flera databaser.</span><span class="sxs-lookup"><span data-stu-id="806ba-239">The cost of 4 standalone S2 databases would be nearly 3 times the price of the pool, and the pool still has plenty of headroom for many more databases.</span></span> <span data-ttu-id="806ba-240">I verkliga situationer använder SQL Database kunder för närvarande upp till 500 databaser i 200 eDTU pooler.</span><span class="sxs-lookup"><span data-stu-id="806ba-240">In real-world situations, SQL Database customers are currently running up to 500 databases in 200 eDTU pools.</span></span> <span data-ttu-id="806ba-241">Mer information finns i [prestandaövervakningsguiden](sql-database-saas-tutorial-performance-monitoring.md).</span><span class="sxs-lookup"><span data-stu-id="806ba-241">For more information, see the [performance monitoring tutorial](sql-database-saas-tutorial-performance-monitoring.md).</span></span>


## <a name="next-steps"></a><span data-ttu-id="806ba-242">Nästa steg</span><span class="sxs-lookup"><span data-stu-id="806ba-242">Next steps</span></span>

<span data-ttu-id="806ba-243">I den här guiden har du lärt dig:</span><span class="sxs-lookup"><span data-stu-id="806ba-243">In this tutorial you learned:</span></span>

> [!div class="checklist"]

> * <span data-ttu-id="806ba-244">Så här distribuerar du Wingtip SaaS-program</span><span class="sxs-lookup"><span data-stu-id="806ba-244">How to deploy the Wingtip SaaS application</span></span>
> * <span data-ttu-id="806ba-245">Om de servrar, pooler och databaser som ingår i appen</span><span class="sxs-lookup"><span data-stu-id="806ba-245">About the servers, pools, and databases that make up the app</span></span>
> * <span data-ttu-id="806ba-246">Klienter mappas till sina data med *katalogen*</span><span class="sxs-lookup"><span data-stu-id="806ba-246">Tenants are mapped to their data with the *catalog*</span></span>
> * <span data-ttu-id="806ba-247">Hur du etablerar nya klienter</span><span class="sxs-lookup"><span data-stu-id="806ba-247">How to provision new tenants</span></span>
> * <span data-ttu-id="806ba-248">Hur du ser poolanvändning för att övervaka klientaktivitet</span><span class="sxs-lookup"><span data-stu-id="806ba-248">How to view pool utilization to monitor tenant activity</span></span>
> * <span data-ttu-id="806ba-249">Hur du tar bort exempelresurser för att stoppa relaterad fakturering</span><span class="sxs-lookup"><span data-stu-id="806ba-249">How to delete sample resources to stop related billing</span></span>

<span data-ttu-id="806ba-250">Nu kan du testa [guiden etablera och katalogisera](sql-database-saas-tutorial-provision-and-catalog.md)</span><span class="sxs-lookup"><span data-stu-id="806ba-250">Now try the [Provision and catalog tutorial](sql-database-saas-tutorial-provision-and-catalog.md)</span></span>



## <a name="additional-resources"></a><span data-ttu-id="806ba-251">Ytterligare resurser</span><span class="sxs-lookup"><span data-stu-id="806ba-251">Additional resources</span></span>

* <span data-ttu-id="806ba-252">Ytterligare [självstudier som bygger på Wingtip SaaS-program](sql-database-wtp-overview.md#sql-database-wingtip-saas-tutorials)</span><span class="sxs-lookup"><span data-stu-id="806ba-252">Additional [tutorials that build on the Wingtip SaaS application](sql-database-wtp-overview.md#sql-database-wingtip-saas-tutorials)</span></span>
* <span data-ttu-id="806ba-253">Läs mer om elastiska pooler, i [*vad är en Azure SQL elastisk pool*](https://docs.microsoft.com/azure/sql-database/sql-database-elastic-pool)</span><span class="sxs-lookup"><span data-stu-id="806ba-253">To learn about elastic pools, see [*What is an Azure SQL elastic pool*](https://docs.microsoft.com/azure/sql-database/sql-database-elastic-pool)</span></span>
* <span data-ttu-id="806ba-254">Läs om elastiska jobb i [*hantera utskalade molndatabaser*](https://docs.microsoft.com/azure/sql-database/sql-database-elastic-jobs-overview)</span><span class="sxs-lookup"><span data-stu-id="806ba-254">To learn about elastic jobs, see [*Managing scaled-out cloud databases*](https://docs.microsoft.com/azure/sql-database/sql-database-elastic-jobs-overview)</span></span>
* <span data-ttu-id="806ba-255">Läs mer om SaaS-program med flera klienter i [*Designmönster för SaaS-program med flera klienter*](https://docs.microsoft.com/azure/sql-database/sql-database-design-patterns-multi-tenancy-saas-applications)</span><span class="sxs-lookup"><span data-stu-id="806ba-255">To learn about multi-tenant SaaS applications, see [*Design patterns for multi-tenant SaaS applications*](https://docs.microsoft.com/azure/sql-database/sql-database-design-patterns-multi-tenancy-saas-applications)</span></span>

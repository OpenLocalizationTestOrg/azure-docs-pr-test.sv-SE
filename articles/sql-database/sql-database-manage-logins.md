---
title: "aaaAzure SQL-inloggningar och användare | Microsoft Docs"
description: "Lär dig mer om hantering av säkerhet för SQL Database, specifikt hur toomanage databas säkerhet för åtkomst och logga in via hello servernivå objektkonto."
keywords: "sql database-säkerhet, hantering av databassäkerhet, inloggningssäkerhet, databassäkerhet, databasåtkomst"
services: sql-database
documentationcenter: 
author: BYHAM
manager: jhubbard
editor: 
tags: 
ms.assetid: 0a65a93f-d5dc-424b-a774-7ed62d996f8c
ms.service: sql-database
ms.custom: security
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: data-management
ms.date: 01/23/2017
ms.author: rickbyh
ms.openlocfilehash: dff889b9fed09146a10008c0d11ca9e71d91df5e
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: sv-SE
ms.lasthandoff: 10/06/2017
---
# <a name="controlling-and-granting-database-access"></a><span data-ttu-id="5622f-104">Kontrollera och att bevilja åtkomst till databasen</span><span class="sxs-lookup"><span data-stu-id="5622f-104">Controlling and granting database access</span></span>

<span data-ttu-id="5622f-105">När brandväggsregler har konfigurerats, ansluta personer tooa SQL-databas som en hello administratörskonton, som hello databasens ägare eller som en databasanvändare i hello-databasen.</span><span class="sxs-lookup"><span data-stu-id="5622f-105">When firewall rules have been configured, people can connect tooa SQL Database as one of hello administrator accounts, as hello database owner, or as a database user in hello database.</span></span>  

>  [!NOTE]  
>  <span data-ttu-id="5622f-106">Det här avsnittet gäller tooAzure SQLServer och tooboth SQL Database och SQL Data Warehouse-databaser som skapas på hello Azure SQL-servern.</span><span class="sxs-lookup"><span data-stu-id="5622f-106">This topic applies tooAzure SQL server, and tooboth SQL Database and SQL Data Warehouse databases that are created on hello Azure SQL server.</span></span> <span data-ttu-id="5622f-107">För enkelhetens skull används SQL-databasen när det gäller tooboth SQL Database och SQL Data Warehouse.</span><span class="sxs-lookup"><span data-stu-id="5622f-107">For simplicity, SQL Database is used when referring tooboth SQL Database and SQL Data Warehouse.</span></span> 
>

> [!TIP]
> <span data-ttu-id="5622f-108">En självstudiekurs finns [skydda din Azure SQL Database](sql-database-security-tutorial.md).</span><span class="sxs-lookup"><span data-stu-id="5622f-108">For a tutorial, see [Secure your Azure SQL Database](sql-database-security-tutorial.md).</span></span>
>


## <a name="unrestricted-administrative-accounts"></a><span data-ttu-id="5622f-109">Obegränsade administrativa konton</span><span class="sxs-lookup"><span data-stu-id="5622f-109">Unrestricted administrative accounts</span></span>
<span data-ttu-id="5622f-110">Det finns två administrativa konton (**Serveradministratör** och **Active Directory-administratör**) som fungerar som administratörer.</span><span class="sxs-lookup"><span data-stu-id="5622f-110">There are two administrative accounts (**Server admin** and **Active Directory admin**) that act as administrators.</span></span> <span data-ttu-id="5622f-111">tooidentify kontona administratör för SQLServer, öppna hello Azure-portalen och gå toohello egenskaper för SQLServer.</span><span class="sxs-lookup"><span data-stu-id="5622f-111">tooidentify these administrator accounts for your SQL server, open hello Azure portal, and navigate toohello properties of your SQL server.</span></span>

![SQL-serveradministratörer](./media/sql-database-manage-logins/sql-admins.png)

- <span data-ttu-id="5622f-113">**Serveradministratör** </span><span class="sxs-lookup"><span data-stu-id="5622f-113">**Server admin** </span></span>  
<span data-ttu-id="5622f-114">När du skapar en Azure SQL-server måste du ange en **Inloggning för serveradministratör**.</span><span class="sxs-lookup"><span data-stu-id="5622f-114">When you create an Azure SQL server, you must designate a **Server admin login**.</span></span> <span data-ttu-id="5622f-115">SQLServer skapar kontot som en inloggning i hello master-databasen.</span><span class="sxs-lookup"><span data-stu-id="5622f-115">SQL server creates that account as a login in hello master database.</span></span> <span data-ttu-id="5622f-116">Det här kontot ansluter med hjälp av SQL Server-autentisering (användarnamn och lösenord).</span><span class="sxs-lookup"><span data-stu-id="5622f-116">This account connects using SQL Server authentication (user name and password).</span></span> <span data-ttu-id="5622f-117">Endast ett av dessa konton kan finnas.</span><span class="sxs-lookup"><span data-stu-id="5622f-117">Only one of these accounts can exist.</span></span>   
- <span data-ttu-id="5622f-118">**Azure Active Directory-administratör** </span><span class="sxs-lookup"><span data-stu-id="5622f-118">**Azure Active Directory admin** </span></span>  
<span data-ttu-id="5622f-119">Ett Azure Active Directory-konto, antingen ett enskilt eller säkerhetsgruppkonto, kan också konfigureras som en administratör.</span><span class="sxs-lookup"><span data-stu-id="5622f-119">One Azure Active Directory account, either an individual or security group account, can also be configured as an administrator.</span></span> <span data-ttu-id="5622f-120">Det är valfritt tooconfigure en Azure AD-administratör, men en Azure AD-administratör måste konfigureras om du vill toouse Azure AD-konton tooconnect tooSQL databas.</span><span class="sxs-lookup"><span data-stu-id="5622f-120">It is optional tooconfigure an Azure AD administrator, but an Azure AD administrator must be configured if you want toouse Azure AD accounts tooconnect tooSQL Database.</span></span> <span data-ttu-id="5622f-121">Mer information om hur du konfigurerar åtkomst till Azure Active Directory finns [ansluta tooSQL Database eller SQL Data Warehouse med hjälp av Azure Active Directory Authentication](sql-database-aad-authentication.md) och [SSMS stöd för Azure AD MFA med SQL Database och SQL Data Warehouse](sql-database-ssms-mfa-authentication.md).</span><span class="sxs-lookup"><span data-stu-id="5622f-121">For more information about configuring Azure Active Directory access, see [Connecting tooSQL Database or SQL Data Warehouse By Using Azure Active Directory Authentication](sql-database-aad-authentication.md) and [SSMS support for Azure AD MFA with SQL Database and SQL Data Warehouse](sql-database-ssms-mfa-authentication.md).</span></span>
 

<span data-ttu-id="5622f-122">Hej **serveradministratören** och **Azure AD admin** konton har hello följande egenskaper:</span><span class="sxs-lookup"><span data-stu-id="5622f-122">hello **Server admin** and **Azure AD admin** accounts has hello following characteristics:</span></span>
- <span data-ttu-id="5622f-123">Detta är endast hello-konton som automatiskt kan ansluta tooany SQL-databas på hello-servern.</span><span class="sxs-lookup"><span data-stu-id="5622f-123">These are hello only accounts that can automatically connect tooany SQL Database on hello server.</span></span> <span data-ttu-id="5622f-124">(tooconnect tooa användardatabas, andra konton måste antingen vara hello ägare hello databasen eller ha ett användarkonto i hello användardatabas.)</span><span class="sxs-lookup"><span data-stu-id="5622f-124">(tooconnect tooa user database, other accounts must either be hello owner of hello database, or have a user account in hello user database.)</span></span>
- <span data-ttu-id="5622f-125">Dessa konton ange användardatabaser som hello `dbo` användaren och de har alla hello behörigheter i hello användardatabaser.</span><span class="sxs-lookup"><span data-stu-id="5622f-125">These accounts enter user databases as hello `dbo` user and they have all hello permissions in hello user databases.</span></span> <span data-ttu-id="5622f-126">(hello ägaren av en användardatabas anges också hello databasen som hello `dbo` användaren.)</span><span class="sxs-lookup"><span data-stu-id="5622f-126">(hello owner of a user database also enters hello database as hello `dbo` user.)</span></span> 
- <span data-ttu-id="5622f-127">Dessa konton inte anger hello `master` databas som hello `dbo` användar- och de har begränsad behörighet i master.</span><span class="sxs-lookup"><span data-stu-id="5622f-127">These accounts do not enter hello `master` database as hello `dbo` user and they have limited permissions in master.</span></span> 
- <span data-ttu-id="5622f-128">Dessa konton inte är medlemmar i hello standard SQL Server `sysadmin` fasta serverrollen som inte är tillgänglig i SQL-databas.</span><span class="sxs-lookup"><span data-stu-id="5622f-128">These accounts are not members of hello standard SQL Server `sysadmin` fixed server role, which is not available in SQL database.</span></span>  
- <span data-ttu-id="5622f-129">Dessa konton kan skapa, ändra och ta bort databaser, inloggningar, användare i huvuddatabasen och brandväggsregler på servernivå.</span><span class="sxs-lookup"><span data-stu-id="5622f-129">These accounts can create, alter, and drop databases, logins, users in master, and server-level firewall rules.</span></span>
- <span data-ttu-id="5622f-130">Dessa konton kan lägga till och ta bort medlemmar toohello `dbmanager` och `loginmanager` roller.</span><span class="sxs-lookup"><span data-stu-id="5622f-130">These accounts can add and remove members toohello `dbmanager` and `loginmanager` roles.</span></span>
- <span data-ttu-id="5622f-131">Dessa konton kan visa hello `sys.sql_logins` systemtabellen.</span><span class="sxs-lookup"><span data-stu-id="5622f-131">These accounts can view hello `sys.sql_logins` system table.</span></span>

### <a name="configuring-hello-firewall"></a><span data-ttu-id="5622f-132">Konfigurera hello-brandväggen</span><span class="sxs-lookup"><span data-stu-id="5622f-132">Configuring hello firewall</span></span>
<span data-ttu-id="5622f-133">När hello servernivå brandväggen är konfigurerad för en enskild IP-adress eller ett område, hello **SQL-administratören** och hello **Azure Active Directory-administratör** kan ansluta toohello master-databasen och alla hello användardatabaser.</span><span class="sxs-lookup"><span data-stu-id="5622f-133">When hello server-level firewall is configured for an individual IP address or range, hello **SQL server admin** and hello **Azure Active Directory admin** can connect toohello master database and all hello user databases.</span></span> <span data-ttu-id="5622f-134">hello inledande servernivå brandväggen kan konfigureras via hello [Azure-portalen](sql-database-get-started-portal.md)med hjälp av [PowerShell](sql-database-get-started-powershell.md) eller med hjälp av hello [REST API](https://msdn.microsoft.com/library/azure/dn505712.aspx).</span><span class="sxs-lookup"><span data-stu-id="5622f-134">hello initial server-level firewall can be configured through hello [Azure portal](sql-database-get-started-portal.md), using [PowerShell](sql-database-get-started-powershell.md) or using hello [REST API](https://msdn.microsoft.com/library/azure/dn505712.aspx).</span></span> <span data-ttu-id="5622f-135">När en anslutning upprättats, kan även ytterligare brandväggsregler på servernivå konfigureras med hjälp av [Transact-SQL](sql-database-configure-firewall-settings.md).</span><span class="sxs-lookup"><span data-stu-id="5622f-135">Once a connection is made, additional server-level firewall rules can also be configured by using [Transact-SQL](sql-database-configure-firewall-settings.md).</span></span>

### <a name="administrator-access-path"></a><span data-ttu-id="5622f-136">Åtkomstväg för administratör</span><span class="sxs-lookup"><span data-stu-id="5622f-136">Administrator access path</span></span>
<span data-ttu-id="5622f-137">När hello servernivå brandväggen är korrekt konfigurerad, hello **SQL-administratören** och hello **Azure Active Directory-administratör** kan ansluta med klientverktyg, till exempel SQL Server Management Studio eller SQL Server Data Tools.</span><span class="sxs-lookup"><span data-stu-id="5622f-137">When hello server-level firewall is properly configured, hello **SQL server admin** and hello **Azure Active Directory admin** can connect using client tools such as SQL Server Management Studio or SQL Server Data Tools.</span></span> <span data-ttu-id="5622f-138">Endast hello senaste verktyg ger alla hello funktioner och möjligheter.</span><span class="sxs-lookup"><span data-stu-id="5622f-138">Only hello latest tools provide all hello features and capabilities.</span></span> <span data-ttu-id="5622f-139">hello följande diagram visar en typisk konfiguration för hello två administratörskonton.</span><span class="sxs-lookup"><span data-stu-id="5622f-139">hello following diagram shows a typical configuration for hello two administrator accounts.</span></span>

![Åtkomstväg för administratör](./media/sql-database-manage-logins/1sql-db-administrator-access.png)

<span data-ttu-id="5622f-141">När du använder en öppen port i brandväggen för hello servernivå kan administratörer ansluta tooany SQL-databas.</span><span class="sxs-lookup"><span data-stu-id="5622f-141">When using an open port in hello server-level firewall, administrators can connect tooany SQL Database.</span></span>

### <a name="connecting-tooa-database-by-using-sql-server-management-studio"></a><span data-ttu-id="5622f-142">Ansluter tooa databasen med hjälp av SQL Server Management Studio</span><span class="sxs-lookup"><span data-stu-id="5622f-142">Connecting tooa database by using SQL Server Management Studio</span></span>
<span data-ttu-id="5622f-143">En genomgång av hur du skapar en server, en databas, brandväggsregler på servernivå och använder SQL Server Management Studio tooquery en databas finns [Kom igång med Azure SQL Database-servrar, databaser och brandväggsregler med hjälp av hello Azure-portalen SQL Server Management Studio och](sql-database-get-started-portal.md).</span><span class="sxs-lookup"><span data-stu-id="5622f-143">For a walk-through of creating a server, a database, server-level firewall rules, and using SQL Server Management Studio tooquery a database, see [Get started with Azure SQL Database servers, databases, and firewall rules by using hello Azure portal and SQL Server Management Studio](sql-database-get-started-portal.md).</span></span>

> [!IMPORTANT]
> <span data-ttu-id="5622f-144">Det rekommenderas att du alltid använder hello senaste versionen av Management Studio tooremain synkroniseras med uppdateringar tooMicrosoft Azure och SQL-databas.</span><span class="sxs-lookup"><span data-stu-id="5622f-144">It is recommended that you always use hello latest version of Management Studio tooremain synchronized with updates tooMicrosoft Azure and SQL Database.</span></span> <span data-ttu-id="5622f-145">[Uppdatera SQL Server Management Studio](https://msdn.microsoft.com/library/mt238290.aspx).</span><span class="sxs-lookup"><span data-stu-id="5622f-145">[Update SQL Server Management Studio](https://msdn.microsoft.com/library/mt238290.aspx).</span></span>


## <a name="additional-server-level-administrative-roles"></a><span data-ttu-id="5622f-146">Ytterligare administrativa roller på servernivå</span><span class="sxs-lookup"><span data-stu-id="5622f-146">Additional server-level administrative roles</span></span>
<span data-ttu-id="5622f-147">Dessutom toohello servernivå administrativa roller som beskrivits tidigare SQL-databasen innehåller två begränsade administrativa roller i hello huvuddatabasen toowhich användarkonton kan läggas till som bevilja behörighet tooeither skapa databaser eller hantera inloggningar.</span><span class="sxs-lookup"><span data-stu-id="5622f-147">In addition toohello server-level administrative roles discussed previously, SQL Database provides two restricted administrative roles in hello master database toowhich user accounts can be added that grant permissions tooeither create databases or manage logins.</span></span>

### <a name="database-creators"></a><span data-ttu-id="5622f-148">Databasskapare</span><span class="sxs-lookup"><span data-stu-id="5622f-148">Database creators</span></span>
<span data-ttu-id="5622f-149">En av dessa administrativa roller är hello **dbmanager** roll.</span><span class="sxs-lookup"><span data-stu-id="5622f-149">One of these administrative roles is hello **dbmanager** role.</span></span> <span data-ttu-id="5622f-150">Medlemmar i den här rollen kan skapa nya databaser.</span><span class="sxs-lookup"><span data-stu-id="5622f-150">Members of this role can create new databases.</span></span> <span data-ttu-id="5622f-151">toouse den här rollen kan du skapa en användare i hello `master` databasen och Lägg sedan till hello användaren toohello **dbmanager** databasrollen.</span><span class="sxs-lookup"><span data-stu-id="5622f-151">toouse this role, you create a user in hello `master` database and then add hello user toohello **dbmanager** database role.</span></span> <span data-ttu-id="5622f-152">toocreate en databas hello användaren måste vara en användare baserat på en SQL Server-inloggning i hello master-databasen eller innehöll databasanvändare baserat på en Azure Active Directory-användare.</span><span class="sxs-lookup"><span data-stu-id="5622f-152">toocreate a database, hello user must be a user based on a SQL Server login in hello master database or contained database user based on an Azure Active Directory user.</span></span>

1. <span data-ttu-id="5622f-153">Med ett administratörskonto, ansluta toohello master-databasen.</span><span class="sxs-lookup"><span data-stu-id="5622f-153">Using an administrator account, connect toohello master database.</span></span>
2. <span data-ttu-id="5622f-154">Valfritt steg: skapa en SQL Server-autentisering-inloggning med hello [skapa inloggningen](https://msdn.microsoft.com/library/ms189751.aspx) instruktionen.</span><span class="sxs-lookup"><span data-stu-id="5622f-154">Optional step: Create a SQL Server authentication login, using hello [CREATE LOGIN](https://msdn.microsoft.com/library/ms189751.aspx) statement.</span></span> <span data-ttu-id="5622f-155">Exempel på instruktion:</span><span class="sxs-lookup"><span data-stu-id="5622f-155">Sample statement:</span></span>
   
   ```
   CREATE LOGIN Mary WITH PASSWORD = '<strong_password>';
   ```
   
   > [!NOTE]
   > <span data-ttu-id="5622f-156">Använd ett starkt lösenord när du skapar en inloggning eller en oberoende databasanvändare.</span><span class="sxs-lookup"><span data-stu-id="5622f-156">Use a strong password when creating a login or contained database user.</span></span> <span data-ttu-id="5622f-157">Mer information finns i [Starka lösenord](https://msdn.microsoft.com/library/ms161962.aspx).</span><span class="sxs-lookup"><span data-stu-id="5622f-157">For more information, see [Strong Passwords](https://msdn.microsoft.com/library/ms161962.aspx).</span></span>
    
   <span data-ttu-id="5622f-158">tooimprove prestanda inloggningar (servernivå säkerhetsobjekt) cachelagras tillfälligt på hello databasnivå.</span><span class="sxs-lookup"><span data-stu-id="5622f-158">tooimprove performance, logins (server-level principals) are temporarily cached at hello database level.</span></span> <span data-ttu-id="5622f-159">cache för toorefresh hello autentisering, se [DBCC FLUSHAUTHCACHE](https://msdn.microsoft.com/library/mt627793.aspx).</span><span class="sxs-lookup"><span data-stu-id="5622f-159">toorefresh hello authentication cache, see [DBCC FLUSHAUTHCACHE](https://msdn.microsoft.com/library/mt627793.aspx).</span></span>

3. <span data-ttu-id="5622f-160">Skapa en användare med hjälp av hello i hello master-databasen, [skapa användare](https://msdn.microsoft.com/library/ms173463.aspx) instruktionen.</span><span class="sxs-lookup"><span data-stu-id="5622f-160">In hello master database, create a user by using hello [CREATE USER](https://msdn.microsoft.com/library/ms173463.aspx) statement.</span></span> <span data-ttu-id="5622f-161">hello-användare kan vara ett Azure Active Directory-autentisering finns databasanvändare (om du har konfigurerat din miljö för Azure AD-autentisering), eller en SQL Server-autentisering finns databasanvändare eller SQL Server-autentisering användare baserat på en SQL Inloggning på Server-autentisering (skapat i föregående steg i hello). Exempel på instruktioner:</span><span class="sxs-lookup"><span data-stu-id="5622f-161">hello user can be an Azure Active Directory authentication contained database user (if you have configured your environment for Azure AD authentication), or a SQL Server authentication contained database user, or a SQL Server authentication user based on a SQL Server authentication login (created in hello previous step.) Sample statements:</span></span>
   
   ```
   CREATE USER [mike@contoso.com] FROM EXTERNAL PROVIDER;
   CREATE USER Tran WITH PASSWORD = '<strong_password>';
   CREATE USER Mary FROM LOGIN Mary; 
   ```

4. <span data-ttu-id="5622f-162">Lägg till hello ny användare toohello **dbmanager** databasrollen med hjälp av hello [ALTER ROLE](https://msdn.microsoft.com/library/ms189775.aspx) instruktionen.</span><span class="sxs-lookup"><span data-stu-id="5622f-162">Add hello new user, toohello **dbmanager** database role by using hello [ALTER ROLE](https://msdn.microsoft.com/library/ms189775.aspx) statement.</span></span> <span data-ttu-id="5622f-163">Exempel på instruktioner:</span><span class="sxs-lookup"><span data-stu-id="5622f-163">Sample statements:</span></span>
   
   ```
   ALTER ROLE dbmanager ADD MEMBER Mary; 
   ALTER ROLE dbmanager ADD MEMBER [mike@contoso.com];
   ```
   
   > [!NOTE]
   > <span data-ttu-id="5622f-164">Hej dbmanager är en databasroll i master-databasen så att du kan bara lägga till en användare toohello dbmanager databasroll.</span><span class="sxs-lookup"><span data-stu-id="5622f-164">hello dbmanager is a database role in master database so you can only add a database user toohello dbmanager role.</span></span> <span data-ttu-id="5622f-165">Du kan inte lägga till en roll för inloggning på servernivå toodatabase-nivå.</span><span class="sxs-lookup"><span data-stu-id="5622f-165">You cannot add a server-level login toodatabase-level role.</span></span>
    
5. <span data-ttu-id="5622f-166">Om det behövs konfigurerar du en brandvägg regeln tooallow hello nya användare tooconnect.</span><span class="sxs-lookup"><span data-stu-id="5622f-166">If necessary, configure a firewall rule tooallow hello new user tooconnect.</span></span> <span data-ttu-id="5622f-167">(hello ny användare kan omfattas av en befintlig brandväggsregel.)</span><span class="sxs-lookup"><span data-stu-id="5622f-167">(hello new user might be covered by an existing firewall rule.)</span></span>

<span data-ttu-id="5622f-168">Nu hello användare kan ansluta toohello master-databasen och kan skapa nya databaser.</span><span class="sxs-lookup"><span data-stu-id="5622f-168">Now hello user can connect toohello master database and can create new databases.</span></span> <span data-ttu-id="5622f-169">hello konto skapar hello databas blir hello ägare av hello-databasen.</span><span class="sxs-lookup"><span data-stu-id="5622f-169">hello account creating hello database becomes hello owner of hello database.</span></span>

### <a name="login-managers"></a><span data-ttu-id="5622f-170">Inloggningshanterare</span><span class="sxs-lookup"><span data-stu-id="5622f-170">Login managers</span></span>
<span data-ttu-id="5622f-171">hello är andra administrativa hello inloggningen manager roll.</span><span class="sxs-lookup"><span data-stu-id="5622f-171">hello other administrative role is hello login manager role.</span></span> <span data-ttu-id="5622f-172">Medlemmar i den här rollen kan skapa nya inloggningar i hello master-databasen.</span><span class="sxs-lookup"><span data-stu-id="5622f-172">Members of this role can create new logins in hello master database.</span></span> <span data-ttu-id="5622f-173">Om du vill kan du slutföra hello samma steg (skapa en inloggning och användare och lägga till en användare toohello **loginmanager** rollen) tooenable en användare toocreate nya inloggningar i hello master.</span><span class="sxs-lookup"><span data-stu-id="5622f-173">If you wish, you can complete hello same steps (create a login and user, and add a user toohello **loginmanager** role) tooenable a user toocreate new logins in hello master.</span></span> <span data-ttu-id="5622f-174">Inloggningar är vanligtvis inte nödvändiga som Microsoft rekommenderar att använda oberoende databasanvändare som autentiserar på hello databasnivå i stället för användare baserat på inloggningar.</span><span class="sxs-lookup"><span data-stu-id="5622f-174">Usually logins are not necessary as Microsoft recommends using contained database users, which authenticate at hello database-level instead of using users based on logins.</span></span> <span data-ttu-id="5622f-175">Mer information finns i [Oberoende databasanvändare – göra databasen portabel](https://msdn.microsoft.com/library/ff929188.aspx).</span><span class="sxs-lookup"><span data-stu-id="5622f-175">For more information, see [Contained Database Users - Making Your Database Portable](https://msdn.microsoft.com/library/ff929188.aspx).</span></span>

## <a name="non-administrator-users"></a><span data-ttu-id="5622f-176">Användare som är icke-administratörer</span><span class="sxs-lookup"><span data-stu-id="5622f-176">Non-administrator users</span></span>
<span data-ttu-id="5622f-177">I allmänhet icke-administratörskonton inte behöver kommer åt toohello master-databasen.</span><span class="sxs-lookup"><span data-stu-id="5622f-177">Generally, non-administrator accounts do not need access toohello master database.</span></span> <span data-ttu-id="5622f-178">Skapa oberoende databasanvändare på hello databasnivå med hello [skapa användare (Transact-SQL)](https://msdn.microsoft.com/library/ms173463.aspx) instruktionen.</span><span class="sxs-lookup"><span data-stu-id="5622f-178">Create contained database users at hello database level using hello [CREATE USER (Transact-SQL)](https://msdn.microsoft.com/library/ms173463.aspx) statement.</span></span> <span data-ttu-id="5622f-179">hello-användare kan vara ett Azure Active Directory-autentisering finns databasanvändare (om du har konfigurerat din miljö för Azure AD-autentisering), eller en SQL Server-autentisering finns databasanvändare eller SQL Server-autentisering användare baserat på en SQL Inloggning på Server-autentisering (skapat i föregående steg i hello). Mer information finns i [Oberoende databasanvändare – göra databasen portabel](https://msdn.microsoft.com/library/ff929188.aspx).</span><span class="sxs-lookup"><span data-stu-id="5622f-179">hello user can be an Azure Active Directory authentication contained database user (if you have configured your environment for Azure AD authentication), or a SQL Server authentication contained database user, or a SQL Server authentication user based on a SQL Server authentication login (created in hello previous step.) For more information, see [Contained Database Users - Making Your Database Portable](https://msdn.microsoft.com/library/ff929188.aspx).</span></span> 

<span data-ttu-id="5622f-180">toocreate användare ansluta toohello databasen och köra rapporter liknande toohello följande exempel:</span><span class="sxs-lookup"><span data-stu-id="5622f-180">toocreate users, connect toohello database, and execute statements similar toohello following examples:</span></span>

```
CREATE USER Mary FROM LOGIN Mary; 
CREATE USER [mike@contoso.com] FROM EXTERNAL PROVIDER;
```

<span data-ttu-id="5622f-181">Endast en av hello administratörer eller hello ägare av hello databasen kan först skapa användare.</span><span class="sxs-lookup"><span data-stu-id="5622f-181">Initially, only one of hello administrators or hello owner of hello database can create users.</span></span> <span data-ttu-id="5622f-182">tooauthorize ytterligare användare toocreate nya användare, ge den valda användaren hello `ALTER ANY USER` behörighet genom att använda ett uttryck som:</span><span class="sxs-lookup"><span data-stu-id="5622f-182">tooauthorize additional users toocreate new users, grant that selected user hello `ALTER ANY USER` permission, by using a statement such as:</span></span>

```
GRANT ALTER ANY USER tooMary;
```

<span data-ttu-id="5622f-183">toogive ytterligare användare fullständig kontroll över hello databas, gör dem medlem hello **db_owner** fasta databasrollen med hello `ALTER ROLE` instruktionen.</span><span class="sxs-lookup"><span data-stu-id="5622f-183">toogive additional users full control of hello database, make them a member of hello **db_owner** fixed database role using hello `ALTER ROLE` statement.</span></span>

> [!NOTE]
> <span data-ttu-id="5622f-184">hello vanligaste orsak toocreate databasanvändare som baseras på inloggningar, är när du har SQL Server-autentisering-användare som behöver komma åt toomultiple databaser.</span><span class="sxs-lookup"><span data-stu-id="5622f-184">hello most common reason toocreate database users based on logins, is when you have SQL Server authentication users that need access toomultiple databases.</span></span> <span data-ttu-id="5622f-185">Användare baserat på inloggningar är bundet toohello inloggning och endast ett lösenord som sparas för att logga in.</span><span class="sxs-lookup"><span data-stu-id="5622f-185">Users based on logins are tied toohello login, and only one password that is maintained for that login.</span></span> <span data-ttu-id="5622f-186">Oberoende databasanvändare i individuella databaser är var och en individuella enheter och var och en underhåller ett eget lösenord.</span><span class="sxs-lookup"><span data-stu-id="5622f-186">Contained database users in individual databases are each individual entities and each maintains its own password.</span></span> <span data-ttu-id="5622f-187">Detta kan förvirra oberoende databasanvändare om de inte upprätthåller sina lösenord som identiska.</span><span class="sxs-lookup"><span data-stu-id="5622f-187">This can confuse contained database users if they do not maintain their passwords as identical.</span></span>

### <a name="configuring-hello-database-level-firewall"></a><span data-ttu-id="5622f-188">Konfigurera hello databasnivå brandväggen</span><span class="sxs-lookup"><span data-stu-id="5622f-188">Configuring hello database-level firewall</span></span>
<span data-ttu-id="5622f-189">Som bästa praxis ha icke-administratörer endast åtkomst via hello brandväggen toohello databaser som de använder.</span><span class="sxs-lookup"><span data-stu-id="5622f-189">As a best practice, non-administrator users should only have access through hello firewall toohello databases that they use.</span></span> <span data-ttu-id="5622f-190">I stället för att auktorisera sina IP-adresser via hello servernivå brandväggen och ge dem åtkomst tooall databaser, använda hello [sp_set_database_firewall_rule](https://msdn.microsoft.com/library/dn270010.aspx) instruktionen tooconfigure hello databasnivå brandväggen.</span><span class="sxs-lookup"><span data-stu-id="5622f-190">Instead of authorizing their IP addresses through hello server-level firewall and giving them access tooall databases, use hello [sp_set_database_firewall_rule](https://msdn.microsoft.com/library/dn270010.aspx) statement tooconfigure hello database-level firewall.</span></span> <span data-ttu-id="5622f-191">hello databasnivå brandväggen kan inte konfigureras med hjälp av hello-portalen.</span><span class="sxs-lookup"><span data-stu-id="5622f-191">hello database-level firewall cannot be configured by using hello portal.</span></span>

### <a name="non-administrator-access-path"></a><span data-ttu-id="5622f-192">Åtkomstväg för icke-administratör</span><span class="sxs-lookup"><span data-stu-id="5622f-192">Non-administrator access path</span></span>
<span data-ttu-id="5622f-193">När hello databasnivå brandväggen är korrekt konfigurerad, kan hello databasanvändare ansluta med klientverktyg som SQL Server Management Studio eller SQL Server Data Tools.</span><span class="sxs-lookup"><span data-stu-id="5622f-193">When hello database-level firewall is properly configured, hello database users can connect using client tools such as SQL Server Management Studio or SQL Server Data Tools.</span></span> <span data-ttu-id="5622f-194">Endast hello senaste verktyg ger alla hello funktioner och möjligheter.</span><span class="sxs-lookup"><span data-stu-id="5622f-194">Only hello latest tools provide all hello features and capabilities.</span></span> <span data-ttu-id="5622f-195">hello följande diagram visar en typisk icke-administratör komma åt sökvägen.</span><span class="sxs-lookup"><span data-stu-id="5622f-195">hello following diagram shows a typical non-administrator access path.</span></span>

![Åtkomstväg för icke-administratör](./media/sql-database-manage-logins/2sql-db-nonadmin-access.png)

## <a name="groups-and-roles"></a><span data-ttu-id="5622f-197">Grupper och roller</span><span class="sxs-lookup"><span data-stu-id="5622f-197">Groups and roles</span></span>
<span data-ttu-id="5622f-198">Effektiv hantering använder behörigheter toogroups och roller i stället för enskilda användare.</span><span class="sxs-lookup"><span data-stu-id="5622f-198">Efficient access management uses permissions assigned toogroups and roles instead of individual users.</span></span> 

- <span data-ttu-id="5622f-199">När du använder Azure Active Directory-autentisering, lägger du Azure Active Directory-användare i en Azure Active Directory-grupp.</span><span class="sxs-lookup"><span data-stu-id="5622f-199">When using Azure Active Directory authentication, put Azure Active Directory users into an Azure Active Directory group.</span></span> <span data-ttu-id="5622f-200">Skapa en innesluten databasanvändare för hello grupp.</span><span class="sxs-lookup"><span data-stu-id="5622f-200">Create a contained database user for hello group.</span></span> <span data-ttu-id="5622f-201">Placera en eller flera användare i en [databasrollen](https://msdn.microsoft.com/library/ms189121) och tilldela sedan [behörigheter](https://msdn.microsoft.com/library/ms191291.aspx) toohello databasrollen.</span><span class="sxs-lookup"><span data-stu-id="5622f-201">Place one or more database users into a [database role](https://msdn.microsoft.com/library/ms189121) and then assign [permissions](https://msdn.microsoft.com/library/ms191291.aspx) toohello database role.</span></span>

- <span data-ttu-id="5622f-202">När du använder SQL Server-autentisering kan du skapa oberoende databasanvändare i hello-databasen.</span><span class="sxs-lookup"><span data-stu-id="5622f-202">When using SQL Server authentication, create contained database users in hello database.</span></span> <span data-ttu-id="5622f-203">Placera en eller flera användare i en [databasrollen](https://msdn.microsoft.com/library/ms189121) och tilldela sedan [behörigheter](https://msdn.microsoft.com/library/ms191291.aspx) toohello databasrollen.</span><span class="sxs-lookup"><span data-stu-id="5622f-203">Place one or more database users into a [database role](https://msdn.microsoft.com/library/ms189121) and then assign [permissions](https://msdn.microsoft.com/library/ms191291.aspx) toohello database role.</span></span>

<span data-ttu-id="5622f-204">hello databasroller kan vara hello inbyggda roller som **db_owner**, **db_ddladmin**, **db_datawriter**, **db_datareader**, **db_denydatawriter**, och **db_denydatareader**.</span><span class="sxs-lookup"><span data-stu-id="5622f-204">hello database roles can be hello built-in roles such as **db_owner**, **db_ddladmin**, **db_datawriter**, **db_datareader**, **db_denydatawriter**, and **db_denydatareader**.</span></span> <span data-ttu-id="5622f-205">**db_owner** är vanliga toogrant fullständig behörighet tooonly några användare.</span><span class="sxs-lookup"><span data-stu-id="5622f-205">**db_owner** is commonly used toogrant full permission tooonly a few users.</span></span> <span data-ttu-id="5622f-206">hello andra fasta databasroller är användbara för att hämta en enkel databas under utveckling snabbt, men rekommenderas inte för de flesta produktionsdatabaserna.</span><span class="sxs-lookup"><span data-stu-id="5622f-206">hello other fixed database roles are useful for getting a simple database in development quickly, but are not recommended for most production databases.</span></span> <span data-ttu-id="5622f-207">Till exempel hello **db_datareader** fasta databasrollen ger läsbehörighet tooevery tabellen i hello-databasen, som vanligtvis är större än är absolut nödvändigt.</span><span class="sxs-lookup"><span data-stu-id="5622f-207">For example, hello **db_datareader** fixed database role grants read access tooevery table in hello database, which is usually more than is strictly necessary.</span></span> <span data-ttu-id="5622f-208">Det är mycket bättre toouse hello [skapa roll](https://msdn.microsoft.com/library/ms187936.aspx) instruktionen toocreate egna användardefinierade databasrollerna och noggrant tilldela varje roll hello lägsta behörigheter som krävs för hello affärsbehov.</span><span class="sxs-lookup"><span data-stu-id="5622f-208">It is far better toouse hello [CREATE ROLE](https://msdn.microsoft.com/library/ms187936.aspx) statement toocreate your own user-defined database roles and carefully grant each role hello least permissions necessary for hello business need.</span></span> <span data-ttu-id="5622f-209">När en användare är medlem i flera roller kan aggregera de hello behörigheter för alla.</span><span class="sxs-lookup"><span data-stu-id="5622f-209">When a user is a member of multiple roles, they aggregate hello permissions of them all.</span></span>

## <a name="permissions"></a><span data-ttu-id="5622f-210">Behörigheter</span><span class="sxs-lookup"><span data-stu-id="5622f-210">Permissions</span></span>
<span data-ttu-id="5622f-211">Det finns över 100 behörigheter som individuellt kan beviljas eller nekas i SQL Database.</span><span class="sxs-lookup"><span data-stu-id="5622f-211">There are over 100 permissions that can be individually granted or denied in SQL Database.</span></span> <span data-ttu-id="5622f-212">Många av de här behörigheterna är kapslade.</span><span class="sxs-lookup"><span data-stu-id="5622f-212">Many of these permissions are nested.</span></span> <span data-ttu-id="5622f-213">Till exempel hello `UPDATE` behörighet i ett schema som innehåller hello `UPDATE` behörighet för varje tabell i schemat.</span><span class="sxs-lookup"><span data-stu-id="5622f-213">For example, hello `UPDATE` permission on a schema includes hello `UPDATE` permission on each table within that schema.</span></span> <span data-ttu-id="5622f-214">I de flesta behörighet system åsidosätter hello denial för en behörighet bidrag.</span><span class="sxs-lookup"><span data-stu-id="5622f-214">As in most permission systems, hello denial of a permission overrides a grant.</span></span> <span data-ttu-id="5622f-215">Det kan ta noggrann undersökning toodesign en behörighet system tooproperly skydda databasen på grund av hello kapslade natur och hello antalet behörigheter.</span><span class="sxs-lookup"><span data-stu-id="5622f-215">Because of hello nested nature and hello number of permissions, it can take careful study toodesign an appropriate permission system tooproperly protect your database.</span></span> <span data-ttu-id="5622f-216">Börja med hello listan med behörigheter på [behörigheter (Database Engine)](https://msdn.microsoft.com/library/ms191291.aspx) och granska hello [affisch storlek bild](http://go.microsoft.com/fwlink/?LinkId=229142) hello behörigheter.</span><span class="sxs-lookup"><span data-stu-id="5622f-216">Start with hello list of permissions at [Permissions (Database Engine)](https://msdn.microsoft.com/library/ms191291.aspx) and review hello [poster size graphic](http://go.microsoft.com/fwlink/?LinkId=229142) of hello permissions.</span></span>


### <a name="considerations-and-restrictions"></a><span data-ttu-id="5622f-217">Överväganden och begränsningar</span><span class="sxs-lookup"><span data-stu-id="5622f-217">Considerations and restrictions</span></span>
<span data-ttu-id="5622f-218">När du hanterar inloggningar och användare i SQL-databas, Tänk hello följande:</span><span class="sxs-lookup"><span data-stu-id="5622f-218">When managing logins and users in SQL Database, consider hello following:</span></span>

* <span data-ttu-id="5622f-219">Du måste vara anslutna toohello **master** databas när du kör hello `CREATE/ALTER/DROP DATABASE` instruktioner.</span><span class="sxs-lookup"><span data-stu-id="5622f-219">You must be connected toohello **master** database when executing hello `CREATE/ALTER/DROP DATABASE` statements.</span></span>   
* <span data-ttu-id="5622f-220">Hej databasen användaren motsvarande toohello **serveradministratören** inloggning kan inte ändras eller tas bort.</span><span class="sxs-lookup"><span data-stu-id="5622f-220">hello database user corresponding toohello **Server admin** login cannot be altered or dropped.</span></span> 
* <span data-ttu-id="5622f-221">Amerikansk engelska är hello standardspråk för hello **serveradministratören** inloggningen.</span><span class="sxs-lookup"><span data-stu-id="5622f-221">US-English is hello default language of hello **Server admin** login.</span></span>
* <span data-ttu-id="5622f-222">Endast hello administratörer (**serveradministratören** inloggning eller Azure AD-administratör) och hello medlemmar i hello **dbmanager** databasrollen i hello **master** finns i databasen behörighet tooexecute hello `CREATE DATABASE` och `DROP DATABASE` instruktioner.</span><span class="sxs-lookup"><span data-stu-id="5622f-222">Only hello administrators (**Server admin** login or Azure AD administrator) and hello members of hello **dbmanager** database role in hello **master** database have permission tooexecute hello `CREATE DATABASE` and `DROP DATABASE` statements.</span></span>
* <span data-ttu-id="5622f-223">Du måste vara anslutna toohello master-databasen när du kör hello `CREATE/ALTER/DROP LOGIN` instruktioner.</span><span class="sxs-lookup"><span data-stu-id="5622f-223">You must be connected toohello master database when executing hello `CREATE/ALTER/DROP LOGIN` statements.</span></span> <span data-ttu-id="5622f-224">Att använda inloggningar rekommenderas inte.</span><span class="sxs-lookup"><span data-stu-id="5622f-224">However using logins is discouraged.</span></span> <span data-ttu-id="5622f-225">Använd i stället oberoende databasanvändare.</span><span class="sxs-lookup"><span data-stu-id="5622f-225">Use contained database users instead.</span></span>
* <span data-ttu-id="5622f-226">tooconnect tooa användardatabas, måste du ange hello namnet på databasen som hello i hello anslutningssträngen.</span><span class="sxs-lookup"><span data-stu-id="5622f-226">tooconnect tooa user database, you must provide hello name of hello database in hello connection string.</span></span>
* <span data-ttu-id="5622f-227">Endast hello servernivå UPN-inloggning och hello medlemmar i hello **loginmanager** databasrollen i hello **master** databasen ha behörigheten tooexecute hello `CREATE LOGIN`, `ALTER LOGIN`, och `DROP LOGIN` instruktioner.</span><span class="sxs-lookup"><span data-stu-id="5622f-227">Only hello server-level principal login and hello members of hello **loginmanager** database role in hello **master** database have permission tooexecute hello `CREATE LOGIN`, `ALTER LOGIN`, and `DROP LOGIN` statements.</span></span>
* <span data-ttu-id="5622f-228">När du kör hello `CREATE/ALTER/DROP LOGIN` och `CREATE/ALTER/DROP DATABASE` instruktioner i ett ADO.NET-program, parameteriserade kommandona tillåts inte.</span><span class="sxs-lookup"><span data-stu-id="5622f-228">When executing hello `CREATE/ALTER/DROP LOGIN` and `CREATE/ALTER/DROP DATABASE` statements in an ADO.NET application, using parameterized commands is not allowed.</span></span> <span data-ttu-id="5622f-229">Mer information finns i [Kommandon och parametrar](https://msdn.microsoft.com/library/ms254953.aspx).</span><span class="sxs-lookup"><span data-stu-id="5622f-229">For more information, see [Commands and Parameters](https://msdn.microsoft.com/library/ms254953.aspx).</span></span>
* <span data-ttu-id="5622f-230">När du kör hello `CREATE/ALTER/DROP DATABASE` och `CREATE/ALTER/DROP LOGIN` rapporter, var och en av de här uttrycken måste vara hello endast instruktionen i en Transact-SQL-batch.</span><span class="sxs-lookup"><span data-stu-id="5622f-230">When executing hello `CREATE/ALTER/DROP DATABASE` and `CREATE/ALTER/DROP LOGIN` statements, each of these statements must be hello only statement in a Transact-SQL batch.</span></span> <span data-ttu-id="5622f-231">Annars uppstår ett fel.</span><span class="sxs-lookup"><span data-stu-id="5622f-231">Otherwise, an error occurs.</span></span> <span data-ttu-id="5622f-232">Till exempel hello följande Transact-SQL kontrollerar om hello databasen finns.</span><span class="sxs-lookup"><span data-stu-id="5622f-232">For example, hello following Transact-SQL checks whether hello database exists.</span></span> <span data-ttu-id="5622f-233">Om det finns en `DROP DATABASE` instruktionen kallas tooremove hello-databasen.</span><span class="sxs-lookup"><span data-stu-id="5622f-233">If it exists, a `DROP DATABASE` statement is called tooremove hello database.</span></span> <span data-ttu-id="5622f-234">Eftersom hello `DROP DATABASE` -instruktionen är inte hello enda instruktionen i hello batch, köra hello följande Transact-SQL-uttryck som resulterar i ett fel.</span><span class="sxs-lookup"><span data-stu-id="5622f-234">Because hello `DROP DATABASE` statement is not hello only statement in hello batch, executing hello following Transact-SQL statement results in an error.</span></span>

  ```
  IF EXISTS (SELECT [name]
           FROM   [sys].[databases]
           WHERE  [name] = N'database_name')
  DROP DATABASE [database_name];
  GO
  ```

* <span data-ttu-id="5622f-235">När du kör hello `CREATE USER` instruktion med hello `FOR/FROM LOGIN` alternativ, den måste vara hello endast instruktionen i en Transact-SQL-batch.</span><span class="sxs-lookup"><span data-stu-id="5622f-235">When executing hello `CREATE USER` statement with hello `FOR/FROM LOGIN` option, it must be hello only statement in a Transact-SQL batch.</span></span>
* <span data-ttu-id="5622f-236">När du kör hello `ALTER USER` instruktion med hello `WITH LOGIN` alternativ, den måste vara hello endast instruktionen i en Transact-SQL-batch.</span><span class="sxs-lookup"><span data-stu-id="5622f-236">When executing hello `ALTER USER` statement with hello `WITH LOGIN` option, it must be hello only statement in a Transact-SQL batch.</span></span>
* <span data-ttu-id="5622f-237">för`CREATE/ALTER/DROP` en användare kräver hello `ALTER ANY USER` behörighet på hello-databasen.</span><span class="sxs-lookup"><span data-stu-id="5622f-237">too`CREATE/ALTER/DROP` a user requires hello `ALTER ANY USER` permission on hello database.</span></span>
* <span data-ttu-id="5622f-238">När en databasroll hello ägare försöker tooadd eller ta bort en annan databas användaren tooor från som databasrollen, hello följande fel kan uppstå: **användaren eller rollen 'Name' finns inte i den här databasen.**</span><span class="sxs-lookup"><span data-stu-id="5622f-238">When hello owner of a database role tries tooadd or remove another database user tooor from that database role, hello following error may occur: **User or role 'Name' does not exist in this database.**</span></span> <span data-ttu-id="5622f-239">Detta fel uppstår eftersom hello användaren inte är synliga toohello ägare.</span><span class="sxs-lookup"><span data-stu-id="5622f-239">This error occurs because hello user is not visible toohello owner.</span></span> <span data-ttu-id="5622f-240">tooresolve problemet kan bevilja hello rollen ägare hello `VIEW DEFINITION` behörighet på hello användare.</span><span class="sxs-lookup"><span data-stu-id="5622f-240">tooresolve this issue, grant hello role owner hello `VIEW DEFINITION` permission on hello user.</span></span> 


## <a name="next-steps"></a><span data-ttu-id="5622f-241">Nästa steg</span><span class="sxs-lookup"><span data-stu-id="5622f-241">Next steps</span></span>

- <span data-ttu-id="5622f-242">toolearn mer information om brandväggsregler, se [Azure SQL Database-brandvägg](sql-database-firewall-configure.md).</span><span class="sxs-lookup"><span data-stu-id="5622f-242">toolearn more about firewall rules, see [Azure SQL Database Firewall](sql-database-firewall-configure.md).</span></span>
- <span data-ttu-id="5622f-243">En översikt över alla hello SQL Database-säkerhetsfunktioner finns [översikt över säkerheten i SQL](sql-database-security-overview.md).</span><span class="sxs-lookup"><span data-stu-id="5622f-243">For an overview of all hello SQL Database security features, see [SQL security overview](sql-database-security-overview.md).</span></span>
- <span data-ttu-id="5622f-244">En självstudiekurs finns [skydda din Azure SQL Database](sql-database-security-tutorial.md).</span><span class="sxs-lookup"><span data-stu-id="5622f-244">For a tutorial, see [Secure your Azure SQL Database](sql-database-security-tutorial.md).</span></span>
- <span data-ttu-id="5622f-245">Information om vyer och lagrade procedurer finns i [Skapa vyer och lagrade procedurer](https://msdn.microsoft.com/library/ms365311.aspx)</span><span class="sxs-lookup"><span data-stu-id="5622f-245">For information about views and stored procedures, see [Creating views and stored procedures](https://msdn.microsoft.com/library/ms365311.aspx)</span></span>
- <span data-ttu-id="5622f-246">Information om hur du beviljar åtkomst tooa databasobjekt finns [bevilja åtkomst tooa databasobjekt](https://msdn.microsoft.com/library/ms365327.aspx)</span><span class="sxs-lookup"><span data-stu-id="5622f-246">For information about granting access tooa database object, see [Granting Access tooa Database Object](https://msdn.microsoft.com/library/ms365327.aspx)</span></span>

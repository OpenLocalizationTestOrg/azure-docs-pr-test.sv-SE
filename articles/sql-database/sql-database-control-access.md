---
title: "aaaGranting åtkomst tooAzure SQL-databas | Microsoft Docs"
description: "Lär dig hur du beviljar åtkomst tooMicrosoft Azure SQL Database."
services: sql-database
documentationcenter: 
author: BYHAM
manager: jhubbard
editor: 
tags: 
ms.assetid: 8e71b04c-bc38-4153-8f83-f2b14faa31d9
ms.service: sql-database
ms.custom: security
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: data-management
ms.date: 02/06/2017
ms.author: rickbyh
ms.openlocfilehash: 4c32fafa7e98b731ff2f9bf4666da7e4a3145286
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: sv-SE
ms.lasthandoff: 10/06/2017
---
# <a name="azure-sql-database-access-control"></a><span data-ttu-id="263b3-103">Azure SQL Database-åtkomstkontroll</span><span class="sxs-lookup"><span data-stu-id="263b3-103">Azure SQL Database access control</span></span>
<span data-ttu-id="263b3-104">tooprovide säkerhet, SQL-databas kontrollerar åtkomsten med brandväggsregler begränsa anslutningen IP-adressen autentiseringsmekanismer som kräver användare tooprove deras identitet och auktorisering mekanismer för att begränsa användare toospecific åtgärder och data.</span><span class="sxs-lookup"><span data-stu-id="263b3-104">tooprovide security, SQL Database controls access with firewall rules limiting connectivity by IP address, authentication mechanisms requiring users tooprove their identity, and authorization mechanisms limiting users toospecific actions and data.</span></span> 

> [!IMPORTANT]
> <span data-ttu-id="263b3-105">En översikt över hello SQL Database-säkerhetsfunktioner finns [översikt över säkerheten i SQL](sql-database-security-overview.md).</span><span class="sxs-lookup"><span data-stu-id="263b3-105">For an overview of hello SQL Database security features, see [SQL security overview](sql-database-security-overview.md).</span></span> <span data-ttu-id="263b3-106">En självstudiekurs finns [skydda din Azure SQL Database](sql-database-security-tutorial.md).</span><span class="sxs-lookup"><span data-stu-id="263b3-106">For a tutorial, see [Secure your Azure SQL Database](sql-database-security-tutorial.md).</span></span>

## <a name="firewall-and-firewall-rules"></a><span data-ttu-id="263b3-107">Brandvägg och brandväggsregler</span><span class="sxs-lookup"><span data-stu-id="263b3-107">Firewall and firewall rules</span></span>
<span data-ttu-id="263b3-108">Microsoft Azure SQL Database tillhandahåller en relationsdatabastjänst för Azure och andra Internetbaserade program.</span><span class="sxs-lookup"><span data-stu-id="263b3-108">Microsoft Azure SQL Database provides a relational database service for Azure and other Internet-based applications.</span></span> <span data-ttu-id="263b3-109">toohelp skydda dina data, brandväggar förhindra all åtkomst tooyour databasserver förrän du anger vilka datorer som har behörighet.</span><span class="sxs-lookup"><span data-stu-id="263b3-109">toohelp protect your data, firewalls prevent all access tooyour database server until you specify which computers have permission.</span></span> <span data-ttu-id="263b3-110">hello brandväggen beviljar åtkomst toodatabases baserat på hello kommer IP-adressen för varje begäran.</span><span class="sxs-lookup"><span data-stu-id="263b3-110">hello firewall grants access toodatabases based on hello originating IP address of each request.</span></span> <span data-ttu-id="263b3-111">Mer information finns i [Översikt över Azure SQL Database-brandväggsregler](sql-database-firewall-configure.md)</span><span class="sxs-lookup"><span data-stu-id="263b3-111">For more information, see [Overview of Azure SQL Database firewall rules](sql-database-firewall-configure.md)</span></span>

<span data-ttu-id="263b3-112">hello Azure SQL Database-tjänsten är bara tillgängliga via TCP-port 1433.</span><span class="sxs-lookup"><span data-stu-id="263b3-112">hello Azure SQL Database service is only available through TCP port 1433.</span></span> <span data-ttu-id="263b3-113">tooaccess en SQL-databas från datorn, se till att klienten datorn brandväggen tillåter att utgående TCP-kommunikation på TCP-port 1433.</span><span class="sxs-lookup"><span data-stu-id="263b3-113">tooaccess a SQL Database from your computer, ensure that your client computer firewall allows outgoing TCP communication on TCP port 1433.</span></span> <span data-ttu-id="263b3-114">Om det inte behövs för andra program, blockera inkommande anslutningar på TCP-port 1433.</span><span class="sxs-lookup"><span data-stu-id="263b3-114">If not needed for other applications, block inbound connections on TCP port 1433.</span></span> 

<span data-ttu-id="263b3-115">Som en del av hello anslutningsprocessen är anslutningar från Azure virtuella datorer omdirigerade tooa annan IP-adress och port, unikt för varje worker-rollen.</span><span class="sxs-lookup"><span data-stu-id="263b3-115">As part of hello connection process, connections from Azure virtual machines are redirected tooa different IP address and port, unique for each worker role.</span></span> <span data-ttu-id="263b3-116">hello portnumret är hello mellan 11000 too11999.</span><span class="sxs-lookup"><span data-stu-id="263b3-116">hello port number is in hello range from 11000 too11999.</span></span> <span data-ttu-id="263b3-117">Mer information om TCP-portar finns [portar utöver 1433 för ADO.NET 4.5 och SQL Database2](sql-database-develop-direct-route-ports-adonet-v12.md).</span><span class="sxs-lookup"><span data-stu-id="263b3-117">For more information about TCP ports, see [Ports beyond 1433 for ADO.NET 4.5 and SQL Database2](sql-database-develop-direct-route-ports-adonet-v12.md).</span></span>

## <a name="authentication"></a><span data-ttu-id="263b3-118">Autentisering</span><span class="sxs-lookup"><span data-stu-id="263b3-118">Authentication</span></span>

<span data-ttu-id="263b3-119">SQL Database stöder två typer av autentisering:</span><span class="sxs-lookup"><span data-stu-id="263b3-119">SQL Database supports two types of authentication:</span></span>

* <span data-ttu-id="263b3-120">**SQL-autentisering**, som använder ett användarnamn och lösenord.</span><span class="sxs-lookup"><span data-stu-id="263b3-120">**SQL Authentication**, which uses a username and password.</span></span> <span data-ttu-id="263b3-121">När du skapade hello logisk server för din databas, anges en ”serveradministratören” inloggning med ett användarnamn och lösenord.</span><span class="sxs-lookup"><span data-stu-id="263b3-121">When you created hello logical server for your database, you specified a "server admin" login with a username and password.</span></span> <span data-ttu-id="263b3-122">Med dessa autentiseringsuppgifter, kan du autentisera tooany databasen på den servern som hello databasens ägare eller ”dbo”.</span><span class="sxs-lookup"><span data-stu-id="263b3-122">Using these credentials, you can authenticate tooany database on that server as hello database owner, or "dbo."</span></span> 
* <span data-ttu-id="263b3-123">**Azure Active Directory-autentisering**, som använder identiteter som hanteras av Azure Active Directory och stöder hanterade och integrerade domäner.</span><span class="sxs-lookup"><span data-stu-id="263b3-123">**Azure Active Directory Authentication**, which uses identities managed by Azure Active Directory and is supported for managed and integrated domains.</span></span> <span data-ttu-id="263b3-124">Använd Active Directory-autentisering (integrerad säkerhet) [närhelst det går](https://docs.microsoft.com/sql/relational-databases/security/choose-an-authentication-mode).</span><span class="sxs-lookup"><span data-stu-id="263b3-124">Use Active Directory authentication (integrated security) [whenever possible](https://docs.microsoft.com/sql/relational-databases/security/choose-an-authentication-mode).</span></span> <span data-ttu-id="263b3-125">Om du vill toouse Azure Active Directory-autentisering, måste du skapa en annan serveradministratören kallas hello ”Azure AD admin”, vilket är tillåtet tooadminister Azure AD-användare och grupper.</span><span class="sxs-lookup"><span data-stu-id="263b3-125">If you want toouse Azure Active Directory Authentication, you must create another server admin called hello "Azure AD admin," which is allowed tooadminister Azure AD users and groups.</span></span> <span data-ttu-id="263b3-126">Den här administratören kan också utföra alla åtgärder som en vanlig serveradministratören kan.</span><span class="sxs-lookup"><span data-stu-id="263b3-126">This admin can also perform all operations that a regular server admin can.</span></span> <span data-ttu-id="263b3-127">Se [ansluter tooSQL databasen med hjälp av Azure Active Directory Authentication](sql-database-aad-authentication.md) för en genomgång av hur toocreate en Azure AD admin tooenable Azure Active Directory-autentisering.</span><span class="sxs-lookup"><span data-stu-id="263b3-127">See [Connecting tooSQL Database By Using Azure Active Directory Authentication](sql-database-aad-authentication.md) for a walkthrough of how toocreate an Azure AD admin tooenable Azure Active Directory Authentication.</span></span>

<span data-ttu-id="263b3-128">hello databasmotorn stänger anslutningar som kan vara inaktiv under mer än 30 minuter.</span><span class="sxs-lookup"><span data-stu-id="263b3-128">hello Database Engine closes connections that remain idle for more than 30 minutes.</span></span> <span data-ttu-id="263b3-129">Hej anslutning måste logga in igen innan den kan användas.</span><span class="sxs-lookup"><span data-stu-id="263b3-129">hello connection must login again before it can be used.</span></span> <span data-ttu-id="263b3-130">Kontinuerligt aktiva anslutningar tooSQL databasen kräver omauktorisering (utförs av hello databasmotorn) minst var 10: e timme.</span><span class="sxs-lookup"><span data-stu-id="263b3-130">Continuously active connections tooSQL Database require reauthorization (performed by hello database engine) at least every 10 hours.</span></span> <span data-ttu-id="263b3-131">hello databasmotorn försöker omauktorisering med hello ursprungligen skickade lösenord och inga indata från användaren krävs.</span><span class="sxs-lookup"><span data-stu-id="263b3-131">hello database engine attempts reauthorization using hello originally submitted password and no user input is required.</span></span> <span data-ttu-id="263b3-132">Av prestandaskäl, när en lösenordsåterställning i SQL-databas hello anslutningen är inte autentiseras, även om hello anslutningen återställs på grund av tooconnection poolning.</span><span class="sxs-lookup"><span data-stu-id="263b3-132">For performance reasons, when a password is reset in SQL Database, hello connection is not be reauthenticated, even if hello connection is reset due tooconnection pooling.</span></span> <span data-ttu-id="263b3-133">Detta skiljer sig från hello beteendet av lokala SQL Server.</span><span class="sxs-lookup"><span data-stu-id="263b3-133">This is different from hello behavior of on-premises SQL Server.</span></span> <span data-ttu-id="263b3-134">Om hello lösenord har ändrats sedan hello anslutning först behörighet, hello anslutning måste avslutas och en ny anslutning görs med hjälp av hello nytt lösenord.</span><span class="sxs-lookup"><span data-stu-id="263b3-134">If hello password has been changed since hello connection was initially authorized, hello connection must be terminated and a new connection made using hello new password.</span></span> <span data-ttu-id="263b3-135">En användare med hello `KILL DATABASE CONNECTION` behörighet explicit avsluta en anslutning tooSQL databasen med hjälp av hello [KILL](https://docs.microsoft.com/sql/t-sql/language-elements/kill-transact-sql) kommando.</span><span class="sxs-lookup"><span data-stu-id="263b3-135">A user with hello `KILL DATABASE CONNECTION` permission can explicitly terminate a connection tooSQL Database by using hello [KILL](https://docs.microsoft.com/sql/t-sql/language-elements/kill-transact-sql) command.</span></span>

<span data-ttu-id="263b3-136">Användarkonton kan skapas i hello master-databasen och kan tilldelas behörigheter i alla databaser på servern hello. de kan skapas i hello databasen (kallas inneslutna användare)</span><span class="sxs-lookup"><span data-stu-id="263b3-136">User accounts can be created in hello master database and can be granted permissions in all databases on hello server, or they can be created in hello database itself (called contained users).</span></span> <span data-ttu-id="263b3-137">För information om hur man skapar och hanterar inloggningar, se [Hantera inloggningar](sql-database-manage-logins.md).</span><span class="sxs-lookup"><span data-stu-id="263b3-137">For information on creating and managing logins, see [Manage logins](sql-database-manage-logins.md).</span></span> <span data-ttu-id="263b3-138">överföring av tooenhance och skalbarhet, använder du innesluten databas användare tooenhance skalbarhet.</span><span class="sxs-lookup"><span data-stu-id="263b3-138">tooenhance portability and scalabilty, use contained database users tooenhance scalability.</span></span> <span data-ttu-id="263b3-139">Mer information om inneslutna användare finns i [Inneslutna databasanvändare – Gör din databas portabel](https://docs.microsoft.com/sql/relational-databases/security/contained-database-users-making-your-database-portable), [Skapa användare (Transact-SQL)](https://docs.microsoft.com/sql/t-sql/statements/create-user-transact-sql) och [Inneslutna databaser](https://docs.microsoft.com/sql/relational-databases/databases/contained-databases).</span><span class="sxs-lookup"><span data-stu-id="263b3-139">For more information on contained users, see [Contained Database Users - Making Your Database Portable](https://docs.microsoft.com/sql/relational-databases/security/contained-database-users-making-your-database-portable), [CREATE USER (Transact-SQL)](https://docs.microsoft.com/sql/t-sql/statements/create-user-transact-sql), and [Contained Databases](https://docs.microsoft.com/sql/relational-databases/databases/contained-databases).</span></span>

<span data-ttu-id="263b3-140">Som bästa praxis bör ditt program använda ett särskilt konto tooauthenticate – det här sättet kan du begränsa behörigheterna för hello toohello program och minska hello risker skadlig programvara om din programkod är sårbar tooa SQL injection attack.</span><span class="sxs-lookup"><span data-stu-id="263b3-140">As a best practice your application should use a dedicated account tooauthenticate -- this way you can limit hello permissions granted toohello application and reduce hello risks of malicious activity in case your application code is vulnerable tooa SQL injection attack.</span></span> <span data-ttu-id="263b3-141">hello rekommenderad metod är toocreate en [innesluten databas användaren](https://docs.microsoft.com/sql/relational-databases/security/contained-database-users-making-your-database-portable), vilket gör att din app tooauthenticate direkt toohello databas.</span><span class="sxs-lookup"><span data-stu-id="263b3-141">hello recommended approach is toocreate a [contained database user](https://docs.microsoft.com/sql/relational-databases/security/contained-database-users-making-your-database-portable), which allows your app tooauthenticate directly toohello database.</span></span> 

## <a name="authorization"></a><span data-ttu-id="263b3-142">Auktorisering</span><span class="sxs-lookup"><span data-stu-id="263b3-142">Authorization</span></span>

<span data-ttu-id="263b3-143">Auktorisering refererar toowhat en användare kan utföra i en Azure SQL Database och detta styrs av ditt användarkonto databasen [rollmedlemskap](https://docs.microsoft.com/sql/relational-databases/security/authentication-access/database-level-roles) och [på objektnivå behörigheter](https://docs.microsoft.com/sql/relational-databases/security/permissions-database-engine).</span><span class="sxs-lookup"><span data-stu-id="263b3-143">Authorization refers toowhat a user can do within an Azure SQL Database, and this is controlled by your user account's database [role memberships](https://docs.microsoft.com/sql/relational-databases/security/authentication-access/database-level-roles) and [object-level permissions](https://docs.microsoft.com/sql/relational-databases/security/permissions-database-engine).</span></span> <span data-ttu-id="263b3-144">Som bästa praxis bör du bevilja användare hello lägsta behörighet.</span><span class="sxs-lookup"><span data-stu-id="263b3-144">As a best practice, you should grant users hello least privileges necessary.</span></span> <span data-ttu-id="263b3-145">administratörskonto för hello servern du ansluter med är medlem i db_owner som har myndigheten toodo något hello-databasen.</span><span class="sxs-lookup"><span data-stu-id="263b3-145">hello server admin account you are connecting with is a member of db_owner, which has authority toodo anything within hello database.</span></span> <span data-ttu-id="263b3-146">Spara det här kontot för att distribuera schemauppgraderingar och andra hanteringsåtgärder.</span><span class="sxs-lookup"><span data-stu-id="263b3-146">Save this account for deploying schema upgrades and other management operations.</span></span> <span data-ttu-id="263b3-147">Använda hello ”ApplicationUser” konto med mer begränsade behörigheter tooconnect från programmet toohello databasen med hello lägsta privilegier som behövs i programmet.</span><span class="sxs-lookup"><span data-stu-id="263b3-147">Use hello "ApplicationUser" account with more limited permissions tooconnect from your application toohello database with hello least privileges needed by your application.</span></span> <span data-ttu-id="263b3-148">Mer information finns i [Hantera inloggningar](sql-database-manage-logins.md).</span><span class="sxs-lookup"><span data-stu-id="263b3-148">For more information, see [Manage logins](sql-database-manage-logins.md).</span></span>

<span data-ttu-id="263b3-149">Endast administratörer behöver normalt använda toohello `master` databas.</span><span class="sxs-lookup"><span data-stu-id="263b3-149">Typically, only administrators need access toohello `master` database.</span></span> <span data-ttu-id="263b3-150">Rutinunderhåll åtkomst tooeach användardatabas ska via vanliga oberoende databasanvändare skapas i varje databas.</span><span class="sxs-lookup"><span data-stu-id="263b3-150">Routine access tooeach user database should be through non-administrator contained database users created in each database.</span></span> <span data-ttu-id="263b3-151">När du använder oberoende databasanvändare, behöver du inte toocreate inloggningar i hello `master` databas.</span><span class="sxs-lookup"><span data-stu-id="263b3-151">When you use contained database users, you do not need toocreate logins in hello `master` database.</span></span> <span data-ttu-id="263b3-152">Mer information finns i [Oberoende databasanvändare – göra databasen portabel](https://docs.microsoft.com/sql/relational-databases/security/contained-database-users-making-your-database-portable).</span><span class="sxs-lookup"><span data-stu-id="263b3-152">For more information, see [Contained Database Users - Making Your Database Portable](https://docs.microsoft.com/sql/relational-databases/security/contained-database-users-making-your-database-portable).</span></span>

<span data-ttu-id="263b3-153">Du bör bekanta dig med följande funktioner som kan använda toolimit eller höja behörighet hello:</span><span class="sxs-lookup"><span data-stu-id="263b3-153">You should familiarize yourself with hello following features that can be used toolimit or elevate permissions:</span></span>   
* <span data-ttu-id="263b3-154">[Personifiering](https://docs.microsoft.com/dotnet/framework/data/adonet/sql/customizing-permissions-with-impersonation-in-sql-server) och [modul-signering](https://docs.microsoft.com/dotnet/framework/data/adonet/sql/signing-stored-procedures-in-sql-server) kan vara används toosecurely höja behörighet tillfälligt.</span><span class="sxs-lookup"><span data-stu-id="263b3-154">[Impersonation](https://docs.microsoft.com/dotnet/framework/data/adonet/sql/customizing-permissions-with-impersonation-in-sql-server) and [module-signing](https://docs.microsoft.com/dotnet/framework/data/adonet/sql/signing-stored-procedures-in-sql-server) can be used toosecurely elevate permissions temporarily.</span></span>
* <span data-ttu-id="263b3-155">[Säkerhet på radnivå](https://docs.microsoft.com/sql/relational-databases/security/row-level-security) kan användas som en begränsning av vilka rader en användare kan komma åt.</span><span class="sxs-lookup"><span data-stu-id="263b3-155">[Row-Level Security](https://docs.microsoft.com/sql/relational-databases/security/row-level-security) can be used limit which rows a user can access.</span></span>
* <span data-ttu-id="263b3-156">[Datamaskning](sql-database-dynamic-data-masking-get-started.md) kan vara används toolimit exponering av känsliga data.</span><span class="sxs-lookup"><span data-stu-id="263b3-156">[Data Masking](sql-database-dynamic-data-masking-get-started.md) can be used toolimit exposure of sensitive data.</span></span>
* <span data-ttu-id="263b3-157">[Lagrade procedurer](https://docs.microsoft.com/sql/relational-databases/stored-procedures/stored-procedures-database-engine) kan vara används toolimit hello-åtgärder som kan göras på hello-databasen.</span><span class="sxs-lookup"><span data-stu-id="263b3-157">[Stored procedures](https://docs.microsoft.com/sql/relational-databases/stored-procedures/stored-procedures-database-engine) can be used toolimit hello actions that can be taken on hello database.</span></span>

## <a name="next-steps"></a><span data-ttu-id="263b3-158">Nästa steg</span><span class="sxs-lookup"><span data-stu-id="263b3-158">Next steps</span></span>

- <span data-ttu-id="263b3-159">En översikt över hello SQL Database-säkerhetsfunktioner finns [översikt över säkerheten i SQL](sql-database-security-overview.md).</span><span class="sxs-lookup"><span data-stu-id="263b3-159">For an overview of hello SQL Database security features, see [SQL security overview](sql-database-security-overview.md).</span></span>
- <span data-ttu-id="263b3-160">toolearn mer information om brandväggsregler, se [regler i brandväggen](sql-database-firewall-configure.md).</span><span class="sxs-lookup"><span data-stu-id="263b3-160">toolearn more about firewall rules, see [Firewall rules](sql-database-firewall-configure.md).</span></span>
- <span data-ttu-id="263b3-161">toolearn om användare och inloggningar, se [hantera inloggningar](sql-database-manage-logins.md).</span><span class="sxs-lookup"><span data-stu-id="263b3-161">toolearn about users and logins, see [Manage logins](sql-database-manage-logins.md).</span></span> 
- <span data-ttu-id="263b3-162">En beskrivning av Proaktiv övervakning finns [Database Auditing](sql-database-auditing.md) och [Hotidentifiering för SQL-databasen](sql-database-threat-detection.md).</span><span class="sxs-lookup"><span data-stu-id="263b3-162">For a discussion of proactive monitoring, see [Database Auditing](sql-database-auditing.md) and [SQL Database Threat Detection](sql-database-threat-detection.md).</span></span>
- <span data-ttu-id="263b3-163">En självstudiekurs finns [skydda din Azure SQL Database](sql-database-security-tutorial.md).</span><span class="sxs-lookup"><span data-stu-id="263b3-163">For a tutorial, see [Secure your Azure SQL Database](sql-database-security-tutorial.md).</span></span>

---
title: "Bevilja åtkomst till Azure SQL Database | Microsoft Docs"
description: "Läs dig hur du beviljar åtkomst till Microsoft Azure SQL Database."
services: sql-database
documentationcenter: 
author: BYHAM
manager: jhubbard
editor: 
tags: 
ms.assetid: 8e71b04c-bc38-4153-8f83-f2b14faa31d9
ms.service: sql-database
ms.custom: security
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: data-management
ms.date: 02/06/2017
ms.author: rickbyh
ms.openlocfilehash: 0ca1ccd273317d67537d31724d566625a4eb2c85
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: sv-SE
ms.lasthandoff: 07/11/2017
---
# <a name="azure-sql-database-access-control"></a><span data-ttu-id="f7512-103">Azure SQL Database-åtkomstkontroll</span><span class="sxs-lookup"><span data-stu-id="f7512-103">Azure SQL Database access control</span></span>
<span data-ttu-id="f7512-104">För att erbjuda säkerhet, kontrollerar SQL Database åtkomsten med hjälp av brandväggsregler som begränsar anslutning efter IP-adress, autentiseringsmekanismer kräver att användare bevisar sin identitet och auktoriseringsmekanismer begränsar användare till specifika åtgärder och data.</span><span class="sxs-lookup"><span data-stu-id="f7512-104">To provide security, SQL Database controls access with firewall rules limiting connectivity by IP address, authentication mechanisms requiring users to prove their identity, and authorization mechanisms limiting users to specific actions and data.</span></span> 

> [!IMPORTANT]
> <span data-ttu-id="f7512-105">En översikt över säkerhetsfunktionerna i SQL Database finns i [SQL Säkerhetsöversikt](sql-database-security-overview.md).</span><span class="sxs-lookup"><span data-stu-id="f7512-105">For an overview of the SQL Database security features, see [SQL security overview](sql-database-security-overview.md).</span></span> <span data-ttu-id="f7512-106">En självstudiekurs finns [skydda din Azure SQL Database](sql-database-security-tutorial.md).</span><span class="sxs-lookup"><span data-stu-id="f7512-106">For a tutorial, see [Secure your Azure SQL Database](sql-database-security-tutorial.md).</span></span>

## <a name="firewall-and-firewall-rules"></a><span data-ttu-id="f7512-107">Brandvägg och brandväggsregler</span><span class="sxs-lookup"><span data-stu-id="f7512-107">Firewall and firewall rules</span></span>
<span data-ttu-id="f7512-108">Microsoft Azure SQL Database tillhandahåller en relationsdatabastjänst för Azure och andra Internetbaserade program.</span><span class="sxs-lookup"><span data-stu-id="f7512-108">Microsoft Azure SQL Database provides a relational database service for Azure and other Internet-based applications.</span></span> <span data-ttu-id="f7512-109">För att skydda dina data förhindrar brandväggar all åtkomst till din databasserver tills du anger vilka datorer som har behörighet.</span><span class="sxs-lookup"><span data-stu-id="f7512-109">To help protect your data, firewalls prevent all access to your database server until you specify which computers have permission.</span></span> <span data-ttu-id="f7512-110">Brandväggen ger åtkomst till databaser baserat på vilken IP-adress som varje begäran kommer från.</span><span class="sxs-lookup"><span data-stu-id="f7512-110">The firewall grants access to databases based on the originating IP address of each request.</span></span> <span data-ttu-id="f7512-111">Mer information finns i [Översikt över Azure SQL Database-brandväggsregler](sql-database-firewall-configure.md)</span><span class="sxs-lookup"><span data-stu-id="f7512-111">For more information, see [Overview of Azure SQL Database firewall rules](sql-database-firewall-configure.md)</span></span>

<span data-ttu-id="f7512-112">Azure SQL Database-tjänsten är endast tillgänglig via TCP-port 1433.</span><span class="sxs-lookup"><span data-stu-id="f7512-112">The Azure SQL Database service is only available through TCP port 1433.</span></span> <span data-ttu-id="f7512-113">Se till att klientdatorns brandvägg tillåter utgående TCP-kommunikation på TCP-port 1433 för att komma åt en SQL Database från datorn.</span><span class="sxs-lookup"><span data-stu-id="f7512-113">To access a SQL Database from your computer, ensure that your client computer firewall allows outgoing TCP communication on TCP port 1433.</span></span> <span data-ttu-id="f7512-114">Om det inte behövs för andra program, blockera inkommande anslutningar på TCP-port 1433.</span><span class="sxs-lookup"><span data-stu-id="f7512-114">If not needed for other applications, block inbound connections on TCP port 1433.</span></span> 

<span data-ttu-id="f7512-115">Som en del av anslutningen omdirigeras anslutningar från virtuella Azure-datorer till en annan IP-adress och port, som är unik för varje arbetsroll.</span><span class="sxs-lookup"><span data-stu-id="f7512-115">As part of the connection process, connections from Azure virtual machines are redirected to a different IP address and port, unique for each worker role.</span></span> <span data-ttu-id="f7512-116">Portnumret är i intervallet 11000 till 11999.</span><span class="sxs-lookup"><span data-stu-id="f7512-116">The port number is in the range from 11000 to 11999.</span></span> <span data-ttu-id="f7512-117">Mer information om TCP-portar finns [portar utöver 1433 för ADO.NET 4.5 och SQL Database2](sql-database-develop-direct-route-ports-adonet-v12.md).</span><span class="sxs-lookup"><span data-stu-id="f7512-117">For more information about TCP ports, see [Ports beyond 1433 for ADO.NET 4.5 and SQL Database2](sql-database-develop-direct-route-ports-adonet-v12.md).</span></span>

## <a name="authentication"></a><span data-ttu-id="f7512-118">Autentisering</span><span class="sxs-lookup"><span data-stu-id="f7512-118">Authentication</span></span>

<span data-ttu-id="f7512-119">SQL Database stöder två typer av autentisering:</span><span class="sxs-lookup"><span data-stu-id="f7512-119">SQL Database supports two types of authentication:</span></span>

* <span data-ttu-id="f7512-120">**SQL-autentisering**, som använder ett användarnamn och lösenord.</span><span class="sxs-lookup"><span data-stu-id="f7512-120">**SQL Authentication**, which uses a username and password.</span></span> <span data-ttu-id="f7512-121">När du skapade den logiska servern för databasen angav du en "serveradministratörsinloggning” med ett användarnamn och lösenord.</span><span class="sxs-lookup"><span data-stu-id="f7512-121">When you created the logical server for your database, you specified a "server admin" login with a username and password.</span></span> <span data-ttu-id="f7512-122">Med dessa autentiseringsuppgifter kan du autentisera till en databas på servern som databasens ägare eller "dbo."</span><span class="sxs-lookup"><span data-stu-id="f7512-122">Using these credentials, you can authenticate to any database on that server as the database owner, or "dbo."</span></span> 
* <span data-ttu-id="f7512-123">**Azure Active Directory-autentisering**, som använder identiteter som hanteras av Azure Active Directory och stöder hanterade och integrerade domäner.</span><span class="sxs-lookup"><span data-stu-id="f7512-123">**Azure Active Directory Authentication**, which uses identities managed by Azure Active Directory and is supported for managed and integrated domains.</span></span> <span data-ttu-id="f7512-124">Använd Active Directory-autentisering (integrerad säkerhet) [närhelst det går](https://docs.microsoft.com/sql/relational-databases/security/choose-an-authentication-mode).</span><span class="sxs-lookup"><span data-stu-id="f7512-124">Use Active Directory authentication (integrated security) [whenever possible](https://docs.microsoft.com/sql/relational-databases/security/choose-an-authentication-mode).</span></span> <span data-ttu-id="f7512-125">Om du vill använda Azure Active Directory-autentisering måste du skapa en annan serveradministratör som kallas "Azure AD-admin," som tillåts administrera Azure AD-användare och -grupper.</span><span class="sxs-lookup"><span data-stu-id="f7512-125">If you want to use Azure Active Directory Authentication, you must create another server admin called the "Azure AD admin," which is allowed to administer Azure AD users and groups.</span></span> <span data-ttu-id="f7512-126">Den här administratören kan också utföra alla åtgärder som en vanlig serveradministratören kan.</span><span class="sxs-lookup"><span data-stu-id="f7512-126">This admin can also perform all operations that a regular server admin can.</span></span> <span data-ttu-id="f7512-127">Se [Ansluta till SQL Database genom att använda Azure Active Directory-autentisering](sql-database-aad-authentication.md) för en genomgång av hur du skapar en Azure AD-administratör för att aktivera Azure Active Directory-autentisering.</span><span class="sxs-lookup"><span data-stu-id="f7512-127">See [Connecting to SQL Database By Using Azure Active Directory Authentication](sql-database-aad-authentication.md) for a walkthrough of how to create an Azure AD admin to enable Azure Active Directory Authentication.</span></span>

<span data-ttu-id="f7512-128">Databasmotorn stänger anslutningar som är inaktiva under mer än 30 minuter.</span><span class="sxs-lookup"><span data-stu-id="f7512-128">The Database Engine closes connections that remain idle for more than 30 minutes.</span></span> <span data-ttu-id="f7512-129">Anslutningen måste logga in igen innan den kan användas.</span><span class="sxs-lookup"><span data-stu-id="f7512-129">The connection must login again before it can be used.</span></span> <span data-ttu-id="f7512-130">Kontinuerligt aktiva anslutningar till SQL Database kräver omauktorisering (utförs av databasmotorn) minst var 10:e timma.</span><span class="sxs-lookup"><span data-stu-id="f7512-130">Continuously active connections to SQL Database require reauthorization (performed by the database engine) at least every 10 hours.</span></span> <span data-ttu-id="f7512-131">Databasmotorn försöker omauktorisera det ursprungligen skickade lösenordet och inga indata från användaren krävs.</span><span class="sxs-lookup"><span data-stu-id="f7512-131">The database engine attempts reauthorization using the originally submitted password and no user input is required.</span></span> <span data-ttu-id="f7512-132">Av prestandaskäl omauktoriseras inte anslutningen när ett lösenord återställs i SQL Database, även om anslutningen har återställts på grund av anslutningspoolning.</span><span class="sxs-lookup"><span data-stu-id="f7512-132">For performance reasons, when a password is reset in SQL Database, the connection is not be reauthenticated, even if the connection is reset due to connection pooling.</span></span> <span data-ttu-id="f7512-133">Detta skiljer sig från beteendet för lokal SQL Server.</span><span class="sxs-lookup"><span data-stu-id="f7512-133">This is different from the behavior of on-premises SQL Server.</span></span> <span data-ttu-id="f7512-134">Om lösenordet har ändrats sedan anslutningen ursprungligen auktoriserades, måste anslutningen avslutas och en ny anslutning skapas med det nya lösenordet.</span><span class="sxs-lookup"><span data-stu-id="f7512-134">If the password has been changed since the connection was initially authorized, the connection must be terminated and a new connection made using the new password.</span></span> <span data-ttu-id="f7512-135">En användare med behörigheten `KILL DATABASE CONNECTION` kan explicit avsluta en anslutning till SQL Database med hjälp av kommandot [KILL](https://docs.microsoft.com/sql/t-sql/language-elements/kill-transact-sql).</span><span class="sxs-lookup"><span data-stu-id="f7512-135">A user with the `KILL DATABASE CONNECTION` permission can explicitly terminate a connection to SQL Database by using the [KILL](https://docs.microsoft.com/sql/t-sql/language-elements/kill-transact-sql) command.</span></span>

<span data-ttu-id="f7512-136">Användarkonton kan skapas i huvuddatabasen och kan tilldelas behörigheter i alla databaser på servern, eller så kan de skapas i själva databasen (kallas inneslutna användare).</span><span class="sxs-lookup"><span data-stu-id="f7512-136">User accounts can be created in the master database and can be granted permissions in all databases on the server, or they can be created in the database itself (called contained users).</span></span> <span data-ttu-id="f7512-137">För information om hur man skapar och hanterar inloggningar, se [Hantera inloggningar](sql-database-manage-logins.md).</span><span class="sxs-lookup"><span data-stu-id="f7512-137">For information on creating and managing logins, see [Manage logins](sql-database-manage-logins.md).</span></span> <span data-ttu-id="f7512-138">Använd inneslutna databasanvändare för att förbättra portabilitet och skalbarhet.</span><span class="sxs-lookup"><span data-stu-id="f7512-138">To enhance portability and scalabilty, use contained database users to enhance scalability.</span></span> <span data-ttu-id="f7512-139">Mer information om inneslutna användare finns i [Inneslutna databasanvändare – Gör din databas portabel](https://docs.microsoft.com/sql/relational-databases/security/contained-database-users-making-your-database-portable), [Skapa användare (Transact-SQL)](https://docs.microsoft.com/sql/t-sql/statements/create-user-transact-sql) och [Inneslutna databaser](https://docs.microsoft.com/sql/relational-databases/databases/contained-databases).</span><span class="sxs-lookup"><span data-stu-id="f7512-139">For more information on contained users, see [Contained Database Users - Making Your Database Portable](https://docs.microsoft.com/sql/relational-databases/security/contained-database-users-making-your-database-portable), [CREATE USER (Transact-SQL)](https://docs.microsoft.com/sql/t-sql/statements/create-user-transact-sql), and [Contained Databases](https://docs.microsoft.com/sql/relational-databases/databases/contained-databases).</span></span>

<span data-ttu-id="f7512-140">Ett bra tips är att ditt program bör använda ett särskilt konto för autentisering – på det här sättet kan du begränsa behörigheterna för programmet och minska riskerna för skadlig programvara om din programkod är sårbar för ett SQL-angrepp.</span><span class="sxs-lookup"><span data-stu-id="f7512-140">As a best practice your application should use a dedicated account to authenticate -- this way you can limit the permissions granted to the application and reduce the risks of malicious activity in case your application code is vulnerable to a SQL injection attack.</span></span> <span data-ttu-id="f7512-141">Den rekommenderade metoden är att skapa en [innesluten databasanvändare](https://docs.microsoft.com/sql/relational-databases/security/contained-database-users-making-your-database-portable), vilket gör att din app kan autentisera direkt till databasen.</span><span class="sxs-lookup"><span data-stu-id="f7512-141">The recommended approach is to create a [contained database user](https://docs.microsoft.com/sql/relational-databases/security/contained-database-users-making-your-database-portable), which allows your app to authenticate directly to the database.</span></span> 

## <a name="authorization"></a><span data-ttu-id="f7512-142">Auktorisering</span><span class="sxs-lookup"><span data-stu-id="f7512-142">Authorization</span></span>

<span data-ttu-id="f7512-143">Auktorisering hänvisar till vad en användare kan göra inom en Azure SQL-databas och det styrs av ditt användarkontos databas [rollmedlemskap](https://docs.microsoft.com/sql/relational-databases/security/authentication-access/database-level-roles) och [behörigheter på objektnivå](https://docs.microsoft.com/sql/relational-databases/security/permissions-database-engine).</span><span class="sxs-lookup"><span data-stu-id="f7512-143">Authorization refers to what a user can do within an Azure SQL Database, and this is controlled by your user account's database [role memberships](https://docs.microsoft.com/sql/relational-databases/security/authentication-access/database-level-roles) and [object-level permissions](https://docs.microsoft.com/sql/relational-databases/security/permissions-database-engine).</span></span> <span data-ttu-id="f7512-144">Ett bra tips är att du ska ge användare så få behörigheter som möjligt.</span><span class="sxs-lookup"><span data-stu-id="f7512-144">As a best practice, you should grant users the least privileges necessary.</span></span> <span data-ttu-id="f7512-145">Serveradministratörskontot som du ansluter med är medlem i db_owner som har behörighet att göra vad som helst i databasen.</span><span class="sxs-lookup"><span data-stu-id="f7512-145">The server admin account you are connecting with is a member of db_owner, which has authority to do anything within the database.</span></span> <span data-ttu-id="f7512-146">Spara det här kontot för att distribuera schemauppgraderingar och andra hanteringsåtgärder.</span><span class="sxs-lookup"><span data-stu-id="f7512-146">Save this account for deploying schema upgrades and other management operations.</span></span> <span data-ttu-id="f7512-147">Använd kontot "ApplicationUser" med mer begränsade behörigheter för att ansluta från ditt program till databasen med den minsta behörigheten som krävs av programmet.</span><span class="sxs-lookup"><span data-stu-id="f7512-147">Use the "ApplicationUser" account with more limited permissions to connect from your application to the database with the least privileges needed by your application.</span></span> <span data-ttu-id="f7512-148">Mer information finns i [Hantera inloggningar](sql-database-manage-logins.md).</span><span class="sxs-lookup"><span data-stu-id="f7512-148">For more information, see [Manage logins](sql-database-manage-logins.md).</span></span>

<span data-ttu-id="f7512-149">Normalt behöver endast administratörer ha åtkomst till `master`-databasen.</span><span class="sxs-lookup"><span data-stu-id="f7512-149">Typically, only administrators need access to the `master` database.</span></span> <span data-ttu-id="f7512-150">Rutinåtkomst till varje användardatabas ska vara via oberoende databasanvändare som inte är administratör, som skapats i varje databas.</span><span class="sxs-lookup"><span data-stu-id="f7512-150">Routine access to each user database should be through non-administrator contained database users created in each database.</span></span> <span data-ttu-id="f7512-151">När du använder oberoende databasanvändare behöver du inte skapa inloggningar i databasen `master`.</span><span class="sxs-lookup"><span data-stu-id="f7512-151">When you use contained database users, you do not need to create logins in the `master` database.</span></span> <span data-ttu-id="f7512-152">Mer information finns i [Oberoende databasanvändare – göra databasen portabel](https://docs.microsoft.com/sql/relational-databases/security/contained-database-users-making-your-database-portable).</span><span class="sxs-lookup"><span data-stu-id="f7512-152">For more information, see [Contained Database Users - Making Your Database Portable](https://docs.microsoft.com/sql/relational-databases/security/contained-database-users-making-your-database-portable).</span></span>

<span data-ttu-id="f7512-153">Du bör bekanta dig med följande funktioner som kan användas för att begränsa eller utöka behörigheter:</span><span class="sxs-lookup"><span data-stu-id="f7512-153">You should familiarize yourself with the following features that can be used to limit or elevate permissions:</span></span>   
* <span data-ttu-id="f7512-154">[Personifiering](https://docs.microsoft.com/dotnet/framework/data/adonet/sql/customizing-permissions-with-impersonation-in-sql-server) och [modulsignering](https://docs.microsoft.com/dotnet/framework/data/adonet/sql/signing-stored-procedures-in-sql-server) kan användas för att säkert höja behörigheter tillfälligt.</span><span class="sxs-lookup"><span data-stu-id="f7512-154">[Impersonation](https://docs.microsoft.com/dotnet/framework/data/adonet/sql/customizing-permissions-with-impersonation-in-sql-server) and [module-signing](https://docs.microsoft.com/dotnet/framework/data/adonet/sql/signing-stored-procedures-in-sql-server) can be used to securely elevate permissions temporarily.</span></span>
* <span data-ttu-id="f7512-155">[Säkerhet på radnivå](https://docs.microsoft.com/sql/relational-databases/security/row-level-security) kan användas som en begränsning av vilka rader en användare kan komma åt.</span><span class="sxs-lookup"><span data-stu-id="f7512-155">[Row-Level Security](https://docs.microsoft.com/sql/relational-databases/security/row-level-security) can be used limit which rows a user can access.</span></span>
* <span data-ttu-id="f7512-156">[Datamaskning](sql-database-dynamic-data-masking-get-started.md) kan användas för att begränsa exponering av känsliga data.</span><span class="sxs-lookup"><span data-stu-id="f7512-156">[Data Masking](sql-database-dynamic-data-masking-get-started.md) can be used to limit exposure of sensitive data.</span></span>
* <span data-ttu-id="f7512-157">[Lagrade procedurer](https://docs.microsoft.com/sql/relational-databases/stored-procedures/stored-procedures-database-engine) kan användas för att begränsa de åtgärder som kan utföras i databasen.</span><span class="sxs-lookup"><span data-stu-id="f7512-157">[Stored procedures](https://docs.microsoft.com/sql/relational-databases/stored-procedures/stored-procedures-database-engine) can be used to limit the actions that can be taken on the database.</span></span>

## <a name="next-steps"></a><span data-ttu-id="f7512-158">Nästa steg</span><span class="sxs-lookup"><span data-stu-id="f7512-158">Next steps</span></span>

- <span data-ttu-id="f7512-159">En översikt över säkerhetsfunktionerna i SQL Database finns i [SQL Säkerhetsöversikt](sql-database-security-overview.md).</span><span class="sxs-lookup"><span data-stu-id="f7512-159">For an overview of the SQL Database security features, see [SQL security overview](sql-database-security-overview.md).</span></span>
- <span data-ttu-id="f7512-160">Mer information om brandväggsregler finns [regler i brandväggen](sql-database-firewall-configure.md).</span><span class="sxs-lookup"><span data-stu-id="f7512-160">To learn more about firewall rules, see [Firewall rules](sql-database-firewall-configure.md).</span></span>
- <span data-ttu-id="f7512-161">Mer information om användare och inloggningar finns i [Hantera inloggningar](sql-database-manage-logins.md).</span><span class="sxs-lookup"><span data-stu-id="f7512-161">To learn about users and logins, see [Manage logins](sql-database-manage-logins.md).</span></span> 
- <span data-ttu-id="f7512-162">En beskrivning av Proaktiv övervakning finns [Database Auditing](sql-database-auditing.md) och [Hotidentifiering för SQL-databasen](sql-database-threat-detection.md).</span><span class="sxs-lookup"><span data-stu-id="f7512-162">For a discussion of proactive monitoring, see [Database Auditing](sql-database-auditing.md) and [SQL Database Threat Detection](sql-database-threat-detection.md).</span></span>
- <span data-ttu-id="f7512-163">En självstudiekurs finns [skydda din Azure SQL Database](sql-database-security-tutorial.md).</span><span class="sxs-lookup"><span data-stu-id="f7512-163">For a tutorial, see [Secure your Azure SQL Database](sql-database-security-tutorial.md).</span></span>

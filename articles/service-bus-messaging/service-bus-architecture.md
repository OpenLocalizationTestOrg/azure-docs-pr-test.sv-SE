---
title: "aaaAzure Arkitekturöversikt för Service Bus-meddelandebehandling | Microsoft Docs"
description: Beskriver hello meddelandet bearbetningsarkitekturen i Azure Service Bus.
services: service-bus-messaging
documentationcenter: na
author: sethmanheim
manager: timlt
editor: 
ms.assetid: baf94c2d-0e58-4d5d-a588-767f996ccf7f
ms.service: service-bus-messaging
ms.devlang: na
ms.topic: get-started-article
ms.tgt_pltfrm: na
ms.workload: na
ms.date: 08/23/2017
ms.author: sethm
ms.openlocfilehash: f7606e40cdf6db3797a0db2de9365453ff2a158e
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: sv-SE
ms.lasthandoff: 10/06/2017
---
# <a name="service-bus-architecture"></a><span data-ttu-id="6b893-103">Service Bus-arkitektur</span><span class="sxs-lookup"><span data-stu-id="6b893-103">Service Bus architecture</span></span>
<span data-ttu-id="6b893-104">Den här artikeln beskriver hello meddelandet bearbetningsarkitekturen i Azure Service Bus.</span><span class="sxs-lookup"><span data-stu-id="6b893-104">This article describes hello message processing architecture of Azure Service Bus.</span></span>

## <a name="service-bus-scale-units"></a><span data-ttu-id="6b893-105">Service Bus-skalningsenheter</span><span class="sxs-lookup"><span data-stu-id="6b893-105">Service Bus scale units</span></span>
<span data-ttu-id="6b893-106">Service Bus är organiserat i *skalningsenheter*.</span><span class="sxs-lookup"><span data-stu-id="6b893-106">Service Bus is organized by *scale units*.</span></span> <span data-ttu-id="6b893-107">En skalningsenhet är en distributionsenhet och innehåller alla komponenter krävs kör hello-tjänsten.</span><span class="sxs-lookup"><span data-stu-id="6b893-107">A scale unit is a unit of deployment and contains all components required run hello service.</span></span> <span data-ttu-id="6b893-108">Varje region distribuerar en eller flera Service Bus-skalningsenheter.</span><span class="sxs-lookup"><span data-stu-id="6b893-108">Each region deploys one or more Service Bus scale units.</span></span>

<span data-ttu-id="6b893-109">En Service Bus-namnrymd är mappade tooa skalningsenhet.</span><span class="sxs-lookup"><span data-stu-id="6b893-109">A Service Bus namespace is mapped tooa scale unit.</span></span> <span data-ttu-id="6b893-110">Hej skalningsenheten hanterar alla typer av enheter för Service Bus (köer, ämnen, prenumerationer).</span><span class="sxs-lookup"><span data-stu-id="6b893-110">hello scale unit handles all types of Service Bus entities (queues, topics, subscriptions).</span></span> <span data-ttu-id="6b893-111">En Service Bus-skalningsenhet består av hello följande komponenter:</span><span class="sxs-lookup"><span data-stu-id="6b893-111">A Service Bus scale unit consists of hello following components:</span></span>

* <span data-ttu-id="6b893-112">**En uppsättning gateway-noder.**</span><span class="sxs-lookup"><span data-stu-id="6b893-112">**A set of gateway nodes.**</span></span> <span data-ttu-id="6b893-113">Gateway-noder autentiserar inkommande begäranden.</span><span class="sxs-lookup"><span data-stu-id="6b893-113">Gateway nodes authenticate incoming requests.</span></span> <span data-ttu-id="6b893-114">Varje gateway-nod har en offentlig IP-adress.</span><span class="sxs-lookup"><span data-stu-id="6b893-114">Each gateway node has a public IP address.</span></span>
* <span data-ttu-id="6b893-115">**En uppsättning asynkrona meddelandenoder.**</span><span class="sxs-lookup"><span data-stu-id="6b893-115">**A set of messaging broker nodes.**</span></span> <span data-ttu-id="6b893-116">Asynkrona meddelandenoder bearbetar begäranden om meddelandeentiteter.</span><span class="sxs-lookup"><span data-stu-id="6b893-116">Messaging broker nodes process requests concerning messaging entities.</span></span>
* <span data-ttu-id="6b893-117">**Ett gateway-arkiv.**</span><span class="sxs-lookup"><span data-stu-id="6b893-117">**One gateway store.**</span></span> <span data-ttu-id="6b893-118">hello gateway-arkivet innehåller hello data för varje entitet som definieras i den här skalningsenheten.</span><span class="sxs-lookup"><span data-stu-id="6b893-118">hello gateway store holds hello data for every entity that is defined in this scale unit.</span></span> <span data-ttu-id="6b893-119">hello gateway-arkivet implementeras ovanpå en SQL Azure-databas.</span><span class="sxs-lookup"><span data-stu-id="6b893-119">hello gateway store is implemented on top of a SQL Azure database.</span></span>
* <span data-ttu-id="6b893-120">**Flera meddelandearkiv.**</span><span class="sxs-lookup"><span data-stu-id="6b893-120">**Multiple messaging stores.**</span></span> <span data-ttu-id="6b893-121">Meddelandearkiv håller hälsningsmeddelande i alla köer, ämnen och prenumerationer som definieras i den här skalningsenheten.</span><span class="sxs-lookup"><span data-stu-id="6b893-121">Messaging stores hold hello messages of all queues, topics and subscriptions that are defined in this scale unit.</span></span> <span data-ttu-id="6b893-122">De innehåller även alla data för prenumerationen.</span><span class="sxs-lookup"><span data-stu-id="6b893-122">It also contains all subscription data.</span></span> <span data-ttu-id="6b893-123">Om inte [partitionering meddelandeentiteter](service-bus-partitioning.md) är aktiverad, en kö eller ett ämne är mappade tooone meddelandearkiv.</span><span class="sxs-lookup"><span data-stu-id="6b893-123">Unless [partitioning messaging entities](service-bus-partitioning.md) is enabled, a queue or topic is mapped tooone messaging store.</span></span> <span data-ttu-id="6b893-124">Prenumerationer lagras i hello samma meddelandearkiv som det överordnade ämnet.</span><span class="sxs-lookup"><span data-stu-id="6b893-124">Subscriptions are stored in hello same messaging store as their parent topic.</span></span> <span data-ttu-id="6b893-125">Förutom för Service Bus [Premium – meddelandefunktion](service-bus-premium-messaging.md), implementeras hello meddelandearkiven ovanpå SQL Azure-databaser.</span><span class="sxs-lookup"><span data-stu-id="6b893-125">Except for Service Bus [Premium Messaging](service-bus-premium-messaging.md), hello messaging stores are implemented on top of SQL Azure databases.</span></span>

## <a name="containers"></a><span data-ttu-id="6b893-126">Behållare</span><span class="sxs-lookup"><span data-stu-id="6b893-126">Containers</span></span>
<span data-ttu-id="6b893-127">Varje meddelandeentitet tilldelas en specifik behållare.</span><span class="sxs-lookup"><span data-stu-id="6b893-127">Each messaging entity is assigned a specific container.</span></span> <span data-ttu-id="6b893-128">En behållare är en logisk konstruktion som använder exakt en meddelanden store toostore alla relevanta data för den här behållaren.</span><span class="sxs-lookup"><span data-stu-id="6b893-128">A container is a logical construct that uses exactly one messaging store toostore all relevant data for this container.</span></span> <span data-ttu-id="6b893-129">Varje behållare tilldelas tooa messaging Meddelandenod.</span><span class="sxs-lookup"><span data-stu-id="6b893-129">Each container is assigned tooa messaging broker node.</span></span> <span data-ttu-id="6b893-130">Det finns normalt sett fler behållare än asynkrona meddelandenoder.</span><span class="sxs-lookup"><span data-stu-id="6b893-130">Typically, there are more containers than messaging broker nodes.</span></span> <span data-ttu-id="6b893-131">Därför läser varje asynkron meddelandenod in flera behållare.</span><span class="sxs-lookup"><span data-stu-id="6b893-131">Therefore, each messaging broker node loads multiple containers.</span></span> <span data-ttu-id="6b893-132">hello distribution av behållare tooa asynkron Meddelandenod ordnas så att alla asynkrona meddelandenoder läses in lika.</span><span class="sxs-lookup"><span data-stu-id="6b893-132">hello distribution of containers tooa messaging broker node is organized such that all messaging broker nodes are equally loaded.</span></span> <span data-ttu-id="6b893-133">Om hello hello belastningen mönstret ändras (till exempel en hello behållarna belastas hårt) eller om en asynkron Meddelandenod blir tillfälligt otillgänglig, omfördelas behållarna bland hello asynkrona meddelandenoder.</span><span class="sxs-lookup"><span data-stu-id="6b893-133">If hello load pattern changes (for example, one of hello containers gets very busy), or if a messaging broker node becomes temporarily unavailable, hello containers are redistributed among hello messaging broker nodes.</span></span>

## <a name="processing-of-incoming-messaging-requests"></a><span data-ttu-id="6b893-134">Bearbetning av inkommande meddelandebegäranden</span><span class="sxs-lookup"><span data-stu-id="6b893-134">Processing of incoming messaging requests</span></span>
<span data-ttu-id="6b893-135">När en klient skickar en begäran tooService Bus, hello Azure-belastningsutjämnaren den tooany av hello gateway-noder.</span><span class="sxs-lookup"><span data-stu-id="6b893-135">When a client sends a request tooService Bus, hello Azure load balancer routes it tooany of hello gateway nodes.</span></span> <span data-ttu-id="6b893-136">hello gateway-noden godkänner hello-begäran.</span><span class="sxs-lookup"><span data-stu-id="6b893-136">hello gateway node authorizes hello request.</span></span> <span data-ttu-id="6b893-137">Om hello begäran gäller en meddelandeentitet (kö, ämne, prenumeration), letar upp hello entiteten i gateway-arkivet hello hello gateway-noden och avgör vilka meddelanden store hello entiteten finns.</span><span class="sxs-lookup"><span data-stu-id="6b893-137">If hello request concerns a messaging entity (queue, topic, subscription), hello gateway node looks up hello entity in hello gateway store and determines in which messaging store hello entity is located.</span></span> <span data-ttu-id="6b893-138">Den söker sedan upp den asynkrona meddelandenoden för närvarande underhåller behållaren och skickar hello begäran toothat messaging Meddelandenod.</span><span class="sxs-lookup"><span data-stu-id="6b893-138">It then looks up which messaging broker node is currently servicing this container, and sends hello request toothat messaging broker node.</span></span> <span data-ttu-id="6b893-139">hello messaging Meddelandenod behandlar hello begäran och uppdaterar hello entitetens tillstånd i hello behållarens Arkiv.</span><span class="sxs-lookup"><span data-stu-id="6b893-139">hello messaging broker node processes hello request and updates hello entity state in hello container store.</span></span> <span data-ttu-id="6b893-140">hello messaging Meddelandenod sedan skickar hello svar tillbaka toohello gateway-noden, som skickar ett lämpligt svar tillbaka toohello klienten som utfärdade hello ursprungliga begäran.</span><span class="sxs-lookup"><span data-stu-id="6b893-140">hello messaging broker node then sends hello response back toohello gateway node, which sends an appropriate response back toohello client that issued hello original request.</span></span>

![Bearbetning av inkommande meddelandebegäranden](./media/service-bus-architecture/ic690644.png)

## <a name="next-steps"></a><span data-ttu-id="6b893-142">Nästa steg</span><span class="sxs-lookup"><span data-stu-id="6b893-142">Next steps</span></span>
<span data-ttu-id="6b893-143">Nu när du har läst en översikt över Service Bus-arkitektur finns hello följande länkar för mer information:</span><span class="sxs-lookup"><span data-stu-id="6b893-143">Now that you've read an overview of Service Bus architecture, visit hello following links for more information:</span></span>

* [<span data-ttu-id="6b893-144">Översikt över Service Bus-meddelandetjänster</span><span class="sxs-lookup"><span data-stu-id="6b893-144">Service Bus messaging overview</span></span>](service-bus-messaging-overview.md)
* [<span data-ttu-id="6b893-145">Service Bus-grunder</span><span class="sxs-lookup"><span data-stu-id="6b893-145">Service Bus fundamentals</span></span>](service-bus-fundamentals-hybrid-solutions.md)
* [<span data-ttu-id="6b893-146">En lösning för köade meddelanden som använder Service Bus-köer</span><span class="sxs-lookup"><span data-stu-id="6b893-146">A queued messaging solution using Service Bus queues</span></span>](service-bus-dotnet-multi-tier-app-using-service-bus-queues.md)



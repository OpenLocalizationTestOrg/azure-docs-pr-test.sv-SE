---
title: "aaaAzure Service Bus-autentisering med signaturer för delad åtkomst | Microsoft Docs"
description: "Översikt över Service Bus-autentisering med hjälp av signaturer för delad åtkomst översikt, information om SAS-autentisering med Azure Service Bus."
services: service-bus-messaging
documentationcenter: na
author: sethmanheim
manager: timlt
editor: 
ms.assetid: 
ms.service: service-bus-messaging
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: na
ms.date: 08/23/2017
ms.author: sethm
ms.openlocfilehash: 773bb11720384d7245820b56dc25b8e064ffa746
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: sv-SE
ms.lasthandoff: 10/06/2017
---
# <a name="service-bus-authentication-with-shared-access-signatures"></a><span data-ttu-id="16c33-103">Service Bus-autentisering med signaturer för delad åtkomst</span><span class="sxs-lookup"><span data-stu-id="16c33-103">Service Bus authentication with Shared Access Signatures</span></span>

<span data-ttu-id="16c33-104">*Signaturer för delad åtkomst* (SAS) är hello primära säkerhetsmekanism för Service Bus-meddelanden.</span><span class="sxs-lookup"><span data-stu-id="16c33-104">*Shared Access Signatures* (SAS) are hello primary security mechanism for Service Bus messaging.</span></span> <span data-ttu-id="16c33-105">Den här artikeln beskrivs SAS, hur de fungerar och hur toouse dem i ett plattformsoberoende sätt.</span><span class="sxs-lookup"><span data-stu-id="16c33-105">This article discusses SAS, how they work, and how toouse them in a platform-agnostic way.</span></span>

<span data-ttu-id="16c33-106">SAS-autentisering gör det möjligt för program tooauthenticate tooService Bus med hjälp av en åtkomstnyckel som konfigurerats på hello namnområde eller hello messaging entitet (kö eller ett ämne) med vilka specifika rättigheter som är associerade.</span><span class="sxs-lookup"><span data-stu-id="16c33-106">SAS authentication enables applications tooauthenticate tooService Bus using an access key configured on hello namespace, or on hello messaging entity (queue or topic) with which specific rights are associated.</span></span> <span data-ttu-id="16c33-107">Du kan sedan använda den här nyckeln toogenerate en SAS-token som klienter i sin tur kan använda tooauthenticate tooService Bus.</span><span class="sxs-lookup"><span data-stu-id="16c33-107">You can then use this key toogenerate a SAS token that clients can in turn use tooauthenticate tooService Bus.</span></span>

<span data-ttu-id="16c33-108">Stöd för SAS-autentisering ingår i hello Azure SDK version 2.0 och senare.</span><span class="sxs-lookup"><span data-stu-id="16c33-108">SAS authentication support is included in hello Azure SDK version 2.0 and later.</span></span>

## <a name="overview-of-sas"></a><span data-ttu-id="16c33-109">Översikt över SAS</span><span class="sxs-lookup"><span data-stu-id="16c33-109">Overview of SAS</span></span>

<span data-ttu-id="16c33-110">Signaturer för delad åtkomst är en autentiseringsmekanism baserat på SHA-256 säker hashvärden eller URI: er.</span><span class="sxs-lookup"><span data-stu-id="16c33-110">Shared Access Signatures are an authentication mechanism based on SHA-256 secure hashes or URIs.</span></span> <span data-ttu-id="16c33-111">SAS är en mycket kraftfull mekanism som används av alla Service Bus-tjänster.</span><span class="sxs-lookup"><span data-stu-id="16c33-111">SAS is an extremely powerful mechanism that is used by all Service Bus services.</span></span> <span data-ttu-id="16c33-112">Faktiska används SAS består av två komponenter: en *delad åtkomstprincip* och en *signatur för delad åtkomst* (kallas ofta för en *token*).</span><span class="sxs-lookup"><span data-stu-id="16c33-112">In actual use, SAS has two components: a *shared access policy* and a *Shared Access Signature* (often called a *token*).</span></span>

<span data-ttu-id="16c33-113">SAS-autentisering i Service Bus omfattar hello konfigurationen av en krypteringsnyckel med associerade behörigheter på en Service Bus-resurs.</span><span class="sxs-lookup"><span data-stu-id="16c33-113">SAS authentication in Service Bus involves hello configuration of a cryptographic key with associated rights on a Service Bus resource.</span></span> <span data-ttu-id="16c33-114">Klienter anspråk åtkomst tooService Bus resurser genom att presentera en SAS-token.</span><span class="sxs-lookup"><span data-stu-id="16c33-114">Clients claim access tooService Bus resources by presenting a SAS token.</span></span> <span data-ttu-id="16c33-115">Denna token består av hello resurs-URI som används och ett förfallodatum som signerats med hello konfigurerade nyckeln.</span><span class="sxs-lookup"><span data-stu-id="16c33-115">This token consists of hello resource URI being accessed, and an expiry signed with hello configured key.</span></span>

<span data-ttu-id="16c33-116">Du kan konfigurera auktoriseringsregler för signatur för delad åtkomst på Service Bus [vidarebefordrar](service-bus-fundamentals-hybrid-solutions.md#relays), [köer](service-bus-fundamentals-hybrid-solutions.md#queues), och [avsnitt](service-bus-fundamentals-hybrid-solutions.md#topics).</span><span class="sxs-lookup"><span data-stu-id="16c33-116">You can configure Shared Access Signature authorization rules on Service Bus [relays](service-bus-fundamentals-hybrid-solutions.md#relays), [queues](service-bus-fundamentals-hybrid-solutions.md#queues), and [topics](service-bus-fundamentals-hybrid-solutions.md#topics).</span></span>

<span data-ttu-id="16c33-117">SAS-autentisering använder hello följande element:</span><span class="sxs-lookup"><span data-stu-id="16c33-117">SAS authentication uses hello following elements:</span></span>

* <span data-ttu-id="16c33-118">[Auktoriseringsregeln för delad åtkomst](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule): en 256-bitars kryptografiska primärnyckel i Base64-representation, ett valfritt sekundärnyckeln och ett nyckelnamn och associerade behörigheter (en samling *lyssna*, *skicka*, eller *hantera* rättigheter).</span><span class="sxs-lookup"><span data-stu-id="16c33-118">[Shared Access authorization rule](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule): A 256-bit primary cryptographic key in Base64 representation, an optional secondary key, and a key name and associated rights (a collection of *Listen*, *Send*, or *Manage* rights).</span></span>
* <span data-ttu-id="16c33-119">[Delad Åtkomstsignatur](/dotnet/api/microsoft.servicebus.sharedaccesssignaturetokenprovider) token: genereras med hello HMAC SHA256 av en resurssträng som består av hello URI för hello-resurs som används och en utgången med hello kryptografisk nyckel.</span><span class="sxs-lookup"><span data-stu-id="16c33-119">[Shared Access Signature](/dotnet/api/microsoft.servicebus.sharedaccesssignaturetokenprovider) token: Generated using hello HMAC-SHA256 of a resource string, consisting of hello URI of hello resource that is accessed and an expiry, with hello cryptographic key.</span></span> <span data-ttu-id="16c33-120">hello signatur och andra element som beskrivs i följande avsnitt hello formateras till en sträng tooform hello SAS-token.</span><span class="sxs-lookup"><span data-stu-id="16c33-120">hello signature and other elements described in hello following sections are formatted into a string tooform hello SAS token.</span></span>

## <a name="shared-access-policy"></a><span data-ttu-id="16c33-121">Princip för delad åtkomst</span><span class="sxs-lookup"><span data-stu-id="16c33-121">Shared access policy</span></span>

<span data-ttu-id="16c33-122">En viktig sak toounderstand om SAS är att det börjar med en princip.</span><span class="sxs-lookup"><span data-stu-id="16c33-122">An important thing toounderstand about SAS is that it starts with a policy.</span></span> <span data-ttu-id="16c33-123">För varje princip du bestämmer dig för tre uppgifter: **namn**, **omfång**, och **behörigheter**.</span><span class="sxs-lookup"><span data-stu-id="16c33-123">For each policy, you decide on three pieces of information: **name**, **scope**, and **permissions**.</span></span> <span data-ttu-id="16c33-124">Hej **namn** är precis som; ett unikt namn i detta scope.</span><span class="sxs-lookup"><span data-stu-id="16c33-124">hello **name** is just that; a unique name within that scope.</span></span> <span data-ttu-id="16c33-125">hello omfång kan du enkelt: dess hello URI för hello resursen i fråga.</span><span class="sxs-lookup"><span data-stu-id="16c33-125">hello scope is easy enough: it's hello URI of hello resource in question.</span></span> <span data-ttu-id="16c33-126">För en Service Bus-namnrymd hello scope är hello fullständigt kvalificerade domännamnet (FQDN) som `https://<yournamespace>.servicebus.windows.net/`.</span><span class="sxs-lookup"><span data-stu-id="16c33-126">For a Service Bus namespace, hello scope is hello fully qualified domain name (FQDN), such as `https://<yournamespace>.servicebus.windows.net/`.</span></span>

<span data-ttu-id="16c33-127">hello behörigheter för en princip finns i stort sett självförklarande:</span><span class="sxs-lookup"><span data-stu-id="16c33-127">hello available permissions for a policy are largely self-explanatory:</span></span>

* <span data-ttu-id="16c33-128">Skicka</span><span class="sxs-lookup"><span data-stu-id="16c33-128">Send</span></span>
* <span data-ttu-id="16c33-129">Lyssna</span><span class="sxs-lookup"><span data-stu-id="16c33-129">Listen</span></span>
* <span data-ttu-id="16c33-130">Hantera</span><span class="sxs-lookup"><span data-stu-id="16c33-130">Manage</span></span>

<span data-ttu-id="16c33-131">När du har skapat hello principen tilldelas en *primärnyckel* och en *sekundärnyckeln*.</span><span class="sxs-lookup"><span data-stu-id="16c33-131">After you create hello policy, it is assigned a *Primary Key* and a *Secondary Key*.</span></span> <span data-ttu-id="16c33-132">Dessa är kryptografiskt starka nycklar.</span><span class="sxs-lookup"><span data-stu-id="16c33-132">These are cryptographically strong keys.</span></span> <span data-ttu-id="16c33-133">Inte förlorar dem eller läcka ut de - de alltid är tillgängliga i hello [Azure-portalen][Azure portal].</span><span class="sxs-lookup"><span data-stu-id="16c33-133">Don't lose them or leak them - they'll always be available in hello [Azure portal][Azure portal].</span></span> <span data-ttu-id="16c33-134">Du kan använda antingen hello genererade nycklar och återskapa dem när som helst.</span><span class="sxs-lookup"><span data-stu-id="16c33-134">You can use either of hello generated keys, and you can regenerate them at any time.</span></span> <span data-ttu-id="16c33-135">Men om du återskapa eller ändra hello primärnyckel i hello princip blir alla signaturer för delad åtkomst som skapats från den ogiltiga.</span><span class="sxs-lookup"><span data-stu-id="16c33-135">However, if you regenerate or change hello primary key in hello policy, any Shared Access Signatures created from it will be invalidated.</span></span>

<span data-ttu-id="16c33-136">När du skapar ett namnområde för Service Bus, skapas automatiskt en princip för hello hela namnområdet som kallas **RootManageSharedAccessKey**, och den här principen har alla behörigheter.</span><span class="sxs-lookup"><span data-stu-id="16c33-136">When you create a Service Bus namespace, a policy is automatically created for hello entire namespace called **RootManageSharedAccessKey**, and this policy has all permissions.</span></span> <span data-ttu-id="16c33-137">Du inte logga in som **rot**, så att inte använda den här principen om det finns en mycket bra anledning.</span><span class="sxs-lookup"><span data-stu-id="16c33-137">You don't log on as **root**, so don't use this policy unless there's a really good reason.</span></span> <span data-ttu-id="16c33-138">Du kan skapa ytterligare principer i hello **konfigurera** för hello namnområde i hello-portalen.</span><span class="sxs-lookup"><span data-stu-id="16c33-138">You can create additional policies in hello **Configure** tab for hello namespace in hello portal.</span></span> <span data-ttu-id="16c33-139">Det är viktigt toonote som en enda träd i Service Bus (namnområdet, kön, etc.) kan bara ha in too12 principer kopplade tooit.</span><span class="sxs-lookup"><span data-stu-id="16c33-139">It's important toonote that a single tree level in Service Bus (namespace, queue, etc.) can only have up too12 policies attached tooit.</span></span>

## <a name="configuration-for-shared-access-signature-authentication"></a><span data-ttu-id="16c33-140">Konfiguration för autentisering med signatur för delad åtkomst</span><span class="sxs-lookup"><span data-stu-id="16c33-140">Configuration for Shared Access Signature authentication</span></span>
<span data-ttu-id="16c33-141">Du kan konfigurera hello [SharedAccessAuthorizationRule](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule) regeln på Service Bus-namnområden, köer och ämnen.</span><span class="sxs-lookup"><span data-stu-id="16c33-141">You can configure hello [SharedAccessAuthorizationRule](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule) rule on Service Bus namespaces, queues, or topics.</span></span> <span data-ttu-id="16c33-142">Konfigurera en [SharedAccessAuthorizationRule](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule) på en Service Bus prenumeration stöds inte för närvarande, men du kan använda regler som konfigurerats på ett namnområde eller avsnittet toosecure åtkomst toosubscriptions.</span><span class="sxs-lookup"><span data-stu-id="16c33-142">Configuring a [SharedAccessAuthorizationRule](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule) on a Service Bus subscription is currently not supported, but you can use rules configured on a namespace or topic toosecure access toosubscriptions.</span></span> <span data-ttu-id="16c33-143">En fungerande exempel som visar den här proceduren finns hello [autentisering med delad signatur åtkomst (SAS) med Service Bus prenumerationer](http://code.msdn.microsoft.com/Using-Shared-Access-e605b37c) exempel.</span><span class="sxs-lookup"><span data-stu-id="16c33-143">For a working sample that illustrates this procedure, see hello [Using Shared Access Signature (SAS) authentication with Service Bus Subscriptions](http://code.msdn.microsoft.com/Using-Shared-Access-e605b37c) sample.</span></span>

<span data-ttu-id="16c33-144">Maximalt 12 regler kan konfigureras på Service Bus-namnområde, kö eller i avsnittet.</span><span class="sxs-lookup"><span data-stu-id="16c33-144">A maximum of 12 such rules can be configured on a Service Bus namespace, queue, or topic.</span></span> <span data-ttu-id="16c33-145">Regler som är konfigurerade på en Service Bus-namnrymd gäller tooall entiteter i namnutrymmet.</span><span class="sxs-lookup"><span data-stu-id="16c33-145">Rules that are configured on a Service Bus namespace apply tooall entities in that namespace.</span></span>

![SAS](./media/service-bus-sas/service-bus-namespace.png)

<span data-ttu-id="16c33-147">I den här bilden hello *manageRuleNS*, *sendRuleNS*, och *listenRuleNS* auktoriseringsregler tillämpa tooboth kön F1 och avsnittet T1, medan *listenRuleQ*  och *sendRuleQ* gäller endast tooqueue F1 och *sendRuleT* gäller endast tootopic T1.</span><span class="sxs-lookup"><span data-stu-id="16c33-147">In this figure, hello *manageRuleNS*, *sendRuleNS*, and *listenRuleNS* authorization rules apply tooboth queue Q1 and topic T1, while *listenRuleQ* and *sendRuleQ* apply only tooqueue Q1 and *sendRuleT* applies only tootopic T1.</span></span>

<span data-ttu-id="16c33-148">Hej nyckelparametrar av en [SharedAccessAuthorizationRule](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule) är följande:</span><span class="sxs-lookup"><span data-stu-id="16c33-148">hello key parameters of a [SharedAccessAuthorizationRule](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule) are as follows:</span></span>

| <span data-ttu-id="16c33-149">Parameter</span><span class="sxs-lookup"><span data-stu-id="16c33-149">Parameter</span></span> | <span data-ttu-id="16c33-150">Beskrivning</span><span class="sxs-lookup"><span data-stu-id="16c33-150">Description</span></span> |
| --- | --- |
| <span data-ttu-id="16c33-151">*Nyckelnamn*</span><span class="sxs-lookup"><span data-stu-id="16c33-151">*KeyName*</span></span> |<span data-ttu-id="16c33-152">En sträng som beskriver hello auktoriseringsregeln.</span><span class="sxs-lookup"><span data-stu-id="16c33-152">A string that describes hello authorization rule.</span></span> |
| <span data-ttu-id="16c33-153">*PrimaryKey*</span><span class="sxs-lookup"><span data-stu-id="16c33-153">*PrimaryKey*</span></span> |<span data-ttu-id="16c33-154">En base64-kodad 256-bitars primär nyckel för signering och verifiera hello SAS-token.</span><span class="sxs-lookup"><span data-stu-id="16c33-154">A base64-encoded 256-bit primary key for signing and validating hello SAS token.</span></span> |
| <span data-ttu-id="16c33-155">*Sekundär nyckel*</span><span class="sxs-lookup"><span data-stu-id="16c33-155">*SecondaryKey*</span></span> |<span data-ttu-id="16c33-156">En base64-kodad 256-bitars sekundär nyckel för signering och verifiera hello SAS-token.</span><span class="sxs-lookup"><span data-stu-id="16c33-156">A base64-encoded 256-bit secondary key for signing and validating hello SAS token.</span></span> |
| <span data-ttu-id="16c33-157">*AccessRights*</span><span class="sxs-lookup"><span data-stu-id="16c33-157">*AccessRights*</span></span> |<span data-ttu-id="16c33-158">En lista över åtkomsträttigheter Hej auktoriseringsregeln har beviljat.</span><span class="sxs-lookup"><span data-stu-id="16c33-158">A list of access rights granted by hello authorization rule.</span></span> <span data-ttu-id="16c33-159">Dessa rättigheter kan vara en samling av lyssna, skicka och hantera rättigheter.</span><span class="sxs-lookup"><span data-stu-id="16c33-159">These rights can be any collection of Listen, Send, and Manage rights.</span></span> |

<span data-ttu-id="16c33-160">När ett namnområde för Service Bus etableras en [SharedAccessAuthorizationRule](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule), med [KeyName](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule#Microsoft_ServiceBus_Messaging_SharedAccessAuthorizationRule_KeyName) ställa in också**RootManageSharedAccessKey**, skapas som standard.</span><span class="sxs-lookup"><span data-stu-id="16c33-160">When a Service Bus namespace is provisioned, a [SharedAccessAuthorizationRule](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule), with [KeyName](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule#Microsoft_ServiceBus_Messaging_SharedAccessAuthorizationRule_KeyName) set too**RootManageSharedAccessKey**, is created by default.</span></span>

## <a name="generate-a-shared-access-signature-token"></a><span data-ttu-id="16c33-161">Generera en signatur för delad åtkomst (token)</span><span class="sxs-lookup"><span data-stu-id="16c33-161">Generate a Shared Access Signature (token)</span></span>

<span data-ttu-id="16c33-162">hello principen är inte hello åtkomsttoken för Service Bus.</span><span class="sxs-lookup"><span data-stu-id="16c33-162">hello policy itself is not hello access token for Service Bus.</span></span> <span data-ttu-id="16c33-163">Det är hello objekt från vilka hello åtkomst-token genereras - med antingen hello primära och sekundära nycklarna.</span><span class="sxs-lookup"><span data-stu-id="16c33-163">It is hello object from which hello access token is generated - using either hello primary or secondary key.</span></span> <span data-ttu-id="16c33-164">Alla klienter som har åtkomst toohello Signeringsnycklar som anges i hello auktoriseringsregeln för delad åtkomst kan generera hello SAS-token.</span><span class="sxs-lookup"><span data-stu-id="16c33-164">Any client that has access toohello signing keys specified in hello shared access authorization rule can generate hello SAS token.</span></span> <span data-ttu-id="16c33-165">hello-token genereras av noggrant utforma en sträng i hello följande format:</span><span class="sxs-lookup"><span data-stu-id="16c33-165">hello token is generated by carefully crafting a string in hello following format:</span></span>

```
SharedAccessSignature sig=<signature-string>&se=<expiry>&skn=<keyName>&sr=<URL-encoded-resourceURI>
```

<span data-ttu-id="16c33-166">Där `signature-string` är hello SHA-256-hash för hello omfattning hello token (**omfång** enligt beskrivningen i föregående avsnitt i hello) med en CRLF läggs och en förfallotiden (i sekunder sedan hello epok: `00:00:00 UTC` på 1 januari 1970).</span><span class="sxs-lookup"><span data-stu-id="16c33-166">Where `signature-string` is hello SHA-256 hash of hello scope of hello token (**scope** as described in hello previous section) with a CRLF appended and an expiry time (in seconds since hello epoch: `00:00:00 UTC` on 1 January 1970).</span></span> 

> [!NOTE]
> <span data-ttu-id="16c33-167">tooavoid taget kort token upphör att gälla, rekommenderas du att koda hello utgången tid-värden som på minst 32-bitars heltal eller helst en lång (64-bitars) heltal.</span><span class="sxs-lookup"><span data-stu-id="16c33-167">tooavoid a short token expiry time, it is recommended that you encode hello expiry time value as at least a 32-bit unsigned integer, or preferably a long (64-bit) integer.</span></span>  
> 
> 

<span data-ttu-id="16c33-168">hello hash verkar liknande toohello följande pseudokolumner koden och returnerar 32 byte.</span><span class="sxs-lookup"><span data-stu-id="16c33-168">hello hash looks similar toohello following pseudo code and returns 32 bytes.</span></span>

```
SHA-256('https://<yournamespace>.servicebus.windows.net/'+'\n'+ 1438205742)
```

<span data-ttu-id="16c33-169">hello-hash-värden är i hello **SharedAccessSignature** sträng så att hello mottagaren kan beräkna hello hash med hello hello samma parametrar, toobe till att returnera samma resultat.</span><span class="sxs-lookup"><span data-stu-id="16c33-169">hello non-hashed values are in hello **SharedAccessSignature** string so that hello recipient can compute hello hash with hello same parameters, toobe sure that it returns hello same result.</span></span> <span data-ttu-id="16c33-170">hello URI anger hello omfattning och hello nyckelnamn identifierar hello för toobe används toocompute hello hash.</span><span class="sxs-lookup"><span data-stu-id="16c33-170">hello URI specifies hello scope, and hello key name identifies hello policy toobe used toocompute hello hash.</span></span> <span data-ttu-id="16c33-171">Detta är viktigt ur säkerhetssynpunkt.</span><span class="sxs-lookup"><span data-stu-id="16c33-171">This is important from a security standpoint.</span></span> <span data-ttu-id="16c33-172">Om hello signaturen inte matchar som beräknar vilka hello mottagaren (Service Bus), nekas åtkomst.</span><span class="sxs-lookup"><span data-stu-id="16c33-172">If hello signature doesn't match that which hello recipient (Service Bus) calculates, then access is denied.</span></span> <span data-ttu-id="16c33-173">Nu kan du vara säker hello sändaren hade toohello åtkomstnyckel och bör tilldelas hello rättigheter anges i hello-policy.</span><span class="sxs-lookup"><span data-stu-id="16c33-173">At this point you can be sure that hello sender had access toohello key and should be granted hello rights specified in hello policy.</span></span>

<span data-ttu-id="16c33-174">Observera att du ska använda hello kodad resurs-URI för den här åtgärden.</span><span class="sxs-lookup"><span data-stu-id="16c33-174">Note that you should use hello encoded resource URI for this operation.</span></span> <span data-ttu-id="16c33-175">hello resurs-URI är hello fullständiga URI: N för hello Service Bus resursåtkomst toowhich begärs.</span><span class="sxs-lookup"><span data-stu-id="16c33-175">hello resource URI is hello full URI of hello Service Bus resource toowhich access is claimed.</span></span> <span data-ttu-id="16c33-176">Till exempel `http://<namespace>.servicebus.windows.net/<entityPath>` eller `sb://<namespace>.servicebus.windows.net/<entityPath>`, dvs `http://contoso.servicebus.windows.net/contosoTopics/T1/Subscriptions/S3`.</span><span class="sxs-lookup"><span data-stu-id="16c33-176">For example, `http://<namespace>.servicebus.windows.net/<entityPath>` or `sb://<namespace>.servicebus.windows.net/<entityPath>`; that is, `http://contoso.servicebus.windows.net/contosoTopics/T1/Subscriptions/S3`.</span></span>

<span data-ttu-id="16c33-177">auktoriseringsregeln för delad åtkomst av hello användas för signering måste konfigureras på hello enheten som anges av den här URI: N eller av en av dess hierarkiska överordnade.</span><span class="sxs-lookup"><span data-stu-id="16c33-177">hello shared access authorization rule used for signing must be configured on hello entity specified by this URI, or by one of its hierarchical parents.</span></span> <span data-ttu-id="16c33-178">Till exempel `http://contoso.servicebus.windows.net/contosoTopics/T1` eller `http://contoso.servicebus.windows.net` i hello föregående exempel.</span><span class="sxs-lookup"><span data-stu-id="16c33-178">For example, `http://contoso.servicebus.windows.net/contosoTopics/T1` or `http://contoso.servicebus.windows.net` in hello previous example.</span></span>

<span data-ttu-id="16c33-179">En SAS-token är giltig för alla resurser under hello `<resourceURI>` används i hello `signature-string`.</span><span class="sxs-lookup"><span data-stu-id="16c33-179">A SAS token is valid for all resources under hello `<resourceURI>` used in hello `signature-string`.</span></span>

<span data-ttu-id="16c33-180">Hej [KeyName](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule#Microsoft_ServiceBus_Messaging_SharedAccessAuthorizationRule_KeyName) i hello SAS-token refererar toohello **keyName** av hello auktoriseringsregeln för delad åtkomst används toogenerate hello-token.</span><span class="sxs-lookup"><span data-stu-id="16c33-180">hello [KeyName](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule#Microsoft_ServiceBus_Messaging_SharedAccessAuthorizationRule_KeyName) in hello SAS token refers toohello **keyName** of hello shared access authorization rule used toogenerate hello token.</span></span>

<span data-ttu-id="16c33-181">Hej *URL-kodade resourceURI* måste vara hello samma som hello URI som används i hello sträng till logga under hello beräkningen av hello signatur.</span><span class="sxs-lookup"><span data-stu-id="16c33-181">hello *URL-encoded-resourceURI* must be hello same as hello URI used in hello string-to-sign during hello computation of hello signature.</span></span> <span data-ttu-id="16c33-182">Det bör vara [procent-kodade](https://msdn.microsoft.com/library/4fkewx0t.aspx).</span><span class="sxs-lookup"><span data-stu-id="16c33-182">It should be [percent-encoded](https://msdn.microsoft.com/library/4fkewx0t.aspx).</span></span>

<span data-ttu-id="16c33-183">Vi rekommenderar att du regelbundet återskapar hello nycklarna som används i hello [SharedAccessAuthorizationRule](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule) objekt.</span><span class="sxs-lookup"><span data-stu-id="16c33-183">It is recommended that you periodically regenerate hello keys used in hello [SharedAccessAuthorizationRule](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule) object.</span></span> <span data-ttu-id="16c33-184">Program ska normalt använda hello [PrimaryKey](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule#Microsoft_ServiceBus_Messaging_SharedAccessAuthorizationRule_PrimaryKey) toogenerate en SAS-token.</span><span class="sxs-lookup"><span data-stu-id="16c33-184">Applications should generally use hello [PrimaryKey](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule#Microsoft_ServiceBus_Messaging_SharedAccessAuthorizationRule_PrimaryKey) toogenerate a SAS token.</span></span> <span data-ttu-id="16c33-185">När du återskapar hello nycklar, bör du ersätta hello [sekundär nyckel](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule#Microsoft_ServiceBus_Messaging_SharedAccessAuthorizationRule_SecondaryKey) med hello gamla primära nyckeln och skapa en ny nyckel som hello nya primärnyckeln.</span><span class="sxs-lookup"><span data-stu-id="16c33-185">When regenerating hello keys, you should replace hello [SecondaryKey](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule#Microsoft_ServiceBus_Messaging_SharedAccessAuthorizationRule_SecondaryKey) with hello old primary key, and generate a new key as hello new primary key.</span></span> <span data-ttu-id="16c33-186">Detta gör att du toocontinue använda token för auktorisering som har utfärdats med hello gamla primärnyckel och som ännu inte har gått ut.</span><span class="sxs-lookup"><span data-stu-id="16c33-186">This enables you toocontinue using tokens for authorization that were issued with hello old primary key, and that have not yet expired.</span></span>

<span data-ttu-id="16c33-187">Om du har toorevoke hello nycklar och en nyckel har komprometterats du återskapa båda hello [PrimaryKey](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule#Microsoft_ServiceBus_Messaging_SharedAccessAuthorizationRule_PrimaryKey) och hello [sekundär nyckel](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule#Microsoft_ServiceBus_Messaging_SharedAccessAuthorizationRule_SecondaryKey) av en [SharedAccessAuthorizationRule](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule), ersätta dem med nya nycklar.</span><span class="sxs-lookup"><span data-stu-id="16c33-187">If a key is compromised and you have toorevoke hello keys, you can regenerate both hello [PrimaryKey](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule#Microsoft_ServiceBus_Messaging_SharedAccessAuthorizationRule_PrimaryKey) and hello [SecondaryKey](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule#Microsoft_ServiceBus_Messaging_SharedAccessAuthorizationRule_SecondaryKey) of a [SharedAccessAuthorizationRule](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule), replacing them with new keys.</span></span> <span data-ttu-id="16c33-188">Den här proceduren upphäver alla token som signerats med hello gamla nycklar.</span><span class="sxs-lookup"><span data-stu-id="16c33-188">This procedure invalidates all tokens signed with hello old keys.</span></span>

## <a name="how-toouse-shared-access-signature-authentication-with-service-bus"></a><span data-ttu-id="16c33-189">Hur toouse autentisering med signatur för delad åtkomst med Service Bus</span><span class="sxs-lookup"><span data-stu-id="16c33-189">How toouse Shared Access Signature authentication with Service Bus</span></span>

<span data-ttu-id="16c33-190">hello följande scenarier är konfigurationen av regler för auktorisering, generering av SAS-token och klientauktorisering.</span><span class="sxs-lookup"><span data-stu-id="16c33-190">hello following scenarios include configuration of authorization rules, generation of SAS tokens, and client authorization.</span></span>

<span data-ttu-id="16c33-191">För en fullt fungerande exempel på ett Service Bus-program som visar hello konfiguration och använder SAS auktorisering, se [autentisering med signatur för delad åtkomst med Service Bus](http://code.msdn.microsoft.com/Shared-Access-Signature-0a88adf8).</span><span class="sxs-lookup"><span data-stu-id="16c33-191">For a full working sample of a Service Bus application that illustrates hello configuration and uses SAS authorization, see [Shared Access Signature authentication with Service Bus](http://code.msdn.microsoft.com/Shared-Access-Signature-0a88adf8).</span></span> <span data-ttu-id="16c33-192">Ett relaterade exempel som visar hello användning av SAS-auktoriseringsregler som konfigurerats på namnområden eller avsnitt toosecure Service Bus prenumerationer finns här: [med delade signatur åtkomst (SAS)-autentisering med Service Bus-prenumerationer ](http://code.msdn.microsoft.com/Using-Shared-Access-e605b37c).</span><span class="sxs-lookup"><span data-stu-id="16c33-192">A related sample that illustrates hello use of SAS authorization rules configured on namespaces or topics toosecure Service Bus subscriptions is available here: [Using Shared Access Signature (SAS) authentication with Service Bus Subscriptions](http://code.msdn.microsoft.com/Using-Shared-Access-e605b37c).</span></span>

## <a name="access-shared-access-authorization-rules-on-a-namespace"></a><span data-ttu-id="16c33-193">Åtkomst till delade åtkomst auktoriseringsregler för ett namnområde</span><span class="sxs-lookup"><span data-stu-id="16c33-193">Access Shared Access Authorization rules on a namespace</span></span>

<span data-ttu-id="16c33-194">Autentisering med datorcertifikat krävs för åtgärderna i hello rot för Service Bus-namnrymd.</span><span class="sxs-lookup"><span data-stu-id="16c33-194">Operations on hello Service Bus namespace root require certificate authentication.</span></span> <span data-ttu-id="16c33-195">Du måste överföra ett certifikat för din Azure-prenumeration.</span><span class="sxs-lookup"><span data-stu-id="16c33-195">You must upload a management certificate for your Azure subscription.</span></span> <span data-ttu-id="16c33-196">tooupload ett hanteringscertifikat hello gör [här](../cloud-services/cloud-services-configure-ssl-certificate-portal.md#step-3-upload-a-certificate), med hjälp av hello [Azure-portalen][Azure portal].</span><span class="sxs-lookup"><span data-stu-id="16c33-196">tooupload a management certificate, follow hello steps [here](../cloud-services/cloud-services-configure-ssl-certificate-portal.md#step-3-upload-a-certificate), using hello [Azure portal][Azure portal].</span></span> <span data-ttu-id="16c33-197">Mer information om Azure-hanteringscertifikat finns hello [översikt över Azure certifikat](../cloud-services/cloud-services-certs-create.md#what-are-management-certificates).</span><span class="sxs-lookup"><span data-stu-id="16c33-197">For more information about Azure management certificates, see hello [Azure certificates overview](../cloud-services/cloud-services-certs-create.md#what-are-management-certificates).</span></span>

<span data-ttu-id="16c33-198">hello-slutpunkt för att få åtkomst till auktoriseringsregler för delad åtkomst på en Service Bus-namnrymd är följande:</span><span class="sxs-lookup"><span data-stu-id="16c33-198">hello endpoint for accessing shared access authorization rules on a Service Bus namespace is as follows:</span></span>

```http
https://management.core.windows.net/{subscriptionId}/services/ServiceBus/namespaces/{namespace}/AuthorizationRules/
```

<span data-ttu-id="16c33-199">toocreate en [SharedAccessAuthorizationRule](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule) objekt på en Service Bus-namnrymd, kör en POST-åtgärden på den här slutpunkten med information om hello serialiserad som JSON- eller XML.</span><span class="sxs-lookup"><span data-stu-id="16c33-199">toocreate a [SharedAccessAuthorizationRule](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule) object on a Service Bus namespace, execute a POST operation on this endpoint with hello rule information serialized as JSON or XML.</span></span> <span data-ttu-id="16c33-200">Exempel:</span><span class="sxs-lookup"><span data-stu-id="16c33-200">For example:</span></span>

```csharp
// Base address for accessing authorization rules on a namespace
string baseAddress = @"https://management.core.windows.net/<subscriptionId>/services/ServiceBus/namespaces/<namespace>/AuthorizationRules/";

// Configure authorization rule with base64-encoded 256-bit key and Send rights
var sendRule = new SharedAccessAuthorizationRule("contosoSendAll",
    SharedAccessAuthorizationRule.GenerateRandomKey(),
    new[] { AccessRights.Send });

// Operations on hello Service Bus namespace root require certificate authentication.
WebRequestHandler handler = new WebRequestHandler
{
    ClientCertificateOptions = ClientCertificateOption.Manual
};
// Access hello management certificate by subject name
handler.ClientCertificates.Add(GetCertificate(<certificateSN>));

HttpClient httpClient = new HttpClient(handler)
{
    BaseAddress = new Uri(baseAddress)
};
httpClient.DefaultRequestHeaders.Accept.Add(
    new MediaTypeWithQualityHeaderValue("application/json"));
httpClient.DefaultRequestHeaders.Add("x-ms-version", "2015-01-01");

// Execute a POST operation on hello baseAddress above toocreate an auth rule
var postResult = httpClient.PostAsJsonAsync("", sendRule).Result;
```

<span data-ttu-id="16c33-201">På liknande sätt kan använda en GET-åtgärd för hello endpoint tooread hello auktoriseringsregler konfigurerats på hello namnområde.</span><span class="sxs-lookup"><span data-stu-id="16c33-201">Similarly, use a GET operation on hello endpoint tooread hello authorization rules configured on hello namespace.</span></span>

<span data-ttu-id="16c33-202">använda hello följande slutpunkt tooupdate eller ta bort en specifik auktoriseringsregel:</span><span class="sxs-lookup"><span data-stu-id="16c33-202">tooupdate or delete a specific authorization rule, use hello following endpoint:</span></span>

```http
https://management.core.windows.net/{subscriptionId}/services/ServiceBus/namespaces/{namespace}/AuthorizationRules/{KeyName}
```

## <a name="access-shared-access-authorization-rules-on-an-entity"></a><span data-ttu-id="16c33-203">Åtkomst till delade åtkomst auktoriseringsregler för en entitet</span><span class="sxs-lookup"><span data-stu-id="16c33-203">Access Shared Access Authorization rules on an entity</span></span>

<span data-ttu-id="16c33-204">Du kan komma åt en [Microsoft.ServiceBus.Messaging.SharedAccessAuthorizationRule](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule) objekt som konfigurerats på en Service Bus-kö eller ett ämne via hello [AuthorizationRules](/dotnet/api/microsoft.servicebus.messaging.authorizationrules) samling i hello motsvarande [QueueDescription](/dotnet/api/microsoft.servicebus.messaging.queuedescription) eller [TopicDescription](/dotnet/api/microsoft.servicebus.messaging.topicdescription).</span><span class="sxs-lookup"><span data-stu-id="16c33-204">You can access a [Microsoft.ServiceBus.Messaging.SharedAccessAuthorizationRule](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule) object configured on a Service Bus queue or topic through hello [AuthorizationRules](/dotnet/api/microsoft.servicebus.messaging.authorizationrules) collection in hello corresponding [QueueDescription](/dotnet/api/microsoft.servicebus.messaging.queuedescription) or [TopicDescription](/dotnet/api/microsoft.servicebus.messaging.topicdescription).</span></span>

<span data-ttu-id="16c33-205">hello följande kod visar hur tooadd auktoriseringsregler för en kö.</span><span class="sxs-lookup"><span data-stu-id="16c33-205">hello following code shows how tooadd authorization rules for a queue.</span></span>

```csharp
// Create an instance of NamespaceManager for hello operation
NamespaceManager nsm = NamespaceManager.CreateFromConnectionString(
    <connectionString> );
QueueDescription qd = new QueueDescription( <qPath> );

// Create a rule with send rights with keyName as "contosoQSendKey"
// and add it toohello queue description.
qd.Authorization.Add(new SharedAccessAuthorizationRule("contosoSendKey",
    SharedAccessAuthorizationRule.GenerateRandomKey(),
    new[] { AccessRights.Send }));

// Create a rule with listen rights with keyName as "contosoQListenKey"
// and add it toohello queue description.
qd.Authorization.Add(new SharedAccessAuthorizationRule("contosoQListenKey",
    SharedAccessAuthorizationRule.GenerateRandomKey(),
    new[] { AccessRights.Listen }));

// Create a rule with manage rights with keyName as "contosoQManageKey"
// and add it toohello queue description.
// A rule with manage rights must also have send and receive rights.
qd.Authorization.Add(new SharedAccessAuthorizationRule("contosoQManageKey",
    SharedAccessAuthorizationRule.GenerateRandomKey(),
    new[] {AccessRights.Manage, AccessRights.Listen, AccessRights.Send }));

// Create hello queue.
nsm.CreateQueue(qd);
```

## <a name="use-shared-access-signature-authorization"></a><span data-ttu-id="16c33-206">Använda signatur för delad åtkomst auktoriseringsregler</span><span class="sxs-lookup"><span data-stu-id="16c33-206">Use Shared Access Signature authorization</span></span>

<span data-ttu-id="16c33-207">Med hello Service Bus .NET-biblioteken hello Azure .NET SDK-program kan använda SAS-auktorisering via hello [SharedAccessSignatureTokenProvider](/dotnet/api/microsoft.servicebus.sharedaccesssignaturetokenprovider) klass.</span><span class="sxs-lookup"><span data-stu-id="16c33-207">Applications using hello Azure .NET SDK with hello Service Bus .NET libraries can use SAS authorization through hello [SharedAccessSignatureTokenProvider](/dotnet/api/microsoft.servicebus.sharedaccesssignaturetokenprovider) class.</span></span> <span data-ttu-id="16c33-208">hello visar följande kod hello användning av hello tokenleverantör toosend meddelanden tooa Service Bus-kö.</span><span class="sxs-lookup"><span data-stu-id="16c33-208">hello following code illustrates hello use of hello token provider toosend messages tooa Service Bus queue.</span></span>

```csharp
Uri runtimeUri = ServiceBusEnvironment.CreateServiceUri("sb",
    <yourServiceNamespace>, string.Empty);
MessagingFactory mf = MessagingFactory.Create(runtimeUri,
    TokenProvider.CreateSharedAccessSignatureTokenProvider(keyName, key));
QueueClient sendClient = mf.CreateQueueClient(qPath);

//Sending hello message tooqueue.
BrokeredMessage helloMessage = new BrokeredMessage("Hello, Service Bus!");
helloMessage.MessageId = "SAS-Sample-Message";
sendClient.Send(helloMessage);
```

<span data-ttu-id="16c33-209">Program kan också använda SAS för autentisering med hjälp av en SAS-anslutningssträng i metoder som accepterar anslutningssträngar.</span><span class="sxs-lookup"><span data-stu-id="16c33-209">Applications can also use SAS for authentication by using a SAS connection string in methods that accept connection strings.</span></span>

<span data-ttu-id="16c33-210">Observera att toouse SAS-auktorisering med Service Bus reläer, kan du använda SAS-nycklar som konfigurerats på hello Service Bus-namnrymd.</span><span class="sxs-lookup"><span data-stu-id="16c33-210">Note that toouse SAS authorization with Service Bus relays, you can use SAS keys configured on hello Service Bus namespace.</span></span> <span data-ttu-id="16c33-211">Om du skapar ett relä uttryckligen på hello namnområde ([NamespaceManager](/dotnet/api/microsoft.servicebus.namespacemanager) med en [RelayDescription](/dotnet/api/microsoft.servicebus.messaging.relaydescription)) objekt du kan ange hello SAS-regler för att relay.</span><span class="sxs-lookup"><span data-stu-id="16c33-211">If you explicitly create a relay on hello namespace ([NamespaceManager](/dotnet/api/microsoft.servicebus.namespacemanager) with a [RelayDescription](/dotnet/api/microsoft.servicebus.messaging.relaydescription)) object, you can set hello SAS rules just for that relay.</span></span> <span data-ttu-id="16c33-212">toouse SAS-auktorisering med Service Bus-prenumerationer, du kan använda SAS-nycklar som konfigurerats på en Service Bus-namnrymd eller ett ämne.</span><span class="sxs-lookup"><span data-stu-id="16c33-212">toouse SAS authorization with Service Bus subscriptions, you can use SAS keys configured on a Service Bus namespace or on a topic.</span></span>

## <a name="use-hello-shared-access-signature-at-http-level"></a><span data-ttu-id="16c33-213">Använd hello signatur för delad åtkomst (på http-nivå)</span><span class="sxs-lookup"><span data-stu-id="16c33-213">Use hello Shared Access Signature (at HTTP level)</span></span>

<span data-ttu-id="16c33-214">Nu när du vet hur toocreate signaturer för delad åtkomst för alla entiteter i Service Bus, du är klar tooperform en HTTP POST:</span><span class="sxs-lookup"><span data-stu-id="16c33-214">Now that you know how toocreate Shared Access Signatures for any entities in Service Bus, you are ready tooperform an HTTP POST:</span></span>

```http
POST https://<yournamespace>.servicebus.windows.net/<yourentity>/messages
Content-Type: application/json
Authorization: SharedAccessSignature sr=https%3A%2F%2F<yournamespace>.servicebus.windows.net%2F<yourentity>&sig=<yoursignature from code above>&se=1438205742&skn=KeyName
ContentType: application/atom+xml;type=entry;charset=utf-8
``` 

<span data-ttu-id="16c33-215">Kom ihåg att det fungerar för alla.</span><span class="sxs-lookup"><span data-stu-id="16c33-215">Remember, this works for everything.</span></span> <span data-ttu-id="16c33-216">Du kan skapa SAS för kön, ämnet och prenumerationen.</span><span class="sxs-lookup"><span data-stu-id="16c33-216">You can create SAS for a queue, topic, or subscription.</span></span> 

<span data-ttu-id="16c33-217">Om du ger en avsändare eller klienten en SAS-token, de inte har hello nyckeln direkt och de kan inte återställa hello hash tooobtain den.</span><span class="sxs-lookup"><span data-stu-id="16c33-217">If you give a sender or client a SAS token, they don't have hello key directly, and they cannot reverse hello hash tooobtain it.</span></span> <span data-ttu-id="16c33-218">Som sådana har du kontroll över vad de kan komma åt och hur lång tid.</span><span class="sxs-lookup"><span data-stu-id="16c33-218">As such, you have control over what they can access, and for how long.</span></span> <span data-ttu-id="16c33-219">En viktig sak tooremember är att om du ändrar hello primärnyckel i hello princip alla signaturer för delad åtkomst som skapats från den blir ogiltiga.</span><span class="sxs-lookup"><span data-stu-id="16c33-219">An important thing tooremember is that if you change hello primary key in hello policy, any Shared Access Signatures created from it will be invalidated.</span></span>

## <a name="use-hello-shared-access-signature-at-amqp-level"></a><span data-ttu-id="16c33-220">Använd hello signatur för delad åtkomst (på AMQP nivå)</span><span class="sxs-lookup"><span data-stu-id="16c33-220">Use hello Shared Access Signature (at AMQP level)</span></span>

<span data-ttu-id="16c33-221">I föregående avsnitt hello sett du hur toouse hello SAS-token med en HTTP POST-begäran för att skicka data toohello Service Bus.</span><span class="sxs-lookup"><span data-stu-id="16c33-221">In hello previous section, you saw how toouse hello SAS token with an HTTP POST request for sending data toohello Service Bus.</span></span> <span data-ttu-id="16c33-222">Som du vet du kan komma åt Service Bus använder hello avancerade Message Queuing Protocol (AMQP) som är hello önskad protokollet toouse av prestandaskäl i många scenarier.</span><span class="sxs-lookup"><span data-stu-id="16c33-222">As you know, you can access Service Bus using hello Advanced Message Queuing Protocol (AMQP) that is hello preferred protocol toouse for performance reasons, in many scenarios.</span></span> <span data-ttu-id="16c33-223">hello SAS-token användning med AMQP beskrivs i hello dokumentet [AMQP Claim-Based Security Version 1.0](https://www.oasis-open.org/committees/download.php/50506/amqp-cbs-v1%200-wd02%202013-08-12.doc) som är i utkastet sedan 2013 men väl stöds av Azure idag.</span><span class="sxs-lookup"><span data-stu-id="16c33-223">hello SAS token usage with AMQP is described in hello document [AMQP Claim-Based Security Version 1.0](https://www.oasis-open.org/committees/download.php/50506/amqp-cbs-v1%200-wd02%202013-08-12.doc) that is in working draft since 2013 but well-supported by Azure today.</span></span>

<span data-ttu-id="16c33-224">Innan du startar toosend data tooService Bus hello publisher måste skicka hello SAS-token i en AMQP tooa väldefinierade AMQP Meddelandenod med namnet **$cbs** (du kan se det som en ”särskilda” kö som används av hello service tooacquire och verifiera att alla hello SAS-token).</span><span class="sxs-lookup"><span data-stu-id="16c33-224">Before starting toosend data tooService Bus, hello publisher must send hello SAS token inside an AMQP message tooa well-defined AMQP node named **$cbs** (you can see it as a "special" queue used by hello service tooacquire and validate all hello SAS tokens).</span></span> <span data-ttu-id="16c33-225">hello publisher måste ange hello **ReplyTo** fältet i AMQP hälsningsmeddelande; detta är hello nod i vilka hello tjänsten svarar toohello utgivaren med hello resultatet av hello token verifiering (ett enkelt request/reply-mönster mellan utgivare och service).</span><span class="sxs-lookup"><span data-stu-id="16c33-225">hello publisher must specify hello **ReplyTo** field inside hello AMQP message; this is hello node in which hello service replies toohello publisher with hello result of hello token validation (a simple request/reply pattern between publisher and service).</span></span> <span data-ttu-id="16c33-226">Detta svar noder har skapats ”på hello direkt”, talar om ”skapas dynamiskt fjärrnoden” enligt beskrivningen av hello AMQP 1.0-specifikationen.</span><span class="sxs-lookup"><span data-stu-id="16c33-226">This reply node is created "on hello fly," speaking about "dynamic creation of remote node" as described by hello AMQP 1.0 specification.</span></span> <span data-ttu-id="16c33-227">När du har kontrollerat att hello SAS-token är giltig hello publisher går framåt och starta toosend data toohello-tjänsten.</span><span class="sxs-lookup"><span data-stu-id="16c33-227">After checking that hello SAS token is valid, hello publisher can go forward and start toosend data toohello service.</span></span>

<span data-ttu-id="16c33-228">hello följande steg visar hur toosend hello SAS-token med AMQP-protokollet med hello [AMQP.Net Lite](https://github.com/Azure/amqpnetlite) bibliotek.</span><span class="sxs-lookup"><span data-stu-id="16c33-228">hello following steps show how toosend hello SAS token with AMQP protocol using hello [AMQP.Net Lite](https://github.com/Azure/amqpnetlite) library.</span></span> <span data-ttu-id="16c33-229">Detta är användbart om du inte kan använda hello officiella Service Bus SDK (till exempel på WinRT .net Compact Framework, .net Framework Micro och Mono) utveckla C\#.</span><span class="sxs-lookup"><span data-stu-id="16c33-229">This is useful if you can't use hello official Service Bus SDK (for example on WinRT, .Net Compact Framework, .Net Micro Framework and Mono) developing in C\#.</span></span> <span data-ttu-id="16c33-230">Naturligtvis kan det här biblioteket är användbara toohelp förstå hur anspråksbaserade fungerar på hello AMQP nivå som du såg hur det fungerar på hello HTTP-nivå (med en HTTP POST-begäran och hello SAS token skickade inuti hello ”” autentiseringshuvud).</span><span class="sxs-lookup"><span data-stu-id="16c33-230">Of course, this library is useful toohelp understand how claims-based security works at hello AMQP level, as you saw how it works at hello HTTP level (with an HTTP POST request and hello SAS token sent inside hello "Authorization" header).</span></span> <span data-ttu-id="16c33-231">Om du inte behöver dessa djup kunskaper om AMQP, kan du använda hello officiella Service Bus SDK med .net Framework-program, vilket gör det åt dig.</span><span class="sxs-lookup"><span data-stu-id="16c33-231">If you don't need such deep knowledge about AMQP, you can use hello official Service Bus SDK with .Net Framework applications, which will do it for you.</span></span>

### <a name="c35"></a><span data-ttu-id="16c33-232">C&#35;</span><span class="sxs-lookup"><span data-stu-id="16c33-232">C&#35;</span></span>

```csharp
/// <summary>
/// Send claim-based security (CBS) token
/// </summary>
/// <param name="shareAccessSignature">Shared access signature (token) toosend</param>
private bool PutCbsToken(Connection connection, string sasToken)
{
    bool result = true;
    Session session = new Session(connection);

    string cbsClientAddress = "cbs-client-reply-to";
    var cbsSender = new SenderLink(session, "cbs-sender", "$cbs");
    var cbsReceiver = new ReceiverLink(session, cbsClientAddress, "$cbs");

    // construct hello put-token message
    var request = new Message(sasToken);
    request.Properties = new Properties();
    request.Properties.MessageId = Guid.NewGuid().ToString();
    request.Properties.ReplyTo = cbsClientAddress;
    request.ApplicationProperties = new ApplicationProperties();
    request.ApplicationProperties["operation"] = "put-token";
    request.ApplicationProperties["type"] = "servicebus.windows.net:sastoken";
    request.ApplicationProperties["name"] = Fx.Format("amqp://{0}/{1}", sbNamespace, entity);
    cbsSender.Send(request);

    // receive hello response
    var response = cbsReceiver.Receive();
    if (response == null || response.Properties == null || response.ApplicationProperties == null)
    {
        result = false;
    }
    else
    {
        int statusCode = (int)response.ApplicationProperties["status-code"];
        if (statusCode != (int)HttpStatusCode.Accepted && statusCode != (int)HttpStatusCode.OK)
        {
            result = false;
        }
    }

    // hello sender/receiver may be kept open for refreshing tokens
    cbsSender.Close();
    cbsReceiver.Close();
    session.Close();

    return result;
}
```

<span data-ttu-id="16c33-233">Hej `PutCbsToken()` metoden tar emot hello *anslutning* (AMQP anslutning-klassinstans som tillhandahålls av hello [AMQP .NET Lite biblioteket](https://github.com/Azure/amqpnetlite)) som representerar hello TCP-anslutningstjänst toohello och hello *sasToken* parameter hello SAS-token toosend.</span><span class="sxs-lookup"><span data-stu-id="16c33-233">hello `PutCbsToken()` method receives hello *connection* (AMQP connection class instance as provided by hello [AMQP .NET Lite library](https://github.com/Azure/amqpnetlite)) that represents hello TCP connection toohello service and hello *sasToken* parameter that is hello SAS token toosend.</span></span> 

> [!NOTE]
> <span data-ttu-id="16c33-234">Det är viktigt att hello anslutningen har skapats med **SASL autentiseringsmekanism ange tooEXTERNAL** (och inte hello standard OFORMATERAD med användarnamn och lösenord som används när du inte behöver toosend hello SAS-token).</span><span class="sxs-lookup"><span data-stu-id="16c33-234">It's important that hello connection is created with **SASL authentication mechanism set tooEXTERNAL** (and not hello default PLAIN with username and password used when you don't need toosend hello SAS token).</span></span>
> 
> 

<span data-ttu-id="16c33-235">Därefter skapas hello två AMQP länkar för att skicka hello SAS-token och ta emot hello svar (hello token validering resultat) från hello-tjänsten.</span><span class="sxs-lookup"><span data-stu-id="16c33-235">Next, hello publisher creates two AMQP links for sending hello SAS token and receiving hello reply (hello token validation result) from hello service.</span></span>

<span data-ttu-id="16c33-236">AMQP hello-meddelande innehåller en uppsättning egenskaper och mer än ett enkelt meddelande.</span><span class="sxs-lookup"><span data-stu-id="16c33-236">hello AMQP message contains a set of properties, and more information than a simple message.</span></span> <span data-ttu-id="16c33-237">hello SAS-token är hello brödtext hello-meddelande (med sin konstruktor).</span><span class="sxs-lookup"><span data-stu-id="16c33-237">hello SAS token is hello body of hello message (using its constructor).</span></span> <span data-ttu-id="16c33-238">Hej **”ReplyTo”** egenskapen toohello nodnamnet för att ta emot hello validering resultat på hello mottagaren länk (du kan ändra dess namn om du vill och den kommer att skapas dynamiskt av hello-tjänsten).</span><span class="sxs-lookup"><span data-stu-id="16c33-238">hello **"ReplyTo"** property is set toohello node name for receiving hello validation result on hello receiver link (you can change its name if you want, and it will be created dynamically by hello service).</span></span> <span data-ttu-id="16c33-239">hello sista tre program/anpassade egenskaper som används av hello service tooindicate vilken typ av åtgärd som den har tooexecute.</span><span class="sxs-lookup"><span data-stu-id="16c33-239">hello last three application/custom properties are used by hello service tooindicate what kind of operation it has tooexecute.</span></span> <span data-ttu-id="16c33-240">Enligt beskrivningen av hello CBS utkast till en specifikation måste de vara hello **åtgärdsnamn** (”put-token”), hello **typ av token** (i det här fallet en ”servicebus.windows.net:sastoken”), och hello **” namnet ”för hello målgruppen** toowhich hello token gäller (hello hela entitet).</span><span class="sxs-lookup"><span data-stu-id="16c33-240">As described by hello CBS draft specification, they must be hello **operation name** ("put-token"), hello **type of token** (in this case, a "servicebus.windows.net:sastoken"), and hello **"name" of hello audience** toowhich hello token applies (hello entire entity).</span></span>

<span data-ttu-id="16c33-241">När du har skickat hello SAS-token på hello avsändaren länk läsa hello publisher hello svara på hello mottagaren länk.</span><span class="sxs-lookup"><span data-stu-id="16c33-241">After sending hello SAS token on hello sender link, hello publisher must read hello reply on hello receiver link.</span></span> <span data-ttu-id="16c33-242">hello svar är ett enkelt AMQP-meddelande med en program-egenskap med namnet **”statuskod”** som kan innehålla hello samma värden som en HTTP-statuskod.</span><span class="sxs-lookup"><span data-stu-id="16c33-242">hello reply is a simple AMQP message with an application property named **"status-code"** that can contain hello same values as an HTTP status code.</span></span>

## <a name="rights-required-for-service-bus-operations"></a><span data-ttu-id="16c33-243">Rättigheter som krävs för Service Bus-åtgärder</span><span class="sxs-lookup"><span data-stu-id="16c33-243">Rights required for Service Bus operations</span></span>

<span data-ttu-id="16c33-244">hello visar följande tabell hello behörigheter som krävs för olika åtgärder på Service Bus-resurser.</span><span class="sxs-lookup"><span data-stu-id="16c33-244">hello following table shows hello access rights required for various operations on Service Bus resources.</span></span>

| <span data-ttu-id="16c33-245">Åtgärd</span><span class="sxs-lookup"><span data-stu-id="16c33-245">Operation</span></span> | <span data-ttu-id="16c33-246">Anspråk krävs</span><span class="sxs-lookup"><span data-stu-id="16c33-246">Claim Required</span></span> | <span data-ttu-id="16c33-247">Anspråk omfång</span><span class="sxs-lookup"><span data-stu-id="16c33-247">Claim Scope</span></span> |
| --- | --- | --- |
| <span data-ttu-id="16c33-248">**Namespace**</span><span class="sxs-lookup"><span data-stu-id="16c33-248">**Namespace**</span></span> | | |
| <span data-ttu-id="16c33-249">Konfigurera auktoriseringsregeln för ett namnområde</span><span class="sxs-lookup"><span data-stu-id="16c33-249">Configure authorization rule on a namespace</span></span> |<span data-ttu-id="16c33-250">Hantera</span><span class="sxs-lookup"><span data-stu-id="16c33-250">Manage</span></span> |<span data-ttu-id="16c33-251">Alla adresser i namnområdet</span><span class="sxs-lookup"><span data-stu-id="16c33-251">Any namespace address</span></span> |
| <span data-ttu-id="16c33-252">**Tjänsten registret**</span><span class="sxs-lookup"><span data-stu-id="16c33-252">**Service Registry**</span></span> | | |
| <span data-ttu-id="16c33-253">Räkna upp privata principer</span><span class="sxs-lookup"><span data-stu-id="16c33-253">Enumerate Private Policies</span></span> |<span data-ttu-id="16c33-254">Hantera</span><span class="sxs-lookup"><span data-stu-id="16c33-254">Manage</span></span> |<span data-ttu-id="16c33-255">Alla adresser i namnområdet</span><span class="sxs-lookup"><span data-stu-id="16c33-255">Any namespace address</span></span> |
| <span data-ttu-id="16c33-256">Börja lyssna på ett namnområde</span><span class="sxs-lookup"><span data-stu-id="16c33-256">Begin listening on a namespace</span></span> |<span data-ttu-id="16c33-257">Lyssna</span><span class="sxs-lookup"><span data-stu-id="16c33-257">Listen</span></span> |<span data-ttu-id="16c33-258">Alla adresser i namnområdet</span><span class="sxs-lookup"><span data-stu-id="16c33-258">Any namespace address</span></span> |
| <span data-ttu-id="16c33-259">Skicka meddelanden tooa lyssnare i ett namnområde</span><span class="sxs-lookup"><span data-stu-id="16c33-259">Send messages tooa listener at a namespace</span></span> |<span data-ttu-id="16c33-260">Skicka</span><span class="sxs-lookup"><span data-stu-id="16c33-260">Send</span></span> |<span data-ttu-id="16c33-261">Alla adresser i namnområdet</span><span class="sxs-lookup"><span data-stu-id="16c33-261">Any namespace address</span></span> |
| <span data-ttu-id="16c33-262">**Kön**</span><span class="sxs-lookup"><span data-stu-id="16c33-262">**Queue**</span></span> | | |
| <span data-ttu-id="16c33-263">Skapa en kö</span><span class="sxs-lookup"><span data-stu-id="16c33-263">Create a queue</span></span> |<span data-ttu-id="16c33-264">Hantera</span><span class="sxs-lookup"><span data-stu-id="16c33-264">Manage</span></span> |<span data-ttu-id="16c33-265">Alla adresser i namnområdet</span><span class="sxs-lookup"><span data-stu-id="16c33-265">Any namespace address</span></span> |
| <span data-ttu-id="16c33-266">Ta bort en kö</span><span class="sxs-lookup"><span data-stu-id="16c33-266">Delete a queue</span></span> |<span data-ttu-id="16c33-267">Hantera</span><span class="sxs-lookup"><span data-stu-id="16c33-267">Manage</span></span> |<span data-ttu-id="16c33-268">En giltig kö-adress</span><span class="sxs-lookup"><span data-stu-id="16c33-268">Any valid queue address</span></span> |
| <span data-ttu-id="16c33-269">Räkna upp köer</span><span class="sxs-lookup"><span data-stu-id="16c33-269">Enumerate queues</span></span> |<span data-ttu-id="16c33-270">Hantera</span><span class="sxs-lookup"><span data-stu-id="16c33-270">Manage</span></span> |<span data-ttu-id="16c33-271">$ Resurser/köer</span><span class="sxs-lookup"><span data-stu-id="16c33-271">/$Resources/Queues</span></span> |
| <span data-ttu-id="16c33-272">Hämta hello beskrivning av kön</span><span class="sxs-lookup"><span data-stu-id="16c33-272">Get hello queue description</span></span> |<span data-ttu-id="16c33-273">Hantera</span><span class="sxs-lookup"><span data-stu-id="16c33-273">Manage</span></span> |<span data-ttu-id="16c33-274">En giltig kö-adress</span><span class="sxs-lookup"><span data-stu-id="16c33-274">Any valid queue address</span></span> |
| <span data-ttu-id="16c33-275">Konfigurera auktoriseringsregeln för en kö</span><span class="sxs-lookup"><span data-stu-id="16c33-275">Configure authorization rule for a queue</span></span> |<span data-ttu-id="16c33-276">Hantera</span><span class="sxs-lookup"><span data-stu-id="16c33-276">Manage</span></span> |<span data-ttu-id="16c33-277">En giltig kö-adress</span><span class="sxs-lookup"><span data-stu-id="16c33-277">Any valid queue address</span></span> |
| <span data-ttu-id="16c33-278">Skicka i toohello kö</span><span class="sxs-lookup"><span data-stu-id="16c33-278">Send into toohello queue</span></span> |<span data-ttu-id="16c33-279">Skicka</span><span class="sxs-lookup"><span data-stu-id="16c33-279">Send</span></span> |<span data-ttu-id="16c33-280">En giltig kö-adress</span><span class="sxs-lookup"><span data-stu-id="16c33-280">Any valid queue address</span></span> |
| <span data-ttu-id="16c33-281">Ta emot meddelanden från en kö</span><span class="sxs-lookup"><span data-stu-id="16c33-281">Receive messages from a queue</span></span> |<span data-ttu-id="16c33-282">Lyssna</span><span class="sxs-lookup"><span data-stu-id="16c33-282">Listen</span></span> |<span data-ttu-id="16c33-283">En giltig kö-adress</span><span class="sxs-lookup"><span data-stu-id="16c33-283">Any valid queue address</span></span> |
| <span data-ttu-id="16c33-284">Avbryt eller slutföra meddelanden efter hello-meddelande i titt låsläge</span><span class="sxs-lookup"><span data-stu-id="16c33-284">Abandon or complete messages after receiving hello message in peek-lock mode</span></span> |<span data-ttu-id="16c33-285">Lyssna</span><span class="sxs-lookup"><span data-stu-id="16c33-285">Listen</span></span> |<span data-ttu-id="16c33-286">En giltig kö-adress</span><span class="sxs-lookup"><span data-stu-id="16c33-286">Any valid queue address</span></span> |
| <span data-ttu-id="16c33-287">Skjuta upp ett meddelande för senare hämtning</span><span class="sxs-lookup"><span data-stu-id="16c33-287">Defer a message for later retrieval</span></span> |<span data-ttu-id="16c33-288">Lyssna</span><span class="sxs-lookup"><span data-stu-id="16c33-288">Listen</span></span> |<span data-ttu-id="16c33-289">En giltig kö-adress</span><span class="sxs-lookup"><span data-stu-id="16c33-289">Any valid queue address</span></span> |
| <span data-ttu-id="16c33-290">Systemkön ett meddelande</span><span class="sxs-lookup"><span data-stu-id="16c33-290">Deadletter a message</span></span> |<span data-ttu-id="16c33-291">Lyssna</span><span class="sxs-lookup"><span data-stu-id="16c33-291">Listen</span></span> |<span data-ttu-id="16c33-292">En giltig kö-adress</span><span class="sxs-lookup"><span data-stu-id="16c33-292">Any valid queue address</span></span> |
| <span data-ttu-id="16c33-293">Hämta hello tillstånd är kopplat till en message queue-session</span><span class="sxs-lookup"><span data-stu-id="16c33-293">Get hello state associated with a message queue session</span></span> |<span data-ttu-id="16c33-294">Lyssna</span><span class="sxs-lookup"><span data-stu-id="16c33-294">Listen</span></span> |<span data-ttu-id="16c33-295">En giltig kö-adress</span><span class="sxs-lookup"><span data-stu-id="16c33-295">Any valid queue address</span></span> |
| <span data-ttu-id="16c33-296">Ange hello tillstånd är kopplat till en message queue-session</span><span class="sxs-lookup"><span data-stu-id="16c33-296">Set hello state associated with a message queue session</span></span> |<span data-ttu-id="16c33-297">Lyssna</span><span class="sxs-lookup"><span data-stu-id="16c33-297">Listen</span></span> |<span data-ttu-id="16c33-298">En giltig kö-adress</span><span class="sxs-lookup"><span data-stu-id="16c33-298">Any valid queue address</span></span> |
| <span data-ttu-id="16c33-299">**Avsnittet**</span><span class="sxs-lookup"><span data-stu-id="16c33-299">**Topic**</span></span> | | |
| <span data-ttu-id="16c33-300">Skapa ett ämne</span><span class="sxs-lookup"><span data-stu-id="16c33-300">Create a topic</span></span> |<span data-ttu-id="16c33-301">Hantera</span><span class="sxs-lookup"><span data-stu-id="16c33-301">Manage</span></span> |<span data-ttu-id="16c33-302">Alla adresser i namnområdet</span><span class="sxs-lookup"><span data-stu-id="16c33-302">Any namespace address</span></span> |
| <span data-ttu-id="16c33-303">Ta bort ett ämne</span><span class="sxs-lookup"><span data-stu-id="16c33-303">Delete a topic</span></span> |<span data-ttu-id="16c33-304">Hantera</span><span class="sxs-lookup"><span data-stu-id="16c33-304">Manage</span></span> |<span data-ttu-id="16c33-305">En giltig avsnittet adress</span><span class="sxs-lookup"><span data-stu-id="16c33-305">Any valid topic address</span></span> |
| <span data-ttu-id="16c33-306">Räkna upp avsnitt</span><span class="sxs-lookup"><span data-stu-id="16c33-306">Enumerate topics</span></span> |<span data-ttu-id="16c33-307">Hantera</span><span class="sxs-lookup"><span data-stu-id="16c33-307">Manage</span></span> |<span data-ttu-id="16c33-308">$ Resurser/ämnen</span><span class="sxs-lookup"><span data-stu-id="16c33-308">/$Resources/Topics</span></span> |
| <span data-ttu-id="16c33-309">Hämta hello avsnittet beskrivning</span><span class="sxs-lookup"><span data-stu-id="16c33-309">Get hello topic description</span></span> |<span data-ttu-id="16c33-310">Hantera</span><span class="sxs-lookup"><span data-stu-id="16c33-310">Manage</span></span> |<span data-ttu-id="16c33-311">En giltig avsnittet adress</span><span class="sxs-lookup"><span data-stu-id="16c33-311">Any valid topic address</span></span> |
| <span data-ttu-id="16c33-312">Konfigurera auktoriseringsregeln för ett ämne</span><span class="sxs-lookup"><span data-stu-id="16c33-312">Configure authorization rule for a topic</span></span> |<span data-ttu-id="16c33-313">Hantera</span><span class="sxs-lookup"><span data-stu-id="16c33-313">Manage</span></span> |<span data-ttu-id="16c33-314">En giltig avsnittet adress</span><span class="sxs-lookup"><span data-stu-id="16c33-314">Any valid topic address</span></span> |
| <span data-ttu-id="16c33-315">Skicka toohello avsnittet</span><span class="sxs-lookup"><span data-stu-id="16c33-315">Send toohello topic</span></span> |<span data-ttu-id="16c33-316">Skicka</span><span class="sxs-lookup"><span data-stu-id="16c33-316">Send</span></span> |<span data-ttu-id="16c33-317">En giltig avsnittet adress</span><span class="sxs-lookup"><span data-stu-id="16c33-317">Any valid topic address</span></span> |
| <span data-ttu-id="16c33-318">**Prenumeration**</span><span class="sxs-lookup"><span data-stu-id="16c33-318">**Subscription**</span></span> | | |
| <span data-ttu-id="16c33-319">Skapa en prenumeration</span><span class="sxs-lookup"><span data-stu-id="16c33-319">Create a subscription</span></span> |<span data-ttu-id="16c33-320">Hantera</span><span class="sxs-lookup"><span data-stu-id="16c33-320">Manage</span></span> |<span data-ttu-id="16c33-321">Alla adresser i namnområdet</span><span class="sxs-lookup"><span data-stu-id="16c33-321">Any namespace address</span></span> |
| <span data-ttu-id="16c33-322">Ta bort prenumeration</span><span class="sxs-lookup"><span data-stu-id="16c33-322">Delete subscription</span></span> |<span data-ttu-id="16c33-323">Hantera</span><span class="sxs-lookup"><span data-stu-id="16c33-323">Manage</span></span> |<span data-ttu-id="16c33-324">.. /myTopic/subscriptions/mySubscription</span><span class="sxs-lookup"><span data-stu-id="16c33-324">../myTopic/Subscriptions/mySubscription</span></span> |
| <span data-ttu-id="16c33-325">Räkna upp prenumerationer</span><span class="sxs-lookup"><span data-stu-id="16c33-325">Enumerate subscriptions</span></span> |<span data-ttu-id="16c33-326">Hantera</span><span class="sxs-lookup"><span data-stu-id="16c33-326">Manage</span></span> |<span data-ttu-id="16c33-327">.. myTopic-prenumerationer</span><span class="sxs-lookup"><span data-stu-id="16c33-327">../myTopic/Subscriptions</span></span> |
| <span data-ttu-id="16c33-328">Hämta prenumeration beskrivning</span><span class="sxs-lookup"><span data-stu-id="16c33-328">Get subscription description</span></span> |<span data-ttu-id="16c33-329">Hantera</span><span class="sxs-lookup"><span data-stu-id="16c33-329">Manage</span></span> |<span data-ttu-id="16c33-330">.. /myTopic/subscriptions/mySubscription</span><span class="sxs-lookup"><span data-stu-id="16c33-330">../myTopic/Subscriptions/mySubscription</span></span> |
| <span data-ttu-id="16c33-331">Avbryt eller slutföra meddelanden efter hello-meddelande i titt låsläge</span><span class="sxs-lookup"><span data-stu-id="16c33-331">Abandon or complete messages after receiving hello message in peek-lock mode</span></span> |<span data-ttu-id="16c33-332">Lyssna</span><span class="sxs-lookup"><span data-stu-id="16c33-332">Listen</span></span> |<span data-ttu-id="16c33-333">.. /myTopic/subscriptions/mySubscription</span><span class="sxs-lookup"><span data-stu-id="16c33-333">../myTopic/Subscriptions/mySubscription</span></span> |
| <span data-ttu-id="16c33-334">Skjuta upp ett meddelande för senare hämtning</span><span class="sxs-lookup"><span data-stu-id="16c33-334">Defer a message for later retrieval</span></span> |<span data-ttu-id="16c33-335">Lyssna</span><span class="sxs-lookup"><span data-stu-id="16c33-335">Listen</span></span> |<span data-ttu-id="16c33-336">.. /myTopic/subscriptions/mySubscription</span><span class="sxs-lookup"><span data-stu-id="16c33-336">../myTopic/Subscriptions/mySubscription</span></span> |
| <span data-ttu-id="16c33-337">Systemkön ett meddelande</span><span class="sxs-lookup"><span data-stu-id="16c33-337">Deadletter a message</span></span> |<span data-ttu-id="16c33-338">Lyssna</span><span class="sxs-lookup"><span data-stu-id="16c33-338">Listen</span></span> |<span data-ttu-id="16c33-339">.. /myTopic/subscriptions/mySubscription</span><span class="sxs-lookup"><span data-stu-id="16c33-339">../myTopic/Subscriptions/mySubscription</span></span> |
| <span data-ttu-id="16c33-340">Hämta hello-tillståndet associerat med ett session-avsnittet</span><span class="sxs-lookup"><span data-stu-id="16c33-340">Get hello state associated with a topic session</span></span> |<span data-ttu-id="16c33-341">Lyssna</span><span class="sxs-lookup"><span data-stu-id="16c33-341">Listen</span></span> |<span data-ttu-id="16c33-342">.. /myTopic/subscriptions/mySubscription</span><span class="sxs-lookup"><span data-stu-id="16c33-342">../myTopic/Subscriptions/mySubscription</span></span> |
| <span data-ttu-id="16c33-343">Ange hello-tillståndet associerat med ett session-avsnittet</span><span class="sxs-lookup"><span data-stu-id="16c33-343">Set hello state associated with a topic session</span></span> |<span data-ttu-id="16c33-344">Lyssna</span><span class="sxs-lookup"><span data-stu-id="16c33-344">Listen</span></span> |<span data-ttu-id="16c33-345">.. /myTopic/subscriptions/mySubscription</span><span class="sxs-lookup"><span data-stu-id="16c33-345">../myTopic/Subscriptions/mySubscription</span></span> |
| <span data-ttu-id="16c33-346">**Regler**</span><span class="sxs-lookup"><span data-stu-id="16c33-346">**Rules**</span></span> | | |
| <span data-ttu-id="16c33-347">Skapa en regel</span><span class="sxs-lookup"><span data-stu-id="16c33-347">Create a rule</span></span> |<span data-ttu-id="16c33-348">Hantera</span><span class="sxs-lookup"><span data-stu-id="16c33-348">Manage</span></span> |<span data-ttu-id="16c33-349">.. /myTopic/subscriptions/mySubscription</span><span class="sxs-lookup"><span data-stu-id="16c33-349">../myTopic/Subscriptions/mySubscription</span></span> |
| <span data-ttu-id="16c33-350">Ta bort en regel</span><span class="sxs-lookup"><span data-stu-id="16c33-350">Delete a rule</span></span> |<span data-ttu-id="16c33-351">Hantera</span><span class="sxs-lookup"><span data-stu-id="16c33-351">Manage</span></span> |<span data-ttu-id="16c33-352">.. /myTopic/subscriptions/mySubscription</span><span class="sxs-lookup"><span data-stu-id="16c33-352">../myTopic/Subscriptions/mySubscription</span></span> |
| <span data-ttu-id="16c33-353">Räkna upp regler</span><span class="sxs-lookup"><span data-stu-id="16c33-353">Enumerate rules</span></span> |<span data-ttu-id="16c33-354">Hantera eller lyssna</span><span class="sxs-lookup"><span data-stu-id="16c33-354">Manage or Listen</span></span> |<span data-ttu-id="16c33-355">.. /myTopic/subscriptions/mySubscription/rules</span><span class="sxs-lookup"><span data-stu-id="16c33-355">../myTopic/Subscriptions/mySubscription/Rules</span></span> 

## <a name="next-steps"></a><span data-ttu-id="16c33-356">Nästa steg</span><span class="sxs-lookup"><span data-stu-id="16c33-356">Next steps</span></span>

<span data-ttu-id="16c33-357">toolearn mer om Service Bus-meddelanden finns i följande avsnitt hello.</span><span class="sxs-lookup"><span data-stu-id="16c33-357">toolearn more about Service Bus messaging, see hello following topics.</span></span>

* [<span data-ttu-id="16c33-358">Service Bus-grunder</span><span class="sxs-lookup"><span data-stu-id="16c33-358">Service Bus fundamentals</span></span>](service-bus-fundamentals-hybrid-solutions.md)
* [<span data-ttu-id="16c33-359">Service Bus-köer, ämnen och prenumerationer</span><span class="sxs-lookup"><span data-stu-id="16c33-359">Service Bus queues, topics, and subscriptions</span></span>](service-bus-queues-topics-subscriptions.md)
* [<span data-ttu-id="16c33-360">Hur toouse Service Bus-köer</span><span class="sxs-lookup"><span data-stu-id="16c33-360">How toouse Service Bus queues</span></span>](service-bus-dotnet-get-started-with-queues.md)
* [<span data-ttu-id="16c33-361">Hur toouse Service Bus-ämnen och prenumerationer</span><span class="sxs-lookup"><span data-stu-id="16c33-361">How toouse Service Bus topics and subscriptions</span></span>](service-bus-dotnet-how-to-use-topics-subscriptions.md)

[Azure portal]: https://portal.azure.com
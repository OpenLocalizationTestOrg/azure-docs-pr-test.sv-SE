---
title: "aaaAzure Service Bus länkas namnområden | Microsoft Docs"
description: "Implementeringsdetaljer parad namnområde och kostnad"
services: service-bus-messaging
documentationcenter: na
author: sethmanheim
manager: timlt
editor: 
ms.assetid: 2440c8d3-ed2e-47e0-93cf-ab7fbb855d2e
ms.service: service-bus-messaging
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: na
ms.date: 05/25/2017
ms.author: sethm
ms.openlocfilehash: 4c44b2b95d2228e1ad8075b52634d88a1593d3b1
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: sv-SE
ms.lasthandoff: 10/06/2017
---
# <a name="paired-namespace-implementation-details-and-cost-implications"></a><span data-ttu-id="703ea-103">Länkas namnområde implementeringsdetaljer och cost effekter</span><span class="sxs-lookup"><span data-stu-id="703ea-103">Paired namespace implementation details and cost implications</span></span>
<span data-ttu-id="703ea-104">Hej [PairNamespaceAsync] [ PairNamespaceAsync] metod med en [SendAvailabilityPairedNamespaceOptions] [ SendAvailabilityPairedNamespaceOptions] instansen, utför synliga uppgifter å dina vägnar.</span><span class="sxs-lookup"><span data-stu-id="703ea-104">hello [PairNamespaceAsync][PairNamespaceAsync] method, using a [SendAvailabilityPairedNamespaceOptions][SendAvailabilityPairedNamespaceOptions] instance, performs visible tasks on your behalf.</span></span> <span data-ttu-id="703ea-105">Eftersom det är kostnad överväganden när du använder hello funktion, är användbar toounderstand de uppgifter så att du förväntar dig hello beteendet när det sker.</span><span class="sxs-lookup"><span data-stu-id="703ea-105">Because there are cost considerations when using hello feature, it is useful toounderstand those tasks so that you expect hello behavior when it happens.</span></span> <span data-ttu-id="703ea-106">hello API aktiverar hello följande automatiska funktioner för din räkning:</span><span class="sxs-lookup"><span data-stu-id="703ea-106">hello API engages hello following automatic behavior on your behalf:</span></span>

* <span data-ttu-id="703ea-107">Skapa eftersläpning köer.</span><span class="sxs-lookup"><span data-stu-id="703ea-107">Creation of backlog queues.</span></span>
* <span data-ttu-id="703ea-108">Skapa en [MessageSender] [ MessageSender] objekt som nämns tooqueues eller avsnitt.</span><span class="sxs-lookup"><span data-stu-id="703ea-108">Creation of a [MessageSender][MessageSender] object that talks tooqueues or topics.</span></span>
* <span data-ttu-id="703ea-109">När en meddelandeentitet blir otillgänglig, skickar pingmeddelanden toohello entiteten i ett försök toodetect när enheten blir tillgänglig igen.</span><span class="sxs-lookup"><span data-stu-id="703ea-109">When a messaging entity becomes unavailable, sends ping messages toohello entity in an attempt toodetect when that entity becomes available again.</span></span>
* <span data-ttu-id="703ea-110">Du kan även skapa en uppsättning ”meddelande pumpar” att flytta meddelanden från hello eftersläpning köer toohello primära köer.</span><span class="sxs-lookup"><span data-stu-id="703ea-110">Optionally creates of a set of “message pumps” that move messages from hello backlog queues toohello primary queues.</span></span>
* <span data-ttu-id="703ea-111">Samordnar avslutande/felaktig av hello primära och sekundära [MessagingFactory] [ MessagingFactory] instanser.</span><span class="sxs-lookup"><span data-stu-id="703ea-111">Coordinates closing/faulting of hello primary and secondary [MessagingFactory][MessagingFactory] instances.</span></span>

<span data-ttu-id="703ea-112">På en hög nivå hello-funktionen fungerar på följande sätt: när hello primära entiteten är felfri, ingen funktionsändringar sker.</span><span class="sxs-lookup"><span data-stu-id="703ea-112">At a high level, hello feature works as follows: when hello primary entity is healthy, no behavior changes occur.</span></span> <span data-ttu-id="703ea-113">När hello [FailoverInterval] [ FailoverInterval] tid förflutit och hello primära entiteten ser inga lyckade skickar efter ett tillfälligt [MessagingException] [ MessagingException] eller en [TimeoutException][TimeoutException], hello följande beteende inträffar:</span><span class="sxs-lookup"><span data-stu-id="703ea-113">When hello [FailoverInterval][FailoverInterval] duration elapses, and hello primary entity sees no successful sends after a non-transient [MessagingException][MessagingException] or a [TimeoutException][TimeoutException], hello following behavior occurs:</span></span>

1. <span data-ttu-id="703ea-114">Skicka operations toohello primära entiteten är inaktiverade och hello system pingar hello primära entiteten tills pingar har levereras.</span><span class="sxs-lookup"><span data-stu-id="703ea-114">Send operations toohello primary entity are disabled and hello system pings hello primary entity until pings can be successfully delivered.</span></span>
2. <span data-ttu-id="703ea-115">En slumpmässig eftersläpning kö har valts.</span><span class="sxs-lookup"><span data-stu-id="703ea-115">A random backlog queue is selected.</span></span>
3. <span data-ttu-id="703ea-116">[BrokeredMessage] [ BrokeredMessage] objekt är routade toohello valt eftersläpning kön.</span><span class="sxs-lookup"><span data-stu-id="703ea-116">[BrokeredMessage][BrokeredMessage] objects are routed toohello chosen backlog queue.</span></span>
4. <span data-ttu-id="703ea-117">Om en skicka åtgärden toohello valt eftersläpning kön misslyckas kön hämtas från hello rotation och en ny kö har valts.</span><span class="sxs-lookup"><span data-stu-id="703ea-117">If a send operation toohello chosen backlog queue fails, that queue is pulled from hello rotation and a new queue is selected.</span></span> <span data-ttu-id="703ea-118">Alla avsändare på hello [MessagingFactory] [ MessagingFactory] instans Läs hello-fel.</span><span class="sxs-lookup"><span data-stu-id="703ea-118">All senders on hello [MessagingFactory][MessagingFactory] instance learn of hello failure.</span></span>

<span data-ttu-id="703ea-119">hello följande figur visas hello sekvens.</span><span class="sxs-lookup"><span data-stu-id="703ea-119">hello following figures depict hello sequence.</span></span> <span data-ttu-id="703ea-120">Först skickar hello avsändare meddelanden.</span><span class="sxs-lookup"><span data-stu-id="703ea-120">First, hello sender sends messages.</span></span>

![Parad namnområden][0]

<span data-ttu-id="703ea-122">Vid fel toosend toohello primära kön börjar hello avsändaren skicka meddelanden tooa slumpmässigt eftersläpning kön.</span><span class="sxs-lookup"><span data-stu-id="703ea-122">Upon failure toosend toohello primary queue, hello sender begins sending messages tooa randomly chosen backlog queue.</span></span> <span data-ttu-id="703ea-123">Samtidigt, startar en ping-aktivitet.</span><span class="sxs-lookup"><span data-stu-id="703ea-123">Simultaneously, it starts a ping task.</span></span>

![Parad namnområden][1]

<span data-ttu-id="703ea-125">Nu finns kvar i hello sekundär kö hälsningsmeddelande och inte har levererats toohello primära kön.</span><span class="sxs-lookup"><span data-stu-id="703ea-125">At this point hello messages are still in hello secondary queue and have not been delivered toohello primary queue.</span></span> <span data-ttu-id="703ea-126">När hello primära kön är felfri igen, bör minst en process körs hello syphon.</span><span class="sxs-lookup"><span data-stu-id="703ea-126">Once hello primary queue is healthy again, at least one process should be running hello syphon.</span></span> <span data-ttu-id="703ea-127">Hej syphon ger dig en hälsningsmeddelande från alla hello olika eftersläpning köer toohello rätt mål entiteter (köer och ämnen).</span><span class="sxs-lookup"><span data-stu-id="703ea-127">hello syphon delivers hello messages from all hello various backlog queues toohello proper destination entities (queues and topics).</span></span>

![Parad namnområden][2]

<span data-ttu-id="703ea-129">hello resten av det här avsnittet beskrivs hello specifik information om hur dessa delar fungerar.</span><span class="sxs-lookup"><span data-stu-id="703ea-129">hello remainder of this topic discusses hello specific details of how these pieces work.</span></span>

## <a name="creation-of-backlog-queues"></a><span data-ttu-id="703ea-130">Skapandet av eftersläpning köer</span><span class="sxs-lookup"><span data-stu-id="703ea-130">Creation of backlog queues</span></span>
<span data-ttu-id="703ea-131">Hej [SendAvailabilityPairedNamespaceOptions] [ SendAvailabilityPairedNamespaceOptions] objekt som överförts toohello [PairNamespaceAsync] [ PairNamespaceAsync] metoden anger hello Antal eftersläpning köer du vill toouse.</span><span class="sxs-lookup"><span data-stu-id="703ea-131">hello [SendAvailabilityPairedNamespaceOptions][SendAvailabilityPairedNamespaceOptions] object passed toohello [PairNamespaceAsync][PairNamespaceAsync] method indicates hello number of backlog queues you want toouse.</span></span> <span data-ttu-id="703ea-132">Varje kö eftersläpning skapas med hello följande egenskaper uttryckligen ange (alla andra värden anges toohello [QueueDescription] [ QueueDescription] standardvärden):</span><span class="sxs-lookup"><span data-stu-id="703ea-132">Each backlog queue is then created with hello following properties explicitly set (all other values are set toohello [QueueDescription][QueueDescription] defaults):</span></span>

| <span data-ttu-id="703ea-133">Sökväg</span><span class="sxs-lookup"><span data-stu-id="703ea-133">Path</span></span> | <span data-ttu-id="703ea-134">[primära namnutrymme] / x-servicebus-överföring / [index] där [index] är ett värde i [0, BacklogQueueCount)</span><span class="sxs-lookup"><span data-stu-id="703ea-134">[primary namespace]/x-servicebus-transfer/[index] where [index] is a value in [0, BacklogQueueCount)</span></span> |
| --- | --- |
| <span data-ttu-id="703ea-135">MaxSizeInMegabytes</span><span class="sxs-lookup"><span data-stu-id="703ea-135">MaxSizeInMegabytes</span></span> |<span data-ttu-id="703ea-136">5120</span><span class="sxs-lookup"><span data-stu-id="703ea-136">5120</span></span> |
| <span data-ttu-id="703ea-137">MaxDeliveryCount</span><span class="sxs-lookup"><span data-stu-id="703ea-137">MaxDeliveryCount</span></span> |<span data-ttu-id="703ea-138">heltal. MaxValue</span><span class="sxs-lookup"><span data-stu-id="703ea-138">int.MaxValue</span></span> |
| <span data-ttu-id="703ea-139">DefaultMessageTimeToLive</span><span class="sxs-lookup"><span data-stu-id="703ea-139">DefaultMessageTimeToLive</span></span> |<span data-ttu-id="703ea-140">TimeSpan.MaxValue</span><span class="sxs-lookup"><span data-stu-id="703ea-140">TimeSpan.MaxValue</span></span> |
| <span data-ttu-id="703ea-141">AutoDeleteOnIdle</span><span class="sxs-lookup"><span data-stu-id="703ea-141">AutoDeleteOnIdle</span></span> |<span data-ttu-id="703ea-142">TimeSpan.MaxValue</span><span class="sxs-lookup"><span data-stu-id="703ea-142">TimeSpan.MaxValue</span></span> |
| <span data-ttu-id="703ea-143">Varaktighet</span><span class="sxs-lookup"><span data-stu-id="703ea-143">LockDuration</span></span> |<span data-ttu-id="703ea-144">1 minut</span><span class="sxs-lookup"><span data-stu-id="703ea-144">1 minute</span></span> |
| <span data-ttu-id="703ea-145">EnableDeadLetteringOnMessageExpiration</span><span class="sxs-lookup"><span data-stu-id="703ea-145">EnableDeadLetteringOnMessageExpiration</span></span> |<span data-ttu-id="703ea-146">SANT</span><span class="sxs-lookup"><span data-stu-id="703ea-146">true</span></span> |
| <span data-ttu-id="703ea-147">EnableBatchedOperations</span><span class="sxs-lookup"><span data-stu-id="703ea-147">EnableBatchedOperations</span></span> |<span data-ttu-id="703ea-148">SANT</span><span class="sxs-lookup"><span data-stu-id="703ea-148">true</span></span> |

<span data-ttu-id="703ea-149">Till exempel skapa hello första eftersläpning kön för namnområdet **contoso** heter `contoso/x-servicebus-transfer/0`.</span><span class="sxs-lookup"><span data-stu-id="703ea-149">For example, hello first backlog queue created for namespace **contoso** is named `contoso/x-servicebus-transfer/0`.</span></span>

<span data-ttu-id="703ea-150">När du skapar hello köer hello kod kontrollerar först toosee om det finns en sådan kö.</span><span class="sxs-lookup"><span data-stu-id="703ea-150">When creating hello queues, hello code first checks toosee if such a queue exists.</span></span> <span data-ttu-id="703ea-151">Om hello kön inte finns, skapas hello kön.</span><span class="sxs-lookup"><span data-stu-id="703ea-151">If hello queue does not exist, then hello queue is created.</span></span> <span data-ttu-id="703ea-152">hello koden inte rensa ”extra” eftersläpning köer.</span><span class="sxs-lookup"><span data-stu-id="703ea-152">hello code does not clean up "extra" backlog queues.</span></span> <span data-ttu-id="703ea-153">Specifikt, om hello program med hello primära namnområde **contoso** begär fem eftersläpning köer, men en eftersläpning kö med sökvägen hello `contoso/x-servicebus-transfer/7` finns extra eftersläpning kön är kvar men används inte.</span><span class="sxs-lookup"><span data-stu-id="703ea-153">Specifically, if hello application with hello primary namespace **contoso** requests five backlog queues but a backlog queue with hello path `contoso/x-servicebus-transfer/7` exists, that extra backlog queue is still present but is not used.</span></span> <span data-ttu-id="703ea-154">hello system tillåter uttryckligen extra eftersläpning köer tooexist som inte används.</span><span class="sxs-lookup"><span data-stu-id="703ea-154">hello system explicitly allows extra backlog queues tooexist that would not be used.</span></span> <span data-ttu-id="703ea-155">Du är ansvarig för att rensa alla oanvända/oönskad eftersläpning köer som hello namnområde ägare.</span><span class="sxs-lookup"><span data-stu-id="703ea-155">As hello namespace owner, you are responsible for cleaning up any unused/unwanted backlog queues.</span></span> <span data-ttu-id="703ea-156">hello orsaken till detta beslut är att Service Bus inte kan vet vilket syfte som finns för alla hello köer i namnområdet.</span><span class="sxs-lookup"><span data-stu-id="703ea-156">hello reason for this decision is that Service Bus cannot know what purposes exist for all hello queues in your namespace.</span></span> <span data-ttu-id="703ea-157">Dessutom, om en kö finns med namnet hello men inte uppfyller hello antas [QueueDescription][QueueDescription], din orsaker är din egen för ändra hello standardbeteendet.</span><span class="sxs-lookup"><span data-stu-id="703ea-157">Furthermore, if a queue exists with hello given name but does not meet hello assumed [QueueDescription][QueueDescription], then your reasons are your own for changing hello default behavior.</span></span> <span data-ttu-id="703ea-158">Inga garantier görs för ändringar toohello eftersläpning köer av din kod.</span><span class="sxs-lookup"><span data-stu-id="703ea-158">No guarantees are made for modifications toohello backlog queues by your code.</span></span> <span data-ttu-id="703ea-159">Ändra till tootest noggrant.</span><span class="sxs-lookup"><span data-stu-id="703ea-159">Make sure tootest your changes thoroughly.</span></span>

## <a name="custom-messagesender"></a><span data-ttu-id="703ea-160">Anpassade MessageSender</span><span class="sxs-lookup"><span data-stu-id="703ea-160">Custom MessageSender</span></span>
<span data-ttu-id="703ea-161">När du skickar, alla meddelanden gå igenom en intern [MessageSender] [ MessageSender] objekt som fungerar sedan normalt när allt fungerar och omdirigerar toohello eftersläpning köer när saker ”delar”.</span><span class="sxs-lookup"><span data-stu-id="703ea-161">When sending, all messages go through an internal [MessageSender][MessageSender] object that behaves normally when everything works, and redirects toohello backlog queues when things "break."</span></span> <span data-ttu-id="703ea-162">Vid mottagning av ett fel uppstod, startar en timer.</span><span class="sxs-lookup"><span data-stu-id="703ea-162">Upon receiving a non-transient failure, a timer starts.</span></span> <span data-ttu-id="703ea-163">När en [TimeSpan] [ TimeSpan] period som består av hello [FailoverInterval] [ FailoverInterval] egenskapsvärde under vilka inga lyckade meddelanden skickas , hello växling vid fel används.</span><span class="sxs-lookup"><span data-stu-id="703ea-163">After a [TimeSpan][TimeSpan] period consisting of hello [FailoverInterval][FailoverInterval] property value during which no successful messages are sent, hello failover is engaged.</span></span> <span data-ttu-id="703ea-164">Nu händer hello följande för varje entitet:</span><span class="sxs-lookup"><span data-stu-id="703ea-164">At this point, hello following things happen for each entity:</span></span>

* <span data-ttu-id="703ea-165">Ping-uppgiften körs varje [PingPrimaryInterval] [ PingPrimaryInterval] toocheck om hello enheten är tillgänglig.</span><span class="sxs-lookup"><span data-stu-id="703ea-165">A ping task executes every [PingPrimaryInterval][PingPrimaryInterval] toocheck if hello entity is available.</span></span> <span data-ttu-id="703ea-166">När den här aktiviteten lyckas startar alla klientkod som använder hello entitet omedelbart skicka nya meddelanden toohello primära namnområdet.</span><span class="sxs-lookup"><span data-stu-id="703ea-166">Once this task succeeds, all client code that uses hello entity immediately starts sending new messages toohello primary namespace.</span></span>
* <span data-ttu-id="703ea-167">Kommande begäranden toosend toothat samma entitet från andra sändare leder hello [BrokeredMessage] [ BrokeredMessage] skickas toobe ändrade toosit i hello eftersläpning kö.</span><span class="sxs-lookup"><span data-stu-id="703ea-167">Future requests toosend toothat same entity from any other senders will result in hello [BrokeredMessage][BrokeredMessage] being sent toobe modified toosit in hello backlog queue.</span></span> <span data-ttu-id="703ea-168">hello ändring tar bort vissa egenskaper från hello [BrokeredMessage] [ BrokeredMessage] objekt och lagrar dem på en annan plats.</span><span class="sxs-lookup"><span data-stu-id="703ea-168">hello modification removes some properties from hello [BrokeredMessage][BrokeredMessage] object and stores them elsewhere.</span></span> <span data-ttu-id="703ea-169">hello är följande egenskaper avmarkerad och läggas till under ett nytt alias, vilket gör att Service Bus och hello SDK tooprocess meddelanden enhetligt:</span><span class="sxs-lookup"><span data-stu-id="703ea-169">hello following properties are cleared and added under a new alias, allowing Service Bus and hello SDK tooprocess messages uniformly:</span></span>

| <span data-ttu-id="703ea-170">Gamla egenskapsnamn</span><span class="sxs-lookup"><span data-stu-id="703ea-170">Old Property Name</span></span> | <span data-ttu-id="703ea-171">Nya egenskapsnamn</span><span class="sxs-lookup"><span data-stu-id="703ea-171">New Property Name</span></span> |
| --- | --- |
| <span data-ttu-id="703ea-172">Sessions-ID</span><span class="sxs-lookup"><span data-stu-id="703ea-172">SessionId</span></span> |<span data-ttu-id="703ea-173">x-ms-sessions-ID</span><span class="sxs-lookup"><span data-stu-id="703ea-173">x-ms-sessionid</span></span> |
| <span data-ttu-id="703ea-174">TimeToLive</span><span class="sxs-lookup"><span data-stu-id="703ea-174">TimeToLive</span></span> |<span data-ttu-id="703ea-175">x-ms-timetolive</span><span class="sxs-lookup"><span data-stu-id="703ea-175">x-ms-timetolive</span></span> |
| <span data-ttu-id="703ea-176">ScheduledEnqueueTimeUtc</span><span class="sxs-lookup"><span data-stu-id="703ea-176">ScheduledEnqueueTimeUtc</span></span> |<span data-ttu-id="703ea-177">x-ms-sökväg</span><span class="sxs-lookup"><span data-stu-id="703ea-177">x-ms-path</span></span> |

<span data-ttu-id="703ea-178">hello ursprungliga målsökväg lagras också i hello-meddelande som en egenskap med namnet x-ms-sökväg.</span><span class="sxs-lookup"><span data-stu-id="703ea-178">hello original destination path is also stored within hello message as a property named x-ms-path.</span></span> <span data-ttu-id="703ea-179">Den här designen kan meddelanden för många enheter toocoexist i en enda eftersläpning kö.</span><span class="sxs-lookup"><span data-stu-id="703ea-179">This design allows messages for many entities toocoexist in a single backlog queue.</span></span> <span data-ttu-id="703ea-180">hello egenskaper översätts igen genom hello syphon.</span><span class="sxs-lookup"><span data-stu-id="703ea-180">hello properties are translated back by hello syphon.</span></span>

<span data-ttu-id="703ea-181">hello anpassade [MessageSender] [ MessageSender] objekt problem kan uppstå när meddelanden hanterar hello 256 KB-gränsen och växling vid fel används.</span><span class="sxs-lookup"><span data-stu-id="703ea-181">hello custom [MessageSender][MessageSender] object can encounter issues when messages approach hello 256-KB limit and failover is engaged.</span></span> <span data-ttu-id="703ea-182">hello anpassade [MessageSender] [ MessageSender] -objektet lagrar meddelanden för alla köer och ämnen tillsammans i hello eftersläpning köer.</span><span class="sxs-lookup"><span data-stu-id="703ea-182">hello custom [MessageSender][MessageSender] object stores messages for all queues and topics together in hello backlog queues.</span></span> <span data-ttu-id="703ea-183">Det här objektet blandas meddelanden från många primärfärgerna tillsammans i hello eftersläpning köer.</span><span class="sxs-lookup"><span data-stu-id="703ea-183">This object mixes messages from many primaries together within hello backlog queues.</span></span> <span data-ttu-id="703ea-184">toohandle belastningsutjämningen bland många klienter som inte känner till alla andra hello SDK slumpmässigt hämtar en eftersläpning kö för varje [QueueClient] [ QueueClient] eller [TopicClient] [ TopicClient] du skapar i koden.</span><span class="sxs-lookup"><span data-stu-id="703ea-184">toohandle load balancing among many clients that do not know each other, hello SDK randomly picks one backlog queue for each [QueueClient][QueueClient] or [TopicClient][TopicClient] you create in code.</span></span>

## <a name="pings"></a><span data-ttu-id="703ea-185">Pingar</span><span class="sxs-lookup"><span data-stu-id="703ea-185">Pings</span></span>
<span data-ttu-id="703ea-186">Ett ping-meddelande är ett tomt [BrokeredMessage] [ BrokeredMessage] med dess [ContentType] [ ContentType] egenskapsuppsättning tooapplication/vnd.ms-servicebus-ping och en [TimeToLive] [ TimeToLive] värdet 1 sekund.</span><span class="sxs-lookup"><span data-stu-id="703ea-186">A ping message is an empty [BrokeredMessage][BrokeredMessage] with its [ContentType][ContentType] property set tooapplication/vnd.ms-servicebus-ping and a [TimeToLive][TimeToLive] value of 1 second.</span></span> <span data-ttu-id="703ea-187">Den här ping har en särskild egenskap i Service Bus: hello aldrig skickas ett ping när alla anroparen begär en [BrokeredMessage][BrokeredMessage].</span><span class="sxs-lookup"><span data-stu-id="703ea-187">This ping has one special characteristic in Service Bus: hello server never delivers a ping when any caller requests a [BrokeredMessage][BrokeredMessage].</span></span> <span data-ttu-id="703ea-188">Du aldrig har alltså toolearn hur tooreceive och ignorera dessa meddelanden.</span><span class="sxs-lookup"><span data-stu-id="703ea-188">Thus, you never have toolearn how tooreceive and ignore these messages.</span></span> <span data-ttu-id="703ea-189">Varje entitet (unikt kö eller ett ämne) per [MessagingFactory] [ MessagingFactory] instans per klient ska pingas när de anses vara toobe inte tillgänglig.</span><span class="sxs-lookup"><span data-stu-id="703ea-189">Each entity (unique queue or topic) per [MessagingFactory][MessagingFactory] instance per client will be pinged when they are considered toobe unavailable.</span></span> <span data-ttu-id="703ea-190">Som standard är detta sker en gång per minut.</span><span class="sxs-lookup"><span data-stu-id="703ea-190">By default, this happens once per minute.</span></span> <span data-ttu-id="703ea-191">Ping-meddelanden betraktas toobe vanliga Service Bus-meddelanden och kan resultera i kostnader för bandbredd och meddelanden.</span><span class="sxs-lookup"><span data-stu-id="703ea-191">Ping messages are considered toobe regular Service Bus messages, and can result in charges for bandwidth and messages.</span></span> <span data-ttu-id="703ea-192">Så snart hello-klienter identifiera att hello systemet är tillgängligt, stoppa hälsningsmeddelande.</span><span class="sxs-lookup"><span data-stu-id="703ea-192">As soon as hello clients detect that hello system is available, hello messages stop.</span></span>

## <a name="hello-syphon"></a><span data-ttu-id="703ea-193">Hej syphon</span><span class="sxs-lookup"><span data-stu-id="703ea-193">hello syphon</span></span>
<span data-ttu-id="703ea-194">Minst ett körbart program i hello program bör aktivt köra hello syphon.</span><span class="sxs-lookup"><span data-stu-id="703ea-194">At least one executable program in hello application should be actively running hello syphon.</span></span> <span data-ttu-id="703ea-195">Hej syphon utför lång avsökning får som pågår i 15 minuter.</span><span class="sxs-lookup"><span data-stu-id="703ea-195">hello syphon performs a long poll receive that lasts 15 minutes.</span></span> <span data-ttu-id="703ea-196">När du har 10 eftersläpning köer och alla entiteter som är tillgängliga hello program som är värd för hello syphon anrop hello mottagningsåtgärd 40 gånger per timme, 960 gånger per dag och 28800 gånger i 30 dagar.</span><span class="sxs-lookup"><span data-stu-id="703ea-196">When all entities are available and you have 10 backlog queues, hello application that hosts hello syphon calls hello receive operation 40 times per hour, 960 times per day, and 28800 times in 30 days.</span></span> <span data-ttu-id="703ea-197">När hello syphon aktivt flyttar meddelanden från hello eftersläpning toohello primära kö, inträffar varje meddelande hello följande avgifter (standard kostnader för meddelandestorlek och bandbredd som används i alla led):</span><span class="sxs-lookup"><span data-stu-id="703ea-197">When hello syphon is actively moving messages from hello backlog toohello primary queue, each message experiences hello following charges (standard charges for message size and bandwidth apply in all stages):</span></span>

1. <span data-ttu-id="703ea-198">Skicka toohello eftersläpning.</span><span class="sxs-lookup"><span data-stu-id="703ea-198">Send toohello backlog.</span></span>
2. <span data-ttu-id="703ea-199">Ta emot från hello eftersläpning.</span><span class="sxs-lookup"><span data-stu-id="703ea-199">Receive from hello backlog.</span></span>
3. <span data-ttu-id="703ea-200">Skicka toohello primära.</span><span class="sxs-lookup"><span data-stu-id="703ea-200">Send toohello primary.</span></span>
4. <span data-ttu-id="703ea-201">Ta emot från hello primära.</span><span class="sxs-lookup"><span data-stu-id="703ea-201">Receive from hello primary.</span></span>

## <a name="closefault-behavior"></a><span data-ttu-id="703ea-202">Stäng/fel beteende</span><span class="sxs-lookup"><span data-stu-id="703ea-202">Close/fault behavior</span></span>
<span data-ttu-id="703ea-203">I ett program som är värd för hello syphon, en gång hello primär eller sekundär [MessagingFactory] [ MessagingFactory] hos eller stängs utan dess partner samtidigt fel/stängs och hello syphon identifierar det här tillståndet , hello syphon fungerar.</span><span class="sxs-lookup"><span data-stu-id="703ea-203">Within an application that hosts hello syphon, once hello primary or secondary [MessagingFactory][MessagingFactory] faults or is closed without its partner also being faulted/closed and hello syphon detects this state, hello syphon acts.</span></span> <span data-ttu-id="703ea-204">Om hello andra [MessagingFactory] [ MessagingFactory] inte är stängd inom 5 sekunder kommer hello syphon fault hello fortfarande öppen [MessagingFactory] [ MessagingFactory] .</span><span class="sxs-lookup"><span data-stu-id="703ea-204">If hello other [MessagingFactory][MessagingFactory] is not closed within 5 seconds, hello syphon will fault hello still open [MessagingFactory][MessagingFactory].</span></span>

## <a name="next-steps"></a><span data-ttu-id="703ea-205">Nästa steg</span><span class="sxs-lookup"><span data-stu-id="703ea-205">Next steps</span></span>
<span data-ttu-id="703ea-206">Se [asynkrona meddelanden mönster och hög tillgänglighet] [ Asynchronous messaging patterns and high availability] för en detaljerad beskrivning av asynkrona Service Bus-meddelanden.</span><span class="sxs-lookup"><span data-stu-id="703ea-206">See [Asynchronous messaging patterns and high availability][Asynchronous messaging patterns and high availability] for a detailed discussion of Service Bus asynchronous messaging.</span></span> 

[PairNamespaceAsync]: /dotnet/api/microsoft.servicebus.messaging.messagingfactory#Microsoft_ServiceBus_Messaging_MessagingFactory_PairNamespaceAsync_Microsoft_ServiceBus_Messaging_PairedNamespaceOptions_
[SendAvailabilityPairedNamespaceOptions]: /dotnet/api/microsoft.servicebus.messaging.sendavailabilitypairednamespaceoptions
[MessageSender]: /dotnet/api/microsoft.servicebus.messaging.messagesender
[MessagingFactory]: /dotnet/api/microsoft.servicebus.messaging.messagingfactory
[FailoverInterval]: /dotnet/api/microsoft.servicebus.messaging.pairednamespaceoptions#Microsoft_ServiceBus_Messaging_PairedNamespaceOptions_FailoverInterval
[MessagingException]: /dotnet/api/microsoft.servicebus.messaging.messagingexception
[TimeoutException]: https://msdn.microsoft.com/library/azure/system.timeoutexception.aspx
[BrokeredMessage]: /dotnet/api/microsoft.servicebus.messaging.brokeredmessage
[QueueDescription]: /dotnet/api/microsoft.servicebus.messaging.queuedescription
[TimeSpan]: https://msdn.microsoft.com/library/azure/system.timespan.aspx
[PingPrimaryInterval]: /dotnet/api/microsoft.servicebus.messaging.sendavailabilitypairednamespaceoptions#Microsoft_ServiceBus_Messaging_SendAvailabilityPairedNamespaceOptions_PingPrimaryInterval
[QueueClient]: /dotnet/api/microsoft.servicebus.messaging.queueclient
[TopicClient]: /dotnet/api/microsoft.servicebus.messaging.topicclient
[ContentType]: /dotnet/api/microsoft.servicebus.messaging.brokeredmessage#Microsoft_ServiceBus_Messaging_BrokeredMessage_ContentType
[TimeToLive]: /dotnet/api/microsoft.servicebus.messaging.brokeredmessage#Microsoft_ServiceBus_Messaging_BrokeredMessage_TimeToLive
[Asynchronous messaging patterns and high availability]: service-bus-async-messaging.md
[0]: ./media/service-bus-paired-namespaces/IC673405.png
[1]: ./media/service-bus-paired-namespaces/IC673406.png
[2]: ./media/service-bus-paired-namespaces/IC673407.png

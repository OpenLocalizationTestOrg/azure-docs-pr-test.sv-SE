---
title: "aaaService Bus obeställbara köer | Microsoft Docs"
description: "Översikt över Azure Service Bus-köer för obeställbara"
services: service-bus-messaging
documentationcenter: .net
author: sethmanheim
manager: timlt
editor: 
ms.assetid: 68b2aa38-dba7-491a-9c26-0289bc15d397
ms.service: service-bus-messaging
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: na
ms.date: 05/17/2017
ms.author: clemensv;sethm
ms.openlocfilehash: 1638272085b8a3a59e8814f6f943caee35a2bfdc
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: sv-SE
ms.lasthandoff: 10/06/2017
---
# <a name="overview-of-service-bus-dead-letter-queues"></a><span data-ttu-id="8d115-103">Översikt över Service Bus-köer för obeställbara</span><span class="sxs-lookup"><span data-stu-id="8d115-103">Overview of Service Bus dead-letter queues</span></span>

<span data-ttu-id="8d115-104">Service Bus-köer och ämnesprenumerationer ger en sekundär plats kö kallas en *kö med olevererade brev* (DQL).</span><span class="sxs-lookup"><span data-stu-id="8d115-104">Service Bus queues and topic subscriptions provide a secondary sub-queue, called a *dead-letter queue* (DLQ).</span></span> <span data-ttu-id="8d115-105">hello obeställbara meddelanden behöver inte toobe explicit skapas och kan inte tagits bort eller på annat sätt hanterade oberoende av hello huvudsakliga entitet.</span><span class="sxs-lookup"><span data-stu-id="8d115-105">hello dead-letter queue does not need toobe explicitly created and cannot be deleted or otherwise managed independent of hello main entity.</span></span>

<span data-ttu-id="8d115-106">Den här artikeln beskrivs köer i Azure Service Bus.</span><span class="sxs-lookup"><span data-stu-id="8d115-106">This article discusses dead-letter queues in Azure Service Bus.</span></span> <span data-ttu-id="8d115-107">Mycket av hello diskussion illustreras med hello [köer exempel](https://github.com/Azure/azure-service-bus/tree/master/samples/DotNet/Microsoft.ServiceBus.Messaging/DeadletterQueue) på GitHub.</span><span class="sxs-lookup"><span data-stu-id="8d115-107">Much of hello discussion is illustrated by hello [Dead-Letter Queues sample](https://github.com/Azure/azure-service-bus/tree/master/samples/DotNet/Microsoft.ServiceBus.Messaging/DeadletterQueue) on GitHub.</span></span>
 
## <a name="hello-dead-letter-queue"></a><span data-ttu-id="8d115-108">hello obeställbara meddelanden</span><span class="sxs-lookup"><span data-stu-id="8d115-108">hello dead-letter queue</span></span>

<span data-ttu-id="8d115-109">hello syftar hello obeställbara meddelanden toohold meddelanden som inte kunde levereras tooany mottagaren eller meddelanden som inte kunde bearbetas.</span><span class="sxs-lookup"><span data-stu-id="8d115-109">hello purpose of hello dead-letter queue is toohold messages that cannot be delivered tooany receiver, or messages that could not be processed.</span></span> <span data-ttu-id="8d115-110">Meddelanden kan sedan tas bort från hello DQL och kontrolleras.</span><span class="sxs-lookup"><span data-stu-id="8d115-110">Messages can then be removed from hello DLQ and inspected.</span></span> <span data-ttu-id="8d115-111">Ett program kan, med hjälp av en operatör korrigera problem och skicka hello-meddelande, logga hello faktum att det uppstod ett fel och vidta åtgärder.</span><span class="sxs-lookup"><span data-stu-id="8d115-111">An application might, with help of an operator, correct issues and resubmit hello message, log hello fact that there was an error, and take corrective action.</span></span> 

<span data-ttu-id="8d115-112">Ur ett API och protokoll hello DQL är främst liknande tooany andra kö, förutom att meddelanden kan endast skickas via hello förlorade gest i hello överordnade entiteten.</span><span class="sxs-lookup"><span data-stu-id="8d115-112">From an API and protocol perspective, hello DLQ is mostly similar tooany other queue, except that messages can only be submitted via hello dead-letter gesture of hello parent entity.</span></span> <span data-ttu-id="8d115-113">Dessutom time to live inte observeras, och det går inte att ett meddelande från en DQL för obeställbara.</span><span class="sxs-lookup"><span data-stu-id="8d115-113">In addition, time-to-live is not observed, and you can't dead-letter a message from a DLQ.</span></span> <span data-ttu-id="8d115-114">hello obeställbara meddelanden har fullständigt stöd för leverans av titt Lås och transaktionell åtgärder.</span><span class="sxs-lookup"><span data-stu-id="8d115-114">hello dead-letter queue fully supports peek-lock delivery and transactional operations.</span></span>

<span data-ttu-id="8d115-115">Observera att det finns ingen automatisk rensning av hello DQL.</span><span class="sxs-lookup"><span data-stu-id="8d115-115">Note that there is no automatic cleanup of hello DLQ.</span></span> <span data-ttu-id="8d115-116">Meddelanden ligger kvar i hello DQL tills du uttryckligen hämta dem från hello DQL och anropet [Complete()](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage#Microsoft_ServiceBus_Messaging_BrokeredMessage_CompleteAsync) på förlorade hello-meddelande.</span><span class="sxs-lookup"><span data-stu-id="8d115-116">Messages remain in hello DLQ until you explicitly retrieve them from hello DLQ and call [Complete()](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage#Microsoft_ServiceBus_Messaging_BrokeredMessage_CompleteAsync) on hello dead-letter message.</span></span>

## <a name="moving-messages-toohello-dlq"></a><span data-ttu-id="8d115-117">Flytta meddelanden toohello DQL</span><span class="sxs-lookup"><span data-stu-id="8d115-117">Moving messages toohello DLQ</span></span>

<span data-ttu-id="8d115-118">Det finns flera aktiviteter i Service Bus som orsakar meddelanden tooget pushas toohello DQL från inom hello messaging motorn sig själv.</span><span class="sxs-lookup"><span data-stu-id="8d115-118">There are several activities in Service Bus that cause messages tooget pushed toohello DLQ from within hello messaging engine itself.</span></span> <span data-ttu-id="8d115-119">Ett program kan också explicit flytta meddelanden toohello DQL.</span><span class="sxs-lookup"><span data-stu-id="8d115-119">An application can also explicitly move messages toohello DLQ.</span></span> 

<span data-ttu-id="8d115-120">Allteftersom hello-meddelande har flyttats av hello broker, två egenskaper läggs toohello meddelande som hello broker anropar sin interna version av hello [Systemkön](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage#Microsoft_ServiceBus_Messaging_BrokeredMessage_DeadLetter_System_String_System_String_) metod på hello-meddelande: `DeadLetterReason` och `DeadLetterErrorDescription`.</span><span class="sxs-lookup"><span data-stu-id="8d115-120">As hello message gets moved by hello broker, two properties are added toohello message as hello broker calls its internal version of hello [DeadLetter](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage#Microsoft_ServiceBus_Messaging_BrokeredMessage_DeadLetter_System_String_System_String_) method on hello message: `DeadLetterReason` and `DeadLetterErrorDescription`.</span></span>

<span data-ttu-id="8d115-121">Program kan definiera egna koder för hello `DeadLetterReason` egenskapen men hello system anger hello följande värden.</span><span class="sxs-lookup"><span data-stu-id="8d115-121">Applications can define their own codes for hello `DeadLetterReason` property, but hello system sets hello following values.</span></span>

| <span data-ttu-id="8d115-122">Villkor</span><span class="sxs-lookup"><span data-stu-id="8d115-122">Condition</span></span> | <span data-ttu-id="8d115-123">DeadLetterReason</span><span class="sxs-lookup"><span data-stu-id="8d115-123">DeadLetterReason</span></span> | <span data-ttu-id="8d115-124">DeadLetterErrorDescription</span><span class="sxs-lookup"><span data-stu-id="8d115-124">DeadLetterErrorDescription</span></span> |
| --- | --- | --- |
| <span data-ttu-id="8d115-125">Alltid</span><span class="sxs-lookup"><span data-stu-id="8d115-125">Always</span></span> |<span data-ttu-id="8d115-126">HeaderSizeExceeded</span><span class="sxs-lookup"><span data-stu-id="8d115-126">HeaderSizeExceeded</span></span> |<span data-ttu-id="8d115-127">Hej storlekskvoten för dataströmmen har överskridits.</span><span class="sxs-lookup"><span data-stu-id="8d115-127">hello size quota for this stream has been exceeded.</span></span> |
| <span data-ttu-id="8d115-128">! TopicDescription.</span><span class="sxs-lookup"><span data-stu-id="8d115-128">!TopicDescription.</span></span><br /><span data-ttu-id="8d115-129">EnableFilteringMessagesBeforePublishing och SubscriptionDescription.</span><span class="sxs-lookup"><span data-stu-id="8d115-129">EnableFilteringMessagesBeforePublishing and SubscriptionDescription.</span></span><br /><span data-ttu-id="8d115-130">EnableDeadLetteringOnFilterEvaluationExceptions</span><span class="sxs-lookup"><span data-stu-id="8d115-130">EnableDeadLetteringOnFilterEvaluationExceptions</span></span> |<span data-ttu-id="8d115-131">ett undantag. GetType(). Namn</span><span class="sxs-lookup"><span data-stu-id="8d115-131">exception.GetType().Name</span></span> |<span data-ttu-id="8d115-132">ett undantag. Meddelande</span><span class="sxs-lookup"><span data-stu-id="8d115-132">exception.Message</span></span> |
| <span data-ttu-id="8d115-133">EnableDeadLetteringOnMessageExpiration</span><span class="sxs-lookup"><span data-stu-id="8d115-133">EnableDeadLetteringOnMessageExpiration</span></span> |<span data-ttu-id="8d115-134">TTLExpiredException</span><span class="sxs-lookup"><span data-stu-id="8d115-134">TTLExpiredException</span></span> |<span data-ttu-id="8d115-135">hello-meddelande gått ut och var döda lettered.</span><span class="sxs-lookup"><span data-stu-id="8d115-135">hello message expired and was dead lettered.</span></span> |
| <span data-ttu-id="8d115-136">SubscriptionDescription.RequiresSession</span><span class="sxs-lookup"><span data-stu-id="8d115-136">SubscriptionDescription.RequiresSession</span></span> |<span data-ttu-id="8d115-137">Sessions-id är null.</span><span class="sxs-lookup"><span data-stu-id="8d115-137">Session id is null.</span></span> |<span data-ttu-id="8d115-138">Sessionen aktiverat entitet kan inte meddelandet vars sessions-ID är null.</span><span class="sxs-lookup"><span data-stu-id="8d115-138">Session enabled entity doesn't allow a message whose session identifier is null.</span></span> |
| <span data-ttu-id="8d115-139">! kö med olevererade brev</span><span class="sxs-lookup"><span data-stu-id="8d115-139">!dead letter queue</span></span> |<span data-ttu-id="8d115-140">MaxTransferHopCountExceeded</span><span class="sxs-lookup"><span data-stu-id="8d115-140">MaxTransferHopCountExceeded</span></span> |<span data-ttu-id="8d115-141">Null</span><span class="sxs-lookup"><span data-stu-id="8d115-141">Null</span></span> |
| <span data-ttu-id="8d115-142">Programmet explicit döda oljekategori</span><span class="sxs-lookup"><span data-stu-id="8d115-142">Application explicit dead lettering</span></span> |<span data-ttu-id="8d115-143">Anges av programmet</span><span class="sxs-lookup"><span data-stu-id="8d115-143">Specified by application</span></span> |<span data-ttu-id="8d115-144">Anges av programmet</span><span class="sxs-lookup"><span data-stu-id="8d115-144">Specified by application</span></span> |

## <a name="exceeding-maxdeliverycount"></a><span data-ttu-id="8d115-145">Överstiger MaxDeliveryCount</span><span class="sxs-lookup"><span data-stu-id="8d115-145">Exceeding MaxDeliveryCount</span></span>
<span data-ttu-id="8d115-146">Köer och -prenumerationer har en [QueueDescription.MaxDeliveryCount](/dotnet/api/microsoft.servicebus.messaging.queuedescription#Microsoft_ServiceBus_Messaging_QueueDescription_MaxDeliveryCount) och [SubscriptionDescription.MaxDeliveryCount](/dotnet/api/microsoft.servicebus.messaging.subscriptiondescription#Microsoft_ServiceBus_Messaging_SubscriptionDescription_MaxDeliveryCount) egenskapen respektive; hello standardvärdet är 10.</span><span class="sxs-lookup"><span data-stu-id="8d115-146">Queues and subscriptions each have a [QueueDescription.MaxDeliveryCount](/dotnet/api/microsoft.servicebus.messaging.queuedescription#Microsoft_ServiceBus_Messaging_QueueDescription_MaxDeliveryCount) and [SubscriptionDescription.MaxDeliveryCount](/dotnet/api/microsoft.servicebus.messaging.subscriptiondescription#Microsoft_ServiceBus_Messaging_SubscriptionDescription_MaxDeliveryCount) property respectively; hello default value is 10.</span></span> <span data-ttu-id="8d115-147">När ett meddelande som har levererats under ett lås ([ReceiveMode.PeekLock](/dotnet/api/microsoft.servicebus.messaging.receivemode)), men har antingen explicit avbrutna eller hello låset har upphört att gälla, hello-meddelande [BrokeredMessage.DeliveryCount](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage#Microsoft_ServiceBus_Messaging_BrokeredMessage_DeliveryCount) är stegvis.</span><span class="sxs-lookup"><span data-stu-id="8d115-147">Whenever a message has been delivered under a lock ([ReceiveMode.PeekLock](/dotnet/api/microsoft.servicebus.messaging.receivemode)), but has been either explicitly abandoned or hello lock has expired, hello message's [BrokeredMessage.DeliveryCount](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage#Microsoft_ServiceBus_Messaging_BrokeredMessage_DeliveryCount) is incremented.</span></span> <span data-ttu-id="8d115-148">När [DeliveryCount](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage#Microsoft_ServiceBus_Messaging_BrokeredMessage_DeliveryCount) överskrider [MaxDeliveryCount](/dotnet/api/microsoft.servicebus.messaging.queuedescription#Microsoft_ServiceBus_Messaging_QueueDescription_MaxDeliveryCount), hello-meddelande har flyttats toohello DQL, att ange hello `MaxDeliveryCountExceeded` orsakskod.</span><span class="sxs-lookup"><span data-stu-id="8d115-148">When [DeliveryCount](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage#Microsoft_ServiceBus_Messaging_BrokeredMessage_DeliveryCount) exceeds [MaxDeliveryCount](/dotnet/api/microsoft.servicebus.messaging.queuedescription#Microsoft_ServiceBus_Messaging_QueueDescription_MaxDeliveryCount), hello message is moved toohello DLQ, specifying hello `MaxDeliveryCountExceeded` reason code.</span></span>

<span data-ttu-id="8d115-149">Det här problemet kan inte inaktiveras, men du kan ange [MaxDeliveryCount](/dotnet/api/microsoft.servicebus.messaging.queuedescription#Microsoft_ServiceBus_Messaging_QueueDescription_MaxDeliveryCount) tooa mycket stora tal.</span><span class="sxs-lookup"><span data-stu-id="8d115-149">This behavior cannot be disabled, but you can set [MaxDeliveryCount](/dotnet/api/microsoft.servicebus.messaging.queuedescription#Microsoft_ServiceBus_Messaging_QueueDescription_MaxDeliveryCount) tooa very large number.</span></span>

## <a name="exceeding-timetolive"></a><span data-ttu-id="8d115-150">Mer än TimeToLive</span><span class="sxs-lookup"><span data-stu-id="8d115-150">Exceeding TimeToLive</span></span>
<span data-ttu-id="8d115-151">När hello [QueueDescription.EnableDeadLetteringOnMessageExpiration](/dotnet/api/microsoft.servicebus.messaging.queuedescription#Microsoft_ServiceBus_Messaging_QueueDescription_EnableDeadLetteringOnMessageExpiration) eller [SubscriptionDescription.EnableDeadLetteringOnMessageExpiration](/dotnet/api/microsoft.servicebus.messaging.subscriptiondescription#Microsoft_ServiceBus_Messaging_SubscriptionDescription_EnableDeadLetteringOnMessageExpiration) egenskapen för**true** (hello standardvärdet är **FALSKT**), alla utgående meddelanden är flyttade toohello DQL, att ange hello `TTLExpiredException` orsakskod.</span><span class="sxs-lookup"><span data-stu-id="8d115-151">When hello [QueueDescription.EnableDeadLetteringOnMessageExpiration](/dotnet/api/microsoft.servicebus.messaging.queuedescription#Microsoft_ServiceBus_Messaging_QueueDescription_EnableDeadLetteringOnMessageExpiration) or [SubscriptionDescription.EnableDeadLetteringOnMessageExpiration](/dotnet/api/microsoft.servicebus.messaging.subscriptiondescription#Microsoft_ServiceBus_Messaging_SubscriptionDescription_EnableDeadLetteringOnMessageExpiration) property is set too**true** (hello default is **false**), all expiring messages are moved toohello DLQ, specifying hello  `TTLExpiredException` reason code.</span></span>

<span data-ttu-id="8d115-152">Observera att inaktuella meddelanden rensas bara och därför flyttas toohello DQL när det finns minst en aktiv mottagaren dra på hello huvudkön eller prenumeration; Detta är avsiktligt.</span><span class="sxs-lookup"><span data-stu-id="8d115-152">Note that expired messages are only purged and therefore moved toohello DLQ when there is at least one active receiver pulling on hello main queue or subscription; that behavior is by design.</span></span>

## <a name="errors-while-processing-subscription-rules"></a><span data-ttu-id="8d115-153">Fel vid bearbetning av prenumerationsregler</span><span class="sxs-lookup"><span data-stu-id="8d115-153">Errors while processing subscription rules</span></span>
<span data-ttu-id="8d115-154">När hello [SubscriptionDescription.EnableDeadLetteringOnFilterEvaluationExceptions](/dotnet/api/microsoft.servicebus.messaging.subscriptiondescription#Microsoft_ServiceBus_Messaging_SubscriptionDescription_EnableDeadLetteringOnFilterEvaluationExceptions) egenskapen är aktiverad för en prenumeration, eventuella fel som inträffar när en prenumeration SQL filterregeln kör fångas i hello DQL tillsammans med hello felaktig meddelandet.</span><span class="sxs-lookup"><span data-stu-id="8d115-154">When hello [SubscriptionDescription.EnableDeadLetteringOnFilterEvaluationExceptions](/dotnet/api/microsoft.servicebus.messaging.subscriptiondescription#Microsoft_ServiceBus_Messaging_SubscriptionDescription_EnableDeadLetteringOnFilterEvaluationExceptions) property is enabled for a subscription, any errors that occur while a subscription's SQL filter rule executes are captured in hello DLQ along with hello offending message.</span></span>

## <a name="application-level-dead-lettering"></a><span data-ttu-id="8d115-155">Programnivå dead-lettering</span><span class="sxs-lookup"><span data-stu-id="8d115-155">Application-level dead-lettering</span></span>
<span data-ttu-id="8d115-156">Program kan använda DQL tooexplicitly avvisa oacceptabel hälsningsmeddelande i tillägg toohello systembaserade dead-lettering funktioner.</span><span class="sxs-lookup"><span data-stu-id="8d115-156">In addition toohello system-provided dead-lettering features, applications can use hello DLQ tooexplicitly reject unacceptable messages.</span></span> <span data-ttu-id="8d115-157">Detta kan inkludera meddelanden som inte kan behandlas korrekt på grund av tooany slags systemproblem, meddelanden som har felaktiga nyttolaster eller meddelanden som avbryts autentiseringen när vissa meddelandenivå säkerhetsprogram används.</span><span class="sxs-lookup"><span data-stu-id="8d115-157">This may include messages that cannot be properly processed due tooany sort of system issue, messages that hold malformed payloads, or messages that fail authentication when some message-level security scheme is used.</span></span>

## <a name="dead-lettering-in-forwardto-or-sendvia-scenarios"></a><span data-ttu-id="8d115-158">Dead-lettering i ForwardTo eller SendVia scenarier</span><span class="sxs-lookup"><span data-stu-id="8d115-158">Dead-lettering in ForwardTo or SendVia scenarios</span></span>

<span data-ttu-id="8d115-159">Meddelanden kommer att skickas toohello överföring obeställbara meddelanden under hello följande villkor:</span><span class="sxs-lookup"><span data-stu-id="8d115-159">Messages will be sent toohello transfer dead-letter queue under hello following conditions:</span></span>

- <span data-ttu-id="8d115-160">Ett meddelande som passerar genom mer än 3 köer och ämnen som [sammankopplade](service-bus-auto-forwarding.md).</span><span class="sxs-lookup"><span data-stu-id="8d115-160">A message passes through more than 3 queues or topics that are [chained together](service-bus-auto-forwarding.md).</span></span>
- <span data-ttu-id="8d115-161">hello målkön eller avsnittet är inaktiverad eller borttagen.</span><span class="sxs-lookup"><span data-stu-id="8d115-161">hello destination queue or topic is disabled or deleted.</span></span>
- <span data-ttu-id="8d115-162">hello målkön eller avsnittet överskrider hello entitet maximala storlek.</span><span class="sxs-lookup"><span data-stu-id="8d115-162">hello destination queue or topic exceeds hello maximum entity size.</span></span>

<span data-ttu-id="8d115-163">tooretrieve lettered förlorade meddelanden, kan du skapa en mottagare med hello [FormatTransferDeadletterPath](/dotnet/api/microsoft.servicebus.messaging.queueclient#Microsoft_ServiceBus_Messaging_QueueClient_FormatTransferDeadLetterPath_System_String_) verktyget metod.</span><span class="sxs-lookup"><span data-stu-id="8d115-163">tooretrieve these dead-lettered messages, you can create a receiver using hello [FormatTransferDeadletterPath](/dotnet/api/microsoft.servicebus.messaging.queueclient#Microsoft_ServiceBus_Messaging_QueueClient_FormatTransferDeadLetterPath_System_String_) utility method.</span></span>

## <a name="example"></a><span data-ttu-id="8d115-164">Exempel</span><span class="sxs-lookup"><span data-stu-id="8d115-164">Example</span></span>
<span data-ttu-id="8d115-165">följande kodstycke hello skapar en mottagare för meddelandet.</span><span class="sxs-lookup"><span data-stu-id="8d115-165">hello following code snippet creates a message receiver.</span></span> <span data-ttu-id="8d115-166">I hello meddelandemottagning för hello huvudkön, hello koden hämtar hello-meddelande med [Receive(TimeSpan.Zero)](/dotnet/api/microsoft.servicebus.messaging.messagereceiver#Microsoft_ServiceBus_Messaging_MessageReceiver_Receive_System_TimeSpan_), där du tillfrågas hello broker tooinstantly returnerade ett meddelande som är tillgänglig eller tooreturn med inget resultat.</span><span class="sxs-lookup"><span data-stu-id="8d115-166">In hello receive loop for hello main queue, hello code retrieves hello message with [Receive(TimeSpan.Zero)](/dotnet/api/microsoft.servicebus.messaging.messagereceiver#Microsoft_ServiceBus_Messaging_MessageReceiver_Receive_System_TimeSpan_), which asks hello broker tooinstantly return any message readily available, or tooreturn with no result.</span></span> <span data-ttu-id="8d115-167">Om hello-koden får ett meddelande visas den omedelbart avbryts, vilket ökar hello `DeliveryCount`.</span><span class="sxs-lookup"><span data-stu-id="8d115-167">If hello code receives a message, it immediately abandons it, which increments hello  `DeliveryCount`.</span></span> <span data-ttu-id="8d115-168">När hello flyttas hello meddelandet toohello DQL, hello huvudkön är tom och hello loop utgångar som [ReceiveAsync](/dotnet/api/microsoft.servicebus.messaging.messagereceiver#Microsoft_ServiceBus_Messaging_MessageReceiver_ReceiveAsync_System_TimeSpan_) returnerar **null**.</span><span class="sxs-lookup"><span data-stu-id="8d115-168">Once hello system moves hello message toohello DLQ, hello main queue is empty and hello loop exits, as [ReceiveAsync](/dotnet/api/microsoft.servicebus.messaging.messagereceiver#Microsoft_ServiceBus_Messaging_MessageReceiver_ReceiveAsync_System_TimeSpan_) returns **null**.</span></span>

```csharp
var receiver = await receiverFactory.CreateMessageReceiverAsync(queueName, ReceiveMode.PeekLock);
while(true)
{
    var msg = await receiver.ReceiveAsync(TimeSpan.Zero);
    if (msg != null)
    {
        Console.WriteLine("Picked up message; DeliveryCount {0}", msg.DeliveryCount);
        await msg.AbandonAsync();
    }
    else
    {
        break;
    }
}
```

## <a name="next-steps"></a><span data-ttu-id="8d115-169">Nästa steg</span><span class="sxs-lookup"><span data-stu-id="8d115-169">Next steps</span></span>
<span data-ttu-id="8d115-170">Se följande artiklar för mer information om Service Bus-köer hello:</span><span class="sxs-lookup"><span data-stu-id="8d115-170">See hello following articles for more information about Service Bus queues:</span></span>

* [<span data-ttu-id="8d115-171">Komma igång med Service Bus-köer</span><span class="sxs-lookup"><span data-stu-id="8d115-171">Get started with Service Bus queues</span></span>](service-bus-dotnet-get-started-with-queues.md)
* [<span data-ttu-id="8d115-172">Azure-köer och Service Bus-köer jämfört med</span><span class="sxs-lookup"><span data-stu-id="8d115-172">Azure Queues and Service Bus queues compared</span></span>](service-bus-azure-and-service-bus-queues-compared-contrasted.md)


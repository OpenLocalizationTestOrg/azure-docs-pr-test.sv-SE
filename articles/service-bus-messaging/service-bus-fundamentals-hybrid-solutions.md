---
title: aaaOverview av grunderna i Azure Service Bus | Microsoft Docs
description: En introduktion toousing Service Bus tooconnect Azure-program tooother programvara.
services: service-bus-messaging
documentationcenter: .net
author: sethmanheim
manager: timlt
editor: 
ms.assetid: 12654cdd-82ab-4b95-b56f-08a5a8bbc6f9
ms.service: service-bus-messaging
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: get-started-article
ms.date: 06/15/2017
ms.author: sethm
ms.openlocfilehash: 1abd5cf310ef06ba35e1e2489a7c0a07e1797736
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: sv-SE
ms.lasthandoff: 10/06/2017
---
# <a name="azure-service-bus"></a><span data-ttu-id="1b733-103">Azure Service Bus</span><span class="sxs-lookup"><span data-stu-id="1b733-103">Azure Service Bus</span></span>

<span data-ttu-id="1b733-104">Om ett program eller tjänst körs i hello molnet eller lokalt, måste den ofta toointeract med andra program eller tjänster.</span><span class="sxs-lookup"><span data-stu-id="1b733-104">Whether an application or service runs in hello cloud or on premises, it often needs toointeract with other applications or services.</span></span> <span data-ttu-id="1b733-105">tooprovide ett fritt och praktiskt sätt toodo detta, erbjudanden för Microsoft Azure Service Bus.</span><span class="sxs-lookup"><span data-stu-id="1b733-105">tooprovide a broadly useful way toodo this, Microsoft Azure offers Service Bus.</span></span> <span data-ttu-id="1b733-106">Den här artikeln beskrivs denna teknik och beskriver vad det är och varför du kanske vill toouse den.</span><span class="sxs-lookup"><span data-stu-id="1b733-106">This article looks at this technology, describing what it is and why you might want toouse it.</span></span>

## <a name="service-bus-fundamentals"></a><span data-ttu-id="1b733-107">Grunderna i Service Bus</span><span class="sxs-lookup"><span data-stu-id="1b733-107">Service Bus fundamentals</span></span>

<span data-ttu-id="1b733-108">Olika situationer kräver olika kommunikationsstilar.</span><span class="sxs-lookup"><span data-stu-id="1b733-108">Different situations call for different styles of communication.</span></span> <span data-ttu-id="1b733-109">Ibland är att låta appar skicka och ta emot meddelanden via en enkel kö hello bästa lösningen.</span><span class="sxs-lookup"><span data-stu-id="1b733-109">Sometimes, letting applications send and receive messages through a simple queue is hello best solution.</span></span> <span data-ttu-id="1b733-110">I vissa situationer räcker det inte med en vanlig kö, utan det är bättre att använda en kö med en mekanism av typen publicera och prenumerera.</span><span class="sxs-lookup"><span data-stu-id="1b733-110">In other situations, an ordinary queue isn't enough; a queue with a publish-and-subscribe mechanism is better.</span></span> <span data-ttu-id="1b733-111">I andra fall är allt som behövs en anslutning mellan apparna. Köer är överflödiga.</span><span class="sxs-lookup"><span data-stu-id="1b733-111">In some cases, all that's needed is a connection between applications, and queues are not required.</span></span> <span data-ttu-id="1b733-112">Service Bus innehåller alla tre alternativ att aktivera ditt program toointeract på flera olika sätt.</span><span class="sxs-lookup"><span data-stu-id="1b733-112">Service Bus provides all three options, enabling your applications toointeract in several different ways.</span></span>

<span data-ttu-id="1b733-113">Service Bus är en tjänst i molnet för flera innehavare, vilket innebär att hello tjänsten delas av flera användare.</span><span class="sxs-lookup"><span data-stu-id="1b733-113">Service Bus is a multi-tenant cloud service, which means that hello service is shared by multiple users.</span></span> <span data-ttu-id="1b733-114">Varje användare, till exempel en programutvecklare, skapar en *namnområde*, definierar hello kommunikationsmekanismer behövs inom det här namnområdet.</span><span class="sxs-lookup"><span data-stu-id="1b733-114">Each user, such as an application developer, creates a *namespace*, then defines hello communication mechanisms needed within that namespace.</span></span> <span data-ttu-id="1b733-115">Bild 1 visar hur den här arkitekturen ser ut.</span><span class="sxs-lookup"><span data-stu-id="1b733-115">Figure 1 shows how this architecture looks.</span></span>

![][1]

<span data-ttu-id="1b733-116">**Bild 1: Service Bus innehåller en tjänst för flera innehavare för att ansluta appar via hello molnet.**</span><span class="sxs-lookup"><span data-stu-id="1b733-116">**Figure 1: Service Bus provides a multi-tenant service for connecting applications through hello cloud.**</span></span>

<span data-ttu-id="1b733-117">Du kan använda en eller flera instanser av tre olika kommunikationsmekanismer inom namnområdet. Dessa ansluter till appar på olika sätt.</span><span class="sxs-lookup"><span data-stu-id="1b733-117">Within a namespace, you can use one or more instances of three different communication mechanisms, each of which connects applications in a different way.</span></span> <span data-ttu-id="1b733-118">hello-alternativen är:</span><span class="sxs-lookup"><span data-stu-id="1b733-118">hello choices are:</span></span>

* <span data-ttu-id="1b733-119">*Köer*, som tillåter en enkelriktad kommunikation.</span><span class="sxs-lookup"><span data-stu-id="1b733-119">*Queues*, which allow one-directional communication.</span></span> <span data-ttu-id="1b733-120">Varje kö fungerar som en mellanhand (kallas ibland för en *koordinator*) som sparar skickade meddelanden tills de tas emot.</span><span class="sxs-lookup"><span data-stu-id="1b733-120">Each queue acts as an intermediary (sometimes called a *broker*) that stores sent messages until they are received.</span></span> <span data-ttu-id="1b733-121">Varje meddelande tas emot av en enda mottagare.</span><span class="sxs-lookup"><span data-stu-id="1b733-121">Each message is received by a single recipient.</span></span>
* <span data-ttu-id="1b733-122">*Ämnen*, som ger enkelriktad kommunikation med hjälp av *prenumerationer*. Ett ämne kan ha flera prenumerationer.</span><span class="sxs-lookup"><span data-stu-id="1b733-122">*Topics*, which provide one-directional communication using *subscriptions*-a single topic can have multiple subscriptions.</span></span> <span data-ttu-id="1b733-123">Ett ämne som fungerar som en koordinator precis som en kö, men varje prenumeration kan du använda ett filter tooreceive endast meddelanden som uppfyller specifika villkor.</span><span class="sxs-lookup"><span data-stu-id="1b733-123">Like a queue, a topic acts as a broker, but each subscription can optionally use a filter tooreceive only messages that match specific criteria.</span></span>
* <span data-ttu-id="1b733-124">*Reläer* (relays), som ger dubbelriktad kommunikation.</span><span class="sxs-lookup"><span data-stu-id="1b733-124">*Relays*, which provide bi-directional communication.</span></span> <span data-ttu-id="1b733-125">Till skillnad från köer och ämnen lagrar inte ett relä meddelanden som redan startats. Det är alltså inte en koordinator.</span><span class="sxs-lookup"><span data-stu-id="1b733-125">Unlike queues and topics, a relay doesn't store in-flight messages; it's not a broker.</span></span> <span data-ttu-id="1b733-126">I stället Reläet bara meddelandena på toohello målprogrammet.</span><span class="sxs-lookup"><span data-stu-id="1b733-126">Instead, it just passes them on toohello destination application.</span></span>

<span data-ttu-id="1b733-127">När du skapar en kö, ett ämne eller ett relä ger du dem ett namn.</span><span class="sxs-lookup"><span data-stu-id="1b733-127">When you create a queue, topic, or relay, you give it a name.</span></span> <span data-ttu-id="1b733-128">Det här namnet skapar i kombination med det namn som du gav namnområdet, en unik identifierare för hello-objektet.</span><span class="sxs-lookup"><span data-stu-id="1b733-128">Combined with whatever you called your namespace, this name creates a unique identifier for hello object.</span></span> <span data-ttu-id="1b733-129">Program kan ange det här namnet tooService Bus och sedan använda den kön, ämnet eller relay toocommunicate med varandra.</span><span class="sxs-lookup"><span data-stu-id="1b733-129">Applications can provide this name tooService Bus, then use that queue, topic, or relay toocommunicate with one another.</span></span> 

<span data-ttu-id="1b733-130">toouse någon av dessa objekt i hello relay scenario, Windows-program kan använda Windows Communication Foundation (WCF).</span><span class="sxs-lookup"><span data-stu-id="1b733-130">toouse any of these objects in hello relay scenario, Windows applications can use Windows Communication Foundation (WCF).</span></span> <span data-ttu-id="1b733-131">Den här tjänsten kallas [WCF Relay](../service-bus-relay/relay-what-is-it.md).</span><span class="sxs-lookup"><span data-stu-id="1b733-131">This service is known as [WCF Relay](../service-bus-relay/relay-what-is-it.md).</span></span> <span data-ttu-id="1b733-132">För köer och ämnen kan Windows-program använda API:er för Service Bus-definierade meddelandefunktioner.</span><span class="sxs-lookup"><span data-stu-id="1b733-132">For queues and topics, Windows applications can use Service Bus-defined messaging APIs.</span></span> <span data-ttu-id="1b733-133">toomake dessa objekt enklare toouse från Windows-program, tillhandahåller Microsoft SDK för Java, Node.js och andra språk.</span><span class="sxs-lookup"><span data-stu-id="1b733-133">toomake these objects easier toouse from non-Windows applications, Microsoft provides SDKs for Java, Node.js, and other languages.</span></span> <span data-ttu-id="1b733-134">Du kan även få åtkomst till köer och ämnen med hjälp av [REST-API:er](/rest/api/servicebus/) via HTTP.</span><span class="sxs-lookup"><span data-stu-id="1b733-134">You can also access queues and topics using [REST APIs](/rest/api/servicebus/) over HTTP(s).</span></span> 

<span data-ttu-id="1b733-135">Det är viktigt toounderstand som även om Service Bus själva körs i molnet hello (det vill säga i datacenter för Microsoft Azure), program som använder den kan köras var som helst.</span><span class="sxs-lookup"><span data-stu-id="1b733-135">It's important toounderstand that even though Service Bus itself runs in hello cloud (that is, in Microsoft's Azure datacenters), applications that use it can run anywhere.</span></span> <span data-ttu-id="1b733-136">Du kan använda Service Bus tooconnect program som körs på Azure, till exempel eller program som körs i ditt eget datacenter.</span><span class="sxs-lookup"><span data-stu-id="1b733-136">You can use Service Bus tooconnect applications running on Azure, for example, or applications running inside your own datacenter.</span></span> <span data-ttu-id="1b733-137">Du kan också använda den tooconnect ett program som körs på Azure eller en annan molnplattform med ett lokalt program eller med surfplattor och telefoner.</span><span class="sxs-lookup"><span data-stu-id="1b733-137">You can also use it tooconnect an application running on Azure or another cloud platform with an on-premises application or with tablets and phones.</span></span> <span data-ttu-id="1b733-138">Det är även möjligt tooconnect hushållsapparater, sensorer och andra enheter tooa centralt program eller tooone andra.</span><span class="sxs-lookup"><span data-stu-id="1b733-138">It's even possible tooconnect household appliances, sensors, and other devices tooa central application or tooone other.</span></span> <span data-ttu-id="1b733-139">Service Bus är en mekanism för kommunikation i hello moln som är tillgänglig från nästan var som helst.</span><span class="sxs-lookup"><span data-stu-id="1b733-139">Service Bus is a communication mechanism in hello cloud that's accessible from pretty much anywhere.</span></span> <span data-ttu-id="1b733-140">Hur du använder beror det på vilken dina program behöver toodo.</span><span class="sxs-lookup"><span data-stu-id="1b733-140">How you use it depends on what your applications need toodo.</span></span>

## <a name="queues"></a><span data-ttu-id="1b733-141">Köer</span><span class="sxs-lookup"><span data-stu-id="1b733-141">Queues</span></span>

<span data-ttu-id="1b733-142">Anta att du bestämmer dig för tooconnect två program med hjälp av en Service Bus-kö.</span><span class="sxs-lookup"><span data-stu-id="1b733-142">Suppose you decide tooconnect two applications using a Service Bus queue.</span></span> <span data-ttu-id="1b733-143">Bild 2 visar den här situationen.</span><span class="sxs-lookup"><span data-stu-id="1b733-143">Figure 2 illustrates this situation.</span></span>

![][2]

<span data-ttu-id="1b733-144">**Bild 2: Service Bus-köer erbjuder enkelriktade asynkrona köer.**</span><span class="sxs-lookup"><span data-stu-id="1b733-144">**Figure 2: Service Bus queues provide one-way asynchronous queuing.**</span></span>

<span data-ttu-id="1b733-145">hello-processen är enkel: en avsändare skickar ett meddelande tooa Service Bus-kö och en mottagare hämtar meddelandet vid ett senare tillfälle.</span><span class="sxs-lookup"><span data-stu-id="1b733-145">hello process is simple: A sender sends a message tooa Service Bus queue, and a receiver picks up that message at some later time.</span></span> <span data-ttu-id="1b733-146">En kö kan ha bara en enkel mottagare, som bild 2 visar.</span><span class="sxs-lookup"><span data-stu-id="1b733-146">A queue can have just a single receiver, as Figure 2 shows.</span></span> <span data-ttu-id="1b733-147">Eller flera program kan läsa från hello samma kö.</span><span class="sxs-lookup"><span data-stu-id="1b733-147">Or, multiple applications can read from hello same queue.</span></span> <span data-ttu-id="1b733-148">I hello senare fallet läses varje meddelande av enbart en mottagare.</span><span class="sxs-lookup"><span data-stu-id="1b733-148">In hello latter situation, each message is read by just one receiver.</span></span> <span data-ttu-id="1b733-149">För en tjänst med multi-cast bör du istället använda ett ämne.</span><span class="sxs-lookup"><span data-stu-id="1b733-149">For a multi-cast service, you should use a topic instead.</span></span>

<span data-ttu-id="1b733-150">Varje meddelande består av två delar: en uppsättning egenskaper, som alla är ett nyckel-/värdepar, och en meddelandenyttolast.</span><span class="sxs-lookup"><span data-stu-id="1b733-150">Each message has two parts: a set of properties, each a key/value pair, and a message payload.</span></span> <span data-ttu-id="1b733-151">hello nyttolasten kan vara binary, text eller även XML.</span><span class="sxs-lookup"><span data-stu-id="1b733-151">hello payload can be binary, text, or even XML.</span></span> <span data-ttu-id="1b733-152">Hur de används beror på vilken ett program försöker toodo.</span><span class="sxs-lookup"><span data-stu-id="1b733-152">How they're used depends on what an application is trying toodo.</span></span> <span data-ttu-id="1b733-153">Till exempel ett program som skickar ett meddelande om en nyligen genomförd försäljning kan innehålla hello egenskaper **säljare = ”Ava”** och **belopp = 10000**.</span><span class="sxs-lookup"><span data-stu-id="1b733-153">For example, an application sending a message about a recent sale might include hello properties **Seller="Ava"** and **Amount=10000**.</span></span> <span data-ttu-id="1b733-154">hello meddelandetexten kan innehålla en skannad bild av hello försäljningsavtalet eller om det inte finns någon, vara tomt.</span><span class="sxs-lookup"><span data-stu-id="1b733-154">hello message body might contain a scanned image of hello sale's signed contract or, if there isn't one, remain empty.</span></span>

<span data-ttu-id="1b733-155">En mottagare kan läsa ett meddelande från en Service Bus-kö på två olika sätt.</span><span class="sxs-lookup"><span data-stu-id="1b733-155">A receiver can read a message from a Service Bus queue in two different ways.</span></span> <span data-ttu-id="1b733-156">Hej första alternativet, som kallas  *[ReceiveAndDelete](/dotnet/api/microsoft.servicebus.messaging.receivemode)*, tar bort ett meddelande från hello kön och raderar det direkt.</span><span class="sxs-lookup"><span data-stu-id="1b733-156">hello first option, called *[ReceiveAndDelete](/dotnet/api/microsoft.servicebus.messaging.receivemode)*, removes a message from hello queue and immediately deletes it.</span></span> <span data-ttu-id="1b733-157">Det här alternativet är enkla, men om hello mottagaren kraschar innan den är klar hello-meddelande, hello-meddelande förloras.</span><span class="sxs-lookup"><span data-stu-id="1b733-157">This option is simple, but if hello receiver crashes before it finishes processing hello message, hello message is lost.</span></span> <span data-ttu-id="1b733-158">Eftersom den har tagits bort från hello kön kan inga andra mottagare komma åt den.</span><span class="sxs-lookup"><span data-stu-id="1b733-158">Because it's been removed from hello queue, no other receiver can access it.</span></span> 

<span data-ttu-id="1b733-159">Hej andra alternativet  *[PeekLock](/dotnet/api/microsoft.servicebus.messaging.receivemode)*, är avsedd toohelp med det här problemet.</span><span class="sxs-lookup"><span data-stu-id="1b733-159">hello second option, *[PeekLock](/dotnet/api/microsoft.servicebus.messaging.receivemode)*, is meant toohelp with this problem.</span></span> <span data-ttu-id="1b733-160">Som **ReceiveAndDelete**, **PeekLock** bort meddelandet från kön hello.</span><span class="sxs-lookup"><span data-stu-id="1b733-160">Like **ReceiveAndDelete**, a **PeekLock** read removes a message from hello queue.</span></span> <span data-ttu-id="1b733-161">Hello-meddelande bort inte men.</span><span class="sxs-lookup"><span data-stu-id="1b733-161">It doesn't delete hello message, however.</span></span> <span data-ttu-id="1b733-162">I stället låser hello-meddelande, vilket gör det osynligt tooother mottagare, och väntar på något av följande tre händelser:</span><span class="sxs-lookup"><span data-stu-id="1b733-162">Instead, it locks hello message, making it invisible tooother receivers, then waits for one of three events:</span></span>

* <span data-ttu-id="1b733-163">Om hello mottagaren processer hello meddelandet har, anropar [Complete()](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage#Microsoft_ServiceBus_Messaging_BrokeredMessage_Complete), och hello kön raderar hello-meddelande.</span><span class="sxs-lookup"><span data-stu-id="1b733-163">If hello receiver processes hello message successfully, it calls [Complete()](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage#Microsoft_ServiceBus_Messaging_BrokeredMessage_Complete), and hello queue deletes hello message.</span></span> 
* <span data-ttu-id="1b733-164">Om hello mottagaren beslutar att den inte kan bearbeta har hello-meddelande, anropar [Abandon()](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage#Microsoft_ServiceBus_Messaging_BrokeredMessage_Abandon).</span><span class="sxs-lookup"><span data-stu-id="1b733-164">If hello receiver decides that it can't process hello message successfully, it calls [Abandon()](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage#Microsoft_ServiceBus_Messaging_BrokeredMessage_Abandon).</span></span> <span data-ttu-id="1b733-165">hello kön tar bort hello lås från hello-meddelande sedan och gör den tillgänglig tooother mottagare.</span><span class="sxs-lookup"><span data-stu-id="1b733-165">hello queue then removes hello lock from hello message and makes it available tooother receivers.</span></span>
* <span data-ttu-id="1b733-166">Om hello mottagaren inte anropar något av dessa metoder inom en konfigurerbar tidsperiod (som standard 60 sekunder), förutsätter kön hello hello mottagaren har misslyckats.</span><span class="sxs-lookup"><span data-stu-id="1b733-166">If hello receiver calls neither of these methods within a configurable period of time (by default, 60 seconds), hello queue assumes hello receiver has failed.</span></span> <span data-ttu-id="1b733-167">I det här fallet fungerar som om hello mottagaren hade anropat **Avbryt**, gör hello meddelandet tillgängliga tooother mottagare.</span><span class="sxs-lookup"><span data-stu-id="1b733-167">In this case, it behaves as if hello receiver had called **Abandon**, making hello message available tooother receivers.</span></span>

<span data-ttu-id="1b733-168">Observera vad som kan inträffa här: hello samma meddelande kan levereras två gånger, kanske tootwo olika mottagare.</span><span class="sxs-lookup"><span data-stu-id="1b733-168">Notice what can happen here: hello same message might be delivered twice, perhaps tootwo different receivers.</span></span> <span data-ttu-id="1b733-169">Appar som använder Service Bus-köer måste förberedas för denna händelse.</span><span class="sxs-lookup"><span data-stu-id="1b733-169">Applications using Service Bus queues must be prepared for this event.</span></span> <span data-ttu-id="1b733-170">toomake dubblettidentifiering enklare, varje meddelande har ett unikt [MessageID](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage#Microsoft_ServiceBus_Messaging_BrokeredMessage_MessageId) egenskap som standard förblir hello densamma, oavsett hur många gånger hello-meddelande läses från en kö.</span><span class="sxs-lookup"><span data-stu-id="1b733-170">toomake duplicate detection easier, each message has a unique [MessageID](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage#Microsoft_ServiceBus_Messaging_BrokeredMessage_MessageId) property that by default stays hello same no matter how many times hello message is read from a queue.</span></span> 

<span data-ttu-id="1b733-171">Köer är användbara i ett ganska stort antal situationer.</span><span class="sxs-lookup"><span data-stu-id="1b733-171">Queues are useful in quite a few situations.</span></span> <span data-ttu-id="1b733-172">De gör att program toocommunicate även när båda inte körs på hello samma tid, något som är särskilt praktiskt med batch- och mobilprogram.</span><span class="sxs-lookup"><span data-stu-id="1b733-172">They enable applications toocommunicate even when both aren't running at hello same time, something that's especially handy with batch and mobile applications.</span></span> <span data-ttu-id="1b733-173">En kö med flera mottagare ger också automatisk belastningsbalansering eftersom skickade meddelanden sprids ut bland dessa mottagare.</span><span class="sxs-lookup"><span data-stu-id="1b733-173">A queue with multiple receivers also provides automatic load balancing, since sent messages are spread across these receivers.</span></span>

## <a name="topics"></a><span data-ttu-id="1b733-174">Ämnen</span><span class="sxs-lookup"><span data-stu-id="1b733-174">Topics</span></span>

<span data-ttu-id="1b733-175">Användbara som de är köer är inte alltid hello rätta lösningen.</span><span class="sxs-lookup"><span data-stu-id="1b733-175">Useful as they are, queues aren't always hello right solution.</span></span> <span data-ttu-id="1b733-176">Ibland är det bättre att använda Service Bus-ämnen.</span><span class="sxs-lookup"><span data-stu-id="1b733-176">Sometimes, Service Bus topics are better.</span></span> <span data-ttu-id="1b733-177">Bild 3 ger dig en uppfattning om varför det är så.</span><span class="sxs-lookup"><span data-stu-id="1b733-177">Figure 3 illustrates this idea.</span></span>

![][3]

<span data-ttu-id="1b733-178">**Bild 3: Baserat på hello filter som en prenumerationsapp använder, det kan ta emot några eller alla hello-meddelanden skickas tooa Service Bus-ämne.**</span><span class="sxs-lookup"><span data-stu-id="1b733-178">**Figure 3: Based on hello filter a subscribing application specifies, it can receive some or all hello messages sent tooa Service Bus topic.**</span></span>

<span data-ttu-id="1b733-179">En *avsnittet* liknar på många sätt tooa kön.</span><span class="sxs-lookup"><span data-stu-id="1b733-179">A *topic* is similar in many ways tooa queue.</span></span> <span data-ttu-id="1b733-180">Avsändare skickar meddelanden tooa-avsnittet i hello samma sätt som de skickar meddelanden tooa kön och dessa meddelanden utseende hello samma precis som med köer.</span><span class="sxs-lookup"><span data-stu-id="1b733-180">Senders submit messages tooa topic in hello same way that they submit messages tooa queue, and those messages look hello same as with queues.</span></span> <span data-ttu-id="1b733-181">hello skillnaden är att ämnen gör att varje mottagande programmet toocreate sin egen *prenumeration* genom att definiera en *filter*.</span><span class="sxs-lookup"><span data-stu-id="1b733-181">hello difference is that topics enable each receiving application toocreate its own *subscription* by defining a *filter*.</span></span> <span data-ttu-id="1b733-182">En prenumerant ser bara hello-meddelanden som matchar filtret.</span><span class="sxs-lookup"><span data-stu-id="1b733-182">A subscriber then sees only hello messages that match that filter.</span></span> <span data-ttu-id="1b733-183">Bild 3 visar till exempel en avsändare och ett ämne med tre prenumeranter, var och en med sitt eget filter:</span><span class="sxs-lookup"><span data-stu-id="1b733-183">For example, Figure 3 shows a sender and a topic with three subscribers, each with its own filter:</span></span>

* <span data-ttu-id="1b733-184">Prenumerant 1 får endast meddelanden som innehåller hello egenskapen *säljare = ”Ava”*.</span><span class="sxs-lookup"><span data-stu-id="1b733-184">Subscriber 1 receives only messages that contain hello property *Seller="Ava"*.</span></span>
* <span data-ttu-id="1b733-185">Prenumerant 2 tar emot meddelanden som innehåller hello egenskapen *säljare = ”Ruth”* och/eller innehåller ett *belopp* egenskap vars värde är större än 100 000.</span><span class="sxs-lookup"><span data-stu-id="1b733-185">Subscriber 2 receives messages that contain hello property *Seller="Ruby"* and/or contain an *Amount* property whose value is greater than 100,000.</span></span> <span data-ttu-id="1b733-186">Ruth kanske är hello försäljningschef så hon vill toosee både sina egna försäljningar och alla stora försäljningar, oavsett vem som gör dem..</span><span class="sxs-lookup"><span data-stu-id="1b733-186">Perhaps Ruby is hello sales manager, so she wants toosee both her own sales and all large sales regardless of who makes them.</span></span>
* <span data-ttu-id="1b733-187">Prenumerant 3 har ställt in sitt filter för*SANT*, vilket innebär att den tar emot alla meddelanden.</span><span class="sxs-lookup"><span data-stu-id="1b733-187">Subscriber 3 has set its filter too*True*, which means that it receives all messages.</span></span> <span data-ttu-id="1b733-188">Till exempel det här programmet kan ansvara för att bibehålla ett revisionsspår och därför måste toosee alla hälsningsmeddelande.</span><span class="sxs-lookup"><span data-stu-id="1b733-188">For example, this application might be responsible for maintaining an audit trail and therefore it needs toosee all hello messages.</span></span>

<span data-ttu-id="1b733-189">Som med köer, prenumeranter tooa avsnittet kan läsa meddelanden med antingen [ReceiveAndDelete och PeekLock](/dotnet/api/microsoft.servicebus.messaging.receivemode).</span><span class="sxs-lookup"><span data-stu-id="1b733-189">As with queues, subscribers tooa topic can read messages using either [ReceiveAndDelete or PeekLock](/dotnet/api/microsoft.servicebus.messaging.receivemode).</span></span> <span data-ttu-id="1b733-190">Till skillnad från köer, men skickat ett enda meddelande tooa avsnittet kan tas emot av flera prenumerationer.</span><span class="sxs-lookup"><span data-stu-id="1b733-190">Unlike queues, however, a single message sent tooa topic can be received by multiple subscriptions.</span></span> <span data-ttu-id="1b733-191">Den här metoden anropas ofta *publicera och prenumerera* (eller *pub/sub*), är användbart när flera appar är intresserade hello samma meddelanden.</span><span class="sxs-lookup"><span data-stu-id="1b733-191">This approach, commonly called *publish and subscribe* (or *pub/sub*), is useful whenever multiple applications are interested in hello same messages.</span></span> <span data-ttu-id="1b733-192">Genom att definiera hello rätt filter kan prenumerant varje bara hello del av hello meddelandeströmmen måste toosee.</span><span class="sxs-lookup"><span data-stu-id="1b733-192">By defining hello right filter, each subscriber can tap into just hello part of hello message stream that it needs toosee.</span></span>

## <a name="relays"></a><span data-ttu-id="1b733-193">Reläer</span><span class="sxs-lookup"><span data-stu-id="1b733-193">Relays</span></span>

<span data-ttu-id="1b733-194">Både köer och ämnen ger dig enkelriktad, asynkron kommunikation via en koordinator.</span><span class="sxs-lookup"><span data-stu-id="1b733-194">Both queues and topics provide one-way asynchronous communication through a broker.</span></span> <span data-ttu-id="1b733-195">Trafiken flödar endast i en riktning och det finns ingen direkt anslutning mellan avsändarna och mottagarna.</span><span class="sxs-lookup"><span data-stu-id="1b733-195">Traffic flows in just one direction, and there's no direct connection between senders and receivers.</span></span> <span data-ttu-id="1b733-196">Men vad händer om du inte vill använda denna anslutning?</span><span class="sxs-lookup"><span data-stu-id="1b733-196">But what if you don't want this connection?</span></span> <span data-ttu-id="1b733-197">Anta att dina program behöver tooboth skicka och ta emot meddelanden, eller kanske du vill ha en direktlänk mellan dem och du behöver inte en broker toostore meddelanden.</span><span class="sxs-lookup"><span data-stu-id="1b733-197">Suppose your applications need tooboth send and receive messages, or perhaps you want a direct link between them and you don't need a broker toostore messages.</span></span> <span data-ttu-id="1b733-198">tooaddress scenarier som detta, Service Bus innehåller *vidarebefordrar*, enligt figur 4 visar.</span><span class="sxs-lookup"><span data-stu-id="1b733-198">tooaddress scenarios such as this, Service Bus provides *relays*, as Figure 4 shows.</span></span>

![][4]

<span data-ttu-id="1b733-199">**Bild 4: Service Bus Relay erbjuder synkron, dubbelriktad kommunikation mellan program.**</span><span class="sxs-lookup"><span data-stu-id="1b733-199">**Figure 4: Service Bus relay provides synchronous, two-way communication between applications.**</span></span>

<span data-ttu-id="1b733-200">Hej tooask naturliga frågan när det gäller reläer är detta: Varför ska jag använda det?</span><span class="sxs-lookup"><span data-stu-id="1b733-200">hello obvious question tooask about relays is this: why would I use one?</span></span> <span data-ttu-id="1b733-201">Även om jag inte behöver köer, varför göra program kommunicerar via en molnbaserad tjänst i stället för bara interagera direkt? hello svaret är att prata direkt kan vara svårare än du tror.</span><span class="sxs-lookup"><span data-stu-id="1b733-201">Even if I don't need queues, why make applications communicate via a cloud service rather than just interact directly? hello answer is that talking directly can be harder than you might think.</span></span>

<span data-ttu-id="1b733-202">Anta att du vill tooconnect två lokala program körs båda på företagets eget datacenter.</span><span class="sxs-lookup"><span data-stu-id="1b733-202">Suppose you want tooconnect two on-premises applications, both running inside corporate datacenters.</span></span> <span data-ttu-id="1b733-203">Var och en av dessa appar ligger bakom en brandvägg och varje datacenter använder antagligen nätadressöversättning (NAT).</span><span class="sxs-lookup"><span data-stu-id="1b733-203">Each of these applications sits behind a firewall, and each datacenter probably uses network address translation (NAT).</span></span> <span data-ttu-id="1b733-204">hello brandväggen blockerar inkommande data på alla utom ett fåtal portar och NAT innebär att hello datorn varje program som körs på inte har en fast IP-adress som du kan nå direkt från utanför hello datacenter.</span><span class="sxs-lookup"><span data-stu-id="1b733-204">hello firewall blocks incoming data on all but a few ports, and NAT implies that hello machine each application is running on doesn't have a fixed IP address that you can reach directly from outside hello datacenter.</span></span> <span data-ttu-id="1b733-205">Utan extra hjälp, ansluter programmen via hello offentliga internet är det problematiskt.</span><span class="sxs-lookup"><span data-stu-id="1b733-205">Without some extra help, connecting these applications over hello public internet is problematic.</span></span>

<span data-ttu-id="1b733-206">Det kan hjälpa att använda ett Service Bus-relä.</span><span class="sxs-lookup"><span data-stu-id="1b733-206">A Service Bus relay can help.</span></span> <span data-ttu-id="1b733-207">toocommunicate båda riktningarna via ett relä, varje program upprättar en utgående TCP-anslutning med Service Bus och håller den öppen.</span><span class="sxs-lookup"><span data-stu-id="1b733-207">toocommunicate bi-directionally through a relay, each application establishes an outbound TCP connection with Service Bus, then keeps it open.</span></span> <span data-ttu-id="1b733-208">All kommunikation mellan två program för hello överförs via dessa anslutningar.</span><span class="sxs-lookup"><span data-stu-id="1b733-208">All communication between hello two applications travels over these connections.</span></span> <span data-ttu-id="1b733-209">Eftersom varje anslutning har upprättats från i hello datacenter hello brandväggen tillåter inkommande trafik tooeach program utan att öppna nya portar.</span><span class="sxs-lookup"><span data-stu-id="1b733-209">Because each connection was established from inside hello datacenter, hello firewall allows incoming traffic tooeach application without opening new ports.</span></span> <span data-ttu-id="1b733-210">Den här metoden kringgår du också hello NAT-problem, eftersom varje App har en konsistent slutpunkt i hello molnet under hela hello-meddelande.</span><span class="sxs-lookup"><span data-stu-id="1b733-210">This approach also gets around hello NAT problem, because each application has a consistent endpoint in hello cloud throughout hello communication.</span></span> <span data-ttu-id="1b733-211">Genom att utbyta data via hello relä undvika hello program hello problem som annars skulle ha gjort kommunikation svårt.</span><span class="sxs-lookup"><span data-stu-id="1b733-211">By exchanging data through hello relay, hello applications can avoid hello problems that would otherwise make communication difficult.</span></span> 

<span data-ttu-id="1b733-212">toouse Service Bus reläer, program som förlitar sig på hello Windows Communication Foundation (WCF).</span><span class="sxs-lookup"><span data-stu-id="1b733-212">toouse Service Bus relays, applications rely on hello Windows Communication Foundation (WCF).</span></span> <span data-ttu-id="1b733-213">Service Bus innehåller WCF-bindningar som gör det enkelt för Windows-program toointeract via reläer.</span><span class="sxs-lookup"><span data-stu-id="1b733-213">Service Bus provides WCF bindings that make it straightforward for Windows applications toointeract via relays.</span></span> <span data-ttu-id="1b733-214">Program som redan använder WCF kan vanligtvis ange något av dessa bindningar och sedan kommunicera tooeach andra via ett relä.</span><span class="sxs-lookup"><span data-stu-id="1b733-214">Applications that already use WCF can typically specify one of these bindings, then talk tooeach other through a relay.</span></span> <span data-ttu-id="1b733-215">Men till skillnad från köer och ämnen kräver användningen av reläer från andra program än Windows-program en hel del programmeringsarbete, även om det går att genomföra. Det medföljer inga standardbibliotek.</span><span class="sxs-lookup"><span data-stu-id="1b733-215">Unlike queues and topics, however, using relays from non-Windows applications, while possible, requires some programming effort; no standard libraries are provided.</span></span>

<span data-ttu-id="1b733-216">Till skillnad från köer och ämnen skapar apparna inga reläer rent uttryckligen.</span><span class="sxs-lookup"><span data-stu-id="1b733-216">Unlike queues and topics, applications don't explicitly create relays.</span></span> <span data-ttu-id="1b733-217">När ett program som du vill tooreceive meddelanden upprättar en TCP-anslutning med Service Bus, skapas istället ett relä automatiskt.</span><span class="sxs-lookup"><span data-stu-id="1b733-217">Instead, when an application that wishes tooreceive messages establishes a TCP connection with Service Bus, a relay is created automatically.</span></span> <span data-ttu-id="1b733-218">Hello relay tas bort när hello anslutningen bryts.</span><span class="sxs-lookup"><span data-stu-id="1b733-218">When hello connection is dropped, hello relay is deleted.</span></span> <span data-ttu-id="1b733-219">tooenable ett program toofind hello relay skapas av en viss lyssnare, Service Bus innehåller ett register som gör att program toolocate en specifik vidarebefordran efter namn.</span><span class="sxs-lookup"><span data-stu-id="1b733-219">tooenable an application toofind hello relay created by a specific listener, Service Bus provides a registry that enables applications toolocate a specific relay by name.</span></span>

<span data-ttu-id="1b733-220">Reläer är hello rätta lösningen när du behöver upprätta direkt kommunikation mellan program.</span><span class="sxs-lookup"><span data-stu-id="1b733-220">Relays are hello right solution when you need direct communication between applications.</span></span> <span data-ttu-id="1b733-221">Föreställ dig till exempel ett bokningssystem från ett flygbolag som körs i ett lokalt datacenter. Detta måste kunna nås från incheckningskiosker, mobila enheter och andra datorer.</span><span class="sxs-lookup"><span data-stu-id="1b733-221">For example, consider an airline reservation system running in an on-premises datacenter that must be accessed from check-in kiosks, mobile devices, and other computers.</span></span> <span data-ttu-id="1b733-222">Program som körs på dessa system kan förlita sig på Service Bus relays i hello molnet toocommunicate, oavsett var de kan köras.</span><span class="sxs-lookup"><span data-stu-id="1b733-222">Applications running on all these systems could rely on Service Bus relays in hello cloud toocommunicate, wherever they might be running.</span></span>

## <a name="summary"></a><span data-ttu-id="1b733-223">Sammanfattning</span><span class="sxs-lookup"><span data-stu-id="1b733-223">Summary</span></span>

<span data-ttu-id="1b733-224">Ansluta program har alltid varit en del för att skapa kompletta lösningar och hello olika scenarier som kräver att program och tjänster toocommunicate med varandra anges tooincrease som flera program och enheter är anslutna toohello internet.</span><span class="sxs-lookup"><span data-stu-id="1b733-224">Connecting applications has always been part of building complete solutions, and hello range of scenarios that require applications and services toocommunicate with each other is set tooincrease as more applications and devices are connected toohello internet.</span></span> <span data-ttu-id="1b733-225">Genom att tillhandahålla molnbaserad teknik för att uppnå kommunikation via köer, ämnen och reläer, Service Bus syftar toomake denna absolut nödvändiga funktion enklare tooimplement och mer tillgänglig.</span><span class="sxs-lookup"><span data-stu-id="1b733-225">By providing cloud-based technologies for achieving communication through queues, topics, and relays, Service Bus aims toomake this essential function easier tooimplement and more broadly available.</span></span>

## <a name="next-steps"></a><span data-ttu-id="1b733-226">Nästa steg</span><span class="sxs-lookup"><span data-stu-id="1b733-226">Next steps</span></span>

<span data-ttu-id="1b733-227">Nu när du har lärt dig grunderna hello i Azure Service Bus, följa dessa länkar toolearn mer.</span><span class="sxs-lookup"><span data-stu-id="1b733-227">Now that you've learned hello fundamentals of Azure Service Bus, follow these links toolearn more.</span></span>

* <span data-ttu-id="1b733-228">Hur toouse [Service Bus-köer](service-bus-dotnet-get-started-with-queues.md)</span><span class="sxs-lookup"><span data-stu-id="1b733-228">How toouse [Service Bus queues](service-bus-dotnet-get-started-with-queues.md)</span></span>
* <span data-ttu-id="1b733-229">Hur toouse [Service Bus-ämnen](service-bus-dotnet-how-to-use-topics-subscriptions.md)</span><span class="sxs-lookup"><span data-stu-id="1b733-229">How toouse [Service Bus topics](service-bus-dotnet-how-to-use-topics-subscriptions.md)</span></span>
* <span data-ttu-id="1b733-230">Hur toouse [Service Bus relay](../service-bus-relay/service-bus-dotnet-how-to-use-relay.md)</span><span class="sxs-lookup"><span data-stu-id="1b733-230">How toouse [Service Bus relay](../service-bus-relay/service-bus-dotnet-how-to-use-relay.md)</span></span>
* [<span data-ttu-id="1b733-231">Service Bus-exempel</span><span class="sxs-lookup"><span data-stu-id="1b733-231">Service Bus samples</span></span>](service-bus-samples.md)

[1]: ./media/service-bus-fundamentals-hybrid-solutions/SvcBus_01_architecture.png
[2]: ./media/service-bus-fundamentals-hybrid-solutions/SvcBus_02_queues.png
[3]: ./media/service-bus-fundamentals-hybrid-solutions/SvcBus_03_topicsandsubscriptions.png
[4]: ./media/service-bus-fundamentals-hybrid-solutions/SvcBus_04_relay.png

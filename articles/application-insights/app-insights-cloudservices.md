---
title: "Application Insights för Azure Cloud Services | Microsoft Docs"
description: "Övervaka webb- och arbetsroller effektivt med Application Insights"
services: application-insights
documentationcenter: 
keywords: WAD2AI, Azure Diagnostics
author: CFreemanwa
manager: carmonm
editor: alancameronwills
ms.assetid: 5c7a5b34-329e-42b7-9330-9dcbb9ff1f88
ms.service: application-insights
ms.devlang: na
ms.tgt_pltfrm: ibiza
ms.topic: get-started-article
ms.workload: tbd
ms.date: 05/05/2017
ms.author: bwren
ms.openlocfilehash: c12b225aa351d0c272243469550791a6840091e0
ms.sourcegitcommit: 50e23e8d3b1148ae2d36dad3167936b4e52c8a23
ms.translationtype: MT
ms.contentlocale: sv-SE
ms.lasthandoff: 08/18/2017
---
# <a name="application-insights-for-azure-cloud-services"></a><span data-ttu-id="dcb2b-104">Application Insights för Azure Cloud Services</span><span class="sxs-lookup"><span data-stu-id="dcb2b-104">Application Insights for Azure Cloud Services</span></span>
<span data-ttu-id="dcb2b-105">Du kan övervaka [Microsoft Azure Cloud-tjänstapparnas](https://azure.microsoft.com/services/cloud-services/) tillgänglighet, prestanda, fel och användning med [Application Insights][start] genom att kombinera data från Application Insights SDK:er med data från [Azure Diagnotics](https://docs.microsoft.com/en-us/azure/monitoring-and-diagnostics/azure-diagnostics) från Cloud Services.</span><span class="sxs-lookup"><span data-stu-id="dcb2b-105">[Microsoft Azure Cloud service apps](https://azure.microsoft.com/services/cloud-services/) can be monitored by [Application Insights][start] for availability, performance, failures, and usage by combining data from Application Insights' SDKs with [Azure Diagnotics](https://docs.microsoft.com/en-us/azure/monitoring-and-diagnostics/azure-diagnostics) data from your Cloud Services.</span></span> <span data-ttu-id="dcb2b-106">Med den feedback du får om appens prestanda och effektivitet kan du fatta välgrundade beslut om designen i varje utvecklingslivscykel.</span><span class="sxs-lookup"><span data-stu-id="dcb2b-106">With the feedback you get about the performance and effectiveness of your app in the wild, you can make informed choices about the direction of the design in each development lifecycle.</span></span>

![Exempel](./media/app-insights-cloudservices/sample.png)

## <a name="before-you-start"></a><span data-ttu-id="dcb2b-108">Innan du börjar</span><span class="sxs-lookup"><span data-stu-id="dcb2b-108">Before you start</span></span>
<span data-ttu-id="dcb2b-109">Du behöver:</span><span class="sxs-lookup"><span data-stu-id="dcb2b-109">You'll need:</span></span>

* <span data-ttu-id="dcb2b-110">En prenumeration med [Microsoft Azure](http://azure.com).</span><span class="sxs-lookup"><span data-stu-id="dcb2b-110">A subscription with [Microsoft Azure](http://azure.com).</span></span> <span data-ttu-id="dcb2b-111">Logga in med ett Microsoft-konto som du kanske har för Windows, XBox Live eller andra Microsoft-molntjänster.</span><span class="sxs-lookup"><span data-stu-id="dcb2b-111">Sign in with a Microsoft account, which you might have for Windows, XBox Live, or other Microsoft cloud services.</span></span> 
* <span data-ttu-id="dcb2b-112">Microsoft Azure Tools 2.9 eller senare</span><span class="sxs-lookup"><span data-stu-id="dcb2b-112">Microsoft Azure tools 2.9 or later</span></span>
* <span data-ttu-id="dcb2b-113">Developer Analytics Tools 7.10 eller senare</span><span class="sxs-lookup"><span data-stu-id="dcb2b-113">Developer Analytics Tools 7.10 or later</span></span>

## <a name="quick-start"></a><span data-ttu-id="dcb2b-114">Snabbstart</span><span class="sxs-lookup"><span data-stu-id="dcb2b-114">Quick start</span></span>
<span data-ttu-id="dcb2b-115">Det snabbaste och enklaste sättet att övervaka din molntjänst med Application Insights är att välja det här alternativet när du publicerar din tjänst till Azure.</span><span class="sxs-lookup"><span data-stu-id="dcb2b-115">The quickest and easiest way to monitor your cloud service with Application Insights is to choose that option when you publish your service to Azure.</span></span>

![Exempel](./media/app-insights-cloudservices/azure-cloud-application-insights.png)

<span data-ttu-id="dcb2b-117">Det här alternativet instrumenterar appen vid körtillfället, och du har all telemetri som du behöver för att övervaka förfrågningar, undantag och beroenden i din webbroll, samt prestandaräknare från dina arbetsroller.</span><span class="sxs-lookup"><span data-stu-id="dcb2b-117">This option instruments your app at run time, giving you all the telemetry you need to monitor requests, exceptions, and dependencies in your web role, as well as performance counters from your worker roles.</span></span> <span data-ttu-id="dcb2b-118">Alla diagnostikspårningar som genereras av din app skickas också till Application Insights.</span><span class="sxs-lookup"><span data-stu-id="dcb2b-118">Any diagnostic traces generated by your app are also sent to Application Insights.</span></span>

<span data-ttu-id="dcb2b-119">Om det är allt du behöver så är du klar!</span><span class="sxs-lookup"><span data-stu-id="dcb2b-119">If that's all you need, you're done!</span></span> <span data-ttu-id="dcb2b-120">Nästa steg är [att visa mätvärden från appen](app-insights-metrics-explorer.md), [att köra frågor mot dina data med Analytics](app-insights-analytics.md) och eventuellt att konfigurera en [instrumentpanel](app-insights-dashboards.md).</span><span class="sxs-lookup"><span data-stu-id="dcb2b-120">Next steps are [viewing metrics from your app](app-insights-metrics-explorer.md), [querying your data with Analytics](app-insights-analytics.md), and maybe setting up a [dashboard](app-insights-dashboards.md).</span></span> <span data-ttu-id="dcb2b-121">Du kanske vill konfigurera [tillgänglighetstester](app-insights-monitor-web-app-availability.md) och [lägga till kod till dina webbsidor](app-insights-javascript.md) för att övervaka prestanda i webbläsaren.</span><span class="sxs-lookup"><span data-stu-id="dcb2b-121">You might want to set up [availability tests](app-insights-monitor-web-app-availability.md) and [add code to your web pages](app-insights-javascript.md) to monitor performance in the browser.</span></span>

<span data-ttu-id="dcb2b-122">Men du har fler alternativ:</span><span class="sxs-lookup"><span data-stu-id="dcb2b-122">But you can also get more options:</span></span>

* <span data-ttu-id="dcb2b-123">Skicka data från olika komponenter och skapa konfigurationer för att avgränsa resurser.</span><span class="sxs-lookup"><span data-stu-id="dcb2b-123">Send data from different components and build configurations to separate resources.</span></span>
* <span data-ttu-id="dcb2b-124">Lägg till anpassad telemetri från din app.</span><span class="sxs-lookup"><span data-stu-id="dcb2b-124">Add custom telemetry from your app.</span></span>

<span data-ttu-id="dcb2b-125">Läs vidare om du är intresserad av dessa alternativ.</span><span class="sxs-lookup"><span data-stu-id="dcb2b-125">If those options are of interest to you, read on.</span></span>

## <a name="sample-application-instrumented-with-application-insights"></a><span data-ttu-id="dcb2b-126">Exempelprogram som instrumenteras med Application Insights</span><span class="sxs-lookup"><span data-stu-id="dcb2b-126">Sample Application instrumented with Application Insights</span></span>
<span data-ttu-id="dcb2b-127">Ta en titt på det här [exempelprogrammet](https://github.com/Microsoft/ApplicationInsights-Home/tree/master/Samples/AzureEmailService) där Application Insights läggs till i en molntjänst med två arbetsroller som finns i Azure.</span><span class="sxs-lookup"><span data-stu-id="dcb2b-127">Take a look at this [sample application](https://github.com/Microsoft/ApplicationInsights-Home/tree/master/Samples/AzureEmailService) in which Application Insights is added to a cloud service with two worker roles hosted in Azure.</span></span> 

<span data-ttu-id="dcb2b-128">Nedan följer en beskrivning av hur du anpassar ditt eget molntjänstprojekt på samma sätt.</span><span class="sxs-lookup"><span data-stu-id="dcb2b-128">What follows tells you how to adapt your own cloud service project in the same way.</span></span>

## <a name="plan-resources-and-resource-groups"></a><span data-ttu-id="dcb2b-129">Planera resurser och resursgrupper</span><span class="sxs-lookup"><span data-stu-id="dcb2b-129">Plan resources and resource groups</span></span>
<span data-ttu-id="dcb2b-130">Telemetrin från din app lagras, analyseras och visas i en Azure-resurs av typen Application Insights.</span><span class="sxs-lookup"><span data-stu-id="dcb2b-130">The telemetry from your app is stored, analyzed and displayed in an Azure resource of type Application Insights.</span></span> 

<span data-ttu-id="dcb2b-131">Varje resurs tillhör en resursgrupp.</span><span class="sxs-lookup"><span data-stu-id="dcb2b-131">Each resource belongs to a resource group.</span></span> <span data-ttu-id="dcb2b-132">Resursgrupper används för att hantera kostnader, för att bevilja åtkomst till gruppmedlemmar och för att distribuera uppdateringar i en enda samordnad transaktion.</span><span class="sxs-lookup"><span data-stu-id="dcb2b-132">Resource groups are used for managing costs, for granting access to team members, and to deploy updates in a single coordinated transaction.</span></span> <span data-ttu-id="dcb2b-133">Du kan till exempel [skriva ett skript för att distribuera](../azure-resource-manager/resource-group-template-deploy.md) en Azure-molntjänst och dess Application Insights-övervakningsresurser i en enda åtgärd.</span><span class="sxs-lookup"><span data-stu-id="dcb2b-133">For example, you could [write a script to deploy](../azure-resource-manager/resource-group-template-deploy.md) an Azure Cloud Service and its Application Insights monitoring resources all in one operation.</span></span>

### <a name="resources-for-components"></a><span data-ttu-id="dcb2b-134">Resurser för komponenter</span><span class="sxs-lookup"><span data-stu-id="dcb2b-134">Resources for components</span></span>
<span data-ttu-id="dcb2b-135">Det rekommenderade schemat är att skapa en separat resurs för varje komponent i ditt program, dvs. varje webbroll och arbetsroll.</span><span class="sxs-lookup"><span data-stu-id="dcb2b-135">The recommended scheme is to create a separate resource for each component of your application - that is, each web role and worker role.</span></span> <span data-ttu-id="dcb2b-136">Du kan analysera varje komponent separat, men du kan också skapa en [instrumentpanel](app-insights-dashboards.md) som sammanför de viktigaste diagrammen från alla komponenter, så att du kan jämföra och övervaka dem tillsammans.</span><span class="sxs-lookup"><span data-stu-id="dcb2b-136">You can analyze each component separately, but can create a [dashboard](app-insights-dashboards.md) that brings together the key charts from all the components, so that you can compare and monitor them together.</span></span> 

<span data-ttu-id="dcb2b-137">Ett alternativt schema är att skicka telemetrin från mer än en roll till samma resurs, men [lägga till en dimensionsegenskap till varje telemetriobjekt](app-insights-api-filtering-sampling.md#add-properties-itelemetryinitializer) som identifierar dess källroll.</span><span class="sxs-lookup"><span data-stu-id="dcb2b-137">An alternative scheme is to send the telemetry from more than one role to the same resource, but [add a dimension property to each telemetry item](app-insights-api-filtering-sampling.md#add-properties-itelemetryinitializer) that identifies its source role.</span></span> <span data-ttu-id="dcb2b-138">I det här schemat visar måttdiagram som till exempel undantag normalt en sammanställning av antalen från olika roller, men du kan segmentera diagrammet efter rollidentifieraren vid behov.</span><span class="sxs-lookup"><span data-stu-id="dcb2b-138">In this scheme, metric charts such as exceptions normally show an aggregation of the counts from the different roles, but you can segment the chart by the role identifier when required.</span></span> <span data-ttu-id="dcb2b-139">Sökningar kan också filtreras efter samma dimension.</span><span class="sxs-lookup"><span data-stu-id="dcb2b-139">Searches can also be filtered by the same dimension.</span></span> <span data-ttu-id="dcb2b-140">Detta alternativ gör det lite enklare att visa allt på samma gång, men kan även leda till viss förvirring mellan rollerna.</span><span class="sxs-lookup"><span data-stu-id="dcb2b-140">This alternative makes it a bit easier to view everything at the same time, but could also lead to some confusion between the roles.</span></span>

<span data-ttu-id="dcb2b-141">Webbläsartelemetri ingår vanligtvis i samma resurs som dess webbroll på serversidan.</span><span class="sxs-lookup"><span data-stu-id="dcb2b-141">Browser telemetry is usually included in the same resource as its server-side web role.</span></span>

<span data-ttu-id="dcb2b-142">Placera Application Insights-resurserna för de olika komponenterna i en enda resursgrupp.</span><span class="sxs-lookup"><span data-stu-id="dcb2b-142">Put the Application Insights resources for the different components in one resource group.</span></span> <span data-ttu-id="dcb2b-143">På så sätt blir det enkelt att hantera dem tillsammans.</span><span class="sxs-lookup"><span data-stu-id="dcb2b-143">This makes it easy to manage them together.</span></span> 

### <a name="separating-development-test-and-production"></a><span data-ttu-id="dcb2b-144">Avgränsa utveckling, testning och produktion</span><span class="sxs-lookup"><span data-stu-id="dcb2b-144">Separating development, test, and production</span></span>
<span data-ttu-id="dcb2b-145">Om du utvecklar anpassade händelser för din nästa funktion medan den tidigare versionen är aktiv, skickar du utvecklingstelemetrin till en separat Application Insights-resurs.</span><span class="sxs-lookup"><span data-stu-id="dcb2b-145">If you are developing custom events for your next feature while the previous version is live, you want to send the development telemetry to a separate Application Insights resource.</span></span> <span data-ttu-id="dcb2b-146">Annars blir det svårt att hitta testtelemetrin bland all trafik från live-webbplatsen.</span><span class="sxs-lookup"><span data-stu-id="dcb2b-146">Otherwise it will be hard to find your test telemetry among all the traffic from the live site.</span></span>

<span data-ttu-id="dcb2b-147">Du kan undvika den här situationen genom att skapa separata resurser för varje versionskonfiguration eller ”stämpel” (utveckling, testning, produktion …) för systemet.</span><span class="sxs-lookup"><span data-stu-id="dcb2b-147">To avoid this situation, create separate resources for each build configuration or 'stamp' (development, test, production, ...) of your system.</span></span> <span data-ttu-id="dcb2b-148">Placera resurserna för varje versionskonfiguration i en separat resursgrupp.</span><span class="sxs-lookup"><span data-stu-id="dcb2b-148">Put the resources for each build configuration in a separate resource group.</span></span> 

<span data-ttu-id="dcb2b-149">Du kan skicka telemetrin till lämpliga resurser genom att konfigurera Application Insights SDK så att det använder olika instrumenteringsnycklar beroende på versionskonfiguration.</span><span class="sxs-lookup"><span data-stu-id="dcb2b-149">To send the telemetry to the appropriate resources, you can set up the Application Insights SDK so that it picks up a different instrumentation key depending on the build configuration.</span></span> 

## <a name="create-an-application-insights-resource-for-each-role"></a><span data-ttu-id="dcb2b-150">Skapa en Application Insights-resurs för varje roll</span><span class="sxs-lookup"><span data-stu-id="dcb2b-150">Create an Application Insights resource for each role</span></span>
<span data-ttu-id="dcb2b-151">Om du har valt att skapa en separat resurs för varje roll – och kanske en separat uppsättning för varje versionskonfiguration – är det enklast att skapa alla på Application Insights-portalen.</span><span class="sxs-lookup"><span data-stu-id="dcb2b-151">If you've decided to create a separate resource for each role - and perhaps a separate set for each build configuration - then it's easiest to create them all in the Application Insights portal.</span></span> <span data-ttu-id="dcb2b-152">Om du ofta skapar resurser kan du [automatisera processen](app-insights-powershell.md).</span><span class="sxs-lookup"><span data-stu-id="dcb2b-152">(If you create resources a lot, you can [automate the process](app-insights-powershell.md).</span></span>

1. <span data-ttu-id="dcb2b-153">Skapa en ny Application Insights-resurs på [Azure Portal][portal].</span><span class="sxs-lookup"><span data-stu-id="dcb2b-153">In the [Azure portal][portal], create a new Application Insights resource.</span></span> <span data-ttu-id="dcb2b-154">Välj ASP.NET-app för programtyp.</span><span class="sxs-lookup"><span data-stu-id="dcb2b-154">For application type, choose ASP.NET app.</span></span> 

    ![Klicka på Nytt, Application Insights](./media/app-insights-cloudservices/01-new.png)
2. <span data-ttu-id="dcb2b-156">Observera att varje resurs identifieras av en instrumenteringsnyckel.</span><span class="sxs-lookup"><span data-stu-id="dcb2b-156">Note that each resource is identified by an Instrumentation Key.</span></span> <span data-ttu-id="dcb2b-157">Du kanske behöver den senare om du vill konfigurera eller verifiera konfigurationen för SDK manuellt.</span><span class="sxs-lookup"><span data-stu-id="dcb2b-157">You might need this later if you want to manually configure or verify the configuration of the SDK.</span></span>

    ![Klicka på Egenskaper, markera nyckeln och tryck på CTRL + C.](./media/app-insights-cloudservices/02-props.png) 

## <a name="set-up-azure-diagnostics-for-each-role"></a><span data-ttu-id="dcb2b-159">Konfigurera Azure Diagnostics för varje roll</span><span class="sxs-lookup"><span data-stu-id="dcb2b-159">Set up Azure Diagnostics for each role</span></span>
<span data-ttu-id="dcb2b-160">Ange det här alternativet om du vill övervaka din app med Application Insights.</span><span class="sxs-lookup"><span data-stu-id="dcb2b-160">Set this option to monitor your app with Application Insights.</span></span> <span data-ttu-id="dcb2b-161">För webbroller tillhandahåller det här alternativet prestandaövervakning, aviseringar och diagnostik, samt användningsanalys.</span><span class="sxs-lookup"><span data-stu-id="dcb2b-161">For web roles, this provides performance monitoring, alerts, and diagnostics, as well as usage analysis.</span></span> <span data-ttu-id="dcb2b-162">För andra roller kan du söka efter och övervaka Azure-diagnostik, till exempel omstart, prestandaräknare och anrop till System.Diagnostics.Trace.</span><span class="sxs-lookup"><span data-stu-id="dcb2b-162">For other roles, you can search and monitor Azure diagnostics such as restart, performance counters, and calls to System.Diagnostics.Trace.</span></span> 

1. <span data-ttu-id="dcb2b-163">I Visual Studio Solution Explorer öppnar du egenskaperna för varje roll under &lt;YourCloudService&gt;, Roller.</span><span class="sxs-lookup"><span data-stu-id="dcb2b-163">In Visual Studio Solution Explorer, under &lt;YourCloudService&gt;, Roles, open the properties of each role.</span></span>
2. <span data-ttu-id="dcb2b-164">I **Konfiguration** anger du **Skicka diagnostisk data till Application Insights** och väljer lämplig Application Insights-resurs som du skapade tidigare.</span><span class="sxs-lookup"><span data-stu-id="dcb2b-164">In **Configuration**, set **Send diagnostics data to Application Insights** and select the appropriate Application Insights resource that you created earlier.</span></span>

<span data-ttu-id="dcb2b-165">Om du har valt att använda en separat Application Insights-resurs för varje versionskonfiguration väljer du konfigurationen först.</span><span class="sxs-lookup"><span data-stu-id="dcb2b-165">If you have decided to use a separate Application Insights resource for each build configuration, select the configuration first.</span></span>

![Konfigurera Application Insights i egenskaperna för varje Azure-roll](./media/app-insights-cloudservices/configure-azure-diagnostics.png)

<span data-ttu-id="dcb2b-167">Detta gör att dina Application Insights-instrumenteringsnycklar infogas i filerna med namnet `ServiceConfiguration.*.cscfg`.</span><span class="sxs-lookup"><span data-stu-id="dcb2b-167">This has the effect of inserting your Application Insights instrumentation keys into the files named `ServiceConfiguration.*.cscfg`.</span></span> <span data-ttu-id="dcb2b-168">([Exempelkod](https://github.com/Microsoft/ApplicationInsights-Home/blob/master/Samples/AzureEmailService/AzureEmailService/ServiceConfiguration.Cloud.cscfg)).</span><span class="sxs-lookup"><span data-stu-id="dcb2b-168">([Sample code](https://github.com/Microsoft/ApplicationInsights-Home/blob/master/Samples/AzureEmailService/AzureEmailService/ServiceConfiguration.Cloud.cscfg)).</span></span>

<span data-ttu-id="dcb2b-169">Om du vill ändra nivån för hur mycket diagnostikinformation som skickas till Application Insights kan du göra det [genom att redigera `.cscfg`-filerna direkt](app-insights-azure-diagnostics.md).</span><span class="sxs-lookup"><span data-stu-id="dcb2b-169">If you want to vary the level of diagnostic information sent to Application Insights, you can do so [by editing the `.cscfg` files directly](app-insights-azure-diagnostics.md).</span></span>

## <span data-ttu-id="dcb2b-170"><a name="sdk"></a>Installera SDK i varje projekt</span><span class="sxs-lookup"><span data-stu-id="dcb2b-170"><a name="sdk"></a>Install the SDK in each project</span></span>
<span data-ttu-id="dcb2b-171">Det här alternativet gör det möjligt att lägga till anpassad telemetri till valfri roll för en närmare analys av hur programmet används och fungerar.</span><span class="sxs-lookup"><span data-stu-id="dcb2b-171">This option adds the ability to add custom business telemetry to any role, for a closer analysis of how your application is used and performs.</span></span>

<span data-ttu-id="dcb2b-172">I Visual Studio konfigurerar du Application Insights SDK för varje molnapprojekt.</span><span class="sxs-lookup"><span data-stu-id="dcb2b-172">In Visual Studio, configure the Application Insights SDK for each cloud app project.</span></span>

1. <span data-ttu-id="dcb2b-173">**Webbroller**: Högerklicka på projektet och välj **Konfigurera Application Insights** eller **Lägg till > Application Insights Telemetry**.</span><span class="sxs-lookup"><span data-stu-id="dcb2b-173">**Web roles**: Right-click the project and choose **Configure Application Insights** or **Add > Application Insights telemetry**.</span></span>

2. <span data-ttu-id="dcb2b-174">**Arbetsroller**:</span><span class="sxs-lookup"><span data-stu-id="dcb2b-174">**Worker roles**:</span></span> 
 * <span data-ttu-id="dcb2b-175">Högerklicka på projektet och välj **Hantera Nuget-paket**.</span><span class="sxs-lookup"><span data-stu-id="dcb2b-175">Right-click the project and select **Manage Nuget Packages**.</span></span>
 * <span data-ttu-id="dcb2b-176">Lägg till [Application Insights för Windows Server](https://www.nuget.org/packages/Microsoft.ApplicationInsights.WindowsServer/).</span><span class="sxs-lookup"><span data-stu-id="dcb2b-176">Add [Application Insights for Windows Servers](https://www.nuget.org/packages/Microsoft.ApplicationInsights.WindowsServer/).</span></span>

    ![Sök efter ”Application Insights”](./media/app-insights-cloudservices/04-ai-nuget.png)

3. <span data-ttu-id="dcb2b-178">Konfigurera SDK att skicka data till Application Insights-resursen.</span><span class="sxs-lookup"><span data-stu-id="dcb2b-178">Configure the SDK to send data to the Application Insights resource.</span></span>

    <span data-ttu-id="dcb2b-179">Ange instrumenteringsnyckeln från konfigurationsinställningen i .cscfg-filen i en lämplig startfunktion:</span><span class="sxs-lookup"><span data-stu-id="dcb2b-179">In a suitable startup function, set the instrumentation key from the configuration setting in the .cscfg file:</span></span>
 
    ```C#
   
     TelemetryConfiguration.Active.InstrumentationKey = RoleEnvironment.GetConfigurationSettingValue("APPINSIGHTS_INSTRUMENTATIONKEY");
    ```
   
    <span data-ttu-id="dcb2b-180">Gör detta för varje roll i programmet.</span><span class="sxs-lookup"><span data-stu-id="dcb2b-180">Do this for each role in your application.</span></span> <span data-ttu-id="dcb2b-181">Se exemplen:</span><span class="sxs-lookup"><span data-stu-id="dcb2b-181">See the examples:</span></span>
   
   * [<span data-ttu-id="dcb2b-182">Webbroll</span><span class="sxs-lookup"><span data-stu-id="dcb2b-182">Web role</span></span>](https://github.com/Microsoft/ApplicationInsights-Home/blob/master/Samples/AzureEmailService/MvcWebRole/Global.asax.cs#L27)
   * [<span data-ttu-id="dcb2b-183">Arbetsroll</span><span class="sxs-lookup"><span data-stu-id="dcb2b-183">Worker role</span></span>](https://github.com/Microsoft/ApplicationInsights-Home/blob/master/Samples/AzureEmailService/WorkerRoleA/WorkerRoleA.cs#L232)
   * [<span data-ttu-id="dcb2b-184">För webbsidor</span><span class="sxs-lookup"><span data-stu-id="dcb2b-184">For web pages</span></span>](https://github.com/Microsoft/ApplicationInsights-Home/blob/master/Samples/AzureEmailService/MvcWebRole/Views/Shared/_Layout.cshtml#L13) 
4. <span data-ttu-id="dcb2b-185">Ange att filen ApplicationInsights.config alltid ska kopieras till utdatakatalogen.</span><span class="sxs-lookup"><span data-stu-id="dcb2b-185">Set the ApplicationInsights.config file to be copied always to the output directory.</span></span> 
   
    <span data-ttu-id="dcb2b-186">(I .config-filen visas meddelanden som uppmanar dig att placera instrumenteringsnyckeln där.</span><span class="sxs-lookup"><span data-stu-id="dcb2b-186">(In the .config file, you'll see messages asking you to place the instrumentation key there.</span></span> <span data-ttu-id="dcb2b-187">Men för molnprogram är det dock bättre att ställa in den från .cscfg-filen.</span><span class="sxs-lookup"><span data-stu-id="dcb2b-187">However, for cloud applications it's better to set it from the .cscfg file.</span></span> <span data-ttu-id="dcb2b-188">Detta säkerställer att rollen identifieras korrekt på portalen.)</span><span class="sxs-lookup"><span data-stu-id="dcb2b-188">This ensures that the role is correctly identified in the portal.)</span></span>

#### <a name="run-and-publish-the-app"></a><span data-ttu-id="dcb2b-189">Köra och publicera appen</span><span class="sxs-lookup"><span data-stu-id="dcb2b-189">Run and publish the app</span></span>
<span data-ttu-id="dcb2b-190">Kör appen och logga in i Azure.</span><span class="sxs-lookup"><span data-stu-id="dcb2b-190">Run your app, and sign into Azure.</span></span> <span data-ttu-id="dcb2b-191">Öppna de Application Insights-resurser som du skapade så ser du enskilda datapunkter som visas i [Sök](app-insights-diagnostic-search.md), och aggregerade data i [Metric Explorer](app-insights-metrics-explorer.md).</span><span class="sxs-lookup"><span data-stu-id="dcb2b-191">Open the Application Insights resources you created, and you'll see individual data points appearing in [Search](app-insights-diagnostic-search.md), and aggregated data in [Metric Explorer](app-insights-metrics-explorer.md).</span></span> 

<span data-ttu-id="dcb2b-192">Lägg till mer telemetri – se avsnitten nedan – och publicera sedan appen för att få live-diagnostik och feedback om användningen.</span><span class="sxs-lookup"><span data-stu-id="dcb2b-192">Add more telemetry - see the sections below - and then publish your app to get live diagnostic and usage feedback.</span></span> 

#### <a name="no-data"></a><span data-ttu-id="dcb2b-193">Ser du inga data?</span><span class="sxs-lookup"><span data-stu-id="dcb2b-193">No data?</span></span>
* <span data-ttu-id="dcb2b-194">Öppna panelen [Sök][diagnostic] om du vill visa enskilda händelser.</span><span class="sxs-lookup"><span data-stu-id="dcb2b-194">Open the [Search][diagnostic] tile, to see individual events.</span></span>
* <span data-ttu-id="dcb2b-195">Använd programmet och öppna olika sidor så att det genererar telemetri.</span><span class="sxs-lookup"><span data-stu-id="dcb2b-195">Use the application, opening different pages so that it generates some telemetry.</span></span>
* <span data-ttu-id="dcb2b-196">Vänta några sekunder och klicka på Uppdatera.</span><span class="sxs-lookup"><span data-stu-id="dcb2b-196">Wait a few seconds and click Refresh.</span></span>
* <span data-ttu-id="dcb2b-197">Mer information finns i [Felsökning][qna].</span><span class="sxs-lookup"><span data-stu-id="dcb2b-197">See [Troubleshooting][qna].</span></span>

## <a name="view-azure-diagnostic-events"></a><span data-ttu-id="dcb2b-198">Visa Azure Diagnostics-händelser</span><span class="sxs-lookup"><span data-stu-id="dcb2b-198">View Azure Diagnostic events</span></span>
<span data-ttu-id="dcb2b-199">Här hittar du informationen om [Azure Diagnostics](https://docs.microsoft.com/en-us/azure/monitoring-and-diagnostics/azure-diagnostics) i Application Insights:</span><span class="sxs-lookup"><span data-stu-id="dcb2b-199">Where to find the [Azure Diagnostics](https://docs.microsoft.com/en-us/azure/monitoring-and-diagnostics/azure-diagnostics) information in Application Insights:</span></span>

* <span data-ttu-id="dcb2b-200">Prestandaräknare visas som anpassade mått.</span><span class="sxs-lookup"><span data-stu-id="dcb2b-200">Performance counters are displayed as custom metrics.</span></span> 
* <span data-ttu-id="dcb2b-201">Windows-händelseloggar visas som spårningar och anpassade händelser.</span><span class="sxs-lookup"><span data-stu-id="dcb2b-201">Windows event logs are shown as traces and custom events.</span></span>
* <span data-ttu-id="dcb2b-202">Programloggar, ETW-loggar och diagnostikinfrastrukturloggar visas som spårningar.</span><span class="sxs-lookup"><span data-stu-id="dcb2b-202">Application logs, ETW logs, and any diagnostics infrastructure logs appear as traces.</span></span>

<span data-ttu-id="dcb2b-203">Om du vill visa prestandaräknare och antalet händelser öppnar du [Metrics Explorer](app-insights-metrics-explorer.md) och lägger till ett nytt diagram:</span><span class="sxs-lookup"><span data-stu-id="dcb2b-203">To see performance counters and counts of events, open [Metrics Explorer](app-insights-metrics-explorer.md) and add a new chart:</span></span>

![Azure-diagnostikdata](./media/app-insights-cloudservices/23-wad.png)

<span data-ttu-id="dcb2b-205">Använd [Sök](app-insights-diagnostic-search.md) eller en [Analytics-fråga](app-insights-analytics-tour.md) för att söka igenom de olika spårningsloggarna som skickas av Azure Diagnostics.</span><span class="sxs-lookup"><span data-stu-id="dcb2b-205">Use [Search](app-insights-diagnostic-search.md) or an [Analytics query](app-insights-analytics-tour.md) to search across the various trace logs sent by Azure Diagnostics.</span></span> <span data-ttu-id="dcb2b-206">Anta exempelvis att du har ett ohanterat undantag som gjorde att en roll kraschade och återanvändes.</span><span class="sxs-lookup"><span data-stu-id="dcb2b-206">For example, suppose you have an unhandled exception which caused a Role to crash and recycle.</span></span> <span data-ttu-id="dcb2b-207">Den här informationen skulle visas i kanalen Program i Windows-händelseloggen.</span><span class="sxs-lookup"><span data-stu-id="dcb2b-207">That information would show up in the Application channel of Windows Event Log.</span></span> <span data-ttu-id="dcb2b-208">Du kan använda Sök för att granska felet i Windows-händelseloggen och visa den fullständiga stackspårningen för undantaget.</span><span class="sxs-lookup"><span data-stu-id="dcb2b-208">You can use Search to look at the Windows Event Log error and get the full stack trace for the exception.</span></span> <span data-ttu-id="dcb2b-209">Det gör det lättare att hitta grundorsaken till problemet.</span><span class="sxs-lookup"><span data-stu-id="dcb2b-209">That will help you find the root cause of the issue.</span></span>

![Söka i Azure Diagnostics](./media/app-insights-cloudservices/25-wad.png)

## <a name="more-telemetry"></a><span data-ttu-id="dcb2b-211">Mer telemetri</span><span class="sxs-lookup"><span data-stu-id="dcb2b-211">More telemetry</span></span>
<span data-ttu-id="dcb2b-212">I avsnitten nedan ser du hur du kan hämta ytterligare telemetri från olika aspekter av ditt program.</span><span class="sxs-lookup"><span data-stu-id="dcb2b-212">The sections below show how to get additional telemetry from different aspects of your application.</span></span>

## <a name="track-requests-from-worker-roles"></a><span data-ttu-id="dcb2b-213">Spåra begäranden från arbetsroller</span><span class="sxs-lookup"><span data-stu-id="dcb2b-213">Track Requests from Worker roles</span></span>
<span data-ttu-id="dcb2b-214">I webbroller samlar modulen för begäranden automatiskt in data om HTTP-förfrågningar.</span><span class="sxs-lookup"><span data-stu-id="dcb2b-214">In web roles, the requests module automatically collects data about HTTP requests.</span></span> <span data-ttu-id="dcb2b-215">Exempel på hur du kan åsidosätta standardinsamlingsbeteendet finns i [MVCWebRole-exemplet](https://github.com/Microsoft/ApplicationInsights-Home/tree/master/Samples/AzureEmailService/MvcWebRole).</span><span class="sxs-lookup"><span data-stu-id="dcb2b-215">See the [sample MVCWebRole](https://github.com/Microsoft/ApplicationInsights-Home/tree/master/Samples/AzureEmailService/MvcWebRole) for examples of how you can override the default collection behavior.</span></span> 

<span data-ttu-id="dcb2b-216">Du kan samla in prestanda från anrop till arbetsroller genom att spåra dem på samma sätt som HTTP-förfrågningar.</span><span class="sxs-lookup"><span data-stu-id="dcb2b-216">You can capture the performance of calls to worker roles by tracking them in the same way as HTTP requests.</span></span> <span data-ttu-id="dcb2b-217">I Application Insights mäter telemetritypen Begäran en enhet av det namngivna arbetet på serversidan som kan tidsbestämmas och som kan lyckas eller misslyckas separat.</span><span class="sxs-lookup"><span data-stu-id="dcb2b-217">In Application Insights, the Request telemetry type measures a unit of named server-side work that can be timed and can independently succeed or fail.</span></span> <span data-ttu-id="dcb2b-218">HTTP-förfrågningar kan samlas in automatiskt av SDK, men du kan också infoga egen kod för att spåra begäranden till arbetsroller.</span><span class="sxs-lookup"><span data-stu-id="dcb2b-218">While HTTP requests are captured automatically by the SDK, you can insert your own code to track requests to worker roles.</span></span>

<span data-ttu-id="dcb2b-219">Se de två exempelarbetsrollerna som instrumenteras till rapportförfrågningar: [WorkerRoleA](https://github.com/Microsoft/ApplicationInsights-Home/tree/master/Samples/AzureEmailService/WorkerRoleA) och [WorkerRoleB](https://github.com/Microsoft/ApplicationInsights-Home/tree/master/Samples/AzureEmailService/WorkerRoleB)</span><span class="sxs-lookup"><span data-stu-id="dcb2b-219">See the two sample worker roles instrumented to report requests: [WorkerRoleA](https://github.com/Microsoft/ApplicationInsights-Home/tree/master/Samples/AzureEmailService/WorkerRoleA) and [WorkerRoleB](https://github.com/Microsoft/ApplicationInsights-Home/tree/master/Samples/AzureEmailService/WorkerRoleB)</span></span>

## <a name="exceptions"></a><span data-ttu-id="dcb2b-220">Undantag</span><span class="sxs-lookup"><span data-stu-id="dcb2b-220">Exceptions</span></span>
<span data-ttu-id="dcb2b-221">Information om hur du kan samla in ohanterade undantag från olika webbprogramtyper finns i [Monitoring Exceptions in Application Insights](app-insights-asp-net-exceptions.md) (Övervaka undantag i Application Insights).</span><span class="sxs-lookup"><span data-stu-id="dcb2b-221">See [Monitoring Exceptions in Application Insights](app-insights-asp-net-exceptions.md) for information on how you can collect unhandled exceptions from different web application types.</span></span>

<span data-ttu-id="dcb2b-222">Exempelwebbrollen har MVC5- och Web API 2-styrenheter.</span><span class="sxs-lookup"><span data-stu-id="dcb2b-222">The sample web role has MVC5 and Web API 2 controllers.</span></span> <span data-ttu-id="dcb2b-223">De ohanterade undantagen från de två samlas in med följande hanterare:</span><span class="sxs-lookup"><span data-stu-id="dcb2b-223">The unhandled exceptions from the two are captured with the following handlers:</span></span>

* <span data-ttu-id="dcb2b-224">[AiHandleErrorAttribute](https://github.com/Microsoft/ApplicationInsights-Home/blob/master/Samples/AzureEmailService/MvcWebRole/Telemetry/AiHandleErrorAttribute.cs)-konfigurationen finns [här](https://github.com/Microsoft/ApplicationInsights-Home/blob/master/Samples/AzureEmailService/MvcWebRole/App_Start/FilterConfig.cs#L12) för MVC5-styrenheter</span><span class="sxs-lookup"><span data-stu-id="dcb2b-224">[AiHandleErrorAttribute](https://github.com/Microsoft/ApplicationInsights-Home/blob/master/Samples/AzureEmailService/MvcWebRole/Telemetry/AiHandleErrorAttribute.cs) set up [here](https://github.com/Microsoft/ApplicationInsights-Home/blob/master/Samples/AzureEmailService/MvcWebRole/App_Start/FilterConfig.cs#L12) for MVC5 controllers</span></span>
* <span data-ttu-id="dcb2b-225">[AiWebApiExceptionLogger](https://github.com/Microsoft/ApplicationInsights-Home/blob/master/Samples/AzureEmailService/MvcWebRole/Telemetry/AiWebApiExceptionLogger.cs)-konfigurationen finns [här](https://github.com/Microsoft/ApplicationInsights-Home/blob/master/Samples/AzureEmailService/MvcWebRole/App_Start/WebApiConfig.cs#L25) för Web API 2-styrenheter</span><span class="sxs-lookup"><span data-stu-id="dcb2b-225">[AiWebApiExceptionLogger](https://github.com/Microsoft/ApplicationInsights-Home/blob/master/Samples/AzureEmailService/MvcWebRole/Telemetry/AiWebApiExceptionLogger.cs) set up [here](https://github.com/Microsoft/ApplicationInsights-Home/blob/master/Samples/AzureEmailService/MvcWebRole/App_Start/WebApiConfig.cs#L25) for Web API 2 controllers</span></span>

<span data-ttu-id="dcb2b-226">För arbetsroller finns det två sätt att spåra undantag:</span><span class="sxs-lookup"><span data-stu-id="dcb2b-226">For worker roles, there are two ways to track exceptions:</span></span>

* <span data-ttu-id="dcb2b-227">TrackException(ex)</span><span class="sxs-lookup"><span data-stu-id="dcb2b-227">TrackException(ex)</span></span>
* <span data-ttu-id="dcb2b-228">Om du har lagt till NuGet-paketet för Application Insights-spårningslyssnare kan du använda **System.Diagnostics.Trace** för att logga undantag.</span><span class="sxs-lookup"><span data-stu-id="dcb2b-228">If you have added the Application Insights trace listener NuGet package, you can use **System.Diagnostics.Trace** to log exceptions.</span></span> [<span data-ttu-id="dcb2b-229">Kodexempel.</span><span class="sxs-lookup"><span data-stu-id="dcb2b-229">Code example.</span></span>](https://github.com/Microsoft/ApplicationInsights-Home/blob/master/Samples/AzureEmailService/WorkerRoleA/WorkerRoleA.cs#L107)

## <a name="performance-counters"></a><span data-ttu-id="dcb2b-230">Prestandaräknare</span><span class="sxs-lookup"><span data-stu-id="dcb2b-230">Performance Counters</span></span>
<span data-ttu-id="dcb2b-231">Följande räknare samlas in som standard:</span><span class="sxs-lookup"><span data-stu-id="dcb2b-231">The following counters are collected by default:</span></span>

    * <span data-ttu-id="dcb2b-232">\Process(??APP_WIN32_PROC??)\% Processortid</span><span class="sxs-lookup"><span data-stu-id="dcb2b-232">\Process(??APP_WIN32_PROC??)\% Processor Time</span></span>
    * <span data-ttu-id="dcb2b-233">\Memory\Tillgängliga byte</span><span class="sxs-lookup"><span data-stu-id="dcb2b-233">\Memory\Available Bytes</span></span>
    * <span data-ttu-id="dcb2b-234">\.NET CLR-undantag(??APP_CLR_PROC??)\# undantag som utlöses/sekund</span><span class="sxs-lookup"><span data-stu-id="dcb2b-234">\.NET CLR Exceptions(??APP_CLR_PROC??)\# of Exceps Thrown / sec</span></span>
    * <span data-ttu-id="dcb2b-235">\Process(??APP_WIN32_PROC??)\Privata byte</span><span class="sxs-lookup"><span data-stu-id="dcb2b-235">\Process(??APP_WIN32_PROC??)\Private Bytes</span></span>
    * <span data-ttu-id="dcb2b-236">\Process(??APP_WIN32_PROC??)\Byte i I/O-data per sekund</span><span class="sxs-lookup"><span data-stu-id="dcb2b-236">\Process(??APP_WIN32_PROC??)\IO Data Bytes/sec</span></span>
    * <span data-ttu-id="dcb2b-237">\Processor(_Total)\% processortid</span><span class="sxs-lookup"><span data-stu-id="dcb2b-237">\Processor(_Total)\% Processor Time</span></span>

<span data-ttu-id="dcb2b-238">För webbroller samlas även dessa räknare in:</span><span class="sxs-lookup"><span data-stu-id="dcb2b-238">For web roles, these counters are also collected:</span></span>

    * <span data-ttu-id="dcb2b-239">\ASP.NET-program(??APP_W3SVC_PROC??)\Begäranden/sek</span><span class="sxs-lookup"><span data-stu-id="dcb2b-239">\ASP.NET Applications(??APP_W3SVC_PROC??)\Requests/Sec</span></span>
    * <span data-ttu-id="dcb2b-240">\ASP.NET-program(??APP_W3SVC_PROC??)\Körningstid för begäran</span><span class="sxs-lookup"><span data-stu-id="dcb2b-240">\ASP.NET Applications(??APP_W3SVC_PROC??)\Request Execution Time</span></span>
    * <span data-ttu-id="dcb2b-241">\ASP.NET-program(??APP_W3SVC_PROC??)\Begäranden i tillämpningskö</span><span class="sxs-lookup"><span data-stu-id="dcb2b-241">\ASP.NET Applications(??APP_W3SVC_PROC??)\Requests In Application Queue</span></span>

<span data-ttu-id="dcb2b-242">Du kan ange fler anpassade prestandaräknare eller andra Windows-prestandaräknare genom att redigera ApplicationInsights.config [som i det här exemplet](https://github.com/Microsoft/ApplicationInsights-Home/blob/master/Samples/AzureEmailService/WorkerRoleA/ApplicationInsights.config#L14).</span><span class="sxs-lookup"><span data-stu-id="dcb2b-242">You can specify additional custom or other windows performance counters by editing ApplicationInsights.config [as in this example](https://github.com/Microsoft/ApplicationInsights-Home/blob/master/Samples/AzureEmailService/WorkerRoleA/ApplicationInsights.config#L14).</span></span>

  ![Prestandaräknare](./media/app-insights-cloudservices/OLfMo2f.png)

## <a name="correlated-telemetry-for-worker-roles"></a><span data-ttu-id="dcb2b-244">Korrelerad telemetri för arbetsroller</span><span class="sxs-lookup"><span data-stu-id="dcb2b-244">Correlated Telemetry for Worker Roles</span></span>
<span data-ttu-id="dcb2b-245">Det är en omfattande diagnostikupplevelse där du kan se vad som ledde till en misslyckad begäran eller en begäran med lång svarstid.</span><span class="sxs-lookup"><span data-stu-id="dcb2b-245">It is a rich diagnostic experience, when you can see what led to a failed or high latency request.</span></span> <span data-ttu-id="dcb2b-246">Med webbroller konfigurerar SDK automatiskt sambandet mellan relaterad telemetri.</span><span class="sxs-lookup"><span data-stu-id="dcb2b-246">With web roles, the SDK automatically sets up correlation between related telemetry.</span></span> <span data-ttu-id="dcb2b-247">För arbetsroller kan du uppnå detta genom att använda en anpassad telemetriinitierare och ange ett gemensamt Operation.Id-kontextattribut för all telemetri.</span><span class="sxs-lookup"><span data-stu-id="dcb2b-247">For worker roles, you can use a custom telemetry initializer to set a common Operation.Id context attribute for all the telemetry to achieve this.</span></span> <span data-ttu-id="dcb2b-248">På så sätt kan du snabbt se om fördröjningen/felet orsakades på grund av ett beroende eller din kod.</span><span class="sxs-lookup"><span data-stu-id="dcb2b-248">This allows you to see whether the latency/failure issue was caused due to a dependency or your code, at a glance!</span></span> 

<span data-ttu-id="dcb2b-249">Så här gör du:</span><span class="sxs-lookup"><span data-stu-id="dcb2b-249">Here's how:</span></span>

* <span data-ttu-id="dcb2b-250">Ange korrelations-ID:t i en CallContext som du ser [här](https://github.com/Microsoft/ApplicationInsights-Home/blob/master/Samples/AzureEmailService/WorkerRoleA/WorkerRoleA.cs#L36).</span><span class="sxs-lookup"><span data-stu-id="dcb2b-250">Set the correlation Id into a CallContext as shown [here](https://github.com/Microsoft/ApplicationInsights-Home/blob/master/Samples/AzureEmailService/WorkerRoleA/WorkerRoleA.cs#L36).</span></span> <span data-ttu-id="dcb2b-251">I detta fall använder vi ID:t för begäran som korrelations-ID</span><span class="sxs-lookup"><span data-stu-id="dcb2b-251">In this case, we are using the Request ID as the correlation id</span></span>
* <span data-ttu-id="dcb2b-252">Lägg till en anpassad TelemetryInitializer-implementering och ange Operation.Id till det correlationId som du angav ovan.</span><span class="sxs-lookup"><span data-stu-id="dcb2b-252">Add a custom TelemetryInitializer implementation, to set the Operation.Id to the correlationId set above.</span></span> <span data-ttu-id="dcb2b-253">Ett exempel finns här: [ItemCorrelationTelemetryInitializer](https://github.com/Microsoft/ApplicationInsights-Home/blob/master/Samples/AzureEmailService/WorkerRoleA/Telemetry/ItemCorrelationTelemetryInitializer.cs#L13)</span><span class="sxs-lookup"><span data-stu-id="dcb2b-253">There's an example here: [ItemCorrelationTelemetryInitializer](https://github.com/Microsoft/ApplicationInsights-Home/blob/master/Samples/AzureEmailService/WorkerRoleA/Telemetry/ItemCorrelationTelemetryInitializer.cs#L13)</span></span>
* <span data-ttu-id="dcb2b-254">Lägg till den anpassade telemetriinitieraren.</span><span class="sxs-lookup"><span data-stu-id="dcb2b-254">Add the custom telemetry initializer.</span></span> <span data-ttu-id="dcb2b-255">Du kan göra det i filen applicationinsights.config eller i koden som du ser [här](https://github.com/Microsoft/ApplicationInsights-Home/blob/master/Samples/AzureEmailService/WorkerRoleA/WorkerRoleA.cs#L233)</span><span class="sxs-lookup"><span data-stu-id="dcb2b-255">You could do that in the ApplicationInsights.config file, or in code as shown [here](https://github.com/Microsoft/ApplicationInsights-Home/blob/master/Samples/AzureEmailService/WorkerRoleA/WorkerRoleA.cs#L233)</span></span>

<span data-ttu-id="dcb2b-256">Klart!</span><span class="sxs-lookup"><span data-stu-id="dcb2b-256">That's it!</span></span> <span data-ttu-id="dcb2b-257">Portalmiljön är redan utformad så att du snabbt ser all telemetri:</span><span class="sxs-lookup"><span data-stu-id="dcb2b-257">The portal experience is already wired up to help you see all associated telemetry at a glance:</span></span>

![Korrelerad telemetri](./media/app-insights-cloudservices/bHxuUhd.png)

## <a name="client-telemetry"></a><span data-ttu-id="dcb2b-259">Klienttelemetri</span><span class="sxs-lookup"><span data-stu-id="dcb2b-259">Client telemetry</span></span>
<span data-ttu-id="dcb2b-260">[Lägg till JavaScript SDK till dina webbsidor][client] om du vill visa webbläsarbaserad telemetri, till exempel antal sidvisningar, inläsningstider för sidor och skriptundantag, samt om du vill skriva anpassad telemetri i dina sidskript.</span><span class="sxs-lookup"><span data-stu-id="dcb2b-260">[Add the JavaScript SDK to your web pages][client] to get browser-based telemetry such as page view counts, page load times, script exceptions, and to let you write custom telemetry in your page scripts.</span></span>

## <a name="availability-tests"></a><span data-ttu-id="dcb2b-261">Tillgänglighetstester</span><span class="sxs-lookup"><span data-stu-id="dcb2b-261">Availability tests</span></span>
<span data-ttu-id="dcb2b-262">[Konfigurera webbtester][availability] för att se till att ditt program är aktivt och effektivt.</span><span class="sxs-lookup"><span data-stu-id="dcb2b-262">[Set up web tests][availability] to make sure your application stays live and responsive.</span></span>

## <a name="display-everything-together"></a><span data-ttu-id="dcb2b-263">Visa allt tillsammans</span><span class="sxs-lookup"><span data-stu-id="dcb2b-263">Display everything together</span></span>
<span data-ttu-id="dcb2b-264">Du kan få en överblick över systemet genom att placera alla de viktigaste övervakningsdiagrammen på en enda [instrumentpanel](app-insights-dashboards.md).</span><span class="sxs-lookup"><span data-stu-id="dcb2b-264">To get an overall picture of your system, you can bring the key monitoring charts together on one [dashboard](app-insights-dashboards.md).</span></span> <span data-ttu-id="dcb2b-265">Du kan till exempel fästa antalet begäranden och fel för varje roll.</span><span class="sxs-lookup"><span data-stu-id="dcb2b-265">For example, you could pin the request and failure counts of each role.</span></span> 

<span data-ttu-id="dcb2b-266">Om systemet använder andra Azure-tjänster, till exempel Stream Analytics, kan du även lägga till övervakningsdiagrammen för dem.</span><span class="sxs-lookup"><span data-stu-id="dcb2b-266">If your system uses other Azure services such as Stream Analytics, include their monitoring charts as well.</span></span> 

<span data-ttu-id="dcb2b-267">Om du har en mobilapp för klientsidan infogar du kod för att skicka anpassade händelser vid viktiga användaråtgärder och skapar en [HockeyApp-brygga](app-insights-hockeyapp-bridge-app.md).</span><span class="sxs-lookup"><span data-stu-id="dcb2b-267">If you have a client mobile app, insert some code to send custom events on key user operations, and create a [HockeyApp bridge](app-insights-hockeyapp-bridge-app.md).</span></span> <span data-ttu-id="dcb2b-268">Skapa frågor i [Analytics](app-insights-analytics.md) för att visa antalet händelser och fäst dem på instrumentpanelen.</span><span class="sxs-lookup"><span data-stu-id="dcb2b-268">Create queries in [Analytics](app-insights-analytics.md) to display the event counts, and pin them to the dashboard.</span></span>

## <a name="example"></a><span data-ttu-id="dcb2b-269">Exempel</span><span class="sxs-lookup"><span data-stu-id="dcb2b-269">Example</span></span>
<span data-ttu-id="dcb2b-270">[Exemplet](https://github.com/Microsoft/ApplicationInsights-Home/tree/master/Samples/AzureEmailService) övervakar en tjänst som har en webbroll och två arbetsroller.</span><span class="sxs-lookup"><span data-stu-id="dcb2b-270">[The example](https://github.com/Microsoft/ApplicationInsights-Home/tree/master/Samples/AzureEmailService) monitors a service that has a web role and two worker roles.</span></span>

## <a name="exception-method-not-found-on-running-in-azure-cloud-services"></a><span data-ttu-id="dcb2b-271">Undantaget ”metoden hittades inte” vid körning i Azure Cloud Services</span><span class="sxs-lookup"><span data-stu-id="dcb2b-271">Exception "method not found" on running in Azure Cloud Services</span></span>
<span data-ttu-id="dcb2b-272">Utvecklade du för .NET 4.6?</span><span class="sxs-lookup"><span data-stu-id="dcb2b-272">Did you build for .NET 4.6?</span></span> <span data-ttu-id="dcb2b-273">4.6 stöds inte automatiskt i Azure Cloud Services-roller.</span><span class="sxs-lookup"><span data-stu-id="dcb2b-273">4.6 is not automatically supported in Azure Cloud Services roles.</span></span> <span data-ttu-id="dcb2b-274">[Installera 4.6 för varje roll](../cloud-services/cloud-services-dotnet-install-dotnet.md) innan du kör din app.</span><span class="sxs-lookup"><span data-stu-id="dcb2b-274">[Install 4.6 on each role](../cloud-services/cloud-services-dotnet-install-dotnet.md) before running your app.</span></span>

## <a name="video"></a><span data-ttu-id="dcb2b-275">Video</span><span class="sxs-lookup"><span data-stu-id="dcb2b-275">Video</span></span>

> [!VIDEO https://channel9.msdn.com/events/Connect/2016/100/player]

## <a name="next-steps"></a><span data-ttu-id="dcb2b-276">Nästa steg</span><span class="sxs-lookup"><span data-stu-id="dcb2b-276">Next steps</span></span>
* [<span data-ttu-id="dcb2b-277">Konfigurera Azure Diagnostics-överföring till Application Insights</span><span class="sxs-lookup"><span data-stu-id="dcb2b-277">Configure sending Azure Diagnostics to Application Insights</span></span>](app-insights-azure-diagnostics.md)
* [<span data-ttu-id="dcb2b-278">Automatisera genereringen av Application Insights-resurser</span><span class="sxs-lookup"><span data-stu-id="dcb2b-278">Automate creation of Application Insights resources</span></span>](app-insights-powershell.md)
* [<span data-ttu-id="dcb2b-279">Automatisera Azure-diagnostik</span><span class="sxs-lookup"><span data-stu-id="dcb2b-279">Automate Azure diagnostics</span></span>](app-insights-powershell-azure-diagnostics.md)
* [<span data-ttu-id="dcb2b-280">Azure Functions</span><span class="sxs-lookup"><span data-stu-id="dcb2b-280">Azure Functions</span></span>](https://github.com/christopheranderson/azure-functions-app-insights-sample)

[api]: app-insights-api-custom-events-metrics.md
[availability]: app-insights-monitor-web-app-availability.md
[azure]: app-insights-azure.md
[client]: app-insights-javascript.md
[diagnostic]: app-insights-diagnostic-search.md
[netlogs]: app-insights-asp-net-trace-logs.md
[portal]: http://portal.azure.com/
[qna]: app-insights-troubleshoot-faq.md
[redfield]: app-insights-monitor-performance-live-website-now.md
[start]: app-insights-overview.md 

---
title: aaaAzure Application Insights telemetri korrelation | Microsoft Docs
description: Application Insights telemetri korrelation
services: application-insights
documentationcenter: .net
author: SergeyKanzhelev
manager: carmonm
ms.service: application-insights
ms.workload: TBD
ms.tgt_pltfrm: ibiza
ms.devlang: multiple
ms.topic: article
ms.date: 04/25/2017
ms.author: bwren
ms.openlocfilehash: 3ed8c589d237cac5daceac939ca893b7d81a2967
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: sv-SE
ms.lasthandoff: 10/06/2017
---
# <a name="telemetry-correlation-in-application-insights"></a><span data-ttu-id="86657-103">Korrelation telemetri i Application Insights</span><span class="sxs-lookup"><span data-stu-id="86657-103">Telemetry correlation in Application Insights</span></span>

<span data-ttu-id="86657-104">I hello world micro tjänster kräver varje logisk åtgärd arbete i olika komponenter i hello-tjänsten.</span><span class="sxs-lookup"><span data-stu-id="86657-104">In hello world of micro services, every logical operation requires work done in various components of hello service.</span></span> <span data-ttu-id="86657-105">Var och en av de här komponenterna separat kan övervakas av [Programinsikter](app-insights-overview.md).</span><span class="sxs-lookup"><span data-stu-id="86657-105">Each of these components can be separately monitored by [Application Insights](app-insights-overview.md).</span></span> <span data-ttu-id="86657-106">hello webbkomponenten appen kommunicerar med providern komponenten toovalidate användarens autentiseringsuppgifter och med hello API komponenten tooget data för visualisering.</span><span class="sxs-lookup"><span data-stu-id="86657-106">hello web app component communicates with authentication provider component toovalidate user credentials, and with hello API component tooget data for visualization.</span></span> <span data-ttu-id="86657-107">hello API-filkomponenten i sin tur kan fråga efter data från andra tjänster och använda cache-provider-komponenter och meddela hello fakturering komponenten med avseende på det här anropet.</span><span class="sxs-lookup"><span data-stu-id="86657-107">hello API component in its turn can query data from other services and use cache-provider components and notify hello billing component about this call.</span></span> <span data-ttu-id="86657-108">Application Insights stöder distribuerade telemetri korrelation.</span><span class="sxs-lookup"><span data-stu-id="86657-108">Application Insights supports distributed telemetry correlation.</span></span> <span data-ttu-id="86657-109">Det gör att du toodetect vilken komponent som ansvarar för fel eller prestandaförsämring.</span><span class="sxs-lookup"><span data-stu-id="86657-109">It allows you toodetect which component is responsible for failures or performance degradation.</span></span>

<span data-ttu-id="86657-110">Den här artikeln förklarar hello-datamodell som används av Application Insights toocorrelate telemetri som skickas av flera komponenter.</span><span class="sxs-lookup"><span data-stu-id="86657-110">This article explains hello data model used by Application Insights toocorrelate telemetry sent by multiple components.</span></span> <span data-ttu-id="86657-111">Den omfattar hello kontexten spridningen metoder och protokoll.</span><span class="sxs-lookup"><span data-stu-id="86657-111">It covers hello context propagation techniques and protocols.</span></span> <span data-ttu-id="86657-112">Den omfattar också hello implementering av hello korrelation begrepp på olika språk och plattformar.</span><span class="sxs-lookup"><span data-stu-id="86657-112">It also covers hello implementation of hello correlation concepts on different languages and platforms.</span></span>

## <a name="telemetry-correlation-data-model"></a><span data-ttu-id="86657-113">Telemetri Korrelations-datamodell</span><span class="sxs-lookup"><span data-stu-id="86657-113">Telemetry correlation data model</span></span>

<span data-ttu-id="86657-114">Application Insights definierar en [datamodellen](application-insights-data-model.md) för distribuerade telemetri korrelation.</span><span class="sxs-lookup"><span data-stu-id="86657-114">Application Insights defines a [data model](application-insights-data-model.md) for distributed telemetry correlation.</span></span> <span data-ttu-id="86657-115">tooassociate telemetri med hello logisk åtgärd, varje telemetri objekt har en kontextfält med namnet `operation_Id`.</span><span class="sxs-lookup"><span data-stu-id="86657-115">tooassociate telemetry with hello logical operation, every telemetry item has a context field called `operation_Id`.</span></span> <span data-ttu-id="86657-116">Den här identifieraren delas av alla telemetri objekt i hello distribuerade spårning.</span><span class="sxs-lookup"><span data-stu-id="86657-116">This identifier is shared by every telemetry item in hello distributed trace.</span></span> <span data-ttu-id="86657-117">Så även om förlust av telemetri från ett enda lager kan fortfarande du associera telemetri som rapporterats av andra komponenter.</span><span class="sxs-lookup"><span data-stu-id="86657-117">So even with loss of telemetry from a single layer you still can associate telemetry reported by other components.</span></span>

<span data-ttu-id="86657-118">Distribuerad logisk åtgärd består vanligtvis av en uppsättning mindre operations - begäranden som bearbetas av en av hello komponenter.</span><span class="sxs-lookup"><span data-stu-id="86657-118">Distributed logical operation typically consists of a set of smaller operations - requests processed by one of hello components.</span></span> <span data-ttu-id="86657-119">Dessa åtgärder har definierats av [begära telemetri](application-insights-data-model-request-telemetry.md).</span><span class="sxs-lookup"><span data-stu-id="86657-119">Those operations are defined by [request telemetry](application-insights-data-model-request-telemetry.md).</span></span> <span data-ttu-id="86657-120">Varje begärandetelemetri har sin egen `id` som globalt unikt identifierar.</span><span class="sxs-lookup"><span data-stu-id="86657-120">Every request telemetry has its own `id` that uniquely globally identifies it.</span></span> <span data-ttu-id="86657-121">Och all telemetri - spårningar, undantag, etc. som associerats med denna begäran bör ange hello `operation_parentId` toohello värdet för hello begäran `id`.</span><span class="sxs-lookup"><span data-stu-id="86657-121">And all telemetry - traces, exceptions, etc. associated with this request should set hello `operation_parentId` toohello value of hello request `id`.</span></span>

<span data-ttu-id="86657-122">Varje utgående åtgärd som representeras av HTTP-anropet tooanother komponenten [beroendetelemetri](application-insights-data-model-dependency-telemetry.md).</span><span class="sxs-lookup"><span data-stu-id="86657-122">Every outgoing operation like http call tooanother component represented by [dependency telemetry](application-insights-data-model-dependency-telemetry.md).</span></span> <span data-ttu-id="86657-123">Beroendetelemetri definierar också sin egen `id` som är globalt unikt.</span><span class="sxs-lookup"><span data-stu-id="86657-123">Dependency telemetry also defines its own `id` that is globally unique.</span></span> <span data-ttu-id="86657-124">Begärandetelemetri initieras av det här beroendeanropet används som `operation_parentId`.</span><span class="sxs-lookup"><span data-stu-id="86657-124">Request telemetry, initiated by this dependency call, uses it as `operation_parentId`.</span></span>

<span data-ttu-id="86657-125">Du kan skapa hello vy över distribuerade logiska åtgärden med hjälp av `operation_Id`, `operation_parentId`, och `request.id` med `dependency.id`.</span><span class="sxs-lookup"><span data-stu-id="86657-125">You can build hello view of distributed logical operation using `operation_Id`, `operation_parentId`, and `request.id` with `dependency.id`.</span></span> <span data-ttu-id="86657-126">De här fälten också definiera hello orsakssamband ordning telemetri.</span><span class="sxs-lookup"><span data-stu-id="86657-126">Those fields also define hello causality order of telemetry calls.</span></span>

<span data-ttu-id="86657-127">Spår från komponenter kan gå toohello olika lagringsobjekt i micro services-miljön.</span><span class="sxs-lookup"><span data-stu-id="86657-127">In micro services environment, traces from components may go toohello different storages.</span></span> <span data-ttu-id="86657-128">Varje komponent kan ha sin egen instrumentation nyckel i Application Insights.</span><span class="sxs-lookup"><span data-stu-id="86657-128">Every component may have its own instrumentation key in Application Insights.</span></span> <span data-ttu-id="86657-129">tooget telemetri för hello logisk åtgärd, måste tooquery data från varje lagring.</span><span class="sxs-lookup"><span data-stu-id="86657-129">tooget telemetry for hello logical operation, you need tooquery data from every storage.</span></span> <span data-ttu-id="86657-130">När antalet lagringsobjekt är stort, behöver du toohave en ledtråd om var toolook nästa.</span><span class="sxs-lookup"><span data-stu-id="86657-130">When number of storages is huge, you need toohave a hint on where toolook next.</span></span>

<span data-ttu-id="86657-131">Application Insights-datamodell definierar två fält toosolve problemet: `request.source` och `dependency.target`.</span><span class="sxs-lookup"><span data-stu-id="86657-131">Application Insights data model defines two fields toosolve this problem: `request.source` and `dependency.target`.</span></span> <span data-ttu-id="86657-132">hello första fältet identifierar hello-komponent som initierade hello beroende begäran och hello andra identifierar vilken komponent som returnerade hello svar för hello beroendeanropet.</span><span class="sxs-lookup"><span data-stu-id="86657-132">hello first field identifies hello component that initiated hello dependency request, and hello second identifies which component returned hello response of hello dependency call.</span></span>


## <a name="example"></a><span data-ttu-id="86657-133">Exempel</span><span class="sxs-lookup"><span data-stu-id="86657-133">Example</span></span>

<span data-ttu-id="86657-134">Låt oss ta ett exempel på ett program BÖRS priser som visar hello aktuella priset på en börs med hello externa API kallas LAGERLISTA API.</span><span class="sxs-lookup"><span data-stu-id="86657-134">Let's take an example of an application STOCK PRICES showing hello current market price of a stock using hello external API called STOCKS API.</span></span> <span data-ttu-id="86657-135">hello BÖRS priser programmet har en sida `Stock page` öppnas med hello klienten web webbläsare `GET /Home/Stock`.</span><span class="sxs-lookup"><span data-stu-id="86657-135">hello STOCK PRICES application has a page `Stock page` opened by hello client web browser using `GET /Home/Stock`.</span></span> <span data-ttu-id="86657-136">hello programmet frågor hello BÖRS API med hjälp av en HTTP-anrop `GET /api/stock/value`.</span><span class="sxs-lookup"><span data-stu-id="86657-136">hello application queries hello STOCK API by using an HTTP call `GET /api/stock/value`.</span></span>

<span data-ttu-id="86657-137">Du kan analysera resulterande telemetri som kör en fråga:</span><span class="sxs-lookup"><span data-stu-id="86657-137">You can analyze resulting telemetry running a query:</span></span>

```
(requests | union dependencies | union pageViews) 
| where operation_Id == "STYz"
| project timestamp, itemType, name, id, operation_ParentId, operation_Id
```

<span data-ttu-id="86657-138">I hello resultatet visa Observera att alla objekt i telemetri dela hello rot `operation_Id`.</span><span class="sxs-lookup"><span data-stu-id="86657-138">In hello result view note that all telemetry items share hello root `operation_Id`.</span></span> <span data-ttu-id="86657-139">När ajax-anrop görs från hello sida - nytt unikt id `qJSXU` är tilldelade toohello beroendetelemetri och Pageview's id används som `operation_ParentId`.</span><span class="sxs-lookup"><span data-stu-id="86657-139">When ajax call made from hello page - new unique id `qJSXU` is assigned toohello dependency telemetry and pageView's id is used as `operation_ParentId`.</span></span> <span data-ttu-id="86657-140">I sin tur serverbegäran använder ajax's id som `operation_ParentId`osv.</span><span class="sxs-lookup"><span data-stu-id="86657-140">In turn server request uses ajax's id as `operation_ParentId`, etc.</span></span>

| <span data-ttu-id="86657-141">itemType</span><span class="sxs-lookup"><span data-stu-id="86657-141">itemType</span></span>   | <span data-ttu-id="86657-142">namn</span><span class="sxs-lookup"><span data-stu-id="86657-142">name</span></span>                      | <span data-ttu-id="86657-143">id</span><span class="sxs-lookup"><span data-stu-id="86657-143">id</span></span>           | <span data-ttu-id="86657-144">operation_ParentId</span><span class="sxs-lookup"><span data-stu-id="86657-144">operation_ParentId</span></span> | <span data-ttu-id="86657-145">operation_Id</span><span class="sxs-lookup"><span data-stu-id="86657-145">operation_Id</span></span> |
|------------|---------------------------|--------------|--------------------|--------------|
| <span data-ttu-id="86657-146">pageView</span><span class="sxs-lookup"><span data-stu-id="86657-146">pageView</span></span>   | <span data-ttu-id="86657-147">Lagrets sida</span><span class="sxs-lookup"><span data-stu-id="86657-147">Stock page</span></span>                |              | <span data-ttu-id="86657-148">STYz</span><span class="sxs-lookup"><span data-stu-id="86657-148">STYz</span></span>               | <span data-ttu-id="86657-149">STYz</span><span class="sxs-lookup"><span data-stu-id="86657-149">STYz</span></span>         |
| <span data-ttu-id="86657-150">beroende</span><span class="sxs-lookup"><span data-stu-id="86657-150">dependency</span></span> | <span data-ttu-id="86657-151">GET/Home/Stock</span><span class="sxs-lookup"><span data-stu-id="86657-151">GET /Home/Stock</span></span>           | <span data-ttu-id="86657-152">qJSXU</span><span class="sxs-lookup"><span data-stu-id="86657-152">qJSXU</span></span>        | <span data-ttu-id="86657-153">STYz</span><span class="sxs-lookup"><span data-stu-id="86657-153">STYz</span></span>               | <span data-ttu-id="86657-154">STYz</span><span class="sxs-lookup"><span data-stu-id="86657-154">STYz</span></span>         |
| <span data-ttu-id="86657-155">Begäran</span><span class="sxs-lookup"><span data-stu-id="86657-155">request</span></span>    | <span data-ttu-id="86657-156">GET-Home/Stock</span><span class="sxs-lookup"><span data-stu-id="86657-156">GET Home/Stock</span></span>            | <span data-ttu-id="86657-157">KqKwlrSt9PA =</span><span class="sxs-lookup"><span data-stu-id="86657-157">KqKwlrSt9PA=</span></span> | <span data-ttu-id="86657-158">qJSXU</span><span class="sxs-lookup"><span data-stu-id="86657-158">qJSXU</span></span>              | <span data-ttu-id="86657-159">STYz</span><span class="sxs-lookup"><span data-stu-id="86657-159">STYz</span></span>         |
| <span data-ttu-id="86657-160">beroende</span><span class="sxs-lookup"><span data-stu-id="86657-160">dependency</span></span> | <span data-ttu-id="86657-161">Hämta /api/stock/value</span><span class="sxs-lookup"><span data-stu-id="86657-161">GET /api/stock/value</span></span>      | <span data-ttu-id="86657-162">bBrf2L7mm2g =</span><span class="sxs-lookup"><span data-stu-id="86657-162">bBrf2L7mm2g=</span></span> | <span data-ttu-id="86657-163">KqKwlrSt9PA =</span><span class="sxs-lookup"><span data-stu-id="86657-163">KqKwlrSt9PA=</span></span>       | <span data-ttu-id="86657-164">STYz</span><span class="sxs-lookup"><span data-stu-id="86657-164">STYz</span></span>         |

<span data-ttu-id="86657-165">Nu när hello anropet `GET /api/stock/value` gjorts tooan extern tjänst du vill tooknow hello identiteten för servern.</span><span class="sxs-lookup"><span data-stu-id="86657-165">Now when hello call `GET /api/stock/value` made tooan external service you want tooknow hello identity of that server.</span></span> <span data-ttu-id="86657-166">Du kan ange `dependency.target` fältet på lämpligt sätt.</span><span class="sxs-lookup"><span data-stu-id="86657-166">So you can set `dependency.target` field appropriately.</span></span> <span data-ttu-id="86657-167">När externa hello-tjänsten inte stöder övervakning - `target` anges toohello värdnamnet för hello-tjänst som `stock-prices-api.com`.</span><span class="sxs-lookup"><span data-stu-id="86657-167">When hello external service does not support monitoring - `target` is set toohello host name of hello service like `stock-prices-api.com`.</span></span> <span data-ttu-id="86657-168">Men om tjänsten identifierar sig genom att returnera en fördefinierad HTTP-huvudet - `target` innehåller hello tjänstidentiteten som tillåter Application Insights toobuild distribuerade spårning genom att fråga telemetri från tjänsten.</span><span class="sxs-lookup"><span data-stu-id="86657-168">However if that service identifies itself by returning a predefined HTTP header - `target` contains hello service identity that allows Application Insights toobuild distributed trace by querying telemetry from that service.</span></span> 

## <a name="correlation-headers"></a><span data-ttu-id="86657-169">Huvuden för korrelation</span><span class="sxs-lookup"><span data-stu-id="86657-169">Correlation headers</span></span>

<span data-ttu-id="86657-170">Vi arbetar på RFC förslag för hello [korrelation HTTP-protokollet](https://github.com/lmolkova/correlation/blob/master/http_protocol_proposal_v1.md).</span><span class="sxs-lookup"><span data-stu-id="86657-170">We are working on RFC proposal for hello [correlation HTTP protocol](https://github.com/lmolkova/correlation/blob/master/http_protocol_proposal_v1.md).</span></span> <span data-ttu-id="86657-171">Den här förslag definierar två huvuden:</span><span class="sxs-lookup"><span data-stu-id="86657-171">This proposal defines two headers:</span></span>

- <span data-ttu-id="86657-172">`Request-Id`utföra hello globalt unikt id för hello anrop</span><span class="sxs-lookup"><span data-stu-id="86657-172">`Request-Id` carry hello globally unique id of hello call</span></span>
- <span data-ttu-id="86657-173">`Correlation-Context`-utföra hello namn värde-par samling hello distribuerade trace egenskaper</span><span class="sxs-lookup"><span data-stu-id="86657-173">`Correlation-Context` - carry hello name value pairs collection of hello distributed trace properties</span></span>

<span data-ttu-id="86657-174">hello som standard definierar också två scheman för `Request-Id` generation - platta och hierarkiska.</span><span class="sxs-lookup"><span data-stu-id="86657-174">hello standard also defines two schemas of `Request-Id` generation - flat and hierarchical.</span></span> <span data-ttu-id="86657-175">Hello flat schema, det är en välkänd `Id` key som definierats för hello `Correlation-Context` samling.</span><span class="sxs-lookup"><span data-stu-id="86657-175">With hello flat schema, there is a well-known `Id` key defined for hello `Correlation-Context` collection.</span></span>

<span data-ttu-id="86657-176">Application Insights definierar hello [tillägget](https://github.com/lmolkova/correlation/blob/master/http_protocol_proposal_v2.md) för hello korrelation HTTP-protokollet.</span><span class="sxs-lookup"><span data-stu-id="86657-176">Application Insights defines hello [extension](https://github.com/lmolkova/correlation/blob/master/http_protocol_proposal_v2.md) for hello correlation HTTP protocol.</span></span> <span data-ttu-id="86657-177">Den använder `Request-Context` namn värde-par toopropagate hello uppsättning egenskaper som används av hello omedelbar anropare eller mottagarmetoderna.</span><span class="sxs-lookup"><span data-stu-id="86657-177">It uses `Request-Context` name value pairs toopropagate hello collection of properties used by hello immediate caller or callee.</span></span> <span data-ttu-id="86657-178">Application Insights SDK använder den här rubriken tooset `dependency.target` och `request.source` fält.</span><span class="sxs-lookup"><span data-stu-id="86657-178">Application Insights SDK uses this header tooset `dependency.target` and `request.source` fields.</span></span>

## <a name="open-tracing-and-application-insights"></a><span data-ttu-id="86657-179">Öppna spårning och Application Insights</span><span class="sxs-lookup"><span data-stu-id="86657-179">Open tracing and Application Insights</span></span>

<span data-ttu-id="86657-180">[Öppna spårning](http://opentracing.io/) och Application Insights data modeller ser ut</span><span class="sxs-lookup"><span data-stu-id="86657-180">[Open Tracing](http://opentracing.io/) and Application Insights data models looks</span></span> 

- <span data-ttu-id="86657-181">`request`, `pageView` mappar för**Span** med`span.kind = server`</span><span class="sxs-lookup"><span data-stu-id="86657-181">`request`, `pageView` maps too**Span** with `span.kind = server`</span></span>
- <span data-ttu-id="86657-182">`dependency`mappar för**Span** med`span.kind = client`</span><span class="sxs-lookup"><span data-stu-id="86657-182">`dependency` maps too**Span** with `span.kind = client`</span></span>
- <span data-ttu-id="86657-183">`id`för en `request` och `dependency` mappar för**Span.Id**</span><span class="sxs-lookup"><span data-stu-id="86657-183">`id` of a `request` and `dependency` maps too**Span.Id**</span></span>
- <span data-ttu-id="86657-184">`operation_Id`mappar för**TraceId**</span><span class="sxs-lookup"><span data-stu-id="86657-184">`operation_Id` maps too**TraceId**</span></span>
- <span data-ttu-id="86657-185">`operation_ParentId`mappar för**referens** av typen`ChileOf`</span><span class="sxs-lookup"><span data-stu-id="86657-185">`operation_ParentId` maps too**Reference** of type `ChileOf`</span></span>

<span data-ttu-id="86657-186">Se [datamodellen](application-insights-data-model.md) för Application Insights typer och modell.</span><span class="sxs-lookup"><span data-stu-id="86657-186">See [data model](application-insights-data-model.md) for Application Insights types and data model.</span></span>

<span data-ttu-id="86657-187">Se [specifikationen](https://github.com/opentracing/specification/blob/master/specification.md) och [semantic_conventions](https://github.com/opentracing/specification/blob/master/semantic_conventions.md) definitioner av öppna spårning begrepp.</span><span class="sxs-lookup"><span data-stu-id="86657-187">See [specification](https://github.com/opentracing/specification/blob/master/specification.md) and [semantic_conventions](https://github.com/opentracing/specification/blob/master/semantic_conventions.md) for definitions of Open Tracing concepts.</span></span>


## <a name="telemetry-correlation-in-net"></a><span data-ttu-id="86657-188">Telemetri korrelation i .NET</span><span class="sxs-lookup"><span data-stu-id="86657-188">Telemetry correlation in .NET</span></span>

<span data-ttu-id="86657-189">Med tiden .NET definierats många sätt toocorrelate telemetri och diagnostik loggar.</span><span class="sxs-lookup"><span data-stu-id="86657-189">Over time .NET defined number of ways toocorrelate telemetry and diagnostics logs.</span></span> <span data-ttu-id="86657-190">Det finns `System.Diagnostics.CorrelationManager` så att tootrack [LogicalOperationStack och ActivityId](https://msdn.microsoft.com/library/system.diagnostics.correlationmanager.aspx).</span><span class="sxs-lookup"><span data-stu-id="86657-190">There is `System.Diagnostics.CorrelationManager` allowing tootrack [LogicalOperationStack and ActivityId](https://msdn.microsoft.com/library/system.diagnostics.correlationmanager.aspx).</span></span> <span data-ttu-id="86657-191">`System.Diagnostics.Tracing.EventSource`och Windows ETW definiera hello metoden [SetCurrentThreadActivityId](https://msdn.microsoft.com/library/system.diagnostics.tracing.eventsource.setcurrentthreadactivityid.aspx).</span><span class="sxs-lookup"><span data-stu-id="86657-191">`System.Diagnostics.Tracing.EventSource` and Windows ETW define hello method [SetCurrentThreadActivityId](https://msdn.microsoft.com/library/system.diagnostics.tracing.eventsource.setcurrentthreadactivityid.aspx).</span></span> <span data-ttu-id="86657-192">`ILogger`använder [loggen scope](https://docs.microsoft.com/aspnet/core/fundamentals/logging#log-scopes).</span><span class="sxs-lookup"><span data-stu-id="86657-192">`ILogger` uses [Log Scopes](https://docs.microsoft.com/aspnet/core/fundamentals/logging#log-scopes).</span></span> <span data-ttu-id="86657-193">WCF- och HTTP-överföring in ”aktuella” kontexten spridning.</span><span class="sxs-lookup"><span data-stu-id="86657-193">WCF and Http wire up "current" context propagation.</span></span>

<span data-ttu-id="86657-194">De här metoderna inte men aktivera stöd för automatisk distribuerade spårning.</span><span class="sxs-lookup"><span data-stu-id="86657-194">However those methods didn't enable automatic distributed tracing support.</span></span> <span data-ttu-id="86657-195">`DiagnosticsSource`är ett sätt toosupport automatisk mellan datorn korrelation.</span><span class="sxs-lookup"><span data-stu-id="86657-195">`DiagnosticsSource` is a way toosupport automatic cross machine correlation.</span></span> <span data-ttu-id="86657-196">.NET-biblioteken stöder diagnostik och Tillåt automatisk mellan dator spridning av hello korrelation kontexten via hello transport som http.</span><span class="sxs-lookup"><span data-stu-id="86657-196">.NET libraries support Diagnostics Source and allow automatic cross machine propagation of hello correlation context via hello transport like http.</span></span>

<span data-ttu-id="86657-197">Hej [guide tooActivities](https://github.com/dotnet/corefx/blob/master/src/System.Diagnostics.DiagnosticSource/src/ActivityUserGuide.md) förklarar hello grunderna i Aktivitetsspårning i diagnostik källan.</span><span class="sxs-lookup"><span data-stu-id="86657-197">hello [guide tooActivities](https://github.com/dotnet/corefx/blob/master/src/System.Diagnostics.DiagnosticSource/src/ActivityUserGuide.md) in Diagnostics Source explains hello basics of tracking Activities.</span></span> 

<span data-ttu-id="86657-198">ASP.NET Core 2.0 stöder extrahering av Http-huvuden och starta hello ny aktivitet.</span><span class="sxs-lookup"><span data-stu-id="86657-198">ASP.NET Core 2.0 supports extraction of Http Headers and starting hello new Activity.</span></span> 

<span data-ttu-id="86657-199">`System.Net.HttpClient`startversion `<fill in>` stöder automatisk injektion av hello korrelation Http-huvuden och spåra hello http-anrop som en aktivitet.</span><span class="sxs-lookup"><span data-stu-id="86657-199">`System.Net.HttpClient` starting version `<fill in>` supports automatic injection of hello correlation Http Headers and tracking hello http call as an Activity.</span></span>

<span data-ttu-id="86657-200">Det finns en ny Http-modul [Microsoft.AspNet.TelemetryCorrelation](https://www.nuget.org/packages/Microsoft.AspNet.TelemetryCorrelation/) för hello ASP.NET klassisk.</span><span class="sxs-lookup"><span data-stu-id="86657-200">There is a new Http Module [Microsoft.AspNet.TelemetryCorrelation](https://www.nuget.org/packages/Microsoft.AspNet.TelemetryCorrelation/) for hello ASP.NET Classic.</span></span> <span data-ttu-id="86657-201">Den här modulen implementerar telemetri korrelation med DiagnosticsSource.</span><span class="sxs-lookup"><span data-stu-id="86657-201">This module implements telemetry correlation using DiagnosticsSource.</span></span> <span data-ttu-id="86657-202">Startar aktivitet baserat på inkommande begärandehuvuden.</span><span class="sxs-lookup"><span data-stu-id="86657-202">It starts activity based on incoming request headers.</span></span> <span data-ttu-id="86657-203">Den också korrelerar telemetri från hello olika steg för behandling av begäranden.</span><span class="sxs-lookup"><span data-stu-id="86657-203">It also correlates telemetry from hello different stages of request processing.</span></span> <span data-ttu-id="86657-204">Även för hello fall när varje steg i processen för IIS körs på en annan hantera trådar.</span><span class="sxs-lookup"><span data-stu-id="86657-204">Even for hello cases when every stage of IIS processing runs on a different manage threads.</span></span>

<span data-ttu-id="86657-205">Application Insights SDK startversion `2.4.0-beta1` använder DiagnosticsSource och aktiviteten toocollect telemetri och koppla den till hello pågående aktivitet.</span><span class="sxs-lookup"><span data-stu-id="86657-205">Application Insights SDK starting version `2.4.0-beta1` uses DiagnosticsSource and Activity toocollect telemetry and associate it with hello current activity.</span></span> 

## <a name="next-steps"></a><span data-ttu-id="86657-206">Nästa steg</span><span class="sxs-lookup"><span data-stu-id="86657-206">Next steps</span></span>

- [<span data-ttu-id="86657-207">Skriv anpassad telemetri</span><span class="sxs-lookup"><span data-stu-id="86657-207">Write custom telemetry</span></span>](app-insights-api-custom-events-metrics.md)
- <span data-ttu-id="86657-208">Publicera alla komponenter i micro tjänsten på Application Insights.</span><span class="sxs-lookup"><span data-stu-id="86657-208">Onboard all components of your micro service on Application Insights.</span></span> <span data-ttu-id="86657-209">Checka ut [plattformar som stöds av](app-insights-platforms.md).</span><span class="sxs-lookup"><span data-stu-id="86657-209">Check out [supported platforms](app-insights-platforms.md).</span></span>
- <span data-ttu-id="86657-210">Se [datamodellen](application-insights-data-model.md) för Application Insights typer och modell.</span><span class="sxs-lookup"><span data-stu-id="86657-210">See [data model](application-insights-data-model.md) for Application Insights types and data model.</span></span>
- <span data-ttu-id="86657-211">Lär dig hur för[utöka och filtrera telemetri](app-insights-api-filtering-sampling.md).</span><span class="sxs-lookup"><span data-stu-id="86657-211">Learn how too[extend and filter telemetry](app-insights-api-filtering-sampling.md).</span></span>

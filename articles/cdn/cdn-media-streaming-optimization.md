---
title: "aaaMedia strömning optimering via hello Azure Content Delivery Network"
description: "Optimera strömmande media-filer för smooth leverans"
services: cdn
documentationcenter: 
author: smcevoy
manager: erikre
editor: 
ms.assetid: 
ms.service: cdn
ms.workload: tbd
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 06/16/2017
ms.author: v-semcev
ms.openlocfilehash: a05a86204708c7ea7ef1f9be04323cdda6a2d403
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: sv-SE
ms.lasthandoff: 10/06/2017
---
# <a name="media-streaming-optimization-via-hello-azure-content-delivery-network"></a><span data-ttu-id="d05db-103">Direktuppspelning optimering via hello Azure Content Delivery Network</span><span class="sxs-lookup"><span data-stu-id="d05db-103">Media streaming optimization via hello Azure Content Delivery Network</span></span> 
 
<span data-ttu-id="d05db-104">Användning av video med hög definition ökar på hello Internet, vilket skapar svårigheter för effektiv överföringen av stora filer.</span><span class="sxs-lookup"><span data-stu-id="d05db-104">Use of high-definition video is increasing on hello Internet, which creates difficulties for efficient delivery of large files.</span></span> <span data-ttu-id="d05db-105">Kunder räknar jämn uppspelning av video på begäran eller live video tillgångar på olika nätverk och klienter över hela hälsningsmeddelande.</span><span class="sxs-lookup"><span data-stu-id="d05db-105">Customers expect smooth playback of video on demand or live video assets on a variety of networks and clients all over hello world.</span></span> <span data-ttu-id="d05db-106">Snabba och effektiva leveransmekanismen för direktuppspelning filer är kritiska tooensure en smidig och roligare användarfunktioner.</span><span class="sxs-lookup"><span data-stu-id="d05db-106">A fast and efficient delivery mechanism for media streaming files is critical tooensure a smooth and enjoyable consumer experience.</span></span>  

<span data-ttu-id="d05db-107">Live strömmande medier är särskilt svårt toodeliver på grund av hello stora storlekar och antalet samtidiga användare.</span><span class="sxs-lookup"><span data-stu-id="d05db-107">Live streaming media is especially difficult toodeliver because of hello large sizes and number of concurrent viewers.</span></span> <span data-ttu-id="d05db-108">Långa fördröjningar orsaka användare tooleave.</span><span class="sxs-lookup"><span data-stu-id="d05db-108">Long delays cause users tooleave.</span></span> <span data-ttu-id="d05db-109">Eftersom levande dataströmmar inte kan cachelagras i förväg och stora svarstiderna inte är godkända tooviewers, levereras video fragment inom rimlig tid.</span><span class="sxs-lookup"><span data-stu-id="d05db-109">Because live streams can't be cached ahead of time and large latencies aren't acceptable tooviewers, video fragments must be delivered in a timely manner.</span></span> 

<span data-ttu-id="d05db-110">hello begäran mönster direktuppspelning av ger också några nya utmaningar.</span><span class="sxs-lookup"><span data-stu-id="d05db-110">hello request patterns of streaming also provide some new challenges.</span></span> <span data-ttu-id="d05db-111">När en direktsänd dataström med populära eller en nya serie släpps video på begäran, tusentalsavgränsare toomillions av användare kan begära hello dataström vid hello samtidigt.</span><span class="sxs-lookup"><span data-stu-id="d05db-111">When a popular live stream or a new series is released for video on demand, thousands toomillions of viewers might request hello stream at hello same time.</span></span> <span data-ttu-id="d05db-112">I det här fallet överväldigande smart begäran konsolidering är viktiga toonot hello ursprung servrar om hello tillgångar inte cachelagras ännu.</span><span class="sxs-lookup"><span data-stu-id="d05db-112">In this case, smart request consolidation is vital toonot overwhelm hello origin servers when hello assets aren't cached yet.</span></span>
 
<span data-ttu-id="d05db-113">hello Azure Content Delivery Network från Akamai erbjuder en funktion som ger dig strömmande media tillgångar effektivt toousers över hello jordglob i större skala.</span><span class="sxs-lookup"><span data-stu-id="d05db-113">hello Azure Content Delivery Network from Akamai now offers a feature that delivers streaming media assets efficiently toousers across hello globe at scale.</span></span> <span data-ttu-id="d05db-114">hello funktionen minskar svarstiderna eftersom det reducerar hello belastningen på hello ursprung servrar.</span><span class="sxs-lookup"><span data-stu-id="d05db-114">hello feature reduces latencies because it reduces hello load on hello origin servers.</span></span> <span data-ttu-id="d05db-115">Den här funktionen är tillgänglig med hello Standard Akamai prisnivå.</span><span class="sxs-lookup"><span data-stu-id="d05db-115">This feature is available with hello Standard Akamai pricing tier.</span></span> 

<span data-ttu-id="d05db-116">hello Azure Content Delivery Network från Verizon levererar strömmande medier direkt i hello allmänna web Leveranstyp optimering.</span><span class="sxs-lookup"><span data-stu-id="d05db-116">hello Azure Content Delivery Network from Verizon delivers streaming media directly in hello general web delivery optimization type.</span></span>
 
## <a name="configure-an-endpoint-toooptimize-media-streaming-in-hello-azure-content-delivery-network-from-akamai"></a><span data-ttu-id="d05db-117">Konfigurera en slutpunkt toooptimize direktuppspelning i hello Azure Content Delivery Network från Akamai</span><span class="sxs-lookup"><span data-stu-id="d05db-117">Configure an endpoint toooptimize media streaming in hello Azure Content Delivery Network from Akamai</span></span>
 
<span data-ttu-id="d05db-118">Du kan konfigurera din content delivery network (CDN) slutpunkt toooptimize leverans för stora filer via hello Azure-portalen.</span><span class="sxs-lookup"><span data-stu-id="d05db-118">You can configure your content delivery network (CDN) endpoint toooptimize delivery for large files via hello Azure portal.</span></span> <span data-ttu-id="d05db-119">Du kan också använda vår REST-API: er eller någon av hello klienten SDK toodo detta.</span><span class="sxs-lookup"><span data-stu-id="d05db-119">You can also use our REST APIs or any of hello client SDKs toodo this.</span></span> <span data-ttu-id="d05db-120">hello visar följande steg hello processen via hello Azure-portalen:</span><span class="sxs-lookup"><span data-stu-id="d05db-120">hello following steps show hello process via hello Azure portal:</span></span>

1. <span data-ttu-id="d05db-121">tooadd en ny slutpunkt på hello **CDN-profilen** väljer **Endpoint**.</span><span class="sxs-lookup"><span data-stu-id="d05db-121">tooadd a new endpoint, on hello **CDN profile** page, select **Endpoint**.</span></span>
  
    ![Ny slutpunkt](./media/cdn-media-streaming-optimization/01_Adding.png)

2. <span data-ttu-id="d05db-123">I hello **optimerade för** listrutan, Välj **Video på begäran direktuppspelning** för video-on-demand tillgångar.</span><span class="sxs-lookup"><span data-stu-id="d05db-123">In hello **Optimized for** drop-down list, select **Video on demand media streaming** for video-on-demand assets.</span></span> <span data-ttu-id="d05db-124">Om du gör en kombination av levande och video-on-demand strömning Välj **allmänna direktuppspelning**.</span><span class="sxs-lookup"><span data-stu-id="d05db-124">If you do a combination of live and video-on-demand streaming, select **General media streaming**.</span></span>

    ![Strömning markerat](./media/cdn-media-streaming-optimization/02_Creating.png) 
 
<span data-ttu-id="d05db-126">När du har skapat hello endpoint gäller hello-optimering för alla filer som matchar vissa villkor.</span><span class="sxs-lookup"><span data-stu-id="d05db-126">After you create hello endpoint, it applies hello optimization for all files that match certain criteria.</span></span> <span data-ttu-id="d05db-127">hello följande avsnitt beskriver den här processen.</span><span class="sxs-lookup"><span data-stu-id="d05db-127">hello following section describes this process.</span></span> 
 
## <a name="media-streaming-optimizations-for-hello-azure-content-delivery-network-from-akamai"></a><span data-ttu-id="d05db-128">Direktuppspelning optimeringar för hello Azure Content Delivery Network från Akamai</span><span class="sxs-lookup"><span data-stu-id="d05db-128">Media streaming optimizations for hello Azure Content Delivery Network from Akamai</span></span>
 
<span data-ttu-id="d05db-129">Media strömmande optimering från Akamai börjar gälla för live eller video-on-demand strömmande medier som använder enskilda media fragment för leverans.</span><span class="sxs-lookup"><span data-stu-id="d05db-129">Media streaming optimization from Akamai is effective for live or video-on-demand streaming media that uses individual media fragments for delivery.</span></span> <span data-ttu-id="d05db-130">Den här processen skiljer sig från en enda stor tillgång överförs via progressiv hämtning eller genom att använda byteintervall begäranden.</span><span class="sxs-lookup"><span data-stu-id="d05db-130">This process is different from a single large asset transferred via progressive download or by using byte-range requests.</span></span> <span data-ttu-id="d05db-131">Information om formatet för leverans av media finns [optimering för stora filer](cdn-large-file-optimization.md).</span><span class="sxs-lookup"><span data-stu-id="d05db-131">For information on that style of media delivery, see [Large file optimization](cdn-large-file-optimization.md).</span></span>


<span data-ttu-id="d05db-132">hello använder allmänna leverans eller video-on-demand media leverans optimering medietyper en CDN med backend-optimeringar toodeliver media tillgångar snabbare.</span><span class="sxs-lookup"><span data-stu-id="d05db-132">hello general media delivery or video-on-demand media delivery optimization types use a CDN with back-end optimizations toodeliver media assets faster.</span></span> <span data-ttu-id="d05db-133">De kan också använda konfigurationer för media tillgångar baserat på bästa praxis lärt dig över tid.</span><span class="sxs-lookup"><span data-stu-id="d05db-133">They also use configurations for media assets based on best practices learned over time.</span></span>

### <a name="caching"></a><span data-ttu-id="d05db-134">Cachelagring</span><span class="sxs-lookup"><span data-stu-id="d05db-134">Caching</span></span>

<span data-ttu-id="d05db-135">Om hello Azure Content Delivery Network från Akamai identifierar hello tillgången är en strömmande manifest eller fragment, använder olika tidpunkter för cachelagring upphör att gälla från Internet leverans.</span><span class="sxs-lookup"><span data-stu-id="d05db-135">If hello Azure Content Delivery Network from Akamai detects that hello asset is a streaming manifest or fragment, it uses different caching expiration times from general web delivery.</span></span> <span data-ttu-id="d05db-136">(Se hello fullständiga listan i den följande tabellen hello.) Som alltid funktion cache-control eller Expires-huvuden som skickas från hello ursprunget.</span><span class="sxs-lookup"><span data-stu-id="d05db-136">(See hello full list in hello following table.) As always, cache-control or Expires headers sent from hello origin are honored.</span></span> <span data-ttu-id="d05db-137">Om hello tillgången inte är en tillgång med media, cachelagrar den med hjälp av hello giltighetstid gånger allmänna webben.</span><span class="sxs-lookup"><span data-stu-id="d05db-137">If hello asset is not a media asset, it caches by using hello expiration times for general web delivery.</span></span>

<span data-ttu-id="d05db-138">hello kort tid för negativ cachelagring är användbart för ursprung avlastning när många användare begär ett fragment som ännu inte finns.</span><span class="sxs-lookup"><span data-stu-id="d05db-138">hello short negative caching time is useful for origin offload when many users request a fragment that doesn’t exist yet.</span></span> <span data-ttu-id="d05db-139">Ett exempel är en direktsänd dataström där hälsningspaket är inte tillgängliga från hello ursprunget den andra.</span><span class="sxs-lookup"><span data-stu-id="d05db-139">An example is a live stream where hello packets aren't available from hello origin that second.</span></span> <span data-ttu-id="d05db-140">hello längre cachelagring intervall hjälper också att avlasta begäranden från hello ursprung eftersom videoinnehåll vanligtvis inte ändras.</span><span class="sxs-lookup"><span data-stu-id="d05db-140">hello longer caching interval also helps offload requests from hello origin because video content isn't typically modified.</span></span>
 

|    | <span data-ttu-id="d05db-141">Allmänt</span><span class="sxs-lookup"><span data-stu-id="d05db-141">General</span></span><br> <span data-ttu-id="d05db-142">webbprogram</span><span class="sxs-lookup"><span data-stu-id="d05db-142">web</span></span><br><span data-ttu-id="d05db-143">leverans</span><span class="sxs-lookup"><span data-stu-id="d05db-143">delivery</span></span> | <span data-ttu-id="d05db-144">Allmänt</span><span class="sxs-lookup"><span data-stu-id="d05db-144">General</span></span><br> <span data-ttu-id="d05db-145">media</span><span class="sxs-lookup"><span data-stu-id="d05db-145">media</span></span><br> <span data-ttu-id="d05db-146">strömning</span><span class="sxs-lookup"><span data-stu-id="d05db-146">streaming</span></span> | <span data-ttu-id="d05db-147">Video-on-demand</span><span class="sxs-lookup"><span data-stu-id="d05db-147">Video-on-demand</span></span> <br><span data-ttu-id="d05db-148">media</span><span class="sxs-lookup"><span data-stu-id="d05db-148">media</span></span><br> <span data-ttu-id="d05db-149">strömning</span><span class="sxs-lookup"><span data-stu-id="d05db-149">streaming</span></span>  
--- | --- | --- | ---
<span data-ttu-id="d05db-150">Cachelagring: positivt</span><span class="sxs-lookup"><span data-stu-id="d05db-150">Caching: Positive</span></span> <br> <span data-ttu-id="d05db-151">HTTP 200, 203, 300,</span><span class="sxs-lookup"><span data-stu-id="d05db-151">HTTP 200, 203, 300,</span></span> <br> <span data-ttu-id="d05db-152">301, 302 och 410</span><span class="sxs-lookup"><span data-stu-id="d05db-152">301, 302, and 410</span></span> | <span data-ttu-id="d05db-153">7 dagar</span><span class="sxs-lookup"><span data-stu-id="d05db-153">7 days</span></span> |<span data-ttu-id="d05db-154">365 dagar</span><span class="sxs-lookup"><span data-stu-id="d05db-154">365 days</span></span> | <span data-ttu-id="d05db-155">365 dagar</span><span class="sxs-lookup"><span data-stu-id="d05db-155">365 days</span></span>   
<span data-ttu-id="d05db-156">Cachelagring: negativt</span><span class="sxs-lookup"><span data-stu-id="d05db-156">Caching: Negative</span></span> <br> <span data-ttu-id="d05db-157">HTTP 204, 305, 404,</span><span class="sxs-lookup"><span data-stu-id="d05db-157">HTTP 204, 305, 404,</span></span> <br> <span data-ttu-id="d05db-158">och 405</span><span class="sxs-lookup"><span data-stu-id="d05db-158">and 405</span></span> | <span data-ttu-id="d05db-159">Ingen</span><span class="sxs-lookup"><span data-stu-id="d05db-159">None</span></span> | <span data-ttu-id="d05db-160">1 sekund</span><span class="sxs-lookup"><span data-stu-id="d05db-160">1 second</span></span> | <span data-ttu-id="d05db-161">1 sekund</span><span class="sxs-lookup"><span data-stu-id="d05db-161">1 second</span></span>
 
### <a name="deal-with-origin-failure"></a><span data-ttu-id="d05db-162">Hantera ursprung fel</span><span class="sxs-lookup"><span data-stu-id="d05db-162">Deal with origin failure</span></span>  

<span data-ttu-id="d05db-163">Allmän media och leverans av video-on-demand media också ha ursprung timeout och ett försök logga baserat på bästa praxis för mönster av vanliga begäranden.</span><span class="sxs-lookup"><span data-stu-id="d05db-163">General media delivery and video-on-demand media delivery also have origin time-out and a retry log based on best practices for typical request patterns.</span></span> <span data-ttu-id="d05db-164">Till exempel eftersom allmänna media levereras för live och leverans av video-on-demand media, använder en kortare timeout på grund av toohello tidskritiska uppbyggnad direktuppspelad.</span><span class="sxs-lookup"><span data-stu-id="d05db-164">For example, because general media delivery is for live and video-on-demand media delivery, it uses a shorter connection time-out due toohello time-sensitive nature of live streaming.</span></span>

<span data-ttu-id="d05db-165">När en anslutning timeout återförsök hello CDN flera gånger innan den skickar en ”504 - Gateway-Timeout” fel toohello klient.</span><span class="sxs-lookup"><span data-stu-id="d05db-165">When a connection times out, hello CDN retries a number of times before it sends a "504 - Gateway Timeout" error toohello client.</span></span> 

<span data-ttu-id="d05db-166">När en fil matchar hello typ och storlek villkor fillistan, använder hello CDN hello beteendet för direktuppspelning.</span><span class="sxs-lookup"><span data-stu-id="d05db-166">When a file matches hello file type and size conditions list, hello CDN uses hello behavior for media streaming.</span></span> <span data-ttu-id="d05db-167">I annat fall används allmänt web leverans.</span><span class="sxs-lookup"><span data-stu-id="d05db-167">Otherwise, it uses general web delivery.</span></span>
   
### <a name="conditions-for-media-streaming-optimization"></a><span data-ttu-id="d05db-168">Villkor för direktuppspelning optimering</span><span class="sxs-lookup"><span data-stu-id="d05db-168">Conditions for media streaming optimization</span></span> 

<span data-ttu-id="d05db-169">hello i den följande tabellen listas hello uppsättning villkor toobe nöjd för direktuppspelning optimering:</span><span class="sxs-lookup"><span data-stu-id="d05db-169">hello following table lists hello set of criteria toobe satisfied for media streaming optimization:</span></span> 
 
<span data-ttu-id="d05db-170">Strömmande typer som stöds</span><span class="sxs-lookup"><span data-stu-id="d05db-170">Supported streaming types</span></span> | <span data-ttu-id="d05db-171">Filnamnstillägg</span><span class="sxs-lookup"><span data-stu-id="d05db-171">File extensions</span></span>  
--- | ---  
<span data-ttu-id="d05db-172">Apple HLS</span><span class="sxs-lookup"><span data-stu-id="d05db-172">Apple HLS</span></span> | <span data-ttu-id="d05db-173">m3u8, m3u, m3ub, nyckel, ts, aac</span><span class="sxs-lookup"><span data-stu-id="d05db-173">m3u8, m3u, m3ub, key, ts, aac</span></span>
<span data-ttu-id="d05db-174">Adobe hårddiskar</span><span class="sxs-lookup"><span data-stu-id="d05db-174">Adobe HDS</span></span> | <span data-ttu-id="d05db-175">f4m, f4x, drmmeta, bootstrap, f4f,</span><span class="sxs-lookup"><span data-stu-id="d05db-175">f4m, f4x, drmmeta, bootstrap, f4f,</span></span><br><span data-ttu-id="d05db-176">Godtogs Fragm URL-struktur</span><span class="sxs-lookup"><span data-stu-id="d05db-176">Seg-Frag URL structure</span></span> <br> <span data-ttu-id="d05db-177">(matchar regex: ^(/.*)Seq(\d+)-Frag(\d+)</span><span class="sxs-lookup"><span data-stu-id="d05db-177">(matching regex: ^(/.*)Seq(\d+)-Frag(\d+)</span></span>
<span data-ttu-id="d05db-178">STRECK</span><span class="sxs-lookup"><span data-stu-id="d05db-178">DASH</span></span> | <span data-ttu-id="d05db-179">MPD, streck, divx, ismv, m4s, m4v, mp4, mp4v,</span><span class="sxs-lookup"><span data-stu-id="d05db-179">mpd, dash, divx, ismv, m4s, m4v, mp4, mp4v,</span></span> <br> <span data-ttu-id="d05db-180">sidx, webm, mp4a, m4a, isma</span><span class="sxs-lookup"><span data-stu-id="d05db-180">sidx, webm, mp4a, m4a, isma</span></span>
<span data-ttu-id="d05db-181">Smooth streaming</span><span class="sxs-lookup"><span data-stu-id="d05db-181">Smooth streaming</span></span> | <span data-ttu-id="d05db-182">manifest-, fragment/QualityLevels / /</span><span class="sxs-lookup"><span data-stu-id="d05db-182">/manifest/,/QualityLevels/Fragments/</span></span>
  

 
## <a name="media-streaming-optimizations-for-hello-azure-content-delivery-network-from-verizon"></a><span data-ttu-id="d05db-183">Direktuppspelning optimeringar för hello Azure Content Delivery Network från Verizon</span><span class="sxs-lookup"><span data-stu-id="d05db-183">Media streaming optimizations for hello Azure Content Delivery Network from Verizon</span></span>

<span data-ttu-id="d05db-184">hello Azure Content Delivery Network från Verizon levererar strömmande media tillgångar direkt med hjälp av hello allmänna web Leveranstyp optimering.</span><span class="sxs-lookup"><span data-stu-id="d05db-184">hello Azure Content Delivery Network from Verizon delivers streaming media assets directly by using hello general web delivery optimization type.</span></span> <span data-ttu-id="d05db-185">Några funktioner på hello CDN att direkt leverera media tillgångar som standard.</span><span class="sxs-lookup"><span data-stu-id="d05db-185">A few features on hello CDN directly assist in delivering media assets by default.</span></span>

### <a name="partial-cache-sharing"></a><span data-ttu-id="d05db-186">Partiell cache delning</span><span class="sxs-lookup"><span data-stu-id="d05db-186">Partial cache sharing</span></span>

<span data-ttu-id="d05db-187">Partiell cache delar kan hello CDN tooserve delvis cachelagrat innehåll toonew begäranden.</span><span class="sxs-lookup"><span data-stu-id="d05db-187">Partial cache sharing allows hello CDN tooserve partially cached content toonew requests.</span></span> <span data-ttu-id="d05db-188">Till exempel om hello första begäran toohello CDN resulterar i en cache-miss, hello begäran skickas toohello ursprung.</span><span class="sxs-lookup"><span data-stu-id="d05db-188">For example, if hello first request toohello CDN results in a cache miss, hello request is sent toohello origin.</span></span> <span data-ttu-id="d05db-189">Även om den här ofullständigt innehåll läses in i hello CDN cache, kan andra begäranden toohello CDN börja hämta dessa data.</span><span class="sxs-lookup"><span data-stu-id="d05db-189">Although this incomplete content is loaded into hello CDN cache, other requests toohello CDN can start getting this data.</span></span> 

### <a name="cache-fill-wait-time"></a><span data-ttu-id="d05db-190">Väntetiden för cache fill</span><span class="sxs-lookup"><span data-stu-id="d05db-190">Cache fill wait time</span></span>

 <span data-ttu-id="d05db-191">hello fill vänta tid cachefunktionen tvingar hello edge server toohold alla efterföljande begäranden om hello samma resurs förrän huvuden som tas emot från hello ursprungsservern HTTP-svar.</span><span class="sxs-lookup"><span data-stu-id="d05db-191">hello cache fill wait time feature forces hello edge server toohold any subsequent requests for hello same resource until HTTP response headers arrive from hello origin server.</span></span> <span data-ttu-id="d05db-192">Om HTTP-svarshuvuden hello ursprung anländer innan hello timer upphör att gälla, visas alla begäranden som har spärra utanför hello växande cache.</span><span class="sxs-lookup"><span data-stu-id="d05db-192">If HTTP response headers from hello origin  arrive before hello timer expires, all requests that were put on hold are served out of hello growing cache.</span></span> <span data-ttu-id="d05db-193">Vid hello samma tid, hello cache fylls med hjälp av data från hello ursprung.</span><span class="sxs-lookup"><span data-stu-id="d05db-193">At hello same time, hello cache is filled by data from hello origin.</span></span> <span data-ttu-id="d05db-194">Väntetiden för hello cache fill är som standard too3 000 millisekunder.</span><span class="sxs-lookup"><span data-stu-id="d05db-194">By default, hello cache fill wait time is set too3,000 milliseconds.</span></span> 


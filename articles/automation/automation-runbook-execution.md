---
title: "Runbook-körningen i Azure Automation | Microsoft Docs"
description: "Innehåller information om hur en runbook i Azure Automation bearbetas."
services: automation
documentationcenter: 
author: mgoedtel
manager: jwhit
editor: tysonn
ms.assetid: d10c8ce2-2c0b-4ea7-ba3c-d20e09b2c9ca
ms.service: automation
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 08/17/2017
ms.author: bwren
ms.openlocfilehash: 14f923e3f08dd3b286218ae56012ce14edcc4058
ms.sourcegitcommit: 18ad9bc049589c8e44ed277f8f43dcaa483f3339
ms.translationtype: MT
ms.contentlocale: sv-SE
ms.lasthandoff: 08/29/2017
---
# <a name="runbook-execution-in-azure-automation"></a><span data-ttu-id="7c120-103">Runbook-körningen i Azure Automation</span><span class="sxs-lookup"><span data-stu-id="7c120-103">Runbook execution in Azure Automation</span></span>
<span data-ttu-id="7c120-104">När du startar en runbook i Azure Automation skapas ett jobb.</span><span class="sxs-lookup"><span data-stu-id="7c120-104">When you start a runbook in Azure Automation, a job is created.</span></span> <span data-ttu-id="7c120-105">Ett jobb är en enskild körningsinstans av en runbook.</span><span class="sxs-lookup"><span data-stu-id="7c120-105">A job is a single execution instance of a runbook.</span></span> <span data-ttu-id="7c120-106">En Azure Automation arbetare ska köras varje jobb.</span><span class="sxs-lookup"><span data-stu-id="7c120-106">An Azure Automation worker is assigned to run each job.</span></span> <span data-ttu-id="7c120-107">När anställda delas av flera Azure-konton, är jobb från olika Automation-konton isolerade från varandra.</span><span class="sxs-lookup"><span data-stu-id="7c120-107">While workers are shared by multiple Azure accounts, jobs from different Automation accounts are isolated from one another.</span></span> <span data-ttu-id="7c120-108">Du kan inte har styra vilken Worker services-begäran för jobbet.</span><span class="sxs-lookup"><span data-stu-id="7c120-108">You do not have control over which worker services the request for your job.</span></span>  <span data-ttu-id="7c120-109">En enstaka runbook kan ha flera jobb körs samtidigt.</span><span class="sxs-lookup"><span data-stu-id="7c120-109">A single runbook can have multiple jobs running at one time.</span></span> <span data-ttu-id="7c120-110">När du visar listan över runbooks i Azure-portalen visar status för alla jobb som har startats för varje runbook.</span><span class="sxs-lookup"><span data-stu-id="7c120-110">When you view the list of runbooks in the Azure portal, it lists the status of all jobs that were started for each runbook.</span></span> <span data-ttu-id="7c120-111">Du kan visa listan över jobb för varje runbook för att kunna spåra statusen för var och en.</span><span class="sxs-lookup"><span data-stu-id="7c120-111">You can view the list of jobs for each runbook in order to track the status of each.</span></span> <span data-ttu-id="7c120-112">En beskrivning av olika jobbstatus finns [jobbstatus](#job-statuses).</span><span class="sxs-lookup"><span data-stu-id="7c120-112">For a description of the different job statuses, see [Job Statuses](#job-statuses).</span></span>

<span data-ttu-id="7c120-113">Följande diagram visar livscykeln för ett runbook-jobb för [grafiska runbook-flöden](automation-runbook-types.md#graphical-runbooks) och [PowerShell-arbetsflöde runbooks](automation-runbook-types.md#powershell-workflow-runbooks).</span><span class="sxs-lookup"><span data-stu-id="7c120-113">The following diagram shows the lifecycle of a runbook job for [Graphical runbooks](automation-runbook-types.md#graphical-runbooks) and [PowerShell Workflow runbooks](automation-runbook-types.md#powershell-workflow-runbooks).</span></span>

![Jobbstatus - PowerShell-arbetsflöde](./media/automation-runbook-execution/job-statuses.png)

<span data-ttu-id="7c120-115">Följande diagram visar livscykeln för ett runbook-jobb för [PowerShell runbooks](automation-runbook-types.md#powershell-runbooks).</span><span class="sxs-lookup"><span data-stu-id="7c120-115">The following diagram shows the lifecycle of a runbook job for [PowerShell runbooks](automation-runbook-types.md#powershell-runbooks).</span></span>

![Jobbstatus - PowerShell-skript](./media/automation-runbook-execution/job-statuses-script.png)

<span data-ttu-id="7c120-117">Jobb har åtkomst till resurserna i Azure genom att göra en anslutning till din Azure-prenumeration.</span><span class="sxs-lookup"><span data-stu-id="7c120-117">Your jobs have access to your Azure resources by making a connection to your Azure subscription.</span></span> <span data-ttu-id="7c120-118">De har endast åtkomst till resurser i ditt datacenter om resurserna är tillgängliga från det offentliga molnet.</span><span class="sxs-lookup"><span data-stu-id="7c120-118">They only have access to resources in your data center if those resources are accessible from the public cloud.</span></span>

## <a name="job-statuses"></a><span data-ttu-id="7c120-119">Jobbstatus</span><span class="sxs-lookup"><span data-stu-id="7c120-119">Job statuses</span></span>
<span data-ttu-id="7c120-120">I följande tabell beskrivs de olika statuslägen som är möjliga för ett jobb.</span><span class="sxs-lookup"><span data-stu-id="7c120-120">The following table describes the different statuses that are possible for a job.</span></span>

| <span data-ttu-id="7c120-121">Status</span><span class="sxs-lookup"><span data-stu-id="7c120-121">Status</span></span> | <span data-ttu-id="7c120-122">Beskrivning</span><span class="sxs-lookup"><span data-stu-id="7c120-122">Description</span></span> |
|:--- |:--- |
| <span data-ttu-id="7c120-123">Slutfört</span><span class="sxs-lookup"><span data-stu-id="7c120-123">Completed</span></span> |<span data-ttu-id="7c120-124">Jobbet har slutförts.</span><span class="sxs-lookup"><span data-stu-id="7c120-124">The job completed successfully.</span></span> |
| <span data-ttu-id="7c120-125">Det gick inte</span><span class="sxs-lookup"><span data-stu-id="7c120-125">Failed</span></span> |<span data-ttu-id="7c120-126">För [grafisk och PowerShell-arbetsflöde runbooks](automation-runbook-types.md), det gick inte att kompilera runbook.</span><span class="sxs-lookup"><span data-stu-id="7c120-126">For [Graphical and PowerShell Workflow runbooks](automation-runbook-types.md), the runbook failed to compile.</span></span>  <span data-ttu-id="7c120-127">För [PowerShell-skript runbooks](automation-runbook-types.md), det gick inte att starta runbook eller jobbet påträffade ett undantag.</span><span class="sxs-lookup"><span data-stu-id="7c120-127">For [PowerShell Script runbooks](automation-runbook-types.md), the runbook failed to start or the job encountered an exception.</span></span> |
| <span data-ttu-id="7c120-128">Misslyckades, väntar på resurser</span><span class="sxs-lookup"><span data-stu-id="7c120-128">Failed, waiting for resources</span></span> |<span data-ttu-id="7c120-129">Jobbet misslyckades eftersom den nått den [fördelning](#fairshare) begränsa tre gånger och startas från samma kontrollpunkten eller från början av runbooken varje gång.</span><span class="sxs-lookup"><span data-stu-id="7c120-129">The job failed because it reached the [fair share](#fairshare) limit three times and started from the same checkpoint or from the start of the runbook each time.</span></span> |
| <span data-ttu-id="7c120-130">I kö</span><span class="sxs-lookup"><span data-stu-id="7c120-130">Queued</span></span> |<span data-ttu-id="7c120-131">Jobbet väntar på resurser på en Automation arbetare blir tillgängliga så att den kan startas.</span><span class="sxs-lookup"><span data-stu-id="7c120-131">The job is waiting for resources on an Automation worker to come available so that it can be started.</span></span> |
| <span data-ttu-id="7c120-132">Startar</span><span class="sxs-lookup"><span data-stu-id="7c120-132">Starting</span></span> |<span data-ttu-id="7c120-133">Jobbet har tilldelats en arbetare och systemet håller starta den.</span><span class="sxs-lookup"><span data-stu-id="7c120-133">The job has been assigned to a worker, and the system is in the process of starting it.</span></span> |
| <span data-ttu-id="7c120-134">Återuppta</span><span class="sxs-lookup"><span data-stu-id="7c120-134">Resuming</span></span> |<span data-ttu-id="7c120-135">Systemet håller på att återuppta jobbet efter det pausades.</span><span class="sxs-lookup"><span data-stu-id="7c120-135">The system is in the process of resuming the job after it was suspended.</span></span> |
| <span data-ttu-id="7c120-136">Körs</span><span class="sxs-lookup"><span data-stu-id="7c120-136">Running</span></span> |<span data-ttu-id="7c120-137">Jobbet körs.</span><span class="sxs-lookup"><span data-stu-id="7c120-137">The job is running.</span></span> |
| <span data-ttu-id="7c120-138">Kör, väntar på resurser</span><span class="sxs-lookup"><span data-stu-id="7c120-138">Running, waiting for resources</span></span> |<span data-ttu-id="7c120-139">Jobbet har inaktiverats eftersom den nådde den [fördelning](#fairshare) gränsen.</span><span class="sxs-lookup"><span data-stu-id="7c120-139">The job has been unloaded because it reached the [fair share](#fairshare) limit.</span></span> <span data-ttu-id="7c120-140">Återupptas från den senaste kontrollpunkten inom kort.</span><span class="sxs-lookup"><span data-stu-id="7c120-140">It resumes shortly from its last checkpoint.</span></span> |
| <span data-ttu-id="7c120-141">Stoppad</span><span class="sxs-lookup"><span data-stu-id="7c120-141">Stopped</span></span> |<span data-ttu-id="7c120-142">Jobbet stoppades av användaren innan den slutfördes.</span><span class="sxs-lookup"><span data-stu-id="7c120-142">The job was stopped by the user before it was completed.</span></span> |
| <span data-ttu-id="7c120-143">Stoppas</span><span class="sxs-lookup"><span data-stu-id="7c120-143">Stopping</span></span> |<span data-ttu-id="7c120-144">Systemet håller på att stoppa jobbet.</span><span class="sxs-lookup"><span data-stu-id="7c120-144">The system is in the process of stopping the job.</span></span> |
| <span data-ttu-id="7c120-145">avbruten</span><span class="sxs-lookup"><span data-stu-id="7c120-145">Suspended</span></span> |<span data-ttu-id="7c120-146">Jobbet pausades av användaren, datorn eller ett kommando i runbook.</span><span class="sxs-lookup"><span data-stu-id="7c120-146">The job was suspended by the user, by the system, or by a command in the runbook.</span></span> <span data-ttu-id="7c120-147">Ett jobb som pausats kan startas igen och återuppta från den senaste kontrollpunkten eller från början av runbooken om det inte har kontrollpunkter.</span><span class="sxs-lookup"><span data-stu-id="7c120-147">A job that is suspended can be started again and resume from its last checkpoint or from the beginning of the runbook if it doesn't have checkpoints.</span></span> <span data-ttu-id="7c120-148">Runbooken pausas bara av systemet när ett undantag inträffar.</span><span class="sxs-lookup"><span data-stu-id="7c120-148">The runbook will only be suspended by the system when an exception occurs.</span></span> <span data-ttu-id="7c120-149">ErrorActionPreference är som standard **Fortsätt**, vilket innebär att jobbet körs på ett fel.</span><span class="sxs-lookup"><span data-stu-id="7c120-149">By default, ErrorActionPreference is set to **Continue**, meaning that the job keeps running on an error.</span></span> <span data-ttu-id="7c120-150">Om inställningsvariabeln är **stoppa**, och sedan jobbet pausar på ett fel.</span><span class="sxs-lookup"><span data-stu-id="7c120-150">If this preference variable is set to **Stop**, then the job suspends on an error.</span></span>  <span data-ttu-id="7c120-151">Gäller för [grafisk och PowerShell-arbetsflöde runbooks](automation-runbook-types.md) endast.</span><span class="sxs-lookup"><span data-stu-id="7c120-151">Applies to [Graphical and PowerShell Workflow runbooks](automation-runbook-types.md) only.</span></span> |
| <span data-ttu-id="7c120-152">Pausa</span><span class="sxs-lookup"><span data-stu-id="7c120-152">Suspending</span></span> |<span data-ttu-id="7c120-153">Systemet försöker att pausa arbetet på begäran av användaren.</span><span class="sxs-lookup"><span data-stu-id="7c120-153">The system is attempting to suspend the job at the request of the user.</span></span> <span data-ttu-id="7c120-154">Runbooken måste nå nästa kontrollpunkt innan den kan pausas.</span><span class="sxs-lookup"><span data-stu-id="7c120-154">The runbook must reach its next checkpoint before it can be suspended.</span></span> <span data-ttu-id="7c120-155">Om den redan passerat den sista kontrollpunkten sedan är klar innan den kan pausas.</span><span class="sxs-lookup"><span data-stu-id="7c120-155">If it already passed its last checkpoint, then it completes before it can be suspended.</span></span>  <span data-ttu-id="7c120-156">Gäller för [grafisk och PowerShell-arbetsflöde runbooks](automation-runbook-types.md) endast.</span><span class="sxs-lookup"><span data-stu-id="7c120-156">Applies to [Graphical and PowerShell Workflow runbooks](automation-runbook-types.md) only.</span></span> |

## <a name="viewing-job-status-from-the-azure-portal"></a><span data-ttu-id="7c120-157">Visa jobbstatus från Azure-portalen</span><span class="sxs-lookup"><span data-stu-id="7c120-157">Viewing job status from the Azure portal</span></span>
<span data-ttu-id="7c120-158">Du kan visa en sammanfattande status för alla runbook-jobb eller visa detaljer om en specifik runbook-jobb på Azure-portalen eller genom att konfigurera integrering med Microsoft Operations Management Suite (OMS) logganalys-arbetsytan att vidarebefordra runbook jobbstatus och jobb dataströmmar.</span><span class="sxs-lookup"><span data-stu-id="7c120-158">You can view a summarized status of all runbook jobs or drill into details of a specific runbook job in the Azure portal or by configuring integration with your Microsoft Operations Management Suite (OMS) Log Analytics workspace to forward runbook job status and job streams.</span></span>  <span data-ttu-id="7c120-159">Mer information om hur du integrerar med OMS Log Analytics finns [vidarebefordra jobbstatus och jobbet strömmar från Automation till logganalys (OMS)](automation-manage-send-joblogs-log-analytics.md).</span><span class="sxs-lookup"><span data-stu-id="7c120-159">For more information about integrating with OMS Log Analytics, see [Forward job status and job streams from Automation to Log Analytics (OMS)](automation-manage-send-joblogs-log-analytics.md).</span></span>  

### <a name="automation-runbook-jobs-summary"></a><span data-ttu-id="7c120-160">Automation runbook-jobb sammanfattning</span><span class="sxs-lookup"><span data-stu-id="7c120-160">Automation runbook jobs summary</span></span>
<span data-ttu-id="7c120-161">Till höger om det valda Automation-kontot, visas en sammanfattning av alla runbook-jobb för ett valt Automation-konto under **jobbet statistik** panelen.</span><span class="sxs-lookup"><span data-stu-id="7c120-161">On the right of your selected Automation account, you can see a summary of all of the runbook jobs for a selected Automation account under **Job Statistics** tile.</span></span><br><br> <span data-ttu-id="7c120-162">![Jobbet statistik panelen](./media/automation-runbook-execution/automation-account-job-status-summary.png).</span><span class="sxs-lookup"><span data-stu-id="7c120-162">![Job Statistics tile](./media/automation-runbook-execution/automation-account-job-status-summary.png).</span></span><br> <span data-ttu-id="7c120-163">Den här panelen visar antalet och grafisk representation av jobbstatus för alla jobb som körs.</span><span class="sxs-lookup"><span data-stu-id="7c120-163">This tile displays a count and graphical representation of the job status for all jobs executed.</span></span>  

<span data-ttu-id="7c120-164">Klickar du på ikonen visas den **jobb** som innehåller en sammanfattande lista över alla jobb som körs, med status, jobbkörningen och start och slutförande gånger.</span><span class="sxs-lookup"><span data-stu-id="7c120-164">Clicking on the tile presents the **Jobs** blade, which includes a summarized list of all jobs executed, with status, job execution, and start and completion times.</span></span><br><br> <span data-ttu-id="7c120-165">![Jobb-bladet för Automation-konto](./media/automation-runbook-execution/automation-account-jobs-status-blade.png)</span><span class="sxs-lookup"><span data-stu-id="7c120-165">![Automation account Jobs blade](./media/automation-runbook-execution/automation-account-jobs-status-blade.png)</span></span><br><br>  <span data-ttu-id="7c120-166">Du kan filtrera listan över jobb genom att välja **filtrera jobb** och filtrera på en viss runbook jobbstatus, eller från den nedrullningsbara listan datum/tid-intervall för att söka i.</span><span class="sxs-lookup"><span data-stu-id="7c120-166">You can filter the list of jobs by selecting **Filter jobs**  and filter on a specific runbook, job status, or from the drop-down list, the date/time range to search within.</span></span><br><br> <span data-ttu-id="7c120-167">![Filtrera jobbstatus](./media/automation-runbook-execution/automation-account-jobs-filter.png)</span><span class="sxs-lookup"><span data-stu-id="7c120-167">![Filter Job status](./media/automation-runbook-execution/automation-account-jobs-filter.png)</span></span>

<span data-ttu-id="7c120-168">Alternativt, du kan visa jobb sammanfattningsinformation för en viss runbook genom att välja den runbook från den **Runbooks** bladet i Automation-konto och välj sedan den **jobb** panelen.</span><span class="sxs-lookup"><span data-stu-id="7c120-168">Alternatively, you can view job summary details for a specific runbook by selecting that runbook from the **Runbooks** blade in your Automation account, and then select the **Jobs** tile.</span></span>  <span data-ttu-id="7c120-169">Detta innebär det **jobb** bladet, och därifrån kan du klicka på Jobbposten att visa detaljer och effekt.</span><span class="sxs-lookup"><span data-stu-id="7c120-169">This presents the **Jobs** blade, and from there you can click on the job record to view its detail and output.</span></span><br><br> <span data-ttu-id="7c120-170">![Jobb-bladet för Automation-konto](./media/automation-runbook-execution/automation-runbook-job-summary-blade.png)</span><span class="sxs-lookup"><span data-stu-id="7c120-170">![Automation account Jobs blade](./media/automation-runbook-execution/automation-runbook-job-summary-blade.png)</span></span><br> 

### <a name="job-summary"></a><span data-ttu-id="7c120-171">Jobbsammanfattning</span><span class="sxs-lookup"><span data-stu-id="7c120-171">Job Summary</span></span>
<span data-ttu-id="7c120-172">Du kan visa en lista över alla jobb som har skapats för en viss runbook och deras senaste status.</span><span class="sxs-lookup"><span data-stu-id="7c120-172">You can view a list of all of the jobs that have been created for a particular runbook and their most recent status.</span></span> <span data-ttu-id="7c120-173">Du kan filtrera listan efter jobbstatus och datumintervallet för senaste ändring i jobbet.</span><span class="sxs-lookup"><span data-stu-id="7c120-173">You can filter this list by job status and the range of dates for the last change to the job.</span></span> <span data-ttu-id="7c120-174">Om du vill visa detaljerad information och utdata, klickar du på namnet på ett jobb.</span><span class="sxs-lookup"><span data-stu-id="7c120-174">To view its detailed information and output, click on the name of a job.</span></span> <span data-ttu-id="7c120-175">Detaljerad vy av jobbet innehåller värden för runbookparametrar som gavs av jobbet.</span><span class="sxs-lookup"><span data-stu-id="7c120-175">The detailed view of the job includes the values for the runbook parameters that were provided to that job.</span></span>

<span data-ttu-id="7c120-176">Du kan använda följande steg för att visa jobb för en runbook.</span><span class="sxs-lookup"><span data-stu-id="7c120-176">You can use the following steps to view the jobs for a runbook.</span></span>

1. <span data-ttu-id="7c120-177">Välj i Azure-portalen **Automation** och välj sedan namnet på ett Automation-konto.</span><span class="sxs-lookup"><span data-stu-id="7c120-177">In the Azure portal, select **Automation** and then select the name of an Automation account.</span></span>
2. <span data-ttu-id="7c120-178">Hubben, Välj **Runbooks** och klicka sedan på den **Runbooks** bladet Välj en runbook i listan.</span><span class="sxs-lookup"><span data-stu-id="7c120-178">From the hub, select **Runbooks** and then on the **Runbooks** blade select a runbook from the list.</span></span>
3. <span data-ttu-id="7c120-179">Klicka på bladet för den valda runbooken i **jobb** panelen.</span><span class="sxs-lookup"><span data-stu-id="7c120-179">On the blade for the selected runbook, click the **Jobs** tile.</span></span>
4. <span data-ttu-id="7c120-180">Klicka på ett av jobben i listan och på informationsbladet för runbook-jobb kan du visa detaljer och effekt.</span><span class="sxs-lookup"><span data-stu-id="7c120-180">Click on one of the jobs in the list and on the runbook job details blade you can view its detail and output.</span></span>

## <a name="retrieving-job-status-using-windows-powershell"></a><span data-ttu-id="7c120-181">Hämta jobbstatus med Windows PowerShell</span><span class="sxs-lookup"><span data-stu-id="7c120-181">Retrieving job status using Windows PowerShell</span></span>
<span data-ttu-id="7c120-182">Du kan använda den [Get-AzureRmAutomationJob](https://msdn.microsoft.com/library/mt619440.aspx) att hämta jobb som skapats för en runbook och detaljerna för ett specifikt jobb.</span><span class="sxs-lookup"><span data-stu-id="7c120-182">You can use the [Get-AzureRmAutomationJob](https://msdn.microsoft.com/library/mt619440.aspx) to retrieve the jobs created for a runbook and the details of a particular job.</span></span> <span data-ttu-id="7c120-183">Om du startar en runbook med Windows PowerShell med [Start AzureRmAutomationRunbook](https://msdn.microsoft.com/library/mt603661.aspx), och sedan returnerar det resulterande jobbet.</span><span class="sxs-lookup"><span data-stu-id="7c120-183">If you start a runbook with Windows PowerShell using [Start-AzureRmAutomationRunbook](https://msdn.microsoft.com/library/mt603661.aspx), then it returns the resulting job.</span></span> <span data-ttu-id="7c120-184">Använd [Get-AzureRmAutomationJob](https://msdn.microsoft.com/library/mt619440.aspx)utdata för att få ett jobbs effekt.</span><span class="sxs-lookup"><span data-stu-id="7c120-184">Use [Get-AzureRmAutomationJob](https://msdn.microsoft.com/library/mt619440.aspx)Output to get a job’s output.</span></span>

<span data-ttu-id="7c120-185">Följande exempelkommandon hämtar det senaste jobbet för en exempel-runbook och visar dess status, de angivna värdena för runbook-parametrar och utdata från jobbet.</span><span class="sxs-lookup"><span data-stu-id="7c120-185">The following sample commands retrieve the last job for a sample runbook and displays its status, the values provided for the runbook parameters, and the output from the job.</span></span>

    $job = (Get-AzureRmAutomationJob –AutomationAccountName "MyAutomationAccount" `
    –RunbookName "Test-Runbook" -ResourceGroupName "ResourceGroup01" | sort LastModifiedDate –desc)[0]
    $job.Status
    $job.JobParameters
    Get-AzureRmAutomationJobOutput -ResourceGroupName "ResourceGroup01" `
    –AutomationAccountName "MyAutomationAcct" -Id $job.JobId –Stream Output

## <a name="fair-share"></a><span data-ttu-id="7c120-186">Fördelning</span><span class="sxs-lookup"><span data-stu-id="7c120-186">Fair share</span></span>
<span data-ttu-id="7c120-187">För att kunna dela resurser med alla runbooks i molnet, inaktiveras Azure Automation tillfälligt jobb när den har körts under tre timmar.</span><span class="sxs-lookup"><span data-stu-id="7c120-187">In order to share resources among all runbooks in the cloud, Azure Automation will temporarily unload any job after it has been running for three hours.</span></span>  <span data-ttu-id="7c120-188">Under denna tid jobb för [PowerShell-baserade runbooks](automation-runbook-types.md#powershell-runbooks) stoppas och startas inte.</span><span class="sxs-lookup"><span data-stu-id="7c120-188">During this time, jobs for [PowerShell-based runbooks](automation-runbook-types.md#powershell-runbooks) are stopped and will not be restarted.</span></span>  <span data-ttu-id="7c120-189">Status visas i jobbet **stoppad**.</span><span class="sxs-lookup"><span data-stu-id="7c120-189">The job status shows **Stopped**.</span></span>  <span data-ttu-id="7c120-190">Den här typen av runbook är alltid om från början, eftersom de inte stöder kontrollpunkter.</span><span class="sxs-lookup"><span data-stu-id="7c120-190">This type of runbook is always restarted from the beginning since they don't support checkpoints.</span></span>  

<span data-ttu-id="7c120-191">[PowerShell-Arbetsflödesbaserade runbooks](automation-runbook-types.md#powershell-workflow-runbooks) kommer att återupptas från deras senaste [kontrollpunkt](https://docs.microsoft.com/system-center/sma/overview-powershell-workflows#bk_Checkpoints).</span><span class="sxs-lookup"><span data-stu-id="7c120-191">[PowerShell-Workflow-based runbooks](automation-runbook-types.md#powershell-workflow-runbooks) will be resumed from their last [checkpoint](https://docs.microsoft.com/system-center/sma/overview-powershell-workflows#bk_Checkpoints).</span></span>  <span data-ttu-id="7c120-192">När du har kört tre timmar, runbook-jobbet kommer att inaktiveras av tjänsten och dess status visas **körs, väntar på resurser**.</span><span class="sxs-lookup"><span data-stu-id="7c120-192">After running three hours, the runbook job will be suspended by the service and its status shows **Running, waiting for resources**.</span></span>  <span data-ttu-id="7c120-193">När en sandbox blir tillgänglig ska runbook startas om automatiskt av Automation-tjänsten och återupptar från den senaste kontrollpunkten.</span><span class="sxs-lookup"><span data-stu-id="7c120-193">When a sandbox becomes available, the runbook will be automatically restarted by the Automation service and resumes from the last checkpoint.</span></span>  <span data-ttu-id="7c120-194">Detta är normalt PowerShell-arbetsflöde att pausa/restart.</span><span class="sxs-lookup"><span data-stu-id="7c120-194">This is normal PowerShell-Workflow behavior for suspend/restart.</span></span>  <span data-ttu-id="7c120-195">Om runbook igen överskrider tre timmars körning kan processen upprepas, upp till tre gånger.</span><span class="sxs-lookup"><span data-stu-id="7c120-195">If the runbook again exceeds three hours of runtime, the process repeats, up to three times.</span></span>  <span data-ttu-id="7c120-196">Efter den tredje omstarten om runbook fortfarande inte har slutförts i tre timmar sedan runbook-jobbet misslyckades och jobbstatus visar **misslyckades, väntar på resurser**.</span><span class="sxs-lookup"><span data-stu-id="7c120-196">After the third restart, if the runbook still has not completed in three hours, then the runbook job is failed, and the job status shows **Failed, waiting for resources**.</span></span>  <span data-ttu-id="7c120-197">I det här fallet visas följande undantag med felet.</span><span class="sxs-lookup"><span data-stu-id="7c120-197">In this case, you receive the following exception with the failure.</span></span>

<span data-ttu-id="7c120-198">*Jobbet kan inte fortsätta eftersom det upprepade gånger har avlägsnats från samma kontrollpunkten. Kontrollera att din Runbook utför långvariga åtgärder utan att spara sitt tillstånd.*</span><span class="sxs-lookup"><span data-stu-id="7c120-198">*The job cannot continue running because it was repeatedly evicted from the same checkpoint. Please make sure your Runbook does not perform lengthy operations without persisting its state.*</span></span>

<span data-ttu-id="7c120-199">Detta är att skydda tjänsten från runbooks som körs på obestämd tid utan att slutföra, eftersom de inte kan göra det i nästa kontrollpunkt utan tas bort från minnet igen.</span><span class="sxs-lookup"><span data-stu-id="7c120-199">This is to protect the service from runbooks running indefinitely without completing, as they are not able to make it to the next checkpoint without being unloaded again.</span></span>

<span data-ttu-id="7c120-200">Om runbooken har inga kontrollpunkter eller jobbet hade inte nå den första kontrollpunkten innan tas bort från minnet, startas sedan om från början.</span><span class="sxs-lookup"><span data-stu-id="7c120-200">If the runbook has no checkpoints or the job had not reached the first checkpoint before being unloaded, then it restarts from the beginning.</span></span>  

<span data-ttu-id="7c120-201">När du skapar en runbook bör du kontrollera att tid att köra några aktiviteter mellan två kontrollpunkter inte överskrider tre timmar.</span><span class="sxs-lookup"><span data-stu-id="7c120-201">When you create a runbook, you should ensure that the time to run any activities between two checkpoints does not exceed three hours.</span></span> <span data-ttu-id="7c120-202">Du kan behöva lägga till kontrollpunkter till din runbook så att den inte nå den här gränsen tre timmar eller dela upp långa kör åtgärder.</span><span class="sxs-lookup"><span data-stu-id="7c120-202">You may need to add checkpoints to your runbook to ensure that it does not reach this three hour limit or break up long running operations.</span></span> <span data-ttu-id="7c120-203">Din runbook kan exempelvis utföra en omindexera på en stor SQL-databas.</span><span class="sxs-lookup"><span data-stu-id="7c120-203">For example, your runbook might perform a reindex on a large SQL database.</span></span> <span data-ttu-id="7c120-204">Om den här enda åtgärden inte slutförs inom den rättmätiga del sedan jobbet är minnet och startas om från början.</span><span class="sxs-lookup"><span data-stu-id="7c120-204">If this single operation does not complete within the fair share limit, then the job are unloaded and restarted from the beginning.</span></span> <span data-ttu-id="7c120-205">I det här fallet bör du dela upp omindexera igen i flera steg, till exempel startas en tabell i taget, och infoga en kontrollpunkt efter varje åtgärd så att jobbet återupptas efter den senaste åtgärden har slutförts.</span><span class="sxs-lookup"><span data-stu-id="7c120-205">In this case, you should break up the reindex operation into multiple steps, such as reindexing one table at a time, and then insert a checkpoint after each operation so that the job could resume after the last operation to complete.</span></span>

## <a name="next-steps"></a><span data-ttu-id="7c120-206">Nästa steg</span><span class="sxs-lookup"><span data-stu-id="7c120-206">Next steps</span></span>
* <span data-ttu-id="7c120-207">Läs mer om olika metoder som kan användas för att starta en runbook i Azure Automation i [starta en runbook i Azure Automation](automation-starting-a-runbook.md)</span><span class="sxs-lookup"><span data-stu-id="7c120-207">To learn more about the different methods that can be used to start a runbook in Azure Automation, see [Starting a runbook in Azure Automation](automation-starting-a-runbook.md)</span></span>


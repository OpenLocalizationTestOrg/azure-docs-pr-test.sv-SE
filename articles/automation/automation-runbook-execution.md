---
title: "aaaRunbook körning i Azure Automation | Microsoft Docs"
description: Beskriver hello information om hur en runbook i Azure Automation bearbetas.
services: automation
documentationcenter: 
author: mgoedtel
manager: jwhit
editor: tysonn
ms.assetid: d10c8ce2-2c0b-4ea7-ba3c-d20e09b2c9ca
ms.service: automation
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 08/17/2017
ms.author: bwren
ms.openlocfilehash: bdb535675443353d44640bc7773de3f9dac5e42c
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: sv-SE
ms.lasthandoff: 10/06/2017
---
# <a name="runbook-execution-in-azure-automation"></a><span data-ttu-id="16aa0-103">Runbook-körningen i Azure Automation</span><span class="sxs-lookup"><span data-stu-id="16aa0-103">Runbook execution in Azure Automation</span></span>
<span data-ttu-id="16aa0-104">När du startar en runbook i Azure Automation skapas ett jobb.</span><span class="sxs-lookup"><span data-stu-id="16aa0-104">When you start a runbook in Azure Automation, a job is created.</span></span> <span data-ttu-id="16aa0-105">Ett jobb är en enskild körningsinstans av en runbook.</span><span class="sxs-lookup"><span data-stu-id="16aa0-105">A job is a single execution instance of a runbook.</span></span> <span data-ttu-id="16aa0-106">En Azure Automation arbetare är tilldelad toorun varje jobb.</span><span class="sxs-lookup"><span data-stu-id="16aa0-106">An Azure Automation worker is assigned toorun each job.</span></span> <span data-ttu-id="16aa0-107">När anställda delas av flera Azure-konton, är jobb från olika Automation-konton isolerade från varandra.</span><span class="sxs-lookup"><span data-stu-id="16aa0-107">While workers are shared by multiple Azure accounts, jobs from different Automation accounts are isolated from one another.</span></span> <span data-ttu-id="16aa0-108">Du har inte kontroll över vilka worker services hello-begäran för jobbet.</span><span class="sxs-lookup"><span data-stu-id="16aa0-108">You do not have control over which worker services hello request for your job.</span></span>  <span data-ttu-id="16aa0-109">En enstaka runbook kan ha flera jobb körs samtidigt.</span><span class="sxs-lookup"><span data-stu-id="16aa0-109">A single runbook can have multiple jobs running at one time.</span></span> <span data-ttu-id="16aa0-110">När du visar hello lista med runbooks i hello Azure-portalen visar hello status för alla jobb som har startats för varje runbook.</span><span class="sxs-lookup"><span data-stu-id="16aa0-110">When you view hello list of runbooks in hello Azure portal, it lists hello status of all jobs that were started for each runbook.</span></span> <span data-ttu-id="16aa0-111">Du kan visa hello lista över jobb för varje runbook i ordning tootrack hello status för alla.</span><span class="sxs-lookup"><span data-stu-id="16aa0-111">You can view hello list of jobs for each runbook in order tootrack hello status of each.</span></span> <span data-ttu-id="16aa0-112">En beskrivning av olika jobbstatus för hello finns [jobbstatus](#job-statuses).</span><span class="sxs-lookup"><span data-stu-id="16aa0-112">For a description of hello different job statuses, see [Job Statuses](#job-statuses).</span></span>

<span data-ttu-id="16aa0-113">hello följande diagram visar hello livscykeln för ett runbook-jobb för [grafiska runbook-flöden](automation-runbook-types.md#graphical-runbooks) och [PowerShell-arbetsflöde runbooks](automation-runbook-types.md#powershell-workflow-runbooks).</span><span class="sxs-lookup"><span data-stu-id="16aa0-113">hello following diagram shows hello lifecycle of a runbook job for [Graphical runbooks](automation-runbook-types.md#graphical-runbooks) and [PowerShell Workflow runbooks](automation-runbook-types.md#powershell-workflow-runbooks).</span></span>

![Jobbstatus - PowerShell-arbetsflöde](./media/automation-runbook-execution/job-statuses.png)

<span data-ttu-id="16aa0-115">hello följande diagram visar hello livscykeln för ett runbook-jobb för [PowerShell runbooks](automation-runbook-types.md#powershell-runbooks).</span><span class="sxs-lookup"><span data-stu-id="16aa0-115">hello following diagram shows hello lifecycle of a runbook job for [PowerShell runbooks](automation-runbook-types.md#powershell-runbooks).</span></span>

![Jobbstatus - PowerShell-skript](./media/automation-runbook-execution/job-statuses-script.png)

<span data-ttu-id="16aa0-117">Jobb har åtkomst tooyour Azure resurser genom att göra en anslutning tooyour Azure-prenumeration.</span><span class="sxs-lookup"><span data-stu-id="16aa0-117">Your jobs have access tooyour Azure resources by making a connection tooyour Azure subscription.</span></span> <span data-ttu-id="16aa0-118">De har bara åtkomst tooresources i ditt datacenter om resurserna är tillgängliga från hello offentligt moln.</span><span class="sxs-lookup"><span data-stu-id="16aa0-118">They only have access tooresources in your data center if those resources are accessible from hello public cloud.</span></span>

## <a name="job-statuses"></a><span data-ttu-id="16aa0-119">Jobbstatus</span><span class="sxs-lookup"><span data-stu-id="16aa0-119">Job statuses</span></span>
<span data-ttu-id="16aa0-120">hello beskrivs följande tabell hello olika statuslägen som är möjliga för ett jobb.</span><span class="sxs-lookup"><span data-stu-id="16aa0-120">hello following table describes hello different statuses that are possible for a job.</span></span>

| <span data-ttu-id="16aa0-121">Status</span><span class="sxs-lookup"><span data-stu-id="16aa0-121">Status</span></span> | <span data-ttu-id="16aa0-122">Beskrivning</span><span class="sxs-lookup"><span data-stu-id="16aa0-122">Description</span></span> |
|:--- |:--- |
| <span data-ttu-id="16aa0-123">Slutfört</span><span class="sxs-lookup"><span data-stu-id="16aa0-123">Completed</span></span> |<span data-ttu-id="16aa0-124">hello-jobbet har slutförts.</span><span class="sxs-lookup"><span data-stu-id="16aa0-124">hello job completed successfully.</span></span> |
| <span data-ttu-id="16aa0-125">Det gick inte</span><span class="sxs-lookup"><span data-stu-id="16aa0-125">Failed</span></span> |<span data-ttu-id="16aa0-126">För [grafisk och PowerShell-arbetsflöde runbooks](automation-runbook-types.md), hello runbook misslyckades toocompile.</span><span class="sxs-lookup"><span data-stu-id="16aa0-126">For [Graphical and PowerShell Workflow runbooks](automation-runbook-types.md), hello runbook failed toocompile.</span></span>  <span data-ttu-id="16aa0-127">För [PowerShell-skript runbooks](automation-runbook-types.md), hello runbook misslyckades toostart eller hello jobbet påträffade ett undantag.</span><span class="sxs-lookup"><span data-stu-id="16aa0-127">For [PowerShell Script runbooks](automation-runbook-types.md), hello runbook failed toostart or hello job encountered an exception.</span></span> |
| <span data-ttu-id="16aa0-128">Misslyckades, väntar på resurser</span><span class="sxs-lookup"><span data-stu-id="16aa0-128">Failed, waiting for resources</span></span> |<span data-ttu-id="16aa0-129">hello-jobbet misslyckades eftersom den nått hello [fördelning](#fairshare) begränsa tre gånger och startats från hello samma kontrollpunkten eller från hello av hello runbook startas varje gång.</span><span class="sxs-lookup"><span data-stu-id="16aa0-129">hello job failed because it reached hello [fair share](#fairshare) limit three times and started from hello same checkpoint or from hello start of hello runbook each time.</span></span> |
| <span data-ttu-id="16aa0-130">I kö</span><span class="sxs-lookup"><span data-stu-id="16aa0-130">Queued</span></span> |<span data-ttu-id="16aa0-131">hello jobbet väntar på resurser på en Automation arbetare toocome tillgängliga så att den kan startas.</span><span class="sxs-lookup"><span data-stu-id="16aa0-131">hello job is waiting for resources on an Automation worker toocome available so that it can be started.</span></span> |
| <span data-ttu-id="16aa0-132">Startar</span><span class="sxs-lookup"><span data-stu-id="16aa0-132">Starting</span></span> |<span data-ttu-id="16aa0-133">hello-jobbet har tilldelats tooa arbetare och hello systemet är i hello processen för att starta den.</span><span class="sxs-lookup"><span data-stu-id="16aa0-133">hello job has been assigned tooa worker, and hello system is in hello process of starting it.</span></span> |
| <span data-ttu-id="16aa0-134">Återuppta</span><span class="sxs-lookup"><span data-stu-id="16aa0-134">Resuming</span></span> |<span data-ttu-id="16aa0-135">hello systemet är i hello processen för att återuppta hello jobbet när det pausades.</span><span class="sxs-lookup"><span data-stu-id="16aa0-135">hello system is in hello process of resuming hello job after it was suspended.</span></span> |
| <span data-ttu-id="16aa0-136">Körs</span><span class="sxs-lookup"><span data-stu-id="16aa0-136">Running</span></span> |<span data-ttu-id="16aa0-137">hello jobbet körs.</span><span class="sxs-lookup"><span data-stu-id="16aa0-137">hello job is running.</span></span> |
| <span data-ttu-id="16aa0-138">Kör, väntar på resurser</span><span class="sxs-lookup"><span data-stu-id="16aa0-138">Running, waiting for resources</span></span> |<span data-ttu-id="16aa0-139">hello jobbet har tagits bort eftersom den nått hello [fördelning](#fairshare) gränsen.</span><span class="sxs-lookup"><span data-stu-id="16aa0-139">hello job has been unloaded because it reached hello [fair share](#fairshare) limit.</span></span> <span data-ttu-id="16aa0-140">Återupptas från den senaste kontrollpunkten inom kort.</span><span class="sxs-lookup"><span data-stu-id="16aa0-140">It resumes shortly from its last checkpoint.</span></span> |
| <span data-ttu-id="16aa0-141">Stoppad</span><span class="sxs-lookup"><span data-stu-id="16aa0-141">Stopped</span></span> |<span data-ttu-id="16aa0-142">hello jobbet stoppades av användaren hello innan den slutfördes.</span><span class="sxs-lookup"><span data-stu-id="16aa0-142">hello job was stopped by hello user before it was completed.</span></span> |
| <span data-ttu-id="16aa0-143">Stoppas</span><span class="sxs-lookup"><span data-stu-id="16aa0-143">Stopping</span></span> |<span data-ttu-id="16aa0-144">hello systemet är i hello processen att stoppa hello jobb.</span><span class="sxs-lookup"><span data-stu-id="16aa0-144">hello system is in hello process of stopping hello job.</span></span> |
| <span data-ttu-id="16aa0-145">avbruten</span><span class="sxs-lookup"><span data-stu-id="16aa0-145">Suspended</span></span> |<span data-ttu-id="16aa0-146">hello jobbet pausades av hello användare, hello system eller ett kommando i hello runbook.</span><span class="sxs-lookup"><span data-stu-id="16aa0-146">hello job was suspended by hello user, by hello system, or by a command in hello runbook.</span></span> <span data-ttu-id="16aa0-147">Ett jobb som pausats kan startas igen och återuppta från den senaste kontrollpunkten eller från hello i början av hello runbook om den inte har kontrollpunkter.</span><span class="sxs-lookup"><span data-stu-id="16aa0-147">A job that is suspended can be started again and resume from its last checkpoint or from hello beginning of hello runbook if it doesn't have checkpoints.</span></span> <span data-ttu-id="16aa0-148">Hej runbook pausas bara av hello systemet när ett undantag inträffar.</span><span class="sxs-lookup"><span data-stu-id="16aa0-148">hello runbook will only be suspended by hello system when an exception occurs.</span></span> <span data-ttu-id="16aa0-149">ErrorActionPreference är som standard för**Fortsätt**, vilket innebär att hello jobbet körs på ett fel.</span><span class="sxs-lookup"><span data-stu-id="16aa0-149">By default, ErrorActionPreference is set too**Continue**, meaning that hello job keeps running on an error.</span></span> <span data-ttu-id="16aa0-150">Om inställningsvariabeln är inställd för**stoppa**, och sedan hello jobbet pausar på ett fel.</span><span class="sxs-lookup"><span data-stu-id="16aa0-150">If this preference variable is set too**Stop**, then hello job suspends on an error.</span></span>  <span data-ttu-id="16aa0-151">Gäller för[grafisk och PowerShell-arbetsflöde runbooks](automation-runbook-types.md) endast.</span><span class="sxs-lookup"><span data-stu-id="16aa0-151">Applies too[Graphical and PowerShell Workflow runbooks](automation-runbook-types.md) only.</span></span> |
| <span data-ttu-id="16aa0-152">Pausa</span><span class="sxs-lookup"><span data-stu-id="16aa0-152">Suspending</span></span> |<span data-ttu-id="16aa0-153">hello systemet försöker toosuspend hello jobb på begäran, hello hello användare.</span><span class="sxs-lookup"><span data-stu-id="16aa0-153">hello system is attempting toosuspend hello job at hello request of hello user.</span></span> <span data-ttu-id="16aa0-154">Hej runbooken måste nå nästa kontrollpunkt innan den kan pausas.</span><span class="sxs-lookup"><span data-stu-id="16aa0-154">hello runbook must reach its next checkpoint before it can be suspended.</span></span> <span data-ttu-id="16aa0-155">Om den redan passerat den sista kontrollpunkten sedan är klar innan den kan pausas.</span><span class="sxs-lookup"><span data-stu-id="16aa0-155">If it already passed its last checkpoint, then it completes before it can be suspended.</span></span>  <span data-ttu-id="16aa0-156">Gäller för[grafisk och PowerShell-arbetsflöde runbooks](automation-runbook-types.md) endast.</span><span class="sxs-lookup"><span data-stu-id="16aa0-156">Applies too[Graphical and PowerShell Workflow runbooks](automation-runbook-types.md) only.</span></span> |

## <a name="viewing-job-status-from-hello-azure-portal"></a><span data-ttu-id="16aa0-157">Visa jobbstatus från hello Azure-portalen</span><span class="sxs-lookup"><span data-stu-id="16aa0-157">Viewing job status from hello Azure portal</span></span>
<span data-ttu-id="16aa0-158">Du kan visa en sammanfattande status för alla runbook-jobb eller visa detaljer om en viss runbook-jobb i hello Azure-portalen eller genom att konfigurera integrering med din jobbstatus för Microsoft Operations Management Suite (OMS) logganalys arbetsytan tooforward runbook och dataströmmar för jobbet.</span><span class="sxs-lookup"><span data-stu-id="16aa0-158">You can view a summarized status of all runbook jobs or drill into details of a specific runbook job in hello Azure portal or by configuring integration with your Microsoft Operations Management Suite (OMS) Log Analytics workspace tooforward runbook job status and job streams.</span></span>  <span data-ttu-id="16aa0-159">Mer information om hur du integrerar med OMS Log Analytics finns [vidarebefordra jobbstatus och jobbet strömmar från Automation tooLog Analytics (OMS)](automation-manage-send-joblogs-log-analytics.md).</span><span class="sxs-lookup"><span data-stu-id="16aa0-159">For more information about integrating with OMS Log Analytics, see [Forward job status and job streams from Automation tooLog Analytics (OMS)](automation-manage-send-joblogs-log-analytics.md).</span></span>  

### <a name="automation-runbook-jobs-summary"></a><span data-ttu-id="16aa0-160">Automation runbook-jobb sammanfattning</span><span class="sxs-lookup"><span data-stu-id="16aa0-160">Automation runbook jobs summary</span></span>
<span data-ttu-id="16aa0-161">På hello höger i det valda Automation-kontot, visas en sammanfattning av alla hello runbook-jobb för ett valt Automation-konto under **jobbet statistik** panelen.</span><span class="sxs-lookup"><span data-stu-id="16aa0-161">On hello right of your selected Automation account, you can see a summary of all of hello runbook jobs for a selected Automation account under **Job Statistics** tile.</span></span><br><br> <span data-ttu-id="16aa0-162">![Jobbet statistik panelen](./media/automation-runbook-execution/automation-account-job-status-summary.png).</span><span class="sxs-lookup"><span data-stu-id="16aa0-162">![Job Statistics tile](./media/automation-runbook-execution/automation-account-job-status-summary.png).</span></span><br> <span data-ttu-id="16aa0-163">Den här panelen visar antalet och grafisk representation av hello jobbstatus för alla jobb som körs.</span><span class="sxs-lookup"><span data-stu-id="16aa0-163">This tile displays a count and graphical representation of hello job status for all jobs executed.</span></span>  

<span data-ttu-id="16aa0-164">Klicka på panelen hello visar hello **jobb** som innehåller en sammanfattande lista över alla jobb som körs, med status, jobbkörningen och start och slutförande gånger.</span><span class="sxs-lookup"><span data-stu-id="16aa0-164">Clicking on hello tile presents hello **Jobs** blade, which includes a summarized list of all jobs executed, with status, job execution, and start and completion times.</span></span><br><br> <span data-ttu-id="16aa0-165">![Jobb-bladet för Automation-konto](./media/automation-runbook-execution/automation-account-jobs-status-blade.png)</span><span class="sxs-lookup"><span data-stu-id="16aa0-165">![Automation account Jobs blade](./media/automation-runbook-execution/automation-account-jobs-status-blade.png)</span></span><br><br>  <span data-ttu-id="16aa0-166">Du kan filtrera hello lista över jobb genom att välja **filtrera jobb** och filtrera efter en viss runbook jobbstatus, eller hello tidsvärdet intervallet toosearch inom hello nedrullningsbara listan.</span><span class="sxs-lookup"><span data-stu-id="16aa0-166">You can filter hello list of jobs by selecting **Filter jobs**  and filter on a specific runbook, job status, or from hello drop-down list, hello date/time range toosearch within.</span></span><br><br> <span data-ttu-id="16aa0-167">![Filtrera jobbstatus](./media/automation-runbook-execution/automation-account-jobs-filter.png)</span><span class="sxs-lookup"><span data-stu-id="16aa0-167">![Filter Job status](./media/automation-runbook-execution/automation-account-jobs-filter.png)</span></span>

<span data-ttu-id="16aa0-168">Du kan också du kan visa sammanfattningsinformation för jobbet för en viss runbook genom att välja den runbook hello **Runbooks** bladet i Automation-konto och välj sedan hello **jobb** panelen.</span><span class="sxs-lookup"><span data-stu-id="16aa0-168">Alternatively, you can view job summary details for a specific runbook by selecting that runbook from hello **Runbooks** blade in your Automation account, and then select hello **Jobs** tile.</span></span>  <span data-ttu-id="16aa0-169">Detta innebär hello **jobb** bladet, och därifrån kan du klicka på hello jobbet poster tooview detaljer och effekt.</span><span class="sxs-lookup"><span data-stu-id="16aa0-169">This presents hello **Jobs** blade, and from there you can click on hello job record tooview its detail and output.</span></span><br><br> <span data-ttu-id="16aa0-170">![Jobb-bladet för Automation-konto](./media/automation-runbook-execution/automation-runbook-job-summary-blade.png)</span><span class="sxs-lookup"><span data-stu-id="16aa0-170">![Automation account Jobs blade](./media/automation-runbook-execution/automation-runbook-job-summary-blade.png)</span></span><br> 

### <a name="job-summary"></a><span data-ttu-id="16aa0-171">Jobbsammanfattning</span><span class="sxs-lookup"><span data-stu-id="16aa0-171">Job Summary</span></span>
<span data-ttu-id="16aa0-172">Du kan visa en lista över alla hello jobb som har skapats för en viss runbook och deras senaste status.</span><span class="sxs-lookup"><span data-stu-id="16aa0-172">You can view a list of all of hello jobs that have been created for a particular runbook and their most recent status.</span></span> <span data-ttu-id="16aa0-173">Du kan filtrera listan efter jobbstatus och hello datumintervall för hello senast ändrad toohello jobb.</span><span class="sxs-lookup"><span data-stu-id="16aa0-173">You can filter this list by job status and hello range of dates for hello last change toohello job.</span></span> <span data-ttu-id="16aa0-174">tooview dess detaljerad information och utdata, klicka på hello namn för ett jobb.</span><span class="sxs-lookup"><span data-stu-id="16aa0-174">tooview its detailed information and output, click on hello name of a job.</span></span> <span data-ttu-id="16aa0-175">hello innehåller detaljerad vy av hello jobbet hello värden för hello runbook-parametrar som angavs toothat jobb.</span><span class="sxs-lookup"><span data-stu-id="16aa0-175">hello detailed view of hello job includes hello values for hello runbook parameters that were provided toothat job.</span></span>

<span data-ttu-id="16aa0-176">Du kan använda hello följande steg tooview hello jobb för en runbook.</span><span class="sxs-lookup"><span data-stu-id="16aa0-176">You can use hello following steps tooview hello jobs for a runbook.</span></span>

1. <span data-ttu-id="16aa0-177">Välj i hello Azure-portalen, **Automation** och välj sedan hello namnet på ett Automation-konto.</span><span class="sxs-lookup"><span data-stu-id="16aa0-177">In hello Azure portal, select **Automation** and then select hello name of an Automation account.</span></span>
2. <span data-ttu-id="16aa0-178">Hello hubben, Välj **Runbooks** och klicka sedan på hello **Runbooks** bladet Välj en runbook hello-listan.</span><span class="sxs-lookup"><span data-stu-id="16aa0-178">From hello hub, select **Runbooks** and then on hello **Runbooks** blade select a runbook from hello list.</span></span>
3. <span data-ttu-id="16aa0-179">Klicka på hello bladet för hello markerad runbook hello **jobb** panelen.</span><span class="sxs-lookup"><span data-stu-id="16aa0-179">On hello blade for hello selected runbook, click hello **Jobs** tile.</span></span>
4. <span data-ttu-id="16aa0-180">Klicka på en av hello jobb i hello lista på hello runbook-jobbet informationsbladet kan du visa detaljer och effekt.</span><span class="sxs-lookup"><span data-stu-id="16aa0-180">Click on one of hello jobs in hello list and on hello runbook job details blade you can view its detail and output.</span></span>

## <a name="retrieving-job-status-using-windows-powershell"></a><span data-ttu-id="16aa0-181">Hämta jobbstatus med Windows PowerShell</span><span class="sxs-lookup"><span data-stu-id="16aa0-181">Retrieving job status using Windows PowerShell</span></span>
<span data-ttu-id="16aa0-182">Du kan använda hello [Get-AzureRmAutomationJob](https://msdn.microsoft.com/library/mt619440.aspx) tooretrieve hello jobb som skapats för en runbook och hello information för ett specifikt jobb.</span><span class="sxs-lookup"><span data-stu-id="16aa0-182">You can use hello [Get-AzureRmAutomationJob](https://msdn.microsoft.com/library/mt619440.aspx) tooretrieve hello jobs created for a runbook and hello details of a particular job.</span></span> <span data-ttu-id="16aa0-183">Om du startar en runbook med Windows PowerShell med [Start AzureRmAutomationRunbook](https://msdn.microsoft.com/library/mt603661.aspx), och sedan returnerar hello resulterande jobb.</span><span class="sxs-lookup"><span data-stu-id="16aa0-183">If you start a runbook with Windows PowerShell using [Start-AzureRmAutomationRunbook](https://msdn.microsoft.com/library/mt603661.aspx), then it returns hello resulting job.</span></span> <span data-ttu-id="16aa0-184">Använd [Get-AzureRmAutomationJob](https://msdn.microsoft.com/library/mt619440.aspx)utdata tooget utdata från ett jobb.</span><span class="sxs-lookup"><span data-stu-id="16aa0-184">Use [Get-AzureRmAutomationJob](https://msdn.microsoft.com/library/mt619440.aspx)Output tooget a job’s output.</span></span>

<span data-ttu-id="16aa0-185">hello följande exempelkommandon hämtar hello senaste jobb för en exempel-runbook och visar dess status och hello värden för runbookparametrar hello hello utdata från hello jobb.</span><span class="sxs-lookup"><span data-stu-id="16aa0-185">hello following sample commands retrieve hello last job for a sample runbook and displays its status, hello values provided for hello runbook parameters, and hello output from hello job.</span></span>

    $job = (Get-AzureRmAutomationJob –AutomationAccountName "MyAutomationAccount" `
    –RunbookName "Test-Runbook" -ResourceGroupName "ResourceGroup01" | sort LastModifiedDate –desc)[0]
    $job.Status
    $job.JobParameters
    Get-AzureRmAutomationJobOutput -ResourceGroupName "ResourceGroup01" `
    –AutomationAccountName "MyAutomationAcct" -Id $job.JobId –Stream Output

## <a name="fair-share"></a><span data-ttu-id="16aa0-186">Fördelning</span><span class="sxs-lookup"><span data-stu-id="16aa0-186">Fair share</span></span>
<span data-ttu-id="16aa0-187">I ordning tooshare resurser mellan alla runbooks i hello molnet inaktiveras Azure Automation tillfälligt jobb när den har körts under tre timmar.</span><span class="sxs-lookup"><span data-stu-id="16aa0-187">In order tooshare resources among all runbooks in hello cloud, Azure Automation will temporarily unload any job after it has been running for three hours.</span></span>  <span data-ttu-id="16aa0-188">Under denna tid jobb för [PowerShell-baserade runbooks](automation-runbook-types.md#powershell-runbooks) stoppas och startas inte.</span><span class="sxs-lookup"><span data-stu-id="16aa0-188">During this time, jobs for [PowerShell-based runbooks](automation-runbook-types.md#powershell-runbooks) are stopped and will not be restarted.</span></span>  <span data-ttu-id="16aa0-189">Hej jobbet status visas **stoppad**.</span><span class="sxs-lookup"><span data-stu-id="16aa0-189">hello job status shows **Stopped**.</span></span>  <span data-ttu-id="16aa0-190">Den här typen av runbook startas alltid från början hello eftersom de inte stöder kontrollpunkter.</span><span class="sxs-lookup"><span data-stu-id="16aa0-190">This type of runbook is always restarted from hello beginning since they don't support checkpoints.</span></span>  

<span data-ttu-id="16aa0-191">[PowerShell-Arbetsflödesbaserade runbooks](automation-runbook-types.md#powershell-workflow-runbooks) kommer att återupptas från deras senaste [kontrollpunkt](https://docs.microsoft.com/system-center/sma/overview-powershell-workflows#bk_Checkpoints).</span><span class="sxs-lookup"><span data-stu-id="16aa0-191">[PowerShell-Workflow-based runbooks](automation-runbook-types.md#powershell-workflow-runbooks) will be resumed from their last [checkpoint](https://docs.microsoft.com/system-center/sma/overview-powershell-workflows#bk_Checkpoints).</span></span>  <span data-ttu-id="16aa0-192">När du har kört tre timmar hello runbook-jobbet kommer att inaktiveras hello service och dess status visas **körs, väntar på resurser**.</span><span class="sxs-lookup"><span data-stu-id="16aa0-192">After running three hours, hello runbook job will be suspended by hello service and its status shows **Running, waiting for resources**.</span></span>  <span data-ttu-id="16aa0-193">När en sandbox blir tillgänglig startas hello runbook automatiskt av hello Automation-tjänsten och återupptar från hello senaste kontrollpunkten.</span><span class="sxs-lookup"><span data-stu-id="16aa0-193">When a sandbox becomes available, hello runbook will be automatically restarted by hello Automation service and resumes from hello last checkpoint.</span></span>  <span data-ttu-id="16aa0-194">Detta är normalt PowerShell-arbetsflöde att pausa/restart.</span><span class="sxs-lookup"><span data-stu-id="16aa0-194">This is normal PowerShell-Workflow behavior for suspend/restart.</span></span>  <span data-ttu-id="16aa0-195">Om hello runbook igen överskrider tre timmars körning, upprepas hello in toothree gånger.</span><span class="sxs-lookup"><span data-stu-id="16aa0-195">If hello runbook again exceeds three hours of runtime, hello process repeats, up toothree times.</span></span>  <span data-ttu-id="16aa0-196">Efter hello tredje omstart, om hello runbook fortfarande inte har slutförts i tre timmar sedan hello runbook-jobbet misslyckades och visar hello jobbstatus **misslyckades, väntar på resurser**.</span><span class="sxs-lookup"><span data-stu-id="16aa0-196">After hello third restart, if hello runbook still has not completed in three hours, then hello runbook job is failed, and hello job status shows **Failed, waiting for resources**.</span></span>  <span data-ttu-id="16aa0-197">I det här fallet kan du få hello följande undantag med hello-fel.</span><span class="sxs-lookup"><span data-stu-id="16aa0-197">In this case, you receive hello following exception with hello failure.</span></span>

<span data-ttu-id="16aa0-198">*hello jobbet kan inte fortsätta eftersom det upprepade gånger har avlägsnats från hello samma kontrollpunkt. Kontrollera att din Runbook utför långvariga åtgärder utan att spara sitt tillstånd.*</span><span class="sxs-lookup"><span data-stu-id="16aa0-198">*hello job cannot continue running because it was repeatedly evicted from hello same checkpoint. Please make sure your Runbook does not perform lengthy operations without persisting its state.*</span></span>

<span data-ttu-id="16aa0-199">Detta är tooprotect hello tjänst från runbooks som körs på obestämd tid utan att slutföra, eftersom de inte kan toomake den toohello nästa kontrollpunkt utan tas bort från minnet igen.</span><span class="sxs-lookup"><span data-stu-id="16aa0-199">This is tooprotect hello service from runbooks running indefinitely without completing, as they are not able toomake it toohello next checkpoint without being unloaded again.</span></span>

<span data-ttu-id="16aa0-200">Om hello runbook har inga kontrollpunkter eller hello jobbet hade inte nått hello första kontrollpunkt innan tas bort från minnet, startas sedan om från början hello.</span><span class="sxs-lookup"><span data-stu-id="16aa0-200">If hello runbook has no checkpoints or hello job had not reached hello first checkpoint before being unloaded, then it restarts from hello beginning.</span></span>  

<span data-ttu-id="16aa0-201">När du skapar en runbook bör du kontrollera att hello tid toorun alla aktiviteter mellan två kontrollpunkter inte överskrider tre timmar.</span><span class="sxs-lookup"><span data-stu-id="16aa0-201">When you create a runbook, you should ensure that hello time toorun any activities between two checkpoints does not exceed three hours.</span></span> <span data-ttu-id="16aa0-202">Du kan behöva tooadd kontrollpunkter tooyour runbook tooensure att den inte nå den här gränsen tre timmar eller dela upp långa kör åtgärder.</span><span class="sxs-lookup"><span data-stu-id="16aa0-202">You may need tooadd checkpoints tooyour runbook tooensure that it does not reach this three hour limit or break up long running operations.</span></span> <span data-ttu-id="16aa0-203">Din runbook kan exempelvis utföra en omindexera på en stor SQL-databas.</span><span class="sxs-lookup"><span data-stu-id="16aa0-203">For example, your runbook might perform a reindex on a large SQL database.</span></span> <span data-ttu-id="16aa0-204">Om den här enda åtgärden inte slutförs inom hello verkliga resursen gränsen och sedan hello jobbet är minnet och starta om från början hello.</span><span class="sxs-lookup"><span data-stu-id="16aa0-204">If this single operation does not complete within hello fair share limit, then hello job are unloaded and restarted from hello beginning.</span></span> <span data-ttu-id="16aa0-205">I det här fallet bör du dela upp hello omindexera åtgärden i flera steg, till exempel startas en tabell i taget, och infoga en kontrollpunkt efter varje åtgärd så att hello jobbet återupptas efter hello senaste åtgärden toocomplete.</span><span class="sxs-lookup"><span data-stu-id="16aa0-205">In this case, you should break up hello reindex operation into multiple steps, such as reindexing one table at a time, and then insert a checkpoint after each operation so that hello job could resume after hello last operation toocomplete.</span></span>

## <a name="next-steps"></a><span data-ttu-id="16aa0-206">Nästa steg</span><span class="sxs-lookup"><span data-stu-id="16aa0-206">Next steps</span></span>
* <span data-ttu-id="16aa0-207">toolearn mer om hello olika metoder som kan använda toostart en runbook i Azure Automation finns [starta en runbook i Azure Automation](automation-starting-a-runbook.md)</span><span class="sxs-lookup"><span data-stu-id="16aa0-207">toolearn more about hello different methods that can be used toostart a runbook in Azure Automation, see [Starting a runbook in Azure Automation](automation-starting-a-runbook.md)</span></span>


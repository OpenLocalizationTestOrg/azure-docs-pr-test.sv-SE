---
title: "Skapa mallar för distribution för Azure Logic Apps | Microsoft Docs"
description: "Skapa Azure Resource Manager-mallar för logic apps för hantering av distribution och version"
services: logic-apps
documentationcenter: .net,nodejs,java
author: jeffhollan
manager: anneta
editor: 
ms.assetid: 85928ec6-d7cb-488e-926e-2e5db89508ee
ms.service: logic-apps
ms.devlang: multiple
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: integration
ms.custom: H1Hack27Feb2017
ms.date: 10/18/2016
ms.author: LADocs; jehollan
ms.openlocfilehash: 9cfbb294010d48deaf4b4c78c6a6bcd59a387d87
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: sv-SE
ms.lasthandoff: 07/11/2017
---
# <a name="create-templates-for-logic-apps-deployment-and-release-management"></a><span data-ttu-id="609d4-103">Skapa mallar för logikappar för hantering av distribution och version</span><span class="sxs-lookup"><span data-stu-id="609d4-103">Create templates for logic apps deployment and release management</span></span>

<span data-ttu-id="609d4-104">När du har skapat en logikapp kanske du vill skapa den som en Azure Resource Manager-mall.</span><span class="sxs-lookup"><span data-stu-id="609d4-104">After a logic app has been created, you might want to create it as an Azure Resource Manager template.</span></span>
<span data-ttu-id="609d4-105">På så sätt kan du kan enkelt distribuera logikappen till miljö eller resursgrupp som du kanske behöver.</span><span class="sxs-lookup"><span data-stu-id="609d4-105">This way, you can easily deploy the logic app to any environment or resource group where you might need it.</span></span>
<span data-ttu-id="609d4-106">Mer information om Resource Manager-mallar finns i [skapa mallar för Azure Resource Manager](../azure-resource-manager/resource-group-authoring-templates.md) och [distribuera resurser med hjälp av Azure Resource Manager-mallar](../azure-resource-manager/resource-group-template-deploy.md).</span><span class="sxs-lookup"><span data-stu-id="609d4-106">For more about Resource Manager templates, see [authoring Azure Resource Manager templates](../azure-resource-manager/resource-group-authoring-templates.md) and [deploying resources by using Azure Resource Manager templates](../azure-resource-manager/resource-group-template-deploy.md).</span></span>

## <a name="logic-app-deployment-template"></a><span data-ttu-id="609d4-107">Mall för distribution av logik-app</span><span class="sxs-lookup"><span data-stu-id="609d4-107">Logic app deployment template</span></span>

<span data-ttu-id="609d4-108">En logikapp har tre huvudkomponenter:</span><span class="sxs-lookup"><span data-stu-id="609d4-108">A logic app has three basic components:</span></span>

* <span data-ttu-id="609d4-109">**Logik app resurs**: innehåller information om till exempel priser plan, plats och arbetsflödesdefinitionen.</span><span class="sxs-lookup"><span data-stu-id="609d4-109">**Logic app resource**: Contains information about things like pricing plan, location, and the workflow definition.</span></span>
* <span data-ttu-id="609d4-110">**Arbetsflödesdefinitionen**: Beskriver steg i din logikapp arbetsflöde och hur Logic Apps motorn ska köra arbetsflödet.</span><span class="sxs-lookup"><span data-stu-id="609d4-110">**Workflow definition**: Describes your logic app's workflow steps and how the Logic Apps engine should execute the workflow.</span></span>
<span data-ttu-id="609d4-111">Du kan visa den här definitionen i din logikapp **kodvy** fönster.</span><span class="sxs-lookup"><span data-stu-id="609d4-111">You can view this definition in your logic app's **Code View** window.</span></span>
<span data-ttu-id="609d4-112">Resursen logik appen hittar den här definitionen i den `definition` egenskapen.</span><span class="sxs-lookup"><span data-stu-id="609d4-112">In the logic app resource, you can find this definition in the `definition` property.</span></span>
* <span data-ttu-id="609d4-113">**Anslutningar**: refererar till separata resurser som på ett säkert sätt lagra metadata om någon koppling anslutningar, till exempel en anslutningssträng och ett åtkomst-token.</span><span class="sxs-lookup"><span data-stu-id="609d4-113">**Connections**: Refers to separate resources that securely store metadata about any connector connections, such as a connection string and an access token.</span></span>
<span data-ttu-id="609d4-114">I resursen logik app logikappen som refererar till dessa resurser i den `parameters` avsnitt.</span><span class="sxs-lookup"><span data-stu-id="609d4-114">In the logic app resource, your logic app references these resources in the `parameters` section.</span></span>

<span data-ttu-id="609d4-115">Du kan visa dessa delar av befintliga logikappar med hjälp av ett verktyg som [resursutforskaren Azure](http://resources.azure.com).</span><span class="sxs-lookup"><span data-stu-id="609d4-115">You can view all these pieces of existing logic apps by using a tool like [Azure Resource Explorer](http://resources.azure.com).</span></span>

<span data-ttu-id="609d4-116">Om du vill skapa en mall för en logikapp som ska användas med distributionen av resursgrupper, måste du definiera resurserna och parameterstyra efter behov.</span><span class="sxs-lookup"><span data-stu-id="609d4-116">To make a template for a logic app to use with resource group deployments, you must define the resources and parameterize as needed.</span></span>
<span data-ttu-id="609d4-117">Till exempel om du distribuerar en utveckling och test produktionsmiljön, vill du förmodligen använda olika anslutningssträngar till en SQL-databas i varje miljö.</span><span class="sxs-lookup"><span data-stu-id="609d4-117">For example, if you're deploying to a development, test, and production environment, you likely want to use different connection strings to a SQL database in each environment.</span></span>
<span data-ttu-id="609d4-118">Eller så kanske du vill distribuera i olika prenumerationer eller resursgrupper.</span><span class="sxs-lookup"><span data-stu-id="609d4-118">Or, you might want to deploy within different subscriptions or resource groups.</span></span>  

## <a name="create-a-logic-app-deployment-template"></a><span data-ttu-id="609d4-119">Skapa en logik app Distributionsmall</span><span class="sxs-lookup"><span data-stu-id="609d4-119">Create a logic app deployment template</span></span>

<span data-ttu-id="609d4-120">Det enklaste sättet att ha en giltig logik app Distributionsmall är att använda den [Visual Studio Tools för Logic Apps](logic-apps-deploy-from-vs.md).</span><span class="sxs-lookup"><span data-stu-id="609d4-120">The easiest way to have a valid logic app deployment template is to use the [Visual Studio Tools for Logic Apps](logic-apps-deploy-from-vs.md).</span></span>
<span data-ttu-id="609d4-121">Visual Studio-verktygen Generera en giltig Distributionsmall som kan användas på alla prenumerationen eller platsen.</span><span class="sxs-lookup"><span data-stu-id="609d4-121">The Visual Studio tools generate a valid deployment template that can be used across any subscription or location.</span></span>

<span data-ttu-id="609d4-122">Några andra verktyg kan hjälpa dig när du skapar en logik app Distributionsmall.</span><span class="sxs-lookup"><span data-stu-id="609d4-122">A few other tools can assist you as you create a logic app deployment template.</span></span>
<span data-ttu-id="609d4-123">Du kan skriva manuellt, det vill säga med hjälp av de resurser som redan beskrivs här om du vill skapa parametrar efter behov.</span><span class="sxs-lookup"><span data-stu-id="609d4-123">You can author by hand, that is, by using the resources already discussed here to create parameters as needed.</span></span>
<span data-ttu-id="609d4-124">Ett annat alternativ är att använda en [logik som skapar appen mallen](https://github.com/jeffhollan/LogicAppTemplateCreator) PowerShell-modulen.</span><span class="sxs-lookup"><span data-stu-id="609d4-124">Another option is to use a [logic app template creator](https://github.com/jeffhollan/LogicAppTemplateCreator) PowerShell module.</span></span> <span data-ttu-id="609d4-125">Den här modulen för öppen källkod utvärderas först logikappen och alla anslutningar som använder, och genererar Mallresurser med parametrarna som krävs för distributionen.</span><span class="sxs-lookup"><span data-stu-id="609d4-125">This open-source module first evaluates the logic app and any connections that it is using, and then generates template resources with the necessary parameters for deployment.</span></span>
<span data-ttu-id="609d4-126">Till exempel om du har en logikapp som tar emot ett meddelande från en Azure Service Bus-kö och läggs data till en Azure SQL database, verktyget bevarar alla orchestration-logik och parameterizes SQL och Service Bus-anslutning strängar så att de kan anges på distribuera Räkna upp.</span><span class="sxs-lookup"><span data-stu-id="609d4-126">For example, if you have a logic app that receives a message from an Azure Service Bus queue and adds data to an Azure SQL database, the tool preserves all the orchestration logic and parameterizes the SQL and Service Bus connection strings so that they can be set at deployment.</span></span>

> [!NOTE]
> <span data-ttu-id="609d4-127">Anslutningar måste finnas inom samma resursgrupp som logikappen.</span><span class="sxs-lookup"><span data-stu-id="609d4-127">Connections must be within the same resource group as the logic app.</span></span>
>
>

### <a name="install-the-logic-app-template-powershell-module"></a><span data-ttu-id="609d4-128">Installera PowerShell-modulen logik app mall</span><span class="sxs-lookup"><span data-stu-id="609d4-128">Install the logic app template PowerShell module</span></span>
<span data-ttu-id="609d4-129">Det enklaste sättet att installera modulen är via den [PowerShell-galleriet](https://www.powershellgallery.com/packages/LogicAppTemplate/0.1), med hjälp av kommandot `Install-Module -Name LogicAppTemplate`.</span><span class="sxs-lookup"><span data-stu-id="609d4-129">The easiest way to install the module is via the [PowerShell Gallery](https://www.powershellgallery.com/packages/LogicAppTemplate/0.1), by using the command `Install-Module -Name LogicAppTemplate`.</span></span>  

<span data-ttu-id="609d4-130">Dessutom kan du installera PowerShell-modulen manuellt:</span><span class="sxs-lookup"><span data-stu-id="609d4-130">You also can install the PowerShell module manually:</span></span>

1. <span data-ttu-id="609d4-131">Hämta den senaste versionen av den [logik som skapar appen mallen](https://github.com/jeffhollan/LogicAppTemplateCreator/releases).</span><span class="sxs-lookup"><span data-stu-id="609d4-131">Download the latest release of the [logic app template creator](https://github.com/jeffhollan/LogicAppTemplateCreator/releases).</span></span>  
2. <span data-ttu-id="609d4-132">Extrahera mappen för din PowerShell-modul (vanligtvis `%UserProfile%\Documents\WindowsPowerShell\Modules`).</span><span class="sxs-lookup"><span data-stu-id="609d4-132">Extract the folder in your PowerShell module folder (usually `%UserProfile%\Documents\WindowsPowerShell\Modules`).</span></span>

<span data-ttu-id="609d4-133">Att arbeta med klient- och prenumeration åtkomst-modulen token, rekommenderar vi att du använder den med den [ARMClient](https://github.com/projectkudu/ARMClient) kommandoradsverktyget.</span><span class="sxs-lookup"><span data-stu-id="609d4-133">For the module to work with any tenant and subscription access token, we recommend that you use it with the [ARMClient](https://github.com/projectkudu/ARMClient) command-line tool.</span></span>  <span data-ttu-id="609d4-134">Detta [blogginlägget](http://blog.davidebbo.com/2015/01/azure-resource-manager-client.html) ARMClient beskrivs i detalj.</span><span class="sxs-lookup"><span data-stu-id="609d4-134">This [blog post](http://blog.davidebbo.com/2015/01/azure-resource-manager-client.html) discusses ARMClient in more detail.</span></span>

### <a name="generate-a-logic-app-template-by-using-powershell"></a><span data-ttu-id="609d4-135">Generera en logik app mall med hjälp av PowerShell</span><span class="sxs-lookup"><span data-stu-id="609d4-135">Generate a logic app template by using PowerShell</span></span>
<span data-ttu-id="609d4-136">När du har installerat PowerShell kan du generera en mall med hjälp av följande kommando:</span><span class="sxs-lookup"><span data-stu-id="609d4-136">After PowerShell is installed, you can generate a template by using the following command:</span></span>

`armclient token $SubscriptionId | Get-LogicAppTemplate -LogicApp MyApp -ResourceGroup MyRG -SubscriptionId $SubscriptionId -Verbose | Out-File C:\template.json`

<span data-ttu-id="609d4-137">`$SubscriptionId`är Azure prenumerations-ID.</span><span class="sxs-lookup"><span data-stu-id="609d4-137">`$SubscriptionId` is the Azure subscription ID.</span></span> <span data-ttu-id="609d4-138">Den här raden först hämtar en åtkomst-token via ARMClient, och sedan kommer det via till PowerShell-skript och skapar sedan mallen i en JSON-fil.</span><span class="sxs-lookup"><span data-stu-id="609d4-138">This line first gets an access token via ARMClient, then pipes it through to the PowerShell script, and then creates the template in a JSON file.</span></span>

## <a name="add-parameters-to-a-logic-app-template"></a><span data-ttu-id="609d4-139">Lägga till parametrar till en app logik-mall</span><span class="sxs-lookup"><span data-stu-id="609d4-139">Add parameters to a logic app template</span></span>
<span data-ttu-id="609d4-140">Du kan fortsätta att lägga till eller ändra parametrarna som du kan behöva när du har skapat mallen logik app.</span><span class="sxs-lookup"><span data-stu-id="609d4-140">After you create your logic app template, you can continue to add or modify parameters that you might need.</span></span> <span data-ttu-id="609d4-141">Om din definition innehåller en resurs-ID till en Azure-funktion eller inkapslat arbetsflöde som du planerar att distribuera i en enkel distribution, kan du lägga till fler resurser i mallen och parameterstyra ID: N efter behov.</span><span class="sxs-lookup"><span data-stu-id="609d4-141">For example, if your definition includes a resource ID to an Azure function or nested workflow that you plan to deploy in a single deployment, you can add more resources to your template and parameterize IDs as needed.</span></span> <span data-ttu-id="609d4-142">Detsamma gäller för alla referenser till anpassade API: er eller Swagger slutpunkter som du förväntar dig att distribuera med varje resursgrupp.</span><span class="sxs-lookup"><span data-stu-id="609d4-142">The same applies to any references to custom APIs or Swagger endpoints you expect to deploy with each resource group.</span></span>

## <a name="deploy-a-logic-app-template"></a><span data-ttu-id="609d4-143">Distribuera en app logik-mall</span><span class="sxs-lookup"><span data-stu-id="609d4-143">Deploy a logic app template</span></span>

<span data-ttu-id="609d4-144">Du kan distribuera mallen med hjälp av verktyg som PowerShell, REST-API [Visual Studio Team Services versionshantering](#team-services), och malldistribution via Azure-portalen.</span><span class="sxs-lookup"><span data-stu-id="609d4-144">You can deploy your template by using any tools like PowerShell, REST API, [Visual Studio Team Services Release Management](#team-services), and template deployment through the Azure portal.</span></span>
<span data-ttu-id="609d4-145">Även om du vill lagra värdena för parametrarna, rekommenderar vi att du skapar en [parameterfilen](../azure-resource-manager/resource-group-template-deploy.md#parameter-files).</span><span class="sxs-lookup"><span data-stu-id="609d4-145">Also, to store the values for parameters, we recommend that you create a [parameter file](../azure-resource-manager/resource-group-template-deploy.md#parameter-files).</span></span>
<span data-ttu-id="609d4-146">Lär dig hur du [distribuera resurser med Azure Resource Manager-mallar och PowerShell](../azure-resource-manager/resource-group-template-deploy.md) eller [distribuera resurser med Azure Resource Manager-mallar och Azure portal](../azure-resource-manager/resource-group-template-deploy-portal.md).</span><span class="sxs-lookup"><span data-stu-id="609d4-146">Learn how to [deploy resources with Azure Resource Manager templates and PowerShell](../azure-resource-manager/resource-group-template-deploy.md) or [deploy resources with Azure Resource Manager templates and the Azure portal](../azure-resource-manager/resource-group-template-deploy-portal.md).</span></span>

### <a name="authorize-oauth-connections"></a><span data-ttu-id="609d4-147">Godkänna OAuth-anslutningar</span><span class="sxs-lookup"><span data-stu-id="609d4-147">Authorize OAuth connections</span></span>

<span data-ttu-id="609d4-148">Efter distributionen fungerar logikappen slutpunkt till slutpunkt med giltiga parametrar.</span><span class="sxs-lookup"><span data-stu-id="609d4-148">After deployment, the logic app works end-to-end with valid parameters.</span></span>
<span data-ttu-id="609d4-149">Du måste dock fortfarande auktorisera OAuth-anslutningar för att skapa en åtkomst-token.</span><span class="sxs-lookup"><span data-stu-id="609d4-149">However, you must still authorize OAuth connections to generate a valid access token.</span></span>
<span data-ttu-id="609d4-150">Öppna logikappen i Logic Apps Designer för att godkänna OAuth-anslutningar och godkänna dessa anslutningar.</span><span class="sxs-lookup"><span data-stu-id="609d4-150">To authorize OAuth connections, open the logic app in the Logic Apps Designer, and authorize these connections.</span></span> <span data-ttu-id="609d4-151">Eller för automatisk distribution, kan du använda ett skript för att godkänna varje OAuth-anslutning.</span><span class="sxs-lookup"><span data-stu-id="609d4-151">Or for automated deployment, you can use a script to consent to each OAuth connection.</span></span>
<span data-ttu-id="609d4-152">Det finns ett exempelskript på GitHub under den [LogicAppConnectionAuth](https://github.com/logicappsio/LogicAppConnectionAuth) projekt.</span><span class="sxs-lookup"><span data-stu-id="609d4-152">There's an example script on GitHub under the [LogicAppConnectionAuth](https://github.com/logicappsio/LogicAppConnectionAuth) project.</span></span>

<a name="team-services"></a>
## <a name="visual-studio-team-services-release-management"></a><span data-ttu-id="609d4-153">Visual Studio Team Services versionshantering</span><span class="sxs-lookup"><span data-stu-id="609d4-153">Visual Studio Team Services Release Management</span></span>

<span data-ttu-id="609d4-154">Ett vanligt scenario för att distribuera och hantera en miljö är att använda ett verktyg som versionshantering i Visual Studio Team Services med en logik app Distributionsmall.</span><span class="sxs-lookup"><span data-stu-id="609d4-154">A common scenario for deploying and managing an environment is to use a tool like Release Management in Visual Studio Team Services, with a logic app deployment template.</span></span> <span data-ttu-id="609d4-155">Visual Studio Team Services innehåller en [distribuera Azure-resursgrupp](https://github.com/Microsoft/vsts-tasks/tree/master/Tasks/DeployAzureResourceGroup) uppgift att du kan lägga till alla build-versionen eller släpp pipeline.</span><span class="sxs-lookup"><span data-stu-id="609d4-155">Visual Studio Team Services includes a [Deploy Azure Resource Group](https://github.com/Microsoft/vsts-tasks/tree/master/Tasks/DeployAzureResourceGroup) task that you can add to any build or release pipeline.</span></span> <span data-ttu-id="609d4-156">Du måste ha en [tjänstens huvudnamn](https://blogs.msdn.microsoft.com/visualstudioalm/2015/10/04/automating-azure-resource-group-deployment-using-a-service-principal-in-visual-studio-online-buildrelease-management/) för auktorisering för att distribuera, och du kan generera release-definition.</span><span class="sxs-lookup"><span data-stu-id="609d4-156">You need to have a [service principal](https://blogs.msdn.microsoft.com/visualstudioalm/2015/10/04/automating-azure-resource-group-deployment-using-a-service-principal-in-visual-studio-online-buildrelease-management/) for authorization to deploy, and then you can generate the release definition.</span></span>

1. <span data-ttu-id="609d4-157">Välj i versionshantering, **tom** så att du skapar en tom definition.</span><span class="sxs-lookup"><span data-stu-id="609d4-157">In Release Management, select **Empty** so that you create an empty definition.</span></span>

    ![Skapa en tom definition][1]

2. <span data-ttu-id="609d4-159">Välj alla resurser som du behöver för att göra detta troligen inklusive logik appmallen som skapas manuellt eller som en del av skapar.</span><span class="sxs-lookup"><span data-stu-id="609d4-159">Choose any resources you need for this, most likely including the logic app template that is generated manually or as part of the build process.</span></span>
3. <span data-ttu-id="609d4-160">Lägg till en **Azure Resource distribution** aktivitet.</span><span class="sxs-lookup"><span data-stu-id="609d4-160">Add an **Azure Resource Group Deployment** task.</span></span>
4. <span data-ttu-id="609d4-161">Konfigurera med en [tjänstens huvudnamn](https://blogs.msdn.microsoft.com/visualstudioalm/2015/10/04/automating-azure-resource-group-deployment-using-a-service-principal-in-visual-studio-online-buildrelease-management/), och refererar till mallen och mallparametrar filer.</span><span class="sxs-lookup"><span data-stu-id="609d4-161">Configure with a [service principal](https://blogs.msdn.microsoft.com/visualstudioalm/2015/10/04/automating-azure-resource-group-deployment-using-a-service-principal-in-visual-studio-online-buildrelease-management/), and reference the Template and Template Parameters files.</span></span>
5. <span data-ttu-id="609d4-162">Fortsätta att bygga ut steg i processen versionen för alla andra miljö, automatiserat test och godkännare efter behov.</span><span class="sxs-lookup"><span data-stu-id="609d4-162">Continue to build out steps in the release process for any other environment, automated test, or approvers as needed.</span></span>

<!-- Image References -->
[1]: ./media/logic-apps-create-deploy-template/emptyreleasedefinition.png

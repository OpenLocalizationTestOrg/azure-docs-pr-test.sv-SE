---
title: "mallar för distribution av aaaCreate för Logikappar i Azure | Microsoft Docs"
description: "Skapa Azure Resource Manager-mallar för logic apps för hantering av distribution och version"
services: logic-apps
documentationcenter: .net,nodejs,java
author: jeffhollan
manager: anneta
editor: 
ms.assetid: 85928ec6-d7cb-488e-926e-2e5db89508ee
ms.service: logic-apps
ms.devlang: multiple
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: integration
ms.custom: H1Hack27Feb2017
ms.date: 10/18/2016
ms.author: LADocs; jehollan
ms.openlocfilehash: 2f09445f10a376a745d6acbba94ca29d5f79fc09
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: sv-SE
ms.lasthandoff: 10/06/2017
---
# <a name="create-templates-for-logic-apps-deployment-and-release-management"></a><span data-ttu-id="379bd-103">Skapa mallar för logikappar för hantering av distribution och version</span><span class="sxs-lookup"><span data-stu-id="379bd-103">Create templates for logic apps deployment and release management</span></span>

<span data-ttu-id="379bd-104">När en logikapp har skapats kan du kanske vill toocreate den som en Azure Resource Manager-mall.</span><span class="sxs-lookup"><span data-stu-id="379bd-104">After a logic app has been created, you might want toocreate it as an Azure Resource Manager template.</span></span>
<span data-ttu-id="379bd-105">På så sätt kan du enkelt distribuera hello logik app tooany miljö eller resursgrupp som du kanske behöver.</span><span class="sxs-lookup"><span data-stu-id="379bd-105">This way, you can easily deploy hello logic app tooany environment or resource group where you might need it.</span></span>
<span data-ttu-id="379bd-106">Mer information om Resource Manager-mallar finns i [skapa mallar för Azure Resource Manager](../azure-resource-manager/resource-group-authoring-templates.md) och [distribuera resurser med hjälp av Azure Resource Manager-mallar](../azure-resource-manager/resource-group-template-deploy.md).</span><span class="sxs-lookup"><span data-stu-id="379bd-106">For more about Resource Manager templates, see [authoring Azure Resource Manager templates](../azure-resource-manager/resource-group-authoring-templates.md) and [deploying resources by using Azure Resource Manager templates](../azure-resource-manager/resource-group-template-deploy.md).</span></span>

## <a name="logic-app-deployment-template"></a><span data-ttu-id="379bd-107">Mall för distribution av logik-app</span><span class="sxs-lookup"><span data-stu-id="379bd-107">Logic app deployment template</span></span>

<span data-ttu-id="379bd-108">En logikapp har tre huvudkomponenter:</span><span class="sxs-lookup"><span data-stu-id="379bd-108">A logic app has three basic components:</span></span>

* <span data-ttu-id="379bd-109">**Logik app resurs**: innehåller information om till exempel priser plan, plats och hello arbetsflödesdefinitionen.</span><span class="sxs-lookup"><span data-stu-id="379bd-109">**Logic app resource**: Contains information about things like pricing plan, location, and hello workflow definition.</span></span>
* <span data-ttu-id="379bd-110">**Arbetsflödesdefinitionen**: beskriver din logikapp arbetsflödessteg och hur hello Logic Apps motorn ska köra hello arbetsflöde.</span><span class="sxs-lookup"><span data-stu-id="379bd-110">**Workflow definition**: Describes your logic app's workflow steps and how hello Logic Apps engine should execute hello workflow.</span></span>
<span data-ttu-id="379bd-111">Du kan visa den här definitionen i din logikapp **kodvy** fönster.</span><span class="sxs-lookup"><span data-stu-id="379bd-111">You can view this definition in your logic app's **Code View** window.</span></span>
<span data-ttu-id="379bd-112">I hello logik appresursen du hittar den här definitionen i hello `definition` egenskapen.</span><span class="sxs-lookup"><span data-stu-id="379bd-112">In hello logic app resource, you can find this definition in hello `definition` property.</span></span>
* <span data-ttu-id="379bd-113">**Anslutningar**: refererar tooseparate resurser som på ett säkert sätt lagra metadata om någon koppling anslutningar, till exempel en anslutningssträng och ett åtkomst-token.</span><span class="sxs-lookup"><span data-stu-id="379bd-113">**Connections**: Refers tooseparate resources that securely store metadata about any connector connections, such as a connection string and an access token.</span></span>
<span data-ttu-id="379bd-114">I hello logik appresursen logikappen som refererar till dessa resurser i hello `parameters` avsnitt.</span><span class="sxs-lookup"><span data-stu-id="379bd-114">In hello logic app resource, your logic app references these resources in hello `parameters` section.</span></span>

<span data-ttu-id="379bd-115">Du kan visa dessa delar av befintliga logikappar med hjälp av ett verktyg som [resursutforskaren Azure](http://resources.azure.com).</span><span class="sxs-lookup"><span data-stu-id="379bd-115">You can view all these pieces of existing logic apps by using a tool like [Azure Resource Explorer](http://resources.azure.com).</span></span>

<span data-ttu-id="379bd-116">toomake en mall för logik app toouse med distributionen av resursgrupper måste du definiera hello resurser och parameterstyra efter behov.</span><span class="sxs-lookup"><span data-stu-id="379bd-116">toomake a template for a logic app toouse with resource group deployments, you must define hello resources and parameterize as needed.</span></span>
<span data-ttu-id="379bd-117">Till exempel om du distribuerar tooa utveckling och test produktionsmiljön, vill du förmodligen toouse annan anslutning strängar tooa SQL-databasen i varje miljö.</span><span class="sxs-lookup"><span data-stu-id="379bd-117">For example, if you're deploying tooa development, test, and production environment, you likely want toouse different connection strings tooa SQL database in each environment.</span></span>
<span data-ttu-id="379bd-118">Eller så kanske du vill toodeploy inom olika prenumerationer eller resursgrupper.</span><span class="sxs-lookup"><span data-stu-id="379bd-118">Or, you might want toodeploy within different subscriptions or resource groups.</span></span>  

## <a name="create-a-logic-app-deployment-template"></a><span data-ttu-id="379bd-119">Skapa en logik app Distributionsmall</span><span class="sxs-lookup"><span data-stu-id="379bd-119">Create a logic app deployment template</span></span>

<span data-ttu-id="379bd-120">hello enklaste sättet toohave en giltig logik app Distributionsmall är toouse den [Visual Studio Tools för Logic Apps](logic-apps-deploy-from-vs.md).</span><span class="sxs-lookup"><span data-stu-id="379bd-120">hello easiest way toohave a valid logic app deployment template is toouse the [Visual Studio Tools for Logic Apps](logic-apps-deploy-from-vs.md).</span></span>
<span data-ttu-id="379bd-121">hello Visual Studio tools Generera en giltig Distributionsmall som kan användas på alla prenumerationen eller platsen.</span><span class="sxs-lookup"><span data-stu-id="379bd-121">hello Visual Studio tools generate a valid deployment template that can be used across any subscription or location.</span></span>

<span data-ttu-id="379bd-122">Några andra verktyg kan hjälpa dig när du skapar en logik app Distributionsmall.</span><span class="sxs-lookup"><span data-stu-id="379bd-122">A few other tools can assist you as you create a logic app deployment template.</span></span>
<span data-ttu-id="379bd-123">Du kan skriva manuellt, det vill säga med hjälp av hello resurser beskrivs redan här toocreate parametrar efter behov.</span><span class="sxs-lookup"><span data-stu-id="379bd-123">You can author by hand, that is, by using hello resources already discussed here toocreate parameters as needed.</span></span>
<span data-ttu-id="379bd-124">Ett annat alternativ är toouse en [logik som skapar appen mallen](https://github.com/jeffhollan/LogicAppTemplateCreator) PowerShell-modulen.</span><span class="sxs-lookup"><span data-stu-id="379bd-124">Another option is toouse a [logic app template creator](https://github.com/jeffhollan/LogicAppTemplateCreator) PowerShell module.</span></span> <span data-ttu-id="379bd-125">Den här modulen för öppen källkod utvärderas först hello logikapp och alla anslutningar som använder, och genererar Mallresurser med hello nödvändiga parametrar för distribution.</span><span class="sxs-lookup"><span data-stu-id="379bd-125">This open-source module first evaluates hello logic app and any connections that it is using, and then generates template resources with hello necessary parameters for deployment.</span></span>
<span data-ttu-id="379bd-126">Till exempel om du har en logikapp som tar emot ett meddelande från en Azure Service Bus-kö och läggs data tooan Azure SQL database hello verktyget bevarar alla hello orchestration logik och parameterizes hello SQL och Service Bus-anslutningssträngar så att de kan ställas in vid distribution.</span><span class="sxs-lookup"><span data-stu-id="379bd-126">For example, if you have a logic app that receives a message from an Azure Service Bus queue and adds data tooan Azure SQL database, hello tool preserves all hello orchestration logic and parameterizes hello SQL and Service Bus connection strings so that they can be set at deployment.</span></span>

> [!NOTE]
> <span data-ttu-id="379bd-127">Anslutningar måste vara inom hello samma resursgrupp som hello logikapp.</span><span class="sxs-lookup"><span data-stu-id="379bd-127">Connections must be within hello same resource group as hello logic app.</span></span>
>
>

### <a name="install-hello-logic-app-template-powershell-module"></a><span data-ttu-id="379bd-128">Installera PowerShell-modulen för hello logik app mall</span><span class="sxs-lookup"><span data-stu-id="379bd-128">Install hello logic app template PowerShell module</span></span>
<span data-ttu-id="379bd-129">hello enklaste sättet tooinstall hello-modulen är via hello [PowerShell-galleriet](https://www.powershellgallery.com/packages/LogicAppTemplate/0.1), med kommandot hello `Install-Module -Name LogicAppTemplate`.</span><span class="sxs-lookup"><span data-stu-id="379bd-129">hello easiest way tooinstall hello module is via hello [PowerShell Gallery](https://www.powershellgallery.com/packages/LogicAppTemplate/0.1), by using hello command `Install-Module -Name LogicAppTemplate`.</span></span>  

<span data-ttu-id="379bd-130">Du kan också installera hello PowerShell-modulen manuellt:</span><span class="sxs-lookup"><span data-stu-id="379bd-130">You also can install hello PowerShell module manually:</span></span>

1. <span data-ttu-id="379bd-131">Hämta hello senaste versionen av hello [logik som skapar appen mallen](https://github.com/jeffhollan/LogicAppTemplateCreator/releases).</span><span class="sxs-lookup"><span data-stu-id="379bd-131">Download hello latest release of hello [logic app template creator](https://github.com/jeffhollan/LogicAppTemplateCreator/releases).</span></span>  
2. <span data-ttu-id="379bd-132">Extrahera hello-mappen för din PowerShell-modul (vanligtvis `%UserProfile%\Documents\WindowsPowerShell\Modules`).</span><span class="sxs-lookup"><span data-stu-id="379bd-132">Extract hello folder in your PowerShell module folder (usually `%UserProfile%\Documents\WindowsPowerShell\Modules`).</span></span>

<span data-ttu-id="379bd-133">För hello modulen toowork med klient- och prenumeration åtkomst-token, rekommenderar vi att du använder det med hello [ARMClient](https://github.com/projectkudu/ARMClient) kommandoradsverktyget.</span><span class="sxs-lookup"><span data-stu-id="379bd-133">For hello module toowork with any tenant and subscription access token, we recommend that you use it with hello [ARMClient](https://github.com/projectkudu/ARMClient) command-line tool.</span></span>  <span data-ttu-id="379bd-134">Detta [blogginlägget](http://blog.davidebbo.com/2015/01/azure-resource-manager-client.html) ARMClient beskrivs i detalj.</span><span class="sxs-lookup"><span data-stu-id="379bd-134">This [blog post](http://blog.davidebbo.com/2015/01/azure-resource-manager-client.html) discusses ARMClient in more detail.</span></span>

### <a name="generate-a-logic-app-template-by-using-powershell"></a><span data-ttu-id="379bd-135">Generera en logik app mall med hjälp av PowerShell</span><span class="sxs-lookup"><span data-stu-id="379bd-135">Generate a logic app template by using PowerShell</span></span>
<span data-ttu-id="379bd-136">När PowerShell har installerats kan generera du en mall med hjälp av hello följande kommando:</span><span class="sxs-lookup"><span data-stu-id="379bd-136">After PowerShell is installed, you can generate a template by using hello following command:</span></span>

`armclient token $SubscriptionId | Get-LogicAppTemplate -LogicApp MyApp -ResourceGroup MyRG -SubscriptionId $SubscriptionId -Verbose | Out-File C:\template.json`

<span data-ttu-id="379bd-137">`$SubscriptionId`är hello Azure prenumerations-ID.</span><span class="sxs-lookup"><span data-stu-id="379bd-137">`$SubscriptionId` is hello Azure subscription ID.</span></span> <span data-ttu-id="379bd-138">Den här raden först hämtar en åtkomst-token via ARMClient, och sedan kommer via toohello PowerShell-skript och skapar sedan hello mallen i en JSON-fil.</span><span class="sxs-lookup"><span data-stu-id="379bd-138">This line first gets an access token via ARMClient, then pipes it through toohello PowerShell script, and then creates hello template in a JSON file.</span></span>

## <a name="add-parameters-tooa-logic-app-template"></a><span data-ttu-id="379bd-139">Lägg till parametrar tooa logik app mall</span><span class="sxs-lookup"><span data-stu-id="379bd-139">Add parameters tooa logic app template</span></span>
<span data-ttu-id="379bd-140">Du kan fortsätta tooadd eller ändra parametrar som du kan behöva när du har skapat mallen logik app.</span><span class="sxs-lookup"><span data-stu-id="379bd-140">After you create your logic app template, you can continue tooadd or modify parameters that you might need.</span></span> <span data-ttu-id="379bd-141">Om din definition innehåller en resurs-ID tooan Azure funktion eller inkapslat arbetsflöde som du planerar toodeploy i en enkel distribution, kan du lägga till fler resurser tooyour mall och parameterstyra ID: N efter behov.</span><span class="sxs-lookup"><span data-stu-id="379bd-141">For example, if your definition includes a resource ID tooan Azure function or nested workflow that you plan toodeploy in a single deployment, you can add more resources tooyour template and parameterize IDs as needed.</span></span> <span data-ttu-id="379bd-142">hello gäller samma tooany referenser toocustom API: er eller Swagger-slutpunkter du förväntar dig toodeploy med varje resursgrupp.</span><span class="sxs-lookup"><span data-stu-id="379bd-142">hello same applies tooany references toocustom APIs or Swagger endpoints you expect toodeploy with each resource group.</span></span>

## <a name="deploy-a-logic-app-template"></a><span data-ttu-id="379bd-143">Distribuera en app logik-mall</span><span class="sxs-lookup"><span data-stu-id="379bd-143">Deploy a logic app template</span></span>

<span data-ttu-id="379bd-144">Du kan distribuera mallen med hjälp av verktyg som PowerShell, REST-API [Visual Studio Team Services versionshantering](#team-services), och malldistribution via hello Azure-portalen.</span><span class="sxs-lookup"><span data-stu-id="379bd-144">You can deploy your template by using any tools like PowerShell, REST API, [Visual Studio Team Services Release Management](#team-services), and template deployment through hello Azure portal.</span></span>
<span data-ttu-id="379bd-145">Dessutom toostore hello värden för parametrar, rekommenderar vi att du skapar en [parameterfilen](../azure-resource-manager/resource-group-template-deploy.md#parameter-files).</span><span class="sxs-lookup"><span data-stu-id="379bd-145">Also, toostore hello values for parameters, we recommend that you create a [parameter file](../azure-resource-manager/resource-group-template-deploy.md#parameter-files).</span></span>
<span data-ttu-id="379bd-146">Lär dig hur för[distribuera resurser med Azure Resource Manager-mallar och PowerShell](../azure-resource-manager/resource-group-template-deploy.md) eller [distribuera resurser med Azure Resource Manager-mallar och hello Azure-portalen](../azure-resource-manager/resource-group-template-deploy-portal.md).</span><span class="sxs-lookup"><span data-stu-id="379bd-146">Learn how too[deploy resources with Azure Resource Manager templates and PowerShell](../azure-resource-manager/resource-group-template-deploy.md) or [deploy resources with Azure Resource Manager templates and hello Azure portal](../azure-resource-manager/resource-group-template-deploy-portal.md).</span></span>

### <a name="authorize-oauth-connections"></a><span data-ttu-id="379bd-147">Godkänna OAuth-anslutningar</span><span class="sxs-lookup"><span data-stu-id="379bd-147">Authorize OAuth connections</span></span>

<span data-ttu-id="379bd-148">Efter distributionen fungerar hello logikapp slutpunkt till slutpunkt med giltiga parametrar.</span><span class="sxs-lookup"><span data-stu-id="379bd-148">After deployment, hello logic app works end-to-end with valid parameters.</span></span>
<span data-ttu-id="379bd-149">Du måste dock fortfarande auktorisera OAuth anslutningar toogenerate en åtkomst-token.</span><span class="sxs-lookup"><span data-stu-id="379bd-149">However, you must still authorize OAuth connections toogenerate a valid access token.</span></span>
<span data-ttu-id="379bd-150">tooauthorize OAuth-anslutningar, öppna hello logikapp i hello Logic Apps Designer och godkänna dessa anslutningar.</span><span class="sxs-lookup"><span data-stu-id="379bd-150">tooauthorize OAuth connections, open hello logic app in hello Logic Apps Designer, and authorize these connections.</span></span> <span data-ttu-id="379bd-151">Eller för automatisk distribution, kan du använda ett skript tooconsent tooeach OAuth-anslutning.</span><span class="sxs-lookup"><span data-stu-id="379bd-151">Or for automated deployment, you can use a script tooconsent tooeach OAuth connection.</span></span>
<span data-ttu-id="379bd-152">Det finns ett exempelskript på GitHub under den [LogicAppConnectionAuth](https://github.com/logicappsio/LogicAppConnectionAuth) projekt.</span><span class="sxs-lookup"><span data-stu-id="379bd-152">There's an example script on GitHub under the [LogicAppConnectionAuth](https://github.com/logicappsio/LogicAppConnectionAuth) project.</span></span>

<a name="team-services"></a>
## <a name="visual-studio-team-services-release-management"></a><span data-ttu-id="379bd-153">Visual Studio Team Services versionshantering</span><span class="sxs-lookup"><span data-stu-id="379bd-153">Visual Studio Team Services Release Management</span></span>

<span data-ttu-id="379bd-154">Ett vanligt scenario för att distribuera och hantera en miljö är toouse ett verktyg som versionshantering i Visual Studio Team Services med en logik app Distributionsmall.</span><span class="sxs-lookup"><span data-stu-id="379bd-154">A common scenario for deploying and managing an environment is toouse a tool like Release Management in Visual Studio Team Services, with a logic app deployment template.</span></span> <span data-ttu-id="379bd-155">Visual Studio Team Services innehåller en [distribuera Azure-resursgrupp](https://github.com/Microsoft/vsts-tasks/tree/master/Tasks/DeployAzureResourceGroup) uppgiften att lägga till tooany build eller släppa pipeline.</span><span class="sxs-lookup"><span data-stu-id="379bd-155">Visual Studio Team Services includes a [Deploy Azure Resource Group](https://github.com/Microsoft/vsts-tasks/tree/master/Tasks/DeployAzureResourceGroup) task that you can add tooany build or release pipeline.</span></span> <span data-ttu-id="379bd-156">Du behöver toohave en [tjänstens huvudnamn](https://blogs.msdn.microsoft.com/visualstudioalm/2015/10/04/automating-azure-resource-group-deployment-using-a-service-principal-in-visual-studio-online-buildrelease-management/) för auktorisering toodeploy, och du kan generera hello versionen definition.</span><span class="sxs-lookup"><span data-stu-id="379bd-156">You need toohave a [service principal](https://blogs.msdn.microsoft.com/visualstudioalm/2015/10/04/automating-azure-resource-group-deployment-using-a-service-principal-in-visual-studio-online-buildrelease-management/) for authorization toodeploy, and then you can generate hello release definition.</span></span>

1. <span data-ttu-id="379bd-157">Välj i versionshantering, **tom** så att du skapar en tom definition.</span><span class="sxs-lookup"><span data-stu-id="379bd-157">In Release Management, select **Empty** so that you create an empty definition.</span></span>

    ![Skapa en tom definition][1]

2. <span data-ttu-id="379bd-159">Välj alla resurser som du behöver för den här, troligen inklusive hello logik appmallen som skapas manuellt eller som en del av hello Byggprocessen.</span><span class="sxs-lookup"><span data-stu-id="379bd-159">Choose any resources you need for this, most likely including hello logic app template that is generated manually or as part of hello build process.</span></span>
3. <span data-ttu-id="379bd-160">Lägg till en **Azure Resource distribution** aktivitet.</span><span class="sxs-lookup"><span data-stu-id="379bd-160">Add an **Azure Resource Group Deployment** task.</span></span>
4. <span data-ttu-id="379bd-161">Konfigurera med en [tjänstens huvudnamn](https://blogs.msdn.microsoft.com/visualstudioalm/2015/10/04/automating-azure-resource-group-deployment-using-a-service-principal-in-visual-studio-online-buildrelease-management/), och refererar till hello mallen och mallparametrar filer.</span><span class="sxs-lookup"><span data-stu-id="379bd-161">Configure with a [service principal](https://blogs.msdn.microsoft.com/visualstudioalm/2015/10/04/automating-azure-resource-group-deployment-using-a-service-principal-in-visual-studio-online-buildrelease-management/), and reference hello Template and Template Parameters files.</span></span>
5. <span data-ttu-id="379bd-162">Fortsätt toobuild stegen nedan i hello release-processen för alla andra miljö, automatiserat test och godkännare efter behov.</span><span class="sxs-lookup"><span data-stu-id="379bd-162">Continue toobuild out steps in hello release process for any other environment, automated test, or approvers as needed.</span></span>

<!-- Image References -->
[1]: ./media/logic-apps-create-deploy-template/emptyreleasedefinition.png

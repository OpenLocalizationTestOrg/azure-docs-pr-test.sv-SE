---
title: aaaWorking med Node.js-moduler
description: "Lär dig hur toowork med Node.js-moduler när du använder Azure App Service eller molntjänster."
services: 
documentationcenter: nodejs
author: TomArcher
manager: routlaw
editor: 
ms.assetid: c0e6cd3d-932d-433e-b72d-e513e23b4eb6
ms.service: multiple
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: nodejs
ms.topic: article
ms.date: 08/17/2016
ms.author: tarcher
ms.openlocfilehash: 926358b7eb80a659dbc1015686b06a30d8c9b8f0
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: sv-SE
ms.lasthandoff: 10/06/2017
---
# <a name="using-nodejs-modules-with-azure-applications"></a><span data-ttu-id="26853-103">Använda Node.js-moduler med Azure-program</span><span class="sxs-lookup"><span data-stu-id="26853-103">Using Node.js Modules with Azure applications</span></span>
<span data-ttu-id="26853-104">Detta dokument ger vägledning om hur du använder Node.js-moduler med program i Azure.</span><span class="sxs-lookup"><span data-stu-id="26853-104">This document provides guidance on using Node.js modules with applications hosted on Azure.</span></span> <span data-ttu-id="26853-105">Det innehåller vägledning om hur du säkerställer att ditt program använder en viss version av en modul eller någon av Azures egna moduler.</span><span class="sxs-lookup"><span data-stu-id="26853-105">It provides guidance on ensuring that your application uses a specific version of module as well as using native modules with Azure.</span></span>

<span data-ttu-id="26853-106">Om du redan är bekant med Node.js-moduler **package.json** och **npm shrinkwrap.json** filer, hello följande information ger en snabb sammanfattning av vad som beskrivs i den här artikeln:</span><span class="sxs-lookup"><span data-stu-id="26853-106">If you are already familiar with using Node.js modules, **package.json** and **npm-shrinkwrap.json** files, hello following information provides a quick summary of what is discussed in this article:</span></span>

* <span data-ttu-id="26853-107">Azure Apptjänst förstår **package.json** och **npm shrinkwrap.json** filer och kan installera moduler baserat på informationen i de här filerna.</span><span class="sxs-lookup"><span data-stu-id="26853-107">Azure App Service understands **package.json** and **npm-shrinkwrap.json** files and can install modules based on entries in these files.</span></span>

* <span data-ttu-id="26853-108">Azure Cloud Services räknar alla moduler toobe installerad på hello development environment och hello **nod\_moduler** directory toobe ingår som en del av hello distributionspaketet.</span><span class="sxs-lookup"><span data-stu-id="26853-108">Azure Cloud Services expect all modules toobe installed on hello development environment, and hello **node\_modules** directory toobe included as part of hello deployment package.</span></span> <span data-ttu-id="26853-109">Det är möjligt tooenable stöder installation av moduler med **package.json** eller **npm shrinkwrap.json** filer på Cloud Services, men den här konfigurationen kräver anpassning av hello standard skript som används av Cloud Service-projekt.</span><span class="sxs-lookup"><span data-stu-id="26853-109">It is possible tooenable support for installing modules using **package.json** or **npm-shrinkwrap.json** files on Cloud Services; however, this configuration requires customization of hello default scripts used by Cloud Service projects.</span></span> <span data-ttu-id="26853-110">Ett exempel på hur tooconfigure den här miljön finns [Azure startade uppgiften toorun npm installera tooavoid distribuera nod moduler](https://github.com/woloski/nodeonazure-blog/blob/master/articles/startup-task-to-run-npm-in-azure.markdown)</span><span class="sxs-lookup"><span data-stu-id="26853-110">For an example of how tooconfigure this environment, see [Azure Startup task toorun npm install tooavoid deploying node modules](https://github.com/woloski/nodeonazure-blog/blob/master/articles/startup-task-to-run-npm-in-azure.markdown)</span></span>

> [!NOTE]
> <span data-ttu-id="26853-111">Virtuella Azure-datorer beskrivs inte i den här artikeln eftersom hello distributionsupplevelse på en virtuell dator är beroende av hello operativsystemet hello virtuell dator som värd.</span><span class="sxs-lookup"><span data-stu-id="26853-111">Azure Virtual Machines are not discussed in this article, as hello deployment experience in a VM is dependent on hello operating system hosted by hello Virtual Machine.</span></span>
> 
> 

## <a name="nodejs-modules"></a><span data-ttu-id="26853-112">Node.js-moduler</span><span class="sxs-lookup"><span data-stu-id="26853-112">Node.js Modules</span></span>
<span data-ttu-id="26853-113">Moduler är inläsningsbar JavaScript-paket som tillhandahåller funktioner för ditt program.</span><span class="sxs-lookup"><span data-stu-id="26853-113">Modules are loadable JavaScript packages that provide specific functionality for your application.</span></span> <span data-ttu-id="26853-114">Moduler installeras vanligtvis under hello **npm** kommandoradsverktyget verktyget, men vissa moduler (till exempel hello http-modul) tillhandahålls som en del av hello core Node.js-paketet.</span><span class="sxs-lookup"><span data-stu-id="26853-114">Modules are usually installed using hello **npm** command-line tool, however some modules (such as hello http module) are provided as part of hello core Node.js package.</span></span>

<span data-ttu-id="26853-115">När moduler installeras de lagras i hello **nod\_moduler** katalogen i katalogstrukturen programmet hello rot.</span><span class="sxs-lookup"><span data-stu-id="26853-115">When modules are installed, they are stored in hello **node\_modules** directory at hello root of your application directory structure.</span></span> <span data-ttu-id="26853-116">Varje modul i hello **nod\_moduler** directory hanterar en egen **nod\_moduler** katalog som innehåller alla moduler som den är beroende av och problemet upprepas för varje modul alla hello sätt ned hello beroendekedjan.</span><span class="sxs-lookup"><span data-stu-id="26853-116">Each module within hello **node\_modules** directory maintains its own **node\_modules** directory that contains any modules that it depends on, and this behavior repeats for every module all hello way down hello dependency chain.</span></span> <span data-ttu-id="26853-117">Den här miljön kan varje installerat modulen toohave sin egen version krav för hello moduler den beroende, men det kan resultera i en stor katalogstruktur.</span><span class="sxs-lookup"><span data-stu-id="26853-117">This environment allows each module installed toohave its own version requirements for hello modules it depends on, however it can result in quite a large directory structure.</span></span>

<span data-ttu-id="26853-118">Distribuera hello **nod\_moduler** katalogen som en del av ditt program ökar hello storlek hello distributionen jämfört med toousing en **package.json** eller  **npm shrinkwrap.json** filen; men den garanterar att hello versioner av hello-moduler som används i produktionen är hello samma som hello-moduler som används under utveckling.</span><span class="sxs-lookup"><span data-stu-id="26853-118">Deploying hello **node\_modules** directory as part of your application increases hello size of hello deployment when compared toousing a **package.json** or **npm-shrinkwrap.json** file; however, it does guarantee that hello versions of hello modules used in production are hello same as hello modules used in development.</span></span>

### <a name="native-modules"></a><span data-ttu-id="26853-119">Inbyggda moduler</span><span class="sxs-lookup"><span data-stu-id="26853-119">Native Modules</span></span>
<span data-ttu-id="26853-120">De flesta moduler är helt enkelt klartext JavaScript-filer, är vissa moduler plattformsspecifika binära avbildningar.</span><span class="sxs-lookup"><span data-stu-id="26853-120">While most modules are simply plain-text JavaScript files, some modules are platform-specific binary images.</span></span> <span data-ttu-id="26853-121">Dessa moduler kompileras under installationen, vanligtvis med hjälp av Python och nod-gyp.</span><span class="sxs-lookup"><span data-stu-id="26853-121">These modules are compiled at install time, usually by using Python and node-gyp.</span></span> <span data-ttu-id="26853-122">Eftersom Azure Cloud Services förlitar sig på hello **nod\_moduler** mapp som distribueras som en del av programmet hello, alla interna moduler som ingår som en del av hello installerade moduler bör fungera i en molntjänst så länge som det var installerad och sammanställs på en Windows-utvecklingssystemet.</span><span class="sxs-lookup"><span data-stu-id="26853-122">Since Azure Cloud Services rely on hello **node\_modules** folder being deployed as part of hello application, any native module included as part of hello installed modules should work in a cloud service as long as it was installed and compiled on a Windows development system.</span></span>

<span data-ttu-id="26853-123">Azure Apptjänst har inte stöd för alla interna moduler och kan misslyckas vid kompilering av moduler med specifika krav.</span><span class="sxs-lookup"><span data-stu-id="26853-123">Azure App Service does not support all native modules, and might fail when compiling modules with specific prerequisites.</span></span> <span data-ttu-id="26853-124">Även om vissa populära moduler som MongoDB har valfria inbyggda beroenden och fungerar utan dem., visat två lösningar lyckas med nästan alla interna moduler som är tillgängliga i dag:</span><span class="sxs-lookup"><span data-stu-id="26853-124">While some popular modules like MongoDB have optional native dependencies and work fine without them, two workarounds proved successful with almost all native modules available today:</span></span>

* <span data-ttu-id="26853-125">Kör **npm installera** på en Windows-dator som har alla hello interna modulens nödvändiga komponenter installerade.</span><span class="sxs-lookup"><span data-stu-id="26853-125">Run **npm install** on a Windows machine that has all hello native module's prerequisites installed.</span></span> <span data-ttu-id="26853-126">Sedan kan du distribuera hello skapade **nod\_moduler** mappen som en del av hello programmet tooAzure Apptjänst.</span><span class="sxs-lookup"><span data-stu-id="26853-126">Then, deploy hello created **node\_modules** folder as part of hello application tooAzure App Service.</span></span>

  * <span data-ttu-id="26853-127">Innan du kompilerar, kontrollera att den lokala Node.js-installationen har motsvarande arkitektur och hello-versionen är så nära som möjligt toohello som används i Azure (hello aktuella värden kan kontrolleras på runtime från egenskaperna för **process.arch**och **process.version**).</span><span class="sxs-lookup"><span data-stu-id="26853-127">Before compiling, check that your local Node.js installation has matching architecture and hello version is as close as possible toohello one used in Azure (hello current values can be checked on runtime from properties **process.arch** and **process.version**).</span></span>

* <span data-ttu-id="26853-128">Azure App Service kan vara konfigurerade tooexecute anpassade bash eller kommandoskript under distributionen, så att du hello möjlighet tooexecute anpassade kommandon och konfigurera hello exakt sätt **installera npm** körs.</span><span class="sxs-lookup"><span data-stu-id="26853-128">Azure App Service can be configured tooexecute custom bash or shell scripts during deployment, giving you hello opportunity tooexecute custom commands and precisely configure hello way **npm install** is being run.</span></span> <span data-ttu-id="26853-129">För en video som visar hur tooconfigure denna miljö finns [anpassad webbplats distribution skript med Kudu].</span><span class="sxs-lookup"><span data-stu-id="26853-129">For a video showing how tooconfigure that environment, see [Custom Website Deployment Scripts with Kudu].</span></span>

### <a name="using-a-packagejson-file"></a><span data-ttu-id="26853-130">Med hjälp av en package.json-fil</span><span class="sxs-lookup"><span data-stu-id="26853-130">Using a package.json file</span></span>
<span data-ttu-id="26853-131">Hej **package.json** filen är ett sätt toospecify hello översta beroenden krävs för ditt program så att hello Värdplattformen kan installera hello beroenden, i stället för att kräva att du tooinclude hello **nod \_paket** mapp som en del av hello-distribution.</span><span class="sxs-lookup"><span data-stu-id="26853-131">hello **package.json** file is a way toospecify hello top-level dependencies your application requires so that hello hosting platform can install hello dependencies, rather than requiring you tooinclude hello **node\_packages** folder as part of hello deployment.</span></span> <span data-ttu-id="26853-132">När programmet hello har distribuerats, hello **installera npm** kommandot är används tooparse hello **package.json** filen och installera alla hello beroenden i listan.</span><span class="sxs-lookup"><span data-stu-id="26853-132">After hello application has been deployed, hello **npm install** command is used tooparse hello **package.json** file and install all hello dependencies listed.</span></span>

<span data-ttu-id="26853-133">Under utveckling, kan du använda hello **--spara**, **--spara dev**, eller **--spara valfria** parametrar när du installerar moduler tooadd en post för hello modulen tooyour **package.json** filen automatiskt.</span><span class="sxs-lookup"><span data-stu-id="26853-133">During development, you can use hello **--save**, **--save-dev**, or **--save-optional** parameters when installing modules tooadd an entry for hello module tooyour **package.json** file automatically.</span></span> <span data-ttu-id="26853-134">Mer information finns i [npm-installera](https://docs.npmjs.com/cli/install).</span><span class="sxs-lookup"><span data-stu-id="26853-134">For more information, see [npm-install](https://docs.npmjs.com/cli/install).</span></span>

<span data-ttu-id="26853-135">Ett möjligt problem med hello **package.json** filen är det endast anger hello-version för översta beroenden.</span><span class="sxs-lookup"><span data-stu-id="26853-135">One potential problem with hello **package.json** file is that it only specifies hello version for top-level dependencies.</span></span> <span data-ttu-id="26853-136">Varje modul som installeras kan eller kan inte ange hello version av hello moduler det beror på och så är det möjligt att du kan det sluta med en annan beroendekedjan än hello som används under utveckling.</span><span class="sxs-lookup"><span data-stu-id="26853-136">Each module installed may or may not specify hello version of hello modules it depends on, and so it is possible that you may end up with a different dependency chain than hello one used in development.</span></span>

> [!NOTE]
> <span data-ttu-id="26853-137">När du distribuerar tooAzure App Service är din <b>package.json</b> filen refererar till en ursprunglig modul som du kan se ett felmeddelande liknande toohello följande exempel när du publicerar hello program med Git:</span><span class="sxs-lookup"><span data-stu-id="26853-137">When deploying tooAzure App Service, if your <b>package.json</b> file references a native module you might see an error similar toohello following example when publishing hello application using Git:</span></span>
> 
> <span data-ttu-id="26853-138">npm fel!</span><span class="sxs-lookup"><span data-stu-id="26853-138">npm ERR!</span></span> <span data-ttu-id="26853-139">module-name@0.6.0installera: ”nod gyp konfigurera build'</span><span class="sxs-lookup"><span data-stu-id="26853-139">module-name@0.6.0 install: 'node-gyp configure build'</span></span>
> 
> <span data-ttu-id="26853-140">npm fel!</span><span class="sxs-lookup"><span data-stu-id="26853-140">npm ERR!</span></span> <span data-ttu-id="26853-141">' cmd ”/ c” ”nod gyp konfigurera build” ' misslyckades med 1</span><span class="sxs-lookup"><span data-stu-id="26853-141">'cmd "/c" "node-gyp configure build"' failed with 1</span></span>
> 
> 

### <a name="using-a-npm-shrinkwrapjson-file"></a><span data-ttu-id="26853-142">Med hjälp av en npm-shrinkwrap.json-fil</span><span class="sxs-lookup"><span data-stu-id="26853-142">Using a npm-shrinkwrap.json file</span></span>
<span data-ttu-id="26853-143">Hej **npm shrinkwrap.json** filen är en försök tooaddress hello modulen versionshantering begränsningar av hello **package.json** fil.</span><span class="sxs-lookup"><span data-stu-id="26853-143">hello **npm-shrinkwrap.json** file is an attempt tooaddress hello module versioning limitations of hello **package.json** file.</span></span> <span data-ttu-id="26853-144">När hello **package.json** filen endast innehåller versioner för hello översta moduler, hello **npm shrinkwrap.json** filen innehåller hello versionskraven för hello hela modulen beroendekedjan.</span><span class="sxs-lookup"><span data-stu-id="26853-144">While hello **package.json** file only includes versions for hello top-level modules, hello **npm-shrinkwrap.json** file contains hello version requirements for hello full module dependency chain.</span></span>

<span data-ttu-id="26853-145">När ditt program är klar för produktion, låsa versionskraven och skapa en **npm shrinkwrap.json** filen med hjälp av hello **npm förpackningsplasten** kommando.</span><span class="sxs-lookup"><span data-stu-id="26853-145">When your application is ready for production, you can lock down version requirements and create an **npm-shrinkwrap.json** file by using hello **npm shrinkwrap** command.</span></span> <span data-ttu-id="26853-146">Det här kommandot använder hello-versioner som är installerade i hello **nod\_moduler** mapp, och registrera dessa versioner toohello **npm shrinkwrap.json** fil.</span><span class="sxs-lookup"><span data-stu-id="26853-146">This command will use hello versions currently installed in hello **node\_modules** folder, and record these versions toohello **npm-shrinkwrap.json** file.</span></span> <span data-ttu-id="26853-147">När programmet hello har distribuerade toohello värdmiljön kan hello **installera npm** kommandot är används tooparse hello **npm shrinkwrap.json** filen och installera alla hello beroenden i listan.</span><span class="sxs-lookup"><span data-stu-id="26853-147">After hello application has been deployed toohello hosting environment, hello **npm install** command is used tooparse hello **npm-shrinkwrap.json** file and install all hello dependencies listed.</span></span> <span data-ttu-id="26853-148">Mer information finns i [npm förpackningsplasten](https://docs.npmjs.com/cli/shrinkwrap).</span><span class="sxs-lookup"><span data-stu-id="26853-148">For more information, see [npm-shrinkwrap](https://docs.npmjs.com/cli/shrinkwrap).</span></span>

> [!NOTE]
> <span data-ttu-id="26853-149">När du distribuerar tooAzure App Service är din <b>npm shrinkwrap.json</b> filen refererar till en ursprunglig modul som du kan se ett felmeddelande liknande toohello följande exempel när du publicerar hello program med Git:</span><span class="sxs-lookup"><span data-stu-id="26853-149">When deploying tooAzure App Service, if your <b>npm-shrinkwrap.json</b> file references a native module you might see an error similar toohello following example when publishing hello application using Git:</span></span>
> 
> <span data-ttu-id="26853-150">npm fel!</span><span class="sxs-lookup"><span data-stu-id="26853-150">npm ERR!</span></span> <span data-ttu-id="26853-151">module-name@0.6.0installera: ”nod gyp konfigurera build'</span><span class="sxs-lookup"><span data-stu-id="26853-151">module-name@0.6.0 install: 'node-gyp configure build'</span></span>
> 
> <span data-ttu-id="26853-152">npm fel!</span><span class="sxs-lookup"><span data-stu-id="26853-152">npm ERR!</span></span> <span data-ttu-id="26853-153">' cmd ”/ c” ”nod gyp konfigurera build” ' misslyckades med 1</span><span class="sxs-lookup"><span data-stu-id="26853-153">'cmd "/c" "node-gyp configure build"' failed with 1</span></span>
> 
> 

## <a name="next-steps"></a><span data-ttu-id="26853-154">Nästa steg</span><span class="sxs-lookup"><span data-stu-id="26853-154">Next steps</span></span>
<span data-ttu-id="26853-155">Nu när du förstår hur toouse Node.js-moduler med Azure, Läs hur för[ange hello Node.js version], [skapa och distribuera en Node.js-webbapp](app-service-web/app-service-web-get-started-nodejs.md), och [hur toouse hello Azure kommandoraden Gränssnitt för Mac- och Linux].</span><span class="sxs-lookup"><span data-stu-id="26853-155">Now that you understand how toouse Node.js modules with Azure, learn how too[specify hello Node.js version], [build and deploy a Node.js web app](app-service-web/app-service-web-get-started-nodejs.md), and [How toouse hello Azure Command-Line Interface for Mac and Linux].</span></span>

<span data-ttu-id="26853-156">Mer information finns i hello [Node.js Developer Center](/nodejs/azure/).</span><span class="sxs-lookup"><span data-stu-id="26853-156">For more information, see hello [Node.js Developer Center](/nodejs/azure/).</span></span>

[ange hello Node.js version]: nodejs-specify-node-version-azure-apps.md
[hur toouse hello Azure kommandoraden Gränssnitt för Mac- och Linux]:cli-install-nodejs.md
[anpassad webbplats distribution skript med Kudu]: https://channel9.msdn.com/Shows/Azure-Friday/Custom-Web-Site-Deployment-Scripts-with-Kudu-with-David-Ebbo

---
title: "aaaGet igång med Azure Key Vault | Microsoft Docs"
description: "Använd den här självstudiekursen toohelp du få igång med Azure Key Vault toocreate en förstärkt behållare i Azure, toostore och hantera krypteringsnycklar och hemligheter i Azure."
services: key-vault
documentationcenter: 
author: cabailey
manager: mbaldwin
tags: azure-resource-manager
ms.assetid: 36721e1d-38b8-4a15-ba6f-14ed5be4de79
ms.service: key-vault
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: hero-article
ms.date: 07/19/2017
ms.author: cabailey
ms.openlocfilehash: 865853b778dec5fca5c7db0d060627554c0a9cb3
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: sv-SE
ms.lasthandoff: 10/06/2017
---
# <a name="get-started-with-azure-key-vault"></a><span data-ttu-id="a29de-103">Komma igång med Azure Key Vault</span><span class="sxs-lookup"><span data-stu-id="a29de-103">Get started with Azure Key Vault</span></span>
<span data-ttu-id="a29de-104">Azure Key Vault är tillgängligt i de flesta regioner.</span><span class="sxs-lookup"><span data-stu-id="a29de-104">Azure Key Vault is available in most regions.</span></span> <span data-ttu-id="a29de-105">Mer information finns i hello [Key Vault-priser](https://azure.microsoft.com/pricing/details/key-vault/).</span><span class="sxs-lookup"><span data-stu-id="a29de-105">For more information, see hello [Key Vault pricing page](https://azure.microsoft.com/pricing/details/key-vault/).</span></span>

## <a name="introduction"></a><span data-ttu-id="a29de-106">Introduktion</span><span class="sxs-lookup"><span data-stu-id="a29de-106">Introduction</span></span>
<span data-ttu-id="a29de-107">Använd den här självstudiekursen toohelp du få igång med Azure Key Vault toocreate en förstärkt behållare (ett valv) i Azure, toostore och hantera krypteringsnycklar och hemligheter i Azure.</span><span class="sxs-lookup"><span data-stu-id="a29de-107">Use this tutorial toohelp you get started with Azure Key Vault toocreate a hardened container (a vault) in Azure, toostore and manage cryptographic keys and secrets in Azure.</span></span> <span data-ttu-id="a29de-108">Den vägleder dig genom hello processen med att använda Azure PowerShell toocreate ett valv som innehåller en nyckel eller ett lösenord som du sedan kan använda med ett Azure-program.</span><span class="sxs-lookup"><span data-stu-id="a29de-108">It walks you through hello process of using Azure PowerShell toocreate a vault that contains a key or password that you can then use with an Azure application.</span></span> <span data-ttu-id="a29de-109">Därefter tittar vi på hur ett program kan använda den här nyckeln eller lösenordet.</span><span class="sxs-lookup"><span data-stu-id="a29de-109">It then shows you how an application can use that key or password.</span></span>

<span data-ttu-id="a29de-110">**Uppskattad tid toocomplete:** 20 minuter</span><span class="sxs-lookup"><span data-stu-id="a29de-110">**Estimated time toocomplete:** 20 minutes</span></span>

> [!NOTE]
> <span data-ttu-id="a29de-111">Den här självstudiekursen innehåller inte instruktioner för hur toowrite hello Azure-program med något av hello steg, nämligen hur tooauthorize ett program toouse en nyckel eller hemlighet i hello nyckeln valvet.</span><span class="sxs-lookup"><span data-stu-id="a29de-111">This tutorial does not include instructions for how toowrite hello Azure application that one of hello steps includes, namely how tooauthorize an application toouse a key or secret in hello key vault.</span></span>
>
> <span data-ttu-id="a29de-112">I den här kursen används Azure PowerShell.</span><span class="sxs-lookup"><span data-stu-id="a29de-112">This tutorial uses Azure PowerShell.</span></span> <span data-ttu-id="a29de-113">Anvisningar för plattformsoberoende kommandoradsgränssnitt finns i [den här självstudiekursen](key-vault-manage-with-cli2.md).</span><span class="sxs-lookup"><span data-stu-id="a29de-113">For Cross-Platform Command-Line Interface instructions, see [this equivalent tutorial](key-vault-manage-with-cli2.md).</span></span>
>
>

<span data-ttu-id="a29de-114">Översiktlig information om Azure Key Vault finns i [Vad är Azure Key Vault?](key-vault-whatis.md)</span><span class="sxs-lookup"><span data-stu-id="a29de-114">For overview information about Azure Key Vault, see [What is Azure Key Vault?](key-vault-whatis.md)</span></span>

## <a name="prerequisites"></a><span data-ttu-id="a29de-115">Krav</span><span class="sxs-lookup"><span data-stu-id="a29de-115">Prerequisites</span></span>
<span data-ttu-id="a29de-116">toocomplete den här självstudien måste du ha hello följande:</span><span class="sxs-lookup"><span data-stu-id="a29de-116">toocomplete this tutorial, you must have hello following:</span></span>

* <span data-ttu-id="a29de-117">En prenumeration tooMicrosoft Azure.</span><span class="sxs-lookup"><span data-stu-id="a29de-117">A subscription tooMicrosoft Azure.</span></span> <span data-ttu-id="a29de-118">Om du inte har en prenumeration kan du registrera dig för ett [kostnadsfritt konto](https://azure.microsoft.com/pricing/free-trial/).</span><span class="sxs-lookup"><span data-stu-id="a29de-118">If you do not have one, you can sign up for a [free account](https://azure.microsoft.com/pricing/free-trial/).</span></span>
* <span data-ttu-id="a29de-119">Azure PowerShell, **minst version 1.1.0**.</span><span class="sxs-lookup"><span data-stu-id="a29de-119">Azure PowerShell, **minimum version of 1.1.0**.</span></span> <span data-ttu-id="a29de-120">tooinstall Azure PowerShell och koppla den till din Azure-prenumeration, se [hur tooinstall och konfigurera Azure PowerShell](/powershell/azure/overview).</span><span class="sxs-lookup"><span data-stu-id="a29de-120">tooinstall Azure PowerShell and associate it with your Azure subscription, see [How tooinstall and configure Azure PowerShell](/powershell/azure/overview).</span></span> <span data-ttu-id="a29de-121">Om du redan har installerat Azure PowerShell och inte vet hello version från hello Azure PowerShell-konsolen, Skriv `(Get-Module azure -ListAvailable).Version`.</span><span class="sxs-lookup"><span data-stu-id="a29de-121">If you have already installed Azure PowerShell and do not know hello version, from hello Azure PowerShell console, type `(Get-Module azure -ListAvailable).Version`.</span></span> <span data-ttu-id="a29de-122">Du kan använda den här självstudiekursen med några mindre ändringar även om du har Azure PowerShell version 0.9.1 till och med 0.9.8 installerad.</span><span class="sxs-lookup"><span data-stu-id="a29de-122">When you have Azure PowerShell version 0.9.1 through 0.9.8 installed, you can still use this tutorial with some minor changes.</span></span> <span data-ttu-id="a29de-123">Till exempel måste du använda hello `Switch-AzureMode AzureResourceManager` kommandot och hello Azure Key Vault kommandona har ändrats.</span><span class="sxs-lookup"><span data-stu-id="a29de-123">For example, you must use hello `Switch-AzureMode AzureResourceManager` command and some of hello Azure Key Vault commands have changed.</span></span> <span data-ttu-id="a29de-124">En lista över hello Key Vault-cmdlets för versioner 0.9.1 via 0.9.8, se [Azure Key Vault-Cmdlets](/powershell/module/azurerm.keyvault/#key_vault).</span><span class="sxs-lookup"><span data-stu-id="a29de-124">For a list of hello Key Vault cmdlets for versions 0.9.1 through 0.9.8, see [Azure Key Vault Cmdlets](/powershell/module/azurerm.keyvault/#key_vault).</span></span>
* <span data-ttu-id="a29de-125">Ett program som är konfigurerade toouse hello nyckel eller lösenord som du skapar i den här kursen.</span><span class="sxs-lookup"><span data-stu-id="a29de-125">An application that will be configured toouse hello key or password that you create in this tutorial.</span></span> <span data-ttu-id="a29de-126">Ett exempelprogram som är tillgänglig från hello [Microsoft Download Center](http://www.microsoft.com/en-us/download/details.aspx?id=45343).</span><span class="sxs-lookup"><span data-stu-id="a29de-126">A sample application is available from hello [Microsoft Download Center](http://www.microsoft.com/en-us/download/details.aspx?id=45343).</span></span> <span data-ttu-id="a29de-127">Instruktioner finns i hello tillhörande Readme-filen.</span><span class="sxs-lookup"><span data-stu-id="a29de-127">For instructions, see hello accompanying Readme file.</span></span>

<span data-ttu-id="a29de-128">Den här kursen är avsedd för Azure PowerShell nybörjare, men förutsätter att du förstår hello grundläggande begrepp som moduler, cmdletar och sessioner.</span><span class="sxs-lookup"><span data-stu-id="a29de-128">This tutorial is designed for Azure PowerShell beginners, but it assumes that you understand hello basic concepts, such as modules, cmdlets, and sessions.</span></span> <span data-ttu-id="a29de-129">Mer information finns i [Komma igång med Windows PowerShell](https://technet.microsoft.com/library/hh857337.aspx).</span><span class="sxs-lookup"><span data-stu-id="a29de-129">For more information, see [Getting started with Windows PowerShell](https://technet.microsoft.com/library/hh857337.aspx).</span></span>

<span data-ttu-id="a29de-130">tooget utförlig information för alla cmdletar som du ser i den här kursen används hello **Get-Help** cmdlet.</span><span class="sxs-lookup"><span data-stu-id="a29de-130">tooget detailed help for any cmdlet that you see in this tutorial, use hello **Get-Help** cmdlet.</span></span>

    Get-Help <cmdlet-name> -Detailed

<span data-ttu-id="a29de-131">Till exempel tooget hjälp för hello **Login-AzureRmAccount** cmdlet, skriv:</span><span class="sxs-lookup"><span data-stu-id="a29de-131">For example, tooget help for hello **Login-AzureRmAccount** cmdlet, type:</span></span>

    Get-Help Login-AzureRmAccount -Detailed

<span data-ttu-id="a29de-132">Du kan också läsa följande kurser tooget bekant med Azure Resource Manager i Azure PowerShell hello:</span><span class="sxs-lookup"><span data-stu-id="a29de-132">You can also read hello following tutorials tooget familiar with Azure Resource Manager in Azure PowerShell:</span></span>

* [<span data-ttu-id="a29de-133">Hur tooinstall och konfigurera Azure PowerShell</span><span class="sxs-lookup"><span data-stu-id="a29de-133">How tooinstall and configure Azure PowerShell</span></span>](/powershell/azure/overview)
* [<span data-ttu-id="a29de-134">Använda Azure PowerShell med Resource Manager</span><span class="sxs-lookup"><span data-stu-id="a29de-134">Using Azure PowerShell with Resource Manager</span></span>](../powershell-azure-resource-manager.md)

## <span data-ttu-id="a29de-135"><a id="connect"></a>Ansluta tooyour prenumerationer</span><span class="sxs-lookup"><span data-stu-id="a29de-135"><a id="connect"></a>Connect tooyour subscriptions</span></span>
<span data-ttu-id="a29de-136">Starta en Azure PowerShell-session och logga in tooyour Azure-konto med hello följande kommando:</span><span class="sxs-lookup"><span data-stu-id="a29de-136">Start an Azure PowerShell session and sign in tooyour Azure account with hello following command:</span></span>  

    Login-AzureRmAccount

<span data-ttu-id="a29de-137">Observera att om du använder en specifik instans av Azure, till exempel Azure Government använder hello - miljö parametern med det här kommandot.</span><span class="sxs-lookup"><span data-stu-id="a29de-137">Note that if you are using a specific instance of Azure, for example, Azure Government, use hello -Environment parameter with this command.</span></span> <span data-ttu-id="a29de-138">Exempel: `Login-AzureRmAccount –Environment (Get-AzureRmEnvironment –Name AzureUSGovernment)`</span><span class="sxs-lookup"><span data-stu-id="a29de-138">For example: `Login-AzureRmAccount –Environment (Get-AzureRmEnvironment –Name AzureUSGovernment)`</span></span>

<span data-ttu-id="a29de-139">Ange ditt användarnamn för Azure-konto och lösenord i hello popup-webbläsarfönstret.</span><span class="sxs-lookup"><span data-stu-id="a29de-139">In hello pop-up browser window, enter your Azure account user name and password.</span></span> <span data-ttu-id="a29de-140">Azure PowerShell får alla hello-prenumerationer som är associerade med det här kontot och som standard, använder hello första.</span><span class="sxs-lookup"><span data-stu-id="a29de-140">Azure PowerShell gets all hello subscriptions that are associated with this account and by default, uses hello first one.</span></span>

<span data-ttu-id="a29de-141">Om du har flera prenumerationer och vill toospecify en specifik en toouse för Azure Key Vault, skriver du hello följande toosee hello prenumerationer för ditt konto:</span><span class="sxs-lookup"><span data-stu-id="a29de-141">If you have multiple subscriptions and want toospecify a specific one toouse for Azure Key Vault, type hello following toosee hello subscriptions for your account:</span></span>

    Get-AzureRmSubscription

<span data-ttu-id="a29de-142">Sedan toospecify hello prenumeration toouse, typ:</span><span class="sxs-lookup"><span data-stu-id="a29de-142">Then, toospecify hello subscription toouse, type:</span></span>

    Set-AzureRmContext -SubscriptionId <subscription ID>

<span data-ttu-id="a29de-143">Mer information om hur du konfigurerar Azure PowerShell finns [hur tooinstall och konfigurera Azure PowerShell](/powershell/azure/overview).</span><span class="sxs-lookup"><span data-stu-id="a29de-143">For more information about configuring Azure PowerShell, see [How tooinstall and configure Azure PowerShell](/powershell/azure/overview).</span></span>

## <span data-ttu-id="a29de-144"><a id="resource"></a>Skapa en ny resursgrupp</span><span class="sxs-lookup"><span data-stu-id="a29de-144"><a id="resource"></a>Create a new resource group</span></span>
<span data-ttu-id="a29de-145">När du använder Azure Resource Manager skapas alla relaterade resurser inuti en resursgrupp.</span><span class="sxs-lookup"><span data-stu-id="a29de-145">When you use Azure Resource Manager, all related resources are created inside a resource group.</span></span> <span data-ttu-id="a29de-146">Vi ska skapa en ny resursgrupp med namnet **ContosoResourceGroup** i den här självstudiekursen:</span><span class="sxs-lookup"><span data-stu-id="a29de-146">We will create a new resource group named **ContosoResourceGroup** for this tutorial:</span></span>

    New-AzureRmResourceGroup –Name 'ContosoResourceGroup' –Location 'East Asia'


## <span data-ttu-id="a29de-147"><a id="vault"></a>Skapa ett nyckelvalv</span><span class="sxs-lookup"><span data-stu-id="a29de-147"><a id="vault"></a>Create a key vault</span></span>
<span data-ttu-id="a29de-148">Använd hello [ny AzureRmKeyVault](/powershell/module/azurerm.keyvault/new-azurermkeyvault) cmdlet toocreate en nyckelvalvet.</span><span class="sxs-lookup"><span data-stu-id="a29de-148">Use hello [New-AzureRmKeyVault](/powershell/module/azurerm.keyvault/new-azurermkeyvault) cmdlet toocreate a key vault.</span></span> <span data-ttu-id="a29de-149">Denna cmdlet har tre obligatoriska parametrar: en **resursgruppnamn**, **nyckelvalv namn**, och hello **geografisk plats**.</span><span class="sxs-lookup"><span data-stu-id="a29de-149">This cmdlet has three mandatory parameters: a **resource group name**, a **key vault name**, and hello **geographic location**.</span></span>

<span data-ttu-id="a29de-150">Om du använder hello valvnamnet för till exempel **ContosoKeyVault**, hello resursgruppens namn av **ContosoResourceGroup**, och hello plats **Östasien**, typ:</span><span class="sxs-lookup"><span data-stu-id="a29de-150">For example, if you use hello vault name of **ContosoKeyVault**, hello resource group name of **ContosoResourceGroup**, and hello location of **East Asia**, type:</span></span>

    New-AzureRmKeyVault -VaultName 'ContosoKeyVault' -ResourceGroupName 'ContosoResourceGroup' -Location 'East Asia'

<span data-ttu-id="a29de-151">hello resultatet av denna cmdlet visar egenskaperna för hello nyckelvalv som du nyss skapade.</span><span class="sxs-lookup"><span data-stu-id="a29de-151">hello output of this cmdlet shows properties of hello key vault that you’ve just created.</span></span> <span data-ttu-id="a29de-152">hello två viktigaste egenskaper är:</span><span class="sxs-lookup"><span data-stu-id="a29de-152">hello two most important properties are:</span></span>

* <span data-ttu-id="a29de-153">**Valvet namnet**: I hello exempelvis är **ContosoKeyVault**.</span><span class="sxs-lookup"><span data-stu-id="a29de-153">**Vault Name**: In hello example, this is **ContosoKeyVault**.</span></span> <span data-ttu-id="a29de-154">Du ska använda det här namnet för andra Key Vault-cmdlets.</span><span class="sxs-lookup"><span data-stu-id="a29de-154">You will use this name for other Key Vault cmdlets.</span></span>
* <span data-ttu-id="a29de-155">**Valvet URI**: I hello exempelvis är https://contosokeyvault.vault.azure.net/.</span><span class="sxs-lookup"><span data-stu-id="a29de-155">**Vault URI**: In hello example, this is https://contosokeyvault.vault.azure.net/.</span></span> <span data-ttu-id="a29de-156">Program som använder ditt valv via dess REST-API måste använda denna URI.</span><span class="sxs-lookup"><span data-stu-id="a29de-156">Applications that use your vault through its REST API must use this URI.</span></span>

<span data-ttu-id="a29de-157">Azure-konto är nu behörig tooperform några åtgärder på den här nyckeln valvet.</span><span class="sxs-lookup"><span data-stu-id="a29de-157">Your Azure account is now authorized tooperform any operations on this key vault.</span></span> <span data-ttu-id="a29de-158">Vilket ingen annan har ännu.</span><span class="sxs-lookup"><span data-stu-id="a29de-158">As yet, nobody else is.</span></span>

> [!NOTE]
> <span data-ttu-id="a29de-159">Om du ser hello fel **hello prenumerationen är inte registrerad toouse namnområdet 'Microsoft.KeyVault'** när du försöker toocreate nya nyckelvalvet, kör `Register-AzureRmResourceProvider -ProviderNamespace "Microsoft.KeyVault"` och kör sedan kommandot Nytt AzureRmKeyVault.</span><span class="sxs-lookup"><span data-stu-id="a29de-159">If you see hello error **hello subscription is not registered toouse namespace 'Microsoft.KeyVault'** when you try toocreate your new key vault, run `Register-AzureRmResourceProvider -ProviderNamespace "Microsoft.KeyVault"` and then rerun your New-AzureRmKeyVault command.</span></span> <span data-ttu-id="a29de-160">Mer information finns i [Register-AzureRmResourceProvider](/powershell/module/azurerm.resources/register-azurermresourceprovider).</span><span class="sxs-lookup"><span data-stu-id="a29de-160">For more information, see [Register-AzureRmResourceProvider](/powershell/module/azurerm.resources/register-azurermresourceprovider).</span></span>
>
>

## <span data-ttu-id="a29de-161"><a id="add"></a>Lägga till en nyckel eller Hemlig toohello nyckelvalv</span><span class="sxs-lookup"><span data-stu-id="a29de-161"><a id="add"></a>Add a key or secret toohello key vault</span></span>
<span data-ttu-id="a29de-162">Om du vill Azure Key Vault toocreate programvaruskyddad nyckel som du kan använda hello [Lägg till AzureKeyVaultKey](/powershell/module/azurerm.keyvault/add-azurekeyvaultkey) cmdlet, och skriver hello följande:</span><span class="sxs-lookup"><span data-stu-id="a29de-162">If you want Azure Key Vault toocreate a software-protected key for you, use hello [Add-AzureKeyVaultKey](/powershell/module/azurerm.keyvault/add-azurekeyvaultkey) cmdlet, and type hello following:</span></span>

    $key = Add-AzureKeyVaultKey -VaultName 'ContosoKeyVault' -Name 'ContosoFirstKey' -Destination 'Software'

<span data-ttu-id="a29de-163">Men om du har en befintlig programvaruskyddad nyckel i en. PFX-fil som sparats tooyour C:\ enhet i en fil med namnet softkey.pfx som du vill tooupload tooAzure Key Vault typen hello följande tooset hello variabeln **securepfxpwd** för ett lösenord på **123** för hello. PFX-filen:</span><span class="sxs-lookup"><span data-stu-id="a29de-163">However, if you have an existing software-protected key in a .PFX file saved tooyour C:\ drive in a file named softkey.pfx that you want tooupload tooAzure Key Vault, type hello following tooset hello variable **securepfxpwd** for a password of **123** for hello .PFX file:</span></span>

    $securepfxpwd = ConvertTo-SecureString –String '123' –AsPlainText –Force

<span data-ttu-id="a29de-164">Skriv sedan följande tooimport hello nyckeln från hello hello. PFX-fil, som skyddar hello nyckeln av programvara i hello Key Vault-tjänsten:</span><span class="sxs-lookup"><span data-stu-id="a29de-164">Then type hello following tooimport hello key from hello .PFX file, which protects hello key by software in hello Key Vault service:</span></span>

    $key = Add-AzureKeyVaultKey -VaultName 'ContosoKeyVault' -Name 'ContosoFirstKey' -KeyFilePath 'c:\softkey.pfx' -KeyFilePassword $securepfxpwd


<span data-ttu-id="a29de-165">Nu kan du referera den här nyckeln att du har skapat eller överföra tooAzure Key Vault med hjälp av dess URI.</span><span class="sxs-lookup"><span data-stu-id="a29de-165">You can now reference this key that you created or uploaded tooAzure Key Vault, by using its URI.</span></span> <span data-ttu-id="a29de-166">Använd **https://ContosoKeyVault.vault.azure.net/keys/ContosoFirstKey** tooalways hämta hello aktuella versionen och använda **https://ContosoKeyVault.vault.azure.net/keys/ContosoFirstKey/ cgacf4f763ar42ffb0a1gca546aygd87** tooget den här specifika versionen.</span><span class="sxs-lookup"><span data-stu-id="a29de-166">Use **https://ContosoKeyVault.vault.azure.net/keys/ContosoFirstKey** tooalways get hello current version, and use **https://ContosoKeyVault.vault.azure.net/keys/ContosoFirstKey/cgacf4f763ar42ffb0a1gca546aygd87** tooget this specific version.</span></span>  

<span data-ttu-id="a29de-167">toodisplay hello URI för den här nyckeln typ:</span><span class="sxs-lookup"><span data-stu-id="a29de-167">toodisplay hello URI for this key, type:</span></span>

    $Key.key.kid

<span data-ttu-id="a29de-168">tooadd en hemlig toohello valvet, som är ett lösenord med namnet SQLPassword och har hello Pa$ w0rd tooAzure Key Vault-värde, konvertera först hello värdet för Pa$ w0rd tooa säker sträng genom att skriva hello följande:</span><span class="sxs-lookup"><span data-stu-id="a29de-168">tooadd a secret toohello vault, which is a password named SQLPassword and has hello value of Pa$$w0rd tooAzure Key Vault, first convert hello value of Pa$$w0rd tooa secure string by typing hello following:</span></span>

    $secretvalue = ConvertTo-SecureString 'Pa$$w0rd' -AsPlainText -Force

<span data-ttu-id="a29de-169">Skriv hello följande:</span><span class="sxs-lookup"><span data-stu-id="a29de-169">Then, type hello following:</span></span>

    $secret = Set-AzureKeyVaultSecret -VaultName 'ContosoKeyVault' -Name 'SQLPassword' -SecretValue $secretvalue

<span data-ttu-id="a29de-170">Nu kan du referera lösenordet du lagt till tooAzure Key Vault med dess URI.</span><span class="sxs-lookup"><span data-stu-id="a29de-170">You can now reference this password that you added tooAzure Key Vault, by using its URI.</span></span> <span data-ttu-id="a29de-171">Använd **https://ContosoVault.vault.azure.net/secrets/SQLPassword** tooalways hämta hello aktuella versionen och använda **https://ContosoVault.vault.azure.net/secrets/SQLPassword/ 90018dbb96a84117a0d2847ef8e7189d** tooget den här specifika versionen.</span><span class="sxs-lookup"><span data-stu-id="a29de-171">Use **https://ContosoVault.vault.azure.net/secrets/SQLPassword** tooalways get hello current version, and use **https://ContosoVault.vault.azure.net/secrets/SQLPassword/90018dbb96a84117a0d2847ef8e7189d** tooget this specific version.</span></span>

<span data-ttu-id="a29de-172">toodisplay hello URI för den här hemligheten typ:</span><span class="sxs-lookup"><span data-stu-id="a29de-172">toodisplay hello URI for this secret, type:</span></span>

    $secret.Id

<span data-ttu-id="a29de-173">Nu ska vi visa hello nyckel eller hemlighet som du just skapat:</span><span class="sxs-lookup"><span data-stu-id="a29de-173">Let’s view hello key or secret that you just created:</span></span>

* <span data-ttu-id="a29de-174">tooview nyckeltypen,:`Get-AzureKeyVaultKey –VaultName 'ContosoKeyVault'`</span><span class="sxs-lookup"><span data-stu-id="a29de-174">tooview your key, type: `Get-AzureKeyVaultKey –VaultName 'ContosoKeyVault'`</span></span>
* <span data-ttu-id="a29de-175">tooview din hemliga, typ:`Get-AzureKeyVaultSecret –VaultName 'ContosoKeyVault'`</span><span class="sxs-lookup"><span data-stu-id="a29de-175">tooview your secret, type: `Get-AzureKeyVaultSecret –VaultName 'ContosoKeyVault'`</span></span>

<span data-ttu-id="a29de-176">Ditt nyckelvalv och nyckel eller hemlighet är nu redo för program toouse.</span><span class="sxs-lookup"><span data-stu-id="a29de-176">Now, your key vault and key or secret is ready for applications toouse.</span></span> <span data-ttu-id="a29de-177">Du måste auktorisera program toouse dem.</span><span class="sxs-lookup"><span data-stu-id="a29de-177">You must authorize applications toouse them.</span></span>  

## <span data-ttu-id="a29de-178"><a id="register"></a>Registrera ett program med Azure Active Directory</span><span class="sxs-lookup"><span data-stu-id="a29de-178"><a id="register"></a>Register an application with Azure Active Directory</span></span>
<span data-ttu-id="a29de-179">Det här steget utförs normalt av en utvecklare, på en separat dator.</span><span class="sxs-lookup"><span data-stu-id="a29de-179">This step would usually be done by a developer, on a separate computer.</span></span> <span data-ttu-id="a29de-180">Det är inte specifik tooAzure Key Vault men finns här för fullständighetens skull.</span><span class="sxs-lookup"><span data-stu-id="a29de-180">It is not specific tooAzure Key Vault, but is included here for completeness.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="a29de-181">toocomplete hello kursen, ditt konto, hello valvet och hello-program som du registrerar i det här steget måste vara i hello samma Azure-katalogen.</span><span class="sxs-lookup"><span data-stu-id="a29de-181">toocomplete hello tutorial, your account, hello vault, and hello application that you will register in this step must all be in hello same Azure directory.</span></span>
>
>

<span data-ttu-id="a29de-182">Program som använder ett nyckelvalv måste autentiseras med hjälp av en token från Azure Active Directory.</span><span class="sxs-lookup"><span data-stu-id="a29de-182">Applications that use a key vault must authenticate by using a token from Azure Active Directory.</span></span> <span data-ttu-id="a29de-183">toodo detta, hello ägare av programmet hello måste först registrera programmet hello i sina Azure Active Directory.</span><span class="sxs-lookup"><span data-stu-id="a29de-183">toodo this, hello owner of hello application must first register hello application in their Azure Active Directory.</span></span> <span data-ttu-id="a29de-184">Hello slutet av registrering hämtar hello programägaren hello följande värden:</span><span class="sxs-lookup"><span data-stu-id="a29de-184">At hello end of registration, hello application owner gets hello following values:</span></span>

* <span data-ttu-id="a29de-185">En **program-ID** (även kallat ett klient-ID) och **autentiseringsnyckel** (även kallat hello delad hemlighet).</span><span class="sxs-lookup"><span data-stu-id="a29de-185">An **Application ID** (also known as a Client ID) and **authentication key** (also known as hello shared secret).</span></span> <span data-ttu-id="a29de-186">programmet hello måste båda dessa värden tooAzure Active Directory tooget presentera en token.</span><span class="sxs-lookup"><span data-stu-id="a29de-186">hello application must present both these values tooAzure Active Directory, tooget a token.</span></span> <span data-ttu-id="a29de-187">Hur konfigureras programmet hello toodo detta beror på programmet hello.</span><span class="sxs-lookup"><span data-stu-id="a29de-187">How hello application is configured toodo this depends on hello application.</span></span> <span data-ttu-id="a29de-188">För hello Key Vault exempelprogrammet anger hello programägaren värdena i hello app.config-fil.</span><span class="sxs-lookup"><span data-stu-id="a29de-188">For hello Key Vault sample application, hello application owner sets these values in hello app.config file.</span></span>

<span data-ttu-id="a29de-189">tooregister hello program i Azure Active Directory:</span><span class="sxs-lookup"><span data-stu-id="a29de-189">tooregister hello application in Azure Active Directory:</span></span>

1. <span data-ttu-id="a29de-190">Logga in toohello klassiska Azure-portalen.</span><span class="sxs-lookup"><span data-stu-id="a29de-190">Sign in toohello Azure classic portal.</span></span>
2. <span data-ttu-id="a29de-191">Klicka på vänster hello **Active Directory**, och välj sedan hello katalog där du ska registrera ditt program.</span><span class="sxs-lookup"><span data-stu-id="a29de-191">On hello left, click **Active Directory**, and then select hello directory in which you will register your application.</span></span> <br> <br> <span data-ttu-id="a29de-192">**Obs:** måste du välja hello samma katalog som innehåller hello Azure-prenumeration som du skapade nyckelvalvet.</span><span class="sxs-lookup"><span data-stu-id="a29de-192">**Note:** You must select hello same directory that contains hello Azure subscription with which you created your key vault.</span></span> <span data-ttu-id="a29de-193">Om du inte vet vilken katalog detta är klickar du på **inställningar**, identifiera hello prenumeration som du skapade ditt nyckelvalv och Observera hello namnet på hello katalog visas i hello sista kolumnen.</span><span class="sxs-lookup"><span data-stu-id="a29de-193">If you do not know which directory this is, click **Settings**, identify hello subscription with which you created your key vault, and note hello name of hello directory displayed in hello last column.</span></span>
3. <span data-ttu-id="a29de-194">Klicka på **Program**.</span><span class="sxs-lookup"><span data-stu-id="a29de-194">Click **APPLICATIONS**.</span></span> <span data-ttu-id="a29de-195">Om inga appar har lagts till tooyour directory kan den här sidan visar endast hello **Lägg till en App** länk.</span><span class="sxs-lookup"><span data-stu-id="a29de-195">If no apps have been added tooyour directory, this page shows only hello **Add an App** link.</span></span> <span data-ttu-id="a29de-196">Klicka på länken hello eller också kan du klicka på **lägga till** i hello kommandofält.</span><span class="sxs-lookup"><span data-stu-id="a29de-196">Click hello link, or alternatively, you can click **ADD** on hello command bar.</span></span>
4. <span data-ttu-id="a29de-197">I hello **Lägg till program** på hello **vad vill du vill toodo?** klickar du på **Lägg till ett program som min organisation utvecklar**.</span><span class="sxs-lookup"><span data-stu-id="a29de-197">In hello **ADD APPLICATION** wizard, on hello **What do you want toodo?** page, click **Add an application my organization is developing**.</span></span>
5. <span data-ttu-id="a29de-198">På hello **berätta om tillämpningsprogrammet** , ange ett namn för ditt program och väljer sedan **WEB APPLICATION och/eller webb-API** (hello standard).</span><span class="sxs-lookup"><span data-stu-id="a29de-198">On hello **Tell us about your application** page, specify a name for your application, and then select **WEB APPLICATION AND/OR WEB API** (hello default).</span></span> <span data-ttu-id="a29de-199">Klicka på hello **nästa** ikon.</span><span class="sxs-lookup"><span data-stu-id="a29de-199">Click hello **Next** icon.</span></span>
6. <span data-ttu-id="a29de-200">På hello **appegenskaper** anger hello **SIGN-ON-URL** och **APP-ID URI** för webbprogram.</span><span class="sxs-lookup"><span data-stu-id="a29de-200">On hello **App properties** page, specify hello **SIGN-ON URL** and **APP ID URI** for your web application.</span></span> <span data-ttu-id="a29de-201">Om programmet inte har dessa värden kan du hitta på dem för det här steget (du kan till exempel skriva http://test1.contoso.com i båda rutorna).</span><span class="sxs-lookup"><span data-stu-id="a29de-201">If your application does not have these values, you can make them up for this step (for example, you could specify http://test1.contoso.com for both boxes).</span></span> <span data-ttu-id="a29de-202">Det spelar ingen roll om dessa platser finns eller inte.</span><span class="sxs-lookup"><span data-stu-id="a29de-202">It does not matter if these sites exist.</span></span> <span data-ttu-id="a29de-203">Vad är viktigt är hello appen ID URI för varje program är olika för varje program i din katalog.</span><span class="sxs-lookup"><span data-stu-id="a29de-203">What is important is that hello app ID URI for each application is different for every application in your directory.</span></span> <span data-ttu-id="a29de-204">hello directory använder denna sträng tooidentify din app.</span><span class="sxs-lookup"><span data-stu-id="a29de-204">hello directory uses this string tooidentify your app.</span></span>
7. <span data-ttu-id="a29de-205">Klicka på hello **Slutför** ikonen toosave ändringarna i hello guiden.</span><span class="sxs-lookup"><span data-stu-id="a29de-205">Click hello **Complete** icon toosave your changes in hello wizard.</span></span>
8. <span data-ttu-id="a29de-206">På hello **Snabbstart** klickar du på **konfigurera**.</span><span class="sxs-lookup"><span data-stu-id="a29de-206">On hello **Quick Start** page, click **CONFIGURE**.</span></span>
9. <span data-ttu-id="a29de-207">Rulla toohello **nycklar** avsnittet väljer hello varaktighet och klicka sedan på **spara**.</span><span class="sxs-lookup"><span data-stu-id="a29de-207">Scroll toohello **keys** section, select hello duration, and then click **SAVE**.</span></span> <span data-ttu-id="a29de-208">hello sidan uppdateras och innehåller nu ett nyckelvärde.</span><span class="sxs-lookup"><span data-stu-id="a29de-208">hello page refreshes and now shows a key value.</span></span> <span data-ttu-id="a29de-209">Du måste konfigurera ditt program med det här värdet för nyckeln och hello **klient-ID** värde.</span><span class="sxs-lookup"><span data-stu-id="a29de-209">You must configure your application with this key value and hello **CLIENT ID** value.</span></span> <span data-ttu-id="a29de-210">(Anvisningar för den här konfigurationen är programspecifika.)</span><span class="sxs-lookup"><span data-stu-id="a29de-210">(Instructions for this configuration are application-specific.)</span></span>
10. <span data-ttu-id="a29de-211">Kopiera hello klient-ID-värde från den här sidan som du vill använda i hello nästa steg tooset behörigheter på ditt valv.</span><span class="sxs-lookup"><span data-stu-id="a29de-211">Copy hello client ID value from this page, which you will use in hello next step tooset permissions on your vault.</span></span>

## <span data-ttu-id="a29de-212"><a id="authorize"></a>Auktorisera hello programmet toouse hello nyckel eller hemlighet.</span><span class="sxs-lookup"><span data-stu-id="a29de-212"><a id="authorize"></a>Authorize hello application toouse hello key or secret</span></span>
<span data-ttu-id="a29de-213">tooauthorize hello programmet tooaccess hello nyckel eller hemlighet i hello valvet, Använd den [Set AzureRmKeyVaultAccessPolicy](/powershell/module/azurerm.keyvault/set-azurermkeyvaultaccesspolicy) cmdlet.</span><span class="sxs-lookup"><span data-stu-id="a29de-213">tooauthorize hello application tooaccess hello key or secret in hello vault, use the [Set-AzureRmKeyVaultAccessPolicy](/powershell/module/azurerm.keyvault/set-azurermkeyvaultaccesspolicy) cmdlet.</span></span>

<span data-ttu-id="a29de-214">Om din valvnamnet är till exempel **ContosoKeyVault** och hello-program som du vill tooauthorize har ett klient-ID för 8f8c4bbd-485b-45fd-98f7-ec6300b7b4ed och du vill tooauthorize hello programmet toodecrypt och logga med nycklar i ditt valv kör hello följande:</span><span class="sxs-lookup"><span data-stu-id="a29de-214">For example, if your vault name is **ContosoKeyVault** and hello application you want tooauthorize has a client ID of 8f8c4bbd-485b-45fd-98f7-ec6300b7b4ed, and you want tooauthorize hello application toodecrypt and sign with keys in your vault, run hello following:</span></span>

    Set-AzureRmKeyVaultAccessPolicy -VaultName 'ContosoKeyVault' -ServicePrincipalName 8f8c4bbd-485b-45fd-98f7-ec6300b7b4ed -PermissionsToKeys decrypt,sign

<span data-ttu-id="a29de-215">Om du vill tooauthorize att samma program tooread hemligheter i ditt valv, kör du hello följande:</span><span class="sxs-lookup"><span data-stu-id="a29de-215">If you want tooauthorize that same application tooread secrets in your vault, run hello following:</span></span>

    Set-AzureRmKeyVaultAccessPolicy -VaultName 'ContosoKeyVault' -ServicePrincipalName 8f8c4bbd-485b-45fd-98f7-ec6300b7b4ed -PermissionsToSecrets Get

## <span data-ttu-id="a29de-216"><a id="HSM"></a>Om du vill toouse en maskinvarusäkerhetsmodul (HSM)</span><span class="sxs-lookup"><span data-stu-id="a29de-216"><a id="HSM"></a>If you want toouse a hardware security module (HSM)</span></span>
<span data-ttu-id="a29de-217">För ytterligare säkerhet kan du importera eller generera nycklar i maskinvarusäkerhetsmoduler (HSM) som lämnar aldrig hello HSM gräns.</span><span class="sxs-lookup"><span data-stu-id="a29de-217">For added assurance, you can import or generate keys in hardware security modules (HSMs) that never leave hello HSM boundary.</span></span> <span data-ttu-id="a29de-218">hello HSM är FIPS 140-2 Level 2-verifierade.</span><span class="sxs-lookup"><span data-stu-id="a29de-218">hello HSMs are FIPS 140-2 Level 2 validated.</span></span> <span data-ttu-id="a29de-219">Om det här kravet inte gäller tooyou, hoppa över det här avsnittet och gå för[ta bort hello nyckelvalvet och associerade nycklar och hemligheter](#delete).</span><span class="sxs-lookup"><span data-stu-id="a29de-219">If this requirement doesn't apply tooyou, skip this section and go too[Delete hello key vault and associated keys and secrets](#delete).</span></span>

<span data-ttu-id="a29de-220">toocreate nycklarna HSM-skyddad måste du använda hello [Azure Key Vault Premium service tier toosupport HSM-skyddade nycklar](https://azure.microsoft.com/pricing/free-trial/).</span><span class="sxs-lookup"><span data-stu-id="a29de-220">toocreate these HSM-protected keys, you must use hello [Azure Key Vault Premium service tier toosupport HSM-protected keys](https://azure.microsoft.com/pricing/free-trial/).</span></span> <span data-ttu-id="a29de-221">Observera även att den här funktionen inte är tillgänglig för Azure i Kina.</span><span class="sxs-lookup"><span data-stu-id="a29de-221">In addition, note that this functionality is not available for Azure China.</span></span>

<span data-ttu-id="a29de-222">När du skapar hello nyckelvalvet, lägger du till hello **- SKU** parameter:</span><span class="sxs-lookup"><span data-stu-id="a29de-222">When you create hello key vault, add hello **-SKU** parameter:</span></span>

    New-AzureRmKeyVault -VaultName 'ContosoKeyVaultHSM' -ResourceGroupName 'ContosoResourceGroup' -Location 'East Asia' -SKU 'Premium'



<span data-ttu-id="a29de-223">Du kan lägga till programvara-skyddade nycklar (som visas tidigare) och HSM-skyddade nycklar toothis nyckelvalvet.</span><span class="sxs-lookup"><span data-stu-id="a29de-223">You can add software-protected keys (as shown earlier) and HSM-protected keys toothis key vault.</span></span> <span data-ttu-id="a29de-224">toocreate HSM-skyddad nyckel set hello **-målet** parametern too'HSM':</span><span class="sxs-lookup"><span data-stu-id="a29de-224">toocreate an HSM-protected key, set hello **-Destination** parameter too'HSM':</span></span>

    $key = Add-AzureKeyVaultKey -VaultName 'ContosoKeyVaultHSM' -Name 'ContosoFirstHSMKey' -Destination 'HSM'

<span data-ttu-id="a29de-225">Du kan använda följande kommando tooimport hello en nyckel från en. PFX-filen på datorn.</span><span class="sxs-lookup"><span data-stu-id="a29de-225">You can use hello following command tooimport a key from a .PFX file on your computer.</span></span> <span data-ttu-id="a29de-226">Detta kommando importerar hello nyckel till HSM: er i hello Key Vault-tjänsten:</span><span class="sxs-lookup"><span data-stu-id="a29de-226">This command imports hello key into HSMs in hello Key Vault service:</span></span>

    $key = Add-AzureKeyVaultKey -VaultName 'ContosoKeyVaultHSM' -Name 'ContosoFirstHSMKey' -KeyFilePath 'c:\softkey.pfx' -KeyFilePassword $securepfxpwd -Destination 'HSM'


<span data-ttu-id="a29de-227">hello nästa kommando importerar en ”bring your own key” paketet (BYOK).</span><span class="sxs-lookup"><span data-stu-id="a29de-227">hello next command imports a “bring your own key" (BYOK) package.</span></span> <span data-ttu-id="a29de-228">Det här scenariot kan du skapa din nyckel i din lokala HSM och överföra det tooHSMs i hello Key Vault-tjänsten, utan hello nyckel lämnar hello HSM gräns:</span><span class="sxs-lookup"><span data-stu-id="a29de-228">This scenario lets you generate your key in your local HSM, and transfer it tooHSMs in hello Key Vault service, without hello key leaving hello HSM boundary:</span></span>

    $key = Add-AzureKeyVaultKey -VaultName 'ContosoKeyVaultHSM' -Name 'ContosoFirstHSMKey' -KeyFilePath 'c:\ITByok.byok' -Destination 'HSM'

<span data-ttu-id="a29de-229">Detaljerade instruktioner om hur toogenerate BYOK paketet, se [hur toogenerate och överför HSM-skyddade nycklar för Azure Key Vault](key-vault-hsm-protected-keys.md).</span><span class="sxs-lookup"><span data-stu-id="a29de-229">For more detailed instructions about how toogenerate this BYOK package, see [How toogenerate and transfer HSM-protected keys for Azure Key Vault](key-vault-hsm-protected-keys.md).</span></span>

## <span data-ttu-id="a29de-230"><a id="delete"></a>Ta bort hello nyckelvalvet och associerade nycklar och hemligheter</span><span class="sxs-lookup"><span data-stu-id="a29de-230"><a id="delete"></a>Delete hello key vault and associated keys and secrets</span></span>
<span data-ttu-id="a29de-231">Om du behöver inte längre hello nyckelvalvet och hello nyckel eller hemlighet som den innehåller, kan du ta bort hello nyckelvalv med hello [ta bort AzureRmKeyVault](/powershell/module/azurerm.keyvault/remove-azurermkeyvault) cmdlet:</span><span class="sxs-lookup"><span data-stu-id="a29de-231">If you no longer need hello key vault and hello key or secret that it contains, you can delete hello key vault by using hello [Remove-AzureRmKeyVault](/powershell/module/azurerm.keyvault/remove-azurermkeyvault) cmdlet:</span></span>

    Remove-AzureRmKeyVault -VaultName 'ContosoKeyVault'

<span data-ttu-id="a29de-232">Eller, du kan ta bort en hela Azure resursgrupp, vilket innefattar hello nyckelvalvet och andra resurser som du ingår i gruppen:</span><span class="sxs-lookup"><span data-stu-id="a29de-232">Or, you can delete an entire Azure resource group, which includes hello key vault and any other resources that you included in that group:</span></span>

    Remove-AzureRmResourceGroup -ResourceGroupName 'ContosoResourceGroup'


## <span data-ttu-id="a29de-233"><a id="other"></a>Andra Azure PowerShell-cmdletar</span><span class="sxs-lookup"><span data-stu-id="a29de-233"><a id="other"></a>Other Azure PowerShell Cmdlets</span></span>
<span data-ttu-id="a29de-234">Andra kommandon som kan vara användbara för att hantera Azure Key Vault:</span><span class="sxs-lookup"><span data-stu-id="a29de-234">Other commands that you might find useful for managing Azure Key Vault:</span></span>

* <span data-ttu-id="a29de-235">`$Keys = Get-AzureKeyVaultKey -VaultName 'ContosoKeyVault'`: Det här kommandot hämtar en tabellvy över alla nycklar och valda egenskaper.</span><span class="sxs-lookup"><span data-stu-id="a29de-235">`$Keys = Get-AzureKeyVaultKey -VaultName 'ContosoKeyVault'`: This command gets a tabular display of all keys and selected properties.</span></span>
* <span data-ttu-id="a29de-236">`$Keys[0]`: Det här kommandot visar en fullständig lista över egenskaper för hello angiven nyckel</span><span class="sxs-lookup"><span data-stu-id="a29de-236">`$Keys[0]`: This command displays a full list of properties for hello specified key</span></span>
* <span data-ttu-id="a29de-237">`Get-AzureKeyVaultSecret`: Det här kommandot visar en tabellvy över alla hemliga namn och valda egenskaper.</span><span class="sxs-lookup"><span data-stu-id="a29de-237">`Get-AzureKeyVaultSecret`: This command lists a tabular display of all secret names and selected properties.</span></span>
* <span data-ttu-id="a29de-238">`Remove-AzureKeyVaultKey -VaultName 'ContosoKeyVault' -Name 'ContosoFirstKey'`: Exempel hur tooremove en viss nyckel.</span><span class="sxs-lookup"><span data-stu-id="a29de-238">`Remove-AzureKeyVaultKey -VaultName 'ContosoKeyVault' -Name 'ContosoFirstKey'`: Example how tooremove a specific key.</span></span>
* <span data-ttu-id="a29de-239">`Remove-AzureKeyVaultSecret -VaultName 'ContosoKeyVault' -Name 'SQLPassword'`: Exempel hur tooremove en specifik hemlighet.</span><span class="sxs-lookup"><span data-stu-id="a29de-239">`Remove-AzureKeyVaultSecret -VaultName 'ContosoKeyVault' -Name 'SQLPassword'`: Example how tooremove a specific secret.</span></span>

## <span data-ttu-id="a29de-240"><a id="next"></a>Nästa steg</span><span class="sxs-lookup"><span data-stu-id="a29de-240"><a id="next"></a>Next steps</span></span>
<span data-ttu-id="a29de-241">En uppföljningskurs där Azure Key Vault används i en webbapp finns i [Använda Azure Key Vault från en webbapp](key-vault-use-from-web-application.md).</span><span class="sxs-lookup"><span data-stu-id="a29de-241">For a follow-up tutorial that uses Azure Key Vault in a web application, see [Use Azure Key Vault from a Web Application](key-vault-use-from-web-application.md).</span></span>

<span data-ttu-id="a29de-242">toosee hur nyckelvalvet används finns i [Azure Key Vault-loggning](key-vault-logging.md).</span><span class="sxs-lookup"><span data-stu-id="a29de-242">toosee how your key vault is being used, see [Azure Key Vault Logging](key-vault-logging.md).</span></span>

<span data-ttu-id="a29de-243">En lista över hello senaste Azure PowerShell-cmdlets för Azure Key Vault finns [Azure Key Vault-Cmdlets](/powershell/module/azurerm.keyvault/#key_vault).</span><span class="sxs-lookup"><span data-stu-id="a29de-243">For a list of hello latest Azure PowerShell cmdlets for Azure Key Vault, see [Azure Key Vault Cmdlets](/powershell/module/azurerm.keyvault/#key_vault).</span></span>

<span data-ttu-id="a29de-244">Programmering referenser finns [hello Azure Key Vault Utvecklarhandbok](key-vault-developers-guide.md).</span><span class="sxs-lookup"><span data-stu-id="a29de-244">For programming references, see [hello Azure Key Vault developer's guide](key-vault-developers-guide.md).</span></span>

---
title: "aaaView och använda en virtuell dators Azure Resource Manager-mall | Microsoft Docs"
description: "Lär dig hur hello toouse Azure Resource Manager-mall från en virtuell dator toocreate andra virtuella datorer"
services: devtest-lab,virtual-machines,visual-studio-online
documentationcenter: na
author: tomarcher
manager: douge
editor: 
ms.assetid: a759d9ce-655c-4ac6-8834-cb29dd7d30dd
ms.service: devtest-lab
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 07/05/2017
ms.author: tarcher
ms.openlocfilehash: b79f7eb4171793681a0b654e6e72a83191c76bde
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: sv-SE
ms.lasthandoff: 10/06/2017
---
# <a name="use-a-virtual-machines-azure-resource-manager-template"></a><span data-ttu-id="887b5-103">Använd Azure Resource Manager-mall för en virtuell dator</span><span class="sxs-lookup"><span data-stu-id="887b5-103">Use a virtual machine's Azure Resource Manager template</span></span>

<span data-ttu-id="887b5-104">När du skapar en virtuell dator (VM) i DevTest Labs via hello [Azure-portalen](http://go.microsoft.com/fwlink/p/?LinkID=525040), du kan visa hello Azure Resource Manager-mallen innan du sparar hello VM.</span><span class="sxs-lookup"><span data-stu-id="887b5-104">When you are creating a virtual machine (VM) in DevTest Labs through hello [Azure portal](http://go.microsoft.com/fwlink/p/?LinkID=525040), you can view hello Azure Resource Manager template before you save hello VM.</span></span> <span data-ttu-id="887b5-105">hello mall kan sedan användas som en bas-toocreate mer lab virtuella datorer med hello samma inställningar.</span><span class="sxs-lookup"><span data-stu-id="887b5-105">hello template can then be used as a basis toocreate more lab VMs with hello same settings.</span></span>

<span data-ttu-id="887b5-106">Den här artikeln beskriver hur tooview hello Resource Manager-mall när du skapar en virtuell dator och hur toodeploy den senare tooautomate skapa hello samma virtuella dator.</span><span class="sxs-lookup"><span data-stu-id="887b5-106">This article describes how tooview hello Resource Manager template when creating a VM, and how toodeploy it later tooautomate creation of hello same VM.</span></span>

## <a name="multi-vm-vs-single-vm-resource-manager-templates"></a><span data-ttu-id="887b5-107">Flera Virtuella kontra enskild VM Resource Manager-mallar</span><span class="sxs-lookup"><span data-stu-id="887b5-107">Multi-VM vs. single-VM Resource Manager templates</span></span>
<span data-ttu-id="887b5-108">Det finns två sätt toocreate virtuella datorer för i DevTest Labs med hjälp av en Resource Manager-mall: etablera hello Microsoft.DevTestLab/labs/virtualmachines resurs eller etablera hello Microsoft.Commpute/virtualmachines resurs.</span><span class="sxs-lookup"><span data-stu-id="887b5-108">There are two ways toocreate VMs in DevTest Labs using a Resource Manager template: provision hello Microsoft.DevTestLab/labs/virtualmachines resource or provision hello Microsoft.Commpute/virtualmachines resource.</span></span> <span data-ttu-id="887b5-109">Varje används i olika scenarier och kräver olika behörigheter.</span><span class="sxs-lookup"><span data-stu-id="887b5-109">Each is used in different scenarios and require different permissions.</span></span>

- <span data-ttu-id="887b5-110">Resource Manager-mallar som använder en resurstyp i Microsoft.DevTestLab/labs/virtualmachines (som deklarerats i hello ”” resursegenskap i hello mall) kan etablera enskilda lab virtuella datorer.</span><span class="sxs-lookup"><span data-stu-id="887b5-110">Resource Manager templates that use a Microsoft.DevTestLab/labs/virtualmachines resource type (as declared in hello “resource” property in hello template) can provision individual lab VMs.</span></span> <span data-ttu-id="887b5-111">Varje virtuell dator visas sedan som ett enskilt objekt i listan för hello DevTest Labs virtuella datorer:</span><span class="sxs-lookup"><span data-stu-id="887b5-111">Each VM then shows up as a single item in hello DevTest Labs virtual machines list:</span></span>

   ![Lista över virtuella datorer som enda objekt i listan för hello DevTest Labs virtuella datorer](./media/devtest-lab-use-arm-template/devtestlab-lab-vm-single-item.png)

   <span data-ttu-id="887b5-113">Den här typen av Resource Manager-mall kan etableras via hello Azure PowerShell-kommandot **ny AzureRmResourceGroupDeployment** eller via hello Azure CLI kommandot **az distribution skapa** .</span><span class="sxs-lookup"><span data-stu-id="887b5-113">This type of Resource Manager template can be provisioned through hello Azure PowerShell command **New-AzureRmResourceGroupDeployment** or through hello Azure CLI command **az group deployment create**.</span></span> <span data-ttu-id="887b5-114">Det krävs administratörsbehörighet, så att användare som är tilldelade till en DevTest Labs användarroll inte kan utföra hello-distribution.</span><span class="sxs-lookup"><span data-stu-id="887b5-114">It requires administrator permissions, so users who are assigned with a DevTest Labs user role can’t perform hello deployment.</span></span> 

- <span data-ttu-id="887b5-115">Resource Manager-mallar som använder en Microsoft.Compute/virtualmachines resurstyp kan tillhandahålla flera virtuella datorer som en enda miljö i lista över hello DevTest Labs virtuella datorer:</span><span class="sxs-lookup"><span data-stu-id="887b5-115">Resource Manager templates that use a Microsoft.Compute/virtualmachines resource type can provision multiple VMs as a single environment in hello DevTest Labs virtual machines list:</span></span>

   ![Lista över virtuella datorer som enda objekt i listan för hello DevTest Labs virtuella datorer](./media/devtest-lab-use-arm-template/devtestlab-lab-vm-single-environment.png)

   <span data-ttu-id="887b5-117">Virtuella datorer i samma miljö kan hanteras tillsammans hello och dela hello samma livscykel.</span><span class="sxs-lookup"><span data-stu-id="887b5-117">VMs in hello same environment can be managed together and share hello same lifecycle.</span></span> <span data-ttu-id="887b5-118">Användare som är tilldelade till en användarroll för DevTest Labs kan skapa miljöer med hjälp av dessa mallar så länge Hej administratör har konfigurerat hello lab sätt.</span><span class="sxs-lookup"><span data-stu-id="887b5-118">Users who are assigned with a DevTest Labs user role can create environments using those templates as long as hello administrator has configured hello lab that way.</span></span>

<span data-ttu-id="887b5-119">hello resten av den här artikeln beskrivs Resource Manager-mallar som använder Mirosoft.DevTestLab/labs/virtualmachines.</span><span class="sxs-lookup"><span data-stu-id="887b5-119">hello remainder of this article discusses Resource Manager templates that use Mirosoft.DevTestLab/labs/virtualmachines.</span></span> <span data-ttu-id="887b5-120">Dessa används av lab administratörer tooautomate lab skapa en virtuell dator (till exempel claimable virtuella datorer) eller generering av gyllene bild (till exempel bild factory).</span><span class="sxs-lookup"><span data-stu-id="887b5-120">These are used by lab admins tooautomate lab VM creation (for example, claimable VMs) or golden image generation (for example, image factory).</span></span>

<span data-ttu-id="887b5-121">[Bästa praxis för att skapa mallar för Azure Resource Manager](https://docs.microsoft.com/azure/azure-resource-manager/resource-manager-template-best-practices) erbjuder många riktlinjer och förslag toohelp du skapa Azure Resource Manager-mallar som är tillförlitlig och enkel toouse.</span><span class="sxs-lookup"><span data-stu-id="887b5-121">[Best practices for creating Azure Resource Manager templates](https://docs.microsoft.com/azure/azure-resource-manager/resource-manager-template-best-practices) offers many guidelines and suggestions toohelp you create Azure Resource Manager templates that are reliable and easy toouse.</span></span>

## <a name="view-and-save-a-virtual-machines-resource-manager-template"></a><span data-ttu-id="887b5-122">Visa och spara Resource Manager-mall för en virtuell dator</span><span class="sxs-lookup"><span data-stu-id="887b5-122">View and save a virtual machine's Resource Manager template</span></span>
1. <span data-ttu-id="887b5-123">Följ anvisningarna för hello i [skapar din första virtuella datorn i ett labb](devtest-lab-create-first-vm.md) toobegin skapar en virtuell dator.</span><span class="sxs-lookup"><span data-stu-id="887b5-123">Follow hello steps at [Create your first VM in a lab](devtest-lab-create-first-vm.md) toobegin creating a virtual machine.</span></span>
1. <span data-ttu-id="887b5-124">Ange information om hello som krävs för den virtuella datorn och Lägg till alla artefakter som du vill använda för den här virtuella datorn.</span><span class="sxs-lookup"><span data-stu-id="887b5-124">Enter hello required information for your virtual machine and add any artifacts you want for this VM.</span></span>
1. <span data-ttu-id="887b5-125">Längst ned hello hello konfigurera inställningar för fönstret, Välj **visa ARM-mallen**.</span><span class="sxs-lookup"><span data-stu-id="887b5-125">At hello bottom of hello Configure settings window, choose **View ARM template**.</span></span>

   ![Visa knappen för ARM-mall](./media/devtest-lab-use-arm-template/devtestlab-lab-view-rm-template.png)
1. <span data-ttu-id="887b5-127">Kopiera och spara hello Resource Manager-mall toouse senare toocreate en annan virtuell dator.</span><span class="sxs-lookup"><span data-stu-id="887b5-127">Copy and save hello Resource Manager template toouse later toocreate another virtual machine.</span></span>

   ![Resource manager-mall toosave för senare användning](./media/devtest-lab-use-arm-template/devtestlab-lab-copy-rm-template.png)

<span data-ttu-id="887b5-129">När du har sparat hello Resource Manager-mall, måste du uppdatera hello parametrar avsnitt i hello mall innan du kan använda den.</span><span class="sxs-lookup"><span data-stu-id="887b5-129">After you have saved hello Resource Manager template, you must update hello parameters section of hello template before you can use it.</span></span> <span data-ttu-id="887b5-130">Du kan skapa en parameter.json som anpassar bara hello parametrar utanför hello faktiska Resource Manager-mall.</span><span class="sxs-lookup"><span data-stu-id="887b5-130">You can create a parameter.json that customizes just hello parameters, outside of hello actual Resource Manager template.</span></span> 

![Anpassa parametrar med hjälp av en JSON-fil](./media/devtest-lab-use-arm-template/devtestlab-lab-custom-params.png)

## <a name="deploy-a-resource-manager-template-toocreate-a-vm"></a><span data-ttu-id="887b5-132">Distribuera en virtuell dator för toocreate en Resource Manager-mall</span><span class="sxs-lookup"><span data-stu-id="887b5-132">Deploy a Resource Manager template toocreate a VM</span></span>
<span data-ttu-id="887b5-133">När du har sparat en Resource Manager-mall och anpassas efter dina behov kan använda du den tooautomate skapa en virtuell dator.</span><span class="sxs-lookup"><span data-stu-id="887b5-133">After you have saved a Resource Manager template and customized it for your needs, you can use it tooautomate VM creation.</span></span> <span data-ttu-id="887b5-134">[Distribuera resurser med Resource Manager-mallar och Azure PowerShell](https://docs.microsoft.com/azure/azure-resource-manager/resource-group-template-deploy) beskriver hur toouse Azure PowerShell med Resource Manager mallar toodeploy tooAzure dina resurser.</span><span class="sxs-lookup"><span data-stu-id="887b5-134">[Deploy resources with Resource Manager templates and Azure PowerShell](https://docs.microsoft.com/azure/azure-resource-manager/resource-group-template-deploy) describes how toouse Azure PowerShell with Resource Manager templates toodeploy your resources tooAzure.</span></span> <span data-ttu-id="887b5-135">[Distribuera resurser med Resource Manager-mallar och Azure CLI](https://docs.microsoft.com/azure/azure-resource-manager/resource-group-template-deploy-cli) beskriver hur toouse Azure CLI med Resource Manager mallar toodeploy tooAzure dina resurser.</span><span class="sxs-lookup"><span data-stu-id="887b5-135">[Deploy resources with Resource Manager templates and Azure CLI](https://docs.microsoft.com/azure/azure-resource-manager/resource-group-template-deploy-cli) describes how toouse Azure CLI with Resource Manager templates toodeploy your resources tooAzure.</span></span>

> [!NOTE]
> <span data-ttu-id="887b5-136">Endast en användare med lab ägare behörighet kan skapa virtuella datorer från en Resource Manager-mall med hjälp av Azure PowerShell.</span><span class="sxs-lookup"><span data-stu-id="887b5-136">Only a user with lab owner permissions can create VMs from a Resource Manager template by using Azure PowerShell.</span></span> <span data-ttu-id="887b5-137">Om du vill skapa en virtuell dator tooautomate med hjälp av en Resource Manager-mall och du har bara användarbehörigheter, kan du använda hello [ **az lab vm skapa** i hello CLI](https://docs.microsoft.com/cli/azure/lab/vm#create).</span><span class="sxs-lookup"><span data-stu-id="887b5-137">If you want tooautomate VM creation using a Resource Manager template and you only have user permissions, you can use hello [**az lab vm create** command in hello CLI](https://docs.microsoft.com/cli/azure/lab/vm#create).</span></span>

### <a name="next-steps"></a><span data-ttu-id="887b5-138">Nästa steg</span><span class="sxs-lookup"><span data-stu-id="887b5-138">Next steps</span></span>
* <span data-ttu-id="887b5-139">Lär dig hur för[skapa flera Virtuella miljöer med Resource Manager-mallar](devtest-lab-create-environment-from-arm.md).</span><span class="sxs-lookup"><span data-stu-id="887b5-139">Learn how too[Create multi-VM environments with Resource Manager templates](devtest-lab-create-environment-from-arm.md).</span></span>
* <span data-ttu-id="887b5-140">Utforska mer Snabbkurs Resource Manager-mallar för DevTest Labs automation från hello [offentliga DevTest Labs GitHub-repo-](https://github.com/Azure/azure-quickstart-templates).</span><span class="sxs-lookup"><span data-stu-id="887b5-140">Explore more quick-start Resource Manager templates for DevTest Labs automation from hello [public DevTest Labs GitHub repo](https://github.com/Azure/azure-quickstart-templates).</span></span>

---
title: "aaaManage Azure mikrotjänster belastningen med hjälp av mätvärden | Microsoft Docs"
description: "Läs mer om hur tooconfigure och Använd mått i Service Fabric toomanage tjänsten resursförbrukning."
services: service-fabric
documentationcenter: .net
author: masnider
manager: timlt
editor: 
ms.assetid: 0d622ea6-a7c7-4bef-886b-06e6b85a97fb
ms.service: Service-Fabric
ms.devlang: dotnet
ms.topic: article
ms.tgt_pltfrm: NA
ms.workload: NA
ms.date: 08/18/2017
ms.author: masnider
ms.openlocfilehash: 592dc749ce30683a1e439a702b7d0dc0a638276f
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: sv-SE
ms.lasthandoff: 10/06/2017
---
# <a name="managing-resource-consumption-and-load-in-service-fabric-with-metrics"></a><span data-ttu-id="03d55-103">Hantera resursförbrukning och belastningen i Service Fabric med</span><span class="sxs-lookup"><span data-stu-id="03d55-103">Managing resource consumption and load in Service Fabric with metrics</span></span>
<span data-ttu-id="03d55-104">*Mått* hello resurser som din dig för tjänster och som tillhandahålls av hello noder i klustret hello.</span><span class="sxs-lookup"><span data-stu-id="03d55-104">*Metrics* are hello resources that your services care about and which are provided by hello nodes in hello cluster.</span></span> <span data-ttu-id="03d55-105">Ett mått är något som du vill toomanage i ordning tooimprove eller övervaka hello prestanda-tjänster.</span><span class="sxs-lookup"><span data-stu-id="03d55-105">A metric is anything that you want toomanage in order tooimprove or monitor hello performance of your services.</span></span> <span data-ttu-id="03d55-106">Exempelvis kan du titta på minne förbrukning tooknow om tjänsten är överbelastad.</span><span class="sxs-lookup"><span data-stu-id="03d55-106">For example, you might watch memory consumption tooknow if your service is overloaded.</span></span> <span data-ttu-id="03d55-107">Ett annat syfte är toofigure ut om hello-tjänsten kan flytta någon annanstans där minne är mindre begränsad i ordning tooget bättre prestanda.</span><span class="sxs-lookup"><span data-stu-id="03d55-107">Another use is toofigure out whether hello service could move elsewhere where memory is less constrained in order tooget better performance.</span></span>

<span data-ttu-id="03d55-108">Till exempel minne, Disk och CPU-användning är exempel på mått.</span><span class="sxs-lookup"><span data-stu-id="03d55-108">Things like Memory, Disk, and CPU usage are examples of metrics.</span></span> <span data-ttu-id="03d55-109">De här måtten är fysiska statistik, och resurser som motsvarar toophysical resurser på hello-nod som behöver toobe hanteras.</span><span class="sxs-lookup"><span data-stu-id="03d55-109">These metrics are physical metrics, resources that correspond toophysical resources on hello node that need toobe managed.</span></span> <span data-ttu-id="03d55-110">Mått kan också vara (och ofta är) logiska mått.</span><span class="sxs-lookup"><span data-stu-id="03d55-110">Metrics can also be (and commonly are) logical metrics.</span></span> <span data-ttu-id="03d55-111">Logisk är till exempel ”MyWorkQueueDepth” eller ”MessagesToProcess” eller ”TotalRecords”.</span><span class="sxs-lookup"><span data-stu-id="03d55-111">Logical metrics are things like “MyWorkQueueDepth” or "MessagesToProcess" or "TotalRecords".</span></span> <span data-ttu-id="03d55-112">Logiska mått är programdefinierade och motsvarar indirekt toosome fysiska resursförbrukning.</span><span class="sxs-lookup"><span data-stu-id="03d55-112">Logical metrics are application-defined and indirectly correspond toosome physical resource consumption.</span></span> <span data-ttu-id="03d55-113">Logiska mått är vanliga eftersom det kan vara svårt toomeasure och rapportera förbrukning av fysiska resurser för per tjänst.</span><span class="sxs-lookup"><span data-stu-id="03d55-113">Logical metrics are common because it can be hard toomeasure and report consumption of physical resources on a per-service basis.</span></span> <span data-ttu-id="03d55-114">hello komplexiteten med att mäta och rapportera egna fysiska mått är också varför Service Fabric innehåller vissa siffror som standard.</span><span class="sxs-lookup"><span data-stu-id="03d55-114">hello complexity of measuring and reporting your own physical metrics is also why Service Fabric provides some default metrics.</span></span>

## <a name="default-metrics"></a><span data-ttu-id="03d55-115">Standard-mått</span><span class="sxs-lookup"><span data-stu-id="03d55-115">Default metrics</span></span>
<span data-ttu-id="03d55-116">Anta att du vill att tooget startade skrivning och distribuera din tjänst.</span><span class="sxs-lookup"><span data-stu-id="03d55-116">Let’s say that you want tooget started writing and deploying your service.</span></span> <span data-ttu-id="03d55-117">Nu vet du inte vilka fysiska eller logiska resurser som den förbrukar.</span><span class="sxs-lookup"><span data-stu-id="03d55-117">At this point you don’t know what physical or logical resources it consumes.</span></span> <span data-ttu-id="03d55-118">Det är bra!</span><span class="sxs-lookup"><span data-stu-id="03d55-118">That’s fine!</span></span> <span data-ttu-id="03d55-119">hello resurshanteraren för Service Fabric-kluster använder vissa standard mått när inga andra mått har angetts.</span><span class="sxs-lookup"><span data-stu-id="03d55-119">hello Service Fabric Cluster Resource Manager uses some default metrics when no other metrics are specified.</span></span> <span data-ttu-id="03d55-120">De är:</span><span class="sxs-lookup"><span data-stu-id="03d55-120">They are:</span></span>

  - <span data-ttu-id="03d55-121">PrimaryCount - antal primära repliker på hello nod</span><span class="sxs-lookup"><span data-stu-id="03d55-121">PrimaryCount - count of Primary replicas on hello node</span></span> 
  - <span data-ttu-id="03d55-122">ReplicaCount - antal totala tillståndskänslig repliker på hello nod</span><span class="sxs-lookup"><span data-stu-id="03d55-122">ReplicaCount - count of total stateful replicas on hello node</span></span>
  - <span data-ttu-id="03d55-123">Antal - antalet för alla service-objekt (tillståndslösa och tillståndskänsliga) på hello nod</span><span class="sxs-lookup"><span data-stu-id="03d55-123">Count - count of all service objects (stateless and stateful) on hello node</span></span>

| <span data-ttu-id="03d55-124">Mått</span><span class="sxs-lookup"><span data-stu-id="03d55-124">Metric</span></span> | <span data-ttu-id="03d55-125">Läs in tillståndslös instans</span><span class="sxs-lookup"><span data-stu-id="03d55-125">Stateless Instance Load</span></span> | <span data-ttu-id="03d55-126">Tillståndskänsliga sekundära belastning</span><span class="sxs-lookup"><span data-stu-id="03d55-126">Stateful Secondary Load</span></span> | <span data-ttu-id="03d55-127">Tillståndskänsliga primära belastning</span><span class="sxs-lookup"><span data-stu-id="03d55-127">Stateful Primary Load</span></span> |
| --- | --- | --- | --- |
| <span data-ttu-id="03d55-128">PrimaryCount</span><span class="sxs-lookup"><span data-stu-id="03d55-128">PrimaryCount</span></span> |<span data-ttu-id="03d55-129">0</span><span class="sxs-lookup"><span data-stu-id="03d55-129">0</span></span> |<span data-ttu-id="03d55-130">0</span><span class="sxs-lookup"><span data-stu-id="03d55-130">0</span></span> |<span data-ttu-id="03d55-131">1</span><span class="sxs-lookup"><span data-stu-id="03d55-131">1</span></span> |
| <span data-ttu-id="03d55-132">ReplicaCount</span><span class="sxs-lookup"><span data-stu-id="03d55-132">ReplicaCount</span></span> |<span data-ttu-id="03d55-133">0</span><span class="sxs-lookup"><span data-stu-id="03d55-133">0</span></span> |<span data-ttu-id="03d55-134">1</span><span class="sxs-lookup"><span data-stu-id="03d55-134">1</span></span> |<span data-ttu-id="03d55-135">1</span><span class="sxs-lookup"><span data-stu-id="03d55-135">1</span></span> |
| <span data-ttu-id="03d55-136">Antal</span><span class="sxs-lookup"><span data-stu-id="03d55-136">Count</span></span> |<span data-ttu-id="03d55-137">1</span><span class="sxs-lookup"><span data-stu-id="03d55-137">1</span></span> |<span data-ttu-id="03d55-138">1</span><span class="sxs-lookup"><span data-stu-id="03d55-138">1</span></span> |<span data-ttu-id="03d55-139">1</span><span class="sxs-lookup"><span data-stu-id="03d55-139">1</span></span> |

<span data-ttu-id="03d55-140">Ange en hyfsad fördelning av arbete i hello kluster för grundläggande arbetsbelastningar hello standard mått.</span><span class="sxs-lookup"><span data-stu-id="03d55-140">For basic workloads, hello default metrics provide a decent distribution of work in hello cluster.</span></span> <span data-ttu-id="03d55-141">I följande exempel hello, låt oss se vad som händer när vi skapar två tjänster och förlitar sig på hello standard mätvärden för belastningsutjämning.</span><span class="sxs-lookup"><span data-stu-id="03d55-141">In hello following example, let’s see what happens when we create two services and rely on hello default metrics for balancing.</span></span> <span data-ttu-id="03d55-142">första hello-tjänsten är en tillståndskänslig service med tre partitioner och ett mål replikuppsättningen storleken på tre.</span><span class="sxs-lookup"><span data-stu-id="03d55-142">hello first service is a stateful service with three partitions and a target replica set size of three.</span></span> <span data-ttu-id="03d55-143">andra hello-tjänsten är en tillståndslös tjänst med en partition och instansantal av tre.</span><span class="sxs-lookup"><span data-stu-id="03d55-143">hello second service is a stateless service with one partition and an instance count of three.</span></span>

<span data-ttu-id="03d55-144">Här är vad du får:</span><span class="sxs-lookup"><span data-stu-id="03d55-144">Here's what you get:</span></span>

<span data-ttu-id="03d55-145"><center>
![Klustret Layout med standard-mått][Image1]
</center></span><span class="sxs-lookup"><span data-stu-id="03d55-145"><center>
![Cluster Layout with Default Metrics][Image1]
</center></span></span>

<span data-ttu-id="03d55-146">Vissa saker toonote:</span><span class="sxs-lookup"><span data-stu-id="03d55-146">Some things toonote:</span></span>
  - <span data-ttu-id="03d55-147">Primära repliker för hello tillståndskänslig service är fördelade på flera noder</span><span class="sxs-lookup"><span data-stu-id="03d55-147">Primary replicas for hello stateful service are distributed across several nodes</span></span>
  - <span data-ttu-id="03d55-148">Repliker för hello samma partition som finns på olika noder</span><span class="sxs-lookup"><span data-stu-id="03d55-148">Replicas for hello same partition are on different nodes</span></span>
  - <span data-ttu-id="03d55-149">hello Totalt antal primärfärgerna och sekundärservrar distribueras i hello kluster</span><span class="sxs-lookup"><span data-stu-id="03d55-149">hello total number of primaries and secondaries is distributed in hello cluster</span></span>
  - <span data-ttu-id="03d55-150">hello Totalt antal tjänstobjekt fördelas jämnt på varje nod</span><span class="sxs-lookup"><span data-stu-id="03d55-150">hello total number of service objects are evenly allocated on each node</span></span>

<span data-ttu-id="03d55-151">Bra!</span><span class="sxs-lookup"><span data-stu-id="03d55-151">Good!</span></span>

<span data-ttu-id="03d55-152">hello standard mått fungera utmärkt som en start.</span><span class="sxs-lookup"><span data-stu-id="03d55-152">hello default metrics work great as a start.</span></span> <span data-ttu-id="03d55-153">Dock hanterar hello standard mått endast du gjort hittills är korrekt.</span><span class="sxs-lookup"><span data-stu-id="03d55-153">However, hello default metrics will only carry you so far.</span></span> <span data-ttu-id="03d55-154">Till exempel: Vad är hello sannolikheten att hello partitionering schemat du plockats resultat i perfekt även användning av alla partitioner?</span><span class="sxs-lookup"><span data-stu-id="03d55-154">For example: What's hello likelihood that hello partitioning scheme you picked results in perfectly even utilization by all partitions?</span></span> <span data-ttu-id="03d55-155">Vad är hello chans att hello belastning för en viss tjänst är konstant över tid, eller bara hello samma över flera partitioner just nu?</span><span class="sxs-lookup"><span data-stu-id="03d55-155">What’s hello chance that hello load for a given service is constant over time, or even just hello same across multiple partitions right now?</span></span>

<span data-ttu-id="03d55-156">Du kan köra med bara hello standard.</span><span class="sxs-lookup"><span data-stu-id="03d55-156">You could run with just hello default metrics.</span></span> <span data-ttu-id="03d55-157">Men om du gör det vanligtvis innebär att din klusteranvändning lägre och mer ojämn än du vill.</span><span class="sxs-lookup"><span data-stu-id="03d55-157">However, doing so usually means that your cluster utilization is lower and more uneven than you’d like.</span></span> <span data-ttu-id="03d55-158">Detta beror på att hello standard mått inte anpassningsbar och förutsätter att allt är likvärdiga.</span><span class="sxs-lookup"><span data-stu-id="03d55-158">This is because hello default metrics aren't adaptive and presume everything is equivalent.</span></span> <span data-ttu-id="03d55-159">En primär är upptagen och ett som inte är båda bidra till exempel ”1” toohello PrimaryCount mått.</span><span class="sxs-lookup"><span data-stu-id="03d55-159">For example, a Primary that is busy and one that is not both contribute "1" toohello PrimaryCount metric.</span></span> <span data-ttu-id="03d55-160">I hello värsta fall kan med hjälp av endast hello standard mätvärden också leda till overscheduled noder, vilket resulterar i prestandaproblem.</span><span class="sxs-lookup"><span data-stu-id="03d55-160">In hello worst case, using only hello default metrics can also result in overscheduled nodes resulting in performance issues.</span></span> <span data-ttu-id="03d55-161">Om du är intresserad komma hello de flesta utanför klustret och undvika prestandaproblem måste toouse anpassade mått och dynamisk rapportering.</span><span class="sxs-lookup"><span data-stu-id="03d55-161">If you're interested in getting hello most out of your cluster and avoiding performance issues, you need toouse custom metrics and dynamic load reporting.</span></span>

## <a name="custom-metrics"></a><span data-ttu-id="03d55-162">Anpassade mått</span><span class="sxs-lookup"><span data-stu-id="03d55-162">Custom metrics</span></span>
<span data-ttu-id="03d55-163">Mått är konfigurerade på grundval av per med namnet-service-instans när du skapar hello-tjänsten.</span><span class="sxs-lookup"><span data-stu-id="03d55-163">Metrics are configured on a per-named-service-instance basis when you’re creating hello service.</span></span>

<span data-ttu-id="03d55-164">Alla mått har vissa egenskaper som beskriver den: ett namn, en vikt och en standard-belastning.</span><span class="sxs-lookup"><span data-stu-id="03d55-164">Any metric has some properties that describe it: a name, a weight, and a default load.</span></span>

* <span data-ttu-id="03d55-165">Måttnamnet: hello namnet på hello mått.</span><span class="sxs-lookup"><span data-stu-id="03d55-165">Metric Name: hello name of hello metric.</span></span> <span data-ttu-id="03d55-166">hello måttnamnet är en unik identifierare för hello mått i hello kluster ur hello Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="03d55-166">hello metric name is a unique identifier for hello metric within hello cluster from hello Resource Manager’s perspective.</span></span>
* <span data-ttu-id="03d55-167">Vikt: Tjänstmåttets vikt definierar hur viktigt det här måttet är relativ toohello andra mått för den här tjänsten.</span><span class="sxs-lookup"><span data-stu-id="03d55-167">Weight: Metric weight defines how important this metric is relative toohello other metrics for this service.</span></span>
* <span data-ttu-id="03d55-168">Standard-belastning: hello standard belastningen representeras på olika sätt beroende på om hello-tjänsten är tillståndslösa och tillståndskänsliga.</span><span class="sxs-lookup"><span data-stu-id="03d55-168">Default Load: hello default load is represented differently depending on whether hello service is stateless or stateful.</span></span>
  * <span data-ttu-id="03d55-169">För tillståndslösa tjänster har varje mått en egenskap med namnet DefaultLoad</span><span class="sxs-lookup"><span data-stu-id="03d55-169">For stateless services, each metric has a single property named DefaultLoad</span></span>
  * <span data-ttu-id="03d55-170">För tillståndskänsliga tjänster ange du:</span><span class="sxs-lookup"><span data-stu-id="03d55-170">For stateful services you define:</span></span>
    * <span data-ttu-id="03d55-171">PrimaryDefaultLoad: hello standardmängden mätvärdet tjänsten förbrukar när det är en primär</span><span class="sxs-lookup"><span data-stu-id="03d55-171">PrimaryDefaultLoad: hello default amount of this metric this service consumes when it is a Primary</span></span>
    * <span data-ttu-id="03d55-172">SecondaryDefaultLoad: hello standardmängden mätvärdet tjänsten förbrukar när det är en sekundär</span><span class="sxs-lookup"><span data-stu-id="03d55-172">SecondaryDefaultLoad: hello default amount of this metric this service consumes when it is a Secondary</span></span>

> [!NOTE]
> <span data-ttu-id="03d55-173">Om du definiera anpassade mått och du vill too_also_ Använd hello standard mått, too_explicitly_ måste lägga till hello standard mått tillbaka och definiera vikterna och värden för dessa.</span><span class="sxs-lookup"><span data-stu-id="03d55-173">If you define custom metrics and you want too_also_ use hello default metrics, you need too_explicitly_ add hello default metrics back and define weights and values for them.</span></span> <span data-ttu-id="03d55-174">Det beror på att du måste definiera hello förhållandet mellan hello standard mått och din anpassade mått.</span><span class="sxs-lookup"><span data-stu-id="03d55-174">This is because you must define hello relationship between hello default metrics and your custom metrics.</span></span> <span data-ttu-id="03d55-175">Till exempel kanske du bryr dig om ConnectionCount eller WorkQueueDepth mer än primära distributionsplatser.</span><span class="sxs-lookup"><span data-stu-id="03d55-175">For example, maybe you care about ConnectionCount or WorkQueueDepth more than Primary distribution.</span></span> <span data-ttu-id="03d55-176">Som standard hello vikten av hello PrimaryCount mått är hög, så du tooreduce den tooMedium när du lägger till dina andra mått tooensure de högre prioritet.</span><span class="sxs-lookup"><span data-stu-id="03d55-176">By default hello weight of hello PrimaryCount metric is High, so you want tooreduce it tooMedium when you add your other metrics tooensure they take precedence.</span></span>
>

### <a name="defining-metrics-for-your-service---an-example"></a><span data-ttu-id="03d55-177">Definiera mått för din tjänst - exempel</span><span class="sxs-lookup"><span data-stu-id="03d55-177">Defining metrics for your service - an example</span></span>
<span data-ttu-id="03d55-178">Anta att du vill hello följande konfiguration:</span><span class="sxs-lookup"><span data-stu-id="03d55-178">Let’s say you want hello following configuration:</span></span>

  - <span data-ttu-id="03d55-179">Tjänsten rapporterar ett mått med namnet ”ConnectionCount”</span><span class="sxs-lookup"><span data-stu-id="03d55-179">Your service reports a metric named "ConnectionCount”</span></span>
  - <span data-ttu-id="03d55-180">Du bör också toouse hello standard mått</span><span class="sxs-lookup"><span data-stu-id="03d55-180">You also want toouse hello default metrics</span></span> 
  - <span data-ttu-id="03d55-181">Du har gjort vissa mått och vet att en primär replik av den tjänsten tar normalt 20 enheter ”ConnectionCount”</span><span class="sxs-lookup"><span data-stu-id="03d55-181">You’ve done some measurements and know that normally a Primary replica of that service takes up 20 units of "ConnectionCount"</span></span>
  - <span data-ttu-id="03d55-182">Sekundärservrar använda 5 enheter i ”ConnectionCount”</span><span class="sxs-lookup"><span data-stu-id="03d55-182">Secondaries use 5 units of "ConnectionCount"</span></span>
  - <span data-ttu-id="03d55-183">Du vet att ”ConnectionCount” hello viktigaste mått som hanterar hello prestandan för viss tjänsten</span><span class="sxs-lookup"><span data-stu-id="03d55-183">You know that "ConnectionCount" is hello most important metric in terms of managing hello performance of this particular service</span></span>
  - <span data-ttu-id="03d55-184">Du ändå vill primära repliker belastningsutjämnade.</span><span class="sxs-lookup"><span data-stu-id="03d55-184">You still want Primary replicas balanced.</span></span> <span data-ttu-id="03d55-185">NLB primära repliker är vanligtvis bra oavsett vad.</span><span class="sxs-lookup"><span data-stu-id="03d55-185">Balancing primary replicas is generally a good idea no matter what.</span></span> <span data-ttu-id="03d55-186">Detta förhindrar hello förlust av vissa nod eller fault domän påverkar en majoritet av primära repliker tillsammans med den.</span><span class="sxs-lookup"><span data-stu-id="03d55-186">This helps prevent hello loss of some node or fault domain from impacting a majority of primary replicas along with it.</span></span> 
  - <span data-ttu-id="03d55-187">Annars är hello standard bra</span><span class="sxs-lookup"><span data-stu-id="03d55-187">Otherwise, hello default metrics are fine</span></span>

<span data-ttu-id="03d55-188">Här är hello kod som du skulle kunna skriva toocreate en tjänst med mått konfigurationen:</span><span class="sxs-lookup"><span data-stu-id="03d55-188">Here’s hello code that you would write toocreate a service with that metric configuration:</span></span>

<span data-ttu-id="03d55-189">Kod:</span><span class="sxs-lookup"><span data-stu-id="03d55-189">Code:</span></span>

```csharp
StatefulServiceDescription serviceDescription = new StatefulServiceDescription();
StatefulServiceLoadMetricDescription connectionMetric = new StatefulServiceLoadMetricDescription();
connectionMetric.Name = "ConnectionCount";
connectionMetric.PrimaryDefaultLoad = 20;
connectionMetric.SecondaryDefaultLoad = 5;
connectionMetric.Weight = ServiceLoadMetricWeight.High;

StatefulServiceLoadMetricDescription primaryCountMetric = new StatefulServiceLoadMetricDescription();
primaryCountMetric.Name = "PrimaryCount";
primaryCountMetric.PrimaryDefaultLoad = 1;
primaryCountMetric.SecondaryDefaultLoad = 0;
primaryCountMetric.Weight = ServiceLoadMetricWeight.Medium;

StatefulServiceLoadMetricDescription replicaCountMetric = new StatefulServiceLoadMetricDescription();
replicaCountMetric.Name = "ReplicaCount";
replicaCountMetric.PrimaryDefaultLoad = 1;
replicaCountMetric.SecondaryDefaultLoad = 1;
replicaCountMetric.Weight = ServiceLoadMetricWeight.Low;

StatefulServiceLoadMetricDescription totalCountMetric = new StatefulServiceLoadMetricDescription();
totalCountMetric.Name = "Count";
totalCountMetric.PrimaryDefaultLoad = 1;
totalCountMetric.SecondaryDefaultLoad = 1;
totalCountMetric.Weight = ServiceLoadMetricWeight.Low;

serviceDescription.Metrics.Add(connectionMetric);
serviceDescription.Metrics.Add(primaryCountMetric);
serviceDescription.Metrics.Add(replicaCountMetric);
serviceDescription.Metrics.Add(totalCountMetric);

await fabricClient.ServiceManager.CreateServiceAsync(serviceDescription);
```

<span data-ttu-id="03d55-190">PowerShell:</span><span class="sxs-lookup"><span data-stu-id="03d55-190">Powershell:</span></span>

```posh
New-ServiceFabricService -ApplicationName $applicationName -ServiceName $serviceName -ServiceTypeName $serviceTypeName –Stateful -MinReplicaSetSize 3 -TargetReplicaSetSize 3 -PartitionSchemeSingleton –Metric @("ConnectionCount,High,20,5”,"PrimaryCount,Medium,1,0”,"ReplicaCount,Low,1,1”,"Count,Low,1,1”)
```

> [!NOTE]
> <span data-ttu-id="03d55-191">Hej exemplen ovan och hello resten av det här dokumentet beskriver hantera mått på grundval av per-med namnet-tjänst.</span><span class="sxs-lookup"><span data-stu-id="03d55-191">hello above examples and hello rest of this document describe managing metrics on a per-named-service basis.</span></span> <span data-ttu-id="03d55-192">Det är också möjligt toodefine mätvärden för dina tjänster på hello service _typen_ nivå.</span><span class="sxs-lookup"><span data-stu-id="03d55-192">It is also possible toodefine metrics for your services at hello service _type_ level.</span></span> <span data-ttu-id="03d55-193">Detta åstadkoms genom att ange dem i din service manifest.</span><span class="sxs-lookup"><span data-stu-id="03d55-193">This is accomplished by specifying them in your service manifests.</span></span> <span data-ttu-id="03d55-194">Definiera typ nivån mått rekommenderas inte av flera skäl.</span><span class="sxs-lookup"><span data-stu-id="03d55-194">Defining type level metrics is not recommended for several reasons.</span></span> <span data-ttu-id="03d55-195">hello beror första på att mått namn är ofta miljöspecifikt.</span><span class="sxs-lookup"><span data-stu-id="03d55-195">hello first reason is that metric names are frequently environment-specific.</span></span> <span data-ttu-id="03d55-196">Om det inte finns ett fast kontrakt på plats, kan du vara säker som hello-måttet ”kärnor” i en miljö är inte ”MiliCores” eller ”kärnor” i andra.</span><span class="sxs-lookup"><span data-stu-id="03d55-196">Unless there is a firm contract in place, you cannot be sure that hello metric "Cores" in one environment isn't "MiliCores" or "CoReS" in others.</span></span> <span data-ttu-id="03d55-197">Om din mått har definierats i ditt manifest måste toocreate nya manifesten per miljö.</span><span class="sxs-lookup"><span data-stu-id="03d55-197">If your metrics are defined in your manifest you need toocreate new manifests per environment.</span></span> <span data-ttu-id="03d55-198">Detta leder vanligtvis tooa spridning av olika manifest med bara smärre skillnader, vilket kan leda till problem med toomanagement.</span><span class="sxs-lookup"><span data-stu-id="03d55-198">This usually leads tooa proliferation of different manifests with only minor differences, which can lead toomanagement difficulties.</span></span>  
>
> <span data-ttu-id="03d55-199">Mått belastningar tilldelas ofta på grundval av per med namnet-service-instans.</span><span class="sxs-lookup"><span data-stu-id="03d55-199">Metric loads are commonly assigned on a per-named-service-instance basis.</span></span> <span data-ttu-id="03d55-200">Till exempel anta att du skapar en instans av hello-tjänst för CustomerA som planer toouse den inte.</span><span class="sxs-lookup"><span data-stu-id="03d55-200">For example, let's say you create one instance of hello service for CustomerA who plans toouse it only lightly.</span></span> <span data-ttu-id="03d55-201">Anta också att du skapar en annan för CustomerB som har en större arbetsbelastning.</span><span class="sxs-lookup"><span data-stu-id="03d55-201">Let's also say you create another for CustomerB who has a larger workload.</span></span> <span data-ttu-id="03d55-202">I så fall skulle vill du förmodligen tootweak hello standard laddar för dessa tjänster.</span><span class="sxs-lookup"><span data-stu-id="03d55-202">In this case, you'd probably want tootweak hello default loads for those services.</span></span> <span data-ttu-id="03d55-203">Om du har mått och belastningar som anges via manifesten och du vill toosupport det här scenariot, kräver olika program och typer av tjänster för varje kund.</span><span class="sxs-lookup"><span data-stu-id="03d55-203">If you have metrics and loads defined via manifests and you want toosupport this scenario, it requires different application and service types for each customer.</span></span> <span data-ttu-id="03d55-204">hello värden som definierats vid tidpunkten för skapandet av tjänsten åsidosätter de som definieras i hello manifest så att du kan använda de tooset hello specifika standardvärdena.</span><span class="sxs-lookup"><span data-stu-id="03d55-204">hello values defined at service creation time override those defined in hello manifest, so you could use that tooset hello specific defaults.</span></span> <span data-ttu-id="03d55-205">Dock gör gör hello-värden som deklarerats i hello manifesten toonot matchar de hello-tjänsten körs med.</span><span class="sxs-lookup"><span data-stu-id="03d55-205">However, doing that causes hello values declared in hello manifests toonot match those hello service actually runs with.</span></span> <span data-ttu-id="03d55-206">Detta kan leda till tooconfusion.</span><span class="sxs-lookup"><span data-stu-id="03d55-206">This can lead tooconfusion.</span></span> 
>

<span data-ttu-id="03d55-207">Som en påminnelse: Om du bara vill toouse hello standard mått du inte behöver tootouch hello mått samling alls eller göra något speciellt när du skapar din tjänst.</span><span class="sxs-lookup"><span data-stu-id="03d55-207">As a reminder: if you just want toouse hello default metrics, you don’t need tootouch hello metrics collection at all or do anything special when creating your service.</span></span> <span data-ttu-id="03d55-208">hello standard mått hämta används automatiskt när inga andra definieras.</span><span class="sxs-lookup"><span data-stu-id="03d55-208">hello default metrics get used automatically when no others are defined.</span></span> 

<span data-ttu-id="03d55-209">Nu går vi igenom de här inställningarna i detalj och diskutera hello beteende som den inverkar.</span><span class="sxs-lookup"><span data-stu-id="03d55-209">Now, let's go through each of these settings in more detail and talk about hello behavior that it influences.</span></span>

## <a name="load"></a><span data-ttu-id="03d55-210">Läsa in</span><span class="sxs-lookup"><span data-stu-id="03d55-210">Load</span></span>
<span data-ttu-id="03d55-211">Hej hela platsen för att definiera mått är toorepresent vissa belastningen.</span><span class="sxs-lookup"><span data-stu-id="03d55-211">hello whole point of defining metrics is toorepresent some load.</span></span> <span data-ttu-id="03d55-212">*Läs in* är hur mycket av ett visst mått som används av vissa tjänstinstansen eller repliken på en viss nod.</span><span class="sxs-lookup"><span data-stu-id="03d55-212">*Load* is how much of a given metric is consumed by some service instance or replica on a given node.</span></span> <span data-ttu-id="03d55-213">Läs in kan konfigureras på nästan alla punkt.</span><span class="sxs-lookup"><span data-stu-id="03d55-213">Load can be configured at almost any point.</span></span> <span data-ttu-id="03d55-214">Exempel:</span><span class="sxs-lookup"><span data-stu-id="03d55-214">For example:</span></span>

  - <span data-ttu-id="03d55-215">Läs in kan definieras när en tjänst skapas.</span><span class="sxs-lookup"><span data-stu-id="03d55-215">Load can be defined when a service is created.</span></span> <span data-ttu-id="03d55-216">Detta kallas _standard belastningen_.</span><span class="sxs-lookup"><span data-stu-id="03d55-216">This is called _default load_.</span></span>
  - <span data-ttu-id="03d55-217">hello mått information, inklusive standard läses in för en tjänst kan uppdateras när hello-tjänsten har skapats.</span><span class="sxs-lookup"><span data-stu-id="03d55-217">hello metric information, including default loads, for a service can updated after hello service is created.</span></span> <span data-ttu-id="03d55-218">Detta kallas _uppdatera en tjänst_.</span><span class="sxs-lookup"><span data-stu-id="03d55-218">This is called _updating a service_.</span></span> 
  - <span data-ttu-id="03d55-219">hello belastningar för en given partition kan vara Återställ toohello standardvärden för tjänsten.</span><span class="sxs-lookup"><span data-stu-id="03d55-219">hello loads for a given partition can be reset toohello default values for that service.</span></span> <span data-ttu-id="03d55-220">Detta kallas _återställa partitionsbelastning_.</span><span class="sxs-lookup"><span data-stu-id="03d55-220">This is called _resetting partition load_.</span></span>
  - <span data-ttu-id="03d55-221">Läs in rapporteras på en per service objektet bas dynamiskt vid körning.</span><span class="sxs-lookup"><span data-stu-id="03d55-221">Load can be reported on a per service object basis dynamically during runtime.</span></span> <span data-ttu-id="03d55-222">Detta kallas _reporting belastningen_.</span><span class="sxs-lookup"><span data-stu-id="03d55-222">This is called _reporting load_.</span></span> 
  
<span data-ttu-id="03d55-223">Alla dessa strategier kan användas i hello samma tjänst under sin livslängd.</span><span class="sxs-lookup"><span data-stu-id="03d55-223">All of these strategies can be used within hello same service over its lifetime.</span></span> 

## <a name="default-load"></a><span data-ttu-id="03d55-224">Standard-inläsning</span><span class="sxs-lookup"><span data-stu-id="03d55-224">Default load</span></span>
<span data-ttu-id="03d55-225">*Standard belastningen* är hur mycket av hello mått förbrukar varje serviceobjektet (tillståndslös instans eller tillståndskänslig replik) för den här tjänsten.</span><span class="sxs-lookup"><span data-stu-id="03d55-225">*Default load* is how much of hello metric each service object (stateless instance or stateful replica) of this service consumes.</span></span> <span data-ttu-id="03d55-226">hello klustret Resource Manager använder det här numret för hello belastningen på hello webbtjänstobjektet tills det mottar annan information, till exempel en dynamisk rapport.</span><span class="sxs-lookup"><span data-stu-id="03d55-226">hello Cluster Resource Manager uses this number for hello load of hello service object until it receives other information, such as a dynamic load report.</span></span> <span data-ttu-id="03d55-227">Hello standard belastningen är en statisk definition för enklare tjänster.</span><span class="sxs-lookup"><span data-stu-id="03d55-227">For simpler services, hello default load is a static definition.</span></span> <span data-ttu-id="03d55-228">hello standard belastningen uppdateras aldrig och används under hello livstid hello-tjänsten.</span><span class="sxs-lookup"><span data-stu-id="03d55-228">hello default load is never updated and is used for hello lifetime of hello service.</span></span> <span data-ttu-id="03d55-229">Standard laddar fungerar bra för enkel kapacitetsplanering scenarier där vissa mängder resurser är dedikerade toodifferent arbetsbelastningar och ändras inte.</span><span class="sxs-lookup"><span data-stu-id="03d55-229">Default loads works great for simple capacity planning scenarios where certain amounts of resources are dedicated toodifferent workloads and do not change.</span></span>

> [!NOTE]
> <span data-ttu-id="03d55-230">Mer information om kapacitetshantering av och definiera kapacitet för hello noder i klustret finns [i den här artikeln](service-fabric-cluster-resource-manager-cluster-description.md#capacity).</span><span class="sxs-lookup"><span data-stu-id="03d55-230">For more information on capacity management and defining capacities for hello nodes in your cluster, please see [this article](service-fabric-cluster-resource-manager-cluster-description.md#capacity).</span></span>
> 

<span data-ttu-id="03d55-231">hello klustret Resource Manager kan tillståndskänsliga tjänster toospecify en annan standard belastning för sina primärfärgerna och sekundärservrar.</span><span class="sxs-lookup"><span data-stu-id="03d55-231">hello Cluster Resource Manager allows stateful services toospecify a different default load for their Primaries and Secondaries.</span></span> <span data-ttu-id="03d55-232">Tillståndslösa tjänster kan bara ange ett värde som gäller tooall instanser.</span><span class="sxs-lookup"><span data-stu-id="03d55-232">Stateless services can only specify one value that applies tooall instances.</span></span> <span data-ttu-id="03d55-233">Hello standard belastningen för primära och sekundära repliker är vanligtvis olika för tillståndskänsliga tjänster, eftersom repliker har olika typer av resurser i varje roll.</span><span class="sxs-lookup"><span data-stu-id="03d55-233">For stateful services, hello default load for Primary and Secondary replicas are typically different since replicas do different kinds of work in each role.</span></span> <span data-ttu-id="03d55-234">Till exempel primärfärgerna vanligtvis fungerar både läsningar och skrivningar och hantera de flesta av hello beräkningar arbetsbördan, medan sekundärservrar inte.</span><span class="sxs-lookup"><span data-stu-id="03d55-234">For example, Primaries usually serve both reads and writes, and handle most of hello computational burden, while secondaries do not.</span></span> <span data-ttu-id="03d55-235">Vanligtvis är hello standard belastningen för en primär replik högre än hello standard belastning för sekundära repliker.</span><span class="sxs-lookup"><span data-stu-id="03d55-235">Usually hello default load for a primary replica is higher than hello default load for secondary replicas.</span></span> <span data-ttu-id="03d55-236">hello reellt tal bör beror på dina egna mått.</span><span class="sxs-lookup"><span data-stu-id="03d55-236">hello real numbers should depend on your own measurements.</span></span>

## <a name="dynamic-load"></a><span data-ttu-id="03d55-237">Dynamisk</span><span class="sxs-lookup"><span data-stu-id="03d55-237">Dynamic load</span></span>
<span data-ttu-id="03d55-238">Anta att du har kört din tjänst för en stund.</span><span class="sxs-lookup"><span data-stu-id="03d55-238">Let’s say that you’ve been running your service for a while.</span></span> <span data-ttu-id="03d55-239">Med viss övervakning upplever du som:</span><span class="sxs-lookup"><span data-stu-id="03d55-239">With some monitoring, you’ve noticed that:</span></span>

1. <span data-ttu-id="03d55-240">Några partitioner eller instanser av en viss tjänst förbruka mer resurser än andra</span><span class="sxs-lookup"><span data-stu-id="03d55-240">Some partitions or instances of a given service consume more resources than others</span></span>
2. <span data-ttu-id="03d55-241">Vissa tjänster ha belastningen varierar över tiden.</span><span class="sxs-lookup"><span data-stu-id="03d55-241">Some services have load that varies over time.</span></span>

<span data-ttu-id="03d55-242">Det finns många saker som kan leda till att dessa typer av belastningen variationer.</span><span class="sxs-lookup"><span data-stu-id="03d55-242">There's lots of things that could cause these types of load fluctuations.</span></span> <span data-ttu-id="03d55-243">Till exempel är olika tjänster eller partitioner associerade med olika kunder med olika krav.</span><span class="sxs-lookup"><span data-stu-id="03d55-243">For example, different services or partitions are associated with different customers with different requirements.</span></span> <span data-ttu-id="03d55-244">Läs in kan också ändra eftersom hello mängd arbete hello-tjänsten varierar under hello loppet av hello dag.</span><span class="sxs-lookup"><span data-stu-id="03d55-244">Load could also change because hello amount of work hello service does varies over hello course of hello day.</span></span> <span data-ttu-id="03d55-245">Oavsett hello orsak finns vanligtvis inte tal som du kan använda för standardvärde.</span><span class="sxs-lookup"><span data-stu-id="03d55-245">Regardless of hello reason, there’s usually no single number that you can use for default.</span></span> <span data-ttu-id="03d55-246">Detta gäller särskilt om du vill tooget hello de flesta användning utanför hello klustret.</span><span class="sxs-lookup"><span data-stu-id="03d55-246">This is especially true if you want tooget hello most utilization out of hello cluster.</span></span> <span data-ttu-id="03d55-247">Ett värde som du väljer för standard är felaktigt vissa hello tid.</span><span class="sxs-lookup"><span data-stu-id="03d55-247">Any value you pick for default load is wrong some of hello time.</span></span> <span data-ttu-id="03d55-248">Felaktig standard läser in resultatet i hello klustret Resource Manager antingen över eller under fördela resurser.</span><span class="sxs-lookup"><span data-stu-id="03d55-248">Incorrect default loads result in hello Cluster Resource Manager either over or under allocating resources.</span></span> <span data-ttu-id="03d55-249">Därför kan har du noder som över eller under används även om hello klustret Resource Manager tror hello klustret balanseras.</span><span class="sxs-lookup"><span data-stu-id="03d55-249">As a result, you have nodes that are over or under utilized even though hello Cluster Resource Manager thinks hello cluster is balanced.</span></span> <span data-ttu-id="03d55-250">Standard-belastning är fortfarande bra eftersom de ger viss information för inledande placering, men de har inte en fullständig artikel för verkliga arbetsbelastningar.</span><span class="sxs-lookup"><span data-stu-id="03d55-250">Default loads are still good since they provide some information for initial placement, but they're not a complete story for real workloads.</span></span> <span data-ttu-id="03d55-251">tooaccurately avbilda ändra resursbehov, hello klustret Resource Manager kan varje tjänst objektet tooupdate sin egen belastning under körningen.</span><span class="sxs-lookup"><span data-stu-id="03d55-251">tooaccurately capture changing resource requirements, hello Cluster Resource Manager allows each service object tooupdate its own load during runtime.</span></span> <span data-ttu-id="03d55-252">Detta kallas dynamisk reporting.</span><span class="sxs-lookup"><span data-stu-id="03d55-252">This is called dynamic load reporting.</span></span>

<span data-ttu-id="03d55-253">Dynamisk rapporter kan repliker eller instanser tooadjust sina allokering/rapporterade belastningen på mått under sin livslängd.</span><span class="sxs-lookup"><span data-stu-id="03d55-253">Dynamic load reports allow replicas or instances tooadjust their allocation/reported load of metrics over their lifetime.</span></span> <span data-ttu-id="03d55-254">En replik för tjänsten eller instans som var kall och inte gör allt arbete rapporteras vanligtvis som använde små mängder av ett visst mått.</span><span class="sxs-lookup"><span data-stu-id="03d55-254">A service replica or instance that was cold and not doing any work would usually report that it was using low amounts of a given metric.</span></span> <span data-ttu-id="03d55-255">En upptagen replik eller skulle rapporterar att de använder mer.</span><span class="sxs-lookup"><span data-stu-id="03d55-255">A busy replica or instance would report that they are using more.</span></span>

<span data-ttu-id="03d55-256">Rapportering belastningen per målrepliker eller instanser kan hello klustret Resource Manager tooreorganize hello enskild tjänstobjekt i hello kluster.</span><span class="sxs-lookup"><span data-stu-id="03d55-256">Reporting load per replica or instance allows hello Cluster Resource Manager tooreorganize hello individual service objects in hello cluster.</span></span> <span data-ttu-id="03d55-257">Ordna hello services säkerställer att de får hello resurser som de kräver.</span><span class="sxs-lookup"><span data-stu-id="03d55-257">Reorganizing hello services helps ensure that they get hello resources they require.</span></span> <span data-ttu-id="03d55-258">Upptagen services hämta effektivt för ”frigöra” resurser från andra repliker eller instanser som är för närvarande kall eller göra mindre arbete.</span><span class="sxs-lookup"><span data-stu-id="03d55-258">Busy services effectively get too"reclaim" resources from other replicas or instances that are currently cold or doing less work.</span></span>

<span data-ttu-id="03d55-259">Inom Reliable Services hello kod tooreport load dynamiskt ser ut så här:</span><span class="sxs-lookup"><span data-stu-id="03d55-259">Within Reliable Services, hello code tooreport load dynamically looks like this:</span></span>

<span data-ttu-id="03d55-260">Kod:</span><span class="sxs-lookup"><span data-stu-id="03d55-260">Code:</span></span>

```csharp
this.Partition.ReportLoad(new List<LoadMetric> { new LoadMetric("CurrentConnectionCount", 1234), new LoadMetric("metric1", 42) });
```

<span data-ttu-id="03d55-261">En tjänst kan rapportera på någon av hello mått har definierats för den vid skapandet.</span><span class="sxs-lookup"><span data-stu-id="03d55-261">A service can report on any of hello metrics defined for it at creation time.</span></span> <span data-ttu-id="03d55-262">Om en tjänst rapporter belastning för ett mått som inte är konfigurerad toouse, ignorerar Service Fabric rapporten.</span><span class="sxs-lookup"><span data-stu-id="03d55-262">If a service reports load for a metric that it is not configured toouse, Service Fabric ignores that report.</span></span> <span data-ttu-id="03d55-263">Om det finns andra mått som rapporteras vid hello samma tid som är giltiga rapporterna accepteras.</span><span class="sxs-lookup"><span data-stu-id="03d55-263">If there are other metrics reported at hello same time that are valid, those reports are accepted.</span></span> <span data-ttu-id="03d55-264">Service-kod kan mäta och rapportera alla hello mått vet hur till, och operatörer kan ange hello mått configuration toouse utan toochange hello service-kod.</span><span class="sxs-lookup"><span data-stu-id="03d55-264">Service code can measure and report all hello metrics it knows how to, and operators can specify hello metric configuration toouse without having toochange hello service code.</span></span> 

### <a name="updating-a-services-metric-configuration"></a><span data-ttu-id="03d55-265">Ett mått tjänstkonfigurationen uppdaterades</span><span class="sxs-lookup"><span data-stu-id="03d55-265">Updating a service's metric configuration</span></span>
<span data-ttu-id="03d55-266">hello listan över mått som är associerade med hello-tjänsten och hello egenskaperna för dessa mått kan uppdateras dynamiskt när hello-tjänst är aktiv.</span><span class="sxs-lookup"><span data-stu-id="03d55-266">hello list of metrics associated with hello service, and hello properties of those metrics can be updated dynamically while hello service is live.</span></span> <span data-ttu-id="03d55-267">Detta ger undersökningar och flexibilitet.</span><span class="sxs-lookup"><span data-stu-id="03d55-267">This allows for experimentation and flexibility.</span></span> <span data-ttu-id="03d55-268">Några exempel när det är praktiskt är:</span><span class="sxs-lookup"><span data-stu-id="03d55-268">Some examples of when this is useful are:</span></span>

  - <span data-ttu-id="03d55-269">inaktivera ett mått med en buggy rapport för en viss tjänst</span><span class="sxs-lookup"><span data-stu-id="03d55-269">disabling a metric with a buggy report for a particular service</span></span>
  - <span data-ttu-id="03d55-270">Konfigurera om hello vikten av mått baserat på önskat beteende</span><span class="sxs-lookup"><span data-stu-id="03d55-270">reconfiguring hello weights of metrics based on desired behavior</span></span>
  - <span data-ttu-id="03d55-271">Aktivera ett nytt mått när hello koden har redan distribuerats och godkänts via andra mekanismer</span><span class="sxs-lookup"><span data-stu-id="03d55-271">enabling a new metric only after hello code has already been deployed and validated via other mechanisms</span></span>
  - <span data-ttu-id="03d55-272">Ändra hello standard belastningen för en tjänst baserat på observerade beteende och förbrukning</span><span class="sxs-lookup"><span data-stu-id="03d55-272">changing hello default load for a service based on observed behavior and consumption</span></span>

<span data-ttu-id="03d55-273">hello huvudsakliga API: er för att ändra mått konfiguration är `FabricClient.ServiceManagementClient.UpdateServiceAsync` i C# och `Update-ServiceFabricService` i PowerShell.</span><span class="sxs-lookup"><span data-stu-id="03d55-273">hello main APIs for changing metric configuration are `FabricClient.ServiceManagementClient.UpdateServiceAsync` in C# and `Update-ServiceFabricService` in PowerShell.</span></span> <span data-ttu-id="03d55-274">Den information som du anger med dessa API: er ersätter hello befintliga mått information för hello tjänsten omedelbart.</span><span class="sxs-lookup"><span data-stu-id="03d55-274">Whatever information you specify with these APIs replaces hello existing metric information for hello service immediately.</span></span> 

## <a name="mixing-default-load-values-and-dynamic-load-reports"></a><span data-ttu-id="03d55-275">Blandning av belastningen standardvärden och dynamisk rapporter</span><span class="sxs-lookup"><span data-stu-id="03d55-275">Mixing default load values and dynamic load reports</span></span>
<span data-ttu-id="03d55-276">Standard belastning och dynamisk last kan användas för hello samma tjänst.</span><span class="sxs-lookup"><span data-stu-id="03d55-276">Default load and dynamic loads can be used for hello same service.</span></span> <span data-ttu-id="03d55-277">När en tjänst använder både standard belastning och dynamisk rapporter, standard belastning som fungerar som en uppskattning tills dynamiska rapporter visas.</span><span class="sxs-lookup"><span data-stu-id="03d55-277">When a service utilizes both default load and dynamic load reports, default load serves as an estimate until dynamic reports show up.</span></span> <span data-ttu-id="03d55-278">Standard belastningen är bra eftersom den ger hello klustret Resource Manager något toowork med.</span><span class="sxs-lookup"><span data-stu-id="03d55-278">Default load is good because it gives hello Cluster Resource Manager something toowork with.</span></span> <span data-ttu-id="03d55-279">hello standard belastning kan hello klustret Resource Manager tooplace hello tjänstobjekt bra platser när de skapas.</span><span class="sxs-lookup"><span data-stu-id="03d55-279">hello default load allows hello Cluster Resource Manager tooplace hello service objects in good locations when they are created.</span></span> <span data-ttu-id="03d55-280">Om ingen standard belastningen information tillhandahålls är placering av tjänster effektiv slumpmässiga.</span><span class="sxs-lookup"><span data-stu-id="03d55-280">If no default load information is provided, placement of services is effectively random.</span></span> <span data-ttu-id="03d55-281">När belastningen rapporter kommer senare hello inledande slumpmässiga placering är ofta fel och hello klustret Resource Manager har toomove tjänster.</span><span class="sxs-lookup"><span data-stu-id="03d55-281">When load reports arrive later hello initial random placement is often wrong and hello Cluster Resource Manager has toomove services.</span></span>

<span data-ttu-id="03d55-282">Vi tar det tidigare exemplet och se vad som händer när vi lägger till vissa anpassade mått och dynamisk rapportering.</span><span class="sxs-lookup"><span data-stu-id="03d55-282">Let’s take our previous example and see what happens when we add some custom metrics and dynamic load reporting.</span></span> <span data-ttu-id="03d55-283">I det här exemplet använder vi ”MemoryInMb” som ett exempel mått.</span><span class="sxs-lookup"><span data-stu-id="03d55-283">In this example, we use “MemoryInMb” as an example metric.</span></span>

> [!NOTE]
> <span data-ttu-id="03d55-284">Minne är en av hello system mått som Service Fabric kan [resursen styr](service-fabric-resource-governance.md), och rapportering själv är vanligtvis svårt.</span><span class="sxs-lookup"><span data-stu-id="03d55-284">Memory is one of hello system metrics that Service Fabric can [resource govern](service-fabric-resource-governance.md), and reporting it yourself is typically difficult.</span></span> <span data-ttu-id="03d55-285">Vi räknar inte faktiskt du tooreport på minnesförbrukning; Minne används här som ett stöd toolearning om hello funktioner i hello klustret Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="03d55-285">We don't actually expect you tooreport on Memory consumption; Memory is used here as an aid toolearning about hello capabilities of hello Cluster Resource Manager.</span></span>
>

<span data-ttu-id="03d55-286">Vi förutsätter att det ursprungligen skapades hello tillståndskänslig service med hello följande kommando:</span><span class="sxs-lookup"><span data-stu-id="03d55-286">Let’s presume that we initially created hello stateful service with hello following command:</span></span>

<span data-ttu-id="03d55-287">PowerShell:</span><span class="sxs-lookup"><span data-stu-id="03d55-287">Powershell:</span></span>

```posh
New-ServiceFabricService -ApplicationName $applicationName -ServiceName $serviceName -ServiceTypeName $serviceTypeName –Stateful -MinReplicaSetSize 3 -TargetReplicaSetSize 3 -PartitionSchemeSingleton –Metric @("MemoryInMb,High,21,11”,"PrimaryCount,Medium,1,0”,"ReplicaCount,Low,1,1”,"Count,Low,1,1”)
```

<span data-ttu-id="03d55-288">Som en påminnelse är den här syntaxen (”MetricName, MetricWeight, PrimaryDefaultLoad, SecondaryDefaultLoad”).</span><span class="sxs-lookup"><span data-stu-id="03d55-288">As a reminder, this syntax is ("MetricName, MetricWeight, PrimaryDefaultLoad, SecondaryDefaultLoad").</span></span>

<span data-ttu-id="03d55-289">Nu ska vi se vad en layout för möjliga klustret kan se ut så:</span><span class="sxs-lookup"><span data-stu-id="03d55-289">Let's see what one possible cluster layout could look like:</span></span>

<span data-ttu-id="03d55-290"><center>
![Kluster balanserad med både standard- och anpassade mått][Image2]
</center></span><span class="sxs-lookup"><span data-stu-id="03d55-290"><center>
![Cluster Balanced with both Default and Custom metrics][Image2]
</center></span></span>

<span data-ttu-id="03d55-291">Vissa saker som är noteras:</span><span class="sxs-lookup"><span data-stu-id="03d55-291">Some things that are worth noting:</span></span>

* <span data-ttu-id="03d55-292">Sekundära repliker inom en partition kan ha sina egna belastning</span><span class="sxs-lookup"><span data-stu-id="03d55-292">Secondary replicas within a partition can each have their own load</span></span>
* <span data-ttu-id="03d55-293">Övergripande leta hello mått belastningsutjämnade.</span><span class="sxs-lookup"><span data-stu-id="03d55-293">Overall hello metrics look balanced.</span></span> <span data-ttu-id="03d55-294">För minne, hello förhållandet mellan hello högsta och lägsta belastningen är 1,75 (hello nod med hello de flesta belastningen är N3 är hello minst N2 och 28/16 = 1,75).</span><span class="sxs-lookup"><span data-stu-id="03d55-294">For Memory, hello ratio between hello maximum and minimum load is 1.75 (hello node with hello most load is N3, hello least is N2, and 28/16 = 1.75).</span></span>

<span data-ttu-id="03d55-295">Det finns vissa saker som vi behöver tooexplain:</span><span class="sxs-lookup"><span data-stu-id="03d55-295">There are some things that we still need tooexplain:</span></span>

* <span data-ttu-id="03d55-296">Vad fastställa om ett förhållande på 1,75 var rimliga?</span><span class="sxs-lookup"><span data-stu-id="03d55-296">What determined whether a ratio of 1.75 was reasonable or not?</span></span> <span data-ttu-id="03d55-297">Hur hello klustret Resource Manager vet om som är tillräckligt bra eller om det finns mer arbete toodo?</span><span class="sxs-lookup"><span data-stu-id="03d55-297">How does hello Cluster Resource Manager know if that’s good enough or if there is more work toodo?</span></span>
* <span data-ttu-id="03d55-298">När sker belastningsutjämning?</span><span class="sxs-lookup"><span data-stu-id="03d55-298">When does balancing happen?</span></span>
* <span data-ttu-id="03d55-299">Vad innebär det att minnet var viktas ”hög”?</span><span class="sxs-lookup"><span data-stu-id="03d55-299">What does it mean that Memory was weighted “High”?</span></span>

## <a name="metric-weights"></a><span data-ttu-id="03d55-300">Tjänstmåttets vikt</span><span class="sxs-lookup"><span data-stu-id="03d55-300">Metric weights</span></span>
<span data-ttu-id="03d55-301">Spårning hello samma mått över olika tjänster är viktigt.</span><span class="sxs-lookup"><span data-stu-id="03d55-301">Tracking hello same metrics across different services is important.</span></span> <span data-ttu-id="03d55-302">Globala vyn är vad tillåter hello klustret Resource Manager tootrack förbrukning i hello kluster, balanserar förbrukning mellan noder och se till att noderna inte gå igenom kapacitet.</span><span class="sxs-lookup"><span data-stu-id="03d55-302">That global view is what allows hello Cluster Resource Manager tootrack consumption in hello cluster, balance consumption across nodes, and ensure that nodes don’t go over capacity.</span></span> <span data-ttu-id="03d55-303">Men tjänster kan ha olika vyer som toohello vikten av hello samma mått.</span><span class="sxs-lookup"><span data-stu-id="03d55-303">However, services may have different views as toohello importance of hello same metric.</span></span> <span data-ttu-id="03d55-304">Även i ett kluster med många mått och många tjänster finns perfekt belastningsutjämnade lösningar inte för alla.</span><span class="sxs-lookup"><span data-stu-id="03d55-304">Also, in a cluster with many metrics and lots of services, perfectly balanced solutions may not exist for all metrics.</span></span> <span data-ttu-id="03d55-305">Hur ska hello klustret Resource Manager hanterar sådana situationer?</span><span class="sxs-lookup"><span data-stu-id="03d55-305">How should hello Cluster Resource Manager handle these situations?</span></span>

<span data-ttu-id="03d55-306">Tjänstmåttets vikt Tillåt hello klustret Resource Manager toodecide hur toobalance hello kluster, när det finns inget perfekta svar.</span><span class="sxs-lookup"><span data-stu-id="03d55-306">Metric weights allow hello Cluster Resource Manager toodecide how toobalance hello cluster when there’s no perfect answer.</span></span> <span data-ttu-id="03d55-307">Tjänstmåttets vikt kan också hello klustret Resource Manager toobalance specifika tjänster på olika sätt.</span><span class="sxs-lookup"><span data-stu-id="03d55-307">Metric weights also allow hello Cluster Resource Manager toobalance specific services differently.</span></span> <span data-ttu-id="03d55-308">Mått kan ha fyra olika vikt nivåer: noll, lågt, Medium och hög.</span><span class="sxs-lookup"><span data-stu-id="03d55-308">Metrics can have four different weight levels: Zero, Low, Medium, and High.</span></span> <span data-ttu-id="03d55-309">Ett mått med en vikt på noll bidrar ingenting när du överväger saker är balanserade eller inte.</span><span class="sxs-lookup"><span data-stu-id="03d55-309">A metric with a weight of Zero contributes nothing when considering whether things are balanced or not.</span></span> <span data-ttu-id="03d55-310">Belastningen bidrar dock fortfarande toocapacity management.</span><span class="sxs-lookup"><span data-stu-id="03d55-310">However, its load does still contribute toocapacity management.</span></span> <span data-ttu-id="03d55-311">Mått med noll är användbar och används ofta som en del av tjänst och prestandaövervakning.</span><span class="sxs-lookup"><span data-stu-id="03d55-311">Metrics with Zero weight are still useful and are frequently used as a part of service behavior and performance monitoring.</span></span> <span data-ttu-id="03d55-312">[Den här artikeln](service-fabric-diagnostics-event-generation-infra.md) finns mer information om hello användning av mätvärden för övervakning och diagnostik-tjänster.</span><span class="sxs-lookup"><span data-stu-id="03d55-312">[This article](service-fabric-diagnostics-event-generation-infra.md) provides more information on hello use of metrics for monitoring and diagnostics of your services.</span></span> 

<span data-ttu-id="03d55-313">hello verkliga effekten av olika mått vikter i hello klustret är den hello klustret Resource Manager genererar olika lösningar.</span><span class="sxs-lookup"><span data-stu-id="03d55-313">hello real impact of different metric weights in hello cluster is that hello Cluster Resource Manager generates different solutions.</span></span> <span data-ttu-id="03d55-314">Tjänstmåttets vikt berätta hello klustret Resource Manager för att vissa mått är viktigare än andra.</span><span class="sxs-lookup"><span data-stu-id="03d55-314">Metric weights tell hello Cluster Resource Manager that certain metrics are more important than others.</span></span> <span data-ttu-id="03d55-315">När det finns ingen perfekt lösning hello föredrar klustret Resource Manager lösningar som balanserar hello högre viktat mått bättre.</span><span class="sxs-lookup"><span data-stu-id="03d55-315">When there's no perfect solution hello Cluster Resource Manager can prefer solutions which balance hello higher weighted metrics better.</span></span> <span data-ttu-id="03d55-316">Om en tjänst tror ett viss mått är oviktigt kan hittas deras användning av den måtten imbalanced.</span><span class="sxs-lookup"><span data-stu-id="03d55-316">If a service thinks a particular metric is unimportant, it may find their use of that metric imbalanced.</span></span> <span data-ttu-id="03d55-317">Detta gör att en annan tjänst tooget en jämn fördelning av vissa mått som är viktiga tooit.</span><span class="sxs-lookup"><span data-stu-id="03d55-317">This allows another service tooget an even distribution of some metric that is important tooit.</span></span>

<span data-ttu-id="03d55-318">Nu ska vi titta på ett exempel på några belastningen rapporter och hur olika mått viktas resulterar i olika fördelningar i hello klustret.</span><span class="sxs-lookup"><span data-stu-id="03d55-318">Let’s look at an example of some load reports and how different metric weights results in different allocations in hello cluster.</span></span> <span data-ttu-id="03d55-319">I det här exemplet finns att växla hello relativa vikten av hello mätvärden orsakar hello klustret Resource Manager toocreate olika åtgärder av tjänster.</span><span class="sxs-lookup"><span data-stu-id="03d55-319">In this example, we see that switching hello relative weight of hello metrics causes hello Cluster Resource Manager toocreate different arrangements of services.</span></span>

<span data-ttu-id="03d55-320"><center>
![Tjänstmåttets vikt exempel och dess påverkan på NLB lösningar][Image3]
</center></span><span class="sxs-lookup"><span data-stu-id="03d55-320"><center>
![Metric Weight Example and Its Impact on Balancing Solutions][Image3]
</center></span></span>

<span data-ttu-id="03d55-321">I det här exemplet finns fyra olika tjänster, alla reporting olika värden för två olika mått, MetricA och MetricB.</span><span class="sxs-lookup"><span data-stu-id="03d55-321">In this example, there are four different services, all reporting different values for two different metrics, MetricA and MetricB.</span></span> <span data-ttu-id="03d55-322">I ett fall definiera alla hello tjänster MetricA är hello viktigaste (vikt = hög) och MetricB som oviktigt (vikt = låg).</span><span class="sxs-lookup"><span data-stu-id="03d55-322">In one case, all hello services define MetricA is hello most important one (Weight = High) and MetricB as unimportant (Weight = Low).</span></span> <span data-ttu-id="03d55-323">Därmed visas den hello klustret Resource Manager placerar hello services så att MetricA är bättre belastningsutjämnade än MetricB.</span><span class="sxs-lookup"><span data-stu-id="03d55-323">As a result, we see that hello Cluster Resource Manager places hello services so that MetricA is better balanced than MetricB.</span></span> <span data-ttu-id="03d55-324">”Bättre belastningsutjämnade” innebär att MetricA har en lägre har en lägre standardavvikelse än MetricB.</span><span class="sxs-lookup"><span data-stu-id="03d55-324">"Better balanced" means that MetricA has a lower has a lower standard deviation than MetricB.</span></span> <span data-ttu-id="03d55-325">I andra fall hello omvända vi hello mått vikter.</span><span class="sxs-lookup"><span data-stu-id="03d55-325">In hello second case, we reverse hello metric weights.</span></span> <span data-ttu-id="03d55-326">Därför växlingar hello klustret Resource Manager tjänster A och B toocome in med en allokering där MetricB är bättre belastningsutjämnade än MetricA.</span><span class="sxs-lookup"><span data-stu-id="03d55-326">As a result, hello Cluster Resource Manager swaps services A and B toocome up with an allocation where MetricB is better balanced than MetricA.</span></span>

> [!NOTE]
> <span data-ttu-id="03d55-327">Tjänstmåttets vikt bestämmer hur hello klustret Resource Manager ska utjämna, men inte när NLB ska hända.</span><span class="sxs-lookup"><span data-stu-id="03d55-327">Metric weights determine how hello Cluster Resource Manager should balance, but not when balancing should happen.</span></span> <span data-ttu-id="03d55-328">Mer information om belastningsutjämning kolla [den här artikeln](service-fabric-cluster-resource-manager-balancing.md)</span><span class="sxs-lookup"><span data-stu-id="03d55-328">For more information on balancing, check out [this article](service-fabric-cluster-resource-manager-balancing.md)</span></span>
>

### <a name="global-metric-weights"></a><span data-ttu-id="03d55-329">Globala mått vikterna</span><span class="sxs-lookup"><span data-stu-id="03d55-329">Global metric weights</span></span>
<span data-ttu-id="03d55-330">Anta att ServiceA definierar MetricA som vikt hög och ServiceB anger hello vikt för MetricA tooLow eller noll.</span><span class="sxs-lookup"><span data-stu-id="03d55-330">Let's say ServiceA defines MetricA as weight High, and ServiceB sets hello weight for MetricA tooLow or Zero.</span></span> <span data-ttu-id="03d55-331">Vad är hello faktiska vikten hamnar används?</span><span class="sxs-lookup"><span data-stu-id="03d55-331">What’s hello actual weight that ends up getting used?</span></span>

<span data-ttu-id="03d55-332">Det finns flera vikter som spåras för varje mått.</span><span class="sxs-lookup"><span data-stu-id="03d55-332">There are multiple weights that are tracked for every metric.</span></span> <span data-ttu-id="03d55-333">hello första vikt är hello som definieras för hello mått när hello-tjänsten har skapats.</span><span class="sxs-lookup"><span data-stu-id="03d55-333">hello first weight is hello one defined for hello metric when hello service is created.</span></span> <span data-ttu-id="03d55-334">hello är andra vikt en global vikt, som beräknas automatiskt.</span><span class="sxs-lookup"><span data-stu-id="03d55-334">hello other weight is a global weight, which is computed automatically.</span></span> <span data-ttu-id="03d55-335">hello hanteraren för filserverresurser använder båda dessa vikter vid bedömningen lösningar.</span><span class="sxs-lookup"><span data-stu-id="03d55-335">hello Cluster Resource Manager uses both these weights when scoring solutions.</span></span> <span data-ttu-id="03d55-336">Det är viktigt att hänsyn tas till båda vikter.</span><span class="sxs-lookup"><span data-stu-id="03d55-336">Taking both weights into account is important.</span></span> <span data-ttu-id="03d55-337">Detta gör hello klustret Resource Manager toobalance varje tjänst bl.a tooits äger prioriteter och kontrollera även att hello-kluster som helhet allokeras korrekt.</span><span class="sxs-lookup"><span data-stu-id="03d55-337">This allows hello Cluster Resource Manager toobalance each service according tooits own priorities, and also ensure that hello cluster as a whole is allocated correctly.</span></span>

<span data-ttu-id="03d55-338">Vad som skulle hända om hello klustret Resource Manager inte bryr dig om både globala och lokala saldo?</span><span class="sxs-lookup"><span data-stu-id="03d55-338">What would happen if hello Cluster Resource Manager didn’t care about both global and local balance?</span></span> <span data-ttu-id="03d55-339">Det är enkelt tooconstruct lösningar som balanseras globalt, men vilket kan resultera i sämre resursbalansen för enskilda tjänster.</span><span class="sxs-lookup"><span data-stu-id="03d55-339">Well, it’s easy tooconstruct solutions that are globally balanced, but which result in poor resource balance for individual services.</span></span> <span data-ttu-id="03d55-340">I följande exempel hello, ska vi titta på en tjänst som konfigurerats med bara hello standard mått och se vad som händer när endast globala saldo betraktas som:</span><span class="sxs-lookup"><span data-stu-id="03d55-340">In hello following example, let’s look at a service configured with just hello default metrics, and see what happens when only global balance is considered:</span></span>

<span data-ttu-id="03d55-341"><center>
![hello effekten av en Global endast-lösning][Image4]
</center></span><span class="sxs-lookup"><span data-stu-id="03d55-341"><center>
![hello Impact of a Global Only Solution][Image4]
</center></span></span>

<span data-ttu-id="03d55-342">I hello översta exempel endast baseras på globalt saldo balanseras verkligen hello klustret som helhet.</span><span class="sxs-lookup"><span data-stu-id="03d55-342">In hello top example based only on global balance, hello cluster as a whole is indeed balanced.</span></span> <span data-ttu-id="03d55-343">Alla noder har hello samma antal primärfärgerna och hello samma antal totala repliker.</span><span class="sxs-lookup"><span data-stu-id="03d55-343">All nodes have hello same count of primaries and hello same number total replicas.</span></span> <span data-ttu-id="03d55-344">Men om du tittar på hello faktiska effekten av den här allokeringen är det inte så bra: hello förlust av alla noder som påverkar en viss arbetsbelastning oproportionerligt, eftersom det tar bort all dess primärfärgerna.</span><span class="sxs-lookup"><span data-stu-id="03d55-344">However, if you look at hello actual impact of this allocation it’s not so good: hello loss of any node impacts a particular workload disproportionately, because it takes out all of its primaries.</span></span> <span data-ttu-id="03d55-345">Till exempel om hello första noden misslyckas hello tre primärfärgerna för hello tre olika partitioner hello cirkel tjänsten skulle alla gå förlorade.</span><span class="sxs-lookup"><span data-stu-id="03d55-345">For example, if hello first node fails hello three primaries for hello three different partitions of hello Circle service would all be lost.</span></span> <span data-ttu-id="03d55-346">Hello triangel och Sexhörning tjänster har däremot deras partitioner förlorar en replik.</span><span class="sxs-lookup"><span data-stu-id="03d55-346">Conversely, hello Triangle and Hexagon services have their partitions lose a replica.</span></span> <span data-ttu-id="03d55-347">Detta medför att några avbrott än med toorecover hello ned replik.</span><span class="sxs-lookup"><span data-stu-id="03d55-347">This causes no disruption, other than having toorecover hello down replica.</span></span>

<span data-ttu-id="03d55-348">I hello ned exempel har hello klustret Resource Manager distribuerade hello repliker baserat på båda hello global och per service saldo.</span><span class="sxs-lookup"><span data-stu-id="03d55-348">In hello bottom example, hello Cluster Resource Manager has distributed hello replicas based on both hello global and per-service balance.</span></span> <span data-ttu-id="03d55-349">Vid beräkning av hello poängen för hello lösningen ger de flesta hello vikt toohello globala lösningen och en (konfigureras) del tooindividual services.</span><span class="sxs-lookup"><span data-stu-id="03d55-349">When calculating hello score of hello solution it gives most of hello weight toohello global solution, and a (configurable) portion tooindividual services.</span></span> <span data-ttu-id="03d55-350">Globala balansera för ett mått beräknas baserat på hello medelvärdet av hello mått vikter från varje tjänst.</span><span class="sxs-lookup"><span data-stu-id="03d55-350">Global balance for a metric is calculated based on hello average of hello metric weights from each service.</span></span> <span data-ttu-id="03d55-351">Varje tjänst balanseras bl.a tooits egna definierade mått vikter.</span><span class="sxs-lookup"><span data-stu-id="03d55-351">Each service is balanced according tooits own defined metric weights.</span></span> <span data-ttu-id="03d55-352">Detta säkerställer att balanseras hello tjänster inom själva enligt tootheir egna behov.</span><span class="sxs-lookup"><span data-stu-id="03d55-352">This ensures that hello services are balanced within themselves according tootheir own needs.</span></span> <span data-ttu-id="03d55-353">Därför distribueras hello samma första noden misslyckades hello över alla partitioner i alla tjänster.</span><span class="sxs-lookup"><span data-stu-id="03d55-353">As a result, if hello same first node fails hello failure is distributed across all partitions of all services.</span></span> <span data-ttu-id="03d55-354">hello påverkan tooeach är hello samma.</span><span class="sxs-lookup"><span data-stu-id="03d55-354">hello impact tooeach is hello same.</span></span>

## <a name="next-steps"></a><span data-ttu-id="03d55-355">Nästa steg</span><span class="sxs-lookup"><span data-stu-id="03d55-355">Next steps</span></span>
- <span data-ttu-id="03d55-356">Mer information om hur du konfigurerar tjänster, [Lär dig mer om hur du konfigurerar tjänster](service-fabric-cluster-resource-manager-configure-services.md)(service-fabric-cluster-resource-manager-configure-services.md)</span><span class="sxs-lookup"><span data-stu-id="03d55-356">For more information on configuring services, [Learn about configuring Services](service-fabric-cluster-resource-manager-configure-services.md)(service-fabric-cluster-resource-manager-configure-services.md)</span></span>
- <span data-ttu-id="03d55-357">Definiera defragmentering mått är ett sätt tooconsolidate belastningen på noder i stället för att sprida. toolearn hur tooconfigure defragmenteringen finns för[i den här artikeln](service-fabric-cluster-resource-manager-defragmentation-metrics.md)</span><span class="sxs-lookup"><span data-stu-id="03d55-357">Defining Defragmentation Metrics is one way tooconsolidate load on nodes instead of spreading it out. toolearn how tooconfigure defragmentation, refer too[this article](service-fabric-cluster-resource-manager-defragmentation-metrics.md)</span></span>
- <span data-ttu-id="03d55-358">toofind ut om hur hello klustret Resource Manager hanterar och balanserar belastningen i hello kluster kolla hello artikel på [belastningsutjämning](service-fabric-cluster-resource-manager-balancing.md)</span><span class="sxs-lookup"><span data-stu-id="03d55-358">toofind out about how hello Cluster Resource Manager manages and balances load in hello cluster, check out hello article on [balancing load](service-fabric-cluster-resource-manager-balancing.md)</span></span>
- <span data-ttu-id="03d55-359">Starta från början hello och [få en introduktion toohello resurshanteraren för Service Fabric-kluster](service-fabric-cluster-resource-manager-introduction.md)</span><span class="sxs-lookup"><span data-stu-id="03d55-359">Start from hello beginning and [get an Introduction toohello Service Fabric Cluster Resource Manager](service-fabric-cluster-resource-manager-introduction.md)</span></span>
- <span data-ttu-id="03d55-360">Förflyttningskostnad är ett sätt att signalering toohello klustret Resource Manager att vissa tjänster är dyrare toomove än andra.</span><span class="sxs-lookup"><span data-stu-id="03d55-360">Movement Cost is one way of signaling toohello Cluster Resource Manager that certain services are more expensive toomove than others.</span></span> <span data-ttu-id="03d55-361">toolearn mer om förflyttningskostnad, referera för[i den här artikeln](service-fabric-cluster-resource-manager-movement-cost.md)</span><span class="sxs-lookup"><span data-stu-id="03d55-361">toolearn more about movement cost, refer too[this article](service-fabric-cluster-resource-manager-movement-cost.md)</span></span>

[Image1]:./media/service-fabric-cluster-resource-manager-metrics/cluster-resource-manager-cluster-layout-with-default-metrics.png
[Image2]:./media/service-fabric-cluster-resource-manager-metrics/Service-Fabric-Resource-Manager-Dynamic-Load-Reports.png
[Image3]:./media/service-fabric-cluster-resource-manager-metrics/cluster-resource-manager-metric-weights-impact.png
[Image4]:./media/service-fabric-cluster-resource-manager-metrics/cluster-resource-manager-global-vs-local-balancing.png

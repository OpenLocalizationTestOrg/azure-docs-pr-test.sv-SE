---
title: "aaaService Fabric App uppgradera med hjälp av PowerShell | Microsoft Docs"
description: "Den här artikeln beskriver hur hello upplevelse av att distribuera ett Service Fabric-program, ändra hello kod och lansera uppgradering med hjälp av PowerShell."
services: service-fabric
documentationcenter: .net
author: mani-ramaswamy
manager: timlt
editor: 
ms.assetid: 9bc75748-96b0-49ca-8d8a-41fe08398f25
ms.service: service-fabric
ms.devlang: dotnet
ms.topic: article
ms.tgt_pltfrm: NA
ms.workload: NA
ms.date: 8/9/2017
ms.author: subramar
ms.openlocfilehash: f31212264de45c3b257a0efafb75c10c279b989f
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: sv-SE
ms.lasthandoff: 10/06/2017
---
# <a name="service-fabric-application-upgrade-using-powershell"></a><span data-ttu-id="4e905-103">Uppgradering av Service Fabric-programmet med PowerShell</span><span class="sxs-lookup"><span data-stu-id="4e905-103">Service Fabric application upgrade using PowerShell</span></span>
> [!div class="op_single_selector"]
> * [<span data-ttu-id="4e905-104">PowerShell</span><span class="sxs-lookup"><span data-stu-id="4e905-104">PowerShell</span></span>](service-fabric-application-upgrade-tutorial-powershell.md)
> * [<span data-ttu-id="4e905-105">Visual Studio</span><span class="sxs-lookup"><span data-stu-id="4e905-105">Visual Studio</span></span>](service-fabric-application-upgrade-tutorial.md)
> 
> 

<br/>

<span data-ttu-id="4e905-106">hello används oftast och rekommenderade uppgradera metoden är hello övervakas löpande uppgradering.</span><span class="sxs-lookup"><span data-stu-id="4e905-106">hello most frequently used and recommended upgrade approach is hello monitored rolling upgrade.</span></span>  <span data-ttu-id="4e905-107">Azure Service Fabric övervakar hello hälsotillstånd hello programmet uppgraderas baserat på en uppsättning hälsoprinciper.</span><span class="sxs-lookup"><span data-stu-id="4e905-107">Azure Service Fabric monitors hello health of hello application being upgraded based on a set of health policies.</span></span> <span data-ttu-id="4e905-108">När en uppdateringsdomän (UD) har uppgraderats, Service Fabric utvärderar hello programmets hälsotillstånd och fortsätter toohello nästa uppdateringsdomän eller misslyckas hello uppgraderingen beroende på hello hälsoprinciper.</span><span class="sxs-lookup"><span data-stu-id="4e905-108">Once an update domain (UD) is upgraded, Service Fabric evaluates hello application health and either proceeds toohello next update domain or fails hello upgrade depending on hello health policies.</span></span>

<span data-ttu-id="4e905-109">En Programuppgradering av övervakade kan utföras med hjälp av hello hanteras eller interna API: er, PowerShell eller REST.</span><span class="sxs-lookup"><span data-stu-id="4e905-109">A monitored application upgrade can be performed using hello managed or native APIs, PowerShell, or REST.</span></span> <span data-ttu-id="4e905-110">Anvisningar för att uppgradera med hjälp av Visual Studio finns [uppgradera ditt program med Visual Studio](service-fabric-application-upgrade-tutorial.md).</span><span class="sxs-lookup"><span data-stu-id="4e905-110">For instructions on performing an upgrade using Visual Studio, see [Upgrading your application using Visual Studio](service-fabric-application-upgrade-tutorial.md).</span></span>

<span data-ttu-id="4e905-111">Med Service Fabric övervakas samlade uppgraderingar konfigurera hello programadministratör hello utvärdering hälsoprincip att Service Fabric använder toodetermine om hello programmet är felfritt.</span><span class="sxs-lookup"><span data-stu-id="4e905-111">With Service Fabric monitored rolling upgrades, hello application administrator can configure hello health evaluation policy that Service Fabric uses toodetermine if hello application is healthy.</span></span> <span data-ttu-id="4e905-112">Hej administratör kan dessutom konfigurera hello åtgärd toobe utförs när hello hälsoutvärderingen misslyckas (till exempel göra en automatisk återställning.) Det här avsnittet går igenom en övervakade uppgradering för en hello SDK-exempel som använder PowerShell.</span><span class="sxs-lookup"><span data-stu-id="4e905-112">In addition, hello administrator can configure hello action toobe taken when hello health evaluation fails (for example, doing an automatic rollback.) This section walks through a monitored upgrade for one of hello SDK samples that uses PowerShell.</span></span> <span data-ttu-id="4e905-113">hello följande Microsoft Virtual Academy videoklippet även innehåller en app-uppgradering:<center><a target="_blank" href="https://mva.microsoft.com/en-US/training-courses/building-microservices-applications-on-azure-service-fabric-16747?l=OrHJH66yC_6406218965">
<img src="./media/service-fabric-application-upgrade-tutorial-powershell/AppLifecycleVid.png" WIDTH="360" HEIGHT="244">
</a></center></span><span class="sxs-lookup"><span data-stu-id="4e905-113">hello following Microsoft Virtual Academy video also walks you through an app upgrade: <center><a target="_blank" href="https://mva.microsoft.com/en-US/training-courses/building-microservices-applications-on-azure-service-fabric-16747?l=OrHJH66yC_6406218965">
<img src="./media/service-fabric-application-upgrade-tutorial-powershell/AppLifecycleVid.png" WIDTH="360" HEIGHT="244">
</a></center></span></span>

## <a name="step-1-build-and-deploy-hello-visual-objects-sample"></a><span data-ttu-id="4e905-114">Steg 1: Skapa och distribuera hello visuella objekt exempel</span><span class="sxs-lookup"><span data-stu-id="4e905-114">Step 1: Build and deploy hello Visual Objects sample</span></span>
<span data-ttu-id="4e905-115">Skapa och publicera programmet hello genom att högerklicka på projektet hello, **VisualObjectsApplication,** och välja hello **publicera** kommando.</span><span class="sxs-lookup"><span data-stu-id="4e905-115">Build and publish hello application by right-clicking on hello application project, **VisualObjectsApplication,** and selecting hello **Publish** command.</span></span>  <span data-ttu-id="4e905-116">Mer information finns i [Service Fabric uppgradera självstudien](service-fabric-application-upgrade-tutorial.md).</span><span class="sxs-lookup"><span data-stu-id="4e905-116">For more information, see [Service Fabric application upgrade tutorial](service-fabric-application-upgrade-tutorial.md).</span></span>  <span data-ttu-id="4e905-117">Du kan också använda PowerShell toodeploy ditt program.</span><span class="sxs-lookup"><span data-stu-id="4e905-117">Alternatively, you can use PowerShell toodeploy your application.</span></span>

> [!NOTE]
> <span data-ttu-id="4e905-118">Innan någon av hello Service Fabric-kommandon kan användas i PowerShell, måste du först tooconnect toohello kluster med hjälp av hello `Connect-ServiceFabricCluster` cmdlet.</span><span class="sxs-lookup"><span data-stu-id="4e905-118">Before any of hello Service Fabric commands may be used in PowerShell, you first need tooconnect toohello cluster by using hello `Connect-ServiceFabricCluster` cmdlet.</span></span> <span data-ttu-id="4e905-119">På liknande sätt, förutsätts att hello klustret har redan ställts in på den lokala datorn.</span><span class="sxs-lookup"><span data-stu-id="4e905-119">Similarly, it is assumed that hello Cluster has already been set up on your local machine.</span></span> <span data-ttu-id="4e905-120">Se hello artikel på [ställa in din utvecklingsmiljö för Service Fabric](service-fabric-get-started.md).</span><span class="sxs-lookup"><span data-stu-id="4e905-120">See hello article on [setting up your Service Fabric development environment](service-fabric-get-started.md).</span></span>
> 
> 

<span data-ttu-id="4e905-121">När du har skapat hello-projekt i Visual Studio kan du använda hello PowerShell-kommando [kopiera ServiceFabricApplicationPackage](/powershell/servicefabric/vlatest/copy-servicefabricapplicationpackage) toocopy hello programmet paketet toohello Avbildningsarkiv.</span><span class="sxs-lookup"><span data-stu-id="4e905-121">After building hello project in Visual Studio, you can use hello PowerShell command [Copy-ServiceFabricApplicationPackage](/powershell/servicefabric/vlatest/copy-servicefabricapplicationpackage) toocopy hello application package toohello ImageStore.</span></span> <span data-ttu-id="4e905-122">Om du vill tooverify hello appaket lokalt, Använd hello [Test ServiceFabricApplicationPackage](/powershell/servicefabric/vlatest/test-servicefabricapplicationpackage) cmdlet.</span><span class="sxs-lookup"><span data-stu-id="4e905-122">If you want tooverify hello app package locally, use hello [Test-ServiceFabricApplicationPackage](/powershell/servicefabric/vlatest/test-servicefabricapplicationpackage) cmdlet.</span></span> <span data-ttu-id="4e905-123">hello nästa steg är tooregister hello toohello Service Fabric programkörning med hello [registrera ServiceFabricApplicationPackage](/powershell/servicefabric/vlatest/register-servicefabricapplicationtype) cmdlet.</span><span class="sxs-lookup"><span data-stu-id="4e905-123">hello next step is tooregister hello application toohello Service Fabric runtime using hello [Register-ServiceFabricApplicationPackage](/powershell/servicefabric/vlatest/register-servicefabricapplicationtype) cmdlet.</span></span> <span data-ttu-id="4e905-124">hello sista steget är toostart en instans av programmet hello med hjälp av hello [ny ServiceFabricApplication](/powershell/module/servicefabric/new-servicefabricapplication?view=azureservicefabricps) cmdlet.</span><span class="sxs-lookup"><span data-stu-id="4e905-124">hello final step is toostart an instance of hello application by using hello [New-ServiceFabricApplication](/powershell/module/servicefabric/new-servicefabricapplication?view=azureservicefabricps) cmdlet.</span></span>  <span data-ttu-id="4e905-125">De här tre stegen är liknande toousing hello **distribuera** menyalternativet i Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="4e905-125">These three steps are analogous toousing hello **Deploy** menu item in Visual Studio.</span></span>

<span data-ttu-id="4e905-126">Nu kan du använda [Service Fabric Explorer tooview hello klustret och hello programmet](service-fabric-visualizing-your-cluster.md).</span><span class="sxs-lookup"><span data-stu-id="4e905-126">Now, you can use [Service Fabric Explorer tooview hello cluster and hello application](service-fabric-visualizing-your-cluster.md).</span></span> <span data-ttu-id="4e905-127">hello programmet har en webbtjänst som kan vara navigerat tooin Internet Explorer genom att skriva [http://localhost: 8081/visualobjects](http://localhost:8081/visualobjects) i hello adressfältet.</span><span class="sxs-lookup"><span data-stu-id="4e905-127">hello application has a web service that can be navigated tooin Internet Explorer by typing [http://localhost:8081/visualobjects](http://localhost:8081/visualobjects) in hello address bar.</span></span>  <span data-ttu-id="4e905-128">Du bör se vissa flytande visuella objekt flytta runt i hello-skärmen.</span><span class="sxs-lookup"><span data-stu-id="4e905-128">You should see some floating visual objects moving around in hello screen.</span></span>  <span data-ttu-id="4e905-129">Du kan dessutom använda [Get-ServiceFabricApplication](/powershell/module/servicefabric/get-servicefabricapplication?view=azureservicefabricps) toocheck hello programstatus.</span><span class="sxs-lookup"><span data-stu-id="4e905-129">Additionally, you can use [Get-ServiceFabricApplication](/powershell/module/servicefabric/get-servicefabricapplication?view=azureservicefabricps) toocheck hello application status.</span></span>

## <a name="step-2-update-hello-visual-objects-sample"></a><span data-ttu-id="4e905-130">Steg 2: Uppdatera hello visuella objekt exempel</span><span class="sxs-lookup"><span data-stu-id="4e905-130">Step 2: Update hello Visual Objects sample</span></span>
<span data-ttu-id="4e905-131">Du kan se att med hello-version som har distribuerats i steg 1 hello visuella objekt inte rotera.</span><span class="sxs-lookup"><span data-stu-id="4e905-131">You might notice that with hello version that was deployed in Step 1, hello visual objects do not rotate.</span></span> <span data-ttu-id="4e905-132">Vi uppgradera det här programmet tooone där hello visuella objekt också rotera.</span><span class="sxs-lookup"><span data-stu-id="4e905-132">Let's upgrade this application tooone where hello visual objects also rotate.</span></span>

<span data-ttu-id="4e905-133">Välj hello VisualObjects.ActorService projekt inom hello VisualObjects lösningen och öppna hello StatefulVisualObjectActor.cs filen.</span><span class="sxs-lookup"><span data-stu-id="4e905-133">Select hello VisualObjects.ActorService project within hello VisualObjects solution, and open hello StatefulVisualObjectActor.cs file.</span></span> <span data-ttu-id="4e905-134">Navigera i filen, toohello metoden `MoveObject`, kommentera ut `this.State.Move()`, och Avkommentera `this.State.Move(true)`.</span><span class="sxs-lookup"><span data-stu-id="4e905-134">Within that file, navigate toohello method `MoveObject`, comment out `this.State.Move()`, and uncomment `this.State.Move(true)`.</span></span> <span data-ttu-id="4e905-135">Den här ändringen roterar hello objekt när hello-tjänsten har uppgraderats.</span><span class="sxs-lookup"><span data-stu-id="4e905-135">This change rotates hello objects after hello service is upgraded.</span></span>

<span data-ttu-id="4e905-136">Vi behöver också tooupdate hello *ServiceManifest.xml* fil (under PackageRoot) av hello projektet **VisualObjects.ActorService**.</span><span class="sxs-lookup"><span data-stu-id="4e905-136">We also need tooupdate hello *ServiceManifest.xml* file (under PackageRoot) of hello project **VisualObjects.ActorService**.</span></span> <span data-ttu-id="4e905-137">Uppdatera hello *CodePackage* hello service version too2.0 och hello motsvarande rader i hello *ServiceManifest.xml* fil.</span><span class="sxs-lookup"><span data-stu-id="4e905-137">Update hello *CodePackage* and hello service version too2.0, and hello corresponding lines in hello *ServiceManifest.xml* file.</span></span>
<span data-ttu-id="4e905-138">Du kan använda hello Visual Studio *redigera Manifest filer* alternativ när du högerklickar på hello lösning toomake hello manifestfilen ändringar.</span><span class="sxs-lookup"><span data-stu-id="4e905-138">You can use hello Visual Studio *Edit Manifest Files* option after you right-click on hello solution toomake hello manifest file changes.</span></span>

<span data-ttu-id="4e905-139">När hello ändringar har gjorts hello manifestet bör se ut som följande hello (markerade delar visa hello ändringar):</span><span class="sxs-lookup"><span data-stu-id="4e905-139">After hello changes are made, hello manifest should look like hello following (highlighted portions show hello changes):</span></span>

```xml
<ServiceManifestName="VisualObjects.ActorService" Version="2.0" xmlns="http://schemas.microsoft.com/2011/01/fabric" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">

<CodePackageName="Code" Version="2.0">
```

<span data-ttu-id="4e905-140">Nu hello *ApplicationManifest.xml* fil (finns under hello **VisualObjects** projekt under hello **VisualObjects** lösning) är uppdaterade tooversion 2.0 för hello  **VisualObjects.ActorService** projekt.</span><span class="sxs-lookup"><span data-stu-id="4e905-140">Now hello *ApplicationManifest.xml* file (found under hello **VisualObjects** project under hello **VisualObjects** solution) is updated tooversion 2.0 of hello **VisualObjects.ActorService** project.</span></span> <span data-ttu-id="4e905-141">Dessutom är hello programversion uppdaterade too2.0.0.0 från 1.0.0.0.</span><span class="sxs-lookup"><span data-stu-id="4e905-141">In addition, hello Application version is updated too2.0.0.0 from 1.0.0.0.</span></span> <span data-ttu-id="4e905-142">Hej *ApplicationManifest.xml* ser ut som hello följande utdrag:</span><span class="sxs-lookup"><span data-stu-id="4e905-142">hello *ApplicationManifest.xml* should look like hello following snippet:</span></span>

```xml
<ApplicationManifestxmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" ApplicationTypeName="VisualObjects" ApplicationTypeVersion="2.0.0.0" xmlns="http://schemas.microsoft.com/2011/01/fabric">

 <ServiceManifestRefServiceManifestName="VisualObjects.ActorService" ServiceManifestVersion="2.0" />
```


<span data-ttu-id="4e905-143">Nu kan skapa hello projektet genom att välja bara hello **ActorService** -projektet och högerklicka och välja hello **bygga** alternativet i Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="4e905-143">Now, build hello project by selecting just hello **ActorService** project, and then right-clicking and selecting hello **Build** option in Visual Studio.</span></span> <span data-ttu-id="4e905-144">Om du väljer **återskapa alla**, bör du uppdatera hello versioner för alla projekt, eftersom hello koden skulle ha ändrats.</span><span class="sxs-lookup"><span data-stu-id="4e905-144">If you select **Rebuild all**, you should update hello versions for all projects, since hello code would have changed.</span></span> <span data-ttu-id="4e905-145">Nästa vi paketet hello uppdaterade tillämpningsprogrammet genom att högerklicka på ***VisualObjectsApplication***, välja hello Service Fabric-menyn och välja **paketet**.</span><span class="sxs-lookup"><span data-stu-id="4e905-145">Next, let's package hello updated application by right-clicking on ***VisualObjectsApplication***, selecting hello Service Fabric Menu, and choosing **Package**.</span></span> <span data-ttu-id="4e905-146">Den här åtgärden skapar ett programpaket som kan distribueras.</span><span class="sxs-lookup"><span data-stu-id="4e905-146">This action creates an application package that can be deployed.</span></span>  <span data-ttu-id="4e905-147">Uppdaterade programmet är redo toobe distribueras.</span><span class="sxs-lookup"><span data-stu-id="4e905-147">Your updated application is ready toobe deployed.</span></span>

## <a name="step-3--decide-on-health-policies-and-upgrade-parameters"></a><span data-ttu-id="4e905-148">Steg 3: Bestäm hälsoprinciper och uppgradering av parametrar</span><span class="sxs-lookup"><span data-stu-id="4e905-148">Step 3:  Decide on health policies and upgrade parameters</span></span>
<span data-ttu-id="4e905-149">Bekanta dig med hello [uppgradera applikationsparametrarna](service-fabric-application-upgrade-parameters.md) och hello [uppgraderingsprocessen](service-fabric-application-upgrade.md) tooget en god förståelse av hello olika uppgradera parametrar, timeout och hälsotillstånd kriterium tillämpas .</span><span class="sxs-lookup"><span data-stu-id="4e905-149">Familiarize yourself with hello [application upgrade parameters](service-fabric-application-upgrade-parameters.md) and hello [upgrade process](service-fabric-application-upgrade.md) tooget a good understanding of hello various upgrade parameters, time-outs, and health criterion applied.</span></span> <span data-ttu-id="4e905-150">Den här genomgången hello service hälsa utvärdering kriterium angetts toohello standard (och rekommenderas) värden, vilket innebär att alla tjänster och instanser ska vara *felfri* efter hello uppgradering.</span><span class="sxs-lookup"><span data-stu-id="4e905-150">For this walkthrough, hello service health evaluation criterion is set toohello default (and recommended) values, which means that all services and instances should be *healthy* after hello upgrade.</span></span>  

<span data-ttu-id="4e905-151">Vi dock öka hello *HealthCheckStableDuration* too60 sekunder (så att hello tjänster är felfri för minst 20 sekunder innan hello uppgraderingen fortsätter toohello nästa uppdatering domän).</span><span class="sxs-lookup"><span data-stu-id="4e905-151">However, let's increase hello *HealthCheckStableDuration* too60 seconds (so that hello services are healthy for at least 20 seconds before hello upgrade proceeds toohello next update domain).</span></span>  <span data-ttu-id="4e905-152">Vi ska också ange hello *UpgradeDomainTimeout* toobe 1200 sekunder och hello *UpgradeTimeout* toobe 3000 sekunder.</span><span class="sxs-lookup"><span data-stu-id="4e905-152">Let's also set hello *UpgradeDomainTimeout* toobe 1200 seconds and hello *UpgradeTimeout* toobe 3000 seconds.</span></span>

<span data-ttu-id="4e905-153">Slutligen ska vi också ange hello *UpgradeFailureAction* toorollback.</span><span class="sxs-lookup"><span data-stu-id="4e905-153">Finally, let's also set hello *UpgradeFailureAction* toorollback.</span></span> <span data-ttu-id="4e905-154">Det här alternativet kräver Service Fabric tooroll tillbaka hello toohello tidigare programversion om det uppstår problem under hello uppgraderingen.</span><span class="sxs-lookup"><span data-stu-id="4e905-154">This option requires Service Fabric tooroll back hello application toohello previous version if it encounters any issues during hello upgrade.</span></span> <span data-ttu-id="4e905-155">Det innebär när du startar uppgraderingen hello (i steg 4) har hello följande parametrar angetts:</span><span class="sxs-lookup"><span data-stu-id="4e905-155">Thus, when starting hello upgrade (in Step 4), hello following parameters are specified:</span></span>

<span data-ttu-id="4e905-156">FailureAction = återställning</span><span class="sxs-lookup"><span data-stu-id="4e905-156">FailureAction = Rollback</span></span>

<span data-ttu-id="4e905-157">HealthCheckStableDurationSec = 60</span><span class="sxs-lookup"><span data-stu-id="4e905-157">HealthCheckStableDurationSec = 60</span></span>

<span data-ttu-id="4e905-158">UpgradeDomainTimeoutSec = 1200</span><span class="sxs-lookup"><span data-stu-id="4e905-158">UpgradeDomainTimeoutSec = 1200</span></span>

<span data-ttu-id="4e905-159">UpgradeTimeout = 3000</span><span class="sxs-lookup"><span data-stu-id="4e905-159">UpgradeTimeout = 3000</span></span>

## <a name="step-4-prepare-application-for-upgrade"></a><span data-ttu-id="4e905-160">Steg 4: Förbereda program för uppgradering</span><span class="sxs-lookup"><span data-stu-id="4e905-160">Step 4: Prepare application for upgrade</span></span>
<span data-ttu-id="4e905-161">Nu hello programmet har skapats och redo toobe uppgraderas.</span><span class="sxs-lookup"><span data-stu-id="4e905-161">Now hello application is built and ready toobe upgraded.</span></span> <span data-ttu-id="4e905-162">Om du öppnar ett PowerShell-fönster som administratör och skriv [Get-ServiceFabricApplication](/powershell/module/servicefabric/get-servicefabricapplication?view=azureservicefabricps), bör den gör att du vet att den är programtyp 1.0.0.0 av **VisualObjects** som har distribuerats.</span><span class="sxs-lookup"><span data-stu-id="4e905-162">If you open up a PowerShell window as an administrator and type [Get-ServiceFabricApplication](/powershell/module/servicefabric/get-servicefabricapplication?view=azureservicefabricps), it should let you know that it is application type 1.0.0.0 of **VisualObjects** that's been deployed.</span></span>  

<span data-ttu-id="4e905-163">hello programpaket lagras under hello följande relativ sökväg där du okomprimerade hello Service Fabric-SDK - *Samples\Services\Stateful\VisualObjects\VisualObjects\obj\x64\Debug*.</span><span class="sxs-lookup"><span data-stu-id="4e905-163">hello application package is stored under hello following relative path where you uncompressed hello Service Fabric SDK - *Samples\Services\Stateful\VisualObjects\VisualObjects\obj\x64\Debug*.</span></span> <span data-ttu-id="4e905-164">Katalogen där hello programpaket lagras bör du hitta en ”paketmapp”.</span><span class="sxs-lookup"><span data-stu-id="4e905-164">You should find a "Package" folder in that directory, where hello application package is stored.</span></span> <span data-ttu-id="4e905-165">Kontrollera hello tidsstämplar tooensure att det är hello senaste build-versionen (du kanske måste toomodify hello korrekt samt sökvägar).</span><span class="sxs-lookup"><span data-stu-id="4e905-165">Check hello timestamps tooensure that it is hello latest build (you may need toomodify hello paths appropriately as well).</span></span>

<span data-ttu-id="4e905-166">Nu ska vi uppdatera kopia hello programmet paketet toohello Service Fabric Avbildningsarkiv (där hello programpaket lagras av Service Fabric).</span><span class="sxs-lookup"><span data-stu-id="4e905-166">Now let's copy hello updated application package toohello Service Fabric ImageStore (where hello application packages are stored by Service Fabric).</span></span> <span data-ttu-id="4e905-167">Hej parametern *ApplicationPackagePathInImageStore* informerar Service Fabric där den kan hitta hello programpaket.</span><span class="sxs-lookup"><span data-stu-id="4e905-167">hello parameter *ApplicationPackagePathInImageStore* informs Service Fabric where it can find hello application package.</span></span> <span data-ttu-id="4e905-168">Vi har gjort programmet hello uppdateras ”VisualObjects\_V2” med följande kommando (du kanske måste toomodify sökvägar igen på lämpligt sätt) hello.</span><span class="sxs-lookup"><span data-stu-id="4e905-168">We have put hello updated application in "VisualObjects\_V2" with hello following command (you may need toomodify paths again appropriately).</span></span>

```powershell
Copy-ServiceFabricApplicationPackage  -ApplicationPackagePath .\Samples\Services\Stateful\VisualObjects\VisualObjects\obj\x64\Debug\Package
-ImageStoreConnectionString fabric:ImageStore   -ApplicationPackagePathInImageStore "VisualObjects\_V2"
```

<span data-ttu-id="4e905-169">hello nästa steg är tooregister programmet med Service Fabric som kan utföras med hjälp av hello [registrera ServiceFabricApplicationType](/powershell/module/servicefabric/register-servicefabricapplicationtype?view=azureservicefabricps) kommando:</span><span class="sxs-lookup"><span data-stu-id="4e905-169">hello next step is tooregister this application with Service Fabric, which can be performed using hello [Register-ServiceFabricApplicationType](/powershell/module/servicefabric/register-servicefabricapplicationtype?view=azureservicefabricps) command:</span></span>

```powershell
Register-ServiceFabricApplicationType -ApplicationPathInImageStore "VisualObjects\_V2"
```

<span data-ttu-id="4e905-170">Om hello föregående kommando inte lyckas är det troligt att du behöver en återskapning av alla tjänster.</span><span class="sxs-lookup"><span data-stu-id="4e905-170">If hello preceding command doesn't succeed, it is likely that you need a rebuild of all services.</span></span> <span data-ttu-id="4e905-171">Som tidigare nämnts i steg 2 kan kanske du tooupdate din WebService-version.</span><span class="sxs-lookup"><span data-stu-id="4e905-171">As mentioned in Step 2, you may have tooupdate your WebService version as well.</span></span>

## <a name="step-5-start-hello-application-upgrade"></a><span data-ttu-id="4e905-172">Steg 5: Starta uppgradering av programmet hello</span><span class="sxs-lookup"><span data-stu-id="4e905-172">Step 5: Start hello application upgrade</span></span>
<span data-ttu-id="4e905-173">Nu ska vi alla set toostart hello programmet uppgradera med hjälp av hello [Start ServiceFabricApplicationUpgrade](/powershell/module/servicefabric/start-servicefabricapplicationupgrade?view=azureservicefabricps) kommando:</span><span class="sxs-lookup"><span data-stu-id="4e905-173">Now, we're all set toostart hello application upgrade by using hello [Start-ServiceFabricApplicationUpgrade](/powershell/module/servicefabric/start-servicefabricapplicationupgrade?view=azureservicefabricps) command:</span></span>

```powershell
Start-ServiceFabricApplicationUpgrade -ApplicationName fabric:/VisualObjects -ApplicationTypeVersion 2.0.0.0 -HealthCheckStableDurationSec 60 -UpgradeDomainTimeoutSec 1200 -UpgradeTimeout 3000   -FailureAction Rollback -Monitored
```


<span data-ttu-id="4e905-174">hello programnamnet är hello samma som det beskrivs i hello *ApplicationManifest.xml* fil.</span><span class="sxs-lookup"><span data-stu-id="4e905-174">hello application name is hello same as it was described in hello *ApplicationManifest.xml* file.</span></span> <span data-ttu-id="4e905-175">Service Fabric använder det här namnet tooidentify vilket program komma uppgraderas.</span><span class="sxs-lookup"><span data-stu-id="4e905-175">Service Fabric uses this name tooidentify which application is getting upgraded.</span></span> <span data-ttu-id="4e905-176">Om du ställer in hello timeout toobe för kort, kan det uppstå ett felmeddelande om att tillstånd hello problem.</span><span class="sxs-lookup"><span data-stu-id="4e905-176">If you set hello time-outs toobe too short, you may encounter a failure message that states hello problem.</span></span> <span data-ttu-id="4e905-177">Se avsnittet om felsökning toohello eller öka hello timeout.</span><span class="sxs-lookup"><span data-stu-id="4e905-177">Refer toohello troubleshooting section, or increase hello time-outs.</span></span>

<span data-ttu-id="4e905-178">Nu som hello programmet uppgraderingen fortsätter du kan övervaka den med hjälp av Service Fabric Explorer eller genom att använda hello [Get-ServiceFabricApplicationUpgrade](/powershell/module/servicefabric/get-servicefabricapplicationupgrade?view=azureservicefabricps) PowerShell-kommando:</span><span class="sxs-lookup"><span data-stu-id="4e905-178">Now, as hello application upgrade proceeds, you can monitor it using Service Fabric Explorer, or by using hello [Get-ServiceFabricApplicationUpgrade](/powershell/module/servicefabric/get-servicefabricapplicationupgrade?view=azureservicefabricps) PowerShell command:</span></span> 

```powershell
Get-ServiceFabricApplicationUpgrade fabric:/VisualObjects
```

<span data-ttu-id="4e905-179">Om några minuter hello status som du fick med hjälp av hello föregående PowerShell-kommando bör ange att alla domäner som uppdateringen har uppgraderats (slutförd).</span><span class="sxs-lookup"><span data-stu-id="4e905-179">In a few minutes, hello status that you got by using hello preceding PowerShell command, should state that all update domains were upgraded (completed).</span></span> <span data-ttu-id="4e905-180">Och du finner att hello visuella objekt i webbläsarfönstret har startat rotera!</span><span class="sxs-lookup"><span data-stu-id="4e905-180">And you should find that hello visual objects in your browser window have started rotating!</span></span>

<span data-ttu-id="4e905-181">Du kan uppgradera från version 2 tooversion 3 eller från version 2 tooversion 1 som en övning.</span><span class="sxs-lookup"><span data-stu-id="4e905-181">You can try upgrading from version 2 tooversion 3, or from version 2 tooversion 1 as an exercise.</span></span> <span data-ttu-id="4e905-182">Flytta från version 2 tooversion 1 anses också vara en uppgradering.</span><span class="sxs-lookup"><span data-stu-id="4e905-182">Moving from version 2 tooversion 1 is also considered an upgrade.</span></span> <span data-ttu-id="4e905-183">Spela upp med tidsgränser och hälsotillstånd principer toomake själv bekant med dem.</span><span class="sxs-lookup"><span data-stu-id="4e905-183">Play with time-outs and health policies toomake yourself familiar with them.</span></span> <span data-ttu-id="4e905-184">När du distribuerar tooan Azure klustret hello parametrar måste toobe angetts på rätt sätt.</span><span class="sxs-lookup"><span data-stu-id="4e905-184">When you are deploying tooan Azure cluster, hello parameters need toobe set appropriately.</span></span> <span data-ttu-id="4e905-185">Det är bra tooset hello timeout hänsyn.</span><span class="sxs-lookup"><span data-stu-id="4e905-185">It is good tooset hello time-outs conservatively.</span></span>

## <a name="next-steps"></a><span data-ttu-id="4e905-186">Nästa steg</span><span class="sxs-lookup"><span data-stu-id="4e905-186">Next steps</span></span>
<span data-ttu-id="4e905-187">[Uppgradera ditt program med Visual Studio](service-fabric-application-upgrade-tutorial.md) vägleder dig genom en uppgradering av programmet med hjälp av Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="4e905-187">[Upgrading your application using Visual Studio](service-fabric-application-upgrade-tutorial.md) walks you through an application upgrade using Visual Studio.</span></span>

<span data-ttu-id="4e905-188">Styra hur programmet ska uppgraderas med hjälp av [Uppgraderingsparametrar](service-fabric-application-upgrade-parameters.md).</span><span class="sxs-lookup"><span data-stu-id="4e905-188">Control how your application upgrades by using [upgrade parameters](service-fabric-application-upgrade-parameters.md).</span></span>

<span data-ttu-id="4e905-189">Gör din programuppgraderingar kompatibla genom att lära dig hur toouse [dataserialisering](service-fabric-application-upgrade-data-serialization.md).</span><span class="sxs-lookup"><span data-stu-id="4e905-189">Make your application upgrades compatible by learning how toouse [data serialization](service-fabric-application-upgrade-data-serialization.md).</span></span>

<span data-ttu-id="4e905-190">Lär dig hur toouse avancerade funktioner när du uppgraderar ditt program genom att referera för[avancerade alternativ](service-fabric-application-upgrade-advanced.md).</span><span class="sxs-lookup"><span data-stu-id="4e905-190">Learn how toouse advanced functionality while upgrading your application by referring too[Advanced topics](service-fabric-application-upgrade-advanced.md).</span></span>

<span data-ttu-id="4e905-191">Lösa vanliga problem i programuppgraderingar genom att referera toohello stegen i [felsökning programuppgraderingar](service-fabric-application-upgrade-troubleshooting.md).</span><span class="sxs-lookup"><span data-stu-id="4e905-191">Fix common problems in application upgrades by referring toohello steps in [Troubleshooting application upgrades](service-fabric-application-upgrade-troubleshooting.md).</span></span>


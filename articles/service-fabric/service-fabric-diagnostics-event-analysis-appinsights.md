---
title: "aaaAzure Service Fabric-Händelseanalys med Application Insights | Microsoft Docs"
description: "Läs mer om visualisera och analysera händelser med hjälp av Application Insights för övervakning och diagnostik av Azure Service Fabric-kluster."
services: service-fabric
documentationcenter: .net
author: dkkapur
manager: timlt
editor: 
ms.assetid: 
ms.service: service-fabric
ms.devlang: dotnet
ms.topic: article
ms.tgt_pltfrm: NA
ms.workload: NA
ms.date: 05/26/2017
ms.author: dekapur
ms.openlocfilehash: 59bb5a409f2951e5b2034049e782dd0da67f933c
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: sv-SE
ms.lasthandoff: 10/06/2017
---
# <a name="event-analysis-and-visualization-with-application-insights"></a><span data-ttu-id="7f8d2-103">Händelseanalys och visualisering med Application Insights</span><span class="sxs-lookup"><span data-stu-id="7f8d2-103">Event analysis and visualization with Application Insights</span></span>

<span data-ttu-id="7f8d2-104">Azure Application Insights är en utökningsbar plattform för övervakning av program och diagnostik.</span><span class="sxs-lookup"><span data-stu-id="7f8d2-104">Azure Application Insights is an extensible platform for application monitoring and diagnostics.</span></span> <span data-ttu-id="7f8d2-105">Den innehåller en kraftfull analytics och fråga efter verktyget, anpassningsbar instrumentpanel och visualiseringar och ytterligare alternativ, inklusive automatiserade aviseringar.</span><span class="sxs-lookup"><span data-stu-id="7f8d2-105">It includes a powerful analytics and querying tool, customizable dashboard and visualizations, and further options including automated alerting.</span></span> <span data-ttu-id="7f8d2-106">Det är hello bör plattform för övervakning och diagnostik för Service Fabric-program och tjänster.</span><span class="sxs-lookup"><span data-stu-id="7f8d2-106">It is hello recommended platform for monitoring and diagnostics for Service Fabric applications and services.</span></span>

## <a name="setting-up-application-insights"></a><span data-ttu-id="7f8d2-107">Konfigurera Application Insights</span><span class="sxs-lookup"><span data-stu-id="7f8d2-107">Setting up Application Insights</span></span>

### <a name="creating-an-ai-resource"></a><span data-ttu-id="7f8d2-108">Skapa en AI-resurs</span><span class="sxs-lookup"><span data-stu-id="7f8d2-108">Creating an AI Resource</span></span>

<span data-ttu-id="7f8d2-109">toocreate en AI resurs, head över toohello Azure Marketplace och Sök efter ”Application Insights”.</span><span class="sxs-lookup"><span data-stu-id="7f8d2-109">toocreate an AI resource, head over toohello Azure Marketplace, and search for "Application Insights".</span></span> <span data-ttu-id="7f8d2-110">Det ska visas som första hello-lösning (det är under kategori ”webb + mobil”).</span><span class="sxs-lookup"><span data-stu-id="7f8d2-110">It should show up as hello first solution (it is under category "Web + Mobile").</span></span> <span data-ttu-id="7f8d2-111">Klicka på **skapa** när du tittar på hello rätt resurs (bekräfta att din sökväg matchar hello bilden nedan).</span><span class="sxs-lookup"><span data-stu-id="7f8d2-111">Click **Create** when you are looking at hello right resource (confirm that your path matches hello image below).</span></span>

![Ny Application Insights-resurs](media/service-fabric-diagnostics-event-analysis-appinsights/create-new-ai-resource.png)

<span data-ttu-id="7f8d2-113">Du behöver toofill ut information tooprovision hello resurser på rätt sätt.</span><span class="sxs-lookup"><span data-stu-id="7f8d2-113">You will need toofill out some information tooprovision hello resource correctly.</span></span> <span data-ttu-id="7f8d2-114">I hello *programtyp* fält används ”ASP.NET-webbprogram” om du kommer att använda någon av Service Fabric programmeringsmodeller eller publicera ett .NET-program toohello kluster.</span><span class="sxs-lookup"><span data-stu-id="7f8d2-114">In hello *Application Type* field, use "ASP.NET web application" if you will be using any of Service Fabric's programming models or publishing a .NET application toohello cluster.</span></span> <span data-ttu-id="7f8d2-115">Använd ”Allmänt” om du ska distribuera gäst körbara filer och behållare.</span><span class="sxs-lookup"><span data-stu-id="7f8d2-115">Use "General" if you will be deploying guest executables and containers.</span></span> <span data-ttu-id="7f8d2-116">I allmänhet standard toousing ”ASP.NET-webbprogram” tookeep alternativen öppna hello framtida.</span><span class="sxs-lookup"><span data-stu-id="7f8d2-116">In general, default toousing "ASP.NET web application" tookeep your options open in hello future.</span></span> <span data-ttu-id="7f8d2-117">hello heter in tooyour inställningar och både hello resursgruppen och prenumeration är kan ändras efter distributionen av hello resurs.</span><span class="sxs-lookup"><span data-stu-id="7f8d2-117">hello name is up tooyour preference, and both hello resource group and subscription are changeable post-deployment of hello resource.</span></span> <span data-ttu-id="7f8d2-118">Vi rekommenderar att AI-resurs i hello samma resursgrupp som klustret.</span><span class="sxs-lookup"><span data-stu-id="7f8d2-118">We recommend that your AI resource is in hello same resource group as your cluster.</span></span> <span data-ttu-id="7f8d2-119">Om du behöver mer information, se [skapa Application Insights-resurs](../application-insights/app-insights-create-new-resource.md)</span><span class="sxs-lookup"><span data-stu-id="7f8d2-119">If you need more information, please see [Create an Application Insights resource](../application-insights/app-insights-create-new-resource.md)</span></span>

<span data-ttu-id="7f8d2-120">Du behöver hello AI Instrumentation nyckeln tooconfigure AI med verktyget du händelsen aggregering.</span><span class="sxs-lookup"><span data-stu-id="7f8d2-120">You need hello AI Instrumentation Key tooconfigure AI with your event aggregation tool.</span></span> <span data-ttu-id="7f8d2-121">När AI-resursen har konfigurerats (tar några minuter efter hello distribution verifieras), navigera tooit och hitta hello **egenskaper** avsnittet hello vänstra navigeringsfältet.</span><span class="sxs-lookup"><span data-stu-id="7f8d2-121">Once your AI resource is set up (takes a few minutes after hello deployment is validated), navigate tooit and find hello **Properties** section on hello left navigation bar.</span></span> <span data-ttu-id="7f8d2-122">Ett nytt blad öppnas som visar ett *INSTRUMENTATION NYCKELN*.</span><span class="sxs-lookup"><span data-stu-id="7f8d2-122">A new blade will open up that shows an *INSTRUMENTATION KEY*.</span></span> <span data-ttu-id="7f8d2-123">Om du behöver toochange hello prenumeration eller resursgrupp hello resurs, kan det göras här samt.</span><span class="sxs-lookup"><span data-stu-id="7f8d2-123">If you need toochange hello subscription or resource group of hello resource, it can be done here as well.</span></span>

### <a name="configuring-ai-with-wad"></a><span data-ttu-id="7f8d2-124">Konfigurera AI med BOMULLSTUSS</span><span class="sxs-lookup"><span data-stu-id="7f8d2-124">Configuring AI with WAD</span></span>

<span data-ttu-id="7f8d2-125">Det finns två sätt toosend data från BOMULLSTUSS tooAzure AI, som uppnås genom att lägga till en AI sink toohello BOMULLSTUSS konfiguration enligt anvisningarna i [i den här artikeln](../monitoring-and-diagnostics/azure-diagnostics-configure-application-insights.md).</span><span class="sxs-lookup"><span data-stu-id="7f8d2-125">There are two primary ways toosend data from WAD tooAzure AI, which is achieved by adding an AI sink toohello WAD configuration, as detailed in [this article](../monitoring-and-diagnostics/azure-diagnostics-configure-application-insights.md).</span></span>

#### <a name="add-an-ai-instrumentation-key-when-creating-a-cluster-in-azure-portal"></a><span data-ttu-id="7f8d2-126">Lägg till en AI Instrumentation nyckel när du skapar ett kluster i Azure-portalen</span><span class="sxs-lookup"><span data-stu-id="7f8d2-126">Add an AI Instrumentation Key when creating a cluster in Azure portal</span></span>

![Lägga till en AIKey](media/service-fabric-diagnostics-event-analysis-appinsights/azure-enable-diagnostics.png)

<span data-ttu-id="7f8d2-128">När du skapar ett kluster, om diagnostik är aktiverat ””, ett valfritt fält tooenter en insikter Programinstrumentering nyckel visas.</span><span class="sxs-lookup"><span data-stu-id="7f8d2-128">When creating a cluster, if Diagnostics is turned "On", an optional field tooenter an Application Insights Instrumentation key will show.</span></span> <span data-ttu-id="7f8d2-129">Om du klistrar in din AI IKey här hello AI sink blir automatiskt konfigurerade för dig i hello Resource Manager-mall som används toodeploy klustret.</span><span class="sxs-lookup"><span data-stu-id="7f8d2-129">If you paste your AI IKey here, hello AI sink will be automatically configured for you in hello Resource Manager template that is used toodeploy your cluster.</span></span>

#### <a name="add-hello-ai-sink-toohello-resource-manager-template"></a><span data-ttu-id="7f8d2-130">Lägg till hello AI Sink toohello Resource Manager-mall</span><span class="sxs-lookup"><span data-stu-id="7f8d2-130">Add hello AI Sink toohello Resource Manager template</span></span>

<span data-ttu-id="7f8d2-131">Lägg till en ”Sink” genom att inkludera hello följande två ändringar i hello ”WadCfg” av hello Resource Manager-mall:</span><span class="sxs-lookup"><span data-stu-id="7f8d2-131">In hello "WadCfg" of hello Resource Manager template, add a "Sink" by including hello following two changes:</span></span>

1. <span data-ttu-id="7f8d2-132">Lägg till hello sink konfiguration:</span><span class="sxs-lookup"><span data-stu-id="7f8d2-132">Add hello sink configuration:</span></span>

    ```json
    "SinksConfig": {
        "Sink": [
            {
                "name": "applicationInsights",
                "ApplicationInsights": "***ADD INSTRUMENTATION KEY HERE***"
            }
        ]
    }

    ```

2. <span data-ttu-id="7f8d2-133">Inkludera hello Sink i hello DiagnosticMonitorConfiguration genom att lägga till följande rad i ”DiagnosticMonitorConfiguration” hello av hello ”WadCfg”:</span><span class="sxs-lookup"><span data-stu-id="7f8d2-133">Include hello Sink in hello DiagnosticMonitorConfiguration by adding hello following line in "DiagnosticMonitorConfiguration" of hello "WadCfg":</span></span>

    ```json
    "sinks": "applicationInsights"
    ```

<span data-ttu-id="7f8d2-134">I båda hello kodstycken ovan hello var namnet ”applicationInsights” används toodescribe hello mottagare.</span><span class="sxs-lookup"><span data-stu-id="7f8d2-134">In both hello code snippets above, hello name "applicationInsights" was used toodescribe hello sink.</span></span> <span data-ttu-id="7f8d2-135">Detta är inte ett krav och så länge hello namnet på hello sink ingår i ”sänkor”, du kan ange hello tooany sträng.</span><span class="sxs-lookup"><span data-stu-id="7f8d2-135">This is not a requirement and as long as hello name of hello sink is included in "sinks", you can set hello name tooany string.</span></span>

<span data-ttu-id="7f8d2-136">För närvarande visas loggar från hello kluster som spåren i AIS Loggvisaren.</span><span class="sxs-lookup"><span data-stu-id="7f8d2-136">Currently, logs from hello cluster will show up as traces in AI's log viewer.</span></span> <span data-ttu-id="7f8d2-137">Eftersom de flesta av hello spår som kommer från hello plattform för nivå ”information” bör överväga du att ändra hello sink configuration tooonly skicka loggar av typen ”kritiska” eller ”Error”.</span><span class="sxs-lookup"><span data-stu-id="7f8d2-137">Since most of hello traces coming from hello platform are of level "Informational", you can also consider changing hello sink configuration tooonly send logs of type "Critical" or "Error".</span></span> <span data-ttu-id="7f8d2-138">Detta kan göras genom att lägga till ”kanaler” tooyour mottagare som visas i [i den här artikeln](../monitoring-and-diagnostics/azure-diagnostics-configure-application-insights.md).</span><span class="sxs-lookup"><span data-stu-id="7f8d2-138">This can be done by adding "Channels" tooyour sink, as demonstrated in [this article](../monitoring-and-diagnostics/azure-diagnostics-configure-application-insights.md).</span></span>

>[!NOTE]
><span data-ttu-id="7f8d2-139">Om du använder en felaktig AI IKey i portalen eller i mallen för hanteraren för filserverresurser, har du toomanually ändra hello nyckel och uppdatera klustret hello / distribuera den.</span><span class="sxs-lookup"><span data-stu-id="7f8d2-139">If you use an incorrect AI IKey either in portal or in your Resource Manager template, you will have toomanually change hello key and update hello cluster / redeploy it.</span></span> 

### <a name="configuring-ai-with-eventflow"></a><span data-ttu-id="7f8d2-140">Konfigurera AI med EventFlow</span><span class="sxs-lookup"><span data-stu-id="7f8d2-140">Configuring AI with EventFlow</span></span>

<span data-ttu-id="7f8d2-141">Om du använder EventFlow tooaggregate händelser, se till att tooimport hello `Microsoft.Diagnostics.EventFlow.Output.ApplicationInsights`NuGet-paketet.</span><span class="sxs-lookup"><span data-stu-id="7f8d2-141">If you are using EventFlow tooaggregate events, make sure tooimport hello `Microsoft.Diagnostics.EventFlow.Output.ApplicationInsights`NuGet package.</span></span> <span data-ttu-id="7f8d2-142">hello följande har toobe som ingår i hello *matar ut* avsnitt i hello *eventFlowConfig.json*:</span><span class="sxs-lookup"><span data-stu-id="7f8d2-142">hello following has toobe included in hello *outputs* section of hello *eventFlowConfig.json*:</span></span>

```json
"outputs": [
    {
        "type": "ApplicationInsights",
        // (replace hello following value with your AI resource's instrumentation key)
        "instrumentationKey": "00000000-0000-0000-0000-000000000000"
    }
]
```

<span data-ttu-id="7f8d2-143">Gör att toomake hello krävs ändringar i filter och även innehåller andra indata (tillsammans med deras respektive NuGet-paket).</span><span class="sxs-lookup"><span data-stu-id="7f8d2-143">Make sure toomake hello required changes in your filters, as well as include any other inputs (along with their respective NuGet packages).</span></span>

## <a name="aisdk"></a><span data-ttu-id="7f8d2-144">AI. SDK</span><span class="sxs-lookup"><span data-stu-id="7f8d2-144">AI.SDK</span></span>

<span data-ttu-id="7f8d2-145">Det rekommenderas vanligtvis toouse EventFlow och BOMULLSTUSS som aggregering lösningar, eftersom de tillåter för en mer modulära metoden toodiagnostics och övervakning, dvs. Om du vill toochange dina utdata från EventFlow, krävs ingen ändring tooyour faktiska Instrumentation bara en enkel ändring tooyour konfigurationsfil.</span><span class="sxs-lookup"><span data-stu-id="7f8d2-145">It is generally recommended toouse EventFlow and WAD as aggregation solutions, because they allow for a more modular approach toodiagnostics and monitoring, i.e. if you want toochange your outputs from EventFlow, it requires no change tooyour actual instrumentation, just a simple modification tooyour config file.</span></span> <span data-ttu-id="7f8d2-146">Om dock bestämma tooinvest i med hjälp av Application Insights och är inte troligt toochange tooa olika plattformar, bör du fundera på med AIS nya SDK för att skicka dem tooAI och samla händelser.</span><span class="sxs-lookup"><span data-stu-id="7f8d2-146">If, however, you decide tooinvest in using Application Insights and are not likely toochange tooa different platform, you should look into using AI's new SDK for aggregating events and sending them tooAI.</span></span> <span data-ttu-id="7f8d2-147">Det innebär att du inte längre har tooconfigure EventFlow toosend tooAI dina data, men i stället installeras hello ApplicationInsight Service Fabric-NuGet-paketet.</span><span class="sxs-lookup"><span data-stu-id="7f8d2-147">This means that you will no longer have tooconfigure EventFlow toosend your data tooAI, but instead will install hello ApplicationInsight's Service Fabric NuGet package.</span></span> <span data-ttu-id="7f8d2-148">Information om hello paketet finns [här](https://github.com/Microsoft/ApplicationInsights-ServiceFabric).</span><span class="sxs-lookup"><span data-stu-id="7f8d2-148">Details on hello package can be found [here](https://github.com/Microsoft/ApplicationInsights-ServiceFabric).</span></span>

<span data-ttu-id="7f8d2-149">[Application Insights-stöd för Mikrotjänster och behållare](https://azure.microsoft.com/app-insights-microservices/) visar några hello nya funktioner som arbete utförs i (för närvarande i beta), vilket gör att du toohave bättre out box övervakningsalternativ med AI.</span><span class="sxs-lookup"><span data-stu-id="7f8d2-149">[Application Insights support for Microservices and Containers](https://azure.microsoft.com/app-insights-microservices/) shows you some of hello new features that are being worked on (currently still in beta), which allow you toohave richer out-of-the-box monitoring options with AI.</span></span> <span data-ttu-id="7f8d2-150">Dessa omfattar beroende spårning (används för att bygga en AppMap av alla tjänster och program i ett kluster och hello kommunikation mellan dem) och bättre korrelation av spår som kommer från dina tjänster (hjälper i bättre lokalisera ett problem i hello arbetsflöde för en app eller tjänst).</span><span class="sxs-lookup"><span data-stu-id="7f8d2-150">These include dependency tracking (used in building an AppMap of all your services and applications in a cluster and hello communication between them), and better correlation of traces coming from your services (helps in better pinpointing an issue in hello workflow of an app or service).</span></span>

<span data-ttu-id="7f8d2-151">Om du utvecklar i .NET och kommer troligen att använder vissa av Service Fabric programmeringsmodeller och är villigt toouse AI som din plattform för att visualisera och analysera händelse och loggar data rekommenderar vi att du går via hello AI SDK väg som övervakningen och diagnostik för arbetsflödet.</span><span class="sxs-lookup"><span data-stu-id="7f8d2-151">If you are developing in .NET and will likely be using some of Service Fabric's programming models, and are willing toouse AI as your platform for visualizing and analyzing event and log data, then we recommend that you go via hello AI SDK route as your monitoring and diagnostics workflow.</span></span> <span data-ttu-id="7f8d2-152">Läs [detta](../application-insights/app-insights-asp-net-more.md) och [detta](../application-insights/app-insights-asp-net-trace-logs.md) tooget igång med att använda AI toocollect och visa loggar.</span><span class="sxs-lookup"><span data-stu-id="7f8d2-152">Read [this](../application-insights/app-insights-asp-net-more.md) and [this](../application-insights/app-insights-asp-net-trace-logs.md) tooget started with using AI toocollect and display your logs.</span></span>

## <a name="navigating-hello-ai-resource-in-azure-portal"></a><span data-ttu-id="7f8d2-153">Navigera hello AI-resurs i Azure-portalen</span><span class="sxs-lookup"><span data-stu-id="7f8d2-153">Navigating hello AI resource in Azure portal</span></span>

<span data-ttu-id="7f8d2-154">När du har konfigurerat AI som utdata för händelser och loggar, ska information starta tooshow i AI-resursen på några minuter.</span><span class="sxs-lookup"><span data-stu-id="7f8d2-154">Once you have configured AI as an output for your events and logs, information should start tooshow up in your AI resource in a few minutes.</span></span> <span data-ttu-id="7f8d2-155">Navigera toohello AI-resurs som tar du toohello AI resurs instrumentpanelen.</span><span class="sxs-lookup"><span data-stu-id="7f8d2-155">Navigate toohello AI resource, which will take you toohello AI resource dashboard.</span></span> <span data-ttu-id="7f8d2-156">Klicka på **Sök** i hello AI Aktivitetsfältet toosee hello senaste spårningar som har tagit emot och toobe kan toofilter igenom dem.</span><span class="sxs-lookup"><span data-stu-id="7f8d2-156">Click **Search** in hello AI taskbar toosee hello latest traces that it has received, and toobe able toofilter through them.</span></span>

<span data-ttu-id="7f8d2-157">*Metrics Explorer* är användbart för att skapa anpassade instrumentpaneler baserat på mått som ditt program, tjänster och klustret kan reporting.</span><span class="sxs-lookup"><span data-stu-id="7f8d2-157">*Metrics Explorer* is a useful tool for creating custom dashboards based on metrics that your applications, services, and cluster may be reporting.</span></span> <span data-ttu-id="7f8d2-158">Se [utforska mått i Application Insights](../application-insights/app-insights-metrics-explorer.md) tooset in några diagram själv baserat på hello data du samlar in.</span><span class="sxs-lookup"><span data-stu-id="7f8d2-158">See [Exploring Metrics in Application Insights](../application-insights/app-insights-metrics-explorer.md) tooset up a few charts for yourself based on hello data you are collecting.</span></span>

<span data-ttu-id="7f8d2-159">Klicka på **Analytics** tar dig toohello Application Insights Analytics-portalen där du kan fråga efter händelser och spårningar med större scope och -alternativ.</span><span class="sxs-lookup"><span data-stu-id="7f8d2-159">Clicking **Analytics** will take you toohello Application Insights Analytics portal, where you can query events and traces with greater scope and optionality.</span></span> <span data-ttu-id="7f8d2-160">Läs mer om detta i [analyser i Application Insights](../application-insights/app-insights-analytics.md).</span><span class="sxs-lookup"><span data-stu-id="7f8d2-160">Read more about this at [Analytics in Application Insights](../application-insights/app-insights-analytics.md).</span></span>

## <a name="next-steps"></a><span data-ttu-id="7f8d2-161">Nästa steg</span><span class="sxs-lookup"><span data-stu-id="7f8d2-161">Next steps</span></span>

* <span data-ttu-id="7f8d2-162">[Konfigurera aviseringar i AI](../application-insights/app-insights-alerts.md) toobe meddelas om ändringar i prestanda eller användning</span><span class="sxs-lookup"><span data-stu-id="7f8d2-162">[Set up Alerts in AI](../application-insights/app-insights-alerts.md) toobe notified about changes in performance or usage</span></span>
* <span data-ttu-id="7f8d2-163">[Identifiering i Application Insights för smartkort](../application-insights/app-insights-proactive-diagnostics.md) utför en proaktiv analys av hello telemetri skickas tooAI toowarn dig om potentiella problem med prestanda</span><span class="sxs-lookup"><span data-stu-id="7f8d2-163">[Smart Detection in Application Insights](../application-insights/app-insights-proactive-diagnostics.md) performs a proactive analysis of hello telemetry being sent tooAI toowarn you of potential performance problems</span></span>

---
title: "Förberedelse av Azure Service Fabric fristående klustret distribution | Microsoft Docs"
description: "Dokumentation som rör förbereda miljön och skapa klusterkonfigurationen beaktas innan du distribuerar ett kluster som är avsedda för hantering av en produktions-arbetsbelastning."
services: service-fabric
documentationcenter: .net
author: maburlik
manager: timlt
editor: 
ms.service: service-fabric
ms.devlang: dotnet
ms.topic: article
ms.tgt_pltfrm: NA
ms.workload: NA
ms.date: 1/17/2017
ms.author: maburlik;chackdan
ms.openlocfilehash: f332193f9a53260173a1010b8bf9f08726bea427
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: sv-SE
ms.lasthandoff: 07/11/2017
---
<a id="preparemachines"></a>

## <a name="plan-and-prepare-your-service-fabric-standalone-cluster-deployment"></a><span data-ttu-id="05df6-103">Planera och förbereda distributionen av Service Fabric fristående kluster</span><span class="sxs-lookup"><span data-stu-id="05df6-103">Plan and prepare your Service Fabric standalone cluster deployment</span></span>
<span data-ttu-id="05df6-104">Utför följande steg innan du skapar klustret.</span><span class="sxs-lookup"><span data-stu-id="05df6-104">Perform the following steps before you create your cluster.</span></span>

### <a name="step-1-plan-your-cluster-infrastructure"></a><span data-ttu-id="05df6-105">Steg 1: Planera infrastrukturen för kluster</span><span class="sxs-lookup"><span data-stu-id="05df6-105">Step 1: Plan your cluster infrastructure</span></span>
<span data-ttu-id="05df6-106">Du håller på att skapa ett Service Fabric-kluster på datorer som du äger, så kan du bestämma vilka typer av fel som du vill att klustret att överleva.</span><span class="sxs-lookup"><span data-stu-id="05df6-106">You are about to create a Service Fabric cluster on machines you own, so you can decide what kinds of failures you want the cluster to survive.</span></span> <span data-ttu-id="05df6-107">Till exempel du behöver separata power linjer eller Internet-anslutningar till dessa datorer?</span><span class="sxs-lookup"><span data-stu-id="05df6-107">For example, do you need separate power lines or Internet connections supplied to these machines?</span></span> <span data-ttu-id="05df6-108">Dessutom kan du överväga att den fysiska säkerheten för dessa datorer.</span><span class="sxs-lookup"><span data-stu-id="05df6-108">In addition, consider the physical security of these machines.</span></span> <span data-ttu-id="05df6-109">Var finns datorerna och som behöver åtkomst till dem?</span><span class="sxs-lookup"><span data-stu-id="05df6-109">Where are the machines located and who needs access to them?</span></span> <span data-ttu-id="05df6-110">När du har gjort dessa beslut mappa du logiskt datorerna till de olika feldomäner (se steg 4).</span><span class="sxs-lookup"><span data-stu-id="05df6-110">After you make these decisions, you can logically map the machines to the various fault domains (see Step 4).</span></span> <span data-ttu-id="05df6-111">Planera för driftskluster infrastrukturen är mer komplicerat än för testkluster.</span><span class="sxs-lookup"><span data-stu-id="05df6-111">The infrastructure planning for production clusters is more involved than for test clusters.</span></span>

### <a name="step-2-prepare-the-machines-to-meet-the-prerequisites"></a><span data-ttu-id="05df6-112">Steg 2: Förbered datorer för att uppfylla kraven</span><span class="sxs-lookup"><span data-stu-id="05df6-112">Step 2: Prepare the machines to meet the prerequisites</span></span>
<span data-ttu-id="05df6-113">Krav för varje dator som du vill lägga till i klustret:</span><span class="sxs-lookup"><span data-stu-id="05df6-113">Prerequisites for each machine that you want to add to the cluster:</span></span>

* <span data-ttu-id="05df6-114">Minst 16 GB RAM rekommenderas.</span><span class="sxs-lookup"><span data-stu-id="05df6-114">A minimum of 16 GB of RAM is recommended.</span></span>
* <span data-ttu-id="05df6-115">Minst 40 GB ledigt diskutrymme rekommenderas.</span><span class="sxs-lookup"><span data-stu-id="05df6-115">A minimum of 40 of GB available disk space is recommended.</span></span>
* <span data-ttu-id="05df6-116">En 4 kärnor eller större processor rekommenderas.</span><span class="sxs-lookup"><span data-stu-id="05df6-116">A 4 core or greater CPU is recommended.</span></span>
* <span data-ttu-id="05df6-117">Anslutning till ett säkert nätverk eller nätverk för alla datorer.</span><span class="sxs-lookup"><span data-stu-id="05df6-117">Connectivity to a secure network or networks for all machines.</span></span>
* <span data-ttu-id="05df6-118">Windows Server 2012 R2 eller Windows Server 2016.</span><span class="sxs-lookup"><span data-stu-id="05df6-118">Windows Server 2012 R2 or Windows Server 2016.</span></span> 
* <span data-ttu-id="05df6-119">[.NET framework 4.5.1 eller senare](https://www.microsoft.com/download/details.aspx?id=40773), fullständig installation.</span><span class="sxs-lookup"><span data-stu-id="05df6-119">[.NET Framework 4.5.1 or higher](https://www.microsoft.com/download/details.aspx?id=40773), full install.</span></span>
* <span data-ttu-id="05df6-120">[Windows PowerShell 3.0](https://msdn.microsoft.com/powershell/scripting/setup/installing-windows-powershell).</span><span class="sxs-lookup"><span data-stu-id="05df6-120">[Windows PowerShell 3.0](https://msdn.microsoft.com/powershell/scripting/setup/installing-windows-powershell).</span></span>
* <span data-ttu-id="05df6-121">Den [RemoteRegistry tjänsten](https://technet.microsoft.com/library/cc754820) måste köras på alla datorer.</span><span class="sxs-lookup"><span data-stu-id="05df6-121">The [RemoteRegistry service](https://technet.microsoft.com/library/cc754820) should be running on all the machines.</span></span>

<span data-ttu-id="05df6-122">Klusteradministratören distribuera och konfigurera klustret måste ha [administratörsbehörighet](https://social.technet.microsoft.com/wiki/contents/articles/13436.windows-server-2012-how-to-add-an-account-to-a-local-administrator-group.aspx) på varje dator.</span><span class="sxs-lookup"><span data-stu-id="05df6-122">The cluster administrator deploying and configuring the cluster must have [administrator privileges](https://social.technet.microsoft.com/wiki/contents/articles/13436.windows-server-2012-how-to-add-an-account-to-a-local-administrator-group.aspx) on each of the machines.</span></span> <span data-ttu-id="05df6-123">Du kan inte installera Service Fabric på en domänkontrollant.</span><span class="sxs-lookup"><span data-stu-id="05df6-123">You cannot install Service Fabric on a domain controller.</span></span>

### <a name="step-3-determine-the-initial-cluster-size"></a><span data-ttu-id="05df6-124">Steg 3: Bestäm inledande klusterstorleken</span><span class="sxs-lookup"><span data-stu-id="05df6-124">Step 3: Determine the initial cluster size</span></span>
<span data-ttu-id="05df6-125">Varje nod i ett fristående Service Fabric-kluster har Service Fabric runtime distribueras och är medlem i klustret.</span><span class="sxs-lookup"><span data-stu-id="05df6-125">Each node in a standalone Service Fabric cluster has the Service Fabric runtime deployed and is a member of the cluster.</span></span> <span data-ttu-id="05df6-126">I en typisk Produktionsdistribution finns en nod per operativsysteminstans (fysisk eller virtuell).</span><span class="sxs-lookup"><span data-stu-id="05df6-126">In a typical production deployment, there is one node per OS instance (physical or virtual).</span></span> <span data-ttu-id="05df6-127">Klusterstorleken bestäms av dina affärsbehov.</span><span class="sxs-lookup"><span data-stu-id="05df6-127">The cluster size is determined by your business needs.</span></span> <span data-ttu-id="05df6-128">Du måste dock ha en klustrets minsta storlek på tre noder (datorer eller virtuella datorer).</span><span class="sxs-lookup"><span data-stu-id="05df6-128">However, you must have a minimum cluster size of three nodes (machines or virtual machines).</span></span>
<span data-ttu-id="05df6-129">Du kan ha fler än en nod för utveckling, på en viss dator.</span><span class="sxs-lookup"><span data-stu-id="05df6-129">For development purposes, you can have more than one node on a given machine.</span></span> <span data-ttu-id="05df6-130">Service Fabric stöder bara en nod per fysisk eller virtuell dator i en produktionsmiljö.</span><span class="sxs-lookup"><span data-stu-id="05df6-130">In a production environment, Service Fabric supports only one node per physical or virtual machine.</span></span>

### <a name="step-4-determine-the-number-of-fault-domains-and-upgrade-domains"></a><span data-ttu-id="05df6-131">Steg 4: Ta reda på antalet feldomäner och uppgradera domäner</span><span class="sxs-lookup"><span data-stu-id="05df6-131">Step 4: Determine the number of fault domains and upgrade domains</span></span>
<span data-ttu-id="05df6-132">En *feldomän* (FD) är en fysisk enhet till felet och är direkt relaterat till den fysiska infrastrukturen i datacenter.</span><span class="sxs-lookup"><span data-stu-id="05df6-132">A *fault domain* (FD) is a physical unit of failure and is directly related to the physical infrastructure in the data centers.</span></span> <span data-ttu-id="05df6-133">En feldomän består av maskinvarukomponenter (datorer, växlar, nätverk och mer) som delar en enskild felpunkt.</span><span class="sxs-lookup"><span data-stu-id="05df6-133">A fault domain consists of hardware components (computers, switches, networks, and more) that share a single point of failure.</span></span> <span data-ttu-id="05df6-134">Även om det finns ingen 1:1-mappning mellan feldomäner och rack, kan löst tala varje rack betraktas som en feldomän.</span><span class="sxs-lookup"><span data-stu-id="05df6-134">Although there is no 1:1 mapping between fault domains and racks, loosely speaking, each rack can be considered a fault domain.</span></span> <span data-ttu-id="05df6-135">När du överväger noderna i klustret, rekommenderar vi starkt att noderna fördelas mellan minst tre feldomäner.</span><span class="sxs-lookup"><span data-stu-id="05df6-135">When considering the nodes in your cluster, we strongly recommend that the nodes be distributed among at least three fault domains.</span></span>

<span data-ttu-id="05df6-136">Du kan välja namn för varje FD när du anger FDs i ClusterConfig.json.</span><span class="sxs-lookup"><span data-stu-id="05df6-136">When you specify FDs in ClusterConfig.json, you can choose the name for each FD.</span></span> <span data-ttu-id="05df6-137">Service Fabric stöder hierarkiska FDs, så du kan din infrastruktur-topologi i dem.</span><span class="sxs-lookup"><span data-stu-id="05df6-137">Service Fabric supports hierarchical FDs, so you can reflect your infrastructure topology in them.</span></span>  <span data-ttu-id="05df6-138">Till exempel är följande FDs giltiga:</span><span class="sxs-lookup"><span data-stu-id="05df6-138">For example, the following FDs are valid:</span></span>

* <span data-ttu-id="05df6-139">”faultDomain” ”: fd: / Dator1-Room1/Rack1”</span><span class="sxs-lookup"><span data-stu-id="05df6-139">"faultDomain": "fd:/Room1/Rack1/Machine1"</span></span>
* <span data-ttu-id="05df6-140">”faultDomain” ”: fd: / FD1”</span><span class="sxs-lookup"><span data-stu-id="05df6-140">"faultDomain": "fd:/FD1"</span></span>
* <span data-ttu-id="05df6-141">”faultDomain” ”: fd: / Room1/Rack1/PDU1/M1”</span><span class="sxs-lookup"><span data-stu-id="05df6-141">"faultDomain": "fd:/Room1/Rack1/PDU1/M1"</span></span>

<span data-ttu-id="05df6-142">En *uppgraderingsdomänen* (UD) är en logisk enhet för noder.</span><span class="sxs-lookup"><span data-stu-id="05df6-142">An *upgrade domain* (UD) is a logical unit of nodes.</span></span> <span data-ttu-id="05df6-143">Under Service Fabric styrd uppgraderingar (en uppgradering av programmet eller en uppgradering av klustret) tas alla noder i ett UD uppgradering medan noder i andra UDs ska vara tillgängliga för att uppfylla begäranden.</span><span class="sxs-lookup"><span data-stu-id="05df6-143">During Service Fabric orchestrated upgrades (either an application upgrade or a cluster upgrade), all nodes in a UD are taken down to perform the upgrade while nodes in other UDs remain available to serve requests.</span></span> <span data-ttu-id="05df6-144">Firmware-uppgraderingar som du utför på dina datorer inte respektera UDs, så måste du göra dem något datorer samtidigt.</span><span class="sxs-lookup"><span data-stu-id="05df6-144">The firmware upgrades you perform on your machines do not honor UDs, so you must do them one machine at a time.</span></span>

<span data-ttu-id="05df6-145">Det enklaste sättet att tänka på de här koncepten är att tänka på FDs som oplanerade fel och UDs som planerat underhåll.</span><span class="sxs-lookup"><span data-stu-id="05df6-145">The simplest way to think about these concepts is to consider FDs as the unit of unplanned failure and UDs as the unit of planned maintenance.</span></span>

<span data-ttu-id="05df6-146">Du kan välja namn för varje UD när du anger UDs i ClusterConfig.json.</span><span class="sxs-lookup"><span data-stu-id="05df6-146">When you specify UDs in ClusterConfig.json, you can choose the name for each UD.</span></span> <span data-ttu-id="05df6-147">Till exempel är följande namn giltiga:</span><span class="sxs-lookup"><span data-stu-id="05df6-147">For example, the following names are valid:</span></span>

* <span data-ttu-id="05df6-148">”upgradeDomain”: ”UD0”</span><span class="sxs-lookup"><span data-stu-id="05df6-148">"upgradeDomain": "UD0"</span></span>
* <span data-ttu-id="05df6-149">”upgradeDomain”: ”UD1A”</span><span class="sxs-lookup"><span data-stu-id="05df6-149">"upgradeDomain": "UD1A"</span></span>
* <span data-ttu-id="05df6-150">”upgradeDomain”: ”DomainRed”</span><span class="sxs-lookup"><span data-stu-id="05df6-150">"upgradeDomain": "DomainRed"</span></span>
* <span data-ttu-id="05df6-151">”upgradeDomain”: ”Blue”</span><span class="sxs-lookup"><span data-stu-id="05df6-151">"upgradeDomain": "Blue"</span></span>

<span data-ttu-id="05df6-152">Mer detaljerad information om uppgraderingsdomäner och feldomäner finns [som beskriver ett Service Fabric-kluster](service-fabric-cluster-resource-manager-cluster-description.md).</span><span class="sxs-lookup"><span data-stu-id="05df6-152">For more detailed information on upgrade domains and fault domains, see [Describing a Service Fabric cluster](service-fabric-cluster-resource-manager-cluster-description.md).</span></span>

### <a name="step-5-download-the-service-fabric-standalone-package-for-windows-server"></a><span data-ttu-id="05df6-153">Steg 5: Hämta det fristående Service Fabric-paketet för Windows Server</span><span class="sxs-lookup"><span data-stu-id="05df6-153">Step 5: Download the Service Fabric standalone package for Windows Server</span></span>
<span data-ttu-id="05df6-154">[Hämta länk - Service Fabric fristående paket - Windows Server](http://go.microsoft.com/fwlink/?LinkId=730690) och packa upp paketet till en dator för distribution som inte ingår i klustret eller till en av de datorer som ska ingå i klustret.</span><span class="sxs-lookup"><span data-stu-id="05df6-154">[Download Link - Service Fabric Standalone Package - Windows Server](http://go.microsoft.com/fwlink/?LinkId=730690) and unzip the package, either to a deployment machine that is not part of the cluster, or to one of the machines that will be a part of your cluster.</span></span>

### <a name="step-6-modify-cluster-configuration"></a><span data-ttu-id="05df6-155">Steg 6: Ändra klusterkonfigurationen</span><span class="sxs-lookup"><span data-stu-id="05df6-155">Step 6: Modify cluster configuration</span></span>
<span data-ttu-id="05df6-156">Du måste skapa en fristående klustret ClusterConfig.json konfigurationsfil, som beskriver specificering av klustret för att skapa en fristående kluster.</span><span class="sxs-lookup"><span data-stu-id="05df6-156">To create a standalone cluster you have to create a standalone cluster configuration ClusterConfig.json file, which describes the specification of the cluster.</span></span> <span data-ttu-id="05df6-157">Du kan basera konfigurationsfilen på mallarna på på länken nedan.</span><span class="sxs-lookup"><span data-stu-id="05df6-157">You can base the configuration file on the templates found at the below link.</span></span> <br><span data-ttu-id="05df6-158">
[Fristående klusterkonfigurationer](https://github.com/Azure-Samples/service-fabric-dotnet-standalone-cluster-configuration/tree/master/Samples)</span><span class="sxs-lookup"><span data-stu-id="05df6-158">
[Standalone Cluster Configurations](https://github.com/Azure-Samples/service-fabric-dotnet-standalone-cluster-configuration/tree/master/Samples)</span></span>

<span data-ttu-id="05df6-159">Mer information om avsnitten i den här filen finns [konfigurationsinställningar för Windows-kluster för fristående](service-fabric-cluster-manifest.md).</span><span class="sxs-lookup"><span data-stu-id="05df6-159">For details on the sections in this file, see [Configuration settings for standalone Windows cluster](service-fabric-cluster-manifest.md).</span></span>

<span data-ttu-id="05df6-160">Öppna en av filerna ClusterConfig.json från paketet som du hämtade och ändra följande inställningar:</span><span class="sxs-lookup"><span data-stu-id="05df6-160">Open one of the ClusterConfig.json files from the package you downloaded and modify the following settings:</span></span>
| <span data-ttu-id="05df6-161">**Konfigurationsinställningen**</span><span class="sxs-lookup"><span data-stu-id="05df6-161">**Configuration Setting**</span></span> | <span data-ttu-id="05df6-162">**Beskrivning**</span><span class="sxs-lookup"><span data-stu-id="05df6-162">**Description**</span></span> |
| --- | --- |
| <span data-ttu-id="05df6-163">**Nodetypes får**</span><span class="sxs-lookup"><span data-stu-id="05df6-163">**NodeTypes**</span></span> |<span data-ttu-id="05df6-164">Nodtyper kan du dela klusternoderna i olika grupper.</span><span class="sxs-lookup"><span data-stu-id="05df6-164">Node types allow you to separate your cluster nodes into various groups.</span></span> <span data-ttu-id="05df6-165">Ett kluster måste ha minst en NodeType.</span><span class="sxs-lookup"><span data-stu-id="05df6-165">A cluster must have at least one NodeType.</span></span> <span data-ttu-id="05df6-166">Alla noder i en grupp har följande gemensamma egenskaper:</span><span class="sxs-lookup"><span data-stu-id="05df6-166">All nodes in a group have the following common characteristics:</span></span> <br> <span data-ttu-id="05df6-167">**Namnet** -detta är namnet på nodtypen.</span><span class="sxs-lookup"><span data-stu-id="05df6-167">**Name** - This is the node type name.</span></span> <br><span data-ttu-id="05df6-168">**Slutpunktsportar** – dessa är olika namngivna slutpunkter (portar) som är associerade med den här nodtypen.</span><span class="sxs-lookup"><span data-stu-id="05df6-168">**Endpoint Ports** - These are various named end points (ports) that are associated with this node type.</span></span> <span data-ttu-id="05df6-169">Du kan använda alla portnummer som du vill, förutsatt att de inte står i konflikt med något annat i manifestet inte och redan används av andra program som körs på datorn och VM.</span><span class="sxs-lookup"><span data-stu-id="05df6-169">You can use any port number that you wish, as long as they do not conflict with anything else in this manifest and are not already in use by any other application running on the machine/VM.</span></span> <br> <span data-ttu-id="05df6-170">**Placeringsegenskaper** -dessa beskriver egenskaper för den här nodtypen som du använder som placeringen för systemtjänster eller dina tjänster.</span><span class="sxs-lookup"><span data-stu-id="05df6-170">**Placement Properties** - These describe properties for this node type that you use as placement constraints for the system services or your services.</span></span> <span data-ttu-id="05df6-171">Dessa egenskaper är användardefinierade nyckel/värde-par som ger extra metadata för en viss nod.</span><span class="sxs-lookup"><span data-stu-id="05df6-171">These properties are user-defined key/value pairs that provide extra meta data for a given node.</span></span> <span data-ttu-id="05df6-172">Exempel på nodegenskaper skulle vara om noden har en hårddisk eller grafikkort, antalet spindlar i dess hårddisk, kärnor och andra fysiska egenskaper.</span><span class="sxs-lookup"><span data-stu-id="05df6-172">Examples of node properties would be whether the node has a hard drive or graphics card, the number of spindles in its hard drive, cores, and other physical properties.</span></span> <br> <span data-ttu-id="05df6-173">**Kapaciteter** -nod kapaciteter definiera namn och en viss resurs mängden att en viss nod har tillgängliga för användning.</span><span class="sxs-lookup"><span data-stu-id="05df6-173">**Capacities** - Node capacities define the name and amount of a particular resource that a particular node has available for consumption.</span></span> <span data-ttu-id="05df6-174">En nod kan till exempel ange att den har kapacitet för ett mått som kallas ”MemoryInMb” och att den har 2 048 MB tillgängligt som standard.</span><span class="sxs-lookup"><span data-stu-id="05df6-174">For example, a node may define that it has capacity for a metric called “MemoryInMb” and that it has 2048 MB available by default.</span></span> <span data-ttu-id="05df6-175">Dessa kapacitet för att säkerställa att tjänster som kräver särskild mängder resurser placeras på noder som har resurser som är tillgängliga i belopp som krävs vid körning.</span><span class="sxs-lookup"><span data-stu-id="05df6-175">These capacities are used at runtime to ensure that services that require particular amounts of resources are placed on the nodes that have those resources available in the required amounts.</span></span><br><span data-ttu-id="05df6-176">**IsPrimary** - om du har mer än en NodeType definierats se till att endast en har angetts till primära med värdet *SANT*, vilket är där systemet services körs.</span><span class="sxs-lookup"><span data-stu-id="05df6-176">**IsPrimary** - If you have more than one NodeType defined ensure that only one is set to primary with the value *true*, which is where the system services run.</span></span> <span data-ttu-id="05df6-177">Alla andra nodtyper ska anges till värdet *FALSKT*</span><span class="sxs-lookup"><span data-stu-id="05df6-177">All other node types should be set to the value *false*</span></span> |
| <span data-ttu-id="05df6-178">**Noder**</span><span class="sxs-lookup"><span data-stu-id="05df6-178">**Nodes**</span></span> |<span data-ttu-id="05df6-179">Det här är information för varje nod som ingår i klustret (nodtypen nodnamnet, IP-adress, feldomän och uppgraderingsdomän för noden).</span><span class="sxs-lookup"><span data-stu-id="05df6-179">These are the details for each of the nodes that are part of the cluster (node type, node name, IP address, fault domain, and upgrade domain of the node).</span></span> <span data-ttu-id="05df6-180">Datorerna du vill att klustret ska skapas på måste anges här med sina IP-adresser.</span><span class="sxs-lookup"><span data-stu-id="05df6-180">The machines you want the cluster to be created on need to be listed here with their IP addresses.</span></span> <br> <span data-ttu-id="05df6-181">Om du använder samma IP-adress för alla noder, skapas ett kluster med en ruta, som du kan använda för testning.</span><span class="sxs-lookup"><span data-stu-id="05df6-181">If you use the same IP address for all the nodes, then a one-box cluster is created, which you can use for testing purposes.</span></span> <span data-ttu-id="05df6-182">Använd inte en ruta kluster för att distribuera produktionsarbetsbelastningar.</span><span class="sxs-lookup"><span data-stu-id="05df6-182">Do not use One-box clusters for deploying production workloads.</span></span> |

<span data-ttu-id="05df6-183">När klusterkonfigurationen har haft alla inställningar som konfigureras i miljön, kan den testas mot klustermiljön (steg 7).</span><span class="sxs-lookup"><span data-stu-id="05df6-183">After the cluster configuration has had all settings configured to the environment, it can be tested against the cluster environment (step 7).</span></span>

<a id="environmentsetup"></a>

### <a name="step-7-environment-setup"></a><span data-ttu-id="05df6-184">Steg 7.</span><span class="sxs-lookup"><span data-stu-id="05df6-184">Step 7.</span></span> <span data-ttu-id="05df6-185">Konfigurera miljön</span><span class="sxs-lookup"><span data-stu-id="05df6-185">Environment setup</span></span>

<span data-ttu-id="05df6-186">När en Klusteradministratör konfigurerar en fristående Service Fabric-klustret, är miljön måste konfigureras med följande kriterier:</span><span class="sxs-lookup"><span data-stu-id="05df6-186">When a cluster administrator configures a Service Fabric standalone cluster, the environment is needs to be set up with the following criteria:</span></span> <br>
1. <span data-ttu-id="05df6-187">Användaren som skapar klustret ska ha administratörsrättigheter säkerhetsrättigheter för att alla datorer som listas som noder i klustret konfigurationsfilen.</span><span class="sxs-lookup"><span data-stu-id="05df6-187">The user creating the cluster should have administrator-level security privileges to all machines that are listed as nodes in the cluster configuration file.</span></span>
2. <span data-ttu-id="05df6-188">Datorn där klustret har skapats, samt varje kluster nod dator måste du:</span><span class="sxs-lookup"><span data-stu-id="05df6-188">Machine from which the cluster is created, as well as each cluster node machine must:</span></span>
* <span data-ttu-id="05df6-189">Har avinstallerat Service Fabric SDK</span><span class="sxs-lookup"><span data-stu-id="05df6-189">Have Service Fabric SDK uninstalled</span></span>
* <span data-ttu-id="05df6-190">Ha Service Fabric runtime avinstalleras</span><span class="sxs-lookup"><span data-stu-id="05df6-190">Have Service Fabric runtime uninstalled</span></span> 
* <span data-ttu-id="05df6-191">Har aktiverat Windows-brandväggen (mpssvc)</span><span class="sxs-lookup"><span data-stu-id="05df6-191">Have the Windows Firewall service (mpssvc) enabled</span></span>
* <span data-ttu-id="05df6-192">Har aktiverat tjänsten Remote Registry (remoteregistry)</span><span class="sxs-lookup"><span data-stu-id="05df6-192">Have the Remote Registry Service (remoteregistry) enabled</span></span>
* <span data-ttu-id="05df6-193">Har aktiverat delning (SMB)-fil</span><span class="sxs-lookup"><span data-stu-id="05df6-193">Have file sharing (SMB) enabled</span></span>
* <span data-ttu-id="05df6-194">Har nödvändiga portarna som öppnas, baserat på klustret configuration portar</span><span class="sxs-lookup"><span data-stu-id="05df6-194">Have necessary ports opened, based on cluster configuration ports</span></span>
* <span data-ttu-id="05df6-195">Har nödvändiga portarna för Windows-SMB- och Remote Registry-tjänsten: 135, 137, 138, 139 och 445</span><span class="sxs-lookup"><span data-stu-id="05df6-195">Have necessary ports opened for Windows SMB and Remote Registry service: 135, 137, 138, 139, and 445</span></span>
* <span data-ttu-id="05df6-196">Ha en nätverksanslutning till varandra</span><span class="sxs-lookup"><span data-stu-id="05df6-196">Have network connectivity to one another</span></span>
3. <span data-ttu-id="05df6-197">Ingen av de kluster nod datorerna ska vara en domänkontrollant.</span><span class="sxs-lookup"><span data-stu-id="05df6-197">None of the cluster node machines should be a Domain Controller.</span></span>
4. <span data-ttu-id="05df6-198">Om klustret som ska distribueras är en säker kluster, validera den säkerhet som behövs krav är placera och är korrekt konfigurerade mot konfigurationen.</span><span class="sxs-lookup"><span data-stu-id="05df6-198">If the cluster to be deployed is a secure cluster, validate the necessary security prerequisites are in place, and are configured correctly against the configuration.</span></span>
5. <span data-ttu-id="05df6-199">Om klustret datorer inte komma åt internet, kan du ange följande i klusterkonfigurationen:</span><span class="sxs-lookup"><span data-stu-id="05df6-199">If the cluster machines are not internet-accessible, set the following in the cluster configuration:</span></span>
* <span data-ttu-id="05df6-200">Inaktivera telemetri: Under *egenskaper* ange *”enableTelemetry”: false*</span><span class="sxs-lookup"><span data-stu-id="05df6-200">Disable telemetry:   Under *properties* set   *"enableTelemetry": false*</span></span>
* <span data-ttu-id="05df6-201">Inaktivera automatisk hämtning av Fabric-version & meddelanden att den aktuella versionen av klustret närmar sig slutet av stödet: Under *egenskaper* ange *”fabricClusterAutoupgradeEnabled”: false*</span><span class="sxs-lookup"><span data-stu-id="05df6-201">Disable automatic Fabric version downloading & notifications that the current cluster version is nearing end of support:   Under *properties* set   *"fabricClusterAutoupgradeEnabled": false*</span></span>
* <span data-ttu-id="05df6-202">Du kan också om internet nätverksåtkomst är begränsat till vitt visas domäner, domäner nedan krävs för automatisk uppgradering: go.microsoft.com download.microsoft.com</span><span class="sxs-lookup"><span data-stu-id="05df6-202">Alternatively if network internet access is limited to white-listed domains, the domains below are required for automatic upgrade:   go.microsoft.com   download.microsoft.com</span></span>

6. <span data-ttu-id="05df6-203">Ange rätt Service Fabric antivirus undantag:</span><span class="sxs-lookup"><span data-stu-id="05df6-203">Set appropriate Service Fabric antivirus exclusions:</span></span>

| <span data-ttu-id="05df6-204">**Antivirusprogram exkluderade kataloger**</span><span class="sxs-lookup"><span data-stu-id="05df6-204">**Antivirus Excluded directories**</span></span> |
| --- |
| <span data-ttu-id="05df6-205">Program Files\Microsoft Service Fabric</span><span class="sxs-lookup"><span data-stu-id="05df6-205">Program Files\Microsoft Service Fabric</span></span> |
| <span data-ttu-id="05df6-206">FabricDataRoot (från klusterkonfigurationen)</span><span class="sxs-lookup"><span data-stu-id="05df6-206">FabricDataRoot (from cluster configuration)</span></span> |
| <span data-ttu-id="05df6-207">FabricLogRoot (från klusterkonfigurationen)</span><span class="sxs-lookup"><span data-stu-id="05df6-207">FabricLogRoot (from cluster configuration)</span></span> |

| <span data-ttu-id="05df6-208">**Antivirusprogram undantagna processer**</span><span class="sxs-lookup"><span data-stu-id="05df6-208">**Antivirus Excluded processes**</span></span> |
| --- |
| <span data-ttu-id="05df6-209">Fabric.exe</span><span class="sxs-lookup"><span data-stu-id="05df6-209">Fabric.exe</span></span> |
| <span data-ttu-id="05df6-210">FabricHost.exe</span><span class="sxs-lookup"><span data-stu-id="05df6-210">FabricHost.exe</span></span> |
| <span data-ttu-id="05df6-211">FabricInstallerService.exe</span><span class="sxs-lookup"><span data-stu-id="05df6-211">FabricInstallerService.exe</span></span> |
| <span data-ttu-id="05df6-212">FabricSetup.exe</span><span class="sxs-lookup"><span data-stu-id="05df6-212">FabricSetup.exe</span></span> |
| <span data-ttu-id="05df6-213">FabricDeployer.exe</span><span class="sxs-lookup"><span data-stu-id="05df6-213">FabricDeployer.exe</span></span> |
| <span data-ttu-id="05df6-214">ImageBuilder.exe</span><span class="sxs-lookup"><span data-stu-id="05df6-214">ImageBuilder.exe</span></span> |
| <span data-ttu-id="05df6-215">FabricGateway.exe</span><span class="sxs-lookup"><span data-stu-id="05df6-215">FabricGateway.exe</span></span> |
| <span data-ttu-id="05df6-216">FabricDCA.exe</span><span class="sxs-lookup"><span data-stu-id="05df6-216">FabricDCA.exe</span></span> |
| <span data-ttu-id="05df6-217">FabricFAS.exe</span><span class="sxs-lookup"><span data-stu-id="05df6-217">FabricFAS.exe</span></span> |
| <span data-ttu-id="05df6-218">FabricUOS.exe</span><span class="sxs-lookup"><span data-stu-id="05df6-218">FabricUOS.exe</span></span> |
| <span data-ttu-id="05df6-219">FabricRM.exe</span><span class="sxs-lookup"><span data-stu-id="05df6-219">FabricRM.exe</span></span> |
| <span data-ttu-id="05df6-220">FileStoreService.exe</span><span class="sxs-lookup"><span data-stu-id="05df6-220">FileStoreService.exe</span></span> |

### <a name="step-8-validate-environment-using-testconfiguration-script"></a><span data-ttu-id="05df6-221">Steg 8.</span><span class="sxs-lookup"><span data-stu-id="05df6-221">Step 8.</span></span> <span data-ttu-id="05df6-222">Validera miljö med hjälp av TestConfiguration skript</span><span class="sxs-lookup"><span data-stu-id="05df6-222">Validate environment using TestConfiguration script</span></span>
<span data-ttu-id="05df6-223">Skriptet TestConfiguration.ps1 kan hittas i fristående paketet.</span><span class="sxs-lookup"><span data-stu-id="05df6-223">The TestConfiguration.ps1 script can be found in the standalone package.</span></span> <span data-ttu-id="05df6-224">Den används som en Best Practices Analyzer för att verifiera några av villkoren ovan och ska användas som en förstånd-kontroll för att verifiera om ett kluster kan distribueras på en given miljö.</span><span class="sxs-lookup"><span data-stu-id="05df6-224">It is used as a Best Practices Analyzer to validate some of the criteria above and should be used as a sanity check to validate whether a cluster can be deployed on a given environment.</span></span> <span data-ttu-id="05df6-225">Om det inte finns några fel, finns i listan under [Miljökonfiguration](service-fabric-cluster-standalone-deployment-preparation.md) för felsökning.</span><span class="sxs-lookup"><span data-stu-id="05df6-225">If there is any failure, refer to the list under [Environment Setup](service-fabric-cluster-standalone-deployment-preparation.md) for troubleshooting.</span></span> 

<span data-ttu-id="05df6-226">Det här skriptet kan köras på en dator som har administratörsåtkomst till alla datorer som noder i klustret konfigurationsfilen.</span><span class="sxs-lookup"><span data-stu-id="05df6-226">This script can be run on any machine that has administrator access to all the machines that are listed as nodes in the cluster configuration file.</span></span> <span data-ttu-id="05df6-227">Den dator som det här skriptet körs på behöver inte vara en del av klustret.</span><span class="sxs-lookup"><span data-stu-id="05df6-227">The machine that this script is run on does not have to be part of the cluster.</span></span>

```powershell
PS C:\temp\Microsoft.Azure.ServiceFabric.WindowsServer> .\TestConfiguration.ps1 -ClusterConfigFilePath .\ClusterConfig.Unsecure.DevCluster.json
Trace folder already exists. Traces will be written to existing trace folder: C:\temp\Microsoft.Azure.ServiceFabric.WindowsServer\DeploymentTraces
Running Best Practices Analyzer...
Best Practices Analyzer completed successfully.


LocalAdminPrivilege        : True
IsJsonValid                : True
IsCabValid                 : True
RequiredPortsOpen          : True
RemoteRegistryAvailable    : True
FirewallAvailable          : True
RpcCheckPassed             : True
NoConflictingInstallations : True
FabricInstallable          : True
Passed                     : True
```

<span data-ttu-id="05df6-228">Den här konfigurationen tester modulen kan för närvarande inte valideras säkerhetskonfigurationen så detta måste göras oberoende av varandra.</span><span class="sxs-lookup"><span data-stu-id="05df6-228">Currently this configuration testing module does not validate the security configuration so this has to be done independently.</span></span>  

> [!NOTE]
> <span data-ttu-id="05df6-229">Kontinuerligt genomför vi förbättringar så att den här modulen stabilare, så om det finns en felaktig eller saknas fall som du tror inte för närvarande fångas av TestConfiguration, meddela oss via vårt [stöder kanaler](https://docs.microsoft.com/en-us/azure/service-fabric/service-fabric-support).</span><span class="sxs-lookup"><span data-stu-id="05df6-229">We are continually making improvements to make this module more robust, so if there is a faulty or missing case which you believe isn't currently caught by TestConfiguration, please let us know through our [support channels](https://docs.microsoft.com/en-us/azure/service-fabric/service-fabric-support).</span></span>   
> 
> 

## <a name="next-steps"></a><span data-ttu-id="05df6-230">Nästa steg</span><span class="sxs-lookup"><span data-stu-id="05df6-230">Next steps</span></span>
* [<span data-ttu-id="05df6-231">Skapa ett fristående kluster som körs på Windows Server</span><span class="sxs-lookup"><span data-stu-id="05df6-231">Create a standalone cluster running on Windows Server</span></span>](service-fabric-cluster-creation-for-windows-server.md)

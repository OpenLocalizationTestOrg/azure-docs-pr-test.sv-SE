---
title: "aaaAzure Service Fabric fristående kluster distribution förberedelse | Microsoft Docs"
description: "Dokumentationen relaterade toopreparing hello miljö och skapa hello klusterkonfigurationen toobe anses vara tidigare toodeploying ett kluster som är avsedda för att hantera en produktion arbetsbelastning."
services: service-fabric
documentationcenter: .net
author: maburlik
manager: timlt
editor: 
ms.service: service-fabric
ms.devlang: dotnet
ms.topic: article
ms.tgt_pltfrm: NA
ms.workload: NA
ms.date: 1/17/2017
ms.author: maburlik;chackdan
ms.openlocfilehash: e503c61a64b408af3f22bd75ab02f1c34ac9f380
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: sv-SE
ms.lasthandoff: 10/06/2017
---
<a id="preparemachines"></a>

## <a name="plan-and-prepare-your-service-fabric-standalone-cluster-deployment"></a><span data-ttu-id="c11de-103">Planera och förbereda distributionen av Service Fabric fristående kluster</span><span class="sxs-lookup"><span data-stu-id="c11de-103">Plan and prepare your Service Fabric standalone cluster deployment</span></span>
<span data-ttu-id="c11de-104">Utför följande steg innan du skapar klustret hello.</span><span class="sxs-lookup"><span data-stu-id="c11de-104">Perform hello following steps before you create your cluster.</span></span>

### <a name="step-1-plan-your-cluster-infrastructure"></a><span data-ttu-id="c11de-105">Steg 1: Planera infrastrukturen för kluster</span><span class="sxs-lookup"><span data-stu-id="c11de-105">Step 1: Plan your cluster infrastructure</span></span>
<span data-ttu-id="c11de-106">Du håller toocreate Service Fabric-kluster på datorer som du äger, så att du kan bestämma vilka typer av fel som du vill hello klustret toosurvive.</span><span class="sxs-lookup"><span data-stu-id="c11de-106">You are about toocreate a Service Fabric cluster on machines you own, so you can decide what kinds of failures you want hello cluster toosurvive.</span></span> <span data-ttu-id="c11de-107">Till exempel behöver du ha separata power rader eller Internetanslutningar angivna toothese datorer?</span><span class="sxs-lookup"><span data-stu-id="c11de-107">For example, do you need separate power lines or Internet connections supplied toothese machines?</span></span> <span data-ttu-id="c11de-108">Dessutom kan du överväga att hello fysisk säkerhet för dessa datorer.</span><span class="sxs-lookup"><span data-stu-id="c11de-108">In addition, consider hello physical security of these machines.</span></span> <span data-ttu-id="c11de-109">Var finns hello datorer och som behöver åtkomst toothem?</span><span class="sxs-lookup"><span data-stu-id="c11de-109">Where are hello machines located and who needs access toothem?</span></span> <span data-ttu-id="c11de-110">När du gör dessa beslut mappa du logiskt hello datorer toohello olika feldomäner (se steg 4).</span><span class="sxs-lookup"><span data-stu-id="c11de-110">After you make these decisions, you can logically map hello machines toohello various fault domains (see Step 4).</span></span> <span data-ttu-id="c11de-111">hello infrastruktur planera för driftskluster är mer komplicerat än för testkluster.</span><span class="sxs-lookup"><span data-stu-id="c11de-111">hello infrastructure planning for production clusters is more involved than for test clusters.</span></span>

### <a name="step-2-prepare-hello-machines-toomeet-hello-prerequisites"></a><span data-ttu-id="c11de-112">Steg 2: Förbered hello datorer toomeet hello krav</span><span class="sxs-lookup"><span data-stu-id="c11de-112">Step 2: Prepare hello machines toomeet hello prerequisites</span></span>
<span data-ttu-id="c11de-113">Krav för varje dator som du vill tooadd toohello klustret:</span><span class="sxs-lookup"><span data-stu-id="c11de-113">Prerequisites for each machine that you want tooadd toohello cluster:</span></span>

* <span data-ttu-id="c11de-114">Minst 16 GB RAM rekommenderas.</span><span class="sxs-lookup"><span data-stu-id="c11de-114">A minimum of 16 GB of RAM is recommended.</span></span>
* <span data-ttu-id="c11de-115">Minst 40 GB ledigt diskutrymme rekommenderas.</span><span class="sxs-lookup"><span data-stu-id="c11de-115">A minimum of 40 of GB available disk space is recommended.</span></span>
* <span data-ttu-id="c11de-116">En 4 kärnor eller större processor rekommenderas.</span><span class="sxs-lookup"><span data-stu-id="c11de-116">A 4 core or greater CPU is recommended.</span></span>
* <span data-ttu-id="c11de-117">Anslutningen tooa säkert nätverk eller nätverk för alla datorer.</span><span class="sxs-lookup"><span data-stu-id="c11de-117">Connectivity tooa secure network or networks for all machines.</span></span>
* <span data-ttu-id="c11de-118">Windows Server 2012 R2 eller Windows Server 2016.</span><span class="sxs-lookup"><span data-stu-id="c11de-118">Windows Server 2012 R2 or Windows Server 2016.</span></span> 
* <span data-ttu-id="c11de-119">[.NET framework 4.5.1 eller senare](https://www.microsoft.com/download/details.aspx?id=40773), fullständig installation.</span><span class="sxs-lookup"><span data-stu-id="c11de-119">[.NET Framework 4.5.1 or higher](https://www.microsoft.com/download/details.aspx?id=40773), full install.</span></span>
* <span data-ttu-id="c11de-120">[Windows PowerShell 3.0](https://msdn.microsoft.com/powershell/scripting/setup/installing-windows-powershell).</span><span class="sxs-lookup"><span data-stu-id="c11de-120">[Windows PowerShell 3.0](https://msdn.microsoft.com/powershell/scripting/setup/installing-windows-powershell).</span></span>
* <span data-ttu-id="c11de-121">Hej [RemoteRegistry tjänsten](https://technet.microsoft.com/library/cc754820) måste köras på alla hello-datorer.</span><span class="sxs-lookup"><span data-stu-id="c11de-121">hello [RemoteRegistry service](https://technet.microsoft.com/library/cc754820) should be running on all hello machines.</span></span>

<span data-ttu-id="c11de-122">hello Klusteradministratören distribuera och konfigurera hello klustret måste ha [administratörsbehörighet](https://social.technet.microsoft.com/wiki/contents/articles/13436.windows-server-2012-how-to-add-an-account-to-a-local-administrator-group.aspx) på varje hello datorer.</span><span class="sxs-lookup"><span data-stu-id="c11de-122">hello cluster administrator deploying and configuring hello cluster must have [administrator privileges](https://social.technet.microsoft.com/wiki/contents/articles/13436.windows-server-2012-how-to-add-an-account-to-a-local-administrator-group.aspx) on each of hello machines.</span></span> <span data-ttu-id="c11de-123">Du kan inte installera Service Fabric på en domänkontrollant.</span><span class="sxs-lookup"><span data-stu-id="c11de-123">You cannot install Service Fabric on a domain controller.</span></span>

### <a name="step-3-determine-hello-initial-cluster-size"></a><span data-ttu-id="c11de-124">Steg 3: Bestäm hello inledande klusterstorleken</span><span class="sxs-lookup"><span data-stu-id="c11de-124">Step 3: Determine hello initial cluster size</span></span>
<span data-ttu-id="c11de-125">Varje nod i ett fristående Service Fabric-kluster har hello Service Fabric runtime distribueras och är medlem i hello kluster.</span><span class="sxs-lookup"><span data-stu-id="c11de-125">Each node in a standalone Service Fabric cluster has hello Service Fabric runtime deployed and is a member of hello cluster.</span></span> <span data-ttu-id="c11de-126">I en typisk Produktionsdistribution finns en nod per operativsysteminstans (fysisk eller virtuell).</span><span class="sxs-lookup"><span data-stu-id="c11de-126">In a typical production deployment, there is one node per OS instance (physical or virtual).</span></span> <span data-ttu-id="c11de-127">hello klusterstorleken bestäms av dina affärsbehov.</span><span class="sxs-lookup"><span data-stu-id="c11de-127">hello cluster size is determined by your business needs.</span></span> <span data-ttu-id="c11de-128">Du måste dock ha en klustrets minsta storlek på tre noder (datorer eller virtuella datorer).</span><span class="sxs-lookup"><span data-stu-id="c11de-128">However, you must have a minimum cluster size of three nodes (machines or virtual machines).</span></span>
<span data-ttu-id="c11de-129">Du kan ha fler än en nod för utveckling, på en viss dator.</span><span class="sxs-lookup"><span data-stu-id="c11de-129">For development purposes, you can have more than one node on a given machine.</span></span> <span data-ttu-id="c11de-130">Service Fabric stöder bara en nod per fysisk eller virtuell dator i en produktionsmiljö.</span><span class="sxs-lookup"><span data-stu-id="c11de-130">In a production environment, Service Fabric supports only one node per physical or virtual machine.</span></span>

### <a name="step-4-determine-hello-number-of-fault-domains-and-upgrade-domains"></a><span data-ttu-id="c11de-131">Steg 4: Fastställa hello antalet feldomäner och uppgradera domäner</span><span class="sxs-lookup"><span data-stu-id="c11de-131">Step 4: Determine hello number of fault domains and upgrade domains</span></span>
<span data-ttu-id="c11de-132">En *feldomän* (FD) är en fysisk enhet till felet och är direkt relaterade toohello fysisk infrastruktur i hello datacenter.</span><span class="sxs-lookup"><span data-stu-id="c11de-132">A *fault domain* (FD) is a physical unit of failure and is directly related toohello physical infrastructure in hello data centers.</span></span> <span data-ttu-id="c11de-133">En feldomän består av maskinvarukomponenter (datorer, växlar, nätverk och mer) som delar en enskild felpunkt.</span><span class="sxs-lookup"><span data-stu-id="c11de-133">A fault domain consists of hardware components (computers, switches, networks, and more) that share a single point of failure.</span></span> <span data-ttu-id="c11de-134">Även om det finns ingen 1:1-mappning mellan feldomäner och rack, kan löst tala varje rack betraktas som en feldomän.</span><span class="sxs-lookup"><span data-stu-id="c11de-134">Although there is no 1:1 mapping between fault domains and racks, loosely speaking, each rack can be considered a fault domain.</span></span> <span data-ttu-id="c11de-135">När du överväger hello noderna i klustret, rekommenderar vi starkt att hello noder fördelas mellan minst tre feldomäner.</span><span class="sxs-lookup"><span data-stu-id="c11de-135">When considering hello nodes in your cluster, we strongly recommend that hello nodes be distributed among at least three fault domains.</span></span>

<span data-ttu-id="c11de-136">Du kan välja hello namn för varje FD när du anger FDs i ClusterConfig.json.</span><span class="sxs-lookup"><span data-stu-id="c11de-136">When you specify FDs in ClusterConfig.json, you can choose hello name for each FD.</span></span> <span data-ttu-id="c11de-137">Service Fabric stöder hierarkiska FDs, så du kan din infrastruktur-topologi i dem.</span><span class="sxs-lookup"><span data-stu-id="c11de-137">Service Fabric supports hierarchical FDs, so you can reflect your infrastructure topology in them.</span></span>  <span data-ttu-id="c11de-138">Till exempel är hello följande FDs giltiga:</span><span class="sxs-lookup"><span data-stu-id="c11de-138">For example, hello following FDs are valid:</span></span>

* <span data-ttu-id="c11de-139">”faultDomain” ”: fd: / Dator1-Room1/Rack1”</span><span class="sxs-lookup"><span data-stu-id="c11de-139">"faultDomain": "fd:/Room1/Rack1/Machine1"</span></span>
* <span data-ttu-id="c11de-140">”faultDomain” ”: fd: / FD1”</span><span class="sxs-lookup"><span data-stu-id="c11de-140">"faultDomain": "fd:/FD1"</span></span>
* <span data-ttu-id="c11de-141">”faultDomain” ”: fd: / Room1/Rack1/PDU1/M1”</span><span class="sxs-lookup"><span data-stu-id="c11de-141">"faultDomain": "fd:/Room1/Rack1/PDU1/M1"</span></span>

<span data-ttu-id="c11de-142">En *uppgraderingsdomänen* (UD) är en logisk enhet för noder.</span><span class="sxs-lookup"><span data-stu-id="c11de-142">An *upgrade domain* (UD) is a logical unit of nodes.</span></span> <span data-ttu-id="c11de-143">Under Service Fabric styrd uppgraderingar (en uppgradering av programmet eller en uppgradering av klustret) tas alla noder i ett UD ned tooperform hello uppgraderingen medan noder i andra UDs förblir tillgängliga tooserve begäranden.</span><span class="sxs-lookup"><span data-stu-id="c11de-143">During Service Fabric orchestrated upgrades (either an application upgrade or a cluster upgrade), all nodes in a UD are taken down tooperform hello upgrade while nodes in other UDs remain available tooserve requests.</span></span> <span data-ttu-id="c11de-144">hello firmware-uppgraderingar som du utför på dina datorer inte respektera UDs, så måste du göra dem något datorer samtidigt.</span><span class="sxs-lookup"><span data-stu-id="c11de-144">hello firmware upgrades you perform on your machines do not honor UDs, so you must do them one machine at a time.</span></span>

<span data-ttu-id="c11de-145">hello enklaste sättet toothink om de här koncepten är tooconsider FDs som hello enhet för oplanerade fel och UDs som hello enhet för planerat underhåll.</span><span class="sxs-lookup"><span data-stu-id="c11de-145">hello simplest way toothink about these concepts is tooconsider FDs as hello unit of unplanned failure and UDs as hello unit of planned maintenance.</span></span>

<span data-ttu-id="c11de-146">Du kan välja hello namn för varje UD när du anger UDs i ClusterConfig.json.</span><span class="sxs-lookup"><span data-stu-id="c11de-146">When you specify UDs in ClusterConfig.json, you can choose hello name for each UD.</span></span> <span data-ttu-id="c11de-147">Till exempel är hello följande namn giltiga:</span><span class="sxs-lookup"><span data-stu-id="c11de-147">For example, hello following names are valid:</span></span>

* <span data-ttu-id="c11de-148">”upgradeDomain”: ”UD0”</span><span class="sxs-lookup"><span data-stu-id="c11de-148">"upgradeDomain": "UD0"</span></span>
* <span data-ttu-id="c11de-149">”upgradeDomain”: ”UD1A”</span><span class="sxs-lookup"><span data-stu-id="c11de-149">"upgradeDomain": "UD1A"</span></span>
* <span data-ttu-id="c11de-150">”upgradeDomain”: ”DomainRed”</span><span class="sxs-lookup"><span data-stu-id="c11de-150">"upgradeDomain": "DomainRed"</span></span>
* <span data-ttu-id="c11de-151">”upgradeDomain”: ”Blue”</span><span class="sxs-lookup"><span data-stu-id="c11de-151">"upgradeDomain": "Blue"</span></span>

<span data-ttu-id="c11de-152">Mer detaljerad information om uppgraderingsdomäner och feldomäner finns [som beskriver ett Service Fabric-kluster](service-fabric-cluster-resource-manager-cluster-description.md).</span><span class="sxs-lookup"><span data-stu-id="c11de-152">For more detailed information on upgrade domains and fault domains, see [Describing a Service Fabric cluster](service-fabric-cluster-resource-manager-cluster-description.md).</span></span>

### <a name="step-5-download-hello-service-fabric-standalone-package-for-windows-server"></a><span data-ttu-id="c11de-153">Steg 5: Hämta hello Service Fabric fristående paketet för Windows Server</span><span class="sxs-lookup"><span data-stu-id="c11de-153">Step 5: Download hello Service Fabric standalone package for Windows Server</span></span>
<span data-ttu-id="c11de-154">[Hämta länk - Service Fabric fristående paket - Windows Server](http://go.microsoft.com/fwlink/?LinkId=730690) och packa hello paketet, antingen tooa distribution datorn som är inte en del av hello kluster eller tooone hello-datorer som ska ingå i klustret.</span><span class="sxs-lookup"><span data-stu-id="c11de-154">[Download Link - Service Fabric Standalone Package - Windows Server](http://go.microsoft.com/fwlink/?LinkId=730690) and unzip hello package, either tooa deployment machine that is not part of hello cluster, or tooone of hello machines that will be a part of your cluster.</span></span>

### <a name="step-6-modify-cluster-configuration"></a><span data-ttu-id="c11de-155">Steg 6: Ändra klusterkonfigurationen</span><span class="sxs-lookup"><span data-stu-id="c11de-155">Step 6: Modify cluster configuration</span></span>
<span data-ttu-id="c11de-156">toocreate ett fristående kluster som du har toocreate en fristående klustret ClusterConfig.json konfigurationsfil, som beskriver hello specificering av hello klustret.</span><span class="sxs-lookup"><span data-stu-id="c11de-156">toocreate a standalone cluster you have toocreate a standalone cluster configuration ClusterConfig.json file, which describes hello specification of hello cluster.</span></span> <span data-ttu-id="c11de-157">Du kan basera hello konfigurationsfilen på hello mallar finns på hello länken nedan.</span><span class="sxs-lookup"><span data-stu-id="c11de-157">You can base hello configuration file on hello templates found at hello below link.</span></span> <br><span data-ttu-id="c11de-158">
[Fristående klusterkonfigurationer](https://github.com/Azure-Samples/service-fabric-dotnet-standalone-cluster-configuration/tree/master/Samples)</span><span class="sxs-lookup"><span data-stu-id="c11de-158">
[Standalone Cluster Configurations](https://github.com/Azure-Samples/service-fabric-dotnet-standalone-cluster-configuration/tree/master/Samples)</span></span>

<span data-ttu-id="c11de-159">Mer information om hello avsnitt i den här filen finns [konfigurationsinställningar för Windows-kluster för fristående](service-fabric-cluster-manifest.md).</span><span class="sxs-lookup"><span data-stu-id="c11de-159">For details on hello sections in this file, see [Configuration settings for standalone Windows cluster](service-fabric-cluster-manifest.md).</span></span>

<span data-ttu-id="c11de-160">Öppna en hello ClusterConfig.json filer från hello-paketet som du hämtade och ändra hello följande inställningar:</span><span class="sxs-lookup"><span data-stu-id="c11de-160">Open one of hello ClusterConfig.json files from hello package you downloaded and modify hello following settings:</span></span>
| <span data-ttu-id="c11de-161">**Konfigurationsinställningen**</span><span class="sxs-lookup"><span data-stu-id="c11de-161">**Configuration Setting**</span></span> | <span data-ttu-id="c11de-162">**Beskrivning**</span><span class="sxs-lookup"><span data-stu-id="c11de-162">**Description**</span></span> |
| --- | --- |
| <span data-ttu-id="c11de-163">**Nodetypes får**</span><span class="sxs-lookup"><span data-stu-id="c11de-163">**NodeTypes**</span></span> |<span data-ttu-id="c11de-164">Nodtyper Tillåt tooseparate klusternoderna i olika grupper.</span><span class="sxs-lookup"><span data-stu-id="c11de-164">Node types allow you tooseparate your cluster nodes into various groups.</span></span> <span data-ttu-id="c11de-165">Ett kluster måste ha minst en NodeType.</span><span class="sxs-lookup"><span data-stu-id="c11de-165">A cluster must have at least one NodeType.</span></span> <span data-ttu-id="c11de-166">Alla noder i en grupp har hello följande gemensamma egenskaper:</span><span class="sxs-lookup"><span data-stu-id="c11de-166">All nodes in a group have hello following common characteristics:</span></span> <br> <span data-ttu-id="c11de-167">**Namnet** -detta är namnet hello nodtypen.</span><span class="sxs-lookup"><span data-stu-id="c11de-167">**Name** - This is hello node type name.</span></span> <br><span data-ttu-id="c11de-168">**Slutpunktsportar** – dessa är olika namngivna slutpunkter (portar) som är associerade med den här nodtypen.</span><span class="sxs-lookup"><span data-stu-id="c11de-168">**Endpoint Ports** - These are various named end points (ports) that are associated with this node type.</span></span> <span data-ttu-id="c11de-169">Du kan använda alla portnummer som du vill, förutsatt att de inte står i konflikt med något annat i manifestet inte och redan används av andra program som körs på hello dator och VM.</span><span class="sxs-lookup"><span data-stu-id="c11de-169">You can use any port number that you wish, as long as they do not conflict with anything else in this manifest and are not already in use by any other application running on hello machine/VM.</span></span> <br> <span data-ttu-id="c11de-170">**Placeringsegenskaper** -dessa beskriver egenskaper för den här nodtypen som du använder som placeringen för hello systemtjänster eller dina tjänster.</span><span class="sxs-lookup"><span data-stu-id="c11de-170">**Placement Properties** - These describe properties for this node type that you use as placement constraints for hello system services or your services.</span></span> <span data-ttu-id="c11de-171">Dessa egenskaper är användardefinierade nyckel/värde-par som ger extra metadata för en viss nod.</span><span class="sxs-lookup"><span data-stu-id="c11de-171">These properties are user-defined key/value pairs that provide extra meta data for a given node.</span></span> <span data-ttu-id="c11de-172">Exempel på nodegenskaper skulle vara om hello-noden har en hårddisk eller grafikkort, hello antalet spindlar i dess hårddisk, kärnor och andra fysiska egenskaper.</span><span class="sxs-lookup"><span data-stu-id="c11de-172">Examples of node properties would be whether hello node has a hard drive or graphics card, hello number of spindles in its hard drive, cores, and other physical properties.</span></span> <br> <span data-ttu-id="c11de-173">**Kapaciteter** -noden kapaciteter definiera hello namn och mängd för en viss resurs att en viss nod har tillgängliga för användning.</span><span class="sxs-lookup"><span data-stu-id="c11de-173">**Capacities** - Node capacities define hello name and amount of a particular resource that a particular node has available for consumption.</span></span> <span data-ttu-id="c11de-174">En nod kan till exempel ange att den har kapacitet för ett mått som kallas ”MemoryInMb” och att den har 2 048 MB tillgängligt som standard.</span><span class="sxs-lookup"><span data-stu-id="c11de-174">For example, a node may define that it has capacity for a metric called “MemoryInMb” and that it has 2048 MB available by default.</span></span> <span data-ttu-id="c11de-175">Dessa kapaciteter som används vid körning tooensure att tjänster som kräver särskild mängder resurser placeras på hello noder som har resurser som är tillgängliga i hello nödvändiga belopp.</span><span class="sxs-lookup"><span data-stu-id="c11de-175">These capacities are used at runtime tooensure that services that require particular amounts of resources are placed on hello nodes that have those resources available in hello required amounts.</span></span><br><span data-ttu-id="c11de-176">**IsPrimary** - om du har fler än en NodeType definierats är Kontrollera att endast en tooprimary med hello värdet *SANT*, vilket är där hello system services körs.</span><span class="sxs-lookup"><span data-stu-id="c11de-176">**IsPrimary** - If you have more than one NodeType defined ensure that only one is set tooprimary with hello value *true*, which is where hello system services run.</span></span> <span data-ttu-id="c11de-177">Alla andra nodtyper ska anges toohello värdet *FALSKT*</span><span class="sxs-lookup"><span data-stu-id="c11de-177">All other node types should be set toohello value *false*</span></span> |
| <span data-ttu-id="c11de-178">**Noder**</span><span class="sxs-lookup"><span data-stu-id="c11de-178">**Nodes**</span></span> |<span data-ttu-id="c11de-179">Dessa är hello information för varje hello-noder som tillhör hello kluster (nodtypen, nodnamn, IP-adress, feldomän och uppgraderingsdomän för hello nod).</span><span class="sxs-lookup"><span data-stu-id="c11de-179">These are hello details for each of hello nodes that are part of hello cluster (node type, node name, IP address, fault domain, and upgrade domain of hello node).</span></span> <span data-ttu-id="c11de-180">hello datorer du vill hello klustret toobe skapas på behovet av toobe i den här listan med sina IP-adresser.</span><span class="sxs-lookup"><span data-stu-id="c11de-180">hello machines you want hello cluster toobe created on need toobe listed here with their IP addresses.</span></span> <br> <span data-ttu-id="c11de-181">Om du använder hello samma IP-adress för alla hello noder och ett kluster med en ruta skapas, som du kan använda för testning.</span><span class="sxs-lookup"><span data-stu-id="c11de-181">If you use hello same IP address for all hello nodes, then a one-box cluster is created, which you can use for testing purposes.</span></span> <span data-ttu-id="c11de-182">Använd inte en ruta kluster för att distribuera produktionsarbetsbelastningar.</span><span class="sxs-lookup"><span data-stu-id="c11de-182">Do not use One-box clusters for deploying production workloads.</span></span> |

<span data-ttu-id="c11de-183">När hello klusterkonfigurationen har alla inställningarna toohello miljö, kan den testas mot hello klustermiljön (steg 7).</span><span class="sxs-lookup"><span data-stu-id="c11de-183">After hello cluster configuration has had all settings configured toohello environment, it can be tested against hello cluster environment (step 7).</span></span>

<a id="environmentsetup"></a>

### <a name="step-7-environment-setup"></a><span data-ttu-id="c11de-184">Steg 7.</span><span class="sxs-lookup"><span data-stu-id="c11de-184">Step 7.</span></span> <span data-ttu-id="c11de-185">Konfigurera miljön</span><span class="sxs-lookup"><span data-stu-id="c11de-185">Environment setup</span></span>

<span data-ttu-id="c11de-186">När en Klusteradministratör konfigurerar en fristående Service Fabric-klustret, är hello miljö behov toobe med hello följande kriterier:</span><span class="sxs-lookup"><span data-stu-id="c11de-186">When a cluster administrator configures a Service Fabric standalone cluster, hello environment is needs toobe set up with hello following criteria:</span></span> <br>
1. <span data-ttu-id="c11de-187">hello användare skapar hello kluster ska ha behörighet på säkerhet privilegier tooall datorer som listas som noder i konfigurationsfilen för hello klustret.</span><span class="sxs-lookup"><span data-stu-id="c11de-187">hello user creating hello cluster should have administrator-level security privileges tooall machines that are listed as nodes in hello cluster configuration file.</span></span>
2. <span data-ttu-id="c11de-188">Datorn från vilken hello klustret har skapats, samt varje kluster nod dator måste du:</span><span class="sxs-lookup"><span data-stu-id="c11de-188">Machine from which hello cluster is created, as well as each cluster node machine must:</span></span>
* <span data-ttu-id="c11de-189">Har avinstallerat Service Fabric SDK</span><span class="sxs-lookup"><span data-stu-id="c11de-189">Have Service Fabric SDK uninstalled</span></span>
* <span data-ttu-id="c11de-190">Ha Service Fabric runtime avinstalleras</span><span class="sxs-lookup"><span data-stu-id="c11de-190">Have Service Fabric runtime uninstalled</span></span> 
* <span data-ttu-id="c11de-191">Har hello Windows-brandväggen (mpssvc) aktiverat</span><span class="sxs-lookup"><span data-stu-id="c11de-191">Have hello Windows Firewall service (mpssvc) enabled</span></span>
* <span data-ttu-id="c11de-192">Har aktiverat hello Remote Registry-tjänsten (remoteregistry)</span><span class="sxs-lookup"><span data-stu-id="c11de-192">Have hello Remote Registry Service (remoteregistry) enabled</span></span>
* <span data-ttu-id="c11de-193">Har aktiverat delning (SMB)-fil</span><span class="sxs-lookup"><span data-stu-id="c11de-193">Have file sharing (SMB) enabled</span></span>
* <span data-ttu-id="c11de-194">Har nödvändiga portarna som öppnas, baserat på klustret configuration portar</span><span class="sxs-lookup"><span data-stu-id="c11de-194">Have necessary ports opened, based on cluster configuration ports</span></span>
* <span data-ttu-id="c11de-195">Har nödvändiga portarna för Windows-SMB- och Remote Registry-tjänsten: 135, 137, 138, 139 och 445</span><span class="sxs-lookup"><span data-stu-id="c11de-195">Have necessary ports opened for Windows SMB and Remote Registry service: 135, 137, 138, 139, and 445</span></span>
* <span data-ttu-id="c11de-196">Network connectivity tooone har en annan</span><span class="sxs-lookup"><span data-stu-id="c11de-196">Have network connectivity tooone another</span></span>
3. <span data-ttu-id="c11de-197">Ingen av hello kluster nod datorerna ska vara en domänkontrollant.</span><span class="sxs-lookup"><span data-stu-id="c11de-197">None of hello cluster node machines should be a Domain Controller.</span></span>
4. <span data-ttu-id="c11de-198">Om säker klustret har hello klustret toobe distribueras kan validera hello säkerhet som behövs krav är placera och är korrekt konfigurerade mot hello konfiguration.</span><span class="sxs-lookup"><span data-stu-id="c11de-198">If hello cluster toobe deployed is a secure cluster, validate hello necessary security prerequisites are in place, and are configured correctly against hello configuration.</span></span>
5. <span data-ttu-id="c11de-199">Om hello klustret datorer inte komma åt internet, klusterkonfiguration ange hello följande i hello:</span><span class="sxs-lookup"><span data-stu-id="c11de-199">If hello cluster machines are not internet-accessible, set hello following in hello cluster configuration:</span></span>
* <span data-ttu-id="c11de-200">Inaktivera telemetri: Under *egenskaper* ange *”enableTelemetry”: false*</span><span class="sxs-lookup"><span data-stu-id="c11de-200">Disable telemetry:   Under *properties* set   *"enableTelemetry": false*</span></span>
* <span data-ttu-id="c11de-201">Inaktivera automatisk hämtning av Fabric-version & meddelanden som hello aktuella kluster av version närmar sig slutet av stödet: Under *egenskaper* ange *”fabricClusterAutoupgradeEnabled”: false*</span><span class="sxs-lookup"><span data-stu-id="c11de-201">Disable automatic Fabric version downloading & notifications that hello current cluster version is nearing end of support:   Under *properties* set   *"fabricClusterAutoupgradeEnabled": false*</span></span>
* <span data-ttu-id="c11de-202">Du kan också om internet nätverksåtkomst är begränsad toowhite visas domäner, hello domäner nedan krävs för automatisk uppgradering: go.microsoft.com download.microsoft.com</span><span class="sxs-lookup"><span data-stu-id="c11de-202">Alternatively if network internet access is limited toowhite-listed domains, hello domains below are required for automatic upgrade:   go.microsoft.com   download.microsoft.com</span></span>

6. <span data-ttu-id="c11de-203">Ange rätt Service Fabric antivirus undantag:</span><span class="sxs-lookup"><span data-stu-id="c11de-203">Set appropriate Service Fabric antivirus exclusions:</span></span>

| <span data-ttu-id="c11de-204">**Antivirusprogram exkluderade kataloger**</span><span class="sxs-lookup"><span data-stu-id="c11de-204">**Antivirus Excluded directories**</span></span> |
| --- |
| <span data-ttu-id="c11de-205">Program Files\Microsoft Service Fabric</span><span class="sxs-lookup"><span data-stu-id="c11de-205">Program Files\Microsoft Service Fabric</span></span> |
| <span data-ttu-id="c11de-206">FabricDataRoot (från klusterkonfigurationen)</span><span class="sxs-lookup"><span data-stu-id="c11de-206">FabricDataRoot (from cluster configuration)</span></span> |
| <span data-ttu-id="c11de-207">FabricLogRoot (från klusterkonfigurationen)</span><span class="sxs-lookup"><span data-stu-id="c11de-207">FabricLogRoot (from cluster configuration)</span></span> |

| <span data-ttu-id="c11de-208">**Antivirusprogram undantagna processer**</span><span class="sxs-lookup"><span data-stu-id="c11de-208">**Antivirus Excluded processes**</span></span> |
| --- |
| <span data-ttu-id="c11de-209">Fabric.exe</span><span class="sxs-lookup"><span data-stu-id="c11de-209">Fabric.exe</span></span> |
| <span data-ttu-id="c11de-210">FabricHost.exe</span><span class="sxs-lookup"><span data-stu-id="c11de-210">FabricHost.exe</span></span> |
| <span data-ttu-id="c11de-211">FabricInstallerService.exe</span><span class="sxs-lookup"><span data-stu-id="c11de-211">FabricInstallerService.exe</span></span> |
| <span data-ttu-id="c11de-212">FabricSetup.exe</span><span class="sxs-lookup"><span data-stu-id="c11de-212">FabricSetup.exe</span></span> |
| <span data-ttu-id="c11de-213">FabricDeployer.exe</span><span class="sxs-lookup"><span data-stu-id="c11de-213">FabricDeployer.exe</span></span> |
| <span data-ttu-id="c11de-214">ImageBuilder.exe</span><span class="sxs-lookup"><span data-stu-id="c11de-214">ImageBuilder.exe</span></span> |
| <span data-ttu-id="c11de-215">FabricGateway.exe</span><span class="sxs-lookup"><span data-stu-id="c11de-215">FabricGateway.exe</span></span> |
| <span data-ttu-id="c11de-216">FabricDCA.exe</span><span class="sxs-lookup"><span data-stu-id="c11de-216">FabricDCA.exe</span></span> |
| <span data-ttu-id="c11de-217">FabricFAS.exe</span><span class="sxs-lookup"><span data-stu-id="c11de-217">FabricFAS.exe</span></span> |
| <span data-ttu-id="c11de-218">FabricUOS.exe</span><span class="sxs-lookup"><span data-stu-id="c11de-218">FabricUOS.exe</span></span> |
| <span data-ttu-id="c11de-219">FabricRM.exe</span><span class="sxs-lookup"><span data-stu-id="c11de-219">FabricRM.exe</span></span> |
| <span data-ttu-id="c11de-220">FileStoreService.exe</span><span class="sxs-lookup"><span data-stu-id="c11de-220">FileStoreService.exe</span></span> |

### <a name="step-8-validate-environment-using-testconfiguration-script"></a><span data-ttu-id="c11de-221">Steg 8.</span><span class="sxs-lookup"><span data-stu-id="c11de-221">Step 8.</span></span> <span data-ttu-id="c11de-222">Validera miljö med hjälp av TestConfiguration skript</span><span class="sxs-lookup"><span data-stu-id="c11de-222">Validate environment using TestConfiguration script</span></span>
<span data-ttu-id="c11de-223">Hej TestConfiguration.ps1 skript finns i hello fristående paketet.</span><span class="sxs-lookup"><span data-stu-id="c11de-223">hello TestConfiguration.ps1 script can be found in hello standalone package.</span></span> <span data-ttu-id="c11de-224">Det är används som en Best Practices Analyzer toovalidate några av hello villkoren ovan och bör användas som en förstånd Kontrollera toovalidate om ett kluster kan distribueras på en given miljö.</span><span class="sxs-lookup"><span data-stu-id="c11de-224">It is used as a Best Practices Analyzer toovalidate some of hello criteria above and should be used as a sanity check toovalidate whether a cluster can be deployed on a given environment.</span></span> <span data-ttu-id="c11de-225">Om det inte finns några fel, se toohello listan under [Miljökonfiguration](service-fabric-cluster-standalone-deployment-preparation.md) för felsökning.</span><span class="sxs-lookup"><span data-stu-id="c11de-225">If there is any failure, refer toohello list under [Environment Setup](service-fabric-cluster-standalone-deployment-preparation.md) for troubleshooting.</span></span> 

<span data-ttu-id="c11de-226">Det här skriptet kan köras på en dator som har administratören åtkomst tooall hello datorer som listas som noder i konfigurationsfilen för hello-klustret.</span><span class="sxs-lookup"><span data-stu-id="c11de-226">This script can be run on any machine that has administrator access tooall hello machines that are listed as nodes in hello cluster configuration file.</span></span> <span data-ttu-id="c11de-227">hello-dator som det här skriptet körs på har inte toobe tillhör hello kluster.</span><span class="sxs-lookup"><span data-stu-id="c11de-227">hello machine that this script is run on does not have toobe part of hello cluster.</span></span>

```powershell
PS C:\temp\Microsoft.Azure.ServiceFabric.WindowsServer> .\TestConfiguration.ps1 -ClusterConfigFilePath .\ClusterConfig.Unsecure.DevCluster.json
Trace folder already exists. Traces will be written tooexisting trace folder: C:\temp\Microsoft.Azure.ServiceFabric.WindowsServer\DeploymentTraces
Running Best Practices Analyzer...
Best Practices Analyzer completed successfully.


LocalAdminPrivilege        : True
IsJsonValid                : True
IsCabValid                 : True
RequiredPortsOpen          : True
RemoteRegistryAvailable    : True
FirewallAvailable          : True
RpcCheckPassed             : True
NoConflictingInstallations : True
FabricInstallable          : True
Passed                     : True
```

<span data-ttu-id="c11de-228">Den här konfigurationen tester modulen kan för närvarande inte valideras hello säkerhetskonfiguration så att det har toobe klar oberoende.</span><span class="sxs-lookup"><span data-stu-id="c11de-228">Currently this configuration testing module does not validate hello security configuration so this has toobe done independently.</span></span>  

> [!NOTE]
> <span data-ttu-id="c11de-229">Kontinuerligt genomför vi förbättringar toomake den här modulen mer robust, så om det finns en felaktig eller saknat case som du tror att för närvarande inte fångas av TestConfiguration, meddela oss via vårt [stöder kanaler](https://docs.microsoft.com/en-us/azure/service-fabric/service-fabric-support).</span><span class="sxs-lookup"><span data-stu-id="c11de-229">We are continually making improvements toomake this module more robust, so if there is a faulty or missing case which you believe isn't currently caught by TestConfiguration, please let us know through our [support channels](https://docs.microsoft.com/en-us/azure/service-fabric/service-fabric-support).</span></span>   
> 
> 

## <a name="next-steps"></a><span data-ttu-id="c11de-230">Nästa steg</span><span class="sxs-lookup"><span data-stu-id="c11de-230">Next steps</span></span>
* [<span data-ttu-id="c11de-231">Skapa ett fristående kluster som körs på Windows Server</span><span class="sxs-lookup"><span data-stu-id="c11de-231">Create a standalone cluster running on Windows Server</span></span>](service-fabric-cluster-creation-for-windows-server.md)

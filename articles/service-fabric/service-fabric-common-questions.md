---
title: "aaaCommon frågor om Microsoft Azure Service Fabric | Microsoft Docs"
description: "Vanliga frågor och svar om Service Fabric och deras svar"
services: service-fabric
documentationcenter: .net
author: chackdan
manager: timlt
editor: 
ms.assetid: 5a179703-ff0c-4b8e-98cd-377253295d12
ms.service: service-fabric
ms.devlang: dotnet
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: na
ms.date: 08/18/2017
ms.author: chackdan
ms.openlocfilehash: 4cbe92d2a03f7a1ea5d077807fdc982288220a7e
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: sv-SE
ms.lasthandoff: 10/06/2017
---
# <a name="commonly-asked-service-fabric-questions"></a><span data-ttu-id="e5bf6-103">Vanliga frågor för Service Fabric</span><span class="sxs-lookup"><span data-stu-id="e5bf6-103">Commonly asked Service Fabric questions</span></span>

<span data-ttu-id="e5bf6-104">Det finns många vanliga frågor om vad Service Fabric kan göra och hur den ska användas.</span><span class="sxs-lookup"><span data-stu-id="e5bf6-104">There are many commonly asked questions about what Service Fabric can do and how it should be used.</span></span> <span data-ttu-id="e5bf6-105">Det här dokumentet beskrivs många av dessa vanliga frågor och deras svar.</span><span class="sxs-lookup"><span data-stu-id="e5bf6-105">This document covers many of those common questions and their answers.</span></span>

## <a name="cluster-setup-and-management"></a><span data-ttu-id="e5bf6-106">Konfigurera och hantera kluster</span><span class="sxs-lookup"><span data-stu-id="e5bf6-106">Cluster setup and management</span></span>

### <a name="can-i-create-a-cluster-that-spans-multiple-azure-regions-or-my-own-datacenters"></a><span data-ttu-id="e5bf6-107">Kan jag skapa ett kluster som sträcker sig över flera Azure-regioner eller egna Datacenter?</span><span class="sxs-lookup"><span data-stu-id="e5bf6-107">Can I create a cluster that spans multiple Azure regions or my own datacenters?</span></span>

<span data-ttu-id="e5bf6-108">Ja.</span><span class="sxs-lookup"><span data-stu-id="e5bf6-108">Yes.</span></span> 

<span data-ttu-id="e5bf6-109">hello core Service Fabric-kluster teknik kan vara används toocombine datorer var som helst i hello world så länge som de har network connectivity tooeach andra.</span><span class="sxs-lookup"><span data-stu-id="e5bf6-109">hello core Service Fabric clustering technology can be used toocombine machines running anywhere in hello world, so long as they have network connectivity tooeach other.</span></span> <span data-ttu-id="e5bf6-110">Skapa och köra sådant kluster kan dock vara komplicerat.</span><span class="sxs-lookup"><span data-stu-id="e5bf6-110">However, building and running such a cluster can be complicated.</span></span>

<span data-ttu-id="e5bf6-111">Om du är intresserad av att det här scenariot gärna tooget i Kontakta antingen via hello [Service Fabric Github problem listan](https://github.com/azure/service-fabric-issues) eller via din supportrepresentant i ordning tooobtain ytterligare hjälp.</span><span class="sxs-lookup"><span data-stu-id="e5bf6-111">If you are interested in this scenario, we encourage you tooget in contact either through hello [Service Fabric Github Issues List](https://github.com/azure/service-fabric-issues) or through your support representative in order tooobtain additional guidance.</span></span> <span data-ttu-id="e5bf6-112">hello Service Fabric-teamet arbetar tooprovide ytterligare tydlighetens skull, vägledning och rekommendationer för det här scenariot.</span><span class="sxs-lookup"><span data-stu-id="e5bf6-112">hello Service Fabric team is working tooprovide additional clarity, guidance, and recommendations for this scenario.</span></span> 

<span data-ttu-id="e5bf6-113">Vissa saker tooconsider:</span><span class="sxs-lookup"><span data-stu-id="e5bf6-113">Some things tooconsider:</span></span> 

1. <span data-ttu-id="e5bf6-114">hello resurs i Azure Service Fabric är regional idag, som är hello virtuella skalningsuppsättningarna hello klustret bygger på.</span><span class="sxs-lookup"><span data-stu-id="e5bf6-114">hello Service Fabric cluster resource in Azure is regional today, as are hello virtual machine scale sets that hello cluster is built on.</span></span> <span data-ttu-id="e5bf6-115">Detta innebär att hello regionala fel för händelsen du kan förlora möjligheten hello toomanage hello klustret via hello Azure Resource Manager eller hello Azure-portalen.</span><span class="sxs-lookup"><span data-stu-id="e5bf6-115">This means that in hello event of a regional failure you may lose hello ability toomanage hello cluster via hello Azure Resource Manager or hello Azure Portal.</span></span> <span data-ttu-id="e5bf6-116">Detta kan inträffa även om hello klustret är igång och du kommer att kunna toointeract med det direkt.</span><span class="sxs-lookup"><span data-stu-id="e5bf6-116">This can happen even though hello cluster remains running and you'd be able toointeract with it directly.</span></span> <span data-ttu-id="e5bf6-117">Dessutom erbjuder Azure idag inte hello möjlighet toohave ett virtuellt nätverk som kan användas över regioner.</span><span class="sxs-lookup"><span data-stu-id="e5bf6-117">In addition, Azure today does not offer hello ability toohave a single virtual network that is usable across regions.</span></span> <span data-ttu-id="e5bf6-118">Detta innebär att ett kluster med flera region i Azure kräver antingen [offentliga IP-adresser för varje virtuell dator i hello Skalningsuppsättningar](../virtual-machine-scale-sets/virtual-machine-scale-sets-networking.md#public-ipv4-per-virtual-machine) eller [Azure VPN-gatewayer](../vpn-gateway/vpn-gateway-about-vpngateways.md).</span><span class="sxs-lookup"><span data-stu-id="e5bf6-118">This means that a multi-region cluster in Azure requires either [Public IP Addresses for each VM in hello VM Scale Sets](../virtual-machine-scale-sets/virtual-machine-scale-sets-networking.md#public-ipv4-per-virtual-machine) or [Azure VPN Gateways](../vpn-gateway/vpn-gateway-about-vpngateways.md).</span></span> <span data-ttu-id="e5bf6-119">Valen nätverk har olika påverkan på kostnader, prestanda och toosome grad programdesign, så noggrann analys och planering krävs före stående in sådan miljö.</span><span class="sxs-lookup"><span data-stu-id="e5bf6-119">These networking choices have different impacts on costs, performance, and toosome degree application design, so careful analysis and planning is required before standing up such an environment.</span></span>
2. <span data-ttu-id="e5bf6-120">hello underhåll, hantering och övervakning av dessa datorer kan bli komplicerad, särskilt när omfattas över _typer_ av miljöer mellan olika molntjänstleverantörer eller mellan lokala resurser och Azure .</span><span class="sxs-lookup"><span data-stu-id="e5bf6-120">hello maintenance, management, and monitoring of these machines can become complicated, especially when spanned across _types_ of environments, such as between different cloud providers or between on-premises resources and Azure.</span></span> <span data-ttu-id="e5bf6-121">Var försiktig tooensure som uppgraderar, övervakning, hantering och diagnostik förstås för både hello och hello program innan du kör produktionsarbetsbelastningar i en sådan miljö.</span><span class="sxs-lookup"><span data-stu-id="e5bf6-121">Care must be taken tooensure that upgrades, monitoring, management, and diagnostics are understood for both hello cluster and hello applications before running production workloads in such an environment.</span></span> <span data-ttu-id="e5bf6-122">Om du redan har stor erfarenhet lösa dessa problem i Azure eller i ditt eget datacenter, är det troligt att dessa samma lösningar kan användas när bygga ut eller kör Service Fabric-klustret.</span><span class="sxs-lookup"><span data-stu-id="e5bf6-122">If you already have lots of experience solving these problems in Azure or within your own datacenters, then it is likely that those same solutions can be applied when building out or running your Service Fabric cluster.</span></span> 

### <a name="do-service-fabric-nodes-automatically-receive-os-updates"></a><span data-ttu-id="e5bf6-123">Får Service Fabric-noder automatiskt operativsystemuppdateringar?</span><span class="sxs-lookup"><span data-stu-id="e5bf6-123">Do Service Fabric nodes automatically receive OS updates?</span></span>

<span data-ttu-id="e5bf6-124">Inte idag, men det är också en gemensam begäran om att Azure avser toodeliver.</span><span class="sxs-lookup"><span data-stu-id="e5bf6-124">Not today, but this is also a common request that Azure intends toodeliver.</span></span>

<span data-ttu-id="e5bf6-125">I hello tillfälligt, har vi [som ett program](service-fabric-patch-orchestration-application.md) att hello operativsystem under Service Fabric-noder hålls uppdaterad och uppåt toodate.</span><span class="sxs-lookup"><span data-stu-id="e5bf6-125">In hello interim, we have [provided an application](service-fabric-patch-orchestration-application.md) that hello operating systems underneath your Service Fabric nodes stay patched and up toodate.</span></span>

<span data-ttu-id="e5bf6-126">hello utmaningen med operativsystemuppdateringar är de vanligtvis kräver en omstart av hello datorn, vilket resulterar i tillfälliga tillgänglighetsproblem.</span><span class="sxs-lookup"><span data-stu-id="e5bf6-126">hello challenge with OS updates is that they typically require a reboot of hello machine, which results in temporary availability loss.</span></span> <span data-ttu-id="e5bf6-127">Som är inte ett problem Eftersom Service Fabric att automatiskt omdirigera trafik för de tjänster tooother noderna.</span><span class="sxs-lookup"><span data-stu-id="e5bf6-127">By itself, that is not a problem, since Service Fabric will automatically redirect traffic for those services tooother nodes.</span></span> <span data-ttu-id="e5bf6-128">Om operativsystemuppdateringar inte koordineras över hello kluster, är det dock hello risk att många noder gå ned på samma gång.</span><span class="sxs-lookup"><span data-stu-id="e5bf6-128">However, if OS updates are not coordinated across hello cluster, there is hello potential that many nodes go down at once.</span></span> <span data-ttu-id="e5bf6-129">Sådana samtidiga omstarter kan gå förlorade fullständig tillgängligheten för en tjänst eller på minst för en specifik partition (för en tillståndskänslig service).</span><span class="sxs-lookup"><span data-stu-id="e5bf6-129">Such simultaneous reboots can cause complete availability loss for a service, or at least for a specific partition (for a stateful service).</span></span>

<span data-ttu-id="e5bf6-130">I framtida hello kommer principen för toosupport ett operativsystem som är helt automatiserad och koordineras update domäner säkerställer att tillgängligheten bibehålls trots omstarter och andra oväntade fel.</span><span class="sxs-lookup"><span data-stu-id="e5bf6-130">In hello future, we plan toosupport an OS update policy that is fully automated and coordinated across update domains, ensuring that availability is maintained despite reboots and other unexpected failures.</span></span>

### <a name="can-i-use-large-virtual-machine-scale-sets-in-my-sf-cluster"></a><span data-ttu-id="e5bf6-131">Kan jag använda stora Skalningsuppsättningar i virtuella datorer i min SA kluster?</span><span class="sxs-lookup"><span data-stu-id="e5bf6-131">Can I use Large Virtual Machine Scale Sets in my SF cluster?</span></span> 

<span data-ttu-id="e5bf6-132">**Kort svar** : Nej</span><span class="sxs-lookup"><span data-stu-id="e5bf6-132">**Short answer** - No.</span></span> 

<span data-ttu-id="e5bf6-133">**Svara på länge** – även om hello stora Skalningsuppsättningar i virtuella datorer kan tooscale en virtuell dator skala ange upp till 1000 VM-instanser, sker detta med hello placering grupper (PGs).</span><span class="sxs-lookup"><span data-stu-id="e5bf6-133">**Long Answer** - Although hello Large Virtual Machine Scale Sets allow you tooscale a virtual machine scale set upto 1000 VM instances, it does so by hello use of Placement Groups (PGs).</span></span> <span data-ttu-id="e5bf6-134">Feldomäner (FDs) och uppgraderingsdomäner (UDs) är bara konsekvent inom en placering grupp Service fabric använder FDs och UDs toomake placering beslut för din tjänstinstanser repliker-tjänsten.</span><span class="sxs-lookup"><span data-stu-id="e5bf6-134">Fault domains (FDs) and upgrade domains (UDs) are only consistent within a placement group Service fabric uses FDs and UDs toomake placement decisions of your service replicas/Service instances.</span></span> <span data-ttu-id="e5bf6-135">Eftersom hello FDs och UDs är jämförbar endast inom en grupp för placering SA kan inte använda den.</span><span class="sxs-lookup"><span data-stu-id="e5bf6-135">Since hello FDs  and UDs are comparable only within a placement group SF cannot use it.</span></span> <span data-ttu-id="e5bf6-136">Till exempel om VM1 i SG1 har en topologi för FD = 0 och VM9 i SG2 har en topologi för FD = 4, innebär inte att VM1 och VM2 finns på två olika maskinvara rack, därför SA kan inte använda hello FD värdena i det här fallet toomake placering beslut.</span><span class="sxs-lookup"><span data-stu-id="e5bf6-136">For example, If VM1 in PG1 has a topology of FD=0 and VM9 in PG2 has a topology of FD=4 , it does not mean that VM1 and VM2 are on two different Hardware Racks, hence SF cannot use hello FD values in this case toomake placement decisions.</span></span>

<span data-ttu-id="e5bf6-137">Det finns andra problem med stora virtuella datorer, som hello brist på nivå 4 läsa in stöd för belastningsutjämning.</span><span class="sxs-lookup"><span data-stu-id="e5bf6-137">There are other issues with Large virtual machine scale sets currently, like hello lack of level-4 Load balancing support.</span></span> <span data-ttu-id="e5bf6-138">Se toofor [information i stor skala uppsättningar](../virtual-machine-scale-sets/virtual-machine-scale-sets-placement-groups.md)</span><span class="sxs-lookup"><span data-stu-id="e5bf6-138">Refer toofor [details on Large scale sets](../virtual-machine-scale-sets/virtual-machine-scale-sets-placement-groups.md)</span></span>



### <a name="what-is-hello-minimum-size-of-a-service-fabric-cluster-why-cant-it-be-smaller"></a><span data-ttu-id="e5bf6-139">Vad är hello minimala storleken för ett Service Fabric-kluster?</span><span class="sxs-lookup"><span data-stu-id="e5bf6-139">What is hello minimum size of a Service Fabric cluster?</span></span> <span data-ttu-id="e5bf6-140">Varför kan det vara mindre?</span><span class="sxs-lookup"><span data-stu-id="e5bf6-140">Why can't it be smaller?</span></span>

<span data-ttu-id="e5bf6-141">hello stöds minimistorleken för ett Service Fabric-kluster som kör produktionsarbetsbelastningar är fem noder.</span><span class="sxs-lookup"><span data-stu-id="e5bf6-141">hello minimum supported size for a Service Fabric cluster running production workloads is five nodes.</span></span> <span data-ttu-id="e5bf6-142">Vi stöder tre kluster med noder för utveckling och testning scenarier.</span><span class="sxs-lookup"><span data-stu-id="e5bf6-142">For dev/test scenarios, we support three node clusters.</span></span>

<span data-ttu-id="e5bf6-143">Dessa minimivärdena finns eftersom hello Service Fabric-kluster körs en uppsättning med tillståndskänsliga tjänster, inklusive hello namngivningstjänst och hello failover manager.</span><span class="sxs-lookup"><span data-stu-id="e5bf6-143">These minimums exist because hello Service Fabric cluster runs a set of stateful system services, including hello naming service and hello failover manager.</span></span> <span data-ttu-id="e5bf6-144">Dessa tjänster, som spårar vad tjänster har distribuerats toohello klustret och där de för närvarande är värd, är beroende av stark konsekvens.</span><span class="sxs-lookup"><span data-stu-id="e5bf6-144">These services, which track what services have been deployed toohello cluster and where they're currently hosted, depend on strong consistency.</span></span> <span data-ttu-id="e5bf6-145">Det stark konsekvent i sin tur är beroende av hello möjlighet tooacquire en *kvorum* för en viss uppdatering toohello läget för dessa tjänster, där ett kvorum representerar en strikt majoritet av replikerna hello (N/2 + 1) för en viss tjänst.</span><span class="sxs-lookup"><span data-stu-id="e5bf6-145">That strong consistency, in turn, depends on hello ability tooacquire a *quorum* for any given update toohello state of those services, where a quorum represents a strict majority of hello replicas (N/2 +1) for a given service.</span></span>

<span data-ttu-id="e5bf6-146">Med den bakgrunden, låt oss nu undersöka vissa klusterkonfigurationer som möjligt:</span><span class="sxs-lookup"><span data-stu-id="e5bf6-146">With that background, let's examine some possible cluster configurations:</span></span>

<span data-ttu-id="e5bf6-147">**En nod**: det här alternativet inte ge hög tillgänglighet eftersom hello förlust av hello nod av någon anledning innebär hello förlust av hello hela klustret.</span><span class="sxs-lookup"><span data-stu-id="e5bf6-147">**One node**: this option does not provide high availability since hello loss of hello single node for any reason means hello loss of hello entire cluster.</span></span>

<span data-ttu-id="e5bf6-148">**Två noder**: ett kvorum för en tjänst som distribuerats på två noder (N = 2) är 2 (2/2 + 1 = 2).</span><span class="sxs-lookup"><span data-stu-id="e5bf6-148">**Two nodes**: a quorum for a service deployed across two nodes (N = 2) is 2 (2/2 + 1 = 2).</span></span> <span data-ttu-id="e5bf6-149">När en enskild replik tappas bort, är det omöjligt toocreate ett kvorum.</span><span class="sxs-lookup"><span data-stu-id="e5bf6-149">When a single replica is lost, it is impossible toocreate a quorum.</span></span> <span data-ttu-id="e5bf6-150">Eftersom en tjänsteuppgradering pågår kräver att tillfälligt stoppa en replik, men detta är inte en användbar konfiguration.</span><span class="sxs-lookup"><span data-stu-id="e5bf6-150">Since performing a service upgrade requires temporarily taking down a replica, this is not a useful configuration.</span></span>

<span data-ttu-id="e5bf6-151">**Tre noder**: med tre noder (N = 3), hello krav toocreate ett kvorum är fortfarande två noder (3/2 + 1 = 2).</span><span class="sxs-lookup"><span data-stu-id="e5bf6-151">**Three nodes**: with three nodes (N=3), hello requirement toocreate a quorum is still two nodes (3/2 + 1 = 2).</span></span> <span data-ttu-id="e5bf6-152">Det innebär att du förlorar en enskild nod och ändå upprätthålla kvorum.</span><span class="sxs-lookup"><span data-stu-id="e5bf6-152">This means that you can lose an individual node and still maintain quorum.</span></span>

<span data-ttu-id="e5bf6-153">hello tre nod klusterkonfigurationen stöds för utveckling och testning eftersom du på ett säkert sätt kan utföra uppgraderingar och överleva fel på enskilda noder, så länge som de inte råkar samtidigt.</span><span class="sxs-lookup"><span data-stu-id="e5bf6-153">hello three node cluster configuration is supported for dev/test because you can safely perform upgrades and survive individual node failures, as long as they don't happen simultaneously.</span></span> <span data-ttu-id="e5bf6-154">Du måste vara flexibel toosuch ett samtidigt fel så fem noder krävs för produktionsarbetsbelastningar.</span><span class="sxs-lookup"><span data-stu-id="e5bf6-154">For production workloads, you must be resilient toosuch a simultaneous failure, so five nodes are required.</span></span>

### <a name="can-i-turn-off-my-cluster-at-nightweekends-toosave-costs"></a><span data-ttu-id="e5bf6-155">Kan jag inaktivera min klustret på natten/helger toosave kostnader?</span><span class="sxs-lookup"><span data-stu-id="e5bf6-155">Can I turn off my cluster at night/weekends toosave costs?</span></span>

<span data-ttu-id="e5bf6-156">I allmänhet inte.</span><span class="sxs-lookup"><span data-stu-id="e5bf6-156">In general, no.</span></span> <span data-ttu-id="e5bf6-157">Service Fabric lagrar tillstånd på lokala tillfälliga diskar, vilket innebär att om hello virtuell dator har flyttats tooa olika värden, inte flyttar hello data med den.</span><span class="sxs-lookup"><span data-stu-id="e5bf6-157">Service Fabric stores state on local, ephemeral disks, meaning that if hello virtual machine is moved tooa different host, hello data does not move with it.</span></span> <span data-ttu-id="e5bf6-158">Under normal drift som är inte ett problem som hello nya noden tas upp toodate av andra noder.</span><span class="sxs-lookup"><span data-stu-id="e5bf6-158">In normal operation, that is not a problem as hello new node is brought up toodate by other nodes.</span></span> <span data-ttu-id="e5bf6-159">Om du stoppar alla noder och starta om dem senare, finns det dock en betydande risk för att de flesta av hello noder starta på nya värdar och göra hello system toorecover.</span><span class="sxs-lookup"><span data-stu-id="e5bf6-159">However, if you stop all nodes and restart them later, there is a significant possibility that most of hello nodes start on new hosts and make hello system unable toorecover.</span></span>

<span data-ttu-id="e5bf6-160">Om du vill att toocreate kluster för att testa programmet innan det distribueras, rekommenderar vi att du skapar dessa kluster dynamiskt som en del av din [kontinuerlig integration/kontinuerlig distribution pipeline](service-fabric-set-up-continuous-integration.md).</span><span class="sxs-lookup"><span data-stu-id="e5bf6-160">If you would like toocreate clusters for testing your application before it is deployed, we recommend that you dynamically create those clusters as part of your [continuous integration/continuous deployment pipeline](service-fabric-set-up-continuous-integration.md).</span></span>


### <a name="how-do-i-upgrade-my-operating-system-for-example-from-windows-server-2012-toowindows-server-2016"></a><span data-ttu-id="e5bf6-161">Hur uppgraderar jag mitt operativsystem (till exempel från Windows Server 2012 tooWindows Server 2016)?</span><span class="sxs-lookup"><span data-stu-id="e5bf6-161">How do I upgrade my Operating System (for example from Windows Server 2012 tooWindows Server 2016)?</span></span>

<span data-ttu-id="e5bf6-162">Du är ansvarig för hello uppgraderingen medan vi arbetar på en bättre upplevelse idag.</span><span class="sxs-lookup"><span data-stu-id="e5bf6-162">While we're working on an improved experience, today, you are responsible for hello upgrade.</span></span> <span data-ttu-id="e5bf6-163">Du måste uppgradera hello OS-avbildningen på hello virtuella datorer på hello kluster en virtuell dator i taget.</span><span class="sxs-lookup"><span data-stu-id="e5bf6-163">You must upgrade hello OS image on hello virtual machines of hello cluster one VM at a time.</span></span> 

## <a name="container-support"></a><span data-ttu-id="e5bf6-164">Stöd för behållaren</span><span class="sxs-lookup"><span data-stu-id="e5bf6-164">Container Support</span></span>

### <a name="why-are-my-containers-that-are-deployed-toosf-unable-tooresolve-dns-addresses"></a><span data-ttu-id="e5bf6-165">Varför är min behållare som är distribuerade tooSF tooresolve DNS-adresser?</span><span class="sxs-lookup"><span data-stu-id="e5bf6-165">Why are my containers that are deployed tooSF unable tooresolve DNS addresses?</span></span>

<span data-ttu-id="e5bf6-166">Det här problemet har rapporterats på kluster som finns på 5.6.204.9494 version</span><span class="sxs-lookup"><span data-stu-id="e5bf6-166">This issue has been reported on clusters that are on 5.6.204.9494 version</span></span> 

<span data-ttu-id="e5bf6-167">**Minskning** : Följ [dokumentet](service-fabric-dnsservice.md) tooenable hello DNS service fabrikstjänsten i klustret.</span><span class="sxs-lookup"><span data-stu-id="e5bf6-167">**Mitigation** :  Follow [this document](service-fabric-dnsservice.md) tooenable hello DNS service fabric service in your cluster.</span></span>

<span data-ttu-id="e5bf6-168">**Åtgärda** : uppgradera tooa stöds kluster av version som är högre än 5.6.204.9494, när den är tillgänglig.</span><span class="sxs-lookup"><span data-stu-id="e5bf6-168">**Fix** :  Upgrade tooa supported cluster version that is higher than 5.6.204.9494, when it is available.</span></span> <span data-ttu-id="e5bf6-169">Om klustret är tooautomatic uppgraderingar, uppgraderar toohello-version som har problemet lösts automatiskt i hello klustret.</span><span class="sxs-lookup"><span data-stu-id="e5bf6-169">If your cluster is set tooautomatic upgrades, then hello cluster will automatically upgrade toohello version that has this issue fixed.</span></span>

  
## <a name="application-design"></a><span data-ttu-id="e5bf6-170">Programmet Design</span><span class="sxs-lookup"><span data-stu-id="e5bf6-170">Application Design</span></span>

### <a name="whats-hello-best-way-tooquery-data-across-partitions-of-a-reliable-collection"></a><span data-ttu-id="e5bf6-171">Vad är hello bästa sätt tooquery data mellan partitioner i en tillförlitlig samling?</span><span class="sxs-lookup"><span data-stu-id="e5bf6-171">What's hello best way tooquery data across partitions of a Reliable Collection?</span></span>

<span data-ttu-id="e5bf6-172">Tillförlitliga samlingar är vanligtvis [partitionerade](service-fabric-concepts-partitioning.md) tooenable skala ut för bättre prestanda och genomflöde.</span><span class="sxs-lookup"><span data-stu-id="e5bf6-172">Reliable collections are typically [partitioned](service-fabric-concepts-partitioning.md) tooenable scale out for greater performance and throughput.</span></span> <span data-ttu-id="e5bf6-173">Det innebär att hello tillstånd för en viss tjänst kan spridas över 10-tal eller 100-tal datorer.</span><span class="sxs-lookup"><span data-stu-id="e5bf6-173">That means that hello state for a given service may be spread across 10s or 100s of machines.</span></span> <span data-ttu-id="e5bf6-174">tooperform åtgärder via den fullständiga datauppsättningen, har du några alternativ:</span><span class="sxs-lookup"><span data-stu-id="e5bf6-174">tooperform operations over that full data set, you have a few options:</span></span>

- <span data-ttu-id="e5bf6-175">Skapa en tjänst som frågar alla partitioner i en annan tjänst toopull i hello nödvändiga data.</span><span class="sxs-lookup"><span data-stu-id="e5bf6-175">Create a service that queries all partitions of another service toopull in hello required data.</span></span>
- <span data-ttu-id="e5bf6-176">Skapa en tjänst som kan ta emot data från alla partitioner i en annan tjänst.</span><span class="sxs-lookup"><span data-stu-id="e5bf6-176">Create a service that can receive data from all partitions of another service.</span></span>
- <span data-ttu-id="e5bf6-177">Med jämna mellanrum skicka data från varje tjänst tooan extern butik.</span><span class="sxs-lookup"><span data-stu-id="e5bf6-177">Periodically push data from each service tooan external store.</span></span> <span data-ttu-id="e5bf6-178">Den här metoden är endast korrekt om hello frågor som du utför inte är en del av affärslogiken kärnor.</span><span class="sxs-lookup"><span data-stu-id="e5bf6-178">This approach is only appropriate if hello queries you're performing are not part of your core business logic.</span></span>


### <a name="whats-hello-best-way-tooquery-data-across-my-actors"></a><span data-ttu-id="e5bf6-179">Vad är hello bästa sätt tooquery data över min aktörer?</span><span class="sxs-lookup"><span data-stu-id="e5bf6-179">What's hello best way tooquery data across my actors?</span></span>

<span data-ttu-id="e5bf6-180">Aktörer är utformad toobe oberoende enheter av tillstånd och beräkning, så det inte är rekommenderade tooperform bred frågor för aktörstillstånd vid körning.</span><span class="sxs-lookup"><span data-stu-id="e5bf6-180">Actors are designed toobe independent units of state and compute, so it is not recommended tooperform broad queries of actor state at runtime.</span></span> <span data-ttu-id="e5bf6-181">Om du har en behovet tooquery över hello fullständig uppsättning aktörstillstånd bör du antingen:</span><span class="sxs-lookup"><span data-stu-id="e5bf6-181">If you have a need tooquery across hello full set of actor state, you should consider either:</span></span>

- <span data-ttu-id="e5bf6-182">Ersätt din aktörstjänster med tillståndskänsliga reliable services så att hello antal nätverk begäranden toogather alla data från hello antal aktörer toohello antalet partitioner i din tjänst.</span><span class="sxs-lookup"><span data-stu-id="e5bf6-182">Replacing your actor services with stateful reliable services, such that hello number of network requests toogather all data from hello number of actors toohello number of partitions in your service.</span></span>
- <span data-ttu-id="e5bf6-183">Designa din aktörer tooperiodically push sina tooan externa tillståndslager för enklare frågor.</span><span class="sxs-lookup"><span data-stu-id="e5bf6-183">Designing your actors tooperiodically push their state tooan external store for easier querying.</span></span> <span data-ttu-id="e5bf6-184">Som är ovan, denna metod bara användbara om hello frågor som du utför inte krävs för din runtime-beteende.</span><span class="sxs-lookup"><span data-stu-id="e5bf6-184">As above, this approach is only viable if hello queries you're performing are not required for your runtime behavior.</span></span>

### <a name="how-much-data-can-i-store-in-a-reliable-collection"></a><span data-ttu-id="e5bf6-185">Hur mycket data som kan lagra i en tillförlitlig samling?</span><span class="sxs-lookup"><span data-stu-id="e5bf6-185">How much data can I store in a Reliable Collection?</span></span>

<span data-ttu-id="e5bf6-186">Reliable services partitioneras vanligtvis, så hello belopp som du kan lagra begränsas bara av hello antalet datorer som du har i hello kluster och hello mängden tillgängligt minne på dessa datorer.</span><span class="sxs-lookup"><span data-stu-id="e5bf6-186">Reliable services are typically partitioned, so hello amount you can store is only limited by hello number of machines you have in hello cluster, and hello amount of memory available on those machines.</span></span>

<span data-ttu-id="e5bf6-187">Ett exempel anta att du har en tillförlitlig samling i en tjänst med 100 partitioner och 3 repliker, lagra objekt som genomsnittlig storlek på 1kb.</span><span class="sxs-lookup"><span data-stu-id="e5bf6-187">As an example, suppose that you have a reliable collection in a service with 100 partitions and 3 replicas, storing objects that average 1kb in size.</span></span> <span data-ttu-id="e5bf6-188">Anta att du har ett 10 datorn kluster med 16gb minne per dator.</span><span class="sxs-lookup"><span data-stu-id="e5bf6-188">Now suppose that you have a 10 machine cluster with 16gb of memory per machine.</span></span> <span data-ttu-id="e5bf6-189">För enkelhetens skull toobe mycket försiktig förutsätter att hello operativsystem och systemtjänster hello Service Fabric runtime och dina tjänster använder 6gb, lämnar 10gb tillgängligt per dator eller 100gb för hello-kluster.</span><span class="sxs-lookup"><span data-stu-id="e5bf6-189">For simplicity and toobe very conservative, assume that hello operating system and system services, hello Service Fabric runtime, and your services consume 6gb of that, leaving 10gb available per machine, or 100gb for hello cluster.</span></span>

<span data-ttu-id="e5bf6-190">Med tanke på att varje objekt måste vara lagrade tre gånger (en primär och två repliker), har du tillräckligt med minne för ungefär 35 miljoner objekt i samlingen när du arbetar med full kapacitet.</span><span class="sxs-lookup"><span data-stu-id="e5bf6-190">Keeping in mind that each object must be stored three times (one primary and two replicas), you would have sufficient memory for approximately 35 million objects in your collection when operating at full capacity.</span></span> <span data-ttu-id="e5bf6-191">Vi rekommenderar dock att flexibel toohello samtidiga förlust av en fel-domän och en uppgraderingsdomän som representerar ungefär 1/3 av kapacitet och skulle minska hello nummer tooroughly 23 miljoner.</span><span class="sxs-lookup"><span data-stu-id="e5bf6-191">However, we recommend being resilient toohello simultaneous loss of a failure domain and an upgrade domain, which represents about 1/3 of capacity, and would reduce hello number tooroughly 23 million.</span></span>

<span data-ttu-id="e5bf6-192">Observera att den här beräkningen förutsätter också:</span><span class="sxs-lookup"><span data-stu-id="e5bf6-192">Note that this calculation also assumes:</span></span>

- <span data-ttu-id="e5bf6-193">Att hello fördelning av data mellan hello partitioner är ungefär uniform eller att du rapporterar belastningen mått toohello klustret Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="e5bf6-193">That hello distribution of data across hello partitions is roughly uniform or that you're reporting load metrics toohello Cluster Resource Manager.</span></span> <span data-ttu-id="e5bf6-194">Som standard kommer Service Fabric belastningsutjämna baserat på replikantalet.</span><span class="sxs-lookup"><span data-stu-id="e5bf6-194">By default, Service Fabric will load balance based on replica count.</span></span> <span data-ttu-id="e5bf6-195">I vårt exempel som placerar 10 primära repliker och 20 sekundära repliker på varje nod i klustret hello.</span><span class="sxs-lookup"><span data-stu-id="e5bf6-195">In our example above, that would put 10 primary replicas and 20 secondary replicas on each node in hello cluster.</span></span> <span data-ttu-id="e5bf6-196">Som fungerar bra för belastningen jämnt fördelad över hello partitioner.</span><span class="sxs-lookup"><span data-stu-id="e5bf6-196">That works well for load that is evenly distributed across hello partitions.</span></span> <span data-ttu-id="e5bf6-197">Om belastningen inte är ENS, måste du rapportera belastning så att hello Resource Manager kan packa ihop mindre repliker och Tillåt större repliker tooconsume mer minne på en enskild nod.</span><span class="sxs-lookup"><span data-stu-id="e5bf6-197">If load is not even, you must report load so that hello Resource Manager can pack smaller replicas together and allow larger replicas tooconsume more memory on an individual node.</span></span>

- <span data-ttu-id="e5bf6-198">Hello tillförlitliga tjänsten i fråga är hello status för en enda lagring i hello kluster.</span><span class="sxs-lookup"><span data-stu-id="e5bf6-198">That hello reliable service in question is hello only one storing state in hello cluster.</span></span> <span data-ttu-id="e5bf6-199">Eftersom du kan distribuera flera tjänster tooa klustret måste toobe uppmärksam på hello resurser att varje måste toorun och hantera dess tillstånd.</span><span class="sxs-lookup"><span data-stu-id="e5bf6-199">Since you can deploy multiple services tooa cluster, you need toobe mindful of hello resources that each will need toorun and manage its state.</span></span>

- <span data-ttu-id="e5bf6-200">Hello klustret själva är inte växer eller krymper.</span><span class="sxs-lookup"><span data-stu-id="e5bf6-200">That hello cluster itself is not growing or shrinking.</span></span> <span data-ttu-id="e5bf6-201">Om du lägger till flera datorer balansera Service Fabric din ytterligare kapacitet för repliker tooleverage hello tills hello antalet datorer överskrider hello antalet partitioner i tjänsten, eftersom datorer inte kan finnas på en enskild replik.</span><span class="sxs-lookup"><span data-stu-id="e5bf6-201">If you add more machines, Service Fabric will rebalance your replicas tooleverage hello additional capacity until hello number of machines surpasses hello number of partitions in your service, since an individual replica cannot span machines.</span></span> <span data-ttu-id="e5bf6-202">Däremot om du minskar hello storleken på hello kluster genom att ta bort datorer repliker packade tätare och har mindre totala kapaciteten.</span><span class="sxs-lookup"><span data-stu-id="e5bf6-202">By contrast, if you reduce hello size of hello cluster by removing machines, your replicas will be packed more tightly and have less overall capacity.</span></span>

### <a name="how-much-data-can-i-store-in-an-actor"></a><span data-ttu-id="e5bf6-203">Hur mycket data som kan lagra i en aktör?</span><span class="sxs-lookup"><span data-stu-id="e5bf6-203">How much data can I store in an actor?</span></span>

<span data-ttu-id="e5bf6-204">Precis som med tillförlitlig services är hello mängden data som du kan lagra i en aktören tjänst begränsas bara av hello totalt diskutrymme och tillgängligt minne över hello noder i klustret.</span><span class="sxs-lookup"><span data-stu-id="e5bf6-204">As with reliable services, hello amount of data that you can store in an actor service is only limited by hello total disk space and memory available across hello nodes in your cluster.</span></span> <span data-ttu-id="e5bf6-205">Enskilda aktörer är mest effektiva när de används tooencapsulate en liten mängd tillstånd och associerade affärslogik.</span><span class="sxs-lookup"><span data-stu-id="e5bf6-205">However, individual actors are most effective when they are used tooencapsulate a small amount of state and associated business logic.</span></span> <span data-ttu-id="e5bf6-206">Som regel bör en enskild aktör har tillstånd som mäts i kilobyte.</span><span class="sxs-lookup"><span data-stu-id="e5bf6-206">As a general rule, an individual actor should have state that is measured in kilobytes.</span></span>

## <a name="other-questions"></a><span data-ttu-id="e5bf6-207">Andra frågor</span><span class="sxs-lookup"><span data-stu-id="e5bf6-207">Other questions</span></span>

### <a name="how-does-service-fabric-relate-toocontainers"></a><span data-ttu-id="e5bf6-208">Hur relaterar Service Fabric toocontainers?</span><span class="sxs-lookup"><span data-stu-id="e5bf6-208">How does Service Fabric relate toocontainers?</span></span>

<span data-ttu-id="e5bf6-209">Behållare erbjuder ett enkelt sätt toopackage tjänster och deras beroenden så att de kör konsekvent i alla miljöer och kan fungera i isolerat läge på en enskild dator.</span><span class="sxs-lookup"><span data-stu-id="e5bf6-209">Containers offer a simple way toopackage services and their dependencies such that they run consistently in all environments and can operate in an isolated fashion on a single machine.</span></span> <span data-ttu-id="e5bf6-210">Service Fabric erbjuder ett sätt toodeploy och hantera tjänster, inklusive [tjänster som har paketerats i en behållare](service-fabric-containers-overview.md).</span><span class="sxs-lookup"><span data-stu-id="e5bf6-210">Service Fabric offers a way toodeploy and manage services, including [services that have been packaged in a container](service-fabric-containers-overview.md).</span></span>

### <a name="are-you-planning-tooopen-source-service-fabric"></a><span data-ttu-id="e5bf6-211">Planerar du tooopen källa Service Fabric?</span><span class="sxs-lookup"><span data-stu-id="e5bf6-211">Are you planning tooopen source Service Fabric?</span></span>

<span data-ttu-id="e5bf6-212">Vi planerar tooopen källa hello tillförlitliga tjänster och tillförlitlig aktörer ramverk på GitHub och accepterar community bidrag toothose projekt.</span><span class="sxs-lookup"><span data-stu-id="e5bf6-212">We intend tooopen source hello reliable services and reliable actors frameworks on GitHub and will accept community contributions toothose projects.</span></span> <span data-ttu-id="e5bf6-213">Följ hello [Service Fabric-blogg](https://blogs.msdn.microsoft.com/azureservicefabric/) för mer information som de är tillkännages.</span><span class="sxs-lookup"><span data-stu-id="e5bf6-213">Please follow hello [Service Fabric blog](https://blogs.msdn.microsoft.com/azureservicefabric/) for more details as they're announced.</span></span>

<span data-ttu-id="e5bf6-214">hello finns för närvarande inga planer tooopen källa hello Service Fabric runtime.</span><span class="sxs-lookup"><span data-stu-id="e5bf6-214">hello are currently no plans tooopen source hello Service Fabric runtime.</span></span>

## <a name="next-steps"></a><span data-ttu-id="e5bf6-215">Nästa steg</span><span class="sxs-lookup"><span data-stu-id="e5bf6-215">Next steps</span></span>

- [<span data-ttu-id="e5bf6-216">Lär dig mer om grundläggande begrepp som Service Fabric och bästa praxis</span><span class="sxs-lookup"><span data-stu-id="e5bf6-216">Learn about core Service Fabric concepts and best practices</span></span>](https://mva.microsoft.com/en-us/training-courses/building-microservices-applications-on-azure-service-fabric-16747?l=tbuZM46yC_5206218965)

---
title: aaaArchitecture av Azure Service Fabric | Microsoft Docs
description: "Service Fabric är en plattform för distribuerade system används toobuild skalbar, tillförlitlig och enkelt hanteras program för hello molnet. Den här artikeln visar hello arkitektur för Service Fabric."
services: service-fabric
documentationcenter: .net
author: rishirsinha
manager: timlt
editor: rishirsinha
ms.assetid: 6b554243-70cb-4c22-9b28-1a8b4703f45e
ms.service: service-fabric
ms.devlang: dotnet
ms.topic: article
ms.tgt_pltfrm: NA
ms.workload: NA
ms.date: 04/19/2017
ms.author: rsinha
ms.openlocfilehash: 0268578094ad1a0010ef44ed940f828b985f6c40
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: sv-SE
ms.lasthandoff: 10/06/2017
---
# <a name="service-fabric-architecture"></a><span data-ttu-id="47fbb-104">Arkitektur för Service Fabric</span><span class="sxs-lookup"><span data-stu-id="47fbb-104">Service Fabric architecture</span></span>
<span data-ttu-id="47fbb-105">Service Fabric bygger med överlappande undersystem.</span><span class="sxs-lookup"><span data-stu-id="47fbb-105">Service Fabric is built with layered subsystems.</span></span> <span data-ttu-id="47fbb-106">Dessa delsystem aktivera toowrite program som är:</span><span class="sxs-lookup"><span data-stu-id="47fbb-106">These subsystems enable you toowrite applications that are:</span></span>

* <span data-ttu-id="47fbb-107">Hög tillgänglighet</span><span class="sxs-lookup"><span data-stu-id="47fbb-107">Highly available</span></span>
* <span data-ttu-id="47fbb-108">Skalbar</span><span class="sxs-lookup"><span data-stu-id="47fbb-108">Scalable</span></span>
* <span data-ttu-id="47fbb-109">Hanterbara</span><span class="sxs-lookup"><span data-stu-id="47fbb-109">Manageable</span></span>
* <span data-ttu-id="47fbb-110">Kan testas</span><span class="sxs-lookup"><span data-stu-id="47fbb-110">Testable</span></span>

<span data-ttu-id="47fbb-111">hello följande diagram visar hello viktiga undersystem för Service Fabric.</span><span class="sxs-lookup"><span data-stu-id="47fbb-111">hello following diagram shows hello major subsystems of Service Fabric.</span></span>

![Diagram över Service Fabric-arkitektur](media/service-fabric-architecture/service-fabric-architecture.png)

<span data-ttu-id="47fbb-113">I ett distribuerat system hello möjlighet toosecurely kommunicera mellan noder i ett kluster är avgörande.</span><span class="sxs-lookup"><span data-stu-id="47fbb-113">In a distributed system, hello ability toosecurely communicate between nodes in a cluster is crucial.</span></span> <span data-ttu-id="47fbb-114">Vid hello är basen för hello stack hello transport undersystem som tillhandahåller säker kommunikation mellan noder.</span><span class="sxs-lookup"><span data-stu-id="47fbb-114">At hello base of hello stack is hello transport subsystem, which provides secure communication between nodes.</span></span> <span data-ttu-id="47fbb-115">Undersystemet ligger ovanför hello transport hello federation undersystemet, vilka kluster hello olika noder i en enda entitet (kallas kluster) så att Service Fabric kan identifiera fel, utföra ledande val och ger konsekvent routning.</span><span class="sxs-lookup"><span data-stu-id="47fbb-115">Above hello transport subsystem lies hello federation subsystem, which clusters hello different nodes into a single entity (named clusters) so that Service Fabric can detect failures, perform leader election, and provide consistent routing.</span></span> <span data-ttu-id="47fbb-116">hello tillförlitlighet-undersystemet lager ovanpå hello federation undersystemet ansvarar för hello tillförlitlighet för Service Fabric-tjänster genom mekanismer som replikering, resurshantering och växling vid fel.</span><span class="sxs-lookup"><span data-stu-id="47fbb-116">hello reliability subsystem, layered on top of hello federation subsystem, is responsible for hello reliability of Service Fabric services through mechanisms such as replication, resource management, and failover.</span></span> <span data-ttu-id="47fbb-117">hello federation undersystemet för också hello värd och aktivering undersystemet hanterar hello livscykeln för ett program på en enda nod.</span><span class="sxs-lookup"><span data-stu-id="47fbb-117">hello federation subsystem also underlies hello hosting and activation subsystem, which manages hello lifecycle of an application on a single node.</span></span> <span data-ttu-id="47fbb-118">hello undersystem för nätverkshantering hanterar hello livscykeln för program och tjänster.</span><span class="sxs-lookup"><span data-stu-id="47fbb-118">hello management subsystem manages hello lifecycle of applications and services.</span></span> <span data-ttu-id="47fbb-119">hello datatillgång undersystemet hjälper programutvecklare testa sina tjänster via simulerade fel före och efter distribution av program och tjänster tooproduction miljöer.</span><span class="sxs-lookup"><span data-stu-id="47fbb-119">hello testability subsystem helps application developers test their services through simulated faults before and after deploying applications and services tooproduction environments.</span></span> <span data-ttu-id="47fbb-120">Service Fabric ger hello möjlighet tooresolve service-platser via dess undersystemet för kommunikation.</span><span class="sxs-lookup"><span data-stu-id="47fbb-120">Service Fabric provides hello ability tooresolve service locations through its communication subsystem.</span></span> <span data-ttu-id="47fbb-121">Hej programmet programmeringsmodeller exponerade toodevelopers läggs ovanpå dessa delsystem tillsammans med hello programmet modellen tooenable verktygsuppsättning.</span><span class="sxs-lookup"><span data-stu-id="47fbb-121">hello application programming models exposed toodevelopers are layered on top of these subsystems along with hello application model tooenable tooling.</span></span>

## <a name="transport-subsystem"></a><span data-ttu-id="47fbb-122">Transport-undersystemet</span><span class="sxs-lookup"><span data-stu-id="47fbb-122">Transport subsystem</span></span>
<span data-ttu-id="47fbb-123">hello transport undersystemet implementerar en point-to-point datagram kommunikationskanal.</span><span class="sxs-lookup"><span data-stu-id="47fbb-123">hello transport subsystem implements a point-to-point datagram communication channel.</span></span> <span data-ttu-id="47fbb-124">Den här kanalen används för kommunikation inom service fabric-kluster och kommunikation mellan hello service fabric-kluster och klienter.</span><span class="sxs-lookup"><span data-stu-id="47fbb-124">This channel is used for communication within service fabric clusters and communication between hello service fabric cluster and clients.</span></span> <span data-ttu-id="47fbb-125">Den stöder enkelriktade och request-reply-kommunikationsmönster som ger hello grunden för att implementera broadcast och multicast i hello Federation lager.</span><span class="sxs-lookup"><span data-stu-id="47fbb-125">It supports one-way and request-reply communication patterns, which provides hello basis for implementing broadcast and multicast in hello Federation layer.</span></span> <span data-ttu-id="47fbb-126">hello transport undersystemet skyddar kommunikation med hjälp av X509 certifikat eller Windows-säkerhet.</span><span class="sxs-lookup"><span data-stu-id="47fbb-126">hello transport subsystem secures communication by using X509 certificates or Windows security.</span></span> <span data-ttu-id="47fbb-127">Den här undersystemet används internt av Service Fabric och är inte tillgänglig direkt toodevelopers för programmering.</span><span class="sxs-lookup"><span data-stu-id="47fbb-127">This subsystem is used internally by Service Fabric and is not directly accessible toodevelopers for application programming.</span></span>

## <a name="federation-subsystem"></a><span data-ttu-id="47fbb-128">Undersystemet för Federation</span><span class="sxs-lookup"><span data-stu-id="47fbb-128">Federation subsystem</span></span>
<span data-ttu-id="47fbb-129">I ordning tooreason om en uppsättning noder i ett distribuerat system behöver du toohave en konsekvent överblick över hello system.</span><span class="sxs-lookup"><span data-stu-id="47fbb-129">In order tooreason about a set of nodes in a distributed system, you need toohave a consistent view of hello system.</span></span> <span data-ttu-id="47fbb-130">hello federation undersystemet använder hello kommunikation primitiver tillhandahålls av hello transport undersystemet maskor hello olika noder i ett enda enhetlig kluster som den kan skäl om.</span><span class="sxs-lookup"><span data-stu-id="47fbb-130">hello federation subsystem uses hello communication primitives provided by hello transport subsystem and stitches hello various nodes into a single unified cluster that it can reason about.</span></span> <span data-ttu-id="47fbb-131">Det ger hello distribuerade system primitiver behövs av hello andra delsystem - felidentifiering ledande val och konsekvent routning.</span><span class="sxs-lookup"><span data-stu-id="47fbb-131">It provides hello distributed systems primitives needed by hello other subsystems - failure detection, leader election, and consistent routing.</span></span> <span data-ttu-id="47fbb-132">hello federation undersystemet bygger på distribuerade hash-tabeller med en 128-bitars token utrymme.</span><span class="sxs-lookup"><span data-stu-id="47fbb-132">hello federation subsystem is built on top of distributed hash tables with a 128-bit token space.</span></span> <span data-ttu-id="47fbb-133">hello undersystemet skapar en ringtopologi över hello noder, med varje nod i hello ring som har tilldelats en delmängd av hello token utrymme för ägarskap.</span><span class="sxs-lookup"><span data-stu-id="47fbb-133">hello subsystem creates a ring topology over hello nodes, with each node in hello ring being allocated a subset of hello token space for ownership.</span></span> <span data-ttu-id="47fbb-134">För felidentifiering använder hello layer en leasingmekanism baserat på hjärta beating och skiljedom.</span><span class="sxs-lookup"><span data-stu-id="47fbb-134">For failure detection, hello layer uses a leasing mechanism based on heart beating and arbitration.</span></span> <span data-ttu-id="47fbb-135">hello federation undersystemet garanterar även via invecklade koppling och avvikelse protokoll som en enda ägare av en token finns när som helst.</span><span class="sxs-lookup"><span data-stu-id="47fbb-135">hello federation subsystem also guarantees through intricate join and departure protocols that only a single owner of a token exists at any time.</span></span> <span data-ttu-id="47fbb-136">Detta ger ledande val och konsekvent routning garantier.</span><span class="sxs-lookup"><span data-stu-id="47fbb-136">This provides leader election and consistent routing guarantees.</span></span>

## <a name="reliability-subsystem"></a><span data-ttu-id="47fbb-137">Tillförlitlighet undersystemet</span><span class="sxs-lookup"><span data-stu-id="47fbb-137">Reliability subsystem</span></span>
<span data-ttu-id="47fbb-138">hello tillförlitlighet undersystemet innehåller hello mekanism toomake hello tillståndet för en Service Fabric-tjänsten med hög tillgänglighet via hello hello *replikatorn*, *Failover Manager*, och  *Resursutjämnaren*.</span><span class="sxs-lookup"><span data-stu-id="47fbb-138">hello reliability subsystem provides hello mechanism toomake hello state of a Service Fabric service highly available through hello use of hello *Replicator*, *Failover Manager*, and *Resource Balancer*.</span></span>

* <span data-ttu-id="47fbb-139">hello replikatorn garanterar tillståndsändringar i hello primära tjänsten replik kommer automatiskt att replikerade toosecondary repliker, underhålla konsekvensen mellan hello primära och sekundära repliker i en replikuppsättning för tjänsten.</span><span class="sxs-lookup"><span data-stu-id="47fbb-139">hello Replicator ensures that state changes in hello primary service replica will automatically be replicated toosecondary replicas, maintaining consistency between hello primary and secondary replicas in a service replica set.</span></span> <span data-ttu-id="47fbb-140">hello replikatorn är ansvarig för kvorumhantering mellan hello repliker i hello replikuppsättningen.</span><span class="sxs-lookup"><span data-stu-id="47fbb-140">hello replicator is responsible for quorum management among hello replicas in hello replica set.</span></span> <span data-ttu-id="47fbb-141">Den samverkar med hello failover unit tooget hello lista över operations tooreplicate och hello omkonfigurationsagent ger den hello configuration hello replikuppsättningen.</span><span class="sxs-lookup"><span data-stu-id="47fbb-141">It interacts with hello failover unit tooget hello list of operations tooreplicate, and hello reconfiguration agent provides it with hello configuration of hello replica set.</span></span> <span data-ttu-id="47fbb-142">Denna konfiguration anger vilka repliker hello-åtgärder måste toobe replikeras.</span><span class="sxs-lookup"><span data-stu-id="47fbb-142">That configuration indicates which replicas hello operations need toobe replicated.</span></span> <span data-ttu-id="47fbb-143">Service Fabric tillhandahåller en standard replikatorn kallas Fabric replikatorn som kan användas av hello programming modellen API toomake hello Tjänststatus hög tillgänglighet och tillförlitlig.</span><span class="sxs-lookup"><span data-stu-id="47fbb-143">Service Fabric provides a default replicator called Fabric Replicator, which can be used by hello programming model API toomake hello service state highly available and reliable.</span></span>
* <span data-ttu-id="47fbb-144">hello Failover Manager säkerställer att när noder läggs tooor bort från hello kluster, hello distribueras belastningen över hello tillgängliga noder.</span><span class="sxs-lookup"><span data-stu-id="47fbb-144">hello Failover Manager ensures that when nodes are added tooor removed from hello cluster, hello load is automatically redistributed across hello available nodes.</span></span> <span data-ttu-id="47fbb-145">Om en nod i klustret hello misslyckas hello klustret automatiskt att konfigurera om hello tjänsttillgänglighet repliker toomaintain.</span><span class="sxs-lookup"><span data-stu-id="47fbb-145">If a node in hello cluster fails, hello cluster will automatically reconfigure hello service replicas toomaintain availability.</span></span>
* <span data-ttu-id="47fbb-146">hello Resource Manager placerar service repliker över fel domän i hello kluster och ser till att alla redundansenheter är fungerar.</span><span class="sxs-lookup"><span data-stu-id="47fbb-146">hello Resource Manager places service replicas across failure domain in hello cluster and ensures that all failover units are operational.</span></span> <span data-ttu-id="47fbb-147">hello Resource Manager balanserar också serviceresurser över hello underliggande delad pool av klustret noder tooachieve optimala uniform belastningsdistribution.</span><span class="sxs-lookup"><span data-stu-id="47fbb-147">hello Resource Manager also balances service resources across hello underlying shared pool of cluster nodes tooachieve optimal uniform load distribution.</span></span>

## <a name="management-subsystem"></a><span data-ttu-id="47fbb-148">Undersystem för nätverkshantering</span><span class="sxs-lookup"><span data-stu-id="47fbb-148">Management subsystem</span></span>
<span data-ttu-id="47fbb-149">hello undersystem för nätverkshantering ger slutpunkt till slutpunkt-tjänsten och Livscykelhantering för programmet.</span><span class="sxs-lookup"><span data-stu-id="47fbb-149">hello management subsystem provides end-to-end service and application lifecycle management.</span></span> <span data-ttu-id="47fbb-150">PowerShell-cmdlets och administrativa API: er kan du tooprovision, distribuera, korrigering, uppgraderar och avetablera program utan förlust av tillgänglighet.</span><span class="sxs-lookup"><span data-stu-id="47fbb-150">PowerShell cmdlets and administrative APIs enable you tooprovision, deploy, patch, upgrade, and de-provision applications without loss of availability.</span></span> <span data-ttu-id="47fbb-151">hello undersystem för nätverkshantering utför via hello följande tjänster.</span><span class="sxs-lookup"><span data-stu-id="47fbb-151">hello management subsystem performs this through hello following services.</span></span>

* <span data-ttu-id="47fbb-152">**Klusterhanterare**: Detta är primär hello-tjänst som interagerar med hello Failover Manager från tillförlitlighet tooplace hello program på hello noder baserat på hello placeringsbegränsningar för tjänsten.</span><span class="sxs-lookup"><span data-stu-id="47fbb-152">**Cluster Manager**: This is hello primary service that interacts with hello Failover Manager from reliability tooplace hello applications on hello nodes based on hello service placement constraints.</span></span> <span data-ttu-id="47fbb-153">hello Resource Manager i redundans undersystemet säkerställer att hello begränsningar aldrig är bruten.</span><span class="sxs-lookup"><span data-stu-id="47fbb-153">hello Resource Manager in failover subsystem ensures that hello constraints are never broken.</span></span> <span data-ttu-id="47fbb-154">hello Klusterhanterare hanterar hello livscykeln för hello program från etablera toode-provision.</span><span class="sxs-lookup"><span data-stu-id="47fbb-154">hello cluster manager manages hello lifecycle of hello applications from provision toode-provision.</span></span> <span data-ttu-id="47fbb-155">Den kan integreras med hello health manager tooensure att programmets tillgänglighet inte är förlorade ur semantiska hälsa under uppgraderingar.</span><span class="sxs-lookup"><span data-stu-id="47fbb-155">It integrates with hello health manager tooensure that application availability is not lost from a semantic health perspective during upgrades.</span></span>
* <span data-ttu-id="47fbb-156">**Hälsoindikatorn**: den här tjänsten kan hälsoövervakning av program, tjänster och klustret entiteter.</span><span class="sxs-lookup"><span data-stu-id="47fbb-156">**Health Manager**: This service enables health monitoring of applications, services, and cluster entities.</span></span> <span data-ttu-id="47fbb-157">Kluster-enheter (till exempel noder, partitioner för tjänsten och repliker) kan rapportera hälsoinformation sedan samman till hello centraliserad health store.</span><span class="sxs-lookup"><span data-stu-id="47fbb-157">Cluster entities (such as nodes, service partitions, and replicas) can report health information, which is then aggregated into hello centralized health store.</span></span> <span data-ttu-id="47fbb-158">Den här hälsoinformation ger en övergripande i tidpunkt hälsa ögonblicksbild av hello tjänster och noder som distribueras över flera noder i hello kluster, vilket gör att du tootake eventuella nödvändiga korrigerande åtgärder.</span><span class="sxs-lookup"><span data-stu-id="47fbb-158">This health information provides an overall point-in-time health snapshot of hello services and nodes distributed across multiple nodes in hello cluster, enabling you tootake any needed corrective actions.</span></span> <span data-ttu-id="47fbb-159">Hälsotillstånd frågan API: er kan du tooquery hello hälsa händelser rapporterade toohello hälsa undersystemet.</span><span class="sxs-lookup"><span data-stu-id="47fbb-159">Health query APIs enable you tooquery hello health events reported toohello health subsystem.</span></span> <span data-ttu-id="47fbb-160">hello hälsa API: er returneras hello rådata hälsa data som lagras i hello hälsa lagrar eller hello aggregeras, tolkas hälsa data för ett specifikt kluster-enheten.</span><span class="sxs-lookup"><span data-stu-id="47fbb-160">hello health query APIs return hello raw health data stored in hello health store or hello aggregated, interpreted health data for a specific cluster entity.</span></span>
* <span data-ttu-id="47fbb-161">**Image Store**: den här tjänsten tillhandahåller lagring och distribution av hello binärfiler.</span><span class="sxs-lookup"><span data-stu-id="47fbb-161">**Image Store**: This service provides storage and distribution of hello application binaries.</span></span> <span data-ttu-id="47fbb-162">Den här tjänsten tillhandahåller en enkel distribuerade lagring där hello program är överförda tooand som hämtats från.</span><span class="sxs-lookup"><span data-stu-id="47fbb-162">This service provides a simple distributed file store where hello applications are uploaded tooand downloaded from.</span></span>

## <a name="hosting-subsystem"></a><span data-ttu-id="47fbb-163">Värd för undersystemet</span><span class="sxs-lookup"><span data-stu-id="47fbb-163">Hosting subsystem</span></span>
<span data-ttu-id="47fbb-164">hello Klusterhanterare informerar hello som värd för undersystemet (som körs på varje nod) som underhåller den behöver toomanage för en viss nod.</span><span class="sxs-lookup"><span data-stu-id="47fbb-164">hello cluster manager informs hello hosting subsystem (running on each node) which services it needs toomanage for a particular node.</span></span> <span data-ttu-id="47fbb-165">hello värd undersystemet sedan hanterar hello livscykeln för hello program på noden.</span><span class="sxs-lookup"><span data-stu-id="47fbb-165">hello hosting subsystem then manages hello lifecycle of hello application on that node.</span></span> <span data-ttu-id="47fbb-166">Den samverkar med hello tillförlitlighet komponenter tooensure att hello repliker är på rätt plats och är felfria.</span><span class="sxs-lookup"><span data-stu-id="47fbb-166">It interacts with hello reliability and health components tooensure that hello replicas are properly placed and are healthy.</span></span>

## <a name="communication-subsystem"></a><span data-ttu-id="47fbb-167">Undersystemet för kommunikation</span><span class="sxs-lookup"><span data-stu-id="47fbb-167">Communication subsystem</span></span>
<span data-ttu-id="47fbb-168">Den här undersystemet erbjuder tillförlitlig meddelandehantering inom hello klustret och service discovery via hello Naming service.</span><span class="sxs-lookup"><span data-stu-id="47fbb-168">This subsystem provides reliable messaging within hello cluster and service discovery through hello Naming service.</span></span> <span data-ttu-id="47fbb-169">hello Naming service matchar namnen tooa plats i hello klustret och gör att användare toomanage Tjänstenamn och egenskaper.</span><span class="sxs-lookup"><span data-stu-id="47fbb-169">hello Naming service resolves service names tooa location in hello cluster and enables users toomanage service names and properties.</span></span> <span data-ttu-id="47fbb-170">Med hello Naming service kan klienter på ett säkert sätt kommunicera med en nod i hello klustret tooresolve ett tjänstnamn och hämta service metadata.</span><span class="sxs-lookup"><span data-stu-id="47fbb-170">Using hello Naming service, clients can securely communicate with any node in hello cluster tooresolve a service name and retrieve service metadata.</span></span> <span data-ttu-id="47fbb-171">Med en enkel Naming klient API kan utveckla användare av Service Fabric tjänster och klienter som kan lösa hello aktuella nätverksplats trots nod dynamik eller hello storlek igen hello-klustret.</span><span class="sxs-lookup"><span data-stu-id="47fbb-171">Using a simple Naming client API, users of Service Fabric can develop services and clients capable of resolving hello current network location despite node dynamism or hello re-sizing of hello cluster.</span></span>

## <a name="testability-subsystem"></a><span data-ttu-id="47fbb-172">Möjlighet att testa undersystemet</span><span class="sxs-lookup"><span data-stu-id="47fbb-172">Testability subsystem</span></span>
<span data-ttu-id="47fbb-173">Möjlighet att testa är en uppsättning med verktyg som utformats för att testa tjänster som bygger på Service Fabric.</span><span class="sxs-lookup"><span data-stu-id="47fbb-173">Testability is a suite of tools specifically designed for testing services built on Service Fabric.</span></span> <span data-ttu-id="47fbb-174">hello verktyg kan utvecklare enkelt medföra meningsfulla fel och köra testet scenarier tooexercise och validera hello många tillstånd och övergångar som en tjänst får alla på ett sätt som kontrollerade och säkra under hela sin livslängd.</span><span class="sxs-lookup"><span data-stu-id="47fbb-174">hello tools let a developer easily induce meaningful faults and run test scenarios tooexercise and validate hello numerous states and transitions that a service will experience throughout its lifetime, all in a controlled and safe manner.</span></span> <span data-ttu-id="47fbb-175">Möjlighet att testa innehåller också en mekanism toorun längre tester som kan gå igenom olika möjliga fel utan att förlora tillgänglighet.</span><span class="sxs-lookup"><span data-stu-id="47fbb-175">Testability also provides a mechanism toorun longer tests that can iterate through various possible failures without losing availability.</span></span> <span data-ttu-id="47fbb-176">Detta ger dig testa i produktionsmiljö.</span><span class="sxs-lookup"><span data-stu-id="47fbb-176">This provides you with a test-in-production environment.</span></span>


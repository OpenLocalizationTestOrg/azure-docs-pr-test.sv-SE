---
title: "Ställ in kontinuerlig integration för Azure mikrotjänster | Microsoft Docs"
description: "Få en översikt över hur du ställer in kontinuerlig integrering och distribution för ett Service Fabric-program med hjälp av Visual Studio Team Services VSTS ()."
services: service-fabric
documentationcenter: na
author: mthalman-msft
manager: timlt
editor: 
ms.assetid: 3e8c2290-9e7a-456a-9b2c-db44d1b3988d
ms.service: multiple
ms.devlang: dotnet
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: multiple
ms.date: 12/06/2016
ms.author: mthalman;mikhegn
ms.openlocfilehash: 76a1e013e824910c7a489e345b6563ae3951378f
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: sv-SE
ms.lasthandoff: 07/11/2017
---
# <a name="set-up-service-fabric-continuous-integration-and-deployment-with-visual-studio-team-services"></a><span data-ttu-id="8c8f0-103">Konfigurera Service Fabric kontinuerlig integrering och distribution med Visual Studio Team Services</span><span class="sxs-lookup"><span data-stu-id="8c8f0-103">Set up Service Fabric continuous integration and deployment with Visual Studio Team Services</span></span>
<span data-ttu-id="8c8f0-104">Den här artikeln beskriver stegen för att konfigurera kontinuerlig integrering och distribution för ett Azure Service Fabric-program med hjälp av Visual Studio Team Services VSTS ().</span><span class="sxs-lookup"><span data-stu-id="8c8f0-104">This article describes the steps to set up continuous integration and deployment for an Azure Service Fabric application by using Visual Studio Team Services (VSTS).</span></span>

<span data-ttu-id="8c8f0-105">Det här dokumentet visar den aktuella proceduren och förväntas ändras med tiden.</span><span class="sxs-lookup"><span data-stu-id="8c8f0-105">This document reflects the current procedure and is expected to change over time.</span></span>

## <a name="prerequisites"></a><span data-ttu-id="8c8f0-106">Krav</span><span class="sxs-lookup"><span data-stu-id="8c8f0-106">Prerequisites</span></span>
<span data-ttu-id="8c8f0-107">Följ dessa steg för att komma igång:</span><span class="sxs-lookup"><span data-stu-id="8c8f0-107">To get started, follow these steps:</span></span>

1. <span data-ttu-id="8c8f0-108">Kontrollera att du har åtkomst till ett Team Services-konto eller [skapar du en](https://www.visualstudio.com/docs/setup-admin/team-services/sign-up-for-visual-studio-team-services) själv.</span><span class="sxs-lookup"><span data-stu-id="8c8f0-108">Ensure that you have access to a Team Services account or [create one](https://www.visualstudio.com/docs/setup-admin/team-services/sign-up-for-visual-studio-team-services) yourself.</span></span>
2. <span data-ttu-id="8c8f0-109">Kontrollera att du har åtkomst till ett Team Services grupprojekt eller [skapar du en](https://www.visualstudio.com/docs/setup-admin/create-team-project) själv.</span><span class="sxs-lookup"><span data-stu-id="8c8f0-109">Ensure that you have access to a Team Services team project or [create one](https://www.visualstudio.com/docs/setup-admin/create-team-project) yourself.</span></span>
3. <span data-ttu-id="8c8f0-110">Kontrollera att du har ett Service Fabric-kluster som du kan distribuera ditt program eller skapa en med hjälp av den [Azure-portalen](service-fabric-cluster-creation-via-portal.md), en [Azure Resource Manager-mall](service-fabric-cluster-creation-via-arm.md), eller [Visual Studio](service-fabric-cluster-creation-via-visual-studio.md).</span><span class="sxs-lookup"><span data-stu-id="8c8f0-110">Ensure that you have a Service Fabric cluster to which you can deploy your application or create one using the [Azure portal](service-fabric-cluster-creation-via-portal.md), an [Azure Resource Manager template](service-fabric-cluster-creation-via-arm.md), or [Visual Studio](service-fabric-cluster-creation-via-visual-studio.md).</span></span>
4. <span data-ttu-id="8c8f0-111">Se till att du redan har skapat ett Service Fabric-program (.sfproj)-projekt.</span><span class="sxs-lookup"><span data-stu-id="8c8f0-111">Ensure that you have already created a Service Fabric Application (.sfproj) project.</span></span> <span data-ttu-id="8c8f0-112">Du måste ha ett projekt som har skapats eller uppgraderas med Service Fabric SDK 2.1 eller högre (.sfproj-filen ska innehålla ett egenskapsvärde för ProjectVersion 1.1 eller högre).</span><span class="sxs-lookup"><span data-stu-id="8c8f0-112">You must have a project that was created or upgraded with Service Fabric SDK 2.1 or higher (the .sfproj file should contain a ProjectVersion property value of 1.1 or higher).</span></span>

> [!NOTE]
> <span data-ttu-id="8c8f0-113">Anpassade build agenter inte längre behövs.</span><span class="sxs-lookup"><span data-stu-id="8c8f0-113">Custom build agents are no longer required.</span></span> <span data-ttu-id="8c8f0-114">Team Services finns agenter som nu levereras förinstallerade med Service Fabric klusterhantering för distribution av dina program direkt från dessa agenter.</span><span class="sxs-lookup"><span data-stu-id="8c8f0-114">Team Services hosted agents now come pre-installed with Service Fabric cluster management software, allowing for deployment of your applications directly from those agents.</span></span>
> 
> 

## <a name="configure-and-share-your-source-files"></a><span data-ttu-id="8c8f0-115">Konfigurera och dela dina källfiler</span><span class="sxs-lookup"><span data-stu-id="8c8f0-115">Configure and share your source files</span></span>
<span data-ttu-id="8c8f0-116">Det första som du vill göra är att förbereda en publiceringsprofil för användning av distributionsprocessen som körs i Team Services.</span><span class="sxs-lookup"><span data-stu-id="8c8f0-116">The first thing you want to do is prepare a publish profile for use by the deployment process that executes within Team Services.</span></span>  <span data-ttu-id="8c8f0-117">Profilen som ska konfigureras för att rikta det kluster som du tidigare har skapat:</span><span class="sxs-lookup"><span data-stu-id="8c8f0-117">The publish profile should be configured to target the cluster that you've previously prepared:</span></span>

1. <span data-ttu-id="8c8f0-118">Välj en publiceringsprofil inom det projektet som du vill använda för kontinuerlig integration arbetsflödet.</span><span class="sxs-lookup"><span data-stu-id="8c8f0-118">Choose a publish profile within your Application project that you want to use for your continuous integration workflow.</span></span> <span data-ttu-id="8c8f0-119">Följ den [publicera instruktioner](service-fabric-publish-app-remote-cluster.md) om hur du publicerar ett program till ett kluster.</span><span class="sxs-lookup"><span data-stu-id="8c8f0-119">Follow the [publish instructions](service-fabric-publish-app-remote-cluster.md) on how to publish an application to a remote cluster.</span></span> <span data-ttu-id="8c8f0-120">Du behöver inte faktiskt publicera programmet även om.</span><span class="sxs-lookup"><span data-stu-id="8c8f0-120">You don't actually need to publish your application though.</span></span> <span data-ttu-id="8c8f0-121">Du kan klicka på den **spara** hyperlänk i dialogrutan Publicera när du har konfigurerat saker på lämpligt sätt.</span><span class="sxs-lookup"><span data-stu-id="8c8f0-121">You can click the **Save** hyperlink in the publish dialog once you have configured things appropriately.</span></span>
2. <span data-ttu-id="8c8f0-122">Om du vill att programmet ska uppgraderas för varje distribution sker inom Team Services som du vill konfigurera profilen som du vill aktivera uppgradering.</span><span class="sxs-lookup"><span data-stu-id="8c8f0-122">If you want your application to be upgraded for each deployment that occurs within Team Services, you want to configure the publish profile to enable upgrade.</span></span> <span data-ttu-id="8c8f0-123">I dialogrutan där du samma publicera används i steg 1 se till att den **uppgradera programmet** är markerad.</span><span class="sxs-lookup"><span data-stu-id="8c8f0-123">In the same publish dialog used in step 1, ensure that the **Upgrade the Application** checkbox is checked.</span></span>  <span data-ttu-id="8c8f0-124">Lär dig mer om [konfigurera ytterligare inställningar](service-fabric-visualstudio-configure-upgrade.md).</span><span class="sxs-lookup"><span data-stu-id="8c8f0-124">Learn more about [configuring additional upgrade settings](service-fabric-visualstudio-configure-upgrade.md).</span></span> <span data-ttu-id="8c8f0-125">Klicka på den **spara** hyperlink att spara inställningarna i profilen.</span><span class="sxs-lookup"><span data-stu-id="8c8f0-125">Click the **Save** hyperlink to save the settings to the publish profile.</span></span>
3. <span data-ttu-id="8c8f0-126">Se till att du har sparat ändringarna på profilen och avbryter dialogrutan Publicera.</span><span class="sxs-lookup"><span data-stu-id="8c8f0-126">Ensure that you've saved your changes to the publish profile and cancel the publish dialog.</span></span>
4. <span data-ttu-id="8c8f0-127">Nu är det dags att [dela källfilerna för programmet projektet](https://www.visualstudio.com/docs/setup-admin/team-services/connect-to-visual-studio-team-services#vs) med Team Services.</span><span class="sxs-lookup"><span data-stu-id="8c8f0-127">Now it's time to [share your Application project source files](https://www.visualstudio.com/docs/setup-admin/team-services/connect-to-visual-studio-team-services#vs) with Team Services.</span></span> <span data-ttu-id="8c8f0-128">När källfilerna är tillgängliga i Team Services, kan du nu gå vidare till nästa steg för att generera versioner.</span><span class="sxs-lookup"><span data-stu-id="8c8f0-128">Once your source files are accessible in Team Services, you can now move on to the next step of generating builds.</span></span> 

## <a name="create-a-build-definition"></a><span data-ttu-id="8c8f0-129">Skapa en build-definition</span><span class="sxs-lookup"><span data-stu-id="8c8f0-129">Create a build definition</span></span>
<span data-ttu-id="8c8f0-130">En definition av Team Services build beskriver ett arbetsflöde som består av en uppsättning build-åtgärder som utförs i tur och ordning.</span><span class="sxs-lookup"><span data-stu-id="8c8f0-130">A Team Services build definition describes a workflow that is composed of a set of build steps that are executed sequentially.</span></span> <span data-ttu-id="8c8f0-131">Målet med build-definition som du skapar är att skapa ett Service Fabric-programpaket och andra artefakter som kan användas för att distribuera programmet.</span><span class="sxs-lookup"><span data-stu-id="8c8f0-131">The goal of the build definition that you are creating is to produce a Service Fabric application package, and other artifacts, that can be used to deploy the application.</span></span> <span data-ttu-id="8c8f0-132">Mer information om Team Services [skapa definitioner](https://www.visualstudio.com/docs/build/define/create).</span><span class="sxs-lookup"><span data-stu-id="8c8f0-132">Learn more about Team Services [build definitions](https://www.visualstudio.com/docs/build/define/create).</span></span>

### <a name="create-a-definition-from-the-build-template"></a><span data-ttu-id="8c8f0-133">Skapa en definition från build-mall</span><span class="sxs-lookup"><span data-stu-id="8c8f0-133">Create a definition from the build template</span></span>
1. <span data-ttu-id="8c8f0-134">Öppna team projekt i Visual Studio Team Services.</span><span class="sxs-lookup"><span data-stu-id="8c8f0-134">Open your team project in Visual Studio Team Services.</span></span>
2. <span data-ttu-id="8c8f0-135">Välj den **skapa** fliken.</span><span class="sxs-lookup"><span data-stu-id="8c8f0-135">Select the **Build** tab.</span></span>
3. <span data-ttu-id="8c8f0-136">Välj gröna  **+**  logga för att skapa en ny build-definition.</span><span class="sxs-lookup"><span data-stu-id="8c8f0-136">Select the green **+** sign to create a new build definition.</span></span>
4. <span data-ttu-id="8c8f0-137">I den dialogruta som öppnas väljer du **Azure Service Fabric-programmet** inom den **skapa** mallkategori.</span><span class="sxs-lookup"><span data-stu-id="8c8f0-137">In the dialog that opens, select **Azure Service Fabric Application** within the **Build** template category.</span></span>
5. <span data-ttu-id="8c8f0-138">Välj **nästa**.</span><span class="sxs-lookup"><span data-stu-id="8c8f0-138">Select **Next**.</span></span>
6. <span data-ttu-id="8c8f0-139">Välj databasen och gren kopplad till Service Fabric-programmet.</span><span class="sxs-lookup"><span data-stu-id="8c8f0-139">Select the repository and branch associated with your Service Fabric application.</span></span>
7. <span data-ttu-id="8c8f0-140">Välj agent kön som du vill använda.</span><span class="sxs-lookup"><span data-stu-id="8c8f0-140">Select the agent queue you wish to use.</span></span> <span data-ttu-id="8c8f0-141">Värdbaserade agenter stöds.</span><span class="sxs-lookup"><span data-stu-id="8c8f0-141">Hosted agents are supported.</span></span>
8. <span data-ttu-id="8c8f0-142">Välj **Skapa**.</span><span class="sxs-lookup"><span data-stu-id="8c8f0-142">Select **Create**.</span></span>
9. <span data-ttu-id="8c8f0-143">Spara build-definition och ange ett namn.</span><span class="sxs-lookup"><span data-stu-id="8c8f0-143">Save the build definition and provide a name.</span></span>
10. <span data-ttu-id="8c8f0-144">Följande punkt är en beskrivning byggsteg som genereras av mallen:</span><span class="sxs-lookup"><span data-stu-id="8c8f0-144">The following paragraph is a description of the build steps generated by the template:</span></span>

| <span data-ttu-id="8c8f0-145">Skapa steg</span><span class="sxs-lookup"><span data-stu-id="8c8f0-145">Build step</span></span> | <span data-ttu-id="8c8f0-146">Beskrivning</span><span class="sxs-lookup"><span data-stu-id="8c8f0-146">Description</span></span> |
| --- | --- |
| <span data-ttu-id="8c8f0-147">NuGet-återställning</span><span class="sxs-lookup"><span data-stu-id="8c8f0-147">NuGet restore</span></span> |<span data-ttu-id="8c8f0-148">Återställer NuGet-paket för lösningen.</span><span class="sxs-lookup"><span data-stu-id="8c8f0-148">Restores the NuGet packages for the solution.</span></span> |
| <span data-ttu-id="8c8f0-149">Skapa lösningen \*SLN</span><span class="sxs-lookup"><span data-stu-id="8c8f0-149">Build solution \*.sln</span></span> |<span data-ttu-id="8c8f0-150">Skapar hela lösningen.</span><span class="sxs-lookup"><span data-stu-id="8c8f0-150">Builds the entire solution.</span></span> |
| <span data-ttu-id="8c8f0-151">Skapa lösningen \*.sfproj</span><span class="sxs-lookup"><span data-stu-id="8c8f0-151">Build solution \*.sfproj</span></span> |<span data-ttu-id="8c8f0-152">Skapar Service Fabric-programpaket som används för att distribuera programmet.</span><span class="sxs-lookup"><span data-stu-id="8c8f0-152">Generates the Service Fabric application package that is used to deploy the application.</span></span> <span data-ttu-id="8c8f0-153">Programmet paketplatsen har angetts ska vara i den versionen artefakt katalog.</span><span class="sxs-lookup"><span data-stu-id="8c8f0-153">The application package location is specified to be within the build's artifact directory.</span></span> |
| <span data-ttu-id="8c8f0-154">Uppdatera Appversioner för Service Fabric</span><span class="sxs-lookup"><span data-stu-id="8c8f0-154">Update Service Fabric App Versions</span></span> |<span data-ttu-id="8c8f0-155">Uppdaterar version värdena i det programpaketet manifestfiler för stöd för uppgradering.</span><span class="sxs-lookup"><span data-stu-id="8c8f0-155">Updates the version values contained in the application package's manifest files to allow for upgrade support.</span></span> <span data-ttu-id="8c8f0-156">Finns det [dokumentationssidan för aktiviteten](https://go.microsoft.com/fwlink/?LinkId=820529) för mer information.</span><span class="sxs-lookup"><span data-stu-id="8c8f0-156">See the [task documentation page](https://go.microsoft.com/fwlink/?LinkId=820529) for more information.</span></span> |
| <span data-ttu-id="8c8f0-157">Kopiera filer</span><span class="sxs-lookup"><span data-stu-id="8c8f0-157">Copy Files</span></span> |<span data-ttu-id="8c8f0-158">Kopierar filerna för Publicera profil och programmet parametrar till den versionen artefakter som ska förbrukas för distribution.</span><span class="sxs-lookup"><span data-stu-id="8c8f0-158">Copies the publish profile and application parameters files to the build's artifacts to be consumed for deployment.</span></span> |
| <span data-ttu-id="8c8f0-159">Publicera artefakt</span><span class="sxs-lookup"><span data-stu-id="8c8f0-159">Publish Artifact</span></span> |<span data-ttu-id="8c8f0-160">Publicerar den versionen artefakter.</span><span class="sxs-lookup"><span data-stu-id="8c8f0-160">Publishes the build's artifacts.</span></span> <span data-ttu-id="8c8f0-161">Gör en definition av versionen att använda den versionen artefakter.</span><span class="sxs-lookup"><span data-stu-id="8c8f0-161">Allows a release definition to consume the build's artifacts.</span></span> |

### <a name="verify-the-default-set-of-tasks"></a><span data-ttu-id="8c8f0-162">Kontrollera en standarduppsättning av uppgifter</span><span class="sxs-lookup"><span data-stu-id="8c8f0-162">Verify the default set of tasks</span></span>
1. <span data-ttu-id="8c8f0-163">Kontrollera den **lösning** inmatningsfältet för den **NuGet återställning** och **skapa lösning** skapa steg.</span><span class="sxs-lookup"><span data-stu-id="8c8f0-163">Verify the **Solution** input field for the **NuGet restore** and **Build solution** build steps.</span></span>  <span data-ttu-id="8c8f0-164">Som standard build steg köras på alla lösningsfiler som finns i den associerade databasen.</span><span class="sxs-lookup"><span data-stu-id="8c8f0-164">By default, these build steps execute upon all solution files that are contained in the associated repository.</span></span>  <span data-ttu-id="8c8f0-165">Om du bara vill build-definition ska fungera på en av filerna lösningen måste du uttryckligen uppdatera sökvägen till filen.</span><span class="sxs-lookup"><span data-stu-id="8c8f0-165">If you only want the build definition to operate on one of those solution files, you need to explicitly update the path to that file.</span></span>
2. <span data-ttu-id="8c8f0-166">Kontrollera den **lösning** inmatningsfältet för den **paketera program** skapa steg.</span><span class="sxs-lookup"><span data-stu-id="8c8f0-166">Verify the **Solution** input field for the **Package application** build step.</span></span>  <span data-ttu-id="8c8f0-167">Det här build-steget förutsätter som standard endast ett tjänstprogram för Fabric-projekt (.sfproj) finns i databasen.</span><span class="sxs-lookup"><span data-stu-id="8c8f0-167">By default, this build step assumes only one Service Fabric Application project (.sfproj) exists in the repository.</span></span>  <span data-ttu-id="8c8f0-168">Om du har flera filer i databasen och vill använda endast en av dem för denna build-definition, måste du uttryckligen uppdatera sökvägen till filen.</span><span class="sxs-lookup"><span data-stu-id="8c8f0-168">If you have multiple such files in your repository and want to target only one of them for this build definition, you need to explicitly update the path to that file.</span></span>  <span data-ttu-id="8c8f0-169">Om du vill paketera flera projekt i databasen måste du skapa ytterligare **Visual Studio skapa** steg i build-definitionen varje mål Application-projekt.</span><span class="sxs-lookup"><span data-stu-id="8c8f0-169">If you want to package multiple Application projects in your repository, you need to create additional **Visual Studio Build** steps in the build definition that each target an Application project.</span></span>  <span data-ttu-id="8c8f0-170">Du kan sedan också behöva uppdatera de **MSBuild-argument** fält för var och en av de skapa steg så att paketplatsen är unika för dem.</span><span class="sxs-lookup"><span data-stu-id="8c8f0-170">You would then also need to update the **MSBuild Arguments** field for each of those build steps so that the package location is unique for each of them.</span></span>
3. <span data-ttu-id="8c8f0-171">Kontrollera beteendet versionshantering som definierats i den **App Uppdateringsversioner Service Fabric** skapa steg.</span><span class="sxs-lookup"><span data-stu-id="8c8f0-171">Verify the versioning behavior defined in the **Update Service Fabric App Versions** build step.</span></span>  <span data-ttu-id="8c8f0-172">Som standard lägger det här steget build till build-nummer på alla Versionsvärden i det programpaketet manifestfiler.</span><span class="sxs-lookup"><span data-stu-id="8c8f0-172">By default, this build step appends the build number to all version values in the application package's manifest files.</span></span> <span data-ttu-id="8c8f0-173">Finns det [dokumentationssidan för aktiviteten](https://go.microsoft.com/fwlink/?LinkId=820529) för mer information.</span><span class="sxs-lookup"><span data-stu-id="8c8f0-173">See the [task documentation page](https://go.microsoft.com/fwlink/?LinkId=820529) for more information.</span></span> <span data-ttu-id="8c8f0-174">Detta är användbart för att stödja uppgradering av ditt program eftersom varje uppgradera distributionen kräver olika Versionsvärden från den tidigare distribueringen.</span><span class="sxs-lookup"><span data-stu-id="8c8f0-174">This is useful for supporting upgrade of your application since each upgrade deployment requires different version values from the previous deployment.</span></span> <span data-ttu-id="8c8f0-175">Om du inte avsikten är att använda programmet uppgradering i arbetsflödet, kan du inaktivera det här build-steget.</span><span class="sxs-lookup"><span data-stu-id="8c8f0-175">If you're not intending to use application upgrade in your workflow, you may consider disabling this build step.</span></span> <span data-ttu-id="8c8f0-176">Det måste inaktiveras om din avsikt är att skapa en version som kan användas för att skriva över en befintlig Service Fabric-program.</span><span class="sxs-lookup"><span data-stu-id="8c8f0-176">It must be disabled if your intention is to produce a build that can be used to overwrite an existing Service Fabric application.</span></span> <span data-ttu-id="8c8f0-177">Distributionen misslyckas om versionen av programmet som produceras av versionen inte matchar versionen av programmet i klustret.</span><span class="sxs-lookup"><span data-stu-id="8c8f0-177">The deployment fails if the version of the application produced by the build does not match the version of the application in the cluster.</span></span>
4. <span data-ttu-id="8c8f0-178">Om din lösning innehåller ett .NET Core-projekt, måste du kontrollera att din build-definition innehåller ett build-steg som återställer beroenden:</span><span class="sxs-lookup"><span data-stu-id="8c8f0-178">If your solution contains a .NET Core project, you must ensure that your build definition contains a build step that restores the dependencies:</span></span>
   1. <span data-ttu-id="8c8f0-179">Välj **Lägg till build steg...** .</span><span class="sxs-lookup"><span data-stu-id="8c8f0-179">Select **Add build step...**.</span></span>
   2. <span data-ttu-id="8c8f0-180">Leta upp den **kommandoradsverktyget** aktiviteten inom fliken Verktyg och klicka på knappen Lägg till.</span><span class="sxs-lookup"><span data-stu-id="8c8f0-180">Locate the **Command-Line** task within the Utility tab and click its Add button.</span></span>
   3. <span data-ttu-id="8c8f0-181">För aktivitetens inmatningsfält, använder du följande värden:</span><span class="sxs-lookup"><span data-stu-id="8c8f0-181">For the task's input fields, use the following values:</span></span>
   4. <span data-ttu-id="8c8f0-182">Verktyget: dotnet</span><span class="sxs-lookup"><span data-stu-id="8c8f0-182">Tool: dotnet</span></span>
   5. <span data-ttu-id="8c8f0-183">Argument: återställa</span><span class="sxs-lookup"><span data-stu-id="8c8f0-183">Arguments: restore</span></span>
   6. <span data-ttu-id="8c8f0-184">Dra aktiviteten så att den är omedelbart efter den **NuGet återställning** steg.</span><span class="sxs-lookup"><span data-stu-id="8c8f0-184">Drag the task so that it is immediately after the **NuGet restore** step.</span></span>
5. <span data-ttu-id="8c8f0-185">Spara alla ändringar du har gjort i build-definition.</span><span class="sxs-lookup"><span data-stu-id="8c8f0-185">Save any changes you've made to the build definition.</span></span>

### <a name="try-it"></a><span data-ttu-id="8c8f0-186">Prova</span><span class="sxs-lookup"><span data-stu-id="8c8f0-186">Try it</span></span>
<span data-ttu-id="8c8f0-187">Välj **kön skapa** manuellt starta en version.</span><span class="sxs-lookup"><span data-stu-id="8c8f0-187">Select **Queue Build** to manually start a build.</span></span> <span data-ttu-id="8c8f0-188">Bygger också utlösare på push eller incheckning.</span><span class="sxs-lookup"><span data-stu-id="8c8f0-188">Builds also triggers upon push or check-in.</span></span> <span data-ttu-id="8c8f0-189">När du har kontrollerat att bygga körs korrekt kan gå du nu vidare till att definiera en definition av versionen som distribuerar programmet till ett kluster.</span><span class="sxs-lookup"><span data-stu-id="8c8f0-189">Once you've verified that the build is executing successfully, you can now move on to defining a release definition that deploys your application to a cluster.</span></span>

## <a name="create-a-release-definition"></a><span data-ttu-id="8c8f0-190">Skapa en definition för versionen</span><span class="sxs-lookup"><span data-stu-id="8c8f0-190">Create a release definition</span></span>
<span data-ttu-id="8c8f0-191">En definition av Team Services versionen beskriver ett arbetsflöde som består av en uppsättning uppgifter som utförs i tur och ordning.</span><span class="sxs-lookup"><span data-stu-id="8c8f0-191">A Team Services release definition describes a workflow that is composed of a set of tasks that are executed sequentially.</span></span> <span data-ttu-id="8c8f0-192">Målet med definitionen versionen som du skapar är ett programpaket och distribuera den till ett kluster.</span><span class="sxs-lookup"><span data-stu-id="8c8f0-192">The goal of the release definition that you are creating is to take an application package and deploy it to a cluster.</span></span> <span data-ttu-id="8c8f0-193">När de används tillsammans köra build definitionen och versionen definition i hela arbetsflödet från att starta med källfiler som slutar med ett program som körs i klustret.</span><span class="sxs-lookup"><span data-stu-id="8c8f0-193">When used together, the build definition and release definition can execute the entire workflow from starting with source files to ending with a running application in your cluster.</span></span> <span data-ttu-id="8c8f0-194">Mer information om Team Services [viktiga definitioner](https://www.visualstudio.com/docs/release/author-release-definition/more-release-definition).</span><span class="sxs-lookup"><span data-stu-id="8c8f0-194">Learn more about Team Services [release definitions](https://www.visualstudio.com/docs/release/author-release-definition/more-release-definition).</span></span>

### <a name="create-a-definition-from-the-release-template"></a><span data-ttu-id="8c8f0-195">Skapa en definition från versionsmall</span><span class="sxs-lookup"><span data-stu-id="8c8f0-195">Create a definition from the release template</span></span>
1. <span data-ttu-id="8c8f0-196">Öppna projektet i Visual Studio Team Services.</span><span class="sxs-lookup"><span data-stu-id="8c8f0-196">Open your project in Visual Studio Team Services.</span></span>
2. <span data-ttu-id="8c8f0-197">Välj den **versionen** fliken.</span><span class="sxs-lookup"><span data-stu-id="8c8f0-197">Select the **Release** tab.</span></span>
3. <span data-ttu-id="8c8f0-198">Välj gröna  **+**  logga för att skapa en ny version definition och välj **skapa versionen definition** på menyn.</span><span class="sxs-lookup"><span data-stu-id="8c8f0-198">Select the green **+** sign to create a new release definition and select **Create release definition** in the menu.</span></span>
4. <span data-ttu-id="8c8f0-199">I den dialogruta som öppnas väljer du **Azure Service Fabric-distribution** inom den **distribution** mallkategori.</span><span class="sxs-lookup"><span data-stu-id="8c8f0-199">In the dialog that opens, select **Azure Service Fabric Deployment** within the **Deployment** template category.</span></span>
5. <span data-ttu-id="8c8f0-200">Välj **nästa**.</span><span class="sxs-lookup"><span data-stu-id="8c8f0-200">Select **Next**.</span></span>
6. <span data-ttu-id="8c8f0-201">Välj build-definition som du vill använda som källa för den här versionen definitionen.</span><span class="sxs-lookup"><span data-stu-id="8c8f0-201">Select the build definition you want to use as the source of this release definition.</span></span>  <span data-ttu-id="8c8f0-202">Definitionen för versionen refererar till artefakter av den valda build-definitionen.</span><span class="sxs-lookup"><span data-stu-id="8c8f0-202">The release definition references the artifacts that were produced by the selected build definition.</span></span>
7. <span data-ttu-id="8c8f0-203">Kontrollera den **kontinuerlig distribution** kryssrutan om du vill ha Team Services automatiskt skapa en ny version och distribuera Service Fabric-programmet varje gång en version har slutförts.</span><span class="sxs-lookup"><span data-stu-id="8c8f0-203">Check the **Continuous deployment** check box if you wish to have Team Services automatically create a new release and deploy the Service Fabric application whenever a build completes.</span></span>
8. <span data-ttu-id="8c8f0-204">Välj agent kön som du vill använda.</span><span class="sxs-lookup"><span data-stu-id="8c8f0-204">Select the agent queue you wish to use.</span></span> <span data-ttu-id="8c8f0-205">Värdbaserade agenter stöds.</span><span class="sxs-lookup"><span data-stu-id="8c8f0-205">Hosted agents are supported.</span></span>
9. <span data-ttu-id="8c8f0-206">Välj **Skapa**.</span><span class="sxs-lookup"><span data-stu-id="8c8f0-206">Select **Create**.</span></span>
10. <span data-ttu-id="8c8f0-207">Redigera definition namnet genom att klicka på pennikonen längst upp på sidan.</span><span class="sxs-lookup"><span data-stu-id="8c8f0-207">Edit the definition name by clicking the pencil icon at the top of the page.</span></span>
11. <span data-ttu-id="8c8f0-208">Markerar det kluster som programmet ska distribueras från den **klustret anslutning** inmatningsfältet för aktiviteten.</span><span class="sxs-lookup"><span data-stu-id="8c8f0-208">Select the cluster to which your application should be deployed from the **Cluster Connection** input field of the task.</span></span> <span data-ttu-id="8c8f0-209">Kluster-anslutningen innehåller nödvändig information som gör att distributionen aktiviteten för att ansluta till klustret.</span><span class="sxs-lookup"><span data-stu-id="8c8f0-209">The cluster connection provides the necessary information that allows the deployment task to connect to the cluster.</span></span> <span data-ttu-id="8c8f0-210">Om du ännu inte har en kluster-anslutning för klustret, väljer du den **hantera** hyperlink bredvid fältet om du vill lägga till en.</span><span class="sxs-lookup"><span data-stu-id="8c8f0-210">If you do not yet have a cluster connection for your cluster, select the **Manage** hyperlink next to the field to add one.</span></span> <span data-ttu-id="8c8f0-211">Utför följande steg på sidan som öppnas:</span><span class="sxs-lookup"><span data-stu-id="8c8f0-211">On the page that opens, perform the following steps:</span></span>
    1. <span data-ttu-id="8c8f0-212">Välj **nya tjänstslutpunkten** och välj sedan **Azure Service Fabric** på menyn.</span><span class="sxs-lookup"><span data-stu-id="8c8f0-212">Select **New Service Endpoint** and then select **Azure Service Fabric** from the menu.</span></span>
    2. <span data-ttu-id="8c8f0-213">Välj typ av autentisering som används av klustret mål för den här slutpunkten.</span><span class="sxs-lookup"><span data-stu-id="8c8f0-213">Select the type of authentication being used by the cluster targeted by this endpoint.</span></span>
    3. <span data-ttu-id="8c8f0-214">Ange ett namn för anslutningen i den **anslutningsnamn** fältet.</span><span class="sxs-lookup"><span data-stu-id="8c8f0-214">Define a name for your connection in the **Connection Name** field.</span></span>  <span data-ttu-id="8c8f0-215">Normalt använder du namnet på klustret.</span><span class="sxs-lookup"><span data-stu-id="8c8f0-215">Typically, you would use the name of your cluster.</span></span>
    4. <span data-ttu-id="8c8f0-216">Definiera klienten anslutning slutpunkts-URL i den **Klusterslutpunkten** fältet.</span><span class="sxs-lookup"><span data-stu-id="8c8f0-216">Define the client connection endpoint URL in the **Cluster Endpoint** field.</span></span>  <span data-ttu-id="8c8f0-217">Exempel: tcp://contoso.westus.cloudapp.azure.com:19000.</span><span class="sxs-lookup"><span data-stu-id="8c8f0-217">Example: tcp://contoso.westus.cloudapp.azure.com:19000.</span></span>
    5. <span data-ttu-id="8c8f0-218">Definiera de autentiseringsuppgifter som du vill använda för att ansluta till klustret i Azure Active Directory-autentiseringsuppgifter för den **användarnamn** och **lösenord** fält.</span><span class="sxs-lookup"><span data-stu-id="8c8f0-218">For Azure Active Directory credentials, define the credentials you want to use to connect to the cluster in the **Username** and **Password** fields.</span></span>
    6. <span data-ttu-id="8c8f0-219">Definiera för certifikatbaserad autentisering Base64-kodning av certifikatfilen klient i den **klientcertifikat** fältet.</span><span class="sxs-lookup"><span data-stu-id="8c8f0-219">For Certificate Based authentication, define the Base64 encoding of the client certificate file in the **Client Certificate** field.</span></span>  <span data-ttu-id="8c8f0-220">Hjälpen popup på fältet för information om hur du hämtar det värdet.</span><span class="sxs-lookup"><span data-stu-id="8c8f0-220">See the help pop-up on that field for info on how to get that value.</span></span>  <span data-ttu-id="8c8f0-221">Om certifikatet är lösenordsskyddad, ange lösenordet i den **lösenord** fältet.</span><span class="sxs-lookup"><span data-stu-id="8c8f0-221">If your certificate is password-protected, define the password in the **Password** field.</span></span>
    7. <span data-ttu-id="8c8f0-222">Bekräfta ändringarna genom att klicka på **OK**.</span><span class="sxs-lookup"><span data-stu-id="8c8f0-222">Confirm your changes by clicking **OK**.</span></span> <span data-ttu-id="8c8f0-223">Efter att gå tillbaka till din versionen definition, klicka på Uppdatera på den **klustret anslutning** fältet för att se den slutpunkt som du just lagt till.</span><span class="sxs-lookup"><span data-stu-id="8c8f0-223">After navigating back to your release definition, click the refresh icon on the **Cluster Connection** field to see the endpoint you just added.</span></span>
12. <span data-ttu-id="8c8f0-224">Spara definition för versionen.</span><span class="sxs-lookup"><span data-stu-id="8c8f0-224">Save the release definition.</span></span>

> [!NOTE]
> <span data-ttu-id="8c8f0-225">Microsoft Accounts (till exempel @hotmail.com eller @outlook.com) stöds inte med Azure Active Directory-autentisering.</span><span class="sxs-lookup"><span data-stu-id="8c8f0-225">Microsoft Accounts (for example, @hotmail.com or @outlook.com) are not supported with Azure Active Directory authentication.</span></span>
> 
> 

<span data-ttu-id="8c8f0-226">Definition som skapas består av en aktivitet av typen **Service Fabric-programdistribution**.</span><span class="sxs-lookup"><span data-stu-id="8c8f0-226">The definition that is created consists of one task of type **Service Fabric Application Deployment**.</span></span> <span data-ttu-id="8c8f0-227">Finns det [dokumentationssidan för aktiviteten](https://go.microsoft.com/fwlink/?LinkId=820528) för mer information om den här uppgiften.</span><span class="sxs-lookup"><span data-stu-id="8c8f0-227">See the [task documentation page](https://go.microsoft.com/fwlink/?LinkId=820528) for more information about this task.</span></span>

### <a name="verify-the-template-defaults"></a><span data-ttu-id="8c8f0-228">Kontrollera mallen standardvärden</span><span class="sxs-lookup"><span data-stu-id="8c8f0-228">Verify the template defaults</span></span>
1. <span data-ttu-id="8c8f0-229">Kontrollera den **Publicera profil** inmatningsfältet för den **distribuera Fabric tjänstprogrammet** aktivitet.</span><span class="sxs-lookup"><span data-stu-id="8c8f0-229">Verify the **Publish Profile** input field for the **Deploy Service Fabric Application** task.</span></span> <span data-ttu-id="8c8f0-230">Det här fältet refererar till en profil med namnet Cloud.xml som ingår i den versionen artefakter som standard.</span><span class="sxs-lookup"><span data-stu-id="8c8f0-230">By default, this field references a publish profile named Cloud.xml contained in the build's artifacts.</span></span> <span data-ttu-id="8c8f0-231">Om du vill referera till en annan profil eller om versionen innehåller flera programpaket i dess artefakter, måste du uppdatera sökvägen på lämpligt sätt.</span><span class="sxs-lookup"><span data-stu-id="8c8f0-231">If you want to reference a different publish profile or if the build contains multiple application packages in its artifacts, you need to update the path appropriately.</span></span>
2. <span data-ttu-id="8c8f0-232">Kontrollera den **programpaket** inmatningsfältet för den **distribuera Fabric tjänstprogrammet** aktivitet.</span><span class="sxs-lookup"><span data-stu-id="8c8f0-232">Verify the **Application Package** input field for the **Deploy Service Fabric Application** task.</span></span> <span data-ttu-id="8c8f0-233">Som standard refererar detta fält till programmet paketet standardsökvägen används i mallen för build-definition.</span><span class="sxs-lookup"><span data-stu-id="8c8f0-233">By default, this field references the default application package path used in the build definition template.</span></span>  <span data-ttu-id="8c8f0-234">Om du har ändrat standardsökvägen för program som paketet i build-definition, måste du uppdatera sökvägen korrekt här samt.</span><span class="sxs-lookup"><span data-stu-id="8c8f0-234">If you've modified the default application package path in the build definition, you need to update the path appropriately here as well.</span></span>

### <a name="try-it"></a><span data-ttu-id="8c8f0-235">Prova</span><span class="sxs-lookup"><span data-stu-id="8c8f0-235">Try it</span></span>
<span data-ttu-id="8c8f0-236">Välj **skapa släpper** från den **släpper** knappmenyn för att manuellt skapa en version.</span><span class="sxs-lookup"><span data-stu-id="8c8f0-236">Select **Create Release** from the **Release** button menu to manually create a release.</span></span> <span data-ttu-id="8c8f0-237">I dialogrutan som öppnas väljer du den version som du vill basera versionen på och klicka sedan på **skapa**.</span><span class="sxs-lookup"><span data-stu-id="8c8f0-237">In the dialog that opens, select the build that you want to base the release on and then click **Create**.</span></span> <span data-ttu-id="8c8f0-238">Om du har aktiverat kontinuerlig distribution kommer versioner att skapas automatiskt när den associera build-definitionen är slutförd en version.</span><span class="sxs-lookup"><span data-stu-id="8c8f0-238">If you enabled continuous deployment, releases will be created automatically when the associated build definition completes a build.</span></span>

## <a name="next-steps"></a><span data-ttu-id="8c8f0-239">Nästa steg</span><span class="sxs-lookup"><span data-stu-id="8c8f0-239">Next steps</span></span>
<span data-ttu-id="8c8f0-240">Om du vill veta mer om kontinuerlig integration med Service Fabric-program kan läsa följande artiklar:</span><span class="sxs-lookup"><span data-stu-id="8c8f0-240">To learn more about continuous integration with Service Fabric applications, read the following articles:</span></span>

* [<span data-ttu-id="8c8f0-241">Team Services dokumentationen hemnätverk</span><span class="sxs-lookup"><span data-stu-id="8c8f0-241">Team Services documentation home</span></span>](https://www.visualstudio.com/docs/overview)
* [<span data-ttu-id="8c8f0-242">Skapa hantering i Team Services</span><span class="sxs-lookup"><span data-stu-id="8c8f0-242">Build management in Team Services</span></span>](https://www.visualstudio.com/docs/build/overview)
* [<span data-ttu-id="8c8f0-243">Versionshantering i Team Services</span><span class="sxs-lookup"><span data-stu-id="8c8f0-243">Release management in Team Services</span></span>](https://www.visualstudio.com/docs/release/overview)


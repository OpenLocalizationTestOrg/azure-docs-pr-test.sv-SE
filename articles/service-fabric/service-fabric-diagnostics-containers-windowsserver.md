---
title: "Azure Service Fabric-behållare övervakning och diagnostik | Microsoft Docs"
description: "Lär dig mer om att övervaka och diagnostisera behållare med OMSS behållare lösning för samordnade på Microsoft Azure Service Fabric."
services: service-fabric
documentationcenter: .net
author: dkkapur
manager: timlt
editor: 
ms.assetid: 
ms.service: service-fabric
ms.devlang: dotnet
ms.topic: article
ms.tgt_pltfrm: NA
ms.workload: NA
ms.date: 05/10/2017
ms.author: dekapur
ms.openlocfilehash: 874c1a5c4b399ff2254072b7282f05d83a005cc3
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: sv-SE
ms.lasthandoff: 07/11/2017
---
# <a name="monitoring-windows-server-containers-with-oms"></a><span data-ttu-id="dd12f-103">Övervakning av Windows Server-behållare med OMS</span><span class="sxs-lookup"><span data-stu-id="dd12f-103">Monitoring Windows Server containers with OMS</span></span>

## <a name="oms-containers-solution"></a><span data-ttu-id="dd12f-104">OMS behållare lösning</span><span class="sxs-lookup"><span data-stu-id="dd12f-104">OMS Containers Solution</span></span>

<span data-ttu-id="dd12f-105">Operations Management Suite (OMS)-teamet har publicerat en behållare lösning för diagnostik- och övervakning för behållare.</span><span class="sxs-lookup"><span data-stu-id="dd12f-105">The Operations Management Suite (OMS) team has published a Containers solution for diagnostics and monitoring for containers.</span></span> <span data-ttu-id="dd12f-106">Den här lösningen är ett bra verktyg för att övervaka distributioner av behållaren styrd på Service Fabric tillsammans med deras Service Fabric-lösning.</span><span class="sxs-lookup"><span data-stu-id="dd12f-106">Alongside their Service Fabric solution, this solution is a great tool to monitor container deployments orchestrated on Service Fabric.</span></span> <span data-ttu-id="dd12f-107">Här är ett enkelt exempel på hur instrumentpanelen i lösningen ser ut:</span><span class="sxs-lookup"><span data-stu-id="dd12f-107">Here's a simple example of what the dashboard in the solution looks like:</span></span>

![Grundläggande OMS-instrumentpanelen](./media/service-fabric-diagnostics-containers-windowsserver/oms-containers-dashboard.png)

<span data-ttu-id="dd12f-109">Den samlar även in olika typer av loggar som kan efterfrågas i verktyget OMS logganalys och kan användas för att visualisera alla mått eller händelser som genereras.</span><span class="sxs-lookup"><span data-stu-id="dd12f-109">It also collects different kinds of logs that can be queried in the OMS Log Analytics tool, and can be used to visualize any metrics or events being generated.</span></span> <span data-ttu-id="dd12f-110">Log-typer som samlas in är:</span><span class="sxs-lookup"><span data-stu-id="dd12f-110">The log types that are collected are:</span></span>

1. <span data-ttu-id="dd12f-111">ContainerInventory: Visar information om behållarens plats, namn och bilder</span><span class="sxs-lookup"><span data-stu-id="dd12f-111">ContainerInventory: shows information about container location, name, and images</span></span>
2. <span data-ttu-id="dd12f-112">ContainerImageInventory: information om distribuerade bilder, inklusive ID eller storlekar</span><span class="sxs-lookup"><span data-stu-id="dd12f-112">ContainerImageInventory: information about deployed images, including IDs or sizes</span></span>
3. <span data-ttu-id="dd12f-113">ContainerLog: specifika felloggar, docker-loggar (stdout osv.) och andra transaktioner</span><span class="sxs-lookup"><span data-stu-id="dd12f-113">ContainerLog: specific error logs, docker logs (stdout, etc.), and other entries</span></span>
4. <span data-ttu-id="dd12f-114">ContainerServiceLog: docker daemon kommandon som har körts</span><span class="sxs-lookup"><span data-stu-id="dd12f-114">ContainerServiceLog: docker daemon commands that have been run</span></span>
5. <span data-ttu-id="dd12f-115">Prestanda: prestandaräknare inklusive behållaren cpu, minne, nätverkstrafik, disk-i/o och anpassade mått från värddatorerna</span><span class="sxs-lookup"><span data-stu-id="dd12f-115">Perf: performance counters including container cpu, memory, network traffic, disk i/o, and custom metrics from the host machines</span></span>

<span data-ttu-id="dd12f-116">Den här artikeln beskriver de steg som krävs för att ställa in behållaren övervakning för klustret.</span><span class="sxs-lookup"><span data-stu-id="dd12f-116">This article covers the steps required to set up container monitoring for your cluster.</span></span> <span data-ttu-id="dd12f-117">Mer information om OMSS behållare lösning checka ut sina [dokumentationen](../log-analytics/log-analytics-containers.md).</span><span class="sxs-lookup"><span data-stu-id="dd12f-117">To learn more about OMS's Containers solution, check out their [documentation](../log-analytics/log-analytics-containers.md).</span></span>

## <a name="1-set-up-a-service-fabric-cluster"></a><span data-ttu-id="dd12f-118">1. Konfigurera ett Service Fabric-kluster</span><span class="sxs-lookup"><span data-stu-id="dd12f-118">1. Set up a Service Fabric cluster</span></span>

<span data-ttu-id="dd12f-119">Skapa ett kluster med Azure Resource Manager-mallen finns [här](https://github.com/dkkapur/Service-Fabric/tree/master/ARM%20Templates/SF%20OMS%20Sample).</span><span class="sxs-lookup"><span data-stu-id="dd12f-119">Create a cluster using the Azure Resource Manager template found [here](https://github.com/dkkapur/Service-Fabric/tree/master/ARM%20Templates/SF%20OMS%20Sample).</span></span> <span data-ttu-id="dd12f-120">Se till att lägga till ett unikt namn för OMS-arbetsytan.</span><span class="sxs-lookup"><span data-stu-id="dd12f-120">Make sure to add a unique OMS workspace name.</span></span> <span data-ttu-id="dd12f-121">Som standard också den här mallen till att distribuera ett kluster i förhandsversionen av Service Fabric (v255.255), vilket innebär att den inte kan användas i produktion och kan inte uppgraderas till en annan version av Service Fabric.</span><span class="sxs-lookup"><span data-stu-id="dd12f-121">This template also defaults to deploying a cluster in the preview build of Service Fabric (v255.255), which means that it cannot be used in production, and cannot be upgraded to a different Service Fabric version.</span></span> <span data-ttu-id="dd12f-122">Om du vill använda den här mallen för långsiktig eller använda, ändrar du versionen till en stabil versionsnummer.</span><span class="sxs-lookup"><span data-stu-id="dd12f-122">If you decide to use this template for long-term or production use, change the version to a stable version number.</span></span>

<span data-ttu-id="dd12f-123">När klustret har konfigurerats, bekräfta att du har installerat lämpligt certifikat och se till att du ska kunna ansluta till klustret.</span><span class="sxs-lookup"><span data-stu-id="dd12f-123">Once the cluster is set up, confirm that you have installed the appropriate certificate, and make sure you are able to connect to the cluster.</span></span>

<span data-ttu-id="dd12f-124">Kontrollera att resursgruppen har ställts in korrekt av rubriken till den [Azure-portalen](https://portal.azure.com/) och söka efter distributionen.</span><span class="sxs-lookup"><span data-stu-id="dd12f-124">Confirm that your Resource Group is set up correctly by heading to the [Azure portal](https://portal.azure.com/) and finding the deployment.</span></span> <span data-ttu-id="dd12f-125">Resursgruppen bör innehålla alla Service Fabric-resurser och även ha en Log Analytics-lösning som en Service Fabric-lösning.</span><span class="sxs-lookup"><span data-stu-id="dd12f-125">The resource group should contain all the Service Fabric resources, and also have a Log Analytics solution as well as a Service Fabric solution.</span></span>

<span data-ttu-id="dd12f-126">För att ändra ett befintligt Service Fabric-kluster:</span><span class="sxs-lookup"><span data-stu-id="dd12f-126">For modifying an existing Service Fabric cluster:</span></span>
* <span data-ttu-id="dd12f-127">Bekräfta att diagnostik är aktiverat (om inte, kan du aktivera det via [uppdatering av virtuella datorns skaluppsättning](/rest/api/virtualmachinescalesets/create-or-update-a-set))</span><span class="sxs-lookup"><span data-stu-id="dd12f-127">Confirm that Diagnostics is enabled (if not, enable it via [updating the virtual machine scale set](/rest/api/virtualmachinescalesets/create-or-update-a-set))</span></span>
* <span data-ttu-id="dd12f-128">Lägg till en OMS-arbetsyta genom att skapa en ”Service Fabric Analytics”-lösning via Azure Marketplace</span><span class="sxs-lookup"><span data-stu-id="dd12f-128">Add an OMS Workspace by creating a "Service Fabric Analytics" solution via the Azure Marketplace</span></span>
* <span data-ttu-id="dd12f-129">Redigera datakällor av Service Fabric-lösningen för att hämta data från lämplig Azure Storage-tabeller (ställa in av BOMULLSTUSS) i den resursgrupp som klustret är i</span><span class="sxs-lookup"><span data-stu-id="dd12f-129">Edit the data sources of the Service Fabric solution to pick up data from the appropriate Azure Storage tables (set up by WAD) in the Resource Group that the cluster is in</span></span>
* <span data-ttu-id="dd12f-130">Lägg till agenten som en [tillägget till virtuella datorns skaluppsättning](/powershell/module/azurerm.compute/add-azurermvmssextension) via PowerShell eller genom att uppdatera den virtuella datorn skaluppsättning (samma länk som ovan för att ändra Resource Manager-mallen)</span><span class="sxs-lookup"><span data-stu-id="dd12f-130">Add the agent as an [extension to the virtual machine scale set](/powershell/module/azurerm.compute/add-azurermvmssextension) via PowerShell or through updating the virtual machine scale set (same link as above, to modify the Resource Manager template)</span></span>

## <a name="2-deploy-a-container"></a><span data-ttu-id="dd12f-131">2. Distribuera en behållare</span><span class="sxs-lookup"><span data-stu-id="dd12f-131">2. Deploy a container</span></span>

<span data-ttu-id="dd12f-132">När klustret är klar och du har bekräftat att du har åtkomst till den, kan du distribuera en behållare till den.</span><span class="sxs-lookup"><span data-stu-id="dd12f-132">Once the cluster is ready and you have confirmed that you can access it, deploy a container to it.</span></span> <span data-ttu-id="dd12f-133">Om du väljer att använda förhandsversionen som angetts i mallen kan du även utforska nya Service Fabric-docker compose funktioner.</span><span class="sxs-lookup"><span data-stu-id="dd12f-133">If you chose to use the preview version as set by the template, you can also explore Service Fabric's new docker compose functionality.</span></span> <span data-ttu-id="dd12f-134">Tänk dessutom på att den första gången som en behållare avbildning distribueras till ett kluster, det tar flera minuter att ladda ned avbildningen beroende på storleken.</span><span class="sxs-lookup"><span data-stu-id="dd12f-134">Bear in mind that the first time a container image is deployed to a cluster, it takes several minutes to download the image depending on its size.</span></span>

## <a name="3-add-the-containers-solution"></a><span data-ttu-id="dd12f-135">3. Lägg till behållare lösning</span><span class="sxs-lookup"><span data-stu-id="dd12f-135">3. Add the Containers solution</span></span>

<span data-ttu-id="dd12f-136">Skapa en resurs för behållare i Azure-portalen (under övervakning + Management kategori) via Azure Marketplace.</span><span class="sxs-lookup"><span data-stu-id="dd12f-136">In the Azure portal, create a Containers resource (under the Monitoring + Management category) through Azure Marketplace.</span></span> 

![Lägga till behållare lösning](./media/service-fabric-diagnostics-containers-windowsserver/containers-solution.png)

<span data-ttu-id="dd12f-138">I steget Skapa begär en OMS-arbetsyta.</span><span class="sxs-lookup"><span data-stu-id="dd12f-138">In the creation step, it requests an OMS workspace.</span></span> <span data-ttu-id="dd12f-139">Markera det som har skapats med distributionen ovan.</span><span class="sxs-lookup"><span data-stu-id="dd12f-139">Select the one that was created with the deployment above.</span></span> <span data-ttu-id="dd12f-140">Det här steget lägger till en behållare lösning OMS-arbetsyta och identifieras automatiskt av OMS-agenten distribueras av mallen.</span><span class="sxs-lookup"><span data-stu-id="dd12f-140">This step adds a Containers solution within your OMS workspace, and is automatically detected by the OMS agent deployed by the template.</span></span> <span data-ttu-id="dd12f-141">Agenten börjar samla in data på behållare processer i klustret och 10 – 15 minuter bör visas i lösningen lätt in med data som en avbildning av instrumentpanelen ovan.</span><span class="sxs-lookup"><span data-stu-id="dd12f-141">The agent will start gathering data on the containers processes in the cluster, and in about 10-15 minutes, you should see the solution light up with data as in the image of the dashboard above.</span></span>

## <a name="4-next-steps"></a><span data-ttu-id="dd12f-142">4. Nästa steg</span><span class="sxs-lookup"><span data-stu-id="dd12f-142">4. Next steps</span></span>

<span data-ttu-id="dd12f-143">OMS erbjuder olika verktyg i arbetsytan för att se om det är mer användbar för dig.</span><span class="sxs-lookup"><span data-stu-id="dd12f-143">OMS offers various tools in the workspace to make if more useful for you.</span></span> <span data-ttu-id="dd12f-144">Läs följande alternativ för att anpassa lösningen för dina behov:</span><span class="sxs-lookup"><span data-stu-id="dd12f-144">Explore the following options to customize the solution to your needs:</span></span>
- <span data-ttu-id="dd12f-145">Hämta bekantat med den [logga sökning och hämtning av](../log-analytics/log-analytics-log-searches.md) funktioner som erbjuds som en del av logganalys</span><span class="sxs-lookup"><span data-stu-id="dd12f-145">Get familiarized with the [log search and querying](../log-analytics/log-analytics-log-searches.md) features offered as part of Log Analytics</span></span>
- <span data-ttu-id="dd12f-146">Konfigurera OMS-agent för specifika prestandaräknare (Gå till arbetsytan Hem > Inställningar > Data > Windows prestandaräknare)</span><span class="sxs-lookup"><span data-stu-id="dd12f-146">Configure the OMS agent to pick up specific performance counters (go to the workspace Home > Settings > Data > Windows Performance Counters)</span></span>
- <span data-ttu-id="dd12f-147">Konfigurera OMS att ställa in [automatiserade aviseringar](../log-analytics/log-analytics-alerts.md) regler för att underlätta identifiering och diagnostik</span><span class="sxs-lookup"><span data-stu-id="dd12f-147">Configure OMS to set up [automated alerting](../log-analytics/log-analytics-alerts.md) rules to aid in detecting and diagnostics</span></span>
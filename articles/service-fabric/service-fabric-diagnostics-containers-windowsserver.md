---
title: "aaaAzure Service Fabric-behållare övervakning och diagnostik | Microsoft Docs"
description: "Lär dig hur toomonitor och diagnostisera behållare med OMSS behållare lösning för samordnade på Microsoft Azure Service Fabric."
services: service-fabric
documentationcenter: .net
author: dkkapur
manager: timlt
editor: 
ms.assetid: 
ms.service: service-fabric
ms.devlang: dotnet
ms.topic: article
ms.tgt_pltfrm: NA
ms.workload: NA
ms.date: 05/10/2017
ms.author: dekapur
ms.openlocfilehash: cd79111cf78b9d76a60d489bb9953587aa06186d
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: sv-SE
ms.lasthandoff: 10/06/2017
---
# <a name="monitoring-windows-server-containers-with-oms"></a><span data-ttu-id="d2d82-103">Övervakning av Windows Server-behållare med OMS</span><span class="sxs-lookup"><span data-stu-id="d2d82-103">Monitoring Windows Server containers with OMS</span></span>

## <a name="oms-containers-solution"></a><span data-ttu-id="d2d82-104">OMS behållare lösning</span><span class="sxs-lookup"><span data-stu-id="d2d82-104">OMS Containers Solution</span></span>

<span data-ttu-id="d2d82-105">hello Operations Management Suite (OMS) team har publicerat en behållare lösning för diagnostik- och övervakning för behållare.</span><span class="sxs-lookup"><span data-stu-id="d2d82-105">hello Operations Management Suite (OMS) team has published a Containers solution for diagnostics and monitoring for containers.</span></span> <span data-ttu-id="d2d82-106">Den här lösningen är ett bra verktyg toomonitor behållardistributionerna styrd på Service Fabric tillsammans med deras Service Fabric-lösning.</span><span class="sxs-lookup"><span data-stu-id="d2d82-106">Alongside their Service Fabric solution, this solution is a great tool toomonitor container deployments orchestrated on Service Fabric.</span></span> <span data-ttu-id="d2d82-107">Här är ett enkelt exempel på vilka hello instrumentpanel i hello lösning ser ut:</span><span class="sxs-lookup"><span data-stu-id="d2d82-107">Here's a simple example of what hello dashboard in hello solution looks like:</span></span>

![Grundläggande OMS-instrumentpanelen](./media/service-fabric-diagnostics-containers-windowsserver/oms-containers-dashboard.png)

<span data-ttu-id="d2d82-109">Samlar även in olika typer av loggar som kan efterfrågas i hello OMS logganalys verktyg och kan vara används toovisualize alla mått eller händelser som genereras.</span><span class="sxs-lookup"><span data-stu-id="d2d82-109">It also collects different kinds of logs that can be queried in hello OMS Log Analytics tool, and can be used toovisualize any metrics or events being generated.</span></span> <span data-ttu-id="d2d82-110">hello loggen typer som samlas in är:</span><span class="sxs-lookup"><span data-stu-id="d2d82-110">hello log types that are collected are:</span></span>

1. <span data-ttu-id="d2d82-111">ContainerInventory: Visar information om behållarens plats, namn och bilder</span><span class="sxs-lookup"><span data-stu-id="d2d82-111">ContainerInventory: shows information about container location, name, and images</span></span>
2. <span data-ttu-id="d2d82-112">ContainerImageInventory: information om distribuerade bilder, inklusive ID eller storlekar</span><span class="sxs-lookup"><span data-stu-id="d2d82-112">ContainerImageInventory: information about deployed images, including IDs or sizes</span></span>
3. <span data-ttu-id="d2d82-113">ContainerLog: specifika felloggar, docker-loggar (stdout osv.) och andra transaktioner</span><span class="sxs-lookup"><span data-stu-id="d2d82-113">ContainerLog: specific error logs, docker logs (stdout, etc.), and other entries</span></span>
4. <span data-ttu-id="d2d82-114">ContainerServiceLog: docker daemon kommandon som har körts</span><span class="sxs-lookup"><span data-stu-id="d2d82-114">ContainerServiceLog: docker daemon commands that have been run</span></span>
5. <span data-ttu-id="d2d82-115">Prestanda: prestandaräknare inklusive behållaren cpu, minne, nätverkstrafik, disk-i/o och anpassade mått från hello värd för datorer</span><span class="sxs-lookup"><span data-stu-id="d2d82-115">Perf: performance counters including container cpu, memory, network traffic, disk i/o, and custom metrics from hello host machines</span></span>

<span data-ttu-id="d2d82-116">Den här artikeln beskriver hello steg krävs tooset in behållaren övervakning för klustret.</span><span class="sxs-lookup"><span data-stu-id="d2d82-116">This article covers hello steps required tooset up container monitoring for your cluster.</span></span> <span data-ttu-id="d2d82-117">Mer om OMSS behållare lösningen toolearn checka ut sina [dokumentationen](../log-analytics/log-analytics-containers.md).</span><span class="sxs-lookup"><span data-stu-id="d2d82-117">toolearn more about OMS's Containers solution, check out their [documentation](../log-analytics/log-analytics-containers.md).</span></span>

## <a name="1-set-up-a-service-fabric-cluster"></a><span data-ttu-id="d2d82-118">1. Konfigurera ett Service Fabric-kluster</span><span class="sxs-lookup"><span data-stu-id="d2d82-118">1. Set up a Service Fabric cluster</span></span>

<span data-ttu-id="d2d82-119">Skapa ett kluster med hello Azure Resource Manager mallen [här](https://github.com/dkkapur/Service-Fabric/tree/master/ARM%20Templates/SF%20OMS%20Sample).</span><span class="sxs-lookup"><span data-stu-id="d2d82-119">Create a cluster using hello Azure Resource Manager template found [here](https://github.com/dkkapur/Service-Fabric/tree/master/ARM%20Templates/SF%20OMS%20Sample).</span></span> <span data-ttu-id="d2d82-120">Se till att tooadd ett unikt namn för OMS-arbetsytan.</span><span class="sxs-lookup"><span data-stu-id="d2d82-120">Make sure tooadd a unique OMS workspace name.</span></span> <span data-ttu-id="d2d82-121">Den här mallen som standard också toodeploying skapa ett kluster i hello förhandsgranskning av Service Fabric (v255.255), vilket innebär att den inte kan användas i produktion och går inte att uppgradera tooa annan Service Fabric-version.</span><span class="sxs-lookup"><span data-stu-id="d2d82-121">This template also defaults toodeploying a cluster in hello preview build of Service Fabric (v255.255), which means that it cannot be used in production, and cannot be upgraded tooa different Service Fabric version.</span></span> <span data-ttu-id="d2d82-122">Om du väljer toouse mallen för långsiktig eller använda, ändra hello tooa stabil versionsnummer.</span><span class="sxs-lookup"><span data-stu-id="d2d82-122">If you decide toouse this template for long-term or production use, change hello version tooa stable version number.</span></span>

<span data-ttu-id="d2d82-123">Bekräfta att du har installerat hello lämpligt certifikat och se till att du kan tooconnect toohello kluster när hello klustret har ställts in.</span><span class="sxs-lookup"><span data-stu-id="d2d82-123">Once hello cluster is set up, confirm that you have installed hello appropriate certificate, and make sure you are able tooconnect toohello cluster.</span></span>

<span data-ttu-id="d2d82-124">Kontrollera att resursgruppen har konfigurerats på rätt sätt med rubriken toohello [Azure-portalen](https://portal.azure.com/) och hitta hello-distribution.</span><span class="sxs-lookup"><span data-stu-id="d2d82-124">Confirm that your Resource Group is set up correctly by heading toohello [Azure portal](https://portal.azure.com/) and finding hello deployment.</span></span> <span data-ttu-id="d2d82-125">hello resursgruppen bör innehålla alla hello Service Fabric-resurser och har också en Log Analytics-lösning som en Service Fabric-lösning.</span><span class="sxs-lookup"><span data-stu-id="d2d82-125">hello resource group should contain all hello Service Fabric resources, and also have a Log Analytics solution as well as a Service Fabric solution.</span></span>

<span data-ttu-id="d2d82-126">För att ändra ett befintligt Service Fabric-kluster:</span><span class="sxs-lookup"><span data-stu-id="d2d82-126">For modifying an existing Service Fabric cluster:</span></span>
* <span data-ttu-id="d2d82-127">Bekräfta att diagnostik är aktiverat (om inte, kan du aktivera det via [uppdatering hello virtuella datorns skaluppsättning](/rest/api/virtualmachinescalesets/create-or-update-a-set))</span><span class="sxs-lookup"><span data-stu-id="d2d82-127">Confirm that Diagnostics is enabled (if not, enable it via [updating hello virtual machine scale set](/rest/api/virtualmachinescalesets/create-or-update-a-set))</span></span>
* <span data-ttu-id="d2d82-128">Lägg till en OMS-arbetsyta genom att skapa en ”Service Fabric Analytics”-lösning via hello Azure Marketplace</span><span class="sxs-lookup"><span data-stu-id="d2d82-128">Add an OMS Workspace by creating a "Service Fabric Analytics" solution via hello Azure Marketplace</span></span>
* <span data-ttu-id="d2d82-129">Redigera hello datakällor av hello Service Fabric-lösningen toopick in data från hello lämplig Azure Storage-tabeller (ställa in av BOMULLSTUSS) i hello resursgruppen som hello klustret finns i</span><span class="sxs-lookup"><span data-stu-id="d2d82-129">Edit hello data sources of hello Service Fabric solution toopick up data from hello appropriate Azure Storage tables (set up by WAD) in hello Resource Group that hello cluster is in</span></span>
* <span data-ttu-id="d2d82-130">Lägg till hello-agenten som en [tillägget toohello virtuella datorns skaluppsättning](/powershell/module/azurerm.compute/add-azurermvmssextension) via PowerShell eller via uppdaterar hello skaluppsättning för virtuell dator (samma länk som ovan, toomodify hello Resource Manager-mall)</span><span class="sxs-lookup"><span data-stu-id="d2d82-130">Add hello agent as an [extension toohello virtual machine scale set](/powershell/module/azurerm.compute/add-azurermvmssextension) via PowerShell or through updating hello virtual machine scale set (same link as above, toomodify hello Resource Manager template)</span></span>

## <a name="2-deploy-a-container"></a><span data-ttu-id="d2d82-131">2. Distribuera en behållare</span><span class="sxs-lookup"><span data-stu-id="d2d82-131">2. Deploy a container</span></span>

<span data-ttu-id="d2d82-132">Distribuera en behållare tooit när hello klustret är klar och du har bekräftat att du kan komma åt den.</span><span class="sxs-lookup"><span data-stu-id="d2d82-132">Once hello cluster is ready and you have confirmed that you can access it, deploy a container tooit.</span></span> <span data-ttu-id="d2d82-133">Om du väljer toouse hello förhandsversion som angetts av hello mallen kan du även utforska Service Fabric nya docker compose funktioner.</span><span class="sxs-lookup"><span data-stu-id="d2d82-133">If you chose toouse hello preview version as set by hello template, you can also explore Service Fabric's new docker compose functionality.</span></span> <span data-ttu-id="d2d82-134">Bära på att hello första gången en avbildning av behållare är distribuerade tooa klustret, det tar flera minuter toodownload hello avbildningen beroende på storleken.</span><span class="sxs-lookup"><span data-stu-id="d2d82-134">Bear in mind that hello first time a container image is deployed tooa cluster, it takes several minutes toodownload hello image depending on its size.</span></span>

## <a name="3-add-hello-containers-solution"></a><span data-ttu-id="d2d82-135">3. Lägg till hello behållare lösning</span><span class="sxs-lookup"><span data-stu-id="d2d82-135">3. Add hello Containers solution</span></span>

<span data-ttu-id="d2d82-136">I hello Azure portal, skapa en behållare resurs (under hello övervakning + Management kategori) via Azure Marketplace.</span><span class="sxs-lookup"><span data-stu-id="d2d82-136">In hello Azure portal, create a Containers resource (under hello Monitoring + Management category) through Azure Marketplace.</span></span> 

![Lägga till behållare lösning](./media/service-fabric-diagnostics-containers-windowsserver/containers-solution.png)

<span data-ttu-id="d2d82-138">I steget Skapa hello begär en OMS-arbetsyta.</span><span class="sxs-lookup"><span data-stu-id="d2d82-138">In hello creation step, it requests an OMS workspace.</span></span> <span data-ttu-id="d2d82-139">Välj hello ett som har skapats med hello distribution ovan.</span><span class="sxs-lookup"><span data-stu-id="d2d82-139">Select hello one that was created with hello deployment above.</span></span> <span data-ttu-id="d2d82-140">Det här steget lägger till en behållare lösning OMS-arbetsyta och identifieras automatiskt av hello OMS-agent distribueras med hello mallen.</span><span class="sxs-lookup"><span data-stu-id="d2d82-140">This step adds a Containers solution within your OMS workspace, and is automatically detected by hello OMS agent deployed by hello template.</span></span> <span data-ttu-id="d2d82-141">hello agenten börjar samla in data på hello behållare processer i kluster hello och i 10 – 15 minuter bör du se hello lösning lysa med data som hello bild av hello instrumentpanelen ovan.</span><span class="sxs-lookup"><span data-stu-id="d2d82-141">hello agent will start gathering data on hello containers processes in hello cluster, and in about 10-15 minutes, you should see hello solution light up with data as in hello image of hello dashboard above.</span></span>

## <a name="4-next-steps"></a><span data-ttu-id="d2d82-142">4. Nästa steg</span><span class="sxs-lookup"><span data-stu-id="d2d82-142">4. Next steps</span></span>

<span data-ttu-id="d2d82-143">OMS erbjuder olika verktyg i hello arbetsytan toomake om det är mer användbar för dig.</span><span class="sxs-lookup"><span data-stu-id="d2d82-143">OMS offers various tools in hello workspace toomake if more useful for you.</span></span> <span data-ttu-id="d2d82-144">Utforska hello följande alternativ toocustomize hello lösning tooyour behov:</span><span class="sxs-lookup"><span data-stu-id="d2d82-144">Explore hello following options toocustomize hello solution tooyour needs:</span></span>
- <span data-ttu-id="d2d82-145">Hämta bekantat med hello [logga sökning och hämtning av](../log-analytics/log-analytics-log-searches.md) funktioner som erbjuds som en del av logganalys</span><span class="sxs-lookup"><span data-stu-id="d2d82-145">Get familiarized with hello [log search and querying](../log-analytics/log-analytics-log-searches.md) features offered as part of Log Analytics</span></span>
- <span data-ttu-id="d2d82-146">Konfigurera hello OMS-agenten toopick in specifika prestandaräknare (gå toohello arbetsytan Hem > Inställningar > Data > Windows prestandaräknare)</span><span class="sxs-lookup"><span data-stu-id="d2d82-146">Configure hello OMS agent toopick up specific performance counters (go toohello workspace Home > Settings > Data > Windows Performance Counters)</span></span>
- <span data-ttu-id="d2d82-147">Konfigurera OMS tooset in [automatiserade aviseringar](../log-analytics/log-analytics-alerts.md) regler tooaid i identifiering och diagnostik</span><span class="sxs-lookup"><span data-stu-id="d2d82-147">Configure OMS tooset up [automated alerting](../log-analytics/log-analytics-alerts.md) rules tooaid in detecting and diagnostics</span></span>

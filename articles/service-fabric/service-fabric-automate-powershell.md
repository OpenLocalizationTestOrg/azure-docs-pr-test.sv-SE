---
title: aaaAutomate Azure Service Fabric programhantering | Microsoft Docs
description: "Distribuera, uppgradering, testa och ta bort Service Fabric-program med hjälp av PowerShell."
services: service-fabric
documentationcenter: .net
author: rwike77
manager: timlt
editor: 
ms.assetid: f03f4294-571d-4262-8a77-cc8b481b959d
ms.service: service-fabric
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: dotnet
ms.topic: article
ms.date: 06/16/2017
ms.author: ryanwi
redirect_url: /azure/service-fabric/service-fabric-deploy-remove-applications
ms.openlocfilehash: a64a39dbee26be8ac15fee767a90fd06bfe4b896
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: sv-SE
ms.lasthandoff: 10/06/2017
---
# <a name="automate-hello-application-lifecycle-using-powershell"></a><span data-ttu-id="8f870-103">Automatisera hello programmet livscykel med hjälp av PowerShell</span><span class="sxs-lookup"><span data-stu-id="8f870-103">Automate hello application lifecycle using PowerShell</span></span>
<span data-ttu-id="8f870-104">Många aspekter av hello [Service Fabric application livscykel](service-fabric-application-lifecycle.md) kan automatiseras.</span><span class="sxs-lookup"><span data-stu-id="8f870-104">Many aspects of hello [Service Fabric application lifecycle](service-fabric-application-lifecycle.md) can be automated.</span></span>  <span data-ttu-id="8f870-105">Den här artikeln visar hur toouse PowerShell tooautomate vanliga uppgifter för att distribuera, uppgradera, ta bort och testa Azure Service Fabric-program.</span><span class="sxs-lookup"><span data-stu-id="8f870-105">This article shows how toouse PowerShell tooautomate common tasks for deploying, upgrading, removing, and testing Azure Service Fabric applications.</span></span>  <span data-ttu-id="8f870-106">Hanteras och HTTP-APIs för apphantering finns också tillgängliga.</span><span class="sxs-lookup"><span data-stu-id="8f870-106">Managed and HTTP APIs for app management are also available.</span></span> <span data-ttu-id="8f870-107">Se [applivscykeln](service-fabric-application-lifecycle.md) för mer information.</span><span class="sxs-lookup"><span data-stu-id="8f870-107">See [app lifecycle](service-fabric-application-lifecycle.md) for more information.</span></span>  

## <a name="prerequisites"></a><span data-ttu-id="8f870-108">Krav</span><span class="sxs-lookup"><span data-stu-id="8f870-108">Prerequisites</span></span>
<span data-ttu-id="8f870-109">Innan du flyttar toohello aktiviteter i hello artikel, måste du:</span><span class="sxs-lookup"><span data-stu-id="8f870-109">Before you move on toohello tasks in hello article, be sure to:</span></span>

* <span data-ttu-id="8f870-110">Bekanta dig med hello Service Fabric-begrepp som beskrivs i [teknisk översikt över Service Fabric](service-fabric-technical-overview.md).</span><span class="sxs-lookup"><span data-stu-id="8f870-110">Get familiar with hello Service Fabric concepts described in [Technical overview of Service Fabric](service-fabric-technical-overview.md).</span></span>
* <span data-ttu-id="8f870-111">[Installera hello runtime, verktyg och SDK](service-fabric-get-started.md), som installeras också hello **ServiceFabric** PowerShell-modulen.</span><span class="sxs-lookup"><span data-stu-id="8f870-111">[Install hello runtime, SDK, and tools](service-fabric-get-started.md), which also installs hello **ServiceFabric** PowerShell module.</span></span>
* <span data-ttu-id="8f870-112">[Aktiverar körning av PowerShell-skript](service-fabric-get-started.md#enable-powershell-script-execution).</span><span class="sxs-lookup"><span data-stu-id="8f870-112">[Enable PowerShell script execution](service-fabric-get-started.md#enable-powershell-script-execution).</span></span>
* <span data-ttu-id="8f870-113">Starta en lokala klustret.</span><span class="sxs-lookup"><span data-stu-id="8f870-113">Start a local cluster.</span></span>  <span data-ttu-id="8f870-114">Starta ett nytt PowerShell-fönster som administratör och kör sedan hello klustret installationsskriptet från hello SDK-mappen:`& "$ENV:ProgramFiles\Microsoft SDKs\Service Fabric\ClusterSetup\DevClusterSetup.ps1"`</span><span class="sxs-lookup"><span data-stu-id="8f870-114">Launch a new PowerShell window as an administrator and then run hello cluster setup script from hello SDK folder: `& "$ENV:ProgramFiles\Microsoft SDKs\Service Fabric\ClusterSetup\DevClusterSetup.ps1"`</span></span>
* <span data-ttu-id="8f870-115">Innan du kör PowerShell-kommandon i den här artikeln först ansluta toohello lokala Service Fabric-kluster med hjälp av [Connect-ServiceFabricCluster](/powershell/module/servicefabric/connect-servicefabriccluster?view=azureservicefabricps):`Connect-ServiceFabricCluster localhost:19000`</span><span class="sxs-lookup"><span data-stu-id="8f870-115">Before you run any PowerShell commands in this article, first connect toohello local Service Fabric cluster by using [Connect-ServiceFabricCluster](/powershell/module/servicefabric/connect-servicefabriccluster?view=azureservicefabricps): `Connect-ServiceFabricCluster localhost:19000`</span></span>
* <span data-ttu-id="8f870-116">hello följande uppgifter kräver en v1 programmet paketet toodeploy och ett v2 programpaket för uppgradering.</span><span class="sxs-lookup"><span data-stu-id="8f870-116">hello following tasks require a v1 application package toodeploy and a v2 application package for upgrade.</span></span> <span data-ttu-id="8f870-117">Hämta hello [ **WordCount** exempelprogram](http://aka.ms/servicefabricsamples) (finns i hello komma igång exempel).</span><span class="sxs-lookup"><span data-stu-id="8f870-117">Download hello [**WordCount** sample application](http://aka.ms/servicefabricsamples) (located in hello Getting Started samples).</span></span> <span data-ttu-id="8f870-118">Skapa och paketera hello program i Visual Studio (Högerklicka på **WordCount** i Solution Explorer och markera **paketet**).</span><span class="sxs-lookup"><span data-stu-id="8f870-118">Build and package hello application in Visual Studio (right-click on **WordCount** in Solution Explorer and select **Package**).</span></span> <span data-ttu-id="8f870-119">Kopiera hello v1 paketet i `C:\ServiceFabricSamples\Services\WordCount\WordCount\pkg\Debug` för`C:\Temp\WordCount`.</span><span class="sxs-lookup"><span data-stu-id="8f870-119">Copy hello v1 package in `C:\ServiceFabricSamples\Services\WordCount\WordCount\pkg\Debug` too`C:\Temp\WordCount`.</span></span> <span data-ttu-id="8f870-120">Kopiera `C:\Temp\WordCount` för`C:\Temp\WordCountV2`, skapa hello v2 programpaket för uppgradering.</span><span class="sxs-lookup"><span data-stu-id="8f870-120">Copy `C:\Temp\WordCount` too`C:\Temp\WordCountV2`, creating hello v2 application package for upgrade.</span></span> <span data-ttu-id="8f870-121">Öppna `C:\Temp\WordCountV2\ApplicationManifest.xml` i en textredigerare.</span><span class="sxs-lookup"><span data-stu-id="8f870-121">Open `C:\Temp\WordCountV2\ApplicationManifest.xml` in a text editor.</span></span> <span data-ttu-id="8f870-122">I hello **ApplicationManifest** element, ändra hello **ApplicationTypeVersion** attribut från ”1.0.0” för ”2.0.0” tooupdate hello app versionsnumret.</span><span class="sxs-lookup"><span data-stu-id="8f870-122">In hello **ApplicationManifest** element, change hello **ApplicationTypeVersion** attribute from "1.0.0" too"2.0.0" tooupdate hello app version number.</span></span> <span data-ttu-id="8f870-123">Spara hello ändras ApplicationManifest.xml.</span><span class="sxs-lookup"><span data-stu-id="8f870-123">Save hello changed ApplicationManifest.xml file.</span></span>

## <a name="task-deploy-a-service-fabric-application"></a><span data-ttu-id="8f870-124">Uppgift: Distribuera ett Service Fabric-program</span><span class="sxs-lookup"><span data-stu-id="8f870-124">Task: Deploy a Service Fabric application</span></span>
<span data-ttu-id="8f870-125">När du har skapat och paketeras hello program (eller hämtas hello programpaket), kan du distribuera hello programmet till en lokal Service Fabric-klustret.</span><span class="sxs-lookup"><span data-stu-id="8f870-125">After you've built and packaged hello application (or downloaded hello application package), you can deploy hello application into a local Service Fabric cluster.</span></span> <span data-ttu-id="8f870-126">Distributionen omfattar överföringen hello programpaket, registrera hello programtyp och skapa hello programinstansen.</span><span class="sxs-lookup"><span data-stu-id="8f870-126">Deployment involves uploading hello application package, registering hello application type, and creating hello application instance.</span></span> <span data-ttu-id="8f870-127">Använd hello instruktioner i det här avsnittet toodeploy ett nytt program tooa kluster.</span><span class="sxs-lookup"><span data-stu-id="8f870-127">Use hello instructions in this section toodeploy a new application tooa cluster.</span></span>

### <a name="step-1-upload-hello-application-package"></a><span data-ttu-id="8f870-128">Steg 1: Överför hello programpaket</span><span class="sxs-lookup"><span data-stu-id="8f870-128">Step 1: Upload hello application package</span></span>
<span data-ttu-id="8f870-129">Överför hello programmet paketet toohello placeras avbildningsarkivet på en plats tillgänglig toointernal Service Fabric-komponenter.</span><span class="sxs-lookup"><span data-stu-id="8f870-129">Uploading hello application package toohello image store puts it in a location accessible toointernal Service Fabric components.</span></span>  <span data-ttu-id="8f870-130">hello programpaketet innehåller hello nödvändiga programmanifestet och service manifest kod, konfiguration och data medan toocreate hello program och instanser av tjänsten.</span><span class="sxs-lookup"><span data-stu-id="8f870-130">hello application package contains hello necessary application manifest, service manifests, and code, configuration, and data package(s) toocreate hello application and service instances.</span></span> <span data-ttu-id="8f870-131">Om du vill tooverify hello appaket lokalt, Använd hello [Test ServiceFabricApplicationPackage](/powershell/servicefabric/vlatest/test-servicefabricapplicationpackage) cmdlet.</span><span class="sxs-lookup"><span data-stu-id="8f870-131">If you want tooverify hello app package locally, use hello [Test-ServiceFabricApplicationPackage](/powershell/servicefabric/vlatest/test-servicefabricapplicationpackage) cmdlet.</span></span>  <span data-ttu-id="8f870-132">Hej [kopiera ServiceFabricApplicationPackage](/powershell/module/servicefabric/copy-servicefabricapplicationpackage?view=azureservicefabricps) kommandot överföringar hello paketet.</span><span class="sxs-lookup"><span data-stu-id="8f870-132">hello [Copy-ServiceFabricApplicationPackage](/powershell/module/servicefabric/copy-servicefabricapplicationpackage?view=azureservicefabricps) command uploads hello package.</span></span> <span data-ttu-id="8f870-133">Exempel:</span><span class="sxs-lookup"><span data-stu-id="8f870-133">For example:</span></span>

```powershell
Copy-ServiceFabricApplicationPackage C:\Temp\WordCount\ -ImageStoreConnectionString file:C:\SfDevCluster\Data\ImageStoreShare -ApplicationPackagePathInImageStore WordCount
```

### <a name="step-2-register-hello-application-type"></a><span data-ttu-id="8f870-134">Steg 2: Registrera hello programtyp</span><span class="sxs-lookup"><span data-stu-id="8f870-134">Step 2: Register hello application type</span></span>
<span data-ttu-id="8f870-135">Registrera hello programpaket gör hello programtypen och versionen som deklarerats i hello programmanifestet som är tillgängliga för användning.</span><span class="sxs-lookup"><span data-stu-id="8f870-135">Registering hello application package makes hello application type and version declared in hello application manifest available for use.</span></span> <span data-ttu-id="8f870-136">hello systemet läser hello-paket som överförts i hello steg 1, verifiera hello paketet (motsvarande toorunning [Test ServiceFabricApplicationPackage](/powershell/servicefabric/vlatest/test-servicefabricapplicationpackage) lokalt), bearbeta hello paketets innehåll och kopierar hello bearbetas paketet tooan plats för internt system.</span><span class="sxs-lookup"><span data-stu-id="8f870-136">hello system reads hello package uploaded in hello step 1, verify hello package (equivalent toorunning [Test-ServiceFabricApplicationPackage](/powershell/servicefabric/vlatest/test-servicefabricapplicationpackage) locally), process hello package contents, and copy hello processed package tooan internal system location.</span></span>  <span data-ttu-id="8f870-137">Kör hello [registrera ServiceFabricApplicationType](/powershell/module/servicefabric/register-servicefabricapplicationtype?view=azureservicefabricps) cmdlet:</span><span class="sxs-lookup"><span data-stu-id="8f870-137">Run hello [Register-ServiceFabricApplicationType](/powershell/module/servicefabric/register-servicefabricapplicationtype?view=azureservicefabricps) cmdlet:</span></span>

```powershell
Register-ServiceFabricApplicationType WordCount
```
<span data-ttu-id="8f870-138">alla typer av programmet hello registrerad i hello-klustret, kör hello toosee [Get-ServiceFabricApplicationType](/powershell/module/servicefabric/get-servicefabricapplicationtype?view=azureservicefabricps) cmdlet:</span><span class="sxs-lookup"><span data-stu-id="8f870-138">toosee all hello application types registered in hello cluster, run hello [Get-ServiceFabricApplicationType](/powershell/module/servicefabric/get-servicefabricapplicationtype?view=azureservicefabricps) cmdlet:</span></span>

```powershell
Get-ServiceFabricApplicationType
```

### <a name="step-3-create-hello-application-instance"></a><span data-ttu-id="8f870-139">Steg 3: Skapa hello programinstansen</span><span class="sxs-lookup"><span data-stu-id="8f870-139">Step 3: Create hello application instance</span></span>
<span data-ttu-id="8f870-140">Ett program kan initieras med hjälp av någon version av programmet som har registrerats med hjälp av hello [ny ServiceFabricApplication](/powershell/module/servicefabric/new-servicefabricapplication?view=azureservicefabricps) kommando.</span><span class="sxs-lookup"><span data-stu-id="8f870-140">An application can be instantiated by using any application type version that has been registered successfully by using hello [New-ServiceFabricApplication](/powershell/module/servicefabric/new-servicefabricapplication?view=azureservicefabricps) command.</span></span> <span data-ttu-id="8f870-141">hello-namnet för varje program som är deklarerad i distribuera tid och måste börja med hello **fabric:** schemat och vara unikt för varje förekomst av programmet.</span><span class="sxs-lookup"><span data-stu-id="8f870-141">hello name of each application is declared at deploy time and must start with hello **fabric:** scheme and be unique for each application instance.</span></span> <span data-ttu-id="8f870-142">hello programmets typnamn och typ programversion deklareras i hello **ApplicationManifest.xml** -filen för hello programpaket.</span><span class="sxs-lookup"><span data-stu-id="8f870-142">hello application type name and application type version are declared in hello **ApplicationManifest.xml** file of hello application package.</span></span> <span data-ttu-id="8f870-143">Om alla standardtjänster definierades i hello programmanifestet av hello Målprogramstyp, skapas de just nu.</span><span class="sxs-lookup"><span data-stu-id="8f870-143">If any default services were defined in hello application manifest of hello target application type, then those are created at this time.</span></span>

```powershell
New-ServiceFabricApplication fabric:/WordCount WordCount 1.0.0
```

<span data-ttu-id="8f870-144">Hej [Get-ServiceFabricApplication](/powershell/servicefabric/vlatest/get-servicefabricapplication) kommando visar alla programinstanser som har skapats, tillsammans med deras allmänna status.</span><span class="sxs-lookup"><span data-stu-id="8f870-144">hello [Get-ServiceFabricApplication](/powershell/servicefabric/vlatest/get-servicefabricapplication) command lists all application instances that were successfully created, along with their overall status.</span></span> <span data-ttu-id="8f870-145">Hej [Get-ServiceFabricService](/powershell/module/servicefabric/get-servicefabricservice?view=azureservicefabricps) kommando visar alla hello-tjänstinstanser som har skapats i en given programinstansen.</span><span class="sxs-lookup"><span data-stu-id="8f870-145">hello [Get-ServiceFabricService](/powershell/module/servicefabric/get-servicefabricservice?view=azureservicefabricps) command lists all of hello service instances that were successfully created within a given application instance.</span></span> <span data-ttu-id="8f870-146">Standardtjänster (eventuella) visas.</span><span class="sxs-lookup"><span data-stu-id="8f870-146">Default services (if any) are listed.</span></span>

```powershell
Get-ServiceFabricApplication

Get-ServiceFabricApplication | Get-ServiceFabricService
```

## <a name="task-upgrade-a-service-fabric-application"></a><span data-ttu-id="8f870-147">Uppgift: Uppgradera ett Service Fabric-program</span><span class="sxs-lookup"><span data-stu-id="8f870-147">Task: Upgrade a Service Fabric application</span></span>
<span data-ttu-id="8f870-148">Du kan uppgradera en tidigare distribuerad Service Fabric-program med en uppdaterad programpaket.</span><span class="sxs-lookup"><span data-stu-id="8f870-148">You can upgrade a previously deployed Service Fabric application with an updated application package.</span></span> <span data-ttu-id="8f870-149">Den här uppgiften uppgraderar hello WordCount program som har distribuerats i ”uppgiften: distribuera ett Service Fabric-program”.</span><span class="sxs-lookup"><span data-stu-id="8f870-149">This task upgrades hello WordCount application that was deployed in "Task: Deploy a Service Fabric application."</span></span> <span data-ttu-id="8f870-150">Läs igenom [uppgradering av Service Fabric-programmet](service-fabric-application-upgrade.md) för mer information.</span><span class="sxs-lookup"><span data-stu-id="8f870-150">Read through [Service Fabric application upgrade](service-fabric-application-upgrade.md) for more information.</span></span>

<span data-ttu-id="8f870-151">tookeep saker enkel i det här exemplet endast hello program versionsnummer har uppdaterats i hello WordCountV2 programpaket som skapats i hello krav.</span><span class="sxs-lookup"><span data-stu-id="8f870-151">tookeep things simple for this example, only hello application version number was updated in hello WordCountV2 application package created in hello prerequisites.</span></span> <span data-ttu-id="8f870-152">En mer realistisk scenariot skulle innebära uppdaterar din service-filer i koden, konfiguration och data och sedan återskapa och paketera programmet hello med uppdaterade versionsnummer.</span><span class="sxs-lookup"><span data-stu-id="8f870-152">A more realistic scenario would involve updating your service code, configuration, or data files and then rebuilding and packaging hello application with updated version numbers.</span></span>  

### <a name="step-1-upload-hello-updated-application-package"></a><span data-ttu-id="8f870-153">Steg 1: Överför hello uppdaterade programpaket</span><span class="sxs-lookup"><span data-stu-id="8f870-153">Step 1: Upload hello updated application package</span></span>
<span data-ttu-id="8f870-154">Hej WordCount v1 programmet är redo toobe uppgraderas.</span><span class="sxs-lookup"><span data-stu-id="8f870-154">hello WordCount v1 application is ready toobe upgraded.</span></span> <span data-ttu-id="8f870-155">Om du öppnar ett PowerShell-fönster som administratör och skriv [ **Get-ServiceFabricApplication**](/powershell/module/servicefabric/get-servicefabricapplication?view=azureservicefabricps), visas den versionen 1.0.0 av hello WordCount programtyp har distribuerats.</span><span class="sxs-lookup"><span data-stu-id="8f870-155">If you open up a PowerShell window as administrator and type [**Get-ServiceFabricApplication**](/powershell/module/servicefabric/get-servicefabricapplication?view=azureservicefabricps), you see that version 1.0.0 of hello WordCount application type is deployed.</span></span>  

<span data-ttu-id="8f870-156">Kopiera hello uppdaterats programmet paketet toohello Service Fabric avbildningsarkivet (där hello programpaket lagras av Service Fabric).</span><span class="sxs-lookup"><span data-stu-id="8f870-156">Now copy hello updated application package toohello Service Fabric image store (where hello application packages are stored by Service Fabric).</span></span> <span data-ttu-id="8f870-157">Hej parametern **ApplicationPackagePathInImageStore** informerar Service Fabric där den kan hitta hello programpaket.</span><span class="sxs-lookup"><span data-stu-id="8f870-157">hello parameter **ApplicationPackagePathInImageStore** informs Service Fabric where it can find hello application package.</span></span> <span data-ttu-id="8f870-158">Hej följande kommando kopior hello programpaket för**WordCountV2** i hello avbildningsarkivet:</span><span class="sxs-lookup"><span data-stu-id="8f870-158">hello following command copies hello application package too**WordCountV2** in hello image store:</span></span>  

```powershell
Copy-ServiceFabricApplicationPackage C:\Temp\WordCountV2\ -ImageStoreConnectionString file:C:\SfDevCluster\Data\ImageStoreShare -ApplicationPackagePathInImageStore WordCountV2

```
### <a name="step-2-register-hello-updated-application-type"></a><span data-ttu-id="8f870-159">Steg 2: Registrera hello uppdateras programtyp</span><span class="sxs-lookup"><span data-stu-id="8f870-159">Step 2: Register hello updated application type</span></span>
<span data-ttu-id="8f870-160">hello nästa steg är tooregister hello ny version av programmet hello med Service Fabric som kan utföras med hjälp av hello [registrera ServiceFabricApplicationType](/powershell/module/servicefabric/register-servicefabricapplicationtype?view=azureservicefabricps) cmdlet:</span><span class="sxs-lookup"><span data-stu-id="8f870-160">hello next step is tooregister hello new version of hello application with Service Fabric, which can be performed by using hello [Register-ServiceFabricApplicationType](/powershell/module/servicefabric/register-servicefabricapplicationtype?view=azureservicefabricps) cmdlet:</span></span>

```powershell
Register-ServiceFabricApplicationType WordCountV2
```

### <a name="step-3-start-hello-upgrade"></a><span data-ttu-id="8f870-161">Steg 3: Starta hello uppgradering</span><span class="sxs-lookup"><span data-stu-id="8f870-161">Step 3: Start hello upgrade</span></span>
<span data-ttu-id="8f870-162">Olika uppgradera parametrar, tidsgränser och hälsotillstånd villkor kan vara tillämpade tooapplication uppgraderingar.</span><span class="sxs-lookup"><span data-stu-id="8f870-162">Various upgrade parameters, timeouts, and health criteria can be applied tooapplication upgrades.</span></span> <span data-ttu-id="8f870-163">Läs igenom hello [uppgradera applikationsparametrarna](service-fabric-application-upgrade-parameters.md) och [uppgraderingsprocessen](service-fabric-application-upgrade.md) dokument toolearn mer.</span><span class="sxs-lookup"><span data-stu-id="8f870-163">Read through hello [application upgrade parameters](service-fabric-application-upgrade-parameters.md) and [upgrade process](service-fabric-application-upgrade.md) documents toolearn more.</span></span> <span data-ttu-id="8f870-164">Alla tjänster och instanser måste vara *felfri* efter hello uppgradering.</span><span class="sxs-lookup"><span data-stu-id="8f870-164">All services and instances should be *healthy* after hello upgrade.</span></span>  <span data-ttu-id="8f870-165">Ange hello **HealthCheckStableDuration** too60 sekunder (så att hello tjänster är felfri för minst 20 sekunder innan hello uppgraderingen fortsätter toohello nästa uppgraderingsdomän).</span><span class="sxs-lookup"><span data-stu-id="8f870-165">Set hello **HealthCheckStableDuration** too60 seconds (so that hello services are healthy for at least 20 seconds before hello upgrade proceeds toohello next upgrade domain).</span></span>  <span data-ttu-id="8f870-166">Även ange hello **UpgradeDomainTimeout** too1200 sekunder och hello **UpgradeTimeout** too3000 sekunder.</span><span class="sxs-lookup"><span data-stu-id="8f870-166">Also set hello **UpgradeDomainTimeout** too1200 seconds and hello **UpgradeTimeout** too3000 seconds.</span></span> <span data-ttu-id="8f870-167">Slutligen, Ställ hello **UpgradeFailureAction** för**återställning**, vilka begäranden som Service Fabric återställer hello programmet toohello tidigare version om fel uppstår under uppgraderingen.</span><span class="sxs-lookup"><span data-stu-id="8f870-167">Finally, set hello **UpgradeFailureAction** too**rollback**, which requests that Service Fabric rolls back hello application toohello previous version if failures are encountered during upgrade.</span></span>

<span data-ttu-id="8f870-168">Nu kan du starta uppgradering av programmet hello med hjälp av hello [Start ServiceFabricApplicationUpgrade](/powershell/module/servicefabric/start-servicefabricapplicationupgrade?view=azureservicefabricps) cmdlet:</span><span class="sxs-lookup"><span data-stu-id="8f870-168">You can now start hello application upgrade by using hello [Start-ServiceFabricApplicationUpgrade](/powershell/module/servicefabric/start-servicefabricapplicationupgrade?view=azureservicefabricps) cmdlet:</span></span>

```powershell
Start-ServiceFabricApplicationUpgrade -ApplicationName fabric:/WordCount -ApplicationTypeVersion 2.0.0 -HealthCheckStableDurationSec 60 -UpgradeDomainTimeoutSec 1200 -UpgradeTimeout 3000  -FailureAction Rollback -Monitored
```

<span data-ttu-id="8f870-169">Observera att hello programnamnet är samma hello som hello tidigare distribuerat v1.0.0 programnamn (fabric: / WordCount).</span><span class="sxs-lookup"><span data-stu-id="8f870-169">Note that hello application name is hello same as hello previously deployed v1.0.0 application name (fabric:/WordCount).</span></span> <span data-ttu-id="8f870-170">Service Fabric använder det här namnet tooidentify vilket program komma uppgraderas.</span><span class="sxs-lookup"><span data-stu-id="8f870-170">Service Fabric uses this name tooidentify which application is getting upgraded.</span></span> <span data-ttu-id="8f870-171">Ett felmeddelande för timeout att tillstånd hello problem kan uppstå om du ställer in hello timeout toobe för kort.</span><span class="sxs-lookup"><span data-stu-id="8f870-171">If you set hello time-outs toobe too short, you might encounter a time-out failure message that states hello problem.</span></span> <span data-ttu-id="8f870-172">Se för[felsöka programuppgraderingar](service-fabric-application-upgrade-troubleshooting.md), eller öka hello timeout.</span><span class="sxs-lookup"><span data-stu-id="8f870-172">Refer too[Troubleshoot application upgrades](service-fabric-application-upgrade-troubleshooting.md), or increase hello time-outs.</span></span>

### <a name="step-4-check-upgrade-progress"></a><span data-ttu-id="8f870-173">Steg 4: Kontrollera Uppgraderingsförlopp</span><span class="sxs-lookup"><span data-stu-id="8f870-173">Step 4: Check upgrade progress</span></span>
<span data-ttu-id="8f870-174">Du kan övervaka programmet Uppgraderingsförlopp med hjälp av [Service Fabric Explorer](service-fabric-visualizing-your-cluster.md), eller genom att använda hello [Get-ServiceFabricApplicationUpgrade](/powershell/module/servicefabric/get-servicefabricapplicationupgrade?view=azureservicefabricps) cmdlet:</span><span class="sxs-lookup"><span data-stu-id="8f870-174">You can monitor application upgrade progress by using [Service Fabric Explorer](service-fabric-visualizing-your-cluster.md), or by using hello [Get-ServiceFabricApplicationUpgrade](/powershell/module/servicefabric/get-servicefabricapplicationupgrade?view=azureservicefabricps) cmdlet:</span></span>

```powershell
Get-ServiceFabricApplicationUpgrade fabric:/WordCount
```

<span data-ttu-id="8f870-175">Om några minuter hello [Get-ServiceFabricApplicationUpgrade](/powershell/module/servicefabric/get-servicefabricapplicationupgrade?view=azureservicefabricps) cmdlet visar att alla uppgraderingsdomäner har uppgraderats (slutförd).</span><span class="sxs-lookup"><span data-stu-id="8f870-175">In a few minutes, hello [Get-ServiceFabricApplicationUpgrade](/powershell/module/servicefabric/get-servicefabricapplicationupgrade?view=azureservicefabricps) cmdlet shows that all upgrade domains were upgraded (completed).</span></span>

## <a name="task-test-a-service-fabric-application"></a><span data-ttu-id="8f870-176">Uppgift: Testa ett Service Fabric-program</span><span class="sxs-lookup"><span data-stu-id="8f870-176">Task: Test a Service Fabric application</span></span>
<span data-ttu-id="8f870-177">toowrite hög kvalitet services utvecklare behöver toobe kan tooinduce instabilt infrastruktur fel tootest hello stabiliteten för sina tjänster.</span><span class="sxs-lookup"><span data-stu-id="8f870-177">toowrite high-quality services, developers need toobe able tooinduce unreliable infrastructure faults tootest hello stability of their services.</span></span> <span data-ttu-id="8f870-178">Service Fabric ger utvecklare hello möjlighet tooinduce fel åtgärder och testa tjänster i hello förekomst av fel med hjälp av hello chaos och redundans testscenarier.</span><span class="sxs-lookup"><span data-stu-id="8f870-178">Service Fabric gives developers hello ability tooinduce fault actions and test services in hello presence of failures by using hello chaos and failover test scenarios.</span></span>  <span data-ttu-id="8f870-179">Läs igenom [introduktion toohello fel Analysis Service](service-fabric-testability-overview.md) för ytterligare information.</span><span class="sxs-lookup"><span data-stu-id="8f870-179">Read through [Introduction toohello Fault Analysis Service](service-fabric-testability-overview.md) for additional information.</span></span>

### <a name="step-1-run-hello-chaos-test-scenario"></a><span data-ttu-id="8f870-180">Steg 1: Kör hello chaos Testscenario</span><span class="sxs-lookup"><span data-stu-id="8f870-180">Step 1: Run hello chaos test scenario</span></span>
<span data-ttu-id="8f870-181">hello chaos Testscenario genererar fel över hello hela Service Fabric-kluster.</span><span class="sxs-lookup"><span data-stu-id="8f870-181">hello chaos test scenario generates faults across hello entire Service Fabric cluster.</span></span> <span data-ttu-id="8f870-182">hello scenariot komprimerar fel som normalt sett över månader eller år tooa några timmar.</span><span class="sxs-lookup"><span data-stu-id="8f870-182">hello scenario compresses faults generally seen over months or years tooa few hours.</span></span> <span data-ttu-id="8f870-183">hello kombination av överlagrad fel med hög feltolerans hittar specialfall som annars skulle missas.</span><span class="sxs-lookup"><span data-stu-id="8f870-183">hello combination of interleaved faults with a high fault rate finds corner cases that would otherwise be missed.</span></span> <span data-ttu-id="8f870-184">hello följande exempel kör hello chaos Testscenario i 60 minuter.</span><span class="sxs-lookup"><span data-stu-id="8f870-184">hello following example runs hello chaos test scenario for 60 minutes.</span></span>

```powershell
$timeToRun = 60
$maxStabilizationTimeSecs = 180
$concurrentFaults = 3
$waitTimeBetweenIterationsSec = 60

Invoke-ServiceFabricChaosTestScenario -TimeToRunMinute $timeToRun -MaxClusterStabilizationTimeoutSec $maxStabilizationTimeSecs -MaxConcurrentFaults $concurrentFaults -EnableMoveReplicaFaults -WaitTimeBetweenIterationsSec $waitTimeBetweenIterationsSec
```

### <a name="step-2-run-hello-failover-test-scenario"></a><span data-ttu-id="8f870-185">Steg 2: Kör hello redundans Testscenario</span><span class="sxs-lookup"><span data-stu-id="8f870-185">Step 2: Run hello failover test scenario</span></span>
<span data-ttu-id="8f870-186">hello redundans Testa scenariot riktad mot en specifik tjänst partition i stället för hello hela klustret och den lämnar andra tjänster påverkas inte.</span><span class="sxs-lookup"><span data-stu-id="8f870-186">hello failover test scenario targets a specific service partition instead of hello entire cluster, and it leaves other services unaffected.</span></span> <span data-ttu-id="8f870-187">hello scenariot går igenom en sekvens av simulerade fel i valideringen av tjänsten när affärslogik körs.</span><span class="sxs-lookup"><span data-stu-id="8f870-187">hello scenario iterates through a sequence of simulated faults in service validation while your business logic runs.</span></span> <span data-ttu-id="8f870-188">Ett fel i tjänsten validering indikerar ett problem som kräver ytterligare undersökning.</span><span class="sxs-lookup"><span data-stu-id="8f870-188">A failure in service validation indicates an issue that needs further investigation.</span></span> <span data-ttu-id="8f870-189">Hej redundanstest startar bara ett fel vid ett tillfälle som skillnad från toohello chaos Testscenario, som kan ge upphov till flera fel.</span><span class="sxs-lookup"><span data-stu-id="8f870-189">hello failover test induces only one fault at a time, as opposed toohello chaos test scenario, which can induce multiple faults.</span></span> <span data-ttu-id="8f870-190">hello följande exempel kör hello redundanstest i 60 minuter mot hello fabric: / WordCount/WordCountService-tjänsten.</span><span class="sxs-lookup"><span data-stu-id="8f870-190">hello following example runs hello failover test for 60 minutes against hello fabric:/WordCount/WordCountService service.</span></span>

```powershell
$timeToRun = 60
$maxStabilizationTimeSecs = 180
$waitTimeBetweenFaultsSec = 10
$serviceName = "fabric:/WordCount/WordCountService"

Invoke-ServiceFabricFailoverTestScenario -TimeToRunMinute $timeToRun -MaxServiceStabilizationTimeoutSec $maxStabilizationTimeSecs -WaitTimeBetweenFaultsSec $waitTimeBetweenFaultsSec -ServiceName $serviceName -PartitionKindUniformInt64 -PartitionKey 1
```

## <a name="task-remove-a-service-fabric-application"></a><span data-ttu-id="8f870-191">Uppgift: Ta bort ett Service Fabric-program</span><span class="sxs-lookup"><span data-stu-id="8f870-191">Task: Remove a Service Fabric application</span></span>
<span data-ttu-id="8f870-192">Du kan ta bort en instans av ett distribuerat program, ta bort hello etablerats programtyp från hello-kluster och ta bort hello programpaketet från hello Avbildningsarkiv.</span><span class="sxs-lookup"><span data-stu-id="8f870-192">You can delete an instance of a deployed application, remove hello provisioned application type from hello cluster, and remove hello application package from hello ImageStore.</span></span>

### <a name="step-1-remove-an-application-instance"></a><span data-ttu-id="8f870-193">Steg 1: Ta bort en instans av programmet</span><span class="sxs-lookup"><span data-stu-id="8f870-193">Step 1: Remove an application instance</span></span>
<span data-ttu-id="8f870-194">När en instans av programmet inte längre behövs, du permanent bort den med hjälp av hello [ta bort ServiceFabricApplication](/powershell/module/servicefabric/remove-servicefabricapplication?view=azureservicefabricps) cmdlet.</span><span class="sxs-lookup"><span data-stu-id="8f870-194">When an application instance is no longer needed, you can permanently remove it by using hello [Remove-ServiceFabricApplication](/powershell/module/servicefabric/remove-servicefabricapplication?view=azureservicefabricps) cmdlet.</span></span> <span data-ttu-id="8f870-195">Detta tar automatiskt bort alla tjänster tillhörande toohello program, tar permanent bort alla Tjänststatus.</span><span class="sxs-lookup"><span data-stu-id="8f870-195">This also automatically removes all services belonging toohello application, permanently removing all service state.</span></span> <span data-ttu-id="8f870-196">Den här åtgärden kan inte ångras och går inte att återställa programtillstånd.</span><span class="sxs-lookup"><span data-stu-id="8f870-196">This operation cannot be reversed and application state cannot be recovered.</span></span>

```powershell
Remove-ServiceFabricApplication fabric:/WordCount
```

### <a name="step-2-unregister-hello-application-type"></a><span data-ttu-id="8f870-197">Steg 2: Avregistrera hello programtyp</span><span class="sxs-lookup"><span data-stu-id="8f870-197">Step 2: Unregister hello application type</span></span>
<span data-ttu-id="8f870-198">När du inte längre behöver en viss version av en typ av program, avregistrera den med hjälp av hello [Unregister-ServiceFabricApplicationType](/powershell/module/servicefabric/unregister-servicefabricapplicationtype?view=azureservicefabricps) cmdlet.</span><span class="sxs-lookup"><span data-stu-id="8f870-198">When you no longer need a particular version of an application type, unregister it by using hello [Unregister-ServiceFabricApplicationType](/powershell/module/servicefabric/unregister-servicefabricapplicationtype?view=azureservicefabricps) cmdlet.</span></span> <span data-ttu-id="8f870-199">Avregistrerar oanvända typer versioner lagringsutrymme som används av hello programpaket i hello avbildningsarkivet.</span><span class="sxs-lookup"><span data-stu-id="8f870-199">Unregistering unused types releases storage space used by hello application package in hello image store.</span></span> <span data-ttu-id="8f870-200">En typ av program kan avregistreras så länge det finns inga program instansierad mot den eller väntande programuppgraderingar som refererar till den.</span><span class="sxs-lookup"><span data-stu-id="8f870-200">An application type can be unregistered as long as there are no applications instantiated against it or pending application upgrades referencing it.</span></span>

```powershell
Unregister-ServiceFabricApplicationType WordCount 1.0.0
```

### <a name="step-3-remove-hello-application-package"></a><span data-ttu-id="8f870-201">Steg 3: Ta bort hello programpaket</span><span class="sxs-lookup"><span data-stu-id="8f870-201">Step 3: Remove hello application package</span></span>
<span data-ttu-id="8f870-202">När hello programtyp har avregistrerats hello programpaket kan tas bort från avbildningsarkivet hello med hjälp av hello [ta bort ServiceFabricApplicationPackage](/powershell/module/servicefabric/remove-servicefabricapplicationpackage?view=azureservicefabricps) cmdlet.</span><span class="sxs-lookup"><span data-stu-id="8f870-202">After hello application type is unregistered, hello application package can be removed from hello image store by using hello [Remove-ServiceFabricApplicationPackage](/powershell/module/servicefabric/remove-servicefabricapplicationpackage?view=azureservicefabricps) cmdlet.</span></span>

```powershell
Remove-ServiceFabricApplicationPackage -ImageStoreConnectionString file:C:\SfDevCluster\Data\ImageStoreShare -ApplicationPackagePathInImageStore WordCount
```

## <a name="next-steps"></a><span data-ttu-id="8f870-203">Nästa steg</span><span class="sxs-lookup"><span data-stu-id="8f870-203">Next steps</span></span>
[<span data-ttu-id="8f870-204">Livscykel för Service Fabric-program</span><span class="sxs-lookup"><span data-stu-id="8f870-204">Service Fabric application lifecycle</span></span>](service-fabric-application-lifecycle.md)

[<span data-ttu-id="8f870-205">Distribuera ett program</span><span class="sxs-lookup"><span data-stu-id="8f870-205">Deploy an application</span></span>](service-fabric-deploy-remove-applications.md)

[<span data-ttu-id="8f870-206">Uppgradering av programmet</span><span class="sxs-lookup"><span data-stu-id="8f870-206">Application upgrade</span></span>](service-fabric-application-upgrade.md)

[<span data-ttu-id="8f870-207">Azure Service Fabric-cmdlets</span><span class="sxs-lookup"><span data-stu-id="8f870-207">Azure Service Fabric cmdlets</span></span>](/powershell/azure/overview?view=azureservicefabricps)


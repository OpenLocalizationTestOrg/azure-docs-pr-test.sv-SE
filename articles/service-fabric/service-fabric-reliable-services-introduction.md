---
title: "aaaOverview av hello tillförlitlig tjänst för Service Fabric-programmeringsmodell | Microsoft Docs"
description: "Lär dig mer om programmeringsmodell för tillförlitlig tjänst för Service Fabric och börja skriva egna tjänster."
services: Service-Fabric
documentationcenter: .net
author: masnider
manager: timlt
editor: vturecek; mani-ramaswamy
ms.assetid: 0c88a533-73f8-4ae1-a939-67d17456ac06
ms.service: Service-Fabric
ms.devlang: dotnet
ms.topic: article
ms.tgt_pltfrm: NA
ms.workload: NA
ms.date: 8/9/2017
ms.author: masnider;
ms.openlocfilehash: 41d1826df902b1f1845c4702bf2567e6b9ca1f1f
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: sv-SE
ms.lasthandoff: 10/06/2017
---
# <a name="reliable-services-overview"></a><span data-ttu-id="3d0b5-103">Översikt över Reliable Services</span><span class="sxs-lookup"><span data-stu-id="3d0b5-103">Reliable Services overview</span></span>
<span data-ttu-id="3d0b5-104">Azure Service Fabric gör det enklare att skriva och hantera tillståndslösa och tillståndskänsliga Reliable Services.</span><span class="sxs-lookup"><span data-stu-id="3d0b5-104">Azure Service Fabric simplifies writing and managing stateless and stateful Reliable Services.</span></span> <span data-ttu-id="3d0b5-105">Detta avsnitt:</span><span class="sxs-lookup"><span data-stu-id="3d0b5-105">This topic covers:</span></span>

* <span data-ttu-id="3d0b5-106">hello Reliable Services programmeringsmodell för tillståndslösa och tillståndskänsliga tjänster.</span><span class="sxs-lookup"><span data-stu-id="3d0b5-106">hello Reliable Services programming model for stateless and stateful services.</span></span>
* <span data-ttu-id="3d0b5-107">hello val du har toomake när du skriver en tillförlitlig tjänst.</span><span class="sxs-lookup"><span data-stu-id="3d0b5-107">hello choices you have toomake when writing a Reliable Service.</span></span>
* <span data-ttu-id="3d0b5-108">Vissa scenarier och exempel på när toouse tillförlitlig tjänster och hur de skrivs.</span><span class="sxs-lookup"><span data-stu-id="3d0b5-108">Some scenarios and examples of when toouse Reliable Services and how they are written.</span></span>

<span data-ttu-id="3d0b5-109">Reliable Services är en av hello programmeringsmodeller finns på Service Fabric.</span><span class="sxs-lookup"><span data-stu-id="3d0b5-109">Reliable Services is one of hello programming models available on Service Fabric.</span></span> <span data-ttu-id="3d0b5-110">hello andra är hello tillförlitliga aktören programmeringsmodell, vilket är en programmeringsmodell med virtuella aktören på hello Reliable Services modell.</span><span class="sxs-lookup"><span data-stu-id="3d0b5-110">hello other is hello Reliable Actor programming model, which provides a virtual Actor programming model on top of hello Reliable Services model.</span></span> <span data-ttu-id="3d0b5-111">Mer information om hello Reliable Actors Programmeringsmiljön finns [introduktion tooService Fabric Reliable Actors](service-fabric-reliable-actors-introduction.md).</span><span class="sxs-lookup"><span data-stu-id="3d0b5-111">For more information on hello Reliable Actors programming model, see [Introduction tooService Fabric Reliable Actors](service-fabric-reliable-actors-introduction.md).</span></span>

<span data-ttu-id="3d0b5-112">Service Fabric hanterar hello livslängden för tjänster, från etablering och distribution via uppgradering och borttagning, via [Service Fabric programhantering](service-fabric-deploy-remove-applications.md).</span><span class="sxs-lookup"><span data-stu-id="3d0b5-112">Service Fabric manages hello lifetime of services, from provisioning and deployment through upgrade and deletion, via [Service Fabric application management](service-fabric-deploy-remove-applications.md).</span></span>

## <a name="what-are-reliable-services"></a><span data-ttu-id="3d0b5-113">Vad är Reliable Services?</span><span class="sxs-lookup"><span data-stu-id="3d0b5-113">What are Reliable Services?</span></span>
<span data-ttu-id="3d0b5-114">Reliable Services ger dig ett enkelt kraftfulla, översta programming modellen toohelp du express vad är viktigt tooyour program.</span><span class="sxs-lookup"><span data-stu-id="3d0b5-114">Reliable Services gives you a simple, powerful, top-level programming model toohelp you express what is important tooyour application.</span></span> <span data-ttu-id="3d0b5-115">Med hello Reliable Services programmeringsmodellen, får du:</span><span class="sxs-lookup"><span data-stu-id="3d0b5-115">With hello Reliable Services programming model, you get:</span></span>

* <span data-ttu-id="3d0b5-116">Åtkomst toohello resten av hello Service Fabric programming API: er.</span><span class="sxs-lookup"><span data-stu-id="3d0b5-116">Access toohello rest of hello Service Fabric programming APIs.</span></span> <span data-ttu-id="3d0b5-117">Till skillnad från Service Fabric Services modelleras som [gäst körbara filer](service-fabric-deploy-existing-app.md), Reliable Services hämta toouse hello resten av hello Service Fabric API: er direkt.</span><span class="sxs-lookup"><span data-stu-id="3d0b5-117">Unlike Service Fabric Services modeled as [Guest Executables](service-fabric-deploy-existing-app.md), Reliable Services get toouse hello rest of hello Service Fabric APIs directly.</span></span> <span data-ttu-id="3d0b5-118">Detta tillåter tjänster:</span><span class="sxs-lookup"><span data-stu-id="3d0b5-118">This allows services to:</span></span>
  * <span data-ttu-id="3d0b5-119">frågan hello system</span><span class="sxs-lookup"><span data-stu-id="3d0b5-119">query hello system</span></span>
  * <span data-ttu-id="3d0b5-120">rapporten hälsotillstånd om entiteter i hello kluster</span><span class="sxs-lookup"><span data-stu-id="3d0b5-120">report health about entities in hello cluster</span></span>
  * <span data-ttu-id="3d0b5-121">få meddelanden om ändringar i konfigurationen och kod</span><span class="sxs-lookup"><span data-stu-id="3d0b5-121">receive notifications about configuration and code changes</span></span>
  * <span data-ttu-id="3d0b5-122">hitta och kommunicera med andra tjänster</span><span class="sxs-lookup"><span data-stu-id="3d0b5-122">find and communicate with other services,</span></span>
  * <span data-ttu-id="3d0b5-123">(valfritt) använda hello [tillförlitliga samlingar](service-fabric-reliable-services-reliable-collections.md)</span><span class="sxs-lookup"><span data-stu-id="3d0b5-123">(optionally) use hello [Reliable Collections](service-fabric-reliable-services-reliable-collections.md)</span></span>
  * <span data-ttu-id="3d0b5-124">.. och ge dem åtkomst till toomany andra funktioner, allt från en förstklassigt programmeringsmodell i flera programmeringsspråk.</span><span class="sxs-lookup"><span data-stu-id="3d0b5-124">...and giving them access toomany other capabilities, all from a first class programming model in several programming languages.</span></span>
* <span data-ttu-id="3d0b5-125">En enkel modell för att köra din kod som ser ut som programmeringsmodeller som används för att.</span><span class="sxs-lookup"><span data-stu-id="3d0b5-125">A simple model for running your own code that looks like programming models you are used to.</span></span> <span data-ttu-id="3d0b5-126">Koden har en väldefinierad startpunkt och lätthanterade livscykel.</span><span class="sxs-lookup"><span data-stu-id="3d0b5-126">Your code has a well-defined entry point and easily managed lifecycle.</span></span>
* <span data-ttu-id="3d0b5-127">En modell med pluggable kommunikation.</span><span class="sxs-lookup"><span data-stu-id="3d0b5-127">A pluggable communication model.</span></span> <span data-ttu-id="3d0b5-128">Använd hello transport du själv väljer, till exempel HTTP med [Web API](service-fabric-reliable-services-communication-webapi.md), WebSockets, anpassade TCP-protokoll eller något annat.</span><span class="sxs-lookup"><span data-stu-id="3d0b5-128">Use hello transport of your choice, such as HTTP with [Web API](service-fabric-reliable-services-communication-webapi.md), WebSockets, custom TCP protocols, or anything else.</span></span> <span data-ttu-id="3d0b5-129">Reliable Services innehåller några bra out box-alternativ som du kan använda eller ange en egen.</span><span class="sxs-lookup"><span data-stu-id="3d0b5-129">Reliable Services provide some great out-of-the-box options you can use, or you can provide your own.</span></span>
* <span data-ttu-id="3d0b5-130">För tillståndskänsliga tjänster hello Reliable Services programmeringsmodellen kan du tooconsistently och på ett tillförlitligt sätt lagra din tillstånd i din tjänst med hjälp av [tillförlitliga samlingar](service-fabric-reliable-services-reliable-collections.md).</span><span class="sxs-lookup"><span data-stu-id="3d0b5-130">For stateful services, hello Reliable Services programming model allows you tooconsistently and reliably store your state right inside your service by using [Reliable Collections](service-fabric-reliable-services-reliable-collections.md).</span></span> <span data-ttu-id="3d0b5-131">Tillförlitliga samlingar är en enkel uppsättning hög tillgänglighet och tillförlitlig Samlingsklasser som kommer att vara bekant tooanyone som har använt C#-samlingar.</span><span class="sxs-lookup"><span data-stu-id="3d0b5-131">Reliable Collections are a simple set of highly available and reliable collection classes that will be familiar tooanyone who has used C# collections.</span></span> <span data-ttu-id="3d0b5-132">Traditionellt tjänster som krävs för externa system för tillståndshantering av tillförlitliga.</span><span class="sxs-lookup"><span data-stu-id="3d0b5-132">Traditionally, services needed external systems for Reliable state management.</span></span> <span data-ttu-id="3d0b5-133">Med tillförlitlig samlingar, kan du lagra dina tillstånd nästa tooyour beräknings med hello samma hög tillgänglighet och tillförlitlighet som du har komma tooexpect från högtillgänglig externa butiker.</span><span class="sxs-lookup"><span data-stu-id="3d0b5-133">With Reliable Collections, you can store your state next tooyour compute with hello same high availability and reliability you've come tooexpect from highly available external stores.</span></span> <span data-ttu-id="3d0b5-134">Den här modellen förbättrar också latens eftersom du samordna hello beräknings- och tillstånd måste toofunction.</span><span class="sxs-lookup"><span data-stu-id="3d0b5-134">This model also improves latency because you are co-locating hello compute and state it needs toofunction.</span></span>

<span data-ttu-id="3d0b5-135">Det här videoklippet Microsoft Virtual Academy en översikt över Reliable services:<center>
<a target="_blank" href="https://mva.microsoft.com/en-US/training-courses/building-microservices-applications-on-azure-service-fabric-16747?l=HhD9566yC_4106218965">
<img src="./media/service-fabric-reliable-services-introduction/ReliableServicesVid.png" WIDTH="360" HEIGHT="244" />
</a>
</center></span><span class="sxs-lookup"><span data-stu-id="3d0b5-135">Watch this Microsoft Virtual Academy video for an overview of Reliable services: <center>
<a target="_blank" href="https://mva.microsoft.com/en-US/training-courses/building-microservices-applications-on-azure-service-fabric-16747?l=HhD9566yC_4106218965">
<img src="./media/service-fabric-reliable-services-introduction/ReliableServicesVid.png" WIDTH="360" HEIGHT="244" />
</a>
</center></span></span>

## <a name="what-makes-reliable-services-different"></a><span data-ttu-id="3d0b5-136">Vad gör Reliable Services olika?</span><span class="sxs-lookup"><span data-stu-id="3d0b5-136">What makes Reliable Services different?</span></span>
<span data-ttu-id="3d0b5-137">Reliable Services i Service Fabric skiljer sig från tjänster som du har skrivit innan.</span><span class="sxs-lookup"><span data-stu-id="3d0b5-137">Reliable Services in Service Fabric are different from services you may have written before.</span></span> <span data-ttu-id="3d0b5-138">Service Fabric ger tillförlitlighet, tillgänglighet, konsekvens och skalbarhet.</span><span class="sxs-lookup"><span data-stu-id="3d0b5-138">Service Fabric provides reliability, availability, consistency, and scalability.</span></span>

* <span data-ttu-id="3d0b5-139">**Tillförlitlighet** – din tjänst förblir in även i instabilt miljöer där dina datorer inte eller nådde nätverksproblem, eller i fall där hello tjänsterna själva uppstår fel och krascher eller misslyckas.</span><span class="sxs-lookup"><span data-stu-id="3d0b5-139">**Reliability** - Your service stays up even in unreliable environments where your machines fail or hit network issues, or in cases where hello services themselves encounter errors and crash or fail.</span></span> <span data-ttu-id="3d0b5-140">För tillståndskänsliga tjänster bevaras din även i hello förekomst av nätverket eller andra fel.</span><span class="sxs-lookup"><span data-stu-id="3d0b5-140">For stateful services, your state is preserved even in hello presence of network or other failures.</span></span>
* <span data-ttu-id="3d0b5-141">**Tillgänglighet** -tjänsten är kan nås och svarstid.</span><span class="sxs-lookup"><span data-stu-id="3d0b5-141">**Availability** - Your service is reachable and responsive.</span></span> <span data-ttu-id="3d0b5-142">Service Fabric underhåller din önskade antalet kopior som körs.</span><span class="sxs-lookup"><span data-stu-id="3d0b5-142">Service Fabric maintains your desired number of running copies.</span></span>
* <span data-ttu-id="3d0b5-143">**Skalbarhet** - tjänster är fristående från maskinvara, och de kan öka eller minska vid behov via hello tillägg eller borttagning av maskinvara eller andra resurser.</span><span class="sxs-lookup"><span data-stu-id="3d0b5-143">**Scalability** - Services are decoupled from specific hardware, and they can grow or shrink as necessary through hello addition or removal of hardware or other resources.</span></span> <span data-ttu-id="3d0b5-144">Tjänster som är lätt partitionerade (särskilt i hello tillståndskänslig fallet) tooensure som hello-tjänsten kan skalas och referensen misslyckades delvis.</span><span class="sxs-lookup"><span data-stu-id="3d0b5-144">Services are easily partitioned (especially in hello stateful case) tooensure that hello service can scale and handle partial failures.</span></span> <span data-ttu-id="3d0b5-145">Tjänster kan skapas och tas bort dynamiskt via kod, aktivera flera instanser toobe efter en redundansväxling kan vid behov Säg i svaret toocustomer begäranden.</span><span class="sxs-lookup"><span data-stu-id="3d0b5-145">Services can be created and deleted dynamically via code, enabling more instances toobe spun up as necessary, say in response toocustomer requests.</span></span> <span data-ttu-id="3d0b5-146">Slutligen uppmuntrar Service Fabric services toobe lightweight.</span><span class="sxs-lookup"><span data-stu-id="3d0b5-146">Finally, Service Fabric encourages services toobe lightweight.</span></span> <span data-ttu-id="3d0b5-147">Service Fabric kan tusentals services toobe tillhandahållas inom en enda process i stället för att kräva eller trafikklass hela OS-instanser eller processer tooa instans av en tjänst.</span><span class="sxs-lookup"><span data-stu-id="3d0b5-147">Service Fabric allows thousands of services toobe provisioned within a single process, rather than requiring or dedicating entire OS instances or processes tooa single instance of a service.</span></span>
* <span data-ttu-id="3d0b5-148">**Konsekvenskontroll** -all information som lagras i den här tjänsten kan garanteras toobe konsekvent.</span><span class="sxs-lookup"><span data-stu-id="3d0b5-148">**Consistency** - Any information stored in this service can be guaranteed toobe consistent.</span></span> <span data-ttu-id="3d0b5-149">Detta gäller även över flera tillförlitliga samlingar i en tjänst.</span><span class="sxs-lookup"><span data-stu-id="3d0b5-149">This is true even across multiple reliable collections within a service.</span></span> <span data-ttu-id="3d0b5-150">Över samlingarna i en tjänst kan ändras i ett transaktionellt atomiska sätt.</span><span class="sxs-lookup"><span data-stu-id="3d0b5-150">Changes across collections within a service can be made in a transactionally atomic manner.</span></span>

## <a name="service-lifecycle"></a><span data-ttu-id="3d0b5-151">Tjänsten livscykel</span><span class="sxs-lookup"><span data-stu-id="3d0b5-151">Service lifecycle</span></span>
<span data-ttu-id="3d0b5-152">Om din tjänst är tillståndskänslig eller tillståndslösa, tillhandahåller tillförlitlig en enkel livscykel kan du snabbt ansluta din kod och komma igång.</span><span class="sxs-lookup"><span data-stu-id="3d0b5-152">Whether your service is stateful or stateless, Reliable Services provide a simple lifecycle that lets you quickly plug in your code and get started.</span></span>  <span data-ttu-id="3d0b5-153">Det finns en eller två metoder som du behöver tooimplement tooget din tjänst igång.</span><span class="sxs-lookup"><span data-stu-id="3d0b5-153">There are just one or two methods that you need tooimplement tooget your service up and running.</span></span>

* <span data-ttu-id="3d0b5-154">**CreateServiceReplicaListeners/CreateServiceInstanceListeners** -den här metoden är där hello service definierar hello kommunikation stack(s) läggs toouse.</span><span class="sxs-lookup"><span data-stu-id="3d0b5-154">**CreateServiceReplicaListeners/CreateServiceInstanceListeners** - This method is where hello service defines hello communication stack(s) that it wants toouse.</span></span> <span data-ttu-id="3d0b5-155">Hej kommunikation stack som [Web API](service-fabric-reliable-services-communication-webapi.md), är det definierar hello lyssnarslutpunkten eller slutpunkter för hello service (hur klienter nå hello service).</span><span class="sxs-lookup"><span data-stu-id="3d0b5-155">hello communication stack, such as [Web API](service-fabric-reliable-services-communication-webapi.md), is what defines hello listening endpoint or endpoints for hello service (how clients reach hello service).</span></span> <span data-ttu-id="3d0b5-156">Den definierar hur hälsningsmeddelande som visas interagera med hello resten av hello service-kod.</span><span class="sxs-lookup"><span data-stu-id="3d0b5-156">It also defines how hello messages that appear interact with hello rest of hello service code.</span></span>
* <span data-ttu-id="3d0b5-157">**RunAsync** -metoden är där tjänsten körs dess affärslogik och där det skulle startar alla bakgrundsuppgifter som ska köras under hello livstid hello-tjänsten.</span><span class="sxs-lookup"><span data-stu-id="3d0b5-157">**RunAsync** - This method is where your service runs its business logic, and where it would kick off any background tasks that should run for hello lifetime of hello service.</span></span> <span data-ttu-id="3d0b5-158">hello annullering token som har angetts är en signal för när arbetet ska sluta.</span><span class="sxs-lookup"><span data-stu-id="3d0b5-158">hello cancellation token that is provided is a signal for when that work should stop.</span></span> <span data-ttu-id="3d0b5-159">Till exempel om hello service måste toopull meddelanden från en tillförlitlig kö och bearbeta dem, är där som fungerar som händer.</span><span class="sxs-lookup"><span data-stu-id="3d0b5-159">For example, if hello service needs toopull messages out of a Reliable Queue and process them, this is where that work happens.</span></span>

<span data-ttu-id="3d0b5-160">Om du lär dig tillförlitliga tjänster för hello första gången, läsa på!</span><span class="sxs-lookup"><span data-stu-id="3d0b5-160">If you're learning about reliable services for hello first time, read on!</span></span> <span data-ttu-id="3d0b5-161">Om du letar efter en detaljerad genomgång av hello livscykeln för tillförlitlig tjänster, du kan gå för[i den här artikeln](service-fabric-reliable-services-lifecycle.md).</span><span class="sxs-lookup"><span data-stu-id="3d0b5-161">If you're looking for a detailed walkthrough of hello lifecycle of reliable services, you can head over too[this article](service-fabric-reliable-services-lifecycle.md).</span></span>

## <a name="example-services"></a><span data-ttu-id="3d0b5-162">Exempel services</span><span class="sxs-lookup"><span data-stu-id="3d0b5-162">Example services</span></span>
<span data-ttu-id="3d0b5-163">Att veta den här programmeringsmodell ska vi ta en titt på två olika tjänster toosee hur dessa delar hänger ihop.</span><span class="sxs-lookup"><span data-stu-id="3d0b5-163">Knowing this programming model, let's take a quick look at two different services toosee how these pieces fit together.</span></span>

### <a name="stateless-reliable-services"></a><span data-ttu-id="3d0b5-164">Tillståndslösa Reliable Services</span><span class="sxs-lookup"><span data-stu-id="3d0b5-164">Stateless Reliable Services</span></span>
<span data-ttu-id="3d0b5-165">Tillståndslösa tjänsten är en där det finns ingen delstat bibehålls inom hello service mellan anrop.</span><span class="sxs-lookup"><span data-stu-id="3d0b5-165">A stateless service is one where there is no state maintained within hello service across calls.</span></span> <span data-ttu-id="3d0b5-166">Alla lägen som finns är enbart tillgänglig och behöver inte synkronisering, replikering, beständiga eller hög tillgänglighet.</span><span class="sxs-lookup"><span data-stu-id="3d0b5-166">Any state that is present is entirely disposable and doesn't require synchronization, replication, persistence, or high availability.</span></span>

<span data-ttu-id="3d0b5-167">Anta till exempel att en kalkylator som har inget minne och tar emot alla villkor och åtgärder tooperform på samma gång.</span><span class="sxs-lookup"><span data-stu-id="3d0b5-167">For example, consider a calculator that has no memory and receives all terms and operations tooperform at once.</span></span>

<span data-ttu-id="3d0b5-168">I det här fallet hello `RunAsync()` (C#) eller `runAsync()` (Java) för hello-tjänsten kan vara tom, eftersom det finns ingen bakgrund aktivitet-bearbetning hello tjänsten måste toodo.</span><span class="sxs-lookup"><span data-stu-id="3d0b5-168">In this case, hello `RunAsync()` (C#) or `runAsync()` (Java) of hello service can be empty, since there is no background task-processing that hello service needs toodo.</span></span> <span data-ttu-id="3d0b5-169">När hello Kalkylatorn tjänst skapas, returneras ett `ICommunicationListener` (C#) eller `CommunicationListener` (Java) (till exempel [Web API](service-fabric-reliable-services-communication-webapi.md)) som öppnar en lyssnarslutpunkten på vissa port.</span><span class="sxs-lookup"><span data-stu-id="3d0b5-169">When hello calculator service is created, it returns an `ICommunicationListener` (C#) or `CommunicationListener` (Java) (for example [Web API](service-fabric-reliable-services-communication-webapi.md)) that opens up a listening endpoint on some port.</span></span> <span data-ttu-id="3d0b5-170">Den här lyssnarslutpunkten skapar toohello beräkning av olika metoder (exempel: ”Lägg till (n1, n2)”) som definierar hello Kalkylatorn offentliga API: N.</span><span class="sxs-lookup"><span data-stu-id="3d0b5-170">This listening endpoint hooks up toohello different calculation methods (example: "Add(n1, n2)") that define hello calculator's public API.</span></span>

<span data-ttu-id="3d0b5-171">När ett anrop görs från en klient, hello lämplig metod har anropats och hello Kalkylatorn tjänsten utför hello på hello data som anges och returnerar hello resultat.</span><span class="sxs-lookup"><span data-stu-id="3d0b5-171">When a call is made from a client, hello appropriate method is invoked, and hello calculator service performs hello operations on hello data provided and returns hello result.</span></span> <span data-ttu-id="3d0b5-172">Informationen lagras inte i några tillstånd.</span><span class="sxs-lookup"><span data-stu-id="3d0b5-172">It doesn't store any state.</span></span>

<span data-ttu-id="3d0b5-173">Inte lagrar några interna tillstånd enkelt kalkylator för det här exemplet.</span><span class="sxs-lookup"><span data-stu-id="3d0b5-173">Not storing any internal state makes this example calculator simple.</span></span> <span data-ttu-id="3d0b5-174">Men de flesta tjänster är inte helt tillståndslösa.</span><span class="sxs-lookup"><span data-stu-id="3d0b5-174">But most services aren't truly stateless.</span></span> <span data-ttu-id="3d0b5-175">I stället gör de deras tillstånd toosome andra store.</span><span class="sxs-lookup"><span data-stu-id="3d0b5-175">Instead, they externalize their state toosome other store.</span></span> <span data-ttu-id="3d0b5-176">(Till exempel ett webbprogram som förlitar sig på att hålla sessionstillstånd i en säkerhetskopiering eller cache är inte tillståndslösa.)</span><span class="sxs-lookup"><span data-stu-id="3d0b5-176">(For example, any web app that relies on keeping session state in a backing store or cache is not stateless.)</span></span>

<span data-ttu-id="3d0b5-177">Ett vanligt exempel på hur tillståndslösa tjänster används i Service Fabric är som en klientdel som visar hello offentliga API: et för ett webbprogram.</span><span class="sxs-lookup"><span data-stu-id="3d0b5-177">A common example of how stateless services are used in Service Fabric is as a front-end that exposes hello public-facing API for a web application.</span></span> <span data-ttu-id="3d0b5-178">hello klienttjänst pratar sedan toostateful services toocomplete en användarbegäran.</span><span class="sxs-lookup"><span data-stu-id="3d0b5-178">hello front-end service then talks toostateful services toocomplete a user request.</span></span> <span data-ttu-id="3d0b5-179">I det här fallet är anrop från klienter dirigerad tooa kända port, till exempel 80, där hello tillståndslösa tjänsten lyssnar.</span><span class="sxs-lookup"><span data-stu-id="3d0b5-179">In this case, calls from clients are directed tooa known port, such as 80, where hello stateless service is listening.</span></span> <span data-ttu-id="3d0b5-180">Tillståndslösa tjänsten tar emot hello anrop och avgör om hello anropet kommer från en betrodd part och vilken tjänst som den är avsedd för.</span><span class="sxs-lookup"><span data-stu-id="3d0b5-180">This stateless service receives hello call and determines whether hello call is from a trusted party and which service it's destined for.</span></span>  <span data-ttu-id="3d0b5-181">Hello tillståndslösa tjänsten vidarebefordrar hello anropet toohello rätt partition av hello tillståndskänslig service och väntar på svar.</span><span class="sxs-lookup"><span data-stu-id="3d0b5-181">Then, hello stateless service forwards hello call toohello correct partition of hello stateful service and waits for a response.</span></span> <span data-ttu-id="3d0b5-182">När hello tillståndslösa tjänsten tar emot ett svar, svarar den ursprungliga toohello-klienten.</span><span class="sxs-lookup"><span data-stu-id="3d0b5-182">When hello stateless service receives a response, it replies toohello original client.</span></span> <span data-ttu-id="3d0b5-183">Ett exempel på dessa tjänster finns i våra exempel [C#](https://github.com/Azure-Samples/service-fabric-dotnet-getting-started) / [Java](https://github.com/Azure-Samples/service-fabric-java-getting-started/tree/master/Actors/VisualObjectActor/VisualObjectWebService).</span><span class="sxs-lookup"><span data-stu-id="3d0b5-183">An example of such a service is in our samples [C#](https://github.com/Azure-Samples/service-fabric-dotnet-getting-started) / [Java](https://github.com/Azure-Samples/service-fabric-java-getting-started/tree/master/Actors/VisualObjectActor/VisualObjectWebService).</span></span> <span data-ttu-id="3d0b5-184">Detta är bara ett exempel på detta mönster i hello-exempel finns det andra i samt andra prover.</span><span class="sxs-lookup"><span data-stu-id="3d0b5-184">This is only one example of this pattern in hello samples, there are others in other samples as well.</span></span>

### <a name="stateful-reliable-services"></a><span data-ttu-id="3d0b5-185">Tillståndskänsliga Reliable Services</span><span class="sxs-lookup"><span data-stu-id="3d0b5-185">Stateful Reliable Services</span></span>
<span data-ttu-id="3d0b5-186">En tillståndskänslig service är en som måste ha en del av tillstånd hålls konsekvent och för hello tjänsten toofunction.</span><span class="sxs-lookup"><span data-stu-id="3d0b5-186">A stateful service is one that must have some portion of state kept consistent and present in order for hello service toofunction.</span></span> <span data-ttu-id="3d0b5-187">Överväg att en tjänst som ständigt beräknar en rullande medelvärdet för ett värde baserat på den tar emot uppdateringar.</span><span class="sxs-lookup"><span data-stu-id="3d0b5-187">Consider a service that constantly computes a rolling average of some value based on updates it receives.</span></span> <span data-ttu-id="3d0b5-188">toodo, det måste ha hello aktuella uppsättningen av inkommande begäranden måste tooprocess och hello aktuella medelvärde.</span><span class="sxs-lookup"><span data-stu-id="3d0b5-188">toodo this, it must have hello current set of incoming requests it needs tooprocess and hello current average.</span></span> <span data-ttu-id="3d0b5-189">Alla tjänster som hämtar bearbetar och lagrar information i en extern butik (till exempel ett Azure blob eller tabell store idag) är tillståndskänslig.</span><span class="sxs-lookup"><span data-stu-id="3d0b5-189">Any service that retrieves, processes, and stores information in an external store (such as an Azure blob or table store today) is stateful.</span></span> <span data-ttu-id="3d0b5-190">Den bevarar bara dess tillstånd i hello externa tillståndslagret.</span><span class="sxs-lookup"><span data-stu-id="3d0b5-190">It just keeps its state in hello external state store.</span></span>

<span data-ttu-id="3d0b5-191">De flesta tjänster lagra idag deras tillstånd externt, eftersom den erbjuder tillförlitlighet, tillgänglighet, skalbarhet och konsekvens för det aktuella tillståndet hello extern butik.</span><span class="sxs-lookup"><span data-stu-id="3d0b5-191">Most services today store their state externally, since hello external store is what provides reliability, availability, scalability, and consistency for that state.</span></span> <span data-ttu-id="3d0b5-192">I Service Fabric services är inte obligatoriska toostore externt deras tillstånd.</span><span class="sxs-lookup"><span data-stu-id="3d0b5-192">In Service Fabric, services aren't required toostore their state externally.</span></span> <span data-ttu-id="3d0b5-193">Service Fabric hand tar om kraven för både hello service-koden och hello-tjänstens tillstånd.</span><span class="sxs-lookup"><span data-stu-id="3d0b5-193">Service Fabric takes care of these requirements for both hello service code and hello service state.</span></span>

> [!NOTE]
> <span data-ttu-id="3d0b5-194">Stöd för tillståndskänsliga Reliable Services är inte tillgängligt på Linux ännu (för C# och Java).</span><span class="sxs-lookup"><span data-stu-id="3d0b5-194">Support for Stateful Reliable Services is not available on Linux yet (for C# or Java).</span></span>
>

<span data-ttu-id="3d0b5-195">Anta att vi vill toowrite en tjänst som bearbetar bilder.</span><span class="sxs-lookup"><span data-stu-id="3d0b5-195">Let's say we want toowrite a service that processes images.</span></span> <span data-ttu-id="3d0b5-196">toodo detta hello tjänsten tar in en avbildning och hello serie konverteringar tooperform på avbildningen.</span><span class="sxs-lookup"><span data-stu-id="3d0b5-196">toodo this, hello service takes in an image and hello series of conversions tooperform on that image.</span></span> <span data-ttu-id="3d0b5-197">Den här tjänsten returnerar en lyssnare för kommunikation (vi anta att det är en WebAPI) som visar en API som `ConvertImage(Image i, IList<Conversion> conversions)`.</span><span class="sxs-lookup"><span data-stu-id="3d0b5-197">This service returns a communication listener (let's suppose it's a WebAPI) that exposes an API like `ConvertImage(Image i, IList<Conversion> conversions)`.</span></span> <span data-ttu-id="3d0b5-198">När den tar emot en begäran hello-tjänsten lagrar den i en `IReliableQueue`, och returnerar vissa id toohello klienten så att den kan spåra hello-begäran.</span><span class="sxs-lookup"><span data-stu-id="3d0b5-198">When it receives a request, hello service stores it in a `IReliableQueue`, and returns some id toohello client so it can track hello request.</span></span>

<span data-ttu-id="3d0b5-199">I den här tjänsten `RunAsync()` kan vara mer komplexa.</span><span class="sxs-lookup"><span data-stu-id="3d0b5-199">In this service, `RunAsync()` could be more complex.</span></span> <span data-ttu-id="3d0b5-200">hello-tjänsten har en loop i dess `RunAsync()` som tar emot förfrågningar från `IReliableQueue` och utför hello konverteringar som begärdes.</span><span class="sxs-lookup"><span data-stu-id="3d0b5-200">hello service has a loop inside its `RunAsync()` that pulls requests out of `IReliableQueue` and performs hello conversions requested.</span></span> <span data-ttu-id="3d0b5-201">hello resultat lagras i en `IReliableDictionary` så att när hello klienten kommer tillbaka kan de få deras konverterade bilder.</span><span class="sxs-lookup"><span data-stu-id="3d0b5-201">hello results get stored in an `IReliableDictionary` so that when hello client comes back they can get their converted images.</span></span> <span data-ttu-id="3d0b5-202">tooensure som även om något misslyckas hello bilden inte förlorade, tillförlitlig tjänsten skulle hämtar utanför hello kön, utföra hello konverteringar och lagra hello resultat i en enda transaktion.</span><span class="sxs-lookup"><span data-stu-id="3d0b5-202">tooensure that even if something fails hello image isn't lost, this Reliable Service would pull out of hello queue, perform hello conversions, and store hello result all in a single transaction.</span></span> <span data-ttu-id="3d0b5-203">I det här fallet hello-meddelande tas bort från kön hello och hello resultat lagras i hello resultatet ordlista endast när hello konverteringar har slutförts.</span><span class="sxs-lookup"><span data-stu-id="3d0b5-203">In this case, hello message is removed from hello queue and hello results are stored in hello result dictionary only when hello conversions are complete.</span></span> <span data-ttu-id="3d0b5-204">Hello-tjänsten kan även pull hello bilden utanför hello kön och omedelbart lagra det i ett Arkiv för fjärråtkomst.</span><span class="sxs-lookup"><span data-stu-id="3d0b5-204">Alternatively, hello service could pull hello image out of hello queue and immediately store it in a remote store.</span></span> <span data-ttu-id="3d0b5-205">Detta minskar hello mängden hello tillståndstjänsten har toomanage, men ökar komplexiteten eftersom hello-tjänsten har tookeep hello nödvändiga metadata toomanage hello remote store.</span><span class="sxs-lookup"><span data-stu-id="3d0b5-205">This reduces hello amount of state hello service has toomanage, but increases complexity since hello service has tookeep hello necessary metadata toomanage hello remote store.</span></span> <span data-ttu-id="3d0b5-206">Om något fel i med antingen metoden kvar hello mellersta hello begäran i hello kön väntar toobe bearbetas.</span><span class="sxs-lookup"><span data-stu-id="3d0b5-206">With either approach, if something failed in hello middle hello request remains in hello queue waiting toobe processed.</span></span>

<span data-ttu-id="3d0b5-207">En sak toonote om den här tjänsten är att det låter som en normal .NET-tjänsten!</span><span class="sxs-lookup"><span data-stu-id="3d0b5-207">One thing toonote about this service is that it sounds like a normal .NET service!</span></span> <span data-ttu-id="3d0b5-208">hello enda skillnaden är att hello datastrukturer som används (`IReliableQueue` och `IReliableDictionary`) tillhandahålls av Service Fabric och är tillförlitliga, hög tillgänglighet och konsekvent.</span><span class="sxs-lookup"><span data-stu-id="3d0b5-208">hello only difference is that hello data structures being used (`IReliableQueue` and `IReliableDictionary`) are provided by Service Fabric, and are highly reliable, available, and consistent.</span></span>

## <a name="when-toouse-reliable-services-apis"></a><span data-ttu-id="3d0b5-209">När toouse Reliable Services API: er</span><span class="sxs-lookup"><span data-stu-id="3d0b5-209">When toouse Reliable Services APIs</span></span>
<span data-ttu-id="3d0b5-210">Om hello följande karaktäriserar behöver ditt program bör du överväga Reliable Services API: er:</span><span class="sxs-lookup"><span data-stu-id="3d0b5-210">If any of hello following characterize your application service needs, then you should consider Reliable Services APIs:</span></span>

* <span data-ttu-id="3d0b5-211">Du vill din tjänst kod (och alternativt tillstånd) toobe hög tillgänglighet och tillförlitlig</span><span class="sxs-lookup"><span data-stu-id="3d0b5-211">You want your service's code (and optionally state) toobe highly available and reliable</span></span>
* <span data-ttu-id="3d0b5-212">Du behöver transaktionella garantier över flera enheter av tillstånd (till exempel order och ordning artiklar).</span><span class="sxs-lookup"><span data-stu-id="3d0b5-212">You need transactional guarantees across multiple units of state (for example, orders and order line items).</span></span>
* <span data-ttu-id="3d0b5-213">Programmets tillstånd kan modelleras naturligt som tillförlitliga ordböcker och köer.</span><span class="sxs-lookup"><span data-stu-id="3d0b5-213">Your application’s state can be naturally modeled as Reliable Dictionaries and Queues.</span></span>
* <span data-ttu-id="3d0b5-214">Ditt program, kod eller tillstånd måste toobe hög tillgänglighet med låg latens läsningar och skrivningar.</span><span class="sxs-lookup"><span data-stu-id="3d0b5-214">Your applications code or state needs toobe highly available with low latency reads and writes.</span></span>
* <span data-ttu-id="3d0b5-215">Programmet måste toocontrol hello samtidighet eller Granulariteten för överförda åtgärder mellan en eller flera tillförlitliga samlingar.</span><span class="sxs-lookup"><span data-stu-id="3d0b5-215">Your application needs toocontrol hello concurrency or granularity of transacted operations across one or more Reliable Collections.</span></span>
* <span data-ttu-id="3d0b5-216">Vill du toomanage hello kommunikation eller kontrollen hello partitioneringsschema för din tjänst.</span><span class="sxs-lookup"><span data-stu-id="3d0b5-216">You want toomanage hello communications or control hello partitioning scheme for your service.</span></span>
* <span data-ttu-id="3d0b5-217">Din kod måste en fritrådade körningsmiljö.</span><span class="sxs-lookup"><span data-stu-id="3d0b5-217">Your code needs a free-threaded runtime environment.</span></span>
* <span data-ttu-id="3d0b5-218">Programmet måste toodynamically skapa eller förstöra tillförlitliga ordlistor eller köer eller hela tjänster vid körning.</span><span class="sxs-lookup"><span data-stu-id="3d0b5-218">Your application needs toodynamically create or destroy Reliable Dictionaries or Queues or whole Services at runtime.</span></span>
* <span data-ttu-id="3d0b5-219">Du behöver tooprogrammatically styr förutsatt att Service Fabric-säkerhetskopiering och återställning av funktioner för din tjänst tillstånd.</span><span class="sxs-lookup"><span data-stu-id="3d0b5-219">You need tooprogrammatically control Service Fabric-provided backup and restore features for your service’s state.</span></span>
* <span data-ttu-id="3d0b5-220">Programmet måste toomaintain ändringshistoriken för dess enheter av tillstånd.</span><span class="sxs-lookup"><span data-stu-id="3d0b5-220">Your application needs toomaintain change history for its units of state.</span></span>
* <span data-ttu-id="3d0b5-221">Du vill toodevelop eller använda tillstånd för tredje part utvecklade, anpassade providers.</span><span class="sxs-lookup"><span data-stu-id="3d0b5-221">You want toodevelop or consume third-party-developed, custom state providers.</span></span>

## <a name="next-steps"></a><span data-ttu-id="3d0b5-222">Nästa steg</span><span class="sxs-lookup"><span data-stu-id="3d0b5-222">Next steps</span></span>
* [<span data-ttu-id="3d0b5-223">Snabbstart för Reliable Services</span><span class="sxs-lookup"><span data-stu-id="3d0b5-223">Reliable Services quick start</span></span>](service-fabric-reliable-services-quick-start.md)
* [<span data-ttu-id="3d0b5-224">Reliable Services avancerade användning</span><span class="sxs-lookup"><span data-stu-id="3d0b5-224">Reliable Services advanced usage</span></span>](service-fabric-reliable-services-advanced-usage.md)
* [<span data-ttu-id="3d0b5-225">hello programmeringsmodell för Reliable Actors</span><span class="sxs-lookup"><span data-stu-id="3d0b5-225">hello Reliable Actors programming model</span></span>](service-fabric-reliable-actors-introduction.md)

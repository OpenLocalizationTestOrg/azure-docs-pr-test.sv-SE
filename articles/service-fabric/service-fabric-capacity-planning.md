---
title: "aaaCapacity planering för Service Fabric-appar | Microsoft Docs"
description: "Beskriver hur tooidentify hello antalet compute-noder som krävs för ett Service Fabric-program"
services: service-fabric
documentationcenter: .net
author: mani-ramaswamy
manager: markfuss
editor: 
ms.assetid: 9fa47be0-50a2-4a51-84a5-20992af94bea
ms.service: service-fabric
ms.devlang: dotnet
ms.topic: article
ms.tgt_pltfrm: NA
ms.workload: NA
ms.date: 8/9/2017
ms.author: subramar
ms.openlocfilehash: 44a69e9d8ec5efcc43122dc42e8f923ef37378f2
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: sv-SE
ms.lasthandoff: 10/06/2017
---
# <a name="capacity-planning-for-service-fabric-applications"></a><span data-ttu-id="e403f-103">Kapacitetsplanering för Service Fabric-program</span><span class="sxs-lookup"><span data-stu-id="e403f-103">Capacity planning for Service Fabric applications</span></span>
<span data-ttu-id="e403f-104">Det här dokumentet lär du dig hur tooestimate hello mycket resurser (processorer, minne, disk och lagring) måste toorun Azure Service Fabric-program.</span><span class="sxs-lookup"><span data-stu-id="e403f-104">This document teaches you how tooestimate hello amount of resources (CPUs, RAM, disk storage) you need toorun your Azure Service Fabric applications.</span></span> <span data-ttu-id="e403f-105">Det är vanligt för din resurs krav toochange över tid.</span><span class="sxs-lookup"><span data-stu-id="e403f-105">It is common for your resource requirements toochange over time.</span></span> <span data-ttu-id="e403f-106">Du kräver vanligtvis några resurser som du utvecklar och testning i tjänsten och sedan kräver mer resurser som du gå till produktion och programmet växer i större utsträckning.</span><span class="sxs-lookup"><span data-stu-id="e403f-106">You typically require few resources as you develop/test your service, and then require more resources as you go into production and your application grows in popularity.</span></span> <span data-ttu-id="e403f-107">När du skapar ditt program kan tänka igenom hello långsiktiga kraven och fatta beslut som gör att din tjänst tooscale toomeet hög kundernas behov.</span><span class="sxs-lookup"><span data-stu-id="e403f-107">When you design your application, think through hello long-term requirements and make choices that allow your service tooscale toomeet high customer demand.</span></span>

 <span data-ttu-id="e403f-108">När du skapar ett Service Fabric-kluster kan bestämma du vilka typer av virtuella datorer (VM) utgör hello klustret.</span><span class="sxs-lookup"><span data-stu-id="e403f-108">When you create a Service Fabric cluster, you decide what kinds of virtual machines (VMs) make up hello cluster.</span></span> <span data-ttu-id="e403f-109">Varje virtuell dator har en begränsad mängd resurser i hello form av CPU (kärnor och hastighet), nätverkets bandbredd, RAM-minne och diskutrymme.</span><span class="sxs-lookup"><span data-stu-id="e403f-109">Each VM comes with a limited amount of resources in hello form of CPUs (cores and speed), network bandwidth, RAM, and disk storage.</span></span> <span data-ttu-id="e403f-110">När tjänsten växer med tiden kan uppgradera du tooVMs som erbjuder större resurser och/eller lägga till fler virtuella datorer tooyour klustret.</span><span class="sxs-lookup"><span data-stu-id="e403f-110">As your service grows over time, you can upgrade tooVMs that offer greater resources and/or add more VMs tooyour cluster.</span></span> <span data-ttu-id="e403f-111">toodo hello senare, du måste skapa din tjänst först så att den kan dra nytta av nya virtuella datorer som hämta läggs toohello klustret dynamiskt.</span><span class="sxs-lookup"><span data-stu-id="e403f-111">toodo hello latter, you must architect your service initially so it can take advantage of new VMs that get dynamically added toohello cluster.</span></span>

<span data-ttu-id="e403f-112">Vissa tjänster hantera lite toono data på hello själva de virtuella datorerna.</span><span class="sxs-lookup"><span data-stu-id="e403f-112">Some services manage little toono data on hello VMs themselves.</span></span> <span data-ttu-id="e403f-113">Kapacitetsplanering för dessa tjänster bör fokuserar huvudsakligen på prestanda, vilket innebär att välja hello lämpliga därför CPU (kärnor och hastighet) hello virtuella datorer.</span><span class="sxs-lookup"><span data-stu-id="e403f-113">Therefore, capacity planning for these services should focus primarily on performance, which means selecting hello appropriate CPUs (cores and speed) of hello VMs.</span></span> <span data-ttu-id="e403f-114">Dessutom bör du bandbredd i nätverket, inklusive hur ofta nätverket överföringar sker och hur mycket data överförs.</span><span class="sxs-lookup"><span data-stu-id="e403f-114">In addition, you should consider network bandwidth, including how frequently network transfers are occurring and how much data is being transferred.</span></span> <span data-ttu-id="e403f-115">Om din tjänst måste tooperform såväl som tjänsten Minnesanvändningen ökar, kan du lägga till fler virtuella datorer toohello klustret och läsa in saldo hello nätverksbegäranden över alla hello virtuella datorer.</span><span class="sxs-lookup"><span data-stu-id="e403f-115">If your service needs tooperform well as service usage increases, you can add more VMs toohello cluster and load balance hello network requests across all hello VMs.</span></span>

<span data-ttu-id="e403f-116">För tjänster som hanterar stora mängder data på hello virtuella datorer, bör kapacitetsplanering fokuserar främst på storleken.</span><span class="sxs-lookup"><span data-stu-id="e403f-116">For services that manage large amounts of data on hello VMs, capacity planning should focus primarily on size.</span></span> <span data-ttu-id="e403f-117">Därför bör du noga överväga hello lagringskapacitet enligt hello VM RAM-minne och diskutrymme.</span><span class="sxs-lookup"><span data-stu-id="e403f-117">Thus, you should carefully consider hello capacity of hello VM's RAM and disk storage.</span></span> <span data-ttu-id="e403f-118">hello virtuellt minne management system i Windows gör diskutrymme som ser ut som RAM tooapplication kod.</span><span class="sxs-lookup"><span data-stu-id="e403f-118">hello virtual memory management system in Windows makes disk space look like RAM tooapplication code.</span></span> <span data-ttu-id="e403f-119">Dessutom ger hello Service Fabric runtime smart växling behålla endast varm data i minnet och flytta hello kalldata toodisk.</span><span class="sxs-lookup"><span data-stu-id="e403f-119">In addition, hello Service Fabric runtime provides smart paging keeping only hot data in memory and moving hello cold data toodisk.</span></span> <span data-ttu-id="e403f-120">Program kan därmed använda mer minne än vad som är fysiskt tillgängligt på hello VM.</span><span class="sxs-lookup"><span data-stu-id="e403f-120">Applications can thus use more memory than is physically available on hello VM.</span></span> <span data-ttu-id="e403f-121">Med mer RAM-minne bara ökar prestanda, eftersom hello VM kan ha flera disklagring i RAM-minne.</span><span class="sxs-lookup"><span data-stu-id="e403f-121">Having more RAM simply increases performance, since hello VM can keep more disk storage in RAM.</span></span> <span data-ttu-id="e403f-122">hello VM som du väljer ska ha en tillräckligt stor toostore hello diskdata som du vill använda på hello VM.</span><span class="sxs-lookup"><span data-stu-id="e403f-122">hello VM you select should have a disk large enough toostore hello data that you want on hello VM.</span></span> <span data-ttu-id="e403f-123">På liknande sätt ska hello VM ha tillräckligt med RAM-minne tooprovide du med hello prestanda som du önskar.</span><span class="sxs-lookup"><span data-stu-id="e403f-123">Similarly, hello VM should have enough RAM tooprovide you with hello performance you desire.</span></span> <span data-ttu-id="e403f-124">Din tjänst data växer över tid, kan du lägga till fler virtuella datorer toohello klustret och partition hello data över alla hello virtuella datorer.</span><span class="sxs-lookup"><span data-stu-id="e403f-124">If your service's data grows over time, you can add more VMs toohello cluster and partition hello data across all hello VMs.</span></span>

## <a name="determine-how-many-nodes-you-need"></a><span data-ttu-id="e403f-125">Fastställa hur många noder du behöver</span><span class="sxs-lookup"><span data-stu-id="e403f-125">Determine how many nodes you need</span></span>
<span data-ttu-id="e403f-126">Partitionering din tjänst kan du tooscale ut din tjänst data.</span><span class="sxs-lookup"><span data-stu-id="e403f-126">Partitioning your service allows you tooscale out your service's data.</span></span> <span data-ttu-id="e403f-127">Mer information om partitionering finns [partitionering Service Fabric](service-fabric-concepts-partitioning.md).</span><span class="sxs-lookup"><span data-stu-id="e403f-127">For more information on partitioning, see [Partitioning Service Fabric](service-fabric-concepts-partitioning.md).</span></span> <span data-ttu-id="e403f-128">Varje partition måste få plats i en enda virtuell dator, men flera (små) partitioner kan placeras på en enda virtuell dator.</span><span class="sxs-lookup"><span data-stu-id="e403f-128">Each partition must fit within a single VM, but multiple (small) partitions can be placed on a single VM.</span></span> <span data-ttu-id="e403f-129">Därför ger har flera mindre partitioner dig större flexibilitet än att ha några större partitioner.</span><span class="sxs-lookup"><span data-stu-id="e403f-129">So, having more small partitions gives you greater flexibility than having a few larger partitions.</span></span> <span data-ttu-id="e403f-130">hello kompromiss är att ha många partitioner ökar Service Fabric kostnader och du kan inte utföra överförda åtgärder mellan partitioner.</span><span class="sxs-lookup"><span data-stu-id="e403f-130">hello trade-off is that having lots of partitions increases Service Fabric overhead and you cannot perform transacted operations across partitions.</span></span> <span data-ttu-id="e403f-131">Det finns också flera potentiella nätverkstrafik om koden för tjänsten behöver ofta tooaccess datadelar som bor i olika partitioner.</span><span class="sxs-lookup"><span data-stu-id="e403f-131">There is also more potential network traffic if your service code frequently needs tooaccess pieces of data that live in different partitions.</span></span> <span data-ttu-id="e403f-132">När du utformar din tjänst bör du noggrant dessa- och nackdelar tooarrive på en effektiv partitionering strategi.</span><span class="sxs-lookup"><span data-stu-id="e403f-132">When designing your service, you should carefully consider these pros and cons tooarrive at an effective partitioning strategy.</span></span>

<span data-ttu-id="e403f-133">Anta att programmet har en enda tillståndskänslig tjänst som har en store-storlek som du förväntar dig toogrow tooDB_Size GB i ett år.</span><span class="sxs-lookup"><span data-stu-id="e403f-133">Let's assume your application has a single stateful service that has a store size that you expect toogrow tooDB_Size GB in a year.</span></span> <span data-ttu-id="e403f-134">Du är beredd tooadd fler program (och partitioner) som uppstår tillväxt utöver det aktuella året.</span><span class="sxs-lookup"><span data-stu-id="e403f-134">You are willing tooadd more applications (and partitions) as you experience growth beyond that year.</span></span>  <span data-ttu-id="e403f-135">hello replikering faktor (RF) som avgör hello antalet repliker för din tjänst påverkar hello totala DB_Size.</span><span class="sxs-lookup"><span data-stu-id="e403f-135">hello replication factor (RF), which determines hello number of replicas for your service impacts hello total DB_Size.</span></span> <span data-ttu-id="e403f-136">hello är totala DB_Size över alla repliker hello replikering faktor multiplicerat med DB_Size.</span><span class="sxs-lookup"><span data-stu-id="e403f-136">hello total DB_Size across all replicas is hello Replication Factor multiplied by DB_Size.</span></span>  <span data-ttu-id="e403f-137">Node_Size representerar hello disk space/RAM-minne per nod önskade toouse för din tjänst.</span><span class="sxs-lookup"><span data-stu-id="e403f-137">Node_Size represents hello disk space/RAM per node you want toouse for your service.</span></span> <span data-ttu-id="e403f-138">För bästa prestanda bör hello DB_Size ryms i minnet i hello klustret, och en Node_Size är runt hello RAM för hello VM bör väljas.</span><span class="sxs-lookup"><span data-stu-id="e403f-138">For best performance, hello DB_Size should fit into memory across hello cluster, and a Node_Size that is around hello RAM of hello VM should be chosen.</span></span> <span data-ttu-id="e403f-139">Genom att allokera en Node_Size som är större än hello RAM kapacitet måste hello sidindelning som tillhandahålls av hello Service Fabric runtime.</span><span class="sxs-lookup"><span data-stu-id="e403f-139">By allocating a Node_Size that is larger than hello RAM capacity, you are relying on hello paging provided by hello Service Fabric runtime.</span></span> <span data-ttu-id="e403f-140">Prestandan kanske därför inte är optimalt om din hela data betraktas som toobe varm (sedan sedan hello data är växlingsbart systemminne in/ut).</span><span class="sxs-lookup"><span data-stu-id="e403f-140">Thus, your performance may not be optimal if your entire data is considered toobe hot (since then hello data is paged in/out).</span></span> <span data-ttu-id="e403f-141">För många tjänster där en bråkdel av hello data är hot, är det dock mer kostnadseffektivt.</span><span class="sxs-lookup"><span data-stu-id="e403f-141">However, for many services where only a fraction of hello data is hot, it is more cost-effective.</span></span>

<span data-ttu-id="e403f-142">hello antalet noder som krävs för maximala prestanda kan beräknas enligt följande:</span><span class="sxs-lookup"><span data-stu-id="e403f-142">hello number of nodes required for maximum performance can be computed as follows:</span></span>

```
Number of Nodes = (DB_Size * RF)/Node_Size

```


## <a name="account-for-growth"></a><span data-ttu-id="e403f-143">Konto för tillväxt</span><span class="sxs-lookup"><span data-stu-id="e403f-143">Account for growth</span></span>
<span data-ttu-id="e403f-144">Du kanske vill toocompute hello antalet noder baserat på hello DB_Size som du förväntar dig din tjänst toogrow till, förutom toohello DB_Size som du började med.</span><span class="sxs-lookup"><span data-stu-id="e403f-144">You may want toocompute hello number of nodes based on hello DB_Size that you expect your service toogrow to, in addition toohello DB_Size that you began with.</span></span> <span data-ttu-id="e403f-145">Utöka sedan hello antalet noder i takt med din tjänst växer så att du inte överbelasta hello antalet noder.</span><span class="sxs-lookup"><span data-stu-id="e403f-145">Then, grow hello number of nodes as your service grows so that you are not over-provisioning hello number of nodes.</span></span> <span data-ttu-id="e403f-146">Men hello antalet partitioner ska baseras på hello antalet noder som behövs när du kör din tjänst på högsta tillväxt.</span><span class="sxs-lookup"><span data-stu-id="e403f-146">But hello number of partitions should be based on hello number of nodes that are needed when you're running your service at maximum growth.</span></span>

<span data-ttu-id="e403f-147">Det är bra toohave vissa extra datorer som är tillgängliga när som helst så att du kan hantera alla oväntat toppar eller inte (till exempel om några virtuella datorer gå).</span><span class="sxs-lookup"><span data-stu-id="e403f-147">It is good toohave some extra machines available at any time so that you can handle any unexpected spikes or failure (for example, if a few VMs go down).</span></span>  <span data-ttu-id="e403f-148">Hello extra kapacitet ska fastställas med hjälp av din förväntade toppar, utgångspunkt är tooreserve några extra VM: ar (5-10 procent extra).</span><span class="sxs-lookup"><span data-stu-id="e403f-148">While hello extra capacity should be determined by using your expected spikes, a starting point is tooreserve a few extra VMs (5-10 percent extra).</span></span>

<span data-ttu-id="e403f-149">hello ovan förutsätter att en enda tillståndskänslig tjänst.</span><span class="sxs-lookup"><span data-stu-id="e403f-149">hello preceding assumes a single stateful service.</span></span> <span data-ttu-id="e403f-150">Om du har mer än en tillståndskänslig service har tooadd hello DB_Size som är associerade med hello andra tjänster i hello formel.</span><span class="sxs-lookup"><span data-stu-id="e403f-150">If you have more than one stateful service, you have tooadd hello DB_Size associated with hello other services into hello equation.</span></span> <span data-ttu-id="e403f-151">Alternativt kan du beräkna hello antalet noder separat för varje tillståndskänslig service.</span><span class="sxs-lookup"><span data-stu-id="e403f-151">Alternatively, you can compute hello number of nodes separately for each stateful service.</span></span>  <span data-ttu-id="e403f-152">Tjänsten kan ha repliker eller partitioner som inte är Balanserat.</span><span class="sxs-lookup"><span data-stu-id="e403f-152">Your service may have replicas or partitions that aren't balanced.</span></span> <span data-ttu-id="e403f-153">Tänk på att partitioner kan också ha fler data än andra.</span><span class="sxs-lookup"><span data-stu-id="e403f-153">Keep in mind that partitions may also have more data than others.</span></span> <span data-ttu-id="e403f-154">Mer information om partitionering finns [partitionering artikel om bästa praxis](service-fabric-concepts-partitioning.md).</span><span class="sxs-lookup"><span data-stu-id="e403f-154">For more information on partitioning, see [partitioning article on best practices](service-fabric-concepts-partitioning.md).</span></span> <span data-ttu-id="e403f-155">Hello föregående formeln är dock partition och repliken storleksoberoende eftersom Service Fabric säkerställer att hello repliker sprids bland hello noderna på ett optimerat sätt.</span><span class="sxs-lookup"><span data-stu-id="e403f-155">However, hello preceding equation is partition and replica agnostic, because Service Fabric ensures that hello replicas are spread out among hello nodes in an optimized manner.</span></span>

## <a name="use-a-spreadsheet-for-cost-calculation"></a><span data-ttu-id="e403f-156">Använda ett kalkylblad för beräkning</span><span class="sxs-lookup"><span data-stu-id="e403f-156">Use a spreadsheet for cost calculation</span></span>
<span data-ttu-id="e403f-157">Nu vi lägger reellt tal i hello formel.</span><span class="sxs-lookup"><span data-stu-id="e403f-157">Now let's put some real numbers in hello formula.</span></span> <span data-ttu-id="e403f-158">En [exempel kalkylblad](https://servicefabricsdkstorage.blob.core.windows.net/publicrelease/SF%20VM%20Cost%20calculator-NEW.xlsx) visar hur tooplan hello kapacitet för ett program som innehåller tre typer av dataobjekt.</span><span class="sxs-lookup"><span data-stu-id="e403f-158">An [example spreadsheet](https://servicefabricsdkstorage.blob.core.windows.net/publicrelease/SF%20VM%20Cost%20calculator-NEW.xlsx) shows how tooplan hello capacity for an application that contains three types of data objects.</span></span> <span data-ttu-id="e403f-159">Vi ungefär storleken och hur många objekt som vi räknar med toohave för varje objekt.</span><span class="sxs-lookup"><span data-stu-id="e403f-159">For each object, we approximate its size and how many objects we expect toohave.</span></span> <span data-ttu-id="e403f-160">Vi kan också välja hur många repliker som vi vill för varje objekttyp.</span><span class="sxs-lookup"><span data-stu-id="e403f-160">We also select how many replicas we want of each object type.</span></span> <span data-ttu-id="e403f-161">hello beräknas hello totala mängden minne toobe lagras i hello kluster.</span><span class="sxs-lookup"><span data-stu-id="e403f-161">hello spreadsheet calculates hello total amount of memory toobe stored in hello cluster.</span></span>

<span data-ttu-id="e403f-162">Vi ange sedan ett VM-storlek och månadskostnaden.</span><span class="sxs-lookup"><span data-stu-id="e403f-162">Then we enter a VM size and monthly cost.</span></span> <span data-ttu-id="e403f-163">Baserat på hello VM-storlek, anger hello kalkylblad du hello minsta antalet partitioner måste du använda toosplit som passar dina data toophysically på hello noder.</span><span class="sxs-lookup"><span data-stu-id="e403f-163">Based on hello VM size, hello spreadsheet tells you hello minimum number of partitions you must use toosplit your data toophysically fit on hello nodes.</span></span> <span data-ttu-id="e403f-164">Du kanske vill ha ett större antal partitioner tooaccommodate ditt programs specifika beräknings- och trafikbehov.</span><span class="sxs-lookup"><span data-stu-id="e403f-164">You may desire a larger number of partitions tooaccommodate your application's specific computation and network traffic needs.</span></span> <span data-ttu-id="e403f-165">hello kalkylblad visar hello antalet partitioner som hanterar hello användarobjekt profil har ökat från en toosix.</span><span class="sxs-lookup"><span data-stu-id="e403f-165">hello spreadsheet shows hello number of partitions that are managing hello user profile objects has increased from one toosix.</span></span>

<span data-ttu-id="e403f-166">Baserat på den här informationen hello kalkylbladet innehåller nu att du kan få alla hello data med hello önskad partitioner och repliker fysiskt på ett kluster med noder 26.</span><span class="sxs-lookup"><span data-stu-id="e403f-166">Now, based on all this information, hello spreadsheet shows that you could physically get all hello data with hello desired partitions and replicas on a 26-node cluster.</span></span> <span data-ttu-id="e403f-167">Men skulle det här klustret tätt packas, så du kan vissa ytterligare noder tooaccommodate nodfel och uppgraderingar.</span><span class="sxs-lookup"><span data-stu-id="e403f-167">However, this cluster would be densely packed, so you may want some additional nodes tooaccommodate node failures and upgrades.</span></span> <span data-ttu-id="e403f-168">hello kalkylblad visar också att med mer än 57 noder ger inga ytterligare värde eftersom du ha tomma noder.</span><span class="sxs-lookup"><span data-stu-id="e403f-168">hello spreadsheet also shows that having more than 57 nodes provides no additional value because you would have empty nodes.</span></span> <span data-ttu-id="e403f-169">Igen, kanske du vill toogo ovan 57 noder ändå tooaccommodate nodfel och uppgraderingar.</span><span class="sxs-lookup"><span data-stu-id="e403f-169">Again, you may want toogo above 57 nodes anyway tooaccommodate node failures and upgrades.</span></span> <span data-ttu-id="e403f-170">Du kan justera hello kalkylblad toomatch ditt programs specifika behov.</span><span class="sxs-lookup"><span data-stu-id="e403f-170">You can tweak hello spreadsheet toomatch your application's specific needs.</span></span>   

![Kalkylblad för beräkningen][Image1]

## <a name="next-steps"></a><span data-ttu-id="e403f-172">Nästa steg</span><span class="sxs-lookup"><span data-stu-id="e403f-172">Next steps</span></span>
<span data-ttu-id="e403f-173">Checka ut [partitionering Service Fabric services] [ 10] toolearn mer om partitionering din tjänst.</span><span class="sxs-lookup"><span data-stu-id="e403f-173">Check out [Partitioning Service Fabric services][10] toolearn more about partitioning your service.</span></span>

<!--Image references-->
[Image1]: ./media/SF-Cost.png

<!--Link references--In actual articles, you only need a single period before hello slash-->
[10]: service-fabric-concepts-partitioning.md

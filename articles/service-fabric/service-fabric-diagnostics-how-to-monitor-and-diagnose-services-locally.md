---
title: "aaaDebug Azure mikrotjänster i Windows | Microsoft Docs"
description: "Lär dig hur toomonitor och diagnostisera dina tjänster som skrivits med Microsoft Azure Service Fabric på en dator för lokal utveckling."
services: service-fabric
documentationcenter: .net
author: dkkapur
manager: timlt
editor: 
ms.assetid: edcc0631-ed2d-45a3-851d-2c4fa0f4a326
ms.service: service-fabric
ms.devlang: dotnet
ms.topic: article
ms.tgt_pltfrm: NA
ms.workload: NA
ms.date: 04/24/2017
ms.author: dekapur
ms.openlocfilehash: 24868aa194b8a28fa3e6de95c1de5506d912a544
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: sv-SE
ms.lasthandoff: 10/06/2017
---
# <a name="monitor-and-diagnose-services-in-a-local-machine-development-setup"></a><span data-ttu-id="a6301-103">Övervaka och diagnostisera tjänster i en inställning för utveckling av lokal dator</span><span class="sxs-lookup"><span data-stu-id="a6301-103">Monitor and diagnose services in a local machine development setup</span></span>
> [!div class="op_single_selector"]
> * [<span data-ttu-id="a6301-104">Windows</span><span class="sxs-lookup"><span data-stu-id="a6301-104">Windows</span></span>](service-fabric-diagnostics-how-to-monitor-and-diagnose-services-locally.md)
> * [<span data-ttu-id="a6301-105">Linux</span><span class="sxs-lookup"><span data-stu-id="a6301-105">Linux</span></span>](service-fabric-diagnostics-how-to-monitor-and-diagnose-services-locally-linux.md)
> 
> 

<span data-ttu-id="a6301-106">Övervaka, identifiera, diagnostisera och felsöka tillåta tjänster toocontinue med minimala störningar toohello användarupplevelsen.</span><span class="sxs-lookup"><span data-stu-id="a6301-106">Monitoring, detecting, diagnosing, and troubleshooting allow for services toocontinue with minimal disruption toohello user experience.</span></span> <span data-ttu-id="a6301-107">Övervakning och diagnostik är viktiga i en verklig distribuerade produktionsmiljön, beror hello effektivitet på införandet av en liknande modell under utvecklingen av tjänster tooensure de fungerar när du flyttar tooa verkliga installationen.</span><span class="sxs-lookup"><span data-stu-id="a6301-107">While monitoring and diagnostics are critical in an actual deployed production environment, hello efficiency will depend on adopting a similar model during development of services tooensure they work when you move tooa real-world setup.</span></span> <span data-ttu-id="a6301-108">Service Fabric gör det enkelt för tjänsten utvecklare tooimplement diagnostik fungerar sömlöst över både inställningar för enskild dator lokal utveckling och produktion verkliga klustret installationsprogram.</span><span class="sxs-lookup"><span data-stu-id="a6301-108">Service Fabric makes it easy for service developers tooimplement diagnostics that can seamlessly work across both single-machine local development setups and real-world production cluster setups.</span></span>

## <a name="event-tracing-for-windows"></a><span data-ttu-id="a6301-109">Händelsespårning för Windows</span><span class="sxs-lookup"><span data-stu-id="a6301-109">Event Tracing for Windows</span></span>
<span data-ttu-id="a6301-110">[Event Tracing for Windows](https://msdn.microsoft.com/library/windows/desktop/bb968803.aspx) (ETW) är hello rekommenderas teknik för spårning av meddelanden i Service Fabric.</span><span class="sxs-lookup"><span data-stu-id="a6301-110">[Event Tracing for Windows](https://msdn.microsoft.com/library/windows/desktop/bb968803.aspx) (ETW) is hello recommended technology for tracing messages in Service Fabric.</span></span> <span data-ttu-id="a6301-111">Några av fördelarna med att använda ETW är:</span><span class="sxs-lookup"><span data-stu-id="a6301-111">Some benefits of using ETW are:</span></span>

* <span data-ttu-id="a6301-112">**ETW är snabbt.**</span><span class="sxs-lookup"><span data-stu-id="a6301-112">**ETW is fast.**</span></span> <span data-ttu-id="a6301-113">Det har skapats som en spårning-teknik som har minimal inverkan på koden körningstider.</span><span class="sxs-lookup"><span data-stu-id="a6301-113">It was built as a tracing technology that has minimal impact on code execution times.</span></span>
* <span data-ttu-id="a6301-114">**ETW-spårning fungerar sömlöst över lokala utvecklingsmiljöer och verkliga klustret inställningar.**</span><span class="sxs-lookup"><span data-stu-id="a6301-114">**ETW tracing works seamlessly across local development environments and also real-world cluster setups.**</span></span> <span data-ttu-id="a6301-115">Det innebär att du inte har toorewrite din spårning code när du är klar toodeploy kod tooa verkliga klustret.</span><span class="sxs-lookup"><span data-stu-id="a6301-115">This  means you don't have toorewrite your tracing code when you are ready toodeploy your code tooa real cluster.</span></span>
* <span data-ttu-id="a6301-116">**Service Fabric system koden används även ETW för interna spårning.**</span><span class="sxs-lookup"><span data-stu-id="a6301-116">**Service Fabric system code also uses ETW for internal tracing.**</span></span> <span data-ttu-id="a6301-117">Detta ger dig tooview programspårningar överlagrat med Service Fabric system spårningar.</span><span class="sxs-lookup"><span data-stu-id="a6301-117">This allows you tooview your application traces interleaved with Service Fabric system traces.</span></span> <span data-ttu-id="a6301-118">Det hjälper även toomore enkelt förstå hello sekvenser och relationer mellan din programkod och händelser i hello underliggande system.</span><span class="sxs-lookup"><span data-stu-id="a6301-118">It also helps you toomore easily understand hello sequences and interrelationships between your application code and events in hello underlying system.</span></span>
* <span data-ttu-id="a6301-119">**Det finns inbyggt stöd i Service Fabric Visual Studio tools tooview ETW-händelser.**</span><span class="sxs-lookup"><span data-stu-id="a6301-119">**There is built-in support in Service Fabric Visual Studio tools tooview ETW events.**</span></span> <span data-ttu-id="a6301-120">ETW-händelser som visas i hello diagnostiska händelser vy av Visual Studio när Visual Studio är korrekt konfigurerad med Service Fabric.</span><span class="sxs-lookup"><span data-stu-id="a6301-120">ETW events appear in hello Diagnostic Events view of Visual Studio once Visual Studio is correctly configured with Service Fabric.</span></span> 

## <a name="view-service-fabric-system-events-in-visual-studio"></a><span data-ttu-id="a6301-121">Visa händelser för Service Fabric-system i Visual Studio</span><span class="sxs-lookup"><span data-stu-id="a6301-121">View Service Fabric system events in Visual Studio</span></span>
<span data-ttu-id="a6301-122">Service Fabric avger ETW-händelser toohelp programutvecklare förstå vad som händer i hello-plattformen.</span><span class="sxs-lookup"><span data-stu-id="a6301-122">Service Fabric emits ETW events toohelp application developers understand what's happening in hello platform.</span></span> <span data-ttu-id="a6301-123">Om du inte redan gjort det. Gå vidare och följer hello stegen i [skapa ditt första program i Visual Studio](service-fabric-create-your-first-application-in-visual-studio.md).</span><span class="sxs-lookup"><span data-stu-id="a6301-123">If you haven't already done so, go ahead and follow hello steps in [Creating your first application in Visual Studio](service-fabric-create-your-first-application-in-visual-studio.md).</span></span> <span data-ttu-id="a6301-124">Den här informationen hjälper du får ett program körs med hello diagnostik Loggboken visar hello trace meddelanden.</span><span class="sxs-lookup"><span data-stu-id="a6301-124">This information will help you get an application up and running with hello Diagnostics Events Viewer showing hello trace messages.</span></span>

1. <span data-ttu-id="a6301-125">Om hello diagnostik händelser fönstret inte visas automatiskt går toohello **visa** i Visual Studio, Välj **andra fönster** och sedan **diagnostiska Loggboken**.</span><span class="sxs-lookup"><span data-stu-id="a6301-125">If hello diagnostics events window does not automatically show, Go toohello **View** tab in Visual Studio, choose **Other Windows** and then **Diagnostic Events Viewer**.</span></span>
2. <span data-ttu-id="a6301-126">Varje händelse har standard metadata-information som talar om hello nod, och en tjänst hello händelsen kommer från.</span><span class="sxs-lookup"><span data-stu-id="a6301-126">Each event has standard metadata information that tells you hello node, application and service hello event is coming from.</span></span> <span data-ttu-id="a6301-127">Du kan också filtrera hello lista över händelser med hjälp av hello **Filtrera händelser** rutan hello överst i fönstret för hello-händelser.</span><span class="sxs-lookup"><span data-stu-id="a6301-127">You can also filter hello list of events by using hello **Filter events** box at hello top of hello events window.</span></span> <span data-ttu-id="a6301-128">Du kan till exempel filtrera på **nodnamnet** eller **tjänstnamn.**</span><span class="sxs-lookup"><span data-stu-id="a6301-128">For example, you can filter on **Node Name** or **Service Name.**</span></span> <span data-ttu-id="a6301-129">Och när du tittar på händelseinformationen, du kan också pausa med hjälp av hello **pausa** knappen hello överst i fönstret för hello händelser och återuppta senare utan att förlora händelser.</span><span class="sxs-lookup"><span data-stu-id="a6301-129">And when you're looking at event details, you can also pause by using hello **Pause** button at hello top of hello events window and resume later without any loss of events.</span></span>
   
   ![Visual Studio diagnostik Loggboken](./media/service-fabric-diagnostics-how-to-monitor-and-diagnose-services-locally/DiagEventsExamples2.png)

## <a name="add-your-own-custom-traces-toohello-application-code"></a><span data-ttu-id="a6301-131">Lägga till egna anpassade spårningar toohello programkoden</span><span class="sxs-lookup"><span data-stu-id="a6301-131">Add your own custom traces toohello application code</span></span>
<span data-ttu-id="a6301-132">hello Service Fabric Visual Studio-projektmallar innehåller exempelkod.</span><span class="sxs-lookup"><span data-stu-id="a6301-132">hello Service Fabric Visual Studio project templates contain sample code.</span></span> <span data-ttu-id="a6301-133">hello-kod visar hur tooadd anpassad programkod ETW spårar som visar upp i hello Visual Studio ETW viewer tillsammans med system spår från Service Fabric.</span><span class="sxs-lookup"><span data-stu-id="a6301-133">hello code shows how tooadd custom application code ETW traces that show up in hello Visual Studio ETW viewer alongside system traces from Service Fabric.</span></span> <span data-ttu-id="a6301-134">hello nytta av den här metoden är att metadata läggs till automatiskt tootraces och hello Visual Studio diagnostiska Loggboken är redan har konfigurerat toodisplay dem.</span><span class="sxs-lookup"><span data-stu-id="a6301-134">hello advantage of this method is that metadata is automatically added tootraces, and hello Visual Studio Diagnostic Events Viewer is already configured toodisplay them.</span></span>

<span data-ttu-id="a6301-135">För projekt som skapas från hello **tjänstmallar** (tillståndslösa och tillståndskänsliga) bara söka efter hello `RunAsync` implementering:</span><span class="sxs-lookup"><span data-stu-id="a6301-135">For projects created from hello **service templates** (stateless or stateful) just search for hello `RunAsync` implementation:</span></span>

1. <span data-ttu-id="a6301-136">Hej anrop för`ServiceEventSource.Current.ServiceMessage` i hello `RunAsync` metoden visar ett exempel på en anpassad ETW-spårning från hello programkod.</span><span class="sxs-lookup"><span data-stu-id="a6301-136">hello call too`ServiceEventSource.Current.ServiceMessage` in hello `RunAsync` method shows an example of a custom ETW trace from hello application code.</span></span>
2. <span data-ttu-id="a6301-137">I hello **ServiceEventSource.cs** filen hittar du en överlagring för hello `ServiceEventSource.ServiceMessage` metod som ska användas för hög frekvens händelser på grund av tooperformance skäl.</span><span class="sxs-lookup"><span data-stu-id="a6301-137">In hello **ServiceEventSource.cs** file, you will find an overload for hello `ServiceEventSource.ServiceMessage` method that should be used for high-frequency events due tooperformance reasons.</span></span>

<span data-ttu-id="a6301-138">För projekt som skapas från hello **aktören mallar** (tillståndslösa och tillståndskänsliga):</span><span class="sxs-lookup"><span data-stu-id="a6301-138">For projects created from hello **actor templates** (stateless or stateful):</span></span>

1. <span data-ttu-id="a6301-139">Öppna hello **”projektnamn” .cs** filen var *projektnamn* är hello namn du angav för Visual Studio-projekt.</span><span class="sxs-lookup"><span data-stu-id="a6301-139">Open hello **"ProjectName".cs** file where *ProjectName* is hello name you chose for your Visual Studio project.</span></span>  
2. <span data-ttu-id="a6301-140">Hitta hello kod `ActorEventSource.Current.ActorMessage(this, "Doing Work");` i hello *DoWorkAsync* metod.</span><span class="sxs-lookup"><span data-stu-id="a6301-140">Find hello code `ActorEventSource.Current.ActorMessage(this, "Doing Work");` in hello *DoWorkAsync* method.</span></span>  <span data-ttu-id="a6301-141">Detta är ett exempel på en anpassad ETW-spårning som skrivs från programkod.</span><span class="sxs-lookup"><span data-stu-id="a6301-141">This is an example of a custom ETW trace written from application code.</span></span>  
3. <span data-ttu-id="a6301-142">I filen **ActorEventSource.cs**, hittar du en överlagring för hello `ActorEventSource.ActorMessage` metod som ska användas för hög frekvens händelser på grund av tooperformance skäl.</span><span class="sxs-lookup"><span data-stu-id="a6301-142">In file **ActorEventSource.cs**, you will find an overload for hello `ActorEventSource.ActorMessage` method that should be used for high-frequency events due tooperformance reasons.</span></span>

<span data-ttu-id="a6301-143">När du lägger till anpassade ETW tracing tooyour service-koden kan du skapa, distribuera och köra programmet hello igen toosee din händelse(r) i hello diagnostiska Loggboken.</span><span class="sxs-lookup"><span data-stu-id="a6301-143">After adding custom ETW tracing tooyour service code, you can build, deploy, and run hello application again toosee your event(s) in hello Diagnostic Events Viewer.</span></span> <span data-ttu-id="a6301-144">Om du felsöker hello program med **F5**, hello diagnostiska Loggboken öppnas automatiskt.</span><span class="sxs-lookup"><span data-stu-id="a6301-144">If you debug hello application with **F5**, hello Diagnostic Events Viewer will open automatically.</span></span>

## <a name="next-steps"></a><span data-ttu-id="a6301-145">Nästa steg</span><span class="sxs-lookup"><span data-stu-id="a6301-145">Next steps</span></span>
<span data-ttu-id="a6301-146">hello fungerar samma spårning kod som du har lagt till tooyour program ovan för lokala diagnostik med verktyg som du kan använda tooview händelserna när du kör programmet på ett Azure-kluster.</span><span class="sxs-lookup"><span data-stu-id="a6301-146">hello same tracing code that you added tooyour application above for local diagnostics will work with tools that you can use tooview these events when running your application on an Azure cluster.</span></span> <span data-ttu-id="a6301-147">Gå igenom dessa artiklar som hello olika användningsalternativ för hello verktyg och beskriver hur du kan konfigurera dem.</span><span class="sxs-lookup"><span data-stu-id="a6301-147">Check out these articles that discuss hello different options for hello tools and describe how you can set them up.</span></span>

* [<span data-ttu-id="a6301-148">Hur toocollect loggar med Azure-diagnostik</span><span class="sxs-lookup"><span data-stu-id="a6301-148">How toocollect logs with Azure Diagnostics</span></span>](service-fabric-diagnostics-how-to-setup-wad.md)
* [<span data-ttu-id="a6301-149">Aggregering av händelse och med EventFlow</span><span class="sxs-lookup"><span data-stu-id="a6301-149">Event aggregation and collection using EventFlow</span></span>](service-fabric-diagnostics-event-aggregation-eventflow.md)


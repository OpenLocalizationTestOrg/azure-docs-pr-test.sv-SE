---
title: aaaResource Manager-arkitektur | Microsoft Docs
description: "En översikt över arkitekturen i Service Fabric klustret Resource Manager."
services: service-fabric
documentationcenter: .net
author: masnider
manager: timlt
editor: 
ms.assetid: 6c4421f9-834b-450c-939f-1cb4ff456b9b
ms.service: Service-Fabric
ms.devlang: dotnet
ms.topic: article
ms.tgt_pltfrm: NA
ms.workload: NA
ms.date: 08/18/2017
ms.author: masnider
ms.openlocfilehash: 9ea80273d0566a2ac25143ada3662875656b57b8
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: sv-SE
ms.lasthandoff: 10/06/2017
---
# <a name="cluster-resource-manager-architecture-overview"></a><span data-ttu-id="86693-103">Översikt över kluster resource manager-arkitektur</span><span class="sxs-lookup"><span data-stu-id="86693-103">Cluster resource manager architecture overview</span></span>
<span data-ttu-id="86693-104">hello resurshanteraren för Service Fabric-klustret är en central tjänst som körs i hello klustret.</span><span class="sxs-lookup"><span data-stu-id="86693-104">hello Service Fabric Cluster Resource Manager is a central service that runs in hello cluster.</span></span> <span data-ttu-id="86693-105">Den hanterar hello önskad tjänsttillstånd hello hello kluster, särskilt med avseende tooresource förbrukning och regler för placering.</span><span class="sxs-lookup"><span data-stu-id="86693-105">It manages hello desired state of hello services in hello cluster, particularly with respect tooresource consumption and any placement rules.</span></span> 

<span data-ttu-id="86693-106">toomanage hello resurser i klustret, hello resurshanteraren för Service Fabric-klustret måste ha flera typer av information:</span><span class="sxs-lookup"><span data-stu-id="86693-106">toomanage hello resources in your cluster, hello Service Fabric Cluster Resource Manager must have several pieces of information:</span></span>

- <span data-ttu-id="86693-107">Tjänster som finns för närvarande</span><span class="sxs-lookup"><span data-stu-id="86693-107">Which services currently exist</span></span>
- <span data-ttu-id="86693-108">Varje tjänst är aktuella (eller standard) förbrukning av nätverksresurser</span><span class="sxs-lookup"><span data-stu-id="86693-108">Each service's current (or default) resource consumption</span></span> 
- <span data-ttu-id="86693-109">hello återstående klustret kapacitet</span><span class="sxs-lookup"><span data-stu-id="86693-109">hello remaining cluster capacity</span></span> 
- <span data-ttu-id="86693-110">hello-noder i klustret hello hello kapacitet</span><span class="sxs-lookup"><span data-stu-id="86693-110">hello capacity of hello nodes in hello cluster</span></span> 
- <span data-ttu-id="86693-111">hello mängden resurser som används på varje nod</span><span class="sxs-lookup"><span data-stu-id="86693-111">hello amount of resources consumed on each node</span></span>

<span data-ttu-id="86693-112">hello resurser som används för en viss tjänst kan ändras med tiden och tjänster är vanligtvis intresserad av mer än en typ av resurs.</span><span class="sxs-lookup"><span data-stu-id="86693-112">hello resource consumption of a given service can change over time, and services usually care about more than one type of resource.</span></span> <span data-ttu-id="86693-113">Över olika tjänster kan det finnas både verkliga fysiska och fysiska resurser som mäts.</span><span class="sxs-lookup"><span data-stu-id="86693-113">Across different services, there may be both real physical and physical resources being measured.</span></span> <span data-ttu-id="86693-114">Tjänster kan spåra fysiska mått som minne och användning.</span><span class="sxs-lookup"><span data-stu-id="86693-114">Services may track physical metrics like memory and disk consumption.</span></span> <span data-ttu-id="86693-115">Tjänster kan vanligare, intresserad logiska mått - ”WorkQueueDepth” eller ”TotalRequests”.</span><span class="sxs-lookup"><span data-stu-id="86693-115">More commonly, services may care about logical metrics - things like "WorkQueueDepth" or "TotalRequests".</span></span> <span data-ttu-id="86693-116">Både logiska och fysiska mått kan användas i hello samma kluster.</span><span class="sxs-lookup"><span data-stu-id="86693-116">Both logical and physical metrics can be used in hello same cluster.</span></span> <span data-ttu-id="86693-117">Mått kan delas mellan många tjänster eller vara specifika tooa viss tjänst.</span><span class="sxs-lookup"><span data-stu-id="86693-117">Metrics can be shared across many services or be specific tooa particular service.</span></span>

## <a name="other-considerations"></a><span data-ttu-id="86693-118">Andra överväganden</span><span class="sxs-lookup"><span data-stu-id="86693-118">Other considerations</span></span>
<span data-ttu-id="86693-119">hello ägare och operatorer hello-klustret kan skilja sig från hello tjänster och tillämpningsprogram författare eller på en minsta är hello samma personer med olika tak.</span><span class="sxs-lookup"><span data-stu-id="86693-119">hello owners and operators of hello cluster can be different from hello service and application authors, or at a minimum are hello same people wearing different hats.</span></span> <span data-ttu-id="86693-120">När du utvecklar programmet vet du några saker om vad som krävs.</span><span class="sxs-lookup"><span data-stu-id="86693-120">When you develop your application you know a few things about what it requires.</span></span> <span data-ttu-id="86693-121">Du har en uppskattning av hello resurser som den förbrukar och hur olika tjänster ska distribueras.</span><span class="sxs-lookup"><span data-stu-id="86693-121">You have an estimate of hello resources it will consume and how different services should be deployed.</span></span> <span data-ttu-id="86693-122">Exempelvis måste hello webbnivå toorun på noder som exponeras toohello Internet, medan hello databastjänster inte bör.</span><span class="sxs-lookup"><span data-stu-id="86693-122">For example, hello web tier needs toorun on nodes exposed toohello Internet, while hello database services should not.</span></span> <span data-ttu-id="86693-123">Ett annat exempel är begränsad hello webbtjänster förmodligen av CPU- och, vid hello data nivå services försiktighet mer om minne och användning.</span><span class="sxs-lookup"><span data-stu-id="86693-123">As another example, hello web services are probably constrained by CPU and network, while hello data tier services care more about memory and disk consumption.</span></span> <span data-ttu-id="86693-124">Dock hello person som hanterar en live-plats incident för tjänsten i produktion eller som hanterar en uppgradering toohello-tjänsten har ett annat jobb toodo och kräver olika verktyg.</span><span class="sxs-lookup"><span data-stu-id="86693-124">However, hello person handling a live-site incident for that service in production, or who is managing an upgrade toohello service has a different job toodo, and requires different tools.</span></span> 

<span data-ttu-id="86693-125">Är dynamiska både hello och tjänster:</span><span class="sxs-lookup"><span data-stu-id="86693-125">Both hello cluster and services are dynamic:</span></span>

- <span data-ttu-id="86693-126">hello antalet noder i klustret hello kan växa eller krympa</span><span class="sxs-lookup"><span data-stu-id="86693-126">hello number of nodes in hello cluster can grow and shrink</span></span>
- <span data-ttu-id="86693-127">Noder i olika storlekar och typer kan hämtas och gå</span><span class="sxs-lookup"><span data-stu-id="86693-127">Nodes of different sizes and types can come and go</span></span>
- <span data-ttu-id="86693-128">Tjänster kan skapas, tas bort, och ändra resursallokeringar och regler för placering</span><span class="sxs-lookup"><span data-stu-id="86693-128">Services can be created, removed, and change their desired resource allocations and placement rules</span></span>
- <span data-ttu-id="86693-129">Uppgraderingar eller andra hanteringsåtgärder kan rulla genom hello klustret på hello programmet på infrastruktur nivåer</span><span class="sxs-lookup"><span data-stu-id="86693-129">Upgrades or other management operations can roll through hello cluster at hello application on infrastructure levels</span></span>
- <span data-ttu-id="86693-130">Fel kan inträffa när som helst.</span><span class="sxs-lookup"><span data-stu-id="86693-130">Failures can happen at any time.</span></span>

## <a name="cluster-resource-manager-components-and-data-flow"></a><span data-ttu-id="86693-131">Klustret resource manager-komponenter och dataflöde</span><span class="sxs-lookup"><span data-stu-id="86693-131">Cluster resource manager components and data flow</span></span>
<span data-ttu-id="86693-132">hello klustret Resource Manager har tootrack hello kraven för varje tjänst och hello förbrukningen av resurser som varje serviceobjektet i dessa tjänster.</span><span class="sxs-lookup"><span data-stu-id="86693-132">hello Cluster Resource Manager has tootrack hello requirements of each service and hello consumption of resources by each service object within those services.</span></span> <span data-ttu-id="86693-133">hello klustret Resource Manager har två konceptuella delar: agenter som körs på varje nod och en feltolerant tjänst.</span><span class="sxs-lookup"><span data-stu-id="86693-133">hello Cluster Resource Manager has two conceptual parts: agents that run on each node and a fault-tolerant service.</span></span> <span data-ttu-id="86693-134">hello-agenterna på varje nod spåra belastningen rapporter från tjänster, sammanställd dem och rapportera dem med jämna mellanrum.</span><span class="sxs-lookup"><span data-stu-id="86693-134">hello agents on each node track load reports from services, aggregate them, and periodically report them.</span></span> <span data-ttu-id="86693-135">hello klustret Resource Manager-tjänsten samlar in alla hello information från hello lokala agenter och reagerar baserat på dess aktuella konfiguration.</span><span class="sxs-lookup"><span data-stu-id="86693-135">hello Cluster Resource Manager service aggregates all hello information from hello local agents and reacts based on its current configuration.</span></span>

<span data-ttu-id="86693-136">Nu ska vi titta på hello följande diagram:</span><span class="sxs-lookup"><span data-stu-id="86693-136">Let’s look at hello following diagram:</span></span>

<span data-ttu-id="86693-137"><center>
![Resursen belastningsutjämnaren arkitektur][Image1]
</center></span><span class="sxs-lookup"><span data-stu-id="86693-137"><center>
![Resource Balancer Architecture][Image1]
</center></span></span>

<span data-ttu-id="86693-138">Det finns många ändringar som kan inträffa under körning.</span><span class="sxs-lookup"><span data-stu-id="86693-138">During runtime, there are many changes that could happen.</span></span> <span data-ttu-id="86693-139">Anta exempelvis att hello mycket resurser använda vissa tjänster ändringar, vissa tjänster misslyckas och vissa noder ansluta och lämna hello klustret.</span><span class="sxs-lookup"><span data-stu-id="86693-139">For example, let’s say hello amount of resources some services consume changes, some services fail, and some nodes join and leave hello cluster.</span></span> <span data-ttu-id="86693-140">Alla hello ändringar på en nod sammanställs och skickas regelbundet toohello klustret Resource Manager-tjänsten (1,2) där de är samman igen, analyseras och lagras.</span><span class="sxs-lookup"><span data-stu-id="86693-140">All hello changes on a node are aggregated and periodically sent toohello Cluster Resource Manager service (1,2) where they are aggregated again, analyzed, and stored.</span></span> <span data-ttu-id="86693-141">Några sekunder som tjänsten tittar på hello ändringar och avgör om åtgärder som krävs (3).</span><span class="sxs-lookup"><span data-stu-id="86693-141">Every few seconds that service looks at hello changes and determines if any actions are necessary (3).</span></span> <span data-ttu-id="86693-142">Det kan t.ex, Observera att vissa tom noder har lagts toohello klustret.</span><span class="sxs-lookup"><span data-stu-id="86693-142">For example, it could notice that some empty nodes have been added toohello cluster.</span></span> <span data-ttu-id="86693-143">Därför beslutar toomove vissa tjänster toothose noder.</span><span class="sxs-lookup"><span data-stu-id="86693-143">As a result, it decides toomove some services toothose nodes.</span></span> <span data-ttu-id="86693-144">hello klustret Resource Manager kan också hända att en viss nod är överbelastad eller att vissa tjänster har misslyckades eller tagits bort, frigöra resurser någon annanstans.</span><span class="sxs-lookup"><span data-stu-id="86693-144">hello Cluster Resource Manager could also notice that a particular node is overloaded, or that certain services have failed or been deleted, freeing up resources elsewhere.</span></span>

<span data-ttu-id="86693-145">Nu ska vi titta på hello följande diagram och se vad som händer nästa.</span><span class="sxs-lookup"><span data-stu-id="86693-145">Let’s look at hello following diagram and see what happens next.</span></span> <span data-ttu-id="86693-146">Vi anger säga att hello hanteraren för filserverresurser att ändringar behövs.</span><span class="sxs-lookup"><span data-stu-id="86693-146">Let’s say that hello Cluster Resource Manager determines that changes are necessary.</span></span> <span data-ttu-id="86693-147">Den samordnar med andra system services (särskilt hello Failover Manager) toomake hello nödvändiga ändringar.</span><span class="sxs-lookup"><span data-stu-id="86693-147">It coordinates with other system services (in particular hello Failover Manager) toomake hello necessary changes.</span></span> <span data-ttu-id="86693-148">Hello nödvändiga kommandon skickas toohello tillämpliga noder (4).</span><span class="sxs-lookup"><span data-stu-id="86693-148">Then hello necessary commands are sent toohello appropriate nodes (4).</span></span> <span data-ttu-id="86693-149">Anta till exempel hello Resource Manager har upptäckt att nod5 var överbelastad och därför valt toomove tjänsten B från nod5 tooNode4.</span><span class="sxs-lookup"><span data-stu-id="86693-149">For example, let's say hello Resource Manager noticed that Node5 was overloaded, and so decided toomove service B from Node5 tooNode4.</span></span> <span data-ttu-id="86693-150">Hello slutet av hello omkonfiguration (5), hello kluster ser ut så här:</span><span class="sxs-lookup"><span data-stu-id="86693-150">At hello end of hello reconfiguration (5), hello cluster looks like this:</span></span>

<span data-ttu-id="86693-151"><center>
![Resursen belastningsutjämnaren arkitektur][Image2]
</center></span><span class="sxs-lookup"><span data-stu-id="86693-151"><center>
![Resource Balancer Architecture][Image2]
</center></span></span>

## <a name="next-steps"></a><span data-ttu-id="86693-152">Nästa steg</span><span class="sxs-lookup"><span data-stu-id="86693-152">Next steps</span></span>
- <span data-ttu-id="86693-153">hello klustret Resource Manager har många alternativ för att beskriva hello klustret.</span><span class="sxs-lookup"><span data-stu-id="86693-153">hello Cluster Resource Manager has many options for describing hello cluster.</span></span> <span data-ttu-id="86693-154">toofind mer information om dem, Kolla in den här artikeln på [som beskriver ett Service Fabric-kluster](./service-fabric-cluster-resource-manager-cluster-description.md)</span><span class="sxs-lookup"><span data-stu-id="86693-154">toofind out more about them, check out this article on [describing a Service Fabric cluster](./service-fabric-cluster-resource-manager-cluster-description.md)</span></span>
- <span data-ttu-id="86693-155">hello klustret resurshanterare primära uppgifter ombalansering hello kluster och genomdriva regler för placering.</span><span class="sxs-lookup"><span data-stu-id="86693-155">hello Cluster Resource Manager's primary duties are rebalancing hello cluster and enforcing placement rules.</span></span> <span data-ttu-id="86693-156">Mer information om hur du konfigurerar dessa beteenden finns [NLB Service Fabric-kluster](./service-fabric-cluster-resource-manager-balancing.md)</span><span class="sxs-lookup"><span data-stu-id="86693-156">For more information on configuring these behaviors, see [balancing your Service Fabric cluster](./service-fabric-cluster-resource-manager-balancing.md)</span></span>

[Image1]:./media/service-fabric-cluster-resource-manager-architecture/Service-Fabric-Resource-Manager-Architecture-Activity-1.png
[Image2]:./media/service-fabric-cluster-resource-manager-architecture/Service-Fabric-Resource-Manager-Architecture-Activity-2.png

---
title: aaaHow tooimplement fasetterad navigering i Azure Search | Microsoft Docs
description: "Lägg till fasetterad navigering tooapplications som integreras med Azure Search molnbaserade search-tjänsten på Microsoft Azure."
services: search
documentationcenter: 
author: HeidiSteen
manager: mblythe
editor: 
ms.assetid: cdf98fd4-63fd-4b50-b0b0-835cb08ad4d3
ms.service: search
ms.devlang: rest-api
ms.workload: search
ms.topic: article
ms.tgt_pltfrm: na
ms.date: 3/10/2017
ms.author: heidist
ms.openlocfilehash: c1e6bf9dc55d0044525db79e37d35a50ded5a736
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: sv-SE
ms.lasthandoff: 10/06/2017
---
# <a name="how-tooimplement-faceted-navigation-in-azure-search"></a><span data-ttu-id="41b30-103">Hur tooimplement fasetterad navigering i Azure Search</span><span class="sxs-lookup"><span data-stu-id="41b30-103">How tooimplement faceted navigation in Azure Search</span></span>
<span data-ttu-id="41b30-104">Fasetterad navigering är en filtreringsmekanism som ger automatisk dirigerad nedbrytning navigering i sökprogram.</span><span class="sxs-lookup"><span data-stu-id="41b30-104">Faceted navigation is a filtering mechanism that provides self-directed drilldown navigation in search applications.</span></span> <span data-ttu-id="41b30-105">hello termen ”fasetterad navigering' kanske inte känner, men du förmodligen har använt det förut.</span><span class="sxs-lookup"><span data-stu-id="41b30-105">hello term 'faceted navigation' may be unfamiliar, but you've probably used it before.</span></span> <span data-ttu-id="41b30-106">Följande exempel visar hello, är fasetterad navigering inget annat än hello kategorier som används för toofilter resultat.</span><span class="sxs-lookup"><span data-stu-id="41b30-106">As hello following example shows, faceted navigation is nothing more than hello categories used toofilter results.</span></span>

 ![Azure Search-jobbet Portal Demo][1]

<span data-ttu-id="41b30-108">Fasetterad navigering är en alternativ post punkt toosearch.</span><span class="sxs-lookup"><span data-stu-id="41b30-108">Faceted navigation is an alternative entry point toosearch.</span></span> <span data-ttu-id="41b30-109">Den erbjuder ett enkelt alternativ tootyping komplexa sökuttryck manuellt.</span><span class="sxs-lookup"><span data-stu-id="41b30-109">It offers a convenient alternative tootyping complex search expressions by hand.</span></span> <span data-ttu-id="41b30-110">Facets kan hjälpa dig att hitta det du söker efter, samtidigt som du säkerställer att du inte blir noll.</span><span class="sxs-lookup"><span data-stu-id="41b30-110">Facets can help you find what you're looking for, while ensuring that you don’t get zero results.</span></span> <span data-ttu-id="41b30-111">Som en utvecklare kan du exponera hello mest användbara sökkriterierna för att navigera din sökning Kristi facets.</span><span class="sxs-lookup"><span data-stu-id="41b30-111">As a developer, facets let you expose hello most useful search criteria for navigating your search corpus.</span></span> <span data-ttu-id="41b30-112">I online retail-program bygger ofta fasetterad navigering via varumärken, avdelningar (barnens situation), storlek, pris, popularitet och klassificeringar.</span><span class="sxs-lookup"><span data-stu-id="41b30-112">In online retail applications, faceted navigation is often built over brands, departments (kid’s shoes), size, price, popularity, and ratings.</span></span> 

<span data-ttu-id="41b30-113">Implementera fasetterad navigering skiljer sig åt mellan Sök tekniker.</span><span class="sxs-lookup"><span data-stu-id="41b30-113">Implementing faceted navigation differs across search technologies.</span></span> <span data-ttu-id="41b30-114">I Azure Search skapas fasetterad navigering när databasfrågan, med fält som du tidigare attributet i schemat.</span><span class="sxs-lookup"><span data-stu-id="41b30-114">In Azure Search, faceted navigation is built at query time, using fields that you previously attributed in your schema.</span></span>

-   <span data-ttu-id="41b30-115">I hello frågor som programmet skapar en fråga måste skicka *aspekten frågeparametrar* tooget hello tillgängliga aspekten filtervärden för dokumentet resultatuppsättning.</span><span class="sxs-lookup"><span data-stu-id="41b30-115">In hello queries that your application builds, a query must send *facet query parameters* tooget hello available facet filter values for that document result set.</span></span>

-   <span data-ttu-id="41b30-116">tooactually trim hello dokumentet resultatmängden, hello programmet måste också använda en `$filter` uttryck.</span><span class="sxs-lookup"><span data-stu-id="41b30-116">tooactually trim hello document result set, hello application must also apply a `$filter` expression.</span></span>

<span data-ttu-id="41b30-117">I din programutveckling utgör skriva kod som skapar frågor hello bulk hello arbete.</span><span class="sxs-lookup"><span data-stu-id="41b30-117">In your application development, writing code that constructs queries constitutes hello bulk of hello work.</span></span> <span data-ttu-id="41b30-118">Många av hello programfunktioner som du förväntar dig från fasetterad navigering tillhandahålls av hello-tjänsten, inklusive inbyggt stöd för att definiera intervall och hämtar antal för aspekten resultat.</span><span class="sxs-lookup"><span data-stu-id="41b30-118">Many of hello application behaviors that you would expect from faceted navigation are provided by hello service, including built-in support for defining ranges and getting counts for facet results.</span></span> <span data-ttu-id="41b30-119">hello tjänsten omfattar också sensible standardvärden som hjälper dig undvika svårhanterliga navigeringsstrukturer.</span><span class="sxs-lookup"><span data-stu-id="41b30-119">hello service also includes sensible defaults that help you avoid unwieldy navigation structures.</span></span> 

## <a name="sample-code-and-demo"></a><span data-ttu-id="41b30-120">Exempelkod och demo</span><span class="sxs-lookup"><span data-stu-id="41b30-120">Sample code and demo</span></span>
<span data-ttu-id="41b30-121">Den här artikeln används en jobbet sökportal som exempel.</span><span class="sxs-lookup"><span data-stu-id="41b30-121">This article uses a job search portal as an example.</span></span> <span data-ttu-id="41b30-122">hello exempel implementeras som en ASP.NET MVC-program.</span><span class="sxs-lookup"><span data-stu-id="41b30-122">hello example is implemented as an ASP.NET MVC application.</span></span>

-   <span data-ttu-id="41b30-123">Se och testa hello fungerande demo online på [Azure Search-jobbet Portal Demo](http://azjobsdemo.azurewebsites.net/).</span><span class="sxs-lookup"><span data-stu-id="41b30-123">See and test hello working demo online at [Azure Search Job Portal Demo](http://azjobsdemo.azurewebsites.net/).</span></span>

-   <span data-ttu-id="41b30-124">Hämta hello koden från hello [lagringsplatsen för Azure-exempel på GitHub](https://github.com/Azure-Samples/search-dotnet-asp-net-mvc-jobs).</span><span class="sxs-lookup"><span data-stu-id="41b30-124">Download hello code from hello [Azure-Samples repo on GitHub](https://github.com/Azure-Samples/search-dotnet-asp-net-mvc-jobs).</span></span>

## <a name="get-started"></a><span data-ttu-id="41b30-125">Kom igång</span><span class="sxs-lookup"><span data-stu-id="41b30-125">Get started</span></span>
<span data-ttu-id="41b30-126">Om du är ny toosearch utveckling är hello toothink på bästa sätt fasetterad navigering att den visar hello möjligheter för automatisk dirigerad sökning.</span><span class="sxs-lookup"><span data-stu-id="41b30-126">If you're new toosearch development, hello best way toothink of faceted navigation is that it shows hello possibilities for self-directed search.</span></span> <span data-ttu-id="41b30-127">Det är en typ av nedåt sökinställningar, baserat på fördefinierade filter som används för att begränsa snabbt ned sökresultat via plats och klicka på åtgärder.</span><span class="sxs-lookup"><span data-stu-id="41b30-127">It’s a type of drill-down search experience, based on predefined filters, used for quickly narrowing down search results through point-and-click actions.</span></span> 

### <a name="interaction-model"></a><span data-ttu-id="41b30-128">Interaktion modellen</span><span class="sxs-lookup"><span data-stu-id="41b30-128">Interaction model</span></span>

<span data-ttu-id="41b30-129">hello sökinställningar för fasetterad navigering är iterativ, så vi först förstå som en sekvens av frågor som skapas i toouser responsåtgärder.</span><span class="sxs-lookup"><span data-stu-id="41b30-129">hello search experience for faceted navigation is iterative, so let’s start by understanding it as a sequence of queries that unfold in response toouser actions.</span></span>

<span data-ttu-id="41b30-130">hello startpunkt är program som ger fasetterad navigering, vanligtvis placerad hello omkrets.</span><span class="sxs-lookup"><span data-stu-id="41b30-130">hello starting point is an application page that provides faceted navigation, typically placed on hello periphery.</span></span> <span data-ttu-id="41b30-131">Fasetterad navigering är ofta en trädstruktur med kryssrutorna för varje värde eller en klickbar text.</span><span class="sxs-lookup"><span data-stu-id="41b30-131">Faceted navigation is often a tree structure, with checkboxes for each value, or clickable text.</span></span> 

1. <span data-ttu-id="41b30-132">En fråga skickas tooAzure Sök anger hello fasetterad navigeringsstruktur via en eller flera aspekten Frågeparametrar.</span><span class="sxs-lookup"><span data-stu-id="41b30-132">A query sent tooAzure Search specifies hello faceted navigation structure via one or more facet query parameters.</span></span> <span data-ttu-id="41b30-133">Till exempel hello fråga kan innehålla `facet=Rating`, kanske med en `:values` eller `:sort` alternativet toofurther förfina hello presentation.</span><span class="sxs-lookup"><span data-stu-id="41b30-133">For instance, hello query might include `facet=Rating`, perhaps with a `:values` or `:sort` option toofurther refine hello presentation.</span></span>
2. <span data-ttu-id="41b30-134">hello presentation layer återger en sida som innehåller fasetterad navigering, med hjälp av hello aspekterna som har angetts på hello-begäran.</span><span class="sxs-lookup"><span data-stu-id="41b30-134">hello presentation layer renders a search page that provides faceted navigation, using hello facets specified on hello request.</span></span>
3. <span data-ttu-id="41b30-135">En fasetterad navigeringsstruktur som innehåller klassificering får du klickar på ”4” tooindicate som ska visas endast produkter med en klassificering på 4 eller senare.</span><span class="sxs-lookup"><span data-stu-id="41b30-135">Given a faceted navigation structure that includes Rating, you click "4" tooindicate that only products with a rating of 4 or higher should be shown.</span></span> 
4. <span data-ttu-id="41b30-136">Svar skickar hello en fråga som innehåller`$filter=Rating ge 4`</span><span class="sxs-lookup"><span data-stu-id="41b30-136">In response, hello application sends a query that includes `$filter=Rating ge 4`</span></span> 
5. <span data-ttu-id="41b30-137">hello presentation layer hello sidan visar en minskad resultatmängd som innehåller bara de objekt som uppfyller hello villkor (i det här fallet produkter klassificerade 4 och senare).</span><span class="sxs-lookup"><span data-stu-id="41b30-137">hello presentation layer updates hello page, showing a reduced result set, containing just those items that satisfy hello new criteria (in this case, products rated 4 and up).</span></span>

<span data-ttu-id="41b30-138">En begränsningsaspekt är en frågeparameter men Blanda inte ihop med frågan indata.</span><span class="sxs-lookup"><span data-stu-id="41b30-138">A facet is a query parameter, but do not confuse it with query input.</span></span> <span data-ttu-id="41b30-139">Den används aldrig som urvalskriterier i en fråga.</span><span class="sxs-lookup"><span data-stu-id="41b30-139">It is never used as selection criteria in a query.</span></span> <span data-ttu-id="41b30-140">Se i stället aspekten frågeparametrar som indata toohello navigeringsstruktur som kommer tillbaka hello svar.</span><span class="sxs-lookup"><span data-stu-id="41b30-140">Instead, think of facet query parameters as inputs toohello navigation structure that comes back in hello response.</span></span> <span data-ttu-id="41b30-141">För varje aspekten frågeparameter som du anger, utvärderar Azure Search är hur många dokumenten i hello ofullständiga resultat för varje aspektvärdet.</span><span class="sxs-lookup"><span data-stu-id="41b30-141">For each facet query parameter you provide, Azure Search evaluates how many documents are in hello partial results for each facet value.</span></span>

<span data-ttu-id="41b30-142">Meddelande hello `$filter` i steg 4.</span><span class="sxs-lookup"><span data-stu-id="41b30-142">Notice hello `$filter` in step 4.</span></span> <span data-ttu-id="41b30-143">hello-filter är en viktig del av fasetterad navigeringen.</span><span class="sxs-lookup"><span data-stu-id="41b30-143">hello filter is an important aspect of faceted navigation.</span></span> <span data-ttu-id="41b30-144">Även om facets och filter är oberoende hello API, måste båda toodeliver hello upplevelse som du avser.</span><span class="sxs-lookup"><span data-stu-id="41b30-144">Although facets and filters are independent in hello API, you need both toodeliver hello experience you intend.</span></span> 

### <a name="app-design-pattern"></a><span data-ttu-id="41b30-145">Designmönstret för App</span><span class="sxs-lookup"><span data-stu-id="41b30-145">App design pattern</span></span>

<span data-ttu-id="41b30-146">I programkoden är hello mönstret toouse aspekten frågans parametrar tooreturn hello fasetterad navigeringsstruktur tillsammans med aspekten resultat, plus ett $filter uttryck.</span><span class="sxs-lookup"><span data-stu-id="41b30-146">In application code, hello pattern is toouse facet query parameters tooreturn hello faceted navigation structure along with facet results, plus a $filter expression.</span></span>  <span data-ttu-id="41b30-147">hello filter uttryck handtag hello klickar du på händelsen i hello aspektvärdet.</span><span class="sxs-lookup"><span data-stu-id="41b30-147">hello filter expression handles hello click event on hello facet value.</span></span> <span data-ttu-id="41b30-148">Se hello `$filter` uttryck som hello koden bakom hello faktiska Trimning av sökresultaten returnerade toohello presentation lager.</span><span class="sxs-lookup"><span data-stu-id="41b30-148">Think of hello `$filter` expression as hello code behind hello actual trimming of search results returned toohello presentation layer.</span></span> <span data-ttu-id="41b30-149">Få en färger-begränsningsaspekt klickar du på röd färg i hello implementeras via en `$filter` som väljer endast de objekt som har en röd färg.</span><span class="sxs-lookup"><span data-stu-id="41b30-149">Given a Colors facet, clicking hello color Red is implemented through a `$filter` expression that selects only those items that have a color of red.</span></span> 

### <a name="query-basics"></a><span data-ttu-id="41b30-150">Grunderna i frågan</span><span class="sxs-lookup"><span data-stu-id="41b30-150">Query basics</span></span>

<span data-ttu-id="41b30-151">En begäran har angetts via en eller flera frågeparametrar i Azure Search (se [Sök dokument](http://msdn.microsoft.com/library/azure/dn798927.aspx) en beskrivning av var och en).</span><span class="sxs-lookup"><span data-stu-id="41b30-151">In Azure Search, a request is specified through one or more query parameters (see [Search Documents](http://msdn.microsoft.com/library/azure/dn798927.aspx) for a description of each one).</span></span> <span data-ttu-id="41b30-152">Ingen frågeparametrar Hej är nödvändig, men du måste ha minst en för att en giltig fråga toobe.</span><span class="sxs-lookup"><span data-stu-id="41b30-152">None of hello query parameters are required, but you must have at least one in order for a query toobe valid.</span></span>

<span data-ttu-id="41b30-153">Precision, tolkas som hello möjlighet toofilter ut irrelevanta träffar uppnås genom en eller båda av dessa uttryck.</span><span class="sxs-lookup"><span data-stu-id="41b30-153">Precision, understood as hello ability toofilter out irrelevant hits, is achieved through one or both of these expressions:</span></span>

-   <span data-ttu-id="41b30-154">**Sök =**</span><span class="sxs-lookup"><span data-stu-id="41b30-154">**search=**</span></span>  
    <span data-ttu-id="41b30-155">hello värdet på parametern utgör hello sökuttryck.</span><span class="sxs-lookup"><span data-stu-id="41b30-155">hello value of this parameter constitutes hello search expression.</span></span> <span data-ttu-id="41b30-156">Det kan vara en enda typ av text eller en komplex sökning-uttryck som innehåller flera villkor och operatörer.</span><span class="sxs-lookup"><span data-stu-id="41b30-156">It might be a single piece of text, or a complex search expression that includes multiple terms and operators.</span></span> <span data-ttu-id="41b30-157">Ett sökuttryck används för textsökning frågar sökbara fält i hello index för matchar villkoren som returnerar resultat i rank ordning på hello-servern.</span><span class="sxs-lookup"><span data-stu-id="41b30-157">On hello server, a search expression is used for full-text search, querying searchable fields in hello index for matching terms, returning results in rank order.</span></span> <span data-ttu-id="41b30-158">Om du ställer in `search` toonull, köra frågor är över hello hela indexet (det vill säga `search=*`).</span><span class="sxs-lookup"><span data-stu-id="41b30-158">If you set `search` toonull, query execution is over hello entire index (that is, `search=*`).</span></span> <span data-ttu-id="41b30-159">In this Case, andra element för hello fråga, exempelvis en `$filter` eller bedömningen profil hello primära faktorer som påverkar vilka dokument som returneras `($filter`) och i vilken ordning (`scoringProfile` eller `$orderby`).</span><span class="sxs-lookup"><span data-stu-id="41b30-159">In this case, other elements of hello query, such as a `$filter` or scoring profile, are hello primary factors affecting which documents are returned `($filter`) and in what order (`scoringProfile` or `$orderby`).</span></span>

-   <span data-ttu-id="41b30-160">**$filter =**</span><span class="sxs-lookup"><span data-stu-id="41b30-160">**$filter=**</span></span>  
    <span data-ttu-id="41b30-161">Ett filter är en kraftfull mekanism för att begränsa hello storleken på sökresultat som baseras på hello värden för specifika dokumentattribut.</span><span class="sxs-lookup"><span data-stu-id="41b30-161">A filter is a powerful mechanism for limiting hello size of search results based on hello values of specific document attributes.</span></span> <span data-ttu-id="41b30-162">En `$filter` utvärderas först, följt av faceting logik som genererar hello tillgängliga värden och motsvarande räknare för varje värde</span><span class="sxs-lookup"><span data-stu-id="41b30-162">A `$filter` is evaluated first, followed by faceting logic that generates hello available values and corresponding counts for each value</span></span>

<span data-ttu-id="41b30-163">Komplexa sökuttryck minska hello prestanda för hello frågan.</span><span class="sxs-lookup"><span data-stu-id="41b30-163">Complex search expressions decrease hello performance of hello query.</span></span> <span data-ttu-id="41b30-164">När det är möjligt använda väl avvägt filter uttryck tooincrease precision och förbättra frågeprestanda.</span><span class="sxs-lookup"><span data-stu-id="41b30-164">Where possible, use well-constructed filter expressions tooincrease precision and improve query performance.</span></span>

<span data-ttu-id="41b30-165">toobetter förstå hur ett filter lägger till mer exakta, jämför en komplex sökning uttryck tooone som innehåller ett filteruttryck:</span><span class="sxs-lookup"><span data-stu-id="41b30-165">toobetter understand how a filter adds more precision, compare a complex search expression tooone that includes a filter expression:</span></span>

-   `GET /indexes/hotel/docs?search=lodging budget +Seattle –motel +parking`
-   `GET /indexes/hotel/docs?search=lodging&$filter=City eq ‘Seattle’ and Parking and Type ne ‘motel’`

<span data-ttu-id="41b30-166">Båda frågorna är giltig, men hello andra är högre om du letar efter icke motell med parkering i Seattle.</span><span class="sxs-lookup"><span data-stu-id="41b30-166">Both queries are valid, but hello second is superior if you’re looking for non-motels with parking in Seattle.</span></span>
-   <span data-ttu-id="41b30-167">hello första frågan är beroende av dessa specifika ord som nämns eller inte anges i strängfält som namn, beskrivning och ett annat fält som innehåller sökbara data.</span><span class="sxs-lookup"><span data-stu-id="41b30-167">hello first query relies on those specific words being mentioned or not mentioned in string fields like Name, Description, and any other field containing searchable data.</span></span>
-   <span data-ttu-id="41b30-168">hello andra frågan söker efter exakt matchar på strukturerade data och är sannolikt toobe mycket mer exakt.</span><span class="sxs-lookup"><span data-stu-id="41b30-168">hello second query looks for precise matches on structured data and is likely toobe much more accurate.</span></span>

<span data-ttu-id="41b30-169">Kontrollera att varje användaråtgärd via en fasetterad navigeringsstruktur åtföljs av en begränsa sökresultaten i program som innehåller fasetterad navigering.</span><span class="sxs-lookup"><span data-stu-id="41b30-169">In applications that include faceted navigation, make sure that each user action over a faceted navigation structure is accompanied by a narrowing of search results.</span></span> <span data-ttu-id="41b30-170">toonarrow resultat kan du använda ett filteruttryck.</span><span class="sxs-lookup"><span data-stu-id="41b30-170">toonarrow results, use a filter expression.</span></span>

<a name="howtobuildit"></a>

## <a name="build-a-faceted-navigation-app"></a><span data-ttu-id="41b30-171">Skapa en app fasetterad navigering</span><span class="sxs-lookup"><span data-stu-id="41b30-171">Build a faceted navigation app</span></span>
<span data-ttu-id="41b30-172">Du kan implementera fasetterad navigering med Azure Search i din programkod som bygger hello sökbegäran.</span><span class="sxs-lookup"><span data-stu-id="41b30-172">You implement faceted navigation with Azure Search in your application code that builds hello search request.</span></span> <span data-ttu-id="41b30-173">hello fasetterad navigering är beroende av element i din schema som du definierade tidigare.</span><span class="sxs-lookup"><span data-stu-id="41b30-173">hello faceted navigation relies on elements in your schema that you defined previously.</span></span>

<span data-ttu-id="41b30-174">Fördefinierade i din sökindex är hello `Facetable [true|false]` indexera attribut, ange på markerade fälten tooenable eller inaktivera deras användning i en fasetterad navigeringsstruktur.</span><span class="sxs-lookup"><span data-stu-id="41b30-174">Predefined in your search index is hello `Facetable [true|false]` index attribute, set on selected fields tooenable or disable their use in a faceted navigation structure.</span></span> <span data-ttu-id="41b30-175">Utan `"Facetable" = true`, ett fält kan inte användas i aspekten navigering.</span><span class="sxs-lookup"><span data-stu-id="41b30-175">Without `"Facetable" = true`, a field cannot be used in facet navigation.</span></span>

<span data-ttu-id="41b30-176">hello presentation lager i koden får hello användarupplevelse.</span><span class="sxs-lookup"><span data-stu-id="41b30-176">hello presentation layer in your code provides hello user experience.</span></span> <span data-ttu-id="41b30-177">Den bör innehålla hello beståndsdelar av hello fasetterad navigering, till exempel hello etikett, värden, kryssrutorna och hello antal.</span><span class="sxs-lookup"><span data-stu-id="41b30-177">It should list hello constituent parts of hello faceted navigation, such as hello label, values, check boxes, and hello count.</span></span> <span data-ttu-id="41b30-178">hello Azure Search REST API är plattformsoberoende, så Använd oavsett språk och plattformar som du vill.</span><span class="sxs-lookup"><span data-stu-id="41b30-178">hello Azure Search REST API is platform agnostic, so use whatever language and platform you want.</span></span> <span data-ttu-id="41b30-179">hello viktiga är tooinclude UI-element som stöder inkrementell med uppdaterade gränssnittstillstånd uppdatera eftersom varje ytterligare aspekten har valts.</span><span class="sxs-lookup"><span data-stu-id="41b30-179">hello important thing is tooinclude UI elements that support incremental refresh, with updated UI state as each additional facet is selected.</span></span> 

<span data-ttu-id="41b30-180">Frågan samtidigt programkoden skapar en begäran som innehåller `facet=[string]`, en begäranparameter som ger hello fältet toofacet av.</span><span class="sxs-lookup"><span data-stu-id="41b30-180">At query time, your application code creates a request that includes `facet=[string]`, a request parameter that provides hello field toofacet by.</span></span> <span data-ttu-id="41b30-181">En fråga kan ha flera aspekter som `&facet=color&facet=category&facet=rating`, var och en avgränsade med ett et-tecken (&).</span><span class="sxs-lookup"><span data-stu-id="41b30-181">A query can have multiple facets, such as `&facet=color&facet=category&facet=rating`, each one separated by an ampersand (&) character.</span></span>

<span data-ttu-id="41b30-182">Programkod måste också skapa ett `$filter` uttryck toohandle hello på händelser i fasetterad navigeringsfältet.</span><span class="sxs-lookup"><span data-stu-id="41b30-182">Application code must also construct a `$filter` expression toohandle hello click events in faceted navigation.</span></span> <span data-ttu-id="41b30-183">En `$filter` minskar hello sökresultat med hello aspektvärdet som filtervillkor.</span><span class="sxs-lookup"><span data-stu-id="41b30-183">A `$filter` reduces hello search results, using hello facet value as filter criteria.</span></span>

<span data-ttu-id="41b30-184">Azure Search returnerar hello sökresultat, baserat på en eller flera villkor som du anger, och uppdateringar toohello fasetterad navigeringsstruktur.</span><span class="sxs-lookup"><span data-stu-id="41b30-184">Azure Search returns hello search results, based on one or more terms that you enter, along with updates toohello faceted navigation structure.</span></span> <span data-ttu-id="41b30-185">I Azure Search fasetterad navigering är en nivå-konstruktion med aspekten värden och räknar hur många resultat hittades för var och en.</span><span class="sxs-lookup"><span data-stu-id="41b30-185">In Azure Search, faceted navigation is a single-level construction, with facet values, and counts of how many results are found for each one.</span></span>

<span data-ttu-id="41b30-186">I följande avsnitt hello, vi ta en närmare titt på hur toobuild varje del.</span><span class="sxs-lookup"><span data-stu-id="41b30-186">In hello following sections, we take a closer look at how toobuild each part.</span></span>

<a name="buildindex"></a>

## <a name="build-hello-index"></a><span data-ttu-id="41b30-187">Skapa hello index</span><span class="sxs-lookup"><span data-stu-id="41b30-187">Build hello index</span></span>
<span data-ttu-id="41b30-188">Faceting är aktiverat för fältet av fält i hello index via det här attributet index: `"Facetable": true`.</span><span class="sxs-lookup"><span data-stu-id="41b30-188">Faceting is enabled on a field-by-field basis in hello index, via this index attribute: `"Facetable": true`.</span></span>  
<span data-ttu-id="41b30-189">Alla typer av fält som eventuellt kan användas i fasetterad navigering `Facetable` som standard.</span><span class="sxs-lookup"><span data-stu-id="41b30-189">All field types that could possibly be used in faceted navigation are `Facetable` by default.</span></span> <span data-ttu-id="41b30-190">Dessa typer av fältet `Edm.String`, `Edm.DateTimeOffset`, och alla hello numeriskt fälttyper (i princip alla fälttyp är facetable utom `Edm.GeographyPoint`, som inte kan användas i fasetterad navigeringsfältet).</span><span class="sxs-lookup"><span data-stu-id="41b30-190">Such field types include `Edm.String`, `Edm.DateTimeOffset`, and all hello numeric field types (essentially, all field types are facetable except `Edm.GeographyPoint`, which can’t be used in faceted navigation).</span></span> 

<span data-ttu-id="41b30-191">När du skapar ett index är bästa praxis för fasetterad navigering tooexplicitly Stäng faceting inaktiverat för fält som ska aldrig användas som en säkerhetsåtgärd.</span><span class="sxs-lookup"><span data-stu-id="41b30-191">When building an index, a best practice for faceted navigation is tooexplicitly turn faceting off for fields that should never be used as a facet.</span></span>  <span data-ttu-id="41b30-192">I synnerhet strängfält för singleton-värden, till exempel ett ID eller produkt-namn ska anges för`"Facetable": false` tooprevent sina oavsiktliga (och ineffektiv) används i fasetterad navigeringsfältet.</span><span class="sxs-lookup"><span data-stu-id="41b30-192">In particular, string fields for singleton values, such as an ID or product name, should be set too`"Facetable": false` tooprevent their accidental (and ineffective) use in faceted navigation.</span></span> <span data-ttu-id="41b30-193">Aktivera faceting av där du inte behöver det hjälper dig att skydda hello storlek på hello index små och vanligtvis förbättrar prestandan.</span><span class="sxs-lookup"><span data-stu-id="41b30-193">Turning faceting off where you don’t need it helps keep hello size of hello index small, and typically improves performance.</span></span>

<span data-ttu-id="41b30-194">Följande är en del av hello schemat för hello jobbet Portal Demo sample-appen, trimmade av vissa attribut tooreduce hello storlek:</span><span class="sxs-lookup"><span data-stu-id="41b30-194">Following is part of hello schema for hello Job Portal Demo sample app, trimmed of some attributes tooreduce hello size:</span></span>

```json
{
  ...
  "name": "nycjobs",
  "fields": [
    { “name”: "id",                 "type": "Edm.String",              "searchable": false, "filterable": false, ... "facetable": false, ... },
    { “name”: "job_id",             "type": "Edm.String",              "searchable": false, "filterable": false, ... "facetable": false, ... },
    { “name”: "agency",              "type": "Edm.String",             "searchable": true,  "filterable": true, ...  "facetable": true, ...  },
    { “name”: "posting_type",        "type": "Edm.String",             "searchable": true,  "filterable": true, ...  "facetable": true, ...  },
    { “name”: "num_of_positions",    "type": "Edm.Int32",              "searchable": false, "filterable": true, ...  "facetable": true, ...  },
    { “name”: "business_title",      "type": "Edm.String",             "searchable": true,  "filterable": true, ...  "facetable": true, ...  },
    { “name”: "civil_service_title", "type": "Edm.String",             "searchable": true,  "filterable": true, ...  "facetable": true, ...  },
    { “name”: "title_code_no",       "type": "Edm.String",             "searchable": true,  "filterable": true, ...  "facetable": true, ...  },
    { “name”: "level",               "type": "Edm.String",             "searchable": true,  "filterable": true, ...  "facetable": true, ...  },
    { “name”: "salary_range_from",   "type": "Edm.Int32",              "searchable": false, "filterable": true, ...  "facetable": true, ...  },
    { “name”: "salary_range_to",     "type": "Edm.Int32",              "searchable": false, "filterable": true, ...  "facetable": true, ...  },
    { “name”: "salary_frequency",    "type": "Edm.String",             "searchable": true,  "filterable": true, ...  "facetable": true, ...  },
    { “name”: "work_location",       "type": "Edm.String",             "searchable": true,  "filterable": true, ...  "facetable": true, ...  },
…
    { “name”: "geo_location",        "type": "Edm.GeographyPoint",     "searchable": false, "filterable": true, ...  "facetable": false, ... },
    { “name”: "tags",                "type": "Collection(Edm.String)", "searchable": true,  "filterable": true, ...  "facetable": true, ...  }
  ],
…
}
```

<span data-ttu-id="41b30-195">Som du ser i hello exempel schemat `Facetable` är inaktiverat för strängfält som inte får användas som facets, t.ex ID-värden.</span><span class="sxs-lookup"><span data-stu-id="41b30-195">As you can see in hello sample schema, `Facetable` is turned off for string fields that shouldn’t be used as facets, such as ID values.</span></span> <span data-ttu-id="41b30-196">Aktivera faceting av där du inte behöver det hjälper dig att skydda hello storlek på hello index små och vanligtvis förbättrar prestandan.</span><span class="sxs-lookup"><span data-stu-id="41b30-196">Turning faceting off where you don’t need it helps keep hello size of hello index small, and typically improves performance.</span></span>

> [!TIP]
> <span data-ttu-id="41b30-197">Som bästa praxis, bland annat hello fullständig index attribut för varje fält.</span><span class="sxs-lookup"><span data-stu-id="41b30-197">As a best practice, include hello full set of index attributes for each field.</span></span> <span data-ttu-id="41b30-198">Även om `Facetable` är aktiverad som standard för nästan alla fält, ange ändamålsenligt varje attribut kan hjälpa dig att tänka igenom hello följderna av att varje beslut om schemat.</span><span class="sxs-lookup"><span data-stu-id="41b30-198">Although `Facetable` is on by default for almost all fields, purposely setting each attribute can help you think through hello implications of each schema decision.</span></span> 

<a name="checkdata"></a>

## <a name="check-hello-data"></a><span data-ttu-id="41b30-199">Kontrollera hello data</span><span class="sxs-lookup"><span data-stu-id="41b30-199">Check hello data</span></span>
<span data-ttu-id="41b30-200">hello kvaliteten på dina data har en direkt inverkan på om hello fasetterad navigeringsstruktur materialiseras som förväntat.</span><span class="sxs-lookup"><span data-stu-id="41b30-200">hello quality of your data has a direct effect on whether hello faceted navigation structure materializes as you expect it to.</span></span> <span data-ttu-id="41b30-201">Det påverkar också hello enkel konstruera filtren tooreduce hello resultatmängden.</span><span class="sxs-lookup"><span data-stu-id="41b30-201">It also affects hello ease of constructing filters tooreduce hello result set.</span></span>

<span data-ttu-id="41b30-202">Om du vill toofacet av varumärken eller pris, varje dokument som ska innehålla värden för *BrandName* och *ProductPrice* som är giltig, konsekvent och produktiva som ett filter.</span><span class="sxs-lookup"><span data-stu-id="41b30-202">If you want toofacet by Brand or Price, each document should contain values for *BrandName* and *ProductPrice* that are valid, consistent, and productive as a filter option.</span></span>

<span data-ttu-id="41b30-203">Här följer några påminnelser för vilka tooscrub för:</span><span class="sxs-lookup"><span data-stu-id="41b30-203">Here are a few reminders of what tooscrub for:</span></span>

* <span data-ttu-id="41b30-204">För varje fält som du vill toofacet genom att fråga dig själv om den innehåller värden som är lämpliga som filter i själva dirigerad sökning.</span><span class="sxs-lookup"><span data-stu-id="41b30-204">For every field that you want toofacet by, ask yourself whether it contains values that are suitable as filters in self-directed search.</span></span> <span data-ttu-id="41b30-205">hello värdena bör vara korta och beskrivande tillräckligt särskiljande toooffer Rensa välja mellan konkurrerande alternativ.</span><span class="sxs-lookup"><span data-stu-id="41b30-205">hello values should be short, descriptive, and sufficiently distinctive toooffer a clear choice between competing options.</span></span>
* <span data-ttu-id="41b30-206">Stavfel eller nästan matchande värden.</span><span class="sxs-lookup"><span data-stu-id="41b30-206">Misspellings or nearly matching values.</span></span> <span data-ttu-id="41b30-207">Om aspekten färg och fältvärden omfatta Orange och Ornage (felstavat), en begränsningsaspekt baserat på hello färgfältet skulle hämta båda.</span><span class="sxs-lookup"><span data-stu-id="41b30-207">If you facet on Color, and field values include Orange and Ornage (a misspelling), a facet based on hello Color field would pick up both.</span></span>
* <span data-ttu-id="41b30-208">Blandad case text kan också orsaka oreda i fasetterad navigering med orange och Orange visas som två olika värden.</span><span class="sxs-lookup"><span data-stu-id="41b30-208">Mixed case text can also wreak havoc in faceted navigation, with orange and Orange appearing as two different values.</span></span> 
* <span data-ttu-id="41b30-209">Enkel och pluralis versioner av hello samma värde som kan resultera i en separat begränsningsaspekt för varje.</span><span class="sxs-lookup"><span data-stu-id="41b30-209">Single and plural versions of hello same value can result in a separate facet for each.</span></span>

<span data-ttu-id="41b30-210">Du kan föreställa dig är omsorg med förbereder hello data en viktig aspekt av effektiva fasetterad navigering.</span><span class="sxs-lookup"><span data-stu-id="41b30-210">As you can imagine, diligence in preparing hello data is an essential aspect of effective faceted navigation.</span></span>

<a name="presentationlayer"></a>

## <a name="build-hello-ui"></a><span data-ttu-id="41b30-211">Skapa hello UI</span><span class="sxs-lookup"><span data-stu-id="41b30-211">Build hello UI</span></span>
<span data-ttu-id="41b30-212">Arbeta tillbaka från hello presentation lager kan du upptäcka krav som kan missas annars och förstå vilka funktioner är viktiga toohello hjälp söka upplevelse.</span><span class="sxs-lookup"><span data-stu-id="41b30-212">Working back from hello presentation layer can help you uncover requirements that might be missed otherwise, and understand which capabilities are essential toohello search experience.</span></span>

<span data-ttu-id="41b30-213">Vad gäller fasetterad navigering webb- eller sidan visar hello fasetterad navigeringsstruktur, identifierar användarindata för hello sidan och infogar hello ändras element.</span><span class="sxs-lookup"><span data-stu-id="41b30-213">In terms of faceted navigation, your web or application page displays hello faceted navigation structure, detects user input on hello page, and inserts hello changed elements.</span></span> 

<span data-ttu-id="41b30-214">För webbprogram används ofta AJAX i hello presentation lager eftersom du toorefresh stegvisa ändringar.</span><span class="sxs-lookup"><span data-stu-id="41b30-214">For web applications, AJAX is commonly used in hello presentation layer because it allows you toorefresh incremental changes.</span></span> <span data-ttu-id="41b30-215">Du kan också använda ASP.NET MVC eller andra visualiseringen plattform som kan ansluta tooan Azure Search-tjänsten via HTTP.</span><span class="sxs-lookup"><span data-stu-id="41b30-215">You could also use ASP.NET MVC or any other visualization platform that can connect tooan Azure Search service over HTTP.</span></span> <span data-ttu-id="41b30-216">hello exempelprogrammet hänvisas till i den här artikeln – hello **Azure Search-jobbet Portal Demo** – händer toobe ASP.NET MVC-program.</span><span class="sxs-lookup"><span data-stu-id="41b30-216">hello sample application referenced throughout this article -- hello **Azure Search Job Portal Demo** – happens toobe an ASP.NET MVC application.</span></span>

<span data-ttu-id="41b30-217">I exemplet hello är fasetterad navigering inbyggd i hello sökresultatsidan.</span><span class="sxs-lookup"><span data-stu-id="41b30-217">In hello sample, faceted navigation is built into hello search results page.</span></span> <span data-ttu-id="41b30-218">Hej följande exempel hämtas från hello `index.cshtml` -filen för hello exempelprogrammet visar hello statiska HTML-strukturen för att visa fasetterad navigering på hello search resultatsida.</span><span class="sxs-lookup"><span data-stu-id="41b30-218">hello following example, taken from hello `index.cshtml` file of hello sample application, shows hello static HTML structure for displaying faceted navigation on hello search results page.</span></span> <span data-ttu-id="41b30-219">hello lista över facets inbyggda eller byggas dynamiskt om du skickar en sökterm eller markera eller avmarkera en begränsningsaspekt.</span><span class="sxs-lookup"><span data-stu-id="41b30-219">hello list of facets is built or rebuilt dynamically when you submit a search term, or select or clear a facet.</span></span>

```html
<div class="widget sidebar-widget jobs-filter-widget">
  <h5 class="widget-title">Filter Results</h5>
    <p id="filterReset"></p>
    <div class="widget-content">

      <h6 id="businessTitleFacetTitle">Business Title</h6>
      <ul class="filter-list" id="business_title_facets">
      </ul>

      <h6>Location</h6>
      <ul class="filter-list" id="posting_type_facets">
      </ul>

      <h6>Posting Type</h6>
      <ul class="filter-list" id="posting_type_facets"></ul>

      <h6>Minimum Salary</h6>
      <ul class="filter-list" id="salary_range_facets">
      </ul>

  </div>
</div>
```

<span data-ttu-id="41b30-220">Hej följande kodavsnitt från hello `index.cshtml` sidan dynamiskt skapa hello HTML toodisplay hello första aspekten, befattning.</span><span class="sxs-lookup"><span data-stu-id="41b30-220">hello following code snippet from hello `index.cshtml` page dynamically builds hello HTML toodisplay hello first facet, Business Title.</span></span> <span data-ttu-id="41b30-221">Liknande funktioner skapa dynamiskt hello HTML för hello andra facets.</span><span class="sxs-lookup"><span data-stu-id="41b30-221">Similar functions dynamically build hello HTML for hello other facets.</span></span> <span data-ttu-id="41b30-222">Varje aspekten har en etikett och ett antal som visar hello antal objekt hittades för aspekten resultatmängden.</span><span class="sxs-lookup"><span data-stu-id="41b30-222">Each facet has a label and a count, which displays hello number of items found for that facet result.</span></span>

```js
function UpdateBusinessTitleFacets(data) {
  var facetResultsHTML = '';
  for (var i = 0; i < data.length; i++) {
    facetResultsHTML += '<li><a href="javascript:void(0)" onclick="ChooseBusinessTitleFacet(\'' + data[i].Value + '\');">' + data[i].Value + ' (' + data[i].Count + ')</span></a></li>';
  }

  $("#business_title_facets").html(facetResultsHTML);
}
```

> [!TIP]
> <span data-ttu-id="41b30-223">Kom ihåg tooadd en mekanism för att rensa facets när du utformar hello sökresultatsidan.</span><span class="sxs-lookup"><span data-stu-id="41b30-223">When you design hello search results page, remember tooadd a mechanism for clearing facets.</span></span> <span data-ttu-id="41b30-224">Om du lägger till kryssrutorna kan du enkelt se hur tooclear hello filtrerar.</span><span class="sxs-lookup"><span data-stu-id="41b30-224">If you add check boxes, you can easily see how tooclear hello filters.</span></span> <span data-ttu-id="41b30-225">För andra layouter behöva spåret mönster eller en annan kreativa metod.</span><span class="sxs-lookup"><span data-stu-id="41b30-225">For other layouts, you might need a breadcrumb pattern or another creative approach.</span></span> <span data-ttu-id="41b30-226">I hello jobbet sökportal exempelprogrammet, kan du till exempel klicka hello `[X]` efter en valda aspekten tooclear hello-begränsningsaspekt.</span><span class="sxs-lookup"><span data-stu-id="41b30-226">For example, in hello Job Search Portal sample application, you can click hello `[X]` after a selected facet tooclear hello facet.</span></span>

<a name="buildquery"></a>

## <a name="build-hello-query"></a><span data-ttu-id="41b30-227">Skapa hello-fråga</span><span class="sxs-lookup"><span data-stu-id="41b30-227">Build hello query</span></span>
<span data-ttu-id="41b30-228">hello-kod som du skriver för att skapa frågor ska ange alla delar av en giltig fråga, inklusive sökuttryck, facets, filter, bedömningen profiler – allt används tooformulate en begäran.</span><span class="sxs-lookup"><span data-stu-id="41b30-228">hello code that you write for building queries should specify all parts of a valid query, including search expressions, facets, filters, scoring profiles– anything used tooformulate a request.</span></span> <span data-ttu-id="41b30-229">I det här avsnittet utforska där facets passar in i en fråga och hur filter används med facets toodeliver sänkt resultatuppsättning.</span><span class="sxs-lookup"><span data-stu-id="41b30-229">In this section, we explore where facets fit into a query, and how filters are used with facets toodeliver a reduced result set.</span></span>

<span data-ttu-id="41b30-230">Observera att facets är integrerad i det här exempelprogrammet.</span><span class="sxs-lookup"><span data-stu-id="41b30-230">Notice that facets are integral in this sample application.</span></span> <span data-ttu-id="41b30-231">hello sökinställningar i hello jobbet Portal Demo är designad runt fasetterad navigering och filter.</span><span class="sxs-lookup"><span data-stu-id="41b30-231">hello search experience in hello Job Portal Demo is designed around faceted navigation and filters.</span></span> <span data-ttu-id="41b30-232">hello framträdande placering av fasetterad navigering på hello sidan visar dess prioritet.</span><span class="sxs-lookup"><span data-stu-id="41b30-232">hello prominent placement of faceted navigation on hello page demonstrates its importance.</span></span> 

<span data-ttu-id="41b30-233">Ett exempel är ofta en bra toobegin.</span><span class="sxs-lookup"><span data-stu-id="41b30-233">An example is often a good place toobegin.</span></span> <span data-ttu-id="41b30-234">Hej följande exempel hämtas från hello `JobsSearch.cs` fil, en begäran som skapar aspekten navigering baserat på befattning, plats, bokföring och minsta lön versioner.</span><span class="sxs-lookup"><span data-stu-id="41b30-234">hello following example, taken from hello `JobsSearch.cs` file, builds a request that creates facet navigation based on Business Title, Location, Posting Type, and Minimum Salary.</span></span> 

```cs
SearchParameters sp = new SearchParameters()
{
  ...
  // Add facets
  Facets = new List<String>() { "business_title", "posting_type", "level", "salary_range_from,interval:50000" },
};
```

<span data-ttu-id="41b30-235">Begränsningsaspekten frågeparameter anges tooa fältet och beroende på hello-datatypen, kan ytterligare parameteriseras via kommaavgränsad lista med `count:<integer>`, `sort:<>`, `interval:<integer>`, och `values:<list>`.</span><span class="sxs-lookup"><span data-stu-id="41b30-235">A facet query parameter is set tooa field and depending on hello data type, can be further parameterized by comma-delimited list that includes `count:<integer>`, `sort:<>`, `interval:<integer>`, and `values:<list>`.</span></span> <span data-ttu-id="41b30-236">En värdelista som stöds för numeriska data när du ställer in intervall.</span><span class="sxs-lookup"><span data-stu-id="41b30-236">A values list is supported for numeric data when setting up ranges.</span></span> <span data-ttu-id="41b30-237">Se [Sök dokument (Azure Search-API)](http://msdn.microsoft.com/library/azure/dn798927.aspx) för användningsinformation.</span><span class="sxs-lookup"><span data-stu-id="41b30-237">See [Search Documents (Azure Search API)](http://msdn.microsoft.com/library/azure/dn798927.aspx) for usage details.</span></span>

<span data-ttu-id="41b30-238">Tillsammans med facets, bör hello begäran om hjälp från ditt program också bygga filter toonarrow ned hello uppsättning kandidatdokument baserat på en markering för aspekten värde.</span><span class="sxs-lookup"><span data-stu-id="41b30-238">Along with facets, hello request formulated by your application should also build filters toonarrow down hello set of candidate documents based on a facet value selection.</span></span> <span data-ttu-id="41b30-239">För en cykel store fasetterad navigering innehåller ledtrådar tooquestions som *vilka färger, tillverkare och typer av cyklar är tillgängliga?*.</span><span class="sxs-lookup"><span data-stu-id="41b30-239">For a bike store, faceted navigation provides clues tooquestions like *What colors, manufacturers, and types of bikes are available?*.</span></span> <span data-ttu-id="41b30-240">Filtrering svar på frågor som *vilka exakt cyklar är röda mountain cyklar i det här pris av intervallet?*.</span><span class="sxs-lookup"><span data-stu-id="41b30-240">Filtering answers questions like *Which exact bikes are red, mountain bikes, in this price range?*.</span></span> <span data-ttu-id="41b30-241">När du klickar på ”Red” tooindicate som ska visas endast röda produkter, hello nästa fråga hello skickar innehåller `$filter=Color eq ‘Red’`.</span><span class="sxs-lookup"><span data-stu-id="41b30-241">When you click "Red" tooindicate that only Red products should be shown, hello next query hello application sends includes `$filter=Color eq ‘Red’`.</span></span>

<span data-ttu-id="41b30-242">Hej följande kodavsnitt från hello `JobsSearch.cs` sidan lägger till hello valt befattning toohello filter om du väljer ett värde från hello befattning-begränsningsaspekt.</span><span class="sxs-lookup"><span data-stu-id="41b30-242">hello following code snippet from hello `JobsSearch.cs` page adds hello selected Business Title toohello filter if you select a value from hello Business Title facet.</span></span>

```cs
if (businessTitleFacet != "")
  filter = "business_title eq '" + businessTitleFacet + "'";
```

<a name="tips"></a> 

## <a name="tips-and-best-practices"></a><span data-ttu-id="41b30-243">Tips och råd</span><span class="sxs-lookup"><span data-stu-id="41b30-243">Tips and best practices</span></span>

### <a name="indexing-tips"></a><span data-ttu-id="41b30-244">Indexering tips</span><span class="sxs-lookup"><span data-stu-id="41b30-244">Indexing tips</span></span>
<span data-ttu-id="41b30-245">**Förbättra effektiviteten för index om du inte använder en kryssruta**</span><span class="sxs-lookup"><span data-stu-id="41b30-245">**Improve index efficiency if you don't use a Search box**</span></span>

<span data-ttu-id="41b30-246">Om programmet använder fasetterad navigering exklusivt (d.v.s. inga sökrutan) kan du markera hello fält som `searchable=false`, `facetable=true` tooproduce ett komprimerat index.</span><span class="sxs-lookup"><span data-stu-id="41b30-246">If your application uses faceted navigation exclusively (that is, no search box), you can mark hello field as `searchable=false`, `facetable=true` tooproduce a more compact index.</span></span> <span data-ttu-id="41b30-247">Dessutom kan uppstår indexera bara på hela aspekten värden med ingen word radbrytning eller indexering av hello delar av en flera ords-värde.</span><span class="sxs-lookup"><span data-stu-id="41b30-247">In addition, indexing occurs only on whole facet values, with no word-break or indexing of hello component parts of a multi-word value.</span></span>

<span data-ttu-id="41b30-248">**Ange vilka fält som kan användas som facets**</span><span class="sxs-lookup"><span data-stu-id="41b30-248">**Specify which fields can be used as facets**</span></span>

<span data-ttu-id="41b30-249">Återkalla den hello schemat hello indexet avgör vilka fält som är tillgängliga toouse som en säkerhetsåtgärd.</span><span class="sxs-lookup"><span data-stu-id="41b30-249">Recall that hello schema of hello index determines which fields are available toouse as a facet.</span></span> <span data-ttu-id="41b30-250">Under förutsättning att ett fält är facetable anger hello frågan vilka fält toofacet av.</span><span class="sxs-lookup"><span data-stu-id="41b30-250">Assuming a field is facetable, hello query specifies which fields toofacet by.</span></span> <span data-ttu-id="41b30-251">hello fält som du är faceting ger hello värden som visas under hello etiketten.</span><span class="sxs-lookup"><span data-stu-id="41b30-251">hello field by which you are faceting provides hello values that appear below hello label.</span></span> 

<span data-ttu-id="41b30-252">hello-värden som visas under varje etikett hämtas från hello index.</span><span class="sxs-lookup"><span data-stu-id="41b30-252">hello values that appear under each label are retrieved from hello index.</span></span> <span data-ttu-id="41b30-253">Till exempel om hello aspekten är fältet *färg*, hello-värden som är tillgängliga för ytterligare filtrering är hello värdena för fältet - röd, svart och så vidare.</span><span class="sxs-lookup"><span data-stu-id="41b30-253">For example, if hello facet field is *Color*, hello values available for additional filtering are hello values for that field - Red, Black, and so forth.</span></span>

<span data-ttu-id="41b30-254">För numeriska och DateTime-värden endast, kan du ange värden på hello aspekten fält (till exempel `facet=Rating,values:1|2|3|4|5`).</span><span class="sxs-lookup"><span data-stu-id="41b30-254">For Numeric and DateTime values only, you can explicitly set values on hello facet field (for example, `facet=Rating,values:1|2|3|4|5`).</span></span> <span data-ttu-id="41b30-255">En värdelista som tillåts för dessa fält typer toosimplify hello avgränsning av aspekten resultat i sammanhängande intervall (antingen intervall baserat på numeriska värden eller tidsperioder).</span><span class="sxs-lookup"><span data-stu-id="41b30-255">A values list is allowed for these field types toosimplify hello separation of facet results into contiguous ranges (either ranges based on numeric values or time periods).</span></span> 

<span data-ttu-id="41b30-256">**Som standard kan du bara ha en nivå med fasetterad navigering**</span><span class="sxs-lookup"><span data-stu-id="41b30-256">**By default you can only have one level of faceted navigation**</span></span> 

<span data-ttu-id="41b30-257">Som nämndes, finns det inget direkt stöd för många kapslade facets i en hierarki.</span><span class="sxs-lookup"><span data-stu-id="41b30-257">As noted, there is no direct support for nesting facets in a hierarchy.</span></span> <span data-ttu-id="41b30-258">Som standard stöder fasetterad navigering i Azure Search endast en nivå med filter.</span><span class="sxs-lookup"><span data-stu-id="41b30-258">By default, faceted navigation in Azure Search only supports one level of filters.</span></span> <span data-ttu-id="41b30-259">Dock finns lösningar.</span><span class="sxs-lookup"><span data-stu-id="41b30-259">However, workarounds do exist.</span></span> <span data-ttu-id="41b30-260">Du kan koda en hierarkisk aspekten struktur i en `Collection(Edm.String)` peka per hierarki med en post.</span><span class="sxs-lookup"><span data-stu-id="41b30-260">You can encode a hierarchical facet structure in a `Collection(Edm.String)` with one entry point per hierarchy.</span></span> <span data-ttu-id="41b30-261">Den här lösningen ligger utanför hello i den här artikeln.</span><span class="sxs-lookup"><span data-stu-id="41b30-261">Implementing this workaround is beyond hello scope of this article.</span></span> 

### <a name="querying-tips"></a><span data-ttu-id="41b30-262">Frågar tips</span><span class="sxs-lookup"><span data-stu-id="41b30-262">Querying tips</span></span>
<span data-ttu-id="41b30-263">**Validera fält**</span><span class="sxs-lookup"><span data-stu-id="41b30-263">**Validate fields**</span></span>

<span data-ttu-id="41b30-264">Om du bygger hello lista över facets dynamiskt baserat på ej betrodda användarindata kan verifiera att hello fältnamn hello fasetterad är giltiga.</span><span class="sxs-lookup"><span data-stu-id="41b30-264">If you build hello list of facets dynamically based on untrusted user input, validate that hello names of hello faceted fields are valid.</span></span> <span data-ttu-id="41b30-265">Eller undanta hello namn när du skapar URL: er med hjälp av antingen `Uri.EscapeDataString()` i .NET eller hello motsvarande i din plattform föredrar.</span><span class="sxs-lookup"><span data-stu-id="41b30-265">Or, escape hello names when building URLs by using either `Uri.EscapeDataString()` in .NET, or hello equivalent in your platform of choice.</span></span>

### <a name="filtering-tips"></a><span data-ttu-id="41b30-266">Tips för filtrering</span><span class="sxs-lookup"><span data-stu-id="41b30-266">Filtering tips</span></span>
<span data-ttu-id="41b30-267">**Öka Sök precision med filter**</span><span class="sxs-lookup"><span data-stu-id="41b30-267">**Increase search precision with filters**</span></span>

<span data-ttu-id="41b30-268">Använda filter.</span><span class="sxs-lookup"><span data-stu-id="41b30-268">Use filters.</span></span> <span data-ttu-id="41b30-269">Om du förlita dig på returneras bara sökuttryck som är enbart härrör kan orsaka en toobe dokument som inte har något av dess fält hello exakt aspektvärdet.</span><span class="sxs-lookup"><span data-stu-id="41b30-269">If you rely on just search expressions alone, stemming could cause a document toobe returned that doesn’t have hello precise facet value in any of its fields.</span></span>

<span data-ttu-id="41b30-270">**Öka sökningsprestanda med filter**</span><span class="sxs-lookup"><span data-stu-id="41b30-270">**Increase search performance with filters**</span></span>

<span data-ttu-id="41b30-271">Filter begränsa hello uppsättning kandidatdokument för sökning och utesluta rangordning.</span><span class="sxs-lookup"><span data-stu-id="41b30-271">Filters narrow down hello set of candidate documents for search and exclude them from ranking.</span></span> <span data-ttu-id="41b30-272">Om du har ett stort utbud av dokument får med en selektiv begränsningsaspekt nedåt ofta du bättre prestanda.</span><span class="sxs-lookup"><span data-stu-id="41b30-272">If you have a large set of documents, using a selective facet drill-down often gives you better performance.</span></span>
  
<span data-ttu-id="41b30-273">**Filtrera endast hello fasetterad fält**</span><span class="sxs-lookup"><span data-stu-id="41b30-273">**Filter only hello faceted fields**</span></span>

<span data-ttu-id="41b30-274">I fasetterad nedåt, vill du förmodligen tooonly Inkludera dokument som innehåller hello aspektvärdet i ett visst (fasetterad) fält inte någonstans i alla sökbara fält.</span><span class="sxs-lookup"><span data-stu-id="41b30-274">In faceted drill-down, you typically want tooonly include documents that have hello facet value in a specific (faceted) field, not anywhere across all searchable fields.</span></span> <span data-ttu-id="41b30-275">Lägger till ett filter förstärker hello målfält genom att styra hello service toosearch i hello fasetterad fält för ett motsvarande värde.</span><span class="sxs-lookup"><span data-stu-id="41b30-275">Adding a filter reinforces hello target field by directing hello service toosearch only in hello faceted field for a matching value.</span></span>

<span data-ttu-id="41b30-276">**Trim aspekten resultat med flera filter**</span><span class="sxs-lookup"><span data-stu-id="41b30-276">**Trim facet results with more filters**</span></span>

<span data-ttu-id="41b30-277">Begränsningsaspekten resultat är dokument hittades i hello sökresultat som matchar en term som aspekten.</span><span class="sxs-lookup"><span data-stu-id="41b30-277">Facet results are documents found in hello search results that match a facet term.</span></span> <span data-ttu-id="41b30-278">I hello som följande exempel i sökresultat för *molntjänster*, 254 objekt har också *interna specifikationen* som en innehållstyp.</span><span class="sxs-lookup"><span data-stu-id="41b30-278">In hello following example, in search results for *cloud computing*, 254 items also have *internal specification* as a content type.</span></span> <span data-ttu-id="41b30-279">Objekt är inte nödvändigtvis ömsesidigt uteslutande.</span><span class="sxs-lookup"><span data-stu-id="41b30-279">Items are not necessarily mutually exclusive.</span></span> <span data-ttu-id="41b30-280">Om ett objekt uppfyller hello villkor för båda filtren, räknas den i var och en.</span><span class="sxs-lookup"><span data-stu-id="41b30-280">If an item meets hello criteria of both filters, it is counted in each one.</span></span> <span data-ttu-id="41b30-281">Duplicering är möjligt när faceting på `Collection(Edm.String)` fält, som ofta används tooimplement dokumentet Taggning.</span><span class="sxs-lookup"><span data-stu-id="41b30-281">This duplication is possible when faceting on `Collection(Edm.String)` fields, which are often used tooimplement document tagging.</span></span>

        Search term: "cloud computing"
        Content type
           Internal specification (254)
           Video (10) 

<span data-ttu-id="41b30-282">I allmänhet om du upptäcker att aspekten resultat konsekvent är för stor, rekommenderar vi att du lägger till fler filter toogive användare fler alternativ för att begränsa hello sökning.</span><span class="sxs-lookup"><span data-stu-id="41b30-282">In general, if you find that facet results are consistently too large, we recommend that you add more filters toogive users more options for narrowing hello search.</span></span>

### <a name="tips-about-result-count"></a><span data-ttu-id="41b30-283">Tips om resultatantal</span><span class="sxs-lookup"><span data-stu-id="41b30-283">Tips about result count</span></span>

<span data-ttu-id="41b30-284">**Begränsa hello antalet objekt i hello aspekten navigering**</span><span class="sxs-lookup"><span data-stu-id="41b30-284">**Limit hello number of items in hello facet navigation**</span></span>

<span data-ttu-id="41b30-285">För varje fasetterad fält i navigeringsträdet hello finns en standardgräns med 10 värden.</span><span class="sxs-lookup"><span data-stu-id="41b30-285">For each faceted field in hello navigation tree, there is a default limit of 10 values.</span></span> <span data-ttu-id="41b30-286">Den här standardinställningen är meningsfullt för navigeringsstrukturer eftersom den bevarar hello värden listan tooa hanterbar storlek.</span><span class="sxs-lookup"><span data-stu-id="41b30-286">This default makes sense for navigation structures because it keeps hello values list tooa manageable size.</span></span> <span data-ttu-id="41b30-287">Du kan åsidosätta hello standard genom att tilldela ett värde toocount.</span><span class="sxs-lookup"><span data-stu-id="41b30-287">You can override hello default by assigning a value toocount.</span></span>

* <span data-ttu-id="41b30-288">`&facet=city,count:5`Anger att endast hello första fem städer hittades i hello övre rangordnas resultat returneras som ett resultat av aspekten.</span><span class="sxs-lookup"><span data-stu-id="41b30-288">`&facet=city,count:5` specifies that only hello first five cities found in hello top ranked results are returned as a facet result.</span></span> <span data-ttu-id="41b30-289">Överväg att en exempelfråga med en sökterm ”flygplats” och 32 matchar.</span><span class="sxs-lookup"><span data-stu-id="41b30-289">Consider a sample query with a search term of “airport” and 32 matches.</span></span> <span data-ttu-id="41b30-290">Om hello-frågan anger `&facet=city,count:5`, men endast hello första fem unika orter med hello de flesta dokument i sökresultaten hello ingår i hello aspekten resultat.</span><span class="sxs-lookup"><span data-stu-id="41b30-290">If hello query specifies `&facet=city,count:5`, only hello first five unique cities with hello most documents in hello search results are included in hello facet results.</span></span>

<span data-ttu-id="41b30-291">Meddelande hello åtskillnad mellan aspekten resultat och sökresultat.</span><span class="sxs-lookup"><span data-stu-id="41b30-291">Notice hello distinction between facet results and search results.</span></span> <span data-ttu-id="41b30-292">Sökresultaten är alla hello-dokument som matchar hello fråga.</span><span class="sxs-lookup"><span data-stu-id="41b30-292">Search results are all hello documents that match hello query.</span></span> <span data-ttu-id="41b30-293">Begränsningsaspekten resultat är hello matchar för varje aspektvärdet.</span><span class="sxs-lookup"><span data-stu-id="41b30-293">Facet results are hello matches for each facet value.</span></span> <span data-ttu-id="41b30-294">Sökresultaten innehåller i hello exempel City-namn som inte är i hello aspekten klassificering lista (5 i vårt exempel).</span><span class="sxs-lookup"><span data-stu-id="41b30-294">In hello example, search results include City names that are not in hello facet classification list (5 in our example).</span></span> <span data-ttu-id="41b30-295">Resultat som har filtrerats ut via fasetterad navigering visas när du tar bort facets eller välja andra facets förutom stad.</span><span class="sxs-lookup"><span data-stu-id="41b30-295">Results that are filtered out through faceted navigation become visible when you clear facets, or choose other facets besides City.</span></span> 

> [!NOTE]
> <span data-ttu-id="41b30-296">Diskutera `count` när det finns fler än en typ kan vara förvirrande.</span><span class="sxs-lookup"><span data-stu-id="41b30-296">Discussing `count` when there is more than one type can be confusing.</span></span> <span data-ttu-id="41b30-297">hello ger följande tabell en kort sammanfattning av hur hello termen används i Azure Search-API, exempelkod och dokumentation.</span><span class="sxs-lookup"><span data-stu-id="41b30-297">hello following table offers a brief summary of how hello term is used in Azure Search API, sample code, and documentation.</span></span> 

* `@colorFacet.count`<br/>
  <span data-ttu-id="41b30-298">Du bör se antalet parameter på hello aspekten, används toodisplay hello antalet aspekten resultat i presentation kod.</span><span class="sxs-lookup"><span data-stu-id="41b30-298">In presentation code, you should see a count parameter on hello facet, used toodisplay hello number of facet results.</span></span> <span data-ttu-id="41b30-299">Begränsningsaspekten sökresultat anger antal hello antal dokument som matchar på hello aspekten termen eller intervall.</span><span class="sxs-lookup"><span data-stu-id="41b30-299">In facet results, count indicates hello number of documents that match on hello facet term or range.</span></span>
* `&facet=City,count:12`<br/>
  <span data-ttu-id="41b30-300">Du kan ange värdet för antal tooa i en aspekten-fråga.</span><span class="sxs-lookup"><span data-stu-id="41b30-300">In a facet query, you can set count tooa value.</span></span>  <span data-ttu-id="41b30-301">hello standardvärdet är 10, men du kan ange den högre eller lägre.</span><span class="sxs-lookup"><span data-stu-id="41b30-301">hello default is 10, but you can set it higher or lower.</span></span> <span data-ttu-id="41b30-302">Ange `count:12` hämtar hello översta 12 matchningar i aspekten resultaten av dokumentantal.</span><span class="sxs-lookup"><span data-stu-id="41b30-302">Setting `count:12` gets hello top 12 matches in facet results by document count.</span></span>
* <span data-ttu-id="41b30-303">"`@odata.count`"</span><span class="sxs-lookup"><span data-stu-id="41b30-303">"`@odata.count`"</span></span><br/>
  <span data-ttu-id="41b30-304">Det här värdet anger hello antalet matchande objekt i hello sökresultat i hello frågesvar.</span><span class="sxs-lookup"><span data-stu-id="41b30-304">In hello query response, this value indicates hello number of matching items in hello search results.</span></span> <span data-ttu-id="41b30-305">I genomsnitt den är större än hello summan av alla aspekten resultat i kombination, på grund av toohello förekomsten av objekt som matchar söktermen hello, men har ingen aspekten matchar.</span><span class="sxs-lookup"><span data-stu-id="41b30-305">On average, it’s larger than hello sum of all facet results combined, due toohello presence of items that match hello search term, but have no facet value matches.</span></span>

<span data-ttu-id="41b30-306">**Få fram i aspekten resultat**</span><span class="sxs-lookup"><span data-stu-id="41b30-306">**Get counts in facet results**</span></span>

<span data-ttu-id="41b30-307">När du lägger till en tooa fasetterad filterfråga du kanske vill tooretain hello aspekten instruktionen (till exempel `facet=Rating&$filter=Rating ge 4`).</span><span class="sxs-lookup"><span data-stu-id="41b30-307">When you add a filter tooa faceted query, you might want tooretain hello facet statement (for example, `facet=Rating&$filter=Rating ge 4`).</span></span> <span data-ttu-id="41b30-308">Tekniskt sett aspekten = klassificering inte krävs, men håller den returnerar hello antal aspekten värden för klassificeringar 4 och senare.</span><span class="sxs-lookup"><span data-stu-id="41b30-308">Technically, facet=Rating isn’t needed, but keeping it returns hello counts of facet values for ratings 4 and higher.</span></span> <span data-ttu-id="41b30-309">Om du klickar på ”4” och hello frågan innehåller exempelvis ett filter för större eller lika för ”4”, antal returneras för varje klassificering som är 4 och senare.</span><span class="sxs-lookup"><span data-stu-id="41b30-309">For example, if you click "4" and hello query includes a filter for greater or equal too"4", counts are returned for each rating that is 4 and higher.</span></span>  

<span data-ttu-id="41b30-310">**Kontrollera att du få fram exakta aspekten**</span><span class="sxs-lookup"><span data-stu-id="41b30-310">**Make sure you get accurate facet counts**</span></span>

<span data-ttu-id="41b30-311">I vissa fall kanske du upptäcker att aspekten räknas inte matchar hello resultatmängder (se [fasetterad navigering i Azure Search (foruminlägg)](https://social.msdn.microsoft.com/Forums/azure/06461173-ea26-4e6a-9545-fbbd7ee61c8f/faceting-on-azure-search?forum=azuresearch)).</span><span class="sxs-lookup"><span data-stu-id="41b30-311">Under certain circumstances, you might find that facet counts do not match hello result sets (see [Faceted navigation in Azure Search (forum post)](https://social.msdn.microsoft.com/Forums/azure/06461173-ea26-4e6a-9545-fbbd7ee61c8f/faceting-on-azure-search?forum=azuresearch)).</span></span>

<span data-ttu-id="41b30-312">Begränsningsaspekten antal kan vara felaktig på grund av toohello horisontell partitionering arkitektur.</span><span class="sxs-lookup"><span data-stu-id="41b30-312">Facet counts can be inaccurate due toohello sharding architecture.</span></span> <span data-ttu-id="41b30-313">Varje sökindex har flera delar, och varje Fragmentera rapporterar hello främsta aspekter av dokumentantal som sedan kombineras till ett enskilt resultat.</span><span class="sxs-lookup"><span data-stu-id="41b30-313">Every search index has multiple shards, and each shard reports hello top N facets by document count, which is then combined into a single result.</span></span> <span data-ttu-id="41b30-314">Om vissa delar har många matchande värden, medan andra har färre hända att vissa aspekten värden saknas eller är under-inventerat i hello resultat.</span><span class="sxs-lookup"><span data-stu-id="41b30-314">If some shards have many matching values, while others have fewer, you may find that some facet values are missing or under-counted in hello results.</span></span>

<span data-ttu-id="41b30-315">Men det här beteendet kan ändra när som helst om du stöter på problemet idag, du kan undvika det genom artificiellt lufttryck hello antal:<number> tooa stora antalet tooenforce fullständig från varje Fragmentera-rapportering.</span><span class="sxs-lookup"><span data-stu-id="41b30-315">Although this behavior could change at any time, if you encounter this behavior today, you can work around it by artificially inflating hello count:<number> tooa large number tooenforce full reporting from each shard.</span></span> <span data-ttu-id="41b30-316">Om hello värdet för antal: är större än eller lika toohello tal med unika värden i fältet hello du garanterat korrekta resultat.</span><span class="sxs-lookup"><span data-stu-id="41b30-316">If hello value of count: is greater than or equal toohello number of unique values in hello field, you are guaranteed accurate results.</span></span> <span data-ttu-id="41b30-317">Men när dokumentantal är hög, det finns en prestandaförsämring, så Använd det här alternativet omdöme.</span><span class="sxs-lookup"><span data-stu-id="41b30-317">However, when document counts are high, there is a performance penalty, so use this option judiciously.</span></span>

### <a name="user-interface-tips"></a><span data-ttu-id="41b30-318">Användaren gränssnittet tips</span><span class="sxs-lookup"><span data-stu-id="41b30-318">User interface tips</span></span>
<span data-ttu-id="41b30-319">**Lägga till etiketter för varje fält i aspekten navigering**</span><span class="sxs-lookup"><span data-stu-id="41b30-319">**Add labels for each field in facet navigation**</span></span>

<span data-ttu-id="41b30-320">Etiketter definieras vanligen i hello HTML eller formulär (`index.cshtml` i hello exempelprogram).</span><span class="sxs-lookup"><span data-stu-id="41b30-320">Labels are typically defined in hello HTML or form (`index.cshtml` in hello sample application).</span></span> <span data-ttu-id="41b30-321">Det finns inga API i Azure Search för aspekten navigering etiketter eller andra metadata.</span><span class="sxs-lookup"><span data-stu-id="41b30-321">There is no API in Azure Search for facet navigation labels or any other metadata.</span></span>

<a name="rangefacets"></a>

## <a name="filter-based-on-a-range"></a><span data-ttu-id="41b30-322">Filtrera baserat på ett intervall</span><span class="sxs-lookup"><span data-stu-id="41b30-322">Filter based on a range</span></span>
<span data-ttu-id="41b30-323">Faceting över intervall med värden är en gemensam programkrav för sökning.</span><span class="sxs-lookup"><span data-stu-id="41b30-323">Faceting over ranges of values is a common search application requirement.</span></span> <span data-ttu-id="41b30-324">Adressintervall stöds för numeriska data och DateTime-värden.</span><span class="sxs-lookup"><span data-stu-id="41b30-324">Ranges are supported for numeric data and DateTime values.</span></span> <span data-ttu-id="41b30-325">Du kan läsa mer om varje metod i [Sök dokument (Azure Search-API)](http://msdn.microsoft.com/library/azure/dn798927.aspx).</span><span class="sxs-lookup"><span data-stu-id="41b30-325">You can read more about each approach in [Search Documents (Azure Search API)](http://msdn.microsoft.com/library/azure/dn798927.aspx).</span></span>

<span data-ttu-id="41b30-326">Azure Search förenklar intervallet konstruktionen genom att tillhandahålla två metoder för att beräkna ett intervall.</span><span class="sxs-lookup"><span data-stu-id="41b30-326">Azure Search simplifies range construction by providing two approaches for computing a range.</span></span> <span data-ttu-id="41b30-327">För båda metoderna skapar Azure Search hello lämpliga områden anges hello indata som du har angett.</span><span class="sxs-lookup"><span data-stu-id="41b30-327">For both approaches, Azure Search creates hello appropriate ranges given hello inputs you’ve provided.</span></span> <span data-ttu-id="41b30-328">Till exempel om du anger intervallvärden 10 | 20 | 30, skapas automatiskt intervall på 0-10, 20 10, 20 – 30.</span><span class="sxs-lookup"><span data-stu-id="41b30-328">For instance, if you specify range values of 10|20|30, it automatically creates ranges of 0-10, 10-20, 20-30.</span></span> <span data-ttu-id="41b30-329">Programmet kan du ta bort alla intervall som är tomma.</span><span class="sxs-lookup"><span data-stu-id="41b30-329">Your application can optionally remove any intervals that are empty.</span></span> 

<span data-ttu-id="41b30-330">**Metod 1: Använd hello intervall parametern**</span><span class="sxs-lookup"><span data-stu-id="41b30-330">**Approach 1: Use hello interval parameter**</span></span>  
<span data-ttu-id="41b30-331">tooset pris facets i $10 steg, anger du:`&facet=price,interval:10`</span><span class="sxs-lookup"><span data-stu-id="41b30-331">tooset price facets in $10 increments, you would specify: `&facet=price,interval:10`</span></span>

<span data-ttu-id="41b30-332">**Metod 2: Använda en värdelista med**</span><span class="sxs-lookup"><span data-stu-id="41b30-332">**Approach 2: Use a values list**</span></span>  
<span data-ttu-id="41b30-333">Du kan använda en värdelista för numeriska data.</span><span class="sxs-lookup"><span data-stu-id="41b30-333">For numeric data, you can use a values list.</span></span>  <span data-ttu-id="41b30-334">Överväg att hello aspekten intervall för en `listPrice` -fält ska renderas på följande sätt:</span><span class="sxs-lookup"><span data-stu-id="41b30-334">Consider hello facet range for a `listPrice` field, rendered as follows:</span></span>

  ![Exempel värdelistan][5]

<span data-ttu-id="41b30-336">toospecify ett aspekten intervall som hello i föregående skärmbild som visar hello använda en lista över värden:</span><span class="sxs-lookup"><span data-stu-id="41b30-336">toospecify a facet range like hello one in hello preceding screen shot, use a values list:</span></span>

    facet=listPrice,values:10|25|100|500|1000|2500

<span data-ttu-id="41b30-337">Varje område bygger använder 0 som en startpunkt, ett värde hello listan som en slutpunkt och beskärs sedan hello tidigare intervall toocreate diskreta intervall.</span><span class="sxs-lookup"><span data-stu-id="41b30-337">Each range is built using 0 as a starting point, a value from hello list as an endpoint, and then trimmed of hello previous range toocreate discrete intervals.</span></span> <span data-ttu-id="41b30-338">Azure Search gör dessa saker som en del av fasetterad navigeringen.</span><span class="sxs-lookup"><span data-stu-id="41b30-338">Azure Search does these things as part of faceted navigation.</span></span> <span data-ttu-id="41b30-339">Du har inte toowrite koden för att strukturera varje intervall.</span><span class="sxs-lookup"><span data-stu-id="41b30-339">You do not have toowrite code for structuring each interval.</span></span>

### <a name="build-a-filter-for-a-range"></a><span data-ttu-id="41b30-340">Skapa ett filter för ett intervall</span><span class="sxs-lookup"><span data-stu-id="41b30-340">Build a filter for a range</span></span>
<span data-ttu-id="41b30-341">toofilter dokument baserat på ett intervall som du väljer, kan du använda hello `"ge"` och `"lt"` filtrera operatorer i ett tvådelat uttryck som definierar hello slutpunkter för hello intervall.</span><span class="sxs-lookup"><span data-stu-id="41b30-341">toofilter documents based on a range you select, you can use hello `"ge"` and `"lt"` filter operators in a two-part expression that defines hello endpoints of hello range.</span></span> <span data-ttu-id="41b30-342">Till exempel om du väljer hello intervallet 10-25 för en `listPrice` fältet hello filtret skulle bli `$filter=listPrice ge 10 and listPrice lt 25`.</span><span class="sxs-lookup"><span data-stu-id="41b30-342">For example, if you choose hello range 10-25 for a `listPrice` field, hello filter would be `$filter=listPrice ge 10 and listPrice lt 25`.</span></span> <span data-ttu-id="41b30-343">Hello exempelkod hello filteruttrycket använder **priceFrom** och **priceTo** parametrar tooset hello slutpunkter.</span><span class="sxs-lookup"><span data-stu-id="41b30-343">In hello sample code, hello filter expression uses **priceFrom** and **priceTo** parameters tooset hello endpoints.</span></span> 

  ![Frågan för ett intervall med värden][6]

<a name="geofacets"></a> 

## <a name="filter-based-on-distance"></a><span data-ttu-id="41b30-345">Filtrera baserat på avstånd</span><span class="sxs-lookup"><span data-stu-id="41b30-345">Filter based on distance</span></span>
<span data-ttu-id="41b30-346">Vanliga toosee filtrerar som hjälper du väljer en butik, restaurang eller baserat på dess aktuella plats närhet tooyour mål.</span><span class="sxs-lookup"><span data-stu-id="41b30-346">It’s common toosee filters that help you choose a store, restaurant, or destination based on its proximity tooyour current location.</span></span> <span data-ttu-id="41b30-347">Den här typen av filter kan se ut så fasetterad navigering, men det är bara ett filter.</span><span class="sxs-lookup"><span data-stu-id="41b30-347">While this type of filter might look like faceted navigation, it’s just a filter.</span></span> <span data-ttu-id="41b30-348">Vi anges det här gäller de av er som specifikt söker efter implementering råd om det specifika design problemet.</span><span class="sxs-lookup"><span data-stu-id="41b30-348">We mention it here for those of you who are specifically looking for implementation advice for that particular design problem.</span></span>

<span data-ttu-id="41b30-349">Det finns två geospatiala funktioner i Azure Search **geo.distance** och **geo.intersects**.</span><span class="sxs-lookup"><span data-stu-id="41b30-349">There are two Geospatial functions in Azure Search, **geo.distance** and **geo.intersects**.</span></span>

* <span data-ttu-id="41b30-350">Hej **geo.distance** returnerar funktionen hello avståndet i kilometer, mellan två punkter.</span><span class="sxs-lookup"><span data-stu-id="41b30-350">hello **geo.distance** function returns hello distance in kilometers between two points.</span></span> <span data-ttu-id="41b30-351">En punkt är ett fält och andra är en konstant skickas som en del av hello filter.</span><span class="sxs-lookup"><span data-stu-id="41b30-351">One point is a field and other is a constant passed as part of hello filter.</span></span> 
* <span data-ttu-id="41b30-352">Hej **geo.intersects** funktionen returnerar true om en viss punkten befinner sig inom en viss polygon.</span><span class="sxs-lookup"><span data-stu-id="41b30-352">hello **geo.intersects** function returns true if a given point is within a given polygon.</span></span> <span data-ttu-id="41b30-353">hello är ett fält och hello polygon har angetts som en konstant lista över koordinater som skickas som en del av hello filter.</span><span class="sxs-lookup"><span data-stu-id="41b30-353">hello point is a field and hello polygon is specified as a constant list of coordinates passed as part of hello filter.</span></span>

<span data-ttu-id="41b30-354">Du kan hitta filter exemplen i [syntaxen för OData-uttryck (Azure Search)](http://msdn.microsoft.com/library/azure/dn798921.aspx).</span><span class="sxs-lookup"><span data-stu-id="41b30-354">You can find filter examples in [OData expression syntax (Azure Search)](http://msdn.microsoft.com/library/azure/dn798921.aspx).</span></span>

<a name="tryitout"></a>

## <a name="try-hello-demo"></a><span data-ttu-id="41b30-355">Prova hello demonstrationer</span><span class="sxs-lookup"><span data-stu-id="41b30-355">Try hello demo</span></span>
<span data-ttu-id="41b30-356">hello Azure Search-jobbet Portal Demo innehåller hello exempel i den här artikeln.</span><span class="sxs-lookup"><span data-stu-id="41b30-356">hello Azure Search Job Portal Demo contains hello examples referenced in this article.</span></span>

-   <span data-ttu-id="41b30-357">Se och testa hello fungerande demo online på [Azure Search-jobbet Portal Demo](http://azjobsdemo.azurewebsites.net/).</span><span class="sxs-lookup"><span data-stu-id="41b30-357">See and test hello working demo online at [Azure Search Job Portal Demo](http://azjobsdemo.azurewebsites.net/).</span></span>

-   <span data-ttu-id="41b30-358">Hämta hello koden från hello [lagringsplatsen för Azure-exempel på GitHub](https://github.com/Azure-Samples/search-dotnet-asp-net-mvc-jobs).</span><span class="sxs-lookup"><span data-stu-id="41b30-358">Download hello code from hello [Azure-Samples repo on GitHub](https://github.com/Azure-Samples/search-dotnet-asp-net-mvc-jobs).</span></span>

<span data-ttu-id="41b30-359">Titta på hello URL: en för ändringar i Frågekonstruktionen när du arbetar med sökresultaten.</span><span class="sxs-lookup"><span data-stu-id="41b30-359">As you work with search results, watch hello URL for changes in query construction.</span></span> <span data-ttu-id="41b30-360">Det här programmet sker tooappend facets toohello URI som var och en.</span><span class="sxs-lookup"><span data-stu-id="41b30-360">This application happens tooappend facets toohello URI as you select each one.</span></span>

1. <span data-ttu-id="41b30-361">toouse hello mappning funktionerna i hello demoappen få en Bing Maps-nyckel från hello [Bing Maps Dev Center](https://www.bingmapsportal.com/).</span><span class="sxs-lookup"><span data-stu-id="41b30-361">toouse hello mapping functionality of hello demo app, get a Bing Maps key from hello [Bing Maps Dev Center](https://www.bingmapsportal.com/).</span></span> <span data-ttu-id="41b30-362">Klistra in den över hello befintlig nyckel i hello `index.cshtml` sidan.</span><span class="sxs-lookup"><span data-stu-id="41b30-362">Paste it over hello existing key in hello `index.cshtml` page.</span></span> <span data-ttu-id="41b30-363">Hej `BingApiKey` i hello `Web.config` filen inte används.</span><span class="sxs-lookup"><span data-stu-id="41b30-363">hello `BingApiKey` setting in hello `Web.config` file is not used.</span></span> 

2. <span data-ttu-id="41b30-364">Kör hello program.</span><span class="sxs-lookup"><span data-stu-id="41b30-364">Run hello application.</span></span> <span data-ttu-id="41b30-365">Rundtur hello valfria eller stänga hello-dialogrutan.</span><span class="sxs-lookup"><span data-stu-id="41b30-365">Take hello optional tour, or dismiss hello dialog box.</span></span>
   
3. <span data-ttu-id="41b30-366">Ange en sökterm, till exempel ”analytiker”, och klicka på sökikonen hello.</span><span class="sxs-lookup"><span data-stu-id="41b30-366">Enter a search term, such as "analyst", and click hello Search icon.</span></span> <span data-ttu-id="41b30-367">hello fråga körs snabbt.</span><span class="sxs-lookup"><span data-stu-id="41b30-367">hello query executes quickly.</span></span>
   
   <span data-ttu-id="41b30-368">En fasetterad navigeringsstruktur returneras även med hello sökresultat.</span><span class="sxs-lookup"><span data-stu-id="41b30-368">A faceted navigation structure is also returned with hello search results.</span></span> <span data-ttu-id="41b30-369">I hello sökresultatsidan innehåller hello fasetterad navigeringsstrukturen för varje aspekten resultat.</span><span class="sxs-lookup"><span data-stu-id="41b30-369">In hello search result page, hello faceted navigation structure includes counts for each facet result.</span></span> <span data-ttu-id="41b30-370">Inga facets är markerad, så alla matchande resultat returneras.</span><span class="sxs-lookup"><span data-stu-id="41b30-370">No facets are selected, so all matching results are returned.</span></span>
   
   ![Sökresultat innan du väljer facets][11]

4. <span data-ttu-id="41b30-372">Klicka på en befattning, plats eller minsta lön.</span><span class="sxs-lookup"><span data-stu-id="41b30-372">Click a Business Title, Location, or Minimum Salary.</span></span> <span data-ttu-id="41b30-373">Facets var null hello inledande sökning, men som de får på värden där objekt som matchar inte längre bort hello sökresultat.</span><span class="sxs-lookup"><span data-stu-id="41b30-373">Facets were null on hello initial search, but as they take on values, hello search results are trimmed of items that no longer match.</span></span>
   
   ![Sökresultat när du har valt facets][12]

5. <span data-ttu-id="41b30-375">tooclear hello fasetterad frågan så att du kan försöka annan fråga funktioner, klickar du på hello `[X]` när hello valt facets tooclear hello facets.</span><span class="sxs-lookup"><span data-stu-id="41b30-375">tooclear hello faceted query so that you can try different query behaviors, click hello `[X]` after hello selected facets tooclear hello facets.</span></span>
   
<a name="nextstep"></a>

## <a name="learn-more"></a><span data-ttu-id="41b30-376">Läs mer</span><span class="sxs-lookup"><span data-stu-id="41b30-376">Learn more</span></span>
<span data-ttu-id="41b30-377">Titta på [Azure Search ingående](http://channel9.msdn.com/Events/TechEd/Europe/2014/DBI-B410).</span><span class="sxs-lookup"><span data-stu-id="41b30-377">Watch [Azure Search Deep Dive](http://channel9.msdn.com/Events/TechEd/Europe/2014/DBI-B410).</span></span> <span data-ttu-id="41b30-378">Vid 45:25, det finns en demonstration på hur tooimplement facets.</span><span class="sxs-lookup"><span data-stu-id="41b30-378">At 45:25, there is a demo on how tooimplement facets.</span></span>

<span data-ttu-id="41b30-379">För mer information om principer för fasetterad navigering rekommenderar vi hello följande länkar:</span><span class="sxs-lookup"><span data-stu-id="41b30-379">For more insights on design principles for faceted navigation, we recommend hello following links:</span></span>

* [<span data-ttu-id="41b30-380">Utformning för fasetterad sökning</span><span class="sxs-lookup"><span data-stu-id="41b30-380">Designing for Faceted Search</span></span>](http://www.uie.com/articles/faceted_search/)
* [<span data-ttu-id="41b30-381">Designmönster: Fasetterad navigering</span><span class="sxs-lookup"><span data-stu-id="41b30-381">Design Patterns: Faceted Navigation</span></span>](http://alistapart.com/article/design-patterns-faceted-navigation)


<!--Anchors-->
[How toobuild it]: #howtobuildit
[Build hello presentation layer]: #presentationlayer
[Build hello index]: #buildindex
[Check for data quality]: #checkdata
[Build hello query]: #buildquery
[Tips on how toocontrol faceted navigation]: #tips
[Faceted navigation based on range values]: #rangefacets
[Faceted navigation based on GeoPoints]: #geofacets
[Try it out]: #tryitout

<!--Image references-->
[1]: ./media/search-faceted-navigation/azure-search-faceting-example.PNG
[2]: ./media/search-faceted-navigation/Facet-2-CSHTML.PNG
[3]: ./media/search-faceted-navigation/Facet-3-schema.PNG
[4]: ./media/search-faceted-navigation/Facet-4-SearchMethod.PNG
[5]: ./media/search-faceted-navigation/Facet-5-Prices.PNG
[6]: ./media/search-faceted-navigation/Facet-6-buildfilter.PNG
[7]: ./media/search-faceted-navigation/Facet-7-appstart.png
[8]: ./media/search-faceted-navigation/Facet-8-appbike.png
[9]: ./media/search-faceted-navigation/Facet-9-appbikefaceted.png
[10]: ./media/search-faceted-navigation/Facet-10-appTitle.png
[11]: ./media/search-faceted-navigation/faceted-search-before-facets.png
[12]: ./media/search-faceted-navigation/faceted-search-after-facets.png

<!--Link references-->
[Designing for Faceted Search]: http://www.uie.com/articles/faceted_search/
[Design Patterns: Faceted Navigation]: http://alistapart.com/article/design-patterns-faceted-navigation
[Create your first application]: search-create-first-solution.md
[OData expression syntax (Azure Search)]: http://msdn.microsoft.com/library/azure/dn798921.aspx
[Azure Search Adventure Works Demo]: https://azuresearchadventureworksdemo.codeplex.com/
[http://www.odata.org/documentation/odata-version-2-0/overview/]: http://www.odata.org/documentation/odata-version-2-0/overview/ 
[Faceting on Azure Search forum post]: ../faceting-on-azure-search.md?forum=azuresearch
[Search Documents (Azure Search API)]: http://msdn.microsoft.com/library/azure/dn798927.aspx


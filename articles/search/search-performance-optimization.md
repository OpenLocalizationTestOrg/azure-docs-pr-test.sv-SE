---
title: "aaaAzure Sök prestanda och optimering överväganden | Microsoft Docs"
description: "Finjustera prestanda för Azure Search och konfigurera optimala skala"
services: search
documentationcenter: 
author: LiamCavanagh
manager: pablocas
editor: 
ms.assetid: 4d3cd864-29d2-4921-be0d-a3f1a819de46
ms.service: search
ms.devlang: rest-api
ms.workload: search
ms.topic: article
ms.tgt_pltfrm: na
ms.date: 05/01/2017
ms.author: liamca
ms.openlocfilehash: 725149ba32773ab6b4c9d4b441424aba78db7c42
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: sv-SE
ms.lasthandoff: 10/06/2017
---
# <a name="azure-search-performance-and-optimization-considerations"></a><span data-ttu-id="f884e-103">Azure Search-prestanda och optimering överväganden</span><span class="sxs-lookup"><span data-stu-id="f884e-103">Azure Search performance and optimization considerations</span></span>
<span data-ttu-id="f884e-104">En bra sökinställningar är en nyckel toosuccess för många mobila enheter och webbprogram.</span><span class="sxs-lookup"><span data-stu-id="f884e-104">A great search experience is a key toosuccess for many mobile and web applications.</span></span> <span data-ttu-id="f884e-105">Från fastigheter påverkar tooused bilen marknadsplatser tooonline kataloger, Snabbsökning och relevanta resultat hello kundupplevelsen.</span><span class="sxs-lookup"><span data-stu-id="f884e-105">From real estate, tooused car marketplaces tooonline catalogs, fast search and relevant results will affect hello customer experience.</span></span> <span data-ttu-id="f884e-106">Det här dokumentet är avsett toohelp du identifiera bästa praxis för hur tooget hello mesta möjliga av Azure Search, särskilt för avancerade scenarier med sofistikerade krav för skalbarhet, stöd för flera språk eller anpassade rangordning.</span><span class="sxs-lookup"><span data-stu-id="f884e-106">This document is intended toohelp you discover best practices for how tooget hello most out of Azure Search, especially for advanced scenarios with sophisticated requirements for scalability, multi-language support, or custom ranking.</span></span>  <span data-ttu-id="f884e-107">Dessutom kan det här dokumentet beskrivs internals och täcker metoder fungera effektivt i verkliga kunden appar.</span><span class="sxs-lookup"><span data-stu-id="f884e-107">In addition, this document outlines internals and covers approaches that work effectively in real-world customer apps.</span></span>

## <a name="performance-and-scale-tuning-for-search-services"></a><span data-ttu-id="f884e-108">Prestanda och skalning justera för Search-tjänster</span><span class="sxs-lookup"><span data-stu-id="f884e-108">Performance and scale tuning for Search services</span></span>
<span data-ttu-id="f884e-109">Vi kan alla använda toosearch motorer, till exempel Bing och Google hello hög prestanda och de erbjuder.</span><span class="sxs-lookup"><span data-stu-id="f884e-109">We are all used toosearch engines such as Bing and Google and hello high performance they offer.</span></span>  <span data-ttu-id="f884e-110">När kunder använder din sökning-aktiverade webb- eller mobila program, kommer de därför förvänta sig liknande prestandaegenskaper.</span><span class="sxs-lookup"><span data-stu-id="f884e-110">As a result, when customers use your search-enabled web or mobile application, they will expect similar performance characteristics.</span></span>  <span data-ttu-id="f884e-111">När du optimerar prestanda för sökning är på bästa sätt för hello toofocus på latens, vilket är hello tid som en fråga tar toocomplete och returnera resultat.</span><span class="sxs-lookup"><span data-stu-id="f884e-111">When optimizing for search performance, one of hello best approaches is toofocus on latency, which is hello time a query takes toocomplete and return results.</span></span>  <span data-ttu-id="f884e-112">När du optimerar för sökning fördröjning är det viktigt att:</span><span class="sxs-lookup"><span data-stu-id="f884e-112">When optimizing for search latency it is important to:</span></span>

1. <span data-ttu-id="f884e-113">Välj en målfördröjning (eller hur lång tid) som en typisk sökbegäran bör vidta toocomplete.</span><span class="sxs-lookup"><span data-stu-id="f884e-113">Pick a target latency (or maximum amount of time) that a typical search request should take toocomplete.</span></span>
2. <span data-ttu-id="f884e-114">Skapa och testa en verklig arbetsbelastning mot din söktjänst med en realistisk dataset toomeasure dessa latens priser.</span><span class="sxs-lookup"><span data-stu-id="f884e-114">Create and test a real workload against your search service with a realistic dataset toomeasure these latency rates.</span></span>
3. <span data-ttu-id="f884e-115">Börja med ett lågt antal frågor per sekund (QPS) och fortsätta tooincrease hello nummer köras i hello test förrän hello frågan latens sjunker under hello definierats målfördröjning.</span><span class="sxs-lookup"><span data-stu-id="f884e-115">Start with a low number of queries per second (QPS) and continue tooincrease hello number executed in hello test until hello query latency drops below hello defined target latency.</span></span>  <span data-ttu-id="f884e-116">Det här är ett viktigt benchmark toohelp som du planerar för att skala när programmet växer i användning.</span><span class="sxs-lookup"><span data-stu-id="f884e-116">This is an important benchmark toohelp you plan for scale as your application grows in usage.</span></span>
4. <span data-ttu-id="f884e-117">Om möjligt återanvända HTTP-anslutningar.</span><span class="sxs-lookup"><span data-stu-id="f884e-117">Wherever possible, reuse HTTP connections.</span></span>  <span data-ttu-id="f884e-118">Om du använder hello Azure Search .NET SDK, det innebär att du ska använda en instans eller [SearchIndexClient](https://docs.microsoft.com/dotnet/api/microsoft.azure.search.searchindexclient) instans och om du använder Hej REST-API, bör du återanvänder en enda HttpClient.</span><span class="sxs-lookup"><span data-stu-id="f884e-118">If you are using hello Azure Search .NET SDK, this means you should reuse an instance or [SearchIndexClient](https://docs.microsoft.com/dotnet/api/microsoft.azure.search.searchindexclient) instance, and if you are using hello REST API, you should reuse a single HttpClient.</span></span>

<span data-ttu-id="f884e-119">När du skapar dessa testa arbetsbelastningar finns det vissa egenskaper för Azure Search tookeep i åtanke:</span><span class="sxs-lookup"><span data-stu-id="f884e-119">While creating these test workloads, there are some characteristics of Azure Search tookeep in mind:</span></span>

1. <span data-ttu-id="f884e-120">Det är möjligt toopush så många Sök frågor i taget, att hello tillgängliga resurser i Azure Search-tjänsten kommer att för många.</span><span class="sxs-lookup"><span data-stu-id="f884e-120">It is possible toopush so many search queries at one time, that hello resources available in your Azure Search service will be overwhelmed.</span></span>  <span data-ttu-id="f884e-121">När det händer visas HTTP 503 svarskoder.</span><span class="sxs-lookup"><span data-stu-id="f884e-121">When this happens, you will see HTTP 503 response codes.</span></span>  <span data-ttu-id="f884e-122">Därför är det bästa toostart med olika områden av search-begäranden toosee hello skillnaderna i svarstid priser när du lägger till flera search-begäranden.</span><span class="sxs-lookup"><span data-stu-id="f884e-122">For this reason, it is best toostart with various ranges of search requests toosee hello differences in latency rates as you add more search requests.</span></span>
2. <span data-ttu-id="f884e-123">Överföra innehåll tooAzure Sök påverkar hello prestandan och svarstiden för hello Azure Search-tjänsten.</span><span class="sxs-lookup"><span data-stu-id="f884e-123">Uploading of content tooAzure Search will impact hello overall performance and latency of hello Azure Search service.</span></span>  <span data-ttu-id="f884e-124">Om du förväntar dig toosend data medan användare utför sökningar, är det viktigt tootake arbetsbelastningen till kontot i dina tester.</span><span class="sxs-lookup"><span data-stu-id="f884e-124">If you expect toosend data while users are performing searches, it is important tootake this workload into account in your tests.</span></span>
3. <span data-ttu-id="f884e-125">Inte alla sökfråga utför på hello samma prestanda.</span><span class="sxs-lookup"><span data-stu-id="f884e-125">Not every search query will perform at hello same performance levels.</span></span>  <span data-ttu-id="f884e-126">Till exempel utför ett dokument lookup- eller förslag vanligtvis snabbare än en fråga med ett stort antal aspekter och filter.</span><span class="sxs-lookup"><span data-stu-id="f884e-126">For example, a document lookup or search suggestion will typically perform faster than a query with a significant number of facets and filters.</span></span>  <span data-ttu-id="f884e-127">Det är den bästa tootake hello olika frågor som du förväntar dig toosee till kontot när du skapar dina tester.</span><span class="sxs-lookup"><span data-stu-id="f884e-127">It is best tootake hello various queries you expect toosee into account when building your tests.</span></span>  
4. <span data-ttu-id="f884e-128">Variation av search-begäranden är viktig eftersom om du kör kontinuerligt hello samma söka begäranden, cachelagring av data start toomake prestanda ser bättre än den kan med flera olika fråga.</span><span class="sxs-lookup"><span data-stu-id="f884e-128">Variation of search requests is important because if you continually execute hello same search requests, caching of data will start toomake performance look better than it might with a more disparate query set.</span></span>

> [!NOTE]
> <span data-ttu-id="f884e-129">[Visual Studio belastningen testning](https://www.visualstudio.com/docs/test/performance-testing/run-performance-tests-app-before-release) är ett mycket bra sätt tooperform din benchmark testar eftersom du tooexecute HTTP-begäranden som du behöver för att köra frågor mot Azure Search och aktiverar parallellisering för förfrågningar.</span><span class="sxs-lookup"><span data-stu-id="f884e-129">[Visual Studio Load Testing](https://www.visualstudio.com/docs/test/performance-testing/run-performance-tests-app-before-release) is a really good way tooperform your benchmark tests as it allows you tooexecute HTTP requests as you would need for executing queries against Azure Search and enables parallelization of requests.</span></span>
> 
> 

## <a name="scaling-azure-search-for-high-query-rates-and-throttled-requests"></a><span data-ttu-id="f884e-130">Skala Azure Search för hög frågan priser och begränsas begäranden</span><span class="sxs-lookup"><span data-stu-id="f884e-130">Scaling Azure Search for high query rates and throttled requests</span></span>
<span data-ttu-id="f884e-131">När du tar emot för många begäranden för begränsad eller överskrider dina mål latens priser från en ökad frågebelastningen titta toodecrease svarstid priser på något av två sätt:</span><span class="sxs-lookup"><span data-stu-id="f884e-131">When you are receiving too many throttled requests or exceed your target latency rates from an increased query load, you can look toodecrease latency rates in one of two ways:</span></span>

1. <span data-ttu-id="f884e-132">**Öka repliker:** en replik är som en kopia av dina data så att Azure Search tooload belastningsutjämna förfrågningar mot hello flera kopior.</span><span class="sxs-lookup"><span data-stu-id="f884e-132">**Increase Replicas:**  A replica is like a copy of your data allowing Azure Search tooload balance requests against hello multiple copies.</span></span>  <span data-ttu-id="f884e-133">Alla belastningsutjämning och replikering av data över repliker hanteras av Azure Search och du kan ändra hello antal repliker som allokerats för din tjänst när som helst.</span><span class="sxs-lookup"><span data-stu-id="f884e-133">All load balancing and replication of data across replicas is managed by Azure Search and you can alter hello number of replicas allocated for your service at any time.</span></span>  <span data-ttu-id="f884e-134">Du kan allokera too12 repliker i en standardsöktjänst och 3 repliker i en grundläggande söktjänst.</span><span class="sxs-lookup"><span data-stu-id="f884e-134">You can allocate up too12 replicas in a Standard search service and 3 replicas in a Basic search service.</span></span> <span data-ttu-id="f884e-135">Repliker kan justeras antingen från hello [Azure-portalen](search-create-service-portal.md) eller [PowerShell](search-manage-powershell.md).</span><span class="sxs-lookup"><span data-stu-id="f884e-135">Replicas can be adjusted either from hello [Azure portal](search-create-service-portal.md) or [PowerShell](search-manage-powershell.md).</span></span>
2. <span data-ttu-id="f884e-136">**Öka Sök nivå:** Azure Search är en [antal nivåer](https://azure.microsoft.com/pricing/details/search/) och var och en av de här nivåerna ger olika nivåer av prestanda.</span><span class="sxs-lookup"><span data-stu-id="f884e-136">**Increase Search Tier:**  Azure Search comes in a [number of tiers](https://azure.microsoft.com/pricing/details/search/) and each of these tiers offers different levels of performance.</span></span>  <span data-ttu-id="f884e-137">I vissa fall kanske du så många frågor hello nivån på inte kan tillhandahålla tillräckligt låg latens priser, även när repliker är överutnyttjade ut.  I det här fallet kan du tooconsider utnyttjar en hello senare Sök nivåer, till exempel hello Azure Search S3 nivå som passar bra för scenarier med stora mängder dokument och mycket hög frågan arbetsbelastningar.</span><span class="sxs-lookup"><span data-stu-id="f884e-137">In some cases, you may have so many queries that hello tier you are on cannot provide sufficiently low latency rates, even when replicas are maxed out.  In this case, you may want tooconsider leveraging one of hello higher search tiers such as hello Azure Search S3 tier that is well suited for scenarios with large numbers of documents and extremely high query workloads.</span></span>

## <a name="scaling-azure-search-for-slow-individual-queries"></a><span data-ttu-id="f884e-138">Skala Azure Search för långsam enskilda frågor</span><span class="sxs-lookup"><span data-stu-id="f884e-138">Scaling Azure Search for slow individual queries</span></span>
<span data-ttu-id="f884e-139">En annan orsak varför latens priser kan vara långsam är från en enskild fråga tar för lång toocomplete.</span><span class="sxs-lookup"><span data-stu-id="f884e-139">Another reason why latency rates can be slow is from a single query taking too long toocomplete.</span></span>  <span data-ttu-id="f884e-140">I det här fallet förbättrar lägger till repliker inte svarstiden priser.</span><span class="sxs-lookup"><span data-stu-id="f884e-140">In this case, adding replicas will not improve latency rates.</span></span>  <span data-ttu-id="f884e-141">För det här fallet är finns det två alternativ:</span><span class="sxs-lookup"><span data-stu-id="f884e-141">For this case there are two options available:</span></span>

1. <span data-ttu-id="f884e-142">**Öka partitioner** en partition är en mekanism för att dela data mellan extra resurser.</span><span class="sxs-lookup"><span data-stu-id="f884e-142">**Increase Partitions** A partition is a mechanism for splitting your data across extra resources.</span></span>  <span data-ttu-id="f884e-143">Därför när du lägger till en andra partition hämtar data delas in i två.</span><span class="sxs-lookup"><span data-stu-id="f884e-143">For this reason, when you add a second partition, your data gets split into two.</span></span>  <span data-ttu-id="f884e-144">En tredje partition delar ditt index i tre osv.  Detta har även hello effekt att i vissa fall långsam frågor utför snabbare på grund av toohello parallellisering för beräkning.</span><span class="sxs-lookup"><span data-stu-id="f884e-144">A third partition splits your index into three, etc.  This also has hello effect that in some cases, slow queries will perform faster due toohello parallelization of computation.</span></span>  <span data-ttu-id="f884e-145">Det finns några exempel på där vi sett att detta parallellisering fungerar mycket bra med frågor som har låg selektivitet frågor.</span><span class="sxs-lookup"><span data-stu-id="f884e-145">There are a few examples of where we have seen this parallelization work extremely well with queries that have low selectivity queries.</span></span>  <span data-ttu-id="f884e-146">Det här består av frågor som matchar många dokument eller när faceting måste tooprovide räknar över stora mängder dokument.</span><span class="sxs-lookup"><span data-stu-id="f884e-146">This consists of queries that match many documents or when faceting needs tooprovide counts over large numbers of documents.</span></span>  <span data-ttu-id="f884e-147">Eftersom det finns många beräkning behövs tooscore hello relevans hello dokument eller toocount hello antal dokument, lägga till extra partitioner kan hjälpa tooprovide ytterligare beräkning.</span><span class="sxs-lookup"><span data-stu-id="f884e-147">Since there is a lot of computation needed tooscore hello relevancy of hello documents or toocount hello numbers of documents, adding extra partitions can help tooprovide additional computation.</span></span>  
   
   <span data-ttu-id="f884e-148">Det kan finnas maximalt 12 partitioner i standardsöktjänst och 1 partition i hello grundläggande search-tjänsten.</span><span class="sxs-lookup"><span data-stu-id="f884e-148">There can be a maximum of 12 partitions in Standard search service and 1 partition in hello basic search service.</span></span>  <span data-ttu-id="f884e-149">Partitioner kan justeras antingen från hello [Azure-portalen](search-create-service-portal.md) eller [PowerShell](search-manage-powershell.md).</span><span class="sxs-lookup"><span data-stu-id="f884e-149">Partitions can be adjusted either from hello [Azure portal](search-create-service-portal.md) or [PowerShell](search-manage-powershell.md).</span></span>
2. <span data-ttu-id="f884e-150">**Gränsen för hög kardinalitet fält:** en hög kardinalitet fältet består av en facetable eller filtrera fält som har ett stort antal unika värden och har därför mycket resurser toocompute resultat än.</span><span class="sxs-lookup"><span data-stu-id="f884e-150">**Limit High Cardinality Fields:** A high cardinality field consists of a facetable or filterable field that has a significant number of unique values, and as a result, takes a lot of resources toocompute results over.</span></span>   <span data-ttu-id="f884e-151">Exempelvis blir anger ett produkt-ID eller beskrivning fält som facetable filtrera för hög kardinalitet eftersom de flesta hello värdena från dokumentet toodocument är unika.</span><span class="sxs-lookup"><span data-stu-id="f884e-151">For example, setting a Product ID or Description field as facetable/filterable would make for high cardinality because most of hello values from document toodocument are unique.</span></span> <span data-ttu-id="f884e-152">Om möjligt begränsa hello antalet hög kardinalitet fält.</span><span class="sxs-lookup"><span data-stu-id="f884e-152">Wherever possible, limit hello number of high cardinality fields.</span></span>
3. <span data-ttu-id="f884e-153">**Öka Sök nivå:** Flytta upp tooa högre nivå för Azure Search kan vara ett annat sätt tooimprove prestanda för långsamma frågor.</span><span class="sxs-lookup"><span data-stu-id="f884e-153">**Increase Search Tier:**  Moving up tooa higher Azure Search tier can be another way tooimprove performance of slow queries.</span></span>  <span data-ttu-id="f884e-154">Varje högre nivå ger också snabbare processor och minne som kan ha en positiv inverkan på prestanda för frågor.</span><span class="sxs-lookup"><span data-stu-id="f884e-154">Each higher tier also provides faster CPU’s and more memory which can have a positive impact on query performance.</span></span>

## <a name="scaling-for-availability"></a><span data-ttu-id="f884e-155">Skalning för tillgänglighet</span><span class="sxs-lookup"><span data-stu-id="f884e-155">Scaling for availability</span></span>
<span data-ttu-id="f884e-156">Repliker inte bara minska svarstid men kan också tillåta för hög tillgänglighet.</span><span class="sxs-lookup"><span data-stu-id="f884e-156">Replicas not only help reduce query latency but can also allow for high availability.</span></span>  <span data-ttu-id="f884e-157">Med en enskild replik du förväntar dig periodiska driftstopp på grund av tooserver omstarter efter programuppdateringar eller för andra underhållshändelser som inträffar.</span><span class="sxs-lookup"><span data-stu-id="f884e-157">With a single replica, you should expect periodic downtime due tooserver reboots after software updates or for other maintenance events that will occur.</span></span>  <span data-ttu-id="f884e-158">Därför är det viktigt tooconsider om ditt program kräver hög tillgänglighet för sökningar (frågor) samt skrivningar (indexering händelser).</span><span class="sxs-lookup"><span data-stu-id="f884e-158">As a result, it is important tooconsider if your application requires high availability of searches (queries) as well as writes (indexing events).</span></span>  <span data-ttu-id="f884e-159">Azure Search erbjuder SLA alternativ på alla hello betald Sök erbjudanden med hello följande attribut:</span><span class="sxs-lookup"><span data-stu-id="f884e-159">Azure Search offers SLA options on all hello paid search offerings with hello following attributes:</span></span>

* <span data-ttu-id="f884e-160">2 repliker för hög tillgänglighet för skrivskyddade arbetsbelastningar (frågor)</span><span class="sxs-lookup"><span data-stu-id="f884e-160">2 replicas for high availability of read-only workloads (queries)</span></span>
* <span data-ttu-id="f884e-161">3 eller fler repliker för hög tillgänglighet i läsa / skriva-arbetsbelastningar (frågor och indexering)</span><span class="sxs-lookup"><span data-stu-id="f884e-161">3 or more replicas for high availability of read-write workloads (queries and indexing)</span></span>

<span data-ttu-id="f884e-162">Mer information om detta finns hello [servicenivåavtal för Azure Search](https://azure.microsoft.com/support/legal/sla/search/v1_0/).</span><span class="sxs-lookup"><span data-stu-id="f884e-162">For more details on this, please visit hello [Azure Search Service Level Agreement](https://azure.microsoft.com/support/legal/sla/search/v1_0/).</span></span>

<span data-ttu-id="f884e-163">Eftersom repliker är kopior av dina data med flera repliker kan Azure Search toodo datorn startas om och underhåll mot en replik i taget samtidigt som frågor toocontinue toobe körs mot hello repliker.</span><span class="sxs-lookup"><span data-stu-id="f884e-163">Since replicas are copies of your data, having multiple replicas allows Azure Search toodo machine reboots and maintenance against one replica at a time while allowing queries toocontinue toobe executed against hello other replicas.</span></span>  <span data-ttu-id="f884e-164">Därför måste du också tooconsider hur den här driftstörningen kan påverka hello frågor som nu har toobe körs mot en mindre kopia av hello data.</span><span class="sxs-lookup"><span data-stu-id="f884e-164">For that reason, you will also need tooconsider how this downtime may impact hello queries that now have toobe executed against one less copy of hello data.</span></span>

## <a name="scaling-geo-distributed-workloads-and-provide-geo-redundancy"></a><span data-ttu-id="f884e-165">Skalning fördelade arbetsbelastningar och ge geo-redundans</span><span class="sxs-lookup"><span data-stu-id="f884e-165">Scaling geo-distributed workloads and provide geo-redundancy</span></span>
<span data-ttu-id="f884e-166">Du hittar att användare finns är långt från hello datacenter där är värd för Azure Search-tjänsten har högre latens priser för fördelade arbetsbelastningar.</span><span class="sxs-lookup"><span data-stu-id="f884e-166">For geo-distributed workloads, you will find that users located far from hello data center where your Azure Search service is hosted will have higher latency rates.</span></span>  <span data-ttu-id="f884e-167">Därför är det ofta viktiga toohave flera search-tjänster i områden som är närmare närhet toothese användare.</span><span class="sxs-lookup"><span data-stu-id="f884e-167">For this reason, it is often important toohave multiple search services in regions that are in closer proximity toothese users.</span></span>  <span data-ttu-id="f884e-168">Azure Search innehåller för närvarande inte en automatiserad metod för geo-replikering Azure Search index över regioner, men det finns några metoder som kan användas som kan göra den här processen enkel tooimplement och hantera.</span><span class="sxs-lookup"><span data-stu-id="f884e-168">Azure Search does not currently provide an automated method of geo-replicating Azure Search indexes across regions, but there are some techniques that can be used that can make this process simple tooimplement and manage.</span></span> <span data-ttu-id="f884e-169">Dessa beskrivs i hello följande avsnitten.</span><span class="sxs-lookup"><span data-stu-id="f884e-169">These are outlined in hello next few sections.</span></span>

<span data-ttu-id="f884e-170">hello målet en uppsättning fördelade search-tjänster är toohave två eller fler index som är tillgängliga i två eller flera regioner där en användare kommer att dirigeras toohello Azure Search-tjänst som tillhandahåller hello lägsta svarstid som visas i det här exemplet:</span><span class="sxs-lookup"><span data-stu-id="f884e-170">hello goal of a geo-distributed set of search services is toohave two or more indexes available in two or more regions where a user will be routed toohello Azure Search service that provides hello lowest latency as seen in this example:</span></span>

   ![Cross-fliken i tjänster efter region][1]

### <a name="keeping-data-in-sync-across-multiple-azure-search-services"></a><span data-ttu-id="f884e-172">Synkronisera data över flera Azure Search-tjänster</span><span class="sxs-lookup"><span data-stu-id="f884e-172">Keeping data in sync across multiple Azure Search services</span></span>
<span data-ttu-id="f884e-173">Det finns två alternativ för att hålla dina distribuerade söktjänster synkroniserade som består av antingen med hjälp av hello [Azure sökindexeraren](search-indexer-overview.md) eller hello Push-API (kallas även tooas hello [Azure Search REST API](https://docs.microsoft.com/rest/api/searchservice/)).</span><span class="sxs-lookup"><span data-stu-id="f884e-173">There are two options for keeping your distributed search services in sync which consist of either using hello [Azure Search Indexer](search-indexer-overview.md) or hello Push API (also referred tooas hello [Azure Search REST API](https://docs.microsoft.com/rest/api/searchservice/)).</span></span>  

### <a name="azure-search-indexers"></a><span data-ttu-id="f884e-174">Azure Search indexerare</span><span class="sxs-lookup"><span data-stu-id="f884e-174">Azure Search Indexers</span></span>
<span data-ttu-id="f884e-175">Om du använder hello Azure sökindexeraren importerar du redan dataändringar från en central datalagret, till exempel Azure SQL DB- eller Azure Cosmos DB.</span><span class="sxs-lookup"><span data-stu-id="f884e-175">If you are using hello Azure Search Indexer, you are already importing data changes from a central datastore such as Azure SQL DB or Azure Cosmos DB.</span></span> <span data-ttu-id="f884e-176">När du skapar en ny sökning tjänsten du helt enkelt också skapa en ny Azure-sökindexeraren för tjänsten som punkter toothis samma datalager.</span><span class="sxs-lookup"><span data-stu-id="f884e-176">When you create a new search Service, you simply also create a new Azure Search Indexer for that service that points toothis same datastore.</span></span> <span data-ttu-id="f884e-177">På så sätt, när nya ändringar träda i hello datalagret, kommer de att hämtas indexeras av hello olika indexerare.</span><span class="sxs-lookup"><span data-stu-id="f884e-177">That way, whenever new changes come into hello data store, they will then be indexed by hello various Indexers.</span></span>  

<span data-ttu-id="f884e-178">Här är ett exempel på hur den arkitekturen skulle se ut.</span><span class="sxs-lookup"><span data-stu-id="f884e-178">Here is an example of what that architecture would look like.</span></span>

   ![Enskild datakälla med tjänsten kombinationer och distribuerade indexeraren][2]

### <a name="push-api"></a><span data-ttu-id="f884e-180">Push-API</span><span class="sxs-lookup"><span data-stu-id="f884e-180">Push API</span></span>
<span data-ttu-id="f884e-181">Om du använder hello Azure Search Push-API för[uppdaterar innehållet i ditt Azure Search index](https://docs.microsoft.com/rest/api/searchservice/update-index), du kan synkronisera din olika search-tjänster genom att överföra ändringar tooall search-tjänster när en uppdatering krävs.</span><span class="sxs-lookup"><span data-stu-id="f884e-181">If you are using hello Azure Search Push API too[update content in your Azure Search index](https://docs.microsoft.com/rest/api/searchservice/update-index), you can keep your various search services in sync by pushing changes tooall search services whenever an update is required.</span></span>  <span data-ttu-id="f884e-182">När detta är det viktigt toomake att toohandle fall där en uppdatering tooone search-tjänsten misslyckas och en eller flera uppdateringar lyckas.</span><span class="sxs-lookup"><span data-stu-id="f884e-182">When doing this it is important toomake sure toohandle cases where an update tooone search service fails and one or more updates succeed.</span></span>

## <a name="leveraging-azure-traffic-manager"></a><span data-ttu-id="f884e-183">Utnyttja Azure Traffic Manager</span><span class="sxs-lookup"><span data-stu-id="f884e-183">Leveraging Azure Traffic Manager</span></span>
<span data-ttu-id="f884e-184">[Azure Traffic Manager](../traffic-manager/traffic-manager-overview.md) kan du tooroute begäranden toomultiple geo finns webbplatser som sedan backas upp av flera Azure Search-tjänster.</span><span class="sxs-lookup"><span data-stu-id="f884e-184">[Azure Traffic Manager](../traffic-manager/traffic-manager-overview.md) allows you tooroute requests toomultiple geo-located websites that are then backed by multiple Azure Search Services.</span></span>  <span data-ttu-id="f884e-185">En fördel med hello Traffic Manager är att den avsökning Azure Search tooensure att den är tillgänglig och dirigera användarna tooalternate search-tjänster i hello händelse driftstopp.</span><span class="sxs-lookup"><span data-stu-id="f884e-185">One advantage of hello Traffic Manager is that it can probe Azure Search tooensure that it is available and route users tooalternate search services in hello event of downtime.</span></span>  <span data-ttu-id="f884e-186">Dessutom, om du routning search-begäranden via Azure-webbplatser, kan Azure Traffic Manager du tooload saldo fall där hello webbplatsen är igång, men inte Azure Search.</span><span class="sxs-lookup"><span data-stu-id="f884e-186">In addition, if you are routing search requests through Azure Web Sites, Azure Traffic Manager allows you tooload balance cases where hello Website is up but not Azure Search.</span></span>  <span data-ttu-id="f884e-187">Här är ett exempel på vilka hello-arkitektur som utnyttjar Traffic Manager.</span><span class="sxs-lookup"><span data-stu-id="f884e-187">Here is an example of what hello architecture that leverages Traffic Manager.</span></span>

   ![Cross-fliken i tjänster efter region, med central Traffic Manager][3]

## <a name="monitoring-performance"></a><span data-ttu-id="f884e-189">Övervaka prestanda</span><span class="sxs-lookup"><span data-stu-id="f884e-189">Monitoring performance</span></span>
<span data-ttu-id="f884e-190">Azure Search erbjuder hello möjlighet tooanalyze och övervaka hello prestandan för din tjänst via [Sök trafik Analytics (STA)](search-traffic-analytics.md).</span><span class="sxs-lookup"><span data-stu-id="f884e-190">Azure Search offers hello ability tooanalyze and monitor hello performance of your service through [Search Traffic Analytics (STA)](search-traffic-analytics.md).</span></span> <span data-ttu-id="f884e-191">Via STA, kan du eventuellt logga hello enskilda sökningar samt aggregerade mått tooan Azure Storage-konto som sedan kan bearbetas för analys eller visualiseras i Power BI.</span><span class="sxs-lookup"><span data-stu-id="f884e-191">Through STA, you can optionally log hello individual search operations as well as aggregated metrics tooan Azure Storage account that can then be processed for analysis or visualized in Power BI.</span></span>  <span data-ttu-id="f884e-192">Med hjälp av STA mätvärden, kan du granska prestandastatistik, till exempel Genomsnittligt antal frågor eller svarstider för frågan.</span><span class="sxs-lookup"><span data-stu-id="f884e-192">Using STA metrics, you can review performance statistics such as average number of queries or query response times.</span></span>  <span data-ttu-id="f884e-193">Dessutom kan hello loggning du toodrill detaljer om specifika sökningar.</span><span class="sxs-lookup"><span data-stu-id="f884e-193">In addition, hello operation logging allows you toodrill into details of specific search operations.</span></span>

<span data-ttu-id="f884e-194">STA är ett ovärderligt verktyg toounderstand svarstid priser som ur Azure Search.</span><span class="sxs-lookup"><span data-stu-id="f884e-194">STA is a valuable tool toounderstand latency rates from that Azure Search perspective.</span></span>  <span data-ttu-id="f884e-195">Eftersom hello frågan prestandamått loggas baseras på hello tid en fråga tar toobe bearbetats helt i Azure Search (från hello tiden är det begärda toowhen skickas ut), är du kan toouse denna toodetermine om problem med nätverkssvarstiden från hello Azure Search-tjänsten sida eller utanför hello tjänst, till exempel från Nätverksfördröjningen.</span><span class="sxs-lookup"><span data-stu-id="f884e-195">Since hello query performance metrics logged are based on hello time a query takes toobe fully processed in Azure Search (from hello time it is requested toowhen it is sent out), you are able toouse this toodetermine if latency issues are from hello Azure Search service side or outside of hello service, such as from network latency.</span></span>  

## <a name="next-steps"></a><span data-ttu-id="f884e-196">Nästa steg</span><span class="sxs-lookup"><span data-stu-id="f884e-196">Next steps</span></span>
<span data-ttu-id="f884e-197">toolearn mer information om priser nivåer och tjänster gränser för vart och ett hello finns [gränser i Azure Search](search-limits-quotas-capacity.md).</span><span class="sxs-lookup"><span data-stu-id="f884e-197">toolearn more about hello pricing tiers and services limits for each one, see [Service limits in Azure Search](search-limits-quotas-capacity.md).</span></span>

<span data-ttu-id="f884e-198">Besök [kapacitetsplanering](search-capacity-planning.md) toolearn mer om kombinationer av partition och repliken.</span><span class="sxs-lookup"><span data-stu-id="f884e-198">Visit [Capacity planning](search-capacity-planning.md) toolearn more about partition and replica combinations.</span></span>

<span data-ttu-id="f884e-199">Titta på följande video hello för flera nedbrytning på prestanda och toosee vissa demonstration av hur tooimplement hello optimeringar som beskrivs i den här artikeln:</span><span class="sxs-lookup"><span data-stu-id="f884e-199">For more drilldown on performance and toosee some demonstrations of how tooimplement hello optimizations discussed in this article, watch hello following video:</span></span>

> [!VIDEO https://channel9.msdn.com/Events/Microsoft-Azure/AzureCon-2015/ACON319/player]
> 
> 

<!--Image references-->
[1]: ./media/search-performance-optimization/geo-redundancy.png
[2]: ./media/search-performance-optimization/scale-indexers.png
[3]: ./media/search-performance-optimization/geo-search-traffic-mgr.png

---
title: aaaModeling Multitenancy i Azure Search | Microsoft Docs
description: "Mer information om vanliga designmönster för multitenant SaaS-program när du använder Azure Search."
services: search
manager: jhubbard
author: ashmaka
documentationcenter: 
ms.assetid: 72e9696a-553b-47dc-9e05-a82db0ebf094
ms.service: search
ms.devlang: NA
ms.workload: search
ms.topic: article
ms.tgt_pltfrm: na
ms.date: 10/26/2016
ms.author: ashmaka
ms.openlocfilehash: dd46cda772d32566b9aaa18d407f12fdf178bd43
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: sv-SE
ms.lasthandoff: 10/06/2017
---
# <a name="design-patterns-for-multitenant-saas-applications-and-azure-search"></a><span data-ttu-id="47feb-103">Designmönster för multitenant SaaS-program och Azure Search</span><span class="sxs-lookup"><span data-stu-id="47feb-103">Design patterns for multitenant SaaS applications and Azure Search</span></span>
<span data-ttu-id="47feb-104">Flera program är en som innehåller hello samma funktioner och tjänster tooany antalet klienter som inte kan se eller dela hello data med andra innehavare.</span><span class="sxs-lookup"><span data-stu-id="47feb-104">A multitenant application is one that provides hello same services and capabilities tooany number of tenants who cannot see or share hello data of any other tenant.</span></span> <span data-ttu-id="47feb-105">Det här dokumentet beskrivs klient isolering strategier för flera program som skapats med Azure Search.</span><span class="sxs-lookup"><span data-stu-id="47feb-105">This document discusses tenant isolation strategies for multitenant applications built with Azure Search.</span></span>

## <a name="azure-search-concepts"></a><span data-ttu-id="47feb-106">Azure Search-begrepp</span><span class="sxs-lookup"><span data-stu-id="47feb-106">Azure Search concepts</span></span>
<span data-ttu-id="47feb-107">Som en sökning som en tjänst-lösning kan Azure Search utvecklare tooadd omfattande sökning får tooapplications utan hanterar all infrastruktur eller bli expert i sökningen.</span><span class="sxs-lookup"><span data-stu-id="47feb-107">As a search-as-a-service solution, Azure Search allows developers tooadd rich search experiences tooapplications without managing any infrastructure or becoming an expert in search.</span></span> <span data-ttu-id="47feb-108">Data överförs toohello service och lagras sedan i hello molnet.</span><span class="sxs-lookup"><span data-stu-id="47feb-108">Data is uploaded toohello service and then stored in hello cloud.</span></span> <span data-ttu-id="47feb-109">Använda enkla begäranden toohello Azure Search API kan hello data sedan ändras och söka i.</span><span class="sxs-lookup"><span data-stu-id="47feb-109">Using simple requests toohello Azure Search API, hello data can then be modified and searched.</span></span> <span data-ttu-id="47feb-110">En översikt över hello-tjänsten finns i [i den här artikeln](http://aka.ms/whatisazsearch).</span><span class="sxs-lookup"><span data-stu-id="47feb-110">An overview of hello service can be found in [this article](http://aka.ms/whatisazsearch).</span></span> <span data-ttu-id="47feb-111">Innan du diskutera designmönster, är det viktigt toounderstand några begrepp i Azure Search.</span><span class="sxs-lookup"><span data-stu-id="47feb-111">Before discussing design patterns, it is important toounderstand some concepts in Azure Search.</span></span>

### <a name="search-services-indexes-fields-and-documents"></a><span data-ttu-id="47feb-112">Search-tjänster, index, fält och dokument</span><span class="sxs-lookup"><span data-stu-id="47feb-112">Search services, indexes, fields, and documents</span></span>
<span data-ttu-id="47feb-113">När du använder Azure Search kan en prenumererar tooa *söktjänsten*.</span><span class="sxs-lookup"><span data-stu-id="47feb-113">When using Azure Search, one subscribes tooa *search service*.</span></span> <span data-ttu-id="47feb-114">Eftersom data är överförda tooAzure sökning, den är lagrad i ett *index* inom hello search-tjänsten.</span><span class="sxs-lookup"><span data-stu-id="47feb-114">As data is uploaded tooAzure Search, it is stored in an *index* within hello search service.</span></span> <span data-ttu-id="47feb-115">Det kan finnas ett antal index i en enskild tjänst.</span><span class="sxs-lookup"><span data-stu-id="47feb-115">There can be a number of indexes within a single service.</span></span> <span data-ttu-id="47feb-116">toouse hello bekant begreppet databaser, hello search-tjänsten kan vara liknas tooa databas hello index i en tjänst kan vara liknas tootables inom en databas.</span><span class="sxs-lookup"><span data-stu-id="47feb-116">toouse hello familiar concepts of databases, hello search service can be likened tooa database while hello indexes within a service can be likened tootables within a database.</span></span>

<span data-ttu-id="47feb-117">Varje index i en söktjänst har ett eget schema som definieras av ett antal anpassningsbara *fält*.</span><span class="sxs-lookup"><span data-stu-id="47feb-117">Each index within a search service has its own schema, which is defined by a number of customizable *fields*.</span></span> <span data-ttu-id="47feb-118">Data läggs tooan Azure Search index i hello form av enskilda *dokument*.</span><span class="sxs-lookup"><span data-stu-id="47feb-118">Data is added tooan Azure Search index in hello form of individual *documents*.</span></span> <span data-ttu-id="47feb-119">Varje dokument måste vara överförda tooa viss index och måste passa den indexeringsschema.</span><span class="sxs-lookup"><span data-stu-id="47feb-119">Each document must be uploaded tooa particular index and must fit that index's schema.</span></span> <span data-ttu-id="47feb-120">När du söker efter data med Azure Search utfärdas hello fulltextsökning frågor mot ett visst index.</span><span class="sxs-lookup"><span data-stu-id="47feb-120">When searching data using Azure Search, hello full-text search queries are issued against a particular index.</span></span>  <span data-ttu-id="47feb-121">toocompare dessa begrepp toothose av en databas, fält kan liknas toocolumns i en tabell och dokument kan vara liknas toorows.</span><span class="sxs-lookup"><span data-stu-id="47feb-121">toocompare these concepts toothose of a database, fields can be likened toocolumns in a table and documents can be likened toorows.</span></span>

### <a name="scalability"></a><span data-ttu-id="47feb-122">Skalbarhet</span><span class="sxs-lookup"><span data-stu-id="47feb-122">Scalability</span></span>
<span data-ttu-id="47feb-123">Alla Azure Search-tjänster i hello Standard [prisnivån](https://azure.microsoft.com/pricing/details/search/) kan skala i två dimensioner: lagring och tillgänglighet.</span><span class="sxs-lookup"><span data-stu-id="47feb-123">Any Azure Search service in hello Standard [pricing tier](https://azure.microsoft.com/pricing/details/search/) can scale in two dimensions: storage and availability.</span></span>

* <span data-ttu-id="47feb-124">*Partitioner* kan läggas till tooincrease hello lagring av en söktjänst.</span><span class="sxs-lookup"><span data-stu-id="47feb-124">*Partitions* can be added tooincrease hello storage of a search service.</span></span>
* <span data-ttu-id="47feb-125">*Repliker* kan läggas till tooa service tooincrease hello genomflödet av förfrågningar som en söktjänst kan hantera.</span><span class="sxs-lookup"><span data-stu-id="47feb-125">*Replicas* can be added tooa service tooincrease hello throughput of requests that a search service can handle.</span></span>

<span data-ttu-id="47feb-126">Lägga till och ta bort partitioner och repliker vid tillåter hello kapacitet hello search-tjänsten toogrow med hello mängden data och trafik hello programbegäran.</span><span class="sxs-lookup"><span data-stu-id="47feb-126">Adding and removing partitions and replicas at will allow hello capacity of hello search service toogrow with hello amount of data and traffic hello application demands.</span></span> <span data-ttu-id="47feb-127">I ordning för en sökning service tooachieve Läs [SLA](https://azure.microsoft.com/support/legal/sla/search/v1_0/), den kräver två repliker.</span><span class="sxs-lookup"><span data-stu-id="47feb-127">In order for a search service tooachieve a read [SLA](https://azure.microsoft.com/support/legal/sla/search/v1_0/), it requires two replicas.</span></span> <span data-ttu-id="47feb-128">I ordning för en tjänst tooachieve en skrivskyddad [SLA](https://azure.microsoft.com/support/legal/sla/search/v1_0/), kräver tre repliker.</span><span class="sxs-lookup"><span data-stu-id="47feb-128">In order for a service tooachieve a read-write [SLA](https://azure.microsoft.com/support/legal/sla/search/v1_0/), it requires three replicas.</span></span>

### <a name="service-and-index-limits-in-azure-search"></a><span data-ttu-id="47feb-129">Tjänsten och index gränser i Azure Search</span><span class="sxs-lookup"><span data-stu-id="47feb-129">Service and index limits in Azure Search</span></span>
<span data-ttu-id="47feb-130">Det finns några olika [prisnivåer](https://azure.microsoft.com/pricing/details/search/) i Azure Search hello nivåer har olika [gränser och kvoter](search-limits-quotas-capacity.md).</span><span class="sxs-lookup"><span data-stu-id="47feb-130">There are a few different [pricing tiers](https://azure.microsoft.com/pricing/details/search/) in Azure Search, each of hello tiers has different [limits and quotas](search-limits-quotas-capacity.md).</span></span> <span data-ttu-id="47feb-131">Vissa av dessa gränser finns på hello servicenivåer, vissa är på hello index-nivå och vissa är på hello partition-nivå.</span><span class="sxs-lookup"><span data-stu-id="47feb-131">Some of these limits are at hello service-level, some are at hello index-level, and some are at hello partition-level.</span></span>

|  | <span data-ttu-id="47feb-132">Basic</span><span class="sxs-lookup"><span data-stu-id="47feb-132">Basic</span></span> | <span data-ttu-id="47feb-133">Standard1</span><span class="sxs-lookup"><span data-stu-id="47feb-133">Standard1</span></span> | <span data-ttu-id="47feb-134">Standard2</span><span class="sxs-lookup"><span data-stu-id="47feb-134">Standard2</span></span> | <span data-ttu-id="47feb-135">Standard3</span><span class="sxs-lookup"><span data-stu-id="47feb-135">Standard3</span></span> | <span data-ttu-id="47feb-136">Standard3 HD</span><span class="sxs-lookup"><span data-stu-id="47feb-136">Standard3 HD</span></span> |
| --- | --- | --- | --- | --- | --- |
| <span data-ttu-id="47feb-137">Maximal repliker per tjänst</span><span class="sxs-lookup"><span data-stu-id="47feb-137">Maximum Replicas per Service</span></span> |<span data-ttu-id="47feb-138">3</span><span class="sxs-lookup"><span data-stu-id="47feb-138">3</span></span> |<span data-ttu-id="47feb-139">12</span><span class="sxs-lookup"><span data-stu-id="47feb-139">12</span></span> |<span data-ttu-id="47feb-140">12</span><span class="sxs-lookup"><span data-stu-id="47feb-140">12</span></span> |<span data-ttu-id="47feb-141">12</span><span class="sxs-lookup"><span data-stu-id="47feb-141">12</span></span> |<span data-ttu-id="47feb-142">12</span><span class="sxs-lookup"><span data-stu-id="47feb-142">12</span></span> |
| <span data-ttu-id="47feb-143">Maximal partitioner per tjänst</span><span class="sxs-lookup"><span data-stu-id="47feb-143">Maximum Partitions per Service</span></span> |<span data-ttu-id="47feb-144">1</span><span class="sxs-lookup"><span data-stu-id="47feb-144">1</span></span> |<span data-ttu-id="47feb-145">12</span><span class="sxs-lookup"><span data-stu-id="47feb-145">12</span></span> |<span data-ttu-id="47feb-146">12</span><span class="sxs-lookup"><span data-stu-id="47feb-146">12</span></span> |<span data-ttu-id="47feb-147">12</span><span class="sxs-lookup"><span data-stu-id="47feb-147">12</span></span> |<span data-ttu-id="47feb-148">1</span><span class="sxs-lookup"><span data-stu-id="47feb-148">1</span></span> |
| <span data-ttu-id="47feb-149">Maximal Search-enheter (repliker * partitioner) per tjänst</span><span class="sxs-lookup"><span data-stu-id="47feb-149">Maximum Search Units (Replicas*Partitions) per Service</span></span> |<span data-ttu-id="47feb-150">3</span><span class="sxs-lookup"><span data-stu-id="47feb-150">3</span></span> |<span data-ttu-id="47feb-151">36</span><span class="sxs-lookup"><span data-stu-id="47feb-151">36</span></span> |<span data-ttu-id="47feb-152">36</span><span class="sxs-lookup"><span data-stu-id="47feb-152">36</span></span> |<span data-ttu-id="47feb-153">36</span><span class="sxs-lookup"><span data-stu-id="47feb-153">36</span></span> |<span data-ttu-id="47feb-154">36 (max 3 partitioner)</span><span class="sxs-lookup"><span data-stu-id="47feb-154">36 (max 3 partitions)</span></span> |
| <span data-ttu-id="47feb-155">Maximal dokument per tjänst</span><span class="sxs-lookup"><span data-stu-id="47feb-155">Maximum Documents per Service</span></span> |<span data-ttu-id="47feb-156">1 miljon</span><span class="sxs-lookup"><span data-stu-id="47feb-156">1 million</span></span> |<span data-ttu-id="47feb-157">180 miljoner</span><span class="sxs-lookup"><span data-stu-id="47feb-157">180 million</span></span> |<span data-ttu-id="47feb-158">720 miljoner</span><span class="sxs-lookup"><span data-stu-id="47feb-158">720 million</span></span> |<span data-ttu-id="47feb-159">1.4 miljarder</span><span class="sxs-lookup"><span data-stu-id="47feb-159">1.4 billion</span></span> |<span data-ttu-id="47feb-160">600 miljoner</span><span class="sxs-lookup"><span data-stu-id="47feb-160">600 million</span></span> |
| <span data-ttu-id="47feb-161">Maximalt lagringsutrymme per tjänst</span><span class="sxs-lookup"><span data-stu-id="47feb-161">Maximum Storage per Service</span></span> |<span data-ttu-id="47feb-162">2 GB</span><span class="sxs-lookup"><span data-stu-id="47feb-162">2 GB</span></span> |<span data-ttu-id="47feb-163">300 GB</span><span class="sxs-lookup"><span data-stu-id="47feb-163">300 GB</span></span> |<span data-ttu-id="47feb-164">1,2 TB</span><span class="sxs-lookup"><span data-stu-id="47feb-164">1.2 TB</span></span> |<span data-ttu-id="47feb-165">2,4 TB</span><span class="sxs-lookup"><span data-stu-id="47feb-165">2.4 TB</span></span> |<span data-ttu-id="47feb-166">600 GB</span><span class="sxs-lookup"><span data-stu-id="47feb-166">600 GB</span></span> |
| <span data-ttu-id="47feb-167">Maximal dokument per Partition</span><span class="sxs-lookup"><span data-stu-id="47feb-167">Maximum Documents per Partition</span></span> |<span data-ttu-id="47feb-168">1 miljon</span><span class="sxs-lookup"><span data-stu-id="47feb-168">1 million</span></span> |<span data-ttu-id="47feb-169">15 miljoner</span><span class="sxs-lookup"><span data-stu-id="47feb-169">15 million</span></span> |<span data-ttu-id="47feb-170">60 miljoner</span><span class="sxs-lookup"><span data-stu-id="47feb-170">60 million</span></span> |<span data-ttu-id="47feb-171">120 miljoner</span><span class="sxs-lookup"><span data-stu-id="47feb-171">120 million</span></span> |<span data-ttu-id="47feb-172">200 miljoner</span><span class="sxs-lookup"><span data-stu-id="47feb-172">200 million</span></span> |
| <span data-ttu-id="47feb-173">Maximalt lagringsutrymme per Partition</span><span class="sxs-lookup"><span data-stu-id="47feb-173">Maximum Storage per Partition</span></span> |<span data-ttu-id="47feb-174">2 GB</span><span class="sxs-lookup"><span data-stu-id="47feb-174">2 GB</span></span> |<span data-ttu-id="47feb-175">25 GB</span><span class="sxs-lookup"><span data-stu-id="47feb-175">25 GB</span></span> |<span data-ttu-id="47feb-176">100 GB</span><span class="sxs-lookup"><span data-stu-id="47feb-176">100 GB</span></span> |<span data-ttu-id="47feb-177">200 GB</span><span class="sxs-lookup"><span data-stu-id="47feb-177">200 GB</span></span> |<span data-ttu-id="47feb-178">200 GB</span><span class="sxs-lookup"><span data-stu-id="47feb-178">200 GB</span></span> |
| <span data-ttu-id="47feb-179">Maximal index per tjänst</span><span class="sxs-lookup"><span data-stu-id="47feb-179">Maximum Indexes per Service</span></span> |<span data-ttu-id="47feb-180">5</span><span class="sxs-lookup"><span data-stu-id="47feb-180">5</span></span> |<span data-ttu-id="47feb-181">50</span><span class="sxs-lookup"><span data-stu-id="47feb-181">50</span></span> |<span data-ttu-id="47feb-182">200</span><span class="sxs-lookup"><span data-stu-id="47feb-182">200</span></span> |<span data-ttu-id="47feb-183">200</span><span class="sxs-lookup"><span data-stu-id="47feb-183">200</span></span> |<span data-ttu-id="47feb-184">3000 (max 1000 index/partition)</span><span class="sxs-lookup"><span data-stu-id="47feb-184">3000 (max 1000 indexes/partition)</span></span> |

#### <a name="s3-high-density"></a><span data-ttu-id="47feb-185">S3 Hög densitet '</span><span class="sxs-lookup"><span data-stu-id="47feb-185">S3 High Density'</span></span>
<span data-ttu-id="47feb-186">Det finns ett alternativ för hello hög densitet (HD) läge utformats speciellt för multitenant-scenarier i Azure Search S3 prisnivån.</span><span class="sxs-lookup"><span data-stu-id="47feb-186">In Azure Search’s S3 pricing tier, there is an option for hello High Density (HD) mode designed specifically for multitenant scenarios.</span></span> <span data-ttu-id="47feb-187">I många fall är det nödvändigt toosupport ett stort antal mindre klienter under en enda tooachieve hello fördelarna med enkelhet och kostnadsbesparingar.</span><span class="sxs-lookup"><span data-stu-id="47feb-187">In many cases, it is necessary toosupport a large number of smaller tenants under a single service tooachieve hello benefits of simplicity and cost efficiency.</span></span>

<span data-ttu-id="47feb-188">S3 HD tillåter hello många små index toobe packade hello hanteras av en enda söktjänsten av handel hello möjlighet tooscale ut index med partitioner för hello möjlighet toohost fler index i en enskild tjänst.</span><span class="sxs-lookup"><span data-stu-id="47feb-188">S3 HD allows for hello many small indexes toobe packed under hello management of a single search service by trading hello ability tooscale out indexes using partitions for hello ability toohost more indexes in a single service.</span></span>

<span data-ttu-id="47feb-189">S3-tjänsten kan concretely, ha mellan 1 och 200 index som tillsammans kan vara värd för too1.4 miljarder dokument.</span><span class="sxs-lookup"><span data-stu-id="47feb-189">Concretely, an S3 service could have between 1 and 200 indexes that together could host up too1.4 billion documents.</span></span> <span data-ttu-id="47feb-190">En S3 HD hello gör andra hand att enskilda index tooonly gå too1 miljoner dokument, men den kan hantera upp too1000 index per partition (upp too3000 per service) och det totala dokumentantal 200 miljoner per partition (in too600 miljoner per tjänst).</span><span class="sxs-lookup"><span data-stu-id="47feb-190">An S3 HD on hello other hand would allow individual indexes tooonly go up too1 million documents, but it can handle up too1000 indexes per partition (up too3000 per service) with a total document count of 200 million per partition (up too600 million per service).</span></span>

## <a name="considerations-for-multitenant-applications"></a><span data-ttu-id="47feb-191">Överväganden för flera program</span><span class="sxs-lookup"><span data-stu-id="47feb-191">Considerations for multitenant applications</span></span>
<span data-ttu-id="47feb-192">Flera program måste effektivt distribuera resurser mellan hello klienter samtidigt som någon form av sekretess mellan hello olika klienter.</span><span class="sxs-lookup"><span data-stu-id="47feb-192">Multitenant applications must effectively distribute resources among hello tenants while preserving some level of privacy between hello various tenants.</span></span> <span data-ttu-id="47feb-193">Det finns några överväganden vid utformning av hello arkitektur för ett sådant program:</span><span class="sxs-lookup"><span data-stu-id="47feb-193">There are a few considerations when designing hello architecture for such an application:</span></span>

* <span data-ttu-id="47feb-194">*Klientisolering:* programutvecklare behöver tootake lämpliga åtgärder tooensure att inga klienter har Ej behörig eller oönskad åtkomst toohello data för andra klienter.</span><span class="sxs-lookup"><span data-stu-id="47feb-194">*Tenant isolation:* Application developers need tootake appropriate measures tooensure that no tenants have unauthorized or unwanted access toohello data of other tenants.</span></span> <span data-ttu-id="47feb-195">Utöver hello perspektiv datasekretess kräver klient isolering strategier effektiv hantering av delade resurser och skydd mot störningar grannar.</span><span class="sxs-lookup"><span data-stu-id="47feb-195">Beyond hello perspective of data privacy, tenant isolation strategies require effective management of shared resources and protection from noisy neighbors.</span></span>
* <span data-ttu-id="47feb-196">*Molnet resurskostnader:* med alla andra program måste programlösningar förblir kostnaden konkurrenskraftiga som en del av ett flera program.</span><span class="sxs-lookup"><span data-stu-id="47feb-196">*Cloud resource cost:* As with any other application, software solutions must remain cost competitive as a component of a multitenant application.</span></span>
* <span data-ttu-id="47feb-197">*Enkel Operations:* när du utvecklar en arkitektur med flera hello inverkan på hello programmet operations och komplexitet är viktigt.</span><span class="sxs-lookup"><span data-stu-id="47feb-197">*Ease of Operations:* When developing a multitenant architecture, hello impact on hello application's operations and complexity is an important consideration.</span></span> <span data-ttu-id="47feb-198">Azure Search har en [SLA för 99,9%](https://azure.microsoft.com/support/legal/sla/search/v1_0/).</span><span class="sxs-lookup"><span data-stu-id="47feb-198">Azure Search has a [99.9% SLA](https://azure.microsoft.com/support/legal/sla/search/v1_0/).</span></span>
* <span data-ttu-id="47feb-199">*Globala storleken:* flera program kan behöva tooeffectively fungera klienter som distribueras över hello jordglob.</span><span class="sxs-lookup"><span data-stu-id="47feb-199">*Global footprint:* Multitenant applications may need tooeffectively serve tenants which are distributed across hello globe.</span></span>
* <span data-ttu-id="47feb-200">*Skalbarhet:* programutvecklare behöver tooconsider hur de stämmer mellan upprätthålla en tillräckligt låg nivå av programmet komplexitet och utformning av hello programmet tooscale med många klienter och hello storleken på klienternas data och arbetsbelastning.</span><span class="sxs-lookup"><span data-stu-id="47feb-200">*Scalability:* Application developers need tooconsider how they reconcile between maintaining a sufficiently low level of application complexity and designing hello application tooscale with number of tenants and hello size of tenants' data and workload.</span></span>

<span data-ttu-id="47feb-201">Azure Search erbjuder några gränser som kan vara används tooisolate klienternas data och arbetsbelastning.</span><span class="sxs-lookup"><span data-stu-id="47feb-201">Azure Search offers a few boundaries that can be used tooisolate tenants’ data and workload.</span></span>

## <a name="modeling-multitenancy-with-azure-search"></a><span data-ttu-id="47feb-202">Modeling multitenancy med Azure Search</span><span class="sxs-lookup"><span data-stu-id="47feb-202">Modeling multitenancy with Azure Search</span></span>
<span data-ttu-id="47feb-203">I hello fallet på ett scenario med flera hello programutvecklaren förbrukar en eller flera search-tjänster och dela sina klienter bland tjänster, index eller båda.</span><span class="sxs-lookup"><span data-stu-id="47feb-203">In hello case of a multitenant scenario, hello application developer consumes one or more search services and divide their tenants among services, indexes, or both.</span></span> <span data-ttu-id="47feb-204">Azure Search har några vanliga mönster när modeling ett scenario med flera:</span><span class="sxs-lookup"><span data-stu-id="47feb-204">Azure Search has a few common patterns when modeling a multitenant scenario:</span></span>

1. <span data-ttu-id="47feb-205">*Index per klient:* varje innehavare har sin egen index i en söktjänst som delas med andra klienter.</span><span class="sxs-lookup"><span data-stu-id="47feb-205">*Index per tenant:* Each tenant has its own index within a search service that is shared with other tenants.</span></span>
2. <span data-ttu-id="47feb-206">*Tjänsten per klient:* varje innehavare har en egen dedikerade Azure Search-tjänst ger högsta nivå uppdelning av data och arbetsbelastning.</span><span class="sxs-lookup"><span data-stu-id="47feb-206">*Service per tenant:* Each tenant has its own dedicated Azure Search service, offering highest level of data and workload separation.</span></span>
3. <span data-ttu-id="47feb-207">*Blandning av båda:* större och mer aktiva klienter tilldelas dedikerade tjänster medan mindre klienter tilldelas enskilda index i delade tjänster.</span><span class="sxs-lookup"><span data-stu-id="47feb-207">*Mix of both:* Larger, more-active tenants are assigned dedicated services while smaller tenants are assigned individual indexes within shared services.</span></span>

## <a name="1-index-per-tenant"></a><span data-ttu-id="47feb-208">1. Index per klient</span><span class="sxs-lookup"><span data-stu-id="47feb-208">1. Index per tenant</span></span>
![En bild av hello index per klient modell](./media/search-modeling-multitenant-saas-applications/azure-search-index-per-tenant.png)

<span data-ttu-id="47feb-210">I ett index per klient modellen anges flera innehavare på en enda Azure Search-tjänst där varje innehavare har sina egna index.</span><span class="sxs-lookup"><span data-stu-id="47feb-210">In an index-per-tenant model, multiple tenants occupy a single Azure Search service where each tenant has their own index.</span></span>

<span data-ttu-id="47feb-211">Klienter uppnå isolering av data eftersom alla söka begäranden och dokumentet operations utfärdas på indexnivå i Azure Search.</span><span class="sxs-lookup"><span data-stu-id="47feb-211">Tenants achieve data isolation because all search requests and document operations are issued at an index level in Azure Search.</span></span> <span data-ttu-id="47feb-212">I hello programnivå finns hello måste medvetenhet toodirect hello olika klienter trafik toohello rätt index och hanterar resurser på hello servicenivå över alla klienter.</span><span class="sxs-lookup"><span data-stu-id="47feb-212">In hello application layer, there is hello need awareness toodirect hello various tenants’ traffic toohello proper indexes while also managing resources at hello service level across all tenants.</span></span>

<span data-ttu-id="47feb-213">Nyckelattribut hello index per klient modellen är hello möjligheten för hello programmet developer toooversubscribe hello kapacitet på en söktjänst bland hello programmets klienter.</span><span class="sxs-lookup"><span data-stu-id="47feb-213">A key attribute of hello index-per-tenant model is hello ability for hello application developer toooversubscribe hello capacity of a search service among hello application’s tenants.</span></span> <span data-ttu-id="47feb-214">Om hello klienter har en ojämn fördelning av arbetsbelastning, hello optimal kombination av klienter kan fördelas på indexerar en söktjänst tooaccommodate ett antal mycket aktiv, resurskrävande klienter samtidigt samtidigt som man betjänar en lång slutet av mindre aktiva klienter.</span><span class="sxs-lookup"><span data-stu-id="47feb-214">If hello tenants have an uneven distribution of workload, hello optimal combination of tenants can be distributed across a search service’s indexes tooaccommodate a number of highly active, resource-intensive tenants while simultaneously serving a long tail of less active tenants.</span></span> <span data-ttu-id="47feb-215">hello kompromiss är hello oförmåga hello modellen toohandle situationer där varje innehavare samtidigt är mycket aktiv.</span><span class="sxs-lookup"><span data-stu-id="47feb-215">hello trade-off is hello inability of hello model toohandle situations where each tenant is concurrently highly active.</span></span>

<span data-ttu-id="47feb-216">hello index per klient modellen ger hello grund för en modell med rörlig kostnad, där en hela Azure Search-tjänsten köps direkta och därefter fylls med klienter.</span><span class="sxs-lookup"><span data-stu-id="47feb-216">hello index-per-tenant model provides hello basis for a variable cost model, where an entire Azure Search service is bought up-front and then subsequently filled with tenants.</span></span> <span data-ttu-id="47feb-217">Detta ger outnyttjad kapacitet toobe avsedda för försök och kostnadsfria konton.</span><span class="sxs-lookup"><span data-stu-id="47feb-217">This allows for unused capacity toobe designated for trials and free accounts.</span></span>

<span data-ttu-id="47feb-218">För program med en global storleken kanske inte hello index per klient modellen hello mest effektiva.</span><span class="sxs-lookup"><span data-stu-id="47feb-218">For applications with a global footprint, hello index-per-tenant model may not be hello most efficient.</span></span> <span data-ttu-id="47feb-219">Om klienter för ett program distribueras över hela världen hello, kan det vara nödvändigt för varje region som duplicera kostnader över dem en separat tjänst.</span><span class="sxs-lookup"><span data-stu-id="47feb-219">If an application's tenants are distributed across hello globe, a separate service may be necessary for each region which may duplicate costs across each of them.</span></span>

<span data-ttu-id="47feb-220">Azure Search kan hello skalan för både hello enskilda index och hello Totalt antal index toogrow.</span><span class="sxs-lookup"><span data-stu-id="47feb-220">Azure Search allows for hello scale of both hello individual indexes and hello total number of indexes toogrow.</span></span> <span data-ttu-id="47feb-221">Om en lämplig priser valt nivån partitioner och repliker kan läggas till toohello hela söktjänsten när ett enskilt index i hello tjänsten blir för stor vad gäller lagring eller trafik.</span><span class="sxs-lookup"><span data-stu-id="47feb-221">If an appropriate pricing tier is chosen, partitions and replicas can be added toohello entire search service when an individual index within hello service grows too large in terms of storage or traffic.</span></span>

<span data-ttu-id="47feb-222">Om hello Totalt antal index blir för stor för en enskild tjänst har en annan tjänst toobe etableras tooaccommodate hello nya klienter.</span><span class="sxs-lookup"><span data-stu-id="47feb-222">If hello total number of indexes grows too large for a single service, another service has toobe provisioned tooaccommodate hello new tenants.</span></span> <span data-ttu-id="47feb-223">Om index har toobe flyttas mellan search-tjänster som nya tjänster läggs, hello data från hello indexet har toobe som manuellt kopieras från ett index toohello andra som Azure Search inte tillåter ett index toobe flyttas.</span><span class="sxs-lookup"><span data-stu-id="47feb-223">If indexes have toobe moved between search services as new services are added, hello data from hello index has toobe manually copied from one index toohello other as Azure Search does not allow for an index toobe moved.</span></span>

## <a name="2-service-per-tenant"></a><span data-ttu-id="47feb-224">2. Tjänsten per klient</span><span class="sxs-lookup"><span data-stu-id="47feb-224">2. Service per tenant</span></span>
![En bild av hello service per klient modell](./media/search-modeling-multitenant-saas-applications/azure-search-service-per-tenant.png)

<span data-ttu-id="47feb-226">Varje innehavare har sin egen söktjänsten i en arkitektur med tjänsten per klient.</span><span class="sxs-lookup"><span data-stu-id="47feb-226">In a service-per-tenant architecture, each tenant has its own search service.</span></span>

<span data-ttu-id="47feb-227">I den här modellen uppnår hello programmet hello maximala nivån för isolering för sina klienter.</span><span class="sxs-lookup"><span data-stu-id="47feb-227">In this model, hello application achieves hello maximum level of isolation for its tenants.</span></span> <span data-ttu-id="47feb-228">Varje tjänst har särskilda lagrings- och genomströmning för hantering av sökbegäran samt separata API-nycklar.</span><span class="sxs-lookup"><span data-stu-id="47feb-228">Each service has dedicated storage and throughput for handling search request as well as separate API keys.</span></span>

<span data-ttu-id="47feb-229">För program där varje innehavare har ett stort utrymme eller hello arbetsbelastningen har lite variationen från innehavaren tootenant är hello service per klient modell ett effektivt val som resurser inte delas mellan olika klienternas arbetsbelastningar.</span><span class="sxs-lookup"><span data-stu-id="47feb-229">For applications where each tenant has a large footprint or hello workload has little variability from tenant tootenant, hello service-per-tenant model is an effective choice as resources are not shared across various tenants’ workloads.</span></span>

<span data-ttu-id="47feb-230">En tjänst per klient modell erbjuder också hello fördelen med en förutsägbar, fast kostnad-modell.</span><span class="sxs-lookup"><span data-stu-id="47feb-230">A service per tenant model also offers hello benefit of a predictable, fixed cost model.</span></span> <span data-ttu-id="47feb-231">Det finns inga direkta investeringar i ett hela söktjänsten tills det finns en klient toofill, men hello kostnad per klient är högre än en modell för index per klient.</span><span class="sxs-lookup"><span data-stu-id="47feb-231">There is no up-front investment in an entire search service until there is a tenant toofill it, however hello cost-per-tenant is higher than an index-per-tenant model.</span></span>

<span data-ttu-id="47feb-232">hello-tjänsten per klient modellen är ett effektivt val för program med en global storleken.</span><span class="sxs-lookup"><span data-stu-id="47feb-232">hello service-per-tenant model is an efficient choice for applications with a global footprint.</span></span> <span data-ttu-id="47feb-233">Med geografiskt spridd klienter, är det enkelt toohave tjänst för varje klient i hello aktuell region.</span><span class="sxs-lookup"><span data-stu-id="47feb-233">With geographically-distributed tenants, it is easy toohave each tenant's service in hello appropriate region.</span></span>

<span data-ttu-id="47feb-234">hello utmaningar skalningen av det här mönstret uppstå när enskilda klienter växa ifrån deras tjänst.</span><span class="sxs-lookup"><span data-stu-id="47feb-234">hello challenges in scaling this pattern arise when individual tenants outgrow their service.</span></span> <span data-ttu-id="47feb-235">Azure Search stöder för närvarande inte uppgradera hello prisnivån search-tjänsten så att alla data skulle ha toobe som manuellt kopieras tooa ny tjänst.</span><span class="sxs-lookup"><span data-stu-id="47feb-235">Azure Search does not currently support upgrading hello pricing tier of a search service, so all data would have toobe manually copied tooa new service.</span></span>

## <a name="3-mixing-both-models"></a><span data-ttu-id="47feb-236">3. Blandning av båda modellerna</span><span class="sxs-lookup"><span data-stu-id="47feb-236">3. Mixing both models</span></span>
<span data-ttu-id="47feb-237">En annan mönster för modellering multitenancy blanda strategier för både index per klient och tjänstens per klient.</span><span class="sxs-lookup"><span data-stu-id="47feb-237">Another pattern for modeling multitenancy is mixing both index-per-tenant and service-per-tenant strategies.</span></span>

<span data-ttu-id="47feb-238">Blandas hello två mönster, upptar största klienter för ett program dedikerade tjänster medan hello länge arkivdel för mindre aktiva, mindre klienter får ha index i en delad tjänst.</span><span class="sxs-lookup"><span data-stu-id="47feb-238">By mixing hello two patterns, an application's largest tenants can occupy dedicated services while hello long tail of less active, smaller tenants can occupy indexes in a shared service.</span></span> <span data-ttu-id="47feb-239">Den här modellen säkerställer att hello största hyresgäster konsekvent höga prestanda från hello-tjänsten medan tooprotect hello mindre klienter från alla störningar grannar.</span><span class="sxs-lookup"><span data-stu-id="47feb-239">This model ensures that hello largest tenants have consistently high performance from hello service while helping tooprotect hello smaller tenants from any noisy neighbors.</span></span>

<span data-ttu-id="47feb-240">Implementera den här strategin bygger dock förutseende förutsäga vilken klienter kräver en särskild service jämfört med ett index i en delad tjänst.</span><span class="sxs-lookup"><span data-stu-id="47feb-240">However, implementing this strategy relies foresight in predicting which tenants will require a dedicated service versus an index in a shared service.</span></span> <span data-ttu-id="47feb-241">Programmet komplexitet ökar med hello måste toomanage båda dessa multitenancy modeller.</span><span class="sxs-lookup"><span data-stu-id="47feb-241">Application complexity increases with hello need toomanage both of these multitenancy models.</span></span>

## <a name="achieving-even-finer-granularity"></a><span data-ttu-id="47feb-242">Uppnå även ökad detaljnivå</span><span class="sxs-lookup"><span data-stu-id="47feb-242">Achieving even finer granularity</span></span>
<span data-ttu-id="47feb-243">Hej ovanför design mönster toomodel flera scenarier i Azure Search förutsätter en enhetlig scopet där varje innehavare en hel instans av ett program.</span><span class="sxs-lookup"><span data-stu-id="47feb-243">hello above design patterns toomodel multitenant scenarios in Azure Search assume a uniform scope where each tenant is a whole instance of an application.</span></span> <span data-ttu-id="47feb-244">Program kan ibland hantera många mindre scope.</span><span class="sxs-lookup"><span data-stu-id="47feb-244">However, applications can sometimes handle many smaller scopes.</span></span>

<span data-ttu-id="47feb-245">Om tjänsten per klient och index per klient modeller inte är tillräckligt små för scope är möjliga toomodel ett index tooachieve även finmaskig granularitet.</span><span class="sxs-lookup"><span data-stu-id="47feb-245">If service-per-tenant and index-per-tenant models are not sufficiently small scopes, it is possible toomodel an index tooachieve an even finer degree of granularity.</span></span>

<span data-ttu-id="47feb-246">toohave ett index beter sig på olika sätt för olika klientslutpunkter, ett fält kan vara tillagda tooan index som anger ett visst värde för varje klient som möjligt.</span><span class="sxs-lookup"><span data-stu-id="47feb-246">toohave a single index behave differently for different client endpoints, a field can be added tooan index which designates a certain value for each possible client.</span></span> <span data-ttu-id="47feb-247">Varje gång en klient anropar Azure Search tooquery eller ändra ett index, hello kod från hello klientprogrammet anger hello lämpligt värde för fältet med Azure Search [filter](https://msdn.microsoft.com/library/azure/dn798921.aspx) kapaciteten när databasfrågan.</span><span class="sxs-lookup"><span data-stu-id="47feb-247">Each time a client calls Azure Search tooquery or modify an index, hello code from hello client application specifies hello appropriate value for that field using Azure Search's [filter](https://msdn.microsoft.com/library/azure/dn798921.aspx) capability at query time.</span></span>

<span data-ttu-id="47feb-248">Den här metoden kan vara används tooachieve funktionerna i separata användarkonton, separat behörighetsnivåer och även helt separata program.</span><span class="sxs-lookup"><span data-stu-id="47feb-248">This method can be used tooachieve functionality of separate user accounts, separate permission levels, and even completely separate applications.</span></span>

> [!NOTE]
> <span data-ttu-id="47feb-249">Med hello metoden ovan tooconfigure en enda index tooserve flera innehavare påverkar hello relevans sökresultat.</span><span class="sxs-lookup"><span data-stu-id="47feb-249">Using hello approach described above tooconfigure a single index tooserve multiple tenants affects hello relevance of search results.</span></span> <span data-ttu-id="47feb-250">Sök relevans poäng beräknas på ett index på objektnivå scope, inte ett klient-nivå scope, så alla klienter data ingår i hello relevans poäng underliggande statistik, till exempel termen frekvens.</span><span class="sxs-lookup"><span data-stu-id="47feb-250">Search relevance scores are computed at an index-level scope, not a tenant-level scope, so all tenants' data is incorporated in hello relevance scores' underlying statistics such as term frequency.</span></span>
> 
> 

## <a name="next-steps"></a><span data-ttu-id="47feb-251">Nästa steg</span><span class="sxs-lookup"><span data-stu-id="47feb-251">Next steps</span></span>
<span data-ttu-id="47feb-252">Azure Search är en tvingande val för många program [Läs mer om hello service robusta funktionerna](http://aka.ms/whatisazsearch).</span><span class="sxs-lookup"><span data-stu-id="47feb-252">Azure Search is a compelling choice for many applications, [read more about hello service's robust capabilities](http://aka.ms/whatisazsearch).</span></span> <span data-ttu-id="47feb-253">När utvärderar hello olika designmönster för flera program bör du överväga att hello [olika prisnivåer](https://azure.microsoft.com/pricing/details/search/) och hello respektive [gränser](search-limits-quotas-capacity.md) toobest skräddarsy Azure Search toofit programbelastningar och arkitekturer i alla storlekar.</span><span class="sxs-lookup"><span data-stu-id="47feb-253">When evaluating hello various design patterns for multitenant applications, consider hello [various pricing tiers](https://azure.microsoft.com/pricing/details/search/) and hello respective [service limits](search-limits-quotas-capacity.md) toobest tailor Azure Search toofit application workloads and architectures of all sizes.</span></span>

<span data-ttu-id="47feb-254">Frågor om Azure Search och flera scenarier kan dirigeras tooazuresearch_contact@microsoft.com.</span><span class="sxs-lookup"><span data-stu-id="47feb-254">Any questions about Azure Search and multitenant scenarios can be directed tooazuresearch_contact@microsoft.com.</span></span>


---
title: "aaaAzure belastningsutjämnaren översikt | Microsoft Docs"
description: "Översikt över Azure belastningsutjämnare funktioner, arkitektur och implementering. Lär dig hur hello belastningsutjämnaren fungerar och utnyttja i hello molnet."
services: load-balancer
documentationcenter: na
author: kumudd
manager: timlt
editor: 
ms.assetid: 0f313dc0-f007-4cee-b2b9-f542357925a3
ms.service: load-balancer
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 10/24/2016
ms.author: kumud
ms.openlocfilehash: 2376a02f7cbbbed6a90f216419c0c3d30f594272
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: sv-SE
ms.lasthandoff: 10/06/2017
---
# <a name="azure-load-balancer-overview"></a><span data-ttu-id="a676d-104">Översikt över belastningsutjämnaren i Azure</span><span class="sxs-lookup"><span data-stu-id="a676d-104">Azure Load Balancer overview</span></span>

<span data-ttu-id="a676d-105">Azure belastningsutjämnare ger hög tillgänglighet och nätverksprestanda tooyour program.</span><span class="sxs-lookup"><span data-stu-id="a676d-105">Azure Load Balancer delivers high availability and network performance tooyour applications.</span></span> <span data-ttu-id="a676d-106">Det är en belastningsutjämnare för lager 4 (TCP, UDP) som distribuerar inkommande trafik mellan felfri instanser av tjänster som definierats i en belastningsutjämnad uppsättning.</span><span class="sxs-lookup"><span data-stu-id="a676d-106">It is a Layer 4 (TCP, UDP) load balancer that distributes incoming traffic among healthy instances of services defined in a load-balanced set.</span></span>

<span data-ttu-id="a676d-107">Azure belastningsutjämnare kan konfigureras för att:</span><span class="sxs-lookup"><span data-stu-id="a676d-107">Azure Load Balancer can be configured to:</span></span>

* <span data-ttu-id="a676d-108">Läsa belastningsutjämna inkommande Internet-trafik toovirtual datorer.</span><span class="sxs-lookup"><span data-stu-id="a676d-108">Load balance incoming Internet traffic toovirtual machines.</span></span> <span data-ttu-id="a676d-109">Den här konfigurationen kallas [mot Internet för belastningsutjämning](load-balancer-internet-overview.md).</span><span class="sxs-lookup"><span data-stu-id="a676d-109">This configuration is known as [Internet-facing load balancing](load-balancer-internet-overview.md).</span></span>
* <span data-ttu-id="a676d-110">Läs in Utjämna trafiken mellan virtuella datorer i ett virtuellt nätverk, mellan virtuella datorer i molntjänster eller mellan lokala datorer och virtuella datorer i ett virtuellt nätverk mellan platser.</span><span class="sxs-lookup"><span data-stu-id="a676d-110">Load balance traffic between virtual machines in a virtual network, between virtual machines in cloud services, or between on-premises computers and virtual machines in a cross-premises virtual network.</span></span> <span data-ttu-id="a676d-111">Den här konfigurationen kallas [intern belastningsutjämning](load-balancer-internal-overview.md).</span><span class="sxs-lookup"><span data-stu-id="a676d-111">This configuration is known as [internal load balancing](load-balancer-internal-overview.md).</span></span>
* <span data-ttu-id="a676d-112">Vidarebefordra externa trafiken tooa specifik virtuell dator.</span><span class="sxs-lookup"><span data-stu-id="a676d-112">Forward external traffic tooa specific virtual machine.</span></span>

<span data-ttu-id="a676d-113">Alla resurser i molnet hello måste en offentlig IP-adress toobe kan nås från hello Internet.</span><span class="sxs-lookup"><span data-stu-id="a676d-113">All resources in hello cloud need a public IP address toobe reachable from hello Internet.</span></span> <span data-ttu-id="a676d-114">hello moln-infrastruktur i Azure använder icke-dirigerbara IP-adresser för dess resurser.</span><span class="sxs-lookup"><span data-stu-id="a676d-114">hello cloud infrastructure in Azure uses non-routable IP addresses for its resources.</span></span> <span data-ttu-id="a676d-115">Azure använder network address translation (NAT) med offentliga IP-adresser toocommunicate toohello Internet.</span><span class="sxs-lookup"><span data-stu-id="a676d-115">Azure uses network address translation (NAT) with public IP addresses toocommunicate toohello Internet.</span></span>

## <a name="azure-deployment-models"></a><span data-ttu-id="a676d-116">Azure distributionsmodeller</span><span class="sxs-lookup"><span data-stu-id="a676d-116">Azure deployment models</span></span>

<span data-ttu-id="a676d-117">Det är viktigt toounderstand hello skillnaderna mellan hello Azure klassiska och Resource Manager [distributionsmodeller](../azure-resource-manager/resource-manager-deployment-model.md).</span><span class="sxs-lookup"><span data-stu-id="a676d-117">It's important toounderstand hello differences between hello Azure classic and Resource Manager [deployment models](../azure-resource-manager/resource-manager-deployment-model.md).</span></span> <span data-ttu-id="a676d-118">Azure belastningsutjämnare konfigureras på olika sätt i varje modell.</span><span class="sxs-lookup"><span data-stu-id="a676d-118">Azure Load Balancer is configured differently in each model.</span></span>

### <a name="azure-classic-deployment-model"></a><span data-ttu-id="a676d-119">Azure klassiska distributionsmodellen</span><span class="sxs-lookup"><span data-stu-id="a676d-119">Azure classic deployment model</span></span>

<span data-ttu-id="a676d-120">Virtuella datorer distribueras i ett moln-tjänsten kan vara grupperad toouse belastningsutjämning.</span><span class="sxs-lookup"><span data-stu-id="a676d-120">Virtual machines deployed within a cloud service boundary can be grouped toouse a load balancer.</span></span> <span data-ttu-id="a676d-121">I den här modellen är en offentlig IP-adress och ett fullständigt domännamn, (FQDN) som har tilldelats tooa Molntjänsten.</span><span class="sxs-lookup"><span data-stu-id="a676d-121">In this model a public IP address and a Fully Qualified Domain Name, (FQDN) are assigned tooa cloud service.</span></span> <span data-ttu-id="a676d-122">hello belastningsutjämnaren port översättning och hello-nätverkstrafik om belastningsutjämning med hjälp av hello offentliga IP-adressen för hello-Molntjänsten.</span><span class="sxs-lookup"><span data-stu-id="a676d-122">hello load balancer does port translation and load balances hello network traffic by using hello public IP address for hello cloud service.</span></span>

<span data-ttu-id="a676d-123">Belastningsutjämnad trafik definieras av slutpunkter.</span><span class="sxs-lookup"><span data-stu-id="a676d-123">Load-balanced traffic is defined by endpoints.</span></span> <span data-ttu-id="a676d-124">Port översättning slutpunkter ha en 1: 1-relation mellan hello tilldelade offentlig port hello offentlig IP-adress och hello lokal port tilldelade toohello-tjänsten på en specifik virtuell dator.</span><span class="sxs-lookup"><span data-stu-id="a676d-124">Port translation endpoints have a one-to-one relationship between hello public-assigned port of hello public IP address and hello local port assigned toohello service on a specific virtual machine.</span></span> <span data-ttu-id="a676d-125">Läsa in belastningsutjämning slutpunkter ha en en-till-många-relation mellan hello offentlig IP-adress och hello lokala portar som tilldelats toohello tjänster på hello virtuella datorer i hello-Molntjänsten.</span><span class="sxs-lookup"><span data-stu-id="a676d-125">Load balancing endpoints have a one-to-many relationship between hello public IP address and hello local ports assigned toohello services on hello virtual machines in hello cloud service.</span></span>

![Azure belastningsutjämnare i hello klassiska distributionsmodellen](./media/load-balancer-overview/asm-lb.png)

<span data-ttu-id="a676d-127">Bild 1 – Azure belastningsutjämnare i hello klassiska distributionsmodellen</span><span class="sxs-lookup"><span data-stu-id="a676d-127">Figure 1 - Azure Load Balancer in hello classic deployment model</span></span>

<span data-ttu-id="a676d-128">hello domänetikett hello offentliga IP-adress som hello belastningen belastningsutjämnare använder för denna distributionsmodell är \<molntjänstnamnet\>. cloudapp.net.</span><span class="sxs-lookup"><span data-stu-id="a676d-128">hello domain label for hello public IP address that hello load balancer uses for this deployment model is \<cloud service name\>.cloudapp.net.</span></span> <span data-ttu-id="a676d-129">hello följande bild visar hello Azure belastningsutjämnare i den här modellen.</span><span class="sxs-lookup"><span data-stu-id="a676d-129">hello following graphic shows hello Azure Load Balancer in this model.</span></span>

### <a name="azure-resource-manager-deployment-model"></a><span data-ttu-id="a676d-130">Azure Resource Manager-distributionsmodellen</span><span class="sxs-lookup"><span data-stu-id="a676d-130">Azure Resource Manager deployment model</span></span>

<span data-ttu-id="a676d-131">I hello Resource Manager-modellen har ingen måste toocreate en tjänst i molnet.</span><span class="sxs-lookup"><span data-stu-id="a676d-131">In hello Resource Manager deployment model there is no need toocreate a Cloud service.</span></span> <span data-ttu-id="a676d-132">hello belastningsutjämnaren skapas tooexplicitly vidarebefordra trafik mellan flera virtuella datorer.</span><span class="sxs-lookup"><span data-stu-id="a676d-132">hello load balancer is created tooexplicitly route traffic among multiple virtual machines.</span></span>

<span data-ttu-id="a676d-133">En offentlig IP-adress är en enskild resurs som har en domänetikett (DNS-namn) för.</span><span class="sxs-lookup"><span data-stu-id="a676d-133">A public IP address is an individual resource that has a domain label (DNS name).</span></span> <span data-ttu-id="a676d-134">hello offentliga IP-adressen är kopplad till hello belastningsutjämningsresurs.</span><span class="sxs-lookup"><span data-stu-id="a676d-134">hello public IP address is associated with hello load balancer resource.</span></span> <span data-ttu-id="a676d-135">Regler för inläsning av belastningsutjämning och inkommande NAT-regler använder hello offentlig IP-adress som hello Internet-slutpunkt för hello resurser som tar emot belastningsutjämnad trafik.</span><span class="sxs-lookup"><span data-stu-id="a676d-135">Load balancer rules and inbound NAT rules use hello public IP address as hello Internet endpoint for hello resources that are receiving load-balanced network traffic.</span></span>

<span data-ttu-id="a676d-136">En privat eller offentlig IP-adress har tilldelats toohello nätverk gränssnittet resurs kopplade tooa virtuella datorn.</span><span class="sxs-lookup"><span data-stu-id="a676d-136">A private or public IP address is assigned toohello network interface resource attached tooa virtual machine.</span></span> <span data-ttu-id="a676d-137">När ett nätverksgränssnitt har lagts till tooa belastningsutjämnaren backend-IP-adresspool, är hello belastningsutjämnare kan toosend belastningsutjämnad nätverkstrafik baserat på hello belastningsutjämnade regler som har skapats.</span><span class="sxs-lookup"><span data-stu-id="a676d-137">Once a network interface is added tooa load balancer's back-end IP address pool, hello load balancer is able toosend load-balanced network traffic based on hello load-balanced rules that are created.</span></span>

<span data-ttu-id="a676d-138">hello visar följande bild hello Azure belastningsutjämnare i den här modellen:</span><span class="sxs-lookup"><span data-stu-id="a676d-138">hello following graphic shows hello Azure Load Balancer in this model:</span></span>

![Azure belastningsutjämnare i Resource Manager](./media/load-balancer-overview/arm-lb.png)

<span data-ttu-id="a676d-140">Bild 2 – Azure belastningsutjämnare i Resource Manager</span><span class="sxs-lookup"><span data-stu-id="a676d-140">Figure 2 - Azure Load Balancer in Resource Manager</span></span>

<span data-ttu-id="a676d-141">hello belastningsutjämnare kan hanteras via Resource Manager-baserade mallar, API: er och verktyg.</span><span class="sxs-lookup"><span data-stu-id="a676d-141">hello load balancer can be managed through Resource Manager-based templates, APIs, and tools.</span></span> <span data-ttu-id="a676d-142">toolearn mer om hanteraren för filserverresurser, se hello [översikt över Resource Manager](../azure-resource-manager/resource-group-overview.md).</span><span class="sxs-lookup"><span data-stu-id="a676d-142">toolearn more about Resource Manager, see hello [Resource Manager overview](../azure-resource-manager/resource-group-overview.md).</span></span>

## <a name="load-balancer-features"></a><span data-ttu-id="a676d-143">Läsa in belastningsutjämning funktioner</span><span class="sxs-lookup"><span data-stu-id="a676d-143">Load Balancer features</span></span>

* <span data-ttu-id="a676d-144">Hash-baserad distribution</span><span class="sxs-lookup"><span data-stu-id="a676d-144">Hash-based distribution</span></span>

    <span data-ttu-id="a676d-145">Azure belastningsutjämnare använder en algoritm för hash-baserad distribution.</span><span class="sxs-lookup"><span data-stu-id="a676d-145">Azure Load Balancer uses a hash-based distribution algorithm.</span></span> <span data-ttu-id="a676d-146">Som standard använder en 5-tuppel-hash som består av käll-IP, källport, mål-IP, målport och protokollet typen toomap trafik tooavailable servrar.</span><span class="sxs-lookup"><span data-stu-id="a676d-146">By default, it uses a 5-tuple hash composed of source IP, source port, destination IP, destination port, and protocol type toomap traffic tooavailable servers.</span></span> <span data-ttu-id="a676d-147">Det ger endast varaktighet *inom* en transportsession.</span><span class="sxs-lookup"><span data-stu-id="a676d-147">It provides stickiness only *within* a transport session.</span></span> <span data-ttu-id="a676d-148">Paket i hello samma TCP eller UDP-sessionen kommer att vara riktad toohello samma instans bakom hello belastningsutjämnade slutpunkt.</span><span class="sxs-lookup"><span data-stu-id="a676d-148">Packets in hello same TCP or UDP session will be directed toohello same instance behind hello load-balanced endpoint.</span></span> <span data-ttu-id="a676d-149">När hello klient stänger och öppnar en ny anslutning hello eller startar en ny session från hello samma käll-IP, hello port ändringar av datakällan.</span><span class="sxs-lookup"><span data-stu-id="a676d-149">When hello client closes and reopens hello connection or starts a new session from hello same source IP, hello source port changes.</span></span> <span data-ttu-id="a676d-150">Detta kan orsaka hello trafik toogo tooa annan slutpunkt i olika datacenter.</span><span class="sxs-lookup"><span data-stu-id="a676d-150">This may cause hello traffic toogo tooa different endpoint in a different datacenter.</span></span>

    <span data-ttu-id="a676d-151">Mer information finns i [belastningsdistributionsläget nätverksbelastningsutjämning](load-balancer-distribution-mode.md).</span><span class="sxs-lookup"><span data-stu-id="a676d-151">For more details, see [Load balancer distribution mode](load-balancer-distribution-mode.md).</span></span> <span data-ttu-id="a676d-152">hello visar följande bild hello hash-baserad distribution:</span><span class="sxs-lookup"><span data-stu-id="a676d-152">hello following graphic shows hello hash-based distribution:</span></span>

    ![Hash-baserad distribution](./media/load-balancer-overview/load-balancer-distribution.png)

    <span data-ttu-id="a676d-154">Bild 3 - hash-baserad distribution</span><span class="sxs-lookup"><span data-stu-id="a676d-154">Figure 3 - Hash based distribution</span></span>

* <span data-ttu-id="a676d-155">Vidarebefordrade portar</span><span class="sxs-lookup"><span data-stu-id="a676d-155">Port forwarding</span></span>

    <span data-ttu-id="a676d-156">Azure belastningsutjämnare ger dig kontroll över hur inkommande kommunikation hanteras.</span><span class="sxs-lookup"><span data-stu-id="a676d-156">Azure Load Balancer gives you control over how inbound communication is managed.</span></span> <span data-ttu-id="a676d-157">Detta meddelande innehåller trafik som initieras från Internet-värdar, virtuella datorer i andra molntjänster eller virtuella nätverk.</span><span class="sxs-lookup"><span data-stu-id="a676d-157">This communication includes traffic initiated from Internet hosts, virtual machines in other cloud services, or virtual networks.</span></span> <span data-ttu-id="a676d-158">Den här kontrollen representeras av en slutpunkt (kallas även en slutpunkt för indata).</span><span class="sxs-lookup"><span data-stu-id="a676d-158">This control is represented by an endpoint (also called an input endpoint).</span></span>

    <span data-ttu-id="a676d-159">En slutpunkt för indata lyssnar på en offentlig port och vidarebefordrar trafik tooan Intern port.</span><span class="sxs-lookup"><span data-stu-id="a676d-159">An input endpoint listens on a public port and forwards traffic tooan internal port.</span></span> <span data-ttu-id="a676d-160">Du kan mappa hello samma portar för en intern eller extern slutpunkt eller Använd en annan port för dem.</span><span class="sxs-lookup"><span data-stu-id="a676d-160">You can map hello same ports for an internal or external endpoint or use a different port for them.</span></span> <span data-ttu-id="a676d-161">Du kan till exempel ha en web server konfigurerad toolisten tooport 81 medan hello offentlig slutpunkt mappningen är port 80.</span><span class="sxs-lookup"><span data-stu-id="a676d-161">For example, you can have a web server configured toolisten tooport 81 while hello public endpoint mapping is port 80.</span></span> <span data-ttu-id="a676d-162">hello skapandet av en offentlig slutpunkt utlöser hello skapandet av en load belastningsutjämnaren instans.</span><span class="sxs-lookup"><span data-stu-id="a676d-162">hello creation of a public endpoint triggers hello creation of a load balancer instance.</span></span>

    <span data-ttu-id="a676d-163">När skapas med hello Azure-portalen, skapas hello portal automatiskt slutpunkter toohello virtuell dator för hello Remote Desktop Protocol (RDP) och remote trafiken i Windows PowerShell-sessionen.</span><span class="sxs-lookup"><span data-stu-id="a676d-163">When created using hello Azure portal, hello portal automatically creates endpoints toohello virtual machine for hello Remote Desktop Protocol (RDP) and remote Windows PowerShell session traffic.</span></span> <span data-ttu-id="a676d-164">Du kan använda dessa slutpunkter tooremotely administrera hello virtuella datorn över hello Internet.</span><span class="sxs-lookup"><span data-stu-id="a676d-164">You can use these endpoints tooremotely administer hello virtual machine over hello Internet.</span></span>

* <span data-ttu-id="a676d-165">Automatisk omkonfiguration</span><span class="sxs-lookup"><span data-stu-id="a676d-165">Automatic reconfiguration</span></span>

    <span data-ttu-id="a676d-166">Azure belastningsutjämnare konfigurerar omedelbart om sig själv när du skalar delar upp eller ned.</span><span class="sxs-lookup"><span data-stu-id="a676d-166">Azure Load Balancer instantly reconfigures itself when you scale instances up or down.</span></span> <span data-ttu-id="a676d-167">Omkonfigureringen inträffar exempelvis när du ökar hello instanser för web/worker-roller i en molntjänst eller när du lägger till ytterligare virtuella datorer i hello ange samma Utjämning av nätverksbelastning.</span><span class="sxs-lookup"><span data-stu-id="a676d-167">For example, this reconfiguration happens when you increase hello instance count for web/worker roles in a cloud service or when you add additional virtual machines into hello same load-balanced set.</span></span>

* <span data-ttu-id="a676d-168">Tjänstövervakning</span><span class="sxs-lookup"><span data-stu-id="a676d-168">Service monitoring</span></span>

    <span data-ttu-id="a676d-169">Azure belastningsutjämnare kan avsöka hello hälsotillstånd hello olika server-instanser.</span><span class="sxs-lookup"><span data-stu-id="a676d-169">Azure Load Balancer can probe hello health of hello various server instances.</span></span> <span data-ttu-id="a676d-170">När en avsökning misslyckas toorespond stoppar hello belastningsutjämnaren skickar nya anslutningar toohello ohälsosamt instanser.</span><span class="sxs-lookup"><span data-stu-id="a676d-170">When a probe fails toorespond, hello load balancer stops sending new connections toohello unhealthy instances.</span></span> <span data-ttu-id="a676d-171">Befintliga anslutningar påverkas inte.</span><span class="sxs-lookup"><span data-stu-id="a676d-171">Existing connections are not impacted.</span></span>

    <span data-ttu-id="a676d-172">Tre typer av avsökningar stöds:</span><span class="sxs-lookup"><span data-stu-id="a676d-172">Three types of probes are supported:</span></span>

    + <span data-ttu-id="a676d-173">**Gästen agent avsökningen (på plattform som en tjänst endast virtuella datorer):** hello belastningsutjämnare använder hello gästagenten inuti hello virtuella datorn.</span><span class="sxs-lookup"><span data-stu-id="a676d-173">**Guest agent probe (on Platform as a Service Virtual Machines only):** hello load balancer utilizes hello guest agent inside hello virtual machine.</span></span> <span data-ttu-id="a676d-174">Hej gästagenten lyssnar och svarar med ett HTTP-200 OK svar endast när hello-instansen är i tillståndet för hello ready (d.v.s. hello-instansen är inte i ett tillstånd som upptagen återvinning eller stoppar).</span><span class="sxs-lookup"><span data-stu-id="a676d-174">hello guest agent listens and responds with an HTTP 200 OK response only when hello instance is in hello ready state (i.e. hello instance is not in a state like busy, recycling, or stopping).</span></span> <span data-ttu-id="a676d-175">Om hello agenten misslyckas toorespond med en HTTP-200 OK hello hello belastningen belastningsutjämnaren märken instans som inte svarar och stoppar skickar trafik toothat instans.</span><span class="sxs-lookup"><span data-stu-id="a676d-175">If hello agent fails toorespond with an HTTP 200 OK, hello load balancer marks hello instance as unresponsive and stops sending traffic toothat instance.</span></span> <span data-ttu-id="a676d-176">hello belastningsutjämnaren fortsätter tooping hello-instans.</span><span class="sxs-lookup"><span data-stu-id="a676d-176">hello load balancer continues tooping hello instance.</span></span> <span data-ttu-id="a676d-177">Om hello gästagenten svarar med en HTTP-200, skickar hello belastningsutjämnaren trafik toothat instans igen.</span><span class="sxs-lookup"><span data-stu-id="a676d-177">If hello guest agent responds with an HTTP 200, hello load balancer will send traffic toothat instance again.</span></span> <span data-ttu-id="a676d-178">När du använder en webbroll körs webbplats koden i w3wp.exe som inte övervakas av hello Azure-strukturen eller gästagenten.</span><span class="sxs-lookup"><span data-stu-id="a676d-178">When you're using a web role, your website code typically runs in w3wp.exe, which is not monitored by hello Azure fabric or guest agent.</span></span> <span data-ttu-id="a676d-179">Detta innebär att fel i w3wp.exe (t.ex. HTTP 500-svar) inte är rapporterat toohello gästagenten och hello belastningsutjämnaren inte vet tootake instansen utanför rotation.</span><span class="sxs-lookup"><span data-stu-id="a676d-179">This means that failures in w3wp.exe (e.g. HTTP 500 responses) will not be reported toohello guest agent, and hello load balancer will not know tootake that instance out of rotation.</span></span>
    + <span data-ttu-id="a676d-180">**Anpassade HTTP-avsökningen:** den här avsökningen åsidosätter hello standard (gästagenten) avsökning.</span><span class="sxs-lookup"><span data-stu-id="a676d-180">**HTTP custom probe:** This probe overrides hello default (guest agent) probe.</span></span> <span data-ttu-id="a676d-181">Du kan använda den toocreate egna anpassade logik toodetermine hello hälsotillstånd hello rollinstans.</span><span class="sxs-lookup"><span data-stu-id="a676d-181">You can use it toocreate your own custom logic toodetermine hello health of hello role instance.</span></span> <span data-ttu-id="a676d-182">hello belastningsutjämnaren ska regelbundet söka slutpunkten (var 15 sekunder, som standard).</span><span class="sxs-lookup"><span data-stu-id="a676d-182">hello load balancer will regularly probe your endpoint (every 15 seconds, by default).</span></span> <span data-ttu-id="a676d-183">hello instans anses toobe i rotation om den svarar med en ACK TCP eller HTTP 200 inom tidsgränsen för hello (standard 31 sekunder).</span><span class="sxs-lookup"><span data-stu-id="a676d-183">hello instance is considered toobe in rotation if it responds with a TCP ACK or HTTP 200 within hello timeout period (default of 31 seconds).</span></span> <span data-ttu-id="a676d-184">Detta är användbart för att implementera din egen logik tooremove instanser från hello belastningsutjämnaren rotation.</span><span class="sxs-lookup"><span data-stu-id="a676d-184">This is useful for implementing your own logic tooremove instances from hello load balancer's rotation.</span></span> <span data-ttu-id="a676d-185">Du kan till exempel konfigurera hello instans tooreturn status-200 om hello-instans är över 90% CPU.</span><span class="sxs-lookup"><span data-stu-id="a676d-185">For example, you can configure hello instance tooreturn a non-200 status if hello instance is above 90% CPU.</span></span> <span data-ttu-id="a676d-186">Web-roller som använder w3wp.exe du också få automatisk övervakning av din webbplats, eftersom fel i koden webbplats returnera en icke-200 status toohello avsökning.</span><span class="sxs-lookup"><span data-stu-id="a676d-186">For web roles that use w3wp.exe, you also get automatic monitoring of your website, since failures in your website code return a non-200 status toohello probe.</span></span>
    + <span data-ttu-id="a676d-187">**Anpassade TCP-avsökning:** den här avsökningen förlitar sig på lyckad TCP session etablering tooa definierats avsökningsport.</span><span class="sxs-lookup"><span data-stu-id="a676d-187">**TCP custom probe:** This probe relies on successful TCP session establishment tooa defined probe port.</span></span>

    <span data-ttu-id="a676d-188">Mer information finns i hello [LoadBalancerProbe schemat](https://msdn.microsoft.com/library/azure/jj151530.aspx).</span><span class="sxs-lookup"><span data-stu-id="a676d-188">For more information, see hello [LoadBalancerProbe schema](https://msdn.microsoft.com/library/azure/jj151530.aspx).</span></span>

* <span data-ttu-id="a676d-189">Källan NAT</span><span class="sxs-lookup"><span data-stu-id="a676d-189">Source NAT</span></span>

    <span data-ttu-id="a676d-190">All utgående trafik toohello Internet som kommer från din tjänst genomgår datakällan NAT (SNAT) med hjälp av hello samma VIP-adressen som hello inkommande trafik.</span><span class="sxs-lookup"><span data-stu-id="a676d-190">All outbound traffic toohello Internet that originates from your service undergoes source NAT (SNAT) by using hello same VIP address as hello incoming traffic.</span></span> <span data-ttu-id="a676d-191">SNAT ger viktiga fördelar:</span><span class="sxs-lookup"><span data-stu-id="a676d-191">SNAT provides important benefits:</span></span>

    + <span data-ttu-id="a676d-192">Enkel uppgradering och katastrofåterställning återställning för tjänster, kan eftersom hello VIP kan vara dynamiskt mappad tooanother hello service-instans.</span><span class="sxs-lookup"><span data-stu-id="a676d-192">It enables easy upgrade and disaster recovery of services, since hello VIP can be dynamically mapped tooanother instance of hello service.</span></span>
    + <span data-ttu-id="a676d-193">Det underlättar åtkomstkontrollistan (ACL) för åtkomstkontrollhantering.</span><span class="sxs-lookup"><span data-stu-id="a676d-193">It makes access control list (ACL) management easier.</span></span> <span data-ttu-id="a676d-194">ACL: er som uttrycks i VIP ändras inte services skala upp, ner eller hämta omdistribueras.</span><span class="sxs-lookup"><span data-stu-id="a676d-194">ACLs expressed in terms of VIPs do not change as services scale up, down, or get redeployed.</span></span>

    <span data-ttu-id="a676d-195">Hej belastningsutjämningskonfigurationen stöder fullständig kon NAT för UDP.</span><span class="sxs-lookup"><span data-stu-id="a676d-195">hello load balancer configuration supports full cone NAT for UDP.</span></span> <span data-ttu-id="a676d-196">Fullständig kon NAT är en typ av NAT-enhet där hello port tillåter inkommande anslutningar från en extern värd (i svaret tooan utgående begäran).</span><span class="sxs-lookup"><span data-stu-id="a676d-196">Full cone NAT is a type of NAT where hello port allows inbound connections from any external host (in response tooan outbound request).</span></span>

    <span data-ttu-id="a676d-197">För varje ny utgående anslutning som initierar en virtuell dator, har också en utgående port allokerats av hello belastningsutjämnaren.</span><span class="sxs-lookup"><span data-stu-id="a676d-197">For each new outbound connection that a virtual machine initiates, an outbound port is also allocated by hello load balancer.</span></span> <span data-ttu-id="a676d-198">hello extern värd ser trafik med en virtuell IP-VIP-allokerad port.</span><span class="sxs-lookup"><span data-stu-id="a676d-198">hello external host sees traffic with a virtual IP (VIP)-allocated port.</span></span> <span data-ttu-id="a676d-199">Scenarier som kräver ett stort antal utgående anslutningar, rekommenderas för toouse [offentlig IP på instansnivå](../virtual-network/virtual-networks-instance-level-public-ip.md) adresser så att hello virtuella datorer har en dedikerad utgående IP-adress för SNAT.</span><span class="sxs-lookup"><span data-stu-id="a676d-199">For scenarios that require a large number of outbound connections, it is recommended toouse [instance-level public IP](../virtual-network/virtual-networks-instance-level-public-ip.md) addresses so that hello VMs have a dedicated outbound IP address for SNAT.</span></span> <span data-ttu-id="a676d-200">Detta minskar risken för hello om porten konsumtion.</span><span class="sxs-lookup"><span data-stu-id="a676d-200">This reduces hello risk of port exhaustion.</span></span>

    <span data-ttu-id="a676d-201">Se [utgående anslutningar](load-balancer-outbound-connections.md) mer information om det här avsnittet.</span><span class="sxs-lookup"><span data-stu-id="a676d-201">Please see [outbound connections](load-balancer-outbound-connections.md) article for more details on this topic.</span></span>

### <a name="support-for-multiple-load-balanced-ip-addresses-for-virtual-machines"></a><span data-ttu-id="a676d-202">Stöd för flera belastningsutjämnad IP-adresser för virtuella datorer</span><span class="sxs-lookup"><span data-stu-id="a676d-202">Support for multiple load-balanced IP addresses for virtual machines</span></span>
<span data-ttu-id="a676d-203">Du kan tilldela fler än en belastningsutjämnad offentliga IP-adress tooa uppsättning virtuella datorer.</span><span class="sxs-lookup"><span data-stu-id="a676d-203">You can assign more than one load-balanced public IP address tooa set of virtual machines.</span></span> <span data-ttu-id="a676d-204">Med den här möjligheten du kan vara värd för flera SSL-webbplatser och/eller flera SQL Server AlwaysOn Availability Group-lyssnare på hello samma uppsättning virtuella datorer.</span><span class="sxs-lookup"><span data-stu-id="a676d-204">With this ability, you can host multiple SSL websites and/or multiple SQL Server AlwaysOn Availability Group listeners on hello same set of virtual machines.</span></span> <span data-ttu-id="a676d-205">Mer information finns i [flera VIP: er per Molntjänsten](load-balancer-multivip.md).</span><span class="sxs-lookup"><span data-stu-id="a676d-205">For more information, see [Multiple VIPs per cloud service](load-balancer-multivip.md).</span></span>

[!INCLUDE [load-balancer-compare-tm-ag-lb-include.md](../../includes/load-balancer-compare-tm-ag-lb-include.md)]

## <a name="limitations"></a><span data-ttu-id="a676d-206">Begränsningar</span><span class="sxs-lookup"><span data-stu-id="a676d-206">Limitations</span></span>

<span data-ttu-id="a676d-207">Läs in Belastningsutjämnarens serverdelspooler kan innehålla alla VM SKU förutom grundläggande nivån.</span><span class="sxs-lookup"><span data-stu-id="a676d-207">Load Balancer backend pools can contain any VM SKU except Basic tier.</span></span>

## <a name="next-steps"></a><span data-ttu-id="a676d-208">Nästa steg</span><span class="sxs-lookup"><span data-stu-id="a676d-208">Next steps</span></span>

- <span data-ttu-id="a676d-209">Lär dig mer om [Internetriktade belastningsutjämnare](load-balancer-internet-overview.md)</span><span class="sxs-lookup"><span data-stu-id="a676d-209">Learn more about [Internet-facing load balancer](load-balancer-internet-overview.md)</span></span>

- <span data-ttu-id="a676d-210">Lär dig mer om [översikt över interna belastningsutjämnare](load-balancer-internal-overview.md)</span><span class="sxs-lookup"><span data-stu-id="a676d-210">Learn more about [Internal load balancer overview](load-balancer-internal-overview.md)</span></span>

- <span data-ttu-id="a676d-211">Skapa en [Internetriktade belastningsutjämnare](load-balancer-get-started-internet-portal.md)</span><span class="sxs-lookup"><span data-stu-id="a676d-211">Create an [Internet-facing load balancer](load-balancer-get-started-internet-portal.md)</span></span>

- <span data-ttu-id="a676d-212">Lär dig mer om hello andra nyckeln [nätverk](../networking/networking-overview.md) Azure</span><span class="sxs-lookup"><span data-stu-id="a676d-212">Learn about some of hello other key [networking capabilities](../networking/networking-overview.md) of Azure</span></span>


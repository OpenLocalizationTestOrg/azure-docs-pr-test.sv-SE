---
title: "aaaNetworking överväganden med en Azure Apptjänst-miljö"
description: "Beskriver hello ASE nätverkstrafik och hur tooset NSG: er och udr: er med din ASE"
services: app-service
documentationcenter: na
author: ccompy
manager: stefsch
ms.assetid: 955a4d84-94ca-418d-aa79-b57a5eb8cb85
ms.service: app-service
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 05/08/2017
ms.author: ccompy
ms.openlocfilehash: d4d3000f4d4d75814b1e6d47079d967334eb1a3b
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: sv-SE
ms.lasthandoff: 10/06/2017
---
# <a name="networking-considerations-for-an-app-service-environment"></a><span data-ttu-id="5e71d-103">Överväganden för nätverk för Apptjänst-miljö</span><span class="sxs-lookup"><span data-stu-id="5e71d-103">Networking considerations for an App Service environment</span></span> #

## <a name="overview"></a><span data-ttu-id="5e71d-104">Översikt</span><span class="sxs-lookup"><span data-stu-id="5e71d-104">Overview</span></span> ##

 <span data-ttu-id="5e71d-105">Azure [Apptjänstmiljö] [ Intro] är en distribution av Azure App Service till ett undernät i ditt Azure-nätverk (VNet).</span><span class="sxs-lookup"><span data-stu-id="5e71d-105">Azure [App Service Environment][Intro] is a deployment of Azure App Service into a subnet in your Azure virtual network (VNet).</span></span> <span data-ttu-id="5e71d-106">Det finns två distributionstyper för en Apptjänst-miljö (ASE):</span><span class="sxs-lookup"><span data-stu-id="5e71d-106">There are two deployment types for an App Service environment (ASE):</span></span>

- <span data-ttu-id="5e71d-107">**Externa ASE**: Visar hello ASE värd apparna på en internet-tillgänglig IP-adress.</span><span class="sxs-lookup"><span data-stu-id="5e71d-107">**External ASE**: Exposes hello ASE-hosted apps on an internet-accessible IP address.</span></span> <span data-ttu-id="5e71d-108">Mer information finns i [skapa en extern ASE][MakeExternalASE].</span><span class="sxs-lookup"><span data-stu-id="5e71d-108">For more information, see [Create an External ASE][MakeExternalASE].</span></span>
- <span data-ttu-id="5e71d-109">**ILB ASE**: Visar hello ASE värd apparna på en IP-adress i ditt VNet.</span><span class="sxs-lookup"><span data-stu-id="5e71d-109">**ILB ASE**: Exposes hello ASE-hosted apps on an IP address inside your VNet.</span></span> <span data-ttu-id="5e71d-110">hello interna slutpunkten är en intern belastningsutjämnare (ILB), vilket är anledningen till den kallas en ILB ASE.</span><span class="sxs-lookup"><span data-stu-id="5e71d-110">hello internal endpoint is an internal load balancer (ILB), which is why it's called an ILB ASE.</span></span> <span data-ttu-id="5e71d-111">Mer information finns i [skapa och använda en ILB ASE][MakeILBASE].</span><span class="sxs-lookup"><span data-stu-id="5e71d-111">For more information, see [Create and use an ILB ASE][MakeILBASE].</span></span>

<span data-ttu-id="5e71d-112">Det finns nu två versioner av Apptjänstmiljö: ASEv1 och ASEv2.</span><span class="sxs-lookup"><span data-stu-id="5e71d-112">There are now two versions of App Service Environment: ASEv1 and ASEv2.</span></span> <span data-ttu-id="5e71d-113">Information om ASEv1 finns [introduktion tooApp miljö v1][ASEv1Intro].</span><span class="sxs-lookup"><span data-stu-id="5e71d-113">For information on ASEv1, see [Introduction tooApp Service Environment v1][ASEv1Intro].</span></span> <span data-ttu-id="5e71d-114">ASEv1 kan distribueras i ett klassiskt eller Resource Manager VNet.</span><span class="sxs-lookup"><span data-stu-id="5e71d-114">ASEv1 can be deployed in a classic or Resource Manager VNet.</span></span> <span data-ttu-id="5e71d-115">ASEv2 kan endast distribueras till en Resource Manager-VNet.</span><span class="sxs-lookup"><span data-stu-id="5e71d-115">ASEv2 can only be deployed into a Resource Manager VNet.</span></span>

<span data-ttu-id="5e71d-116">Alla anrop från en ASE som går toohello internet lämna hello VNet via en VIP för hello ASE.</span><span class="sxs-lookup"><span data-stu-id="5e71d-116">All calls from an ASE that go toohello internet leave hello VNet through a VIP assigned for hello ASE.</span></span> <span data-ttu-id="5e71d-117">hello offentliga IP-Adressen för den här VIP är sedan hello käll-IP för alla anrop från hello ASE som går toohello internet.</span><span class="sxs-lookup"><span data-stu-id="5e71d-117">hello public IP of this VIP is then hello source IP for all calls from hello ASE that go toohello internet.</span></span> <span data-ttu-id="5e71d-118">Om hello appar i din ASE anrop tooresources i ditt virtuella nätverk eller i en VPN-anslutning, är en av hello IP-adresser i hello undernät som används av din ASE hello käll-IP.</span><span class="sxs-lookup"><span data-stu-id="5e71d-118">If hello apps in your ASE make calls tooresources in your VNet or across a VPN, hello source IP is one of hello IPs in hello subnet used by your ASE.</span></span> <span data-ttu-id="5e71d-119">Eftersom hello ASE är inom hello VNet, kan den också komma åt resurser inom hello virtuella nätverk utan någon ytterligare konfiguration.</span><span class="sxs-lookup"><span data-stu-id="5e71d-119">Because hello ASE is within hello VNet, it can also access resources within hello VNet without any additional configuration.</span></span> <span data-ttu-id="5e71d-120">Om hello virtuella nätverk är anslutna tooyour lokalt nätverk, har appar i din ASE också åtkomst tooresources det.</span><span class="sxs-lookup"><span data-stu-id="5e71d-120">If hello VNet is connected tooyour on-premises network, apps in your ASE also have access tooresources there.</span></span> <span data-ttu-id="5e71d-121">Du behöver inte tooconfigure hello ASE eller en app några ytterligare.</span><span class="sxs-lookup"><span data-stu-id="5e71d-121">You don't need tooconfigure hello ASE or your app any further.</span></span>

![Externa ASE][1] 

<span data-ttu-id="5e71d-123">Om du har en extern ASE är också hello offentliga VIP hello endpoint att apparna ASE matcha toofor:</span><span class="sxs-lookup"><span data-stu-id="5e71d-123">If you have an External ASE, hello public VIP is also hello endpoint that your ASE apps resolve toofor:</span></span>

* <span data-ttu-id="5e71d-124">HTTP/S.</span><span class="sxs-lookup"><span data-stu-id="5e71d-124">HTTP/S.</span></span> 
* <span data-ttu-id="5e71d-125">FTP/S.</span><span class="sxs-lookup"><span data-stu-id="5e71d-125">FTP/S.</span></span> 
* <span data-ttu-id="5e71d-126">Web-distribution.</span><span class="sxs-lookup"><span data-stu-id="5e71d-126">Web deployment.</span></span>
* <span data-ttu-id="5e71d-127">Fjärrfelsökning.</span><span class="sxs-lookup"><span data-stu-id="5e71d-127">Remote debugging.</span></span>

![ILB ASE][2]

<span data-ttu-id="5e71d-129">Om du har en ILB ASE är hello IP-adressen för hello ILB hello slutpunkt för HTTP/S, FTP-/ S, web distribution och fjärrfelsökning.</span><span class="sxs-lookup"><span data-stu-id="5e71d-129">If you have an ILB ASE, hello IP address of hello ILB is hello endpoint for HTTP/S, FTP/S, web deployment, and remote debugging.</span></span>

<span data-ttu-id="5e71d-130">hello normal app åtkomstportar är:</span><span class="sxs-lookup"><span data-stu-id="5e71d-130">hello normal app access ports are:</span></span>

| <span data-ttu-id="5e71d-131">Användning</span><span class="sxs-lookup"><span data-stu-id="5e71d-131">Use</span></span> | <span data-ttu-id="5e71d-132">Från</span><span class="sxs-lookup"><span data-stu-id="5e71d-132">From</span></span> | <span data-ttu-id="5e71d-133">för</span><span class="sxs-lookup"><span data-stu-id="5e71d-133">too</span></span>|
|----------|---------|-------------|
|  <span data-ttu-id="5e71d-134">HTTP/HTTPS</span><span class="sxs-lookup"><span data-stu-id="5e71d-134">HTTP/HTTPS</span></span>  | <span data-ttu-id="5e71d-135">Kan konfigureras av användaren</span><span class="sxs-lookup"><span data-stu-id="5e71d-135">User configurable</span></span> |  <span data-ttu-id="5e71d-136">80, 443</span><span class="sxs-lookup"><span data-stu-id="5e71d-136">80, 443</span></span> |
|  <span data-ttu-id="5e71d-137">FTP/FTPS</span><span class="sxs-lookup"><span data-stu-id="5e71d-137">FTP/FTPS</span></span>    | <span data-ttu-id="5e71d-138">Kan konfigureras av användaren</span><span class="sxs-lookup"><span data-stu-id="5e71d-138">User configurable</span></span> |  <span data-ttu-id="5e71d-139">21, 990, 10001-10020</span><span class="sxs-lookup"><span data-stu-id="5e71d-139">21, 990, 10001-10020</span></span> |
|  <span data-ttu-id="5e71d-140">Visual Studio fjärrfelsökning</span><span class="sxs-lookup"><span data-stu-id="5e71d-140">Visual Studio remote debugging</span></span>  |  <span data-ttu-id="5e71d-141">Kan konfigureras av användaren</span><span class="sxs-lookup"><span data-stu-id="5e71d-141">User configurable</span></span> |  <span data-ttu-id="5e71d-142">4016, 4018, 4020, 4022</span><span class="sxs-lookup"><span data-stu-id="5e71d-142">4016, 4018, 4020, 4022</span></span> |

<span data-ttu-id="5e71d-143">Detta är SANT om du är på en extern ASE eller på en ILB ASE.</span><span class="sxs-lookup"><span data-stu-id="5e71d-143">This is true if you're on an External ASE or on an ILB ASE.</span></span> <span data-ttu-id="5e71d-144">Om du är på en extern ASE nådde dessa portar på hello offentliga VIP.</span><span class="sxs-lookup"><span data-stu-id="5e71d-144">If you're on an External ASE, you hit those ports on hello public VIP.</span></span> <span data-ttu-id="5e71d-145">Om du är på en ILB ASE nådde dessa portar på hello ILB.</span><span class="sxs-lookup"><span data-stu-id="5e71d-145">If you're on an ILB ASE, you hit those ports on hello ILB.</span></span> <span data-ttu-id="5e71d-146">Om du kan låsa port 443, kan det finnas en effekt på vissa funktioner som exponeras i hello-portalen.</span><span class="sxs-lookup"><span data-stu-id="5e71d-146">If you lock down port 443, there can be an effect on some features exposed in hello portal.</span></span> <span data-ttu-id="5e71d-147">Mer information finns i [Portal beroenden](#portaldep).</span><span class="sxs-lookup"><span data-stu-id="5e71d-147">For more information, see [Portal dependencies](#portaldep).</span></span>

## <a name="ase-dependencies"></a><span data-ttu-id="5e71d-148">ASE beroenden</span><span class="sxs-lookup"><span data-stu-id="5e71d-148">ASE dependencies</span></span> ##

<span data-ttu-id="5e71d-149">En ASE inkommande åtkomst beroende är:</span><span class="sxs-lookup"><span data-stu-id="5e71d-149">An ASE inbound access dependency is:</span></span>

| <span data-ttu-id="5e71d-150">Användning</span><span class="sxs-lookup"><span data-stu-id="5e71d-150">Use</span></span> | <span data-ttu-id="5e71d-151">Från</span><span class="sxs-lookup"><span data-stu-id="5e71d-151">From</span></span> | <span data-ttu-id="5e71d-152">för</span><span class="sxs-lookup"><span data-stu-id="5e71d-152">too</span></span>|
|-----|------|----|
| <span data-ttu-id="5e71d-153">Hantering</span><span class="sxs-lookup"><span data-stu-id="5e71d-153">Management</span></span> | <span data-ttu-id="5e71d-154">App Service management-adresser</span><span class="sxs-lookup"><span data-stu-id="5e71d-154">App Service management addresses</span></span> | <span data-ttu-id="5e71d-155">ASE undernät: 454, 455</span><span class="sxs-lookup"><span data-stu-id="5e71d-155">ASE subnet: 454, 455</span></span> |
|  <span data-ttu-id="5e71d-156">ASE intern kommunikation</span><span class="sxs-lookup"><span data-stu-id="5e71d-156">ASE internal communication</span></span> | <span data-ttu-id="5e71d-157">ASE undernät: alla portar</span><span class="sxs-lookup"><span data-stu-id="5e71d-157">ASE subnet: All ports</span></span> | <span data-ttu-id="5e71d-158">ASE undernät: alla portar</span><span class="sxs-lookup"><span data-stu-id="5e71d-158">ASE subnet: All ports</span></span>
|  <span data-ttu-id="5e71d-159">Tillåt Azure belastningsutjämnare inkommande</span><span class="sxs-lookup"><span data-stu-id="5e71d-159">Allow Azure load balancer inbound</span></span> | <span data-ttu-id="5e71d-160">Azure belastningsutjämnare</span><span class="sxs-lookup"><span data-stu-id="5e71d-160">Azure load balancer</span></span> | <span data-ttu-id="5e71d-161">ASE undernät: alla portar</span><span class="sxs-lookup"><span data-stu-id="5e71d-161">ASE subnet: All ports</span></span>
|  <span data-ttu-id="5e71d-162">Appen tilldelade IP-adresser</span><span class="sxs-lookup"><span data-stu-id="5e71d-162">App assigned IP addresses</span></span> | <span data-ttu-id="5e71d-163">App som har tilldelats adresser</span><span class="sxs-lookup"><span data-stu-id="5e71d-163">App assigned addresses</span></span> | <span data-ttu-id="5e71d-164">ASE undernät: alla portar</span><span class="sxs-lookup"><span data-stu-id="5e71d-164">ASE subnet: All ports</span></span>

<span data-ttu-id="5e71d-165">hello innehåller inkommande trafik kommandot och kontroll av hello ASE i tillägget toosystem övervakning.</span><span class="sxs-lookup"><span data-stu-id="5e71d-165">hello inbound traffic provides command and control of hello ASE in addition toosystem monitoring.</span></span> <span data-ttu-id="5e71d-166">hello källa IP-adresser för den här trafiken visas i hello [ASE Management adresser] [ ASEManagement] dokumentet.</span><span class="sxs-lookup"><span data-stu-id="5e71d-166">hello source IPs for this traffic are listed in hello [ASE Management addresses][ASEManagement] document.</span></span> <span data-ttu-id="5e71d-167">hello nätverkssäkerhetskonfigurationen måste tooallow åtkomst från alla IP-adresser på port 454 och 455.</span><span class="sxs-lookup"><span data-stu-id="5e71d-167">hello network security configuration needs tooallow access from all IPs on ports 454 and 455.</span></span>

<span data-ttu-id="5e71d-168">Inom hello ASE undernät som det finns många portar för intern kommunikation och de kan ändra.</span><span class="sxs-lookup"><span data-stu-id="5e71d-168">Within hello ASE subnet there are many ports used for internal component communication and they can change.</span></span>  <span data-ttu-id="5e71d-169">Detta kräver att alla hello portar i hello ASE undernät toobe tillgänglig från hello ASE undernät.</span><span class="sxs-lookup"><span data-stu-id="5e71d-169">This requires all of hello ports in hello ASE subnet toobe accessible from hello ASE subnet.</span></span> 

<span data-ttu-id="5e71d-170">För hello kommunikation mellan hello Azure belastningsutjämnare och hello ASE undernät hello portar som minst är att öppna måste toobe 454 och 455 16001.</span><span class="sxs-lookup"><span data-stu-id="5e71d-170">For hello communication between hello Azure load balancer and hello ASE subnet hello minimum ports that need toobe open are 454, 455 and 16001.</span></span> <span data-ttu-id="5e71d-171">Hej 16001 port används för keep alive trafik mellan hello belastningsutjämnare och hello ASE.</span><span class="sxs-lookup"><span data-stu-id="5e71d-171">hello 16001 port is used for keep alive traffic between hello load balancer and hello ASE.</span></span> <span data-ttu-id="5e71d-172">Om du använder en ILB ASE kan du låsa trafik ned toojust hello 454, 455, 16001 portar.</span><span class="sxs-lookup"><span data-stu-id="5e71d-172">If you are using an ILB ASE then you can lock traffic down toojust hello 454, 455, 16001 ports.</span></span>  <span data-ttu-id="5e71d-173">Om du använder en extern ASE måste tootake till kontot hello normal app åtkomstportar.</span><span class="sxs-lookup"><span data-stu-id="5e71d-173">If you are using an External ASE then you need tootake into account hello normal app access ports.</span></span>  <span data-ttu-id="5e71d-174">Om du använder app som har tilldelats adresser tooopen måste den tooall portar.</span><span class="sxs-lookup"><span data-stu-id="5e71d-174">If you are using app assigned addresses you need tooopen it tooall ports.</span></span>  <span data-ttu-id="5e71d-175">När en adress tilldelas tooa viss app måste använda portar som inte är kända i förväg toosend HTTP och HTTPS-trafik toohello ASE hello belastningsutjämnaren.</span><span class="sxs-lookup"><span data-stu-id="5e71d-175">When an address is assigned tooa specific app, then hello load balancer will use ports that are not known of in advance toosend HTTP and HTTPS traffic toohello ASE.</span></span>

<span data-ttu-id="5e71d-176">Om du använder app som har tilldelats IP-adresser måste tooallow trafik från hello IP-adresser tilldelas tooyour appar toohello ASE undernät.</span><span class="sxs-lookup"><span data-stu-id="5e71d-176">If you are using app assigned IP addresses you need tooallow traffic from hello IPs assigned tooyour apps toohello ASE subnet.</span></span>

<span data-ttu-id="5e71d-177">En ASE beror på flera externa system för utgående åtkomst.</span><span class="sxs-lookup"><span data-stu-id="5e71d-177">For outbound access, an ASE depends on multiple external systems.</span></span> <span data-ttu-id="5e71d-178">Dessa beroenden system definieras med DNS-namn och mappa inte tooa fast uppsättning IP-adresser.</span><span class="sxs-lookup"><span data-stu-id="5e71d-178">Those system dependencies are defined with DNS names and don't map tooa fixed set of IP addresses.</span></span> <span data-ttu-id="5e71d-179">Därför hello ASE kräver utgående åtkomst från hello ASE undernät tooall externa IP-adresser i olika portar.</span><span class="sxs-lookup"><span data-stu-id="5e71d-179">Thus, hello ASE requires outbound access from hello ASE subnet tooall external IPs across a variety of ports.</span></span> <span data-ttu-id="5e71d-180">En ASE har hello efter utgående beroenden:</span><span class="sxs-lookup"><span data-stu-id="5e71d-180">An ASE has hello following outbound dependencies:</span></span>

| <span data-ttu-id="5e71d-181">Användning</span><span class="sxs-lookup"><span data-stu-id="5e71d-181">Use</span></span> | <span data-ttu-id="5e71d-182">Från</span><span class="sxs-lookup"><span data-stu-id="5e71d-182">From</span></span> | <span data-ttu-id="5e71d-183">för</span><span class="sxs-lookup"><span data-stu-id="5e71d-183">too</span></span>|
|-----|------|----|
| <span data-ttu-id="5e71d-184">Azure Storage</span><span class="sxs-lookup"><span data-stu-id="5e71d-184">Azure Storage</span></span> | <span data-ttu-id="5e71d-185">ASE undernät</span><span class="sxs-lookup"><span data-stu-id="5e71d-185">ASE subnet</span></span> | <span data-ttu-id="5e71d-186">Table.Core.Windows.NET, blob.core.windows.net, queue.core.windows.net, file.core.windows.net: 80, 443, 445 (445 krävs endast för ASEv1.)</span><span class="sxs-lookup"><span data-stu-id="5e71d-186">table.core.windows.net, blob.core.windows.net, queue.core.windows.net, file.core.windows.net: 80, 443, 445 (445 is only needed for ASEv1.)</span></span> |
| <span data-ttu-id="5e71d-187">Azure SQL Database</span><span class="sxs-lookup"><span data-stu-id="5e71d-187">Azure SQL Database</span></span> | <span data-ttu-id="5e71d-188">ASE undernät</span><span class="sxs-lookup"><span data-stu-id="5e71d-188">ASE subnet</span></span> | <span data-ttu-id="5e71d-189">Database.Windows.NET: 1433, 11000 11999, 14000 14999 (Mer information finns i [SQL Database V12 portar används](../../sql-database/sql-database-develop-direct-route-ports-adonet-v12.md).)</span><span class="sxs-lookup"><span data-stu-id="5e71d-189">database.windows.net: 1433, 11000-11999, 14000-14999 (For more information, see [SQL Database V12 port usage](../../sql-database/sql-database-develop-direct-route-ports-adonet-v12.md).)</span></span>|
| <span data-ttu-id="5e71d-190">Azure-hantering</span><span class="sxs-lookup"><span data-stu-id="5e71d-190">Azure management</span></span> | <span data-ttu-id="5e71d-191">ASE undernät</span><span class="sxs-lookup"><span data-stu-id="5e71d-191">ASE subnet</span></span> | <span data-ttu-id="5e71d-192">Management.Core.Windows.NET, management.azure.com: 443</span><span class="sxs-lookup"><span data-stu-id="5e71d-192">management.core.windows.net, management.azure.com: 443</span></span> 
| <span data-ttu-id="5e71d-193">SSL-certifikatverifiering</span><span class="sxs-lookup"><span data-stu-id="5e71d-193">SSL certificate verification</span></span> |  <span data-ttu-id="5e71d-194">ASE undernät</span><span class="sxs-lookup"><span data-stu-id="5e71d-194">ASE subnet</span></span>            |  <span data-ttu-id="5e71d-195">OCSP.msocsp.com, mscrl.microsoft.com, crl.microsoft.com: 443</span><span class="sxs-lookup"><span data-stu-id="5e71d-195">ocsp.msocsp.com, mscrl.microsoft.com, crl.microsoft.com: 443</span></span>
| <span data-ttu-id="5e71d-196">Azure Active Directory</span><span class="sxs-lookup"><span data-stu-id="5e71d-196">Azure Active Directory</span></span>        | <span data-ttu-id="5e71d-197">ASE undernät</span><span class="sxs-lookup"><span data-stu-id="5e71d-197">ASE subnet</span></span>            |  <span data-ttu-id="5e71d-198">Internet: 443</span><span class="sxs-lookup"><span data-stu-id="5e71d-198">Internet: 443</span></span>
| <span data-ttu-id="5e71d-199">App Service-hantering</span><span class="sxs-lookup"><span data-stu-id="5e71d-199">App Service management</span></span>        | <span data-ttu-id="5e71d-200">ASE undernät</span><span class="sxs-lookup"><span data-stu-id="5e71d-200">ASE subnet</span></span>            |  <span data-ttu-id="5e71d-201">Internet: 443</span><span class="sxs-lookup"><span data-stu-id="5e71d-201">Internet: 443</span></span>
| <span data-ttu-id="5e71d-202">Azure DNS</span><span class="sxs-lookup"><span data-stu-id="5e71d-202">Azure DNS</span></span>                     | <span data-ttu-id="5e71d-203">ASE undernät</span><span class="sxs-lookup"><span data-stu-id="5e71d-203">ASE subnet</span></span>            |  <span data-ttu-id="5e71d-204">Internet: 53</span><span class="sxs-lookup"><span data-stu-id="5e71d-204">Internet: 53</span></span>
| <span data-ttu-id="5e71d-205">ASE intern kommunikation</span><span class="sxs-lookup"><span data-stu-id="5e71d-205">ASE internal communication</span></span>    | <span data-ttu-id="5e71d-206">ASE undernät: alla portar</span><span class="sxs-lookup"><span data-stu-id="5e71d-206">ASE subnet: All ports</span></span> |  <span data-ttu-id="5e71d-207">ASE undernät: alla portar</span><span class="sxs-lookup"><span data-stu-id="5e71d-207">ASE subnet: All ports</span></span>

<span data-ttu-id="5e71d-208">Om hello ASE förlorar åtkomst toothese beroenden, slutar fungera.</span><span class="sxs-lookup"><span data-stu-id="5e71d-208">If hello ASE loses access toothese dependencies, it stops working.</span></span> <span data-ttu-id="5e71d-209">När det händer länge tillräckligt, hello ASE har pausats.</span><span class="sxs-lookup"><span data-stu-id="5e71d-209">When that happens long enough, hello ASE is suspended.</span></span>

### <a name="customer-dns"></a><span data-ttu-id="5e71d-210">Kunden DNS</span><span class="sxs-lookup"><span data-stu-id="5e71d-210">Customer DNS</span></span> ###

<span data-ttu-id="5e71d-211">Om hello virtuella nätverk konfigureras med en kunddefinierade DNS-server kan använda hello klienternas arbetsbelastningar.</span><span class="sxs-lookup"><span data-stu-id="5e71d-211">If hello VNet is configured with a customer-defined DNS server, hello tenant workloads use it.</span></span> <span data-ttu-id="5e71d-212">Hej ASE måste fortfarande toocommunicate med Azure DNS för hanteringsändamål.</span><span class="sxs-lookup"><span data-stu-id="5e71d-212">hello ASE still needs toocommunicate with Azure DNS for management purposes.</span></span> 

<span data-ttu-id="5e71d-213">Om hello virtuella nätverk har konfigurerats med en kund DNS på Hej andra sidan av en VPN-anslutning, hello DNS-server måste kunna nås från hello undernät som innehåller hello ASE.</span><span class="sxs-lookup"><span data-stu-id="5e71d-213">If hello VNet is configured with a customer DNS on hello other side of a VPN, hello DNS server must be reachable from hello subnet that contains hello ASE.</span></span>

<a name="portaldep"></a>

## <a name="portal-dependencies"></a><span data-ttu-id="5e71d-214">Portalen beroenden</span><span class="sxs-lookup"><span data-stu-id="5e71d-214">Portal dependencies</span></span> ##

<span data-ttu-id="5e71d-215">I tillägg toohello ASE funktionella beroenden finns det några extra artiklar relaterade toohello portaler.</span><span class="sxs-lookup"><span data-stu-id="5e71d-215">In addition toohello ASE functional dependencies, there are a few extra items related toohello portal experience.</span></span> <span data-ttu-id="5e71d-216">Några av hello funktionerna i hello Azure-portalen är beroende av direktåtkomst too_SCM site_.</span><span class="sxs-lookup"><span data-stu-id="5e71d-216">Some of hello capabilities in hello Azure portal depend on direct access too_SCM site_.</span></span> <span data-ttu-id="5e71d-217">Det finns två URL: er för varje app i Azure App Service.</span><span class="sxs-lookup"><span data-stu-id="5e71d-217">For every app in Azure App Service, there are two URLs.</span></span> <span data-ttu-id="5e71d-218">hello första URL är tooaccess din app.</span><span class="sxs-lookup"><span data-stu-id="5e71d-218">hello first URL is tooaccess your app.</span></span> <span data-ttu-id="5e71d-219">hello andra URL: en är tooaccess hello SCM plats, som också kallas hello _Kudu konsolen_.</span><span class="sxs-lookup"><span data-stu-id="5e71d-219">hello second URL is tooaccess hello SCM site, which is also called hello _Kudu console_.</span></span> <span data-ttu-id="5e71d-220">Funktioner som använder hello SCM plats är:</span><span class="sxs-lookup"><span data-stu-id="5e71d-220">Features that use hello SCM site include:</span></span>

-   <span data-ttu-id="5e71d-221">Webjobs.</span><span class="sxs-lookup"><span data-stu-id="5e71d-221">Web jobs</span></span>
-   <span data-ttu-id="5e71d-222">Funktioner</span><span class="sxs-lookup"><span data-stu-id="5e71d-222">Functions</span></span>
-   <span data-ttu-id="5e71d-223">Logg för strömning</span><span class="sxs-lookup"><span data-stu-id="5e71d-223">Log streaming</span></span>
-   <span data-ttu-id="5e71d-224">Kudu</span><span class="sxs-lookup"><span data-stu-id="5e71d-224">Kudu</span></span>
-   <span data-ttu-id="5e71d-225">Tillägg</span><span class="sxs-lookup"><span data-stu-id="5e71d-225">Extensions</span></span>
-   <span data-ttu-id="5e71d-226">Processutforskaren</span><span class="sxs-lookup"><span data-stu-id="5e71d-226">Process Explorer</span></span>
-   <span data-ttu-id="5e71d-227">Konsolen</span><span class="sxs-lookup"><span data-stu-id="5e71d-227">Console</span></span>

<span data-ttu-id="5e71d-228">När du använder en ILB ASE hello SCM platsen inte är tillgänglig utanför hello VNet internet.</span><span class="sxs-lookup"><span data-stu-id="5e71d-228">When you use an ILB ASE, hello SCM site isn't internet accessible from outside hello VNet.</span></span> <span data-ttu-id="5e71d-229">När din app finns i en ASE ILB, fungerar inte vissa funktioner från hello-portalen.</span><span class="sxs-lookup"><span data-stu-id="5e71d-229">When your app is hosted on an ILB ASE, some capabilities will not work from hello portal.</span></span>  

<span data-ttu-id="5e71d-230">Många av de funktioner som är beroende av hello SCM platsen finns också direkt i hello Kudu-konsolen.</span><span class="sxs-lookup"><span data-stu-id="5e71d-230">Many of those capabilities that depend upon hello SCM site are also available directly in hello Kudu console.</span></span> <span data-ttu-id="5e71d-231">Du kan ansluta tooit direkt i stället för med hello-portalen.</span><span class="sxs-lookup"><span data-stu-id="5e71d-231">You can connect tooit directly rather than by using hello portal.</span></span> <span data-ttu-id="5e71d-232">Om din app finns i en ASE ILB, kan du använda din publishing autentiseringsuppgifter toosign i.</span><span class="sxs-lookup"><span data-stu-id="5e71d-232">If your app is hosted in an ILB ASE, use your publishing credentials toosign in.</span></span> <span data-ttu-id="5e71d-233">hello URL tooaccess hello SCM platsen i en app som finns i en ASE ILB har hello följande format:</span><span class="sxs-lookup"><span data-stu-id="5e71d-233">hello URL tooaccess hello SCM site of an app hosted in an ILB ASE has hello following format:</span></span> 

```
<appname>.scm.<domain name hello ILB ASE was created with> 
```

<span data-ttu-id="5e71d-234">Om din ILB ASE är hello domännamn *contoso.net* och appnamnet på din är *testapp*, hello app har nåtts på *testapp.contoso.net*.</span><span class="sxs-lookup"><span data-stu-id="5e71d-234">If your ILB ASE is hello domain name *contoso.net* and your app name is *testapp*, hello app is reached at *testapp.contoso.net*.</span></span> <span data-ttu-id="5e71d-235">hello SCM plats som medföljer den uppnås på *testapp.scm.contoso.net*.</span><span class="sxs-lookup"><span data-stu-id="5e71d-235">hello SCM site that goes with it is reached at *testapp.scm.contoso.net*.</span></span>

### <a name="functions-and-web-jobs"></a><span data-ttu-id="5e71d-236">Funktioner och webjobs.</span><span class="sxs-lookup"><span data-stu-id="5e71d-236">Functions and Web jobs</span></span> ###

<span data-ttu-id="5e71d-237">Både funktioner och webb-jobb är beroende av hello SCM plats men stöds för användning i hello-portalen, även om dina appar finns i en ASE ILB, så länge din webbläsare kan nå hello SCM plats.</span><span class="sxs-lookup"><span data-stu-id="5e71d-237">Both Functions and Web jobs depend on hello SCM site but are supported for use in hello portal, even if your apps are in an ILB ASE, so long as your browser can reach hello SCM site.</span></span>  <span data-ttu-id="5e71d-238">Om du använder ett självsignerat certifikat med ILB-ASE måste tooenable din webbläsare tootrust som certifikat.</span><span class="sxs-lookup"><span data-stu-id="5e71d-238">If you are using a self-signed certificate with your ILB ASE, you will need tooenable your browser tootrust that certificate.</span></span>  <span data-ttu-id="5e71d-239">Har toobe i hello datorn förtroende lagra för Internet Explorer och kant som: hello certifikat.</span><span class="sxs-lookup"><span data-stu-id="5e71d-239">For IE and Edge that means hello certificate has toobe in hello computer trust store.</span></span>  <span data-ttu-id="5e71d-240">Om du använder Chrome sedan det innebär att du har accepterat hello certifikat i hello webbläsare tidigare genom att träffa förmodligen hello scm plats direkt.</span><span class="sxs-lookup"><span data-stu-id="5e71d-240">If you are using Chrome then that means you accepted hello certificate in hello browser earlier by presumably hitting hello scm site directly.</span></span>  <span data-ttu-id="5e71d-241">hello bästa lösningen är toouse ett kommersiella certifikat som är i hello webbläsare förtroendekedja för.</span><span class="sxs-lookup"><span data-stu-id="5e71d-241">hello best solution is toouse a commercial certificate that is in hello browser chain of trust.</span></span>  

## <a name="ase-ip-addresses"></a><span data-ttu-id="5e71d-242">ASE IP-adresser</span><span class="sxs-lookup"><span data-stu-id="5e71d-242">ASE IP addresses</span></span> ##

<span data-ttu-id="5e71d-243">En ASE har några IP-adresser toobe medveten om.</span><span class="sxs-lookup"><span data-stu-id="5e71d-243">An ASE has a few IP addresses toobe aware of.</span></span> <span data-ttu-id="5e71d-244">De är:</span><span class="sxs-lookup"><span data-stu-id="5e71d-244">They are:</span></span>

- <span data-ttu-id="5e71d-245">**Offentliga IP-adressen för inkommande**: används för appen trafik i en extern ASE och hantering av trafik i både en extern ASE och en ILB ASE.</span><span class="sxs-lookup"><span data-stu-id="5e71d-245">**Public inbound IP address**: Used for app traffic in an External ASE, and management traffic in both an External ASE and an ILB ASE.</span></span>
- <span data-ttu-id="5e71d-246">**Utgående offentliga IP-Adressen**: används som hello ”från”-IP för utgående anslutningar från hello ASE att lämna hello VNet, som inte dirigeras av en VPN-anslutning.</span><span class="sxs-lookup"><span data-stu-id="5e71d-246">**Outbound public IP**: Used as hello "from" IP for outbound connections from hello ASE that leave hello VNet, which aren't routed down a VPN.</span></span>
- <span data-ttu-id="5e71d-247">**ILB IP-adress**: Om du använder en ILB ASE.</span><span class="sxs-lookup"><span data-stu-id="5e71d-247">**ILB IP address**: If you use an ILB ASE.</span></span>
- <span data-ttu-id="5e71d-248">**App-tilldelade IP-baserade SSL-adresser**: bara möjligt med en extern ASE och IP-baserade SSL har konfigurerats.</span><span class="sxs-lookup"><span data-stu-id="5e71d-248">**App-assigned IP-based SSL addresses**: Only possible with an External ASE and when IP-based SSL is configured.</span></span>

<span data-ttu-id="5e71d-249">Alla IP-adresserna är synlig i en ASEv2 i hello Azure-portalen från hello ASE UI.</span><span class="sxs-lookup"><span data-stu-id="5e71d-249">All these IP addresses are easily visible in an ASEv2 in hello Azure portal from hello ASE UI.</span></span> <span data-ttu-id="5e71d-250">Om du har en ILB ASE visas hello IP för hello ILB.</span><span class="sxs-lookup"><span data-stu-id="5e71d-250">If you have an ILB ASE, hello IP for hello ILB is listed.</span></span>

![IP-adresser][3]

### <a name="app-assigned-ip-addresses"></a><span data-ttu-id="5e71d-252">App-tilldelad IP-adresser</span><span class="sxs-lookup"><span data-stu-id="5e71d-252">App-assigned IP addresses</span></span> ###

<span data-ttu-id="5e71d-253">Med en extern ASE kan du tilldela IP-adresser tooindividual appar.</span><span class="sxs-lookup"><span data-stu-id="5e71d-253">With an External ASE, you can assign IP addresses tooindividual apps.</span></span> <span data-ttu-id="5e71d-254">Du kan göra det med en ILB ASE.</span><span class="sxs-lookup"><span data-stu-id="5e71d-254">You can't do that with an ILB ASE.</span></span> <span data-ttu-id="5e71d-255">Mer information om hur tooconfigure app-toohave sin egen IP-adress finns [binda en befintlig anpassad SSL-certifikat tooAzure webbappar](../../app-service-web/app-service-web-tutorial-custom-ssl.md).</span><span class="sxs-lookup"><span data-stu-id="5e71d-255">For more information on how tooconfigure your app toohave its own IP address, see [Bind an existing custom SSL certificate tooAzure web apps](../../app-service-web/app-service-web-tutorial-custom-ssl.md).</span></span>

<span data-ttu-id="5e71d-256">När en app har sin egen IP-baserade SSL-adress, reserverar hello ASE två portar toomap toothat IP-adress.</span><span class="sxs-lookup"><span data-stu-id="5e71d-256">When an app has its own IP-based SSL address, hello ASE reserves two ports toomap toothat IP address.</span></span> <span data-ttu-id="5e71d-257">En port är för HTTP-trafik, och hello andra porten för HTTPS.</span><span class="sxs-lookup"><span data-stu-id="5e71d-257">One port is for HTTP traffic, and hello other port is for HTTPS.</span></span> <span data-ttu-id="5e71d-258">De portarna som listas i hello ASE Användargränssnittet under hello IP-adresser.</span><span class="sxs-lookup"><span data-stu-id="5e71d-258">Those ports are listed in hello ASE UI in hello IP addresses section.</span></span> <span data-ttu-id="5e71d-259">Trafik måste vara kan tooreach dessa portar från hello VIP eller hello appar som inte är tillgängligt.</span><span class="sxs-lookup"><span data-stu-id="5e71d-259">Traffic must be able tooreach those ports from hello VIP or hello apps are inaccessible.</span></span> <span data-ttu-id="5e71d-260">Det här kravet är viktiga tooremember när du konfigurerar Nätverkssäkerhetsgrupper (NSG: er).</span><span class="sxs-lookup"><span data-stu-id="5e71d-260">This requirement is important tooremember when you configure Network Security Groups (NSGs).</span></span>

## <a name="network-security-groups"></a><span data-ttu-id="5e71d-261">Nätverkssäkerhetsgrupper</span><span class="sxs-lookup"><span data-stu-id="5e71d-261">Network Security Groups</span></span> ##

<span data-ttu-id="5e71d-262">[Nätverkssäkerhetsgrupper] [ NSGs] ge hello möjlighet toocontrol åtkomst inom ett VNet.</span><span class="sxs-lookup"><span data-stu-id="5e71d-262">[Network Security Groups][NSGs] provide hello ability toocontrol network access within a VNet.</span></span> <span data-ttu-id="5e71d-263">När du använder hello portal, det är en implicit neka-regel på hello lägsta prioritet toodeny allt.</span><span class="sxs-lookup"><span data-stu-id="5e71d-263">When you use hello portal, there's an implicit deny rule at hello lowest priority toodeny everything.</span></span> <span data-ttu-id="5e71d-264">Du skapar är en Tillåt-regler.</span><span class="sxs-lookup"><span data-stu-id="5e71d-264">What you build are your allow rules.</span></span>

<span data-ttu-id="5e71d-265">I en ASE har du inte åtkomst toohello virtuella datorer används toohost hello ASE sig själv.</span><span class="sxs-lookup"><span data-stu-id="5e71d-265">In an ASE, you don't have access toohello VMs used toohost hello ASE itself.</span></span> <span data-ttu-id="5e71d-266">De är i en Microsoft-hanterad prenumeration.</span><span class="sxs-lookup"><span data-stu-id="5e71d-266">They're in a Microsoft-managed subscription.</span></span> <span data-ttu-id="5e71d-267">Om du vill toorestrict åtkomst toohello appar på hello ASE, ange NSG: er på hello ASE undernät.</span><span class="sxs-lookup"><span data-stu-id="5e71d-267">If you want toorestrict access toohello apps on hello ASE, set NSGs on hello ASE subnet.</span></span> <span data-ttu-id="5e71d-268">Gör det måste du vara noggrann uppmärksam toohello ASE beroenden.</span><span class="sxs-lookup"><span data-stu-id="5e71d-268">In doing so, pay careful attention toohello ASE dependencies.</span></span> <span data-ttu-id="5e71d-269">Om du blockerar eventuella beroenden slutar hello ASE fungera.</span><span class="sxs-lookup"><span data-stu-id="5e71d-269">If you block any dependencies, hello ASE stops working.</span></span>

<span data-ttu-id="5e71d-270">NSG: er kan konfigureras via hello Azure portal och PowerShell.</span><span class="sxs-lookup"><span data-stu-id="5e71d-270">NSGs can be configured through hello Azure portal or via PowerShell.</span></span> <span data-ttu-id="5e71d-271">hello information här visar hello Azure-portalen.</span><span class="sxs-lookup"><span data-stu-id="5e71d-271">hello information here shows hello Azure portal.</span></span> <span data-ttu-id="5e71d-272">Du skapar och hanterar NSG: er i hello-portalen som en översta resurs under **nätverk**.</span><span class="sxs-lookup"><span data-stu-id="5e71d-272">You create and manage NSGs in hello portal as a top-level resource under **Networking**.</span></span>

<span data-ttu-id="5e71d-273">När hello inkommande och utgående krav beaktas, hello NSG: er ska se ut ungefär toohello NSG: er i det här exemplet.</span><span class="sxs-lookup"><span data-stu-id="5e71d-273">When hello inbound and outbound requirements are taken into account, hello NSGs should look similar toohello NSGs shown in this example.</span></span> <span data-ttu-id="5e71d-274">Hej VNet-adressintervallet är _192.168.250.0/16_, och hello undernätet som hello ASE _192.168.251.128/25_.</span><span class="sxs-lookup"><span data-stu-id="5e71d-274">hello VNet address range is _192.168.250.0/16_, and hello subnet that hello ASE is in is _192.168.251.128/25_.</span></span>

<span data-ttu-id="5e71d-275">hello först två inkommande krav för hello ASE toofunction visas överst hello i hello listan i det här exemplet.</span><span class="sxs-lookup"><span data-stu-id="5e71d-275">hello first two inbound requirements for hello ASE toofunction are shown at hello top of hello list in this example.</span></span> <span data-ttu-id="5e71d-276">De ASE hantering och Tillåt hello ASE toocommunicate med sig själv.</span><span class="sxs-lookup"><span data-stu-id="5e71d-276">They enable ASE management and allow hello ASE toocommunicate with itself.</span></span> <span data-ttu-id="5e71d-277">hello andra poster alla konfigurerbara klient och kan styra åtkomst toohello ASE värd nätverksprogram.</span><span class="sxs-lookup"><span data-stu-id="5e71d-277">hello other entries are all tenant configurable and can govern network access toohello ASE-hosted applications.</span></span> 

![Inkommande säkerhetsregler][4]

<span data-ttu-id="5e71d-279">En standardregel kan hello IP-adresser i hello VNet tootalk toohello ASE undernät.</span><span class="sxs-lookup"><span data-stu-id="5e71d-279">A default rule enables hello IPs in hello VNet tootalk toohello ASE subnet.</span></span> <span data-ttu-id="5e71d-280">En annan standardregel som aktiverar hello belastningsutjämnare, kallas även hello offentliga VIP, toocommunicate med hello ASE.</span><span class="sxs-lookup"><span data-stu-id="5e71d-280">Another default rule enables hello load balancer, also known as hello public VIP, toocommunicate with hello ASE.</span></span> <span data-ttu-id="5e71d-281">standardregler för toosee hello Välj **standard regler** nästa toohello **Lägg till** ikon.</span><span class="sxs-lookup"><span data-stu-id="5e71d-281">toosee hello default rules, select **Default rules** next toohello **Add** icon.</span></span> <span data-ttu-id="5e71d-282">Om du placerar en neka allt annat regel när hello NSG-regler visas kan du förhindra att trafik mellan hello VIP och hello ASE.</span><span class="sxs-lookup"><span data-stu-id="5e71d-282">If you put a deny everything else rule after hello NSG rules shown, you prevent traffic between hello VIP and hello ASE.</span></span> <span data-ttu-id="5e71d-283">tooprevent trafik i hello VNet, lägga till egna regeln tooallow inkommande.</span><span class="sxs-lookup"><span data-stu-id="5e71d-283">tooprevent traffic coming from inside hello VNet, add your own rule tooallow inbound.</span></span> <span data-ttu-id="5e71d-284">Använda en källa lika tooAzureLoadBalancer med ett mål för **alla** och ett portintervall på  **\*** .</span><span class="sxs-lookup"><span data-stu-id="5e71d-284">Use a source equal tooAzureLoadBalancer with a destination of **Any** and a port range of **\***.</span></span> <span data-ttu-id="5e71d-285">Eftersom hello NSG regeln är tillämpade toohello ASE undernät, behöver du inte toobe specifika i hello målet.</span><span class="sxs-lookup"><span data-stu-id="5e71d-285">Because hello NSG rule is applied toohello ASE subnet, you don't need toobe specific in hello destination.</span></span>

<span data-ttu-id="5e71d-286">Om du har tilldelat en IP-adress tooyour app Kontrollera att du behåller hello öppna portar.</span><span class="sxs-lookup"><span data-stu-id="5e71d-286">If you assigned an IP address tooyour app, make sure you keep hello ports open.</span></span> <span data-ttu-id="5e71d-287">Välj toosee hello portar **Apptjänstmiljö** > **IP-adresser**.</span><span class="sxs-lookup"><span data-stu-id="5e71d-287">toosee hello ports, select **App Service Environment** > **IP addresses**.</span></span>  

<span data-ttu-id="5e71d-288">Alla hello-objekt som visas i följande regler för utgående trafik hello behövs förutom hello sista objektet.</span><span class="sxs-lookup"><span data-stu-id="5e71d-288">All hello items shown in hello following outbound rules are needed, except for hello last item.</span></span> <span data-ttu-id="5e71d-289">De gör det möjligt för network access toohello ASE beroenden som noterades tidigare i den här artikeln.</span><span class="sxs-lookup"><span data-stu-id="5e71d-289">They enable network access toohello ASE dependencies that were noted earlier in this article.</span></span> <span data-ttu-id="5e71d-290">Om du blockerar någon av dem kan slutar din ASE fungera.</span><span class="sxs-lookup"><span data-stu-id="5e71d-290">If you block any of them, your ASE stops working.</span></span> <span data-ttu-id="5e71d-291">hello sista objektet i listan hello gör det möjligt för din ASE toocommunicate med andra resurser i ditt VNet.</span><span class="sxs-lookup"><span data-stu-id="5e71d-291">hello last item in hello list enables your ASE toocommunicate with other resources in your VNet.</span></span>

![Utgående säkerhetsregler][5]

<span data-ttu-id="5e71d-293">När dina NSG: er har definierats kan du tilldela dem toohello undernät som din ASE på.</span><span class="sxs-lookup"><span data-stu-id="5e71d-293">After your NSGs are defined, assign them toohello subnet that your ASE is on.</span></span> <span data-ttu-id="5e71d-294">Om du inte kommer ihåg hello ASE VNet eller undernät, kan du se den från hello ASE management portal.</span><span class="sxs-lookup"><span data-stu-id="5e71d-294">If you don’t remember hello ASE VNet or subnet, you can see it from hello ASE management portal.</span></span> <span data-ttu-id="5e71d-295">tooassign hello NSG tooyour undernät, gå toohello undernät UI och välj hello NSG.</span><span class="sxs-lookup"><span data-stu-id="5e71d-295">tooassign hello NSG tooyour subnet, go toohello subnet UI and select hello NSG.</span></span>

## <a name="routes"></a><span data-ttu-id="5e71d-296">Vägar</span><span class="sxs-lookup"><span data-stu-id="5e71d-296">Routes</span></span> ##

<span data-ttu-id="5e71d-297">Vägar blivit problematiska oftast när du konfigurerar ditt VNet med Azure ExpressRoute.</span><span class="sxs-lookup"><span data-stu-id="5e71d-297">Routes become problematic most commonly when you configure your VNet with Azure ExpressRoute.</span></span> <span data-ttu-id="5e71d-298">Det finns tre typer av vägar i ett virtuellt nätverk:</span><span class="sxs-lookup"><span data-stu-id="5e71d-298">There are three types of routes in a VNet:</span></span>

-   <span data-ttu-id="5e71d-299">Systemvägar</span><span class="sxs-lookup"><span data-stu-id="5e71d-299">System routes</span></span>
-   <span data-ttu-id="5e71d-300">BGP-vägar</span><span class="sxs-lookup"><span data-stu-id="5e71d-300">BGP routes</span></span>
-   <span data-ttu-id="5e71d-301">Användardefinierade vägar (udr: er)</span><span class="sxs-lookup"><span data-stu-id="5e71d-301">User-defined routes (UDRs)</span></span>

<span data-ttu-id="5e71d-302">BGP-vägar åsidosätta systemvägar.</span><span class="sxs-lookup"><span data-stu-id="5e71d-302">BGP routes override system routes.</span></span> <span data-ttu-id="5e71d-303">Udr: er åsidosätta BGP-vägar.</span><span class="sxs-lookup"><span data-stu-id="5e71d-303">UDRs override BGP routes.</span></span> <span data-ttu-id="5e71d-304">Mer information om vägar i virtuella Azure-nätverk finns [användardefinierade vägar översikt][UDRs].</span><span class="sxs-lookup"><span data-stu-id="5e71d-304">For more information about routes in Azure virtual networks, see [User-defined routes overview][UDRs].</span></span>

<span data-ttu-id="5e71d-305">hello Azure SQL-databas att hello ASE använder toomanage hello system har en brandvägg.</span><span class="sxs-lookup"><span data-stu-id="5e71d-305">hello Azure SQL database that hello ASE uses toomanage hello system has a firewall.</span></span> <span data-ttu-id="5e71d-306">Den kräver kommunikation toooriginate från hello ASE offentliga VIP.</span><span class="sxs-lookup"><span data-stu-id="5e71d-306">It requires communication toooriginate from hello ASE public VIP.</span></span> <span data-ttu-id="5e71d-307">Anslutningar toohello SQL-databas från hello ASE nekas om de skickas ned hello ExpressRoute-anslutning och en annan IP-adress.</span><span class="sxs-lookup"><span data-stu-id="5e71d-307">Connections toohello SQL database from hello ASE will be denied if they are sent down hello ExpressRoute connection and out another IP address.</span></span>

<span data-ttu-id="5e71d-308">Om svar tooincoming management-begäranden skickas ned hello ExpressRoute skiljer hello svarsadressen sig hello ursprungliga mål.</span><span class="sxs-lookup"><span data-stu-id="5e71d-308">If replies tooincoming management requests are sent down hello ExpressRoute, hello reply address is different than hello original destination.</span></span> <span data-ttu-id="5e71d-309">Denna felmatchning bryter hello TCP-kommunikation.</span><span class="sxs-lookup"><span data-stu-id="5e71d-309">This mismatch breaks hello TCP communication.</span></span>

<span data-ttu-id="5e71d-310">För din ASE toowork är ditt virtuella nätverk har konfigurerats med en ExpressRoute hello enklaste sak toodo:</span><span class="sxs-lookup"><span data-stu-id="5e71d-310">For your ASE toowork while your VNet is configured with an ExpressRoute, hello easiest thing toodo is:</span></span>

-   <span data-ttu-id="5e71d-311">Konfigurera ExpressRoute tooadvertise _0.0.0.0/0_.</span><span class="sxs-lookup"><span data-stu-id="5e71d-311">Configure ExpressRoute tooadvertise _0.0.0.0/0_.</span></span> <span data-ttu-id="5e71d-312">Som standard den tvinga tunnlar alla utgående trafik lokalt.</span><span class="sxs-lookup"><span data-stu-id="5e71d-312">By default, it force tunnels all outbound traffic on-premises.</span></span>
-   <span data-ttu-id="5e71d-313">Skapa en UDR.</span><span class="sxs-lookup"><span data-stu-id="5e71d-313">Create a UDR.</span></span> <span data-ttu-id="5e71d-314">Tillämpa den toohello undernät som innehåller hello ASE med en adressprefixet _0.0.0.0/0_ och en nästa hopptyp av _Internet_.</span><span class="sxs-lookup"><span data-stu-id="5e71d-314">Apply it toohello subnet that contains hello ASE with an address prefix of _0.0.0.0/0_ and a next hop type of _Internet_.</span></span>

<span data-ttu-id="5e71d-315">Om du ändrar de här två, är inte avsedda internet trafik från hello ASE undernät hello ExpressRoute och hello ASE tvingas fungerar.</span><span class="sxs-lookup"><span data-stu-id="5e71d-315">If you make these two changes, internet-destined traffic that originates from hello ASE subnet isn't forced down hello ExpressRoute and hello ASE works.</span></span> 

> [!IMPORTANT]
> <span data-ttu-id="5e71d-316">hello vägar som definierats i en UDR måste vara specifikt nog tootake företräde framför alla vägar annonseras av hello ExpressRoute konfiguration.</span><span class="sxs-lookup"><span data-stu-id="5e71d-316">hello routes defined in a UDR must be specific enough tootake precedence over any routes advertised by hello ExpressRoute configuration.</span></span> <span data-ttu-id="5e71d-317">hello använder föregående exempel hello bred 0.0.0.0/0-adressintervall.</span><span class="sxs-lookup"><span data-stu-id="5e71d-317">hello preceding example uses hello broad 0.0.0.0/0 address range.</span></span> <span data-ttu-id="5e71d-318">Den kan potentiellt av misstag åsidosättas av flödet annonser som används mer specifika adressintervall.</span><span class="sxs-lookup"><span data-stu-id="5e71d-318">It can potentially be accidentally overridden by route advertisements that use more specific address ranges.</span></span>
>
> <span data-ttu-id="5e71d-319">ASEs stöds inte med ExpressRoute-konfigurationer som annonserar vägar från hello offentlig peering sökväg toohello privat peering sökväg mellan.</span><span class="sxs-lookup"><span data-stu-id="5e71d-319">ASEs aren't supported with ExpressRoute configurations that cross-advertise routes from hello public-peering path toohello private-peering path.</span></span> <span data-ttu-id="5e71d-320">ExpressRoute-konfigurationer med offentlig peering konfigurerats få vägannonser från Microsoft.</span><span class="sxs-lookup"><span data-stu-id="5e71d-320">ExpressRoute configurations with public peering configured receive route advertisements from Microsoft.</span></span> <span data-ttu-id="5e71d-321">hello annonser innehåller ett stort antal Microsoft Azure IP-adressintervall.</span><span class="sxs-lookup"><span data-stu-id="5e71d-321">hello advertisements contain a large set of Microsoft Azure IP address ranges.</span></span> <span data-ttu-id="5e71d-322">Om hello-adressintervall mellan annonserade på hello privat peering sökväg, är alla utgående paket från hello ASES undernät kraft tunnel tooa kundens lokala nätverkets infrastruktur.</span><span class="sxs-lookup"><span data-stu-id="5e71d-322">If hello address ranges are cross-advertised on hello private-peering path, all outbound network packets from hello ASE's subnet are force tunneled tooa customer's on-premises network infrastructure.</span></span> <span data-ttu-id="5e71d-323">Det här flödet i nätverk stöds för närvarande inte med ASEs.</span><span class="sxs-lookup"><span data-stu-id="5e71d-323">This network flow is currently not supported with ASEs.</span></span> <span data-ttu-id="5e71d-324">En lösning toothis problemet är toostop mellan reklam vägar från hello offentlig peering sökväg toohello privat peering sökväg.</span><span class="sxs-lookup"><span data-stu-id="5e71d-324">One solution toothis problem is toostop cross-advertising routes from hello public-peering path toohello private-peering path.</span></span>

<span data-ttu-id="5e71d-325">toocreate UDR, Följ dessa steg:</span><span class="sxs-lookup"><span data-stu-id="5e71d-325">toocreate a UDR, follow these steps:</span></span>

1. <span data-ttu-id="5e71d-326">Gå toohello Azure-portalen.</span><span class="sxs-lookup"><span data-stu-id="5e71d-326">Go toohello Azure portal.</span></span> <span data-ttu-id="5e71d-327">Välj **nätverk** > **routningstabeller**.</span><span class="sxs-lookup"><span data-stu-id="5e71d-327">Select **Networking** > **Route Tables**.</span></span>

2. <span data-ttu-id="5e71d-328">Skapa en ny routingtabell i hello samma region som ditt VNet.</span><span class="sxs-lookup"><span data-stu-id="5e71d-328">Create a new route table in hello same region as your VNet.</span></span>

3. <span data-ttu-id="5e71d-329">Inom din routningstabellen UI, Välj **vägar** > **Lägg till**.</span><span class="sxs-lookup"><span data-stu-id="5e71d-329">From within your route table UI, select **Routes** > **Add**.</span></span>

4. <span data-ttu-id="5e71d-330">Ange hello **nästa hopptyp** för**Internet** och hello **adressprefixet** för**0.0.0.0/0**.</span><span class="sxs-lookup"><span data-stu-id="5e71d-330">Set hello **Next hop type** too**Internet** and hello **Address prefix** too**0.0.0.0/0**.</span></span> <span data-ttu-id="5e71d-331">Välj **Spara**.</span><span class="sxs-lookup"><span data-stu-id="5e71d-331">Select **Save**.</span></span>

    <span data-ttu-id="5e71d-332">Då visas ungefär hello följande:</span><span class="sxs-lookup"><span data-stu-id="5e71d-332">You then see something like hello following:</span></span>

    ![Funktionella vägar][6]

5. <span data-ttu-id="5e71d-334">När du har skapat hello nya routningstabellen gå toohello undernät som innehåller din ASE.</span><span class="sxs-lookup"><span data-stu-id="5e71d-334">After you create hello new route table, go toohello subnet that contains your ASE.</span></span> <span data-ttu-id="5e71d-335">Välj din routningstabellen hello listan i hello-portalen.</span><span class="sxs-lookup"><span data-stu-id="5e71d-335">Select your route table from hello list in hello portal.</span></span> <span data-ttu-id="5e71d-336">När du har sparat hello ändra bör du se hello NSG: er och vägar som anges med ditt undernät.</span><span class="sxs-lookup"><span data-stu-id="5e71d-336">After you save hello change, you should then see hello NSGs and routes noted with your subnet.</span></span>

    ![NSG: er och vägar][7]

### <a name="deploy-into-existing-azure-virtual-networks-that-are-integrated-with-expressroute"></a><span data-ttu-id="5e71d-338">Distribuera i befintliga virtuella Azure-nätverk som är integrerade med ExpressRoute</span><span class="sxs-lookup"><span data-stu-id="5e71d-338">Deploy into existing Azure virtual networks that are integrated with ExpressRoute</span></span> ###

<span data-ttu-id="5e71d-339">toodeploy din ASE till ett virtuellt nätverk som är integrerad med ExpressRoute förkonfigurera hello undernät där du vill att hello ASE distribueras.</span><span class="sxs-lookup"><span data-stu-id="5e71d-339">toodeploy your ASE into a VNet that's integrated with ExpressRoute, preconfigure hello subnet where you want hello ASE deployed.</span></span> <span data-ttu-id="5e71d-340">Använda en Resource Manager-mall toodeploy den.</span><span class="sxs-lookup"><span data-stu-id="5e71d-340">Then use a Resource Manager template toodeploy it.</span></span> <span data-ttu-id="5e71d-341">toocreate en ASE i ett VNet har som redan ExpressRoute konfigureras:</span><span class="sxs-lookup"><span data-stu-id="5e71d-341">toocreate an ASE in a VNet that already has ExpressRoute configured:</span></span>

- <span data-ttu-id="5e71d-342">Skapa ett undernät toohost hello ASE.</span><span class="sxs-lookup"><span data-stu-id="5e71d-342">Create a subnet toohost hello ASE.</span></span>

    > [!NOTE]
    > <span data-ttu-id="5e71d-343">Inget annat kan vara i hello undernät men hello ASE.</span><span class="sxs-lookup"><span data-stu-id="5e71d-343">Nothing else can be in hello subnet but hello ASE.</span></span> <span data-ttu-id="5e71d-344">Vara säker på att toochoose ett adressutrymme som gör det möjligt för framtida tillväxt.</span><span class="sxs-lookup"><span data-stu-id="5e71d-344">Be sure toochoose an address space that allows for future growth.</span></span> <span data-ttu-id="5e71d-345">Du kan inte ändra denna inställning senare.</span><span class="sxs-lookup"><span data-stu-id="5e71d-345">You can't change this setting later.</span></span> <span data-ttu-id="5e71d-346">Vi rekommenderar en storlek på `/25` med 128-adresser.</span><span class="sxs-lookup"><span data-stu-id="5e71d-346">We recommend a size of `/25` with 128 addresses.</span></span>

- <span data-ttu-id="5e71d-347">Skapa udr: er (till exempel vägtabeller) som tidigare beskrivits och ange som i hello undernät.</span><span class="sxs-lookup"><span data-stu-id="5e71d-347">Create UDRs (for example, route tables) as described earlier, and set that on hello subnet.</span></span>
- <span data-ttu-id="5e71d-348">Skapa hello ASE med hjälp av en Resource Manager-mall som beskrivs i [skapar en ASE med hjälp av en Resource Manager-mall][MakeASEfromTemplate].</span><span class="sxs-lookup"><span data-stu-id="5e71d-348">Create hello ASE by using a Resource Manager template as described in [Create an ASE by using a Resource Manager template][MakeASEfromTemplate].</span></span>

<!--Image references-->
[1]: ./media/network_considerations_with_an_app_service_environment/networkase-overflow.png
[2]: ./media/network_considerations_with_an_app_service_environment/networkase-overflow2.png
[3]: ./media/network_considerations_with_an_app_service_environment/networkase-ipaddresses.png
[4]: ./media/network_considerations_with_an_app_service_environment/networkase-inboundnsg.png
[5]: ./media/network_considerations_with_an_app_service_environment/networkase-outboundnsg.png
[6]: ./media/network_considerations_with_an_app_service_environment/networkase-udr.png
[7]: ./media/network_considerations_with_an_app_service_environment/networkase-subnet.png

<!--Links-->
[Intro]: ./intro.md
[MakeExternalASE]: ./create-external-ase.md
[MakeASEfromTemplate]: ./create-from-template.md
[MakeILBASE]: ./create-ilb-ase.md
[ASENetwork]: ./network-info.md
[ASEReadme]: ./readme.md
[UsingASE]: ./using-an-ase.md
[UDRs]: ../../virtual-network/virtual-networks-udr-overview.md
[NSGs]: ../../virtual-network/virtual-networks-nsg.md
[ConfigureASEv1]: ../../app-service-web/app-service-web-configure-an-app-service-environment.md
[ASEv1Intro]: ../../app-service-web/app-service-app-service-environment-intro.md
[webapps]: ../../app-service-web/app-service-web-overview.md
[mobileapps]: ../../app-service-mobile/app-service-mobile-value-prop.md
[APIapps]: ../../app-service-api/app-service-api-apps-why-best-platform.md
[Functions]: ../../azure-functions/index.yml
[Pricing]: http://azure.microsoft.com/pricing/details/app-service/
[ARMOverview]: ../../azure-resource-manager/resource-group-overview.md
[ConfigureSSL]: ../../app-service-web/web-sites-purchase-ssl-web-site.md
[Kudu]: http://azure.microsoft.com/resources/videos/super-secret-kudu-debug-console-for-azure-web-sites/
[AppDeploy]: ../../app-service-web/web-sites-deploy.md
[ASEWAF]: ../../app-service-web/app-service-app-service-environment-web-application-firewall.md
[AppGW]: ../../application-gateway/application-gateway-web-application-firewall-overview.md
[ASEManagement]: ./management-addresses.md

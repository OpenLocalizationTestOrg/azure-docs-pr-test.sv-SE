---
title: "Exportera en Azure-baserad API till PowerApps och Microsoft flödar | Microsoft Docs"
description: "Översikt över hur du exponera en värdbaserad API i Apptjänst PowerApps och Microsoft Flow"
services: app-service
documentationcenter: 
author: mattchenderson
manager: erikre
editor: 
ms.assetid: 
ms.service: app-service
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: multiple
ms.topic: article
ms.date: 06/20/2017
ms.author: mahender
ms.openlocfilehash: 0d166a2e5b60c3b9f911f9fc3ad49ad7f252abb4
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: sv-SE
ms.lasthandoff: 07/11/2017
---
# <a name="exporting-an-azure-hosted-api-to-powerapps-and-microsoft-flow"></a><span data-ttu-id="48e22-103">Exportera en Azure-baserad API till PowerApps och Microsoft-flöde</span><span class="sxs-lookup"><span data-stu-id="48e22-103">Exporting an Azure-hosted API to PowerApps and Microsoft Flow</span></span>

## <a name="creating-custom-connectors-for-powerapps-and-microsoft-flow"></a><span data-ttu-id="48e22-104">Skapa egna kopplingar för PowerApps och Microsoft Flow</span><span class="sxs-lookup"><span data-stu-id="48e22-104">Creating custom connectors for PowerApps and Microsoft Flow</span></span>

<span data-ttu-id="48e22-105">[PowerApps](https://powerapps.com) är en tjänst för att skapa och använda anpassade appar som ansluter till dina data och fungera mellan olika plattformar.</span><span class="sxs-lookup"><span data-stu-id="48e22-105">[PowerApps](https://powerapps.com) is a service for building and using custom business apps that connect to your data and work across platforms.</span></span> <span data-ttu-id="48e22-106">[Microsoft Flow](https://flow.microsoft.com) gör det enkelt att automatisera arbetsflöden och affärsprocesser mellan din favorit appar och tjänster.</span><span class="sxs-lookup"><span data-stu-id="48e22-106">[Microsoft Flow](https://flow.microsoft.com) makes it easy to automate workflows and business processes between your favorite apps and services.</span></span> <span data-ttu-id="48e22-107">Både PowerApps och Microsoft Flow har ett antal inbyggda anslutningar till datakällor, till exempel Office 365, Dynamics 365, Salesforce och mycket mer.</span><span class="sxs-lookup"><span data-stu-id="48e22-107">Both PowerApps and Microsoft Flow come with a variety of built-in connectors to data sources such as Office 365, Dynamics 365, Salesforce, and more.</span></span> <span data-ttu-id="48e22-108">Användare behöver dock också för att kunna utnyttja datakällor och API: er som skapas av organisationen.</span><span class="sxs-lookup"><span data-stu-id="48e22-108">However, users also need to be able to leverage data sources and APIs being built by their organization.</span></span>

<span data-ttu-id="48e22-109">På liknande sätt kan utvecklare som vill använda sina API: er mer brett inom organisationen kanske vill göra deras API: er som är tillgängliga för PowerApps och Microsoft Flow användarna.</span><span class="sxs-lookup"><span data-stu-id="48e22-109">Similarly, developers that want to expose their APIs more broadly within the organization may want to make their APIs available to PowerApps and Microsoft Flow users.</span></span> <span data-ttu-id="48e22-110">Det här avsnittet visas hur du exponera en API som byggts med Azure App Service eller Azure Functions PowerApps och Microsoft Flow.</span><span class="sxs-lookup"><span data-stu-id="48e22-110">This topic will show you how to expose an API built with Azure App Service or Azure Functions to PowerApps and Microsoft Flow.</span></span> <span data-ttu-id="48e22-111">[Azure Apptjänst](https://azure.microsoft.com/services/app-service/) är ett erbjudande för plattform som en tjänst som gör att utvecklare att snabbt och enkelt skapa företagsklass webb-, mobil- och API-program.</span><span class="sxs-lookup"><span data-stu-id="48e22-111">[Azure App Service](https://azure.microsoft.com/services/app-service/) is a platform-as-a-service offering that allows developers to quickly and easily build enterprise-grade web, mobile, and API applications.</span></span> <span data-ttu-id="48e22-112">[Azure Functions](https://azure.microsoft.com/services/functions/) är en händelsebaserat serverlösa beräknings-lösning som gör att du kan snabbt författare kod som kan ta hänsyn till andra delar av systemet och skala baserat på begäran.</span><span class="sxs-lookup"><span data-stu-id="48e22-112">[Azure Functions](https://azure.microsoft.com/services/functions/) is an event-based serverless compute solution that allows you to quickly author code that can react to other parts of your system and scale based on demand.</span></span>

<span data-ttu-id="48e22-113">Mer information om dessa tjänster finns:</span><span class="sxs-lookup"><span data-stu-id="48e22-113">To learn more about these services, see:</span></span>
- [<span data-ttu-id="48e22-114">PowerApps interaktiv utbildning</span><span class="sxs-lookup"><span data-stu-id="48e22-114">PowerApps Guided Learning</span></span>](https://powerapps.microsoft.com/guided-learning/learning-introducing-powerapps/) 
- [<span data-ttu-id="48e22-115">Microsoft flödet interaktiv utbildning</span><span class="sxs-lookup"><span data-stu-id="48e22-115">Microsoft Flow Guided Learning</span></span>](https://flow.microsoft.com/guided-learning/learning-introducing-flow/)
- [<span data-ttu-id="48e22-116">Vad är App Service?</span><span class="sxs-lookup"><span data-stu-id="48e22-116">What is App Service?</span></span>](https://docs.microsoft.com/azure/app-service/app-service-value-prop-what-is)
- [<span data-ttu-id="48e22-117">Vad är Azure Functions</span><span class="sxs-lookup"><span data-stu-id="48e22-117">What is Azure Functions</span></span>](https://docs.microsoft.com/azure/azure-functions/functions-overview)

## <a name="sharing-an-api-definition"></a><span data-ttu-id="48e22-118">Dela en API-definition</span><span class="sxs-lookup"><span data-stu-id="48e22-118">Sharing an API definition</span></span>

<span data-ttu-id="48e22-119">API: er beskrivs ofta med hjälp av en [OpenAPI dokument](https://www.openapis.org/) (kallas ibland ”Swagger”-dokument).</span><span class="sxs-lookup"><span data-stu-id="48e22-119">APIs are often described using an [OpenAPI document](https://www.openapis.org/) (sometimes referred to as a "Swagger" document).</span></span> <span data-ttu-id="48e22-120">Innehåller all information om vilka åtgärder är tillgängliga och hur data ska vara strukturerad.</span><span class="sxs-lookup"><span data-stu-id="48e22-120">This contains all of the information about what operations are available and how the data should be structured.</span></span> <span data-ttu-id="48e22-121">PowerApps och Microsoft Flow kan skapa egna kopplingar för OpenAPI 2.0 dokument.</span><span class="sxs-lookup"><span data-stu-id="48e22-121">PowerApps and Microsoft Flow can create custom connectors for any OpenAPI 2.0 document.</span></span> <span data-ttu-id="48e22-122">När en anpassad koppling har skapats kan användas på exakt samma sätt som en av de inbyggda kopplingarna och snabbt kan integreras i ett program.</span><span class="sxs-lookup"><span data-stu-id="48e22-122">Once a custom connector is created, it can be used in exactly the same way as one of the built-in connectors and can quickly be integrated into an application.</span></span>

<span data-ttu-id="48e22-123">Azure Apptjänst och Azure Functions har [inbyggt stöd](https://docs.microsoft.com/azure/app-service-api/app-service-api-metadata) för att skapa, värd och hantera ett OpenAPI dokument.</span><span class="sxs-lookup"><span data-stu-id="48e22-123">Azure App Service and Azure Functions have [built-in support](https://docs.microsoft.com/azure/app-service-api/app-service-api-metadata) for creating, hosting, and managing an OpenAPI document.</span></span> <span data-ttu-id="48e22-124">För att skapa en anpassad koppling för en webb-, mobil, API eller funktionsapp, PowerApps och flödet måste ges en kopia av definitionen.</span><span class="sxs-lookup"><span data-stu-id="48e22-124">In order to create a custom connector for a web, mobile, API, or function app, PowerApps and Flow need to be given a copy of the definition.</span></span>

> [!NOTE]
> <span data-ttu-id="48e22-125">Eftersom en kopia av API-definitionen används vet PowerApps och Microsoft Flow inte omedelbart om uppdateringar eller viktiga förändringar till programmet.</span><span class="sxs-lookup"><span data-stu-id="48e22-125">Because a copy of the API definition is being used, PowerApps and Microsoft Flow will not immediately know about updates or breaking changes to the application.</span></span> <span data-ttu-id="48e22-126">Om en ny version av API: et är tillgängligt, ska dessa steg upprepas för den nya versionen.</span><span class="sxs-lookup"><span data-stu-id="48e22-126">If a new version of the API is made available, these steps should be repeated for the new version.</span></span> 

<span data-ttu-id="48e22-127">Följ dessa steg för att ge PowerApps och Microsoft Flow värdbaserade API-definitionen för din app måste:</span><span class="sxs-lookup"><span data-stu-id="48e22-127">To provide PowerApps and Microsoft Flow with the hosted API definition for your app, follow these steps:</span></span>

1. <span data-ttu-id="48e22-128">Öppna den [Azure Portal](https://portal.azure.com) och navigera till ditt program med App Service eller Azure Functions.</span><span class="sxs-lookup"><span data-stu-id="48e22-128">Open the [Azure Portal](https://portal.azure.com) and navigate to your App Service or Azure Functions application.</span></span>

    <span data-ttu-id="48e22-129">Om du använder Azure App Service, Välj **API-definition** från inställningslistan över.</span><span class="sxs-lookup"><span data-stu-id="48e22-129">If using Azure App Service, select **API definition** from the settings list.</span></span> 
    
    <span data-ttu-id="48e22-130">Om du använder Azure Functions, Välj appen funktionen och välj sedan **plattformsfunktioner**, och sedan **API-definition**.</span><span class="sxs-lookup"><span data-stu-id="48e22-130">If using Azure Functions, select your function app, and then choose **Platform features**, and then **API definition**.</span></span> <span data-ttu-id="48e22-131">Du kan också välja att öppna den **API-definition (förhandsgranskning)** fliken i stället.</span><span class="sxs-lookup"><span data-stu-id="48e22-131">You could also choose to open the **API definition (preview)** tab instead.</span></span>

2. <span data-ttu-id="48e22-132">Om en API-definition har angetts, visas en **exportera till PowerApps + Microsoft Flow** knappen.</span><span class="sxs-lookup"><span data-stu-id="48e22-132">If an API definition has been provided, you will see an **Export to PowerApps + Microsoft Flow** button.</span></span> <span data-ttu-id="48e22-133">Klicka här om du vill påbörja exporten.</span><span class="sxs-lookup"><span data-stu-id="48e22-133">Click this button to begin the export process.</span></span>

3. <span data-ttu-id="48e22-134">Välj den **exportläge**.</span><span class="sxs-lookup"><span data-stu-id="48e22-134">Select the **Export mode**.</span></span> <span data-ttu-id="48e22-135">Detta avgör steg som du måste följa för att skapa en koppling.</span><span class="sxs-lookup"><span data-stu-id="48e22-135">This determines the steps you will need to follow to create a connector.</span></span> <span data-ttu-id="48e22-136">Apptjänst erbjuder två alternativ för att tillhandahålla PowerApps och Microsoft Flow med din API-definition:</span><span class="sxs-lookup"><span data-stu-id="48e22-136">App Service offers two options for providing PowerApps and Microsoft Flow with your API definition:</span></span>

    <span data-ttu-id="48e22-137">**Express** kan du skapa den anpassade-kopplingen från Azure-portalen.</span><span class="sxs-lookup"><span data-stu-id="48e22-137">**Express** lets you create the custom connector from within the Azure portal.</span></span> <span data-ttu-id="48e22-138">Det kräver att den nuvarande inloggade användaren har behörighet att skapa kopplingar i målmiljön.</span><span class="sxs-lookup"><span data-stu-id="48e22-138">It requires that the curent logged-in user has permission to create connectors in the target environment.</span></span> <span data-ttu-id="48e22-139">Detta är den rekommenderade metoden om detta krav kan uppfyllas.</span><span class="sxs-lookup"><span data-stu-id="48e22-139">This is the recommended approach if that requirement can be met.</span></span> <span data-ttu-id="48e22-140">Om du använder det här läget, följer du de [Express export](#express) anvisningarna nedan.</span><span class="sxs-lookup"><span data-stu-id="48e22-140">If using this mode, follow the [Express export](#express) instructions below.</span></span>

    <span data-ttu-id="48e22-141">**Manuell** kan du exportera en kopia av API-ingår som kan importeras med PowerApps eller Microsoft Flow portaler.</span><span class="sxs-lookup"><span data-stu-id="48e22-141">**Manual** lets you export a copy of the API definiton which can be imported using the PowerApps or Microsoft Flow portals.</span></span> <span data-ttu-id="48e22-142">Detta är den rekommenderade metoden om Azure användare och användare med behörighet att skapa kopplingar är olika personer eller om anslutningen måste skapas i en annan klient.</span><span class="sxs-lookup"><span data-stu-id="48e22-142">This is the recommended approach if the Azure user and the user with permission to create connectors are different people or if the connector needs to be created in another tenant.</span></span> <span data-ttu-id="48e22-143">Om du använder det här läget, följer du de [manuell export och import](#manual) anvisningarna nedan.</span><span class="sxs-lookup"><span data-stu-id="48e22-143">If using this mode, follow the [Manual export and import](#manual) instructions below.</span></span>

<a name="express"></a>
## <a name="express-export"></a><span data-ttu-id="48e22-144">Express export</span><span class="sxs-lookup"><span data-stu-id="48e22-144">Express export</span></span>

<span data-ttu-id="48e22-145">I det här avsnittet skapar du en ny anpassad koppling från i Azure-portalen.</span><span class="sxs-lookup"><span data-stu-id="48e22-145">In this section, you will create a new custom connector from within the Azure portal.</span></span> <span data-ttu-id="48e22-146">Du måste vara inloggad på klienten som du vill exportera och du måste ha behörighet att skapa en anpassad koppling i målmiljön.</span><span class="sxs-lookup"><span data-stu-id="48e22-146">You must be logged into the tenant to which you wish to export, and you must have permission to create a custom connector in the target environment.</span></span>

1. <span data-ttu-id="48e22-147">Välj miljön där du vill skapa kopplingen.</span><span class="sxs-lookup"><span data-stu-id="48e22-147">Select the environment in which you would like to create the connector.</span></span> <span data-ttu-id="48e22-148">Ange sedan ett namn för din anpassade connector.</span><span class="sxs-lookup"><span data-stu-id="48e22-148">Then provide a name for your custom connector.</span></span>

2. <span data-ttu-id="48e22-149">Om din API-definition innehåller alla definitioner för säkerhet, kommer dessa som beskrivs i steg #2.</span><span class="sxs-lookup"><span data-stu-id="48e22-149">If your API definition includes any security definitions, these will be called out in step #2.</span></span> <span data-ttu-id="48e22-150">Om det behövs, tillhandahålla säkerhet konfigurationsinformation som behövs för att bevilja användare åtkomst till ditt API.</span><span class="sxs-lookup"><span data-stu-id="48e22-150">If required, provide the security configuration details needed to grant users access to your API.</span></span> <span data-ttu-id="48e22-151">Mer information finns i [autentisering](#auth) nedan.</span><span class="sxs-lookup"><span data-stu-id="48e22-151">For more information, see [Authentication](#auth) below.</span></span> 

3. <span data-ttu-id="48e22-152">Klicka på **OK** att skapa en anpassad koppling.</span><span class="sxs-lookup"><span data-stu-id="48e22-152">Click **OK** to create your custom connector.</span></span>


<a name="manual"></a>
## <a name="manual-export-and-import"></a><span data-ttu-id="48e22-153">Manuell export och import</span><span class="sxs-lookup"><span data-stu-id="48e22-153">Manual export and import</span></span>

<span data-ttu-id="48e22-154">Två steg krävs för att skapa en anpassad koppling för en webb-, mobil, API eller funktionsapp:</span><span class="sxs-lookup"><span data-stu-id="48e22-154">In order to create a custom connector for a web, mobile, API, or function app, two steps will be needed:</span></span>

1. [<span data-ttu-id="48e22-155">Hämta API-definitionen från Apptjänst eller Azure Functions</span><span class="sxs-lookup"><span data-stu-id="48e22-155">Retrieving the API definition from App Service or Azure Functions</span></span>](#export)
2. [<span data-ttu-id="48e22-156">Importerar en API-definition i PowerApps och Microsoft Flow</span><span class="sxs-lookup"><span data-stu-id="48e22-156">Importing the API definition into PowerApps and Microsoft Flow</span></span>](#import)

<span data-ttu-id="48e22-157">Det är möjligt att dessa två steg måste utföras av separata enskilda användare i en organisation som en viss användare inte kanske har behörighet att utföra både åtgärder.</span><span class="sxs-lookup"><span data-stu-id="48e22-157">It is possible that these two steps will need to be carried out by separate individuals within an organization, as a given user may not have permission to perform both actions.</span></span> <span data-ttu-id="48e22-158">I detta fall kan måste en utvecklare som har deltagare åtkomst till programmet Apptjänst eller Azure Functions du hämta API-definition (en enda JSON-fil) eller en länk till den.</span><span class="sxs-lookup"><span data-stu-id="48e22-158">In this case, a developer who has contributor access to the App Service or Azure Functions application will need to obtain the API definition (a single JSON file) or a link to it.</span></span> <span data-ttu-id="48e22-159">De måste sedan att tillhandahålla den definitionen för en PowerApps eller Microsoft Flow ägare.</span><span class="sxs-lookup"><span data-stu-id="48e22-159">They will then need to provide that definition to a PowerApps or Microsoft Flow owner.</span></span> <span data-ttu-id="48e22-160">Som ägare kan använda metadata för att skapa anpassade kopplingen.</span><span class="sxs-lookup"><span data-stu-id="48e22-160">That owner can use the metadata to create the custom connector.</span></span>

<a name="export"></a>
### <a name="retrieving-the-api-definition-from-app-service-or-azure-functions"></a><span data-ttu-id="48e22-161">Hämta API-definitionen från Apptjänst eller Azure Functions</span><span class="sxs-lookup"><span data-stu-id="48e22-161">Retrieving the API definition from App Service or Azure Functions</span></span>

<span data-ttu-id="48e22-162">I det här avsnittet ska du exportera API-definitionen för din App Service-API, som ska användas senare i PowerApps eller Microsoft Flow-portalen.</span><span class="sxs-lookup"><span data-stu-id="48e22-162">In this section, you will export the API definition for your App Service API, to be used later in the PowerApps or Microsoft Flow portal.</span></span>

1. <span data-ttu-id="48e22-163">Du kan välja att antingen **hämta API-definition** eller **hämta en länk**.</span><span class="sxs-lookup"><span data-stu-id="48e22-163">You can choose to either **Download the API definition** or **Get a link**.</span></span> <span data-ttu-id="48e22-164">Beroende på vilket som du använder, resultatet anges i nästa avsnitt.</span><span class="sxs-lookup"><span data-stu-id="48e22-164">Whichever you choose, the result will be provided in the next section.</span></span> <span data-ttu-id="48e22-165">Välj något av följande alternativ och följ instruktionerna.</span><span class="sxs-lookup"><span data-stu-id="48e22-165">Select one of these options and follow the instructions.</span></span>
 
2. <span data-ttu-id="48e22-166">Om din API-definition innehåller alla definitioner för säkerhet, kommer dessa som beskrivs i steg #2.</span><span class="sxs-lookup"><span data-stu-id="48e22-166">If your API definition includes any security definitions, these will be called out in step #2.</span></span> <span data-ttu-id="48e22-167">Under importen, PowerApps och Microsoft Flow identifierar dessa och uppmanar säkerhetsinformation.</span><span class="sxs-lookup"><span data-stu-id="48e22-167">During import, PowerApps and Microsoft Flow will detect these and will prompt for security information.</span></span> <span data-ttu-id="48e22-168">Samla in de autentiseringsuppgifter som rör varje definition för användning i nästa avsnitt.</span><span class="sxs-lookup"><span data-stu-id="48e22-168">Gather the credentials related to each definition for use in the next section.</span></span> <span data-ttu-id="48e22-169">Mer information finns i [autentisering](#auth) nedan.</span><span class="sxs-lookup"><span data-stu-id="48e22-169">For more information, see [Authentication](#auth) below.</span></span> 

<a name="import"></a>
### <a name="importing-the-api-definition-into-powerapps-and-microsoft-flow"></a><span data-ttu-id="48e22-170">Importerar en API-definition i PowerApps och Microsoft Flow</span><span class="sxs-lookup"><span data-stu-id="48e22-170">Importing the API definition into PowerApps and Microsoft Flow</span></span>

<span data-ttu-id="48e22-171">I det här avsnittet skapar du en anpassad koppling i PowerApps och Microsoft Flow använder tidigare hämtade API-definitionen.</span><span class="sxs-lookup"><span data-stu-id="48e22-171">In this section, you will create a custom connector in PowerApps and Microsoft Flow using the API definition obtained earlier.</span></span> <span data-ttu-id="48e22-172">Anpassade kopplingar delas mellan de två tjänsterna, så du behöver bara importera definition en gång.</span><span class="sxs-lookup"><span data-stu-id="48e22-172">Custom connectors are shared between the two services, so you only need to import the definition once.</span></span> <span data-ttu-id="48e22-173">Mer information om anpassade kopplingar finns [registrera och använda anpassade kopplingar i PowerApps] och [registrera och använda anpassade kopplingar i Microsoft Flow].</span><span class="sxs-lookup"><span data-stu-id="48e22-173">For more information on custom connectors, see [Register and use custom connectors in PowerApps] and [Register and use custom connectors in Microsoft Flow].</span></span>

1. <span data-ttu-id="48e22-174">Öppna den [Powerapps webbportalen](https://web.powerapps.com) eller [Microsoft Flow webbportalen](https://flow.microsoft.com/), och logga in.</span><span class="sxs-lookup"><span data-stu-id="48e22-174">Open the [Powerapps web portal](https://web.powerapps.com) or the [Microsoft Flow web portal](https://flow.microsoft.com/), and sign in.</span></span> 

2. <span data-ttu-id="48e22-175">Klicka på den **inställningar** knappen (kugghjulsikonen) längst upp till höger på sidan och välj **anpassade kopplingar**.</span><span class="sxs-lookup"><span data-stu-id="48e22-175">Click the **Settings** button (the gear icon) at the upper right of the page and select **Custom connectors**.</span></span> 

3. <span data-ttu-id="48e22-176">Klicka på **Skapa anpassad koppling**.</span><span class="sxs-lookup"><span data-stu-id="48e22-176">Click **Create custom connector**.</span></span>

4. <span data-ttu-id="48e22-177">På den **allmänna** fliken, ange ett namn för din API och sedan ladda upp OpenAPI definition eller klistra in i metadata-URL.</span><span class="sxs-lookup"><span data-stu-id="48e22-177">On the **General** tab, provide a name for your API, and then upload the OpenAPI definition or paste in the metadata URL.</span></span> <span data-ttu-id="48e22-178">Klicka på **fortsätta**.</span><span class="sxs-lookup"><span data-stu-id="48e22-178">Click **Continue**.</span></span>

4. <span data-ttu-id="48e22-179">På den **säkerhet** om du uppmanas att ange information om autentisering, anger du värden som hämtades i föregående avsnitt.</span><span class="sxs-lookup"><span data-stu-id="48e22-179">On the **Security** tab, if you are prompted to provide authentication details, enter the values obtained in the previous section.</span></span> <span data-ttu-id="48e22-180">Om inte, gå vidare till nästa steg.</span><span class="sxs-lookup"><span data-stu-id="48e22-180">If not, proceed to the next step.</span></span>

5. <span data-ttu-id="48e22-181">På den **definitioner** fliken alla åtgärder som definierats i filen OpenAPI är fylls i automatiskt.</span><span class="sxs-lookup"><span data-stu-id="48e22-181">On the **Definitions** tab, all the operations defined in your OpenAPI file are auto-populated.</span></span> <span data-ttu-id="48e22-182">Om alla nödvändiga åtgärder har definierats kan gå du till nästa steg.</span><span class="sxs-lookup"><span data-stu-id="48e22-182">If all your required operations are defined, you can go to the next step.</span></span> <span data-ttu-id="48e22-183">Om inte, kan du lägga till och ändra operations här.</span><span class="sxs-lookup"><span data-stu-id="48e22-183">If not, you can add and modify operations here.</span></span>

6. <span data-ttu-id="48e22-184">Klicka på **skapa koppling**.</span><span class="sxs-lookup"><span data-stu-id="48e22-184">Click **Create connector**.</span></span> <span data-ttu-id="48e22-185">Om du vill testa API-anrop, går du till nästa steg.</span><span class="sxs-lookup"><span data-stu-id="48e22-185">If you want to test API calls, go to the next step.</span></span>

7. <span data-ttu-id="48e22-186">På den **testa** fliken, skapa en anslutning, Välj en åtgärd för att testa och ange några data som krävs för åtgärden.</span><span class="sxs-lookup"><span data-stu-id="48e22-186">On the **Test** tab, create a connection, select an operation to test, and enter any data required by the operation.</span></span>

8. <span data-ttu-id="48e22-187">Klicka på **testa åtgärden**.</span><span class="sxs-lookup"><span data-stu-id="48e22-187">Click **Test operation**.</span></span>


<a name="auth"></a>
## <a name="authentication"></a><span data-ttu-id="48e22-188">Autentisering</span><span class="sxs-lookup"><span data-stu-id="48e22-188">Authentication</span></span>

<span data-ttu-id="48e22-189">PowerApps och Microsoft Flow stöd inbyggt för en samling identitetsleverantörer som kan användas för att logga in användare av en anpassad koppling.</span><span class="sxs-lookup"><span data-stu-id="48e22-189">PowerApps and Microsoft Flow natively support a collection of identity providers which can be used to log in users of your custom connector.</span></span> <span data-ttu-id="48e22-190">Om din API kräver autentisering, kontrollera att den avbildas som en _säkerhet definition_ i dokumentet OpenAPI.</span><span class="sxs-lookup"><span data-stu-id="48e22-190">If your API requires authentication, ensure that it is captured as a _security definition_ in your OpenAPI document.</span></span> <span data-ttu-id="48e22-191">Under exporten behöver du ange konfigurationsvärden som tillåter PowerApps ett Microsoft-Flow att utföra åtgärder för inloggning.</span><span class="sxs-lookup"><span data-stu-id="48e22-191">During export, you will need to provide configuration values that allow PowerApps an Microsoft Flow to perform login actions.</span></span>

<span data-ttu-id="48e22-192">Det här avsnittet beskriver de autentiseringstyper som stöds av express flödet: API-nyckel, Azure Active Directory och allmänna OAuth 2.0.</span><span class="sxs-lookup"><span data-stu-id="48e22-192">This section covers the authentication types which are supported by the express flow: API key, Azure Active Directory, and Generic OAuth 2.0.</span></span> <span data-ttu-id="48e22-193">En fullständig lista över leverantörer och autentiseringsuppgifterna varje kräver finns [registrera och använda anpassade kopplingar i PowerApps] och [registrera och använda anpassade kopplingar i Microsoft Flow].</span><span class="sxs-lookup"><span data-stu-id="48e22-193">For a complete list of providers and the credentials each requires, see [Register and use custom connectors in PowerApps] and [Register and use custom connectors in Microsoft Flow].</span></span>

### <a name="api-key"></a><span data-ttu-id="48e22-194">API-nyckel</span><span class="sxs-lookup"><span data-stu-id="48e22-194">API key</span></span>
<span data-ttu-id="48e22-195">När detta säkerhetsprogram används uppmanas användare anslutningstjänsten att ange nyckeln när de skapar en anslutning.</span><span class="sxs-lookup"><span data-stu-id="48e22-195">When this security scheme is used, the users of your connector will be prompted to provide the key when they create a connection.</span></span> <span data-ttu-id="48e22-196">Du kan ange en API-nyckelnamn så att de vet vilken nyckel krävs.</span><span class="sxs-lookup"><span data-stu-id="48e22-196">You can provide an API key name to help them know which key is needed.</span></span> <span data-ttu-id="48e22-197">För Azure Functions, kommer det vanligtvis vara något av värdnycklar, som omfattar flera funktioner i appen funktionen.</span><span class="sxs-lookup"><span data-stu-id="48e22-197">For Azure Functions, this will typically be one of the host keys, covering several functions within the function app.</span></span>

### <a name="azure-active-directory"></a><span data-ttu-id="48e22-198">Azure Active Directory</span><span class="sxs-lookup"><span data-stu-id="48e22-198">Azure Active Directory</span></span>
<span data-ttu-id="48e22-199">När du konfigurerar en anpassad koppling som kräver AAD inloggning krävs två registreringar för AAD-program: en att modellera serverdelen API och en modellera kopplingen i PowerApps och flöde.</span><span class="sxs-lookup"><span data-stu-id="48e22-199">When configuring a custom connector that requires AAD login, two AAD application registrations are required: one to model the backend API, and one to model the connector in PowerApps and Flow.</span></span>

<span data-ttu-id="48e22-200">Din API ska konfigureras för att fungera med den första registreringen och detta kommer redan typen om du har använt den [autentisering/auktorisering i Apptjänst](https://docs.microsoft.com/azure/app-service-mobile/app-service-mobile-how-to-configure-active-directory-authentication) funktion.</span><span class="sxs-lookup"><span data-stu-id="48e22-200">Your API should be configured to work with the first registration, and this will already be taken care of if you used the [App Service Authentication/Authorization](https://docs.microsoft.com/azure/app-service-mobile/app-service-mobile-how-to-configure-active-directory-authentication) feature.</span></span>

<span data-ttu-id="48e22-201">Du måste manuellt skapa andra registreringen för anslutningstjänsten, med hjälp av stegen som beskrivs i [lägga till ett AAD-program](https://docs.microsoft.com/azure/active-directory/develop/active-directory-integrating-applications#adding-an-application).</span><span class="sxs-lookup"><span data-stu-id="48e22-201">You will have to manually create the second registration for the connector, using the steps covered in [Adding an AAD application](https://docs.microsoft.com/azure/active-directory/develop/active-directory-integrating-applications#adding-an-application).</span></span> <span data-ttu-id="48e22-202">Registreringen måste ha delegerad åtkomst till ditt API och svars-URL: en `https://msmanaged-na.consent.azure-apim.net/redirect`.</span><span class="sxs-lookup"><span data-stu-id="48e22-202">The registration needs to have delegated access to your API and a reply URL of `https://msmanaged-na.consent.azure-apim.net/redirect`.</span></span> <span data-ttu-id="48e22-203">Se [det här exemplet](
https://powerapps.microsoft.com/tutorials/customapi-azure-resource-manager-tutorial/) ersätta ditt API för Azure Resource Manager för mer information.</span><span class="sxs-lookup"><span data-stu-id="48e22-203">Please see [this example](
https://powerapps.microsoft.com/tutorials/customapi-azure-resource-manager-tutorial/) for more detail, substituting your API for the Azure Resource Manager.</span></span>

<span data-ttu-id="48e22-204">Följande konfigurationsvärden krävs:</span><span class="sxs-lookup"><span data-stu-id="48e22-204">The following configuration values are required:</span></span>
- <span data-ttu-id="48e22-205">**Klient-ID** -klient-ID anslutningstjänsten AAD-registrering</span><span class="sxs-lookup"><span data-stu-id="48e22-205">**Client ID** - the client ID of your connector AAD registration</span></span>
- <span data-ttu-id="48e22-206">**Klienthemlighet** -klienthemlighet anslutningstjänsten AAD-registrering</span><span class="sxs-lookup"><span data-stu-id="48e22-206">**Client secret** - the client secret of your connector AAD registration</span></span>
- <span data-ttu-id="48e22-207">**Inloggnings-URL** -bas-URL för AAD.</span><span class="sxs-lookup"><span data-stu-id="48e22-207">**Login URL** - the base URL for AAD.</span></span> <span data-ttu-id="48e22-208">I offentliga Azure detta vanligtvis blir `https://login.windows.net`.</span><span class="sxs-lookup"><span data-stu-id="48e22-208">In public Azure, this will typically be `https://login.windows.net`.</span></span>
- <span data-ttu-id="48e22-209">**Klient-ID** -ID för innehavaren som ska användas för inloggningen.</span><span class="sxs-lookup"><span data-stu-id="48e22-209">**Tenant ID** - the ID of the tenant to be used for the login.</span></span> <span data-ttu-id="48e22-210">Detta bör vara ”vanliga” eller ID för innehavaren som anslutningen skapas.</span><span class="sxs-lookup"><span data-stu-id="48e22-210">This should be "common" or the ID of the tenant in which the connector is being created.</span></span>
- <span data-ttu-id="48e22-211">**Resurs-URL** -resurs-URL för API-serverdel AAD registreringen</span><span class="sxs-lookup"><span data-stu-id="48e22-211">**Resource URL** - the resource URL of your API backend AAD registration</span></span>

> [!IMPORTANT]
> <span data-ttu-id="48e22-212">Om en annan person importerar API-definition i PowerApps och Microsoft Flow som en del av manuell flödet, behöver du förser dem med klient-ID och klienthemlighet **av registreringen av anslutningsverktyget**, samt resurs-URL för ditt API.</span><span class="sxs-lookup"><span data-stu-id="48e22-212">If another individual will be importing the API definition into PowerApps and Microsoft Flow as part of the manual flow, you will need to provide them with the client ID and client secret **of the connector registration**, as well as the resource URL of your API.</span></span> <span data-ttu-id="48e22-213">Se till att dessa hemligheter hanteras på ett säkert sätt.</span><span class="sxs-lookup"><span data-stu-id="48e22-213">Make sure that these secrets are managed securely.</span></span> <span data-ttu-id="48e22-214">**Dela inte säkerhetsreferenser för API: et sig själv.**</span><span class="sxs-lookup"><span data-stu-id="48e22-214">**Do not share the security credentials of the API itself.**</span></span>

### <a name="generic-oauth-20"></a><span data-ttu-id="48e22-215">Allmän OAuth 2.0</span><span class="sxs-lookup"><span data-stu-id="48e22-215">Generic OAuth 2.0</span></span>
<span data-ttu-id="48e22-216">Allmänna OAuth 2.0-stöd kan du integrera med valfri OAuth 2.0-provider.</span><span class="sxs-lookup"><span data-stu-id="48e22-216">The generic OAuth 2.0 support allows you to integrate with any OAuth 2.0 provider.</span></span> <span data-ttu-id="48e22-217">På så sätt kan du se till att i en anpassad provider som inte stöds internt.</span><span class="sxs-lookup"><span data-stu-id="48e22-217">This allows you to bring in any custom provider which is not natively supported.</span></span>

<span data-ttu-id="48e22-218">Följande konfigurationsvärden krävs:</span><span class="sxs-lookup"><span data-stu-id="48e22-218">The following configuration values are required:</span></span>
- <span data-ttu-id="48e22-219">**Klient-ID** -OAuth 2.0-klient-ID</span><span class="sxs-lookup"><span data-stu-id="48e22-219">**Client ID** - the OAuth 2.0 client ID</span></span>
- <span data-ttu-id="48e22-220">**Klienthemlighet** -klienthemlighet OAuth 2.0</span><span class="sxs-lookup"><span data-stu-id="48e22-220">**Client secret** - the OAuth 2.0 client secret</span></span>
- <span data-ttu-id="48e22-221">**Webbadress för auktorisering** -Webbadress för OAuth 2.0-auktorisering</span><span class="sxs-lookup"><span data-stu-id="48e22-221">**Authorization URL** - the OAuth 2.0 authorization URL</span></span>
- <span data-ttu-id="48e22-222">**Token URL** -URL för OAuth 2.0-token</span><span class="sxs-lookup"><span data-stu-id="48e22-222">**Token URL** - the OAuth 2.0 token URL</span></span>
- <span data-ttu-id="48e22-223">**Uppdatera URL** -URL för OAuth 2.0-uppdatering</span><span class="sxs-lookup"><span data-stu-id="48e22-223">**Refresh URL** - the OAuth 2.0 refresh URL</span></span>



<span data-ttu-id="48e22-224">[registrera och använda anpassade kopplingar i PowerApps]: https://powerapps.microsoft.com/tutorials/register-custom-api/</span><span class="sxs-lookup"><span data-stu-id="48e22-224">[Register and use custom connectors in PowerApps]: https://powerapps.microsoft.com/tutorials/register-custom-api/</span></span>
<span data-ttu-id="48e22-225">[registrera och använda anpassade kopplingar i Microsoft Flow]: https://flow.microsoft.com/documentation/register-custom-api/</span><span class="sxs-lookup"><span data-stu-id="48e22-225">[Register and use custom connectors in Microsoft Flow]: https://flow.microsoft.com/documentation/register-custom-api/</span></span>

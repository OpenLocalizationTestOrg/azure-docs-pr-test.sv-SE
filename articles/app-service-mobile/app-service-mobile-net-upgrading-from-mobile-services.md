---
title: "aaaUpgrade från Mobile Services tooAzure Apptjänst"
description: "Lär dig hur tooeasily uppgradera din Mobile Services programmet tooan Apptjänst Mobile App"
services: app-service\mobile
documentationcenter: 
author: ggailey777
manager: syntaxc4
editor: 
ms.assetid: 9c0ac353-afb6-462b-ab94-d91b8247322f
ms.service: app-service-mobile
ms.workload: mobile
ms.tgt_pltfrm: mobile
ms.devlang: dotnet
ms.topic: article
ms.date: 10/01/2016
ms.author: glenga
ms.openlocfilehash: 2b75a1b824e8ef0d36c9053f2f19af051479f928
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: sv-SE
ms.lasthandoff: 10/06/2017
---
# <a name="upgrade-your-existing-net-azure-mobile-service-tooapp-service"></a><span data-ttu-id="edc4d-103">Uppgradera din befintliga Mobiltjänst med Azure .NET tooApp Service</span><span class="sxs-lookup"><span data-stu-id="edc4d-103">Upgrade your existing .NET Azure Mobile Service tooApp Service</span></span>
<span data-ttu-id="edc4d-104">Apptjänst Mobile är ett nytt sätt toobuild mobila program med Microsoft Azure.</span><span class="sxs-lookup"><span data-stu-id="edc4d-104">App Service Mobile is a new way toobuild mobile applications using Microsoft Azure.</span></span> <span data-ttu-id="edc4d-105">Det finns fler toolearn [vad är Mobilappar?].</span><span class="sxs-lookup"><span data-stu-id="edc4d-105">toolearn more, see [What are Mobile Apps?].</span></span>

<span data-ttu-id="edc4d-106">Det här avsnittet beskrivs hur tooupgrade ett befintligt .NET-serverdel program från Azure Mobile Services tooa nya Mobile Apps i Apptjänst.</span><span class="sxs-lookup"><span data-stu-id="edc4d-106">This topic describes how tooupgrade an existing .NET backend application from Azure Mobile Services tooa new App Service Mobile Apps.</span></span> <span data-ttu-id="edc4d-107">Befintliga Mobile Services programmet kan fortsätta toooperate medan du utför uppgraderingen.</span><span class="sxs-lookup"><span data-stu-id="edc4d-107">While you perform this upgrade, your existing Mobile Services application can continue toooperate.</span></span>   <span data-ttu-id="edc4d-108">Om du behöver tooupgrade ett Node.js-serverdel program, se för[uppgraderar din Mobile Services för Node.js](app-service-mobile-node-backend-upgrading-from-mobile-services.md).</span><span class="sxs-lookup"><span data-stu-id="edc4d-108">If you need tooupgrade a Node.js backend application, refer too[Upgrading your Node.js Mobile Services](app-service-mobile-node-backend-upgrading-from-mobile-services.md).</span></span>

<span data-ttu-id="edc4d-109">När en mobilserverdel är uppgraderade tooAzure Apptjänst, har den åtkomst tooall App Service-funktionerna och är debiteras enligt för[priser för Apptjänst], inte Mobile Services priser.</span><span class="sxs-lookup"><span data-stu-id="edc4d-109">When a mobile backend is upgraded tooAzure App Service, it has access tooall App Service features and are billed according too[App Service pricing], not Mobile Services pricing.</span></span>

## <a name="migrate-vs-upgrade"></a><span data-ttu-id="edc4d-110">Migrera kontra uppgradering</span><span class="sxs-lookup"><span data-stu-id="edc4d-110">Migrate vs. upgrade</span></span>
[!INCLUDE [app-service-mobile-migrate-vs-upgrade](../../includes/app-service-mobile-migrate-vs-upgrade.md)]

> [!TIP]
> <span data-ttu-id="edc4d-111">Vi rekommenderar att du [utför en migrering](app-service-mobile-migrating-from-mobile-services.md) innan du fortsätter med uppgraderingen.</span><span class="sxs-lookup"><span data-stu-id="edc4d-111">It is recommended that you [perform a migration](app-service-mobile-migrating-from-mobile-services.md) before going through an upgrade.</span></span> <span data-ttu-id="edc4d-112">På så sätt kan du placera båda versionerna av programmet hello samma App Service-Plan och innebära utan extra kostnad.</span><span class="sxs-lookup"><span data-stu-id="edc4d-112">This way, you can put both versions of your application on hello same App Service Plan and incur no additional cost.</span></span>
>
>

### <a name="improvements-in-mobile-apps-net-server-sdk"></a><span data-ttu-id="edc4d-113">Förbättringar i Mobile Apps .NET server SDK</span><span class="sxs-lookup"><span data-stu-id="edc4d-113">Improvements in Mobile Apps .NET server SDK</span></span>
<span data-ttu-id="edc4d-114">Uppgradera toohello nya [Mobile Apps-SDK](https://www.nuget.org/packages/Microsoft.Azure.Mobile.Server/) ger hello följande fördelar:</span><span class="sxs-lookup"><span data-stu-id="edc4d-114">Upgrading toohello new [Mobile Apps SDK](https://www.nuget.org/packages/Microsoft.Azure.Mobile.Server/) provides hello following benefits:</span></span>

* <span data-ttu-id="edc4d-115">Större flexibilitet på NuGet-beroenden.</span><span class="sxs-lookup"><span data-stu-id="edc4d-115">More flexibility on NuGet dependencies.</span></span> <span data-ttu-id="edc4d-116">hello värdmiljön inte längre innehåller sina egna versioner av NuGet-paket, så du kan använda alternativa kompatibla versioner.</span><span class="sxs-lookup"><span data-stu-id="edc4d-116">hello hosting environment no longer provides its own versions of NuGet packages, so you can use alternative compatible versions.</span></span> <span data-ttu-id="edc4d-117">Om det finns nya kritiska bugfixes eller säkerhet uppdateringar toohello Mobile Server SDK eller beroenden, måste du uppdatera tjänsten manuellt.</span><span class="sxs-lookup"><span data-stu-id="edc4d-117">However, if there are new critical bugfixes or security updates toohello Mobile Server SDK or dependencies, you must update your service manually.</span></span>
* <span data-ttu-id="edc4d-118">Större flexibilitet hello mobila SDK.</span><span class="sxs-lookup"><span data-stu-id="edc4d-118">More flexibility in hello mobile SDK.</span></span> <span data-ttu-id="edc4d-119">Du explicit kan styra vilka funktioner och vägar har ställts in, till exempel autentisering, tabell API: er, och hello push registrering slutpunkt.</span><span class="sxs-lookup"><span data-stu-id="edc4d-119">You can explicitly control which features and routes are set up, such as authentication, table APIs, and hello push registration endpoint.</span></span> <span data-ttu-id="edc4d-120">Det finns fler toolearn [hur toouse hello server-.NET SDK för Azure Mobile Apps](app-service-mobile-dotnet-backend-how-to-use-server-sdk.md).</span><span class="sxs-lookup"><span data-stu-id="edc4d-120">toolearn more, see [How toouse hello .NET server SDK for Azure Mobile Apps](app-service-mobile-dotnet-backend-how-to-use-server-sdk.md).</span></span>
* <span data-ttu-id="edc4d-121">Stöd för andra typer av ASP.NET-projekt och flöden.</span><span class="sxs-lookup"><span data-stu-id="edc4d-121">Support for other ASP.NET project types and routes.</span></span> <span data-ttu-id="edc4d-122">Du kan nu värd MVC och Web API domänkontrollanter i samma projekt hello som projektet mobila serverdel.</span><span class="sxs-lookup"><span data-stu-id="edc4d-122">You can now host MVC and Web API controllers in hello same project as your mobile backend project.</span></span>
* <span data-ttu-id="edc4d-123">Stöd för nya App Service autentiseringsfunktioner, som gör att du toouse en vanlig Autentiseringskonfiguration mellan webb- och mobilappar.</span><span class="sxs-lookup"><span data-stu-id="edc4d-123">Support for new App Service authentication features, which allow you toouse a common authentication configuration across your web and mobile apps.</span></span>

## <span data-ttu-id="edc4d-124"><a name="overview"></a>Uppgradera översikt</span><span class="sxs-lookup"><span data-stu-id="edc4d-124"><a name="overview"></a>Basic upgrade overview</span></span>
<span data-ttu-id="edc4d-125">I många fall blir uppgraderar enkelt växla toohello nya Mobile Apps server-SDK och publicera din kod till en ny instans för Mobilapp.</span><span class="sxs-lookup"><span data-stu-id="edc4d-125">In many cases, upgrading will be as simple as switching toohello new Mobile Apps server SDK and republishing your code onto a new Mobile App instance.</span></span> <span data-ttu-id="edc4d-126">Det finns dock några scenarier som kräver ytterligare konfigurering, till exempel scenarier med avancerad autentisering och arbeta med schemalagda jobb.</span><span class="sxs-lookup"><span data-stu-id="edc4d-126">There are, however some scenarios which will require some additional configuration, such as advanced authentication scenarios and working with scheduled jobs.</span></span> <span data-ttu-id="edc4d-127">Var och en av dessa beskrivs i hello senare avsnitt.</span><span class="sxs-lookup"><span data-stu-id="edc4d-127">Each of these is covered in hello later sections.</span></span>

> [!TIP]
> <span data-ttu-id="edc4d-128">Det rekommenderas att du läser och förstå hello resten av det här avsnittet helt innan du påbörjar en uppgradering.</span><span class="sxs-lookup"><span data-stu-id="edc4d-128">It is advised that you read and understand hello rest of this topic completely before starting an upgrade.</span></span> <span data-ttu-id="edc4d-129">Anteckna alla funktioner som du använder som kallas nedan.</span><span class="sxs-lookup"><span data-stu-id="edc4d-129">Make note of any features you use which are called out below.</span></span>
>
>

<span data-ttu-id="edc4d-130">hello Mobile Services-klienten SDK: er **inte** kompatibel med hello ny Mobile Apps server SDK.</span><span class="sxs-lookup"><span data-stu-id="edc4d-130">hello Mobile Services client SDKs are **not** compatible with hello new Mobile Apps server SDK.</span></span> <span data-ttu-id="edc4d-131">I ordning tooprovide tjänstens stabilitet för din app, bör du inte publicera ändringar tooa plats som betjänar publicerade klienter.</span><span class="sxs-lookup"><span data-stu-id="edc4d-131">In order tooprovide continuity of service for your app, you should not publish changes tooa site currently serving published clients.</span></span> <span data-ttu-id="edc4d-132">I stället bör du skapa en ny mobil app som fungerar som en dubblett.</span><span class="sxs-lookup"><span data-stu-id="edc4d-132">Instead, you should create a new mobile app that serves as a duplicate.</span></span> <span data-ttu-id="edc4d-133">Du kan publicera programmet hello samma Apptjänst planerar tooavoid medför ytterligare kostnader.</span><span class="sxs-lookup"><span data-stu-id="edc4d-133">You can put this application on hello same App Service plan tooavoid incurring additional financial cost.</span></span>

<span data-ttu-id="edc4d-134">Du måste sedan två versioner av programmet hello: en som förblir hello samma och hanterar publicerade appar i hello vilda och hello andra som du kan sedan uppgradera och mål med en ny klientversion.</span><span class="sxs-lookup"><span data-stu-id="edc4d-134">You will then have two versions of hello application: one which stays hello same and serves published apps in hello wild, and hello other which you can then upgrade and target with a new client release.</span></span> <span data-ttu-id="edc4d-135">Du kan flytta och testa din kod i din takt, men du bör se till att alla felkorrigeringar du komma tillämpade tooboth.</span><span class="sxs-lookup"><span data-stu-id="edc4d-135">You can move and test your code at your pace, but you should make sure that any bug fixes you make get applied tooboth.</span></span> <span data-ttu-id="edc4d-136">När du anser att ett önskat antal klientprogram i hello vilda har uppdaterat toohello senaste versionen, ta bort hello ursprungliga migrerade appen om du vill ha.</span><span class="sxs-lookup"><span data-stu-id="edc4d-136">Once you feel that a desired number of client apps in hello wild have updated toohello latest version, you can delete hello original migrated app if you desire.</span></span>

<span data-ttu-id="edc4d-137">hello fullständig disposition för hello uppgraderingsprocessen är följande:</span><span class="sxs-lookup"><span data-stu-id="edc4d-137">hello full outline for hello upgrade process is as follows:</span></span>

1. <span data-ttu-id="edc4d-138">Skapa en ny Mobile App</span><span class="sxs-lookup"><span data-stu-id="edc4d-138">Create a new Mobile App</span></span>
2. <span data-ttu-id="edc4d-139">Uppdatera hello projektet toouse hello nya Server-SDK</span><span class="sxs-lookup"><span data-stu-id="edc4d-139">Update hello project toouse hello new Server SDKs</span></span>
3. <span data-ttu-id="edc4d-140">Använda en ny version av klientprogrammet</span><span class="sxs-lookup"><span data-stu-id="edc4d-140">Release a new version of your client application</span></span>
4. <span data-ttu-id="edc4d-141">(Valfritt) Ta bort din ursprungliga migrerade instans</span><span class="sxs-lookup"><span data-stu-id="edc4d-141">(Optional) Delete your original migrated instance</span></span>

## <span data-ttu-id="edc4d-142"><a name="mobile-app-version"></a>Skapa en andra instans av programmet</span><span class="sxs-lookup"><span data-stu-id="edc4d-142"><a name="mobile-app-version"></a>Creating a second application instance</span></span>
<span data-ttu-id="edc4d-143">hello är första steget när du uppgraderar toocreate hello Mobilapp resurs som ska vara värd för hello ny version av programmet.</span><span class="sxs-lookup"><span data-stu-id="edc4d-143">hello first step in upgrading is toocreate hello Mobile App resource which will host hello new version of your application.</span></span> <span data-ttu-id="edc4d-144">Om du redan har migrerat en befintlig mobila tjänst du vill toocreate den här versionen på hello samma plan som värd.</span><span class="sxs-lookup"><span data-stu-id="edc4d-144">If you have already migrated an existing mobile service, you will want toocreate this version on hello same hosting plan.</span></span> <span data-ttu-id="edc4d-145">Öppna hello [Azure-portalen] och navigera tooyour migrerat program.</span><span class="sxs-lookup"><span data-stu-id="edc4d-145">Open hello [Azure portal] and navigate tooyour migrated application.</span></span> <span data-ttu-id="edc4d-146">Anteckna hello Apptjänstplan den körs på.</span><span class="sxs-lookup"><span data-stu-id="edc4d-146">Make note of hello App Service Plan it is running on.</span></span>

<span data-ttu-id="edc4d-147">Skapa sedan programmet hello instans av följande hello [.NET-serverdel skapa instruktioner](app-service-mobile-dotnet-backend-how-to-use-server-sdk.md#create-app).</span><span class="sxs-lookup"><span data-stu-id="edc4d-147">Next, create hello second application instance by following hello [.NET backend creation instructions](app-service-mobile-dotnet-backend-how-to-use-server-sdk.md#create-app).</span></span> <span data-ttu-id="edc4d-148">Ange tooselect väljer du App Service-Plan eller ”värd plan” Hej när planen för migrerade programmet.</span><span class="sxs-lookup"><span data-stu-id="edc4d-148">When prompted tooselect you App Service Plan or "hosting plan" choose hello plan of your migrated application.</span></span>

<span data-ttu-id="edc4d-149">Vill du förmodligen toouse hello samma databas och Meddelandehubben som du gjorde i Mobile Services.</span><span class="sxs-lookup"><span data-stu-id="edc4d-149">You will likely want toouse hello same database and Notification Hub as you did in Mobile Services.</span></span> <span data-ttu-id="edc4d-150">Du kan kopiera värdena genom att öppna [Azure-portalen] och sedan navigera toohello ursprungliga programmet på **inställningar** > **programinställningar**.</span><span class="sxs-lookup"><span data-stu-id="edc4d-150">You can copy these values by opening [Azure portal] and navigating toohello original application, then click **Settings** > **Application settings**.</span></span> <span data-ttu-id="edc4d-151">Under **anslutningssträngar**, kopiera `MS_NotificationHubConnectionString` och `MS_TableConnectionString`.</span><span class="sxs-lookup"><span data-stu-id="edc4d-151">Under **Connection Strings**, copy `MS_NotificationHubConnectionString` and `MS_TableConnectionString`.</span></span> <span data-ttu-id="edc4d-152">Navigera tooyour nya uppgradera platsen och klistra in dem i att skriva över befintliga värden.</span><span class="sxs-lookup"><span data-stu-id="edc4d-152">Navigate tooyour new upgrade site and paste them in, overwriting any existing values.</span></span> <span data-ttu-id="edc4d-153">Upprepa processen för alla andra programinställningar app-behov.</span><span class="sxs-lookup"><span data-stu-id="edc4d-153">Repeat this process for any other application settings your app needs.</span></span> <span data-ttu-id="edc4d-154">Om du inte använder en migrerad tjänst, kan du läsa anslutningssträngar och app-inställningar från hello **konfigurera** för hello avsnitt för Mobile Services i hello [klassiska Azure-portalen].</span><span class="sxs-lookup"><span data-stu-id="edc4d-154">If not using a migrated service, you can read connection strings and app settings from hello **Configure** tab of hello Mobile Services section of hello [Azure classic portal].</span></span>

<span data-ttu-id="edc4d-155">Skapa en kopia av hello ASP.NET-projekt för ditt program och publicera den nya platsen för tooyour.</span><span class="sxs-lookup"><span data-stu-id="edc4d-155">Make a copy of hello ASP.NET project for your application and publish it tooyour new site.</span></span> <span data-ttu-id="edc4d-156">Med en kopia av klientprogrammet uppdateras med hello ny URL, verifiera att allt fungerar som förväntat.</span><span class="sxs-lookup"><span data-stu-id="edc4d-156">Using a copy of your client application updated with hello new URL, validate that everything works as expected.</span></span>

## <a name="updating-hello-server-project"></a><span data-ttu-id="edc4d-157">Uppdatera hello serverprojekt</span><span class="sxs-lookup"><span data-stu-id="edc4d-157">Updating hello server project</span></span>
<span data-ttu-id="edc4d-158">Mobilappar erbjuder en ny [Mobile App-serverns SDK] som ger mycket hello samma funktioner som hello Mobile Services runtime.</span><span class="sxs-lookup"><span data-stu-id="edc4d-158">Mobile Apps provides a new [Mobile App Server SDK] which provides much of hello same functionality as hello Mobile Services runtime.</span></span> <span data-ttu-id="edc4d-159">Först bör du ta bort alla referenser toohello Mobile Services paket.</span><span class="sxs-lookup"><span data-stu-id="edc4d-159">First, you should remove all references toohello Mobile Services packages.</span></span> <span data-ttu-id="edc4d-160">I hello NuGet-Pakethanteraren, söker du efter `WindowsAzure.MobileServices.Backend`.</span><span class="sxs-lookup"><span data-stu-id="edc4d-160">In hello NuGet package manager, search for `WindowsAzure.MobileServices.Backend`.</span></span> <span data-ttu-id="edc4d-161">De flesta appar kommer att se flera paket här, inklusive `WindowsAzure.MobileServices.Backend.Tables` och `WindowsAzure.MobileServices.Backend.Entity`.</span><span class="sxs-lookup"><span data-stu-id="edc4d-161">Most apps will see several packages here, including `WindowsAzure.MobileServices.Backend.Tables` and `WindowsAzure.MobileServices.Backend.Entity`.</span></span> <span data-ttu-id="edc4d-162">I sådana fall börjar med hello lägsta paketet i hello resursberoende träd, t ex `Entity`, och ta bort den.</span><span class="sxs-lookup"><span data-stu-id="edc4d-162">In such a case, start with hello lowest package in hello dependency tree, such as `Entity`, and remove it.</span></span> <span data-ttu-id="edc4d-163">När du uppmanas, ta inte bort alla beroende paket.</span><span class="sxs-lookup"><span data-stu-id="edc4d-163">When prompted, do not remove all dependant packages.</span></span> <span data-ttu-id="edc4d-164">Upprepa processen tills du har tagit bort `WindowsAzure.MobileServices.Backend` sig själv.</span><span class="sxs-lookup"><span data-stu-id="edc4d-164">Repeat this process until you have removed `WindowsAzure.MobileServices.Backend` itself.</span></span>

<span data-ttu-id="edc4d-165">Nu har du ett projekt som inte längre refererar till Mobile Services SDK.</span><span class="sxs-lookup"><span data-stu-id="edc4d-165">At this point you will have a project that no longer references Mobile Services SDKs.</span></span>

<span data-ttu-id="edc4d-166">Nästa lägger du till referenser hello Mobile Apps-SDK.</span><span class="sxs-lookup"><span data-stu-id="edc4d-166">Next you will add references hello Mobile Apps SDK.</span></span> <span data-ttu-id="edc4d-167">För den här uppgraderingen kommer de flesta utvecklare vill toodownload och installera hello `Microsoft.Azure.Mobile.Server.Quickstart` paketet, eftersom detta hämtar i hello hela krävs uppsättningen.</span><span class="sxs-lookup"><span data-stu-id="edc4d-167">For this upgrade, most developers will want toodownload and install hello `Microsoft.Azure.Mobile.Server.Quickstart` package, as this will pull in hello entire required set.</span></span>

<span data-ttu-id="edc4d-168">Det blir ett ganska stort antal kompileringsfel som uppstår till följd av skillnaderna mellan hello SDK: er, men dessa är enkelt tooaddress och behandlas i hello resten av det här avsnittet.</span><span class="sxs-lookup"><span data-stu-id="edc4d-168">There will be quite a few compiler errors resulting from differences between hello SDKs, but these are easy tooaddress and are covered in hello rest of this section.</span></span>

### <a name="base-configuration"></a><span data-ttu-id="edc4d-169">Grundläggande konfiguration</span><span class="sxs-lookup"><span data-stu-id="edc4d-169">Base configuration</span></span>
<span data-ttu-id="edc4d-170">Sedan, i WebApiConfig.cs, du kan ersätta:</span><span class="sxs-lookup"><span data-stu-id="edc4d-170">Then, in WebApiConfig.cs, you can replace:</span></span>

        // Use this class tooset configuration options for your mobile service
        ConfigOptions options = new ConfigOptions();

        // Use this class tooset WebAPI configuration options
        HttpConfiguration config = ServiceConfig.Initialize(new ConfigBuilder(options));

<span data-ttu-id="edc4d-171">med</span><span class="sxs-lookup"><span data-stu-id="edc4d-171">with</span></span>

        HttpConfiguration config = new HttpConfiguration();
        new MobileAppConfiguration()
            .UseDefaultConfiguration()
        .ApplyTo(config);

> [!NOTE]
> <span data-ttu-id="edc4d-172">Om du vill toolearn mer om hello nya .NET server SDK och hur tooadd/ta bort funktioner från din app kan du se hello [hur toouse hello .NET server SDK] avsnittet.</span><span class="sxs-lookup"><span data-stu-id="edc4d-172">If you wish toolearn more about hello new .NET server SDK and how tooadd/remove features from your app, please see hello [How toouse hello .NET server SDK] topic.</span></span>
>
>

<span data-ttu-id="edc4d-173">Om din app använder hello autentiseringsfunktioner, måste du också tooregister en OWIN-mellanprogram.</span><span class="sxs-lookup"><span data-stu-id="edc4d-173">If your app makes use of hello authentication features, you will also need tooregister an OWIN middleware.</span></span> <span data-ttu-id="edc4d-174">I det här fallet bör du flytta hello ovan konfigurationskod till en ny OWIN-startklass.</span><span class="sxs-lookup"><span data-stu-id="edc4d-174">In this case, you should move hello above configuration code into a new OWIN Startup class.</span></span>

1. <span data-ttu-id="edc4d-175">Lägg till NuGet-paketet för hello `Microsoft.Owin.Host.SystemWeb` om det inte redan ingår i projektet.</span><span class="sxs-lookup"><span data-stu-id="edc4d-175">Add hello NuGet package `Microsoft.Owin.Host.SystemWeb` if it is not already included in your project.</span></span>
2. <span data-ttu-id="edc4d-176">I Visual Studio högerklickar du på projektet och välj **Lägg till** -> **nytt objekt**.</span><span class="sxs-lookup"><span data-stu-id="edc4d-176">In Visual Studio, right click on your project and select **Add** -> **New Item**.</span></span> <span data-ttu-id="edc4d-177">Välj **Web** -> **allmänna** -> **OWIN-startklass**.</span><span class="sxs-lookup"><span data-stu-id="edc4d-177">Select **Web** -> **General** -> **OWIN Startup class**.</span></span>
3. <span data-ttu-id="edc4d-178">Flytta hello ovan kod för MobileAppConfiguration från `WebApiConfig.Register()` toohello `Configuration()` metod för den nya Start-klassen.</span><span class="sxs-lookup"><span data-stu-id="edc4d-178">Move hello above code for MobileAppConfiguration from `WebApiConfig.Register()` toohello `Configuration()` method of your new startup class.</span></span>

<span data-ttu-id="edc4d-179">Se till att hello `Configuration()` metoden slutar med:</span><span class="sxs-lookup"><span data-stu-id="edc4d-179">Make sure hello `Configuration()` method ends with:</span></span>

        app.UseWebApi(config)
        app.UseAppServiceAuthentication(config);

<span data-ttu-id="edc4d-180">Det finns ytterligare ändringar relaterade tooauthentication som beskrivs i hello fullständig autentisering nedan.</span><span class="sxs-lookup"><span data-stu-id="edc4d-180">There are additional changes related tooauthentication which are covered in hello full authentication section below.</span></span>

### <a name="working-with-data"></a><span data-ttu-id="edc4d-181">Arbeta med Data</span><span class="sxs-lookup"><span data-stu-id="edc4d-181">Working with Data</span></span>
<span data-ttu-id="edc4d-182">I Mobile Services hello mobilappen namn hanteras som hello schemat för standardnamnet i hello Entity Framework-installationsprogrammet.</span><span class="sxs-lookup"><span data-stu-id="edc4d-182">In Mobile Services, hello mobile app name served as hello default schema name in hello Entity Framework setup.</span></span>

<span data-ttu-id="edc4d-183">tooensure som du har hello samma schema refereras som tidigare Använd hello följande tooset hello schemat i hello DbContext för programmet:</span><span class="sxs-lookup"><span data-stu-id="edc4d-183">tooensure that you have hello same schema being referenced as before, use hello following tooset hello schema in hello DbContext for your application:</span></span>

        string schema = System.Configuration.ConfigurationManager.AppSettings.Get("MS_MobileServiceName");

<span data-ttu-id="edc4d-184">Kontrollera att du har MS_MobileServiceName om du hello ovan.</span><span class="sxs-lookup"><span data-stu-id="edc4d-184">Please make sure you have MS_MobileServiceName set if you do hello above.</span></span> <span data-ttu-id="edc4d-185">Du kan också ange en annan schemanamnet om tillämpningsprogrammet anpassat detta tidigare.</span><span class="sxs-lookup"><span data-stu-id="edc4d-185">You can also provide another schema name if your application customized this previously.</span></span>

### <a name="system-properties"></a><span data-ttu-id="edc4d-186">Egenskaper för system</span><span class="sxs-lookup"><span data-stu-id="edc4d-186">System Properties</span></span>
#### <a name="naming"></a><span data-ttu-id="edc4d-187">Namngivning</span><span class="sxs-lookup"><span data-stu-id="edc4d-187">Naming</span></span>
<span data-ttu-id="edc4d-188">I hello Azure Mobile Services-servern SDK Systemegenskaper alltid innehålla ett dubbelt understreck (`__`)-prefixet för hello egenskaper:</span><span class="sxs-lookup"><span data-stu-id="edc4d-188">In hello Azure Mobile Services server SDK, system properties always contain a double underscore (`__`) prefix for hello properties:</span></span>

* <span data-ttu-id="edc4d-189">__createdAt</span><span class="sxs-lookup"><span data-stu-id="edc4d-189">__createdAt</span></span>
* <span data-ttu-id="edc4d-190">__updatedAt</span><span class="sxs-lookup"><span data-stu-id="edc4d-190">__updatedAt</span></span>
* <span data-ttu-id="edc4d-191">__deleted</span><span class="sxs-lookup"><span data-stu-id="edc4d-191">__deleted</span></span>
* <span data-ttu-id="edc4d-192">__version</span><span class="sxs-lookup"><span data-stu-id="edc4d-192">__version</span></span>

<span data-ttu-id="edc4d-193">hello Mobile Services-klienten SDK: er har särskilda logik för parsning av Systemegenskaper i det här formatet.</span><span class="sxs-lookup"><span data-stu-id="edc4d-193">hello Mobile Services client SDKs have special logic for parsing system properties in this format.</span></span>

<span data-ttu-id="edc4d-194">I Azure Mobile Apps har Systemegenskaper inte längre en särskild formatera och har hello följande namn:</span><span class="sxs-lookup"><span data-stu-id="edc4d-194">In Azure Mobile Apps, system properties no longer have a special format and have hello following names:</span></span>

* <span data-ttu-id="edc4d-195">CreatedAt</span><span class="sxs-lookup"><span data-stu-id="edc4d-195">createdAt</span></span>
* <span data-ttu-id="edc4d-196">updatedAt</span><span class="sxs-lookup"><span data-stu-id="edc4d-196">updatedAt</span></span>
* <span data-ttu-id="edc4d-197">ta bort</span><span class="sxs-lookup"><span data-stu-id="edc4d-197">deleted</span></span>
* <span data-ttu-id="edc4d-198">Version</span><span class="sxs-lookup"><span data-stu-id="edc4d-198">version</span></span>

<span data-ttu-id="edc4d-199">hello Mobile Apps-SDK: er används hello nya system egenskaper klientnamn, så att inga ändringar krävs tooclient kod.</span><span class="sxs-lookup"><span data-stu-id="edc4d-199">hello Mobile Apps client SDKs use hello new system properties names, so no changes are required tooclient code.</span></span> <span data-ttu-id="edc4d-200">Om du är direkt gör REST anropar tooyour-tjänsten och du bör ändra dina frågor i enlighet med detta.</span><span class="sxs-lookup"><span data-stu-id="edc4d-200">However, if you are directly making REST calls tooyour service then you should change your queries accordingly.</span></span>

#### <a name="local-store"></a><span data-ttu-id="edc4d-201">Lokalt Arkiv</span><span class="sxs-lookup"><span data-stu-id="edc4d-201">Local store</span></span>
<span data-ttu-id="edc4d-202">hello ändringar toohello namnen på Systemegenskaper innebär att en lokal databas offlinesynkronisering för Mobile Services inte är kompatibel med Mobile Apps.</span><span class="sxs-lookup"><span data-stu-id="edc4d-202">hello changes toohello names of system properties mean that an offline sync local database for Mobile Services is not compatible with Mobile Apps.</span></span> <span data-ttu-id="edc4d-203">Om möjligt bör du undvika att uppgradera klientappar från Mobile Services tooMobile appar förrän efter väntande ändringar har skickats toohello server.</span><span class="sxs-lookup"><span data-stu-id="edc4d-203">If possible, you should avoid upgrading client apps from Mobile Services tooMobile Apps until after pending changes have been sent toohello server.</span></span> <span data-ttu-id="edc4d-204">Sedan ska hello uppgraderade app använda ett nytt databasnamn.</span><span class="sxs-lookup"><span data-stu-id="edc4d-204">Then, hello upgraded app should use a new database filename.</span></span>

<span data-ttu-id="edc4d-205">Om ett klientprogram uppgraderas från Mobile Services tooMobile appar när det finns väntande ändringar offline i hello åtgärden kö, måste hello-databas vara uppdaterade toouse hello nya kolumnnamn.</span><span class="sxs-lookup"><span data-stu-id="edc4d-205">If a client app is upgraded from Mobile Services tooMobile Apps while there are pending offline changes in hello operation queue, then hello system database must be updated toouse hello new column names.</span></span> <span data-ttu-id="edc4d-206">På iOS, kan detta uppnås med hjälp av lightweight migreringar toochange hello kolumnnamn.</span><span class="sxs-lookup"><span data-stu-id="edc4d-206">On iOS, this can be achieved using lightweight migrations toochange hello column names.</span></span> <span data-ttu-id="edc4d-207">På Android- och hello .NET hanterad klient, bör du skriva anpassade SQL toorename hello kolumner för din datatabeller för objektet.</span><span class="sxs-lookup"><span data-stu-id="edc4d-207">On Android and hello .NET managed client, you should write custom SQL toorename hello columns for your data object tables.</span></span>

<span data-ttu-id="edc4d-208">På iOS, bör du ändra schemat grundläggande information för dina data entiteter toomatch hello följande.</span><span class="sxs-lookup"><span data-stu-id="edc4d-208">On iOS, you should change your Core Data schema for your data entities toomatch hello following.</span></span> <span data-ttu-id="edc4d-209">Observera att hello egenskaper `createdAt`, `updatedAt` och `version` har inte längre ett `ms_` prefix:</span><span class="sxs-lookup"><span data-stu-id="edc4d-209">Note that hello properties `createdAt`, `updatedAt` and `version` no longer have an `ms_` prefix:</span></span>

| <span data-ttu-id="edc4d-210">Attribut</span><span class="sxs-lookup"><span data-stu-id="edc4d-210">Attribute</span></span> | <span data-ttu-id="edc4d-211">Typ</span><span class="sxs-lookup"><span data-stu-id="edc4d-211">Type</span></span> | <span data-ttu-id="edc4d-212">Obs!</span><span class="sxs-lookup"><span data-stu-id="edc4d-212">Note</span></span> |
| --- | --- | --- |
| <span data-ttu-id="edc4d-213">id</span><span class="sxs-lookup"><span data-stu-id="edc4d-213">id</span></span> |<span data-ttu-id="edc4d-214">Strängen som markerats krävs</span><span class="sxs-lookup"><span data-stu-id="edc4d-214">String, marked required</span></span> |<span data-ttu-id="edc4d-215">primärnyckeln i fjärranslutna store</span><span class="sxs-lookup"><span data-stu-id="edc4d-215">primary key in remote store</span></span> |
| <span data-ttu-id="edc4d-216">CreatedAt</span><span class="sxs-lookup"><span data-stu-id="edc4d-216">createdAt</span></span> |<span data-ttu-id="edc4d-217">Date</span><span class="sxs-lookup"><span data-stu-id="edc4d-217">Date</span></span> |<span data-ttu-id="edc4d-218">(valfritt) maps toocreatedAt Systemegenskapen</span><span class="sxs-lookup"><span data-stu-id="edc4d-218">(optional) maps toocreatedAt system property</span></span> |
| <span data-ttu-id="edc4d-219">updatedAt</span><span class="sxs-lookup"><span data-stu-id="edc4d-219">updatedAt</span></span> |<span data-ttu-id="edc4d-220">Date</span><span class="sxs-lookup"><span data-stu-id="edc4d-220">Date</span></span> |<span data-ttu-id="edc4d-221">(valfritt) maps tooupdatedAt Systemegenskapen</span><span class="sxs-lookup"><span data-stu-id="edc4d-221">(optional) maps tooupdatedAt system property</span></span> |
| <span data-ttu-id="edc4d-222">Version</span><span class="sxs-lookup"><span data-stu-id="edc4d-222">version</span></span> |<span data-ttu-id="edc4d-223">Sträng</span><span class="sxs-lookup"><span data-stu-id="edc4d-223">String</span></span> |<span data-ttu-id="edc4d-224">(valfritt) använda toodetect konflikter, maps tooversion</span><span class="sxs-lookup"><span data-stu-id="edc4d-224">(optional) used toodetect conflicts, maps tooversion</span></span> |

#### <a name="querying-system-properties"></a><span data-ttu-id="edc4d-225">Frågar Systemegenskaper</span><span class="sxs-lookup"><span data-stu-id="edc4d-225">Querying system properties</span></span>
<span data-ttu-id="edc4d-226">I Azure Mobile Services Systemegenskaper skickas inte som standard, men endast när de begär med hello frågesträngen `__systemProperties`.</span><span class="sxs-lookup"><span data-stu-id="edc4d-226">In Azure Mobile Services, system properties are not sent by default, but only when they are requested using hello query string `__systemProperties`.</span></span> <span data-ttu-id="edc4d-227">Däremot i Azure Mobile Apps system egenskaper är **alltid valt** eftersom de ingår i objektmodellen för hello server SDK.</span><span class="sxs-lookup"><span data-stu-id="edc4d-227">In contrast, in Azure Mobile Apps system properties are **always selected** since they are part of hello server SDK object model.</span></span>

<span data-ttu-id="edc4d-228">Den här ändringen påverkar huvudsakligen anpassade implementeringar av domän chefer, till exempel tillägg av `MappedEntityDomainManager`.</span><span class="sxs-lookup"><span data-stu-id="edc4d-228">This change mainly impacts custom implementations of domain managers, such as extensions of `MappedEntityDomainManager`.</span></span> <span data-ttu-id="edc4d-229">I Mobile Services, om en klient begär aldrig alla Systemegenskaper är möjliga toouse en `MappedEntityDomainManager` som faktiskt mappar inte alla egenskaper.</span><span class="sxs-lookup"><span data-stu-id="edc4d-229">In Mobile Services, if a client never requests any system properties, it is possible toouse a `MappedEntityDomainManager` that does not actually map all properties.</span></span> <span data-ttu-id="edc4d-230">Men i Azure Mobile Apps genereras egenskaperna omappade ett fel i GET-frågor.</span><span class="sxs-lookup"><span data-stu-id="edc4d-230">However, in Azure Mobile Apps, these unmapped properties will cause an error in GET queries.</span></span>

<span data-ttu-id="edc4d-231">Hej enklaste sättet tooresolve hello problemet är toomodify din DTOs så att de ärver från `ITableData` i stället för `EntityData`.</span><span class="sxs-lookup"><span data-stu-id="edc4d-231">hello easiest way tooresolve hello issue is toomodify your DTOs so that they inherit from `ITableData` instead of `EntityData`.</span></span> <span data-ttu-id="edc4d-232">Lägg sedan till hello `[NotMapped]` attributet toohello fält som ska uteslutas.</span><span class="sxs-lookup"><span data-stu-id="edc4d-232">Then, add hello `[NotMapped]` attribute toohello fields that should be omitted.</span></span>

<span data-ttu-id="edc4d-233">Till exempel hello följande definierar `TodoItem` utan system-egenskaper:</span><span class="sxs-lookup"><span data-stu-id="edc4d-233">For example, hello following defines `TodoItem` with no system properties:</span></span>

    using System.ComponentModel.DataAnnotations.Schema;

    public class TodoItem : ITableData
    {
        public string Text { get; set; }

        public bool Complete { get; set; }

        public string Id { get; set; }

        [NotMapped]
        public DateTimeOffset? CreatedAt { get; set; }

        [NotMapped]
        public DateTimeOffset? UpdatedAt { get; set; }

        [NotMapped]
        public bool Deleted { get; set; }

        [NotMapped]
        public byte[] Version { get; set; }
    }

<span data-ttu-id="edc4d-234">Obs: om det uppstår fel `NotMapped`, lägga till en referenssammansättning toohello `System.ComponentModel.DataAnnotations`.</span><span class="sxs-lookup"><span data-stu-id="edc4d-234">Note: if you get errors on `NotMapped`, add a reference toohello assembly `System.ComponentModel.DataAnnotations`.</span></span>

### <a name="cors"></a><span data-ttu-id="edc4d-235">CORS</span><span class="sxs-lookup"><span data-stu-id="edc4d-235">CORS</span></span>
<span data-ttu-id="edc4d-236">Mobile Services med vissa stöd för CORS genom att omsluta hello ASP.NET CORS-lösning.</span><span class="sxs-lookup"><span data-stu-id="edc4d-236">Mobile Services included some support for CORS by wrapping hello ASP.NET CORS solution.</span></span> <span data-ttu-id="edc4d-237">Radbrytning lagret har tagits bort toogive hello utvecklare mer kontroll så att du kan utnyttja direkt [stöd för ASP.NET-CORS](http://www.asp.net/web-api/overview/security/enabling-cross-origin-requests-in-web-api).</span><span class="sxs-lookup"><span data-stu-id="edc4d-237">This wrapping layer has been removed toogive hello developer more control, so you can directly leverage [ASP.NET CORS support](http://www.asp.net/web-api/overview/security/enabling-cross-origin-requests-in-web-api).</span></span>

<span data-ttu-id="edc4d-238">hello huvudsakliga problemområden om du använder CORS är att hello `eTag` och `Location` huvuden måste tillåtas för hello klient-SDK: er toowork korrekt.</span><span class="sxs-lookup"><span data-stu-id="edc4d-238">hello main areas of concern if using CORS are that hello `eTag` and `Location` headers must be allowed in order for hello client SDKs toowork properly.</span></span>

### <a name="push-notifications"></a><span data-ttu-id="edc4d-239">Push-meddelanden</span><span class="sxs-lookup"><span data-stu-id="edc4d-239">Push Notifications</span></span>
<span data-ttu-id="edc4d-240">Huvudobjekt Hej som kan vara saknas från hello-serverns SDK är push, hello PushRegistrationHandler klass.</span><span class="sxs-lookup"><span data-stu-id="edc4d-240">For push, hello main item that you may find missing from hello Server SDK is hello PushRegistrationHandler class.</span></span> <span data-ttu-id="edc4d-241">Registreringar hanteras lite annorlunda i Mobile Apps och tagless registreringar är aktiverade som standard.</span><span class="sxs-lookup"><span data-stu-id="edc4d-241">Registrations are handled slightly differently in Mobile Apps, and tagless registrations are enabled by default.</span></span> <span data-ttu-id="edc4d-242">Hantera taggar kan åstadkommas med hjälp av anpassade API: er.</span><span class="sxs-lookup"><span data-stu-id="edc4d-242">Managing tags may be accomplished by using custom APIs.</span></span> <span data-ttu-id="edc4d-243">Se hello [registrering för taggar](app-service-mobile-dotnet-backend-how-to-use-server-sdk.md#tags) instruktioner för mer information.</span><span class="sxs-lookup"><span data-stu-id="edc4d-243">Please see hello [registering for tags](app-service-mobile-dotnet-backend-how-to-use-server-sdk.md#tags) instructions for more information.</span></span>

### <a name="scheduled-jobs"></a><span data-ttu-id="edc4d-244">Schemalagda jobb</span><span class="sxs-lookup"><span data-stu-id="edc4d-244">Scheduled Jobs</span></span>
<span data-ttu-id="edc4d-245">Schemalagda jobb är inte inbyggda i Mobilappar, så måste alla befintliga jobb som du har i .NET-serverdel toobe uppgraderas individuellt.</span><span class="sxs-lookup"><span data-stu-id="edc4d-245">Scheduled jobs are not built into Mobile Apps, so any existing jobs that you have in your .NET backend will need toobe upgraded individually.</span></span> <span data-ttu-id="edc4d-246">Ett alternativ är en schemalagd toocreate [Web jobbet] på hello Mobilapp kod platsen.</span><span class="sxs-lookup"><span data-stu-id="edc4d-246">One option is toocreate a scheduled [Web Job] on hello Mobile App code site.</span></span> <span data-ttu-id="edc4d-247">Du kan också konfigurera en domänkontrollant som innehåller jobbkoden och konfigurera hello [Azure Scheduler] toohit denna slutpunkt på hello förväntades schema.</span><span class="sxs-lookup"><span data-stu-id="edc4d-247">You could also set up a controller that holds your job code and configure hello [Azure Scheduler] toohit that endpoint on hello expected schedule.</span></span>

### <a name="miscellaneous-changes"></a><span data-ttu-id="edc4d-248">Funktionsförändringar</span><span class="sxs-lookup"><span data-stu-id="edc4d-248">Miscellaneous changes</span></span>
<span data-ttu-id="edc4d-249">Alla ApiControllers som används av en mobil klient nu måste ha hello `[MobileAppController]` attribut.</span><span class="sxs-lookup"><span data-stu-id="edc4d-249">All ApiControllers which will be consumed by a mobile client must now have hello `[MobileAppController]` attribute.</span></span> <span data-ttu-id="edc4d-250">Detta är inte längre ingår som standard så att andra ApiControllers toogo påverkas inte av hello mobila-formaterare.</span><span class="sxs-lookup"><span data-stu-id="edc4d-250">This is no longer included by default so that other ApiControllers toogo unaffected by hello mobile formatters.</span></span>

<span data-ttu-id="edc4d-251">Hej `ApiServices` objektet är inte längre tillhör hello SDK.</span><span class="sxs-lookup"><span data-stu-id="edc4d-251">hello `ApiServices` object is no longer part of hello SDK.</span></span> <span data-ttu-id="edc4d-252">Du kan använda hello följande tooaccess Mobile App-inställningar:</span><span class="sxs-lookup"><span data-stu-id="edc4d-252">tooaccess Mobile App settings, you can use hello following:</span></span>

    MobileAppSettingsDictionary settings = this.Configuration.GetMobileAppSettingsProvider().GetMobileAppSettings();

<span data-ttu-id="edc4d-253">På samma sätt, utförs nu loggning med hello standard ASP.NET trace skrivning:</span><span class="sxs-lookup"><span data-stu-id="edc4d-253">Similarly, logging is now accomplished using hello standard ASP.NET trace writing:</span></span>

    ITraceWriter traceWriter = this.Configuration.Services.GetTraceWriter();
    traceWriter.Info("Hello, World");  

## <span data-ttu-id="edc4d-254"><a name="authentication"></a>Överväganden för autentisering</span><span class="sxs-lookup"><span data-stu-id="edc4d-254"><a name="authentication"></a>Authentication considerations</span></span>
<span data-ttu-id="edc4d-255">hello har autentisering i Mobile Services nu flyttats till hello autentisering/auktorisering i Apptjänst-funktionen.</span><span class="sxs-lookup"><span data-stu-id="edc4d-255">hello authentication components of Mobile Services have now been moved into hello App Service Authentication/Authorization feature.</span></span> <span data-ttu-id="edc4d-256">Du kan lära dig om hur du aktiverar detta för webbplatsen genom att läsa hello [Lägg till autentisering tooyour mobilappen](app-service-mobile-ios-get-started-users.md) avsnittet.</span><span class="sxs-lookup"><span data-stu-id="edc4d-256">You can learn about enabling this for your site by reading hello [Add authentication tooyour mobile app](app-service-mobile-ios-get-started-users.md) topic.</span></span>

<span data-ttu-id="edc4d-257">För vissa leverantörer, till exempel AAD, Facebook och Google, bör du kunna tooleverage hello befintlig registrering från tillämpningsprogrammet kopia.</span><span class="sxs-lookup"><span data-stu-id="edc4d-257">For some providers, such as AAD, Facebook, and Google, you should be able tooleverage hello existing registration from your copy application.</span></span> <span data-ttu-id="edc4d-258">Du bara behöver toonavigate toohello identitetsleverantörens portal och lägga till en ny omdirigerings-URL: en toohello registrering.</span><span class="sxs-lookup"><span data-stu-id="edc4d-258">You simply need toonavigate toohello identity provider's portal and add a new redirect URL toohello registration.</span></span> <span data-ttu-id="edc4d-259">Konfigurera autentisering/auktorisering i Apptjänst med hello klient-ID och hemlighet.</span><span class="sxs-lookup"><span data-stu-id="edc4d-259">Then configure App Service Authentication/Authorization with hello client ID and secret.</span></span>

### <a name="controller-action-authorization"></a><span data-ttu-id="edc4d-260">Domänkontrollanten åtgärd auktorisering</span><span class="sxs-lookup"><span data-stu-id="edc4d-260">Controller action authorization</span></span>
<span data-ttu-id="edc4d-261">Alla instanser av hello `[AuthorizeLevel(AuthorizationLevel.User)]` attributet måste nu vara ändrade toouse hello standard ASP.NET `[Authorize]` attribut.</span><span class="sxs-lookup"><span data-stu-id="edc4d-261">Any instances of hello `[AuthorizeLevel(AuthorizationLevel.User)]` attribute must now be changed toouse hello standard ASP.NET `[Authorize]` attribute.</span></span> <span data-ttu-id="edc4d-262">Dessutom är domänkontrollanter nu anonym som standard, som i andra ASP.NET-program.</span><span class="sxs-lookup"><span data-stu-id="edc4d-262">Additionally, controllers are now Anonymous by default, as in other ASP.NET applications.</span></span>
<span data-ttu-id="edc4d-263">Om du använder en av hello märke andra AuthorizeLevel alternativ, till exempel Admin eller ett program, Lägg till att de är borta.</span><span class="sxs-lookup"><span data-stu-id="edc4d-263">If you were using one of hello other AuthorizeLevel options, such as Admin or Application, please note that these are gone.</span></span> <span data-ttu-id="edc4d-264">Du kan i stället konfigurera AuthorizationFilters för delade hemligheter eller konfigurera ett AAD tjänstens huvudnamn tooenable tjänst-till-tjänst-anrop på ett säkert sätt.</span><span class="sxs-lookup"><span data-stu-id="edc4d-264">You can instead set up AuthorizationFilters for shared secrets or configure an AAD Service Principal tooenable service-to-service calls securely.</span></span>

### <a name="getting-additional-user-information"></a><span data-ttu-id="edc4d-265">Hämtar användarinformation om ytterligare</span><span class="sxs-lookup"><span data-stu-id="edc4d-265">Getting additional user information</span></span>
<span data-ttu-id="edc4d-266">Du kan få ytterligare information, inklusive åtkomsttoken via hello `GetAppServiceIdentityAsync()` metoden:</span><span class="sxs-lookup"><span data-stu-id="edc4d-266">You can get additional user information, including access tokens through hello `GetAppServiceIdentityAsync()` method:</span></span>

        FacebookCredentials creds = await this.User.GetAppServiceIdentityAsync<FacebookCredentials>();

<span data-ttu-id="edc4d-267">Dessutom, om ditt program tar beroenden på användar-ID, till exempel lagra dem i en databas, är det viktigt toonote som hello användar-ID mellan Mobile Services och Apptjänst Mobilappar är olika.</span><span class="sxs-lookup"><span data-stu-id="edc4d-267">Additionally, if your application takes dependencies on user IDs, such as storing them in a database, it is important toonote that hello user IDs between Mobile Services and App Service Mobile Apps are different.</span></span> <span data-ttu-id="edc4d-268">Du kan fortfarande få hello Mobile Services användar-ID, även om.</span><span class="sxs-lookup"><span data-stu-id="edc4d-268">You can still get hello Mobile Services User ID, though.</span></span> <span data-ttu-id="edc4d-269">Alla hello ProviderCredentials underklasser har en användar-ID-egenskap.</span><span class="sxs-lookup"><span data-stu-id="edc4d-269">All of hello ProviderCredentials subclasses have a UserId property.</span></span> <span data-ttu-id="edc4d-270">Så fortsätter från hello exempel innan:</span><span class="sxs-lookup"><span data-stu-id="edc4d-270">So continuing from hello example before:</span></span>

        string mobileServicesUserId = creds.Provider + ":" + creds.UserId;

<span data-ttu-id="edc4d-271">Om din app tar några beroenden på användar-ID, är det viktigt att du utnyttja hello samma registrering med en identitetsprovider om möjligt.</span><span class="sxs-lookup"><span data-stu-id="edc4d-271">If your app does take any dependencies on user IDs, it is important that you leverage hello same registration with an identity provider if possible.</span></span> <span data-ttu-id="edc4d-272">Användar-ID är vanligtvis begränsade toohello appregistrering som användes, så introducerar en ny registrering kan skapa problem med matchande användare tootheir data.</span><span class="sxs-lookup"><span data-stu-id="edc4d-272">User IDs are typically scoped toohello application registration that was used, so introducing a new registration could create problems with matching users tootheir data.</span></span>

### <a name="custom-authentication"></a><span data-ttu-id="edc4d-273">Anpassad autentisering</span><span class="sxs-lookup"><span data-stu-id="edc4d-273">Custom authentication</span></span>
<span data-ttu-id="edc4d-274">Om din app använder en lösning för anpassad autentisering, vill du att den uppgraderade hello-platsen har åtkomst toohello system toomake.</span><span class="sxs-lookup"><span data-stu-id="edc4d-274">If your app is using a custom authentication solution, you will want toomake sure that hello upgraded site has access toohello system.</span></span> <span data-ttu-id="edc4d-275">Följ hello nya instruktioner för anpassad autentisering i hello [översikt över SDK för .NET server] toointegrate din lösning.</span><span class="sxs-lookup"><span data-stu-id="edc4d-275">Follow hello new instructions for custom authentication in hello [.NET server SDK overview] toointegrate your solution.</span></span> <span data-ttu-id="edc4d-276">Observera att hello anpassad autentiseringskomponenter är fortfarande under förhandsgranskning.</span><span class="sxs-lookup"><span data-stu-id="edc4d-276">Please note that hello custom authentication components are still in preview.</span></span>

## <span data-ttu-id="edc4d-277"><a name="updating-clients"></a>Uppdatera klienter</span><span class="sxs-lookup"><span data-stu-id="edc4d-277"><a name="updating-clients"></a>Updating clients</span></span>
<span data-ttu-id="edc4d-278">När du har en operativa mobilappsserverdel kan arbeta du med en ny version av ditt klientprogram som använder den.</span><span class="sxs-lookup"><span data-stu-id="edc4d-278">Once you have an operational Mobile App backend, you can work on a new version of your client application which consumes it.</span></span> <span data-ttu-id="edc4d-279">Mobile Apps innehåller också en ny version av hello klienten SDK: er och liknande toohello serveruppgraderingen ovan, behöver du tooremove alla referenser toohello Mobile Services SDK innan du installerar hello Mobile Apps versioner.</span><span class="sxs-lookup"><span data-stu-id="edc4d-279">Mobile Apps also includes a new version of hello client SDKs, and similar toohello server upgrade above, you will need tooremove all references toohello Mobile Services SDKs before installing hello Mobile Apps versions.</span></span>

<span data-ttu-id="edc4d-280">En av hello huvudsakliga ändringar mellan hello versioner är att hello konstruktorer inte längre behöver en tangent.</span><span class="sxs-lookup"><span data-stu-id="edc4d-280">One of hello main changes between hello versions is that hello constructors no longer require an application key.</span></span> <span data-ttu-id="edc4d-281">Du nu skickar hello URL för din Mobilapp.</span><span class="sxs-lookup"><span data-stu-id="edc4d-281">You now simply pass in hello URL of your Mobile App.</span></span> <span data-ttu-id="edc4d-282">Till exempel på hello .NET-klienter, hello `MobileServiceClient` konstruktorn är nu:</span><span class="sxs-lookup"><span data-stu-id="edc4d-282">For example, on hello .NET clients, hello `MobileServiceClient` constructor is now:</span></span>

        public static MobileServiceClient MobileService = new MobileServiceClient(
            "https://contoso.azurewebsites.net", // URL of hello Mobile App
        );

<span data-ttu-id="edc4d-283">Du kan läsa om hur du installerar hello nya SDK: er och använder hello ny struktur via hello länkarna nedan:</span><span class="sxs-lookup"><span data-stu-id="edc4d-283">You can read about installing hello new SDKs and using hello new structure via hello links below:</span></span>

* [<span data-ttu-id="edc4d-284">iOS version 3.0.0 eller senare</span><span class="sxs-lookup"><span data-stu-id="edc4d-284">iOS version 3.0.0 or later</span></span>](app-service-mobile-ios-how-to-use-client-library.md)
* [<span data-ttu-id="edc4d-285">.NET (Windows/Xamarin) version 2.0.0 eller senare</span><span class="sxs-lookup"><span data-stu-id="edc4d-285">.NET (Windows/Xamarin) version 2.0.0 or later</span></span>](app-service-mobile-dotnet-how-to-use-client-library.md)

<span data-ttu-id="edc4d-286">Om ditt program gör användning av push-meddelanden, anteckna hello registreringen instruktioner för varje plattform, har eftersom det ändringar det också.</span><span class="sxs-lookup"><span data-stu-id="edc4d-286">If your application makes use of push notifications, make note of hello specific registration instructions for each platform, as there have been some changes there as well.</span></span>

<span data-ttu-id="edc4d-287">När du har hello nya klientversionen redo prova mot projektet uppgraderade servern.</span><span class="sxs-lookup"><span data-stu-id="edc4d-287">When you have hello new client version ready, try it out against your upgraded server project.</span></span> <span data-ttu-id="edc4d-288">Du kan släppa en ny version av programmet-toocustomers efter verifierar att den fungerar.</span><span class="sxs-lookup"><span data-stu-id="edc4d-288">After validating that it works, you can release a new version of your application toocustomers.</span></span> <span data-ttu-id="edc4d-289">Slutligen, när dina kunder har fått en chans tooreceive dessa uppdateringar, du kan ta bort hello Mobile Services version av appen.</span><span class="sxs-lookup"><span data-stu-id="edc4d-289">Eventually, once your customers have had a chance tooreceive these updates, you can delete hello Mobile Services version of your app.</span></span> <span data-ttu-id="edc4d-290">Nu är du har uppgraderat tooan App Service-Mobilapp med hjälp av hello senaste Mobile Apps server-SDK.</span><span class="sxs-lookup"><span data-stu-id="edc4d-290">At this point, you have completely upgraded tooan App Service Mobile App using hello latest Mobile Apps server SDK.</span></span>

<!-- URLs. -->

[Azure-portalen]: https://portal.azure.com/
[klassiska Azure-portalen]: https://manage.windowsazure.com/
[vad är Mobilappar?]: app-service-mobile-value-prop.md
[I already use web sites and mobile services – how does App Service help me?]: /en-us/documentation/articles/app-service-mobile-value-prop-migration-from-mobile-services
[Mobile App-serverns SDK]: http://www.nuget.org/packages/microsoft.azure.mobile.server
[Create a Mobile App]: app-service-mobile-xamarin-ios-get-started.md
[Add push notifications tooyour mobile app]: app-service-mobile-xamarin-ios-get-started-push.md
[Add authentication tooyour mobile app]: app-service-mobile-xamarin-ios-get-started-users.md
[Azure Scheduler]: /en-us/documentation/services/scheduler/
[Web jobbet]: ../app-service-web/websites-webjobs-resources.md
[hur toouse hello .NET server SDK]: app-service-mobile-dotnet-backend-how-to-use-server-sdk.md
[Migrate from Mobile Services tooan App Service Mobile App]: app-service-mobile-migrating-from-mobile-services.md
[Migrate your existing Mobile Service tooApp Service]: app-service-mobile-migrating-from-mobile-services.md
[priser för Apptjänst]: https://azure.microsoft.com/en-us/pricing/details/app-service/
[översikt över SDK för .NET server]: app-service-mobile-dotnet-backend-how-to-use-server-sdk.md

---
title: "Uppgradera från Mobile Services till Azure App Service"
description: "Lär dig hur du lätt att uppgradera ditt Mobile Services-program till en Apptjänst Mobile App"
services: app-service\mobile
documentationcenter: 
author: ggailey777
manager: syntaxc4
editor: 
ms.assetid: 9c0ac353-afb6-462b-ab94-d91b8247322f
ms.service: app-service-mobile
ms.workload: mobile
ms.tgt_pltfrm: mobile
ms.devlang: dotnet
ms.topic: article
ms.date: 10/01/2016
ms.author: glenga
ms.openlocfilehash: 81173b34d0d3b07c5c49d867b1dc5060c7311f12
ms.sourcegitcommit: 02e69c4a9d17645633357fe3d46677c2ff22c85a
ms.translationtype: MT
ms.contentlocale: sv-SE
ms.lasthandoff: 08/03/2017
---
# <a name="upgrade-your-existing-net-azure-mobile-service-to-app-service"></a><span data-ttu-id="8de2e-103">Uppgradera din befintliga Mobiltjänst för .NET-Azure till App Service</span><span class="sxs-lookup"><span data-stu-id="8de2e-103">Upgrade your existing .NET Azure Mobile Service to App Service</span></span>
<span data-ttu-id="8de2e-104">Apptjänst Mobile är ett nytt sätt att skapa mobila program med Microsoft Azure.</span><span class="sxs-lookup"><span data-stu-id="8de2e-104">App Service Mobile is a new way to build mobile applications using Microsoft Azure.</span></span> <span data-ttu-id="8de2e-105">Läs mer i [vad är Mobilappar?].</span><span class="sxs-lookup"><span data-stu-id="8de2e-105">To learn more, see [What are Mobile Apps?].</span></span>

<span data-ttu-id="8de2e-106">Det här avsnittet beskriver hur du uppgraderar ett befintligt program i .NET-serverdel från Azure Mobile Services till en ny Apptjänst Mobilappar.</span><span class="sxs-lookup"><span data-stu-id="8de2e-106">This topic describes how to upgrade an existing .NET backend application from Azure Mobile Services to a new App Service Mobile Apps.</span></span> <span data-ttu-id="8de2e-107">Medan du utför uppgraderingen fortsätter befintliga mobiltjänster programmet att fungera.</span><span class="sxs-lookup"><span data-stu-id="8de2e-107">While you perform this upgrade, your existing Mobile Services application can continue to operate.</span></span>   <span data-ttu-id="8de2e-108">Om du behöver uppgradera ett Node.js-program för serverdelen finns [uppgraderar din Mobile Services för Node.js](app-service-mobile-node-backend-upgrading-from-mobile-services.md).</span><span class="sxs-lookup"><span data-stu-id="8de2e-108">If you need to upgrade a Node.js backend application, refer to [Upgrading your Node.js Mobile Services](app-service-mobile-node-backend-upgrading-from-mobile-services.md).</span></span>

<span data-ttu-id="8de2e-109">När en mobilserverdel uppgraderas till Azure App Service, den har åtkomst till alla funktioner i Apptjänst och debiteras enligt [priser för Apptjänst], inte Mobile Services priser.</span><span class="sxs-lookup"><span data-stu-id="8de2e-109">When a mobile backend is upgraded to Azure App Service, it has access to all App Service features and are billed according to [App Service pricing], not Mobile Services pricing.</span></span>

## <a name="migrate-vs-upgrade"></a><span data-ttu-id="8de2e-110">Migrera kontra uppgradering</span><span class="sxs-lookup"><span data-stu-id="8de2e-110">Migrate vs. upgrade</span></span>
[!INCLUDE [app-service-mobile-migrate-vs-upgrade](../../includes/app-service-mobile-migrate-vs-upgrade.md)]

> [!TIP]
> <span data-ttu-id="8de2e-111">Vi rekommenderar att du [utför en migrering](app-service-mobile-migrating-from-mobile-services.md) innan du fortsätter med uppgraderingen.</span><span class="sxs-lookup"><span data-stu-id="8de2e-111">It is recommended that you [perform a migration](app-service-mobile-migrating-from-mobile-services.md) before going through an upgrade.</span></span> <span data-ttu-id="8de2e-112">På så sätt kan du spärra båda versionerna av programmet på samma App Service-Plan och innebära utan extra kostnad.</span><span class="sxs-lookup"><span data-stu-id="8de2e-112">This way, you can put both versions of your application on the same App Service Plan and incur no additional cost.</span></span>
>
>

### <a name="improvements-in-mobile-apps-net-server-sdk"></a><span data-ttu-id="8de2e-113">Förbättringar i Mobile Apps .NET server SDK</span><span class="sxs-lookup"><span data-stu-id="8de2e-113">Improvements in Mobile Apps .NET server SDK</span></span>
<span data-ttu-id="8de2e-114">Uppgradera till den nya [Mobile Apps-SDK](https://www.nuget.org/packages/Microsoft.Azure.Mobile.Server/) ger följande fördelar:</span><span class="sxs-lookup"><span data-stu-id="8de2e-114">Upgrading to the new [Mobile Apps SDK](https://www.nuget.org/packages/Microsoft.Azure.Mobile.Server/) provides the following benefits:</span></span>

* <span data-ttu-id="8de2e-115">Större flexibilitet på NuGet-beroenden.</span><span class="sxs-lookup"><span data-stu-id="8de2e-115">More flexibility on NuGet dependencies.</span></span> <span data-ttu-id="8de2e-116">Värdmiljön ger längre sina egna versioner av NuGet-paket, så du kan använda alternativa kompatibla versioner.</span><span class="sxs-lookup"><span data-stu-id="8de2e-116">The hosting environment no longer provides its own versions of NuGet packages, so you can use alternative compatible versions.</span></span> <span data-ttu-id="8de2e-117">Om det finns nya bugfixes för kritiska uppdateringar eller säkerhetsuppdateringar till Mobile Server SDK eller beroenden, måste du uppdatera tjänsten manuellt.</span><span class="sxs-lookup"><span data-stu-id="8de2e-117">However, if there are new critical bugfixes or security updates to the Mobile Server SDK or dependencies, you must update your service manually.</span></span>
* <span data-ttu-id="8de2e-118">Större flexibilitet i mobila SDK.</span><span class="sxs-lookup"><span data-stu-id="8de2e-118">More flexibility in the mobile SDK.</span></span> <span data-ttu-id="8de2e-119">Du kan styra vilka funktioner som uttryckligen och vägar har ställts in, till exempel autentisering, tabell API: er och slutpunkten för push-registrering.</span><span class="sxs-lookup"><span data-stu-id="8de2e-119">You can explicitly control which features and routes are set up, such as authentication, table APIs, and the push registration endpoint.</span></span> <span data-ttu-id="8de2e-120">Läs mer i [hur du använder SDK för .NET-server för Azure Mobile Apps](app-service-mobile-dotnet-backend-how-to-use-server-sdk.md).</span><span class="sxs-lookup"><span data-stu-id="8de2e-120">To learn more, see [How to use the .NET server SDK for Azure Mobile Apps](app-service-mobile-dotnet-backend-how-to-use-server-sdk.md).</span></span>
* <span data-ttu-id="8de2e-121">Stöd för andra typer av ASP.NET-projekt och flöden.</span><span class="sxs-lookup"><span data-stu-id="8de2e-121">Support for other ASP.NET project types and routes.</span></span> <span data-ttu-id="8de2e-122">Du kan nu vara värd för MVC- och webb-API domänkontrollanter i samma projekt som projektet mobila serverdel.</span><span class="sxs-lookup"><span data-stu-id="8de2e-122">You can now host MVC and Web API controllers in the same project as your mobile backend project.</span></span>
* <span data-ttu-id="8de2e-123">Stöd för nya App Service autentiseringsfunktioner, som gör det möjligt att använda en vanlig Autentiseringskonfiguration i ditt webb- och mobilappar.</span><span class="sxs-lookup"><span data-stu-id="8de2e-123">Support for new App Service authentication features, which allow you to use a common authentication configuration across your web and mobile apps.</span></span>

## <span data-ttu-id="8de2e-124"><a name="overview"></a>Uppgradera översikt</span><span class="sxs-lookup"><span data-stu-id="8de2e-124"><a name="overview"></a>Basic upgrade overview</span></span>
<span data-ttu-id="8de2e-125">I många fall blir uppgraderar bara växla till den nya servern för Mobile Apps SDK och publicera din kod till en ny instans för Mobilapp.</span><span class="sxs-lookup"><span data-stu-id="8de2e-125">In many cases, upgrading will be as simple as switching to the new Mobile Apps server SDK and republishing your code onto a new Mobile App instance.</span></span> <span data-ttu-id="8de2e-126">Det finns dock några scenarier som kräver ytterligare konfigurering, till exempel scenarier med avancerad autentisering och arbeta med schemalagda jobb.</span><span class="sxs-lookup"><span data-stu-id="8de2e-126">There are, however some scenarios which will require some additional configuration, such as advanced authentication scenarios and working with scheduled jobs.</span></span> <span data-ttu-id="8de2e-127">Var och en av dessa beskrivs i senare avsnitt.</span><span class="sxs-lookup"><span data-stu-id="8de2e-127">Each of these is covered in the later sections.</span></span>

> [!TIP]
> <span data-ttu-id="8de2e-128">Det rekommenderas att du läser och förstå resten av det här avsnittet helt innan du påbörjar en uppgradering.</span><span class="sxs-lookup"><span data-stu-id="8de2e-128">It is advised that you read and understand the rest of this topic completely before starting an upgrade.</span></span> <span data-ttu-id="8de2e-129">Anteckna alla funktioner som du använder som kallas nedan.</span><span class="sxs-lookup"><span data-stu-id="8de2e-129">Make note of any features you use which are called out below.</span></span>
>
>

<span data-ttu-id="8de2e-130">Klienten för Mobile Services SDK: er **inte** kompatibel med den nya servern för Mobile Apps SDK.</span><span class="sxs-lookup"><span data-stu-id="8de2e-130">The Mobile Services client SDKs are **not** compatible with the new Mobile Apps server SDK.</span></span> <span data-ttu-id="8de2e-131">Du bör inte publicera ändringar till en plats som betjänar publicerade klienter för att kunna erbjuda kontinuitet i tjänsten för din app.</span><span class="sxs-lookup"><span data-stu-id="8de2e-131">In order to provide continuity of service for your app, you should not publish changes to a site currently serving published clients.</span></span> <span data-ttu-id="8de2e-132">I stället bör du skapa en ny mobil app som fungerar som en dubblett.</span><span class="sxs-lookup"><span data-stu-id="8de2e-132">Instead, you should create a new mobile app that serves as a duplicate.</span></span> <span data-ttu-id="8de2e-133">Du kan publicera det här programmet på samma App Service-plan för att undvika ytterligare kostnader.</span><span class="sxs-lookup"><span data-stu-id="8de2e-133">You can put this application on the same App Service plan to avoid incurring additional financial cost.</span></span>

<span data-ttu-id="8de2e-134">Du måste sedan två versioner av programmet: en som förblir densamma och fungerar publicerade appar i jokertecken och andra som du kan sedan uppgradera och mål med en ny klientversion.</span><span class="sxs-lookup"><span data-stu-id="8de2e-134">You will then have two versions of the application: one which stays the same and serves published apps in the wild, and the other which you can then upgrade and target with a new client release.</span></span> <span data-ttu-id="8de2e-135">Du kan flytta och testa din kod i din takt, men bör du se till att alla felkorrigeringar som du gör gäller för båda.</span><span class="sxs-lookup"><span data-stu-id="8de2e-135">You can move and test your code at your pace, but you should make sure that any bug fixes you make get applied to both.</span></span> <span data-ttu-id="8de2e-136">När du anser att ett önskat antal klientdatorer appar i jokertecken har uppdaterat till den senaste versionen, du kan ta bort den ursprungliga migrerade appen om du vill ha.</span><span class="sxs-lookup"><span data-stu-id="8de2e-136">Once you feel that a desired number of client apps in the wild have updated to the latest version, you can delete the original migrated app if you desire.</span></span>

<span data-ttu-id="8de2e-137">Fullständig dispositionen för uppgraderingen är följande:</span><span class="sxs-lookup"><span data-stu-id="8de2e-137">The full outline for the upgrade process is as follows:</span></span>

1. <span data-ttu-id="8de2e-138">Skapa en ny Mobile App</span><span class="sxs-lookup"><span data-stu-id="8de2e-138">Create a new Mobile App</span></span>
2. <span data-ttu-id="8de2e-139">Uppdatera projektet om du vill använda den nya Server-SDK</span><span class="sxs-lookup"><span data-stu-id="8de2e-139">Update the project to use the new Server SDKs</span></span>
3. <span data-ttu-id="8de2e-140">Använda en ny version av klientprogrammet</span><span class="sxs-lookup"><span data-stu-id="8de2e-140">Release a new version of your client application</span></span>
4. <span data-ttu-id="8de2e-141">(Valfritt) Ta bort din ursprungliga migrerade instans</span><span class="sxs-lookup"><span data-stu-id="8de2e-141">(Optional) Delete your original migrated instance</span></span>

## <span data-ttu-id="8de2e-142"><a name="mobile-app-version"></a>Skapa en andra instans av programmet</span><span class="sxs-lookup"><span data-stu-id="8de2e-142"><a name="mobile-app-version"></a>Creating a second application instance</span></span>
<span data-ttu-id="8de2e-143">Det första steget i uppgraderingen är att skapa resursen Mobilapp som ska vara värd för den nya versionen av programmet.</span><span class="sxs-lookup"><span data-stu-id="8de2e-143">The first step in upgrading is to create the Mobile App resource which will host the new version of your application.</span></span> <span data-ttu-id="8de2e-144">Om du redan har migrerat en befintlig mobila tjänst kommer du vill skapa den här versionen på samma värd plan.</span><span class="sxs-lookup"><span data-stu-id="8de2e-144">If you have already migrated an existing mobile service, you will want to create this version on the same hosting plan.</span></span> <span data-ttu-id="8de2e-145">Öppna den [Azure-portalen] och navigera till migrerade programmet.</span><span class="sxs-lookup"><span data-stu-id="8de2e-145">Open the [Azure portal] and navigate to your migrated application.</span></span> <span data-ttu-id="8de2e-146">Anteckna Apptjänstplan den körs på.</span><span class="sxs-lookup"><span data-stu-id="8de2e-146">Make note of the App Service Plan it is running on.</span></span>

<span data-ttu-id="8de2e-147">Skapa sedan den andra förekomsten av programmet genom att följa den [.NET-serverdel skapa instruktioner](app-service-mobile-dotnet-backend-how-to-use-server-sdk.md#create-app).</span><span class="sxs-lookup"><span data-stu-id="8de2e-147">Next, create the second application instance by following the [.NET backend creation instructions](app-service-mobile-dotnet-backend-how-to-use-server-sdk.md#create-app).</span></span> <span data-ttu-id="8de2e-148">När du uppmanas att välja du väljer App Service-Plan eller ”värd plan” du planen för migrerade programmet.</span><span class="sxs-lookup"><span data-stu-id="8de2e-148">When prompted to select you App Service Plan or "hosting plan" choose the plan of your migrated application.</span></span>

<span data-ttu-id="8de2e-149">Du förmodligen vill använda samma databas och Meddelandehubben som du gjorde i Mobile Services.</span><span class="sxs-lookup"><span data-stu-id="8de2e-149">You will likely want to use the same database and Notification Hub as you did in Mobile Services.</span></span> <span data-ttu-id="8de2e-150">Du kan kopiera värdena genom att öppna [Azure-portalen] och navigera till det ursprungliga programmet Klicka **inställningar** > **programinställningar**.</span><span class="sxs-lookup"><span data-stu-id="8de2e-150">You can copy these values by opening [Azure portal] and navigating to the original application, then click **Settings** > **Application settings**.</span></span> <span data-ttu-id="8de2e-151">Under **anslutningssträngar**, kopiera `MS_NotificationHubConnectionString` och `MS_TableConnectionString`.</span><span class="sxs-lookup"><span data-stu-id="8de2e-151">Under **Connection Strings**, copy `MS_NotificationHubConnectionString` and `MS_TableConnectionString`.</span></span> <span data-ttu-id="8de2e-152">Navigera till den nya platsen för uppgradering och klistra in dem i att skriva över befintliga värden.</span><span class="sxs-lookup"><span data-stu-id="8de2e-152">Navigate to your new upgrade site and paste them in, overwriting any existing values.</span></span> <span data-ttu-id="8de2e-153">Upprepa processen för alla andra programinställningar app-behov.</span><span class="sxs-lookup"><span data-stu-id="8de2e-153">Repeat this process for any other application settings your app needs.</span></span> <span data-ttu-id="8de2e-154">Om du inte använder en migrerad tjänst kan du läsa anslutningssträngar och app-inställningar från den **konfigurera** fliken för Mobile Services-avsnitt i den [klassiska Azure-portalen].</span><span class="sxs-lookup"><span data-stu-id="8de2e-154">If not using a migrated service, you can read connection strings and app settings from the **Configure** tab of the Mobile Services section of the [Azure classic portal].</span></span>

<span data-ttu-id="8de2e-155">Skapa en kopia av ASP.NET-projekt för ditt program och publicera det till den nya platsen.</span><span class="sxs-lookup"><span data-stu-id="8de2e-155">Make a copy of the ASP.NET project for your application and publish it to your new site.</span></span> <span data-ttu-id="8de2e-156">Med en kopia av klientprogrammet uppdateras med den nya URL, verifiera att allt fungerar som förväntat.</span><span class="sxs-lookup"><span data-stu-id="8de2e-156">Using a copy of your client application updated with the new URL, validate that everything works as expected.</span></span>

## <a name="updating-the-server-project"></a><span data-ttu-id="8de2e-157">Uppdatera serverprojektet</span><span class="sxs-lookup"><span data-stu-id="8de2e-157">Updating the server project</span></span>
<span data-ttu-id="8de2e-158">Mobilappar erbjuder en ny [Mobile App-serverns SDK] som innehåller en stor del av samma funktioner som Mobile Services runtime.</span><span class="sxs-lookup"><span data-stu-id="8de2e-158">Mobile Apps provides a new [Mobile App Server SDK] which provides much of the same functionality as the Mobile Services runtime.</span></span> <span data-ttu-id="8de2e-159">Först bör du ta bort alla referenser till Mobile Services-paket.</span><span class="sxs-lookup"><span data-stu-id="8de2e-159">First, you should remove all references to the Mobile Services packages.</span></span> <span data-ttu-id="8de2e-160">I NuGet-Pakethanteraren, söker du efter `WindowsAzure.MobileServices.Backend`.</span><span class="sxs-lookup"><span data-stu-id="8de2e-160">In the NuGet package manager, search for `WindowsAzure.MobileServices.Backend`.</span></span> <span data-ttu-id="8de2e-161">De flesta appar kommer att se flera paket här, inklusive `WindowsAzure.MobileServices.Backend.Tables` och `WindowsAzure.MobileServices.Backend.Entity`.</span><span class="sxs-lookup"><span data-stu-id="8de2e-161">Most apps will see several packages here, including `WindowsAzure.MobileServices.Backend.Tables` and `WindowsAzure.MobileServices.Backend.Entity`.</span></span> <span data-ttu-id="8de2e-162">I sådana fall börjar med det lägsta paketet i beroendeträdet t ex `Entity`, och ta bort den.</span><span class="sxs-lookup"><span data-stu-id="8de2e-162">In such a case, start with the lowest package in the dependency tree, such as `Entity`, and remove it.</span></span> <span data-ttu-id="8de2e-163">När du uppmanas, ta inte bort alla beroende paket.</span><span class="sxs-lookup"><span data-stu-id="8de2e-163">When prompted, do not remove all dependant packages.</span></span> <span data-ttu-id="8de2e-164">Upprepa processen tills du har tagit bort `WindowsAzure.MobileServices.Backend` sig själv.</span><span class="sxs-lookup"><span data-stu-id="8de2e-164">Repeat this process until you have removed `WindowsAzure.MobileServices.Backend` itself.</span></span>

<span data-ttu-id="8de2e-165">Nu har du ett projekt som inte längre refererar till Mobile Services SDK.</span><span class="sxs-lookup"><span data-stu-id="8de2e-165">At this point you will have a project that no longer references Mobile Services SDKs.</span></span>

<span data-ttu-id="8de2e-166">Nästa lägger du till referenser Mobile Apps-SDK.</span><span class="sxs-lookup"><span data-stu-id="8de2e-166">Next you will add references the Mobile Apps SDK.</span></span> <span data-ttu-id="8de2e-167">För den här uppgraderingen de flesta utvecklare ska du hämta och installera den `Microsoft.Azure.Mobile.Server.Quickstart` paketet, eftersom detta hämtar i uppsättningen av hela krävs.</span><span class="sxs-lookup"><span data-stu-id="8de2e-167">For this upgrade, most developers will want to download and install the `Microsoft.Azure.Mobile.Server.Quickstart` package, as this will pull in the entire required set.</span></span>

<span data-ttu-id="8de2e-168">Det blir ett ganska stort antal kompileringsfel som uppstår till följd av skillnaderna mellan SDK: erna, men dessa är lätta att adressen och beskrivs i resten av det här avsnittet.</span><span class="sxs-lookup"><span data-stu-id="8de2e-168">There will be quite a few compiler errors resulting from differences between the SDKs, but these are easy to address and are covered in the rest of this section.</span></span>

### <a name="base-configuration"></a><span data-ttu-id="8de2e-169">Grundläggande konfiguration</span><span class="sxs-lookup"><span data-stu-id="8de2e-169">Base configuration</span></span>
<span data-ttu-id="8de2e-170">Sedan, i WebApiConfig.cs, du kan ersätta:</span><span class="sxs-lookup"><span data-stu-id="8de2e-170">Then, in WebApiConfig.cs, you can replace:</span></span>

        // Use this class to set configuration options for your mobile service
        ConfigOptions options = new ConfigOptions();

        // Use this class to set WebAPI configuration options
        HttpConfiguration config = ServiceConfig.Initialize(new ConfigBuilder(options));

<span data-ttu-id="8de2e-171">med</span><span class="sxs-lookup"><span data-stu-id="8de2e-171">with</span></span>

        HttpConfiguration config = new HttpConfiguration();
        new MobileAppConfiguration()
            .UseDefaultConfiguration()
        .ApplyTo(config);

> [!NOTE]
> <span data-ttu-id="8de2e-172">Om du vill lära dig mer om den nya servern .NET SDK och Lägg till/ta bort funktioner från din app kan du se den [hur du använder SDK för .NET-server] avsnittet.</span><span class="sxs-lookup"><span data-stu-id="8de2e-172">If you wish to learn more about the new .NET server SDK and how to add/remove features from your app, please see the [How to use the .NET server SDK] topic.</span></span>
>
>

<span data-ttu-id="8de2e-173">Om din app använder autentiseringsfunktioner måste du också registrera en OWIN-mellanprogram.</span><span class="sxs-lookup"><span data-stu-id="8de2e-173">If your app makes use of the authentication features, you will also need to register an OWIN middleware.</span></span> <span data-ttu-id="8de2e-174">I det här fallet bör du flytta konfigurationskoden ovan till en ny OWIN-startklass.</span><span class="sxs-lookup"><span data-stu-id="8de2e-174">In this case, you should move the above configuration code into a new OWIN Startup class.</span></span>

1. <span data-ttu-id="8de2e-175">Lägg till NuGet-paketet `Microsoft.Owin.Host.SystemWeb` om det inte redan ingår i projektet.</span><span class="sxs-lookup"><span data-stu-id="8de2e-175">Add the NuGet package `Microsoft.Owin.Host.SystemWeb` if it is not already included in your project.</span></span>
2. <span data-ttu-id="8de2e-176">I Visual Studio högerklickar du på projektet och välj **Lägg till** -> **nytt objekt**.</span><span class="sxs-lookup"><span data-stu-id="8de2e-176">In Visual Studio, right click on your project and select **Add** -> **New Item**.</span></span> <span data-ttu-id="8de2e-177">Välj **Web** -> **allmänna** -> **OWIN-startklass**.</span><span class="sxs-lookup"><span data-stu-id="8de2e-177">Select **Web** -> **General** -> **OWIN Startup class**.</span></span>
3. <span data-ttu-id="8de2e-178">Flytta koden ovan för MobileAppConfiguration från `WebApiConfig.Register()` till den `Configuration()` metod för den nya Start-klassen.</span><span class="sxs-lookup"><span data-stu-id="8de2e-178">Move the above code for MobileAppConfiguration from `WebApiConfig.Register()` to the `Configuration()` method of your new startup class.</span></span>

<span data-ttu-id="8de2e-179">Kontrollera att den `Configuration()` metoden slutar med:</span><span class="sxs-lookup"><span data-stu-id="8de2e-179">Make sure the `Configuration()` method ends with:</span></span>

        app.UseWebApi(config)
        app.UseAppServiceAuthentication(config);

<span data-ttu-id="8de2e-180">Det finns ytterligare ändringar som är relaterade till autentisering som beskrivs i avsnittet fullständiga autentiseringen.</span><span class="sxs-lookup"><span data-stu-id="8de2e-180">There are additional changes related to authentication which are covered in the full authentication section below.</span></span>

### <a name="working-with-data"></a><span data-ttu-id="8de2e-181">Arbeta med Data</span><span class="sxs-lookup"><span data-stu-id="8de2e-181">Working with Data</span></span>
<span data-ttu-id="8de2e-182">I Mobile Services mobila appnamnet visas som standard schemanamn i Entity Framework-installationsprogrammet.</span><span class="sxs-lookup"><span data-stu-id="8de2e-182">In Mobile Services, the mobile app name served as the default schema name in the Entity Framework setup.</span></span>

<span data-ttu-id="8de2e-183">Så att du har samma schema refereras som tidigare, Använd följande för att ställa in schemat i DbContext för programmet:</span><span class="sxs-lookup"><span data-stu-id="8de2e-183">To ensure that you have the same schema being referenced as before, use the following to set the schema in the DbContext for your application:</span></span>

        string schema = System.Configuration.ConfigurationManager.AppSettings.Get("MS_MobileServiceName");

<span data-ttu-id="8de2e-184">Kontrollera att du har MS_MobileServiceName ange om du gör det som nämns ovan.</span><span class="sxs-lookup"><span data-stu-id="8de2e-184">Please make sure you have MS_MobileServiceName set if you do the above.</span></span> <span data-ttu-id="8de2e-185">Du kan också ange en annan schemanamnet om tillämpningsprogrammet anpassat detta tidigare.</span><span class="sxs-lookup"><span data-stu-id="8de2e-185">You can also provide another schema name if your application customized this previously.</span></span>

### <a name="system-properties"></a><span data-ttu-id="8de2e-186">Egenskaper för system</span><span class="sxs-lookup"><span data-stu-id="8de2e-186">System Properties</span></span>
#### <a name="naming"></a><span data-ttu-id="8de2e-187">Namngivning</span><span class="sxs-lookup"><span data-stu-id="8de2e-187">Naming</span></span>
<span data-ttu-id="8de2e-188">I Azure Mobile Services-servern SDK Systemegenskaper alltid innehålla ett dubbelt understreck (`__`)-prefixet för egenskaperna:</span><span class="sxs-lookup"><span data-stu-id="8de2e-188">In the Azure Mobile Services server SDK, system properties always contain a double underscore (`__`) prefix for the properties:</span></span>

* <span data-ttu-id="8de2e-189">__createdAt</span><span class="sxs-lookup"><span data-stu-id="8de2e-189">__createdAt</span></span>
* <span data-ttu-id="8de2e-190">__updatedAt</span><span class="sxs-lookup"><span data-stu-id="8de2e-190">__updatedAt</span></span>
* <span data-ttu-id="8de2e-191">__deleted</span><span class="sxs-lookup"><span data-stu-id="8de2e-191">__deleted</span></span>
* <span data-ttu-id="8de2e-192">__version</span><span class="sxs-lookup"><span data-stu-id="8de2e-192">__version</span></span>

<span data-ttu-id="8de2e-193">SDK: er för Mobile Services-klienten har särskilda logik för parsning av Systemegenskaper i det här formatet.</span><span class="sxs-lookup"><span data-stu-id="8de2e-193">The Mobile Services client SDKs have special logic for parsing system properties in this format.</span></span>

<span data-ttu-id="8de2e-194">I Azure Mobile Apps Systemegenskaper inte längre har en särskild format och har följande namn:</span><span class="sxs-lookup"><span data-stu-id="8de2e-194">In Azure Mobile Apps, system properties no longer have a special format and have the following names:</span></span>

* <span data-ttu-id="8de2e-195">CreatedAt</span><span class="sxs-lookup"><span data-stu-id="8de2e-195">createdAt</span></span>
* <span data-ttu-id="8de2e-196">updatedAt</span><span class="sxs-lookup"><span data-stu-id="8de2e-196">updatedAt</span></span>
* <span data-ttu-id="8de2e-197">ta bort</span><span class="sxs-lookup"><span data-stu-id="8de2e-197">deleted</span></span>
* <span data-ttu-id="8de2e-198">Version</span><span class="sxs-lookup"><span data-stu-id="8de2e-198">version</span></span>

<span data-ttu-id="8de2e-199">Mobile Apps klienten SDK: er använda de nya egenskaper för namn, så inga ändringar krävs för att klientkod.</span><span class="sxs-lookup"><span data-stu-id="8de2e-199">The Mobile Apps client SDKs use the new system properties names, so no changes are required to client code.</span></span> <span data-ttu-id="8de2e-200">Men om du direkt gör REST-anrop till din tjänst bör du ändra dina frågor i enlighet med detta.</span><span class="sxs-lookup"><span data-stu-id="8de2e-200">However, if you are directly making REST calls to your service then you should change your queries accordingly.</span></span>

#### <a name="local-store"></a><span data-ttu-id="8de2e-201">Lokalt Arkiv</span><span class="sxs-lookup"><span data-stu-id="8de2e-201">Local store</span></span>
<span data-ttu-id="8de2e-202">Ändringar till namnen på Systemegenskaper innebär att en lokal databas offlinesynkronisering för Mobile Services inte är kompatibel med Mobile Apps.</span><span class="sxs-lookup"><span data-stu-id="8de2e-202">The changes to the names of system properties mean that an offline sync local database for Mobile Services is not compatible with Mobile Apps.</span></span> <span data-ttu-id="8de2e-203">Om möjligt bör du undvika uppgradering av klienten appar från Mobile Services för Mobilappar förrän efter väntande ändringar har skickats till servern.</span><span class="sxs-lookup"><span data-stu-id="8de2e-203">If possible, you should avoid upgrading client apps from Mobile Services to Mobile Apps until after pending changes have been sent to the server.</span></span> <span data-ttu-id="8de2e-204">Sedan kan använda appen uppgraderade ett nytt databasnamn.</span><span class="sxs-lookup"><span data-stu-id="8de2e-204">Then, the upgraded app should use a new database filename.</span></span>

<span data-ttu-id="8de2e-205">Om ett klientprogram uppgraderas från Mobile Services till Mobilappar när det finns väntande offline ändringar i kö för åtgärden, måste systemdatabasen uppdateras för att använda nya kolumnnamn.</span><span class="sxs-lookup"><span data-stu-id="8de2e-205">If a client app is upgraded from Mobile Services to Mobile Apps while there are pending offline changes in the operation queue, then the system database must be updated to use the new column names.</span></span> <span data-ttu-id="8de2e-206">På iOS, kan detta uppnås med hjälp av lightweight migreringar ändra kolumnnamnen.</span><span class="sxs-lookup"><span data-stu-id="8de2e-206">On iOS, this can be achieved using lightweight migrations to change the column names.</span></span> <span data-ttu-id="8de2e-207">På Android- och .NET hanterad klient ska du skriva anpassade SQL Byt namn på kolumner för din datatabeller för objektet.</span><span class="sxs-lookup"><span data-stu-id="8de2e-207">On Android and the .NET managed client, you should write custom SQL to rename the columns for your data object tables.</span></span>

<span data-ttu-id="8de2e-208">På iOS, bör du ändra schemat för dina data entiteter till följande grundläggande information.</span><span class="sxs-lookup"><span data-stu-id="8de2e-208">On iOS, you should change your Core Data schema for your data entities to match the following.</span></span> <span data-ttu-id="8de2e-209">Observera att egenskaperna `createdAt`, `updatedAt` och `version` har inte längre ett `ms_` prefix:</span><span class="sxs-lookup"><span data-stu-id="8de2e-209">Note that the properties `createdAt`, `updatedAt` and `version` no longer have an `ms_` prefix:</span></span>

| <span data-ttu-id="8de2e-210">Attribut</span><span class="sxs-lookup"><span data-stu-id="8de2e-210">Attribute</span></span> | <span data-ttu-id="8de2e-211">Typ</span><span class="sxs-lookup"><span data-stu-id="8de2e-211">Type</span></span> | <span data-ttu-id="8de2e-212">Obs!</span><span class="sxs-lookup"><span data-stu-id="8de2e-212">Note</span></span> |
| --- | --- | --- |
| <span data-ttu-id="8de2e-213">id</span><span class="sxs-lookup"><span data-stu-id="8de2e-213">id</span></span> |<span data-ttu-id="8de2e-214">Strängen som markerats krävs</span><span class="sxs-lookup"><span data-stu-id="8de2e-214">String, marked required</span></span> |<span data-ttu-id="8de2e-215">primärnyckeln i fjärranslutna store</span><span class="sxs-lookup"><span data-stu-id="8de2e-215">primary key in remote store</span></span> |
| <span data-ttu-id="8de2e-216">CreatedAt</span><span class="sxs-lookup"><span data-stu-id="8de2e-216">createdAt</span></span> |<span data-ttu-id="8de2e-217">Date</span><span class="sxs-lookup"><span data-stu-id="8de2e-217">Date</span></span> |<span data-ttu-id="8de2e-218">(valfritt) mappas till createdAt Systemegenskapen</span><span class="sxs-lookup"><span data-stu-id="8de2e-218">(optional) maps to createdAt system property</span></span> |
| <span data-ttu-id="8de2e-219">updatedAt</span><span class="sxs-lookup"><span data-stu-id="8de2e-219">updatedAt</span></span> |<span data-ttu-id="8de2e-220">Date</span><span class="sxs-lookup"><span data-stu-id="8de2e-220">Date</span></span> |<span data-ttu-id="8de2e-221">(valfritt) mappas till updatedAt Systemegenskapen</span><span class="sxs-lookup"><span data-stu-id="8de2e-221">(optional) maps to updatedAt system property</span></span> |
| <span data-ttu-id="8de2e-222">Version</span><span class="sxs-lookup"><span data-stu-id="8de2e-222">version</span></span> |<span data-ttu-id="8de2e-223">Sträng</span><span class="sxs-lookup"><span data-stu-id="8de2e-223">String</span></span> |<span data-ttu-id="8de2e-224">(valfritt) används för att identifiera konflikter, mappas till version</span><span class="sxs-lookup"><span data-stu-id="8de2e-224">(optional) used to detect conflicts, maps to version</span></span> |

#### <a name="querying-system-properties"></a><span data-ttu-id="8de2e-225">Frågar Systemegenskaper</span><span class="sxs-lookup"><span data-stu-id="8de2e-225">Querying system properties</span></span>
<span data-ttu-id="8de2e-226">I Azure Mobile Services Systemegenskaper skickas inte som standard, men endast när de begär med hjälp av frågesträngen `__systemProperties`.</span><span class="sxs-lookup"><span data-stu-id="8de2e-226">In Azure Mobile Services, system properties are not sent by default, but only when they are requested using the query string `__systemProperties`.</span></span> <span data-ttu-id="8de2e-227">Däremot i Azure Mobile Apps system egenskaper är **alltid valt** eftersom de är en del av objektmodellen server SDK.</span><span class="sxs-lookup"><span data-stu-id="8de2e-227">In contrast, in Azure Mobile Apps system properties are **always selected** since they are part of the server SDK object model.</span></span>

<span data-ttu-id="8de2e-228">Den här ändringen påverkar huvudsakligen anpassade implementeringar av domän chefer, till exempel tillägg av `MappedEntityDomainManager`.</span><span class="sxs-lookup"><span data-stu-id="8de2e-228">This change mainly impacts custom implementations of domain managers, such as extensions of `MappedEntityDomainManager`.</span></span> <span data-ttu-id="8de2e-229">I Mobile Services, om en klient begär aldrig alla Systemegenskaper är det möjligt att använda en `MappedEntityDomainManager` som faktiskt mappar inte alla egenskaper.</span><span class="sxs-lookup"><span data-stu-id="8de2e-229">In Mobile Services, if a client never requests any system properties, it is possible to use a `MappedEntityDomainManager` that does not actually map all properties.</span></span> <span data-ttu-id="8de2e-230">Men i Azure Mobile Apps genereras egenskaperna omappade ett fel i GET-frågor.</span><span class="sxs-lookup"><span data-stu-id="8de2e-230">However, in Azure Mobile Apps, these unmapped properties will cause an error in GET queries.</span></span>

<span data-ttu-id="8de2e-231">Det enklaste sättet att lösa problemet är att ändra din DTOs så att de ärver från `ITableData` i stället för `EntityData`.</span><span class="sxs-lookup"><span data-stu-id="8de2e-231">The easiest way to resolve the issue is to modify your DTOs so that they inherit from `ITableData` instead of `EntityData`.</span></span> <span data-ttu-id="8de2e-232">Lägg sedan till den `[NotMapped]` attribut till fälten som ska uteslutas.</span><span class="sxs-lookup"><span data-stu-id="8de2e-232">Then, add the `[NotMapped]` attribute to the fields that should be omitted.</span></span>

<span data-ttu-id="8de2e-233">Exempelvis definierar följande `TodoItem` utan system-egenskaper:</span><span class="sxs-lookup"><span data-stu-id="8de2e-233">For example, the following defines `TodoItem` with no system properties:</span></span>

    using System.ComponentModel.DataAnnotations.Schema;

    public class TodoItem : ITableData
    {
        public string Text { get; set; }

        public bool Complete { get; set; }

        public string Id { get; set; }

        [NotMapped]
        public DateTimeOffset? CreatedAt { get; set; }

        [NotMapped]
        public DateTimeOffset? UpdatedAt { get; set; }

        [NotMapped]
        public bool Deleted { get; set; }

        [NotMapped]
        public byte[] Version { get; set; }
    }

<span data-ttu-id="8de2e-234">Obs: om det uppstår fel `NotMapped`, lägga till en referens till sammansättningen `System.ComponentModel.DataAnnotations`.</span><span class="sxs-lookup"><span data-stu-id="8de2e-234">Note: if you get errors on `NotMapped`, add a reference to the assembly `System.ComponentModel.DataAnnotations`.</span></span>

### <a name="cors"></a><span data-ttu-id="8de2e-235">CORS</span><span class="sxs-lookup"><span data-stu-id="8de2e-235">CORS</span></span>
<span data-ttu-id="8de2e-236">Mobile Services med vissa stöd för CORS genom att omsluta ASP.NET CORS-lösning.</span><span class="sxs-lookup"><span data-stu-id="8de2e-236">Mobile Services included some support for CORS by wrapping the ASP.NET CORS solution.</span></span> <span data-ttu-id="8de2e-237">Detta lager med radbrytning har tagits bort för att ge utvecklare mer kontroll så att du direkt kan utnyttja [stöd för ASP.NET-CORS](http://www.asp.net/web-api/overview/security/enabling-cross-origin-requests-in-web-api).</span><span class="sxs-lookup"><span data-stu-id="8de2e-237">This wrapping layer has been removed to give the developer more control, so you can directly leverage [ASP.NET CORS support](http://www.asp.net/web-api/overview/security/enabling-cross-origin-requests-in-web-api).</span></span>

<span data-ttu-id="8de2e-238">De huvudsakliga problemområden om du använder CORS är som den `eTag` och `Location` huvuden måste tillåtas för klient-SDK: er ska fungera korrekt.</span><span class="sxs-lookup"><span data-stu-id="8de2e-238">The main areas of concern if using CORS are that the `eTag` and `Location` headers must be allowed in order for the client SDKs to work properly.</span></span>

### <a name="push-notifications"></a><span data-ttu-id="8de2e-239">Push-meddelanden</span><span class="sxs-lookup"><span data-stu-id="8de2e-239">Push Notifications</span></span>
<span data-ttu-id="8de2e-240">För distribution är objektet kanske saknas från Server SDK PushRegistrationHandler-klass.</span><span class="sxs-lookup"><span data-stu-id="8de2e-240">For push, the main item that you may find missing from the Server SDK is the PushRegistrationHandler class.</span></span> <span data-ttu-id="8de2e-241">Registreringar hanteras lite annorlunda i Mobile Apps och tagless registreringar är aktiverade som standard.</span><span class="sxs-lookup"><span data-stu-id="8de2e-241">Registrations are handled slightly differently in Mobile Apps, and tagless registrations are enabled by default.</span></span> <span data-ttu-id="8de2e-242">Hantera taggar kan åstadkommas med hjälp av anpassade API: er.</span><span class="sxs-lookup"><span data-stu-id="8de2e-242">Managing tags may be accomplished by using custom APIs.</span></span> <span data-ttu-id="8de2e-243">Finns det [registrering för taggar](app-service-mobile-dotnet-backend-how-to-use-server-sdk.md#tags) instruktioner för mer information.</span><span class="sxs-lookup"><span data-stu-id="8de2e-243">Please see the [registering for tags](app-service-mobile-dotnet-backend-how-to-use-server-sdk.md#tags) instructions for more information.</span></span>

### <a name="scheduled-jobs"></a><span data-ttu-id="8de2e-244">Schemalagda jobb</span><span class="sxs-lookup"><span data-stu-id="8de2e-244">Scheduled Jobs</span></span>
<span data-ttu-id="8de2e-245">Schemalagda jobb är inte inbyggda i Mobilappar, så alla befintliga jobb som du har i .NET-serverdel måste uppgraderas individuellt.</span><span class="sxs-lookup"><span data-stu-id="8de2e-245">Scheduled jobs are not built into Mobile Apps, so any existing jobs that you have in your .NET backend will need to be upgraded individually.</span></span> <span data-ttu-id="8de2e-246">Ett alternativ är att skapa en schemalagd [Web jobbet] på webbplatsen Mobilapp kod.</span><span class="sxs-lookup"><span data-stu-id="8de2e-246">One option is to create a scheduled [Web Job] on the Mobile App code site.</span></span> <span data-ttu-id="8de2e-247">Du kan också konfigurera en domänkontrollant som innehåller jobbkoden och konfigurera den [Azure Scheduler] att träffa den slutpunkten på det förväntade schemat.</span><span class="sxs-lookup"><span data-stu-id="8de2e-247">You could also set up a controller that holds your job code and configure the [Azure Scheduler] to hit that endpoint on the expected schedule.</span></span>

### <a name="miscellaneous-changes"></a><span data-ttu-id="8de2e-248">Funktionsförändringar</span><span class="sxs-lookup"><span data-stu-id="8de2e-248">Miscellaneous changes</span></span>
<span data-ttu-id="8de2e-249">Alla ApiControllers som används av en mobil klient måste nu har den `[MobileAppController]` attribut.</span><span class="sxs-lookup"><span data-stu-id="8de2e-249">All ApiControllers which will be consumed by a mobile client must now have the `[MobileAppController]` attribute.</span></span> <span data-ttu-id="8de2e-250">Det är inte längre ingår som standard så att andra ApiControllers gå påverkas inte av mobila-formaterare.</span><span class="sxs-lookup"><span data-stu-id="8de2e-250">This is no longer included by default so that other ApiControllers to go unaffected by the mobile formatters.</span></span>

<span data-ttu-id="8de2e-251">Den `ApiServices` objektet är inte längre ingår i SDK.</span><span class="sxs-lookup"><span data-stu-id="8de2e-251">The `ApiServices` object is no longer part of the SDK.</span></span> <span data-ttu-id="8de2e-252">Du kan använda följande för att komma åt Mobile App-inställningar:</span><span class="sxs-lookup"><span data-stu-id="8de2e-252">To access Mobile App settings, you can use the following:</span></span>

    MobileAppSettingsDictionary settings = this.Configuration.GetMobileAppSettingsProvider().GetMobileAppSettings();

<span data-ttu-id="8de2e-253">På liknande sätt, utförs nu loggning använda standard ASP.NET spårning:</span><span class="sxs-lookup"><span data-stu-id="8de2e-253">Similarly, logging is now accomplished using the standard ASP.NET trace writing:</span></span>

    ITraceWriter traceWriter = this.Configuration.Services.GetTraceWriter();
    traceWriter.Info("Hello, World");  

## <span data-ttu-id="8de2e-254"><a name="authentication"></a>Överväganden för autentisering</span><span class="sxs-lookup"><span data-stu-id="8de2e-254"><a name="authentication"></a>Authentication considerations</span></span>
<span data-ttu-id="8de2e-255">Autentiseringskomponenter i Mobile Services har nu flyttats till funktionen autentisering/auktorisering i Apptjänst.</span><span class="sxs-lookup"><span data-stu-id="8de2e-255">The authentication components of Mobile Services have now been moved into the App Service Authentication/Authorization feature.</span></span> <span data-ttu-id="8de2e-256">Du kan lära dig om hur du aktiverar detta för webbplatsen genom att läsa den [Lägg till autentisering i appen mobila](app-service-mobile-ios-get-started-users.md) avsnittet.</span><span class="sxs-lookup"><span data-stu-id="8de2e-256">You can learn about enabling this for your site by reading the [Add authentication to your mobile app](app-service-mobile-ios-get-started-users.md) topic.</span></span>

<span data-ttu-id="8de2e-257">För vissa leverantörer, till exempel AAD, Facebook och Google, bör du kunna utnyttja den befintliga registreringen från tillämpningsprogrammet kopia.</span><span class="sxs-lookup"><span data-stu-id="8de2e-257">For some providers, such as AAD, Facebook, and Google, you should be able to leverage the existing registration from your copy application.</span></span> <span data-ttu-id="8de2e-258">Du behöver bara gå till portalen för den identitetsleverantör och lägga till en ny omdirigerings-URL i registreringen.</span><span class="sxs-lookup"><span data-stu-id="8de2e-258">You simply need to navigate to the identity provider's portal and add a new redirect URL to the registration.</span></span> <span data-ttu-id="8de2e-259">Konfigurera autentisering/auktorisering i Apptjänst med klient-ID och hemlighet.</span><span class="sxs-lookup"><span data-stu-id="8de2e-259">Then configure App Service Authentication/Authorization with the client ID and secret.</span></span>

### <a name="controller-action-authorization"></a><span data-ttu-id="8de2e-260">Domänkontrollanten åtgärd auktorisering</span><span class="sxs-lookup"><span data-stu-id="8de2e-260">Controller action authorization</span></span>
<span data-ttu-id="8de2e-261">Alla instanser av den `[AuthorizeLevel(AuthorizationLevel.User)]` attributet nu måste ändras för att använda standard ASP.NET `[Authorize]` attribut.</span><span class="sxs-lookup"><span data-stu-id="8de2e-261">Any instances of the `[AuthorizeLevel(AuthorizationLevel.User)]` attribute must now be changed to use the standard ASP.NET `[Authorize]` attribute.</span></span> <span data-ttu-id="8de2e-262">Dessutom är domänkontrollanter nu anonym som standard, som i andra ASP.NET-program.</span><span class="sxs-lookup"><span data-stu-id="8de2e-262">Additionally, controllers are now Anonymous by default, as in other ASP.NET applications.</span></span>
<span data-ttu-id="8de2e-263">Om du använder något av de andra märke AuthorizeLevel alternativ, till exempel Admin eller ett program, Lägg till att de är borta.</span><span class="sxs-lookup"><span data-stu-id="8de2e-263">If you were using one of the other AuthorizeLevel options, such as Admin or Application, please note that these are gone.</span></span> <span data-ttu-id="8de2e-264">Du kan i stället konfigurera AuthorizationFilters för delade hemligheter eller konfigurera ett AAD-tjänstens huvudnamn för att aktivera service-to-service-anrop på ett säkert sätt.</span><span class="sxs-lookup"><span data-stu-id="8de2e-264">You can instead set up AuthorizationFilters for shared secrets or configure an AAD Service Principal to enable service-to-service calls securely.</span></span>

### <a name="getting-additional-user-information"></a><span data-ttu-id="8de2e-265">Hämtar användarinformation om ytterligare</span><span class="sxs-lookup"><span data-stu-id="8de2e-265">Getting additional user information</span></span>
<span data-ttu-id="8de2e-266">Du kan få ytterligare information, inklusive åtkomsttoken via den `GetAppServiceIdentityAsync()` metoden:</span><span class="sxs-lookup"><span data-stu-id="8de2e-266">You can get additional user information, including access tokens through the `GetAppServiceIdentityAsync()` method:</span></span>

        FacebookCredentials creds = await this.User.GetAppServiceIdentityAsync<FacebookCredentials>();

<span data-ttu-id="8de2e-267">Dessutom är det viktigt att notera att användar-ID mellan Mobile Services och Apptjänst Mobilappar skiljer sig om ditt program tar beroenden på användar-ID, till exempel lagra dem i en databas.</span><span class="sxs-lookup"><span data-stu-id="8de2e-267">Additionally, if your application takes dependencies on user IDs, such as storing them in a database, it is important to note that the user IDs between Mobile Services and App Service Mobile Apps are different.</span></span> <span data-ttu-id="8de2e-268">Du kan fortfarande få Mobile Services användar-ID, även om.</span><span class="sxs-lookup"><span data-stu-id="8de2e-268">You can still get the Mobile Services User ID, though.</span></span> <span data-ttu-id="8de2e-269">Alla ProviderCredentials underklasser har en användar-ID-egenskap.</span><span class="sxs-lookup"><span data-stu-id="8de2e-269">All of the ProviderCredentials subclasses have a UserId property.</span></span> <span data-ttu-id="8de2e-270">Så fortsätter från exempel innan:</span><span class="sxs-lookup"><span data-stu-id="8de2e-270">So continuing from the example before:</span></span>

        string mobileServicesUserId = creds.Provider + ":" + creds.UserId;

<span data-ttu-id="8de2e-271">Om din app tar några beroenden på användar-ID, är det viktigt att du använder samma registrering med en identitetsprovider om möjligt.</span><span class="sxs-lookup"><span data-stu-id="8de2e-271">If your app does take any dependencies on user IDs, it is important that you leverage the same registration with an identity provider if possible.</span></span> <span data-ttu-id="8de2e-272">Användar-ID är vanligtvis begränsade till registreringen program som har använts, så Vi presenterar en ny registrering kan skapa problem med matchande användare till deras data.</span><span class="sxs-lookup"><span data-stu-id="8de2e-272">User IDs are typically scoped to the application registration that was used, so introducing a new registration could create problems with matching users to their data.</span></span>

### <a name="custom-authentication"></a><span data-ttu-id="8de2e-273">Anpassad autentisering</span><span class="sxs-lookup"><span data-stu-id="8de2e-273">Custom authentication</span></span>
<span data-ttu-id="8de2e-274">Om din app använder en lösning för anpassad autentisering, kommer du vill kontrollera att den uppgraderade platsen har åtkomst till systemet.</span><span class="sxs-lookup"><span data-stu-id="8de2e-274">If your app is using a custom authentication solution, you will want to make sure that the upgraded site has access to the system.</span></span> <span data-ttu-id="8de2e-275">Följ instruktionerna för anpassad autentisering i nya den [översikt över SDK för .NET server] att integrera din lösning.</span><span class="sxs-lookup"><span data-stu-id="8de2e-275">Follow the new instructions for custom authentication in the [.NET server SDK overview] to integrate your solution.</span></span> <span data-ttu-id="8de2e-276">Observera att komponenter för anpassad autentisering är fortfarande under förhandsgranskning.</span><span class="sxs-lookup"><span data-stu-id="8de2e-276">Please note that the custom authentication components are still in preview.</span></span>

## <span data-ttu-id="8de2e-277"><a name="updating-clients"></a>Uppdatera klienter</span><span class="sxs-lookup"><span data-stu-id="8de2e-277"><a name="updating-clients"></a>Updating clients</span></span>
<span data-ttu-id="8de2e-278">När du har en operativa mobilappsserverdel kan arbeta du med en ny version av ditt klientprogram som använder den.</span><span class="sxs-lookup"><span data-stu-id="8de2e-278">Once you have an operational Mobile App backend, you can work on a new version of your client application which consumes it.</span></span> <span data-ttu-id="8de2e-279">Mobile Apps innehåller också en ny version av klienten SDK: er och liknar serveruppgraderingen ovan, behöver du ta bort alla referenser till SDK: er för Mobile Services innan du installerar Mobile Apps-versioner.</span><span class="sxs-lookup"><span data-stu-id="8de2e-279">Mobile Apps also includes a new version of the client SDKs, and similar to the server upgrade above, you will need to remove all references to the Mobile Services SDKs before installing the Mobile Apps versions.</span></span>

<span data-ttu-id="8de2e-280">En av de viktigaste ändringarna mellan versionerna är att konstruktorer längre kräver en nyckel för programmet.</span><span class="sxs-lookup"><span data-stu-id="8de2e-280">One of the main changes between the versions is that the constructors no longer require an application key.</span></span> <span data-ttu-id="8de2e-281">Du nu överföra bara URL-adressen till din Mobilapp.</span><span class="sxs-lookup"><span data-stu-id="8de2e-281">You now simply pass in the URL of your Mobile App.</span></span> <span data-ttu-id="8de2e-282">Till exempel på .NET-klienter på `MobileServiceClient` konstruktorn är nu:</span><span class="sxs-lookup"><span data-stu-id="8de2e-282">For example, on the .NET clients, the `MobileServiceClient` constructor is now:</span></span>

        public static MobileServiceClient MobileService = new MobileServiceClient(
            "https://contoso.azurewebsites.net", // URL of the Mobile App
        );

<span data-ttu-id="8de2e-283">Du kan läsa om hur du installerar nya SDK: er och använda den nya strukturen via länkarna nedan:</span><span class="sxs-lookup"><span data-stu-id="8de2e-283">You can read about installing the new SDKs and using the new structure via the links below:</span></span>

* [<span data-ttu-id="8de2e-284">iOS version 3.0.0 eller senare</span><span class="sxs-lookup"><span data-stu-id="8de2e-284">iOS version 3.0.0 or later</span></span>](app-service-mobile-ios-how-to-use-client-library.md)
* [<span data-ttu-id="8de2e-285">.NET (Windows/Xamarin) version 2.0.0 eller senare</span><span class="sxs-lookup"><span data-stu-id="8de2e-285">.NET (Windows/Xamarin) version 2.0.0 or later</span></span>](app-service-mobile-dotnet-how-to-use-client-library.md)

<span data-ttu-id="8de2e-286">Om ditt program gör användning av push-meddelanden, anteckna registreringen instruktioner för varje plattform, har eftersom det ändringar det också.</span><span class="sxs-lookup"><span data-stu-id="8de2e-286">If your application makes use of push notifications, make note of the specific registration instructions for each platform, as there have been some changes there as well.</span></span>

<span data-ttu-id="8de2e-287">När du har den nya klientversionen redo prova mot projektet uppgraderade servern.</span><span class="sxs-lookup"><span data-stu-id="8de2e-287">When you have the new client version ready, try it out against your upgraded server project.</span></span> <span data-ttu-id="8de2e-288">När du verifierar att det fungerar, kan du släppa en ny version av programmet till kunder.</span><span class="sxs-lookup"><span data-stu-id="8de2e-288">After validating that it works, you can release a new version of your application to customers.</span></span> <span data-ttu-id="8de2e-289">Slutligen, när dina kunder har haft möjlighet att få dessa uppdateringar, du kan ta bort Mobile Services-versionen av din app.</span><span class="sxs-lookup"><span data-stu-id="8de2e-289">Eventually, once your customers have had a chance to receive these updates, you can delete the Mobile Services version of your app.</span></span> <span data-ttu-id="8de2e-290">Nu är har du uppgraderat till en App Service-Mobilapp med hjälp av den senaste Mobile Apps servern SDK.</span><span class="sxs-lookup"><span data-stu-id="8de2e-290">At this point, you have completely upgraded to an App Service Mobile App using the latest Mobile Apps server SDK.</span></span>

<!-- URLs. -->

<span data-ttu-id="8de2e-291">[Azure-portalen]: https://portal.azure.com/</span><span class="sxs-lookup"><span data-stu-id="8de2e-291">[Azure portal]: https://portal.azure.com/</span></span>
<span data-ttu-id="8de2e-292">[klassiska Azure-portalen]: https://manage.windowsazure.com/</span><span class="sxs-lookup"><span data-stu-id="8de2e-292">[Azure classic portal]: https://manage.windowsazure.com/</span></span>
<span data-ttu-id="8de2e-293">[vad är Mobilappar?]: app-service-mobile-value-prop.md</span><span class="sxs-lookup"><span data-stu-id="8de2e-293">[What are Mobile Apps?]: app-service-mobile-value-prop.md</span></span>
[I already use web sites and mobile services – how does App Service help me?]: /en-us/documentation/articles/app-service-mobile-value-prop-migration-from-mobile-services
<span data-ttu-id="8de2e-294">[Mobile App-serverns SDK]: http://www.nuget.org/packages/microsoft.azure.mobile.server</span><span class="sxs-lookup"><span data-stu-id="8de2e-294">[Mobile App Server SDK]: http://www.nuget.org/packages/microsoft.azure.mobile.server</span></span>
[Create a Mobile App]: app-service-mobile-xamarin-ios-get-started.md
[Add push notifications to your mobile app]: app-service-mobile-xamarin-ios-get-started-push.md
[Add authentication to your mobile app]: app-service-mobile-xamarin-ios-get-started-users.md
<span data-ttu-id="8de2e-295">[Azure Scheduler]: /en-us/documentation/services/scheduler/</span><span class="sxs-lookup"><span data-stu-id="8de2e-295">[Azure Scheduler]: /en-us/documentation/services/scheduler/</span></span>
<span data-ttu-id="8de2e-296">[Web jobbet]: ../app-service-web/websites-webjobs-resources.md</span><span class="sxs-lookup"><span data-stu-id="8de2e-296">[Web Job]: ../app-service-web/websites-webjobs-resources.md</span></span>
<span data-ttu-id="8de2e-297">[hur du använder SDK för .NET-server]: app-service-mobile-dotnet-backend-how-to-use-server-sdk.md</span><span class="sxs-lookup"><span data-stu-id="8de2e-297">[How to use the .NET server SDK]: app-service-mobile-dotnet-backend-how-to-use-server-sdk.md</span></span>
[Migrate from Mobile Services to an App Service Mobile App]: app-service-mobile-migrating-from-mobile-services.md
[Migrate your existing Mobile Service to App Service]: app-service-mobile-migrating-from-mobile-services.md
<span data-ttu-id="8de2e-298">[priser för Apptjänst]: https://azure.microsoft.com/en-us/pricing/details/app-service/</span><span class="sxs-lookup"><span data-stu-id="8de2e-298">[App Service pricing]: https://azure.microsoft.com/en-us/pricing/details/app-service/</span></span>
<span data-ttu-id="8de2e-299">[översikt över SDK för .NET server]: app-service-mobile-dotnet-backend-how-to-use-server-sdk.md</span><span class="sxs-lookup"><span data-stu-id="8de2e-299">[.NET server SDK overview]: app-service-mobile-dotnet-backend-how-to-use-server-sdk.md</span></span>

---
title: aaaOffline datasynkronisering i Azure Mobile Apps | Microsoft Docs
description: "Konceptuell referens- och översikt över funktionen för synkronisering av hello offlinedata för Azure Mobile Apps"
documentationcenter: windows
author: ggailey777
manager: syntaxc4
editor: 
services: app-service\mobile
ms.assetid: 982fb683-8884-40da-96e6-77eeca2500e3
ms.service: app-service-mobile
ms.workload: mobile
ms.tgt_pltfrm: na
ms.devlang: multiple
ms.topic: article
ms.date: 10/30/2016
ms.author: glenga
ms.openlocfilehash: 58673240ba433651faf1f619ca5da33dd6459d2b
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: sv-SE
ms.lasthandoff: 10/06/2017
---
# <a name="offline-data-sync-in-azure-mobile-apps"></a><span data-ttu-id="0c363-103">Datasynkronisering offline i Azure Mobile Apps</span><span class="sxs-lookup"><span data-stu-id="0c363-103">Offline Data Sync in Azure Mobile Apps</span></span>
## <a name="what-is-offline-data-sync"></a><span data-ttu-id="0c363-104">Vad är datasynkronisering offline?</span><span class="sxs-lookup"><span data-stu-id="0c363-104">What is offline data sync?</span></span>
<span data-ttu-id="0c363-105">Datasynkronisering offline är en klient och server SDK-funktionen i Azure Mobilappar som gör det lätt för utvecklare toocreate appar som fungerar utan en nätverksanslutning.</span><span class="sxs-lookup"><span data-stu-id="0c363-105">Offline data sync is a client and server SDK feature of Azure Mobile Apps that makes it easy for developers toocreate apps that are functional without a network connection.</span></span>

<span data-ttu-id="0c363-106">När din app är i offlineläge kan du fortfarande skapa och ändra data som sparas tooa lokalt Arkiv.</span><span class="sxs-lookup"><span data-stu-id="0c363-106">When your app is in offline mode, you can still create and modify data, which are saved tooa local store.</span></span> <span data-ttu-id="0c363-107">När hello appen är online igen, synkroniserar lokala ändringar med din mobilappsserverdel i Azure.</span><span class="sxs-lookup"><span data-stu-id="0c363-107">When hello app is back online, it can synchronize local changes with your Azure Mobile App backend.</span></span> <span data-ttu-id="0c363-108">hello funktionen omfattar också stöd för att upptäcka konflikter när hello samma post ändras på både hello klienten och hello backend.</span><span class="sxs-lookup"><span data-stu-id="0c363-108">hello feature also includes support for detecting conflicts when hello same record is changed on both hello client and hello backend.</span></span> <span data-ttu-id="0c363-109">Konflikter kan sedan hanteras på hello server eller hello-klienten.</span><span class="sxs-lookup"><span data-stu-id="0c363-109">Conflicts can then be handled either on hello server or hello client.</span></span>

<span data-ttu-id="0c363-110">Offlinesynkronisering har flera fördelar:</span><span class="sxs-lookup"><span data-stu-id="0c363-110">Offline sync has several benefits:</span></span>

* <span data-ttu-id="0c363-111">Förbättra app svarstider genom cachelagring serverdata lokalt på hello-enhet</span><span class="sxs-lookup"><span data-stu-id="0c363-111">Improve app responsiveness by caching server data locally on hello device</span></span>
* <span data-ttu-id="0c363-112">Skapa robust appar som kan vara användbar när det finns problem med nätverk</span><span class="sxs-lookup"><span data-stu-id="0c363-112">Create robust apps that remain useful when there are network issues</span></span>
* <span data-ttu-id="0c363-113">Tillåt end användare toocreate och ändra data, även om det finns ingen nätverksåtkomst stöd för scenarier med lite eller ingen anslutning</span><span class="sxs-lookup"><span data-stu-id="0c363-113">Allow end users toocreate and modify data even when there is no network access, supporting scenarios with little or no connectivity</span></span>
* <span data-ttu-id="0c363-114">Synkronisera data över flera enheter och identifiera konflikter när hello samma post ändras av två enheter</span><span class="sxs-lookup"><span data-stu-id="0c363-114">Sync data across multiple devices and detect conflicts when hello same record is modified by two devices</span></span>
* <span data-ttu-id="0c363-115">Begränsa nätverksanvändning på tidsfördröjning eller förbrukade nätverk</span><span class="sxs-lookup"><span data-stu-id="0c363-115">Limit network use on high-latency or metered networks</span></span>

<span data-ttu-id="0c363-116">hello följande kurser visar hur tooadd offline synkroniseras tooyour mobila klienter som använder Azure Mobile Apps:</span><span class="sxs-lookup"><span data-stu-id="0c363-116">hello following tutorials show how tooadd offline sync tooyour mobile clients using Azure Mobile Apps:</span></span>

* <span data-ttu-id="0c363-117">[Android: Aktivera offlinesynkronisering]</span><span class="sxs-lookup"><span data-stu-id="0c363-117">[Android: Enable offline sync]</span></span>
* [<span data-ttu-id="0c363-118">Apache Cordova: Aktivera offlinesynkronisering</span><span class="sxs-lookup"><span data-stu-id="0c363-118">Apache Cordova: Enable offline sync</span></span>](app-service-mobile-cordova-get-started-offline-data.md)
* <span data-ttu-id="0c363-119">[iOS: aktivera offlinesynkronisering]</span><span class="sxs-lookup"><span data-stu-id="0c363-119">[iOS: Enable offline sync]</span></span>
* <span data-ttu-id="0c363-120">[Xamarin-iOS: aktivera offlinesynkronisering]</span><span class="sxs-lookup"><span data-stu-id="0c363-120">[Xamarin iOS: Enable offline sync]</span></span>
* <span data-ttu-id="0c363-121">[Xamarin Android: Aktivera offlinesynkronisering]</span><span class="sxs-lookup"><span data-stu-id="0c363-121">[Xamarin Android: Enable offline sync]</span></span>
* [<span data-ttu-id="0c363-122">Xamarin.Forms: Aktivera offlinesynkronisering</span><span class="sxs-lookup"><span data-stu-id="0c363-122">Xamarin.Forms: Enable offline sync</span></span>](app-service-mobile-xamarin-forms-get-started-offline-data.md)
* <span data-ttu-id="0c363-123">[Uwp: aktivera offlinesynkronisering]</span><span class="sxs-lookup"><span data-stu-id="0c363-123">[Universal Windows Platform: Enable offline sync]</span></span>

## <a name="what-is-a-sync-table"></a><span data-ttu-id="0c363-124">Vad är en tabell med synkronisering?</span><span class="sxs-lookup"><span data-stu-id="0c363-124">What is a sync table?</span></span>
<span data-ttu-id="0c363-125">tooaccess hello ”/ tabeller” endpoint hello Azure Mobile klient-SDK: er anger gränssnitt exempelvis `IMobileServiceTable` (.NET klient SDK) eller `MSTable` (iOS-klient).</span><span class="sxs-lookup"><span data-stu-id="0c363-125">tooaccess hello "/tables" endpoint, hello Azure Mobile client SDKs provide interfaces such as `IMobileServiceTable` (.NET client SDK) or `MSTable` (iOS client).</span></span> <span data-ttu-id="0c363-126">API: erna anslutas direkt toohello Azure mobilappsserverdel och misslyckas om hello klientenhet inte har en nätverksanslutning.</span><span class="sxs-lookup"><span data-stu-id="0c363-126">These APIs connect directly toohello Azure Mobile App backend and fail if hello client device does not have a network connection.</span></span>

<span data-ttu-id="0c363-127">toosupport användning offline, din app ska i stället använda hello *sync tabell* API: er, t.ex `IMobileServiceSyncTable` (.NET klient SDK) eller `MSSyncTable` (iOS-klient).</span><span class="sxs-lookup"><span data-stu-id="0c363-127">toosupport offline use, your app should instead use hello *sync table* APIs, such as `IMobileServiceSyncTable` (.NET client SDK) or `MSSyncTable` (iOS client).</span></span> <span data-ttu-id="0c363-128">Alla hello samma CRUD-åtgärder (skapa, läsa, uppdatera, ta bort) arbeta mot sync tabell API: er, förutom nu de läsa från eller skriva tooa *lokalt Arkiv*.</span><span class="sxs-lookup"><span data-stu-id="0c363-128">All hello same CRUD operations (Create, Read, Update, Delete) work against sync table APIs, except now they read from or write tooa *local store*.</span></span> <span data-ttu-id="0c363-129">Hello lokalt arkiv måste initieras innan alla synkroniseringsåtgärder tabellen kan utföras.</span><span class="sxs-lookup"><span data-stu-id="0c363-129">Before any sync table operations can be performed, hello local store must be initialized.</span></span>

## <a name="what-is-a-local-store"></a><span data-ttu-id="0c363-130">Vad är ett lokalt Arkiv?</span><span class="sxs-lookup"><span data-stu-id="0c363-130">What is a local store?</span></span>
<span data-ttu-id="0c363-131">Ett lokalt Arkiv är hello persistencelager på hello klientenhet.</span><span class="sxs-lookup"><span data-stu-id="0c363-131">A local store is hello data persistence layer on hello client device.</span></span> <span data-ttu-id="0c363-132">hello Azure Mobile Apps klient-SDK: er anger en lokal lagra implementering.</span><span class="sxs-lookup"><span data-stu-id="0c363-132">hello Azure Mobile Apps client SDKs provide a default local store implementation.</span></span> <span data-ttu-id="0c363-133">Den är baserad på SQLite i Windows, Xamarin och Android.</span><span class="sxs-lookup"><span data-stu-id="0c363-133">On Windows, Xamarin and Android, it is based on SQLite.</span></span> <span data-ttu-id="0c363-134">På iOS, är den baserad på grundläggande information.</span><span class="sxs-lookup"><span data-stu-id="0c363-134">On iOS, it is based on Core Data.</span></span>

<span data-ttu-id="0c363-135">toouse hello SQLite-implementering baserad på Windows Phone eller Windows Store 8.1, behöver du tooinstall filnamnstillägget SQLite.</span><span class="sxs-lookup"><span data-stu-id="0c363-135">toouse hello SQLite-based implementation on Windows Phone or Windows Store 8.1, you need tooinstall a SQLite extension.</span></span> <span data-ttu-id="0c363-136">Mer information finns i [Uwp: aktivera offlinesynkronisering]. Android och iOS levereras med en version av SQLite i hello enhetens operativsystem, så det inte är nödvändigt tooreference en egen version av SQLite.</span><span class="sxs-lookup"><span data-stu-id="0c363-136">For more information, see [Universal Windows Platform: Enable offline sync]. Android and iOS ship with a version of SQLite in hello device operating system itself, so it is not necessary tooreference your own version of SQLite.</span></span>

<span data-ttu-id="0c363-137">Utvecklare kan också implementeras sina egna lokalt Arkiv.</span><span class="sxs-lookup"><span data-stu-id="0c363-137">Developers can also implement their own local store.</span></span> <span data-ttu-id="0c363-138">Du kan till exempel definiera ett lokalt arkiv som använder SQLCipher för kryptering om du vill toostore data i ett krypterat format på hello mobila klienten.</span><span class="sxs-lookup"><span data-stu-id="0c363-138">For instance, if you wish toostore data in an encrypted format on hello mobile client, you can define a local store that uses SQLCipher for encryption.</span></span>

## <a name="what-is-a-sync-context"></a><span data-ttu-id="0c363-139">Vad är en kontext som synkronisering?</span><span class="sxs-lookup"><span data-stu-id="0c363-139">What is a sync context?</span></span>
<span data-ttu-id="0c363-140">A *sync kontexten* är associerad med ett objekt för mobila (t.ex `IMobileServiceClient` eller `MSClient`) och spårar ändringar som görs med synkronisering tabeller.</span><span class="sxs-lookup"><span data-stu-id="0c363-140">A *sync context* is associated with a mobile client object (such as `IMobileServiceClient` or `MSClient`) and tracks changes that are made with sync tables.</span></span> <span data-ttu-id="0c363-141">hello sync kontexten upprätthåller en *åtgärden kön*, vilket håller en sorterad lista över CUD åtgärder (skapa, uppdatera, ta bort) som senare skickas toohello server.</span><span class="sxs-lookup"><span data-stu-id="0c363-141">hello sync context maintains an *operation queue*, which keeps an ordered list of CUD operations (Create, Update, Delete) that is later be sent toohello server.</span></span>

<span data-ttu-id="0c363-142">Ett lokalt arkiv som har associerats med hello sync kontext med hjälp av en initieringsmetoden som `IMobileServicesSyncContext.InitializeAsync(localstore)` i hello [.NET klient-SDK].</span><span class="sxs-lookup"><span data-stu-id="0c363-142">A local store is associated with hello sync context using an initialize method such as `IMobileServicesSyncContext.InitializeAsync(localstore)` in hello [.NET client SDK].</span></span>

## <span data-ttu-id="0c363-143"><a name="how-sync-works"></a>Hur offline synkronisering fungerar</span><span class="sxs-lookup"><span data-stu-id="0c363-143"><a name="how-sync-works"></a>How offline synchronization works</span></span>
<span data-ttu-id="0c363-144">När du använder sync tabeller, kontrollerar klientkoden när lokala ändringar synkroniseras med en mobilappsserverdel i Azure.</span><span class="sxs-lookup"><span data-stu-id="0c363-144">When using sync tables, your client code controls when local changes are synchronized with an Azure Mobile App backend.</span></span> <span data-ttu-id="0c363-145">Inget skickas toohello backend tills det är ett anrop för*push* lokala ändringar.</span><span class="sxs-lookup"><span data-stu-id="0c363-145">Nothing is sent toohello backend until there is a call too*push* local changes.</span></span> <span data-ttu-id="0c363-146">På liknande sätt hello lokalt Arkiv fylls med nya data bara när det är ett anrop för*pull* data.</span><span class="sxs-lookup"><span data-stu-id="0c363-146">Similarly, hello local store is populated with new data only when there is a call too*pull* data.</span></span>

* <span data-ttu-id="0c363-147">**Push**: Push är en åtgärd på hello sync kontext och skickar alla CUD ändringar sedan den senaste hello-push.</span><span class="sxs-lookup"><span data-stu-id="0c363-147">**Push**: Push is an operation on hello sync context and sends all CUD changes since hello last push.</span></span> <span data-ttu-id="0c363-148">Observera att det är inte möjlig toosend endast en enskild tabell ändringar eftersom annars operations kunde skickas i rätt ordning.</span><span class="sxs-lookup"><span data-stu-id="0c363-148">Note that it is not possible toosend only an individual table's changes, because otherwise operations could be sent out of order.</span></span> <span data-ttu-id="0c363-149">Push kör en serie av REST-anrop tooyour Azure mobilappsserverdel, som i sin tur ändrar server-databas.</span><span class="sxs-lookup"><span data-stu-id="0c363-149">Push executes a series of REST calls tooyour Azure Mobile App backend, which in turn modifies your server database.</span></span>
* <span data-ttu-id="0c363-150">**Hämtar**: Pull utförs på grundval av per tabell och kan vara anpassade med en fråga tooretrieve endast en delmängd av hello serverdata.</span><span class="sxs-lookup"><span data-stu-id="0c363-150">**Pull**: Pull is performed on a per-table basis and can be customized with a query tooretrieve only a subset of hello server data.</span></span> <span data-ttu-id="0c363-151">hello Azure Mobile client SDK: er och infoga hello resulterande data i hello lokalt Arkiv.</span><span class="sxs-lookup"><span data-stu-id="0c363-151">hello Azure Mobile client SDKs then insert hello resulting data into hello local store.</span></span>
* <span data-ttu-id="0c363-152">**Implicit push-meddelanden**: om en pull körs mot en tabell som har väntande uppdateringar lokala hello pull först kör en `push()` på hello sync-kontext.</span><span class="sxs-lookup"><span data-stu-id="0c363-152">**Implicit Pushes**: If a pull is executed against a table that has pending local updates, hello pull first executes a `push()` on hello sync context.</span></span> <span data-ttu-id="0c363-153">Den här push bidrar till att minimera konflikter mellan ändringar som redan finns i kön och nya data från hello-servern.</span><span class="sxs-lookup"><span data-stu-id="0c363-153">This push helps minimize conflicts between changes that are already queued and new data from hello server.</span></span>
* <span data-ttu-id="0c363-154">**Inkrementell synkronisering**: hello första parametern toohello pull-åtgärd är en *Frågenamnet* som används endast på hello-klienter.</span><span class="sxs-lookup"><span data-stu-id="0c363-154">**Incremental Sync**: hello first parameter toohello pull operation is a *query name* that is used only on hello client.</span></span> <span data-ttu-id="0c363-155">Om du använder en icke-null Frågenamnet hello Azure Mobile SDK utför en *inkrementell synkronisering*. Varje gång en pull-åtgärd returnerar en uppsättning resultat hello senaste `updatedAt` tidsstämpel som resultatmängden lagras i hello SDK lokalt systemtabeller.</span><span class="sxs-lookup"><span data-stu-id="0c363-155">If you use a non-null query name, hello Azure Mobile SDK performs an *incremental sync*. Each time a pull operation returns a set of results, hello latest `updatedAt` timestamp from that result set is stored in hello SDK local system tables.</span></span> <span data-ttu-id="0c363-156">Efterföljande pull operations hämta bara poster efter tidsstämpeln.</span><span class="sxs-lookup"><span data-stu-id="0c363-156">Subsequent pull operations retrieve only records after that timestamp.</span></span>

  <span data-ttu-id="0c363-157">toouse inkrementell synkronisering, servern måste returnera meningsfulla `updatedAt` värden och måste också ha stöd för sortering av det här fältet.</span><span class="sxs-lookup"><span data-stu-id="0c363-157">toouse incremental sync, your server must return meaningful `updatedAt` values and must also support sorting by this field.</span></span> <span data-ttu-id="0c363-158">Eftersom hello SDK lägger till sin egen sortera på hello updatedAt fält, kan du använda en pull-fråga som har sin egen `orderBy` satsen.</span><span class="sxs-lookup"><span data-stu-id="0c363-158">However, since hello SDK adds its own sort on hello updatedAt field, you cannot use a pull query that has its own `orderBy` clause.</span></span>

  <span data-ttu-id="0c363-159">hello frågans namn kan vara valfri sträng som du väljer, men det måste vara unikt för varje logisk fråga i din app.</span><span class="sxs-lookup"><span data-stu-id="0c363-159">hello query name can be any string you choose, but it must be unique for each logical query in your app.</span></span>
  <span data-ttu-id="0c363-160">Annars olika pull-åtgärder kan du skriva över hello samma inkrementell synkronisering tidsstämpel och dina frågor kan returnera felaktiga resultat.</span><span class="sxs-lookup"><span data-stu-id="0c363-160">Otherwise, different pull operations could overwrite hello same incremental sync timestamp and your queries can return incorrect results.</span></span>

  <span data-ttu-id="0c363-161">Om hello frågan har en parameter, är ett sätt toocreate ett unikt namn tooincorporate hello parametervärdet.</span><span class="sxs-lookup"><span data-stu-id="0c363-161">If hello query has a parameter, one way toocreate a unique query name is tooincorporate hello parameter value.</span></span>
  <span data-ttu-id="0c363-162">Om du filtrerar på användar-ID kunde till exempel frågans namn på följande sätt (i C#):</span><span class="sxs-lookup"><span data-stu-id="0c363-162">For instance, if you are filtering on userid, your query name could be as follows (in C#):</span></span>

        await todoTable.PullAsync("todoItems" + userid,
            syncTable.Where(u => u.UserId == userid));

  <span data-ttu-id="0c363-163">Om du vill tooopt utanför inkrementell synkronisering, skicka `null` som hello fråga-ID.</span><span class="sxs-lookup"><span data-stu-id="0c363-163">If you want tooopt out of incremental sync, pass `null` as hello query ID.</span></span> <span data-ttu-id="0c363-164">I så fall måste alla poster som hämtas vid varje anrop för`PullAsync`, som är potentiellt ineffektiv.</span><span class="sxs-lookup"><span data-stu-id="0c363-164">In this case, all records are retrieved on every call too`PullAsync`, which is potentially inefficient.</span></span>
* <span data-ttu-id="0c363-165">**Rensa**: du kan avmarkera hello innehållet i hello lokalt Arkiv `IMobileServiceSyncTable.PurgeAsync`.</span><span class="sxs-lookup"><span data-stu-id="0c363-165">**Purging**: You can clear hello contents of hello local store using `IMobileServiceSyncTable.PurgeAsync`.</span></span>
  <span data-ttu-id="0c363-166">Rensa kan vara nödvändigt om du har inaktuella data i hello klientdatabasen eller om du inte vill toodiscard alla väntande ändringar.</span><span class="sxs-lookup"><span data-stu-id="0c363-166">Purging may be necessary if you have stale data in hello client database, or if you wish toodiscard all pending changes.</span></span>

  <span data-ttu-id="0c363-167">En rensning tar bort en tabell från hello lokalt Arkiv.</span><span class="sxs-lookup"><span data-stu-id="0c363-167">A purge clears a table from hello local store.</span></span> <span data-ttu-id="0c363-168">Om det finns åtgärder som väntar på synkronisering med hello server-databas, hello Rensa returnerar ett undantag såvida inte hello *tvinga Rensa* parameter har angetts.</span><span class="sxs-lookup"><span data-stu-id="0c363-168">If there are operations awaiting synchronization with hello server database, hello purge throws an exception unless hello *force purge* parameter is set.</span></span>

  <span data-ttu-id="0c363-169">Som ett exempel på inaktuella data på hello klienten anta att i hello todo-list ”exempel Device1 hämtar endast objekt som inte är slutförda.</span><span class="sxs-lookup"><span data-stu-id="0c363-169">As an example of stale data on hello client, suppose in hello "todo list" example, Device1 only pulls items that are not completed.</span></span> <span data-ttu-id="0c363-170">Ett todoitem ”köpa mjölk” är markerad på hello server har slutförts av en annan enhet.</span><span class="sxs-lookup"><span data-stu-id="0c363-170">A todoitem "Buy milk" is marked completed on hello server by another device.</span></span> <span data-ttu-id="0c363-171">Device1 har dock fortfarande hello ”köpa mjölk” todoitem i lokala arkivet eftersom det bara hämta objekt som inte är markerat som slutförda.</span><span class="sxs-lookup"><span data-stu-id="0c363-171">However, Device1 still has hello "Buy milk" todoitem in local store because it is only pulling items that are not marked complete.</span></span> <span data-ttu-id="0c363-172">En rensning tar bort inaktuella objektet.</span><span class="sxs-lookup"><span data-stu-id="0c363-172">A purge clears this stale item.</span></span>

## <a name="next-steps"></a><span data-ttu-id="0c363-173">Nästa steg</span><span class="sxs-lookup"><span data-stu-id="0c363-173">Next steps</span></span>
* <span data-ttu-id="0c363-174">[iOS: aktivera offlinesynkronisering]</span><span class="sxs-lookup"><span data-stu-id="0c363-174">[iOS: Enable offline sync]</span></span>
* <span data-ttu-id="0c363-175">[Xamarin-iOS: aktivera offlinesynkronisering]</span><span class="sxs-lookup"><span data-stu-id="0c363-175">[Xamarin iOS: Enable offline sync]</span></span>
* <span data-ttu-id="0c363-176">[Xamarin Android: Aktivera offlinesynkronisering]</span><span class="sxs-lookup"><span data-stu-id="0c363-176">[Xamarin Android: Enable offline sync]</span></span>
* <span data-ttu-id="0c363-177">[Uwp: aktivera offlinesynkronisering]</span><span class="sxs-lookup"><span data-stu-id="0c363-177">[Universal Windows Platform: Enable offline sync]</span></span>

<!-- Links -->
[.NET klient-SDK]: app-service-mobile-dotnet-how-to-use-client-library.md
[Android: Aktivera offlinesynkronisering]: app-service-mobile-android-get-started-offline-data.md
[iOS: aktivera offlinesynkronisering]: app-service-mobile-ios-get-started-offline-data.md
[Xamarin-iOS: aktivera offlinesynkronisering]: app-service-mobile-xamarin-ios-get-started-offline-data.md
[Xamarin Android: Aktivera offlinesynkronisering]: app-service-mobile-xamarin-android-get-started-offline-data.md
[Uwp: aktivera offlinesynkronisering]: app-service-mobile-windows-store-dotnet-get-started-offline-data.md

---
title: "Migrera ExpressRoute associerade virtuella nätverk från klassiska tooResource Manager: Azure: PowerShell | Microsoft Docs"
description: "Den här sidan beskrivs hur toomigrate associerade virtuella nätverk tooResource Manager när du har flyttat kretsen."
documentationcenter: na
services: expressroute
author: ganesr
manager: timlt
editor: 
tags: azure-resource-manager
ms.assetid: 
ms.service: expressroute
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 07/06/2017
ms.author: ganesr;cherylmc
ms.openlocfilehash: e64506c6909296f98c5dd23b1437bc0b81f31c75
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: sv-SE
ms.lasthandoff: 10/06/2017
---
# <a name="migrate-expressroute-associated-virtual-networks-from-classic-tooresource-manager"></a><span data-ttu-id="9a1d1-103">Migrera ExpressRoute associerade virtuella nätverk från klassiska tooResource Manager</span><span class="sxs-lookup"><span data-stu-id="9a1d1-103">Migrate ExpressRoute associated virtual networks from classic tooResource Manager</span></span>

<span data-ttu-id="9a1d1-104">Den här artikeln förklarar hur toomigrate Azure ExpressRoute associerade virtuella nätverk från hello klassisk distribution modellen toohello Azure Resource Manager-modellen när du har flyttat ExpressRoute-kretsen.</span><span class="sxs-lookup"><span data-stu-id="9a1d1-104">This article explains how toomigrate Azure ExpressRoute associated virtual networks from hello classic deployment model toohello Azure Resource Manager deployment model after moving your ExpressRoute circuit.</span></span> 


## <a name="before-you-begin"></a><span data-ttu-id="9a1d1-105">Innan du börjar</span><span class="sxs-lookup"><span data-stu-id="9a1d1-105">Before you begin</span></span>
* <span data-ttu-id="9a1d1-106">Kontrollera att du har hello senaste versionen av hello Azure PowerShell-moduler.</span><span class="sxs-lookup"><span data-stu-id="9a1d1-106">Verify that you have hello latest version of hello Azure PowerShell modules.</span></span> <span data-ttu-id="9a1d1-107">Mer information finns i [hur tooinstall och konfigurera Azure PowerShell](/powershell/azure/overview).</span><span class="sxs-lookup"><span data-stu-id="9a1d1-107">For more information, see [How tooinstall and configure Azure PowerShell](/powershell/azure/overview).</span></span>
* <span data-ttu-id="9a1d1-108">Kontrollera att du har granskat hello [krav](expressroute-prerequisites.md), [routningskrav](expressroute-routing.md), och [arbetsflöden](expressroute-workflows.md) innan du börjar konfigurera.</span><span class="sxs-lookup"><span data-stu-id="9a1d1-108">Make sure that you have reviewed hello [prerequisites](expressroute-prerequisites.md), [routing requirements](expressroute-routing.md), and [workflows](expressroute-workflows.md) before you begin configuration.</span></span>
* <span data-ttu-id="9a1d1-109">Granska hello information som tillhandahålls under [flytta en ExpressRoute-krets från klassiska tooResource Manager](expressroute-move.md).</span><span class="sxs-lookup"><span data-stu-id="9a1d1-109">Review hello information that is provided under [Moving an ExpressRoute circuit from classic tooResource Manager](expressroute-move.md).</span></span> <span data-ttu-id="9a1d1-110">Kontrollera att du förstår hello gränser och begränsningar.</span><span class="sxs-lookup"><span data-stu-id="9a1d1-110">Make sure that you fully understand hello limits and limitations.</span></span>
* <span data-ttu-id="9a1d1-111">Kontrollera att hello kretsen är fullt fungerande i hello klassiska distributionsmodellen.</span><span class="sxs-lookup"><span data-stu-id="9a1d1-111">Verify that hello circuit is fully operational in hello classic deployment model.</span></span>
* <span data-ttu-id="9a1d1-112">Se till att du har en resursgrupp som skapades i hello Resource Manager-distributionsmodellen.</span><span class="sxs-lookup"><span data-stu-id="9a1d1-112">Ensure that you have a resource group that was created in hello Resource Manager deployment model.</span></span>
* <span data-ttu-id="9a1d1-113">Granska hello efter resurs-dokumentationen:</span><span class="sxs-lookup"><span data-stu-id="9a1d1-113">Review hello following resource-migration documentation:</span></span>

    * [<span data-ttu-id="9a1d1-114">Plattform som stöds migrering av IaaS-resurser från klassiska tooAzure Resource Manager</span><span class="sxs-lookup"><span data-stu-id="9a1d1-114">Platform-supported migration of IaaS resources from classic tooAzure Resource Manager</span></span>](../virtual-machines/virtual-machines-windows-migration-classic-resource-manager.md)
    * [<span data-ttu-id="9a1d1-115">Tekniska ingående om plattformen stöds från klassiska tooAzure Resource Manager</span><span class="sxs-lookup"><span data-stu-id="9a1d1-115">Technical deep dive on platform-supported migration from classic tooAzure Resource Manager</span></span>](../virtual-machines/virtual-machines-windows-migration-classic-resource-manager-deep-dive.md)
    * [<span data-ttu-id="9a1d1-116">Vanliga frågor och svar: Plattform som stöds migrering av IaaS-resurser från klassiska tooAzure Resource Manager</span><span class="sxs-lookup"><span data-stu-id="9a1d1-116">FAQs: Platform-supported migration of IaaS resources from classic tooAzure Resource Manager</span></span>](../virtual-machines/virtual-machines-windows-migration-classic-resource-manager.md)
    * [<span data-ttu-id="9a1d1-117">Granska de vanligaste migreringsfel och åtgärder</span><span class="sxs-lookup"><span data-stu-id="9a1d1-117">Review most common migration errors and mitigations</span></span>](../virtual-machines/windows/migration-classic-resource-manager-errors.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json)

## <a name="supported-and-unsupported-scenarios"></a><span data-ttu-id="9a1d1-118">Scenarier som stöds och som inte stöds</span><span class="sxs-lookup"><span data-stu-id="9a1d1-118">Supported and unsupported scenarios</span></span>

* <span data-ttu-id="9a1d1-119">En ExpressRoute-krets kan flyttas från hello klassiska toohello Resource Manager-miljö utan driftavbrott.</span><span class="sxs-lookup"><span data-stu-id="9a1d1-119">An ExpressRoute circuit can be moved from hello classic toohello Resource Manager environment without any downtime.</span></span> <span data-ttu-id="9a1d1-120">Du kan flytta ExpressRoute-krets från hello klassiska toohello Resource Manager-miljö utan avbrott.</span><span class="sxs-lookup"><span data-stu-id="9a1d1-120">You can move any ExpressRoute circuit from hello classic toohello Resource Manager environment with no downtime.</span></span> <span data-ttu-id="9a1d1-121">Följ anvisningarna för hello i [flyttar ExpressRoute-kretsar från hello klassiska toohello Resource Manager-distributionsmodellen med hjälp av PowerShell](expressroute-howto-move-arm.md).</span><span class="sxs-lookup"><span data-stu-id="9a1d1-121">Follow hello instructions in [moving ExpressRoute circuits from hello classic toohello Resource Manager deployment model using PowerShell](expressroute-howto-move-arm.md).</span></span> <span data-ttu-id="9a1d1-122">Det här är ett virtuellt nätverk för nödvändiga toomove resurser anslutna toohello.</span><span class="sxs-lookup"><span data-stu-id="9a1d1-122">This is a prerequisite toomove resources connected toohello virtual network.</span></span>
* <span data-ttu-id="9a1d1-123">Virtuella nätverk, gatewayenheter och associerade distributioner inom hello virtuellt nätverk som är anslutna tooan ExpressRoute-krets i samma prenumeration kan vara hello migreras toohello Resource Manager-miljö utan driftavbrott.</span><span class="sxs-lookup"><span data-stu-id="9a1d1-123">Virtual networks, gateways, and associated deployments within hello virtual network that are attached tooan ExpressRoute circuit in hello same subscription can be migrated toohello Resource Manager environment without any downtime.</span></span> <span data-ttu-id="9a1d1-124">Du kan följa hello steg beskrivs senare toomigrate resurser, till exempel virtuella nätverk, gateways och virtuella datorer distribueras inom hello virtuellt nätverk.</span><span class="sxs-lookup"><span data-stu-id="9a1d1-124">You can follow hello steps described later toomigrate resources such as virtual networks, gateways, and virtual machines deployed within hello virtual network.</span></span> <span data-ttu-id="9a1d1-125">Du måste se till att hello virtuella nätverk är korrekt konfigurerade innan de migreras.</span><span class="sxs-lookup"><span data-stu-id="9a1d1-125">You must ensure that hello virtual networks are configured correctly before they are migrated.</span></span> 
* <span data-ttu-id="9a1d1-126">Virtuella nätverk, gatewayenheter och associerade distributioner inom hello virtuellt nätverk som inte ingår i hello samma prenumeration som hello ExpressRoute-krets kräver vissa driftstopp toocomplete hello migrering.</span><span class="sxs-lookup"><span data-stu-id="9a1d1-126">Virtual networks, gateways, and associated deployments within hello virtual network that are not in hello same subscription as hello ExpressRoute circuit require some downtime toocomplete hello migration.</span></span> <span data-ttu-id="9a1d1-127">hello sista avsnittet i hello dokumentet beskriver hello steg toobe följt toomigrate resurser.</span><span class="sxs-lookup"><span data-stu-id="9a1d1-127">hello last section of hello document describes hello steps toobe followed toomigrate resources.</span></span>
* <span data-ttu-id="9a1d1-128">Ett virtuellt nätverk med både ExpressRoute-Gateway och VPN-Gateway kan inte migreras.</span><span class="sxs-lookup"><span data-stu-id="9a1d1-128">A virtual network with both ExpressRoute Gateway and VPN Gateway can't be migrated.</span></span>

## <a name="move-an-expressroute-circuit-from-classic-tooresource-manager"></a><span data-ttu-id="9a1d1-129">Flytta en ExpressRoute-krets från klassiska tooResource Manager</span><span class="sxs-lookup"><span data-stu-id="9a1d1-129">Move an ExpressRoute circuit from classic tooResource Manager</span></span>
<span data-ttu-id="9a1d1-130">Du måste flytta en ExpressRoute-krets från hello klassiska toohello Resource Manager-miljön innan du försöker toomigrate resurser som är anslutna toohello ExpressRoute-kretsen.</span><span class="sxs-lookup"><span data-stu-id="9a1d1-130">You must move an ExpressRoute circuit from hello classic toohello Resource Manager environment before you try toomigrate resources that are attached toohello ExpressRoute circuit.</span></span> <span data-ttu-id="9a1d1-131">tooaccomplish detta uppgift, se hello följande artiklar:</span><span class="sxs-lookup"><span data-stu-id="9a1d1-131">tooaccomplish this task, see hello following articles:</span></span>

* <span data-ttu-id="9a1d1-132">Granska hello information som tillhandahålls under [flytta en ExpressRoute-krets från klassiska tooResource Manager](expressroute-move.md).</span><span class="sxs-lookup"><span data-stu-id="9a1d1-132">Review hello information that is provided under [Moving an ExpressRoute circuit from classic tooResource Manager](expressroute-move.md).</span></span>
* <span data-ttu-id="9a1d1-133">[Flytta en krets från klassiska tooResource Manager med Azure PowerShell](expressroute-howto-move-arm.md).</span><span class="sxs-lookup"><span data-stu-id="9a1d1-133">[Move a circuit from classic tooResource Manager using Azure PowerShell](expressroute-howto-move-arm.md).</span></span>
* <span data-ttu-id="9a1d1-134">Använda hello Azure Service Management portal.</span><span class="sxs-lookup"><span data-stu-id="9a1d1-134">Use hello Azure Service Management portal.</span></span> <span data-ttu-id="9a1d1-135">Du kan följa hello arbetsflöde för[skapa en ny ExpressRoute-krets](expressroute-howto-circuit-portal-resource-manager.md) och välj alternativet för hello import.</span><span class="sxs-lookup"><span data-stu-id="9a1d1-135">You can follow hello workflow too[create a new ExpressRoute circuit](expressroute-howto-circuit-portal-resource-manager.md) and select hello import option.</span></span> 

<span data-ttu-id="9a1d1-136">Den här åtgärden innebär inte någon avbrottstid.</span><span class="sxs-lookup"><span data-stu-id="9a1d1-136">This operation does not involve downtime.</span></span> <span data-ttu-id="9a1d1-137">Du kan fortsätta tootransfer data mellan din lokala och Microsoft medan hello migrering pågår.</span><span class="sxs-lookup"><span data-stu-id="9a1d1-137">You can continue tootransfer data between your premises and Microsoft while hello migration is in progress.</span></span>

## <a name="migrate-virtual-networks-gateways-and-associated-deployments"></a><span data-ttu-id="9a1d1-138">Migrera associerade distributioner, gateways och virtuella nätverk</span><span class="sxs-lookup"><span data-stu-id="9a1d1-138">Migrate virtual networks, gateways, and associated deployments</span></span>

<span data-ttu-id="9a1d1-139">hello steg du följer toomigrate beror på om dina resurser finns i hello samma prenumeration, olika prenumerationer eller båda.</span><span class="sxs-lookup"><span data-stu-id="9a1d1-139">hello steps you follow toomigrate depend on whether your resources are in hello same subscription, different subscriptions, or both.</span></span>

### <a name="migrate-virtual-networks-gateways-and-associated-deployments-in-hello-same-subscription-as-hello-expressroute-circuit"></a><span data-ttu-id="9a1d1-140">Migrera virtuella nätverk, gateways, och associerade distributioner i hello samma prenumeration som hello ExpressRoute-krets</span><span class="sxs-lookup"><span data-stu-id="9a1d1-140">Migrate virtual networks, gateways, and associated deployments in hello same subscription as hello ExpressRoute circuit</span></span>
<span data-ttu-id="9a1d1-141">Det här avsnittet beskrivs hello steg toobe följt toomigrate ett virtuellt nätverk, -gateway och associerade distributioner i hello samma prenumeration som hello ExpressRoute-kretsen.</span><span class="sxs-lookup"><span data-stu-id="9a1d1-141">This section describes hello steps toobe followed toomigrate a virtual network, gateway, and associated deployments in hello same subscription as hello ExpressRoute circuit.</span></span> <span data-ttu-id="9a1d1-142">Inget driftstopp är associerad med den här migreringen.</span><span class="sxs-lookup"><span data-stu-id="9a1d1-142">No downtime is associated with this migration.</span></span> <span data-ttu-id="9a1d1-143">Du kan fortsätta toouse alla resurser via hello migreringsprocessen.</span><span class="sxs-lookup"><span data-stu-id="9a1d1-143">You can continue toouse all resources through hello migration process.</span></span> <span data-ttu-id="9a1d1-144">hello management plan är låst medan hello migrering pågår.</span><span class="sxs-lookup"><span data-stu-id="9a1d1-144">hello management plane is locked while hello migration is in progress.</span></span> 

1. <span data-ttu-id="9a1d1-145">Se till att hello ExpressRoute-kretsen har flyttats från hello klassiska toohello Resource Manager-miljön.</span><span class="sxs-lookup"><span data-stu-id="9a1d1-145">Ensure that hello ExpressRoute circuit has been moved from hello classic toohello Resource Manager environment.</span></span>
2. <span data-ttu-id="9a1d1-146">Se till att det virtuella nätverket hello har förberetts på rätt sätt för hello migrering.</span><span class="sxs-lookup"><span data-stu-id="9a1d1-146">Ensure that hello virtual network has been prepared appropriately for hello migration.</span></span>
3. <span data-ttu-id="9a1d1-147">Registrera prenumerationen för resursmigrering.</span><span class="sxs-lookup"><span data-stu-id="9a1d1-147">Register your subscription for resource migration.</span></span> <span data-ttu-id="9a1d1-148">tooregister prenumerationen för resursmigrering, Använd hello följande PowerShell-fragment:</span><span class="sxs-lookup"><span data-stu-id="9a1d1-148">tooregister your subscription for resource migration, use hello following PowerShell snippet:</span></span>

  ```powershell 
  Select-AzureRmSubscription -SubscriptionName <Your Subscription Name>
  Register-AzureRmResourceProvider -ProviderNamespace Microsoft.ClassicInfrastructureMigrate
  Get-AzureRmResourceProvider -ProviderNamespace Microsoft.ClassicInfrastructureMigrate
  ```
4. <span data-ttu-id="9a1d1-149">Validera, förbereda och migrera.</span><span class="sxs-lookup"><span data-stu-id="9a1d1-149">Validate, prepare, and migrate.</span></span> <span data-ttu-id="9a1d1-150">toomove hello virtuellt nätverk, Använd hello följande PowerShell-fragment:</span><span class="sxs-lookup"><span data-stu-id="9a1d1-150">toomove hello virtual network, use hello following PowerShell snippet:</span></span>

  ```powershell
  Move-AzureVirtualNetwork -Prepare $vnetName  
  Move-AzureVirtualNetwork -Commit $vnetName
  ```

  <span data-ttu-id="9a1d1-151">Du kan också avbryta migreringen genom att köra följande PowerShell-cmdleten hello:</span><span class="sxs-lookup"><span data-stu-id="9a1d1-151">You can also abort migration by running hello following PowerShell cmdlet:</span></span>

  ```powershell
  Move-AzureVirtualNetwork -Abort $vnetName
  ```

## <a name="next-steps"></a><span data-ttu-id="9a1d1-152">Nästa steg</span><span class="sxs-lookup"><span data-stu-id="9a1d1-152">Next steps</span></span>
* [<span data-ttu-id="9a1d1-153">Plattform som stöds migrering av IaaS-resurser från klassiska tooAzure Resource Manager</span><span class="sxs-lookup"><span data-stu-id="9a1d1-153">Platform-supported migration of IaaS resources from classic tooAzure Resource Manager</span></span>](../virtual-machines/virtual-machines-windows-migration-classic-resource-manager.md)
* [<span data-ttu-id="9a1d1-154">Tekniska ingående om plattformen stöds från klassiska tooAzure Resource Manager</span><span class="sxs-lookup"><span data-stu-id="9a1d1-154">Technical deep dive on platform-supported migration from classic tooAzure Resource Manager</span></span>](../virtual-machines/virtual-machines-windows-migration-classic-resource-manager-deep-dive.md)
* [<span data-ttu-id="9a1d1-155">Vanliga frågor och svar: Plattform som stöds migrering av IaaS-resurser från klassiska tooAzure Resource Manager</span><span class="sxs-lookup"><span data-stu-id="9a1d1-155">FAQs: Platform-supported migration of IaaS resources from classic tooAzure Resource Manager</span></span>](../virtual-machines/virtual-machines-windows-migration-classic-resource-manager.md)
* [<span data-ttu-id="9a1d1-156">Granska de vanligaste migreringsfel och åtgärder</span><span class="sxs-lookup"><span data-stu-id="9a1d1-156">Review most common migration errors and mitigations</span></span>](../virtual-machines/windows/migration-classic-resource-manager-errors.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json)

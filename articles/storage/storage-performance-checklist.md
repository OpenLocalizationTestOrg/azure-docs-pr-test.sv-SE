---
title: "aaaAzure lagring checklistan för prestanda och skalbarhet | Microsoft Docs"
description: "En checklista beprövade metoder för användning med Azure Storage i utvecklar performant program."
services: storage
documentationcenter: 
author: robinsh
manager: timlt
editor: tysonn
ms.assetid: 959d831b-a4fd-4634-a646-0d2c0c462ef8
ms.service: storage
ms.workload: storage
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 12/08/2016
ms.author: robinsh
ms.openlocfilehash: c0cd77da4a1abda42c018255ed93215b71f4fad8
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: sv-SE
ms.lasthandoff: 10/06/2017
---
# <a name="microsoft-azure-storage-performance-and-scalability-checklist"></a><span data-ttu-id="d89aa-103">Prestanda och skalbarhetschecklista för Microsoft Azure Storage</span><span class="sxs-lookup"><span data-stu-id="d89aa-103">Microsoft Azure Storage Performance and Scalability Checklist</span></span>
## <a name="overview"></a><span data-ttu-id="d89aa-104">Översikt</span><span class="sxs-lookup"><span data-stu-id="d89aa-104">Overview</span></span>
<span data-ttu-id="d89aa-105">Microsoft har utvecklat ett antal beprövade metoder för att använda dessa tjänster på ett sätt som performant sedan hello versionen av hello Microsoft Azure Storage-tjänster, och den här artikeln fungerar tooconsolidate hello viktigaste av dem i en lista med checklista-format.</span><span class="sxs-lookup"><span data-stu-id="d89aa-105">Since hello release of hello Microsoft Azure Storage services, Microsoft has developed a number of proven practices for using these services in a performant manner, and this article serves tooconsolidate hello most important of them into a checklist-style list.</span></span> <span data-ttu-id="d89aa-106">den här artikeln hello avsikt är toohelp programutvecklare kontrollera de använder beprövade metoder med Azure Storage och toohelp dem identifiera andra beprövade metoder som de bör införandet.</span><span class="sxs-lookup"><span data-stu-id="d89aa-106">hello intention of this article is toohelp application developers verify they are using proven practices with Azure Storage and toohelp them identify other proven practices they should consider adopting.</span></span> <span data-ttu-id="d89aa-107">Den här artikeln använder inte toocover var möjligt optimering av prestanda och skalbarhet – det utesluter som är litet i deras inverkan eller inte brett tillämpas.</span><span class="sxs-lookup"><span data-stu-id="d89aa-107">This article does not attempt toocover every possible performance and scalability optimization — it excludes those that are small in their impact or not broadly applicable.</span></span> <span data-ttu-id="d89aa-108">toohello mån hello programmets beteende kan förutsägas under design, är det användbart tookeep dessa i något tidigt tooavoid design som ska köras i prestandaproblem.</span><span class="sxs-lookup"><span data-stu-id="d89aa-108">toohello extent that hello application's behavior can be predicted during design, it's useful tookeep these in mind early on tooavoid designs that will run into performance problems.</span></span>  

<span data-ttu-id="d89aa-109">Alla utvecklare av serverprogram med hjälp av Azure Storage bör ta hello tid tooread den här artikeln och kontrollera att hans eller hennes program följer varje hello beprövade metoder som anges nedan.</span><span class="sxs-lookup"><span data-stu-id="d89aa-109">Every application developer using Azure Storage should take hello time tooread this article, and check that his or her application follows each of hello proven practices listed below.</span></span>  

## <a name="checklist"></a><span data-ttu-id="d89aa-110">Checklista</span><span class="sxs-lookup"><span data-stu-id="d89aa-110">Checklist</span></span>
<span data-ttu-id="d89aa-111">Den här artikeln organiserar hello beprövade metoder i hello efter grupper.</span><span class="sxs-lookup"><span data-stu-id="d89aa-111">This article organizes hello proven practices into hello following groups.</span></span> <span data-ttu-id="d89aa-112">Beprövade metoder som gäller för:</span><span class="sxs-lookup"><span data-stu-id="d89aa-112">Proven practices applicable to:</span></span>  

* <span data-ttu-id="d89aa-113">Alla Azure Storage-tjänster (blobbar, tabeller, köer och filer)</span><span class="sxs-lookup"><span data-stu-id="d89aa-113">All Azure Storage services (blobs, tables, queues, and files)</span></span>
* <span data-ttu-id="d89aa-114">Blobar</span><span class="sxs-lookup"><span data-stu-id="d89aa-114">Blobs</span></span>
* <span data-ttu-id="d89aa-115">Tabeller</span><span class="sxs-lookup"><span data-stu-id="d89aa-115">Tables</span></span>
* <span data-ttu-id="d89aa-116">Köer</span><span class="sxs-lookup"><span data-stu-id="d89aa-116">Queues</span></span>  

| <span data-ttu-id="d89aa-117">Klart</span><span class="sxs-lookup"><span data-stu-id="d89aa-117">Done</span></span> | <span data-ttu-id="d89aa-118">Område</span><span class="sxs-lookup"><span data-stu-id="d89aa-118">Area</span></span> | <span data-ttu-id="d89aa-119">Kategori</span><span class="sxs-lookup"><span data-stu-id="d89aa-119">Category</span></span> | <span data-ttu-id="d89aa-120">Fråga</span><span class="sxs-lookup"><span data-stu-id="d89aa-120">Question</span></span> |
| --- | --- | --- | --- |
| &nbsp; | <span data-ttu-id="d89aa-121">Alla tjänster</span><span class="sxs-lookup"><span data-stu-id="d89aa-121">All Services</span></span> |<span data-ttu-id="d89aa-122">Skalbarhetsmål</span><span class="sxs-lookup"><span data-stu-id="d89aa-122">Scalability Targets</span></span> |[<span data-ttu-id="d89aa-123">Närmar programmet utformats-tooavoid hello skalbarhetsmål?</span><span class="sxs-lookup"><span data-stu-id="d89aa-123">Is your application designed tooavoid approaching hello scalability targets?</span></span>](#subheading1) |
| &nbsp; | <span data-ttu-id="d89aa-124">Alla tjänster</span><span class="sxs-lookup"><span data-stu-id="d89aa-124">All Services</span></span> |<span data-ttu-id="d89aa-125">Skalbarhetsmål</span><span class="sxs-lookup"><span data-stu-id="d89aa-125">Scalability Targets</span></span> |[<span data-ttu-id="d89aa-126">Är din naming convention utformats tooenable bättre belastningsutjämning?</span><span class="sxs-lookup"><span data-stu-id="d89aa-126">Is your naming convention designed tooenable better load-balancing?</span></span>](#subheading47) |
| &nbsp; | <span data-ttu-id="d89aa-127">Alla tjänster</span><span class="sxs-lookup"><span data-stu-id="d89aa-127">All Services</span></span> |<span data-ttu-id="d89aa-128">Nätverk</span><span class="sxs-lookup"><span data-stu-id="d89aa-128">Networking</span></span> |[<span data-ttu-id="d89aa-129">Har sida klientenheter tillräckligt hög bandbredd och låg latens tooachieve hello prestanda som krävs?</span><span class="sxs-lookup"><span data-stu-id="d89aa-129">Do client side devices have sufficiently high bandwidth and low latency tooachieve hello performance needed?</span></span>](#subheading2) |
| &nbsp; | <span data-ttu-id="d89aa-130">Alla tjänster</span><span class="sxs-lookup"><span data-stu-id="d89aa-130">All Services</span></span> |<span data-ttu-id="d89aa-131">Nätverk</span><span class="sxs-lookup"><span data-stu-id="d89aa-131">Networking</span></span> |[<span data-ttu-id="d89aa-132">Har sida klientenheter en tillräckligt hög kvalitet länk?</span><span class="sxs-lookup"><span data-stu-id="d89aa-132">Do client side devices have a high enough quality link?</span></span>](#subheading3) |
| &nbsp; | <span data-ttu-id="d89aa-133">Alla tjänster</span><span class="sxs-lookup"><span data-stu-id="d89aa-133">All Services</span></span> |<span data-ttu-id="d89aa-134">Nätverk</span><span class="sxs-lookup"><span data-stu-id="d89aa-134">Networking</span></span> |[<span data-ttu-id="d89aa-135">Hello klientprogrammet finns ”” hello storage-konto?</span><span class="sxs-lookup"><span data-stu-id="d89aa-135">Is hello client application located "near" hello storage account?</span></span>](#subheading4) |
| &nbsp; | <span data-ttu-id="d89aa-136">Alla tjänster</span><span class="sxs-lookup"><span data-stu-id="d89aa-136">All Services</span></span> |<span data-ttu-id="d89aa-137">Innehållsdistribution</span><span class="sxs-lookup"><span data-stu-id="d89aa-137">Content Distribution</span></span> |[<span data-ttu-id="d89aa-138">Använder du en CDN för innehållsdistribution?</span><span class="sxs-lookup"><span data-stu-id="d89aa-138">Are you using a CDN for content distribution?</span></span>](#subheading5) |
| &nbsp; | <span data-ttu-id="d89aa-139">Alla tjänster</span><span class="sxs-lookup"><span data-stu-id="d89aa-139">All Services</span></span> |<span data-ttu-id="d89aa-140">En klient direkt åtkomst</span><span class="sxs-lookup"><span data-stu-id="d89aa-140">Direct Client Access</span></span> |[<span data-ttu-id="d89aa-141">Använder du SAS och CORS tooallow direktåtkomst toostorage i stället för proxy?</span><span class="sxs-lookup"><span data-stu-id="d89aa-141">Are you using SAS and CORS tooallow direct access toostorage instead of proxy?</span></span>](#subheading6) |
| &nbsp; | <span data-ttu-id="d89aa-142">Alla tjänster</span><span class="sxs-lookup"><span data-stu-id="d89aa-142">All Services</span></span> |<span data-ttu-id="d89aa-143">Cachelagring</span><span class="sxs-lookup"><span data-stu-id="d89aa-143">Caching</span></span> |[<span data-ttu-id="d89aa-144">Är programmet cachelagring data används flera gånger och ändringar sällan?</span><span class="sxs-lookup"><span data-stu-id="d89aa-144">Is your application caching data that is repeatedly used and changes rarely?</span></span>](#subheading7) |
| &nbsp; | <span data-ttu-id="d89aa-145">Alla tjänster</span><span class="sxs-lookup"><span data-stu-id="d89aa-145">All Services</span></span> |<span data-ttu-id="d89aa-146">Cachelagring</span><span class="sxs-lookup"><span data-stu-id="d89aa-146">Caching</span></span> |[<span data-ttu-id="d89aa-147">Tillämpningsprogrammet är grupperade uppdateringar (cachelagring på klientsidan för dem och sedan ladda upp i större mängder)?</span><span class="sxs-lookup"><span data-stu-id="d89aa-147">Is your application batching updates (caching them client side and then uploading in larger sets)?</span></span>](#subheading8) |
| &nbsp; | <span data-ttu-id="d89aa-148">Alla tjänster</span><span class="sxs-lookup"><span data-stu-id="d89aa-148">All Services</span></span> |<span data-ttu-id="d89aa-149">.NET-konfiguration</span><span class="sxs-lookup"><span data-stu-id="d89aa-149">.NET Configuration</span></span> |[<span data-ttu-id="d89aa-150">Har du konfigurerat din klient toouse ett tillräckligt antal samtidiga anslutningar?</span><span class="sxs-lookup"><span data-stu-id="d89aa-150">Have you configured your client toouse a sufficient number of concurrent connections?</span></span>](#subheading9) |
| &nbsp; | <span data-ttu-id="d89aa-151">Alla tjänster</span><span class="sxs-lookup"><span data-stu-id="d89aa-151">All Services</span></span> |<span data-ttu-id="d89aa-152">.NET-konfiguration</span><span class="sxs-lookup"><span data-stu-id="d89aa-152">.NET Configuration</span></span> |[<span data-ttu-id="d89aa-153">Har du konfigurerat .NET toouse ett tillräckligt antal trådar?</span><span class="sxs-lookup"><span data-stu-id="d89aa-153">Have you configured .NET toouse a sufficient number of threads?</span></span>](#subheading10) |
| &nbsp; | <span data-ttu-id="d89aa-154">Alla tjänster</span><span class="sxs-lookup"><span data-stu-id="d89aa-154">All Services</span></span> |<span data-ttu-id="d89aa-155">.NET-konfiguration</span><span class="sxs-lookup"><span data-stu-id="d89aa-155">.NET Configuration</span></span> |[<span data-ttu-id="d89aa-156">Du använder .NET 4.5 eller senare som har förbättrats skräpinsamling?</span><span class="sxs-lookup"><span data-stu-id="d89aa-156">Are you using .NET 4.5 or later, which has improved garbage collection?</span></span>](#subheading11) |
| &nbsp; | <span data-ttu-id="d89aa-157">Alla tjänster</span><span class="sxs-lookup"><span data-stu-id="d89aa-157">All Services</span></span> |<span data-ttu-id="d89aa-158">Parallellitet</span><span class="sxs-lookup"><span data-stu-id="d89aa-158">Parallelism</span></span> |[<span data-ttu-id="d89aa-159">Har du sett till att parallellitet begränsas på lämpligt sätt så att du inte överlagra din klientfunktioner eller hello skalbarhetsmål?</span><span class="sxs-lookup"><span data-stu-id="d89aa-159">Have you ensured that parallelism is bounded appropriately so that you don't overload either your client capabilities or hello scalability targets?</span></span>](#subheading12) |
| &nbsp; | <span data-ttu-id="d89aa-160">Alla tjänster</span><span class="sxs-lookup"><span data-stu-id="d89aa-160">All Services</span></span> |<span data-ttu-id="d89aa-161">Verktyg</span><span class="sxs-lookup"><span data-stu-id="d89aa-161">Tools</span></span> |[<span data-ttu-id="d89aa-162">Tillhandahålls du använder hello senaste versionen av Microsoft klientbibliotek och verktyg?</span><span class="sxs-lookup"><span data-stu-id="d89aa-162">Are you using hello latest version of Microsoft provided client libraries and tools?</span></span>](#subheading13) |
| &nbsp; | <span data-ttu-id="d89aa-163">Alla tjänster</span><span class="sxs-lookup"><span data-stu-id="d89aa-163">All Services</span></span> |<span data-ttu-id="d89aa-164">Antal försök</span><span class="sxs-lookup"><span data-stu-id="d89aa-164">Retries</span></span> |[<span data-ttu-id="d89aa-165">Är du med hjälp av en exponentiell backoff försök principer för begränsning av fel och tidsgränser?</span><span class="sxs-lookup"><span data-stu-id="d89aa-165">Are you using an exponential backoff retry policy for throttling errors and timeouts?</span></span>](#subheading14) |
| &nbsp; | <span data-ttu-id="d89aa-166">Alla tjänster</span><span class="sxs-lookup"><span data-stu-id="d89aa-166">All Services</span></span> |<span data-ttu-id="d89aa-167">Antal försök</span><span class="sxs-lookup"><span data-stu-id="d89aa-167">Retries</span></span> |[<span data-ttu-id="d89aa-168">Är programmet Undvik nya försök för icke-återförsökbart fel?</span><span class="sxs-lookup"><span data-stu-id="d89aa-168">Is your application avoiding retries for non-retryable errors?</span></span>](#subheading15) |
| &nbsp; | <span data-ttu-id="d89aa-169">Blobar</span><span class="sxs-lookup"><span data-stu-id="d89aa-169">Blobs</span></span> |<span data-ttu-id="d89aa-170">Skalbarhetsmål</span><span class="sxs-lookup"><span data-stu-id="d89aa-170">Scalability Targets</span></span> |[<span data-ttu-id="d89aa-171">Har du ett stort antal klienter som ansluter till ett enda objekt samtidigt?</span><span class="sxs-lookup"><span data-stu-id="d89aa-171">Do you have a large number of clients accessing a single object concurrently?</span></span>](#subheading46) |
| &nbsp; | <span data-ttu-id="d89aa-172">Blobar</span><span class="sxs-lookup"><span data-stu-id="d89aa-172">Blobs</span></span> |<span data-ttu-id="d89aa-173">Skalbarhetsmål</span><span class="sxs-lookup"><span data-stu-id="d89aa-173">Scalability Targets</span></span> |[<span data-ttu-id="d89aa-174">Är programmet dig inom mål för hello-bandbredd eller åtgärder skalbarhet för en enda blob?</span><span class="sxs-lookup"><span data-stu-id="d89aa-174">Is your application staying within hello bandwidth or operations scalability target for a single blob?</span></span>](#subheading16) |
| &nbsp; | <span data-ttu-id="d89aa-175">Blobar</span><span class="sxs-lookup"><span data-stu-id="d89aa-175">Blobs</span></span> |<span data-ttu-id="d89aa-176">Kopiera BLOB</span><span class="sxs-lookup"><span data-stu-id="d89aa-176">Copying Blobs</span></span> |[<span data-ttu-id="d89aa-177">Vill du kopiera BLOB på ett effektivt sätt?</span><span class="sxs-lookup"><span data-stu-id="d89aa-177">Are you copying blobs in an efficient manner?</span></span>](#subheading17) |
| &nbsp; | <span data-ttu-id="d89aa-178">Blobar</span><span class="sxs-lookup"><span data-stu-id="d89aa-178">Blobs</span></span> |<span data-ttu-id="d89aa-179">Kopiera BLOB</span><span class="sxs-lookup"><span data-stu-id="d89aa-179">Copying Blobs</span></span> |[<span data-ttu-id="d89aa-180">Använder du AzCopy för bulk kopior av blobbar?</span><span class="sxs-lookup"><span data-stu-id="d89aa-180">Are you using AzCopy for bulk copies of blobs?</span></span>](#subheading18) |
| &nbsp; | <span data-ttu-id="d89aa-181">Blobar</span><span class="sxs-lookup"><span data-stu-id="d89aa-181">Blobs</span></span> |<span data-ttu-id="d89aa-182">Kopiera BLOB</span><span class="sxs-lookup"><span data-stu-id="d89aa-182">Copying Blobs</span></span> |[<span data-ttu-id="d89aa-183">Använder du Azure Import/Export tootransfer mycket stora mängder data?</span><span class="sxs-lookup"><span data-stu-id="d89aa-183">Are you using Azure Import/Export tootransfer very large volumes of data?</span></span>](#subheading19) |
| &nbsp; | <span data-ttu-id="d89aa-184">Blobar</span><span class="sxs-lookup"><span data-stu-id="d89aa-184">Blobs</span></span> |<span data-ttu-id="d89aa-185">Använda Metadata</span><span class="sxs-lookup"><span data-stu-id="d89aa-185">Use Metadata</span></span> |[<span data-ttu-id="d89aa-186">Lagrar du vanliga metadata om blobbar i sina metadata?</span><span class="sxs-lookup"><span data-stu-id="d89aa-186">Are you storing frequently used metadata about blobs in their metadata?</span></span>](#subheading20) |
| &nbsp; | <span data-ttu-id="d89aa-187">Blobar</span><span class="sxs-lookup"><span data-stu-id="d89aa-187">Blobs</span></span> |<span data-ttu-id="d89aa-188">Snabb överföring</span><span class="sxs-lookup"><span data-stu-id="d89aa-188">Uploading Fast</span></span> |[<span data-ttu-id="d89aa-189">När du försöker tooupload en blob snabbt du överför block parallellt?</span><span class="sxs-lookup"><span data-stu-id="d89aa-189">When trying tooupload one blob quickly, are you uploading blocks in parallel?</span></span>](#subheading21) |
| &nbsp; | <span data-ttu-id="d89aa-190">Blobar</span><span class="sxs-lookup"><span data-stu-id="d89aa-190">Blobs</span></span> |<span data-ttu-id="d89aa-191">Snabb överföring</span><span class="sxs-lookup"><span data-stu-id="d89aa-191">Uploading Fast</span></span> |[<span data-ttu-id="d89aa-192">När du försöker tooupload många blobbar snabbt, du överför blobbar parallellt?</span><span class="sxs-lookup"><span data-stu-id="d89aa-192">When trying tooupload many blobs quickly, are you uploading blobs in parallel?</span></span>](#subheading22) |
| &nbsp; | <span data-ttu-id="d89aa-193">Blobar</span><span class="sxs-lookup"><span data-stu-id="d89aa-193">Blobs</span></span> |<span data-ttu-id="d89aa-194">Korrigera Blobbtypen</span><span class="sxs-lookup"><span data-stu-id="d89aa-194">Correct Blob Type</span></span> |[<span data-ttu-id="d89aa-195">Du använder sidblobbar eller blockblobbar när det är lämpligt?</span><span class="sxs-lookup"><span data-stu-id="d89aa-195">Are you using page blobs or block blobs when appropriate?</span></span>](#subheading23) |
| &nbsp; | <span data-ttu-id="d89aa-196">Tabeller</span><span class="sxs-lookup"><span data-stu-id="d89aa-196">Tables</span></span> |<span data-ttu-id="d89aa-197">Skalbarhetsmål</span><span class="sxs-lookup"><span data-stu-id="d89aa-197">Scalability Targets</span></span> |[<span data-ttu-id="d89aa-198">Är du närmar sig hello skalbarhetsmål för entiteter per sekund?</span><span class="sxs-lookup"><span data-stu-id="d89aa-198">Are you approaching hello scalability targets for entities per second?</span></span>](#subheading24) |
| &nbsp; | <span data-ttu-id="d89aa-199">Tabeller</span><span class="sxs-lookup"><span data-stu-id="d89aa-199">Tables</span></span> |<span data-ttu-id="d89aa-200">Konfiguration</span><span class="sxs-lookup"><span data-stu-id="d89aa-200">Configuration</span></span> |[<span data-ttu-id="d89aa-201">Använder du JSON för tabell-begäranden?</span><span class="sxs-lookup"><span data-stu-id="d89aa-201">Are you using JSON for your table requests?</span></span>](#subheading25) |
| &nbsp; | <span data-ttu-id="d89aa-202">Tabeller</span><span class="sxs-lookup"><span data-stu-id="d89aa-202">Tables</span></span> |<span data-ttu-id="d89aa-203">Konfiguration</span><span class="sxs-lookup"><span data-stu-id="d89aa-203">Configuration</span></span> |[<span data-ttu-id="d89aa-204">Har du inaktiverat Nagle tooimprove hello prestanda för små begäran?</span><span class="sxs-lookup"><span data-stu-id="d89aa-204">Have you turned Nagle off tooimprove hello performance of small requests?</span></span>](#subheading26) |
| &nbsp; | <span data-ttu-id="d89aa-205">Tabeller</span><span class="sxs-lookup"><span data-stu-id="d89aa-205">Tables</span></span> |<span data-ttu-id="d89aa-206">Tabeller och partitioner</span><span class="sxs-lookup"><span data-stu-id="d89aa-206">Tables and Partitions</span></span> |[<span data-ttu-id="d89aa-207">Har du rätt partitionerat data?</span><span class="sxs-lookup"><span data-stu-id="d89aa-207">Have you properly partitioned your data?</span></span>](#subheading27) |
| &nbsp; | <span data-ttu-id="d89aa-208">Tabeller</span><span class="sxs-lookup"><span data-stu-id="d89aa-208">Tables</span></span> |<span data-ttu-id="d89aa-209">Varm partitioner</span><span class="sxs-lookup"><span data-stu-id="d89aa-209">Hot Partitions</span></span> |[<span data-ttu-id="d89aa-210">Är du undvika Lägg endast och endast lägga mönster?</span><span class="sxs-lookup"><span data-stu-id="d89aa-210">Are you avoiding append-only and prepend-only patterns?</span></span>](#subheading28) |
| &nbsp; | <span data-ttu-id="d89aa-211">Tabeller</span><span class="sxs-lookup"><span data-stu-id="d89aa-211">Tables</span></span> |<span data-ttu-id="d89aa-212">Varm partitioner</span><span class="sxs-lookup"><span data-stu-id="d89aa-212">Hot Partitions</span></span> |[<span data-ttu-id="d89aa-213">Infogningar/uppdateringar är fördelade på flera partitioner?</span><span class="sxs-lookup"><span data-stu-id="d89aa-213">Are your inserts/updates spread across many partitions?</span></span>](#subheading29) |
| &nbsp; | <span data-ttu-id="d89aa-214">Tabeller</span><span class="sxs-lookup"><span data-stu-id="d89aa-214">Tables</span></span> |<span data-ttu-id="d89aa-215">Frågeomfattningen</span><span class="sxs-lookup"><span data-stu-id="d89aa-215">Query Scope</span></span> |[<span data-ttu-id="d89aa-216">Har du skapat din schemat tooallow för punkt frågor toobe används i de flesta fall och tabellen frågor toobe användas sparsamt?</span><span class="sxs-lookup"><span data-stu-id="d89aa-216">Have you designed your schema tooallow for point queries toobe used in most cases, and table queries toobe used sparingly?</span></span>](#subheading30) |
| &nbsp; | <span data-ttu-id="d89aa-217">Tabeller</span><span class="sxs-lookup"><span data-stu-id="d89aa-217">Tables</span></span> |<span data-ttu-id="d89aa-218">Frågan densitet</span><span class="sxs-lookup"><span data-stu-id="d89aa-218">Query Density</span></span> |[<span data-ttu-id="d89aa-219">Gör dina frågor vanligtvis endast genomsökning och returnerar rader som ska använda för ditt program?</span><span class="sxs-lookup"><span data-stu-id="d89aa-219">Do your queries typically only scan and return rows that your application will use?</span></span>](#subheading31) |
| &nbsp; | <span data-ttu-id="d89aa-220">Tabeller</span><span class="sxs-lookup"><span data-stu-id="d89aa-220">Tables</span></span> |<span data-ttu-id="d89aa-221">Begränsa returnerade Data</span><span class="sxs-lookup"><span data-stu-id="d89aa-221">Limiting Returned Data</span></span> |[<span data-ttu-id="d89aa-222">Använder du filtrera tooavoid returnerar entiteter som inte behövs?</span><span class="sxs-lookup"><span data-stu-id="d89aa-222">Are you using filtering tooavoid returning entities that are not needed?</span></span>](#subheading32) |
| &nbsp; | <span data-ttu-id="d89aa-223">Tabeller</span><span class="sxs-lookup"><span data-stu-id="d89aa-223">Tables</span></span> |<span data-ttu-id="d89aa-224">Begränsa returnerade Data</span><span class="sxs-lookup"><span data-stu-id="d89aa-224">Limiting Returned Data</span></span> |[<span data-ttu-id="d89aa-225">Använder du projektion tooavoid returnerar egenskaper som inte behövs?</span><span class="sxs-lookup"><span data-stu-id="d89aa-225">Are you using projection tooavoid returning properties that are not needed?</span></span>](#subheading33) |
| &nbsp; | <span data-ttu-id="d89aa-226">Tabeller</span><span class="sxs-lookup"><span data-stu-id="d89aa-226">Tables</span></span> |<span data-ttu-id="d89aa-227">Denormalization</span><span class="sxs-lookup"><span data-stu-id="d89aa-227">Denormalization</span></span> |[<span data-ttu-id="d89aa-228">Har du Avnormaliserade dina data så att du undviker ineffektiva frågor eller flera läsbegäranden vid tooget data?</span><span class="sxs-lookup"><span data-stu-id="d89aa-228">Have you denormalized your data such that you avoid inefficient queries or multiple read requests when trying tooget data?</span></span>](#subheading34) |
| &nbsp; | <span data-ttu-id="d89aa-229">Tabeller</span><span class="sxs-lookup"><span data-stu-id="d89aa-229">Tables</span></span> |<span data-ttu-id="d89aa-230">Insert/Update/Delete</span><span class="sxs-lookup"><span data-stu-id="d89aa-230">Insert/Update/Delete</span></span> |[<span data-ttu-id="d89aa-231">Är du batchbearbetning begäranden som behöver toobe transaktionella eller kan göras på hello samma tid tooreduce turer?</span><span class="sxs-lookup"><span data-stu-id="d89aa-231">Are you batching requests that need toobe transactional or can be done at hello same time tooreduce round-trips?</span></span>](#subheading35) |
| &nbsp; | <span data-ttu-id="d89aa-232">Tabeller</span><span class="sxs-lookup"><span data-stu-id="d89aa-232">Tables</span></span> |<span data-ttu-id="d89aa-233">Insert/Update/Delete</span><span class="sxs-lookup"><span data-stu-id="d89aa-233">Insert/Update/Delete</span></span> |[<span data-ttu-id="d89aa-234">Är du undvika att du hämtar en entitet bara toodetermine om toocall infoga eller uppdatera?</span><span class="sxs-lookup"><span data-stu-id="d89aa-234">Are you avoiding retrieving an entity just toodetermine whether toocall insert or update?</span></span>](#subheading36) |
| &nbsp; | <span data-ttu-id="d89aa-235">Tabeller</span><span class="sxs-lookup"><span data-stu-id="d89aa-235">Tables</span></span> |<span data-ttu-id="d89aa-236">Insert/Update/Delete</span><span class="sxs-lookup"><span data-stu-id="d89aa-236">Insert/Update/Delete</span></span> |[<span data-ttu-id="d89aa-237">Har du funderat lagra serien med data som hämtas ofta tillsammans i en enda enhet som egenskaper i stället för flera enheter?</span><span class="sxs-lookup"><span data-stu-id="d89aa-237">Have you considered storing series of data that will frequently be retrieved together in a single entity as properties instead of multiple entities?</span></span>](#subheading37) |
| &nbsp; | <span data-ttu-id="d89aa-238">Tabeller</span><span class="sxs-lookup"><span data-stu-id="d89aa-238">Tables</span></span> |<span data-ttu-id="d89aa-239">Insert/Update/Delete</span><span class="sxs-lookup"><span data-stu-id="d89aa-239">Insert/Update/Delete</span></span> |[<span data-ttu-id="d89aa-240">För enheter som hämtas alltid tillsammans och kan skrivas i batchar (t.ex. serien tidsdata), har du funderat med blobbar i stället för tabeller?</span><span class="sxs-lookup"><span data-stu-id="d89aa-240">For entities that will always be retrieved together and can be written in batches (e.g. time series data), have you considered using blobs instead of tables?</span></span>](#subheading38) |
| &nbsp; | <span data-ttu-id="d89aa-241">Köer</span><span class="sxs-lookup"><span data-stu-id="d89aa-241">Queues</span></span> |<span data-ttu-id="d89aa-242">Skalbarhetsmål</span><span class="sxs-lookup"><span data-stu-id="d89aa-242">Scalability Targets</span></span> |[<span data-ttu-id="d89aa-243">Är du närmar sig hello skalbarhetsmål för meddelanden per sekund?</span><span class="sxs-lookup"><span data-stu-id="d89aa-243">Are you approaching hello scalability targets for messages per second?</span></span>](#subheading39) |
| &nbsp; | <span data-ttu-id="d89aa-244">Köer</span><span class="sxs-lookup"><span data-stu-id="d89aa-244">Queues</span></span> |<span data-ttu-id="d89aa-245">Konfiguration</span><span class="sxs-lookup"><span data-stu-id="d89aa-245">Configuration</span></span> |[<span data-ttu-id="d89aa-246">Har du inaktiverat Nagle tooimprove hello prestanda för små begäran?</span><span class="sxs-lookup"><span data-stu-id="d89aa-246">Have you turned Nagle off tooimprove hello performance of small requests?</span></span>](#subheading40) |
| &nbsp; | <span data-ttu-id="d89aa-247">Köer</span><span class="sxs-lookup"><span data-stu-id="d89aa-247">Queues</span></span> |<span data-ttu-id="d89aa-248">Meddelandestorlek</span><span class="sxs-lookup"><span data-stu-id="d89aa-248">Message Size</span></span> |[<span data-ttu-id="d89aa-249">Är dina meddelanden compact tooimprove hello prestanda för hello kön?</span><span class="sxs-lookup"><span data-stu-id="d89aa-249">Are your messages compact tooimprove hello performance of hello queue?</span></span>](#subheading41) |
| &nbsp; | <span data-ttu-id="d89aa-250">Köer</span><span class="sxs-lookup"><span data-stu-id="d89aa-250">Queues</span></span> |<span data-ttu-id="d89aa-251">Hämta bulk</span><span class="sxs-lookup"><span data-stu-id="d89aa-251">Bulk Retrieve</span></span> |[<span data-ttu-id="d89aa-252">Hämtar du flera meddelanden i en enda åtgärd ”hämta”?</span><span class="sxs-lookup"><span data-stu-id="d89aa-252">Are you retrieving multiple messages in a single "Get" operation?</span></span>](#subheading42) |
| &nbsp; | <span data-ttu-id="d89aa-253">Köer</span><span class="sxs-lookup"><span data-stu-id="d89aa-253">Queues</span></span> |<span data-ttu-id="d89aa-254">Avsökningsfrekvens</span><span class="sxs-lookup"><span data-stu-id="d89aa-254">Polling Frequency</span></span> |[<span data-ttu-id="d89aa-255">Är du avsökning ofta tillräckligt med tooreduce hello som uppfattade svarstiden för ditt program?</span><span class="sxs-lookup"><span data-stu-id="d89aa-255">Are you polling frequently enough tooreduce hello perceived latency of your application?</span></span>](#subheading43) |
| &nbsp; | <span data-ttu-id="d89aa-256">Köer</span><span class="sxs-lookup"><span data-stu-id="d89aa-256">Queues</span></span> |<span data-ttu-id="d89aa-257">Uppdatera meddelande</span><span class="sxs-lookup"><span data-stu-id="d89aa-257">Update Message</span></span> |[<span data-ttu-id="d89aa-258">Du använder UpdateMessage toostore förlopp i behandlar meddelanden att undvika att hela tooreprocess hello-meddelande om ett fel inträffar?</span><span class="sxs-lookup"><span data-stu-id="d89aa-258">Are you using UpdateMessage toostore progress in processing messages, avoiding having tooreprocess hello entire message if an error occurs?</span></span>](#subheading44) |
| &nbsp; | <span data-ttu-id="d89aa-259">Köer</span><span class="sxs-lookup"><span data-stu-id="d89aa-259">Queues</span></span> |<span data-ttu-id="d89aa-260">Arkitektur</span><span class="sxs-lookup"><span data-stu-id="d89aa-260">Architecture</span></span> |[<span data-ttu-id="d89aa-261">Du använder köer toomake Mer skalbar hela programmet genom att hålla tidskrävande arbetsbelastningar utanför hello kritiska och skala sedan oberoende av varandra?</span><span class="sxs-lookup"><span data-stu-id="d89aa-261">Are you using queues toomake your entire application more scalable by keeping long-running workloads out of hello critical path and scale then independently?</span></span>](#subheading45) |

## <span data-ttu-id="d89aa-262"><a name="allservices"></a>Alla tjänster</span><span class="sxs-lookup"><span data-stu-id="d89aa-262"><a name="allservices"></a>All Services</span></span>
<span data-ttu-id="d89aa-263">Det här avsnittet innehåller beprövade metoder som är tillämpliga toohello användningen av hello Azure Storage-tjänster (blobbar, tabeller, köer eller filer).</span><span class="sxs-lookup"><span data-stu-id="d89aa-263">This section lists proven practices that are applicable toohello use of any of hello Azure Storage services (blobs, tables, queues, or files).</span></span>  

### <span data-ttu-id="d89aa-264"><a name="subheading1"></a>Skalbarhetsmål</span><span class="sxs-lookup"><span data-stu-id="d89aa-264"><a name="subheading1"></a>Scalability Targets</span></span>
<span data-ttu-id="d89aa-265">Varje hello Azure Storage-tjänster har skalbarhetsmål för kapacitet (GB), Transaktionshastighet och bandbredd.</span><span class="sxs-lookup"><span data-stu-id="d89aa-265">Each of hello Azure Storage services has scalability targets for capacity (GB), transaction rate, and bandwidth.</span></span> <span data-ttu-id="d89aa-266">Om ditt program närmar sig eller överskrider något hello skalbarhetsmål, stöta ökad transaktion fördröjningar eller begränsning.</span><span class="sxs-lookup"><span data-stu-id="d89aa-266">If your application approaches or exceeds any of hello scalability targets, it may encounter increased transaction latencies or throttling.</span></span> <span data-ttu-id="d89aa-267">När en lagringstjänsten begränsar ditt program, börjar hello service tooreturn ”503 servern upptagen” eller ”tidsgräns för 500 åtgärd” felkoder för vissa lagringstransaktioner.</span><span class="sxs-lookup"><span data-stu-id="d89aa-267">When a Storage service throttles your application, hello service begins tooreturn "503 Server busy" or "500 Operation timeout" error codes for some storage transactions.</span></span> <span data-ttu-id="d89aa-268">Det här avsnittet beskrivs särskilt båda hello allmänna inriktning toodealing med skalbarhetsmål och skalbarhetsmål för bandbredd.</span><span class="sxs-lookup"><span data-stu-id="d89aa-268">This section discusses both hello general approach toodealing with scalability targets and bandwidth scalability targets in particular.</span></span> <span data-ttu-id="d89aa-269">Senare avsnitt som handlar om enskilda lagringstjänster beskrivs skalbarhetsmål hello kontexten för den specifika tjänsten:</span><span class="sxs-lookup"><span data-stu-id="d89aa-269">Later sections that deal with individual storage services discuss scalability targets in hello context of that specific service:</span></span>  

* [<span data-ttu-id="d89aa-270">BLOB-bandbredd och begäranden per sekund</span><span class="sxs-lookup"><span data-stu-id="d89aa-270">Blob bandwidth and requests per second</span></span>](#subheading16)
* [<span data-ttu-id="d89aa-271">Tabellentiteter per sekund</span><span class="sxs-lookup"><span data-stu-id="d89aa-271">Table entities per second</span></span>](#subheading24)
* [<span data-ttu-id="d89aa-272">Kömeddelanden per sekund</span><span class="sxs-lookup"><span data-stu-id="d89aa-272">Queue messages per second</span></span>](#subheading39)  

#### <span data-ttu-id="d89aa-273"><a name="sub1bandwidth"></a>Bandbredd skalbarhet mål för alla tjänster</span><span class="sxs-lookup"><span data-stu-id="d89aa-273"><a name="sub1bandwidth"></a>Bandwidth Scalability Target for All Services</span></span>
<span data-ttu-id="d89aa-274">När hello skrivning, hello bandbredd mål i hello USA för en geo-redundant lagring (GRS)-konto är 10 Gigabit per sekund (Gbps) för inkommande trafik (data skickas toohello storage-konto) och 20 Gbit/s för utgående trafik (data som skickas från hello storage-konto).</span><span class="sxs-lookup"><span data-stu-id="d89aa-274">At hello time of writing, hello bandwidth targets in hello US for a geo-redundant storage (GRS) account are 10 gigabits per second (Gbps) for ingress (data sent toohello storage account) and 20 Gbps for egress (data sent from hello storage account).</span></span> <span data-ttu-id="d89aa-275">För ett lokalt redundant lagringskonto (LRS) hello-gränserna är högre – 20 Gbit/s för ingående och 30 Gbit/s för utgående trafik.</span><span class="sxs-lookup"><span data-stu-id="d89aa-275">For a locally redundant storage (LRS) account, hello limits are higher – 20 Gbps for ingress and 30 Gbps for egress.</span></span>  <span data-ttu-id="d89aa-276">Internationella bandbreddsgränser kan vara lägre och finns på vår [skalbarhet mål sidan](http://msdn.microsoft.com/library/azure/dn249410.aspx).</span><span class="sxs-lookup"><span data-stu-id="d89aa-276">International bandwidth limits may be lower and can be found on our [scalability targets page](http://msdn.microsoft.com/library/azure/dn249410.aspx).</span></span>  <span data-ttu-id="d89aa-277">Mer information om hello lagringsalternativ för redundans, se hello länkar i [användbara resurser](#sub1useful) nedan.</span><span class="sxs-lookup"><span data-stu-id="d89aa-277">For more information on hello storage redundancy options, see hello links in [Useful Resources](#sub1useful) below.</span></span>  

#### <a name="what-toodo-when-approaching-a-scalability-target"></a><span data-ttu-id="d89aa-278">Vilka toodo när närmar sig ett mål för skalbarhet</span><span class="sxs-lookup"><span data-stu-id="d89aa-278">What toodo when approaching a scalability target</span></span>
<span data-ttu-id="d89aa-279">Om ditt program närmar sig hello skalbarhetsmål för ett enda lagringskonto, bör du införandet av en av följande metoder hello:</span><span class="sxs-lookup"><span data-stu-id="d89aa-279">If your application is approaching hello scalability targets for a single storage account, consider adopting one of hello following approaches:</span></span>  

* <span data-ttu-id="d89aa-280">Rapportdefinitionselementet hello arbetsbelastning som gör att din ansökan tooapproach eller överskrida hello skalbarhet mål.</span><span class="sxs-lookup"><span data-stu-id="d89aa-280">Reconsider hello workload that causes your application tooapproach or exceed hello scalability target.</span></span> <span data-ttu-id="d89aa-281">Kan du utforma den annorlunda toouse mindre bandbredd eller kapacitet eller färre transaktioner?</span><span class="sxs-lookup"><span data-stu-id="d89aa-281">Can you design it differently toouse less bandwidth or capacity, or fewer transactions?</span></span>
* <span data-ttu-id="d89aa-282">Om ett program måste överskrider en hello skalbarhetsmål, bör du skapa flera lagringskonton och partition dina programdata mellan dessa flera lagringskonton.</span><span class="sxs-lookup"><span data-stu-id="d89aa-282">If an application must exceed one of hello scalability targets, you should create multiple storage accounts and partition your application data across those multiple storage accounts.</span></span> <span data-ttu-id="d89aa-283">Om du använder det här mönstret sedan vara säker på att toodesign ditt program så att du kan lägga till fler lagringskonton i hello framtida för belastningsutjämning.</span><span class="sxs-lookup"><span data-stu-id="d89aa-283">If you use this pattern, then be sure toodesign your application so that you can add more storage accounts in hello future for load balancing.</span></span> <span data-ttu-id="d89aa-284">Varje Azure-prenumeration kan ha upp too100 storage-konton vid tiden för skrivning.</span><span class="sxs-lookup"><span data-stu-id="d89aa-284">At time of writing, each Azure subscription can have up too100 storage accounts.</span></span>  <span data-ttu-id="d89aa-285">Storage-konton har också utan kostnad än förbrukningen termer data som lagras, transaktioner som har gjorts eller data som överförs.</span><span class="sxs-lookup"><span data-stu-id="d89aa-285">Storage accounts also have no cost other than your usage in terms of data stored, transactions made, or data transferred.</span></span>
* <span data-ttu-id="d89aa-286">Om ditt program träffar hello bandbredd mål, Överväg att komprimera data i hello tooreduce hello bandbredd som krävs toosend hello data toohello lagring-klienttjänsten.</span><span class="sxs-lookup"><span data-stu-id="d89aa-286">If your application hits hello bandwidth targets, consider compressing data in hello client tooreduce hello bandwidth required toosend hello data toohello storage service.</span></span>  <span data-ttu-id="d89aa-287">Observera att även om detta kan spara bandbredd och förbättra nätverkets prestanda, den kan också innehålla några negativa konsekvenser.</span><span class="sxs-lookup"><span data-stu-id="d89aa-287">Note that while this may save bandwidth and improve network performance, it can also have some negative impacts.</span></span>  <span data-ttu-id="d89aa-288">Du bör utvärdera hello prestandapåverkan detta på grund av toohello ytterligare bearbetningskrav för att komprimera och expandera data i hello-klienten.</span><span class="sxs-lookup"><span data-stu-id="d89aa-288">You should evaluate hello performance impact of this due toohello additional processing requirements for compressing and decompressing data in hello client.</span></span> <span data-ttu-id="d89aa-289">Dessutom kan kan lagra komprimerade data göra det svårare tootroubleshoot problem Eftersom det kan vara svårare tooview lagrade data med standardverktyg.</span><span class="sxs-lookup"><span data-stu-id="d89aa-289">In addition, storing compressed data can make it more difficult tootroubleshoot issues since it could be more difficult tooview stored data using standard tools.</span></span>
* <span data-ttu-id="d89aa-290">Om ditt program träffar hello skalbarhetsmål, kontrollera att du använder en exponentiell backoff för återförsök (se [återförsök](#subheading14)).</span><span class="sxs-lookup"><span data-stu-id="d89aa-290">If your application hits hello scalability targets, then ensure that you are using an exponential backoff for retries (see [Retries](#subheading14)).</span></span>  <span data-ttu-id="d89aa-291">Det är bättre toomake säker hello skalbarhetsmål hanterar aldrig (med hjälp av en av hello ovan metoder), men det säkerställer att programmet hålla inte bara du försöker snabbt, vilket gör hello begränsning worse.</span><span class="sxs-lookup"><span data-stu-id="d89aa-291">It's better toomake sure you never approach hello scalability targets (by using one of hello above methods), but this will ensure your application won't just keep retrying rapidly, making hello throttling worse.</span></span>  

#### <a name="useful-resources"></a><span data-ttu-id="d89aa-292">Användbara resurser</span><span class="sxs-lookup"><span data-stu-id="d89aa-292">Useful Resources</span></span>
<span data-ttu-id="d89aa-293">hello följande länkar innehåller ytterligare information om skalbarhetsmål:</span><span class="sxs-lookup"><span data-stu-id="d89aa-293">hello following links provide additional detail on scalability targets:</span></span>

* <span data-ttu-id="d89aa-294">Se [Azure Storage skalbarhets- och prestandamål](storage-scalability-targets.md) information om skalbarhetsmål.</span><span class="sxs-lookup"><span data-stu-id="d89aa-294">See [Azure Storage Scalability and Performance Targets](storage-scalability-targets.md) for information about scalability targets.</span></span>
* <span data-ttu-id="d89aa-295">Se [Azure Storage-replikering](storage-redundancy.md) och hello blogginlägget [Azure lagringsalternativ för redundans och Geo-Redundant lagring med läsbehörighet](http://blogs.msdn.com/b/windowsazurestorage/archive/2013/12/11/introducing-read-access-geo-replicated-storage-ra-grs-for-windows-azure-storage.aspx) information om lagringsalternativ för redundans.</span><span class="sxs-lookup"><span data-stu-id="d89aa-295">See [Azure Storage replication](storage-redundancy.md) and hello blog post [Azure Storage Redundancy Options and Read Access Geo Redundant Storage](http://blogs.msdn.com/b/windowsazurestorage/archive/2013/12/11/introducing-read-access-geo-replicated-storage-ra-grs-for-windows-azure-storage.aspx) for information about storage redundancy options.</span></span>
* <span data-ttu-id="d89aa-296">Aktuell information om priser för Azure-tjänster finns [priser för Azure](https://azure.microsoft.com/pricing/overview/).</span><span class="sxs-lookup"><span data-stu-id="d89aa-296">For current information about pricing for Azure services, see [Azure pricing](https://azure.microsoft.com/pricing/overview/).</span></span>  

### <span data-ttu-id="d89aa-297"><a name="subheading47"></a>Namngivningskonventionen för partition</span><span class="sxs-lookup"><span data-stu-id="d89aa-297"><a name="subheading47"></a>Partition Naming Convention</span></span>
<span data-ttu-id="d89aa-298">Azure Storage använder ett intervall-baserade partitionering schemat tooscale och Läs in saldo hello system.</span><span class="sxs-lookup"><span data-stu-id="d89aa-298">Azure Storage uses a range-based partitioning scheme tooscale and load balance hello system.</span></span> <span data-ttu-id="d89aa-299">hello Partitionsnyckeln är används toopartition data till intervall och dessa områden är belastningsutjämnad över hello system.</span><span class="sxs-lookup"><span data-stu-id="d89aa-299">hello partition key is used toopartition data into ranges and these ranges are load-balanced across hello system.</span></span> <span data-ttu-id="d89aa-300">Det innebär att namngivningskonventioner, till exempel lexikala ordning (t.ex. msftpayroll, msftperformance, msftemployees osv.) eller med tidsstämplar (log20160101, log20160102, log20160102 osv.) kan låna ut sig själva toohello partitioner som potentiellt är placerade på hello samma partition server, tills en åtgärd för belastningsutjämning delar ut dem i mindre intervall.</span><span class="sxs-lookup"><span data-stu-id="d89aa-300">This means naming conventions such as lexical ordering (e.g. msftpayroll, msftperformance, msftemployees, etc) or using time-stamps (log20160101, log20160102, log20160102, etc) will lend itself toohello partitions being potentially co-located on hello same partition server, until a load balancing operation splits them out into smaller ranges.</span></span> <span data-ttu-id="d89aa-301">Alla blobbar i en behållare kan till exempel hanteras av en enskild server förrän hello belastningen på dessa blobbar kräver ytterligare omfördelning av hello partition intervall.</span><span class="sxs-lookup"><span data-stu-id="d89aa-301">For example, all blobs within a container can be served by a single server until hello load on these blobs requires further rebalancing of hello partition ranges.</span></span> <span data-ttu-id="d89aa-302">På samma sätt kan en grupp med lågt belastade konton med namnen i lexikala ordning kan hanteras av en enskild server förrän hello läsa in på en eller alla dessa konton behöver dem toobe dela över flera servrar i partitioner.</span><span class="sxs-lookup"><span data-stu-id="d89aa-302">Similarly, a group of lightly loaded accounts with their names arranged in lexical order may be served by a single server until hello load on one or all of these accounts require them toobe split across multiple partitions servers.</span></span> <span data-ttu-id="d89aa-303">Varje belastningsutjämningsregel åtgärden kan påverka hello svarstid för anrop av lagring under hello-åtgärd.</span><span class="sxs-lookup"><span data-stu-id="d89aa-303">Each load balancing operation may impact hello latency of storage calls during hello operation.</span></span> <span data-ttu-id="d89aa-304">hello systemets möjlighet toohandle en plötslig burst av trafik tooa partition begränsas av hello skalbarhet för en enskild partition server förrän hello belastningsutjämning åtgärden sparkar i och balanserar hello partitionsnyckelintervallet.</span><span class="sxs-lookup"><span data-stu-id="d89aa-304">hello system's ability toohandle a sudden burst of traffic tooa partition is limited by hello scalability of a single partition server until hello load balancing operation kicks-in and rebalances hello partition key range.</span></span>  

<span data-ttu-id="d89aa-305">Du kan följa vissa tooreduce hello frekvensen bästa praxis för dessa åtgärder.</span><span class="sxs-lookup"><span data-stu-id="d89aa-305">You can follow some best practices tooreduce hello frequency of such operations.</span></span>  

* <span data-ttu-id="d89aa-306">Granska hello namngivningskonvention som du använder för konton, behållare, blobbar, tabeller och köer, nära.</span><span class="sxs-lookup"><span data-stu-id="d89aa-306">Examine hello naming convention you use for accounts, containers, blobs, tables and queues, closely.</span></span> <span data-ttu-id="d89aa-307">Du skapar prefix kontonamn med ett 3-siffriga hash-värde med hjälp av en hash-funktionen som bäst passar dina behov.</span><span class="sxs-lookup"><span data-stu-id="d89aa-307">Consider prefixing account names with a 3-digit hash using a hashing function that best suits your needs.</span></span>  
* <span data-ttu-id="d89aa-308">Om du ordna data med tidsstämplar eller numerisk identifierare har du inte använder en append-only (eller endast lägga) trafikmönster tooensure.</span><span class="sxs-lookup"><span data-stu-id="d89aa-308">If you organize your data using timestamps or numerical identifiers, you have tooensure you are not using an append-only (or prepend-only) traffic patterns.</span></span> <span data-ttu-id="d89aa-309">Dessa mönster lämpar sig inte för ett intervall-baserade partitionering system och gick lead tooall hello trafik kommer tooa enskild partition och begränsande hello system från effektivt belastningsutjämning.</span><span class="sxs-lookup"><span data-stu-id="d89aa-309">These patterns are not suitable for a range -based partitioning system, and could lead tooall hello traffic going tooa single partition and limiting hello system from effectively load balancing.</span></span> <span data-ttu-id="d89aa-310">Om du har dagligen dirigeras åtgärder som använder ett blob-objekt med en tidsstämpel, till exempel ÅÅÅÅMMDD sedan alla hello trafik för som dagliga driften är exempelvis tooa objekt som hanteras av en enda partition-servern.</span><span class="sxs-lookup"><span data-stu-id="d89aa-310">For instance, if you have daily operations that use a blob object with a timestamp such as yyyymmdd, then all hello traffic for that daily operation is directed tooa single object which is served by a single partition server.</span></span> <span data-ttu-id="d89aa-311">Titta på om hello per blob gränser och partition begränsar uppfyller dina behov och kan du dela den här åtgärden i flera blobbar om det behövs.</span><span class="sxs-lookup"><span data-stu-id="d89aa-311">Look at whether hello per blob limits and per partition limits meet your needs, and consider breaking this operation into multiple blobs if needed.</span></span> <span data-ttu-id="d89aa-312">På samma sätt om du sparar tid series-data i tabeller all trafik som hello kunde dirigeras toohello sista delen av hello viktiga namnområde.</span><span class="sxs-lookup"><span data-stu-id="d89aa-312">Similarly, if you store time series data in your tables, all hello traffic could be directed toohello last part of hello key namespace.</span></span> <span data-ttu-id="d89aa-313">Om du måste använda tidsstämplar eller numeriska ID, prefix hello-id med 3-siffriga hash eller hello gäller tidsstämplar prefix hello sekunder del av hello tid, till exempel ssyyyymmdd.</span><span class="sxs-lookup"><span data-stu-id="d89aa-313">If you must use timestamps or numerical IDs, prefix hello id with a 3-digit hash, or in hello case of timestamps prefix hello seconds part of hello time such as ssyyyymmdd.</span></span> <span data-ttu-id="d89aa-314">Visa och undersöka åtgärder utförs regelbundet, välja en hash-funktionen som begränsar antalet frågor.</span><span class="sxs-lookup"><span data-stu-id="d89aa-314">If listing and querying operations are routinely performed, choose a hashing function that will limit your number of queries.</span></span> <span data-ttu-id="d89aa-315">I annat fall kan en slumpmässig prefixet vara tillräckligt.</span><span class="sxs-lookup"><span data-stu-id="d89aa-315">In other cases, a random prefix may be sufficient.</span></span>  
* <span data-ttu-id="d89aa-316">Mer information om hello partitioneringsschema som används i Azure Storage läsa hello SOSP paper [här](http://sigops.org/sosp/sosp11/current/2011-Cascais/printable/11-calder.pdf).</span><span class="sxs-lookup"><span data-stu-id="d89aa-316">For additional information on hello partitioning scheme used in Azure Storage, read hello SOSP paper [here](http://sigops.org/sosp/sosp11/current/2011-Cascais/printable/11-calder.pdf).</span></span>

### <a name="networking"></a><span data-ttu-id="d89aa-317">Nätverk</span><span class="sxs-lookup"><span data-stu-id="d89aa-317">Networking</span></span>
<span data-ttu-id="d89aa-318">Hello API-anrop frågan, ha ofta hello fysiskt nätverksbegränsningar av programmet hello en betydande inverkan på prestanda.</span><span class="sxs-lookup"><span data-stu-id="d89aa-318">While hello API calls matter, often hello physical network constraints of hello application have a significant impact on performance.</span></span> <span data-ttu-id="d89aa-319">hello följande beskriver några begränsningar kan användarna få.</span><span class="sxs-lookup"><span data-stu-id="d89aa-319">hello following describe some of limitations users may encounter.</span></span>  

#### <a name="client-network-capability"></a><span data-ttu-id="d89aa-320">Klienten nätverkskapacitet</span><span class="sxs-lookup"><span data-stu-id="d89aa-320">Client Network Capability</span></span>
##### <span data-ttu-id="d89aa-321"><a name="subheading2"></a>Dataflöde</span><span class="sxs-lookup"><span data-stu-id="d89aa-321"><a name="subheading2"></a>Throughput</span></span>
<span data-ttu-id="d89aa-322">Bandbredd är hello problemet ofta hello funktionerna i hello-klienten.</span><span class="sxs-lookup"><span data-stu-id="d89aa-322">For bandwidth, hello problem is often hello capabilities of hello client.</span></span> <span data-ttu-id="d89aa-323">Till exempel när ett enda storage-konto kan hantera 10 Gbit/s eller flera av ingång (se [bandbredd skalbarhetsmål](#sub1bandwidth)), hello nätverkshastigheten i en instans av ”liten” Azure-Arbetsroll kan endast cirka 100 Mbit/s.</span><span class="sxs-lookup"><span data-stu-id="d89aa-323">For example, while a single storage account can handle 10 Gbps or more of ingress (see [bandwidth scalability targets](#sub1bandwidth)), hello network speed in a "Small" Azure Worker Role instance is only capable of approximately 100 Mbps.</span></span> <span data-ttu-id="d89aa-324">Större Azure-instanser har nätverkskort med större kapacitet, så bör du använda en större instans eller flera Virtuella datorer om du behöver högre gränser i nätverket från en enda dator.</span><span class="sxs-lookup"><span data-stu-id="d89aa-324">Larger Azure instances have NICs with greater capacity, so you should consider using a larger instance or more VM's if you need higher network limits from a single machine.</span></span> <span data-ttu-id="d89aa-325">Om du ansluter till en Storage-tjänst från ett på lokala program hello samma regel och använder sedan: Förstå hello nätverksfunktioner för hello klientenheter och hello network connectivity toohello Azure-lagringsplats och antingen förbättra dem efter behov eller utforma din programmet toowork inom deras funktioner.</span><span class="sxs-lookup"><span data-stu-id="d89aa-325">If you are accessing a Storage service from an on premises application, then hello same rule applies: understand hello network capabilities of hello client device and hello network connectivity toohello Azure Storage location and either improve them as needed or design your application toowork within their capabilities.</span></span>  

##### <span data-ttu-id="d89aa-326"><a name="subheading3"></a>Länkkvalitet</span><span class="sxs-lookup"><span data-stu-id="d89aa-326"><a name="subheading3"></a>Link Quality</span></span>
<span data-ttu-id="d89aa-327">Precis som med alla nätverksanvändning Tänk på att nätverksförhållanden ledde till ett fel och paketförlust kommer långsamma effektiva genomflöde.</span><span class="sxs-lookup"><span data-stu-id="d89aa-327">As with any network usage, be aware that network conditions resulting in errors and packet loss will slow effective throughput.</span></span>  <span data-ttu-id="d89aa-328">WireShark eller NetMon hjälp kan lösa problemet.</span><span class="sxs-lookup"><span data-stu-id="d89aa-328">Using WireShark or NetMon may help in diagnosing this issue.</span></span>  

##### <a name="useful-resources"></a><span data-ttu-id="d89aa-329">Användbara resurser</span><span class="sxs-lookup"><span data-stu-id="d89aa-329">Useful Resources</span></span>
<span data-ttu-id="d89aa-330">Mer information om storlekar för virtuella datorer och allokerad bandbredd finns [Windows VM-storlekar](../virtual-machines/windows/sizes.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json) eller [Linux VM-storlekar](../virtual-machines/linux/sizes.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json).</span><span class="sxs-lookup"><span data-stu-id="d89aa-330">For more information about virtual machine sizes and allocated bandwidth, see [Windows VM sizes](../virtual-machines/windows/sizes.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json) or [Linux VM sizes](../virtual-machines/linux/sizes.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json).</span></span>  

#### <span data-ttu-id="d89aa-331"><a name="subheading4"></a>Plats</span><span class="sxs-lookup"><span data-stu-id="d89aa-331"><a name="subheading4"></a>Location</span></span>
<span data-ttu-id="d89aa-332">I en distribuerad miljö ger placera hello klienten nära toohello server i hello bästa prestanda.</span><span class="sxs-lookup"><span data-stu-id="d89aa-332">In any distributed environment, placing hello client near toohello server delivers in hello best performance.</span></span> <span data-ttu-id="d89aa-333">För åtkomst till Azure Storage med hello lägsta svarstid hello bästa platsen för din klient är inom hello samma Azure-region.</span><span class="sxs-lookup"><span data-stu-id="d89aa-333">For accessing Azure Storage with hello lowest latency, hello best location for your client is within hello same Azure region.</span></span> <span data-ttu-id="d89aa-334">Till exempel om du har en Azure-webbplats som använder Azure Storage kan du söka efter dem båda inom en enskild region (till exempel oss Väst eller Asien/Stillahavsområdet, sydost).</span><span class="sxs-lookup"><span data-stu-id="d89aa-334">For example, if you have an Azure Web Site that uses Azure Storage, you should locate them both within a single region (for example, US West or Asia Southeast).</span></span> <span data-ttu-id="d89aa-335">Detta minskar hello latens och hello kostnad – samtidigt hello skrivning bandbreddsanvändning inom en enskild region är ledig.</span><span class="sxs-lookup"><span data-stu-id="d89aa-335">This reduces hello latency and hello cost — at hello time of writing, bandwidth usage within a single region is free.</span></span>  

<span data-ttu-id="d89aa-336">Om klienten program inte finns i Azure (till exempel appar för mobila enheter eller lokala företagstjänster), sedan igen placerar hello storage-konto i en region nära toohello enheter som kommer att använda det, kommer vanligtvis minska svarstiden.</span><span class="sxs-lookup"><span data-stu-id="d89aa-336">If your client applications are not hosted within Azure (such as mobile device apps or on premises enterprise services), then again placing hello storage account in a region near toohello devices that will access it, will generally reduce latency.</span></span> <span data-ttu-id="d89aa-337">Om klienterna distribueras brett (till exempel, en del i Nordamerika och vissa i Europa), så bör du använda flera lagringskonton: placerad i Nordamerika region och en i en europeisk region.</span><span class="sxs-lookup"><span data-stu-id="d89aa-337">If your clients are broadly distributed (for example, some in North America, and some in Europe), then you should consider using multiple storage accounts: one located in a North American region and one in a European region.</span></span> <span data-ttu-id="d89aa-338">Detta hjälper tooreduce svarstid för användare i båda regioner.</span><span class="sxs-lookup"><span data-stu-id="d89aa-338">This will help tooreduce latency for users in both regions.</span></span> <span data-ttu-id="d89aa-339">Den här metoden är oftast enklare tooimplement om hello hello programmet datalager specifika tooindividual användare och kräver inte replikerar data mellan lagringskonton.</span><span class="sxs-lookup"><span data-stu-id="d89aa-339">This approach is usually easier tooimplement if hello data hello application stores is specific tooindividual users, and does not require replicating data between storage accounts.</span></span>  <span data-ttu-id="d89aa-340">En CDN rekommenderas för bred innehållsdistribution – hello nästa avsnitt innehåller mer information.</span><span class="sxs-lookup"><span data-stu-id="d89aa-340">For broad content distribution, a CDN is recommended – see hello next section for more details.</span></span>  

### <span data-ttu-id="d89aa-341"><a name="subheading5"></a>Innehållsdistribution</span><span class="sxs-lookup"><span data-stu-id="d89aa-341"><a name="subheading5"></a>Content Distribution</span></span>
<span data-ttu-id="d89aa-342">Ibland kan ett program måste tooserve hello samma innehåll toomany användare (t.ex. en produkt demonstrera video används i hello hemsidan för en webbplats), finns i antingen hello samma eller i flera områden.</span><span class="sxs-lookup"><span data-stu-id="d89aa-342">Sometimes, an application needs tooserve hello same content toomany users (e.g. a product demo video used in hello home page of a website), located in either hello same or multiple regions.</span></span> <span data-ttu-id="d89aa-343">I det här scenariot bör du använda en innehåll innehållsleveransnätverk (CDN), till exempel Azure CDN och hello CDN använder Azure storage som hello ursprung hello data.</span><span class="sxs-lookup"><span data-stu-id="d89aa-343">In this scenario, you should use a Content Delivery Network (CDN) such as Azure CDN, and hello CDN would use Azure storage as hello origin of hello data.</span></span> <span data-ttu-id="d89aa-344">Till skillnad från ett Azure Storage-konto som finns i en region och som det går inte att leverera innehåll med låg latens tooother regioner använder Azure CDN-servrar i flera Datacenter hello världen.</span><span class="sxs-lookup"><span data-stu-id="d89aa-344">Unlike an Azure Storage account that exists in a single region and that cannot deliver content with low latency tooother regions, Azure CDN uses servers in multiple data centers around hello world.</span></span> <span data-ttu-id="d89aa-345">Dessutom kan en CDN vanligtvis stöder mycket högre utgång gränser än ett enda storage-konto.</span><span class="sxs-lookup"><span data-stu-id="d89aa-345">Additionally, a CDN can typically support much higher egress limits than a single storage account.</span></span>  

<span data-ttu-id="d89aa-346">Mer information om Azure CDN finns [Azure CDN](https://azure.microsoft.com/services/cdn/).</span><span class="sxs-lookup"><span data-stu-id="d89aa-346">For more information about Azure CDN, see [Azure CDN](https://azure.microsoft.com/services/cdn/).</span></span>  

### <span data-ttu-id="d89aa-347"><a name="subheading6"></a>Med hjälp av SAS och CORS</span><span class="sxs-lookup"><span data-stu-id="d89aa-347"><a name="subheading6"></a>Using SAS and CORS</span></span>
<span data-ttu-id="d89aa-348">När du behöver tooauthorize kod exempelvis JavaScript i webbläsare för en användare eller en mobiltelefon tooaccess AppData i Azure Storage, en metod som är toouse ett program i webbroll som en proxyserver: hello användaren autentiseras med hello webbrollen, som i sin tur verifierar med hello storage-tjänst.</span><span class="sxs-lookup"><span data-stu-id="d89aa-348">When you need tooauthorize code such as JavaScript in a user's web browser or a mobile phone app tooaccess data in Azure Storage, one approach is toouse an application in web role as a proxy: hello user's device authenticates with hello web role, which in turn authenticates with hello storage service.</span></span> <span data-ttu-id="d89aa-349">På så sätt kan undvika du att exponera dina lagringskontonycklar på osäker enheter.</span><span class="sxs-lookup"><span data-stu-id="d89aa-349">In this way, you can avoid exposing your storage account keys on insecure devices.</span></span> <span data-ttu-id="d89aa-350">Men placerar detta en stor belastning på hello webbroll eftersom alla hello data överförs mellan hello användarens enhet och hello lagringstjänsten måste passera hello webbroll.</span><span class="sxs-lookup"><span data-stu-id="d89aa-350">However, this places a big overhead on hello web role because all hello data transferred between hello user's device and hello storage service must pass through hello web role.</span></span> <span data-ttu-id="d89aa-351">Du kan undvika att använda en webbroll som en proxy för hello lagring med hjälp av delad åtkomst signaturer (SAS), ibland tillsammans med rubriker om Cross-Origin Resource Sharing (CORS).</span><span class="sxs-lookup"><span data-stu-id="d89aa-351">You can avoid using a web role as a proxy for hello storage service by using Shared Access Signatures (SAS), sometimes in conjunction with Cross-Origin Resource Sharing headers (CORS).</span></span> <span data-ttu-id="d89aa-352">Med SAS kan låta du dina användares enhet toomake begäranden direkt tooa storage-tjänsten med hjälp av en begränsad åtkomst-token.</span><span class="sxs-lookup"><span data-stu-id="d89aa-352">Using SAS, you can allow your user's device toomake requests directly tooa storage service by means of a limited access token.</span></span> <span data-ttu-id="d89aa-353">Till exempel om en användare tooupload ett foto tooyour program, kan web-roll generera och skicka toohello användarens enhet en SAS-token som beviljar behörighet toowrite tooa specifika blob eller behållare för hello nästa 30 minuter (efter vilken hello SAS-token upphör att gälla).</span><span class="sxs-lookup"><span data-stu-id="d89aa-353">For example, if a user wants tooupload a photo tooyour application, your web role can generate and send toohello user's device a SAS token that grants permission toowrite tooa specific blob or container for hello next 30 minutes (after which hello SAS token expires).</span></span>

<span data-ttu-id="d89aa-354">En webbläsare kan normalt inte JavaScript på en sida som en webbplats på en domän tooperform specifika åtgärder som till exempel en ”PLACERA” tooanother domän som värd.</span><span class="sxs-lookup"><span data-stu-id="d89aa-354">Normally, a browser will not allow JavaScript in a page hosted by a website on one domain tooperform specific operations such as a "PUT" tooanother domain.</span></span> <span data-ttu-id="d89aa-355">Till exempel om du har en webbroll på ”contosomarketing.cloudapp.net” och vill toouse klienten sida JavaScript tooupload en blob tooyour storage-konto på ”contosoproducts.blob.core.windows.net” Hej webbläsarens ”samma ursprung policy” kommer förbjuda detta åtgärden.</span><span class="sxs-lookup"><span data-stu-id="d89aa-355">For example, if you host a web role at "contosomarketing.cloudapp.net," and want toouse client side JavaScript tooupload a blob tooyour storage account at "contosoproducts.blob.core.windows.net," hello browser's "same origin policy" will forbid this operation.</span></span> <span data-ttu-id="d89aa-356">CORS är en webbläsarfunktion som tillåter hello domän (i det här fallet hello lagringskontot) toocommunicate toohello webbläsare som begäran har sitt ursprung i hello källdomänen (i det här fallet hello-webbroll).</span><span class="sxs-lookup"><span data-stu-id="d89aa-356">CORS is a browser feature that allows hello target domain (in this case hello storage account) toocommunicate toohello browser that it trusts requests originating in hello source domain (in this case hello web role).</span></span>  

<span data-ttu-id="d89aa-357">Båda dessa tekniker kan hjälpa dig att undvika onödiga belastning (och flaskhalsar) på ditt webbprogram.</span><span class="sxs-lookup"><span data-stu-id="d89aa-357">Both of these technologies can help you avoid unnecessary load (and bottlenecks) on your web application.</span></span>  

#### <a name="useful-resources"></a><span data-ttu-id="d89aa-358">Användbara resurser</span><span class="sxs-lookup"><span data-stu-id="d89aa-358">Useful Resources</span></span>
<span data-ttu-id="d89aa-359">Mer information om SAS finns [signaturer för delad åtkomst, del 1: Förstå hello SAS-modellen](storage-dotnet-shared-access-signature-part-1.md).</span><span class="sxs-lookup"><span data-stu-id="d89aa-359">For more information about SAS, see [Shared Access Signatures, Part 1: Understanding hello SAS Model](storage-dotnet-shared-access-signature-part-1.md).</span></span>  

<span data-ttu-id="d89aa-360">Läs mer om CORS [Cross-Origin Resource Sharing (CORS) stöd för hello Azure Storage-tjänster](http://msdn.microsoft.com/library/azure/dn535601.aspx).</span><span class="sxs-lookup"><span data-stu-id="d89aa-360">For more information about CORS, see [Cross-Origin Resource Sharing (CORS) Support for hello Azure Storage Services](http://msdn.microsoft.com/library/azure/dn535601.aspx).</span></span>  

### <a name="caching"></a><span data-ttu-id="d89aa-361">Cachelagring</span><span class="sxs-lookup"><span data-stu-id="d89aa-361">Caching</span></span>
#### <span data-ttu-id="d89aa-362"><a name="subheading7"></a>Hämtning av Data</span><span class="sxs-lookup"><span data-stu-id="d89aa-362"><a name="subheading7"></a>Getting Data</span></span>
<span data-ttu-id="d89aa-363">I allmänhet är hämtar data från en tjänst när bättre än tas den två gånger.</span><span class="sxs-lookup"><span data-stu-id="d89aa-363">In general, getting data from a service once is better than getting it twice.</span></span> <span data-ttu-id="d89aa-364">Överväg att hello exempel på en MVC-webbapp körs i en webbroll som redan har hämtats 50MB blob från hello storage service tooserve som innehåll tooa användare.</span><span class="sxs-lookup"><span data-stu-id="d89aa-364">Consider hello example of an MVC web application running in a web role that has already retrieved a 50MB blob from hello storage service tooserve as content tooa user.</span></span> <span data-ttu-id="d89aa-365">hello programmet kan sedan hämta samma blobben varje gång en användare begär den eller det kan cachelagra den lokalt toodisk och återanvändning cachelagrade hello-version för efterföljande användarförfrågningar.</span><span class="sxs-lookup"><span data-stu-id="d89aa-365">hello application could then retrieve that same blob every time a user requests it, or it could cache it locally toodisk and reuse hello cached version for subsequent user requests.</span></span> <span data-ttu-id="d89aa-366">Dessutom, när en användare begär hello data, hello program kan problemet får med ett villkorat huvud för ändringstid som skulle undvika hello hela blob om den inte har ändrats.</span><span class="sxs-lookup"><span data-stu-id="d89aa-366">Furthermore, whenever a user requests hello data, hello application could issue GET with a conditional header for modification time, which would avoid getting hello entire blob if it hasn't been modified.</span></span> <span data-ttu-id="d89aa-367">Du kan använda den här samma mönster tooworking med tabellentiteter.</span><span class="sxs-lookup"><span data-stu-id="d89aa-367">You can apply this same pattern tooworking with table entities.</span></span>  

<span data-ttu-id="d89aa-368">I vissa fall kan du välja att programmet kan anta att hello blob förblir giltig under en kort period efter hämtning av den och att under denna period hello program inte behöver toocheck om hello-blob har ändrats.</span><span class="sxs-lookup"><span data-stu-id="d89aa-368">In some cases, you may decide that your application can assume that hello blob remains valid for a short period after retrieving it, and that during this period hello application does not need toocheck if hello blob was modified.</span></span>

<span data-ttu-id="d89aa-369">Konfiguration, sökning och andra data som används alltid av programmet hello är bra kandidater för cachelagring.</span><span class="sxs-lookup"><span data-stu-id="d89aa-369">Configuration, lookup, and other data that are always used by hello application are great candidates for caching.</span></span>  

<span data-ttu-id="d89aa-370">Ett exempel på hur tooget en blob egenskaper toodiscover hello senast ändrad datum med .NET, finns i [Set och hämta egenskaper och Metadata](storage-properties-metadata.md).</span><span class="sxs-lookup"><span data-stu-id="d89aa-370">For an example of how tooget a blob's properties toodiscover hello last modified date using .NET, see [Set and Retrieve Properties and Metadata](storage-properties-metadata.md).</span></span> <span data-ttu-id="d89aa-371">Mer information om nedladdningar av villkorlig finns [villkorligt uppdatera en lokal kopia av en Blob](http://msdn.microsoft.com/library/azure/dd179371.aspx).</span><span class="sxs-lookup"><span data-stu-id="d89aa-371">For more information about conditional downloads, see [Conditionally Refresh a Local Copy of a Blob](http://msdn.microsoft.com/library/azure/dd179371.aspx).</span></span>  

#### <span data-ttu-id="d89aa-372"><a name="subheading8"></a>Ladda upp Data i batchar</span><span class="sxs-lookup"><span data-stu-id="d89aa-372"><a name="subheading8"></a>Uploading Data in Batches</span></span>
<span data-ttu-id="d89aa-373">I vissa program, kan aggregera data lokalt och sedan regelbundet ladda upp den i en grupp i stället för att överföra varje datadel omedelbart.</span><span class="sxs-lookup"><span data-stu-id="d89aa-373">In some application scenarios, you can aggregate data locally, and then periodically upload it in a batch instead of uploading each piece of data immediately.</span></span> <span data-ttu-id="d89aa-374">Till exempel ett webbprogram ha en loggfil över aktiviteter: hello program kan antingen ladda upp information om varje aktivitet som det sker som en tabell-enhet (som kräver många lagringsåtgärder) eller den kan spara aktiviteten information tooa lokala loggfil, och sedan ladda upp alla aktivitetsinformation regelbundet som en fil tooa blob.</span><span class="sxs-lookup"><span data-stu-id="d89aa-374">For example, a web application might keep a log file of activities: hello application could either upload details of every activity as it happens as a table entity (which requires many storage operations), or it could save activity details tooa local log file, and then periodically upload all activity details as a delimited file tooa blob.</span></span> <span data-ttu-id="d89aa-375">Om varje loggpost är 1KB i storlek, kan du överföra tusentalsavgränsare i en enda transaktion för ”placera Blob” (du kan överföra en blob för in too64MB i storlek i en enda transaktion).</span><span class="sxs-lookup"><span data-stu-id="d89aa-375">If each log entry is 1KB in size, you can upload thousands in a single "Put Blob" transaction (you can upload a blob of up too64MB in size in a single transaction).</span></span> <span data-ttu-id="d89aa-376">Naturligtvis om hello lokal dator kraschar tidigare toohello överför potentiellt förlorar du vissa loggdata: hello programutvecklaren måste utforma hello möjlighet till klientenheten eller Överför fel.</span><span class="sxs-lookup"><span data-stu-id="d89aa-376">Of course, if hello local machine crashes prior toohello upload, you will potentially lose some log data: hello application developer must design for hello possibility of client device or upload failures.</span></span>  <span data-ttu-id="d89aa-377">Om hello aktivitetsdata måste toobe hämtas för timespans (inte bara enkel aktivitet), bör blobbar över tabeller.</span><span class="sxs-lookup"><span data-stu-id="d89aa-377">If hello activity data needs toobe downloaded for timespans (not just single activity), then blobs are recommended over tables.</span></span>

### <a name="net-configuration"></a><span data-ttu-id="d89aa-378">.NET-konfiguration</span><span class="sxs-lookup"><span data-stu-id="d89aa-378">.NET Configuration</span></span>
<span data-ttu-id="d89aa-379">Om du använder hello .NET Framework, innehåller det här avsnittet flera konfigurationsinställningar som du kan använda toomake betydande prestandaförbättringar för snabbt.</span><span class="sxs-lookup"><span data-stu-id="d89aa-379">If using hello .NET Framework, this section lists several quick configuration settings that you can use toomake significant performance improvements.</span></span>  <span data-ttu-id="d89aa-380">Om du använder andra språk, kontrollera toosee om liknande koncept som gäller i ditt valda språk.</span><span class="sxs-lookup"><span data-stu-id="d89aa-380">If using other languages, check toosee if similar concepts apply in your chosen language.</span></span>  

#### <span data-ttu-id="d89aa-381"><a name="subheading9"></a>Öka Standardgränsen för anslutning</span><span class="sxs-lookup"><span data-stu-id="d89aa-381"><a name="subheading9"></a>Increase default connection limit</span></span>
<span data-ttu-id="d89aa-382">I .NET, ökar hello följande kod hello anslutning Standardgränsen (vilket är normalt 2 i en klientmiljö med eller 10 i en servermiljö) too100.</span><span class="sxs-lookup"><span data-stu-id="d89aa-382">In .NET, hello following code increases hello default connection limit (which is usually 2 in a client environment or 10 in a server environment) too100.</span></span> <span data-ttu-id="d89aa-383">Normalt bör du ange hello värdet tooapproximately hello antalet trådar som används av ditt program.</span><span class="sxs-lookup"><span data-stu-id="d89aa-383">Typically, you should set hello value tooapproximately hello number of threads used by your application.</span></span>  

```csharp
ServicePointManager.DefaultConnectionLimit = 100; //(Or More)  
```

<span data-ttu-id="d89aa-384">Du måste ange hello anslutningsgränsen innan du öppnar alla anslutningar.</span><span class="sxs-lookup"><span data-stu-id="d89aa-384">You must set hello connection limit before opening any connections.</span></span>  

<span data-ttu-id="d89aa-385">Andra programmeringsspråk, finns det språket dokumentationen toodetermine hur tooset hello anslutning begränsa.</span><span class="sxs-lookup"><span data-stu-id="d89aa-385">For other programming languages, see that language's documentation toodetermine how tooset hello connection limit.</span></span>  

<span data-ttu-id="d89aa-386">Mer information finns i blogginlägget hello [Web Services: samtidiga anslutningar](http://blogs.msdn.com/b/darrenj/archive/2005/03/07/386655.aspx).</span><span class="sxs-lookup"><span data-stu-id="d89aa-386">For additional information, see hello blog post [Web Services: Concurrent Connections](http://blogs.msdn.com/b/darrenj/archive/2005/03/07/386655.aspx).</span></span>  

#### <span data-ttu-id="d89aa-387"><a name="subheading10"></a>Öka ThreadPool Min Threads om synkron kod med asynkrona uppgifter</span><span class="sxs-lookup"><span data-stu-id="d89aa-387"><a name="subheading10"></a>Increase ThreadPool Min Threads if using synchronous code with Async Tasks</span></span>
<span data-ttu-id="d89aa-388">Den här koden kommer att öka hello tråd pool min trådar:</span><span class="sxs-lookup"><span data-stu-id="d89aa-388">This code will increase hello thread pool min threads:</span></span>  

```csharp
ThreadPool.SetMinThreads(100,100); //(Determine hello right number for your application)  
```

<span data-ttu-id="d89aa-389">Mer information finns i [ThreadPool.SetMinThreads metoden](http://msdn.microsoft.com/library/system.threading.threadpool.setminthreads%28v=vs.110%29.aspx).</span><span class="sxs-lookup"><span data-stu-id="d89aa-389">For more information, see [ThreadPool.SetMinThreads Method](http://msdn.microsoft.com/library/system.threading.threadpool.setminthreads%28v=vs.110%29.aspx).</span></span>  

#### <span data-ttu-id="d89aa-390"><a name="subheading11"></a>Dra nytta av .NET 4.5 skräpinsamling</span><span class="sxs-lookup"><span data-stu-id="d89aa-390"><a name="subheading11"></a>Take advantage of .NET 4.5 Garbage Collection</span></span>
<span data-ttu-id="d89aa-391">Använd .NET 4.5 eller senare för hello klienten program tootake nytta av bättre prestanda i server skräpinsamling.</span><span class="sxs-lookup"><span data-stu-id="d89aa-391">Use .NET 4.5 or later for hello client application tootake advantage of performance improvements in server garbage collection.</span></span>

<span data-ttu-id="d89aa-392">Mer information finns i artikeln hello [en översikt av prestandaförbättringarna i .NET 4.5](http://msdn.microsoft.com/magazine/hh882452.aspx).</span><span class="sxs-lookup"><span data-stu-id="d89aa-392">For more information, see hello article [An Overview of Performance Improvements in .NET 4.5](http://msdn.microsoft.com/magazine/hh882452.aspx).</span></span>  

### <span data-ttu-id="d89aa-393"><a name="subheading12"></a>Unbounded parallellitet</span><span class="sxs-lookup"><span data-stu-id="d89aa-393"><a name="subheading12"></a>Unbounded Parallelism</span></span>
<span data-ttu-id="d89aa-394">Parallellitet kan vara bra prestanda, vara försiktig med att använda flera partitioner unbounded parallellitet (ingen gräns för hello antalet trådar och/eller parallella begäranden) tooupload eller hämta data med flera personer tooaccess (behållare, köer, eller tabell partitioner) i hello samma lagringskonto eller tooaccess flera objekt i hello samma partition.</span><span class="sxs-lookup"><span data-stu-id="d89aa-394">While parallelism can be great for performance, be careful about using unbounded parallelism (no limit on hello number of threads and/or parallel requests) tooupload or download data, using multiple workers tooaccess multiple partitions (containers, queues, or table partitions) in hello same storage account or tooaccess multiple items in hello same partition.</span></span> <span data-ttu-id="d89aa-395">Om hello parallellitet unbounded programmet överskrider hello klienten enhetens kapacitet eller hello storage-konto skalbarhetsmål ledde till ett längre svarstider och begränsning.</span><span class="sxs-lookup"><span data-stu-id="d89aa-395">If hello parallelism is unbounded, your application can exceed hello client device's capabilities or hello storage account's scalability targets resulting in longer latencies and throttling.</span></span>  

### <span data-ttu-id="d89aa-396"><a name="subheading13"></a>Verktyg och Storage-klientbibliotek</span><span class="sxs-lookup"><span data-stu-id="d89aa-396"><a name="subheading13"></a>Storage Client Libraries and Tools</span></span>
<span data-ttu-id="d89aa-397">Använd alltid hello-klientbibliotek för senaste Microsoft tillhandahåller och verktyg.</span><span class="sxs-lookup"><span data-stu-id="d89aa-397">Always use hello latest Microsoft provided client libraries and tools.</span></span> <span data-ttu-id="d89aa-398">Vid hello tidpunkt som skrivs finns klientbibliotek för .NET, Windows Phone, Windows Runtime, Java och C++ samt preview bibliotek för andra språk.</span><span class="sxs-lookup"><span data-stu-id="d89aa-398">At hello time of writing, there are client libraries available for .NET, Windows Phone, Windows Runtime, Java, and C++, as well as preview libraries for other languages.</span></span> <span data-ttu-id="d89aa-399">Dessutom har Microsoft släppt PowerShell-cmdlets och Azure CLI-kommandona för att arbeta med Azure Storage.</span><span class="sxs-lookup"><span data-stu-id="d89aa-399">In addition, Microsoft has released PowerShell cmdlets and Azure CLI commands for working with Azure Storage.</span></span> <span data-ttu-id="d89aa-400">Microsoft aktivt utvecklar dessa verktyg med prestanda, för att hålla dem in toodate med hello senaste service-versioner och garanterar de hanterar många hello internt beprövade metoder för prestanda.</span><span class="sxs-lookup"><span data-stu-id="d89aa-400">Microsoft actively develops these tools with performance in mind, keeps them up toodate with hello latest service versions, and ensures they handle many of hello proven performance practices internally.</span></span>  

### <a name="retries"></a><span data-ttu-id="d89aa-401">Antal försök</span><span class="sxs-lookup"><span data-stu-id="d89aa-401">Retries</span></span>
#### <span data-ttu-id="d89aa-402"><a name="subheading14"></a>Begränsning/ServerBusy</span><span class="sxs-lookup"><span data-stu-id="d89aa-402"><a name="subheading14"></a>Throttling/ServerBusy</span></span>
<span data-ttu-id="d89aa-403">I vissa fall kan hello lagringstjänsten begränsa tillämpningsprogrammet eller kan bara tooserve hello begäran på grund av toosome övergående tillstånd och returnerar meddelandet ”503 servern upptagen” eller ”tidsgräns för 500”.</span><span class="sxs-lookup"><span data-stu-id="d89aa-403">In some cases, hello storage service may throttle your application or may simply be unable tooserve hello request due toosome transient condition and return a "503 Server busy" message or "500 Timeout".</span></span>  <span data-ttu-id="d89aa-404">Detta kan inträffa om tillämpningsprogrammet närmar sig något hello skalbarhetsmål, eller om hello system ombalansering din partitionerade data tooallow för högre genomströmning.</span><span class="sxs-lookup"><span data-stu-id="d89aa-404">This can happen if your application is approaching any of hello scalability targets, or if hello system is rebalancing your partitioned data tooallow for higher throughput.</span></span>  <span data-ttu-id="d89aa-405">hello klientprogrammet bör normalt gör hello-åtgärden som orsakar ett sådant fel: försöker hello samma begäran senare kan genomföras.</span><span class="sxs-lookup"><span data-stu-id="d89aa-405">hello client application should typically retry hello operation that causes such an error: attempting hello same request later can succeed.</span></span> <span data-ttu-id="d89aa-406">Men göra om hello lagringstjänsten begränsning är ditt program eftersom det överskrider skalbarhetsmål eller om hello-tjänsten kunde tooserve hello begäran av någon anledning, aggressivt återförsök oftast hello problemet worse.</span><span class="sxs-lookup"><span data-stu-id="d89aa-406">However, if hello storage service is throttling your application because it is exceeding scalability targets, or even if hello service was unable tooserve hello request for some other reason, aggressive retries usually make hello problem worse.</span></span> <span data-ttu-id="d89aa-407">Därför bör du använda en exponentiell undantagsläge (hello klienten bibliotek toothis standardbeteendet).</span><span class="sxs-lookup"><span data-stu-id="d89aa-407">For this reason, you should use an exponential back off (hello client libraries default toothis behavior).</span></span> <span data-ttu-id="d89aa-408">Programmet kan t.ex, försök igen efter 2 sekunder sedan 4 sekunder sedan 10 sekunder sedan 30 sekunder och ge helt.</span><span class="sxs-lookup"><span data-stu-id="d89aa-408">For example, your application may retry after 2 seconds, then 4 seconds, then 10 seconds, then 30 seconds, and then give up completely.</span></span> <span data-ttu-id="d89aa-409">Detta resulterar i ditt program avsevärt minska belastningen på hello-tjänsten i stället exacerbating eventuella problem.</span><span class="sxs-lookup"><span data-stu-id="d89aa-409">This behavior results in your application significantly reducing its load on hello service rather than exacerbating any problems.</span></span>  

<span data-ttu-id="d89aa-410">Observera att anslutningsfel kan göras omedelbart, eftersom de inte hello resultatet av begränsning och förväntade toobe tillfälligt.</span><span class="sxs-lookup"><span data-stu-id="d89aa-410">Note that connectivity errors can be retried immediately, because they are not hello result of throttling and are expected toobe transient.</span></span>  

#### <span data-ttu-id="d89aa-411"><a name="subheading15"></a>Icke-Återförsökbart fel</span><span class="sxs-lookup"><span data-stu-id="d89aa-411"><a name="subheading15"></a>Non-Retryable Errors</span></span>
<span data-ttu-id="d89aa-412">hello klientbibliotek är medveten om vilka fel kan retry och som inte är.</span><span class="sxs-lookup"><span data-stu-id="d89aa-412">hello client libraries are aware of which errors are retry-able and which are not.</span></span> <span data-ttu-id="d89aa-413">Tänk dock på om du skriver egen kod mot hello storage REST-API, det finns några fel som du inte bör försöka: till exempel 400 (felaktig begäran) svaret anger att hello klientprogrammet har skickat en begäran inte kunde bearbetas eftersom den har inte en förväntad form.</span><span class="sxs-lookup"><span data-stu-id="d89aa-413">However, if you are writing your own code against hello storage REST API, remember there are some errors that you should not retry: for example, a 400 (Bad Request) response indicates that hello client application sent a request that could not be processed because it was not in an expected form.</span></span> <span data-ttu-id="d89aa-414">Skicka om begäran resulterar hello samma svar varje gång, så det finns ingen anledning du försöker den.</span><span class="sxs-lookup"><span data-stu-id="d89aa-414">Resending this request will result hello same response every time, so there is no point in retrying it.</span></span> <span data-ttu-id="d89aa-415">Om du skriver egen kod mot hello storage REST API vara medveten om vilka hello felkoder medelvärde och hello tooretry på rätt sätt (eller inte) för var och en av dem.</span><span class="sxs-lookup"><span data-stu-id="d89aa-415">If you are writing your own code against hello storage REST API, be aware of what hello error codes mean and hello proper way tooretry (or not) for each of them.</span></span>  

#### <a name="useful-resources"></a><span data-ttu-id="d89aa-416">Användbara resurser</span><span class="sxs-lookup"><span data-stu-id="d89aa-416">Useful Resources</span></span>
<span data-ttu-id="d89aa-417">Mer information om lagring felkoder finns [Status och felkoder](http://msdn.microsoft.com/library/azure/dd179382.aspx) på hello Microsoft Azure-webbplatsen.</span><span class="sxs-lookup"><span data-stu-id="d89aa-417">For more information about storage error codes, see [Status and Error Codes](http://msdn.microsoft.com/library/azure/dd179382.aspx) on hello Microsoft Azure web site.</span></span>  

## <a name="blobs"></a><span data-ttu-id="d89aa-418">Blobar</span><span class="sxs-lookup"><span data-stu-id="d89aa-418">Blobs</span></span>
<span data-ttu-id="d89aa-419">I tillägg toohello beprövade metoder för [alla tjänster](#allservices) som beskrivs ovan, hello beprövade metoder när det gäller specifikt toohello blob-tjänsten.</span><span class="sxs-lookup"><span data-stu-id="d89aa-419">In addition toohello proven practices for [All Services](#allservices) described previously, hello following proven practices apply specifically toohello blob service.</span></span>  

### <a name="blob-specific-scalability-targets"></a><span data-ttu-id="d89aa-420">BLOB-specifika skalbarhetsmål</span><span class="sxs-lookup"><span data-stu-id="d89aa-420">Blob-Specific Scalability Targets</span></span>
#### <span data-ttu-id="d89aa-421"><a name="subheading46"></a>Flera klienter som ansluter till ett enda objekt samtidigt</span><span class="sxs-lookup"><span data-stu-id="d89aa-421"><a name="subheading46"></a>Multiple clients accessing a single object concurrently</span></span>
<span data-ttu-id="d89aa-422">Om du har ett stort antal klienter som ansluter till ett enda objekt samtidigt behöver tooconsider per objekt och lagring skalbarhetsmål för lagringskontot.</span><span class="sxs-lookup"><span data-stu-id="d89aa-422">If you have a large number of clients accessing a single object concurrently you will need tooconsider per object and storage account scalability targets.</span></span> <span data-ttu-id="d89aa-423">hello exakta antalet klienter som kan komma åt ett objekt ska variera beroende på faktorer som hello antalet klienter som begär hello objekt samtidigt, hello storleken för hello-objektet, nätverk villkor osv.</span><span class="sxs-lookup"><span data-stu-id="d89aa-423">hello exact number of clients that can access a single object will vary depending on factors such as hello number of clients requesting hello object simultaneously, hello size of hello object, network conditions etc.</span></span>

<span data-ttu-id="d89aa-424">Om hello-objekt kan distribueras via en CDN, till exempel bilder eller videofiler hanteras från en webbplats och du bör använda en CDN.</span><span class="sxs-lookup"><span data-stu-id="d89aa-424">If hello object can be distributed through a CDN such as images or videos served from a website then you should use a CDN.</span></span> <span data-ttu-id="d89aa-425">Se [här](#subheading5).</span><span class="sxs-lookup"><span data-stu-id="d89aa-425">See [here](#subheading5).</span></span>

<span data-ttu-id="d89aa-426">I andra scenarier, till exempel vetenskapliga simulering där hello data är konfidentiellt har du två alternativ.</span><span class="sxs-lookup"><span data-stu-id="d89aa-426">In other scenarios such as scientific simulations where hello data is confidential you have two options.</span></span> <span data-ttu-id="d89aa-427">hello är först toostagger din arbetsbelastning åtkomst sådana som hello objektet används under en period om jämfört används samtidigt.</span><span class="sxs-lookup"><span data-stu-id="d89aa-427">hello first is toostagger your workload's access such that hello object is accessed over a period of time vs being accessed simultaneously.</span></span> <span data-ttu-id="d89aa-428">Alternativt kan du tillfälligt kopiera hello objektet toomultiple storage-konton vilket ökar hello totala IOPS per objekt och över storage-konton.</span><span class="sxs-lookup"><span data-stu-id="d89aa-428">Alternatively, you can temporarily copy hello object toomultiple storage accounts thus increasing hello total IOPS per object and across storage accounts.</span></span> <span data-ttu-id="d89aa-429">Begränsad testning påträffades att cirka 25 virtuella datorer kan hämta en 100GB blob parallellt (varje virtuell dator parallelizing hello download med 32 trådar) samtidigt.</span><span class="sxs-lookup"><span data-stu-id="d89aa-429">In limited testing we found that around 25 VMs could simultaneously download a 100GB blob in parallel (each VM was parallelizing hello download using 32 threads).</span></span> <span data-ttu-id="d89aa-430">Om du har 100 klienter behöver tooaccess hello objekt först kopiera den tooa andra storage-konto har hello första 50 virtuella datorer åtkomst hello första blob och hello 50 andra virtuella datorer åtkomst hello andra blob.</span><span class="sxs-lookup"><span data-stu-id="d89aa-430">If you had 100 clients needing tooaccess hello object, first copy it tooa second storage account and then have hello first 50 VMs access hello first blob and hello second 50 VMs access hello second blob.</span></span> <span data-ttu-id="d89aa-431">Resultatet varierar beroende på din program-beteende så bör du testa under design.</span><span class="sxs-lookup"><span data-stu-id="d89aa-431">Results will vary depending on your applications behavior so you should test this during design.</span></span> 

#### <span data-ttu-id="d89aa-432"><a name="subheading16"></a>Bandbredd och -åtgärder per Blob</span><span class="sxs-lookup"><span data-stu-id="d89aa-432"><a name="subheading16"></a>Bandwidth and operations per Blob</span></span>
<span data-ttu-id="d89aa-433">Du kan läsa eller skriva tooa enda blob in tooa högst 60 MB per sekund (detta är ungefär 480 Mbit/s som överskrider hello funktioner för flera nätverk för klient-sida (inklusive hello fysiska nätverkskortet på hello klientenhet).</span><span class="sxs-lookup"><span data-stu-id="d89aa-433">You can read or write tooa single blob at up tooa maximum of 60 MB/second (this is approximately 480 Mbps which exceeds hello capabilities of many client side networks (including hello physical NIC on hello client device).</span></span> <span data-ttu-id="d89aa-434">Dessutom stöder en enda blob upp too500 begäranden per sekund.</span><span class="sxs-lookup"><span data-stu-id="d89aa-434">In addition, a single blob supports up too500 requests per second.</span></span> <span data-ttu-id="d89aa-435">Om du har flera klienter som behöver tooread hello samma blob och kanske överskrider gränserna, bör du använda en CDN för att distribuera hello-blob.</span><span class="sxs-lookup"><span data-stu-id="d89aa-435">If you have multiple clients that need tooread hello same blob and you might exceed these limits, you should consider using a CDN for distributing hello blob.</span></span>  

<span data-ttu-id="d89aa-436">Mer information om mål-genomströmning för BLOB finns [Azure Storage skalbarhets- och prestandamål](storage-scalability-targets.md).</span><span class="sxs-lookup"><span data-stu-id="d89aa-436">For more information about target throughput for blobs, see [Azure Storage Scalability and Performance Targets](storage-scalability-targets.md).</span></span>  

### <a name="copying-and-moving-blobs"></a><span data-ttu-id="d89aa-437">Kopiera och flytta Blobbar</span><span class="sxs-lookup"><span data-stu-id="d89aa-437">Copying and Moving Blobs</span></span>
#### <span data-ttu-id="d89aa-438"><a name="subheading17"></a>Kopiera Blob</span><span class="sxs-lookup"><span data-stu-id="d89aa-438"><a name="subheading17"></a>Copy Blob</span></span>
<span data-ttu-id="d89aa-439">hello storage REST API version 2012-02-12 introduceras hello användbar möjlighet toocopy blobbar över konton: ett klientprogram kan instruera hello storage service toocopy en blob från en annan källa (eventuellt i ett annat lagringskonto) och därefter låta hello tjänsten kopiera hello asynkront.</span><span class="sxs-lookup"><span data-stu-id="d89aa-439">hello storage REST API version 2012-02-12 introduced hello useful ability toocopy blobs across accounts: a client application can instruct hello storage service toocopy a blob from another source (possibly in a different storage account), and then let hello service perform hello copy asynchronously.</span></span> <span data-ttu-id="d89aa-440">Detta kan avsevärt minska hello bandbredd som krävs för programmet hello när du migrerar data från andra lagringskonton eftersom du inte behöver toodownload och ladda upp hello data.</span><span class="sxs-lookup"><span data-stu-id="d89aa-440">This can significantly reduce hello bandwidth needed for hello application when you are migrating data from other storage accounts because you do not need toodownload and upload hello data.</span></span>  

<span data-ttu-id="d89aa-441">En fråga, men är att, när du kopierar mellan lagringskonton finns det ingen garanti för tid för när hello kopiera slutförs.</span><span class="sxs-lookup"><span data-stu-id="d89aa-441">One consideration, however, is that, when copying between storage accounts, there is no time guarantee on when hello copy will complete.</span></span> <span data-ttu-id="d89aa-442">Om ditt program måste toocomplete en blob kopiera snabbt under din kontroll, kanske bättre toocopy hello blob genom att hämta den tooa VM och överföra den toohello mål.</span><span class="sxs-lookup"><span data-stu-id="d89aa-442">If your application needs toocomplete a blob copy quickly under your control, it may be better toocopy hello blob by downloading it tooa VM and then uploading it toohello destination.</span></span>  <span data-ttu-id="d89aa-443">Se till att utförs hello kopia för fullständig förutsägbarhet i så fall av en virtuell dator som körs i hello samma Azure-region, annars nätverksförhållanden kan (och troligtvis kommer) påverkar din kopia prestanda.</span><span class="sxs-lookup"><span data-stu-id="d89aa-443">For full predictability in that situation, ensure that hello copy is performed by a VM running in hello same Azure region, or else network conditions may (and probably will) affect your copy performance.</span></span>  <span data-ttu-id="d89aa-444">Dessutom kan du övervaka hello förloppet för en asynkron kopia programmässigt.</span><span class="sxs-lookup"><span data-stu-id="d89aa-444">In addition, you can monitor hello progress of an asynchronous copy programmatically.</span></span>  

<span data-ttu-id="d89aa-445">Observera att kopierar inom samma lagringskonto själva vanligtvis avslutad snabbt hello.</span><span class="sxs-lookup"><span data-stu-id="d89aa-445">Note that copies within hello same storage account itself are generally completed quickly.</span></span>  

<span data-ttu-id="d89aa-446">Mer information finns i [kopiera Blob](http://msdn.microsoft.com/library/azure/dd894037.aspx).</span><span class="sxs-lookup"><span data-stu-id="d89aa-446">For more information, see [Copy Blob](http://msdn.microsoft.com/library/azure/dd894037.aspx).</span></span>  

#### <span data-ttu-id="d89aa-447"><a name="subheading18"></a>Använda AzCopy</span><span class="sxs-lookup"><span data-stu-id="d89aa-447"><a name="subheading18"></a>Use AzCopy</span></span>
<span data-ttu-id="d89aa-448">hello Azure Storage har släppts kommandoradsverktyget ”AzCopy” som är avsedda toohelp med bulk överför många BLOB till, från och mellan lagringskonton.</span><span class="sxs-lookup"><span data-stu-id="d89aa-448">hello Azure Storage team has released a command-line tool "AzCopy" that is meant toohelp with bulk transferring many blobs to, from, and across storage accounts.</span></span>  <span data-ttu-id="d89aa-449">Det här verktyget är optimerad för det här scenariot och uppnå hög överföringshastighet.</span><span class="sxs-lookup"><span data-stu-id="d89aa-449">This tool is optimized for this scenario, and can achieve high transfer rates.</span></span>  <span data-ttu-id="d89aa-450">Används rekommenderas för bulk-överföringen, hämtning och kopiera scenarier.</span><span class="sxs-lookup"><span data-stu-id="d89aa-450">Its use is encouraged for bulk upload, download, and copy scenarios.</span></span> <span data-ttu-id="d89aa-451">Mer om den toolearn och ladda ned det, se [överföra data med kommandoradsverktyget Azcopy hello](storage-use-azcopy.md).</span><span class="sxs-lookup"><span data-stu-id="d89aa-451">toolearn more about it and download it, see [Transfer data with hello AzCopy Command-Line Utility](storage-use-azcopy.md).</span></span>  

#### <span data-ttu-id="d89aa-452"><a name="subheading19"></a>Tjänsten Azure Import/Export</span><span class="sxs-lookup"><span data-stu-id="d89aa-452"><a name="subheading19"></a>Azure Import/Export Service</span></span>
<span data-ttu-id="d89aa-453">Hello Azure Storage erbjuder mycket stora volymer av data (mer än 1TB) hello Import/Export service som gör det möjligt att överföra och ladda ned från blob storage med leverans hårddiskar.</span><span class="sxs-lookup"><span data-stu-id="d89aa-453">For very large volumes of data (more than 1TB), hello Azure Storage offers hello Import/Export service, which allows for uploading and downloading from blob storage by shipping hard drives.</span></span>  <span data-ttu-id="d89aa-454">Du kan publicera dina data på en hårddisk och skickar den tooMicrosoft för överföring eller skicka en tom hårddisk tooMicrosoft toodownload data.</span><span class="sxs-lookup"><span data-stu-id="d89aa-454">You can put your data on a hard drive and send it tooMicrosoft for upload, or send a blank hard drive tooMicrosoft toodownload data.</span></span>  <span data-ttu-id="d89aa-455">Mer information finns i [använda hello Microsoft Azure Import/Export Service tooTransfer Data tooBlob lagring](storage-import-export-service.md).</span><span class="sxs-lookup"><span data-stu-id="d89aa-455">For more information, see [Use hello Microsoft Azure Import/Export Service tooTransfer Data tooBlob Storage](storage-import-export-service.md).</span></span>  <span data-ttu-id="d89aa-456">Det kan vara mycket effektivare än att överföra/hämta volymen av data över hello nätverk.</span><span class="sxs-lookup"><span data-stu-id="d89aa-456">This can be much more efficient than uploading/downloading this volume of data over hello network.</span></span>  

### <span data-ttu-id="d89aa-457"><a name="subheading20"></a>Använda metadata</span><span class="sxs-lookup"><span data-stu-id="d89aa-457"><a name="subheading20"></a>Use metadata</span></span>
<span data-ttu-id="d89aa-458">hello blob-tjänsten stöder head-begäranden som kan innehålla metadata om hello-blob.</span><span class="sxs-lookup"><span data-stu-id="d89aa-458">hello blob service supports head requests, which can include metadata about hello blob.</span></span> <span data-ttu-id="d89aa-459">Om ditt program behövs hello EXIF data från ett foto, kan den hämta hello foto och extrahera det.</span><span class="sxs-lookup"><span data-stu-id="d89aa-459">For example, if your application needed hello EXIF data out of a photo, it could retrieve hello photo and extract it.</span></span> <span data-ttu-id="d89aa-460">toosave bandbredd och förbättra prestanda, programmet kan lagra hello EXIF data i hello blob metadata när programmet hello upp hello foto: du kan sedan hämta hello EXIF data i metadata med hjälp av endast en HEAD-begäran, spara betydande bandbredd och hello bearbetningstid behövs tooextract hello EXIF-data varje gång hello är läsåtgärder.</span><span class="sxs-lookup"><span data-stu-id="d89aa-460">toosave bandwidth and improve performance, your application could store hello EXIF data in hello blob's metadata when hello application uploaded hello photo: you can then retrieve hello EXIF data in metadata using only a HEAD request, saving significant bandwidth and hello processing time needed tooextract hello EXIF data each time hello blob is read.</span></span> <span data-ttu-id="d89aa-461">Detta kan vara användbart i scenarier där du behöver bara hello metadata och inte hello fullständiga innehållet på en blob.</span><span class="sxs-lookup"><span data-stu-id="d89aa-461">This would be useful in scenarios where you only need hello metadata, and not hello full content of a blob.</span></span>  <span data-ttu-id="d89aa-462">Observera att endast 8 KB metadata kan lagras per blob (hello tjänsten inte accepterar en begäran toostore större än), så om hello data inte ryms i storleken inte får vara toouse kan den här metoden.</span><span class="sxs-lookup"><span data-stu-id="d89aa-462">Note that only 8 KB of metadata can be stored per blob (hello service will not accept a request toostore more than that), so if hello data does not fit in that size, you may not be able toouse this approach.</span></span>  

<span data-ttu-id="d89aa-463">Ett exempel på hur tooget en blob-metadata med hjälp av .NET, se [Set och hämta egenskaper och Metadata](storage-properties-metadata.md).</span><span class="sxs-lookup"><span data-stu-id="d89aa-463">For an example of how tooget a blob's metadata using .NET, see [Set and Retrieve Properties and Metadata](storage-properties-metadata.md).</span></span>  

### <a name="uploading-fast"></a><span data-ttu-id="d89aa-464">Snabb överföring</span><span class="sxs-lookup"><span data-stu-id="d89aa-464">Uploading Fast</span></span>
<span data-ttu-id="d89aa-465">tooupload blobbar snabb hello första fråga tooanswer är: är du överföra en blob eller många?</span><span class="sxs-lookup"><span data-stu-id="d89aa-465">tooupload blobs fast, hello first question tooanswer is: are you uploading one blob or many?</span></span>  <span data-ttu-id="d89aa-466">Använd hello nedan vägledning toodetermine hello rätt metod toouse beroende på ditt scenario.</span><span class="sxs-lookup"><span data-stu-id="d89aa-466">Use hello below guidance toodetermine hello correct method toouse depending on your scenario.</span></span>  

#### <span data-ttu-id="d89aa-467"><a name="subheading21"></a>Ladda upp en stor blob snabbt</span><span class="sxs-lookup"><span data-stu-id="d89aa-467"><a name="subheading21"></a>Uploading one large blob quickly</span></span>
<span data-ttu-id="d89aa-468">tooupload som en enda stor blob snabbt klientprogrammet ladda upp dess block eller sidor parallellt (är uppmärksam på hello skalbarhetsmål för enskilda blobbar och hello storage-konto som helhet).</span><span class="sxs-lookup"><span data-stu-id="d89aa-468">tooupload a single large blob quickly, your client application should upload its blocks or pages in parallel (being mindful of hello scalability targets for individual blobs and hello storage account as a whole).</span></span>  <span data-ttu-id="d89aa-469">Observera att hello officiella Microsoft RTM Storage-klientbibliotek (.NET, Java) hello möjlighet toodo detta.</span><span class="sxs-lookup"><span data-stu-id="d89aa-469">Note that hello official Microsoft-provided RTM Storage Client libraries (.NET, Java) have hello ability toodo this.</span></span>  <span data-ttu-id="d89aa-470">Använd hello under angivna objektegenskaper tooset hello nivå av samtidighet för varje hello bibliotek:</span><span class="sxs-lookup"><span data-stu-id="d89aa-470">For each of hello libraries, use hello below specified object/property tooset hello level of concurrency:</span></span>  

* <span data-ttu-id="d89aa-471">.NET: Ange ParallelOperationThreadCount på en BlobRequestOptions objektet toobe används.</span><span class="sxs-lookup"><span data-stu-id="d89aa-471">.NET: Set ParallelOperationThreadCount on a BlobRequestOptions object toobe used.</span></span>
* <span data-ttu-id="d89aa-472">Java/Android: Använda BlobRequestOptions.setConcurrentRequestCount()</span><span class="sxs-lookup"><span data-stu-id="d89aa-472">Java/Android: Use BlobRequestOptions.setConcurrentRequestCount()</span></span>
* <span data-ttu-id="d89aa-473">Node.js: Använd parallelOperationThreadCount antingen hello begäran alternativ eller hello blob-tjänsten.</span><span class="sxs-lookup"><span data-stu-id="d89aa-473">Node.js: Use parallelOperationThreadCount on either hello request options or on hello blob service.</span></span>
* <span data-ttu-id="d89aa-474">C++: Använd hello blob_request_options::set_parallelism_factor metoden.</span><span class="sxs-lookup"><span data-stu-id="d89aa-474">C++: Use hello blob_request_options::set_parallelism_factor method.</span></span>

#### <span data-ttu-id="d89aa-475"><a name="subheading22"></a>Överför många blobbar snabbt</span><span class="sxs-lookup"><span data-stu-id="d89aa-475"><a name="subheading22"></a>Uploading many blobs quickly</span></span>
<span data-ttu-id="d89aa-476">tooupload många blobbar snabbt överföra blobbar parallellt.</span><span class="sxs-lookup"><span data-stu-id="d89aa-476">tooupload many blobs quickly, upload blobs in parallel.</span></span> <span data-ttu-id="d89aa-477">Det här är snabbare än att överföra enda blobbar i taget med parallellt block överföringar eftersom det sprids hello överför över flera partitioner i hello storage-tjänst.</span><span class="sxs-lookup"><span data-stu-id="d89aa-477">This is faster than uploading single blobs at a time with parallel block uploads because it spreads hello upload across multiple partitions of hello storage service.</span></span> <span data-ttu-id="d89aa-478">En enda blob stöder bara en genomströmning på 60 MB per sekund (cirka 480 Mbit/s).</span><span class="sxs-lookup"><span data-stu-id="d89aa-478">A single blob only supports a throughput of 60 MB/second (approximately 480 Mbps).</span></span> <span data-ttu-id="d89aa-479">När hello skrivning, USA-baserade LRS-konto har stöd för upp too20 Gbit/s-ingång som är större än hello dataflöde som stöds av en enskild blob.</span><span class="sxs-lookup"><span data-stu-id="d89aa-479">At hello time of writing, a US-based LRS account supports up too20 Gbps ingress which is far more than hello throughput supported by an individual blob.</span></span>  <span data-ttu-id="d89aa-480">[AzCopy](#subheading18) utför överföringar parallellt som standard och rekommenderas för det här scenariot.</span><span class="sxs-lookup"><span data-stu-id="d89aa-480">[AzCopy](#subheading18) performs uploads in parallel by default, and is recommended for this scenario.</span></span>  

### <span data-ttu-id="d89aa-481"><a name="subheading23"></a>Att välja hello rätt typ av blob</span><span class="sxs-lookup"><span data-stu-id="d89aa-481"><a name="subheading23"></a>Choosing hello correct type of blob</span></span>
<span data-ttu-id="d89aa-482">Azure Storage stöder två typer av blob: *sidan* blobbar och *block* blobbar.</span><span class="sxs-lookup"><span data-stu-id="d89aa-482">Azure Storage supports two types of blob: *page* blobs and *block* blobs.</span></span> <span data-ttu-id="d89aa-483">För en given användningsscenariot påverkar ditt val av blobbtypen hello prestanda och skalbarhet i lösningen.</span><span class="sxs-lookup"><span data-stu-id="d89aa-483">For a given usage scenario, your choice of blob type will affect hello performance and scalability of your solution.</span></span> <span data-ttu-id="d89aa-484">Blockblobbar är lämplig när du vill tooupload stora mängder data effektivt: till exempel ett klientprogram kan behöva tooupload foton eller video tooblob lagring.</span><span class="sxs-lookup"><span data-stu-id="d89aa-484">Block blobs are appropriate when you want tooupload large amounts of data efficiently: for example, a client application may need tooupload photos or video tooblob storage.</span></span> <span data-ttu-id="d89aa-485">Sidblobbar är lämplig om hello programmet behöver tooperform slumpmässiga skrivningar på hello data: till exempel Azure virtuella hårddiskarna lagras som sidblobar.</span><span class="sxs-lookup"><span data-stu-id="d89aa-485">Page blobs are appropriate if hello application needs tooperform random writes on hello data: for example, Azure VHDs are stored as page blobs.</span></span>  

<span data-ttu-id="d89aa-486">Mer information finns i [förstå Blockblobbar, Tilläggsblobbar och Sidblobbar](http://msdn.microsoft.com/library/azure/ee691964.aspx).</span><span class="sxs-lookup"><span data-stu-id="d89aa-486">For more information, see [Understanding Block Blobs, Append Blobs, and Page Blobs](http://msdn.microsoft.com/library/azure/ee691964.aspx).</span></span>  

## <a name="tables"></a><span data-ttu-id="d89aa-487">Tabeller</span><span class="sxs-lookup"><span data-stu-id="d89aa-487">Tables</span></span>
<span data-ttu-id="d89aa-488">I tillägg toohello beprövade metoder för [alla tjänster](#allservices) som beskrivs ovan, hello beprövade metoder när det gäller specifikt toohello tabelltjänsten.</span><span class="sxs-lookup"><span data-stu-id="d89aa-488">In addition toohello proven practices for [All Services](#allservices) described previously, hello following proven practices apply specifically toohello table service.</span></span>  

### <span data-ttu-id="d89aa-489"><a name="subheading24"></a>Tabell-specifika skalbarhetsmål</span><span class="sxs-lookup"><span data-stu-id="d89aa-489"><a name="subheading24"></a>Table-Specific Scalability Targets</span></span>
<span data-ttu-id="d89aa-490">Tillägg toohello bandbreddsbegränsningar av en hela lagringskontot ha tabeller hello efter specifika skalbarhetsgränsen.</span><span class="sxs-lookup"><span data-stu-id="d89aa-490">In addition toohello bandwidth limitations of an entire storage account, tables have hello following specific scalability limit.</span></span>  <span data-ttu-id="d89aa-491">Observera att hello system kommer belastningsutjämna som ökar din trafik, men om trafiken har plötslig belastning, du får inte vara kan tooget volymen genomströmning omedelbart.</span><span class="sxs-lookup"><span data-stu-id="d89aa-491">Note that hello system will load balance as your traffic increases, but if your traffic has sudden bursts, you may not be able tooget this volume of throughput immediately.</span></span>  <span data-ttu-id="d89aa-492">Om mönstret har belastning, förväntat toosee begränsning och/eller timeout under hello burst som hello lagringstjänsten automatiskt belastningsutjämning i tabellen.</span><span class="sxs-lookup"><span data-stu-id="d89aa-492">If your pattern has bursts, you should expect toosee throttling and/or timeouts during hello burst as hello storage service automatically load balances out your table.</span></span>  <span data-ttu-id="d89aa-493">Långsamt vanligtvis av dig har bättre resultat som den ger hello system tid tooload saldo på lämpligt sätt.</span><span class="sxs-lookup"><span data-stu-id="d89aa-493">Ramping up slowly generally has better results as it gives hello system time tooload balance appropriately.</span></span>  

#### <a name="entities-per-second-account"></a><span data-ttu-id="d89aa-494">Entiteter per sekund (konto)</span><span class="sxs-lookup"><span data-stu-id="d89aa-494">Entities per Second (Account)</span></span>
<span data-ttu-id="d89aa-495">Hej skalbarhetsgränsen för att komma åt tabeller är upp too20 000 enheter (1KB som är varje) per sekund för ett konto.</span><span class="sxs-lookup"><span data-stu-id="d89aa-495">hello scalability limit for accessing tables is up too20,000 entities (1KB each) per second for an account.</span></span>  <span data-ttu-id="d89aa-496">I allmänhet varje entitet som infogas, uppdateras, tas bort eller genomsöks antal mot det här målet.</span><span class="sxs-lookup"><span data-stu-id="d89aa-496">In general, each entity that is inserted, updated, deleted, or scanned counts toward this target.</span></span>  <span data-ttu-id="d89aa-497">Infoga en batch som innehåller 100 entiteter skulle så räknas som 100 entiteter.</span><span class="sxs-lookup"><span data-stu-id="d89aa-497">So a batch insert that contains 100 entities would count as 100 entities.</span></span>  <span data-ttu-id="d89aa-498">En fråga som genomsöker 1000 entiteter och returnerar 5 räknas som 1000 enheter.</span><span class="sxs-lookup"><span data-stu-id="d89aa-498">A query that scans 1000 entities and returns 5 would count as 1000 entities.</span></span>  

#### <a name="entities-per-second-partition"></a><span data-ttu-id="d89aa-499">Entiteter per sekund (Partition)</span><span class="sxs-lookup"><span data-stu-id="d89aa-499">Entities per Second (Partition)</span></span>
<span data-ttu-id="d89aa-500">Inom en enskild partition hello skalbarhet mål för att komma åt tabeller är 2 000 enheter (1KB som är varje) per sekund, med hjälp av hello samma inventering som beskrivs i föregående avsnitt i hello.</span><span class="sxs-lookup"><span data-stu-id="d89aa-500">Within a single partition, hello scalability target for accessing tables is 2,000 entities (1KB each) per second, using hello same counting as described in hello previous section.</span></span>  

### <a name="configuration"></a><span data-ttu-id="d89aa-501">Konfiguration</span><span class="sxs-lookup"><span data-stu-id="d89aa-501">Configuration</span></span>
<span data-ttu-id="d89aa-502">Det här avsnittet innehåller flera snabb konfigurationsinställningar som du kan använda toomake betydande prestandaförbättringar i hello tabelltjänsten:</span><span class="sxs-lookup"><span data-stu-id="d89aa-502">This section lists several quick configuration settings that you can use toomake significant performance improvements in hello table service:</span></span>  

#### <span data-ttu-id="d89aa-503"><a name="subheading25"></a>Använd JSON</span><span class="sxs-lookup"><span data-stu-id="d89aa-503"><a name="subheading25"></a>Use JSON</span></span>
<span data-ttu-id="d89aa-504">Från och med version av storage service 2013-08-15, stöder hello tabelltjänsten användningen av JSON i stället för hello XML-baserade AtomPub-format för att överföra tabelldata.</span><span class="sxs-lookup"><span data-stu-id="d89aa-504">Beginning with storage service version 2013-08-15, hello table service supports using JSON instead of hello XML-based AtomPub format for transferring table data.</span></span> <span data-ttu-id="d89aa-505">Detta kan minska nyttolast storlekar som 75% och förbättrar hello prestandan för din app.</span><span class="sxs-lookup"><span data-stu-id="d89aa-505">This can reduce payload sizes by as much as 75% and can significantly improve hello performance of your application.</span></span>

<span data-ttu-id="d89aa-506">Mer information finns i hello efter [Microsoft Azure-tabeller: introduktion till JSON](http://blogs.msdn.com/b/windowsazurestorage/archive/2013/12/05/windows-azure-tables-introducing-json.aspx) och [Nyttolastformat för tabellen tjänståtgärder](http://msdn.microsoft.com/library/azure/dn535600.aspx).</span><span class="sxs-lookup"><span data-stu-id="d89aa-506">For more information, see hello post [Microsoft Azure Tables: Introducing JSON](http://blogs.msdn.com/b/windowsazurestorage/archive/2013/12/05/windows-azure-tables-introducing-json.aspx) and [Payload Format for Table Service Operations](http://msdn.microsoft.com/library/azure/dn535600.aspx).</span></span>

#### <span data-ttu-id="d89aa-507"><a name="subheading26"></a>Nagle ut</span><span class="sxs-lookup"><span data-stu-id="d89aa-507"><a name="subheading26"></a>Nagle Off</span></span>
<span data-ttu-id="d89aa-508">Nagles algoritmen implementeras över TCP/IP-nätverk som ett sätt tooimprove nätverkets prestanda.</span><span class="sxs-lookup"><span data-stu-id="d89aa-508">Nagle's algorithm is widely implemented across TCP/IP networks as a means tooimprove network performance.</span></span> <span data-ttu-id="d89aa-509">Det är dock inte optimalt i samtliga fall (till exempel interaktiva miljöer).</span><span class="sxs-lookup"><span data-stu-id="d89aa-509">However, it is not optimal in all circumstances (such as highly interactive environments).</span></span> <span data-ttu-id="d89aa-510">Nagles algoritm har en negativ inverkan på prestandan för hello begäranden toohello tabell och kön tjänster för Azure Storage, och bör du inaktivera den om möjligt.</span><span class="sxs-lookup"><span data-stu-id="d89aa-510">For Azure Storage, Nagle's algorithm has a negative impact on hello performance of requests toohello table and queue services, and you should disable it if possible.</span></span>  

<span data-ttu-id="d89aa-511">Mer information finns i vår blogginlägget [Nagles algoritmen är inte egna gentemot små begäran](http://blogs.msdn.com/b/windowsazurestorage/archive/2010/06/25/nagle-s-algorithm-is-not-friendly-towards-small-requests.aspx), som förklarar varför Nagles algoritmen dåligt samverkar med tabell- och köegenskaper begäranden och visar hur toodisable den i din klient programmet.</span><span class="sxs-lookup"><span data-stu-id="d89aa-511">For more information, see our blog post [Nagle's Algorithm is Not Friendly towards Small Requests](http://blogs.msdn.com/b/windowsazurestorage/archive/2010/06/25/nagle-s-algorithm-is-not-friendly-towards-small-requests.aspx), which explains why Nagle's algorithm interacts poorly with table and queue requests, and shows how toodisable it in your client application.</span></span>  

### <a name="schema"></a><span data-ttu-id="d89aa-512">Schemat</span><span class="sxs-lookup"><span data-stu-id="d89aa-512">Schema</span></span>
<span data-ttu-id="d89aa-513">Hur du representera och fråga data är hello största en faktor som påverkar hello prestanda för hello tabelltjänsten.</span><span class="sxs-lookup"><span data-stu-id="d89aa-513">How you represent and query your data is hello biggest single factor that affects hello performance of hello table service.</span></span> <span data-ttu-id="d89aa-514">Varje program är olika, beskrivs i det här avsnittet några allmänna beprövade metoder som relaterar till:</span><span class="sxs-lookup"><span data-stu-id="d89aa-514">While every application is different, this section outlines some general proven practices that relate to:</span></span>  

* <span data-ttu-id="d89aa-515">Tabelldesign</span><span class="sxs-lookup"><span data-stu-id="d89aa-515">Table design</span></span>
* <span data-ttu-id="d89aa-516">Effektiva frågor</span><span class="sxs-lookup"><span data-stu-id="d89aa-516">Efficient queries</span></span>
* <span data-ttu-id="d89aa-517">Effektiv uppdateringar</span><span class="sxs-lookup"><span data-stu-id="d89aa-517">Efficient data updates</span></span>  

#### <span data-ttu-id="d89aa-518"><a name="subheading27"></a>Tabeller och partitioner</span><span class="sxs-lookup"><span data-stu-id="d89aa-518"><a name="subheading27"></a>Tables and partitions</span></span>
<span data-ttu-id="d89aa-519">Tabeller är indelade i partitioner.</span><span class="sxs-lookup"><span data-stu-id="d89aa-519">Tables are divided into partitions.</span></span> <span data-ttu-id="d89aa-520">Varje entitet som lagras i en partition resurser hello samma partitionsnyckel och har en unik rad viktiga tooidentify det i den aktuella partitionen.</span><span class="sxs-lookup"><span data-stu-id="d89aa-520">Every entity stored in a partition shares hello same partition key and has a unique row key tooidentify it within that partition.</span></span> <span data-ttu-id="d89aa-521">Partitioner ger fördelar, men också introducera skalbarhetsbegränsningar.</span><span class="sxs-lookup"><span data-stu-id="d89aa-521">Partitions provide benefits but also introduce scalability limits.</span></span>  

* <span data-ttu-id="d89aa-522">Fördelar: Du kan uppdatera entiteter i hello samma partition i en enda, atomic, batch-transaktion som innehåller too100 separat lagringsåtgärder (högst 4MB, total storlek).</span><span class="sxs-lookup"><span data-stu-id="d89aa-522">Benefits: You can update entities in hello same partition in a single, atomic, batch transaction that contains up too100 separate storage operations (limit of 4MB total size).</span></span> <span data-ttu-id="d89aa-523">Under förutsättning att hello samma nummer för entiteter toobe hämtas, du kan också fråga data i en enda partition effektivare än data sträcker sig över flera partitioner (även om läsa på ytterligare rekommendationer för frågar tabelldata).</span><span class="sxs-lookup"><span data-stu-id="d89aa-523">Assuming hello same number of entities toobe retrieved, you can also query data within a single partition more efficiently than data that spans partitions (though read on for further recommendations on querying table data).</span></span>
* <span data-ttu-id="d89aa-524">Skalbarhetsgränsen: åtkomst tooentities lagras i en partition kan inte vara belastningsutjämnad eftersom partitioner stöder atomiska Batchtransaktioner.</span><span class="sxs-lookup"><span data-stu-id="d89aa-524">Scalability limit: Access tooentities stored in a single partition cannot be load-balanced because partitions support atomic batch transactions.</span></span> <span data-ttu-id="d89aa-525">Därför är hello skalbarhet mål för en enskild tabell partition lägre än för hello tabelltjänsten som helhet.</span><span class="sxs-lookup"><span data-stu-id="d89aa-525">For this reason, hello scalability target for an individual table partition is lower than for hello table service as a whole.</span></span>  

<span data-ttu-id="d89aa-526">På grund av dessa tabeller och egenskaper partitioner, bör du anta hello följande principer:</span><span class="sxs-lookup"><span data-stu-id="d89aa-526">Because of these characteristics of tables and partitions, you should adopt hello following design principles:</span></span>  

* <span data-ttu-id="d89aa-527">Data som ditt klientprogram uppdateras ofta eller frågas i samma logiska arbetsenheten måste finnas i hello hello samma partition.</span><span class="sxs-lookup"><span data-stu-id="d89aa-527">Data that your client application frequently updated or queried in hello same logical unit of work should be located in hello same partition.</span></span>  <span data-ttu-id="d89aa-528">Det kan vara eftersom programmet är sammanställa skrivningar eller eftersom du vill tootake nytta av atomiska batchåtgärder.</span><span class="sxs-lookup"><span data-stu-id="d89aa-528">This may be because your application is aggregating writes, or because you want tootake advantage of atomic batch operations.</span></span>  <span data-ttu-id="d89aa-529">Dessutom kan data i en partition effektivare efterfrågas i en enskild fråga än data över partitioner.</span><span class="sxs-lookup"><span data-stu-id="d89aa-529">Also, data in a single partition can be more efficiently queried in a single query than data across partitions.</span></span>
* <span data-ttu-id="d89aa-530">Data som ditt klientprogram inte infoga/uppdatera eller fråga i hello samma logiska arbetsenheten (enskild fråga eller gruppuppdatering) måste finnas i separata partitioner.</span><span class="sxs-lookup"><span data-stu-id="d89aa-530">Data that your client application does not insert/update or query in hello same logical unit of work (single query or batch update) should be located in separate partitions.</span></span>  <span data-ttu-id="d89aa-531">Ett viktigt är att det finns ingen gräns toohello antal partitionsnycklar i en tabell med miljontals partitionsnycklar är inte ett problem och påverkar inte prestanda.</span><span class="sxs-lookup"><span data-stu-id="d89aa-531">One important note is that there is no limit toohello number of partition keys in a single table, so having millions of partition keys is not a problem and will not impact performance.</span></span>  <span data-ttu-id="d89aa-532">Till exempel om ditt program är en populär webbplats med användarinloggning, kan med hjälp av hello användar-Id som hello partitionsnyckel vara ett bra alternativ.</span><span class="sxs-lookup"><span data-stu-id="d89aa-532">For example, if your application is a popular website with user login, using hello User Id as hello partition key could be a good choice.</span></span>  

#### <a name="hot-partitions"></a><span data-ttu-id="d89aa-533">Varm partitioner</span><span class="sxs-lookup"><span data-stu-id="d89aa-533">Hot Partitions</span></span>
<span data-ttu-id="d89aa-534">En varm partition är en som tar emot oproportionerligt procent av hello trafik tooan konto och kan inte vara belastningsutjämnade eftersom det är en enskild partition.</span><span class="sxs-lookup"><span data-stu-id="d89aa-534">A hot partition is one that is receiving a disproportionate percentage of hello traffic tooan account, and cannot be load balanced because it is a single partition.</span></span>  <span data-ttu-id="d89aa-535">I allmänhet skapas varm partitioner på två sätt:</span><span class="sxs-lookup"><span data-stu-id="d89aa-535">In general, hot partitions are created one of two ways:</span></span>  

##### <span data-ttu-id="d89aa-536"><a name="subheading28"></a>Lägg endast till och lägga endast mönster</span><span class="sxs-lookup"><span data-stu-id="d89aa-536"><a name="subheading28"></a>Append Only and Prepend Only patterns</span></span>
<span data-ttu-id="d89aa-537">Hej ”Lägg till bara” mönster är ett där alla (eller nästan alla) av hello trafik tooa angivna PK ökar och minskar bl.a toohello aktuell tid.</span><span class="sxs-lookup"><span data-stu-id="d89aa-537">hello "Append Only" pattern is one where all (or nearly all) of hello traffic tooa given PK increases and decreases according toohello current time.</span></span>  <span data-ttu-id="d89aa-538">Ett exempel är om ditt program används hello aktuellt datum som en partitionsnyckel för loggdata.</span><span class="sxs-lookup"><span data-stu-id="d89aa-538">An example is if your application used hello current date as a partition key for log data.</span></span>  <span data-ttu-id="d89aa-539">Detta resulterar i alla hello infogningar ska toohello sista partition i tabellen och hello går inte att läsa belastningsutjämna eftersom alla hello skrivningar kommer toohello slutet av tabellen.</span><span class="sxs-lookup"><span data-stu-id="d89aa-539">This results in all of hello inserts going toohello last partition in your table, and hello system cannot load balance because all of hello writes are going toohello end of your table.</span></span>  <span data-ttu-id="d89aa-540">Om hello mängden trafik toothat partition överskrider hello partition nivå skalbarhet mål, resulterar det i begränsning.</span><span class="sxs-lookup"><span data-stu-id="d89aa-540">If hello volume of traffic toothat partition exceeds hello partition-level scalability target, then it will result in throttling.</span></span>  <span data-ttu-id="d89aa-541">Det är bättre tooensure som trafiken skickas toomultiple partitioner tooenable belastningen saldo hello begäranden i tabellen.</span><span class="sxs-lookup"><span data-stu-id="d89aa-541">It's better tooensure that traffic is sent toomultiple partitions, tooenable load balance hello requests across your table.</span></span>  

##### <span data-ttu-id="d89aa-542"><a name="subheading29"></a>Hög trafik Data</span><span class="sxs-lookup"><span data-stu-id="d89aa-542"><a name="subheading29"></a>High-Traffic Data</span></span>
<span data-ttu-id="d89aa-543">Om din partitionering schema resulterar i en enda partition som har bara data som används mycket mer än andra partitioner, kan du också se begränsning när den aktuella partitionen närmar sig hello skalbarhet mål för en enskild partition.</span><span class="sxs-lookup"><span data-stu-id="d89aa-543">If your partitioning scheme results in a single partition that just has data that is far more used than other partitions, you may also see throttling as that partition approaches hello scalability target for a single partition.</span></span>  <span data-ttu-id="d89aa-544">Det är bättre toomake till att ingen enskild partition scheme resultaten partitions närmar sig hello skalbarhetsmål.</span><span class="sxs-lookup"><span data-stu-id="d89aa-544">It's better toomake sure that your partition scheme results in no single partition approaching hello scalability targets.</span></span>  

#### <a name="querying"></a><span data-ttu-id="d89aa-545">Fråga</span><span class="sxs-lookup"><span data-stu-id="d89aa-545">Querying</span></span>
<span data-ttu-id="d89aa-546">Det här avsnittet beskrivs beprövade metoder för att fråga efter hello tabelltjänsten.</span><span class="sxs-lookup"><span data-stu-id="d89aa-546">This section describes proven practices for querying hello table service.</span></span>  

##### <span data-ttu-id="d89aa-547"><a name="subheading30"></a>Frågeomfattningen</span><span class="sxs-lookup"><span data-stu-id="d89aa-547"><a name="subheading30"></a>Query Scope</span></span>
<span data-ttu-id="d89aa-548">Det finns flera sätt toospecify hello mängd entiteter tooquery.</span><span class="sxs-lookup"><span data-stu-id="d89aa-548">There are several ways toospecify hello range of entities tooquery.</span></span>  <span data-ttu-id="d89aa-549">hello följer en beskrivning av hello används för var och en.</span><span class="sxs-lookup"><span data-stu-id="d89aa-549">hello following is a discussion of hello uses of each.</span></span>  

<span data-ttu-id="d89aa-550">I allmänhet undvika genomsökningar (frågor som är större än en enda enhet), men om du måste skannar försök tooorganize dina data så att dina skanningar hämta hello data som du behöver, utan genomsökning eller returnera stora mängder enheter inte behöver du.</span><span class="sxs-lookup"><span data-stu-id="d89aa-550">In general, avoid scans (queries larger than a single entity), but if you must scan, try tooorganize your data so that your scans retrieve hello data you need without scanning or returning significant amounts of entities you don't need.</span></span>  

###### <a name="point-queries"></a><span data-ttu-id="d89aa-551">Punkt-frågor</span><span class="sxs-lookup"><span data-stu-id="d89aa-551">Point Queries</span></span>
<span data-ttu-id="d89aa-552">En punkt-fråga hämtar exakt en enhet.</span><span class="sxs-lookup"><span data-stu-id="d89aa-552">A point query retrieves exactly one entity.</span></span> <span data-ttu-id="d89aa-553">Det gör du genom att ange både hello partitionsnyckel och radnyckel av hello entiteten tooretrieve.</span><span class="sxs-lookup"><span data-stu-id="d89aa-553">It does this by specifying both hello partition key and row key of hello entity tooretrieve.</span></span> <span data-ttu-id="d89aa-554">De här frågorna är mycket effektivt och du bör använda dem om möjligt.</span><span class="sxs-lookup"><span data-stu-id="d89aa-554">These queries are very efficient, and you should use them wherever possible.</span></span>  

###### <a name="partition-queries"></a><span data-ttu-id="d89aa-555">Partitionen frågor</span><span class="sxs-lookup"><span data-stu-id="d89aa-555">Partition Queries</span></span>
<span data-ttu-id="d89aa-556">En partitionsfrågan är en fråga som hämtar en datamängd som delar en gemensam partitionsnyckel.</span><span class="sxs-lookup"><span data-stu-id="d89aa-556">A partition query is a query that retrieves a set of data that shares a common partition key.</span></span> <span data-ttu-id="d89aa-557">Normalt anger hello frågan ett intervall av nyckelvärden för raden eller ett intervall med värden för vissa entitetsegenskap i tillägget tooa partitionsnyckel.</span><span class="sxs-lookup"><span data-stu-id="d89aa-557">Typically, hello query specifies a range of row key values or a range of values for some entity property in addition tooa partition key.</span></span> <span data-ttu-id="d89aa-558">Dessa är mindre effektiva än punkt frågor och bör användas sparsamt.</span><span class="sxs-lookup"><span data-stu-id="d89aa-558">These are less efficient than point queries, and should be used sparingly.</span></span>  

###### <a name="table-queries"></a><span data-ttu-id="d89aa-559">Tabell frågor</span><span class="sxs-lookup"><span data-stu-id="d89aa-559">Table Queries</span></span>
<span data-ttu-id="d89aa-560">En tabellfråga är en fråga som hämtar en uppsättning enheter som inte delar en gemensam partitionsnyckel.</span><span class="sxs-lookup"><span data-stu-id="d89aa-560">A table query is a query that retrieves a set of entities that does not share a common partition key.</span></span> <span data-ttu-id="d89aa-561">Dessa frågor är inte effektivt och du bör undvika dem om möjligt.</span><span class="sxs-lookup"><span data-stu-id="d89aa-561">These queries are not efficient and you should avoid them if possible.</span></span>  

##### <span data-ttu-id="d89aa-562"><a name="subheading31"></a>Frågan densitet</span><span class="sxs-lookup"><span data-stu-id="d89aa-562"><a name="subheading31"></a>Query Density</span></span>
<span data-ttu-id="d89aa-563">En annan nyckelfaktor i frågan effektivitet är hello antal entiteter som returneras som jämfört med toohello antal entiteter skannade toofind hello returnerade värdet.</span><span class="sxs-lookup"><span data-stu-id="d89aa-563">Another key factor in query efficiency is hello number of entities returned as compared toohello number of entities scanned toofind hello returned set.</span></span> <span data-ttu-id="d89aa-564">Om ditt program utför en tabellfråga med ett filter för ett värde för egenskapen att bara 1% av hello data resurser hello fråga genomsöks 100 entiteter för var en entitet som returneras.</span><span class="sxs-lookup"><span data-stu-id="d89aa-564">If your application performs a table query with a filter for a property value that only 1% of hello data shares, hello query will scan 100 entities for every one entity it returns.</span></span> <span data-ttu-id="d89aa-565">Hej skalbarhetsmål för tabellen beskrivs tidigare alla relatera toohello antal entiteter som genomsöks, och inte hello antal entiteter som returneras: densitet frågor kan enkelt orsaka hello tabellen service toothrottle ditt program eftersom den måste söka så många entiteter tooretrieve hello entitet du letar efter.</span><span class="sxs-lookup"><span data-stu-id="d89aa-565">hello table scalability targets discussed previously all relate toohello number of entities scanned, and not hello number of entities returned: a low query density can easily cause hello table service toothrottle your application because it must scan so many entities tooretrieve hello entity you are looking for.</span></span>  <span data-ttu-id="d89aa-566">I avsnittet hello nedan på [denormalization](#subheading34) för mer information om hur tooavoid detta.</span><span class="sxs-lookup"><span data-stu-id="d89aa-566">See hello section below on [denormalization](#subheading34) for more information on how tooavoid this.</span></span>  

##### <a name="limiting-hello-amount-of-data-returned"></a><span data-ttu-id="d89aa-567">Begränsa hello belopp av returnerade Data</span><span class="sxs-lookup"><span data-stu-id="d89aa-567">Limiting hello Amount of Data Returned</span></span>
###### <span data-ttu-id="d89aa-568"><a name="subheading32"></a>Filtrering</span><span class="sxs-lookup"><span data-stu-id="d89aa-568"><a name="subheading32"></a>Filtering</span></span>
<span data-ttu-id="d89aa-569">Om du vet att en fråga returnerar enheter som du inte behöver i hello klientprogrammet, Överväg att använda filter tooreduce hello storleken hello returnerade uppsättningen.</span><span class="sxs-lookup"><span data-stu-id="d89aa-569">Where you know that a query will return entities that you don't need in hello client application, consider using a filter tooreduce hello size of hello returned set.</span></span> <span data-ttu-id="d89aa-570">Vid hello entiteter inte returnerades toohello klienten fortfarande räknas in hello skalbarhetsgränser, programmets prestanda kommer förbättra på grund av hello minskas nätverket nyttolastens storlek och hello minskat antal entiteter som klientprogrammet måste bearbeta .</span><span class="sxs-lookup"><span data-stu-id="d89aa-570">While hello entities not returned toohello client still count toward hello scalability limits, your application performance will improve because of hello reduced network payload size and hello reduced number of entities that your client application must process.</span></span>  <span data-ttu-id="d89aa-571">Se över anteckning på [frågan densitet](#subheading31), men – hello skalbarhetsmål relaterar toohello antal entiteter som genomsöks, så att en fråga som filtrerar ut många entiteter fortfarande kan resultera i begränsning, även om några enheter returneras.</span><span class="sxs-lookup"><span data-stu-id="d89aa-571">See above note on [Query Density](#subheading31), however – hello scalability targets relate toohello number of entities scanned, so a query that filters out many entities may still result in throttling, even if few entities are returned.</span></span>  

###### <span data-ttu-id="d89aa-572"><a name="subheading33"></a>Projektion</span><span class="sxs-lookup"><span data-stu-id="d89aa-572"><a name="subheading33"></a>Projection</span></span>
<span data-ttu-id="d89aa-573">Om klientprogrammet måste begränsad uppsättning egenskaper från hello entiteter i tabellen, kan du använda projektion toolimit hello storleken på hello returnerade datauppsättning.</span><span class="sxs-lookup"><span data-stu-id="d89aa-573">If your client application needs only a limited set of properties from hello entities in your table, you can use projection toolimit hello size of hello returned data set.</span></span> <span data-ttu-id="d89aa-574">Precis som med filtrering, hjälper detta tooreduce nätverksbelastningen och bearbetning av klienten.</span><span class="sxs-lookup"><span data-stu-id="d89aa-574">As with filtering, this helps tooreduce network load and client processing.</span></span>  

##### <span data-ttu-id="d89aa-575"><a name="subheading34"></a>Denormalization</span><span class="sxs-lookup"><span data-stu-id="d89aa-575"><a name="subheading34"></a>Denormalization</span></span>
<span data-ttu-id="d89aa-576">Till skillnad från arbete med relationsdatabaser leda hello beprövade metoder för att effektivt frågar tabelldata toodenormalizing dina data.</span><span class="sxs-lookup"><span data-stu-id="d89aa-576">Unlike working with relational databases, hello proven practices for efficiently querying table data lead toodenormalizing your data.</span></span> <span data-ttu-id="d89aa-577">Det vill säga dupliceras hello samma data i flera enheter (en för varje nyckel kan du använda toofind hello data) toominimize hello antal entiteter som en fråga måste du skanna toofind hello informationen hello klienten måste i stället tooscan stort antal entiteter toofind hello data måste för ditt program.</span><span class="sxs-lookup"><span data-stu-id="d89aa-577">That is, duplicating hello same data in multiple entities (one for each key you may use toofind hello data) toominimize hello number of entities that a query must scan toofind hello data hello client needs, rather than having tooscan large numbers of entities toofind hello data your application needs.</span></span>  <span data-ttu-id="d89aa-578">På en webbplats för e-handel, kan du exempelvis vill toofind en order både av hello kund-ID (mig kundens order) och efter datum hello (mig order på ett datum).</span><span class="sxs-lookup"><span data-stu-id="d89aa-578">For example, in an e-commerce website, you may want toofind an order both by hello customer ID (give me this customer's orders) and by hello date (give me orders on a date).</span></span>  <span data-ttu-id="d89aa-579">I Table Storage är det bästa toostore hello entitet (eller en referens tooit) två gånger – en gång med tabellnamnet och PK RK toofacilitate söka efter kund-ID, en gång toofacilitate söka efter hello datum.</span><span class="sxs-lookup"><span data-stu-id="d89aa-579">In Table Storage, it is best toostore hello entity (or a reference tooit) twice – once with Table Name, PK, and RK toofacilitate finding by customer ID, once toofacilitate finding it by hello date.</span></span>  

#### <a name="insertupdatedelete"></a><span data-ttu-id="d89aa-580">Insert/Update/Delete</span><span class="sxs-lookup"><span data-stu-id="d89aa-580">Insert/Update/Delete</span></span>
<span data-ttu-id="d89aa-581">Det här avsnittet beskrivs beprövade metoder för att ändra entiteter som lagras i tabelltjänsten hello.</span><span class="sxs-lookup"><span data-stu-id="d89aa-581">This section describes proven practices for modifying entities stored in hello table service.</span></span>  

##### <span data-ttu-id="d89aa-582"><a name="subheading35"></a>Batchbearbetning</span><span class="sxs-lookup"><span data-stu-id="d89aa-582"><a name="subheading35"></a>Batching</span></span>
<span data-ttu-id="d89aa-583">Batchtransaktioner är kända som entiteten grupp transaktioner (ETG) i Azure Storage; alla hello åtgärder i en ETG måste finnas på en partition i en tabell.</span><span class="sxs-lookup"><span data-stu-id="d89aa-583">Batch transactions are known as Entity Group Transactions (ETG) in Azure Storage; all hello operations within an ETG must be on a single partition in a single table.</span></span> <span data-ttu-id="d89aa-584">Använd om möjligt ETGs tooperform infogningar, uppdateringar och borttagningar i batchar.</span><span class="sxs-lookup"><span data-stu-id="d89aa-584">Where possible, use ETGs tooperform inserts, updates, and deletes in batches.</span></span> <span data-ttu-id="d89aa-585">Detta minskar hello antalet sändningar till klienten toohello programservern, minskar hello antal fakturerbar transaktioner (en ETG räknas som en enda transaktion för fakturering och kan innehålla upp too100 lagringsåtgärder) och aktiverar atomiska uppdateringar (alla åtgärder lyckas eller misslyckas inom en ETG alla).</span><span class="sxs-lookup"><span data-stu-id="d89aa-585">This reduces hello number of round trips from your client application toohello server, reduces hello number of billable transactions (an ETG counts as a single transaction for billing purposes and can contain up too100 storage operations), and enables atomic updates (all operations succeed or all fail within an ETG).</span></span> <span data-ttu-id="d89aa-586">Miljöer med hög fördröjning till exempel från mobila enheter kommer avsevärt fördelarna med att använda ETGs.</span><span class="sxs-lookup"><span data-stu-id="d89aa-586">Environments with high latencies such as mobile devices will benefit greatly from using ETGs.</span></span>  

##### <span data-ttu-id="d89aa-587"><a name="subheading36"></a>Upsert</span><span class="sxs-lookup"><span data-stu-id="d89aa-587"><a name="subheading36"></a>Upsert</span></span>
<span data-ttu-id="d89aa-588">Användningstabell **Upsert** åtgärder när så är möjligt.</span><span class="sxs-lookup"><span data-stu-id="d89aa-588">Use table **Upsert** operations wherever possible.</span></span> <span data-ttu-id="d89aa-589">Det finns två typer av **Upsert**, som kan vara effektivare än traditionella **infoga** och **uppdatering** åtgärder:</span><span class="sxs-lookup"><span data-stu-id="d89aa-589">There are two types of **Upsert**, both of which can be more efficient than a traditional **Insert** and **Update** operations:</span></span>  

* <span data-ttu-id="d89aa-590">**InsertOrMerge**: Använd det här när du vill tooupload en delmängd av hello Entitetsegenskaper, men är osäker på om hello entiteten finns redan.</span><span class="sxs-lookup"><span data-stu-id="d89aa-590">**InsertOrMerge**: Use this when you want tooupload a subset of hello entity's properties, but aren't sure whether hello entity already exists.</span></span> <span data-ttu-id="d89aa-591">Om hello entiteten finns det här anropet uppdaterar hello egenskaper som ingår i hello **Upsert** åtgärd och lämnar alla befintliga egenskaper som de är, om hello entiteten finns inte, infogas hello ny entitet.</span><span class="sxs-lookup"><span data-stu-id="d89aa-591">If hello entity exists, this call updates hello properties included in hello **Upsert** operation, and leaves all existing properties as they are, if hello entity does not exist, it inserts hello new entity.</span></span> <span data-ttu-id="d89aa-592">Detta är liknande toousing projektion i en fråga i den behöver du bara tooupload hello egenskaper som ändrar.</span><span class="sxs-lookup"><span data-stu-id="d89aa-592">This is similar toousing projection in a query, in that you only need tooupload hello properties that are changing.</span></span>
* <span data-ttu-id="d89aa-593">**InsertOrReplace**: Använd den här när du vill tooupload en helt ny enhet men du är osäker på om den redan finns.</span><span class="sxs-lookup"><span data-stu-id="d89aa-593">**InsertOrReplace**: Use this when you want tooupload an entirely new entity, but you aren't sure whether it already exists.</span></span> <span data-ttu-id="d89aa-594">Du bör endast använda detta när du vet att hello nyligen upp entiteten är helt korrekt eftersom det helt skrivs över hello gamla entitet.</span><span class="sxs-lookup"><span data-stu-id="d89aa-594">You should only use this when you know that hello newly uploaded entity is entirely correct because it completely overwrites hello old entity.</span></span> <span data-ttu-id="d89aa-595">Till exempel önskade tooupdate hello entitet som lagrar användarens aktuella plats oavsett om programmet hello tidigare lagras lokaliseringsuppgifter för hello användaren. hello ny plats entitet är klar och du behöver inte någon information från tidigare entiteter.</span><span class="sxs-lookup"><span data-stu-id="d89aa-595">For example, you want tooupdate hello entity that stores a user's current location regardless of whether or not hello application has previously stored location data for hello user; hello new location entity is complete, and you do not need any information from any previous entity.</span></span>

##### <span data-ttu-id="d89aa-596"><a name="subheading37"></a>Lagra dataserien i en enda entitet</span><span class="sxs-lookup"><span data-stu-id="d89aa-596"><a name="subheading37"></a>Storing Data Series in a Single Entity</span></span>
<span data-ttu-id="d89aa-597">Ibland kan ett program lagrar en serie med data som ofta måste tooretrieve samtidigt: till exempel ett program kan spåra processoranvändning över tid i ordning tooplot ett rullande diagram över hello data från hello senaste 24 timmarna.</span><span class="sxs-lookup"><span data-stu-id="d89aa-597">Sometimes, an application stores a series of data that it frequently needs tooretrieve all at once: for example, an application might track CPU usage over time in order tooplot a rolling chart of hello data from hello last 24 hours.</span></span> <span data-ttu-id="d89aa-598">En metod är toohave en tabell entitet per timme, med varje entitet som representerar en specifik timme och lagrar hello CPU-användning för den timmen.</span><span class="sxs-lookup"><span data-stu-id="d89aa-598">One approach is toohave one table entity per hour, with each entity representing a specific hour and storing hello CPU usage for that hour.</span></span> <span data-ttu-id="d89aa-599">tooplot informationen hello programmet måste tooretrieve hello innehavare hello data från hello de senaste 24 timmarna.</span><span class="sxs-lookup"><span data-stu-id="d89aa-599">tooplot this data, hello application needs tooretrieve hello entities holding hello data from hello 24 most recent hours.</span></span>  

<span data-ttu-id="d89aa-600">Du kan också programmet kan lagra hello CPU-användning för varje timme som en separat av en enda entitet: tooupdate varje timme, ditt program kan använda en enda **InsertOrMerge Upsert** anropa tooupdate hello värdet för hello den senaste timmen.</span><span class="sxs-lookup"><span data-stu-id="d89aa-600">Alternatively, your application could store hello CPU usage for each hour as a separate property of a single entity: tooupdate each hour, your application can use a single **InsertOrMerge Upsert** call tooupdate hello value for hello most recent hour.</span></span> <span data-ttu-id="d89aa-601">tooplot hello data hello räcker tooretrieve en enda entitet i stället för 24, för en mycket effektivt fråga (se ovan diskussion på [fråga scope](#subheading30)).</span><span class="sxs-lookup"><span data-stu-id="d89aa-601">tooplot hello data, hello application only needs tooretrieve a single entity instead of 24, making for a very efficient query (see above discussion on [query scope](#subheading30)).</span></span>

##### <span data-ttu-id="d89aa-602"><a name="subheading38"></a>Lagra strukturerade data i BLOB</span><span class="sxs-lookup"><span data-stu-id="d89aa-602"><a name="subheading38"></a>Storing structured data in blobs</span></span>
<span data-ttu-id="d89aa-603">Ibland strukturerade data känns som det ska gå i tabeller, men intervallen för entiteter hämtas alltid tillsammans och kan batch infogas.</span><span class="sxs-lookup"><span data-stu-id="d89aa-603">Sometimes structured data feels like it should go in tables, but ranges of entities are always retrieved together and can be batch inserted.</span></span>  <span data-ttu-id="d89aa-604">Ett bra exempel på detta är en loggfil.</span><span class="sxs-lookup"><span data-stu-id="d89aa-604">A good example of this is a log file.</span></span>  <span data-ttu-id="d89aa-605">I det här fallet kan du batch-flera minuters loggar, infoga dem och sedan du hämtar alltid flera minuter loggar i taget samt.</span><span class="sxs-lookup"><span data-stu-id="d89aa-605">In this case, you can batch several minutes of logs, insert them, and then you are always retrieving several minutes of logs at a time as well.</span></span>  <span data-ttu-id="d89aa-606">I det här fallet för prestanda är det bättre toouse blobbar i stället för tabeller, eftersom du kan avsevärt minska hello antalet objekt skrivs/returnerade, samt vanligtvis hello antalet begäranden som behöver.</span><span class="sxs-lookup"><span data-stu-id="d89aa-606">In this case, for performance, it's better toouse blobs instead of tables, since you can significantly reduce hello number of objects written/returned, as well as usually hello number of requests that need made.</span></span>  

## <a name="queues"></a><span data-ttu-id="d89aa-607">Köer</span><span class="sxs-lookup"><span data-stu-id="d89aa-607">Queues</span></span>
<span data-ttu-id="d89aa-608">I tillägg toohello beprövade metoder för [alla tjänster](#allservices) som beskrivs ovan, hello beprövade metoder när det gäller specifikt toohello kötjänsten.</span><span class="sxs-lookup"><span data-stu-id="d89aa-608">In addition toohello proven practices for [All Services](#allservices) described previously, hello following proven practices apply specifically toohello queue service.</span></span>  

### <span data-ttu-id="d89aa-609"><a name="subheading39"></a>Skalbarhetsgränser</span><span class="sxs-lookup"><span data-stu-id="d89aa-609"><a name="subheading39"></a>Scalability Limits</span></span>
<span data-ttu-id="d89aa-610">En enskild kö kan bearbeta ungefär 2 000 meddelanden (1KB som är varje) per sekund (varje AddMessage och GetMessage DeleteMessage antal som ett meddelande här).</span><span class="sxs-lookup"><span data-stu-id="d89aa-610">A single queue can process approximately 2,000 messages (1KB each) per second (each AddMessage, GetMessage, and DeleteMessage count as a message here).</span></span> <span data-ttu-id="d89aa-611">Om detta inte är tillräckligt för ditt program bör du använda flera köer och sprids dem hälsningsmeddelande.</span><span class="sxs-lookup"><span data-stu-id="d89aa-611">If this is insufficient for your application, you should use multiple queues and spread hello messages across them.</span></span>  

<span data-ttu-id="d89aa-612">Visa den aktuella skalbarhetsmål på [Azure Storage skalbarhets- och prestandamål](storage-scalability-targets.md).</span><span class="sxs-lookup"><span data-stu-id="d89aa-612">View current scalability targets at [Azure Storage Scalability and Performance Targets](storage-scalability-targets.md).</span></span>  

### <span data-ttu-id="d89aa-613"><a name="subheading40"></a>Nagle ut</span><span class="sxs-lookup"><span data-stu-id="d89aa-613"><a name="subheading40"></a>Nagle Off</span></span>
<span data-ttu-id="d89aa-614">Avsnittet hello på konfigurationen som beskrivs hello Nagle algoritmen – hello Nagle algoritmen är vanligtvis bra för hello prestanda för kön begäranden och bör du inaktivera den.</span><span class="sxs-lookup"><span data-stu-id="d89aa-614">See hello section on table configuration that discusses hello Nagle algorithm — hello Nagle algorithm is generally bad for hello performance of queue requests, and you should disable it.</span></span>  

### <span data-ttu-id="d89aa-615"><a name="subheading41"></a>Meddelandestorlek</span><span class="sxs-lookup"><span data-stu-id="d89aa-615"><a name="subheading41"></a>Message Size</span></span>
<span data-ttu-id="d89aa-616">Kön prestanda och skalbarhet minskas när meddelandet storlek ökar.</span><span class="sxs-lookup"><span data-stu-id="d89aa-616">Queue performance and scalability decreases as message size increases.</span></span> <span data-ttu-id="d89aa-617">Du bör placera endast hello information hello mottagaren måste i ett meddelande.</span><span class="sxs-lookup"><span data-stu-id="d89aa-617">You should place only hello information hello receiver needs in a message.</span></span>  

### <span data-ttu-id="d89aa-618"><a name="subheading42"></a>Batch-hämtning</span><span class="sxs-lookup"><span data-stu-id="d89aa-618"><a name="subheading42"></a>Batch Retrieval</span></span>
<span data-ttu-id="d89aa-619">Du kan hämta in too32 meddelanden från en kö i en enda åtgärd.</span><span class="sxs-lookup"><span data-stu-id="d89aa-619">You can retrieve up too32 messages from a queue in a single operation.</span></span> <span data-ttu-id="d89aa-620">Detta kan minska hello antalet turer fram och tillbaka från hello klientprogrammet, vilket är särskilt användbart för företagsmiljöer, t.ex mobila enheter med hög latens.</span><span class="sxs-lookup"><span data-stu-id="d89aa-620">This can reduce hello number of roundtrips from hello client application, which is especially useful for environments, such as mobile devices, with high latency.</span></span>  

### <span data-ttu-id="d89aa-621"><a name="subheading43"></a>Avsökningsintervall för kön</span><span class="sxs-lookup"><span data-stu-id="d89aa-621"><a name="subheading43"></a>Queue Polling Interval</span></span>
<span data-ttu-id="d89aa-622">De flesta program att söka efter meddelanden från en kö som kan vara något av hello största källor till transaktioner för programmet.</span><span class="sxs-lookup"><span data-stu-id="d89aa-622">Most applications poll for messages from a queue, which can be one of hello largest sources of transactions for that application.</span></span> <span data-ttu-id="d89aa-623">Välj din avsökningsintervallet klokt: avsökning för ofta kan leda till att dina program tooapproach hello skalbarhetsmål för hello kö.</span><span class="sxs-lookup"><span data-stu-id="d89aa-623">Select your polling interval wisely: polling too frequently could cause your application tooapproach hello scalability targets for hello queue.</span></span> <span data-ttu-id="d89aa-624">På 200 000 transaktioner för $0,01 (för närvarande hello skrivning) är en enskild processor avsökning när varje sekund för en månad skulle kosta mindre än 15 cent så kostnaden dock inte vanligtvis en faktor som påverkar ditt val av avsökningsintervallet.</span><span class="sxs-lookup"><span data-stu-id="d89aa-624">However, at 200,000 transactions for $0.01 (at hello time of writing), a single processor polling once every second for a month would cost less than 15 cents so cost is not typically a factor that affects your choice of polling interval.</span></span>  

<span data-ttu-id="d89aa-625">Uppdaterade kostnadsinformation finns [priser för Azure Storage](https://azure.microsoft.com/pricing/details/storage/).</span><span class="sxs-lookup"><span data-stu-id="d89aa-625">For up-to-date cost information, see [Azure Storage Pricing](https://azure.microsoft.com/pricing/details/storage/).</span></span>  

### <span data-ttu-id="d89aa-626"><a name="subheading44"></a>UpdateMessage</span><span class="sxs-lookup"><span data-stu-id="d89aa-626"><a name="subheading44"></a>UpdateMessage</span></span>
<span data-ttu-id="d89aa-627">Du kan använda **UpdateMessage** tooincrease hello osynlighet timeout eller tooupdate statusinformation för ett meddelande.</span><span class="sxs-lookup"><span data-stu-id="d89aa-627">You can use **UpdateMessage** tooincrease hello invisibility timeout or tooupdate state information of a message.</span></span> <span data-ttu-id="d89aa-628">Detta är kraftfulla, Kom ihåg att varje **UpdateMessage** åtgärden räknar mot hello skalbarhet mål.</span><span class="sxs-lookup"><span data-stu-id="d89aa-628">While this is powerful, remember that each **UpdateMessage** operation counts towards hello scalability target.</span></span> <span data-ttu-id="d89aa-629">Det kan dock vara ett mycket effektivare sätt än med ett arbetsflöde som skickar ett jobb från en kö toohello därefter som varje steg i hello jobbet har slutförts.</span><span class="sxs-lookup"><span data-stu-id="d89aa-629">However, this can be a much more efficient approach than having a workflow that passes a job from one queue toohello next, as each step of hello job is completed.</span></span> <span data-ttu-id="d89aa-630">Med hjälp av hello **UpdateMessage** åtgärden gör att din ansökan toosave jobbet tillstånd toohello hälsningsmeddelande och sedan fortsätta arbeta i stället för nytt queuing hello-meddelande för hello nästa steg i hello jobb varje gång ett steg har slutförts.</span><span class="sxs-lookup"><span data-stu-id="d89aa-630">Using hello **UpdateMessage** operation allows your application toosave hello job state toohello message and then continue working, instead of re-queuing hello message for hello next step of hello job every time a step completes.</span></span>  

<span data-ttu-id="d89aa-631">Mer information finns i artikeln hello [så här: ändra hello innehållet i ett meddelande i kön](storage-dotnet-how-to-use-queues.md#change-the-contents-of-a-queued-message).</span><span class="sxs-lookup"><span data-stu-id="d89aa-631">For more information, see hello article [How to: Change hello contents of a queued message](storage-dotnet-how-to-use-queues.md#change-the-contents-of-a-queued-message).</span></span>  

### <span data-ttu-id="d89aa-632"><a name="subheading45"></a>Programarkitektur</span><span class="sxs-lookup"><span data-stu-id="d89aa-632"><a name="subheading45"></a>Application architecture</span></span>
<span data-ttu-id="d89aa-633">Du bör använda köer toomake din skalbar arkitektur för programmet.</span><span class="sxs-lookup"><span data-stu-id="d89aa-633">You should use queues toomake your application architecture scalable.</span></span> <span data-ttu-id="d89aa-634">hello nedan visas några metoder som du kan använda köer toomake programmet mer skalbar:</span><span class="sxs-lookup"><span data-stu-id="d89aa-634">hello following lists some ways you can use queues toomake your application more scalable:</span></span>  

* <span data-ttu-id="d89aa-635">Du kan använda köer toocreate eftersläpningar arbete för bearbetning och Utjämna arbetsbelastningar i ditt program.</span><span class="sxs-lookup"><span data-stu-id="d89aa-635">You can use queues toocreate backlogs of work for processing and smooth out workloads in your application.</span></span> <span data-ttu-id="d89aa-636">Du kan till exempel köa begäranden från användare tooperform processorn arbetar, till exempel storleksändring överförda bilder.</span><span class="sxs-lookup"><span data-stu-id="d89aa-636">For example, you could queue up requests from users tooperform processor intensive work such as resizing uploaded images.</span></span>
* <span data-ttu-id="d89aa-637">Du kan använda köer toodecouple delar av ditt program så att du kan skala oberoende av varandra.</span><span class="sxs-lookup"><span data-stu-id="d89aa-637">You can use queues toodecouple parts of your application so that you can scale them independently.</span></span> <span data-ttu-id="d89aa-638">Till exempel placera en webbklientdel undersökningsresultat från användare i en kö för senare analys och lagring.</span><span class="sxs-lookup"><span data-stu-id="d89aa-638">For example, a web front-end could place survey results from users into a queue for later analysis and storage.</span></span> <span data-ttu-id="d89aa-639">Du kan lägga till flera worker-rollen instanser tooprocess hello kön data vid behov.</span><span class="sxs-lookup"><span data-stu-id="d89aa-639">You could add more worker role instances tooprocess hello queue data as required.</span></span>  

## <a name="conclusion"></a><span data-ttu-id="d89aa-640">Slutsats</span><span class="sxs-lookup"><span data-stu-id="d89aa-640">Conclusion</span></span>
<span data-ttu-id="d89aa-641">Den här artikeln beskrivs några av de vanligaste hello beprövade metoder för att optimera prestanda när du använder Azure Storage.</span><span class="sxs-lookup"><span data-stu-id="d89aa-641">This article discussed some of hello most common, proven practices for optimizing performance when using Azure Storage.</span></span> <span data-ttu-id="d89aa-642">Vi uppmuntra varje program developer tooassess sina program mot varje hello ovan praxis och Överväg fungerar på hello rekommendationer tooget utmärkt prestanda för de program som använder Azure Storage.</span><span class="sxs-lookup"><span data-stu-id="d89aa-642">We encourage every application developer tooassess their application against each of hello above practices and consider acting on hello recommendations tooget great performance for their applications that use Azure Storage.</span></span>

---
title: "Stöd för aaaCross-Origin Resource delning (CORS) | Microsoft Docs"
description: "Lär dig hur tooenable CORS-stöd för hello Microsoft Azure Storage-tjänster."
services: storage
documentationcenter: .net
author: cbrooksmsft
manager: carmonm
editor: tysonn
ms.assetid: a0229595-5b64-4898-b8d6-fa2625ea6887
ms.service: storage
ms.workload: storage
ms.tgt_pltfrm: na
ms.devlang: dotnet
ms.topic: article
ms.date: 2/22/2017
ms.author: cbrooks
ms.openlocfilehash: 0a6ec3bf6999c5faa7f0912dc2a47921aa01d3d4
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: sv-SE
ms.lasthandoff: 10/06/2017
---
# <a name="cross-origin-resource-sharing-cors-support-for-hello-azure-storage-services"></a><span data-ttu-id="d15b1-103">Stöd för Cross-Origin Resource Sharing (CORS) för hello Azure Storage-tjänster</span><span class="sxs-lookup"><span data-stu-id="d15b1-103">Cross-Origin Resource Sharing (CORS) Support for hello Azure Storage Services</span></span>
<span data-ttu-id="d15b1-104">Från och med version 2013-08-15, stöd hello Azure-lagringstjänster för Cross-Origin Resource Sharing (CORS) för hello Blob, tabell, kö och filen tjänster.</span><span class="sxs-lookup"><span data-stu-id="d15b1-104">Beginning with version 2013-08-15, hello Azure storage services support Cross-Origin Resource Sharing (CORS) for hello Blob, Table, Queue, and File services.</span></span> <span data-ttu-id="d15b1-105">CORS är en HTTP-funktion som gör att ett webbprogram som körs i en domän tooaccess resurser i en annan domän.</span><span class="sxs-lookup"><span data-stu-id="d15b1-105">CORS is an HTTP feature that enables a web application running under one domain tooaccess resources in another domain.</span></span> <span data-ttu-id="d15b1-106">Webbläsare som implementerar en säkerhetsbegränsningar som kallas [samma ursprung princip](http://www.w3.org/Security/wiki/Same_Origin_Policy) som förhindrar att en webbsida från anropa API: er i en annan domän. CORS ger ett säkert sätt tooallow en domän (hello ursprungsdomän) toocall API: er i en annan domän.</span><span class="sxs-lookup"><span data-stu-id="d15b1-106">Web browsers implement a security restriction known as [same-origin policy](http://www.w3.org/Security/wiki/Same_Origin_Policy) that prevents a web page from calling APIs in a different domain; CORS provides a secure way tooallow one domain (hello origin domain) toocall APIs in another domain.</span></span> <span data-ttu-id="d15b1-107">Se hello [CORS-specifikationen](http://www.w3.org/TR/cors/) information om CORS.</span><span class="sxs-lookup"><span data-stu-id="d15b1-107">See hello [CORS specification](http://www.w3.org/TR/cors/) for details on CORS.</span></span>

<span data-ttu-id="d15b1-108">Du kan ange CORS-regler individuellt för varje hello storage-tjänster genom att anropa [ange egenskaper för Blob-tjänsten](https://msdn.microsoft.com/library/hh452235.aspx), [ange egenskaper för kön Service](https://msdn.microsoft.com/library/hh452232.aspx), och [ange tjänsten Tabellegenskaper](https://msdn.microsoft.com/library/hh452240.aspx).</span><span class="sxs-lookup"><span data-stu-id="d15b1-108">You can set CORS rules individually for each of hello storage services, by calling [Set Blob Service Properties](https://msdn.microsoft.com/library/hh452235.aspx), [Set Queue Service Properties](https://msdn.microsoft.com/library/hh452232.aspx), and [Set Table Service Properties](https://msdn.microsoft.com/library/hh452240.aspx).</span></span> <span data-ttu-id="d15b1-109">När du har angett hello CORS-regler för hello tjänsten kommer en korrekt autentiserad begäran mot hello tjänsten från en annan domän att utvärderade toodetermine om det är tillåtet enligt toohello regler som du har angett.</span><span class="sxs-lookup"><span data-stu-id="d15b1-109">Once you set hello CORS rules for hello service, then a properly authenticated request made against hello service from a different domain will be evaluated toodetermine whether it is allowed according toohello rules you have specified.</span></span>

> [!NOTE]
> <span data-ttu-id="d15b1-110">Observera att CORS inte är en autentiseringsmetod.</span><span class="sxs-lookup"><span data-stu-id="d15b1-110">Note that CORS is not an authentication mechanism.</span></span> <span data-ttu-id="d15b1-111">Alla förfrågningar som görs mot en lagringsresurs när CORS är aktiverat måste antingen ha en korrekt autentisering signatur eller måste göras mot en offentlig resurs.</span><span class="sxs-lookup"><span data-stu-id="d15b1-111">Any request made against a storage resource when CORS is enabled must either have a proper authentication signature, or must be made against a public resource.</span></span>
> 
> 

## <a name="understanding-cors-requests"></a><span data-ttu-id="d15b1-112">Förstå CORS-begäranden</span><span class="sxs-lookup"><span data-stu-id="d15b1-112">Understanding CORS requests</span></span>
<span data-ttu-id="d15b1-113">En CORS-begäran från en ursprungsdomän kan bestå av två separata begäranden:</span><span class="sxs-lookup"><span data-stu-id="d15b1-113">A CORS request from an origin domain may consist of two separate requests:</span></span>

* <span data-ttu-id="d15b1-114">En preflight-begäran som frågar hello CORS begränsningar av hello-tjänsten.</span><span class="sxs-lookup"><span data-stu-id="d15b1-114">A preflight request, which queries hello CORS restrictions imposed by hello service.</span></span> <span data-ttu-id="d15b1-115">hello preflight-begäran krävs om hello begäran metoden är en [enkel metod](http://www.w3.org/TR/cors/), vilket innebär att GET, HEAD eller POST.</span><span class="sxs-lookup"><span data-stu-id="d15b1-115">hello preflight request is required unless hello request method is a [simple method](http://www.w3.org/TR/cors/), meaning GET, HEAD, or POST.</span></span>
* <span data-ttu-id="d15b1-116">hello faktiska begäran görs mot hello önskade resurs.</span><span class="sxs-lookup"><span data-stu-id="d15b1-116">hello actual request, made against hello desired resource.</span></span>

### <a name="preflight-request"></a><span data-ttu-id="d15b1-117">Preflight-begäran</span><span class="sxs-lookup"><span data-stu-id="d15b1-117">Preflight request</span></span>
<span data-ttu-id="d15b1-118">hello preflight-begäran frågor hello CORS begränsningar som har upprättats för hello lagring av hello Kontoägare.</span><span class="sxs-lookup"><span data-stu-id="d15b1-118">hello preflight request queries hello CORS restrictions that have been established for hello storage service by hello account owner.</span></span> <span data-ttu-id="d15b1-119">hello webbläsare (eller andra användaragent) skickar en alternativ-begäran som innehåller hello begärandehuvuden, metod och ursprung domän.</span><span class="sxs-lookup"><span data-stu-id="d15b1-119">hello web browser (or other user agent) sends an OPTIONS request that includes hello request headers, method and origin domain.</span></span> <span data-ttu-id="d15b1-120">hello lagringstjänsten utvärderar hello avsedda åtgärden baserat på en förkonfigurerad uppsättning CORS-regler som anger vilka ursprungsdomäner och begära metoder och begärandehuvuden kan anges för en faktiska begäran mot en lagringsresurs.</span><span class="sxs-lookup"><span data-stu-id="d15b1-120">hello storage service evaluates hello intended operation based on a pre-configured set of CORS rules that specify which origin domains, request methods, and request headers may be specified on an actual request against a storage resource.</span></span>

<span data-ttu-id="d15b1-121">Om CORS har aktiverats för hello-tjänsten och det finns en CORS-regel som matchar hello preflight-begäran, hello-tjänsten svarar med statuskod 200 (OK) och inkluderar hello krävs åtkomstkontroll rubriker hello svar.</span><span class="sxs-lookup"><span data-stu-id="d15b1-121">If CORS is enabled for hello service and there is a CORS rule that matches hello preflight request, hello service responds with status code 200 (OK), and includes hello required Access-Control headers in hello response.</span></span>

<span data-ttu-id="d15b1-122">Om CORS inte har aktiverats för hello tjänsten eller inga CORS-regeln matchar hello preflight-begäran, svarar hello-tjänsten med statuskod 403 (förbjuden).</span><span class="sxs-lookup"><span data-stu-id="d15b1-122">If CORS is not enabled for hello service or no CORS rule matches hello preflight request, hello service will respond with status code 403 (Forbidden).</span></span>

<span data-ttu-id="d15b1-123">Om hello OPTIONS-begäran inte innehåller hello krävs CORS huvuden (hello ursprung och --begäran-metoden för åtkomstkontroll huvuden), svarar hello-tjänsten med statuskod: 400 (felaktig begäran).</span><span class="sxs-lookup"><span data-stu-id="d15b1-123">If hello OPTIONS request doesn't contain hello required CORS headers (hello Origin and Access-Control-Request-Method headers), hello service will respond with status code 400 (Bad request).</span></span>

<span data-ttu-id="d15b1-124">Observera att en preflight-begäran ska utvärderas mot hello-tjänsten (Blob, köer och tabell) och inte mot hello begärd resurs.</span><span class="sxs-lookup"><span data-stu-id="d15b1-124">Note that a preflight request is evaluated against hello service (Blob, Queue, and Table) and not against hello requested resource.</span></span> <span data-ttu-id="d15b1-125">Hej kontoägaren måste ha aktiverat CORS som en del av hello service egenskaper för hello begäran toosucceed.</span><span class="sxs-lookup"><span data-stu-id="d15b1-125">hello account owner must have enabled CORS as part of hello account service properties in order for hello request toosucceed.</span></span>

### <a name="actual-request"></a><span data-ttu-id="d15b1-126">Faktiska begäran</span><span class="sxs-lookup"><span data-stu-id="d15b1-126">Actual request</span></span>
<span data-ttu-id="d15b1-127">När hello preflight-begäran har godkänts och hello svar returneras skickar hello webbläsaren hello faktiska begäran mot hello storage-resursen.</span><span class="sxs-lookup"><span data-stu-id="d15b1-127">Once hello preflight request is accepted and hello response is returned, hello browser will dispatch hello actual request against hello storage resource.</span></span> <span data-ttu-id="d15b1-128">hello webbläsare kommer att neka hello faktiska begäran omedelbart om hello preflight-begäran avvisas.</span><span class="sxs-lookup"><span data-stu-id="d15b1-128">hello browser will deny hello actual request immediately if hello preflight request is rejected.</span></span>

<span data-ttu-id="d15b1-129">hello faktiska begäran behandlas som normal begäran mot hello storage-tjänst.</span><span class="sxs-lookup"><span data-stu-id="d15b1-129">hello actual request is treated as normal request against hello storage service.</span></span> <span data-ttu-id="d15b1-130">hello förekomst av hello ursprung huvudet anger att hello-begäran är en CORS-begäran och hello tjänsten kontrollerar hello CORS-regler för matchning.</span><span class="sxs-lookup"><span data-stu-id="d15b1-130">hello presence of hello Origin header indicates that hello request is a CORS request and hello service will check hello matching CORS rules.</span></span> <span data-ttu-id="d15b1-131">Om en matchning hittas hello åtkomstkontroll huvuden tillagda toohello svar och skickas tillbaka toohello klienten.</span><span class="sxs-lookup"><span data-stu-id="d15b1-131">If a match is found, hello Access-Control headers are added toohello response and sent back toohello client.</span></span> <span data-ttu-id="d15b1-132">Om en matchning hittas returneras inte hello CORS-åtkomstkontroll huvuden.</span><span class="sxs-lookup"><span data-stu-id="d15b1-132">If a match is not found, hello CORS Access-Control headers are not returned.</span></span>

## <a name="enabling-cors-for-hello-azure-storage-services"></a><span data-ttu-id="d15b1-133">Aktivera CORS för hello Azure Storage-tjänster</span><span class="sxs-lookup"><span data-stu-id="d15b1-133">Enabling CORS for hello Azure Storage services</span></span>
<span data-ttu-id="d15b1-134">CORS-regler är inställda på hello servicenivå, så du behöver tooenable eller inaktivera CORS för varje tjänst (Blob, köer och tabellen) separat.</span><span class="sxs-lookup"><span data-stu-id="d15b1-134">CORS rules are set at hello service level, so you need tooenable or disable CORS for each service (Blob, Queue and Table) separately.</span></span> <span data-ttu-id="d15b1-135">Som standard inaktiveras CORS för varje tjänst.</span><span class="sxs-lookup"><span data-stu-id="d15b1-135">By default, CORS is disabled for each service.</span></span> <span data-ttu-id="d15b1-136">tooenable CORS måste tooset hello lämpliga egenskaper med version 2013-08-15 eller senare, och Lägg till CORS regler toohello tjänstegenskaper.</span><span class="sxs-lookup"><span data-stu-id="d15b1-136">tooenable CORS, you need tooset hello appropriate service properties using version 2013-08-15 or later, and add CORS rules toohello service properties.</span></span> <span data-ttu-id="d15b1-137">Mer information om hur tooenable eller inaktivera CORS för en tjänst och hur tooset CORS regler, kontrollera finns för[ange egenskaper för Blob-tjänsten](https://msdn.microsoft.com/library/hh452235.aspx), [ange egenskaper för kön Service](https://msdn.microsoft.com/library/hh452232.aspx), och [ange tabell Egenskaper](https://msdn.microsoft.com/library/hh452240.aspx).</span><span class="sxs-lookup"><span data-stu-id="d15b1-137">For details about how tooenable or disable CORS for a service and how tooset CORS rules, please refer too[Set Blob Service Properties](https://msdn.microsoft.com/library/hh452235.aspx), [Set Queue Service Properties](https://msdn.microsoft.com/library/hh452232.aspx), and [Set Table Service Properties](https://msdn.microsoft.com/library/hh452240.aspx).</span></span>

<span data-ttu-id="d15b1-138">Här är ett exempel på en enda CORS-regel som angetts via en åtgärden Ange egenskaper för tjänsten:</span><span class="sxs-lookup"><span data-stu-id="d15b1-138">Here is a sample of a single CORS rule, specified via a Set Service Properties operation:</span></span>

```xml
<Cors>    
    <CorsRule>
        <AllowedOrigins>http://www.contoso.com, http://www.fabrikam.com</AllowedOrigins>
        <AllowedMethods>PUT,GET</AllowedMethods>
        <AllowedHeaders>x-ms-meta-data*,x-ms-meta-target*,x-ms-meta-abc</AllowedHeaders>
        <ExposedHeaders>x-ms-meta-*</ExposedHeaders>
        <MaxAgeInSeconds>200</MaxAgeInSeconds>
    </CorsRule>
<Cors>
```

<span data-ttu-id="d15b1-139">Varje element som ingår i hello CORS regeln beskrivs nedan:</span><span class="sxs-lookup"><span data-stu-id="d15b1-139">Each element included in hello CORS rule is described below:</span></span>

* <span data-ttu-id="d15b1-140">**AllowedOrigins**: hello ursprungsdomäner som tillåts toomake en begäran mot hello storage-tjänsten via CORS.</span><span class="sxs-lookup"><span data-stu-id="d15b1-140">**AllowedOrigins**: hello origin domains that are permitted toomake a request against hello storage service via CORS.</span></span> <span data-ttu-id="d15b1-141">hello är ursprung hello-domän som begäran kommer från vilka hello.</span><span class="sxs-lookup"><span data-stu-id="d15b1-141">hello origin domain is hello domain from which hello request originates.</span></span> <span data-ttu-id="d15b1-142">Observera att hello ursprung måste vara en exakt skiftlägeskänslig matchning med hello ursprung att hello användaren ålder skickar toohello service.</span><span class="sxs-lookup"><span data-stu-id="d15b1-142">Note that hello origin must be an exact case-sensitive match with hello origin that hello user age sends toohello service.</span></span> <span data-ttu-id="d15b1-143">Du kan också använda hello jokertecknet ' *' tooallow alla ursprung domäner toomake begäranden via CORS.</span><span class="sxs-lookup"><span data-stu-id="d15b1-143">You can also use hello wildcard character '*' tooallow all origin domains toomake requests via CORS.</span></span> <span data-ttu-id="d15b1-144">Hej domäner i hello-exemplet ovan, [http://www.contoso.com](http://www.contoso.com) och [http://www.fabrikam.com](http://www.fabrikam.com) kan göra förfrågningar mot hello-tjänsten med hjälp av CORS.</span><span class="sxs-lookup"><span data-stu-id="d15b1-144">In hello example above, hello domains [http://www.contoso.com](http://www.contoso.com) and [http://www.fabrikam.com](http://www.fabrikam.com) can make requests against hello service using CORS.</span></span>
* <span data-ttu-id="d15b1-145">**AllowedMethods**: hello metoder (http-begäran verb) hello ursprungsdomänen kan använda för en CORS-begäran.</span><span class="sxs-lookup"><span data-stu-id="d15b1-145">**AllowedMethods**: hello methods (HTTP request verbs) that hello origin domain may use for a CORS request.</span></span> <span data-ttu-id="d15b1-146">I hello-exemplet ovan tillåts bara PUT- och GET-begäranden.</span><span class="sxs-lookup"><span data-stu-id="d15b1-146">In hello example above, only PUT and GET requests are permitted.</span></span>
* <span data-ttu-id="d15b1-147">**AllowedHeaders**: hello begärandehuvuden hello ursprungsdomänen får ange på hello CORS-begäran.</span><span class="sxs-lookup"><span data-stu-id="d15b1-147">**AllowedHeaders**: hello request headers that hello origin domain may specify on hello CORS request.</span></span> <span data-ttu-id="d15b1-148">Alla metadata huvuden som börjar med x-ms-metadata, x-ms-meta-mål- och x-ms-meta-abc i hello exemplet ovan är tillåtna.</span><span class="sxs-lookup"><span data-stu-id="d15b1-148">In hello example above, all metadata headers starting with x-ms-meta-data, x-ms-meta-target, and x-ms-meta-abc are permitted.</span></span> <span data-ttu-id="d15b1-149">Observera att hello jokertecknet ' *' anger att alla huvud som börjar med hello angetts prefix är tillåtet.</span><span class="sxs-lookup"><span data-stu-id="d15b1-149">Note that hello wildcard character '*' indicates that any header beginning with hello specified prefix is allowed.</span></span>
* <span data-ttu-id="d15b1-150">**ExposedHeaders**: hello svarshuvuden som kan skickas i hello svar toohello CORS begäran och visas av hello webbläsare toohello begäran utfärdare.</span><span class="sxs-lookup"><span data-stu-id="d15b1-150">**ExposedHeaders**: hello response headers that may be sent in hello response toohello CORS request and exposed by hello browser toohello request issuer.</span></span> <span data-ttu-id="d15b1-151">Hello-exemplet ovan, hello webbläsaren är instrueras tooexpose alla huvud som börjar med x-ms-metadata.</span><span class="sxs-lookup"><span data-stu-id="d15b1-151">In hello example above, hello browser is instructed tooexpose any header beginning with x-ms-meta.</span></span>
* <span data-ttu-id="d15b1-152">**MaxAgeInSeconds**: hello längsta tid att webbläsaren ska cachelagrar hello preliminära OPTIONS-begäran.</span><span class="sxs-lookup"><span data-stu-id="d15b1-152">**MaxAgeInSeconds**: hello maximum amount time that a browser should cache hello preflight OPTIONS request.</span></span>

<span data-ttu-id="d15b1-153">hello Azure-lagringstjänster stöd för att ange prefix huvuden för båda hello **AllowedHeaders** och **ExposedHeaders** element.</span><span class="sxs-lookup"><span data-stu-id="d15b1-153">hello Azure storage services support specifying prefixed headers for both hello **AllowedHeaders** and **ExposedHeaders** elements.</span></span> <span data-ttu-id="d15b1-154">Du kan ange en gemensam prefixet toothat kategori tooallow en kategori av huvuden.</span><span class="sxs-lookup"><span data-stu-id="d15b1-154">tooallow a category of headers, you can specify a common prefix toothat category.</span></span> <span data-ttu-id="d15b1-155">Ange till exempel *x-ms-meta** som ett prefix huvud upprättar en regel som matchar alla huvuden som börjar med x-ms-metadata.</span><span class="sxs-lookup"><span data-stu-id="d15b1-155">For example, specifying *x-ms-meta** as a prefixed header establishes a rule that will match all headers that begin with x-ms-meta.</span></span>

<span data-ttu-id="d15b1-156">hello följande begränsningar gäller tooCORS regler:</span><span class="sxs-lookup"><span data-stu-id="d15b1-156">hello following limitations apply tooCORS rules:</span></span>

* <span data-ttu-id="d15b1-157">Du kan ange upp toofive CORS-regler per lagringstjänsten (Blob, tabeller och köer).</span><span class="sxs-lookup"><span data-stu-id="d15b1-157">You can specify up toofive CORS rules per storage service (Blob, Table, and Queue).</span></span>
* <span data-ttu-id="d15b1-158">hello maximal storlek för alla CORS regler inställningar på hello begäran, exklusive XML-taggar får inte överstiga 2 KB.</span><span class="sxs-lookup"><span data-stu-id="d15b1-158">hello maximum size of all CORS rules settings on hello request, excluding XML tags, should not exceed 2 KB.</span></span>
* <span data-ttu-id="d15b1-159">hello en tillåtna sidhuvud, exponerade sidhuvud eller tillåtna ursprung kan inte vara längre än 256 tecken.</span><span class="sxs-lookup"><span data-stu-id="d15b1-159">hello length of an allowed header, exposed header, or allowed origin should not exceed 256 characters.</span></span>
* <span data-ttu-id="d15b1-160">Tillåtna sidhuvuden och exponerade huvuden kan vara antingen:</span><span class="sxs-lookup"><span data-stu-id="d15b1-160">Allowed headers and exposed headers may be either:</span></span>
  * <span data-ttu-id="d15b1-161">Literalen sidhuvud, där hello exakt huvudets namn tillhandahålls som **x-ms-meta-bearbetas**.</span><span class="sxs-lookup"><span data-stu-id="d15b1-161">Literal headers, where hello exact header name is provided, such as **x-ms-meta-processed**.</span></span> <span data-ttu-id="d15b1-162">Högst 64 literal huvuden kan anges på hello-begäran.</span><span class="sxs-lookup"><span data-stu-id="d15b1-162">A maximum of 64 literal headers may be specified on hello request.</span></span>
  * <span data-ttu-id="d15b1-163">Prefixet sidhuvud, där prefixet hello sidhuvud tillhandahålls som **x-ms-metadata***.</span><span class="sxs-lookup"><span data-stu-id="d15b1-163">Prefixed headers, where a prefix of hello header is provided, such as **x-ms-meta-data***.</span></span> <span data-ttu-id="d15b1-164">Ange ett prefix i det här sättet tillåter eller visar de huvuden som börjar med hello angivna prefix.</span><span class="sxs-lookup"><span data-stu-id="d15b1-164">Specifying a prefix in this manner allows or exposes any header that begins with hello given prefix.</span></span> <span data-ttu-id="d15b1-165">Högst två prefix huvuden kan anges på hello-begäran.</span><span class="sxs-lookup"><span data-stu-id="d15b1-165">A maximum of two prefixed headers may be specified on hello request.</span></span>
* <span data-ttu-id="d15b1-166">Hej metoder (eller HTTP-verb) som angetts i hello **AllowedMethods** element måste uppfylla toohello metoder som stöds av Azure storage-tjänst API: er.</span><span class="sxs-lookup"><span data-stu-id="d15b1-166">hello methods (or HTTP verbs) specified in hello **AllowedMethods** element must conform toohello methods supported by Azure storage service APIs.</span></span> <span data-ttu-id="d15b1-167">Metoder som stöds är DELETE, GET, HEAD, MERGE, POST, alternativ och PUT.</span><span class="sxs-lookup"><span data-stu-id="d15b1-167">Supported methods are DELETE, GET, HEAD, MERGE, POST, OPTIONS and PUT.</span></span>

## <a name="understanding-cors-rule-evaluation-logic"></a><span data-ttu-id="d15b1-168">Förstå CORS regellogik utvärdering</span><span class="sxs-lookup"><span data-stu-id="d15b1-168">Understanding CORS rule evaluation logic</span></span>
<span data-ttu-id="d15b1-169">När storage-tjänst tar emot en begäran preliminära eller faktiska, utvärderar begäran baserat på hello CORS-regler som du har skapat för hello-tjänsten via hello lämpliga egenskaper för tjänsten igen.</span><span class="sxs-lookup"><span data-stu-id="d15b1-169">When a storage service receives a preflight or actual request, it evaluates that request based on hello CORS rules you have established for hello service via hello appropriate Set Service Properties operation.</span></span> <span data-ttu-id="d15b1-170">CORS-regler utvärderas i hello ordning som de har ställts in i hello begäran brödtext hello åtgärden Ange egenskaper för tjänsten.</span><span class="sxs-lookup"><span data-stu-id="d15b1-170">CORS rules are evaluated in hello order in which they were set in hello request body of hello Set Service Properties operation.</span></span>

<span data-ttu-id="d15b1-171">CORS-regler utvärderas enligt följande:</span><span class="sxs-lookup"><span data-stu-id="d15b1-171">CORS rules are evaluated as follows:</span></span>

1. <span data-ttu-id="d15b1-172">Först hello ursprungsdomän hello begäran kontrolleras mot hello-domäner som anges för hello **AllowedOrigins** element.</span><span class="sxs-lookup"><span data-stu-id="d15b1-172">First, hello origin domain of hello request is checked against hello domains listed for hello **AllowedOrigins** element.</span></span> <span data-ttu-id="d15b1-173">Om hello ursprungsdomän ingår i listan hello eller alla domäner tillåts med hello jokertecknet ' *', regler utvärdering fortsätter.</span><span class="sxs-lookup"><span data-stu-id="d15b1-173">If hello origin domain is included in hello list, or all domains are allowed with hello wildcard character '*', then rules evaluation proceeds.</span></span> <span data-ttu-id="d15b1-174">Om hello ursprungsdomän inte är inkluderad misslyckas hello begäran.</span><span class="sxs-lookup"><span data-stu-id="d15b1-174">If hello origin domain is not included, then hello request fails.</span></span>
2. <span data-ttu-id="d15b1-175">Därefter hello-metoden (eller HTTP-verb) för hello begäran kontrolleras mot hello metoder som anges i hello **AllowedMethods** element.</span><span class="sxs-lookup"><span data-stu-id="d15b1-175">Next, hello method (or HTTP verb) of hello request is checked against hello methods listed in hello **AllowedMethods** element.</span></span> <span data-ttu-id="d15b1-176">Om hello metoden ingår i hello listan, fortsätter regler utvärdering; annars misslyckas hello-begäran.</span><span class="sxs-lookup"><span data-stu-id="d15b1-176">If hello method is included in hello list, then rules evaluation proceeds; if not, then hello request fails.</span></span>
3. <span data-ttu-id="d15b1-177">Om hello-begäran matchar en regel i sin ursprungliga domän och dess metod, regeln är valda tooprocess hello begäran och inga ytterligare regler utvärderas.</span><span class="sxs-lookup"><span data-stu-id="d15b1-177">If hello request matches a rule in its origin domain and its method, that rule is selected tooprocess hello request and no further rules are evaluated.</span></span> <span data-ttu-id="d15b1-178">Innan hello begäran kan fungera dock huvuden som anges i begäran Hej kontrolleras mot hello rubriker som finns i hello **AllowedHeaders** element.</span><span class="sxs-lookup"><span data-stu-id="d15b1-178">Before hello request can succeed, however, any headers specified on hello request are checked against hello headers listed in hello **AllowedHeaders** element.</span></span> <span data-ttu-id="d15b1-179">Hello begäran misslyckas om hello tillåtna huvuden inte matchar hello-huvuden som skickas.</span><span class="sxs-lookup"><span data-stu-id="d15b1-179">If hello headers sent do not match hello allowed headers, hello request fails.</span></span>

<span data-ttu-id="d15b1-180">Eftersom hello regler bearbetas i hello ordning de befinner sig i begärandetexten för hello rekommenderar bästa praxis att ange hello mest restriktiva regler med hänsyn till tooorigins först i hello listan så att dessa utvärderas först.</span><span class="sxs-lookup"><span data-stu-id="d15b1-180">Since hello rules are processed in hello order they are present in hello request body, best practices recommend that you specify hello most restrictive rules with respect tooorigins first in hello list, so that these are evaluated first.</span></span> <span data-ttu-id="d15b1-181">Ange regler som är mindre restriktivt – till exempel en regel tooallow alla ursprung – hello slutet av hello-listan.</span><span class="sxs-lookup"><span data-stu-id="d15b1-181">Specify rules that are less restrictive – for example, a rule tooallow all origins – at hello end of hello list.</span></span>

### <a name="example--cors-rules-evaluation"></a><span data-ttu-id="d15b1-182">Exempel – CORS regler utvärdering</span><span class="sxs-lookup"><span data-stu-id="d15b1-182">Example – CORS rules evaluation</span></span>
<span data-ttu-id="d15b1-183">hello visas följande exempel en partiell begärantext för en åtgärd tooset CORS-regler för hello storage-tjänster.</span><span class="sxs-lookup"><span data-stu-id="d15b1-183">hello following example shows a partial request body for an operation tooset CORS rules for hello storage services.</span></span> <span data-ttu-id="d15b1-184">Se [ange egenskaper för Blob-tjänsten](https://msdn.microsoft.com/library/hh452235.aspx), [ange egenskaper för kön Service](https://msdn.microsoft.com/library/hh452232.aspx), och [ange egenskaper för tabellen Service](https://msdn.microsoft.com/library/hh452240.aspx) information om hur du skapar hello begäran.</span><span class="sxs-lookup"><span data-stu-id="d15b1-184">See [Set Blob Service Properties](https://msdn.microsoft.com/library/hh452235.aspx), [Set Queue Service Properties](https://msdn.microsoft.com/library/hh452232.aspx), and [Set Table Service Properties](https://msdn.microsoft.com/library/hh452240.aspx) for details on constructing hello request.</span></span>

```xml
<Cors>
    <CorsRule>
        <AllowedOrigins>http://www.contoso.com</AllowedOrigins>
        <AllowedMethods>PUT,HEAD</AllowedMethods>
        <MaxAgeInSeconds>5</MaxAgeInSeconds>
        <ExposedHeaders>x-ms-*</ExposedHeaders>
        <AllowedHeaders>x-ms-blob-content-type, x-ms-blob-content-disposition</AllowedHeaders>
    </CorsRule>
    <CorsRule>
        <AllowedOrigins>*</AllowedOrigins>
        <AllowedMethods>PUT,GET</AllowedMethods>
        <MaxAgeInSeconds>5</MaxAgeInSeconds>
        <ExposedHeaders>x-ms-*</ExposedHeaders>
        <AllowedHeaders>x-ms-blob-content-type, x-ms-blob-content-disposition</AllowedHeaders>
    </CorsRule>
    <CorsRule>
        <AllowedOrigins>http://www.contoso.com</AllowedOrigins>
        <AllowedMethods>GET</AllowedMethods>
        <MaxAgeInSeconds>5</MaxAgeInSeconds>
        <ExposedHeaders>x-ms-*</ExposedHeaders>
        <AllowedHeaders>x-ms-client-request-id</AllowedHeaders>
    </CorsRule>
</Cors>
```

<span data-ttu-id="d15b1-185">Överväg därefter hello följande CORS begäranden:</span><span class="sxs-lookup"><span data-stu-id="d15b1-185">Next, consider hello following CORS requests:</span></span>

| <span data-ttu-id="d15b1-186">Förfrågan</span><span class="sxs-lookup"><span data-stu-id="d15b1-186">Request</span></span> |  |  | <span data-ttu-id="d15b1-187">Svar</span><span class="sxs-lookup"><span data-stu-id="d15b1-187">Response</span></span> |  |
| --- | --- | --- | --- | --- |
| <span data-ttu-id="d15b1-188">**Metoden**</span><span class="sxs-lookup"><span data-stu-id="d15b1-188">**Method**</span></span> |<span data-ttu-id="d15b1-189">**Ursprung**</span><span class="sxs-lookup"><span data-stu-id="d15b1-189">**Origin**</span></span> |<span data-ttu-id="d15b1-190">**Huvuden för begäran**</span><span class="sxs-lookup"><span data-stu-id="d15b1-190">**Request Headers**</span></span> |<span data-ttu-id="d15b1-191">**Regeln matchar**</span><span class="sxs-lookup"><span data-stu-id="d15b1-191">**Rule Match**</span></span> |<span data-ttu-id="d15b1-192">**Resultat**</span><span class="sxs-lookup"><span data-stu-id="d15b1-192">**Result**</span></span> |
| <span data-ttu-id="d15b1-193">**PLACERA**</span><span class="sxs-lookup"><span data-stu-id="d15b1-193">**PUT**</span></span> |<span data-ttu-id="d15b1-194">http://www.contoso.com</span><span class="sxs-lookup"><span data-stu-id="d15b1-194">http://www.contoso.com</span></span> |<span data-ttu-id="d15b1-195">x-ms-blob-content-type</span><span class="sxs-lookup"><span data-stu-id="d15b1-195">x-ms-blob-content-type</span></span> |<span data-ttu-id="d15b1-196">Första regeln</span><span class="sxs-lookup"><span data-stu-id="d15b1-196">First rule</span></span> |<span data-ttu-id="d15b1-197">Lyckades</span><span class="sxs-lookup"><span data-stu-id="d15b1-197">Success</span></span> |
| <span data-ttu-id="d15b1-198">**HÄMTA**</span><span class="sxs-lookup"><span data-stu-id="d15b1-198">**GET**</span></span> |<span data-ttu-id="d15b1-199">http://www.contoso.com</span><span class="sxs-lookup"><span data-stu-id="d15b1-199">http://www.contoso.com</span></span> |<span data-ttu-id="d15b1-200">x-ms-blob-content-type</span><span class="sxs-lookup"><span data-stu-id="d15b1-200">x-ms-blob-content-type</span></span> |<span data-ttu-id="d15b1-201">Andra regeln</span><span class="sxs-lookup"><span data-stu-id="d15b1-201">Second rule</span></span> |<span data-ttu-id="d15b1-202">Lyckades</span><span class="sxs-lookup"><span data-stu-id="d15b1-202">Success</span></span> |
| <span data-ttu-id="d15b1-203">**HÄMTA**</span><span class="sxs-lookup"><span data-stu-id="d15b1-203">**GET**</span></span> |<span data-ttu-id="d15b1-204">http://www.contoso.com</span><span class="sxs-lookup"><span data-stu-id="d15b1-204">http://www.contoso.com</span></span> |<span data-ttu-id="d15b1-205">x-ms-client-request-id</span><span class="sxs-lookup"><span data-stu-id="d15b1-205">x-ms-client-request-id</span></span> |<span data-ttu-id="d15b1-206">Andra regeln</span><span class="sxs-lookup"><span data-stu-id="d15b1-206">Second rule</span></span> |<span data-ttu-id="d15b1-207">Fel</span><span class="sxs-lookup"><span data-stu-id="d15b1-207">Failure</span></span> |

<span data-ttu-id="d15b1-208">hello första begäran matchar hello första regeln – hello ursprungsdomän matchar hello tillåtna ursprung, hello metoden matchar hello tillåtna metoder och hello sidhuvud matchar hello tillåtna huvuden – och så lyckas.</span><span class="sxs-lookup"><span data-stu-id="d15b1-208">hello first request matches hello first rule – hello origin domain matches hello allowed origins, hello method matches hello allowed methods, and hello header matches hello allowed headers – and so succeeds.</span></span>

<span data-ttu-id="d15b1-209">andra hello-begäran matchar inte hello första regeln eftersom hello-metod inte matchar hello tillåtna metoder.</span><span class="sxs-lookup"><span data-stu-id="d15b1-209">hello second request does not match hello first rule because hello method does not match hello allowed methods.</span></span> <span data-ttu-id="d15b1-210">Den, men matchar hello andra regeln, så den lyckas.</span><span class="sxs-lookup"><span data-stu-id="d15b1-210">It does, however, match hello second rule, so it succeeds.</span></span>

<span data-ttu-id="d15b1-211">hello tredje begäran matchar hello andra regeln i dess ursprungsdomän och metod, så inga ytterligare regler utvärderas.</span><span class="sxs-lookup"><span data-stu-id="d15b1-211">hello third request matches hello second rule in its origin domain and method, so no further rules are evaluated.</span></span> <span data-ttu-id="d15b1-212">Dock hello *x-ms-client-request-id-huvudet* tillåts inte av hello andra regeln, så hello begäran misslyckas trots hello att hello semantiken för hello tredje regeln skulle ha gjort det toosucceed.</span><span class="sxs-lookup"><span data-stu-id="d15b1-212">However, hello *x-ms-client-request-id header* is not allowed by hello second rule, so hello request fails, despite hello fact that hello semantics of hello third rule would have allowed it toosucceed.</span></span>

> [!NOTE]
> <span data-ttu-id="d15b1-213">Även om det här exemplet visar en mindre begränsande regel innan en mer begränsande i allmänhet hello bästa praxis är toolist hello mest restriktiva regler först.</span><span class="sxs-lookup"><span data-stu-id="d15b1-213">Although this example shows a less restrictive rule before a more restrictive one, in general hello best practice is toolist hello most restrictive rules first.</span></span>
> 
> 

## <a name="understanding-how-hello-vary-header-is-set"></a><span data-ttu-id="d15b1-214">Förstå hur hello Vary-huvud har angetts</span><span class="sxs-lookup"><span data-stu-id="d15b1-214">Understanding how hello Vary header is set</span></span>
<span data-ttu-id="d15b1-215">Hej *variera* huvud är en standard HTTP/1.1-rubrik som består av en uppsättning begäran huvudfält som meddela hello webbläsare eller användaren agent om hello villkor som valts av hello server tooprocess hello begäran.</span><span class="sxs-lookup"><span data-stu-id="d15b1-215">hello *Vary* header is a standard HTTP/1.1 header consisting of a set of request header fields that advise hello browser or user agent about hello criteria that were selected by hello server tooprocess hello request.</span></span> <span data-ttu-id="d15b1-216">Hej *variera* huvud används huvudsakligen för cachelagring av proxyservrar, webbläsare och andra CDN-lösningar, som använder den toodetermine hur hello svaret ska cachelagras.</span><span class="sxs-lookup"><span data-stu-id="d15b1-216">hello *Vary* header is mainly used for caching by proxies, browsers, and CDNs, which use it toodetermine how hello response should be cached.</span></span> <span data-ttu-id="d15b1-217">Mer information finns i hello-specifikationen för hello [Vary-huvud](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html).</span><span class="sxs-lookup"><span data-stu-id="d15b1-217">For details, see hello specification for hello [Vary header](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html).</span></span>

<span data-ttu-id="d15b1-218">När hello webbläsare eller en annan användaragent cachelagrar hello svar från en CORS-begäran, cachelagras hello ursprungsdomän som hello tillåtna ursprung.</span><span class="sxs-lookup"><span data-stu-id="d15b1-218">When hello browser or another user agent caches hello response from a CORS request, hello origin domain is cached as hello allowed origin.</span></span> <span data-ttu-id="d15b1-219">När en andra domänproblem Hej samma begäran om en lagringsresurs medan hello cache är aktiv, hello användaragent hämtar hello cachelagrade ursprungsdomän.</span><span class="sxs-lookup"><span data-stu-id="d15b1-219">When a second domain issues hello same request for a storage resource while hello cache is active, hello user agent retrieves hello cached origin domain.</span></span> <span data-ttu-id="d15b1-220">andra hello-domänen matchar inte hello cachelagrade domän, så hello begäran misslyckas när den annars skulle lyckas.</span><span class="sxs-lookup"><span data-stu-id="d15b1-220">hello second domain does not match hello cached domain, so hello request fails when it would otherwise succeed.</span></span> <span data-ttu-id="d15b1-221">I vissa fall, Azure Storage anger hello Vary-huvud för**ursprung** tooinstruct hello användaren toosend hello efterföljande CORS begäran toohello agenttjänsten om hello begär domän skiljer sig från hello cachelagras ursprung.</span><span class="sxs-lookup"><span data-stu-id="d15b1-221">In certain cases, Azure Storage sets hello Vary header too**Origin** tooinstruct hello user agent toosend hello subsequent CORS request toohello service when hello requesting domain differs from hello cached origin.</span></span>

<span data-ttu-id="d15b1-222">Azure-lagring anger hello *variera* huvud för**ursprung** för faktiska GET/HEAD-begäranden i hello följande fall:</span><span class="sxs-lookup"><span data-stu-id="d15b1-222">Azure Storage sets hello *Vary* header too**Origin** for actual GET/HEAD requests in hello following cases:</span></span>

* <span data-ttu-id="d15b1-223">När hello begäran ursprung matchar exakt hello tillåtna ursprung som definieras av en regel för CORS.</span><span class="sxs-lookup"><span data-stu-id="d15b1-223">When hello request origin exactly matches hello allowed origin defined by a CORS rule.</span></span> <span data-ttu-id="d15b1-224">toobe en exakt matchning hello CORS regeln får inte innehålla ett jokertecken ' * ' tecken.</span><span class="sxs-lookup"><span data-stu-id="d15b1-224">toobe an exact match, hello CORS rule may not include a wildcard ' * ' character.</span></span>
* <span data-ttu-id="d15b1-225">Det finns ingen regel matchande hello begäran ursprung, men CORS är aktiverat för hello storage-tjänst.</span><span class="sxs-lookup"><span data-stu-id="d15b1-225">There is no rule matching hello request origin, but CORS is enabled for hello storage service.</span></span>

<span data-ttu-id="d15b1-226">I hello fall där en GET/HEAD-begäran matchar en CORS-regel som tillåter alla ursprung tyder hello svar på att alla ursprung är tillåtna hello användarcachen agent kan efterföljande förfrågningar från alla ursprungsdomän medan hello cache är aktiv.</span><span class="sxs-lookup"><span data-stu-id="d15b1-226">In hello case where a GET/HEAD request matches a CORS rule that allows all origins, hello response indicates that all origins are allowed, and hello user agent cache will allow subsequent requests from any origin domain while hello cache is active.</span></span>

<span data-ttu-id="d15b1-227">Observera att för begäranden med andra metoder än GET/HEAD hello lagringstjänster inte ska ange hello Vary-huvud, eftersom svar toothese metoder inte cachelagras av användaragenter.</span><span class="sxs-lookup"><span data-stu-id="d15b1-227">Note that for requests using methods other than GET/HEAD, hello storage services will not set hello Vary header, since responses toothese methods are not cached by user agents.</span></span>

<span data-ttu-id="d15b1-228">hello följande tabell visar hur Azure storage svarar tooGET/HEAD-begäranden baserat på hello tidigare nämnts fall:</span><span class="sxs-lookup"><span data-stu-id="d15b1-228">hello following table indicates how Azure storage will respond tooGET/HEAD requests based on hello previously mentioned cases:</span></span>

| <span data-ttu-id="d15b1-229">Förfrågan</span><span class="sxs-lookup"><span data-stu-id="d15b1-229">Request</span></span> | <span data-ttu-id="d15b1-230">Kontoinställningen och resultat av utvärderingen av distributionsregeln</span><span class="sxs-lookup"><span data-stu-id="d15b1-230">Account setting and result of rule evaluation</span></span> |  |  | <span data-ttu-id="d15b1-231">Svar</span><span class="sxs-lookup"><span data-stu-id="d15b1-231">Response</span></span> |  |  |
| --- | --- | --- | --- | --- | --- | --- | --- | --- |
| <span data-ttu-id="d15b1-232">**Ursprung huvudet finns på begäran**</span><span class="sxs-lookup"><span data-stu-id="d15b1-232">**Origin header present on request**</span></span> |<span data-ttu-id="d15b1-233">**CORS-regler som angetts för denna tjänst**</span><span class="sxs-lookup"><span data-stu-id="d15b1-233">**CORS rule(s) specified for this service**</span></span> |<span data-ttu-id="d15b1-234">**Det finns matchande regel som tillåter alla ursprung (*)**</span><span class="sxs-lookup"><span data-stu-id="d15b1-234">**Matching rule exists that allows all origins(*)**</span></span> |<span data-ttu-id="d15b1-235">**Matchande regel som finns för ursprung exakt matchning**</span><span class="sxs-lookup"><span data-stu-id="d15b1-235">**Matching rule exists for exact origin match**</span></span> |<span data-ttu-id="d15b1-236">**Svaret innehåller Vary-huvud set tooOrigin**</span><span class="sxs-lookup"><span data-stu-id="d15b1-236">**Response includes Vary header set tooOrigin**</span></span> |<span data-ttu-id="d15b1-237">**Svaret innehåller Access Control-tillåtna-ursprung ”:*”**</span><span class="sxs-lookup"><span data-stu-id="d15b1-237">**Response includes Access-Control-Allowed-Origin: "*"**</span></span> |<span data-ttu-id="d15b1-238">**Svaret innehåller Access-Control-exponeras-rubriker**</span><span class="sxs-lookup"><span data-stu-id="d15b1-238">**Response includes Access-Control-Exposed-Headers**</span></span> |
| <span data-ttu-id="d15b1-239">Nej</span><span class="sxs-lookup"><span data-stu-id="d15b1-239">No</span></span> |<span data-ttu-id="d15b1-240">Nej</span><span class="sxs-lookup"><span data-stu-id="d15b1-240">No</span></span> |<span data-ttu-id="d15b1-241">Nej</span><span class="sxs-lookup"><span data-stu-id="d15b1-241">No</span></span> |<span data-ttu-id="d15b1-242">Nej</span><span class="sxs-lookup"><span data-stu-id="d15b1-242">No</span></span> |<span data-ttu-id="d15b1-243">Nej</span><span class="sxs-lookup"><span data-stu-id="d15b1-243">No</span></span> |<span data-ttu-id="d15b1-244">Nej</span><span class="sxs-lookup"><span data-stu-id="d15b1-244">No</span></span> |<span data-ttu-id="d15b1-245">Nej</span><span class="sxs-lookup"><span data-stu-id="d15b1-245">No</span></span> |
| <span data-ttu-id="d15b1-246">Nej</span><span class="sxs-lookup"><span data-stu-id="d15b1-246">No</span></span> |<span data-ttu-id="d15b1-247">Ja</span><span class="sxs-lookup"><span data-stu-id="d15b1-247">Yes</span></span> |<span data-ttu-id="d15b1-248">Nej</span><span class="sxs-lookup"><span data-stu-id="d15b1-248">No</span></span> |<span data-ttu-id="d15b1-249">Nej</span><span class="sxs-lookup"><span data-stu-id="d15b1-249">No</span></span> |<span data-ttu-id="d15b1-250">Ja</span><span class="sxs-lookup"><span data-stu-id="d15b1-250">Yes</span></span> |<span data-ttu-id="d15b1-251">Nej</span><span class="sxs-lookup"><span data-stu-id="d15b1-251">No</span></span> |<span data-ttu-id="d15b1-252">Nej</span><span class="sxs-lookup"><span data-stu-id="d15b1-252">No</span></span> |
| <span data-ttu-id="d15b1-253">Nej</span><span class="sxs-lookup"><span data-stu-id="d15b1-253">No</span></span> |<span data-ttu-id="d15b1-254">Ja</span><span class="sxs-lookup"><span data-stu-id="d15b1-254">Yes</span></span> |<span data-ttu-id="d15b1-255">Ja</span><span class="sxs-lookup"><span data-stu-id="d15b1-255">Yes</span></span> |<span data-ttu-id="d15b1-256">Nej</span><span class="sxs-lookup"><span data-stu-id="d15b1-256">No</span></span> |<span data-ttu-id="d15b1-257">Nej</span><span class="sxs-lookup"><span data-stu-id="d15b1-257">No</span></span> |<span data-ttu-id="d15b1-258">Ja</span><span class="sxs-lookup"><span data-stu-id="d15b1-258">Yes</span></span> |<span data-ttu-id="d15b1-259">Ja</span><span class="sxs-lookup"><span data-stu-id="d15b1-259">Yes</span></span> |
| <span data-ttu-id="d15b1-260">Ja</span><span class="sxs-lookup"><span data-stu-id="d15b1-260">Yes</span></span> |<span data-ttu-id="d15b1-261">Nej</span><span class="sxs-lookup"><span data-stu-id="d15b1-261">No</span></span> |<span data-ttu-id="d15b1-262">Nej</span><span class="sxs-lookup"><span data-stu-id="d15b1-262">No</span></span> |<span data-ttu-id="d15b1-263">Nej</span><span class="sxs-lookup"><span data-stu-id="d15b1-263">No</span></span> |<span data-ttu-id="d15b1-264">Nej</span><span class="sxs-lookup"><span data-stu-id="d15b1-264">No</span></span> |<span data-ttu-id="d15b1-265">Nej</span><span class="sxs-lookup"><span data-stu-id="d15b1-265">No</span></span> |<span data-ttu-id="d15b1-266">Nej</span><span class="sxs-lookup"><span data-stu-id="d15b1-266">No</span></span> |
| <span data-ttu-id="d15b1-267">Ja</span><span class="sxs-lookup"><span data-stu-id="d15b1-267">Yes</span></span> |<span data-ttu-id="d15b1-268">Ja</span><span class="sxs-lookup"><span data-stu-id="d15b1-268">Yes</span></span> |<span data-ttu-id="d15b1-269">Nej</span><span class="sxs-lookup"><span data-stu-id="d15b1-269">No</span></span> |<span data-ttu-id="d15b1-270">Ja</span><span class="sxs-lookup"><span data-stu-id="d15b1-270">Yes</span></span> |<span data-ttu-id="d15b1-271">Ja</span><span class="sxs-lookup"><span data-stu-id="d15b1-271">Yes</span></span> |<span data-ttu-id="d15b1-272">Nej</span><span class="sxs-lookup"><span data-stu-id="d15b1-272">No</span></span> |<span data-ttu-id="d15b1-273">Ja</span><span class="sxs-lookup"><span data-stu-id="d15b1-273">Yes</span></span> |
| <span data-ttu-id="d15b1-274">Ja</span><span class="sxs-lookup"><span data-stu-id="d15b1-274">Yes</span></span> |<span data-ttu-id="d15b1-275">Ja</span><span class="sxs-lookup"><span data-stu-id="d15b1-275">Yes</span></span> |<span data-ttu-id="d15b1-276">Nej</span><span class="sxs-lookup"><span data-stu-id="d15b1-276">No</span></span> |<span data-ttu-id="d15b1-277">Nej</span><span class="sxs-lookup"><span data-stu-id="d15b1-277">No</span></span> |<span data-ttu-id="d15b1-278">Ja</span><span class="sxs-lookup"><span data-stu-id="d15b1-278">Yes</span></span> |<span data-ttu-id="d15b1-279">Nej</span><span class="sxs-lookup"><span data-stu-id="d15b1-279">No</span></span> |<span data-ttu-id="d15b1-280">Nej</span><span class="sxs-lookup"><span data-stu-id="d15b1-280">No</span></span> |
| <span data-ttu-id="d15b1-281">Ja</span><span class="sxs-lookup"><span data-stu-id="d15b1-281">Yes</span></span> |<span data-ttu-id="d15b1-282">Ja</span><span class="sxs-lookup"><span data-stu-id="d15b1-282">Yes</span></span> |<span data-ttu-id="d15b1-283">Ja</span><span class="sxs-lookup"><span data-stu-id="d15b1-283">Yes</span></span> |<span data-ttu-id="d15b1-284">Nej</span><span class="sxs-lookup"><span data-stu-id="d15b1-284">No</span></span> |<span data-ttu-id="d15b1-285">Nej</span><span class="sxs-lookup"><span data-stu-id="d15b1-285">No</span></span> |<span data-ttu-id="d15b1-286">Ja</span><span class="sxs-lookup"><span data-stu-id="d15b1-286">Yes</span></span> |<span data-ttu-id="d15b1-287">Ja</span><span class="sxs-lookup"><span data-stu-id="d15b1-287">Yes</span></span> |

## <a name="billing-for-cors-requests"></a><span data-ttu-id="d15b1-288">Fakturering för CORS-begäranden</span><span class="sxs-lookup"><span data-stu-id="d15b1-288">Billing for CORS requests</span></span>
<span data-ttu-id="d15b1-289">Lyckad preflight begär debiteras om du har aktiverat CORS för någon av hello lagringstjänster för ditt konto (genom att anropa [ange egenskaper för Blob-tjänsten](https://msdn.microsoft.com/library/hh452235.aspx), [ange egenskaper för kön Service](https://msdn.microsoft.com/library/hh452232.aspx), eller [ Ange egenskaper för tabellen](https://msdn.microsoft.com/library/hh452240.aspx)).</span><span class="sxs-lookup"><span data-stu-id="d15b1-289">Successful preflight requests are billed if you have enabled CORS for any of hello storage services for your account (by calling [Set Blob Service Properties](https://msdn.microsoft.com/library/hh452235.aspx), [Set Queue Service Properties](https://msdn.microsoft.com/library/hh452232.aspx), or [Set Table Service Properties](https://msdn.microsoft.com/library/hh452240.aspx)).</span></span> <span data-ttu-id="d15b1-290">toominimize kostnader, Överväg att ange hello **MaxAgeInSeconds** element i din CORS regler tooa stora värden så att hello användaragent cachelagrar hello-begäran.</span><span class="sxs-lookup"><span data-stu-id="d15b1-290">toominimize charges, consider setting hello **MaxAgeInSeconds** element in your CORS rules tooa large value so that hello user agent caches hello request.</span></span>

<span data-ttu-id="d15b1-291">Kommer inte att debiteras misslyckade preflight-begäranden.</span><span class="sxs-lookup"><span data-stu-id="d15b1-291">Unsuccessful preflight requests will not be billed.</span></span>

## <a name="next-steps"></a><span data-ttu-id="d15b1-292">Nästa steg</span><span class="sxs-lookup"><span data-stu-id="d15b1-292">Next steps</span></span>
[<span data-ttu-id="d15b1-293">Ange egenskaper för Blob-tjänst</span><span class="sxs-lookup"><span data-stu-id="d15b1-293">Set Blob Service Properties</span></span>](https://msdn.microsoft.com/library/hh452235.aspx)

[<span data-ttu-id="d15b1-294">Ange egenskaper för kön</span><span class="sxs-lookup"><span data-stu-id="d15b1-294">Set Queue Service Properties</span></span>](https://msdn.microsoft.com/library/hh452232.aspx)

[<span data-ttu-id="d15b1-295">Ange egenskaper för tabellen</span><span class="sxs-lookup"><span data-stu-id="d15b1-295">Set Table Service Properties</span></span>](https://msdn.microsoft.com/library/hh452240.aspx)

[<span data-ttu-id="d15b1-296">W3C Cross-Origin Resource Sharing specifikation</span><span class="sxs-lookup"><span data-stu-id="d15b1-296">W3C Cross-Origin Resource Sharing Specification</span></span>](http://www.w3.org/TR/cors/)


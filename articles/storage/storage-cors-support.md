---
title: "Stöd för Cross-Origin Resource delning (CORS) | Microsoft Docs"
description: "Lär dig hur du aktiverar CORS-stöd för Microsoft Azure Storage-tjänster."
services: storage
documentationcenter: .net
author: cbrooksmsft
manager: carmonm
editor: tysonn
ms.assetid: a0229595-5b64-4898-b8d6-fa2625ea6887
ms.service: storage
ms.workload: storage
ms.tgt_pltfrm: na
ms.devlang: dotnet
ms.topic: article
ms.date: 2/22/2017
ms.author: cbrooks
ms.openlocfilehash: 8d189d3ec3e6081dd37b912824f287cd75f39b35
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: sv-SE
ms.lasthandoff: 07/11/2017
---
# <a name="cross-origin-resource-sharing-cors-support-for-the-azure-storage-services"></a><span data-ttu-id="6fd4e-103">Cross-Origin Resource Sharing (CORS) stöd för Azure Storage-tjänster</span><span class="sxs-lookup"><span data-stu-id="6fd4e-103">Cross-Origin Resource Sharing (CORS) Support for the Azure Storage Services</span></span>
<span data-ttu-id="6fd4e-104">Från och med version 2013-08-15, stöd Azure-lagringstjänster för Cross-Origin Resource Sharing (CORS) för tjänster Blob, tabell, kö och fil.</span><span class="sxs-lookup"><span data-stu-id="6fd4e-104">Beginning with version 2013-08-15, the Azure storage services support Cross-Origin Resource Sharing (CORS) for the Blob, Table, Queue, and File services.</span></span> <span data-ttu-id="6fd4e-105">CORS är en HTTP-funktion som gör att ett webbprogram som körs i en domän kan komma åt resurser i en annan domän.</span><span class="sxs-lookup"><span data-stu-id="6fd4e-105">CORS is an HTTP feature that enables a web application running under one domain to access resources in another domain.</span></span> <span data-ttu-id="6fd4e-106">Webbläsare som implementerar en säkerhetsbegränsningar som kallas [samma ursprung princip](http://www.w3.org/Security/wiki/Same_Origin_Policy) som förhindrar att en webbsida från anropa API: er i en annan domän. CORS ger ett säkert sätt att tillåta en domän (ursprungsdomän) att anropa API: er i en annan domän.</span><span class="sxs-lookup"><span data-stu-id="6fd4e-106">Web browsers implement a security restriction known as [same-origin policy](http://www.w3.org/Security/wiki/Same_Origin_Policy) that prevents a web page from calling APIs in a different domain; CORS provides a secure way to allow one domain (the origin domain) to call APIs in another domain.</span></span> <span data-ttu-id="6fd4e-107">Finns det [CORS-specifikationen](http://www.w3.org/TR/cors/) information om CORS.</span><span class="sxs-lookup"><span data-stu-id="6fd4e-107">See the [CORS specification](http://www.w3.org/TR/cors/) for details on CORS.</span></span>

<span data-ttu-id="6fd4e-108">Du kan ange CORS-regler individuellt för varje storage-tjänster genom att anropa [ange egenskaper för Blob-tjänsten](https://msdn.microsoft.com/library/hh452235.aspx), [ange egenskaper för kön Service](https://msdn.microsoft.com/library/hh452232.aspx), och [ange tjänsten Tabellegenskaper](https://msdn.microsoft.com/library/hh452240.aspx).</span><span class="sxs-lookup"><span data-stu-id="6fd4e-108">You can set CORS rules individually for each of the storage services, by calling [Set Blob Service Properties](https://msdn.microsoft.com/library/hh452235.aspx), [Set Queue Service Properties](https://msdn.microsoft.com/library/hh452232.aspx), and [Set Table Service Properties](https://msdn.microsoft.com/library/hh452240.aspx).</span></span> <span data-ttu-id="6fd4e-109">När du har angett CORS-regler för tjänsten kommer en korrekt autentiserad begäran mot tjänsten från en annan domän att utvärderas för att avgöra om det är tillåtet enligt de regler som du har angett.</span><span class="sxs-lookup"><span data-stu-id="6fd4e-109">Once you set the CORS rules for the service, then a properly authenticated request made against the service from a different domain will be evaluated to determine whether it is allowed according to the rules you have specified.</span></span>

> [!NOTE]
> <span data-ttu-id="6fd4e-110">Observera att CORS inte är en autentiseringsmetod.</span><span class="sxs-lookup"><span data-stu-id="6fd4e-110">Note that CORS is not an authentication mechanism.</span></span> <span data-ttu-id="6fd4e-111">Alla förfrågningar som görs mot en lagringsresurs när CORS är aktiverat måste antingen ha en korrekt autentisering signatur eller måste göras mot en offentlig resurs.</span><span class="sxs-lookup"><span data-stu-id="6fd4e-111">Any request made against a storage resource when CORS is enabled must either have a proper authentication signature, or must be made against a public resource.</span></span>
> 
> 

## <a name="understanding-cors-requests"></a><span data-ttu-id="6fd4e-112">Förstå CORS-begäranden</span><span class="sxs-lookup"><span data-stu-id="6fd4e-112">Understanding CORS requests</span></span>
<span data-ttu-id="6fd4e-113">En CORS-begäran från en ursprungsdomän kan bestå av två separata begäranden:</span><span class="sxs-lookup"><span data-stu-id="6fd4e-113">A CORS request from an origin domain may consist of two separate requests:</span></span>

* <span data-ttu-id="6fd4e-114">En preflight-begäran som frågar CORS-begränsningar i tjänsten.</span><span class="sxs-lookup"><span data-stu-id="6fd4e-114">A preflight request, which queries the CORS restrictions imposed by the service.</span></span> <span data-ttu-id="6fd4e-115">Preflight-begäran måste anges om metoden begäran är en [enkel metod](http://www.w3.org/TR/cors/), vilket innebär att GET, HEAD eller POST.</span><span class="sxs-lookup"><span data-stu-id="6fd4e-115">The preflight request is required unless the request method is a [simple method](http://www.w3.org/TR/cors/), meaning GET, HEAD, or POST.</span></span>
* <span data-ttu-id="6fd4e-116">Den faktiska begäran som görs mot en resurs.</span><span class="sxs-lookup"><span data-stu-id="6fd4e-116">The actual request, made against the desired resource.</span></span>

### <a name="preflight-request"></a><span data-ttu-id="6fd4e-117">Preflight-begäran</span><span class="sxs-lookup"><span data-stu-id="6fd4e-117">Preflight request</span></span>
<span data-ttu-id="6fd4e-118">Frågor preflight-begäran CORS-begränsningar som har upprättats för lagring av kontoägaren.</span><span class="sxs-lookup"><span data-stu-id="6fd4e-118">The preflight request queries the CORS restrictions that have been established for the storage service by the account owner.</span></span> <span data-ttu-id="6fd4e-119">Skickar en OPTIONS-begäran som innehåller begärandehuvuden, metod och ursprung domän webbläsaren (eller andra användaragent).</span><span class="sxs-lookup"><span data-stu-id="6fd4e-119">The web browser (or other user agent) sends an OPTIONS request that includes the request headers, method and origin domain.</span></span> <span data-ttu-id="6fd4e-120">Lagringstjänsten utvärderar operationen baserat på en förkonfigurerad uppsättning CORS-regler som anger vilka ursprungsdomäner och metodbegäranden begärandehuvuden kan anges för en faktiska begäran mot en lagringsresurs.</span><span class="sxs-lookup"><span data-stu-id="6fd4e-120">The storage service evaluates the intended operation based on a pre-configured set of CORS rules that specify which origin domains, request methods, and request headers may be specified on an actual request against a storage resource.</span></span>

<span data-ttu-id="6fd4e-121">Om CORS är aktiverat för tjänsten och det finns en CORS-regel som matchar begärande-preflight-tjänsten svarar med statuskod 200 (OK) och innehåller nödvändiga Access Control-huvuden i svaret.</span><span class="sxs-lookup"><span data-stu-id="6fd4e-121">If CORS is enabled for the service and there is a CORS rule that matches the preflight request, the service responds with status code 200 (OK), and includes the required Access-Control headers in the response.</span></span>

<span data-ttu-id="6fd4e-122">Om CORS inte har aktiverats för tjänsten eller inga CORS-regeln matchar preflight-begäran, svarar tjänsten med statuskod 403 (förbjuden).</span><span class="sxs-lookup"><span data-stu-id="6fd4e-122">If CORS is not enabled for the service or no CORS rule matches the preflight request, the service will respond with status code 403 (Forbidden).</span></span>

<span data-ttu-id="6fd4e-123">Om OPTIONS-begäran inte innehåller de nödvändiga CORS huvudena (ursprung och-begäran-metoden för åtkomstkontroll rubriker), svarar tjänsten med statuskod: 400 (felaktig begäran).</span><span class="sxs-lookup"><span data-stu-id="6fd4e-123">If the OPTIONS request doesn't contain the required CORS headers (the Origin and Access-Control-Request-Method headers), the service will respond with status code 400 (Bad request).</span></span>

<span data-ttu-id="6fd4e-124">Observera att en preflight-begäran ska utvärderas mot tjänsten (Blob, köer och tabell) och inte mot den begärda resursen.</span><span class="sxs-lookup"><span data-stu-id="6fd4e-124">Note that a preflight request is evaluated against the service (Blob, Queue, and Table) and not against the requested resource.</span></span> <span data-ttu-id="6fd4e-125">Ägare måste ha aktiverat CORS som en del av tjänsten kontoegenskaperna för att begäran ska lyckas.</span><span class="sxs-lookup"><span data-stu-id="6fd4e-125">The account owner must have enabled CORS as part of the account service properties in order for the request to succeed.</span></span>

### <a name="actual-request"></a><span data-ttu-id="6fd4e-126">Faktiska begäran</span><span class="sxs-lookup"><span data-stu-id="6fd4e-126">Actual request</span></span>
<span data-ttu-id="6fd4e-127">När preflight-begäran har godkänts och svaret returneras skickar webbläsaren den faktiska begäran mot storage-resursen.</span><span class="sxs-lookup"><span data-stu-id="6fd4e-127">Once the preflight request is accepted and the response is returned, the browser will dispatch the actual request against the storage resource.</span></span> <span data-ttu-id="6fd4e-128">Webbläsaren nekar den faktiska begäran omedelbart om preflight-begäran avvisas.</span><span class="sxs-lookup"><span data-stu-id="6fd4e-128">The browser will deny the actual request immediately if the preflight request is rejected.</span></span>

<span data-ttu-id="6fd4e-129">Den faktiska begäranden behandlas som normal begäran mot storage-tjänst.</span><span class="sxs-lookup"><span data-stu-id="6fd4e-129">The actual request is treated as normal request against the storage service.</span></span> <span data-ttu-id="6fd4e-130">Förekomsten av ursprung huvudet anger att begäran är en CORS-begäran och tjänsten kontrollerar matchande CORS-regler.</span><span class="sxs-lookup"><span data-stu-id="6fd4e-130">The presence of the Origin header indicates that the request is a CORS request and the service will check the matching CORS rules.</span></span> <span data-ttu-id="6fd4e-131">Om en matchning hittas, Access Control-huvuden läggs till i svaret och skickas tillbaka till klienten.</span><span class="sxs-lookup"><span data-stu-id="6fd4e-131">If a match is found, the Access-Control headers are added to the response and sent back to the client.</span></span> <span data-ttu-id="6fd4e-132">Om en matchning hittas returneras inte CORS-åtkomstkontroll-huvuden.</span><span class="sxs-lookup"><span data-stu-id="6fd4e-132">If a match is not found, the CORS Access-Control headers are not returned.</span></span>

## <a name="enabling-cors-for-the-azure-storage-services"></a><span data-ttu-id="6fd4e-133">Hur du aktiverar CORS för Azure Storage-tjänster</span><span class="sxs-lookup"><span data-stu-id="6fd4e-133">Enabling CORS for the Azure Storage services</span></span>
<span data-ttu-id="6fd4e-134">CORS-regler är inställda på tjänstnivå, så du behöver aktivera eller inaktivera CORS för varje tjänst (Blob, köer och tabellen) separat.</span><span class="sxs-lookup"><span data-stu-id="6fd4e-134">CORS rules are set at the service level, so you need to enable or disable CORS for each service (Blob, Queue and Table) separately.</span></span> <span data-ttu-id="6fd4e-135">Som standard inaktiveras CORS för varje tjänst.</span><span class="sxs-lookup"><span data-stu-id="6fd4e-135">By default, CORS is disabled for each service.</span></span> <span data-ttu-id="6fd4e-136">Om du vill aktivera CORS du måste ange egenskaperna lämplig tjänst som använder version 2013-08-15 eller senare, och Lägg till CORS-regler i egenskaperna för tjänsten.</span><span class="sxs-lookup"><span data-stu-id="6fd4e-136">To enable CORS, you need to set the appropriate service properties using version 2013-08-15 or later, and add CORS rules to the service properties.</span></span> <span data-ttu-id="6fd4e-137">Mer information om hur du aktiverar eller inaktiverar CORS för en tjänst och hur du konfigurerar CORS-regler, se [ange egenskaper för Blob-tjänsten](https://msdn.microsoft.com/library/hh452235.aspx), [ange egenskaper för kön Service](https://msdn.microsoft.com/library/hh452232.aspx), och [ange Tabelltjänsten Egenskaper för](https://msdn.microsoft.com/library/hh452240.aspx).</span><span class="sxs-lookup"><span data-stu-id="6fd4e-137">For details about how to enable or disable CORS for a service and how to set CORS rules, please refer to [Set Blob Service Properties](https://msdn.microsoft.com/library/hh452235.aspx), [Set Queue Service Properties](https://msdn.microsoft.com/library/hh452232.aspx), and [Set Table Service Properties](https://msdn.microsoft.com/library/hh452240.aspx).</span></span>

<span data-ttu-id="6fd4e-138">Här är ett exempel på en enda CORS-regel som angetts via en åtgärden Ange egenskaper för tjänsten:</span><span class="sxs-lookup"><span data-stu-id="6fd4e-138">Here is a sample of a single CORS rule, specified via a Set Service Properties operation:</span></span>

```xml
<Cors>    
    <CorsRule>
        <AllowedOrigins>http://www.contoso.com, http://www.fabrikam.com</AllowedOrigins>
        <AllowedMethods>PUT,GET</AllowedMethods>
        <AllowedHeaders>x-ms-meta-data*,x-ms-meta-target*,x-ms-meta-abc</AllowedHeaders>
        <ExposedHeaders>x-ms-meta-*</ExposedHeaders>
        <MaxAgeInSeconds>200</MaxAgeInSeconds>
    </CorsRule>
<Cors>
```

<span data-ttu-id="6fd4e-139">Varje element som ingår i regeln CORS beskrivs nedan:</span><span class="sxs-lookup"><span data-stu-id="6fd4e-139">Each element included in the CORS rule is described below:</span></span>

* <span data-ttu-id="6fd4e-140">**AllowedOrigins**: ursprungsdomäner som tillåts att begära mot lagringstjänsten via CORS.</span><span class="sxs-lookup"><span data-stu-id="6fd4e-140">**AllowedOrigins**: The origin domains that are permitted to make a request against the storage service via CORS.</span></span> <span data-ttu-id="6fd4e-141">Den ursprung är den domän som begäran kommer från.</span><span class="sxs-lookup"><span data-stu-id="6fd4e-141">The origin domain is the domain from which the request originates.</span></span> <span data-ttu-id="6fd4e-142">Observera att ursprung måste vara en exakt skiftlägeskänslig matchning med ursprung som användaren ålder skickar till tjänsten.</span><span class="sxs-lookup"><span data-stu-id="6fd4e-142">Note that the origin must be an exact case-sensitive match with the origin that the user age sends to the service.</span></span> <span data-ttu-id="6fd4e-143">Du kan också använda jokertecknet ' *' så att alla ursprungsdomäner att göra förfrågningar via CORS.</span><span class="sxs-lookup"><span data-stu-id="6fd4e-143">You can also use the wildcard character '*' to allow all origin domains to make requests via CORS.</span></span> <span data-ttu-id="6fd4e-144">I exemplet ovan är domänerna [http://www.contoso.com](http://www.contoso.com) och [http://www.fabrikam.com](http://www.fabrikam.com) kan göra förfrågningar till tjänsten med hjälp av CORS.</span><span class="sxs-lookup"><span data-stu-id="6fd4e-144">In the example above, the domains [http://www.contoso.com](http://www.contoso.com) and [http://www.fabrikam.com](http://www.fabrikam.com) can make requests against the service using CORS.</span></span>
* <span data-ttu-id="6fd4e-145">**AllowedMethods**: metoder (http-begäran verb) som den ursprungliga domänen kan använda för en CORS-begäran.</span><span class="sxs-lookup"><span data-stu-id="6fd4e-145">**AllowedMethods**: The methods (HTTP request verbs) that the origin domain may use for a CORS request.</span></span> <span data-ttu-id="6fd4e-146">I exemplet ovan tillåts bara PUT- och GET-begäranden.</span><span class="sxs-lookup"><span data-stu-id="6fd4e-146">In the example above, only PUT and GET requests are permitted.</span></span>
* <span data-ttu-id="6fd4e-147">**AllowedHeaders**: huvuden för begäran som den ursprungliga domänen får ange på CORS-begäran.</span><span class="sxs-lookup"><span data-stu-id="6fd4e-147">**AllowedHeaders**: The request headers that the origin domain may specify on the CORS request.</span></span> <span data-ttu-id="6fd4e-148">I exemplet ovan tillåts alla metadata huvuden som börjar med x-ms-metadata, x-ms-meta-mål- och x-ms-meta-abc.</span><span class="sxs-lookup"><span data-stu-id="6fd4e-148">In the example above, all metadata headers starting with x-ms-meta-data, x-ms-meta-target, and x-ms-meta-abc are permitted.</span></span> <span data-ttu-id="6fd4e-149">Observera att jokertecknet ' *' anger att alla huvud som börjar med det angivna prefixet tillåts.</span><span class="sxs-lookup"><span data-stu-id="6fd4e-149">Note that the wildcard character '*' indicates that any header beginning with the specified prefix is allowed.</span></span>
* <span data-ttu-id="6fd4e-150">**ExposedHeaders**: svarshuvuden som kan skickas som svar på begäran CORS och visas av webbläsaren att utfärdaren begäran.</span><span class="sxs-lookup"><span data-stu-id="6fd4e-150">**ExposedHeaders**: The response headers that may be sent in the response to the CORS request and exposed by the browser to the request issuer.</span></span> <span data-ttu-id="6fd4e-151">I exemplet ovan instrueras webbläsaren att exponera en rubrik som börjar med x-ms-metadata.</span><span class="sxs-lookup"><span data-stu-id="6fd4e-151">In the example above, the browser is instructed to expose any header beginning with x-ms-meta.</span></span>
* <span data-ttu-id="6fd4e-152">**MaxAgeInSeconds**: den maximala tiden att webbläsaren ska cachelagrar Preflight-alternativ för begäran.</span><span class="sxs-lookup"><span data-stu-id="6fd4e-152">**MaxAgeInSeconds**: The maximum amount time that a browser should cache the preflight OPTIONS request.</span></span>

<span data-ttu-id="6fd4e-153">Azure-lagringstjänster stöd för att ange prefix huvuden för både den **AllowedHeaders** och **ExposedHeaders** element.</span><span class="sxs-lookup"><span data-stu-id="6fd4e-153">The Azure storage services support specifying prefixed headers for both the **AllowedHeaders** and **ExposedHeaders** elements.</span></span> <span data-ttu-id="6fd4e-154">Du kan ange ett gemensamt prefix till den kategorin för att tillåta en kategori av huvuden.</span><span class="sxs-lookup"><span data-stu-id="6fd4e-154">To allow a category of headers, you can specify a common prefix to that category.</span></span> <span data-ttu-id="6fd4e-155">Ange till exempel *x-ms-meta** som ett prefix huvud upprättar en regel som matchar alla huvuden som börjar med x-ms-metadata.</span><span class="sxs-lookup"><span data-stu-id="6fd4e-155">For example, specifying *x-ms-meta** as a prefixed header establishes a rule that will match all headers that begin with x-ms-meta.</span></span>

<span data-ttu-id="6fd4e-156">Följande begränsningar gäller CORS-regler:</span><span class="sxs-lookup"><span data-stu-id="6fd4e-156">The following limitations apply to CORS rules:</span></span>

* <span data-ttu-id="6fd4e-157">Du kan ange upp till fem CORS-regler per lagringstjänsten (Blob, tabeller och köer).</span><span class="sxs-lookup"><span data-stu-id="6fd4e-157">You can specify up to five CORS rules per storage service (Blob, Table, and Queue).</span></span>
* <span data-ttu-id="6fd4e-158">Den maximala storleken för alla CORS regler inställningar på begäran, exklusive XML-taggar får inte överstiga 2 KB.</span><span class="sxs-lookup"><span data-stu-id="6fd4e-158">The maximum size of all CORS rules settings on the request, excluding XML tags, should not exceed 2 KB.</span></span>
* <span data-ttu-id="6fd4e-159">Längden på ett tillåtna sidhuvud, exponerade sidhuvud eller tillåtna ursprung får innehålla högst 256 tecken.</span><span class="sxs-lookup"><span data-stu-id="6fd4e-159">The length of an allowed header, exposed header, or allowed origin should not exceed 256 characters.</span></span>
* <span data-ttu-id="6fd4e-160">Tillåtna sidhuvuden och exponerade huvuden kan vara antingen:</span><span class="sxs-lookup"><span data-stu-id="6fd4e-160">Allowed headers and exposed headers may be either:</span></span>
  * <span data-ttu-id="6fd4e-161">Literalen sidhuvud, där exakt huvudets namn tillhandahålls som **x-ms-meta-bearbetas**.</span><span class="sxs-lookup"><span data-stu-id="6fd4e-161">Literal headers, where the exact header name is provided, such as **x-ms-meta-processed**.</span></span> <span data-ttu-id="6fd4e-162">Högst 64 literal huvuden kan anges i begäran.</span><span class="sxs-lookup"><span data-stu-id="6fd4e-162">A maximum of 64 literal headers may be specified on the request.</span></span>
  * <span data-ttu-id="6fd4e-163">Prefixet sidhuvud, där prefixet huvudet tillhandahålls som **x-ms-metadata***.</span><span class="sxs-lookup"><span data-stu-id="6fd4e-163">Prefixed headers, where a prefix of the header is provided, such as **x-ms-meta-data***.</span></span> <span data-ttu-id="6fd4e-164">Ange ett prefix i det här sättet kan eller visar de huvuden som börjar med det angivna prefixet.</span><span class="sxs-lookup"><span data-stu-id="6fd4e-164">Specifying a prefix in this manner allows or exposes any header that begins with the given prefix.</span></span> <span data-ttu-id="6fd4e-165">Högst två prefix huvuden kan anges i begäran.</span><span class="sxs-lookup"><span data-stu-id="6fd4e-165">A maximum of two prefixed headers may be specified on the request.</span></span>
* <span data-ttu-id="6fd4e-166">Metoder (eller HTTP-verb) anges i den **AllowedMethods** element måste följa de metoder som stöds av Azure storage-tjänst API: er.</span><span class="sxs-lookup"><span data-stu-id="6fd4e-166">The methods (or HTTP verbs) specified in the **AllowedMethods** element must conform to the methods supported by Azure storage service APIs.</span></span> <span data-ttu-id="6fd4e-167">Metoder som stöds är DELETE, GET, HEAD, MERGE, POST, alternativ och PUT.</span><span class="sxs-lookup"><span data-stu-id="6fd4e-167">Supported methods are DELETE, GET, HEAD, MERGE, POST, OPTIONS and PUT.</span></span>

## <a name="understanding-cors-rule-evaluation-logic"></a><span data-ttu-id="6fd4e-168">Förstå CORS regellogik utvärdering</span><span class="sxs-lookup"><span data-stu-id="6fd4e-168">Understanding CORS rule evaluation logic</span></span>
<span data-ttu-id="6fd4e-169">När storage-tjänst tar emot en begäran preliminära eller faktiska, utvärderar begäran baserat på CORS-regler som du har skapat för tjänsten via åtgärden Ange egenskaper för tjänsten.</span><span class="sxs-lookup"><span data-stu-id="6fd4e-169">When a storage service receives a preflight or actual request, it evaluates that request based on the CORS rules you have established for the service via the appropriate Set Service Properties operation.</span></span> <span data-ttu-id="6fd4e-170">CORS-regler utvärderas i den ordning som de har ställts in i begärandetexten för åtgärden Ange egenskaper för tjänsten.</span><span class="sxs-lookup"><span data-stu-id="6fd4e-170">CORS rules are evaluated in the order in which they were set in the request body of the Set Service Properties operation.</span></span>

<span data-ttu-id="6fd4e-171">CORS-regler utvärderas enligt följande:</span><span class="sxs-lookup"><span data-stu-id="6fd4e-171">CORS rules are evaluated as follows:</span></span>

1. <span data-ttu-id="6fd4e-172">Först ursprungsdomän i begäran kontrolleras mot de domäner som anges för den **AllowedOrigins** element.</span><span class="sxs-lookup"><span data-stu-id="6fd4e-172">First, the origin domain of the request is checked against the domains listed for the **AllowedOrigins** element.</span></span> <span data-ttu-id="6fd4e-173">Om ursprungsdomänen ingår i listan, eller alla domäner som är tillåtna för jokertecknet ' *', regler utvärdering fortsätter.</span><span class="sxs-lookup"><span data-stu-id="6fd4e-173">If the origin domain is included in the list, or all domains are allowed with the wildcard character '*', then rules evaluation proceeds.</span></span> <span data-ttu-id="6fd4e-174">Om den ursprungliga domänen inte finns, misslyckas denna begäran.</span><span class="sxs-lookup"><span data-stu-id="6fd4e-174">If the origin domain is not included, then the request fails.</span></span>
2. <span data-ttu-id="6fd4e-175">Därefter metod (eller HTTP-verb) för begäran kontrolleras mot de metoder som anges i den **AllowedMethods** element.</span><span class="sxs-lookup"><span data-stu-id="6fd4e-175">Next, the method (or HTTP verb) of the request is checked against the methods listed in the **AllowedMethods** element.</span></span> <span data-ttu-id="6fd4e-176">Om metoden ingår i listan, fortsätter regler utvärdering; annars misslyckas begäran.</span><span class="sxs-lookup"><span data-stu-id="6fd4e-176">If the method is included in the list, then rules evaluation proceeds; if not, then the request fails.</span></span>
3. <span data-ttu-id="6fd4e-177">Om begäran matchar en regel i sin ursprungliga domän och dess metod, väljs regeln att bearbeta begäran och inga ytterligare regler utvärderas.</span><span class="sxs-lookup"><span data-stu-id="6fd4e-177">If the request matches a rule in its origin domain and its method, that rule is selected to process the request and no further rules are evaluated.</span></span> <span data-ttu-id="6fd4e-178">Innan begäran kan lyckas men huvuden som anges i begäran kontrolleras mot de rubriker som anges i den **AllowedHeaders** element.</span><span class="sxs-lookup"><span data-stu-id="6fd4e-178">Before the request can succeed, however, any headers specified on the request are checked against the headers listed in the **AllowedHeaders** element.</span></span> <span data-ttu-id="6fd4e-179">Om huvuden som skickas inte matchar de tillåtna rubrikerna, misslyckas denna begäran.</span><span class="sxs-lookup"><span data-stu-id="6fd4e-179">If the headers sent do not match the allowed headers, the request fails.</span></span>

<span data-ttu-id="6fd4e-180">Eftersom regler bearbetas i den ordning som de finns i frågans brödtext rekommenderar bästa praxis att du anger de mest restriktiva reglerna med avseende på ursprung först i listan så att dessa utvärderas först.</span><span class="sxs-lookup"><span data-stu-id="6fd4e-180">Since the rules are processed in the order they are present in the request body, best practices recommend that you specify the most restrictive rules with respect to origins first in the list, so that these are evaluated first.</span></span> <span data-ttu-id="6fd4e-181">Ange regler som är mindre restriktivt – till exempel en regel som tillåter alla ursprung – i slutet av listan.</span><span class="sxs-lookup"><span data-stu-id="6fd4e-181">Specify rules that are less restrictive – for example, a rule to allow all origins – at the end of the list.</span></span>

### <a name="example--cors-rules-evaluation"></a><span data-ttu-id="6fd4e-182">Exempel – CORS regler utvärdering</span><span class="sxs-lookup"><span data-stu-id="6fd4e-182">Example – CORS rules evaluation</span></span>
<span data-ttu-id="6fd4e-183">I följande exempel visas en partiell begärantext för en åtgärd för att ange CORS-regler för storage-tjänster.</span><span class="sxs-lookup"><span data-stu-id="6fd4e-183">The following example shows a partial request body for an operation to set CORS rules for the storage services.</span></span> <span data-ttu-id="6fd4e-184">Se [ange egenskaper för Blob-tjänsten](https://msdn.microsoft.com/library/hh452235.aspx), [ange egenskaper för kön Service](https://msdn.microsoft.com/library/hh452232.aspx), och [ange egenskaper för tabellen Service](https://msdn.microsoft.com/library/hh452240.aspx) information om hur du skapar begäran.</span><span class="sxs-lookup"><span data-stu-id="6fd4e-184">See [Set Blob Service Properties](https://msdn.microsoft.com/library/hh452235.aspx), [Set Queue Service Properties](https://msdn.microsoft.com/library/hh452232.aspx), and [Set Table Service Properties](https://msdn.microsoft.com/library/hh452240.aspx) for details on constructing the request.</span></span>

```xml
<Cors>
    <CorsRule>
        <AllowedOrigins>http://www.contoso.com</AllowedOrigins>
        <AllowedMethods>PUT,HEAD</AllowedMethods>
        <MaxAgeInSeconds>5</MaxAgeInSeconds>
        <ExposedHeaders>x-ms-*</ExposedHeaders>
        <AllowedHeaders>x-ms-blob-content-type, x-ms-blob-content-disposition</AllowedHeaders>
    </CorsRule>
    <CorsRule>
        <AllowedOrigins>*</AllowedOrigins>
        <AllowedMethods>PUT,GET</AllowedMethods>
        <MaxAgeInSeconds>5</MaxAgeInSeconds>
        <ExposedHeaders>x-ms-*</ExposedHeaders>
        <AllowedHeaders>x-ms-blob-content-type, x-ms-blob-content-disposition</AllowedHeaders>
    </CorsRule>
    <CorsRule>
        <AllowedOrigins>http://www.contoso.com</AllowedOrigins>
        <AllowedMethods>GET</AllowedMethods>
        <MaxAgeInSeconds>5</MaxAgeInSeconds>
        <ExposedHeaders>x-ms-*</ExposedHeaders>
        <AllowedHeaders>x-ms-client-request-id</AllowedHeaders>
    </CorsRule>
</Cors>
```

<span data-ttu-id="6fd4e-185">Överväg därefter följande ansökningar om CORS:</span><span class="sxs-lookup"><span data-stu-id="6fd4e-185">Next, consider the following CORS requests:</span></span>

| <span data-ttu-id="6fd4e-186">Förfrågan</span><span class="sxs-lookup"><span data-stu-id="6fd4e-186">Request</span></span> |  |  | <span data-ttu-id="6fd4e-187">Svar</span><span class="sxs-lookup"><span data-stu-id="6fd4e-187">Response</span></span> |  |
| --- | --- | --- | --- | --- |
| <span data-ttu-id="6fd4e-188">**Metoden**</span><span class="sxs-lookup"><span data-stu-id="6fd4e-188">**Method**</span></span> |<span data-ttu-id="6fd4e-189">**Ursprung**</span><span class="sxs-lookup"><span data-stu-id="6fd4e-189">**Origin**</span></span> |<span data-ttu-id="6fd4e-190">**Huvuden för begäran**</span><span class="sxs-lookup"><span data-stu-id="6fd4e-190">**Request Headers**</span></span> |<span data-ttu-id="6fd4e-191">**Regeln matchar**</span><span class="sxs-lookup"><span data-stu-id="6fd4e-191">**Rule Match**</span></span> |<span data-ttu-id="6fd4e-192">**Resultat**</span><span class="sxs-lookup"><span data-stu-id="6fd4e-192">**Result**</span></span> |
| <span data-ttu-id="6fd4e-193">**PLACERA**</span><span class="sxs-lookup"><span data-stu-id="6fd4e-193">**PUT**</span></span> |<span data-ttu-id="6fd4e-194">http://www.contoso.com</span><span class="sxs-lookup"><span data-stu-id="6fd4e-194">http://www.contoso.com</span></span> |<span data-ttu-id="6fd4e-195">x-ms-blob-content-type</span><span class="sxs-lookup"><span data-stu-id="6fd4e-195">x-ms-blob-content-type</span></span> |<span data-ttu-id="6fd4e-196">Första regeln</span><span class="sxs-lookup"><span data-stu-id="6fd4e-196">First rule</span></span> |<span data-ttu-id="6fd4e-197">Lyckades</span><span class="sxs-lookup"><span data-stu-id="6fd4e-197">Success</span></span> |
| <span data-ttu-id="6fd4e-198">**HÄMTA**</span><span class="sxs-lookup"><span data-stu-id="6fd4e-198">**GET**</span></span> |<span data-ttu-id="6fd4e-199">http://www.contoso.com</span><span class="sxs-lookup"><span data-stu-id="6fd4e-199">http://www.contoso.com</span></span> |<span data-ttu-id="6fd4e-200">x-ms-blob-content-type</span><span class="sxs-lookup"><span data-stu-id="6fd4e-200">x-ms-blob-content-type</span></span> |<span data-ttu-id="6fd4e-201">Andra regeln</span><span class="sxs-lookup"><span data-stu-id="6fd4e-201">Second rule</span></span> |<span data-ttu-id="6fd4e-202">Lyckades</span><span class="sxs-lookup"><span data-stu-id="6fd4e-202">Success</span></span> |
| <span data-ttu-id="6fd4e-203">**HÄMTA**</span><span class="sxs-lookup"><span data-stu-id="6fd4e-203">**GET**</span></span> |<span data-ttu-id="6fd4e-204">http://www.contoso.com</span><span class="sxs-lookup"><span data-stu-id="6fd4e-204">http://www.contoso.com</span></span> |<span data-ttu-id="6fd4e-205">x-ms-client-request-id</span><span class="sxs-lookup"><span data-stu-id="6fd4e-205">x-ms-client-request-id</span></span> |<span data-ttu-id="6fd4e-206">Andra regeln</span><span class="sxs-lookup"><span data-stu-id="6fd4e-206">Second rule</span></span> |<span data-ttu-id="6fd4e-207">Fel</span><span class="sxs-lookup"><span data-stu-id="6fd4e-207">Failure</span></span> |

<span data-ttu-id="6fd4e-208">Den första begäranden matchar den första regeln – den ursprungliga domänen matchar tillåtna ursprung, metoden matchar tillåtna metoder och huvudet matchar tillåtna huvuden – och så lyckas.</span><span class="sxs-lookup"><span data-stu-id="6fd4e-208">The first request matches the first rule – the origin domain matches the allowed origins, the method matches the allowed methods, and the header matches the allowed headers – and so succeeds.</span></span>

<span data-ttu-id="6fd4e-209">Andra begäran matchar inte den första regeln eftersom metoden inte matchar de tillåtna metoderna.</span><span class="sxs-lookup"><span data-stu-id="6fd4e-209">The second request does not match the first rule because the method does not match the allowed methods.</span></span> <span data-ttu-id="6fd4e-210">Den, men matchar den andra regeln, så den lyckas.</span><span class="sxs-lookup"><span data-stu-id="6fd4e-210">It does, however, match the second rule, so it succeeds.</span></span>

<span data-ttu-id="6fd4e-211">Tredje begäran matchar den andra regeln i dess ursprungsdomän och metod, så inga ytterligare regler utvärderas.</span><span class="sxs-lookup"><span data-stu-id="6fd4e-211">The third request matches the second rule in its origin domain and method, so no further rules are evaluated.</span></span> <span data-ttu-id="6fd4e-212">Men den *x-ms-client-request-id-huvudet* tillåts inte av den andra regeln, så begäran misslyckas trots semantiken för tredje regeln skulle användas till att lyckas.</span><span class="sxs-lookup"><span data-stu-id="6fd4e-212">However, the *x-ms-client-request-id header* is not allowed by the second rule, so the request fails, despite the fact that the semantics of the third rule would have allowed it to succeed.</span></span>

> [!NOTE]
> <span data-ttu-id="6fd4e-213">Även om det här exemplet illustrerar en mindre begränsande regel innan en mer begränsande, vanligtvis det bästa sättet är att visa de mest restriktiva reglerna först.</span><span class="sxs-lookup"><span data-stu-id="6fd4e-213">Although this example shows a less restrictive rule before a more restrictive one, in general the best practice is to list the most restrictive rules first.</span></span>
> 
> 

## <a name="understanding-how-the-vary-header-is-set"></a><span data-ttu-id="6fd4e-214">Förstå hur Vary-huvud har angetts</span><span class="sxs-lookup"><span data-stu-id="6fd4e-214">Understanding how the Vary header is set</span></span>
<span data-ttu-id="6fd4e-215">Den *variera* huvud är en standard HTTP/1.1-rubrik som består av en uppsättning begäran huvudfält som meddela agenten webbläsare eller användare om de kriterier som valts av servern vid bearbetning av begäran.</span><span class="sxs-lookup"><span data-stu-id="6fd4e-215">The *Vary* header is a standard HTTP/1.1 header consisting of a set of request header fields that advise the browser or user agent about the criteria that were selected by the server to process the request.</span></span> <span data-ttu-id="6fd4e-216">Den *variera* huvud används huvudsakligen för cachelagring av proxyservrar, webbläsare och andra CDN-lösningar, som använder den för att fastställa hur svaret ska cachelagras.</span><span class="sxs-lookup"><span data-stu-id="6fd4e-216">The *Vary* header is mainly used for caching by proxies, browsers, and CDNs, which use it to determine how the response should be cached.</span></span> <span data-ttu-id="6fd4e-217">Mer information finns i specifikationen för den [Vary-huvud](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html).</span><span class="sxs-lookup"><span data-stu-id="6fd4e-217">For details, see the specification for the [Vary header](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html).</span></span>

<span data-ttu-id="6fd4e-218">När webbläsaren eller en annan användaragent cachelagrar svaret från en CORS-begäran, cachelagras ursprungsdomänen som tillåtna ursprung.</span><span class="sxs-lookup"><span data-stu-id="6fd4e-218">When the browser or another user agent caches the response from a CORS request, the origin domain is cached as the allowed origin.</span></span> <span data-ttu-id="6fd4e-219">När en domän skickar samma begäran om en lagringsresurs när cachen är aktiv, hämtar användaragenten cachelagrade ursprungliga domän.</span><span class="sxs-lookup"><span data-stu-id="6fd4e-219">When a second domain issues the same request for a storage resource while the cache is active, the user agent retrieves the cached origin domain.</span></span> <span data-ttu-id="6fd4e-220">Den andra domänen matchar inte domänen cachelagrade, så misslyckas med begäran när den annars skulle lyckas.</span><span class="sxs-lookup"><span data-stu-id="6fd4e-220">The second domain does not match the cached domain, so the request fails when it would otherwise succeed.</span></span> <span data-ttu-id="6fd4e-221">I vissa fall anger Azure Storage Vary-huvud till **ursprung** instruera användaragent skicka efterföljande CORS-begäran till tjänsten när domänen begärande skiljer sig från det cachelagrade ursprunget.</span><span class="sxs-lookup"><span data-stu-id="6fd4e-221">In certain cases, Azure Storage sets the Vary header to **Origin** to instruct the user agent to send the subsequent CORS request to the service when the requesting domain differs from the cached origin.</span></span>

<span data-ttu-id="6fd4e-222">Azure Storage-anger den *variera* sidhuvud till **ursprung** för faktiska GET/HEAD-begäranden i följande fall:</span><span class="sxs-lookup"><span data-stu-id="6fd4e-222">Azure Storage sets the *Vary* header to **Origin** for actual GET/HEAD requests in the following cases:</span></span>

* <span data-ttu-id="6fd4e-223">När begäran ursprung matchar exakt tillåtna ursprung definieras av en regel för CORS.</span><span class="sxs-lookup"><span data-stu-id="6fd4e-223">When the request origin exactly matches the allowed origin defined by a CORS rule.</span></span> <span data-ttu-id="6fd4e-224">För att vara en exakt matchning CORS regeln inte innehåller jokertecken ' * ' tecken.</span><span class="sxs-lookup"><span data-stu-id="6fd4e-224">To be an exact match, the CORS rule may not include a wildcard ' * ' character.</span></span>
* <span data-ttu-id="6fd4e-225">Det finns ingen regel som matchar begäran ursprung, men CORS är aktiverat för storage-tjänst.</span><span class="sxs-lookup"><span data-stu-id="6fd4e-225">There is no rule matching the request origin, but CORS is enabled for the storage service.</span></span>

<span data-ttu-id="6fd4e-226">I de fall där en GET/HEAD-begäran matchar en CORS-regel som tillåter alla ursprung, anger svaret att alla ursprung är tillåtna och agent användarcachen tillåter efterföljande förfrågningar från alla ursprungsdomän när cachen är aktiv.</span><span class="sxs-lookup"><span data-stu-id="6fd4e-226">In the case where a GET/HEAD request matches a CORS rule that allows all origins, the response indicates that all origins are allowed, and the user agent cache will allow subsequent requests from any origin domain while the cache is active.</span></span>

<span data-ttu-id="6fd4e-227">Observera att för begäranden med andra metoder än GET/HEAD, storage-tjänster kommer inte att ange Vary-huvud eftersom svar på dessa metoder inte cachelagras av användaragenter.</span><span class="sxs-lookup"><span data-stu-id="6fd4e-227">Note that for requests using methods other than GET/HEAD, the storage services will not set the Vary header, since responses to these methods are not cached by user agents.</span></span>

<span data-ttu-id="6fd4e-228">Följande tabell visar hur Azure storage svarar på GET/HEAD-begäranden baserat på de tidigare nämnda fall:</span><span class="sxs-lookup"><span data-stu-id="6fd4e-228">The following table indicates how Azure storage will respond to GET/HEAD requests based on the previously mentioned cases:</span></span>

| <span data-ttu-id="6fd4e-229">Förfrågan</span><span class="sxs-lookup"><span data-stu-id="6fd4e-229">Request</span></span> | <span data-ttu-id="6fd4e-230">Kontoinställningen och resultat av utvärderingen av distributionsregeln</span><span class="sxs-lookup"><span data-stu-id="6fd4e-230">Account setting and result of rule evaluation</span></span> |  |  | <span data-ttu-id="6fd4e-231">Svar</span><span class="sxs-lookup"><span data-stu-id="6fd4e-231">Response</span></span> |  |  |
| --- | --- | --- | --- | --- | --- | --- | --- | --- |
| <span data-ttu-id="6fd4e-232">**Ursprung huvudet finns på begäran**</span><span class="sxs-lookup"><span data-stu-id="6fd4e-232">**Origin header present on request**</span></span> |<span data-ttu-id="6fd4e-233">**CORS-regler som angetts för denna tjänst**</span><span class="sxs-lookup"><span data-stu-id="6fd4e-233">**CORS rule(s) specified for this service**</span></span> |<span data-ttu-id="6fd4e-234">**Det finns matchande regel som tillåter alla ursprung (*)**</span><span class="sxs-lookup"><span data-stu-id="6fd4e-234">**Matching rule exists that allows all origins(*)**</span></span> |<span data-ttu-id="6fd4e-235">**Matchande regel som finns för ursprung exakt matchning**</span><span class="sxs-lookup"><span data-stu-id="6fd4e-235">**Matching rule exists for exact origin match**</span></span> |<span data-ttu-id="6fd4e-236">**Svaret innehåller Vary-huvudet inställt till ursprung**</span><span class="sxs-lookup"><span data-stu-id="6fd4e-236">**Response includes Vary header set to Origin**</span></span> |<span data-ttu-id="6fd4e-237">**Svaret innehåller Access Control-tillåtna-ursprung ”:*”**</span><span class="sxs-lookup"><span data-stu-id="6fd4e-237">**Response includes Access-Control-Allowed-Origin: "*"**</span></span> |<span data-ttu-id="6fd4e-238">**Svaret innehåller Access-Control-exponeras-rubriker**</span><span class="sxs-lookup"><span data-stu-id="6fd4e-238">**Response includes Access-Control-Exposed-Headers**</span></span> |
| <span data-ttu-id="6fd4e-239">Nej</span><span class="sxs-lookup"><span data-stu-id="6fd4e-239">No</span></span> |<span data-ttu-id="6fd4e-240">Nej</span><span class="sxs-lookup"><span data-stu-id="6fd4e-240">No</span></span> |<span data-ttu-id="6fd4e-241">Nej</span><span class="sxs-lookup"><span data-stu-id="6fd4e-241">No</span></span> |<span data-ttu-id="6fd4e-242">Nej</span><span class="sxs-lookup"><span data-stu-id="6fd4e-242">No</span></span> |<span data-ttu-id="6fd4e-243">Nej</span><span class="sxs-lookup"><span data-stu-id="6fd4e-243">No</span></span> |<span data-ttu-id="6fd4e-244">Nej</span><span class="sxs-lookup"><span data-stu-id="6fd4e-244">No</span></span> |<span data-ttu-id="6fd4e-245">Nej</span><span class="sxs-lookup"><span data-stu-id="6fd4e-245">No</span></span> |
| <span data-ttu-id="6fd4e-246">Nej</span><span class="sxs-lookup"><span data-stu-id="6fd4e-246">No</span></span> |<span data-ttu-id="6fd4e-247">Ja</span><span class="sxs-lookup"><span data-stu-id="6fd4e-247">Yes</span></span> |<span data-ttu-id="6fd4e-248">Nej</span><span class="sxs-lookup"><span data-stu-id="6fd4e-248">No</span></span> |<span data-ttu-id="6fd4e-249">Nej</span><span class="sxs-lookup"><span data-stu-id="6fd4e-249">No</span></span> |<span data-ttu-id="6fd4e-250">Ja</span><span class="sxs-lookup"><span data-stu-id="6fd4e-250">Yes</span></span> |<span data-ttu-id="6fd4e-251">Nej</span><span class="sxs-lookup"><span data-stu-id="6fd4e-251">No</span></span> |<span data-ttu-id="6fd4e-252">Nej</span><span class="sxs-lookup"><span data-stu-id="6fd4e-252">No</span></span> |
| <span data-ttu-id="6fd4e-253">Nej</span><span class="sxs-lookup"><span data-stu-id="6fd4e-253">No</span></span> |<span data-ttu-id="6fd4e-254">Ja</span><span class="sxs-lookup"><span data-stu-id="6fd4e-254">Yes</span></span> |<span data-ttu-id="6fd4e-255">Ja</span><span class="sxs-lookup"><span data-stu-id="6fd4e-255">Yes</span></span> |<span data-ttu-id="6fd4e-256">Nej</span><span class="sxs-lookup"><span data-stu-id="6fd4e-256">No</span></span> |<span data-ttu-id="6fd4e-257">Nej</span><span class="sxs-lookup"><span data-stu-id="6fd4e-257">No</span></span> |<span data-ttu-id="6fd4e-258">Ja</span><span class="sxs-lookup"><span data-stu-id="6fd4e-258">Yes</span></span> |<span data-ttu-id="6fd4e-259">Ja</span><span class="sxs-lookup"><span data-stu-id="6fd4e-259">Yes</span></span> |
| <span data-ttu-id="6fd4e-260">Ja</span><span class="sxs-lookup"><span data-stu-id="6fd4e-260">Yes</span></span> |<span data-ttu-id="6fd4e-261">Nej</span><span class="sxs-lookup"><span data-stu-id="6fd4e-261">No</span></span> |<span data-ttu-id="6fd4e-262">Nej</span><span class="sxs-lookup"><span data-stu-id="6fd4e-262">No</span></span> |<span data-ttu-id="6fd4e-263">Nej</span><span class="sxs-lookup"><span data-stu-id="6fd4e-263">No</span></span> |<span data-ttu-id="6fd4e-264">Nej</span><span class="sxs-lookup"><span data-stu-id="6fd4e-264">No</span></span> |<span data-ttu-id="6fd4e-265">Nej</span><span class="sxs-lookup"><span data-stu-id="6fd4e-265">No</span></span> |<span data-ttu-id="6fd4e-266">Nej</span><span class="sxs-lookup"><span data-stu-id="6fd4e-266">No</span></span> |
| <span data-ttu-id="6fd4e-267">Ja</span><span class="sxs-lookup"><span data-stu-id="6fd4e-267">Yes</span></span> |<span data-ttu-id="6fd4e-268">Ja</span><span class="sxs-lookup"><span data-stu-id="6fd4e-268">Yes</span></span> |<span data-ttu-id="6fd4e-269">Nej</span><span class="sxs-lookup"><span data-stu-id="6fd4e-269">No</span></span> |<span data-ttu-id="6fd4e-270">Ja</span><span class="sxs-lookup"><span data-stu-id="6fd4e-270">Yes</span></span> |<span data-ttu-id="6fd4e-271">Ja</span><span class="sxs-lookup"><span data-stu-id="6fd4e-271">Yes</span></span> |<span data-ttu-id="6fd4e-272">Nej</span><span class="sxs-lookup"><span data-stu-id="6fd4e-272">No</span></span> |<span data-ttu-id="6fd4e-273">Ja</span><span class="sxs-lookup"><span data-stu-id="6fd4e-273">Yes</span></span> |
| <span data-ttu-id="6fd4e-274">Ja</span><span class="sxs-lookup"><span data-stu-id="6fd4e-274">Yes</span></span> |<span data-ttu-id="6fd4e-275">Ja</span><span class="sxs-lookup"><span data-stu-id="6fd4e-275">Yes</span></span> |<span data-ttu-id="6fd4e-276">Nej</span><span class="sxs-lookup"><span data-stu-id="6fd4e-276">No</span></span> |<span data-ttu-id="6fd4e-277">Nej</span><span class="sxs-lookup"><span data-stu-id="6fd4e-277">No</span></span> |<span data-ttu-id="6fd4e-278">Ja</span><span class="sxs-lookup"><span data-stu-id="6fd4e-278">Yes</span></span> |<span data-ttu-id="6fd4e-279">Nej</span><span class="sxs-lookup"><span data-stu-id="6fd4e-279">No</span></span> |<span data-ttu-id="6fd4e-280">Nej</span><span class="sxs-lookup"><span data-stu-id="6fd4e-280">No</span></span> |
| <span data-ttu-id="6fd4e-281">Ja</span><span class="sxs-lookup"><span data-stu-id="6fd4e-281">Yes</span></span> |<span data-ttu-id="6fd4e-282">Ja</span><span class="sxs-lookup"><span data-stu-id="6fd4e-282">Yes</span></span> |<span data-ttu-id="6fd4e-283">Ja</span><span class="sxs-lookup"><span data-stu-id="6fd4e-283">Yes</span></span> |<span data-ttu-id="6fd4e-284">Nej</span><span class="sxs-lookup"><span data-stu-id="6fd4e-284">No</span></span> |<span data-ttu-id="6fd4e-285">Nej</span><span class="sxs-lookup"><span data-stu-id="6fd4e-285">No</span></span> |<span data-ttu-id="6fd4e-286">Ja</span><span class="sxs-lookup"><span data-stu-id="6fd4e-286">Yes</span></span> |<span data-ttu-id="6fd4e-287">Ja</span><span class="sxs-lookup"><span data-stu-id="6fd4e-287">Yes</span></span> |

## <a name="billing-for-cors-requests"></a><span data-ttu-id="6fd4e-288">Fakturering för CORS-begäranden</span><span class="sxs-lookup"><span data-stu-id="6fd4e-288">Billing for CORS requests</span></span>
<span data-ttu-id="6fd4e-289">Lyckad preflight begär debiteras om du har aktiverat CORS för lagringstjänster för ditt konto (genom att anropa [ange egenskaper för Blob-tjänsten](https://msdn.microsoft.com/library/hh452235.aspx), [ange egenskaper för kön Service](https://msdn.microsoft.com/library/hh452232.aspx), eller [Ange egenskaper för tabellen](https://msdn.microsoft.com/library/hh452240.aspx)).</span><span class="sxs-lookup"><span data-stu-id="6fd4e-289">Successful preflight requests are billed if you have enabled CORS for any of the storage services for your account (by calling [Set Blob Service Properties](https://msdn.microsoft.com/library/hh452235.aspx), [Set Queue Service Properties](https://msdn.microsoft.com/library/hh452232.aspx), or [Set Table Service Properties](https://msdn.microsoft.com/library/hh452240.aspx)).</span></span> <span data-ttu-id="6fd4e-290">För att minimera kostnader, bör du ställa av **MaxAgeInSeconds** element i din CORS-regler till ett högt värde så att användaragenten cachelagrar begäran.</span><span class="sxs-lookup"><span data-stu-id="6fd4e-290">To minimize charges, consider setting the **MaxAgeInSeconds** element in your CORS rules to a large value so that the user agent caches the request.</span></span>

<span data-ttu-id="6fd4e-291">Kommer inte att debiteras misslyckade preflight-begäranden.</span><span class="sxs-lookup"><span data-stu-id="6fd4e-291">Unsuccessful preflight requests will not be billed.</span></span>

## <a name="next-steps"></a><span data-ttu-id="6fd4e-292">Nästa steg</span><span class="sxs-lookup"><span data-stu-id="6fd4e-292">Next steps</span></span>
[<span data-ttu-id="6fd4e-293">Ange egenskaper för Blob-tjänst</span><span class="sxs-lookup"><span data-stu-id="6fd4e-293">Set Blob Service Properties</span></span>](https://msdn.microsoft.com/library/hh452235.aspx)

[<span data-ttu-id="6fd4e-294">Ange egenskaper för kön</span><span class="sxs-lookup"><span data-stu-id="6fd4e-294">Set Queue Service Properties</span></span>](https://msdn.microsoft.com/library/hh452232.aspx)

[<span data-ttu-id="6fd4e-295">Ange egenskaper för tabellen</span><span class="sxs-lookup"><span data-stu-id="6fd4e-295">Set Table Service Properties</span></span>](https://msdn.microsoft.com/library/hh452240.aspx)

[<span data-ttu-id="6fd4e-296">W3C Cross-Origin Resource Sharing specifikation</span><span class="sxs-lookup"><span data-stu-id="6fd4e-296">W3C Cross-Origin Resource Sharing Specification</span></span>](http://www.w3.org/TR/cors/)


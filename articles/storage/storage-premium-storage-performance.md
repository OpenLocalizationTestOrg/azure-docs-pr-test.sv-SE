---
title: "Azure Premium Storage: Utforma för prestanda | Microsoft Docs"
description: "Utforma program med höga prestanda med Azure Premium-lagring. Premium-lagring ger stöd för I/O-intensiva arbetsbelastningar som körs på Azure Virtual Machines diskar med hög prestanda, låg latens."
services: storage
documentationcenter: na
author: aungoo-msft
manager: tadb
editor: tysonn
ms.assetid: e6a409c3-d31a-4704-a93c-0a04fdc95960
ms.service: storage
ms.workload: storage
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 06/27/2017
ms.author: aungoo
ms.openlocfilehash: 7bd38be9f8e1160ebf0d7c5ed51fd31d89481881
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: sv-SE
ms.lasthandoff: 07/11/2017
---
# <a name="azure-premium-storage-design-for-high-performance"></a><span data-ttu-id="a2aba-104">Azure Premium Storage: Design för hög prestanda</span><span class="sxs-lookup"><span data-stu-id="a2aba-104">Azure Premium Storage: Design for High Performance</span></span>
## <a name="overview"></a><span data-ttu-id="a2aba-105">Översikt</span><span class="sxs-lookup"><span data-stu-id="a2aba-105">Overview</span></span>
<span data-ttu-id="a2aba-106">Den här artikeln innehåller riktlinjer för att bygga program med Azure Premium-lagring med hög prestanda.</span><span class="sxs-lookup"><span data-stu-id="a2aba-106">This article provides guidelines for building high performance applications using Azure Premium Storage.</span></span> <span data-ttu-id="a2aba-107">Du kan använda instruktionerna i det här dokumentet som kombineras med prestandarelaterade metodtips gäller för tekniker som används av ditt program.</span><span class="sxs-lookup"><span data-stu-id="a2aba-107">You can use the instructions provided in this document combined with performance best practices applicable to technologies used by your application.</span></span> <span data-ttu-id="a2aba-108">För att illustrera riktlinjerna har vi använt SQL Server körs på Premium-lagring som exempel i hela dokumentet.</span><span class="sxs-lookup"><span data-stu-id="a2aba-108">To illustrate the guidelines, we have used SQL Server running on Premium Storage as an example throughout this document.</span></span>

<span data-ttu-id="a2aba-109">Medan vi adress prestanda scenarier för lagringsskikt i den här artikeln, behöver du optimera Applikationsnivån.</span><span class="sxs-lookup"><span data-stu-id="a2aba-109">While we address performance scenarios for the Storage layer in this article, you will need to optimize the application layer.</span></span> <span data-ttu-id="a2aba-110">Om du är värd för en SharePoint-grupp på Azure Premium-lagring, kan du till exempel använda SQL Server-exempel från den här artikeln för att optimera databasservern.</span><span class="sxs-lookup"><span data-stu-id="a2aba-110">For example, if you are hosting a SharePoint Farm on Azure Premium Storage, you can use the SQL Server examples from this article to optimize the database server.</span></span> <span data-ttu-id="a2aba-111">Dessutom optimera SharePoint-servergruppen webbservern och få de flesta prestanda-programserver.</span><span class="sxs-lookup"><span data-stu-id="a2aba-111">Additionally, optimize the SharePoint Farm's Web server and Application server to get the most performance.</span></span>

<span data-ttu-id="a2aba-112">Den här artikeln hjälper dig att besvara följande frågor om hur du optimerar prestanda på Azure Premium-lagring</span><span class="sxs-lookup"><span data-stu-id="a2aba-112">This article will help answer following common questions about optimizing application performance on Azure Premium Storage,</span></span>

* <span data-ttu-id="a2aba-113">Hur mäter programmets prestanda?</span><span class="sxs-lookup"><span data-stu-id="a2aba-113">How to measure your application performance?</span></span>  
* <span data-ttu-id="a2aba-114">Varför du inte ser förväntade högpresterande?</span><span class="sxs-lookup"><span data-stu-id="a2aba-114">Why are you not seeing expected high performance?</span></span>  
* <span data-ttu-id="a2aba-115">Vilka faktorer som påverkar ditt programprestanda på Premium-lagring?</span><span class="sxs-lookup"><span data-stu-id="a2aba-115">Which factors influence your application performance on Premium Storage?</span></span>  
* <span data-ttu-id="a2aba-116">Hur påverkar prestanda för programmet på Premium-lagring av dessa faktorer?</span><span class="sxs-lookup"><span data-stu-id="a2aba-116">How do these factors influence performance of your application on Premium Storage?</span></span>  
* <span data-ttu-id="a2aba-117">Hur kan optimeras för IOPS, bandbredd och fördröjning?</span><span class="sxs-lookup"><span data-stu-id="a2aba-117">How can you optimize for IOPS, Bandwidth and Latency?</span></span>  

<span data-ttu-id="a2aba-118">Vi har angett dessa riktlinjer för Premium-lagring eftersom arbetsbelastningar som körs på Premium-lagring är mycket känslig prestanda.</span><span class="sxs-lookup"><span data-stu-id="a2aba-118">We have provided these guidelines specifically for Premium Storage because workloads running on Premium Storage are highly performance sensitive.</span></span> <span data-ttu-id="a2aba-119">Vi har samlat exempel där det behövs.</span><span class="sxs-lookup"><span data-stu-id="a2aba-119">We have provided examples where appropriate.</span></span> <span data-ttu-id="a2aba-120">Du kan också använda några av dessa riktlinjer för att program som körs på virtuella IaaS-datorer med standardlagring diskar.</span><span class="sxs-lookup"><span data-stu-id="a2aba-120">You can also apply some of these guidelines to applications running on IaaS VMs with Standard Storage disks.</span></span>

<span data-ttu-id="a2aba-121">Innan du börjar, om du är nybörjare till Premium-lagring, läsa den [Premium-lagring: högpresterande lagring för arbetsbelastningar på virtuella Azure](storage-premium-storage.md) och [Azure Storage skalbarhets- och prestandamål](storage-scalability-targets.md)artiklar.</span><span class="sxs-lookup"><span data-stu-id="a2aba-121">Before you begin, if you are new to Premium Storage, first read the [Premium Storage: High-Performance Storage for Azure Virtual Machine Workloads](storage-premium-storage.md) and [Azure Storage Scalability and Performance Targets](storage-scalability-targets.md) articles.</span></span>

## <a name="application-performance-indicators"></a><span data-ttu-id="a2aba-122">Nyckeltal för programmet</span><span class="sxs-lookup"><span data-stu-id="a2aba-122">Application Performance Indicators</span></span>
<span data-ttu-id="a2aba-123">Vi bedöma om ett program fungerar bra eller inte använda prestanda symboler som, hur snabbt ett bearbetning av en användarbegäran, hur mycket data som bearbetar ett program per begäran, hur många begäranden som bearbetas ett program i en specifik tidsperiod, hur lång tid en användare har väntetiden för att få svar efter att ha skickat begäran.</span><span class="sxs-lookup"><span data-stu-id="a2aba-123">We assess whether an application is performing well or not using performance indicators like, how fast an application is processing a user request, how much data an application is processing per request, how many requests is an application processing in a specific period of time, how long a user has to wait to get a response after submitting their request.</span></span> <span data-ttu-id="a2aba-124">Termerna för dessa nyckeltal är IOPS, genomflöde eller bandbredd och svarstid.</span><span class="sxs-lookup"><span data-stu-id="a2aba-124">The technical terms for these performance indicators are, IOPS, Throughput or Bandwidth, and Latency.</span></span>

<span data-ttu-id="a2aba-125">I det här avsnittet diskuteras vanliga nyckeltal i samband med Premium-lagring.</span><span class="sxs-lookup"><span data-stu-id="a2aba-125">In this section, we will discuss the common performance indicators in the context of Premium Storage.</span></span> <span data-ttu-id="a2aba-126">I följande avsnitt, samlar in programkrav lära du dig att mäta dessa nyckeltal för ditt program.</span><span class="sxs-lookup"><span data-stu-id="a2aba-126">In the following section, Gathering Application Requirements, you will learn how to measure these performance indicators for your application.</span></span> <span data-ttu-id="a2aba-127">Du kommer information om de faktorer som påverkar dessa nyckeltal och rekommendationer för att optimera dem senare i Optimera programprestanda.</span><span class="sxs-lookup"><span data-stu-id="a2aba-127">Later in Optimizing Application Performance, you will learn about the factors affecting these performance indicators and recommendations to optimize them.</span></span>

## <a name="iops"></a><span data-ttu-id="a2aba-128">IOPS</span><span class="sxs-lookup"><span data-stu-id="a2aba-128">IOPS</span></span>
<span data-ttu-id="a2aba-129">IOPS är antalet begäranden som programmet skickar till diskar med lagringsutrymme i en sekund.</span><span class="sxs-lookup"><span data-stu-id="a2aba-129">IOPS is number of requests that your application is sending to the storage disks in one second.</span></span> <span data-ttu-id="a2aba-130">Ett i/o-åtgärden gick att läsa eller skriva sekventiellt eller slumpmässigt.</span><span class="sxs-lookup"><span data-stu-id="a2aba-130">An input/output operation could be read or write, sequential or random.</span></span> <span data-ttu-id="a2aba-131">OLTP-program som en online retail-webbplats måste du bearbeta begäranden för många samtidiga användare omedelbart.</span><span class="sxs-lookup"><span data-stu-id="a2aba-131">OLTP applications like an online retail website need to process many concurrent user requests immediately.</span></span> <span data-ttu-id="a2aba-132">Användaren begär är insert och uppdatera beräkningsintensiva databastransaktioner som programmet måste bearbeta snabbt.</span><span class="sxs-lookup"><span data-stu-id="a2aba-132">The user requests are insert and update intensive database transactions, which the application must process quickly.</span></span> <span data-ttu-id="a2aba-133">Därför kräver OLTP program mycket hög IOPS.</span><span class="sxs-lookup"><span data-stu-id="a2aba-133">Therefore, OLTP applications require very high IOPS.</span></span> <span data-ttu-id="a2aba-134">Dessa program hanterar miljontals små och slumpmässiga i/o-begäranden.</span><span class="sxs-lookup"><span data-stu-id="a2aba-134">Such applications handle millions of small and random IO requests.</span></span> <span data-ttu-id="a2aba-135">Om du har ett sådant program, måste du utforma infrastruktur för programmet att optimera för IOPS.</span><span class="sxs-lookup"><span data-stu-id="a2aba-135">If you have such an application, you must design the application infrastructure to optimize for IOPS.</span></span> <span data-ttu-id="a2aba-136">I avsnittet senare *optimera programprestanda*, diskuterar vi i detalj de faktorer som du måste tänka på att få hög IOPS.</span><span class="sxs-lookup"><span data-stu-id="a2aba-136">In the later section, *Optimizing Application Performance*, we discuss in detail all the factors that you must consider to get high IOPS.</span></span>

<span data-ttu-id="a2aba-137">När du kopplar en premium storage disk till hög nivå VM, Azure tillhandahåller du en garanterad antalet IOPS enligt specifikationen disk.</span><span class="sxs-lookup"><span data-stu-id="a2aba-137">When you attach a premium storage disk to your high scale VM, Azure provisions for you a guaranteed number of IOPS as per the disk specification.</span></span> <span data-ttu-id="a2aba-138">Till exempel etablerar en disk p 50 7500 IOPS.</span><span class="sxs-lookup"><span data-stu-id="a2aba-138">For example, a P50 disk provisions 7500 IOPS.</span></span> <span data-ttu-id="a2aba-139">Varje hög skala VM-storlek har också en specifik IOPS-gräns som den kan klara.</span><span class="sxs-lookup"><span data-stu-id="a2aba-139">Each high scale VM size also has a specific IOPS limit that it can sustain.</span></span> <span data-ttu-id="a2aba-140">Till exempel har en Standard GS5 VM 80 000 IOPS begränsa.</span><span class="sxs-lookup"><span data-stu-id="a2aba-140">For example, a Standard GS5 VM has 80,000 IOPS limit.</span></span>

## <a name="throughput"></a><span data-ttu-id="a2aba-141">Dataflöde</span><span class="sxs-lookup"><span data-stu-id="a2aba-141">Throughput</span></span>
<span data-ttu-id="a2aba-142">Genomströmning eller bandbredd är mängden data som programmet skickar till diskar med lagringsutrymme i ett visst intervall.</span><span class="sxs-lookup"><span data-stu-id="a2aba-142">Throughput or Bandwidth is the amount of data that your application is sending to the storage disks in a specified interval.</span></span> <span data-ttu-id="a2aba-143">Om ditt program fungerar i/o-åtgärder med större stora i/o, kräver hög genomströmning.</span><span class="sxs-lookup"><span data-stu-id="a2aba-143">If your application is performing input/output operations with large IO unit sizes, it requires high Throughput.</span></span> <span data-ttu-id="a2aba-144">Data warehouse program tenderar att utfärda beräkningsintensiva genomsökningen som åtkomst till stora delar av data i taget och utföra vanliga massåtgärder.</span><span class="sxs-lookup"><span data-stu-id="a2aba-144">Data warehouse applications tend to issue scan intensive operations that access large portions of data at a time and commonly perform bulk operations.</span></span> <span data-ttu-id="a2aba-145">Med andra ord kräver sådana program högre genomströmning.</span><span class="sxs-lookup"><span data-stu-id="a2aba-145">In other words, such applications require higher Throughput.</span></span> <span data-ttu-id="a2aba-146">Om du har ett sådant program, måste du utforma infrastruktur för att optimera för genomströmning.</span><span class="sxs-lookup"><span data-stu-id="a2aba-146">If you have such an application, you must design its infrastructure to optimize for Throughput.</span></span> <span data-ttu-id="a2aba-147">I nästa avsnitt diskuterar vi i detalj de faktorer som du måste justera för att åstadkomma detta.</span><span class="sxs-lookup"><span data-stu-id="a2aba-147">In the next section, we discuss in detail the factors you must tune to achieve this.</span></span>

<span data-ttu-id="a2aba-148">När du bifoga en premium storage disk till en virtuell dator med hög skala Azure tillhandahåller genomströmning enligt specifikationen för disken.</span><span class="sxs-lookup"><span data-stu-id="a2aba-148">When you attach a premium storage disk to a high scale VM, Azure provisions Throughput as per that disk specification.</span></span> <span data-ttu-id="a2aba-149">Till exempel etablerar en disk p 50 250 MB per andra disken genomflöde.</span><span class="sxs-lookup"><span data-stu-id="a2aba-149">For example, a P50 disk provisions 250 MB per second disk Throughput.</span></span> <span data-ttu-id="a2aba-150">Varje hög skala VM-storlek har också som särskild genomströmningen gräns som den kan klara.</span><span class="sxs-lookup"><span data-stu-id="a2aba-150">Each high scale VM size also has as specific Throughput limit that it can sustain.</span></span> <span data-ttu-id="a2aba-151">Standard GS5 VM har till exempel en maximalt dataflöde 2 000 MB per sekund.</span><span class="sxs-lookup"><span data-stu-id="a2aba-151">For example, Standard GS5 VM has a maximum throughput of 2,000 MB per second.</span></span> 

<span data-ttu-id="a2aba-152">Det finns en relation mellan genomflöde och IOPS enligt nedanstående formel.</span><span class="sxs-lookup"><span data-stu-id="a2aba-152">There is a relation between Throughput and IOPS as shown in the formula below.</span></span>

![](media/storage-premium-storage-performance/image1.png)

<span data-ttu-id="a2aba-153">Det är därför viktigt att fastställa optimal genomströmning och IOPS-värden som krävs för ditt program.</span><span class="sxs-lookup"><span data-stu-id="a2aba-153">Therefore, it is important to determine the optimal Throughput and IOPS values that your application requires.</span></span> <span data-ttu-id="a2aba-154">När du försöker att optimera en hämtar andra också påverkas.</span><span class="sxs-lookup"><span data-stu-id="a2aba-154">As you try to optimize one, the other also gets affected.</span></span> <span data-ttu-id="a2aba-155">I ett senare avsnitt *optimera programprestanda*, diskuteras i mer information om hur du optimerar IOPS och genomflöde.</span><span class="sxs-lookup"><span data-stu-id="a2aba-155">In a later section, *Optimizing Application Performance*, we will discuss in more details about optimizing IOPS and Throughput.</span></span>

## <a name="latency"></a><span data-ttu-id="a2aba-156">Svarstid</span><span class="sxs-lookup"><span data-stu-id="a2aba-156">Latency</span></span>
<span data-ttu-id="a2aba-157">Svarstiden är den tid det tar ett program för att ta emot en begäran, skickar den till diskar med lagringsutrymme och skicka svar till klienten.</span><span class="sxs-lookup"><span data-stu-id="a2aba-157">Latency is the time it takes an application to receive a single request, send it to the storage disks and send the response to the client.</span></span> <span data-ttu-id="a2aba-158">Detta är en kritisk mått av ett programs prestanda förutom IOPS och genomflöde.</span><span class="sxs-lookup"><span data-stu-id="a2aba-158">This is a critical measure of an application's performance in addition to IOPS and Throughput.</span></span> <span data-ttu-id="a2aba-159">Svarstiden för en disk för premium-lagring är den tid det tar att hämta information för en begäran och lämna den tillbaka till ditt program.</span><span class="sxs-lookup"><span data-stu-id="a2aba-159">The Latency of a premium storage disk is the time it takes to retrieve the information for a request and communicate it back to your application.</span></span> <span data-ttu-id="a2aba-160">Premium-lagring ger genomgående korta svarstiderna.</span><span class="sxs-lookup"><span data-stu-id="a2aba-160">Premium Storage provides consistent low latencies.</span></span> <span data-ttu-id="a2aba-161">Om du aktiverar cachelagring på premium lagringsdiskar ReadOnly-värden, kan du hämta mycket lägre skrivskyddade latens.</span><span class="sxs-lookup"><span data-stu-id="a2aba-161">If you enable ReadOnly host caching on premium storage disks, you can get much lower read latency.</span></span> <span data-ttu-id="a2aba-162">Diskuteras diskcachelagring i detalj i senare avsnitt på *optimera programprestanda*.</span><span class="sxs-lookup"><span data-stu-id="a2aba-162">We will discuss Disk Caching in more detail in later section on *Optimizing Application Performance*.</span></span>

<span data-ttu-id="a2aba-163">När du optimerar ditt program att hämta högre IOPS och genomflöde påverkas svarstiden för programmet.</span><span class="sxs-lookup"><span data-stu-id="a2aba-163">When you are optimizing your application to get higher IOPS and Throughput, it will affect the Latency of your application.</span></span> <span data-ttu-id="a2aba-164">Efter justering om programmets prestanda kan du alltid utvärdera svarstiden för programmet för att undvika oväntade fördröjningar beteende.</span><span class="sxs-lookup"><span data-stu-id="a2aba-164">After tuning the application performance, always evaluate the Latency of the application to avoid unexpected high latency behavior.</span></span>

## <a name="gather-application-performance-requirements"></a><span data-ttu-id="a2aba-165">Samla in kraven på programmets prestanda</span><span class="sxs-lookup"><span data-stu-id="a2aba-165">Gather Application Performance Requirements</span></span>
<span data-ttu-id="a2aba-166">Det första steget i utforma högpresterande program som körs på Azure Premium-lagring är att förstå prestandakraven för ditt program.</span><span class="sxs-lookup"><span data-stu-id="a2aba-166">The first step in designing high performance applications running on Azure Premium Storage is, to understand the performance requirements of your application.</span></span> <span data-ttu-id="a2aba-167">Du kan optimera ditt program för att uppnå den mest optimala prestandan när du samlar in prestandakrav.</span><span class="sxs-lookup"><span data-stu-id="a2aba-167">After you gather performance requirements, you can optimize your application to achieve the most optimal performance.</span></span>

<span data-ttu-id="a2aba-168">I föregående avsnitt beskrivs vi de vanliga nyckeltal IOPS, genomflöde och svarstid.</span><span class="sxs-lookup"><span data-stu-id="a2aba-168">In the previous section, we explained the common performance indicators, IOPS, Throughput and Latency.</span></span> <span data-ttu-id="a2aba-169">Du måste identifiera vilken av dessa nyckeltal är viktiga i programmet för att leverera den önskade användarupplevelsen.</span><span class="sxs-lookup"><span data-stu-id="a2aba-169">You must identify which of these performance indicators are critical to your application to deliver the desired user experience.</span></span> <span data-ttu-id="a2aba-170">Till exempel viktigaste höga IOPS OLTP program bearbetning av miljontals transaktioner på en sekund.</span><span class="sxs-lookup"><span data-stu-id="a2aba-170">For example, high IOPS matters most to OLTP applications processing millions of transactions in a second.</span></span> <span data-ttu-id="a2aba-171">Hög genomströmning är viktig för Data Warehouse-program som bearbetar stora mängder data på en sekund.</span><span class="sxs-lookup"><span data-stu-id="a2aba-171">Whereas, high Throughput is critical for Data Warehouse applications processing large amounts of data in a second.</span></span> <span data-ttu-id="a2aba-172">Mycket låg latens är avgörande för realtidsprogram som direktuppspelad video streaming webbplatser.</span><span class="sxs-lookup"><span data-stu-id="a2aba-172">Extremely low Latency is crucial for real-time applications like live video streaming websites.</span></span>

<span data-ttu-id="a2aba-173">Därefter Mät maximala prestandakraven för ditt program under hela sin livslängd.</span><span class="sxs-lookup"><span data-stu-id="a2aba-173">Next, measure the maximum performance requirements of your application throughout its lifetime.</span></span> <span data-ttu-id="a2aba-174">Använd exemplet checklista nedan som en start.</span><span class="sxs-lookup"><span data-stu-id="a2aba-174">Use the sample checklist below as a start.</span></span> <span data-ttu-id="a2aba-175">Registrera kraven för maximala prestanda under normal, belastning och låg belastning på nätverket arbetsbelastning punkter.</span><span class="sxs-lookup"><span data-stu-id="a2aba-175">Record the maximum performance requirements during normal, peak and off-hours workload periods.</span></span> <span data-ttu-id="a2aba-176">Genom att identifiera krav för alla arbetsbelastningar nivåer, kommer du att kunna fastställa den övergripande kraven på prestanda för programmet.</span><span class="sxs-lookup"><span data-stu-id="a2aba-176">By identifying requirements for all workloads levels, you will be able to determine the overall performance requirement of your application.</span></span> <span data-ttu-id="a2aba-177">Till exempel blir webbplatser för e-handel normal arbetsbelastning de transaktioner som den erbjuder under större delen av tiden till ett år.</span><span class="sxs-lookup"><span data-stu-id="a2aba-177">For example, the normal workload of an e-commerce website will be the transactions it serves during most days in a year.</span></span> <span data-ttu-id="a2aba-178">Arbetsbelastningen belastning på webbplatsen kommer att transaktioner som den erbjuder under köpstarka jul eller särskilda försäljning händelser.</span><span class="sxs-lookup"><span data-stu-id="a2aba-178">The peak workload of the website will be the transactions it serves during holiday season or special sale events.</span></span> <span data-ttu-id="a2aba-179">Belastning arbetsbelastningen är vanligtvis erfarna under en begränsad tid, men kan kräva att ditt program att skala två eller fler gånger dess normal drift.</span><span class="sxs-lookup"><span data-stu-id="a2aba-179">The peak workload is typically experienced for a limited period, but can require your application to scale two or more times its normal operation.</span></span> <span data-ttu-id="a2aba-180">Ta reda på 50: e percentilen, 90: e percentilen och 99 percentil krav.</span><span class="sxs-lookup"><span data-stu-id="a2aba-180">Find out the 50 percentile, 90 percentile and 99 percentile requirements.</span></span> <span data-ttu-id="a2aba-181">Detta hjälper filtrerar ut eventuella avvikare i prestandakraven och du kan fokusera arbetet på Optimera för rätt värden.</span><span class="sxs-lookup"><span data-stu-id="a2aba-181">This helps filter out any outliers in the performance requirements and you can focus your efforts on optimizing for the right values.</span></span>

<span data-ttu-id="a2aba-182">**Checklista för programmets prestanda krav**</span><span class="sxs-lookup"><span data-stu-id="a2aba-182">**Application Performance Requirements Checklist**</span></span>

| <span data-ttu-id="a2aba-183">**Krav på prestanda**</span><span class="sxs-lookup"><span data-stu-id="a2aba-183">**Performance requirements**</span></span> | <span data-ttu-id="a2aba-184">**50: e percentilen**</span><span class="sxs-lookup"><span data-stu-id="a2aba-184">**50 Percentile**</span></span> | <span data-ttu-id="a2aba-185">**90: e percentilen**</span><span class="sxs-lookup"><span data-stu-id="a2aba-185">**90 Percentile**</span></span> | <span data-ttu-id="a2aba-186">**99 percentil**</span><span class="sxs-lookup"><span data-stu-id="a2aba-186">**99  Percentile**</span></span> |
| --- | --- | --- | --- |
| <span data-ttu-id="a2aba-187">Max.</span><span class="sxs-lookup"><span data-stu-id="a2aba-187">Max.</span></span> <span data-ttu-id="a2aba-188">Transaktioner per sekund</span><span class="sxs-lookup"><span data-stu-id="a2aba-188">Transactions per second</span></span> | | | |
| <span data-ttu-id="a2aba-189">% Läsåtgärder</span><span class="sxs-lookup"><span data-stu-id="a2aba-189">% Read operations</span></span> | | | |
| <span data-ttu-id="a2aba-190">% Skrivåtgärder</span><span class="sxs-lookup"><span data-stu-id="a2aba-190">% Write operations</span></span> | | | |
| <span data-ttu-id="a2aba-191">% Slumpmässiga åtgärder</span><span class="sxs-lookup"><span data-stu-id="a2aba-191">% Random operations</span></span> | | | |
| <span data-ttu-id="a2aba-192">% Sekventiella operationer</span><span class="sxs-lookup"><span data-stu-id="a2aba-192">% Sequential operations</span></span> | | | |
| <span data-ttu-id="a2aba-193">Storlek för i/o-begäran</span><span class="sxs-lookup"><span data-stu-id="a2aba-193">IO request size</span></span> | | | |
| <span data-ttu-id="a2aba-194">Genomsnittlig genomströmning</span><span class="sxs-lookup"><span data-stu-id="a2aba-194">Average Throughput</span></span> | | | |
| <span data-ttu-id="a2aba-195">Max.</span><span class="sxs-lookup"><span data-stu-id="a2aba-195">Max.</span></span> <span data-ttu-id="a2aba-196">Dataflöde</span><span class="sxs-lookup"><span data-stu-id="a2aba-196">Throughput</span></span> | | | |
| <span data-ttu-id="a2aba-197">Min.</span><span class="sxs-lookup"><span data-stu-id="a2aba-197">Min.</span></span> <span data-ttu-id="a2aba-198">Svarstid</span><span class="sxs-lookup"><span data-stu-id="a2aba-198">Latency</span></span> | | | |
| <span data-ttu-id="a2aba-199">Genomsnittlig svarstid</span><span class="sxs-lookup"><span data-stu-id="a2aba-199">Average Latency</span></span> | | | |
| <span data-ttu-id="a2aba-200">Max.</span><span class="sxs-lookup"><span data-stu-id="a2aba-200">Max.</span></span> <span data-ttu-id="a2aba-201">Processor</span><span class="sxs-lookup"><span data-stu-id="a2aba-201">CPU</span></span> | | | |
| <span data-ttu-id="a2aba-202">Genomsnittlig CPU</span><span class="sxs-lookup"><span data-stu-id="a2aba-202">Average CPU</span></span> | | | |
| <span data-ttu-id="a2aba-203">Max.</span><span class="sxs-lookup"><span data-stu-id="a2aba-203">Max.</span></span> <span data-ttu-id="a2aba-204">Minne</span><span class="sxs-lookup"><span data-stu-id="a2aba-204">Memory</span></span> | | | |
| <span data-ttu-id="a2aba-205">Genomsnittlig minne</span><span class="sxs-lookup"><span data-stu-id="a2aba-205">Average Memory</span></span> | | | |
| <span data-ttu-id="a2aba-206">Ködjup</span><span class="sxs-lookup"><span data-stu-id="a2aba-206">Queue Depth</span></span> | | | |

> [!NOTE]
> <span data-ttu-id="a2aba-207">Du bör skalning talen utifrån förväntade tillväxt i ditt program.</span><span class="sxs-lookup"><span data-stu-id="a2aba-207">You should consider scaling these numbers based on expected future growth of your application.</span></span> <span data-ttu-id="a2aba-208">Det är en bra idé att planera för tillväxt i förväg, eftersom det kan vara svårare att ändra infrastrukturen för att förbättra prestanda senare.</span><span class="sxs-lookup"><span data-stu-id="a2aba-208">It is a good idea to plan for growth ahead of time, because it could be harder to change the infrastructure for improving performance later.</span></span>
>
>

<span data-ttu-id="a2aba-209">Om du har ett befintligt program och vill övergå till Premium-lagring, först skapa checklista ovan för det befintliga programmet.</span><span class="sxs-lookup"><span data-stu-id="a2aba-209">If you have an existing application and want to move to Premium Storage, first build the checklist above for the existing application.</span></span> <span data-ttu-id="a2aba-210">Sedan skapar en prototyp av programmet på Premium-lagring och utforma program baserat på riktlinjer som beskrivs i *optimera programprestanda* i ett senare avsnitt av det här dokumentet.</span><span class="sxs-lookup"><span data-stu-id="a2aba-210">Then, build a prototype of your application on Premium Storage and design the application based on guidelines described in *Optimizing Application Performance* in a later section of this document.</span></span> <span data-ttu-id="a2aba-211">I nästa avsnitt beskrivs de verktyg som du kan använda för att samla in prestandamått.</span><span class="sxs-lookup"><span data-stu-id="a2aba-211">The next section describes the tools you can use to gather the performance measurements.</span></span>

<span data-ttu-id="a2aba-212">Skapa en checklista liknar ditt befintliga program för den aktuella typen.</span><span class="sxs-lookup"><span data-stu-id="a2aba-212">Create a checklist similar to your existing application for the prototype.</span></span> <span data-ttu-id="a2aba-213">Med hjälp av Benchmarking verktyg du simulera arbetsbelastningar och mäta prestanda hos prototyp-programmet.</span><span class="sxs-lookup"><span data-stu-id="a2aba-213">Using Benchmarking tools you can simulate the workloads and measure performance on the prototype application.</span></span> <span data-ttu-id="a2aba-214">Se avsnittet om [Benchmarking](#benchmarking) vill veta mer.</span><span class="sxs-lookup"><span data-stu-id="a2aba-214">See the section on [Benchmarking](#benchmarking) to learn more.</span></span> <span data-ttu-id="a2aba-215">Genom att göra så att du kan fastställa om Premium-lagring kan matcha eller överskrider dina prestandakrav för programmet.</span><span class="sxs-lookup"><span data-stu-id="a2aba-215">By doing so you can determine whether Premium Storage can match or surpass your application performance requirements.</span></span> <span data-ttu-id="a2aba-216">Sedan kan du implementera samma riktlinjer för ditt produktionsprogram.</span><span class="sxs-lookup"><span data-stu-id="a2aba-216">Then you can implement the same guidelines for your production application.</span></span>

### <a name="counters-to-measure-application-performance-requirements"></a><span data-ttu-id="a2aba-217">Räknare för att mäta prestanda programkrav</span><span class="sxs-lookup"><span data-stu-id="a2aba-217">Counters to measure application performance requirements</span></span>
<span data-ttu-id="a2aba-218">Det bästa sättet att mäta prestandakraven för ditt program är att använda övervakning av programprestanda verktyg som tillhandahålls av operativsystemet på servern.</span><span class="sxs-lookup"><span data-stu-id="a2aba-218">The best way to measure performance requirements of your application, is to use performance-monitoring tools provided by the operating system of the server.</span></span> <span data-ttu-id="a2aba-219">Du kan använda PerfMon för Windows och iostat för Linux.</span><span class="sxs-lookup"><span data-stu-id="a2aba-219">You can use PerfMon for Windows and iostat for Linux.</span></span> <span data-ttu-id="a2aba-220">Dessa verktyg avbilda räknare som motsvarar varje mått som beskrivs i avsnittet ovan.</span><span class="sxs-lookup"><span data-stu-id="a2aba-220">These tools capture counters corresponding to each measure explained in the above section.</span></span> <span data-ttu-id="a2aba-221">När programmet körs dess normal, belastning och låg belastning på nätverket arbetsbelastningar måste du samla in värdena för dessa räknare.</span><span class="sxs-lookup"><span data-stu-id="a2aba-221">You must capture the values of these counters when your application is running its normal, peak and off-hours workloads.</span></span>

<span data-ttu-id="a2aba-222">PerfMon-räknare är tillgängliga för processor, minne och varje logisk disk och fysisk disk för servern.</span><span class="sxs-lookup"><span data-stu-id="a2aba-222">The PerfMon counters are available for processor, memory and, each logical disk and physical disk of your server.</span></span> <span data-ttu-id="a2aba-223">När du använder premiumdiskar för lagring med en virtuell dator fysisk disk är för varje disk för premium-lagring och räknare för logisk disk är för varje volym som har skapats på diskar med premium-lagring.</span><span class="sxs-lookup"><span data-stu-id="a2aba-223">When you use premium storage disks with a VM, the physical disk counters are for each premium storage disk, and logical disk counters are for each volume created on the premium storage disks.</span></span> <span data-ttu-id="a2aba-224">Du måste hämta värden för de diskar som värd för din arbetsbelastning i programmet.</span><span class="sxs-lookup"><span data-stu-id="a2aba-224">You must capture the values for the disks that host your application workload.</span></span> <span data-ttu-id="a2aba-225">Om det finns en en-till-en-mappning mellan logiska och fysiska diskar, kan du referera till räknare för fysiska diskar; Annars finns räknare för logiska diskar.</span><span class="sxs-lookup"><span data-stu-id="a2aba-225">If there is a one to one mapping between logical and physical disks, you can refer to physical disk counters; otherwise refer to the logical disk counters.</span></span> <span data-ttu-id="a2aba-226">På Linux skapar kommandot iostat en rapport över processor- och diskresurser.</span><span class="sxs-lookup"><span data-stu-id="a2aba-226">On Linux, the iostat command generates a CPU and disk utilization report.</span></span> <span data-ttu-id="a2aba-227">Diskanvändningsrapporten innehåller statistik per fysisk enhet eller partition.</span><span class="sxs-lookup"><span data-stu-id="a2aba-227">The disk utilization report provides statistics per physical device or partition.</span></span> <span data-ttu-id="a2aba-228">Om du har en databasserver med dess data och loggfiler på separata diskar kan du samla in informationen för båda diskarna.</span><span class="sxs-lookup"><span data-stu-id="a2aba-228">If you have a database server with its data and log on separate disks, collect this data for both disks.</span></span> <span data-ttu-id="a2aba-229">Tabellen nedan beskrivs räknare för diskar, processor och minne:</span><span class="sxs-lookup"><span data-stu-id="a2aba-229">Below table describes counters for disks, processor and memory:</span></span>

| <span data-ttu-id="a2aba-230">Räknaren</span><span class="sxs-lookup"><span data-stu-id="a2aba-230">Counter</span></span> | <span data-ttu-id="a2aba-231">Beskrivning</span><span class="sxs-lookup"><span data-stu-id="a2aba-231">Description</span></span> | <span data-ttu-id="a2aba-232">PerfMon</span><span class="sxs-lookup"><span data-stu-id="a2aba-232">PerfMon</span></span> | <span data-ttu-id="a2aba-233">Iostat</span><span class="sxs-lookup"><span data-stu-id="a2aba-233">Iostat</span></span> |
| --- | --- | --- | --- |
| <span data-ttu-id="a2aba-234">**IOPS eller transaktioner per sekund**</span><span class="sxs-lookup"><span data-stu-id="a2aba-234">**IOPS or Transactions per second**</span></span> |<span data-ttu-id="a2aba-235">Antalet i/o-begäranden som utfärdats till Lagringsdisken per sekund.</span><span class="sxs-lookup"><span data-stu-id="a2aba-235">Number of I/O requests issued to the storage disk per second.</span></span> |<span data-ttu-id="a2aba-236">Diskläsningar/sek</span><span class="sxs-lookup"><span data-stu-id="a2aba-236">Disk Reads/sec</span></span> <br> <span data-ttu-id="a2aba-237">Diskskrivningar/sek</span><span class="sxs-lookup"><span data-stu-id="a2aba-237">Disk Writes/sec</span></span> |<span data-ttu-id="a2aba-238">transaktionsprogram</span><span class="sxs-lookup"><span data-stu-id="a2aba-238">tps</span></span> <br> <span data-ttu-id="a2aba-239">r/s</span><span class="sxs-lookup"><span data-stu-id="a2aba-239">r/s</span></span> <br> <span data-ttu-id="a2aba-240">w/s</span><span class="sxs-lookup"><span data-stu-id="a2aba-240">w/s</span></span> |
| <span data-ttu-id="a2aba-241">**Diskläsningar och skrivningar**</span><span class="sxs-lookup"><span data-stu-id="a2aba-241">**Disk Reads and Writes**</span></span> |<span data-ttu-id="a2aba-242">% av läsåtgärder och skrivåtgärder utföras på disken.</span><span class="sxs-lookup"><span data-stu-id="a2aba-242">% of Reads and Write operations performed on the disk.</span></span> |<span data-ttu-id="a2aba-243">Läs Disktid i procent</span><span class="sxs-lookup"><span data-stu-id="a2aba-243">% Disk Read Time</span></span> <br> <span data-ttu-id="a2aba-244">Skriv Disktid i procent</span><span class="sxs-lookup"><span data-stu-id="a2aba-244">% Disk Write Time</span></span> |<span data-ttu-id="a2aba-245">r/s</span><span class="sxs-lookup"><span data-stu-id="a2aba-245">r/s</span></span> <br> <span data-ttu-id="a2aba-246">w/s</span><span class="sxs-lookup"><span data-stu-id="a2aba-246">w/s</span></span> |
| <span data-ttu-id="a2aba-247">**Dataflöde**</span><span class="sxs-lookup"><span data-stu-id="a2aba-247">**Throughput**</span></span> |<span data-ttu-id="a2aba-248">Mängd data läses från eller skrivs till disken per sekund.</span><span class="sxs-lookup"><span data-stu-id="a2aba-248">Amount of data read from or written to the disk per second.</span></span> |<span data-ttu-id="a2aba-249">Disk-lästa byte/sek</span><span class="sxs-lookup"><span data-stu-id="a2aba-249">Disk Read Bytes/sec</span></span> <br> <span data-ttu-id="a2aba-250">Disk-skrivna byte/s</span><span class="sxs-lookup"><span data-stu-id="a2aba-250">Disk Write Bytes/sec</span></span> |<span data-ttu-id="a2aba-251">kB_read/s</span><span class="sxs-lookup"><span data-stu-id="a2aba-251">kB_read/s</span></span> <br> <span data-ttu-id="a2aba-252">kB_wrtn/s</span><span class="sxs-lookup"><span data-stu-id="a2aba-252">kB_wrtn/s</span></span> |
| <span data-ttu-id="a2aba-253">**Svarstid**</span><span class="sxs-lookup"><span data-stu-id="a2aba-253">**Latency**</span></span> |<span data-ttu-id="a2aba-254">Total tid för att slutföra en disk-i/o-begäran.</span><span class="sxs-lookup"><span data-stu-id="a2aba-254">Total time to complete a disk IO request.</span></span> |<span data-ttu-id="a2aba-255">Medel s/diskläsning</span><span class="sxs-lookup"><span data-stu-id="a2aba-255">Average Disk sec/Read</span></span> <br> <span data-ttu-id="a2aba-256">Medel s/diskskrivning</span><span class="sxs-lookup"><span data-stu-id="a2aba-256">Average disk sec/Write</span></span> |<span data-ttu-id="a2aba-257">await</span><span class="sxs-lookup"><span data-stu-id="a2aba-257">await</span></span> <br> <span data-ttu-id="a2aba-258">svctm</span><span class="sxs-lookup"><span data-stu-id="a2aba-258">svctm</span></span> |
| <span data-ttu-id="a2aba-259">**I/o-storlek**</span><span class="sxs-lookup"><span data-stu-id="a2aba-259">**IO size**</span></span> |<span data-ttu-id="a2aba-260">Storleken på i/o-begäranden problem att diskar med lagringsutrymme.</span><span class="sxs-lookup"><span data-stu-id="a2aba-260">The size of I/O requests issues to the storage disks.</span></span> |<span data-ttu-id="a2aba-261">Genomsnittligt antal byte/diskläsning</span><span class="sxs-lookup"><span data-stu-id="a2aba-261">Average Disk Bytes/Read</span></span> <br> <span data-ttu-id="a2aba-262">Genomsnittlig Disk byte/skrivning</span><span class="sxs-lookup"><span data-stu-id="a2aba-262">Average Disk Bytes/Write</span></span> |<span data-ttu-id="a2aba-263">avgrq sz</span><span class="sxs-lookup"><span data-stu-id="a2aba-263">avgrq-sz</span></span> |
| <span data-ttu-id="a2aba-264">**Ködjup**</span><span class="sxs-lookup"><span data-stu-id="a2aba-264">**Queue Depth**</span></span> |<span data-ttu-id="a2aba-265">Antal utestående i/o-begäranden väntar på att läsas formuläret eller skrivas till lagringsdisk.</span><span class="sxs-lookup"><span data-stu-id="a2aba-265">Number of outstanding I/O requests waiting to be read form or written to the storage disk.</span></span> |<span data-ttu-id="a2aba-266">Aktuell diskkölängd</span><span class="sxs-lookup"><span data-stu-id="a2aba-266">Current Disk Queue Length</span></span> |<span data-ttu-id="a2aba-267">avgqu sz</span><span class="sxs-lookup"><span data-stu-id="a2aba-267">avgqu-sz</span></span> |
| <span data-ttu-id="a2aba-268">**Max. Minne**</span><span class="sxs-lookup"><span data-stu-id="a2aba-268">**Max. Memory**</span></span> |<span data-ttu-id="a2aba-269">Mängden minne som krävs för att köra programmet smidigt</span><span class="sxs-lookup"><span data-stu-id="a2aba-269">Amount of memory required to run application smoothly</span></span> |<span data-ttu-id="a2aba-270">% Använda dedikerade byte</span><span class="sxs-lookup"><span data-stu-id="a2aba-270">% Committed Bytes in Use</span></span> |<span data-ttu-id="a2aba-271">Använd vmstat</span><span class="sxs-lookup"><span data-stu-id="a2aba-271">Use vmstat</span></span> |
| <span data-ttu-id="a2aba-272">**Max. CPU**</span><span class="sxs-lookup"><span data-stu-id="a2aba-272">**Max. CPU**</span></span> |<span data-ttu-id="a2aba-273">Mängden CPU som krävs för att köra programmet smidigt</span><span class="sxs-lookup"><span data-stu-id="a2aba-273">Amount CPU required to run application smoothly</span></span> |<span data-ttu-id="a2aba-274">% Processortid</span><span class="sxs-lookup"><span data-stu-id="a2aba-274">% Processor time</span></span> |<span data-ttu-id="a2aba-275">% util</span><span class="sxs-lookup"><span data-stu-id="a2aba-275">%util</span></span> |

<span data-ttu-id="a2aba-276">Lär dig mer om [iostat](http://linuxcommand.org/man_pages/iostat1.html) och [PerfMon](https://msdn.microsoft.com/library/aa645516.aspx).</span><span class="sxs-lookup"><span data-stu-id="a2aba-276">Learn more about [iostat](http://linuxcommand.org/man_pages/iostat1.html) and [PerfMon](https://msdn.microsoft.com/library/aa645516.aspx).</span></span>

## <a name="optimizing-application-performance"></a><span data-ttu-id="a2aba-277">Optimera programprestanda för</span><span class="sxs-lookup"><span data-stu-id="a2aba-277">Optimizing Application Performance</span></span>
<span data-ttu-id="a2aba-278">De viktigaste faktorerna som påverkar prestanda för ett program som körs på Premium-lagring är natur av i/o-begäranden storlek på Virtuellt minne, diskutrymme, antalet diskar diskcachelagring, Multithreading och ködjup.</span><span class="sxs-lookup"><span data-stu-id="a2aba-278">The main factors that influence performance of an application running on Premium Storage are Nature of IO Requests, VM size, Disk size, Number of disks, Disk Caching, Multithreading and Queue Depth.</span></span> <span data-ttu-id="a2aba-279">Du kan kontrollera vissa av dessa faktorer med rattar som tillhandahålls av systemet.</span><span class="sxs-lookup"><span data-stu-id="a2aba-279">You can control some of these factors with knobs provided by the system.</span></span> <span data-ttu-id="a2aba-280">De flesta program kanske inte ger ett alternativ för att ändra i/o-storlek och ködjup direkt.</span><span class="sxs-lookup"><span data-stu-id="a2aba-280">Most applications may not give you an option to alter the IO size and Queue Depth directly.</span></span> <span data-ttu-id="a2aba-281">Om du använder SQL Server kan välja du inte i/o-storlek och kön djup.</span><span class="sxs-lookup"><span data-stu-id="a2aba-281">For example, if you are using SQL Server, you cannot choose the IO size and queue depth.</span></span> <span data-ttu-id="a2aba-282">SQL Server väljer optimala IO storlek och kön djup värden som ska få de flesta prestanda.</span><span class="sxs-lookup"><span data-stu-id="a2aba-282">SQL Server chooses the optimal IO size and queue depth values to get the most performance.</span></span> <span data-ttu-id="a2aba-283">Det är viktigt att förstå effekterna av båda typerna av faktorer på ditt programprestanda så att du kan etablera lämpliga resurser för att uppfylla prestandakraven.</span><span class="sxs-lookup"><span data-stu-id="a2aba-283">It is important to understand the effects of both types of factors on your application performance, so that you can provision appropriate resources to meet performance needs.</span></span>

<span data-ttu-id="a2aba-284">I hela det här avsnittet avse program krav checklista som du skapade för att identifiera hur mycket du behöver att optimera programprestanda för ditt.</span><span class="sxs-lookup"><span data-stu-id="a2aba-284">Throughout this section, refer to the application requirements checklist that you created, to identify how much you need to optimize your application performance.</span></span> <span data-ttu-id="a2aba-285">Baserat på som kommer du att kunna avgöra vilka faktorer från det här avsnittet måste du justera.</span><span class="sxs-lookup"><span data-stu-id="a2aba-285">Based on that, you will be able to determine which factors from this section you will need to tune.</span></span> <span data-ttu-id="a2aba-286">Om du vill diskvittne effekterna av varje faktor på programmets prestanda, köra benchmarking verktyg på programinstallationen.</span><span class="sxs-lookup"><span data-stu-id="a2aba-286">To witness the effects of each factor on your application performance, run benchmarking tools on your application setup.</span></span> <span data-ttu-id="a2aba-287">Referera till den [Benchmarking](#Benchmarking) avsnittet i slutet av den här artikeln steg för att köra vanliga benchmarking verktyg i Windows och Linux virtuella datorer.</span><span class="sxs-lookup"><span data-stu-id="a2aba-287">Refer to the [Benchmarking](#Benchmarking) section at the end of this article for steps to run common benchmarking tools on Windows and Linux VMs.</span></span>

### <a name="optimizing-iops-throughput-and-latency-at-a-glance"></a><span data-ttu-id="a2aba-288">Optimera IOPS, genomflöde och svarstid i korthet</span><span class="sxs-lookup"><span data-stu-id="a2aba-288">Optimizing IOPS, Throughput and Latency at a glance</span></span>
<span data-ttu-id="a2aba-289">Tabellen nedan sammanfattar alla prestandafaktorer och stegen för att optimera IOPS, genomflöde och svarstid.</span><span class="sxs-lookup"><span data-stu-id="a2aba-289">The table below summarizes all the performance factors and the steps to optimize IOPS, Throughput and Latency.</span></span> <span data-ttu-id="a2aba-290">Den här sammanfattningen i följande avsnitt beskriver varje faktorn är mycket mer djup.</span><span class="sxs-lookup"><span data-stu-id="a2aba-290">The sections following this summary will describe each factor is much more depth.</span></span>

| &nbsp; | <span data-ttu-id="a2aba-291">**IOPS**</span><span class="sxs-lookup"><span data-stu-id="a2aba-291">**IOPS**</span></span> | <span data-ttu-id="a2aba-292">**Dataflöde**</span><span class="sxs-lookup"><span data-stu-id="a2aba-292">**Throughput**</span></span> | <span data-ttu-id="a2aba-293">**Svarstid**</span><span class="sxs-lookup"><span data-stu-id="a2aba-293">**Latency**</span></span> |
| --- | --- | --- | --- |
| <span data-ttu-id="a2aba-294">**Exempelscenario**</span><span class="sxs-lookup"><span data-stu-id="a2aba-294">**Example Scenario**</span></span> |<span data-ttu-id="a2aba-295">Enterprise OLTP-program som kräver mycket hög transaktioner per andra hastighet.</span><span class="sxs-lookup"><span data-stu-id="a2aba-295">Enterprise OLTP application requiring very high transactions per second rate.</span></span> |<span data-ttu-id="a2aba-296">Enterprise Data warehousing programmet bearbetning stora mängder data.</span><span class="sxs-lookup"><span data-stu-id="a2aba-296">Enterprise Data warehousing application processing large amounts of data.</span></span> |<span data-ttu-id="a2aba-297">Nära realtidsprogram som kräver omedelbar svar på användarförfrågningar som onlinespel.</span><span class="sxs-lookup"><span data-stu-id="a2aba-297">Near real-time applications requiring instant responses to user requests, like online gaming.</span></span> |
| <span data-ttu-id="a2aba-298">Prestandafaktorer</span><span class="sxs-lookup"><span data-stu-id="a2aba-298">Performance factors</span></span> | &nbsp; | &nbsp; | &nbsp; |
| <span data-ttu-id="a2aba-299">**I/o-storlek**</span><span class="sxs-lookup"><span data-stu-id="a2aba-299">**IO size**</span></span> |<span data-ttu-id="a2aba-300">Mindre i/o-storlek ger högre IOPS.</span><span class="sxs-lookup"><span data-stu-id="a2aba-300">Smaller IO size yields higher IOPS.</span></span> |<span data-ttu-id="a2aba-301">Större i/o-storlek till ger högre genomströmning.</span><span class="sxs-lookup"><span data-stu-id="a2aba-301">Larger IO size to yields higher Throughput.</span></span> | &nbsp;|
| <span data-ttu-id="a2aba-302">**VM-storlek**</span><span class="sxs-lookup"><span data-stu-id="a2aba-302">**VM size**</span></span> |<span data-ttu-id="a2aba-303">Använda en VM-storlek som erbjuder IOPS som är större än din programkrav.</span><span class="sxs-lookup"><span data-stu-id="a2aba-303">Use a VM size that offers IOPS greater than your application requirement.</span></span> <span data-ttu-id="a2aba-304">Se VM-storlekar och deras här IOPS-gränser.</span><span class="sxs-lookup"><span data-stu-id="a2aba-304">See VM sizes and their IOPS limits here.</span></span> |<span data-ttu-id="a2aba-305">Använda en VM-storlek med genomflödet gräns som är större än din programkrav.</span><span class="sxs-lookup"><span data-stu-id="a2aba-305">Use a VM size with Throughput limit greater than your application requirement.</span></span> <span data-ttu-id="a2aba-306">Se VM-storlekar och deras genomströmning gränser här.</span><span class="sxs-lookup"><span data-stu-id="a2aba-306">See VM sizes and their Throughput limits here.</span></span> |<span data-ttu-id="a2aba-307">Använda en VM-storlek att erbjudanden skala gränser som är större än din programkrav.</span><span class="sxs-lookup"><span data-stu-id="a2aba-307">Use a VM size that offers scale limits greater than your application requirement.</span></span> <span data-ttu-id="a2aba-308">Se VM-storlekar och deras gränser här.</span><span class="sxs-lookup"><span data-stu-id="a2aba-308">See VM sizes and their limits here.</span></span> |
| <span data-ttu-id="a2aba-309">**Diskens storlek**</span><span class="sxs-lookup"><span data-stu-id="a2aba-309">**Disk size**</span></span> |<span data-ttu-id="a2aba-310">Använd storleken för en disk som erbjuder IOPS som är större än din programkrav.</span><span class="sxs-lookup"><span data-stu-id="a2aba-310">Use a disk size that offers IOPS greater than your application requirement.</span></span> <span data-ttu-id="a2aba-311">Visa storlekar för diskar och deras här IOPS-gränser.</span><span class="sxs-lookup"><span data-stu-id="a2aba-311">See disk sizes and their IOPS limits here.</span></span> |<span data-ttu-id="a2aba-312">Använd storleken för en disk med genomflödet gräns som är större än din programkrav.</span><span class="sxs-lookup"><span data-stu-id="a2aba-312">Use a disk size with Throughput limit greater than your application requirement.</span></span> <span data-ttu-id="a2aba-313">Se storlekar för diskar och deras genomströmning gränser här.</span><span class="sxs-lookup"><span data-stu-id="a2aba-313">See disk sizes and their Throughput limits here.</span></span> |<span data-ttu-id="a2aba-314">Använd en diskstorlek så att erbjudanden skala gränser som är större än din programkrav.</span><span class="sxs-lookup"><span data-stu-id="a2aba-314">Use a disk size that offers scale limits greater than your application requirement.</span></span> <span data-ttu-id="a2aba-315">Visa storlekar för diskar och deras gränser här.</span><span class="sxs-lookup"><span data-stu-id="a2aba-315">See disk sizes and their limits here.</span></span> |
| <span data-ttu-id="a2aba-316">**VM- och Skalningsgränser för Disk**</span><span class="sxs-lookup"><span data-stu-id="a2aba-316">**VM and Disk Scale Limits**</span></span> |<span data-ttu-id="a2aba-317">IOPS-gräns på VM-storlek valt ska vara större än IOPS totalt styrs av premium storage diskar som är anslutna till den.</span><span class="sxs-lookup"><span data-stu-id="a2aba-317">IOPS limit of the VM size chosen should be greater than total IOPS driven by premium storage disks attached to it.</span></span> |<span data-ttu-id="a2aba-318">Genomströmning gränsen på VM-storlek valt ska vara större än totala genomflödet som drivs av premium storage diskar som är anslutna till den.</span><span class="sxs-lookup"><span data-stu-id="a2aba-318">Throughput limit of the VM size chosen should be greater than total Throughput driven by premium storage disks attached to it.</span></span> |<span data-ttu-id="a2aba-319">Gränser för VM-storlek valt måste vara större än totala gränser för bifogade premium storage diskar.</span><span class="sxs-lookup"><span data-stu-id="a2aba-319">Scale limits of the VM size chosen must be greater than total scale limits of attached premium storage disks.</span></span> |
| <span data-ttu-id="a2aba-320">**Cachelagring på disk**</span><span class="sxs-lookup"><span data-stu-id="a2aba-320">**Disk Caching**</span></span> |<span data-ttu-id="a2aba-321">Aktivera ReadOnly-cachen på diskar med premium-lagring med tunga läsåtgärder få högre Läs IOPS.</span><span class="sxs-lookup"><span data-stu-id="a2aba-321">Enable ReadOnly Cache on premium storage disks with Read heavy operations to get higher Read IOPS.</span></span> | &nbsp; |<span data-ttu-id="a2aba-322">Aktivera ReadOnly-cachen på diskar med premium-lagring med redo tunga åtgärder för att hämta Läs mycket låg latens.</span><span class="sxs-lookup"><span data-stu-id="a2aba-322">Enable ReadOnly Cache on premium storage disks with Ready heavy operations to get very low Read latencies.</span></span> |
| <span data-ttu-id="a2aba-323">**Disk-Striping**</span><span class="sxs-lookup"><span data-stu-id="a2aba-323">**Disk Striping**</span></span> |<span data-ttu-id="a2aba-324">Använda flera diskar och stripe-dem tillsammans för att få en kombinerad högre IOPS och genomströmning gräns.</span><span class="sxs-lookup"><span data-stu-id="a2aba-324">Use multiple disks and stripe them together to get a combined higher IOPS and Throughput limit.</span></span> <span data-ttu-id="a2aba-325">Observera att kombinerade gränsen per VM ska vara högre än bifogade premiumdiskar kombinerade gränser.</span><span class="sxs-lookup"><span data-stu-id="a2aba-325">Note that the combined limit per VM should be higher than the combined limits of attached premium disks.</span></span> | &nbsp; | &nbsp; |
| <span data-ttu-id="a2aba-326">**Stripe-storlek**</span><span class="sxs-lookup"><span data-stu-id="a2aba-326">**Stripe Size**</span></span> |<span data-ttu-id="a2aba-327">Mindre stripe-storlek för slumpmässiga små i/o-mönster visas i OLTP-program.</span><span class="sxs-lookup"><span data-stu-id="a2aba-327">Smaller stripe size for random small IO pattern seen in OLTP applications.</span></span> <span data-ttu-id="a2aba-328">T.ex. använda stripe storlek på 64KB för SQL Server OLTP-program.</span><span class="sxs-lookup"><span data-stu-id="a2aba-328">E.g., use stripe size of 64KB for SQL Server OLTP application.</span></span> |<span data-ttu-id="a2aba-329">Större stripe-storlek för sekventiella stora i/o-mönster i datalagret program.</span><span class="sxs-lookup"><span data-stu-id="a2aba-329">Larger stripe size for sequential large IO pattern seen in Data Warehouse applications.</span></span> <span data-ttu-id="a2aba-330">T.ex. använda 256KB stripe-storlek för SQL Server-Data warehouse program.</span><span class="sxs-lookup"><span data-stu-id="a2aba-330">E.g., use 256KB stripe size for SQL Server Data warehouse application.</span></span> | &nbsp; |
| <span data-ttu-id="a2aba-331">**Flertrådsteknik**</span><span class="sxs-lookup"><span data-stu-id="a2aba-331">**Multithreading**</span></span> |<span data-ttu-id="a2aba-332">Använd flertrådsteknik push högre antal begäranden till Premium-lagring som kommer att leda till högre IOPS och genomflöde.</span><span class="sxs-lookup"><span data-stu-id="a2aba-332">Use multithreading to push higher number of requests to Premium Storage that will lead to higher IOPS and Throughput.</span></span> <span data-ttu-id="a2aba-333">Ange till exempel ett högt värde för MAXDOP att allokera fler processorer till SQL Server på SQL Server.</span><span class="sxs-lookup"><span data-stu-id="a2aba-333">For example, on SQL Server set a high MAXDOP value to allocate more CPUs to SQL Server.</span></span> | &nbsp; | &nbsp; |
| <span data-ttu-id="a2aba-334">**Ködjup**</span><span class="sxs-lookup"><span data-stu-id="a2aba-334">**Queue Depth**</span></span> |<span data-ttu-id="a2aba-335">Större ködjup ger högre IOPS.</span><span class="sxs-lookup"><span data-stu-id="a2aba-335">Larger Queue Depth yields higher IOPS.</span></span> |<span data-ttu-id="a2aba-336">Större ködjup ger högre genomströmning.</span><span class="sxs-lookup"><span data-stu-id="a2aba-336">Larger Queue Depth yields higher Throughput.</span></span> |<span data-ttu-id="a2aba-337">Mindre ködjup ger lägre latens.</span><span class="sxs-lookup"><span data-stu-id="a2aba-337">Smaller Queue Depth yields lower latencies.</span></span> |

## <a name="nature-of-io-requests"></a><span data-ttu-id="a2aba-338">Typ av i/o-begäranden</span><span class="sxs-lookup"><span data-stu-id="a2aba-338">Nature of IO Requests</span></span>
<span data-ttu-id="a2aba-339">Ett i/o-begäran är en enhet av i/o-åtgärd som programmet kommer att utföra.</span><span class="sxs-lookup"><span data-stu-id="a2aba-339">An IO request is a unit of input/output operation that your application will be performing.</span></span> <span data-ttu-id="a2aba-340">Identifierar typ av i/o-begäranden, slumpmässiga eller sekventiella, hjälper läsa eller skriva små eller stora, dig att avgöra prestandakraven för ditt program.</span><span class="sxs-lookup"><span data-stu-id="a2aba-340">Identifying the nature of IO requests, random or sequential, read or write, small or large, will help you determine the performance requirements of your application.</span></span> <span data-ttu-id="a2aba-341">Det är viktigt att förstå arten av i/o-begäranden att fatta rätt beslut när du designar infrastrukturen för programmet.</span><span class="sxs-lookup"><span data-stu-id="a2aba-341">It is very important to understand the nature of IO requests, to make the right decisions when designing your application infrastructure.</span></span>

<span data-ttu-id="a2aba-342">I/o-storleken är en av de viktigaste faktorerna.</span><span class="sxs-lookup"><span data-stu-id="a2aba-342">IO size is one of the more important factors.</span></span> <span data-ttu-id="a2aba-343">I/o-storleken är storleken på indata-/ utdata-begäran som skapats av ditt program.</span><span class="sxs-lookup"><span data-stu-id="a2aba-343">The IO size is the size of the input/output operation request generated by your application.</span></span> <span data-ttu-id="a2aba-344">I/o-storlek har en betydande inverkan på prestanda särskilt på IOPS och bandbredd som programmet är möjlig att uppnå.</span><span class="sxs-lookup"><span data-stu-id="a2aba-344">The IO size has a significant impact on performance especially on the IOPS and Bandwidth that the application is able to achieve.</span></span> <span data-ttu-id="a2aba-345">Följande formel visar relationen mellan IOPS, i/o-storlek och bandbredd/genomflöde.</span><span class="sxs-lookup"><span data-stu-id="a2aba-345">The following formula shows the relationship between IOPS, IO size and Bandwidth/Throughput.</span></span>  
    ![](media/storage-premium-storage-performance/image1.png)

<span data-ttu-id="a2aba-346">Vissa program kan du ändra deras i/o-storlek, medan vissa program inte.</span><span class="sxs-lookup"><span data-stu-id="a2aba-346">Some applications allow you to alter their IO size, while some applications do not.</span></span> <span data-ttu-id="a2aba-347">SQL Server anger optimala i/o-storlek sig själv och ger inte användare med alla rattar för att ändra den.</span><span class="sxs-lookup"><span data-stu-id="a2aba-347">For example, SQL Server determines the optimal IO size itself, and does not provide users with any knobs to change it.</span></span> <span data-ttu-id="a2aba-348">Å andra sidan Oracle innehåller en parameter med namnet [DB\_BLOCKERA\_storlek](https://docs.oracle.com/cd/B19306_01/server.102/b14211/iodesign.htm#i28815) med vilket du kan konfigurera i/o-begäran storleken på databasen.</span><span class="sxs-lookup"><span data-stu-id="a2aba-348">On the other hand, Oracle provides a parameter called [DB\_BLOCK\_SIZE](https://docs.oracle.com/cd/B19306_01/server.102/b14211/iodesign.htm#i28815) using which you can configure the I/O request size of the database.</span></span>

<span data-ttu-id="a2aba-349">Om du använder ett program, som inte tillåter att ändra i/o-storlek, använda riktlinjerna i den här artikeln för att optimera prestanda KPI: er som är mest relevant för ditt program.</span><span class="sxs-lookup"><span data-stu-id="a2aba-349">If you are using an application, which does not allow you to change the IO size, use the guidelines in this article to optimize the performance KPI that is most relevant to your application.</span></span> <span data-ttu-id="a2aba-350">Exempel:</span><span class="sxs-lookup"><span data-stu-id="a2aba-350">For example,</span></span>

* <span data-ttu-id="a2aba-351">En OLTP-program genererar miljontals små och slumpmässiga i/o-begäranden.</span><span class="sxs-lookup"><span data-stu-id="a2aba-351">An OLTP application generates millions of small and random IO requests.</span></span> <span data-ttu-id="a2aba-352">Om du vill hantera dessa typ av i/o-begäranden måste du utforma din infrastruktur för att få högre IOPS.</span><span class="sxs-lookup"><span data-stu-id="a2aba-352">To handle these type of IO requests, you must design your application infrastructure to get higher IOPS.</span></span>  
* <span data-ttu-id="a2aba-353">Ett informationslager program genererar stora och sekventiella i/o-begäranden.</span><span class="sxs-lookup"><span data-stu-id="a2aba-353">A data warehousing application generates large and sequential IO requests.</span></span> <span data-ttu-id="a2aba-354">Om du vill hantera dessa typ av i/o-begäranden måste du utforma din infrastruktur för att få högre bandbredd eller dataflöde.</span><span class="sxs-lookup"><span data-stu-id="a2aba-354">To handle these type of IO requests, you must design your application infrastructure to get higher Bandwidth or Throughput.</span></span>

<span data-ttu-id="a2aba-355">Om du använder ett program som gör att du kan ändra i/o-storlek, Använd den här tumregel för i/o-storlek utöver andra riktlinjer för prestanda</span><span class="sxs-lookup"><span data-stu-id="a2aba-355">If you are using an application, which allows you to change the IO size, use this rule of thumb for the IO size in addition to other performance guidelines,</span></span>

* <span data-ttu-id="a2aba-356">Mindre i/o-storlek få högre IOPS.</span><span class="sxs-lookup"><span data-stu-id="a2aba-356">Smaller IO size to get higher IOPS.</span></span> <span data-ttu-id="a2aba-357">Till exempel 8 KB för ett OLTP-program.</span><span class="sxs-lookup"><span data-stu-id="a2aba-357">For example, 8 KB for an OLTP application.</span></span>  
* <span data-ttu-id="a2aba-358">I/o större få högre bandbredd/genomflöde.</span><span class="sxs-lookup"><span data-stu-id="a2aba-358">Larger IO size to get higher Bandwidth/Throughput.</span></span> <span data-ttu-id="a2aba-359">Till exempel 1024 KB för ett data warehouse-program.</span><span class="sxs-lookup"><span data-stu-id="a2aba-359">For example, 1024 KB for a data warehouse application.</span></span>

<span data-ttu-id="a2aba-360">Här är ett exempel på hur du kan beräkna IOPS och genomströmning/bandbredd för ditt program.</span><span class="sxs-lookup"><span data-stu-id="a2aba-360">Here is an example on how you can calculate the IOPS and Throughput/Bandwidth for your application.</span></span> <span data-ttu-id="a2aba-361">Överväg att ett program som använder en P30 disk.</span><span class="sxs-lookup"><span data-stu-id="a2aba-361">Consider an application using a P30 disk.</span></span> <span data-ttu-id="a2aba-362">Det maximala antalet IOPS och genomströmning/bandbredd en P30 disk kan uppnå är 5 000 IOPS och 200 MB per sekund respektive.</span><span class="sxs-lookup"><span data-stu-id="a2aba-362">The maximum IOPS and Throughput/Bandwidth a P30 disk can achieve is 5000 IOPS and 200 MB per second respectively.</span></span> <span data-ttu-id="a2aba-363">Om ditt program kräver den högsta IOPS från P30 disken och du använder en mindre i/o-storlek som 8 KB, är den resulterande bandbredd som du kommer att kunna hämta nu 40 MB per sekund.</span><span class="sxs-lookup"><span data-stu-id="a2aba-363">Now, if your application requires the maximum IOPS from the P30 disk and you use a smaller IO size like 8 KB, the resulting Bandwidth you will be able to get is 40 MB per second.</span></span> <span data-ttu-id="a2aba-364">Om ditt program kräver maximal dataflödet/bandbredd från P30 disk, och du använder en större i/o-storlek som 1024 KB, resulterande IOPS är dock mindre, 200 IOPS.</span><span class="sxs-lookup"><span data-stu-id="a2aba-364">However, if your application requires the maximum Throughput/Bandwidth from P30 disk, and you use a larger IO size like 1024 KB, the resulting IOPS will be less, 200 IOPS.</span></span> <span data-ttu-id="a2aba-365">Finjustera därför i/o-storlek så att den uppfyller båda programmets IOPS och genomströmning/bandbredd.</span><span class="sxs-lookup"><span data-stu-id="a2aba-365">Therefore, tune the IO size such that it meets both your application's IOPS and Throughput/Bandwidth requirement.</span></span> <span data-ttu-id="a2aba-366">Tabellen nedan sammanfattar olika i/o-storlekar och deras motsvarande IOPS och genomströmning för en P30 disk.</span><span class="sxs-lookup"><span data-stu-id="a2aba-366">Table below summarizes the different IO sizes and their corresponding IOPS and Throughput for a P30 disk.</span></span>

| <span data-ttu-id="a2aba-367">Programkrav</span><span class="sxs-lookup"><span data-stu-id="a2aba-367">Application Requirement</span></span> | <span data-ttu-id="a2aba-368">I/o-storlek</span><span class="sxs-lookup"><span data-stu-id="a2aba-368">I/O size</span></span> | <span data-ttu-id="a2aba-369">IOPS</span><span class="sxs-lookup"><span data-stu-id="a2aba-369">IOPS</span></span> | <span data-ttu-id="a2aba-370">Genomströmning/bandbredd</span><span class="sxs-lookup"><span data-stu-id="a2aba-370">Throughput/Bandwidth</span></span> |
| --- | --- | --- | --- |
| <span data-ttu-id="a2aba-371">Maximalt antal IOPS</span><span class="sxs-lookup"><span data-stu-id="a2aba-371">Max IOPS</span></span> |<span data-ttu-id="a2aba-372">8 kB</span><span class="sxs-lookup"><span data-stu-id="a2aba-372">8 KB</span></span> |<span data-ttu-id="a2aba-373">5,000</span><span class="sxs-lookup"><span data-stu-id="a2aba-373">5,000</span></span> |<span data-ttu-id="a2aba-374">40 MB per sekund</span><span class="sxs-lookup"><span data-stu-id="a2aba-374">40 MB per second</span></span> |
| <span data-ttu-id="a2aba-375">Max genomflöde</span><span class="sxs-lookup"><span data-stu-id="a2aba-375">Max Throughput</span></span> |<span data-ttu-id="a2aba-376">1024 KB</span><span class="sxs-lookup"><span data-stu-id="a2aba-376">1024 KB</span></span> |<span data-ttu-id="a2aba-377">200</span><span class="sxs-lookup"><span data-stu-id="a2aba-377">200</span></span> |<span data-ttu-id="a2aba-378">200 MB per sekund</span><span class="sxs-lookup"><span data-stu-id="a2aba-378">200 MB per second</span></span> |
| <span data-ttu-id="a2aba-379">Max Throughput + höga IOPS</span><span class="sxs-lookup"><span data-stu-id="a2aba-379">Max Throughput + high IOPS</span></span> |<span data-ttu-id="a2aba-380">64 kB</span><span class="sxs-lookup"><span data-stu-id="a2aba-380">64 KB</span></span> |<span data-ttu-id="a2aba-381">3,200</span><span class="sxs-lookup"><span data-stu-id="a2aba-381">3,200</span></span> |<span data-ttu-id="a2aba-382">200 MB per sekund</span><span class="sxs-lookup"><span data-stu-id="a2aba-382">200 MB per second</span></span> |
| <span data-ttu-id="a2aba-383">Max IOPS + högt genomflöde</span><span class="sxs-lookup"><span data-stu-id="a2aba-383">Max IOPS + high Throughput</span></span> |<span data-ttu-id="a2aba-384">32 KB</span><span class="sxs-lookup"><span data-stu-id="a2aba-384">32 KB</span></span> |<span data-ttu-id="a2aba-385">5,000</span><span class="sxs-lookup"><span data-stu-id="a2aba-385">5,000</span></span> |<span data-ttu-id="a2aba-386">160 MB per sekund</span><span class="sxs-lookup"><span data-stu-id="a2aba-386">160 MB per second</span></span> |

<span data-ttu-id="a2aba-387">Använda flera premiumdiskar stripe används tillsammans för att få IOPS och bandbredd som är högre än det högsta värdet för en enskild premium storage disk.</span><span class="sxs-lookup"><span data-stu-id="a2aba-387">To get IOPS and Bandwidth higher than the maximum value of a single premium storage disk, use multiple premium disks striped together.</span></span> <span data-ttu-id="a2aba-388">Till exempel stripe två P30 diskar för att hämta en kombinerad IOPS i 10 000 IOPS eller en kombinerad genomströmning på 400 MB per sekund.</span><span class="sxs-lookup"><span data-stu-id="a2aba-388">For example, stripe two P30 disks to get a combined IOPS of 10,000 IOPS or a combined Throughput of 400 MB per second.</span></span> <span data-ttu-id="a2aba-389">Som beskrivs i nästa avsnitt, måste du använda en VM-storlek som har stöd för det kombinerade IOPS och genomflöde.</span><span class="sxs-lookup"><span data-stu-id="a2aba-389">As explained in the next section, you must use a VM size that supports the combined disk IOPS and Throughput.</span></span>

> [!NOTE]
> <span data-ttu-id="a2aba-390">Om du ökar IOPS eller genomströmning andra ökar även kontrollera att du inte träffar genomströmning eller IOPS-gränser för disk- eller VM om du vill öka någon.</span><span class="sxs-lookup"><span data-stu-id="a2aba-390">As you increase either IOPS or Throughput the other also increases, make sure you do not hit throughput or IOPS limits of the disk or VM when increasing either one.</span></span>
>
>

<span data-ttu-id="a2aba-391">Du kan köra benchmarking verktyg på den Virtuella diskar för att diskvittne inverkan på programmets prestanda av i/o-storlek.</span><span class="sxs-lookup"><span data-stu-id="a2aba-391">To witness the effects of IO size on application performance, you can run benchmarking tools on your VM and disks.</span></span> <span data-ttu-id="a2aba-392">Skapa flera testkörningar och använda olika i/o-storlek för varje kör för att se effekten.</span><span class="sxs-lookup"><span data-stu-id="a2aba-392">Create multiple test runs and use different IO size for each run to see the impact.</span></span> <span data-ttu-id="a2aba-393">Referera till den [Benchmarking](#Benchmarking) avsnittet i slutet av den här artikeln för mer information.</span><span class="sxs-lookup"><span data-stu-id="a2aba-393">Refer to the [Benchmarking](#Benchmarking) section at the end of this article for more details.</span></span>

## <a name="high-scale-vm-sizes"></a><span data-ttu-id="a2aba-394">Hög skalning VM-storlekar</span><span class="sxs-lookup"><span data-stu-id="a2aba-394">High Scale VM Sizes</span></span>
<span data-ttu-id="a2aba-395">När du startar ett program, är en av de första sakerna att göra, Välj en virtuell dator som värd för ditt program.</span><span class="sxs-lookup"><span data-stu-id="a2aba-395">When you start designing an application, one of the first things to do is, choose a VM to host your application.</span></span> <span data-ttu-id="a2aba-396">Premium-lagring har hög skala VM-storlekar som kan köra program som kräver högre datorkraft och en hög lokal disk i/o-prestanda.</span><span class="sxs-lookup"><span data-stu-id="a2aba-396">Premium Storage comes with High Scale VM sizes that can run applications requiring higher compute power and a high local disk I/O performance.</span></span> <span data-ttu-id="a2aba-397">Dessa virtuella datorer ger snabbare processorer, minne till core förhållandet och en Solid-State Drive (SSD) för den lokala disken.</span><span class="sxs-lookup"><span data-stu-id="a2aba-397">These VMs provide faster processors, a higher memory-to-core ratio, and a Solid-State Drive (SSD) for the local disk.</span></span> <span data-ttu-id="a2aba-398">Exempel på hög skala virtuella datorer stöder Premium-lagring är DS, DSv2 och GS-serien virtuella datorer.</span><span class="sxs-lookup"><span data-stu-id="a2aba-398">Examples of High Scale VMs supporting Premium Storage are the DS, DSv2 and GS series VMs.</span></span>

<span data-ttu-id="a2aba-399">Hög skalning för virtuella datorer finns i olika storlekar med ett annat antal CPU-kärnor, minne, OS och tillfällig diskstorleken.</span><span class="sxs-lookup"><span data-stu-id="a2aba-399">High Scale VMs are available in different sizes with a different number of CPU cores, memory, OS and temporary disk size.</span></span> <span data-ttu-id="a2aba-400">Varje VM-storlek har också maximala antalet datadiskar som kan bifogas till den virtuella datorn.</span><span class="sxs-lookup"><span data-stu-id="a2aba-400">Each VM size also has maximum number of data disks that you can attach to the VM.</span></span> <span data-ttu-id="a2aba-401">Därför valt VM-storlek påverkar hur mycket bearbetning, minne, och lagringskapacitet är tillgängligt för ditt program.</span><span class="sxs-lookup"><span data-stu-id="a2aba-401">Therefore, the chosen VM size will affect how much processing, memory, and storage capacity is available for your application.</span></span> <span data-ttu-id="a2aba-402">Det påverkar också beräkningen och lagring kostnad.</span><span class="sxs-lookup"><span data-stu-id="a2aba-402">It also affects the Compute and Storage cost.</span></span> <span data-ttu-id="a2aba-403">Nedan ser du till exempel specifikationerna för den största VM-storleken i DS-serien, DSv2-serien och GS-serien:</span><span class="sxs-lookup"><span data-stu-id="a2aba-403">For example, below are the specifications of the largest VM size in a DS series, DSv2 series and a GS series:</span></span>

| <span data-ttu-id="a2aba-404">Storlek på virtuell dator</span><span class="sxs-lookup"><span data-stu-id="a2aba-404">VM size</span></span> | <span data-ttu-id="a2aba-405">Processorkärnor</span><span class="sxs-lookup"><span data-stu-id="a2aba-405">CPU cores</span></span> | <span data-ttu-id="a2aba-406">Minne</span><span class="sxs-lookup"><span data-stu-id="a2aba-406">Memory</span></span> | <span data-ttu-id="a2aba-407">Storlekar för Virtuella diskar</span><span class="sxs-lookup"><span data-stu-id="a2aba-407">VM disk sizes</span></span> | <span data-ttu-id="a2aba-408">Max.</span><span class="sxs-lookup"><span data-stu-id="a2aba-408">Max.</span></span> <span data-ttu-id="a2aba-409">Datadiskar</span><span class="sxs-lookup"><span data-stu-id="a2aba-409">data disks</span></span> | <span data-ttu-id="a2aba-410">Cachestorlek</span><span class="sxs-lookup"><span data-stu-id="a2aba-410">Cache size</span></span> | <span data-ttu-id="a2aba-411">IOPS</span><span class="sxs-lookup"><span data-stu-id="a2aba-411">IOPS</span></span> | <span data-ttu-id="a2aba-412">Gränser för Cache-i/o-bandbredd</span><span class="sxs-lookup"><span data-stu-id="a2aba-412">Bandwidth Cache IO limits</span></span> |
| --- | --- | --- | --- | --- | --- | --- | --- |
| <span data-ttu-id="a2aba-413">Standard_DS14</span><span class="sxs-lookup"><span data-stu-id="a2aba-413">Standard_DS14</span></span> |<span data-ttu-id="a2aba-414">16</span><span class="sxs-lookup"><span data-stu-id="a2aba-414">16</span></span> |<span data-ttu-id="a2aba-415">112 GB</span><span class="sxs-lookup"><span data-stu-id="a2aba-415">112 GB</span></span> |<span data-ttu-id="a2aba-416">OS = 1 023 GB</span><span class="sxs-lookup"><span data-stu-id="a2aba-416">OS = 1023 GB</span></span> <br> <span data-ttu-id="a2aba-417">Lokal SSD = 224 GB</span><span class="sxs-lookup"><span data-stu-id="a2aba-417">Local SSD = 224 GB</span></span> |<span data-ttu-id="a2aba-418">32</span><span class="sxs-lookup"><span data-stu-id="a2aba-418">32</span></span> |<span data-ttu-id="a2aba-419">576 GB</span><span class="sxs-lookup"><span data-stu-id="a2aba-419">576 GB</span></span> |<span data-ttu-id="a2aba-420">50 000 IOPS</span><span class="sxs-lookup"><span data-stu-id="a2aba-420">50,000 IOPS</span></span> <br> <span data-ttu-id="a2aba-421">512 MB per sekund</span><span class="sxs-lookup"><span data-stu-id="a2aba-421">512 MB per second</span></span> |<span data-ttu-id="a2aba-422">4 000 IOPS och 33 MB per sekund</span><span class="sxs-lookup"><span data-stu-id="a2aba-422">4,000 IOPS and 33 MB per second</span></span> |
| <span data-ttu-id="a2aba-423">Standard_GS5</span><span class="sxs-lookup"><span data-stu-id="a2aba-423">Standard_GS5</span></span> |<span data-ttu-id="a2aba-424">32</span><span class="sxs-lookup"><span data-stu-id="a2aba-424">32</span></span> |<span data-ttu-id="a2aba-425">448 GB</span><span class="sxs-lookup"><span data-stu-id="a2aba-425">448 GB</span></span> |<span data-ttu-id="a2aba-426">OS = 1 023 GB</span><span class="sxs-lookup"><span data-stu-id="a2aba-426">OS = 1023 GB</span></span> <br> <span data-ttu-id="a2aba-427">Lokal SSD = 896 GB</span><span class="sxs-lookup"><span data-stu-id="a2aba-427">Local SSD = 896 GB</span></span> |<span data-ttu-id="a2aba-428">64</span><span class="sxs-lookup"><span data-stu-id="a2aba-428">64</span></span> |<span data-ttu-id="a2aba-429">4224 GB</span><span class="sxs-lookup"><span data-stu-id="a2aba-429">4224 GB</span></span> |<span data-ttu-id="a2aba-430">80 000 IOPS</span><span class="sxs-lookup"><span data-stu-id="a2aba-430">80,000 IOPS</span></span> <br> <span data-ttu-id="a2aba-431">2 000 MB per sekund</span><span class="sxs-lookup"><span data-stu-id="a2aba-431">2,000 MB per second</span></span> |<span data-ttu-id="a2aba-432">5 000 IOPS och 50 MB per sekund</span><span class="sxs-lookup"><span data-stu-id="a2aba-432">5,000 IOPS and 50 MB per second</span></span> |

<span data-ttu-id="a2aba-433">Om du vill visa en fullständig lista över alla tillgängliga storlekar på Virtuella Azure avser [Windows VM-storlekar](../virtual-machines/windows/sizes.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json) eller [Linux VM-storlekar](../virtual-machines/linux/sizes.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json).</span><span class="sxs-lookup"><span data-stu-id="a2aba-433">To view a complete list of all available Azure VM sizes, refer to [Windows VM sizes](../virtual-machines/windows/sizes.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json) or [Linux VM sizes](../virtual-machines/linux/sizes.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json).</span></span> <span data-ttu-id="a2aba-434">Välj en VM-storlek som kan uppfylla och skala till dina prestandakrav för önskat program.</span><span class="sxs-lookup"><span data-stu-id="a2aba-434">Choose a VM size that can meet and scale to your desired application performance requirements.</span></span> <span data-ttu-id="a2aba-435">Utöver detta, beakta följande viktiga överväganden när du väljer VM-storlekar.</span><span class="sxs-lookup"><span data-stu-id="a2aba-435">In addition to this, take into account following important considerations when choosing VM sizes.</span></span>

<span data-ttu-id="a2aba-436">*Gränser*</span><span class="sxs-lookup"><span data-stu-id="a2aba-436">*Scale Limits*</span></span>  
<span data-ttu-id="a2aba-437">Högsta IOPS-gränser per virtuell dator och per disk är olika och oberoende av varandra.</span><span class="sxs-lookup"><span data-stu-id="a2aba-437">The maximum IOPS limits per VM and per disk are different and independent of each other.</span></span> <span data-ttu-id="a2aba-438">Kontrollera att programmet aktiverar IOPS inom gränserna för den virtuella datorn, samt premiumdiskar som är kopplade till den.</span><span class="sxs-lookup"><span data-stu-id="a2aba-438">Make sure that the application is driving IOPS within the limits of the VM as well as the premium disks attached to it.</span></span> <span data-ttu-id="a2aba-439">Annars får programprestanda begränsning.</span><span class="sxs-lookup"><span data-stu-id="a2aba-439">Otherwise, application performance will experience throttling.</span></span>

<span data-ttu-id="a2aba-440">Anta exempelvis ett program som krävs är högst 4 000 IOPS.</span><span class="sxs-lookup"><span data-stu-id="a2aba-440">As an example, suppose an application requirement is a maximum of 4,000 IOPS.</span></span> <span data-ttu-id="a2aba-441">För att åstadkomma detta kan du etablera en P30 disk på en virtuell dator DS1.</span><span class="sxs-lookup"><span data-stu-id="a2aba-441">To achieve this, you provision a P30 disk on a DS1 VM.</span></span> <span data-ttu-id="a2aba-442">P30 disken kan leverera upp till 5 000 IOPS.</span><span class="sxs-lookup"><span data-stu-id="a2aba-442">The P30 disk can deliver up to 5,000 IOPS.</span></span> <span data-ttu-id="a2aba-443">DS1-VM är dock begränsad till 3,200 IOPS.</span><span class="sxs-lookup"><span data-stu-id="a2aba-443">However, the DS1 VM is limited to 3,200 IOPS.</span></span> <span data-ttu-id="a2aba-444">Följaktligen programprestanda kommer att begränsas av VM-gränsen på 3,200 IOPS och det blir försämrade prestanda.</span><span class="sxs-lookup"><span data-stu-id="a2aba-444">Consequently, the application performance will be constrained by the VM limit at 3,200 IOPS and there will be degraded performance.</span></span> <span data-ttu-id="a2aba-445">Om du vill förhindra detta, väljer du en storlek för VM- och diskresurser som kommer båda uppfyller kraven för application.</span><span class="sxs-lookup"><span data-stu-id="a2aba-445">To prevent this situation, choose a VM and disk size that will both meet application requirements.</span></span>

<span data-ttu-id="a2aba-446">*Kostnaden för åtgärden*</span><span class="sxs-lookup"><span data-stu-id="a2aba-446">*Cost of Operation*</span></span>  
<span data-ttu-id="a2aba-447">I många fall är det möjligt att den totala kostnaden för åtgärden med Premium-lagring är lägre än med standardlagring.</span><span class="sxs-lookup"><span data-stu-id="a2aba-447">In many cases, it is possible that your overall cost of operation using Premium Storage is lower than using Standard Storage.</span></span>

<span data-ttu-id="a2aba-448">Tänk dig ett program som kräver 16 000 IOPS.</span><span class="sxs-lookup"><span data-stu-id="a2aba-448">For example, consider an application requiring 16,000 IOPS.</span></span> <span data-ttu-id="a2aba-449">För att uppnå prestanda, behöver du en Standard\_D14 Azure IaaS VM, som kan ge högsta IOPS för 16000 med 32 standardlagring 1 TB diskar.</span><span class="sxs-lookup"><span data-stu-id="a2aba-449">To achieve this performance, you will need a Standard\_D14 Azure IaaS VM, which can give a maximum IOPS of 16,000 using 32 standard storage 1TB disks.</span></span> <span data-ttu-id="a2aba-450">Varje 1TB standardlagring disk kan uppnå högst 500 IOPS.</span><span class="sxs-lookup"><span data-stu-id="a2aba-450">Each 1TB standard storage disk can achieve a maximum of 500 IOPS.</span></span> <span data-ttu-id="a2aba-451">Den beräknade kostnaden för den här virtuella datorn per månad blir $1,570.</span><span class="sxs-lookup"><span data-stu-id="a2aba-451">The estimated cost of this VM per month will be $1,570.</span></span> <span data-ttu-id="a2aba-452">Månadskostnaden för 32 standardlagring diskar blir $1,638.</span><span class="sxs-lookup"><span data-stu-id="a2aba-452">The monthly cost of 32 standard storage disks will be $1,638.</span></span> <span data-ttu-id="a2aba-453">Den totala månatliga uppskattade kostnaden tas $3,208.</span><span class="sxs-lookup"><span data-stu-id="a2aba-453">The estimated total monthly cost will be $3,208.</span></span>

<span data-ttu-id="a2aba-454">Men om du finns samma program på Premium-lagring, måste en mindre VM-storlek och färre premium storage diskar, vilket minskar den sammanlagda kostnaden.</span><span class="sxs-lookup"><span data-stu-id="a2aba-454">However, if you hosted the same application on Premium Storage, you will need a smaller VM size and fewer premium storage disks, thus reducing the overall cost.</span></span> <span data-ttu-id="a2aba-455">En Standard\_DS13 VM kan uppfyller 16 000 IOPS med hjälp av fyra P30 diskar.</span><span class="sxs-lookup"><span data-stu-id="a2aba-455">A Standard\_DS13 VM can meet the 16,000 IOPS requirement using four P30 disks.</span></span> <span data-ttu-id="a2aba-456">Den virtuella datorn DS13 har högsta IOPS för 25,600 och varje P30 disk har högsta IOPS för 5 000.</span><span class="sxs-lookup"><span data-stu-id="a2aba-456">The DS13 VM has a maximum IOPS of 25,600 and each P30 disk has a maximum IOPS of 5,000.</span></span> <span data-ttu-id="a2aba-457">Generellt sett den här konfigurationen kan uppnå 5 000 x 4 = 20 000 IOPS.</span><span class="sxs-lookup"><span data-stu-id="a2aba-457">Overall, this configuration can achieve 5,000 x 4 = 20,000 IOPS.</span></span> <span data-ttu-id="a2aba-458">Den beräknade kostnaden för den här virtuella datorn per månad blir $1,003.</span><span class="sxs-lookup"><span data-stu-id="a2aba-458">The estimated cost of this VM per month will be $1,003.</span></span> <span data-ttu-id="a2aba-459">Månadskostnaden för fyra P30 premium lagringsdiskar blir $544.34.</span><span class="sxs-lookup"><span data-stu-id="a2aba-459">The monthly cost of four P30 premium storage disks will be $544.34.</span></span> <span data-ttu-id="a2aba-460">Den totala månatliga uppskattade kostnaden tas $1,544.</span><span class="sxs-lookup"><span data-stu-id="a2aba-460">The estimated total monthly cost will be $1,544.</span></span>

<span data-ttu-id="a2aba-461">Tabellen nedan sammanfattar kostnaden fördelningen av det här scenariot för Standard- och Premium-lagring.</span><span class="sxs-lookup"><span data-stu-id="a2aba-461">Table below summarizes the cost breakdown of this scenario for Standard and Premium Storage.</span></span>

| &nbsp; | <span data-ttu-id="a2aba-462">**Standard**</span><span class="sxs-lookup"><span data-stu-id="a2aba-462">**Standard**</span></span> | <span data-ttu-id="a2aba-463">**Premium**</span><span class="sxs-lookup"><span data-stu-id="a2aba-463">**Premium**</span></span> |
| --- | --- | --- |
| <span data-ttu-id="a2aba-464">**Kostnaden för VM per månad**</span><span class="sxs-lookup"><span data-stu-id="a2aba-464">**Cost of VM per month**</span></span> |<span data-ttu-id="a2aba-465">$1,570.58 (standard\_D14)</span><span class="sxs-lookup"><span data-stu-id="a2aba-465">$1,570.58 (Standard\_D14)</span></span> |<span data-ttu-id="a2aba-466">$1,003.66 (standard\_DS13)</span><span class="sxs-lookup"><span data-stu-id="a2aba-466">$1,003.66 (Standard\_DS13)</span></span> |
| <span data-ttu-id="a2aba-467">**Av diskarnas kostnad per månad**</span><span class="sxs-lookup"><span data-stu-id="a2aba-467">**Cost of Disks per month**</span></span> |<span data-ttu-id="a2aba-468">$1,638.40 (32 x 1 TB diskar)</span><span class="sxs-lookup"><span data-stu-id="a2aba-468">$1,638.40 (32 x 1 TB disks)</span></span> |<span data-ttu-id="a2aba-469">$544.34 (4 x P30 diskar)</span><span class="sxs-lookup"><span data-stu-id="a2aba-469">$544.34 (4 x P30 disks)</span></span> |
| <span data-ttu-id="a2aba-470">**Övergripande kostnader per månad**</span><span class="sxs-lookup"><span data-stu-id="a2aba-470">**Overall Cost per month**</span></span> |<span data-ttu-id="a2aba-471">$3,208.98</span><span class="sxs-lookup"><span data-stu-id="a2aba-471">$3,208.98</span></span> |<span data-ttu-id="a2aba-472">$1,544.34</span><span class="sxs-lookup"><span data-stu-id="a2aba-472">$1,544.34</span></span> |

<span data-ttu-id="a2aba-473">*Linux-distributioner*</span><span class="sxs-lookup"><span data-stu-id="a2aba-473">*Linux Distros*</span></span>  

<span data-ttu-id="a2aba-474">Med Azure Premium Storage får samma nivå av prestanda för virtuella datorer som kör Windows och Linux.</span><span class="sxs-lookup"><span data-stu-id="a2aba-474">With Azure Premium Storage, you get the same level of Performance for VMs running Windows and Linux.</span></span> <span data-ttu-id="a2aba-475">Vi stöder många varianter av Linux-distributioner och du kan se den fullständiga listan [här](../virtual-machines/linux/endorsed-distros.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json).</span><span class="sxs-lookup"><span data-stu-id="a2aba-475">We support many flavors of Linux distros, and you can see the complete list [here](../virtual-machines/linux/endorsed-distros.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json).</span></span> <span data-ttu-id="a2aba-476">Det är viktigt att notera att olika distributioner lämpar sig bättre för olika typer av arbetsbelastningar.</span><span class="sxs-lookup"><span data-stu-id="a2aba-476">It is important to note that different distros are better suited for different types of workloads.</span></span> <span data-ttu-id="a2aba-477">Du ser olika nivåer av prestanda beroende på distro din arbetsbelastning körs på.</span><span class="sxs-lookup"><span data-stu-id="a2aba-477">You will see different levels of performance depending on the distro your workload is running on.</span></span> <span data-ttu-id="a2aba-478">Testa Linux-distributioner med ditt program och välja den som passar dig bäst.</span><span class="sxs-lookup"><span data-stu-id="a2aba-478">Test the Linux distros with your application and choose the one that works best.</span></span>

<span data-ttu-id="a2aba-479">När du kör Linux med Premium-lagring, kontrollerar du de senaste uppdateringarna om nödvändiga drivrutiner för att säkerställa hög prestanda.</span><span class="sxs-lookup"><span data-stu-id="a2aba-479">When running Linux with Premium Storage, check the latest updates about required drivers to ensure high performance.</span></span>

## <a name="premium-storage-disk-sizes"></a><span data-ttu-id="a2aba-480">Premium-lagring diskstorlekar</span><span class="sxs-lookup"><span data-stu-id="a2aba-480">Premium Storage Disk Sizes</span></span>
<span data-ttu-id="a2aba-481">Azure Premium Storage erbjuder sju diskstorlekar för närvarande.</span><span class="sxs-lookup"><span data-stu-id="a2aba-481">Azure Premium Storage offers seven disk sizes currently.</span></span> <span data-ttu-id="a2aba-482">Varje diskstorleken har en annan skala gräns för IOPS, bandbredd och lagring.</span><span class="sxs-lookup"><span data-stu-id="a2aba-482">Each disk size has a different scale limit for IOPS, Bandwidth and Storage.</span></span> <span data-ttu-id="a2aba-483">Välja rätt Premium-lagring diskstorleken beroende på kraven för application och hög skala VM-storlek.</span><span class="sxs-lookup"><span data-stu-id="a2aba-483">Choose the right Premium Storage Disk size depending on the application requirements and the high scale VM size.</span></span> <span data-ttu-id="a2aba-484">Tabellen nedan visar sju diskar storlekar och deras funktioner.</span><span class="sxs-lookup"><span data-stu-id="a2aba-484">The table below shows the seven disks sizes and their capabilities.</span></span> <span data-ttu-id="a2aba-485">P4 och P6 storlek är för närvarande stöds endast för hanterade diskar.</span><span class="sxs-lookup"><span data-stu-id="a2aba-485">P4 and P6 sizes are currently only supported for Managed Disks.</span></span>

| <span data-ttu-id="a2aba-486">Premium diskar typ</span><span class="sxs-lookup"><span data-stu-id="a2aba-486">Premium Disks Type</span></span>  | <span data-ttu-id="a2aba-487">P4</span><span class="sxs-lookup"><span data-stu-id="a2aba-487">P4</span></span>    | <span data-ttu-id="a2aba-488">P6</span><span class="sxs-lookup"><span data-stu-id="a2aba-488">P6</span></span>    | <span data-ttu-id="a2aba-489">P10</span><span class="sxs-lookup"><span data-stu-id="a2aba-489">P10</span></span>   | <span data-ttu-id="a2aba-490">P20</span><span class="sxs-lookup"><span data-stu-id="a2aba-490">P20</span></span>   | <span data-ttu-id="a2aba-491">P30</span><span class="sxs-lookup"><span data-stu-id="a2aba-491">P30</span></span>   | <span data-ttu-id="a2aba-492">P40</span><span class="sxs-lookup"><span data-stu-id="a2aba-492">P40</span></span>   | <span data-ttu-id="a2aba-493">P50</span><span class="sxs-lookup"><span data-stu-id="a2aba-493">P50</span></span>   | 
|---------------------|-------|-------|-------|-------|-------|-------|-------|
| <span data-ttu-id="a2aba-494">Diskstorlek</span><span class="sxs-lookup"><span data-stu-id="a2aba-494">Disk size</span></span>           | <span data-ttu-id="a2aba-495">32 GB</span><span class="sxs-lookup"><span data-stu-id="a2aba-495">32 GB</span></span> | <span data-ttu-id="a2aba-496">64 GB</span><span class="sxs-lookup"><span data-stu-id="a2aba-496">64 GB</span></span> | <span data-ttu-id="a2aba-497">128 GB</span><span class="sxs-lookup"><span data-stu-id="a2aba-497">128 GB</span></span>| <span data-ttu-id="a2aba-498">512 GB</span><span class="sxs-lookup"><span data-stu-id="a2aba-498">512 GB</span></span>            | <span data-ttu-id="a2aba-499">1 024 GB (1 TB)</span><span class="sxs-lookup"><span data-stu-id="a2aba-499">1024 GB (1 TB)</span></span>    | <span data-ttu-id="a2aba-500">2 048 GB (2 TB)</span><span class="sxs-lookup"><span data-stu-id="a2aba-500">2048 GB (2 TB)</span></span>    | <span data-ttu-id="a2aba-501">4095 GB (4 TB)</span><span class="sxs-lookup"><span data-stu-id="a2aba-501">4095 GB (4 TB)</span></span>    | 
| <span data-ttu-id="a2aba-502">IOPS per disk</span><span class="sxs-lookup"><span data-stu-id="a2aba-502">IOPS per disk</span></span>       | <span data-ttu-id="a2aba-503">120</span><span class="sxs-lookup"><span data-stu-id="a2aba-503">120</span></span>   | <span data-ttu-id="a2aba-504">240</span><span class="sxs-lookup"><span data-stu-id="a2aba-504">240</span></span>   | <span data-ttu-id="a2aba-505">500</span><span class="sxs-lookup"><span data-stu-id="a2aba-505">500</span></span>   | <span data-ttu-id="a2aba-506">2 300</span><span class="sxs-lookup"><span data-stu-id="a2aba-506">2300</span></span>              | <span data-ttu-id="a2aba-507">5000</span><span class="sxs-lookup"><span data-stu-id="a2aba-507">5000</span></span>              | <span data-ttu-id="a2aba-508">7500</span><span class="sxs-lookup"><span data-stu-id="a2aba-508">7500</span></span>              | <span data-ttu-id="a2aba-509">7500</span><span class="sxs-lookup"><span data-stu-id="a2aba-509">7500</span></span>              | 
| <span data-ttu-id="a2aba-510">Dataflöde per disk</span><span class="sxs-lookup"><span data-stu-id="a2aba-510">Throughput per disk</span></span> | <span data-ttu-id="a2aba-511">25 MB per sekund</span><span class="sxs-lookup"><span data-stu-id="a2aba-511">25 MB per second</span></span>  | <span data-ttu-id="a2aba-512">50 MB per sekund</span><span class="sxs-lookup"><span data-stu-id="a2aba-512">50 MB per second</span></span>  | <span data-ttu-id="a2aba-513">100 MB per sekund</span><span class="sxs-lookup"><span data-stu-id="a2aba-513">100 MB per second</span></span> | <span data-ttu-id="a2aba-514">150 MB per sekund</span><span class="sxs-lookup"><span data-stu-id="a2aba-514">150 MB per second</span></span> | <span data-ttu-id="a2aba-515">200 MB per sekund</span><span class="sxs-lookup"><span data-stu-id="a2aba-515">200 MB per second</span></span> | <span data-ttu-id="a2aba-516">250 MB per sekund</span><span class="sxs-lookup"><span data-stu-id="a2aba-516">250 MB per second</span></span> | <span data-ttu-id="a2aba-517">250 MB per sekund</span><span class="sxs-lookup"><span data-stu-id="a2aba-517">250 MB per second</span></span> | 


<span data-ttu-id="a2aba-518">Hur många diskar som du väljer beror på disken storlek som väljs.</span><span class="sxs-lookup"><span data-stu-id="a2aba-518">How many disks you choose depends on the disk size chosen.</span></span> <span data-ttu-id="a2aba-519">Du kan använda en enskild p 50 disk eller flera P10 diskar för att uppfylla dina programkrav.</span><span class="sxs-lookup"><span data-stu-id="a2aba-519">You could use a single P50 disk or multiple P10 disks to meet your application requirement.</span></span> <span data-ttu-id="a2aba-520">Beakta överväganden för användarkonton nedan när du gör valet.</span><span class="sxs-lookup"><span data-stu-id="a2aba-520">Take into account considerations listed below when making the choice.</span></span>

<span data-ttu-id="a2aba-521">*Gränser (IOPS och genomströmning)*</span><span class="sxs-lookup"><span data-stu-id="a2aba-521">*Scale Limits (IOPS and Throughput)*</span></span>  
<span data-ttu-id="a2aba-522">IOPS och genomströmning gränserna för varje Premium-diskstorleken är olika och oberoende från VM skala gränser.</span><span class="sxs-lookup"><span data-stu-id="a2aba-522">The IOPS and Throughput limits of each Premium disk size is different and independent from the VM scale limits.</span></span> <span data-ttu-id="a2aba-523">Se till att totala IOPS och genomströmning från diskarna som är inom skalningsgränserna för den valda VM-storleken.</span><span class="sxs-lookup"><span data-stu-id="a2aba-523">Make sure that the total IOPS and Throughput from the disks are within scale limits of the chosen VM size.</span></span>

<span data-ttu-id="a2aba-524">Om exempelvis en programkrav är högst 250 MB/s genomströmning och du använder en DS4 virtuell dator med en enda P30 disk.</span><span class="sxs-lookup"><span data-stu-id="a2aba-524">For example, if an application requirement is a maximum of 250 MB/sec Throughput and you are using a DS4 VM with a single P30 disk.</span></span> <span data-ttu-id="a2aba-525">DS4 VM kan ge upp till 256 MB/s genomströmning.</span><span class="sxs-lookup"><span data-stu-id="a2aba-525">The DS4 VM can give up to 256 MB/sec Throughput.</span></span> <span data-ttu-id="a2aba-526">Men har en enda disk P30 genomströmning högst 200 MB per sekund.</span><span class="sxs-lookup"><span data-stu-id="a2aba-526">However, a single P30 disk has Throughput limit of 200 MB/sec.</span></span> <span data-ttu-id="a2aba-527">Programmet kommer därför begränsade på 200 MB per sekund på grund av disk-gränsen.</span><span class="sxs-lookup"><span data-stu-id="a2aba-527">Consequently, the application will be constrained at 200 MB/sec due to the disk limit.</span></span> <span data-ttu-id="a2aba-528">Om du vill lösa den här gränsen etablera flera datadiskar till den virtuella datorn eller ändra storlek på diskarna till P40 eller p 50.</span><span class="sxs-lookup"><span data-stu-id="a2aba-528">To overcome this limit, provision more than one data disks to the VM or resize your disks to P40 or P50.</span></span>

> [!NOTE]
> <span data-ttu-id="a2aba-529">Läsningar som hanteras av cachen ingår inte i disken IOPS och genomströmning och därför inte omfattas av disk-gränser.</span><span class="sxs-lookup"><span data-stu-id="a2aba-529">Reads served by the cache are not included in the disk IOPS and Throughput, hence not subject to disk limits.</span></span> <span data-ttu-id="a2aba-530">Cachen har separata IOPS och genomströmning gränsen per virtuell dator.</span><span class="sxs-lookup"><span data-stu-id="a2aba-530">Cache has its separate IOPS and Throughput limit per VM.</span></span>
>
> <span data-ttu-id="a2aba-531">Till exempel är ursprungligen din läsningar och skrivningar 60MB per sekund och 40MB per sekund.</span><span class="sxs-lookup"><span data-stu-id="a2aba-531">For example, initially your reads and writes are 60MB/sec and 40MB/sec respectively.</span></span> <span data-ttu-id="a2aba-532">Över tiden, cachen värmer upp och fungerar i läsningar från cacheminnet.</span><span class="sxs-lookup"><span data-stu-id="a2aba-532">Over time, the cache warms up and serves more and more of the reads from the cache.</span></span> <span data-ttu-id="a2aba-533">Sedan kan du skriva högre genomströmning från disken.</span><span class="sxs-lookup"><span data-stu-id="a2aba-533">Then, you can get higher write Throughput from the disk.</span></span>
>
>

<span data-ttu-id="a2aba-534">*Antal diskar*</span><span class="sxs-lookup"><span data-stu-id="a2aba-534">*Number of Disks*</span></span>  
<span data-ttu-id="a2aba-535">Bestämma antalet diskar som du behöver genom att bedöma programkrav.</span><span class="sxs-lookup"><span data-stu-id="a2aba-535">Determine the number of disks you will need by assessing application requirements.</span></span> <span data-ttu-id="a2aba-536">Varje VM-storlek har också en gräns för antalet diskar som du kan ansluta till den virtuella datorn.</span><span class="sxs-lookup"><span data-stu-id="a2aba-536">Each VM size also has a limit on the number of disks that you can attach to the VM.</span></span> <span data-ttu-id="a2aba-537">Detta är vanligtvis två gånger antal kärnor.</span><span class="sxs-lookup"><span data-stu-id="a2aba-537">Typically, this is twice the number of cores.</span></span> <span data-ttu-id="a2aba-538">Se till att antalet diskar som behövs har stöd för VM-storlek som du väljer.</span><span class="sxs-lookup"><span data-stu-id="a2aba-538">Ensure that the VM size you choose can support the number of disks needed.</span></span>

<span data-ttu-id="a2aba-539">Kom ihåg att diskarna för Premium-lagring har högre prestanda jämfört med standardlagring diskar.</span><span class="sxs-lookup"><span data-stu-id="a2aba-539">Remember, the Premium Storage disks have higher performance capabilities compared to Standard Storage disks.</span></span> <span data-ttu-id="a2aba-540">Om du migrerar programmet från Azure IaaS-VM med standardlagring till Premium-lagring måste du därför kommer troligen färre premiumdiskar att uppnå samma eller högre prestanda för ditt program.</span><span class="sxs-lookup"><span data-stu-id="a2aba-540">Therefore, if you are migrating your application from Azure IaaS VM using Standard Storage to Premium Storage, you will likely need fewer premium disks to achieve the same or higher performance for your application.</span></span>

## <a name="disk-caching"></a><span data-ttu-id="a2aba-541">Cachelagring på disk</span><span class="sxs-lookup"><span data-stu-id="a2aba-541">Disk Caching</span></span>
<span data-ttu-id="a2aba-542">Hög skalning VMs som utnyttjar Azure Premium-lagring har en flera nivåer cachelagring teknik som kallas BlobCache.</span><span class="sxs-lookup"><span data-stu-id="a2aba-542">High Scale VMs that leverage Azure Premium Storage have a multi-tier caching technology called BlobCache.</span></span> <span data-ttu-id="a2aba-543">BlobCache använder en kombination av den virtuella datorn RAM-minne och lokala SSD för cachelagring.</span><span class="sxs-lookup"><span data-stu-id="a2aba-543">BlobCache uses a combination of the Virtual Machine RAM and local SSD for caching.</span></span> <span data-ttu-id="a2aba-544">Det här cacheminnet är tillgängligt för Premium-lagring beständiga diskar och Virtuella lokala diskar.</span><span class="sxs-lookup"><span data-stu-id="a2aba-544">This cache is available for the Premium Storage persistent disks and the VM local disks.</span></span> <span data-ttu-id="a2aba-545">Det här cache-inställningen är som standard att läsa eller skriva för OS-diskar och ReadOnly för datadiskar som finns på Premium-lagring.</span><span class="sxs-lookup"><span data-stu-id="a2aba-545">By default, this cache setting is set to Read/Write for OS disks and ReadOnly for data disks hosted on Premium Storage.</span></span> <span data-ttu-id="a2aba-546">Med diskcachelagring aktiverad på diskar med Premium-lagring, uppnå hög skala VMs mycket hög prestanda som överskrider den underliggande diskprestanda.</span><span class="sxs-lookup"><span data-stu-id="a2aba-546">With disk caching enabled on the Premium Storage disks, the high scale VMs can achieve extremely high levels of performance that exceed the underlying disk performance.</span></span>

> [!WARNING]
> <span data-ttu-id="a2aba-547">Ändra cache-inställningen för ett Azure-disken kopplas från och nytt bifogar måldisken.</span><span class="sxs-lookup"><span data-stu-id="a2aba-547">Changing the cache setting of an Azure disk detaches and re-attaches the target disk.</span></span> <span data-ttu-id="a2aba-548">Om det är operativsystemdisk, startas den virtuella datorn.</span><span class="sxs-lookup"><span data-stu-id="a2aba-548">If it is the operating system disk, the VM is restarted.</span></span> <span data-ttu-id="a2aba-549">Stoppa alla program/tjänster som kan påverkas av den här avbrott innan du ändrar diskcache-inställningen.</span><span class="sxs-lookup"><span data-stu-id="a2aba-549">Stop all applications/services that might be affected by this disruption before changing the disk cache setting.</span></span>
>
>

<span data-ttu-id="a2aba-550">Mer information om hur BlobCache fungerar finns i inre [Azure Premium Storage](https://azure.microsoft.com/blog/azure-premium-storage-now-generally-available-2/) blogginlägg.</span><span class="sxs-lookup"><span data-stu-id="a2aba-550">To learn more about how BlobCache works, refer to the Inside [Azure Premium Storage](https://azure.microsoft.com/blog/azure-premium-storage-now-generally-available-2/) blog post.</span></span>

<span data-ttu-id="a2aba-551">Det är viktigt att aktivera cachen på rätt uppsättning diskar.</span><span class="sxs-lookup"><span data-stu-id="a2aba-551">It is important to enable cache on the right set of disks.</span></span> <span data-ttu-id="a2aba-552">Om du ska aktivera cachelagring på disk på en disk i premium eller inte beror på arbetsbelastningen mönstret disken hanterar.</span><span class="sxs-lookup"><span data-stu-id="a2aba-552">Whether you should enable disk caching on a premium disk or not will depend on the workload pattern that disk will be handling.</span></span> <span data-ttu-id="a2aba-553">Tabellen nedan visar standard inställningar för cachelagring för Operativsystemet och datadiskarna.</span><span class="sxs-lookup"><span data-stu-id="a2aba-553">Table below shows the default cache settings for OS and Data disks.</span></span>

| <span data-ttu-id="a2aba-554">**Typ av disk**</span><span class="sxs-lookup"><span data-stu-id="a2aba-554">**Disk Type**</span></span> | <span data-ttu-id="a2aba-555">**Standardinställning för Cache**</span><span class="sxs-lookup"><span data-stu-id="a2aba-555">**Default Cache Setting**</span></span> |
| --- | --- |
| <span data-ttu-id="a2aba-556">OS-disk</span><span class="sxs-lookup"><span data-stu-id="a2aba-556">OS disk</span></span> |<span data-ttu-id="a2aba-557">ReadWrite</span><span class="sxs-lookup"><span data-stu-id="a2aba-557">ReadWrite</span></span> |
| <span data-ttu-id="a2aba-558">Datadisk</span><span class="sxs-lookup"><span data-stu-id="a2aba-558">Data disk</span></span> |<span data-ttu-id="a2aba-559">Ingen</span><span class="sxs-lookup"><span data-stu-id="a2aba-559">None</span></span> |

<span data-ttu-id="a2aba-560">Följande är inställningar för cachelagring av rekommenderas för datadiskar,</span><span class="sxs-lookup"><span data-stu-id="a2aba-560">Following are the recommended disk cache settings for data disks,</span></span>

| <span data-ttu-id="a2aba-561">**Disken cacheinställning**</span><span class="sxs-lookup"><span data-stu-id="a2aba-561">**Disk Caching Setting**</span></span> | <span data-ttu-id="a2aba-562">**Rekommendation om när du ska använda den här inställningen**</span><span class="sxs-lookup"><span data-stu-id="a2aba-562">**Recommendation on when to use this setting**</span></span> |
| --- | --- |
| <span data-ttu-id="a2aba-563">Ingen</span><span class="sxs-lookup"><span data-stu-id="a2aba-563">None</span></span> |<span data-ttu-id="a2aba-564">Konfigurera värd-cachen eftersom ingen för lässkyddad och skrivintensiv diskar.</span><span class="sxs-lookup"><span data-stu-id="a2aba-564">Configure host-cache as None for write-only and write-heavy disks.</span></span> |
| <span data-ttu-id="a2aba-565">Skrivskyddad</span><span class="sxs-lookup"><span data-stu-id="a2aba-565">ReadOnly</span></span> |<span data-ttu-id="a2aba-566">Konfigurera värd-cache som ReadOnly för skrivskyddade och läsa / skriva-diskar.</span><span class="sxs-lookup"><span data-stu-id="a2aba-566">Configure host-cache as ReadOnly for read-only and read-write disks.</span></span> |
| <span data-ttu-id="a2aba-567">ReadWrite</span><span class="sxs-lookup"><span data-stu-id="a2aba-567">ReadWrite</span></span> |<span data-ttu-id="a2aba-568">Konfigurera värd-cache som ReadWrite bara om programmet hanterar korrekt cachelagrade data skrivs till beständiga diskar vid behov.</span><span class="sxs-lookup"><span data-stu-id="a2aba-568">Configure host-cache as ReadWrite only if your application properly  handles writing cached data to persistent disks when needed.</span></span> |

<span data-ttu-id="a2aba-569">*Skrivskyddad*</span><span class="sxs-lookup"><span data-stu-id="a2aba-569">*ReadOnly*</span></span>  
<span data-ttu-id="a2aba-570">Genom att konfigurera ReadOnly cachelagring på Premium-lagring data diskar kan du uppnå Läs fördröjning och hämta mycket hög Läs IOPS och genomströmning för ditt program.</span><span class="sxs-lookup"><span data-stu-id="a2aba-570">By configuring ReadOnly caching on Premium Storage data disks, you can achieve low Read latency and get very high Read IOPS and Throughput for your application.</span></span> <span data-ttu-id="a2aba-571">Detta är på grund av två skäl</span><span class="sxs-lookup"><span data-stu-id="a2aba-571">This is due two reasons,</span></span>

1. <span data-ttu-id="a2aba-572">Läser utföras från cache, som finns i det Virtuella minnet och lokala SSD, är mycket snabbare än läsning från datadisken som finns i Azure blob storage.</span><span class="sxs-lookup"><span data-stu-id="a2aba-572">Reads performed from cache, which is on the VM memory and local SSD, are much faster than reads from the data disk, which is on the Azure blob storage.</span></span>  
2. <span data-ttu-id="a2aba-573">Premium-lagring räknas inte läsningar från cache, mot disken IOPS och genomflöde.</span><span class="sxs-lookup"><span data-stu-id="a2aba-573">Premium Storage does not count the Reads served from cache, towards the disk IOPS and Throughput.</span></span> <span data-ttu-id="a2aba-574">Därför är tillämpningsprogrammet möjlig att uppnå högre IOPS totalt och genomflöde.</span><span class="sxs-lookup"><span data-stu-id="a2aba-574">Therefore, your application is able to achieve higher total IOPS and Throughput.</span></span>

<span data-ttu-id="a2aba-575">*ReadWrite*</span><span class="sxs-lookup"><span data-stu-id="a2aba-575">*ReadWrite*</span></span>  
<span data-ttu-id="a2aba-576">Som standard har OS-diskar ReadWrite cachelagring aktiverat.</span><span class="sxs-lookup"><span data-stu-id="a2aba-576">By default, the OS disks have ReadWrite caching enabled.</span></span> <span data-ttu-id="a2aba-577">Vi har lagt till stöd för ReadWrite cachelagring på data samt diskar.</span><span class="sxs-lookup"><span data-stu-id="a2aba-577">We have recently added support for ReadWrite caching on data disks as well.</span></span> <span data-ttu-id="a2aba-578">Om du använder ReadWrite cachelagring, måste du ha ett korrekt sätt att skriva data från cache till beständiga diskar.</span><span class="sxs-lookup"><span data-stu-id="a2aba-578">If you are using ReadWrite caching, you must have a proper way to write the data from cache to persistent disks.</span></span> <span data-ttu-id="a2aba-579">Till exempel SQL Server hanterar cachelagrade data skrivs till beständiga lagringsdiskarna på sin egen.</span><span class="sxs-lookup"><span data-stu-id="a2aba-579">For example, SQL Server handles writing cached data to the persistent storage disks on its own.</span></span> <span data-ttu-id="a2aba-580">Med ett program som inte hanterar beständighet nödvändiga data ReadWrite cache kan leda till förlust av data om den virtuella datorn kraschar.</span><span class="sxs-lookup"><span data-stu-id="a2aba-580">Using ReadWrite cache with an application that does not handle persisting the required data can lead to data loss, if the VM crashes.</span></span>

<span data-ttu-id="a2aba-581">T.ex, du kan använda dessa riktlinjer för SQL Server som körs på Premium-lagring genom att göra följande:</span><span class="sxs-lookup"><span data-stu-id="a2aba-581">As an example, you can apply these guidelines to SQL Server running on Premium Storage by doing the following,</span></span>

1. <span data-ttu-id="a2aba-582">Konfigurera ”ReadOnly” cache på premium storage diskar som är värd för filer.</span><span class="sxs-lookup"><span data-stu-id="a2aba-582">Configure "ReadOnly" cache on premium storage disks hosting data files.</span></span>  
   <span data-ttu-id="a2aba-583">a.</span><span class="sxs-lookup"><span data-stu-id="a2aba-583">a.</span></span>  <span data-ttu-id="a2aba-584">Fast läser från cache lägre Frågetid SQL Server eftersom datasidor är mycket snabbare hämtas från cachen jämfört med direkt från data diskar.</span><span class="sxs-lookup"><span data-stu-id="a2aba-584">The fast reads from cache lower the SQL Server query time since data pages are retrieved much faster from the cache compared to directly from the data disks.</span></span>  
   <span data-ttu-id="a2aba-585">b.</span><span class="sxs-lookup"><span data-stu-id="a2aba-585">b.</span></span>  <span data-ttu-id="a2aba-586">Hanterar läser från cache, innebär ytterligare genomflöde är tillgänglig från premium datadiskar.</span><span class="sxs-lookup"><span data-stu-id="a2aba-586">Serving reads from cache, means there is additional Throughput available from premium data disks.</span></span> <span data-ttu-id="a2aba-587">SQL Server kan använda den här ytterligare genomflöde mot hämta mer datasidor och andra åtgärder som säkerhetskopiering/återställning batch belastningar och index återskapas.</span><span class="sxs-lookup"><span data-stu-id="a2aba-587">SQL Server can use this additional Throughput towards retrieving more data pages and other operations like backup/restore, batch loads, and index rebuilds.</span></span>  
2. <span data-ttu-id="a2aba-588">Konfigurera ”None” cachelagras på premium lagringsdiskar värd loggfilerna.</span><span class="sxs-lookup"><span data-stu-id="a2aba-588">Configure "None" cache on premium storage disks hosting the log files.</span></span>  
   <span data-ttu-id="a2aba-589">a.</span><span class="sxs-lookup"><span data-stu-id="a2aba-589">a.</span></span>  <span data-ttu-id="a2aba-590">Loggfilerna har främst skrivintensiv åtgärder.</span><span class="sxs-lookup"><span data-stu-id="a2aba-590">Log files have primarily write-heavy operations.</span></span> <span data-ttu-id="a2aba-591">Därför kan får de inte ReadOnly-cachen.</span><span class="sxs-lookup"><span data-stu-id="a2aba-591">Therefore, they do not benefit from the ReadOnly cache.</span></span>

## <a name="disk-striping"></a><span data-ttu-id="a2aba-592">Disk-Striping</span><span class="sxs-lookup"><span data-stu-id="a2aba-592">Disk Striping</span></span>
<span data-ttu-id="a2aba-593">När en hög skala VM är kopplade till flera premium beständiga lagringsdiskar kan diskarna vara stripe tillsammans för att sammanställa sina IOPs och bandbredd lagringskapacitet.</span><span class="sxs-lookup"><span data-stu-id="a2aba-593">When a high scale VM is attached with several premium storage persistent disks, the disks can be striped together to aggregate their IOPs, bandwidth, and storage capacity.</span></span>

<span data-ttu-id="a2aba-594">I Windows, kan du använda lagringsutrymmen till stripe-diskar tillsammans.</span><span class="sxs-lookup"><span data-stu-id="a2aba-594">On Windows, you can use Storage Spaces to stripe disks together.</span></span> <span data-ttu-id="a2aba-595">Du måste konfigurera en kolumn för varje disk i en pool.</span><span class="sxs-lookup"><span data-stu-id="a2aba-595">You must configure one column for each disk in a pool.</span></span> <span data-ttu-id="a2aba-596">Annars kan prestandan stripe-volym vara lägre än förväntat pga en ojämn fördelning av trafik över diskar.</span><span class="sxs-lookup"><span data-stu-id="a2aba-596">Otherwise, the overall performance of striped volume can be lower than expected, due to uneven distribution of traffic across the disks.</span></span>

<span data-ttu-id="a2aba-597">Viktigt: Använda Server Manager UI kan ange du det totala antalet kolumner upp till 8 för stripe-volymer.</span><span class="sxs-lookup"><span data-stu-id="a2aba-597">Important: Using Server Manager UI, you can set the total number of columns up to 8 for a striped volume.</span></span> <span data-ttu-id="a2aba-598">När du bifogar mer än 8 diskar, kan du använda PowerShell för att skapa volymen.</span><span class="sxs-lookup"><span data-stu-id="a2aba-598">When attaching more than 8 disks, use PowerShell to create the volume.</span></span> <span data-ttu-id="a2aba-599">Med hjälp av PowerShell, kan du ange antalet kolumner lika med antalet diskar.</span><span class="sxs-lookup"><span data-stu-id="a2aba-599">Using PowerShell, you can set the number of columns equal to the number of disks.</span></span> <span data-ttu-id="a2aba-600">Till exempel om det finns 16 diskar i en enda stripe-uppsättning; Ange 16 kolumner i den *NumberOfColumns* parameter för den *New-VirtualDisk* PowerShell-cmdlet.</span><span class="sxs-lookup"><span data-stu-id="a2aba-600">For example, if there are 16 disks in a single stripe set; specify 16 columns in the *NumberOfColumns* parameter of the *New-VirtualDisk* PowerShell cmdlet.</span></span>

<span data-ttu-id="a2aba-601">Använd verktyget MDADM stripe-diskar tillsammans på Linux.</span><span class="sxs-lookup"><span data-stu-id="a2aba-601">On Linux, use the MDADM utility to stripe disks together.</span></span> <span data-ttu-id="a2aba-602">Detaljerade anvisningar på striping diskar på Linux finns [konfigurera programvara RAID på Linux](../virtual-machines/linux/configure-raid.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json).</span><span class="sxs-lookup"><span data-stu-id="a2aba-602">For detailed steps on striping disks on Linux refer to [Configure Software RAID on Linux](../virtual-machines/linux/configure-raid.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json).</span></span>

<span data-ttu-id="a2aba-603">*Stripe-storlek*</span><span class="sxs-lookup"><span data-stu-id="a2aba-603">*Stripe Size*</span></span>  
<span data-ttu-id="a2aba-604">En viktig konfiguration i disken striping är stripe-storlek.</span><span class="sxs-lookup"><span data-stu-id="a2aba-604">An important configuration in disk striping is the stripe size.</span></span> <span data-ttu-id="a2aba-605">Stripe-storlek eller blockstorleken är den minsta datasegmentet som programmet kan åtgärda på stripe-volymer.</span><span class="sxs-lookup"><span data-stu-id="a2aba-605">The stripe size or block size is the smallest chunk of data that application can address on a striped volume.</span></span> <span data-ttu-id="a2aba-606">Stripe-storlek som du konfigurerar beror på vilken typ av program och dess mönster i begäran.</span><span class="sxs-lookup"><span data-stu-id="a2aba-606">The stripe size you configure depends on the type of application and its request pattern.</span></span> <span data-ttu-id="a2aba-607">Om du väljer fel stripe-storlek kan leda det till att i/o-feljusteringarna, vilket leder till försämrade prestanda för programmet.</span><span class="sxs-lookup"><span data-stu-id="a2aba-607">If you choose the wrong stripe size, it could lead to IO misalignment, which leads to degraded performance of your application.</span></span>

<span data-ttu-id="a2aba-608">Till exempel om en i/o-begäran som genererats av ditt program är större än den stripe-diskstorleken skriver lagringssystemet den över stripe enhet gränser på mer än en disk.</span><span class="sxs-lookup"><span data-stu-id="a2aba-608">For example, if an IO request generated by your application is bigger than the disk stripe size, the storage system writes it across stripe unit boundaries on more than one disk.</span></span> <span data-ttu-id="a2aba-609">När det är dags att komma åt dessa data har att söka i mer än en stripe-enheter för att slutföra begäran.</span><span class="sxs-lookup"><span data-stu-id="a2aba-609">When it is time to access that data, it will have to seek across more than one stripe units to complete the request.</span></span> <span data-ttu-id="a2aba-610">Den kumulativa effekten av sådana beteende kan leda till stor prestandaförsämring.</span><span class="sxs-lookup"><span data-stu-id="a2aba-610">The cumulative effect of such behavior can lead to substantial performance degradation.</span></span> <span data-ttu-id="a2aba-611">Å andra sidan, kan om i/o-begäran är mindre än Stripestorleken på och om det är slumpmässigt i/o-begäranden uppgå på samma disk orsakar en flaskhals och slutligen försämring av i/o-prestanda.</span><span class="sxs-lookup"><span data-stu-id="a2aba-611">On the other hand, if the IO request size is smaller than stripe size, and if it is random in nature, the IO requests may add up on the same disk causing a bottleneck and ultimately degrading the IO performance.</span></span>

<span data-ttu-id="a2aba-612">Beroende på typ av arbetsbelastning som programmet körs, väljer du en lämplig stripe-storlek.</span><span class="sxs-lookup"><span data-stu-id="a2aba-612">Depending on the type of workload your application is running, choose an appropriate stripe size.</span></span> <span data-ttu-id="a2aba-613">Använda en mindre stripe-storlek för slumpmässiga små i/o-begäranden.</span><span class="sxs-lookup"><span data-stu-id="a2aba-613">For random small IO requests, use a smaller stripe size.</span></span> <span data-ttu-id="a2aba-614">Medan för stora sekventiella i/o-begäranden för att använda en större stripe.</span><span class="sxs-lookup"><span data-stu-id="a2aba-614">Whereas, for large sequential IO requests use a larger stripe size.</span></span> <span data-ttu-id="a2aba-615">Ta reda på stripe storlek rekommendationer för programmet körs på Premium-lagring.</span><span class="sxs-lookup"><span data-stu-id="a2aba-615">Find out the stripe size recommendations for the application you will be running on Premium Storage.</span></span> <span data-ttu-id="a2aba-616">Konfigurera stripe storlek på 64KB för OLTP-arbetsbelastningar och 256KB för data datalagring arbetsbelastningar för SQL Server.</span><span class="sxs-lookup"><span data-stu-id="a2aba-616">For SQL Server, configure stripe size of 64KB for OLTP workloads and 256KB for data warehousing workloads.</span></span> <span data-ttu-id="a2aba-617">Se [prestandarelaterade Metodtips för SQL Server på Azure Virtual Machines](../virtual-machines/windows/sql/virtual-machines-windows-sql-performance.md#disks-guidance) vill veta mer.</span><span class="sxs-lookup"><span data-stu-id="a2aba-617">See [Performance best practices for SQL Server on Azure VMs](../virtual-machines/windows/sql/virtual-machines-windows-sql-performance.md#disks-guidance) to learn more.</span></span>

> [!NOTE]
> <span data-ttu-id="a2aba-618">Du kan stripe-tillsammans högst 32 premium storage på DS-serien VM och 64 premium storage diskar på GS-serien VM.</span><span class="sxs-lookup"><span data-stu-id="a2aba-618">You can stripe together a maximum of 32 premium storage disks on a DS series VM and 64 premium storage disks on a GS series VM.</span></span>
>
>

## <a name="multi-threading"></a><span data-ttu-id="a2aba-619">Flertrådsteknik</span><span class="sxs-lookup"><span data-stu-id="a2aba-619">Multi-threading</span></span>
<span data-ttu-id="a2aba-620">Premium-lagring plattform ska massivt parallell har utformats för Azure.</span><span class="sxs-lookup"><span data-stu-id="a2aba-620">Azure has designed Premium Storage platform to be massively parallel.</span></span> <span data-ttu-id="a2aba-621">Ett flertrådat program uppnår därför mycket högre prestanda än en enkeltrådig program.</span><span class="sxs-lookup"><span data-stu-id="a2aba-621">Therefore, a multi-threaded application achieves much higher performance than a single-threaded application.</span></span> <span data-ttu-id="a2aba-622">Ett flertrådat program delar upp sina uppgifter över flera trådar och ökar effektiviteten för körningen genom att använda VM- och diskresurser resurser till högsta.</span><span class="sxs-lookup"><span data-stu-id="a2aba-622">A multi-threaded application splits up its tasks across multiple threads and increases efficiency of its execution by utilizing the VM and disk resources to the maximum.</span></span>

<span data-ttu-id="a2aba-623">Till exempel om tillämpningsprogrammet körs på en enda kärna VM med två trådar kan Processorn växla mellan två trådar för att uppnå effektivitet.</span><span class="sxs-lookup"><span data-stu-id="a2aba-623">For example, if your application is running on a single core VM using two threads, the CPU can switch between the two threads to achieve efficiency.</span></span> <span data-ttu-id="a2aba-624">När en tråd väntar på en disk-i/o för att slutföra kan Processorn växla till den andra tråden.</span><span class="sxs-lookup"><span data-stu-id="a2aba-624">While one thread is waiting on a disk IO to complete, the CPU can switch to the other thread.</span></span> <span data-ttu-id="a2aba-625">På så sätt kan kan två trådar göra mer än en enkel tråd.</span><span class="sxs-lookup"><span data-stu-id="a2aba-625">In this way, two threads can accomplish more than a single thread would.</span></span> <span data-ttu-id="a2aba-626">Om den virtuella datorn har mer än en kärna, minskar ytterligare körtiden eftersom varje kärna kan köra uppgifter parallellt.</span><span class="sxs-lookup"><span data-stu-id="a2aba-626">If the VM has more than one core, it further decreases running time since each core can execute tasks in parallel.</span></span>

<span data-ttu-id="a2aba-627">Du kanske inte kan ändra hur ett färdigt program implementerar enda trådade eller flertrådsteknik.</span><span class="sxs-lookup"><span data-stu-id="a2aba-627">You may not be able to change the way an off-the-shelf application implements single threading or multi-threading.</span></span> <span data-ttu-id="a2aba-628">SQL Server är kan hantera flera processorer och flera kärnor.</span><span class="sxs-lookup"><span data-stu-id="a2aba-628">For example, SQL Server is capable of handling multi-CPU and multi-core.</span></span> <span data-ttu-id="a2aba-629">Dock beslutar SQL Server under vilka förhållanden den använder en eller flera trådar för att bearbeta en fråga.</span><span class="sxs-lookup"><span data-stu-id="a2aba-629">However, SQL Server decides under what conditions it will leverage one or more threads to process a query.</span></span> <span data-ttu-id="a2aba-630">Den kan köra frågor och skapa index med flertrådsteknik.</span><span class="sxs-lookup"><span data-stu-id="a2aba-630">It can run queries and build indexes using multi-threading.</span></span> <span data-ttu-id="a2aba-631">SQL Server att sannolikt använda flera trådar för en fråga som inbegriper stora tabeller och sortera data innan det returneras till användaren.</span><span class="sxs-lookup"><span data-stu-id="a2aba-631">For a query that involves joining large tables and sorting data before returning to the user, SQL Server will likely use multiple threads.</span></span> <span data-ttu-id="a2aba-632">En användare kan dock styra om SQL Server kör en fråga med hjälp av en enskild tråd eller flera trådar.</span><span class="sxs-lookup"><span data-stu-id="a2aba-632">However, a user cannot control whether SQL Server executes a query using a single thread or multiple threads.</span></span>

<span data-ttu-id="a2aba-633">Det finns inställningar som du kan ändra påverkar detta flertrådsteknik eller parallell bearbetning av ett program.</span><span class="sxs-lookup"><span data-stu-id="a2aba-633">There are configuration settings that you can alter to influence this multi-threading or parallel processing of an application.</span></span> <span data-ttu-id="a2aba-634">Det kan till exempel är maximal grad av parallellitet konfiguration vid SQL Server.</span><span class="sxs-lookup"><span data-stu-id="a2aba-634">For example, in case of SQL Server it is the maximum Degree of Parallelism configuration.</span></span> <span data-ttu-id="a2aba-635">Den här inställningen som kallas MAXDOP, kan du konfigurera det maximala antalet processorer som SQL Server kan använda när parallell bearbetning.</span><span class="sxs-lookup"><span data-stu-id="a2aba-635">This setting called MAXDOP, allows you to configure the maximum number of processors SQL Server can use when parallel processing.</span></span> <span data-ttu-id="a2aba-636">Du kan konfigurera MAXDOP för enskilda frågor eller Indexåtgärder.</span><span class="sxs-lookup"><span data-stu-id="a2aba-636">You can configure MAXDOP for individual queries or index operations.</span></span> <span data-ttu-id="a2aba-637">Det här är bra när du vill utjämna resurser i systemet för prestanda kritiska program.</span><span class="sxs-lookup"><span data-stu-id="a2aba-637">This is beneficial when you want to balance resources of your system for a performance critical application.</span></span>

<span data-ttu-id="a2aba-638">Anta exempelvis att ditt program som använder SQL Server körs på en stor fråga och ett indexåtgärden på samma gång.</span><span class="sxs-lookup"><span data-stu-id="a2aba-638">For example, say your application using SQL Server is executing a large query and an index operation at the same time.</span></span> <span data-ttu-id="a2aba-639">Låt oss anta att du vill att indexåtgärden ska vara mer performant jämfört med stora frågan.</span><span class="sxs-lookup"><span data-stu-id="a2aba-639">Let us assume that you wanted the index operation to be more performant compared to the large query.</span></span> <span data-ttu-id="a2aba-640">I så fall kan ange du MAXDOP värde indexåtgärden vara högre än värdet MAXDOP för frågan.</span><span class="sxs-lookup"><span data-stu-id="a2aba-640">In such a case, you can set MAXDOP value of the index operation to be higher than the MAXDOP value for the query.</span></span> <span data-ttu-id="a2aba-641">På så sätt kan har SQL Server fler processorer som den kan använda för indexåtgärden jämfört med antalet processorer som den kan dedikera i stora frågan.</span><span class="sxs-lookup"><span data-stu-id="a2aba-641">This way, SQL Server has more number of processors that it can leverage for the index operation compared to the number of processors it can dedicate to the large query.</span></span> <span data-ttu-id="a2aba-642">Kom ihåg att du inte styr antalet trådar som ska användas för varje åtgärd i SQL Server.</span><span class="sxs-lookup"><span data-stu-id="a2aba-642">Remember, you do not control the number of threads SQL Server will use for each operation.</span></span> <span data-ttu-id="a2aba-643">Du kan kontrollera det maximala antalet processorer som är dedikerad för flertrådsteknik.</span><span class="sxs-lookup"><span data-stu-id="a2aba-643">You can control the maximum number of processors being dedicated for multi-threading.</span></span>

<span data-ttu-id="a2aba-644">Lär dig mer om [grader parallellitet](https://technet.microsoft.com/library/ms188611.aspx) i SQL Server.</span><span class="sxs-lookup"><span data-stu-id="a2aba-644">Learn more about [Degrees of Parallelism](https://technet.microsoft.com/library/ms188611.aspx) in SQL Server.</span></span> <span data-ttu-id="a2aba-645">Ta reda på sådana inställningar som påverkar flertrådsteknik i ditt program och deras konfigurationer för att optimera prestanda.</span><span class="sxs-lookup"><span data-stu-id="a2aba-645">Find out such settings that influence multi-threading in your application and their configurations to optimize performance.</span></span>

## <a name="queue-depth"></a><span data-ttu-id="a2aba-646">Ködjup</span><span class="sxs-lookup"><span data-stu-id="a2aba-646">Queue Depth</span></span>
<span data-ttu-id="a2aba-647">Ködjup eller Kölängd eller köstorlek är antalet väntande i/o-begäranden i systemet.</span><span class="sxs-lookup"><span data-stu-id="a2aba-647">The Queue Depth or Queue Length or Queue Size is the number of pending IO requests in the system.</span></span> <span data-ttu-id="a2aba-648">Värdet för ködjup bestämmer hur många i/o-åtgärder som programmet kan Rada upp som diskar med lagringsutrymme ska bearbetas.</span><span class="sxs-lookup"><span data-stu-id="a2aba-648">The value of Queue Depth determines how many IO operations your application can line up, which the storage disks will be processing.</span></span> <span data-ttu-id="a2aba-649">Den påverkar alla tre program-nyckeltal som beskrevs i d.v.s. på den här artikeln, IOPS, genomflöde och svarstid.</span><span class="sxs-lookup"><span data-stu-id="a2aba-649">It affects all the three application performance indicators that we discussed in this article viz., IOPS, Throughput and Latency.</span></span>

<span data-ttu-id="a2aba-650">Kö djup och flertrådsteknik är nära relaterade.</span><span class="sxs-lookup"><span data-stu-id="a2aba-650">Queue Depth and multi-threading are closely related.</span></span> <span data-ttu-id="a2aba-651">Ködjup värdet anger hur mycket flertrådsteknik som kan uppnås av programmet.</span><span class="sxs-lookup"><span data-stu-id="a2aba-651">The Queue Depth value indicates how much multi-threading can be achieved by the application.</span></span> <span data-ttu-id="a2aba-652">Om det ködjup är stor, programmet kan köra flera åtgärder samtidigt, med andra ord mer flertrådsteknik.</span><span class="sxs-lookup"><span data-stu-id="a2aba-652">If the Queue Depth is large, application can execute more operations concurrently, in other words, more multi-threading.</span></span> <span data-ttu-id="a2aba-653">Om det ködjup är litet, även om programmet är flertrådade, har inte tillräckligt med begäranden som väntar på samtidig körning.</span><span class="sxs-lookup"><span data-stu-id="a2aba-653">If the Queue Depth is small, even though application is multi-threaded, it will not have enough requests lined up for concurrent execution.</span></span>

<span data-ttu-id="a2aba-654">Vanligtvis av hyllan program inte är tillåtet att ändra ködjupet eftersom om angetts felaktigt den gör mer skada än bra.</span><span class="sxs-lookup"><span data-stu-id="a2aba-654">Typically, off the shelf applications do not allow you to change the queue depth, because if set incorrectly it will do more harm than good.</span></span> <span data-ttu-id="a2aba-655">Program ska värdet rätt för ködjup för att få bästa möjliga prestanda.</span><span class="sxs-lookup"><span data-stu-id="a2aba-655">Applications will set the right value of queue depth to get the optimal performance.</span></span> <span data-ttu-id="a2aba-656">Det är viktigt att förstå detta begrepp så att du kan felsöka problem med prestanda med ditt program.</span><span class="sxs-lookup"><span data-stu-id="a2aba-656">However, it is important to understand this concept so that you can troubleshoot performance issues with your application.</span></span> <span data-ttu-id="a2aba-657">Du kan också se effekterna av ködjup genom att köra benchmarking verktyg på datorn.</span><span class="sxs-lookup"><span data-stu-id="a2aba-657">You can also observe the effects of queue depth by running benchmarking tools on your system.</span></span>

<span data-ttu-id="a2aba-658">Vissa program ange inställningar för att påverka det ködjup.</span><span class="sxs-lookup"><span data-stu-id="a2aba-658">Some applications provide settings to influence the Queue Depth.</span></span> <span data-ttu-id="a2aba-659">Till exempel beskrivs inställningen MAXDOP (högsta grad av parallellitet) i SQL Server i föregående avsnitt.</span><span class="sxs-lookup"><span data-stu-id="a2aba-659">For example, the MAXDOP (maximum degree of parallelism) setting in SQL Server explained in previous section.</span></span> <span data-ttu-id="a2aba-660">MAXDOP är ett sätt att påverka ködjup och flertrådsteknik, även om den inte direkt ändra ködjup värdet av SQL Server.</span><span class="sxs-lookup"><span data-stu-id="a2aba-660">MAXDOP is a way to influence Queue Depth and multi-threading, although it does not directly change the Queue Depth value of SQL Server.</span></span>

<span data-ttu-id="a2aba-661">*Hög ködjup*</span><span class="sxs-lookup"><span data-stu-id="a2aba-661">*High Queue Depth*</span></span>  
<span data-ttu-id="a2aba-662">En hög ködjup skrivs flera åtgärder på disken.</span><span class="sxs-lookup"><span data-stu-id="a2aba-662">A high queue depth lines up more operations on the disk.</span></span> <span data-ttu-id="a2aba-663">Disken vet nästa begäran i kön i förväg.</span><span class="sxs-lookup"><span data-stu-id="a2aba-663">The disk knows the next request in its queue ahead of time.</span></span> <span data-ttu-id="a2aba-664">Följaktligen disken schemalägga åtgärder i förväg och bearbeta dem i en optimal sekvens.</span><span class="sxs-lookup"><span data-stu-id="a2aba-664">Consequently, the disk can schedule operations ahead of time and process them in an optimal sequence.</span></span> <span data-ttu-id="a2aba-665">Eftersom programmet är mer begäranden skickas till disken, kan disken bearbeta flera parallella IOs.</span><span class="sxs-lookup"><span data-stu-id="a2aba-665">Since the application is sending more requests to the disk, the disk can process more parallel IOs.</span></span> <span data-ttu-id="a2aba-666">Slutligen kommer programmet att kunna uppnå högre IOPS.</span><span class="sxs-lookup"><span data-stu-id="a2aba-666">Ultimately, the application will be able to achieve higher IOPS.</span></span> <span data-ttu-id="a2aba-667">Eftersom fler begäranden bearbetning, ökar även det totala genomflödet i programmet.</span><span class="sxs-lookup"><span data-stu-id="a2aba-667">Since application is processing more requests, the total Throughput of the application also increases.</span></span>

<span data-ttu-id="a2aba-668">Vanligtvis ett program kan uppnå maximalt dataflöde med 8-16 + utestående I/o per ansluten disk.</span><span class="sxs-lookup"><span data-stu-id="a2aba-668">Typically, an application can achieve maximum Throughput with 8-16+ outstanding IOs per attached disk.</span></span> <span data-ttu-id="a2aba-669">Om ett ködjup är en, tillräckligt med IOs att systemet gör inte att program och mindre mängd bearbetas under en viss period.</span><span class="sxs-lookup"><span data-stu-id="a2aba-669">If a Queue Depth is one, application is not pushing enough IOs to the system, and it will process less amount of in a given period.</span></span> <span data-ttu-id="a2aba-670">Med andra ord mindre genomflöde.</span><span class="sxs-lookup"><span data-stu-id="a2aba-670">In other words, less Throughput.</span></span>

<span data-ttu-id="a2aba-671">Till exempel i SQL Server meddelar MAXDOP värdet för en fråga till ”4” SQL Server som den kan använda upp till fyra kärnor för att köra frågan.</span><span class="sxs-lookup"><span data-stu-id="a2aba-671">For example, in SQL Server, setting the MAXDOP value for a query to "4" informs SQL Server that it can use up to four cores to execute the query.</span></span> <span data-ttu-id="a2aba-672">SQL Server avgör vad är bästa kön djup värdet och antalet kärnor för körningen av frågan.</span><span class="sxs-lookup"><span data-stu-id="a2aba-672">SQL Server will determine what is best queue depth value and the number of cores for the query execution.</span></span>

<span data-ttu-id="a2aba-673">*Optimalt ködjup*</span><span class="sxs-lookup"><span data-stu-id="a2aba-673">*Optimal Queue Depth*</span></span>  
<span data-ttu-id="a2aba-674">Mycket hög kön djup värdet har även dess nackdelar.</span><span class="sxs-lookup"><span data-stu-id="a2aba-674">Very high queue depth value also has its drawbacks.</span></span> <span data-ttu-id="a2aba-675">Om kön djup värdet är för högt, försöker programmet enhet mycket hög IOPS.</span><span class="sxs-lookup"><span data-stu-id="a2aba-675">If queue depth value is too high, the application will try to drive very high IOPS.</span></span> <span data-ttu-id="a2aba-676">Om programmet har beständiga diskar med tillräckligt etablerade IOPS, kan detta påverka programväntetider.</span><span class="sxs-lookup"><span data-stu-id="a2aba-676">Unless application has persistent disks with sufficient provisioned IOPS, this can negatively affect application latencies.</span></span> <span data-ttu-id="a2aba-677">Följande formel visar relationen mellan IOPS, svarstid och ködjup.</span><span class="sxs-lookup"><span data-stu-id="a2aba-677">Following formula shows the relationship between IOPS, Latency and Queue Depth.</span></span>  
    ![](media/storage-premium-storage-performance/image6.png)

<span data-ttu-id="a2aba-678">Du bör inte konfigurera ködjup till ett högt värde, men ett optimalt värde som kan ge tillräckligt med IOPS för programmet utan att påverka svarstider.</span><span class="sxs-lookup"><span data-stu-id="a2aba-678">You should not configure Queue Depth to any high value, but to an optimal value, which can deliver enough IOPS for the application without affecting latencies.</span></span> <span data-ttu-id="a2aba-679">Till exempel om programmet fördröjning måste vara 1 millisekund, ködjup som krävs för att uppnå 5 000 IOPS är QD = 5000 x 0,001 = 5.</span><span class="sxs-lookup"><span data-stu-id="a2aba-679">For example, if the application latency needs to be 1 millisecond, the Queue Depth required to achieve 5,000 IOPS is, QD = 5000 x 0.001 = 5.</span></span>

<span data-ttu-id="a2aba-680">*Ködjup för stripe-volym*</span><span class="sxs-lookup"><span data-stu-id="a2aba-680">*Queue Depth for Striped Volume*</span></span>  
<span data-ttu-id="a2aba-681">Upprätthålla ett tillräckligt högt ködjup för stripe-volymer så att alla diskar har en topp ködjup individuellt.</span><span class="sxs-lookup"><span data-stu-id="a2aba-681">For a striped volume, maintain a high enough queue depth such that, every disk has a peak queue depth individually.</span></span> <span data-ttu-id="a2aba-682">Anta till exempel att ett program som skickar ett ködjup på 2 och det finns 4 diskar i stripe.</span><span class="sxs-lookup"><span data-stu-id="a2aba-682">For example, consider an application that pushes a queue depth of 2 and there are 4 disks in the stripe.</span></span> <span data-ttu-id="a2aba-683">Två i/o-begäranden skickas till två diskar och återstående två diskar blir inaktiv.</span><span class="sxs-lookup"><span data-stu-id="a2aba-683">The two IO requests will go to two disks and remaining two disks will be idle.</span></span> <span data-ttu-id="a2aba-684">Därför konfigurera ködjupet så att alla diskar som kan vara upptaget.</span><span class="sxs-lookup"><span data-stu-id="a2aba-684">Therefore, configure the queue depth such that all the disks can be busy.</span></span> <span data-ttu-id="a2aba-685">Formeln nedan visar hur du fastställer ködjup på stripe-volymer.</span><span class="sxs-lookup"><span data-stu-id="a2aba-685">Formula below shows how to determine the queue depth of striped volumes.</span></span>  
    ![](media/storage-premium-storage-performance/image7.png)

## <a name="throttling"></a><span data-ttu-id="a2aba-686">Begränsning</span><span class="sxs-lookup"><span data-stu-id="a2aba-686">Throttling</span></span>
<span data-ttu-id="a2aba-687">Azure bestämmelserna Premium-lagring antal IOPS och genomflöde för beroende på VM-storlekar och storlekar för diskar som du väljer.</span><span class="sxs-lookup"><span data-stu-id="a2aba-687">Azure Premium Storage provisions specified number of IOPS and Throughput depending on the VM sizes and disk sizes you choose.</span></span> <span data-ttu-id="a2aba-688">När programmet försöker enheten IOPS eller dataflöde ovan dessa gränser vad virtuell dator eller disk kan hantera den med begränsning av Premium-lagring.</span><span class="sxs-lookup"><span data-stu-id="a2aba-688">Anytime your application tries to drive IOPS or Throughput above these limits of what the VM or disk can handle, Premium Storage will throttle it.</span></span> <span data-ttu-id="a2aba-689">Detta visar i form av försämrade prestanda i ditt program.</span><span class="sxs-lookup"><span data-stu-id="a2aba-689">This manifests in the form of degraded performance in your application.</span></span> <span data-ttu-id="a2aba-690">Detta kan innebära högre latens, sänka genomströmning eller lägre IOPS.</span><span class="sxs-lookup"><span data-stu-id="a2aba-690">This can mean higher latency, lower Throughput or lower IOPS.</span></span> <span data-ttu-id="a2aba-691">Om Premium-lagring inte begränsning, misslyckas programmet helt av mer än vad dess resurser är möjligt att uppnå.</span><span class="sxs-lookup"><span data-stu-id="a2aba-691">If Premium Storage does not throttle, your application could completely fail by exceeding what its resources are capable of achieving.</span></span> <span data-ttu-id="a2aba-692">Så om du vill undvika prestandaproblem på grund av begränsning alltid etablera tillräckligt med resurser för ditt program.</span><span class="sxs-lookup"><span data-stu-id="a2aba-692">So, to avoid performance issues due to throttling, always provision sufficient resources for your application.</span></span> <span data-ttu-id="a2aba-693">Ta hänsyn till vi diskuterade i VM-storlekar och Disk storlekar ovan.</span><span class="sxs-lookup"><span data-stu-id="a2aba-693">Take into consideration what we discussed in the VM sizes and Disk sizes sections above.</span></span> <span data-ttu-id="a2aba-694">Prestandamätningar är det bästa sättet att ta reda på vilka resurser måste du vara värd för programmet.</span><span class="sxs-lookup"><span data-stu-id="a2aba-694">Benchmarking is the best way to figure out what resources you will need to host your application.</span></span>

## <a name="benchmarking"></a><span data-ttu-id="a2aba-695">Prestandamätningar</span><span class="sxs-lookup"><span data-stu-id="a2aba-695">Benchmarking</span></span>
<span data-ttu-id="a2aba-696">Prestandamätningar är processen att simulera olika arbetsbelastningar för ditt program och mäta programprestanda för varje arbetsbelastning.</span><span class="sxs-lookup"><span data-stu-id="a2aba-696">Benchmarking is the process of simulating different workloads on your application and measuring the application performance for each workload.</span></span> <span data-ttu-id="a2aba-697">Med hjälp av stegen som beskrivs i ett tidigare avsnitt, du har samlat in programkrav för prestanda.</span><span class="sxs-lookup"><span data-stu-id="a2aba-697">Using the steps described in an earlier section, you have gathered the application performance requirements.</span></span> <span data-ttu-id="a2aba-698">Du kan fastställa prestandanivåer som programmet kan uppnå med Premium-lagring genom att köra benchmarking verktyg på virtuella datorer som värdar för programmet.</span><span class="sxs-lookup"><span data-stu-id="a2aba-698">By running benchmarking tools on the VMs hosting the application, you can determine the performance levels that your application can achieve with Premium Storage.</span></span> <span data-ttu-id="a2aba-699">I det här avsnittet får du exempel på en Standard DS14 VM etablerats med Azure Premium Storage diskar prestandamätningar.</span><span class="sxs-lookup"><span data-stu-id="a2aba-699">In this section, we provide you examples of benchmarking a Standard DS14 VM provisioned with Azure Premium Storage disks.</span></span>

<span data-ttu-id="a2aba-700">Vi har använt gemensamma benchmarking verktyg Iometer och FIO, för Windows och Linux respektive.</span><span class="sxs-lookup"><span data-stu-id="a2aba-700">We have used common benchmarking tools Iometer and FIO, for Windows and Linux respectively.</span></span> <span data-ttu-id="a2aba-701">Dessa verktyg starta flera trådar simulera en produktion som arbetsbelastning och mäta systemets prestanda.</span><span class="sxs-lookup"><span data-stu-id="a2aba-701">These tools spawn multiple threads simulating a production like workload, and measure the system performance.</span></span> <span data-ttu-id="a2aba-702">Med hjälp av verktygen kan du också konfigurera parametrar som block storlek och kön djup, vilket normalt inte kan ändra för ett program.</span><span class="sxs-lookup"><span data-stu-id="a2aba-702">Using the tools you can also configure parameters like block size and queue depth, which you normally cannot change for an application.</span></span> <span data-ttu-id="a2aba-703">Detta ger dig större flexibilitet att driva maximala prestanda på hög nivå VM etablerats med premiumdiskar för olika typer av arbetsbelastningar för program.</span><span class="sxs-lookup"><span data-stu-id="a2aba-703">This gives you more flexibility to drive the maximum performance on a high scale VM provisioned with premium disks for different types of application workloads.</span></span> <span data-ttu-id="a2aba-704">Läs mer om varje benchmarking verktyg finns [Iometer](http://www.iometer.org/) och [FIO](http://freecode.com/projects/fio).</span><span class="sxs-lookup"><span data-stu-id="a2aba-704">To learn more about each benchmarking tool visit [Iometer](http://www.iometer.org/) and [FIO](http://freecode.com/projects/fio).</span></span>

<span data-ttu-id="a2aba-705">Om du vill följa exemplen nedan, skapa en Standard DS14 virtuell dator och koppla 11 Premium-lagring diskar till den virtuella datorn.</span><span class="sxs-lookup"><span data-stu-id="a2aba-705">To follow the examples below, create a Standard DS14 VM and attach 11 Premium Storage disks to the VM.</span></span> <span data-ttu-id="a2aba-706">Konfigurera 10 diskar med cachelagring som ”None”-värden och stripe-dem till en volym med namnet NoCacheWrites 11 diskar.</span><span class="sxs-lookup"><span data-stu-id="a2aba-706">Of the 11 disks, configure 10 disks with host caching as "None" and stripe them into a volume called NoCacheWrites.</span></span> <span data-ttu-id="a2aba-707">Konfigurera cachelagring som ”skrivskyddad” på den återstående disken värden och skapa en volym med namnet CacheReads med den här disken.</span><span class="sxs-lookup"><span data-stu-id="a2aba-707">Configure host caching as "ReadOnly" on the remaining disk and create a volume called CacheReads with this disk.</span></span> <span data-ttu-id="a2aba-708">Med den här inställningen kommer du att kunna se den maximala prestandan för läsning och skrivning Standard DS14 VM.</span><span class="sxs-lookup"><span data-stu-id="a2aba-708">Using this setup, you will be able to see the maximum Read and Write performance from a Standard DS14 VM.</span></span> <span data-ttu-id="a2aba-709">Detaljerade anvisningar om hur du skapar en virtuell dator DS14 med premiumdiskar går du till [skapa och använda en Premium-lagring konto för en virtuell dator datadisk](storage-premium-storage.md).</span><span class="sxs-lookup"><span data-stu-id="a2aba-709">For detailed steps about creating a DS14 VM with premium disks, go to [Create and use a Premium Storage account for a virtual machine data disk](storage-premium-storage.md).</span></span>

<span data-ttu-id="a2aba-710">*Värma upp cachen*</span><span class="sxs-lookup"><span data-stu-id="a2aba-710">*Warming up the Cache*</span></span>  
<span data-ttu-id="a2aba-711">Disken med cachelagring av ReadOnly-värden kommer att kunna ge högre IOPS än gränsen som disk.</span><span class="sxs-lookup"><span data-stu-id="a2aba-711">The disk with ReadOnly host caching will be able to give higher IOPS than the disk limit.</span></span> <span data-ttu-id="a2aba-712">För att få den här högsta läsprestanda från cache värden måste först du värmt upp cache för den här disken.</span><span class="sxs-lookup"><span data-stu-id="a2aba-712">To get this maximum read performance from the host cache, first you must warm up the cache of this disk.</span></span> <span data-ttu-id="a2aba-713">Detta säkerställer att läsa IOs vilket benchmarking verktyg kommer att driva på CacheReads volym faktiskt träffar i cachen och inte disken direkt.</span><span class="sxs-lookup"><span data-stu-id="a2aba-713">This ensures that the Read IOs which benchmarking tool will drive on CacheReads volume actually hits the cache and not the disk directly.</span></span> <span data-ttu-id="a2aba-714">Cacheträffar resultatet i ytterligare IOPS från den enda cachen aktiverat disk.</span><span class="sxs-lookup"><span data-stu-id="a2aba-714">The cache hits result in additional IOPS from the single cache enabled disk.</span></span>

> <span data-ttu-id="a2aba-715">**Viktigt:**</span><span class="sxs-lookup"><span data-stu-id="a2aba-715">**Important:**</span></span>  
> <span data-ttu-id="a2aba-716">Du måste värmt upp cachen innan du kör prestandatester, varje gång VM startas.</span><span class="sxs-lookup"><span data-stu-id="a2aba-716">You must warm up the cache before running benchmarking, every time VM is rebooted.</span></span>
>
>

#### <a name="iometer"></a><span data-ttu-id="a2aba-717">Iometer</span><span class="sxs-lookup"><span data-stu-id="a2aba-717">Iometer</span></span>
<span data-ttu-id="a2aba-718">[Hämta verktyget Iometer](http://sourceforge.net/projects/iometer/files/iometer-stable/2006-07-27/iometer-2006.07.27.win32.i386-setup.exe/download) på den virtuella datorn.</span><span class="sxs-lookup"><span data-stu-id="a2aba-718">[Download the Iometer tool](http://sourceforge.net/projects/iometer/files/iometer-stable/2006-07-27/iometer-2006.07.27.win32.i386-setup.exe/download) on the VM.</span></span>

<span data-ttu-id="a2aba-719">*Testa fil*</span><span class="sxs-lookup"><span data-stu-id="a2aba-719">*Test file*</span></span>  
<span data-ttu-id="a2aba-720">Iometer använder en testfil som lagras på volymen där du kör testet benchmarking.</span><span class="sxs-lookup"><span data-stu-id="a2aba-720">Iometer uses a test file that is stored on the volume on which you will run the benchmarking test.</span></span> <span data-ttu-id="a2aba-721">Den enheter läser och skriver den här Testfilen för att mäta disken IOPS och genomflöde.</span><span class="sxs-lookup"><span data-stu-id="a2aba-721">It drives Reads and Writes on this test file to measure the disk IOPS and Throughput.</span></span> <span data-ttu-id="a2aba-722">Iometer skapar den här Testfilen om du inte har angett något.</span><span class="sxs-lookup"><span data-stu-id="a2aba-722">Iometer creates this test file if you have not provided one.</span></span> <span data-ttu-id="a2aba-723">Skapa en fil för test av 200GB kallas iobw.tst på CacheReads och NoCacheWrites volymer.</span><span class="sxs-lookup"><span data-stu-id="a2aba-723">Create a 200GB test file called iobw.tst on the CacheReads and NoCacheWrites volumes.</span></span>

<span data-ttu-id="a2aba-724">*Specifikationer för Access*</span><span class="sxs-lookup"><span data-stu-id="a2aba-724">*Access Specifications*</span></span>  
<span data-ttu-id="a2aba-725">Specifikationer, begär i/o-storlek, % läsning/skrivning, % slumpmässiga/sekventiella konfigureras på fliken ”specifikationer Access” i Iometer.</span><span class="sxs-lookup"><span data-stu-id="a2aba-725">The specifications, request IO size, % read/write, % random/sequential are configured using the "Access Specifications" tab in Iometer.</span></span> <span data-ttu-id="a2aba-726">Skapa en åtkomst-specifikation för var och en av de scenarier som beskrivs nedan.</span><span class="sxs-lookup"><span data-stu-id="a2aba-726">Create an access specification for each of the scenarios described below.</span></span> <span data-ttu-id="a2aba-727">Skapa åtkomst specifikationer och ”spara” med ett lämpligt namn som – RandomWrites\_8 kB RandomReads\_8 kB.</span><span class="sxs-lookup"><span data-stu-id="a2aba-727">Create the access specifications and "Save" with an appropriate name like – RandomWrites\_8K, RandomReads\_8K.</span></span> <span data-ttu-id="a2aba-728">Välj den motsvarande specifikationen när du kör Testscenario.</span><span class="sxs-lookup"><span data-stu-id="a2aba-728">Select the corresponding specification when running the test scenario.</span></span>

<span data-ttu-id="a2aba-729">Ett exempel på åtkomst specifikationer för högsta IOPS skriva scenario visas nedan,</span><span class="sxs-lookup"><span data-stu-id="a2aba-729">An example of access specifications for maximum Write IOPS scenario is shown below,</span></span>  
    ![](media/storage-premium-storage-performance/image8.png)

<span data-ttu-id="a2aba-730">*Specifikationer för högsta IOPS-Test*</span><span class="sxs-lookup"><span data-stu-id="a2aba-730">*Maximum IOPS Test Specifications*</span></span>  
<span data-ttu-id="a2aba-731">Använda mindre storlek på begäran för att demonstrera högsta IOPs.</span><span class="sxs-lookup"><span data-stu-id="a2aba-731">To demonstrate maximum IOPs, use smaller request size.</span></span> <span data-ttu-id="a2aba-732">Använd 8 kB begära storlek och skapa specifikationer för slumpmässiga skrivningar och läsningar.</span><span class="sxs-lookup"><span data-stu-id="a2aba-732">Use 8K request size and create specifications for Random Writes and Reads.</span></span>

| <span data-ttu-id="a2aba-733">Specifikation för åtkomst</span><span class="sxs-lookup"><span data-stu-id="a2aba-733">Access Specification</span></span> | <span data-ttu-id="a2aba-734">Begära storlek</span><span class="sxs-lookup"><span data-stu-id="a2aba-734">Request size</span></span> | <span data-ttu-id="a2aba-735">Slumpmässiga %</span><span class="sxs-lookup"><span data-stu-id="a2aba-735">Random %</span></span> | <span data-ttu-id="a2aba-736">Läs %</span><span class="sxs-lookup"><span data-stu-id="a2aba-736">Read %</span></span> |
| --- | --- | --- | --- |
| <span data-ttu-id="a2aba-737">RandomWrites\_8 kB</span><span class="sxs-lookup"><span data-stu-id="a2aba-737">RandomWrites\_8K</span></span> |<span data-ttu-id="a2aba-738">8 KB</span><span class="sxs-lookup"><span data-stu-id="a2aba-738">8K</span></span> |<span data-ttu-id="a2aba-739">100</span><span class="sxs-lookup"><span data-stu-id="a2aba-739">100</span></span> |<span data-ttu-id="a2aba-740">0</span><span class="sxs-lookup"><span data-stu-id="a2aba-740">0</span></span> |
| <span data-ttu-id="a2aba-741">RandomReads\_8 kB</span><span class="sxs-lookup"><span data-stu-id="a2aba-741">RandomReads\_8K</span></span> |<span data-ttu-id="a2aba-742">8 KB</span><span class="sxs-lookup"><span data-stu-id="a2aba-742">8K</span></span> |<span data-ttu-id="a2aba-743">100</span><span class="sxs-lookup"><span data-stu-id="a2aba-743">100</span></span> |<span data-ttu-id="a2aba-744">100</span><span class="sxs-lookup"><span data-stu-id="a2aba-744">100</span></span> |

<span data-ttu-id="a2aba-745">*Maximalt dataflöde Test specifikationer*</span><span class="sxs-lookup"><span data-stu-id="a2aba-745">*Maximum Throughput Test Specifications*</span></span>  
<span data-ttu-id="a2aba-746">Använd större begäran för att demonstrera maximalt dataflöde.</span><span class="sxs-lookup"><span data-stu-id="a2aba-746">To demonstrate maximum Throughput, use larger request size.</span></span> <span data-ttu-id="a2aba-747">Använd 64K begära storlek och skapa specifikationer för slumpmässiga skrivningar och läsningar.</span><span class="sxs-lookup"><span data-stu-id="a2aba-747">Use 64K request size and create specifications for Random Writes and Reads.</span></span>

| <span data-ttu-id="a2aba-748">Specifikation för åtkomst</span><span class="sxs-lookup"><span data-stu-id="a2aba-748">Access Specification</span></span> | <span data-ttu-id="a2aba-749">Begära storlek</span><span class="sxs-lookup"><span data-stu-id="a2aba-749">Request size</span></span> | <span data-ttu-id="a2aba-750">Slumpmässiga %</span><span class="sxs-lookup"><span data-stu-id="a2aba-750">Random %</span></span> | <span data-ttu-id="a2aba-751">Läs %</span><span class="sxs-lookup"><span data-stu-id="a2aba-751">Read %</span></span> |
| --- | --- | --- | --- |
| <span data-ttu-id="a2aba-752">RandomWrites\_64 kB</span><span class="sxs-lookup"><span data-stu-id="a2aba-752">RandomWrites\_64K</span></span> |<span data-ttu-id="a2aba-753">64 KB</span><span class="sxs-lookup"><span data-stu-id="a2aba-753">64K</span></span> |<span data-ttu-id="a2aba-754">100</span><span class="sxs-lookup"><span data-stu-id="a2aba-754">100</span></span> |<span data-ttu-id="a2aba-755">0</span><span class="sxs-lookup"><span data-stu-id="a2aba-755">0</span></span> |
| <span data-ttu-id="a2aba-756">RandomReads\_64 kB</span><span class="sxs-lookup"><span data-stu-id="a2aba-756">RandomReads\_64K</span></span> |<span data-ttu-id="a2aba-757">64 KB</span><span class="sxs-lookup"><span data-stu-id="a2aba-757">64K</span></span> |<span data-ttu-id="a2aba-758">100</span><span class="sxs-lookup"><span data-stu-id="a2aba-758">100</span></span> |<span data-ttu-id="a2aba-759">100</span><span class="sxs-lookup"><span data-stu-id="a2aba-759">100</span></span> |

<span data-ttu-id="a2aba-760">*Kör testet Iometer*</span><span class="sxs-lookup"><span data-stu-id="a2aba-760">*Running the Iometer Test*</span></span>  
<span data-ttu-id="a2aba-761">Utför stegen nedan värmt upp cache</span><span class="sxs-lookup"><span data-stu-id="a2aba-761">Perform the steps below to warm up cache</span></span>

1. <span data-ttu-id="a2aba-762">Skapa två åtkomst specifikationer med värden som visas nedan,</span><span class="sxs-lookup"><span data-stu-id="a2aba-762">Create two access specifications with values shown below,</span></span>

   | <span data-ttu-id="a2aba-763">Namn</span><span class="sxs-lookup"><span data-stu-id="a2aba-763">Name</span></span> | <span data-ttu-id="a2aba-764">Begära storlek</span><span class="sxs-lookup"><span data-stu-id="a2aba-764">Request size</span></span> | <span data-ttu-id="a2aba-765">Slumpmässiga %</span><span class="sxs-lookup"><span data-stu-id="a2aba-765">Random %</span></span> | <span data-ttu-id="a2aba-766">Läs %</span><span class="sxs-lookup"><span data-stu-id="a2aba-766">Read %</span></span> |
   | --- | --- | --- | --- |
   | <span data-ttu-id="a2aba-767">RandomWrites\_1 MB</span><span class="sxs-lookup"><span data-stu-id="a2aba-767">RandomWrites\_1MB</span></span> |<span data-ttu-id="a2aba-768">1MB</span><span class="sxs-lookup"><span data-stu-id="a2aba-768">1MB</span></span> |<span data-ttu-id="a2aba-769">100</span><span class="sxs-lookup"><span data-stu-id="a2aba-769">100</span></span> |<span data-ttu-id="a2aba-770">0</span><span class="sxs-lookup"><span data-stu-id="a2aba-770">0</span></span> |
   | <span data-ttu-id="a2aba-771">RandomReads\_1 MB</span><span class="sxs-lookup"><span data-stu-id="a2aba-771">RandomReads\_1MB</span></span> |<span data-ttu-id="a2aba-772">1MB</span><span class="sxs-lookup"><span data-stu-id="a2aba-772">1MB</span></span> |<span data-ttu-id="a2aba-773">100</span><span class="sxs-lookup"><span data-stu-id="a2aba-773">100</span></span> |<span data-ttu-id="a2aba-774">100</span><span class="sxs-lookup"><span data-stu-id="a2aba-774">100</span></span> |
2. <span data-ttu-id="a2aba-775">Kör testet Iometer för att initiera cache disk med följande parametrar.</span><span class="sxs-lookup"><span data-stu-id="a2aba-775">Run the Iometer test for initializing cache disk with following parameters.</span></span> <span data-ttu-id="a2aba-776">Använd tre trådar för målvolymen och ett ködjup på 128.</span><span class="sxs-lookup"><span data-stu-id="a2aba-776">Use three worker threads for the target volume and a queue depth of 128.</span></span> <span data-ttu-id="a2aba-777">Ange varaktighet ”körningstiden” testet till 2hrs på fliken ”testa inställningar”.</span><span class="sxs-lookup"><span data-stu-id="a2aba-777">Set the "Run time" duration of the test to 2hrs on the "Test Setup" tab.</span></span>

   | <span data-ttu-id="a2aba-778">Scenario</span><span class="sxs-lookup"><span data-stu-id="a2aba-778">Scenario</span></span> | <span data-ttu-id="a2aba-779">Målvolymen</span><span class="sxs-lookup"><span data-stu-id="a2aba-779">Target Volume</span></span> | <span data-ttu-id="a2aba-780">Namn</span><span class="sxs-lookup"><span data-stu-id="a2aba-780">Name</span></span> | <span data-ttu-id="a2aba-781">Varaktighet</span><span class="sxs-lookup"><span data-stu-id="a2aba-781">Duration</span></span> |
   | --- | --- | --- | --- |
   | <span data-ttu-id="a2aba-782">Initiera Cache-Disk</span><span class="sxs-lookup"><span data-stu-id="a2aba-782">Initialize Cache Disk</span></span> |<span data-ttu-id="a2aba-783">CacheReads</span><span class="sxs-lookup"><span data-stu-id="a2aba-783">CacheReads</span></span> |<span data-ttu-id="a2aba-784">RandomWrites\_1 MB</span><span class="sxs-lookup"><span data-stu-id="a2aba-784">RandomWrites\_1MB</span></span> |<span data-ttu-id="a2aba-785">2hrs</span><span class="sxs-lookup"><span data-stu-id="a2aba-785">2hrs</span></span> |
3. <span data-ttu-id="a2aba-786">Kör testet Iometer för uppvärmning cache disk med följande parametrar.</span><span class="sxs-lookup"><span data-stu-id="a2aba-786">Run the Iometer test for warming up cache disk with following parameters.</span></span> <span data-ttu-id="a2aba-787">Använd tre trådar för målvolymen och ett ködjup på 128.</span><span class="sxs-lookup"><span data-stu-id="a2aba-787">Use three worker threads for the target volume and a queue depth of 128.</span></span> <span data-ttu-id="a2aba-788">Ange varaktighet ”körningstiden” testet till 2hrs på fliken ”testa inställningar”.</span><span class="sxs-lookup"><span data-stu-id="a2aba-788">Set the "Run time" duration of the test to 2hrs on the "Test Setup" tab.</span></span>

   | <span data-ttu-id="a2aba-789">Scenario</span><span class="sxs-lookup"><span data-stu-id="a2aba-789">Scenario</span></span> | <span data-ttu-id="a2aba-790">Målvolymen</span><span class="sxs-lookup"><span data-stu-id="a2aba-790">Target Volume</span></span> | <span data-ttu-id="a2aba-791">Namn</span><span class="sxs-lookup"><span data-stu-id="a2aba-791">Name</span></span> | <span data-ttu-id="a2aba-792">Varaktighet</span><span class="sxs-lookup"><span data-stu-id="a2aba-792">Duration</span></span> |
   | --- | --- | --- | --- |
   | <span data-ttu-id="a2aba-793">Varm upp Cache-Disk</span><span class="sxs-lookup"><span data-stu-id="a2aba-793">Warm up Cache Disk</span></span> |<span data-ttu-id="a2aba-794">CacheReads</span><span class="sxs-lookup"><span data-stu-id="a2aba-794">CacheReads</span></span> |<span data-ttu-id="a2aba-795">RandomReads\_1 MB</span><span class="sxs-lookup"><span data-stu-id="a2aba-795">RandomReads\_1MB</span></span> |<span data-ttu-id="a2aba-796">2hrs</span><span class="sxs-lookup"><span data-stu-id="a2aba-796">2hrs</span></span> |

<span data-ttu-id="a2aba-797">När cachen disk är varmkörts fortsätter du med testscenarier som anges nedan.</span><span class="sxs-lookup"><span data-stu-id="a2aba-797">After cache disk is warmed up, proceed with the test scenarios listed below.</span></span> <span data-ttu-id="a2aba-798">Gör minst tre trådar för att köra testet Iometer **varje** mål volym.</span><span class="sxs-lookup"><span data-stu-id="a2aba-798">To run the Iometer test, use at least three worker threads for **each** target volume.</span></span> <span data-ttu-id="a2aba-799">För varje arbetstråd målvolymen, ange ködjup och markerar ett av de sparade test-specifikationerna som visas i tabellen nedan, att köra motsvarande Testscenario.</span><span class="sxs-lookup"><span data-stu-id="a2aba-799">For each worker thread, select the target volume, set queue depth and select one of the saved test specifications, as shown in the table below, to run the corresponding test scenario.</span></span> <span data-ttu-id="a2aba-800">Förväntat resultat visas också för IOPS och dataflöde när du kör testerna.</span><span class="sxs-lookup"><span data-stu-id="a2aba-800">The table also shows expected results for IOPS and Throughput when running these tests.</span></span> <span data-ttu-id="a2aba-801">För alla scenarier är används en små i/o-storlek på 8KB och en hög ködjup på 128.</span><span class="sxs-lookup"><span data-stu-id="a2aba-801">For all scenarios, a small IO size of 8KB and a high queue depth of 128 is used.</span></span>

| <span data-ttu-id="a2aba-802">Testscenario</span><span class="sxs-lookup"><span data-stu-id="a2aba-802">Test Scenario</span></span> | <span data-ttu-id="a2aba-803">Målvolymen</span><span class="sxs-lookup"><span data-stu-id="a2aba-803">Target Volume</span></span> | <span data-ttu-id="a2aba-804">Namn</span><span class="sxs-lookup"><span data-stu-id="a2aba-804">Name</span></span> | <span data-ttu-id="a2aba-805">Resultat</span><span class="sxs-lookup"><span data-stu-id="a2aba-805">Result</span></span> |
| --- | --- | --- | --- |
| <span data-ttu-id="a2aba-806">Max.</span><span class="sxs-lookup"><span data-stu-id="a2aba-806">Max.</span></span> <span data-ttu-id="a2aba-807">Läs IOPS</span><span class="sxs-lookup"><span data-stu-id="a2aba-807">Read IOPS</span></span> |<span data-ttu-id="a2aba-808">CacheReads</span><span class="sxs-lookup"><span data-stu-id="a2aba-808">CacheReads</span></span> |<span data-ttu-id="a2aba-809">RandomWrites\_8 kB</span><span class="sxs-lookup"><span data-stu-id="a2aba-809">RandomWrites\_8K</span></span> |<span data-ttu-id="a2aba-810">50 000 IOPS</span><span class="sxs-lookup"><span data-stu-id="a2aba-810">50,000 IOPS</span></span> |
| <span data-ttu-id="a2aba-811">Max.</span><span class="sxs-lookup"><span data-stu-id="a2aba-811">Max.</span></span> <span data-ttu-id="a2aba-812">Skriva IOPS</span><span class="sxs-lookup"><span data-stu-id="a2aba-812">Write IOPS</span></span> |<span data-ttu-id="a2aba-813">NoCacheWrites</span><span class="sxs-lookup"><span data-stu-id="a2aba-813">NoCacheWrites</span></span> |<span data-ttu-id="a2aba-814">RandomReads\_8 kB</span><span class="sxs-lookup"><span data-stu-id="a2aba-814">RandomReads\_8K</span></span> |<span data-ttu-id="a2aba-815">64 000 IOPS</span><span class="sxs-lookup"><span data-stu-id="a2aba-815">64,000 IOPS</span></span> |
| <span data-ttu-id="a2aba-816">Max.</span><span class="sxs-lookup"><span data-stu-id="a2aba-816">Max.</span></span> <span data-ttu-id="a2aba-817">Kombinerade IOPS</span><span class="sxs-lookup"><span data-stu-id="a2aba-817">Combined IOPS</span></span> |<span data-ttu-id="a2aba-818">CacheReads</span><span class="sxs-lookup"><span data-stu-id="a2aba-818">CacheReads</span></span> |<span data-ttu-id="a2aba-819">RandomWrites\_8 kB</span><span class="sxs-lookup"><span data-stu-id="a2aba-819">RandomWrites\_8K</span></span> |<span data-ttu-id="a2aba-820">100 000 IOPS</span><span class="sxs-lookup"><span data-stu-id="a2aba-820">100,000 IOPS</span></span> |
| <span data-ttu-id="a2aba-821">NoCacheWrites</span><span class="sxs-lookup"><span data-stu-id="a2aba-821">NoCacheWrites</span></span> |<span data-ttu-id="a2aba-822">RandomReads\_8 kB</span><span class="sxs-lookup"><span data-stu-id="a2aba-822">RandomReads\_8K</span></span> | &nbsp; | &nbsp; |
| <span data-ttu-id="a2aba-823">Max.</span><span class="sxs-lookup"><span data-stu-id="a2aba-823">Max.</span></span> <span data-ttu-id="a2aba-824">Läsa MB per sekund</span><span class="sxs-lookup"><span data-stu-id="a2aba-824">Read MB/sec</span></span> |<span data-ttu-id="a2aba-825">CacheReads</span><span class="sxs-lookup"><span data-stu-id="a2aba-825">CacheReads</span></span> |<span data-ttu-id="a2aba-826">RandomWrites\_64 kB</span><span class="sxs-lookup"><span data-stu-id="a2aba-826">RandomWrites\_64K</span></span> |<span data-ttu-id="a2aba-827">524 MB per sekund</span><span class="sxs-lookup"><span data-stu-id="a2aba-827">524 MB/sec</span></span> |
| <span data-ttu-id="a2aba-828">Max.</span><span class="sxs-lookup"><span data-stu-id="a2aba-828">Max.</span></span> <span data-ttu-id="a2aba-829">Skriva MB per sekund</span><span class="sxs-lookup"><span data-stu-id="a2aba-829">Write MB/sec</span></span> |<span data-ttu-id="a2aba-830">NoCacheWrites</span><span class="sxs-lookup"><span data-stu-id="a2aba-830">NoCacheWrites</span></span> |<span data-ttu-id="a2aba-831">RandomReads\_64 kB</span><span class="sxs-lookup"><span data-stu-id="a2aba-831">RandomReads\_64K</span></span> |<span data-ttu-id="a2aba-832">524 MB per sekund</span><span class="sxs-lookup"><span data-stu-id="a2aba-832">524 MB/sec</span></span> |
| <span data-ttu-id="a2aba-833">Kombinerade MB per sekund</span><span class="sxs-lookup"><span data-stu-id="a2aba-833">Combined MB/sec</span></span> |<span data-ttu-id="a2aba-834">CacheReads</span><span class="sxs-lookup"><span data-stu-id="a2aba-834">CacheReads</span></span> |<span data-ttu-id="a2aba-835">RandomWrites\_64 kB</span><span class="sxs-lookup"><span data-stu-id="a2aba-835">RandomWrites\_64K</span></span> |<span data-ttu-id="a2aba-836">1 000 MB per sekund</span><span class="sxs-lookup"><span data-stu-id="a2aba-836">1000 MB/sec</span></span> |
| <span data-ttu-id="a2aba-837">NoCacheWrites</span><span class="sxs-lookup"><span data-stu-id="a2aba-837">NoCacheWrites</span></span> |<span data-ttu-id="a2aba-838">RandomReads\_64 kB</span><span class="sxs-lookup"><span data-stu-id="a2aba-838">RandomReads\_64K</span></span> | &nbsp; | &nbsp; |

<span data-ttu-id="a2aba-839">Nedan visas skärmdumpar av Iometer testresultat för kombinerade IOPS och genomflöde.</span><span class="sxs-lookup"><span data-stu-id="a2aba-839">Below are screenshots of the Iometer test results for combined IOPS and Throughput scenarios.</span></span>

<span data-ttu-id="a2aba-840">*Kombinerade läsningar och skrivningar högsta IOPS*</span><span class="sxs-lookup"><span data-stu-id="a2aba-840">*Combined Reads and Writes Maximum IOPS*</span></span>  
![](media/storage-premium-storage-performance/image9.png)

<span data-ttu-id="a2aba-841">*Kombinerade läsningar och skrivningar maximalt dataflöde*</span><span class="sxs-lookup"><span data-stu-id="a2aba-841">*Combined Reads and Writes Maximum Throughput*</span></span>  
![](media/storage-premium-storage-performance/image10.png)

### <a name="fio"></a><span data-ttu-id="a2aba-842">FIO</span><span class="sxs-lookup"><span data-stu-id="a2aba-842">FIO</span></span>
<span data-ttu-id="a2aba-843">FIO är en populär verktyg som benchmark lagring på virtuella Linux-datorer.</span><span class="sxs-lookup"><span data-stu-id="a2aba-843">FIO is a popular tool to benchmark storage on the Linux VMs.</span></span> <span data-ttu-id="a2aba-844">Det har möjlighet att välja andra i/o-storlekar, sekventiella eller åtkomsttider och skrivåtgärder.</span><span class="sxs-lookup"><span data-stu-id="a2aba-844">It has the flexibility to select different IO sizes, sequential or random reads and writes.</span></span> <span data-ttu-id="a2aba-845">Det skapas trådar och processer för att utföra angivna i/o-åtgärder.</span><span class="sxs-lookup"><span data-stu-id="a2aba-845">It spawns worker threads or processes to perform the specified I/O operations.</span></span> <span data-ttu-id="a2aba-846">Du kan ange vilken typ av i/o-åtgärder som varje arbetstråd måste utföra med hjälp av jobbfiler.</span><span class="sxs-lookup"><span data-stu-id="a2aba-846">You can specify the type of I/O operations each worker thread must perform using job files.</span></span> <span data-ttu-id="a2aba-847">Vi har skapat en fil per scenariot som illustreras i exemplen nedan.</span><span class="sxs-lookup"><span data-stu-id="a2aba-847">We created one job file per scenario illustrated in the examples below.</span></span> <span data-ttu-id="a2aba-848">Du kan ändra specifikationerna i jobbfilerna för att mäta olika arbetsbelastningar som körs på Premium-lagring.</span><span class="sxs-lookup"><span data-stu-id="a2aba-848">You can change the specifications in these job files to benchmark different workloads running on Premium Storage.</span></span> <span data-ttu-id="a2aba-849">Vi använder en Standard DS 14 VM som körs i exempel **Ubuntu**.</span><span class="sxs-lookup"><span data-stu-id="a2aba-849">In the examples, we are using a Standard DS 14 VM running **Ubuntu**.</span></span> <span data-ttu-id="a2aba-850">Använd samma inställningar som beskrivs i början av den [prestandamätningar avsnittet](#Benchmarking) och Varm in cachen innan du kör benchmark-tester.</span><span class="sxs-lookup"><span data-stu-id="a2aba-850">Use the same setup described in the beginning of the [Benchmarking section](#Benchmarking) and warm up the cache before running the benchmarking tests.</span></span>

<span data-ttu-id="a2aba-851">Innan du börjar [hämta FIO](https://github.com/axboe/fio) och installera den på den virtuella datorn.</span><span class="sxs-lookup"><span data-stu-id="a2aba-851">Before you begin, [download FIO](https://github.com/axboe/fio) and install it on your virtual machine.</span></span>

<span data-ttu-id="a2aba-852">Kör följande kommando för Ubuntu,</span><span class="sxs-lookup"><span data-stu-id="a2aba-852">Run the following command for Ubuntu,</span></span>

```
apt-get install fio
```

<span data-ttu-id="a2aba-853">Vi använder fyra trådar för att föra skrivåtgärder och fyra trådar för intresseväckande läsåtgärder på diskarna.</span><span class="sxs-lookup"><span data-stu-id="a2aba-853">We will use four worker threads for driving Write operations and four worker threads for driving Read operations on the disks.</span></span> <span data-ttu-id="a2aba-854">Skriv arbetare körning trafik på volymen ”nocache”, som har 10 diskar med värdet ”None”-cache.</span><span class="sxs-lookup"><span data-stu-id="a2aba-854">The Write workers will be driving traffic on the "nocache" volume, which has 10 disks with cache set to "None".</span></span> <span data-ttu-id="a2aba-855">Läs arbetare körning trafik på volymen ”readcache”, som har 1 disk med cache inställd på ”ReadOnly”.</span><span class="sxs-lookup"><span data-stu-id="a2aba-855">The Read workers will be driving traffic on the "readcache" volume, which has 1 disk with cache set to "ReadOnly".</span></span>

<span data-ttu-id="a2aba-856">*Maximal skrivåtgärder IOPS*</span><span class="sxs-lookup"><span data-stu-id="a2aba-856">*Maximum Write IOPS*</span></span>  
<span data-ttu-id="a2aba-857">Skapa jobbfilen för med följande specifikationer få högsta skriva IOPS.</span><span class="sxs-lookup"><span data-stu-id="a2aba-857">Create the job file with following specifications to get maximum Write IOPS.</span></span> <span data-ttu-id="a2aba-858">Ge den namnet ”fiowrite.ini”.</span><span class="sxs-lookup"><span data-stu-id="a2aba-858">Name it "fiowrite.ini".</span></span>

```
[global]
size=30g
direct=1
iodepth=256
ioengine=libaio
bs=8k

[writer1]
rw=randwrite
directory=/mnt/nocache
[writer2]
rw=randwrite
directory=/mnt/nocache
[writer3]
rw=randwrite
directory=/mnt/nocache
[writer4]
rw=randwrite
directory=/mnt/nocache
```

<span data-ttu-id="a2aba-859">Observera följande viktiga saker som följer designriktlinjer för som beskrivs i föregående avsnitt.</span><span class="sxs-lookup"><span data-stu-id="a2aba-859">Note the follow key things that are in line with the design guidelines discussed in previous sections.</span></span> <span data-ttu-id="a2aba-860">Dessa specifikationer som är nödvändiga för att ge högsta IOPS</span><span class="sxs-lookup"><span data-stu-id="a2aba-860">These specifications are essential to drive maximum IOPS,</span></span>  

* <span data-ttu-id="a2aba-861">En hög ködjup på 256.</span><span class="sxs-lookup"><span data-stu-id="a2aba-861">A high queue depth of 256.</span></span>  
* <span data-ttu-id="a2aba-862">En liten blockstorlek 8 kB.</span><span class="sxs-lookup"><span data-stu-id="a2aba-862">A small block size of 8KB.</span></span>  
* <span data-ttu-id="a2aba-863">Flera trådar utför slumpmässiga skrivningar.</span><span class="sxs-lookup"><span data-stu-id="a2aba-863">Multiple threads performing random writes.</span></span>

<span data-ttu-id="a2aba-864">Kör följande kommando för att startar testet FIO i 30 sekunder</span><span class="sxs-lookup"><span data-stu-id="a2aba-864">Run the following command to kick off the FIO test for 30 seconds,</span></span>  

```
sudo fio --runtime 30 fiowrite.ini
```

<span data-ttu-id="a2aba-865">När testet körs, kommer du kunna se antalet skriva IOPS den virtuella datorn och levererar premiumdiskar.</span><span class="sxs-lookup"><span data-stu-id="a2aba-865">While the test runs, you will be able to see the number of write IOPS the VM and Premium disks are delivering.</span></span> <span data-ttu-id="a2aba-866">I exemplet nedan visas DS14 VM levererar sin maximala skrivåtgärder IOPS högst 50 000 IOPS.</span><span class="sxs-lookup"><span data-stu-id="a2aba-866">As shown in the sample below, the DS14 VM is delivering its maximum write IOPS limit of 50,000 IOPS.</span></span>  
    ![](media/storage-premium-storage-performance/image11.png)

<span data-ttu-id="a2aba-867">*Maximal Läs IOPS*</span><span class="sxs-lookup"><span data-stu-id="a2aba-867">*Maximum Read IOPS*</span></span>  
<span data-ttu-id="a2aba-868">Skapa jobbfilen för med följande specifikationer få högsta IOPS för läsning.</span><span class="sxs-lookup"><span data-stu-id="a2aba-868">Create the job file with following specifications to get maximum Read IOPS.</span></span> <span data-ttu-id="a2aba-869">Ge den namnet ”fioread.ini”.</span><span class="sxs-lookup"><span data-stu-id="a2aba-869">Name it "fioread.ini".</span></span>

```
[global]
size=30g
direct=1
iodepth=256
ioengine=libaio
bs=8k

[reader1]
rw=randread
directory=/mnt/readcache
[reader2]
rw=randread
directory=/mnt/readcache
[reader3]
rw=randread
directory=/mnt/readcache
[reader4]
rw=randread
directory=/mnt/readcache
```

<span data-ttu-id="a2aba-870">Observera följande viktiga saker som följer designriktlinjer för som beskrivs i föregående avsnitt.</span><span class="sxs-lookup"><span data-stu-id="a2aba-870">Note the follow key things that are in line with the design guidelines discussed in previous sections.</span></span> <span data-ttu-id="a2aba-871">Dessa specifikationer som är nödvändiga för att ge högsta IOPS</span><span class="sxs-lookup"><span data-stu-id="a2aba-871">These specifications are essential to drive maximum IOPS,</span></span>

* <span data-ttu-id="a2aba-872">En hög ködjup på 256.</span><span class="sxs-lookup"><span data-stu-id="a2aba-872">A high queue depth of 256.</span></span>  
* <span data-ttu-id="a2aba-873">En liten blockstorlek 8 kB.</span><span class="sxs-lookup"><span data-stu-id="a2aba-873">A small block size of 8KB.</span></span>  
* <span data-ttu-id="a2aba-874">Flera trådar utför slumpmässiga skrivningar.</span><span class="sxs-lookup"><span data-stu-id="a2aba-874">Multiple threads performing random writes.</span></span>

<span data-ttu-id="a2aba-875">Kör följande kommando för att startar testet FIO i 30 sekunder</span><span class="sxs-lookup"><span data-stu-id="a2aba-875">Run the following command to kick off the FIO test for 30 seconds,</span></span>

```
sudo fio --runtime 30 fioread.ini
```

<span data-ttu-id="a2aba-876">När testet körs, kommer du kunna se antalet lästa IOPS den virtuella datorn och levererar premiumdiskar.</span><span class="sxs-lookup"><span data-stu-id="a2aba-876">While the test runs, you will be able to see the number of read IOPS the VM and Premium disks are delivering.</span></span> <span data-ttu-id="a2aba-877">I exemplet nedan visas DS14 VM leverera med fler än 64 000 Läs IOPS.</span><span class="sxs-lookup"><span data-stu-id="a2aba-877">As shown in the sample below, the DS14 VM is delivering more than 64,000 Read IOPS.</span></span> <span data-ttu-id="a2aba-878">Detta är en kombination av disken och cache-prestanda.</span><span class="sxs-lookup"><span data-stu-id="a2aba-878">This is a combination of the disk and the cache performance.</span></span>  
    ![](media/storage-premium-storage-performance/image12.png)

<span data-ttu-id="a2aba-879">*Maximal läsning och skrivning IOPS*</span><span class="sxs-lookup"><span data-stu-id="a2aba-879">*Maximum Read and Write IOPS*</span></span>  
<span data-ttu-id="a2aba-880">Skapa jobbfilen med följande specifikationer få maximala kombinerade läsa och skriva IOPS.</span><span class="sxs-lookup"><span data-stu-id="a2aba-880">Create the job file with following specifications to get maximum combined Read and Write IOPS.</span></span> <span data-ttu-id="a2aba-881">Ge den namnet ”fioreadwrite.ini”.</span><span class="sxs-lookup"><span data-stu-id="a2aba-881">Name it "fioreadwrite.ini".</span></span>

```
[global]
size=30g
direct=1
iodepth=128
ioengine=libaio
bs=4k

[reader1]
rw=randread
directory=/mnt/readcache
[reader2]
rw=randread
directory=/mnt/readcache
[reader3]
rw=randread
directory=/mnt/readcache
[reader4]
rw=randread
directory=/mnt/readcache

[writer1]
rw=randwrite
directory=/mnt/nocache
rate_iops=12500
[writer2]
rw=randwrite
directory=/mnt/nocache
rate_iops=12500
[writer3]
rw=randwrite
directory=/mnt/nocache
rate_iops=12500
[writer4]
rw=randwrite
directory=/mnt/nocache
rate_iops=12500
```

<span data-ttu-id="a2aba-882">Observera följande viktiga saker som följer designriktlinjer för som beskrivs i föregående avsnitt.</span><span class="sxs-lookup"><span data-stu-id="a2aba-882">Note the follow key things that are in line with the design guidelines discussed in previous sections.</span></span> <span data-ttu-id="a2aba-883">Dessa specifikationer som är nödvändiga för att ge högsta IOPS</span><span class="sxs-lookup"><span data-stu-id="a2aba-883">These specifications are essential to drive maximum IOPS,</span></span>

* <span data-ttu-id="a2aba-884">En hög ködjup på 128.</span><span class="sxs-lookup"><span data-stu-id="a2aba-884">A high queue depth of 128.</span></span>  
* <span data-ttu-id="a2aba-885">En liten blockstorlek 4KB.</span><span class="sxs-lookup"><span data-stu-id="a2aba-885">A small block size of 4KB.</span></span>  
* <span data-ttu-id="a2aba-886">Flera trådar som utför slumpmässig läsning och skrivning.</span><span class="sxs-lookup"><span data-stu-id="a2aba-886">Multiple threads performing random reads and writes.</span></span>

<span data-ttu-id="a2aba-887">Kör följande kommando för att startar testet FIO i 30 sekunder</span><span class="sxs-lookup"><span data-stu-id="a2aba-887">Run the following command to kick off the FIO test for 30 seconds,</span></span>

```
sudo fio --runtime 30 fioreadwrite.ini
```

<span data-ttu-id="a2aba-888">När testet körs, kommer du att kunna se antalet kombinerade läsa och skriva IOPS på den virtuella datorn och levererar premiumdiskar.</span><span class="sxs-lookup"><span data-stu-id="a2aba-888">While the test runs, you will be able to see the number of combined read and write IOPS the VM and Premium disks are delivering.</span></span> <span data-ttu-id="a2aba-889">I exemplet nedan visas levererar DS14 VM med mer än 100 000 kombinerade läsa och skriva IOPS.</span><span class="sxs-lookup"><span data-stu-id="a2aba-889">As shown in the sample below, the DS14 VM is delivering more than 100,000 combined Read and Write IOPS.</span></span> <span data-ttu-id="a2aba-890">Detta är en kombination av disken och cache-prestanda.</span><span class="sxs-lookup"><span data-stu-id="a2aba-890">This is a combination of the disk and the cache performance.</span></span>  
    ![](media/storage-premium-storage-performance/image13.png)

<span data-ttu-id="a2aba-891">*Maximalt kombineras genomflöde*</span><span class="sxs-lookup"><span data-stu-id="a2aba-891">*Maximum Combined Throughput*</span></span>  
<span data-ttu-id="a2aba-892">Om du vill hämta maximalt kombinerade läsa och skriva genomflöde, Använd en större blockstorlek och stora ködjup med flera trådar som utför läsningar och skrivningar.</span><span class="sxs-lookup"><span data-stu-id="a2aba-892">To get the maximum combined Read and Write Throughput, use a larger block size and large queue depth with multiple threads performing reads and writes.</span></span> <span data-ttu-id="a2aba-893">Du kan använda en blockstorlek på 64KB och ködjup på 128.</span><span class="sxs-lookup"><span data-stu-id="a2aba-893">You can use a block size of 64KB and queue depth of 128.</span></span>

## <a name="next-steps"></a><span data-ttu-id="a2aba-894">Nästa steg</span><span class="sxs-lookup"><span data-stu-id="a2aba-894">Next Steps</span></span>
<span data-ttu-id="a2aba-895">Lär dig mer om Azure Premium Storage:</span><span class="sxs-lookup"><span data-stu-id="a2aba-895">Learn more about Azure Premium Storage:</span></span>

* [<span data-ttu-id="a2aba-896">Premium Storage: Lagring med höga prestanda för Azure Virtual Machines-arbetsbelastningar</span><span class="sxs-lookup"><span data-stu-id="a2aba-896">Premium Storage: High-Performance Storage for Azure Virtual Machine Workloads</span></span>](storage-premium-storage.md)  

<span data-ttu-id="a2aba-897">Läs artiklarna på bästa praxis för prestanda för SQL Server för SQL Server-användare:</span><span class="sxs-lookup"><span data-stu-id="a2aba-897">For SQL Server users, read articles on Performance Best Practices for SQL Server:</span></span>

* [<span data-ttu-id="a2aba-898">Metodtips för prestanda för SQLServer på virtuella Azure-datorer</span><span class="sxs-lookup"><span data-stu-id="a2aba-898">Performance Best Practices for SQL Server in Azure Virtual Machines</span></span>](../virtual-machines/windows/sql/virtual-machines-windows-sql-performance.md)
* [<span data-ttu-id="a2aba-899">Azure Premium Storage ger högsta prestanda för SQL Server i Azure VM</span><span class="sxs-lookup"><span data-stu-id="a2aba-899">Azure Premium Storage provides highest performance for SQL Server in Azure VM</span></span>](http://blogs.technet.com/b/dataplatforminsider/archive/2015/04/23/azure-premium-storage-provides-highest-performance-for-sql-server-in-azure-vm.aspx)

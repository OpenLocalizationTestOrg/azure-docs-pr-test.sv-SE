---
title: "säkerhetsguiden för aaaAzure Storage | Microsoft Docs"
description: "Information om hello många metoder för att skydda Azure Storage, inklusive men inte begränsat tooRBAC, Storage Service-kryptering, kryptering på klientsidan, SMB 3.0 och Azure Disk Encryption."
services: storage
documentationcenter: .net
author: robinsh
manager: timlt
editor: tysonn
ms.assetid: 6f931d94-ef5a-44c6-b1d9-8a3c9c327fb2
ms.service: storage
ms.workload: storage
ms.tgt_pltfrm: na
ms.devlang: dotnet
ms.topic: article
ms.date: 12/08/2016
ms.author: robinsh
ms.openlocfilehash: 1f5a4e724e00ea6d16f5511b9120154f89441758
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: sv-SE
ms.lasthandoff: 10/06/2017
---
# <a name="azure-storage-security-guide"></a><span data-ttu-id="0438e-103">Azure Storage-säkerhetsguiden</span><span class="sxs-lookup"><span data-stu-id="0438e-103">Azure Storage security guide</span></span>
## <a name="overview"></a><span data-ttu-id="0438e-104">Översikt</span><span class="sxs-lookup"><span data-stu-id="0438e-104">Overview</span></span>
<span data-ttu-id="0438e-105">Azure Storage tillhandahåller en omfattande uppsättning säkerhetsfunktioner som tillsammans ger utvecklare möjligheten toobuild säkra program.</span><span class="sxs-lookup"><span data-stu-id="0438e-105">Azure Storage provides a comprehensive set of security capabilities which together enable developers toobuild secure applications.</span></span> <span data-ttu-id="0438e-106">Hej lagringskonto själva kan skyddas med hjälp av rollbaserad åtkomstkontroll och Azure Active Directory.</span><span class="sxs-lookup"><span data-stu-id="0438e-106">hello storage account itself can be secured using Role-Based Access Control and Azure Active Directory.</span></span> <span data-ttu-id="0438e-107">Data kan skyddas vid överföring mellan en program- och Azure med hjälp av [Client Side Encryption](../storage-client-side-encryption.md), HTTPS- eller SMB 3.0.</span><span class="sxs-lookup"><span data-stu-id="0438e-107">Data can be secured in transit between an application and Azure by using [Client-Side Encryption](../storage-client-side-encryption.md), HTTPS, or SMB 3.0.</span></span> <span data-ttu-id="0438e-108">Data kan ställas in toobe krypteras automatiskt när skrivs tooAzure Storage med [Storage Service kryptering (SSE)](storage-service-encryption.md).</span><span class="sxs-lookup"><span data-stu-id="0438e-108">Data can be set toobe automatically encrypted when written tooAzure Storage using [Storage Service Encryption (SSE)](storage-service-encryption.md).</span></span> <span data-ttu-id="0438e-109">Operativsystemet och datadiskarna som används av virtuella datorer kan ställas in toobe som krypterats med [Azure Disk Encryption](../../security/azure-security-disk-encryption.md).</span><span class="sxs-lookup"><span data-stu-id="0438e-109">OS and Data disks used by virtual machines can be set toobe encrypted using [Azure Disk Encryption](../../security/azure-security-disk-encryption.md).</span></span> <span data-ttu-id="0438e-110">Delegerad åtkomst toohello dataobjekt i Azure Storage kan beviljas med [signaturer för delad åtkomst](../storage-dotnet-shared-access-signature-part-1.md).</span><span class="sxs-lookup"><span data-stu-id="0438e-110">Delegated access toohello data objects in Azure Storage can be granted using [Shared Access Signatures](../storage-dotnet-shared-access-signature-part-1.md).</span></span>

<span data-ttu-id="0438e-111">Den här artikeln ger en översikt över var och en av dessa funktioner som kan användas med Azure Storage.</span><span class="sxs-lookup"><span data-stu-id="0438e-111">This article will provide an overview of each of these security features that can be used with Azure Storage.</span></span> <span data-ttu-id="0438e-112">Länkar finns tooarticles som ger information om varje funktion så att du enkelt göra ytterligare undersökningar på varje avsnitt.</span><span class="sxs-lookup"><span data-stu-id="0438e-112">Links are provided tooarticles that will give details of each feature so you can easily do further investigation on each topic.</span></span>

<span data-ttu-id="0438e-113">Här följer hello avsnitt toobe som beskrivs i den här artikeln:</span><span class="sxs-lookup"><span data-stu-id="0438e-113">Here are hello topics toobe covered in this article:</span></span>

* <span data-ttu-id="0438e-114">[Hantering av plan säkerhet](#management-plane-security) – skydda ditt Lagringskonto</span><span class="sxs-lookup"><span data-stu-id="0438e-114">[Management Plane Security](#management-plane-security) – Securing your Storage Account</span></span>

  <span data-ttu-id="0438e-115">hello management plan som består av hello resurser används toomanage ditt lagringskonto.</span><span class="sxs-lookup"><span data-stu-id="0438e-115">hello management plane consists of hello resources used toomanage your storage account.</span></span> <span data-ttu-id="0438e-116">I det här avsnittet kommer vi hello Azure Resource Manager-distributionsmodellen och hur toouse rollbaserad åtkomstkontroll (RBAC) toocontrol åt tooyour storage-konton.</span><span class="sxs-lookup"><span data-stu-id="0438e-116">In this section, we'll talk about hello Azure Resource Manager deployment model and how toouse Role-Based Access Control (RBAC) toocontrol access tooyour storage accounts.</span></span> <span data-ttu-id="0438e-117">Kommer dessutom pratar vi om hur du hanterar din lagringskontonycklar och hur tooregenerate dem.</span><span class="sxs-lookup"><span data-stu-id="0438e-117">We will also talk about managing your storage account keys and how tooregenerate them.</span></span>
* <span data-ttu-id="0438e-118">[Plan för datasäkerhet](#data-plane-security) – skydda åtkomst tooYour Data</span><span class="sxs-lookup"><span data-stu-id="0438e-118">[Data Plane Security](#data-plane-security) – Securing Access tooYour Data</span></span>

  <span data-ttu-id="0438e-119">I det här avsnittet ska vi titta på att tillåta åtkomst toohello faktiska dataobjekt i ditt lagringskonto, till exempel blobbar, filer, köer och tabeller som använder signaturer för delad åtkomst och åtkomstregler lagras.</span><span class="sxs-lookup"><span data-stu-id="0438e-119">In this section, we'll look at allowing access toohello actual data objects in your Storage account, such as blobs, files, queues, and tables, using Shared Access Signatures and Stored Access Policies.</span></span> <span data-ttu-id="0438e-120">Vi tar upp både servicenivåer SAS och konto-nivå SAS.</span><span class="sxs-lookup"><span data-stu-id="0438e-120">We will cover both service-level SAS and account-level SAS.</span></span> <span data-ttu-id="0438e-121">Vi också se hur toolimit åt tooa specifik IP-adress (eller intervall av IP-adresser), hur toolimit hello protokoll som används tooHTTPS och hur toorevoke en signatur för delad åtkomst utan att vänta på den tooexpire.</span><span class="sxs-lookup"><span data-stu-id="0438e-121">We'll also see how toolimit access tooa specific IP address (or range of IP addresses), how toolimit hello protocol used tooHTTPS, and how toorevoke a Shared Access Signature without waiting for it tooexpire.</span></span>
* [<span data-ttu-id="0438e-122">Kryptering vid överföring</span><span class="sxs-lookup"><span data-stu-id="0438e-122">Encryption in Transit</span></span>](#encryption-in-transit)

  <span data-ttu-id="0438e-123">Det här avsnittet beskrivs hur toosecure data vid överföring till eller från Azure Storage.</span><span class="sxs-lookup"><span data-stu-id="0438e-123">This section discusses how toosecure data when you transfer it into or out of Azure Storage.</span></span> <span data-ttu-id="0438e-124">Lär dig om hello rekommenderar användning av HTTPS och hello kryptering som används av SMB 3.0 för Azure-filresurser.</span><span class="sxs-lookup"><span data-stu-id="0438e-124">We'll talk about hello recommended use of HTTPS and hello encryption used by SMB 3.0 for Azure File shares.</span></span> <span data-ttu-id="0438e-125">Vi kommer också ta en titt på klientsidan kryptering, vilket gör att du tooencrypt hello data innan det överförs till lagring i ett klientprogram och toodecrypt hello data när det överförs utanför lagring.</span><span class="sxs-lookup"><span data-stu-id="0438e-125">We will also take a look at Client-side Encryption, which enables you tooencrypt hello data before it is transferred into Storage in a client application, and toodecrypt hello data after it is transferred out of Storage.</span></span>
* [<span data-ttu-id="0438e-126">Kryptering i vila</span><span class="sxs-lookup"><span data-stu-id="0438e-126">Encryption at Rest</span></span>](#encryption-at-rest)

  <span data-ttu-id="0438e-127">Vi pratar om Storage Service-kryptering (SSE) och hur du kan aktivera det för ett lagringskonto, vilket resulterar i din blockblobbar, sidblobbar, och tilläggsblobar krypteras automatiskt när skrivas tooAzure lagring.</span><span class="sxs-lookup"><span data-stu-id="0438e-127">We will talk about Storage Service Encryption (SSE), and how you can enable it for a storage account, resulting in your block blobs, page blobs, and append blobs being automatically encrypted when written tooAzure Storage.</span></span> <span data-ttu-id="0438e-128">Vi kommer också titta på hur du kan använda Azure Disk Encryption och utforska hello grundläggande skillnader och fall av diskkryptering jämfört med SSE jämfört med kryptering på klientsidan.</span><span class="sxs-lookup"><span data-stu-id="0438e-128">We will also look at how you can use Azure Disk Encryption and explore hello basic differences and cases of Disk Encryption versus SSE versus Client-Side Encryption.</span></span> <span data-ttu-id="0438e-129">Vi ser kort på FIPS-kompatibilitet för USA Offentliga datorer.</span><span class="sxs-lookup"><span data-stu-id="0438e-129">We will briefly look at FIPS compliance for U.S. Government computers.</span></span>
* <span data-ttu-id="0438e-130">Med hjälp av [Storage Analytics](#storage-analytics) tooaudit åtkomst till Azure Storage</span><span class="sxs-lookup"><span data-stu-id="0438e-130">Using [Storage Analytics](#storage-analytics) tooaudit access of Azure Storage</span></span>

  <span data-ttu-id="0438e-131">Det här avsnittet beskrivs hur toofind information i hello storage analytics loggar för en begäran.</span><span class="sxs-lookup"><span data-stu-id="0438e-131">This section discusses how toofind information in hello storage analytics logs for a request.</span></span> <span data-ttu-id="0438e-132">Vi ta en titt på verkliga storage analytics loggdata och se hur toodiscern om en begäran görs med hello lagring konto nyckel med en signatur för delad åtkomst eller anonymt, och om den har lyckats eller misslyckats.</span><span class="sxs-lookup"><span data-stu-id="0438e-132">We'll take a look at real storage analytics log data and see how toodiscern whether a request is made with hello Storage account key, with a Shared Access signature, or anonymously, and whether it succeeded or failed.</span></span>
* [<span data-ttu-id="0438e-133">Aktivera webbläsarbaserade klienter med hjälp av CORS</span><span class="sxs-lookup"><span data-stu-id="0438e-133">Enabling Browser-Based Clients using CORS</span></span>](#Cross-Origin-Resource-Sharing-CORS)

  <span data-ttu-id="0438e-134">Det här avsnittet innehåller information om hur tooallow cross-origin resursdelning (CORS).</span><span class="sxs-lookup"><span data-stu-id="0438e-134">This section talks about how tooallow cross-origin resource sharing (CORS).</span></span> <span data-ttu-id="0438e-135">Lär dig om korsdomänåtkomst och hur toohandle med hello CORS funktioner inbyggda i Azure Storage.</span><span class="sxs-lookup"><span data-stu-id="0438e-135">We'll talk about cross-domain access, and how toohandle it with hello CORS capabilities built into Azure Storage.</span></span>

## <a name="management-plane-security"></a><span data-ttu-id="0438e-136">Hantering av plan säkerhet</span><span class="sxs-lookup"><span data-stu-id="0438e-136">Management Plane Security</span></span>
<span data-ttu-id="0438e-137">hello management plan består av åtgärder som påverkar hello lagringskonto sig själv.</span><span class="sxs-lookup"><span data-stu-id="0438e-137">hello management plane consists of operations that affect hello storage account itself.</span></span> <span data-ttu-id="0438e-138">Du kan till exempel skapa eller ta bort ett lagringskonto, hämta en lista över storage-konton i en prenumeration, hämta hello lagringskontonycklar eller återskapa hello nycklar för lagringskonto.</span><span class="sxs-lookup"><span data-stu-id="0438e-138">For example, you can create or delete a storage account, get a list of storage accounts in a subscription, retrieve hello storage account keys, or regenerate hello storage account keys.</span></span>

<span data-ttu-id="0438e-139">När du skapar ett nytt lagringskonto, Välj en distributionsmodell för klassiska eller Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="0438e-139">When you create a new storage account, you select a deployment model of Classic or Resource Manager.</span></span> <span data-ttu-id="0438e-140">hello modell för att skapa resurser i Azure kan bara fullständiga åtkomst toohello prenumerationen och i sin tur hello storage-konto.</span><span class="sxs-lookup"><span data-stu-id="0438e-140">hello Classic model of creating resources in Azure only allows all-or-nothing access toohello subscription, and in turn, hello storage account.</span></span>

<span data-ttu-id="0438e-141">Den här guiden fokuserar på hello Resource Manager-modellen som är hello rekommenderade metoder för att skapa storage-konton.</span><span class="sxs-lookup"><span data-stu-id="0438e-141">This guide focuses on hello Resource Manager model which is hello recommended means for creating storage accounts.</span></span> <span data-ttu-id="0438e-142">Du kan styra åtkomsten på ett mer begränsad nivå toohello management plan med hjälp av rollbaserad åtkomstkontroll (RBAC) och hello Resource Manager storage-konton, i stället för ger åtkomst toohello hela prenumerationen och.</span><span class="sxs-lookup"><span data-stu-id="0438e-142">With hello Resource Manager storage accounts, rather than giving access toohello entire subscription, you can control access on a more finite level toohello management plane using Role-Based Access Control (RBAC).</span></span>

### <a name="how-toosecure-your-storage-account-with-role-based-access-control-rbac"></a><span data-ttu-id="0438e-143">Hur toosecure lagringen konto med rollbaserad åtkomstkontroll (RBAC)</span><span class="sxs-lookup"><span data-stu-id="0438e-143">How toosecure your storage account with Role-Based Access Control (RBAC)</span></span>
<span data-ttu-id="0438e-144">Vi pratar om RBAC är och hur du kan använda den.</span><span class="sxs-lookup"><span data-stu-id="0438e-144">Let's talk about what RBAC is, and how you can use it.</span></span> <span data-ttu-id="0438e-145">Varje Azure-prenumerationen har en Azure Active Directory.</span><span class="sxs-lookup"><span data-stu-id="0438e-145">Each Azure subscription has an Azure Active Directory.</span></span> <span data-ttu-id="0438e-146">Användare, grupper och program från katalogen kan beviljas åtkomst toomanage resurser i hello Azure-prenumeration som använder hello Resource Manager-modellen.</span><span class="sxs-lookup"><span data-stu-id="0438e-146">Users, groups, and applications from that directory can be granted access toomanage resources in hello Azure subscription that use hello Resource Manager deployment model.</span></span> <span data-ttu-id="0438e-147">Detta är refererad tooas rollbaserad åtkomstkontroll (RBAC).</span><span class="sxs-lookup"><span data-stu-id="0438e-147">This is referred tooas Role-Based Access Control (RBAC).</span></span> <span data-ttu-id="0438e-148">toomanage detta åtkomst, kan du använda hello [Azure-portalen](https://portal.azure.com/), hello [Azure CLI-verktygen](../../cli-install-nodejs.md), [PowerShell](/powershell/azureps-cmdlets-docs), eller hello [Azure Storage Resource Provider REST-API: ](https://msdn.microsoft.com/library/azure/mt163683.aspx).</span><span class="sxs-lookup"><span data-stu-id="0438e-148">toomanage this access, you can use hello [Azure portal](https://portal.azure.com/), hello [Azure CLI tools](../../cli-install-nodejs.md), [PowerShell](/powershell/azureps-cmdlets-docs), or hello [Azure Storage Resource Provider REST APIs](https://msdn.microsoft.com/library/azure/mt163683.aspx).</span></span>

<span data-ttu-id="0438e-149">Med hello Resource Manager-modellen placera hello storage-konto i en resurs grupp och kontroll åtkomst toohello management plan för den specifika storage-konto med Azure Active Directory.</span><span class="sxs-lookup"><span data-stu-id="0438e-149">With hello Resource Manager model, you put hello storage account in a resource group and control access toohello management plane of that specific storage account using Azure Active Directory.</span></span> <span data-ttu-id="0438e-150">Exempelvis kan du ge specifika användare hello möjlighet tooaccess hello lagringskontonycklar, medan andra användare kan visa information om hello storage-konto, men kan inte komma åt hello lagringskontonycklar.</span><span class="sxs-lookup"><span data-stu-id="0438e-150">For example, you can give specific users hello ability tooaccess hello storage account keys, while other users can view information about hello storage account, but cannot access hello storage account keys.</span></span>

#### <a name="granting-access"></a><span data-ttu-id="0438e-151">Att bevilja åtkomst</span><span class="sxs-lookup"><span data-stu-id="0438e-151">Granting Access</span></span>
<span data-ttu-id="0438e-152">Komma åt genom att tilldela hello lämpliga RBAC rollen toousers, grupper och program för hello rätt område.</span><span class="sxs-lookup"><span data-stu-id="0438e-152">Access is granted by assigning hello appropriate RBAC role toousers, groups, and applications, at hello right scope.</span></span> <span data-ttu-id="0438e-153">toogrant åtkomst toohello hela prenumerationen, tilldela en roll på hello prenumerationsnivå.</span><span class="sxs-lookup"><span data-stu-id="0438e-153">toogrant access toohello entire subscription, you assign a role at hello subscription level.</span></span> <span data-ttu-id="0438e-154">Du kan bevilja åtkomst tooall hello resurser i en resursgrupp genom att bevilja behörigheter toohello resursgruppen sig själv.</span><span class="sxs-lookup"><span data-stu-id="0438e-154">You can grant access tooall of hello resources in a resource group by granting permissions toohello resource group itself.</span></span> <span data-ttu-id="0438e-155">Du kan också tilldela specifika roller toospecific resurser, till exempel storage-konton.</span><span class="sxs-lookup"><span data-stu-id="0438e-155">You can also assign specific roles toospecific resources, such as storage accounts.</span></span>

<span data-ttu-id="0438e-156">Här följer hello huvudpunkter som du behöver tooknow om hur du använder RBAC tooaccess hello hanteringsåtgärder för ett Azure Storage-konto:</span><span class="sxs-lookup"><span data-stu-id="0438e-156">Here are hello main points that you need tooknow about using RBAC tooaccess hello management operations of an Azure Storage account:</span></span>

* <span data-ttu-id="0438e-157">När du tilldelar åtkomst kan tilldela du i princip ett konto som har rollen toohello som du vill toohave åtkomst.</span><span class="sxs-lookup"><span data-stu-id="0438e-157">When you assign access, you basically assign a role toohello account that you want toohave access.</span></span> <span data-ttu-id="0438e-158">Du kan styra åtkomst toohello operations används toomanage detta lagringskonto, men toohello dataobjekt inte i hello-konto.</span><span class="sxs-lookup"><span data-stu-id="0438e-158">You can control access toohello operations used toomanage that storage account, but not toohello data objects in hello account.</span></span> <span data-ttu-id="0438e-159">Exempelvis kan du bevilja behörigheten tooretrieve hello egenskaper för hello storage-konto (till exempel redundans), men inte tooa behållare eller data i en behållare i Blob Storage.</span><span class="sxs-lookup"><span data-stu-id="0438e-159">For example, you can grant permission tooretrieve hello properties of hello storage account (such as redundancy), but not tooa container or data within a container inside Blob Storage.</span></span>
* <span data-ttu-id="0438e-160">För någon toohave behörighet tooaccess hello dataobjekt i hello storage-konto, kan du ge dem behörighet tooread hello lagringskontonycklar och användaren kan sedan använda dessa nycklar tooaccess hello blobbar, köer, tabeller och filer.</span><span class="sxs-lookup"><span data-stu-id="0438e-160">For someone toohave permission tooaccess hello data objects in hello storage account, you can give them permission tooread hello storage account keys, and that user can then use those keys tooaccess hello blobs, queues, tables, and files.</span></span>
* <span data-ttu-id="0438e-161">Roller kan tilldelas tooa specifikt användarkonto, en grupp av användare eller tooa specifika program.</span><span class="sxs-lookup"><span data-stu-id="0438e-161">Roles can be assigned tooa specific user account, a group of users, or tooa specific application.</span></span>
* <span data-ttu-id="0438e-162">Varje roll har en lista över och inte åtgärder.</span><span class="sxs-lookup"><span data-stu-id="0438e-162">Each role has a list of Actions and Not Actions.</span></span> <span data-ttu-id="0438e-163">Hello virtuella deltagarrollen har till exempel en åtgärd av ”listKeys” som kan läsa hello storage-konto nycklar toobe.</span><span class="sxs-lookup"><span data-stu-id="0438e-163">For example, hello Virtual Machine Contributor role has an Action of "listKeys" that allows hello storage account keys toobe read.</span></span> <span data-ttu-id="0438e-164">hello deltagare har ”inte åtgärder”, som uppdatering hello åtkomst för användare i hello Active Directory.</span><span class="sxs-lookup"><span data-stu-id="0438e-164">hello Contributor has "Not Actions" such as updating hello access for users in hello Active Directory.</span></span>
* <span data-ttu-id="0438e-165">Roller för lagring inkluderar (men är inte begränsade till) hello följande:</span><span class="sxs-lookup"><span data-stu-id="0438e-165">Roles for storage include (but are not limited to) hello following:</span></span>

  * <span data-ttu-id="0438e-166">Ägaren – de kan hantera allt, inklusive åtkomst.</span><span class="sxs-lookup"><span data-stu-id="0438e-166">Owner – They can manage everything, including access.</span></span>
  * <span data-ttu-id="0438e-167">Deltagare – de kan göra något hello ägare kan förutom tilldela åtkomst.</span><span class="sxs-lookup"><span data-stu-id="0438e-167">Contributor – They can do anything hello owner can do except assign access.</span></span> <span data-ttu-id="0438e-168">Användare med den här rollen kan visa och återskapa hello nycklar för lagringskonto.</span><span class="sxs-lookup"><span data-stu-id="0438e-168">Someone with this role can view and regenerate hello storage account keys.</span></span> <span data-ttu-id="0438e-169">De kan komma åt hello dataobjekt med hello lagringskontonycklar.</span><span class="sxs-lookup"><span data-stu-id="0438e-169">With hello storage account keys, they can access hello data objects.</span></span>
  * <span data-ttu-id="0438e-170">Läsare kan visa information om hello lagringskontot utom hemligheter.</span><span class="sxs-lookup"><span data-stu-id="0438e-170">Reader – They can view information about hello storage account, except secrets.</span></span> <span data-ttu-id="0438e-171">Till exempel om du tilldelar en roll med reader-behörighet på hello storage-konto toosomeone, de kan visa hello egenskaper för hello storage-konto, men de kan inte göra några ändringar toohello egenskaper eller visa hello lagringskontonycklar.</span><span class="sxs-lookup"><span data-stu-id="0438e-171">For example, if you assign a role with reader permissions on hello storage account toosomeone, they can view hello properties of hello storage account, but they can't make any changes toohello properties or view hello storage account keys.</span></span>
  * <span data-ttu-id="0438e-172">Storage-konto deltagare – de kan hantera hello storage-konto – de kan läsa hello prenumerationens resursgrupper och resurser, och skapa och hantera distributionen av resursgrupper prenumeration.</span><span class="sxs-lookup"><span data-stu-id="0438e-172">Storage Account Contributor – They can manage hello storage account – they can read hello subscription's resource groups and resources, and create and manage subscription resource group deployments.</span></span> <span data-ttu-id="0438e-173">De kan också komma åt hello lagringskontonycklar, vilket i sin tur innebär att de kan komma åt hello dataplan.</span><span class="sxs-lookup"><span data-stu-id="0438e-173">They can also access hello storage account keys, which in turn means they can access hello data plane.</span></span>
  * <span data-ttu-id="0438e-174">Administratör för användaråtkomst – de kan hantera lagring toohello-användarkontot.</span><span class="sxs-lookup"><span data-stu-id="0438e-174">User Access Administrator – They can manage user access toohello storage account.</span></span> <span data-ttu-id="0438e-175">De kan till exempel ge läsaren åtkomst tooa specifika användare.</span><span class="sxs-lookup"><span data-stu-id="0438e-175">For example, they can grant Reader access tooa specific user.</span></span>
  * <span data-ttu-id="0438e-176">Virtual Machine-deltagare – som de kan hantera virtuella datorer men inte hello storage-konto toowhich de är anslutna.</span><span class="sxs-lookup"><span data-stu-id="0438e-176">Virtual Machine Contributor – They can manage virtual machines but not hello storage account toowhich they are connected.</span></span> <span data-ttu-id="0438e-177">Den här rollen kan visa hello lagringskontonycklar, vilket innebär att hello användaren toowhom du tilldela den här rollen kan uppdatera hello dataplan.</span><span class="sxs-lookup"><span data-stu-id="0438e-177">This role can list hello storage account keys, which means that hello user toowhom you assign this role can update hello data plane.</span></span>

    <span data-ttu-id="0438e-178">För en användare toocreate en virtuell dator ha måste de toobe kan toocreate hello motsvarande VHD-filen i ett lagringskonto.</span><span class="sxs-lookup"><span data-stu-id="0438e-178">In order for a user toocreate a virtual machine, they have toobe able toocreate hello corresponding VHD file in a storage account.</span></span> <span data-ttu-id="0438e-179">toodo, de behöver toobe kan tooretrieve hello lagring konto nyckeln och överför den toohello API skapar hello VM.</span><span class="sxs-lookup"><span data-stu-id="0438e-179">toodo that, they need toobe able tooretrieve hello storage account key and pass it toohello API creating hello VM.</span></span> <span data-ttu-id="0438e-180">De måste därför ha den här behörigheten så att de kan visa hello lagringskontonycklar.</span><span class="sxs-lookup"><span data-stu-id="0438e-180">Therefore, they must have this permission so they can list hello storage account keys.</span></span>
* <span data-ttu-id="0438e-181">hello möjlighet toodefine anpassade roller är en funktion som gör att du toocompose en uppsättning åtgärder från en lista över tillgängliga åtgärder kan utföras på Azure-resurser.</span><span class="sxs-lookup"><span data-stu-id="0438e-181">hello ability toodefine custom roles is a feature that allows you toocompose a set of actions from a list of available actions that can be performed on Azure resources.</span></span>
* <span data-ttu-id="0438e-182">hello användare har toobe ställa in i Azure Active Directory innan du kan tilldela en roll toothem.</span><span class="sxs-lookup"><span data-stu-id="0438e-182">hello user has toobe set up in your Azure Active Directory before you can assign a role toothem.</span></span>
* <span data-ttu-id="0438e-183">Du kan skapa en rapport över som beviljats/återkallas vilken typ av åtkomst till och från vilken och på vilka scope med hjälp av PowerShell eller hello Azure CLI.</span><span class="sxs-lookup"><span data-stu-id="0438e-183">You can create a report of who granted/revoked what kind of access to/from whom and on what scope using PowerShell or hello Azure CLI.</span></span>

#### <a name="resources"></a><span data-ttu-id="0438e-184">Resurser</span><span class="sxs-lookup"><span data-stu-id="0438e-184">Resources</span></span>
* [<span data-ttu-id="0438e-185">Azure Active Directory rollbaserad åtkomstkontroll</span><span class="sxs-lookup"><span data-stu-id="0438e-185">Azure Active Directory Role-based Access Control</span></span>](../../active-directory/role-based-access-control-configure.md)

  <span data-ttu-id="0438e-186">Den här artikeln förklarar hello Azure Active Directory-rollbaserad åtkomstkontroll och hur det fungerar.</span><span class="sxs-lookup"><span data-stu-id="0438e-186">This article explains hello Azure Active Directory Role-based Access Control and how it works.</span></span>
* [<span data-ttu-id="0438e-187">RBAC: inbyggda roller</span><span class="sxs-lookup"><span data-stu-id="0438e-187">RBAC: Built in Roles</span></span>](../../active-directory/role-based-access-built-in-roles.md)

  <span data-ttu-id="0438e-188">Den här artikeln beskrivs alla hello inbyggda roller finns i RBAC.</span><span class="sxs-lookup"><span data-stu-id="0438e-188">This article details all of hello built-in roles available in RBAC.</span></span>
* [<span data-ttu-id="0438e-189">Förstå Resource Manager-distribution och klassisk distribution</span><span class="sxs-lookup"><span data-stu-id="0438e-189">Understanding Resource Manager deployment and classic deployment</span></span>](../../azure-resource-manager/resource-manager-deployment-model.md)

  <span data-ttu-id="0438e-190">Den här artikeln beskriver hello Resource Manager-distribution och klassisk distributionsmodeller och förklarar hello fördelarna med att använda hello Resource Manager och resursgrupper.</span><span class="sxs-lookup"><span data-stu-id="0438e-190">This article explains hello Resource Manager deployment and classic deployment models, and explains hello benefits of using hello Resource Manager and resource groups.</span></span> <span data-ttu-id="0438e-191">Den förklarar hur hello Azure Compute-, nätverks- och Lagringsprovidrar fungerar under hello Resource Manager-modellen.</span><span class="sxs-lookup"><span data-stu-id="0438e-191">It explains how hello Azure Compute, Network, and Storage Providers work under hello Resource Manager model.</span></span>
* [<span data-ttu-id="0438e-192">Hantera rollbaserad åtkomstkontroll med hello REST API</span><span class="sxs-lookup"><span data-stu-id="0438e-192">Managing Role-Based Access Control with hello REST API</span></span>](../../active-directory/role-based-access-control-manage-access-rest.md)

  <span data-ttu-id="0438e-193">Den här artikeln visar hur toouse hello REST API toomanage RBAC.</span><span class="sxs-lookup"><span data-stu-id="0438e-193">This article shows how toouse hello REST API toomanage RBAC.</span></span>
* [<span data-ttu-id="0438e-194">Azure Storage Resource Provider REST API-referens</span><span class="sxs-lookup"><span data-stu-id="0438e-194">Azure Storage Resource Provider REST API Reference</span></span>](https://msdn.microsoft.com/library/azure/mt163683.aspx)

  <span data-ttu-id="0438e-195">Detta är hello referens för hello API: er som du kan använda toomanage ditt lagringskonto via programmering.</span><span class="sxs-lookup"><span data-stu-id="0438e-195">This is hello reference for hello APIs you can use toomanage your storage account programmatically.</span></span>
* [<span data-ttu-id="0438e-196">Developer's guide tooauth med Azure Resource Manager API</span><span class="sxs-lookup"><span data-stu-id="0438e-196">Developer's guide tooauth with Azure Resource Manager API</span></span>](http://www.dushyantgill.com/blog/2015/05/23/developers-guide-to-auth-with-azure-resource-manager-api/)

  <span data-ttu-id="0438e-197">Den här artikeln visar hur tooauthenticate med hello Resource Manager API: er.</span><span class="sxs-lookup"><span data-stu-id="0438e-197">This article shows how tooauthenticate using hello Resource Manager APIs.</span></span>
* [<span data-ttu-id="0438e-198">Rollbaserad åtkomstkontroll i Microsoft Azure från Ignite</span><span class="sxs-lookup"><span data-stu-id="0438e-198">Role-Based Access Control for Microsoft Azure from Ignite</span></span>](https://channel9.msdn.com/events/Ignite/2015/BRK2707)

  <span data-ttu-id="0438e-199">Det här är en video på Channel 9 från hello 2015 MS Ignite konferens tooa för länken.</span><span class="sxs-lookup"><span data-stu-id="0438e-199">This is a link tooa video on Channel 9 from hello 2015 MS Ignite conference.</span></span> <span data-ttu-id="0438e-200">I den här sessionen de talar om åtkomst till hanterings- och rapporteringsfunktioner i Azure och utforska bästa metoderna för att skydda åtkomsten tooAzure prenumerationer med hjälp av Azure Active Directory.</span><span class="sxs-lookup"><span data-stu-id="0438e-200">In this session, they talk about access management and reporting capabilities in Azure, and explore best practices around securing access tooAzure subscriptions using Azure Active Directory.</span></span>

### <a name="managing-your-storage-account-keys"></a><span data-ttu-id="0438e-201">Hantera dina nycklar för Lagringskonto</span><span class="sxs-lookup"><span data-stu-id="0438e-201">Managing Your Storage Account Keys</span></span>
<span data-ttu-id="0438e-202">Nycklarna är 512-bitars strängar som skapats av Azure och som tillsammans med hello lagring kontonamn, Storage-konto kan vara används tooaccess hello dataobjekt som lagras i hello storage-konto, t.ex. blobbar, entiteter i en tabell, Kömeddelanden och filer på en filresurs på Azure.</span><span class="sxs-lookup"><span data-stu-id="0438e-202">Storage account keys are 512-bit strings created by Azure that, along with hello storage account name, can be used tooaccess hello data objects stored in hello storage account, e.g. blobs, entities within a table, queue messages, and files on an Azure File share.</span></span> <span data-ttu-id="0438e-203">Styra toohello storage-konto nycklar åtkomstkontroller komma åt toohello dataplan för det lagringskontot.</span><span class="sxs-lookup"><span data-stu-id="0438e-203">Controlling access toohello storage account keys controls access toohello data plane for that storage account.</span></span>

<span data-ttu-id="0438e-204">Varje lagringskonto har två nycklar som avses tooas ”nyckel 1” och ”nyckel 2” Hej [Azure-portalen](http://portal.azure.com/) och i hello PowerShell-cmdlets.</span><span class="sxs-lookup"><span data-stu-id="0438e-204">Each storage account has two keys referred tooas "Key 1" and "Key 2" in hello [Azure portal](http://portal.azure.com/) and in hello PowerShell cmdlets.</span></span> <span data-ttu-id="0438e-205">Dessa kan återskapas manuellt med hjälp av en av flera metoder, inklusive men inte begränsat toousing hello [Azure-portalen](https://portal.azure.com/), PowerShell, hello Azure CLI eller programmässigt med hello Storage-klientbibliotek för .NET eller hello Azure Storage Services REST API.</span><span class="sxs-lookup"><span data-stu-id="0438e-205">These can be regenerated manually using one of several methods, including, but not limited toousing hello [Azure portal](https://portal.azure.com/), PowerShell, hello Azure CLI, or programmatically using hello .NET Storage Client Library or hello Azure Storage Services REST API.</span></span>

<span data-ttu-id="0438e-206">Det finns flera orsaker tooregenerate din lagringskontonycklar.</span><span class="sxs-lookup"><span data-stu-id="0438e-206">There are any number of reasons tooregenerate your storage account keys.</span></span>

* <span data-ttu-id="0438e-207">Du kan återskapa dem regelbundet av säkerhetsskäl.</span><span class="sxs-lookup"><span data-stu-id="0438e-207">You might regenerate them on a regular basis for security reasons.</span></span>
* <span data-ttu-id="0438e-208">Du kan återskapa din lagringskontonycklar om någon hanteras toohack till ett program och hämta hello-nyckel som hårdkodad eller sparats i en konfigurationsfil och få fullständig åtkomst tooyour storage-konto.</span><span class="sxs-lookup"><span data-stu-id="0438e-208">You would regenerate your storage account keys if someone managed toohack into an application and retrieve hello key that was hardcoded or saved in a configuration file, giving them full access tooyour storage account.</span></span>
* <span data-ttu-id="0438e-209">En annan fallet för nycklar är om ditt team använder ett Lagringsutforskaren program som behåller hello lagringskontonyckel och en av hello teammedlemmar lämnar.</span><span class="sxs-lookup"><span data-stu-id="0438e-209">Another case for key regeneration is if your team is using a Storage Explorer application that retains hello storage account key, and one of hello team members leaves.</span></span> <span data-ttu-id="0438e-210">hello programmet fortsätter toowork, ger dem åtkomst tooyour storage-konto när de är borta.</span><span class="sxs-lookup"><span data-stu-id="0438e-210">hello application would continue toowork, giving them access tooyour storage account after they're gone.</span></span> <span data-ttu-id="0438e-211">Detta är faktiskt hello Huvudorsaken de skapats kontonivå signaturer för delad åtkomst – du kan använda en kontonivå SAS istället för att lagra hello snabbtangenter i en konfigurationsfil.</span><span class="sxs-lookup"><span data-stu-id="0438e-211">This is actually hello primary reason they created account-level Shared Access Signatures – you can use an account-level SAS instead of storing hello access keys in a configuration file.</span></span>

#### <a name="key-regeneration-plan"></a><span data-ttu-id="0438e-212">Nyckeln återskapas plan</span><span class="sxs-lookup"><span data-stu-id="0438e-212">Key regeneration plan</span></span>
<span data-ttu-id="0438e-213">Vill du inte toojust generera hello nyckel som du använder utan lite planering.</span><span class="sxs-lookup"><span data-stu-id="0438e-213">You don't want toojust regenerate hello key you are using without some planning.</span></span> <span data-ttu-id="0438e-214">Om du gör det kan du klippa ut alla åtkomst toothat storage-konto, vilket kan orsaka avbrott i större.</span><span class="sxs-lookup"><span data-stu-id="0438e-214">If you do that, you could cut off all access toothat storage account, which can cause major disruption.</span></span> <span data-ttu-id="0438e-215">Det är därför det finns två nycklar.</span><span class="sxs-lookup"><span data-stu-id="0438e-215">This is why there are two keys.</span></span> <span data-ttu-id="0438e-216">Du bör Generera en nyckel i taget.</span><span class="sxs-lookup"><span data-stu-id="0438e-216">You should regenerate one key at a time.</span></span>

<span data-ttu-id="0438e-217">Innan du återskapar dina nycklar måste du ha en lista över alla program som är beroende av hello storage-konto, samt andra tjänster som du använder i Azure.</span><span class="sxs-lookup"><span data-stu-id="0438e-217">Before you regenerate your keys, be sure you have a list of all of your applications that are dependent on hello storage account, as well as any other services you are using in Azure.</span></span> <span data-ttu-id="0438e-218">Till exempel om du använder Azure Media Services som är beroende av ditt lagringskonto måste du synkroniserar hello åtkomstnycklarna med medietjänsten när du har återskapat hello nyckel.</span><span class="sxs-lookup"><span data-stu-id="0438e-218">For example, if you are using Azure Media Services that are dependent on your storage account, you must re-sync hello access keys with your media service after you regenerate hello key.</span></span> <span data-ttu-id="0438e-219">Om du använder alla program, till exempel en lagringsutforskare behöver tooprovide hello nya nycklar toothose program samt.</span><span class="sxs-lookup"><span data-stu-id="0438e-219">If you are using any applications such as a storage explorer, you will need tooprovide hello new keys toothose applications as well.</span></span> <span data-ttu-id="0438e-220">Observera att om du har virtuella datorer vars VHD-filer som lagras i hello storage-konto kan de inte påverkas av de hello lagringskontonycklarna genereras.</span><span class="sxs-lookup"><span data-stu-id="0438e-220">Note that if you have VMs whose VHD files are stored in hello storage account, they will not be affected by regenerating hello storage account keys.</span></span>

<span data-ttu-id="0438e-221">Du kan återskapa dina nycklar i hello Azure-portalen.</span><span class="sxs-lookup"><span data-stu-id="0438e-221">You can regenerate your keys in hello Azure portal.</span></span> <span data-ttu-id="0438e-222">När nycklar genereras om de kan ta upp too10 minuter toobe synkroniserade över lagringstjänster.</span><span class="sxs-lookup"><span data-stu-id="0438e-222">Once keys are regenerated they can take up too10 minutes toobe synchronized across Storage Services.</span></span>

<span data-ttu-id="0438e-223">När du är klar är här hello allmänna processen med information om hur du ska ändra din nyckel.</span><span class="sxs-lookup"><span data-stu-id="0438e-223">When you're ready, here's hello general process detailing how you should change your key.</span></span> <span data-ttu-id="0438e-224">I det här fallet hello antas att du använder nyckel 1 och du kommer toochange allt toouse nyckel 2 i stället.</span><span class="sxs-lookup"><span data-stu-id="0438e-224">In this case, hello assumption is that you are currently using Key 1 and you are going toochange everything toouse Key 2 instead.</span></span>

1. <span data-ttu-id="0438e-225">Återskapa nyckeln 2 tooensure att den är skyddad.</span><span class="sxs-lookup"><span data-stu-id="0438e-225">Regenerate Key 2 tooensure that it is secure.</span></span> <span data-ttu-id="0438e-226">Du kan göra detta i hello Azure-portalen.</span><span class="sxs-lookup"><span data-stu-id="0438e-226">You can do this in hello Azure portal.</span></span>
2. <span data-ttu-id="0438e-227">Ändra hello lagring viktiga toouse nyckel 2 nytt värde i alla hello program där hello lagringsnyckel lagras.</span><span class="sxs-lookup"><span data-stu-id="0438e-227">In all of hello applications where hello storage key is stored, change hello storage key toouse Key 2's new value.</span></span> <span data-ttu-id="0438e-228">Testa och publicera programmet hello.</span><span class="sxs-lookup"><span data-stu-id="0438e-228">Test and publish hello application.</span></span>
3. <span data-ttu-id="0438e-229">När alla av hello program och tjänster som är igång och körs, återskapa nyckel 1.</span><span class="sxs-lookup"><span data-stu-id="0438e-229">After all of hello applications and services are up and running successfully, regenerate Key 1.</span></span> <span data-ttu-id="0438e-230">Detta säkerställer att vem som helst toowhom som du inte uttryckligen har gett hello ny nyckel inte längre har åtkomst till toohello storage-konto.</span><span class="sxs-lookup"><span data-stu-id="0438e-230">This ensures that anybody toowhom you have not expressly given hello new key will no longer have access toohello storage account.</span></span>

<span data-ttu-id="0438e-231">Om du använder nyckel 2, kan du använda samma process, men omvänd hello nyckelnamn hello.</span><span class="sxs-lookup"><span data-stu-id="0438e-231">If you are currently using Key 2, you can use hello same process, but reverse hello key names.</span></span>

<span data-ttu-id="0438e-232">Du kan migrera över ett par dagar, ändra varje ny nyckel för programmet toouse hello och publicera den.</span><span class="sxs-lookup"><span data-stu-id="0438e-232">You can migrate over a couple of days, changing each application toouse hello new key and publishing it.</span></span> <span data-ttu-id="0438e-233">När alla är klar bör du gå tillbaka och återskapa hello gamla nyckeln så att den inte längre fungerar.</span><span class="sxs-lookup"><span data-stu-id="0438e-233">After all of them are done, you should then go back and regenerate hello old key so it no longer works.</span></span>

<span data-ttu-id="0438e-234">Ett annat alternativ är tooput hello lagringskontonyckel i en [Azure Key Vault](https://azure.microsoft.com/services/key-vault/) som en hemlighet och ha dina program hämta hello nyckel därifrån.</span><span class="sxs-lookup"><span data-stu-id="0438e-234">Another option is tooput hello storage account key in an [Azure Key Vault](https://azure.microsoft.com/services/key-vault/) as a secret and have your applications retrieve hello key from there.</span></span> <span data-ttu-id="0438e-235">Sedan när du återskapa hello nyckeln och uppdaterar hello Azure Key Vault behöver hello program inte toobe omdistribueras eftersom de automatiskt ska hämta hello ny nyckel från hello Azure Key Vault.</span><span class="sxs-lookup"><span data-stu-id="0438e-235">Then when you regenerate hello key and update hello Azure Key Vault, hello applications will not need toobe redeployed because they will pick up hello new key from hello Azure Key Vault automatically.</span></span> <span data-ttu-id="0438e-236">Observera att du kan ha hello programmet att läsa hello varje gång du behöver den eller du kan cachelagra i minnet och om det misslyckas när du använder den, hämta hello nyckeln igen från hello Azure Key Vault.</span><span class="sxs-lookup"><span data-stu-id="0438e-236">Note that you can have hello application read hello key each time you need it, or you can cache it in memory and if it fails when using it, retrieve hello key again from hello Azure Key Vault.</span></span>

<span data-ttu-id="0438e-237">Med hjälp av Azure Key Vault lägger till ytterligare en säkerhetsnivå för dina lagringsnycklar.</span><span class="sxs-lookup"><span data-stu-id="0438e-237">Using Azure Key Vault also adds another level of security for your storage keys.</span></span> <span data-ttu-id="0438e-238">Om du använder den här metoden kan har du aldrig hello lagring viktiga hårdkodad i en konfigurationsfil, vilket tar bort den minimering av någon och få åtkomst toohello nycklar utan uttryckligt tillstånd.</span><span class="sxs-lookup"><span data-stu-id="0438e-238">If you use this method, you will never have hello storage key hardcoded in a configuration file, which removes that avenue of somebody getting access toohello keys without specific permission.</span></span>

<span data-ttu-id="0438e-239">En annan fördel med att använda Azure Key Vault är att du kan också styra tooyour snabbtangenter med Azure Active Directory.</span><span class="sxs-lookup"><span data-stu-id="0438e-239">Another advantage of using Azure Key Vault is you can also control access tooyour keys using Azure Active Directory.</span></span> <span data-ttu-id="0438e-240">Det innebär att du kan bevilja åtkomst toohello handfull program som behöver tooretrieve hello nycklar från Azure Key Vault och veta att andra program inte kan tooaccess hello nycklar utan att ge dem behörighet specifikt.</span><span class="sxs-lookup"><span data-stu-id="0438e-240">This means you can grant access toohello handful of applications that need tooretrieve hello keys from Azure Key Vault, and know that other applications will not be able tooaccess hello keys without granting them permission specifically.</span></span>

<span data-ttu-id="0438e-241">Obs: Vi rekommenderar toouse endast en av hello nycklar i alla dina program på hello samma tid.</span><span class="sxs-lookup"><span data-stu-id="0438e-241">Note: it is recommended toouse only one of hello keys in all of your applications at hello same time.</span></span> <span data-ttu-id="0438e-242">Om du använder nyckel 1 på vissa platser och nyckel 2 i andra kommer inte att kunna toorotate dina nycklar utan ett program att förlora åtkomsten.</span><span class="sxs-lookup"><span data-stu-id="0438e-242">If you use Key 1 in some places and Key 2 in others, you will not be able toorotate your keys without some application losing access.</span></span>

#### <a name="resources"></a><span data-ttu-id="0438e-243">Resurser</span><span class="sxs-lookup"><span data-stu-id="0438e-243">Resources</span></span>
* [<span data-ttu-id="0438e-244">Om Azure Storage-konton</span><span class="sxs-lookup"><span data-stu-id="0438e-244">About Azure Storage Accounts</span></span>](storage-create-storage-account.md#regenerate-storage-access-keys)

  <span data-ttu-id="0438e-245">Den här artikeln ger en översikt över lagringskonton och beskriver visa, kopiera och återskapa åtkomstnycklar för lagring.</span><span class="sxs-lookup"><span data-stu-id="0438e-245">This article gives an overview of storage accounts and discusses viewing, copying, and regenerating storage access keys.</span></span>
* [<span data-ttu-id="0438e-246">Azure Storage Resource Provider REST API-referens</span><span class="sxs-lookup"><span data-stu-id="0438e-246">Azure Storage Resource Provider REST API Reference</span></span>](https://msdn.microsoft.com/library/mt163683.aspx)

  <span data-ttu-id="0438e-247">Den här artikeln innehåller länkar toospecific artiklar om hämtning hello lagringskontonycklar och återskapar hello lagringskontonycklar för ett Azure-konto med hjälp av hello REST API.</span><span class="sxs-lookup"><span data-stu-id="0438e-247">This article contains links toospecific articles about retrieving hello storage account keys and regenerating hello storage account keys for an Azure Account using hello REST API.</span></span> <span data-ttu-id="0438e-248">Obs: Detta är Resource Manager storage-konton.</span><span class="sxs-lookup"><span data-stu-id="0438e-248">Note: This is for  Resource Manager storage accounts.</span></span>
* [<span data-ttu-id="0438e-249">Åtgärder på storage-konton</span><span class="sxs-lookup"><span data-stu-id="0438e-249">Operations on storage accounts</span></span>](https://msdn.microsoft.com/library/ee460790.aspx)

  <span data-ttu-id="0438e-250">Den här artikeln i hello Storage Service Manager REST API Reference innehåller länkar toospecific artiklar om hämtning och de hello lagringskontonycklarna genereras med hjälp av hello REST API.</span><span class="sxs-lookup"><span data-stu-id="0438e-250">This article in hello Storage Service Manager REST API Reference contains links toospecific articles on retrieving and regenerating hello storage account keys using hello REST API.</span></span> <span data-ttu-id="0438e-251">Obs: Detta är hello klassiska lagringskonton.</span><span class="sxs-lookup"><span data-stu-id="0438e-251">Note: This is for hello Classic storage accounts.</span></span>
* [<span data-ttu-id="0438e-252">Säg goodbye tookey management – hantera åtkomst tooAzure Storage data med hjälp av Azure AD</span><span class="sxs-lookup"><span data-stu-id="0438e-252">Say goodbye tookey management – manage access tooAzure Storage data using Azure AD</span></span>](http://www.dushyantgill.com/blog/2015/04/26/say-goodbye-to-key-management-manage-access-to-azure-storage-data-using-azure-ad/)

  <span data-ttu-id="0438e-253">Den här artikeln visar hur toouse Active Directory toocontrol åtkomstnycklar tooyour Azure Storage i Azure Key Vault.</span><span class="sxs-lookup"><span data-stu-id="0438e-253">This article shows how toouse Active Directory toocontrol access tooyour Azure Storage keys in Azure Key Vault.</span></span> <span data-ttu-id="0438e-254">Den visar även hur toouse en Azure Automation jobbet tooregenerate hello nycklar timme.</span><span class="sxs-lookup"><span data-stu-id="0438e-254">It also shows how toouse an Azure Automation job tooregenerate hello keys on an hourly basis.</span></span>

## <a name="data-plane-security"></a><span data-ttu-id="0438e-255">Säkerhet för data-plan</span><span class="sxs-lookup"><span data-stu-id="0438e-255">Data Plane Security</span></span>
<span data-ttu-id="0438e-256">Plan för datasäkerhet refererar toohello-metoder används toosecure hello dataobjekt som lagras i Azure Storage – hello blobbar, köer, tabeller och filer.</span><span class="sxs-lookup"><span data-stu-id="0438e-256">Data Plane Security refers toohello methods used toosecure hello data objects stored in Azure Storage – hello blobs, queues, tables, and files.</span></span> <span data-ttu-id="0438e-257">Vi har sett metoder tooencrypt hello data och säkerhet vid överföring av hello data, men hur skaffar du om att tillåta åtkomst toohello objekt?</span><span class="sxs-lookup"><span data-stu-id="0438e-257">We've seen methods tooencrypt hello data and security during transit of hello data, but how do you go about allowing access toohello objects?</span></span>

<span data-ttu-id="0438e-258">Det finns två metoder för att styra åtkomst toohello dataobjekt sig själva i princip.</span><span class="sxs-lookup"><span data-stu-id="0438e-258">There are basically two methods for controlling access toohello data objects themselves.</span></span> <span data-ttu-id="0438e-259">hello först är genom att kontrollera åtkomst toohello lagringskontonycklar och hello andra använder signaturer för delad åtkomst toogrant åtkomst toospecific dataobjekt för en viss tidsperiod.</span><span class="sxs-lookup"><span data-stu-id="0438e-259">hello first is by controlling access toohello storage account keys, and hello second is using Shared Access Signatures toogrant access toospecific data objects for a specific amount of time.</span></span>

<span data-ttu-id="0438e-260">Ett undantag toonote är att du kan låta offentlig åtkomst tooyour blobbar genom att ange hello åtkomstnivån för hello-behållare som innehåller hello blobbar i enlighet med detta.</span><span class="sxs-lookup"><span data-stu-id="0438e-260">One exception toonote is that you can allow public access tooyour blobs by setting hello access level for hello container that holds hello blobs accordingly.</span></span> <span data-ttu-id="0438e-261">Om du ställer in åtkomst för en tooBlob behållaren eller behållaren tillåter offentlig läsbehörighet för hello blobbar i behållaren.</span><span class="sxs-lookup"><span data-stu-id="0438e-261">If you set access for a container tooBlob or Container, it will allow public read access for hello blobs in that container.</span></span> <span data-ttu-id="0438e-262">Det innebär att alla med en URL som pekar tooa blobb i behållaren kan öppna den i en webbläsare utan hjälp av en signatur för delad åtkomst eller hello lagringskontonycklar.</span><span class="sxs-lookup"><span data-stu-id="0438e-262">This means anyone with a URL pointing tooa blob in that container can open it in a browser without using a Shared Access Signature or having hello storage account keys.</span></span>

### <a name="storage-account-keys"></a><span data-ttu-id="0438e-263">Lagringskontonycklar</span><span class="sxs-lookup"><span data-stu-id="0438e-263">Storage Account Keys</span></span>
<span data-ttu-id="0438e-264">Lagringskontonycklar är 512-bitars strängar som skapats av Azure som tillsammans med hello lagringskontonamnet kan vara används tooaccess hello dataobjekt som lagras i hello storage-konto.</span><span class="sxs-lookup"><span data-stu-id="0438e-264">Storage account keys are 512-bit strings created by Azure that, along with hello storage account name, can be used tooaccess hello data objects stored in hello storage account.</span></span>

<span data-ttu-id="0438e-265">Du kan till exempel läsa blobbar, skriva tooqueues, skapa tabeller och ändra filer.</span><span class="sxs-lookup"><span data-stu-id="0438e-265">For example, you can read blobs, write tooqueues, create tables, and modify files.</span></span> <span data-ttu-id="0438e-266">Många av de här åtgärderna kan utföras via hello Azure-portalen eller med hjälp av ett av många Lagringsutforskaren program.</span><span class="sxs-lookup"><span data-stu-id="0438e-266">Many of these actions can be performed through hello Azure portal, or using one of many Storage Explorer applications.</span></span> <span data-ttu-id="0438e-267">Du kan också skriva kod toouse hello REST API eller någon av hello Lagringsklientbiblioteken tooperform dessa åtgärder.</span><span class="sxs-lookup"><span data-stu-id="0438e-267">You can also write code toouse hello REST API or one of hello Storage Client Libraries tooperform these operations.</span></span>

<span data-ttu-id="0438e-268">Enligt beskrivningen i avsnittet hello på hello [Management plan säkerhet](#management-plane-security), åtkomstnycklar toohello lagring för ett klassiskt storage-konto kan beviljas genom att ge fullständig åtkomst toohello Azure-prenumeration.</span><span class="sxs-lookup"><span data-stu-id="0438e-268">As discussed in hello section on hello [Management Plane Security](#management-plane-security), access toohello storage keys for a Classic storage account can be granted by giving full access toohello Azure subscription.</span></span> <span data-ttu-id="0438e-269">Snabbtangenter toohello lagring för ett lagringskonto med hjälp av hello Azure Resource Manager-modellen kan kontrolleras via rollbaserad åtkomstkontroll (RBAC).</span><span class="sxs-lookup"><span data-stu-id="0438e-269">Access toohello storage keys for a storage account using hello Azure Resource Manager model can be controlled through Role-Based Access Control (RBAC).</span></span>

### <a name="how-toodelegate-access-tooobjects-in-your-account-using-shared-access-signatures-and-stored-access-policies"></a><span data-ttu-id="0438e-270">Hur toodelegate åt tooobjects i ditt konto med hjälp av signaturer för delad åtkomst och åtkomstregler lagras</span><span class="sxs-lookup"><span data-stu-id="0438e-270">How toodelegate access tooobjects in your account using Shared Access Signatures and Stored Access Policies</span></span>
<span data-ttu-id="0438e-271">En signatur för delad åtkomst är en sträng som innehåller en säkerhetstoken som kan vara ansluten tooa URI som du kan använda toodelegate åtkomst toostorage objekt och ange begränsningarna, t.ex hello behörigheter och hello tidsvärdet mängd åtkomst.</span><span class="sxs-lookup"><span data-stu-id="0438e-271">A Shared Access Signature is a string containing a security token that can be attached tooa URI that allows you toodelegate access toostorage objects and specify constraints such as hello permissions and hello date/time range of access.</span></span>

<span data-ttu-id="0438e-272">Du kan bevilja åtkomst tooblobs, behållare, Kömeddelanden, filer och tabeller.</span><span class="sxs-lookup"><span data-stu-id="0438e-272">You can grant access tooblobs, containers, queue messages, files, and tables.</span></span> <span data-ttu-id="0438e-273">Med tabeller, kan du faktiskt bevilja behörighet tooaccess en mängd entiteter i hello tabell genom att ange hello partition och raden nyckelintervall toowhich du vill hello toohave användaråtkomst.</span><span class="sxs-lookup"><span data-stu-id="0438e-273">With tables, you can actually grant permission tooaccess a range of entities in hello table by specifying hello partition and row key ranges toowhich you want hello user toohave access.</span></span> <span data-ttu-id="0438e-274">Till exempel om du har data som lagras med en partitionsnyckel för geografiska tillstånd, kan du ge någon åtkomst toojust hello data för California.</span><span class="sxs-lookup"><span data-stu-id="0438e-274">For example, if you have data stored with a partition key of geographical state, you could give someone access toojust hello data for California.</span></span>

<span data-ttu-id="0438e-275">Ett annat exempel är kan du ge en SAS-token som gör det möjligt toowrite poster tooa kö för ett webbprogram och ger en arbetare rollen programmet en SAS-token tooget meddelanden från hello kö och bearbeta dem..</span><span class="sxs-lookup"><span data-stu-id="0438e-275">In another example, you might give a web application a SAS token that enables it toowrite entries tooa queue, and give a worker role application a SAS token tooget messages from hello queue and process them.</span></span> <span data-ttu-id="0438e-276">Eller du kan ge en kund en SAS-token som de kan använda tooupload bilder tooa behållare i Blob Storage och ge en web application behörighet tooread dessa bilder.</span><span class="sxs-lookup"><span data-stu-id="0438e-276">Or you could give one customer a SAS token they can use tooupload pictures tooa container in Blob Storage, and give a web application permission tooread those pictures.</span></span> <span data-ttu-id="0438e-277">I båda fallen finns en uppdelning av säkerhetsskäl – varje program kan få bara hello tillgång som som krävs för att ordna tooperform sina uppgifter.</span><span class="sxs-lookup"><span data-stu-id="0438e-277">In both cases, there is a separation of concerns – each application can be given just hello access that they require in order tooperform their task.</span></span> <span data-ttu-id="0438e-278">Detta är möjligt via hello signaturer för delad åtkomst.</span><span class="sxs-lookup"><span data-stu-id="0438e-278">This is possible through hello use of Shared Access Signatures.</span></span>

#### <a name="why-you-want-toouse-shared-access-signatures"></a><span data-ttu-id="0438e-279">Varför du vill toouse signaturer för delad åtkomst</span><span class="sxs-lookup"><span data-stu-id="0438e-279">Why you want toouse Shared Access Signatures</span></span>
<span data-ttu-id="0438e-280">Varför kan det vara bra toouse en SAS istället för att bara ge ut din lagringskontonyckel som är mycket enklare?</span><span class="sxs-lookup"><span data-stu-id="0438e-280">Why would you want toouse an SAS instead of just giving out your storage account key, which is so much easier?</span></span> <span data-ttu-id="0438e-281">Lämnar ut din lagringskontonyckel är som att dela hello nycklar kungarikets din lagring.</span><span class="sxs-lookup"><span data-stu-id="0438e-281">Giving out your storage account key is like sharing hello keys of your storage kingdom.</span></span> <span data-ttu-id="0438e-282">Fullständig åtkomst beviljas.</span><span class="sxs-lookup"><span data-stu-id="0438e-282">It grants complete access.</span></span> <span data-ttu-id="0438e-283">Någon kan använda dina nycklar och överföra sina hela musik biblioteket tooyour storage-konto.</span><span class="sxs-lookup"><span data-stu-id="0438e-283">Someone could use your keys and upload their entire music library tooyour storage account.</span></span> <span data-ttu-id="0438e-284">De kan även ersätta filerna med virus infekterade versioner eller stjäla dina data.</span><span class="sxs-lookup"><span data-stu-id="0438e-284">They could also replace your files with virus-infected versions, or steal your data.</span></span> <span data-ttu-id="0438e-285">Ge bort obegränsad åtkomst tooyour storage-konto är något som inte bör noga.</span><span class="sxs-lookup"><span data-stu-id="0438e-285">Giving away unlimited access tooyour storage account is something that should not be taken lightly.</span></span>

<span data-ttu-id="0438e-286">Du kan ge bara hello behörigheter som krävs för en begränsad tidsperiod på en klient med signaturer för delad åtkomst.</span><span class="sxs-lookup"><span data-stu-id="0438e-286">With Shared Access Signatures, you can give a client just hello permissions required for a limited amount of time.</span></span> <span data-ttu-id="0438e-287">Till exempel om någon laddar upp en blob tooyour konto, beviljar du dem skrivbehörighet för bara tillräckligt med tid tooupload hello blob (beroende på hello storleken på hello blob naturligtvis).</span><span class="sxs-lookup"><span data-stu-id="0438e-287">For example, if someone is uploading a blob tooyour account, you can grant them write access for just enough time tooupload hello blob (depending on hello size of hello blob, of course).</span></span> <span data-ttu-id="0438e-288">Och om du ändrar dig kan du återkalla den åtkomsten.</span><span class="sxs-lookup"><span data-stu-id="0438e-288">And if you change your mind, you can revoke that access.</span></span>

<span data-ttu-id="0438e-289">Dessutom kan du ange att begäranden som görs med hjälp av en SAS är begränsad tooa vissa IP-adress eller IP-adressintervall externa tooAzure.</span><span class="sxs-lookup"><span data-stu-id="0438e-289">Additionally, you can specify that requests made using a SAS are restricted tooa certain IP address or IP address range external tooAzure.</span></span> <span data-ttu-id="0438e-290">Du kan också kräva att begäranden som görs med ett visst protokoll (HTTPS eller HTTP/HTTPS).</span><span class="sxs-lookup"><span data-stu-id="0438e-290">You can also require that requests are made using a specific protocol (HTTPS or HTTP/HTTPS).</span></span> <span data-ttu-id="0438e-291">Det innebär att om du bara vill tooallow HTTPS-trafik, du kan ange hello krävs protokollet tooHTTPS och HTTP-trafik blockeras.</span><span class="sxs-lookup"><span data-stu-id="0438e-291">This means if you only want tooallow HTTPS traffic, you can set hello required protocol tooHTTPS only, and HTTP traffic will be blocked.</span></span>

#### <a name="definition-of-a-shared-access-signature"></a><span data-ttu-id="0438e-292">Definition av en signatur för delad åtkomst</span><span class="sxs-lookup"><span data-stu-id="0438e-292">Definition of a Shared Access Signature</span></span>
<span data-ttu-id="0438e-293">En signatur för delad åtkomst är en uppsättning frågeparametrar läggs toohello URL som pekar på hello resurs</span><span class="sxs-lookup"><span data-stu-id="0438e-293">A Shared Access Signature is a set of query parameters appended toohello URL pointing at hello resource</span></span>

<span data-ttu-id="0438e-294">som innehåller information om hello åtkomst tillåts och hello tidsperiod för vilken hello åtkomst är tillåten.</span><span class="sxs-lookup"><span data-stu-id="0438e-294">that provides information about hello access allowed and hello length of time for which hello access is permitted.</span></span> <span data-ttu-id="0438e-295">Här är ett exempel. den här URI ger läsbehörighet tooa blob för fem minuter.</span><span class="sxs-lookup"><span data-stu-id="0438e-295">Here is an example; this URI provides read access tooa blob for five minutes.</span></span> <span data-ttu-id="0438e-296">Observera att SAS fråga parametrar måste vara URL-kodade, till exempel % 3A för kolon (:) eller % 20 för ett blanksteg.</span><span class="sxs-lookup"><span data-stu-id="0438e-296">Note that SAS query parameters must be URL Encoded, such as %3A for colon (:) or %20 for a space.</span></span>

```
http://mystorage.blob.core.windows.net/mycontainer/myblob.txt (URL toohello blob)
?sv=2015-04-05 (storage service version)
&st=2015-12-10T22%3A18%3A26Z (start time, in UTC time and URL encoded)
&se=2015-12-10T22%3A23%3A26Z (end time, in UTC time and URL encoded)
&sr=b (resource is a blob)
&sp=r (read access)
&sip=168.1.5.60-168.1.5.70 (requests can only come from this range of IP addresses)
&spr=https (only allow HTTPS requests)
&sig=Z%2FRHIX5Xcg0Mq2rqI3OlWTjEg2tYkboXr1P9ZUXDtkk%3D (signature used for hello authentication of hello SAS)
```

#### <a name="how-hello-shared-access-signature-is-authenticated-by-hello-azure-storage-service"></a><span data-ttu-id="0438e-297">Hur hello signatur för delad åtkomst autentiseras av hello Azure Storage-tjänst</span><span class="sxs-lookup"><span data-stu-id="0438e-297">How hello Shared Access Signature is authenticated by hello Azure Storage Service</span></span>
<span data-ttu-id="0438e-298">När hello storage-tjänst tar emot hello begäran det hello indatafrågan parametrar och skapar en signatur hello med samma metod som hello anropande programmet.</span><span class="sxs-lookup"><span data-stu-id="0438e-298">When hello storage service receives hello request, it takes hello input query parameters and creates a signature using hello same method as hello calling program.</span></span> <span data-ttu-id="0438e-299">Den jämför sedan hello två signaturer.</span><span class="sxs-lookup"><span data-stu-id="0438e-299">It then compares hello two signatures.</span></span> <span data-ttu-id="0438e-300">Om de accepterar sedan hello lagringstjänsten Kontrollera hello storage service version toomake att den är giltig, kontrollera att hello aktuellt datum och tid är inom hello angivet fönster, se till att hello åtkomst begärd motsvarar toohello begäran, osv.</span><span class="sxs-lookup"><span data-stu-id="0438e-300">If they agree, then hello storage service can check hello storage service version toomake sure it's valid, verify that hello current date and time are within hello specified window, make sure hello access requested corresponds toohello request made, etc.</span></span>

<span data-ttu-id="0438e-301">Till exempel med våra URL misslyckas om du hello URL: en pekar tooa fil i stället för en blob denna begäran eftersom den anger att hello signatur för delad åtkomst är för en blob.</span><span class="sxs-lookup"><span data-stu-id="0438e-301">For example, with our URL above, if hello URL was pointing tooa file instead of a blob, this request would fail because it specifies that hello Shared Access Signature is for a blob.</span></span> <span data-ttu-id="0438e-302">Om hello REST-kommando som anropas var tooupdate en blob kan misslyckas det eftersom hello signatur för delad åtkomst anger att bara läsbehörighet tillåts.</span><span class="sxs-lookup"><span data-stu-id="0438e-302">If hello REST command being called was tooupdate a blob, it would fail because hello Shared Access Signature specifies that only read access is permitted.</span></span>

#### <a name="types-of-shared-access-signatures"></a><span data-ttu-id="0438e-303">Typer av signaturer för delad åtkomst</span><span class="sxs-lookup"><span data-stu-id="0438e-303">Types of Shared Access Signatures</span></span>
* <span data-ttu-id="0438e-304">En tjänstnivå SAS kan vara används tooaccess specifika resurser i ett lagringskonto.</span><span class="sxs-lookup"><span data-stu-id="0438e-304">A service-level SAS can be used tooaccess specific resources in a storage account.</span></span> <span data-ttu-id="0438e-305">Några exempel på detta hämtar en lista över blobbar i en behållare, hämtar en blob, uppdaterar en entitet i en tabell, lägga till meddelanden tooa kön eller ladda upp en fil tooa filresurs.</span><span class="sxs-lookup"><span data-stu-id="0438e-305">Some examples of this are retrieving a list of blobs in a container, downloading a blob, updating an entity in a table, adding messages tooa queue or uploading a file tooa file share.</span></span>
* <span data-ttu-id="0438e-306">En kontonivå SAS kan vara att använda tooaccess allt som en tjänstnivå SAS kan användas för.</span><span class="sxs-lookup"><span data-stu-id="0438e-306">An account-level SAS can be used tooaccess anything that a service-level SAS can be used for.</span></span> <span data-ttu-id="0438e-307">Dessutom kan den ge alternativ tooresources som inte tillåts med en tjänstnivå SAS, till exempel hello möjlighet toocreate behållare, tabeller, köer och filresurser.</span><span class="sxs-lookup"><span data-stu-id="0438e-307">Additionally, it can give options tooresources that are not permitted with a service-level SAS, such as hello ability toocreate containers, tables, queues, and file shares.</span></span> <span data-ttu-id="0438e-308">Du kan också ange toomultiple tjänster på samma gång.</span><span class="sxs-lookup"><span data-stu-id="0438e-308">You can also specify access toomultiple services at once.</span></span> <span data-ttu-id="0438e-309">Till exempel du kanske kan ge någon åtkomst tooboth blobbar och filer på ditt lagringskonto.</span><span class="sxs-lookup"><span data-stu-id="0438e-309">For example, you might give someone access tooboth blobs and files in your storage account.</span></span>

#### <a name="creating-an-sas-uri"></a><span data-ttu-id="0438e-310">Skapa en SAS-URI</span><span class="sxs-lookup"><span data-stu-id="0438e-310">Creating an SAS URI</span></span>
1. <span data-ttu-id="0438e-311">Du kan skapa en ad hoc-URI för begäran, definiera frågeparametrar Hej varje gång.</span><span class="sxs-lookup"><span data-stu-id="0438e-311">You can create an ad hoc URI on demand, defining all of hello query parameters each time.</span></span>

   <span data-ttu-id="0438e-312">Detta är mycket flexibelt, men om du har en logisk uppsättning parametrar som liknar varje gång med hjälp av en åtkomstprincip för lagras är en bättre uppfattning.</span><span class="sxs-lookup"><span data-stu-id="0438e-312">This is really flexible, but if you have a logical set of parameters that are similar each time, using a Stored Access Policy is a better idea.</span></span>
2. <span data-ttu-id="0438e-313">Du kan skapa en åtkomstprincip lagras för en hela behållaren, filresurser, tabell eller kön.</span><span class="sxs-lookup"><span data-stu-id="0438e-313">You can create a Stored Access Policy for an entire container, file share, table, or queue.</span></span> <span data-ttu-id="0438e-314">Du kan sedan använda den som hello bas för hello SAS-URI som du skapar.</span><span class="sxs-lookup"><span data-stu-id="0438e-314">Then you can use this as hello basis for hello SAS URIs you create.</span></span> <span data-ttu-id="0438e-315">Behörigheter som baseras på lagras åtkomstprinciper kan enkelt återkallas.</span><span class="sxs-lookup"><span data-stu-id="0438e-315">Permissions based on Stored Access Policies can be easily revoked.</span></span> <span data-ttu-id="0438e-316">Du kan ha upp too5 principer som definierats för varje behållare, kön, tabell eller filresurs.</span><span class="sxs-lookup"><span data-stu-id="0438e-316">You can have up too5 policies defined on each container, queue, table, or file share.</span></span>

   <span data-ttu-id="0438e-317">Till exempel om du tänkte toohave många läsa hello blobbar i en specifik behållare, du kan skapa en åtkomstprincip för lagras som säger ”ge läsbehörighet” och andra inställningar som kommer att vara hello samma varje gång.</span><span class="sxs-lookup"><span data-stu-id="0438e-317">For example, if you were going toohave many people read hello blobs in a specific container, you could create a Stored Access Policy that says "give read access" and any other settings that will be hello same each time.</span></span> <span data-ttu-id="0438e-318">Du kan skapa ett SAS-URI med hello inställningarna för hello lagrat åtkomstprincip och ange hello förfallodatum för datum/tid.</span><span class="sxs-lookup"><span data-stu-id="0438e-318">Then you can create an SAS URI using hello settings of hello Stored Access Policy and specifying hello expiration date/time.</span></span> <span data-ttu-id="0438e-319">hello fördelen med detta är att du inte har toospecify alla hello fråga parametrar varje gång.</span><span class="sxs-lookup"><span data-stu-id="0438e-319">hello advantage of this is that you don't have toospecify all of hello query parameters every time.</span></span>

#### <a name="revocation"></a><span data-ttu-id="0438e-320">Återkallade certifikat</span><span class="sxs-lookup"><span data-stu-id="0438e-320">Revocation</span></span>
<span data-ttu-id="0438e-321">Anta att din SAS har komprometterats eller om du vill toochange den på grund av företagets säkerhet och regelefterlevnad krav.</span><span class="sxs-lookup"><span data-stu-id="0438e-321">Suppose your SAS has been compromised, or you want toochange it because of corporate security or regulatory compliance requirements.</span></span> <span data-ttu-id="0438e-322">Hur du återkalla åtkomst tooa resursen med hjälp av den SAS?</span><span class="sxs-lookup"><span data-stu-id="0438e-322">How do you revoke access tooa resource using that SAS?</span></span> <span data-ttu-id="0438e-323">Det beror på hur du skapar hello SAS-URI.</span><span class="sxs-lookup"><span data-stu-id="0438e-323">It depends on how you created hello SAS URI.</span></span>

<span data-ttu-id="0438e-324">Om du använder ad hoc-URI finns det tre alternativ.</span><span class="sxs-lookup"><span data-stu-id="0438e-324">If you are using ad hoc URI's, you have three options.</span></span> <span data-ttu-id="0438e-325">Du kan utfärda SAS-token med kort giltighetsprinciper och bara vänta hello SAS tooexpire.</span><span class="sxs-lookup"><span data-stu-id="0438e-325">You can issue SAS tokens with short expiration policies and simply wait for hello SAS tooexpire.</span></span> <span data-ttu-id="0438e-326">Du kan byta namn på eller ta bort hello resurs (under förutsättning att hello token är begränsade tooa objekt).</span><span class="sxs-lookup"><span data-stu-id="0438e-326">You can rename or delete hello resource (assuming hello token was scoped tooa single object).</span></span> <span data-ttu-id="0438e-327">Du kan ändra hello lagringskontonycklar.</span><span class="sxs-lookup"><span data-stu-id="0438e-327">You can change hello storage account keys.</span></span> <span data-ttu-id="0438e-328">Det här sista alternativet kan ha stor inverkan, beroende på hur många tjänster använder detta lagringskonto och förmodligen inte något som du vill ha toodo utan lite planering.</span><span class="sxs-lookup"><span data-stu-id="0438e-328">This last option can have a big impact, depending on how many services are using that storage account, and probably isn't something you want toodo without some planning.</span></span>

<span data-ttu-id="0438e-329">Om du använder en SAS som härletts från en lagrad åtkomstprincip du kan ta bort åtkomst genom att återkalla hello lagrat åtkomstprincip – du kan bara ändra den så att den har redan gått ut eller kan du ta bort det helt och hållet.</span><span class="sxs-lookup"><span data-stu-id="0438e-329">If you are using a SAS derived from a Stored Access Policy, you can remove access by revoking hello Stored Access Policy – you can just change it so it has already expired, or you can remove it altogether.</span></span> <span data-ttu-id="0438e-330">Detta träder i kraft omedelbart och upphäver varje SAS som skapats med hjälp av den lagrade åtkomstprincip.</span><span class="sxs-lookup"><span data-stu-id="0438e-330">This takes effect immediately, and invalidates every SAS created using that Stored Access Policy.</span></span> <span data-ttu-id="0438e-331">Uppdatera eller ta bort hello lagras åtkomstprincip kan påverka personer som har åtkomst till den specifika behållare, filresurs, tabell eller kön via SAS men om hello klienter skrivs så att de begär en ny SAS när hello gamla blir ogiltig den här metoden fungerar bra.</span><span class="sxs-lookup"><span data-stu-id="0438e-331">Updating or removing hello Stored Access Policy may impact people accessing that specific container, file share, table, or queue via SAS, but if hello clients are written so they request a new SAS when hello old one becomes invalid, this will work fine.</span></span>

<span data-ttu-id="0438e-332">Eftersom med hjälp av en SAS som härletts från en lagrad åtkomstprincip ger dig använda hello möjlighet toorevoke SAS omedelbart, är hello rekommenderad bästa praxis tooalways lagras åtkomstprinciper när det är möjligt.</span><span class="sxs-lookup"><span data-stu-id="0438e-332">Because using a SAS derived from a Stored Access Policy gives you hello ability toorevoke that SAS immediately, it is hello recommended best practice tooalways use Stored Access Policies when possible.</span></span>

#### <a name="resources"></a><span data-ttu-id="0438e-333">Resurser</span><span class="sxs-lookup"><span data-stu-id="0438e-333">Resources</span></span>
<span data-ttu-id="0438e-334">Mer detaljerad information om hur du använder signaturer för delad åtkomst och lagras åtkomstprinciper, slutfördes med exempel, finns toohello följande artiklar:</span><span class="sxs-lookup"><span data-stu-id="0438e-334">For more detailed information on using Shared Access Signatures and Stored Access Policies, complete with examples, please refer toohello following articles:</span></span>

* <span data-ttu-id="0438e-335">Dessa är hello referensartiklar.</span><span class="sxs-lookup"><span data-stu-id="0438e-335">These are hello reference articles.</span></span>

  * [<span data-ttu-id="0438e-336">Tjänst-SAS</span><span class="sxs-lookup"><span data-stu-id="0438e-336">Service SAS</span></span>](https://msdn.microsoft.com/library/dn140256.aspx)

    <span data-ttu-id="0438e-337">Den här artikeln innehåller exempel på användning av en tjänstnivå SAS med blobbar, Kömeddelanden, tabell intervall och filer.</span><span class="sxs-lookup"><span data-stu-id="0438e-337">This article provides examples of using a service-level SAS with blobs, queue messages, table ranges, and files.</span></span>
  * [<span data-ttu-id="0438e-338">Hur du skapar en tjänst-SAS</span><span class="sxs-lookup"><span data-stu-id="0438e-338">Constructing a service SAS</span></span>](https://msdn.microsoft.com/library/dn140255.aspx)
  * [<span data-ttu-id="0438e-339">Hur du skapar en konto-SAS</span><span class="sxs-lookup"><span data-stu-id="0438e-339">Constructing an account SAS</span></span>](https://msdn.microsoft.com/library/mt584140.aspx)
* <span data-ttu-id="0438e-340">Dessa är självstudier om att använda hello .NET klienten biblioteket toocreate signaturer för delad åtkomst och åtkomstregler lagras.</span><span class="sxs-lookup"><span data-stu-id="0438e-340">These are tutorials for using hello .NET client library toocreate Shared Access Signatures and Stored Access Policies.</span></span>

  * [<span data-ttu-id="0438e-341">Använda signaturer för delad åtkomst (SAS)</span><span class="sxs-lookup"><span data-stu-id="0438e-341">Using Shared Access Signatures (SAS)</span></span>](../storage-dotnet-shared-access-signature-part-1.md)
  * [<span data-ttu-id="0438e-342">Signaturer för delad åtkomst, del 2: Skapa och använda en SAS med hello Blob-tjänsten</span><span class="sxs-lookup"><span data-stu-id="0438e-342">Shared Access Signatures, Part 2: Create and Use a SAS with hello Blob Service</span></span>](../blobs/storage-dotnet-shared-access-signature-part-2.md)

    <span data-ttu-id="0438e-343">Den här artikeln innehåller en förklaring av hello SAS-modellen, exempel på signaturer för delad åtkomst och rekommendationer om bästa praxis för hello använder SAS.</span><span class="sxs-lookup"><span data-stu-id="0438e-343">This article includes an explanation of hello SAS model, examples of Shared Access Signatures, and recommendations for hello best practice use of SAS.</span></span> <span data-ttu-id="0438e-344">Vi beskriver även hello återkallande av hello behörighet.</span><span class="sxs-lookup"><span data-stu-id="0438e-344">Also discussed is hello revocation of hello permission granted.</span></span>
* <span data-ttu-id="0438e-345">Begränsa åtkomst via IP-adress (IP-ACL: er)</span><span class="sxs-lookup"><span data-stu-id="0438e-345">Limiting access by IP Address (IP ACLs)</span></span>

  * [<span data-ttu-id="0438e-346">Vad är en slutpunkt åtkomstkontrollistan (ACL)?</span><span class="sxs-lookup"><span data-stu-id="0438e-346">What is an endpoint Access Control List (ACLs)?</span></span>](../../virtual-network/virtual-networks-acl.md)
  * [<span data-ttu-id="0438e-347">Hur du skapar en tjänst-SAS</span><span class="sxs-lookup"><span data-stu-id="0438e-347">Constructing a Service SAS</span></span>](https://msdn.microsoft.com/library/azure/dn140255.aspx)

    <span data-ttu-id="0438e-348">Detta är hello referensartikeln om principer för servicenivåer SAS; den innehåller ett exempel på IP-ACLing.</span><span class="sxs-lookup"><span data-stu-id="0438e-348">This is hello reference article for service-level SAS; it includes an example of IP ACLing.</span></span>
  * [<span data-ttu-id="0438e-349">Hur du skapar en konto-SAS</span><span class="sxs-lookup"><span data-stu-id="0438e-349">Constructing an Account SAS</span></span>](https://msdn.microsoft.com/library/azure/mt584140.aspx)

    <span data-ttu-id="0438e-350">Detta är hello referensartikeln om principer för kontonivå SAS; den innehåller ett exempel på IP-ACLing.</span><span class="sxs-lookup"><span data-stu-id="0438e-350">This is hello reference article for account-level SAS; it includes an example of IP ACLing.</span></span>
* <span data-ttu-id="0438e-351">Autentisering</span><span class="sxs-lookup"><span data-stu-id="0438e-351">Authentication</span></span>

  * [<span data-ttu-id="0438e-352">Autentisering för hello Azure Storage-tjänster</span><span class="sxs-lookup"><span data-stu-id="0438e-352">Authentication for hello Azure Storage Services</span></span>](https://msdn.microsoft.com/library/azure/dd179428.aspx)
* <span data-ttu-id="0438e-353">Signaturer för delad åtkomst komma igång Självstudier</span><span class="sxs-lookup"><span data-stu-id="0438e-353">Shared Access Signatures Getting Started Tutorial</span></span>

  * [<span data-ttu-id="0438e-354">SAS komma igång-Självstudier</span><span class="sxs-lookup"><span data-stu-id="0438e-354">SAS Getting Started Tutorial</span></span>](https://github.com/Azure-Samples/storage-dotnet-sas-getting-started)

## <a name="encryption-in-transit"></a><span data-ttu-id="0438e-355">Kryptering under överföring</span><span class="sxs-lookup"><span data-stu-id="0438e-355">Encryption in Transit</span></span>
### <a name="transport-level-encryption--using-https"></a><span data-ttu-id="0438e-356">Transportnivå kryptering – med hjälp av HTTPS</span><span class="sxs-lookup"><span data-stu-id="0438e-356">Transport-Level Encryption – Using HTTPS</span></span>
<span data-ttu-id="0438e-357">Ytterligare ett steg som du bör vidta tooensure hello säkerheten för dina Azure Storage-data är tooencrypt hello data mellan hello-klienten och Azure Storage.</span><span class="sxs-lookup"><span data-stu-id="0438e-357">Another step you should take tooensure hello security of your Azure Storage data is tooencrypt hello data between hello client and Azure Storage.</span></span> <span data-ttu-id="0438e-358">hello första rekommenderas att tooalways använda hello [HTTPS](https://en.wikipedia.org/wiki/HTTPS) protokollet, vilket garanterar säker kommunikation över hello offentliga Internet.</span><span class="sxs-lookup"><span data-stu-id="0438e-358">hello first recommendation is tooalways use hello [HTTPS](https://en.wikipedia.org/wiki/HTTPS) protocol, which ensures secure communication over hello public Internet.</span></span>

<span data-ttu-id="0438e-359">toohave en säker kommunikationskanal du bör alltid använda HTTPS när anropar hello REST API: er eller få åtkomst till objekt i lagringen.</span><span class="sxs-lookup"><span data-stu-id="0438e-359">toohave a secure communication channel, you should always use HTTPS when calling hello REST APIs or accessing objects in storage.</span></span> <span data-ttu-id="0438e-360">Dessutom **signaturer för delad åtkomst**, som kan vara används toodelegate komma åt tooAzure lagringsobjekt får innehålla en alternativet toospecify som endast hello HTTPS-protokollet kan användas när du använder signaturer för delad åtkomst, att säkerställa att vem som helst Skicka länkar med SAS-token används hello rätt protokoll.</span><span class="sxs-lookup"><span data-stu-id="0438e-360">Also, **Shared Access Signatures**, which can be used toodelegate access tooAzure Storage objects, include an option toospecify that only hello HTTPS protocol can be used when using Shared Access Signatures, ensuring that anybody sending out links with SAS tokens will use hello proper protocol.</span></span>

<span data-ttu-id="0438e-361">Du kan tillämpa hello HTTPS används när du anropar hello REST API: er tooaccess objekt i storage-konton genom att aktivera [säker överföring krävs](../storage-require-secure-transfer.md) för hello storage-konto.</span><span class="sxs-lookup"><span data-stu-id="0438e-361">You can enforce hello use of HTTPS when calling hello REST APIs tooaccess objects in storage accounts by enabling [Secure transfer required](../storage-require-secure-transfer.md) for hello storage account.</span></span> <span data-ttu-id="0438e-362">Anslutningar som använder HTTP ska avvisas när det här är aktiverat.</span><span class="sxs-lookup"><span data-stu-id="0438e-362">Connections using HTTP will be refused once this is enabled.</span></span>

### <a name="using-encryption-during-transit-with-azure-file-shares"></a><span data-ttu-id="0438e-363">Med hjälp av kryptering under överföring med Azure-filresurser</span><span class="sxs-lookup"><span data-stu-id="0438e-363">Using encryption during transit with Azure File shares</span></span>
<span data-ttu-id="0438e-364">Azure File storage stöder HTTPS när du använder hello REST-API, men är vanliga som en SMB filresurs kopplad tooa VM.</span><span class="sxs-lookup"><span data-stu-id="0438e-364">Azure File storage supports HTTPS when using hello REST API, but is more commonly used as an SMB file share attached tooa VM.</span></span> <span data-ttu-id="0438e-365">SMB 2.1 stöder inte kryptering, så anslutningar är bara tillåtna inom hello samma region i Azure.</span><span class="sxs-lookup"><span data-stu-id="0438e-365">SMB 2.1 does not support encryption, so connections are only allowed within hello same region in Azure.</span></span> <span data-ttu-id="0438e-366">Dock SMB 3.0 stöder kryptering, och den är tillgänglig i Windows Server 2012 R2, Windows 8, Windows 8.1 och Windows 10, vilket gör att flera region åtkomst och även åtkomst på hello skrivbordet.</span><span class="sxs-lookup"><span data-stu-id="0438e-366">However, SMB 3.0 supports encryption, and it's available in Windows Server 2012 R2, Windows 8, Windows 8.1, and Windows 10, allowing cross-region access and even access on hello desktop.</span></span>

<span data-ttu-id="0438e-367">Observera att medan Azure-filresurser kan användas med Unix, hello Linux SMB-klienten ännu inte stöder kryptering, så åtkomst tillåts endast i en Azure-region.</span><span class="sxs-lookup"><span data-stu-id="0438e-367">Note that while Azure File shares can be used with Unix, hello Linux SMB client does not yet support encryption, so access is only allowed within an Azure region.</span></span> <span data-ttu-id="0438e-368">Stöd för kryptering för Linux finns på hello översikt av Linux-utvecklare som ansvarar för SMB-funktioner.</span><span class="sxs-lookup"><span data-stu-id="0438e-368">Encryption support for Linux is on hello roadmap of Linux developers responsible for SMB functionality.</span></span> <span data-ttu-id="0438e-369">När de lägger till kryptering har du samma möjlighet för åtkomst till en Azure-filresurs på Linux som du gör för Windows hello.</span><span class="sxs-lookup"><span data-stu-id="0438e-369">When they add encryption, you will have hello same ability for accessing an Azure File share on Linux as you do for Windows.</span></span>

<span data-ttu-id="0438e-370">Du kan tillämpa hello användning av kryptering med hello Azure Files tjänsten genom att aktivera [säker överföring krävs](../storage-require-secure-transfer.md) för hello storage-konto.</span><span class="sxs-lookup"><span data-stu-id="0438e-370">You can enforce hello use of encryption with hello Azure Files service by enabling [Secure transfer required](../storage-require-secure-transfer.md) for hello storage account.</span></span> <span data-ttu-id="0438e-371">Om du använder hello REST API: er, HTTPs krävs.</span><span class="sxs-lookup"><span data-stu-id="0438e-371">If using hello REST APIs, HTTPs is required.</span></span> <span data-ttu-id="0438e-372">För SMB, kan endast SMB-anslutningar som stöder kryptering ansluta.</span><span class="sxs-lookup"><span data-stu-id="0438e-372">For SMB, only SMB connections that support encryption will connect successfully.</span></span>

#### <a name="resources"></a><span data-ttu-id="0438e-373">Resurser</span><span class="sxs-lookup"><span data-stu-id="0438e-373">Resources</span></span>
* [<span data-ttu-id="0438e-374">Hur toouse Azure File storage med Linux</span><span class="sxs-lookup"><span data-stu-id="0438e-374">How toouse Azure File storage with Linux</span></span>](../storage-how-to-use-files-linux.md)

  <span data-ttu-id="0438e-375">Den här artikeln visar hur toomount en Azure-fil för att dela på en Linux-system och överför/hämta filer.</span><span class="sxs-lookup"><span data-stu-id="0438e-375">This article shows how toomount an Azure File share on a Linux system and upload/download files.</span></span>
* [<span data-ttu-id="0438e-376">Komma igång med Azure File Storage i Windows</span><span class="sxs-lookup"><span data-stu-id="0438e-376">Get started with Azure File storage on Windows</span></span>](../storage-dotnet-how-to-use-files.md)

  <span data-ttu-id="0438e-377">Den här artikeln ger en översikt över Azure-filresurser och hur toomount och använda dem med PowerShell och .NET.</span><span class="sxs-lookup"><span data-stu-id="0438e-377">This article gives an overview of Azure File shares and how toomount and use them using PowerShell and .NET.</span></span>
* [<span data-ttu-id="0438e-378">Inuti Azure File Storage</span><span class="sxs-lookup"><span data-stu-id="0438e-378">Inside Azure File storage</span></span>](https://azure.microsoft.com/blog/inside-azure-file-storage/)

  <span data-ttu-id="0438e-379">Den här artikeln annonserar hello allmän tillgänglighet för Azure File storage och ger teknisk information om hello SMB 3.0-kryptering.</span><span class="sxs-lookup"><span data-stu-id="0438e-379">This article announces hello general availability of Azure File storage and provides technical details about hello SMB 3.0 encryption.</span></span>

### <a name="using-client-side-encryption-toosecure-data-that-you-send-toostorage"></a><span data-ttu-id="0438e-380">Med hjälp av klientsidan kryptering toosecure data som du skickar toostorage</span><span class="sxs-lookup"><span data-stu-id="0438e-380">Using Client-side encryption toosecure data that you send toostorage</span></span>
<span data-ttu-id="0438e-381">Ett annat alternativ som hjälper dig att se till att dina data är säkra medan de överförs mellan ett klientprogram och lagring är kryptering på klientsidan.</span><span class="sxs-lookup"><span data-stu-id="0438e-381">Another option that helps you ensure that your data is secure while being transferred between a client application and Storage is Client-side Encryption.</span></span> <span data-ttu-id="0438e-382">hello data krypteras innan de överförs till Azure Storage.</span><span class="sxs-lookup"><span data-stu-id="0438e-382">hello data is encrypted before being transferred into Azure Storage.</span></span> <span data-ttu-id="0438e-383">När du hämtar hello data från Azure Storage, dekrypteras hello data när den tas emot på klientsidan för hello.</span><span class="sxs-lookup"><span data-stu-id="0438e-383">When retrieving hello data from Azure Storage, hello data is decrypted after it is received on hello client side.</span></span> <span data-ttu-id="0438e-384">Även om hello krypteras data gå över hello överföring, rekommenderar vi att du också använda HTTPS, eftersom den har dataintegritetskontroller inbyggda som minimera nätverksfel påverkar hello integriteten hos hello data.</span><span class="sxs-lookup"><span data-stu-id="0438e-384">Even though hello data is encrypted going across hello wire, we recommend that you also use HTTPS, as it has data integrity checks built in which help mitigate network errors affecting hello integrity of hello data.</span></span>

<span data-ttu-id="0438e-385">Klientsidans kryptering är också en metod för att kryptera data i vila, som hello data lagras i krypterad form.</span><span class="sxs-lookup"><span data-stu-id="0438e-385">Client-side encryption is also a method for encrypting your data at rest, as hello data is stored in its encrypted form.</span></span> <span data-ttu-id="0438e-386">Lär dig om detta i detalj i avsnittet hello på [kryptering i vila](#encryption-at-rest).</span><span class="sxs-lookup"><span data-stu-id="0438e-386">We'll talk about this in more detail in hello section on [Encryption at Rest](#encryption-at-rest).</span></span>

## <a name="encryption-at-rest"></a><span data-ttu-id="0438e-387">Kryptering i vila</span><span class="sxs-lookup"><span data-stu-id="0438e-387">Encryption at Rest</span></span>
<span data-ttu-id="0438e-388">Det finns tre Azure-funktioner som tillhandahåller kryptering i vila.</span><span class="sxs-lookup"><span data-stu-id="0438e-388">There are three Azure features that provide encryption at rest.</span></span> <span data-ttu-id="0438e-389">Azure Disk Encryption är används tooencrypt hello OS- och datadiskar i IaaS-virtuella datorer.</span><span class="sxs-lookup"><span data-stu-id="0438e-389">Azure Disk Encryption is used tooencrypt hello OS and data disks in IaaS Virtual Machines.</span></span> <span data-ttu-id="0438e-390">Hej andra två – klientsidan kryptering och SSE – är både används tooencrypt data i Azure Storage.</span><span class="sxs-lookup"><span data-stu-id="0438e-390">hello other two – Client-side Encryption and SSE – are both used tooencrypt data in Azure Storage.</span></span> <span data-ttu-id="0438e-391">Vi tittar på var och en av dessa, gör en jämförelse och se när var och en kan användas.</span><span class="sxs-lookup"><span data-stu-id="0438e-391">Let's look at each of these, and then do a comparison and see when each one can be used.</span></span>

<span data-ttu-id="0438e-392">Medan du kan använda Client side Encryption tooencrypt hello data under överföring (som lagras också i krypterad form i lagring) måste kanske du föredrar toosimply Använd HTTPS under överföringen hello och har för hello data toobe krypteras automatiskt när det är lagras.</span><span class="sxs-lookup"><span data-stu-id="0438e-392">While you can use Client-side Encryption tooencrypt hello data in transit (which is also stored in its encrypted form in Storage), you may prefer toosimply use HTTPS during hello transfer, and have some way for hello data toobe automatically encrypted when it is stored.</span></span> <span data-ttu-id="0438e-393">Det finns två sätt toodo detta--Azure Disk Encryption och SSE.</span><span class="sxs-lookup"><span data-stu-id="0438e-393">There are two ways toodo this -- Azure Disk Encryption and SSE.</span></span> <span data-ttu-id="0438e-394">En används toodirectly kryptera hello data på Operativsystemet och datadiskarna som används av virtuella datorer och hello andra används tooencrypt data skrivs tooAzure Blob Storage.</span><span class="sxs-lookup"><span data-stu-id="0438e-394">One is used toodirectly encrypt hello data on OS and data disks used by VMs, and hello other is used tooencrypt data written tooAzure Blob Storage.</span></span>

### <a name="storage-service-encryption-sse"></a><span data-ttu-id="0438e-395">Storage Service-kryptering (SSE)</span><span class="sxs-lookup"><span data-stu-id="0438e-395">Storage Service Encryption (SSE)</span></span>
<span data-ttu-id="0438e-396">SSE kan toorequest att hello lagringstjänsten automatiskt kryptera hello data när du skriver den tooAzure lagring.</span><span class="sxs-lookup"><span data-stu-id="0438e-396">SSE allows you toorequest that hello storage service automatically encrypt hello data when writing it tooAzure Storage.</span></span> <span data-ttu-id="0438e-397">När du har läst hello data från Azure Storage, kommer det dekrypteras av hello lagringstjänsten innan de returneras.</span><span class="sxs-lookup"><span data-stu-id="0438e-397">When you read hello data from Azure Storage, it will be decrypted by hello storage service before being returned.</span></span> <span data-ttu-id="0438e-398">Detta gör att du toosecure dina data utan att behöva toomodify code eller lägga till kod tooany program.</span><span class="sxs-lookup"><span data-stu-id="0438e-398">This enables you toosecure your data without having toomodify code or add code tooany applications.</span></span>

<span data-ttu-id="0438e-399">Det här är en inställning som gäller toohello hela lagringskontot.</span><span class="sxs-lookup"><span data-stu-id="0438e-399">This is a setting that applies toohello whole storage account.</span></span> <span data-ttu-id="0438e-400">Du kan aktivera och inaktivera den här funktionen genom att ändra hello hello inställningens värde.</span><span class="sxs-lookup"><span data-stu-id="0438e-400">You can enable and disable this feature by changing hello value of hello setting.</span></span> <span data-ttu-id="0438e-401">toodo, du kan använda hello Azure-portalen PowerShell hello Azure CLI, hello REST-API för Storage-Provider eller hello Storage-klientbibliotek för .NET.</span><span class="sxs-lookup"><span data-stu-id="0438e-401">toodo this, you can use hello Azure portal, PowerShell, hello Azure CLI, hello Storage Resource Provider REST API, or hello .NET Storage Client Library.</span></span> <span data-ttu-id="0438e-402">SSE är inaktiverat som standard.</span><span class="sxs-lookup"><span data-stu-id="0438e-402">By default, SSE is turned off.</span></span>

<span data-ttu-id="0438e-403">För tillfället hanteras hello nycklar som används för kryptering av hello av Microsoft.</span><span class="sxs-lookup"><span data-stu-id="0438e-403">At this time, hello keys used for hello encryption are managed by Microsoft.</span></span> <span data-ttu-id="0438e-404">Vi skapa hello nycklar ursprungligen och hantera hello säker lagring av hello nycklar samt hello reguljära rotation som definieras av intern Microsoft-princip.</span><span class="sxs-lookup"><span data-stu-id="0438e-404">We generate hello keys originally, and manage hello secure storage of hello keys as well as hello regular rotation as defined by internal Microsoft policy.</span></span> <span data-ttu-id="0438e-405">I framtida hello, kommer du få hello möjlighet toomanage era egna krypteringsnycklar och och ange en migreringssökväg till från Microsoft-hanterad nycklar toocustomer-hanterade nycklar.</span><span class="sxs-lookup"><span data-stu-id="0438e-405">In hello future, you will get hello ability toomanage your own encryption keys, and provide a migration path from Microsoft-managed keys toocustomer-managed keys.</span></span>

<span data-ttu-id="0438e-406">Den här funktionen är tillgänglig för Standard- och Premium-lagring konton som skapats med hjälp av hello Resource Manager-modellen.</span><span class="sxs-lookup"><span data-stu-id="0438e-406">This feature is available for Standard and Premium Storage accounts created using hello Resource Manager deployment model.</span></span> <span data-ttu-id="0438e-407">SSE gäller endast tooblock blobbar, sidblobar, och tilläggsblobar.</span><span class="sxs-lookup"><span data-stu-id="0438e-407">SSE applies only tooblock blobs, page blobs, and append blobs.</span></span> <span data-ttu-id="0438e-408">hello krypteras andra typer av data, inklusive tabeller, köer och filer, inte.</span><span class="sxs-lookup"><span data-stu-id="0438e-408">hello other types of data, including tables, queues, and files, will not be encrypted.</span></span>

<span data-ttu-id="0438e-409">Data krypteras endast när SSE är aktiverat och hello data skrivs tooBlob lagring.</span><span class="sxs-lookup"><span data-stu-id="0438e-409">Data is only encrypted when SSE is enabled and hello data is written tooBlob Storage.</span></span> <span data-ttu-id="0438e-410">Aktivera eller inaktivera SSE påverkar inte befintliga data.</span><span class="sxs-lookup"><span data-stu-id="0438e-410">Enabling or disabling SSE does not impact existing data.</span></span> <span data-ttu-id="0438e-411">Med andra ord, när du aktiverar den här kryptering kommer det inte gå tillbaka och kryptera data som finns redan. inte heller att dekryptera hello data som redan finns när du inaktiverar SSE.</span><span class="sxs-lookup"><span data-stu-id="0438e-411">In other words, when you enable this encryption, it will not go back and encrypt data that already exists; nor will it decrypt hello data that already exists when you disable SSE.</span></span>

<span data-ttu-id="0438e-412">Om du vill toouse den här funktionen med ett klassiskt storage-konto kan du skapa ett nytt lagringskonto för hanteraren för filserverresurser och använder AzCopy toocopy hello data toohello nytt konto.</span><span class="sxs-lookup"><span data-stu-id="0438e-412">If you want toouse this feature with a Classic storage account, you can create a new Resource Manager storage account and use AzCopy toocopy hello data toohello new account.</span></span>

### <a name="client-side-encryption"></a><span data-ttu-id="0438e-413">Kryptering på klientsidan</span><span class="sxs-lookup"><span data-stu-id="0438e-413">Client-side Encryption</span></span>
<span data-ttu-id="0438e-414">Kryptering på klientsidan nämndes när du ska diskutera hello kryptering av hello data under överföringen.</span><span class="sxs-lookup"><span data-stu-id="0438e-414">We mentioned client-side encryption when discussing hello encryption of hello data in transit.</span></span> <span data-ttu-id="0438e-415">Den här funktionen kan du tooprogrammatically kryptera data i klientprogram innan den skickas över hello överföring toobe skrivs tooAzure lagring och tooprogrammatically dekryptera dina data efter hämtning från Azure Storage.</span><span class="sxs-lookup"><span data-stu-id="0438e-415">This feature allows you tooprogrammatically encrypt your data in a client application before sending it across hello wire toobe written tooAzure Storage, and tooprogrammatically decrypt your data after retrieving it from Azure Storage.</span></span>

<span data-ttu-id="0438e-416">Detta tillhandahåller kryptering under överföring, men det ger också hello-funktionen för kryptering i vila.</span><span class="sxs-lookup"><span data-stu-id="0438e-416">This does provide encryption in transit, but it also provides hello feature of Encryption at Rest.</span></span> <span data-ttu-id="0438e-417">Observera att även om hello data krypteras under överföringen, vi rekommenderar ändå med hjälp av HTTPS tootake nytta av hello inbyggda dataintegritet kontrollerar som minimera nätverksfel påverkar hello integriteten hos hello data.</span><span class="sxs-lookup"><span data-stu-id="0438e-417">Note that although hello data is encrypted in transit, we still recommend using HTTPS tootake advantage of hello built-in data integrity checks which help mitigate network errors affecting hello integrity of hello data.</span></span>

<span data-ttu-id="0438e-418">Ett exempel på där du kan använda detta är om du har ett program som lagrar blobbar och hämtar BLOB och du vill att hello program och data toobe så säkert som möjligt.</span><span class="sxs-lookup"><span data-stu-id="0438e-418">An example of where you might use this is if you have a web application that stores blobs and retrieves blobs, and you want hello application and data toobe as secure as possible.</span></span> <span data-ttu-id="0438e-419">I så fall använder du kryptering på klientsidan.</span><span class="sxs-lookup"><span data-stu-id="0438e-419">In that case, you would use client-side encryption.</span></span> <span data-ttu-id="0438e-420">hello trafik mellan hello-klienten och hello Azure Blob-tjänsten innehåller hello krypterade resurs och ingen kan tolka hello data under överföringen och fylla i ditt privata blobbar.</span><span class="sxs-lookup"><span data-stu-id="0438e-420">hello traffic between hello client and hello Azure Blob Service contains hello encrypted resource, and nobody can interpret hello data in transit and reconstitute it into your private blobs.</span></span>

<span data-ttu-id="0438e-421">Kryptering på klientsidan är inbyggd i hello Java och hello .NET lagringsklientbiblioteken, som i sin tur använder hello Azure Key Vault API: er, vilket gör det ganska enkelt för du tooimplement.</span><span class="sxs-lookup"><span data-stu-id="0438e-421">Client-side encryption is built into hello Java and hello .NET storage client libraries, which in turn use hello Azure Key Vault APIs, making it pretty easy for you tooimplement.</span></span> <span data-ttu-id="0438e-422">hello-processen för att kryptera och dekryptera data hello använder hello kuvert teknik och lagrar metadata som används av hello kryptering i varje lagringsobjekt.</span><span class="sxs-lookup"><span data-stu-id="0438e-422">hello process of encrypting and decrypting hello data uses hello envelope technique, and stores metadata used by hello encryption in each storage object.</span></span> <span data-ttu-id="0438e-423">Till exempel för BLOB, lagras den i hello blob-metadata, medan för köer, läggs tooeach kömeddelande.</span><span class="sxs-lookup"><span data-stu-id="0438e-423">For example, for blobs, it stores it in hello blob metadata, while for queues, it adds it tooeach queue message.</span></span>

<span data-ttu-id="0438e-424">Du kan generera och hantera egna krypteringsnycklar för hello kryptering själva.</span><span class="sxs-lookup"><span data-stu-id="0438e-424">For hello encryption itself, you can generate and manage your own encryption keys.</span></span> <span data-ttu-id="0438e-425">Du kan också använda nycklar som genereras av hello Azure Storage-klientbibliotek eller du kan ha hello Azure Key Vault generera hello nycklar.</span><span class="sxs-lookup"><span data-stu-id="0438e-425">You can also use keys generated by hello Azure Storage Client Library, or you can have hello Azure Key Vault generate hello keys.</span></span> <span data-ttu-id="0438e-426">Du kan lagra krypteringsnycklar i din lokala lagring eller du kan lagra dem i en Azure Key Vault.</span><span class="sxs-lookup"><span data-stu-id="0438e-426">You can store your encryption keys in your on-premises key storage, or you can store them in an Azure Key Vault.</span></span> <span data-ttu-id="0438e-427">Azure Key Vault kan toogrant åtkomst toohello hemligheter i Azure Key Vault toospecific användare med Azure Active Directory.</span><span class="sxs-lookup"><span data-stu-id="0438e-427">Azure Key Vault allows you toogrant access toohello secrets in Azure Key Vault toospecific users using Azure Active Directory.</span></span> <span data-ttu-id="0438e-428">Det innebär att inte bara alla kan läsa hello Azure Key Vault och hämta hello nycklar som du använder för kryptering på klientsidan.</span><span class="sxs-lookup"><span data-stu-id="0438e-428">This means that not just anybody can read hello Azure Key Vault and retrieve hello keys you're using for client-side encryption.</span></span>

#### <a name="resources"></a><span data-ttu-id="0438e-429">Resurser</span><span class="sxs-lookup"><span data-stu-id="0438e-429">Resources</span></span>
* [<span data-ttu-id="0438e-430">Kryptera och dekryptera blobbar i Microsoft Azure Storage med hjälp av Azure Key Vault</span><span class="sxs-lookup"><span data-stu-id="0438e-430">Encrypt and decrypt blobs in Microsoft Azure Storage using Azure Key Vault</span></span>](../blobs/storage-encrypt-decrypt-blobs-key-vault.md)

  <span data-ttu-id="0438e-431">Den här artikeln visar hur toouse klientsidan kryptering med Azure Key Vault, inklusive hur toocreate hello KEK och lagra den på hello valvet med hjälp av PowerShell.</span><span class="sxs-lookup"><span data-stu-id="0438e-431">This article shows how toouse client-side encryption with Azure Key Vault, including how toocreate hello KEK and store it in hello vault using PowerShell.</span></span>
* [<span data-ttu-id="0438e-432">Kryptering på klientsidan och Azure Key Vault för Microsoft Azure Storage</span><span class="sxs-lookup"><span data-stu-id="0438e-432">Client-Side Encryption and Azure Key Vault for Microsoft Azure Storage</span></span>](../storage-client-side-encryption.md)

  <span data-ttu-id="0438e-433">Den här artikeln ger en förklaring av klientsidan kryptering och ger exempel på användning av hello lagring klienten tooencrypt och dekryptera biblioteksresurser från hello fyra lagringstjänster.</span><span class="sxs-lookup"><span data-stu-id="0438e-433">This article gives an explanation of client-side encryption, and provides examples of using hello storage client library tooencrypt and decrypt resources from hello four storage services.</span></span> <span data-ttu-id="0438e-434">Det är också pratar om Azure Key Vault.</span><span class="sxs-lookup"><span data-stu-id="0438e-434">It also talks about Azure Key Vault.</span></span>

### <a name="using-azure-disk-encryption-tooencrypt-disks-used-by-your-virtual-machines"></a><span data-ttu-id="0438e-435">Med hjälp av Azure Disk Encryption tooencrypt diskar som används av virtuella datorer</span><span class="sxs-lookup"><span data-stu-id="0438e-435">Using Azure Disk Encryption tooencrypt disks used by your virtual machines</span></span>
<span data-ttu-id="0438e-436">Azure Disk Encryption är en ny funktion.</span><span class="sxs-lookup"><span data-stu-id="0438e-436">Azure Disk Encryption is a new feature.</span></span> <span data-ttu-id="0438e-437">Den här funktionen kan du tooencrypt hello OS diskar och datadiskar som används av en virtuell IaaS-dator.</span><span class="sxs-lookup"><span data-stu-id="0438e-437">This feature allows you tooencrypt hello OS disks and Data disks used by an IaaS Virtual Machine.</span></span> <span data-ttu-id="0438e-438">För Windows krypteras hello-enheter med BitLocker-kryptering branschstandard.</span><span class="sxs-lookup"><span data-stu-id="0438e-438">For Windows, hello drives are encrypted using industry-standard BitLocker encryption technology.</span></span> <span data-ttu-id="0438e-439">För Linux krypteras hello diskar med hello DM-Crypt teknik.</span><span class="sxs-lookup"><span data-stu-id="0438e-439">For Linux, hello disks are encrypted using hello DM-Crypt technology.</span></span> <span data-ttu-id="0438e-440">Detta är integrerad med Azure Key Vault tooallow du toocontrol och hantera hello disk krypteringsnycklar.</span><span class="sxs-lookup"><span data-stu-id="0438e-440">This is integrated with Azure Key Vault tooallow you toocontrol and manage hello disk encryption keys.</span></span>

<span data-ttu-id="0438e-441">hello-lösningen stöder hello följande scenarier för virtuella IaaS-datorer när de är aktiverade i Microsoft Azure:</span><span class="sxs-lookup"><span data-stu-id="0438e-441">hello solution supports hello following scenarios for IaaS VMs when they are enabled in Microsoft Azure:</span></span>

* <span data-ttu-id="0438e-442">Integrering med Azure Key Vault</span><span class="sxs-lookup"><span data-stu-id="0438e-442">Integration with Azure Key Vault</span></span>
* <span data-ttu-id="0438e-443">Standardnivån VMs: [A, D, DS, G, GS och så vidare serien IaaS-VM](https://azure.microsoft.com/pricing/details/virtual-machines/)</span><span class="sxs-lookup"><span data-stu-id="0438e-443">Standard tier VMs: [A, D, DS, G, GS, and so forth series IaaS VMs](https://azure.microsoft.com/pricing/details/virtual-machines/)</span></span>
* <span data-ttu-id="0438e-444">Aktivera kryptering på Windows och Linux virtuella IaaS-datorer</span><span class="sxs-lookup"><span data-stu-id="0438e-444">Enabling encryption on Windows and Linux IaaS VMs</span></span>
* <span data-ttu-id="0438e-445">Om du inaktiverar kryptering på Operativsystemet och enheter för Windows IaaS-VM</span><span class="sxs-lookup"><span data-stu-id="0438e-445">Disabling encryption on OS and data drives for Windows IaaS VMs</span></span>
* <span data-ttu-id="0438e-446">Om du inaktiverar kryptering på dataenheter för Linux virtuella IaaS-datorer</span><span class="sxs-lookup"><span data-stu-id="0438e-446">Disabling encryption on data drives for Linux IaaS VMs</span></span>
* <span data-ttu-id="0438e-447">Aktivera kryptering på virtuella IaaS-datorer som kör windowsklient-OS</span><span class="sxs-lookup"><span data-stu-id="0438e-447">Enabling encryption on IaaS VMs that are running Windows client OS</span></span>
* <span data-ttu-id="0438e-448">Aktivera kryptering på volymer med monteringssökvägar</span><span class="sxs-lookup"><span data-stu-id="0438e-448">Enabling encryption on volumes with mount paths</span></span>
* <span data-ttu-id="0438e-449">Aktivera kryptering på den virtuella Linux-datorer som är konfigurerade med disk-striping (RAID) med hjälp av mdadm</span><span class="sxs-lookup"><span data-stu-id="0438e-449">Enabling encryption on Linux VMs that are configured with disk striping (RAID) by using mdadm</span></span>
* <span data-ttu-id="0438e-450">Aktivera kryptering på den virtuella Linux-datorer med hjälp av LVM för datadiskar</span><span class="sxs-lookup"><span data-stu-id="0438e-450">Enabling encryption on Linux VMs by using LVM for data disks</span></span>
* <span data-ttu-id="0438e-451">Aktivera kryptering på virtuella Windows-datorer som har konfigurerats med hjälp av lagringsutrymmen</span><span class="sxs-lookup"><span data-stu-id="0438e-451">Enabling encryption on Windows VMs that are configured by using storage spaces</span></span>
* <span data-ttu-id="0438e-452">Alla offentliga Azure-regioner som stöds</span><span class="sxs-lookup"><span data-stu-id="0438e-452">All Azure public regions are supported</span></span>

<span data-ttu-id="0438e-453">hello-lösningen stöder inte hello följande scenarier, funktioner och teknik i hello versionen:</span><span class="sxs-lookup"><span data-stu-id="0438e-453">hello solution does not support hello following scenarios, features, and technology in hello release:</span></span>

* <span data-ttu-id="0438e-454">Grundnivån IaaS-VM</span><span class="sxs-lookup"><span data-stu-id="0438e-454">Basic tier IaaS VMs</span></span>
* <span data-ttu-id="0438e-455">Om du inaktiverar kryptering på en OS-enhet för Linux virtuella IaaS-datorer</span><span class="sxs-lookup"><span data-stu-id="0438e-455">Disabling encryption on an OS drive for Linux IaaS VMs</span></span>
* <span data-ttu-id="0438e-456">Virtuella IaaS-datorer som skapas med hjälp av hello klassiska Virtuella metod för skapande av</span><span class="sxs-lookup"><span data-stu-id="0438e-456">IaaS VMs that are created by using hello classic VM creation method</span></span>
* <span data-ttu-id="0438e-457">Integrering med din lokala nyckelhanteringstjänst</span><span class="sxs-lookup"><span data-stu-id="0438e-457">Integration with your on-premises Key Management Service</span></span>
* <span data-ttu-id="0438e-458">Azure File storage (delade filsystem), Network File System (NFS), dynamiska volymer och virtuella Windows-datorer som är konfigurerade med programvarubaserad RAID-system</span><span class="sxs-lookup"><span data-stu-id="0438e-458">Azure File storage (shared file system), Network File System (NFS), dynamic volumes, and Windows VMs that are configured with software-based RAID systems</span></span>


> [!NOTE]
> <span data-ttu-id="0438e-459">Linux OS-diskkryptering stöds för närvarande på hello följande Linux-distributioner: RHEL 7.2, CentOS 7.2n och Ubuntu 16.04.</span><span class="sxs-lookup"><span data-stu-id="0438e-459">Linux OS disk encryption is currently supported on hello following Linux distributions: RHEL 7.2, CentOS 7.2n, and Ubuntu 16.04.</span></span>
>
>

<span data-ttu-id="0438e-460">Den här funktionen garanterar att krypteras alla data på virtuella diskar i vila i Azure Storage.</span><span class="sxs-lookup"><span data-stu-id="0438e-460">This feature ensures that all data on your virtual machine disks is encrypted at rest in Azure Storage.</span></span>

#### <a name="resources"></a><span data-ttu-id="0438e-461">Resurser</span><span class="sxs-lookup"><span data-stu-id="0438e-461">Resources</span></span>
* [<span data-ttu-id="0438e-462">Azure Disk Encryption för Windows och Linux-IaaS-VM</span><span class="sxs-lookup"><span data-stu-id="0438e-462">Azure Disk Encryption for Windows and Linux IaaS VMs</span></span>](https://docs.microsoft.com/en-us/azure/security/azure-security-disk-encryption)

### <a name="comparison-of-azure-disk-encryption-sse-and-client-side-encryption"></a><span data-ttu-id="0438e-463">Jämförelse mellan Azure Disk Encryption, SSE och kryptering på klientsidan</span><span class="sxs-lookup"><span data-stu-id="0438e-463">Comparison of Azure Disk Encryption, SSE, and Client-Side Encryption</span></span>
#### <a name="iaas-vms-and-their-vhd-files"></a><span data-ttu-id="0438e-464">Virtuella IaaS-datorer och deras VHD-filer</span><span class="sxs-lookup"><span data-stu-id="0438e-464">IaaS VMs and their VHD files</span></span>
<span data-ttu-id="0438e-465">För diskar som används av virtuella IaaS-datorer, bör du använda Azure Disk Encryption.</span><span class="sxs-lookup"><span data-stu-id="0438e-465">For disks used by IaaS VMs, we recommend using Azure Disk Encryption.</span></span> <span data-ttu-id="0438e-466">Du kan aktivera SSE tooencrypt hello VHD-filer som används tooback dessa diskar i Azure Storage, men krypteras bara nyskrivna data.</span><span class="sxs-lookup"><span data-stu-id="0438e-466">You can turn on SSE tooencrypt hello VHD files that are used tooback those disks in Azure Storage, but it only encrypts newly written data.</span></span> <span data-ttu-id="0438e-467">Det innebär att om du skapar en virtuell dator och sedan aktivera SSE på hello storage-konto som innehåller hello VHD-filen bara hello ändringar krypteras, hello inte ursprungliga VHD-filen.</span><span class="sxs-lookup"><span data-stu-id="0438e-467">This means if you create a VM and then enable SSE on hello storage account that holds hello VHD file, only hello changes will be encrypted, not hello original VHD file.</span></span>

<span data-ttu-id="0438e-468">Om du skapar en virtuell dator med en bild från hello Azure Marketplace Azure utför en [ytlig kopiera](https://en.wikipedia.org/wiki/Object_copying) av hello avbildningen tooyour storage-konto i Azure Storage, och det är inte krypterat även om du har aktiverat SSE.</span><span class="sxs-lookup"><span data-stu-id="0438e-468">If you create a VM using an image from hello Azure Marketplace, Azure performs a [shallow copy](https://en.wikipedia.org/wiki/Object_copying) of hello image tooyour storage account in Azure Storage, and it is not encrypted even if you have SSE enabled.</span></span> <span data-ttu-id="0438e-469">När den skapar hello VM och börjar uppdatera hello bilden startar SSE kryptera hello data.</span><span class="sxs-lookup"><span data-stu-id="0438e-469">After it creates hello VM and starts updating hello image, SSE will start encrypting hello data.</span></span> <span data-ttu-id="0438e-470">Därför är det bästa toouse Azure Disk Encryption på virtuella datorer skapas från bilder i hello Azure Marketplace om du vill att de fullständigt krypterade.</span><span class="sxs-lookup"><span data-stu-id="0438e-470">For this reason, it's best toouse Azure Disk Encryption on VMs created from images in hello Azure Marketplace if you want them fully encrypted.</span></span>

<span data-ttu-id="0438e-471">Om du sätta förkrypterade VM i Azure från lokala kommer du att kunna tooupload hello kryptering nycklar tooAzure Key Vault och fortsätter med hello kryptering för den virtuella datorn som du använde lokala.</span><span class="sxs-lookup"><span data-stu-id="0438e-471">If you bring a pre-encrypted VM into Azure from on-premises, you will be able tooupload hello encryption keys tooAzure Key Vault, and continue using hello encryption for that VM that you were using on-premises.</span></span> <span data-ttu-id="0438e-472">Azure Disk Encryption är aktiverade toohandle det här scenariot.</span><span class="sxs-lookup"><span data-stu-id="0438e-472">Azure Disk Encryption is enabled toohandle this scenario.</span></span>

<span data-ttu-id="0438e-473">Om du har en icke-krypterade VHD från lokala kan du överföra den till hello gallery som en anpassad avbildning och etablera en virtuell dator från den.</span><span class="sxs-lookup"><span data-stu-id="0438e-473">If you have non-encrypted VHD from on-premises, you can upload it into hello gallery as a custom image and provision a VM from it.</span></span> <span data-ttu-id="0438e-474">Om du gör detta med hjälp av hello Resource Manager-mallar, ber du den tooturn på Azure Disk Encryption när den startar hello VM.</span><span class="sxs-lookup"><span data-stu-id="0438e-474">If you do this using hello Resource Manager templates, you can ask it tooturn on Azure Disk Encryption when it boots up hello VM.</span></span>

<span data-ttu-id="0438e-475">När du lägger till en datadisk och montera på hello VM, kan du aktivera Azure Disk Encryption på disken data.</span><span class="sxs-lookup"><span data-stu-id="0438e-475">When you add a data disk and mount it on hello VM, you can turn on Azure Disk Encryption on that data disk.</span></span> <span data-ttu-id="0438e-476">Den kommer att kryptera data disken lokalt först och sedan hello service management layer gör lazy skrivåtgärder mot storage så hello lagring innehåll krypteras.</span><span class="sxs-lookup"><span data-stu-id="0438e-476">It will encrypt that data disk locally first, and then hello service management layer will do a lazy write against storage so hello storage content is encrypted.</span></span>

#### <a name="client-side-encryption"></a><span data-ttu-id="0438e-477">Kryptering av klientsidan</span><span class="sxs-lookup"><span data-stu-id="0438e-477">Client-side encryption</span></span>
<span data-ttu-id="0438e-478">Kryptering på klientsidan är hello säkraste metod för att kryptera dina data eftersom den krypterar före överföringen och krypterar hello data i vila.</span><span class="sxs-lookup"><span data-stu-id="0438e-478">Client-side encryption is hello most secure method of encrypting your data, because it encrypts it before transit, and encrypts hello data at rest.</span></span> <span data-ttu-id="0438e-479">Men det kräver att du lägger till kod tooyour program med hjälp av lagringen, vilket inte kanske du vill toodo.</span><span class="sxs-lookup"><span data-stu-id="0438e-479">However, it does require that you add code tooyour applications using storage, which you may not want toodo.</span></span> <span data-ttu-id="0438e-480">I sådana fall kan använda du HTTPs för dina data under överföringen och SSE tooencrypt hello data i vila.</span><span class="sxs-lookup"><span data-stu-id="0438e-480">In those cases, you can use HTTPs for your data in transit, and SSE tooencrypt hello data at rest.</span></span>

<span data-ttu-id="0438e-481">Du kan kryptera tabellentiteter, Kömeddelanden och blobbar med kryptering på klientsidan.</span><span class="sxs-lookup"><span data-stu-id="0438e-481">With client-side encryption, you can encrypt table entities, queue messages, and blobs.</span></span> <span data-ttu-id="0438e-482">Du kan endast kryptera blobbar med SSE.</span><span class="sxs-lookup"><span data-stu-id="0438e-482">With SSE, you can only encrypt blobs.</span></span> <span data-ttu-id="0438e-483">Om du behöver tabell och kön data toobe krypterad, bör du använda kryptering på klientsidan.</span><span class="sxs-lookup"><span data-stu-id="0438e-483">If you need table and queue data toobe encrypted, you should use client-side encryption.</span></span>

<span data-ttu-id="0438e-484">Kryptering på klientsidan hanteras helt av programmet hello.</span><span class="sxs-lookup"><span data-stu-id="0438e-484">Client-side encryption is managed entirely by hello application.</span></span> <span data-ttu-id="0438e-485">Det här är hello säkraste metod, men kräver toomake programmässiga ändringar tooyour program och gjorda nyckelhantering processer.</span><span class="sxs-lookup"><span data-stu-id="0438e-485">This is hello most secure approach, but does require you toomake programmatic changes tooyour application and put key management processes in place.</span></span> <span data-ttu-id="0438e-486">Du skulle använda detta när du vill hello extra säkerhet under överföring, och du vill att din toobe för lagrade data krypteras.</span><span class="sxs-lookup"><span data-stu-id="0438e-486">You would use this when you want hello extra security during transit, and you want your stored data toobe encrypted.</span></span>

<span data-ttu-id="0438e-487">Kryptering på klientsidan är mer belastningen på hello klienten, och du har tooaccount för detta i planer för skalbarhet särskilt om du krypterar och överför stora mängder data.</span><span class="sxs-lookup"><span data-stu-id="0438e-487">Client-side encryption is more load on hello client, and you have tooaccount for this in your scalability plans, especially if you are encrypting and transferring a lot of data.</span></span>

#### <a name="storage-service-encryption-sse"></a><span data-ttu-id="0438e-488">Storage Service-kryptering (SSE)</span><span class="sxs-lookup"><span data-stu-id="0438e-488">Storage Service Encryption (SSE)</span></span>
<span data-ttu-id="0438e-489">SSE hanteras av Azure Storage.</span><span class="sxs-lookup"><span data-stu-id="0438e-489">SSE is managed by Azure Storage.</span></span> <span data-ttu-id="0438e-490">Med hjälp av SSE tillhandahåller inte för hello säkerheten för hello data under överföring, men den krypterar hello data som skrivs tooAzure lagring.</span><span class="sxs-lookup"><span data-stu-id="0438e-490">Using SSE does not provide for hello security of hello data in transit, but it does encrypt hello data as it is written tooAzure Storage.</span></span> <span data-ttu-id="0438e-491">Det finns ingen inverkan på hello prestanda när du använder den här funktionen.</span><span class="sxs-lookup"><span data-stu-id="0438e-491">There is no impact on hello performance when using this feature.</span></span>

<span data-ttu-id="0438e-492">Du kan endast kryptera blockblobbar, tilläggsblobbar och sidblobbar med hjälp av SSE.</span><span class="sxs-lookup"><span data-stu-id="0438e-492">You can only encrypt block blobs, append blobs, and page blobs using SSE.</span></span> <span data-ttu-id="0438e-493">Om du behöver tooencrypt tabelldata eller kön data bör du använda kryptering på klientsidan.</span><span class="sxs-lookup"><span data-stu-id="0438e-493">If you need tooencrypt table data or queue data, you should consider using client-side encryption.</span></span>

<span data-ttu-id="0438e-494">Om du har ett arkiv eller bibliotek av VHD-filer som du använder som grund för att skapa nya virtuella datorer kan du skapa ett nytt lagringskonto, aktivera SSE och sedan ladda upp hello VHD-filer toothat konto.</span><span class="sxs-lookup"><span data-stu-id="0438e-494">If you have an archive or library of VHD files that you use as a basis for creating new virtual machines, you can create a new storage account, enable SSE, and then upload hello VHD files toothat account.</span></span> <span data-ttu-id="0438e-495">Dessa VHD-filer krypteras av Azure Storage.</span><span class="sxs-lookup"><span data-stu-id="0438e-495">Those VHD files will be encrypted by Azure Storage.</span></span>

<span data-ttu-id="0438e-496">Om du har aktiverat för hello diskar i en virtuell dator och SSE aktiverad på hello storage-konto och hålla hello VHD-filer för Azure Disk Encryption fungerar den bra; Det leder till att alla nyligen skrivs data som krypteras två gånger.</span><span class="sxs-lookup"><span data-stu-id="0438e-496">If you have Azure Disk Encryption enabled for hello disks in a VM and SSE enabled on hello storage account holding hello VHD files, it will work fine; it will result in any newly-written data being encrypted twice.</span></span>

## <a name="storage-analytics"></a><span data-ttu-id="0438e-497">Lagringsanalys</span><span class="sxs-lookup"><span data-stu-id="0438e-497">Storage Analytics</span></span>
### <a name="using-storage-analytics-toomonitor-authorization-type"></a><span data-ttu-id="0438e-498">Med Storage Analytics toomonitor auktorisering typen</span><span class="sxs-lookup"><span data-stu-id="0438e-498">Using Storage Analytics toomonitor authorization type</span></span>
<span data-ttu-id="0438e-499">Du kan aktivera loggning för Azure Storage Analytics tooperform och lagra mätvärdesdata för varje storage-konto.</span><span class="sxs-lookup"><span data-stu-id="0438e-499">For each storage account, you can enable Azure Storage Analytics tooperform logging and store metrics data.</span></span> <span data-ttu-id="0438e-500">Detta är ett bra verktyg toouse när du vill toocheck hello prestandamått för ett lagringskonto eller behöver tootroubleshoot storage-konto eftersom du har prestandaproblem med.</span><span class="sxs-lookup"><span data-stu-id="0438e-500">This is a great tool toouse when you want toocheck hello performance metrics of a storage account, or need tootroubleshoot a storage account because you are having performance problems.</span></span>

<span data-ttu-id="0438e-501">En annan typ av data som du ser i hello storage analytics loggar är hello autentiseringsmetod som används av någon när de har åtkomst till lagring.</span><span class="sxs-lookup"><span data-stu-id="0438e-501">Another piece of data you can see in hello storage analytics logs is hello authentication method used by someone when they access storage.</span></span> <span data-ttu-id="0438e-502">Du kan till exempel se om de används en signatur för delad åtkomst eller hello lagringskontonycklar, eller om hello blob nås var offentliga i med Blob Storage.</span><span class="sxs-lookup"><span data-stu-id="0438e-502">For example, with Blob Storage, you can see if they used a Shared Access Signature or hello storage account keys, or if hello blob accessed was public.</span></span>

<span data-ttu-id="0438e-503">Det kan vara mycket användbart om du nära skyddar åtkomst toostorage.</span><span class="sxs-lookup"><span data-stu-id="0438e-503">This can be really helpful if you are tightly guarding access toostorage.</span></span> <span data-ttu-id="0438e-504">Till exempel i Blob Storage kan du ange alla hello behållare tooprivate och implementera hello användning av en SAS-tjänst i dina program.</span><span class="sxs-lookup"><span data-stu-id="0438e-504">For example, in Blob Storage you can set all of hello containers tooprivate and implement hello use of an SAS service throughout your applications.</span></span> <span data-ttu-id="0438e-505">Du kan kontrollera hello loggar regelbundet toosee om dina blobbar används med hello lagringskontonycklar, vilket kan tyda på ett sekretessbrott, eller om hello blobbar är offentlig men de får inte vara.</span><span class="sxs-lookup"><span data-stu-id="0438e-505">Then you can check hello logs regularly toosee if your blobs are accessed using hello storage account keys, which may indicate a breach of security, or if hello blobs are public but they shouldn't be.</span></span>

#### <a name="what-do-hello-logs-look-like"></a><span data-ttu-id="0438e-506">Vad hello loggar ut?</span><span class="sxs-lookup"><span data-stu-id="0438e-506">What do hello logs look like?</span></span>
<span data-ttu-id="0438e-507">När du aktiverar hello storage-konto mätvärden och loggning via hello Azure-portalen analysdata startar tooaccumulate snabbt.</span><span class="sxs-lookup"><span data-stu-id="0438e-507">After you enable hello storage account metrics and logging through hello Azure portal, analytics data will start tooaccumulate quickly.</span></span> <span data-ttu-id="0438e-508">hello loggning och mått för varje tjänst är separat; hello loggning skrivs endast när aktiviteten är i detta lagringskonto medan loggas hello mätvärden varje minut, varje timme eller varje dag, beroende på hur du konfigurerar.</span><span class="sxs-lookup"><span data-stu-id="0438e-508">hello logging and metrics for each service is separate; hello logging is only written when there is activity in that storage account, while hello metrics will be logged every minute, every hour, or every day, depending on how you configure it.</span></span>

<span data-ttu-id="0438e-509">hello loggfilerna lagras i blockblobbar i en behållare med namnet $logs i hello storage-konto.</span><span class="sxs-lookup"><span data-stu-id="0438e-509">hello logs are stored in block blobs in a container named $logs in hello storage account.</span></span> <span data-ttu-id="0438e-510">Den här behållaren skapas automatiskt när Storage Analytics är aktiverad.</span><span class="sxs-lookup"><span data-stu-id="0438e-510">This container is automatically created when Storage Analytics is enabled.</span></span> <span data-ttu-id="0438e-511">När den här behållaren har skapats kan du ta bort det, även om du tar bort innehållet.</span><span class="sxs-lookup"><span data-stu-id="0438e-511">Once this container is created, you can't delete it, although you can delete its contents.</span></span>

<span data-ttu-id="0438e-512">Det finns en mapp för varje tjänst under hello $logs behållare, och det finns undermappar för hello år/månad/dag/timme.</span><span class="sxs-lookup"><span data-stu-id="0438e-512">Under hello $logs container, there is a folder for each service, and then there are subfolders for hello year/month/day/hour.</span></span> <span data-ttu-id="0438e-513">Timma numreras bara hello loggar.</span><span class="sxs-lookup"><span data-stu-id="0438e-513">Under hour, hello logs are simply numbered.</span></span> <span data-ttu-id="0438e-514">Det här är vad hello katalogstruktur ser ut:</span><span class="sxs-lookup"><span data-stu-id="0438e-514">This is what hello directory structure will look like:</span></span>

![Visa loggfiler](./media/storage-security-guide/image1.png)

<span data-ttu-id="0438e-516">Varje begäran tooAzure lagring är inloggad.</span><span class="sxs-lookup"><span data-stu-id="0438e-516">Every request tooAzure Storage is logged.</span></span> <span data-ttu-id="0438e-517">Här är en ögonblicksbild av en loggfil som visar hello första få fält.</span><span class="sxs-lookup"><span data-stu-id="0438e-517">Here's a snapshot of a log file, showing hello first few fields.</span></span>

![Ögonblicksbild av en loggfil](./media/storage-security-guide/image2.png)

<span data-ttu-id="0438e-519">Du kan se att du kan använda hello loggar tootrack alla slags anrop tooa storage-konto.</span><span class="sxs-lookup"><span data-stu-id="0438e-519">You can see that you can use hello logs tootrack any kind of calls tooa storage account.</span></span>

#### <a name="what-are-all-of-those-fields-for"></a><span data-ttu-id="0438e-520">Vad är alla dessa fält för?</span><span class="sxs-lookup"><span data-stu-id="0438e-520">What are all of those fields for?</span></span>
<span data-ttu-id="0438e-521">Det finns en artikel som anges i hello resurserna nedan som visar hello lista över hello många fält i hello loggar och vad de används.</span><span class="sxs-lookup"><span data-stu-id="0438e-521">There is an article listed in hello resources below that provides hello list of hello many fields in hello logs and what they are used for.</span></span> <span data-ttu-id="0438e-522">Här är hello lista med fält i ordning:</span><span class="sxs-lookup"><span data-stu-id="0438e-522">Here is hello list of fields in order:</span></span>

![Ögonblicksbild av fälten i en loggfil](./media/storage-security-guide/image3.png)

<span data-ttu-id="0438e-524">Vi är intresserad av hello poster för GetBlob och hur de autentiseras, så vi behöver toolook för transaktioner med åtgärdstypen ”Get-Blob” och kontrollera hello begäran-status (4<sup>th</sup> kolumn) och hello auktoriserings-typ (8<sup>th</sup> kolumn).</span><span class="sxs-lookup"><span data-stu-id="0438e-524">We're interested in hello entries for GetBlob, and how they are authenticated, so we need toolook for entries with operation-type "Get-Blob", and check hello request-status (4<sup>th</sup> column) and hello authorization-type (8<sup>th</sup> column).</span></span>

<span data-ttu-id="0438e-525">Till exempel i hello först några rader i hello listan ovan, hello begäran-statusen ”klar” och hello auktoriserings-type ”autentiseras”.</span><span class="sxs-lookup"><span data-stu-id="0438e-525">For example, in hello first few rows in hello listing above, hello request-status is "Success" and hello authorization-type is "authenticated".</span></span> <span data-ttu-id="0438e-526">Det innebär att hello begäran har verifierats med hjälp av hello lagringskontonyckel.</span><span class="sxs-lookup"><span data-stu-id="0438e-526">This means hello request was validated using hello storage account key.</span></span>

#### <a name="how-are-my-blobs-being-authenticated"></a><span data-ttu-id="0438e-527">Hur mitt blob som autentiseras?</span><span class="sxs-lookup"><span data-stu-id="0438e-527">How are my blobs being authenticated?</span></span>
<span data-ttu-id="0438e-528">Vi har tre fall som vi är intresserad av.</span><span class="sxs-lookup"><span data-stu-id="0438e-528">We have three cases that we are interested in.</span></span>

1. <span data-ttu-id="0438e-529">hello blob är offentlig och den kan nås med hjälp av en URL utan en signatur för delad åtkomst.</span><span class="sxs-lookup"><span data-stu-id="0438e-529">hello blob is public and it is accessed using a URL without a Shared Access Signature.</span></span> <span data-ttu-id="0438e-530">I det här fallet hello begäran-status är ”AnonymousSuccess” och hello auktoriserings-typ är ”anonym”.</span><span class="sxs-lookup"><span data-stu-id="0438e-530">In this case, hello request-status is "AnonymousSuccess" and hello authorization-type is "anonymous".</span></span>

   <span data-ttu-id="0438e-531">1.0; 2015-11-17T02:01:29.0488963Z; GetBlob; **AnonymousSuccess**; 200; 124; 37; **anonym**; mystorage...</span><span class="sxs-lookup"><span data-stu-id="0438e-531">1.0;2015-11-17T02:01:29.0488963Z;GetBlob;**AnonymousSuccess**;200;124;37;**anonymous**;;mystorage…</span></span>
2. <span data-ttu-id="0438e-532">hello blob är privata och användes med en signatur för delad åtkomst.</span><span class="sxs-lookup"><span data-stu-id="0438e-532">hello blob is private and was used with a Shared Access Signature.</span></span> <span data-ttu-id="0438e-533">I det här fallet hello begäran-status är ”SASSuccess” och hello auktoriserings-typ är ”sas”.</span><span class="sxs-lookup"><span data-stu-id="0438e-533">In this case, hello request-status is "SASSuccess" and hello authorization-type is "sas".</span></span>

   <span data-ttu-id="0438e-534">1.0; 2015-11-16T18:30:05.6556115Z; GetBlob; **SASSuccess**; 200; 416; 64; **SAS**; mystorage...</span><span class="sxs-lookup"><span data-stu-id="0438e-534">1.0;2015-11-16T18:30:05.6556115Z;GetBlob;**SASSuccess**;200;416;64;**sas**;;mystorage…</span></span>
3. <span data-ttu-id="0438e-535">hello blob är privata och hello lagringsnyckel har använt tooaccess den.</span><span class="sxs-lookup"><span data-stu-id="0438e-535">hello blob is private and hello storage key was used tooaccess it.</span></span> <span data-ttu-id="0438e-536">I det här fallet hello begäran-status är ”**lyckade**” och hello auktoriserings-typen är ”**autentiserade**”.</span><span class="sxs-lookup"><span data-stu-id="0438e-536">In this case, hello request-status is "**Success**" and hello authorization-type is "**authenticated**".</span></span>

   <span data-ttu-id="0438e-537">1.0; 2015-11-16T18:32:24.3174537Z; GetBlob; **Lyckade**; 206; 59; 22; **autentiserad**; mystorage...</span><span class="sxs-lookup"><span data-stu-id="0438e-537">1.0;2015-11-16T18:32:24.3174537Z;GetBlob;**Success**;206;59;22;**authenticated**;mystorage…</span></span>

<span data-ttu-id="0438e-538">Du kan använda hello Microsoft Message Analyzer tooview och analysera dessa loggar.</span><span class="sxs-lookup"><span data-stu-id="0438e-538">You can use hello Microsoft Message Analyzer tooview and analyze these logs.</span></span> <span data-ttu-id="0438e-539">Den innehåller Sök och filtrera funktioner.</span><span class="sxs-lookup"><span data-stu-id="0438e-539">It includes search and filter capabilities.</span></span> <span data-ttu-id="0438e-540">Du kanske exempelvis vill toosearch för instanser av GetBlob toosee om hello användningen är vad du förväntar dig, d.v.s. toomake att någon inte har åtkomst till ditt lagringskonto felaktigt.</span><span class="sxs-lookup"><span data-stu-id="0438e-540">For example, you might want toosearch for instances of GetBlob toosee if hello usage is what you expect, i.e. toomake sure someone is not accessing your storage account inappropriately.</span></span>

#### <a name="resources"></a><span data-ttu-id="0438e-541">Resurser</span><span class="sxs-lookup"><span data-stu-id="0438e-541">Resources</span></span>
* [<span data-ttu-id="0438e-542">Lagringsanalys</span><span class="sxs-lookup"><span data-stu-id="0438e-542">Storage Analytics</span></span>](../storage-analytics.md)

  <span data-ttu-id="0438e-543">Den här artikeln är en översikt över storage analytics och hur tooenable dem.</span><span class="sxs-lookup"><span data-stu-id="0438e-543">This article is an overview of storage analytics and how tooenable them.</span></span>
* [<span data-ttu-id="0438e-544">Storage Analytics loggformat</span><span class="sxs-lookup"><span data-stu-id="0438e-544">Storage Analytics Log Format</span></span>](https://msdn.microsoft.com/library/azure/hh343259.aspx)

  <span data-ttu-id="0438e-545">Den här artikeln visar hello Storage Analytics loggformat och information hello tillgängliga fält, inklusive autentisering-typ, som visar hello typ av autentisering som används för hello-begäran.</span><span class="sxs-lookup"><span data-stu-id="0438e-545">This article illustrates hello Storage Analytics Log Format, and details hello fields available therein, including authentication-type, which indicates hello type of authentication used for hello request.</span></span>
* [<span data-ttu-id="0438e-546">Övervaka ett Lagringskonto i hello Azure-portalen</span><span class="sxs-lookup"><span data-stu-id="0438e-546">Monitor a Storage Account in hello Azure portal</span></span>](../storage-monitor-storage-account.md)

  <span data-ttu-id="0438e-547">Den här artikeln visar hur tooconfigure övervakning av mätvärden och loggning för ett lagringskonto.</span><span class="sxs-lookup"><span data-stu-id="0438e-547">This article shows how tooconfigure monitoring of metrics and logging for a storage account.</span></span>
* [<span data-ttu-id="0438e-548">Slutpunkt till slutpunkt-felsökning med hjälp av Azure Storage-mätvärden och loggning, AzCopy och Message Analyzer</span><span class="sxs-lookup"><span data-stu-id="0438e-548">End-to-End Troubleshooting using Azure Storage Metrics and Logging, AzCopy, and Message Analyzer</span></span>](../storage-e2e-troubleshooting.md)

  <span data-ttu-id="0438e-549">Den här artikeln handlar om felsökning med hjälp av hello Storage Analytics och visar hur toouse hello Microsoft Message Analyzer.</span><span class="sxs-lookup"><span data-stu-id="0438e-549">This article talks about troubleshooting using hello Storage Analytics and shows how toouse hello Microsoft Message Analyzer.</span></span>
* [<span data-ttu-id="0438e-550">Microsoft Message Analyzer fungerar Guide</span><span class="sxs-lookup"><span data-stu-id="0438e-550">Microsoft Message Analyzer Operating Guide</span></span>](https://technet.microsoft.com/library/jj649776.aspx)

  <span data-ttu-id="0438e-551">Den här artikeln är hello referens för hello Microsoft Message Analyzer och innehåller länkar tooa kursen, Snabbstart och Funktionssammanfattning.</span><span class="sxs-lookup"><span data-stu-id="0438e-551">This article is hello reference for hello Microsoft Message Analyzer and includes links tooa tutorial, quick start, and feature summary.</span></span>

## <a name="cross-origin-resource-sharing-cors"></a><span data-ttu-id="0438e-552">Resursdelning för korsande ursprung (CORS)</span><span class="sxs-lookup"><span data-stu-id="0438e-552">Cross-Origin Resource Sharing (CORS)</span></span>
### <a name="cross-domain-access-of-resources"></a><span data-ttu-id="0438e-553">Korsdomänåtkomst för resurser</span><span class="sxs-lookup"><span data-stu-id="0438e-553">Cross-domain access of resources</span></span>
<span data-ttu-id="0438e-554">När en webbläsare som körs i en domän gör en HTTP-begäran för en resurs från en annan domän, kallas en cross-origin HTTP-begäran.</span><span class="sxs-lookup"><span data-stu-id="0438e-554">When a web browser running in one domain makes an HTTP request for a resource from a different domain, this is called a cross-origin HTTP request.</span></span> <span data-ttu-id="0438e-555">Exempelvis begär en HTML-sida från contoso.com en JPEG-bild som finns på fabrikam.blob.core.windows.net.</span><span class="sxs-lookup"><span data-stu-id="0438e-555">For example, an HTML page served from contoso.com makes a request for a jpeg hosted on fabrikam.blob.core.windows.net.</span></span> <span data-ttu-id="0438e-556">Av säkerhetsskäl begränsa cross-origin HTTP-begäranden som startas från skript, till exempel JavaScript i webbläsare.</span><span class="sxs-lookup"><span data-stu-id="0438e-556">For security reasons, browsers restrict cross-origin HTTP requests initiated from within scripts, such as JavaScript.</span></span> <span data-ttu-id="0438e-557">Det innebär att när JavaScript-kod på en webbsida på contoso.com begär att jpeg på fabrikam.blob.core.windows.net, hello webbläsare inte tillåter hello-begäran.</span><span class="sxs-lookup"><span data-stu-id="0438e-557">This means that when some JavaScript code on a web page on contoso.com requests that jpeg on fabrikam.blob.core.windows.net, hello browser will not allow hello request.</span></span>

<span data-ttu-id="0438e-558">Vad gör detta har toodo med Azure Storage?</span><span class="sxs-lookup"><span data-stu-id="0438e-558">What does this have toodo with Azure Storage?</span></span> <span data-ttu-id="0438e-559">Också, om du lagrar statiska resurser, t.ex JSON- eller XML-filer i Blob Storage med hjälp av ett lagringskonto kallas Fabrikam hello domän för hello tillgångar blir fabrikam.blob.core.windows.net och hello contoso.com webb-applikationen inte kan tooaccess dem. med hjälp av JavaScript eftersom hello domäner är olika.</span><span class="sxs-lookup"><span data-stu-id="0438e-559">Well, if you are storing static assets such as JSON or XML data files in Blob Storage using a storage account called Fabrikam, hello domain for hello assets will be fabrikam.blob.core.windows.net, and hello contoso.com web application will not be able tooaccess them using JavaScript because hello domains are different.</span></span> <span data-ttu-id="0438e-560">Detta gäller även om du försöker toocall en hello Azure Storage-tjänster – till exempel Table Storage – som returnerar JSON data toobe bearbetas av hello JavaScript-klienten.</span><span class="sxs-lookup"><span data-stu-id="0438e-560">This is also true if you're trying toocall one of hello Azure Storage Services – such as Table Storage – that return JSON data toobe processed by hello JavaScript client.</span></span>

#### <a name="possible-solutions"></a><span data-ttu-id="0438e-561">Möjliga lösningar</span><span class="sxs-lookup"><span data-stu-id="0438e-561">Possible solutions</span></span>
<span data-ttu-id="0438e-562">Enkelriktade tooresolve är tooassign en anpassad domän som ”storage.contoso.com” toofabrikam.blob.core.windows.net.</span><span class="sxs-lookup"><span data-stu-id="0438e-562">One way tooresolve this is tooassign a custom domain like "storage.contoso.com" toofabrikam.blob.core.windows.net.</span></span> <span data-ttu-id="0438e-563">hello problemet är att du kan endast tilldela det anpassade domänen tooone storage-kontot.</span><span class="sxs-lookup"><span data-stu-id="0438e-563">hello problem is that you can only assign that custom domain tooone storage account.</span></span> <span data-ttu-id="0438e-564">Vad händer om hello-tillgångar lagras i flera storage-konton?</span><span class="sxs-lookup"><span data-stu-id="0438e-564">What if hello assets are stored in multiple storage accounts?</span></span>

<span data-ttu-id="0438e-565">Ett annat sätt tooresolve detta är toohave hello web application agera som en proxy för hello lagring anrop.</span><span class="sxs-lookup"><span data-stu-id="0438e-565">Another way tooresolve this is toohave hello web application act as a proxy for hello storage calls.</span></span> <span data-ttu-id="0438e-566">Det innebär om du överför en fil tooBlob lagring hello webbprogrammet skulle antingen skriva det lokalt och sedan kopiera tooBlob lagring eller den kommer att läsa in alla i minnet och sedan skriva tooBlob lagring.</span><span class="sxs-lookup"><span data-stu-id="0438e-566">This means if you are uploading a file tooBlob Storage, hello web application would either write it locally and then copy it tooBlob Storage, or it would read all of it into memory and then write it tooBlob Storage.</span></span> <span data-ttu-id="0438e-567">Alternativt kan skriva du ett dedikerat webbprogram (till exempel en webb-API) som överför hello filer lokalt och skriver dem tooBlob lagring.</span><span class="sxs-lookup"><span data-stu-id="0438e-567">Alternately, you could write a dedicated web application (such as a Web API) that uploads hello files locally and writes them tooBlob Storage.</span></span> <span data-ttu-id="0438e-568">Oavsett hur du har tooaccount för funktionen när måste bestämma hello skalbarhet.</span><span class="sxs-lookup"><span data-stu-id="0438e-568">Either way, you have tooaccount for that function when determining hello scalability needs.</span></span>

#### <a name="how-can-cors-help"></a><span data-ttu-id="0438e-569">CORS hur?</span><span class="sxs-lookup"><span data-stu-id="0438e-569">How can CORS help?</span></span>
<span data-ttu-id="0438e-570">Azure Storage kan du tooenable CORS – Cross Origin Resource Sharing.</span><span class="sxs-lookup"><span data-stu-id="0438e-570">Azure Storage allows you tooenable CORS – Cross Origin Resource Sharing.</span></span> <span data-ttu-id="0438e-571">Du kan ange domäner som har åtkomst till hello resurser i detta lagringskonto för varje storage-konto.</span><span class="sxs-lookup"><span data-stu-id="0438e-571">For each storage account, you can specify domains that can access hello resources in that storage account.</span></span> <span data-ttu-id="0438e-572">I vårt fall som beskrivs ovan, vi till exempel aktivera CORS för hello fabrikam.blob.core.windows.net storage-konto och konfigurera den tooallow åtkomst toocontoso.com. Sedan hello web application contoso.com kan komma åt direkt hello resurser i fabrikam.blob.core.windows.net.</span><span class="sxs-lookup"><span data-stu-id="0438e-572">For example, in our case outlined above, we can enable CORS on hello fabrikam.blob.core.windows.net storage account and configure it tooallow access toocontoso.com. Then hello web application contoso.com can directly access hello resources in fabrikam.blob.core.windows.net.</span></span>

<span data-ttu-id="0438e-573">En sak toonote är att CORS tillåter åtkomst, men ger inte autentisering, vilket krävs för alla icke-offentlig åtkomst av lagringsresurser.</span><span class="sxs-lookup"><span data-stu-id="0438e-573">One thing toonote is that CORS allows access, but it does not provide authentication, which is required for all non-public access of storage resources.</span></span> <span data-ttu-id="0438e-574">Det innebär att du endast kan komma åt blobar om de är offentliga eller om du inkluderar en signatur för delad åtkomst som ger dig hello behörighet.</span><span class="sxs-lookup"><span data-stu-id="0438e-574">This means you can only access blobs if they are public or you include a Shared Access Signature giving you hello appropriate permission.</span></span> <span data-ttu-id="0438e-575">Tabeller, köer och filer har ingen offentlig åtkomst och kräver en SAS.</span><span class="sxs-lookup"><span data-stu-id="0438e-575">Tables, queues, and files have no public access, and require a SAS.</span></span>

<span data-ttu-id="0438e-576">Som standard är CORS inaktiverad på alla tjänster.</span><span class="sxs-lookup"><span data-stu-id="0438e-576">By default, CORS is disabled on all services.</span></span> <span data-ttu-id="0438e-577">Du kan aktivera CORS med hjälp av hello REST API: et eller hello lagring klienten biblioteket toocall en hello metoder tooset hello-principer.</span><span class="sxs-lookup"><span data-stu-id="0438e-577">You can enable CORS by using hello REST API or hello storage client library toocall one of hello methods tooset hello service policies.</span></span> <span data-ttu-id="0438e-578">När du gör det kan inkludera du en regel för CORS som XML.</span><span class="sxs-lookup"><span data-stu-id="0438e-578">When you do that, you include a CORS rule, which is in XML.</span></span> <span data-ttu-id="0438e-579">Här är ett exempel på en CORS-regel som har angetts med hjälp av hello ange tjänstegenskaper åtgärd för hello Blob-tjänsten för ett lagringskonto.</span><span class="sxs-lookup"><span data-stu-id="0438e-579">Here's an example of a CORS rule that has been set using hello Set Service Properties operation for hello Blob Service for a storage account.</span></span> <span data-ttu-id="0438e-580">Du kan utföra åtgärden med hello storage-klientbibliotek eller hello REST API: er för Azure Storage.</span><span class="sxs-lookup"><span data-stu-id="0438e-580">You can perform that operation using hello storage client library or hello REST APIs for Azure Storage.</span></span>

```xml
<Cors>    
    <CorsRule>
        <AllowedOrigins>http://www.contoso.com, http://www.fabrikam.com</AllowedOrigins>
        <AllowedMethods>PUT,GET</AllowedMethods>
        <AllowedHeaders>x-ms-meta-data*,x-ms-meta-target*,x-ms-meta-abc</AllowedHeaders>
        <ExposedHeaders>x-ms-meta-*</ExposedHeaders>
        <MaxAgeInSeconds>200</MaxAgeInSeconds>
    </CorsRule>
<Cors>
```

<span data-ttu-id="0438e-581">Här är vad det innebär att varje rad:</span><span class="sxs-lookup"><span data-stu-id="0438e-581">Here's what each row means:</span></span>

* <span data-ttu-id="0438e-582">**AllowedOrigins** ser som icke-matchande domäner kan begära och ta emot data från hello storage-tjänst.</span><span class="sxs-lookup"><span data-stu-id="0438e-582">**AllowedOrigins** This tells which non-matching domains can request and receive data from hello storage service.</span></span> <span data-ttu-id="0438e-583">Detta innebär att både contoso.com och fabrikam.com kan begära data från Blob Storage för ett visst lagringskonto.</span><span class="sxs-lookup"><span data-stu-id="0438e-583">This says that both contoso.com and fabrikam.com can request data from Blob Storage for a specific storage account.</span></span> <span data-ttu-id="0438e-584">Du kan också ange tooa jokertecknet (\*) tooallow alla domäner tooaccess begäranden.</span><span class="sxs-lookup"><span data-stu-id="0438e-584">You can also set this tooa wildcard (\*) tooallow all domains tooaccess requests.</span></span>
* <span data-ttu-id="0438e-585">**AllowedMethods** är hello listan över metoder (http-begäran verb) som kan användas när du gör hello-begäran.</span><span class="sxs-lookup"><span data-stu-id="0438e-585">**AllowedMethods** This is hello list of methods (HTTP request verbs) that can be used when making hello request.</span></span> <span data-ttu-id="0438e-586">I det här exemplet tillåts bara skicka och hämta.</span><span class="sxs-lookup"><span data-stu-id="0438e-586">In this example, only PUT and GET are allowed.</span></span> <span data-ttu-id="0438e-587">Du kan ange tooa jokertecknet (\*) tooallow alla metoder toobe används.</span><span class="sxs-lookup"><span data-stu-id="0438e-587">You can set this tooa wildcard (\*) tooallow all methods toobe used.</span></span>
* <span data-ttu-id="0438e-588">**AllowedHeaders** detta är hello begäran huvuden som hello ursprungsdomän kan ange när du gör hello-begäran.</span><span class="sxs-lookup"><span data-stu-id="0438e-588">**AllowedHeaders** This is hello request headers that hello origin domain can specify when making hello request.</span></span> <span data-ttu-id="0438e-589">I det här exemplet tillåts alla metadata huvuden som börjar med x-ms-metadata, x-ms-meta-mål- och x-ms-meta-abc.</span><span class="sxs-lookup"><span data-stu-id="0438e-589">In this example, all metadata headers starting with x-ms-meta-data, x-ms-meta-target, and x-ms-meta-abc are permitted.</span></span> <span data-ttu-id="0438e-590">Hej jokertecknet (\*) anger att alla huvud som börjar med hello angetts prefix är tillåtet.</span><span class="sxs-lookup"><span data-stu-id="0438e-590">hello wildcard character (\*) indicates that any header beginning with hello specified prefix is allowed.</span></span>
* <span data-ttu-id="0438e-591">**ExposedHeaders** detta talar om vilka svarshuvuden bör exponeras av hello webbläsare toohello begäran utfärdare.</span><span class="sxs-lookup"><span data-stu-id="0438e-591">**ExposedHeaders** This tells which response headers should be exposed by hello browser toohello request issuer.</span></span> <span data-ttu-id="0438e-592">I det här exemplet, de huvuden som börjar med ”x-ms - meta-” visas.</span><span class="sxs-lookup"><span data-stu-id="0438e-592">In this example, any header starting with "x-ms-meta-" will be exposed.</span></span>
* <span data-ttu-id="0438e-593">**MaxAgeInSeconds** detta är hello längsta tid att webbläsaren ska cachelagra hello preliminära OPTIONS-begäran.</span><span class="sxs-lookup"><span data-stu-id="0438e-593">**MaxAgeInSeconds** This is hello maximum amount of time that a browser will cache hello preflight OPTIONS request.</span></span> <span data-ttu-id="0438e-594">(Mer information om hello preflight-begäran att kontrollera hello första artikel nedan.)</span><span class="sxs-lookup"><span data-stu-id="0438e-594">(For more information about hello preflight request, check hello first article below.)</span></span>

#### <a name="resources"></a><span data-ttu-id="0438e-595">Resurser</span><span class="sxs-lookup"><span data-stu-id="0438e-595">Resources</span></span>
<span data-ttu-id="0438e-596">Mer information om CORS och hur tooenable, Läs dessa resurser.</span><span class="sxs-lookup"><span data-stu-id="0438e-596">For more information about CORS and how tooenable it, please check out these resources.</span></span>

* [<span data-ttu-id="0438e-597">Stöd för Cross-Origin Resource Sharing (CORS) för hello Azure Storage-tjänster på Azure.com</span><span class="sxs-lookup"><span data-stu-id="0438e-597">Cross-Origin Resource Sharing (CORS) Support for hello Azure Storage Services on Azure.com</span></span>](../storage-cors-support.md)

  <span data-ttu-id="0438e-598">Den här artikeln innehåller en översikt över CORS och hur tooset hello regler för hello olika storage-tjänster.</span><span class="sxs-lookup"><span data-stu-id="0438e-598">This article provides an overview of CORS and how tooset hello rules for hello different storage services.</span></span>
* [<span data-ttu-id="0438e-599">Stöd för Cross-Origin Resource Sharing (CORS) för hello Azure Storage-tjänster på MSDN</span><span class="sxs-lookup"><span data-stu-id="0438e-599">Cross-Origin Resource Sharing (CORS) Support for hello Azure Storage Services on MSDN</span></span>](https://msdn.microsoft.com/library/azure/dn535601.aspx)

  <span data-ttu-id="0438e-600">Detta är hello i referensdokumentationen för CORS-stöd för hello Azure Storage-tjänster.</span><span class="sxs-lookup"><span data-stu-id="0438e-600">This is hello reference documentation for CORS support for hello Azure Storage Services.</span></span> <span data-ttu-id="0438e-601">Detta har länkar tooarticles tillämpa tooeach storage-tjänst och visar ett exempel och förklarar varje element i hello CORS-filen.</span><span class="sxs-lookup"><span data-stu-id="0438e-601">This has links tooarticles applying tooeach storage service, and shows an example and explains each element in hello CORS file.</span></span>
* [<span data-ttu-id="0438e-602">Microsoft Azure Storage: Introduktion till CORS</span><span class="sxs-lookup"><span data-stu-id="0438e-602">Microsoft Azure Storage: Introducing CORS</span></span>](http://blogs.msdn.com/b/windowsazurestorage/archive/2014/02/03/windows-azure-storage-introducing-cors.aspx)

  <span data-ttu-id="0438e-603">Det här är en länk toohello inledande bloggartikel presenterar CORS och visar hur toouse den.</span><span class="sxs-lookup"><span data-stu-id="0438e-603">This is a link toohello initial blog article announcing CORS and showing how toouse it.</span></span>

## <a name="frequently-asked-questions-about-azure-storage-security"></a><span data-ttu-id="0438e-604">Vanliga frågor och svar om Azure Storage-säkerhet</span><span class="sxs-lookup"><span data-stu-id="0438e-604">Frequently asked questions about Azure Storage security</span></span>
1. <span data-ttu-id="0438e-605">**Hur kan jag bekräfta hello integriteten hos hello blobbar som jag överföra till eller från Azure Storage om jag inte använda hello HTTPS-protokollet?**</span><span class="sxs-lookup"><span data-stu-id="0438e-605">**How can I verify hello integrity of hello blobs I'm transferring into or out of Azure Storage if I can't use hello HTTPS protocol?**</span></span>

   <span data-ttu-id="0438e-606">Om du av någon anledning som du behöver toouse HTTP i stället för HTTPS och du arbetar med blockblobbar, du kan använda MD5 kontrollerar verifiera toohelp hello integritet hello blob som överförs.</span><span class="sxs-lookup"><span data-stu-id="0438e-606">If for any reason you need toouse HTTP instead of HTTPS and you are working with block blobs, you can use MD5 checking toohelp verify hello integrity of hello blobs being transferred.</span></span> <span data-ttu-id="0438e-607">Detta hjälper med skydd från nätverket/transport layer fel, men inte nödvändigtvis med mellanliggande attacker.</span><span class="sxs-lookup"><span data-stu-id="0438e-607">This will help with protection from network/transport layer errors, but not necessarily with intermediary attacks.</span></span>

   <span data-ttu-id="0438e-608">Om du kan använda HTTPS, vilket ger säkerhet på radnivå transport är med hjälp av MD5 kontrollerar redundant och onödiga.</span><span class="sxs-lookup"><span data-stu-id="0438e-608">If you can use HTTPS, which provides transport level security, then using MD5 checking is redundant and unnecessary.</span></span>

   <span data-ttu-id="0438e-609">Mer information finns på hello [översikt över Azure Blob-MD5](http://blogs.msdn.com/b/windowsazurestorage/archive/2011/02/18/windows-azure-blob-md5-overview.aspx).</span><span class="sxs-lookup"><span data-stu-id="0438e-609">For more information, please check out hello [Azure Blob MD5 Overview](http://blogs.msdn.com/b/windowsazurestorage/archive/2011/02/18/windows-azure-blob-md5-overview.aspx).</span></span>
2. <span data-ttu-id="0438e-610">**Nyheter om FIPS-kompatibilitet för hello USA Government?**</span><span class="sxs-lookup"><span data-stu-id="0438e-610">**What about FIPS-Compliance for hello U.S. Government?**</span></span>

   <span data-ttu-id="0438e-611">hello USA FIPS Federal Information Processing Standard () definierar kryptografiska algoritmer som godkänts för användning av USA Federala myndigheter datorsystem för hello skyddet av känsliga data.</span><span class="sxs-lookup"><span data-stu-id="0438e-611">hello United States Federal Information Processing Standard (FIPS) defines cryptographic algorithms approved for use by U.S. Federal government computer systems for hello protection of sensitive data.</span></span> <span data-ttu-id="0438e-612">Aktivering av FIPS visar-läge på en Windows server eller fjärrskrivbord hello OS endast FIPS-validerade kryptografiska algoritmer som ska användas.</span><span class="sxs-lookup"><span data-stu-id="0438e-612">Enabling FIPS mode on a Windows server or desktop tells hello OS that only FIPS-validated cryptographic algorithms should be used.</span></span> <span data-ttu-id="0438e-613">Om ett program som använder icke-kompatibla algoritmer, bryts hello program.</span><span class="sxs-lookup"><span data-stu-id="0438e-613">If an application uses non-compliant algorithms, hello applications will break.</span></span> <span data-ttu-id="0438e-614">With.NET Framework version 4.5.2 eller högre, hello programmet automatiskt växlar hello kryptografiska algoritmer toouse FIPS-kompatibla algoritmer när hello dator är i FIPS-läge.</span><span class="sxs-lookup"><span data-stu-id="0438e-614">With.NET Framework versions 4.5.2 or higher, hello application automatically switches hello cryptography algorithms toouse FIPS-compliant algorithms when hello computer is in FIPS mode.</span></span>

   <span data-ttu-id="0438e-615">Microsoft lämnar det upp tooeach kunden toodecide om tooenable FIPS-läge.</span><span class="sxs-lookup"><span data-stu-id="0438e-615">Microsoft leaves it up tooeach customer toodecide whether tooenable FIPS mode.</span></span> <span data-ttu-id="0438e-616">Vi tror att det finns ingen tvingande anledning för kunder som inte är ämne toogovernment förordningar tooenable FIPS-läge som standard.</span><span class="sxs-lookup"><span data-stu-id="0438e-616">We believe there is no compelling reason for customers who are not subject toogovernment regulations tooenable FIPS mode by default.</span></span>

   <span data-ttu-id="0438e-617">**Resurser**</span><span class="sxs-lookup"><span data-stu-id="0438e-617">**Resources**</span></span>

* [<span data-ttu-id="0438e-618">Varför inte rekommenderar vi ”FIPS-läge” längre</span><span class="sxs-lookup"><span data-stu-id="0438e-618">Why We're Not Recommending "FIPS Mode" Anymore</span></span>](http://blogs.technet.com/b/secguide/archive/2014/04/07/why-we-re-not-recommending-fips-mode-anymore.aspx)

  <span data-ttu-id="0438e-619">Den här bloggen artikeln ger en översikt över FIPS och förklarar varför de inte aktiverar FIPS-läge som standard.</span><span class="sxs-lookup"><span data-stu-id="0438e-619">This blog article gives an overview of FIPS and explains why they don't enable FIPS mode by default.</span></span>
* [<span data-ttu-id="0438e-620">FIPS 140 verifiering</span><span class="sxs-lookup"><span data-stu-id="0438e-620">FIPS 140 Validation</span></span>](https://technet.microsoft.com/library/cc750357.aspx)

  <span data-ttu-id="0438e-621">Den här artikeln innehåller information om hur Microsoft-produkter och kryptografimoduler uppfyller hello FIPS-standarden för hello USA Federala myndigheter.</span><span class="sxs-lookup"><span data-stu-id="0438e-621">This article provides information on how Microsoft products and cryptographic modules comply with hello FIPS standard for hello U.S. Federal government.</span></span>
* [<span data-ttu-id="0438e-622">”Systemkryptografi: Använd FIPS-kompatibla algoritmer för kryptering, hashing och signering” inställningar effekterna på säkerheten i Windows XP och senare versioner av Windows</span><span class="sxs-lookup"><span data-stu-id="0438e-622">"System cryptography: Use FIPS compliant algorithms for encryption, hashing, and signing" security settings effects in Windows XP and in later versions of Windows</span></span>](https://support.microsoft.com/kb/811833)

  <span data-ttu-id="0438e-623">Den här artikeln handlar om hello användning av FIPS-läge i äldre Windows-datorer.</span><span class="sxs-lookup"><span data-stu-id="0438e-623">This article talks about hello use of FIPS mode in older Windows computers.</span></span>

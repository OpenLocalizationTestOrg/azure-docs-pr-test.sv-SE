---
title: "Säkerhetsguiden för Azure Storage | Microsoft Docs"
description: "Information på många metoder för att skydda Azure Storage, inklusive men inte begränsat till RBAC, Storage Service-kryptering, kryptering på klientsidan, SMB 3.0 och Azure Disk Encryption."
services: storage
documentationcenter: .net
author: robinsh
manager: timlt
editor: tysonn
ms.assetid: 6f931d94-ef5a-44c6-b1d9-8a3c9c327fb2
ms.service: storage
ms.workload: storage
ms.tgt_pltfrm: na
ms.devlang: dotnet
ms.topic: article
ms.date: 12/08/2016
ms.author: robinsh
ms.openlocfilehash: 428dcaa8e842077936b7d9b9cb6ac639844c3961
ms.sourcegitcommit: 02e69c4a9d17645633357fe3d46677c2ff22c85a
ms.translationtype: MT
ms.contentlocale: sv-SE
ms.lasthandoff: 08/03/2017
---
# <a name="azure-storage-security-guide"></a><span data-ttu-id="bb285-103">Azure Storage-säkerhetsguiden</span><span class="sxs-lookup"><span data-stu-id="bb285-103">Azure Storage security guide</span></span>
## <a name="overview"></a><span data-ttu-id="bb285-104">Översikt</span><span class="sxs-lookup"><span data-stu-id="bb285-104">Overview</span></span>
<span data-ttu-id="bb285-105">Azure Storage innehåller en omfattande uppsättning säkerhetsfunktioner som tillsammans ger utvecklare möjligheten att skapa säkra program.</span><span class="sxs-lookup"><span data-stu-id="bb285-105">Azure Storage provides a comprehensive set of security capabilities which together enable developers to build secure applications.</span></span> <span data-ttu-id="bb285-106">Lagringskontot själva kan skyddas med hjälp av rollbaserad åtkomstkontroll och Azure Active Directory.</span><span class="sxs-lookup"><span data-stu-id="bb285-106">The storage account itself can be secured using Role-Based Access Control and Azure Active Directory.</span></span> <span data-ttu-id="bb285-107">Data kan skyddas vid överföring mellan en program- och Azure med hjälp av [Client Side Encryption](storage-client-side-encryption.md), HTTPS- eller SMB 3.0.</span><span class="sxs-lookup"><span data-stu-id="bb285-107">Data can be secured in transit between an application and Azure by using [Client-Side Encryption](storage-client-side-encryption.md), HTTPS, or SMB 3.0.</span></span> <span data-ttu-id="bb285-108">Data kan anges krypteras automatiskt när skrivs till Azure Storage med [Storage Service kryptering (SSE)](storage-service-encryption.md).</span><span class="sxs-lookup"><span data-stu-id="bb285-108">Data can be set to be automatically encrypted when written to Azure Storage using [Storage Service Encryption (SSE)](storage-service-encryption.md).</span></span> <span data-ttu-id="bb285-109">Operativsystemet och datadiskarna som används av virtuella datorer kan anges krypteras med hjälp av [Azure Disk Encryption](../security/azure-security-disk-encryption.md).</span><span class="sxs-lookup"><span data-stu-id="bb285-109">OS and Data disks used by virtual machines can be set to be encrypted using [Azure Disk Encryption](../security/azure-security-disk-encryption.md).</span></span> <span data-ttu-id="bb285-110">Delegerad åtkomst till dataobjekt i Azure Storage kan beviljas med [signaturer för delad åtkomst](storage-dotnet-shared-access-signature-part-1.md).</span><span class="sxs-lookup"><span data-stu-id="bb285-110">Delegated access to the data objects in Azure Storage can be granted using [Shared Access Signatures](storage-dotnet-shared-access-signature-part-1.md).</span></span>

<span data-ttu-id="bb285-111">Den här artikeln ger en översikt över var och en av dessa funktioner som kan användas med Azure Storage.</span><span class="sxs-lookup"><span data-stu-id="bb285-111">This article will provide an overview of each of these security features that can be used with Azure Storage.</span></span> <span data-ttu-id="bb285-112">Länkar tillhandahålls till artiklar som ger information om varje funktion så kan du enkelt göra ytterligare undersökningar på varje avsnitt.</span><span class="sxs-lookup"><span data-stu-id="bb285-112">Links are provided to articles that will give details of each feature so you can easily do further investigation on each topic.</span></span>

<span data-ttu-id="bb285-113">Här följer ämnena i den här artikeln:</span><span class="sxs-lookup"><span data-stu-id="bb285-113">Here are the topics to be covered in this article:</span></span>

* <span data-ttu-id="bb285-114">[Hantering av plan säkerhet](#management-plane-security) – skydda ditt Lagringskonto</span><span class="sxs-lookup"><span data-stu-id="bb285-114">[Management Plane Security](#management-plane-security) – Securing your Storage Account</span></span>

  <span data-ttu-id="bb285-115">Management-plan består av de resurser som används för att hantera ditt lagringskonto.</span><span class="sxs-lookup"><span data-stu-id="bb285-115">The management plane consists of the resources used to manage your storage account.</span></span> <span data-ttu-id="bb285-116">I det här avsnittet kommer vi distributionsmodell Azure Resource Manager och hur du använder rollbaserad åtkomstkontroll (RBAC) för att styra åtkomsten till dina lagringskonton.</span><span class="sxs-lookup"><span data-stu-id="bb285-116">In this section, we'll talk about the Azure Resource Manager deployment model and how to use Role-Based Access Control (RBAC) to control access to your storage accounts.</span></span> <span data-ttu-id="bb285-117">Vi kommer även tala om hur du hanterar din lagringskontonycklar och hur du återskapa dem.</span><span class="sxs-lookup"><span data-stu-id="bb285-117">We will also talk about managing your storage account keys and how to regenerate them.</span></span>
* <span data-ttu-id="bb285-118">[Data plan säkerhet](#data-plane-security) – skydda åtkomsten till dina Data</span><span class="sxs-lookup"><span data-stu-id="bb285-118">[Data Plane Security](#data-plane-security) – Securing Access to Your Data</span></span>

  <span data-ttu-id="bb285-119">I det här avsnittet ska vi titta på att tillåta åtkomst till de faktiska dataobjekt i ditt lagringskonto, till exempel blobbar, filer, köer och tabeller som använder signaturer för delad åtkomst och åtkomstregler lagras.</span><span class="sxs-lookup"><span data-stu-id="bb285-119">In this section, we'll look at allowing access to the actual data objects in your Storage account, such as blobs, files, queues, and tables, using Shared Access Signatures and Stored Access Policies.</span></span> <span data-ttu-id="bb285-120">Vi tar upp både servicenivåer SAS och konto-nivå SAS.</span><span class="sxs-lookup"><span data-stu-id="bb285-120">We will cover both service-level SAS and account-level SAS.</span></span> <span data-ttu-id="bb285-121">Vi också se hur du begränsar åtkomsten till en specifik IP-adress (eller intervall av IP-adresser), hur du begränsar det protokoll som används för HTTPS och hur återkalla en signatur för delad åtkomst utan att vänta på att gå ut.</span><span class="sxs-lookup"><span data-stu-id="bb285-121">We'll also see how to limit access to a specific IP address (or range of IP addresses), how to limit the protocol used to HTTPS, and how to revoke a Shared Access Signature without waiting for it to expire.</span></span>
* [<span data-ttu-id="bb285-122">Kryptering vid överföring</span><span class="sxs-lookup"><span data-stu-id="bb285-122">Encryption in Transit</span></span>](#encryption-in-transit)

  <span data-ttu-id="bb285-123">Det här avsnittet beskrivs hur du skyddar data vid överföring till eller från Azure Storage.</span><span class="sxs-lookup"><span data-stu-id="bb285-123">This section discusses how to secure data when you transfer it into or out of Azure Storage.</span></span> <span data-ttu-id="bb285-124">Lär dig om att rekommenderade använda HTTPS och kryptering som används av SMB 3.0 för Azure-filresurser.</span><span class="sxs-lookup"><span data-stu-id="bb285-124">We'll talk about the recommended use of HTTPS and the encryption used by SMB 3.0 for Azure File shares.</span></span> <span data-ttu-id="bb285-125">Vi kommer också ta en titt på klientsidan kryptering, som gör det möjligt att kryptera data innan det överförs till lagring i ett klientprogram och dekryptera data när det överförs utanför lagring.</span><span class="sxs-lookup"><span data-stu-id="bb285-125">We will also take a look at Client-side Encryption, which enables you to encrypt the data before it is transferred into Storage in a client application, and to decrypt the data after it is transferred out of Storage.</span></span>
* [<span data-ttu-id="bb285-126">Kryptering i vila</span><span class="sxs-lookup"><span data-stu-id="bb285-126">Encryption at Rest</span></span>](#encryption-at-rest)

  <span data-ttu-id="bb285-127">Vi pratar om Storage Service-kryptering (SSE) och hur du kan aktivera det för ett lagringskonto, vilket resulterar i din blockblobbar, sidblobbar, och tilläggsblobar som krypteras automatiskt när skrivs till Azure Storage.</span><span class="sxs-lookup"><span data-stu-id="bb285-127">We will talk about Storage Service Encryption (SSE), and how you can enable it for a storage account, resulting in your block blobs, page blobs, and append blobs being automatically encrypted when written to Azure Storage.</span></span> <span data-ttu-id="bb285-128">Vi kommer också titta på hur du kan använda Azure Disk Encryption och utforska grundläggande skillnader och fall av diskkryptering jämfört med SSE jämfört med kryptering på klientsidan.</span><span class="sxs-lookup"><span data-stu-id="bb285-128">We will also look at how you can use Azure Disk Encryption and explore the basic differences and cases of Disk Encryption versus SSE versus Client-Side Encryption.</span></span> <span data-ttu-id="bb285-129">Vi ser kort på FIPS-kompatibilitet för USA Offentliga datorer.</span><span class="sxs-lookup"><span data-stu-id="bb285-129">We will briefly look at FIPS compliance for U.S. Government computers.</span></span>
* <span data-ttu-id="bb285-130">Med hjälp av [Storage Analytics](#storage-analytics) granska åtkomsten till Azure Storage</span><span class="sxs-lookup"><span data-stu-id="bb285-130">Using [Storage Analytics](#storage-analytics) to audit access of Azure Storage</span></span>

  <span data-ttu-id="bb285-131">Det här avsnittet beskrivs hur du hittar information i loggarna storage analytics för en begäran.</span><span class="sxs-lookup"><span data-stu-id="bb285-131">This section discusses how to find information in the storage analytics logs for a request.</span></span> <span data-ttu-id="bb285-132">Vi ta en titt på verkliga storage analytics loggdata och se hur du fram om en begäran görs med lagringskontonyckel med en signatur för delad åtkomst eller anonymt, och om den har lyckats eller misslyckats.</span><span class="sxs-lookup"><span data-stu-id="bb285-132">We'll take a look at real storage analytics log data and see how to discern whether a request is made with the Storage account key, with a Shared Access signature, or anonymously, and whether it succeeded or failed.</span></span>
* [<span data-ttu-id="bb285-133">Aktivera webbläsarbaserade klienter med hjälp av CORS</span><span class="sxs-lookup"><span data-stu-id="bb285-133">Enabling Browser-Based Clients using CORS</span></span>](#Cross-Origin-Resource-Sharing-CORS)

  <span data-ttu-id="bb285-134">Det här avsnittet innehåller information om hur du tillåter resursdelning för korsande ursprung (CORS).</span><span class="sxs-lookup"><span data-stu-id="bb285-134">This section talks about how to allow cross-origin resource sharing (CORS).</span></span> <span data-ttu-id="bb285-135">Lär dig om korsdomänåtkomst och hur du hanterar med CORS inbyggda funktioner i Azure Storage.</span><span class="sxs-lookup"><span data-stu-id="bb285-135">We'll talk about cross-domain access, and how to handle it with the CORS capabilities built into Azure Storage.</span></span>

## <a name="management-plane-security"></a><span data-ttu-id="bb285-136">Hantering av plan säkerhet</span><span class="sxs-lookup"><span data-stu-id="bb285-136">Management Plane Security</span></span>
<span data-ttu-id="bb285-137">Management-plan består av åtgärder som påverkar det storage-kontot.</span><span class="sxs-lookup"><span data-stu-id="bb285-137">The management plane consists of operations that affect the storage account itself.</span></span> <span data-ttu-id="bb285-138">Du kan till exempel skapa eller ta bort ett lagringskonto, hämta en lista över storage-konton i en prenumeration, hämta lagringskontonycklarna eller återskapa lagringskontonycklar.</span><span class="sxs-lookup"><span data-stu-id="bb285-138">For example, you can create or delete a storage account, get a list of storage accounts in a subscription, retrieve the storage account keys, or regenerate the storage account keys.</span></span>

<span data-ttu-id="bb285-139">När du skapar ett nytt lagringskonto, Välj en distributionsmodell för klassiska eller Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="bb285-139">When you create a new storage account, you select a deployment model of Classic or Resource Manager.</span></span> <span data-ttu-id="bb285-140">Den klassiska modellen för att skapa resurser i Azure kan endast fullständiga åtkomst till prenumerationen och i sin tur storage-konto.</span><span class="sxs-lookup"><span data-stu-id="bb285-140">The Classic model of creating resources in Azure only allows all-or-nothing access to the subscription, and in turn, the storage account.</span></span>

<span data-ttu-id="bb285-141">Den här guiden fokuserar på Resource Manager-modellen som är det rekommenderade sättet för att skapa storage-konton.</span><span class="sxs-lookup"><span data-stu-id="bb285-141">This guide focuses on the Resource Manager model which is the recommended means for creating storage accounts.</span></span> <span data-ttu-id="bb285-142">Med den Resource Manager storage-konton, snarare än ger tillgång till hela prenumerationen, kan du styra åtkomsten på en mer begränsad hantering plan med hjälp av rollbaserad åtkomstkontroll (RBAC).</span><span class="sxs-lookup"><span data-stu-id="bb285-142">With the Resource Manager storage accounts, rather than giving access to the entire subscription, you can control access on a more finite level to the management plane using Role-Based Access Control (RBAC).</span></span>

### <a name="how-to-secure-your-storage-account-with-role-based-access-control-rbac"></a><span data-ttu-id="bb285-143">Hur du skyddar ditt lagringskonto med rollbaserad åtkomstkontroll (RBAC)</span><span class="sxs-lookup"><span data-stu-id="bb285-143">How to secure your storage account with Role-Based Access Control (RBAC)</span></span>
<span data-ttu-id="bb285-144">Vi pratar om RBAC är och hur du kan använda den.</span><span class="sxs-lookup"><span data-stu-id="bb285-144">Let's talk about what RBAC is, and how you can use it.</span></span> <span data-ttu-id="bb285-145">Varje Azure-prenumerationen har en Azure Active Directory.</span><span class="sxs-lookup"><span data-stu-id="bb285-145">Each Azure subscription has an Azure Active Directory.</span></span> <span data-ttu-id="bb285-146">Användare, grupper och program från katalogen kan beviljas åtkomst för att hantera resurser i Azure-prenumeration som använder Resource Manager-distributionsmodellen.</span><span class="sxs-lookup"><span data-stu-id="bb285-146">Users, groups, and applications from that directory can be granted access to manage resources in the Azure subscription that use the Resource Manager deployment model.</span></span> <span data-ttu-id="bb285-147">Detta kallas för rollbaserad åtkomstkontroll (RBAC).</span><span class="sxs-lookup"><span data-stu-id="bb285-147">This is referred to as Role-Based Access Control (RBAC).</span></span> <span data-ttu-id="bb285-148">Du kan använda för att hantera åtkomst i [Azure-portalen](https://portal.azure.com/), [Azure CLI-verktygen](../cli-install-nodejs.md), [PowerShell](/powershell/azureps-cmdlets-docs), eller [Azure Storage Resource Provider REST API: er för](https://msdn.microsoft.com/library/azure/mt163683.aspx).</span><span class="sxs-lookup"><span data-stu-id="bb285-148">To manage this access, you can use the [Azure portal](https://portal.azure.com/), the [Azure CLI tools](../cli-install-nodejs.md), [PowerShell](/powershell/azureps-cmdlets-docs), or the [Azure Storage Resource Provider REST APIs](https://msdn.microsoft.com/library/azure/mt163683.aspx).</span></span>

<span data-ttu-id="bb285-149">Med Resource Manager-modellen placera storage-konto i en grupp och kontrollera åtkomst till företagsresurser med den specifika storage-konto med Azure Active Directory management plan.</span><span class="sxs-lookup"><span data-stu-id="bb285-149">With the Resource Manager model, you put the storage account in a resource group and control access to the management plane of that specific storage account using Azure Active Directory.</span></span> <span data-ttu-id="bb285-150">Du kan till exempel ge särskilda användare möjlighet att komma åt lagringskontonycklar, medan andra användare kan visa information om lagringskontot, men det går inte att komma åt lagringskontonycklarna.</span><span class="sxs-lookup"><span data-stu-id="bb285-150">For example, you can give specific users the ability to access the storage account keys, while other users can view information about the storage account, but cannot access the storage account keys.</span></span>

#### <a name="granting-access"></a><span data-ttu-id="bb285-151">Att bevilja åtkomst</span><span class="sxs-lookup"><span data-stu-id="bb285-151">Granting Access</span></span>
<span data-ttu-id="bb285-152">Genom att tilldela användare, grupper och program i det högra omfånget rollen RBAC beviljas åtkomst.</span><span class="sxs-lookup"><span data-stu-id="bb285-152">Access is granted by assigning the appropriate RBAC role to users, groups, and applications, at the right scope.</span></span> <span data-ttu-id="bb285-153">Om du vill bevilja åtkomst till hela prenumerationen kan du tilldela en roll på prenumerationsnivån.</span><span class="sxs-lookup"><span data-stu-id="bb285-153">To grant access to the entire subscription, you assign a role at the subscription level.</span></span> <span data-ttu-id="bb285-154">Du kan bevilja åtkomst till alla resurser i en resursgrupp genom att bevilja behörigheter till resursgruppen.</span><span class="sxs-lookup"><span data-stu-id="bb285-154">You can grant access to all of the resources in a resource group by granting permissions to the resource group itself.</span></span> <span data-ttu-id="bb285-155">Du kan också tilldela specifika roller till specifika resurser, till exempel storage-konton.</span><span class="sxs-lookup"><span data-stu-id="bb285-155">You can also assign specific roles to specific resources, such as storage accounts.</span></span>

<span data-ttu-id="bb285-156">Här är de viktigaste aspekterna som du behöver veta om att använda RBAC att komma åt hanteringsåtgärder för ett Azure Storage-konto:</span><span class="sxs-lookup"><span data-stu-id="bb285-156">Here are the main points that you need to know about using RBAC to access the management operations of an Azure Storage account:</span></span>

* <span data-ttu-id="bb285-157">När du tilldelar åtkomst, tilldela en roll i princip för kontot som du vill ha åtkomst.</span><span class="sxs-lookup"><span data-stu-id="bb285-157">When you assign access, you basically assign a role to the account that you want to have access.</span></span> <span data-ttu-id="bb285-158">Du kan styra åtkomst till de åtgärder som används för att hantera detta lagringskonto, men inte dataobjekt i kontot.</span><span class="sxs-lookup"><span data-stu-id="bb285-158">You can control access to the operations used to manage that storage account, but not to the data objects in the account.</span></span> <span data-ttu-id="bb285-159">Exempelvis kan du bevilja behörigheten att hämta egenskaperna för storage-konto (till exempel redundans), men inte till en behållare eller data i en behållare i Blob Storage.</span><span class="sxs-lookup"><span data-stu-id="bb285-159">For example, you can grant permission to retrieve the properties of the storage account (such as redundancy), but not to a container or data within a container inside Blob Storage.</span></span>
* <span data-ttu-id="bb285-160">Du kan ge dem behörighet att läsa lagringskontonycklarna för någon behörighet att komma åt dataobjekt i storage-konto och användaren kan sedan använda dessa nycklar för att få åtkomst till blobbar, köer, tabeller och filer.</span><span class="sxs-lookup"><span data-stu-id="bb285-160">For someone to have permission to access the data objects in the storage account, you can give them permission to read the storage account keys, and that user can then use those keys to access the blobs, queues, tables, and files.</span></span>
* <span data-ttu-id="bb285-161">Roller kan tilldelas till ett specifikt användarkonto, en grupp av användare eller till ett visst program.</span><span class="sxs-lookup"><span data-stu-id="bb285-161">Roles can be assigned to a specific user account, a group of users, or to a specific application.</span></span>
* <span data-ttu-id="bb285-162">Varje roll har en lista över och inte åtgärder.</span><span class="sxs-lookup"><span data-stu-id="bb285-162">Each role has a list of Actions and Not Actions.</span></span> <span data-ttu-id="bb285-163">Till exempel virtuella deltagarrollen har en åtgärd av ”listKeys” som gör det möjligt för lagringskontonycklar att läsas.</span><span class="sxs-lookup"><span data-stu-id="bb285-163">For example, the Virtual Machine Contributor role has an Action of "listKeys" that allows the storage account keys to be read.</span></span> <span data-ttu-id="bb285-164">Deltagaren har ”inte åtgärder”, som uppdatering åtkomst för användare i Active Directory.</span><span class="sxs-lookup"><span data-stu-id="bb285-164">The Contributor has "Not Actions" such as updating the access for users in the Active Directory.</span></span>
* <span data-ttu-id="bb285-165">Roller för lagring inkluderar (men är inte begränsade till) följande:</span><span class="sxs-lookup"><span data-stu-id="bb285-165">Roles for storage include (but are not limited to) the following:</span></span>

  * <span data-ttu-id="bb285-166">Ägaren – de kan hantera allt, inklusive åtkomst.</span><span class="sxs-lookup"><span data-stu-id="bb285-166">Owner – They can manage everything, including access.</span></span>
  * <span data-ttu-id="bb285-167">Deltagare – de kan göra något ägaren kan förutom tilldela åtkomst.</span><span class="sxs-lookup"><span data-stu-id="bb285-167">Contributor – They can do anything the owner can do except assign access.</span></span> <span data-ttu-id="bb285-168">Någon med den här rollen kan visa och återskapa lagringskontonycklar.</span><span class="sxs-lookup"><span data-stu-id="bb285-168">Someone with this role can view and regenerate the storage account keys.</span></span> <span data-ttu-id="bb285-169">De kan lagringskontonycklar, för att komma åt dataobjekt.</span><span class="sxs-lookup"><span data-stu-id="bb285-169">With the storage account keys, they can access the data objects.</span></span>
  * <span data-ttu-id="bb285-170">Läsare kan visa information om lagringskontot utom hemligheter.</span><span class="sxs-lookup"><span data-stu-id="bb285-170">Reader – They can view information about the storage account, except secrets.</span></span> <span data-ttu-id="bb285-171">Till exempel om du tilldelar en roll med reader-behörighet för storage-konto till någon de kan visa egenskaperna för storage-konto, men de kan inte göra ändringar i egenskaperna för eller visa lagringskontonycklarna.</span><span class="sxs-lookup"><span data-stu-id="bb285-171">For example, if you assign a role with reader permissions on the storage account to someone, they can view the properties of the storage account, but they can't make any changes to the properties or view the storage account keys.</span></span>
  * <span data-ttu-id="bb285-172">Storage-konto deltagare – de kan hantera storage-konto – de kan läsa prenumerationens resursgrupper och resurser, och skapa och hantera distributionen av resursgrupper prenumeration.</span><span class="sxs-lookup"><span data-stu-id="bb285-172">Storage Account Contributor – They can manage the storage account – they can read the subscription's resource groups and resources, and create and manage subscription resource group deployments.</span></span> <span data-ttu-id="bb285-173">De kan också komma åt lagringskontonycklar, vilket i sin tur innebär att de kan komma åt dataplan.</span><span class="sxs-lookup"><span data-stu-id="bb285-173">They can also access the storage account keys, which in turn means they can access the data plane.</span></span>
  * <span data-ttu-id="bb285-174">Administratör för användaråtkomst – de hantera användarnas åtkomst till lagringskontot.</span><span class="sxs-lookup"><span data-stu-id="bb285-174">User Access Administrator – They can manage user access to the storage account.</span></span> <span data-ttu-id="bb285-175">De kan till exempel ge läsaren åtkomst till en specifik användare.</span><span class="sxs-lookup"><span data-stu-id="bb285-175">For example, they can grant Reader access to a specific user.</span></span>
  * <span data-ttu-id="bb285-176">Virtual Machine-deltagare – som de kan hantera virtuella datorer men inte lagringskontot som de är anslutna.</span><span class="sxs-lookup"><span data-stu-id="bb285-176">Virtual Machine Contributor – They can manage virtual machines but not the storage account to which they are connected.</span></span> <span data-ttu-id="bb285-177">Den här rollen kan visa lagringskontonycklar, vilket innebär att användaren som du tilldelar den här rollen kan uppdatera dataplan.</span><span class="sxs-lookup"><span data-stu-id="bb285-177">This role can list the storage account keys, which means that the user to whom you assign this role can update the data plane.</span></span>

    <span data-ttu-id="bb285-178">En användare kan skapa en virtuell dator ha måste de för att kunna skapa motsvarande VHD-filen i ett lagringskonto.</span><span class="sxs-lookup"><span data-stu-id="bb285-178">In order for a user to create a virtual machine, they have to be able to create the corresponding VHD file in a storage account.</span></span> <span data-ttu-id="bb285-179">För att göra det, behöver de för att kunna hämta lagringskontots åtkomstnyckel och skickar den till API: N att skapa den virtuella datorn.</span><span class="sxs-lookup"><span data-stu-id="bb285-179">To do that, they need to be able to retrieve the storage account key and pass it to the API creating the VM.</span></span> <span data-ttu-id="bb285-180">De måste därför ha den här behörigheten så att de kan visa en lista över nycklar till lagringskontot.</span><span class="sxs-lookup"><span data-stu-id="bb285-180">Therefore, they must have this permission so they can list the storage account keys.</span></span>
* <span data-ttu-id="bb285-181">Möjligheten att definiera anpassade roller är en funktion som hjälper dig att skapa en uppsättning åtgärder från en lista över tillgängliga åtgärder kan utföras på Azure-resurser.</span><span class="sxs-lookup"><span data-stu-id="bb285-181">The ability to define custom roles is a feature that allows you to compose a set of actions from a list of available actions that can be performed on Azure resources.</span></span>
* <span data-ttu-id="bb285-182">Användaren måste ställas in i Azure Active Directory innan du kan tilldela en roll till dem.</span><span class="sxs-lookup"><span data-stu-id="bb285-182">The user has to be set up in your Azure Active Directory before you can assign a role to them.</span></span>
* <span data-ttu-id="bb285-183">Du kan skapa en rapport över som beviljats/återkallas vilken typ av åtkomst till och från vilken och på vilka scope med PowerShell eller Azure CLI.</span><span class="sxs-lookup"><span data-stu-id="bb285-183">You can create a report of who granted/revoked what kind of access to/from whom and on what scope using PowerShell or the Azure CLI.</span></span>

#### <a name="resources"></a><span data-ttu-id="bb285-184">Resurser</span><span class="sxs-lookup"><span data-stu-id="bb285-184">Resources</span></span>
* [<span data-ttu-id="bb285-185">Azure Active Directory rollbaserad åtkomstkontroll</span><span class="sxs-lookup"><span data-stu-id="bb285-185">Azure Active Directory Role-based Access Control</span></span>](../active-directory/role-based-access-control-configure.md)

  <span data-ttu-id="bb285-186">Den här artikeln förklarar Azure Active Directorys rollbaserade åtkomstkontroll och hur den fungerar.</span><span class="sxs-lookup"><span data-stu-id="bb285-186">This article explains the Azure Active Directory Role-based Access Control and how it works.</span></span>
* [<span data-ttu-id="bb285-187">RBAC: inbyggda roller</span><span class="sxs-lookup"><span data-stu-id="bb285-187">RBAC: Built in Roles</span></span>](../active-directory/role-based-access-built-in-roles.md)

  <span data-ttu-id="bb285-188">Den här artikeln beskrivs alla inbyggda roller finns i RBAC.</span><span class="sxs-lookup"><span data-stu-id="bb285-188">This article details all of the built-in roles available in RBAC.</span></span>
* [<span data-ttu-id="bb285-189">Förstå Resource Manager-distribution och klassisk distribution</span><span class="sxs-lookup"><span data-stu-id="bb285-189">Understanding Resource Manager deployment and classic deployment</span></span>](../azure-resource-manager/resource-manager-deployment-model.md)

  <span data-ttu-id="bb285-190">Den här artikeln beskriver Resource Manager-distribution och klassiska distributionsmodeller och förklarar fördelarna med att använda Resource Manager och resursgrupper.</span><span class="sxs-lookup"><span data-stu-id="bb285-190">This article explains the Resource Manager deployment and classic deployment models, and explains the benefits of using the Resource Manager and resource groups.</span></span> <span data-ttu-id="bb285-191">Den förklarar hur Azure Compute, nätverk och lagring leverantörer fungerar med Resource Manager-modellen.</span><span class="sxs-lookup"><span data-stu-id="bb285-191">It explains how the Azure Compute, Network, and Storage Providers work under the Resource Manager model.</span></span>
* [<span data-ttu-id="bb285-192">Hantera rollbaserad åtkomstkontroll med REST API</span><span class="sxs-lookup"><span data-stu-id="bb285-192">Managing Role-Based Access Control with the REST API</span></span>](../active-directory/role-based-access-control-manage-access-rest.md)

  <span data-ttu-id="bb285-193">Den här artikeln visar hur du använder REST API för att hantera RBAC.</span><span class="sxs-lookup"><span data-stu-id="bb285-193">This article shows how to use the REST API to manage RBAC.</span></span>
* [<span data-ttu-id="bb285-194">Azure Storage Resource Provider REST API-referens</span><span class="sxs-lookup"><span data-stu-id="bb285-194">Azure Storage Resource Provider REST API Reference</span></span>](https://msdn.microsoft.com/library/azure/mt163683.aspx)

  <span data-ttu-id="bb285-195">Detta är referens för API: er som du kan använda för att hantera ditt lagringskonto via programmering.</span><span class="sxs-lookup"><span data-stu-id="bb285-195">This is the reference for the APIs you can use to manage your storage account programmatically.</span></span>
* [<span data-ttu-id="bb285-196">Utvecklarhandbok för autentisering med Azure Resource Manager API</span><span class="sxs-lookup"><span data-stu-id="bb285-196">Developer's guide to auth with Azure Resource Manager API</span></span>](http://www.dushyantgill.com/blog/2015/05/23/developers-guide-to-auth-with-azure-resource-manager-api/)

  <span data-ttu-id="bb285-197">Den här artikeln visar hur du autentiserar med Resource Manager-API: er.</span><span class="sxs-lookup"><span data-stu-id="bb285-197">This article shows how to authenticate using the Resource Manager APIs.</span></span>
* [<span data-ttu-id="bb285-198">Rollbaserad åtkomstkontroll i Microsoft Azure från Ignite</span><span class="sxs-lookup"><span data-stu-id="bb285-198">Role-Based Access Control for Microsoft Azure from Ignite</span></span>](https://channel9.msdn.com/events/Ignite/2015/BRK2707)

  <span data-ttu-id="bb285-199">Det här är en länk till en video på Channel 9 från 2015 MS Ignite-konferensen.</span><span class="sxs-lookup"><span data-stu-id="bb285-199">This is a link to a video on Channel 9 from the 2015 MS Ignite conference.</span></span> <span data-ttu-id="bb285-200">I den här sessionen talar de om åtkomsthantering och rapporteringsfunktioner i Azure och utforskar bästa praxis när det gäller att säkra åtkomst till Azure-prenumerationer med Azure Active Directory.</span><span class="sxs-lookup"><span data-stu-id="bb285-200">In this session, they talk about access management and reporting capabilities in Azure, and explore best practices around securing access to Azure subscriptions using Azure Active Directory.</span></span>

### <a name="managing-your-storage-account-keys"></a><span data-ttu-id="bb285-201">Hantera dina nycklar för Lagringskonto</span><span class="sxs-lookup"><span data-stu-id="bb285-201">Managing Your Storage Account Keys</span></span>
<span data-ttu-id="bb285-202">Lagringskontonycklar är 512-bitars strängar som skapats av Azure som tillsammans med lagringskontots namn, kan användas för åtkomst till dataobjekt som lagras i lagringskontot, t.ex. blobbar entiteter i en tabell, Kömeddelanden och filer på en filresurs på Azure.</span><span class="sxs-lookup"><span data-stu-id="bb285-202">Storage account keys are 512-bit strings created by Azure that, along with the storage account name, can be used to access the data objects stored in the storage account, e.g. blobs, entities within a table, queue messages, and files on an Azure File share.</span></span> <span data-ttu-id="bb285-203">Kontrollera åtkomst till lagring konto nycklar kontroller har åtkomst till dataplan för det lagringskontot.</span><span class="sxs-lookup"><span data-stu-id="bb285-203">Controlling access to the storage account keys controls access to the data plane for that storage account.</span></span>

<span data-ttu-id="bb285-204">Varje lagringskonto har två nycklar som kallas ”nyckel 1” och ”nyckel 2” i den [Azure-portalen](http://portal.azure.com/) och i PowerShell-cmdlets.</span><span class="sxs-lookup"><span data-stu-id="bb285-204">Each storage account has two keys referred to as "Key 1" and "Key 2" in the [Azure portal](http://portal.azure.com/) and in the PowerShell cmdlets.</span></span> <span data-ttu-id="bb285-205">Dessa kan återskapas manuellt med hjälp av en av flera metoder, inklusive men inte begränsat till med hjälp av den [Azure-portalen](https://portal.azure.com/), PowerShell, Azure CLI eller via programmering med Storage-klientbiblioteket för .NET eller Azure Storage Services REST API.</span><span class="sxs-lookup"><span data-stu-id="bb285-205">These can be regenerated manually using one of several methods, including, but not limited to using the [Azure portal](https://portal.azure.com/), PowerShell, the Azure CLI, or programmatically using the .NET Storage Client Library or the Azure Storage Services REST API.</span></span>

<span data-ttu-id="bb285-206">Det finns många anledningar för att återskapa nycklar för ditt lagringskonto.</span><span class="sxs-lookup"><span data-stu-id="bb285-206">There are any number of reasons to regenerate your storage account keys.</span></span>

* <span data-ttu-id="bb285-207">Du kan återskapa dem regelbundet av säkerhetsskäl.</span><span class="sxs-lookup"><span data-stu-id="bb285-207">You might regenerate them on a regular basis for security reasons.</span></span>
* <span data-ttu-id="bb285-208">Du kan återskapa din lagringskontonycklar om någon hanteras och hacka till ett program som du kan hämta den nyckel som hårdkodad eller sparats i en konfigurationsfil och få fullständig åtkomst till ditt lagringskonto.</span><span class="sxs-lookup"><span data-stu-id="bb285-208">You would regenerate your storage account keys if someone managed to hack into an application and retrieve the key that was hardcoded or saved in a configuration file, giving them full access to your storage account.</span></span>
* <span data-ttu-id="bb285-209">En annan fallet för nycklar är om ditt team använder ett Lagringsutforskaren program som behåller lagringskontots åtkomstnyckel och en av gruppmedlemmarna lämnar.</span><span class="sxs-lookup"><span data-stu-id="bb285-209">Another case for key regeneration is if your team is using a Storage Explorer application that retains the storage account key, and one of the team members leaves.</span></span> <span data-ttu-id="bb285-210">Programmet fortsätter att arbeta, vilket ger dem åtkomst till ditt lagringskonto när de är borta.</span><span class="sxs-lookup"><span data-stu-id="bb285-210">The application would continue to work, giving them access to your storage account after they're gone.</span></span> <span data-ttu-id="bb285-211">Det är faktiskt primärt därför de skapats kontonivå signaturer för delad åtkomst – du kan använda en kontonivå SAS istället för att lagra åtkomstnycklarna i en konfigurationsfil.</span><span class="sxs-lookup"><span data-stu-id="bb285-211">This is actually the primary reason they created account-level Shared Access Signatures – you can use an account-level SAS instead of storing the access keys in a configuration file.</span></span>

#### <a name="key-regeneration-plan"></a><span data-ttu-id="bb285-212">Nyckeln återskapas plan</span><span class="sxs-lookup"><span data-stu-id="bb285-212">Key regeneration plan</span></span>
<span data-ttu-id="bb285-213">Du behöver bara återskapa nyckeln som du använder utan lite planering.</span><span class="sxs-lookup"><span data-stu-id="bb285-213">You don't want to just regenerate the key you are using without some planning.</span></span> <span data-ttu-id="bb285-214">Om du gör det kan du beskärs all åtkomst till den storage-konto, vilket kan orsaka avbrott i större.</span><span class="sxs-lookup"><span data-stu-id="bb285-214">If you do that, you could cut off all access to that storage account, which can cause major disruption.</span></span> <span data-ttu-id="bb285-215">Det är därför det finns två nycklar.</span><span class="sxs-lookup"><span data-stu-id="bb285-215">This is why there are two keys.</span></span> <span data-ttu-id="bb285-216">Du bör Generera en nyckel i taget.</span><span class="sxs-lookup"><span data-stu-id="bb285-216">You should regenerate one key at a time.</span></span>

<span data-ttu-id="bb285-217">Innan du återskapar dina nycklar måste du ha en lista över alla program som är beroende av lagringskontot, samt andra tjänster som du använder i Azure.</span><span class="sxs-lookup"><span data-stu-id="bb285-217">Before you regenerate your keys, be sure you have a list of all of your applications that are dependent on the storage account, as well as any other services you are using in Azure.</span></span> <span data-ttu-id="bb285-218">Till exempel om du använder Azure Media Services som är beroende av ditt lagringskonto, måste du synkroniserar du om åtkomstnycklarna med medietjänsten när du återskapar nyckeln.</span><span class="sxs-lookup"><span data-stu-id="bb285-218">For example, if you are using Azure Media Services that are dependent on your storage account, you must re-sync the access keys with your media service after you regenerate the key.</span></span> <span data-ttu-id="bb285-219">Om du använder alla program, till exempel en lagringsutforskare behöver du nya nycklar för dessa program samt.</span><span class="sxs-lookup"><span data-stu-id="bb285-219">If you are using any applications such as a storage explorer, you will need to provide the new keys to those applications as well.</span></span> <span data-ttu-id="bb285-220">Observera att om du har virtuella datorer vars VHD-filer som lagras i lagringskontot läggs de inte påverkas av de lagringskontonycklarna genereras.</span><span class="sxs-lookup"><span data-stu-id="bb285-220">Note that if you have VMs whose VHD files are stored in the storage account, they will not be affected by regenerating the storage account keys.</span></span>

<span data-ttu-id="bb285-221">Du kan återskapa dina nycklar i Azure-portalen.</span><span class="sxs-lookup"><span data-stu-id="bb285-221">You can regenerate your keys in the Azure portal.</span></span> <span data-ttu-id="bb285-222">När nycklar genereras om kan de ta upp till 10 minuter att synkroniseras mellan lagringstjänster.</span><span class="sxs-lookup"><span data-stu-id="bb285-222">Once keys are regenerated they can take up to 10 minutes to be synchronized across Storage Services.</span></span>

<span data-ttu-id="bb285-223">När du är klar kan du här är den allmänna processen med information om hur du ska ändra din nyckel.</span><span class="sxs-lookup"><span data-stu-id="bb285-223">When you're ready, here's the general process detailing how you should change your key.</span></span> <span data-ttu-id="bb285-224">I det här fallet är förutsätter att du använder nyckel 1 och du ska ändra allt för att använda nyckel 2 i stället.</span><span class="sxs-lookup"><span data-stu-id="bb285-224">In this case, the assumption is that you are currently using Key 1 and you are going to change everything to use Key 2 instead.</span></span>

1. <span data-ttu-id="bb285-225">Återskapa nyckeln 2 för att säkerställa att den är skyddad.</span><span class="sxs-lookup"><span data-stu-id="bb285-225">Regenerate Key 2 to ensure that it is secure.</span></span> <span data-ttu-id="bb285-226">Du kan göra detta i Azure-portalen.</span><span class="sxs-lookup"><span data-stu-id="bb285-226">You can do this in the Azure portal.</span></span>
2. <span data-ttu-id="bb285-227">Ändra lagringsnyckel om du vill använda nyckel 2 nytt värde i alla program där lagringsnyckeln lagras.</span><span class="sxs-lookup"><span data-stu-id="bb285-227">In all of the applications where the storage key is stored, change the storage key to use Key 2's new value.</span></span> <span data-ttu-id="bb285-228">Testa och publicera programmet.</span><span class="sxs-lookup"><span data-stu-id="bb285-228">Test and publish the application.</span></span>
3. <span data-ttu-id="bb285-229">När alla program och tjänster som är igång och körs korrekt återskapa nyckel 1.</span><span class="sxs-lookup"><span data-stu-id="bb285-229">After all of the applications and services are up and running successfully, regenerate Key 1.</span></span> <span data-ttu-id="bb285-230">Detta säkerställer att vem som helst som du inte har uttryckligen gett den nya nyckeln kommer inte längre åtkomst till lagringskontot.</span><span class="sxs-lookup"><span data-stu-id="bb285-230">This ensures that anybody to whom you have not expressly given the new key will no longer have access to the storage account.</span></span>

<span data-ttu-id="bb285-231">Om du använder nyckel 2 kan du använda samma process, men omvänd nyckelnamnen.</span><span class="sxs-lookup"><span data-stu-id="bb285-231">If you are currently using Key 2, you can use the same process, but reverse the key names.</span></span>

<span data-ttu-id="bb285-232">Du kan migrera över ett par dagar, ändra varje program för att använda den nya nyckeln och publicera den.</span><span class="sxs-lookup"><span data-stu-id="bb285-232">You can migrate over a couple of days, changing each application to use the new key and publishing it.</span></span> <span data-ttu-id="bb285-233">När alla är klar bör du gå tillbaka och återskapa den gamla nyckeln så att den inte längre fungerar.</span><span class="sxs-lookup"><span data-stu-id="bb285-233">After all of them are done, you should then go back and regenerate the old key so it no longer works.</span></span>

<span data-ttu-id="bb285-234">Ett annat alternativ är att placera lagringskontots åtkomstnyckel i en [Azure Key Vault](https://azure.microsoft.com/services/key-vault/) som en hemlighet och ha dina program hämta nyckeln därifrån.</span><span class="sxs-lookup"><span data-stu-id="bb285-234">Another option is to put the storage account key in an [Azure Key Vault](https://azure.microsoft.com/services/key-vault/) as a secret and have your applications retrieve the key from there.</span></span> <span data-ttu-id="bb285-235">När du återskapa nyckeln och uppdaterar Azure Key Vault måste sedan program som inte distribueras eftersom de ska hämta den nya nyckeln från Azure Key Vault automatiskt.</span><span class="sxs-lookup"><span data-stu-id="bb285-235">Then when you regenerate the key and update the Azure Key Vault, the applications will not need to be redeployed because they will pick up the new key from the Azure Key Vault automatically.</span></span> <span data-ttu-id="bb285-236">Observera att du kan låta programmet läsa nyckeln varje gång du behöver den eller du kan cachelagra i minnet och om det misslyckas när du använder den, hämta nyckeln igen från Azure Key Vault.</span><span class="sxs-lookup"><span data-stu-id="bb285-236">Note that you can have the application read the key each time you need it, or you can cache it in memory and if it fails when using it, retrieve the key again from the Azure Key Vault.</span></span>

<span data-ttu-id="bb285-237">Med hjälp av Azure Key Vault lägger till ytterligare en säkerhetsnivå för dina lagringsnycklar.</span><span class="sxs-lookup"><span data-stu-id="bb285-237">Using Azure Key Vault also adds another level of security for your storage keys.</span></span> <span data-ttu-id="bb285-238">Om du använder den här metoden kan har du aldrig lagring viktiga hårdkodad i en konfigurationsfil, vilket tar bort den minimering av någon får tillgång till nycklarna utan uttryckligt tillstånd.</span><span class="sxs-lookup"><span data-stu-id="bb285-238">If you use this method, you will never have the storage key hardcoded in a configuration file, which removes that avenue of somebody getting access to the keys without specific permission.</span></span>

<span data-ttu-id="bb285-239">En annan fördel med att använda Azure Key Vault är att du kan också styra åtkomst till dina nycklar med Azure Active Directory.</span><span class="sxs-lookup"><span data-stu-id="bb285-239">Another advantage of using Azure Key Vault is you can also control access to your keys using Azure Active Directory.</span></span> <span data-ttu-id="bb285-240">Det innebär att du kan bevilja åtkomst till program som behöver hämta nycklarna från Azure Key Vault och vet att andra program inte tillgång till nycklarna utan att ge dem behörighet specifikt handfull.</span><span class="sxs-lookup"><span data-stu-id="bb285-240">This means you can grant access to the handful of applications that need to retrieve the keys from Azure Key Vault, and know that other applications will not be able to access the keys without granting them permission specifically.</span></span>

<span data-ttu-id="bb285-241">Obs: Det rekommenderas att använda endast en av nycklarna i alla program på samma gång.</span><span class="sxs-lookup"><span data-stu-id="bb285-241">Note: it is recommended to use only one of the keys in all of your applications at the same time.</span></span> <span data-ttu-id="bb285-242">Om du använder nyckel 1 på vissa platser och nyckel 2 i andra, kan du inte rotera dina nycklar utan ett program att förlora åtkomsten.</span><span class="sxs-lookup"><span data-stu-id="bb285-242">If you use Key 1 in some places and Key 2 in others, you will not be able to rotate your keys without some application losing access.</span></span>

#### <a name="resources"></a><span data-ttu-id="bb285-243">Resurser</span><span class="sxs-lookup"><span data-stu-id="bb285-243">Resources</span></span>
* [<span data-ttu-id="bb285-244">Om Azure Storage-konton</span><span class="sxs-lookup"><span data-stu-id="bb285-244">About Azure Storage Accounts</span></span>](storage-create-storage-account.md#regenerate-storage-access-keys)

  <span data-ttu-id="bb285-245">Den här artikeln ger en översikt över lagringskonton och beskriver visa, kopiera och återskapa åtkomstnycklar för lagring.</span><span class="sxs-lookup"><span data-stu-id="bb285-245">This article gives an overview of storage accounts and discusses viewing, copying, and regenerating storage access keys.</span></span>
* [<span data-ttu-id="bb285-246">Azure Storage Resource Provider REST API-referens</span><span class="sxs-lookup"><span data-stu-id="bb285-246">Azure Storage Resource Provider REST API Reference</span></span>](https://msdn.microsoft.com/library/mt163683.aspx)

  <span data-ttu-id="bb285-247">Den här artikeln innehåller länkar till specifika artiklar om hur du hämtar lagringskontonycklar och återskapa lagringskontonycklar för ett Azure-konto med hjälp av REST-API.</span><span class="sxs-lookup"><span data-stu-id="bb285-247">This article contains links to specific articles about retrieving the storage account keys and regenerating the storage account keys for an Azure Account using the REST API.</span></span> <span data-ttu-id="bb285-248">Obs: Detta är Resource Manager storage-konton.</span><span class="sxs-lookup"><span data-stu-id="bb285-248">Note: This is for  Resource Manager storage accounts.</span></span>
* [<span data-ttu-id="bb285-249">Åtgärder på storage-konton</span><span class="sxs-lookup"><span data-stu-id="bb285-249">Operations on storage accounts</span></span>](https://msdn.microsoft.com/library/ee460790.aspx)

  <span data-ttu-id="bb285-250">Den här artikeln i Storage Service Manager REST API Reference innehåller länkar till specifika artiklar om hämtning och återskapa lagringskontonycklar med hjälp av REST-API.</span><span class="sxs-lookup"><span data-stu-id="bb285-250">This article in the Storage Service Manager REST API Reference contains links to specific articles on retrieving and regenerating the storage account keys using the REST API.</span></span> <span data-ttu-id="bb285-251">Obs: Detta är om klassiska lagringskonton.</span><span class="sxs-lookup"><span data-stu-id="bb285-251">Note: This is for the Classic storage accounts.</span></span>
* [<span data-ttu-id="bb285-252">Lämna för att nyckelhantering – hantera åtkomst till Azure Storage-data med hjälp av Azure AD</span><span class="sxs-lookup"><span data-stu-id="bb285-252">Say goodbye to key management – manage access to Azure Storage data using Azure AD</span></span>](http://www.dushyantgill.com/blog/2015/04/26/say-goodbye-to-key-management-manage-access-to-azure-storage-data-using-azure-ad/)

  <span data-ttu-id="bb285-253">Den här artikeln visar hur du använder Active Directory för att styra åtkomsten till din Azure Storage-nycklar i Azure Key Vault.</span><span class="sxs-lookup"><span data-stu-id="bb285-253">This article shows how to use Active Directory to control access to your Azure Storage keys in Azure Key Vault.</span></span> <span data-ttu-id="bb285-254">Den visar även hur du använder ett Azure Automation-jobb för att återskapa nycklar timme.</span><span class="sxs-lookup"><span data-stu-id="bb285-254">It also shows how to use an Azure Automation job to regenerate the keys on an hourly basis.</span></span>

## <a name="data-plane-security"></a><span data-ttu-id="bb285-255">Säkerhet för data-plan</span><span class="sxs-lookup"><span data-stu-id="bb285-255">Data Plane Security</span></span>
<span data-ttu-id="bb285-256">Plan för datasäkerhet refererar till de metoder som används för att säkra dataobjekt som lagras i Azure Storage-blobbar, köer, tabeller och filer.</span><span class="sxs-lookup"><span data-stu-id="bb285-256">Data Plane Security refers to the methods used to secure the data objects stored in Azure Storage – the blobs, queues, tables, and files.</span></span> <span data-ttu-id="bb285-257">Vi har sett metoder för att kryptera data och säkerhet under överföring av data, men hur skaffar du om att tillåta åtkomst till objekten?</span><span class="sxs-lookup"><span data-stu-id="bb285-257">We've seen methods to encrypt the data and security during transit of the data, but how do you go about allowing access to the objects?</span></span>

<span data-ttu-id="bb285-258">Det finns två metoder för att styra åtkomst till dataobjekt sig själva i princip.</span><span class="sxs-lookup"><span data-stu-id="bb285-258">There are basically two methods for controlling access to the data objects themselves.</span></span> <span data-ttu-id="bb285-259">Först är genom att kontrollera åtkomst till lagringskontonycklarna och andra använder signaturer för delad åtkomst för att bevilja åtkomst till specifika dataobjekt för en viss tidsperiod.</span><span class="sxs-lookup"><span data-stu-id="bb285-259">The first is by controlling access to the storage account keys, and the second is using Shared Access Signatures to grant access to specific data objects for a specific amount of time.</span></span>

<span data-ttu-id="bb285-260">Ett undantag för att notera är att du kan låta allmän åtkomst till dina blobbar genom att ange åtkomstnivån för den behållare som innehåller blobar i enlighet med detta.</span><span class="sxs-lookup"><span data-stu-id="bb285-260">One exception to note is that you can allow public access to your blobs by setting the access level for the container that holds the blobs accordingly.</span></span> <span data-ttu-id="bb285-261">Om du ställer in åtkomst för en behållare för Blob eller behållare kommer du att kunna offentlig läsbehörighet för blobbar i behållaren.</span><span class="sxs-lookup"><span data-stu-id="bb285-261">If you set access for a container to Blob or Container, it will allow public read access for the blobs in that container.</span></span> <span data-ttu-id="bb285-262">Det innebär att alla med en URL som pekar på en blobb i behållaren kan öppna den i en webbläsare utan hjälp av en signatur för delad åtkomst eller lagringskontonycklarna.</span><span class="sxs-lookup"><span data-stu-id="bb285-262">This means anyone with a URL pointing to a blob in that container can open it in a browser without using a Shared Access Signature or having the storage account keys.</span></span>

### <a name="storage-account-keys"></a><span data-ttu-id="bb285-263">Lagringskontonycklar</span><span class="sxs-lookup"><span data-stu-id="bb285-263">Storage Account Keys</span></span>
<span data-ttu-id="bb285-264">Lagringskontonycklar är 512-bitars strängar som skapats av Azure som tillsammans med lagringskontots namn, kan användas för åtkomst till dataobjekt som lagras i lagringskontot.</span><span class="sxs-lookup"><span data-stu-id="bb285-264">Storage account keys are 512-bit strings created by Azure that, along with the storage account name, can be used to access the data objects stored in the storage account.</span></span>

<span data-ttu-id="bb285-265">Du kan till exempel läsa blobbar, skriva till köer, skapa tabeller och ändra filer.</span><span class="sxs-lookup"><span data-stu-id="bb285-265">For example, you can read blobs, write to queues, create tables, and modify files.</span></span> <span data-ttu-id="bb285-266">Många av de här åtgärderna kan utföras via Azure-portalen eller med hjälp av ett av många Lagringsutforskaren program.</span><span class="sxs-lookup"><span data-stu-id="bb285-266">Many of these actions can be performed through the Azure portal, or using one of many Storage Explorer applications.</span></span> <span data-ttu-id="bb285-267">Du kan också skriva kod för att använda REST-API: et eller någon av Lagringsklientbiblioteken för att utföra dessa åtgärder.</span><span class="sxs-lookup"><span data-stu-id="bb285-267">You can also write code to use the REST API or one of the Storage Client Libraries to perform these operations.</span></span>

<span data-ttu-id="bb285-268">Enligt beskrivningen i avsnittet på den [Management plan säkerhet](#management-plane-security), ha åtkomst till av lagringsnycklar för ett klassiskt storage-konto kan beviljas genom att ge fullständig åtkomst till Azure-prenumerationen.</span><span class="sxs-lookup"><span data-stu-id="bb285-268">As discussed in the section on the [Management Plane Security](#management-plane-security), access to the storage keys for a Classic storage account can be granted by giving full access to the Azure subscription.</span></span> <span data-ttu-id="bb285-269">Åtkomst till av lagringsnycklar för ett lagringskonto med hjälp av Azure Resource Manager-modellen kan kontrolleras via rollbaserad åtkomstkontroll (RBAC).</span><span class="sxs-lookup"><span data-stu-id="bb285-269">Access to the storage keys for a storage account using the Azure Resource Manager model can be controlled through Role-Based Access Control (RBAC).</span></span>

### <a name="how-to-delegate-access-to-objects-in-your-account-using-shared-access-signatures-and-stored-access-policies"></a><span data-ttu-id="bb285-270">Hur du delegerar åtkomst till objekt i ditt konto med signaturer för delad åtkomst och åtkomstregler lagras</span><span class="sxs-lookup"><span data-stu-id="bb285-270">How to delegate access to objects in your account using Shared Access Signatures and Stored Access Policies</span></span>
<span data-ttu-id="bb285-271">En signatur för delad åtkomst är en sträng som innehåller en säkerhetstoken som kan kopplas till en URI som hjälper dig att delegera åtkomst till lagringsobjekt och ange begränsningarna, t.ex behörigheter och datum/tid-intervall för åtkomst.</span><span class="sxs-lookup"><span data-stu-id="bb285-271">A Shared Access Signature is a string containing a security token that can be attached to a URI that allows you to delegate access to storage objects and specify constraints such as the permissions and the date/time range of access.</span></span>

<span data-ttu-id="bb285-272">Du kan bevilja åtkomst till BLOB-behållare, Kömeddelanden, filer och tabeller.</span><span class="sxs-lookup"><span data-stu-id="bb285-272">You can grant access to blobs, containers, queue messages, files, and tables.</span></span> <span data-ttu-id="bb285-273">Med tabeller, kan du faktiskt bevilja behörighet att komma åt en mängd entiteter i tabellen genom att ange de partition och raden nyckelintervall som du vill att användaren ska ha åtkomst.</span><span class="sxs-lookup"><span data-stu-id="bb285-273">With tables, you can actually grant permission to access a range of entities in the table by specifying the partition and row key ranges to which you want the user to have access.</span></span> <span data-ttu-id="bb285-274">Till exempel om du har data som lagras med en partitionsnyckel för geografiska tillstånd, du kan ge någon åtkomst till endast data för California.</span><span class="sxs-lookup"><span data-stu-id="bb285-274">For example, if you have data stored with a partition key of geographical state, you could give someone access to just the data for California.</span></span>

<span data-ttu-id="bb285-275">Ett annat exempel är kan du ge en SAS-token som gör det möjligt att skriva poster till en kö för ett webbprogram och ger en arbetare rollen programmet en SAS-token hämta meddelanden från kön och bearbetar dem.</span><span class="sxs-lookup"><span data-stu-id="bb285-275">In another example, you might give a web application a SAS token that enables it to write entries to a queue, and give a worker role application a SAS token to get messages from the queue and process them.</span></span> <span data-ttu-id="bb285-276">Eller du kan ge en kund en SAS-token som de kan använda för att ladda upp bilder till en behållare i Blob Storage och ge web application behörighet att läsa dessa bilder.</span><span class="sxs-lookup"><span data-stu-id="bb285-276">Or you could give one customer a SAS token they can use to upload pictures to a container in Blob Storage, and give a web application permission to read those pictures.</span></span> <span data-ttu-id="bb285-277">I båda fallen finns en uppdelning av säkerhetsskäl – varje program kan få precis den åtkomsten som krävs för att kunna utföra sina uppgifter.</span><span class="sxs-lookup"><span data-stu-id="bb285-277">In both cases, there is a separation of concerns – each application can be given just the access that they require in order to perform their task.</span></span> <span data-ttu-id="bb285-278">Detta är möjligt genom att använda signaturer för delad åtkomst.</span><span class="sxs-lookup"><span data-stu-id="bb285-278">This is possible through the use of Shared Access Signatures.</span></span>

#### <a name="why-you-want-to-use-shared-access-signatures"></a><span data-ttu-id="bb285-279">Varför du vill använda signaturer för delad åtkomst</span><span class="sxs-lookup"><span data-stu-id="bb285-279">Why you want to use Shared Access Signatures</span></span>
<span data-ttu-id="bb285-280">Varför kan du använda en SAS istället för att bara ge ut din lagringskontonyckel som är mycket enklare?</span><span class="sxs-lookup"><span data-stu-id="bb285-280">Why would you want to use an SAS instead of just giving out your storage account key, which is so much easier?</span></span> <span data-ttu-id="bb285-281">Lämnar ut din lagringskontonyckel är som att dela nycklar kungarikets din lagring.</span><span class="sxs-lookup"><span data-stu-id="bb285-281">Giving out your storage account key is like sharing the keys of your storage kingdom.</span></span> <span data-ttu-id="bb285-282">Fullständig åtkomst beviljas.</span><span class="sxs-lookup"><span data-stu-id="bb285-282">It grants complete access.</span></span> <span data-ttu-id="bb285-283">Någon kan använda dina nycklar och överföra sina hela musikbibliotek till ditt lagringskonto.</span><span class="sxs-lookup"><span data-stu-id="bb285-283">Someone could use your keys and upload their entire music library to your storage account.</span></span> <span data-ttu-id="bb285-284">De kan även ersätta filerna med virus infekterade versioner eller stjäla dina data.</span><span class="sxs-lookup"><span data-stu-id="bb285-284">They could also replace your files with virus-infected versions, or steal your data.</span></span> <span data-ttu-id="bb285-285">Ge bort obegränsad åtkomst till ditt lagringskonto är något som inte bör noga.</span><span class="sxs-lookup"><span data-stu-id="bb285-285">Giving away unlimited access to your storage account is something that should not be taken lightly.</span></span>

<span data-ttu-id="bb285-286">Du kan ge bara de behörigheter som krävs för en begränsad tidsperiod på en klient med signaturer för delad åtkomst.</span><span class="sxs-lookup"><span data-stu-id="bb285-286">With Shared Access Signatures, you can give a client just the permissions required for a limited amount of time.</span></span> <span data-ttu-id="bb285-287">Till exempel om någon laddar upp en blobb till ditt konto, ge du dem skrivbehörighet för bara tillräckligt med tid att överföra blobben (beroende på storleken på blobben, naturligtvis).</span><span class="sxs-lookup"><span data-stu-id="bb285-287">For example, if someone is uploading a blob to your account, you can grant them write access for just enough time to upload the blob (depending on the size of the blob, of course).</span></span> <span data-ttu-id="bb285-288">Och om du ändrar dig kan du återkalla den åtkomsten.</span><span class="sxs-lookup"><span data-stu-id="bb285-288">And if you change your mind, you can revoke that access.</span></span>

<span data-ttu-id="bb285-289">Dessutom kan du ange att begäranden som görs med hjälp av en SAS begränsas till vissa IP-adress eller IP-adressintervall externa till Azure.</span><span class="sxs-lookup"><span data-stu-id="bb285-289">Additionally, you can specify that requests made using a SAS are restricted to a certain IP address or IP address range external to Azure.</span></span> <span data-ttu-id="bb285-290">Du kan också kräva att begäranden som görs med ett visst protokoll (HTTPS eller HTTP/HTTPS).</span><span class="sxs-lookup"><span data-stu-id="bb285-290">You can also require that requests are made using a specific protocol (HTTPS or HTTP/HTTPS).</span></span> <span data-ttu-id="bb285-291">Detta innebär att om du bara vill tillåta HTTPS-trafik, du kan ange det begärda protokollet till HTTPS endast och HTTP-trafik blockeras.</span><span class="sxs-lookup"><span data-stu-id="bb285-291">This means if you only want to allow HTTPS traffic, you can set the required protocol to HTTPS only, and HTTP traffic will be blocked.</span></span>

#### <a name="definition-of-a-shared-access-signature"></a><span data-ttu-id="bb285-292">Definition av en signatur för delad åtkomst</span><span class="sxs-lookup"><span data-stu-id="bb285-292">Definition of a Shared Access Signature</span></span>
<span data-ttu-id="bb285-293">En signatur för delad åtkomst är en uppsättning frågeparametrar läggs till URL: er för resursen</span><span class="sxs-lookup"><span data-stu-id="bb285-293">A Shared Access Signature is a set of query parameters appended to the URL pointing at the resource</span></span>

<span data-ttu-id="bb285-294">som innehåller information om åtkomst tillåts och hur lång tid som åtkomst tillåts.</span><span class="sxs-lookup"><span data-stu-id="bb285-294">that provides information about the access allowed and the length of time for which the access is permitted.</span></span> <span data-ttu-id="bb285-295">Här är ett exempel. den här URI ger läsbehörighet till en blobb i fem minuter.</span><span class="sxs-lookup"><span data-stu-id="bb285-295">Here is an example; this URI provides read access to a blob for five minutes.</span></span> <span data-ttu-id="bb285-296">Observera att SAS fråga parametrar måste vara URL-kodade, till exempel % 3A för kolon (:) eller % 20 för ett blanksteg.</span><span class="sxs-lookup"><span data-stu-id="bb285-296">Note that SAS query parameters must be URL Encoded, such as %3A for colon (:) or %20 for a space.</span></span>

```
http://mystorage.blob.core.windows.net/mycontainer/myblob.txt (URL to the blob)
?sv=2015-04-05 (storage service version)
&st=2015-12-10T22%3A18%3A26Z (start time, in UTC time and URL encoded)
&se=2015-12-10T22%3A23%3A26Z (end time, in UTC time and URL encoded)
&sr=b (resource is a blob)
&sp=r (read access)
&sip=168.1.5.60-168.1.5.70 (requests can only come from this range of IP addresses)
&spr=https (only allow HTTPS requests)
&sig=Z%2FRHIX5Xcg0Mq2rqI3OlWTjEg2tYkboXr1P9ZUXDtkk%3D (signature used for the authentication of the SAS)
```

#### <a name="how-the-shared-access-signature-is-authenticated-by-the-azure-storage-service"></a><span data-ttu-id="bb285-297">Hur signatur för delad åtkomst autentiseras av Azure Storage-tjänsten</span><span class="sxs-lookup"><span data-stu-id="bb285-297">How the Shared Access Signature is authenticated by the Azure Storage Service</span></span>
<span data-ttu-id="bb285-298">När lagringstjänsten tar emot begäran, använder indatafrågan parametrar och skapar en signatur med samma metod som det anropande programmet.</span><span class="sxs-lookup"><span data-stu-id="bb285-298">When the storage service receives the request, it takes the input query parameters and creates a signature using the same method as the calling program.</span></span> <span data-ttu-id="bb285-299">Den jämför sedan två signaturer.</span><span class="sxs-lookup"><span data-stu-id="bb285-299">It then compares the two signatures.</span></span> <span data-ttu-id="bb285-300">Om användaren accepterar Kontrollera lagringstjänsten storage service-version för att kontrollera att den är giltig, kontrollera att den aktuella datum och tid är inom den angivna tidsperioden, kontrollera åtkomst begärd motsvarar begäran, osv.</span><span class="sxs-lookup"><span data-stu-id="bb285-300">If they agree, then the storage service can check the storage service version to make sure it's valid, verify that the current date and time are within the specified window, make sure the access requested corresponds to the request made, etc.</span></span>

<span data-ttu-id="bb285-301">Till exempel med våra URL misslyckas om URL: en pekar på en fil i stället för en blob denna begäran eftersom den anger att signatur för delad åtkomst är för en blob.</span><span class="sxs-lookup"><span data-stu-id="bb285-301">For example, with our URL above, if the URL was pointing to a file instead of a blob, this request would fail because it specifies that the Shared Access Signature is for a blob.</span></span> <span data-ttu-id="bb285-302">Om kommandot REST anropas var att uppdatera en blob kan misslyckas det eftersom signatur för delad åtkomst anger att bara läsbehörighet tillåts.</span><span class="sxs-lookup"><span data-stu-id="bb285-302">If the REST command being called was to update a blob, it would fail because the Shared Access Signature specifies that only read access is permitted.</span></span>

#### <a name="types-of-shared-access-signatures"></a><span data-ttu-id="bb285-303">Typer av signaturer för delad åtkomst</span><span class="sxs-lookup"><span data-stu-id="bb285-303">Types of Shared Access Signatures</span></span>
* <span data-ttu-id="bb285-304">En tjänstnivå SAS kan användas för åtkomst till specifika resurser i ett lagringskonto.</span><span class="sxs-lookup"><span data-stu-id="bb285-304">A service-level SAS can be used to access specific resources in a storage account.</span></span> <span data-ttu-id="bb285-305">Några exempel på detta hämtar en lista över blobbar i en behållare för att hämta en blob, uppdaterar en entitet i en tabell, lägga till meddelanden till en kö eller överför en fil till en filresurs.</span><span class="sxs-lookup"><span data-stu-id="bb285-305">Some examples of this are retrieving a list of blobs in a container, downloading a blob, updating an entity in a table, adding messages to a queue or uploading a file to a file share.</span></span>
* <span data-ttu-id="bb285-306">En kontonivå SAS kan användas för åtkomst till allt som en tjänstnivå SAS kan användas för.</span><span class="sxs-lookup"><span data-stu-id="bb285-306">An account-level SAS can be used to access anything that a service-level SAS can be used for.</span></span> <span data-ttu-id="bb285-307">Dessutom kan den ge alternativ till resurser som inte tillåts med en tjänstnivå SAS, till exempel möjligheten att skapa behållare, tabeller, köer och filresurser.</span><span class="sxs-lookup"><span data-stu-id="bb285-307">Additionally, it can give options to resources that are not permitted with a service-level SAS, such as the ability to create containers, tables, queues, and file shares.</span></span> <span data-ttu-id="bb285-308">Du kan också ange åtkomst för flera tjänster på samma gång.</span><span class="sxs-lookup"><span data-stu-id="bb285-308">You can also specify access to multiple services at once.</span></span> <span data-ttu-id="bb285-309">Du kan till exempel ge någon åtkomst till både blobbar och filer på ditt lagringskonto.</span><span class="sxs-lookup"><span data-stu-id="bb285-309">For example, you might give someone access to both blobs and files in your storage account.</span></span>

#### <a name="creating-an-sas-uri"></a><span data-ttu-id="bb285-310">Skapa en SAS-URI</span><span class="sxs-lookup"><span data-stu-id="bb285-310">Creating an SAS URI</span></span>
1. <span data-ttu-id="bb285-311">Du kan skapa en ad hoc-URI för begäran, definiera frågeparametrar varje gång.</span><span class="sxs-lookup"><span data-stu-id="bb285-311">You can create an ad hoc URI on demand, defining all of the query parameters each time.</span></span>

   <span data-ttu-id="bb285-312">Detta är mycket flexibelt, men om du har en logisk uppsättning parametrar som liknar varje gång med hjälp av en åtkomstprincip för lagras är en bättre uppfattning.</span><span class="sxs-lookup"><span data-stu-id="bb285-312">This is really flexible, but if you have a logical set of parameters that are similar each time, using a Stored Access Policy is a better idea.</span></span>
2. <span data-ttu-id="bb285-313">Du kan skapa en åtkomstprincip lagras för en hela behållaren, filresurser, tabell eller kön.</span><span class="sxs-lookup"><span data-stu-id="bb285-313">You can create a Stored Access Policy for an entire container, file share, table, or queue.</span></span> <span data-ttu-id="bb285-314">Du kan sedan använda den som underlag för SAS-URI som du skapar.</span><span class="sxs-lookup"><span data-stu-id="bb285-314">Then you can use this as the basis for the SAS URIs you create.</span></span> <span data-ttu-id="bb285-315">Behörigheter som baseras på lagras åtkomstprinciper kan enkelt återkallas.</span><span class="sxs-lookup"><span data-stu-id="bb285-315">Permissions based on Stored Access Policies can be easily revoked.</span></span> <span data-ttu-id="bb285-316">Du kan ha upp till 5 principer som definierats för varje behållare, kön, tabell eller filresurs.</span><span class="sxs-lookup"><span data-stu-id="bb285-316">You can have up to 5 policies defined on each container, queue, table, or file share.</span></span>

   <span data-ttu-id="bb285-317">Om du tänker har många användare kan läsa blobbar i en specifik behållare kan du skapa en åtkomstprincip för lagras som säger ”ge läsbehörighet” och andra inställningar som ska vara samma varje gång.</span><span class="sxs-lookup"><span data-stu-id="bb285-317">For example, if you were going to have many people read the blobs in a specific container, you could create a Stored Access Policy that says "give read access" and any other settings that will be the same each time.</span></span> <span data-ttu-id="bb285-318">Du kan skapa ett SAS-URI med inställningarna för åtkomstprincip lagras och ange förfallodatum för datum/tid.</span><span class="sxs-lookup"><span data-stu-id="bb285-318">Then you can create an SAS URI using the settings of the Stored Access Policy and specifying the expiration date/time.</span></span> <span data-ttu-id="bb285-319">Fördelen med detta är att du inte behöver ange alla frågeparametrar varje gång.</span><span class="sxs-lookup"><span data-stu-id="bb285-319">The advantage of this is that you don't have to specify all of the query parameters every time.</span></span>

#### <a name="revocation"></a><span data-ttu-id="bb285-320">Återkallade certifikat</span><span class="sxs-lookup"><span data-stu-id="bb285-320">Revocation</span></span>
<span data-ttu-id="bb285-321">Anta att din SAS har komprometterats eller om du vill ändra på grund av företagets säkerhet och regelefterlevnad krav.</span><span class="sxs-lookup"><span data-stu-id="bb285-321">Suppose your SAS has been compromised, or you want to change it because of corporate security or regulatory compliance requirements.</span></span> <span data-ttu-id="bb285-322">Hur du återkalla åtkomst till en resurs med hjälp av den SAS?</span><span class="sxs-lookup"><span data-stu-id="bb285-322">How do you revoke access to a resource using that SAS?</span></span> <span data-ttu-id="bb285-323">Det beror på hur du skapar SAS-URI.</span><span class="sxs-lookup"><span data-stu-id="bb285-323">It depends on how you created the SAS URI.</span></span>

<span data-ttu-id="bb285-324">Om du använder ad hoc-URI finns det tre alternativ.</span><span class="sxs-lookup"><span data-stu-id="bb285-324">If you are using ad hoc URI's, you have three options.</span></span> <span data-ttu-id="bb285-325">Du kan utfärda SAS-token med kort giltighetsprinciper och bara vänta SAS ska upphöra att gälla.</span><span class="sxs-lookup"><span data-stu-id="bb285-325">You can issue SAS tokens with short expiration policies and simply wait for the SAS to expire.</span></span> <span data-ttu-id="bb285-326">Du kan byta namn på eller ta bort resursen (förutsatt att token har begränsats till ett enda objekt).</span><span class="sxs-lookup"><span data-stu-id="bb285-326">You can rename or delete the resource (assuming the token was scoped to a single object).</span></span> <span data-ttu-id="bb285-327">Du kan ändra lagringskontonycklar.</span><span class="sxs-lookup"><span data-stu-id="bb285-327">You can change the storage account keys.</span></span> <span data-ttu-id="bb285-328">Det här sista alternativet kan ha stor inverkan, beroende på hur många tjänster använder detta lagringskonto och förmodligen inte något du vill göra utan lite planering.</span><span class="sxs-lookup"><span data-stu-id="bb285-328">This last option can have a big impact, depending on how many services are using that storage account, and probably isn't something you want to do without some planning.</span></span>

<span data-ttu-id="bb285-329">Om du använder en SAS som härletts från en lagrad åtkomstprincip, du kan ta bort åtkomst genom att återkalla åtkomstprincip lagras – du kan bara ändra den så att den har redan gått ut eller kan du ta bort det helt och hållet.</span><span class="sxs-lookup"><span data-stu-id="bb285-329">If you are using a SAS derived from a Stored Access Policy, you can remove access by revoking the Stored Access Policy – you can just change it so it has already expired, or you can remove it altogether.</span></span> <span data-ttu-id="bb285-330">Detta träder i kraft omedelbart och upphäver varje SAS som skapats med hjälp av den lagrade åtkomstprincip.</span><span class="sxs-lookup"><span data-stu-id="bb285-330">This takes effect immediately, and invalidates every SAS created using that Stored Access Policy.</span></span> <span data-ttu-id="bb285-331">Uppdatering eller ta bort åtkomstprincip lagras kan påverkan personer åtkomst till specifika behållaren, filresurs, tabell eller kön via SAS, men om klienterna skrivs så att de begär en ny SAS när den gamla servern blir ogiltig, den här metoden fungerar bra.</span><span class="sxs-lookup"><span data-stu-id="bb285-331">Updating or removing the Stored Access Policy may impact people accessing that specific container, file share, table, or queue via SAS, but if the clients are written so they request a new SAS when the old one becomes invalid, this will work fine.</span></span>

<span data-ttu-id="bb285-332">Eftersom med hjälp av en SAS som härletts från en lagrad åtkomstprincip ger dig möjlighet att återkalla den SAS omedelbart, är rekommenderad praxis att alltid använda lagras åtkomstprinciper när det är möjligt.</span><span class="sxs-lookup"><span data-stu-id="bb285-332">Because using a SAS derived from a Stored Access Policy gives you the ability to revoke that SAS immediately, it is the recommended best practice to always use Stored Access Policies when possible.</span></span>

#### <a name="resources"></a><span data-ttu-id="bb285-333">Resurser</span><span class="sxs-lookup"><span data-stu-id="bb285-333">Resources</span></span>
<span data-ttu-id="bb285-334">Mer detaljerad information om hur du använder signaturer för delad åtkomst och lagras åtkomstprinciper, slutfördes med exempel, finns i följande artiklar:</span><span class="sxs-lookup"><span data-stu-id="bb285-334">For more detailed information on using Shared Access Signatures and Stored Access Policies, complete with examples, please refer to the following articles:</span></span>

* <span data-ttu-id="bb285-335">Dessa är referensartiklar.</span><span class="sxs-lookup"><span data-stu-id="bb285-335">These are the reference articles.</span></span>

  * [<span data-ttu-id="bb285-336">Tjänst-SAS</span><span class="sxs-lookup"><span data-stu-id="bb285-336">Service SAS</span></span>](https://msdn.microsoft.com/library/dn140256.aspx)

    <span data-ttu-id="bb285-337">Den här artikeln innehåller exempel på användning av en tjänstnivå SAS med blobbar, Kömeddelanden, tabell intervall och filer.</span><span class="sxs-lookup"><span data-stu-id="bb285-337">This article provides examples of using a service-level SAS with blobs, queue messages, table ranges, and files.</span></span>
  * [<span data-ttu-id="bb285-338">Hur du skapar en tjänst-SAS</span><span class="sxs-lookup"><span data-stu-id="bb285-338">Constructing a service SAS</span></span>](https://msdn.microsoft.com/library/dn140255.aspx)
  * [<span data-ttu-id="bb285-339">Hur du skapar en konto-SAS</span><span class="sxs-lookup"><span data-stu-id="bb285-339">Constructing an account SAS</span></span>](https://msdn.microsoft.com/library/mt584140.aspx)
* <span data-ttu-id="bb285-340">Dessa är kurserna om att använda .NET-klientbibliotek för att skapa signaturer för delad åtkomst och åtkomstregler lagras.</span><span class="sxs-lookup"><span data-stu-id="bb285-340">These are tutorials for using the .NET client library to create Shared Access Signatures and Stored Access Policies.</span></span>

  * [<span data-ttu-id="bb285-341">Använda signaturer för delad åtkomst (SAS)</span><span class="sxs-lookup"><span data-stu-id="bb285-341">Using Shared Access Signatures (SAS)</span></span>](storage-dotnet-shared-access-signature-part-1.md)
  * [<span data-ttu-id="bb285-342">Signaturer för delad åtkomst, del 2: Skapa och använda en SAS med Blob-tjänsten</span><span class="sxs-lookup"><span data-stu-id="bb285-342">Shared Access Signatures, Part 2: Create and Use a SAS with the Blob Service</span></span>](storage-dotnet-shared-access-signature-part-2.md)

    <span data-ttu-id="bb285-343">Den här artikeln innehåller en förklaring av SAS-modellen, exempel på signaturer för delad åtkomst och rekommendationer om bästa praxis och användning av SAS.</span><span class="sxs-lookup"><span data-stu-id="bb285-343">This article includes an explanation of the SAS model, examples of Shared Access Signatures, and recommendations for the best practice use of SAS.</span></span> <span data-ttu-id="bb285-344">Vi beskriver även återkallande av vilken behörighet.</span><span class="sxs-lookup"><span data-stu-id="bb285-344">Also discussed is the revocation of the permission granted.</span></span>
* <span data-ttu-id="bb285-345">Begränsa åtkomst via IP-adress (IP-ACL: er)</span><span class="sxs-lookup"><span data-stu-id="bb285-345">Limiting access by IP Address (IP ACLs)</span></span>

  * [<span data-ttu-id="bb285-346">Vad är en slutpunkt åtkomstkontrollistan (ACL)?</span><span class="sxs-lookup"><span data-stu-id="bb285-346">What is an endpoint Access Control List (ACLs)?</span></span>](../virtual-network/virtual-networks-acl.md)
  * [<span data-ttu-id="bb285-347">Hur du skapar en tjänst-SAS</span><span class="sxs-lookup"><span data-stu-id="bb285-347">Constructing a Service SAS</span></span>](https://msdn.microsoft.com/library/azure/dn140255.aspx)

    <span data-ttu-id="bb285-348">Detta är referensartikeln för servicenivåer SAS; den innehåller ett exempel på IP-ACLing.</span><span class="sxs-lookup"><span data-stu-id="bb285-348">This is the reference article for service-level SAS; it includes an example of IP ACLing.</span></span>
  * [<span data-ttu-id="bb285-349">Hur du skapar en konto-SAS</span><span class="sxs-lookup"><span data-stu-id="bb285-349">Constructing an Account SAS</span></span>](https://msdn.microsoft.com/library/azure/mt584140.aspx)

    <span data-ttu-id="bb285-350">Detta är referensartikeln för kontonivå SAS; den innehåller ett exempel på IP-ACLing.</span><span class="sxs-lookup"><span data-stu-id="bb285-350">This is the reference article for account-level SAS; it includes an example of IP ACLing.</span></span>
* <span data-ttu-id="bb285-351">Autentisering</span><span class="sxs-lookup"><span data-stu-id="bb285-351">Authentication</span></span>

  * [<span data-ttu-id="bb285-352">Autentisering för Azure Storage-tjänster</span><span class="sxs-lookup"><span data-stu-id="bb285-352">Authentication for the Azure Storage Services</span></span>](https://msdn.microsoft.com/library/azure/dd179428.aspx)
* <span data-ttu-id="bb285-353">Signaturer för delad åtkomst komma igång Självstudier</span><span class="sxs-lookup"><span data-stu-id="bb285-353">Shared Access Signatures Getting Started Tutorial</span></span>

  * [<span data-ttu-id="bb285-354">SAS komma igång-Självstudier</span><span class="sxs-lookup"><span data-stu-id="bb285-354">SAS Getting Started Tutorial</span></span>](https://github.com/Azure-Samples/storage-dotnet-sas-getting-started)

## <a name="encryption-in-transit"></a><span data-ttu-id="bb285-355">Kryptering under överföring</span><span class="sxs-lookup"><span data-stu-id="bb285-355">Encryption in Transit</span></span>
### <a name="transport-level-encryption--using-https"></a><span data-ttu-id="bb285-356">Transportnivå kryptering – med hjälp av HTTPS</span><span class="sxs-lookup"><span data-stu-id="bb285-356">Transport-Level Encryption – Using HTTPS</span></span>
<span data-ttu-id="bb285-357">Ytterligare ett steg som du bör utföra för att säkerställa säkerheten för dina Azure Storage-data är att kryptera data mellan klienten och Azure Storage.</span><span class="sxs-lookup"><span data-stu-id="bb285-357">Another step you should take to ensure the security of your Azure Storage data is to encrypt the data between the client and Azure Storage.</span></span> <span data-ttu-id="bb285-358">Första rekommenderar vi att du alltid använda den [HTTPS](https://en.wikipedia.org/wiki/HTTPS) protokollet, vilket garanterar säker kommunikation över offentligt Internet.</span><span class="sxs-lookup"><span data-stu-id="bb285-358">The first recommendation is to always use the [HTTPS](https://en.wikipedia.org/wiki/HTTPS) protocol, which ensures secure communication over the public Internet.</span></span>

<span data-ttu-id="bb285-359">Om du vill att en säker kommunikationskanal bör du alltid använda HTTPS när anropa REST-API: er eller få åtkomst till objekt i lagring.</span><span class="sxs-lookup"><span data-stu-id="bb285-359">To have a secure communication channel, you should always use HTTPS when calling the REST APIs or accessing objects in storage.</span></span> <span data-ttu-id="bb285-360">Dessutom **signaturer för delad åtkomst**, som kan användas för att delegera åtkomst till Azure Storage-objekt innehåller ett alternativ för att ange att endast HTTPS-protokollet kan användas när du använder signaturer för delad åtkomst, se till att vem som helst skicka länkar med SAS-token kommer att använda rätt protokoll.</span><span class="sxs-lookup"><span data-stu-id="bb285-360">Also, **Shared Access Signatures**, which can be used to delegate access to Azure Storage objects, include an option to specify that only the HTTPS protocol can be used when using Shared Access Signatures, ensuring that anybody sending out links with SAS tokens will use the proper protocol.</span></span>

<span data-ttu-id="bb285-361">Du kan framtvinga användningen av HTTPS när anropa REST-API: er att få åtkomst till objekt i storage-konton genom att aktivera [säker överföring krävs](storage-require-secure-transfer.md) för lagringskontot.</span><span class="sxs-lookup"><span data-stu-id="bb285-361">You can enforce the use of HTTPS when calling the REST APIs to access objects in storage accounts by enabling [Secure transfer required](storage-require-secure-transfer.md) for the storage account.</span></span> <span data-ttu-id="bb285-362">Anslutningar som använder HTTP ska avvisas när det här är aktiverat.</span><span class="sxs-lookup"><span data-stu-id="bb285-362">Connections using HTTP will be refused once this is enabled.</span></span>

### <a name="using-encryption-during-transit-with-azure-file-shares"></a><span data-ttu-id="bb285-363">Med hjälp av kryptering under överföring med Azure-filresurser</span><span class="sxs-lookup"><span data-stu-id="bb285-363">Using encryption during transit with Azure File shares</span></span>
<span data-ttu-id="bb285-364">Azure File storage stöder HTTPS när du använder REST-API, men är mer används ofta som en SMB filresurs kopplad till en virtuell dator.</span><span class="sxs-lookup"><span data-stu-id="bb285-364">Azure File storage supports HTTPS when using the REST API, but is more commonly used as an SMB file share attached to a VM.</span></span> <span data-ttu-id="bb285-365">SMB 2.1 stöder inte kryptering, så anslutningar tillåts bara inom samma region i Azure.</span><span class="sxs-lookup"><span data-stu-id="bb285-365">SMB 2.1 does not support encryption, so connections are only allowed within the same region in Azure.</span></span> <span data-ttu-id="bb285-366">Dock SMB 3.0 stöder kryptering, och den är tillgänglig i Windows Server 2012 R2, Windows 8, Windows 8.1 och Windows 10, vilket gör att flera region åtkomst och även åtkomst på skrivbordet.</span><span class="sxs-lookup"><span data-stu-id="bb285-366">However, SMB 3.0 supports encryption, and it's available in Windows Server 2012 R2, Windows 8, Windows 8.1, and Windows 10, allowing cross-region access and even access on the desktop.</span></span>

<span data-ttu-id="bb285-367">Observera att medan Azure-filresurser kan användas med Unix, Linux SMB-klienten ännu inte stöder kryptering, så åtkomst tillåts endast i en Azure-region.</span><span class="sxs-lookup"><span data-stu-id="bb285-367">Note that while Azure File shares can be used with Unix, the Linux SMB client does not yet support encryption, so access is only allowed within an Azure region.</span></span> <span data-ttu-id="bb285-368">Stöd för kryptering för Linux finns på Översikt av Linux-utvecklare som ansvarar för SMB-funktioner.</span><span class="sxs-lookup"><span data-stu-id="bb285-368">Encryption support for Linux is on the roadmap of Linux developers responsible for SMB functionality.</span></span> <span data-ttu-id="bb285-369">När de lägger till kryptering har samma möjligheten för åtkomst till en Azure-filresurs på Linux som du gör för Windows.</span><span class="sxs-lookup"><span data-stu-id="bb285-369">When they add encryption, you will have the same ability for accessing an Azure File share on Linux as you do for Windows.</span></span>

<span data-ttu-id="bb285-370">Du kan tillämpa kryptering med tjänsten Azure-filer genom att aktivera [säker överföring krävs](storage-require-secure-transfer.md) för lagringskontot.</span><span class="sxs-lookup"><span data-stu-id="bb285-370">You can enforce the use of encryption with the Azure Files service by enabling [Secure transfer required](storage-require-secure-transfer.md) for the storage account.</span></span> <span data-ttu-id="bb285-371">Om du använder REST-API: er, HTTPs krävs.</span><span class="sxs-lookup"><span data-stu-id="bb285-371">If using the REST APIs, HTTPs is required.</span></span> <span data-ttu-id="bb285-372">För SMB, kan endast SMB-anslutningar som stöder kryptering ansluta.</span><span class="sxs-lookup"><span data-stu-id="bb285-372">For SMB, only SMB connections that support encryption will connect successfully.</span></span>

#### <a name="resources"></a><span data-ttu-id="bb285-373">Resurser</span><span class="sxs-lookup"><span data-stu-id="bb285-373">Resources</span></span>
* [<span data-ttu-id="bb285-374">Använd Azure File Storage med Linux</span><span class="sxs-lookup"><span data-stu-id="bb285-374">How to use Azure File storage with Linux</span></span>](storage-how-to-use-files-linux.md)

  <span data-ttu-id="bb285-375">Den här artikeln visar hur du monterar en Azure-filresurs på en Linux-system och överför/hämta filer.</span><span class="sxs-lookup"><span data-stu-id="bb285-375">This article shows how to mount an Azure File share on a Linux system and upload/download files.</span></span>
* [<span data-ttu-id="bb285-376">Komma igång med Azure File Storage i Windows</span><span class="sxs-lookup"><span data-stu-id="bb285-376">Get started with Azure File storage on Windows</span></span>](storage-dotnet-how-to-use-files.md)

  <span data-ttu-id="bb285-377">Den här artikeln ger en översikt över Azure-filresurser och montera och använda dem med PowerShell och .NET.</span><span class="sxs-lookup"><span data-stu-id="bb285-377">This article gives an overview of Azure File shares and how to mount and use them using PowerShell and .NET.</span></span>
* [<span data-ttu-id="bb285-378">Inuti Azure File Storage</span><span class="sxs-lookup"><span data-stu-id="bb285-378">Inside Azure File storage</span></span>](https://azure.microsoft.com/blog/inside-azure-file-storage/)

  <span data-ttu-id="bb285-379">Den här artikeln annonserar allmän tillgänglighet för Azure File storage och ger teknisk information om SMB 3.0-datakryptering.</span><span class="sxs-lookup"><span data-stu-id="bb285-379">This article announces the general availability of Azure File storage and provides technical details about the SMB 3.0 encryption.</span></span>

### <a name="using-client-side-encryption-to-secure-data-that-you-send-to-storage"></a><span data-ttu-id="bb285-380">Med kryptering på klientsidan för att skydda data som du skickar till lagring</span><span class="sxs-lookup"><span data-stu-id="bb285-380">Using Client-side encryption to secure data that you send to storage</span></span>
<span data-ttu-id="bb285-381">Ett annat alternativ som hjälper dig att se till att dina data är säkra medan de överförs mellan ett klientprogram och lagring är kryptering på klientsidan.</span><span class="sxs-lookup"><span data-stu-id="bb285-381">Another option that helps you ensure that your data is secure while being transferred between a client application and Storage is Client-side Encryption.</span></span> <span data-ttu-id="bb285-382">Data krypteras innan de överförs till Azure Storage.</span><span class="sxs-lookup"><span data-stu-id="bb285-382">The data is encrypted before being transferred into Azure Storage.</span></span> <span data-ttu-id="bb285-383">När du hämtar data från Azure Storage, dekrypteras data när den tas emot på klientsidan.</span><span class="sxs-lookup"><span data-stu-id="bb285-383">When retrieving the data from Azure Storage, the data is decrypted after it is received on the client side.</span></span> <span data-ttu-id="bb285-384">Även om informationen är krypterad går över nätverket, rekommenderar vi att du också använda HTTPS, eftersom den har dataintegritetskontroller inbyggda som minimera nätverksfel som påverkar integriteten hos data.</span><span class="sxs-lookup"><span data-stu-id="bb285-384">Even though the data is encrypted going across the wire, we recommend that you also use HTTPS, as it has data integrity checks built in which help mitigate network errors affecting the integrity of the data.</span></span>

<span data-ttu-id="bb285-385">Klientsidans kryptering är också en metod för att kryptera data i vila, eftersom data lagras i krypterad form.</span><span class="sxs-lookup"><span data-stu-id="bb285-385">Client-side encryption is also a method for encrypting your data at rest, as the data is stored in its encrypted form.</span></span> <span data-ttu-id="bb285-386">Lär dig om detta i detalj i avsnittet på [kryptering i vila](#encryption-at-rest).</span><span class="sxs-lookup"><span data-stu-id="bb285-386">We'll talk about this in more detail in the section on [Encryption at Rest](#encryption-at-rest).</span></span>

## <a name="encryption-at-rest"></a><span data-ttu-id="bb285-387">Kryptering i vila</span><span class="sxs-lookup"><span data-stu-id="bb285-387">Encryption at Rest</span></span>
<span data-ttu-id="bb285-388">Det finns tre Azure-funktioner som tillhandahåller kryptering i vila.</span><span class="sxs-lookup"><span data-stu-id="bb285-388">There are three Azure features that provide encryption at rest.</span></span> <span data-ttu-id="bb285-389">Azure Disk Encryption används för att kryptera Operativsystemet och datadiskarna i IaaS-virtuella datorer.</span><span class="sxs-lookup"><span data-stu-id="bb285-389">Azure Disk Encryption is used to encrypt the OS and data disks in IaaS Virtual Machines.</span></span> <span data-ttu-id="bb285-390">De andra två – kryptering på klientsidan och SSE – är båda används för att kryptera data i Azure Storage.</span><span class="sxs-lookup"><span data-stu-id="bb285-390">The other two – Client-side Encryption and SSE – are both used to encrypt data in Azure Storage.</span></span> <span data-ttu-id="bb285-391">Vi tittar på var och en av dessa, gör en jämförelse och se när var och en kan användas.</span><span class="sxs-lookup"><span data-stu-id="bb285-391">Let's look at each of these, and then do a comparison and see when each one can be used.</span></span>

<span data-ttu-id="bb285-392">Medan du kan använda kryptering på klientsidan för att kryptera data under överföring (som lagras också i krypterad form i lagring) måste överväga du att bara använda HTTPS under överföringen och har för data som ska krypteras automatiskt när den är lagrad.</span><span class="sxs-lookup"><span data-stu-id="bb285-392">While you can use Client-side Encryption to encrypt the data in transit (which is also stored in its encrypted form in Storage), you may prefer to simply use HTTPS during the transfer, and have some way for the data to be automatically encrypted when it is stored.</span></span> <span data-ttu-id="bb285-393">Det finns två sätt att göra detta--Azure Disk Encryption och SSE.</span><span class="sxs-lookup"><span data-stu-id="bb285-393">There are two ways to do this -- Azure Disk Encryption and SSE.</span></span> <span data-ttu-id="bb285-394">En används för att kryptera data på Operativsystemet och datadiskarna som används av virtuella datorer direkt och den andra används för att kryptera data som skrivs till Azure Blob Storage.</span><span class="sxs-lookup"><span data-stu-id="bb285-394">One is used to directly encrypt the data on OS and data disks used by VMs, and the other is used to encrypt data written to Azure Blob Storage.</span></span>

### <a name="storage-service-encryption-sse"></a><span data-ttu-id="bb285-395">Storage Service-kryptering (SSE)</span><span class="sxs-lookup"><span data-stu-id="bb285-395">Storage Service Encryption (SSE)</span></span>
<span data-ttu-id="bb285-396">SSE kan du begära att lagringstjänsten automatiskt krypteras när du skriver till Azure Storage.</span><span class="sxs-lookup"><span data-stu-id="bb285-396">SSE allows you to request that the storage service automatically encrypt the data when writing it to Azure Storage.</span></span> <span data-ttu-id="bb285-397">När du läser data från Azure Storage, kommer det dekrypteras av lagringstjänsten innan de returneras.</span><span class="sxs-lookup"><span data-stu-id="bb285-397">When you read the data from Azure Storage, it will be decrypted by the storage service before being returned.</span></span> <span data-ttu-id="bb285-398">Detta gör det möjligt för dig att skydda dina data utan att ändra koden och lägga till kod för program.</span><span class="sxs-lookup"><span data-stu-id="bb285-398">This enables you to secure your data without having to modify code or add code to any applications.</span></span>

<span data-ttu-id="bb285-399">Det här är en inställning som gäller för hela lagringskontot.</span><span class="sxs-lookup"><span data-stu-id="bb285-399">This is a setting that applies to the whole storage account.</span></span> <span data-ttu-id="bb285-400">Du kan aktivera och inaktivera den här funktionen genom att ändra värdet för inställningen.</span><span class="sxs-lookup"><span data-stu-id="bb285-400">You can enable and disable this feature by changing the value of the setting.</span></span> <span data-ttu-id="bb285-401">Om du vill göra detta måste använda du Azure-portalen, PowerShell, Azure CLI, Storage Resource Provider REST API eller Storage-klientbiblioteket för .NET.</span><span class="sxs-lookup"><span data-stu-id="bb285-401">To do this, you can use the Azure portal, PowerShell, the Azure CLI, the Storage Resource Provider REST API, or the .NET Storage Client Library.</span></span> <span data-ttu-id="bb285-402">SSE är inaktiverat som standard.</span><span class="sxs-lookup"><span data-stu-id="bb285-402">By default, SSE is turned off.</span></span>

<span data-ttu-id="bb285-403">Just nu hanteras de nycklar som används för kryptering av Microsoft.</span><span class="sxs-lookup"><span data-stu-id="bb285-403">At this time, the keys used for the encryption are managed by Microsoft.</span></span> <span data-ttu-id="bb285-404">Vi skapar nycklarna som ursprungligen och hantera säker lagring av nycklar som vanlig rotationen som definieras av intern Microsoft-princip.</span><span class="sxs-lookup"><span data-stu-id="bb285-404">We generate the keys originally, and manage the secure storage of the keys as well as the regular rotation as defined by internal Microsoft policy.</span></span> <span data-ttu-id="bb285-405">Du kommer i framtiden, få möjlighet att hantera egna krypteringsnycklar och ange en migrering från Microsoft-hanterad nycklar till kundhanterad nycklar.</span><span class="sxs-lookup"><span data-stu-id="bb285-405">In the future, you will get the ability to manage your own encryption keys, and provide a migration path from Microsoft-managed keys to customer-managed keys.</span></span>

<span data-ttu-id="bb285-406">Den här funktionen är tillgänglig för Standard- och Premium-lagring konton som skapats med hjälp av Resource Manager-distributionsmodellen.</span><span class="sxs-lookup"><span data-stu-id="bb285-406">This feature is available for Standard and Premium Storage accounts created using the Resource Manager deployment model.</span></span> <span data-ttu-id="bb285-407">SSE gäller endast för blockblobbar, sidblobbar, och tilläggsblobar.</span><span class="sxs-lookup"><span data-stu-id="bb285-407">SSE applies only to block blobs, page blobs, and append blobs.</span></span> <span data-ttu-id="bb285-408">Andra typer av data, inklusive tabeller, köer och filer, krypteras inte.</span><span class="sxs-lookup"><span data-stu-id="bb285-408">The other types of data, including tables, queues, and files, will not be encrypted.</span></span>

<span data-ttu-id="bb285-409">Data krypteras endast när SSE är aktiverat och data skrivs till Blob Storage.</span><span class="sxs-lookup"><span data-stu-id="bb285-409">Data is only encrypted when SSE is enabled and the data is written to Blob Storage.</span></span> <span data-ttu-id="bb285-410">Aktivera eller inaktivera SSE påverkar inte befintliga data.</span><span class="sxs-lookup"><span data-stu-id="bb285-410">Enabling or disabling SSE does not impact existing data.</span></span> <span data-ttu-id="bb285-411">Med andra ord, när du aktiverar den här kryptering kommer det inte gå tillbaka och kryptera data som finns redan. inte heller att dekryptera data som redan finns när du inaktiverar SSE.</span><span class="sxs-lookup"><span data-stu-id="bb285-411">In other words, when you enable this encryption, it will not go back and encrypt data that already exists; nor will it decrypt the data that already exists when you disable SSE.</span></span>

<span data-ttu-id="bb285-412">Om du vill använda den här funktionen med ett klassiskt storage-konto kan du skapa ett nytt lagringskonto för hanteraren för filserverresurser och använder AzCopy för att kopiera data till det nya kontot.</span><span class="sxs-lookup"><span data-stu-id="bb285-412">If you want to use this feature with a Classic storage account, you can create a new Resource Manager storage account and use AzCopy to copy the data to the new account.</span></span>

### <a name="client-side-encryption"></a><span data-ttu-id="bb285-413">Kryptering på klientsidan</span><span class="sxs-lookup"><span data-stu-id="bb285-413">Client-side Encryption</span></span>
<span data-ttu-id="bb285-414">Kryptering på klientsidan nämndes när det handlar om kryptering av data under överföringen.</span><span class="sxs-lookup"><span data-stu-id="bb285-414">We mentioned client-side encryption when discussing the encryption of the data in transit.</span></span> <span data-ttu-id="bb285-415">Den här funktionen kan du kryptera data i klientprogram innan den skickas över nätverket som ska skrivas till Azure Storage och programmässigt dekryptera data efter hämtning från Azure Storage via programmering.</span><span class="sxs-lookup"><span data-stu-id="bb285-415">This feature allows you to programmatically encrypt your data in a client application before sending it across the wire to be written to Azure Storage, and to programmatically decrypt your data after retrieving it from Azure Storage.</span></span>

<span data-ttu-id="bb285-416">Detta tillhandahåller kryptering under överföring, men det ger också funktionen kryptering i vila.</span><span class="sxs-lookup"><span data-stu-id="bb285-416">This does provide encryption in transit, but it also provides the feature of Encryption at Rest.</span></span> <span data-ttu-id="bb285-417">Observera att även om informationen är krypterad under överföringen, vi rekommenderar ändå att använda HTTPS för att dra nytta av de inbyggda dataintegritetskontroller som hjälper till att minska nätverksfel som påverkar integriteten hos data.</span><span class="sxs-lookup"><span data-stu-id="bb285-417">Note that although the data is encrypted in transit, we still recommend using HTTPS to take advantage of the built-in data integrity checks which help mitigate network errors affecting the integrity of the data.</span></span>

<span data-ttu-id="bb285-418">Ett exempel på där du kan använda detta är om du har ett program som lagrar blobbar och hämtar BLOB och du vill att program och data att vara så säkert som möjligt.</span><span class="sxs-lookup"><span data-stu-id="bb285-418">An example of where you might use this is if you have a web application that stores blobs and retrieves blobs, and you want the application and data to be as secure as possible.</span></span> <span data-ttu-id="bb285-419">I så fall använder du kryptering på klientsidan.</span><span class="sxs-lookup"><span data-stu-id="bb285-419">In that case, you would use client-side encryption.</span></span> <span data-ttu-id="bb285-420">Trafiken mellan klienten och tjänsten Azure Blob innehåller krypterade resursen och ingen kan tolka data under överföringen och fylla i ditt privata blobbar.</span><span class="sxs-lookup"><span data-stu-id="bb285-420">The traffic between the client and the Azure Blob Service contains the encrypted resource, and nobody can interpret the data in transit and reconstitute it into your private blobs.</span></span>

<span data-ttu-id="bb285-421">Kryptering på klientsidan är inbyggd i Java och lagringsklientbiblioteken .NET, som i sin tur använder Azure nyckeln valvet API: erna, vilket gör det ganska enkelt att implementera.</span><span class="sxs-lookup"><span data-stu-id="bb285-421">Client-side encryption is built into the Java and the .NET storage client libraries, which in turn use the Azure Key Vault APIs, making it pretty easy for you to implement.</span></span> <span data-ttu-id="bb285-422">Processen för att kryptera och dekryptera data använder kuvert-teknik och lagrar metadata som används av kryptering i varje lagringsobjekt.</span><span class="sxs-lookup"><span data-stu-id="bb285-422">The process of encrypting and decrypting the data uses the envelope technique, and stores metadata used by the encryption in each storage object.</span></span> <span data-ttu-id="bb285-423">Till exempel för BLOB, lagras den i blobmetadata, medan för köer, läggs till varje meddelande i kön.</span><span class="sxs-lookup"><span data-stu-id="bb285-423">For example, for blobs, it stores it in the blob metadata, while for queues, it adds it to each queue message.</span></span>

<span data-ttu-id="bb285-424">Du kan skapa och hantera egna krypteringsnycklar för kryptering.</span><span class="sxs-lookup"><span data-stu-id="bb285-424">For the encryption itself, you can generate and manage your own encryption keys.</span></span> <span data-ttu-id="bb285-425">Du kan också använda nycklar som genereras av Azure Storage-klientbiblioteket kan, eller så Azure Key Vault generera nycklar.</span><span class="sxs-lookup"><span data-stu-id="bb285-425">You can also use keys generated by the Azure Storage Client Library, or you can have the Azure Key Vault generate the keys.</span></span> <span data-ttu-id="bb285-426">Du kan lagra krypteringsnycklar i din lokala lagring eller du kan lagra dem i en Azure Key Vault.</span><span class="sxs-lookup"><span data-stu-id="bb285-426">You can store your encryption keys in your on-premises key storage, or you can store them in an Azure Key Vault.</span></span> <span data-ttu-id="bb285-427">Azure Key Vault kan du bevilja åtkomst till hemligheter i Azure Key Vault till specifika användare med Azure Active Directory.</span><span class="sxs-lookup"><span data-stu-id="bb285-427">Azure Key Vault allows you to grant access to the secrets in Azure Key Vault to specific users using Azure Active Directory.</span></span> <span data-ttu-id="bb285-428">Det innebär att inte bara alla kan läsa Azure Key Vault och hämta nycklar som du använder för kryptering på klientsidan.</span><span class="sxs-lookup"><span data-stu-id="bb285-428">This means that not just anybody can read the Azure Key Vault and retrieve the keys you're using for client-side encryption.</span></span>

#### <a name="resources"></a><span data-ttu-id="bb285-429">Resurser</span><span class="sxs-lookup"><span data-stu-id="bb285-429">Resources</span></span>
* [<span data-ttu-id="bb285-430">Kryptera och dekryptera blobbar i Microsoft Azure Storage med hjälp av Azure Key Vault</span><span class="sxs-lookup"><span data-stu-id="bb285-430">Encrypt and decrypt blobs in Microsoft Azure Storage using Azure Key Vault</span></span>](storage-encrypt-decrypt-blobs-key-vault.md)

  <span data-ttu-id="bb285-431">Den här artikeln visar hur du använder kryptering på klientsidan med Azure Key Vault, inklusive hur du skapar KEK och lagra den i valvet med hjälp av PowerShell.</span><span class="sxs-lookup"><span data-stu-id="bb285-431">This article shows how to use client-side encryption with Azure Key Vault, including how to create the KEK and store it in the vault using PowerShell.</span></span>
* [<span data-ttu-id="bb285-432">Kryptering på klientsidan och Azure Key Vault för Microsoft Azure Storage</span><span class="sxs-lookup"><span data-stu-id="bb285-432">Client-Side Encryption and Azure Key Vault for Microsoft Azure Storage</span></span>](storage-client-side-encryption.md)

  <span data-ttu-id="bb285-433">Den här artikeln ger en förklaring av klientsidan kryptering och ger exempel på hur storage-klientbiblioteket för att kryptera och dekryptera resurser från fyra lagringstjänster.</span><span class="sxs-lookup"><span data-stu-id="bb285-433">This article gives an explanation of client-side encryption, and provides examples of using the storage client library to encrypt and decrypt resources from the four storage services.</span></span> <span data-ttu-id="bb285-434">Det är också pratar om Azure Key Vault.</span><span class="sxs-lookup"><span data-stu-id="bb285-434">It also talks about Azure Key Vault.</span></span>

### <a name="using-azure-disk-encryption-to-encrypt-disks-used-by-your-virtual-machines"></a><span data-ttu-id="bb285-435">Använda Azure Disk Encryption för att kryptera diskar som används av virtuella datorer</span><span class="sxs-lookup"><span data-stu-id="bb285-435">Using Azure Disk Encryption to encrypt disks used by your virtual machines</span></span>
<span data-ttu-id="bb285-436">Azure Disk Encryption är en ny funktion.</span><span class="sxs-lookup"><span data-stu-id="bb285-436">Azure Disk Encryption is a new feature.</span></span> <span data-ttu-id="bb285-437">Den här funktionen kan du kryptera OS-diskar och datadiskar som används av en virtuell IaaS-dator.</span><span class="sxs-lookup"><span data-stu-id="bb285-437">This feature allows you to encrypt the OS disks and Data disks used by an IaaS Virtual Machine.</span></span> <span data-ttu-id="bb285-438">För Windows krypteras enheterna med BitLocker-kryptering branschstandard.</span><span class="sxs-lookup"><span data-stu-id="bb285-438">For Windows, the drives are encrypted using industry-standard BitLocker encryption technology.</span></span> <span data-ttu-id="bb285-439">För Linux krypteras diskarna med DM-Crypt-teknik.</span><span class="sxs-lookup"><span data-stu-id="bb285-439">For Linux, the disks are encrypted using the DM-Crypt technology.</span></span> <span data-ttu-id="bb285-440">Detta är integrerad med Azure Key Vault så att du kan styra och hantera krypteringsnycklar disk.</span><span class="sxs-lookup"><span data-stu-id="bb285-440">This is integrated with Azure Key Vault to allow you to control and manage the disk encryption keys.</span></span>

<span data-ttu-id="bb285-441">Lösningen stöder följande scenarion för virtuella IaaS-datorer när de är aktiverade i Microsoft Azure:</span><span class="sxs-lookup"><span data-stu-id="bb285-441">The solution supports the following scenarios for IaaS VMs when they are enabled in Microsoft Azure:</span></span>

* <span data-ttu-id="bb285-442">Integrering med Azure Key Vault</span><span class="sxs-lookup"><span data-stu-id="bb285-442">Integration with Azure Key Vault</span></span>
* <span data-ttu-id="bb285-443">Standardnivån VMs: [A, D, DS, G, GS och så vidare serien IaaS-VM](https://azure.microsoft.com/pricing/details/virtual-machines/)</span><span class="sxs-lookup"><span data-stu-id="bb285-443">Standard tier VMs: [A, D, DS, G, GS, and so forth series IaaS VMs](https://azure.microsoft.com/pricing/details/virtual-machines/)</span></span>
* <span data-ttu-id="bb285-444">Aktivera kryptering på Windows och Linux virtuella IaaS-datorer</span><span class="sxs-lookup"><span data-stu-id="bb285-444">Enabling encryption on Windows and Linux IaaS VMs</span></span>
* <span data-ttu-id="bb285-445">Om du inaktiverar kryptering på Operativsystemet och enheter för Windows IaaS-VM</span><span class="sxs-lookup"><span data-stu-id="bb285-445">Disabling encryption on OS and data drives for Windows IaaS VMs</span></span>
* <span data-ttu-id="bb285-446">Om du inaktiverar kryptering på dataenheter för Linux virtuella IaaS-datorer</span><span class="sxs-lookup"><span data-stu-id="bb285-446">Disabling encryption on data drives for Linux IaaS VMs</span></span>
* <span data-ttu-id="bb285-447">Aktivera kryptering på virtuella IaaS-datorer som kör windowsklient-OS</span><span class="sxs-lookup"><span data-stu-id="bb285-447">Enabling encryption on IaaS VMs that are running Windows client OS</span></span>
* <span data-ttu-id="bb285-448">Aktivera kryptering på volymer med monteringssökvägar</span><span class="sxs-lookup"><span data-stu-id="bb285-448">Enabling encryption on volumes with mount paths</span></span>
* <span data-ttu-id="bb285-449">Aktivera kryptering på den virtuella Linux-datorer som är konfigurerade med disk-striping (RAID) med hjälp av mdadm</span><span class="sxs-lookup"><span data-stu-id="bb285-449">Enabling encryption on Linux VMs that are configured with disk striping (RAID) by using mdadm</span></span>
* <span data-ttu-id="bb285-450">Aktivera kryptering på den virtuella Linux-datorer med hjälp av LVM för datadiskar</span><span class="sxs-lookup"><span data-stu-id="bb285-450">Enabling encryption on Linux VMs by using LVM for data disks</span></span>
* <span data-ttu-id="bb285-451">Aktivera kryptering på virtuella Windows-datorer som har konfigurerats med hjälp av lagringsutrymmen</span><span class="sxs-lookup"><span data-stu-id="bb285-451">Enabling encryption on Windows VMs that are configured by using storage spaces</span></span>
* <span data-ttu-id="bb285-452">Alla offentliga Azure-regioner som stöds</span><span class="sxs-lookup"><span data-stu-id="bb285-452">All Azure public regions are supported</span></span>

<span data-ttu-id="bb285-453">Lösningen stöder inte följande scenarier, funktioner och tekniken i versionen:</span><span class="sxs-lookup"><span data-stu-id="bb285-453">The solution does not support the following scenarios, features, and technology in the release:</span></span>

* <span data-ttu-id="bb285-454">Grundnivån IaaS-VM</span><span class="sxs-lookup"><span data-stu-id="bb285-454">Basic tier IaaS VMs</span></span>
* <span data-ttu-id="bb285-455">Om du inaktiverar kryptering på en OS-enhet för Linux virtuella IaaS-datorer</span><span class="sxs-lookup"><span data-stu-id="bb285-455">Disabling encryption on an OS drive for Linux IaaS VMs</span></span>
* <span data-ttu-id="bb285-456">Virtuella IaaS-datorer som skapas med hjälp av klassiska metod för skapande av virtuell dator</span><span class="sxs-lookup"><span data-stu-id="bb285-456">IaaS VMs that are created by using the classic VM creation method</span></span>
* <span data-ttu-id="bb285-457">Integrering med din lokala nyckelhanteringstjänst</span><span class="sxs-lookup"><span data-stu-id="bb285-457">Integration with your on-premises Key Management Service</span></span>
* <span data-ttu-id="bb285-458">Azure File storage (delade filsystem), Network File System (NFS), dynamiska volymer och virtuella Windows-datorer som är konfigurerade med programvarubaserad RAID-system</span><span class="sxs-lookup"><span data-stu-id="bb285-458">Azure File storage (shared file system), Network File System (NFS), dynamic volumes, and Windows VMs that are configured with software-based RAID systems</span></span>


> [!NOTE]
> <span data-ttu-id="bb285-459">Linux OS-diskkryptering stöds för närvarande på följande Linux-distributioner: RHEL 7.2, CentOS 7.2n och Ubuntu 16.04.</span><span class="sxs-lookup"><span data-stu-id="bb285-459">Linux OS disk encryption is currently supported on the following Linux distributions: RHEL 7.2, CentOS 7.2n, and Ubuntu 16.04.</span></span>
>
>

<span data-ttu-id="bb285-460">Den här funktionen garanterar att krypteras alla data på virtuella diskar i vila i Azure Storage.</span><span class="sxs-lookup"><span data-stu-id="bb285-460">This feature ensures that all data on your virtual machine disks is encrypted at rest in Azure Storage.</span></span>

#### <a name="resources"></a><span data-ttu-id="bb285-461">Resurser</span><span class="sxs-lookup"><span data-stu-id="bb285-461">Resources</span></span>
* [<span data-ttu-id="bb285-462">Azure Disk Encryption för Windows och Linux-IaaS-VM</span><span class="sxs-lookup"><span data-stu-id="bb285-462">Azure Disk Encryption for Windows and Linux IaaS VMs</span></span>](https://docs.microsoft.com/en-us/azure/security/azure-security-disk-encryption)

### <a name="comparison-of-azure-disk-encryption-sse-and-client-side-encryption"></a><span data-ttu-id="bb285-463">Jämförelse mellan Azure Disk Encryption, SSE och kryptering på klientsidan</span><span class="sxs-lookup"><span data-stu-id="bb285-463">Comparison of Azure Disk Encryption, SSE, and Client-Side Encryption</span></span>
#### <a name="iaas-vms-and-their-vhd-files"></a><span data-ttu-id="bb285-464">Virtuella IaaS-datorer och deras VHD-filer</span><span class="sxs-lookup"><span data-stu-id="bb285-464">IaaS VMs and their VHD files</span></span>
<span data-ttu-id="bb285-465">För diskar som används av virtuella IaaS-datorer, bör du använda Azure Disk Encryption.</span><span class="sxs-lookup"><span data-stu-id="bb285-465">For disks used by IaaS VMs, we recommend using Azure Disk Encryption.</span></span> <span data-ttu-id="bb285-466">Du kan aktivera SSE att kryptera VHD-filer som används för att säkerhetskopiera dessa diskar i Azure Storage, men krypteras bara nyskrivna data.</span><span class="sxs-lookup"><span data-stu-id="bb285-466">You can turn on SSE to encrypt the VHD files that are used to back those disks in Azure Storage, but it only encrypts newly written data.</span></span> <span data-ttu-id="bb285-467">Det innebär att om du skapar en virtuell dator och sedan aktivera SSE på lagringskontot som innehåller VHD-filen bara ändringarna krypteras, inte den ursprungliga VHD-filen.</span><span class="sxs-lookup"><span data-stu-id="bb285-467">This means if you create a VM and then enable SSE on the storage account that holds the VHD file, only the changes will be encrypted, not the original VHD file.</span></span>

<span data-ttu-id="bb285-468">Om du skapar en virtuell dator med en avbildning från Azure Marketplace Azure utför en [ytlig kopiera](https://en.wikipedia.org/wiki/Object_copying) avbildningen och lagringen konto i Azure Storage, och det är inte krypterat även om du har aktiverat SSE.</span><span class="sxs-lookup"><span data-stu-id="bb285-468">If you create a VM using an image from the Azure Marketplace, Azure performs a [shallow copy](https://en.wikipedia.org/wiki/Object_copying) of the image to your storage account in Azure Storage, and it is not encrypted even if you have SSE enabled.</span></span> <span data-ttu-id="bb285-469">När den skapar den virtuella datorn och startar uppdatera bilden startar SSE kryptering av data.</span><span class="sxs-lookup"><span data-stu-id="bb285-469">After it creates the VM and starts updating the image, SSE will start encrypting the data.</span></span> <span data-ttu-id="bb285-470">Därför är det bäst att använda Azure Disk Encryption på virtuella datorer skapas från avbildningar i Azure Marketplace om du vill att de fullständigt krypterade.</span><span class="sxs-lookup"><span data-stu-id="bb285-470">For this reason, it's best to use Azure Disk Encryption on VMs created from images in the Azure Marketplace if you want them fully encrypted.</span></span>

<span data-ttu-id="bb285-471">Om du tar en förkrypterade virtuell dator till Azure från lokala kommer du att kunna överföra krypteringsnycklarna till Azure Key Vault och fortsätta att använda kryptering för den virtuella datorn som du använde lokalt.</span><span class="sxs-lookup"><span data-stu-id="bb285-471">If you bring a pre-encrypted VM into Azure from on-premises, you will be able to upload the encryption keys to Azure Key Vault, and continue using the encryption for that VM that you were using on-premises.</span></span> <span data-ttu-id="bb285-472">Azure Disk Encryption är aktiverat för att hantera det här scenariot.</span><span class="sxs-lookup"><span data-stu-id="bb285-472">Azure Disk Encryption is enabled to handle this scenario.</span></span>

<span data-ttu-id="bb285-473">Om du har en icke-krypterade VHD från lokala kan du överföra den till gallery som en anpassad avbildning och etablera en virtuell dator från den.</span><span class="sxs-lookup"><span data-stu-id="bb285-473">If you have non-encrypted VHD from on-premises, you can upload it into the gallery as a custom image and provision a VM from it.</span></span> <span data-ttu-id="bb285-474">Om du gör detta med hjälp av Resource Manager-mallar, kan du be att aktivera Azure Disk Encryption när den startar den virtuella datorn.</span><span class="sxs-lookup"><span data-stu-id="bb285-474">If you do this using the Resource Manager templates, you can ask it to turn on Azure Disk Encryption when it boots up the VM.</span></span>

<span data-ttu-id="bb285-475">När du lägger till en datadisk och montera den på den virtuella datorn, kan du aktivera Azure Disk Encryption på disken data.</span><span class="sxs-lookup"><span data-stu-id="bb285-475">When you add a data disk and mount it on the VM, you can turn on Azure Disk Encryption on that data disk.</span></span> <span data-ttu-id="bb285-476">Den kommer att kryptera data disken lokalt först och sedan hanteringslager tjänsten gör lazy skrivåtgärder mot storage så lagring innehållet krypteras.</span><span class="sxs-lookup"><span data-stu-id="bb285-476">It will encrypt that data disk locally first, and then the service management layer will do a lazy write against storage so the storage content is encrypted.</span></span>

#### <a name="client-side-encryption"></a><span data-ttu-id="bb285-477">Kryptering av klientsidan</span><span class="sxs-lookup"><span data-stu-id="bb285-477">Client-side encryption</span></span>
<span data-ttu-id="bb285-478">Kryptering på klientsidan är den säkraste metoden för att kryptera dina data eftersom den krypterar före överföringen och krypterar data i vila.</span><span class="sxs-lookup"><span data-stu-id="bb285-478">Client-side encryption is the most secure method of encrypting your data, because it encrypts it before transit, and encrypts the data at rest.</span></span> <span data-ttu-id="bb285-479">Det kräver dock att du lägger till kod för dina program med hjälp av lagring som du inte vill göra.</span><span class="sxs-lookup"><span data-stu-id="bb285-479">However, it does require that you add code to your applications using storage, which you may not want to do.</span></span> <span data-ttu-id="bb285-480">I sådana fall kan använda du HTTPs för dina data i överföring och SSE för att kryptera vilande data.</span><span class="sxs-lookup"><span data-stu-id="bb285-480">In those cases, you can use HTTPs for your data in transit, and SSE to encrypt the data at rest.</span></span>

<span data-ttu-id="bb285-481">Du kan kryptera tabellentiteter, Kömeddelanden och blobbar med kryptering på klientsidan.</span><span class="sxs-lookup"><span data-stu-id="bb285-481">With client-side encryption, you can encrypt table entities, queue messages, and blobs.</span></span> <span data-ttu-id="bb285-482">Du kan endast kryptera blobbar med SSE.</span><span class="sxs-lookup"><span data-stu-id="bb285-482">With SSE, you can only encrypt blobs.</span></span> <span data-ttu-id="bb285-483">Om du behöver tabell och kön data som ska krypteras, bör du använda kryptering på klientsidan.</span><span class="sxs-lookup"><span data-stu-id="bb285-483">If you need table and queue data to be encrypted, you should use client-side encryption.</span></span>

<span data-ttu-id="bb285-484">Kryptering på klientsidan hanteras helt av programmet.</span><span class="sxs-lookup"><span data-stu-id="bb285-484">Client-side encryption is managed entirely by the application.</span></span> <span data-ttu-id="bb285-485">Detta är den säkraste metoden, men kräver att du ändrar ditt program programmässiga och gjorda nyckelhantering processer.</span><span class="sxs-lookup"><span data-stu-id="bb285-485">This is the most secure approach, but does require you to make programmatic changes to your application and put key management processes in place.</span></span> <span data-ttu-id="bb285-486">Du kan använda när du vill öka säkerheten under överföringen och du vill att lagrade data krypteras.</span><span class="sxs-lookup"><span data-stu-id="bb285-486">You would use this when you want the extra security during transit, and you want your stored data to be encrypted.</span></span>

<span data-ttu-id="bb285-487">Kryptering på klientsidan är mer belastningen på klienten och du behöver konto för detta i planer för skalbarhet, särskilt om du krypterar och överför stora mängder data.</span><span class="sxs-lookup"><span data-stu-id="bb285-487">Client-side encryption is more load on the client, and you have to account for this in your scalability plans, especially if you are encrypting and transferring a lot of data.</span></span>

#### <a name="storage-service-encryption-sse"></a><span data-ttu-id="bb285-488">Storage Service-kryptering (SSE)</span><span class="sxs-lookup"><span data-stu-id="bb285-488">Storage Service Encryption (SSE)</span></span>
<span data-ttu-id="bb285-489">SSE hanteras av Azure Storage.</span><span class="sxs-lookup"><span data-stu-id="bb285-489">SSE is managed by Azure Storage.</span></span> <span data-ttu-id="bb285-490">Med hjälp av SSE ger inte för att skydda data under överföring, men den krypterar data som skrivs till Azure Storage.</span><span class="sxs-lookup"><span data-stu-id="bb285-490">Using SSE does not provide for the security of the data in transit, but it does encrypt the data as it is written to Azure Storage.</span></span> <span data-ttu-id="bb285-491">Det finns ingen inverkan på prestanda när du använder den här funktionen.</span><span class="sxs-lookup"><span data-stu-id="bb285-491">There is no impact on the performance when using this feature.</span></span>

<span data-ttu-id="bb285-492">Du kan endast kryptera blockblobbar, tilläggsblobbar och sidblobbar med hjälp av SSE.</span><span class="sxs-lookup"><span data-stu-id="bb285-492">You can only encrypt block blobs, append blobs, and page blobs using SSE.</span></span> <span data-ttu-id="bb285-493">Om du behöver kryptera tabelldata eller kön data bör du använda kryptering på klientsidan.</span><span class="sxs-lookup"><span data-stu-id="bb285-493">If you need to encrypt table data or queue data, you should consider using client-side encryption.</span></span>

<span data-ttu-id="bb285-494">Om du har ett arkiv eller bibliotek av VHD-filer som du använder som grund för att skapa nya virtuella datorer kan du skapa ett nytt lagringskonto, aktivera SSE och sedan överföra VHD-filerna till det kontot.</span><span class="sxs-lookup"><span data-stu-id="bb285-494">If you have an archive or library of VHD files that you use as a basis for creating new virtual machines, you can create a new storage account, enable SSE, and then upload the VHD files to that account.</span></span> <span data-ttu-id="bb285-495">Dessa VHD-filer krypteras av Azure Storage.</span><span class="sxs-lookup"><span data-stu-id="bb285-495">Those VHD files will be encrypted by Azure Storage.</span></span>

<span data-ttu-id="bb285-496">Om du har aktiverat för diskarna i en virtuell dator och SSE aktiverad på lagringskonto innehåller VHD-filer för Azure Disk Encryption fungerar den bra; Det leder till att alla nyligen skrivs data som krypteras två gånger.</span><span class="sxs-lookup"><span data-stu-id="bb285-496">If you have Azure Disk Encryption enabled for the disks in a VM and SSE enabled on the storage account holding the VHD files, it will work fine; it will result in any newly-written data being encrypted twice.</span></span>

## <a name="storage-analytics"></a><span data-ttu-id="bb285-497">Lagringsanalys</span><span class="sxs-lookup"><span data-stu-id="bb285-497">Storage Analytics</span></span>
### <a name="using-storage-analytics-to-monitor-authorization-type"></a><span data-ttu-id="bb285-498">Använda Storage Analytics för att övervaka tillstånd typ</span><span class="sxs-lookup"><span data-stu-id="bb285-498">Using Storage Analytics to monitor authorization type</span></span>
<span data-ttu-id="bb285-499">Du kan aktivera Azure Storage Analytics att utföra loggning och lagra data för mått för varje storage-konto.</span><span class="sxs-lookup"><span data-stu-id="bb285-499">For each storage account, you can enable Azure Storage Analytics to perform logging and store metrics data.</span></span> <span data-ttu-id="bb285-500">Det här är ett bra verktyg för att använda när du vill kontrollera prestandamått för ett lagringskonto eller behöver felsöka ett storage-konto eftersom du har prestandaproblem med.</span><span class="sxs-lookup"><span data-stu-id="bb285-500">This is a great tool to use when you want to check the performance metrics of a storage account, or need to troubleshoot a storage account because you are having performance problems.</span></span>

<span data-ttu-id="bb285-501">En annan typ av data som visas i loggarna storage analytics är autentiseringsmetoden som används av någon när de har åtkomst till lagring.</span><span class="sxs-lookup"><span data-stu-id="bb285-501">Another piece of data you can see in the storage analytics logs is the authentication method used by someone when they access storage.</span></span> <span data-ttu-id="bb285-502">Du kan till exempel se om de används en signatur för delad åtkomst eller lagringskontonycklarna, eller om blob nås var offentliga i med Blob Storage.</span><span class="sxs-lookup"><span data-stu-id="bb285-502">For example, with Blob Storage, you can see if they used a Shared Access Signature or the storage account keys, or if the blob accessed was public.</span></span>

<span data-ttu-id="bb285-503">Det kan vara mycket användbart om du nära skyddar åtkomst till lagring.</span><span class="sxs-lookup"><span data-stu-id="bb285-503">This can be really helpful if you are tightly guarding access to storage.</span></span> <span data-ttu-id="bb285-504">I Blob Storage du exempelvis anger alla behållare som privat och implementerar en SAS-tjänst i dina program.</span><span class="sxs-lookup"><span data-stu-id="bb285-504">For example, in Blob Storage you can set all of the containers to private and implement the use of an SAS service throughout your applications.</span></span> <span data-ttu-id="bb285-505">Du kan kontrollera loggarna regelbundet för att se om dina blobbar används med lagringskontonycklar, vilket kan tyda på ett sekretessbrott, eller om blobbarna är offentliga men de får inte vara.</span><span class="sxs-lookup"><span data-stu-id="bb285-505">Then you can check the logs regularly to see if your blobs are accessed using the storage account keys, which may indicate a breach of security, or if the blobs are public but they shouldn't be.</span></span>

#### <a name="what-do-the-logs-look-like"></a><span data-ttu-id="bb285-506">Hur ser loggar ut?</span><span class="sxs-lookup"><span data-stu-id="bb285-506">What do the logs look like?</span></span>
<span data-ttu-id="bb285-507">När du aktivera mätvärden för storage-konto och loggning via Azure portal analysdata kommer att börja samla snabbt.</span><span class="sxs-lookup"><span data-stu-id="bb285-507">After you enable the storage account metrics and logging through the Azure portal, analytics data will start to accumulate quickly.</span></span> <span data-ttu-id="bb285-508">Loggning och mått för varje tjänst är separat; loggning skrivs endast när det är aktiviteten att storage-konto medan loggas mätvärden varje minut, varje timme eller varje dag, beroende på hur du konfigurerar den.</span><span class="sxs-lookup"><span data-stu-id="bb285-508">The logging and metrics for each service is separate; the logging is only written when there is activity in that storage account, while the metrics will be logged every minute, every hour, or every day, depending on how you configure it.</span></span>

<span data-ttu-id="bb285-509">Loggfilerna lagras i blockblobbar i en behållare med namnet $logs i lagringskontot.</span><span class="sxs-lookup"><span data-stu-id="bb285-509">The logs are stored in block blobs in a container named $logs in the storage account.</span></span> <span data-ttu-id="bb285-510">Den här behållaren skapas automatiskt när Storage Analytics är aktiverad.</span><span class="sxs-lookup"><span data-stu-id="bb285-510">This container is automatically created when Storage Analytics is enabled.</span></span> <span data-ttu-id="bb285-511">När den här behållaren har skapats kan du ta bort det, även om du tar bort innehållet.</span><span class="sxs-lookup"><span data-stu-id="bb285-511">Once this container is created, you can't delete it, although you can delete its contents.</span></span>

<span data-ttu-id="bb285-512">Det finns en mapp för varje tjänst under $logs-behållaren och det finns undermappar för år/månad/dag/timme.</span><span class="sxs-lookup"><span data-stu-id="bb285-512">Under the $logs container, there is a folder for each service, and then there are subfolders for the year/month/day/hour.</span></span> <span data-ttu-id="bb285-513">Timma numreras bara loggarna.</span><span class="sxs-lookup"><span data-stu-id="bb285-513">Under hour, the logs are simply numbered.</span></span> <span data-ttu-id="bb285-514">Detta är hur katalogstrukturen ser ut:</span><span class="sxs-lookup"><span data-stu-id="bb285-514">This is what the directory structure will look like:</span></span>

![Visa loggfiler](./media/storage-security-guide/image1.png)

<span data-ttu-id="bb285-516">Alla begäranden till Azure Storage är inloggad.</span><span class="sxs-lookup"><span data-stu-id="bb285-516">Every request to Azure Storage is logged.</span></span> <span data-ttu-id="bb285-517">Här är en ögonblicksbild av en loggfil som visar de första några fälten.</span><span class="sxs-lookup"><span data-stu-id="bb285-517">Here's a snapshot of a log file, showing the first few fields.</span></span>

![Ögonblicksbild av en loggfil](./media/storage-security-guide/image2.png)

<span data-ttu-id="bb285-519">Du kan se att du kan använda loggarna för att spåra alla slags anrop till ett lagringskonto.</span><span class="sxs-lookup"><span data-stu-id="bb285-519">You can see that you can use the logs to track any kind of calls to a storage account.</span></span>

#### <a name="what-are-all-of-those-fields-for"></a><span data-ttu-id="bb285-520">Vad är alla dessa fält för?</span><span class="sxs-lookup"><span data-stu-id="bb285-520">What are all of those fields for?</span></span>
<span data-ttu-id="bb285-521">Det finns en artikel som anges i resurserna nedan som innehåller en lista över många fält i loggarna och vad de används.</span><span class="sxs-lookup"><span data-stu-id="bb285-521">There is an article listed in the resources below that provides the list of the many fields in the logs and what they are used for.</span></span> <span data-ttu-id="bb285-522">Här är listan över fält i ordning:</span><span class="sxs-lookup"><span data-stu-id="bb285-522">Here is the list of fields in order:</span></span>

![Ögonblicksbild av fälten i en loggfil](./media/storage-security-guide/image3.png)

<span data-ttu-id="bb285-524">Vi är intresserad av posterna för GetBlob och hur de autentiseras, så vi behöver leta efter poster med åtgärdstypen ”Get-Blob” och kontrollera begäran-status (4<sup>th</sup> kolumn) och auktorisering-typ (8<sup>th</sup> kolumn).</span><span class="sxs-lookup"><span data-stu-id="bb285-524">We're interested in the entries for GetBlob, and how they are authenticated, so we need to look for entries with operation-type "Get-Blob", and check the request-status (4<sup>th</sup> column) and the authorization-type (8<sup>th</sup> column).</span></span>

<span data-ttu-id="bb285-525">Till exempel i de första raderna i listan ovan, begäran-status är ”klar” och auktorisering-type ”autentiseras”.</span><span class="sxs-lookup"><span data-stu-id="bb285-525">For example, in the first few rows in the listing above, the request-status is "Success" and the authorization-type is "authenticated".</span></span> <span data-ttu-id="bb285-526">Det innebär att begäran har verifierats med hjälp av lagringskontots åtkomstnyckel.</span><span class="sxs-lookup"><span data-stu-id="bb285-526">This means the request was validated using the storage account key.</span></span>

#### <a name="how-are-my-blobs-being-authenticated"></a><span data-ttu-id="bb285-527">Hur mitt blob som autentiseras?</span><span class="sxs-lookup"><span data-stu-id="bb285-527">How are my blobs being authenticated?</span></span>
<span data-ttu-id="bb285-528">Vi har tre fall som vi är intresserad av.</span><span class="sxs-lookup"><span data-stu-id="bb285-528">We have three cases that we are interested in.</span></span>

1. <span data-ttu-id="bb285-529">Blobben är offentlig och den kan nås med hjälp av en URL utan en signatur för delad åtkomst.</span><span class="sxs-lookup"><span data-stu-id="bb285-529">The blob is public and it is accessed using a URL without a Shared Access Signature.</span></span> <span data-ttu-id="bb285-530">I det här fallet begäran-status är ”AnonymousSuccess” och typen tillståndet är ”anonym”.</span><span class="sxs-lookup"><span data-stu-id="bb285-530">In this case, the request-status is "AnonymousSuccess" and the authorization-type is "anonymous".</span></span>

   <span data-ttu-id="bb285-531">1.0; 2015-11-17T02:01:29.0488963Z; GetBlob; **AnonymousSuccess**; 200; 124; 37; **anonym**; mystorage...</span><span class="sxs-lookup"><span data-stu-id="bb285-531">1.0;2015-11-17T02:01:29.0488963Z;GetBlob;**AnonymousSuccess**;200;124;37;**anonymous**;;mystorage…</span></span>
2. <span data-ttu-id="bb285-532">Blobben är privata och användes med en signatur för delad åtkomst.</span><span class="sxs-lookup"><span data-stu-id="bb285-532">The blob is private and was used with a Shared Access Signature.</span></span> <span data-ttu-id="bb285-533">I det här fallet begäran-status är ”SASSuccess” och auktorisering-typen är ”sas”.</span><span class="sxs-lookup"><span data-stu-id="bb285-533">In this case, the request-status is "SASSuccess" and the authorization-type is "sas".</span></span>

   <span data-ttu-id="bb285-534">1.0; 2015-11-16T18:30:05.6556115Z; GetBlob; **SASSuccess**; 200; 416; 64; **SAS**; mystorage...</span><span class="sxs-lookup"><span data-stu-id="bb285-534">1.0;2015-11-16T18:30:05.6556115Z;GetBlob;**SASSuccess**;200;416;64;**sas**;;mystorage…</span></span>
3. <span data-ttu-id="bb285-535">Blob är privat nyckel för säkerhetslagring användes för att komma åt den.</span><span class="sxs-lookup"><span data-stu-id="bb285-535">The blob is private and the storage key was used to access it.</span></span> <span data-ttu-id="bb285-536">I det här fallet begäran-status är ”**lyckade**” och auktorisering-typen är ”**autentiserade**”.</span><span class="sxs-lookup"><span data-stu-id="bb285-536">In this case, the request-status is "**Success**" and the authorization-type is "**authenticated**".</span></span>

   <span data-ttu-id="bb285-537">1.0; 2015-11-16T18:32:24.3174537Z; GetBlob; **Lyckade**; 206; 59; 22; **autentiserad**; mystorage...</span><span class="sxs-lookup"><span data-stu-id="bb285-537">1.0;2015-11-16T18:32:24.3174537Z;GetBlob;**Success**;206;59;22;**authenticated**;mystorage…</span></span>

<span data-ttu-id="bb285-538">Du kan använda Microsoft Message Analyzer för att visa och analysera dessa loggar.</span><span class="sxs-lookup"><span data-stu-id="bb285-538">You can use the Microsoft Message Analyzer to view and analyze these logs.</span></span> <span data-ttu-id="bb285-539">Den innehåller Sök och filtrera funktioner.</span><span class="sxs-lookup"><span data-stu-id="bb285-539">It includes search and filter capabilities.</span></span> <span data-ttu-id="bb285-540">Du kan till exempel vill söka efter förekomster av GetBlob om användningen är vad du förväntar dig, dvs. att se till att någon inte har åtkomst till ditt lagringskonto felaktigt.</span><span class="sxs-lookup"><span data-stu-id="bb285-540">For example, you might want to search for instances of GetBlob to see if the usage is what you expect, i.e. to make sure someone is not accessing your storage account inappropriately.</span></span>

#### <a name="resources"></a><span data-ttu-id="bb285-541">Resurser</span><span class="sxs-lookup"><span data-stu-id="bb285-541">Resources</span></span>
* [<span data-ttu-id="bb285-542">Lagringsanalys</span><span class="sxs-lookup"><span data-stu-id="bb285-542">Storage Analytics</span></span>](storage-analytics.md)

  <span data-ttu-id="bb285-543">Den här artikeln är en översikt över storage analytics och aktivera dem.</span><span class="sxs-lookup"><span data-stu-id="bb285-543">This article is an overview of storage analytics and how to enable them.</span></span>
* [<span data-ttu-id="bb285-544">Storage Analytics loggformat</span><span class="sxs-lookup"><span data-stu-id="bb285-544">Storage Analytics Log Format</span></span>](https://msdn.microsoft.com/library/azure/hh343259.aspx)

  <span data-ttu-id="bb285-545">Den här artikeln visar loggformatet Storage Analytics och detaljer tillgängliga fält, inklusive autentiseringstyp, som visar vilken typ av autentisering som används för begäran.</span><span class="sxs-lookup"><span data-stu-id="bb285-545">This article illustrates the Storage Analytics Log Format, and details the fields available therein, including authentication-type, which indicates the type of authentication used for the request.</span></span>
* [<span data-ttu-id="bb285-546">Övervaka ett Lagringskonto i Azure-portalen</span><span class="sxs-lookup"><span data-stu-id="bb285-546">Monitor a Storage Account in the Azure portal</span></span>](storage-monitor-storage-account.md)

  <span data-ttu-id="bb285-547">Den här artikeln visar hur du konfigurerar övervakning av mätvärden och loggning för ett lagringskonto.</span><span class="sxs-lookup"><span data-stu-id="bb285-547">This article shows how to configure monitoring of metrics and logging for a storage account.</span></span>
* [<span data-ttu-id="bb285-548">Slutpunkt till slutpunkt-felsökning med hjälp av Azure Storage-mätvärden och loggning, AzCopy och Message Analyzer</span><span class="sxs-lookup"><span data-stu-id="bb285-548">End-to-End Troubleshooting using Azure Storage Metrics and Logging, AzCopy, and Message Analyzer</span></span>](storage-e2e-troubleshooting.md)

  <span data-ttu-id="bb285-549">Den här artikeln handlar om felsökning med hjälp av Storage Analytics och visar hur du använder Microsoft Message Analyzer.</span><span class="sxs-lookup"><span data-stu-id="bb285-549">This article talks about troubleshooting using the Storage Analytics and shows how to use the Microsoft Message Analyzer.</span></span>
* [<span data-ttu-id="bb285-550">Microsoft Message Analyzer fungerar Guide</span><span class="sxs-lookup"><span data-stu-id="bb285-550">Microsoft Message Analyzer Operating Guide</span></span>](https://technet.microsoft.com/library/jj649776.aspx)

  <span data-ttu-id="bb285-551">Den här artikeln är referens för Microsoft Message Analyzer och innehåller länkar till en kursen, Snabbstart och sammanfattning av funktioner.</span><span class="sxs-lookup"><span data-stu-id="bb285-551">This article is the reference for the Microsoft Message Analyzer and includes links to a tutorial, quick start, and feature summary.</span></span>

## <a name="cross-origin-resource-sharing-cors"></a><span data-ttu-id="bb285-552">Resursdelning för korsande ursprung (CORS)</span><span class="sxs-lookup"><span data-stu-id="bb285-552">Cross-Origin Resource Sharing (CORS)</span></span>
### <a name="cross-domain-access-of-resources"></a><span data-ttu-id="bb285-553">Korsdomänåtkomst för resurser</span><span class="sxs-lookup"><span data-stu-id="bb285-553">Cross-domain access of resources</span></span>
<span data-ttu-id="bb285-554">När en webbläsare som körs i en domän gör en HTTP-begäran för en resurs från en annan domän, kallas en cross-origin HTTP-begäran.</span><span class="sxs-lookup"><span data-stu-id="bb285-554">When a web browser running in one domain makes an HTTP request for a resource from a different domain, this is called a cross-origin HTTP request.</span></span> <span data-ttu-id="bb285-555">Exempelvis begär en HTML-sida från contoso.com en JPEG-bild som finns på fabrikam.blob.core.windows.net.</span><span class="sxs-lookup"><span data-stu-id="bb285-555">For example, an HTML page served from contoso.com makes a request for a jpeg hosted on fabrikam.blob.core.windows.net.</span></span> <span data-ttu-id="bb285-556">Av säkerhetsskäl begränsa cross-origin HTTP-begäranden som startas från skript, till exempel JavaScript i webbläsare.</span><span class="sxs-lookup"><span data-stu-id="bb285-556">For security reasons, browsers restrict cross-origin HTTP requests initiated from within scripts, such as JavaScript.</span></span> <span data-ttu-id="bb285-557">Det innebär att när JavaScript-kod på en webbsida på contoso.com begär att jpeg på fabrikam.blob.core.windows.net, webbläsaren inte tillåter att begäran.</span><span class="sxs-lookup"><span data-stu-id="bb285-557">This means that when some JavaScript code on a web page on contoso.com requests that jpeg on fabrikam.blob.core.windows.net, the browser will not allow the request.</span></span>

<span data-ttu-id="bb285-558">Vad har detta för att göra med Azure Storage?</span><span class="sxs-lookup"><span data-stu-id="bb285-558">What does this have to do with Azure Storage?</span></span> <span data-ttu-id="bb285-559">Också, om du lagrar statiska resurser, t.ex JSON- eller XML-filer i Blob Storage med hjälp av ett lagringskonto kallas Fabrikam domänen för tillgångarna blir fabrikam.blob.core.windows.net och webbprogrammet contoso.com kommer inte kunna komma åt dem med hjälp av JavaScript eftersom domänerna som inte är samma.</span><span class="sxs-lookup"><span data-stu-id="bb285-559">Well, if you are storing static assets such as JSON or XML data files in Blob Storage using a storage account called Fabrikam, the domain for the assets will be fabrikam.blob.core.windows.net, and the contoso.com web application will not be able to access them using JavaScript because the domains are different.</span></span> <span data-ttu-id="bb285-560">Detta gäller även om du försöker anropa en av Azure Storage-tjänster – till exempel Table Storage – som returnerar JSON-data som ska bearbetas av JavaScript-klienten.</span><span class="sxs-lookup"><span data-stu-id="bb285-560">This is also true if you're trying to call one of the Azure Storage Services – such as Table Storage – that return JSON data to be processed by the JavaScript client.</span></span>

#### <a name="possible-solutions"></a><span data-ttu-id="bb285-561">Möjliga lösningar</span><span class="sxs-lookup"><span data-stu-id="bb285-561">Possible solutions</span></span>
<span data-ttu-id="bb285-562">Ett sätt att lösa problemet är att tilldela en anpassad domän som ”storage.contoso.com” till fabrikam.blob.core.windows.net.</span><span class="sxs-lookup"><span data-stu-id="bb285-562">One way to resolve this is to assign a custom domain like "storage.contoso.com" to fabrikam.blob.core.windows.net.</span></span> <span data-ttu-id="bb285-563">Problemet är att du kan endast tilldela den anpassa domänen ett lagringskonto.</span><span class="sxs-lookup"><span data-stu-id="bb285-563">The problem is that you can only assign that custom domain to one storage account.</span></span> <span data-ttu-id="bb285-564">Vad händer om tillgångar lagras i flera storage-konton?</span><span class="sxs-lookup"><span data-stu-id="bb285-564">What if the assets are stored in multiple storage accounts?</span></span>

<span data-ttu-id="bb285-565">Ett annat sätt att lösa problemet är att webbprogrammet fungerar som proxy för storage-anrop.</span><span class="sxs-lookup"><span data-stu-id="bb285-565">Another way to resolve this is to have the web application act as a proxy for the storage calls.</span></span> <span data-ttu-id="bb285-566">Det innebär att om du överför en fil till Blob Storage, webbprogrammet skulle antingen skriva det lokalt och sedan kopiera den till Blob Storage och den kommer att läsa in alla i minnet och skriver den till Blob Storage.</span><span class="sxs-lookup"><span data-stu-id="bb285-566">This means if you are uploading a file to Blob Storage, the web application would either write it locally and then copy it to Blob Storage, or it would read all of it into memory and then write it to Blob Storage.</span></span> <span data-ttu-id="bb285-567">Alternativt kan skriva du ett dedikerat webbprogram (till exempel en webb-API) som överför filer lokalt och skriver dem till Blob Storage.</span><span class="sxs-lookup"><span data-stu-id="bb285-567">Alternately, you could write a dedicated web application (such as a Web API) that uploads the files locally and writes them to Blob Storage.</span></span> <span data-ttu-id="bb285-568">Oavsett hur du måste kontot för den funktionen när skalbarhet behöver.</span><span class="sxs-lookup"><span data-stu-id="bb285-568">Either way, you have to account for that function when determining the scalability needs.</span></span>

#### <a name="how-can-cors-help"></a><span data-ttu-id="bb285-569">CORS hur?</span><span class="sxs-lookup"><span data-stu-id="bb285-569">How can CORS help?</span></span>
<span data-ttu-id="bb285-570">Azure Storage kan du aktivera CORS – Cross Origin Resource Sharing.</span><span class="sxs-lookup"><span data-stu-id="bb285-570">Azure Storage allows you to enable CORS – Cross Origin Resource Sharing.</span></span> <span data-ttu-id="bb285-571">Du kan ange domäner som har åtkomst till resurser i detta lagringskonto för varje storage-konto.</span><span class="sxs-lookup"><span data-stu-id="bb285-571">For each storage account, you can specify domains that can access the resources in that storage account.</span></span> <span data-ttu-id="bb285-572">I vårt fall som beskrivs ovan, vi till exempel aktivera CORS för fabrikam.blob.core.windows.net storage-konto och konfigurera den för att tillåta åtkomst till contoso.com.</span><span class="sxs-lookup"><span data-stu-id="bb285-572">For example, in our case outlined above, we can enable CORS on the fabrikam.blob.core.windows.net storage account and configure it to allow access to contoso.com.</span></span> <span data-ttu-id="bb285-573">Web application contoso.com kan sedan direkt åtkomst till resurser i fabrikam.blob.core.windows.net.</span><span class="sxs-lookup"><span data-stu-id="bb285-573">Then the web application contoso.com can directly access the resources in fabrikam.blob.core.windows.net.</span></span>

<span data-ttu-id="bb285-574">Observera är att CORS tillåter åtkomst, men ger inte autentisering, vilket krävs för alla icke-offentlig åtkomst av lagringsresurser.</span><span class="sxs-lookup"><span data-stu-id="bb285-574">One thing to note is that CORS allows access, but it does not provide authentication, which is required for all non-public access of storage resources.</span></span> <span data-ttu-id="bb285-575">Detta innebär att du har bara åtkomst till blobbar om de är offentliga eller om du inkluderar en signatur för delad åtkomst som ger behörighet.</span><span class="sxs-lookup"><span data-stu-id="bb285-575">This means you can only access blobs if they are public or you include a Shared Access Signature giving you the appropriate permission.</span></span> <span data-ttu-id="bb285-576">Tabeller, köer och filer har ingen offentlig åtkomst och kräver en SAS.</span><span class="sxs-lookup"><span data-stu-id="bb285-576">Tables, queues, and files have no public access, and require a SAS.</span></span>

<span data-ttu-id="bb285-577">Som standard är CORS inaktiverad på alla tjänster.</span><span class="sxs-lookup"><span data-stu-id="bb285-577">By default, CORS is disabled on all services.</span></span> <span data-ttu-id="bb285-578">Du kan aktivera CORS med hjälp av REST API eller klientbibliotek för storage för att anropa en av metoderna för att ange principer för tjänsten.</span><span class="sxs-lookup"><span data-stu-id="bb285-578">You can enable CORS by using the REST API or the storage client library to call one of the methods to set the service policies.</span></span> <span data-ttu-id="bb285-579">När du gör det kan inkludera du en regel för CORS som XML.</span><span class="sxs-lookup"><span data-stu-id="bb285-579">When you do that, you include a CORS rule, which is in XML.</span></span> <span data-ttu-id="bb285-580">Här är ett exempel på en CORS-regel som har angetts med hjälp av åtgärden Ange egenskaper för Blob-tjänsten för ett lagringskonto.</span><span class="sxs-lookup"><span data-stu-id="bb285-580">Here's an example of a CORS rule that has been set using the Set Service Properties operation for the Blob Service for a storage account.</span></span> <span data-ttu-id="bb285-581">Du kan utföra åtgärden med storage-klientbibliotek eller REST-API: er för Azure Storage.</span><span class="sxs-lookup"><span data-stu-id="bb285-581">You can perform that operation using the storage client library or the REST APIs for Azure Storage.</span></span>

```xml
<Cors>    
    <CorsRule>
        <AllowedOrigins>http://www.contoso.com, http://www.fabrikam.com</AllowedOrigins>
        <AllowedMethods>PUT,GET</AllowedMethods>
        <AllowedHeaders>x-ms-meta-data*,x-ms-meta-target*,x-ms-meta-abc</AllowedHeaders>
        <ExposedHeaders>x-ms-meta-*</ExposedHeaders>
        <MaxAgeInSeconds>200</MaxAgeInSeconds>
    </CorsRule>
<Cors>
```

<span data-ttu-id="bb285-582">Här är vad det innebär att varje rad:</span><span class="sxs-lookup"><span data-stu-id="bb285-582">Here's what each row means:</span></span>

* <span data-ttu-id="bb285-583">**AllowedOrigins** ser som icke-matchande domäner kan begära och ta emot data från storage-tjänst.</span><span class="sxs-lookup"><span data-stu-id="bb285-583">**AllowedOrigins** This tells which non-matching domains can request and receive data from the storage service.</span></span> <span data-ttu-id="bb285-584">Detta innebär att både contoso.com och fabrikam.com kan begära data från Blob Storage för ett visst lagringskonto.</span><span class="sxs-lookup"><span data-stu-id="bb285-584">This says that both contoso.com and fabrikam.com can request data from Blob Storage for a specific storage account.</span></span> <span data-ttu-id="bb285-585">Du kan också ställa in det till ett jokertecken (\*) så att alla domäner att komma åt begäranden.</span><span class="sxs-lookup"><span data-stu-id="bb285-585">You can also set this to a wildcard (\*) to allow all domains to access requests.</span></span>
* <span data-ttu-id="bb285-586">**AllowedMethods** detta är listan över metoder (http-begäran verb) som kan användas när du gör en begäran.</span><span class="sxs-lookup"><span data-stu-id="bb285-586">**AllowedMethods** This is the list of methods (HTTP request verbs) that can be used when making the request.</span></span> <span data-ttu-id="bb285-587">I det här exemplet tillåts bara skicka och hämta.</span><span class="sxs-lookup"><span data-stu-id="bb285-587">In this example, only PUT and GET are allowed.</span></span> <span data-ttu-id="bb285-588">Du kan ange detta till ett jokertecken (\*) så att alla metoder som ska användas.</span><span class="sxs-lookup"><span data-stu-id="bb285-588">You can set this to a wildcard (\*) to allow all methods to be used.</span></span>
* <span data-ttu-id="bb285-589">**AllowedHeaders** är huvuden för begäran som den ursprungliga domänen kan ange när du gör en begäran.</span><span class="sxs-lookup"><span data-stu-id="bb285-589">**AllowedHeaders** This is the request headers that the origin domain can specify when making the request.</span></span> <span data-ttu-id="bb285-590">I det här exemplet tillåts alla metadata huvuden som börjar med x-ms-metadata, x-ms-meta-mål- och x-ms-meta-abc.</span><span class="sxs-lookup"><span data-stu-id="bb285-590">In this example, all metadata headers starting with x-ms-meta-data, x-ms-meta-target, and x-ms-meta-abc are permitted.</span></span> <span data-ttu-id="bb285-591">Jokertecknet (\*) anger att alla huvud som börjar med det angivna prefixet tillåts.</span><span class="sxs-lookup"><span data-stu-id="bb285-591">The wildcard character (\*) indicates that any header beginning with the specified prefix is allowed.</span></span>
* <span data-ttu-id="bb285-592">**ExposedHeaders** detta talar om vilka svarshuvuden bör exponeras i webbläsaren att utfärdaren begäran.</span><span class="sxs-lookup"><span data-stu-id="bb285-592">**ExposedHeaders** This tells which response headers should be exposed by the browser to the request issuer.</span></span> <span data-ttu-id="bb285-593">I det här exemplet, de huvuden som börjar med ”x-ms - meta-” visas.</span><span class="sxs-lookup"><span data-stu-id="bb285-593">In this example, any header starting with "x-ms-meta-" will be exposed.</span></span>
* <span data-ttu-id="bb285-594">**MaxAgeInSeconds** detta är den maximala tid som en webbläsare cachelagras Preflight-alternativ för begäran.</span><span class="sxs-lookup"><span data-stu-id="bb285-594">**MaxAgeInSeconds** This is the maximum amount of time that a browser will cache the preflight OPTIONS request.</span></span> <span data-ttu-id="bb285-595">(Mer information om preflight-begäran att kontrollera den första artikeln nedan.)</span><span class="sxs-lookup"><span data-stu-id="bb285-595">(For more information about the preflight request, check the first article below.)</span></span>

#### <a name="resources"></a><span data-ttu-id="bb285-596">Resurser</span><span class="sxs-lookup"><span data-stu-id="bb285-596">Resources</span></span>
<span data-ttu-id="bb285-597">Mer information om CORS och hur du aktiverar det finns på dessa resurser.</span><span class="sxs-lookup"><span data-stu-id="bb285-597">For more information about CORS and how to enable it, please check out these resources.</span></span>

* [<span data-ttu-id="bb285-598">Cross-Origin Resource Sharing (CORS) stöd för Azure Storage-tjänster på Azure.com</span><span class="sxs-lookup"><span data-stu-id="bb285-598">Cross-Origin Resource Sharing (CORS) Support for the Azure Storage Services on Azure.com</span></span>](storage-cors-support.md)

  <span data-ttu-id="bb285-599">Den här artikeln innehåller en översikt över CORS och hur du skapar regler för olika storage-tjänster.</span><span class="sxs-lookup"><span data-stu-id="bb285-599">This article provides an overview of CORS and how to set the rules for the different storage services.</span></span>
* [<span data-ttu-id="bb285-600">Cross-Origin Resource Sharing (CORS) stöd för Azure Storage-tjänster på MSDN</span><span class="sxs-lookup"><span data-stu-id="bb285-600">Cross-Origin Resource Sharing (CORS) Support for the Azure Storage Services on MSDN</span></span>](https://msdn.microsoft.com/library/azure/dn535601.aspx)

  <span data-ttu-id="bb285-601">Detta är i referensdokumentationen för CORS-stöd för Azure Storage-tjänster.</span><span class="sxs-lookup"><span data-stu-id="bb285-601">This is the reference documentation for CORS support for the Azure Storage Services.</span></span> <span data-ttu-id="bb285-602">Det innehåller länkar till artiklar som gäller för varje storage-tjänst och visar ett exempel och förklarar varje element i filen CORS.</span><span class="sxs-lookup"><span data-stu-id="bb285-602">This has links to articles applying to each storage service, and shows an example and explains each element in the CORS file.</span></span>
* [<span data-ttu-id="bb285-603">Microsoft Azure Storage: Introduktion till CORS</span><span class="sxs-lookup"><span data-stu-id="bb285-603">Microsoft Azure Storage: Introducing CORS</span></span>](http://blogs.msdn.com/b/windowsazurestorage/archive/2014/02/03/windows-azure-storage-introducing-cors.aspx)

  <span data-ttu-id="bb285-604">Detta är en länk till inledande bloggartikel presenterar CORS och visar hur du använder den.</span><span class="sxs-lookup"><span data-stu-id="bb285-604">This is a link to the initial blog article announcing CORS and showing how to use it.</span></span>

## <a name="frequently-asked-questions-about-azure-storage-security"></a><span data-ttu-id="bb285-605">Vanliga frågor och svar om Azure Storage-säkerhet</span><span class="sxs-lookup"><span data-stu-id="bb285-605">Frequently asked questions about Azure Storage security</span></span>
1. <span data-ttu-id="bb285-606">**Hur kan jag bekräfta integriteten för de blobbar som jag överföra till eller från Azure Storage om jag inte använda HTTPS-protokollet?**</span><span class="sxs-lookup"><span data-stu-id="bb285-606">**How can I verify the integrity of the blobs I'm transferring into or out of Azure Storage if I can't use the HTTPS protocol?**</span></span>

   <span data-ttu-id="bb285-607">Om du av någon anledning som du måste använda HTTP i stället för HTTPS och du arbetar med blockblobbar, kan du använda MD5 kontroll för att kontrollera integriteten för de blobbar som överförs.</span><span class="sxs-lookup"><span data-stu-id="bb285-607">If for any reason you need to use HTTP instead of HTTPS and you are working with block blobs, you can use MD5 checking to help verify the integrity of the blobs being transferred.</span></span> <span data-ttu-id="bb285-608">Detta hjälper med skydd från nätverket/transport layer fel, men inte nödvändigtvis med mellanliggande attacker.</span><span class="sxs-lookup"><span data-stu-id="bb285-608">This will help with protection from network/transport layer errors, but not necessarily with intermediary attacks.</span></span>

   <span data-ttu-id="bb285-609">Om du kan använda HTTPS, vilket ger säkerhet på radnivå transport är med hjälp av MD5 kontrollerar redundant och onödiga.</span><span class="sxs-lookup"><span data-stu-id="bb285-609">If you can use HTTPS, which provides transport level security, then using MD5 checking is redundant and unnecessary.</span></span>

   <span data-ttu-id="bb285-610">Mer information finns i [översikt över Azure Blob-MD5](http://blogs.msdn.com/b/windowsazurestorage/archive/2011/02/18/windows-azure-blob-md5-overview.aspx).</span><span class="sxs-lookup"><span data-stu-id="bb285-610">For more information, please check out the [Azure Blob MD5 Overview](http://blogs.msdn.com/b/windowsazurestorage/archive/2011/02/18/windows-azure-blob-md5-overview.aspx).</span></span>
2. <span data-ttu-id="bb285-611">**Nyheter om FIPS-kompatibilitet i USA Government?**</span><span class="sxs-lookup"><span data-stu-id="bb285-611">**What about FIPS-Compliance for the U.S. Government?**</span></span>

   <span data-ttu-id="bb285-612">I USA FIPS Federal Information Processing Standard () definierar kryptografiska algoritmer som godkänts för användning av USA Federala myndigheter datorsystem för att skydda känsliga data.</span><span class="sxs-lookup"><span data-stu-id="bb285-612">The United States Federal Information Processing Standard (FIPS) defines cryptographic algorithms approved for use by U.S. Federal government computer systems for the protection of sensitive data.</span></span> <span data-ttu-id="bb285-613">Aktivering av FIPS visar-läge på en Windows server eller fjärrskrivbord OS endast FIPS-validerade kryptografiska algoritmer som ska användas.</span><span class="sxs-lookup"><span data-stu-id="bb285-613">Enabling FIPS mode on a Windows server or desktop tells the OS that only FIPS-validated cryptographic algorithms should be used.</span></span> <span data-ttu-id="bb285-614">Om ett program som använder icke-kompatibla algoritmer, bryts programmen.</span><span class="sxs-lookup"><span data-stu-id="bb285-614">If an application uses non-compliant algorithms, the applications will break.</span></span> <span data-ttu-id="bb285-615">With.NET Framework version 4.5.2 eller senare och programmet automatiskt växlar krypteringsalgoritmer om du vill använda FIPS-kompatibla algoritmer när datorn är i FIPS-läge.</span><span class="sxs-lookup"><span data-stu-id="bb285-615">With.NET Framework versions 4.5.2 or higher, the application automatically switches the cryptography algorithms to use FIPS-compliant algorithms when the computer is in FIPS mode.</span></span>

   <span data-ttu-id="bb285-616">Microsoft lämnar det upp till varje kund för att bestämma om du vill aktivera FIPS-läge.</span><span class="sxs-lookup"><span data-stu-id="bb285-616">Microsoft leaves it up to each customer to decide whether to enable FIPS mode.</span></span> <span data-ttu-id="bb285-617">Vi tror att det finns ingen tvingande anledning för kunder som inte omfattas av government sina förordningar för att aktivera FIPS-läge som standard.</span><span class="sxs-lookup"><span data-stu-id="bb285-617">We believe there is no compelling reason for customers who are not subject to government regulations to enable FIPS mode by default.</span></span>

   <span data-ttu-id="bb285-618">**Resurser**</span><span class="sxs-lookup"><span data-stu-id="bb285-618">**Resources**</span></span>

* [<span data-ttu-id="bb285-619">Varför inte rekommenderar vi ”FIPS-läge” längre</span><span class="sxs-lookup"><span data-stu-id="bb285-619">Why We're Not Recommending "FIPS Mode" Anymore</span></span>](http://blogs.technet.com/b/secguide/archive/2014/04/07/why-we-re-not-recommending-fips-mode-anymore.aspx)

  <span data-ttu-id="bb285-620">Den här bloggen artikeln ger en översikt över FIPS och förklarar varför de inte aktiverar FIPS-läge som standard.</span><span class="sxs-lookup"><span data-stu-id="bb285-620">This blog article gives an overview of FIPS and explains why they don't enable FIPS mode by default.</span></span>
* [<span data-ttu-id="bb285-621">FIPS 140 verifiering</span><span class="sxs-lookup"><span data-stu-id="bb285-621">FIPS 140 Validation</span></span>](https://technet.microsoft.com/library/cc750357.aspx)

  <span data-ttu-id="bb285-622">Den här artikeln innehåller information om hur Microsoft-produkter och kryptografimoduler överensstämmer med den FIPS-standarden för USA Federala myndigheter.</span><span class="sxs-lookup"><span data-stu-id="bb285-622">This article provides information on how Microsoft products and cryptographic modules comply with the FIPS standard for the U.S. Federal government.</span></span>
* [<span data-ttu-id="bb285-623">”Systemkryptografi: Använd FIPS-kompatibla algoritmer för kryptering, hashing och signering” inställningar effekterna på säkerheten i Windows XP och senare versioner av Windows</span><span class="sxs-lookup"><span data-stu-id="bb285-623">"System cryptography: Use FIPS compliant algorithms for encryption, hashing, and signing" security settings effects in Windows XP and in later versions of Windows</span></span>](https://support.microsoft.com/kb/811833)

  <span data-ttu-id="bb285-624">Den här artikeln handlar om användning av FIPS-läge i äldre Windows-datorer.</span><span class="sxs-lookup"><span data-stu-id="bb285-624">This article talks about the use of FIPS mode in older Windows computers.</span></span>

---
title: "aaaAzure designguiden för lagring tabellen | Microsoft Docs"
description: Design skalbar och Performant tabeller i Azure-tabellagring
services: storage
documentationcenter: na
author: jasonnewyork
manager: tadb
editor: tysonn
ms.assetid: 8e228b0c-2998-4462-8101-9f16517393ca
ms.service: storage
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: storage
ms.date: 02/28/2017
ms.author: jahogg
ms.openlocfilehash: bbac5e83fe994c1ba1408dd43367fbcfca6a2148
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: sv-SE
ms.lasthandoff: 10/06/2017
---
# <a name="azure-storage-table-design-guide-designing-scalable-and-performant-tables"></a><span data-ttu-id="a9900-103">Designguide för Azure Storage-tabellen: Utforma skalbar och Performant tabeller</span><span class="sxs-lookup"><span data-stu-id="a9900-103">Azure Storage Table Design Guide: Designing Scalable and Performant Tables</span></span>
[!INCLUDE [storage-table-cosmos-db-tip-include](../../includes/storage-table-cosmos-db-tip-include.md)]

<span data-ttu-id="a9900-104">toodesign skalbar och performant tabeller måste du tänka på ett antal faktorer, till exempel prestanda, skalbarhet och kostnader.</span><span class="sxs-lookup"><span data-stu-id="a9900-104">toodesign scalable and performant tables you must consider a number of factors such as performance, scalability, and cost.</span></span> <span data-ttu-id="a9900-105">Om du har tidigare designat scheman för relationsdatabaser, dessa överväganden blir bekant tooyou, men det finns vissa likheter mellan hello Azure Table storage modell och relationella modeller, det finns också flera viktiga skillnader.</span><span class="sxs-lookup"><span data-stu-id="a9900-105">If you have previously designed schemas for relational databases, these considerations will be familiar tooyou, but while there are some similarities between hello Azure Table service storage model and relational models, there are also many important differences.</span></span> <span data-ttu-id="a9900-106">Dessa skillnader leda vanligtvis toovery olika konstruktionerna som kan se bekant med relationsdatabaser toosomeone krånglig eller fel, men som gör bra uppfattning om du designar för en NoSQL nyckel/värde-butiken, till exempel hello Azure Table-tjänsten.</span><span class="sxs-lookup"><span data-stu-id="a9900-106">These differences typically lead toovery different designs that may look counter-intuitive or wrong toosomeone familiar with relational databases, but which do make good sense if you are designing for a NoSQL key/value store such as hello Azure Table service.</span></span> <span data-ttu-id="a9900-107">Många av din design skillnader visar hello faktum att hello tabelltjänsten är utformad toosupport molnskala program som kan innehålla miljarder enheter (rader i en relationsdatabas terminologi) av data eller för datauppsättningar som måste ha stöd för hög transaktionsvolymer: därför du behöver toothink annorlunda om hur du lagrar data och förstå hur hello tabelltjänsten fungerar.</span><span class="sxs-lookup"><span data-stu-id="a9900-107">Many of your design differences will reflect hello fact that hello Table service is designed toosupport cloud-scale applications that can contain billions of entities (rows in relational database terminology) of data or for datasets that must support very high transaction volumes: therefore, you need toothink differently about how you store your data and understand how hello Table service works.</span></span> <span data-ttu-id="a9900-108">En väl utformad NoSQL-databas kan aktivera din lösning tooscale mycket mer (och till en lägre kostnad) än en lösning som använder en relationsdatabas.</span><span class="sxs-lookup"><span data-stu-id="a9900-108">A well designed NoSQL data store can enable your solution tooscale much further (and at a lower cost) than a solution that uses a relational database.</span></span> <span data-ttu-id="a9900-109">Den här guiden hjälper dig med dessa frågor.</span><span class="sxs-lookup"><span data-stu-id="a9900-109">This guide helps you with these topics.</span></span>  

## <a name="about-hello-azure-table-service"></a><span data-ttu-id="a9900-110">Om hello Azure Table-tjänsten</span><span class="sxs-lookup"><span data-stu-id="a9900-110">About hello Azure Table service</span></span>
<span data-ttu-id="a9900-111">Det här avsnittet beskrivs några av hello viktiga funktioner i hello tabelltjänsten som är särskilt relevanta toodesigning för prestanda och skalbarhet.</span><span class="sxs-lookup"><span data-stu-id="a9900-111">This section highlights some of hello key features of hello Table service that are especially relevant toodesigning for performance and scalability.</span></span> <span data-ttu-id="a9900-112">Om du är ny tooAzure lagring och hello tabelltjänsten först läsa [introduktion tooMicrosoft Azure Storage](storage-introduction.md) och [Kom igång med Azure Table Storage med hjälp av .NET](storage-dotnet-how-to-use-tables.md) innan du läser hello resten av det här artikel.</span><span class="sxs-lookup"><span data-stu-id="a9900-112">If you are new tooAzure Storage and hello Table service, first read [Introduction tooMicrosoft Azure Storage](storage-introduction.md) and [Get started with Azure Table Storage using .NET](storage-dotnet-how-to-use-tables.md) before reading hello remainder of this article.</span></span> <span data-ttu-id="a9900-113">Även om hello av den här guiden fokuserar på hello tabelltjänsten, innehåller en beskrivning av hello Azure Queue och Blob-tjänster och hur du kan använda dem tillsammans med hello tabelltjänsten i en lösning.</span><span class="sxs-lookup"><span data-stu-id="a9900-113">Although hello focus of this guide is on hello Table service, it will include some discussion of hello Azure Queue and Blob services, and how you might use them along with hello Table service in a solution.</span></span>  

<span data-ttu-id="a9900-114">Vad är tabelltjänsten hello?</span><span class="sxs-lookup"><span data-stu-id="a9900-114">What is hello Table service?</span></span> <span data-ttu-id="a9900-115">Som du kan förvänta sig från hello namn använder hello tabelltjänsten ett tabellformat toostore data.</span><span class="sxs-lookup"><span data-stu-id="a9900-115">As you might expect from hello name, hello Table service uses a tabular format toostore data.</span></span> <span data-ttu-id="a9900-116">Varje rad i tabellen hello representerar en entitet i hello standard terminologi och hello kolumner store hello olika egenskaper för enheten.</span><span class="sxs-lookup"><span data-stu-id="a9900-116">In hello standard terminology, each row of hello table represents an entity, and hello columns store hello various properties of that entity.</span></span> <span data-ttu-id="a9900-117">Varje entitet har två nycklar toouniquely identifiera den och en tidsstämpelkolumn som hello tabelltjänsten använder tootrack när hello entiteten senast uppdaterades (detta sker automatiskt och du kan inte skriva över hello tidsstämpel manuellt med ett godtyckligt värde).</span><span class="sxs-lookup"><span data-stu-id="a9900-117">Every entity has a pair of keys toouniquely identify it, and a timestamp column that hello Table service uses tootrack when hello entity was last updated (this happens automatically and you cannot manually overwrite hello timestamp with an arbitrary value).</span></span> <span data-ttu-id="a9900-118">Hej tabelltjänsten använder den här last-modified tidsstämpel (LMT) toomanage Optimistisk samtidighet.</span><span class="sxs-lookup"><span data-stu-id="a9900-118">hello Table service uses this last-modified timestamp (LMT) toomanage optimistic concurrency.</span></span>  

> [!NOTE]
> <span data-ttu-id="a9900-119">hello tabell REST API tjänståtgärder också returnera en **ETag** värde som den härleds från hello last-modified tidsstämpel (LMT).</span><span class="sxs-lookup"><span data-stu-id="a9900-119">hello Table service REST API operations also return an **ETag** value that it derives from hello last-modified timestamp (LMT).</span></span> <span data-ttu-id="a9900-120">I det här dokumentet använder vi hello termer ETag och LMT synonymt eftersom de refererar toohello samma underliggande data.</span><span class="sxs-lookup"><span data-stu-id="a9900-120">In this document we will use hello terms ETag and LMT interchangeably because they refer toohello same underlying data.</span></span>  
> 
> 

<span data-ttu-id="a9900-121">hello följande exempel visar en enkel tabell design toostore medarbetare och avdelning entiteter.</span><span class="sxs-lookup"><span data-stu-id="a9900-121">hello following example shows a simple table design toostore employee and department entities.</span></span> <span data-ttu-id="a9900-122">Många av hello exemplen senare i den här handboken är baserade på den här enkla designen.</span><span class="sxs-lookup"><span data-stu-id="a9900-122">Many of hello examples shown later in this guide are based on this simple design.</span></span>  

<table>
<tr>
<th><span data-ttu-id="a9900-123">PartitionKey</span><span class="sxs-lookup"><span data-stu-id="a9900-123">PartitionKey</span></span></th>
<th><span data-ttu-id="a9900-124">RowKey</span><span class="sxs-lookup"><span data-stu-id="a9900-124">RowKey</span></span></th>
<th><span data-ttu-id="a9900-125">tidsstämpel</span><span class="sxs-lookup"><span data-stu-id="a9900-125">Timestamp</span></span></th>
<th></th>
</tr>
<tr>
<td><span data-ttu-id="a9900-126">Marknadsföring</span><span class="sxs-lookup"><span data-stu-id="a9900-126">Marketing</span></span></td>
<td><span data-ttu-id="a9900-127">00001</span><span class="sxs-lookup"><span data-stu-id="a9900-127">00001</span></span></td>
<td><span data-ttu-id="a9900-128">2014-08-22T00:50:32Z</span><span class="sxs-lookup"><span data-stu-id="a9900-128">2014-08-22T00:50:32Z</span></span></td>
<td>
<table>
<tr>
<th><span data-ttu-id="a9900-129">Förnamn</span><span class="sxs-lookup"><span data-stu-id="a9900-129">FirstName</span></span></th>
<th><span data-ttu-id="a9900-130">Efternamn</span><span class="sxs-lookup"><span data-stu-id="a9900-130">LastName</span></span></th>
<th><span data-ttu-id="a9900-131">Ålder</span><span class="sxs-lookup"><span data-stu-id="a9900-131">Age</span></span></th>
<th><span data-ttu-id="a9900-132">E-post</span><span class="sxs-lookup"><span data-stu-id="a9900-132">Email</span></span></th>
</tr>
<tr>
<td><span data-ttu-id="a9900-133">Ta</span><span class="sxs-lookup"><span data-stu-id="a9900-133">Don</span></span></td>
<td><span data-ttu-id="a9900-134">Hall</span><span class="sxs-lookup"><span data-stu-id="a9900-134">Hall</span></span></td>
<td><span data-ttu-id="a9900-135">34</span><span class="sxs-lookup"><span data-stu-id="a9900-135">34</span></span></td>
<td>donh@contoso.com</td>
</tr>
</table>
</tr>
<tr>
<td><span data-ttu-id="a9900-136">Marknadsföring</span><span class="sxs-lookup"><span data-stu-id="a9900-136">Marketing</span></span></td>
<td><span data-ttu-id="a9900-137">00002</span><span class="sxs-lookup"><span data-stu-id="a9900-137">00002</span></span></td>
<td><span data-ttu-id="a9900-138">2014-08-22T00:50:34Z</span><span class="sxs-lookup"><span data-stu-id="a9900-138">2014-08-22T00:50:34Z</span></span></td>
<td>
<table>
<tr>
<th><span data-ttu-id="a9900-139">Förnamn</span><span class="sxs-lookup"><span data-stu-id="a9900-139">FirstName</span></span></th>
<th><span data-ttu-id="a9900-140">Efternamn</span><span class="sxs-lookup"><span data-stu-id="a9900-140">LastName</span></span></th>
<th><span data-ttu-id="a9900-141">Ålder</span><span class="sxs-lookup"><span data-stu-id="a9900-141">Age</span></span></th>
<th><span data-ttu-id="a9900-142">E-post</span><span class="sxs-lookup"><span data-stu-id="a9900-142">Email</span></span></th>
</tr>
<tr>
<td><span data-ttu-id="a9900-143">Jun</span><span class="sxs-lookup"><span data-stu-id="a9900-143">Jun</span></span></td>
<td><span data-ttu-id="a9900-144">CaO</span><span class="sxs-lookup"><span data-stu-id="a9900-144">Cao</span></span></td>
<td><span data-ttu-id="a9900-145">47</span><span class="sxs-lookup"><span data-stu-id="a9900-145">47</span></span></td>
<td>junc@contoso.com</td>
</tr>
</table>
</tr>
<tr>
<td><span data-ttu-id="a9900-146">Marknadsföring</span><span class="sxs-lookup"><span data-stu-id="a9900-146">Marketing</span></span></td>
<td><span data-ttu-id="a9900-147">Avdelning</span><span class="sxs-lookup"><span data-stu-id="a9900-147">Department</span></span></td>
<td><span data-ttu-id="a9900-148">2014-08-22T00:50:30Z</span><span class="sxs-lookup"><span data-stu-id="a9900-148">2014-08-22T00:50:30Z</span></span></td>
<td>
<table>
<tr>
<th><span data-ttu-id="a9900-149">DepartmentName</span><span class="sxs-lookup"><span data-stu-id="a9900-149">DepartmentName</span></span></th>
<th><span data-ttu-id="a9900-150">EmployeeCount</span><span class="sxs-lookup"><span data-stu-id="a9900-150">EmployeeCount</span></span></th>
</tr>
<tr>
<td><span data-ttu-id="a9900-151">Marknadsföring</span><span class="sxs-lookup"><span data-stu-id="a9900-151">Marketing</span></span></td>
<td><span data-ttu-id="a9900-152">153</span><span class="sxs-lookup"><span data-stu-id="a9900-152">153</span></span></td>
</tr>
</table>
</td>
</tr>
<tr>
<td><span data-ttu-id="a9900-153">Försäljning</span><span class="sxs-lookup"><span data-stu-id="a9900-153">Sales</span></span></td>
<td><span data-ttu-id="a9900-154">00010</span><span class="sxs-lookup"><span data-stu-id="a9900-154">00010</span></span></td>
<td><span data-ttu-id="a9900-155">2014-08-22T00:50:44Z</span><span class="sxs-lookup"><span data-stu-id="a9900-155">2014-08-22T00:50:44Z</span></span></td>
<td>
<table>
<tr>
<th><span data-ttu-id="a9900-156">Förnamn</span><span class="sxs-lookup"><span data-stu-id="a9900-156">FirstName</span></span></th>
<th><span data-ttu-id="a9900-157">Efternamn</span><span class="sxs-lookup"><span data-stu-id="a9900-157">LastName</span></span></th>
<th><span data-ttu-id="a9900-158">Ålder</span><span class="sxs-lookup"><span data-stu-id="a9900-158">Age</span></span></th>
<th><span data-ttu-id="a9900-159">E-post</span><span class="sxs-lookup"><span data-stu-id="a9900-159">Email</span></span></th>
</tr>
<tr>
<td><span data-ttu-id="a9900-160">Ken</span><span class="sxs-lookup"><span data-stu-id="a9900-160">Ken</span></span></td>
<td><span data-ttu-id="a9900-161">Kwok</span><span class="sxs-lookup"><span data-stu-id="a9900-161">Kwok</span></span></td>
<td><span data-ttu-id="a9900-162">23</span><span class="sxs-lookup"><span data-stu-id="a9900-162">23</span></span></td>
<td>kenk@contoso.com</td>
</tr>
</table>
</td>
</tr>
</table>


<span data-ttu-id="a9900-163">Hittills har detta ser ut ungefär tooa tabellen i en relationsdatabas med hello viktiga skillnader som hello obligatoriska kolumnerna och hello möjlighet toostore flera entitet typer i hello samma tabell.</span><span class="sxs-lookup"><span data-stu-id="a9900-163">So far, this looks very similar tooa table in a relational database with hello key differences being hello mandatory columns, and hello ability toostore multiple entity types in hello same table.</span></span> <span data-ttu-id="a9900-164">Dessutom kan varje hello användardefinierade egenskaper som **Förnamn** eller **ålder** har en datatyp som heltal eller en sträng, precis som en kolumn i en relationsdatabas.</span><span class="sxs-lookup"><span data-stu-id="a9900-164">In addition, each of hello user-defined properties such as **FirstName** or **Age** has a data type, such as integer or string, just like a column in a relational database.</span></span> <span data-ttu-id="a9900-165">Men till skillnad från i en relationsdatabas hello schemat mindre uppbyggnad hello tabellen service innebär att en egenskap måste ha hello samma datatyp för varje entitet.</span><span class="sxs-lookup"><span data-stu-id="a9900-165">Although unlike in a relational database, hello schema-less nature of hello Table service means that a property need not have hello same data type on each entity.</span></span> <span data-ttu-id="a9900-166">toostore komplexa datatyper i en enskild egenskap, måste du använda ett serialiserat format, till exempel JSON eller XML.</span><span class="sxs-lookup"><span data-stu-id="a9900-166">toostore complex data types in a single property, you must use a serialized format such as JSON or XML.</span></span> <span data-ttu-id="a9900-167">Mer information om datatyper för hello tabellen service som stöds, stöds datumintervall, namngivningsregler och storlek restriktioner finns [hello förstå tabelltjänst-datamodellen](http://msdn.microsoft.com/library/azure/dd179338.aspx).</span><span class="sxs-lookup"><span data-stu-id="a9900-167">For more information about hello table service such as supported data types, supported date ranges, naming rules, and size constraints, see [Understanding hello Table Service Data Model](http://msdn.microsoft.com/library/azure/dd179338.aspx).</span></span>

<span data-ttu-id="a9900-168">Eftersom du kommer att se ditt val av **PartitionKey** och **RowKey** är grundläggande toogood tabelldesign.</span><span class="sxs-lookup"><span data-stu-id="a9900-168">As you will see, your choice of **PartitionKey** and **RowKey** is fundamental toogood table design.</span></span> <span data-ttu-id="a9900-169">Varje entitet som lagras i en tabell måste ha en unik kombination av **PartitionKey** och **RowKey**.</span><span class="sxs-lookup"><span data-stu-id="a9900-169">Every entity stored in a table must have a unique combination of **PartitionKey** and **RowKey**.</span></span> <span data-ttu-id="a9900-170">Precis som med nycklar i en relationsdatabas tabell hello **PartitionKey** och **RowKey** värden är indexerad toocreate ett grupperat index som möjliggör snabb look-ups; dock hello tabelltjänsten skapar inte någon sekundärindex så att de hello endast två indexerade egenskaper (del av hello mönster som beskrivs senare visar hur du kan undvika den här tydligt begränsningen).</span><span class="sxs-lookup"><span data-stu-id="a9900-170">As with keys in a relational database table, hello **PartitionKey** and **RowKey** values are indexed toocreate a clustered index that enables fast look-ups; however, hello Table service does not create any secondary indexes so these are hello only two indexed properties (some of hello patterns described later show how you can work around this apparent limitation).</span></span>  

<span data-ttu-id="a9900-171">En tabell består av en eller flera partitioner och som du kommer att se många hello utforma beslut blir runt att välja en lämplig **PartitionKey** och **RowKey** toooptimize din lösning.</span><span class="sxs-lookup"><span data-stu-id="a9900-171">A table is made up of one or more partitions, and as you will see, many of hello design decisions you make will be around choosing a suitable **PartitionKey** and **RowKey** toooptimize your solution.</span></span> <span data-ttu-id="a9900-172">En lösning kan bestå av bara en enda tabell som innehåller alla entiteter indelade i partitioner, men vanligtvis en lösning har flera tabeller.</span><span class="sxs-lookup"><span data-stu-id="a9900-172">A solution could consist of just a single table that contains all your entities organized into partitions, but typically a solution will have multiple tables.</span></span> <span data-ttu-id="a9900-173">Tabeller hjälper dig toologically ordna dina enheter, hjälper dig att hantera toohello data med hjälp av åtkomstkontrollistor och du kan släppa en hel tabell med hjälp av en enda lagring-åtgärd.</span><span class="sxs-lookup"><span data-stu-id="a9900-173">Tables help you toologically organize your entities, help you manage access toohello data using access control lists, and you can drop an entire table using a single storage operation.</span></span>  

### <a name="table-partitions"></a><span data-ttu-id="a9900-174">Tabellpartitioner</span><span class="sxs-lookup"><span data-stu-id="a9900-174">Table partitions</span></span>
<span data-ttu-id="a9900-175">hello kontonamn, tabellnamnet och **PartitionKey** identifierar tillsammans hello partition inom hello lagringstjänsten där hello tabelltjänsten lagrar hello entitet.</span><span class="sxs-lookup"><span data-stu-id="a9900-175">hello account name, table name and **PartitionKey** together identify hello partition within hello storage service where hello table service stores hello entity.</span></span> <span data-ttu-id="a9900-176">Samt som en del av hello adresseringsschemat för entiteter partitioner för att definiera ett omfång för transaktioner (se [entitet gruppera transaktioner](#entity-group-transactions) nedan), och formuläret hello grunden för hur hello tabelltjänsten skalas.</span><span class="sxs-lookup"><span data-stu-id="a9900-176">As well as being part of hello addressing scheme for entities, partitions define a scope for transactions (see [Entity Group Transactions](#entity-group-transactions) below), and form hello basis of how hello table service scales.</span></span> <span data-ttu-id="a9900-177">Läs mer på partitioner [Azure Storage skalbarhets- och prestandamål](storage-scalability-targets.md).</span><span class="sxs-lookup"><span data-stu-id="a9900-177">For more information on partitions see [Azure Storage Scalability and Performance Targets](storage-scalability-targets.md).</span></span>  

<span data-ttu-id="a9900-178">I hello tabelltjänsten, en enskild nod services en eller flera slutföra partitioner och hello service skalor av dynamiskt nätverksbelastning partitioner mellan noder.</span><span class="sxs-lookup"><span data-stu-id="a9900-178">In hello Table service, an individual node services one or more complete partitions and hello service scales by dynamically load-balancing partitions across nodes.</span></span> <span data-ttu-id="a9900-179">Om en nod under belastning hello tabelltjänsten kan *dela* hello antal partitioner som underhålls av noden på olika noder; när trafik subsides hello-tjänsten kan *merge* hello partition intervall från tyst noder tillbaka till en enda nod.</span><span class="sxs-lookup"><span data-stu-id="a9900-179">If a node is under load, hello table service can *split* hello range of partitions serviced by that node onto different nodes; when traffic subsides, hello service can *merge* hello partition ranges from quiet nodes back onto a single node.</span></span>  

<span data-ttu-id="a9900-180">Mer information om hello interna detaljer om hello tabelltjänst och hur hello tjänsten hanterar partitioner, finns i synnerhet hello papper [Microsoft Azure Storage: A hög Available Cloud Storage Service with Strong Consistency](http://blogs.msdn.com/b/windowsazurestorage/archive/2011/11/20/windows-azure-storage-a-highly-available-cloud-storage-service-with-strong-consistency.aspx).</span><span class="sxs-lookup"><span data-stu-id="a9900-180">For more information about hello internal details of hello Table service, and in particular how hello service manages partitions, see hello paper [Microsoft Azure Storage: A Highly Available Cloud Storage Service with Strong Consistency](http://blogs.msdn.com/b/windowsazurestorage/archive/2011/11/20/windows-azure-storage-a-highly-available-cloud-storage-service-with-strong-consistency.aspx).</span></span>  

### <a name="entity-group-transactions"></a><span data-ttu-id="a9900-181">Entiteten gruppera transaktioner</span><span class="sxs-lookup"><span data-stu-id="a9900-181">Entity Group Transactions</span></span>
<span data-ttu-id="a9900-182">Entiteten gruppera transaktioner (EGTs) finns i hello tabelltjänsten hello inbyggda mekanism för att utföra atomiska uppdateringar över flera enheter.</span><span class="sxs-lookup"><span data-stu-id="a9900-182">In hello Table service, Entity Group Transactions (EGTs) are hello only built-in mechanism for performing atomic updates across multiple entities.</span></span> <span data-ttu-id="a9900-183">EGTs är också enligt tooas *batch transaktioner* i viss dokumentation.</span><span class="sxs-lookup"><span data-stu-id="a9900-183">EGTs are also referred tooas *batch transactions* in some documentation.</span></span> <span data-ttu-id="a9900-184">EGTs fungerar bara med entiteter som lagras i hello samma partition (resursen hello samma partitionsnyckel i en given tabell), vilja ha atomiska transaktionella beteende över flera enheter måste du tooensure som dessa enheter finns i hello samma partition.</span><span class="sxs-lookup"><span data-stu-id="a9900-184">EGTs can only operate on entities stored in hello same partition (share hello same partition key in a given table), so anytime you need atomic transactional behavior across multiple entities you need tooensure that those entities are in hello same partition.</span></span> <span data-ttu-id="a9900-185">Det här är ofta en orsak till att ha flera enhetstyper i hello samma tabell (och partition) och inte använder flera tabeller för olika enhetstyper.</span><span class="sxs-lookup"><span data-stu-id="a9900-185">This is often a reason for keeping multiple entity types in hello same table (and partition) and not using multiple tables for different entity types.</span></span> <span data-ttu-id="a9900-186">En enda EGT kan tillämpas på högst 100 entiteter.</span><span class="sxs-lookup"><span data-stu-id="a9900-186">A single EGT can operate on at most 100 entities.</span></span>  <span data-ttu-id="a9900-187">Om du skickar flera samtidiga EGTs för bearbetning av det är viktigt tooensure fungerar inte dessa EGTs på enheter som är gemensamma mellan EGTs som annars bearbetning kan vara fördröjd.</span><span class="sxs-lookup"><span data-stu-id="a9900-187">If you submit multiple concurrent EGTs for processing it is important tooensure  those EGTs do not operate on entities that are common across EGTs as otherwise processing can be delayed.</span></span>

<span data-ttu-id="a9900-188">EGTs också introducera en potentiell kompromiss för tooevaluate i din design: använda fler partitioner ökar hello skalbarhet eftersom Azure har flera möjligheter för belastningsutjämning begäranden mellan noder, men detta kan begränsa hello möjligheten för dina program tooperform atomiska transaktioner och underhålla stark konsekvens för dina data.</span><span class="sxs-lookup"><span data-stu-id="a9900-188">EGTs also introduce a potential trade-off for you tooevaluate in your design: using more partitions will increase hello scalability of your application because Azure has more opportunities for load balancing requests across nodes, but this might limit hello ability of your application tooperform atomic transactions and maintain strong consistency for your data.</span></span> <span data-ttu-id="a9900-189">Det finns också skalbarhetsmål för specifika på hello nivå för en partition som kan begränsa hello genomströmning av transaktioner som du kan förvänta dig för en enskild nod: Mer information om hello skalbarhetsmål för Azure storage-konton och hello tabell tjänsten, se [Azure Storage skalbarhets- och prestandamål](storage-scalability-targets.md).</span><span class="sxs-lookup"><span data-stu-id="a9900-189">Furthermore, there are specific scalability targets at hello level of a partition that might limit hello throughput of transactions you can expect for a single node: for more information about hello scalability targets for Azure storage accounts and hello table service, see [Azure Storage Scalability and Performance Targets](storage-scalability-targets.md).</span></span> <span data-ttu-id="a9900-190">Senare avsnitt i den här handboken beskrivs olika design strategier som kan hjälpa dig att hantera avvägningarna, till exempel den här och diskutera hur du bäst toochoose din partitionsnyckel baserat på hello särskilda krav på ditt klientprogram.</span><span class="sxs-lookup"><span data-stu-id="a9900-190">Later sections of this guide discuss various design strategies that help you manage trade-offs such as this one, and discuss how best toochoose your partition key based on hello specific requirements of your client application.</span></span>  

### <a name="capacity-considerations"></a><span data-ttu-id="a9900-191">Överväganden för kapacitetsplanering</span><span class="sxs-lookup"><span data-stu-id="a9900-191">Capacity considerations</span></span>
<span data-ttu-id="a9900-192">hello innehåller följande tabell några av hello nyckelvärden toobe medveten om när du designar en lösning för tabell:</span><span class="sxs-lookup"><span data-stu-id="a9900-192">hello following table includes some of hello key values toobe aware of when you are designing a Table service solution:</span></span>  

| <span data-ttu-id="a9900-193">Total kapacitet för ett Azure storage-konto</span><span class="sxs-lookup"><span data-stu-id="a9900-193">Total capacity of an Azure storage account</span></span> | <span data-ttu-id="a9900-194">500 TB</span><span class="sxs-lookup"><span data-stu-id="a9900-194">500 TB</span></span> |
| --- | --- |
| <span data-ttu-id="a9900-195">Antalet tabeller i ett Azure storage-konto</span><span class="sxs-lookup"><span data-stu-id="a9900-195">Number of tables in an Azure storage account</span></span> |<span data-ttu-id="a9900-196">Begränsas bara av hello kapacitet hello storage-konto</span><span class="sxs-lookup"><span data-stu-id="a9900-196">Limited only by hello capacity of hello storage account</span></span> |
| <span data-ttu-id="a9900-197">Antalet partitioner i en tabell</span><span class="sxs-lookup"><span data-stu-id="a9900-197">Number of partitions in a table</span></span> |<span data-ttu-id="a9900-198">Begränsas bara av hello kapacitet hello storage-konto</span><span class="sxs-lookup"><span data-stu-id="a9900-198">Limited only by hello capacity of hello storage account</span></span> |
| <span data-ttu-id="a9900-199">Antal entiteter i en partition</span><span class="sxs-lookup"><span data-stu-id="a9900-199">Number of entities in a partition</span></span> |<span data-ttu-id="a9900-200">Begränsas bara av hello kapacitet hello storage-konto</span><span class="sxs-lookup"><span data-stu-id="a9900-200">Limited only by hello capacity of hello storage account</span></span> |
| <span data-ttu-id="a9900-201">Storleken på en enskild entitet</span><span class="sxs-lookup"><span data-stu-id="a9900-201">Size of an individual entity</span></span> |<span data-ttu-id="a9900-202">Upp too1 MB med högst 255 egenskaper (inklusive hello **PartitionKey**, **RowKey**, och **tidsstämpel**)</span><span class="sxs-lookup"><span data-stu-id="a9900-202">Up too1 MB with a maximum of 255 properties (including hello **PartitionKey**, **RowKey**, and **Timestamp**)</span></span> |
| <span data-ttu-id="a9900-203">Storleken på hello **PartitionKey**</span><span class="sxs-lookup"><span data-stu-id="a9900-203">Size of hello **PartitionKey**</span></span> |<span data-ttu-id="a9900-204">En sträng in storlek too1 KB</span><span class="sxs-lookup"><span data-stu-id="a9900-204">A string up too1 KB in size</span></span> |
| <span data-ttu-id="a9900-205">Storleken på hello **RowKey**</span><span class="sxs-lookup"><span data-stu-id="a9900-205">Size of hello **RowKey**</span></span> |<span data-ttu-id="a9900-206">En sträng in storlek too1 KB</span><span class="sxs-lookup"><span data-stu-id="a9900-206">A string up too1 KB in size</span></span> |
| <span data-ttu-id="a9900-207">Storleken på en entitet grupp-transaktion</span><span class="sxs-lookup"><span data-stu-id="a9900-207">Size of an Entity Group Transaction</span></span> |<span data-ttu-id="a9900-208">En transaktion får innehålla högst 100 entiteter och hello nyttolasten måste vara mindre än 4 MB i storlek.</span><span class="sxs-lookup"><span data-stu-id="a9900-208">A transaction can include at most 100 entities and hello payload must be less than 4 MB in size.</span></span> <span data-ttu-id="a9900-209">En entitet kan bara uppdatera en gång i en EGT.</span><span class="sxs-lookup"><span data-stu-id="a9900-209">An EGT can only update an entity once.</span></span> |

<span data-ttu-id="a9900-210">Mer information finns i [hello förstå tabelltjänst-datamodellen](http://msdn.microsoft.com/library/azure/dd179338.aspx).</span><span class="sxs-lookup"><span data-stu-id="a9900-210">For more information, see [Understanding hello Table Service Data Model](http://msdn.microsoft.com/library/azure/dd179338.aspx).</span></span>  

### <a name="cost-considerations"></a><span data-ttu-id="a9900-211">Kostnad överväganden</span><span class="sxs-lookup"><span data-stu-id="a9900-211">Cost considerations</span></span>
<span data-ttu-id="a9900-212">Table storage är relativt billig, men du bör innehålla kostnaderna för båda kapacitet användnings- och hello antal transaktioner som en del av din utvärderingsversion av någon lösning som använder hello tabelltjänsten.</span><span class="sxs-lookup"><span data-stu-id="a9900-212">Table storage is relatively inexpensive, but you should include cost estimates for both capacity usage and hello quantity of transactions as part of your evaluation of any solution that uses hello Table service.</span></span> <span data-ttu-id="a9900-213">I många scenarier för att lagra data för Avnormaliserade eller dubbletter i ordning tooimprove hello är prestanda och skalbarhet för din lösning dock en giltig metod tootake.</span><span class="sxs-lookup"><span data-stu-id="a9900-213">However, in many scenarios storing denormalized or duplicate data in order tooimprove hello performance or scalability of your solution is a valid approach tootake.</span></span> <span data-ttu-id="a9900-214">Mer information om priser finns [priser för Azure Storage](https://azure.microsoft.com/pricing/details/storage/).</span><span class="sxs-lookup"><span data-stu-id="a9900-214">For more information about pricing, see [Azure Storage Pricing](https://azure.microsoft.com/pricing/details/storage/).</span></span>  

## <a name="guidelines-for-table-design"></a><span data-ttu-id="a9900-215">Riktlinjer för tabelldesign</span><span class="sxs-lookup"><span data-stu-id="a9900-215">Guidelines for table design</span></span>
<span data-ttu-id="a9900-216">Listorna sammanfattas några av hello viktiga riktlinjer som du bör tänka på när du utformar dina tabeller och den här guiden att behandla dem i detalj senare i.</span><span class="sxs-lookup"><span data-stu-id="a9900-216">These lists summarize some of hello key guidelines you should keep in mind when you are designing your tables, and this guide will address them all in more detail later in.</span></span> <span data-ttu-id="a9900-217">Dessa riktlinjer är bland annat hello riktlinjer som du vanligtvis utför för relationsdatabas design.</span><span class="sxs-lookup"><span data-stu-id="a9900-217">These guidelines are very different from hello guidelines you would typically follow for relational database design.</span></span>  

<span data-ttu-id="a9900-218">Designa din tabell service lösning toobe *läsa* effektivt:</span><span class="sxs-lookup"><span data-stu-id="a9900-218">Designing your Table service solution toobe *read* efficient:</span></span>

* <span data-ttu-id="a9900-219">***Design för frågor i Läs-aktiverat program.***</span><span class="sxs-lookup"><span data-stu-id="a9900-219">***Design for querying in read-heavy applications.***</span></span> <span data-ttu-id="a9900-220">När du utformar dina tabeller tänka hello-frågor (särskilt hello svarstid känsliga de) som du ska köra innan du tycker om hur du ska uppdatera-enheterna.</span><span class="sxs-lookup"><span data-stu-id="a9900-220">When you are designing your tables, think about hello queries (especially hello latency sensitive ones) that you will execute before you think about how you will update your entities.</span></span> <span data-ttu-id="a9900-221">Detta ger vanligtvis en effektiv och performant lösning.</span><span class="sxs-lookup"><span data-stu-id="a9900-221">This typically results in an efficient and performant solution.</span></span>  
* <span data-ttu-id="a9900-222">***Ange både PartitionKey och RowKey i dina frågor.***</span><span class="sxs-lookup"><span data-stu-id="a9900-222">***Specify both PartitionKey and RowKey in your queries.***</span></span> <span data-ttu-id="a9900-223">*Peka frågor* som dessa är hello effektivaste tabellen service frågor.</span><span class="sxs-lookup"><span data-stu-id="a9900-223">*Point queries* such as these are hello most efficient table service queries.</span></span>  
* <span data-ttu-id="a9900-224">***Överväg att lagra dubbletter av enheter.***</span><span class="sxs-lookup"><span data-stu-id="a9900-224">***Consider storing duplicate copies of entities.***</span></span> <span data-ttu-id="a9900-225">Table storage är billiga så Överväg lagra hello samma entitet flera gånger (med olika nycklar) tooenable effektivare frågor.</span><span class="sxs-lookup"><span data-stu-id="a9900-225">Table storage is cheap so consider storing hello same entity multiple times (with different keys) tooenable more efficient queries.</span></span>  
* <span data-ttu-id="a9900-226">***Överväg att denormalizing dina data.***</span><span class="sxs-lookup"><span data-stu-id="a9900-226">***Consider denormalizing your data.***</span></span> <span data-ttu-id="a9900-227">Table storage är billiga så Överväg denormalizing dina data.</span><span class="sxs-lookup"><span data-stu-id="a9900-227">Table storage is cheap so consider denormalizing your data.</span></span> <span data-ttu-id="a9900-228">Lagra exempelvis sammanfattning enheter så att frågor för att samla in data behöver bara tooaccess en enda entitet.</span><span class="sxs-lookup"><span data-stu-id="a9900-228">For example, store summary entities so that queries for aggregate data only need tooaccess a single entity.</span></span>  
* <span data-ttu-id="a9900-229">***Använd sammansatt nyckelvärden.***</span><span class="sxs-lookup"><span data-stu-id="a9900-229">***Use compound key values.***</span></span> <span data-ttu-id="a9900-230">hello endast nycklar som du har är **PartitionKey** och **RowKey**.</span><span class="sxs-lookup"><span data-stu-id="a9900-230">hello only keys you have are **PartitionKey** and **RowKey**.</span></span> <span data-ttu-id="a9900-231">Till exempel använda sammansatta nyckelvärden tooenable alternativ nycklad åtkomst sökvägar tooentities.</span><span class="sxs-lookup"><span data-stu-id="a9900-231">For example, use compound key values tooenable alternate keyed access paths tooentities.</span></span>  
* <span data-ttu-id="a9900-232">***Använd fråga projektion.***</span><span class="sxs-lookup"><span data-stu-id="a9900-232">***Use query projection.***</span></span> <span data-ttu-id="a9900-233">Du kan minska hello mängden data som du överför hello nätverket med hjälp av frågor som väljer bara hello fält som du behöver.</span><span class="sxs-lookup"><span data-stu-id="a9900-233">You can reduce hello amount of data that you transfer over hello network by using queries that select just hello fields you need.</span></span>  

<span data-ttu-id="a9900-234">Designa din tabell service lösning toobe *skriva* effektivt:</span><span class="sxs-lookup"><span data-stu-id="a9900-234">Designing your Table service solution toobe *write* efficient:</span></span>  

* <span data-ttu-id="a9900-235">***Skapa inte varm partitioner.***</span><span class="sxs-lookup"><span data-stu-id="a9900-235">***Do not create hot partitions.***</span></span> <span data-ttu-id="a9900-236">Välj tangenter som gör att du toospread dina begäranden mellan flera partitioner vid någon tidpunkt.</span><span class="sxs-lookup"><span data-stu-id="a9900-236">Choose keys that enable you toospread your requests across multiple partitions at any point of time.</span></span>  
* <span data-ttu-id="a9900-237">***Undvika toppar i trafiken.***</span><span class="sxs-lookup"><span data-stu-id="a9900-237">***Avoid spikes in traffic.***</span></span> <span data-ttu-id="a9900-238">Utjämna hello trafik under en rimlig tid och undvika toppar i trafiken.</span><span class="sxs-lookup"><span data-stu-id="a9900-238">Smooth hello traffic over a reasonable period of time and avoid spikes in traffic.</span></span>
* <span data-ttu-id="a9900-239">***Inte nödvändigtvis att skapa en separat tabell för varje typ av enhet.***</span><span class="sxs-lookup"><span data-stu-id="a9900-239">***Don't necessarily create a separate table for each type of entity.***</span></span> <span data-ttu-id="a9900-240">När du behöver atomiska transaktioner över typer av enheter du kan lagra dessa flera typer av enheter i samma partition i hello hello samma tabell.</span><span class="sxs-lookup"><span data-stu-id="a9900-240">When you require atomic transactions across entity types, you can store these multiple entity types in hello same partition in hello same table.</span></span>
* <span data-ttu-id="a9900-241">***Överväg att hello maximalt dataflöde du måste uppnå.***</span><span class="sxs-lookup"><span data-stu-id="a9900-241">***Consider hello maximum throughput you must achieve.***</span></span> <span data-ttu-id="a9900-242">Du måste vara medveten om hello skalbarhetsmål för hello tabelltjänsten och se till att designen inte ska orsaka du tooexceed dem.</span><span class="sxs-lookup"><span data-stu-id="a9900-242">You must be aware of hello scalability targets for hello Table service and ensure that your design will not cause you tooexceed them.</span></span>  

<span data-ttu-id="a9900-243">När du läser handboken visas exempel placera alla dessa principer i praktiken.</span><span class="sxs-lookup"><span data-stu-id="a9900-243">As you read this guide, you will see examples that put all of these principles into practice.</span></span>  

## <a name="design-for-querying"></a><span data-ttu-id="a9900-244">Design för frågor</span><span class="sxs-lookup"><span data-stu-id="a9900-244">Design for querying</span></span>
<span data-ttu-id="a9900-245">Tabell tjänstelösningar får läsas intensiva, Skriv intensiva eller en blandning av hello två.</span><span class="sxs-lookup"><span data-stu-id="a9900-245">Table service solutions may be read intensive, write intensive, or a mix of hello two.</span></span> <span data-ttu-id="a9900-246">Det här avsnittet fokuserar på hello saker toobear i åtanke när du utformar din tabell service toosupport läsåtgärder effektivt.</span><span class="sxs-lookup"><span data-stu-id="a9900-246">This section focuses on hello things toobear in mind when you are designing your Table service toosupport read operations efficiently.</span></span> <span data-ttu-id="a9900-247">Vanligtvis är en design som stöder läsåtgärder effektivt också effektivt för skrivåtgärder.</span><span class="sxs-lookup"><span data-stu-id="a9900-247">Typically, a design that supports read operations efficiently is also efficient for write operations.</span></span> <span data-ttu-id="a9900-248">Men det finns ytterligare överväganden toobear i åtanke när designa toosupport skrivåtgärder, beskrivs i nästa avsnitt hello [Design för dataändring](#design-for-data-modification).</span><span class="sxs-lookup"><span data-stu-id="a9900-248">However, there are additional considerations toobear in mind when designing toosupport write operations, discussed in hello next section, [Design for data modification](#design-for-data-modification).</span></span>

<span data-ttu-id="a9900-249">En bra utgångspunkt för att utforma din tabell service lösning tooenable tooread data effektivt är tooask ”vilka frågor kommer Mina program behöver tooexecute tooretrieve hello data måste från hello tabelltjänsten”?</span><span class="sxs-lookup"><span data-stu-id="a9900-249">A good starting point for designing your Table service solution tooenable you tooread data efficiently is tooask "What queries will my application need tooexecute tooretrieve hello data it needs from hello Table service?"</span></span>  

> [!NOTE]
> <span data-ttu-id="a9900-250">Hello tabelltjänsten, är det viktigt tooget hello design rätt direkt eftersom det är svåra och dyra toochange senare.</span><span class="sxs-lookup"><span data-stu-id="a9900-250">With hello Table service, it's important tooget hello design correct up front because it's difficult and expensive toochange it later.</span></span> <span data-ttu-id="a9900-251">Till exempel indexerar möjliga tooaddress prestandaproblem genom att lägga till i en relationsdatabas är det ofta tooan befintlig databas: Detta är inte ett alternativ med hello tabelltjänsten.</span><span class="sxs-lookup"><span data-stu-id="a9900-251">For example, in a relational database it's often possible tooaddress performance issues simply by adding indexes tooan existing database: this is not an option with hello Table service.</span></span>  
> 
> 

<span data-ttu-id="a9900-252">Det här avsnittet fokuserar på hello viktiga problem som du måste ta när du designar tabeller för frågor.</span><span class="sxs-lookup"><span data-stu-id="a9900-252">This section focuses on hello key issues you must address when you design your tables for querying.</span></span> <span data-ttu-id="a9900-253">hello behandlar i det här avsnittet:</span><span class="sxs-lookup"><span data-stu-id="a9900-253">hello topics covered in this section include:</span></span>

* [<span data-ttu-id="a9900-254">Hur du väljer PartitionKey och RowKey påverkar prestanda för frågor</span><span class="sxs-lookup"><span data-stu-id="a9900-254">How your choice of PartitionKey and RowKey impacts query performance</span></span>](#how-your-choice-of-partitionkey-and-rowkey-impacts-query-performance)
* [<span data-ttu-id="a9900-255">Att välja en lämplig PartitionKey</span><span class="sxs-lookup"><span data-stu-id="a9900-255">Choosing an appropriate PartitionKey</span></span>](#choosing-an-appropriate-partitionkey)
* [<span data-ttu-id="a9900-256">Optimera frågor för hello tabelltjänst</span><span class="sxs-lookup"><span data-stu-id="a9900-256">Optimizing queries for hello Table service</span></span>](#optimizing-queries-for-the-table-service)
* [<span data-ttu-id="a9900-257">Sortera data i hello tabelltjänst</span><span class="sxs-lookup"><span data-stu-id="a9900-257">Sorting data in hello Table service</span></span>](#sorting-data-in-the-table-service)

### <a name="how-your-choice-of-partitionkey-and-rowkey-impacts-query-performance"></a><span data-ttu-id="a9900-258">Hur du väljer PartitionKey och RowKey påverkar prestanda för frågor</span><span class="sxs-lookup"><span data-stu-id="a9900-258">How your choice of PartitionKey and RowKey impacts query performance</span></span>
<span data-ttu-id="a9900-259">hello följande exempel förutsätter hello tabelltjänsten lagrar medarbetare entiteter med följande struktur hello (de flesta av hello exempel utelämna hello **tidsstämpel** egenskapen för tydlighetens skull):</span><span class="sxs-lookup"><span data-stu-id="a9900-259">hello following examples assume hello table service is storing employee entities with hello following structure (most of hello examples omit hello **Timestamp** property for clarity):</span></span>  

| <span data-ttu-id="a9900-260">*Kolumnnamn*</span><span class="sxs-lookup"><span data-stu-id="a9900-260">*Column name*</span></span> | <span data-ttu-id="a9900-261">*Datatyp*</span><span class="sxs-lookup"><span data-stu-id="a9900-261">*Data type*</span></span> |
| --- | --- |
| <span data-ttu-id="a9900-262">**PartitionKey** (avdelningsnamn)</span><span class="sxs-lookup"><span data-stu-id="a9900-262">**PartitionKey** (Department Name)</span></span> |<span data-ttu-id="a9900-263">Sträng</span><span class="sxs-lookup"><span data-stu-id="a9900-263">String</span></span> |
| <span data-ttu-id="a9900-264">**RowKey** (anställnings-Id)</span><span class="sxs-lookup"><span data-stu-id="a9900-264">**RowKey** (Employee Id)</span></span> |<span data-ttu-id="a9900-265">Sträng</span><span class="sxs-lookup"><span data-stu-id="a9900-265">String</span></span> |
| <span data-ttu-id="a9900-266">**Förnamn**</span><span class="sxs-lookup"><span data-stu-id="a9900-266">**FirstName**</span></span> |<span data-ttu-id="a9900-267">Sträng</span><span class="sxs-lookup"><span data-stu-id="a9900-267">String</span></span> |
| <span data-ttu-id="a9900-268">**Efternamn**</span><span class="sxs-lookup"><span data-stu-id="a9900-268">**LastName**</span></span> |<span data-ttu-id="a9900-269">Sträng</span><span class="sxs-lookup"><span data-stu-id="a9900-269">String</span></span> |
| <span data-ttu-id="a9900-270">**Ålder**</span><span class="sxs-lookup"><span data-stu-id="a9900-270">**Age**</span></span> |<span data-ttu-id="a9900-271">Integer</span><span class="sxs-lookup"><span data-stu-id="a9900-271">Integer</span></span> |
| <span data-ttu-id="a9900-272">**E-postadress**</span><span class="sxs-lookup"><span data-stu-id="a9900-272">**EmailAddress**</span></span> |<span data-ttu-id="a9900-273">Sträng</span><span class="sxs-lookup"><span data-stu-id="a9900-273">String</span></span> |

<span data-ttu-id="a9900-274">Hej tidigare avsnittet [översikt över Azure Table](#overview) beskrivs några av hello viktiga funktioner i hello Azure Table-tjänsten som har en direkt inverkan på utformning för frågan.</span><span class="sxs-lookup"><span data-stu-id="a9900-274">hello earlier section [Azure Table service overview](#overview) describes some of hello key features of hello Azure Table service that have a direct influence on designing for query.</span></span> <span data-ttu-id="a9900-275">Dessa resultera i hello följande allmänna riktlinjer för att utforma tabellen service frågor.</span><span class="sxs-lookup"><span data-stu-id="a9900-275">These result in hello following general guidelines for designing Table service queries.</span></span> <span data-ttu-id="a9900-276">Observera att hello filtersyntaxen används i hello exemplen nedan är från hello tabelltjänsten REST API för mer information finns i [fråga entiteter](http://msdn.microsoft.com/library/azure/dd179421.aspx).</span><span class="sxs-lookup"><span data-stu-id="a9900-276">Note that hello filter syntax used in hello examples below is from hello Table service REST API, for more information see [Query Entities](http://msdn.microsoft.com/library/azure/dd179421.aspx).</span></span>  

* <span data-ttu-id="a9900-277">En ***punkt frågan*** är hello effektivaste sökning toouse och rekommenderas toobe som används för omfattande sökningar eller sökningar som kräver lägsta svarstid.</span><span class="sxs-lookup"><span data-stu-id="a9900-277">A ***Point Query*** is hello most efficient lookup toouse and is recommended toobe used for high-volume lookups or lookups requiring lowest latency.</span></span> <span data-ttu-id="a9900-278">Sådan fråga kan använda hello index toolocate en enskild entitet mycket effektivt genom att ange både hello **PartitionKey** och **RowKey** värden.</span><span class="sxs-lookup"><span data-stu-id="a9900-278">Such a query can use hello indexes toolocate an individual entity very efficiently by specifying both hello **PartitionKey** and **RowKey** values.</span></span> <span data-ttu-id="a9900-279">Till exempel: $filter = (PartitionKey eq 'Sales') och (RowKey eq '2')</span><span class="sxs-lookup"><span data-stu-id="a9900-279">For example: $filter=(PartitionKey eq 'Sales') and (RowKey eq '2')</span></span>  
* <span data-ttu-id="a9900-280">Andra bäst är en ***intervallet frågan*** som använder hello **PartitionKey** och filter på en mängd **RowKey** värden tooreturn mer än en entitet.</span><span class="sxs-lookup"><span data-stu-id="a9900-280">Second best is a ***Range Query*** that uses hello **PartitionKey** and filters on a range of **RowKey** values tooreturn more than one entity.</span></span> <span data-ttu-id="a9900-281">Hej **PartitionKey** värdet identifierar en specifik partition och hello **RowKey** identifierar en delmängd av hello entiteter i partitionen.</span><span class="sxs-lookup"><span data-stu-id="a9900-281">hello **PartitionKey** value identifies a specific partition, and hello **RowKey** values identify a subset of hello entities in that partition.</span></span> <span data-ttu-id="a9900-282">Till exempel: $filter = PartitionKey eq 'Försäljning och RowKey ge' och RowKey lt t '</span><span class="sxs-lookup"><span data-stu-id="a9900-282">For example: $filter=PartitionKey eq 'Sales' and RowKey ge 'S' and RowKey lt 'T'</span></span>  
* <span data-ttu-id="a9900-283">Tredje bästa är en ***Partition skanna*** som använder hello **PartitionKey** och filter på en annan icke-nyckelegenskapen och som kan returnera flera enheter.</span><span class="sxs-lookup"><span data-stu-id="a9900-283">Third best is a ***Partition Scan*** that uses hello **PartitionKey** and filters on another non-key property and that may return more than one entity.</span></span> <span data-ttu-id="a9900-284">Hej **PartitionKey** värdet identifierar en specifik partition och hello egenskapen värden väljer för en delmängd av hello entiteter i partitionen.</span><span class="sxs-lookup"><span data-stu-id="a9900-284">hello **PartitionKey** value identifies a specific partition, and hello property values select for a subset of hello entities in that partition.</span></span> <span data-ttu-id="a9900-285">Till exempel: $filter = PartitionKey eq 'Försäljning' och efternamn eq ”Smith”</span><span class="sxs-lookup"><span data-stu-id="a9900-285">For example: $filter=PartitionKey eq 'Sales' and LastName eq 'Smith'</span></span>  
* <span data-ttu-id="a9900-286">En ***tabell skanna*** inkluderar inte hello **PartitionKey** och är mycket ineffektiv eftersom den söker igenom alla hello partitioner som utgör din tabell i sin tur för alla matchande entiteter.</span><span class="sxs-lookup"><span data-stu-id="a9900-286">A ***Table Scan*** does not include hello **PartitionKey** and is very inefficient because it searches all of hello partitions that make up your table in turn for any matching entities.</span></span> <span data-ttu-id="a9900-287">Utför en tabellgenomsökning oavsett om huruvida filtret använder hello **RowKey**.</span><span class="sxs-lookup"><span data-stu-id="a9900-287">It will perform a table scan regardless of whether or not your filter uses hello **RowKey**.</span></span> <span data-ttu-id="a9900-288">Till exempel: $filter = efternamn eq 'Karlsson'</span><span class="sxs-lookup"><span data-stu-id="a9900-288">For example: $filter=LastName eq 'Jones'</span></span>  
* <span data-ttu-id="a9900-289">Frågor som returnerar flera entiteter tillbaka dem i **PartitionKey** och **RowKey** ordning.</span><span class="sxs-lookup"><span data-stu-id="a9900-289">Queries that return multiple entities return them sorted in **PartitionKey** and **RowKey** order.</span></span> <span data-ttu-id="a9900-290">tooavoid sortera hello enheterna hello-klienten väljer en **RowKey** som definierar hello vanligaste sorteringsordning.</span><span class="sxs-lookup"><span data-stu-id="a9900-290">tooavoid resorting hello entities in hello client, choose a **RowKey** that defines hello most common sort order.</span></span>  

<span data-ttu-id="a9900-291">Observera att använda en ”**eller**” toospecify ett filter baserat på **RowKey** värden resulterar i en partition genomsökning och inte behandlas som en fråga för intervallet.</span><span class="sxs-lookup"><span data-stu-id="a9900-291">Note that using an "**or**" toospecify a filter based on **RowKey** values results in a partition scan and is not treated as a range query.</span></span> <span data-ttu-id="a9900-292">Därför bör du undvika frågor som använder filter exempelvis: $filter = PartitionKey eq 'Sales' och (RowKey eq '121' eller RowKey eq '322')</span><span class="sxs-lookup"><span data-stu-id="a9900-292">Therefore, you should avoid queries that use filters such as: $filter=PartitionKey eq 'Sales' and (RowKey eq '121' or RowKey eq '322')</span></span>  

<span data-ttu-id="a9900-293">Exempel på klientsidan kod som använder hello Storage-klientbibliotek tooexecute effektiva frågor finns:</span><span class="sxs-lookup"><span data-stu-id="a9900-293">For examples of client-side code that use hello Storage Client Library tooexecute efficient queries, see:</span></span>  

* [<span data-ttu-id="a9900-294">Köra en punkt-fråga med hello Storage-klientbibliotek</span><span class="sxs-lookup"><span data-stu-id="a9900-294">Executing a point query using hello Storage Client Library</span></span>](#executing-a-point-query-using-the-storage-client-library)
* [<span data-ttu-id="a9900-295">Hämtning av flera enheter med hjälp av LINQ</span><span class="sxs-lookup"><span data-stu-id="a9900-295">Retrieving multiple entities using LINQ</span></span>](#retrieving-multiple-entities-using-linq)
* [<span data-ttu-id="a9900-296">Projektion av serversidan</span><span class="sxs-lookup"><span data-stu-id="a9900-296">Server-side projection</span></span>](#server-side-projection)  

<span data-ttu-id="a9900-297">Exempel på klientsidan kod som kan hantera flera entitet typer lagras i hello samma tabell, se:</span><span class="sxs-lookup"><span data-stu-id="a9900-297">For examples of client-side code that can handle multiple entity types stored in hello same table, see:</span></span>  

* [<span data-ttu-id="a9900-298">Arbeta med heterogena entitetstyper</span><span class="sxs-lookup"><span data-stu-id="a9900-298">Working with heterogeneous entity types</span></span>](#working-with-heterogeneous-entity-types)  

### <a name="choosing-an-appropriate-partitionkey"></a><span data-ttu-id="a9900-299">Att välja en lämplig PartitionKey</span><span class="sxs-lookup"><span data-stu-id="a9900-299">Choosing an appropriate PartitionKey</span></span>
<span data-ttu-id="a9900-300">Ditt val av **PartitionKey** ska utjämna hello måste tooenables hello användning av EGTs (tooensure konsekvenskontroll) mot hello krav toodistribute entiteterna mot flera partitioner (tooensure en skalbar lösning).</span><span class="sxs-lookup"><span data-stu-id="a9900-300">Your choice of **PartitionKey** should balance hello need tooenables hello use of EGTs (tooensure consistency) against hello requirement toodistribute your entities across multiple partitions (tooensure a scalable solution).</span></span>  

<span data-ttu-id="a9900-301">Vid en extreme kan du lagra alla entiteter i en enda partition, men detta kan begränsa hello skalbarhet för din lösning och hello tabelltjänsten skulle förhindra att kan tooload-begäranden.</span><span class="sxs-lookup"><span data-stu-id="a9900-301">At one extreme, you could store all your entities in a single partition, but this may limit hello scalability of your solution and would prevent hello table service from being able tooload-balance requests.</span></span> <span data-ttu-id="a9900-302">Vid hello andra extreme kan du lagra en entitet per partition, vilket är mycket skalbart och som kan hello tabell tjänstbegäranden tooload saldo, men som skulle kunna hindra att du använder enheten grupptransaktioner.</span><span class="sxs-lookup"><span data-stu-id="a9900-302">At hello other extreme, you could store one entity per partition, which would be highly scalable and which enables hello table service tooload-balance requests, but which would prevent you from using entity group transactions.</span></span>  

<span data-ttu-id="a9900-303">Perfekt **PartitionKey** är en som du kan använda toouse effektiva frågor och som har tillräcklig partitioner tooensure din lösning är skalbart.</span><span class="sxs-lookup"><span data-stu-id="a9900-303">An ideal **PartitionKey** is one that enables you toouse efficient queries and that has sufficient partitions tooensure your solution is scalable.</span></span> <span data-ttu-id="a9900-304">Du hittar normalt att-enheterna kommer att ha en lämplig egenskap som distribuerar entiteter i tillräcklig partitioner.</span><span class="sxs-lookup"><span data-stu-id="a9900-304">Typically, you will find that your entities will have a suitable property that distributes your entities across sufficient partitions.</span></span>

> [!NOTE]
> <span data-ttu-id="a9900-305">I ett system som lagrar information om användare eller anställda kanske användar-ID för en bra PartitionKey.</span><span class="sxs-lookup"><span data-stu-id="a9900-305">For example, in a system that stores information about users or employees, UserID may be a good PartitionKey.</span></span> <span data-ttu-id="a9900-306">Du kan ha flera enheter som använder en viss användar-ID som hello partitionsnyckel.</span><span class="sxs-lookup"><span data-stu-id="a9900-306">You may have several entities that use a given UserID as hello partition key.</span></span> <span data-ttu-id="a9900-307">Varje entitet som lagrar data om en användare är grupperade i en enda partition och så dessa enheter är tillgängliga via entitet grupptransaktioner, samtidigt som de skalbara.</span><span class="sxs-lookup"><span data-stu-id="a9900-307">Each entity that stores data about a user is grouped into a single partition, and so these entities are accessible via entity group transactions, while still being highly scalable.</span></span>
> 
> 

<span data-ttu-id="a9900-308">Det finns fler överväganden i valfri **PartitionKey** som relaterar toohow ska du infoga, uppdatera och ta bort entiteter: hello i avsnittet [Design för dataändring](#design-for-data-modification) nedan.</span><span class="sxs-lookup"><span data-stu-id="a9900-308">There are additional considerations in your choice of **PartitionKey** that relate toohow you will insert, update, and delete entities: see hello section [Design for data modification](#design-for-data-modification) below.</span></span>  

### <a name="optimizing-queries-for-hello-table-service"></a><span data-ttu-id="a9900-309">Optimera frågor för hello tabelltjänst</span><span class="sxs-lookup"><span data-stu-id="a9900-309">Optimizing queries for hello Table service</span></span>
<span data-ttu-id="a9900-310">Hej tabelltjänsten indexerar automatiskt dina enheter med hjälp av hello **PartitionKey** och **RowKey** värden i ett enda grupperat index därför hello orsak att punkt frågor är hello effektivaste toouse .</span><span class="sxs-lookup"><span data-stu-id="a9900-310">hello Table service automatically indexes your entities using hello **PartitionKey** and **RowKey** values in a single clustered index, hence hello reason that point queries are hello most efficient toouse.</span></span> <span data-ttu-id="a9900-311">Det finns dock några index än det som på hello grupperade indexet för hello **PartitionKey** och **RowKey**.</span><span class="sxs-lookup"><span data-stu-id="a9900-311">However, there are no indexes other than that on hello clustered index on hello **PartitionKey** and **RowKey**.</span></span>

<span data-ttu-id="a9900-312">Många-Designer måste uppfylla kraven tooenable sökning efter enheter baserat på flera villkor.</span><span class="sxs-lookup"><span data-stu-id="a9900-312">Many designs must meet requirements tooenable lookup of entities based on multiple criteria.</span></span> <span data-ttu-id="a9900-313">Hitta medarbetare enheter baserat på e-post, till exempel anställnings-id eller efternamn.</span><span class="sxs-lookup"><span data-stu-id="a9900-313">For example, locating employee entities based on email, employee id, or last name.</span></span> <span data-ttu-id="a9900-314">hello följande mönster i hello avsnittet [tabell designmönster](#table-design-patterns) dessa typer av krav och beskriver fungerar runt hello faktum att hello tabelltjänsten inte ger sekundärindex på olika sätt:</span><span class="sxs-lookup"><span data-stu-id="a9900-314">hello following patterns in hello section [Table Design Patterns](#table-design-patterns) address these types of requirement and describe ways of working around hello fact that hello Table service does not provide secondary indexes:</span></span>  

* <span data-ttu-id="a9900-315">[Intra-partition sekundärt index mönster](#intra-partition-secondary-index-pattern) -lagra flera kopior av varje enhet med hjälp av olika **RowKey** värden (i hello samma partition) tooenable snabba och effektiva sökningar och alternativa sorteringen sorterar med hjälp av olika **RowKey** värden.</span><span class="sxs-lookup"><span data-stu-id="a9900-315">[Intra-partition secondary index pattern](#intra-partition-secondary-index-pattern) - Store multiple copies of each entity using different **RowKey** values (in hello same partition) tooenable fast and efficient lookups and alternate sort orders by using different **RowKey** values.</span></span>  
* <span data-ttu-id="a9900-316">[Mellan sekundära Partitionsindex mönster](#inter-partition-secondary-index-pattern) – lagra flera kopior av varje entitet med olika RowKey värden i olika partitioner eller i separata tabeller tooenable snabb och effektiv sökningar och alternativa sorteringen sorterar med hjälp av olika **RowKey** värden.</span><span class="sxs-lookup"><span data-stu-id="a9900-316">[Inter-partition secondary index pattern](#inter-partition-secondary-index-pattern) - Store multiple copies of each entity using different RowKey values in separate partitions or in separate tables tooenable fast and efficient lookups and alternate sort orders by using different **RowKey** values.</span></span>  
* <span data-ttu-id="a9900-317">[Index entiteter mönster](#index-entities-pattern) -Underhåll entiteter tooenable effektiva sökningar som returnerar en lista över enheter.</span><span class="sxs-lookup"><span data-stu-id="a9900-317">[Index Entities Pattern](#index-entities-pattern) - Maintain index entities tooenable efficient searches that return lists of entities.</span></span>  

### <a name="sorting-data-in-hello-table-service"></a><span data-ttu-id="a9900-318">Sortera data i hello tabelltjänst</span><span class="sxs-lookup"><span data-stu-id="a9900-318">Sorting data in hello Table service</span></span>
<span data-ttu-id="a9900-319">Hej tabelltjänsten returnerar entiteter sorterade i stigande ordning utifrån **PartitionKey** och sedan efter **RowKey**.</span><span class="sxs-lookup"><span data-stu-id="a9900-319">hello Table service returns entities sorted in ascending order based on **PartitionKey** and then by **RowKey**.</span></span> <span data-ttu-id="a9900-320">Nycklarna är strängvärden och tooensure numeriska värden sorteras korrekt, bör du konvertera dem tooa fast längd och Fyll ut dem med nollor.</span><span class="sxs-lookup"><span data-stu-id="a9900-320">These keys are string values and tooensure that numeric values sort correctly, you should convert them tooa fixed length and pad them with zeroes.</span></span> <span data-ttu-id="a9900-321">Till exempel, om hello medarbetare ID-värde du använda hello **RowKey** är ett heltal, bör du konvertera anställnings-id **123** för**00000123**.</span><span class="sxs-lookup"><span data-stu-id="a9900-321">For example, if hello employee id value you use as hello **RowKey** is an integer value, you should convert employee id **123** too**00000123**.</span></span>  

<span data-ttu-id="a9900-322">Många program har krav toouse data sorteras i olika ordning: till exempel sortera anställda efter namn eller ansluta till datum.</span><span class="sxs-lookup"><span data-stu-id="a9900-322">Many applications have requirements toouse data sorted in different orders: for example, sorting employees by name, or by joining date.</span></span> <span data-ttu-id="a9900-323">hello följande mönster i hello avsnittet [tabell designmönster](#table-design-patterns) adressen hur tooalternate sorteringsordningar för dina enheter:</span><span class="sxs-lookup"><span data-stu-id="a9900-323">hello following patterns in hello section [Table Design Patterns](#table-design-patterns) address how tooalternate sort orders for your entities:</span></span>  

* <span data-ttu-id="a9900-324">[Intra-partition sekundärt index mönster](#intra-partition-secondary-index-pattern) -lagra flera kopior av varje entitet med olika värden för RowKey (i hello samma partition) tooenable snabba och effektiva sökningar och alternativa sorteringen sorterar med hjälp av olika RowKey värden.</span><span class="sxs-lookup"><span data-stu-id="a9900-324">[Intra-partition secondary index pattern](#intra-partition-secondary-index-pattern) - Store multiple copies of each entity using different RowKey values (in hello same partition) tooenable fast and efficient lookups and alternate sort orders by using different RowKey values.</span></span>  
* <span data-ttu-id="a9900-325">[Mellan sekundära Partitionsindex mönster](#inter-partition-secondary-index-pattern) – lagra flera kopior av varje entitet med olika RowKey värden i separata partitioner i separata tabeller tooenable snabb och effektiv sökningar och alternativa sorteringen sorterar med hjälp av olika RowKey värden.</span><span class="sxs-lookup"><span data-stu-id="a9900-325">[Inter-partition secondary index pattern](#inter-partition-secondary-index-pattern) - Store multiple copies of each entity using different RowKey values in separate partitions in separate tables tooenable fast and efficient lookups and alternate sort orders by using different RowKey values.</span></span>
* <span data-ttu-id="a9900-326">[Loggen pilslut mönster](#log-tail-pattern) -hämta hello  *n*  entiteter senast lades tooa partition med hjälp av en **RowKey** värde som sorterar i omvänd datum och tid ordning.</span><span class="sxs-lookup"><span data-stu-id="a9900-326">[Log tail pattern](#log-tail-pattern) - Retrieve hello *n* entities most recently added tooa partition by using a **RowKey** value that sorts in reverse date and time order.</span></span>  

## <a name="design-for-data-modification"></a><span data-ttu-id="a9900-327">Design för dataändring</span><span class="sxs-lookup"><span data-stu-id="a9900-327">Design for data modification</span></span>
<span data-ttu-id="a9900-328">Det här avsnittet fokuserar på hello designöverväganden för att optimera infogningar, uppdateringar, och tar bort.</span><span class="sxs-lookup"><span data-stu-id="a9900-328">This section focuses on hello design considerations for optimizing inserts, updates, and deletes.</span></span> <span data-ttu-id="a9900-329">I vissa fall måste tooevaluate hello säkerhetsaspekten Designer optimerar för frågor mot Designer optimerar för dataändring precis som i Designer för relationsdatabaser (även om hello tekniker för att hantera hello design avvägningarna är olika i en relationsdatabas).</span><span class="sxs-lookup"><span data-stu-id="a9900-329">In some cases, you will need tooevaluate hello trade-off between designs that optimize for querying against designs that optimize for data modification just as you do in designs for relational databases (although hello techniques for managing hello design trade-offs are different in a relational database).</span></span> <span data-ttu-id="a9900-330">Hej avsnittet [tabell designmönster](#table-design-patterns) beskriver vissa detaljerad designmönster för hello tabelltjänsten och beskrivs några dessa avvägningarna.</span><span class="sxs-lookup"><span data-stu-id="a9900-330">hello section [Table Design Patterns](#table-design-patterns) describes some detailed design patterns for hello Table service and highlights some these trade-offs.</span></span> <span data-ttu-id="a9900-331">Du hittar många Designer som optimerats för att fråga entiteter också fungerar bra för att ändra entiteter i praktiken.</span><span class="sxs-lookup"><span data-stu-id="a9900-331">In practice, you will find that many designs optimized for querying entities also work well for modifying entities.</span></span>  

### <a name="optimizing-hello-performance-of-insert-update-and-delete-operations"></a><span data-ttu-id="a9900-332">Optimera hello prestanda för insert-, uppdatera och ta bort</span><span class="sxs-lookup"><span data-stu-id="a9900-332">Optimizing hello performance of insert, update, and delete operations</span></span>
<span data-ttu-id="a9900-333">tooupdate eller ta bort en enhet, måste du vara kan tooidentify den med hjälp av hello **PartitionKey** och **RowKey** värden.</span><span class="sxs-lookup"><span data-stu-id="a9900-333">tooupdate or delete an entity, you must be able tooidentify it by using hello **PartitionKey** and **RowKey** values.</span></span> <span data-ttu-id="a9900-334">I detta avseende valet av **PartitionKey** och **RowKey** för ändra entiteter bör följa liknande villkor tooyour val toosupport peka frågor eftersom du vill tooidentify entiteter som effektiv som möjligt.</span><span class="sxs-lookup"><span data-stu-id="a9900-334">In this respect, your choice of **PartitionKey** and **RowKey** for modifying entities should follow similar criteria tooyour choice toosupport point queries because you want tooidentify entities as efficiently as possible.</span></span> <span data-ttu-id="a9900-335">Du inte vill toouse en ineffektiv partition eller tabell genomsökning toolocate en entitet i ordning toodiscover hello **PartitionKey** och **RowKey** värden som du behöver tooupdate eller ta bort den.</span><span class="sxs-lookup"><span data-stu-id="a9900-335">You do not want toouse an inefficient partition or table scan toolocate an entity in order toodiscover hello **PartitionKey** and **RowKey** values you need tooupdate or delete it.</span></span>  

<span data-ttu-id="a9900-336">Hej följande mönster i hello avsnittet [tabell designmönster](#table-design-patterns) adress optimera prestanda för hello eller din insert, update och delete-åtgärder:</span><span class="sxs-lookup"><span data-stu-id="a9900-336">hello following patterns in hello section [Table Design Patterns](#table-design-patterns) address optimizing hello performance or your insert, update, and delete operations:</span></span>  

* <span data-ttu-id="a9900-337">[Hög volym ta bort mönster](#high-volume-delete-pattern) -aktivera hello borttagningen av ett stort antal enheter genom att lagra alla hello entiteter för samtidiga borttagning i sina egna separata tabeller; du ta bort hello enheter genom att ta bort hello tabell.</span><span class="sxs-lookup"><span data-stu-id="a9900-337">[High volume delete pattern](#high-volume-delete-pattern) - Enable hello deletion of a high volume of entities by storing all hello entities for simultaneous deletion in their own separate table; you delete hello entities by deleting hello table.</span></span>  
* <span data-ttu-id="a9900-338">[Serien datamönster](#data-series-pattern) -Store fullständig dataserien i en enda entitet toominimize hello antal begäranden som du gör.</span><span class="sxs-lookup"><span data-stu-id="a9900-338">[Data series pattern](#data-series-pattern) - Store complete data series in a single entity toominimize hello number of requests you make.</span></span>  
* <span data-ttu-id="a9900-339">[Wide entiteter mönster](#wide-entities-pattern) -använder flera logiska enheter som fysiska entiteter toostore med mer än 252 egenskaper.</span><span class="sxs-lookup"><span data-stu-id="a9900-339">[Wide entities pattern](#wide-entities-pattern) - Use multiple physical entities toostore logical entities with more than 252 properties.</span></span>  
* <span data-ttu-id="a9900-340">[Mönster för stora entiteter](#large-entities-pattern) -Använd blob storage toostore stora värden.</span><span class="sxs-lookup"><span data-stu-id="a9900-340">[Large entities pattern](#large-entities-pattern) - Use blob storage toostore large property values.</span></span>  

### <a name="ensuring-consistency-in-your-stored-entities"></a><span data-ttu-id="a9900-341">Säkerställa konsekvens i lagrade entiteter</span><span class="sxs-lookup"><span data-stu-id="a9900-341">Ensuring consistency in your stored entities</span></span>
<span data-ttu-id="a9900-342">Hej andra viktiga faktorer som påverkar ditt val av nycklar för optimera dataändringar är hur tooensure konsekvens med hjälp av atomiska transaktioner.</span><span class="sxs-lookup"><span data-stu-id="a9900-342">hello other key factor that influences your choice of keys for optimizing data modifications is how tooensure consistency by using atomic transactions.</span></span> <span data-ttu-id="a9900-343">Du kan bara använda en EGT toooperate på entiteter som lagras i hello samma partition.</span><span class="sxs-lookup"><span data-stu-id="a9900-343">You can only use an EGT toooperate on entities stored in hello same partition.</span></span>  

<span data-ttu-id="a9900-344">Hej följande mönster i hello avsnittet [tabell designmönster](#table-design-patterns) adress hantera konsekvens:</span><span class="sxs-lookup"><span data-stu-id="a9900-344">hello following patterns in hello section [Table Design Patterns](#table-design-patterns) address managing consistency:</span></span>  

* <span data-ttu-id="a9900-345">[Intra-partition sekundärt index mönster](#intra-partition-secondary-index-pattern) -lagra flera kopior av varje enhet med hjälp av olika **RowKey** värden (i hello samma partition) tooenable snabba och effektiva sökningar och alternativa sorteringen sorterar med hjälp av olika **RowKey** värden.</span><span class="sxs-lookup"><span data-stu-id="a9900-345">[Intra-partition secondary index pattern](#intra-partition-secondary-index-pattern) - Store multiple copies of each entity using different **RowKey** values (in hello same partition) tooenable fast and efficient lookups and alternate sort orders by using different **RowKey** values.</span></span>  
* <span data-ttu-id="a9900-346">[Mellan sekundära Partitionsindex mönster](#inter-partition-secondary-index-pattern) – lagra flera kopior av varje entitet med olika RowKey värden i olika partitioner eller i separata tabeller tooenable snabb och effektiv sökningar och alternativa sorteringen sorterar med hjälp av olika **RowKey** värden.</span><span class="sxs-lookup"><span data-stu-id="a9900-346">[Inter-partition secondary index pattern](#inter-partition-secondary-index-pattern) - Store multiple copies of each entity using different RowKey values in separate partitions or in separate tables tooenable fast and efficient lookups and alternate sort orders by using different **RowKey** values.</span></span>  
* <span data-ttu-id="a9900-347">[Överensstämmelse transaktioner mönster](#eventually-consistent-transactions-pattern) -aktivera överensstämmelse beteende mellan partitionsgränser eller lagring system gränser med hjälp av Azure köer.</span><span class="sxs-lookup"><span data-stu-id="a9900-347">[Eventually consistent transactions pattern](#eventually-consistent-transactions-pattern) - Enable eventually consistent behavior across partition boundaries or storage system boundaries by using Azure queues.</span></span>
* <span data-ttu-id="a9900-348">[Index entiteter mönster](#index-entities-pattern) -Underhåll entiteter tooenable effektiva sökningar som returnerar en lista över enheter.</span><span class="sxs-lookup"><span data-stu-id="a9900-348">[Index Entities Pattern](#index-entities-pattern) - Maintain index entities tooenable efficient searches that return lists of entities.</span></span>  
* <span data-ttu-id="a9900-349">[Denormalization mönster](#denormalization-pattern) -kombinera relaterade data tillsammans i en enda entitet tooenable tooretrieve alla hello data som du behöver med en enda fråga.</span><span class="sxs-lookup"><span data-stu-id="a9900-349">[Denormalization pattern](#denormalization-pattern) - Combine related data together in a single entity tooenable you tooretrieve all hello data you need with a single point query.</span></span>  
* <span data-ttu-id="a9900-350">[Serien datamönster](#data-series-pattern) -Store fullständig dataserien i en enda entitet toominimize hello antal begäranden som du gör.</span><span class="sxs-lookup"><span data-stu-id="a9900-350">[Data series pattern](#data-series-pattern) - Store complete data series in a single entity toominimize hello number of requests you make.</span></span>  

<span data-ttu-id="a9900-351">Information om entiteten grupptransaktioner i avsnittet hello [entitet gruppera transaktioner](#entity-group-transactions).</span><span class="sxs-lookup"><span data-stu-id="a9900-351">For information about entity group transactions, see hello section [Entity Group Transactions](#entity-group-transactions).</span></span>  

### <a name="ensuring-your-design-for-efficient-modifications-facilitates-efficient-queries"></a><span data-ttu-id="a9900-352">Säkerställa en design för effektiv ändringar underlättar effektiv frågor</span><span class="sxs-lookup"><span data-stu-id="a9900-352">Ensuring your design for efficient modifications facilitates efficient queries</span></span>
<span data-ttu-id="a9900-353">I många fall bör alltid en design för effektiva frågor ger effektiv ändringar, men du utvärdera om så är fallet hello för din situation.</span><span class="sxs-lookup"><span data-stu-id="a9900-353">In many cases, a design for efficient querying results in efficient modifications, but you should always evaluate whether this is hello case for your specific scenario.</span></span> <span data-ttu-id="a9900-354">Del av hello mönster i hello avsnittet [tabell designmönster](#table-design-patterns) explicit utvärdera avvägningarna mellan fråga och ändra entiteter och du bör alltid hänsyn hello kontonummer för varje typ av åtgärd.</span><span class="sxs-lookup"><span data-stu-id="a9900-354">Some of hello patterns in hello section [Table Design Patterns](#table-design-patterns) explicitly evaluate trade-offs between querying and modifying entities, and you should always take into account hello number of each type of operation.</span></span>  

<span data-ttu-id="a9900-355">Hej följande mönster i hello avsnittet [tabell designmönster](#table-design-patterns) adressen avvägningarna mellan utformning för effektiva frågor och designar för effektiv dataändring:</span><span class="sxs-lookup"><span data-stu-id="a9900-355">hello following patterns in hello section [Table Design Patterns](#table-design-patterns) address trade-offs between designing for efficient queries and designing for efficient data modification:</span></span>  

* <span data-ttu-id="a9900-356">[Sammansatt nyckel mönster](#compound-key-pattern) -Använd sammansatta **RowKey** värden tooenable en klient toolookup relaterade data med en enda fråga.</span><span class="sxs-lookup"><span data-stu-id="a9900-356">[Compound key pattern](#compound-key-pattern) - Use compound **RowKey** values tooenable a client toolookup related data with a single point query.</span></span>  
* <span data-ttu-id="a9900-357">[Loggen pilslut mönster](#log-tail-pattern) -hämta hello  *n*  entiteter senast lades tooa partition med hjälp av en **RowKey** värde som sorterar i omvänd datum och tid ordning.</span><span class="sxs-lookup"><span data-stu-id="a9900-357">[Log tail pattern](#log-tail-pattern) - Retrieve hello *n* entities most recently added tooa partition by using a **RowKey** value that sorts in reverse date and time order.</span></span>  

## <a name="encrypting-table-data"></a><span data-ttu-id="a9900-358">Kryptera tabelldata</span><span class="sxs-lookup"><span data-stu-id="a9900-358">Encrypting Table Data</span></span>
<span data-ttu-id="a9900-359">Hej .NET Azure Storage-klientbibliotek har stöd för kryptering av strängen Entitetsegenskaper för insert och ersätt-åtgärder.</span><span class="sxs-lookup"><span data-stu-id="a9900-359">hello .NET Azure Storage Client Library supports encryption of string entity properties for insert and replace operations.</span></span> <span data-ttu-id="a9900-360">hello krypterade strängar lagras på hello-tjänsten som binära egenskaper och de konverteras tillbaka toostrings efter dekrypteringen.</span><span class="sxs-lookup"><span data-stu-id="a9900-360">hello encrypted strings are stored on hello service as binary properties, and they are converted back toostrings after decryption.</span></span>    

<span data-ttu-id="a9900-361">För tabeller, dessutom toohello krypteringsprincipen användare måste ange hello egenskaper toobe krypteras.</span><span class="sxs-lookup"><span data-stu-id="a9900-361">For tables, in addition toohello encryption policy, users must specify hello properties toobe encrypted.</span></span> <span data-ttu-id="a9900-362">Detta kan göras genom att antingen att ange attributet [EncryptProperty] (för POCO entiteter som är härledda från TableEntity) eller en kryptering matcharen begäran alternativ.</span><span class="sxs-lookup"><span data-stu-id="a9900-362">This can be done by either specifying an [EncryptProperty] attribute (for POCO entities that derive from TableEntity) or an encryption resolver in request options.</span></span> <span data-ttu-id="a9900-363">En kryptering Konfliktlösaren är en delegat som tar en partitionsnyckel, radnyckel och egenskapsnamn och returnerar ett booleskt värde som anger om egenskapen ska krypteras.</span><span class="sxs-lookup"><span data-stu-id="a9900-363">An encryption resolver is a delegate that takes a partition key, row key, and property name and returns a Boolean that indicates whether that property should be encrypted.</span></span> <span data-ttu-id="a9900-364">Under krypteringen använder hello klientbiblioteket denna information toodecide om en egenskap som ska krypteras vid skrivning till toohello överföring.</span><span class="sxs-lookup"><span data-stu-id="a9900-364">During encryption, hello client library will use this information toodecide whether a property should be encrypted while writing toohello wire.</span></span> <span data-ttu-id="a9900-365">Det ger också hello ombud hello möjlighet till logik runt hur egenskaperna är krypterade.</span><span class="sxs-lookup"><span data-stu-id="a9900-365">hello delegate also provides for hello possibility of logic around how properties are encrypted.</span></span> <span data-ttu-id="a9900-366">(Till exempel om X, sedan kryptera egenskapen A; annars kryptera egenskaper A och b) Observera att det är inte nödvändigt tooprovide denna information vid läsning eller fråga entiteter.</span><span class="sxs-lookup"><span data-stu-id="a9900-366">(For example, if X, then encrypt property A; otherwise encrypt properties A and B.) Note that it is not necessary tooprovide this information while reading or querying entities.</span></span>

<span data-ttu-id="a9900-367">Observera att koppling inte stöds för närvarande.</span><span class="sxs-lookup"><span data-stu-id="a9900-367">Note that merge is not currently supported.</span></span> <span data-ttu-id="a9900-368">Eftersom en delmängd av egenskaper kan har krypterats tidigare med hjälp av en annan nyckel leder bara sammanslagning hello nya egenskaper och uppdaterar hello metadata till dataförlust.</span><span class="sxs-lookup"><span data-stu-id="a9900-368">Since a subset of properties may have been encrypted previously using a different key, simply merging hello new properties and updating hello metadata will result in data loss.</span></span> <span data-ttu-id="a9900-369">Sammanslagning av antingen kräver att göra extra service anropar tooread hello befintlig entitet från hello-tjänsten eller med en ny nyckel för varje egenskap som lämpar sig inte av prestandaskäl.</span><span class="sxs-lookup"><span data-stu-id="a9900-369">Merging either requires making extra service calls tooread hello pre-existing entity from hello service, or using a new key per property, both of which are not suitable for performance reasons.</span></span>     

<span data-ttu-id="a9900-370">Information om hur du krypterar tabelldata finns [kryptering på klientsidan och Azure Key Vault för Microsoft Azure Storage](storage-client-side-encryption.md).</span><span class="sxs-lookup"><span data-stu-id="a9900-370">For information about encrypting table data, see [Client-Side Encryption and Azure Key Vault for Microsoft Azure Storage](storage-client-side-encryption.md).</span></span>  

## <a name="modelling-relationships"></a><span data-ttu-id="a9900-371">Modellering relationer</span><span class="sxs-lookup"><span data-stu-id="a9900-371">Modelling relationships</span></span>
<span data-ttu-id="a9900-372">Skapa domänmodeller är ett viktigt steg i hello design av komplexa system.</span><span class="sxs-lookup"><span data-stu-id="a9900-372">Building domain models is a key step in hello design of complex systems.</span></span> <span data-ttu-id="a9900-373">Normalt använder du hello modellering processen tooidentify entiteter och hello relationer mellan dem som ett sätt toounderstand hello business domän och informera hello utformning av systemet.</span><span class="sxs-lookup"><span data-stu-id="a9900-373">Typically, you use hello modelling process tooidentify entities and hello relationships between them as a way toounderstand hello business domain and inform hello design of your system.</span></span> <span data-ttu-id="a9900-374">Det här avsnittet fokuserar på hur du kan översätta vissa hello vanliga relationstyper hittades i domänen modeller toodesigns för hello tabelltjänsten.</span><span class="sxs-lookup"><span data-stu-id="a9900-374">This section focuses on how you can translate some of hello common relationship types found in domain models toodesigns for hello Table service.</span></span> <span data-ttu-id="a9900-375">hello är mappning från en logisk datamodell tooa fysiska baserat NoSQL-datamodell väldigt annorlunda än den som används när du skapar en relationsdatabas.</span><span class="sxs-lookup"><span data-stu-id="a9900-375">hello process of mapping from a logical data-model tooa physical NoSQL based data-model is very different from that used when designing a relational database.</span></span> <span data-ttu-id="a9900-376">Relationsdatabaser design förutsätter vanligtvis en process för normalisering som har optimerats för att minimera redundans – och en deklarativ frågar funktion som sammanfattningar hello hur implementeringen av hur hello databasen fungerar.</span><span class="sxs-lookup"><span data-stu-id="a9900-376">Relational databases design typically assumes a data normalization process optimized for minimizing redundancy – and a declarative querying capability that abstracts how hello implementation of how hello database works.</span></span>  

### <a name="one-to-many-relationships"></a><span data-ttu-id="a9900-377">En-till-många-relationer</span><span class="sxs-lookup"><span data-stu-id="a9900-377">One-to-many relationships</span></span>
<span data-ttu-id="a9900-378">En-till-många-relationer mellan företag domänobjekt inträffa ofta: till exempel en avdelning har många anställda.</span><span class="sxs-lookup"><span data-stu-id="a9900-378">One-to-many relationships between business domain objects occur very frequently: for example, one department has many employees.</span></span> <span data-ttu-id="a9900-379">Det finns flera sätt tooimplement en-till-många-relationer i hello tabelltjänsten varje med för- och nackdelar som kan vara relevanta toohello visst scenario.</span><span class="sxs-lookup"><span data-stu-id="a9900-379">There are several ways tooimplement one-to-many relationships in hello Table service each with pros and cons that may be relevant toohello particular scenario.</span></span>  

<span data-ttu-id="a9900-380">Överväg att hello exempel på flera nationella stora företag med tusentals avdelningar och medarbetare enheter där varje avdelning har många anställda och varje medarbetare som tillhör en viss avdelning.</span><span class="sxs-lookup"><span data-stu-id="a9900-380">Consider hello example of a large multi-national corporation with tens of thousands of departments and employee entities where every department has many employees and each employee as associated with one specific department.</span></span> <span data-ttu-id="a9900-381">En metod som är toostore separat avdelning och medarbetare entiteter som dessa:</span><span class="sxs-lookup"><span data-stu-id="a9900-381">One approach is toostore separate department and employee entities such as these:</span></span>  

![][1]

<span data-ttu-id="a9900-382">Det här exemplet illustrerar en implicit en-till-många-relation mellan hello typer baserat på hello **PartitionKey** värde.</span><span class="sxs-lookup"><span data-stu-id="a9900-382">This example shows an implicit one-to-many relationship between hello types based on hello **PartitionKey** value.</span></span> <span data-ttu-id="a9900-383">Varje avdelning kan ha många anställda.</span><span class="sxs-lookup"><span data-stu-id="a9900-383">Each department can have many employees.</span></span>  

<span data-ttu-id="a9900-384">Det här exemplet visar också en avdelning entitet och dess relaterade medarbetare entiteter i hello samma partition.</span><span class="sxs-lookup"><span data-stu-id="a9900-384">This example also shows a department entity and its related employee entities in hello same partition.</span></span> <span data-ttu-id="a9900-385">Du kan välja toouse olika partitioner, tabeller och även storage-konton för hello olika enhetstyper.</span><span class="sxs-lookup"><span data-stu-id="a9900-385">You could choose toouse different partitions, tables, or even storage accounts for hello different entity types.</span></span>  

<span data-ttu-id="a9900-386">En annan metod är toodenormalize dina data och store endast anställda entiteter med Avnormaliserade information som visas i följande exempel hello.</span><span class="sxs-lookup"><span data-stu-id="a9900-386">An alternative approach is toodenormalize your data and store only employee entities with denormalized department data as shown in hello following example.</span></span> <span data-ttu-id="a9900-387">I det här scenariot kan då Avnormaliserade kanske inte hello bäst om du har ett krav toobe kan toochange hello information för en avdelningschef eftersom toodo detta behöver du tooupdate alla medarbetare i hello-avdelningen.</span><span class="sxs-lookup"><span data-stu-id="a9900-387">In this particular scenario, this denormalized approach may not be hello best if you have a requirement toobe able toochange hello details of a department manager because toodo this you need tooupdate every employee in hello department.</span></span>  

![][2]

<span data-ttu-id="a9900-388">Mer information finns i hello [Denormalization mönster](#denormalization-pattern) senare i den här guiden.</span><span class="sxs-lookup"><span data-stu-id="a9900-388">For more information, see hello [Denormalization pattern](#denormalization-pattern) later in this guide.</span></span>  

<span data-ttu-id="a9900-389">hello följande tabell sammanfattas hello- och nackdelar med varje hello-metoder som beskrivs ovan för att lagra medarbetare och avdelningen enheter som har en en-till-många-relation.</span><span class="sxs-lookup"><span data-stu-id="a9900-389">hello following table summarizes hello pros and cons of each of hello approaches outlined above for storing employee and department entities that have a one-to-many relationship.</span></span> <span data-ttu-id="a9900-390">Det bör också övervägas hur ofta du förväntar dig tooperform olika åtgärder: Det kan vara godtagbar toohave en design som innehåller en kostsam åtgärd om åtgärden endast inträffar sällan.</span><span class="sxs-lookup"><span data-stu-id="a9900-390">You should also consider how often you expect tooperform various operations: it may be acceptable toohave a design that includes an expensive operation if that operation only happens infrequently.</span></span>  

<table>
<tr>
<th><span data-ttu-id="a9900-391">Metoden</span><span class="sxs-lookup"><span data-stu-id="a9900-391">Approach</span></span></th>
<th><span data-ttu-id="a9900-392">Tekniker</span><span class="sxs-lookup"><span data-stu-id="a9900-392">Pros</span></span></th>
<th><span data-ttu-id="a9900-393">Nackdelar</span><span class="sxs-lookup"><span data-stu-id="a9900-393">Cons</span></span></th>
</tr>
<tr>
<td><span data-ttu-id="a9900-394">Separata entitetstyper, samma partition i samma tabell</span><span class="sxs-lookup"><span data-stu-id="a9900-394">Separate entity types, same partition, same table</span></span></td>
<td>
<ul>
<li><span data-ttu-id="a9900-395">Du kan uppdatera en avdelning entitet med en enda åtgärd.</span><span class="sxs-lookup"><span data-stu-id="a9900-395">You can update a department entity with a single operation.</span></span></li>
<li><span data-ttu-id="a9900-396">Du kan använda en EGT toomaintain konsekvenskontroll om du har ett krav toomodify en avdelning enhet när du uppdatering/insert/ta bort en medarbetare entitet.</span><span class="sxs-lookup"><span data-stu-id="a9900-396">You can use an EGT toomaintain consistency if you have a requirement toomodify a department entity whenever you update/insert/delete an employee entity.</span></span> <span data-ttu-id="a9900-397">Till exempel om du har ett antal avdelningens anställda för varje avdelning.</span><span class="sxs-lookup"><span data-stu-id="a9900-397">For example if you maintain a departmental employee count for each department.</span></span></li>
</ul>
</td>
<td>
<ul>
<li><span data-ttu-id="a9900-398">Du kan behöva tooretrieve både anställda och en avdelning entitet för vissa aktiviteter för klienten.</span><span class="sxs-lookup"><span data-stu-id="a9900-398">You may need tooretrieve both an employee and a department entity for some client activities.</span></span></li>
<li><span data-ttu-id="a9900-399">Storage-åtgärder sker i hello samma partition.</span><span class="sxs-lookup"><span data-stu-id="a9900-399">Storage operations happen in hello same partition.</span></span> <span data-ttu-id="a9900-400">Vid höga transaktionsvolymer kan detta resultera i en hotspot.</span><span class="sxs-lookup"><span data-stu-id="a9900-400">At high transaction volumes, this may result in a hotspot.</span></span></li>
<li><span data-ttu-id="a9900-401">Du kan inte flytta en medarbetare tooa nya avdelning med hjälp av en EGT.</span><span class="sxs-lookup"><span data-stu-id="a9900-401">You cannot move an employee tooa new department using an EGT.</span></span></li>
</ul>
</td>
</tr>
<tr>
<td><span data-ttu-id="a9900-402">Separata entitetstyper, olika partitioner eller tabeller storage-konton</span><span class="sxs-lookup"><span data-stu-id="a9900-402">Separate entity types, different partitions or tables or storage accounts</span></span></td>
<td>
<ul>
<li><span data-ttu-id="a9900-403">Du kan uppdatera en avdelning entitet eller medarbetare enhet med en enda åtgärd.</span><span class="sxs-lookup"><span data-stu-id="a9900-403">You can update a department entity or employee entity with a single operation.</span></span></li>
<li><span data-ttu-id="a9900-404">Detta kan hjälpa med höga transaktionsvolymer spridning hello belastningen över flera partitioner.</span><span class="sxs-lookup"><span data-stu-id="a9900-404">At high transaction volumes, this may help spread hello load across more partitions.</span></span></li>
</ul>
</td>
<td>
<ul>
<li><span data-ttu-id="a9900-405">Du kan behöva tooretrieve både anställda och en avdelning entitet för vissa aktiviteter för klienten.</span><span class="sxs-lookup"><span data-stu-id="a9900-405">You may need tooretrieve both an employee and a department entity for some client activities.</span></span></li>
<li><span data-ttu-id="a9900-406">Du kan inte använda EGTs toomaintain konsekvenskontroll när du uppdatering/insert/ta bort en medarbetare och uppdatera en avdelning.</span><span class="sxs-lookup"><span data-stu-id="a9900-406">You cannot use EGTs toomaintain consistency when you update/insert/delete an employee and update a department.</span></span> <span data-ttu-id="a9900-407">Till exempel uppdaterar ett antal anställda i en avdelning entitet.</span><span class="sxs-lookup"><span data-stu-id="a9900-407">For example, updating an employee count in a department entity.</span></span></li>
<li><span data-ttu-id="a9900-408">Du kan inte flytta en medarbetare tooa nya avdelning med hjälp av en EGT.</span><span class="sxs-lookup"><span data-stu-id="a9900-408">You cannot move an employee tooa new department using an EGT.</span></span></li>
</ul>
</td>
</tr>
<tr>
<td><span data-ttu-id="a9900-409">Denormalize till samma enhetstyp</span><span class="sxs-lookup"><span data-stu-id="a9900-409">Denormalize into single entity type</span></span></td>
<td>
<ul>
<li><span data-ttu-id="a9900-410">Du kan hämta alla hello information du behöver med en enskild begäran.</span><span class="sxs-lookup"><span data-stu-id="a9900-410">You can retrieve all hello information you need with a single request.</span></span></li>
</ul>
</td>
<td>
<ul>
<li><span data-ttu-id="a9900-411">Det kan vara dyra toomaintain konsekvenskontroll om du behöver tooupdate avdelning information (det här kräver du tooupdate alla hello anställda på en avdelning).</span><span class="sxs-lookup"><span data-stu-id="a9900-411">It may be expensive toomaintain consistency if you need tooupdate department information (this would require you tooupdate all hello employees in a department).</span></span></li>
</ul>
</td>
</tr>
</table>

<span data-ttu-id="a9900-412">Hur kan du välja mellan alternativen och vilka hello-tekniker och nackdelar som är störst, beror på dina specifika Programscenarier.</span><span class="sxs-lookup"><span data-stu-id="a9900-412">How you choose between these options, and which of hello pros and cons are most significant, depends on your specific application scenarios.</span></span> <span data-ttu-id="a9900-413">Till exempel hur ofta du ändrar avdelning entiteter; behöver alla medarbetare frågor hello avdelningsnivå tilläggsinformation; hur nära är du toohello skalbarhetsgränser på partitioner eller storage-konto?</span><span class="sxs-lookup"><span data-stu-id="a9900-413">For example, how often do you modify department entities; do all your employee queries need hello additional departmental information; how close are you toohello scalability limits on your partitions or your storage account?</span></span>  

### <a name="one-to-one-relationships"></a><span data-ttu-id="a9900-414">1: 1-relationer</span><span class="sxs-lookup"><span data-stu-id="a9900-414">One-to-one relationships</span></span>
<span data-ttu-id="a9900-415">Domänmodeller kan innehålla 1: 1-relationer mellan entiteter.</span><span class="sxs-lookup"><span data-stu-id="a9900-415">Domain models may include one-to-one relationships between entities.</span></span> <span data-ttu-id="a9900-416">Om du behöver tooimplement en-till-en relation i hello tabelltjänsten, måste du också välja hur toolink hello två relaterade entiteter när du behöver tooretrieve båda.</span><span class="sxs-lookup"><span data-stu-id="a9900-416">If you need tooimplement a one-to-one relationship in hello Table service, you must also choose how toolink hello two related entities when you need tooretrieve them both.</span></span> <span data-ttu-id="a9900-417">Den här länken kan vara implicit, baserat på en konvention i hello nyckelvärden eller explicit genom att lagra en länk i hello form av **PartitionKey** och **RowKey** värdena i varje entitet tooits relaterade entiteten.</span><span class="sxs-lookup"><span data-stu-id="a9900-417">This link can be either implicit, based on a convention in hello key values, or explicit by storing a link in hello form of **PartitionKey** and **RowKey** values in each entity tooits related entity.</span></span> <span data-ttu-id="a9900-418">Mer information om huruvida du bör lagra hello relaterade entiteter i Hej samma partition, hello i avsnittet [en-till-många-relationer](#one-to-many-relationships).</span><span class="sxs-lookup"><span data-stu-id="a9900-418">For a discussion of whether you should store hello related entities in hello same partition, see hello section [One-to-many relationships](#one-to-many-relationships).</span></span>  

<span data-ttu-id="a9900-419">Observera att det finns också implementering som kan leda du tooimplement 1: 1-relationer i hello tabelltjänsten:</span><span class="sxs-lookup"><span data-stu-id="a9900-419">Note that there are also implementation considerations that might lead you tooimplement one-to-one relationships in hello Table service:</span></span>  

* <span data-ttu-id="a9900-420">Hantering av stora entiteter (Mer information finns i [stora entiteter mönster](#large-entities-pattern)).</span><span class="sxs-lookup"><span data-stu-id="a9900-420">Handling large entities (for more information, see [Large Entities Pattern](#large-entities-pattern)).</span></span>  
* <span data-ttu-id="a9900-421">Implementera åtkomstkontroller (Mer information finns i [Kontrollera åtkomst med signaturer för delad åtkomst](#controlling-access-with-shared-access-signatures)).</span><span class="sxs-lookup"><span data-stu-id="a9900-421">Implementing access controls (for more information, see [Controlling access with Shared Access Signatures](#controlling-access-with-shared-access-signatures)).</span></span>  

### <a name="join-in-hello-client"></a><span data-ttu-id="a9900-422">Delta i hello-klienten</span><span class="sxs-lookup"><span data-stu-id="a9900-422">Join in hello client</span></span>
<span data-ttu-id="a9900-423">Även om det finns olika sätt toomodel relationer i hello tabelltjänsten, ska du inte glömma att hello två huvudsakliga skäl till att använda hello tabelltjänsten finns skalbarhet och prestanda.</span><span class="sxs-lookup"><span data-stu-id="a9900-423">Although there are ways toomodel relationships in hello Table service, you should not forget that hello two prime reasons for using hello Table service are scalability and performance.</span></span> <span data-ttu-id="a9900-424">Om du hittar du modellering många relationer som angripa hello prestanda och skalbarhet i lösningen, bör du fråga dig själv om det är nödvändigt toobuild alla hello data relationer i tabelldesign.</span><span class="sxs-lookup"><span data-stu-id="a9900-424">If you find you are modelling many relationships that compromise hello performance and scalability of your solution, you should ask yourself if it is necessary toobuild all hello data relationships into your table design.</span></span> <span data-ttu-id="a9900-425">Du kan kan toosimplify hello design och förbättra hello skalbarhet och prestanda för din lösning om du låta ditt klientprogram som utför alla nödvändiga kopplingar.</span><span class="sxs-lookup"><span data-stu-id="a9900-425">You may be able toosimplify hello design and improve hello scalability and performance of your solution if you let your client application perform any necessary joins.</span></span>  

<span data-ttu-id="a9900-426">Till exempel om du har liten tabeller som innehåller data som inte ändras ofta kan sedan du hämta dessa data en gång och cachelagras på klienten hello.</span><span class="sxs-lookup"><span data-stu-id="a9900-426">For example, if you have small tables that contain data that does not change very often, then you can retrieve this data once and cache it on hello client.</span></span> <span data-ttu-id="a9900-427">Detta kan undvika upprepade görs tooretrieve hello samma data.</span><span class="sxs-lookup"><span data-stu-id="a9900-427">This can avoid repeated roundtrips tooretrieve hello same data.</span></span> <span data-ttu-id="a9900-428">I hello exempel vi har tittat på i den här handboken är hello avdelningar i en liten organisation sannolikt toobe små och ändrar sällan att göra det en bra kandidat för data som klientprogram kan ladda ned en gång och cache som slå upp data.</span><span class="sxs-lookup"><span data-stu-id="a9900-428">In hello examples we have looked at in this guide, hello set of departments in a small organization is likely toobe small and change infrequently making it a good candidate for data that client application can download once and cache as look up data.</span></span>  

### <a name="inheritance-relationships"></a><span data-ttu-id="a9900-429">Arvsrelationer</span><span class="sxs-lookup"><span data-stu-id="a9900-429">Inheritance relationships</span></span>
<span data-ttu-id="a9900-430">Om klientprogrammet använder en uppsättning klasser som utgör en del av ett affärsobjekt arv relationen toorepresent, kan du enkelt sparas dessa enheter i hello tabelltjänsten.</span><span class="sxs-lookup"><span data-stu-id="a9900-430">If your client application uses a set of classes that form part of an inheritance relationship toorepresent business entities, you can easily persist those entities in hello Table service.</span></span> <span data-ttu-id="a9900-431">Du kan till exempel ha följande uppsättning klasser som definieras i ditt klientprogram hello där **Person** är en abstrakt klass.</span><span class="sxs-lookup"><span data-stu-id="a9900-431">For example, you might have hello following set of classes defined in your client application where **Person** is an abstract class.</span></span>

![][3]

<span data-ttu-id="a9900-432">Du kan spara instanser av hello två konkreta klasser i hello tabelltjänsten med hjälp av en enskild Person tabell med entiteter i den ser ut så här:</span><span class="sxs-lookup"><span data-stu-id="a9900-432">You can persist instances of hello two concrete classes in hello Table service using a single Person table using entities in that look like this:</span></span>  

![][4]

<span data-ttu-id="a9900-433">Mer information om hur du arbetar med flera typer av enheter i samma tabell i klientkod hello avsnittet hello [arbeta med heterogena entitetstyper](#working-with-heterogeneous-entity-types) senare i den här guiden.</span><span class="sxs-lookup"><span data-stu-id="a9900-433">For more information about working with multiple entity types in hello same table in client code, see hello section [Working with heterogeneous entity types](#working-with-heterogeneous-entity-types) later in this guide.</span></span> <span data-ttu-id="a9900-434">Detta ger exempel på hur toorecognize hello entitetstypen i klientkod.</span><span class="sxs-lookup"><span data-stu-id="a9900-434">This provides examples of how toorecognize hello entity type in client code.</span></span>  

## <a name="table-design-patterns"></a><span data-ttu-id="a9900-435">Designmönster för tabellen</span><span class="sxs-lookup"><span data-stu-id="a9900-435">Table Design Patterns</span></span>
<span data-ttu-id="a9900-436">Du har sett vissa detaljerad information om hur toooptimize tabellen-design för både hämtades entitetsdata med hjälp av frågor och infoga, uppdatera och ta bort entitetsdata i föregående avsnitt.</span><span class="sxs-lookup"><span data-stu-id="a9900-436">In previous sections, you have seen some detailed discussions about how toooptimize your table design for both retrieving entity data using queries and for inserting, updating, and deleting entity data.</span></span> <span data-ttu-id="a9900-437">Det här avsnittet beskrivs vissa mönster som är lämpliga för användning med tjänstelösningar för tabellen.</span><span class="sxs-lookup"><span data-stu-id="a9900-437">This section describes some patterns appropriate for use with Table service solutions.</span></span> <span data-ttu-id="a9900-438">Dessutom visas hur du praktiskt taget kan lösa vissa problem med hello och avvägningarna aktiveras tidigare i den här guiden.</span><span class="sxs-lookup"><span data-stu-id="a9900-438">In addition, you will see how you can practically address some of hello issues and trade-offs raised previously in this guide.</span></span> <span data-ttu-id="a9900-439">hello visas följande diagram hello relationer mellan hello olika mönster:</span><span class="sxs-lookup"><span data-stu-id="a9900-439">hello following diagram summarizes hello relationships between hello different patterns:</span></span>  

![][5]

<span data-ttu-id="a9900-440">hello mönster kartan ovan visar relationer mellan mönster (blå) och ett mönster (orange) som finns dokumenterade i handboken.</span><span class="sxs-lookup"><span data-stu-id="a9900-440">hello pattern map above highlights some relationships between patterns (blue) and anti-patterns (orange) that are documented in this guide.</span></span> <span data-ttu-id="a9900-441">Det är naturligtvis många mönster som är värda att ta hänsyn till.</span><span class="sxs-lookup"><span data-stu-id="a9900-441">There are of course many other patterns that are worth considering.</span></span> <span data-ttu-id="a9900-442">Till exempel en av hello viktiga scenarier för Tabelltjänsten är toouse hello [Materialiserade vyn mönster](https://msdn.microsoft.com/library/azure/dn589782.aspx) från hello [kommandot frågan ansvar ansvarsfördelning (CQRS)](https://msdn.microsoft.com/library/azure/jj554200.aspx) mönster.</span><span class="sxs-lookup"><span data-stu-id="a9900-442">For example, one of hello key scenarios for Table Service is toouse hello [Materialized View Pattern](https://msdn.microsoft.com/library/azure/dn589782.aspx) from hello [Command Query Responsibility Segregation (CQRS)](https://msdn.microsoft.com/library/azure/jj554200.aspx) pattern.</span></span>  

### <a name="intra-partition-secondary-index-pattern"></a><span data-ttu-id="a9900-443">Intra-partition sekundärt index mönster</span><span class="sxs-lookup"><span data-stu-id="a9900-443">Intra-partition secondary index pattern</span></span>
<span data-ttu-id="a9900-444">Lagra flera kopior av varje enhet med hjälp av olika **RowKey** värden (i hello samma partition) tooenable snabba och effektiva sökningar och alternativa sorteringen sorterar med hjälp av olika **RowKey** värden.</span><span class="sxs-lookup"><span data-stu-id="a9900-444">Store multiple copies of each entity using different **RowKey** values (in hello same partition) tooenable fast and efficient lookups and alternate sort orders by using different **RowKey** values.</span></span> <span data-ttu-id="a9900-445">Uppdateringar mellan kopior kan vara konsekvent med EGT'S.</span><span class="sxs-lookup"><span data-stu-id="a9900-445">Updates between copies can be kept consistent using EGT's.</span></span>  

#### <a name="context-and-problem"></a><span data-ttu-id="a9900-446">Kontexten och problem</span><span class="sxs-lookup"><span data-stu-id="a9900-446">Context and problem</span></span>
<span data-ttu-id="a9900-447">Hej tabelltjänsten indexerar automatiskt enheter med hjälp av hello **PartitionKey** och **RowKey** värden.</span><span class="sxs-lookup"><span data-stu-id="a9900-447">hello Table service automatically indexes entities using hello **PartitionKey** and **RowKey** values.</span></span> <span data-ttu-id="a9900-448">Detta gör att en klient programmet tooretrieve en entitet som effektivt använder dessa värden.</span><span class="sxs-lookup"><span data-stu-id="a9900-448">This enables a client application tooretrieve an entity efficiently using these values.</span></span> <span data-ttu-id="a9900-449">Till exempel använder hello tabellstrukturen som visas nedan, ett klientprogram kan använda en punkt frågan tooretrieve en enskild medarbetare entitet med hjälp av hello avdelningsnamn och hello anställnings-id (hello **PartitionKey** och  **RowKey** värden).</span><span class="sxs-lookup"><span data-stu-id="a9900-449">For example, using hello table structure shown below, a client application can use a point query tooretrieve an individual employee entity by using hello department name and hello employee id (hello **PartitionKey** and **RowKey** values).</span></span> <span data-ttu-id="a9900-450">En klient kan också hämta entiteter sorterade efter anställnings-id inom varje avdelning.</span><span class="sxs-lookup"><span data-stu-id="a9900-450">A client can also retrieve entities sorted by employee id within each department.</span></span>

![][6]

<span data-ttu-id="a9900-451">Om du även vill toobe kan toofind en medarbetare entitet baserat på hello-värdet för en annan egenskap, t.ex e-postadress, måste du använda en mindre effektiv partition genomsökning toofind en matchning.</span><span class="sxs-lookup"><span data-stu-id="a9900-451">If you also want toobe able toofind an employee entity based on hello value of another property, such as email address, you must use a less efficient partition scan toofind a match.</span></span> <span data-ttu-id="a9900-452">Det beror på att hello tabelltjänsten inte ger sekundärindex.</span><span class="sxs-lookup"><span data-stu-id="a9900-452">This is because hello table service does not provide secondary indexes.</span></span> <span data-ttu-id="a9900-453">Dessutom finns inga alternativ toorequest en lista över anställda sorterade i en annan ordning än **RowKey** ordning.</span><span class="sxs-lookup"><span data-stu-id="a9900-453">In addition, there is no option toorequest a list of employees sorted in a different order than **RowKey** order.</span></span>  

#### <a name="solution"></a><span data-ttu-id="a9900-454">Lösning</span><span class="sxs-lookup"><span data-stu-id="a9900-454">Solution</span></span>
<span data-ttu-id="a9900-455">toowork runt hello bristande sekundärindex kan du lagra flera kopior av varje entitet med varje kopia med ett annat **RowKey** värde.</span><span class="sxs-lookup"><span data-stu-id="a9900-455">toowork around hello lack of secondary indexes, you can store multiple copies of each entity with each copy using a different **RowKey** value.</span></span> <span data-ttu-id="a9900-456">Om du sparar en entitet med hello-strukturer som visas nedan, kan du effektivt hämta medarbetare enheter baserat på e-postadress eller medarbetare id. Hej prefixvärden för hello **RowKey**, ”empid_” och ”email_” kan du tooquery för en medarbetare eller ett intervall med anställda med hjälp av en mängd e-postadresser eller medarbetare-ID: n.</span><span class="sxs-lookup"><span data-stu-id="a9900-456">If you store an entity with hello structures shown below, you can efficiently retrieve employee entities based on email address or employee id. hello prefix values for hello **RowKey**, "empid_" and "email_" enable you tooquery for a single employee or a range of employees by using a range of email addresses or employee ids.</span></span>  

![][7]

<span data-ttu-id="a9900-457">hello följande två filtervillkor (en slå upp av anställnings-id och en sökning efter av e-postadress) ange både punkt frågor:</span><span class="sxs-lookup"><span data-stu-id="a9900-457">hello following two filter criteria (one looking up by employee id and one looking up by email address) both specify point queries:</span></span>  

* <span data-ttu-id="a9900-458">$filter = (PartitionKey eq 'Sales') och (RowKey eq 'empid_000223')</span><span class="sxs-lookup"><span data-stu-id="a9900-458">$filter=(PartitionKey eq 'Sales') and (RowKey eq 'empid_000223')</span></span>  
* <span data-ttu-id="a9900-459">$filter = (PartitionKey eq 'Sales') och (RowKey eq 'email_jonesj@contoso.com')</span><span class="sxs-lookup"><span data-stu-id="a9900-459">$filter=(PartitionKey eq 'Sales') and (RowKey eq 'email_jonesj@contoso.com')</span></span>  

<span data-ttu-id="a9900-460">Om du frågar efter ett intervall med anställdas enheter du kan ange ett intervall i medarbetare id ordning eller ett intervall som är sorterad i e-postadress ordning genom att fråga om entiteter med hello rätt prefix i hello **RowKey**.</span><span class="sxs-lookup"><span data-stu-id="a9900-460">If you query for a range of employee entities, you can specify a range sorted in employee id order, or a range sorted in email address order by querying for entities with hello appropriate prefix in hello **RowKey**.</span></span>  

* <span data-ttu-id="a9900-461">toofind alla hello anställda på försäljningsavdelningen hello med medarbetare id i hello intervallet 000100 too000199 använder: $filter = (PartitionKey eq 'Sales') och (RowKey ge 'empid_000100') och (RowKey le 'empid_000199')</span><span class="sxs-lookup"><span data-stu-id="a9900-461">toofind all hello employees in hello Sales department with an employee id in hello range 000100 too000199 use: $filter=(PartitionKey eq 'Sales') and (RowKey ge 'empid_000100') and (RowKey le 'empid_000199')</span></span>  
* <span data-ttu-id="a9900-462">toofind alla hello anställda på försäljningsavdelningen hello med en e-postadress som börjar med hello bokstaven ”a” Använd: $filter = (PartitionKey eq 'Sales') och (RowKey ge 'email_a') och (RowKey lt 'email_b')</span><span class="sxs-lookup"><span data-stu-id="a9900-462">toofind all hello employees in hello Sales department with an email address starting with hello letter 'a' use: $filter=(PartitionKey eq 'Sales') and (RowKey ge 'email_a') and (RowKey lt 'email_b')</span></span>  
  
  <span data-ttu-id="a9900-463">Observera att hello filtersyntaxen används i hello exemplen ovan är från hello tabelltjänsten REST API för mer information finns i [fråga entiteter](http://msdn.microsoft.com/library/azure/dd179421.aspx).</span><span class="sxs-lookup"><span data-stu-id="a9900-463">Note that hello filter syntax used in hello examples above is from hello Table service REST API, for more information see [Query Entities](http://msdn.microsoft.com/library/azure/dd179421.aspx).</span></span>  

#### <a name="issues-and-considerations"></a><span data-ttu-id="a9900-464">Problem och överväganden</span><span class="sxs-lookup"><span data-stu-id="a9900-464">Issues and considerations</span></span>
<span data-ttu-id="a9900-465">Överväg att hello följande punkter när du bestämmer hur tooimplement detta mönster:</span><span class="sxs-lookup"><span data-stu-id="a9900-465">Consider hello following points when deciding how tooimplement this pattern:</span></span>  

* <span data-ttu-id="a9900-466">Table storage är relativt billig toouse så hello kostnad arbetet med att lagra dubblettdata inte får vara ett större problem.</span><span class="sxs-lookup"><span data-stu-id="a9900-466">Table storage is relatively cheap toouse so hello cost overhead of storing duplicate data should not be a major concern.</span></span> <span data-ttu-id="a9900-467">Du bör dock alltid utvärdera hello kostnaden av din design utifrån din förväntade lagringsbehov och bara lägga till dubbla entiteter toosupport hello frågor client-program körs.</span><span class="sxs-lookup"><span data-stu-id="a9900-467">However, you should always evaluate hello cost of your design based on your anticipated storage requirements and only add duplicate entities toosupport hello queries your client application will execute.</span></span>  
* <span data-ttu-id="a9900-468">Eftersom hello sekundärt index entiteter lagras i hello samma partition som hello ursprungliga enheter, bör du kontrollera att du inte överskrider hello skalbarhetsmål för en enskild partition.</span><span class="sxs-lookup"><span data-stu-id="a9900-468">Because hello secondary index entities are stored in hello same partition as hello original entities, you should ensure that you do not exceed hello scalability targets for an individual partition.</span></span>  
* <span data-ttu-id="a9900-469">Du kan behålla-dubbla enheterna överensstämmer med varandra med hjälp av EGTs tooupdate hello två kopior av hello enheten automatiskt.</span><span class="sxs-lookup"><span data-stu-id="a9900-469">You can keep your duplicate entities consistent with each other by using EGTs tooupdate hello two copies of hello entity atomically.</span></span> <span data-ttu-id="a9900-470">Detta innebär att du bör lagra alla kopior av en entitet i hello samma partition.</span><span class="sxs-lookup"><span data-stu-id="a9900-470">This implies that you should store all copies of an entity in hello same partition.</span></span> <span data-ttu-id="a9900-471">Mer information finns i avsnittet hello [med hjälp av entiteten gruppera transaktioner](#entity-group-transactions).</span><span class="sxs-lookup"><span data-stu-id="a9900-471">For more information, see hello section [Using Entity Group Transactions](#entity-group-transactions).</span></span>  
* <span data-ttu-id="a9900-472">hello-värde som används för hello **RowKey** måste vara unikt för varje entitet.</span><span class="sxs-lookup"><span data-stu-id="a9900-472">hello value used for hello **RowKey** must be unique for each entity.</span></span> <span data-ttu-id="a9900-473">Överväg att använda sammansatta nyckelvärden.</span><span class="sxs-lookup"><span data-stu-id="a9900-473">Consider using compound key values.</span></span>  
* <span data-ttu-id="a9900-474">Utfyllnad numeriska värden i hello **RowKey** (exempelvis hello anställnings-id 000223), aktiverar korrigera sortera och filtrera baserat på övre och nedre gränser.</span><span class="sxs-lookup"><span data-stu-id="a9900-474">Padding numeric values in hello **RowKey** (for example, hello employee id 000223), enables correct sorting and filtering based on upper and lower bounds.</span></span>  
* <span data-ttu-id="a9900-475">Du behöver inte nödvändigtvis tooduplicate alla hello egenskaperna för entiteten.</span><span class="sxs-lookup"><span data-stu-id="a9900-475">You do not necessarily need tooduplicate all hello properties of your entity.</span></span> <span data-ttu-id="a9900-476">Till exempel om hello frågor som hello uppslagsentiteter med hello e-post-adressen i hello **RowKey** behöver aldrig hello medarbetarens ålder, dessa enheter kan ha hello följande struktur:</span><span class="sxs-lookup"><span data-stu-id="a9900-476">For example, if hello queries that lookup hello entities using hello email address in hello **RowKey** never need hello employee's age, these entities could have hello following structure:</span></span>

![][8]

* <span data-ttu-id="a9900-477">Det är vanligtvis bättre toostore duplicerade data och se till att du kan hämta alla hello data som du behöver med en enda fråga, än toouse en fråga toolocate en entitet och en annan toolookup hello obligatoriska uppgifter.</span><span class="sxs-lookup"><span data-stu-id="a9900-477">It is typically better toostore duplicate data and ensure that you can retrieve all hello data you need with a single query, than toouse one query toolocate an entity and another toolookup hello required data.</span></span>  

#### <a name="when-toouse-this-pattern"></a><span data-ttu-id="a9900-478">När toouse det här mönstret</span><span class="sxs-lookup"><span data-stu-id="a9900-478">When toouse this pattern</span></span>
<span data-ttu-id="a9900-479">Använd det här mönstret när klientprogrammet måste tooretrieve enheter med hjälp av en mängd olika nycklar när klienten måste tooretrieve entiteter i olika sorteringsordningar, och där du kan identifiera varje entitet med olika unika värden.</span><span class="sxs-lookup"><span data-stu-id="a9900-479">Use this pattern when your client application needs tooretrieve entities using a variety of different keys, when your client needs tooretrieve entities in different sort orders, and where you can identify each entity using a variety of unique values.</span></span> <span data-ttu-id="a9900-480">Dock bör du se till att du inte överskrider hello partition skalbarhetsgränser när du utför entitet sökningar med olika hello **RowKey** värden.</span><span class="sxs-lookup"><span data-stu-id="a9900-480">However, you should be sure that you do not exceed hello partition scalability limits when you are performing entity lookups using hello different **RowKey** values.</span></span>  

#### <a name="related-patterns-and-guidance"></a><span data-ttu-id="a9900-481">Vägledning och relaterade mönster</span><span class="sxs-lookup"><span data-stu-id="a9900-481">Related patterns and guidance</span></span>
<span data-ttu-id="a9900-482">hello kan följande mönster och guider även vara relevanta när du implementerar det här mönstret:</span><span class="sxs-lookup"><span data-stu-id="a9900-482">hello following patterns and guidance may also be relevant when implementing this pattern:</span></span>  

* [<span data-ttu-id="a9900-483">Mellan sekundära Partitionsindex mönster</span><span class="sxs-lookup"><span data-stu-id="a9900-483">Inter-partition secondary index pattern</span></span>](#inter-partition-secondary-index-pattern)
* [<span data-ttu-id="a9900-484">Sammansatt nyckel mönster</span><span class="sxs-lookup"><span data-stu-id="a9900-484">Compound key pattern</span></span>](#compound-key-pattern)
* [<span data-ttu-id="a9900-485">Entiteten gruppera transaktioner</span><span class="sxs-lookup"><span data-stu-id="a9900-485">Entity Group Transactions</span></span>](#entity-group-transactions)
* [<span data-ttu-id="a9900-486">Arbeta med heterogena entitetstyper</span><span class="sxs-lookup"><span data-stu-id="a9900-486">Working with heterogeneous entity types</span></span>](#working-with-heterogeneous-entity-types)

### <a name="inter-partition-secondary-index-pattern"></a><span data-ttu-id="a9900-487">Mellan sekundära Partitionsindex mönster</span><span class="sxs-lookup"><span data-stu-id="a9900-487">Inter-partition secondary index pattern</span></span>
<span data-ttu-id="a9900-488">Lagra flera kopior av varje enhet med hjälp av olika **RowKey** värden i olika partitioner eller i separata tabeller tooenable snabba och effektiva sökningar och alternativa sorteringsordningen genom att använda olika **RowKey**värden.</span><span class="sxs-lookup"><span data-stu-id="a9900-488">Store multiple copies of each entity using different **RowKey** values in separate partitions or in separate tables tooenable fast and efficient lookups and alternate sort orders by using different **RowKey** values.</span></span>  

#### <a name="context-and-problem"></a><span data-ttu-id="a9900-489">Kontexten och problem</span><span class="sxs-lookup"><span data-stu-id="a9900-489">Context and problem</span></span>
<span data-ttu-id="a9900-490">Hej tabelltjänsten indexerar automatiskt enheter med hjälp av hello **PartitionKey** och **RowKey** värden.</span><span class="sxs-lookup"><span data-stu-id="a9900-490">hello Table service automatically indexes entities using hello **PartitionKey** and **RowKey** values.</span></span> <span data-ttu-id="a9900-491">Detta gör att en klient programmet tooretrieve en entitet som effektivt använder dessa värden.</span><span class="sxs-lookup"><span data-stu-id="a9900-491">This enables a client application tooretrieve an entity efficiently using these values.</span></span> <span data-ttu-id="a9900-492">Till exempel använder hello tabellstrukturen som visas nedan, ett klientprogram kan använda en punkt frågan tooretrieve en enskild medarbetare entitet med hjälp av hello avdelningsnamn och hello anställnings-id (hello **PartitionKey** och  **RowKey** värden).</span><span class="sxs-lookup"><span data-stu-id="a9900-492">For example, using hello table structure shown below, a client application can use a point query tooretrieve an individual employee entity by using hello department name and hello employee id (hello **PartitionKey** and **RowKey** values).</span></span> <span data-ttu-id="a9900-493">En klient kan också hämta entiteter sorterade efter anställnings-id inom varje avdelning.</span><span class="sxs-lookup"><span data-stu-id="a9900-493">A client can also retrieve entities sorted by employee id within each department.</span></span>  

![][9]

<span data-ttu-id="a9900-494">Om du även vill toobe kan toofind en medarbetare entitet baserat på hello-värdet för en annan egenskap, t.ex e-postadress, måste du använda en mindre effektiv partition genomsökning toofind en matchning.</span><span class="sxs-lookup"><span data-stu-id="a9900-494">If you also want toobe able toofind an employee entity based on hello value of another property, such as email address, you must use a less efficient partition scan toofind a match.</span></span> <span data-ttu-id="a9900-495">Det beror på att hello tabelltjänsten inte ger sekundärindex.</span><span class="sxs-lookup"><span data-stu-id="a9900-495">This is because hello table service does not provide secondary indexes.</span></span> <span data-ttu-id="a9900-496">Dessutom finns inga alternativ toorequest en lista över anställda sorterade i en annan ordning än **RowKey** ordning.</span><span class="sxs-lookup"><span data-stu-id="a9900-496">In addition, there is no option toorequest a list of employees sorted in a different order than **RowKey** order.</span></span>  

<span data-ttu-id="a9900-497">Du förutse en mycket stor volym med transaktioner mot dessa enheter och vill toominimize hello risken för hello tabelltjänsten begränsning av klienten.</span><span class="sxs-lookup"><span data-stu-id="a9900-497">You are anticipating a very high volume of transactions against these entities and want toominimize hello risk of hello Table service throttling your client.</span></span>  

#### <a name="solution"></a><span data-ttu-id="a9900-498">Lösning</span><span class="sxs-lookup"><span data-stu-id="a9900-498">Solution</span></span>
<span data-ttu-id="a9900-499">toowork runt hello bristande sekundärindex kan du lagra flera kopior av varje entitet med varje kopia med hjälp av olika **PartitionKey** och **RowKey** värden.</span><span class="sxs-lookup"><span data-stu-id="a9900-499">toowork around hello lack of secondary indexes, you can store multiple copies of each entity with each copy using different **PartitionKey** and **RowKey** values.</span></span> <span data-ttu-id="a9900-500">Om du sparar en entitet med hello-strukturer som visas nedan, kan du effektivt hämta medarbetare enheter baserat på e-postadress eller medarbetare id. Hej prefixvärden för hello **PartitionKey**, ”empid_” och ”email_” kan du tooidentify som index som du vill använda toouse för en fråga.</span><span class="sxs-lookup"><span data-stu-id="a9900-500">If you store an entity with hello structures shown below, you can efficiently retrieve employee entities based on email address or employee id. hello prefix values for hello **PartitionKey**, "empid_" and "email_" enable you tooidentify which index you want toouse for a query.</span></span>  

![][10]

<span data-ttu-id="a9900-501">hello följande två filtervillkor (en slå upp av anställnings-id och en sökning efter av e-postadress) ange både punkt frågor:</span><span class="sxs-lookup"><span data-stu-id="a9900-501">hello following two filter criteria (one looking up by employee id and one looking up by email address) both specify point queries:</span></span>  

* <span data-ttu-id="a9900-502">$filter = (PartitionKey eq ' empid_Sales') och (RowKey eq '000223')</span><span class="sxs-lookup"><span data-stu-id="a9900-502">$filter=(PartitionKey eq 'empid_Sales') and (RowKey eq '000223')</span></span>
* <span data-ttu-id="a9900-503">$filter = (PartitionKey eq ' email_Sales') och (RowKey eq 'jonesj@contoso.com')</span><span class="sxs-lookup"><span data-stu-id="a9900-503">$filter=(PartitionKey eq 'email_Sales') and (RowKey eq 'jonesj@contoso.com')</span></span>  

<span data-ttu-id="a9900-504">Om du frågar efter ett intervall med anställdas enheter du kan ange ett intervall i medarbetare id ordning eller ett intervall som är sorterad i e-postadress ordning genom att fråga om entiteter med hello rätt prefix i hello **RowKey**.</span><span class="sxs-lookup"><span data-stu-id="a9900-504">If you query for a range of employee entities, you can specify a range sorted in employee id order, or a range sorted in email address order by querying for entities with hello appropriate prefix in hello **RowKey**.</span></span>  

* <span data-ttu-id="a9900-505">toofind alla hello anställda på hello försäljningsavdelningen med medarbetare id i hello intervallet **000100** för**000199** sorteras medarbetare id ordning används: $filter = (PartitionKey eq ' empid_Sales') och (RowKey ge ' 000100') och (RowKey le '000199')</span><span class="sxs-lookup"><span data-stu-id="a9900-505">toofind all hello employees in hello Sales department with an employee id in hello range **000100** too**000199** sorted in employee id order use: $filter=(PartitionKey eq 'empid_Sales') and (RowKey ge '000100') and (RowKey le '000199')</span></span>  
* <span data-ttu-id="a9900-506">toofind alla hello medarbetare i hello försäljningsavdelningen med en e-postadress som börjar med ”a” i e-postadress ordning används: $filter = (PartitionKey eq ' email_Sales') och (RowKey ge ”a”) och (RowKey lt ”b”)</span><span class="sxs-lookup"><span data-stu-id="a9900-506">toofind all hello employees in hello Sales department with an email address that starts with 'a' sorted in email address order use: $filter=(PartitionKey eq 'email_Sales') and (RowKey ge 'a') and (RowKey lt 'b')</span></span>  

<span data-ttu-id="a9900-507">Observera att hello filtersyntaxen används i hello exemplen ovan är från hello tabelltjänsten REST API för mer information finns i [fråga entiteter](http://msdn.microsoft.com/library/azure/dd179421.aspx).</span><span class="sxs-lookup"><span data-stu-id="a9900-507">Note that hello filter syntax used in hello examples above is from hello Table service REST API, for more information see [Query Entities](http://msdn.microsoft.com/library/azure/dd179421.aspx).</span></span>  

#### <a name="issues-and-considerations"></a><span data-ttu-id="a9900-508">Problem och överväganden</span><span class="sxs-lookup"><span data-stu-id="a9900-508">Issues and considerations</span></span>
<span data-ttu-id="a9900-509">Överväg att hello följande punkter när du bestämmer hur tooimplement detta mönster:</span><span class="sxs-lookup"><span data-stu-id="a9900-509">Consider hello following points when deciding how tooimplement this pattern:</span></span>  

* <span data-ttu-id="a9900-510">Du kan behålla din dubbla entiteter överensstämmelse med varandra med hjälp av hello [överensstämmelse transaktioner mönster](#eventually-consistent-transactions-pattern) toomaintain hello primära och sekundära index entiteter.</span><span class="sxs-lookup"><span data-stu-id="a9900-510">You can keep your duplicate entities eventually consistent with each other by using hello [Eventually consistent transactions pattern](#eventually-consistent-transactions-pattern) toomaintain hello primary and secondary index entities.</span></span>  
* <span data-ttu-id="a9900-511">Table storage är relativt billig toouse så hello kostnad arbetet med att lagra dubblettdata inte får vara ett större problem.</span><span class="sxs-lookup"><span data-stu-id="a9900-511">Table storage is relatively cheap toouse so hello cost overhead of storing duplicate data should not be a major concern.</span></span> <span data-ttu-id="a9900-512">Du bör dock alltid utvärdera hello kostnaden av din design utifrån din förväntade lagringsbehov och bara lägga till dubbla entiteter toosupport hello frågor client-program körs.</span><span class="sxs-lookup"><span data-stu-id="a9900-512">However, you should always evaluate hello cost of your design based on your anticipated storage requirements and only add duplicate entities toosupport hello queries your client application will execute.</span></span>  
* <span data-ttu-id="a9900-513">hello-värde som används för hello **RowKey** måste vara unikt för varje entitet.</span><span class="sxs-lookup"><span data-stu-id="a9900-513">hello value used for hello **RowKey** must be unique for each entity.</span></span> <span data-ttu-id="a9900-514">Överväg att använda sammansatta nyckelvärden.</span><span class="sxs-lookup"><span data-stu-id="a9900-514">Consider using compound key values.</span></span>  
* <span data-ttu-id="a9900-515">Utfyllnad numeriska värden i hello **RowKey** (exempelvis hello anställnings-id 000223), aktiverar korrigera sortera och filtrera baserat på övre och nedre gränser.</span><span class="sxs-lookup"><span data-stu-id="a9900-515">Padding numeric values in hello **RowKey** (for example, hello employee id 000223), enables correct sorting and filtering based on upper and lower bounds.</span></span>  
* <span data-ttu-id="a9900-516">Du behöver inte nödvändigtvis tooduplicate alla hello egenskaperna för entiteten.</span><span class="sxs-lookup"><span data-stu-id="a9900-516">You do not necessarily need tooduplicate all hello properties of your entity.</span></span> <span data-ttu-id="a9900-517">Till exempel om hello frågor som hello uppslagsentiteter med hello e-post-adressen i hello **RowKey** behöver aldrig hello medarbetarens ålder, dessa enheter kan ha hello följande struktur:</span><span class="sxs-lookup"><span data-stu-id="a9900-517">For example, if hello queries that lookup hello entities using hello email address in hello **RowKey** never need hello employee's age, these entities could have hello following structure:</span></span>
  
  ![][11]
* <span data-ttu-id="a9900-518">Det är vanligtvis bättre toostore duplicerade data och se till att du kan hämta alla hello-data som du behöver med en enskild fråga än toouse en fråga toolocate en entitet med hello sekundärt index och en annan toolookup hello nödvändiga data i hello primärindex.</span><span class="sxs-lookup"><span data-stu-id="a9900-518">It is typically better toostore duplicate data and ensure that you can retrieve all hello data you need with a single query than toouse one query toolocate an entity using hello secondary index and another toolookup hello required data in hello primary index.</span></span>  

#### <a name="when-toouse-this-pattern"></a><span data-ttu-id="a9900-519">När toouse det här mönstret</span><span class="sxs-lookup"><span data-stu-id="a9900-519">When toouse this pattern</span></span>
<span data-ttu-id="a9900-520">Använd det här mönstret när klientprogrammet måste tooretrieve enheter med hjälp av en mängd olika nycklar när klienten måste tooretrieve entiteter i olika sorteringsordningar, och där du kan identifiera varje entitet med olika unika värden.</span><span class="sxs-lookup"><span data-stu-id="a9900-520">Use this pattern when your client application needs tooretrieve entities using a variety of different keys, when your client needs tooretrieve entities in different sort orders, and where you can identify each entity using a variety of unique values.</span></span> <span data-ttu-id="a9900-521">Använd det här mönstret när du vill tooavoid överstiger hello partition skalbarhetsgränser när du utför entitet sökningar med olika hello **RowKey** värden.</span><span class="sxs-lookup"><span data-stu-id="a9900-521">Use this pattern when you want tooavoid exceeding hello partition scalability limits when you are performing entity lookups using hello different **RowKey** values.</span></span>  

#### <a name="related-patterns-and-guidance"></a><span data-ttu-id="a9900-522">Vägledning och relaterade mönster</span><span class="sxs-lookup"><span data-stu-id="a9900-522">Related patterns and guidance</span></span>
<span data-ttu-id="a9900-523">hello kan följande mönster och guider även vara relevanta när du implementerar det här mönstret:</span><span class="sxs-lookup"><span data-stu-id="a9900-523">hello following patterns and guidance may also be relevant when implementing this pattern:</span></span>  

* [<span data-ttu-id="a9900-524">Mönster för överensstämmelse transaktioner</span><span class="sxs-lookup"><span data-stu-id="a9900-524">Eventually consistent transactions pattern</span></span>](#eventually-consistent-transactions-pattern)  
* [<span data-ttu-id="a9900-525">Intra-partition sekundärt index mönster</span><span class="sxs-lookup"><span data-stu-id="a9900-525">Intra-partition secondary index pattern</span></span>](#intra-partition-secondary-index-pattern)  
* [<span data-ttu-id="a9900-526">Sammansatt nyckel mönster</span><span class="sxs-lookup"><span data-stu-id="a9900-526">Compound key pattern</span></span>](#compound-key-pattern)  
* [<span data-ttu-id="a9900-527">Entiteten gruppera transaktioner</span><span class="sxs-lookup"><span data-stu-id="a9900-527">Entity Group Transactions</span></span>](#entity-group-transactions)  
* [<span data-ttu-id="a9900-528">Arbeta med heterogena entitetstyper</span><span class="sxs-lookup"><span data-stu-id="a9900-528">Working with heterogeneous entity types</span></span>](#working-with-heterogeneous-entity-types)  

### <a name="eventually-consistent-transactions-pattern"></a><span data-ttu-id="a9900-529">Mönster för överensstämmelse transaktioner</span><span class="sxs-lookup"><span data-stu-id="a9900-529">Eventually consistent transactions pattern</span></span>
<span data-ttu-id="a9900-530">Aktivera överensstämmelse beteende mellan partitionsgränser eller lagring system gränser med hjälp av Azure köer.</span><span class="sxs-lookup"><span data-stu-id="a9900-530">Enable eventually consistent behavior across partition boundaries or storage system boundaries by using Azure queues.</span></span>  

#### <a name="context-and-problem"></a><span data-ttu-id="a9900-531">Kontexten och problem</span><span class="sxs-lookup"><span data-stu-id="a9900-531">Context and problem</span></span>
<span data-ttu-id="a9900-532">EGTs aktivera atomiska transaktioner över flera enheter som delar hello samma partitionsnyckel.</span><span class="sxs-lookup"><span data-stu-id="a9900-532">EGTs enable atomic transactions across multiple entities that share hello same partition key.</span></span> <span data-ttu-id="a9900-533">Du kan bestämma toostore entiteter som har konsekvenskontroll krav i separata partitioner eller i ett separat lagringssystem för prestanda och skalbarhet: du kan inte använda EGTs toomaintain konsekvens i ett sådant scenario.</span><span class="sxs-lookup"><span data-stu-id="a9900-533">For performance and scalability reasons, you might decide toostore entities that have consistency requirements in separate partitions or in a separate storage system: in such a scenario, you cannot use EGTs toomaintain consistency.</span></span> <span data-ttu-id="a9900-534">Du kan till exempel ha en krav toomaintain slutliga konsekvensen mellan:</span><span class="sxs-lookup"><span data-stu-id="a9900-534">For example, you might have a requirement toomaintain eventual consistency between:</span></span>  

* <span data-ttu-id="a9900-535">Entiteter som lagras i två olika partitioner i hello samma tabell, i olika tabeller i i olika lagringskonton.</span><span class="sxs-lookup"><span data-stu-id="a9900-535">Entities stored in two different partitions in hello same table, in different tables, in in different storage accounts.</span></span>  
* <span data-ttu-id="a9900-536">En entitet som lagras i hello tabelltjänsten och en blob som lagras i hello Blob-tjänsten.</span><span class="sxs-lookup"><span data-stu-id="a9900-536">An entity stored in hello Table service and a blob stored in hello Blob service.</span></span>  
* <span data-ttu-id="a9900-537">En entitet som lagras i tabelltjänsten hello och en fil i ett filsystem.</span><span class="sxs-lookup"><span data-stu-id="a9900-537">An entity stored in hello Table service and a file in a file system.</span></span>  
* <span data-ttu-id="a9900-538">En entitet lagra i hello tabelltjänsten har indexerat med hello Azure Search-tjänsten.</span><span class="sxs-lookup"><span data-stu-id="a9900-538">An entity store in hello Table service yet indexed using hello Azure Search service.</span></span>  

#### <a name="solution"></a><span data-ttu-id="a9900-539">Lösning</span><span class="sxs-lookup"><span data-stu-id="a9900-539">Solution</span></span>
<span data-ttu-id="a9900-540">Du kan implementera en lösning som ger slutliga konsekvensen mellan två eller flera partitioner lagringssystem med hjälp av Azure köer.</span><span class="sxs-lookup"><span data-stu-id="a9900-540">By using Azure queues, you can implement a solution that delivers eventual consistency across two or more partitions or storage systems.</span></span>
<span data-ttu-id="a9900-541">tooillustrate detta hanterar, förutsätter att du har ett krav toobe kan tooarchive gamla medarbetare-enheter.</span><span class="sxs-lookup"><span data-stu-id="a9900-541">tooillustrate this approach, assume you have a requirement toobe able tooarchive old employee entities.</span></span> <span data-ttu-id="a9900-542">Den gamla medarbetare enheter frågas sällan och bör undantas från alla aktiviteter som handlar om aktuella anställda.</span><span class="sxs-lookup"><span data-stu-id="a9900-542">Old employee entities are rarely queried and should be excluded from any activities that deal with current employees.</span></span> <span data-ttu-id="a9900-543">tooimplement detta krav som du lagrar aktiva medarbetare i hello **aktuella** tabell och tidigare anställda i hello **Arkiv** tabell.</span><span class="sxs-lookup"><span data-stu-id="a9900-543">tooimplement this requirement you store active employees in hello **Current** table and old employees in hello **Archive** table.</span></span> <span data-ttu-id="a9900-544">Arkivering av medarbetaren kräver toodelete hello entitet från hello **aktuella** tabell och lägga till hello entiteten toohello **Arkiv** , men du kan inte använda en EGT tooperform dessa två åtgärder.</span><span class="sxs-lookup"><span data-stu-id="a9900-544">Archiving an employee requires you toodelete hello entity from hello **Current** table and add hello entity toohello **Archive** table, but you cannot use an EGT tooperform these two operations.</span></span> <span data-ttu-id="a9900-545">tooavoid hello risk att ett fel orsakar en entitet tooappear i båda eller inget tabeller, hello arkivåtgärden måste vara överensstämmelse.</span><span class="sxs-lookup"><span data-stu-id="a9900-545">tooavoid hello risk that a failure causes an entity tooappear in both or neither tables, hello archive operation must be eventually consistent.</span></span> <span data-ttu-id="a9900-546">hello beskriver följande sekvensdiagram hello steg i den här åtgärden.</span><span class="sxs-lookup"><span data-stu-id="a9900-546">hello following sequence diagram outlines hello steps in this operation.</span></span> <span data-ttu-id="a9900-547">Mer information ges för undantag sökvägar i hello texten nedan.</span><span class="sxs-lookup"><span data-stu-id="a9900-547">More detail is provided for exception paths in hello text following.</span></span>  

![][12]

<span data-ttu-id="a9900-548">En klient initierar hello Arkiv igen genom att placera ett meddelande på en Azure-kö, i det här exemplet tooarchive anställd #456.</span><span class="sxs-lookup"><span data-stu-id="a9900-548">A client initiates hello archive operation by placing a message on an Azure queue, in this example tooarchive employee #456.</span></span> <span data-ttu-id="a9900-549">En arbetsroll avsöker hello kön för nya meddelanden. När den hittar en läser hello-meddelande och lämnar en dold kopia på hello kön.</span><span class="sxs-lookup"><span data-stu-id="a9900-549">A worker role polls hello queue for new messages; when it finds one, it reads hello message and leaves a hidden copy on hello queue.</span></span> <span data-ttu-id="a9900-550">Hej arbetsrollen bredvid hämtar en kopia av hello entitet från hello **aktuella** tabell, infogar en kopia i hello **Arkiv** tabell och borttagningar hello ursprungliga från hello **aktuella**tabell.</span><span class="sxs-lookup"><span data-stu-id="a9900-550">hello worker role next fetches a copy of hello entity from hello **Current** table, inserts a copy in hello **Archive** table, and then deletes hello original from hello **Current** table.</span></span> <span data-ttu-id="a9900-551">Slutligen, om det inte fanns några fel från hello föregående steg, hello worker-rollen tar bort dolda hello-meddelande från hello kön.</span><span class="sxs-lookup"><span data-stu-id="a9900-551">Finally, if there were no errors from hello previous steps, hello worker role deletes hello hidden message from hello queue.</span></span>  

<span data-ttu-id="a9900-552">I det här exemplet steg 4 infogas hello medarbetare hello **Arkiv** tabell.</span><span class="sxs-lookup"><span data-stu-id="a9900-552">In this example, step 4 inserts hello employee into hello **Archive** table.</span></span> <span data-ttu-id="a9900-553">Det gick att lägga till hello medarbetare tooa blob i hello Blob-tjänsten eller en fil i ett filsystem.</span><span class="sxs-lookup"><span data-stu-id="a9900-553">It could add hello employee tooa blob in hello Blob service or a file in a file system.</span></span>  

#### <a name="recovering-from-failures"></a><span data-ttu-id="a9900-554">Återställa från fel</span><span class="sxs-lookup"><span data-stu-id="a9900-554">Recovering from failures</span></span>
<span data-ttu-id="a9900-555">Det är viktigt som hello åtgärder i steg **4** och **5** måste vara *idempotent* om hello arbetsrollen behöver toorestart hello Arkiv igen.</span><span class="sxs-lookup"><span data-stu-id="a9900-555">It is important that hello operations in steps **4** and **5** must be *idempotent* in case hello worker role needs toorestart hello archive operation.</span></span> <span data-ttu-id="a9900-556">Om du använder hello tabelltjänsten för steget **4** bör du använda en ”infoga eller ersätta” åtgärd; för steg **5** bör du använda en ”ta bort om finns” åtgärden i hello klientbiblioteket som du använder.</span><span class="sxs-lookup"><span data-stu-id="a9900-556">If you are using hello Table service, for step **4** you should use an "insert or replace" operation; for step **5** you should use a "delete if exists" operation in hello client library you are using.</span></span> <span data-ttu-id="a9900-557">Om du använder en annan lagringssystemet, måste du använda en lämplig idempotent-åtgärd.</span><span class="sxs-lookup"><span data-stu-id="a9900-557">If you are using another storage system, you must use an appropriate idempotent operation.</span></span>  

<span data-ttu-id="a9900-558">Om hello arbetsrollen slutförs aldrig steg **6**, sedan efter en tidsgräns hello-meddelande dyker upp i hello kön är klara för hello worker-rollen tootry tooreprocess den.</span><span class="sxs-lookup"><span data-stu-id="a9900-558">If hello worker role never completes step **6**, then after a timeout hello message reappears on hello queue ready for hello worker role tootry tooreprocess it.</span></span> <span data-ttu-id="a9900-559">hello worker-rollen kan kontrollera hur många gånger meddelandet i kön hello har lästs och eventuellt Flagga det är ett ”skadligt” meddelande för undersökningen genom att skicka den tooa separata kön.</span><span class="sxs-lookup"><span data-stu-id="a9900-559">hello worker role can check how many times a message on hello queue has been read and, if necessary, flag it is a "poison" message for investigation by sending it tooa separate queue.</span></span> <span data-ttu-id="a9900-560">Mer information om läsning Kömeddelanden och kontrollerar hello har status Created antal, se [få meddelanden](https://msdn.microsoft.com/library/azure/dd179474.aspx).</span><span class="sxs-lookup"><span data-stu-id="a9900-560">For more information about reading queue messages and checking hello dequeue count, see [Get Messages](https://msdn.microsoft.com/library/azure/dd179474.aspx).</span></span>  

<span data-ttu-id="a9900-561">Fel från hello tabell och kön services är tillfälligt fel och ditt klientprogram ska innehålla lämplig försök logik toohandle dem.</span><span class="sxs-lookup"><span data-stu-id="a9900-561">Some errors from hello Table and Queue services are transient errors, and your client application should include suitable retry logic toohandle them.</span></span>  

#### <a name="issues-and-considerations"></a><span data-ttu-id="a9900-562">Problem och överväganden</span><span class="sxs-lookup"><span data-stu-id="a9900-562">Issues and considerations</span></span>
<span data-ttu-id="a9900-563">Överväg att hello följande punkter när du bestämmer hur tooimplement detta mönster:</span><span class="sxs-lookup"><span data-stu-id="a9900-563">Consider hello following points when deciding how tooimplement this pattern:</span></span>  

* <span data-ttu-id="a9900-564">Den här lösningen ger inte för transaktionsisoleringen.</span><span class="sxs-lookup"><span data-stu-id="a9900-564">This solution does not provide for transaction isolation.</span></span> <span data-ttu-id="a9900-565">En klient kan till exempel läsa hello **aktuella** och **Arkiv** tabeller när hello arbetsrollen mellan stegen **4** och **5**, och se en Inkonsekvent visning av hello data.</span><span class="sxs-lookup"><span data-stu-id="a9900-565">For example, a client could read hello **Current** and **Archive** tables when hello worker role was between steps **4** and **5**, and see an inconsistent view of hello data.</span></span> <span data-ttu-id="a9900-566">Observera att hello data blir konsekvent förr eller senare.</span><span class="sxs-lookup"><span data-stu-id="a9900-566">Note that hello data will be consistent eventually.</span></span>  
* <span data-ttu-id="a9900-567">Du måste vara säker på att steg 4 och 5 är idempotent i ordning tooensure slutliga konsekvensen.</span><span class="sxs-lookup"><span data-stu-id="a9900-567">You must be sure that steps 4 and 5 are idempotent in order tooensure eventual consistency.</span></span>  
* <span data-ttu-id="a9900-568">Du kan skala hello lösning med flera köer och worker rollinstanser.</span><span class="sxs-lookup"><span data-stu-id="a9900-568">You can scale hello solution by using multiple queues and worker role instances.</span></span>  

#### <a name="when-toouse-this-pattern"></a><span data-ttu-id="a9900-569">När toouse det här mönstret</span><span class="sxs-lookup"><span data-stu-id="a9900-569">When toouse this pattern</span></span>
<span data-ttu-id="a9900-570">Använd det här mönstret när du vill tooguarantee slutliga konsekvensen mellan enheter som finns i olika partitioner eller tabeller.</span><span class="sxs-lookup"><span data-stu-id="a9900-570">Use this pattern when you want tooguarantee eventual consistency between entities that exist in different partitions or tables.</span></span> <span data-ttu-id="a9900-571">Du kan utöka det här mönstret tooensure slutliga konsekvensen för åtgärder över hello tabelltjänsten och hello Blob-tjänsten och andra Azure Storage-datakällor, till exempel databasen eller hello-filsystem.</span><span class="sxs-lookup"><span data-stu-id="a9900-571">You can extend this pattern tooensure eventual consistency for operations across hello Table service and hello Blob service and other non-Azure Storage data sources such as database or hello file system.</span></span>  

#### <a name="related-patterns-and-guidance"></a><span data-ttu-id="a9900-572">Vägledning och relaterade mönster</span><span class="sxs-lookup"><span data-stu-id="a9900-572">Related patterns and guidance</span></span>
<span data-ttu-id="a9900-573">hello kan följande mönster och guider även vara relevanta när du implementerar det här mönstret:</span><span class="sxs-lookup"><span data-stu-id="a9900-573">hello following patterns and guidance may also be relevant when implementing this pattern:</span></span>  

* [<span data-ttu-id="a9900-574">Entiteten gruppera transaktioner</span><span class="sxs-lookup"><span data-stu-id="a9900-574">Entity Group Transactions</span></span>](#entity-group-transactions)  
* [<span data-ttu-id="a9900-575">Merge eller ersätta</span><span class="sxs-lookup"><span data-stu-id="a9900-575">Merge or replace</span></span>](#merge-or-replace)  

> [!NOTE]
> <span data-ttu-id="a9900-576">Om transaktionsisoleringen är viktiga tooyour lösning, bör du designar dina tabeller tooenable du toouse EGTs.</span><span class="sxs-lookup"><span data-stu-id="a9900-576">If transaction isolation is important tooyour solution, you should consider redesigning your tables tooenable you toouse EGTs.</span></span>  
> 
> 

### <a name="index-entities-pattern"></a><span data-ttu-id="a9900-577">Index entiteter mönster</span><span class="sxs-lookup"><span data-stu-id="a9900-577">Index Entities Pattern</span></span>
<span data-ttu-id="a9900-578">Underhålla entiteter tooenable effektiva sökningar som returnerar en lista över enheter.</span><span class="sxs-lookup"><span data-stu-id="a9900-578">Maintain index entities tooenable efficient searches that return lists of entities.</span></span>  

#### <a name="context-and-problem"></a><span data-ttu-id="a9900-579">Kontexten och problem</span><span class="sxs-lookup"><span data-stu-id="a9900-579">Context and problem</span></span>
<span data-ttu-id="a9900-580">Hej tabelltjänsten indexerar automatiskt enheter med hjälp av hello **PartitionKey** och **RowKey** värden.</span><span class="sxs-lookup"><span data-stu-id="a9900-580">hello Table service automatically indexes entities using hello **PartitionKey** and **RowKey** values.</span></span> <span data-ttu-id="a9900-581">Detta gör att en klient programmet tooretrieve en entitet som effektivt med en punkt-fråga.</span><span class="sxs-lookup"><span data-stu-id="a9900-581">This enables a client application tooretrieve an entity efficiently using a point query.</span></span> <span data-ttu-id="a9900-582">Till exempel använder hello tabellstrukturen som visas nedan, ett klientprogram enkelt kan hämta en enskild medarbetare entitet med hjälp av hello avdelningsnamn och hello anställnings-id (hello **PartitionKey** och **RowKey** ).</span><span class="sxs-lookup"><span data-stu-id="a9900-582">For example, using hello table structure shown below, a client application can efficiently retrieve an individual employee entity by using hello department name and hello employee id (hello **PartitionKey** and **RowKey**).</span></span>  

![][13]

<span data-ttu-id="a9900-583">Om du vill använda toobe kan tooretrieve en lista över anställdas enheter baserat på hello värdet för en annan icke-unikt egenskap, till exempel efternamn, måste du använda en mindre effektiv partition skanna toofind matchar snarare än att använda ett index toolook dem upp direkt.</span><span class="sxs-lookup"><span data-stu-id="a9900-583">If you also want toobe able tooretrieve a list of employee entities based on hello value of another non-unique property, such as their last name, you must use a less efficient partition scan toofind matches rather than using an index toolook them up directly.</span></span> <span data-ttu-id="a9900-584">Det beror på att hello tabelltjänsten inte ger sekundärindex.</span><span class="sxs-lookup"><span data-stu-id="a9900-584">This is because hello table service does not provide secondary indexes.</span></span>  

#### <a name="solution"></a><span data-ttu-id="a9900-585">Lösning</span><span class="sxs-lookup"><span data-stu-id="a9900-585">Solution</span></span>
<span data-ttu-id="a9900-586">tooenable sökning efter efternamn med hello entitet struktur som visas ovan, måste du upprätthålla en lista över medarbetare-ID: n.</span><span class="sxs-lookup"><span data-stu-id="a9900-586">tooenable lookup by last name with hello entity structure shown above, you must maintain lists of employee ids.</span></span> <span data-ttu-id="a9900-587">Om du vill tooretrieve hello medarbetare entiteter med ett visst efternamn, till exempel Karlsson, måste du först lokalisera hello lista över medarbetare-ID för anställda med Karlsson som efternamn och hämta anställdas enheter.</span><span class="sxs-lookup"><span data-stu-id="a9900-587">If you want tooretrieve hello employee entities with a particular last name, such as Jones, you must first locate hello list of employee ids for employees with Jones as their last name, and then retrieve those employee entities.</span></span> <span data-ttu-id="a9900-588">Det finns tre huvudsakliga alternativ för att lagra hello listor över medarbetare-ID: n:</span><span class="sxs-lookup"><span data-stu-id="a9900-588">There are three main options for storing hello lists of employee ids:</span></span>  

* <span data-ttu-id="a9900-589">Använda blob storage.</span><span class="sxs-lookup"><span data-stu-id="a9900-589">Use blob storage.</span></span>  
* <span data-ttu-id="a9900-590">Skapa index entiteter i hello samma partition som hello medarbetare enheter.</span><span class="sxs-lookup"><span data-stu-id="a9900-590">Create index entities in hello same partition as hello employee entities.</span></span>  
* <span data-ttu-id="a9900-591">Skapa index entiteter i en separat partition eller tabellen.</span><span class="sxs-lookup"><span data-stu-id="a9900-591">Create index entities in a separate partition or table.</span></span>  

<span data-ttu-id="a9900-592"><u>Alternativ #1: Använda blob storage</u></span><span class="sxs-lookup"><span data-stu-id="a9900-592"><u>Option #1: Use blob storage</u></span></span>  

<span data-ttu-id="a9900-593">För hello första alternativet som, du skapar en blob för varje unik efternamn och i varje blobstore en lista över hello **PartitionKey** (avdelning) och **RowKey** (anställnings-id) värden för medarbetare som har det senaste Namn.</span><span class="sxs-lookup"><span data-stu-id="a9900-593">For hello first option, you create a blob for every unique last name, and in each blob store a list of hello **PartitionKey** (department) and **RowKey** (employee id) values for employees that have that last name.</span></span> <span data-ttu-id="a9900-594">När du lägger till eller ta bort en medarbetare bör du kontrollera att hello innehållet i hello relevanta blob är överensstämmelse med hello medarbetare entiteter.</span><span class="sxs-lookup"><span data-stu-id="a9900-594">When you add or delete an employee you should ensure that hello content of hello relevant blob is eventually consistent with hello employee entities.</span></span>  

<span data-ttu-id="a9900-595"><u>Alternativ #2:</u> skapa index entiteter i hello samma partition</span><span class="sxs-lookup"><span data-stu-id="a9900-595"><u>Option #2:</u> Create index entities in hello same partition</span></span>  

<span data-ttu-id="a9900-596">För hello andra alternativet, använder du index entiteter som lagrar hello följande data:</span><span class="sxs-lookup"><span data-stu-id="a9900-596">For hello second option, use index entities that store hello following data:</span></span>  

![][14]

<span data-ttu-id="a9900-597">Hej **EmployeeIDs** egenskapen innehåller en lista över medarbetare-ID för anställda med hello efternamn som lagras i hello **RowKey**.</span><span class="sxs-lookup"><span data-stu-id="a9900-597">hello **EmployeeIDs** property contains a list of employee ids for employees with hello last name stored in hello **RowKey**.</span></span>  

<span data-ttu-id="a9900-598">hello beskriver följande steg hello process som du bör följa när du lägger till en ny medarbetare om du använder hello andra alternativ.</span><span class="sxs-lookup"><span data-stu-id="a9900-598">hello following steps outline hello process you should follow when you are adding a new employee if you are using hello second option.</span></span> <span data-ttu-id="a9900-599">I det här exemplet vi lägger till en anställd med Id 000152 och efternamn Karlsson på försäljningsavdelningen hello:</span><span class="sxs-lookup"><span data-stu-id="a9900-599">In this example, we are adding an employee with Id 000152 and a last name Jones in hello Sales department:</span></span>  

1. <span data-ttu-id="a9900-600">Hämta hello index entitet med en **PartitionKey** värdet ”Försäljning” och hello **RowKey** värdet ”Jansson”.</span><span class="sxs-lookup"><span data-stu-id="a9900-600">Retrieve hello index entity with a **PartitionKey** value "Sales" and hello **RowKey** value "Jones."</span></span> <span data-ttu-id="a9900-601">Spara hello ETag för den här entiteten toouse i steg 2.</span><span class="sxs-lookup"><span data-stu-id="a9900-601">Save hello ETag of this entity toouse in step 2.</span></span>  
2. <span data-ttu-id="a9900-602">Skapa entitet grupp transaktion (det vill säga en batchåtgärd) som infogar hello ny medarbetare entitet (**PartitionKey** värdet ”Försäljning” och **RowKey** värdet ”000152”), och uppdateringar hello index entitet ( **PartitionKey** värdet ”Försäljning” och **RowKey** värdet ”Jansson”) genom att lägga till hello nya id toohello lista över anställda i hello EmployeeIDs fältet.</span><span class="sxs-lookup"><span data-stu-id="a9900-602">Create an entity group transaction (that is, a batch operation) that inserts hello new employee entity (**PartitionKey** value "Sales" and **RowKey** value "000152"), and updates hello index entity (**PartitionKey** value "Sales" and **RowKey** value "Jones") by adding hello new employee id toohello list in hello EmployeeIDs field.</span></span> <span data-ttu-id="a9900-603">Mer information om entiteten grupptransaktioner finns [entitet gruppera transaktioner](#entity-group-transactions).</span><span class="sxs-lookup"><span data-stu-id="a9900-603">For more information about entity group transactions, see [Entity Group Transactions](#entity-group-transactions).</span></span>  
3. <span data-ttu-id="a9900-604">Om hello entitet grupp transaktionen misslyckas på grund av ett fel för Optimistisk samtidighet (någon annan har bara ändrade hello index entiteten), måste toostart över från steg 1 igen.</span><span class="sxs-lookup"><span data-stu-id="a9900-604">If hello entity group transaction fails because of an optimistic concurrency error (someone else has just modified hello index entity), then you need toostart over at step 1 again.</span></span>  

<span data-ttu-id="a9900-605">Du kan använda en liknande metoden toodeleting en medarbetare om du använder hello andra alternativ.</span><span class="sxs-lookup"><span data-stu-id="a9900-605">You can use a similar approach toodeleting an employee if you are using hello second option.</span></span> <span data-ttu-id="a9900-606">Ändra en anställds efternamn är lite mer komplext eftersom du behöver tooexecute en entitet grupp transaktion som uppdaterar tre enheter: hello medarbetare entitetstyper, hello index entiteten för hello gamla efternamn och hello index entiteten för hello nya efternamn.</span><span class="sxs-lookup"><span data-stu-id="a9900-606">Changing an employee's last name is slightly more complex because you will need tooexecute an entity group transaction that updates three entities: hello employee entity, hello index entity for hello old last name, and hello index entity for hello new last name.</span></span> <span data-ttu-id="a9900-607">Innan du gör ändringar i ordning tooretrieve hello ETag-värden som du kan sedan använda tooperform hello uppdateringar med hjälp av Optimistisk samtidighet måste du hämta varje entitet.</span><span class="sxs-lookup"><span data-stu-id="a9900-607">You must retrieve each entity before making any changes in order tooretrieve hello ETag values that you can then use tooperform hello updates using optimistic concurrency.</span></span>  

<span data-ttu-id="a9900-608">hello beskriver följande steg hello process som du bör följa när du behöver toolook upp alla hello anställda med ett visst efternamn på en avdelning om du använder hello andra alternativ.</span><span class="sxs-lookup"><span data-stu-id="a9900-608">hello following steps outline hello process you should follow when you need toolook up all hello employees with a given last name in a department if you are using hello second option.</span></span> <span data-ttu-id="a9900-609">Det här exemplet letar vi upp alla hello anställda med efternamn Karlsson på försäljningsavdelningen hello:</span><span class="sxs-lookup"><span data-stu-id="a9900-609">In this example, we are looking up all hello employees with last name Jones in hello Sales department:</span></span>  

1. <span data-ttu-id="a9900-610">Hämta hello index entitet med en **PartitionKey** värdet ”Försäljning” och hello **RowKey** värdet ”Jansson”.</span><span class="sxs-lookup"><span data-stu-id="a9900-610">Retrieve hello index entity with a **PartitionKey** value "Sales" and hello **RowKey** value "Jones."</span></span>  
2. <span data-ttu-id="a9900-611">Parsa hello lista över anställnings-ID i hello EmployeeIDs fältet.</span><span class="sxs-lookup"><span data-stu-id="a9900-611">Parse hello list of employee Ids in hello EmployeeIDs field.</span></span>  
3. <span data-ttu-id="a9900-612">Om du behöver ytterligare information om var och en av dessa anställda (till exempel sina e-postadresser) att hämta varje hello medarbetare enheter med hjälp av **PartitionKey** värdet ”Försäljning” och **RowKey** värden från hello lista över anställda som du hämtade i steg 2.</span><span class="sxs-lookup"><span data-stu-id="a9900-612">If you need additional information about each of these employees (such as their email addresses), retrieve each of hello employee entities using **PartitionKey** value "Sales" and **RowKey** values from hello list of employees you obtained in step 2.</span></span>  

<span data-ttu-id="a9900-613"><u>Alternativet #3:</u> skapa index entiteter i en separat partition eller tabell</span><span class="sxs-lookup"><span data-stu-id="a9900-613"><u>Option #3:</u> Create index entities in a separate partition or table</span></span>  

<span data-ttu-id="a9900-614">Använd index entiteter som lagrar hello följande data för hello tredje alternativet:</span><span class="sxs-lookup"><span data-stu-id="a9900-614">For hello third option, use index entities that store hello following data:</span></span>  

![][15]

<span data-ttu-id="a9900-615">Hej **EmployeeIDs** egenskapen innehåller en lista över medarbetare-ID för anställda med hello efternamn som lagras i hello **RowKey**.</span><span class="sxs-lookup"><span data-stu-id="a9900-615">hello **EmployeeIDs** property contains a list of employee ids for employees with hello last name stored in hello **RowKey**.</span></span>  

<span data-ttu-id="a9900-616">Du kan inte använda EGTs toomaintain konsekvenskontroll eftersom hello index entiteter i en separat partition från hello medarbetare entiteter med hello tredje alternativet.</span><span class="sxs-lookup"><span data-stu-id="a9900-616">With hello third option, you cannot use EGTs toomaintain consistency because hello index entities are in a separate partition from hello employee entities.</span></span> <span data-ttu-id="a9900-617">Du bör kontrollera att hello index entiteter är överensstämmelse med hello medarbetare entiteter.</span><span class="sxs-lookup"><span data-stu-id="a9900-617">You should ensure that hello index entities are eventually consistent with hello employee entities.</span></span>  

#### <a name="issues-and-considerations"></a><span data-ttu-id="a9900-618">Problem och överväganden</span><span class="sxs-lookup"><span data-stu-id="a9900-618">Issues and considerations</span></span>
<span data-ttu-id="a9900-619">Överväg att hello följande punkter när du bestämmer hur tooimplement detta mönster:</span><span class="sxs-lookup"><span data-stu-id="a9900-619">Consider hello following points when deciding how tooimplement this pattern:</span></span>  

* <span data-ttu-id="a9900-620">Denna lösning kräver minst två frågor tooretrieve matchar entiteter: tooquery hello index entiteter tooobtain hello listan över **RowKey** värden och frågar tooretrieve varje entitet i hello-listan.</span><span class="sxs-lookup"><span data-stu-id="a9900-620">This solution requires at least two queries tooretrieve matching entities: one tooquery hello index entities tooobtain hello list of **RowKey** values, and then queries tooretrieve each entity in hello list.</span></span>  
* <span data-ttu-id="a9900-621">Med hänsyn till att en enskild entitet har en maximal storlek på 1 MB, alternativ #2 och alternativet #3 i hello lösning förutsätter hello listan över medarbetare-ID: n för alla angivna efternamn aldrig är större än 1 MB.</span><span class="sxs-lookup"><span data-stu-id="a9900-621">Given that an individual entity has a maximum size of 1 MB, option #2 and option #3 in hello solution assume that hello list of employee ids for any given last name is never greater than 1 MB.</span></span> <span data-ttu-id="a9900-622">Om hello medarbetare-ID: n är sannolikt toobe som är större än 1 MB i storlek är alternativet #1 och lagra hello index data i blob storage.</span><span class="sxs-lookup"><span data-stu-id="a9900-622">If hello list of employee ids is likely toobe greater than 1 MB in size, use option #1 and store hello index data in blob storage.</span></span>  
* <span data-ttu-id="a9900-623">Om du använder alternativet #2 måste (med EGTs toohandle att lägga till och ta bort anställda och ändra en anställds efternamn) du utvärdera om hello mängder transaktioner kommer hanterar hello skalbarhetsgränser i en given partition.</span><span class="sxs-lookup"><span data-stu-id="a9900-623">If you use option #2 (using EGTs toohandle adding and deleting employees, and changing an employee's last name) you must evaluate if hello volume of transactions will approach hello scalability limits in a given partition.</span></span> <span data-ttu-id="a9900-624">Om så är fallet hello bör du överväga en överensstämmelse lösning (#1 eller #3) som använder köer toohandle hello update begär och aktiverar du toostore index entiteter i en separat partition från hello medarbetare entiteter.</span><span class="sxs-lookup"><span data-stu-id="a9900-624">If this is hello case, you should consider an eventually consistent solution (option #1 or option #3) that uses queues toohandle hello update requests and enables you toostore your index entities in a separate partition from hello employee entities.</span></span>  
* <span data-ttu-id="a9900-625">Alternativet #2 i den här lösningen förutsätter att du vill att toolook efter efternamn inom en avdelning: till exempel önskade tooretrieve en lista över anställda med efternamn Karlsson i hello försäljningsavdelningen.</span><span class="sxs-lookup"><span data-stu-id="a9900-625">Option #2 in this solution assumes that you want toolook up by last name within a department: for example, you want tooretrieve a list of employees with a last name Jones in hello Sales department.</span></span> <span data-ttu-id="a9900-626">Om du vill toobe kan toolook upp alla hello anställda med efternamn Karlsson över hello hela organisationen kan använda alternativet #1 eller alternativet #3.</span><span class="sxs-lookup"><span data-stu-id="a9900-626">If you want toobe able toolook up all hello employees with a last name Jones across hello whole organization, use either option #1 or option #3.</span></span>
* <span data-ttu-id="a9900-627">Du kan implementera en lösning med kön som levererar slutliga konsekvensen (se hello [överensstämmelse transaktioner mönster](#eventually-consistent-transactions-pattern) för mer information).</span><span class="sxs-lookup"><span data-stu-id="a9900-627">You can implement a queue-based solution that delivers eventual consistency (see hello [Eventually consistent transactions pattern](#eventually-consistent-transactions-pattern) for more details).</span></span>  

#### <a name="when-toouse-this-pattern"></a><span data-ttu-id="a9900-628">När toouse det här mönstret</span><span class="sxs-lookup"><span data-stu-id="a9900-628">When toouse this pattern</span></span>
<span data-ttu-id="a9900-629">Använd det här mönstret när du vill toolookup en mängd av entiteter med samma vanliga egenskapsvärde, till exempel alla anställda med hello efternamn Karlsson.</span><span class="sxs-lookup"><span data-stu-id="a9900-629">Use this pattern when you want toolookup a set of entities that all share a common property value, such as all employees with hello last name Jones.</span></span>  

#### <a name="related-patterns-and-guidance"></a><span data-ttu-id="a9900-630">Vägledning och relaterade mönster</span><span class="sxs-lookup"><span data-stu-id="a9900-630">Related patterns and guidance</span></span>
<span data-ttu-id="a9900-631">hello kan följande mönster och guider även vara relevanta när du implementerar det här mönstret:</span><span class="sxs-lookup"><span data-stu-id="a9900-631">hello following patterns and guidance may also be relevant when implementing this pattern:</span></span>  

* [<span data-ttu-id="a9900-632">Sammansatt nyckel mönster</span><span class="sxs-lookup"><span data-stu-id="a9900-632">Compound key pattern</span></span>](#compound-key-pattern)  
* [<span data-ttu-id="a9900-633">Mönster för överensstämmelse transaktioner</span><span class="sxs-lookup"><span data-stu-id="a9900-633">Eventually consistent transactions pattern</span></span>](#eventually-consistent-transactions-pattern)  
* [<span data-ttu-id="a9900-634">Entiteten gruppera transaktioner</span><span class="sxs-lookup"><span data-stu-id="a9900-634">Entity Group Transactions</span></span>](#entity-group-transactions)  
* [<span data-ttu-id="a9900-635">Arbeta med heterogena entitetstyper</span><span class="sxs-lookup"><span data-stu-id="a9900-635">Working with heterogeneous entity types</span></span>](#working-with-heterogeneous-entity-types)  

### <a name="denormalization-pattern"></a><span data-ttu-id="a9900-636">Denormalization mönster</span><span class="sxs-lookup"><span data-stu-id="a9900-636">Denormalization pattern</span></span>
<span data-ttu-id="a9900-637">Kombinera relaterade data tillsammans i en enda entitet tooenable tooretrieve alla hello data som du behöver med en enda fråga.</span><span class="sxs-lookup"><span data-stu-id="a9900-637">Combine related data together in a single entity tooenable you tooretrieve all hello data you need with a single point query.</span></span>  

#### <a name="context-and-problem"></a><span data-ttu-id="a9900-638">Kontexten och problem</span><span class="sxs-lookup"><span data-stu-id="a9900-638">Context and problem</span></span>
<span data-ttu-id="a9900-639">I en relationsdatabas normalisera du vanligtvis tooremove dataduplicering som resulterar i frågor som hämtar data från flera tabeller.</span><span class="sxs-lookup"><span data-stu-id="a9900-639">In a relational database, you typically normalize data tooremove duplication resulting in queries that retrieve data from multiple tables.</span></span> <span data-ttu-id="a9900-640">Om du normalisera dina data i Azure-tabeller, måste du se flera kommunikationsturer från hello klienten toohello server tooretrieve relaterade data.</span><span class="sxs-lookup"><span data-stu-id="a9900-640">If you normalize your data in Azure tables, you must make multiple round trips from hello client toohello server tooretrieve your related data.</span></span> <span data-ttu-id="a9900-641">Till exempel med hello tabellstrukturen nedan om du behöver två avrunda resor tooretrieve hello information för en avdelning: en toofetch hello avdelning entitet som innehåller hello Resurshanterar-id och sedan en annan begäran toofetch hello Managers information i en medarbetare entitet.</span><span class="sxs-lookup"><span data-stu-id="a9900-641">For example, with hello table structure shown below you need two round trips tooretrieve hello details for a department: one toofetch hello department entity that includes hello manager's id, and then another request toofetch hello manager's details in an employee entity.</span></span>  

![][16]

#### <a name="solution"></a><span data-ttu-id="a9900-642">Lösning</span><span class="sxs-lookup"><span data-stu-id="a9900-642">Solution</span></span>
<span data-ttu-id="a9900-643">I stället för att lagra hello data i två separata entiteterna, denormalize hello data och behålla en kopia av information om hello manager i hello avdelning entitet.</span><span class="sxs-lookup"><span data-stu-id="a9900-643">Instead of storing hello data in two separate entities, denormalize hello data and keep a copy of hello manager's details in hello department entity.</span></span> <span data-ttu-id="a9900-644">Exempel:</span><span class="sxs-lookup"><span data-stu-id="a9900-644">For example:</span></span>  

![][17]

<span data-ttu-id="a9900-645">Du kan nu hämta alla hello information du behöver om en avdelning med en punkt-fråga med avdelning entiteter som lagras med dessa egenskaper finns.</span><span class="sxs-lookup"><span data-stu-id="a9900-645">With department entities stored with these properties, you can now retrieve all hello details you need about a department using a point query.</span></span>  

#### <a name="issues-and-considerations"></a><span data-ttu-id="a9900-646">Problem och överväganden</span><span class="sxs-lookup"><span data-stu-id="a9900-646">Issues and considerations</span></span>
<span data-ttu-id="a9900-647">Överväg att hello följande punkter när du bestämmer hur tooimplement detta mönster:</span><span class="sxs-lookup"><span data-stu-id="a9900-647">Consider hello following points when deciding how tooimplement this pattern:</span></span>  

* <span data-ttu-id="a9900-648">Det finns en kostnad som associeras med att lagra vissa data två gånger.</span><span class="sxs-lookup"><span data-stu-id="a9900-648">There is some cost overhead associated with storing some data twice.</span></span> <span data-ttu-id="a9900-649">hello prestandafördelar (följd färre begäranden toohello storage-tjänst) vanligtvis uppväger hello marginell ökade kostnader för lagring (och kostnaden delvis förskjutning genom en minskning av hello antal transaktioner som du behöver toofetch hello information på en avdelning).</span><span class="sxs-lookup"><span data-stu-id="a9900-649">hello performance benefit (resulting from fewer requests toohello storage service) typically outweighs hello marginal increase in storage costs (and this cost is partially offset by a reduction in hello number of transactions you require toofetch hello details of a department).</span></span>  
* <span data-ttu-id="a9900-650">Du måste upprätthålla hello enhetliga hello två entiteter som lagrar information om chefer.</span><span class="sxs-lookup"><span data-stu-id="a9900-650">You must maintain hello consistency of hello two entities that store information about managers.</span></span> <span data-ttu-id="a9900-651">Du kan hantera hello konsekvenskontroll problemet med hjälp av EGTs tooupdate flera entiteter i en atomisk transaktion: i det här fallet hello avdelning entiteten och hello medarbetare entiteten för hello avdelning manager lagras i hello samma partition.</span><span class="sxs-lookup"><span data-stu-id="a9900-651">You can handle hello consistency issue by using EGTs tooupdate multiple entities in a single atomic transaction: in this case, hello department entity, and hello employee entity for hello department manager are stored in hello same partition.</span></span>  

#### <a name="when-toouse-this-pattern"></a><span data-ttu-id="a9900-652">När toouse det här mönstret</span><span class="sxs-lookup"><span data-stu-id="a9900-652">When toouse this pattern</span></span>
<span data-ttu-id="a9900-653">Använd det här mönstret när du ofta behöver toolook in relaterad information.</span><span class="sxs-lookup"><span data-stu-id="a9900-653">Use this pattern when you frequently need toolook up related information.</span></span> <span data-ttu-id="a9900-654">Det här mönstret minskar hello antalet frågor som klienten måste se tooretrieve hello data som krävs.</span><span class="sxs-lookup"><span data-stu-id="a9900-654">This pattern reduces hello number of queries your client must make tooretrieve hello data it requires.</span></span>  

#### <a name="related-patterns-and-guidance"></a><span data-ttu-id="a9900-655">Vägledning och relaterade mönster</span><span class="sxs-lookup"><span data-stu-id="a9900-655">Related patterns and guidance</span></span>
<span data-ttu-id="a9900-656">hello kan följande mönster och guider även vara relevanta när du implementerar det här mönstret:</span><span class="sxs-lookup"><span data-stu-id="a9900-656">hello following patterns and guidance may also be relevant when implementing this pattern:</span></span>  

* [<span data-ttu-id="a9900-657">Sammansatt nyckel mönster</span><span class="sxs-lookup"><span data-stu-id="a9900-657">Compound key pattern</span></span>](#compound-key-pattern)  
* [<span data-ttu-id="a9900-658">Entiteten gruppera transaktioner</span><span class="sxs-lookup"><span data-stu-id="a9900-658">Entity Group Transactions</span></span>](#entity-group-transactions)  
* [<span data-ttu-id="a9900-659">Arbeta med heterogena entitetstyper</span><span class="sxs-lookup"><span data-stu-id="a9900-659">Working with heterogeneous entity types</span></span>](#working-with-heterogeneous-entity-types)

### <a name="compound-key-pattern"></a><span data-ttu-id="a9900-660">Sammansatt nyckel mönster</span><span class="sxs-lookup"><span data-stu-id="a9900-660">Compound key pattern</span></span>
<span data-ttu-id="a9900-661">Använd sammansatta **RowKey** värden tooenable en klient toolookup relaterade data med en enda fråga.</span><span class="sxs-lookup"><span data-stu-id="a9900-661">Use compound **RowKey** values tooenable a client toolookup related data with a single point query.</span></span>  

#### <a name="context-and-problem"></a><span data-ttu-id="a9900-662">Kontexten och problem</span><span class="sxs-lookup"><span data-stu-id="a9900-662">Context and problem</span></span>
<span data-ttu-id="a9900-663">I en relationsdatabas, är det ganska naturlig toouse kopplingar i frågor tooreturn relaterade delar av data toohello klienten i en enskild fråga.</span><span class="sxs-lookup"><span data-stu-id="a9900-663">In a relational database, it is quite natural toouse joins in queries tooreturn related pieces of data toohello client in a single query.</span></span> <span data-ttu-id="a9900-664">Du kan till exempel använda hello medarbetare id toolook visas en lista över relaterade entiteter som innehåller prestanda och granska data för denna medarbetare.</span><span class="sxs-lookup"><span data-stu-id="a9900-664">For example, you might use hello employee id toolook up a list of related entities that contain performance and review data for that employee.</span></span>  

<span data-ttu-id="a9900-665">Anta att du lagrar medarbetare entiteter i hello tabelltjänsten med hello följande struktur:</span><span class="sxs-lookup"><span data-stu-id="a9900-665">Assume you are storing employee entities in hello Table service using hello following structure:</span></span>  

![][18]

<span data-ttu-id="a9900-666">Du måste också toostore historiska data om tooreviews och prestanda för varje år hello medarbetare har arbetat för din organisation och du behöver toobe kan tooaccess informationen per år.</span><span class="sxs-lookup"><span data-stu-id="a9900-666">You also need toostore historical data relating tooreviews and performance for each year hello employee has worked for your organization and you need toobe able tooaccess this information by year.</span></span> <span data-ttu-id="a9900-667">Ett alternativ är toocreate en annan tabell som lagrar entiteter med hello följande struktur:</span><span class="sxs-lookup"><span data-stu-id="a9900-667">One option is toocreate another table that stores entities with hello following structure:</span></span>  

![][19]

<span data-ttu-id="a9900-668">Observera att med den här hanterar du besluta tooduplicate information (till exempel förnamn och efternamn) i hello ny entitet tooenable du tooretrieve dina data med en enskild begäran.</span><span class="sxs-lookup"><span data-stu-id="a9900-668">Notice that with this approach you may decide tooduplicate some information (such as first name and last name) in hello new entity tooenable you tooretrieve your data with a single request.</span></span> <span data-ttu-id="a9900-669">Du kan dock behålla stark konsekvens eftersom du inte kan använda en EGT tooupdate hello två entiteter automatiskt.</span><span class="sxs-lookup"><span data-stu-id="a9900-669">However, you cannot maintain strong consistency because you cannot use an EGT tooupdate hello two entities atomically.</span></span>  

#### <a name="solution"></a><span data-ttu-id="a9900-670">Lösning</span><span class="sxs-lookup"><span data-stu-id="a9900-670">Solution</span></span>
<span data-ttu-id="a9900-671">Lagra nya entitetstypen i den ursprungliga tabellen med hjälp av entiteter med hello följande struktur:</span><span class="sxs-lookup"><span data-stu-id="a9900-671">Store a new entity type in your original table using entities with hello following structure:</span></span>  

![][20]

<span data-ttu-id="a9900-672">Observera hur hello **RowKey** nu en sammansatt nyckel består av hello anställnings-id och hello år hello granska data som du kan använda tooretrieve hello medarbetarens prestanda och granska data med en begäran för en enda entitet.</span><span class="sxs-lookup"><span data-stu-id="a9900-672">Notice how hello **RowKey** is now a compound key made up of hello employee id and hello year of hello review data that enables you tooretrieve hello employee's performance and review data with a single request for a single entity.</span></span>  

<span data-ttu-id="a9900-673">hello följande exempel beskrivs hur du kan hämta alla hello granska data för en viss medarbetare (till exempel medarbetare 000123 i hello försäljningsavdelningen):</span><span class="sxs-lookup"><span data-stu-id="a9900-673">hello following example outlines how you can retrieve all hello review data for a particular employee (such as employee 000123 in hello Sales department):</span></span>  

<span data-ttu-id="a9900-674">$filter = (PartitionKey eq 'Sales') och (RowKey ge 'empid_000123') och (RowKey lt 'empid_000124') & $select = RowKey, Arbetsledarens, peer-klassificering, kommentarer</span><span class="sxs-lookup"><span data-stu-id="a9900-674">$filter=(PartitionKey eq 'Sales') and (RowKey ge 'empid_000123') and (RowKey lt 'empid_000124')&$select=RowKey,Manager Rating,Peer Rating,Comments</span></span>  

#### <a name="issues-and-considerations"></a><span data-ttu-id="a9900-675">Problem och överväganden</span><span class="sxs-lookup"><span data-stu-id="a9900-675">Issues and considerations</span></span>
<span data-ttu-id="a9900-676">Överväg att hello följande punkter när du bestämmer hur tooimplement detta mönster:</span><span class="sxs-lookup"><span data-stu-id="a9900-676">Consider hello following points when deciding how tooimplement this pattern:</span></span>  

* <span data-ttu-id="a9900-677">Du bör använda ett lämpligt avgränsningstecknet som gör det enkelt tooparse hello **RowKey** värde: till exempel **000123_2012**.</span><span class="sxs-lookup"><span data-stu-id="a9900-677">You should use a suitable separator character that makes it easy tooparse hello **RowKey** value: for example, **000123_2012**.</span></span>  
* <span data-ttu-id="a9900-678">Du också lagrar entiteten i samma partition som andra enheter som innehåller relaterade data för hello hello samma medarbetare, vilket innebär att du kan använda EGTs toomaintain stark konsekvens.</span><span class="sxs-lookup"><span data-stu-id="a9900-678">You are also storing this entity in hello same partition as other entities that contain related data for hello same employee, which means you can use EGTs toomaintain strong consistency.</span></span>
* <span data-ttu-id="a9900-679">Du bör överväga hur ofta du ska fråga hello data toodetermine om det här mönstret är lämpligt.</span><span class="sxs-lookup"><span data-stu-id="a9900-679">You should consider how frequently you will query hello data toodetermine whether this pattern is appropriate.</span></span>  <span data-ttu-id="a9900-680">Om du ansluter till hello granska data mer sällan och hello huvudsakliga medarbetardata ofta bör du hålla dem som separata entiteterna.</span><span class="sxs-lookup"><span data-stu-id="a9900-680">For example, if you will access hello review data infrequently and hello main employee data often you should keep them as separate entities.</span></span>  

#### <a name="when-toouse-this-pattern"></a><span data-ttu-id="a9900-681">När toouse det här mönstret</span><span class="sxs-lookup"><span data-stu-id="a9900-681">When toouse this pattern</span></span>
<span data-ttu-id="a9900-682">Använd det här mönstret när du behöver toostore en eller flera relaterade entiteter som du frågar ofta.</span><span class="sxs-lookup"><span data-stu-id="a9900-682">Use this pattern when you need toostore one or more related entities that you query frequently.</span></span>  

#### <a name="related-patterns-and-guidance"></a><span data-ttu-id="a9900-683">Vägledning och relaterade mönster</span><span class="sxs-lookup"><span data-stu-id="a9900-683">Related patterns and guidance</span></span>
<span data-ttu-id="a9900-684">hello kan följande mönster och guider även vara relevanta när du implementerar det här mönstret:</span><span class="sxs-lookup"><span data-stu-id="a9900-684">hello following patterns and guidance may also be relevant when implementing this pattern:</span></span>  

* [<span data-ttu-id="a9900-685">Entiteten gruppera transaktioner</span><span class="sxs-lookup"><span data-stu-id="a9900-685">Entity Group Transactions</span></span>](#entity-group-transactions)  
* [<span data-ttu-id="a9900-686">Arbeta med heterogena entitetstyper</span><span class="sxs-lookup"><span data-stu-id="a9900-686">Working with heterogeneous entity types</span></span>](#working-with-heterogeneous-entity-types)  
* [<span data-ttu-id="a9900-687">Mönster för överensstämmelse transaktioner</span><span class="sxs-lookup"><span data-stu-id="a9900-687">Eventually consistent transactions pattern</span></span>](#eventually-consistent-transactions-pattern)  

### <a name="log-tail-pattern"></a><span data-ttu-id="a9900-688">Loggen pilslut mönster</span><span class="sxs-lookup"><span data-stu-id="a9900-688">Log tail pattern</span></span>
<span data-ttu-id="a9900-689">Hämta hello  *n*  entiteter senast lades tooa partition med hjälp av en **RowKey** värde som sorterar i omvänd datum och tid ordning.</span><span class="sxs-lookup"><span data-stu-id="a9900-689">Retrieve hello *n* entities most recently added tooa partition by using a **RowKey** value that sorts in reverse date and time order.</span></span>  

#### <a name="context-and-problem"></a><span data-ttu-id="a9900-690">Kontexten och problem</span><span class="sxs-lookup"><span data-stu-id="a9900-690">Context and problem</span></span>
<span data-ttu-id="a9900-691">Ett vanligt krav är att kunna tooretrieve hello nyaste entiteter, till exempel hello tio senaste utgifter ansökningar som görs av en medarbetare.</span><span class="sxs-lookup"><span data-stu-id="a9900-691">A common requirement is be able tooretrieve hello most recently created entities, for example hello ten most recent expense claims submitted by an employee.</span></span> <span data-ttu-id="a9900-692">Tabell frågar stöd för en **$top** fråga åtgärden tooreturn hello först  *n*  entiteter från en uppsättning: det finns inga motsvarande frågan åtgärden tooreturn hello sista n entiteter i en mängd.</span><span class="sxs-lookup"><span data-stu-id="a9900-692">Table queries support a **$top** query operation tooreturn hello first *n* entities from a set: there is no equivalent query operation tooreturn hello last n entities in a set.</span></span>  

#### <a name="solution"></a><span data-ttu-id="a9900-693">Lösning</span><span class="sxs-lookup"><span data-stu-id="a9900-693">Solution</span></span>
<span data-ttu-id="a9900-694">Store hello enheter med hjälp av en **RowKey** att naturligt sorterar i omvänd tidsvärdet ordning med hjälp av så att den senaste hello-posten är alltid hello förstnämnda i hello tabell.</span><span class="sxs-lookup"><span data-stu-id="a9900-694">Store hello entities using a **RowKey** that naturally sorts in reverse date/time order by using so hello most recent entry is always hello first one in hello table.</span></span>  

<span data-ttu-id="a9900-695">Till exempel toobe kan tooretrieve hello tio senaste utgifter ansökningar som görs av en medarbetare kan du använda en omvänd tick-värde som härletts från hello aktuellt datum och tid.</span><span class="sxs-lookup"><span data-stu-id="a9900-695">For example, toobe able tooretrieve hello ten most recent expense claims submitted by an employee, you can use a reverse tick value derived from hello current date/time.</span></span> <span data-ttu-id="a9900-696">hello följande kodexempel för C# visar enkelriktade toocreate ett lämpligt ”inverterad tick” värde för en **RowKey** som sorterar från hello senaste toohello äldsta:</span><span class="sxs-lookup"><span data-stu-id="a9900-696">hello following C# code sample shows one way toocreate a suitable "inverted ticks" value for a **RowKey** that sorts from hello most recent toohello oldest:</span></span>  

`string invertedTicks = string.Format("{0:D19}", DateTime.MaxValue.Ticks - DateTime.UtcNow.Ticks);`  

<span data-ttu-id="a9900-697">Du kan få tillbaka toohello datum tid-värden med hjälp av hello följande kod:</span><span class="sxs-lookup"><span data-stu-id="a9900-697">You can get back toohello date time value using hello following code:</span></span>  

`DateTime dt = new DateTime(DateTime.MaxValue.Ticks - Int64.Parse(invertedTicks));`  

<span data-ttu-id="a9900-698">hello tabellfråga ser ut så här:</span><span class="sxs-lookup"><span data-stu-id="a9900-698">hello table query looks like this:</span></span>  

`https://myaccount.table.core.windows.net/EmployeeExpense(PartitionKey='empid')?$top=10`  

#### <a name="issues-and-considerations"></a><span data-ttu-id="a9900-699">Problem och överväganden</span><span class="sxs-lookup"><span data-stu-id="a9900-699">Issues and considerations</span></span>
<span data-ttu-id="a9900-700">Överväg att hello följande punkter när du bestämmer hur tooimplement detta mönster:</span><span class="sxs-lookup"><span data-stu-id="a9900-700">Consider hello following points when deciding how tooimplement this pattern:</span></span>  

* <span data-ttu-id="a9900-701">Du måste fylla hello omvänd skalstreck värdet med inledande nollor tooensure hello strängvärde sorterar som förväntat.</span><span class="sxs-lookup"><span data-stu-id="a9900-701">You must pad hello reverse tick value with leading zeroes tooensure hello string value sorts as expected.</span></span>  
* <span data-ttu-id="a9900-702">Du måste vara medveten om hello skalbarhetsmål på hello nivå för en partition.</span><span class="sxs-lookup"><span data-stu-id="a9900-702">You must be aware of hello scalability targets at hello level of a partition.</span></span> <span data-ttu-id="a9900-703">Var noga med att inte skapa hotspot-partitioner.</span><span class="sxs-lookup"><span data-stu-id="a9900-703">Be careful not create hot spot partitions.</span></span>  

#### <a name="when-toouse-this-pattern"></a><span data-ttu-id="a9900-704">När toouse det här mönstret</span><span class="sxs-lookup"><span data-stu-id="a9900-704">When toouse this pattern</span></span>
<span data-ttu-id="a9900-705">Använd det här mönstret när du behöver tooaccess entiteter i tidsvärdet i omvänd ordning eller när du behöver tooaccess hello senast har lagts till entiteter.</span><span class="sxs-lookup"><span data-stu-id="a9900-705">Use this pattern when you need tooaccess entities in reverse date/time order or when you need tooaccess hello most recently added entities.</span></span>  

#### <a name="related-patterns-and-guidance"></a><span data-ttu-id="a9900-706">Vägledning och relaterade mönster</span><span class="sxs-lookup"><span data-stu-id="a9900-706">Related patterns and guidance</span></span>
<span data-ttu-id="a9900-707">hello kan följande mönster och guider även vara relevanta när du implementerar det här mönstret:</span><span class="sxs-lookup"><span data-stu-id="a9900-707">hello following patterns and guidance may also be relevant when implementing this pattern:</span></span>  

* [<span data-ttu-id="a9900-708">Lägga / lägga till ett mönster</span><span class="sxs-lookup"><span data-stu-id="a9900-708">Prepend / append anti-pattern</span></span>](#prepend-append-anti-pattern)  
* [<span data-ttu-id="a9900-709">Hämta entiteter</span><span class="sxs-lookup"><span data-stu-id="a9900-709">Retrieving entities</span></span>](#retrieving-entities)  

### <a name="high-volume-delete-pattern"></a><span data-ttu-id="a9900-710">Ta bort mönster för hög volym</span><span class="sxs-lookup"><span data-stu-id="a9900-710">High volume delete pattern</span></span>
<span data-ttu-id="a9900-711">Aktivera hello borttagning av ett stort antal enheter genom att lagra alla hello entiteter för samtidiga borttagning i sina egna separata tabell. du tar bort hello enheter genom att ta bort hello tabell.</span><span class="sxs-lookup"><span data-stu-id="a9900-711">Enable hello deletion of a high volume of entities by storing all hello entities for simultaneous deletion in their own separate table; you delete hello entities by deleting hello table.</span></span>  

#### <a name="context-and-problem"></a><span data-ttu-id="a9900-712">Kontexten och problem</span><span class="sxs-lookup"><span data-stu-id="a9900-712">Context and problem</span></span>
<span data-ttu-id="a9900-713">Många program ta bort gamla data som inte längre behöver toobe tillgängliga tooa klientprogrammet eller programmet hello har arkiverats tooanother lagringsmedium.</span><span class="sxs-lookup"><span data-stu-id="a9900-713">Many applications delete old data which no longer needs toobe available tooa client application, or that hello application has archived tooanother storage medium.</span></span> <span data-ttu-id="a9900-714">Dessa data identifieras vanligtvis med ett datum: du till exempel har en krav toodelete poster för alla inloggningsbegäranden som är mer än 60 dagar.</span><span class="sxs-lookup"><span data-stu-id="a9900-714">You typically identify such data by a date: for example, you have a requirement toodelete records of all login requests that are more than 60 days old.</span></span>  

<span data-ttu-id="a9900-715">Ett möjligt design är toouse hello datum och tid för begäran om inloggning hello i hello **RowKey**:</span><span class="sxs-lookup"><span data-stu-id="a9900-715">One possible design is toouse hello date and time of hello login request in hello **RowKey**:</span></span>  

![][21]

<span data-ttu-id="a9900-716">Det här sättet undviker partition surfpunkter eftersom programmet hello kan infoga och ta bort inloggningen entiteter för varje användare i en separat partition.</span><span class="sxs-lookup"><span data-stu-id="a9900-716">This approach avoids partition hotspots because hello application can insert and delete login entities for each user in a separate partition.</span></span> <span data-ttu-id="a9900-717">Men den här metoden kan vara kostsamma ta lång tid om du har ett stort antal entiteter eftersom du måste först tooperform en tabell söka i ordning tooidentify alla hello entiteter toodelete och du måste ta bort varje gamla entitet.</span><span class="sxs-lookup"><span data-stu-id="a9900-717">However, this approach may be costly and time consuming if you have a large number of entities because first you need tooperform a table scan in order tooidentify all hello entities toodelete, and then you must delete each old entity.</span></span> <span data-ttu-id="a9900-718">Observera att du kan minska hello antalet sändningar toohello server krävs toodelete hello gamla enheter av batchbearbetning flera delete-begäranden till EGTs.</span><span class="sxs-lookup"><span data-stu-id="a9900-718">Note that you can reduce hello number of round trips toohello server required toodelete hello old entities by batching multiple delete requests into EGTs.</span></span>  

#### <a name="solution"></a><span data-ttu-id="a9900-719">Lösning</span><span class="sxs-lookup"><span data-stu-id="a9900-719">Solution</span></span>
<span data-ttu-id="a9900-720">Använd en separat tabell för varje dag på inloggningsförsök.</span><span class="sxs-lookup"><span data-stu-id="a9900-720">Use a separate table for each day of login attempts.</span></span> <span data-ttu-id="a9900-721">Du kan använda hello entitet design ovan tooavoid surfpunkter när du infogar entiteter och ta bort gamla enheter är nu bara en fråga om du tar bort en tabell varje dag (en enda Lagringsåtgärden) i stället för att hitta och ta bort hundratals och tusentals enheter som enskilda inloggningen varje dag.</span><span class="sxs-lookup"><span data-stu-id="a9900-721">You can use hello entity design above tooavoid hotspots when you are inserting entities, and deleting old entities is now simply a question of deleting one table every day (a single storage operation) instead of finding and deleting hundreds and thousands of individual login entities every day.</span></span>  

#### <a name="issues-and-considerations"></a><span data-ttu-id="a9900-722">Problem och överväganden</span><span class="sxs-lookup"><span data-stu-id="a9900-722">Issues and considerations</span></span>
<span data-ttu-id="a9900-723">Överväg att hello följande punkter när du bestämmer hur tooimplement detta mönster:</span><span class="sxs-lookup"><span data-stu-id="a9900-723">Consider hello following points when deciding how tooimplement this pattern:</span></span>  

* <span data-ttu-id="a9900-724">Stöder din design andra sätt som programmet ska använda hello data, till exempel söka efter specifika enheter som länkar till andra data eller genererar samlar in information?</span><span class="sxs-lookup"><span data-stu-id="a9900-724">Does your design support other ways your application will use hello data such as looking up specific entities, linking with other data, or generating aggregate information?</span></span>  
* <span data-ttu-id="a9900-725">Din design undvika aktiva punkter vid infogning av nya enheter?</span><span class="sxs-lookup"><span data-stu-id="a9900-725">Does your design avoid hot spots when you are inserting new entities?</span></span>  
* <span data-ttu-id="a9900-726">Förvänta dig en fördröjning om du vill tooreuse hello samma tabellnamnet när den har tagits bort.</span><span class="sxs-lookup"><span data-stu-id="a9900-726">Expect a delay if you want tooreuse hello same table name after deleting it.</span></span> <span data-ttu-id="a9900-727">Det är bättre tooalways Använd unikt tabellnamn.</span><span class="sxs-lookup"><span data-stu-id="a9900-727">It's better tooalways use unique table names.</span></span>  
* <span data-ttu-id="a9900-728">Räkna med vissa begränsningar när du börjar använda en ny tabell medan hello tabelltjänsten lär sig hello åtkomstmönster och distribuerar hello partitioner mellan noder.</span><span class="sxs-lookup"><span data-stu-id="a9900-728">Expect some throttling when you first use a new table while hello Table service learns hello access patterns and distributes hello partitions across nodes.</span></span> <span data-ttu-id="a9900-729">Du bör överväga hur ofta du behöver toocreate nya tabeller.</span><span class="sxs-lookup"><span data-stu-id="a9900-729">You should consider how frequently you need toocreate new tables.</span></span>  

#### <a name="when-toouse-this-pattern"></a><span data-ttu-id="a9900-730">När toouse det här mönstret</span><span class="sxs-lookup"><span data-stu-id="a9900-730">When toouse this pattern</span></span>
<span data-ttu-id="a9900-731">Använd det här mönstret när du har en stor volym med enheter som du måste ta bort hello samtidigt.</span><span class="sxs-lookup"><span data-stu-id="a9900-731">Use this pattern when you have a high volume of entities that you must delete at hello same time.</span></span>  

#### <a name="related-patterns-and-guidance"></a><span data-ttu-id="a9900-732">Vägledning och relaterade mönster</span><span class="sxs-lookup"><span data-stu-id="a9900-732">Related patterns and guidance</span></span>
<span data-ttu-id="a9900-733">hello kan följande mönster och guider även vara relevanta när du implementerar det här mönstret:</span><span class="sxs-lookup"><span data-stu-id="a9900-733">hello following patterns and guidance may also be relevant when implementing this pattern:</span></span>  

* [<span data-ttu-id="a9900-734">Entiteten gruppera transaktioner</span><span class="sxs-lookup"><span data-stu-id="a9900-734">Entity Group Transactions</span></span>](#entity-group-transactions)
* [<span data-ttu-id="a9900-735">Ändra entiteter</span><span class="sxs-lookup"><span data-stu-id="a9900-735">Modifying entities</span></span>](#modifying-entities)  

### <a name="data-series-pattern"></a><span data-ttu-id="a9900-736">Serien datamönster</span><span class="sxs-lookup"><span data-stu-id="a9900-736">Data series pattern</span></span>
<span data-ttu-id="a9900-737">Store fullständig dataserien i en enda entitet toominimize hello antal begäranden som du gör.</span><span class="sxs-lookup"><span data-stu-id="a9900-737">Store complete data series in a single entity toominimize hello number of requests you make.</span></span>  

#### <a name="context-and-problem"></a><span data-ttu-id="a9900-738">Kontexten och problem</span><span class="sxs-lookup"><span data-stu-id="a9900-738">Context and problem</span></span>
<span data-ttu-id="a9900-739">Ett vanligt scenario är för ett program toostore en serie av data som vanligtvis måste tooretrieve på samma gång.</span><span class="sxs-lookup"><span data-stu-id="a9900-739">A common scenario is for an application toostore a series of data that it typically needs tooretrieve all at once.</span></span> <span data-ttu-id="a9900-740">Programmet kan till exempel registrera hur många Snabbmeddelanden meddelanden varje anställd skickar varje timme och sedan använda denna information tooplot hur många meddelanden varje användare hello föregående 24 timmar.</span><span class="sxs-lookup"><span data-stu-id="a9900-740">For example, your application might record how many IM messages each employee sends every hour, and then use this information tooplot how many messages each user sent over hello preceding 24 hours.</span></span> <span data-ttu-id="a9900-741">En design kanske toostore 24 entiteter för varje medarbetare:</span><span class="sxs-lookup"><span data-stu-id="a9900-741">One design might be toostore 24 entities for each employee:</span></span>  

![][22]

<span data-ttu-id="a9900-742">Med den här designen kan du lätt hitta och uppdatera hello entiteten tooupdate för varje medarbetare när programmet hello måste tooupdate hello-meddelande count-värdet.</span><span class="sxs-lookup"><span data-stu-id="a9900-742">With this design, you can easily locate and update hello entity tooupdate for each employee whenever hello application needs tooupdate hello message count value.</span></span> <span data-ttu-id="a9900-743">Dock tooretrieve Hej information tooplot ett diagram över hello aktivitet för hello föregående 24 timmar, måste du hämta 24 entiteter.</span><span class="sxs-lookup"><span data-stu-id="a9900-743">However, tooretrieve hello information tooplot a chart of hello activity for hello preceding 24 hours, you must retrieve 24 entities.</span></span>  

#### <a name="solution"></a><span data-ttu-id="a9900-744">Lösning</span><span class="sxs-lookup"><span data-stu-id="a9900-744">Solution</span></span>
<span data-ttu-id="a9900-745">Använd följande design med antal för en separat egenskapen toostore hello-meddelande för varje timme hello:</span><span class="sxs-lookup"><span data-stu-id="a9900-745">Use hello following design with a separate property toostore hello message count for each hour:</span></span>  

![][23]

<span data-ttu-id="a9900-746">Med den här designen kan använda du merge åtgärden tooupdate hello meddelandet antal för en medarbetare för en given timme.</span><span class="sxs-lookup"><span data-stu-id="a9900-746">With this design, you can use a merge operation tooupdate hello message count for an employee for a specific hour.</span></span> <span data-ttu-id="a9900-747">Du kan nu hämta alla hello information som du behöver tooplot hello diagram med en begäran för en enda entitet.</span><span class="sxs-lookup"><span data-stu-id="a9900-747">Now, you can retrieve all hello information you need tooplot hello chart using a request for a single entity.</span></span>  

#### <a name="issues-and-considerations"></a><span data-ttu-id="a9900-748">Problem och överväganden</span><span class="sxs-lookup"><span data-stu-id="a9900-748">Issues and considerations</span></span>
<span data-ttu-id="a9900-749">Överväg att hello följande punkter när du bestämmer hur tooimplement detta mönster:</span><span class="sxs-lookup"><span data-stu-id="a9900-749">Consider hello following points when deciding how tooimplement this pattern:</span></span>  

* <span data-ttu-id="a9900-750">Om fullständig dataserierna inte får plats i en enda entitet (en entitet kan ha too252 egenskaper), kan du använda ett alternativt datalager, till exempel en blob.</span><span class="sxs-lookup"><span data-stu-id="a9900-750">If your complete data series does not fit into a single entity (an entity can have up too252 properties), use an alternative data store such as a blob.</span></span>  
* <span data-ttu-id="a9900-751">Om du har flera klienter samtidigt uppdaterar en entitet måste toouse hello **ETag** tooimplement Optimistisk samtidighet.</span><span class="sxs-lookup"><span data-stu-id="a9900-751">If you have multiple clients updating an entity simultaneously, you will need toouse hello **ETag** tooimplement optimistic concurrency.</span></span> <span data-ttu-id="a9900-752">Om du har många klienter kan uppstå det hög konkurrens.</span><span class="sxs-lookup"><span data-stu-id="a9900-752">If you have many clients, you may experience high contention.</span></span>  

#### <a name="when-toouse-this-pattern"></a><span data-ttu-id="a9900-753">När toouse det här mönstret</span><span class="sxs-lookup"><span data-stu-id="a9900-753">When toouse this pattern</span></span>
<span data-ttu-id="a9900-754">Använd det här mönstret när du behöver tooupdate och hämta en serie som är associerade med en enskild entitet.</span><span class="sxs-lookup"><span data-stu-id="a9900-754">Use this pattern when you need tooupdate and retrieve a data series associated with an individual entity.</span></span>  

#### <a name="related-patterns-and-guidance"></a><span data-ttu-id="a9900-755">Vägledning och relaterade mönster</span><span class="sxs-lookup"><span data-stu-id="a9900-755">Related patterns and guidance</span></span>
<span data-ttu-id="a9900-756">hello kan följande mönster och guider även vara relevanta när du implementerar det här mönstret:</span><span class="sxs-lookup"><span data-stu-id="a9900-756">hello following patterns and guidance may also be relevant when implementing this pattern:</span></span>  

* [<span data-ttu-id="a9900-757">Mönster för stora entiteter</span><span class="sxs-lookup"><span data-stu-id="a9900-757">Large entities pattern</span></span>](#large-entities-pattern)  
* [<span data-ttu-id="a9900-758">Merge eller ersätta</span><span class="sxs-lookup"><span data-stu-id="a9900-758">Merge or replace</span></span>](#merge-or-replace)  
* <span data-ttu-id="a9900-759">[Överensstämmelse transaktioner mönster](#eventually-consistent-transactions-pattern) (om du lagrar hello dataserien i en blob)</span><span class="sxs-lookup"><span data-stu-id="a9900-759">[Eventually consistent transactions pattern](#eventually-consistent-transactions-pattern) (if you are storing hello data series in a blob)</span></span>  

### <a name="wide-entities-pattern"></a><span data-ttu-id="a9900-760">Wide entiteter mönster</span><span class="sxs-lookup"><span data-stu-id="a9900-760">Wide entities pattern</span></span>
<span data-ttu-id="a9900-761">Använda flera logiska enheter som fysiska entiteter toostore med mer än 252 egenskaper.</span><span class="sxs-lookup"><span data-stu-id="a9900-761">Use multiple physical entities toostore logical entities with more than 252 properties.</span></span>  

#### <a name="context-and-problem"></a><span data-ttu-id="a9900-762">Kontexten och problem</span><span class="sxs-lookup"><span data-stu-id="a9900-762">Context and problem</span></span>
<span data-ttu-id="a9900-763">En enskild entitet kan ha högst 252 egenskaper (exklusive hello obligatoriska Systemegenskaper) och kan inte lagra mer än 1 MB data totalt.</span><span class="sxs-lookup"><span data-stu-id="a9900-763">An individual entity can have no more than 252 properties (excluding hello mandatory system properties) and cannot store more than 1 MB of data in total.</span></span> <span data-ttu-id="a9900-764">I en relationsdatabas, skulle du normalt får avrunda några gränser för hello storleken på en rad att lägga till en ny tabell och framtvinga en 1-till-1-relation mellan dem.</span><span class="sxs-lookup"><span data-stu-id="a9900-764">In a relational database, you would typically get round any limits on hello size of a row by adding a new table and enforcing a 1-to-1 relationship between them.</span></span>  

#### <a name="solution"></a><span data-ttu-id="a9900-765">Lösning</span><span class="sxs-lookup"><span data-stu-id="a9900-765">Solution</span></span>
<span data-ttu-id="a9900-766">Du kan lagra flera entiteter toorepresent ett enda stort företag objekt med mer än 252 egenskaper med hello tabelltjänsten.</span><span class="sxs-lookup"><span data-stu-id="a9900-766">Using hello Table service, you can store multiple entities toorepresent a single large business object with more than 252 properties.</span></span> <span data-ttu-id="a9900-767">Om du vill toostore antalet hello antalet IM-meddelanden som skickas av medarbetaren för hello senaste 365 dagarna, kan du använda följande design som använder två entiteter med olika scheman hello:</span><span class="sxs-lookup"><span data-stu-id="a9900-767">For example, if you want toostore a count of hello number of IM messages sent by each employee for hello last 365 days, you could use hello following design that uses two entities with different schemas:</span></span>  

![][24]

<span data-ttu-id="a9900-768">Du kan använda en EGT om du behöver toomake en ändring som behöver uppdateras både entiteter tookeep dem synkroniserade med varandra.</span><span class="sxs-lookup"><span data-stu-id="a9900-768">If you need toomake a change that requires updating both entities tookeep them synchronized with each other you can use an EGT.</span></span> <span data-ttu-id="a9900-769">Annars kan du använda en enda merge tooupdate hello meddelandet antal för en viss dag.</span><span class="sxs-lookup"><span data-stu-id="a9900-769">Otherwise, you can use a single merge operation tooupdate hello message count for a specific day.</span></span> <span data-ttu-id="a9900-770">tooretrieve alla hello data för en enskild medarbetare som du måste hämta båda enheter som du kan göra med två effektivt begäranden som använder både ett **PartitionKey** och en **RowKey** värde.</span><span class="sxs-lookup"><span data-stu-id="a9900-770">tooretrieve all hello data for an individual employee you must retrieve both entities, which you can do with two efficient requests that use both a **PartitionKey** and a **RowKey** value.</span></span>  

#### <a name="issues-and-considerations"></a><span data-ttu-id="a9900-771">Problem och överväganden</span><span class="sxs-lookup"><span data-stu-id="a9900-771">Issues and considerations</span></span>
<span data-ttu-id="a9900-772">Överväg att hello följande punkter när du bestämmer hur tooimplement detta mönster:</span><span class="sxs-lookup"><span data-stu-id="a9900-772">Consider hello following points when deciding how tooimplement this pattern:</span></span>  

* <span data-ttu-id="a9900-773">Hämtar en fullständig logisk entitet omfattar minst två lagringstransaktioner: en tooretrieve fysisk entitet.</span><span class="sxs-lookup"><span data-stu-id="a9900-773">Retrieving a complete logical entity involves at least two storage transactions: one tooretrieve each physical entity.</span></span>  

#### <a name="when-toouse-this-pattern"></a><span data-ttu-id="a9900-774">När toouse det här mönstret</span><span class="sxs-lookup"><span data-stu-id="a9900-774">When toouse this pattern</span></span>
<span data-ttu-id="a9900-775">Använd det här mönstret när måste toostore enheter vars storlek eller ett antal egenskaper överskrider hello gränserna för en enskild entitet i hello tabelltjänst.</span><span class="sxs-lookup"><span data-stu-id="a9900-775">Use this pattern when  need toostore entities whose size or number of properties exceeds hello limits for an individual entity in hello Table service.</span></span>  

#### <a name="related-patterns-and-guidance"></a><span data-ttu-id="a9900-776">Vägledning och relaterade mönster</span><span class="sxs-lookup"><span data-stu-id="a9900-776">Related patterns and guidance</span></span>
<span data-ttu-id="a9900-777">hello kan följande mönster och guider även vara relevanta när du implementerar det här mönstret:</span><span class="sxs-lookup"><span data-stu-id="a9900-777">hello following patterns and guidance may also be relevant when implementing this pattern:</span></span>  

* [<span data-ttu-id="a9900-778">Entiteten gruppera transaktioner</span><span class="sxs-lookup"><span data-stu-id="a9900-778">Entity Group Transactions</span></span>](#entity-group-transactions)
* [<span data-ttu-id="a9900-779">Merge eller ersätta</span><span class="sxs-lookup"><span data-stu-id="a9900-779">Merge or replace</span></span>](#merge-or-replace)

### <a name="large-entities-pattern"></a><span data-ttu-id="a9900-780">Mönster för stora entiteter</span><span class="sxs-lookup"><span data-stu-id="a9900-780">Large entities pattern</span></span>
<span data-ttu-id="a9900-781">Använda blob storage toostore stora värden.</span><span class="sxs-lookup"><span data-stu-id="a9900-781">Use blob storage toostore large property values.</span></span>  

#### <a name="context-and-problem"></a><span data-ttu-id="a9900-782">Kontexten och problem</span><span class="sxs-lookup"><span data-stu-id="a9900-782">Context and problem</span></span>
<span data-ttu-id="a9900-783">En enskild entitet kan inte lagra mer än 1 MB data totalt.</span><span class="sxs-lookup"><span data-stu-id="a9900-783">An individual entity cannot store more than 1 MB of data in total.</span></span> <span data-ttu-id="a9900-784">Om en eller flera av dina egenskaper lagrar värden som gör hello totala storleken på din enhet tooexceed detta värde kan lagra du inte hello hela entiteten i hello tabelltjänsten.</span><span class="sxs-lookup"><span data-stu-id="a9900-784">If one or several of your properties store values that cause hello total size of your entity tooexceed this value, you cannot store hello entire entity in hello Table service.</span></span>  

#### <a name="solution"></a><span data-ttu-id="a9900-785">Lösning</span><span class="sxs-lookup"><span data-stu-id="a9900-785">Solution</span></span>
<span data-ttu-id="a9900-786">Om entiteten överskrider 1 MB i storlek eftersom en eller flera egenskaper innehåller stora mängder data kan du lagra data i hello Blob-tjänsten och spara hello hello blob-adress i en egenskap i hello entitet.</span><span class="sxs-lookup"><span data-stu-id="a9900-786">If your entity exceeds 1 MB in size because one or more properties contain a large amount of data, you can store data in hello Blob service and then store hello address of hello blob in a property in hello entity.</span></span> <span data-ttu-id="a9900-787">Du kan exempelvis lagra hello foto av en medarbetare i blob storage och lagrar en länk toohello foto i hello **foto** egenskap för dina medarbetare entitet:</span><span class="sxs-lookup"><span data-stu-id="a9900-787">For example, you can store hello photo of an employee in blob storage and store a link toohello photo in hello **Photo** property of your employee entity:</span></span>  

![][25]

#### <a name="issues-and-considerations"></a><span data-ttu-id="a9900-788">Problem och överväganden</span><span class="sxs-lookup"><span data-stu-id="a9900-788">Issues and considerations</span></span>
<span data-ttu-id="a9900-789">Överväg att hello följande punkter när du bestämmer hur tooimplement detta mönster:</span><span class="sxs-lookup"><span data-stu-id="a9900-789">Consider hello following points when deciding how tooimplement this pattern:</span></span>  

* <span data-ttu-id="a9900-790">toomaintain slutliga konsekvensen mellan hello entiteten i hello tabelltjänsten och hello data i hello Blob-tjänsten använder hello [överensstämmelse transaktioner mönster](#eventually-consistent-transactions-pattern) toomaintain-enheterna.</span><span class="sxs-lookup"><span data-stu-id="a9900-790">toomaintain eventual consistency between hello entity in hello Table service and hello data in hello Blob service, use hello [Eventually consistent transactions pattern](#eventually-consistent-transactions-pattern) toomaintain your entities.</span></span>
* <span data-ttu-id="a9900-791">Hämtar en fullständig entitet omfattar minst två lagringstransaktioner: en tooretrieve hello entitet och en tooretrieve hello blob-data.</span><span class="sxs-lookup"><span data-stu-id="a9900-791">Retrieving a complete entity involves at least two storage transactions: one tooretrieve hello entity and one tooretrieve hello blob data.</span></span>  

#### <a name="when-toouse-this-pattern"></a><span data-ttu-id="a9900-792">När toouse det här mönstret</span><span class="sxs-lookup"><span data-stu-id="a9900-792">When toouse this pattern</span></span>
<span data-ttu-id="a9900-793">Använd det här mönstret när du behöver toostore enheter vars storlek överskrider hello gränserna för en enskild entitet i hello tabelltjänsten.</span><span class="sxs-lookup"><span data-stu-id="a9900-793">Use this pattern when you need toostore entities whose size exceeds hello limits for an individual entity in hello Table service.</span></span>  

#### <a name="related-patterns-and-guidance"></a><span data-ttu-id="a9900-794">Vägledning och relaterade mönster</span><span class="sxs-lookup"><span data-stu-id="a9900-794">Related patterns and guidance</span></span>
<span data-ttu-id="a9900-795">hello kan följande mönster och guider även vara relevanta när du implementerar det här mönstret:</span><span class="sxs-lookup"><span data-stu-id="a9900-795">hello following patterns and guidance may also be relevant when implementing this pattern:</span></span>  

* [<span data-ttu-id="a9900-796">Mönster för överensstämmelse transaktioner</span><span class="sxs-lookup"><span data-stu-id="a9900-796">Eventually consistent transactions pattern</span></span>](#eventually-consistent-transactions-pattern)  
* [<span data-ttu-id="a9900-797">Wide entiteter mönster</span><span class="sxs-lookup"><span data-stu-id="a9900-797">Wide entities pattern</span></span>](#wide-entities-pattern)

<a name="prepend-append-anti-pattern"></a>

### <a name="prependappend-anti-pattern"></a><span data-ttu-id="a9900-798">Lägga/lägga till ett mönster</span><span class="sxs-lookup"><span data-stu-id="a9900-798">Prepend/append anti-pattern</span></span>
<span data-ttu-id="a9900-799">Öka skalbarheten när du har en stor volym med infogningar genom att sprida hello infogningar över flera partitioner.</span><span class="sxs-lookup"><span data-stu-id="a9900-799">Increase scalability when you have a high volume of inserts by spreading hello inserts across multiple partitions.</span></span>  

#### <a name="context-and-problem"></a><span data-ttu-id="a9900-800">Kontexten och problem</span><span class="sxs-lookup"><span data-stu-id="a9900-800">Context and problem</span></span>
<span data-ttu-id="a9900-801">Tillagt eller lägger till entiteter tooyour lagras entiteter vanligtvis resulterar i hello programmet att först lägga till nya entiteter toohello eller sista partition av en sekvens av partitioner.</span><span class="sxs-lookup"><span data-stu-id="a9900-801">Prepending or appending entities tooyour stored entities typically results in hello application adding new entities toohello first or last partition of a sequence of partitions.</span></span> <span data-ttu-id="a9900-802">Alla hello infogningar vid något tillfälle finns i det här fallet äger rum i hello samma partition, skapar en hotspot som förhindrar att hello tabelltjänsten belastningsutjämning infogar över flera noder och vilket kan orsaka att ditt program toohit hello skalbarhet mål för partitionen.</span><span class="sxs-lookup"><span data-stu-id="a9900-802">In this case, all of hello inserts at any given time are taking place in hello same partition, creating a hotspot that prevents hello table service from load balancing inserts across multiple nodes, and possibly causing your application toohit hello scalability targets for partition.</span></span> <span data-ttu-id="a9900-803">Till exempel om du har ett program som loggar nätverks- och åtkomst av anställda, en entitet struktur som på bilden nedan kan resultera i att hello aktuell timme partition blir en hotspot om hello mängder transaktioner når hello skalbarhet mål för en enskild partition:</span><span class="sxs-lookup"><span data-stu-id="a9900-803">For example, if you have an application that logs network and resource access by employees, then an entity structure as shown below could result in hello current hour's partition becoming a hotspot if hello volume of transactions reaches hello scalability target for an individual partition:</span></span>  

![][26]

#### <a name="solution"></a><span data-ttu-id="a9900-804">Lösning</span><span class="sxs-lookup"><span data-stu-id="a9900-804">Solution</span></span>
<span data-ttu-id="a9900-805">hello förhindrar följande alternativa entitet struktur en hotspot på en viss partition som hello program loggar händelser:</span><span class="sxs-lookup"><span data-stu-id="a9900-805">hello following alternative entity structure avoids a hotspot on any particular partition as hello application logs events:</span></span>  

![][27]

<span data-ttu-id="a9900-806">Observera med det här exemplet hur både hello **PartitionKey** och **RowKey** är sammansatta nycklar.</span><span class="sxs-lookup"><span data-stu-id="a9900-806">Notice with this example how both hello **PartitionKey** and **RowKey** are compound keys.</span></span> <span data-ttu-id="a9900-807">Hej **PartitionKey** använder både hello avdelning och medarbetare id toodistribute hello loggning på flera partitioner.</span><span class="sxs-lookup"><span data-stu-id="a9900-807">hello **PartitionKey** uses both hello department and employee id toodistribute hello logging across multiple partitions.</span></span>  

#### <a name="issues-and-considerations"></a><span data-ttu-id="a9900-808">Problem och överväganden</span><span class="sxs-lookup"><span data-stu-id="a9900-808">Issues and considerations</span></span>
<span data-ttu-id="a9900-809">Överväg att hello följande punkter när du bestämmer hur tooimplement detta mönster:</span><span class="sxs-lookup"><span data-stu-id="a9900-809">Consider hello following points when deciding how tooimplement this pattern:</span></span>  

* <span data-ttu-id="a9900-810">Innehåller hello alternativa nyckelstruktur som undviker att skapa varm partitioner på infogningar effektivt stöd hello frågor klientprogrammet gör?</span><span class="sxs-lookup"><span data-stu-id="a9900-810">Does hello alternative key structure that avoids creating hot partitions on inserts efficiently support hello queries your client application makes?</span></span>  
* <span data-ttu-id="a9900-811">Innebär förväntade volymen av transaktioner du förmodligen tooreach hello skalbarhetsmål för en enskild partition och begränsas av hello lagringstjänsten?</span><span class="sxs-lookup"><span data-stu-id="a9900-811">Does your anticipated volume of transactions mean that you are likely tooreach hello scalability targets for an individual partition and be throttled by hello storage service?</span></span>  

#### <a name="when-toouse-this-pattern"></a><span data-ttu-id="a9900-812">När toouse det här mönstret</span><span class="sxs-lookup"><span data-stu-id="a9900-812">When toouse this pattern</span></span>
<span data-ttu-id="a9900-813">Undvik hello lägga/lägga till ett mönster när volymen av transaktioner är sannolikt tooresult i begränsning av hello lagringstjänsten när du använder en varm partition.</span><span class="sxs-lookup"><span data-stu-id="a9900-813">Avoid hello prepend/append anti-pattern when your volume of transactions is likely tooresult in throttling by hello storage service when you access a hot partition.</span></span>  

#### <a name="related-patterns-and-guidance"></a><span data-ttu-id="a9900-814">Vägledning och relaterade mönster</span><span class="sxs-lookup"><span data-stu-id="a9900-814">Related patterns and guidance</span></span>
<span data-ttu-id="a9900-815">hello kan följande mönster och guider även vara relevanta när du implementerar det här mönstret:</span><span class="sxs-lookup"><span data-stu-id="a9900-815">hello following patterns and guidance may also be relevant when implementing this pattern:</span></span>  

* [<span data-ttu-id="a9900-816">Sammansatt nyckel mönster</span><span class="sxs-lookup"><span data-stu-id="a9900-816">Compound key pattern</span></span>](#compound-key-pattern)  
* [<span data-ttu-id="a9900-817">Loggen pilslut mönster</span><span class="sxs-lookup"><span data-stu-id="a9900-817">Log tail pattern</span></span>](#log-tail-pattern)  
* [<span data-ttu-id="a9900-818">Ändra entiteter</span><span class="sxs-lookup"><span data-stu-id="a9900-818">Modifying entities</span></span>](#modifying-entities)  

### <a name="log-data-anti-pattern"></a><span data-ttu-id="a9900-819">Loggen anti datamönster</span><span class="sxs-lookup"><span data-stu-id="a9900-819">Log data anti-pattern</span></span>
<span data-ttu-id="a9900-820">Normalt bör du använda hello Blob-tjänsten i stället för hello toostore tjänstlogginformation på tabellen.</span><span class="sxs-lookup"><span data-stu-id="a9900-820">Typically, you should use hello Blob service instead of hello Table service toostore log data.</span></span>  

#### <a name="context-and-problem"></a><span data-ttu-id="a9900-821">Kontexten och problem</span><span class="sxs-lookup"><span data-stu-id="a9900-821">Context and problem</span></span>
<span data-ttu-id="a9900-822">Ett vanligt användningsfall för loggdata är tooretrieve ett urval av loggposter för ett visst datum/tid-intervall: till exempel önskade toofind alla hello fel och kritiska meddelanden som tillämpningsprogrammet loggade mellan 15:04 och 15:06 på ett visst datum.</span><span class="sxs-lookup"><span data-stu-id="a9900-822">A common use case for log data is tooretrieve a selection of log entries for a specific date/time range: for example, you want toofind all hello error and critical messages that your application logged between 15:04 and 15:06 on a specific date.</span></span> <span data-ttu-id="a9900-823">Du inte vill toouse hello datum och tid för hello logga meddelandet toodetermine hello partition du sparar logg entiteter till: att resulterar i en varm partition eftersom samtidigt, delar alla hello loggen entiteter hello samma **PartitionKey** värdet (i avsnittet hello [Prepend/lägga till ett mönster](#prepend-append-anti-pattern)).</span><span class="sxs-lookup"><span data-stu-id="a9900-823">You do not want toouse hello date and time of hello log message toodetermine hello partition you save log entities to: that results in a hot partition because at any given time, all hello log entities will share hello same **PartitionKey** value (see hello section [Prepend/append anti-pattern](#prepend-append-anti-pattern)).</span></span> <span data-ttu-id="a9900-824">Hello efter entitet schemat för ett loggmeddelande resulterar i en varm partition eftersom programmet hello skriver alla loggmeddelanden toohello partition för hello aktuella datum och tid:</span><span class="sxs-lookup"><span data-stu-id="a9900-824">For example, hello following entity schema for a log message results in a hot partition because hello application writes all log messages toohello partition for hello current date and hour:</span></span>  

![][28]

<span data-ttu-id="a9900-825">I det här exemplet hello **RowKey** omfattar hello datum och tid för hello logga meddelandet tooensure loggmeddelanden lagras i tidsvärdet ordning och omfattar en meddelande-id om flera loggmeddelanden dela hello samma datum och tid.</span><span class="sxs-lookup"><span data-stu-id="a9900-825">In this example, hello **RowKey** includes hello date and time of hello log message tooensure that log messages are stored sorted in date/time order, and includes a message id in case multiple log messages share hello same date and time.</span></span>  

<span data-ttu-id="a9900-826">En annan metod är toouse en **PartitionKey** som säkerställer att programmet hello skriver meddelanden över ett antal partitioner.</span><span class="sxs-lookup"><span data-stu-id="a9900-826">Another approach is toouse a **PartitionKey** that ensures that hello application writes messages across a range of partitions.</span></span> <span data-ttu-id="a9900-827">Om hello källan för hello loggmeddelande erbjuder ett sätt toodistribute meddelanden mellan många partitioner, kan du använda hello efter entitet schemat:</span><span class="sxs-lookup"><span data-stu-id="a9900-827">For example, if hello source of hello log message provides a way toodistribute messages across many partitions, you could use hello following entity schema:</span></span>  

![][29]

<span data-ttu-id="a9900-828">Hello problem med det här schemat är dock att tooretrieve alla hello loggmeddelanden för ett visst tidsintervall måste du söka varje partition i hello tabell.</span><span class="sxs-lookup"><span data-stu-id="a9900-828">However, hello problem with this schema is that tooretrieve all hello log messages for a specific time span you must search every partition in hello table.</span></span>

#### <a name="solution"></a><span data-ttu-id="a9900-829">Lösning</span><span class="sxs-lookup"><span data-stu-id="a9900-829">Solution</span></span>
<span data-ttu-id="a9900-830">hello föregående avsnitt markerade hello problemet med försök toouse hello loggposter för tabellen service toostore och förslag på två otillräckliga, designerna.</span><span class="sxs-lookup"><span data-stu-id="a9900-830">hello previous section highlighted hello problem of trying toouse hello Table service toostore log entries and suggested two, unsatisfactory, designs.</span></span> <span data-ttu-id="a9900-831">En lösning som ledde tooa varm partition med hello risk för prestandaproblem skriva loggmeddelanden; hello resulterade andra lösning i dåliga prestanda på grund av hello krav tooscan varje partition i tabellen hello tooretrieve loggmeddelanden för ett visst tidsintervall.</span><span class="sxs-lookup"><span data-stu-id="a9900-831">One solution led tooa hot partition with hello risk of poor performance writing log messages; hello other solution resulted in poor query performance because of hello requirement tooscan every partition in hello table tooretrieve log messages for a specific time span.</span></span> <span data-ttu-id="a9900-832">BLOB storage erbjuder en bättre lösning för den här typen av scenario och detta är hur Azure Storage Analytics lagrar hello loggdata som samlas in.</span><span class="sxs-lookup"><span data-stu-id="a9900-832">Blob storage offers a better solution for this type of scenario and this is how Azure Storage Analytics stores hello log data it collects.</span></span>  

<span data-ttu-id="a9900-833">Det här avsnittet beskrivs hur Storage Analytics lagrar loggdata i blob storage som en illustration av den här metoden toostoring data som du vanligtvis fråga med intervallet.</span><span class="sxs-lookup"><span data-stu-id="a9900-833">This section outlines how Storage Analytics stores log data in blob storage as an illustration of this approach toostoring data that you typically query by range.</span></span>  

<span data-ttu-id="a9900-834">Storage Analytics lagrar meddelanden i en avgränsad format i flera blobbar.</span><span class="sxs-lookup"><span data-stu-id="a9900-834">Storage Analytics stores log messages in a delimited format in multiple blobs.</span></span> <span data-ttu-id="a9900-835">hello avgränsade format gör det enkelt för en klient programdata tooparse hello i hello loggmeddelande.</span><span class="sxs-lookup"><span data-stu-id="a9900-835">hello delimited format makes it easy for a client application tooparse hello data in hello log message.</span></span>  

<span data-ttu-id="a9900-836">Storage Analytics använder en namngivningskonvention för blob som gör att du toolocate hello blob (eller BLOB) som innehåller hello loggmeddelanden som du söker.</span><span class="sxs-lookup"><span data-stu-id="a9900-836">Storage Analytics uses a naming convention for blobs that enables you toolocate hello blob (or blobs) that contain hello log messages for which you are searching.</span></span> <span data-ttu-id="a9900-837">Till exempel innehåller en blob med namnet ”queue/2014/07/31/1800/000001.log” loggmeddelanden som handlar om toohello Kötjänsten för hello timma med början vid 18:00 31 juli 2014.</span><span class="sxs-lookup"><span data-stu-id="a9900-837">For example, a blob named "queue/2014/07/31/1800/000001.log" contains log messages that relate toohello queue service for hello hour starting at 18:00 on 31 July 2014.</span></span> <span data-ttu-id="a9900-838">Hej ”000001” anger att detta är hello första loggfilen för den här perioden.</span><span class="sxs-lookup"><span data-stu-id="a9900-838">hello "000001" indicates that this is hello first log file for this period.</span></span> <span data-ttu-id="a9900-839">Storage Analytics registrerar också hello tidsstämplar av hello först och logga senaste meddelanden som lagras i hello-filen som en del av hello blob-metadata.</span><span class="sxs-lookup"><span data-stu-id="a9900-839">Storage Analytics also records hello timestamps of hello first and last log messages stored in hello file as part of hello blob's metadata.</span></span> <span data-ttu-id="a9900-840">hello API för blob storage kan du hitta blobbar i en behållare baserat på ett namnprefix: toolocate alla hello blob som innehåller kön logga data för hello timma med början vid 18:00, kan du använda hello prefixet ”kö/2014/07/31/1800”.</span><span class="sxs-lookup"><span data-stu-id="a9900-840">hello API for blob storage enables you locate blobs in a container based on a name prefix: toolocate all hello blobs that contain queue log data for hello hour starting at 18:00, you can use hello prefix "queue/2014/07/31/1800."</span></span>  

<span data-ttu-id="a9900-841">Storage Analytics buffrar loggmeddelanden internt och uppdaterar sedan regelbundet hello lämpliga blob eller skapar en ny hello senaste batchen med loggposter.</span><span class="sxs-lookup"><span data-stu-id="a9900-841">Storage Analytics buffers log messages internally and then periodically updates hello appropriate blob or creates a new one with hello latest batch of log entries.</span></span> <span data-ttu-id="a9900-842">Detta minskar antalet hello av skrivningar toohello blob-tjänsten måste utföras.</span><span class="sxs-lookup"><span data-stu-id="a9900-842">This reduces hello number of writes it must perform toohello blob service.</span></span>  

<span data-ttu-id="a9900-843">Om du implementerar en liknande lösning i ditt eget program måste du tänka på hur toomanage hello säkerhetsaspekten tillförlitlighet (skriver varje logg post tooblob lagring när den uppstår) och kostnad och skalbarhet (buffring uppdateringar i ditt program och skrivning av dem tooblob lagring i batchar).</span><span class="sxs-lookup"><span data-stu-id="a9900-843">If you are implementing a similar solution in your own application, you must consider how toomanage hello trade-off between reliability (writing every log entry tooblob storage as it happens) and cost and scalability (buffering updates in your application and writing them tooblob storage in batches).</span></span>  

#### <a name="issues-and-considerations"></a><span data-ttu-id="a9900-844">Problem och överväganden</span><span class="sxs-lookup"><span data-stu-id="a9900-844">Issues and considerations</span></span>
<span data-ttu-id="a9900-845">Överväg följande punkter när du bestämmer hur toostore logga data hello:</span><span class="sxs-lookup"><span data-stu-id="a9900-845">Consider hello following points when deciding how toostore log data:</span></span>  

* <span data-ttu-id="a9900-846">Om du skapar en tabelldesign som undviker potentiella hot partitioner kan hända att du inte kommer åt din loggdata effektivt.</span><span class="sxs-lookup"><span data-stu-id="a9900-846">If you create a table design that avoids potential hot partitions, you may find that you cannot access your log data efficiently.</span></span>  
* <span data-ttu-id="a9900-847">tooprocess logga data, en klient måste ofta tooload många poster.</span><span class="sxs-lookup"><span data-stu-id="a9900-847">tooprocess log data, a client often needs tooload many records.</span></span>  
* <span data-ttu-id="a9900-848">Även om loggdata är ofta strukturerad, kan blob-lagring vara en bättre lösning.</span><span class="sxs-lookup"><span data-stu-id="a9900-848">Although log data is often structured, blob storage may be a better solution.</span></span>  

### <a name="implementation-considerations"></a><span data-ttu-id="a9900-849">Implementering</span><span class="sxs-lookup"><span data-stu-id="a9900-849">Implementation considerations</span></span>
<span data-ttu-id="a9900-850">Det här avsnittet beskrivs några av hello överväganden toobear i åtanke när du implementerar hello mönster som beskrivs i föregående avsnitt i hello.</span><span class="sxs-lookup"><span data-stu-id="a9900-850">This section discusses some of hello considerations toobear in mind when you implement hello patterns described in hello previous sections.</span></span> <span data-ttu-id="a9900-851">De flesta av det här avsnittet använder exempel skrivna i C# som använder hello Storage-klientbibliotek (version 4.3.0 när hello skrivning).</span><span class="sxs-lookup"><span data-stu-id="a9900-851">Most of this section uses examples written in C# that use hello Storage Client Library (version 4.3.0 at hello time of writing).</span></span>  

### <a name="retrieving-entities"></a><span data-ttu-id="a9900-852">Hämta entiteter</span><span class="sxs-lookup"><span data-stu-id="a9900-852">Retrieving entities</span></span>
<span data-ttu-id="a9900-853">Enligt beskrivningen i avsnittet hello [Design för frågor](#design-for-querying), hello effektivaste frågan är en punkt-fråga.</span><span class="sxs-lookup"><span data-stu-id="a9900-853">As discussed in hello section [Design for querying](#design-for-querying), hello most efficient query is a point query.</span></span> <span data-ttu-id="a9900-854">Men i vissa fall kanske du måste tooretrieve flera entiteter.</span><span class="sxs-lookup"><span data-stu-id="a9900-854">However, in some scenarios you may need tooretrieve multiple entities.</span></span> <span data-ttu-id="a9900-855">Det här avsnittet beskrivs några vanliga metoder tooretrieving enheter med hjälp av hello Storage-klientbiblioteket.</span><span class="sxs-lookup"><span data-stu-id="a9900-855">This section describes some common approaches tooretrieving entities using hello Storage Client Library.</span></span>  

#### <a name="executing-a-point-query-using-hello-storage-client-library"></a><span data-ttu-id="a9900-856">Köra en punkt-fråga med hello Storage-klientbibliotek</span><span class="sxs-lookup"><span data-stu-id="a9900-856">Executing a point query using hello Storage Client Library</span></span>
<span data-ttu-id="a9900-857">hello enklaste sättet tooexecute en punkt-fråga är toouse hello **hämta** tabell åtgärden enligt följande kodavsnitt i C# hello som hämtar en entitet med en **PartitionKey** ”försäljning” och en  **RowKey** värdets ”212”:</span><span class="sxs-lookup"><span data-stu-id="a9900-857">hello easiest way tooexecute a point query is toouse hello **Retrieve** table operation as shown in hello following C# code snippet that retrieves an entity with a **PartitionKey** of value "Sales" and a **RowKey** of value "212":</span></span>  

```csharp
TableOperation retrieveOperation = TableOperation.Retrieve<EmployeeEntity>("Sales", "212");
var retrieveResult = employeeTable.Execute(retrieveOperation);
if (retrieveResult.Result != null)
{
    EmployeeEntity employee = (EmployeeEntity)retrieveResult.Result;
    ...
}  
```

<span data-ttu-id="a9900-858">Observera hur det här exemplet förväntar hello entitet hämtar toobe av typen **EmployeeEntity**.</span><span class="sxs-lookup"><span data-stu-id="a9900-858">Notice how this example expects hello entity it retrieves toobe of type **EmployeeEntity**.</span></span>  

#### <a name="retrieving-multiple-entities-using-linq"></a><span data-ttu-id="a9900-859">Hämtning av flera enheter med hjälp av LINQ</span><span class="sxs-lookup"><span data-stu-id="a9900-859">Retrieving multiple entities using LINQ</span></span>
<span data-ttu-id="a9900-860">Du kan hämta flera entiteter med hjälp av LINQ med Storage-klientbiblioteket och ange en fråga med en **där** satsen.</span><span class="sxs-lookup"><span data-stu-id="a9900-860">You can retrieve multiple entities by using LINQ with Storage Client Library and specifying a query with a **where** clause.</span></span> <span data-ttu-id="a9900-861">tooavoid en tabellgenomsökning, bör du alltid skriva hello **PartitionKey** värdet i hello där-satsen, och om möjligt hello **RowKey** värdet tooavoid tabell och partition genomsökningar.</span><span class="sxs-lookup"><span data-stu-id="a9900-861">tooavoid a table scan, you should always include hello **PartitionKey** value in hello where clause, and if possible hello **RowKey** value tooavoid table and partition scans.</span></span> <span data-ttu-id="a9900-862">Hej tabelltjänsten stöder en begränsad uppsättning jämförelse operatorer (större än, större än eller lika med, mindre än, mindre än eller lika med, lika och inte lika) toouse i hello där satsen.</span><span class="sxs-lookup"><span data-stu-id="a9900-862">hello table service supports a limited set of comparison operators (greater than, greater than or equal, less than, less than or equal, equal, and not equal) toouse in hello where clause.</span></span> <span data-ttu-id="a9900-863">hello följande kodfragment för C# hittar alla hello anställda vars efternamn börjar med ”B” (förutsatt att hello **RowKey** lagrar hello efternamn) i hello försäljningsavdelningen (förutsatt att hello **PartitionKey** lagrar hello avdelningsnamn):</span><span class="sxs-lookup"><span data-stu-id="a9900-863">hello following C# code snippet finds all hello employees whose last name starts with "B" (assuming that hello **RowKey** stores hello last name) in hello sales department (assuming hello **PartitionKey** stores hello department name):</span></span>  

```csharp
TableQuery<EmployeeEntity> employeeQuery = employeeTable.CreateQuery<EmployeeEntity>();
var query = (from employee in employeeQuery
            where employee.PartitionKey == "Sales" &&
            employee.RowKey.CompareTo("B") >= 0 &&
            employee.RowKey.CompareTo("C") < 0
            select employee).AsTableQuery();
var employees = query.Execute();  
```

<span data-ttu-id="a9900-864">Observera hur hello-frågan anger både en **RowKey** och en **PartitionKey** tooensure bättre prestanda.</span><span class="sxs-lookup"><span data-stu-id="a9900-864">Notice how hello query specifies both a **RowKey** and a **PartitionKey** tooensure better performance.</span></span>  

<span data-ttu-id="a9900-865">hello följande kodexempel visar hur motsvarande fungerar med flytande hello-API (Mer information om flytande API: er i allmänhet finns [bästa praxis för att designa en flytande API](http://visualstudiomagazine.com/articles/2013/12/01/best-practices-for-designing-a-fluent-api.aspx)):</span><span class="sxs-lookup"><span data-stu-id="a9900-865">hello following code sample shows equivalent functionality using hello fluent API (for more information about fluent APIs in general, see [Best Practices for Designing a Fluent API](http://visualstudiomagazine.com/articles/2013/12/01/best-practices-for-designing-a-fluent-api.aspx)):</span></span>  

```csharp
TableQuery<EmployeeEntity> employeeQuery = new TableQuery<EmployeeEntity>().Where(
    TableQuery.CombineFilters(
    TableQuery.CombineFilters(
        TableQuery.GenerateFilterCondition(
    "PartitionKey", QueryComparisons.Equal, "Sales"),
    TableOperators.And,
    TableQuery.GenerateFilterCondition(
    "RowKey", QueryComparisons.GreaterThanOrEqual, "B")
),
TableOperators.And,
TableQuery.GenerateFilterCondition("RowKey", QueryComparisons.LessThan, "C")
    )
);
var employees = employeeTable.ExecuteQuery(employeeQuery);  
```

> [!NOTE]
> <span data-ttu-id="a9900-866">hello exempel omsluter flera **CombineFilters** metoder tooinclude hello tre filtervillkor.</span><span class="sxs-lookup"><span data-stu-id="a9900-866">hello sample nests multiple **CombineFilters** methods tooinclude hello three filter conditions.</span></span>  
> 
> 

#### <a name="retrieving-large-numbers-of-entities-from-a-query"></a><span data-ttu-id="a9900-867">Hämtar stort antal enheter från en fråga</span><span class="sxs-lookup"><span data-stu-id="a9900-867">Retrieving large numbers of entities from a query</span></span>
<span data-ttu-id="a9900-868">En optimal frågan returnerar en enskild entitet baserat på en **PartitionKey** värde och ett **RowKey** värde.</span><span class="sxs-lookup"><span data-stu-id="a9900-868">An optimal query returns an individual entity based on a **PartitionKey** value and a **RowKey** value.</span></span> <span data-ttu-id="a9900-869">I vissa fall kan du dock ha en krav tooreturn många entiteter från hello samma partitions eller ens från flera partitioner.</span><span class="sxs-lookup"><span data-stu-id="a9900-869">However, in some scenarios you may have a requirement tooreturn many entities from hello same partition or even from many partitions.</span></span>  

<span data-ttu-id="a9900-870">Alltid fullständigt bör du testa hello prestanda i dessa scenarier.</span><span class="sxs-lookup"><span data-stu-id="a9900-870">You should always fully test hello performance of your application in such scenarios.</span></span>  

<span data-ttu-id="a9900-871">En fråga mot hello tabelltjänsten kan returnera högst 1 000 enheter på en gång och kan utföra för högst fem sekunder.</span><span class="sxs-lookup"><span data-stu-id="a9900-871">A query against hello table service may return a maximum of 1,000 entities at one time and may execute for a maximum of five seconds.</span></span> <span data-ttu-id="a9900-872">Om hello resultatet innehåller fler än 1 000 enheter, om hello frågan slutfördes inte inom fem sekunder, eller om frågan hello korsar hello partition gräns, hello tabelltjänsten returnerar en fortsättning token tooenable hello klientens programmet toorequest hälsning Nästa uppsättning enheter.</span><span class="sxs-lookup"><span data-stu-id="a9900-872">If hello result set contains more than 1,000 entities, if hello query did not complete within five seconds, or if hello query crosses hello partition boundary, hello Table service returns a continuation token tooenable hello client application toorequest hello next set of entities.</span></span> <span data-ttu-id="a9900-873">Mer information om hur fortsättning tokens arbete finns [Timeout för fråga och sidbrytning](http://msdn.microsoft.com/library/azure/dd135718.aspx).</span><span class="sxs-lookup"><span data-stu-id="a9900-873">For more information about how continuation tokens work, see [Query Timeout and Pagination](http://msdn.microsoft.com/library/azure/dd135718.aspx).</span></span>  

<span data-ttu-id="a9900-874">Om du använder hello Storage-klientbibliotek hantera den automatiskt fortsättning token för dig som returnerar entiteter från hello tabelltjänsten.</span><span class="sxs-lookup"><span data-stu-id="a9900-874">If you are using hello Storage Client Library, it can automatically handle continuation tokens for you as it returns entities from hello Table service.</span></span> <span data-ttu-id="a9900-875">hello hanterar följande C# kodexempel använder hello Storage-klientbibliotek automatiskt fortsättning token om hello tabelltjänsten returnerar dem i ett svar:</span><span class="sxs-lookup"><span data-stu-id="a9900-875">hello following C# code sample using hello Storage Client Library automatically handles continuation tokens if hello table service returns them in a response:</span></span>  

```csharp
string filter = TableQuery.GenerateFilterCondition(
        "PartitionKey", QueryComparisons.Equal, "Sales");
TableQuery<EmployeeEntity> employeeQuery =
        new TableQuery<EmployeeEntity>().Where(filter);

var employees = employeeTable.ExecuteQuery(employeeQuery);
foreach (var emp in employees)
{
        ...
}  
```

<span data-ttu-id="a9900-876">Följande C#-kod hello hanterar fortsättning token explicit:</span><span class="sxs-lookup"><span data-stu-id="a9900-876">hello following C# code handles continuation tokens explicitly:</span></span>  

```csharp
string filter = TableQuery.GenerateFilterCondition(
        "PartitionKey", QueryComparisons.Equal, "Sales");
TableQuery<EmployeeEntity> employeeQuery =
        new TableQuery<EmployeeEntity>().Where(filter);

TableContinuationToken continuationToken = null;

do
{
        var employees = employeeTable.ExecuteQuerySegmented(
        employeeQuery, continuationToken);
    foreach (var emp in employees)
    {
    ...
    }
    continuationToken = employees.ContinuationToken;
} while (continuationToken != null);  
```

<span data-ttu-id="a9900-877">Du kan styra när programmet hämtar hello nästa segment av data med hjälp av fortsättning token explicit.</span><span class="sxs-lookup"><span data-stu-id="a9900-877">By using continuation tokens explicitly, you can control when your application retrieves hello next segment of data.</span></span> <span data-ttu-id="a9900-878">Till exempel kan ditt klientprogram kan användare toopage via hello entiteter som lagras i en tabell, en användare bestämma inte toopage via alla hello entiteter som hämtas av hello frågan så att programmet bara använda en fortsättning token tooretrieve hello nästa segment när hello användaren hade slutförts bläddring genom alla hello entiteter i hello aktuella segmentet.</span><span class="sxs-lookup"><span data-stu-id="a9900-878">For example, if your client application enables users toopage through hello entities stored in a table, a user may decide not toopage through all hello entities retrieved by hello query so your application would only use a continuation token tooretrieve hello next segment when hello user had finished paging through all hello entities in hello current segment.</span></span> <span data-ttu-id="a9900-879">Den här metoden har flera fördelar:</span><span class="sxs-lookup"><span data-stu-id="a9900-879">This approach has several benefits:</span></span>  

* <span data-ttu-id="a9900-880">Den låter dig toolimit hello mängden data tooretrieve från hello tabelltjänsten och att du flyttar över hello nätverk.</span><span class="sxs-lookup"><span data-stu-id="a9900-880">It enables you toolimit hello amount of data tooretrieve from hello Table service and that you move over hello network.</span></span>  
* <span data-ttu-id="a9900-881">Det gör du tooperform asynkrona i/o i .NET.</span><span class="sxs-lookup"><span data-stu-id="a9900-881">It enables you tooperform asynchronous IO in .NET.</span></span>  
* <span data-ttu-id="a9900-882">Den låter dig tooserialize hello fortsättning token toopersistent lagring så att du kan fortsätta i ett program kraschar hello-händelse.</span><span class="sxs-lookup"><span data-stu-id="a9900-882">It enables you tooserialize hello continuation token toopersistent storage so you can continue in hello event of an application crash.</span></span>  

> [!NOTE]
> <span data-ttu-id="a9900-883">En fortsättningstoken returnerar vanligtvis ett segment som innehåller 1 000 enheter, även om det kan vara färre.</span><span class="sxs-lookup"><span data-stu-id="a9900-883">A continuation token typically returns a segment containing 1,000 entities, although it may be fewer.</span></span> <span data-ttu-id="a9900-884">Detta gäller även hello om du begränsar hello antalet poster som en fråga som returnerar med hjälp av **ta** tooreturn hello första n entiteter som matchar sökvillkoren sökning: hello tabelltjänsten kan returnera ett segment som innehåller färre än n enheter längs med en fortsättning token tooenable hello du tooretrieve återstående entiteter.</span><span class="sxs-lookup"><span data-stu-id="a9900-884">This is also hello case if you limit hello number of entries a query returns by using **Take** tooreturn hello first n entities that match your lookup criteria: hello table service may return a segment containing fewer than n entities along with a continuation token tooenable you tooretrieve hello remaining entities.</span></span>  
> 
> 

<span data-ttu-id="a9900-885">hello visar följande C#-kod hur toomodify hello antal entiteter som returneras i ett segment:</span><span class="sxs-lookup"><span data-stu-id="a9900-885">hello following C# code shows how toomodify hello number of entities returned inside a segment:</span></span>  

```csharp
employeeQuery.TakeCount = 50;  
```

#### <a name="server-side-projection"></a><span data-ttu-id="a9900-886">Projektion av serversidan</span><span class="sxs-lookup"><span data-stu-id="a9900-886">Server-side projection</span></span>
<span data-ttu-id="a9900-887">En enda entitet kan ha upp too255 egenskaper och in too1 MB i storlek.</span><span class="sxs-lookup"><span data-stu-id="a9900-887">A single entity can have up too255 properties and be up too1 MB in size.</span></span> <span data-ttu-id="a9900-888">När du frågar hello tabell och hämta entiteter kan du kanske inte behöver alla hello egenskaper och kan undvika att överföra data i onödan (toohelp minska latensen och kostnaden).</span><span class="sxs-lookup"><span data-stu-id="a9900-888">When you query hello table and retrieve entities, you may not need all hello properties and can avoid transferring data unnecessarily (toohelp reduce latency and cost).</span></span> <span data-ttu-id="a9900-889">Du kan använda serversidan tootransfer bara hello projektionsegenskaper du behöver.</span><span class="sxs-lookup"><span data-stu-id="a9900-889">You can use server-side projection tootransfer just hello properties you need.</span></span> <span data-ttu-id="a9900-890">hello följande exempel är hämtar bara hello **e-post** egenskapen (tillsammans med **PartitionKey**, **RowKey**, **tidsstämpel**, och  **ETag**) från hello entiteter som valts av hello frågan.</span><span class="sxs-lookup"><span data-stu-id="a9900-890">hello following example is retrieves just hello **Email** property (along with **PartitionKey**, **RowKey**, **Timestamp**, and **ETag**) from hello entities selected by hello query.</span></span>  

```csharp
string filter = TableQuery.GenerateFilterCondition(
        "PartitionKey", QueryComparisons.Equal, "Sales");
List<string> columns = new List<string>() { "Email" };
TableQuery<EmployeeEntity> employeeQuery =
        new TableQuery<EmployeeEntity>().Where(filter).Select(columns);

var entities = employeeTable.ExecuteQuery(employeeQuery);
foreach (var e in entities)
{
        Console.WriteLine("RowKey: {0}, EmployeeEmail: {1}", e.RowKey, e.Email);
}  
```

<span data-ttu-id="a9900-891">Observera hur hello **RowKey** värdet är tillgängligt även om det inte ingick i hello lista över egenskaper tooretrieve.</span><span class="sxs-lookup"><span data-stu-id="a9900-891">Notice how hello **RowKey** value is available even though it was not included in hello list of properties tooretrieve.</span></span>  

### <a name="modifying-entities"></a><span data-ttu-id="a9900-892">Ändra entiteter</span><span class="sxs-lookup"><span data-stu-id="a9900-892">Modifying entities</span></span>
<span data-ttu-id="a9900-893">hello Storage-klientbibliotek kan toomodify entiteter som lagras i tabelltjänsten hello genom att lägga till, ta bort och uppdatera entiteter.</span><span class="sxs-lookup"><span data-stu-id="a9900-893">hello Storage Client Library enables you toomodify your entities stored in hello table service by inserting, deleting, and updating entities.</span></span> <span data-ttu-id="a9900-894">Du kan använda EGTs toobatch flera insert-, update- och delete-åtgärder tillsammans tooreduce hello antalet sändningar krävs och förbättra hello prestandan för din lösning.</span><span class="sxs-lookup"><span data-stu-id="a9900-894">You can use EGTs toobatch multiple insert, update, and delete operations together tooreduce hello number of round trips required and improve hello performance of your solution.</span></span>  

<span data-ttu-id="a9900-895">Observera att undantag när hello Storage-klientbibliotek utför en EGT vanligtvis innehåller hello index för hello entitet som orsakade hello batch toofail.</span><span class="sxs-lookup"><span data-stu-id="a9900-895">Note that exceptions thrown when hello Storage Client Library executes an EGT typically include hello index of hello entity that caused hello batch toofail.</span></span> <span data-ttu-id="a9900-896">Detta är användbart när du felsöker kod som använder EGTs.</span><span class="sxs-lookup"><span data-stu-id="a9900-896">This is helpful when you are debugging code that uses EGTs.</span></span>  

<span data-ttu-id="a9900-897">Du bör också övervägas hur din design påverkar hur ditt klientprogram hanterar samtidighet och update-åtgärder.</span><span class="sxs-lookup"><span data-stu-id="a9900-897">You should also consider how your design affects how your client application handles concurrency and update operations.</span></span>  

#### <a name="managing-concurrency"></a><span data-ttu-id="a9900-898">Hantera samtidighet</span><span class="sxs-lookup"><span data-stu-id="a9900-898">Managing concurrency</span></span>
<span data-ttu-id="a9900-899">Som standard hello tabelltjänsten implementerar Optimistisk samtidighet kontrollerar på hello nivå för enskilda entiteter för **infoga**, **sammanfoga**, och **ta bort** åtgärder, även om det är möjligt för en klient tooforce hello tabell service toobypass kontrollerna.</span><span class="sxs-lookup"><span data-stu-id="a9900-899">By default, hello table service implements optimistic concurrency checks at hello level of individual entities for **Insert**, **Merge**, and **Delete** operations, although it is possible for a client tooforce hello table service toobypass these checks.</span></span> <span data-ttu-id="a9900-900">Mer information om hur hello tabelltjänsten hanterar samtidighet finns [hantera samtidighet i Microsoft Azure Storage](storage-concurrency.md).</span><span class="sxs-lookup"><span data-stu-id="a9900-900">For more information about how hello table service manages concurrency, see  [Managing Concurrency in Microsoft Azure Storage](storage-concurrency.md).</span></span>  

#### <a name="merge-or-replace"></a><span data-ttu-id="a9900-901">Merge eller ersätta</span><span class="sxs-lookup"><span data-stu-id="a9900-901">Merge or replace</span></span>
<span data-ttu-id="a9900-902">Hej **ersätta** metod för hello **TableOperation** klassen ersätter alltid hello fullständig entitet i hello tabelltjänsten.</span><span class="sxs-lookup"><span data-stu-id="a9900-902">hello **Replace** method of hello **TableOperation** class always replaces hello complete entity in hello Table service.</span></span> <span data-ttu-id="a9900-903">Om du inte använder en egenskap i hello begäran när egenskapen finns i hello lagras entitet hello begäran tar du bort att egenskapen från hello lagras entitet.</span><span class="sxs-lookup"><span data-stu-id="a9900-903">If you do not include a property in hello request when that property exists in hello stored entity, hello request removes that property from hello stored entity.</span></span> <span data-ttu-id="a9900-904">Om du inte vill tooremove en egenskap uttryckligen från en lagrad entitet, måste du inkludera varje egenskap i hello-begäran.</span><span class="sxs-lookup"><span data-stu-id="a9900-904">Unless you want tooremove a property explicitly from a stored entity, you must include every property in hello request.</span></span>  

<span data-ttu-id="a9900-905">Du kan använda hello **sammanfoga** metod för hello **TableOperation** klassen tooreduce hello mängden data som du skickar toohello tabelltjänsten när du vill tooupdate en entitet.</span><span class="sxs-lookup"><span data-stu-id="a9900-905">You can use hello **Merge** method of hello **TableOperation** class tooreduce hello amount of data that you send toohello Table service when you want tooupdate an entity.</span></span> <span data-ttu-id="a9900-906">Hej **sammanfoga** metoden ersätter alla egenskaper i hello lagras entiteten med egenskapsvärden från hello-enhet som finns i hello begäran, men lämnar kvar alla egenskaper i hello lagras entitet som inte ingår i hello-begäran.</span><span class="sxs-lookup"><span data-stu-id="a9900-906">hello **Merge** method replaces any properties in hello stored entity with property values from hello entity included in hello request, but leaves intact any properties in hello stored entity that are not included in hello request.</span></span> <span data-ttu-id="a9900-907">Detta är användbart om du har stora entiteter och behöver bara tooupdate ett litet antal egenskaper i en begäran.</span><span class="sxs-lookup"><span data-stu-id="a9900-907">This is useful if you have large entities and only need tooupdate a small number of properties in a request.</span></span>  

> [!NOTE]
> <span data-ttu-id="a9900-908">Hej **ersätta** och **sammanfoga** metoder misslyckas om hello entiteten inte finns.</span><span class="sxs-lookup"><span data-stu-id="a9900-908">hello **Replace** and **Merge** methods fail if hello entity does not exist.</span></span> <span data-ttu-id="a9900-909">Alternativt kan du använda hello **InsertOrReplace** och **InsertOrMerge** metoder som skapar en ny entitet om den inte finns.</span><span class="sxs-lookup"><span data-stu-id="a9900-909">As an alternative, you can use hello **InsertOrReplace** and **InsertOrMerge** methods that create a new entity if it doesn't exist.</span></span>  
> 
> 

### <a name="working-with-heterogeneous-entity-types"></a><span data-ttu-id="a9900-910">Arbeta med heterogena entitetstyper</span><span class="sxs-lookup"><span data-stu-id="a9900-910">Working with heterogeneous entity types</span></span>
<span data-ttu-id="a9900-911">Hej tabelltjänsten är en *schemat mindre* tabell butik som innebär att en enskild tabell kan lagra entiteter av flera typer som ger stor flexibilitet i din design.</span><span class="sxs-lookup"><span data-stu-id="a9900-911">hello Table service is a *schema-less* table store that means that a single table can store entities of multiple types providing great flexibility in your design.</span></span> <span data-ttu-id="a9900-912">hello illustrerar följande exempel en tabell som lagrar både anställda och avdelningen enheter:</span><span class="sxs-lookup"><span data-stu-id="a9900-912">hello following example illustrates a table storing both employee and department entities:</span></span>  

<table>
<tr>
<th><span data-ttu-id="a9900-913">PartitionKey</span><span class="sxs-lookup"><span data-stu-id="a9900-913">PartitionKey</span></span></th>
<th><span data-ttu-id="a9900-914">RowKey</span><span class="sxs-lookup"><span data-stu-id="a9900-914">RowKey</span></span></th>
<th><span data-ttu-id="a9900-915">tidsstämpel</span><span class="sxs-lookup"><span data-stu-id="a9900-915">Timestamp</span></span></th>
<th></th>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td>
<table>
<tr>
<th><span data-ttu-id="a9900-916">Förnamn</span><span class="sxs-lookup"><span data-stu-id="a9900-916">FirstName</span></span></th>
<th><span data-ttu-id="a9900-917">Efternamn</span><span class="sxs-lookup"><span data-stu-id="a9900-917">LastName</span></span></th>
<th><span data-ttu-id="a9900-918">Ålder</span><span class="sxs-lookup"><span data-stu-id="a9900-918">Age</span></span></th>
<th><span data-ttu-id="a9900-919">E-post</span><span class="sxs-lookup"><span data-stu-id="a9900-919">Email</span></span></th>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
</table>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td>
<table>
<tr>
<th><span data-ttu-id="a9900-920">Förnamn</span><span class="sxs-lookup"><span data-stu-id="a9900-920">FirstName</span></span></th>
<th><span data-ttu-id="a9900-921">Efternamn</span><span class="sxs-lookup"><span data-stu-id="a9900-921">LastName</span></span></th>
<th><span data-ttu-id="a9900-922">Ålder</span><span class="sxs-lookup"><span data-stu-id="a9900-922">Age</span></span></th>
<th><span data-ttu-id="a9900-923">E-post</span><span class="sxs-lookup"><span data-stu-id="a9900-923">Email</span></span></th>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
</table>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td>
<table>
<tr>
<th><span data-ttu-id="a9900-924">DepartmentName</span><span class="sxs-lookup"><span data-stu-id="a9900-924">DepartmentName</span></span></th>
<th><span data-ttu-id="a9900-925">EmployeeCount</span><span class="sxs-lookup"><span data-stu-id="a9900-925">EmployeeCount</span></span></th>
</tr>
<tr>
<td></td>
<td></td>
</tr>
</table>
</td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td>
<table>
<tr>
<th><span data-ttu-id="a9900-926">Förnamn</span><span class="sxs-lookup"><span data-stu-id="a9900-926">FirstName</span></span></th>
<th><span data-ttu-id="a9900-927">Efternamn</span><span class="sxs-lookup"><span data-stu-id="a9900-927">LastName</span></span></th>
<th><span data-ttu-id="a9900-928">Ålder</span><span class="sxs-lookup"><span data-stu-id="a9900-928">Age</span></span></th>
<th><span data-ttu-id="a9900-929">E-post</span><span class="sxs-lookup"><span data-stu-id="a9900-929">Email</span></span></th>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
</table>
</td>
</tr>
</table>

<span data-ttu-id="a9900-930">Observera att varje entitet måste dock ha **PartitionKey**, **RowKey**, och **tidsstämpel** värden, men kan ha en uppsättning egenskaper.</span><span class="sxs-lookup"><span data-stu-id="a9900-930">Note that each entity must still have **PartitionKey**, **RowKey**, and **Timestamp** values, but may have any set of properties.</span></span> <span data-ttu-id="a9900-931">Det finns inget tooindicate hello typ av en enhet om du inte väljer toostore informationen någonstans.</span><span class="sxs-lookup"><span data-stu-id="a9900-931">Furthermore, there is nothing tooindicate hello type of an entity unless you choose toostore that information somewhere.</span></span> <span data-ttu-id="a9900-932">Det finns två alternativ för att identifiera hello enhetstyp:</span><span class="sxs-lookup"><span data-stu-id="a9900-932">There are two options for identifying hello entity type:</span></span>  

* <span data-ttu-id="a9900-933">Lägga hello entitet typen toohello **RowKey** (eller eventuellt hello **PartitionKey**).</span><span class="sxs-lookup"><span data-stu-id="a9900-933">Prepend hello entity type toohello **RowKey** (or possibly hello **PartitionKey**).</span></span> <span data-ttu-id="a9900-934">Till exempel **EMPLOYEE_000123** eller **DEPARTMENT_SALES** som **RowKey** värden.</span><span class="sxs-lookup"><span data-stu-id="a9900-934">For example, **EMPLOYEE_000123** or **DEPARTMENT_SALES** as **RowKey** values.</span></span>  
* <span data-ttu-id="a9900-935">Använd en separat egenskapen toorecord hello entitetstyp enligt hello tabellen nedan.</span><span class="sxs-lookup"><span data-stu-id="a9900-935">Use a separate property toorecord hello entity type as shown in hello table below.</span></span>  

<table>
<tr>
<th><span data-ttu-id="a9900-936">PartitionKey</span><span class="sxs-lookup"><span data-stu-id="a9900-936">PartitionKey</span></span></th>
<th><span data-ttu-id="a9900-937">RowKey</span><span class="sxs-lookup"><span data-stu-id="a9900-937">RowKey</span></span></th>
<th><span data-ttu-id="a9900-938">tidsstämpel</span><span class="sxs-lookup"><span data-stu-id="a9900-938">Timestamp</span></span></th>
<th></th>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td>
<table>
<tr>
<th><span data-ttu-id="a9900-939">EntityType</span><span class="sxs-lookup"><span data-stu-id="a9900-939">EntityType</span></span></th>
<th><span data-ttu-id="a9900-940">Förnamn</span><span class="sxs-lookup"><span data-stu-id="a9900-940">FirstName</span></span></th>
<th><span data-ttu-id="a9900-941">Efternamn</span><span class="sxs-lookup"><span data-stu-id="a9900-941">LastName</span></span></th>
<th><span data-ttu-id="a9900-942">Ålder</span><span class="sxs-lookup"><span data-stu-id="a9900-942">Age</span></span></th>
<th><span data-ttu-id="a9900-943">E-post</span><span class="sxs-lookup"><span data-stu-id="a9900-943">Email</span></span></th>
</tr>
<tr>
<td><span data-ttu-id="a9900-944">Medarbetare</span><span class="sxs-lookup"><span data-stu-id="a9900-944">Employee</span></span></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
</table>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td>
<table>
<tr>
<th><span data-ttu-id="a9900-945">EntityType</span><span class="sxs-lookup"><span data-stu-id="a9900-945">EntityType</span></span></th>
<th><span data-ttu-id="a9900-946">Förnamn</span><span class="sxs-lookup"><span data-stu-id="a9900-946">FirstName</span></span></th>
<th><span data-ttu-id="a9900-947">Efternamn</span><span class="sxs-lookup"><span data-stu-id="a9900-947">LastName</span></span></th>
<th><span data-ttu-id="a9900-948">Ålder</span><span class="sxs-lookup"><span data-stu-id="a9900-948">Age</span></span></th>
<th><span data-ttu-id="a9900-949">E-post</span><span class="sxs-lookup"><span data-stu-id="a9900-949">Email</span></span></th>
</tr>
<tr>
<td><span data-ttu-id="a9900-950">Medarbetare</span><span class="sxs-lookup"><span data-stu-id="a9900-950">Employee</span></span></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
</table>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td>
<table>
<tr>
<th><span data-ttu-id="a9900-951">EntityType</span><span class="sxs-lookup"><span data-stu-id="a9900-951">EntityType</span></span></th>
<th><span data-ttu-id="a9900-952">DepartmentName</span><span class="sxs-lookup"><span data-stu-id="a9900-952">DepartmentName</span></span></th>
<th><span data-ttu-id="a9900-953">EmployeeCount</span><span class="sxs-lookup"><span data-stu-id="a9900-953">EmployeeCount</span></span></th>
</tr>
<tr>
<td><span data-ttu-id="a9900-954">Avdelning</span><span class="sxs-lookup"><span data-stu-id="a9900-954">Department</span></span></td>
<td></td>
<td></td>
</tr>
</table>
</td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td>
<table>
<tr>
<th><span data-ttu-id="a9900-955">EntityType</span><span class="sxs-lookup"><span data-stu-id="a9900-955">EntityType</span></span></th>
<th><span data-ttu-id="a9900-956">Förnamn</span><span class="sxs-lookup"><span data-stu-id="a9900-956">FirstName</span></span></th>
<th><span data-ttu-id="a9900-957">Efternamn</span><span class="sxs-lookup"><span data-stu-id="a9900-957">LastName</span></span></th>
<th><span data-ttu-id="a9900-958">Ålder</span><span class="sxs-lookup"><span data-stu-id="a9900-958">Age</span></span></th>
<th><span data-ttu-id="a9900-959">E-post</span><span class="sxs-lookup"><span data-stu-id="a9900-959">Email</span></span></th>
</tr>
<tr>
<td><span data-ttu-id="a9900-960">Medarbetare</span><span class="sxs-lookup"><span data-stu-id="a9900-960">Employee</span></span></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
</table>
</td>
</tr>
</table>

<span data-ttu-id="a9900-961">hello första alternativet, tillagt hello entitet typen toohello **RowKey**, är användbart om det finns en risk att två entiteter med olika typer kanske hello samma nyckelvärde.</span><span class="sxs-lookup"><span data-stu-id="a9900-961">hello first option, prepending hello entity type toohello **RowKey**, is useful if there is a possibility that two entities of different types might have hello same key value.</span></span> <span data-ttu-id="a9900-962">Dessutom grupperas entiteter av samma typ tillsammans i hello partition hello.</span><span class="sxs-lookup"><span data-stu-id="a9900-962">It also groups entities of hello same type together in hello partition.</span></span>  

<span data-ttu-id="a9900-963">hello tekniker som beskrivs i det här avsnittet är särskilt relevanta toohello diskussion [arvsrelationer](#inheritance-relationships) i den här guiden i hello avsnittet [modellering relationer](#modelling-relationships).</span><span class="sxs-lookup"><span data-stu-id="a9900-963">hello techniques discussed in this section are especially relevant toohello discussion [Inheritance relationships](#inheritance-relationships) earlier in this guide in hello section [Modelling relationships](#modelling-relationships).</span></span>  

> [!NOTE]
> <span data-ttu-id="a9900-964">Du bör överväga att använda ett versionsnummer i hello entitet värdet tooenable klienten program tooevolve POCO objekt av typen och arbeta med olika versioner.</span><span class="sxs-lookup"><span data-stu-id="a9900-964">You should consider including a version number in hello entity type value tooenable client applications tooevolve POCO objects and work with different versions.</span></span>  
> 
> 

<span data-ttu-id="a9900-965">hello resten av det här avsnittet beskrivs några av hello funktioner i hello Storage-klientbiblioteket som gör det lättare att arbeta med flera typer av enheter i hello samma tabell.</span><span class="sxs-lookup"><span data-stu-id="a9900-965">hello remainder of this section describes some of hello features in hello Storage Client Library that facilitate working with multiple entity types in hello same table.</span></span>  

#### <a name="retrieving-heterogeneous-entity-types"></a><span data-ttu-id="a9900-966">Hämta heterogena entitetstyper</span><span class="sxs-lookup"><span data-stu-id="a9900-966">Retrieving heterogeneous entity types</span></span>
<span data-ttu-id="a9900-967">Om du använder hello Storage-klientbiblioteket finns det tre alternativ för att arbeta med flera typer av enheter.</span><span class="sxs-lookup"><span data-stu-id="a9900-967">If you are using hello Storage Client Library, you have three options for working with multiple entity types.</span></span>  

<span data-ttu-id="a9900-968">Om du vet hello hello-enhet som lagras med ett visst **RowKey** och **PartitionKey** värden, sedan kan du ange hello entitetstypen när du hämtar hello entitet som visas i hello föregående två exempel som hämta entiteter av typen **EmployeeEntity**: [körs en punkt-fråga med hello Storage-klientbibliotek](#executing-a-point-query-using-the-storage-client-library) och [hämtning av flera enheter med hjälp av LINQ](#retrieving-multiple-entities-using-linq).</span><span class="sxs-lookup"><span data-stu-id="a9900-968">If you know hello type of hello entity stored with a specific **RowKey** and **PartitionKey** values, then you can specify hello entity type when you retrieve hello entity as shown in hello previous two examples that retrieve entities of type **EmployeeEntity**: [Executing a point query using hello Storage Client Library](#executing-a-point-query-using-the-storage-client-library) and [Retrieving multiple entities using LINQ](#retrieving-multiple-entities-using-linq).</span></span>  

<span data-ttu-id="a9900-969">hello andra alternativ är toouse hello **DynamicTableEntity** typ (en egenskapsuppsättning) i stället för en konkret POCO entitetstyp (det här alternativet kan också förbättra prestanda eftersom det finns inget behov av tooserialize och deserialisera hello entiteten för. NET typer).</span><span class="sxs-lookup"><span data-stu-id="a9900-969">hello second option is toouse hello **DynamicTableEntity** type (a property bag) instead of a concrete POCO entity type (this option may also improve performance because there is no need tooserialize and deserialize hello entity too.NET types).</span></span> <span data-ttu-id="a9900-970">hello följande C#-kod potentiellt hämtar flera entiteter med olika typer från hello tabell, men returnerar alla entiteter som **DynamicTableEntity** instanser.</span><span class="sxs-lookup"><span data-stu-id="a9900-970">hello following C# code potentially retrieves multiple entities of different types from hello table, but returns all entities as **DynamicTableEntity** instances.</span></span> <span data-ttu-id="a9900-971">Därefter använder hello **EntityType** toodetermine hello egenskapstypen varje entitet:</span><span class="sxs-lookup"><span data-stu-id="a9900-971">It then uses hello **EntityType** property toodetermine hello type of each entity:</span></span>  

```csharp
string filter = TableQuery.CombineFilters(
    TableQuery.GenerateFilterCondition("PartitionKey",
    QueryComparisons.Equal, "Sales"),
    TableOperators.And,
    TableQuery.CombineFilters(
    TableQuery.GenerateFilterCondition("RowKey",
                    QueryComparisons.GreaterThanOrEqual, "B"),
        TableOperators.And,
        TableQuery.GenerateFilterCondition("RowKey",
        QueryComparisons.LessThan, "F")
    )
);
TableQuery<DynamicTableEntity> entityQuery =
    new TableQuery<DynamicTableEntity>().Where(filter);
var employees = employeeTable.ExecuteQuery(entityQuery);

IEnumerable<DynamicTableEntity> entities = employeeTable.ExecuteQuery(entityQuery);
foreach (var e in entities)
{
EntityProperty entityTypeProperty;
if (e.Properties.TryGetValue("EntityType", out entityTypeProperty))
{
    if (entityTypeProperty.StringValue == "Employee")
    {
        // Use entityTypeProperty, RowKey, PartitionKey, Etag, and Timestamp
        }
    }
}  
```

<span data-ttu-id="a9900-972">Observera att tooretrieve andra egenskaper måste du använda hello **TryGetValue** metod på hello **egenskaper** -egenskapen för hello **DynamicTableEntity** klass.</span><span class="sxs-lookup"><span data-stu-id="a9900-972">Note that tooretrieve other properties you must use hello **TryGetValue** method on hello **Properties** property of hello **DynamicTableEntity** class.</span></span>  

<span data-ttu-id="a9900-973">Ett tredje alternativ är toocombine med hello **DynamicTableEntity** typ och en **EntityResolver** instans.</span><span class="sxs-lookup"><span data-stu-id="a9900-973">A third option is toocombine using hello **DynamicTableEntity** type and an **EntityResolver** instance.</span></span> <span data-ttu-id="a9900-974">Detta gör att du tooresolve toomultiple POCO typer i hello samma fråga.</span><span class="sxs-lookup"><span data-stu-id="a9900-974">This enables you tooresolve toomultiple POCO types in hello same query.</span></span> <span data-ttu-id="a9900-975">I det här exemplet hello **EntityResolver** ombud använder hello **EntityType** egenskapen toodistinguish mellan hello två typer av entiteten som hello frågan returnerar.</span><span class="sxs-lookup"><span data-stu-id="a9900-975">In this example, hello **EntityResolver** delegate is using hello **EntityType** property toodistinguish between hello two types of entity that hello query returns.</span></span> <span data-ttu-id="a9900-976">Hej **lösa** metoden använder hello **matcharen** delegera tooresolve **DynamicTableEntity** instanser för**TableEntity** instanser.</span><span class="sxs-lookup"><span data-stu-id="a9900-976">hello **Resolve** method uses hello **resolver** delegate tooresolve **DynamicTableEntity** instances too**TableEntity** instances.</span></span>  

```csharp
EntityResolver<TableEntity> resolver = (pk, rk, ts, props, etag) =>
{

        TableEntity resolvedEntity = null;
        if (props["EntityType"].StringValue == "Department")
        {
        resolvedEntity = new DepartmentEntity();
        }
        else if (props["EntityType"].StringValue == "Employee")
        {
        resolvedEntity = new EmployeeEntity();
        }
        else throw new ArgumentException("Unrecognized entity", "props");

        resolvedEntity.PartitionKey = pk;
        resolvedEntity.RowKey = rk;
        resolvedEntity.Timestamp = ts;
        resolvedEntity.ETag = etag;
        resolvedEntity.ReadEntity(props, null);
        return resolvedEntity;
};

string filter = TableQuery.GenerateFilterCondition(
        "PartitionKey", QueryComparisons.Equal, "Sales");
TableQuery<DynamicTableEntity> entityQuery =
        new TableQuery<DynamicTableEntity>().Where(filter);

var entities = employeeTable.ExecuteQuery(entityQuery, resolver);
foreach (var e in entities)
{
        if (e is DepartmentEntity)
        {
    ...
        }
        if (e is EmployeeEntity)
        {
    ...
        }
}  
```

#### <a name="modifying-heterogeneous-entity-types"></a><span data-ttu-id="a9900-977">Ändra heterogena entitetstyper</span><span class="sxs-lookup"><span data-stu-id="a9900-977">Modifying heterogeneous entity types</span></span>
<span data-ttu-id="a9900-978">Du behöver inte tooknow hello typ av en entitet toodelete den, och du alltid vet hello-typ för en entitet vid infogande av den.</span><span class="sxs-lookup"><span data-stu-id="a9900-978">You do not need tooknow hello type of an entity toodelete it, and you always know hello type of an entity when you insert it.</span></span> <span data-ttu-id="a9900-979">Du kan dock använda **DynamicTableEntity** skriver tooupdate en enhet utan att känna till dess typ och utan att använda en POCO-entitetsklass.</span><span class="sxs-lookup"><span data-stu-id="a9900-979">However, you can use **DynamicTableEntity** type tooupdate an entity without knowing its type and without using a POCO entity class.</span></span> <span data-ttu-id="a9900-980">hello följande kodexempel hämtas en enda entitet och kontrollerar hello **EmployeeCount** egenskapen finns innan den uppdateras.</span><span class="sxs-lookup"><span data-stu-id="a9900-980">hello following code sample retrieves a single entity, and checks hello **EmployeeCount** property exists before updating it.</span></span>  

```csharp
TableResult result =
        employeeTable.Execute(TableOperation.Retrieve(partitionKey, rowKey));
DynamicTableEntity department = (DynamicTableEntity)result.Result;

EntityProperty countProperty;

if (!department.Properties.TryGetValue("EmployeeCount", out countProperty))
{
        throw new
        InvalidOperationException("Invalid entity, EmployeeCount property not found.");
}
countProperty.Int32Value += 1;
employeeTable.Execute(TableOperation.Merge(department));  
```

### <a name="controlling-access-with-shared-access-signatures"></a><span data-ttu-id="a9900-981">Kontrollera åtkomst med signaturer för delad åtkomst</span><span class="sxs-lookup"><span data-stu-id="a9900-981">Controlling access with Shared Access Signatures</span></span>
<span data-ttu-id="a9900-982">Du kan använda delade signatur åtkomst (SAS) token tooenable klienten program toomodify (och fråga) tabellentiteter direkt utan hello måste tooauthenticate direkt med hello tabelltjänsten.</span><span class="sxs-lookup"><span data-stu-id="a9900-982">You can use Shared Access Signature (SAS) tokens tooenable client applications toomodify (and query) table entities directly without hello need tooauthenticate directly with hello table service.</span></span> <span data-ttu-id="a9900-983">Det finns vanligtvis tre huvudsakliga fördelar toousing SAS i ditt program:</span><span class="sxs-lookup"><span data-stu-id="a9900-983">Typically, there are three main benefits toousing SAS in your application:</span></span>  

* <span data-ttu-id="a9900-984">Du behöver inte toodistribute lagringen konto viktiga tooan osäker plattform (till exempel en mobil enhet) i ordning tooallow som enheten tooaccess och ändra entiteter i hello tabelltjänsten.</span><span class="sxs-lookup"><span data-stu-id="a9900-984">You do not need toodistribute your storage account key tooan insecure platform (such as a mobile device) in order tooallow that device tooaccess and modify entities in hello Table service.</span></span>  
* <span data-ttu-id="a9900-985">Avlastning vissa hello arbete webbplatsen och arbetsroller utför när du ska hantera dina enheter tooclient enheter, till exempel slutanvändarnas datorer och mobila enheter.</span><span class="sxs-lookup"><span data-stu-id="a9900-985">You can offload some of hello work that web and worker roles perform in managing your entities tooclient devices such as end-user computers and mobile devices.</span></span>  
* <span data-ttu-id="a9900-986">Du kan tilldela en begränsad och tid begränsad uppsättning behörigheter tooa klient (till exempel att tillåta läsåtkomst toospecific resurser).</span><span class="sxs-lookup"><span data-stu-id="a9900-986">You can assign a constrained and time limited set of permissions tooa client (such as allowing read-only access toospecific resources).</span></span>  

<span data-ttu-id="a9900-987">Läs mer om hur du använder SAS-token med hello tabelltjänsten [med delad åtkomst signaturer (SAS)](storage-dotnet-shared-access-signature-part-1.md).</span><span class="sxs-lookup"><span data-stu-id="a9900-987">For more information about using SAS tokens with hello Table service, see [Using Shared Access Signatures (SAS)](storage-dotnet-shared-access-signature-part-1.md).</span></span>  

<span data-ttu-id="a9900-988">Du måste dock fortfarande generera hello SAS-token som ger en klient toohello programentiteter i hello tabelltjänsten: du bör göra detta i en miljö som har säker åtkomst tooyour lagringskontonycklar.</span><span class="sxs-lookup"><span data-stu-id="a9900-988">However, you must still generate hello SAS tokens that grant a client application toohello entities in hello table service: you should do this in an environment that has secure access tooyour storage account keys.</span></span> <span data-ttu-id="a9900-989">Normalt använder du en webb- eller arbetarroll rollen toogenerate hello SAS-token och ge dem toohello klientprogram som behöver åtkomst till tooyour entiteter.</span><span class="sxs-lookup"><span data-stu-id="a9900-989">Typically, you use a web or worker role toogenerate hello SAS tokens and deliver them toohello client applications that need access tooyour entities.</span></span> <span data-ttu-id="a9900-990">Eftersom det finns fortfarande en kostnader som genererar och leverera SAS-token tooclients, bör du överväga hur bästa tooreduce denna kostnader, särskilt i stora mängder.</span><span class="sxs-lookup"><span data-stu-id="a9900-990">Because there is still an overhead involved in generating and delivering SAS tokens tooclients, you should consider how best tooreduce this overhead, especially in high-volume scenarios.</span></span>  

<span data-ttu-id="a9900-991">Det är möjligt toogenerate en SAS-token som beviljar åtkomst till tooa delmängd av hello entiteter i en tabell.</span><span class="sxs-lookup"><span data-stu-id="a9900-991">It is possible toogenerate a SAS token that grants access tooa subset of hello entities in a table.</span></span> <span data-ttu-id="a9900-992">Som standard kan du skapa en SAS-token för en hel tabell, men det är också möjligt toospecify som hello SAS-token bevilja åtkomst tooeither en uppsättning **PartitionKey** värden eller en uppsättning **PartitionKey** och  **RowKey** värden.</span><span class="sxs-lookup"><span data-stu-id="a9900-992">By default, you create a SAS token for an entire table, but it is also possible toospecify that hello SAS token grant access tooeither a range of **PartitionKey** values, or a range of **PartitionKey** and **RowKey** values.</span></span> <span data-ttu-id="a9900-993">Du kan välja toogenerate SAS-token för enskilda användare av systemet så att varje användare SAS-token kan dem bara åtkomst tootheir egna entiteter i hello tabelltjänst.</span><span class="sxs-lookup"><span data-stu-id="a9900-993">You might choose toogenerate SAS tokens for individual users of your system such that each user's SAS token only allows them access tootheir own entities in hello table service.</span></span>  

### <a name="asynchronous-and-parallel-operations"></a><span data-ttu-id="a9900-994">Asynkron och parallella åtgärder</span><span class="sxs-lookup"><span data-stu-id="a9900-994">Asynchronous and parallel operations</span></span>
<span data-ttu-id="a9900-995">Om dina begäranden sprids över flera partitioner, kan du förbättra genomflöde och klienten svarstider med hjälp av asynkron eller parallella frågor.</span><span class="sxs-lookup"><span data-stu-id="a9900-995">Provided you are spreading your requests across multiple partitions, you can improve throughput and client responsiveness by using asynchronous or parallel queries.</span></span>
<span data-ttu-id="a9900-996">Du kan till exempel ha två eller flera worker rollinstanser åtkomst till dina tabeller parallellt.</span><span class="sxs-lookup"><span data-stu-id="a9900-996">For example, you might have two or more worker role instances accessing your tables in parallel.</span></span> <span data-ttu-id="a9900-997">Du kan har enskilda arbetsroller ansvarar för viss uppsättningar av partitioner eller helt enkelt ha flera instanser av worker-rollen, varje kan tooaccess alla hello partitioner i en tabell.</span><span class="sxs-lookup"><span data-stu-id="a9900-997">You could have individual worker roles responsible for particular sets of partitions, or simply have multiple worker role instances, each able tooaccess all hello partitions in a table.</span></span>  

<span data-ttu-id="a9900-998">Inom en klientinstans, kan du förbättra genomflöde genom att köra lagringsåtgärder asynkront.</span><span class="sxs-lookup"><span data-stu-id="a9900-998">Within a client instance, you can improve throughput by executing storage operations asynchronously.</span></span> <span data-ttu-id="a9900-999">hello Storage-klientbibliotek gör det enkelt toowrite asynkrona frågor och ändringar.</span><span class="sxs-lookup"><span data-stu-id="a9900-999">hello Storage Client Library makes it easy toowrite asynchronous queries and modifications.</span></span> <span data-ttu-id="a9900-1000">Du kan till exempel starta med hello synkron metod som hämtar alla hello entiteter i en partition som visas i hello följande C#-kod:</span><span class="sxs-lookup"><span data-stu-id="a9900-1000">For example, you might start with hello synchronous method that retrieves all hello entities in a partition as shown in hello following C# code:</span></span>  

```csharp
private static void ManyEntitiesQuery(CloudTable employeeTable, string department)
{
        string filter = TableQuery.GenerateFilterCondition(
        "PartitionKey", QueryComparisons.Equal, department);
        TableQuery<EmployeeEntity> employeeQuery =
        new TableQuery<EmployeeEntity>().Where(filter);

        TableContinuationToken continuationToken = null;

        do
        {
        var employees = employeeTable.ExecuteQuerySegmented(
                employeeQuery, continuationToken);
        foreach (var emp in employees)
    {
        ...
    }
        continuationToken = employees.ContinuationToken;
        } while (continuationToken != null);
}  
```

<span data-ttu-id="a9900-1001">Du kan enkelt ändra den här koden så hello frågan körs asynkront på följande sätt:</span><span class="sxs-lookup"><span data-stu-id="a9900-1001">You can easily modify this code so that hello query runs asynchronously as follows:</span></span>  

```csharp
private static async Task ManyEntitiesQueryAsync(CloudTable employeeTable, string department)
{
        string filter = TableQuery.GenerateFilterCondition(
        "PartitionKey", QueryComparisons.Equal, department);
        TableQuery<EmployeeEntity> employeeQuery =
        new TableQuery<EmployeeEntity>().Where(filter);
        TableContinuationToken continuationToken = null;

        do
        {
        var employees = await employeeTable.ExecuteQuerySegmentedAsync(
                employeeQuery, continuationToken);
        foreach (var emp in employees)
        {
            ...
        }
        continuationToken = employees.ContinuationToken;
            } while (continuationToken != null);
}  
```

<span data-ttu-id="a9900-1002">I det här asynkron exemplet ser du hello följande ändringar från hello synkron version:</span><span class="sxs-lookup"><span data-stu-id="a9900-1002">In this asynchronous example, you can see hello following changes from hello synchronous version:</span></span>  

* <span data-ttu-id="a9900-1003">hello Metodsignaturen innehåller nu hello **asynkrona** modifierare och returnerar ett **aktivitet** instans.</span><span class="sxs-lookup"><span data-stu-id="a9900-1003">hello method signature now includes hello **async** modifier and returns a **Task** instance.</span></span>  
* <span data-ttu-id="a9900-1004">I stället för att anropa hello **ExecuteSegmented** metoden tooretrieve resultat, hello metoden nu anrop hello **ExecuteSegmentedAsync** metod och använder hello **await** modifierare tooretrieve resulterar asynkront.</span><span class="sxs-lookup"><span data-stu-id="a9900-1004">Instead of calling hello **ExecuteSegmented** method tooretrieve results, hello method now calls hello **ExecuteSegmentedAsync** method and uses hello **await** modifier tooretrieve results asynchronously.</span></span>  

<span data-ttu-id="a9900-1005">hello klientprogrammet kan anropa metoden flera gånger (med olika värden för hello **avdelning** parametern), och varje fråga som körs på en separat tråd.</span><span class="sxs-lookup"><span data-stu-id="a9900-1005">hello client application can call this method multiple times (with different values for hello **department** parameter), and each query will run on a separate thread.</span></span>  

<span data-ttu-id="a9900-1006">Observera att det finns inga asynkrona versionen av hello **kör** metod i hello **TableQuery** klassen eftersom hello **IEnumerable** gränssnittet stöder inte asynkron uppräkning.</span><span class="sxs-lookup"><span data-stu-id="a9900-1006">Note that there is no asynchronous version of hello **Execute** method in hello **TableQuery** class because hello **IEnumerable** interface does not support asynchronous enumeration.</span></span>  

<span data-ttu-id="a9900-1007">Du kan infoga, uppdatera och ta bort entiteter asynkront.</span><span class="sxs-lookup"><span data-stu-id="a9900-1007">You can also insert, update, and delete entities asynchronously.</span></span> <span data-ttu-id="a9900-1008">hello följande C#-exempel visar en enkel, synkron metod tooinsert eller ersätta en medarbetare entitet:</span><span class="sxs-lookup"><span data-stu-id="a9900-1008">hello following C# example shows a simple, synchronous method tooinsert or replace an employee entity:</span></span>  

```csharp
private static void SimpleEmployeeUpsert(CloudTable employeeTable,
        EmployeeEntity employee)
{
        TableResult result = employeeTable
        .Execute(TableOperation.InsertOrReplace(employee));
        Console.WriteLine("HTTP Status: {0}", result.HttpStatusCode);
}  
```

<span data-ttu-id="a9900-1009">Du kan enkelt ändra den här koden så att hello uppdatering körs asynkront på följande sätt:</span><span class="sxs-lookup"><span data-stu-id="a9900-1009">You can easily modify this code so that hello update runs asynchronously as follows:</span></span>  

```csharp
private static async Task SimpleEmployeeUpsertAsync(CloudTable employeeTable,
        EmployeeEntity employee)
{
        TableResult result = await employeeTable
        .ExecuteAsync(TableOperation.InsertOrReplace(employee));
        Console.WriteLine("HTTP Status: {0}", result.HttpStatusCode);
}  
```

<span data-ttu-id="a9900-1010">I det här asynkron exemplet ser du hello följande ändringar från hello synkron version:</span><span class="sxs-lookup"><span data-stu-id="a9900-1010">In this asynchronous example, you can see hello following changes from hello synchronous version:</span></span>  

* <span data-ttu-id="a9900-1011">hello Metodsignaturen innehåller nu hello **asynkrona** modifierare och returnerar ett **aktivitet** instans.</span><span class="sxs-lookup"><span data-stu-id="a9900-1011">hello method signature now includes hello **async** modifier and returns a **Task** instance.</span></span>  
* <span data-ttu-id="a9900-1012">I stället för att anropa hello **kör** metoden tooupdate hello entiteten, hello metoden nu anrop hello **ExecuteAsync** metod och använder hello **await** modifieraren tooretrieve resulterar asynkront.</span><span class="sxs-lookup"><span data-stu-id="a9900-1012">Instead of calling hello **Execute** method tooupdate hello entity, hello method now calls hello **ExecuteAsync** method and uses hello **await** modifier tooretrieve results asynchronously.</span></span>  

<span data-ttu-id="a9900-1013">hello klientprogrammet kan anropa flera asynkrona metoder som det här och varje metodanropet körs på en separat tråd.</span><span class="sxs-lookup"><span data-stu-id="a9900-1013">hello client application can call multiple asynchronous methods like this one, and each method invocation will run on a separate thread.</span></span>  

### <a name="credits"></a><span data-ttu-id="a9900-1014">Krediter</span><span class="sxs-lookup"><span data-stu-id="a9900-1014">Credits</span></span>
<span data-ttu-id="a9900-1015">Vi vill gärna toothank hello följande medlemmar i hello Azure-teamet för deras bidrag: Dominic Betts, Jason Hogg, Jean Ghanem, Jai Haridas, Jeff Irwin, Vamshidhar Kommineni, Vinay Shah och Serdar Ozler samt Tom Hollander från Microsoft DX.</span><span class="sxs-lookup"><span data-stu-id="a9900-1015">We would like toothank hello following members of hello Azure team for their contributions: Dominic Betts, Jason Hogg, Jean Ghanem, Jai Haridas, Jeff Irwin, Vamshidhar Kommineni, Vinay Shah and Serdar Ozler as well as  Tom Hollander from Microsoft DX.</span></span> 

<span data-ttu-id="a9900-1016">Vi vill också toothank hello följande Microsoft MVP för deras feedback om värdefulla vid granskning tillfällen: Igor Papirov och Edward Bakker.</span><span class="sxs-lookup"><span data-stu-id="a9900-1016">We would also like toothank hello following Microsoft MVP's for their valuable feedback during review cycles: Igor Papirov and Edward Bakker.</span></span>

[1]: ./media/storage-table-design-guide/storage-table-design-IMAGE01.png
[2]: ./media/storage-table-design-guide/storage-table-design-IMAGE02.png
[3]: ./media/storage-table-design-guide/storage-table-design-IMAGE03.png
[4]: ./media/storage-table-design-guide/storage-table-design-IMAGE04.png
[5]: ./media/storage-table-design-guide/storage-table-design-IMAGE05.png
[6]: ./media/storage-table-design-guide/storage-table-design-IMAGE06.png
[7]: ./media/storage-table-design-guide/storage-table-design-IMAGE07.png
[8]: ./media/storage-table-design-guide/storage-table-design-IMAGE08.png
[9]: ./media/storage-table-design-guide/storage-table-design-IMAGE09.png
[10]: ./media/storage-table-design-guide/storage-table-design-IMAGE10.png
[11]: ./media/storage-table-design-guide/storage-table-design-IMAGE11.png
[12]: ./media/storage-table-design-guide/storage-table-design-IMAGE12.png
[13]: ./media/storage-table-design-guide/storage-table-design-IMAGE13.png
[14]: ./media/storage-table-design-guide/storage-table-design-IMAGE14.png
[15]: ./media/storage-table-design-guide/storage-table-design-IMAGE15.png
[16]: ./media/storage-table-design-guide/storage-table-design-IMAGE16.png
[17]: ./media/storage-table-design-guide/storage-table-design-IMAGE17.png
[18]: ./media/storage-table-design-guide/storage-table-design-IMAGE18.png
[19]: ./media/storage-table-design-guide/storage-table-design-IMAGE19.png
[20]: ./media/storage-table-design-guide/storage-table-design-IMAGE20.png
[21]: ./media/storage-table-design-guide/storage-table-design-IMAGE21.png
[22]: ./media/storage-table-design-guide/storage-table-design-IMAGE22.png
[23]: ./media/storage-table-design-guide/storage-table-design-IMAGE23.png
[24]: ./media/storage-table-design-guide/storage-table-design-IMAGE24.png
[25]: ./media/storage-table-design-guide/storage-table-design-IMAGE25.png
[26]: ./media/storage-table-design-guide/storage-table-design-IMAGE26.png
[27]: ./media/storage-table-design-guide/storage-table-design-IMAGE27.png
[28]: ./media/storage-table-design-guide/storage-table-design-IMAGE28.png
[29]: ./media/storage-table-design-guide/storage-table-design-IMAGE29.png


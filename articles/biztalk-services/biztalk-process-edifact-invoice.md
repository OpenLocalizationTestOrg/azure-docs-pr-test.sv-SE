---
title: "Självstudier: Bearbeta EDIFACT fakturor med Azure BizTalk-tjänst | Microsoft Docs"
description: "Hur toocreate och konfigurera hello rutan kopplingen eller API-app och använda den i en logikapp i Azure App Service"
services: biztalk-services
documentationcenter: .net,nodejs,java
author: msftman
manager: erikre
editor: 
ms.assetid: 7e0b93fa-3e2b-4a9c-89ef-abf1d3aa8fa9
ms.service: biztalk-services
ms.devlang: multiple
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: integration
ms.date: 05/31/2016
ms.author: deonhe
ms.openlocfilehash: 4ca021c9084b9b6540c93ef15fc3d44be0966970
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: sv-SE
ms.lasthandoff: 10/06/2017
---
# <a name="tutorial-process-edifact-invoices-using-azure-biztalk-services"></a><span data-ttu-id="c0604-103">Självstudier: Processen EDIFACT fakturor med hjälp av Azure BizTalk-tjänst</span><span class="sxs-lookup"><span data-stu-id="c0604-103">Tutorial: Process EDIFACT invoices using Azure BizTalk Services</span></span>

> [!INCLUDE [BizTalk Services is being retired, and replaced with Azure Logic Apps](../../includes/biztalk-services-retirement.md)]

<span data-ttu-id="c0604-104">Du kan använda hello BizTalk-Services-portalen tooconfigure och distribuera X12 och EDIFACT-avtal.</span><span class="sxs-lookup"><span data-stu-id="c0604-104">You can use hello BizTalk Services Portal tooconfigure and deploy X12 and EDIFACT agreements.</span></span> <span data-ttu-id="c0604-105">I den här självstudiekursen kommer titta vi på hur toocreate ett EDIFACT-avtal för att utbyta fakturor mellan affärspartner.</span><span class="sxs-lookup"><span data-stu-id="c0604-105">In this tutorial, we look at how toocreate an EDIFACT agreement for exchanging invoices between trading partners.</span></span> <span data-ttu-id="c0604-106">Den här självstudiekursen skrivs runt en slutpunkt till slutpunkt affärslösning som inbegriper två handelspartners Northwind och Contoso att utbyta EDIFACT-meddelanden.</span><span class="sxs-lookup"><span data-stu-id="c0604-106">This tutorial is written around an end-to-end business solution involving two trading partners, Northwind and Contoso that exchange EDIFACT messages.</span></span>  

## <a name="sample-based-on-this-tutorial"></a><span data-ttu-id="c0604-107">Exempel baserat på den här självstudiekursen</span><span class="sxs-lookup"><span data-stu-id="c0604-107">Sample based on this tutorial</span></span>
<span data-ttu-id="c0604-108">Den här självstudiekursen skrivs runt ett prov, **skicka EDIFACT fakturor med BizTalk-tjänst**, som är tillgängliga toodownload från hello [MSDN Code Gallery](http://go.microsoft.com/fwlink/?LinkId=401005).</span><span class="sxs-lookup"><span data-stu-id="c0604-108">This tutorial is written around a sample, **Sending EDIFACT Invoices Using BizTalk Services**, which is available toodownload from hello [MSDN Code Gallery](http://go.microsoft.com/fwlink/?LinkId=401005).</span></span> <span data-ttu-id="c0604-109">Du kan använda hello exemplet och gå igenom den här självstudiekursen toounderstand hur hello exemplet skapades.</span><span class="sxs-lookup"><span data-stu-id="c0604-109">You could use hello sample and go through this tutorial toounderstand how hello sample was built.</span></span> <span data-ttu-id="c0604-110">Eller så kan du använda den här självstudiekursen toocreate din egen lösning grunden.</span><span class="sxs-lookup"><span data-stu-id="c0604-110">Or, you could use this tutorial toocreate your own solution ground-up.</span></span> <span data-ttu-id="c0604-111">Den här kursen är riktad mot hello andra sättet så att du förstår hur den här lösningen har skapats.</span><span class="sxs-lookup"><span data-stu-id="c0604-111">This tutorial is targeted towards hello second approach so that you understand how this solution was built.</span></span> <span data-ttu-id="c0604-112">Dessutom så mycket som möjligt hello kursen är konsekvent med hello exemplet och använder hello samma namn för artefakter (till exempel scheman, transformeringar) som används i hello exemplet.</span><span class="sxs-lookup"><span data-stu-id="c0604-112">Also, as much as possible, hello tutorial is consistent with hello sample and uses hello same names for artifacts (for example, schemas, transforms) as used in hello sample.</span></span>  

> [!NOTE]
> <span data-ttu-id="c0604-113">Eftersom den här lösningen skickar ett meddelande från en EAI bridge tooan EDI bridge, återanvänds hello [BizTalk Services Bridge länkning exempel](http://code.msdn.microsoft.com/BizTalk-Bridge-chaining-2246b104) exempel.</span><span class="sxs-lookup"><span data-stu-id="c0604-113">Because this solution involves sending a message from an EAI bridge tooan EDI bridge, it reuses hello [BizTalk Services Bridge chaining sample](http://code.msdn.microsoft.com/BizTalk-Bridge-chaining-2246b104) sample.</span></span>  
> 
> 

## <a name="what-does-hello-solution-do"></a><span data-ttu-id="c0604-114">Vad är hello-lösningen?</span><span class="sxs-lookup"><span data-stu-id="c0604-114">What does hello solution do?</span></span>
<span data-ttu-id="c0604-115">I den här lösningen får Northwind EDIFACT fakturor från Contoso.</span><span class="sxs-lookup"><span data-stu-id="c0604-115">In this solution, Northwind receives EDIFACT invoices from Contoso.</span></span> <span data-ttu-id="c0604-116">Dessa fakturor är inte i ett standard EDI-format.</span><span class="sxs-lookup"><span data-stu-id="c0604-116">These invoices are not in a standard EDI format.</span></span> <span data-ttu-id="c0604-117">Innan du skickar hello faktura tooNorthwind, så måste det vara omvandlade tooan EDIFACT (kallas även INVOIC) dokument.</span><span class="sxs-lookup"><span data-stu-id="c0604-117">So, before sending hello invoice tooNorthwind, it must be transformed tooan EDIFACT invoice (also called INVOIC) document.</span></span> <span data-ttu-id="c0604-118">Erhåller, måste Northwind bearbeta hello EDIFACT faktura och returnera ett meddelande (kallas även CONTRL) tooContoso för kontrollen.</span><span class="sxs-lookup"><span data-stu-id="c0604-118">On receipt, Northwind must process hello EDIFACT invoice, and return a control message (also called CONTRL) tooContoso.</span></span>

![][1]  

<span data-ttu-id="c0604-119">tooachieve scenariot business Contoso använder hello-funktioner som tillhandahålls med Microsoft Azure BizTalk-tjänst.</span><span class="sxs-lookup"><span data-stu-id="c0604-119">tooachieve this business scenario, Contoso uses hello features provided with Microsoft Azure BizTalk Services.</span></span>

* <span data-ttu-id="c0604-120">Contoso använder EAI bryggor tootransform hello ursprungliga faktura tooEDIFACT INVOIC.</span><span class="sxs-lookup"><span data-stu-id="c0604-120">Contoso uses EAI bridges tootransform hello original invoice tooEDIFACT INVOIC.</span></span>
* <span data-ttu-id="c0604-121">Hej EAI bridge skickar sedan hello meddelandet tooan EDI skicka brygga som distribueras som en del av ett avtal som konfigurerats i hello BizTalk-Services-portalen.</span><span class="sxs-lookup"><span data-stu-id="c0604-121">hello EAI bridge then sends hello message tooan EDI send bridge deployed as part of an agreement configured in hello BizTalk Services Portal.</span></span>
* <span data-ttu-id="c0604-122">hello EDI skicka bridge bearbetar hello EDIFACT INVOIC och dirigerar den tooNorthwind.</span><span class="sxs-lookup"><span data-stu-id="c0604-122">hello EDI send bridge processes hello EDIFACT INVOIC and routes it tooNorthwind.</span></span>
* <span data-ttu-id="c0604-123">När du har fått hello faktura returnerar Northwind en CONTRL meddelande toohello EDI får brygga som distribueras som en del av hello avtal.</span><span class="sxs-lookup"><span data-stu-id="c0604-123">After receiving hello invoice, Northwind returns a CONTRL message toohello EDI receive bridge deployed as part of hello agreement.</span></span>  

> [!NOTE]
> <span data-ttu-id="c0604-124">Den här lösningen visar eventuellt också hur toouse batchbearbetning toosend hello fakturor i batchar, i stället för att skicka varje faktura separat.</span><span class="sxs-lookup"><span data-stu-id="c0604-124">Optionally, this solution also demonstrates how toouse batching toosend hello invoices in batches, instead of sending each invoice separately.</span></span>  
> 
> 

<span data-ttu-id="c0604-125">toocomplete hello scenariot kan vi använda Service Bus-köer toosend faktura från Contoso tooNorthwind eller ta emot bekräftelse från exempeldatabasen.</span><span class="sxs-lookup"><span data-stu-id="c0604-125">toocomplete hello scenario, we use Service Bus queues toosend invoice from Contoso tooNorthwind or receive acknowledgement from Northwind.</span></span> <span data-ttu-id="c0604-126">Dessa köer kan skapas med ett klientprogram som är tillgänglig för hämtning och ingår i hello exempel paket som är tillgängliga som en del av den här kursen.</span><span class="sxs-lookup"><span data-stu-id="c0604-126">These queues can be created using a client application, which is available as a download and is included in hello sample package that is available as part of this tutorial.</span></span>  

## <a name="prerequisites"></a><span data-ttu-id="c0604-127">Krav</span><span class="sxs-lookup"><span data-stu-id="c0604-127">Prerequisites</span></span>
* <span data-ttu-id="c0604-128">Du måste ha en Service Bus-namnrymd.</span><span class="sxs-lookup"><span data-stu-id="c0604-128">You must have a Service Bus namespace.</span></span> <span data-ttu-id="c0604-129">Anvisningar om hur du skapar ett namnområde finns [hur man: skapa eller ändra en Service Bus-tjänsten Namespace](https://msdn.microsoft.com/library/azure/hh674478.aspx).</span><span class="sxs-lookup"><span data-stu-id="c0604-129">For instructions on creating a namespace, see [How To: Create or Modify a Service Bus Service Namespace](https://msdn.microsoft.com/library/azure/hh674478.aspx).</span></span> <span data-ttu-id="c0604-130">Låt oss anta att du redan har ett namnområde för Service Bus etableras, kallas **edifactbts**.</span><span class="sxs-lookup"><span data-stu-id="c0604-130">Let us assume that you already have a Service Bus namespace provisioned, called **edifactbts**.</span></span>
* <span data-ttu-id="c0604-131">Du måste ha en prenumeration BizTalk-tjänst.</span><span class="sxs-lookup"><span data-stu-id="c0604-131">You must have a BizTalk Services subscription.</span></span> <span data-ttu-id="c0604-132">Instruktioner finns i [skapa en BizTalk Service med hjälp av Azure klassiska portal](http://go.microsoft.com/fwlink/?LinkID=302280).</span><span class="sxs-lookup"><span data-stu-id="c0604-132">For instructions, see [Create a BizTalk Service using Azure classic portal](http://go.microsoft.com/fwlink/?LinkID=302280).</span></span> <span data-ttu-id="c0604-133">För den här självstudiekursen kommer vi förutsätter att du har en BizTalk-tjänst-prenumeration som kallas **contosowabs**.</span><span class="sxs-lookup"><span data-stu-id="c0604-133">For this tutorial, let us assume you have a BizTalk Services subscription, called **contosowabs**.</span></span>
* <span data-ttu-id="c0604-134">Registrera prenumerationen BizTalk-tjänst för hello BizTalk-Services-portalen.</span><span class="sxs-lookup"><span data-stu-id="c0604-134">Register your BizTalk Services subscription on hello BizTalk Services Portal.</span></span> <span data-ttu-id="c0604-135">Instruktioner finns i [registrerar en BizTalk Tjänstdistribution på hello BizTalk-Services-portalen](https://msdn.microsoft.com/library/hh689837.aspx)</span><span class="sxs-lookup"><span data-stu-id="c0604-135">For instructions, see [Registering a BizTalk Service Deployment on hello BizTalk Services Portal](https://msdn.microsoft.com/library/hh689837.aspx)</span></span>
* <span data-ttu-id="c0604-136">Du måste ha Visual Studio installerat.</span><span class="sxs-lookup"><span data-stu-id="c0604-136">You must have Visual Studio installed.</span></span>
* <span data-ttu-id="c0604-137">Du måste ha BizTalk Services SDK är installerat.</span><span class="sxs-lookup"><span data-stu-id="c0604-137">You must have BizTalk Services SDK installed.</span></span> <span data-ttu-id="c0604-138">Du kan hämta hello SDK från [http://go.microsoft.com/fwlink/?LinkId=235057](http://go.microsoft.com/fwlink/?LinkId=235057)</span><span class="sxs-lookup"><span data-stu-id="c0604-138">You can download hello SDK from [http://go.microsoft.com/fwlink/?LinkId=235057](http://go.microsoft.com/fwlink/?LinkId=235057)</span></span>  

## <a name="step-1-create-hello-service-bus-queues"></a><span data-ttu-id="c0604-139">Steg 1: Skapa hello Service Bus-köer</span><span class="sxs-lookup"><span data-stu-id="c0604-139">Step 1: Create hello Service Bus queues</span></span>
<span data-ttu-id="c0604-140">Den här lösningen använder Service Bus-köer tooexchange meddelanden mellan affärspartner.</span><span class="sxs-lookup"><span data-stu-id="c0604-140">This solution uses Service Bus queues tooexchange messages between trading partners.</span></span> <span data-ttu-id="c0604-141">Contoso och Northwind skickar du meddelanden toohello köer från där hello EAI-och/eller EDI bryggor använda dem.</span><span class="sxs-lookup"><span data-stu-id="c0604-141">Contoso and Northwind send messages toohello queues from where hello EAI and/or EDI bridges consume them.</span></span> <span data-ttu-id="c0604-142">Du behöver tre Service Bus-köer för den här lösningen:</span><span class="sxs-lookup"><span data-stu-id="c0604-142">For this solution, you need three Service Bus queues:</span></span>

* <span data-ttu-id="c0604-143">**northwindreceive** – Northwind tar emot hello faktura från Contoso via den här kön.</span><span class="sxs-lookup"><span data-stu-id="c0604-143">**northwindreceive** – Northwind receives hello invoice from Contoso over this queue.</span></span>
* <span data-ttu-id="c0604-144">**contosoreceive** – Contoso tar emot hello bekräftelse från exempeldatabasen via den här kön.</span><span class="sxs-lookup"><span data-stu-id="c0604-144">**contosoreceive** – Contoso receives hello acknowledgement from Northwind over this queue.</span></span>
* <span data-ttu-id="c0604-145">**avbruten** – alla avbrutna meddelanden är routade toothis kön.</span><span class="sxs-lookup"><span data-stu-id="c0604-145">**suspended** – All suspended messages are routed toothis queue.</span></span> <span data-ttu-id="c0604-146">Meddelanden gör uppehåll om de inte under bearbetning.</span><span class="sxs-lookup"><span data-stu-id="c0604-146">Messages are suspended if they fail during processing.</span></span>

<span data-ttu-id="c0604-147">Du kan skapa dessa Service Bus-köer med hjälp av ett klientprogram i hello exempel paketet.</span><span class="sxs-lookup"><span data-stu-id="c0604-147">You can create these Service Bus queues by using a client application included in hello sample package.</span></span>  

1. <span data-ttu-id="c0604-148">Hello plats dit du hämtade hello exempel, öppna **självstudiekursen skickar fakturor med BizTalk Services EDI Bridges.sln**.</span><span class="sxs-lookup"><span data-stu-id="c0604-148">From hello location where you downloaded hello sample, open **Tutorial Sending Invoices Using BizTalk Services EDI Bridges.sln**.</span></span>
2. <span data-ttu-id="c0604-149">Tryck på **F5** toobuild och starta hello **kursen klienten** program.</span><span class="sxs-lookup"><span data-stu-id="c0604-149">Press **F5** toobuild and start hello **Tutorial Client** application.</span></span>
3. <span data-ttu-id="c0604-150">Ange hello Service Bus ACS namnområde, Utfärdarens namn och nyckeln för utfärdaren i hello-skärmen.</span><span class="sxs-lookup"><span data-stu-id="c0604-150">In hello screen, enter hello Service Bus ACS namespace, issuer name, and issuer key.</span></span>
   
   ![][2]  
4. <span data-ttu-id="c0604-151">En meddelanderuta uppmanas att tre köer kommer att skapas i Service Bus-namnrymd.</span><span class="sxs-lookup"><span data-stu-id="c0604-151">A message box prompts that three queues will be created in your Service Bus namespace.</span></span> <span data-ttu-id="c0604-152">Klicka på **OK**.</span><span class="sxs-lookup"><span data-stu-id="c0604-152">Click **OK**.</span></span>
5. <span data-ttu-id="c0604-153">Lämna hello kursen klienten körs.</span><span class="sxs-lookup"><span data-stu-id="c0604-153">Leave hello Tutorial Client running.</span></span> <span data-ttu-id="c0604-154">Öppna hello, klicka på **Service Bus** > ***Service Bus-namnrymd*** > **köer**, och kontrollera att hello tre köer skapas.</span><span class="sxs-lookup"><span data-stu-id="c0604-154">Open hello , click **Service Bus** > ***your Service Bus namespace*** > **Queues**, and verify that hello three queues are created.</span></span>  

## <a name="step-2-create-and-deploy-trading-partner-agreement"></a><span data-ttu-id="c0604-155">Steg 2: Skapa och distribuera handelspartneravtal</span><span class="sxs-lookup"><span data-stu-id="c0604-155">Step 2: Create and deploy trading partner agreement</span></span>
<span data-ttu-id="c0604-156">Skapa ett handelspartneravtal mellan Contoso och Northwind.</span><span class="sxs-lookup"><span data-stu-id="c0604-156">Create a trading partner agreement between Contoso and Northwind.</span></span> <span data-ttu-id="c0604-157">Ett handelspartneravtal definierar ett handel avtal mellan hello två affärspartner, till exempel vilka schemat toouse meddelande som messaging protocol toouse osv. Ett handelspartneravtal innehåller två EDI-bryggor, en toosend meddelanden tootrading partners (kallas hello **EDI skicka bridge**) och en tooreceive meddelanden från handelspartner (kallas hello **EDI får bridge**).</span><span class="sxs-lookup"><span data-stu-id="c0604-157">A trading partner agreement defines a trade contract between hello two business partners, such as which message schema toouse, which messaging protocol toouse, etc. A trading partner agreement includes two EDI bridges, one toosend messages tootrading partners (called hello **EDI Send bridge**) and one tooreceive messages from trading partners (called hello **EDI Receive bridge**).</span></span>

<span data-ttu-id="c0604-158">Hello gäller den här lösningen är hello EDI skicka bridge motsvarar toohello Skicka sida av hello avtal och är används toosend hello EDIFACT faktura från Contoso tooNorthwind.</span><span class="sxs-lookup"><span data-stu-id="c0604-158">In hello context of this solution, hello EDI send bridge corresponds toohello send-side of hello agreement and is used toosend hello EDIFACT invoice from Contoso tooNorthwind.</span></span> <span data-ttu-id="c0604-159">På liknande sätt hello EDI får bridge motsvarar toohello mottagarsidan hello avtal och är används tooreceive bekräftelser från exempeldatabasen.</span><span class="sxs-lookup"><span data-stu-id="c0604-159">Similarly, hello EDI receive bridge corresponds toohello receive-side of hello agreement and is used tooreceive acknowledgements from Northwind.</span></span>  

### <a name="create-hello-trading-partners"></a><span data-ttu-id="c0604-160">Skapa hello handelspartner</span><span class="sxs-lookup"><span data-stu-id="c0604-160">Create hello trading partners</span></span>
<span data-ttu-id="c0604-161">toostart med, skapa handelspartner för Contoso och Northwind.</span><span class="sxs-lookup"><span data-stu-id="c0604-161">toostart with, create trading partners for Contoso and Northwind.</span></span>  

1. <span data-ttu-id="c0604-162">I hello BizTalk-Services-portalen på hello **Partners** klickar du på **Lägg till**.</span><span class="sxs-lookup"><span data-stu-id="c0604-162">In hello BizTalk Services Portal, on hello **Partners** tab, click **Add**.</span></span>
2. <span data-ttu-id="c0604-163">Hello nya partner på sidan Ange **Contoso** som Partnernamn och klicka sedan på **spara**.</span><span class="sxs-lookup"><span data-stu-id="c0604-163">In hello New partner page, enter **Contoso** as a partner name, and then click **Save**.</span></span>
3. <span data-ttu-id="c0604-164">Upprepa hello steg toocreate hello andra partner **Northwind**.</span><span class="sxs-lookup"><span data-stu-id="c0604-164">Repeat hello step toocreate hello second partner, **Northwind**.</span></span>  

### <a name="create-hello-agreement"></a><span data-ttu-id="c0604-165">Skapa hello avtal</span><span class="sxs-lookup"><span data-stu-id="c0604-165">Create hello agreement</span></span>
<span data-ttu-id="c0604-166">Handelspartneravtal skapas mellan företag-profiler för handelspartner.</span><span class="sxs-lookup"><span data-stu-id="c0604-166">Trading partner agreements are created between business profiles of trading partners.</span></span> <span data-ttu-id="c0604-167">Den här lösningen använder hello standard partner profiler som skapas automatiskt när vi skapade hello partners.</span><span class="sxs-lookup"><span data-stu-id="c0604-167">This solution uses hello default partner profiles that are automatically created when we created hello partners.</span></span>  

1. <span data-ttu-id="c0604-168">I hello BizTalk-Services-portalen klickar du på **avtal** > **Lägg till**.</span><span class="sxs-lookup"><span data-stu-id="c0604-168">In hello BizTalk Services Portal, click **Agreements** > **Add**.</span></span>
2. <span data-ttu-id="c0604-169">I hello nya avtalet **allmänna inställningar** anger hello värden som visas i hello bilden nedan, och klicka sedan på **Fortsätt**.</span><span class="sxs-lookup"><span data-stu-id="c0604-169">In hello new agreement’s **General Settings** page, specify hello values as shown in hello image below, and then click **Continue**.</span></span>
   
   ![][3]  
   
   <span data-ttu-id="c0604-170">När du klickar på **Fortsätt**, två flikar **tar emot inställningar** och **skicka inställningar** blir tillgängliga.</span><span class="sxs-lookup"><span data-stu-id="c0604-170">After you click **Continue**, two tabs, **Receive Settings** and **Send Settings** become available.</span></span>
3. <span data-ttu-id="c0604-171">Skapa hello skicka avtal mellan Contoso och Northwind.</span><span class="sxs-lookup"><span data-stu-id="c0604-171">Create hello send agreement between Contoso and Northwind.</span></span> <span data-ttu-id="c0604-172">Det här avtalet styr hur Contoso skickar hello EDIFACT faktura tooNorthwind.</span><span class="sxs-lookup"><span data-stu-id="c0604-172">This agreement governs how Contoso sends hello EDIFACT invoice tooNorthwind.</span></span>
   
   1. <span data-ttu-id="c0604-173">Klicka på **skicka inställningar**.</span><span class="sxs-lookup"><span data-stu-id="c0604-173">Click **Send Settings**.</span></span>
   2. <span data-ttu-id="c0604-174">Behåll hello standardvärdena på hello **inkommande URL**, **transformera**, och **Batching** flikar.</span><span class="sxs-lookup"><span data-stu-id="c0604-174">Retain hello default values on hello **Inbound URL**, **Transform**, and **Batching** tabs.</span></span>
   3. <span data-ttu-id="c0604-175">På hello **protokollet** under hello fliken **scheman** avsnittet laddar du upp hello **EFACT_D93A_INVOIC.xsd** schema.</span><span class="sxs-lookup"><span data-stu-id="c0604-175">On hello **Protocol** tab, under hello **Schemas** section, upload hello **EFACT_D93A_INVOIC.xsd** schema.</span></span> <span data-ttu-id="c0604-176">Det här schemat är tillgänglig med hello exempel paketet.</span><span class="sxs-lookup"><span data-stu-id="c0604-176">This schema is available with hello sample package.</span></span>
      
      ![][4]  
   4. <span data-ttu-id="c0604-177">På hello **Transport** anger hello information för hello Service Bus-köer.</span><span class="sxs-lookup"><span data-stu-id="c0604-177">On hello **Transport** tab, specify hello details for hello Service Bus queues.</span></span> <span data-ttu-id="c0604-178">För hello sändningssidan avtalet, vi använder hello **northwindreceive** kö toosend hello EDIFACT faktura tooNorthwind och hello **avbruten** kö tooroute alla meddelanden som inte under bearbetning och Pausa.</span><span class="sxs-lookup"><span data-stu-id="c0604-178">For hello send-side agreement, we use hello **northwindreceive** queue toosend hello EDIFACT invoice tooNorthwind, and hello **suspended** queue tooroute any messages that fail during processing and are suspended.</span></span> <span data-ttu-id="c0604-179">Du har skapat dessa köer i **steg 1: skapa hello Service Bus-köer** (i det här avsnittet).</span><span class="sxs-lookup"><span data-stu-id="c0604-179">You created these queues in **Step 1: Create hello Service Bus queues** (in this topic).</span></span>
      
      ![][5]  
      
      <span data-ttu-id="c0604-180">Under **Transport Inställningar > transporttypen** och **upphävande Meddelandeinställningar > transporttypen**väljer Azure Service Bus och ange värden för hello enligt hello bild.</span><span class="sxs-lookup"><span data-stu-id="c0604-180">Under **Transport Settings > Transport type** and **Message Suspension Settings > Transport type**, select Azure Service Bus and provide hello values as shown in hello image.</span></span>
4. <span data-ttu-id="c0604-181">Skapa hello får avtal mellan Contoso och Northwind.</span><span class="sxs-lookup"><span data-stu-id="c0604-181">Create hello receive agreement between Contoso and Northwind.</span></span> <span data-ttu-id="c0604-182">Det här avtalet styr hur Contoso tar emot hello bekräftelse från exempeldatabasen.</span><span class="sxs-lookup"><span data-stu-id="c0604-182">This agreement governs how Contoso receives hello acknowledgement from Northwind.</span></span>
   
   1. <span data-ttu-id="c0604-183">Klicka på **ta emot inställningarna**.</span><span class="sxs-lookup"><span data-stu-id="c0604-183">Click **Receive Settings**.</span></span>
   2. <span data-ttu-id="c0604-184">Behåll hello standardvärdena på hello **Transport** och **transformera** flikar.</span><span class="sxs-lookup"><span data-stu-id="c0604-184">Retain hello default values on hello **Transport** and **Transform** tabs.</span></span>
   3. <span data-ttu-id="c0604-185">På hello **protokollet** under hello fliken **scheman** avsnittet laddar du upp hello **EFACT_4.1_CONTRL.xsd** schema.</span><span class="sxs-lookup"><span data-stu-id="c0604-185">On hello **Protocol** tab, under hello **Schemas** section, upload hello **EFACT_4.1_CONTRL.xsd** schema.</span></span> <span data-ttu-id="c0604-186">Det här schemat är tillgänglig med hello exempel paketet.</span><span class="sxs-lookup"><span data-stu-id="c0604-186">This schema is available with hello sample package.</span></span>
   4. <span data-ttu-id="c0604-187">På hello **väg** fliken, skapa ett filter tooensure som endast bekräftelser från exempeldatabasen är routade tooContoso.</span><span class="sxs-lookup"><span data-stu-id="c0604-187">On hello **Route** tab, create a filter tooensure that only acknowledgements from Northwind are routed tooContoso.</span></span> <span data-ttu-id="c0604-188">Under **vägar**, klickar du på **Lägg till** toocreate hello routning filter.</span><span class="sxs-lookup"><span data-stu-id="c0604-188">Under **Route Settings**, click **Add** toocreate hello routing filter.</span></span>
      
      ![][6]  
      
      1. <span data-ttu-id="c0604-189">Ange värden för **Regelnamn**, **väg regeln**, och **väg mål** enligt hello bild.</span><span class="sxs-lookup"><span data-stu-id="c0604-189">Provide values for **Rule Name**, **Route rule**, and **Route destination** as shown in hello image.</span></span>
      2. <span data-ttu-id="c0604-190">Klicka på **Spara**.</span><span class="sxs-lookup"><span data-stu-id="c0604-190">Click **Save**.</span></span>
   5. <span data-ttu-id="c0604-191">På hello **väg** igen och ange var pausat bekräftelser (bekräftelser som inte under bearbetning) dirigeras till.</span><span class="sxs-lookup"><span data-stu-id="c0604-191">On hello **Route** tab again, specify where suspended acknowledgements (acknowledgements that fail during processing) are routed to.</span></span> <span data-ttu-id="c0604-192">Ange hello transport typen tooAzure Service Bus, vidarebefordra måltypen för**kön**, autentisering skriver för**signatur för delad åtkomst** (SAS), ange hello SAS-anslutningssträng för hello Service Bus namnområde, och ange sedan hello könamnet som **avbruten**.</span><span class="sxs-lookup"><span data-stu-id="c0604-192">Set hello transport type tooAzure Service Bus, route destination type too**Queue**, authentication type too**Shared Access Signature** (SAS), provide hello SAS connection string for hello Service Bus namespace, and then enter hello queue name as **suspended**.</span></span>
5. <span data-ttu-id="c0604-193">Klicka slutligen på **distribuera** toodeploy hello avtal.</span><span class="sxs-lookup"><span data-stu-id="c0604-193">Finally, click **Deploy** toodeploy hello agreement.</span></span> <span data-ttu-id="c0604-194">Obs hello slutpunkter där hello skicka och ta emot avtal distribueras.</span><span class="sxs-lookup"><span data-stu-id="c0604-194">Note hello endpoints where hello send and receive agreements get deployed.</span></span>
   
   * <span data-ttu-id="c0604-195">På hello **skicka inställningar** fliken, under **inkommande URL**, Observera hello slutpunkt.</span><span class="sxs-lookup"><span data-stu-id="c0604-195">On hello **Send Settings** tab, under **Inbound URL**, note hello endpoint.</span></span> <span data-ttu-id="c0604-196">toosend ett meddelande från Contoso tooNorthwind med hello EDI skicka bridge, måste du skicka ett meddelande toothis slutpunkt.</span><span class="sxs-lookup"><span data-stu-id="c0604-196">toosend a message from Contoso tooNorthwind using hello EDI send bridge, you must send a message toothis endpoint.</span></span>
   * <span data-ttu-id="c0604-197">På hello **tar emot inställningar** fliken, under **Transport**, Observera hello slutpunkt.</span><span class="sxs-lookup"><span data-stu-id="c0604-197">On hello **Receive Settings** tab, under **Transport**, note hello endpoint.</span></span> <span data-ttu-id="c0604-198">toosend ett meddelande från exempeldatabasen tooContoso med hello EDI få bridge, måste du skicka ett meddelande toothis slutpunkt.</span><span class="sxs-lookup"><span data-stu-id="c0604-198">toosend a message from Northwind tooContoso using hello EDI receive bridge, you must send a message toothis endpoint.</span></span>  

## <a name="step-3-create-and-deploy-hello-biztalk-services-project"></a><span data-ttu-id="c0604-199">Steg 3: Skapa och distribuera hello BizTalk-Services-projekt</span><span class="sxs-lookup"><span data-stu-id="c0604-199">Step 3: Create and deploy hello BizTalk Services project</span></span>
<span data-ttu-id="c0604-200">I föregående steg hello distribuerade hello EDI skicka och ta emot avtal tooprocess EDIFACT fakturor och bekräftelser.</span><span class="sxs-lookup"><span data-stu-id="c0604-200">In hello previous step, you deployed hello EDI send and receive agreements tooprocess EDIFACT invoices and acknowledgements.</span></span> <span data-ttu-id="c0604-201">Dessa avtal kan endast bearbeta meddelanden som uppfyller toohello standard EDIFACT meddelandet schemat.</span><span class="sxs-lookup"><span data-stu-id="c0604-201">These agreements can only process messages that conform toohello standard EDIFACT message schema.</span></span> <span data-ttu-id="c0604-202">Per hello scenario för den här lösningen skickar Contoso dock en faktura tooNorthwind i ett egna interna schema.</span><span class="sxs-lookup"><span data-stu-id="c0604-202">However, per hello scenario for this solution, Contoso sends an invoice tooNorthwind in an in-house proprietary schema.</span></span> <span data-ttu-id="c0604-203">Så innan hello-meddelande skickas toohello EDI skicka bridge, måste den konverteras från hello interna schema toohello standard EDIFACT faktura-schema.</span><span class="sxs-lookup"><span data-stu-id="c0604-203">So, before hello message is sent toohello EDI send bridge, it must be transformed from hello in-house schema toohello standard EDIFACT invoice schema.</span></span> <span data-ttu-id="c0604-204">hello BizTalk Services EAI projekt gör detta.</span><span class="sxs-lookup"><span data-stu-id="c0604-204">hello BizTalk Services EAI project does that.</span></span>

<span data-ttu-id="c0604-205">hello BizTalk-tjänst-projektet **InvoiceProcessingBridge**, att transformeringar hello meddelandet ingår även som en del av hello-exempel som du hämtat.</span><span class="sxs-lookup"><span data-stu-id="c0604-205">hello BizTalk Services project, **InvoiceProcessingBridge**, that transforms hello message is also included as part of hello sample you downloaded.</span></span> <span data-ttu-id="c0604-206">hello projektet innehåller följande artefakter hello:</span><span class="sxs-lookup"><span data-stu-id="c0604-206">hello project includes hello following artifacts:</span></span>

* <span data-ttu-id="c0604-207">**INHOUSEINVOICE. XSD** – schemat för hello interna fakturan som skickas tooNorthwind.</span><span class="sxs-lookup"><span data-stu-id="c0604-207">**INHOUSEINVOICE.XSD** – Schema of hello in-house invoice that is sent tooNorthwind.</span></span>
* <span data-ttu-id="c0604-208">**EFACT_D93A_INVOIC. XSD** – schemat för hello standard EDIFACT faktura.</span><span class="sxs-lookup"><span data-stu-id="c0604-208">**EFACT_D93A_INVOIC.XSD** – Schema of hello standard EDIFACT invoice.</span></span>
* <span data-ttu-id="c0604-209">**EFACT_4.1_CONTRL. XSD** – schemat för hello EDIFACT bekräftelse att Northwind skickar tooContoso.</span><span class="sxs-lookup"><span data-stu-id="c0604-209">**EFACT_4.1_CONTRL.XSD** – Schema of hello EDIFACT acknowledgement that Northwind sends tooContoso.</span></span>
* <span data-ttu-id="c0604-210">**INHOUSEINVOICE_to_D93AINVOIC. TRFM** – hello transformeringen som mappar hello interna faktura schema toohello standard EDIFACT faktura-schema.</span><span class="sxs-lookup"><span data-stu-id="c0604-210">**INHOUSEINVOICE_to_D93AINVOIC.TRFM** – hello transform that maps hello in-house invoice schema toohello standard EDIFACT invoice schema.</span></span>  

### <a name="create-hello-biztalk-services-project"></a><span data-ttu-id="c0604-211">Skapa hello BizTalk-Services-projekt</span><span class="sxs-lookup"><span data-stu-id="c0604-211">Create hello BizTalk Services project</span></span>
1. <span data-ttu-id="c0604-212">Expandera hello InvoiceProcessingBridge projekt i hello Visual Studio-lösning, och öppna hello **MessageFlowItinerary.bcs** fil.</span><span class="sxs-lookup"><span data-stu-id="c0604-212">In hello Visual Studio solution, expand hello InvoiceProcessingBridge project, and then open hello **MessageFlowItinerary.bcs** file.</span></span>
2. <span data-ttu-id="c0604-213">Klicka någonstans på hello arbetsytan och ange hello **BizTalk-tjänst-URL** hello egenskapen rutan toospecify prenumerationsnamn din BizTalk-tjänst.</span><span class="sxs-lookup"><span data-stu-id="c0604-213">Click anywhere on hello canvas and set hello **BizTalk Service URL** in hello property box toospecify your BizTalk Services subscription name.</span></span> <span data-ttu-id="c0604-214">Till exempel `https://contosowabs.biztalk.windows.net`.</span><span class="sxs-lookup"><span data-stu-id="c0604-214">For example, `https://contosowabs.biztalk.windows.net`.</span></span>
   
   ![][7]  
3. <span data-ttu-id="c0604-215">Dra från verktygslådan hello en **Xml One-Way Bridge** toohello arbetsytan.</span><span class="sxs-lookup"><span data-stu-id="c0604-215">From hello toolbox, drag an **Xml One-Way Bridge** toohello canvas.</span></span> <span data-ttu-id="c0604-216">Ange hello **entitetsnamnet** och **relativ adress** egenskaper för hello överbrygga för**ProcessInvoiceBridge**.</span><span class="sxs-lookup"><span data-stu-id="c0604-216">Set hello **Entity Name** and **Relative Address** properties of hello bridge too**ProcessInvoiceBridge**.</span></span> <span data-ttu-id="c0604-217">Dubbelklicka på **ProcessInvoiceBridge** tooopen hello bridge configuration yta.</span><span class="sxs-lookup"><span data-stu-id="c0604-217">Double-click **ProcessInvoiceBridge** tooopen hello bridge configuration surface.</span></span>
4. <span data-ttu-id="c0604-218">Inom hello **meddelandetyper** klickar du på hello plus (**+**) knappen toospecify hello schemat för inkommande hello-meddelande.</span><span class="sxs-lookup"><span data-stu-id="c0604-218">Within hello **Message Types** box, click hello plus (**+**) button toospecify hello schema of hello incoming message.</span></span> <span data-ttu-id="c0604-219">Eftersom hello inkommande meddelande för hello EAI bridge är alltid hello interna faktura, ställa in detta också**INHOUSEINVOICE**.</span><span class="sxs-lookup"><span data-stu-id="c0604-219">Because hello incoming message for hello EAI bridge is always hello in-house invoice, set this too**INHOUSEINVOICE**.</span></span>
   
   ![][8]  
5. <span data-ttu-id="c0604-220">Klicka på hello **XML-transformeringen** form, och hello i egenskapsrutan för hello **Maps** egenskap, klickar du på ellipsknappen hello (**...** ) knappen.</span><span class="sxs-lookup"><span data-stu-id="c0604-220">Click hello **Xml Transform** shape, and in hello property box, for hello **Maps** property, click hello ellipsis (**...**) button.</span></span> <span data-ttu-id="c0604-221">I hello **Maps markeringen** dialogrutan, Välj hello **INHOUSEINVOICE_to_D93AINVOIC** transformeringsfilen och klicka sedan på **OK**.</span><span class="sxs-lookup"><span data-stu-id="c0604-221">In hello **Maps Selection** dialog box, select hello **INHOUSEINVOICE_to_D93AINVOIC** transform file, and then click **OK**.</span></span>
   
   ![][9]  
6. <span data-ttu-id="c0604-222">Gå tillbaka för**MessageFlowItinerary.bcs**, och dra från verktygslådan hello en **tvåvägs externa tjänstslutpunkten** toohello höger i hello **ProcessInvoiceBridge**.</span><span class="sxs-lookup"><span data-stu-id="c0604-222">Go back too**MessageFlowItinerary.bcs**, and from hello toolbox, drag a **Two-Way External Service Endpoint** toohello right of hello **ProcessInvoiceBridge**.</span></span> <span data-ttu-id="c0604-223">Ange dess **entitetsnamnet** egenskapen för**EDIBridge**.</span><span class="sxs-lookup"><span data-stu-id="c0604-223">Set its **Entity Name** property too**EDIBridge**.</span></span>
7. <span data-ttu-id="c0604-224">Hello Solution Explorer, expandera hello **MessageFlowItinerary.bcs** och dubbelklicka på hello **EDIBridge.config** fil.</span><span class="sxs-lookup"><span data-stu-id="c0604-224">In hello Solution Explorer, expand hello **MessageFlowItinerary.bcs** and double-click hello **EDIBridge.config** file.</span></span> <span data-ttu-id="c0604-225">Ersätt hello innehållet i hello **EDIBridge.config** med hello följande.</span><span class="sxs-lookup"><span data-stu-id="c0604-225">Replace hello content of hello **EDIBridge.config** with hello following.</span></span>
   
   > [!NOTE]
   > <span data-ttu-id="c0604-226">Varför behöver tooedit hello .config-filen? hello externa tjänstslutpunkten vi lagt till toohello bridge designerytan representerar hello EDI bryggor som vi tidigare har distribuerats.</span><span class="sxs-lookup"><span data-stu-id="c0604-226">Why do I need tooedit hello .config file? hello external service endpoint that we added toohello bridge designer canvas represents hello EDI bridges that we deployed earlier.</span></span> <span data-ttu-id="c0604-227">EDI bryggor är dubbelriktad bryggor med en skicka och ta emot sida.</span><span class="sxs-lookup"><span data-stu-id="c0604-227">EDI bridges are two-way bridges, with a send and receive side.</span></span> <span data-ttu-id="c0604-228">Hej är EAI bridge vi lagt till toohello bridge designer dock en enkelriktad brygga.</span><span class="sxs-lookup"><span data-stu-id="c0604-228">However, hello EAI bridge that we added toohello bridge designer is a one-way bridge.</span></span> <span data-ttu-id="c0604-229">Så toohandle hello annat meddelande exchange mönster av hello två platslänkbryggor, vi använder en anpassad bridge beteende genom att inkludera dess konfiguration i hello .config-fil.</span><span class="sxs-lookup"><span data-stu-id="c0604-229">So, toohandle hello different message exchange patterns of hello two bridges, we use a custom bridge behavior by including its configuration in hello .config file.</span></span> <span data-ttu-id="c0604-230">Dessutom hanterar hello beteende också hello toohello EDI skicka bridge autentiseringsslutpunkten. Detta beteende är tillgänglig som en separat exempelprogram på [BizTalk Services Bridge länkning exempel - EAI tooEDI](http://code.msdn.microsoft.com/BizTalk-Bridge-chaining-2246b104).</span><span class="sxs-lookup"><span data-stu-id="c0604-230">Additionally, hello custom behavior also handles hello authentication toohello EDI send bridge endpoint.This custom behavior is available as a separate sample at [BizTalk Services Bridge chaining sample - EAI tooEDI](http://code.msdn.microsoft.com/BizTalk-Bridge-chaining-2246b104).</span></span> <span data-ttu-id="c0604-231">Den här lösningen återanvänder hello exempel.</span><span class="sxs-lookup"><span data-stu-id="c0604-231">This solution reuses hello sample.</span></span>  
   > 
   > 
   
   ```
   <?xml version="1.0" encoding="utf-8"?>
   <configuration>
     <system.serviceModel>
       <extensions>
         <behaviorExtensions>
           <add name="BridgeAuthentication" 
                 type="Microsoft.BizTalk.Bridge.Behaviour.BridgeBehaviorElement, Microsoft.BizTalk.Bridge.Behaviour, Version=1.0.0.0, Culture=neutral, PublicKeyToken=ae58f69b69495c05" />
         </behaviorExtensions>
       </extensions>
       <behaviors>
         <endpointBehaviors>
           <behavior name="BridgeAuthenticationConfiguration">
             <!-- Enter hello ACS namespace, issuer name and issuer secret of hello BizTalk Services deployment -->
             <BridgeAuthentication acsnamespace="[YOUR ACS NAMESPACE]" 
                                   issuername="owner" 
                                   issuersecret="[YOUR ACS SECRET]" />
             <webHttp />
           </behavior>
         </endpointBehaviors>
       </behaviors>
       <bindings>
         <webHttpBinding>
           <binding name="BridgeBindingConfiguration">
             <security mode="Transport" />
           </binding>
         </webHttpBinding>
       </bindings>
       <client>
         <clear />
         <!--
           Go BizTalk Portal > Agreement > Send Settings > Inbound URL
           Copy hello Endpoint URL and paste it in hello below address field
         -->
         <endpoint name="TwoWayExternalServiceEndpointReference1" 
                   address="[YOUR EDI BRIDGE SEND URI]" 
                   behaviorConfiguration="BridgeAuthenticationConfiguration" 
                   binding="webHttpBinding" 
                   bindingConfiguration="BridgeBindingConfiguration" 
                   contract="System.ServiceModel.Routing.IRequestReplyRouter" />
       </client>
     </system.serviceModel>
   </configuration>
   
   ```
8. <span data-ttu-id="c0604-232">Uppdatera hello EDIBridge.config filen tooinclude konfigurationsinformation</span><span class="sxs-lookup"><span data-stu-id="c0604-232">Update hello EDIBridge.config file tooinclude configuration details</span></span>
   
   * <span data-ttu-id="c0604-233">Under  *<behaviors>* anger hello ACS-namnområde och nyckel som är associerad med hello BizTalk-abonnemang.</span><span class="sxs-lookup"><span data-stu-id="c0604-233">Under *<behaviors>*, provide hello ACS namespace and key associated with hello BizTalk Services subscription.</span></span>
   * <span data-ttu-id="c0604-234">Under  *<client>* , ange hello slutpunkt där hello EDI skicka avtal har distribuerats.</span><span class="sxs-lookup"><span data-stu-id="c0604-234">Under *<client>*, provide hello endpoint where hello EDI send agreement is deployed.</span></span>
   
   <span data-ttu-id="c0604-235">Spara ändringarna och stänga hello konfigurationsfilen.</span><span class="sxs-lookup"><span data-stu-id="c0604-235">Save changes and close hello configuration file.</span></span>
9. <span data-ttu-id="c0604-236">Hello verktygslådan, klicka på hello **Connector** och koppling hello **ProcessInvoiceBridge** och **EDIBridge** komponenter.</span><span class="sxs-lookup"><span data-stu-id="c0604-236">From hello Toolbox, click hello **Connector** and join hello **ProcessInvoiceBridge** and **EDIBridge** components.</span></span> <span data-ttu-id="c0604-237">Välj hello-koppling och egenskaper i rutan Ange **filtervillkor** för**matcha alla**.</span><span class="sxs-lookup"><span data-stu-id="c0604-237">Select hello connector, and in Properties box, set **Filter Condition** too**Match All**.</span></span> <span data-ttu-id="c0604-238">Detta säkerställer att alla meddelanden som bearbetas av hello EAI bridge dirigeras toohello EDI bridge.</span><span class="sxs-lookup"><span data-stu-id="c0604-238">This ensures that all messages processed by hello EAI bridge are routed toohello EDI bridge.</span></span>
   
   ![][10]  
10. <span data-ttu-id="c0604-239">Spara ändringarna toohello lösning.</span><span class="sxs-lookup"><span data-stu-id="c0604-239">Save changes toohello solution.</span></span>  

### <a name="deploy-hello-project"></a><span data-ttu-id="c0604-240">Distribuera hello-projekt</span><span class="sxs-lookup"><span data-stu-id="c0604-240">Deploy hello project</span></span>
1. <span data-ttu-id="c0604-241">Hämta och installera hello SSL-certifikat för prenumerationen BizTalk-tjänst på hello datorn där du skapade hello BizTalk-Services-projekt.</span><span class="sxs-lookup"><span data-stu-id="c0604-241">On hello computer where you created hello BizTalk Services project, download and install hello SSL certificate for your BizTalk Services subscription.</span></span> <span data-ttu-id="c0604-242">Från, under BizTalk-tjänst klickar du på **instrumentpanelen**, och klicka sedan på **hämta SSL-certifikat**.</span><span class="sxs-lookup"><span data-stu-id="c0604-242">From , under BizTalk Services, click **Dashboard**, and then click **Download SSL Certificate**.</span></span> <span data-ttu-id="c0604-243">Dubbelklicka på hello certifikatet och följ hello fråga toocomplete hello installation.</span><span class="sxs-lookup"><span data-stu-id="c0604-243">Double-click hello certificate and follow hello prompt toocomplete hello installation.</span></span> <span data-ttu-id="c0604-244">Kontrollera att du installerar hello certifikatet under **betrodda rotcertifikatutfärdare** certifikatarkiv.</span><span class="sxs-lookup"><span data-stu-id="c0604-244">Make sure you install hello certificate under **Trusted Root Certification Authorities** certificate store.</span></span>
2. <span data-ttu-id="c0604-245">I Visual Studio Solution Explorer högerklickar du på hello **InvoiceProcessingBridge** projektet och klicka sedan på **distribuera**.</span><span class="sxs-lookup"><span data-stu-id="c0604-245">In Visual Studio Solution Explorer, right-click hello **InvoiceProcessingBridge** project, and then click **Deploy**.</span></span>
3. <span data-ttu-id="c0604-246">Ange värden för hello enligt hello bild och klicka sedan på **distribuera**.</span><span class="sxs-lookup"><span data-stu-id="c0604-246">Provide hello values as shown in hello image, and then click **Deploy**.</span></span> <span data-ttu-id="c0604-247">Du kan hämta hello ACS-autentiseringsuppgifter för BizTalk-tjänst genom att klicka på **anslutningsinformationen** hello BizTalk-tjänst instrumentpanel.</span><span class="sxs-lookup"><span data-stu-id="c0604-247">You can get hello ACS credentials for BizTalk Services by clicking **Connection Information** from hello BizTalk Services dashboard.</span></span>
   
   ![][11]  
   
   <span data-ttu-id="c0604-248">Kopiera från hello utdatafönstret hello slutpunkt där hello EAI bridge distribueras, till exempel `https://contosowabs.biztalk.windows.net/default/ProcessInvoiceBridge`.</span><span class="sxs-lookup"><span data-stu-id="c0604-248">From hello output pane, copy hello endpoint where hello EAI bridge is deployed, for example, `https://contosowabs.biztalk.windows.net/default/ProcessInvoiceBridge`.</span></span> <span data-ttu-id="c0604-249">Du behöver den här slutpunkts-URL senare.</span><span class="sxs-lookup"><span data-stu-id="c0604-249">You will need this endpoint URL later.</span></span>  

## <a name="step-4-test-hello-solution"></a><span data-ttu-id="c0604-250">Steg 4: Testa hello-lösning</span><span class="sxs-lookup"><span data-stu-id="c0604-250">Step 4: Test hello solution</span></span>
<span data-ttu-id="c0604-251">I det här avsnittet vi titta på hur tootest hello lösning med hjälp av hello **kursen klienten** program som ingår i hello exempel.</span><span class="sxs-lookup"><span data-stu-id="c0604-251">In this topic, we look at how tootest hello solution by using hello **Tutorial Client** application provided as part of hello sample.</span></span>  

1. <span data-ttu-id="c0604-252">Tryck på F5 toostart hello i Visual Studio **kursen klienten**.</span><span class="sxs-lookup"><span data-stu-id="c0604-252">In Visual Studio, press F5 toostart hello **Tutorial Client**.</span></span>
2. <span data-ttu-id="c0604-253">hello-skärmen måste ha hello värden förinställd från hello steg där vi skapade hello Service Bus-köer.</span><span class="sxs-lookup"><span data-stu-id="c0604-253">hello screen must have hello values prepopulated from hello step where we created hello Service Bus queues.</span></span> <span data-ttu-id="c0604-254">Klicka på **Nästa**.</span><span class="sxs-lookup"><span data-stu-id="c0604-254">Click **Next**.</span></span>
3. <span data-ttu-id="c0604-255">Ange autentiseringsuppgifter för ACS för BizTalk-abonnemang och hello slutpunkter i hello nästa fönstret där EAI- och EDI (får) bryggor distribueras.</span><span class="sxs-lookup"><span data-stu-id="c0604-255">In hello next window, provide ACS credentials for BizTalk Services subscription, and hello endpoints where EAI and EDI (receive) bridges are deployed.</span></span>
   
   <span data-ttu-id="c0604-256">Du hade kopierade hello EAI bridge slutpunkt i hello föregående steg.</span><span class="sxs-lookup"><span data-stu-id="c0604-256">You had copied hello EAI bridge endpoint in hello previous step.</span></span> <span data-ttu-id="c0604-257">För EDI får bridge slutpunkt i hello BizTalk-Services-portalen kan gå toohello avtal > få Inställningar > Transport > slutpunkt.</span><span class="sxs-lookup"><span data-stu-id="c0604-257">For EDI receive bridge endpoint, in hello BizTalk Services Portal, go toohello agreement > Receive Settings > Transport > Endpoint.</span></span>
   
   ![][12]  
4. <span data-ttu-id="c0604-258">Hello nästa på i fönstret under Contoso, hello **skicka interna faktura** knappen.</span><span class="sxs-lookup"><span data-stu-id="c0604-258">In hello next window, under Contoso, click hello **Send In-house Invoice** button.</span></span> <span data-ttu-id="c0604-259">Öppna dialogrutan i hello fil, öppna hello INHOUSEINVOICE.txt filen.</span><span class="sxs-lookup"><span data-stu-id="c0604-259">In hello File open dialog box, open hello INHOUSEINVOICE.txt file.</span></span> <span data-ttu-id="c0604-260">Granska hello innehållet hello-filen och klicka sedan på **OK** toosend hello faktura.</span><span class="sxs-lookup"><span data-stu-id="c0604-260">Examine hello content of hello file and then click **OK** toosend hello invoice.</span></span>
   
   ![][13]  
5. <span data-ttu-id="c0604-261">Några få sekunder hello tas faktura emot på Northwind.</span><span class="sxs-lookup"><span data-stu-id="c0604-261">In a few seconds hello invoice is received at Northwind.</span></span> <span data-ttu-id="c0604-262">Klicka på hello **Visa meddelande** länk toosee hello faktura tas emot av Northwind.</span><span class="sxs-lookup"><span data-stu-id="c0604-262">Click hello **View Message** link toosee hello invoice received by Northwind.</span></span> <span data-ttu-id="c0604-263">Observera hur hello fakturan som tagits emot av Northwind finns i standard EDIFACT-schema när hello sändas av Contoso var ett interna schema.</span><span class="sxs-lookup"><span data-stu-id="c0604-263">Notice how hello invoice received by Northwind is in standard EDIFACT schema while hello one sent by Contoso was an in-house schema.</span></span>
   
   ![][14]  
6. <span data-ttu-id="c0604-264">Välj hello faktura och klicka sedan på **skicka bekräftelse**.</span><span class="sxs-lookup"><span data-stu-id="c0604-264">Select hello invoice and then click **Send Acknowledgement**.</span></span> <span data-ttu-id="c0604-265">Observera att hello interchange ID är samma i hello mottagna faktura och hello bekräftelse skickas hello dialogrutan som öppnas.</span><span class="sxs-lookup"><span data-stu-id="c0604-265">In hello dialog box that pops up, notice that hello interchange ID is same in hello received invoice and hello acknowledgement being sent.</span></span> <span data-ttu-id="c0604-266">Klicka på OK i hello **skicka bekräftelse** dialogrutan.</span><span class="sxs-lookup"><span data-stu-id="c0604-266">Click OK in hello **Send Acknowledgement** dialog box.</span></span>
   
   ![][15]  
7. <span data-ttu-id="c0604-267">Hello bekräftelse har tagits emot på Contoso inom några sekunder.</span><span class="sxs-lookup"><span data-stu-id="c0604-267">In a few seconds, hello acknowledgement is successfully received at Contoso.</span></span>
   
   ![][16]  

## <a name="step-5-optional-send-edifact-invoice-in-batches"></a><span data-ttu-id="c0604-268">Steg 5 (valfritt): skicka EDIFACT faktura i batchar</span><span class="sxs-lookup"><span data-stu-id="c0604-268">Step 5 (optional): Send EDIFACT invoice in batches</span></span>
<span data-ttu-id="c0604-269">BizTalk-tjänster EDI bryggor stöder också massbearbetning av utgående meddelanden.</span><span class="sxs-lookup"><span data-stu-id="c0604-269">BizTalk Services EDI bridges also supports batching of outgoing messages.</span></span> <span data-ttu-id="c0604-270">Den här funktionen är användbart för att ta emot partners som föredrar tooreceive en grupp med meddelanden (uppfyller vissa villkor) i stället för enskilda meddelanden.</span><span class="sxs-lookup"><span data-stu-id="c0604-270">This feature is useful for receiving partners that prefer tooreceive a batch of messages (meeting certain criterion) instead of individual messages.</span></span>

<span data-ttu-id="c0604-271">hello viktigaste aspekt när du arbetar med batchar är hello faktiska versionen av hello batch, kallas även hello versionen kriterier.</span><span class="sxs-lookup"><span data-stu-id="c0604-271">hello most important aspect when working with batches is hello actual release of hello batch, also called hello release criteria.</span></span> <span data-ttu-id="c0604-272">hello versionen villkor kan baseras på hur hello mottagande partnern vill tooreceive meddelanden.</span><span class="sxs-lookup"><span data-stu-id="c0604-272">hello release criteria can be based on how hello receiving partner wants tooreceive messages.</span></span> <span data-ttu-id="c0604-273">Om batchbearbetning är aktiverad, skickar inte hello EDI bridge hello utgående meddelande toohello får partner tills hello versionen villkor är uppfyllt.</span><span class="sxs-lookup"><span data-stu-id="c0604-273">If batching is enabled, hello EDI bridge does not send hello outgoing message toohello receiving partner until hello release criteria is fulfilled.</span></span> <span data-ttu-id="c0604-274">Till exempel batching villkor baserat på meddelandet storlek levererar en batch endast när n meddelanden grupperas.</span><span class="sxs-lookup"><span data-stu-id="c0604-274">For example, a batching criteria based on message size dispatches a batch only when ‘n’ messages are batched.</span></span> <span data-ttu-id="c0604-275">Ett batch-villkor kan också vara tidsbaserade, så att en batch skickas med en viss tid varje dag.</span><span class="sxs-lookup"><span data-stu-id="c0604-275">A batch criteria can also be time-based, such that a batch is sent at a fixed time every day.</span></span> <span data-ttu-id="c0604-276">I den här lösningen försök vi hello meddelandestorlek baserade villkor.</span><span class="sxs-lookup"><span data-stu-id="c0604-276">In this solution, we try hello message-size based criteria.</span></span>

1. <span data-ttu-id="c0604-277">Klicka på hello avtal som du skapade tidigare i hello BizTalk-Services-portalen.</span><span class="sxs-lookup"><span data-stu-id="c0604-277">In hello BizTalk Services Portal, click hello agreement you created earlier.</span></span> <span data-ttu-id="c0604-278">Klicka på Skicka Inställningar > batchbearbetning > Lägg till Batch.</span><span class="sxs-lookup"><span data-stu-id="c0604-278">Click Send Settings > Batching > Add Batch.</span></span>
2. <span data-ttu-id="c0604-279">Batch-namn, ange **InvoiceBatch**, ange en beskrivning och klicka sedan på **nästa**.</span><span class="sxs-lookup"><span data-stu-id="c0604-279">For batch name, enter **InvoiceBatch**, provide a description, and then click **Next**.</span></span>
3. <span data-ttu-id="c0604-280">Ange ett batch-villkor som definierar vilka meddelanden måste vara batchar.</span><span class="sxs-lookup"><span data-stu-id="c0604-280">Specify a batch criteria, that defines which messages must be batched.</span></span> <span data-ttu-id="c0604-281">I den här lösningen batch vi alla meddelanden.</span><span class="sxs-lookup"><span data-stu-id="c0604-281">In this solution, we batch all messages.</span></span> <span data-ttu-id="c0604-282">Så, Välj hello använda avancerade alternativ för definitioner och ange **1 = 1**.</span><span class="sxs-lookup"><span data-stu-id="c0604-282">So, select hello Use advanced definitions option, and enter **1 = 1**.</span></span> <span data-ttu-id="c0604-283">Detta är ett villkor som alltid är true och därför alla meddelanden som ska grupperas.</span><span class="sxs-lookup"><span data-stu-id="c0604-283">This is a condition which will always be true, and hence all messages will be batched.</span></span> <span data-ttu-id="c0604-284">Klicka på **Nästa**.</span><span class="sxs-lookup"><span data-stu-id="c0604-284">Click **Next**.</span></span>
   
   ![][17]  
4. <span data-ttu-id="c0604-285">Ange ett villkor för batch-versionen.</span><span class="sxs-lookup"><span data-stu-id="c0604-285">Specify a batch release criteria.</span></span> <span data-ttu-id="c0604-286">Hello listrutan, Välj **MessageCountBased**, och för **antal**, ange **3**.</span><span class="sxs-lookup"><span data-stu-id="c0604-286">From hello drop-box, select **MessageCountBased**, and for **Count**, specify **3**.</span></span> <span data-ttu-id="c0604-287">Det innebär att en grupp med tre meddelanden ska skickas tooNorthwind.</span><span class="sxs-lookup"><span data-stu-id="c0604-287">This means that a batch of three messages will be sent tooNorthwind.</span></span> <span data-ttu-id="c0604-288">Klicka på **Nästa**.</span><span class="sxs-lookup"><span data-stu-id="c0604-288">Click **Next**.</span></span>
   
   ![][18]  
5. <span data-ttu-id="c0604-289">Granska hello sammanfattning och klicka sedan på **spara**.</span><span class="sxs-lookup"><span data-stu-id="c0604-289">Review hello summary and then click **Save**.</span></span> <span data-ttu-id="c0604-290">Klicka på **distribuera** tooredeploy hello avtal.</span><span class="sxs-lookup"><span data-stu-id="c0604-290">Click **Deploy** tooredeploy hello agreement.</span></span>
6. <span data-ttu-id="c0604-291">Gå tillbaka toohello **kursen klienten**, klickar du på **skicka interna faktura**, och följ hello prompter toosend hello faktura.</span><span class="sxs-lookup"><span data-stu-id="c0604-291">Go back toohello **Tutorial Client**, click **Send In-house Invoice**, and follow hello prompts toosend hello invoice.</span></span> <span data-ttu-id="c0604-292">Du ser att någon faktura tas emot på Northwind eftersom hello batchstorlek inte är uppfyllt.</span><span class="sxs-lookup"><span data-stu-id="c0604-292">You will notice that no invoice is received at Northwind because hello batch size is not met.</span></span> <span data-ttu-id="c0604-293">Upprepa detta två gånger, så att du har tre faktura meddelanden som skickas tooNorthwind.</span><span class="sxs-lookup"><span data-stu-id="c0604-293">Repeat this step two more times, so that you have three invoice messages sent tooNorthwind.</span></span> <span data-ttu-id="c0604-294">Det här uppfyller hello batch release villkor 3 meddelanden och du bör nu se en faktura på Northwind.</span><span class="sxs-lookup"><span data-stu-id="c0604-294">This satisfies hello batch release criteria of 3 messages and you should now see an invoice at Northwind.</span></span>

<!--Image references-->
[1]: ./media/biztalk-process-edifact-invoice/process-edifact-invoices-with-auzure-bts-1.PNG  
[2]: ./media/biztalk-process-edifact-invoice/process-edifact-invoices-with-auzure-bts-2.PNG  
[3]: ./media/biztalk-process-edifact-invoice/process-edifact-invoices-with-auzure-bts-3.PNG
[4]: ./media/biztalk-process-edifact-invoice/process-edifact-invoices-with-auzure-bts-4.PNG  
[5]: ./media/biztalk-process-edifact-invoice/process-edifact-invoices-with-auzure-bts-5.PNG  
[6]: ./media/biztalk-process-edifact-invoice/process-edifact-invoices-with-auzure-bts-6.PNG  
[7]: ./media/biztalk-process-edifact-invoice/process-edifact-invoices-with-auzure-bts-7.PNG  
[8]: ./media/biztalk-process-edifact-invoice/process-edifact-invoices-with-auzure-bts-8.PNG
[9]: ./media/biztalk-process-edifact-invoice/process-edifact-invoices-with-auzure-bts-9.PNG  
[10]: ./media/biztalk-process-edifact-invoice/process-edifact-invoices-with-auzure-bts-10.PNG  
[11]: ./media/biztalk-process-edifact-invoice/process-edifact-invoices-with-auzure-bts-11.PNG  
[12]: ./media/biztalk-process-edifact-invoice/process-edifact-invoices-with-auzure-bts-12.PNG  
[13]: ./media/biztalk-process-edifact-invoice/process-edifact-invoices-with-auzure-bts-13.PNG
[14]: ./media/biztalk-process-edifact-invoice/process-edifact-invoices-with-auzure-bts-14.PNG  
[15]: ./media/biztalk-process-edifact-invoice/process-edifact-invoices-with-auzure-bts-15.PNG  
[16]: ./media/biztalk-process-edifact-invoice/process-edifact-invoices-with-auzure-bts-16.PNG  
[17]: ./media/biztalk-process-edifact-invoice/process-edifact-invoices-with-auzure-bts-17.PNG  
[18]: ./media/biztalk-process-edifact-invoice/process-edifact-invoices-with-auzure-bts-18.PNG


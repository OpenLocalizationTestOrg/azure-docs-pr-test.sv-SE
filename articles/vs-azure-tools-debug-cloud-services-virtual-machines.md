---
title: aaaDebugging en Azure cloud service eller en virtuell dator i Visual Studio | Microsoft Docs
description: "Felsökning av en molnbaserad tjänst eller en virtuell dator i Visual Studio"
services: visual-studio-online
documentationcenter: na
author: kraigb
manager: ghogen
editor: 
ms.assetid: 945e06e0-2100-41af-b218-72347367ddab
ms.service: visual-studio-online
ms.devlang: multiple
ms.topic: article
ms.tgt_pltfrm: multiple
ms.workload: na
ms.date: 11/11/2016
ms.author: kraigb
ms.openlocfilehash: 32a326430021ba2ea9317a6a71fa005d4b87c273
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: sv-SE
ms.lasthandoff: 10/06/2017
---
# <a name="debugging-an-azure-cloud-service-or-virtual-machine-in-visual-studio"></a><span data-ttu-id="21f26-103">Felsökning av en Azure-molntjänst eller en virtuell dator i Visual Studio</span><span class="sxs-lookup"><span data-stu-id="21f26-103">Debugging an Azure cloud service or virtual machine in Visual Studio</span></span>
<span data-ttu-id="21f26-104">Visual Studio finns olika alternativ för felsökning av Azure-molntjänster och virtuella datorer.</span><span class="sxs-lookup"><span data-stu-id="21f26-104">Visual Studio gives you different options for debugging Azure cloud services and virtual machines.</span></span>

## <a name="debug-your-cloud-service-on-your-local-computer"></a><span data-ttu-id="21f26-105">Felsöka din molntjänst på den lokala datorn</span><span class="sxs-lookup"><span data-stu-id="21f26-105">Debug your cloud service on your local computer</span></span>
<span data-ttu-id="21f26-106">Du kan spara tid och pengar med hello Azure compute emulator toodebug Molntjänsten på en lokal dator.</span><span class="sxs-lookup"><span data-stu-id="21f26-106">You can save time and money by using hello Azure compute emulator toodebug your cloud service on a local machine.</span></span> <span data-ttu-id="21f26-107">Du kan felsöka en tjänst lokalt innan du distribuerar det för att förbättra pålitligheten och prestandan utan att betala för beräkning tid.</span><span class="sxs-lookup"><span data-stu-id="21f26-107">By debugging a service locally before you deploy it, you can improve reliability and performance without paying for compute time.</span></span> <span data-ttu-id="21f26-108">Men vissa kan det uppstå fel bara när du kör en molnbaserad tjänst i Azure sig själv.</span><span class="sxs-lookup"><span data-stu-id="21f26-108">However, some errors might occur only when you run a cloud service in Azure itself.</span></span> <span data-ttu-id="21f26-109">Du kan felsöka dessa fel om du aktiverar fjärrfelsökning när du publicerar din tjänst och sedan koppla hello felsökare tooa rollinstans.</span><span class="sxs-lookup"><span data-stu-id="21f26-109">You can debug these errors if you enable remote debugging when you publish your service and then attach hello debugger tooa role instance.</span></span>

<span data-ttu-id="21f26-110">hello-emulatorn simulerar hello Azure Compute-tjänsten och körs i din lokala miljö så att du kan testa och felsöka din molntjänst innan du distribuerar den.</span><span class="sxs-lookup"><span data-stu-id="21f26-110">hello emulator simulates hello Azure Compute service and runs in your local environment so that you can test and debug your cloud service before you deploy it.</span></span> <span data-ttu-id="21f26-111">hello-emulatorn hanterar hello livscykeln för dina rollinstanser och ger åtkomst toosimulated resurser, till exempel lokal lagring.</span><span class="sxs-lookup"><span data-stu-id="21f26-111">hello emulator handles hello lifecycle of your role instances and provides access toosimulated resources, such as local storage.</span></span> <span data-ttu-id="21f26-112">När du felsöker eller köra tjänsten från Visual Studio startar automatiskt hello emulatorn som ett program i bakgrunden och distribuerar din tjänst toohello emulatorn.</span><span class="sxs-lookup"><span data-stu-id="21f26-112">When you debug or run your service from Visual Studio, it automatically starts hello emulator as a background application and then deploys your service toohello emulator.</span></span> <span data-ttu-id="21f26-113">Du kan använda hello emulatorn tooview tjänsten när den körs i hello lokal miljö.</span><span class="sxs-lookup"><span data-stu-id="21f26-113">You can use hello emulator tooview your service when it runs in hello local environment.</span></span> <span data-ttu-id="21f26-114">Du kan köra hello fullständig version eller hello hello-emulatorns uttrycklig version.</span><span class="sxs-lookup"><span data-stu-id="21f26-114">You can run hello full version or hello express version of hello emulator.</span></span> <span data-ttu-id="21f26-115">(Från och med Azure 2.3 hello hello-emulatorns uttrycklig version är hello standard). Se [med emulatorn Express tooRun och felsöka en Cloud Service lokalt](https://msdn.microsoft.com/library/dn339018.aspx).</span><span class="sxs-lookup"><span data-stu-id="21f26-115">(Starting with Azure 2.3, hello express version of hello emulator is hello default.) See [Using Emulator Express tooRun and Debug a Cloud Service Locally](https://msdn.microsoft.com/library/dn339018.aspx).</span></span>

### <a name="toodebug-your-cloud-service-on-your-local-computer"></a><span data-ttu-id="21f26-116">toodebug ditt moln-tjänst på den lokala datorn</span><span class="sxs-lookup"><span data-stu-id="21f26-116">toodebug your cloud service on your local computer</span></span>
1. <span data-ttu-id="21f26-117">På menyraden hello väljer **felsöka**, **Start Debugging** toorun ditt Azure cloud service-projekt.</span><span class="sxs-lookup"><span data-stu-id="21f26-117">On hello menu bar, choose **Debug**, **Start Debugging** toorun your Azure cloud service project.</span></span> <span data-ttu-id="21f26-118">Alternativt kan du trycka på F5.</span><span class="sxs-lookup"><span data-stu-id="21f26-118">As an alternative, you can press F5.</span></span> <span data-ttu-id="21f26-119">Du ser ett meddelande som hello Compute Emulator startas.</span><span class="sxs-lookup"><span data-stu-id="21f26-119">You’ll see a message that hello Compute Emulator is starting.</span></span> <span data-ttu-id="21f26-120">När hello emulatorn startar bekräftar den hello ikonen i systemfältet.</span><span class="sxs-lookup"><span data-stu-id="21f26-120">When hello emulator starts, hello system tray icon confirms it.</span></span>

    ![Azure-emulatorn i hello systemfältet](./media/vs-azure-tools-debug-cloud-services-virtual-machines/IC783828.png)
2. <span data-ttu-id="21f26-122">Visa hello användargränssnitt för hello beräkningsemulatorn genom att öppna hello snabbmenyn för hello Azure ikon i meddelandefältet hello och välj sedan **visa Compute Emulator UI**.</span><span class="sxs-lookup"><span data-stu-id="21f26-122">Display hello user interface for hello compute emulator by opening hello shortcut menu for hello Azure icon in hello notification area, and then select **Show Compute Emulator UI**.</span></span>

    <span data-ttu-id="21f26-123">hello till vänster i hello Användargränssnittet visar hello-tjänster som för närvarande är distribuerat toohello compute emulator och hello rollinstanser som varje tjänst körs.</span><span class="sxs-lookup"><span data-stu-id="21f26-123">hello left pane of hello UI shows hello services that are currently deployed toohello compute emulator and hello role instances that each service is running.</span></span> <span data-ttu-id="21f26-124">Du kan välja hello service eller roller toodisplay livscykel, loggning och diagnostisk information i hello till höger.</span><span class="sxs-lookup"><span data-stu-id="21f26-124">You can choose hello service or roles toodisplay lifecycle, logging, and diagnostic information in hello right pane.</span></span> <span data-ttu-id="21f26-125">Om du placerar hello fokus i hello den övre marginalen i en inkluderad fönstret expanderar toofill hello högra rutan.</span><span class="sxs-lookup"><span data-stu-id="21f26-125">If you put hello focus in hello top margin of an included window, it expands toofill hello right pane.</span></span>
3. <span data-ttu-id="21f26-126">Stega igenom hello program genom att välja kommandon på hello **felsöka** -menyn och ange brytpunkter i koden.</span><span class="sxs-lookup"><span data-stu-id="21f26-126">Step through hello application by selecting commands on hello **Debug** menu and setting breakpoints in your code.</span></span> <span data-ttu-id="21f26-127">Eftersom du gå igenom hello programmet hello felsökning uppdateras hello fönster med hello aktuell status för programmet hello.</span><span class="sxs-lookup"><span data-stu-id="21f26-127">As you step through hello application in hello debugger, hello panes are updated with hello current status of hello application.</span></span> <span data-ttu-id="21f26-128">När du stoppar felsökning tas hello programdistribution bort.</span><span class="sxs-lookup"><span data-stu-id="21f26-128">When you stop debugging, hello application deployment is deleted.</span></span> <span data-ttu-id="21f26-129">Om ditt program innehåller en webbroll och du har ställt in hello startade åtgärden egenskapen toostart hello webbläsare, startar Visual Studio ditt webbprogram i hello webbläsare.</span><span class="sxs-lookup"><span data-stu-id="21f26-129">If your application includes a web role and you've set hello Startup action property toostart hello web browser, Visual Studio starts your web application in hello browser.</span></span> <span data-ttu-id="21f26-130">Om du ändrar hello antal instanser av en roll i hello tjänstekonfigurationen måste du stoppa Molntjänsten och sedan starta om felsökningen om så att du kan felsöka de här nya instanser av hello rollen.</span><span class="sxs-lookup"><span data-stu-id="21f26-130">If you change hello number of instances of a role in hello service configuration, you must stop your cloud service and then restart debugging so that you can debug these new instances of hello role.</span></span>

    <span data-ttu-id="21f26-131">**Obs:** när du stoppas eller felsökning din tjänst hello lokala beräkningsemulatorn och storage-emulatorn inte stoppas.</span><span class="sxs-lookup"><span data-stu-id="21f26-131">**Note:** When you stop running or debugging your service, hello local compute emulator and storage emulator aren't stopped.</span></span> <span data-ttu-id="21f26-132">Du måste stoppa dem uttryckligen från hello meddelandefältet.</span><span class="sxs-lookup"><span data-stu-id="21f26-132">You must stop them explicitly from hello notification area.</span></span>

## <a name="debug-a-cloud-service-in-azure"></a><span data-ttu-id="21f26-133">Felsöka en molnbaserad tjänst i Azure</span><span class="sxs-lookup"><span data-stu-id="21f26-133">Debug a cloud service in Azure</span></span>
<span data-ttu-id="21f26-134">toodebug en molnbaserad tjänst från en fjärrdator, måste du aktivera funktionen explicit när du distribuerar din molntjänst så att nödvändiga tjänster (till exempel msvsmon.exe) är installerade på hello virtuella datorer som kör rollinstanser av.</span><span class="sxs-lookup"><span data-stu-id="21f26-134">toodebug a cloud service from a remote machine, you must enable that functionality explicitly when you deploy your cloud service so that required services (msvsmon.exe, for example) are installed on hello virtual machines that run your role instances.</span></span> <span data-ttu-id="21f26-135">Om du inte aktiverar fjärrfelsökning när du publicerade hello service kan har du toorepublish hello med fjärrfelsökning aktiverad.</span><span class="sxs-lookup"><span data-stu-id="21f26-135">If you didn't enable remote debugging when you published hello service, you have toorepublish hello service with remote debugging enabled.</span></span>

<span data-ttu-id="21f26-136">Om du aktiverar fjärrfelsökning för en tjänst i molnet, inte den minskad prestanda eller ytterligare avgifter.</span><span class="sxs-lookup"><span data-stu-id="21f26-136">If you enable remote debugging for a cloud service, it doesn't exhibit degraded performance or incur additional charges.</span></span> <span data-ttu-id="21f26-137">Du bör inte använda fjärrfelsökning för en tjänst för produktion, eftersom klienter som använder tjänsten hello kan påverkas negativt.</span><span class="sxs-lookup"><span data-stu-id="21f26-137">You shouldn't use remote debugging on a production service, because clients who use hello service might be adversely affected.</span></span>

> [!NOTE]
> <span data-ttu-id="21f26-138">När du publicerar en molnbaserad tjänst från Visual Studio kan du aktivera **IntelliTrace** för alla roller som tjänst som mål hello .NET Framework 4 eller hello .NET Framework 4.5.</span><span class="sxs-lookup"><span data-stu-id="21f26-138">When you publish a cloud service from Visual Studio, you can enable **IntelliTrace** for any roles in that service that target hello .NET Framework 4 or hello .NET Framework 4.5.</span></span> <span data-ttu-id="21f26-139">Med hjälp av **IntelliTrace**, kan du granska händelser som inträffade i en rollinstans av i hello senaste och återskapa hello kontext än den tiden.</span><span class="sxs-lookup"><span data-stu-id="21f26-139">By using **IntelliTrace**, you can examine events that occurred in a role instance in hello past and reproduce hello context from that time.</span></span> <span data-ttu-id="21f26-140">Se [felsökning en publicerade molntjänst med IntelliTrace och Visual Studio](http://go.microsoft.com/fwlink/?LinkID=623016) och [med IntelliTrace](https://msdn.microsoft.com/library/dd264915.aspx).</span><span class="sxs-lookup"><span data-stu-id="21f26-140">See [Debugging a published cloud service with IntelliTrace and Visual Studio](http://go.microsoft.com/fwlink/?LinkID=623016) and [Using IntelliTrace](https://msdn.microsoft.com/library/dd264915.aspx).</span></span>
>
>

### <a name="tooenable-remote-debugging-for-a-cloud-service"></a><span data-ttu-id="21f26-141">tooenable felsökning för en tjänst i molnet</span><span class="sxs-lookup"><span data-stu-id="21f26-141">tooenable remote debugging for a cloud service</span></span>
1. <span data-ttu-id="21f26-142">Öppna hello snabbmenyn för hello Azure-projekt och välj sedan **publicera**.</span><span class="sxs-lookup"><span data-stu-id="21f26-142">Open hello shortcut menu for hello Azure project, and then select **Publish**.</span></span>
2. <span data-ttu-id="21f26-143">Välj hello **mellanlagring** miljö och hello **felsöka** konfiguration.</span><span class="sxs-lookup"><span data-stu-id="21f26-143">Select hello **Staging** environment and hello **Debug** configuration.</span></span>

    <span data-ttu-id="21f26-144">Detta är endast en rekommendation.</span><span class="sxs-lookup"><span data-stu-id="21f26-144">This is only a guideline.</span></span> <span data-ttu-id="21f26-145">Du kan välja toorun din testmiljöer i en produktionsmiljö.</span><span class="sxs-lookup"><span data-stu-id="21f26-145">You can opt toorun your test environments in a Production environment.</span></span> <span data-ttu-id="21f26-146">Men kan du påverkas negativt användare om du aktiverar fjärrfelsökning i hello-produktionsmiljö.</span><span class="sxs-lookup"><span data-stu-id="21f26-146">However, you may adversely affect users if you enable remote debugging on hello Production environment.</span></span> <span data-ttu-id="21f26-147">Du kan välja hello versionen konfiguration, men hello Debug konfigurationen gör felsökning.</span><span class="sxs-lookup"><span data-stu-id="21f26-147">You can choose hello Release configuration, but hello Debug configuration makes debugging easier.</span></span>

    ![Välj hello Debug-konfiguration](./media/vs-azure-tools-debug-cloud-services-virtual-machines/IC746717.gif)
3. <span data-ttu-id="21f26-149">Gör hello vanligt, men väljer hello **aktivera fjärråtkomst felsökare för alla roller** kryssrutan på hello **avancerade inställningar** fliken.</span><span class="sxs-lookup"><span data-stu-id="21f26-149">Follow hello usual steps, but select hello **Enable Remote Debugger for all roles** check box on hello **Advanced Settings** tab.</span></span>

    ![Felsöka konfiguration](./media/vs-azure-tools-debug-cloud-services-virtual-machines/IC746718.gif)

### <a name="tooattach-hello-debugger-tooa-cloud-service-in-azure"></a><span data-ttu-id="21f26-151">Molntjänsten för tooattach hello felsökare tooa i Azure</span><span class="sxs-lookup"><span data-stu-id="21f26-151">tooattach hello debugger tooa cloud service in Azure</span></span>
1. <span data-ttu-id="21f26-152">I Server Explorer expanderar du hello noden för Molntjänsten.</span><span class="sxs-lookup"><span data-stu-id="21f26-152">In Server Explorer, expand hello node for your cloud service.</span></span>
2. <span data-ttu-id="21f26-153">Öppna hello snabbmenyn för hello roll eller rollen instans toowhich du vill tooattach och välj sedan **koppla felsökare**.</span><span class="sxs-lookup"><span data-stu-id="21f26-153">Open hello shortcut menu for hello role or role instance toowhich you want tooattach, and then select **Attach Debugger**.</span></span>

    <span data-ttu-id="21f26-154">Om du felsöka en roll bifogar hello Visual Studio-felsökaren tooeach instans av rollen.</span><span class="sxs-lookup"><span data-stu-id="21f26-154">If you debug a role, hello Visual Studio debugger attaches tooeach instance of that role.</span></span> <span data-ttu-id="21f26-155">hello felsökare bryts på en brytpunkt för hello första rollinstansen som kör den kodraden och uppfyller eventuella villkor för att brytpunkt.</span><span class="sxs-lookup"><span data-stu-id="21f26-155">hello debugger will break on a breakpoint for hello first role instance that runs that line of code and meets any conditions of that breakpoint.</span></span> <span data-ttu-id="21f26-156">Om du felsöka en instans bifogar hello felsökare tooonly instansen och sidbrytningar på en brytpunkt när den specifika instansen körs den kodraden och uppfyller hello brytpunkts villkor.</span><span class="sxs-lookup"><span data-stu-id="21f26-156">If you debug an instance, hello debugger attaches tooonly that instance and breaks on a breakpoint only when that specific instance runs that line of code and meets hello breakpoint's conditions.</span></span>

    ![Koppla felsökare](./media/vs-azure-tools-debug-cloud-services-virtual-machines/IC746719.gif)
3. <span data-ttu-id="21f26-158">När hello felsökare bifogar tooan instans, felsöka som vanligt.</span><span class="sxs-lookup"><span data-stu-id="21f26-158">After hello debugger attaches tooan instance, debug as usual.</span></span> <span data-ttu-id="21f26-159">hello felsökare bifogar automatiskt toohello lämplig värdprocess för din roll.</span><span class="sxs-lookup"><span data-stu-id="21f26-159">hello debugger automatically attaches toohello appropriate host process for your role.</span></span> <span data-ttu-id="21f26-160">Beroende på vilka hello roll är hello felsökare bifogar toow3wp.exe, WaWorkerHost.exe eller WaIISHost.exe.</span><span class="sxs-lookup"><span data-stu-id="21f26-160">Depending on what hello role is, hello debugger attaches toow3wp.exe, WaWorkerHost.exe, or WaIISHost.exe.</span></span> <span data-ttu-id="21f26-161">tooverify hello processen toowhich hello felsökare, expandera noden för hello-instans i Server Explorer.</span><span class="sxs-lookup"><span data-stu-id="21f26-161">tooverify hello process toowhich hello debugger is attached, expand hello instance node in Server Explorer.</span></span> <span data-ttu-id="21f26-162">Se [Azure rollen arkitektur](http://blogs.msdn.com/b/kwill/archive/2011/05/05/windows-azure-role-architecture.aspx) mer information om Azure processer.</span><span class="sxs-lookup"><span data-stu-id="21f26-162">See [Azure Role Architecture](http://blogs.msdn.com/b/kwill/archive/2011/05/05/windows-azure-role-architecture.aspx) for more information about Azure processes.</span></span>

    ![Välj typ i dialogrutan kod](./media/vs-azure-tools-debug-cloud-services-virtual-machines/IC718346.png)
4. <span data-ttu-id="21f26-164">tooidentify hello processer toowhich hello felsökare, dialogrutan hello processer, på hello menyraden, välja Debug, Windows, processer.</span><span class="sxs-lookup"><span data-stu-id="21f26-164">tooidentify hello processes toowhich hello debugger is attached, open hello Processes dialog box by, on hello menu bar, choosing Debug, Windows, Processes.</span></span> <span data-ttu-id="21f26-165">(Tangentbord: Ctrl + Alt + Z) toodetach en specifik process, öppna dess snabbmenyn och välj sedan **koppla från processen**.</span><span class="sxs-lookup"><span data-stu-id="21f26-165">(Keyboard: Ctrl+Alt+Z)toodetach a specific process, open its shortcut menu, and then select **Detach Process**.</span></span> <span data-ttu-id="21f26-166">Eller, hitta hello instans nod i Server Explorer, hitta hello process, öppna dess snabbmenyn och välj sedan **koppla från processen**.</span><span class="sxs-lookup"><span data-stu-id="21f26-166">Or, locate hello instance node in Server Explorer, find hello process, open its shortcut menu, and then select **Detach Process**.</span></span>

    ![Felsöka processer](./media/vs-azure-tools-debug-cloud-services-virtual-machines/IC690787.gif)

> [!WARNING]
> <span data-ttu-id="21f26-168">Undvika lång stopp vid brytpunkter när remote felsökning.</span><span class="sxs-lookup"><span data-stu-id="21f26-168">Avoid long stops at breakpoints when remote debugging.</span></span> <span data-ttu-id="21f26-169">Azure behandlar en process som har stoppats för längre än några minuter som inte svarar och slutar att skicka trafik toothat instans.</span><span class="sxs-lookup"><span data-stu-id="21f26-169">Azure treats a process that's stopped for longer than a few minutes as unresponsive and stops sending traffic toothat instance.</span></span> <span data-ttu-id="21f26-170">Om du stoppar för länge lossa msvsmon.exe från hello-processen.</span><span class="sxs-lookup"><span data-stu-id="21f26-170">If you stop for too long, msvsmon.exe detaches from hello process.</span></span>
>
>

<span data-ttu-id="21f26-171">toodetach hello felsökare från alla processer i din instans eller roll, öppna hello snabbmenyn för hello roll eller instans som du felsöker och välj sedan **frånkoppling felsökare**.</span><span class="sxs-lookup"><span data-stu-id="21f26-171">toodetach hello debugger from all processes in your instance or role, open hello shortcut menu for hello role or instance that you're debugging, and then select **Detach Debugger**.</span></span>

## <a name="limitations-of-remote-debugging-in-azure"></a><span data-ttu-id="21f26-172">Begränsningar för fjärrfelsökning i Azure</span><span class="sxs-lookup"><span data-stu-id="21f26-172">Limitations of remote debugging in Azure</span></span>
<span data-ttu-id="21f26-173">Från Azure SDK 2.3 har fjärrfelsökning hello följande begränsningar.</span><span class="sxs-lookup"><span data-stu-id="21f26-173">From Azure SDK 2.3, remote debugging has hello following limitations.</span></span>

* <span data-ttu-id="21f26-174">Med fjärrfelsökning aktiverad, kan du publicera en molnbaserad tjänst där någon roll har mer än 25 instanser.</span><span class="sxs-lookup"><span data-stu-id="21f26-174">With remote debugging enabled, you can't publish a cloud service in which any role has more than 25 instances.</span></span>
* <span data-ttu-id="21f26-175">hello felsökare använder portar 30400 too30424, 31400 too31424 och 32400 too32424.</span><span class="sxs-lookup"><span data-stu-id="21f26-175">hello debugger uses ports 30400 too30424, 31400 too31424 and 32400 too32424.</span></span> <span data-ttu-id="21f26-176">Om du försöker toouse någon av dessa portar kan du inte kan toopublish din tjänst och en av följande felmeddelanden hello visas i hello aktivitetsloggen för Azure:</span><span class="sxs-lookup"><span data-stu-id="21f26-176">If you try toouse any of these ports, you won't be able toopublish your service, and one of hello following error messages will appear in hello activity log for Azure:</span></span>

  * <span data-ttu-id="21f26-177">Det gick inte att verifiera hello .cscfg-filen mot hello .csdef-filen.</span><span class="sxs-lookup"><span data-stu-id="21f26-177">Error validating hello .cscfg file against hello .csdef file.</span></span>
    <span data-ttu-id="21f26-178">hello reserverade portintervall 'område' för slutpunkten Microsoft.WindowsAzure.Plugins.RemoteDebugger.Connector av rollen rollen överlappar ett redan definierad port eller ett intervall.</span><span class="sxs-lookup"><span data-stu-id="21f26-178">hello reserved port range 'range' for endpoint Microsoft.WindowsAzure.Plugins.RemoteDebugger.Connector of role 'role' overlaps with an already defined port or range.</span></span>
  * <span data-ttu-id="21f26-179">Det gick inte att allokera.</span><span class="sxs-lookup"><span data-stu-id="21f26-179">Allocation failed.</span></span> <span data-ttu-id="21f26-180">Försök igen senare, försök att minska hello VM-storlek eller antalet rollinstanser, eller försök att distribuera tooa annan region.</span><span class="sxs-lookup"><span data-stu-id="21f26-180">Please retry later, try reducing hello VM size or number of role instances, or try deploying tooa different region.</span></span>

## <a name="debugging-azure-virtual-machines"></a><span data-ttu-id="21f26-181">Felsökning av virtuella Azure-datorer</span><span class="sxs-lookup"><span data-stu-id="21f26-181">Debugging Azure virtual machines</span></span>
<span data-ttu-id="21f26-182">Du kan felsöka program som körs på virtuella Azure-datorer med hjälp av Server Explorer i Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="21f26-182">You can debug programs that run on Azure virtual machines by using Server Explorer in Visual Studio.</span></span> <span data-ttu-id="21f26-183">När du aktiverar fjärrfelsökning i en virtuell Azure-dator, installerar Azure hello remote felsökning tillägg på hello virtuell dator.</span><span class="sxs-lookup"><span data-stu-id="21f26-183">When you enable remote debugging on an Azure virtual machine, Azure installs hello remote debugging extension on hello virtual machine.</span></span> <span data-ttu-id="21f26-184">Sedan kan du bifoga tooprocesses på hello virtuell dator och felsöka som vanligt.</span><span class="sxs-lookup"><span data-stu-id="21f26-184">Then, you can attach tooprocesses on hello virtual machine and debug as you normally would.</span></span>

> [!NOTE]
> <span data-ttu-id="21f26-185">Virtuella datorer som skapats via hello Azure resource manager-stacken kan felsökas via fjärranslutning med hjälp av Cloud Explorer i Visual Studio 2015.</span><span class="sxs-lookup"><span data-stu-id="21f26-185">Virtual machines created through hello Azure resource manager stack can be remotely debugged by using Cloud Explorer in Visual Studio 2015.</span></span> <span data-ttu-id="21f26-186">Mer information finns i [hantera Azure-resurser med Cloud Explorer](http://go.microsoft.com/fwlink/?LinkId=623031).</span><span class="sxs-lookup"><span data-stu-id="21f26-186">For more information, see [Managing Azure Resources with Cloud Explorer](http://go.microsoft.com/fwlink/?LinkId=623031).</span></span>
>
>

### <a name="toodebug-an-azure-virtual-machine"></a><span data-ttu-id="21f26-187">toodebug en virtuell Azure-dator</span><span class="sxs-lookup"><span data-stu-id="21f26-187">toodebug an Azure virtual machine</span></span>
1. <span data-ttu-id="21f26-188">I Server Explorer expanderar du hello nod för virtuella datorer och välj hello nod för hello virtuell dator som du vill toodebug.</span><span class="sxs-lookup"><span data-stu-id="21f26-188">In Server Explorer, expand hello Virtual Machines node and select hello node of hello virtual machine that you want toodebug.</span></span>
2. <span data-ttu-id="21f26-189">Öppna hello snabbmenyn och välj **aktivera felsökning**.</span><span class="sxs-lookup"><span data-stu-id="21f26-189">Open hello context menu and select **Enable Debugging**.</span></span> <span data-ttu-id="21f26-190">När du tillfrågas om du är säker på om du vill tooenable felsökning på hello virtuell dator, väljer **Ja**.</span><span class="sxs-lookup"><span data-stu-id="21f26-190">When asked if you're sure if you want tooenable debugging on hello virtual machine, select **Yes**.</span></span>

    <span data-ttu-id="21f26-191">Azure installerar hello remote felsökning tillägg på hello virtuella tooenable felsökning.</span><span class="sxs-lookup"><span data-stu-id="21f26-191">Azure installs hello remote debugging extension on hello virtual machine tooenable debugging.</span></span>

    ![Aktivera felsökning kommando för virtuell dator](./media/vs-azure-tools-debug-cloud-services-virtual-machines/IC746720.png)

    ![Azure-aktivitetsloggen](./media/vs-azure-tools-debug-cloud-services-virtual-machines/IC746721.png)
3. <span data-ttu-id="21f26-194">När hello remote felsökning tillägg har installerats, öppna snabbmenyn hello virtuella datorn och väljer **koppla felsökare...**</span><span class="sxs-lookup"><span data-stu-id="21f26-194">After hello remote debugging extension finishes installing, open hello virtual machine's context menu and select **Attach Debugger...**</span></span>

    <span data-ttu-id="21f26-195">Azure hämtar en lista över hello processer på hello virtuella datorn och visar dem hello bifoga tooProcess i dialogrutan.</span><span class="sxs-lookup"><span data-stu-id="21f26-195">Azure gets a list of hello processes on hello virtual machine and shows them in hello Attach tooProcess dialog box.</span></span>

    ![Koppla felsökare kommando](./media/vs-azure-tools-debug-cloud-services-virtual-machines/IC746722.png)
4. <span data-ttu-id="21f26-197">I hello **bifoga tooProcess** dialogrutan **Välj** toolimit hello resultatlistan tooshow endast hello typer kod som du vill toodebug.</span><span class="sxs-lookup"><span data-stu-id="21f26-197">In hello **Attach tooProcess** dialog box, select **Select** toolimit hello results list tooshow only hello types of code you want toodebug.</span></span> <span data-ttu-id="21f26-198">Du kan felsöka 32 - eller 64-bitars hanterad kod, maskinkod eller båda.</span><span class="sxs-lookup"><span data-stu-id="21f26-198">You can debug 32- or 64-bit managed code, native code, or both.</span></span>

    ![Välj typ i dialogrutan kod](./media/vs-azure-tools-debug-cloud-services-virtual-machines/IC718346.png)
5. <span data-ttu-id="21f26-200">Välj hello processer toodebug på hello virtuella datorn och sedan markera **bifoga**.</span><span class="sxs-lookup"><span data-stu-id="21f26-200">Select hello processes you want toodebug on hello virtual machine and then select **Attach**.</span></span> <span data-ttu-id="21f26-201">Du kan till exempel välja hello w3wp.exe-processen om du vill toodebug ett webbprogram på hello virtuella datorn.</span><span class="sxs-lookup"><span data-stu-id="21f26-201">For example, you might choose hello w3wp.exe process if you wanted toodebug a web app on hello virtual machine.</span></span> <span data-ttu-id="21f26-202">Se [felsöka en eller flera processer i Visual Studio](https://msdn.microsoft.com/library/jj919165.aspx) och [Azure rollen arkitektur](http://blogs.msdn.com/b/kwill/archive/2011/05/05/windows-azure-role-architecture.aspx) för mer information.</span><span class="sxs-lookup"><span data-stu-id="21f26-202">See [Debug One or More Processes in Visual Studio](https://msdn.microsoft.com/library/jj919165.aspx) and [Azure Role Architecture](http://blogs.msdn.com/b/kwill/archive/2011/05/05/windows-azure-role-architecture.aspx) for more information.</span></span>

## <a name="create-a-web-project-and-a-virtual-machine-for-debugging"></a><span data-ttu-id="21f26-203">Skapa ett webbprojekt och en virtuell dator för felsökning</span><span class="sxs-lookup"><span data-stu-id="21f26-203">Create a web project and a virtual machine for debugging</span></span>
<span data-ttu-id="21f26-204">Innan du publicerar ditt Azure-projekt kan det vara användbart tootest den i en innesluten miljö som har stöd för felsökning och testa scenarier och där du kan installera testning och övervaka program.</span><span class="sxs-lookup"><span data-stu-id="21f26-204">Before publishing your Azure project, you might find it useful tootest it in a contained environment that supports debugging and testing scenarios, and where you can install testing and monitoring programs.</span></span> <span data-ttu-id="21f26-205">Det här är ett sätt toodo tooremotely felsöka appen på en virtuell dator.</span><span class="sxs-lookup"><span data-stu-id="21f26-205">One way toodo this is tooremotely debug your app on a virtual machine.</span></span>

<span data-ttu-id="21f26-206">Visual Studio ASP.NET-projekt erbjuder en alternativet toocreate en praktisk virtuell dator som du kan använda för att testa appen.</span><span class="sxs-lookup"><span data-stu-id="21f26-206">Visual Studio ASP.NET projects offer an option toocreate a handy virtual machine that you can use for app testing.</span></span> <span data-ttu-id="21f26-207">hello virtuell dator innehåller vanligtvis behövs slutpunkter som PowerShell, fjärrskrivbord och WebDeploy.</span><span class="sxs-lookup"><span data-stu-id="21f26-207">hello virtual machine includes commonly-needed endpoints such as PowerShell, remote desktop, and WebDeploy.</span></span>

### <a name="toocreate-a-web-project-and-a-virtual-machine-for-debugging"></a><span data-ttu-id="21f26-208">toocreate ett webbprojekt och en virtuell dator för felsökning</span><span class="sxs-lookup"><span data-stu-id="21f26-208">toocreate a web project and a virtual machine for debugging</span></span>
1. <span data-ttu-id="21f26-209">Skapa ett nytt ASP.NET-webbprogram i Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="21f26-209">In Visual Studio, create a new ASP.NET Web Application.</span></span>
2. <span data-ttu-id="21f26-210">I hello nytt ASP.NET-projekt dialogruta i hello Azure avsnittet väljer du **virtuella** i listrutan hello..</span><span class="sxs-lookup"><span data-stu-id="21f26-210">In hello New ASP.NET Project dialog, in hello Azure section, choose **Virtual Machine** in hello dropdown list box.</span></span> <span data-ttu-id="21f26-211">Lämna hello **skapa fjärresurser** kryssrutan är markerad.</span><span class="sxs-lookup"><span data-stu-id="21f26-211">Leave hello **Create remote resources** check box selected.</span></span> <span data-ttu-id="21f26-212">Välj **OK** tooproceed.</span><span class="sxs-lookup"><span data-stu-id="21f26-212">Select **OK** tooproceed.</span></span>

    <span data-ttu-id="21f26-213">Hej **Skapa virtuell dator på Azure** dialogrutan visas.</span><span class="sxs-lookup"><span data-stu-id="21f26-213">hello **Create virtual machine on Azure** dialog box appears.</span></span>

    ![ASP.NET web project dialogrutan Skapa](./media/vs-azure-tools-debug-cloud-services-virtual-machines/IC746723.png)

    <span data-ttu-id="21f26-215">**Obs:** blir du ombedd toosign i tooyour Azure-konto om du inte redan är inloggad.</span><span class="sxs-lookup"><span data-stu-id="21f26-215">**Note:** You'll be asked toosign in tooyour Azure account if you're not already signed in.</span></span>

1. <span data-ttu-id="21f26-216">Välj hello olika inställningar för hello virtuella datorn och välj sedan **OK**.</span><span class="sxs-lookup"><span data-stu-id="21f26-216">Select hello various settings for hello virtual machine and then select **OK**.</span></span> <span data-ttu-id="21f26-217">Se [virtuella datorer](http://go.microsoft.com/fwlink/?LinkId=623033) för mer information.</span><span class="sxs-lookup"><span data-stu-id="21f26-217">See [Virtual Machines](http://go.microsoft.com/fwlink/?LinkId=623033) for more information.</span></span>

    <span data-ttu-id="21f26-218">hello namnet du anger för DNS-namn är hello hello virtuella datorns namn.</span><span class="sxs-lookup"><span data-stu-id="21f26-218">hello name you enter for DNS name will be hello name of hello virtual machine.</span></span>

    ![Skapa virtuell dator på Azure dialogrutan](./media/vs-azure-tools-debug-cloud-services-virtual-machines/IC746724.png)

    <span data-ttu-id="21f26-220">Azure skapar hello virtuell dator och sedan etablerar och konfigurerar hello slutpunkter, till exempel Remote Desktop- och webbdistribution</span><span class="sxs-lookup"><span data-stu-id="21f26-220">Azure creates hello virtual machine and then provisions and configures hello endpoints, such as Remote Desktop and Web Deploy</span></span>
2. <span data-ttu-id="21f26-221">Efter hello virtuell dator har konfigurerats helt, Välj hello virtuella datorns nod i Server Explorer.</span><span class="sxs-lookup"><span data-stu-id="21f26-221">After hello virtual machine is fully configured, select hello virtual machine’s node in Server Explorer.</span></span>
3. <span data-ttu-id="21f26-222">Öppna hello snabbmenyn och välj **aktivera felsökning**.</span><span class="sxs-lookup"><span data-stu-id="21f26-222">Open hello context menu and select **Enable Debugging**.</span></span> <span data-ttu-id="21f26-223">När du tillfrågas om du är säker på om du vill tooenable felsökning på hello virtuell dator, väljer **Ja**.</span><span class="sxs-lookup"><span data-stu-id="21f26-223">When asked if you're sure if you want tooenable debugging on hello virtual machine, select **Yes**.</span></span>

    <span data-ttu-id="21f26-224">Azure installerar hello felsökning tillägget toohello virtuella tooenable fjärrfelsökning.</span><span class="sxs-lookup"><span data-stu-id="21f26-224">Azure installs hello remote debugging extension toohello virtual machine tooenable debugging.</span></span>

    ![Aktivera felsökning kommando för virtuell dator](./media/vs-azure-tools-debug-cloud-services-virtual-machines/IC746720.png)

    ![Azure-aktivitetsloggen](./media/vs-azure-tools-debug-cloud-services-virtual-machines/IC746721.png)
4. <span data-ttu-id="21f26-227">Publicera dina projekt som beskrivs i [så här: distribuera en Web Project med ett klick i Visual Studio](https://msdn.microsoft.com/library/dd465337.aspx).</span><span class="sxs-lookup"><span data-stu-id="21f26-227">Publish your project as outlined in [How to: Deploy a Web Project Using One-Click Publish in Visual Studio](https://msdn.microsoft.com/library/dd465337.aspx).</span></span> <span data-ttu-id="21f26-228">Eftersom du vill toodebug hello virtuella datorn på hello **inställningar** sidan hello **Publicera webbplats** väljer **felsöka** som hello konfiguration.</span><span class="sxs-lookup"><span data-stu-id="21f26-228">Because you want toodebug on hello virtual machine, on hello **Settings** page of hello **Publish Web** wizard, select **Debug** as hello configuration.</span></span> <span data-ttu-id="21f26-229">Detta säkerställer att kortnamn är tillgängliga när du felsöker.</span><span class="sxs-lookup"><span data-stu-id="21f26-229">This makes sure that code symbols are available while debugging.</span></span>

    ![Inställningar för publicering](./media/vs-azure-tools-debug-cloud-services-virtual-machines/IC718349.png)
5. <span data-ttu-id="21f26-231">I hello **alternativ för Filpublicering**väljer **ta bort extra filer från destinationen** om hello-projektet har redan distribuerats vid en tidigare tidpunkt.</span><span class="sxs-lookup"><span data-stu-id="21f26-231">In hello **File Publish Options**, select **Remove additional files at destination** if hello project was already deployed at an earlier time.</span></span>
6. <span data-ttu-id="21f26-232">När du publicerar hello projektet på snabbmenyn för hello virtuell dator i Server Explorer markerar **koppla felsökare...**</span><span class="sxs-lookup"><span data-stu-id="21f26-232">After hello project publishes, on hello virtual machine's context menu in Server Explorer, select **Attach Debugger...**</span></span>

    <span data-ttu-id="21f26-233">Azure hämtar en lista över hello processer på hello virtuella datorn och visar dem hello bifoga tooProcess i dialogrutan.</span><span class="sxs-lookup"><span data-stu-id="21f26-233">Azure gets a list of hello processes on hello virtual machine and shows them in hello Attach tooProcess dialog box.</span></span>

    ![Koppla felsökare kommando](./media/vs-azure-tools-debug-cloud-services-virtual-machines/IC746722.png)
7. <span data-ttu-id="21f26-235">I hello **bifoga tooProcess** dialogrutan **Välj** toolimit hello resultatlistan tooshow endast hello typer kod som du vill toodebug.</span><span class="sxs-lookup"><span data-stu-id="21f26-235">In hello **Attach tooProcess** dialog box, select **Select** toolimit hello results list tooshow only hello types of code you want toodebug.</span></span> <span data-ttu-id="21f26-236">Du kan felsöka 32 - eller 64-bitars hanterad kod, maskinkod eller båda.</span><span class="sxs-lookup"><span data-stu-id="21f26-236">You can debug 32- or 64-bit managed code, native code, or both.</span></span>

    ![Välj typ i dialogrutan kod](./media/vs-azure-tools-debug-cloud-services-virtual-machines/IC718346.png)
8. <span data-ttu-id="21f26-238">Välj hello processer toodebug på hello virtuella datorn och sedan markera **bifoga**.</span><span class="sxs-lookup"><span data-stu-id="21f26-238">Select hello processes you want toodebug on hello virtual machine and then select **Attach**.</span></span> <span data-ttu-id="21f26-239">Du kan till exempel välja hello w3wp.exe-processen om du vill toodebug ett webbprogram på hello virtuella datorn.</span><span class="sxs-lookup"><span data-stu-id="21f26-239">For example, you might choose hello w3wp.exe process if you wanted toodebug a web app on hello virtual machine.</span></span> <span data-ttu-id="21f26-240">Se [felsöka en eller flera processer i Visual Studio](https://msdn.microsoft.com/library/jj919165.aspx) för mer information.</span><span class="sxs-lookup"><span data-stu-id="21f26-240">See [Debug One or More Processes in Visual Studio](https://msdn.microsoft.com/library/jj919165.aspx) for more information.</span></span>

## <a name="next-steps"></a><span data-ttu-id="21f26-241">Nästa steg</span><span class="sxs-lookup"><span data-stu-id="21f26-241">Next steps</span></span>
* <span data-ttu-id="21f26-242">Använd **Intellitrace** toocollect en logg över anrop och händelser från en server för versionen.</span><span class="sxs-lookup"><span data-stu-id="21f26-242">Use **Intellitrace** toocollect a log of calls and events from a release server.</span></span> <span data-ttu-id="21f26-243">Se [felsökning en publicerade molntjänst med IntelliTrace och Visual Studio](http://go.microsoft.com/fwlink/?LinkID=623016).</span><span class="sxs-lookup"><span data-stu-id="21f26-243">See [Debugging a Published Cloud Service with IntelliTrace and Visual Studio](http://go.microsoft.com/fwlink/?LinkID=623016).</span></span>
* <span data-ttu-id="21f26-244">Använd **Azure Diagnostics** toolog detaljerad information från kod som körs inom roller, oavsett om hello roller körs i hello utvecklingsmiljö eller i Azure.</span><span class="sxs-lookup"><span data-stu-id="21f26-244">Use **Azure Diagnostics** toolog detailed information from code running within roles, whether hello roles are running in hello development environment or in Azure.</span></span> <span data-ttu-id="21f26-245">Se [samlar in loggningsdata med hjälp av Azure-diagnostik](http://go.microsoft.com/fwlink/p/?LinkId=400450).</span><span class="sxs-lookup"><span data-stu-id="21f26-245">See [Collecting logging data by using Azure Diagnostics](http://go.microsoft.com/fwlink/p/?LinkId=400450).</span></span>

---
title: "aaaUse beräkningsintensiva virtuella Azure-datorer med Batch | Microsoft Docs"
description: Hur tootake nytta av RDMA-kompatibla eller GPU-aktiverade VM storlekar i Azure Batch-pooler
services: batch
documentationcenter: 
author: dlepow
manager: timlt
editor: 
ms.assetid: 
ms.service: batch
ms.workload: big-compute
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 07/27/2017
ms.author: danlep
ms.openlocfilehash: 6a462a5f2a44ddcec8bf4e5c200d444cac8fafe6
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: sv-SE
ms.lasthandoff: 10/06/2017
---
# <a name="use-rdma-capable-or-gpu-enabled-instances-in-batch-pools"></a><span data-ttu-id="98ef1-103">Använda RDMA-kompatibla eller GPU-aktiverade instanser i Batch-pooler</span><span class="sxs-lookup"><span data-stu-id="98ef1-103">Use RDMA-capable or GPU-enabled instances in Batch pools</span></span>

<span data-ttu-id="98ef1-104">toorun vissa batchjobb, kanske du vill tootake utnyttja Azure VM-storlekar som utformats för storskaliga beräkning.</span><span class="sxs-lookup"><span data-stu-id="98ef1-104">toorun certain Batch jobs, you might want tootake advantage of Azure VM sizes designed for large-scale computation.</span></span> <span data-ttu-id="98ef1-105">Till exempel toorun flerinstans [arbetsbelastningar MPI](batch-mpi.md), kan du välja A8 A9, eller H-serien storlekar som har ett nätverk gränssnitt för Remote Direct Memory Access (RDMA).</span><span class="sxs-lookup"><span data-stu-id="98ef1-105">For example, toorun multi-instance [MPI workloads](batch-mpi.md), you can choose A8, A9, or H-series sizes that have a network interface for Remote Direct Memory Access (RDMA).</span></span> <span data-ttu-id="98ef1-106">Dessa storlekar ansluta tooan InfiniBand-nätverk för kommunikationen mellan noder som kan påskynda MPI-program.</span><span class="sxs-lookup"><span data-stu-id="98ef1-106">These sizes connect tooan InfiniBand network for inter-node communication, which can accelerate MPI applications.</span></span> <span data-ttu-id="98ef1-107">Eller CUDA program du N-serien storlekar som innehåller NVIDIA Tesla grafikprocessorer (GPU) unit-kort.</span><span class="sxs-lookup"><span data-stu-id="98ef1-107">Or for CUDA applications, you can choose N-series sizes that include NVIDIA Tesla graphics processing unit (GPU) cards.</span></span>

<span data-ttu-id="98ef1-108">Den här artikeln innehåller anvisningar och exempel toouse vissa av särskilda Azures i Batch-pooler.</span><span class="sxs-lookup"><span data-stu-id="98ef1-108">This article provides guidance and examples toouse some of Azure's specialized sizes in Batch pools.</span></span> <span data-ttu-id="98ef1-109">Specifikationer och bakgrunden finns:</span><span class="sxs-lookup"><span data-stu-id="98ef1-109">For specs and background, see:</span></span>

* <span data-ttu-id="98ef1-110">Högpresterande compute VM-storlekar ([Linux](../virtual-machines/linux/sizes-hpc.md), [Windows](../virtual-machines/windows/sizes-hpc.md))</span><span class="sxs-lookup"><span data-stu-id="98ef1-110">High performance compute VM sizes ([Linux](../virtual-machines/linux/sizes-hpc.md), [Windows](../virtual-machines/windows/sizes-hpc.md))</span></span> 

* <span data-ttu-id="98ef1-111">GPU-aktiverade VM-storlekar ([Linux](../virtual-machines/linux/sizes-gpu.md), [Windows](../virtual-machines/windows/sizes-gpu.md))</span><span class="sxs-lookup"><span data-stu-id="98ef1-111">GPU-enabled VM sizes ([Linux](../virtual-machines/linux/sizes-gpu.md), [Windows](../virtual-machines/windows/sizes-gpu.md))</span></span> 


## <a name="subscription-and-account-limits"></a><span data-ttu-id="98ef1-112">Prenumerationen och gränser</span><span class="sxs-lookup"><span data-stu-id="98ef1-112">Subscription and account limits</span></span>

* <span data-ttu-id="98ef1-113">**Kvoter** -en eller flera Azure-kvoter kan begränsa antalet hello eller typen av noder kan du lägga till tooa Batch-pool.</span><span class="sxs-lookup"><span data-stu-id="98ef1-113">**Quotas** - One or more Azure quotas may limit hello number or type of nodes you can add tooa Batch pool.</span></span> <span data-ttu-id="98ef1-114">Du är mer troligt toobe begränsad när du väljer RDMA-kompatibel GPU-aktiverad, eller andra flera kärnor VM-storlekar.</span><span class="sxs-lookup"><span data-stu-id="98ef1-114">You are more likely toobe limited when you choose RDMA-capable, GPU-enabled, or other multicore VM sizes.</span></span> <span data-ttu-id="98ef1-115">Beroende på hello typ av Batch-kontot som du har skapat, kan du använda toohello konto sig själv eller tooyour prenumeration hello kvoter.</span><span class="sxs-lookup"><span data-stu-id="98ef1-115">Depending on hello type of Batch account you created, hello quotas could apply toohello account itself or tooyour subscription.</span></span>

    * <span data-ttu-id="98ef1-116">Om du har skapat Batch-kontot i hello **Batch-tjänsten** konfiguration, är du begränsad hello [dedikerade kärnor kvot per Batch-kontot](batch-quota-limit.md#resource-quotas).</span><span class="sxs-lookup"><span data-stu-id="98ef1-116">If you created your Batch account in hello **Batch service** configuration, you are limited by hello [dedicated cores quota per Batch account](batch-quota-limit.md#resource-quotas).</span></span> <span data-ttu-id="98ef1-117">Som standard är den här kvoten 20 kärnor.</span><span class="sxs-lookup"><span data-stu-id="98ef1-117">By default, this quota is 20 cores.</span></span> <span data-ttu-id="98ef1-118">En separat kvot gäller för[VM med låg prioritet](batch-low-pri-vms.md), om du använder dem.</span><span class="sxs-lookup"><span data-stu-id="98ef1-118">A separate quota applies too[low-priority VMs](batch-low-pri-vms.md), if you use them.</span></span> 

    * <span data-ttu-id="98ef1-119">Om du har skapat hello konto i hello **användarens prenumeration** konfiguration, din prenumeration begränsar hello antal VM kärnor per region.</span><span class="sxs-lookup"><span data-stu-id="98ef1-119">If you created hello account in hello **User subscription** configuration, your subscription limits hello number of VM cores per region.</span></span> <span data-ttu-id="98ef1-120">Se [Azure-prenumeration och tjänsten gränser, kvoter och begränsningar](../azure-subscription-service-limits.md).</span><span class="sxs-lookup"><span data-stu-id="98ef1-120">See [Azure subscription and service limits, quotas, and constraints](../azure-subscription-service-limits.md).</span></span> <span data-ttu-id="98ef1-121">Prenumerationen gäller även en regionala kvoten toocertain VM-storlekar, inklusive HPC och GPU-instanser.</span><span class="sxs-lookup"><span data-stu-id="98ef1-121">Your subscription also applies a regional quota toocertain VM sizes, including HPC and GPU instances.</span></span> <span data-ttu-id="98ef1-122">Inga ytterligare kvoter tillämpas i konfiguration för hello prenumeration toohello Batch-kontot.</span><span class="sxs-lookup"><span data-stu-id="98ef1-122">In hello user subscription configuration, no additional quotas apply toohello Batch account.</span></span> 

  <span data-ttu-id="98ef1-123">Du kan behöva tooincrease kvoter för en eller flera när du använder en särskild VM-storlek i batchen.</span><span class="sxs-lookup"><span data-stu-id="98ef1-123">You might need tooincrease one or more quotas when using a specialized VM size in Batch.</span></span> <span data-ttu-id="98ef1-124">toorequest ökad kvot, öppna ett [online kundsupport](../azure-supportability/how-to-create-azure-support-request.md) utan kostnad.</span><span class="sxs-lookup"><span data-stu-id="98ef1-124">toorequest a quota increase, open an [online customer support request](../azure-supportability/how-to-create-azure-support-request.md) at no charge.</span></span>

* <span data-ttu-id="98ef1-125">**Regional tillgänglighet** - beräkningsintensiva virtuella datorer kanske inte är tillgänglig i hello regioner där du skapar Batch-konton.</span><span class="sxs-lookup"><span data-stu-id="98ef1-125">**Region availability** - Compute-intensive VMs might not be available in hello regions where you create your Batch accounts.</span></span> <span data-ttu-id="98ef1-126">toocheck att en storlek är tillgänglig finns [produkter som är tillgängliga efter region](https://azure.microsoft.com/regions/services/).</span><span class="sxs-lookup"><span data-stu-id="98ef1-126">toocheck that a size is available, see [Products available by region](https://azure.microsoft.com/regions/services/).</span></span>


## <a name="dependencies"></a><span data-ttu-id="98ef1-127">Beroenden</span><span class="sxs-lookup"><span data-stu-id="98ef1-127">Dependencies</span></span>

<span data-ttu-id="98ef1-128">Hej RDMA och GPU-funktionerna i beräkningsintensiva storlekar stöds endast i vissa operativsystem.</span><span class="sxs-lookup"><span data-stu-id="98ef1-128">hello RDMA and GPU capabilities of compute-intensive sizes are supported only in certain operating systems.</span></span> <span data-ttu-id="98ef1-129">Beroende på operativsystemet, kanske du behöver tooinstall eller konfigurera ytterligare drivrutin eller annan programvara.</span><span class="sxs-lookup"><span data-stu-id="98ef1-129">Depending on your operating system, you might need tooinstall or configure additional driver or other software.</span></span> <span data-ttu-id="98ef1-130">hello följande tabellerna sammanfattas dessa beroenden.</span><span class="sxs-lookup"><span data-stu-id="98ef1-130">hello following tables summarize these dependencies.</span></span> <span data-ttu-id="98ef1-131">Se länkade artiklar för ytterligare information.</span><span class="sxs-lookup"><span data-stu-id="98ef1-131">See linked articles for details.</span></span> <span data-ttu-id="98ef1-132">Alternativ tooconfigure Batch pooler finns senare i den här artikeln.</span><span class="sxs-lookup"><span data-stu-id="98ef1-132">For options tooconfigure Batch pools, see later in this article.</span></span>


### <a name="linux-pools---virtual-machine-configuration"></a><span data-ttu-id="98ef1-133">Pooler för Linux - konfiguration av virtuell dator</span><span class="sxs-lookup"><span data-stu-id="98ef1-133">Linux pools - Virtual machine configuration</span></span>

| <span data-ttu-id="98ef1-134">Storlek</span><span class="sxs-lookup"><span data-stu-id="98ef1-134">Size</span></span> | <span data-ttu-id="98ef1-135">Funktion</span><span class="sxs-lookup"><span data-stu-id="98ef1-135">Capability</span></span> | <span data-ttu-id="98ef1-136">Operativsystem</span><span class="sxs-lookup"><span data-stu-id="98ef1-136">Operating systems</span></span> | <span data-ttu-id="98ef1-137">Programvara som krävs</span><span class="sxs-lookup"><span data-stu-id="98ef1-137">Required software</span></span> | <span data-ttu-id="98ef1-138">Inställningar för programpool</span><span class="sxs-lookup"><span data-stu-id="98ef1-138">Pool settings</span></span> |
| -------- | -------- | ----- |  -------- | ----- |
| [<span data-ttu-id="98ef1-139">H16r H16mr A8 A9</span><span class="sxs-lookup"><span data-stu-id="98ef1-139">H16r, H16mr, A8, A9</span></span>](../virtual-machines/linux/sizes-hpc.md#rdma-capable-instances) | <span data-ttu-id="98ef1-140">RDMA</span><span class="sxs-lookup"><span data-stu-id="98ef1-140">RDMA</span></span> | <span data-ttu-id="98ef1-141">SUSE Linux Enterprise Server 12 HPC eller</span><span class="sxs-lookup"><span data-stu-id="98ef1-141">SUSE Linux Enterprise Server 12 HPC or</span></span><br/><span data-ttu-id="98ef1-142">CentOS-baserade HPC</span><span class="sxs-lookup"><span data-stu-id="98ef1-142">CentOS-based HPC</span></span><br/><span data-ttu-id="98ef1-143">(Azure Marketplace)</span><span class="sxs-lookup"><span data-stu-id="98ef1-143">(Azure Marketplace)</span></span> | <span data-ttu-id="98ef1-144">Intel MPI 5</span><span class="sxs-lookup"><span data-stu-id="98ef1-144">Intel MPI 5</span></span> | <span data-ttu-id="98ef1-145">Aktivera kommunikationen mellan noder, inaktivera samtidiga uppgiftskörningen</span><span class="sxs-lookup"><span data-stu-id="98ef1-145">Enable inter-node communication, disable concurrent task execution</span></span> |
| [<span data-ttu-id="98ef1-146">NC-serien *</span><span class="sxs-lookup"><span data-stu-id="98ef1-146">NC series*</span></span>](../virtual-machines/linux/n-series-driver-setup.md#install-cuda-drivers-for-nc-vms) | <span data-ttu-id="98ef1-147">NVIDIA Tesla K80 GPU</span><span class="sxs-lookup"><span data-stu-id="98ef1-147">NVIDIA Tesla K80 GPU</span></span> | <span data-ttu-id="98ef1-148">Ubuntu 16.04 LTS.</span><span class="sxs-lookup"><span data-stu-id="98ef1-148">Ubuntu 16.04 LTS.</span></span><br/><span data-ttu-id="98ef1-149">Red Hat Enterprise Linux 7.3, eller</span><span class="sxs-lookup"><span data-stu-id="98ef1-149">Red Hat Enterprise Linux 7.3, or</span></span><br/><span data-ttu-id="98ef1-150">CentOS-baserad 7.3</span><span class="sxs-lookup"><span data-stu-id="98ef1-150">CentOS-based 7.3</span></span><br/><span data-ttu-id="98ef1-151">(Azure Marketplace)</span><span class="sxs-lookup"><span data-stu-id="98ef1-151">(Azure Marketplace)</span></span> | <span data-ttu-id="98ef1-152">NVIDIA CUDA Toolkit 8.0 drivrutiner</span><span class="sxs-lookup"><span data-stu-id="98ef1-152">NVIDIA CUDA Toolkit 8.0 drivers</span></span> | <span data-ttu-id="98ef1-153">Saknas</span><span class="sxs-lookup"><span data-stu-id="98ef1-153">N/A</span></span> | 
| [<span data-ttu-id="98ef1-154">NV serien</span><span class="sxs-lookup"><span data-stu-id="98ef1-154">NV series</span></span>](../virtual-machines/linux/n-series-driver-setup.md#install-grid-drivers-for-nv-vms) | <span data-ttu-id="98ef1-155">NVIDIA Tesla M60 GPU</span><span class="sxs-lookup"><span data-stu-id="98ef1-155">NVIDIA Tesla M60 GPU</span></span> | <span data-ttu-id="98ef1-156">Ubuntu 16.04 LTS</span><span class="sxs-lookup"><span data-stu-id="98ef1-156">Ubuntu 16.04 LTS</span></span><br/><span data-ttu-id="98ef1-157">Red Hat Enterprise Linux 7.3</span><span class="sxs-lookup"><span data-stu-id="98ef1-157">Red Hat Enterprise Linux 7.3</span></span><br/><span data-ttu-id="98ef1-158">CentOS-baserad 7.3</span><span class="sxs-lookup"><span data-stu-id="98ef1-158">CentOS-based 7.3</span></span><br/><span data-ttu-id="98ef1-159">(Azure Marketplace)</span><span class="sxs-lookup"><span data-stu-id="98ef1-159">(Azure Marketplace)</span></span> | <span data-ttu-id="98ef1-160">NVIDIA RUTNÄTET 4.3 drivrutiner</span><span class="sxs-lookup"><span data-stu-id="98ef1-160">NVIDIA GRID 4.3 drivers</span></span> | <span data-ttu-id="98ef1-161">Saknas</span><span class="sxs-lookup"><span data-stu-id="98ef1-161">N/A</span></span> |

<span data-ttu-id="98ef1-162">* RDMA-anslutningar på NC24r virtuella datorer stöds på CentOS-baserade 7.3 HPC med Intel MPI.</span><span class="sxs-lookup"><span data-stu-id="98ef1-162">*RDMA connectivity on NC24r VMs is supported on CentOS-based 7.3 HPC with Intel MPI.</span></span>



### <a name="windows-pools---virtual-machine-configuration"></a><span data-ttu-id="98ef1-163">Pooler för Windows - konfiguration av virtuell dator</span><span class="sxs-lookup"><span data-stu-id="98ef1-163">Windows pools - Virtual machine configuration</span></span>

| <span data-ttu-id="98ef1-164">Storlek</span><span class="sxs-lookup"><span data-stu-id="98ef1-164">Size</span></span> | <span data-ttu-id="98ef1-165">Funktion</span><span class="sxs-lookup"><span data-stu-id="98ef1-165">Capability</span></span> | <span data-ttu-id="98ef1-166">Operativsystem</span><span class="sxs-lookup"><span data-stu-id="98ef1-166">Operating systems</span></span> | <span data-ttu-id="98ef1-167">Programvara som krävs</span><span class="sxs-lookup"><span data-stu-id="98ef1-167">Required software</span></span> | <span data-ttu-id="98ef1-168">Inställningar för programpool</span><span class="sxs-lookup"><span data-stu-id="98ef1-168">Pool settings</span></span> |
| -------- | ------ | -------- | -------- | ----- |
| [<span data-ttu-id="98ef1-169">H16r H16mr A8 A9</span><span class="sxs-lookup"><span data-stu-id="98ef1-169">H16r, H16mr, A8, A9</span></span>](../virtual-machines/windows/sizes-hpc.md#rdma-capable-instances) | <span data-ttu-id="98ef1-170">RDMA</span><span class="sxs-lookup"><span data-stu-id="98ef1-170">RDMA</span></span> | <span data-ttu-id="98ef1-171">Windows Server 2012 R2 eller</span><span class="sxs-lookup"><span data-stu-id="98ef1-171">Windows Server 2012 R2 or</span></span><br/><span data-ttu-id="98ef1-172">Windows Server 2012 (Azure Marketplace)</span><span class="sxs-lookup"><span data-stu-id="98ef1-172">Windows Server 2012 (Azure Marketplace)</span></span> | <span data-ttu-id="98ef1-173">Microsoft MPI 2012 R2 eller senare, eller</span><span class="sxs-lookup"><span data-stu-id="98ef1-173">Microsoft MPI 2012 R2 or later, or</span></span><br/> <span data-ttu-id="98ef1-174">Intel MPI 5</span><span class="sxs-lookup"><span data-stu-id="98ef1-174">Intel MPI 5</span></span><br/><br/><span data-ttu-id="98ef1-175">HpcVMDrivers Azure VM-tillägget</span><span class="sxs-lookup"><span data-stu-id="98ef1-175">HpcVMDrivers Azure VM extension</span></span> | <span data-ttu-id="98ef1-176">Aktivera kommunikationen mellan noder, inaktivera samtidiga uppgiftskörningen</span><span class="sxs-lookup"><span data-stu-id="98ef1-176">Enable inter-node communication, disable concurrent task execution</span></span> |
| [<span data-ttu-id="98ef1-177">NC-serien *</span><span class="sxs-lookup"><span data-stu-id="98ef1-177">NC series*</span></span>](../virtual-machines/windows/n-series-driver-setup.md) | <span data-ttu-id="98ef1-178">NVIDIA Tesla K80 GPU</span><span class="sxs-lookup"><span data-stu-id="98ef1-178">NVIDIA Tesla K80 GPU</span></span> | <span data-ttu-id="98ef1-179">Windows Server 2016 eller</span><span class="sxs-lookup"><span data-stu-id="98ef1-179">Windows Server 2016 or</span></span> <br/><span data-ttu-id="98ef1-180">Windows Server 2012 R2 (Azure Marketplace)</span><span class="sxs-lookup"><span data-stu-id="98ef1-180">Windows Server 2012 R2 (Azure Marketplace)</span></span> | <span data-ttu-id="98ef1-181">NVIDIA Tesla drivrutiner eller CUDA Toolkit 8.0 drivrutiner</span><span class="sxs-lookup"><span data-stu-id="98ef1-181">NVIDIA Tesla drivers or CUDA Toolkit 8.0 drivers</span></span>| <span data-ttu-id="98ef1-182">Saknas</span><span class="sxs-lookup"><span data-stu-id="98ef1-182">N/A</span></span> | 
| [<span data-ttu-id="98ef1-183">NV serien</span><span class="sxs-lookup"><span data-stu-id="98ef1-183">NV series</span></span>](../virtual-machines/windows/n-series-driver-setup.md) | <span data-ttu-id="98ef1-184">NVIDIA Tesla M60 GPU</span><span class="sxs-lookup"><span data-stu-id="98ef1-184">NVIDIA Tesla M60 GPU</span></span> | <span data-ttu-id="98ef1-185">Windows Server 2016 eller</span><span class="sxs-lookup"><span data-stu-id="98ef1-185">Windows Server 2016 or</span></span><br/><span data-ttu-id="98ef1-186">Windows Server 2012 R2 (Azure Marketplace)</span><span class="sxs-lookup"><span data-stu-id="98ef1-186">Windows Server 2012 R2 (Azure Marketplace)</span></span> | <span data-ttu-id="98ef1-187">NVIDIA RUTNÄTET 4.3 drivrutiner</span><span class="sxs-lookup"><span data-stu-id="98ef1-187">NVIDIA GRID 4.3 drivers</span></span> | <span data-ttu-id="98ef1-188">Saknas</span><span class="sxs-lookup"><span data-stu-id="98ef1-188">N/A</span></span> |

<span data-ttu-id="98ef1-189">* RDMA-anslutningar på NC24r virtuella datorer stöds i Windows Server 2012 R2 med HpcVMDrivers tillägg och Microsoft MPI eller Intel MPI.</span><span class="sxs-lookup"><span data-stu-id="98ef1-189">*RDMA connectivity on NC24r VMs is supported on Windows Server 2012 R2 with HpcVMDrivers extension and Microsoft MPI or Intel MPI.</span></span>

### <a name="windows-pools---cloud-services-configuration"></a><span data-ttu-id="98ef1-190">Windows - pooler i Cloud services-konfiguration</span><span class="sxs-lookup"><span data-stu-id="98ef1-190">Windows pools - Cloud services configuration</span></span>

> [!NOTE]
> <span data-ttu-id="98ef1-191">N-serien storlekar stöds inte i Batch-pooler med hello cloud services-konfiguration.</span><span class="sxs-lookup"><span data-stu-id="98ef1-191">N-series sizes are not supported in Batch pools with hello cloud services configuration.</span></span>
>

| <span data-ttu-id="98ef1-192">Storlek</span><span class="sxs-lookup"><span data-stu-id="98ef1-192">Size</span></span> | <span data-ttu-id="98ef1-193">Funktion</span><span class="sxs-lookup"><span data-stu-id="98ef1-193">Capability</span></span> | <span data-ttu-id="98ef1-194">Operativsystem</span><span class="sxs-lookup"><span data-stu-id="98ef1-194">Operating systems</span></span> | <span data-ttu-id="98ef1-195">Programvara som krävs</span><span class="sxs-lookup"><span data-stu-id="98ef1-195">Required software</span></span> | <span data-ttu-id="98ef1-196">Inställningar för programpool</span><span class="sxs-lookup"><span data-stu-id="98ef1-196">Pool settings</span></span> |
| -------- | ------- | -------- | -------- | ----- |
| [<span data-ttu-id="98ef1-197">H16r H16mr A8 A9</span><span class="sxs-lookup"><span data-stu-id="98ef1-197">H16r, H16mr, A8, A9</span></span>](../virtual-machines/windows/sizes-hpc.md#rdma-capable-instances) | <span data-ttu-id="98ef1-198">RDMA</span><span class="sxs-lookup"><span data-stu-id="98ef1-198">RDMA</span></span> | <span data-ttu-id="98ef1-199">Windows Server 2012 R2</span><span class="sxs-lookup"><span data-stu-id="98ef1-199">Windows Server 2012 R2,</span></span><br/><span data-ttu-id="98ef1-200">Windows Server 2012, eller</span><span class="sxs-lookup"><span data-stu-id="98ef1-200">Windows Server 2012, or</span></span><br/><span data-ttu-id="98ef1-201">Windows Server 2008 R2 (gäst-OS-familjen)</span><span class="sxs-lookup"><span data-stu-id="98ef1-201">Windows Server 2008 R2 (Guest OS family)</span></span> | <span data-ttu-id="98ef1-202">Microsoft MPI 2012 R2 eller senare, eller</span><span class="sxs-lookup"><span data-stu-id="98ef1-202">Microsoft MPI 2012 R2 or later, or</span></span><br/><span data-ttu-id="98ef1-203">Intel MPI 5</span><span class="sxs-lookup"><span data-stu-id="98ef1-203">Intel MPI 5</span></span><br/><br/><span data-ttu-id="98ef1-204">HpcVMDrivers Azure VM-tillägget</span><span class="sxs-lookup"><span data-stu-id="98ef1-204">HpcVMDrivers Azure VM extension</span></span> | <span data-ttu-id="98ef1-205">Aktivera kommunikationen mellan noder,</span><span class="sxs-lookup"><span data-stu-id="98ef1-205">Enable inter-node communication,</span></span><br/> <span data-ttu-id="98ef1-206">inaktivera samtidiga uppgiftskörningen</span><span class="sxs-lookup"><span data-stu-id="98ef1-206">disable concurrent task execution</span></span> |





## <a name="pool-configuration-options"></a><span data-ttu-id="98ef1-207">Konfigurationsalternativ för poolen</span><span class="sxs-lookup"><span data-stu-id="98ef1-207">Pool configuration options</span></span>

<span data-ttu-id="98ef1-208">tooconfigure en specialiserad VM-storlek för Batch-pool, hello Batch-API: er och verktyg tillhandahåller flera alternativ tooinstall krävs programvara eller drivrutiner, inklusive:</span><span class="sxs-lookup"><span data-stu-id="98ef1-208">tooconfigure a specialized VM size for your Batch pool, hello Batch APIs and tools provide several options tooinstall required software or drivers, including:</span></span>

* <span data-ttu-id="98ef1-209">[Aktiviteten starta](batch-api-basics.md#start-task) -ladda upp ett installationspaket som en resurs filen tooan Azure storage-konto i hello samma region som hello Batch-kontot.</span><span class="sxs-lookup"><span data-stu-id="98ef1-209">[Start task](batch-api-basics.md#start-task) - Upload an installation package as a resource file tooan Azure storage account in hello same region as hello Batch account.</span></span> <span data-ttu-id="98ef1-210">Skapa resursfilen starta uppgiften kommandoraden tooinstall hello tyst när hello pool startas.</span><span class="sxs-lookup"><span data-stu-id="98ef1-210">Create a start task command line tooinstall hello resource file silently when hello pool starts.</span></span> <span data-ttu-id="98ef1-211">Mer information finns i hello [REST API-dokumentation](/rest/api/batchservice/add-a-pool-to-an-account#bk_starttask).</span><span class="sxs-lookup"><span data-stu-id="98ef1-211">For more information, see hello [REST API documentation](/rest/api/batchservice/add-a-pool-to-an-account#bk_starttask).</span></span>

  > [!NOTE] 
  > <span data-ttu-id="98ef1-212">hello startuppgift måste köras med behörighet för utökade (admin) och den måste vänta på att lyckas.</span><span class="sxs-lookup"><span data-stu-id="98ef1-212">hello start task must run with elevated (admin) permissions, and it must wait for success.</span></span>
  >

* <span data-ttu-id="98ef1-213">[Programpaketet](batch-application-packages.md) – Lägg till en installation av komprimerade paketet tooyour Batch-kontot och konfigurera en paket-referens i hello pool.</span><span class="sxs-lookup"><span data-stu-id="98ef1-213">[Application package](batch-application-packages.md) - Add a zipped installation package tooyour Batch account, and configure a package reference in hello pool.</span></span> <span data-ttu-id="98ef1-214">Den här inställningen laddar upp och därefter hello paketet på alla noder i hello pool.</span><span class="sxs-lookup"><span data-stu-id="98ef1-214">This setting uploads and unzips hello package on all nodes in hello pool.</span></span> <span data-ttu-id="98ef1-215">Om hello-paket är ett installationsprogram, skapar du en starta uppgiften kommandoraden toosilently installera hello app på alla noder i poolen.</span><span class="sxs-lookup"><span data-stu-id="98ef1-215">If hello package is an installer, create a start task command line toosilently install hello app on all pool nodes.</span></span> <span data-ttu-id="98ef1-216">Du kan också installera hello-paket när en aktivitet är schemalagd toorun på en nod.</span><span class="sxs-lookup"><span data-stu-id="98ef1-216">Optionally, install hello package when a task is scheduled toorun on a node.</span></span>

* <span data-ttu-id="98ef1-217">[Anpassade poolen avbildningen](batch-api-basics.md#pool) – skapa en anpassad Windows eller Linux VM-avbildning som innehåller drivrutiner, programvara eller andra inställningar som krävs för hello VM-storlek.</span><span class="sxs-lookup"><span data-stu-id="98ef1-217">[Custom pool image](batch-api-basics.md#pool) - Create a custom Windows or Linux VM image that contains drivers, software, or other settings required for hello VM size.</span></span> <span data-ttu-id="98ef1-218">Om du har skapat Batch-kontot i hello Användarkonfiguration prenumerationen ange hello anpassad avbildning för Batch-pool.</span><span class="sxs-lookup"><span data-stu-id="98ef1-218">If you created your Batch account in hello user subscription configuration, specify hello custom image for your Batch pool.</span></span> <span data-ttu-id="98ef1-219">(Anpassade avbildningar stöds inte i konton i hello Batch-tjänstkonfigurationen.) Anpassade avbildningar kan endast användas med pooler i hello konfiguration av virtuell dator.</span><span class="sxs-lookup"><span data-stu-id="98ef1-219">(Custom images are not supported in accounts in hello Batch service configuration.) Custom images can only be used with pools in hello virtual machine configuration.</span></span>

  > [!IMPORTANT]
  > <span data-ttu-id="98ef1-220">Du kan inte använder en anpassad avbildning som skapats med hanterade diskar eller med Premium-lagring i Batch-pooler.</span><span class="sxs-lookup"><span data-stu-id="98ef1-220">In Batch pools, you can't currently use a custom image created with managed disks or with Premium storage.</span></span>
  >



* <span data-ttu-id="98ef1-221">[Batch-skeppsvarv](https://github.com/Azure/batch-shipyard) konfigurerar automatiskt hello GPU och RDMA toowork transparent med av arbetsbelastningar i Azure Batch.</span><span class="sxs-lookup"><span data-stu-id="98ef1-221">[Batch Shipyard](https://github.com/Azure/batch-shipyard) automatically configures hello GPU and RDMA toowork transparently with containerized workloads on Azure Batch.</span></span> <span data-ttu-id="98ef1-222">Batch skeppsvarv drivs helt med konfigurationsfiler.</span><span class="sxs-lookup"><span data-stu-id="98ef1-222">Batch Shipyard is entirely driven with configuration files.</span></span> <span data-ttu-id="98ef1-223">Det finns många exempel recept tillgängliga konfigurationer som möjliggör GPU och RDMA arbetsbelastningar som till exempel hello [CNTK GPU recept](https://github.com/Azure/batch-shipyard/tree/master/recipes/CNTK-GPU-OpenMPI) som förkonfigurerar GPU drivrutiner på N-serien virtuella datorer och läser in kognitiva Toolkit för Microsoft-programvara som en Docker-bild.</span><span class="sxs-lookup"><span data-stu-id="98ef1-223">There are many sample recipe configurations available that enable GPU and RDMA workloads such as hello [CNTK GPU Recipe](https://github.com/Azure/batch-shipyard/tree/master/recipes/CNTK-GPU-OpenMPI)  which preconfigures GPU drivers on N-series VMs and loads Microsoft Cognitive Toolkit software as a Docker image.</span></span>


## <a name="example-microsoft-mpi-on-an-a8-vm-pool"></a><span data-ttu-id="98ef1-224">Exempel: Microsoft MPI i en A8 VM-adresspool</span><span class="sxs-lookup"><span data-stu-id="98ef1-224">Example: Microsoft MPI on an A8 VM pool</span></span>

<span data-ttu-id="98ef1-225">toorun Windows MPI program på en pool med Azure A8 noder, behöver du tooinstall en stöds MPI-implementering.</span><span class="sxs-lookup"><span data-stu-id="98ef1-225">toorun Windows MPI applications on a pool of Azure A8 nodes, you need tooinstall a supported MPI implementation.</span></span> <span data-ttu-id="98ef1-226">Här följer exempel steg tooinstall [Microsoft MPI](https://msdn.microsoft.com/library/bb524831(v=vs.85).aspx) på en Windows-poolen med hjälp av ett Batch-programpaket.</span><span class="sxs-lookup"><span data-stu-id="98ef1-226">Here are sample steps tooinstall [Microsoft MPI](https://msdn.microsoft.com/library/bb524831(v=vs.85).aspx) on a Windows pool using a Batch application package.</span></span>

1. <span data-ttu-id="98ef1-227">Hämta hello [installationspaketet](http://go.microsoft.com/FWLink/p/?LinkID=389556) (MSMpiSetup.exe) för hello senaste versionen av Microsoft MPI.</span><span class="sxs-lookup"><span data-stu-id="98ef1-227">Download hello [setup package](http://go.microsoft.com/FWLink/p/?LinkID=389556) (MSMpiSetup.exe) for hello latest version of Microsoft MPI.</span></span>
2. <span data-ttu-id="98ef1-228">Skapa en zip-fil för hello-paketet.</span><span class="sxs-lookup"><span data-stu-id="98ef1-228">Create a zip file of hello package.</span></span>
3. <span data-ttu-id="98ef1-229">Överför hello paketet tooyour Batch-kontot.</span><span class="sxs-lookup"><span data-stu-id="98ef1-229">Upload hello package tooyour Batch account.</span></span> <span data-ttu-id="98ef1-230">Anvisningar finns i hello [programpaket](batch-application-packages.md) vägledning.</span><span class="sxs-lookup"><span data-stu-id="98ef1-230">For steps, see hello [application packages](batch-application-packages.md) guidance.</span></span> <span data-ttu-id="98ef1-231">Ange ett program-id som *MSMPI*, och en version som *8.1*.</span><span class="sxs-lookup"><span data-stu-id="98ef1-231">Specify an application id such as *MSMPI*, and a version such as *8.1*.</span></span> 
4. <span data-ttu-id="98ef1-232">Skapa en pool i hello cloud services-konfiguration med hello önskat antal noder och skala med hello Batch-API: er eller Azure-portalen.</span><span class="sxs-lookup"><span data-stu-id="98ef1-232">Using hello Batch APIs or Azure portal, create a pool in hello cloud services configuration with hello desired number of nodes and scale.</span></span> <span data-ttu-id="98ef1-233">hello följande tabell visas exempel inställningarna tooset in MPI i obevakat läge med Startuppgiften:</span><span class="sxs-lookup"><span data-stu-id="98ef1-233">hello following table shows sample settings tooset up MPI in unattended mode using a start task:</span></span>

| <span data-ttu-id="98ef1-234">Inställning</span><span class="sxs-lookup"><span data-stu-id="98ef1-234">Setting</span></span> | <span data-ttu-id="98ef1-235">Värde</span><span class="sxs-lookup"><span data-stu-id="98ef1-235">Value</span></span> |
| ---- | ----- | 
| <span data-ttu-id="98ef1-236">**Bildtyp**</span><span class="sxs-lookup"><span data-stu-id="98ef1-236">**Image Type**</span></span> | <span data-ttu-id="98ef1-237">Molntjänster</span><span class="sxs-lookup"><span data-stu-id="98ef1-237">Cloud Services</span></span> |
| <span data-ttu-id="98ef1-238">**OS-familjen**</span><span class="sxs-lookup"><span data-stu-id="98ef1-238">**OS family**</span></span> | <span data-ttu-id="98ef1-239">Windows Server 2012 R2 (OS-familjen 4)</span><span class="sxs-lookup"><span data-stu-id="98ef1-239">Windows Server 2012 R2 (OS family 4)</span></span> |
| <span data-ttu-id="98ef1-240">**Nodstorlek**</span><span class="sxs-lookup"><span data-stu-id="98ef1-240">**Node size**</span></span> | <span data-ttu-id="98ef1-241">A8 Standard</span><span class="sxs-lookup"><span data-stu-id="98ef1-241">A8 Standard</span></span> |
| <span data-ttu-id="98ef1-242">**Dessa kommunikation aktiverad**</span><span class="sxs-lookup"><span data-stu-id="98ef1-242">**Internode communication enabled**</span></span> | <span data-ttu-id="98ef1-243">True</span><span class="sxs-lookup"><span data-stu-id="98ef1-243">True</span></span> |
| <span data-ttu-id="98ef1-244">**Maximalt antal uppgifter per nod**</span><span class="sxs-lookup"><span data-stu-id="98ef1-244">**Max tasks per node**</span></span> | <span data-ttu-id="98ef1-245">1</span><span class="sxs-lookup"><span data-stu-id="98ef1-245">1</span></span> |
| <span data-ttu-id="98ef1-246">**Programmet paketet refererar till**</span><span class="sxs-lookup"><span data-stu-id="98ef1-246">**Application package references**</span></span> | <span data-ttu-id="98ef1-247">MSMPI</span><span class="sxs-lookup"><span data-stu-id="98ef1-247">MSMPI</span></span> |
| <span data-ttu-id="98ef1-248">**Starta aktivitet aktiverad**</span><span class="sxs-lookup"><span data-stu-id="98ef1-248">**Start task enabled**</span></span> | <span data-ttu-id="98ef1-249">True</span><span class="sxs-lookup"><span data-stu-id="98ef1-249">True</span></span><br><span data-ttu-id="98ef1-250">**Kommandorad** - `"cmd /c %AZ_BATCH_APP_PACKAGE_MSMPI#8.1%\\MSMpiSetup.exe -unattend -force"`</span><span class="sxs-lookup"><span data-stu-id="98ef1-250">**Command line** - `"cmd /c %AZ_BATCH_APP_PACKAGE_MSMPI#8.1%\\MSMpiSetup.exe -unattend -force"`</span></span><br/><span data-ttu-id="98ef1-251">**Användaridentitet** -poolen autouser, admin</span><span class="sxs-lookup"><span data-stu-id="98ef1-251">**User identity** - Pool autouser, admin</span></span><br/><span data-ttu-id="98ef1-252">**Vänta tills lyckade** – SANT</span><span class="sxs-lookup"><span data-stu-id="98ef1-252">**Wait for success** - True</span></span>

## <a name="example-nvidia-tesla-drivers-on-nc-vm-pool"></a><span data-ttu-id="98ef1-253">Exempel: NVIDIA Tesla drivrutiner på NC-VM-pool</span><span class="sxs-lookup"><span data-stu-id="98ef1-253">Example: NVIDIA Tesla drivers on NC VM pool</span></span>

<span data-ttu-id="98ef1-254">toorun CUDA program på en pool med Linux NC-noder, behöver du tooinstall CUDA Toolkit 8.0 på hello noder.</span><span class="sxs-lookup"><span data-stu-id="98ef1-254">toorun CUDA applications on a pool of Linux NC nodes, you need tooinstall CUDA Toolkit 8.0 on hello nodes.</span></span> <span data-ttu-id="98ef1-255">hello Toolkit installerar drivrutiner som behövs hello NVIDIA Tesla GPU.</span><span class="sxs-lookup"><span data-stu-id="98ef1-255">hello Toolkit installs hello necessary NVIDIA Tesla GPU drivers.</span></span> <span data-ttu-id="98ef1-256">Här följer exempel steg toodeploy en anpassad avbildning Ubuntu 16.04 LTS med hello GPU drivrutiner:</span><span class="sxs-lookup"><span data-stu-id="98ef1-256">Here are sample steps toodeploy a custom Ubuntu 16.04 LTS image with hello GPU drivers:</span></span>

1. <span data-ttu-id="98ef1-257">Distribuera ett Azure NC6 virtuell dator som kör Ubuntu 16.04 LTS.</span><span class="sxs-lookup"><span data-stu-id="98ef1-257">Deploy an Azure NC6 VM running Ubuntu 16.04 LTS.</span></span> <span data-ttu-id="98ef1-258">Till exempel skapa hello VM i hello oss södra centrala region.</span><span class="sxs-lookup"><span data-stu-id="98ef1-258">For example, create hello VM in hello US South Central region.</span></span> <span data-ttu-id="98ef1-259">Se till att du skapar hello VM med standardlagring, och *utan* hanterade diskar.</span><span class="sxs-lookup"><span data-stu-id="98ef1-259">Make sure that you create hello VM with standard storage, and *without* managed disks.</span></span>
2. <span data-ttu-id="98ef1-260">Följ hello steg tooconnect toohello VM och [CUDA drivrutinsinstallation](../virtual-machines/linux/n-series-driver-setup.md#install-cuda-drivers-for-nc-vms).</span><span class="sxs-lookup"><span data-stu-id="98ef1-260">Follow hello steps tooconnect toohello VM and [install CUDA drivers](../virtual-machines/linux/n-series-driver-setup.md#install-cuda-drivers-for-nc-vms).</span></span>
3. <span data-ttu-id="98ef1-261">Ta bort etableringen hello Linux-agenten och sedan avbilda Linux VM-avbildning med hjälp av hello Azure CLI 1.0-kommandon.</span><span class="sxs-lookup"><span data-stu-id="98ef1-261">Deprovision hello Linux agent, and then capture Linux VM image using hello Azure CLI 1.0 commands.</span></span> <span data-ttu-id="98ef1-262">Anvisningar finns [avbilda en Linux-dator som körs på Azure](../virtual-machines/linux/capture-image-nodejs.md).</span><span class="sxs-lookup"><span data-stu-id="98ef1-262">For steps, see [Capture a Linux virtual machine running on Azure](../virtual-machines/linux/capture-image-nodejs.md).</span></span> <span data-ttu-id="98ef1-263">Anteckna hello avbildningen URI.</span><span class="sxs-lookup"><span data-stu-id="98ef1-263">Make a note of hello image URI.</span></span>
  > [!IMPORTANT]
  > <span data-ttu-id="98ef1-264">Använd inte Azure CLI 2.0 kommandon toocapture hello avbildning för Azure Batch.</span><span class="sxs-lookup"><span data-stu-id="98ef1-264">Do not use Azure CLI 2.0 commands toocapture hello image for Azure Batch.</span></span> <span data-ttu-id="98ef1-265">Hello CLI 2.0 kommandon avbilda för närvarande endast virtuella datorer som skapades med hjälp av hanterade diskar.</span><span class="sxs-lookup"><span data-stu-id="98ef1-265">Currently hello CLI 2.0 commands only capture VMs created using managed disks.</span></span>
  >
4. <span data-ttu-id="98ef1-266">Skapa ett Batch-konto med hello prenumeration Användarkonfiguration i en region som stöder NC virtuella datorer.</span><span class="sxs-lookup"><span data-stu-id="98ef1-266">Create a Batch account, with hello user subscription configuration, in a region that supports NC VMs.</span></span>
5. <span data-ttu-id="98ef1-267">Använder hello Batch-API: er eller Azure portal, skapa en pool med hello anpassad avbildning och med hello önskat antal noder och skala.</span><span class="sxs-lookup"><span data-stu-id="98ef1-267">Using hello Batch APIs or Azure portal, create a pool using hello custom image and with hello desired number of nodes and scale.</span></span> <span data-ttu-id="98ef1-268">hello visas följande tabell exempel processpool-inställningar för hello avbildningen:</span><span class="sxs-lookup"><span data-stu-id="98ef1-268">hello following table shows sample pool settings for hello image:</span></span>

| <span data-ttu-id="98ef1-269">Inställning</span><span class="sxs-lookup"><span data-stu-id="98ef1-269">Setting</span></span> | <span data-ttu-id="98ef1-270">Värde</span><span class="sxs-lookup"><span data-stu-id="98ef1-270">Value</span></span> |
| ---- | ---- |
| <span data-ttu-id="98ef1-271">**Bildtyp**</span><span class="sxs-lookup"><span data-stu-id="98ef1-271">**Image Type**</span></span> | <span data-ttu-id="98ef1-272">Anpassad avbildning</span><span class="sxs-lookup"><span data-stu-id="98ef1-272">Custom Image</span></span> |
| <span data-ttu-id="98ef1-273">**Anpassad avbildning**</span><span class="sxs-lookup"><span data-stu-id="98ef1-273">**Custom Image**</span></span> | <span data-ttu-id="98ef1-274">Bild-URI för hello formuläret`https://yourstorageaccountdisks.blob.core.windows.net/system/Microsoft.Compute/Images/vhds/MyVHDNamePrefix-osDisk.xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx.vhd`</span><span class="sxs-lookup"><span data-stu-id="98ef1-274">Image URI of hello form `https://yourstorageaccountdisks.blob.core.windows.net/system/Microsoft.Compute/Images/vhds/MyVHDNamePrefix-osDisk.xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx.vhd`</span></span> |
| <span data-ttu-id="98ef1-275">**Noden agent SKU**</span><span class="sxs-lookup"><span data-stu-id="98ef1-275">**Node agent SKU**</span></span> | <span data-ttu-id="98ef1-276">batch.node.Ubuntu 16.04</span><span class="sxs-lookup"><span data-stu-id="98ef1-276">batch.node.ubuntu 16.04</span></span> |
| <span data-ttu-id="98ef1-277">**Nodstorlek**</span><span class="sxs-lookup"><span data-stu-id="98ef1-277">**Node size**</span></span> | <span data-ttu-id="98ef1-278">NC6 Standard</span><span class="sxs-lookup"><span data-stu-id="98ef1-278">NC6 Standard</span></span> |



## <a name="next-steps"></a><span data-ttu-id="98ef1-279">Nästa steg</span><span class="sxs-lookup"><span data-stu-id="98ef1-279">Next steps</span></span>

* <span data-ttu-id="98ef1-280">toorun MPI-jobb på Azure Batch-pool finns hello [Windows](batch-mpi.md) eller [Linux](https://blogs.technet.microsoft.com/windowshpc/2016/07/20/introducing-mpi-support-for-linux-on-azure-batch/) exempel.</span><span class="sxs-lookup"><span data-stu-id="98ef1-280">toorun MPI jobs on an Azure Batch pool, see hello [Windows](batch-mpi.md) or [Linux](https://blogs.technet.microsoft.com/windowshpc/2016/07/20/introducing-mpi-support-for-linux-on-azure-batch/) examples.</span></span>

* <span data-ttu-id="98ef1-281">Exempel på GPU arbetsbelastningar på Batch finns hello [Batch skeppsvarv](https://github.com/Azure/batch-shipyard/) recept.</span><span class="sxs-lookup"><span data-stu-id="98ef1-281">For examples of GPU workloads on Batch, see hello [Batch Shipyard](https://github.com/Azure/batch-shipyard/) recipes.</span></span>

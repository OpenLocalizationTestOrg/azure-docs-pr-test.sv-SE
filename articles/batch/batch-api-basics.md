---
title: "aaaOverview för Azure Batch för utvecklare | Microsoft Docs"
description: "Lär dig hello funktionerna i hello Batch-tjänsten och dess API: er från en utveckling synvinkel."
services: batch
documentationcenter: .net
author: tamram
manager: timlt
editor: 
ms.assetid: 416b95f8-2d7b-4111-8012-679b0f60d204
ms.service: batch
ms.devlang: multiple
ms.topic: get-started-article
ms.tgt_pltfrm: na
ms.workload: big-compute
ms.date: 06/28/2017
ms.author: tamram
ms.custom: H1Hack27Feb2017
ms.openlocfilehash: 3da9d82572b28d05d1923166bd08c26725ca3316
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: sv-SE
ms.lasthandoff: 10/06/2017
---
# <a name="develop-large-scale-parallel-compute-solutions-with-batch"></a><span data-ttu-id="45f30-103">Utveckla storskaliga parallella beräkningslösningar med Batch</span><span class="sxs-lookup"><span data-stu-id="45f30-103">Develop large-scale parallel compute solutions with Batch</span></span>

<span data-ttu-id="45f30-104">I den här översikten hello kärnkomponenterna i hello Azure Batch-tjänsten, diskuterar vi hello primära tjänstens funktioner och resurser som Batch-utvecklare kan använda toobuild storskaliga parallell compute-lösningar.</span><span class="sxs-lookup"><span data-stu-id="45f30-104">In this overview of hello core components of hello Azure Batch service, we discuss hello primary service features and resources that Batch developers can use toobuild large-scale parallel compute solutions.</span></span>

<span data-ttu-id="45f30-105">Om du utvecklar beräkningar programmet eller tjänsten som utfärdar direkt [REST API] [ batch_rest_api] anrop eller om du använder någon av hello [Batch SDK](batch-apis-tools.md#azure-accounts-for-batch-development), ska du använda många av hello resurser och funktioner som beskrivs i den här artikeln.</span><span class="sxs-lookup"><span data-stu-id="45f30-105">Whether you're developing a distributed computational application or service that issues direct [REST API][batch_rest_api] calls or you're using one of hello [Batch SDKs](batch-apis-tools.md#azure-accounts-for-batch-development), you'll use many of hello resources and features discussed in this article.</span></span>

> [!TIP]
> <span data-ttu-id="45f30-106">En högre nivå introduktion toohello Batch-tjänsten, se [grunderna i Azure Batch](batch-technical-overview.md).</span><span class="sxs-lookup"><span data-stu-id="45f30-106">For a higher-level introduction toohello Batch service, see [Basics of Azure Batch](batch-technical-overview.md).</span></span>
>
>

## <a name="batch-service-workflow"></a><span data-ttu-id="45f30-107">Batch-tjänstens arbetsflöde</span><span class="sxs-lookup"><span data-stu-id="45f30-107">Batch service workflow</span></span>
<span data-ttu-id="45f30-108">hello är följande övergripande arbetsflöde typiska för nästan alla program och tjänster som använder hello Batch-tjänsten för bearbetning av parallell arbetsbelastningar:</span><span class="sxs-lookup"><span data-stu-id="45f30-108">hello following high-level workflow is typical of nearly all applications and services that use hello Batch service for processing parallel workloads:</span></span>

1. <span data-ttu-id="45f30-109">Överför hello **datafiler** som du vill tooprocess tooan [Azure Storage] [ azure_storage] konto.</span><span class="sxs-lookup"><span data-stu-id="45f30-109">Upload hello **data files** that you want tooprocess tooan [Azure Storage][azure_storage] account.</span></span> <span data-ttu-id="45f30-110">Batch innehåller inbyggt stöd för att komma åt Azure Blob storage och aktiviteterna kan hämta dessa filer för[datornoder](#compute-node) när hello aktiviteter körs.</span><span class="sxs-lookup"><span data-stu-id="45f30-110">Batch includes built-in support for accessing Azure Blob storage, and your tasks can download these files too[compute nodes](#compute-node) when hello tasks are run.</span></span>
2. <span data-ttu-id="45f30-111">Överför hello **programfiler** som dina aktiviteter körs.</span><span class="sxs-lookup"><span data-stu-id="45f30-111">Upload hello **application files** that your tasks will run.</span></span> <span data-ttu-id="45f30-112">Dessa filer kan vara binärfiler eller skript och deras beroenden och utförs av hello uppgifter i dina jobb.</span><span class="sxs-lookup"><span data-stu-id="45f30-112">These files can be binaries or scripts and their dependencies, and are executed by hello tasks in your jobs.</span></span> <span data-ttu-id="45f30-113">Aktiviteterna kan hämta dessa filer från ditt lagringskonto eller använda hello [programpaket](#application-packages) funktion i Batch för hantering av program och distribution.</span><span class="sxs-lookup"><span data-stu-id="45f30-113">Your tasks can download these files from your Storage account, or you can use hello [application packages](#application-packages) feature of Batch for application management and deployment.</span></span>
3. <span data-ttu-id="45f30-114">Skapa en [pool](#pool) med beräkningsnoder.</span><span class="sxs-lookup"><span data-stu-id="45f30-114">Create a [pool](#pool) of compute nodes.</span></span> <span data-ttu-id="45f30-115">När du skapar en pool kan ange du hello antal compute-noder för hello pool, storlek och hello operativsystem.</span><span class="sxs-lookup"><span data-stu-id="45f30-115">When you create a pool, you specify hello number of compute nodes for hello pool, their size, and hello operating system.</span></span> <span data-ttu-id="45f30-116">När varje aktivitet i ditt jobb körs, tilldelas tooexecute på en av noderna hello i din pool.</span><span class="sxs-lookup"><span data-stu-id="45f30-116">When each task in your job runs, it's assigned tooexecute on one of hello nodes in your pool.</span></span>
4. <span data-ttu-id="45f30-117">Skapa ett [jobb](#job).</span><span class="sxs-lookup"><span data-stu-id="45f30-117">Create a [job](#job).</span></span> <span data-ttu-id="45f30-118">Ett jobb hanterar en samling aktiviteter.</span><span class="sxs-lookup"><span data-stu-id="45f30-118">A job manages a collection of tasks.</span></span> <span data-ttu-id="45f30-119">Du kan associera varje jobb tooa specifika pool där det jobbet aktiviteter körs.</span><span class="sxs-lookup"><span data-stu-id="45f30-119">You associate each job tooa specific pool where that job's tasks will run.</span></span>
5. <span data-ttu-id="45f30-120">Lägg till [uppgifter](#task) toohello jobb.</span><span class="sxs-lookup"><span data-stu-id="45f30-120">Add [tasks](#task) toohello job.</span></span> <span data-ttu-id="45f30-121">Varje aktivitet körs hello program eller skript som du har överfört tooprocess hello datafiler den hämtas från ditt lagringskonto.</span><span class="sxs-lookup"><span data-stu-id="45f30-121">Each task runs hello application or script that you uploaded tooprocess hello data files it downloads from your Storage account.</span></span> <span data-ttu-id="45f30-122">Det kan överföra dess utdata tooAzure lagring som varje aktivitet har slutförts.</span><span class="sxs-lookup"><span data-stu-id="45f30-122">As each task completes, it can upload its output tooAzure Storage.</span></span>
6. <span data-ttu-id="45f30-123">Övervaka jobbförloppet och hämta hello uppgiftens utdata från Azure Storage.</span><span class="sxs-lookup"><span data-stu-id="45f30-123">Monitor job progress and retrieve hello task output from Azure Storage.</span></span>

<span data-ttu-id="45f30-124">hello följande avsnitt beskrivs dessa och hello andra resurser Batch som gör att ditt distribuerade beräkningar scenario.</span><span class="sxs-lookup"><span data-stu-id="45f30-124">hello following sections discuss these and hello other resources of Batch that enable your distributed computational scenario.</span></span>

> [!NOTE]
> <span data-ttu-id="45f30-125">Du behöver en [Batchkontot](#account) toouse hello Batch-tjänsten.</span><span class="sxs-lookup"><span data-stu-id="45f30-125">You need a [Batch account](#account) toouse hello Batch service.</span></span> <span data-ttu-id="45f30-126">De flesta Batch-lösningar använder ett [Azure Storage][azure_storage]-konto för fillagring och filhämtning.</span><span class="sxs-lookup"><span data-stu-id="45f30-126">Most Batch solutions also use an [Azure Storage][azure_storage] account for file storage and retrieval.</span></span> <span data-ttu-id="45f30-127">Batch stöder för närvarande endast hello **allmänna** lagringskontotypen, enligt beskrivningen i steg 5 i [skapa ett lagringskonto](../storage/common/storage-create-storage-account.md#create-a-storage-account) i [om Azure storage-konton](../storage/common/storage-create-storage-account.md).</span><span class="sxs-lookup"><span data-stu-id="45f30-127">Batch currently supports only hello **general-purpose** storage account type, as described in step 5 of [Create a storage account](../storage/common/storage-create-storage-account.md#create-a-storage-account) in [About Azure storage accounts](../storage/common/storage-create-storage-account.md).</span></span>
>
>

## <a name="batch-service-resources"></a><span data-ttu-id="45f30-128">Resurser i Batch-tjänsten</span><span class="sxs-lookup"><span data-stu-id="45f30-128">Batch service resources</span></span>
<span data-ttu-id="45f30-129">Några av följande resurser - konton, hello compute-noder, pooler, jobb och uppgifter – krävs av alla lösningar som använder hello Batch-tjänsten.</span><span class="sxs-lookup"><span data-stu-id="45f30-129">Some of hello following resources--accounts, compute nodes, pools, jobs, and tasks--are required by all solutions that use hello Batch service.</span></span> <span data-ttu-id="45f30-130">Andra, till exempel jobbscheman och programpaket, är användbara men valfria funktioner.</span><span class="sxs-lookup"><span data-stu-id="45f30-130">Others, like job schedules and application packages, are helpful, but optional, features.</span></span>

* [<span data-ttu-id="45f30-131">Konto</span><span class="sxs-lookup"><span data-stu-id="45f30-131">Account</span></span>](#account)
* [<span data-ttu-id="45f30-132">Beräkningsnod</span><span class="sxs-lookup"><span data-stu-id="45f30-132">Compute node</span></span>](#compute-node)
* [<span data-ttu-id="45f30-133">Pool</span><span class="sxs-lookup"><span data-stu-id="45f30-133">Pool</span></span>](#pool)
* [<span data-ttu-id="45f30-134">Jobb</span><span class="sxs-lookup"><span data-stu-id="45f30-134">Job</span></span>](#job)

  * [<span data-ttu-id="45f30-135">Jobbscheman</span><span class="sxs-lookup"><span data-stu-id="45f30-135">Job schedules</span></span>](#scheduled-jobs)
* [<span data-ttu-id="45f30-136">Aktivitet</span><span class="sxs-lookup"><span data-stu-id="45f30-136">Task</span></span>](#task)

  * [<span data-ttu-id="45f30-137">Startaktivitet</span><span class="sxs-lookup"><span data-stu-id="45f30-137">Start task</span></span>](#start-task)
  * [<span data-ttu-id="45f30-138">Job Manager-aktivitet</span><span class="sxs-lookup"><span data-stu-id="45f30-138">Job manager task</span></span>](#job-manager-task)
  * [<span data-ttu-id="45f30-139">Jobbförberedelse- och jobbpubliceringsaktiviteter</span><span class="sxs-lookup"><span data-stu-id="45f30-139">Job preparation and release tasks</span></span>](#job-preparation-and-release-tasks)
  * [<span data-ttu-id="45f30-140">Aktivitet med flera instanser (MPI)</span><span class="sxs-lookup"><span data-stu-id="45f30-140">Multi-instance task (MPI)</span></span>](#multi-instance-tasks)
  * [<span data-ttu-id="45f30-141">Aktivitetsberoenden</span><span class="sxs-lookup"><span data-stu-id="45f30-141">Task dependencies</span></span>](#task-dependencies)
* [<span data-ttu-id="45f30-142">Programpaket</span><span class="sxs-lookup"><span data-stu-id="45f30-142">Application packages</span></span>](#application-packages)

## <a name="account"></a><span data-ttu-id="45f30-143">Konto</span><span class="sxs-lookup"><span data-stu-id="45f30-143">Account</span></span>
<span data-ttu-id="45f30-144">Batch-kontot är ett unikt identifierade entiteten inom hello Batch-tjänsten.</span><span class="sxs-lookup"><span data-stu-id="45f30-144">A Batch account is a uniquely identified entity within hello Batch service.</span></span> <span data-ttu-id="45f30-145">All bearbetning är associerad med ett Batch-konto.</span><span class="sxs-lookup"><span data-stu-id="45f30-145">All processing is associated with a Batch account.</span></span>

<span data-ttu-id="45f30-146">Du kan skapa ett Azure Batch-kontot med hello [Azure-portalen](batch-account-create-portal.md) eller programmässigt, såsom med hello [Batch Management .NET-bibliotek](batch-management-dotnet.md).</span><span class="sxs-lookup"><span data-stu-id="45f30-146">You can create an Azure Batch account using hello [Azure portal](batch-account-create-portal.md) or programmatically, such as with hello [Batch Management .NET library](batch-management-dotnet.md).</span></span> <span data-ttu-id="45f30-147">När du skapar hello konto, kan du associera ett Azure storage-konto.</span><span class="sxs-lookup"><span data-stu-id="45f30-147">When creating hello account, you can associate an Azure storage account.</span></span>

### <a name="pool-allocation-mode"></a><span data-ttu-id="45f30-148">Poolallokeringsläge</span><span class="sxs-lookup"><span data-stu-id="45f30-148">Pool allocation mode</span></span>

<span data-ttu-id="45f30-149">När du skapar ett Batch-konto kan du ange hur [pooler](#pool) med beräkningsnoder ska allokeras.</span><span class="sxs-lookup"><span data-stu-id="45f30-149">When you create a Batch account, you can specify how [pools](#pool) of compute nodes are allocated.</span></span> <span data-ttu-id="45f30-150">Du kan välja tooallocate pooler för compute-noder i en prenumeration som hanteras av Azure Batch eller kan du tilldela dem i din egen prenumeration.</span><span class="sxs-lookup"><span data-stu-id="45f30-150">You can choose tooallocate pools of compute nodes in a subscription managed by Azure Batch, or you can allocate them in your own subscription.</span></span> <span data-ttu-id="45f30-151">Hej *pool allokering läge* bestämmer egenskapen för hello konto där pooler är allokerade.</span><span class="sxs-lookup"><span data-stu-id="45f30-151">hello *pool allocation mode* property for hello account determines where pools are allocated.</span></span> 

<span data-ttu-id="45f30-152">toodecide som poolens fördelning läge toouse Tänk som passar bäst för ditt scenario:</span><span class="sxs-lookup"><span data-stu-id="45f30-152">toodecide which pool allocation mode toouse, consider which best fits your scenario:</span></span>

* <span data-ttu-id="45f30-153">**Batch-tjänsten**: Batch-tjänsten är hello poolen allokering standardläget, pooler allokeras hello bakgrunden i Azure-hanterade prenumerationer.</span><span class="sxs-lookup"><span data-stu-id="45f30-153">**Batch Service**: Batch Service is hello default pool allocation mode, in which pools are allocated behind hello scenes in Azure-managed subscriptions.</span></span> <span data-ttu-id="45f30-154">Tänk på dessa huvudpunkter om hello Batch-tjänsten poolen allokering läge:</span><span class="sxs-lookup"><span data-stu-id="45f30-154">Keep in mind these key points about hello Batch Service pool allocation mode:</span></span>

    - <span data-ttu-id="45f30-155">hello Batch-tjänsten poolen allokering läge stöder både molntjänster och virtuella pooler.</span><span class="sxs-lookup"><span data-stu-id="45f30-155">hello Batch Service pool allocation mode supports both Cloud Service and Virtual Machine pools.</span></span>
    - <span data-ttu-id="45f30-156">hello Batch-tjänsten poolen allokering läge stöder både delad nyckelautentisering eller [Azure Active Directory-autentisering](batch-aad-auth.md) (Azure AD).</span><span class="sxs-lookup"><span data-stu-id="45f30-156">hello Batch Service pool allocation mode supports both shared key authentication or [Azure Active Directory authentication](batch-aad-auth.md) (Azure AD).</span></span> 
    - <span data-ttu-id="45f30-157">Du kan använda antingen dedikerade eller låg prioritet compute-noder i pooler allokerade med hello Batch-tjänsten poolen allokering läge.</span><span class="sxs-lookup"><span data-stu-id="45f30-157">You can use either dedicated or low-priority compute nodes in pools allocated with hello Batch Service pool allocation mode.</span></span>
    - <span data-ttu-id="45f30-158">Använd inte hello Batch-tjänsten poolen allokering läge om du planerar toocreate virtuella Azure-datorn pooler från anpassade VM-avbildningar, eller om du planerar toouse ett virtuellt nätverk.</span><span class="sxs-lookup"><span data-stu-id="45f30-158">Do not use hello Batch Service pool allocation mode if you plan toocreate Azure virtual machine pools from custom VM images, or if you plan toouse a virtual network.</span></span> <span data-ttu-id="45f30-159">Skapa ditt konto med hello användarens prenumeration poolen allokering läge i stället.</span><span class="sxs-lookup"><span data-stu-id="45f30-159">Create your account with hello User Subscription pool allocation mode instead.</span></span>
    - <span data-ttu-id="45f30-160">Virtuella pooler etablerad på ett konto som har skapats med hello Batch-tjänsten poolen allokering läge måste skapas från [Azure virtuella datorer Marketplace] [ vm_marketplace] bilder.</span><span class="sxs-lookup"><span data-stu-id="45f30-160">Virtual Machine pools provisioned in an account created with hello Batch Service pool allocation mode must be created from [Azure Virtual Machines Marketplace][vm_marketplace] images.</span></span>

* <span data-ttu-id="45f30-161">**Användarens prenumeration**: med hello användarens prenumeration poolen allokering läge tilldelas Batch-pooler i hello Azure-prenumeration där hello kontot skapas.</span><span class="sxs-lookup"><span data-stu-id="45f30-161">**User subscription**: With hello User Subscription pool allocation mode, Batch pools are allocated in hello Azure subscription where hello account is created.</span></span> <span data-ttu-id="45f30-162">Tänk på dessa huvudpunkter om hello användarens prenumeration poolen allokering läge:</span><span class="sxs-lookup"><span data-stu-id="45f30-162">Keep in mind these key points about hello User Subscription pool allocation mode:</span></span>
     
    - <span data-ttu-id="45f30-163">hello användarens prenumeration poolen allokering läge stöder bara virtuella pooler.</span><span class="sxs-lookup"><span data-stu-id="45f30-163">hello User Subscription pool allocation mode supports only Virtual Machine pools.</span></span> <span data-ttu-id="45f30-164">Den stöder inte Cloud Services-pooler.</span><span class="sxs-lookup"><span data-stu-id="45f30-164">It does not support Cloud Services pools.</span></span>
    - <span data-ttu-id="45f30-165">toocreate virtuella pooler från anpassade VM-avbildningar eller toouse ett virtuellt nätverk med pooler med virtuella datorer, måste du använda hello användarens prenumeration poolen allokering läge.</span><span class="sxs-lookup"><span data-stu-id="45f30-165">toocreate Virtual Machine pools from custom VM images or toouse a virtual network with Virtual Machine pools, you must use hello User Subscription pool allocation mode.</span></span>  
    - <span data-ttu-id="45f30-166">Du måste använda [Azure Active Directory-autentisering](batch-aad-auth.md) med pooler som har allokerats i hello användaren prenumerationen.</span><span class="sxs-lookup"><span data-stu-id="45f30-166">You must use [Azure Active Directory authentication](batch-aad-auth.md) with pools that are allocated in hello user subscription.</span></span> 
    - <span data-ttu-id="45f30-167">Du måste ställa in en Azure key vault för Batch-kontot om hello poolen allokering läget är inställt tooUser prenumeration.</span><span class="sxs-lookup"><span data-stu-id="45f30-167">You must set up an Azure key vault for your Batch account if hello pool allocation mode is set tooUser Subscription.</span></span> 
    - <span data-ttu-id="45f30-168">Du kan använda endast dedikerade compute-noder i pooler i ett konto som har skapats med hello användarens prenumeration poolen allokering läge.</span><span class="sxs-lookup"><span data-stu-id="45f30-168">You can use only dedicated compute nodes in pools in an account created with hello User Subscription pool allocation mode.</span></span> <span data-ttu-id="45f30-169">Noder med låg prioritet stöds inte.</span><span class="sxs-lookup"><span data-stu-id="45f30-169">Low-priority nodes are not supported.</span></span>
    - <span data-ttu-id="45f30-170">Virtuella pooler etablerad på ett konto med hello användarens prenumeration poolen allokering läge kan skapas från [Azure virtuella datorer Marketplace] [ vm_marketplace] bilder eller från anpassade bilder som du Ange.</span><span class="sxs-lookup"><span data-stu-id="45f30-170">Virtual Machine pools provisioned in an account with hello User Subscription pool allocation mode can be created either from [Azure Virtual Machines Marketplace][vm_marketplace] images, or from custom images that you provide.</span></span>

<span data-ttu-id="45f30-171">hello följande tabell jämförs hello Batch-tjänsten och användarens prenumeration poolen allokering lägen.</span><span class="sxs-lookup"><span data-stu-id="45f30-171">hello following table compares hello Batch Service and User Subscription pool allocation modes.</span></span>

| <span data-ttu-id="45f30-172">**Poolallokeringsläge**</span><span class="sxs-lookup"><span data-stu-id="45f30-172">**Pool allocation mode**</span></span>                 | <span data-ttu-id="45f30-173">**Batch-tjänst**</span><span class="sxs-lookup"><span data-stu-id="45f30-173">**Batch Service**</span></span>                                                                                       | <span data-ttu-id="45f30-174">**Användarprenumeration**</span><span class="sxs-lookup"><span data-stu-id="45f30-174">**User Subscription**</span></span>                                                              |
|-------------------------------------------|---------------------------------------------------------------------------------------------------------|------------------------------------------------------------------------------------|
| <span data-ttu-id="45f30-175">**Pooler allokeras i**</span><span class="sxs-lookup"><span data-stu-id="45f30-175">**Pools are allocated in**</span></span>               | <span data-ttu-id="45f30-176">En Azure-hanterad prenumeration</span><span class="sxs-lookup"><span data-stu-id="45f30-176">An Azure-managed subscription</span></span>                                                                           | <span data-ttu-id="45f30-177">hello användarens prenumeration i vilka hello Batch-kontot har skapats</span><span class="sxs-lookup"><span data-stu-id="45f30-177">hello user subscription in which hello Batch account is created</span></span>                        |
| <span data-ttu-id="45f30-178">**Konfigurationer som stöds**</span><span class="sxs-lookup"><span data-stu-id="45f30-178">**Supported configurations**</span></span>             | <ul><li><span data-ttu-id="45f30-179">Konfiguration av molntjänst</span><span class="sxs-lookup"><span data-stu-id="45f30-179">Cloud Service Configuration</span></span></li><li><span data-ttu-id="45f30-180">Konfiguration av virtuell dator (Linux och Windows)</span><span class="sxs-lookup"><span data-stu-id="45f30-180">Virtual Machine Configuration (Linux and Windows)</span></span></li></ul> | <ul><li><span data-ttu-id="45f30-181">Konfiguration av virtuell dator (Linux och Windows)</span><span class="sxs-lookup"><span data-stu-id="45f30-181">Virtual Machine Configuration (Linux and Windows)</span></span></li></ul>                |
| <span data-ttu-id="45f30-182">**Virtuella datoravbildningar som stöds**</span><span class="sxs-lookup"><span data-stu-id="45f30-182">**Supported VM images**</span></span>                  | <ul><li><span data-ttu-id="45f30-183">Azure Marketplace-avbildningar</span><span class="sxs-lookup"><span data-stu-id="45f30-183">Azure Marketplace images</span></span></li></ul>                                                              | <ul><li><span data-ttu-id="45f30-184">Azure Marketplace-avbildningar</span><span class="sxs-lookup"><span data-stu-id="45f30-184">Azure Marketplace images</span></span></li><li><span data-ttu-id="45f30-185">Anpassade avbildningar</span><span class="sxs-lookup"><span data-stu-id="45f30-185">Custom images</span></span></li></ul>                   |
| <span data-ttu-id="45f30-186">**Beräkningsnodtyper som stöds**</span><span class="sxs-lookup"><span data-stu-id="45f30-186">**Supported compute node types**</span></span>         | <ul><li><span data-ttu-id="45f30-187">Dedikerade noder</span><span class="sxs-lookup"><span data-stu-id="45f30-187">Dedicated nodes</span></span></li><li><span data-ttu-id="45f30-188">Lågprioriterade virtuella noder</span><span class="sxs-lookup"><span data-stu-id="45f30-188">Low-priority nodes</span></span></li></ul>                                            | <ul><li><span data-ttu-id="45f30-189">Dedikerade noder</span><span class="sxs-lookup"><span data-stu-id="45f30-189">Dedicated nodes</span></span></li></ul>                                                  |
| <span data-ttu-id="45f30-190">**Autentisering som stöds**</span><span class="sxs-lookup"><span data-stu-id="45f30-190">**Supported authentication**</span></span>             | <ul><li><span data-ttu-id="45f30-191">Delad nyckel</span><span class="sxs-lookup"><span data-stu-id="45f30-191">Shared Key</span></span></li><li><span data-ttu-id="45f30-192">Azure AD</span><span class="sxs-lookup"><span data-stu-id="45f30-192">Azure AD</span></span></li></ul>                                                           | <ul><li><span data-ttu-id="45f30-193">Azure AD</span><span class="sxs-lookup"><span data-stu-id="45f30-193">Azure AD</span></span></li></ul>                                                         |
| <span data-ttu-id="45f30-194">**Azure Key Vault krävs**</span><span class="sxs-lookup"><span data-stu-id="45f30-194">**Azure Key Vault required**</span></span>             | <span data-ttu-id="45f30-195">Nej</span><span class="sxs-lookup"><span data-stu-id="45f30-195">No</span></span>                                                                                                      | <span data-ttu-id="45f30-196">Ja</span><span class="sxs-lookup"><span data-stu-id="45f30-196">Yes</span></span>                                                                                |
| <span data-ttu-id="45f30-197">**Kärnkvot**</span><span class="sxs-lookup"><span data-stu-id="45f30-197">**Core quota**</span></span>                           | <span data-ttu-id="45f30-198">Bestäms av Batch-kärnkvoten</span><span class="sxs-lookup"><span data-stu-id="45f30-198">Determined by Batch core quota</span></span>                                                                          | <span data-ttu-id="45f30-199">Bestäms av prenumerationens kärnkvot</span><span class="sxs-lookup"><span data-stu-id="45f30-199">Determined by subscription core quota</span></span>                                              |
| <span data-ttu-id="45f30-200">**Stöd för Azure Virtual Network (Vnet)**</span><span class="sxs-lookup"><span data-stu-id="45f30-200">**Azure Virtual Network (Vnet) support**</span></span> | <span data-ttu-id="45f30-201">Pooler som har skapats med hello molnet tjänstkonfiguration</span><span class="sxs-lookup"><span data-stu-id="45f30-201">Pools created with hello Cloud Service Configuration</span></span>                                                      | <span data-ttu-id="45f30-202">Pooler som har skapats med hello konfiguration av virtuell dator</span><span class="sxs-lookup"><span data-stu-id="45f30-202">Pools created with hello Virtual Machine Configuration</span></span>                               |
| <span data-ttu-id="45f30-203">**Vnet-distributionsmodell som stöds**</span><span class="sxs-lookup"><span data-stu-id="45f30-203">**Vnet deployment model supported**</span></span>      | <span data-ttu-id="45f30-204">Vnet som skapats med klassisk distributionsmodell</span><span class="sxs-lookup"><span data-stu-id="45f30-204">Vnets created with classic deployment model</span></span>                                                             | <span data-ttu-id="45f30-205">Vnet som skapats med hello klassiska distributionsmodellen eller Azure Resource Manager</span><span class="sxs-lookup"><span data-stu-id="45f30-205">Vnets created with either hello classic deployment model or Azure   Resource Manager</span></span> |

## <a name="azure-storage-account"></a><span data-ttu-id="45f30-206">Azure-lagringskonto</span><span class="sxs-lookup"><span data-stu-id="45f30-206">Azure Storage account</span></span>

<span data-ttu-id="45f30-207">De flesta Batch-lösningar använder Azure Storage för lagring av resursfiler och utdatafiler.</span><span class="sxs-lookup"><span data-stu-id="45f30-207">Most Batch solutions use Azure Storage for storing resource files and output files.</span></span>  

<span data-ttu-id="45f30-208">Batch stöder för närvarande endast hello allmänna lagringskontotypen, enligt beskrivningen i steg 5 i [skapa ett lagringskonto](../storage/common/storage-create-storage-account.md#create-a-storage-account) i [om Azure storage-konton](../storage/common/storage-create-storage-account.md).</span><span class="sxs-lookup"><span data-stu-id="45f30-208">Batch currently supports only hello general-purpose storage account type, as described in step 5 of [Create a storage account](../storage/common/storage-create-storage-account.md#create-a-storage-account) in [About Azure storage accounts](../storage/common/storage-create-storage-account.md).</span></span> <span data-ttu-id="45f30-209">Batch-aktiviteterna (inklusive standardaktiviteter, startaktiviteter, jobbförberedelse- och jobbpubliceringsaktiviteter) måste definiera resursfiler som finns i allmänna lagringskonton.</span><span class="sxs-lookup"><span data-stu-id="45f30-209">Your Batch tasks (including standard tasks, start tasks, job preparation tasks, and job release tasks) must specify resource files that reside in general-purpose storage accounts.</span></span>


## <a name="compute-node"></a><span data-ttu-id="45f30-210">Beräkningsnod</span><span class="sxs-lookup"><span data-stu-id="45f30-210">Compute node</span></span>
<span data-ttu-id="45f30-211">En beräkningsnod är en virtuell Azure-dator (VM) eller en molntjänst för virtuell dator som är dedikerad tooprocessing en del av programmets arbetsbelastning.</span><span class="sxs-lookup"><span data-stu-id="45f30-211">A compute node is an Azure virtual machine (VM) or cloud service VM that is dedicated tooprocessing a portion of your application's workload.</span></span> <span data-ttu-id="45f30-212">hello storleken på en nod avgör hello antalet CPU-kärnor, minneskapacitet och lokala system filstorlek som har allokerats toohello nod.</span><span class="sxs-lookup"><span data-stu-id="45f30-212">hello size of a node determines hello number of CPU cores, memory capacity, and local file system size that is allocated toohello node.</span></span> <span data-ttu-id="45f30-213">Du kan skapa pooler för Windows- eller Linux-noder med hjälp av Azure Cloud Services, bilder från hello [Azure virtuella datorer Marketplace][vm_marketplace], eller anpassade avbildningar som du förbereder.</span><span class="sxs-lookup"><span data-stu-id="45f30-213">You can create pools of Windows or Linux nodes by using Azure Cloud Services, images from hello [Azure Virtual Machines Marketplace][vm_marketplace], or custom images that you prepare.</span></span> <span data-ttu-id="45f30-214">Se följande hello [Pool](#pool) för mer information om dessa alternativ.</span><span class="sxs-lookup"><span data-stu-id="45f30-214">See hello following [Pool](#pool) section for more information on these options.</span></span>

<span data-ttu-id="45f30-215">Noder kan köra alla körbara filer eller skript som stöds av hello operativsystemmiljön hello noden.</span><span class="sxs-lookup"><span data-stu-id="45f30-215">Nodes can run any executable or script that is supported by hello operating system environment of hello node.</span></span> <span data-ttu-id="45f30-216">inklusive \*.exe-, \*.cmd-, \*.bat- och PowerShell-skript för Windows och binär-, shell- och Python-skript för Linux.</span><span class="sxs-lookup"><span data-stu-id="45f30-216">This includes \*.exe, \*.cmd, \*.bat and PowerShell scripts for Windows--and binaries, shell, and Python scripts for Linux.</span></span>

<span data-ttu-id="45f30-217">Alla beräkningsnoder i Batch innehåller också:</span><span class="sxs-lookup"><span data-stu-id="45f30-217">All compute nodes in Batch also include:</span></span>

* <span data-ttu-id="45f30-218">En fördefinierad [mappstruktur](#files-and-directories) och associerade [miljövariabler](#environment-settings-for-tasks) som är tillgängliga som referens för aktiviteterna.</span><span class="sxs-lookup"><span data-stu-id="45f30-218">A standard [folder structure](#files-and-directories) and associated [environment variables](#environment-settings-for-tasks) that are available for reference by tasks.</span></span>
* <span data-ttu-id="45f30-219">**Brandväggen** inställningar som är konfigurerat toocontrol åtkomst.</span><span class="sxs-lookup"><span data-stu-id="45f30-219">**Firewall** settings that are configured toocontrol access.</span></span>
* <span data-ttu-id="45f30-220">[Fjärråtkomst](#connecting-to-compute-nodes) tooboth (Remote Desktop Protocol (RDP)) för Windows och Linux (Secure Shell (SSH))-noder.</span><span class="sxs-lookup"><span data-stu-id="45f30-220">[Remote access](#connecting-to-compute-nodes) tooboth Windows (Remote Desktop Protocol (RDP)) and Linux (Secure Shell (SSH)) nodes.</span></span>

## <a name="pool"></a><span data-ttu-id="45f30-221">Pool</span><span class="sxs-lookup"><span data-stu-id="45f30-221">Pool</span></span>
<span data-ttu-id="45f30-222">En pool är en samling noder som ditt program körs på.</span><span class="sxs-lookup"><span data-stu-id="45f30-222">A pool is a collection of nodes that your application runs on.</span></span> <span data-ttu-id="45f30-223">hello pool kan skapas manuellt av dig eller automatiskt av hello Batch-tjänsten när du anger hello arbete toobe är klar.</span><span class="sxs-lookup"><span data-stu-id="45f30-223">hello pool can be created manually by you, or automatically by hello Batch service when you specify hello work toobe done.</span></span> <span data-ttu-id="45f30-224">Du kan skapa och hantera en pool som uppfyller hello resurskraven för programmet.</span><span class="sxs-lookup"><span data-stu-id="45f30-224">You can create and manage a pool that meets hello resource requirements of your application.</span></span> <span data-ttu-id="45f30-225">En pool kan endast användas av hello Batch-kontot som du skapade.</span><span class="sxs-lookup"><span data-stu-id="45f30-225">A pool can be used only by hello Batch account in which it was created.</span></span> <span data-ttu-id="45f30-226">Ett Batch-konto kan ha mer än en pool.</span><span class="sxs-lookup"><span data-stu-id="45f30-226">A Batch account can have more than one pool.</span></span>

<span data-ttu-id="45f30-227">Azure Batch-pooler bygga på hello core Azure compute-plattformen.</span><span class="sxs-lookup"><span data-stu-id="45f30-227">Azure Batch pools build on top of hello core Azure compute platform.</span></span> <span data-ttu-id="45f30-228">De ger storskaliga allokering, programinstallation, Datadistribution, övervakning av hälsotillstånd och flexibel justering av hello antal datornoderna inom en pool ([skalning](#scaling-compute-resources)).</span><span class="sxs-lookup"><span data-stu-id="45f30-228">They provide large-scale allocation, application installation, data distribution, health monitoring, and flexible adjustment of hello number of compute nodes within a pool ([scaling](#scaling-compute-resources)).</span></span>

<span data-ttu-id="45f30-229">Varje nod läggs tooa pool tilldelas ett unikt namn och IP-adress.</span><span class="sxs-lookup"><span data-stu-id="45f30-229">Every node that is added tooa pool is assigned a unique name and IP address.</span></span> <span data-ttu-id="45f30-230">När en nod tas bort från en pool, ändringar som görs toohello operativsystem eller filer går förlorade och namn och IP-adress släpps för framtida användning.</span><span class="sxs-lookup"><span data-stu-id="45f30-230">When a node is removed from a pool, any changes that are made toohello operating system or files are lost, and its name and IP address are released for future use.</span></span> <span data-ttu-id="45f30-231">När en nod lämnar poolen är dess livslängd över.</span><span class="sxs-lookup"><span data-stu-id="45f30-231">When a node leaves a pool, its lifetime is over.</span></span>

<span data-ttu-id="45f30-232">När du skapar en pool, kan du ange hello följande attribut.</span><span class="sxs-lookup"><span data-stu-id="45f30-232">When you create a pool, you can specify hello following attributes.</span></span> <span data-ttu-id="45f30-233">Vissa inställningar varierar beroende på hello poolen allokering läge hello Batch [konto](#account):</span><span class="sxs-lookup"><span data-stu-id="45f30-233">Some settings differ, depending on hello pool allocation mode of hello Batch [account](#account):</span></span>

- <span data-ttu-id="45f30-234">Beräkningsnodens operativsystem och version</span><span class="sxs-lookup"><span data-stu-id="45f30-234">Compute node operating system and version</span></span>
- <span data-ttu-id="45f30-235">Typ av beräkningsnod och antal målnoder</span><span class="sxs-lookup"><span data-stu-id="45f30-235">Compute node type and target number of nodes</span></span>
- <span data-ttu-id="45f30-236">Storleken på hello compute-noder</span><span class="sxs-lookup"><span data-stu-id="45f30-236">Size of hello compute nodes</span></span>
- <span data-ttu-id="45f30-237">Skalningsprincip</span><span class="sxs-lookup"><span data-stu-id="45f30-237">Scaling policy</span></span>
- <span data-ttu-id="45f30-238">Schemaläggningsprincip för aktiviteter</span><span class="sxs-lookup"><span data-stu-id="45f30-238">Task scheduling policy</span></span>
- <span data-ttu-id="45f30-239">Kommunikationsstatus för beräkningsnoder</span><span class="sxs-lookup"><span data-stu-id="45f30-239">Communication status for compute nodes</span></span>
- <span data-ttu-id="45f30-240">Startaktiviteter för beräkningsnoder</span><span class="sxs-lookup"><span data-stu-id="45f30-240">Start tasks for compute nodes</span></span>
- <span data-ttu-id="45f30-241">Programpaket</span><span class="sxs-lookup"><span data-stu-id="45f30-241">Application packages</span></span>
- <span data-ttu-id="45f30-242">Nätverkskonfiguration</span><span class="sxs-lookup"><span data-stu-id="45f30-242">Network configuration</span></span>

<span data-ttu-id="45f30-243">Dessa inställningar beskrivs mer detaljerat i följande avsnitt hello.</span><span class="sxs-lookup"><span data-stu-id="45f30-243">Each of these settings is described in more detail in hello following sections.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="45f30-244">Batch-konton som skapats med hello Batch-tjänsten poolen allokering läge har en standardkvot som begränsar hello antal kärnor i en Batch-kontot.</span><span class="sxs-lookup"><span data-stu-id="45f30-244">Batch accounts created with hello Batch Service pool allocation mode have a default quota that limits hello number of cores in a Batch account.</span></span> <span data-ttu-id="45f30-245">hello antal kärnor motsvarar toohello antalet compute-noder.</span><span class="sxs-lookup"><span data-stu-id="45f30-245">hello number of cores corresponds toohello number of compute nodes.</span></span> <span data-ttu-id="45f30-246">Du kan hitta hello standard kvoterna och anvisningar om hur för[öka kvoten för en](batch-quota-limit.md#increase-a-quota) i [kvoter och gränser för hello Azure Batch-tjänsten](batch-quota-limit.md).</span><span class="sxs-lookup"><span data-stu-id="45f30-246">You can find hello default quotas and instructions on how too[increase a quota](batch-quota-limit.md#increase-a-quota) in [Quotas and limits for hello Azure Batch service](batch-quota-limit.md).</span></span> <span data-ttu-id="45f30-247">Om din pool inte är uppnå dess mål antalet noder, kanske hello kärnkvot hello orsak.</span><span class="sxs-lookup"><span data-stu-id="45f30-247">If your pool is not achieving its target number of nodes, hello core quota might be hello reason.</span></span>
>
><span data-ttu-id="45f30-248">Batch-konton som skapats med hello användarens prenumeration poolen allokering läge Följ inte hello Batch-tjänsten kvoter.</span><span class="sxs-lookup"><span data-stu-id="45f30-248">Batch accounts created with hello User Subscription pool allocation mode do not observe hello Batch service quotas.</span></span> <span data-ttu-id="45f30-249">I stället de delar i hello kärnkvot för hello angivna prenumerationen.</span><span class="sxs-lookup"><span data-stu-id="45f30-249">Instead, they share in hello core quota for hello specified subscription.</span></span> <span data-ttu-id="45f30-250">Mer information finns i [Virtual Machines limits](../azure-subscription-service-limits.md#virtual-machines-limits) (Gränser för virtuella datorer) i [Azure subscription and service limits, quotas, and constraints](../azure-subscription-service-limits.md) (Prenumerations- och tjänstgränser, kvoter och begränsningar i Azure).</span><span class="sxs-lookup"><span data-stu-id="45f30-250">For more information, see [Virtual Machines limits](../azure-subscription-service-limits.md#virtual-machines-limits) in [Azure subscription and service limits, quotas, and constraints](../azure-subscription-service-limits.md).</span></span>
>
>

### <a name="compute-node-operating-system-and-version"></a><span data-ttu-id="45f30-251">Beräkningsnodens operativsystem och version</span><span class="sxs-lookup"><span data-stu-id="45f30-251">Compute node operating system and version</span></span>

<span data-ttu-id="45f30-252">När du skapar en Batch-pool kan ange du hello Azure virtuella datorkonfigurationen och hello typ av operativsystem som du vill använda toorun på varje beräkningsnod i poolen hello.</span><span class="sxs-lookup"><span data-stu-id="45f30-252">When you create a Batch pool, you can specify hello Azure virtual machine configuration and hello type of operating system you want toorun on each compute node in hello pool.</span></span> <span data-ttu-id="45f30-253">hello två typer av konfigurationer som är tillgängliga i Batch är:</span><span class="sxs-lookup"><span data-stu-id="45f30-253">hello two types of configurations available in Batch are:</span></span>

- <span data-ttu-id="45f30-254">Hej **konfiguration av virtuell dator**, vilket innebär att hello poolen består av virtuella Azure-datorer.</span><span class="sxs-lookup"><span data-stu-id="45f30-254">hello **Virtual Machine Configuration**, which specifies that hello pool is comprised of Azure virtual machines.</span></span> <span data-ttu-id="45f30-255">Dessa virtuella datorer kan skapas från Linux- eller Windows-avbildningar.</span><span class="sxs-lookup"><span data-stu-id="45f30-255">These VMs may be created from either Linux or Windows images.</span></span> 

    <span data-ttu-id="45f30-256">När du skapa en pool som baseras på hello konfiguration av virtuell dator måste du ange inte bara hello storlek hello noder och hello källa för hello bilder används toocreate dem, utan även hello **virtuella bildreferens** och hello Batch **nod agent SKU** toobe har installerats på hello noder.</span><span class="sxs-lookup"><span data-stu-id="45f30-256">When you create a pool based on hello Virtual Machine Configuration, you must specify not only hello size of hello nodes and hello source of hello images used toocreate them, but also hello **virtual machine image reference** and hello Batch **node agent SKU** toobe installed on hello nodes.</span></span> <span data-ttu-id="45f30-257">Mer information om hur du anger dessa poolegenskaper finns i [Etablera Linux-beräkningsnoder i Azure Batch-pooler](batch-linux-nodes.md).</span><span class="sxs-lookup"><span data-stu-id="45f30-257">For more information about specifying these pool properties, see [Provision Linux compute nodes in Azure Batch pools](batch-linux-nodes.md).</span></span>

- <span data-ttu-id="45f30-258">Hej **Cloud Services-konfiguration**, vilket innebär att hello poolen består av Azure Cloud Services noder.</span><span class="sxs-lookup"><span data-stu-id="45f30-258">hello **Cloud Services Configuration**, which specifies that hello pool is comprised of Azure Cloud Services nodes.</span></span> <span data-ttu-id="45f30-259">Cloud Services tillhandahåller *endast* Windows-beräkningsnoder.</span><span class="sxs-lookup"><span data-stu-id="45f30-259">Cloud Services provide Windows compute nodes *only*.</span></span>

    <span data-ttu-id="45f30-260">Tillgängliga operativsystem för pooler Cloud Services-konfiguration visas i hello [Azure gäst-OS-versioner och SDK-kompatibilitetsmatris](../cloud-services/cloud-services-guestos-update-matrix.md).</span><span class="sxs-lookup"><span data-stu-id="45f30-260">Available operating systems for Cloud Services Configuration pools are listed in hello [Azure Guest OS releases and SDK compatibility matrix](../cloud-services/cloud-services-guestos-update-matrix.md).</span></span> <span data-ttu-id="45f30-261">När du skapar en pool som innehåller Cloud Services noder måste toospecify hello nodstorlek och dess *OS-familjen*.</span><span class="sxs-lookup"><span data-stu-id="45f30-261">When you create a pool that contains Cloud Services nodes, you need toospecify hello node size and its *OS Family*.</span></span> <span data-ttu-id="45f30-262">Molntjänster är distribuerade tooAzure snabbare än virtuella datorer som kör Windows.</span><span class="sxs-lookup"><span data-stu-id="45f30-262">Cloud Services are deployed tooAzure more quickly than virtual machines running Windows.</span></span> <span data-ttu-id="45f30-263">Om du vill ha pooler med Windows-beräkningsnoder får du bättre distributionstid med Cloud Services.</span><span class="sxs-lookup"><span data-stu-id="45f30-263">If you want pools of Windows compute nodes, you may find that Cloud Services provide a performance benefit in terms of deployment time.</span></span>

    * <span data-ttu-id="45f30-264">Hej *OS-familjen* avgör också vilka versioner av .NET installeras med hello OS.</span><span class="sxs-lookup"><span data-stu-id="45f30-264">hello *OS Family* also determines which versions of .NET are installed with hello OS.</span></span>
    * <span data-ttu-id="45f30-265">Som med arbetsroller i Cloud Services, kan du ange en *OS-Version* (Mer information om arbetsroller finns hello [berätta om molntjänster](../cloud-services/cloud-services-choose-me.md#tell-me-about-cloud-services) avsnitt i hello [molntjänster Översikt över](../cloud-services/cloud-services-choose-me.md)).</span><span class="sxs-lookup"><span data-stu-id="45f30-265">As with worker roles within Cloud Services, you can specify an *OS Version* (for more information on worker roles, see hello [Tell me about cloud services](../cloud-services/cloud-services-choose-me.md#tell-me-about-cloud-services) section in hello [Cloud Services overview](../cloud-services/cloud-services-choose-me.md)).</span></span>
    * <span data-ttu-id="45f30-266">Som med arbetsroller, rekommenderar vi att du anger `*` för hello *OS-Version* så att hello noder uppgraderas automatiskt och det finns inga arbetet som krävs för toocater toonewly publicerat versioner.</span><span class="sxs-lookup"><span data-stu-id="45f30-266">As with worker roles, we recommend that you specify `*` for hello *OS Version* so that hello nodes are automatically upgraded, and there is no work required toocater toonewly released versions.</span></span> <span data-ttu-id="45f30-267">hello primära användningsfall för att välja en viss OS-version är tooensure programkompatibilitet, vilket gör att bakåtkompatibilitet tester toobe utförs innan hello version toobe uppdateras.</span><span class="sxs-lookup"><span data-stu-id="45f30-267">hello primary use case for selecting a specific OS version is tooensure application compatibility, which allows backward compatibility testing toobe performed before allowing hello version toobe updated.</span></span> <span data-ttu-id="45f30-268">När valideringen, hello *OS-Version* för hello pool kan uppdateras och hello ny operativsystemsavbildning kan installeras--alla aktiviteter som körs är avbruten och placerats i kö.</span><span class="sxs-lookup"><span data-stu-id="45f30-268">After validation, hello *OS Version* for hello pool can be updated and hello new OS image can be installed--any running tasks are interrupted and requeued.</span></span>

<span data-ttu-id="45f30-269">När du skapar en pool måste tooselect hello lämpliga **nodeAgentSkuId**, beroende på hello OS av hello basavbildning för den virtuella Hårddisken.</span><span class="sxs-lookup"><span data-stu-id="45f30-269">When you create a pool, you need tooselect hello appropriate **nodeAgentSkuId**, depending on hello OS of hello base image of your VHD.</span></span> <span data-ttu-id="45f30-270">Du kan få en mappning av tillgängliga noden agent SKU-ID: n tootheir OS bildreferenser anropa hello [listan stöds nod Agent SKU: er](https://docs.microsoft.com/rest/api/batchservice/list-supported-node-agent-skus) igen.</span><span class="sxs-lookup"><span data-stu-id="45f30-270">You can get a mapping of available node agent SKU ID's tootheir OS Image references by calling hello [List Supported Node Agent SKUs](https://docs.microsoft.com/rest/api/batchservice/list-supported-node-agent-skus) operation.</span></span>

<span data-ttu-id="45f30-271">Se hello [konto](#account) för information om inställningen hello poolen allokering läge när du skapar ett Batch-konto.</span><span class="sxs-lookup"><span data-stu-id="45f30-271">See hello [Account](#account) section for information on setting hello pool allocation mode when you create a Batch account.</span></span>

#### <a name="custom-images-for-virtual-machine-pools"></a><span data-ttu-id="45f30-272">Anpassade avbildningar för virtuell datorpooler</span><span class="sxs-lookup"><span data-stu-id="45f30-272">Custom images for Virtual Machine pools</span></span>

<span data-ttu-id="45f30-273">toouse skapa en anpassad avbildning tooprovision virtuella pooler Batch-kontot med hello användarens prenumeration poolen allokering läge.</span><span class="sxs-lookup"><span data-stu-id="45f30-273">toouse a custom image tooprovision Virtual Machine pools, create your Batch account with hello User Subscription pool allocation mode.</span></span> <span data-ttu-id="45f30-274">Med det här läget allokeras Batch pooler till hello prenumeration där hello kontot finns.</span><span class="sxs-lookup"><span data-stu-id="45f30-274">With this mode, Batch pools are allocated into hello subscription where hello account resides.</span></span> <span data-ttu-id="45f30-275">Se hello [konto](#account) för information om inställningen hello poolen allokering läge när du skapar ett Batch-konto.</span><span class="sxs-lookup"><span data-stu-id="45f30-275">See hello [Account](#account) section for information on setting hello pool allocation mode when you create a Batch account.</span></span>

<span data-ttu-id="45f30-276">toouse en anpassad avbildning, behöver du tooprepare hello avbildning genom att generalisera den.</span><span class="sxs-lookup"><span data-stu-id="45f30-276">toouse a custom image, you'll need tooprepare hello image by generalizing it.</span></span> <span data-ttu-id="45f30-277">Information om hur du förbereder anpassade Linux-avbildningar från virtuella Azure-datorer finns i [avbilda en toouse virtuella Azure Linux-datorn som en mall](../virtual-machines/linux/capture-image-nodejs.md).</span><span class="sxs-lookup"><span data-stu-id="45f30-277">For information about preparing custom Linux images from Azure VMs, see [Capture an Azure Linux VM toouse as a template](../virtual-machines/linux/capture-image-nodejs.md).</span></span> <span data-ttu-id="45f30-278">Information om förberedelser som anpassade Windows-avbildningar från virtuella Azure-datorer finns i [Create custom VM images with Azure PowerShell](../virtual-machines/windows/tutorial-custom-images.md) (Skapa anpassade avbildningar av en virtuell dator med Azure PowerShell).</span><span class="sxs-lookup"><span data-stu-id="45f30-278">For information about preparing custom Windows images from Azure VMs, see [Create custom VM images with Azure PowerShell](../virtual-machines/windows/tutorial-custom-images.md).</span></span> 

> [!IMPORTANT]
> <span data-ttu-id="45f30-279">När du förbereder den anpassade avbildningen, Kom ihåg hello följande:</span><span class="sxs-lookup"><span data-stu-id="45f30-279">When preparing your custom image, keep in mind hello following:</span></span>
> - <span data-ttu-id="45f30-280">Se till att hello OS basavbildning du använder tooprovision Batch-pooler har inte har någon förinstallerat Azure tillägg, till exempel hello tillägget för anpassat skript.</span><span class="sxs-lookup"><span data-stu-id="45f30-280">Ensure that hello base OS image you use tooprovision your Batch pools does not have any pre-installed Azure extensions, such as hello Custom Script extension.</span></span> <span data-ttu-id="45f30-281">Om hello bilden innehåller ett tillägg för förinstallerade, stöta Azure på problem som distribuerar hello VM.</span><span class="sxs-lookup"><span data-stu-id="45f30-281">If hello image contains a pre-installed extension, Azure may encounter problems deploying hello VM.</span></span>
> - <span data-ttu-id="45f30-282">Se till att hello OS basavbildning du tillhandahålla använder hello temp standardenheten som hello Batch nod agent för närvarande förväntar temp hello-standardenheten.</span><span class="sxs-lookup"><span data-stu-id="45f30-282">Ensure that hello base OS image you provide uses hello default temp drive, as hello Batch node agent currently expects hello default temp drive.</span></span>
>
>

<span data-ttu-id="45f30-283">toocreate poolen konfiguration av virtuell dator med hjälp av en anpassad avbildning, behöver du en eller flera Azure standardlagring konton toostore din anpassade VHD-avbildningar.</span><span class="sxs-lookup"><span data-stu-id="45f30-283">toocreate a Virtual Machine Configuration pool using a custom image, you'll need one or more standard Azure Storage accounts toostore your custom VHD images.</span></span> <span data-ttu-id="45f30-284">Anpassade avbildningar lagras som blobar.</span><span class="sxs-lookup"><span data-stu-id="45f30-284">Custom images are stored as blobs.</span></span> <span data-ttu-id="45f30-285">tooreference dina anpassade bilder när du skapar en adresspool ange hello URI: er för hello anpassad avbildning VHD-blobbar för hello [osDisk](https://docs.microsoft.com/rest/api/batchservice/add-a-pool-to-an-account#bk_osdisk) -egenskapen för hello [virtualMachineConfiguration](https://docs.microsoft.com/rest/api/batchservice/add-a-pool-to-an-account#bk_vmconf) egenskapen.</span><span class="sxs-lookup"><span data-stu-id="45f30-285">tooreference your custom images when you create a pool, specify hello URIs of hello custom image VHD blobs for hello [osDisk](https://docs.microsoft.com/rest/api/batchservice/add-a-pool-to-an-account#bk_osdisk) property of hello [virtualMachineConfiguration](https://docs.microsoft.com/rest/api/batchservice/add-a-pool-to-an-account#bk_vmconf) property.</span></span>

<span data-ttu-id="45f30-286">Kontrollera att dina lagringskonton uppfyller hello följande kriterier:</span><span class="sxs-lookup"><span data-stu-id="45f30-286">Make sure that your storage accounts meet hello following criteria:</span></span>   

- <span data-ttu-id="45f30-287">hello storage-konton som innehåller hello anpassad avbildning VHD-blobbar måste toobe i hello samma prenumeration som hello Batch-kontot (hello användaren prenumeration).</span><span class="sxs-lookup"><span data-stu-id="45f30-287">hello storage accounts containing hello custom image VHD blobs need toobe in hello same subscription as hello Batch account (hello user subscription).</span></span>
- <span data-ttu-id="45f30-288">hello angetts storage-konton måste toobe i hello samma region som hello Batch-kontot.</span><span class="sxs-lookup"><span data-stu-id="45f30-288">hello specified storage accounts need toobe in hello same region as hello Batch account.</span></span>
- <span data-ttu-id="45f30-289">Endast allmänna standardlagringskonton stöds för närvarande.</span><span class="sxs-lookup"><span data-stu-id="45f30-289">Only standard general-purpose storage accounts are currently supported.</span></span> <span data-ttu-id="45f30-290">Azure Premium-lagring stöds i framtida hello.</span><span class="sxs-lookup"><span data-stu-id="45f30-290">Azure Premium storage will be supported in hello future.</span></span>
- <span data-ttu-id="45f30-291">Du kan ange ett lagringskonto med flera blobar för anpassade VHD-avbildningar eller flera lagringskonton som vart och ett har en enskild blob.</span><span class="sxs-lookup"><span data-stu-id="45f30-291">You can specify one storage account with multiple custom VHD blobs or multiple storage accounts each having a single blob.</span></span> <span data-ttu-id="45f30-292">Vi rekommenderar att du toouse flera lagringskonton tooget bättre prestanda.</span><span class="sxs-lookup"><span data-stu-id="45f30-292">We recommend you toouse multiple storage accounts tooget a better performance.</span></span>
- <span data-ttu-id="45f30-293">En unik anpassad avbildning VHD-blobben stöder too40 Linux VM-instanser eller 20 Windows VM-instanser.</span><span class="sxs-lookup"><span data-stu-id="45f30-293">One unique custom image VHD blob can support up too40 Linux VM instances or 20 Windows VM instances.</span></span> <span data-ttu-id="45f30-294">Du behöver toocreate kopior av hello VHD blob toocreate pooler med flera virtuella datorer.</span><span class="sxs-lookup"><span data-stu-id="45f30-294">You will need toocreate copies of hello VHD blob toocreate pools with more VMs.</span></span> <span data-ttu-id="45f30-295">Till exempel en pool med 200 virtuella Windows-datorer måste 10 unika VHD-blobbar angetts för hello **osDisk** egenskapen.</span><span class="sxs-lookup"><span data-stu-id="45f30-295">For example, a pool with 200 Windows VMs needs 10 unique VHD blobs specified for hello **osDisk** property.</span></span>

<span data-ttu-id="45f30-296">toocreate poolen från en anpassad avbildning med hjälp av hello Azure-portalen:</span><span class="sxs-lookup"><span data-stu-id="45f30-296">toocreate a pool from a custom image using hello Azure portal:</span></span>

1. <span data-ttu-id="45f30-297">Navigera tooyour Batch-kontot i hello Azure-portalen.</span><span class="sxs-lookup"><span data-stu-id="45f30-297">Navigate tooyour Batch account in hello Azure portal.</span></span>
2. <span data-ttu-id="45f30-298">På hello **inställningar** bladet, Välj hello **pooler** menyalternativet.</span><span class="sxs-lookup"><span data-stu-id="45f30-298">On hello **Settings** blade, select hello **Pools** menu item.</span></span>
3. <span data-ttu-id="45f30-299">På hello **pooler** bladet, Välj hello **Lägg till** kommandot; hello **Lägg till pool** bladet visas.</span><span class="sxs-lookup"><span data-stu-id="45f30-299">On hello **Pools** blade, select hello **Add** command; hello **Add pool** blade will be displayed.</span></span>
4. <span data-ttu-id="45f30-300">Välj **anpassad bild (Linux/Windows)** från hello **bildtypen** listrutan.</span><span class="sxs-lookup"><span data-stu-id="45f30-300">Select **Custom Image (Linux/Windows)** from hello **Image Type** dropdown.</span></span> <span data-ttu-id="45f30-301">hello portalen visar hello **anpassad bild** väljare.</span><span class="sxs-lookup"><span data-stu-id="45f30-301">hello portal displays hello **Custom Image** picker.</span></span> <span data-ttu-id="45f30-302">Välj en eller flera virtuella hårddiskar från hello samma behållare och klicka på hello **Välj** knappen.</span><span class="sxs-lookup"><span data-stu-id="45f30-302">Choose one or more VHDs from hello same container and click hello **Select** button.</span></span> 
    <span data-ttu-id="45f30-303">Stöd för flera virtuella hårddiskar från olika lagringskonton och olika behållare läggs i hello framtida.</span><span class="sxs-lookup"><span data-stu-id="45f30-303">Support for multiple VHDs from different storage accounts and different containers will be added in hello future.</span></span>
5. <span data-ttu-id="45f30-304">Välj rätt hello **Publisher-erbjudande-Sku** för dina anpassade virtuella hårddiskar, väljer du önskad hello **cachelagring** läge och Fyll i alla hello andra parametrar för hello poolen.</span><span class="sxs-lookup"><span data-stu-id="45f30-304">Select hello correct **Publisher/Offer/Sku** for your custom VHDs, select hello desired **Caching** mode, then fill in all hello other parameters for hello pool.</span></span>
6. <span data-ttu-id="45f30-305">toocheck om poolen är baserad på en anpassad avbildning finns hello **operativsystemet** egenskap i sammanfattningen av hello resurs i hello **Pool** bladet.</span><span class="sxs-lookup"><span data-stu-id="45f30-305">toocheck if a pool is based on a custom image, see hello **Operating System** property in hello resource summary section of hello **Pool** blade.</span></span> <span data-ttu-id="45f30-306">hello-värdet för den här egenskapen ska **anpassad VM-avbildning**.</span><span class="sxs-lookup"><span data-stu-id="45f30-306">hello value of this property should be **Custom VM image**.</span></span>
7. <span data-ttu-id="45f30-307">Alla anpassade virtuella hårddiskar som är associerade med en pool visas på hello poolen **egenskaper** bladet.</span><span class="sxs-lookup"><span data-stu-id="45f30-307">All custom VHDs associated with a pool are displayed on hello pool's **Properties** blade.</span></span>

### <a name="compute-node-type-and-target-number-of-nodes"></a><span data-ttu-id="45f30-308">Typ av beräkningsnod och antal målnoder</span><span class="sxs-lookup"><span data-stu-id="45f30-308">Compute node type and target number of nodes</span></span>

<span data-ttu-id="45f30-309">När du skapar en pool, kan du ange vilka typer av compute-noder och du vill hello målnumret för varje.</span><span class="sxs-lookup"><span data-stu-id="45f30-309">When you create a pool, you can specify which types of compute nodes you want and hello target number for each.</span></span> <span data-ttu-id="45f30-310">hello två typer av beräkningsnoder är:</span><span class="sxs-lookup"><span data-stu-id="45f30-310">hello two types of compute nodes are:</span></span>

- <span data-ttu-id="45f30-311">**Dedikerade beräkningsnoder.**</span><span class="sxs-lookup"><span data-stu-id="45f30-311">**Dedicated compute nodes.**</span></span> <span data-ttu-id="45f30-312">Dedikerade beräkningsnoder är reserverade för dina arbetsbelastningar.</span><span class="sxs-lookup"><span data-stu-id="45f30-312">Dedicated compute nodes are reserved for your workloads.</span></span> <span data-ttu-id="45f30-313">De är dyrare än låg prioritet noder, men de är garanterat toonever avbrytas.</span><span class="sxs-lookup"><span data-stu-id="45f30-313">They are more expensive than low-priority nodes, but they are guaranteed toonever be preempted.</span></span>

- <span data-ttu-id="45f30-314">**Beräkningsnoder med låg prioritet.**</span><span class="sxs-lookup"><span data-stu-id="45f30-314">**Low-priority compute nodes.**</span></span> <span data-ttu-id="45f30-315">Låg prioritet noder utnyttja överflödiga kapacitet i Azure toorun Batch-arbetsbelastningar.</span><span class="sxs-lookup"><span data-stu-id="45f30-315">Low-priority nodes take advantage of surplus capacity in Azure toorun your Batch workloads.</span></span> <span data-ttu-id="45f30-316">Noder med låg prioritet är billigare per timme än dedikerade noder och gör att du kan använda arbetsbelastningar som kräver mycket beräkningskraft.</span><span class="sxs-lookup"><span data-stu-id="45f30-316">Low-priority nodes are less expensive per hour than dedicated nodes, and enable workloads requiring a lot of compute power.</span></span> <span data-ttu-id="45f30-317">Mer information finns i [Use low-priority VMs with Batch](batch-low-pri-vms.md) (Använda virtuella datorer med låg prioritet med Batch).</span><span class="sxs-lookup"><span data-stu-id="45f30-317">For more information, see [Use low-priority VMs with Batch](batch-low-pri-vms.md).</span></span>

    <span data-ttu-id="45f30-318">Beräkningsnoder med låg prioritet kan avbrytas om det inte finns tillräckligt med överkapacitet.</span><span class="sxs-lookup"><span data-stu-id="45f30-318">Low-priority compute nodes may be preempted when Azure has insufficient surplus capacity.</span></span> <span data-ttu-id="45f30-319">Om en nod frånkopplas när du kör uppgifter, placerats i kö hello uppgifter och kör igen när en beräkningsnod blir tillgänglig igen.</span><span class="sxs-lookup"><span data-stu-id="45f30-319">If a node is preempted while running tasks, hello tasks are requeued and run again once a compute node becomes available again.</span></span> <span data-ttu-id="45f30-320">Låg prioritet noder är ett bra alternativ för arbetsbelastningar där hello tid för slutförande av jobbet är flexibel och hello arbete distribueras över flera noder.</span><span class="sxs-lookup"><span data-stu-id="45f30-320">Low-priority nodes are a good option for workloads where hello job completion time is flexible and hello work is distributed across many nodes.</span></span> <span data-ttu-id="45f30-321">Innan du väljer toouse låg prioritet noder för ditt scenario, se till att allt arbete förlorade på grund av toopreemption kommer att vara minimal och enkelt toorecreate.</span><span class="sxs-lookup"><span data-stu-id="45f30-321">Before you decide toouse low-priority nodes for your scenario, make sure that any work lost due toopreemption will be minimal and easy toorecreate.</span></span>

    <span data-ttu-id="45f30-322">Låg prioritet compute-noderna är bara tillgängligt för Batch-konton som skapats med hello poolen allokering inställd för**Batch-tjänsten**.</span><span class="sxs-lookup"><span data-stu-id="45f30-322">Low-priority compute nodes are available only for Batch accounts created with hello pool allocation mode set too**Batch Service**.</span></span>

<span data-ttu-id="45f30-323">Du kan ha både låg prioritet och dedikerad compute-noder i hello samma pool.</span><span class="sxs-lookup"><span data-stu-id="45f30-323">You can have both low-priority and dedicated compute nodes in hello same pool.</span></span> <span data-ttu-id="45f30-324">Varje typ av noden &mdash; låg prioritet och dedikerad &mdash; har sin egen mål-inställning som du kan ange hello önskad antalet noder.</span><span class="sxs-lookup"><span data-stu-id="45f30-324">Each type of node &mdash; low-priority and dedicated &mdash; has its own target setting, for which you can specify hello desired number of nodes.</span></span> 
    
<span data-ttu-id="45f30-325">hello antalet datornoderna är refererad tooas en *mål* eftersom din pool inte kan i vissa situationer kan nå hello önskad antalet noder.</span><span class="sxs-lookup"><span data-stu-id="45f30-325">hello number of compute nodes is referred tooas a *target* because, in some situations, your pool might not reach hello desired number of nodes.</span></span> <span data-ttu-id="45f30-326">Till exempel en pool kanske inte får hello mål om den når hello [kärnkvot](batch-quota-limit.md) för ditt konto först.</span><span class="sxs-lookup"><span data-stu-id="45f30-326">For example, a pool might not achieve hello target if it reaches hello [core quota](batch-quota-limit.md) for your Batch account first.</span></span> <span data-ttu-id="45f30-327">Eller hello poolen kanske inte får hello mål om du har använt en automatisk skalning formeln toohello pool som begränsar hello maximalt antal noder.</span><span class="sxs-lookup"><span data-stu-id="45f30-327">Or, hello pool might not achieve hello target if you have applied an auto-scaling formula toohello pool that limits hello maximum number of nodes.</span></span>

<span data-ttu-id="45f30-328">Information om priser för beräkningsnoder med låg prioritet och dedikerade beräkningsnoder finns i [Batch-priser](https://azure.microsoft.com/pricing/details/batch/).</span><span class="sxs-lookup"><span data-stu-id="45f30-328">For pricing information for both low-priority and dedicated compute nodes, see [Batch Pricing](https://azure.microsoft.com/pricing/details/batch/).</span></span>

### <a name="size-of-hello-compute-nodes"></a><span data-ttu-id="45f30-329">Storleken på hello compute-noder</span><span class="sxs-lookup"><span data-stu-id="45f30-329">Size of hello compute nodes</span></span>

<span data-ttu-id="45f30-330">Information om storleken på beräkningsnoder med **Cloud Services-konfiguration** finns i [Storlekar för Cloud Services](../cloud-services/cloud-services-sizes-specs.md).</span><span class="sxs-lookup"><span data-stu-id="45f30-330">**Cloud Services Configuration** compute node sizes are listed in [Sizes for Cloud Services](../cloud-services/cloud-services-sizes-specs.md).</span></span> <span data-ttu-id="45f30-331">Batch stöder alla Cloud Services-storlekar utom `ExtraSmall`, `STANDARD_A1_V2` och `STANDARD_A2_V2`.</span><span class="sxs-lookup"><span data-stu-id="45f30-331">Batch supports all Cloud Services sizes except `ExtraSmall`, `STANDARD_A1_V2`, and `STANDARD_A2_V2`.</span></span>

<span data-ttu-id="45f30-332">Information om storleken på beräkningsnoder med **VM-konfiguration** finns i [Storlekar för virtuella datorer i Azure](../virtual-machines/linux/sizes.md) (Linux) och [Storlekar för virtuella datorer i Azure](../virtual-machines/windows/sizes.md) (Windows).</span><span class="sxs-lookup"><span data-stu-id="45f30-332">**Virtual Machine Configuration** compute node sizes are listed in [Sizes for virtual machines in Azure](../virtual-machines/linux/sizes.md) (Linux) and [Sizes for virtual machines in Azure](../virtual-machines/windows/sizes.md) (Windows).</span></span> <span data-ttu-id="45f30-333">Batch har stöd för alla storlekar för virtuella datorer i Azure utom `STANDARD_A0` och de med Premium Storage (`STANDARD_GS`, `STANDARD_DS`- och `STANDARD_DSV2`-serien).</span><span class="sxs-lookup"><span data-stu-id="45f30-333">Batch supports all Azure VM sizes except `STANDARD_A0` and those with premium storage (`STANDARD_GS`, `STANDARD_DS`, and `STANDARD_DSV2` series).</span></span>

<span data-ttu-id="45f30-334">När du väljer en storlek för compute-nod, Överväg hello egenskaper och krav för hello-program som du kör på hello noder.</span><span class="sxs-lookup"><span data-stu-id="45f30-334">When selecting a compute node size, consider hello characteristics and requirements of hello applications you'll run on hello nodes.</span></span> <span data-ttu-id="45f30-335">Aspekter som om programmet hello är flertrådade och hur mycket minne som den förbrukar hjälper dig att bestämma hello mest lämplig och kostnadseffektiv nodstorlek.</span><span class="sxs-lookup"><span data-stu-id="45f30-335">Aspects like whether hello application is multithreaded and how much memory it consumes can help determine hello most suitable and cost-effective node size.</span></span> <span data-ttu-id="45f30-336">Det är typiska tooselect en nodstorlek förutsatt att en aktivitet ska köras på en nod i taget.</span><span class="sxs-lookup"><span data-stu-id="45f30-336">It's typical tooselect a node size assuming one task will run on a node at a time.</span></span> <span data-ttu-id="45f30-337">Det är dock möjligt toohave flera uppgifter (och därför flera instanser av programmet) [körs parallellt](batch-parallel-node-tasks.md) på datornoder under jobbkörningen.</span><span class="sxs-lookup"><span data-stu-id="45f30-337">However, it is possible toohave multiple tasks (and therefore multiple application instances) [run in parallel](batch-parallel-node-tasks.md) on compute nodes during job execution.</span></span> <span data-ttu-id="45f30-338">I det här fallet är det vanliga toochoose större nod storlek tooaccommodate hello ökade behov av parallella aktivitetskörningen.</span><span class="sxs-lookup"><span data-stu-id="45f30-338">In this case, it is common toochoose a larger node size tooaccommodate hello increased demand of parallel task execution.</span></span> <span data-ttu-id="45f30-339">Se [Schemaläggningsprincip](#task-scheduling-policy) för mer information.</span><span class="sxs-lookup"><span data-stu-id="45f30-339">See [Task scheduling policy](#task-scheduling-policy) for more information.</span></span>

<span data-ttu-id="45f30-340">Alla hello noder i en pool är hello samma storlek.</span><span class="sxs-lookup"><span data-stu-id="45f30-340">All of hello nodes in a pool are hello same size.</span></span> <span data-ttu-id="45f30-341">Om du planerar toorun program med olika systemkrav och/eller läsa in nivåer, rekommenderar vi att du använder separata pooler.</span><span class="sxs-lookup"><span data-stu-id="45f30-341">If you intend toorun applications with differing system requirements and/or load levels, we recommend that you use separate pools.</span></span>

### <a name="scaling-policy"></a><span data-ttu-id="45f30-342">Skalningsprincip</span><span class="sxs-lookup"><span data-stu-id="45f30-342">Scaling policy</span></span>

<span data-ttu-id="45f30-343">För dynamiska arbetsbelastningar, som du kan skriva och använda en [automatisk skalning formeln](#scaling-compute-resources) tooa pool.</span><span class="sxs-lookup"><span data-stu-id="45f30-343">For dynamic workloads, you can write and apply an [auto-scaling formula](#scaling-compute-resources) tooa pool.</span></span> <span data-ttu-id="45f30-344">hello Batch-tjänsten utvärderar formeln regelbundet och justerar hello antalet noder i hello poolen baserat på olika pool, jobb och uppgiftsparametrar som du kan ange.</span><span class="sxs-lookup"><span data-stu-id="45f30-344">hello Batch service periodically evaluates your formula and adjusts hello number of nodes within hello pool based on various pool, job, and task parameters that you can specify.</span></span>

### <a name="task-scheduling-policy"></a><span data-ttu-id="45f30-345">Schemaläggningsprincip för aktiviteter</span><span class="sxs-lookup"><span data-stu-id="45f30-345">Task scheduling policy</span></span>

<span data-ttu-id="45f30-346">Hej [högsta antal uppgifter per nod](batch-parallel-node-tasks.md) konfigurationsalternativet anger hello högsta antalet aktiviteter som körs parallellt på varje beräkningsnod i poolen hello.</span><span class="sxs-lookup"><span data-stu-id="45f30-346">hello [max tasks per node](batch-parallel-node-tasks.md) configuration option determines hello maximum number of tasks that can be run in parallel on each compute node within hello pool.</span></span>

<span data-ttu-id="45f30-347">hello standardkonfigurationen anger att en aktivitet i taget körs på en nod, men det finns scenarier där det är bra toohave två eller fler uppgifter som körs samtidigt på en nod.</span><span class="sxs-lookup"><span data-stu-id="45f30-347">hello default configuration specifies that one task at a time runs on a node, but there are scenarios where it is beneficial toohave two or more tasks executed on a node simultaneously.</span></span> <span data-ttu-id="45f30-348">Se hello [Exempelscenario](batch-parallel-node-tasks.md#example-scenario) i hello [samtidiga nod uppgifter](batch-parallel-node-tasks.md) artikel toosee hur du kan dra nytta av flera uppgifter per nod.</span><span class="sxs-lookup"><span data-stu-id="45f30-348">See hello [example scenario](batch-parallel-node-tasks.md#example-scenario) in hello [concurrent node tasks](batch-parallel-node-tasks.md) article toosee how you can benefit from multiple tasks per node.</span></span>

<span data-ttu-id="45f30-349">Du kan också ange en *fyller typen* som anger om Batch sprids hello uppgifter jämnt över alla noder i en pool eller hanteringspaket varje nod med hello maximalt antal uppgifter innan du tilldelar aktiviteter tooanother nod.</span><span class="sxs-lookup"><span data-stu-id="45f30-349">You can also specify a *fill type* which determines whether Batch spreads hello tasks evenly across all nodes in a pool, or packs each node with hello maximum number of tasks before assigning tasks tooanother node.</span></span>

### <a name="communication-status-for-compute-nodes"></a><span data-ttu-id="45f30-350">Kommunikationsstatus för beräkningsnoder</span><span class="sxs-lookup"><span data-stu-id="45f30-350">Communication status for compute nodes</span></span>

<span data-ttu-id="45f30-351">I de flesta fall uppgifter oberoende och behöver inte toocommunicate med varandra.</span><span class="sxs-lookup"><span data-stu-id="45f30-351">In most scenarios, tasks operate independently and do not need toocommunicate with one another.</span></span> <span data-ttu-id="45f30-352">Det kan dock finnas program där aktiviteterna måste kommunicera (till exempel i [MPI-scenarier](batch-mpi.md)).</span><span class="sxs-lookup"><span data-stu-id="45f30-352">However, there are some applications in which tasks must communicate, like [MPI scenarios](batch-mpi.md).</span></span>

<span data-ttu-id="45f30-353">Du kan konfigurera en pool tooallow **dessa kommunikation**, så att noder i en pool kan kommunicera vid körning.</span><span class="sxs-lookup"><span data-stu-id="45f30-353">You can configure a pool tooallow **internode communication**, so that nodes within a pool can communicate at runtime.</span></span> <span data-ttu-id="45f30-354">När kommunikation mellan noder är aktiverat kan noderna i pooler med Cloud Services-konfiguration kommunicera med varandra på portar som är större än 1100, och pooler med VM-konfiguration begränsar inte trafiken på någon port.</span><span class="sxs-lookup"><span data-stu-id="45f30-354">When internode communication is enabled, nodes in Cloud Services Configuration pools can communicate with each other on ports greater than 1100, and Virtual Machine Configuration pools do not restrict traffic on any port.</span></span>

<span data-ttu-id="45f30-355">Observera att aktivera dessa kommunikation också påverkar hello placeringen av hello noder i kluster och kan begränsa hello maximala antalet noder i en pool på grund av begränsningar i distributionen.</span><span class="sxs-lookup"><span data-stu-id="45f30-355">Note that enabling internode communication also impacts hello placement of hello nodes within clusters and might limit hello maximum number of nodes in a pool because of deployment restrictions.</span></span> <span data-ttu-id="45f30-356">Om ditt program inte kräver kommunikation mellan noder hello Batch-tjänsten kan tilldela ett potentiellt stora antal noder toohello pool från många olika kluster och Datacenter tooenable ökat parallell bearbetning.</span><span class="sxs-lookup"><span data-stu-id="45f30-356">If your application does not require communication between nodes, hello Batch service can allocate a potentially large number of nodes toohello pool from many different clusters and datacenters tooenable increased parallel processing power.</span></span>

### <a name="start-tasks-for-compute-nodes"></a><span data-ttu-id="45f30-357">Startaktiviteter för beräkningsnoder</span><span class="sxs-lookup"><span data-stu-id="45f30-357">Start tasks for compute nodes</span></span>

<span data-ttu-id="45f30-358">hello valfria *aktiviteten starta* körs på varje nod som noden ansluter hello poolen och varje gång en nod startas om eller avbildade.</span><span class="sxs-lookup"><span data-stu-id="45f30-358">hello optional *start task* executes on each node as that node joins hello pool, and each time a node is restarted or reimaged.</span></span> <span data-ttu-id="45f30-359">hello starta aktiviteten är särskilt användbar för att förbereda compute-noder för hello körningen av uppgifter, t.ex. installation hello-program som aktiviteterna körs på hello compute-noder.</span><span class="sxs-lookup"><span data-stu-id="45f30-359">hello start task is especially useful for preparing compute nodes for hello execution of tasks, like installing hello applications that your tasks run on hello compute nodes.</span></span>

### <a name="application-packages"></a><span data-ttu-id="45f30-360">Programpaket</span><span class="sxs-lookup"><span data-stu-id="45f30-360">Application packages</span></span>

<span data-ttu-id="45f30-361">Du kan ange [programpaket](#application-packages) toodeploy toohello compute-noder i hello pool.</span><span class="sxs-lookup"><span data-stu-id="45f30-361">You can specify [application packages](#application-packages) toodeploy toohello compute nodes in hello pool.</span></span> <span data-ttu-id="45f30-362">Programpaket ger förenklad distribution och versionshantering av hello-program som körs i dina uppgifter.</span><span class="sxs-lookup"><span data-stu-id="45f30-362">Application packages provide simplified deployment and versioning of hello applications that your tasks run.</span></span> <span data-ttu-id="45f30-363">Programpaket som du anger för en pool installeras på varje nod som ansluter till den poolen, samt varje gång en nod startas om och varje gång nodens avbildning återställs.</span><span class="sxs-lookup"><span data-stu-id="45f30-363">Application packages that you specify for a pool are installed on every node that joins that pool, and every time a node is rebooted or reimaged.</span></span>

> [!NOTE]
> <span data-ttu-id="45f30-364">Programpaket kan användas för alla Batch-pooler som skapats efter 5 juli 2017.</span><span class="sxs-lookup"><span data-stu-id="45f30-364">Application packages are supported on all Batch pools created after 5 July 2017.</span></span> <span data-ttu-id="45f30-365">De stöds i Batch-adresspooler skapa mellan 10 mars 2016 och 5 juli 2017 om hello poolen har skapats med en tjänst i molnet.</span><span class="sxs-lookup"><span data-stu-id="45f30-365">They are supported on Batch pools created between 10 March 2016 and 5 July 2017 only if hello pool was created using a Cloud Service configuration.</span></span> <span data-ttu-id="45f30-366">Batch-pooler som skapats tidigare too10 mars 2016 stöder inte programpaket.</span><span class="sxs-lookup"><span data-stu-id="45f30-366">Batch pools created prior too10 March 2016 do not support application packages.</span></span> <span data-ttu-id="45f30-367">Mer information om hur du använder programmet paket toodeploy program tooyour Batch noderna, finns [distribuera program toocompute noder med Batch-programpaket](batch-application-packages.md).</span><span class="sxs-lookup"><span data-stu-id="45f30-367">For more information about using application packages toodeploy your applications tooyour Batch nodes, see [Deploy applications toocompute nodes with Batch application packages](batch-application-packages.md).</span></span>
>
>

### <a name="network-configuration"></a><span data-ttu-id="45f30-368">Nätverkskonfiguration</span><span class="sxs-lookup"><span data-stu-id="45f30-368">Network configuration</span></span>

<span data-ttu-id="45f30-369">Du kan ange hello undernätet för ett Azure [virtuella nätverk (VNet)](../virtual-network/virtual-networks-overview.md) i vilka hello poolen beräkning noder ska skapas.</span><span class="sxs-lookup"><span data-stu-id="45f30-369">You can specify hello subnet of an Azure [virtual network (VNet)](../virtual-network/virtual-networks-overview.md) in which hello pool's compute nodes should be created.</span></span> <span data-ttu-id="45f30-370">Se hello [Pool nätverkskonfigurationen](#pool-network-configuration) avsnitt för mer information.</span><span class="sxs-lookup"><span data-stu-id="45f30-370">See hello [Pool network configuration](#pool-network-configuration) section for more information.</span></span>


## <a name="job"></a><span data-ttu-id="45f30-371">Jobb</span><span class="sxs-lookup"><span data-stu-id="45f30-371">Job</span></span>
<span data-ttu-id="45f30-372">Ett jobb är en samling aktiviteter.</span><span class="sxs-lookup"><span data-stu-id="45f30-372">A job is a collection of tasks.</span></span> <span data-ttu-id="45f30-373">Den hanterar hur beräkningar utförs av sina uppgifter på hello beräkningsnoder i poolen.</span><span class="sxs-lookup"><span data-stu-id="45f30-373">It manages how computation is performed by its tasks on hello compute nodes in a pool.</span></span>

* <span data-ttu-id="45f30-374">hello jobb anger hello **pool** i vilka hello arbete är toobe kör.</span><span class="sxs-lookup"><span data-stu-id="45f30-374">hello job specifies hello **pool** in which hello work is toobe run.</span></span> <span data-ttu-id="45f30-375">Du kan skapa en ny pool för varje jobb eller använda en pool för många jobb.</span><span class="sxs-lookup"><span data-stu-id="45f30-375">You can create a new pool for each job, or use one pool for many jobs.</span></span> <span data-ttu-id="45f30-376">Du kan skapa en pool för varje jobb som associeras med ett jobbschema eller för alla jobb som associeras med ett jobbschema.</span><span class="sxs-lookup"><span data-stu-id="45f30-376">You can create a pool for each job that is associated with a job schedule, or for all jobs that are associated with a job schedule.</span></span>
* <span data-ttu-id="45f30-377">Du kan ange en valfri **jobbprioritet**.</span><span class="sxs-lookup"><span data-stu-id="45f30-377">You can specify an optional **job priority**.</span></span> <span data-ttu-id="45f30-378">När ett jobb skickas med högre prioritet än jobb som pågår för tillfället infogas hello uppgifter för hello högre prioritet jobbet i hello kö i uppgifter för hello lägre prioritet jobb.</span><span class="sxs-lookup"><span data-stu-id="45f30-378">When a job is submitted with a higher priority than jobs that are currently in progress, hello tasks for hello higher-priority job are inserted into hello queue ahead of tasks for hello lower-priority jobs.</span></span> <span data-ttu-id="45f30-379">Aktiviteter med lägre prioritet som redan körs avbryts inte.</span><span class="sxs-lookup"><span data-stu-id="45f30-379">Tasks in lower-priority jobs that are already running are not preempted.</span></span>
* <span data-ttu-id="45f30-380">Du kan använda jobbet **begränsningar** toospecify vissa gränser för dina jobb:</span><span class="sxs-lookup"><span data-stu-id="45f30-380">You can use job **constraints** toospecify certain limits for your jobs:</span></span>

    <span data-ttu-id="45f30-381">Du kan ange en **maximala wallclock tid**, så att om ett jobb körs längre än hello maximala wallclock tiden som har angetts, hello jobb och alla dess uppgifter avslutas.</span><span class="sxs-lookup"><span data-stu-id="45f30-381">You can set a **maximum wallclock time**, so that if a job runs for longer than hello maximum wallclock time that is specified, hello job and all of its tasks are terminated.</span></span>

    <span data-ttu-id="45f30-382">Batch kan identifiera och försöka köra aktiviteter som misslyckats igen.</span><span class="sxs-lookup"><span data-stu-id="45f30-382">Batch can detect and then retry failed tasks.</span></span> <span data-ttu-id="45f30-383">Du kan ange hello **maximalt antal återförsök för aktiviteten** som en begränsning, inklusive om en aktivitet är *alltid* eller *aldrig* igen.</span><span class="sxs-lookup"><span data-stu-id="45f30-383">You can specify hello **maximum number of task retries** as a constraint, including whether a task is *always* or *never* retried.</span></span> <span data-ttu-id="45f30-384">Du försöker en aktivitet innebär det hello har placerats i kö toobe kör igen.</span><span class="sxs-lookup"><span data-stu-id="45f30-384">Retrying a task means that hello task is requeued toobe run again.</span></span>
* <span data-ttu-id="45f30-385">Klientprogrammet kan lägga till uppgifter tooa jobb eller ange en [manager projektaktivitet](#job-manager-task).</span><span class="sxs-lookup"><span data-stu-id="45f30-385">Your client application can add tasks tooa job, or you can specify a [job manager task](#job-manager-task).</span></span> <span data-ttu-id="45f30-386">En projektaktivitet manager innehåller hello information som är nödvändiga toocreate hello krävs uppgifter för ett jobb, med hello manager projektaktivitet som körs på en av hello compute-noder i hello pool.</span><span class="sxs-lookup"><span data-stu-id="45f30-386">A job manager task contains hello information that is necessary toocreate hello required tasks for a job, with hello job manager task being run on one of hello compute nodes in hello pool.</span></span> <span data-ttu-id="45f30-387">hello manager projektaktivitet hanteras specifikt efter Batch--den är i kö så snart hello jobbet har skapats och startas om den inte.</span><span class="sxs-lookup"><span data-stu-id="45f30-387">hello job manager task is handled specifically by Batch--it is queued as soon as hello job is created, and is restarted if it fails.</span></span> <span data-ttu-id="45f30-388">En projektaktivitet manager är *krävs* för jobb som har skapats med en [jobbschemat](#scheduled-jobs) eftersom den är hello endast sätt toodefine hello aktiviteter innan hello jobbet instansieras.</span><span class="sxs-lookup"><span data-stu-id="45f30-388">A job manager task is *required* for jobs that are created by a [job schedule](#scheduled-jobs) because it is hello only way toodefine hello tasks before hello job is instantiated.</span></span>
* <span data-ttu-id="45f30-389">Som standard förblir jobb hello aktiv när alla inom hello-jobbet är klart.</span><span class="sxs-lookup"><span data-stu-id="45f30-389">By default, jobs remain in hello active state when all tasks within hello job are complete.</span></span> <span data-ttu-id="45f30-390">Du kan ändra det här problemet så att hello jobb automatiskt avslutas när alla aktiviteter i hello-jobbet har slutförts.</span><span class="sxs-lookup"><span data-stu-id="45f30-390">You can change this behavior so that hello job is automatically terminated when all tasks in hello job are complete.</span></span> <span data-ttu-id="45f30-391">Ange hello jobbet **onAllTasksComplete** egenskap ([OnAllTasksComplete] [ net_onalltaskscomplete] i Batch .NET) för*terminatejob* tooautomatically Avsluta hello jobbet när alla aktiviteter har slutförts hello status.</span><span class="sxs-lookup"><span data-stu-id="45f30-391">Set hello job's **onAllTasksComplete** property ([OnAllTasksComplete][net_onalltaskscomplete] in Batch .NET) too*terminatejob* tooautomatically terminate hello job when all of its tasks are in hello completed state.</span></span>

    <span data-ttu-id="45f30-392">Observera att hello Batch-tjänsten tar hänsyn till ett jobb med *inga* uppgifter toohave alla aktiviteter har slutförts.</span><span class="sxs-lookup"><span data-stu-id="45f30-392">Note that hello Batch service considers a job with *no* tasks toohave all of its tasks completed.</span></span> <span data-ttu-id="45f30-393">Därför används det här alternativet oftast med en [Job Manager-aktivitet](#job-manager-task).</span><span class="sxs-lookup"><span data-stu-id="45f30-393">Therefore, this option is most commonly used with a [job manager task](#job-manager-task).</span></span> <span data-ttu-id="45f30-394">Om du vill toouse automatisk jobbet avslutas utan en jobbhanteraren, bör du först ställa ett nytt jobb **onAllTasksComplete** egenskapen för*noaction*, ställa in den också*terminatejob* förrän du har lagt till uppgifter toohello jobb.</span><span class="sxs-lookup"><span data-stu-id="45f30-394">If you want toouse automatic job termination without a job manager, you should initially set a new job's **onAllTasksComplete** property too*noaction*, then set it too*terminatejob* only after you've finished adding tasks toohello job.</span></span>

### <a name="job-priority"></a><span data-ttu-id="45f30-395">Jobbprioritet</span><span class="sxs-lookup"><span data-stu-id="45f30-395">Job priority</span></span>
<span data-ttu-id="45f30-396">Du kan tilldela en prioritet toojobs som du skapar i batchen.</span><span class="sxs-lookup"><span data-stu-id="45f30-396">You can assign a priority toojobs that you create in Batch.</span></span> <span data-ttu-id="45f30-397">hello Batch-tjänsten används hello prioritetsvärdet hello jobbet toodetermine hello ordningen för schemaläggning av jobb i ett konto (detta är inte förväxlas med toobe en [schemalagt jobb](#scheduled-jobs)).</span><span class="sxs-lookup"><span data-stu-id="45f30-397">hello Batch service uses hello priority value of hello job toodetermine hello order of job scheduling within an account (this is not toobe confused with a [scheduled job](#scheduled-jobs)).</span></span> <span data-ttu-id="45f30-398">hello prioritet värdena variera från-1000 too1000, som hello lägst prioritet och 1000 som hello med-1000 i högsta.</span><span class="sxs-lookup"><span data-stu-id="45f30-398">hello priority values range from -1000 too1000, with -1000 being hello lowest priority and 1000 being hello highest.</span></span> <span data-ttu-id="45f30-399">tooupdate hello prioriteten för ett jobb, anrop hello [uppdatera hello egenskaper för ett jobb] [ rest_update_job] åtgärden (Batch REST) eller ändra hello [CloudJob.Priority] [ net_cloudjob_priority] egenskapen (Batch .NET).</span><span class="sxs-lookup"><span data-stu-id="45f30-399">tooupdate hello priority of a job, call hello [Update hello properties of a job][rest_update_job] operation (Batch REST), or modify hello [CloudJob.Priority][net_cloudjob_priority] property (Batch .NET).</span></span>

<span data-ttu-id="45f30-400">Inom hello samma konto högre prioritet jobb har schemaläggning företräde över jobb med lägre prioritet.</span><span class="sxs-lookup"><span data-stu-id="45f30-400">Within hello same account, higher-priority jobs have scheduling precedence over lower-priority jobs.</span></span> <span data-ttu-id="45f30-401">Ett jobb med ett högre prioritetsvärde i ett konto har inte schemaläggningsprioritet över ett annat jobb med ett lägre prioritetsvärde i ett annat konto.</span><span class="sxs-lookup"><span data-stu-id="45f30-401">A job with a higher-priority value in one account does not have scheduling precedence over another job with a lower-priority value in a different account.</span></span>

<span data-ttu-id="45f30-402">Schemaläggningen av jobb mellan pooler är oberoende av varandra.</span><span class="sxs-lookup"><span data-stu-id="45f30-402">Job scheduling across pools is independent.</span></span> <span data-ttu-id="45f30-403">Mellan olika pooler är det inte säkert att ett jobb med högre prioritet schemaläggs först om dess associerade pool har ont om inaktiva noder.</span><span class="sxs-lookup"><span data-stu-id="45f30-403">Between different pools, it is not guaranteed that a higher-priority job is scheduled first if its associated pool is short of idle nodes.</span></span> <span data-ttu-id="45f30-404">I hello samma pool jobb med hello samma prioritetsnivå har ett lika chans att schemalagda.</span><span class="sxs-lookup"><span data-stu-id="45f30-404">In hello same pool, jobs with hello same priority level have an equal chance of being scheduled.</span></span>

### <a name="scheduled-jobs"></a><span data-ttu-id="45f30-405">Schemalagda jobb</span><span class="sxs-lookup"><span data-stu-id="45f30-405">Scheduled jobs</span></span>
<span data-ttu-id="45f30-406">[Jobbet scheman] [ rest_job_schedules] aktivera toocreate återkommande jobb i hello Batch-tjänsten.</span><span class="sxs-lookup"><span data-stu-id="45f30-406">[Job schedules][rest_job_schedules] enable you toocreate recurring jobs within hello Batch service.</span></span> <span data-ttu-id="45f30-407">Ett Jobbschema anger när toorun jobb och innefattar hello specifikationer för hello jobb toobe kör.</span><span class="sxs-lookup"><span data-stu-id="45f30-407">A job schedule specifies when toorun jobs and includes hello specifications for hello jobs toobe run.</span></span> <span data-ttu-id="45f30-408">Du kan ange hur länge hello varaktighet hello schedule-- och hello schema är aktivt--när och hur ofta jobb skapas under hello schemalagd tid.</span><span class="sxs-lookup"><span data-stu-id="45f30-408">You can specify hello duration of hello schedule--how long and when hello schedule is in effect--and how frequently jobs are created during hello scheduled period.</span></span>

## <a name="task"></a><span data-ttu-id="45f30-409">Aktivitet</span><span class="sxs-lookup"><span data-stu-id="45f30-409">Task</span></span>
<span data-ttu-id="45f30-410">En aktivitet är en beräkningsenhet som associeras med ett jobb.</span><span class="sxs-lookup"><span data-stu-id="45f30-410">A task is a unit of computation that is associated with a job.</span></span> <span data-ttu-id="45f30-411">Den körs på en nod.</span><span class="sxs-lookup"><span data-stu-id="45f30-411">It runs on a node.</span></span> <span data-ttu-id="45f30-412">Aktiviteter tilldelas tooa nod för körning eller köas förrän en nod blir ledig.</span><span class="sxs-lookup"><span data-stu-id="45f30-412">Tasks are assigned tooa node for execution, or are queued until a node becomes free.</span></span> <span data-ttu-id="45f30-413">Placera helt enkelt körs en aktiviteten en eller flera program eller skript på en beräkning nod tooperform hello arbete du behöver.</span><span class="sxs-lookup"><span data-stu-id="45f30-413">Put simply, a task runs one or more programs or scripts on a compute node tooperform hello work you need done.</span></span>

<span data-ttu-id="45f30-414">När du skapar en aktivitet kan du ange:</span><span class="sxs-lookup"><span data-stu-id="45f30-414">When you create a task, you can specify:</span></span>

* <span data-ttu-id="45f30-415">Hej **kommandoraden** för hello-aktivitet.</span><span class="sxs-lookup"><span data-stu-id="45f30-415">hello **command line** for hello task.</span></span> <span data-ttu-id="45f30-416">Detta är hello-kommandoraden som kör ditt program eller skript på hello beräkningsnod.</span><span class="sxs-lookup"><span data-stu-id="45f30-416">This is hello command line that runs your application or script on hello compute node.</span></span>

    <span data-ttu-id="45f30-417">Det är viktigt toonote som hello kommandoraden faktiskt inte körs under ett gränssnitt.</span><span class="sxs-lookup"><span data-stu-id="45f30-417">It is important toonote that hello command line does not actually run under a shell.</span></span> <span data-ttu-id="45f30-418">Därför kan det internt dra nytta av shell-funktioner som [miljövariabeln](#environment-settings-for-tasks) expandering (Detta omfattar hello `PATH`).</span><span class="sxs-lookup"><span data-stu-id="45f30-418">Therefore, it cannot natively take advantage of shell features like [environment variable](#environment-settings-for-tasks) expansion (this includes hello `PATH`).</span></span> <span data-ttu-id="45f30-419">tootake nytta av dessa funktioner, måste du anropa hello shell hello kommandoraden – till exempel genom att starta `cmd.exe` på Windows-noder eller `/bin/sh` på Linux:</span><span class="sxs-lookup"><span data-stu-id="45f30-419">tootake advantage of such features, you must invoke hello shell in hello command line--for example, by launching `cmd.exe` on Windows nodes or `/bin/sh` on Linux:</span></span>

    `cmd /c MyTaskApplication.exe %MY_ENV_VAR%`

    `/bin/sh -c MyTaskApplication $MY_ENV_VAR`

    <span data-ttu-id="45f30-420">Om dina aktiviteter behöver toorun ett program eller skript som inte är i hello nodens `PATH` eller referera miljövariabler, anropa hello shell explicit i hello kommandorad för uppgift.</span><span class="sxs-lookup"><span data-stu-id="45f30-420">If your tasks need toorun an application or script that is not in hello node's `PATH` or reference environment variables, invoke hello shell explicitly in hello task command line.</span></span>
* <span data-ttu-id="45f30-421">**Resursfiler** som innehåller hello data toobe bearbetas.</span><span class="sxs-lookup"><span data-stu-id="45f30-421">**Resource files** that contain hello data toobe processed.</span></span> <span data-ttu-id="45f30-422">Dessa filer är automatiskt kopierade toohello noden från Blob storage i ett allmänt Azure Storage-konto innan hello aktivitetens kommandoraden körs.</span><span class="sxs-lookup"><span data-stu-id="45f30-422">These files are automatically copied toohello node from Blob storage in a general-purpose Azure Storage account before hello task's command line is executed.</span></span> <span data-ttu-id="45f30-423">Mer information finns i avsnitt hello [startuppgift](#start-task) och [filer och kataloger](#files-and-directories).</span><span class="sxs-lookup"><span data-stu-id="45f30-423">For more information, see hello sections [Start task](#start-task) and [Files and directories](#files-and-directories).</span></span>
* <span data-ttu-id="45f30-424">Hej **miljövariabler** som krävs av ditt program.</span><span class="sxs-lookup"><span data-stu-id="45f30-424">hello **environment variables** that are required by your application.</span></span> <span data-ttu-id="45f30-425">Mer information finns i hello [miljöinställningar för uppgifter](#environment-settings-for-tasks) avsnitt.</span><span class="sxs-lookup"><span data-stu-id="45f30-425">For more information, see hello [Environment settings for tasks](#environment-settings-for-tasks) section.</span></span>
* <span data-ttu-id="45f30-426">Hej **begränsningar** under vilka hello aktiviteten ska köras.</span><span class="sxs-lookup"><span data-stu-id="45f30-426">hello **constraints** under which hello task should execute.</span></span> <span data-ttu-id="45f30-427">Begränsningar innehåller till exempel hello maximal tid hello aktiviteten tillåts toorun hello maximalt antal gånger som en misslyckad uppgift ska göras och hello maximal tid som filer i arbetskatalogen hello aktiviteten finns kvar.</span><span class="sxs-lookup"><span data-stu-id="45f30-427">For example, constraints include hello maximum time that hello task is allowed toorun, hello maximum number of times a failed task should be retried, and hello maximum time that files in hello task's working directory are retained.</span></span>
* <span data-ttu-id="45f30-428">**Programpaket** toodeploy toohello beräkningsnod på vilka hello aktiviteten är schemalagda toorun.</span><span class="sxs-lookup"><span data-stu-id="45f30-428">**Application packages** toodeploy toohello compute node on which hello task is scheduled toorun.</span></span> <span data-ttu-id="45f30-429">[Programpaket](#application-packages) förenklad distribution och versionshantering av hello-program som körs i dina uppgifter.</span><span class="sxs-lookup"><span data-stu-id="45f30-429">[Application packages](#application-packages) provide simplified deployment and versioning of hello applications that your tasks run.</span></span> <span data-ttu-id="45f30-430">Aktivitetsnivå programpaket är särskilt användbar i miljöer med delad pool, där olika jobben körs på en pool och hello poolen tas inte bort när ett jobb har slutförts.</span><span class="sxs-lookup"><span data-stu-id="45f30-430">Task-level application packages are especially useful in shared-pool environments, where different jobs are run on one pool, and hello pool is not deleted when a job is completed.</span></span> <span data-ttu-id="45f30-431">Om jobbet har färre uppgifter än noder i hello pool, kan aktivitet programpaket minimera dataöverföring eftersom programmet är distribuerade endast toohello noder som kör aktiviteter.</span><span class="sxs-lookup"><span data-stu-id="45f30-431">If your job has fewer tasks than nodes in hello pool, task application packages can minimize data transfer since your application is deployed only toohello nodes that run tasks.</span></span>

<span data-ttu-id="45f30-432">Dessutom tootasks som du definierar tooperform beräkningar på en nod, hello följa särskilda aktiviteter också tillhandahålls av hello Batch-tjänsten:</span><span class="sxs-lookup"><span data-stu-id="45f30-432">In addition tootasks you define tooperform computation on a node, hello following special tasks are also provided by hello Batch service:</span></span>

* [<span data-ttu-id="45f30-433">Startaktivitet</span><span class="sxs-lookup"><span data-stu-id="45f30-433">Start task</span></span>](#start-task)
* [<span data-ttu-id="45f30-434">Job Manager-aktivitet</span><span class="sxs-lookup"><span data-stu-id="45f30-434">Job manager task</span></span>](#job-manager-task)
* [<span data-ttu-id="45f30-435">Jobbförberedelse- och jobbpubliceringsaktiviteter</span><span class="sxs-lookup"><span data-stu-id="45f30-435">Job preparation and release tasks</span></span>](#job-preparation-and-release-tasks)
* [<span data-ttu-id="45f30-436">Aktiviteter med flera instanser (MPI)</span><span class="sxs-lookup"><span data-stu-id="45f30-436">Multi-instance tasks (MPI)</span></span>](#multi-instance-tasks)
* [<span data-ttu-id="45f30-437">Aktivitetsberoenden</span><span class="sxs-lookup"><span data-stu-id="45f30-437">Task dependencies</span></span>](#task-dependencies)

### <a name="start-task"></a><span data-ttu-id="45f30-438">Startaktivitet</span><span class="sxs-lookup"><span data-stu-id="45f30-438">Start task</span></span>
<span data-ttu-id="45f30-439">Genom att associera en **aktiviteten starta** med en pool kan du förbereda hello operativa miljö av dess noder.</span><span class="sxs-lookup"><span data-stu-id="45f30-439">By associating a **start task** with a pool, you can prepare hello operating environment of its nodes.</span></span> <span data-ttu-id="45f30-440">Du kan exempelvis utföra åtgärder som installerar hello-program som körs i dina aktiviteter eller starta bakgrundsprocesser.</span><span class="sxs-lookup"><span data-stu-id="45f30-440">For example, you can perform actions like installing hello applications that your tasks run or starting background processes.</span></span> <span data-ttu-id="45f30-441">hello starta aktiviteten körs varje gång en nod startas för så länge den är i hello pool – inklusive när hello nod först läggs till toohello pool och när den startas om eller avbildade.</span><span class="sxs-lookup"><span data-stu-id="45f30-441">hello start task runs every time a node starts, for as long as it remains in hello pool--including when hello node is first added toohello pool and when it is restarted or reimaged.</span></span>

<span data-ttu-id="45f30-442">En primär fördelen hello startuppgift är att den innehåller alla hello information som är nödvändiga tooconfigure en beräkningsnod och installera hello-program som krävs för körning av aktiviteten.</span><span class="sxs-lookup"><span data-stu-id="45f30-442">A primary benefit of hello start task is that it can contain all of hello information that is necessary tooconfigure a compute node and install hello applications that are required for task execution.</span></span> <span data-ttu-id="45f30-443">Därför är öka hello antalet noder i en pool så enkelt som att ange hello nya målantalet noder.</span><span class="sxs-lookup"><span data-stu-id="45f30-443">Therefore, increasing hello number of nodes in a pool is as simple as specifying hello new target node count.</span></span> <span data-ttu-id="45f30-444">hello startuppgift ger hello Batch hello tjänstinformation som är nödvändiga tooconfigure hello nya noder och förbereda dem för att acceptera uppgifter.</span><span class="sxs-lookup"><span data-stu-id="45f30-444">hello start task provides hello Batch service hello information that is needed tooconfigure hello new nodes and get them ready for accepting tasks.</span></span>

<span data-ttu-id="45f30-445">Som med Azure Batch aktiviteter, kan du ange en lista över **resursfiler** i [Azure Storage][azure_storage], dessutom tooa **kommandoraden** toobe köra.</span><span class="sxs-lookup"><span data-stu-id="45f30-445">As with any Azure Batch task, you can specify a list of **resource files** in [Azure Storage][azure_storage], in addition tooa **command line** toobe executed.</span></span> <span data-ttu-id="45f30-446">hello Batch-tjänsten först kopierar hello resurs filer toohello noden från Azure Storage och kör sedan hello-kommandoraden.</span><span class="sxs-lookup"><span data-stu-id="45f30-446">hello Batch service first copies hello resource files toohello node from Azure Storage, and then runs hello command line.</span></span> <span data-ttu-id="45f30-447">För en pool startuppgift innehåller vanligtvis hello fillistan hello uppgiften programmet och dess beroenden.</span><span class="sxs-lookup"><span data-stu-id="45f30-447">For a pool start task, hello file list typically contains hello task application and its dependencies.</span></span>

<span data-ttu-id="45f30-448">Hello startuppgift kan också omfatta referens data toobe används av alla aktiviteter som körs på hello compute-nod.</span><span class="sxs-lookup"><span data-stu-id="45f30-448">However, hello start task could also include reference data toobe used by all tasks that are running on hello compute node.</span></span> <span data-ttu-id="45f30-449">Till exempel en startuppgift kommandoraden kan utföra en `robocopy` åtgärden toocopy programfiler (som har angetts som resursfiler och hämtas toohello nod) från hello starta aktivitetens [arbetskatalogen](#files-and-directories) toohello [delade mappen](#files-and-directories), och kör sedan en MSI eller `setup.exe`.</span><span class="sxs-lookup"><span data-stu-id="45f30-449">For example, a start task's command line could perform a `robocopy` operation toocopy application files (which were specified as resource files and downloaded toohello node) from hello start task's [working directory](#files-and-directories) toohello [shared folder](#files-and-directories), and then run an MSI or `setup.exe`.</span></span>

<span data-ttu-id="45f30-450">Det är vanligtvis önskvärt för hello Batch-tjänsten toowait för hello starta uppgiften toocomplete innan hello nod redo toobe tilldelade aktiviteter, men du kan konfigurera detta.</span><span class="sxs-lookup"><span data-stu-id="45f30-450">It is typically desirable for hello Batch service toowait for hello start task toocomplete before considering hello node ready toobe assigned tasks, but you can configure this.</span></span>

<span data-ttu-id="45f30-451">Om en start misslyckas på en beräkningsnod, sedan hello hello nod är uppdaterade tooreflect hello fel och hello noden har tilldelats inte några uppgifter.</span><span class="sxs-lookup"><span data-stu-id="45f30-451">If a start task fails on a compute node, then hello state of hello node is updated tooreflect hello failure, and hello node is not assigned any tasks.</span></span> <span data-ttu-id="45f30-452">Startuppgiften kan misslyckas om det uppstår problem kopiera dess resursfiler från lagring, eller om hello process som körs av dess kommandoraden returnerar slutkoden som inte är noll.</span><span class="sxs-lookup"><span data-stu-id="45f30-452">A start task can fail if there is an issue copying its resource files from storage, or if hello process executed by its command line returns a nonzero exit code.</span></span>

<span data-ttu-id="45f30-453">Om du lägger till eller uppdatera hello startuppgift för en befintlig adresspool måste du starta om compute-noder för hello starta uppgiften toobe tillämpas toohello noder.</span><span class="sxs-lookup"><span data-stu-id="45f30-453">If you add or update hello start task for an existing pool, you must reboot its compute nodes for hello start task toobe applied toohello nodes.</span></span>

>[!NOTE]
> <span data-ttu-id="45f30-454">hello total storlek på Startuppgiften måste vara mindre än eller lika med too32768 tecken, inklusive resursfiler och miljövariabler.</span><span class="sxs-lookup"><span data-stu-id="45f30-454">hello total size of a start task must be less than or equal too32768 characters, including resource files and environment variables.</span></span> <span data-ttu-id="45f30-455">tooensure att Startuppgiften uppfyller detta krav, du kan använda något av två sätt:</span><span class="sxs-lookup"><span data-stu-id="45f30-455">tooensure that your start task meets this requirement, you can use one of two approaches:</span></span>
>
> 1. <span data-ttu-id="45f30-456">Du kan använda programmet paket toodistribute program eller data över varje nod i Batch-pool.</span><span class="sxs-lookup"><span data-stu-id="45f30-456">You can use application packages toodistribute applications or data across each node in your Batch pool.</span></span> <span data-ttu-id="45f30-457">Mer information om programpaket finns [distribuera program toocompute noder med Batch-programpaket](batch-application-packages.md).</span><span class="sxs-lookup"><span data-stu-id="45f30-457">For more information about application packages, see [Deploy applications toocompute nodes with Batch application packages](batch-application-packages.md).</span></span>
> 2. <span data-ttu-id="45f30-458">Du kan manuellt skapa ett zippat arkiv som innehåller dina programfiler.</span><span class="sxs-lookup"><span data-stu-id="45f30-458">You can manually create a zipped archive containing your applications files.</span></span> <span data-ttu-id="45f30-459">Ladda upp den komprimerade Arkiv tooAzure lagring som en blob.</span><span class="sxs-lookup"><span data-stu-id="45f30-459">Upload your zipped archive tooAzure Storage as a blob.</span></span> <span data-ttu-id="45f30-460">Ange hello zippade Arkiv som en resurs för start-aktivitet.</span><span class="sxs-lookup"><span data-stu-id="45f30-460">Specify hello zipped archive as a resource file for your start task.</span></span> <span data-ttu-id="45f30-461">Packa upp hello Arkiv från kommandoraden hello innan du kör hello kommandorad för startuppgift.</span><span class="sxs-lookup"><span data-stu-id="45f30-461">Before you run hello command line for your start task, unzip hello archive from hello command line.</span></span> 
>
>    <span data-ttu-id="45f30-462">Du kan använda hello arkivering verktyg som helst toounzip hello Arkiv.</span><span class="sxs-lookup"><span data-stu-id="45f30-462">toounzip hello archive, you can use hello archiving tool of your choice.</span></span> <span data-ttu-id="45f30-463">Behöver du att du använder toounzip hello Arkiv som en resurs för hello startuppgift tooinclude hello-verktyget.</span><span class="sxs-lookup"><span data-stu-id="45f30-463">You will need tooinclude hello tool that you use toounzip hello archive as a resource file for hello start task.</span></span>
>
>

### <a name="job-manager-task"></a><span data-ttu-id="45f30-464">Job Manager-aktivitet</span><span class="sxs-lookup"><span data-stu-id="45f30-464">Job manager task</span></span>
<span data-ttu-id="45f30-465">Normalt använder du en **manager projektaktivitet** toocontrol och/eller övervaka jobbet körning – till exempel toocreate och skicka hello uppgifter för ett jobb, fastställa ytterligare aktiviteter toorun och avgöra när arbetet är klar.</span><span class="sxs-lookup"><span data-stu-id="45f30-465">You typically use a **job manager task** toocontrol and/or monitor job execution--for example, toocreate and submit hello tasks for a job, determine additional tasks toorun, and determine when work is complete.</span></span> <span data-ttu-id="45f30-466">Men är en projektaktivitet manager inte begränsade toothese aktiviteter.</span><span class="sxs-lookup"><span data-stu-id="45f30-466">However, a job manager task is not restricted toothese activities.</span></span> <span data-ttu-id="45f30-467">Det är en helt fledged aktivitet som kan utföra alla åtgärder som krävs för hello jobb.</span><span class="sxs-lookup"><span data-stu-id="45f30-467">It is a fully fledged task that can perform any actions that are required for hello job.</span></span> <span data-ttu-id="45f30-468">En projektaktivitet manager kan till exempel en fil som har angetts som en parameter, analysera hello innehållet i filen och skicka ytterligare aktiviteter baserat på innehållet.</span><span class="sxs-lookup"><span data-stu-id="45f30-468">For example, a job manager task might download a file that is specified as a parameter, analyze hello contents of that file, and submit additional tasks based on those contents.</span></span>

<span data-ttu-id="45f30-469">En Job Manager-aktivitet startar innan alla andra aktiviteter.</span><span class="sxs-lookup"><span data-stu-id="45f30-469">A job manager task is started before all other tasks.</span></span> <span data-ttu-id="45f30-470">Det innehåller hello följande funktioner:</span><span class="sxs-lookup"><span data-stu-id="45f30-470">It provides hello following features:</span></span>

* <span data-ttu-id="45f30-471">Det skickas automatiskt som en aktivitet av hello Batch-tjänsten när hello jobb skapas.</span><span class="sxs-lookup"><span data-stu-id="45f30-471">It is automatically submitted as a task by hello Batch service when hello job is created.</span></span>
* <span data-ttu-id="45f30-472">Den är schemalagd tooexecute innan hello andra aktiviteter i ett projekt.</span><span class="sxs-lookup"><span data-stu-id="45f30-472">It is scheduled tooexecute before hello other tasks in a job.</span></span>
* <span data-ttu-id="45f30-473">Dess associerade nod är hello senaste toobe tas bort från en pool när hello poolen är att downsized.</span><span class="sxs-lookup"><span data-stu-id="45f30-473">Its associated node is hello last toobe removed from a pool when hello pool is being downsized.</span></span>
* <span data-ttu-id="45f30-474">Upphör att gälla kan vara bundet toohello avslutning av alla aktiviteter i hello-jobbet.</span><span class="sxs-lookup"><span data-stu-id="45f30-474">Its termination can be tied toohello termination of all tasks in hello job.</span></span>
* <span data-ttu-id="45f30-475">En projektaktivitet manager ges hello högsta prioritet när det behövs toobe startas om.</span><span class="sxs-lookup"><span data-stu-id="45f30-475">A job manager task is given hello highest priority when it needs toobe restarted.</span></span> <span data-ttu-id="45f30-476">Om en inaktiv nod inte är tillgänglig hello Batch-tjänsten kan säga upp en hello andra aktiviteter som körs i hello poolen toomake utrymme för hello job manager uppgiften toorun.</span><span class="sxs-lookup"><span data-stu-id="45f30-476">If an idle node is not available, hello Batch service might terminate one of hello other running tasks in hello pool toomake room for hello job manager task toorun.</span></span>
* <span data-ttu-id="45f30-477">En projektaktivitet manager i ett jobb har inte prioritet över hello uppgifter i andra jobb.</span><span class="sxs-lookup"><span data-stu-id="45f30-477">A job manager task in one job does not have priority over hello tasks of other jobs.</span></span> <span data-ttu-id="45f30-478">Mellan jobb gäller endast prioriteringar på jobbnivå.</span><span class="sxs-lookup"><span data-stu-id="45f30-478">Across jobs, only job-level priorities are observed.</span></span>

### <a name="job-preparation-and-release-tasks"></a><span data-ttu-id="45f30-479">Jobbförberedelse- och jobbpubliceringsaktiviteter</span><span class="sxs-lookup"><span data-stu-id="45f30-479">Job preparation and release tasks</span></span>
<span data-ttu-id="45f30-480">Batch innehåller jobbförberedelseaktiviteter för konfiguration av jobb före körningen.</span><span class="sxs-lookup"><span data-stu-id="45f30-480">Batch provides job preparation tasks for pre-job execution setup.</span></span> <span data-ttu-id="45f30-481">Jobbpubliceringsaktiviteter är avsedda för underhåll och rensning när jobbet har körts.</span><span class="sxs-lookup"><span data-stu-id="45f30-481">Job release tasks are for post-job maintenance or cleanup.</span></span>

* <span data-ttu-id="45f30-482">**Förberedelse av projektaktivitet**: en aktivitet för förberedelse av jobbet körs på alla compute-noder som är schemalagda toorun uppgifter, innan någon av hello andra jobbuppgifter körs.</span><span class="sxs-lookup"><span data-stu-id="45f30-482">**Job preparation task**: A job preparation task runs on all compute nodes that are scheduled toorun tasks, before any of hello other job tasks are executed.</span></span> <span data-ttu-id="45f30-483">Du kan använda en förberedelse uppgiften toocopy jobbdata som delas av alla aktiviteter, men är unika toohello jobb, t.ex.</span><span class="sxs-lookup"><span data-stu-id="45f30-483">You can use a job preparation task toocopy data that is shared by all tasks, but is unique toohello job, for example.</span></span>
* <span data-ttu-id="45f30-484">**Versionen för projektaktivitet**: när ett jobb har slutförts, en projektaktivitet versionen körs på varje nod i hello-pool som körts minst en aktivitet.</span><span class="sxs-lookup"><span data-stu-id="45f30-484">**Job release task**: When a job has completed, a job release task runs on each node in hello pool that executed at least one task.</span></span> <span data-ttu-id="45f30-485">Du kan använda en jobbet viktig uppgift toodelete data som kopieras av hello projektaktivitet förberedelse eller toocompress och överför loggen diagnostikdata, till exempel.</span><span class="sxs-lookup"><span data-stu-id="45f30-485">You can use a job release task toodelete data that is copied by hello job preparation task, or toocompress and upload diagnostic log data, for example.</span></span>

<span data-ttu-id="45f30-486">Både jobb förberedelse och versionen uppgifter gör att du toospecify en kommandorad toorun när hello aktivitet anropas.</span><span class="sxs-lookup"><span data-stu-id="45f30-486">Both job preparation and release tasks allow you toospecify a command line toorun when hello task is invoked.</span></span> <span data-ttu-id="45f30-487">De stöder funktioner som filhämtning, upphöjd körning, anpassade miljövariabler, högsta körningstid, antal omförsök och kvarhållningstid för filer.</span><span class="sxs-lookup"><span data-stu-id="45f30-487">They offer features like file download, elevated execution, custom environment variables, maximum execution duration, retry count, and file retention time.</span></span>

<span data-ttu-id="45f30-488">Mer information om jobbförberedelse- och jobbpubliceringsaktiviteter finns i [Köra jobbförberedelse- och jobbpubliceringsaktiviteter på Azure Batch-beräkningsnoder](batch-job-prep-release.md).</span><span class="sxs-lookup"><span data-stu-id="45f30-488">For more information on job preparation and release tasks, see [Run job preparation and completion tasks on Azure Batch compute nodes](batch-job-prep-release.md).</span></span>

### <a name="multi-instance-task"></a><span data-ttu-id="45f30-489">Aktivitet med flera instanser</span><span class="sxs-lookup"><span data-stu-id="45f30-489">Multi-instance task</span></span>
<span data-ttu-id="45f30-490">En [flera instanser uppgiften](batch-mpi.md) är en aktivitet som är konfigurerade toorun på mer än en beräkningsnod samtidigt.</span><span class="sxs-lookup"><span data-stu-id="45f30-490">A [multi-instance task](batch-mpi.md) is a task that is configured toorun on more than one compute node simultaneously.</span></span> <span data-ttu-id="45f30-491">Du kan aktivera hög prestanda med flera instanser aktiviteter datorer scenarier som kräver en grupp av compute-noder som är allokerade tillsammans tooprocess en enda arbetsbelastning (t.ex. Message Passing Interface (MPI)).</span><span class="sxs-lookup"><span data-stu-id="45f30-491">With multi-instance tasks, you can enable high-performance computing scenarios that require a group of compute nodes that are allocated together tooprocess a single workload (like Message Passing Interface (MPI)).</span></span>

<span data-ttu-id="45f30-492">Detaljerad information om hur du kör MPI-jobb i Batch med hjälp av hello Batch .NET-biblioteket, kolla [Använd flera instanser av åtgärder toorun Message Passing Interface (MPI) program i Azure Batch](batch-mpi.md).</span><span class="sxs-lookup"><span data-stu-id="45f30-492">For a detailed discussion on running MPI jobs in Batch by using hello Batch .NET library, check out [Use multi-instance tasks toorun Message Passing Interface (MPI) applications in Azure Batch](batch-mpi.md).</span></span>

### <a name="task-dependencies"></a><span data-ttu-id="45f30-493">Aktivitetsberoenden</span><span class="sxs-lookup"><span data-stu-id="45f30-493">Task dependencies</span></span>
<span data-ttu-id="45f30-494">[Uppgift beroenden](batch-task-dependencies.md)som hello namnet antyder, kan du toospecify som en aktivitet är beroende av hello andra aktiviteter innan körningen har slutförts.</span><span class="sxs-lookup"><span data-stu-id="45f30-494">[Task dependencies](batch-task-dependencies.md), as hello name implies, allow you toospecify that a task depends on hello completion of other tasks before its execution.</span></span> <span data-ttu-id="45f30-495">Den här funktionen ger stöd för situationer där ”underordnade” går åt hello utdata för en ”överordnad” aktivitet-- eller när en överordnad aktivitet utför vissa initiering som krävs av en underordnad aktivitet.</span><span class="sxs-lookup"><span data-stu-id="45f30-495">This feature provides support for situations in which a "downstream" task consumes hello output of an "upstream" task--or when an upstream task performs some initialization that is required by a downstream task.</span></span> <span data-ttu-id="45f30-496">toouse den här funktionen måste du först aktivera aktivitet beroenden i Batch-jobbet.</span><span class="sxs-lookup"><span data-stu-id="45f30-496">toouse this feature, you must first enable task dependencies on your Batch job.</span></span> <span data-ttu-id="45f30-497">Sedan för varje aktivitet som är beroende av en annan (eller många andra) kan du ange hello uppgifter som är den aktiviteten som är beroende av.</span><span class="sxs-lookup"><span data-stu-id="45f30-497">Then, for each task that depends on another (or many others), you specify hello tasks which that task depends on.</span></span>

<span data-ttu-id="45f30-498">Du kan konfigurera scenarier som hello nedan med uppgiften beroenden:</span><span class="sxs-lookup"><span data-stu-id="45f30-498">With task dependencies, you can configure scenarios like hello following:</span></span>

* <span data-ttu-id="45f30-499">*aktivitetB* är beroende av *aktivitetA* (*aktivitetB* kan inte köra förrän *aktivitetA* har slutförts).</span><span class="sxs-lookup"><span data-stu-id="45f30-499">*taskB* depends on *taskA* (*taskB* will not begin execution until *taskA* has completed).</span></span>
* <span data-ttu-id="45f30-500">*aktivitetC* är beroende av både *aktivitetA* och *aktivitetB*.</span><span class="sxs-lookup"><span data-stu-id="45f30-500">*taskC* depends on both *taskA* and *taskB*.</span></span>
* <span data-ttu-id="45f30-501">*aktivitetD* är beroende av en serie aktiviteter, till exempel aktivitet *1* till och med *10*, innan den kan köras.</span><span class="sxs-lookup"><span data-stu-id="45f30-501">*taskD* depends on a range of tasks, such as tasks *1* through *10*, before it executes.</span></span>

<span data-ttu-id="45f30-502">Checka ut [uppgift beroenden i Azure Batch](batch-task-dependencies.md) och hello [TaskDependencies] [ github_sample_taskdeps] kodexempel i hello [azure-batch-samples] [ github_samples] GitHub-lagringsplatsen mer detaljerad information om den här funktionen.</span><span class="sxs-lookup"><span data-stu-id="45f30-502">Check out [Task dependencies in Azure Batch](batch-task-dependencies.md) and hello [TaskDependencies][github_sample_taskdeps] code sample in hello [azure-batch-samples][github_samples] GitHub repository for more in-depth details on this feature.</span></span>

## <a name="environment-settings-for-tasks"></a><span data-ttu-id="45f30-503">Miljöinställningar för aktiviteter</span><span class="sxs-lookup"><span data-stu-id="45f30-503">Environment settings for tasks</span></span>
<span data-ttu-id="45f30-504">Varje aktivitet som körs av hello Batch-tjänsten har åtkomst tooenvironment variabler som anges på compute-noder.</span><span class="sxs-lookup"><span data-stu-id="45f30-504">Each task executed by hello Batch service has access tooenvironment variables that it sets on compute nodes.</span></span> <span data-ttu-id="45f30-505">Detta inkluderar miljövariabler som definieras av hello Batch-tjänsten ([tjänst definierade][msdn_env_vars]) och anpassade miljövariabler som du kan definiera för dina uppgifter.</span><span class="sxs-lookup"><span data-stu-id="45f30-505">This includes environment variables defined by hello Batch service ([service-defined][msdn_env_vars]) and custom environment variables that you can define for your tasks.</span></span> <span data-ttu-id="45f30-506">hello program och skript som kör aktiviteterna har miljövariabler för åtkomst toothese under körning.</span><span class="sxs-lookup"><span data-stu-id="45f30-506">hello applications and scripts your tasks execute have access toothese environment variables during execution.</span></span>

<span data-ttu-id="45f30-507">Du kan ange anpassade miljövariabler på hello aktivitets- eller nivå genom att fylla hello *miljöinställningar* -egenskapen för dessa enheter.</span><span class="sxs-lookup"><span data-stu-id="45f30-507">You can set custom environment variables at hello task or job level by populating hello *environment settings* property for these entities.</span></span> <span data-ttu-id="45f30-508">Se exempelvis hello [lägga till ett jobb för aktiviteten tooa] [ rest_add_task] åtgärden (Batch REST API) eller hello [CloudTask.EnvironmentSettings] [ net_cloudtask_env] och [ CloudJob.CommonEnvironmentSettings] [ net_job_env] egenskaper i Batch .NET.</span><span class="sxs-lookup"><span data-stu-id="45f30-508">For example, see hello [Add a task tooa job][rest_add_task] operation (Batch REST API), or hello [CloudTask.EnvironmentSettings][net_cloudtask_env] and [CloudJob.CommonEnvironmentSettings][net_job_env] properties in Batch .NET.</span></span>

<span data-ttu-id="45f30-509">Klientprogrammet eller tjänsten kan erhålla en uppgift miljövariabler, både service definierade och anpassade, med hjälp av hello [hämta information om en aktivitet] [ rest_get_task_info] åtgärden (Batch REST) eller genom att öppna Hej [CloudTask.EnvironmentSettings] [ net_cloudtask_env] egenskapen (Batch .NET).</span><span class="sxs-lookup"><span data-stu-id="45f30-509">Your client application or service can obtain a task's environment variables, both service-defined and custom, by using hello [Get information about a task][rest_get_task_info] operation (Batch REST) or by accessing hello [CloudTask.EnvironmentSettings][net_cloudtask_env] property (Batch .NET).</span></span> <span data-ttu-id="45f30-510">Processer som körs på en beräkningsnod kan komma åt dessa och andra miljövariabler på hello nod, till exempel med hjälp av hello bekant `%VARIABLE_NAME%` (Windows) eller `$VARIABLE_NAME` (Linux) syntax.</span><span class="sxs-lookup"><span data-stu-id="45f30-510">Processes executing on a compute node can access these and other environment variables on hello node, for example, by using hello familiar `%VARIABLE_NAME%` (Windows) or `$VARIABLE_NAME` (Linux) syntax.</span></span>

<span data-ttu-id="45f30-511">Du hittar en fullständig lista över alla definierade miljövariabler i [Beräkna nodmiljövariabler][msdn_env_vars].</span><span class="sxs-lookup"><span data-stu-id="45f30-511">You can find a full list of all service-defined environment variables in [Compute node environment variables][msdn_env_vars].</span></span>

## <a name="files-and-directories"></a><span data-ttu-id="45f30-512">Filer och kataloger</span><span class="sxs-lookup"><span data-stu-id="45f30-512">Files and directories</span></span>
<span data-ttu-id="45f30-513">Varje aktivitet har en *arbetskatalog* där den skapar inga eller flera filer och kataloger.</span><span class="sxs-lookup"><span data-stu-id="45f30-513">Each task has a *working directory* under which it creates zero or more files and directories.</span></span> <span data-ttu-id="45f30-514">Den här arbetskatalogen kan användas för att lagra hello-program som körs av hello aktivitet, hello data som den behandlar och hello utgående hello-bearbetning utförs.</span><span class="sxs-lookup"><span data-stu-id="45f30-514">This working directory can be used for storing hello program that is run by hello task, hello data that it processes, and hello output of hello processing it performs.</span></span> <span data-ttu-id="45f30-515">Alla filer och kataloger i en aktivitet ägs av hello uppgiften användare.</span><span class="sxs-lookup"><span data-stu-id="45f30-515">All files and directories of a task are owned by hello task user.</span></span>

<span data-ttu-id="45f30-516">hello Batch-tjänsten Exponerar en del av hello filsystemet på en nod som hello *rotkatalog*.</span><span class="sxs-lookup"><span data-stu-id="45f30-516">hello Batch service exposes a portion of hello file system on a node as hello *root directory*.</span></span> <span data-ttu-id="45f30-517">Uppgifter kan komma åt hello rotkatalogen genom att referera hello `AZ_BATCH_NODE_ROOT_DIR` miljövariabeln.</span><span class="sxs-lookup"><span data-stu-id="45f30-517">Tasks can access hello root directory by referencing hello `AZ_BATCH_NODE_ROOT_DIR` environment variable.</span></span> <span data-ttu-id="45f30-518">Mer information om hur du använder miljövariabler finns i [Miljöinställningar för aktiviteter](#environment-settings-for-tasks).</span><span class="sxs-lookup"><span data-stu-id="45f30-518">For more information about using environment variables, see [Environment settings for tasks](#environment-settings-for-tasks).</span></span>

<span data-ttu-id="45f30-519">hello rotkatalogen innehåller följande katalogstruktur hello:</span><span class="sxs-lookup"><span data-stu-id="45f30-519">hello root directory contains hello following directory structure:</span></span>

![Katalogstrukturen på beräkningsnoder][1]

* <span data-ttu-id="45f30-521">**delad**: den här katalogen ger läs-/ skrivbehörighet för*alla* aktiviteter som körs på en nod.</span><span class="sxs-lookup"><span data-stu-id="45f30-521">**shared**: This directory provides read/write access too*all* tasks that run on a node.</span></span> <span data-ttu-id="45f30-522">Alla aktiviteter som körs på hello kan skapa, läsa, uppdatera och ta bort filer i den här katalogen.</span><span class="sxs-lookup"><span data-stu-id="45f30-522">Any task that runs on hello node can create, read, update, and delete files in this directory.</span></span> <span data-ttu-id="45f30-523">Uppgifter kan komma åt den här katalogen genom att referera hello `AZ_BATCH_NODE_SHARED_DIR` miljövariabeln.</span><span class="sxs-lookup"><span data-stu-id="45f30-523">Tasks can access this directory by referencing hello `AZ_BATCH_NODE_SHARED_DIR` environment variable.</span></span>
* <span data-ttu-id="45f30-524">**startup**: Den här katalogen används av en startaktivitet som dess arbetskatalog.</span><span class="sxs-lookup"><span data-stu-id="45f30-524">**startup**: This directory is used by a start task as its working directory.</span></span> <span data-ttu-id="45f30-525">Alla hello-filer som är hämtade toohello noden hello startuppgift lagras här.</span><span class="sxs-lookup"><span data-stu-id="45f30-525">All of hello files that are downloaded toohello node by hello start task are stored here.</span></span> <span data-ttu-id="45f30-526">hello startuppgift kan skapa, läsa, uppdatera och ta bort filer under den här katalogen.</span><span class="sxs-lookup"><span data-stu-id="45f30-526">hello start task can create, read, update, and delete files under this directory.</span></span> <span data-ttu-id="45f30-527">Uppgifter kan komma åt den här katalogen genom att referera hello `AZ_BATCH_NODE_STARTUP_DIR` miljövariabeln.</span><span class="sxs-lookup"><span data-stu-id="45f30-527">Tasks can access this directory by referencing hello `AZ_BATCH_NODE_STARTUP_DIR` environment variable.</span></span>
* <span data-ttu-id="45f30-528">**Uppgifter**: en katalog skapas för varje aktivitet som körs på hello-nod.</span><span class="sxs-lookup"><span data-stu-id="45f30-528">**Tasks**: A directory is created for each task that runs on hello node.</span></span> <span data-ttu-id="45f30-529">Den kan nås genom att referera hello `AZ_BATCH_TASK_DIR` miljövariabeln.</span><span class="sxs-lookup"><span data-stu-id="45f30-529">It is accessed by referencing hello `AZ_BATCH_TASK_DIR` environment variable.</span></span>

    <span data-ttu-id="45f30-530">I varje uppgift katalog hello Batch-tjänsten skapar en arbetskatalog (`wd`) vars unik sökväg har angetts av hello `AZ_BATCH_TASK_WORKING_DIR` miljövariabeln.</span><span class="sxs-lookup"><span data-stu-id="45f30-530">Within each task directory, hello Batch service creates a working directory (`wd`) whose unique path is specified by hello `AZ_BATCH_TASK_WORKING_DIR` environment variable.</span></span> <span data-ttu-id="45f30-531">Den här katalogen innehåller läsning och skrivning åtkomst toohello aktivitet.</span><span class="sxs-lookup"><span data-stu-id="45f30-531">This directory provides read/write access toohello task.</span></span> <span data-ttu-id="45f30-532">hello aktivitet kan skapa, läsa, uppdatera och ta bort filer under den här katalogen.</span><span class="sxs-lookup"><span data-stu-id="45f30-532">hello task can create, read, update, and delete files under this directory.</span></span> <span data-ttu-id="45f30-533">Den här katalogen finns kvar baserat på hello *RetentionTime* villkor som har angetts för hello-aktivitet.</span><span class="sxs-lookup"><span data-stu-id="45f30-533">This directory is retained based on hello *RetentionTime* constraint that is specified for hello task.</span></span>

    <span data-ttu-id="45f30-534">`stdout.txt`och `stderr.txt`: de här filerna skrivs toohello aktivitetsmapp under hello körning av hello uppgift.</span><span class="sxs-lookup"><span data-stu-id="45f30-534">`stdout.txt` and `stderr.txt`: These files are written toohello task folder during hello execution of hello task.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="45f30-535">När en nod tas bort från hello poolen, *alla* av hello filer som lagras på hello noden tas bort.</span><span class="sxs-lookup"><span data-stu-id="45f30-535">When a node is removed from hello pool, *all* of hello files that are stored on hello node are removed.</span></span>
>
>

## <a name="application-packages"></a><span data-ttu-id="45f30-536">Programpaket</span><span class="sxs-lookup"><span data-stu-id="45f30-536">Application packages</span></span>
<span data-ttu-id="45f30-537">Hej [programpaket](batch-application-packages.md) funktionen tillhandahåller enkel hantering och distribution av program toohello compute-noder i din pooler.</span><span class="sxs-lookup"><span data-stu-id="45f30-537">hello [application packages](batch-application-packages.md) feature provides easy management and deployment of applications toohello compute nodes in your pools.</span></span> <span data-ttu-id="45f30-538">Du kan ladda upp och hantera flera versioner av hello program körs med dina aktiviteter, inklusive deras binärfiler och stödfiler.</span><span class="sxs-lookup"><span data-stu-id="45f30-538">You can upload and manage multiple versions of hello applications run by your tasks, including their binaries and support files.</span></span> <span data-ttu-id="45f30-539">Sedan kan du automatiskt distribuera en eller flera av dessa program toohello compute-noder i din pool.</span><span class="sxs-lookup"><span data-stu-id="45f30-539">Then you can automatically deploy one or more of these applications toohello compute nodes in your pool.</span></span>

<span data-ttu-id="45f30-540">Du kan ange programpaket på hello poolen och aktivitet.</span><span class="sxs-lookup"><span data-stu-id="45f30-540">You can specify application packages at hello pool and task level.</span></span> <span data-ttu-id="45f30-541">När du anger poolen programpaket är hello program distribuerade tooevery nod i hello pool.</span><span class="sxs-lookup"><span data-stu-id="45f30-541">When you specify pool application packages, hello application is deployed tooevery node in hello pool.</span></span> <span data-ttu-id="45f30-542">När du anger aktivitet programpaket hello program är distribuerade endast toonodes som är schemalagda toorun minst en av hello jobbets uppgifter, precis före hello aktivitetens kommandoraden körs.</span><span class="sxs-lookup"><span data-stu-id="45f30-542">When you specify task application packages, hello application is deployed only toonodes that are scheduled toorun at least one of hello job's tasks, just before hello task's command line is run.</span></span>

<span data-ttu-id="45f30-543">Batch handtag hello information om att arbeta med Azure Storage toostore ditt programpaket och distribuerar dem toocompute noder, så kan både din kod och hanteringen förenklas.</span><span class="sxs-lookup"><span data-stu-id="45f30-543">Batch handles hello details of working with Azure Storage toostore your application packages and deploy them toocompute nodes, so both your code and management overhead can be simplified.</span></span>

<span data-ttu-id="45f30-544">toofind checka ut mer information om hello tillämpningsfunktion paketet [distribuera program toocompute noder med Batch-programpaket](batch-application-packages.md).</span><span class="sxs-lookup"><span data-stu-id="45f30-544">toofind out more about hello application package feature, check out [Deploy applications toocompute nodes with Batch application packages](batch-application-packages.md).</span></span>

> [!NOTE]
> <span data-ttu-id="45f30-545">Om du lägger till poolen programmet paket tooan *befintliga* poolen, måste du starta om dess compute-noder för programmet hello paket toobe distribueras toohello noder.</span><span class="sxs-lookup"><span data-stu-id="45f30-545">If you add pool application packages tooan *existing* pool, you must reboot its compute nodes for hello application packages toobe deployed toohello nodes.</span></span>
>
>

## <a name="pool-and-compute-node-lifetime"></a><span data-ttu-id="45f30-546">Livslängd för pooler och beräkningsnoder</span><span class="sxs-lookup"><span data-stu-id="45f30-546">Pool and compute node lifetime</span></span>
<span data-ttu-id="45f30-547">När du utformar din lösning för Azure Batch har toomake ett beslut om hur och när pooler skapas och hur länge compute-noder i dessa programpooler hålls tillgängliga.</span><span class="sxs-lookup"><span data-stu-id="45f30-547">When you design your Azure Batch solution, you have toomake a design decision about how and when pools are created, and how long compute nodes within those pools are kept available.</span></span>

<span data-ttu-id="45f30-548">För en end i hello spektrumet kan du skapa en pool för varje projekt som du skicka och ta bort hello pool så fort tillhörande uppgifter körning.</span><span class="sxs-lookup"><span data-stu-id="45f30-548">On one end of hello spectrum, you can create a pool for each job that you submit, and delete hello pool as soon as its tasks finish execution.</span></span> <span data-ttu-id="45f30-549">Detta maximerar användning eftersom hello noderna tilldelas enbart vid behov, och Stäng när de är inaktiv.</span><span class="sxs-lookup"><span data-stu-id="45f30-549">This maximizes utilization because hello nodes are only allocated when needed, and shut down as soon as they're idle.</span></span> <span data-ttu-id="45f30-550">Det innebär att hello jobbet måste vänta tills hello noder toobe allokerade, är det viktigt toonote som aktiviteter som är schemalagda för körning som noder finns individuellt, allokerat, och hello har starta aktiviteten slutförts.</span><span class="sxs-lookup"><span data-stu-id="45f30-550">While this means that hello job must wait for hello nodes toobe allocated, it's important toonote that tasks are scheduled for execution as soon as nodes are individually available, allocated, and hello start task has completed.</span></span> <span data-ttu-id="45f30-551">Batch har *inte* vänta tills alla noder i en pool som är tillgängliga innan du tilldelar aktiviteter toohello noder.</span><span class="sxs-lookup"><span data-stu-id="45f30-551">Batch does *not* wait until all nodes within a pool are available before assigning tasks toohello nodes.</span></span> <span data-ttu-id="45f30-552">vilket säkerställer maximal användning av alla tillgängliga noder.</span><span class="sxs-lookup"><span data-stu-id="45f30-552">This ensures maximum utilization of all available nodes.</span></span>

<span data-ttu-id="45f30-553">Vid hello andra änden av hello spektrum om med jobb startar omedelbart hello högst prioritet, du kan skapa en pool i förväg och tillgängliggöra noder innan jobb skickas.</span><span class="sxs-lookup"><span data-stu-id="45f30-553">At hello other end of hello spectrum, if having jobs start immediately is hello highest priority, you can create a pool ahead of time and make its nodes available before jobs are submitted.</span></span> <span data-ttu-id="45f30-554">I det här scenariot uppgifter kan starta direkt, men noder kan sitta inaktiv väntan på dem toobe som tilldelats.</span><span class="sxs-lookup"><span data-stu-id="45f30-554">In this scenario, tasks can start immediately, but nodes might sit idle while waiting for them toobe assigned.</span></span>

<span data-ttu-id="45f30-555">En kombinerad metod, som normalt används för att hantera en varierande men kontinuerlig belastning.</span><span class="sxs-lookup"><span data-stu-id="45f30-555">A combined approach is typically used for handling a variable, but ongoing, load.</span></span> <span data-ttu-id="45f30-556">Du kan ha en pool för att flera jobb skickas till, men kan skala hello antalet noder uppåt eller nedåt enligt toohello arbetsbelastningen (se [skalning beräkningsresurser](#scaling-compute-resources) i hello efter avsnittet).</span><span class="sxs-lookup"><span data-stu-id="45f30-556">You can have a pool that multiple jobs are submitted to, but can scale hello number of nodes up or down according toohello job load (see [Scaling compute resources](#scaling-compute-resources) in hello following section).</span></span> <span data-ttu-id="45f30-557">Detta kan göras reaktivt baserat på den aktuella belastningen eller proaktivt om det går att förutse belastningen.</span><span class="sxs-lookup"><span data-stu-id="45f30-557">You can do this reactively, based on current load, or proactively, if load can be predicted.</span></span>

## <a name="virtual-network-vnet-and-firewall-configuration"></a><span data-ttu-id="45f30-558">Konfiguration av virtuella nätverk (VNet) och brandväggar</span><span class="sxs-lookup"><span data-stu-id="45f30-558">Virtual network (VNet) and firewall configuration</span></span> 

<span data-ttu-id="45f30-559">När du etablerar en pool av beräkningsnoder i Azure Batch du kan associera hello-pool med ett undernät för ett Azure [virtuella nätverk (VNet)](../virtual-network/virtual-networks-overview.md).</span><span class="sxs-lookup"><span data-stu-id="45f30-559">When you provision a pool of compute nodes in Azure Batch, you can associate hello pool with a subnet of an Azure [virtual network (VNet)](../virtual-network/virtual-networks-overview.md).</span></span> <span data-ttu-id="45f30-560">toolearn mer information om hur du skapar ett VNet med undernät, se [skapa ett Azure-nätverk med undernät](../virtual-network/virtual-networks-create-vnet-arm-pportal.md).</span><span class="sxs-lookup"><span data-stu-id="45f30-560">toolearn more about creating a VNet with subnets, see [Create an Azure virtual network with subnets](../virtual-network/virtual-networks-create-vnet-arm-pportal.md).</span></span> 

 * <span data-ttu-id="45f30-561">hello virtuella nätverk som är associerade med en pool måste vara:</span><span class="sxs-lookup"><span data-stu-id="45f30-561">hello VNet associated with a pool must be:</span></span>

   * <span data-ttu-id="45f30-562">I samma Azure hello **region** som hello Azure Batch-kontot.</span><span class="sxs-lookup"><span data-stu-id="45f30-562">In hello same Azure **region** as hello Azure Batch account.</span></span>
   * <span data-ttu-id="45f30-563">Hej i samma **prenumeration** som hello Azure Batch-kontot.</span><span class="sxs-lookup"><span data-stu-id="45f30-563">In hello same **subscription** as hello Azure Batch account.</span></span>

* <span data-ttu-id="45f30-564">Hej beror VNet som stöds på hur pooler allokeras till hello Batch-kontot:</span><span class="sxs-lookup"><span data-stu-id="45f30-564">hello type of VNet supported depends on how pools are being allocated for hello Batch account:</span></span>

    - <span data-ttu-id="45f30-565">Om hello poolen allokering läge för Batch-kontot är inställt tooBatch Service och du kan tilldela ett VNet enbart toopools som skapats med hello **Services Molnkonfigurationen**.</span><span class="sxs-lookup"><span data-stu-id="45f30-565">If hello pool allocation mode for your Batch account is set tooBatch Service, then you can assign a VNet only toopools created with hello **Cloud Services Configuration**.</span></span> <span data-ttu-id="45f30-566">Dessutom anges hello VNet måste skapas med hello klassiska distributionsmodellen.</span><span class="sxs-lookup"><span data-stu-id="45f30-566">Additionally, hello specified VNet must be created with hello classic deployment model.</span></span> <span data-ttu-id="45f30-567">Vnet som skapats med hello Azure Resource Manager-distributionsmodellen stöds inte.</span><span class="sxs-lookup"><span data-stu-id="45f30-567">VNets created with hello Azure Resource Manager deployment model are not supported.</span></span>
 
    - <span data-ttu-id="45f30-568">Om hello poolen allokering läge för Batch-kontot är inställt tooUser prenumeration och du kan tilldela ett VNet enbart toopools som skapats med hello **konfiguration av virtuell dator**.</span><span class="sxs-lookup"><span data-stu-id="45f30-568">If hello pool allocation mode for your Batch account is set tooUser Subscription, then you can assign a VNet only toopools created with hello **Virtual Machine Configuration**.</span></span> <span data-ttu-id="45f30-569">Pooler som har skapats med hello **moln tjänstkonfiguration** stöds inte.</span><span class="sxs-lookup"><span data-stu-id="45f30-569">Pools created with hello **Cloud Service Configuration** are not supported.</span></span> <span data-ttu-id="45f30-570">hello associerade virtuella nätverk kan skapas med hello Azure Resource Manager-distributionsmodellen eller hello klassiska distributionsmodellen.</span><span class="sxs-lookup"><span data-stu-id="45f30-570">hello associated VNet may be created with either hello Azure Resource Manager deployment model or hello classic deployment model.</span></span>

    <span data-ttu-id="45f30-571">En tabell som sammanfattar VNet support enligt toopool allokering läge finns hello [Pool allokering läge](#pool-allocation-mode) avsnitt.</span><span class="sxs-lookup"><span data-stu-id="45f30-571">For a table summarizing VNet support according toopool allocation mode, see hello [Pool allocation mode](#pool-allocation-mode) section.</span></span>

* <span data-ttu-id="45f30-572">Om hello poolen allokering läge för Batch-kontot har angetts tooBatch Service, måste du ange behörigheter för hello Batch service principal tooaccess hello virtuella nätverk.</span><span class="sxs-lookup"><span data-stu-id="45f30-572">If hello pool allocation mode for your Batch account is set tooBatch Service, then you must provide permissions for hello Batch service principal tooaccess hello VNet.</span></span> <span data-ttu-id="45f30-573">Hej VNet måste tilldela hello [Classic Virtual Machine Contributor Role-Based åtkomstkontroll (RBAC)](https://azure.microsoft.com/documentation/articles/role-based-access-built-in-roles/#classic-virtual-machine-contributor) rollen toohello Batch tjänstens huvudnamn.</span><span class="sxs-lookup"><span data-stu-id="45f30-573">hello VNet must assign hello [Classic Virtual Machine Contributor Role-Based Access Control (RBAC)](https://azure.microsoft.com/documentation/articles/role-based-access-built-in-roles/#classic-virtual-machine-contributor) role toohello Batch service principal.</span></span> <span data-ttu-id="45f30-574">Om du hello RBAC roll har angetts returnerar hello Batch-tjänsten 400 (felaktig begäran).</span><span class="sxs-lookup"><span data-stu-id="45f30-574">If hello specified RBAC role is not provided, hello Batch service returns 400 (Bad Request).</span></span> <span data-ttu-id="45f30-575">tooadd hello roll i hello Azure-portalen:</span><span class="sxs-lookup"><span data-stu-id="45f30-575">tooadd hello role in hello Azure portal:</span></span>

    1. <span data-ttu-id="45f30-576">Välj hello **VNet**, sedan **åtkomstkontroll (IAM)** > **roller** > **Virtual Machine-deltagare**  >  **Lägga till**.</span><span class="sxs-lookup"><span data-stu-id="45f30-576">Select hello **VNet**, then **Access control (IAM)** > **Roles** > **Virtual Machine Contributor** > **Add**.</span></span>
    2. <span data-ttu-id="45f30-577">På hello **lägga till behörigheter** bladet, Välj hello **Virtual Machine-deltagare** roll.</span><span class="sxs-lookup"><span data-stu-id="45f30-577">On hello **Add permissions** blade, select hello **Virtual Machine Contributor** role.</span></span>
    3. <span data-ttu-id="45f30-578">På hello **lägga till behörigheter** bladet, söka efter hello Batch-API.</span><span class="sxs-lookup"><span data-stu-id="45f30-578">On hello **Add permissions** blade, search for hello Batch API.</span></span> <span data-ttu-id="45f30-579">Sök efter var och en av dessa strängar i tur och ordning tills du hittar hello-API:</span><span class="sxs-lookup"><span data-stu-id="45f30-579">Search for each of these strings in turn until you find hello API:</span></span>
        1. <span data-ttu-id="45f30-580">**MicrosoftAzureBatch**.</span><span class="sxs-lookup"><span data-stu-id="45f30-580">**MicrosoftAzureBatch**.</span></span>
        2. <span data-ttu-id="45f30-581">**Microsoft Azure Batch**.</span><span class="sxs-lookup"><span data-stu-id="45f30-581">**Microsoft Azure Batch**.</span></span> <span data-ttu-id="45f30-582">Nyare Azure AD-klientorganisationer kan använda det här namnet.</span><span class="sxs-lookup"><span data-stu-id="45f30-582">Newer Azure AD tenants may use this name.</span></span>
        3. <span data-ttu-id="45f30-583">**ddbf3205-c6bd-46ae-8127-60eb93363864** är hello-ID för hello Batch-API.</span><span class="sxs-lookup"><span data-stu-id="45f30-583">**ddbf3205-c6bd-46ae-8127-60eb93363864** is hello ID for hello Batch API.</span></span> 
    3. <span data-ttu-id="45f30-584">Välj hello Batch-API-tjänstens huvudnamn.</span><span class="sxs-lookup"><span data-stu-id="45f30-584">Select hello Batch API service principal.</span></span> 
    4. <span data-ttu-id="45f30-585">Klicka på **Spara**.</span><span class="sxs-lookup"><span data-stu-id="45f30-585">Click **Save**.</span></span>

        ![Tilldela VM deltagare rollen tooBatch tjänstens huvudnamn](./media/batch-api-basics/iam-add-role.png)


* <span data-ttu-id="45f30-587">hello angivna undernätet måste ha tillräckligt med ledigt **IP-adresser** tooaccommodate hello Totalt antal målnoder; hello som är summan av hello `targetDedicatedNodes` och `targetLowPriorityNodes` egenskaper för hello-adresspool.</span><span class="sxs-lookup"><span data-stu-id="45f30-587">hello specified subnet should have enough free **IP addresses** tooaccommodate hello total number of target nodes; that is, hello sum of hello `targetDedicatedNodes` and `targetLowPriorityNodes` properties of hello pool.</span></span> <span data-ttu-id="45f30-588">Om hello undernät inte har tillräckligt med lediga IP-adresser, allokerar hello beräkningsnoder i poolen hello delvis hello Batch-tjänsten och returnerar ett fel storlek.</span><span class="sxs-lookup"><span data-stu-id="45f30-588">If hello subnet doesn't have enough free IP addresses, hello Batch service partially allocates hello compute nodes in hello pool and returns a resize error.</span></span>

* <span data-ttu-id="45f30-589">hello angetts undernätet måste tillåta kommunikation från hello Batch-tjänsten toobe kan tooschedule uppgifter på hello compute-noder.</span><span class="sxs-lookup"><span data-stu-id="45f30-589">hello specified subnet must allow communication from hello Batch service toobe able tooschedule tasks on hello compute nodes.</span></span> <span data-ttu-id="45f30-590">Om kommunikation toohello datornoder nekas av en **Nätverkssäkerhetsgrupp (NSG)** som är associerade med hello VNet, och sedan hello Batch-tjänsten anger hello tillståndet för hello compute-noder för**oanvändbara**.</span><span class="sxs-lookup"><span data-stu-id="45f30-590">If communication toohello compute nodes is denied by a **Network Security Group (NSG)** associated with hello VNet, then hello Batch service sets hello state of hello compute nodes too**unusable**.</span></span>

* <span data-ttu-id="45f30-591">Om hello anges virtuella nätverk har associerade **Nätverkssäkerhetsgrupper (NSG: er)** och/eller en **brandväggen**, och sedan några reserverade system portar måste vara aktiverat för inkommande kommunikation:</span><span class="sxs-lookup"><span data-stu-id="45f30-591">If hello specified VNet has associated **Network Security Groups (NSGs)** and/or a **firewall**, then a few reserved system ports must be enabled for inbound communication:</span></span>

- <span data-ttu-id="45f30-592">För pooler som har skapats med en konfiguration av virtuell dator aktiverar du portarna 29876 och 29877, samt port 22 för Linux och port 3389 för Windows.</span><span class="sxs-lookup"><span data-stu-id="45f30-592">For pools created with a virtual machine configuration, enable ports 29876 and 29877, as well as port 22 for Linux and port 3389 for Windows.</span></span> 
- <span data-ttu-id="45f30-593">För pooler som har skapats med en molntjänstkonfiguration aktiverar du portarna 10100, 20100 och 30100.</span><span class="sxs-lookup"><span data-stu-id="45f30-593">For pools created with a cloud service configuration, enable ports 10100, 20100, and 30100.</span></span> 
- <span data-ttu-id="45f30-594">Aktivera utgående anslutningar tooAzure lagring på port 443.</span><span class="sxs-lookup"><span data-stu-id="45f30-594">Enable outbound connections tooAzure Storage on port 443.</span></span> <span data-ttu-id="45f30-595">Kontrollera också att din Azure Storage-slutpunkt kan matchas av eventuella anpassade DNS-servrar som betjänar ditt VNET.</span><span class="sxs-lookup"><span data-stu-id="45f30-595">Also, ensure that your Azure Storage endpoint can be resolved by any custom DNS servers that serve your VNET.</span></span> <span data-ttu-id="45f30-596">Mer specifikt URL: en hello formuläret `<account>.table.core.windows.net` ska kunna matchas.</span><span class="sxs-lookup"><span data-stu-id="45f30-596">Specifically, a URL of hello form `<account>.table.core.windows.net` should be resolvable.</span></span>

    <span data-ttu-id="45f30-597">hello följande tabell beskrivs hello ingående portar som du behöver tooenable för programpooler som du skapade med hello konfiguration av virtuell dator:</span><span class="sxs-lookup"><span data-stu-id="45f30-597">hello following table describes hello inbound ports that you need tooenable for pools that you created with hello virtual machine configuration:</span></span>

    |    <span data-ttu-id="45f30-598">Målportar</span><span class="sxs-lookup"><span data-stu-id="45f30-598">Destination Port(s)</span></span>    |    <span data-ttu-id="45f30-599">Källans IP-adress</span><span class="sxs-lookup"><span data-stu-id="45f30-599">Source IP address</span></span>      |    <span data-ttu-id="45f30-600">Lägger Batch till nätverkssäkerhetsgrupper?</span><span class="sxs-lookup"><span data-stu-id="45f30-600">Does Batch add NSGs?</span></span>    |    <span data-ttu-id="45f30-601">Krävs för VM toobe användas?</span><span class="sxs-lookup"><span data-stu-id="45f30-601">Required for VM toobe usable?</span></span>    |    <span data-ttu-id="45f30-602">Åtgärd från användaren</span><span class="sxs-lookup"><span data-stu-id="45f30-602">Action from user</span></span>   |
    |---------------------------|---------------------------|----------------------------|-------------------------------------|-----------------------|
    |    <ul><li><span data-ttu-id="45f30-603">För pooler som har skapats med hello konfiguration av virtuell dator: 29876, 29877</span><span class="sxs-lookup"><span data-stu-id="45f30-603">For pools created with hello virtual machine configuration: 29876, 29877</span></span></li><li><span data-ttu-id="45f30-604">För pooler som har skapats med hello molnet tjänstkonfiguration: 10100, 20100, 30100</span><span class="sxs-lookup"><span data-stu-id="45f30-604">For pools created with hello cloud service configuration: 10100, 20100, 30100</span></span></li></ul>         |    <span data-ttu-id="45f30-605">Endast IP-adresser för Batch-tjänstrollen</span><span class="sxs-lookup"><span data-stu-id="45f30-605">Only Batch service role IP addresses</span></span> |    <span data-ttu-id="45f30-606">Ja.</span><span class="sxs-lookup"><span data-stu-id="45f30-606">Yes.</span></span> <span data-ttu-id="45f30-607">Batch lägger till NSG: er på nätverket gränssnitt (NIC) som är anslutna tooVMs hello nivå.</span><span class="sxs-lookup"><span data-stu-id="45f30-607">Batch adds NSGs at hello level of network interfaces (NIC) attached tooVMs.</span></span> <span data-ttu-id="45f30-608">Dessa nätverkssäkerhetsgrupper tillåter endast trafik från Batch-tjänstrollens IP-adresser.</span><span class="sxs-lookup"><span data-stu-id="45f30-608">These NSGs allow traffic only from Batch service role IP addresses.</span></span> <span data-ttu-id="45f30-609">Även om du öppnar portarna för hello hela webbplatsen hämta hello trafik blockeras vid hello NIC.</span><span class="sxs-lookup"><span data-stu-id="45f30-609">Even if you open these ports for hello  entire web, hello traffic will get blocked at hello NIC.</span></span> |    <span data-ttu-id="45f30-610">Ja</span><span class="sxs-lookup"><span data-stu-id="45f30-610">Yes</span></span>  |  <span data-ttu-id="45f30-611">Du behöver inte toospecify en NSG eftersom Batch tillåts endast Batch IP-adresser.</span><span class="sxs-lookup"><span data-stu-id="45f30-611">You do not need toospecify an NSG, because Batch allows only Batch IP addresses.</span></span> <br /><br /> <span data-ttu-id="45f30-612">Men om du anger en NSG måste du se till att dessa portar är öppna för inkommande trafik.</span><span class="sxs-lookup"><span data-stu-id="45f30-612">However, if you do specify an NSG, please ensure that these ports are open for inbound traffic.</span></span> <br /><br /> <span data-ttu-id="45f30-613">Om du anger * som hello källans IP-adress i din NSG läggs Batch ändå NSG: er på nätverkskortet som sitter tooVMs hello nivå.</span><span class="sxs-lookup"><span data-stu-id="45f30-613">If you specify * as hello source IP in your NSG, Batch still adds NSGs at hello level of NIC attached tooVMs.</span></span> |
    |    <span data-ttu-id="45f30-614">3389, 22</span><span class="sxs-lookup"><span data-stu-id="45f30-614">3389, 22</span></span>               |    <span data-ttu-id="45f30-615">Användaren maskiner som används för felsökning, så att du kan fjärransluta till hello VM.</span><span class="sxs-lookup"><span data-stu-id="45f30-615">User machines, used for debugging purposes, so that you can remotely access hello VM.</span></span>    |    <span data-ttu-id="45f30-616">Nej</span><span class="sxs-lookup"><span data-stu-id="45f30-616">No</span></span>                                    |    <span data-ttu-id="45f30-617">Nej</span><span class="sxs-lookup"><span data-stu-id="45f30-617">No</span></span>                     |    <span data-ttu-id="45f30-618">Lägg till NSG: er om du vill toopermit fjärråtkomst (RDP/SSH) toohello VM.</span><span class="sxs-lookup"><span data-stu-id="45f30-618">Add NSGs if you want toopermit remote access (RDP/SSH) toohello VM.</span></span>   |                 

    <span data-ttu-id="45f30-619">hello i den följande tabellen beskrivs hello utgående port som du behöver tooenable toopermit åtkomst tooAzure lagring:</span><span class="sxs-lookup"><span data-stu-id="45f30-619">hello following table describes hello outbound port that you need tooenable toopermit access tooAzure Storage:</span></span>

    |    <span data-ttu-id="45f30-620">Utgående portar</span><span class="sxs-lookup"><span data-stu-id="45f30-620">Outbound Port(s)</span></span>    |    <span data-ttu-id="45f30-621">Mål</span><span class="sxs-lookup"><span data-stu-id="45f30-621">Destination</span></span>    |    <span data-ttu-id="45f30-622">Lägger Batch till nätverkssäkerhetsgrupper?</span><span class="sxs-lookup"><span data-stu-id="45f30-622">Does Batch add NSGs?</span></span>    |    <span data-ttu-id="45f30-623">Krävs för VM toobe användas?</span><span class="sxs-lookup"><span data-stu-id="45f30-623">Required for VM toobe usable?</span></span>    |    <span data-ttu-id="45f30-624">Åtgärd från användaren</span><span class="sxs-lookup"><span data-stu-id="45f30-624">Action from user</span></span>    |
    |------------------------|-------------------|----------------------------|-------------------------------------|------------------------|
    |    <span data-ttu-id="45f30-625">443</span><span class="sxs-lookup"><span data-stu-id="45f30-625">443</span></span>    |    <span data-ttu-id="45f30-626">Azure Storage</span><span class="sxs-lookup"><span data-stu-id="45f30-626">Azure Storage</span></span>    |    <span data-ttu-id="45f30-627">Nej</span><span class="sxs-lookup"><span data-stu-id="45f30-627">No</span></span>    |    <span data-ttu-id="45f30-628">Ja</span><span class="sxs-lookup"><span data-stu-id="45f30-628">Yes</span></span>    |    <span data-ttu-id="45f30-629">Om du lägger till alla NSG: er, se till att den här porten är öppen toooutbound trafik.</span><span class="sxs-lookup"><span data-stu-id="45f30-629">If you add any NSGs, then ensure that this port is open toooutbound   traffic.</span></span>    |


## <a name="scaling-compute-resources"></a><span data-ttu-id="45f30-630">Skala beräkningsresurser</span><span class="sxs-lookup"><span data-stu-id="45f30-630">Scaling compute resources</span></span>
<span data-ttu-id="45f30-631">Med [autoskalning](batch-automatic-scaling.md), du kan ha hello Batch-tjänsten dynamiskt justera hello antalet beräkningsnoder i poolen enligt toohello aktuella arbetsbelastning och Resursanvändning på beräknings-scenario.</span><span class="sxs-lookup"><span data-stu-id="45f30-631">With [automatic scaling](batch-automatic-scaling.md), you can have hello Batch service dynamically adjust hello number of compute nodes in a pool according toohello current workload and resource usage of your compute scenario.</span></span> <span data-ttu-id="45f30-632">Detta gör att du toolower hello totala kostnaden för att köra ditt program med hjälp av endast hello resurser du behöver och släppa dem som du inte behöver.</span><span class="sxs-lookup"><span data-stu-id="45f30-632">This allows you toolower hello overall cost of running your application by using only hello resources you need, and releasing those you don't need.</span></span>

<span data-ttu-id="45f30-633">Du aktiverar automatisk skalning genom att skriva en [formel för automatisk skalning](batch-automatic-scaling.md#automatic-scaling-formulas) och associera formeln med en pool.</span><span class="sxs-lookup"><span data-stu-id="45f30-633">You enable automatic scaling by writing an [automatic scaling formula](batch-automatic-scaling.md#automatic-scaling-formulas) and associating that formula with a pool.</span></span> <span data-ttu-id="45f30-634">hello Batch-tjänsten använder hello formeln toodetermine hello mål antalet noder i hello pool för hello nästa skalning intervall (intervall som du kan konfigurera).</span><span class="sxs-lookup"><span data-stu-id="45f30-634">hello Batch service uses hello formula toodetermine hello target number of nodes in hello pool for hello next scaling interval (an interval that you can configure).</span></span> <span data-ttu-id="45f30-635">Du kan ange hello inställningar för automatisk skalning för en pool när du skapar den eller aktivera skalning på poolen senare.</span><span class="sxs-lookup"><span data-stu-id="45f30-635">You can specify hello automatic scaling settings for a pool when you create it, or enable scaling on a pool later.</span></span> <span data-ttu-id="45f30-636">Du kan också uppdatera hello skalning på poolen skalning är aktiverad.</span><span class="sxs-lookup"><span data-stu-id="45f30-636">You can also update hello scaling settings on a scaling-enabled pool.</span></span>

<span data-ttu-id="45f30-637">Exempelvis kanske kräver ett jobb att du skickar ett mycket stort antal aktiviteter toobe utförs.</span><span class="sxs-lookup"><span data-stu-id="45f30-637">As an example, perhaps a job requires that you submit a very large number of tasks toobe executed.</span></span> <span data-ttu-id="45f30-638">Du kan tilldela en skalning formeln toohello pool som justerar hello antalet noder i hello poolen baserat på hello aktuellt antal köade aktiviteter och hello slutförande hello uppgifter i jobbet hello.</span><span class="sxs-lookup"><span data-stu-id="45f30-638">You can assign a scaling formula toohello pool that adjusts hello number of nodes in hello pool based on hello current number of queued tasks and hello completion rate of hello tasks in hello job.</span></span> <span data-ttu-id="45f30-639">hello Batch-tjänsten utvärderar hello formel med jämna mellanrum och ändrar hello poolen, baserat på arbetsbelastning och andra formeln inställningar.</span><span class="sxs-lookup"><span data-stu-id="45f30-639">hello Batch service periodically evaluates hello formula and resizes hello pool, based on workload and your other formula settings.</span></span> <span data-ttu-id="45f30-640">hello-tjänsten lägger till noder efter behov när det finns ett stort antal köade aktiviteter och tar bort noder när det finns inga uppgifter i kö eller inte körs.</span><span class="sxs-lookup"><span data-stu-id="45f30-640">hello service adds nodes as needed when there are a large number of queued tasks, and removes nodes when there are no queued or running tasks.</span></span>

<span data-ttu-id="45f30-641">En skalning formel kan baseras på hello följande mått:</span><span class="sxs-lookup"><span data-stu-id="45f30-641">A scaling formula can be based on hello following metrics:</span></span>

* <span data-ttu-id="45f30-642">**Tidsmått** baseras på statistik som samlas in var femte minut i hello angivna antalet timmar.</span><span class="sxs-lookup"><span data-stu-id="45f30-642">**Time metrics** are based on statistics collected every five minutes in hello specified number of hours.</span></span>
* <span data-ttu-id="45f30-643">**Resursmått** baseras på processoranvändning, bandbreddsanvändning, minnesanvändning och antalet noder.</span><span class="sxs-lookup"><span data-stu-id="45f30-643">**Resource metrics** are based on CPU usage, bandwidth usage, memory usage, and number of nodes.</span></span>
* <span data-ttu-id="45f30-644">**Aktivitetsmått** baseras på aktivitetens tillstånd, t.ex. *Aktiv* (köad), *Körs* eller *Slutförd*.</span><span class="sxs-lookup"><span data-stu-id="45f30-644">**Task metrics** are based on task state, such as *Active* (queued), *Running*, or *Completed*.</span></span>

<span data-ttu-id="45f30-645">När automatisk skalning minskar hello antalet beräkningsnoder i poolen, måste du bestämma hur toohandle aktiviteter som körs när hello hello minska igen.</span><span class="sxs-lookup"><span data-stu-id="45f30-645">When automatic scaling decreases hello number of compute nodes in a pool, you must consider how toohandle tasks that are running at hello time of hello decrease operation.</span></span> <span data-ttu-id="45f30-646">tooaccommodate, batchen innehåller en *nod flyttningen alternativet* som ska inkluderas i formler.</span><span class="sxs-lookup"><span data-stu-id="45f30-646">tooaccommodate this, Batch provides a *node deallocation option* that you can include in your formulas.</span></span> <span data-ttu-id="45f30-647">Du kan till exempel ange att aktiviteter som körs stoppas omedelbart, stoppas omedelbart och sedan placerats i kö för körning på en annan nod, eller tillåtna toofinish innan hello noden tas bort från hello poolen.</span><span class="sxs-lookup"><span data-stu-id="45f30-647">For example, you can specify that running tasks are stopped immediately, stopped immediately and then requeued for execution on another node, or allowed toofinish before hello node is removed from hello pool.</span></span>

<span data-ttu-id="45f30-648">Mer information om automatisk skalning av program finns i [Skala beräkningsnoder automatiskt i en Azure Batch-pool](batch-automatic-scaling.md).</span><span class="sxs-lookup"><span data-stu-id="45f30-648">For more information about automatically scaling an application, see [Automatically scale compute nodes in an Azure Batch pool](batch-automatic-scaling.md).</span></span>

> [!TIP]
> <span data-ttu-id="45f30-649">toomaximize beräkna resursutnyttjande, ange hello mål antalet noder toozero hello slutet av ett jobb, men tillåter toofinish för pågående aktiviteter.</span><span class="sxs-lookup"><span data-stu-id="45f30-649">toomaximize compute resource utilization, set hello target number of nodes toozero at hello end of a job, but allow running tasks toofinish.</span></span>
>
>

## <a name="security-with-certificates"></a><span data-ttu-id="45f30-650">Säkerhet med certifikat</span><span class="sxs-lookup"><span data-stu-id="45f30-650">Security with certificates</span></span>
<span data-ttu-id="45f30-651">Vanligtvis behöver du toouse certifikat när du kryptera eller dekryptera känsliga data för uppgifter som hello nyckel för en [Azure Storage-konto][azure_storage].</span><span class="sxs-lookup"><span data-stu-id="45f30-651">You typically need toouse certificates when you encrypt or decrypt sensitive information for tasks, like hello key for an [Azure Storage account][azure_storage].</span></span> <span data-ttu-id="45f30-652">toosupport kan du installera certifikat på noder.</span><span class="sxs-lookup"><span data-stu-id="45f30-652">toosupport this, you can install certificates on nodes.</span></span> <span data-ttu-id="45f30-653">Krypterade hemligheter släpps tootasks via kommandoradsparametrar eller inbäddat i någon av hello uppgiften resurser och hello installerade certifikat kan vara används toodecrypt dem.</span><span class="sxs-lookup"><span data-stu-id="45f30-653">Encrypted secrets are passed tootasks via command-line parameters or embedded in one of hello task resources, and hello installed certificates can be used toodecrypt them.</span></span>

<span data-ttu-id="45f30-654">Du använder hello [Lägg till certifikat] [ rest_add_cert] åtgärden (Batch REST) eller [CertificateOperations.CreateCertificate] [ net_create_cert] metod (Batch .NET) tooadd certifikat-tooa Batch-kontot.</span><span class="sxs-lookup"><span data-stu-id="45f30-654">You use hello [Add certificate][rest_add_cert] operation (Batch REST) or [CertificateOperations.CreateCertificate][net_create_cert] method (Batch .NET) tooadd a certificate tooa Batch account.</span></span> <span data-ttu-id="45f30-655">Därefter kan du associera hello certifikat med en ny eller befintlig pool.</span><span class="sxs-lookup"><span data-stu-id="45f30-655">You can then associate hello certificate with a new or existing pool.</span></span> <span data-ttu-id="45f30-656">När ett certifikat är kopplad till en pool, installerar hello Batch-tjänsten hello certifikat på varje nod i hello pool.</span><span class="sxs-lookup"><span data-stu-id="45f30-656">When a certificate is associated with a pool, hello Batch service installs hello certificate on each node in hello pool.</span></span> <span data-ttu-id="45f30-657">hello Batch-tjänsten installeras hello tillämpliga certifikat när hello nod startas, innan du startar alla uppgifter (inklusive hello start och aktiviteten job manager).</span><span class="sxs-lookup"><span data-stu-id="45f30-657">hello Batch service installs hello appropriate certificates when hello node starts up, before launching any tasks (including hello start task and job manager task).</span></span>

<span data-ttu-id="45f30-658">Om du lägger till certifikat tooan *befintliga* poolen, måste du starta om dess compute-noder för hello certifikat toobe tillämpas toohello noder.</span><span class="sxs-lookup"><span data-stu-id="45f30-658">If you add certificates tooan *existing* pool, you must reboot its compute nodes for hello certificates toobe applied toohello nodes.</span></span>

## <a name="error-handling"></a><span data-ttu-id="45f30-659">Felhantering</span><span class="sxs-lookup"><span data-stu-id="45f30-659">Error handling</span></span>
<span data-ttu-id="45f30-660">Du kan hitta den nödvändiga toohandle både aktivitets- och fel i Batch-lösning.</span><span class="sxs-lookup"><span data-stu-id="45f30-660">You might find it necessary toohandle both task and application failures within your Batch solution.</span></span>

### <a name="task-failure-handling"></a><span data-ttu-id="45f30-661">Hantering av aktivitetsfel</span><span class="sxs-lookup"><span data-stu-id="45f30-661">Task failure handling</span></span>
<span data-ttu-id="45f30-662">Aktivitetsfel kan delas in i följande kategorier:</span><span class="sxs-lookup"><span data-stu-id="45f30-662">Task failures fall into these categories:</span></span>

* <span data-ttu-id="45f30-663">**Förbearbetningsfel**</span><span class="sxs-lookup"><span data-stu-id="45f30-663">**Pre-processing failures**</span></span>

    <span data-ttu-id="45f30-664">Om en aktivitet inte toostart, ställs inför bearbetnings fel för hello aktivitet.</span><span class="sxs-lookup"><span data-stu-id="45f30-664">If a task fails toostart, a pre-processing error is set for hello task.</span></span>  

    <span data-ttu-id="45f30-665">Förbearbetning fel kan inträffa om hello aktivitetens resursfiler har flyttat, hello Storage-konto är inte tillgänglig längre eller ett annat problem uppstod när att förhindrade hello lyckade kopiering av filer toohello nod.</span><span class="sxs-lookup"><span data-stu-id="45f30-665">Pre-processing errors can occur if hello task's resource files have moved, hello Storage account is no longer available, or another issue was encountered that prevented hello successful copying of files toohello node.</span></span>

* <span data-ttu-id="45f30-666">**Filöverföringsfel**</span><span class="sxs-lookup"><span data-stu-id="45f30-666">**File upload failures**</span></span>

    <span data-ttu-id="45f30-667">Om överföringen av filer som har angetts för en aktivitet misslyckas av någon anledning, ange ett filöverföringsfel för hello aktivitet.</span><span class="sxs-lookup"><span data-stu-id="45f30-667">If uploading files that are specified for a task fails for any reason, a file upload error is set for hello task.</span></span>

    <span data-ttu-id="45f30-668">Överför fel kan inträffa om hello SAS som angavs för åtkomst till Azure Storage är ogiltig eller inte har skrivbehörighet, om hello storage-konto är inte längre tillgänglig, eller om ett annat problem uppstår som förhindrade hello lyckade kopiering av filer från filen hello-nod.</span><span class="sxs-lookup"><span data-stu-id="45f30-668">File upload errors can occur if hello SAS supplied for accessing Azure Storage is invalid or does not provide write permissions, if hello storage account is no longer available, or if another issue was encountered that prevented hello successful copying of files from hello node.</span></span>    

* <span data-ttu-id="45f30-669">**Programfel**</span><span class="sxs-lookup"><span data-stu-id="45f30-669">**Application failures**</span></span>

    <span data-ttu-id="45f30-670">hello-processen som anges via kommandoraden hello aktivitet kan också misslyckas.</span><span class="sxs-lookup"><span data-stu-id="45f30-670">hello process that is specified by hello task's command line can also fail.</span></span> <span data-ttu-id="45f30-671">hello processen bedöms toohave misslyckades när slutkoden noll returneras av hello process som körs av hello aktivitet (se *aktivitet slutkoder* i nästa avsnitt om hello).</span><span class="sxs-lookup"><span data-stu-id="45f30-671">hello process is deemed toohave failed when a nonzero exit code is returned by hello process that is executed by hello task (see *Task exit codes* in hello next section).</span></span>

    <span data-ttu-id="45f30-672">Programfel, kan du konfigurera Batch tooautomatically försök hello uppgiften tooa angivet antal gånger.</span><span class="sxs-lookup"><span data-stu-id="45f30-672">For application failures, you can configure Batch tooautomatically retry hello task up tooa specified number of times.</span></span>

* <span data-ttu-id="45f30-673">**Begränsningsfel**</span><span class="sxs-lookup"><span data-stu-id="45f30-673">**Constraint failures**</span></span>

    <span data-ttu-id="45f30-674">Du kan ange en begränsning som anger hello maximal körning varaktighet för ett jobb eller en uppgift, hello *maxWallClockTime*.</span><span class="sxs-lookup"><span data-stu-id="45f30-674">You can set a constraint that specifies hello maximum execution duration for a job or task, hello *maxWallClockTime*.</span></span> <span data-ttu-id="45f30-675">Detta kan vara användbart för avslutar aktiviteter som inte tooprogress.</span><span class="sxs-lookup"><span data-stu-id="45f30-675">This can be useful for terminating tasks that fail tooprogress.</span></span>

    <span data-ttu-id="45f30-676">När hello längsta tid har överskridits hello är markerad som *slutförts*, men hello slutkoden har angetts för`0xC000013A` och hello *schedulingError* fält har markerats som `{ category:"ServerError", code="TaskEnded"}`.</span><span class="sxs-lookup"><span data-stu-id="45f30-676">When hello maximum amount of time has been exceeded, hello task is marked as *completed*, but hello exit code is set too`0xC000013A` and hello *schedulingError* field is marked as `{ category:"ServerError", code="TaskEnded"}`.</span></span>

### <a name="debugging-application-failures"></a><span data-ttu-id="45f30-677">Felsöka programfel</span><span class="sxs-lookup"><span data-stu-id="45f30-677">Debugging application failures</span></span>
* <span data-ttu-id="45f30-678">`stderr` och `stdout`</span><span class="sxs-lookup"><span data-stu-id="45f30-678">`stderr` and `stdout`</span></span>

    <span data-ttu-id="45f30-679">Ett program kan ge diagnostikdata som du kan använda tootroubleshoot problem under körningen.</span><span class="sxs-lookup"><span data-stu-id="45f30-679">During execution, an application might produce diagnostic output that you can use tootroubleshoot issues.</span></span> <span data-ttu-id="45f30-680">Som anges i hello tidigare avsnittet [filer och kataloger](#files-and-directories), hello Batch-tjänsten skriver standardutdata och standardfel utdata för`stdout.txt` och `stderr.txt` filer i katalogen för hello aktivitet på hello beräkningsnod.</span><span class="sxs-lookup"><span data-stu-id="45f30-680">As mentioned in hello earlier section [Files and directories](#files-and-directories), hello Batch service writes standard output and standard error output too`stdout.txt` and `stderr.txt` files in hello task directory on hello compute node.</span></span> <span data-ttu-id="45f30-681">Du kan använda hello Azure-portalen eller någon av hello Batch SDK toodownload dessa filer.</span><span class="sxs-lookup"><span data-stu-id="45f30-681">You can use hello Azure portal or one of hello Batch SDKs toodownload these files.</span></span> <span data-ttu-id="45f30-682">Du kan till exempel hämta dessa och andra filer för felsökning med hjälp av [ComputeNode.GetNodeFile] [ net_getfile_node] och [CloudTask.GetNodeFile] [ net_getfile_task] i hello Batch .NET-biblioteket.</span><span class="sxs-lookup"><span data-stu-id="45f30-682">For example, you can retrieve these and other files for troubleshooting purposes by using [ComputeNode.GetNodeFile][net_getfile_node] and [CloudTask.GetNodeFile][net_getfile_task] in hello Batch .NET library.</span></span>

* <span data-ttu-id="45f30-683">**Slutkoder för aktiviteter**</span><span class="sxs-lookup"><span data-stu-id="45f30-683">**Task exit codes**</span></span>

    <span data-ttu-id="45f30-684">Som tidigare nämnts är har en aktivitet markerats som misslyckades på grund av hello Batch-tjänsten om hello process som körs av hello uppgiften returnerar slutkoden som inte är noll.</span><span class="sxs-lookup"><span data-stu-id="45f30-684">As mentioned earlier, a task is marked as failed by hello Batch service if hello process that is executed by hello task returns a nonzero exit code.</span></span> <span data-ttu-id="45f30-685">När en uppgift utförs en process, Batch fyller hello aktiviteten avsluta kodegenskapen med hello *returkod hello processens*.</span><span class="sxs-lookup"><span data-stu-id="45f30-685">When a task executes a process, Batch populates hello task's exit code property with hello *return code of hello process*.</span></span> <span data-ttu-id="45f30-686">Det är viktigt toonote som en aktivitet slutkoden är **inte** bestäms av hello Batch-tjänsten.</span><span class="sxs-lookup"><span data-stu-id="45f30-686">It is important toonote that a task's exit code is **not** determined by hello Batch service.</span></span> <span data-ttu-id="45f30-687">En uppgift slutkoden bestäms av hello-processen eller hello operativsystemet på vilken hello process som körs.</span><span class="sxs-lookup"><span data-stu-id="45f30-687">A task's exit code is determined by hello process itself or hello operating system on which hello process executed.</span></span>

### <a name="accounting-for-task-failures-or-interruptions"></a><span data-ttu-id="45f30-688">Ta med aktivitetsfel eller avbrott i beräkningen</span><span class="sxs-lookup"><span data-stu-id="45f30-688">Accounting for task failures or interruptions</span></span>
<span data-ttu-id="45f30-689">Aktiviteter kan ibland misslyckas eller avbrytas.</span><span class="sxs-lookup"><span data-stu-id="45f30-689">Tasks might occasionally fail or be interrupted.</span></span> <span data-ttu-id="45f30-690">hello själva uppgiften programmet misslyckas, hello noden vilka hello uppgiften körs kan startas eller hello nod kan tas bort från poolen hello under en åtgärd för storleksändring om hello poolens flyttningen principen är uppsättningen tooremove noder omedelbart utan att vänta på uppgifter toofinish.</span><span class="sxs-lookup"><span data-stu-id="45f30-690">hello task application itself might fail, hello node on which hello task is running might be rebooted, or hello node might be removed from hello pool during a resize operation if hello pool's deallocation policy is set tooremove nodes immediately without waiting for tasks toofinish.</span></span> <span data-ttu-id="45f30-691">I samtliga fall hello aktiviteten kan vara automatiskt placerats i kö av Batch för körning på en annan nod.</span><span class="sxs-lookup"><span data-stu-id="45f30-691">In all cases, hello task can be automatically requeued by Batch for execution on another node.</span></span>

<span data-ttu-id="45f30-692">Det är också möjligt för ett tillfälligt fel toocause toohang en aktivitet eller ta för lång tooexecute.</span><span class="sxs-lookup"><span data-stu-id="45f30-692">It is also possible for an intermittent issue toocause a task toohang or take too long tooexecute.</span></span> <span data-ttu-id="45f30-693">Du kan ange hello maximal körning intervall för en aktivitet.</span><span class="sxs-lookup"><span data-stu-id="45f30-693">You can set hello maximum execution interval for a task.</span></span> <span data-ttu-id="45f30-694">Om hello maximal körning intervall har överskridits avbryter hello uppgiften programmet hello Batch-tjänsten.</span><span class="sxs-lookup"><span data-stu-id="45f30-694">If hello maximum execution interval is exceeded, hello Batch service interrupts hello task application.</span></span>

### <a name="connecting-toocompute-nodes"></a><span data-ttu-id="45f30-695">Ansluta toocompute noder</span><span class="sxs-lookup"><span data-stu-id="45f30-695">Connecting toocompute nodes</span></span>
<span data-ttu-id="45f30-696">Du kan utföra ytterligare felsökning och felsökning genom att logga in tooa beräkningsnod via fjärranslutning.</span><span class="sxs-lookup"><span data-stu-id="45f30-696">You can perform additional debugging and troubleshooting by signing in tooa compute node remotely.</span></span> <span data-ttu-id="45f30-697">Du kan använda hello Azure portal toodownload en Remote Desktop Protocol (RDP)-fil för Windows-noder och hämta SSH (Secure Shell) anslutningsinformationen för Linux-noder.</span><span class="sxs-lookup"><span data-stu-id="45f30-697">You can use hello Azure portal toodownload a Remote Desktop Protocol (RDP) file for Windows nodes and obtain Secure Shell (SSH) connection information for Linux nodes.</span></span> <span data-ttu-id="45f30-698">Du kan också göra detta med hjälp av hello Batch-API: er – till exempel med [Batch .NET] [ net_rdpfile] eller [Batch Python](batch-linux-nodes.md#connect-to-linux-nodes-using-ssh).</span><span class="sxs-lookup"><span data-stu-id="45f30-698">You can also do this by using hello Batch APIs--for example, with [Batch .NET][net_rdpfile] or [Batch Python](batch-linux-nodes.md#connect-to-linux-nodes-using-ssh).</span></span>

> [!IMPORTANT]
> <span data-ttu-id="45f30-699">tooconnect tooa nod via RDP eller SSH, du måste först skapa en användare på hello-nod.</span><span class="sxs-lookup"><span data-stu-id="45f30-699">tooconnect tooa node via RDP or SSH, you must first create a user on hello node.</span></span> <span data-ttu-id="45f30-700">toodo, du kan använda hello Azure-portalen [lägger till en användarens konto tooa nod] [ rest_create_user] med hello Batch REST API kan anropa hello [ComputeNode.CreateComputeNodeUser] [ net_create_user] metod i Batch .NET eller anropet hello [add_user] [ py_add_user] metod i hello Batch Python-modulen.</span><span class="sxs-lookup"><span data-stu-id="45f30-700">toodo this, you can use hello Azure portal, [add a user account tooa node][rest_create_user] by using hello Batch REST API, call hello [ComputeNode.CreateComputeNodeUser][net_create_user] method in Batch .NET, or call hello [add_user][py_add_user] method in hello Batch Python module.</span></span>
>
>

### <a name="troubleshooting-problematic-compute-nodes"></a><span data-ttu-id="45f30-701">Felsöka problematiska beräkningsnoder</span><span class="sxs-lookup"><span data-stu-id="45f30-701">Troubleshooting problematic compute nodes</span></span>
<span data-ttu-id="45f30-702">I situationer där vissa av dina uppgifter misslyckas granska Batch klientprogrammet eller tjänsten hello metadata för hello misslyckades uppgifter tooidentify problem nod.</span><span class="sxs-lookup"><span data-stu-id="45f30-702">In situations where some of your tasks are failing, your Batch client application or service can examine hello metadata of hello failed tasks tooidentify a misbehaving node.</span></span> <span data-ttu-id="45f30-703">Varje nod i en pool ges ett unikt ID och hello nod som körs på en aktivitet som ingår i hello uppgiften metadata.</span><span class="sxs-lookup"><span data-stu-id="45f30-703">Each node in a pool is given a unique ID, and hello node on which a task runs is included in hello task metadata.</span></span> <span data-ttu-id="45f30-704">När du har identifierat en nod som har problem kan du utföra flera åtgärder:</span><span class="sxs-lookup"><span data-stu-id="45f30-704">After you've identified a problem node, you can take several actions with it:</span></span>

* <span data-ttu-id="45f30-705">**Starta om noden hello** ([REST][rest_reboot] | [.NET][net_reboot])</span><span class="sxs-lookup"><span data-stu-id="45f30-705">**Reboot hello node** ([REST][rest_reboot] | [.NET][net_reboot])</span></span>

    <span data-ttu-id="45f30-706">Starta om hello nod kan ibland Rensa Latenta problem som låsta eller krasch processer.</span><span class="sxs-lookup"><span data-stu-id="45f30-706">Restarting hello node can sometimes clear up latent issues like stuck or crashed processes.</span></span> <span data-ttu-id="45f30-707">Observera att om din pool använder Startuppgiften eller jobbet använder en projektaktivitet förberedelse, de utförs när hello nod startas om.</span><span class="sxs-lookup"><span data-stu-id="45f30-707">Note that if your pool uses a start task or your job uses a job preparation task, they are executed when hello node restarts.</span></span>
* <span data-ttu-id="45f30-708">**Återavbilda hello nod** ([REST][rest_reimage] | [.NET][net_reimage])</span><span class="sxs-lookup"><span data-stu-id="45f30-708">**Reimage hello node** ([REST][rest_reimage] | [.NET][net_reimage])</span></span>

    <span data-ttu-id="45f30-709">Detta installerar hello operativsystemet på hello-nod.</span><span class="sxs-lookup"><span data-stu-id="45f30-709">This reinstalls hello operating system on hello node.</span></span> <span data-ttu-id="45f30-710">Starta aktiviteter och jobb förberedande uppgifter är på nytt efter hello nod har varit avbildade som startas om en nod.</span><span class="sxs-lookup"><span data-stu-id="45f30-710">As with rebooting a node, start tasks and job preparation tasks are rerun after hello node has been reimaged.</span></span>
* <span data-ttu-id="45f30-711">**Ta bort hello nod hello** ([REST][rest_remove] | [.NET][net_remove])</span><span class="sxs-lookup"><span data-stu-id="45f30-711">**Remove hello node from hello pool** ([REST][rest_remove] | [.NET][net_remove])</span></span>

    <span data-ttu-id="45f30-712">Ibland är det nödvändigt toocompletely ta bort hello noden från hello poolen.</span><span class="sxs-lookup"><span data-stu-id="45f30-712">Sometimes it is necessary toocompletely remove hello node from hello pool.</span></span>
* <span data-ttu-id="45f30-713">**Inaktivera schemaläggning på hello nod** ([REST][rest_offline] | [.NET][net_offline])</span><span class="sxs-lookup"><span data-stu-id="45f30-713">**Disable task scheduling on hello node** ([REST][rest_offline] | [.NET][net_offline])</span></span>

    <span data-ttu-id="45f30-714">Detta tar effektivt hello noden offline så att inga ytterligare aktiviteter tilldelas tooit, men tillåter hello nod tooremain körs och i hello pool.</span><span class="sxs-lookup"><span data-stu-id="45f30-714">This effectively takes hello node offline so that no further tasks are assigned tooit, but allows hello node tooremain running and in hello pool.</span></span> <span data-ttu-id="45f30-715">Detta gör du tooperform ytterligare undersökning hello orsak hello fel utan att förlora data hello om aktiviteten, och utan hello nod orsakar misslyckade ytterligare aktiviteter.</span><span class="sxs-lookup"><span data-stu-id="45f30-715">This enables you tooperform further investigation into hello cause of hello failures without losing hello failed task's data, and without hello node causing additional task failures.</span></span> <span data-ttu-id="45f30-716">Du kan till exempel inaktivera schemaläggning på hello nod sedan [fjärransluta](#connecting-to-compute-nodes) tooexamine hello nodens händelseloggar eller utföra andra åtgärder för felsökning.</span><span class="sxs-lookup"><span data-stu-id="45f30-716">For example, you can disable task scheduling on hello node, then [sign in remotely](#connecting-to-compute-nodes) tooexamine hello node's event logs or perform other troubleshooting.</span></span> <span data-ttu-id="45f30-717">När du är klar undersökningen kan du sedan kan ta hello nod online igen genom att aktivera schemaläggning ([REST][rest_online] | [.NET] [ net_online]), eller utföra en hello andra åtgärder som nämnts tidigare.</span><span class="sxs-lookup"><span data-stu-id="45f30-717">After you've finished your investigation, you can then bring hello node back online by enabling task scheduling ([REST][rest_online] | [.NET][net_online]), or perform one of hello other actions discussed earlier.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="45f30-718">Med varje åtgärd som beskrivs i det här avsnittet--omstart är avbildningsåterställning, ta bort och inaktivera schemaläggning – du kan toospecify hur aktiviteter som körs på hello noden hanteras när du utför hello-åtgärd.</span><span class="sxs-lookup"><span data-stu-id="45f30-718">With each action that is described in this section--reboot, reimage, remove, and disable task scheduling--you are able toospecify how tasks currently running on hello node are handled when you perform hello action.</span></span> <span data-ttu-id="45f30-719">Till exempel när du inaktiverar schemaläggning på en nod med hjälp av hello Batch .NET-klientbibliotek, kan du ange en [DisableComputeNodeSchedulingOption] [ net_offline_option] enum värdet toospecify om för**Avsluta** köra aktiviteter, **Requeue** dem för schemaläggning på andra noder eller låt pågående aktiviteter toocomplete innan du utför åtgärden hello (**TaskCompletion**).</span><span class="sxs-lookup"><span data-stu-id="45f30-719">For example, when you disable task scheduling on a node by using hello Batch .NET client library, you can specify a [DisableComputeNodeSchedulingOption][net_offline_option] enum value toospecify whether too**Terminate** running tasks, **Requeue** them for scheduling on other nodes, or allow running tasks toocomplete before performing hello action (**TaskCompletion**).</span></span>
>
>

## <a name="next-steps"></a><span data-ttu-id="45f30-720">Nästa steg</span><span class="sxs-lookup"><span data-stu-id="45f30-720">Next steps</span></span>
* <span data-ttu-id="45f30-721">Lär dig mer om hello [Batch-API: er och verktyg](batch-apis-tools.md) tillgängliga för att skapa Batch-lösningar.</span><span class="sxs-lookup"><span data-stu-id="45f30-721">Learn about hello [Batch APIs and tools](batch-apis-tools.md) available for building Batch solutions.</span></span>
* <span data-ttu-id="45f30-722">Gå igenom en Batch exempelprogrammet stegvisa i [komma igång med hello Azure Batch-biblioteket för .NET](batch-dotnet-get-started.md).</span><span class="sxs-lookup"><span data-stu-id="45f30-722">Walk through a sample Batch application step-by-step in [Get started with hello Azure Batch Library for .NET](batch-dotnet-get-started.md).</span></span> <span data-ttu-id="45f30-723">Det finns också en [Python-versionen](batch-python-tutorial.md) hello kursen som kör en arbetsbelastning på Linux compute-noder.</span><span class="sxs-lookup"><span data-stu-id="45f30-723">There is also a [Python version](batch-python-tutorial.md) of hello tutorial that runs a workload on Linux compute nodes.</span></span>
* <span data-ttu-id="45f30-724">Hämta och skapa hello [Batch Explorer] [ github_batchexplorer] exempelprojektet för användning när du utvecklar dina Batch-lösningar.</span><span class="sxs-lookup"><span data-stu-id="45f30-724">Download and build hello [Batch Explorer][github_batchexplorer] sample project for use while you develop your Batch solutions.</span></span> <span data-ttu-id="45f30-725">Med hello Batch Explorer kan utföra du följande hello och mycket mer:</span><span class="sxs-lookup"><span data-stu-id="45f30-725">Using hello Batch Explorer, you can perform hello following and more:</span></span>

  * <span data-ttu-id="45f30-726">Övervaka och hantera pooler, jobb och aktiviteter i ditt Batch-konto</span><span class="sxs-lookup"><span data-stu-id="45f30-726">Monitor and manipulate pools, jobs, and tasks within your Batch account</span></span>
  * <span data-ttu-id="45f30-727">Ladda ned `stdout.txt`, `stderr.txt` och andra filer från noder</span><span class="sxs-lookup"><span data-stu-id="45f30-727">Download `stdout.txt`, `stderr.txt`, and other files from nodes</span></span>
  * <span data-ttu-id="45f30-728">Skapa användare på noder och ladda ned RDP-filer för fjärrinloggning</span><span class="sxs-lookup"><span data-stu-id="45f30-728">Create users on nodes and download RDP files for remote login</span></span>
* <span data-ttu-id="45f30-729">Lär dig hur för[skapa pooler med Linux datornoderna](batch-linux-nodes.md).</span><span class="sxs-lookup"><span data-stu-id="45f30-729">Learn how too[create pools of Linux compute nodes](batch-linux-nodes.md).</span></span>
* <span data-ttu-id="45f30-730">Besök hello [Azure Batch-forum] [ batch_forum] på MSDN.</span><span class="sxs-lookup"><span data-stu-id="45f30-730">Visit hello [Azure Batch forum][batch_forum] on MSDN.</span></span> <span data-ttu-id="45f30-731">hello forum är en bra placera tooask frågor, oavsett om det bara lära sig eller en expert med Batch.</span><span class="sxs-lookup"><span data-stu-id="45f30-731">hello forum is a good place tooask questions, whether you are just learning or are an expert in using Batch.</span></span>

[1]: ./media/batch-api-basics/node-folder-structure.png

[azure_storage]: https://azure.microsoft.com/services/storage/
[batch_forum]: https://social.msdn.microsoft.com/Forums/en-US/home?forum=azurebatch
[cloud_service_sizes]: ../cloud-services/cloud-services-sizes-specs.md
[msmpi]: https://msdn.microsoft.com/library/bb524831.aspx
[github_samples]: https://github.com/Azure/azure-batch-samples
[github_sample_taskdeps]:  https://github.com/Azure/azure-batch-samples/tree/master/CSharp/ArticleProjects/TaskDependencies
[github_batchexplorer]: https://github.com/Azure/azure-batch-samples/tree/master/CSharp/BatchExplorer
[batch_net_api]: https://msdn.microsoft.com/library/azure/mt348682.aspx
[msdn_env_vars]: https://msdn.microsoft.com/library/azure/mt743623.aspx
[net_cloudjob_jobmanagertask]: https://msdn.microsoft.com/library/azure/microsoft.azure.batch.cloudjob.jobmanagertask.aspx
[net_cloudjob_priority]: https://msdn.microsoft.com/library/azure/microsoft.azure.batch.cloudjob.priority.aspx
[net_cloudpool_starttask]: https://msdn.microsoft.com/library/azure/microsoft.azure.batch.cloudpool.starttask.aspx
[net_cloudtask_env]: https://msdn.microsoft.com/library/azure/microsoft.azure.batch.cloudtask.environmentsettings.aspx
[net_create_cert]: https://msdn.microsoft.com/library/azure/microsoft.azure.batch.certificateoperations.createcertificate.aspx
[net_create_user]: https://msdn.microsoft.com/library/azure/microsoft.azure.batch.computenode.createcomputenodeuser.aspx
[net_getfile_node]: https://msdn.microsoft.com/library/azure/microsoft.azure.batch.computenode.getnodefile.aspx
[net_getfile_task]: https://msdn.microsoft.com/library/azure/microsoft.azure.batch.cloudtask.getnodefile.aspx
[net_job_env]: https://msdn.microsoft.com/library/azure/microsoft.azure.batch.cloudjob.commonenvironmentsettings.aspx
[net_multiinstancesettings]: https://msdn.microsoft.com/library/azure/microsoft.azure.batch.multiinstancesettings.aspx
[net_onalltaskscomplete]: https://msdn.microsoft.com/library/azure/microsoft.azure.batch.cloudjob.onalltaskscomplete.aspx
[net_rdp]: https://msdn.microsoft.com/library/azure/microsoft.azure.batch.computenode.getrdpfile.aspx
[net_reboot]: https://msdn.microsoft.com/library/azure/mt631495.aspx
[net_reimage]: https://msdn.microsoft.com/library/azure/mt631496.aspx
[net_remove]: https://msdn.microsoft.com/library/azure/microsoft.azure.batch.pooloperations.removefrompoolasync.aspx
[net_offline]: https://msdn.microsoft.com/library/azure/microsoft.azure.batch.computenode.disableschedulingasync.aspx
[net_online]: https://msdn.microsoft.com/library/azure/microsoft.azure.batch.computenode.enableschedulingasync.aspx
[net_offline_option]: https://msdn.microsoft.com/library/azure/microsoft.azure.batch.common.disablecomputenodeschedulingoption.aspx
[net_rdpfile]: https://msdn.microsoft.com/library/azure/Mt272127.aspx
[vnet]: https://msdn.microsoft.com/library/azure/dn820174.aspx#bk_netconf

[py_add_user]: http://azure-sdk-for-python.readthedocs.io/en/latest/ref/azure.batch.operations.html#azure.batch.operations.ComputeNodeOperations.add_user

[batch_rest_api]: https://msdn.microsoft.com/library/azure/Dn820158.aspx
[rest_add_job]: https://msdn.microsoft.com/library/azure/mt282178.aspx
[rest_add_pool]: https://msdn.microsoft.com/library/azure/dn820174.aspx
[rest_add_cert]: https://msdn.microsoft.com/library/azure/dn820169.aspx
[rest_add_task]: https://msdn.microsoft.com/library/azure/dn820105.aspx
[rest_create_user]: https://msdn.microsoft.com/library/azure/dn820137.aspx
[rest_get_task_info]: https://msdn.microsoft.com/library/azure/dn820133.aspx
[rest_job_schedules]: https://msdn.microsoft.com/library/azure/mt282179.aspx
[rest_multiinstance]: https://msdn.microsoft.com/library/azure/mt637905.aspx
[rest_multiinstancesettings]: https://msdn.microsoft.com/library/azure/dn820105.aspx#multiInstanceSettings
[rest_update_job]: https://msdn.microsoft.com/library/azure/dn820162.aspx
[rest_rdp]: https://msdn.microsoft.com/library/azure/dn820120.aspx
[rest_reboot]: https://msdn.microsoft.com/library/azure/dn820171.aspx
[rest_reimage]: https://msdn.microsoft.com/library/azure/dn820157.aspx
[rest_remove]: https://msdn.microsoft.com/library/azure/dn820194.aspx
[rest_offline]: https://msdn.microsoft.com/library/azure/mt637904.aspx
[rest_online]: https://msdn.microsoft.com/library/azure/mt637907.aspx

[vm_marketplace]: https://azure.microsoft.com/marketplace/virtual-machines/

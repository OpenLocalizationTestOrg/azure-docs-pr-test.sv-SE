---
title: "aaaTroubleshoot långsam säkerhetskopiering av filer och mappar i Azure Backup | Microsoft Docs"
description: "Innehåller felsökning vägledning toohelp du diagnostisera hello orsaken till Azure Backup prestandaproblem"
services: backup
documentationcenter: 
author: genlin
manager: cshepard
editor: 
ms.assetid: e379180a-db13-4e0c-90e4-28e5dd6f5b14
ms.service: backup
ms.workload: storage-backup-recovery
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 06/13/2017
ms.author: genli
ms.openlocfilehash: 21d79bbd03c2706bc43fcc7c14020cffd6b919c7
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: sv-SE
ms.lasthandoff: 10/06/2017
---
# <a name="troubleshoot-slow-backup-of-files-and-folders-in-azure-backup"></a><span data-ttu-id="0c85f-103">Felsökning av långsam säkerhetskopiering av filer och mappar i Azure Backup</span><span class="sxs-lookup"><span data-stu-id="0c85f-103">Troubleshoot slow backup of files and folders in Azure Backup</span></span>
<span data-ttu-id="0c85f-104">Den här artikeln innehåller felsökningsinformation toohelp du diagnosticera hello orsaken till långsam prestanda vid säkerhetskopiering av filer och mappar när du använder Azure Backup.</span><span class="sxs-lookup"><span data-stu-id="0c85f-104">This article provides troubleshooting guidance toohelp you diagnose hello cause of slow backup performance for files and folders when you're using Azure Backup.</span></span> <span data-ttu-id="0c85f-105">När du använder hello Azure Backup agent tooback filer kan hello säkerhetskopieringen ta längre tid än förväntat.</span><span class="sxs-lookup"><span data-stu-id="0c85f-105">When you use hello Azure Backup agent tooback up files, hello backup process might take longer than expected.</span></span> <span data-ttu-id="0c85f-106">Den här fördröjningen kan bero på en eller flera av följande hello:</span><span class="sxs-lookup"><span data-stu-id="0c85f-106">This delay might be caused by one or more of hello following:</span></span>

* [<span data-ttu-id="0c85f-107">Det finns prestandaflaskhalsar på hello-dator som säkerhetskopieras.</span><span class="sxs-lookup"><span data-stu-id="0c85f-107">There are performance bottlenecks on hello computer that’s being backed up.</span></span>](#cause1)
* [<span data-ttu-id="0c85f-108">En annan process eller antivirusprogram kan störa hello Azure Backup-processen.</span><span class="sxs-lookup"><span data-stu-id="0c85f-108">Another process or antivirus software is interfering with hello Azure Backup process.</span></span>](#cause2)
* [<span data-ttu-id="0c85f-109">hello Backup-agenten körs på en Azure-dator (VM).</span><span class="sxs-lookup"><span data-stu-id="0c85f-109">hello Backup agent is running on an Azure virtual machine (VM).</span></span>](#cause3)  
* [<span data-ttu-id="0c85f-110">Du säkerhetskopierar ett stort antal (miljoner) filer.</span><span class="sxs-lookup"><span data-stu-id="0c85f-110">You're backing up a large number (millions) of files.</span></span>](#cause4)

<span data-ttu-id="0c85f-111">Innan du startar felsökning av problem, rekommenderar vi att du hämtar och installerar hello [senaste Azure Backup-agenten](http://aka.ms/azurebackup_agent).</span><span class="sxs-lookup"><span data-stu-id="0c85f-111">Before you start troubleshooting issues, we recommend that you download and install hello [latest Azure Backup agent](http://aka.ms/azurebackup_agent).</span></span> <span data-ttu-id="0c85f-112">Vi göra uppdateras ofta toohello Backup-agenten toofix olika problem, lägga till funktioner och förbättra prestanda.</span><span class="sxs-lookup"><span data-stu-id="0c85f-112">We make frequent updates toohello Backup agent toofix various issues, add features, and improve performance.</span></span>

<span data-ttu-id="0c85f-113">Vi också rekommenderar att du läser igenom hello [Azure Backup service FAQ](backup-azure-backup-faq.md) toomake säker på att du inte har någon hello vanliga problem med konfigurationen.</span><span class="sxs-lookup"><span data-stu-id="0c85f-113">We also strongly recommend that you review hello [Azure Backup service FAQ](backup-azure-backup-faq.md) toomake sure you're not experiencing any of hello common configuration issues.</span></span>

[!INCLUDE [support-disclaimer](../../includes/support-disclaimer.md)]

<a id="cause1"></a>

## <a name="cause-performance-bottlenecks-on-hello-computer"></a><span data-ttu-id="0c85f-114">Orsak: Prestandaflaskhalsar på hello-dator</span><span class="sxs-lookup"><span data-stu-id="0c85f-114">Cause: Performance bottlenecks on hello computer</span></span>
<span data-ttu-id="0c85f-115">Flaskhalsar på hello-dator som säkerhetskopieras kan orsaka fördröjningar.</span><span class="sxs-lookup"><span data-stu-id="0c85f-115">Bottlenecks on hello computer that's being backed up can cause delays.</span></span> <span data-ttu-id="0c85f-116">Till exempel hello datorns möjlighet tooread eller skriva toodisk eller bandbredd toosend data hello nätverket, kan orsaka flaskhalsar.</span><span class="sxs-lookup"><span data-stu-id="0c85f-116">For example, hello computer's ability tooread or write toodisk, or available bandwidth toosend data over hello network, can cause bottlenecks.</span></span>

<span data-ttu-id="0c85f-117">Windows tillhandahåller ett inbyggda verktyg som kallas [Prestandaövervakaren](https://technet.microsoft.com/magazine/2008.08.pulse.aspx) (Perfmon) toodetect dessa flaskhalsar.</span><span class="sxs-lookup"><span data-stu-id="0c85f-117">Windows provides a built-in tool that's called [Performance Monitor](https://technet.microsoft.com/magazine/2008.08.pulse.aspx) (Perfmon) toodetect these bottlenecks.</span></span>

<span data-ttu-id="0c85f-118">Här följer några prestandaräknare och intervall som kan vara användbar vid diagnos av flaskhalsar för optimala säkerhetskopieringar.</span><span class="sxs-lookup"><span data-stu-id="0c85f-118">Here are some performance counters and ranges that can be helpful in diagnosing bottlenecks for optimal backups.</span></span>

| <span data-ttu-id="0c85f-119">Räknaren</span><span class="sxs-lookup"><span data-stu-id="0c85f-119">Counter</span></span> | <span data-ttu-id="0c85f-120">Status</span><span class="sxs-lookup"><span data-stu-id="0c85f-120">Status</span></span> |
| --- | --- |
| <span data-ttu-id="0c85f-121">Logisk Disk (fysisk Disk)--% inaktiv</span><span class="sxs-lookup"><span data-stu-id="0c85f-121">Logical Disk(Physical Disk)--%idle</span></span> |<span data-ttu-id="0c85f-122">• 100% inaktiv too50% inaktiv = felfri</span><span class="sxs-lookup"><span data-stu-id="0c85f-122">• 100% idle too50% idle = Healthy</span></span></br><span data-ttu-id="0c85f-123">• 49% inaktiv too20% inaktiv = varnings- eller Övervakare</span><span class="sxs-lookup"><span data-stu-id="0c85f-123">• 49% idle too20% idle = Warning or Monitor</span></span></br><span data-ttu-id="0c85f-124">• 19% inaktiv too0% inaktiv = kritiskt eller Out-of-specifikationen</span><span class="sxs-lookup"><span data-stu-id="0c85f-124">• 19% idle too0% idle = Critical or Out of Spec</span></span> |
| <span data-ttu-id="0c85f-125">Logisk Disk (fysisk Disk)--% medel Disk sek läsning eller skrivning</span><span class="sxs-lookup"><span data-stu-id="0c85f-125">Logical Disk(Physical Disk)--%Avg. Disk Sec Read or Write</span></span> |<span data-ttu-id="0c85f-126">• 0,001 ms too0.015 ms = felfri</span><span class="sxs-lookup"><span data-stu-id="0c85f-126">• 0.001 ms too0.015 ms  = Healthy</span></span></br><span data-ttu-id="0c85f-127">• 0.015 ms too0.025 ms = varnings- eller Övervakare</span><span class="sxs-lookup"><span data-stu-id="0c85f-127">• 0.015 ms too0.025 ms = Warning or Monitor</span></span></br><span data-ttu-id="0c85f-128">• 0.026 ms eller längre = kritiskt eller Out-of-specifikationen</span><span class="sxs-lookup"><span data-stu-id="0c85f-128">• 0.026 ms or longer = Critical or Out of Spec</span></span> |
| <span data-ttu-id="0c85f-129">Logisk Disk (fysisk Disk)--Aktuell diskkölängd (för alla instanser)</span><span class="sxs-lookup"><span data-stu-id="0c85f-129">Logical Disk(Physical Disk)--Current Disk Queue Length (for all instances)</span></span> |<span data-ttu-id="0c85f-130">80 begäranden i mer än 6 minuter</span><span class="sxs-lookup"><span data-stu-id="0c85f-130">80 requests for more than 6 minutes</span></span> |
| <span data-ttu-id="0c85f-131">Minne – icke växlingsbart systemminne-byte</span><span class="sxs-lookup"><span data-stu-id="0c85f-131">Memory--Pool Non Paged Bytes</span></span> |<span data-ttu-id="0c85f-132">• Mindre än 60% av poolen förbrukas = felfri</span><span class="sxs-lookup"><span data-stu-id="0c85f-132">• Less than 60% of pool consumed = Healthy</span></span><br><span data-ttu-id="0c85f-133">• 61% too80% av poolen förbrukas = varnings- eller Övervakare</span><span class="sxs-lookup"><span data-stu-id="0c85f-133">• 61% too80% of pool consumed = Warning or Monitor</span></span></br><span data-ttu-id="0c85f-134">• Större än 80% poolen förbrukas = kritiskt eller Out-of-specifikationen</span><span class="sxs-lookup"><span data-stu-id="0c85f-134">• Greater than 80% pool consumed = Critical or Out of Spec</span></span> |
| <span data-ttu-id="0c85f-135">Minne – växlingsbart systemminne-byte</span><span class="sxs-lookup"><span data-stu-id="0c85f-135">Memory--Pool Paged Bytes</span></span> |<span data-ttu-id="0c85f-136">• Mindre än 60% av poolen förbrukas = felfri</span><span class="sxs-lookup"><span data-stu-id="0c85f-136">• Less than 60% of pool consumed = Healthy</span></span></br><span data-ttu-id="0c85f-137">• 61% too80% av poolen förbrukas = varnings- eller Övervakare</span><span class="sxs-lookup"><span data-stu-id="0c85f-137">• 61% too80% of pool consumed = Warning or Monitor</span></span></br><span data-ttu-id="0c85f-138">• Större än 80% poolen förbrukas = kritiskt eller Out-of-specifikationen</span><span class="sxs-lookup"><span data-stu-id="0c85f-138">• Greater than 80% pool consumed = Critical or Out of Spec</span></span> |
| <span data-ttu-id="0c85f-139">Minne – tillgängliga megabyte</span><span class="sxs-lookup"><span data-stu-id="0c85f-139">Memory--Available Megabytes</span></span> |<span data-ttu-id="0c85f-140">• 50% av ledigt minne eller fler = felfri</span><span class="sxs-lookup"><span data-stu-id="0c85f-140">• 50% of free memory available or more = Healthy</span></span></br><span data-ttu-id="0c85f-141">• 25% av ledigt minne = Övervakare</span><span class="sxs-lookup"><span data-stu-id="0c85f-141">• 25% of free memory available = Monitor</span></span></br><span data-ttu-id="0c85f-142">• 10% av ledigt minne = varning</span><span class="sxs-lookup"><span data-stu-id="0c85f-142">• 10% of free memory available = Warning</span></span></br><span data-ttu-id="0c85f-143">• Mindre än 100 MB eller 5% av ledigt minne = kritiskt eller Out-of-specifikationen</span><span class="sxs-lookup"><span data-stu-id="0c85f-143">• Less than 100 MB or 5% of free memory available = Critical or Out of Spec</span></span> |
| <span data-ttu-id="0c85f-144">Processor –\%processortid (alla instanser)</span><span class="sxs-lookup"><span data-stu-id="0c85f-144">Processor--\%Processor Time (all instances)</span></span> |<span data-ttu-id="0c85f-145">• Mindre än 60% förbrukas = felfri</span><span class="sxs-lookup"><span data-stu-id="0c85f-145">• Less than 60% consumed = Healthy</span></span></br><span data-ttu-id="0c85f-146">• 61% too90% förbrukas = övervakaren eller varning</span><span class="sxs-lookup"><span data-stu-id="0c85f-146">• 61% too90% consumed = Monitor or Caution</span></span></br><span data-ttu-id="0c85f-147">• 91% too100% förbrukas = kritisk</span><span class="sxs-lookup"><span data-stu-id="0c85f-147">• 91% too100% consumed = Critical</span></span> |

> [!NOTE]
> <span data-ttu-id="0c85f-148">Om du finner att hello-infrastrukturen är hello sällan, rekommenderar vi att defragmenterar du hello diskar regelbundet för bättre prestanda.</span><span class="sxs-lookup"><span data-stu-id="0c85f-148">If you determine that hello infrastructure is hello culprit, we recommend that you defragment hello disks regularly for better performance.</span></span>
>
>

<a id="cause2"></a>

## <a name="cause-another-process-or-antivirus-software-interfering-with-azure-backup"></a><span data-ttu-id="0c85f-149">Orsak: En annan process eller antivirusprogram stör Azure Backup</span><span class="sxs-lookup"><span data-stu-id="0c85f-149">Cause: Another process or antivirus software interfering with Azure Backup</span></span>
<span data-ttu-id="0c85f-150">Vi har sett flera instanser där andra processer i hello Windows-system har försämrat prestanda för hello Azure Backup agent-processen.</span><span class="sxs-lookup"><span data-stu-id="0c85f-150">We've seen several instances where other processes in hello Windows system have negatively affected performance of hello Azure Backup agent process.</span></span> <span data-ttu-id="0c85f-151">Om du använder både hello Azure Backup-agenten och ett annat program tooback data eller om antivirusprogrammet körs och har ett lås på filer toobe säkerhetskopieras hello kan flera lås på filer orsaka konkurrens.</span><span class="sxs-lookup"><span data-stu-id="0c85f-151">For example, if you use both hello Azure Backup agent and another program tooback up data, or if antivirus software is running and has a lock on files toobe backed up, hello multiple locks on files might cause contention.</span></span> <span data-ttu-id="0c85f-152">I den här situationen hello säkerhetskopiering misslyckas eller hello jobb kan ta längre tid än förväntat.</span><span class="sxs-lookup"><span data-stu-id="0c85f-152">In this situation, hello backup might fail, or hello job might take longer than expected.</span></span>

<span data-ttu-id="0c85f-153">Hej bästa rekommendation i det här scenariot är tooturn av hello andra säkerhetskopieringsprogrammet toosee om hello säkerhetskopieringstiden för hello Azure Backup agent ändras.</span><span class="sxs-lookup"><span data-stu-id="0c85f-153">hello best recommendation in this scenario is tooturn off hello other backup program toosee whether hello backup time for hello Azure Backup agent changes.</span></span> <span data-ttu-id="0c85f-154">Vanligtvis att se till att flera säkerhetskopieringsjobb inte körs på hello samtidigt är tillräckligt tooprevent dem påverkar varandra.</span><span class="sxs-lookup"><span data-stu-id="0c85f-154">Usually, making sure that multiple backup jobs are not running at hello same time is sufficient tooprevent them from affecting each other.</span></span>

<span data-ttu-id="0c85f-155">För antivirusprogram, rekommenderar vi att du utesluter hello följande filer och platser:</span><span class="sxs-lookup"><span data-stu-id="0c85f-155">For antivirus programs, we recommend that you exclude hello following files and locations:</span></span>

* <span data-ttu-id="0c85f-156">C:\Program Files\Microsoft Azure Recovery Services Agent\bin\cbengine.exe som en process</span><span class="sxs-lookup"><span data-stu-id="0c85f-156">C:\Program Files\Microsoft Azure Recovery Services Agent\bin\cbengine.exe as a process</span></span>
* <span data-ttu-id="0c85f-157">C:\Program Files\Microsoft Azure Recovery Services Agent\ mappar</span><span class="sxs-lookup"><span data-stu-id="0c85f-157">C:\Program Files\Microsoft Azure Recovery Services Agent\ folders</span></span>
* <span data-ttu-id="0c85f-158">Scratch platsen (om du inte använder standard hello-plats)</span><span class="sxs-lookup"><span data-stu-id="0c85f-158">Scratch location (if you're not using hello standard location)</span></span>

<a id="cause3"></a>

## <a name="cause-backup-agent-running-on-an-azure-virtual-machine"></a><span data-ttu-id="0c85f-159">Orsak: Backup-agenten körs på en virtuell Azure-dator</span><span class="sxs-lookup"><span data-stu-id="0c85f-159">Cause: Backup agent running on an Azure virtual machine</span></span>
<span data-ttu-id="0c85f-160">Om du kör hello Backup-agenten på en virtuell dator, blir prestanda långsammare än när du kör på en fysisk dator.</span><span class="sxs-lookup"><span data-stu-id="0c85f-160">If you're running hello Backup agent on a VM, performance will be slower than when you run it on a physical machine.</span></span> <span data-ttu-id="0c85f-161">Detta är förväntat på grund av tooIOPS begränsningar.</span><span class="sxs-lookup"><span data-stu-id="0c85f-161">This is expected due tooIOPS limitations.</span></span>  <span data-ttu-id="0c85f-162">Du kan dock optimera hello prestanda genom att växla hello dataenheter som ska säkerhetskopieras tooAzure Premium-lagring.</span><span class="sxs-lookup"><span data-stu-id="0c85f-162">However, you can optimize hello performance by switching hello data drives that are being backed up tooAzure Premium Storage.</span></span> <span data-ttu-id="0c85f-163">Vi arbetar på att åtgärda problemet och hello korrigering kommer att finnas i en framtida version.</span><span class="sxs-lookup"><span data-stu-id="0c85f-163">We're working on fixing this issue, and hello fix will be available in a future release.</span></span>

<a id="cause4"></a>

## <a name="cause-backing-up-a-large-number-millions-of-files"></a><span data-ttu-id="0c85f-164">Orsak: Säkerhetskopiera ett stort antal (miljoner) filer</span><span class="sxs-lookup"><span data-stu-id="0c85f-164">Cause: Backing up a large number (millions) of files</span></span>
<span data-ttu-id="0c85f-165">Flytta stora mängder data tar längre tid än att flytta en mindre mängd data.</span><span class="sxs-lookup"><span data-stu-id="0c85f-165">Moving a large volume of data will take longer than moving a smaller volume of data.</span></span> <span data-ttu-id="0c85f-166">I vissa fall säkerhetskopieringstiden relaterade toonot hello endast storleken på hello data men hello antal filer eller mappar.</span><span class="sxs-lookup"><span data-stu-id="0c85f-166">In some cases, backup time is related toonot only hello size of hello data, but also hello number of files or folders.</span></span> <span data-ttu-id="0c85f-167">Detta är särskilt viktigt om miljontals små filer (några byte tooa få kilobyte) ska säkerhetskopieras.</span><span class="sxs-lookup"><span data-stu-id="0c85f-167">This is especially true when millions of small files (a few bytes tooa few kilobytes) are being backed up.</span></span>

<span data-ttu-id="0c85f-168">Detta beror på att när du arbetar säkerhetskopiera hello data och flytta den tooAzure kan Azure samtidigt katalogiserar dina filer.</span><span class="sxs-lookup"><span data-stu-id="0c85f-168">This behavior occurs because while you're backing up hello data and moving it tooAzure, Azure is simultaneously cataloging your files.</span></span> <span data-ttu-id="0c85f-169">I vissa sällsynta fall kan hello katalog åtgärden ta längre tid än förväntat.</span><span class="sxs-lookup"><span data-stu-id="0c85f-169">In some rare scenarios, hello catalog operation might take longer than expected.</span></span>

<span data-ttu-id="0c85f-170">hello efter indikatorer kan hjälpa dig att förstå hello flaskhals och därefter fungerar på hello nästa steg:</span><span class="sxs-lookup"><span data-stu-id="0c85f-170">hello following indicators can help you understand hello bottleneck and accordingly work on hello next steps:</span></span>

* <span data-ttu-id="0c85f-171">**Användargränssnittet visar förloppet för hello dataöverföring**.</span><span class="sxs-lookup"><span data-stu-id="0c85f-171">**UI is showing progress for hello data transfer**.</span></span> <span data-ttu-id="0c85f-172">hello data överförs fortfarande.</span><span class="sxs-lookup"><span data-stu-id="0c85f-172">hello data is still being transferred.</span></span> <span data-ttu-id="0c85f-173">hello nätverksbandbredd eller hello storleken på data som orsakar fördröjningar.</span><span class="sxs-lookup"><span data-stu-id="0c85f-173">hello network bandwidth or hello size of data might be causing delays.</span></span>
* <span data-ttu-id="0c85f-174">**Användargränssnittet visar inte förloppet för hello dataöverföring**.</span><span class="sxs-lookup"><span data-stu-id="0c85f-174">**UI is not showing progress for hello data transfer**.</span></span> <span data-ttu-id="0c85f-175">Öppna hello loggar finns i C:\Microsoft Azure Recovery Services Agent\Temp och sedan söka efter hello FileProvider::EndData post i hello loggar.</span><span class="sxs-lookup"><span data-stu-id="0c85f-175">Open hello logs located at C:\Microsoft Azure Recovery Services Agent\Temp, and then check for hello FileProvider::EndData entry in hello logs.</span></span> <span data-ttu-id="0c85f-176">Den här posten betyder att hello dataöverföring klar och hello katalog igen som händer.</span><span class="sxs-lookup"><span data-stu-id="0c85f-176">This entry signifies that hello data transfer finished and hello catalog operation is happening.</span></span> <span data-ttu-id="0c85f-177">Inte avbryta hello säkerhetskopieringsjobb.</span><span class="sxs-lookup"><span data-stu-id="0c85f-177">Don't cancel hello backup jobs.</span></span> <span data-ttu-id="0c85f-178">I stället vänta en liten stund hello katalog åtgärden toofinish.</span><span class="sxs-lookup"><span data-stu-id="0c85f-178">Instead, wait a little longer for hello catalog operation toofinish.</span></span> <span data-ttu-id="0c85f-179">Om hello problemet kvarstår kontaktar du [Azure-supporten](https://portal.azure.com/#create/Microsoft.Support).</span><span class="sxs-lookup"><span data-stu-id="0c85f-179">If hello problem persists, contact [Azure support](https://portal.azure.com/#create/Microsoft.Support).</span></span>

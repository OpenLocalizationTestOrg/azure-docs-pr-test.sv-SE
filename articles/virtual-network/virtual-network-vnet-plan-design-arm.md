---
title: "aaaAzure virtuella nätverk (VNet) planerings- och designguide | Microsoft Docs"
description: "Lär dig hur tooplan och design virtuella nätverk i Azure baserat på dina krav för isolering, anslutning och plats."
services: virtual-network
documentationcenter: na
author: jimdial
manager: carmonm
editor: tysonn
ms.assetid: 3a4a9aea-7608-4d2e-bb3c-40de2e537200
ms.service: virtual-network
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 02/08/2016
ms.author: jdial
ms.openlocfilehash: f3ffadf8cf254f64b1f86b44f90315d2bc679f63
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: sv-SE
ms.lasthandoff: 10/06/2017
---
# <a name="plan-and-design-azure-virtual-networks"></a><span data-ttu-id="b1e8b-103">Planera och utforma Azure-nätverk</span><span class="sxs-lookup"><span data-stu-id="b1e8b-103">Plan and design Azure Virtual Networks</span></span>
<span data-ttu-id="b1e8b-104">Det är enkelt att skapa en VNet tooexperiment med, men troligen har du ska distribuera flera virtuella nätverk över tid toosupport hello produktion behoven för din organisation.</span><span class="sxs-lookup"><span data-stu-id="b1e8b-104">Creating a VNet tooexperiment with is easy enough, but chances are, you will deploy multiple VNets over time toosupport hello production needs of your organization.</span></span> <span data-ttu-id="b1e8b-105">Med lite planering och design, kommer du att kunna toodeploy Vnet och ansluter hello-resurser som du behöver mer effektivt.</span><span class="sxs-lookup"><span data-stu-id="b1e8b-105">With some planning and design, you will be able toodeploy VNets and connect hello resources you need more effectively.</span></span> <span data-ttu-id="b1e8b-106">Om du inte är bekant med VNets rekommenderar vi som du [Lär dig mer om Vnet](virtual-networks-overview.md) och [hur toodeploy](virtual-networks-create-vnet-arm-pportal.md) något innan du fortsätter.</span><span class="sxs-lookup"><span data-stu-id="b1e8b-106">If you are not familiar with VNets, it's recommended that you [learn about VNets](virtual-networks-overview.md) and [how toodeploy](virtual-networks-create-vnet-arm-pportal.md) one before proceeding.</span></span>

## <a name="plan"></a><span data-ttu-id="b1e8b-107">Planera</span><span class="sxs-lookup"><span data-stu-id="b1e8b-107">Plan</span></span>
<span data-ttu-id="b1e8b-108">Det är viktigt för lyckad goda kunskaper om Azure-prenumerationer, regioner och nätverksresurser.</span><span class="sxs-lookup"><span data-stu-id="b1e8b-108">A thorough understanding of Azure subscriptions, regions, and network resources is critical for success.</span></span> <span data-ttu-id="b1e8b-109">Du kan använda hello listan med överväganden nedan som utgångspunkt.</span><span class="sxs-lookup"><span data-stu-id="b1e8b-109">You can use hello list of considerations below as a starting point.</span></span> <span data-ttu-id="b1e8b-110">När du förstår de överväganden kan definiera du hello kraven för din nätverksdesign.</span><span class="sxs-lookup"><span data-stu-id="b1e8b-110">Once you understand those considerations, you can define hello requirements for your network design.</span></span>

### <a name="considerations"></a><span data-ttu-id="b1e8b-111">Överväganden</span><span class="sxs-lookup"><span data-stu-id="b1e8b-111">Considerations</span></span>
<span data-ttu-id="b1e8b-112">Överväg följande hello innan samtalet besvaras hello Planeringsfrågor nedan:</span><span class="sxs-lookup"><span data-stu-id="b1e8b-112">Before answering hello planning questions below, consider hello following:</span></span>

* <span data-ttu-id="b1e8b-113">Allt som du skapar i Azure består av en eller flera resurser.</span><span class="sxs-lookup"><span data-stu-id="b1e8b-113">Everything you create in Azure is composed of one or more resources.</span></span> <span data-ttu-id="b1e8b-114">En virtuell dator (VM) är en resurs, hello nätverkskortet (NIC) används av en virtuell dator är en resurs, hello offentliga IP-adress som används av ett nätverkskort är en resurs, hello VNet hello nätverkskortet är anslutet toois en resurs.</span><span class="sxs-lookup"><span data-stu-id="b1e8b-114">A virtual machine (VM) is a resource, hello network adapter interface (NIC) used by a VM is a resource, hello public IP address used by a NIC is a resource, hello VNet hello NIC is connected toois a resource.</span></span>
* <span data-ttu-id="b1e8b-115">Du skapar resurser inom en [Azure-region](https://azure.microsoft.com/regions/#services) och prenumeration.</span><span class="sxs-lookup"><span data-stu-id="b1e8b-115">You create resources within an [Azure region](https://azure.microsoft.com/regions/#services) and subscription.</span></span> <span data-ttu-id="b1e8b-116">Resurser kan bara vara anslutna tooa virtuella nätverk som finns i hello samma region och prenumeration hello-resursen.</span><span class="sxs-lookup"><span data-stu-id="b1e8b-116">Resources can only be connected tooa virtual network that exists in hello same region and subscription hello resource is in.</span></span>
* <span data-ttu-id="b1e8b-117">Du kan ansluta virtuella nätverk tooeach andra genom att använda:</span><span class="sxs-lookup"><span data-stu-id="b1e8b-117">You can connect virtual networks tooeach other by using:</span></span>
    * <span data-ttu-id="b1e8b-118">**[Virtuellt nätverk peering](virtual-network-peering-overview.md)**: hello virtuella nätverk måste finnas i hello samma Azure-region.</span><span class="sxs-lookup"><span data-stu-id="b1e8b-118">**[Virtual network peering](virtual-network-peering-overview.md)**: hello virtual networks must exist in hello same Azure region.</span></span> <span data-ttu-id="b1e8b-119">Bandbredden mellan resurser i peerkoppla virtuella nätverk är hello samma som om hello resurserna var anslutna toohello samma virtuella nätverk.</span><span class="sxs-lookup"><span data-stu-id="b1e8b-119">Bandwidth between resources in peered virtual networks is hello same as if hello resources were connected toohello same virtual network.</span></span>
    * <span data-ttu-id="b1e8b-120">**En Azure [VPN-Gateway](../vpn-gateway/vpn-gateway-vnet-vnet-rm-ps.md)**: hello virtuella nätverk kan finnas i hello samma eller olika Azure-regioner.</span><span class="sxs-lookup"><span data-stu-id="b1e8b-120">**An Azure [VPN Gateway](../vpn-gateway/vpn-gateway-vnet-vnet-rm-ps.md)**: hello virtual networks can exist in hello same, or different Azure regions.</span></span> <span data-ttu-id="b1e8b-121">Bandbredden mellan resurser i virtuella nätverk som är anslutna via en VPN-Gateway begränsas av hello bandbredden för hello VPN-Gateway.</span><span class="sxs-lookup"><span data-stu-id="b1e8b-121">Bandwidth between resources in virtual networks connected through a VPN Gateway is limited by hello bandwidth of hello VPN Gateway.</span></span>
* <span data-ttu-id="b1e8b-122">Du kan ansluta Vnet tooyour lokalt nätverk genom att använda en hello [anslutningsalternativ](../vpn-gateway/vpn-gateway-about-vpngateways.md#s2smulti) tillgängliga i Azure.</span><span class="sxs-lookup"><span data-stu-id="b1e8b-122">You can connect VNets tooyour on-premises network by using one of hello [connectivity options](../vpn-gateway/vpn-gateway-about-vpngateways.md#s2smulti) available in Azure.</span></span>
* <span data-ttu-id="b1e8b-123">Olika resurser kan grupperas i [resursgrupper](../azure-resource-manager/resource-group-overview.md#resource-groups), vilket gör det enklare toomanage hello resurs som en enhet.</span><span class="sxs-lookup"><span data-stu-id="b1e8b-123">Different resources can be grouped together in [resource groups](../azure-resource-manager/resource-group-overview.md#resource-groups), making it easier toomanage hello resource as a unit.</span></span> <span data-ttu-id="b1e8b-124">En resursgrupp kan innehålla resurser från flera områden, så länge hello resurser tillhör toohello samma prenumeration.</span><span class="sxs-lookup"><span data-stu-id="b1e8b-124">A resource group can contain resources from multiple regions, as long as hello resources belong toohello same subscription.</span></span>

### <a name="define-requirements"></a><span data-ttu-id="b1e8b-125">Definiera krav</span><span class="sxs-lookup"><span data-stu-id="b1e8b-125">Define requirements</span></span>
<span data-ttu-id="b1e8b-126">Använd hello frågor nedan som utgångspunkt för utformningen av din Azure-nätverk.</span><span class="sxs-lookup"><span data-stu-id="b1e8b-126">Use hello questions below as a starting point for your Azure network design.</span></span>    

1. <span data-ttu-id="b1e8b-127">Vad Azure platser ska du använda toohost Vnet?</span><span class="sxs-lookup"><span data-stu-id="b1e8b-127">What Azure locations will you use toohost VNets?</span></span>
2. <span data-ttu-id="b1e8b-128">Behöver du tooprovide kommunikation mellan dessa Azure platser?</span><span class="sxs-lookup"><span data-stu-id="b1e8b-128">Do you need tooprovide communication between these Azure locations?</span></span>
3. <span data-ttu-id="b1e8b-129">Behöver du tooprovide kommunikation mellan din Azure-VNet(s) och din lokala datacenter(s)?</span><span class="sxs-lookup"><span data-stu-id="b1e8b-129">Do you need tooprovide communication between your Azure VNet(s) and your on-premises datacenter(s)?</span></span>
4. <span data-ttu-id="b1e8b-130">Hur många infrastruktur som en tjänst (IaaS) virtuella datorer, cloud services-roller och web apps gör du behöver för din lösning?</span><span class="sxs-lookup"><span data-stu-id="b1e8b-130">How many Infrastructure as a Service (IaaS) VMs, cloud services roles, and web apps do you need for your solution?</span></span>
5. <span data-ttu-id="b1e8b-131">Behöver du tooisolate trafik baserat på grupper med virtuella datorer (d.v.s. frontend-webbservrar och backend-databasservrar)?</span><span class="sxs-lookup"><span data-stu-id="b1e8b-131">Do you need tooisolate traffic based on groups of VMs (i.e. front end web servers and back end database servers)?</span></span>
6. <span data-ttu-id="b1e8b-132">Behöver du toocontrol trafikflöde använder virtuella installationer?</span><span class="sxs-lookup"><span data-stu-id="b1e8b-132">Do you need toocontrol traffic flow using virtual appliances?</span></span>
7. <span data-ttu-id="b1e8b-133">Göra användare behöver olika uppsättningar av behörigheter toodifferent Azure-resurser?</span><span class="sxs-lookup"><span data-stu-id="b1e8b-133">Do users need different sets of permissions toodifferent Azure resources?</span></span>

### <a name="understand-vnet-and-subnet-properties"></a><span data-ttu-id="b1e8b-134">Förstå VNet och undernät egenskaper</span><span class="sxs-lookup"><span data-stu-id="b1e8b-134">Understand VNet and subnet properties</span></span>
<span data-ttu-id="b1e8b-135">VNet och undernät resurser hjälpa dig att definiera en säkerhetsgräns för arbetsbelastningar som körs i Azure.</span><span class="sxs-lookup"><span data-stu-id="b1e8b-135">VNet and subnets resources help define a security boundary for workloads running in Azure.</span></span> <span data-ttu-id="b1e8b-136">Ett virtuellt nätverk kännetecknas av en samling adressutrymmen, definierad som CIDR-block.</span><span class="sxs-lookup"><span data-stu-id="b1e8b-136">A VNet is characterized by a collection of address spaces, defined as CIDR blocks.</span></span>

> [!NOTE]
> <span data-ttu-id="b1e8b-137">Nätverksadministratörer är bekanta med CIDR-notering.</span><span class="sxs-lookup"><span data-stu-id="b1e8b-137">Network administrators are familiar with CIDR notation.</span></span> <span data-ttu-id="b1e8b-138">Om du inte är bekant med CIDR, [mer information om den](http://whatismyipaddress.com/cidr).</span><span class="sxs-lookup"><span data-stu-id="b1e8b-138">If you are not familiar with CIDR, [learn more about it](http://whatismyipaddress.com/cidr).</span></span>
>
>

<span data-ttu-id="b1e8b-139">Vnet innehålla hello följande egenskaper.</span><span class="sxs-lookup"><span data-stu-id="b1e8b-139">VNets contain hello following properties.</span></span>

| <span data-ttu-id="b1e8b-140">Egenskap</span><span class="sxs-lookup"><span data-stu-id="b1e8b-140">Property</span></span> | <span data-ttu-id="b1e8b-141">Beskrivning</span><span class="sxs-lookup"><span data-stu-id="b1e8b-141">Description</span></span> | <span data-ttu-id="b1e8b-142">Villkor</span><span class="sxs-lookup"><span data-stu-id="b1e8b-142">Constraints</span></span> |
| --- | --- | --- |
| <span data-ttu-id="b1e8b-143">**Namn**</span><span class="sxs-lookup"><span data-stu-id="b1e8b-143">**name**</span></span> |<span data-ttu-id="b1e8b-144">Namn på virtuella nätverk</span><span class="sxs-lookup"><span data-stu-id="b1e8b-144">VNet name</span></span> |<span data-ttu-id="b1e8b-145">Textsträng in too80 tecken.</span><span class="sxs-lookup"><span data-stu-id="b1e8b-145">String of up too80 characters.</span></span> <span data-ttu-id="b1e8b-146">Kan innehålla bokstäver, siffror, understreck, punkter eller bindestreck.</span><span class="sxs-lookup"><span data-stu-id="b1e8b-146">May contain letters, numbers, underscore, periods, or hyphens.</span></span> <span data-ttu-id="b1e8b-147">Måste börja med en bokstav eller en siffra.</span><span class="sxs-lookup"><span data-stu-id="b1e8b-147">Must start with a letter or number.</span></span> <span data-ttu-id="b1e8b-148">Måste sluta med en bokstav, en siffra eller understreck.</span><span class="sxs-lookup"><span data-stu-id="b1e8b-148">Must end with a letter, number, or underscore.</span></span> <span data-ttu-id="b1e8b-149">Kan innehåller gemener och versaler.</span><span class="sxs-lookup"><span data-stu-id="b1e8b-149">Can contains upper or lower case letters.</span></span> |
| <span data-ttu-id="b1e8b-150">**Plats**</span><span class="sxs-lookup"><span data-stu-id="b1e8b-150">**location**</span></span> |<span data-ttu-id="b1e8b-151">Azure-plats (även hänvisade tooas region).</span><span class="sxs-lookup"><span data-stu-id="b1e8b-151">Azure location (also referred tooas region).</span></span> |<span data-ttu-id="b1e8b-152">Måste vara en hello Azure giltiga platser.</span><span class="sxs-lookup"><span data-stu-id="b1e8b-152">Must be one of hello valid Azure locations.</span></span> |
| <span data-ttu-id="b1e8b-153">**addressSpace**</span><span class="sxs-lookup"><span data-stu-id="b1e8b-153">**addressSpace**</span></span> |<span data-ttu-id="b1e8b-154">Samling av adressprefix som utgör hello VNet i CIDR-notation.</span><span class="sxs-lookup"><span data-stu-id="b1e8b-154">Collection of address prefixes that make up hello VNet in CIDR notation.</span></span> |<span data-ttu-id="b1e8b-155">Måste vara en matris med giltig CIDR-Adressblock, inklusive offentliga IP-adressintervall.</span><span class="sxs-lookup"><span data-stu-id="b1e8b-155">Must be an array of valid CIDR address blocks, including public IP address ranges.</span></span> |
| <span data-ttu-id="b1e8b-156">**undernät**</span><span class="sxs-lookup"><span data-stu-id="b1e8b-156">**subnets**</span></span> |<span data-ttu-id="b1e8b-157">Samling av undernät som utgör hello VNet</span><span class="sxs-lookup"><span data-stu-id="b1e8b-157">Collection of subnets that make up hello VNet</span></span> |<span data-ttu-id="b1e8b-158">Se hello undernät egenskaper tabellen nedan.</span><span class="sxs-lookup"><span data-stu-id="b1e8b-158">see hello subnet properties table below.</span></span> |
| <span data-ttu-id="b1e8b-159">**dhcpOptions**</span><span class="sxs-lookup"><span data-stu-id="b1e8b-159">**dhcpOptions**</span></span> |<span data-ttu-id="b1e8b-160">Objekt som innehåller en obligatorisk egenskap med namnet **dnsServers**.</span><span class="sxs-lookup"><span data-stu-id="b1e8b-160">Object that contains a single required property named **dnsServers**.</span></span> | |
| <span data-ttu-id="b1e8b-161">**dnsServers**</span><span class="sxs-lookup"><span data-stu-id="b1e8b-161">**dnsServers**</span></span> |<span data-ttu-id="b1e8b-162">Matris för DNS-servrar som används av hello virtuella nätverk.</span><span class="sxs-lookup"><span data-stu-id="b1e8b-162">Array of DNS servers used by hello VNet.</span></span> <span data-ttu-id="b1e8b-163">Om ingen server har angetts används intern namnmatchning för Azure.</span><span class="sxs-lookup"><span data-stu-id="b1e8b-163">If no server is specified, Azure internal name resolution is used.</span></span> |<span data-ttu-id="b1e8b-164">Måste vara en matris med upp too10 DNS-servrar efter IP-adress.</span><span class="sxs-lookup"><span data-stu-id="b1e8b-164">Must be an array of up too10 DNS servers, by IP address.</span></span> |

<span data-ttu-id="b1e8b-165">Ett undernät är en underordnad resurs i ett VNet och hjälper dig att definiera segmenten i adressutrymmen i CIDR-block med IP-adressprefix.</span><span class="sxs-lookup"><span data-stu-id="b1e8b-165">A subnet is a child resource of a VNet, and helps define segments of address spaces within a CIDR block, using IP address prefixes.</span></span> <span data-ttu-id="b1e8b-166">Nätverkskort läggas toosubnets och anslutna tooVMs som man har anslutning för olika arbetsbelastningar.</span><span class="sxs-lookup"><span data-stu-id="b1e8b-166">NICs can be added toosubnets, and connected tooVMs, providing connectivity for various workloads.</span></span>

<span data-ttu-id="b1e8b-167">Undernät innehålla hello följande egenskaper.</span><span class="sxs-lookup"><span data-stu-id="b1e8b-167">Subnets contain hello following properties.</span></span>

| <span data-ttu-id="b1e8b-168">Egenskap</span><span class="sxs-lookup"><span data-stu-id="b1e8b-168">Property</span></span> | <span data-ttu-id="b1e8b-169">Beskrivning</span><span class="sxs-lookup"><span data-stu-id="b1e8b-169">Description</span></span> | <span data-ttu-id="b1e8b-170">Villkor</span><span class="sxs-lookup"><span data-stu-id="b1e8b-170">Constraints</span></span> |
| --- | --- | --- |
| <span data-ttu-id="b1e8b-171">**Namn**</span><span class="sxs-lookup"><span data-stu-id="b1e8b-171">**name**</span></span> |<span data-ttu-id="b1e8b-172">Namn på undernät</span><span class="sxs-lookup"><span data-stu-id="b1e8b-172">Subnet name</span></span> |<span data-ttu-id="b1e8b-173">Textsträng in too80 tecken.</span><span class="sxs-lookup"><span data-stu-id="b1e8b-173">String of up too80 characters.</span></span> <span data-ttu-id="b1e8b-174">Kan innehålla bokstäver, siffror, understreck, punkter eller bindestreck.</span><span class="sxs-lookup"><span data-stu-id="b1e8b-174">May contain letters, numbers, underscore, periods, or hyphens.</span></span> <span data-ttu-id="b1e8b-175">Måste börja med en bokstav eller en siffra.</span><span class="sxs-lookup"><span data-stu-id="b1e8b-175">Must start with a letter or number.</span></span> <span data-ttu-id="b1e8b-176">Måste sluta med en bokstav, en siffra eller understreck.</span><span class="sxs-lookup"><span data-stu-id="b1e8b-176">Must end with a letter, number, or underscore.</span></span> <span data-ttu-id="b1e8b-177">Kan innehåller gemener och versaler.</span><span class="sxs-lookup"><span data-stu-id="b1e8b-177">Can contains upper or lower case letters.</span></span> |
| <span data-ttu-id="b1e8b-178">**Plats**</span><span class="sxs-lookup"><span data-stu-id="b1e8b-178">**location**</span></span> |<span data-ttu-id="b1e8b-179">Azure-plats (även hänvisade tooas region).</span><span class="sxs-lookup"><span data-stu-id="b1e8b-179">Azure location (also referred tooas region).</span></span> |<span data-ttu-id="b1e8b-180">Måste vara en hello Azure giltiga platser.</span><span class="sxs-lookup"><span data-stu-id="b1e8b-180">Must be one of hello valid Azure locations.</span></span> |
| <span data-ttu-id="b1e8b-181">**addressPrefix**</span><span class="sxs-lookup"><span data-stu-id="b1e8b-181">**addressPrefix**</span></span> |<span data-ttu-id="b1e8b-182">Enkel adressprefixet som utgör hello undernät i CIDR-notation</span><span class="sxs-lookup"><span data-stu-id="b1e8b-182">Single address prefix that make up hello subnet in CIDR notation</span></span> |<span data-ttu-id="b1e8b-183">Måste vara ett enda CIDR-block som ingår i någon av hello VNet-adressutrymmen.</span><span class="sxs-lookup"><span data-stu-id="b1e8b-183">Must be a single CIDR block that is part of one of hello VNet's address spaces.</span></span> |
| <span data-ttu-id="b1e8b-184">**networkSecurityGroup**</span><span class="sxs-lookup"><span data-stu-id="b1e8b-184">**networkSecurityGroup**</span></span> |<span data-ttu-id="b1e8b-185">NSG tillämpas toohello undernät</span><span class="sxs-lookup"><span data-stu-id="b1e8b-185">NSG applied toohello subnet</span></span> | |
| <span data-ttu-id="b1e8b-186">**Migreringstillståndet**</span><span class="sxs-lookup"><span data-stu-id="b1e8b-186">**routeTable**</span></span> |<span data-ttu-id="b1e8b-187">Routningstabellen tillämpas toohello undernät</span><span class="sxs-lookup"><span data-stu-id="b1e8b-187">Route table applied toohello subnet</span></span> | |
| <span data-ttu-id="b1e8b-188">**ipConfigurations**</span><span class="sxs-lookup"><span data-stu-id="b1e8b-188">**ipConfigurations**</span></span> |<span data-ttu-id="b1e8b-189">Samling av IP-konfigurationsobjekt som används av nätverkskort anslutna toohello undernät</span><span class="sxs-lookup"><span data-stu-id="b1e8b-189">Collection of IP configuration objects used by NICs connected toohello subnet</span></span> | |

### <a name="name-resolution"></a><span data-ttu-id="b1e8b-190">Namnmatchning</span><span class="sxs-lookup"><span data-stu-id="b1e8b-190">Name resolution</span></span>
<span data-ttu-id="b1e8b-191">Som standard används ditt VNet [Azure-tillhandahållna namnmatchning](virtual-networks-name-resolution-for-vms-and-role-instances.md) tooresolve namnen i hello VNet och på hello offentliga Internet.</span><span class="sxs-lookup"><span data-stu-id="b1e8b-191">By default, your VNet uses [Azure-provided name resolution](virtual-networks-name-resolution-for-vms-and-role-instances.md) tooresolve names inside hello VNet, and on hello public Internet.</span></span> <span data-ttu-id="b1e8b-192">Om du ansluter din Vnet tooyour lokalt datacenter, måste du dock tooprovide [DNS-servern](virtual-networks-name-resolution-for-vms-and-role-instances.md) tooresolve namn mellan ditt nätverk.</span><span class="sxs-lookup"><span data-stu-id="b1e8b-192">However, if you connect your VNets tooyour on-premises data centers, you need tooprovide [your own DNS server](virtual-networks-name-resolution-for-vms-and-role-instances.md) tooresolve names between your networks.</span></span>  

### <a name="limits"></a><span data-ttu-id="b1e8b-193">Begränsningar</span><span class="sxs-lookup"><span data-stu-id="b1e8b-193">Limits</span></span>
<span data-ttu-id="b1e8b-194">Granska hello nätverk gränser i hello [Azure begränsar](../azure-subscription-service-limits.md#networking-limits) artikel tooensure som din design inte står i konflikt med någon av hello gränser.</span><span class="sxs-lookup"><span data-stu-id="b1e8b-194">Review hello networking limits in hello [Azure limits](../azure-subscription-service-limits.md#networking-limits) article tooensure that your design doesn't conflict with any of hello limits.</span></span> <span data-ttu-id="b1e8b-195">Vissa begränsningar kan utökas genom att öppna ett supportärende.</span><span class="sxs-lookup"><span data-stu-id="b1e8b-195">Some limits can be increased by opening a support ticket.</span></span>

### <a name="role-based-access-control-rbac"></a><span data-ttu-id="b1e8b-196">Rollbaserad åtkomstkontroll (RBAC)</span><span class="sxs-lookup"><span data-stu-id="b1e8b-196">Role-Based Access Control (RBAC)</span></span>
<span data-ttu-id="b1e8b-197">Du kan använda [Azure RBAC](../active-directory/role-based-access-built-in-roles.md) toocontrol hello andelen åtkomst olika användare kan ha toodifferent resurser i Azure.</span><span class="sxs-lookup"><span data-stu-id="b1e8b-197">You can use [Azure RBAC](../active-directory/role-based-access-built-in-roles.md) toocontrol hello level of access different users may have toodifferent resources in Azure.</span></span> <span data-ttu-id="b1e8b-198">På så sätt kan du särskilja hello arbete som utförs av ditt team utifrån deras behov.</span><span class="sxs-lookup"><span data-stu-id="b1e8b-198">That way you can segregate hello work done by your team based on their needs.</span></span>

<span data-ttu-id="b1e8b-199">När det gäller de virtuella nätverken är berörda användare i hello **Network-deltagare** roll har full kontroll över Azure Resource Manager nätverksresurser på virtuella datorer.</span><span class="sxs-lookup"><span data-stu-id="b1e8b-199">As far as virtual networks are concerned, users in hello **Network Contributor** role have full control over Azure Resource Manager virtual network resources.</span></span> <span data-ttu-id="b1e8b-200">På liknande sätt kan användare i hello **klassiska Network-deltagare** roll har full kontroll över klassiska virtuella nätverksresurser.</span><span class="sxs-lookup"><span data-stu-id="b1e8b-200">Similarly, users in hello **Classic Network Contributor** role have full control over classic virtual network resources.</span></span>

> [!NOTE]
> <span data-ttu-id="b1e8b-201">Du kan också [skapa egna roller](../active-directory/role-based-access-control-configure.md) tooseparate dina administrativa behov.</span><span class="sxs-lookup"><span data-stu-id="b1e8b-201">You can also [create your own roles](../active-directory/role-based-access-control-configure.md) tooseparate your administrative needs.</span></span>
>
>

## <a name="design"></a><span data-ttu-id="b1e8b-202">Designa</span><span class="sxs-lookup"><span data-stu-id="b1e8b-202">Design</span></span>
<span data-ttu-id="b1e8b-203">När du väl vet svaren hello toohello frågor i hello [planera](#Plan) avsnittet kan du granska hello följande innan du definierar ditt Vnet.</span><span class="sxs-lookup"><span data-stu-id="b1e8b-203">Once you know hello answers toohello questions in hello [Plan](#Plan) section, review hello following before defining your VNets.</span></span>

### <a name="number-of-subscriptions-and-vnets"></a><span data-ttu-id="b1e8b-204">Antalet prenumerationer och Vnet</span><span class="sxs-lookup"><span data-stu-id="b1e8b-204">Number of subscriptions and VNets</span></span>
<span data-ttu-id="b1e8b-205">Du bör överväga att skapa flera Vnet i hello följande scenarier:</span><span class="sxs-lookup"><span data-stu-id="b1e8b-205">You should consider creating multiple VNets in hello following scenarios:</span></span>

* <span data-ttu-id="b1e8b-206">**Virtuella datorer som behöver toobe placeras i olika Azure platser**.</span><span class="sxs-lookup"><span data-stu-id="b1e8b-206">**VMs that need toobe placed in different Azure locations**.</span></span> <span data-ttu-id="b1e8b-207">Vnet i Azure är regionala.</span><span class="sxs-lookup"><span data-stu-id="b1e8b-207">VNets in Azure are regional.</span></span> <span data-ttu-id="b1e8b-208">De kan sträcka sig över platser.</span><span class="sxs-lookup"><span data-stu-id="b1e8b-208">They cannot span locations.</span></span> <span data-ttu-id="b1e8b-209">Därför behöver du minst ett virtuellt nätverk för varje Azure-plats som du vill ha toohost virtuella datorer.</span><span class="sxs-lookup"><span data-stu-id="b1e8b-209">Therefore you need at least one VNet for each Azure location you want toohost VMs in.</span></span>
* <span data-ttu-id="b1e8b-210">**Arbetsbelastningar som behöver toobe helt isolerade från varandra**.</span><span class="sxs-lookup"><span data-stu-id="b1e8b-210">**Workloads that need toobe completely isolated from one another**.</span></span> <span data-ttu-id="b1e8b-211">Du kan skapa separata Vnet, som även används hello samma IP-adressutrymmen tooisolate olika arbetsbelastningar från varandra.</span><span class="sxs-lookup"><span data-stu-id="b1e8b-211">You can create separate VNets, that even use hello same IP address spaces, tooisolate different workloads from one another.</span></span>

<span data-ttu-id="b1e8b-212">Tänk på att hello gränserna som du ser ovan är per region per prenumeration.</span><span class="sxs-lookup"><span data-stu-id="b1e8b-212">Keep in mind that hello limits you see above are per region, per subscription.</span></span> <span data-ttu-id="b1e8b-213">Det innebär att du kan använda flera prenumerationer tooincrease hello gränsen på resurser som du kan upprätthålla i Azure.</span><span class="sxs-lookup"><span data-stu-id="b1e8b-213">That means you can use multiple subscriptions tooincrease hello limit of resources you can maintain in Azure.</span></span> <span data-ttu-id="b1e8b-214">Du kan använda en plats-till-plats-VPN eller en ExpressRoute-krets tooconnect Vnet för olika prenumerationer.</span><span class="sxs-lookup"><span data-stu-id="b1e8b-214">You can use a site-to-site VPN, or an ExpressRoute circuit, tooconnect VNets in different subscriptions.</span></span>

### <a name="subscription-and-vnet-design-patterns"></a><span data-ttu-id="b1e8b-215">Prenumerationen och designmönster för virtuella nätverk</span><span class="sxs-lookup"><span data-stu-id="b1e8b-215">Subscription and VNet design patterns</span></span>
<span data-ttu-id="b1e8b-216">hello i tabellen nedan visas några vanliga designmönster för prenumerationer och Vnet.</span><span class="sxs-lookup"><span data-stu-id="b1e8b-216">hello table below shows some common design patterns for using subscriptions and VNets.</span></span>

| <span data-ttu-id="b1e8b-217">Scenario</span><span class="sxs-lookup"><span data-stu-id="b1e8b-217">Scenario</span></span> | <span data-ttu-id="b1e8b-218">Diagram</span><span class="sxs-lookup"><span data-stu-id="b1e8b-218">Diagram</span></span> | <span data-ttu-id="b1e8b-219">Tekniker</span><span class="sxs-lookup"><span data-stu-id="b1e8b-219">Pros</span></span> | <span data-ttu-id="b1e8b-220">Nackdelar</span><span class="sxs-lookup"><span data-stu-id="b1e8b-220">Cons</span></span> |
| --- | --- | --- | --- |
| <span data-ttu-id="b1e8b-221">En prenumeration, två Vnet per program</span><span class="sxs-lookup"><span data-stu-id="b1e8b-221">Single subscription, two VNets per app</span></span> |![Enda prenumeration](./media/virtual-network-vnet-plan-design-arm/figure1.png) |<span data-ttu-id="b1e8b-223">Endast en prenumeration toomanage.</span><span class="sxs-lookup"><span data-stu-id="b1e8b-223">Only one subscription toomanage.</span></span> |<span data-ttu-id="b1e8b-224">Maximalt antal Vnet per Azure-region.</span><span class="sxs-lookup"><span data-stu-id="b1e8b-224">Maximum number of VNets per Azure region.</span></span> <span data-ttu-id="b1e8b-225">Du behöver flera prenumerationer efter.</span><span class="sxs-lookup"><span data-stu-id="b1e8b-225">You need more subscriptions after that.</span></span> <span data-ttu-id="b1e8b-226">Granska hello [Azure begränsar](../azure-subscription-service-limits.md#networking-limits) artikeln för information.</span><span class="sxs-lookup"><span data-stu-id="b1e8b-226">Review hello [Azure limits](../azure-subscription-service-limits.md#networking-limits) article for details.</span></span> |
| <span data-ttu-id="b1e8b-227">En prenumeration per app, två Vnet per program</span><span class="sxs-lookup"><span data-stu-id="b1e8b-227">One subscription per app, two VNets per app</span></span> |![Enda prenumeration](./media/virtual-network-vnet-plan-design-arm/figure2.png) |<span data-ttu-id="b1e8b-229">Använder bara två Vnet per prenumeration.</span><span class="sxs-lookup"><span data-stu-id="b1e8b-229">Uses only two VNets per subscription.</span></span> |<span data-ttu-id="b1e8b-230">Svårare toomanage när det finns för många appar.</span><span class="sxs-lookup"><span data-stu-id="b1e8b-230">Harder toomanage when there are too many apps.</span></span> |
| <span data-ttu-id="b1e8b-231">En prenumeration per affärsenhet, två Vnet per program.</span><span class="sxs-lookup"><span data-stu-id="b1e8b-231">One subscription per business unit, two VNets per app.</span></span> |![Enda prenumeration](./media/virtual-network-vnet-plan-design-arm/figure3.png) |<span data-ttu-id="b1e8b-233">Balansera mellan antalet prenumerationer och virtuella nätverk.</span><span class="sxs-lookup"><span data-stu-id="b1e8b-233">Balance between number of subscriptions and VNets.</span></span> |<span data-ttu-id="b1e8b-234">Maximalt antal Vnet per affärsenhet (prenumeration).</span><span class="sxs-lookup"><span data-stu-id="b1e8b-234">Maximum number of VNets per business unit (subscription).</span></span> <span data-ttu-id="b1e8b-235">Granska hello [Azure begränsar](../azure-subscription-service-limits.md#networking-limits) artikeln för information.</span><span class="sxs-lookup"><span data-stu-id="b1e8b-235">Review hello [Azure limits](../azure-subscription-service-limits.md#networking-limits) article for details.</span></span> |
| <span data-ttu-id="b1e8b-236">En prenumeration per affärsenhet, två Vnet per grupp av appar.</span><span class="sxs-lookup"><span data-stu-id="b1e8b-236">One subscription per business unit, two VNets per group of apps.</span></span> |![Enda prenumeration](./media/virtual-network-vnet-plan-design-arm/figure4.png) |<span data-ttu-id="b1e8b-238">Balansera mellan antalet prenumerationer och virtuella nätverk.</span><span class="sxs-lookup"><span data-stu-id="b1e8b-238">Balance between number of subscriptions and VNets.</span></span> |<span data-ttu-id="b1e8b-239">Appar måste separat med hjälp av undernät och NSG: er.</span><span class="sxs-lookup"><span data-stu-id="b1e8b-239">Apps must be isolated by using subnets and NSGs.</span></span> |

### <a name="number-of-subnets"></a><span data-ttu-id="b1e8b-240">Antalet undernät</span><span class="sxs-lookup"><span data-stu-id="b1e8b-240">Number of subnets</span></span>
<span data-ttu-id="b1e8b-241">Du bör flera undernät i ett VNet i hello följande scenarier:</span><span class="sxs-lookup"><span data-stu-id="b1e8b-241">You should consider multiple subnets in a VNet in hello following scenarios:</span></span>

* <span data-ttu-id="b1e8b-242">**Det finns inte tillräckligt med privata IP-adresser för alla nätverkskort i ett undernät**.</span><span class="sxs-lookup"><span data-stu-id="b1e8b-242">**Not enough private IP addresses for all NICs in a subnet**.</span></span> <span data-ttu-id="b1e8b-243">Om din undernätsadressutrymmet inte innehåller tillräckligt med IP-adresser för hello antal nätverkskort i hello undernät, måste toocreate flera undernät.</span><span class="sxs-lookup"><span data-stu-id="b1e8b-243">If your subnet address space does not contain enough IP addresses for hello number of NICs in hello subnet, you need toocreate multiple subnets.</span></span> <span data-ttu-id="b1e8b-244">Tänk på att Azure reserverar 5 privata IP-adresser från varje undernät som inte kan användas: hello första och sista adresser för hello adressutrymme (för hello undernätsadress och multicast) och 3 adresser toobe används internt (för DHCP och DNS).</span><span class="sxs-lookup"><span data-stu-id="b1e8b-244">Keep in mind that Azure reserves 5 private IP addresses from each subnet that cannot be used: hello first and last addresses of hello address space (for hello subnet address, and multicast) and 3 addresses toobe used internally (for DHCP and DNS purposes).</span></span>
* <span data-ttu-id="b1e8b-245">**Säkerhet**.</span><span class="sxs-lookup"><span data-stu-id="b1e8b-245">**Security**.</span></span> <span data-ttu-id="b1e8b-246">Du kan använda undernät tooseparate grupper med virtuella datorer från varandra för arbetsbelastningarna som har ett flera lager struktur och tillämpa olika [nätverkssäkerhetsgrupper (NSG: er)](virtual-networks-nsg.md#subnets) för dessa undernät.</span><span class="sxs-lookup"><span data-stu-id="b1e8b-246">You can use subnets tooseparate groups of VMs from one another for workloads that have a multi-layer structure, and apply different [network security groups (NSGs)](virtual-networks-nsg.md#subnets) for those subnets.</span></span>
* <span data-ttu-id="b1e8b-247">**Hybridanslutning**.</span><span class="sxs-lookup"><span data-stu-id="b1e8b-247">**Hybrid connectivity**.</span></span> <span data-ttu-id="b1e8b-248">Du kan använda VPN-gateway och ExpressRoute-kretsar för[ansluta](../vpn-gateway/vpn-gateway-about-vpngateways.md#s2smulti) Vnet-tooone en annan, och tooyour lokala data center(s).</span><span class="sxs-lookup"><span data-stu-id="b1e8b-248">You can use VPN gateways and ExpressRoute circuits too[connect](../vpn-gateway/vpn-gateway-about-vpngateways.md#s2smulti) your VNets tooone another, and tooyour on-premises data center(s).</span></span> <span data-ttu-id="b1e8b-249">VPN-gatewayer och ExpressRoute-kretsar kräver ett undernät för sina egna toobe skapas.</span><span class="sxs-lookup"><span data-stu-id="b1e8b-249">VPN gateways and ExpressRoute circuits require a subnet of their own toobe created.</span></span>
* <span data-ttu-id="b1e8b-250">**Virtuella installationer**.</span><span class="sxs-lookup"><span data-stu-id="b1e8b-250">**Virtual appliances**.</span></span> <span data-ttu-id="b1e8b-251">Du kan använda en virtuell installation, till exempel en brandvägg, WAN accelerator eller VPN-gateway i ett Azure VNet.</span><span class="sxs-lookup"><span data-stu-id="b1e8b-251">You can use a virtual appliance, such as a firewall, WAN accelerator, or VPN gateway in an Azure VNet.</span></span> <span data-ttu-id="b1e8b-252">När du gör det måste för[dirigera trafik](virtual-networks-udr-overview.md) toothose installationer och isolera dem i sina egna undernät.</span><span class="sxs-lookup"><span data-stu-id="b1e8b-252">When you do so, you need too[route traffic](virtual-networks-udr-overview.md) toothose appliances and isolate them in their own subnet.</span></span>

### <a name="subnet-and-nsg-design-patterns"></a><span data-ttu-id="b1e8b-253">Designmönster för undernät och NSG</span><span class="sxs-lookup"><span data-stu-id="b1e8b-253">Subnet and NSG design patterns</span></span>
<span data-ttu-id="b1e8b-254">hello i tabellen nedan visas några vanliga designmönster för att använda undernät.</span><span class="sxs-lookup"><span data-stu-id="b1e8b-254">hello table below shows some common design patterns for using subnets.</span></span>

| <span data-ttu-id="b1e8b-255">Scenario</span><span class="sxs-lookup"><span data-stu-id="b1e8b-255">Scenario</span></span> | <span data-ttu-id="b1e8b-256">Diagram</span><span class="sxs-lookup"><span data-stu-id="b1e8b-256">Diagram</span></span> | <span data-ttu-id="b1e8b-257">Tekniker</span><span class="sxs-lookup"><span data-stu-id="b1e8b-257">Pros</span></span> | <span data-ttu-id="b1e8b-258">Nackdelar</span><span class="sxs-lookup"><span data-stu-id="b1e8b-258">Cons</span></span> |
| --- | --- | --- | --- |
| <span data-ttu-id="b1e8b-259">Enskilt undernät, NSG: er per programnivå per program</span><span class="sxs-lookup"><span data-stu-id="b1e8b-259">Single subnet, NSGs per application layer, per app</span></span> |![Enskilt undernät](./media/virtual-network-vnet-plan-design-arm/figure5.png) |<span data-ttu-id="b1e8b-261">Endast ett undernät toomanage.</span><span class="sxs-lookup"><span data-stu-id="b1e8b-261">Only one subnet toomanage.</span></span> |<span data-ttu-id="b1e8b-262">Flera NSG: er nödvändiga tooisolate varje program.</span><span class="sxs-lookup"><span data-stu-id="b1e8b-262">Multiple NSGs necessary tooisolate each application.</span></span> |
| <span data-ttu-id="b1e8b-263">Ett undernät per app, NSG: er per program lager</span><span class="sxs-lookup"><span data-stu-id="b1e8b-263">One subnet per app, NSGs per application layer</span></span> |![Undernät per program](./media/virtual-network-vnet-plan-design-arm/figure6.png) |<span data-ttu-id="b1e8b-265">Färre NSG: er toomanage.</span><span class="sxs-lookup"><span data-stu-id="b1e8b-265">Fewer NSGs toomanage.</span></span> |<span data-ttu-id="b1e8b-266">Flera undernät toomanage.</span><span class="sxs-lookup"><span data-stu-id="b1e8b-266">Multiple subnets toomanage.</span></span> |
| <span data-ttu-id="b1e8b-267">Ett undernät per programnivå NSG: er per app.</span><span class="sxs-lookup"><span data-stu-id="b1e8b-267">One subnet per application layer, NSGs per app.</span></span> |![Undernät per lager](./media/virtual-network-vnet-plan-design-arm/figure7.png) |<span data-ttu-id="b1e8b-269">Balansera mellan antalet undernät och NSG: er.</span><span class="sxs-lookup"><span data-stu-id="b1e8b-269">Balance between number of subnets and NSGs.</span></span> |<span data-ttu-id="b1e8b-270">Maximalt antal NSG: er per prenumeration.</span><span class="sxs-lookup"><span data-stu-id="b1e8b-270">Maximum number of NSGs per subscription.</span></span> <span data-ttu-id="b1e8b-271">Granska hello [Azure begränsar](../azure-subscription-service-limits.md#networking-limits) artikeln för information.</span><span class="sxs-lookup"><span data-stu-id="b1e8b-271">Review hello [Azure limits](../azure-subscription-service-limits.md#networking-limits) article for details.</span></span> |
| <span data-ttu-id="b1e8b-272">Ett undernät per programnivå per app, NSG: er per undernät</span><span class="sxs-lookup"><span data-stu-id="b1e8b-272">One subnet per application layer, per app, NSGs per subnet</span></span> |![Undernät per lager per program](./media/virtual-network-vnet-plan-design-arm/figure8.png) |<span data-ttu-id="b1e8b-274">Eventuellt mindre antal NSG: er.</span><span class="sxs-lookup"><span data-stu-id="b1e8b-274">Possibly smaller number of NSGs.</span></span> |<span data-ttu-id="b1e8b-275">Flera undernät toomanage.</span><span class="sxs-lookup"><span data-stu-id="b1e8b-275">Multiple subnets toomanage.</span></span> |

## <a name="sample-design"></a><span data-ttu-id="b1e8b-276">Exempel design</span><span class="sxs-lookup"><span data-stu-id="b1e8b-276">Sample design</span></span>
<span data-ttu-id="b1e8b-277">tooillustrate hello programmet hello information i den här artikeln bör du hello följande scenario.</span><span class="sxs-lookup"><span data-stu-id="b1e8b-277">tooillustrate hello application of hello information in this article, consider hello following scenario.</span></span>

<span data-ttu-id="b1e8b-278">Du arbetar för ett företag som har 2 datacenter i Nordamerika och två Datacenter Europa.</span><span class="sxs-lookup"><span data-stu-id="b1e8b-278">You work for a company that has 2 data centers in North America, and two data centers Europe.</span></span> <span data-ttu-id="b1e8b-279">Du har identifierat 6 olika kundinriktade program som underhålls av 2 olika affärsenheter som du vill toomigrate tooAzure som en pilot.</span><span class="sxs-lookup"><span data-stu-id="b1e8b-279">You identified 6 different customer facing applications maintained by 2 different business units that you want toomigrate tooAzure as a pilot.</span></span> <span data-ttu-id="b1e8b-280">hello grundläggande arkitektur för hello program är följande:</span><span class="sxs-lookup"><span data-stu-id="b1e8b-280">hello basic architecture for hello applications are as follows:</span></span>

* <span data-ttu-id="b1e8b-281">App1, App2, App3 och App4 är webbprogram på Linux-servrar som kör Ubuntu.</span><span class="sxs-lookup"><span data-stu-id="b1e8b-281">App1, App2, App3, and App4 are web applications hosted on Linux servers running Ubuntu.</span></span> <span data-ttu-id="b1e8b-282">Varje program ansluter tooa separat programserver som är värd för RESTful-tjänster på Linux-servrar.</span><span class="sxs-lookup"><span data-stu-id="b1e8b-282">Each application connects tooa separate application server that hosts RESTful services on Linux servers.</span></span> <span data-ttu-id="b1e8b-283">hello RESTful-tjänster ansluta tooa serverdel MySQL-databas.</span><span class="sxs-lookup"><span data-stu-id="b1e8b-283">hello RESTful services connect tooa back end MySQL database.</span></span>
* <span data-ttu-id="b1e8b-284">App5 och App6 är webbprogram som finns på Windows-servrar som kör Windows Server 2012 R2.</span><span class="sxs-lookup"><span data-stu-id="b1e8b-284">App5 and App6 are web applications hosted on Windows servers running Windows Server 2012 R2.</span></span> <span data-ttu-id="b1e8b-285">Varje program ansluter tooa serverdel SQL Server-databas.</span><span class="sxs-lookup"><span data-stu-id="b1e8b-285">Each application connects tooa back end SQL Server database.</span></span>
* <span data-ttu-id="b1e8b-286">Alla appar som finns för närvarande i något av hello företagets datacenter i Nordamerika.</span><span class="sxs-lookup"><span data-stu-id="b1e8b-286">All apps are currently hosted in one of hello company's data centers in North America.</span></span>
* <span data-ttu-id="b1e8b-287">hello lokalt Datacenter använder hello 10.0.0.0/8 adressutrymme.</span><span class="sxs-lookup"><span data-stu-id="b1e8b-287">hello on-premises data centers use hello 10.0.0.0/8 address space.</span></span>

<span data-ttu-id="b1e8b-288">Du behöver toodesign en lösning för virtuella nätverk som uppfyller hello följande krav:</span><span class="sxs-lookup"><span data-stu-id="b1e8b-288">You need toodesign a virtual network solution that meets hello following requirements:</span></span>

* <span data-ttu-id="b1e8b-289">Varje affärsenhet bör inte påverkas av resurser som används för andra enheter.</span><span class="sxs-lookup"><span data-stu-id="b1e8b-289">Each business unit should not be affected by resource consumption of other business units.</span></span>
* <span data-ttu-id="b1e8b-290">Du bör minimera hello för Vnet och undernät toomake enklare.</span><span class="sxs-lookup"><span data-stu-id="b1e8b-290">You should minimize hello amount of VNets and subnets toomake management easier.</span></span>
* <span data-ttu-id="b1e8b-291">Varje affärsenhet ska ha en enda test/utveckling VNet som används för alla program.</span><span class="sxs-lookup"><span data-stu-id="b1e8b-291">Each business unit should have a single test/development VNet used for all applications.</span></span>
* <span data-ttu-id="b1e8b-292">Varje program finns i 2 olika Azure-Datacenter per kontinent (Nordamerika och Europa).</span><span class="sxs-lookup"><span data-stu-id="b1e8b-292">Each application is hosted in 2 different Azure data centers per continent (North America and Europe).</span></span>
* <span data-ttu-id="b1e8b-293">Varje program är helt isolerade från varandra.</span><span class="sxs-lookup"><span data-stu-id="b1e8b-293">Each application is completely isolated from each other.</span></span>
* <span data-ttu-id="b1e8b-294">Varje program kan nås av kunder över hello Internet med HTTP.</span><span class="sxs-lookup"><span data-stu-id="b1e8b-294">Each application can be accessed by customers over hello Internet using HTTP.</span></span>
* <span data-ttu-id="b1e8b-295">Varje program kan användas av användare anslutna toohello lokala datacenter med hjälp av en krypterad tunnel.</span><span class="sxs-lookup"><span data-stu-id="b1e8b-295">Each application can be accessed by users connected toohello on-premises data centers by using an encrypted tunnel.</span></span>
* <span data-ttu-id="b1e8b-296">Anslutningen tooon lokala Datacenter ska använda den befintliga VPN-enheter.</span><span class="sxs-lookup"><span data-stu-id="b1e8b-296">Connection tooon-premises data centers should use existing VPN devices.</span></span>
* <span data-ttu-id="b1e8b-297">hello företagets nätverk gruppen ska ha fullständig kontroll över hello konfiguration av virtuellt nätverk.</span><span class="sxs-lookup"><span data-stu-id="b1e8b-297">hello company's networking group should have full control over hello VNet configuration.</span></span>
* <span data-ttu-id="b1e8b-298">Utvecklare i varje affärsenhet bara ska kunna toodeploy VMs tooexisting undernät.</span><span class="sxs-lookup"><span data-stu-id="b1e8b-298">Developers in each business unit should only be able toodeploy VMs tooexisting subnets.</span></span>
* <span data-ttu-id="b1e8b-299">Att kommer migreras alla program som de är tooAzure (lift och SKIFT).</span><span class="sxs-lookup"><span data-stu-id="b1e8b-299">All applications will be migrated as they are tooAzure (lift-and-shift).</span></span>
* <span data-ttu-id="b1e8b-300">hello-databaser på varje plats ska replikera tooother Azure platser en gång om dagen.</span><span class="sxs-lookup"><span data-stu-id="b1e8b-300">hello databases in each location should replicate tooother Azure locations once a day.</span></span>
* <span data-ttu-id="b1e8b-301">Varje program bör använda 5 frontend-webbservrar, 2 programservrar (om det behövs) och 2-databasservrar.</span><span class="sxs-lookup"><span data-stu-id="b1e8b-301">Each application should use 5 front end web servers, 2 application servers (when necessary), and 2 database servers.</span></span>

### <a name="plan"></a><span data-ttu-id="b1e8b-302">Planera</span><span class="sxs-lookup"><span data-stu-id="b1e8b-302">Plan</span></span>
<span data-ttu-id="b1e8b-303">Starta din design planera genom att besvara frågan hello i hello [definiera krav](#Define-requirements) enligt nedan.</span><span class="sxs-lookup"><span data-stu-id="b1e8b-303">You should start your design planning by answering hello question in hello [Define requirements](#Define-requirements) section as shown below.</span></span>

1. <span data-ttu-id="b1e8b-304">Vad Azure platser ska du använda toohost Vnet?</span><span class="sxs-lookup"><span data-stu-id="b1e8b-304">What Azure locations will you use toohost VNets?</span></span>

    <span data-ttu-id="b1e8b-305">2 platser i Nordamerika och Europa 2 platser.</span><span class="sxs-lookup"><span data-stu-id="b1e8b-305">2 locations in North America, and 2 locations in Europe.</span></span> <span data-ttu-id="b1e8b-306">Du bör välja de baserade på hello fysiska platsen för din befintliga lokala datacenter.</span><span class="sxs-lookup"><span data-stu-id="b1e8b-306">You should pick those based on hello physical location of your existing on-premises data centers.</span></span> <span data-ttu-id="b1e8b-307">På så sätt anslutningen från din fysiska platser tooAzure har bättre svarstid.</span><span class="sxs-lookup"><span data-stu-id="b1e8b-307">That way your connection from your physical locations tooAzure will have a better latency.</span></span>
2. <span data-ttu-id="b1e8b-308">Behöver du tooprovide kommunikation mellan dessa Azure platser?</span><span class="sxs-lookup"><span data-stu-id="b1e8b-308">Do you need tooprovide communication between these Azure locations?</span></span>

    <span data-ttu-id="b1e8b-309">Ja.</span><span class="sxs-lookup"><span data-stu-id="b1e8b-309">Yes.</span></span> <span data-ttu-id="b1e8b-310">Eftersom hello databaser måste vara replikerade tooall platser.</span><span class="sxs-lookup"><span data-stu-id="b1e8b-310">Since hello databases must be replicated tooall locations.</span></span>
3. <span data-ttu-id="b1e8b-311">Behöver du tooprovide kommunikation mellan din Azure-VNet(s) och dina lokala data center(s)?</span><span class="sxs-lookup"><span data-stu-id="b1e8b-311">Do you need tooprovide communication between your Azure VNet(s) and your on-premises data center(s)?</span></span>

    <span data-ttu-id="b1e8b-312">Ja.</span><span class="sxs-lookup"><span data-stu-id="b1e8b-312">Yes.</span></span> <span data-ttu-id="b1e8b-313">Eftersom användarna anslutna måste toohello lokalt Datacenter vara kan tooaccess hello program via en krypterad tunnel.</span><span class="sxs-lookup"><span data-stu-id="b1e8b-313">Since users connected toohello on-premises data centers must be able tooaccess hello applications through an encrypted tunnel.</span></span>
4. <span data-ttu-id="b1e8b-314">Hur många virtuella IaaS-datorer behöver för din lösning?</span><span class="sxs-lookup"><span data-stu-id="b1e8b-314">How many IaaS VMs do you need for your solution?</span></span>

    <span data-ttu-id="b1e8b-315">200 IaaS-VM.</span><span class="sxs-lookup"><span data-stu-id="b1e8b-315">200 IaaS VMs.</span></span> <span data-ttu-id="b1e8b-316">App1, App2, App3 och App4 kräver 5 webbservrar som varje, 2 programservrarna som varje och 2-databasservrar.</span><span class="sxs-lookup"><span data-stu-id="b1e8b-316">App1, App2, App3, and App4 require 5 web servers each, 2 applications servers each, and 2 database servers each.</span></span> <span data-ttu-id="b1e8b-317">Det är totalt 9 virtuella IaaS-datorer per program eller 36 IaaS-VM.</span><span class="sxs-lookup"><span data-stu-id="b1e8b-317">That's a total of 9 IaaS VMs per application, or 36 IaaS VMs.</span></span> <span data-ttu-id="b1e8b-318">App5 och App6 kräver 5 webbservrar och 2-databasservrar.</span><span class="sxs-lookup"><span data-stu-id="b1e8b-318">App5 and App6 require 5 web servers and 2 database servers each.</span></span> <span data-ttu-id="b1e8b-319">Det är totalt 7 virtuella IaaS-datorer per program eller 14 IaaS-VM.</span><span class="sxs-lookup"><span data-stu-id="b1e8b-319">That's a total of 7 IaaS VMs per application, or 14 IaaS VMs.</span></span> <span data-ttu-id="b1e8b-320">Du måste därför 50 IaaS-VM för alla program i varje Azure-region.</span><span class="sxs-lookup"><span data-stu-id="b1e8b-320">Therefore, you need 50 IaaS VMs for all applications in each Azure region.</span></span> <span data-ttu-id="b1e8b-321">Eftersom vi behöver toouse 4 regioner, kan det finnas 200 IaaS-VM.</span><span class="sxs-lookup"><span data-stu-id="b1e8b-321">Since we need toouse 4 regions, there will be 200 IaaS VMs.</span></span>

    <span data-ttu-id="b1e8b-322">Du måste också tooprovide DNS-servrar i varje virtuellt nätverk eller i ditt lokala data Datacenter tooresolve namn mellan Azure IaaS-VM och ditt lokala nätverk.</span><span class="sxs-lookup"><span data-stu-id="b1e8b-322">You will also need tooprovide DNS servers in each VNet, or in your on-premises data centers tooresolve name between your Azure IaaS VMs and your on-premises network.</span></span>
5. <span data-ttu-id="b1e8b-323">Behöver du tooisolate trafik baserat på grupper med virtuella datorer (d.v.s. frontend-webbservrar och backend-databasservrar)?</span><span class="sxs-lookup"><span data-stu-id="b1e8b-323">Do you need tooisolate traffic based on groups of VMs (i.e. front end web servers and back end database servers)?</span></span>

    <span data-ttu-id="b1e8b-324">Ja.</span><span class="sxs-lookup"><span data-stu-id="b1e8b-324">Yes.</span></span> <span data-ttu-id="b1e8b-325">Varje program bör vara helt isolerade från varandra och varje program lager ska också isoleras.</span><span class="sxs-lookup"><span data-stu-id="b1e8b-325">Each application should be completely isolated from each other, and each application layer should also be isolated.</span></span>
6. <span data-ttu-id="b1e8b-326">Behöver du toocontrol trafikflöde använder virtuella installationer?</span><span class="sxs-lookup"><span data-stu-id="b1e8b-326">Do you need toocontrol traffic flow using virtual appliances?</span></span>

    <span data-ttu-id="b1e8b-327">Nej.</span><span class="sxs-lookup"><span data-stu-id="b1e8b-327">No.</span></span> <span data-ttu-id="b1e8b-328">Virtuella installationer kan vara används tooprovide mer kontroll över trafikflödet, inklusive mer detaljerad loggning av data plan.</span><span class="sxs-lookup"><span data-stu-id="b1e8b-328">Virtual appliances can be used tooprovide more control over traffic flow, including more detailed data plane logging.</span></span>
7. <span data-ttu-id="b1e8b-329">Göra användare behöver olika uppsättningar av behörigheter toodifferent Azure-resurser?</span><span class="sxs-lookup"><span data-stu-id="b1e8b-329">Do users need different sets of permissions toodifferent Azure resources?</span></span>

    <span data-ttu-id="b1e8b-330">Ja.</span><span class="sxs-lookup"><span data-stu-id="b1e8b-330">Yes.</span></span> <span data-ttu-id="b1e8b-331">hello nätverk team måste fullständig kontroll på hello virtuella nätverksinställningar, medan utvecklare bara ska kunna toodeploy deras befintliga toopre undernät, virtuella datorer.</span><span class="sxs-lookup"><span data-stu-id="b1e8b-331">hello networking team needs full control on hello virtual networking settings, while developers should only be able toodeploy their VMs toopre-existing subnets.</span></span>

### <a name="design"></a><span data-ttu-id="b1e8b-332">Designa</span><span class="sxs-lookup"><span data-stu-id="b1e8b-332">Design</span></span>
<span data-ttu-id="b1e8b-333">Du bör följa hello design anger prenumerationer, Vnet, undernät och NSG: er.</span><span class="sxs-lookup"><span data-stu-id="b1e8b-333">You should follow hello design specifying subscriptions, VNets, subnets, and NSGs.</span></span> <span data-ttu-id="b1e8b-334">Diskuteras NSG: er här, men du får lära dig mer om [NSG: er](virtual-networks-nsg.md) innan du avslutar din design.</span><span class="sxs-lookup"><span data-stu-id="b1e8b-334">We will discuss NSGs here, but you should learn more about [NSGs](virtual-networks-nsg.md) before finishing your design.</span></span>

<span data-ttu-id="b1e8b-335">**Antalet prenumerationer och Vnet**</span><span class="sxs-lookup"><span data-stu-id="b1e8b-335">**Number of subscriptions and VNets**</span></span>

<span data-ttu-id="b1e8b-336">hello följande krav är relaterade toosubscriptions och Vnet:</span><span class="sxs-lookup"><span data-stu-id="b1e8b-336">hello following requirements are related toosubscriptions and VNets:</span></span>

* <span data-ttu-id="b1e8b-337">Varje affärsenhet bör inte påverkas av resurser som används för andra enheter.</span><span class="sxs-lookup"><span data-stu-id="b1e8b-337">Each business unit should not be affected by resource consumption of other business units.</span></span>
* <span data-ttu-id="b1e8b-338">Du bör minimera hello att Vnet och undernät.</span><span class="sxs-lookup"><span data-stu-id="b1e8b-338">You should minimize hello amount of VNets and subnets.</span></span>
* <span data-ttu-id="b1e8b-339">Varje affärsenhet ska ha en enda test/utveckling VNet som används för alla program.</span><span class="sxs-lookup"><span data-stu-id="b1e8b-339">Each business unit should have a single test/development VNet used for all applications.</span></span>
* <span data-ttu-id="b1e8b-340">Varje program finns i 2 olika Azure-Datacenter per kontinent (Nordamerika och Europa).</span><span class="sxs-lookup"><span data-stu-id="b1e8b-340">Each application is hosted in 2 different Azure data centers per continent (North America and Europe).</span></span>

<span data-ttu-id="b1e8b-341">Baserat på dessa krav, behöver du en prenumeration för varje affärsenhet.</span><span class="sxs-lookup"><span data-stu-id="b1e8b-341">Based on those requirements, you need a subscription for each business unit.</span></span> <span data-ttu-id="b1e8b-342">På så sätt kan förbrukningen av resurser från en affärsenhet inte räknas som en gränserna för andra enheter.</span><span class="sxs-lookup"><span data-stu-id="b1e8b-342">That way, consumption of resources from a business unit will not count towards limits for other business units.</span></span> <span data-ttu-id="b1e8b-343">Och eftersom du vill toominimize hello antalet Vnet, bör du använda hello **en prenumeration per affärsenhet, två Vnet per grupp appar** mönstret som du ser nedan.</span><span class="sxs-lookup"><span data-stu-id="b1e8b-343">And since you want toominimize hello number of VNets, you should consider using hello **one subscription per business unit, two VNets per group of apps** pattern as seen below.</span></span>

![Enda prenumeration](./media/virtual-network-vnet-plan-design-arm/figure9.png)

<span data-ttu-id="b1e8b-345">Du måste också toospecify hello-adressutrymmet för varje virtuellt nätverk.</span><span class="sxs-lookup"><span data-stu-id="b1e8b-345">You also need toospecify hello address space for each VNet.</span></span> <span data-ttu-id="b1e8b-346">Eftersom du behöver anslutningen mellan hello lokalt Datacenter hello Azure-regioner hello-adressutrymmet som används för Azure Vnet kan inte vara i konflikt med hello lokala nätverk och hello-adressutrymmet som används av varje virtuellt nätverk får inte vara i konflikt med andra befintliga Vnet.</span><span class="sxs-lookup"><span data-stu-id="b1e8b-346">Since you need connectivity between hello on-premises data centers and hello Azure regions, hello address space used for Azure VNets cannot clash with hello on-premises network, and hello address space used by each VNet should not clash with other existing VNets.</span></span> <span data-ttu-id="b1e8b-347">Du kan använda hello-adressutrymmen i hello tabellen nedan toosatisfy dessa krav.</span><span class="sxs-lookup"><span data-stu-id="b1e8b-347">You could use hello address spaces in hello table below toosatisfy these requirements.</span></span>  

| <span data-ttu-id="b1e8b-348">**Prenumeration**</span><span class="sxs-lookup"><span data-stu-id="b1e8b-348">**Subscription**</span></span> | <span data-ttu-id="b1e8b-349">**Virtuella nätverk**</span><span class="sxs-lookup"><span data-stu-id="b1e8b-349">**VNet**</span></span> | <span data-ttu-id="b1e8b-350">**Azure-region**</span><span class="sxs-lookup"><span data-stu-id="b1e8b-350">**Azure region**</span></span> | <span data-ttu-id="b1e8b-351">**Adressutrymme**</span><span class="sxs-lookup"><span data-stu-id="b1e8b-351">**Address space**</span></span> |
| --- | --- | --- | --- |
| <span data-ttu-id="b1e8b-352">BU1</span><span class="sxs-lookup"><span data-stu-id="b1e8b-352">BU1</span></span> |<span data-ttu-id="b1e8b-353">ProdBU1US1</span><span class="sxs-lookup"><span data-stu-id="b1e8b-353">ProdBU1US1</span></span> |<span data-ttu-id="b1e8b-354">Västra USA</span><span class="sxs-lookup"><span data-stu-id="b1e8b-354">West US</span></span> |<span data-ttu-id="b1e8b-355">172.16.0.0/16</span><span class="sxs-lookup"><span data-stu-id="b1e8b-355">172.16.0.0/16</span></span> |
| <span data-ttu-id="b1e8b-356">BU1</span><span class="sxs-lookup"><span data-stu-id="b1e8b-356">BU1</span></span> |<span data-ttu-id="b1e8b-357">ProdBU1US2</span><span class="sxs-lookup"><span data-stu-id="b1e8b-357">ProdBU1US2</span></span> |<span data-ttu-id="b1e8b-358">Östra USA</span><span class="sxs-lookup"><span data-stu-id="b1e8b-358">East US</span></span> |<span data-ttu-id="b1e8b-359">172.17.0.0/16</span><span class="sxs-lookup"><span data-stu-id="b1e8b-359">172.17.0.0/16</span></span> |
| <span data-ttu-id="b1e8b-360">BU1</span><span class="sxs-lookup"><span data-stu-id="b1e8b-360">BU1</span></span> |<span data-ttu-id="b1e8b-361">ProdBU1EU1</span><span class="sxs-lookup"><span data-stu-id="b1e8b-361">ProdBU1EU1</span></span> |<span data-ttu-id="b1e8b-362">Norra Europa</span><span class="sxs-lookup"><span data-stu-id="b1e8b-362">North Europe</span></span> |<span data-ttu-id="b1e8b-363">172.18.0.0/16</span><span class="sxs-lookup"><span data-stu-id="b1e8b-363">172.18.0.0/16</span></span> |
| <span data-ttu-id="b1e8b-364">BU1</span><span class="sxs-lookup"><span data-stu-id="b1e8b-364">BU1</span></span> |<span data-ttu-id="b1e8b-365">ProdBU1EU2</span><span class="sxs-lookup"><span data-stu-id="b1e8b-365">ProdBU1EU2</span></span> |<span data-ttu-id="b1e8b-366">Västra Europa</span><span class="sxs-lookup"><span data-stu-id="b1e8b-366">West Europe</span></span> |<span data-ttu-id="b1e8b-367">172.19.0.0/16</span><span class="sxs-lookup"><span data-stu-id="b1e8b-367">172.19.0.0/16</span></span> |
| <span data-ttu-id="b1e8b-368">BU1</span><span class="sxs-lookup"><span data-stu-id="b1e8b-368">BU1</span></span> |<span data-ttu-id="b1e8b-369">TestDevBU1</span><span class="sxs-lookup"><span data-stu-id="b1e8b-369">TestDevBU1</span></span> |<span data-ttu-id="b1e8b-370">Västra USA</span><span class="sxs-lookup"><span data-stu-id="b1e8b-370">West US</span></span> |<span data-ttu-id="b1e8b-371">172.20.0.0/16</span><span class="sxs-lookup"><span data-stu-id="b1e8b-371">172.20.0.0/16</span></span> |
| <span data-ttu-id="b1e8b-372">BU2</span><span class="sxs-lookup"><span data-stu-id="b1e8b-372">BU2</span></span> |<span data-ttu-id="b1e8b-373">TestDevBU2</span><span class="sxs-lookup"><span data-stu-id="b1e8b-373">TestDevBU2</span></span> |<span data-ttu-id="b1e8b-374">Västra USA</span><span class="sxs-lookup"><span data-stu-id="b1e8b-374">West US</span></span> |<span data-ttu-id="b1e8b-375">172.21.0.0/16</span><span class="sxs-lookup"><span data-stu-id="b1e8b-375">172.21.0.0/16</span></span> |
| <span data-ttu-id="b1e8b-376">BU2</span><span class="sxs-lookup"><span data-stu-id="b1e8b-376">BU2</span></span> |<span data-ttu-id="b1e8b-377">ProdBU2US1</span><span class="sxs-lookup"><span data-stu-id="b1e8b-377">ProdBU2US1</span></span> |<span data-ttu-id="b1e8b-378">Västra USA</span><span class="sxs-lookup"><span data-stu-id="b1e8b-378">West US</span></span> |<span data-ttu-id="b1e8b-379">172.22.0.0/16</span><span class="sxs-lookup"><span data-stu-id="b1e8b-379">172.22.0.0/16</span></span> |
| <span data-ttu-id="b1e8b-380">BU2</span><span class="sxs-lookup"><span data-stu-id="b1e8b-380">BU2</span></span> |<span data-ttu-id="b1e8b-381">ProdBU2US2</span><span class="sxs-lookup"><span data-stu-id="b1e8b-381">ProdBU2US2</span></span> |<span data-ttu-id="b1e8b-382">Östra USA</span><span class="sxs-lookup"><span data-stu-id="b1e8b-382">East US</span></span> |<span data-ttu-id="b1e8b-383">172.23.0.0/16</span><span class="sxs-lookup"><span data-stu-id="b1e8b-383">172.23.0.0/16</span></span> |
| <span data-ttu-id="b1e8b-384">BU2</span><span class="sxs-lookup"><span data-stu-id="b1e8b-384">BU2</span></span> |<span data-ttu-id="b1e8b-385">ProdBU2EU1</span><span class="sxs-lookup"><span data-stu-id="b1e8b-385">ProdBU2EU1</span></span> |<span data-ttu-id="b1e8b-386">Norra Europa</span><span class="sxs-lookup"><span data-stu-id="b1e8b-386">North Europe</span></span> |<span data-ttu-id="b1e8b-387">172.24.0.0/16</span><span class="sxs-lookup"><span data-stu-id="b1e8b-387">172.24.0.0/16</span></span> |
| <span data-ttu-id="b1e8b-388">BU2</span><span class="sxs-lookup"><span data-stu-id="b1e8b-388">BU2</span></span> |<span data-ttu-id="b1e8b-389">ProdBU2EU2</span><span class="sxs-lookup"><span data-stu-id="b1e8b-389">ProdBU2EU2</span></span> |<span data-ttu-id="b1e8b-390">Västra Europa</span><span class="sxs-lookup"><span data-stu-id="b1e8b-390">West Europe</span></span> |<span data-ttu-id="b1e8b-391">172.25.0.0/16</span><span class="sxs-lookup"><span data-stu-id="b1e8b-391">172.25.0.0/16</span></span> |

<span data-ttu-id="b1e8b-392">**Antalet undernät och NSG: er**</span><span class="sxs-lookup"><span data-stu-id="b1e8b-392">**Number of subnets and NSGs**</span></span>

<span data-ttu-id="b1e8b-393">hello följande krav är relaterade toosubnets och NSG: er:</span><span class="sxs-lookup"><span data-stu-id="b1e8b-393">hello following requirements are related toosubnets and NSGs:</span></span>

* <span data-ttu-id="b1e8b-394">Du bör minimera hello att Vnet och undernät.</span><span class="sxs-lookup"><span data-stu-id="b1e8b-394">You should minimize hello amount of VNets and subnets.</span></span>
* <span data-ttu-id="b1e8b-395">Varje program är helt isolerade från varandra.</span><span class="sxs-lookup"><span data-stu-id="b1e8b-395">Each application is completely isolated from each other.</span></span>
* <span data-ttu-id="b1e8b-396">Varje program kan nås av kunder över hello Internet med HTTP.</span><span class="sxs-lookup"><span data-stu-id="b1e8b-396">Each application can be accessed by customers over hello Internet using HTTP.</span></span>
* <span data-ttu-id="b1e8b-397">Varje program kan användas av användare anslutna toohello lokala datacenter med hjälp av en krypterad tunnel.</span><span class="sxs-lookup"><span data-stu-id="b1e8b-397">Each application can be accessed by users connected toohello on-premises data centers by using an encrypted tunnel.</span></span>
* <span data-ttu-id="b1e8b-398">Anslutningen tooon lokala Datacenter ska använda den befintliga VPN-enheter.</span><span class="sxs-lookup"><span data-stu-id="b1e8b-398">Connection tooon-premises data centers should use existing VPN devices.</span></span>
* <span data-ttu-id="b1e8b-399">hello-databaser på varje plats ska replikera tooother Azure platser en gång om dagen.</span><span class="sxs-lookup"><span data-stu-id="b1e8b-399">hello databases in each location should replicate tooother Azure locations once a day.</span></span>

<span data-ttu-id="b1e8b-400">Baserat på dessa krav, kan du använda ett undernät per programnivå och använder NSG: er toofilter trafik per program.</span><span class="sxs-lookup"><span data-stu-id="b1e8b-400">Based on those requirements, you could use one subnet per application layer, and use NSGs toofilter traffic per application.</span></span> <span data-ttu-id="b1e8b-401">På så sätt kan du bara ha 3 undernät i varje virtuellt nätverk (klientdel programnivå och dataskiktet) och en NSG per program per undernät.</span><span class="sxs-lookup"><span data-stu-id="b1e8b-401">That way, you only have 3 subnets in each VNet (front end, application layer, and data layer) and one NSG per application per subnet.</span></span> <span data-ttu-id="b1e8b-402">I det här fallet bör du använda hello **ett undernät per programnivå NSG: er per app** designmönstret.</span><span class="sxs-lookup"><span data-stu-id="b1e8b-402">In this case, you should consider using hello **one subnet per application layer, NSGs per app** design pattern.</span></span> <span data-ttu-id="b1e8b-403">hello bilden nedan visar hello användning av hello designmönstret som representerar hello **ProdBU1US1** VNet.</span><span class="sxs-lookup"><span data-stu-id="b1e8b-403">hello figure below shows hello use of hello design pattern representing hello **ProdBU1US1** VNet.</span></span>

![Ett undernät per lager, en NSG per program per lager](./media/virtual-network-vnet-plan-design-arm/figure11.png)

<span data-ttu-id="b1e8b-405">Men måste du också toocreate ett extra undernät för hello VPN-anslutning mellan hello Vnet och ditt lokala datacenter.</span><span class="sxs-lookup"><span data-stu-id="b1e8b-405">However, you also need toocreate an extra subnet for hello VPN connectivity between hello VNets, and your on-premises data centers.</span></span> <span data-ttu-id="b1e8b-406">Och du behöver toospecify hello-adressutrymmet för varje undernät.</span><span class="sxs-lookup"><span data-stu-id="b1e8b-406">And you need toospecify hello address space for each subnet.</span></span> <span data-ttu-id="b1e8b-407">hello bilden nedan visar ett exempel lösning för **ProdBU1US1** VNet.</span><span class="sxs-lookup"><span data-stu-id="b1e8b-407">hello figure below shows a sample solution for **ProdBU1US1** VNet.</span></span> <span data-ttu-id="b1e8b-408">Du kan replikera det här scenariot för varje virtuellt nätverk.</span><span class="sxs-lookup"><span data-stu-id="b1e8b-408">You would replicate this scenario for each VNet.</span></span> <span data-ttu-id="b1e8b-409">Varje färg motsvarar ett annat program.</span><span class="sxs-lookup"><span data-stu-id="b1e8b-409">Each color represents a different application.</span></span>

![Exempel VNet](./media/virtual-network-vnet-plan-design-arm/figure10.png)

<span data-ttu-id="b1e8b-411">**Åtkomstkontroll**</span><span class="sxs-lookup"><span data-stu-id="b1e8b-411">**Access Control**</span></span>

<span data-ttu-id="b1e8b-412">hello följande krav är relaterade tooaccess kontroll:</span><span class="sxs-lookup"><span data-stu-id="b1e8b-412">hello following requirements are related tooaccess control:</span></span>

* <span data-ttu-id="b1e8b-413">hello företagets nätverk gruppen ska ha fullständig kontroll över hello konfiguration av virtuellt nätverk.</span><span class="sxs-lookup"><span data-stu-id="b1e8b-413">hello company's networking group should have full control over hello VNet configuration.</span></span>
* <span data-ttu-id="b1e8b-414">Utvecklare i varje affärsenhet bara ska kunna toodeploy VMs tooexisting undernät.</span><span class="sxs-lookup"><span data-stu-id="b1e8b-414">Developers in each business unit should only be able toodeploy VMs tooexisting subnets.</span></span>

<span data-ttu-id="b1e8b-415">Baserat på dessa krav, kan du lägga till användare från hello nätverk team toohello inbyggda **Network-deltagare** roll i varje prenumeration, och skapa en anpassad roll för hello programutvecklare i varje prenumeration som ger dem rättigheter tooadd VMs tooexisting undernät.</span><span class="sxs-lookup"><span data-stu-id="b1e8b-415">Based on those requirements, you could add users from hello networking team toohello built-in **Network Contributor** role in each subscription; and create a custom role for hello application developers in each subscription giving them rights tooadd VMs tooexisting subnets.</span></span>

## <a name="next-steps"></a><span data-ttu-id="b1e8b-416">Nästa steg</span><span class="sxs-lookup"><span data-stu-id="b1e8b-416">Next steps</span></span>
* <span data-ttu-id="b1e8b-417">[Distribuera ett virtuellt nätverk](virtual-networks-create-vnet-arm-template-click.md) baserat på ett scenario.</span><span class="sxs-lookup"><span data-stu-id="b1e8b-417">[Deploy a virtual network](virtual-networks-create-vnet-arm-template-click.md) based on a scenario.</span></span>
* <span data-ttu-id="b1e8b-418">Förstå hur för[belastningsutjämna](../load-balancer/load-balancer-overview.md) IaaS-VM och [hantera routning över flera Azure-regioner](../traffic-manager/traffic-manager-overview.md).</span><span class="sxs-lookup"><span data-stu-id="b1e8b-418">Understand how too[load balance](../load-balancer/load-balancer-overview.md) IaaS VMs and [manage routing over multiple Azure regions](../traffic-manager/traffic-manager-overview.md).</span></span>
* <span data-ttu-id="b1e8b-419">Lär dig mer om [NSG: er och hur tooplan och design](virtual-networks-nsg.md) en NSG-lösning.</span><span class="sxs-lookup"><span data-stu-id="b1e8b-419">Learn more about [NSGs and how tooplan and design](virtual-networks-nsg.md) an NSG solution.</span></span>
* <span data-ttu-id="b1e8b-420">Lär dig mer om din [mellan platser och VNet anslutningsalternativ](../vpn-gateway/vpn-gateway-about-vpngateways.md#s2smulti).</span><span class="sxs-lookup"><span data-stu-id="b1e8b-420">Learn more about your [cross-premises and VNet connectivity options](../vpn-gateway/vpn-gateway-about-vpngateways.md#s2smulti).</span></span>

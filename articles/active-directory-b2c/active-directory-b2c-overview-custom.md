---
title: 'Azure Active Directory B2C: Anpassade principer | Microsoft Docs'
description: "Ett ämne på Azure Active Directory B2C anpassade principer"
services: active-directory-b2c
documentationcenter: 
author: parakhj
manager: krassk
editor: parakhj
ms.assetid: 1ff398a4-2079-4615-94f1-57de22c0aad6
ms.service: active-directory-b2c
ms.workload: identity
ms.tgt_pltfrm: na
ms.topic: article
ms.devlang: na
ms.date: 04/04/2017
ms.author: parakhj
ms.openlocfilehash: 33f62a33ea7a3fadb6e7b045de10df25f5edbe83
ms.sourcegitcommit: 02e69c4a9d17645633357fe3d46677c2ff22c85a
ms.translationtype: MT
ms.contentlocale: sv-SE
ms.lasthandoff: 08/03/2017
---
# <a name="azure-active-directory-b2c-custom-policies"></a><span data-ttu-id="3c81a-103">Azure Active Directory B2C: Anpassade policys</span><span class="sxs-lookup"><span data-stu-id="3c81a-103">Azure Active Directory B2C: Custom policies</span></span>

[!INCLUDE [active-directory-b2c-advanced-audience-warning](../../includes/active-directory-b2c-advanced-audience-warning.md)]

## <a name="what-are-custom-policies"></a><span data-ttu-id="3c81a-104">Vad är anpassade principer?</span><span class="sxs-lookup"><span data-stu-id="3c81a-104">What are custom policies?</span></span>

<span data-ttu-id="3c81a-105">Anpassade principer är konfigurationsfiler som definierar beteendet för din Azure AD B2C-klient.</span><span class="sxs-lookup"><span data-stu-id="3c81a-105">Custom policies are configuration files that define the behavior of your Azure AD B2C tenant.</span></span> <span data-ttu-id="3c81a-106">Medan **inbyggda principer** är fördefinierade i Azure AD B2C-portal för de vanligaste uppgifterna identitet anpassade principer kan redigeras fullständigt med en identity-utvecklare att slutföra en nära obegränsat antal uppgifter.</span><span class="sxs-lookup"><span data-stu-id="3c81a-106">Whereas **built-in policies** are predefined in the Azure AD B2C portal for the most common identity tasks, custom policies can be fully edited by an identity developer to complete a near unlimited number of tasks.</span></span> <span data-ttu-id="3c81a-107">Läs vidare för att avgöra om anpassade principer som är rätt för dig och din identitet scenario.</span><span class="sxs-lookup"><span data-stu-id="3c81a-107">Read on to determine if custom policies are right for you and your identity scenario.</span></span>

<span data-ttu-id="3c81a-108">**Redigera anpassad princip är inte för alla.**</span><span class="sxs-lookup"><span data-stu-id="3c81a-108">**Custom policy editing is not for everyone.**</span></span> <span data-ttu-id="3c81a-109">Inlärningskurvan krävande på starttiden är längre och framtida ändringar anpassade principer som kräver liknande kunskaper för att underhålla.</span><span class="sxs-lookup"><span data-stu-id="3c81a-109">The learning curve is demanding, the startup time is longer, and future changes to custom policies will require similar expertise to maintain.</span></span> <span data-ttu-id="3c81a-110">Inbyggda principer bör planeras noggrant först för ditt scenario innan du använder anpassade principer.</span><span class="sxs-lookup"><span data-stu-id="3c81a-110">Built-in policies should be carefully considered first for your scenario before using custom policies.</span></span>

## <a name="comparing-built-in-policies-and-custom-policies"></a><span data-ttu-id="3c81a-111">Jämföra inbyggda och anpassade principer</span><span class="sxs-lookup"><span data-stu-id="3c81a-111">Comparing built-in policies and custom policies</span></span>

| | <span data-ttu-id="3c81a-112">Inbyggda principer</span><span class="sxs-lookup"><span data-stu-id="3c81a-112">Built-in policies</span></span> | <span data-ttu-id="3c81a-113">anpassade principer</span><span class="sxs-lookup"><span data-stu-id="3c81a-113">Custom policies</span></span> |
|-|-------------------|-----------------|
|<span data-ttu-id="3c81a-114">Målgruppsanvändare</span><span class="sxs-lookup"><span data-stu-id="3c81a-114">Target users</span></span> | <span data-ttu-id="3c81a-115">Alla utvecklare av program med eller utan kunskaper identitet</span><span class="sxs-lookup"><span data-stu-id="3c81a-115">All app developers with or without identity expertise</span></span> | <span data-ttu-id="3c81a-116">Identity-tekniker: systemintegrerare, konsulter och interna identitet team.</span><span class="sxs-lookup"><span data-stu-id="3c81a-116">Identity pros: systems integrators, consultants and in-house identity teams.</span></span> <span data-ttu-id="3c81a-117">De är nöjd med OpenIDConnect flöden och förstå identitetsleverantörer och Anspråksbaserad autentisering</span><span class="sxs-lookup"><span data-stu-id="3c81a-117">They are comfortable with OpenIDConnect flows, and understand identity providers and claims-based authentication</span></span> |
|<span data-ttu-id="3c81a-118">Metod för principkonfiguration</span><span class="sxs-lookup"><span data-stu-id="3c81a-118">Configuration method</span></span> | <span data-ttu-id="3c81a-119">Azure-portalen med ett användarvänligt gränssnitt</span><span class="sxs-lookup"><span data-stu-id="3c81a-119">Azure portal with a user-friendly UI</span></span> | <span data-ttu-id="3c81a-120">Redigera XML-filer och sedan ladda upp till Azure-portalen</span><span class="sxs-lookup"><span data-stu-id="3c81a-120">Directly editing XML files and then uploading to the Azure portal</span></span> |
|<span data-ttu-id="3c81a-121">Anpassning av Användargränssnittet</span><span class="sxs-lookup"><span data-stu-id="3c81a-121">UI customization</span></span> | <span data-ttu-id="3c81a-122">Fullständig anpassning av Användargränssnittet, inklusive stöd för HTML, CSS och jscript (kräver anpassade domäner)</span><span class="sxs-lookup"><span data-stu-id="3c81a-122">Full UI customization, including HTML, CSS, and jscript support(requires custom domain)</span></span><br><br><span data-ttu-id="3c81a-123">Stöd för flera språk med anpassade strängar</span><span class="sxs-lookup"><span data-stu-id="3c81a-123">Multilanguage support with Custom strings</span></span> | <span data-ttu-id="3c81a-124">samma</span><span class="sxs-lookup"><span data-stu-id="3c81a-124">Same</span></span> |
| <span data-ttu-id="3c81a-125">Attributanpassning</span><span class="sxs-lookup"><span data-stu-id="3c81a-125">Attribute customization</span></span> | <span data-ttu-id="3c81a-126">Standard- och anpassade attribut</span><span class="sxs-lookup"><span data-stu-id="3c81a-126">Standard and custom attributes</span></span> | <span data-ttu-id="3c81a-127">samma</span><span class="sxs-lookup"><span data-stu-id="3c81a-127">Same</span></span> |
|<span data-ttu-id="3c81a-128">Hantering av token och session</span><span class="sxs-lookup"><span data-stu-id="3c81a-128">Token and session management</span></span> | <span data-ttu-id="3c81a-129">Anpassade token och flera olika sessionsalternativ för</span><span class="sxs-lookup"><span data-stu-id="3c81a-129">Custom token and multiple session options</span></span> | <span data-ttu-id="3c81a-130">samma</span><span class="sxs-lookup"><span data-stu-id="3c81a-130">Same</span></span> |
|<span data-ttu-id="3c81a-131">Identitetsleverantörer</span><span class="sxs-lookup"><span data-stu-id="3c81a-131">Identity Providers</span></span>| <span data-ttu-id="3c81a-132">**Idag**: fördefinierade lokal, sociala provider</span><span class="sxs-lookup"><span data-stu-id="3c81a-132">**Today**: predefined local, social provider</span></span><br><br><span data-ttu-id="3c81a-133">**Framtida**: standardbaserad OIDC SAML OAuth</span><span class="sxs-lookup"><span data-stu-id="3c81a-133">**Future**: Standards-based OIDC, SAML, OAuth</span></span> | <span data-ttu-id="3c81a-134">**Idag**: standardbaserad OIDC OAUTH SAML</span><span class="sxs-lookup"><span data-stu-id="3c81a-134">**Today**: Standards-based OIDC, OAUTH, SAML</span></span><br><br><span data-ttu-id="3c81a-135">**Framtida**: WsFed</span><span class="sxs-lookup"><span data-stu-id="3c81a-135">**Future**: WsFed</span></span> |
|<span data-ttu-id="3c81a-136">Identitet uppgifter (exempel)</span><span class="sxs-lookup"><span data-stu-id="3c81a-136">Identity Tasks (examples)</span></span> | <span data-ttu-id="3c81a-137">Registrering eller inloggning med lokala och många sociala konton</span><span class="sxs-lookup"><span data-stu-id="3c81a-137">Signup or SignIn with local and many social accounts</span></span><br><br><span data-ttu-id="3c81a-138">Återställning av lösenord för självbetjäning</span><span class="sxs-lookup"><span data-stu-id="3c81a-138">Self-Service Password Reset</span></span><br><br><span data-ttu-id="3c81a-139">Redigera profil</span><span class="sxs-lookup"><span data-stu-id="3c81a-139">Profile Edit</span></span><br><br><span data-ttu-id="3c81a-140">Multi-Factor Authentication-scenarier</span><span class="sxs-lookup"><span data-stu-id="3c81a-140">Multi-Factor Auth scenarios</span></span><br><br><span data-ttu-id="3c81a-141">Anpassa token och sessioner</span><span class="sxs-lookup"><span data-stu-id="3c81a-141">Customize Tokens and sessions</span></span><br><br><span data-ttu-id="3c81a-142">Åtkomsttoken flödar</span><span class="sxs-lookup"><span data-stu-id="3c81a-142">Access Token flows</span></span> | <span data-ttu-id="3c81a-143">Utföra samma åtgärder som inbyggda principer med hjälp av anpassade identitetsleverantörer eller använda anpassade omfattningar</span><span class="sxs-lookup"><span data-stu-id="3c81a-143">Complete the same tasks as built-in policies using custom identity providers or use custom scopes</span></span><br><br><span data-ttu-id="3c81a-144">Etablera användare i ett annat system vid tiden för registrering</span><span class="sxs-lookup"><span data-stu-id="3c81a-144">Provision user in another system at the time of registration</span></span><br><br><span data-ttu-id="3c81a-145">Skicka ett välkomstmeddelande med din egen e-post-leverantör</span><span class="sxs-lookup"><span data-stu-id="3c81a-145">Send a welcome email using your own email service provider</span></span><br><br><span data-ttu-id="3c81a-146">Använd en användararkivet utanför B2C</span><span class="sxs-lookup"><span data-stu-id="3c81a-146">Use a user store outside B2C</span></span><br><br><span data-ttu-id="3c81a-147">Verifiera användarens angivna information med en betrodd dator via API</span><span class="sxs-lookup"><span data-stu-id="3c81a-147">Validate user provided information with a trusted system via API</span></span> |

## <a name="policy-files"></a><span data-ttu-id="3c81a-148">Principfiler</span><span class="sxs-lookup"><span data-stu-id="3c81a-148">Policy files</span></span>

<span data-ttu-id="3c81a-149">En anpassad princip representeras som en eller flera XML-formaterade filer som refererar till varandra i en hierarkisk kedja.</span><span class="sxs-lookup"><span data-stu-id="3c81a-149">A custom policy is represented as one or several XML-formatted files which refer to each other in a hierarchical chain.</span></span> <span data-ttu-id="3c81a-150">XML-element definiera: anspråk schemat anspråk omvandlingar, definitioner av innehåll, anspråk providers-tekniska profiler och Userjourney orchestration-steg, bland annat.</span><span class="sxs-lookup"><span data-stu-id="3c81a-150">The XML elements define: Claims schema, claims transformations, content definitions, claims providers/technical profiles, and Userjourney orchestration steps, among other elements.</span></span>

<span data-ttu-id="3c81a-151">Vi rekommenderar användning av tre typer av principfiler:</span><span class="sxs-lookup"><span data-stu-id="3c81a-151">We recommend the use of three types of policy files:</span></span>

- <span data-ttu-id="3c81a-152">**En grundläggande fil**, som innehåller de flesta av definitionerna och som Azure tillhandahåller ett fullständigt exempel.</span><span class="sxs-lookup"><span data-stu-id="3c81a-152">**A BASE file**, which contains most of the definitions and for which Azure provides a complete sample.</span></span>  <span data-ttu-id="3c81a-153">Vi rekommenderar att du gör ett minsta antal ändringar i den här filen som hjälp med felsökning och lång sikt dina principer</span><span class="sxs-lookup"><span data-stu-id="3c81a-153">We recommend you make a minimum number of changes to this file to help with troubleshooting, and long-term maintenance of your policies</span></span>
- <span data-ttu-id="3c81a-154">**en fil i tillägg** som innehåller unika konfigurationsändringar för din klient</span><span class="sxs-lookup"><span data-stu-id="3c81a-154">**an EXTensions file** that holds the unique configuration changes for your tenant</span></span>
- <span data-ttu-id="3c81a-155">**en förlitande part (RP)-fil** som är den enda uppgift fokuserar fil som anropas direkt av programmet eller tjänsten (även kallat förlitande part).</span><span class="sxs-lookup"><span data-stu-id="3c81a-155">**a Relying Party (RP) file** which is the single task-focused file that is invoked directly by the application or service (aka Relying Party).</span></span>  <span data-ttu-id="3c81a-156">Läs artikeln på principdefinitioner för mer information.</span><span class="sxs-lookup"><span data-stu-id="3c81a-156">Read the article on Policy file definitions for more information.</span></span>  <span data-ttu-id="3c81a-157">Varje unik aktiviteten kräver sin egen RP och beroende på anpassningen krav antalet vara ”Totalt program x Totalt antal användningsområden”.</span><span class="sxs-lookup"><span data-stu-id="3c81a-157">Each unique task requires its own RP and depending on branding requirements the number might be "total of applications x total number of use cases".</span></span>


<span data-ttu-id="3c81a-158">Inbyggda principer i Azure AD B2C följer mönstret för 3-fil som beskrivs ovan, men utvecklaren ser endast förlitande part (RP)-fil, medan portalen gör ändringar i filen EXTenstions i bakgrunden.</span><span class="sxs-lookup"><span data-stu-id="3c81a-158">Built-in policies in Azure AD B2C follow the 3-file pattern depicted above, but the developer only sees the Relying Party (RP) file, while the portal makes changes in the background to the EXTenstions file.</span></span>

## <a name="core-concepts-you-should-know-when-using-custom-policies"></a><span data-ttu-id="3c81a-159">Grundläggande begrepp som du bör känna till när du använder anpassade principer</span><span class="sxs-lookup"><span data-stu-id="3c81a-159">Core concepts you should know when using custom policies</span></span>

### <a name="azure-active-directory-b2c"></a><span data-ttu-id="3c81a-160">Azure Active Directory B2C</span><span class="sxs-lookup"><span data-stu-id="3c81a-160">Azure Active Directory B2C</span></span>

<span data-ttu-id="3c81a-161">Azures identitets- och hantering (CIAM) kundtjänst.</span><span class="sxs-lookup"><span data-stu-id="3c81a-161">Azure’s customer identity and access management (CIAM) service.</span></span> <span data-ttu-id="3c81a-162">Tjänsten omfattar:</span><span class="sxs-lookup"><span data-stu-id="3c81a-162">The service includes:</span></span>

1. <span data-ttu-id="3c81a-163">En användarkatalog i form av en särskild syfte Azure Active Directory tillgänglig via Microsoft Graph och som innehåller användardata för både lokala och konton för federerade</span><span class="sxs-lookup"><span data-stu-id="3c81a-163">A user directory in the form of a special-purpose Azure Active Directory accessible via Microsoft Graph and which holds user data for both local accounts and federated accounts</span></span> 
2. <span data-ttu-id="3c81a-164">Åtkomst till den **identitet upplevelse Framework** som samordnar förtroende mellan användare och enheter och skickar anspråk mellan dem för att slutföra en identity-/ access management-aktivitet</span><span class="sxs-lookup"><span data-stu-id="3c81a-164">Access to the **Identity Experience Framework** which orchestrates trust between users and entities and passes claims between them to complete an identity/access management task</span></span> 
3. <span data-ttu-id="3c81a-165">En säkerhetstokentjänst (STS) utfärda id token, uppdatera token och åtkomst-token (och motsvarande SAML intyg) och godkänna dem för att skydda resurser.</span><span class="sxs-lookup"><span data-stu-id="3c81a-165">A security token service (STS) issuing id tokens, refresh tokens, and access tokens (and equivalent SAML assertions) and validating them to protect resources.</span></span>

<span data-ttu-id="3c81a-166">Azure AD B2C samverkar med identitetsleverantörer, användare, andra system och lokala användarkatalogen i följd att uppnå en identity-aktivitet (t.ex. en användare logga in registrera en ny användare, återställa ett lösenord).</span><span class="sxs-lookup"><span data-stu-id="3c81a-166">Azure AD B2C interacts with identity providers, users, other systems, and with the local user directory in sequence to achieve an identity task (e.g. login a user, register a new user, reset a password).</span></span> <span data-ttu-id="3c81a-167">Den underliggande plattformen som upprättar flerparti förtroende och utför dessa steg anropas identitet upplevelse Framework och en princip (kallas även för en användare resa eller en förtroendeprincipen framework) definierar aktörer, åtgärder, protokoll, och sekvens med steg för att slutföra.</span><span class="sxs-lookup"><span data-stu-id="3c81a-167">The underlying platform which establishes multi-party trust and executes these steps is called the Identity Experience Framework and a policy (also called an user journey or a Trust framework policy) explicitly defines the actors, the actions, the protocols, and the sequence of steps to complete.</span></span>

### <a name="identity-experience-framework"></a><span data-ttu-id="3c81a-168">Identity Experience Framework</span><span class="sxs-lookup"><span data-stu-id="3c81a-168">Identity Experience Framework</span></span>

<span data-ttu-id="3c81a-169">Ett fullständigt konfigurerbara, principer, molnbaserad Azure-plattformen som samordnar förtroende mellan enheter (brett Anspråksproviders) i standardprotokoll format, till exempel OpenIDConnect, OAuth, SAML, WSFed och några standardmässiga format (t.ex. REST API-baserade system till anspråk utbyte).</span><span class="sxs-lookup"><span data-stu-id="3c81a-169">A fully configurable, policy-driven, cloud-based Azure platform that orchestrates trust between entities (broadly Claims Providers) in standard protocol formats such as OpenIDConnect, OAuth, SAML, WSFed, and a few non-standard ones (e.g. REST API-based system-to-system claims exchanges).</span></span> <span data-ttu-id="3c81a-170">I2E skapar användarvänliga, whitelabelled inträffar som stöd för HTML, CSS och jscript.</span><span class="sxs-lookup"><span data-stu-id="3c81a-170">The I2E creates user-friendly, whitelabelled experiences that support HTML, CSS, and jscript.</span></span>  <span data-ttu-id="3c81a-171">Idag är endast tillgänglig i samband med tjänsten Azure AD B2C och prioriterad för uppgifter som rör CIAM identitet upplevelse ramen.</span><span class="sxs-lookup"><span data-stu-id="3c81a-171">Today, the Identity Experience Framework is available only in the context of the Azure AD B2C service and prioritized for tasks related to CIAM.</span></span>

### <a name="built-in-policies"></a><span data-ttu-id="3c81a-172">Inbyggda principer</span><span class="sxs-lookup"><span data-stu-id="3c81a-172">Built-in policies</span></span>

<span data-ttu-id="3c81a-173">Fördefinierade konfigurationsfiler som direkt beteendet för Azure AD B2C för att utföra uppgifter för de vanligaste identitet (dvs.</span><span class="sxs-lookup"><span data-stu-id="3c81a-173">Predefined configuration files that direct the behavior of Azure AD B2C to perform the most commonly used identity tasks (i.e.</span></span> <span data-ttu-id="3c81a-174">användarregistrering, inloggning, återställning av lösenord) och interagera med betrodda parter vars relation också är fördefinierade i Azure AD B2C (t.ex. Facebook identitetsleverantör, LinkedIn, Account, Google-konton).</span><span class="sxs-lookup"><span data-stu-id="3c81a-174">user registration, signin, password reset) and interact with trusted parties whose relationship is also predefined in Azure AD B2C (e.g. Facebook identity provider, LinkedIn, Microsoft Account, Google accounts).</span></span>  <span data-ttu-id="3c81a-175">I framtiden, kan inbyggda principerna också innehålla för anpassning av identitetsleverantörer som vanligtvis finns i enterprise-sfär som Azure Active Directory Premium, Active Directory/ADFS o.s.v. Salesforce-ID-providern.</span><span class="sxs-lookup"><span data-stu-id="3c81a-175">In the future, built-in policies may also provide for customization of identity providers which are typically in the enterprise realm such as Azure Active Directory Premium, Active Directory/ADFS, Salesforce ID Provider etc.</span></span>


### <a name="custom-policies"></a><span data-ttu-id="3c81a-176">anpassade principer</span><span class="sxs-lookup"><span data-stu-id="3c81a-176">Custom policies</span></span>

<span data-ttu-id="3c81a-177">Konfigurationsfiler som definierar beteendet för identitet upplevelse Framework i din Azure AD B2C-klient.</span><span class="sxs-lookup"><span data-stu-id="3c81a-177">Configuration files that define the behavior of Identity Experience Framework in your Azure AD B2C tenant.</span></span> <span data-ttu-id="3c81a-178">En anpassad princip är tillgänglig som en eller flera XML-filer (se principfiler definitioner) som körs av ramverket identitet upplevelse när den anropades av en förlitande part (t.ex. ett program).</span><span class="sxs-lookup"><span data-stu-id="3c81a-178">A custom policy is accessible as one or several XML files (see Policy Files definitions) which are executed by the Identity Experience Framework when invoked by a relying party (e.g. an application).</span></span> <span data-ttu-id="3c81a-179">Anpassade principer kan direkt redigeras av en identity-utvecklare att slutföra en nära obegränsat antal uppgifter.</span><span class="sxs-lookup"><span data-stu-id="3c81a-179">Custom policies can be directly edited by an identity developer to complete a near unlimited number of tasks.</span></span> <span data-ttu-id="3c81a-180">Utvecklare konfigurera anpassade principer måste definiera betrodda relationer i noggrann detaljer som ska innehålla Metadataslutpunkter, exakt anspråk exchange definitioner och konfigurera hemligheter, nycklar och certifikat som krävs av varje identitetsleverantör.</span><span class="sxs-lookup"><span data-stu-id="3c81a-180">Developers configuring custom policies must define the trusted relationships in careful detail to include metadata endpoints, exact claims exchange definitions, and configure secrets, keys and certificates as needed by each identity provider.</span></span>

## <a name="policy-file-definitions-for-identity-experience-framework-trustframeworks"></a><span data-ttu-id="3c81a-181">Princip för definitioner för identitet upplevelse Framework Trustframeworks</span><span class="sxs-lookup"><span data-stu-id="3c81a-181">Policy File Definitions for Identity Experience Framework Trustframeworks</span></span>

### <a name="policy-files"></a><span data-ttu-id="3c81a-182">Principfiler</span><span class="sxs-lookup"><span data-stu-id="3c81a-182">Policy Files</span></span>

<span data-ttu-id="3c81a-183">En anpassad princip representeras som en eller flera XML-formaterade filer som refererar till varandra i en hierarkisk kedja.</span><span class="sxs-lookup"><span data-stu-id="3c81a-183">A custom policy is represented as one or several XML-formatted files which refer to each other in a hierarchical chain.</span></span> <span data-ttu-id="3c81a-184">XML-element definiera: anspråk schemat anspråk omvandlingar, definitioner av innehåll, anspråk providers-tekniska profiler och Userjourney orchestration-steg, bland annat.</span><span class="sxs-lookup"><span data-stu-id="3c81a-184">The XML elements define: Claims schema, claims transformations, content definitions, claims providers/technical profiles, and Userjourney orchestration steps, among other elements.</span></span>  <span data-ttu-id="3c81a-185">Vi rekommenderar användning av tre typer av principfiler:</span><span class="sxs-lookup"><span data-stu-id="3c81a-185">We recommend the use of three types of policy files:</span></span>

- <span data-ttu-id="3c81a-186">**En grundläggande fil**, som innehåller de flesta av definitionerna och som Azure tillhandahåller ett fullständigt exempel.</span><span class="sxs-lookup"><span data-stu-id="3c81a-186">**A BASE file**, which contains most of the definitions and for which Azure provides a complete sample.</span></span>  <span data-ttu-id="3c81a-187">Vi rekommenderar att du gör ett minsta antal ändringar i den här filen som hjälp med felsökning och lång sikt dina principer</span><span class="sxs-lookup"><span data-stu-id="3c81a-187">We recommend you make a minimum number of changes to this file to help with troubleshooting, and long-term maintenance of your policies</span></span>
- <span data-ttu-id="3c81a-188">**en fil i tillägg** som innehåller unika konfigurationsändringar för din klient</span><span class="sxs-lookup"><span data-stu-id="3c81a-188">**an EXTensions file** that holds the unique configuration changes for your tenant</span></span>
- <span data-ttu-id="3c81a-189">**en förlitande part (RP)-fil** som är den enda uppgift fokuserar fil som anropas direkt av programmet eller tjänsten (även kallat förlitande part).</span><span class="sxs-lookup"><span data-stu-id="3c81a-189">**a Relying Party (RP) file** which is the single task-focused file that is invoked directly by the application or service (aka Relying Party).</span></span>  <span data-ttu-id="3c81a-190">Läs artikeln på principdefinitioner för mer information.</span><span class="sxs-lookup"><span data-stu-id="3c81a-190">Read the article on Policy file definitions for more information.</span></span>  <span data-ttu-id="3c81a-191">Varje unik aktiviteten kräver sin egen RP och beroende på anpassningen krav antalet vara ”Totalt program x Totalt antal användningsområden”.</span><span class="sxs-lookup"><span data-stu-id="3c81a-191">Each unique task requires its own RP and depending on branding requirements the number might be "total of applications x total number of use cases".</span></span>

![Princip för filtyper](media/active-directory-b2c-overview-custom/active-directory-b2c-overview-custom-policy-files.png)

| <span data-ttu-id="3c81a-193">Typ av princip-fil</span><span class="sxs-lookup"><span data-stu-id="3c81a-193">Type of policy file</span></span> | <span data-ttu-id="3c81a-194">Exempel filnamn</span><span class="sxs-lookup"><span data-stu-id="3c81a-194">Examples file name</span></span> | <span data-ttu-id="3c81a-195">Rekommenderad användning</span><span class="sxs-lookup"><span data-stu-id="3c81a-195">Recommended use</span></span> | <span data-ttu-id="3c81a-196">Ärver från</span><span class="sxs-lookup"><span data-stu-id="3c81a-196">Inherits from</span></span> |
|---------------------|--------------------|-----------------|---------------|
| <span data-ttu-id="3c81a-197">BAS</span><span class="sxs-lookup"><span data-stu-id="3c81a-197">BASE</span></span> |<span data-ttu-id="3c81a-198">TrustFrameworkBase.xml</span><span class="sxs-lookup"><span data-stu-id="3c81a-198">TrustFrameworkBase.xml</span></span><br><br><span data-ttu-id="3c81a-199">Mytenant.onmicrosoft.com-B2C-1A_BASE1.xml</span><span class="sxs-lookup"><span data-stu-id="3c81a-199">Mytenant.onmicrosoft.com-B2C-1A_BASE1.xml</span></span> | <span data-ttu-id="3c81a-200">Innehåller grundläggande anspråk schemat, anspråksomvandlingar, Anspråksproviders och användaren resor konfigureras av Microsoft</span><span class="sxs-lookup"><span data-stu-id="3c81a-200">Includes the core claims schema, claims transformations, claims providers, and user journeys configured by Microsoft</span></span><br><br><span data-ttu-id="3c81a-201">Göra minimala ändringar i filen</span><span class="sxs-lookup"><span data-stu-id="3c81a-201">Make minimal changes to this file</span></span> | <span data-ttu-id="3c81a-202">Ingen</span><span class="sxs-lookup"><span data-stu-id="3c81a-202">None</span></span> |
| <span data-ttu-id="3c81a-203">Tillägget (EXT)</span><span class="sxs-lookup"><span data-stu-id="3c81a-203">Extension (EXT)</span></span> | <span data-ttu-id="3c81a-204">TrustFrameworkExtensions.xml</span><span class="sxs-lookup"><span data-stu-id="3c81a-204">TrustFrameworkExtensions.xml</span></span><br><br><span data-ttu-id="3c81a-205">Mytenant.onmicrosoft.com-B2C-1A_EXT.xml</span><span class="sxs-lookup"><span data-stu-id="3c81a-205">Mytenant.onmicrosoft.com-B2C-1A_EXT.xml</span></span> | <span data-ttu-id="3c81a-206">Konsolidera dina ändringar i grundläggande filen</span><span class="sxs-lookup"><span data-stu-id="3c81a-206">Consolidate your changes to the BASE file here</span></span><br><br><span data-ttu-id="3c81a-207">Ändrade Anspråksproviders</span><span class="sxs-lookup"><span data-stu-id="3c81a-207">Modified claims providers</span></span><br><br><span data-ttu-id="3c81a-208">Ändrade användaren resor</span><span class="sxs-lookup"><span data-stu-id="3c81a-208">Modified user journeys</span></span><br><br><span data-ttu-id="3c81a-209">Anpassat schemadefinitionerna</span><span class="sxs-lookup"><span data-stu-id="3c81a-209">Your own custom schema definitions</span></span> | <span data-ttu-id="3c81a-210">BAS-fil</span><span class="sxs-lookup"><span data-stu-id="3c81a-210">BASE file</span></span> |
| <span data-ttu-id="3c81a-211">Förlitande part (RP)</span><span class="sxs-lookup"><span data-stu-id="3c81a-211">Relying Party (RP)</span></span> | <span data-ttu-id="3c81a-212">B2C_1A_sign_up_sign_in.XML</span><span class="sxs-lookup"><span data-stu-id="3c81a-212">B2C_1A_sign_up_sign_in.xml</span></span>| <span data-ttu-id="3c81a-213">Ändra token form och session här</span><span class="sxs-lookup"><span data-stu-id="3c81a-213">Change token shape and session settings here</span></span>| <span data-ttu-id="3c81a-214">Extensions(ext) fil</span><span class="sxs-lookup"><span data-stu-id="3c81a-214">Extensions(EXT) file</span></span> |

### <a name="inheritance-model"></a><span data-ttu-id="3c81a-215">Arv modellen</span><span class="sxs-lookup"><span data-stu-id="3c81a-215">Inheritance model</span></span>

<span data-ttu-id="3c81a-216">När ett program anropar RP principfilen, identitet upplevelse ramverk i B2C lägger till alla element från basen och tillägg, och slutligen från principfilen RP att montera den aktuella principen gäller.</span><span class="sxs-lookup"><span data-stu-id="3c81a-216">When an application calls the RP Policy file, the Identity Experience Framework in B2C will add all the elements from BASE, then from EXTENSIONS, and lastly from the RP policy file to assemble the current policy in effect.</span></span>  <span data-ttu-id="3c81a-217">Element av samma typ och namn i RP-filen åsidosätter de i tillägg och tillägg åsidosätter BASE.</span><span class="sxs-lookup"><span data-stu-id="3c81a-217">Elements of the same type and name in the RP file will override those in the EXTENSIONS, and EXTENSIONS overrides BASE.</span></span>

<span data-ttu-id="3c81a-218">**Principer för inbyggda** i Azure AD B2C följer mönstret för 3-fil som beskrivs ovan, men utvecklaren ser endast förlitande part (RP)-fil, medan portalen gör ändringar i filen EXTenstions i bakgrunden.</span><span class="sxs-lookup"><span data-stu-id="3c81a-218">**Built-in policies** in Azure AD B2C follow the 3-file pattern depicted above, but the developer only sees the Relying Party (RP) file, while the portal makes changes in the background to the EXTenstions file.</span></span>  <span data-ttu-id="3c81a-219">Alla Azure AD B2C delar en grundläggande principfil som kontrolleras i Azure B2C-teamet och uppdateras ofta.</span><span class="sxs-lookup"><span data-stu-id="3c81a-219">All of Azure AD B2C shares a BASE policy file that is under the control of the Azure B2C team and is updated frequently.</span></span>

---
title: "Azure Active Directory B2C: Komma igång med anpassade principer | Microsoft Docs"
description: "Hur tooget igång med Azure Active Directory B2C anpassade principer"
services: active-directory-b2c
documentationcenter: 
author: rojasja
manager: krassk
editor: rojasja
ms.assetid: 658c597e-3787-465e-b377-26aebc94e46d
ms.service: active-directory-b2c
ms.workload: identity
ms.tgt_pltfrm: na
ms.topic: article
ms.devlang: na
ms.date: 08/04/2017
ms.author: joroja;parahk;gsacavdm
ms.openlocfilehash: 5ee133806395cddf18682769a6cad149889d82d1
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: sv-SE
ms.lasthandoff: 10/06/2017
---
# <a name="azure-active-directory-b2c-get-started-with-custom-policies"></a><span data-ttu-id="614da-103">Azure Active Directory B2C: Komma igång med anpassade principer</span><span class="sxs-lookup"><span data-stu-id="614da-103">Azure Active Directory B2C: Get started with custom policies</span></span>

[!INCLUDE [active-directory-b2c-advanced-audience-warning](../../includes/active-directory-b2c-advanced-audience-warning.md)]

<span data-ttu-id="614da-104">När du slutför hello stegen i den här artikeln är en anpassad princip stöder ”lokalt konto” registrering eller inloggning via en e-postadress och lösenord.</span><span class="sxs-lookup"><span data-stu-id="614da-104">After you complete hello steps in this article, your custom policy will support "local account" sign-up or sign-in via an email address and password.</span></span> <span data-ttu-id="614da-105">Du kommer också att förbereda din miljö för att lägga till identitetsleverantörer (till exempel Facebook eller Azure Active Directory).</span><span class="sxs-lookup"><span data-stu-id="614da-105">You will also prepare your environment for adding identity providers (like Facebook or Azure Active Directory).</span></span> <span data-ttu-id="614da-106">Vi rekommenderar att du toocomplete som stegen innan du läsa mer om andra användningsområden för hello Azure Active Directory (AD Azure) B2C identitet upplevelse Framework.</span><span class="sxs-lookup"><span data-stu-id="614da-106">We encourage you toocomplete these steps before reading about other uses of hello Azure Active Directory (Azure AD) B2C Identity Experience Framework.</span></span>

## <a name="prerequisites"></a><span data-ttu-id="614da-107">Krav</span><span class="sxs-lookup"><span data-stu-id="614da-107">Prerequisites</span></span>

<span data-ttu-id="614da-108">Innan du fortsätter bör du kontrollera att du har en Azure AD B2C-klient som är en behållare för alla användare, appar, principer och mer.</span><span class="sxs-lookup"><span data-stu-id="614da-108">Before proceeding, ensure that you have an Azure AD B2C tenant, which is a container for all your users, apps, policies, and more.</span></span> <span data-ttu-id="614da-109">Om du inte har någon redan måste för[skapa en Azure AD B2C-klient](active-directory-b2c-get-started.md).</span><span class="sxs-lookup"><span data-stu-id="614da-109">If you don't have one already, you need too[create an Azure AD B2C tenant](active-directory-b2c-get-started.md).</span></span> <span data-ttu-id="614da-110">Vi rekommenderar att alla utvecklare toocomplete hello Azure AD B2C inbyggd princip genomgång starkt och konfigurera sina program med inbyggt principer innan du fortsätter.</span><span class="sxs-lookup"><span data-stu-id="614da-110">We strongly encourage all developers toocomplete hello Azure AD B2C built-in policy walkthroughs and configure their applications with built-in policies before proceeding.</span></span> <span data-ttu-id="614da-111">Dina program fungerar med båda typer av principer när du har en mindre ändring toohello princip namn tooinvoke hello anpassad princip.</span><span class="sxs-lookup"><span data-stu-id="614da-111">Your applications will work with both types of policies once you make a minor change toohello policy name tooinvoke hello custom policy.</span></span>

>[!NOTE]
><span data-ttu-id="614da-112">tooaccess anpassad princip för redigering, behöver du en giltig Azure-prenumeration länkade tooyour klient.</span><span class="sxs-lookup"><span data-stu-id="614da-112">tooaccess custom policy editing, you need a valid Azure subscription linked tooyour tenant.</span></span> <span data-ttu-id="614da-113">Om du inte gjort [länkade Azure-prenumeration för tooan din Azure AD B2C-klient](active-directory-b2c-how-to-enable-billing.md) eller Azure-prenumerationen är inaktiverad, hello identitet upplevelse Framework knappen inte tillgänglig.</span><span class="sxs-lookup"><span data-stu-id="614da-113">If you haven't [linked your Azure AD B2C tenant tooan Azure subscription](active-directory-b2c-how-to-enable-billing.md) or your Azure subscription is disabled, hello Identity Experience Framework button won't be available.</span></span>

## <a name="add-signing-and-encryption-keys-tooyour-b2c-tenant-for-use-by-custom-policies"></a><span data-ttu-id="614da-114">Lägg till signering och kryptering nycklar tooyour B2C-klient för användning av anpassade principer</span><span class="sxs-lookup"><span data-stu-id="614da-114">Add signing and encryption keys tooyour B2C tenant for use by custom policies</span></span>

1. <span data-ttu-id="614da-115">Öppna hello **identitet upplevelse Framework** bladet i inställningarna för Azure AD B2C-klient.</span><span class="sxs-lookup"><span data-stu-id="614da-115">Open hello **Identity Experience Framework** blade in your Azure AD B2C tenant settings.</span></span>
2. <span data-ttu-id="614da-116">Välj **princip nycklar** tooview hello-nycklar som är tillgängliga i din klient.</span><span class="sxs-lookup"><span data-stu-id="614da-116">Select **Policy Keys** tooview hello keys available in your tenant.</span></span>
3. <span data-ttu-id="614da-117">Skapa B2C_1A_TokenSigningKeyContainer om det inte finns:</span><span class="sxs-lookup"><span data-stu-id="614da-117">Create B2C_1A_TokenSigningKeyContainer if it does not exist:</span></span><br>
    <span data-ttu-id="614da-118">a.</span><span class="sxs-lookup"><span data-stu-id="614da-118">a.</span></span> <span data-ttu-id="614da-119">Välj **Lägg till**.</span><span class="sxs-lookup"><span data-stu-id="614da-119">Select **Add**.</span></span> <br>
    <span data-ttu-id="614da-120">b.</span><span class="sxs-lookup"><span data-stu-id="614da-120">b.</span></span> <span data-ttu-id="614da-121">Välj **generera**.</span><span class="sxs-lookup"><span data-stu-id="614da-121">Select **Generate**.</span></span><br>
    <span data-ttu-id="614da-122">c.</span><span class="sxs-lookup"><span data-stu-id="614da-122">c.</span></span> <span data-ttu-id="614da-123">För **namn**, Använd `TokenSigningKeyContainer`.</span><span class="sxs-lookup"><span data-stu-id="614da-123">For **Name**, use `TokenSigningKeyContainer`.</span></span> <br> 
    <span data-ttu-id="614da-124">hello prefixet `B2C_1A_` kan läggas till automatiskt.</span><span class="sxs-lookup"><span data-stu-id="614da-124">hello prefix `B2C_1A_` might be added automatically.</span></span><br>
    <span data-ttu-id="614da-125">d.</span><span class="sxs-lookup"><span data-stu-id="614da-125">d.</span></span> <span data-ttu-id="614da-126">För **nyckeltyp**, använda **RSA**.</span><span class="sxs-lookup"><span data-stu-id="614da-126">For **Key type**, use **RSA**.</span></span><br>
    <span data-ttu-id="614da-127">e.</span><span class="sxs-lookup"><span data-stu-id="614da-127">e.</span></span> <span data-ttu-id="614da-128">För **datum**, Använd hello standardvärden.</span><span class="sxs-lookup"><span data-stu-id="614da-128">For **Dates**, use hello defaults.</span></span> <br>
    <span data-ttu-id="614da-129">f.</span><span class="sxs-lookup"><span data-stu-id="614da-129">f.</span></span> <span data-ttu-id="614da-130">För **nyckelanvändning**, använda **signatur**.</span><span class="sxs-lookup"><span data-stu-id="614da-130">For **Key usage**, use **Signature**.</span></span><br>
    <span data-ttu-id="614da-131">g.</span><span class="sxs-lookup"><span data-stu-id="614da-131">g.</span></span> <span data-ttu-id="614da-132">Välj **Skapa**.</span><span class="sxs-lookup"><span data-stu-id="614da-132">Select **Create**.</span></span><br>
4. <span data-ttu-id="614da-133">Skapa B2C_1A_TokenEncryptionKeyContainer om det inte finns:</span><span class="sxs-lookup"><span data-stu-id="614da-133">Create B2C_1A_TokenEncryptionKeyContainer if it does not exist:</span></span><br>
 <span data-ttu-id="614da-134">a.</span><span class="sxs-lookup"><span data-stu-id="614da-134">a.</span></span> <span data-ttu-id="614da-135">Välj **Lägg till**.</span><span class="sxs-lookup"><span data-stu-id="614da-135">Select **Add**.</span></span><br>
 <span data-ttu-id="614da-136">b.</span><span class="sxs-lookup"><span data-stu-id="614da-136">b.</span></span> <span data-ttu-id="614da-137">Välj **generera**.</span><span class="sxs-lookup"><span data-stu-id="614da-137">Select **Generate**.</span></span><br>
 <span data-ttu-id="614da-138">c.</span><span class="sxs-lookup"><span data-stu-id="614da-138">c.</span></span> <span data-ttu-id="614da-139">För **namn**, Använd `TokenEncryptionKeyContainer`.</span><span class="sxs-lookup"><span data-stu-id="614da-139">For **Name**, use `TokenEncryptionKeyContainer`.</span></span> <br>
   <span data-ttu-id="614da-140">hello prefixet `B2C_1A`_ kan läggas till automatiskt.</span><span class="sxs-lookup"><span data-stu-id="614da-140">hello prefix `B2C_1A`_ might be added automatically.</span></span><br>
 <span data-ttu-id="614da-141">d.</span><span class="sxs-lookup"><span data-stu-id="614da-141">d.</span></span> <span data-ttu-id="614da-142">För **nyckeltyp**, använda **RSA**.</span><span class="sxs-lookup"><span data-stu-id="614da-142">For **Key type**, use **RSA**.</span></span><br>
 <span data-ttu-id="614da-143">e.</span><span class="sxs-lookup"><span data-stu-id="614da-143">e.</span></span> <span data-ttu-id="614da-144">För **datum**, Använd hello standardvärden.</span><span class="sxs-lookup"><span data-stu-id="614da-144">For **Dates**, use hello defaults.</span></span><br>
 <span data-ttu-id="614da-145">f.</span><span class="sxs-lookup"><span data-stu-id="614da-145">f.</span></span> <span data-ttu-id="614da-146">För **nyckelanvändning**, använda **kryptering**.</span><span class="sxs-lookup"><span data-stu-id="614da-146">For **Key usage**, use **Encryption**.</span></span><br>
 <span data-ttu-id="614da-147">g.</span><span class="sxs-lookup"><span data-stu-id="614da-147">g.</span></span> <span data-ttu-id="614da-148">Välj **Skapa**.</span><span class="sxs-lookup"><span data-stu-id="614da-148">Select **Create**.</span></span><br>
5. <span data-ttu-id="614da-149">Skapa B2C_1A_FacebookSecret.</span><span class="sxs-lookup"><span data-stu-id="614da-149">Create B2C_1A_FacebookSecret.</span></span> <br>
<span data-ttu-id="614da-150">Om du redan har en hemlighet för Facebook-programmet kan du lägga till den som en princip för viktiga tooyour klient.</span><span class="sxs-lookup"><span data-stu-id="614da-150">If you already have a Facebook application secret, add it as a policy key tooyour tenant.</span></span> <span data-ttu-id="614da-151">I annat fall måste du skapa hello nyckel med en platshållare värdet så att dina principer valideras.</span><span class="sxs-lookup"><span data-stu-id="614da-151">Otherwise, you must create hello key with a placeholder value so that your policies pass validation.</span></span><br>
 <span data-ttu-id="614da-152">a.</span><span class="sxs-lookup"><span data-stu-id="614da-152">a.</span></span> <span data-ttu-id="614da-153">Välj **Lägg till**.</span><span class="sxs-lookup"><span data-stu-id="614da-153">Select **Add**.</span></span><br>
 <span data-ttu-id="614da-154">b.</span><span class="sxs-lookup"><span data-stu-id="614da-154">b.</span></span> <span data-ttu-id="614da-155">För **alternativ**, använda **manuell**.</span><span class="sxs-lookup"><span data-stu-id="614da-155">For **Options**, use **Manual**.</span></span><br>
 <span data-ttu-id="614da-156">c.</span><span class="sxs-lookup"><span data-stu-id="614da-156">c.</span></span> <span data-ttu-id="614da-157">För **namn**, Använd `FacebookSecret`.</span><span class="sxs-lookup"><span data-stu-id="614da-157">For **Name**, use `FacebookSecret`.</span></span> <br>
 <span data-ttu-id="614da-158">hello prefixet `B2C_1A_` kan läggas till automatiskt.</span><span class="sxs-lookup"><span data-stu-id="614da-158">hello prefix `B2C_1A_` might be added automatically.</span></span><br>
 <span data-ttu-id="614da-159">d.</span><span class="sxs-lookup"><span data-stu-id="614da-159">d.</span></span> <span data-ttu-id="614da-160">I hello **hemlighet** ange din FacebookSecret från developers.facebook.com eller `0` som platshållare.</span><span class="sxs-lookup"><span data-stu-id="614da-160">In hello **Secret** box, enter your FacebookSecret from developers.facebook.com or `0` as a placeholder.</span></span> <span data-ttu-id="614da-161">*Detta är inte din Facebook app-ID.*</span><span class="sxs-lookup"><span data-stu-id="614da-161">*This is not your Facebook app ID.*</span></span> <br>
 <span data-ttu-id="614da-162">e.</span><span class="sxs-lookup"><span data-stu-id="614da-162">e.</span></span> <span data-ttu-id="614da-163">För **nyckelanvändning**, använda **signatur**.</span><span class="sxs-lookup"><span data-stu-id="614da-163">For **Key usage**, use **Signature**.</span></span> <br>
 <span data-ttu-id="614da-164">f.</span><span class="sxs-lookup"><span data-stu-id="614da-164">f.</span></span> <span data-ttu-id="614da-165">Välj **skapa** och bekräfta skapas.</span><span class="sxs-lookup"><span data-stu-id="614da-165">Select **Create** and confirm creation.</span></span>

## <a name="register-identity-experience-framework-applications"></a><span data-ttu-id="614da-166">Registrera identiteten upplevelse Framework-program</span><span class="sxs-lookup"><span data-stu-id="614da-166">Register Identity Experience Framework applications</span></span>

<span data-ttu-id="614da-167">Azure AD B2C kräver tooregister två extra program som används av hello motorn toosign in och logga in användare.</span><span class="sxs-lookup"><span data-stu-id="614da-167">Azure AD B2C requires you tooregister two extra applications that are used by hello engine toosign up and sign in users.</span></span>

>[!NOTE]
><span data-ttu-id="614da-168">Du måste skapa två program för att aktivera inloggning med lokala konton: IdentityExperienceFramework (webbprogram) och ProxyIdentityExperienceFramework (en intern app) med delegerad behörighet från hello IdentityExperienceFramework app.</span><span class="sxs-lookup"><span data-stu-id="614da-168">You must create two applications that enable sign-in using local accounts: IdentityExperienceFramework (a web app) and ProxyIdentityExperienceFramework (a native app) with delegated permission from hello IdentityExperienceFramework app.</span></span> <span data-ttu-id="614da-169">Lokala konton finns bara i din klient.</span><span class="sxs-lookup"><span data-stu-id="614da-169">Local accounts exist only in your tenant.</span></span> <span data-ttu-id="614da-170">Användarna logga med en unik e-postadress och lösenord kombination tooaccess dina klient-registrerade program.</span><span class="sxs-lookup"><span data-stu-id="614da-170">Your users sign up with a unique email address/password combination tooaccess your tenant-registered applications.</span></span>

### <a name="create-hello-identityexperienceframework-application"></a><span data-ttu-id="614da-171">Skapa hello IdentityExperienceFramework program</span><span class="sxs-lookup"><span data-stu-id="614da-171">Create hello IdentityExperienceFramework application</span></span>

1. <span data-ttu-id="614da-172">I hello [Azure-portalen](https://portal.azure.com), växla till hello [kontext för din Azure AD B2C-klient](active-directory-b2c-navigate-to-b2c-context.md).</span><span class="sxs-lookup"><span data-stu-id="614da-172">In hello [Azure portal](https://portal.azure.com), switch into hello [context of your Azure AD B2C tenant](active-directory-b2c-navigate-to-b2c-context.md).</span></span>
2. <span data-ttu-id="614da-173">Öppna hello **Azure Active Directory** bladet (inte hello **Azure AD B2C** bladet).</span><span class="sxs-lookup"><span data-stu-id="614da-173">Open hello **Azure Active Directory** blade (not hello **Azure AD B2C** blade).</span></span> <span data-ttu-id="614da-174">Du kan behöva tooselect **fler tjänster** toofind den.</span><span class="sxs-lookup"><span data-stu-id="614da-174">You might need tooselect **More Services** toofind it.</span></span>
3. <span data-ttu-id="614da-175">Välj **App registreringar**.</span><span class="sxs-lookup"><span data-stu-id="614da-175">Select **App registrations**.</span></span>
4. <span data-ttu-id="614da-176">Välj **nya appregistrering**.</span><span class="sxs-lookup"><span data-stu-id="614da-176">Select **New application registration**.</span></span>
   * <span data-ttu-id="614da-177">För **namn**, Använd `IdentityExperienceFramework`.</span><span class="sxs-lookup"><span data-stu-id="614da-177">For **Name**, use `IdentityExperienceFramework`.</span></span>
   * <span data-ttu-id="614da-178">För **programtyp**, använda **webb-app/API**.</span><span class="sxs-lookup"><span data-stu-id="614da-178">For **Application type**, use **Web app/API**.</span></span>
   * <span data-ttu-id="614da-179">För **inloggnings-URL**, använda `https://login.microsoftonline.com/yourtenant.onmicrosoft.com`, där `yourtenant` är ditt domännamn i Azure AD B2C-klient.</span><span class="sxs-lookup"><span data-stu-id="614da-179">For **Sign-on URL**, use `https://login.microsoftonline.com/yourtenant.onmicrosoft.com`, where `yourtenant` is your Azure AD B2C tenant domain name.</span></span>
5. <span data-ttu-id="614da-180">Välj **Skapa**.</span><span class="sxs-lookup"><span data-stu-id="614da-180">Select **Create**.</span></span>
6. <span data-ttu-id="614da-181">När den har skapats, Välj hello nyskapad program **IdentityExperienceFramework**.</span><span class="sxs-lookup"><span data-stu-id="614da-181">Once it is created, select hello newly created application **IdentityExperienceFramework**.</span></span><br>
   * <span data-ttu-id="614da-182">Välj **egenskaper**.</span><span class="sxs-lookup"><span data-stu-id="614da-182">Select **Properties**.</span></span><br>
   * <span data-ttu-id="614da-183">Kopiera hello program-ID och spara den för senare.</span><span class="sxs-lookup"><span data-stu-id="614da-183">Copy hello application ID and save it for later.</span></span>

### <a name="create-hello-proxyidentityexperienceframework-application"></a><span data-ttu-id="614da-184">Skapa hello ProxyIdentityExperienceFramework program</span><span class="sxs-lookup"><span data-stu-id="614da-184">Create hello ProxyIdentityExperienceFramework application</span></span>

1. <span data-ttu-id="614da-185">Välj **App registreringar**.</span><span class="sxs-lookup"><span data-stu-id="614da-185">Select **App registrations**.</span></span>
1. <span data-ttu-id="614da-186">Välj **nya appregistrering**.</span><span class="sxs-lookup"><span data-stu-id="614da-186">Select **New application registration**.</span></span>
   * <span data-ttu-id="614da-187">För **namn**, Använd `ProxyIdentityExperienceFramework`.</span><span class="sxs-lookup"><span data-stu-id="614da-187">For **Name**, use `ProxyIdentityExperienceFramework`.</span></span>
   * <span data-ttu-id="614da-188">För **programtyp**, använda **interna**.</span><span class="sxs-lookup"><span data-stu-id="614da-188">For **Application type**, use **Native**.</span></span>
   * <span data-ttu-id="614da-189">För **omdirigerings-URI**, använda `https://login.microsoftonline.com/yourtenant.onmicrosoft.com`, där `yourtenant` är Azure AD B2C-klient.</span><span class="sxs-lookup"><span data-stu-id="614da-189">For **Redirect URI**, use `https://login.microsoftonline.com/yourtenant.onmicrosoft.com`, where `yourtenant` is your Azure AD B2C tenant.</span></span>
1. <span data-ttu-id="614da-190">Välj **Skapa**.</span><span class="sxs-lookup"><span data-stu-id="614da-190">Select **Create**.</span></span>
1. <span data-ttu-id="614da-191">När den har skapats, Välj hello program **ProxyIdentityExperienceFramework**.</span><span class="sxs-lookup"><span data-stu-id="614da-191">Once it has been created, select hello application **ProxyIdentityExperienceFramework**.</span></span><br>
   * <span data-ttu-id="614da-192">Välj **egenskaper**.</span><span class="sxs-lookup"><span data-stu-id="614da-192">Select **Properties**.</span></span> <br>
   * <span data-ttu-id="614da-193">Kopiera hello program-ID och spara den för senare.</span><span class="sxs-lookup"><span data-stu-id="614da-193">Copy hello application ID and save it for later.</span></span>
1. <span data-ttu-id="614da-194">Välj **nödvändiga behörigheter**.</span><span class="sxs-lookup"><span data-stu-id="614da-194">Select **Required permissions**.</span></span>
1. <span data-ttu-id="614da-195">Välj **Lägg till**.</span><span class="sxs-lookup"><span data-stu-id="614da-195">Select **Add**.</span></span>
1. <span data-ttu-id="614da-196">Välj **väljer en API**.</span><span class="sxs-lookup"><span data-stu-id="614da-196">Select **Select an API**.</span></span>
1. <span data-ttu-id="614da-197">Sök efter hello namn IdentityExperienceFramework.</span><span class="sxs-lookup"><span data-stu-id="614da-197">Search for hello name IdentityExperienceFramework.</span></span> <span data-ttu-id="614da-198">Välj **IdentityExperienceFramework** i hello resultaten och klickar sedan på **Välj**.</span><span class="sxs-lookup"><span data-stu-id="614da-198">Select **IdentityExperienceFramework** in hello results, and then click **Select**.</span></span>
1. <span data-ttu-id="614da-199">Markera kryssrutan om hello bredvid för**åtkomst IdentityExperienceFramework**, och klicka sedan på **Välj**.</span><span class="sxs-lookup"><span data-stu-id="614da-199">Select hello check box next too**Access IdentityExperienceFramework**, and then click **Select**.</span></span>
1. <span data-ttu-id="614da-200">Välj **klar**.</span><span class="sxs-lookup"><span data-stu-id="614da-200">Select **Done**.</span></span>
1. <span data-ttu-id="614da-201">Välj **bevilja med**, och sedan bekräfta genom att välja **Ja**.</span><span class="sxs-lookup"><span data-stu-id="614da-201">Select **Grant Permissions**, and then confirm by selecting **Yes**.</span></span>

## <a name="download-starter-pack-and-modify-policies"></a><span data-ttu-id="614da-202">Hämta startpaket och ändra principer</span><span class="sxs-lookup"><span data-stu-id="614da-202">Download starter pack and modify policies</span></span>

<span data-ttu-id="614da-203">Anpassade principer är en uppsättning XML-filer som måste överföras toobe tooyour Azure AD B2C-klient.</span><span class="sxs-lookup"><span data-stu-id="614da-203">Custom policies are a set of XML files that need toobe uploaded tooyour Azure AD B2C tenant.</span></span> <span data-ttu-id="614da-204">Vi tillhandahåller starter packs tooget du igång snabbare.</span><span class="sxs-lookup"><span data-stu-id="614da-204">We provide starter packs tooget you going quickly.</span></span> <span data-ttu-id="614da-205">Varje startpaket i hello följande lista innehåller hello minsta antal tekniska profiler och användaren resor behövs tooachieve hello scenarier beskrivs:</span><span class="sxs-lookup"><span data-stu-id="614da-205">Each starter pack in hello following list contains hello smallest number of technical profiles and user journeys needed tooachieve hello scenarios described:</span></span>
 * <span data-ttu-id="614da-206">LocalAccounts.</span><span class="sxs-lookup"><span data-stu-id="614da-206">LocalAccounts.</span></span> <span data-ttu-id="614da-207">Använda hello lokala konton.</span><span class="sxs-lookup"><span data-stu-id="614da-207">Enables hello use of local accounts only.</span></span>
 * <span data-ttu-id="614da-208">SocialAccounts.</span><span class="sxs-lookup"><span data-stu-id="614da-208">SocialAccounts.</span></span> <span data-ttu-id="614da-209">Använda hello (eller externa) sociala konton.</span><span class="sxs-lookup"><span data-stu-id="614da-209">Enables hello use of social (or federated) accounts only.</span></span>
 * <span data-ttu-id="614da-210">**SocialAndLocalAccounts**.</span><span class="sxs-lookup"><span data-stu-id="614da-210">**SocialAndLocalAccounts**.</span></span> <span data-ttu-id="614da-211">Vi använder den här filen hello genomgång.</span><span class="sxs-lookup"><span data-stu-id="614da-211">We use this file for hello walkthrough.</span></span>
 * <span data-ttu-id="614da-212">SocialAndLocalAccountsWithMFA.</span><span class="sxs-lookup"><span data-stu-id="614da-212">SocialAndLocalAccountsWithMFA.</span></span> <span data-ttu-id="614da-213">Alternativ för social, lokal och Multifaktorautentisering ingår.</span><span class="sxs-lookup"><span data-stu-id="614da-213">Social, local, and Multi-Factor Authentication options are included here.</span></span>

<span data-ttu-id="614da-214">Varje startpaket innehåller:</span><span class="sxs-lookup"><span data-stu-id="614da-214">Each starter pack contains:</span></span>

* <span data-ttu-id="614da-215">Hej [grundläggande filen](active-directory-b2c-overview-custom.md#policy-files) av hello princip.</span><span class="sxs-lookup"><span data-stu-id="614da-215">hello [base file](active-directory-b2c-overview-custom.md#policy-files) of hello policy.</span></span> <span data-ttu-id="614da-216">Några ändringar är nödvändiga toohello bas.</span><span class="sxs-lookup"><span data-stu-id="614da-216">Few modifications are required toohello base.</span></span>
* <span data-ttu-id="614da-217">Hej [tilläggsfilen](active-directory-b2c-overview-custom.md#policy-files) av hello princip.</span><span class="sxs-lookup"><span data-stu-id="614da-217">hello [extension file](active-directory-b2c-overview-custom.md#policy-files) of hello policy.</span></span>  <span data-ttu-id="614da-218">Den här filen är där de flesta konfigurationsändringar görs.</span><span class="sxs-lookup"><span data-stu-id="614da-218">This file is where most configuration changes are made.</span></span>
* <span data-ttu-id="614da-219">[Förlitande part filer](active-directory-b2c-overview-custom.md#policy-files) uppgiftsspecifika filer som anropas av ditt program.</span><span class="sxs-lookup"><span data-stu-id="614da-219">[Relying party files](active-directory-b2c-overview-custom.md#policy-files) are task-specific files called by your application.</span></span>

>[!NOTE]
><span data-ttu-id="614da-220">Om valideringen har stöd för XML-redigerare, validera hello filer mot hello TrustFrameworkPolicy_0.3.0.0.xsd XML-schema som finns i hello startpaket hello rotkatalog.</span><span class="sxs-lookup"><span data-stu-id="614da-220">If your XML editor supports validation, validate hello files against hello TrustFrameworkPolicy_0.3.0.0.xsd XML schema that is located in hello root directory of hello starter pack.</span></span> <span data-ttu-id="614da-221">XML-schemavalideringen identifierar fel innan du laddar upp.</span><span class="sxs-lookup"><span data-stu-id="614da-221">XML schema validation identifies errors before uploading.</span></span>

 <span data-ttu-id="614da-222">Nu sätter vi igång:</span><span class="sxs-lookup"><span data-stu-id="614da-222">Let's get started:</span></span>

1. <span data-ttu-id="614da-223">Hämta active-directory-b2c-custom-policy-starterpack från GitHub.</span><span class="sxs-lookup"><span data-stu-id="614da-223">Download active-directory-b2c-custom-policy-starterpack from GitHub.</span></span> <span data-ttu-id="614da-224">[Hämta hello ZIP-filen](https://github.com/Azure-Samples/active-directory-b2c-custom-policy-starterpack/archive/master.zip) eller köra</span><span class="sxs-lookup"><span data-stu-id="614da-224">[Download hello .zip file](https://github.com/Azure-Samples/active-directory-b2c-custom-policy-starterpack/archive/master.zip) or run</span></span>

    ```console
    git clone https://github.com/Azure-Samples/active-directory-b2c-custom-policy-starterpack
    ```
2. <span data-ttu-id="614da-225">Öppna hello SocialAndLocalAccounts mapp.</span><span class="sxs-lookup"><span data-stu-id="614da-225">Open hello SocialAndLocalAccounts folder.</span></span>  <span data-ttu-id="614da-226">Det grundläggande hello-fil (TrustFrameworkBase.xml) i den här mappen innehåller innehåll som behövs för både lokala och social företagets konton.</span><span class="sxs-lookup"><span data-stu-id="614da-226">hello base file (TrustFrameworkBase.xml) in this folder contains content needed for both local and social/corporate accounts.</span></span> <span data-ttu-id="614da-227">hello sociala innehåll stör inte hello steg för att komma lokala konton och körs.</span><span class="sxs-lookup"><span data-stu-id="614da-227">hello social content does not interfere with hello steps for getting local accounts up and running.</span></span>
3. <span data-ttu-id="614da-228">Öppna TrustFrameworkBase.xml.</span><span class="sxs-lookup"><span data-stu-id="614da-228">Open TrustFrameworkBase.xml.</span></span> <span data-ttu-id="614da-229">Om du behöver en XML-redigerare [försök Visual Studio Code](https://code.visualstudio.com/download), en enkel plattformsoberoende redigerare.</span><span class="sxs-lookup"><span data-stu-id="614da-229">If you need an XML editor, [try Visual Studio Code](https://code.visualstudio.com/download), a lightweight cross-platform editor.</span></span>
4. <span data-ttu-id="614da-230">I hello rot `TrustFrameworkPolicy` element-, update hello `TenantId` och `PublicPolicyUri` attribut, ersätter `yourtenant.onmicrosoft.com` med hello domännamn för din Azure AD B2C-klient:</span><span class="sxs-lookup"><span data-stu-id="614da-230">In hello root `TrustFrameworkPolicy` element, update hello `TenantId` and `PublicPolicyUri` attributes, replacing `yourtenant.onmicrosoft.com` with hello domain name of your Azure AD B2C tenant:</span></span>
   ```xml
    <TrustFrameworkPolicy
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:xsd="http://www.w3.org/2001/XMLSchema"
    xmlns="http://schemas.microsoft.com/online/cpim/schemas/2013/06"
    PolicySchemaVersion="0.3.0.0"
    TenantId="yourtenant.onmicrosoft.com"
    PolicyId="B2C_1A_TrustFrameworkBase"
    PublicPolicyUri="http://yourtenant.onmicrosoft.com">
    ```
   >[!NOTE]
   ><span data-ttu-id="614da-231">`PolicyId`är hello princip som du ser i hello portal och hello namn som den här principfilen refererar till andra principfiler.</span><span class="sxs-lookup"><span data-stu-id="614da-231">`PolicyId` is hello policy name that you see in hello portal and hello name by which this policy file is referenced by other policy files.</span></span>

5. <span data-ttu-id="614da-232">Spara hello-filen.</span><span class="sxs-lookup"><span data-stu-id="614da-232">Save hello file.</span></span>
6. <span data-ttu-id="614da-233">Öppna TrustFrameworkExtensions.xml.</span><span class="sxs-lookup"><span data-stu-id="614da-233">Open TrustFrameworkExtensions.xml.</span></span> <span data-ttu-id="614da-234">Ändra hello samma två genom att ersätta `yourtenant.onmicrosoft.com` med din Azure AD B2C-klient.</span><span class="sxs-lookup"><span data-stu-id="614da-234">Make hello same two changes by replacing `yourtenant.onmicrosoft.com` with your Azure AD B2C tenant.</span></span> <span data-ttu-id="614da-235">Se hello samma ersättning i hello `<TenantId>` element för totalt tre ändringar.</span><span class="sxs-lookup"><span data-stu-id="614da-235">Make hello same replacement in hello `<TenantId>` element for a total of three changes.</span></span> <span data-ttu-id="614da-236">Spara hello-filen.</span><span class="sxs-lookup"><span data-stu-id="614da-236">Save hello file.</span></span>
7. <span data-ttu-id="614da-237">Öppna SignUpOrSignIn.xml.</span><span class="sxs-lookup"><span data-stu-id="614da-237">Open SignUpOrSignIn.xml.</span></span> <span data-ttu-id="614da-238">Ändra hello samma genom att ersätta `yourtenant.onmicrosoft.com` med din Azure AD B2C-klient på tre platser.</span><span class="sxs-lookup"><span data-stu-id="614da-238">Make hello same changes by replacing `yourtenant.onmicrosoft.com` with your Azure AD B2C tenant in three places.</span></span> <span data-ttu-id="614da-239">Spara hello-filen.</span><span class="sxs-lookup"><span data-stu-id="614da-239">Save hello file.</span></span>
8. <span data-ttu-id="614da-240">Öppna hello lösenordsåterställning och profilen redigera filer.</span><span class="sxs-lookup"><span data-stu-id="614da-240">Open hello password reset and profile edit files.</span></span> <span data-ttu-id="614da-241">Ändra hello samma genom att ersätta `yourtenant.onmicrosoft.com` med din Azure AD B2C-klient på tre platser i varje fil.</span><span class="sxs-lookup"><span data-stu-id="614da-241">Make hello same changes by replacing `yourtenant.onmicrosoft.com` with your Azure AD B2C tenant in three places in each file.</span></span> <span data-ttu-id="614da-242">Spara hello-filer.</span><span class="sxs-lookup"><span data-stu-id="614da-242">Save hello files.</span></span>

### <a name="add-hello-application-ids-tooyour-custom-policy"></a><span data-ttu-id="614da-243">Lägg till anpassad princip för tooyour hello program-ID: N</span><span class="sxs-lookup"><span data-stu-id="614da-243">Add hello application IDs tooyour custom policy</span></span>
<span data-ttu-id="614da-244">Lägg till filen med tillägg hello program-ID: N toohello (`TrustFrameworkExtensions.xml`):</span><span class="sxs-lookup"><span data-stu-id="614da-244">Add hello application IDs toohello extensions file (`TrustFrameworkExtensions.xml`):</span></span>

1. <span data-ttu-id="614da-245">Hitta hello element i hello-tillägg-filen (TrustFrameworkExtensions.xml) `<TechnicalProfile Id="login-NonInteractive">`.</span><span class="sxs-lookup"><span data-stu-id="614da-245">In hello extensions file (TrustFrameworkExtensions.xml), find hello element `<TechnicalProfile Id="login-NonInteractive">`.</span></span>
2. <span data-ttu-id="614da-246">Ersätt båda förekomster av `IdentityExperienceFrameworkAppId` med hello program-ID för hello identitet upplevelse Framework-program som du skapade tidigare.</span><span class="sxs-lookup"><span data-stu-id="614da-246">Replace both instances of `IdentityExperienceFrameworkAppId` with hello application ID of hello Identity Experience Framework application that you created earlier.</span></span> <span data-ttu-id="614da-247">Här är ett exempel:</span><span class="sxs-lookup"><span data-stu-id="614da-247">Here is an example:</span></span>

   ```xml
   <Item Key="client_id">8322dedc-cbf4-43bc-8bb6-141d16f0f489</Item>
   ```
3. <span data-ttu-id="614da-248">Ersätt båda förekomster av `ProxyIdentityExperienceFrameworkAppId` med hello program-ID för hello Proxy identitet upplevelse Framework-program som du skapade tidigare.</span><span class="sxs-lookup"><span data-stu-id="614da-248">Replace both instances of `ProxyIdentityExperienceFrameworkAppId` with hello application ID of hello Proxy Identity Experience Framework application that you created earlier.</span></span>
4. <span data-ttu-id="614da-249">Spara tilläggsfilen.</span><span class="sxs-lookup"><span data-stu-id="614da-249">Save your extensions file.</span></span>

## <a name="upload-hello-policies-tooyour-tenant"></a><span data-ttu-id="614da-250">Överför hello principer tooyour klient</span><span class="sxs-lookup"><span data-stu-id="614da-250">Upload hello policies tooyour tenant</span></span>

1. <span data-ttu-id="614da-251">I hello [Azure-portalen](https://portal.azure.com), växla till hello [kontext för din Azure AD B2C-klient](active-directory-b2c-navigate-to-b2c-context.md), och öppna hello **Azure AD B2C** bladet.</span><span class="sxs-lookup"><span data-stu-id="614da-251">In hello [Azure portal](https://portal.azure.com), switch into hello [context of your Azure AD B2C tenant](active-directory-b2c-navigate-to-b2c-context.md), and open hello **Azure AD B2C** blade.</span></span>
2. <span data-ttu-id="614da-252">Välj **identitet upplevelse Framework**.</span><span class="sxs-lookup"><span data-stu-id="614da-252">Select **Identity Experience Framework**.</span></span>
3. <span data-ttu-id="614da-253">Välj **överföra princip**.</span><span class="sxs-lookup"><span data-stu-id="614da-253">Select **Upload Policy**.</span></span>

    >[!WARNING]
    ><span data-ttu-id="614da-254">hello anpassad principfiler måste överföras i hello följande ordning:</span><span class="sxs-lookup"><span data-stu-id="614da-254">hello custom policy files must be uploaded in hello following order:</span></span>

1. <span data-ttu-id="614da-255">Överför TrustFrameworkBase.xml.</span><span class="sxs-lookup"><span data-stu-id="614da-255">Upload TrustFrameworkBase.xml.</span></span>
2. <span data-ttu-id="614da-256">Överför TrustFrameworkExtensions.xml.</span><span class="sxs-lookup"><span data-stu-id="614da-256">Upload TrustFrameworkExtensions.xml.</span></span>
3. <span data-ttu-id="614da-257">Överför SignUpOrSignin.xml.</span><span class="sxs-lookup"><span data-stu-id="614da-257">Upload SignUpOrSignin.xml.</span></span>
4. <span data-ttu-id="614da-258">Ladda upp dina övriga principfiler.</span><span class="sxs-lookup"><span data-stu-id="614da-258">Upload your other policy files.</span></span>

<span data-ttu-id="614da-259">När en fil har överförts hello namnet på hello principfil inledd med `B2C_1A_`.</span><span class="sxs-lookup"><span data-stu-id="614da-259">When a file is uploaded, hello name of hello policy file is prepended with `B2C_1A_`.</span></span>

## <a name="test-hello-custom-policy-by-using-run-now"></a><span data-ttu-id="614da-260">Testa hello anpassad princip med Kör nu</span><span class="sxs-lookup"><span data-stu-id="614da-260">Test hello custom policy by using Run Now</span></span>

1. <span data-ttu-id="614da-261">Öppna **Azure AD B2C inställningar** och gå för**identitet upplevelse Framework**.</span><span class="sxs-lookup"><span data-stu-id="614da-261">Open **Azure AD B2C Settings** and go too**Identity Experience Framework**.</span></span>

   >[!NOTE]
   ><span data-ttu-id="614da-262">**Kör nu** kräver minst ett program toobe preregistered hello innehavaren.</span><span class="sxs-lookup"><span data-stu-id="614da-262">**Run now** requires at least one application toobe preregistered on hello tenant.</span></span> <span data-ttu-id="614da-263">Program som måste registreras i hello B2C-klient genom att använda hello **program** Menyvalet i Azure AD B2C eller genom att använda hello identitet upplevelse Framework tooinvoke både inbyggda och anpassade principer.</span><span class="sxs-lookup"><span data-stu-id="614da-263">Applications must be registered in hello B2C tenant, either by using hello **Applications** menu selection in Azure AD B2C or by using hello Identity Experience Framework tooinvoke both built-in and custom policies.</span></span> <span data-ttu-id="614da-264">Bara en registrering per program krävs.</span><span class="sxs-lookup"><span data-stu-id="614da-264">Only one registration per application is needed.</span></span><br><br>
   <span data-ttu-id="614da-265">toolearn hur tooregister program finns hello Azure AD B2C [Kom igång](active-directory-b2c-get-started.md) artikel eller hello [appregistrering](active-directory-b2c-app-registration.md) artikel.</span><span class="sxs-lookup"><span data-stu-id="614da-265">toolearn how tooregister applications, see hello Azure AD B2C [Get started](active-directory-b2c-get-started.md) article or hello [Application registration](active-directory-b2c-app-registration.md) article.</span></span>  

2. <span data-ttu-id="614da-266">Öppna B2C_1A_signup_signin, hello förlitande part (RP) anpassad princip som du överfört.</span><span class="sxs-lookup"><span data-stu-id="614da-266">Open B2C_1A_signup_signin, hello relying party (RP) custom policy that you uploaded.</span></span> <span data-ttu-id="614da-267">Välj **kör nu**.</span><span class="sxs-lookup"><span data-stu-id="614da-267">Select **Run now**.</span></span>

3. <span data-ttu-id="614da-268">Du ska kunna toosign med en e-postadress.</span><span class="sxs-lookup"><span data-stu-id="614da-268">You should be able toosign up using an email address.</span></span>

4. <span data-ttu-id="614da-269">Logga in med hello samma konto tooconfirm som du har hello korrekt konfiguration.</span><span class="sxs-lookup"><span data-stu-id="614da-269">Sign in with hello same account tooconfirm that you have hello correct configuration.</span></span>

>[!NOTE]
><span data-ttu-id="614da-270">En vanlig orsak till inloggningsfel är en felaktigt konfigurerad IdentityExperienceFramework app.</span><span class="sxs-lookup"><span data-stu-id="614da-270">A common cause of sign-in failure is an improperly configured IdentityExperienceFramework app.</span></span>


## <a name="next-steps"></a><span data-ttu-id="614da-271">Nästa steg</span><span class="sxs-lookup"><span data-stu-id="614da-271">Next steps</span></span>

### <a name="add-facebook-as-an-identity-provider"></a><span data-ttu-id="614da-272">Lägg till Facebook som en identitetsleverantör</span><span class="sxs-lookup"><span data-stu-id="614da-272">Add Facebook as an identity provider</span></span>
<span data-ttu-id="614da-273">tooset in Facebook:</span><span class="sxs-lookup"><span data-stu-id="614da-273">tooset up Facebook:</span></span>
1. <span data-ttu-id="614da-274">[Konfigurera en Facebook-programmet för developers.facebook.com](active-directory-b2c-setup-fb-app.md).</span><span class="sxs-lookup"><span data-stu-id="614da-274">[Configure a Facebook application in developers.facebook.com](active-directory-b2c-setup-fb-app.md).</span></span>
2. <span data-ttu-id="614da-275">[Lägg till hello Facebook programmet hemliga tooyour Azure AD B2C-klient](#add-signing-and-encryption-keys-to-your-b2c-tenant-for-use-by-custom-policies).</span><span class="sxs-lookup"><span data-stu-id="614da-275">[Add hello Facebook application secret tooyour Azure AD B2C tenant](#add-signing-and-encryption-keys-to-your-b2c-tenant-for-use-by-custom-policies).</span></span>
3. <span data-ttu-id="614da-276">Ersätt hello värdet för i principfilen för hello TrustFrameworkExtensions `client_id` med hello Facebook program-ID:</span><span class="sxs-lookup"><span data-stu-id="614da-276">In hello TrustFrameworkExtensions policy file, replace hello value of `client_id` with hello Facebook application ID:</span></span>

   ```xml
   <TechnicalProfile Id="Facebook-OAUTH">
     <Metadata>
     <!--Replace hello value of client_id in this technical profile with hello Facebook app ID"-->
       <Item Key="client_id">00000000000000</Item>
   ```
4. <span data-ttu-id="614da-277">Överför hello TrustFrameworkExtensions.xml princip filen tooyour klient.</span><span class="sxs-lookup"><span data-stu-id="614da-277">Upload hello TrustFrameworkExtensions.xml policy file tooyour tenant.</span></span>
5. <span data-ttu-id="614da-278">Testa med **kör nu** eller genom att anropa hello principen direkt från din registrerade programmet.</span><span class="sxs-lookup"><span data-stu-id="614da-278">Test by using **Run now** or by invoking hello policy directly from your registered application.</span></span>

### <a name="add-azure-active-directory-as-an-identity-provider"></a><span data-ttu-id="614da-279">Lägg till Azure Active Directory som en identitetsleverantör</span><span class="sxs-lookup"><span data-stu-id="614da-279">Add Azure Active Directory as an identity provider</span></span>
<span data-ttu-id="614da-280">grundläggande hello-filen används redan i den här Kom igång-guide innehåller hello innehållet som du behöver för att lägga till andra identitetsleverantörer.</span><span class="sxs-lookup"><span data-stu-id="614da-280">hello base file used in this getting started guide already contains some of hello content that you need for adding other identity providers.</span></span> <span data-ttu-id="614da-281">Information om hur du konfigurerar inloggningar finns hello [Azure Active Directory B2C: Logga in med hjälp av Azure AD-konton](active-directory-b2c-setup-aad-custom.md) artikel.</span><span class="sxs-lookup"><span data-stu-id="614da-281">For information on setting up sign-ins, see hello [Azure Active Directory B2C: Sign in by using Azure AD accounts](active-directory-b2c-setup-aad-custom.md) article.</span></span>

<span data-ttu-id="614da-282">En översikt över anpassade principer som använder hello identitet upplevelse Framework i Azure AD B2C finns hello [Azure Active Directory B2C: anpassade policys](active-directory-b2c-overview-custom.md) artikel.</span><span class="sxs-lookup"><span data-stu-id="614da-282">For an overview of custom policies in Azure AD B2C that use hello Identity Experience Framework, see hello [Azure Active Directory B2C: Custom policies](active-directory-b2c-overview-custom.md) article.</span></span> 

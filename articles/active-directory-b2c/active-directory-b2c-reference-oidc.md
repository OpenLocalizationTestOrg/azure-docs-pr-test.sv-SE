---
title: Webb-inloggning med OpenID Connect - Azure AD B2C | Microsoft Docs
description: "Skapa webbprogram med hjälp av Azure Active Directory-implementeringen av autentiseringsprotokollet OpenID Connect"
services: active-directory-b2c
documentationcenter: 
author: saeedakhter-msft
manager: krassk
editor: parakhj
ms.assetid: 21d420c8-3c10-4319-b681-adf2e89e7ede
ms.service: active-directory-b2c
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 08/16/2017
ms.author: saeedakhter-msft
ms.openlocfilehash: b0c33a47dd0cae79eab32ac578448fae8bf59be5
ms.sourcegitcommit: 18ad9bc049589c8e44ed277f8f43dcaa483f3339
ms.translationtype: MT
ms.contentlocale: sv-SE
ms.lasthandoff: 08/29/2017
---
# <a name="azure-active-directory-b2c-web-sign-in-with-openid-connect"></a><span data-ttu-id="9566d-103">Azure Active Directory B2C: Web inloggning med OpenID Connect</span><span class="sxs-lookup"><span data-stu-id="9566d-103">Azure Active Directory B2C: Web sign-in with OpenID Connect</span></span>
<span data-ttu-id="9566d-104">OpenID Connect är ett autentiseringsprotokoll som bygger på OAuth 2.0 som kan användas för säker inloggning användare till webbprogram.</span><span class="sxs-lookup"><span data-stu-id="9566d-104">OpenID Connect is an authentication protocol, built on top of OAuth 2.0, that can be used to securely sign users in to web applications.</span></span> <span data-ttu-id="9566d-105">Med hjälp av Azure Active Directory B2C (Azure AD B2C) implementering av OpenID Connect, du kan flytta över registrering, inloggning och andra Identitetshantering upplever i ditt webbprogram till Azure Active Directory (AD Azure).</span><span class="sxs-lookup"><span data-stu-id="9566d-105">By using the Azure Active Directory B2C (Azure AD B2C) implementation of OpenID Connect, you can outsource sign-up, sign-in, and other identity management experiences in your web applications to Azure Active Directory (Azure AD).</span></span> <span data-ttu-id="9566d-106">Den här guiden visar hur du gör en språkoberoende sätt.</span><span class="sxs-lookup"><span data-stu-id="9566d-106">This guide shows you how to do so in a language-independent manner.</span></span> <span data-ttu-id="9566d-107">Det beskriver hur du skickar och tar emot HTTP-meddelanden utan att använda någon av våra bibliotek med öppen källkod.</span><span class="sxs-lookup"><span data-stu-id="9566d-107">It describes how to send and receive HTTP messages without using any of our open-source libraries.</span></span>

<span data-ttu-id="9566d-108">[OpenID Connect](http://openid.net/specs/openid-connect-core-1_0.html) utökar OAuth 2.0 *auktorisering* protokoll som ska användas som en *autentisering* protokoll.</span><span class="sxs-lookup"><span data-stu-id="9566d-108">[OpenID Connect](http://openid.net/specs/openid-connect-core-1_0.html) extends the OAuth 2.0 *authorization* protocol for use as an *authentication* protocol.</span></span> <span data-ttu-id="9566d-109">På så sätt kan du utföra enkel inloggning med hjälp av OAuth.</span><span class="sxs-lookup"><span data-stu-id="9566d-109">This allows you to perform single sign-on by using OAuth.</span></span> <span data-ttu-id="9566d-110">Den introducerar konceptet för en *ID token*, vilket är en säkerhetstoken som gör att klienten kan verifiera användarens identitet och få grundläggande profilinformation om användaren.</span><span class="sxs-lookup"><span data-stu-id="9566d-110">It introduces the concept of an *ID token*, which is a security token that allows the client to verify the identity of the user and obtain basic profile information about the user.</span></span>

<span data-ttu-id="9566d-111">Eftersom den utökar OAuth 2.0 kan också appar att på ett säkert sätt hämta *åtkomst till token*.</span><span class="sxs-lookup"><span data-stu-id="9566d-111">Because it extends OAuth 2.0, it also enables apps to securely acquire *access tokens*.</span></span> <span data-ttu-id="9566d-112">Du kan använda access_tokens åtkomst till resurser som skyddas av en [auktorisering server](active-directory-b2c-reference-protocols.md#the-basics).</span><span class="sxs-lookup"><span data-stu-id="9566d-112">You can use access_tokens to access resources that are secured by an [authorization server](active-directory-b2c-reference-protocols.md#the-basics).</span></span> <span data-ttu-id="9566d-113">Vi rekommenderar OpenID Connect om du utvecklar ett program som finns på en server och öppnas via en webbläsare.</span><span class="sxs-lookup"><span data-stu-id="9566d-113">We recommend OpenID Connect if you're building a web application that is hosted on a server and accessed through a browser.</span></span> <span data-ttu-id="9566d-114">Om du vill lägga till Identitetshantering i dina mobila eller stationära program med Azure AD B2C, bör du använda [OAuth 2.0](active-directory-b2c-reference-oauth-code.md) i stället för OpenID Connect.</span><span class="sxs-lookup"><span data-stu-id="9566d-114">If you want to add identity management to your mobile or desktop applications by using Azure AD B2C, you should use [OAuth 2.0](active-directory-b2c-reference-oauth-code.md) rather than OpenID Connect.</span></span>

<span data-ttu-id="9566d-115">Azure AD B2C utökar OpenID Connect standardprotokollet för att göra mer än enkel autentisering och auktorisering.</span><span class="sxs-lookup"><span data-stu-id="9566d-115">Azure AD B2C extends the standard OpenID Connect protocol to do more than simple authentication and authorization.</span></span> <span data-ttu-id="9566d-116">Det inför den [parametern](active-directory-b2c-reference-policies.md), som gör att du kan använda OpenID Connect för att lägga till användarupplevelser – till exempel registrering, inloggning och profilhantering--till din app.</span><span class="sxs-lookup"><span data-stu-id="9566d-116">It introduces the [policy parameter](active-directory-b2c-reference-policies.md), which enables you to use OpenID Connect to add user experiences--such as sign-up, sign-in, and profile management--to your app.</span></span> <span data-ttu-id="9566d-117">Här kan hur vi du använder OpenID Connect och principer för att implementera var och en av dessa upplevelser i ditt webbprogram.</span><span class="sxs-lookup"><span data-stu-id="9566d-117">Here, we show you how to use OpenID Connect and policies to implement each of these experiences in your web applications.</span></span> <span data-ttu-id="9566d-118">Vi också lära dig hur du kan få åtkomst-token för åtkomst till webb-API: er.</span><span class="sxs-lookup"><span data-stu-id="9566d-118">We'll also show you how to get access tokens for accessing web APIs.</span></span>

<span data-ttu-id="9566d-119">Exempel HTTP-förfrågningar i nästa avsnitt använda våra exempel B2C-katalog, fabrikamb2c.onmicrosoft.com, samt våra exempelprogrammet, https://aadb2cplayground.azurewebsites.net och principer.</span><span class="sxs-lookup"><span data-stu-id="9566d-119">The example HTTP requests in the next section use our sample B2C directory, fabrikamb2c.onmicrosoft.com, as well as our sample application, https://aadb2cplayground.azurewebsites.net, and policies.</span></span> <span data-ttu-id="9566d-120">Kan du prova att använda begäranden själv med hjälp av dessa värden eller kan du ersätta dem med din egen.</span><span class="sxs-lookup"><span data-stu-id="9566d-120">You're free to try out the requests yourself by using these values, or you can replace them with your own.</span></span>
<span data-ttu-id="9566d-121">Lär dig hur du [kommer B2C-klient, program och principer](#use-your-own-b2c-directory).</span><span class="sxs-lookup"><span data-stu-id="9566d-121">Learn how to [get your own B2C tenant, application, and policies](#use-your-own-b2c-directory).</span></span>

## <a name="send-authentication-requests"></a><span data-ttu-id="9566d-122">Skicka autentiseringsbegäranden</span><span class="sxs-lookup"><span data-stu-id="9566d-122">Send authentication requests</span></span>
<span data-ttu-id="9566d-123">När ditt webbprogram måste autentisera användaren och köra en princip, den kan dirigera användare till den `/authorize` slutpunkt.</span><span class="sxs-lookup"><span data-stu-id="9566d-123">When your web app needs to authenticate the user and execute a policy, it can direct the user to the `/authorize` endpoint.</span></span> <span data-ttu-id="9566d-124">Det här är den interaktiva delen av flödet, där användaren vidtar åtgärder beroende på principen.</span><span class="sxs-lookup"><span data-stu-id="9566d-124">This is the interactive portion of the flow, where the user takes action, depending on the policy.</span></span>

<span data-ttu-id="9566d-125">I den här förfrågan klienten anger de behörigheter som krävs för att hämta för användaren i den `scope` parameter och principen för att köras i den `p` parameter.</span><span class="sxs-lookup"><span data-stu-id="9566d-125">In this request, the client indicates the permissions that it needs to acquire from the user in the `scope` parameter and the policy to execute in the `p` parameter.</span></span> <span data-ttu-id="9566d-126">Tre exemplen finns i följande avsnitt (med radbrytningar för att läsa), varje med hjälp av en annan princip.</span><span class="sxs-lookup"><span data-stu-id="9566d-126">Three examples are provided in the following sections (with line breaks for readability), each using a different policy.</span></span> <span data-ttu-id="9566d-127">Att få en bild av hur fungerar varje begäran, försök att klistra in begäran i en webbläsare och kör den.</span><span class="sxs-lookup"><span data-stu-id="9566d-127">To get a feel for how each request works, try pasting the request into a browser and running it.</span></span>

#### <a name="use-a-sign-in-policy"></a><span data-ttu-id="9566d-128">Använda en princip för inloggning</span><span class="sxs-lookup"><span data-stu-id="9566d-128">Use a sign-in policy</span></span>
```
GET https://login.microsoftonline.com/fabrikamb2c.onmicrosoft.com/oauth2/v2.0/authorize?
client_id=90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6
&response_type=code+id_token
&redirect_uri=https%3A%2F%2Faadb2cplayground.azurewebsites.net%2F
&response_mode=form_post
&scope=openid%20offline_access
&state=arbitrary_data_you_can_receive_in_the_response
&nonce=12345
&p=b2c_1_sign_in
```

#### <a name="use-a-sign-up-policy"></a><span data-ttu-id="9566d-129">Använda en princip för registrering</span><span class="sxs-lookup"><span data-stu-id="9566d-129">Use a sign-up policy</span></span>
```
GET https://login.microsoftonline.com/fabrikamb2c.onmicrosoft.com/oauth2/v2.0/authorize?
client_id=90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6
&response_type=code+id_token
&redirect_uri=https%3A%2F%2Faadb2cplayground.azurewebsites.net%2F
&response_mode=form_post
&scope=openid%20offline_access
&state=arbitrary_data_you_can_receive_in_the_response
&nonce=12345
&p=b2c_1_sign_up
```

#### <a name="use-an-edit-profile-policy"></a><span data-ttu-id="9566d-130">Använda en princip för Redigera-profil</span><span class="sxs-lookup"><span data-stu-id="9566d-130">Use an edit-profile policy</span></span>
```
GET https://login.microsoftonline.com/fabrikamb2c.onmicrosoft.com/oauth2/v2.0/authorize?
client_id=90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6
&response_type=code+id_token
&redirect_uri=https%3A%2F%2Faadb2cplayground.azurewebsites.net%2F
&response_mode=form_post
&scope=openid%20offline_access
&state=arbitrary_data_you_can_receive_in_the_response
&nonce=12345
&p=b2c_1_edit_profile
```

| <span data-ttu-id="9566d-131">Parameter</span><span class="sxs-lookup"><span data-stu-id="9566d-131">Parameter</span></span> | <span data-ttu-id="9566d-132">Krävs?</span><span class="sxs-lookup"><span data-stu-id="9566d-132">Required?</span></span> | <span data-ttu-id="9566d-133">Beskrivning</span><span class="sxs-lookup"><span data-stu-id="9566d-133">Description</span></span> |
| --- | --- | --- |
| <span data-ttu-id="9566d-134">client_id</span><span class="sxs-lookup"><span data-stu-id="9566d-134">client_id</span></span> |<span data-ttu-id="9566d-135">Krävs</span><span class="sxs-lookup"><span data-stu-id="9566d-135">Required</span></span> |<span data-ttu-id="9566d-136">Programmet ID som den [Azure-portalen](https://portal.azure.com/) tilldelats din app.</span><span class="sxs-lookup"><span data-stu-id="9566d-136">The application ID that the [Azure portal](https://portal.azure.com/) assigned to your app.</span></span> |
| <span data-ttu-id="9566d-137">response_type</span><span class="sxs-lookup"><span data-stu-id="9566d-137">response_type</span></span> |<span data-ttu-id="9566d-138">Krävs</span><span class="sxs-lookup"><span data-stu-id="9566d-138">Required</span></span> |<span data-ttu-id="9566d-139">Svarstyp som måste innehålla en ID-token för OpenID Connect.</span><span class="sxs-lookup"><span data-stu-id="9566d-139">The response type, which must include an ID token for OpenID Connect.</span></span> <span data-ttu-id="9566d-140">Om ditt webbprogram måste också token för att anropa ett webb-API, kan du använda `code+id_token`eftersom vi har gjort här.</span><span class="sxs-lookup"><span data-stu-id="9566d-140">If your web app also needs tokens for calling a web API, you can use `code+id_token`, as we've done here.</span></span> |
| <span data-ttu-id="9566d-141">redirect_uri</span><span class="sxs-lookup"><span data-stu-id="9566d-141">redirect_uri</span></span> |<span data-ttu-id="9566d-142">Rekommenderas</span><span class="sxs-lookup"><span data-stu-id="9566d-142">Recommended</span></span> |<span data-ttu-id="9566d-143">Den `redirect_uri` parameter för din app, där autentisering svar kan skickas och tas emot av din app.</span><span class="sxs-lookup"><span data-stu-id="9566d-143">The `redirect_uri` parameter of your app, where authentication responses can be sent and received by your app.</span></span> <span data-ttu-id="9566d-144">Den måste matcha en av de `redirect_uri` parametrar som du har registrerat i portalen, förutom att det måste vara URL-kodade.</span><span class="sxs-lookup"><span data-stu-id="9566d-144">It must exactly match one of the `redirect_uri` parameters that you registered in the portal, except that it must be URL encoded.</span></span> |
| <span data-ttu-id="9566d-145">Omfång</span><span class="sxs-lookup"><span data-stu-id="9566d-145">scope</span></span> |<span data-ttu-id="9566d-146">Krävs</span><span class="sxs-lookup"><span data-stu-id="9566d-146">Required</span></span> |<span data-ttu-id="9566d-147">En blankstegsavgränsad lista över scope.</span><span class="sxs-lookup"><span data-stu-id="9566d-147">A space-separated list of scopes.</span></span> <span data-ttu-id="9566d-148">Ett enda scope-värde som anger till Azure AD både behörigheter som krävs.</span><span class="sxs-lookup"><span data-stu-id="9566d-148">A single scope value indicates to Azure AD both permissions that are being requested.</span></span> <span data-ttu-id="9566d-149">Den `openid` omfång anger behörighet att logga in användaren och hämta data om användaren i form av ID-token (mer komma på den här senare i artikeln).</span><span class="sxs-lookup"><span data-stu-id="9566d-149">The `openid` scope indicates a permission to sign in the user and get data about the user in the form of ID tokens (more to come on this later in the article).</span></span> <span data-ttu-id="9566d-150">Den `offline_access` scope är valfritt för webbprogram.</span><span class="sxs-lookup"><span data-stu-id="9566d-150">The `offline_access` scope is optional for web apps.</span></span> <span data-ttu-id="9566d-151">Anger det att din app måste en *uppdateringstoken* för långlivade åtkomst till resurser.</span><span class="sxs-lookup"><span data-stu-id="9566d-151">It indicates that your app will need a *refresh token* for long-lived access to resources.</span></span> |
| <span data-ttu-id="9566d-152">response_mode</span><span class="sxs-lookup"><span data-stu-id="9566d-152">response_mode</span></span> |<span data-ttu-id="9566d-153">Rekommenderas</span><span class="sxs-lookup"><span data-stu-id="9566d-153">Recommended</span></span> |<span data-ttu-id="9566d-154">Den metod som ska användas för att skicka den resulterande Auktoriseringskoden tillbaka till din app.</span><span class="sxs-lookup"><span data-stu-id="9566d-154">The method that should be used to send the resulting authorization code back to your app.</span></span> <span data-ttu-id="9566d-155">Det kan vara antingen `query`, `form_post`, eller `fragment`.</span><span class="sxs-lookup"><span data-stu-id="9566d-155">It can be either `query`, `form_post`, or `fragment`.</span></span>  <span data-ttu-id="9566d-156">Den `form_post` svar läge rekommenderas för bästa säkerhet.</span><span class="sxs-lookup"><span data-stu-id="9566d-156">The `form_post` response mode is recommended for best security.</span></span> |
| <span data-ttu-id="9566d-157">state</span><span class="sxs-lookup"><span data-stu-id="9566d-157">state</span></span> |<span data-ttu-id="9566d-158">Rekommenderas</span><span class="sxs-lookup"><span data-stu-id="9566d-158">Recommended</span></span> |<span data-ttu-id="9566d-159">Ett värde som ingår i denna begäran returneras också token svar.</span><span class="sxs-lookup"><span data-stu-id="9566d-159">A value included in the request that is also returned in the token response.</span></span> <span data-ttu-id="9566d-160">Det kan vara en sträng med innehåll som du vill använda.</span><span class="sxs-lookup"><span data-stu-id="9566d-160">It can be a string of any content that you want.</span></span> <span data-ttu-id="9566d-161">Ett slumpmässigt genererat unikt värde används vanligtvis för att förhindra attacker med förfalskning av begäran.</span><span class="sxs-lookup"><span data-stu-id="9566d-161">A randomly generated unique value is typically used for preventing cross-site request forgery attacks.</span></span> <span data-ttu-id="9566d-162">Tillståndet används också för att koda information om användarens tillstånd i appen innan autentiseringsbegäran inträffade, exempelvis de var på sidan.</span><span class="sxs-lookup"><span data-stu-id="9566d-162">The state is also used to encode information about the user's state in the app before the authentication request occurred, such as the page they were on.</span></span> |
| <span data-ttu-id="9566d-163">temporärt ID</span><span class="sxs-lookup"><span data-stu-id="9566d-163">nonce</span></span> |<span data-ttu-id="9566d-164">Krävs</span><span class="sxs-lookup"><span data-stu-id="9566d-164">Required</span></span> |<span data-ttu-id="9566d-165">Ett värde som ingår i denna begäran (genereras av appen) som ska tas med i den resulterande ID-token som ett anspråk.</span><span class="sxs-lookup"><span data-stu-id="9566d-165">A value included in the request (generated by the app) that will be included in the resulting ID token as a claim.</span></span> <span data-ttu-id="9566d-166">Appen kan sedan kontrollera värdet för att minimera token replay-attacker.</span><span class="sxs-lookup"><span data-stu-id="9566d-166">The app can then verify this value to mitigate token replay attacks.</span></span> <span data-ttu-id="9566d-167">Värdet är vanligtvis en slumpmässig unik sträng som används för att identifiera ursprunget för begäran.</span><span class="sxs-lookup"><span data-stu-id="9566d-167">The value is typically a randomized unique string that can be used to identify the origin of the request.</span></span> |
| <span data-ttu-id="9566d-168">P</span><span class="sxs-lookup"><span data-stu-id="9566d-168">p</span></span> |<span data-ttu-id="9566d-169">Krävs</span><span class="sxs-lookup"><span data-stu-id="9566d-169">Required</span></span> |<span data-ttu-id="9566d-170">Den princip som kommer att utföras.</span><span class="sxs-lookup"><span data-stu-id="9566d-170">The policy that will be executed.</span></span> <span data-ttu-id="9566d-171">Det är namnet på en princip som skapas i din B2C-klient.</span><span class="sxs-lookup"><span data-stu-id="9566d-171">It is the name of a policy that is created in your B2C tenant.</span></span> <span data-ttu-id="9566d-172">Princip för namn-värde ska inledas med `b2c\_1\_`.</span><span class="sxs-lookup"><span data-stu-id="9566d-172">The policy name value should begin with `b2c\_1\_`.</span></span> <span data-ttu-id="9566d-173">Mer information om principer och [expanderbara principramverk](active-directory-b2c-reference-policies.md).</span><span class="sxs-lookup"><span data-stu-id="9566d-173">Learn more about policies and the [extensible policy framework](active-directory-b2c-reference-policies.md).</span></span> |
| <span data-ttu-id="9566d-174">kommandotolk</span><span class="sxs-lookup"><span data-stu-id="9566d-174">prompt</span></span> |<span data-ttu-id="9566d-175">Valfri</span><span class="sxs-lookup"><span data-stu-id="9566d-175">Optional</span></span> |<span data-ttu-id="9566d-176">Typ av användarinteraktion som krävs.</span><span class="sxs-lookup"><span data-stu-id="9566d-176">The type of user interaction that is required.</span></span> <span data-ttu-id="9566d-177">Det enda giltiga värdet för tillfället är `login`, som tvingar användaren att ange sina autentiseringsuppgifter på begäran.</span><span class="sxs-lookup"><span data-stu-id="9566d-177">The only valid value at this time is `login`, which forces the user to enter their credentials on that request.</span></span> <span data-ttu-id="9566d-178">Enkel inloggning börjar inte gälla.</span><span class="sxs-lookup"><span data-stu-id="9566d-178">Single sign-on will not take effect.</span></span> |

<span data-ttu-id="9566d-179">Nu uppmanas användaren att slutföra arbetsflödet för den principen.</span><span class="sxs-lookup"><span data-stu-id="9566d-179">At this point, the user is asked to complete the policy's workflow.</span></span> <span data-ttu-id="9566d-180">Detta kan handla om användaren att ange sina användarnamn och lösenord, logga in med en sociala identitet registrerar sig för katalogen, eller en annan siffra av steg, beroende på hur principen har definierats.</span><span class="sxs-lookup"><span data-stu-id="9566d-180">This might involve the user entering their username and password, signing in with a social identity, signing up for the directory, or any other number of steps, depending on how the policy is defined.</span></span>

<span data-ttu-id="9566d-181">När användaren uppfyller principen, Azure AD tillbaka ett svar på din app på den angivna `redirect_uri` parameter med hjälp av metoden som anges i den `response_mode` parameter.</span><span class="sxs-lookup"><span data-stu-id="9566d-181">After the user completes the policy, Azure AD returns a response to your app at the indicated `redirect_uri` parameter, by using the method that is specified in the `response_mode` parameter.</span></span> <span data-ttu-id="9566d-182">Svaret är samma för var och en av de föregående fall, oberoende av den princip som körs.</span><span class="sxs-lookup"><span data-stu-id="9566d-182">The response is the same for each of the preceding cases, independent of the policy that is executed.</span></span>

<span data-ttu-id="9566d-183">Ett lyckat svar med `response_mode=fragment` skulle se ut:</span><span class="sxs-lookup"><span data-stu-id="9566d-183">A successful response using `response_mode=fragment` would look like:</span></span>

```
GET https://aadb2cplayground.azurewebsites.net/#
id_token=eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6Ik5HVEZ2ZEstZnl0aEV1Q...
&code=AwABAAAAvPM1KaPlrEqdFSBzjqfTGBCmLdgfSTLEMPGYuNHSUYBrq...
&state=arbitrary_data_you_can_receive_in_the_response
```

| <span data-ttu-id="9566d-184">Parameter</span><span class="sxs-lookup"><span data-stu-id="9566d-184">Parameter</span></span> | <span data-ttu-id="9566d-185">Beskrivning</span><span class="sxs-lookup"><span data-stu-id="9566d-185">Description</span></span> |
| --- | --- |
| <span data-ttu-id="9566d-186">id_token</span><span class="sxs-lookup"><span data-stu-id="9566d-186">id_token</span></span> |<span data-ttu-id="9566d-187">ID-token som appen har begärt.</span><span class="sxs-lookup"><span data-stu-id="9566d-187">The ID token that the app requested.</span></span> <span data-ttu-id="9566d-188">Du kan använda ID-token för att verifiera användarens identitet och starta en session med användaren.</span><span class="sxs-lookup"><span data-stu-id="9566d-188">You can use the ID token to verify the user's identity and begin a session with the user.</span></span> <span data-ttu-id="9566d-189">Mer information om ID-token och deras innehåll ingår i den [Azure AD B2C tokenreferens](active-directory-b2c-reference-tokens.md).</span><span class="sxs-lookup"><span data-stu-id="9566d-189">More details on ID tokens and their contents are included in the [Azure AD B2C token reference](active-directory-b2c-reference-tokens.md).</span></span> |
| <span data-ttu-id="9566d-190">Koden</span><span class="sxs-lookup"><span data-stu-id="9566d-190">code</span></span> |<span data-ttu-id="9566d-191">Auktoriseringskoden som appen har begärt, om du har använt `response_type=code+id_token`.</span><span class="sxs-lookup"><span data-stu-id="9566d-191">The authorization code that the app requested, if you used `response_type=code+id_token`.</span></span> <span data-ttu-id="9566d-192">Appen kan använda Auktoriseringskoden för att begära en åtkomst-token för en målresurs.</span><span class="sxs-lookup"><span data-stu-id="9566d-192">The app can use the authorization code to request an access token for a target resource.</span></span> <span data-ttu-id="9566d-193">Auktoriseringskoder är mycket tillfällig.</span><span class="sxs-lookup"><span data-stu-id="9566d-193">Authorization codes are very short-lived.</span></span> <span data-ttu-id="9566d-194">Vanligtvis de går ut efter 10 minuter.</span><span class="sxs-lookup"><span data-stu-id="9566d-194">Typically, they expire after about 10 minutes.</span></span> |
| <span data-ttu-id="9566d-195">state</span><span class="sxs-lookup"><span data-stu-id="9566d-195">state</span></span> |<span data-ttu-id="9566d-196">Om en `state` parametern ingår i begäran, samma värde som ska visas i svaret.</span><span class="sxs-lookup"><span data-stu-id="9566d-196">If a `state` parameter is included in the request, the same value should appear in the response.</span></span> <span data-ttu-id="9566d-197">Appen bör kontrollera att den `state` värden i förfrågan och svar är identiska.</span><span class="sxs-lookup"><span data-stu-id="9566d-197">The app should verify that the `state` values in the request and response are identical.</span></span> |

<span data-ttu-id="9566d-198">Felsvar kan också skickas till den `redirect_uri` parametern så att appen kan hantera dem på rätt sätt:</span><span class="sxs-lookup"><span data-stu-id="9566d-198">Error responses can also be sent to the `redirect_uri` parameter so that the app can handle them appropriately:</span></span>

```
GET https://aadb2cplayground.azurewebsites.net/#
error=access_denied
&error_description=the+user+canceled+the+authentication
&state=arbitrary_data_you_can_receive_in_the_response
```

| <span data-ttu-id="9566d-199">Parameter</span><span class="sxs-lookup"><span data-stu-id="9566d-199">Parameter</span></span> | <span data-ttu-id="9566d-200">Beskrivning</span><span class="sxs-lookup"><span data-stu-id="9566d-200">Description</span></span> |
| --- | --- |
| <span data-ttu-id="9566d-201">fel</span><span class="sxs-lookup"><span data-stu-id="9566d-201">error</span></span> |<span data-ttu-id="9566d-202">En felkod sträng som kan användas för att klassificera typer av fel som inträffar och som kan användas för att ta hänsyn till fel.</span><span class="sxs-lookup"><span data-stu-id="9566d-202">An error-code string that can be used to classify types of errors that occur and that can be used to react to errors.</span></span> |
| <span data-ttu-id="9566d-203">error_description</span><span class="sxs-lookup"><span data-stu-id="9566d-203">error_description</span></span> |<span data-ttu-id="9566d-204">Ett felmeddelande som kan hjälpa utvecklare identifiera orsaken till ett autentiseringsfel.</span><span class="sxs-lookup"><span data-stu-id="9566d-204">A specific error message that can help a developer identify the root cause of an authentication error.</span></span> |
| <span data-ttu-id="9566d-205">state</span><span class="sxs-lookup"><span data-stu-id="9566d-205">state</span></span> |<span data-ttu-id="9566d-206">Se den fullständiga beskrivningen i den första tabellen i det här avsnittet.</span><span class="sxs-lookup"><span data-stu-id="9566d-206">See the full description in the first table in this section.</span></span> <span data-ttu-id="9566d-207">Om en `state` parametern ingår i begäran, samma värde som ska visas i svaret.</span><span class="sxs-lookup"><span data-stu-id="9566d-207">If a `state` parameter is included in the request, the same value should appear in the response.</span></span> <span data-ttu-id="9566d-208">Appen bör kontrollera att den `state` värden i förfrågan och svar är identiska.</span><span class="sxs-lookup"><span data-stu-id="9566d-208">The app should verify that the `state` values in the request and response are identical.</span></span> |

## <a name="validate-the-id-token"></a><span data-ttu-id="9566d-209">Verifiera ID-token</span><span class="sxs-lookup"><span data-stu-id="9566d-209">Validate the ID token</span></span>
<span data-ttu-id="9566d-210">Bara tar emot en token med ID: T är inte tillräckligt för att autentisera användaren.</span><span class="sxs-lookup"><span data-stu-id="9566d-210">Just receiving an ID token is not enough to authenticate the user.</span></span> <span data-ttu-id="9566d-211">Du måste verifiera signaturen för ID-token och kontrollera anspråk i token per krav som din app.</span><span class="sxs-lookup"><span data-stu-id="9566d-211">You must validate the ID token's signature and verify the claims in the token per your app's requirements.</span></span> <span data-ttu-id="9566d-212">Azure AD B2C använder [JSON Web token (JWTs)](http://self-issued.info/docs/draft-ietf-oauth-json-web-token.html) och kryptering med offentlig nyckel att signera token och kontrollera att de är giltiga.</span><span class="sxs-lookup"><span data-stu-id="9566d-212">Azure AD B2C uses [JSON Web Tokens (JWTs)](http://self-issued.info/docs/draft-ietf-oauth-json-web-token.html) and public key cryptography to sign tokens and verify that they are valid.</span></span>

<span data-ttu-id="9566d-213">Det finns många öppen källkod bibliotek som är tillgängliga för att validera JWTs, beroende på ditt språk preferensordning.</span><span class="sxs-lookup"><span data-stu-id="9566d-213">There are many open-source libraries that are available for validating JWTs, depending on your language of preference.</span></span> <span data-ttu-id="9566d-214">Vi rekommenderar att utforska alternativen i stället för att implementera din egen valideringslogik.</span><span class="sxs-lookup"><span data-stu-id="9566d-214">We recommend exploring those options rather than implementing your own validation logic.</span></span> <span data-ttu-id="9566d-215">Den här informationen kan vara användbart i räkna ut hur du använder dessa bibliotek korrekt.</span><span class="sxs-lookup"><span data-stu-id="9566d-215">The information here will be useful in figuring out how to properly use those libraries.</span></span>

<span data-ttu-id="9566d-216">Azure AD B2C har OpenID Connect metadata slutpunkt, vilket gör att en app att hämta information om Azure AD B2C vid körning.</span><span class="sxs-lookup"><span data-stu-id="9566d-216">Azure AD B2C has an OpenID Connect metadata endpoint, which allows an app to fetch information about Azure AD B2C at runtime.</span></span> <span data-ttu-id="9566d-217">Informationen omfattar slutpunkter, token innehåll och nycklar för tokensignering.</span><span class="sxs-lookup"><span data-stu-id="9566d-217">This information includes endpoints, token contents, and token signing keys.</span></span> <span data-ttu-id="9566d-218">Det finns en JSON-dokumentet för metadata för varje princip i din B2C-klient.</span><span class="sxs-lookup"><span data-stu-id="9566d-218">There is a JSON metadata document for each policy in your B2C tenant.</span></span> <span data-ttu-id="9566d-219">Till exempel Metadatadokumentet för den `b2c_1_sign_in` princip i `fabrikamb2c.onmicrosoft.com` finns på:</span><span class="sxs-lookup"><span data-stu-id="9566d-219">For example, the metadata document for the `b2c_1_sign_in` policy in `fabrikamb2c.onmicrosoft.com` is located at:</span></span>

`https://login.microsoftonline.com/fabrikamb2c.onmicrosoft.com/v2.0/.well-known/openid-configuration?p=b2c_1_sign_in`

<span data-ttu-id="9566d-220">En av egenskaperna för den här konfigurationsdokument är `jwks_uri`, vars värde för samma princip skulle vara:</span><span class="sxs-lookup"><span data-stu-id="9566d-220">One of the properties of this configuration document is `jwks_uri`, whose value for the same policy would be:</span></span>

<span data-ttu-id="9566d-221">`https://login.microsoftonline.com/fabrikamb2c.onmicrosoft.com/discovery/v2.0/keys?p=b2c_1_sign_in`.</span><span class="sxs-lookup"><span data-stu-id="9566d-221">`https://login.microsoftonline.com/fabrikamb2c.onmicrosoft.com/discovery/v2.0/keys?p=b2c_1_sign_in`.</span></span>

<span data-ttu-id="9566d-222">För att avgöra vilken princip som har använts i ett ID-signering token (och varifrån att hämta metadata), har du två alternativ.</span><span class="sxs-lookup"><span data-stu-id="9566d-222">To determine which policy was used in signing an ID token (and from where to fetch the metadata), you have two options.</span></span> <span data-ttu-id="9566d-223">Först principnamnet ingår i den `acr` anspråk i ID-token.</span><span class="sxs-lookup"><span data-stu-id="9566d-223">First, the policy name is included in the `acr` claim in the ID token.</span></span> <span data-ttu-id="9566d-224">Information om hur du Parsar anspråk från en ID-token, finns det [Azure AD B2C tokenreferens](active-directory-b2c-reference-tokens.md).</span><span class="sxs-lookup"><span data-stu-id="9566d-224">For information on how to parse the claims from an ID token, see the [Azure AD B2C token reference](active-directory-b2c-reference-tokens.md).</span></span> <span data-ttu-id="9566d-225">Ett annat alternativ är att koda principen i värdet för den `state` parameter när du skickar en begäran och avkoda det för att avgöra vilken princip som har använts.</span><span class="sxs-lookup"><span data-stu-id="9566d-225">Your other option is to encode the policy in the value of the `state` parameter when you issue the request, and then decode it to determine which policy was used.</span></span> <span data-ttu-id="9566d-226">Antingen metoden är giltig.</span><span class="sxs-lookup"><span data-stu-id="9566d-226">Either method is valid.</span></span>

<span data-ttu-id="9566d-227">När du har skaffat Metadatadokumentet från metadataslutpunkten OpenID Connect, kan du använda de offentliga nycklarna för RSA-256 (som finns i den här slutpunkten) att verifiera signaturen för ID-token.</span><span class="sxs-lookup"><span data-stu-id="9566d-227">After you've acquired the metadata document from the OpenID Connect metadata endpoint, you can use the RSA 256 public keys (which are located at this endpoint) to validate the signature of the ID token.</span></span> <span data-ttu-id="9566d-228">Det kan finnas flera nycklar som anges i den här slutpunkten vid en viss tidpunkt, alla identifierade med ett `kid` anspråk.</span><span class="sxs-lookup"><span data-stu-id="9566d-228">There might be multiple keys listed at this endpoint at any given point in time, each identified by a `kid` claim.</span></span> <span data-ttu-id="9566d-229">Rubriken för ID-token innehåller också en `kid` anspråk, vilket anger vilken av dessa nycklar användes för att signera ID-token.</span><span class="sxs-lookup"><span data-stu-id="9566d-229">The header of the ID token also contains a `kid` claim, which indicates which of these keys was used to sign the ID token.</span></span> <span data-ttu-id="9566d-230">Mer information finns i [Azure AD B2C tokenreferens](active-directory-b2c-reference-tokens.md) (avsnittet [verifiera token](active-directory-b2c-reference-tokens.md#token-validation), i synnerhet).</span><span class="sxs-lookup"><span data-stu-id="9566d-230">For more information, see the [Azure AD B2C token reference](active-directory-b2c-reference-tokens.md) (the section on [validating tokens](active-directory-b2c-reference-tokens.md#token-validation), in particular).</span></span>
<!--TODO: Improve the information on this-->

<span data-ttu-id="9566d-231">När du har verifierats signaturen för ID-token, finns det flera anspråk som du behöver verifiera.</span><span class="sxs-lookup"><span data-stu-id="9566d-231">After you've validated the signature of the ID token, there are several claims that you need to verify.</span></span> <span data-ttu-id="9566d-232">Exempel:</span><span class="sxs-lookup"><span data-stu-id="9566d-232">For instance:</span></span>

* <span data-ttu-id="9566d-233">Du bör verifiera den `nonce` anspråk att förhindra att token replay-attacker.</span><span class="sxs-lookup"><span data-stu-id="9566d-233">You should validate the `nonce` claim to prevent token replay attacks.</span></span> <span data-ttu-id="9566d-234">Värdet ska du angav i begäran inloggning.</span><span class="sxs-lookup"><span data-stu-id="9566d-234">Its value should be what you specified in the sign-in request.</span></span>
* <span data-ttu-id="9566d-235">Du bör verifiera den `aud` anspråk så att det ID-token har utfärdats för din app.</span><span class="sxs-lookup"><span data-stu-id="9566d-235">You should validate the `aud` claim to ensure that the ID token was issued for your app.</span></span> <span data-ttu-id="9566d-236">Värdet ska vara program-ID för din app.</span><span class="sxs-lookup"><span data-stu-id="9566d-236">Its value should be the application ID of your app.</span></span>
* <span data-ttu-id="9566d-237">Du bör verifiera den `iat` och `exp` utger sig för att säkerställa att ID-token inte har gått ut.</span><span class="sxs-lookup"><span data-stu-id="9566d-237">You should validate the `iat` and `exp` claims to ensure that the ID token has not expired.</span></span>

<span data-ttu-id="9566d-238">Det finns också flera mer verifieringar som ska utföras.</span><span class="sxs-lookup"><span data-stu-id="9566d-238">There are also several more validations that you should perform.</span></span> <span data-ttu-id="9566d-239">Dessa beskrivs i detalj i den [OpenID Connect Core Spec](http://openid.net/specs/openid-connect-core-1_0.html).  Du kanske också vill validera ytterligare anspråk, beroende på ditt scenario.</span><span class="sxs-lookup"><span data-stu-id="9566d-239">These are described in detail in the [OpenID Connect Core Spec](http://openid.net/specs/openid-connect-core-1_0.html).  You might also want to validate additional claims, depending on your scenario.</span></span> <span data-ttu-id="9566d-240">Några vanliga verifieringar inkluderar:</span><span class="sxs-lookup"><span data-stu-id="9566d-240">Some common validations include:</span></span>

* <span data-ttu-id="9566d-241">Se till att användarorganisation har registrerat dig för appen.</span><span class="sxs-lookup"><span data-stu-id="9566d-241">Ensuring that the user/organization has signed up for the app.</span></span>
* <span data-ttu-id="9566d-242">Se till att användaren har rätt behörighet/privilegier.</span><span class="sxs-lookup"><span data-stu-id="9566d-242">Ensuring that the user has proper authorization/privileges.</span></span>
* <span data-ttu-id="9566d-243">Se till att en viss styrkan hos autentisering har inträffat, till exempel Azure Multi-Factor Authentication.</span><span class="sxs-lookup"><span data-stu-id="9566d-243">Ensuring that a certain strength of authentication has occurred, such as Azure Multi-Factor Authentication.</span></span>

<span data-ttu-id="9566d-244">Mer information om anspråk i en token med ID: T finns på [Azure AD B2C tokenreferens](active-directory-b2c-reference-tokens.md).</span><span class="sxs-lookup"><span data-stu-id="9566d-244">For more information on the claims in an ID token, see the [Azure AD B2C token reference](active-directory-b2c-reference-tokens.md).</span></span>

<span data-ttu-id="9566d-245">När du har validerat ID-token kan du börja en session med användaren.</span><span class="sxs-lookup"><span data-stu-id="9566d-245">After you have validated the ID token, you can begin a session with the user.</span></span> <span data-ttu-id="9566d-246">Du kan använda anspråken i ID-token för att hämta information om användaren i din app.</span><span class="sxs-lookup"><span data-stu-id="9566d-246">You can use the claims in the ID token to obtain information about the user in your app.</span></span> <span data-ttu-id="9566d-247">Användningsområden för den här informationen omfattar bildskärm, poster och auktorisering.</span><span class="sxs-lookup"><span data-stu-id="9566d-247">Uses for this information include display, records, and authorization.</span></span>

## <a name="get-a-token"></a><span data-ttu-id="9566d-248">Hämta en token</span><span class="sxs-lookup"><span data-stu-id="9566d-248">Get a token</span></span>
<span data-ttu-id="9566d-249">Om du behöver ditt webbprogram till att bara köra principer kan du hoppa över de följande avsnitten.</span><span class="sxs-lookup"><span data-stu-id="9566d-249">If you need your web app to only execute policies, you can skip the next few sections.</span></span> <span data-ttu-id="9566d-250">Dessa avsnitt gäller endast för appar som behöver göra autentiserade anrop till ett webb-API och också skyddas av Azure AD B2C.</span><span class="sxs-lookup"><span data-stu-id="9566d-250">These sections are applicable only to web apps that need to make authenticated calls to a web API and are also protected by Azure AD B2C.</span></span>

<span data-ttu-id="9566d-251">Du kan lösa Auktoriseringskoden som du har köpt (med hjälp av `response_type=code+id_token`) för en token för en resurs genom att skicka en `POST` begäran om att den `/token` slutpunkt.</span><span class="sxs-lookup"><span data-stu-id="9566d-251">You can redeem the authorization code that you acquired (by using `response_type=code+id_token`) for a token to the desired resource by sending a `POST` request to the `/token` endpoint.</span></span> <span data-ttu-id="9566d-252">För närvarande är den enda resursen som du kan begära en token för din Apps egen backend-webb-API.</span><span class="sxs-lookup"><span data-stu-id="9566d-252">Currently, the only resource that you can request a token for is your app's own back-end web API.</span></span> <span data-ttu-id="9566d-253">Konventionen för att begära en token till dig själv är att använda appens klient-ID som scope:</span><span class="sxs-lookup"><span data-stu-id="9566d-253">The convention for requesting a token to yourself is to use your app's client ID as the scope:</span></span>

```
POST fabrikamb2c.onmicrosoft.com/oauth2/v2.0/token?p=b2c_1_sign_in HTTP/1.1
Host: https://login.microsoftonline.com
Content-Type: application/x-www-form-urlencoded

grant_type=authorization_code&client_id=90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6&scope=90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6 offline_access&code=AwABAAAAvPM1KaPlrEqdFSBzjqfTGBCmLdgfSTLEMPGYuNHSUYBrq...&redirect_uri=urn:ietf:wg:oauth:2.0:oob&client_secret=<your-application-secret>

```

| <span data-ttu-id="9566d-254">Parameter</span><span class="sxs-lookup"><span data-stu-id="9566d-254">Parameter</span></span> | <span data-ttu-id="9566d-255">Krävs?</span><span class="sxs-lookup"><span data-stu-id="9566d-255">Required?</span></span> | <span data-ttu-id="9566d-256">Beskrivning</span><span class="sxs-lookup"><span data-stu-id="9566d-256">Description</span></span> |
| --- | --- | --- |
| <span data-ttu-id="9566d-257">P</span><span class="sxs-lookup"><span data-stu-id="9566d-257">p</span></span> |<span data-ttu-id="9566d-258">Krävs</span><span class="sxs-lookup"><span data-stu-id="9566d-258">Required</span></span> |<span data-ttu-id="9566d-259">Den princip som användes för att hämta Auktoriseringskoden.</span><span class="sxs-lookup"><span data-stu-id="9566d-259">The policy that was used to acquire the authorization code.</span></span> <span data-ttu-id="9566d-260">Du kan inte använda en annan princip i den här förfrågan.</span><span class="sxs-lookup"><span data-stu-id="9566d-260">You cannot use a different policy in this request.</span></span> <span data-ttu-id="9566d-261">Observera att du lägger inte till den här parametern frågesträngen den `POST` brödtext.</span><span class="sxs-lookup"><span data-stu-id="9566d-261">Note that you add this parameter to the query string, not to the `POST` body.</span></span> |
| <span data-ttu-id="9566d-262">client_id</span><span class="sxs-lookup"><span data-stu-id="9566d-262">client_id</span></span> |<span data-ttu-id="9566d-263">Krävs</span><span class="sxs-lookup"><span data-stu-id="9566d-263">Required</span></span> |<span data-ttu-id="9566d-264">Programmet ID som den [Azure-portalen](https://portal.azure.com/) tilldelats din app.</span><span class="sxs-lookup"><span data-stu-id="9566d-264">The application ID that the [Azure portal](https://portal.azure.com/) assigned to your app.</span></span> |
| <span data-ttu-id="9566d-265">grant_type</span><span class="sxs-lookup"><span data-stu-id="9566d-265">grant_type</span></span> |<span data-ttu-id="9566d-266">Krävs</span><span class="sxs-lookup"><span data-stu-id="9566d-266">Required</span></span> |<span data-ttu-id="9566d-267">Typ av bevilja som måste vara `authorization_code` för auktoriseringskodflödet.</span><span class="sxs-lookup"><span data-stu-id="9566d-267">The type of grant, which must be `authorization_code` for the authorization code flow.</span></span> |
| <span data-ttu-id="9566d-268">Omfång</span><span class="sxs-lookup"><span data-stu-id="9566d-268">scope</span></span> |<span data-ttu-id="9566d-269">Rekommenderas</span><span class="sxs-lookup"><span data-stu-id="9566d-269">Recommended</span></span> |<span data-ttu-id="9566d-270">En blankstegsavgränsad lista över scope.</span><span class="sxs-lookup"><span data-stu-id="9566d-270">A space-separated list of scopes.</span></span> <span data-ttu-id="9566d-271">Ett enda scope-värde som anger till Azure AD både behörigheter som krävs.</span><span class="sxs-lookup"><span data-stu-id="9566d-271">A single scope value indicates to Azure AD both permissions that are being requested.</span></span> <span data-ttu-id="9566d-272">Den `openid` omfång anger behörighet att logga in användaren och hämta data om användaren i form av id_token parametrar.</span><span class="sxs-lookup"><span data-stu-id="9566d-272">The `openid` scope indicates a permission to sign in the user and get data about the user in the form of id_token parameters.</span></span> <span data-ttu-id="9566d-273">Det kan användas för att hämta token till din Apps egen backend-webb-API, som representeras av samma program-ID som klienten.</span><span class="sxs-lookup"><span data-stu-id="9566d-273">It can be used to get tokens to your app's own back-end web API, which is represented by the same application ID as the client.</span></span> <span data-ttu-id="9566d-274">Den `offline_access` omfång anger att din app måste en uppdateringstoken för långlivade åtkomst till resurser.</span><span class="sxs-lookup"><span data-stu-id="9566d-274">The `offline_access` scope indicates that your app will need a refresh token for long-lived access to resources.</span></span> |
| <span data-ttu-id="9566d-275">Koden</span><span class="sxs-lookup"><span data-stu-id="9566d-275">code</span></span> |<span data-ttu-id="9566d-276">Krävs</span><span class="sxs-lookup"><span data-stu-id="9566d-276">Required</span></span> |<span data-ttu-id="9566d-277">Auktoriseringskoden som du har införskaffade i den första del av flödet.</span><span class="sxs-lookup"><span data-stu-id="9566d-277">The authorization code that you acquired in the first leg of the flow.</span></span> |
| <span data-ttu-id="9566d-278">redirect_uri</span><span class="sxs-lookup"><span data-stu-id="9566d-278">redirect_uri</span></span> |<span data-ttu-id="9566d-279">Krävs</span><span class="sxs-lookup"><span data-stu-id="9566d-279">Required</span></span> |<span data-ttu-id="9566d-280">Den `redirect_uri` parametern för programmet som du fick Auktoriseringskoden.</span><span class="sxs-lookup"><span data-stu-id="9566d-280">The `redirect_uri` parameter of the application where you received the authorization code.</span></span> |
| <span data-ttu-id="9566d-281">client_secret</span><span class="sxs-lookup"><span data-stu-id="9566d-281">client_secret</span></span> |<span data-ttu-id="9566d-282">Krävs</span><span class="sxs-lookup"><span data-stu-id="9566d-282">Required</span></span> |<span data-ttu-id="9566d-283">Den hemlighet som programmet som du skapade i den [Azure-portalen](https://portal.azure.com/).</span><span class="sxs-lookup"><span data-stu-id="9566d-283">The application secret that you generated in the [Azure portal](https://portal.azure.com/).</span></span> <span data-ttu-id="9566d-284">Den här programhemligheten är en viktig säkerhetsuppgift artefakt.</span><span class="sxs-lookup"><span data-stu-id="9566d-284">This application secret is an important security artifact.</span></span> <span data-ttu-id="9566d-285">Du bör lagra den på ett säkert sätt på din server.</span><span class="sxs-lookup"><span data-stu-id="9566d-285">You should store it securely on your server.</span></span> <span data-ttu-id="9566d-286">Du bör också rotera denna klienthemlighet regelbundet.</span><span class="sxs-lookup"><span data-stu-id="9566d-286">You should also rotate this client secret on a periodic basis.</span></span> |

<span data-ttu-id="9566d-287">Det ser ut som ett lyckat token svar:</span><span class="sxs-lookup"><span data-stu-id="9566d-287">A successful token response looks like:</span></span>

```
{
    "not_before": "1442340812",
    "token_type": "Bearer",
    "access_token": "eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6Ik5HVEZ2ZEstZnl0aEV1Q...",
    "scope": "90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6 offline_access",
    "expires_in": "3600",
    "refresh_token": "AAQfQmvuDy8WtUv-sd0TBwWVQs1rC-Lfxa_NDkLqpg50Cxp5Dxj0VPF1mx2Z...",
}
```
| <span data-ttu-id="9566d-288">Parameter</span><span class="sxs-lookup"><span data-stu-id="9566d-288">Parameter</span></span> | <span data-ttu-id="9566d-289">Beskrivning</span><span class="sxs-lookup"><span data-stu-id="9566d-289">Description</span></span> |
| --- | --- |
| <span data-ttu-id="9566d-290">not_before</span><span class="sxs-lookup"><span data-stu-id="9566d-290">not_before</span></span> |<span data-ttu-id="9566d-291">Den tid då token betraktas som giltigt epok tidpunkt.</span><span class="sxs-lookup"><span data-stu-id="9566d-291">The time at which the token is considered valid, in epoch time.</span></span> |
| <span data-ttu-id="9566d-292">token_type</span><span class="sxs-lookup"><span data-stu-id="9566d-292">token_type</span></span> |<span data-ttu-id="9566d-293">Tokentypen-värde.</span><span class="sxs-lookup"><span data-stu-id="9566d-293">The token type value.</span></span> <span data-ttu-id="9566d-294">Den enda typen som har stöd för Azure AD är `Bearer`.</span><span class="sxs-lookup"><span data-stu-id="9566d-294">The only type that Azure AD supports is `Bearer`.</span></span> |
| <span data-ttu-id="9566d-295">access_token</span><span class="sxs-lookup"><span data-stu-id="9566d-295">access_token</span></span> |<span data-ttu-id="9566d-296">Den signera JWT-token som du begärde.</span><span class="sxs-lookup"><span data-stu-id="9566d-296">The signed JWT token that you requested.</span></span> |
| <span data-ttu-id="9566d-297">Omfång</span><span class="sxs-lookup"><span data-stu-id="9566d-297">scope</span></span> |<span data-ttu-id="9566d-298">Scope token är giltig.</span><span class="sxs-lookup"><span data-stu-id="9566d-298">The scopes for which the token is valid.</span></span> <span data-ttu-id="9566d-299">Dessa kan användas för att cachelagra token för senare användning.</span><span class="sxs-lookup"><span data-stu-id="9566d-299">These can be used for caching tokens for later use.</span></span> |
| <span data-ttu-id="9566d-300">expires_in</span><span class="sxs-lookup"><span data-stu-id="9566d-300">expires_in</span></span> |<span data-ttu-id="9566d-301">Hur lång tid som den åtkomst-token är giltig (i sekunder).</span><span class="sxs-lookup"><span data-stu-id="9566d-301">The length of time that the access token is valid (in seconds).</span></span> |
| <span data-ttu-id="9566d-302">refresh_token</span><span class="sxs-lookup"><span data-stu-id="9566d-302">refresh_token</span></span> |<span data-ttu-id="9566d-303">En token för uppdatering av OAuth 2.0.</span><span class="sxs-lookup"><span data-stu-id="9566d-303">An OAuth 2.0 refresh token.</span></span> <span data-ttu-id="9566d-304">Appen kan använda denna token för att hämta ytterligare token när den aktuella token upphör att gälla.</span><span class="sxs-lookup"><span data-stu-id="9566d-304">The app can use this token to acquire additional tokens after the current token expires.</span></span> <span data-ttu-id="9566d-305">Uppdatera token är långlivade och kan användas för att få åtkomst till resurser för längre tid.</span><span class="sxs-lookup"><span data-stu-id="9566d-305">Refresh tokens are long-lived and can be used to retain access to resources for extended periods of time.</span></span> <span data-ttu-id="9566d-306">Mer information finns i den [B2C tokenreferens](active-directory-b2c-reference-tokens.md).</span><span class="sxs-lookup"><span data-stu-id="9566d-306">For more details, refer to the [B2C token reference](active-directory-b2c-reference-tokens.md).</span></span> <span data-ttu-id="9566d-307">Observera att du måste ha använt omfånget `offline_access` i auktoriserings- och token-förfrågningar för att kunna ta emot en uppdateringstoken.</span><span class="sxs-lookup"><span data-stu-id="9566d-307">Note that you must have used the scope `offline_access` in both the authorization and token requests in order to receive a refresh token.</span></span> |

<span data-ttu-id="9566d-308">Felsvar som liknar:</span><span class="sxs-lookup"><span data-stu-id="9566d-308">Error responses look like:</span></span>

```
{
    "error": "access_denied",
    "error_description": "The user revoked access to the app.",
}
```

| <span data-ttu-id="9566d-309">Parameter</span><span class="sxs-lookup"><span data-stu-id="9566d-309">Parameter</span></span> | <span data-ttu-id="9566d-310">Beskrivning</span><span class="sxs-lookup"><span data-stu-id="9566d-310">Description</span></span> |
| --- | --- |
| <span data-ttu-id="9566d-311">fel</span><span class="sxs-lookup"><span data-stu-id="9566d-311">error</span></span> |<span data-ttu-id="9566d-312">En felkod sträng som kan användas för att klassificera typer av fel som inträffar och som kan användas för att ta hänsyn till fel.</span><span class="sxs-lookup"><span data-stu-id="9566d-312">An error-code string that can be used to classify types of errors that occur and that can be used to react to errors.</span></span> |
| <span data-ttu-id="9566d-313">error_description</span><span class="sxs-lookup"><span data-stu-id="9566d-313">error_description</span></span> |<span data-ttu-id="9566d-314">Ett felmeddelande som kan hjälpa utvecklare identifiera orsaken till ett autentiseringsfel.</span><span class="sxs-lookup"><span data-stu-id="9566d-314">A specific error message that can help a developer identify the root cause of an authentication error.</span></span> |

## <a name="use-the-token"></a><span data-ttu-id="9566d-315">Använda token</span><span class="sxs-lookup"><span data-stu-id="9566d-315">Use the token</span></span>
<span data-ttu-id="9566d-316">Nu när du har har skaffat ett åtkomsttoken, kan du använda token i begäranden till din backend-webb-API: er genom att inkludera den i den `Authorization` huvud:</span><span class="sxs-lookup"><span data-stu-id="9566d-316">Now that you've successfully acquired an access token, you can use the token in requests to your back-end web APIs by including it in the `Authorization` header:</span></span>

```
GET /tasks
Host: https://mytaskwebapi.com
Authorization: Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6Ik5HVEZ2ZEstZnl0aEV1Q...
```

## <a name="refresh-the-token"></a><span data-ttu-id="9566d-317">Uppdatera token</span><span class="sxs-lookup"><span data-stu-id="9566d-317">Refresh the token</span></span>
<span data-ttu-id="9566d-318">ID-token är tillfällig.</span><span class="sxs-lookup"><span data-stu-id="9566d-318">ID tokens are short-lived.</span></span> <span data-ttu-id="9566d-319">Du måste uppdatera dem när de går ut om du vill fortsätta att kunna komma åt resurser.</span><span class="sxs-lookup"><span data-stu-id="9566d-319">You must refresh them after they expire to continue being able to access resources.</span></span> <span data-ttu-id="9566d-320">Du kan göra det genom att skicka in en annan `POST` begäran om att den `/token` slutpunkt.</span><span class="sxs-lookup"><span data-stu-id="9566d-320">You can do so by submitting another `POST` request to the `/token` endpoint.</span></span> <span data-ttu-id="9566d-321">Den här gången den `refresh_token` parameter i stället för den `code` parameter:</span><span class="sxs-lookup"><span data-stu-id="9566d-321">This time, provide the `refresh_token` parameter instead of the `code` parameter:</span></span>

```
POST fabrikamb2c.onmicrosoft.com/oauth2/v2.0/token?p=b2c_1_sign_in HTTP/1.1
Host: https://login.microsoftonline.com
Content-Type: application/x-www-form-urlencoded

grant_type=refresh_token&client_id=90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6&scope=openid offline_access&refresh_token=AwABAAAAvPM1KaPlrEqdFSBzjqfTGBCmLdgfSTLEMPGYuNHSUYBrq...&redirect_uri=urn:ietf:wg:oauth:2.0:oob&client_secret=<your-application-secret>
```

| <span data-ttu-id="9566d-322">Parameter</span><span class="sxs-lookup"><span data-stu-id="9566d-322">Parameter</span></span> | <span data-ttu-id="9566d-323">Krävs</span><span class="sxs-lookup"><span data-stu-id="9566d-323">Required</span></span> | <span data-ttu-id="9566d-324">Beskrivning</span><span class="sxs-lookup"><span data-stu-id="9566d-324">Description</span></span> |
| --- | --- | --- |
| <span data-ttu-id="9566d-325">P</span><span class="sxs-lookup"><span data-stu-id="9566d-325">p</span></span> |<span data-ttu-id="9566d-326">Krävs</span><span class="sxs-lookup"><span data-stu-id="9566d-326">Required</span></span> |<span data-ttu-id="9566d-327">Den princip som användes för att hämta den ursprungliga uppdateringstoken.</span><span class="sxs-lookup"><span data-stu-id="9566d-327">The policy that was used to acquire the original refresh token.</span></span> <span data-ttu-id="9566d-328">Du kan inte använda en annan princip i den här förfrågan.</span><span class="sxs-lookup"><span data-stu-id="9566d-328">You cannot use a different policy in this request.</span></span> <span data-ttu-id="9566d-329">Observera att du lägger till den här parametern frågesträngen, inte efter innehållet.</span><span class="sxs-lookup"><span data-stu-id="9566d-329">Note that you add this parameter to the query string, not to the POST body.</span></span> |
| <span data-ttu-id="9566d-330">client_id</span><span class="sxs-lookup"><span data-stu-id="9566d-330">client_id</span></span> |<span data-ttu-id="9566d-331">Krävs</span><span class="sxs-lookup"><span data-stu-id="9566d-331">Required</span></span> |<span data-ttu-id="9566d-332">Programmet ID som den [Azure-portalen](https://portal.azure.com/) tilldelats din app.</span><span class="sxs-lookup"><span data-stu-id="9566d-332">The application ID that the [Azure portal](https://portal.azure.com/) assigned to your app.</span></span> |
| <span data-ttu-id="9566d-333">grant_type</span><span class="sxs-lookup"><span data-stu-id="9566d-333">grant_type</span></span> |<span data-ttu-id="9566d-334">Krävs</span><span class="sxs-lookup"><span data-stu-id="9566d-334">Required</span></span> |<span data-ttu-id="9566d-335">Typ av bevilja som måste vara en uppdateringstoken för denna del av auktoriseringskodflödet.</span><span class="sxs-lookup"><span data-stu-id="9566d-335">The type of grant, which must be a refresh token for this leg of the authorization code flow.</span></span> |
| <span data-ttu-id="9566d-336">Omfång</span><span class="sxs-lookup"><span data-stu-id="9566d-336">scope</span></span> |<span data-ttu-id="9566d-337">Rekommenderas</span><span class="sxs-lookup"><span data-stu-id="9566d-337">Recommended</span></span> |<span data-ttu-id="9566d-338">En blankstegsavgränsad lista över scope.</span><span class="sxs-lookup"><span data-stu-id="9566d-338">A space-separated list of scopes.</span></span> <span data-ttu-id="9566d-339">Ett enda scope-värde som anger till Azure AD både behörigheter som krävs.</span><span class="sxs-lookup"><span data-stu-id="9566d-339">A single scope value indicates to Azure AD both permissions that are being requested.</span></span> <span data-ttu-id="9566d-340">Den `openid` omfång anger behörighet att logga in användaren och hämta data om användaren i form av ID-token.</span><span class="sxs-lookup"><span data-stu-id="9566d-340">The `openid` scope indicates a permission to sign in the user and get data about the user in the form of ID tokens.</span></span> <span data-ttu-id="9566d-341">Det kan användas för att hämta token till din Apps egen backend-webb-API, som representeras av samma program-ID som klienten.</span><span class="sxs-lookup"><span data-stu-id="9566d-341">It can be used to get tokens to your app's own back-end web API, which is represented by the same application ID as the client.</span></span> <span data-ttu-id="9566d-342">Den `offline_access` omfång anger att din app måste en uppdateringstoken för långlivade åtkomst till resurser.</span><span class="sxs-lookup"><span data-stu-id="9566d-342">The `offline_access` scope indicates that your app will need a refresh token for long-lived access to resources.</span></span> |
| <span data-ttu-id="9566d-343">redirect_uri</span><span class="sxs-lookup"><span data-stu-id="9566d-343">redirect_uri</span></span> |<span data-ttu-id="9566d-344">Rekommenderas</span><span class="sxs-lookup"><span data-stu-id="9566d-344">Recommended</span></span> |<span data-ttu-id="9566d-345">Den `redirect_uri` parametern för programmet som du fick Auktoriseringskoden.</span><span class="sxs-lookup"><span data-stu-id="9566d-345">The `redirect_uri` parameter of the application where you received the authorization code.</span></span> |
| <span data-ttu-id="9566d-346">refresh_token</span><span class="sxs-lookup"><span data-stu-id="9566d-346">refresh_token</span></span> |<span data-ttu-id="9566d-347">Krävs</span><span class="sxs-lookup"><span data-stu-id="9566d-347">Required</span></span> |<span data-ttu-id="9566d-348">Den ursprungliga uppdateringstoken som du har införskaffade i andra del av flödet.</span><span class="sxs-lookup"><span data-stu-id="9566d-348">The original refresh token that you acquired in the second leg of the flow.</span></span> <span data-ttu-id="9566d-349">Observera att du måste ha använt omfånget `offline_access` i auktoriserings- och token-förfrågningar för att kunna ta emot en uppdateringstoken.</span><span class="sxs-lookup"><span data-stu-id="9566d-349">Note that you must have used the scope `offline_access` in both the authorization and token requests in order to receive a refresh token.</span></span> |
| <span data-ttu-id="9566d-350">client_secret</span><span class="sxs-lookup"><span data-stu-id="9566d-350">client_secret</span></span> |<span data-ttu-id="9566d-351">Krävs</span><span class="sxs-lookup"><span data-stu-id="9566d-351">Required</span></span> |<span data-ttu-id="9566d-352">Den hemlighet som programmet som du skapade i den [Azure-portalen](https://portal.azure.com/).</span><span class="sxs-lookup"><span data-stu-id="9566d-352">The application secret that you generated in the [Azure portal](https://portal.azure.com/).</span></span> <span data-ttu-id="9566d-353">Den här programhemligheten är en viktig säkerhetsuppgift artefakt.</span><span class="sxs-lookup"><span data-stu-id="9566d-353">This application secret is an important security artifact.</span></span> <span data-ttu-id="9566d-354">Du bör lagra den på ett säkert sätt på din server.</span><span class="sxs-lookup"><span data-stu-id="9566d-354">You should store it securely on your server.</span></span> <span data-ttu-id="9566d-355">Du bör också rotera denna klienthemlighet regelbundet.</span><span class="sxs-lookup"><span data-stu-id="9566d-355">You should also rotate this client secret on a periodic basis.</span></span> |

<span data-ttu-id="9566d-356">Det ser ut som ett lyckat token svar:</span><span class="sxs-lookup"><span data-stu-id="9566d-356">A successful token response looks like:</span></span>

```
{
    "not_before": "1442340812",
    "token_type": "Bearer",
    "access_token": "eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6Ik5HVEZ2ZEstZnl0aEV1Q...",
    "scope": "90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6 offline_access",
    "expires_in": "3600",
    "refresh_token": "AAQfQmvuDy8WtUv-sd0TBwWVQs1rC-Lfxa_NDkLqpg50Cxp5Dxj0VPF1mx2Z...",
}
```
| <span data-ttu-id="9566d-357">Parameter</span><span class="sxs-lookup"><span data-stu-id="9566d-357">Parameter</span></span> | <span data-ttu-id="9566d-358">Beskrivning</span><span class="sxs-lookup"><span data-stu-id="9566d-358">Description</span></span> |
| --- | --- |
| <span data-ttu-id="9566d-359">not_before</span><span class="sxs-lookup"><span data-stu-id="9566d-359">not_before</span></span> |<span data-ttu-id="9566d-360">Den tid då token betraktas som giltigt epok tidpunkt.</span><span class="sxs-lookup"><span data-stu-id="9566d-360">The time at which the token is considered valid, in epoch time.</span></span> |
| <span data-ttu-id="9566d-361">token_type</span><span class="sxs-lookup"><span data-stu-id="9566d-361">token_type</span></span> |<span data-ttu-id="9566d-362">Tokentypen-värde.</span><span class="sxs-lookup"><span data-stu-id="9566d-362">The token type value.</span></span> <span data-ttu-id="9566d-363">Den enda typen som har stöd för Azure AD är `Bearer`.</span><span class="sxs-lookup"><span data-stu-id="9566d-363">The only type that Azure AD supports is `Bearer`.</span></span> |
| <span data-ttu-id="9566d-364">access_token</span><span class="sxs-lookup"><span data-stu-id="9566d-364">access_token</span></span> |<span data-ttu-id="9566d-365">Den signera JWT-token som du begärde.</span><span class="sxs-lookup"><span data-stu-id="9566d-365">The signed JWT token that you requested.</span></span> |
| <span data-ttu-id="9566d-366">Omfång</span><span class="sxs-lookup"><span data-stu-id="9566d-366">scope</span></span> |<span data-ttu-id="9566d-367">Omfattningen som token är giltig för, som kan användas för att cachelagra token för senare användning.</span><span class="sxs-lookup"><span data-stu-id="9566d-367">The scope that the token is valid for, which can be used for caching tokens for later use.</span></span> |
| <span data-ttu-id="9566d-368">expires_in</span><span class="sxs-lookup"><span data-stu-id="9566d-368">expires_in</span></span> |<span data-ttu-id="9566d-369">Hur lång tid som den åtkomst-token är giltig (i sekunder).</span><span class="sxs-lookup"><span data-stu-id="9566d-369">The length of time that the access token is valid (in seconds).</span></span> |
| <span data-ttu-id="9566d-370">refresh_token</span><span class="sxs-lookup"><span data-stu-id="9566d-370">refresh_token</span></span> |<span data-ttu-id="9566d-371">En token för uppdatering av OAuth 2.0.</span><span class="sxs-lookup"><span data-stu-id="9566d-371">An OAuth 2.0 refresh token.</span></span> <span data-ttu-id="9566d-372">Appen kan använda denna token för att hämta ytterligare token när den aktuella token upphör att gälla.</span><span class="sxs-lookup"><span data-stu-id="9566d-372">The app can use this token to acquire additional tokens after the current token expires.</span></span>  <span data-ttu-id="9566d-373">Uppdatera token är långlivade och kan användas för att få åtkomst till resurser för längre tid.</span><span class="sxs-lookup"><span data-stu-id="9566d-373">Refresh tokens are long-lived and can be used to retain access to resources for extended periods of time.</span></span> <span data-ttu-id="9566d-374">Mer information finns i den [B2C tokenreferens](active-directory-b2c-reference-tokens.md).</span><span class="sxs-lookup"><span data-stu-id="9566d-374">For more detail, refer to the [B2C token reference](active-directory-b2c-reference-tokens.md).</span></span> |

<span data-ttu-id="9566d-375">Felsvar som liknar:</span><span class="sxs-lookup"><span data-stu-id="9566d-375">Error responses look like:</span></span>

```
{
    "error": "access_denied",
    "error_description": "The user revoked access to the app.",
}
```

| <span data-ttu-id="9566d-376">Parameter</span><span class="sxs-lookup"><span data-stu-id="9566d-376">Parameter</span></span> | <span data-ttu-id="9566d-377">Beskrivning</span><span class="sxs-lookup"><span data-stu-id="9566d-377">Description</span></span> |
| --- | --- |
| <span data-ttu-id="9566d-378">fel</span><span class="sxs-lookup"><span data-stu-id="9566d-378">error</span></span> |<span data-ttu-id="9566d-379">En felkod sträng som kan användas för att klassificera typer av fel som inträffar och som kan användas för att ta hänsyn till fel.</span><span class="sxs-lookup"><span data-stu-id="9566d-379">An error-code string that can be used to classify types of errors that occur and that can be used to react to errors.</span></span> |
| <span data-ttu-id="9566d-380">error_description</span><span class="sxs-lookup"><span data-stu-id="9566d-380">error_description</span></span> |<span data-ttu-id="9566d-381">Ett felmeddelande som kan hjälpa utvecklare identifiera orsaken till ett autentiseringsfel.</span><span class="sxs-lookup"><span data-stu-id="9566d-381">A specific error message that can help a developer identify the root cause of an authentication error.</span></span> |

## <a name="send-a-sign-out-request"></a><span data-ttu-id="9566d-382">Skicka en begäran om utloggning</span><span class="sxs-lookup"><span data-stu-id="9566d-382">Send a sign-out request</span></span>
<span data-ttu-id="9566d-383">När du vill logga ut från appen användaren räcker det inte att rensa din app cookies eller på annat sätt slutet sessionen med användaren.</span><span class="sxs-lookup"><span data-stu-id="9566d-383">When you want to sign the user out of the app, it is not enough to clear your app's cookies or otherwise end the session with the user.</span></span> <span data-ttu-id="9566d-384">Du måste också dirigerar användaren till Azure AD för att logga ut. Om du inte göra det, kanske användaren kan autentiseras i appen utan att ange sina autentiseringsuppgifter igen.</span><span class="sxs-lookup"><span data-stu-id="9566d-384">You must also redirect the user to Azure AD to sign out. If you fail to do so, the user might be able to reauthenticate to your app without entering their credentials again.</span></span> <span data-ttu-id="9566d-385">Det beror på att de har en giltig inloggning session med Azure AD.</span><span class="sxs-lookup"><span data-stu-id="9566d-385">This is because they will have a valid single sign-on session with Azure AD.</span></span>

<span data-ttu-id="9566d-386">Du kan bara dirigera användare till den `end_session` slutpunkt som anges i Metadatadokumentet OpenID Connect beskrivs tidigare i det ”verifiera ID-token” avsnittet:</span><span class="sxs-lookup"><span data-stu-id="9566d-386">You can simply redirect the user to the `end_session` endpoint that is listed in the OpenID Connect metadata document described earlier in the "Validate the ID token" section:</span></span>

```
GET https://login.microsoftonline.com/fabrikamb2c.onmicrosoft.com/oauth2/v2.0/logout?
p=b2c_1_sign_in
&post_logout_redirect_uri=https%3A%2F%2Faadb2cplayground.azurewebsites.net%2F
```

| <span data-ttu-id="9566d-387">Parameter</span><span class="sxs-lookup"><span data-stu-id="9566d-387">Parameter</span></span> | <span data-ttu-id="9566d-388">Krävs?</span><span class="sxs-lookup"><span data-stu-id="9566d-388">Required?</span></span> | <span data-ttu-id="9566d-389">Beskrivning</span><span class="sxs-lookup"><span data-stu-id="9566d-389">Description</span></span> |
| --- | --- | --- |
| <span data-ttu-id="9566d-390">P</span><span class="sxs-lookup"><span data-stu-id="9566d-390">p</span></span> |<span data-ttu-id="9566d-391">Krävs</span><span class="sxs-lookup"><span data-stu-id="9566d-391">Required</span></span> |<span data-ttu-id="9566d-392">Den princip som du vill använda för att signera användare utanför tillämpningsprogrammet.</span><span class="sxs-lookup"><span data-stu-id="9566d-392">The policy that you want to use to sign the user out of your application.</span></span> |
| <span data-ttu-id="9566d-393">post_logout_redirect_uri</span><span class="sxs-lookup"><span data-stu-id="9566d-393">post_logout_redirect_uri</span></span> |<span data-ttu-id="9566d-394">Rekommenderas</span><span class="sxs-lookup"><span data-stu-id="9566d-394">Recommended</span></span> |<span data-ttu-id="9566d-395">Den URL som användaren ska omdirigeras till efter lyckad utloggning. Om det inte finns, Azure AD B2C visar användaren ett allmänt meddelande.</span><span class="sxs-lookup"><span data-stu-id="9566d-395">The URL that the user should be redirected to after successful sign-out. If it is not included, Azure AD B2C shows the user a generic message.</span></span> |

> [!NOTE]
> <span data-ttu-id="9566d-396">Även om dirigera användare till den `end_session` endpoint tar bort vissa av användarens inloggning tillstånd med Azure AD B2C, signerar inte användaren utanför sin sociala identitet provider (IDP)-session.</span><span class="sxs-lookup"><span data-stu-id="9566d-396">Although directing the user to the `end_session` endpoint will clear some of the user's single sign-on state with Azure AD B2C, it will not sign the user out of their social identity provider (IDP) session.</span></span> <span data-ttu-id="9566d-397">Om användaren väljer samma IDP under en efterföljande inloggning, kommer de att autentisera, utan att behöva ange sina autentiseringsuppgifter.</span><span class="sxs-lookup"><span data-stu-id="9566d-397">If the user selects the same IDP during a subsequent sign-in, they will be reauthenticated, without entering their credentials.</span></span> <span data-ttu-id="9566d-398">Om en användare vill logga ut från tillämpningsprogrammet B2C betyder den inte de vill logga ut från sitt Facebook-konto.</span><span class="sxs-lookup"><span data-stu-id="9566d-398">If a user wants to sign out of your B2C application, it does not necessarily mean they want to sign out of their Facebook account.</span></span> <span data-ttu-id="9566d-399">Men för lokala konton avslutas användarens session korrekt.</span><span class="sxs-lookup"><span data-stu-id="9566d-399">However, in the case of local accounts, the user's session will be ended properly.</span></span>
> 
> 

## <a name="use-your-own-b2c-tenant"></a><span data-ttu-id="9566d-400">Använda en egen B2C-klient</span><span class="sxs-lookup"><span data-stu-id="9566d-400">Use your own B2C tenant</span></span>
<span data-ttu-id="9566d-401">Om du vill prova dessa begäranden på egen hand måste du först göra följande tre steg och Ersätt exempelvärden som beskrivs ovan med dina egna:</span><span class="sxs-lookup"><span data-stu-id="9566d-401">If you want to try these requests for yourself, you must first perform these three steps, and then replace the example values described earlier with your own:</span></span>

1. <span data-ttu-id="9566d-402">[Skapa en B2C-klient](active-directory-b2c-get-started.md), och använda namnet på din klient i begäranden.</span><span class="sxs-lookup"><span data-stu-id="9566d-402">[Create a B2C tenant](active-directory-b2c-get-started.md), and use the name of your tenant in the requests.</span></span>
2. <span data-ttu-id="9566d-403">[Skapa ett program](active-directory-b2c-app-registration.md) att hämta ett-ID.</span><span class="sxs-lookup"><span data-stu-id="9566d-403">[Create an application](active-directory-b2c-app-registration.md) to obtain an application ID.</span></span> <span data-ttu-id="9566d-404">Inkludera en web app/webb-API i din app.</span><span class="sxs-lookup"><span data-stu-id="9566d-404">Include a web app/web API in your app.</span></span> <span data-ttu-id="9566d-405">Du kan också skapa ett programhemlighet.</span><span class="sxs-lookup"><span data-stu-id="9566d-405">Optionally, create an application secret.</span></span>
3. <span data-ttu-id="9566d-406">[Skapa dina principer](active-directory-b2c-reference-policies.md) att hämta principens namn.</span><span class="sxs-lookup"><span data-stu-id="9566d-406">[Create your policies](active-directory-b2c-reference-policies.md) to obtain your policy names.</span></span>


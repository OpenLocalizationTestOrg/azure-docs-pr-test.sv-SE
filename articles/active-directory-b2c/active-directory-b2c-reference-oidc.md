---
title: Webb-inloggning med OpenID Connect - Azure AD B2C | Microsoft Docs
description: "Skapa webbprogram med hjälp av hello Azure Active Directory-implementeringen av autentiseringsprotokollet för hello OpenID Connect"
services: active-directory-b2c
documentationcenter: 
author: saeedakhter-msft
manager: krassk
editor: parakhj
ms.assetid: 21d420c8-3c10-4319-b681-adf2e89e7ede
ms.service: active-directory-b2c
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 08/16/2017
ms.author: saeedakhter-msft
ms.openlocfilehash: 89e9cfa28e4e5c34304aea355cca2dd0c4b42abc
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: sv-SE
ms.lasthandoff: 10/06/2017
---
# <a name="azure-active-directory-b2c-web-sign-in-with-openid-connect"></a><span data-ttu-id="76f8f-103">Azure Active Directory B2C: Web inloggning med OpenID Connect</span><span class="sxs-lookup"><span data-stu-id="76f8f-103">Azure Active Directory B2C: Web sign-in with OpenID Connect</span></span>
<span data-ttu-id="76f8f-104">OpenID Connect är ett autentiseringsprotokoll som bygger på OAuth 2.0 genom att använda toosecurely logga användare i tooweb program.</span><span class="sxs-lookup"><span data-stu-id="76f8f-104">OpenID Connect is an authentication protocol, built on top of OAuth 2.0, that can be used toosecurely sign users in tooweb applications.</span></span> <span data-ttu-id="76f8f-105">Du kan flytta över registrering, inloggning med hjälp av hello Azure Active Directory B2C (Azure AD B2C) implementering av OpenID Connect och andra Identitetshantering upplever i ditt webbprogram program tooAzure Active Directory (AD Azure).</span><span class="sxs-lookup"><span data-stu-id="76f8f-105">By using hello Azure Active Directory B2C (Azure AD B2C) implementation of OpenID Connect, you can outsource sign-up, sign-in, and other identity management experiences in your web applications tooAzure Active Directory (Azure AD).</span></span> <span data-ttu-id="76f8f-106">Den här guiden visar hur toodo så på ett språkoberoende sätt.</span><span class="sxs-lookup"><span data-stu-id="76f8f-106">This guide shows you how toodo so in a language-independent manner.</span></span> <span data-ttu-id="76f8f-107">Beskriver hur toosend och ta emot HTTP-meddelanden utan att använda någon av våra bibliotek med öppen källkod.</span><span class="sxs-lookup"><span data-stu-id="76f8f-107">It describes how toosend and receive HTTP messages without using any of our open-source libraries.</span></span>

<span data-ttu-id="76f8f-108">[OpenID Connect](http://openid.net/specs/openid-connect-core-1_0.html) utökar hello OAuth 2.0 *auktorisering* protokoll som ska användas som en *autentisering* protokoll.</span><span class="sxs-lookup"><span data-stu-id="76f8f-108">[OpenID Connect](http://openid.net/specs/openid-connect-core-1_0.html) extends hello OAuth 2.0 *authorization* protocol for use as an *authentication* protocol.</span></span> <span data-ttu-id="76f8f-109">Detta ger dig tooperform enkel inloggning med hjälp av OAuth.</span><span class="sxs-lookup"><span data-stu-id="76f8f-109">This allows you tooperform single sign-on by using OAuth.</span></span> <span data-ttu-id="76f8f-110">Hello begreppet införs en *ID token*, vilket är en säkerhetstoken som gör hello klienten tooverify hello hello användares identitet och få grundläggande profilinformation om hello användare.</span><span class="sxs-lookup"><span data-stu-id="76f8f-110">It introduces hello concept of an *ID token*, which is a security token that allows hello client tooverify hello identity of hello user and obtain basic profile information about hello user.</span></span>

<span data-ttu-id="76f8f-111">Eftersom den utökar OAuth 2.0 kan också appar toosecurely hämta *åtkomst till token*.</span><span class="sxs-lookup"><span data-stu-id="76f8f-111">Because it extends OAuth 2.0, it also enables apps toosecurely acquire *access tokens*.</span></span> <span data-ttu-id="76f8f-112">Du kan använda access_tokens tooaccess resurser som skyddas av en [auktorisering server](active-directory-b2c-reference-protocols.md#the-basics).</span><span class="sxs-lookup"><span data-stu-id="76f8f-112">You can use access_tokens tooaccess resources that are secured by an [authorization server](active-directory-b2c-reference-protocols.md#the-basics).</span></span> <span data-ttu-id="76f8f-113">Vi rekommenderar OpenID Connect om du utvecklar ett program som finns på en server och öppnas via en webbläsare.</span><span class="sxs-lookup"><span data-stu-id="76f8f-113">We recommend OpenID Connect if you're building a web application that is hosted on a server and accessed through a browser.</span></span> <span data-ttu-id="76f8f-114">Om du vill tooadd identity management tooyour mobila eller stationära program med hjälp av Azure AD B2C kan du använda [OAuth 2.0](active-directory-b2c-reference-oauth-code.md) i stället för OpenID Connect.</span><span class="sxs-lookup"><span data-stu-id="76f8f-114">If you want tooadd identity management tooyour mobile or desktop applications by using Azure AD B2C, you should use [OAuth 2.0](active-directory-b2c-reference-oauth-code.md) rather than OpenID Connect.</span></span>

<span data-ttu-id="76f8f-115">Azure AD B2C utökar hello standard OpenID Connect protokollet toodo över enkel autentisering och auktorisering.</span><span class="sxs-lookup"><span data-stu-id="76f8f-115">Azure AD B2C extends hello standard OpenID Connect protocol toodo more than simple authentication and authorization.</span></span> <span data-ttu-id="76f8f-116">Det inför hello [parametern](active-directory-b2c-reference-policies.md), vilket gör att du toouse OpenID Connect tooadd användarupplevelser--som registrering, inloggning och profilhantering--tooyour app.</span><span class="sxs-lookup"><span data-stu-id="76f8f-116">It introduces hello [policy parameter](active-directory-b2c-reference-policies.md), which enables you toouse OpenID Connect tooadd user experiences--such as sign-up, sign-in, and profile management--tooyour app.</span></span> <span data-ttu-id="76f8f-117">Här kan vi hur du toouse OpenID Connect och principer tooimplement var och en av dessa funktioner i dina webbprogram.</span><span class="sxs-lookup"><span data-stu-id="76f8f-117">Here, we show you how toouse OpenID Connect and policies tooimplement each of these experiences in your web applications.</span></span> <span data-ttu-id="76f8f-118">Vi också lära dig hur tooget åtkomst-token för åtkomst till webb-API: er.</span><span class="sxs-lookup"><span data-stu-id="76f8f-118">We'll also show you how tooget access tokens for accessing web APIs.</span></span>

<span data-ttu-id="76f8f-119">hello exempel HTTP-begäranden i nästa avsnitt om hello använda våra exempel B2C-katalog, fabrikamb2c.onmicrosoft.com, samt våra exempelprogrammet, https://aadb2cplayground.azurewebsites.net och principer.</span><span class="sxs-lookup"><span data-stu-id="76f8f-119">hello example HTTP requests in hello next section use our sample B2C directory, fabrikamb2c.onmicrosoft.com, as well as our sample application, https://aadb2cplayground.azurewebsites.net, and policies.</span></span> <span data-ttu-id="76f8f-120">Du är ledig tootry ut hello begäranden själv med hjälp av dessa värden eller ersätta dem med dina egna.</span><span class="sxs-lookup"><span data-stu-id="76f8f-120">You're free tootry out hello requests yourself by using these values, or you can replace them with your own.</span></span>
<span data-ttu-id="76f8f-121">Lär dig hur för[kommer B2C-klient, program och principer](#use-your-own-b2c-directory).</span><span class="sxs-lookup"><span data-stu-id="76f8f-121">Learn how too[get your own B2C tenant, application, and policies](#use-your-own-b2c-directory).</span></span>

## <a name="send-authentication-requests"></a><span data-ttu-id="76f8f-122">Skicka autentiseringsbegäranden</span><span class="sxs-lookup"><span data-stu-id="76f8f-122">Send authentication requests</span></span>
<span data-ttu-id="76f8f-123">När ditt webbprogram måste tooauthenticate hello användare och köra en princip, den kan dirigera hello användaren toohello `/authorize` slutpunkt.</span><span class="sxs-lookup"><span data-stu-id="76f8f-123">When your web app needs tooauthenticate hello user and execute a policy, it can direct hello user toohello `/authorize` endpoint.</span></span> <span data-ttu-id="76f8f-124">Detta är hello interaktiva delen av hello flödet där hello användaren vidtar åtgärder beroende på hello princip.</span><span class="sxs-lookup"><span data-stu-id="76f8f-124">This is hello interactive portion of hello flow, where hello user takes action, depending on hello policy.</span></span>

<span data-ttu-id="76f8f-125">I den här förfrågan hello-klienten anger hello behörigheter måste tooacquire hello användaren i hello `scope` parametern och hello princip tooexecute i hello `p` parameter.</span><span class="sxs-lookup"><span data-stu-id="76f8f-125">In this request, hello client indicates hello permissions that it needs tooacquire from hello user in hello `scope` parameter and hello policy tooexecute in hello `p` parameter.</span></span> <span data-ttu-id="76f8f-126">Tre exempel tillhandahålls i hello följande avsnitt (med radbrytningar för att läsa), var och en med hjälp av en annan princip.</span><span class="sxs-lookup"><span data-stu-id="76f8f-126">Three examples are provided in hello following sections (with line breaks for readability), each using a different policy.</span></span> <span data-ttu-id="76f8f-127">tooget en känsla för hur fungerar varje begäran, försök klistra in hello i en webbläsare och körs.</span><span class="sxs-lookup"><span data-stu-id="76f8f-127">tooget a feel for how each request works, try pasting hello request into a browser and running it.</span></span>

#### <a name="use-a-sign-in-policy"></a><span data-ttu-id="76f8f-128">Använda en princip för inloggning</span><span class="sxs-lookup"><span data-stu-id="76f8f-128">Use a sign-in policy</span></span>
```
GET https://login.microsoftonline.com/fabrikamb2c.onmicrosoft.com/oauth2/v2.0/authorize?
client_id=90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6
&response_type=code+id_token
&redirect_uri=https%3A%2F%2Faadb2cplayground.azurewebsites.net%2F
&response_mode=form_post
&scope=openid%20offline_access
&state=arbitrary_data_you_can_receive_in_the_response
&nonce=12345
&p=b2c_1_sign_in
```

#### <a name="use-a-sign-up-policy"></a><span data-ttu-id="76f8f-129">Använda en princip för registrering</span><span class="sxs-lookup"><span data-stu-id="76f8f-129">Use a sign-up policy</span></span>
```
GET https://login.microsoftonline.com/fabrikamb2c.onmicrosoft.com/oauth2/v2.0/authorize?
client_id=90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6
&response_type=code+id_token
&redirect_uri=https%3A%2F%2Faadb2cplayground.azurewebsites.net%2F
&response_mode=form_post
&scope=openid%20offline_access
&state=arbitrary_data_you_can_receive_in_the_response
&nonce=12345
&p=b2c_1_sign_up
```

#### <a name="use-an-edit-profile-policy"></a><span data-ttu-id="76f8f-130">Använda en princip för Redigera-profil</span><span class="sxs-lookup"><span data-stu-id="76f8f-130">Use an edit-profile policy</span></span>
```
GET https://login.microsoftonline.com/fabrikamb2c.onmicrosoft.com/oauth2/v2.0/authorize?
client_id=90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6
&response_type=code+id_token
&redirect_uri=https%3A%2F%2Faadb2cplayground.azurewebsites.net%2F
&response_mode=form_post
&scope=openid%20offline_access
&state=arbitrary_data_you_can_receive_in_the_response
&nonce=12345
&p=b2c_1_edit_profile
```

| <span data-ttu-id="76f8f-131">Parameter</span><span class="sxs-lookup"><span data-stu-id="76f8f-131">Parameter</span></span> | <span data-ttu-id="76f8f-132">Krävs?</span><span class="sxs-lookup"><span data-stu-id="76f8f-132">Required?</span></span> | <span data-ttu-id="76f8f-133">Beskrivning</span><span class="sxs-lookup"><span data-stu-id="76f8f-133">Description</span></span> |
| --- | --- | --- |
| <span data-ttu-id="76f8f-134">client_id</span><span class="sxs-lookup"><span data-stu-id="76f8f-134">client_id</span></span> |<span data-ttu-id="76f8f-135">Krävs</span><span class="sxs-lookup"><span data-stu-id="76f8f-135">Required</span></span> |<span data-ttu-id="76f8f-136">hello program-ID som hello [Azure-portalen](https://portal.azure.com/) tilldelade tooyour app.</span><span class="sxs-lookup"><span data-stu-id="76f8f-136">hello application ID that hello [Azure portal](https://portal.azure.com/) assigned tooyour app.</span></span> |
| <span data-ttu-id="76f8f-137">response_type</span><span class="sxs-lookup"><span data-stu-id="76f8f-137">response_type</span></span> |<span data-ttu-id="76f8f-138">Krävs</span><span class="sxs-lookup"><span data-stu-id="76f8f-138">Required</span></span> |<span data-ttu-id="76f8f-139">hello svarstyp som måste innehålla en ID-token för OpenID Connect.</span><span class="sxs-lookup"><span data-stu-id="76f8f-139">hello response type, which must include an ID token for OpenID Connect.</span></span> <span data-ttu-id="76f8f-140">Om ditt webbprogram måste också token för att anropa ett webb-API, kan du använda `code+id_token`eftersom vi har gjort här.</span><span class="sxs-lookup"><span data-stu-id="76f8f-140">If your web app also needs tokens for calling a web API, you can use `code+id_token`, as we've done here.</span></span> |
| <span data-ttu-id="76f8f-141">redirect_uri</span><span class="sxs-lookup"><span data-stu-id="76f8f-141">redirect_uri</span></span> |<span data-ttu-id="76f8f-142">Rekommenderas</span><span class="sxs-lookup"><span data-stu-id="76f8f-142">Recommended</span></span> |<span data-ttu-id="76f8f-143">Hej `redirect_uri` parameter för din app, där autentisering svar kan skickas och tas emot av din app.</span><span class="sxs-lookup"><span data-stu-id="76f8f-143">hello `redirect_uri` parameter of your app, where authentication responses can be sent and received by your app.</span></span> <span data-ttu-id="76f8f-144">Den måste matcha en hello `redirect_uri` parametrar som du har registrerat i hello portal, förutom att det måste vara URL-kodade.</span><span class="sxs-lookup"><span data-stu-id="76f8f-144">It must exactly match one of hello `redirect_uri` parameters that you registered in hello portal, except that it must be URL encoded.</span></span> |
| <span data-ttu-id="76f8f-145">Omfång</span><span class="sxs-lookup"><span data-stu-id="76f8f-145">scope</span></span> |<span data-ttu-id="76f8f-146">Krävs</span><span class="sxs-lookup"><span data-stu-id="76f8f-146">Required</span></span> |<span data-ttu-id="76f8f-147">En blankstegsavgränsad lista över scope.</span><span class="sxs-lookup"><span data-stu-id="76f8f-147">A space-separated list of scopes.</span></span> <span data-ttu-id="76f8f-148">Ett enda scope-värde som anger tooAzure AD både behörigheter som krävs.</span><span class="sxs-lookup"><span data-stu-id="76f8f-148">A single scope value indicates tooAzure AD both permissions that are being requested.</span></span> <span data-ttu-id="76f8f-149">Hej `openid` omfång anger en behörighet toosign i hello användar- och hämta data om hello användaren i hello form av ID-token (mer toocome på den här hello nedan).</span><span class="sxs-lookup"><span data-stu-id="76f8f-149">hello `openid` scope indicates a permission toosign in hello user and get data about hello user in hello form of ID tokens (more toocome on this later in hello article).</span></span> <span data-ttu-id="76f8f-150">Hej `offline_access` scope är valfritt för webbprogram.</span><span class="sxs-lookup"><span data-stu-id="76f8f-150">hello `offline_access` scope is optional for web apps.</span></span> <span data-ttu-id="76f8f-151">Anger det att din app måste en *uppdateringstoken* för långlivade åtkomst tooresources.</span><span class="sxs-lookup"><span data-stu-id="76f8f-151">It indicates that your app will need a *refresh token* for long-lived access tooresources.</span></span> |
| <span data-ttu-id="76f8f-152">response_mode</span><span class="sxs-lookup"><span data-stu-id="76f8f-152">response_mode</span></span> |<span data-ttu-id="76f8f-153">Rekommenderas</span><span class="sxs-lookup"><span data-stu-id="76f8f-153">Recommended</span></span> |<span data-ttu-id="76f8f-154">hello-metod som ska använda toosend hello resulterande auktorisering kod tillbaka tooyour app.</span><span class="sxs-lookup"><span data-stu-id="76f8f-154">hello method that should be used toosend hello resulting authorization code back tooyour app.</span></span> <span data-ttu-id="76f8f-155">Det kan vara antingen `query`, `form_post`, eller `fragment`.</span><span class="sxs-lookup"><span data-stu-id="76f8f-155">It can be either `query`, `form_post`, or `fragment`.</span></span>  <span data-ttu-id="76f8f-156">Hej `form_post` svar läge rekommenderas för bästa säkerhet.</span><span class="sxs-lookup"><span data-stu-id="76f8f-156">hello `form_post` response mode is recommended for best security.</span></span> |
| <span data-ttu-id="76f8f-157">state</span><span class="sxs-lookup"><span data-stu-id="76f8f-157">state</span></span> |<span data-ttu-id="76f8f-158">Rekommenderas</span><span class="sxs-lookup"><span data-stu-id="76f8f-158">Recommended</span></span> |<span data-ttu-id="76f8f-159">Ett värde som ingår i hello-begäran som returneras också hello token svar.</span><span class="sxs-lookup"><span data-stu-id="76f8f-159">A value included in hello request that is also returned in hello token response.</span></span> <span data-ttu-id="76f8f-160">Det kan vara en sträng med innehåll som du vill använda.</span><span class="sxs-lookup"><span data-stu-id="76f8f-160">It can be a string of any content that you want.</span></span> <span data-ttu-id="76f8f-161">Ett slumpmässigt genererat unikt värde används vanligtvis för att förhindra attacker med förfalskning av begäran.</span><span class="sxs-lookup"><span data-stu-id="76f8f-161">A randomly generated unique value is typically used for preventing cross-site request forgery attacks.</span></span> <span data-ttu-id="76f8f-162">hello tillstånd är också används tooencode information om hello användarens tillstånd i hello app innan hello autentiseringsbegäran inträffade, exempelvis hello sidan de befann sig i.</span><span class="sxs-lookup"><span data-stu-id="76f8f-162">hello state is also used tooencode information about hello user's state in hello app before hello authentication request occurred, such as hello page they were on.</span></span> |
| <span data-ttu-id="76f8f-163">temporärt ID</span><span class="sxs-lookup"><span data-stu-id="76f8f-163">nonce</span></span> |<span data-ttu-id="76f8f-164">Krävs</span><span class="sxs-lookup"><span data-stu-id="76f8f-164">Required</span></span> |<span data-ttu-id="76f8f-165">Ett värde som ingår i hello-begäran (genereras av hello app) som ska tas med i hello resulterande ID-token som ett anspråk.</span><span class="sxs-lookup"><span data-stu-id="76f8f-165">A value included in hello request (generated by hello app) that will be included in hello resulting ID token as a claim.</span></span> <span data-ttu-id="76f8f-166">hello app kan kontrollera det här värdet toomitigate token replay-attacker.</span><span class="sxs-lookup"><span data-stu-id="76f8f-166">hello app can then verify this value toomitigate token replay attacks.</span></span> <span data-ttu-id="76f8f-167">hello-värdet är vanligtvis en slumpmässig unik sträng som kan använda tooidentify hello ursprung hello-begäran.</span><span class="sxs-lookup"><span data-stu-id="76f8f-167">hello value is typically a randomized unique string that can be used tooidentify hello origin of hello request.</span></span> |
| <span data-ttu-id="76f8f-168">P</span><span class="sxs-lookup"><span data-stu-id="76f8f-168">p</span></span> |<span data-ttu-id="76f8f-169">Krävs</span><span class="sxs-lookup"><span data-stu-id="76f8f-169">Required</span></span> |<span data-ttu-id="76f8f-170">hello-princip som kommer att utföras.</span><span class="sxs-lookup"><span data-stu-id="76f8f-170">hello policy that will be executed.</span></span> <span data-ttu-id="76f8f-171">Det är hello namnet på en princip som skapas i din B2C-klient.</span><span class="sxs-lookup"><span data-stu-id="76f8f-171">It is hello name of a policy that is created in your B2C tenant.</span></span> <span data-ttu-id="76f8f-172">hello principvärdet namn måste börja med `b2c\_1\_`.</span><span class="sxs-lookup"><span data-stu-id="76f8f-172">hello policy name value should begin with `b2c\_1\_`.</span></span> <span data-ttu-id="76f8f-173">Lär dig mer om principer och hello [expanderbara principramverk](active-directory-b2c-reference-policies.md).</span><span class="sxs-lookup"><span data-stu-id="76f8f-173">Learn more about policies and hello [extensible policy framework](active-directory-b2c-reference-policies.md).</span></span> |
| <span data-ttu-id="76f8f-174">kommandotolk</span><span class="sxs-lookup"><span data-stu-id="76f8f-174">prompt</span></span> |<span data-ttu-id="76f8f-175">Valfri</span><span class="sxs-lookup"><span data-stu-id="76f8f-175">Optional</span></span> |<span data-ttu-id="76f8f-176">hello typ av användarinteraktion som krävs.</span><span class="sxs-lookup"><span data-stu-id="76f8f-176">hello type of user interaction that is required.</span></span> <span data-ttu-id="76f8f-177">hello enda giltiga värdet just nu är `login`, vilket framtvingar hello användaren tooenter sina autentiseringsuppgifter på begäran.</span><span class="sxs-lookup"><span data-stu-id="76f8f-177">hello only valid value at this time is `login`, which forces hello user tooenter their credentials on that request.</span></span> <span data-ttu-id="76f8f-178">Enkel inloggning börjar inte gälla.</span><span class="sxs-lookup"><span data-stu-id="76f8f-178">Single sign-on will not take effect.</span></span> |

<span data-ttu-id="76f8f-179">Nu uppmanas användaren hello toocomplete hello princip arbetsflöde.</span><span class="sxs-lookup"><span data-stu-id="76f8f-179">At this point, hello user is asked toocomplete hello policy's workflow.</span></span> <span data-ttu-id="76f8f-180">Detta kan omfatta hello användaren att ange sina användarnamn och lösenord, logga in med en sociala identitet registrerar sig för hello directory eller ett annat nummer av steg, beroende på hur hello princip har definierats.</span><span class="sxs-lookup"><span data-stu-id="76f8f-180">This might involve hello user entering their username and password, signing in with a social identity, signing up for hello directory, or any other number of steps, depending on how hello policy is defined.</span></span>

<span data-ttu-id="76f8f-181">När hello användaren Slutför hello princip, Azure AD tillbaka ett svar tooyour app på hello anges `redirect_uri` parameter med hello-metod som har angetts i hello `response_mode` parameter.</span><span class="sxs-lookup"><span data-stu-id="76f8f-181">After hello user completes hello policy, Azure AD returns a response tooyour app at hello indicated `redirect_uri` parameter, by using hello method that is specified in hello `response_mode` parameter.</span></span> <span data-ttu-id="76f8f-182">hello svar är hello samma för alla hello föregående fall, oberoende av hello-princip som körs.</span><span class="sxs-lookup"><span data-stu-id="76f8f-182">hello response is hello same for each of hello preceding cases, independent of hello policy that is executed.</span></span>

<span data-ttu-id="76f8f-183">Ett lyckat svar med `response_mode=fragment` skulle se ut:</span><span class="sxs-lookup"><span data-stu-id="76f8f-183">A successful response using `response_mode=fragment` would look like:</span></span>

```
GET https://aadb2cplayground.azurewebsites.net/#
id_token=eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6Ik5HVEZ2ZEstZnl0aEV1Q...
&code=AwABAAAAvPM1KaPlrEqdFSBzjqfTGBCmLdgfSTLEMPGYuNHSUYBrq...
&state=arbitrary_data_you_can_receive_in_the_response
```

| <span data-ttu-id="76f8f-184">Parameter</span><span class="sxs-lookup"><span data-stu-id="76f8f-184">Parameter</span></span> | <span data-ttu-id="76f8f-185">Beskrivning</span><span class="sxs-lookup"><span data-stu-id="76f8f-185">Description</span></span> |
| --- | --- |
| <span data-ttu-id="76f8f-186">id_token</span><span class="sxs-lookup"><span data-stu-id="76f8f-186">id_token</span></span> |<span data-ttu-id="76f8f-187">Hej ID-token som hello app som begärdes.</span><span class="sxs-lookup"><span data-stu-id="76f8f-187">hello ID token that hello app requested.</span></span> <span data-ttu-id="76f8f-188">Du kan använda hello ID token tooverify hello användarens identitet och starta en session med hello användare.</span><span class="sxs-lookup"><span data-stu-id="76f8f-188">You can use hello ID token tooverify hello user's identity and begin a session with hello user.</span></span> <span data-ttu-id="76f8f-189">Mer information om ID-token och deras innehåll ingår i hello [Azure AD B2C tokenreferens](active-directory-b2c-reference-tokens.md).</span><span class="sxs-lookup"><span data-stu-id="76f8f-189">More details on ID tokens and their contents are included in hello [Azure AD B2C token reference](active-directory-b2c-reference-tokens.md).</span></span> |
| <span data-ttu-id="76f8f-190">Koden</span><span class="sxs-lookup"><span data-stu-id="76f8f-190">code</span></span> |<span data-ttu-id="76f8f-191">hello auktorisering code hello appen begärs, om du har använt `response_type=code+id_token`.</span><span class="sxs-lookup"><span data-stu-id="76f8f-191">hello authorization code that hello app requested, if you used `response_type=code+id_token`.</span></span> <span data-ttu-id="76f8f-192">hello app kan använda hello auktorisering koden toorequest en åtkomst-token för en målresurs.</span><span class="sxs-lookup"><span data-stu-id="76f8f-192">hello app can use hello authorization code toorequest an access token for a target resource.</span></span> <span data-ttu-id="76f8f-193">Auktoriseringskoder är mycket tillfällig.</span><span class="sxs-lookup"><span data-stu-id="76f8f-193">Authorization codes are very short-lived.</span></span> <span data-ttu-id="76f8f-194">Vanligtvis de går ut efter 10 minuter.</span><span class="sxs-lookup"><span data-stu-id="76f8f-194">Typically, they expire after about 10 minutes.</span></span> |
| <span data-ttu-id="76f8f-195">state</span><span class="sxs-lookup"><span data-stu-id="76f8f-195">state</span></span> |<span data-ttu-id="76f8f-196">Om en `state` parametern ingår i hello begäran hello samma värde som ska visas i hello svar.</span><span class="sxs-lookup"><span data-stu-id="76f8f-196">If a `state` parameter is included in hello request, hello same value should appear in hello response.</span></span> <span data-ttu-id="76f8f-197">hello app bör kontrollera att hello `state` värden i hello förfrågan och svar är identiska.</span><span class="sxs-lookup"><span data-stu-id="76f8f-197">hello app should verify that hello `state` values in hello request and response are identical.</span></span> |

<span data-ttu-id="76f8f-198">Felsvar kan även skickas toohello `redirect_uri` parameter så hello appen kan hantera dem på rätt sätt:</span><span class="sxs-lookup"><span data-stu-id="76f8f-198">Error responses can also be sent toohello `redirect_uri` parameter so that hello app can handle them appropriately:</span></span>

```
GET https://aadb2cplayground.azurewebsites.net/#
error=access_denied
&error_description=the+user+canceled+the+authentication
&state=arbitrary_data_you_can_receive_in_the_response
```

| <span data-ttu-id="76f8f-199">Parameter</span><span class="sxs-lookup"><span data-stu-id="76f8f-199">Parameter</span></span> | <span data-ttu-id="76f8f-200">Beskrivning</span><span class="sxs-lookup"><span data-stu-id="76f8f-200">Description</span></span> |
| --- | --- |
| <span data-ttu-id="76f8f-201">fel</span><span class="sxs-lookup"><span data-stu-id="76f8f-201">error</span></span> |<span data-ttu-id="76f8f-202">En felkod sträng som kan använda tooclassify typer av fel som inträffar och som kan vara används tooreact tooerrors.</span><span class="sxs-lookup"><span data-stu-id="76f8f-202">An error-code string that can be used tooclassify types of errors that occur and that can be used tooreact tooerrors.</span></span> |
| <span data-ttu-id="76f8f-203">error_description</span><span class="sxs-lookup"><span data-stu-id="76f8f-203">error_description</span></span> |<span data-ttu-id="76f8f-204">Ett felmeddelande som kan hjälpa utvecklare identifiera hello grundorsaken till ett autentiseringsfel.</span><span class="sxs-lookup"><span data-stu-id="76f8f-204">A specific error message that can help a developer identify hello root cause of an authentication error.</span></span> |
| <span data-ttu-id="76f8f-205">state</span><span class="sxs-lookup"><span data-stu-id="76f8f-205">state</span></span> |<span data-ttu-id="76f8f-206">Se hello fullständig beskrivning i hello första tabellen i det här avsnittet.</span><span class="sxs-lookup"><span data-stu-id="76f8f-206">See hello full description in hello first table in this section.</span></span> <span data-ttu-id="76f8f-207">Om en `state` parametern ingår i hello begäran hello samma värde som ska visas i hello svar.</span><span class="sxs-lookup"><span data-stu-id="76f8f-207">If a `state` parameter is included in hello request, hello same value should appear in hello response.</span></span> <span data-ttu-id="76f8f-208">hello app bör kontrollera att hello `state` värden i hello förfrågan och svar är identiska.</span><span class="sxs-lookup"><span data-stu-id="76f8f-208">hello app should verify that hello `state` values in hello request and response are identical.</span></span> |

## <a name="validate-hello-id-token"></a><span data-ttu-id="76f8f-209">Validera hello-ID-token</span><span class="sxs-lookup"><span data-stu-id="76f8f-209">Validate hello ID token</span></span>
<span data-ttu-id="76f8f-210">Bara tar emot en token med ID: T är inte tillräckligt med tooauthenticate hello-användare.</span><span class="sxs-lookup"><span data-stu-id="76f8f-210">Just receiving an ID token is not enough tooauthenticate hello user.</span></span> <span data-ttu-id="76f8f-211">Du måste verifiera signaturen för hello-ID-token och kontrollera hello anspråk i hello token per krav som din app.</span><span class="sxs-lookup"><span data-stu-id="76f8f-211">You must validate hello ID token's signature and verify hello claims in hello token per your app's requirements.</span></span> <span data-ttu-id="76f8f-212">Azure AD B2C använder [JSON Web token (JWTs)](http://self-issued.info/docs/draft-ietf-oauth-json-web-token.html) och offentlig nyckel kryptografi toosign token och kontrollera att de är giltiga.</span><span class="sxs-lookup"><span data-stu-id="76f8f-212">Azure AD B2C uses [JSON Web Tokens (JWTs)](http://self-issued.info/docs/draft-ietf-oauth-json-web-token.html) and public key cryptography toosign tokens and verify that they are valid.</span></span>

<span data-ttu-id="76f8f-213">Det finns många öppen källkod bibliotek som är tillgängliga för att validera JWTs, beroende på ditt språk preferensordning.</span><span class="sxs-lookup"><span data-stu-id="76f8f-213">There are many open-source libraries that are available for validating JWTs, depending on your language of preference.</span></span> <span data-ttu-id="76f8f-214">Vi rekommenderar att utforska alternativen i stället för att implementera din egen valideringslogik.</span><span class="sxs-lookup"><span data-stu-id="76f8f-214">We recommend exploring those options rather than implementing your own validation logic.</span></span> <span data-ttu-id="76f8f-215">hello information här kan vara användbart i räkna ut hur tooproperly använder dessa bibliotek.</span><span class="sxs-lookup"><span data-stu-id="76f8f-215">hello information here will be useful in figuring out how tooproperly use those libraries.</span></span>

<span data-ttu-id="76f8f-216">Azure AD B2C har OpenID Connect metadata slutpunkt, vilket gör att en app toofetch information om Azure AD B2C vid körning.</span><span class="sxs-lookup"><span data-stu-id="76f8f-216">Azure AD B2C has an OpenID Connect metadata endpoint, which allows an app toofetch information about Azure AD B2C at runtime.</span></span> <span data-ttu-id="76f8f-217">Informationen omfattar slutpunkter, token innehåll och nycklar för tokensignering.</span><span class="sxs-lookup"><span data-stu-id="76f8f-217">This information includes endpoints, token contents, and token signing keys.</span></span> <span data-ttu-id="76f8f-218">Det finns en JSON-dokumentet för metadata för varje princip i din B2C-klient.</span><span class="sxs-lookup"><span data-stu-id="76f8f-218">There is a JSON metadata document for each policy in your B2C tenant.</span></span> <span data-ttu-id="76f8f-219">Till exempel hello Metadatadokumentet för hello `b2c_1_sign_in` princip i `fabrikamb2c.onmicrosoft.com` finns på:</span><span class="sxs-lookup"><span data-stu-id="76f8f-219">For example, hello metadata document for hello `b2c_1_sign_in` policy in `fabrikamb2c.onmicrosoft.com` is located at:</span></span>

`https://login.microsoftonline.com/fabrikamb2c.onmicrosoft.com/v2.0/.well-known/openid-configuration?p=b2c_1_sign_in`

<span data-ttu-id="76f8f-220">En av hello egenskaperna för den här konfigurationsdokument är `jwks_uri`, vars värde för hello samma princip skulle vara:</span><span class="sxs-lookup"><span data-stu-id="76f8f-220">One of hello properties of this configuration document is `jwks_uri`, whose value for hello same policy would be:</span></span>

<span data-ttu-id="76f8f-221">`https://login.microsoftonline.com/fabrikamb2c.onmicrosoft.com/discovery/v2.0/keys?p=b2c_1_sign_in`.</span><span class="sxs-lookup"><span data-stu-id="76f8f-221">`https://login.microsoftonline.com/fabrikamb2c.onmicrosoft.com/discovery/v2.0/keys?p=b2c_1_sign_in`.</span></span>

<span data-ttu-id="76f8f-222">toodetermine vilken princip som användes i en ID-token-signering (och från där toofetch hello metadata), har du två alternativ.</span><span class="sxs-lookup"><span data-stu-id="76f8f-222">toodetermine which policy was used in signing an ID token (and from where toofetch hello metadata), you have two options.</span></span> <span data-ttu-id="76f8f-223">Först hello principnamn ingår i hello `acr` anspråk i hello-ID-token.</span><span class="sxs-lookup"><span data-stu-id="76f8f-223">First, hello policy name is included in hello `acr` claim in hello ID token.</span></span> <span data-ttu-id="76f8f-224">Information om hur tooparse hello anspråk från en ID-token finns hello [Azure AD B2C tokenreferens](active-directory-b2c-reference-tokens.md).</span><span class="sxs-lookup"><span data-stu-id="76f8f-224">For information on how tooparse hello claims from an ID token, see hello [Azure AD B2C token reference](active-directory-b2c-reference-tokens.md).</span></span> <span data-ttu-id="76f8f-225">Ett annat alternativ är tooencode hello princip i hello värdet för hello `state` parameter när du skickar hello begäran och sedan avkoda toodetermine vilken princip som har använts.</span><span class="sxs-lookup"><span data-stu-id="76f8f-225">Your other option is tooencode hello policy in hello value of hello `state` parameter when you issue hello request, and then decode it toodetermine which policy was used.</span></span> <span data-ttu-id="76f8f-226">Antingen metoden är giltig.</span><span class="sxs-lookup"><span data-stu-id="76f8f-226">Either method is valid.</span></span>

<span data-ttu-id="76f8f-227">När du har skaffat hello Metadatadokumentet från hello OpenID Connect metadataslutpunkten kan du använda hello 256 RSA-offentliga nycklar (som finns i den här slutpunkten) toovalidate hello signaturen för hello-ID-token.</span><span class="sxs-lookup"><span data-stu-id="76f8f-227">After you've acquired hello metadata document from hello OpenID Connect metadata endpoint, you can use hello RSA 256 public keys (which are located at this endpoint) toovalidate hello signature of hello ID token.</span></span> <span data-ttu-id="76f8f-228">Det kan finnas flera nycklar som anges i den här slutpunkten vid en viss tidpunkt, alla identifierade med ett `kid` anspråk.</span><span class="sxs-lookup"><span data-stu-id="76f8f-228">There might be multiple keys listed at this endpoint at any given point in time, each identified by a `kid` claim.</span></span> <span data-ttu-id="76f8f-229">hello rubriken för hello-ID-token innehåller också en `kid` anspråk, som anger vilken av dessa nycklar används toosign hello-ID-token.</span><span class="sxs-lookup"><span data-stu-id="76f8f-229">hello header of hello ID token also contains a `kid` claim, which indicates which of these keys was used toosign hello ID token.</span></span> <span data-ttu-id="76f8f-230">Mer information finns i hello [Azure AD B2C tokenreferens](active-directory-b2c-reference-tokens.md) (hello avsnitt på [verifiera token](active-directory-b2c-reference-tokens.md#token-validation), i synnerhet).</span><span class="sxs-lookup"><span data-stu-id="76f8f-230">For more information, see hello [Azure AD B2C token reference](active-directory-b2c-reference-tokens.md) (hello section on [validating tokens](active-directory-b2c-reference-tokens.md#token-validation), in particular).</span></span>
<!--TODO: Improve hello information on this-->

<span data-ttu-id="76f8f-231">När du har verifierats hello signaturen för hello-ID-token, finns det flera anspråk som du behöver tooverify.</span><span class="sxs-lookup"><span data-stu-id="76f8f-231">After you've validated hello signature of hello ID token, there are several claims that you need tooverify.</span></span> <span data-ttu-id="76f8f-232">Exempel:</span><span class="sxs-lookup"><span data-stu-id="76f8f-232">For instance:</span></span>

* <span data-ttu-id="76f8f-233">Du bör verifiera hello `nonce` anspråk tooprevent token replay-attacker.</span><span class="sxs-lookup"><span data-stu-id="76f8f-233">You should validate hello `nonce` claim tooprevent token replay attacks.</span></span> <span data-ttu-id="76f8f-234">Värdet ska du angav i hello inloggning begäran.</span><span class="sxs-lookup"><span data-stu-id="76f8f-234">Its value should be what you specified in hello sign-in request.</span></span>
* <span data-ttu-id="76f8f-235">Du bör verifiera hello `aud` anspråk tooensure som hello-ID-token har utfärdats för din app.</span><span class="sxs-lookup"><span data-stu-id="76f8f-235">You should validate hello `aud` claim tooensure that hello ID token was issued for your app.</span></span> <span data-ttu-id="76f8f-236">Värdet ska vara hello program-ID för din app.</span><span class="sxs-lookup"><span data-stu-id="76f8f-236">Its value should be hello application ID of your app.</span></span>
* <span data-ttu-id="76f8f-237">Du bör verifiera hello `iat` och `exp` anspråk tooensure som hello-ID-token inte har upphört att gälla.</span><span class="sxs-lookup"><span data-stu-id="76f8f-237">You should validate hello `iat` and `exp` claims tooensure that hello ID token has not expired.</span></span>

<span data-ttu-id="76f8f-238">Det finns också flera mer verifieringar som ska utföras.</span><span class="sxs-lookup"><span data-stu-id="76f8f-238">There are also several more validations that you should perform.</span></span> <span data-ttu-id="76f8f-239">Dessa beskrivs i detalj i hello [OpenID Connect Core Spec](http://openid.net/specs/openid-connect-core-1_0.html).  Du kan också toovalidate ytterligare anspråk, beroende på ditt scenario.</span><span class="sxs-lookup"><span data-stu-id="76f8f-239">These are described in detail in hello [OpenID Connect Core Spec](http://openid.net/specs/openid-connect-core-1_0.html).  You might also want toovalidate additional claims, depending on your scenario.</span></span> <span data-ttu-id="76f8f-240">Några vanliga verifieringar inkluderar:</span><span class="sxs-lookup"><span data-stu-id="76f8f-240">Some common validations include:</span></span>

* <span data-ttu-id="76f8f-241">Säkerställa som hello användare/organisation har registrerat dig för hello app.</span><span class="sxs-lookup"><span data-stu-id="76f8f-241">Ensuring that hello user/organization has signed up for hello app.</span></span>
* <span data-ttu-id="76f8f-242">Säkerställa hello användaren har rätt behörighet/privilegier.</span><span class="sxs-lookup"><span data-stu-id="76f8f-242">Ensuring that hello user has proper authorization/privileges.</span></span>
* <span data-ttu-id="76f8f-243">Se till att en viss styrkan hos autentisering har inträffat, till exempel Azure Multi-Factor Authentication.</span><span class="sxs-lookup"><span data-stu-id="76f8f-243">Ensuring that a certain strength of authentication has occurred, such as Azure Multi-Factor Authentication.</span></span>

<span data-ttu-id="76f8f-244">Mer information om hello anspråk i en ID-token finns hello [Azure AD B2C tokenreferens](active-directory-b2c-reference-tokens.md).</span><span class="sxs-lookup"><span data-stu-id="76f8f-244">For more information on hello claims in an ID token, see hello [Azure AD B2C token reference](active-directory-b2c-reference-tokens.md).</span></span>

<span data-ttu-id="76f8f-245">När du har validerat hello-ID-token kan du börja en session med hello användare.</span><span class="sxs-lookup"><span data-stu-id="76f8f-245">After you have validated hello ID token, you can begin a session with hello user.</span></span> <span data-ttu-id="76f8f-246">Du kan använda hello anspråk i hello ID token tooobtain information om hello användare i din app.</span><span class="sxs-lookup"><span data-stu-id="76f8f-246">You can use hello claims in hello ID token tooobtain information about hello user in your app.</span></span> <span data-ttu-id="76f8f-247">Användningsområden för den här informationen omfattar bildskärm, poster och auktorisering.</span><span class="sxs-lookup"><span data-stu-id="76f8f-247">Uses for this information include display, records, and authorization.</span></span>

## <a name="get-a-token"></a><span data-ttu-id="76f8f-248">Hämta en token</span><span class="sxs-lookup"><span data-stu-id="76f8f-248">Get a token</span></span>
<span data-ttu-id="76f8f-249">Om du behöver din web app tooonly köra principer, kan du hoppa över hello följande avsnitten.</span><span class="sxs-lookup"><span data-stu-id="76f8f-249">If you need your web app tooonly execute policies, you can skip hello next few sections.</span></span> <span data-ttu-id="76f8f-250">Dessa avsnitt är tillämpliga endast tooweb appar som behöver toomake autentiserade anrop tooa webb-API och också skyddas av Azure AD B2C.</span><span class="sxs-lookup"><span data-stu-id="76f8f-250">These sections are applicable only tooweb apps that need toomake authenticated calls tooa web API and are also protected by Azure AD B2C.</span></span>

<span data-ttu-id="76f8f-251">Du kan lösa hello auktoriseringskod som du har köpt (med hjälp av `response_type=code+id_token`) för en token toohello önskad resursen genom att skicka en `POST` begära toohello `/token` slutpunkt.</span><span class="sxs-lookup"><span data-stu-id="76f8f-251">You can redeem hello authorization code that you acquired (by using `response_type=code+id_token`) for a token toohello desired resource by sending a `POST` request toohello `/token` endpoint.</span></span> <span data-ttu-id="76f8f-252">Är för närvarande hello resursen som du kan begära en token för ditt Apps egen backend-webb-API.</span><span class="sxs-lookup"><span data-stu-id="76f8f-252">Currently, hello only resource that you can request a token for is your app's own back-end web API.</span></span> <span data-ttu-id="76f8f-253">hello-konventionen för att begära en token tooyourself är toouse appens klient-ID som hello omfattning:</span><span class="sxs-lookup"><span data-stu-id="76f8f-253">hello convention for requesting a token tooyourself is toouse your app's client ID as hello scope:</span></span>

```
POST fabrikamb2c.onmicrosoft.com/oauth2/v2.0/token?p=b2c_1_sign_in HTTP/1.1
Host: https://login.microsoftonline.com
Content-Type: application/x-www-form-urlencoded

grant_type=authorization_code&client_id=90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6&scope=90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6 offline_access&code=AwABAAAAvPM1KaPlrEqdFSBzjqfTGBCmLdgfSTLEMPGYuNHSUYBrq...&redirect_uri=urn:ietf:wg:oauth:2.0:oob&client_secret=<your-application-secret>

```

| <span data-ttu-id="76f8f-254">Parameter</span><span class="sxs-lookup"><span data-stu-id="76f8f-254">Parameter</span></span> | <span data-ttu-id="76f8f-255">Krävs?</span><span class="sxs-lookup"><span data-stu-id="76f8f-255">Required?</span></span> | <span data-ttu-id="76f8f-256">Beskrivning</span><span class="sxs-lookup"><span data-stu-id="76f8f-256">Description</span></span> |
| --- | --- | --- |
| <span data-ttu-id="76f8f-257">P</span><span class="sxs-lookup"><span data-stu-id="76f8f-257">p</span></span> |<span data-ttu-id="76f8f-258">Krävs</span><span class="sxs-lookup"><span data-stu-id="76f8f-258">Required</span></span> |<span data-ttu-id="76f8f-259">Hej princip som har använt tooacquire hello auktorisering kod.</span><span class="sxs-lookup"><span data-stu-id="76f8f-259">hello policy that was used tooacquire hello authorization code.</span></span> <span data-ttu-id="76f8f-260">Du kan inte använda en annan princip i den här förfrågan.</span><span class="sxs-lookup"><span data-stu-id="76f8f-260">You cannot use a different policy in this request.</span></span> <span data-ttu-id="76f8f-261">Observera att du lägger till den här parametern toohello frågesträng, inte toohello `POST` brödtext.</span><span class="sxs-lookup"><span data-stu-id="76f8f-261">Note that you add this parameter toohello query string, not toohello `POST` body.</span></span> |
| <span data-ttu-id="76f8f-262">client_id</span><span class="sxs-lookup"><span data-stu-id="76f8f-262">client_id</span></span> |<span data-ttu-id="76f8f-263">Krävs</span><span class="sxs-lookup"><span data-stu-id="76f8f-263">Required</span></span> |<span data-ttu-id="76f8f-264">hello program-ID som hello [Azure-portalen](https://portal.azure.com/) tilldelade tooyour app.</span><span class="sxs-lookup"><span data-stu-id="76f8f-264">hello application ID that hello [Azure portal](https://portal.azure.com/) assigned tooyour app.</span></span> |
| <span data-ttu-id="76f8f-265">grant_type</span><span class="sxs-lookup"><span data-stu-id="76f8f-265">grant_type</span></span> |<span data-ttu-id="76f8f-266">Krävs</span><span class="sxs-lookup"><span data-stu-id="76f8f-266">Required</span></span> |<span data-ttu-id="76f8f-267">Hej typ av bevilja som måste vara `authorization_code` för hello-auktoriseringskodflödet.</span><span class="sxs-lookup"><span data-stu-id="76f8f-267">hello type of grant, which must be `authorization_code` for hello authorization code flow.</span></span> |
| <span data-ttu-id="76f8f-268">Omfång</span><span class="sxs-lookup"><span data-stu-id="76f8f-268">scope</span></span> |<span data-ttu-id="76f8f-269">Rekommenderas</span><span class="sxs-lookup"><span data-stu-id="76f8f-269">Recommended</span></span> |<span data-ttu-id="76f8f-270">En blankstegsavgränsad lista över scope.</span><span class="sxs-lookup"><span data-stu-id="76f8f-270">A space-separated list of scopes.</span></span> <span data-ttu-id="76f8f-271">Ett enda scope-värde som anger tooAzure AD både behörigheter som krävs.</span><span class="sxs-lookup"><span data-stu-id="76f8f-271">A single scope value indicates tooAzure AD both permissions that are being requested.</span></span> <span data-ttu-id="76f8f-272">Hej `openid` omfång anger en behörighet toosign i hello användar- och hämta data om hello användaren i hello form av id_token parametrar.</span><span class="sxs-lookup"><span data-stu-id="76f8f-272">hello `openid` scope indicates a permission toosign in hello user and get data about hello user in hello form of id_token parameters.</span></span> <span data-ttu-id="76f8f-273">Det kan vara används tooget token tooyour Apps egen backend-webb-API, som representeras av hello samma program-ID som hello-klient.</span><span class="sxs-lookup"><span data-stu-id="76f8f-273">It can be used tooget tokens tooyour app's own back-end web API, which is represented by hello same application ID as hello client.</span></span> <span data-ttu-id="76f8f-274">Hej `offline_access` omfång anger att din app behöver en uppdateringstoken för långlivade åtkomst tooresources.</span><span class="sxs-lookup"><span data-stu-id="76f8f-274">hello `offline_access` scope indicates that your app will need a refresh token for long-lived access tooresources.</span></span> |
| <span data-ttu-id="76f8f-275">Koden</span><span class="sxs-lookup"><span data-stu-id="76f8f-275">code</span></span> |<span data-ttu-id="76f8f-276">Krävs</span><span class="sxs-lookup"><span data-stu-id="76f8f-276">Required</span></span> |<span data-ttu-id="76f8f-277">hello auktoriseringskod som du har införskaffade i hello första del av hello flödet.</span><span class="sxs-lookup"><span data-stu-id="76f8f-277">hello authorization code that you acquired in hello first leg of hello flow.</span></span> |
| <span data-ttu-id="76f8f-278">redirect_uri</span><span class="sxs-lookup"><span data-stu-id="76f8f-278">redirect_uri</span></span> |<span data-ttu-id="76f8f-279">Krävs</span><span class="sxs-lookup"><span data-stu-id="76f8f-279">Required</span></span> |<span data-ttu-id="76f8f-280">Hej `redirect_uri` parametern för hello program som du fick hello auktoriseringskod.</span><span class="sxs-lookup"><span data-stu-id="76f8f-280">hello `redirect_uri` parameter of hello application where you received hello authorization code.</span></span> |
| <span data-ttu-id="76f8f-281">client_secret</span><span class="sxs-lookup"><span data-stu-id="76f8f-281">client_secret</span></span> |<span data-ttu-id="76f8f-282">Krävs</span><span class="sxs-lookup"><span data-stu-id="76f8f-282">Required</span></span> |<span data-ttu-id="76f8f-283">Hej programhemlighet som du genererade på hello [Azure-portalen](https://portal.azure.com/).</span><span class="sxs-lookup"><span data-stu-id="76f8f-283">hello application secret that you generated in hello [Azure portal](https://portal.azure.com/).</span></span> <span data-ttu-id="76f8f-284">Den här programhemligheten är en viktig säkerhetsuppgift artefakt.</span><span class="sxs-lookup"><span data-stu-id="76f8f-284">This application secret is an important security artifact.</span></span> <span data-ttu-id="76f8f-285">Du bör lagra den på ett säkert sätt på din server.</span><span class="sxs-lookup"><span data-stu-id="76f8f-285">You should store it securely on your server.</span></span> <span data-ttu-id="76f8f-286">Du bör också rotera denna klienthemlighet regelbundet.</span><span class="sxs-lookup"><span data-stu-id="76f8f-286">You should also rotate this client secret on a periodic basis.</span></span> |

<span data-ttu-id="76f8f-287">Det ser ut som ett lyckat token svar:</span><span class="sxs-lookup"><span data-stu-id="76f8f-287">A successful token response looks like:</span></span>

```
{
    "not_before": "1442340812",
    "token_type": "Bearer",
    "access_token": "eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6Ik5HVEZ2ZEstZnl0aEV1Q...",
    "scope": "90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6 offline_access",
    "expires_in": "3600",
    "refresh_token": "AAQfQmvuDy8WtUv-sd0TBwWVQs1rC-Lfxa_NDkLqpg50Cxp5Dxj0VPF1mx2Z...",
}
```
| <span data-ttu-id="76f8f-288">Parameter</span><span class="sxs-lookup"><span data-stu-id="76f8f-288">Parameter</span></span> | <span data-ttu-id="76f8f-289">Beskrivning</span><span class="sxs-lookup"><span data-stu-id="76f8f-289">Description</span></span> |
| --- | --- |
| <span data-ttu-id="76f8f-290">not_before</span><span class="sxs-lookup"><span data-stu-id="76f8f-290">not_before</span></span> |<span data-ttu-id="76f8f-291">hello tid vid vilken hello token betraktas som giltigt epok tidpunkt.</span><span class="sxs-lookup"><span data-stu-id="76f8f-291">hello time at which hello token is considered valid, in epoch time.</span></span> |
| <span data-ttu-id="76f8f-292">token_type</span><span class="sxs-lookup"><span data-stu-id="76f8f-292">token_type</span></span> |<span data-ttu-id="76f8f-293">hello tokentypen värde.</span><span class="sxs-lookup"><span data-stu-id="76f8f-293">hello token type value.</span></span> <span data-ttu-id="76f8f-294">Hej typ som har stöd för Azure AD är `Bearer`.</span><span class="sxs-lookup"><span data-stu-id="76f8f-294">hello only type that Azure AD supports is `Bearer`.</span></span> |
| <span data-ttu-id="76f8f-295">access_token</span><span class="sxs-lookup"><span data-stu-id="76f8f-295">access_token</span></span> |<span data-ttu-id="76f8f-296">hello signerade JWT-token som du har begärt.</span><span class="sxs-lookup"><span data-stu-id="76f8f-296">hello signed JWT token that you requested.</span></span> |
| <span data-ttu-id="76f8f-297">Omfång</span><span class="sxs-lookup"><span data-stu-id="76f8f-297">scope</span></span> |<span data-ttu-id="76f8f-298">hello scope för vilka hello token är giltig.</span><span class="sxs-lookup"><span data-stu-id="76f8f-298">hello scopes for which hello token is valid.</span></span> <span data-ttu-id="76f8f-299">Dessa kan användas för att cachelagra token för senare användning.</span><span class="sxs-lookup"><span data-stu-id="76f8f-299">These can be used for caching tokens for later use.</span></span> |
| <span data-ttu-id="76f8f-300">expires_in</span><span class="sxs-lookup"><span data-stu-id="76f8f-300">expires_in</span></span> |<span data-ttu-id="76f8f-301">hello tidslängd som hello åtkomst-token är giltig (i sekunder).</span><span class="sxs-lookup"><span data-stu-id="76f8f-301">hello length of time that hello access token is valid (in seconds).</span></span> |
| <span data-ttu-id="76f8f-302">refresh_token</span><span class="sxs-lookup"><span data-stu-id="76f8f-302">refresh_token</span></span> |<span data-ttu-id="76f8f-303">En token för uppdatering av OAuth 2.0.</span><span class="sxs-lookup"><span data-stu-id="76f8f-303">An OAuth 2.0 refresh token.</span></span> <span data-ttu-id="76f8f-304">hello app kan använda den här token tooacquire ytterligare token när hello aktuella token upphör att gälla.</span><span class="sxs-lookup"><span data-stu-id="76f8f-304">hello app can use this token tooacquire additional tokens after hello current token expires.</span></span> <span data-ttu-id="76f8f-305">Uppdatera token är långlivade och kan inte används tooretain åtkomst tooresources under längre tid.</span><span class="sxs-lookup"><span data-stu-id="76f8f-305">Refresh tokens are long-lived and can be used tooretain access tooresources for extended periods of time.</span></span> <span data-ttu-id="76f8f-306">Mer information finns i toohello [B2C tokenreferens](active-directory-b2c-reference-tokens.md).</span><span class="sxs-lookup"><span data-stu-id="76f8f-306">For more details, refer toohello [B2C token reference](active-directory-b2c-reference-tokens.md).</span></span> <span data-ttu-id="76f8f-307">Observera att du måste ha använt hello scope `offline_access` i både hello auktorisering och token begäranden i ordning tooreceive en uppdateringstoken.</span><span class="sxs-lookup"><span data-stu-id="76f8f-307">Note that you must have used hello scope `offline_access` in both hello authorization and token requests in order tooreceive a refresh token.</span></span> |

<span data-ttu-id="76f8f-308">Felsvar som liknar:</span><span class="sxs-lookup"><span data-stu-id="76f8f-308">Error responses look like:</span></span>

```
{
    "error": "access_denied",
    "error_description": "hello user revoked access toohello app.",
}
```

| <span data-ttu-id="76f8f-309">Parameter</span><span class="sxs-lookup"><span data-stu-id="76f8f-309">Parameter</span></span> | <span data-ttu-id="76f8f-310">Beskrivning</span><span class="sxs-lookup"><span data-stu-id="76f8f-310">Description</span></span> |
| --- | --- |
| <span data-ttu-id="76f8f-311">fel</span><span class="sxs-lookup"><span data-stu-id="76f8f-311">error</span></span> |<span data-ttu-id="76f8f-312">En felkod sträng som kan använda tooclassify typer av fel som inträffar och som kan vara används tooreact tooerrors.</span><span class="sxs-lookup"><span data-stu-id="76f8f-312">An error-code string that can be used tooclassify types of errors that occur and that can be used tooreact tooerrors.</span></span> |
| <span data-ttu-id="76f8f-313">error_description</span><span class="sxs-lookup"><span data-stu-id="76f8f-313">error_description</span></span> |<span data-ttu-id="76f8f-314">Ett felmeddelande som kan hjälpa utvecklare identifiera hello grundorsaken till ett autentiseringsfel.</span><span class="sxs-lookup"><span data-stu-id="76f8f-314">A specific error message that can help a developer identify hello root cause of an authentication error.</span></span> |

## <a name="use-hello-token"></a><span data-ttu-id="76f8f-315">Använd hello-token</span><span class="sxs-lookup"><span data-stu-id="76f8f-315">Use hello token</span></span>
<span data-ttu-id="76f8f-316">Nu när du har har skaffat ett åtkomsttoken, du kan använda hello token i begäranden tooyour backend-webb-API: er genom att inkludera i hello `Authorization` huvud:</span><span class="sxs-lookup"><span data-stu-id="76f8f-316">Now that you've successfully acquired an access token, you can use hello token in requests tooyour back-end web APIs by including it in hello `Authorization` header:</span></span>

```
GET /tasks
Host: https://mytaskwebapi.com
Authorization: Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6Ik5HVEZ2ZEstZnl0aEV1Q...
```

## <a name="refresh-hello-token"></a><span data-ttu-id="76f8f-317">Uppdatera hello-token</span><span class="sxs-lookup"><span data-stu-id="76f8f-317">Refresh hello token</span></span>
<span data-ttu-id="76f8f-318">ID-token är tillfällig.</span><span class="sxs-lookup"><span data-stu-id="76f8f-318">ID tokens are short-lived.</span></span> <span data-ttu-id="76f8f-319">Du måste uppdatera dem när de upphör att gälla toocontinue som kan tooaccess resurser.</span><span class="sxs-lookup"><span data-stu-id="76f8f-319">You must refresh them after they expire toocontinue being able tooaccess resources.</span></span> <span data-ttu-id="76f8f-320">Du kan göra det genom att skicka in en annan `POST` begära toohello `/token` slutpunkt.</span><span class="sxs-lookup"><span data-stu-id="76f8f-320">You can do so by submitting another `POST` request toohello `/token` endpoint.</span></span> <span data-ttu-id="76f8f-321">Den här tiden kan ge hello `refresh_token` parameter i stället för hello `code` parameter:</span><span class="sxs-lookup"><span data-stu-id="76f8f-321">This time, provide hello `refresh_token` parameter instead of hello `code` parameter:</span></span>

```
POST fabrikamb2c.onmicrosoft.com/oauth2/v2.0/token?p=b2c_1_sign_in HTTP/1.1
Host: https://login.microsoftonline.com
Content-Type: application/x-www-form-urlencoded

grant_type=refresh_token&client_id=90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6&scope=openid offline_access&refresh_token=AwABAAAAvPM1KaPlrEqdFSBzjqfTGBCmLdgfSTLEMPGYuNHSUYBrq...&redirect_uri=urn:ietf:wg:oauth:2.0:oob&client_secret=<your-application-secret>
```

| <span data-ttu-id="76f8f-322">Parameter</span><span class="sxs-lookup"><span data-stu-id="76f8f-322">Parameter</span></span> | <span data-ttu-id="76f8f-323">Krävs</span><span class="sxs-lookup"><span data-stu-id="76f8f-323">Required</span></span> | <span data-ttu-id="76f8f-324">Beskrivning</span><span class="sxs-lookup"><span data-stu-id="76f8f-324">Description</span></span> |
| --- | --- | --- |
| <span data-ttu-id="76f8f-325">P</span><span class="sxs-lookup"><span data-stu-id="76f8f-325">p</span></span> |<span data-ttu-id="76f8f-326">Krävs</span><span class="sxs-lookup"><span data-stu-id="76f8f-326">Required</span></span> |<span data-ttu-id="76f8f-327">hello-princip som har använt tooacquire hello ursprungliga uppdateringstoken.</span><span class="sxs-lookup"><span data-stu-id="76f8f-327">hello policy that was used tooacquire hello original refresh token.</span></span> <span data-ttu-id="76f8f-328">Du kan inte använda en annan princip i den här förfrågan.</span><span class="sxs-lookup"><span data-stu-id="76f8f-328">You cannot use a different policy in this request.</span></span> <span data-ttu-id="76f8f-329">Observera att du lägger till den här parametern toohello frågesträng, inte toohello POST brödtext.</span><span class="sxs-lookup"><span data-stu-id="76f8f-329">Note that you add this parameter toohello query string, not toohello POST body.</span></span> |
| <span data-ttu-id="76f8f-330">client_id</span><span class="sxs-lookup"><span data-stu-id="76f8f-330">client_id</span></span> |<span data-ttu-id="76f8f-331">Krävs</span><span class="sxs-lookup"><span data-stu-id="76f8f-331">Required</span></span> |<span data-ttu-id="76f8f-332">hello program-ID som hello [Azure-portalen](https://portal.azure.com/) tilldelade tooyour app.</span><span class="sxs-lookup"><span data-stu-id="76f8f-332">hello application ID that hello [Azure portal](https://portal.azure.com/) assigned tooyour app.</span></span> |
| <span data-ttu-id="76f8f-333">grant_type</span><span class="sxs-lookup"><span data-stu-id="76f8f-333">grant_type</span></span> |<span data-ttu-id="76f8f-334">Krävs</span><span class="sxs-lookup"><span data-stu-id="76f8f-334">Required</span></span> |<span data-ttu-id="76f8f-335">bevilja som måste vara en uppdateringstoken för denna del av hello auktoriseringskodflödet hello typ.</span><span class="sxs-lookup"><span data-stu-id="76f8f-335">hello type of grant, which must be a refresh token for this leg of hello authorization code flow.</span></span> |
| <span data-ttu-id="76f8f-336">Omfång</span><span class="sxs-lookup"><span data-stu-id="76f8f-336">scope</span></span> |<span data-ttu-id="76f8f-337">Rekommenderas</span><span class="sxs-lookup"><span data-stu-id="76f8f-337">Recommended</span></span> |<span data-ttu-id="76f8f-338">En blankstegsavgränsad lista över scope.</span><span class="sxs-lookup"><span data-stu-id="76f8f-338">A space-separated list of scopes.</span></span> <span data-ttu-id="76f8f-339">Ett enda scope-värde som anger tooAzure AD både behörigheter som krävs.</span><span class="sxs-lookup"><span data-stu-id="76f8f-339">A single scope value indicates tooAzure AD both permissions that are being requested.</span></span> <span data-ttu-id="76f8f-340">Hej `openid` omfång anger en behörighet toosign i hello användar- och hämta data om hello användaren i hello form av ID-token.</span><span class="sxs-lookup"><span data-stu-id="76f8f-340">hello `openid` scope indicates a permission toosign in hello user and get data about hello user in hello form of ID tokens.</span></span> <span data-ttu-id="76f8f-341">Det kan vara används tooget token tooyour Apps egen backend-webb-API, som representeras av hello samma program-ID som hello-klient.</span><span class="sxs-lookup"><span data-stu-id="76f8f-341">It can be used tooget tokens tooyour app's own back-end web API, which is represented by hello same application ID as hello client.</span></span> <span data-ttu-id="76f8f-342">Hej `offline_access` omfång anger att din app behöver en uppdateringstoken för långlivade åtkomst tooresources.</span><span class="sxs-lookup"><span data-stu-id="76f8f-342">hello `offline_access` scope indicates that your app will need a refresh token for long-lived access tooresources.</span></span> |
| <span data-ttu-id="76f8f-343">redirect_uri</span><span class="sxs-lookup"><span data-stu-id="76f8f-343">redirect_uri</span></span> |<span data-ttu-id="76f8f-344">Rekommenderas</span><span class="sxs-lookup"><span data-stu-id="76f8f-344">Recommended</span></span> |<span data-ttu-id="76f8f-345">Hej `redirect_uri` parametern för hello program som du fick hello auktoriseringskod.</span><span class="sxs-lookup"><span data-stu-id="76f8f-345">hello `redirect_uri` parameter of hello application where you received hello authorization code.</span></span> |
| <span data-ttu-id="76f8f-346">refresh_token</span><span class="sxs-lookup"><span data-stu-id="76f8f-346">refresh_token</span></span> |<span data-ttu-id="76f8f-347">Krävs</span><span class="sxs-lookup"><span data-stu-id="76f8f-347">Required</span></span> |<span data-ttu-id="76f8f-348">hello ursprungliga uppdateringstoken som du har införskaffade i hello andra ben hello flödet.</span><span class="sxs-lookup"><span data-stu-id="76f8f-348">hello original refresh token that you acquired in hello second leg of hello flow.</span></span> <span data-ttu-id="76f8f-349">Observera att du måste ha använt hello scope `offline_access` i både hello auktorisering och token begäranden i ordning tooreceive en uppdateringstoken.</span><span class="sxs-lookup"><span data-stu-id="76f8f-349">Note that you must have used hello scope `offline_access` in both hello authorization and token requests in order tooreceive a refresh token.</span></span> |
| <span data-ttu-id="76f8f-350">client_secret</span><span class="sxs-lookup"><span data-stu-id="76f8f-350">client_secret</span></span> |<span data-ttu-id="76f8f-351">Krävs</span><span class="sxs-lookup"><span data-stu-id="76f8f-351">Required</span></span> |<span data-ttu-id="76f8f-352">Hej programhemlighet som du genererade på hello [Azure-portalen](https://portal.azure.com/).</span><span class="sxs-lookup"><span data-stu-id="76f8f-352">hello application secret that you generated in hello [Azure portal](https://portal.azure.com/).</span></span> <span data-ttu-id="76f8f-353">Den här programhemligheten är en viktig säkerhetsuppgift artefakt.</span><span class="sxs-lookup"><span data-stu-id="76f8f-353">This application secret is an important security artifact.</span></span> <span data-ttu-id="76f8f-354">Du bör lagra den på ett säkert sätt på din server.</span><span class="sxs-lookup"><span data-stu-id="76f8f-354">You should store it securely on your server.</span></span> <span data-ttu-id="76f8f-355">Du bör också rotera denna klienthemlighet regelbundet.</span><span class="sxs-lookup"><span data-stu-id="76f8f-355">You should also rotate this client secret on a periodic basis.</span></span> |

<span data-ttu-id="76f8f-356">Det ser ut som ett lyckat token svar:</span><span class="sxs-lookup"><span data-stu-id="76f8f-356">A successful token response looks like:</span></span>

```
{
    "not_before": "1442340812",
    "token_type": "Bearer",
    "access_token": "eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6Ik5HVEZ2ZEstZnl0aEV1Q...",
    "scope": "90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6 offline_access",
    "expires_in": "3600",
    "refresh_token": "AAQfQmvuDy8WtUv-sd0TBwWVQs1rC-Lfxa_NDkLqpg50Cxp5Dxj0VPF1mx2Z...",
}
```
| <span data-ttu-id="76f8f-357">Parameter</span><span class="sxs-lookup"><span data-stu-id="76f8f-357">Parameter</span></span> | <span data-ttu-id="76f8f-358">Beskrivning</span><span class="sxs-lookup"><span data-stu-id="76f8f-358">Description</span></span> |
| --- | --- |
| <span data-ttu-id="76f8f-359">not_before</span><span class="sxs-lookup"><span data-stu-id="76f8f-359">not_before</span></span> |<span data-ttu-id="76f8f-360">hello tid vid vilken hello token betraktas som giltigt epok tidpunkt.</span><span class="sxs-lookup"><span data-stu-id="76f8f-360">hello time at which hello token is considered valid, in epoch time.</span></span> |
| <span data-ttu-id="76f8f-361">token_type</span><span class="sxs-lookup"><span data-stu-id="76f8f-361">token_type</span></span> |<span data-ttu-id="76f8f-362">hello tokentypen värde.</span><span class="sxs-lookup"><span data-stu-id="76f8f-362">hello token type value.</span></span> <span data-ttu-id="76f8f-363">Hej typ som har stöd för Azure AD är `Bearer`.</span><span class="sxs-lookup"><span data-stu-id="76f8f-363">hello only type that Azure AD supports is `Bearer`.</span></span> |
| <span data-ttu-id="76f8f-364">access_token</span><span class="sxs-lookup"><span data-stu-id="76f8f-364">access_token</span></span> |<span data-ttu-id="76f8f-365">hello signerade JWT-token som du har begärt.</span><span class="sxs-lookup"><span data-stu-id="76f8f-365">hello signed JWT token that you requested.</span></span> |
| <span data-ttu-id="76f8f-366">Omfång</span><span class="sxs-lookup"><span data-stu-id="76f8f-366">scope</span></span> |<span data-ttu-id="76f8f-367">hello omfattning som hello token är giltig för, som kan användas för att cachelagra token för senare användning.</span><span class="sxs-lookup"><span data-stu-id="76f8f-367">hello scope that hello token is valid for, which can be used for caching tokens for later use.</span></span> |
| <span data-ttu-id="76f8f-368">expires_in</span><span class="sxs-lookup"><span data-stu-id="76f8f-368">expires_in</span></span> |<span data-ttu-id="76f8f-369">hello tidslängd som hello åtkomst-token är giltig (i sekunder).</span><span class="sxs-lookup"><span data-stu-id="76f8f-369">hello length of time that hello access token is valid (in seconds).</span></span> |
| <span data-ttu-id="76f8f-370">refresh_token</span><span class="sxs-lookup"><span data-stu-id="76f8f-370">refresh_token</span></span> |<span data-ttu-id="76f8f-371">En token för uppdatering av OAuth 2.0.</span><span class="sxs-lookup"><span data-stu-id="76f8f-371">An OAuth 2.0 refresh token.</span></span> <span data-ttu-id="76f8f-372">hello app kan använda den här token tooacquire ytterligare token när hello aktuella token upphör att gälla.</span><span class="sxs-lookup"><span data-stu-id="76f8f-372">hello app can use this token tooacquire additional tokens after hello current token expires.</span></span>  <span data-ttu-id="76f8f-373">Uppdatera token är långlivade och kan inte används tooretain åtkomst tooresources under längre tid.</span><span class="sxs-lookup"><span data-stu-id="76f8f-373">Refresh tokens are long-lived and can be used tooretain access tooresources for extended periods of time.</span></span> <span data-ttu-id="76f8f-374">Mer information finns i toohello [B2C tokenreferens](active-directory-b2c-reference-tokens.md).</span><span class="sxs-lookup"><span data-stu-id="76f8f-374">For more detail, refer toohello [B2C token reference](active-directory-b2c-reference-tokens.md).</span></span> |

<span data-ttu-id="76f8f-375">Felsvar som liknar:</span><span class="sxs-lookup"><span data-stu-id="76f8f-375">Error responses look like:</span></span>

```
{
    "error": "access_denied",
    "error_description": "hello user revoked access toohello app.",
}
```

| <span data-ttu-id="76f8f-376">Parameter</span><span class="sxs-lookup"><span data-stu-id="76f8f-376">Parameter</span></span> | <span data-ttu-id="76f8f-377">Beskrivning</span><span class="sxs-lookup"><span data-stu-id="76f8f-377">Description</span></span> |
| --- | --- |
| <span data-ttu-id="76f8f-378">fel</span><span class="sxs-lookup"><span data-stu-id="76f8f-378">error</span></span> |<span data-ttu-id="76f8f-379">En felkod sträng som kan använda tooclassify typer av fel som inträffar och som kan vara används tooreact tooerrors.</span><span class="sxs-lookup"><span data-stu-id="76f8f-379">An error-code string that can be used tooclassify types of errors that occur and that can be used tooreact tooerrors.</span></span> |
| <span data-ttu-id="76f8f-380">error_description</span><span class="sxs-lookup"><span data-stu-id="76f8f-380">error_description</span></span> |<span data-ttu-id="76f8f-381">Ett felmeddelande som kan hjälpa utvecklare identifiera hello grundorsaken till ett autentiseringsfel.</span><span class="sxs-lookup"><span data-stu-id="76f8f-381">A specific error message that can help a developer identify hello root cause of an authentication error.</span></span> |

## <a name="send-a-sign-out-request"></a><span data-ttu-id="76f8f-382">Skicka en begäran om utloggning</span><span class="sxs-lookup"><span data-stu-id="76f8f-382">Send a sign-out request</span></span>
<span data-ttu-id="76f8f-383">Om du vill toosign hello användare utanför hello appen är inte tillräckligt med tooclear appens cookies eller annars avsluta hello-session med hello användare.</span><span class="sxs-lookup"><span data-stu-id="76f8f-383">When you want toosign hello user out of hello app, it is not enough tooclear your app's cookies or otherwise end hello session with hello user.</span></span> <span data-ttu-id="76f8f-384">Du måste också omdirigera hello användaren tooAzure AD toosign ut. Om du inte toodo så kanske hello användaren kan tooreauthenticate tooyour app utan att ange sina autentiseringsuppgifter igen.</span><span class="sxs-lookup"><span data-stu-id="76f8f-384">You must also redirect hello user tooAzure AD toosign out. If you fail toodo so, hello user might be able tooreauthenticate tooyour app without entering their credentials again.</span></span> <span data-ttu-id="76f8f-385">Det beror på att de har en giltig inloggning session med Azure AD.</span><span class="sxs-lookup"><span data-stu-id="76f8f-385">This is because they will have a valid single sign-on session with Azure AD.</span></span>

<span data-ttu-id="76f8f-386">Du kan bara omdirigera hello användaren toohello `end_session` slutpunkt som anges i hello OpenID Connect Metadatadokumentet som beskrivits tidigare i hello ”verifiera hello-ID-token” avsnittet:</span><span class="sxs-lookup"><span data-stu-id="76f8f-386">You can simply redirect hello user toohello `end_session` endpoint that is listed in hello OpenID Connect metadata document described earlier in hello "Validate hello ID token" section:</span></span>

```
GET https://login.microsoftonline.com/fabrikamb2c.onmicrosoft.com/oauth2/v2.0/logout?
p=b2c_1_sign_in
&post_logout_redirect_uri=https%3A%2F%2Faadb2cplayground.azurewebsites.net%2F
```

| <span data-ttu-id="76f8f-387">Parameter</span><span class="sxs-lookup"><span data-stu-id="76f8f-387">Parameter</span></span> | <span data-ttu-id="76f8f-388">Krävs?</span><span class="sxs-lookup"><span data-stu-id="76f8f-388">Required?</span></span> | <span data-ttu-id="76f8f-389">Beskrivning</span><span class="sxs-lookup"><span data-stu-id="76f8f-389">Description</span></span> |
| --- | --- | --- |
| <span data-ttu-id="76f8f-390">P</span><span class="sxs-lookup"><span data-stu-id="76f8f-390">p</span></span> |<span data-ttu-id="76f8f-391">Krävs</span><span class="sxs-lookup"><span data-stu-id="76f8f-391">Required</span></span> |<span data-ttu-id="76f8f-392">hello-princip som du vill toouse toosign hello användare utanför tillämpningsprogrammet.</span><span class="sxs-lookup"><span data-stu-id="76f8f-392">hello policy that you want toouse toosign hello user out of your application.</span></span> |
| <span data-ttu-id="76f8f-393">post_logout_redirect_uri</span><span class="sxs-lookup"><span data-stu-id="76f8f-393">post_logout_redirect_uri</span></span> |<span data-ttu-id="76f8f-394">Rekommenderas</span><span class="sxs-lookup"><span data-stu-id="76f8f-394">Recommended</span></span> |<span data-ttu-id="76f8f-395">hello Webbadress hello användaren måste vara omdirigerade tooafter lyckade utloggning. Om det inte finns, visar Azure AD B2C hello användaren ett allmänt meddelande.</span><span class="sxs-lookup"><span data-stu-id="76f8f-395">hello URL that hello user should be redirected tooafter successful sign-out. If it is not included, Azure AD B2C shows hello user a generic message.</span></span> |

> [!NOTE]
> <span data-ttu-id="76f8f-396">Även om dirigera hello användaren toohello `end_session` endpoint raderar vissa hello användarens inloggning tillstånd med Azure AD B2C, signerar inte hello användare utanför sin sociala identitet provider (IDP)-session.</span><span class="sxs-lookup"><span data-stu-id="76f8f-396">Although directing hello user toohello `end_session` endpoint will clear some of hello user's single sign-on state with Azure AD B2C, it will not sign hello user out of their social identity provider (IDP) session.</span></span> <span data-ttu-id="76f8f-397">Om hello användaren väljer hello samma IDP under en efterföljande inloggning, de kommer att autentisera, utan att behöva ange sina autentiseringsuppgifter.</span><span class="sxs-lookup"><span data-stu-id="76f8f-397">If hello user selects hello same IDP during a subsequent sign-in, they will be reauthenticated, without entering their credentials.</span></span> <span data-ttu-id="76f8f-398">Om en användare toosign utanför tillämpningsprogrammet B2C, den inte nödvändigtvis de vill toosign utanför deras Facebook-konto.</span><span class="sxs-lookup"><span data-stu-id="76f8f-398">If a user wants toosign out of your B2C application, it does not necessarily mean they want toosign out of their Facebook account.</span></span> <span data-ttu-id="76f8f-399">Men i hello fallet för lokala konton avslutas hello användarens session korrekt.</span><span class="sxs-lookup"><span data-stu-id="76f8f-399">However, in hello case of local accounts, hello user's session will be ended properly.</span></span>
> 
> 

## <a name="use-your-own-b2c-tenant"></a><span data-ttu-id="76f8f-400">Använda en egen B2C-klient</span><span class="sxs-lookup"><span data-stu-id="76f8f-400">Use your own B2C tenant</span></span>
<span data-ttu-id="76f8f-401">Om du vill tootry dessa begäranden själv, måste du först utför de här tre stegen och Skriv hello exempelvärden som beskrivs ovan med dina egna:</span><span class="sxs-lookup"><span data-stu-id="76f8f-401">If you want tootry these requests for yourself, you must first perform these three steps, and then replace hello example values described earlier with your own:</span></span>

1. <span data-ttu-id="76f8f-402">[Skapa en B2C-klient](active-directory-b2c-get-started.md), och använder hello namn för din klient i hello begäranden.</span><span class="sxs-lookup"><span data-stu-id="76f8f-402">[Create a B2C tenant](active-directory-b2c-get-started.md), and use hello name of your tenant in hello requests.</span></span>
2. <span data-ttu-id="76f8f-403">[Skapa ett program](active-directory-b2c-app-registration.md) tooobtain ett-ID.</span><span class="sxs-lookup"><span data-stu-id="76f8f-403">[Create an application](active-directory-b2c-app-registration.md) tooobtain an application ID.</span></span> <span data-ttu-id="76f8f-404">Inkludera en web app/webb-API i din app.</span><span class="sxs-lookup"><span data-stu-id="76f8f-404">Include a web app/web API in your app.</span></span> <span data-ttu-id="76f8f-405">Du kan också skapa ett programhemlighet.</span><span class="sxs-lookup"><span data-stu-id="76f8f-405">Optionally, create an application secret.</span></span>
3. <span data-ttu-id="76f8f-406">[Skapa dina principer](active-directory-b2c-reference-policies.md) tooobtain principens namn.</span><span class="sxs-lookup"><span data-stu-id="76f8f-406">[Create your policies](active-directory-b2c-reference-policies.md) tooobtain your policy names.</span></span>


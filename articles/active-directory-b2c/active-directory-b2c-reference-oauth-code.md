---
title: "Auktoriseringskodflödet - Azure AD B2C | Microsoft Docs"
description: "Lär dig hur toobuild webbappar med hjälp av autentiseringsprotokollet Azure AD B2C och OpenID Connect."
services: active-directory-b2c
documentationcenter: 
author: saeedakhter-msft
manager: krassk
editor: parakhj
ms.assetid: c371aaab-813a-4317-97df-b62e2f53d865
ms.service: active-directory-b2c
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 08/16/2017
ms.author: saeedakhter-msft
ms.openlocfilehash: 6bf9d37310bd45b39bda346441413556f9fd4fdc
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: sv-SE
ms.lasthandoff: 10/06/2017
---
# <a name="azure-active-directory-b2c-oauth-20-authorization-code-flow"></a><span data-ttu-id="7bff1-103">Azure Active Directory B2C: OAuth 2.0-auktoriseringskodflödet</span><span class="sxs-lookup"><span data-stu-id="7bff1-103">Azure Active Directory B2C: OAuth 2.0 authorization code flow</span></span>
<span data-ttu-id="7bff1-104">Du kan använda hello OAuth 2.0 auktorisering kod bevilja i appar som installeras på en enhet toogain åtkomst tooprotected resurser, till exempel web API: er.</span><span class="sxs-lookup"><span data-stu-id="7bff1-104">You can use hello OAuth 2.0 authorization code grant in apps installed on a device toogain access tooprotected resources, such as web APIs.</span></span> <span data-ttu-id="7bff1-105">Du kan lägga till registrering, inloggning med hjälp av hello Azure Active Directory B2C (Azure AD B2C) implementering av OAuth 2.0 och andra Identitetshantering uppgifter tooyour bärbara och stationära appar.</span><span class="sxs-lookup"><span data-stu-id="7bff1-105">By using hello Azure Active Directory B2C (Azure AD B2C) implementation of OAuth 2.0, you can add sign-up, sign-in, and other identity management tasks tooyour mobile and desktop apps.</span></span> <span data-ttu-id="7bff1-106">Den här artikeln är språkoberoende.</span><span class="sxs-lookup"><span data-stu-id="7bff1-106">This article is language-independent.</span></span> <span data-ttu-id="7bff1-107">I hello artikeln beskriver vi hur toosend och ta emot HTTP-meddelanden utan att använda alla bibliotek med öppen källkod.</span><span class="sxs-lookup"><span data-stu-id="7bff1-107">In hello article, we describe how toosend and receive HTTP messages without using any open-source libraries.</span></span>

<!-- TODO: Need link toolibraries -->

<span data-ttu-id="7bff1-108">hello OAuth 2.0-auktoriseringskodflödet beskrivs i [avsnittet 4.1 av hello OAuth 2.0-specifikationen](http://tools.ietf.org/html/rfc6749).</span><span class="sxs-lookup"><span data-stu-id="7bff1-108">hello OAuth 2.0 authorization code flow is described in [section 4.1 of hello OAuth 2.0 specification](http://tools.ietf.org/html/rfc6749).</span></span> <span data-ttu-id="7bff1-109">Du kan använda för autentisering och auktorisering i de flesta apptyper, inklusive [webbappar](active-directory-b2c-apps.md#web-apps) och [internt installerade appar](active-directory-b2c-apps.md#mobile-and-native-apps).</span><span class="sxs-lookup"><span data-stu-id="7bff1-109">You can use it for authentication and authorization in most app types, including [web apps](active-directory-b2c-apps.md#web-apps) and [natively installed apps](active-directory-b2c-apps.md#mobile-and-native-apps).</span></span> <span data-ttu-id="7bff1-110">Du kan använda hello OAuth 2.0 auktorisering kod flödet toosecurely hämta *åtkomst till token* för dina appar som kan vara används tooaccess resurser som skyddas av en [auktorisering server](active-directory-b2c-reference-protocols.md#the-basics).</span><span class="sxs-lookup"><span data-stu-id="7bff1-110">You can use hello OAuth 2.0 authorization code flow toosecurely acquire *access tokens* for your apps, which can be used tooaccess resources that are secured by an [authorization server](active-directory-b2c-reference-protocols.md#the-basics).</span></span>

<span data-ttu-id="7bff1-111">Den här artikeln fokuserar på hello **offentliga klienter** OAuth 2.0-auktoriseringskodflödet.</span><span class="sxs-lookup"><span data-stu-id="7bff1-111">This article focuses on hello **public clients** OAuth 2.0 authorization code flow.</span></span> <span data-ttu-id="7bff1-112">En offentlig klient är alla klientprogram som inte kan vara betrodda toosecurely Underhåll hello integriteten hos ett hemligt lösenord.</span><span class="sxs-lookup"><span data-stu-id="7bff1-112">A public client is any client application that cannot be trusted toosecurely maintain hello integrity of a secret password.</span></span> <span data-ttu-id="7bff1-113">Detta inkluderar mobilappar och skrivbordsappar i stort sett alla program som körs på en enhet och måste tooget åtkomsttoken.</span><span class="sxs-lookup"><span data-stu-id="7bff1-113">This includes mobile apps, desktop apps, and essentially any application that runs on a device and needs tooget access tokens.</span></span> 

> [!NOTE]
> <span data-ttu-id="7bff1-114">tooadd identity management tooa webb-app med hjälp av Azure AD B2C, Använd [OpenID Connect](active-directory-b2c-reference-oidc.md) i stället för OAuth 2.0.</span><span class="sxs-lookup"><span data-stu-id="7bff1-114">tooadd identity management tooa web app by using Azure AD B2C, use [OpenID Connect](active-directory-b2c-reference-oidc.md) instead of OAuth 2.0.</span></span>

<span data-ttu-id="7bff1-115">Azure AD B2C utökar hello standard OAuth 2.0 flödar toodo mer än enkel autentisering och auktorisering.</span><span class="sxs-lookup"><span data-stu-id="7bff1-115">Azure AD B2C extends hello standard OAuth 2.0 flows toodo more than simple authentication and authorization.</span></span> <span data-ttu-id="7bff1-116">Det inför hello [parametern](active-directory-b2c-reference-policies.md).</span><span class="sxs-lookup"><span data-stu-id="7bff1-116">It introduces hello [policy parameter](active-directory-b2c-reference-policies.md).</span></span> <span data-ttu-id="7bff1-117">Med inbyggda principer kan du använda OAuth 2.0 tooadd användaren upplever tooyour app som registrering, inloggning och profilhantering.</span><span class="sxs-lookup"><span data-stu-id="7bff1-117">With built-in policies, you can use OAuth 2.0 tooadd user experiences tooyour app, such as sign-up, sign-in, and profile management.</span></span> <span data-ttu-id="7bff1-118">I den här artikeln visar vi dig hur toouse OAuth 2.0 och principer tooimplement var och en av dessa funktioner i dina interna program.</span><span class="sxs-lookup"><span data-stu-id="7bff1-118">In this article, we show you how toouse OAuth 2.0 and policies tooimplement each of these experiences in your native applications.</span></span> <span data-ttu-id="7bff1-119">Vi också visar hur tooget åtkomst-token för åtkomst till webb-API: er.</span><span class="sxs-lookup"><span data-stu-id="7bff1-119">We also show you how tooget access tokens for accessing web APIs.</span></span>

<span data-ttu-id="7bff1-120">I hello exempel HTTP-begäranden i den här artikeln, vi använda vårt exempel Azure AD B2C-katalog, **fabrikamb2c.onmicrosoft.com**. Vi använder också våra exempelprogrammet och principer.</span><span class="sxs-lookup"><span data-stu-id="7bff1-120">In hello example HTTP requests in this article, we use our sample Azure AD B2C directory, **fabrikamb2c.onmicrosoft.com**. We also use our sample application and policies.</span></span> <span data-ttu-id="7bff1-121">Du kan också försöka hello begäranden med hjälp av dessa värden eller kan du ersätta dem med egna värden.</span><span class="sxs-lookup"><span data-stu-id="7bff1-121">You can try hello requests yourself by using these values, or you can replace them with your own values.</span></span>
<span data-ttu-id="7bff1-122">Lär dig hur för[hämta egna Azure AD B2C-katalog, program och principer](#use-your-own-azure-ad-b2c-directory).</span><span class="sxs-lookup"><span data-stu-id="7bff1-122">Learn how too[get your own Azure AD B2C directory, application, and policies](#use-your-own-azure-ad-b2c-directory).</span></span>

## <a name="1-get-an-authorization-code"></a><span data-ttu-id="7bff1-123">1. Hämta en auktoriseringskod för</span><span class="sxs-lookup"><span data-stu-id="7bff1-123">1. Get an authorization code</span></span>
<span data-ttu-id="7bff1-124">hello-auktoriseringskodflödet börjar med hello klienten dirigera hello användaren toohello `/authorize` slutpunkt.</span><span class="sxs-lookup"><span data-stu-id="7bff1-124">hello authorization code flow begins with hello client directing hello user toohello `/authorize` endpoint.</span></span> <span data-ttu-id="7bff1-125">Detta tillhör hello interaktiva hello flödet där hello användaren vidtar åtgärder.</span><span class="sxs-lookup"><span data-stu-id="7bff1-125">This is hello interactive part of hello flow, where hello user takes action.</span></span> <span data-ttu-id="7bff1-126">I den här förfrågan hello-klienten anger i hello `scope` parametern hello behörigheter att den behöver tooacquire från hello användare.</span><span class="sxs-lookup"><span data-stu-id="7bff1-126">In this request, hello client indicates in hello `scope` parameter hello permissions that it needs tooacquire from hello user.</span></span> <span data-ttu-id="7bff1-127">I hello `p` parametern indikerar det hello princip tooexecute.</span><span class="sxs-lookup"><span data-stu-id="7bff1-127">In hello `p` parameter, it indicates hello policy tooexecute.</span></span> <span data-ttu-id="7bff1-128">hello använda följande tre exempel (med radbrytningar för att läsa) varje en annan princip.</span><span class="sxs-lookup"><span data-stu-id="7bff1-128">hello following three examples (with line breaks for readability) each use a different policy.</span></span>

### <a name="use-a-sign-in-policy"></a><span data-ttu-id="7bff1-129">Använda en princip för inloggning</span><span class="sxs-lookup"><span data-stu-id="7bff1-129">Use a sign-in policy</span></span>
```
GET https://login.microsoftonline.com/fabrikamb2c.onmicrosoft.com/oauth2/v2.0/authorize?
client_id=90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6
&response_type=code
&redirect_uri=urn%3Aietf%3Awg%3Aoauth%3A2.0%3Aoob
&response_mode=query
&scope=90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6%20offline_access
&state=arbitrary_data_you_can_receive_in_the_response
&p=b2c_1_sign_in
```

### <a name="use-a-sign-up-policy"></a><span data-ttu-id="7bff1-130">Använda en princip för registrering</span><span class="sxs-lookup"><span data-stu-id="7bff1-130">Use a sign-up policy</span></span>
```
GET https://login.microsoftonline.com/fabrikamb2c.onmicrosoft.com/oauth2/v2.0/authorize?
client_id=90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6
&response_type=code
&redirect_uri=urn%3Aietf%3Awg%3Aoauth%3A2.0%3Aoob
&response_mode=query
&scope=90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6%20offline_access
&state=arbitrary_data_you_can_receive_in_the_response
&p=b2c_1_sign_up
```

### <a name="use-an-edit-profile-policy"></a><span data-ttu-id="7bff1-131">Använda en princip för Redigera-profil</span><span class="sxs-lookup"><span data-stu-id="7bff1-131">Use an edit-profile policy</span></span>
```
GET https://login.microsoftonline.com/fabrikamb2c.onmicrosoft.com/oauth2/v2.0/authorize?
client_id=90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6
&response_type=code
&redirect_uri=urn%3Aietf%3Awg%3Aoauth%3A2.0%3Aoob
&response_mode=query
&scope=90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6%20offline_access
&state=arbitrary_data_you_can_receive_in_the_response
&p=b2c_1_edit_profile
```

| <span data-ttu-id="7bff1-132">Parameter</span><span class="sxs-lookup"><span data-stu-id="7bff1-132">Parameter</span></span> | <span data-ttu-id="7bff1-133">Krävs?</span><span class="sxs-lookup"><span data-stu-id="7bff1-133">Required?</span></span> | <span data-ttu-id="7bff1-134">Beskrivning</span><span class="sxs-lookup"><span data-stu-id="7bff1-134">Description</span></span> |
| --- | --- | --- |
| <span data-ttu-id="7bff1-135">client_id</span><span class="sxs-lookup"><span data-stu-id="7bff1-135">client_id</span></span> |<span data-ttu-id="7bff1-136">Krävs</span><span class="sxs-lookup"><span data-stu-id="7bff1-136">Required</span></span> |<span data-ttu-id="7bff1-137">hello program-ID tilldelade tooyour app i hello [Azure-portalen](https://portal.azure.com).</span><span class="sxs-lookup"><span data-stu-id="7bff1-137">hello application ID assigned tooyour app in hello [Azure portal](https://portal.azure.com).</span></span> |
| <span data-ttu-id="7bff1-138">response_type</span><span class="sxs-lookup"><span data-stu-id="7bff1-138">response_type</span></span> |<span data-ttu-id="7bff1-139">Krävs</span><span class="sxs-lookup"><span data-stu-id="7bff1-139">Required</span></span> |<span data-ttu-id="7bff1-140">hello svarstypen, måste innehålla `code` för hello-auktoriseringskodflödet.</span><span class="sxs-lookup"><span data-stu-id="7bff1-140">hello response type, which must include `code` for hello authorization code flow.</span></span> |
| <span data-ttu-id="7bff1-141">redirect_uri</span><span class="sxs-lookup"><span data-stu-id="7bff1-141">redirect_uri</span></span> |<span data-ttu-id="7bff1-142">Krävs</span><span class="sxs-lookup"><span data-stu-id="7bff1-142">Required</span></span> |<span data-ttu-id="7bff1-143">hello omdirigerings-URI för appen där autentisering svar skickas och tas emot av din app.</span><span class="sxs-lookup"><span data-stu-id="7bff1-143">hello redirect URI of your app, where authentication responses are sent and received by your app.</span></span> <span data-ttu-id="7bff1-144">Den måste matcha en hello omdirigerings-URI: er som du har registrerat i hello portal, förutom att det måste vara URL-kodade.</span><span class="sxs-lookup"><span data-stu-id="7bff1-144">It must exactly match one of hello redirect URIs that you registered in hello portal, except that it must be URL-encoded.</span></span> |
| <span data-ttu-id="7bff1-145">Omfång</span><span class="sxs-lookup"><span data-stu-id="7bff1-145">scope</span></span> |<span data-ttu-id="7bff1-146">Krävs</span><span class="sxs-lookup"><span data-stu-id="7bff1-146">Required</span></span> |<span data-ttu-id="7bff1-147">En blankstegsavgränsad lista över scope.</span><span class="sxs-lookup"><span data-stu-id="7bff1-147">A space-separated list of scopes.</span></span> <span data-ttu-id="7bff1-148">Ett enda scope-värde anger tooAzure Active Directory (AD Azure) både hello behörigheter som tas emot.</span><span class="sxs-lookup"><span data-stu-id="7bff1-148">A single scope value indicates tooAzure Active Directory (Azure AD) both of hello permissions that are being requested.</span></span> <span data-ttu-id="7bff1-149">Med hjälp av hello klient-ID som hello scope visar att din app behöver ett åtkomsttoken som kan användas med tjänsten eller webb-API, som representeras av hello samma klient-ID.</span><span class="sxs-lookup"><span data-stu-id="7bff1-149">Using hello client ID as hello scope indicates that your app needs an access token that can be used against your own service or web API, represented by hello same client ID.</span></span>  <span data-ttu-id="7bff1-150">Hej `offline_access` scope visar att din app behöver en uppdateringstoken för långlivade åtkomst tooresources.</span><span class="sxs-lookup"><span data-stu-id="7bff1-150">hello `offline_access` scope indicates that your app needs a refresh token for long-lived access tooresources.</span></span> <span data-ttu-id="7bff1-151">Du kan också använda hello `openid` omfång toorequest en ID-token från Azure AD B2C.</span><span class="sxs-lookup"><span data-stu-id="7bff1-151">You also can use hello `openid` scope toorequest an ID token from Azure AD B2C.</span></span> |
| <span data-ttu-id="7bff1-152">response_mode</span><span class="sxs-lookup"><span data-stu-id="7bff1-152">response_mode</span></span> |<span data-ttu-id="7bff1-153">Rekommenderas</span><span class="sxs-lookup"><span data-stu-id="7bff1-153">Recommended</span></span> |<span data-ttu-id="7bff1-154">hello-metod som du använder toosend hello resulterande auktorisering kod tillbaka tooyour app.</span><span class="sxs-lookup"><span data-stu-id="7bff1-154">hello method that you use toosend hello resulting authorization code back tooyour app.</span></span> <span data-ttu-id="7bff1-155">Det kan vara `query`, `form_post`, eller `fragment`.</span><span class="sxs-lookup"><span data-stu-id="7bff1-155">It can be `query`, `form_post`, or `fragment`.</span></span> |
| <span data-ttu-id="7bff1-156">state</span><span class="sxs-lookup"><span data-stu-id="7bff1-156">state</span></span> |<span data-ttu-id="7bff1-157">Rekommenderas</span><span class="sxs-lookup"><span data-stu-id="7bff1-157">Recommended</span></span> |<span data-ttu-id="7bff1-158">Ett värde som ingår i hello-begäran som returneras hello token svar.</span><span class="sxs-lookup"><span data-stu-id="7bff1-158">A value included in hello request that is returned in hello token response.</span></span> <span data-ttu-id="7bff1-159">Det kan vara en sträng med innehåll som du vill toouse.</span><span class="sxs-lookup"><span data-stu-id="7bff1-159">It can be a string of any content that you want toouse.</span></span> <span data-ttu-id="7bff1-160">Vanligtvis ett slumpmässigt genererat unikt värde används tooprevent attacker med förfalskning av begäran.</span><span class="sxs-lookup"><span data-stu-id="7bff1-160">Usually, a randomly generated unique value is  used, tooprevent cross-site request forgery attacks.</span></span> <span data-ttu-id="7bff1-161">hello tillstånd är också används tooencode information om hello användarens tillstånd i hello app innan hello autentiseringsbegäran inträffade.</span><span class="sxs-lookup"><span data-stu-id="7bff1-161">hello state also is used tooencode information about hello user's state in hello app before hello authentication request occurred.</span></span> <span data-ttu-id="7bff1-162">Hello sidan hello användaren utfördes eller hello princip som kördes.</span><span class="sxs-lookup"><span data-stu-id="7bff1-162">For example, hello page hello user was on, or hello policy that was being executed.</span></span> |
| <span data-ttu-id="7bff1-163">P</span><span class="sxs-lookup"><span data-stu-id="7bff1-163">p</span></span> |<span data-ttu-id="7bff1-164">Krävs</span><span class="sxs-lookup"><span data-stu-id="7bff1-164">Required</span></span> |<span data-ttu-id="7bff1-165">hello-princip som körs.</span><span class="sxs-lookup"><span data-stu-id="7bff1-165">hello policy that is executed.</span></span> <span data-ttu-id="7bff1-166">Hello namnet för en princip som skapas i din Azure AD B2C-katalog.</span><span class="sxs-lookup"><span data-stu-id="7bff1-166">It's hello name of a policy that is created in your Azure AD B2C directory.</span></span> <span data-ttu-id="7bff1-167">hello principvärdet namn måste börja med **b2c\_1\_**.</span><span class="sxs-lookup"><span data-stu-id="7bff1-167">hello policy name value should begin with **b2c\_1\_**.</span></span> <span data-ttu-id="7bff1-168">toolearn mer information om principer finns [Azure AD B2C inbyggda principer](active-directory-b2c-reference-policies.md).</span><span class="sxs-lookup"><span data-stu-id="7bff1-168">toolearn more about policies, see [Azure AD B2C built-in policies](active-directory-b2c-reference-policies.md).</span></span> |
| <span data-ttu-id="7bff1-169">kommandotolk</span><span class="sxs-lookup"><span data-stu-id="7bff1-169">prompt</span></span> |<span data-ttu-id="7bff1-170">Valfri</span><span class="sxs-lookup"><span data-stu-id="7bff1-170">Optional</span></span> |<span data-ttu-id="7bff1-171">hello typ av användarinteraktion som krävs.</span><span class="sxs-lookup"><span data-stu-id="7bff1-171">hello type of user interaction that is required.</span></span> <span data-ttu-id="7bff1-172">Hello enda giltiga värdet är för närvarande `login`, vilket framtvingar hello användaren tooenter sina autentiseringsuppgifter på begäran.</span><span class="sxs-lookup"><span data-stu-id="7bff1-172">Currently, hello only valid value is `login`, which forces hello user tooenter their credentials on that request.</span></span> <span data-ttu-id="7bff1-173">Enkel inloggning börjar inte gälla.</span><span class="sxs-lookup"><span data-stu-id="7bff1-173">Single sign-on will not take effect.</span></span> |

<span data-ttu-id="7bff1-174">Nu uppmanas användaren hello toocomplete hello princip arbetsflöde.</span><span class="sxs-lookup"><span data-stu-id="7bff1-174">At this point, hello user is asked toocomplete hello policy's workflow.</span></span> <span data-ttu-id="7bff1-175">Detta kan omfatta hello användaren att ange sina användarnamn och lösenord, logga in med en sociala identitet registrerar sig för hello katalog eller en annan siffra steg.</span><span class="sxs-lookup"><span data-stu-id="7bff1-175">This might involve hello user entering their username and password, signing in with a social identity, signing up for hello directory, or any other number of steps.</span></span> <span data-ttu-id="7bff1-176">Användaråtgärder beror på hur hello princip har definierats.</span><span class="sxs-lookup"><span data-stu-id="7bff1-176">User actions depend on how hello policy is defined.</span></span>

<span data-ttu-id="7bff1-177">När hello användaren Slutför hello princip, Azure AD tillbaka ett svar tooyour app på hello-värde som du använde för `redirect_uri`.</span><span class="sxs-lookup"><span data-stu-id="7bff1-177">After hello user completes hello policy, Azure AD returns a response tooyour app at hello value you used for `redirect_uri`.</span></span> <span data-ttu-id="7bff1-178">Den använder hello-metod som anges i hello `response_mode` parameter.</span><span class="sxs-lookup"><span data-stu-id="7bff1-178">It uses hello method specified in hello `response_mode` parameter.</span></span> <span data-ttu-id="7bff1-179">hello svar är exakt hello samma för alla hello åtgärd användarscenarier, oberoende av hello-princip som har utförts.</span><span class="sxs-lookup"><span data-stu-id="7bff1-179">hello response is exactly hello same for each of hello user action scenarios, independent of hello policy that was executed.</span></span>

<span data-ttu-id="7bff1-180">Ett lyckat svar som använder `response_mode=query` ser ut så här:</span><span class="sxs-lookup"><span data-stu-id="7bff1-180">A successful response that uses `response_mode=query` looks like this:</span></span>

```
GET urn:ietf:wg:oauth:2.0:oob?
code=AwABAAAAvPM1KaPlrEqdFSBzjqfTGBCmLdgfSTLEMPGYuNHSUYBrq...        // hello authorization_code, truncated
&state=arbitrary_data_you_can_receive_in_the_response                // hello value provided in hello request
```

| <span data-ttu-id="7bff1-181">Parameter</span><span class="sxs-lookup"><span data-stu-id="7bff1-181">Parameter</span></span> | <span data-ttu-id="7bff1-182">Beskrivning</span><span class="sxs-lookup"><span data-stu-id="7bff1-182">Description</span></span> |
| --- | --- |
| <span data-ttu-id="7bff1-183">Koden</span><span class="sxs-lookup"><span data-stu-id="7bff1-183">code</span></span> |<span data-ttu-id="7bff1-184">Hej auktoriseringskod hello appen begärdes.</span><span class="sxs-lookup"><span data-stu-id="7bff1-184">hello authorization code that hello app requested.</span></span> <span data-ttu-id="7bff1-185">hello app kan använda hello auktorisering koden toorequest en åtkomst-token för en målresurs.</span><span class="sxs-lookup"><span data-stu-id="7bff1-185">hello app can use hello authorization code toorequest an access token for a target resource.</span></span> <span data-ttu-id="7bff1-186">Auktoriseringskoder är mycket tillfällig.</span><span class="sxs-lookup"><span data-stu-id="7bff1-186">Authorization codes are very short-lived.</span></span> <span data-ttu-id="7bff1-187">Vanligtvis de går ut efter 10 minuter.</span><span class="sxs-lookup"><span data-stu-id="7bff1-187">Typically, they expire after about 10 minutes.</span></span> |
| <span data-ttu-id="7bff1-188">state</span><span class="sxs-lookup"><span data-stu-id="7bff1-188">state</span></span> |<span data-ttu-id="7bff1-189">Se hello fullständig beskrivning i hello-tabellen i föregående avsnitt hello.</span><span class="sxs-lookup"><span data-stu-id="7bff1-189">See hello full description in hello table in hello preceding section.</span></span> <span data-ttu-id="7bff1-190">Om en `state` parametern ingår i hello begäran hello samma värde som ska visas i hello svar.</span><span class="sxs-lookup"><span data-stu-id="7bff1-190">If a `state` parameter is included in hello request, hello same value should appear in hello response.</span></span> <span data-ttu-id="7bff1-191">hello app bör kontrollera att hello `state` värden i hello förfrågan och svar är identiska.</span><span class="sxs-lookup"><span data-stu-id="7bff1-191">hello app should verify that hello `state` values in hello request and response are identical.</span></span> |

<span data-ttu-id="7bff1-192">Felsvar kan också skickas toohello omdirigerings-URI så att hello app kan hantera dem på rätt sätt:</span><span class="sxs-lookup"><span data-stu-id="7bff1-192">Error responses also can be sent toohello redirect URI so that hello app can handle them appropriately:</span></span>

```
GET urn:ietf:wg:oauth:2.0:oob?
error=access_denied
&error_description=The+user+has+cancelled+entering+self-asserted+information
&state=arbitrary_data_you_can_receive_in_the_response
```

| <span data-ttu-id="7bff1-193">Parameter</span><span class="sxs-lookup"><span data-stu-id="7bff1-193">Parameter</span></span> | <span data-ttu-id="7bff1-194">Beskrivning</span><span class="sxs-lookup"><span data-stu-id="7bff1-194">Description</span></span> |
| --- | --- |
| <span data-ttu-id="7bff1-195">fel</span><span class="sxs-lookup"><span data-stu-id="7bff1-195">error</span></span> |<span data-ttu-id="7bff1-196">Ett felkod sträng som du kan använda tooclassify hello typer av fel som inträffar.</span><span class="sxs-lookup"><span data-stu-id="7bff1-196">An error code string that you can use tooclassify hello types of errors that occur.</span></span> <span data-ttu-id="7bff1-197">Du kan också använda hello sträng tooreact tooerrors.</span><span class="sxs-lookup"><span data-stu-id="7bff1-197">You also can use hello string tooreact tooerrors.</span></span> |
| <span data-ttu-id="7bff1-198">error_description</span><span class="sxs-lookup"><span data-stu-id="7bff1-198">error_description</span></span> |<span data-ttu-id="7bff1-199">Ett felmeddelande som kan hjälpa dig att identifiera hello grundorsaken till ett autentiseringsfel.</span><span class="sxs-lookup"><span data-stu-id="7bff1-199">A specific error message that can help you identify hello root cause of an authentication error.</span></span> |
| <span data-ttu-id="7bff1-200">state</span><span class="sxs-lookup"><span data-stu-id="7bff1-200">state</span></span> |<span data-ttu-id="7bff1-201">Finns hello fullständiga beskrivningen i föregående tabell hello.</span><span class="sxs-lookup"><span data-stu-id="7bff1-201">See hello full description in hello preceding table.</span></span> <span data-ttu-id="7bff1-202">Om en `state` parametern ingår i hello begäran hello samma värde som ska visas i hello svar.</span><span class="sxs-lookup"><span data-stu-id="7bff1-202">If a `state` parameter is included in hello request, hello same value should appear in hello response.</span></span> <span data-ttu-id="7bff1-203">hello app bör kontrollera att hello `state` värden i hello förfrågan och svar är identiska.</span><span class="sxs-lookup"><span data-stu-id="7bff1-203">hello app should verify that hello `state` values in hello request and response are identical.</span></span> |

## <a name="2-get-a-token"></a><span data-ttu-id="7bff1-204">2. Hämta en token</span><span class="sxs-lookup"><span data-stu-id="7bff1-204">2. Get a token</span></span>
<span data-ttu-id="7bff1-205">Nu när du har skaffat ett auktoriseringskod du lösa in hello `code` för token toohello avsedda resursen genom att skicka en POST-begäran toohello `/token` slutpunkt.</span><span class="sxs-lookup"><span data-stu-id="7bff1-205">Now that you've acquired an authorization code, you can redeem hello `code` for a token toohello intended resource by sending a POST request toohello `/token` endpoint.</span></span> <span data-ttu-id="7bff1-206">I Azure AD B2C är hello resursen som du kan begära en token för din Apps egen backend-webb-API.</span><span class="sxs-lookup"><span data-stu-id="7bff1-206">In Azure AD B2C, hello only resource that you can request a token for is your app's own back-end web API.</span></span> <span data-ttu-id="7bff1-207">hello-konventionen som används för att begära en token tooyourself är toouse appens klient-ID som hello omfattning:</span><span class="sxs-lookup"><span data-stu-id="7bff1-207">hello convention that's used for requesting a token tooyourself is toouse your app's client ID as hello scope:</span></span>

```
POST fabrikamb2c.onmicrosoft.com/oauth2/v2.0/token?p=b2c_1_sign_in HTTP/1.1
Host: https://login.microsoftonline.com
Content-Type: application/x-www-form-urlencoded

grant_type=authorization_code&client_id=90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6&scope=90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6 offline_access&code=AwABAAAAvPM1KaPlrEqdFSBzjqfTGBCmLdgfSTLEMPGYuNHSUYBrq...&redirect_uri=urn:ietf:wg:oauth:2.0:oob

```

| <span data-ttu-id="7bff1-208">Parameter</span><span class="sxs-lookup"><span data-stu-id="7bff1-208">Parameter</span></span> | <span data-ttu-id="7bff1-209">Krävs?</span><span class="sxs-lookup"><span data-stu-id="7bff1-209">Required?</span></span> | <span data-ttu-id="7bff1-210">Beskrivning</span><span class="sxs-lookup"><span data-stu-id="7bff1-210">Description</span></span> |
| --- | --- | --- |
| <span data-ttu-id="7bff1-211">P</span><span class="sxs-lookup"><span data-stu-id="7bff1-211">p</span></span> |<span data-ttu-id="7bff1-212">Krävs</span><span class="sxs-lookup"><span data-stu-id="7bff1-212">Required</span></span> |<span data-ttu-id="7bff1-213">Hej princip som har använt tooacquire hello auktorisering kod.</span><span class="sxs-lookup"><span data-stu-id="7bff1-213">hello policy that was used tooacquire hello authorization code.</span></span> <span data-ttu-id="7bff1-214">Du kan inte använda en annan princip i den här förfrågan.</span><span class="sxs-lookup"><span data-stu-id="7bff1-214">You cannot use a different policy in this request.</span></span> <span data-ttu-id="7bff1-215">Observera att lägga till den här parametern toohello *frågesträng*, inte i hello POST brödtext.</span><span class="sxs-lookup"><span data-stu-id="7bff1-215">Note that you add this parameter toohello *query string*, not in hello POST body.</span></span> |
| <span data-ttu-id="7bff1-216">client_id</span><span class="sxs-lookup"><span data-stu-id="7bff1-216">client_id</span></span> |<span data-ttu-id="7bff1-217">Krävs</span><span class="sxs-lookup"><span data-stu-id="7bff1-217">Required</span></span> |<span data-ttu-id="7bff1-218">hello program-ID tilldelade tooyour app i hello [Azure-portalen](https://portal.azure.com).</span><span class="sxs-lookup"><span data-stu-id="7bff1-218">hello application ID assigned tooyour app in hello [Azure portal](https://portal.azure.com).</span></span> |
| <span data-ttu-id="7bff1-219">grant_type</span><span class="sxs-lookup"><span data-stu-id="7bff1-219">grant_type</span></span> |<span data-ttu-id="7bff1-220">Krävs</span><span class="sxs-lookup"><span data-stu-id="7bff1-220">Required</span></span> |<span data-ttu-id="7bff1-221">bevilja hello typ.</span><span class="sxs-lookup"><span data-stu-id="7bff1-221">hello type of grant.</span></span> <span data-ttu-id="7bff1-222">För hello auktoriseringskodflödet hello bevilja typ måste vara `authorization_code`.</span><span class="sxs-lookup"><span data-stu-id="7bff1-222">For hello authorization code flow, hello grant type must be `authorization_code`.</span></span> |
| <span data-ttu-id="7bff1-223">Omfång</span><span class="sxs-lookup"><span data-stu-id="7bff1-223">scope</span></span> |<span data-ttu-id="7bff1-224">Rekommenderas</span><span class="sxs-lookup"><span data-stu-id="7bff1-224">Recommended</span></span> |<span data-ttu-id="7bff1-225">En blankstegsavgränsad lista över scope.</span><span class="sxs-lookup"><span data-stu-id="7bff1-225">A space-separated list of scopes.</span></span> <span data-ttu-id="7bff1-226">Ett enda scope-värde anger tooAzure AD båda hello behörigheter som tas emot.</span><span class="sxs-lookup"><span data-stu-id="7bff1-226">A single scope value indicates tooAzure AD both of hello permissions that are being requested.</span></span> <span data-ttu-id="7bff1-227">Med hjälp av hello klient-ID som hello scope visar att din app behöver ett åtkomsttoken som kan användas med tjänsten eller webb-API, som representeras av hello samma klient-ID.</span><span class="sxs-lookup"><span data-stu-id="7bff1-227">Using hello client ID as hello scope indicates that your app needs an access token that can be used against your own service or web API, represented by hello same client ID.</span></span>  <span data-ttu-id="7bff1-228">Hej `offline_access` scope visar att din app behöver en uppdateringstoken för långlivade åtkomst tooresources.</span><span class="sxs-lookup"><span data-stu-id="7bff1-228">hello `offline_access` scope indicates that your app needs a refresh token for long-lived access tooresources.</span></span>  <span data-ttu-id="7bff1-229">Du kan också använda hello `openid` omfång toorequest en ID-token från Azure AD B2C.</span><span class="sxs-lookup"><span data-stu-id="7bff1-229">You also can use hello `openid` scope toorequest an ID token from Azure AD B2C.</span></span> |
| <span data-ttu-id="7bff1-230">Koden</span><span class="sxs-lookup"><span data-stu-id="7bff1-230">code</span></span> |<span data-ttu-id="7bff1-231">Krävs</span><span class="sxs-lookup"><span data-stu-id="7bff1-231">Required</span></span> |<span data-ttu-id="7bff1-232">hello auktoriseringskod som du har införskaffade i hello första del av hello flödet.</span><span class="sxs-lookup"><span data-stu-id="7bff1-232">hello authorization code that you acquired in hello first leg of hello flow.</span></span> |
| <span data-ttu-id="7bff1-233">redirect_uri</span><span class="sxs-lookup"><span data-stu-id="7bff1-233">redirect_uri</span></span> |<span data-ttu-id="7bff1-234">Krävs</span><span class="sxs-lookup"><span data-stu-id="7bff1-234">Required</span></span> |<span data-ttu-id="7bff1-235">hello omdirigerings-URI för hello program som du fick hello auktoriseringskod.</span><span class="sxs-lookup"><span data-stu-id="7bff1-235">hello redirect URI of hello application where you received hello authorization code.</span></span> |

<span data-ttu-id="7bff1-236">Ett lyckat svar för token som ser ut så här:</span><span class="sxs-lookup"><span data-stu-id="7bff1-236">A successful token response looks like this:</span></span>

```
{
    "not_before": "1442340812",
    "token_type": "Bearer",
    "access_token": "eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6Ik5HVEZ2ZEstZnl0aEV1Q...",
    "scope": "90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6 offline_access",
    "expires_in": "3600",
    "refresh_token": "AAQfQmvuDy8WtUv-sd0TBwWVQs1rC-Lfxa_NDkLqpg50Cxp5Dxj0VPF1mx2Z...",
}
```
| <span data-ttu-id="7bff1-237">Parameter</span><span class="sxs-lookup"><span data-stu-id="7bff1-237">Parameter</span></span> | <span data-ttu-id="7bff1-238">Beskrivning</span><span class="sxs-lookup"><span data-stu-id="7bff1-238">Description</span></span> |
| --- | --- |
| <span data-ttu-id="7bff1-239">not_before</span><span class="sxs-lookup"><span data-stu-id="7bff1-239">not_before</span></span> |<span data-ttu-id="7bff1-240">hello tid vid vilken hello token betraktas som giltigt epok tidpunkt.</span><span class="sxs-lookup"><span data-stu-id="7bff1-240">hello time at which hello token is considered valid, in epoch time.</span></span> |
| <span data-ttu-id="7bff1-241">token_type</span><span class="sxs-lookup"><span data-stu-id="7bff1-241">token_type</span></span> |<span data-ttu-id="7bff1-242">hello tokentypen värde.</span><span class="sxs-lookup"><span data-stu-id="7bff1-242">hello token type value.</span></span> <span data-ttu-id="7bff1-243">hello Skriv endast att Azure AD stöder är ägar.</span><span class="sxs-lookup"><span data-stu-id="7bff1-243">hello only type that Azure AD supports is Bearer.</span></span> |
| <span data-ttu-id="7bff1-244">access_token</span><span class="sxs-lookup"><span data-stu-id="7bff1-244">access_token</span></span> |<span data-ttu-id="7bff1-245">hello signerade JSON-Webbtoken (JWT) som du har begärt.</span><span class="sxs-lookup"><span data-stu-id="7bff1-245">hello signed JSON Web Token (JWT) that you requested.</span></span> |
| <span data-ttu-id="7bff1-246">Omfång</span><span class="sxs-lookup"><span data-stu-id="7bff1-246">scope</span></span> |<span data-ttu-id="7bff1-247">hello scope som hello token är giltig för.</span><span class="sxs-lookup"><span data-stu-id="7bff1-247">hello scopes that hello token is valid for.</span></span> <span data-ttu-id="7bff1-248">Du kan också använda omfång toocache token för senare användning.</span><span class="sxs-lookup"><span data-stu-id="7bff1-248">You also can use scopes toocache tokens for later use.</span></span> |
| <span data-ttu-id="7bff1-249">expires_in</span><span class="sxs-lookup"><span data-stu-id="7bff1-249">expires_in</span></span> |<span data-ttu-id="7bff1-250">hello tidslängd som hello token är giltig (i sekunder).</span><span class="sxs-lookup"><span data-stu-id="7bff1-250">hello length of time that hello token is valid (in seconds).</span></span> |
| <span data-ttu-id="7bff1-251">refresh_token</span><span class="sxs-lookup"><span data-stu-id="7bff1-251">refresh_token</span></span> |<span data-ttu-id="7bff1-252">En token för uppdatering av OAuth 2.0.</span><span class="sxs-lookup"><span data-stu-id="7bff1-252">An OAuth 2.0 refresh token.</span></span> <span data-ttu-id="7bff1-253">hello app kan använda den här token tooacquire ytterligare token när hello aktuella token upphör att gälla.</span><span class="sxs-lookup"><span data-stu-id="7bff1-253">hello app can use this token tooacquire additional tokens after hello current token expires.</span></span> <span data-ttu-id="7bff1-254">Uppdateringstoken är långlivade.</span><span class="sxs-lookup"><span data-stu-id="7bff1-254">Refresh tokens are long-lived.</span></span> <span data-ttu-id="7bff1-255">Du kan använda dem tooretain åtkomst tooresources för längre tid.</span><span class="sxs-lookup"><span data-stu-id="7bff1-255">You can use them tooretain access tooresources for extended periods of time.</span></span> <span data-ttu-id="7bff1-256">Mer information finns i hello [Azure AD B2C tokenreferens](active-directory-b2c-reference-tokens.md).</span><span class="sxs-lookup"><span data-stu-id="7bff1-256">For more information, see hello [Azure AD B2C token reference](active-directory-b2c-reference-tokens.md).</span></span> |

<span data-ttu-id="7bff1-257">Felsvar se ut så här:</span><span class="sxs-lookup"><span data-stu-id="7bff1-257">Error responses look like this:</span></span>

```
{
    "error": "access_denied",
    "error_description": "hello user revoked access toohello app.",
}
```

| <span data-ttu-id="7bff1-258">Parameter</span><span class="sxs-lookup"><span data-stu-id="7bff1-258">Parameter</span></span> | <span data-ttu-id="7bff1-259">Beskrivning</span><span class="sxs-lookup"><span data-stu-id="7bff1-259">Description</span></span> |
| --- | --- |
| <span data-ttu-id="7bff1-260">fel</span><span class="sxs-lookup"><span data-stu-id="7bff1-260">error</span></span> |<span data-ttu-id="7bff1-261">Ett felkod sträng som du kan använda tooclassify hello typer av fel som inträffar.</span><span class="sxs-lookup"><span data-stu-id="7bff1-261">An error code string that you can use tooclassify hello types of errors that occur.</span></span> <span data-ttu-id="7bff1-262">Du kan också använda hello sträng tooreact tooerrors.</span><span class="sxs-lookup"><span data-stu-id="7bff1-262">You also can use hello string tooreact tooerrors.</span></span> |
| <span data-ttu-id="7bff1-263">error_description</span><span class="sxs-lookup"><span data-stu-id="7bff1-263">error_description</span></span> |<span data-ttu-id="7bff1-264">Ett felmeddelande som kan hjälpa dig att identifiera hello grundorsaken till ett autentiseringsfel.</span><span class="sxs-lookup"><span data-stu-id="7bff1-264">A specific error message that can help you identify hello root cause of an authentication error.</span></span> |

## <a name="3-use-hello-token"></a><span data-ttu-id="7bff1-265">3. Använd hello-token</span><span class="sxs-lookup"><span data-stu-id="7bff1-265">3. Use hello token</span></span>
<span data-ttu-id="7bff1-266">Nu när du har har skaffat ett åtkomsttoken, du kan använda hello token i begäranden tooyour backend-webb-API: er genom att inkludera i hello `Authorization` huvud:</span><span class="sxs-lookup"><span data-stu-id="7bff1-266">Now that you've successfully acquired an access token, you can use hello token in requests tooyour back-end web APIs by including it in hello `Authorization` header:</span></span>

```
GET /tasks
Host: https://mytaskwebapi.com
Authorization: Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6Ik5HVEZ2ZEstZnl0aEV1Q...
```

## <a name="4-refresh-hello-token"></a><span data-ttu-id="7bff1-267">4. Uppdatera hello-token</span><span class="sxs-lookup"><span data-stu-id="7bff1-267">4. Refresh hello token</span></span>
<span data-ttu-id="7bff1-268">Åtkomst-token och ID-token är tillfällig.</span><span class="sxs-lookup"><span data-stu-id="7bff1-268">Access tokens and ID tokens are short-lived.</span></span> <span data-ttu-id="7bff1-269">När de upphör att gälla måste du uppdatera dem toocontinue tooaccess resurser.</span><span class="sxs-lookup"><span data-stu-id="7bff1-269">After they expire, you must refresh them toocontinue tooaccess resources.</span></span> <span data-ttu-id="7bff1-270">toodo kan skicka en annan POST-begäran toohello `/token` slutpunkt.</span><span class="sxs-lookup"><span data-stu-id="7bff1-270">toodo this, submit another POST request toohello `/token` endpoint.</span></span> <span data-ttu-id="7bff1-271">Den här tiden kan ge hello `refresh_token` i stället för hello `code`:</span><span class="sxs-lookup"><span data-stu-id="7bff1-271">This time, provide hello `refresh_token` instead of hello `code`:</span></span>

```
POST fabrikamb2c.onmicrosoft.com/oauth2/v2.0/token?p=b2c_1_sign_in HTTP/1.1
Host: https://login.microsoftonline.com
Content-Type: application/x-www-form-urlencoded

grant_type=refresh_token&client_id=90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6&scope=90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6 offline_access&refresh_token=AwABAAAAvPM1KaPlrEqdFSBzjqfTGBCmLdgfSTLEMPGYuNHSUYBrq...&redirect_uri=urn:ietf:wg:oauth:2.0:oob
```

| <span data-ttu-id="7bff1-272">Parameter</span><span class="sxs-lookup"><span data-stu-id="7bff1-272">Parameter</span></span> | <span data-ttu-id="7bff1-273">Krävs?</span><span class="sxs-lookup"><span data-stu-id="7bff1-273">Required?</span></span> | <span data-ttu-id="7bff1-274">Beskrivning</span><span class="sxs-lookup"><span data-stu-id="7bff1-274">Description</span></span> |
| --- | --- | --- |
| <span data-ttu-id="7bff1-275">P</span><span class="sxs-lookup"><span data-stu-id="7bff1-275">p</span></span> |<span data-ttu-id="7bff1-276">Krävs</span><span class="sxs-lookup"><span data-stu-id="7bff1-276">Required</span></span> |<span data-ttu-id="7bff1-277">hello-princip som har använt tooacquire hello ursprungliga uppdateringstoken.</span><span class="sxs-lookup"><span data-stu-id="7bff1-277">hello policy that was used tooacquire hello original refresh token.</span></span> <span data-ttu-id="7bff1-278">Du kan inte använda en annan princip i den här förfrågan.</span><span class="sxs-lookup"><span data-stu-id="7bff1-278">You cannot use a different policy in this request.</span></span> <span data-ttu-id="7bff1-279">Observera att lägga till den här parametern toohello *frågesträng*, inte i hello POST brödtext.</span><span class="sxs-lookup"><span data-stu-id="7bff1-279">Note that you add this parameter toohello *query string*, not in hello POST body.</span></span> |
| <span data-ttu-id="7bff1-280">client_id</span><span class="sxs-lookup"><span data-stu-id="7bff1-280">client_id</span></span> |<span data-ttu-id="7bff1-281">Rekommenderas</span><span class="sxs-lookup"><span data-stu-id="7bff1-281">Recommended</span></span> |<span data-ttu-id="7bff1-282">hello program-ID tilldelade tooyour app i hello [Azure-portalen](https://portal.azure.com).</span><span class="sxs-lookup"><span data-stu-id="7bff1-282">hello application ID assigned tooyour app in hello [Azure portal](https://portal.azure.com).</span></span> |
| <span data-ttu-id="7bff1-283">grant_type</span><span class="sxs-lookup"><span data-stu-id="7bff1-283">grant_type</span></span> |<span data-ttu-id="7bff1-284">Krävs</span><span class="sxs-lookup"><span data-stu-id="7bff1-284">Required</span></span> |<span data-ttu-id="7bff1-285">bevilja hello typ.</span><span class="sxs-lookup"><span data-stu-id="7bff1-285">hello type of grant.</span></span> <span data-ttu-id="7bff1-286">För denna del av hello auktoriseringskodflödet hello bevilja typ måste vara `refresh_token`.</span><span class="sxs-lookup"><span data-stu-id="7bff1-286">For this leg of hello authorization code flow, hello grant type must be `refresh_token`.</span></span> |
| <span data-ttu-id="7bff1-287">Omfång</span><span class="sxs-lookup"><span data-stu-id="7bff1-287">scope</span></span> |<span data-ttu-id="7bff1-288">Rekommenderas</span><span class="sxs-lookup"><span data-stu-id="7bff1-288">Recommended</span></span> |<span data-ttu-id="7bff1-289">En blankstegsavgränsad lista över scope.</span><span class="sxs-lookup"><span data-stu-id="7bff1-289">A space-separated list of scopes.</span></span> <span data-ttu-id="7bff1-290">Ett enda scope-värde anger tooAzure AD båda hello behörigheter som tas emot.</span><span class="sxs-lookup"><span data-stu-id="7bff1-290">A single scope value indicates tooAzure AD both of hello permissions that are being requested.</span></span> <span data-ttu-id="7bff1-291">Med hjälp av hello klient-ID som hello scope visar att din app behöver ett åtkomsttoken som kan användas med tjänsten eller webb-API, som representeras av hello samma klient-ID.</span><span class="sxs-lookup"><span data-stu-id="7bff1-291">Using hello client ID as hello scope indicates that your app needs an access token that can be used against your own service or web API, represented by hello same client ID.</span></span>  <span data-ttu-id="7bff1-292">Hej `offline_access` omfång anger att din app behöver en uppdateringstoken för långlivade åtkomst tooresources.</span><span class="sxs-lookup"><span data-stu-id="7bff1-292">hello `offline_access` scope indicates that your app will need a refresh token for long-lived access tooresources.</span></span>  <span data-ttu-id="7bff1-293">Du kan också använda hello `openid` omfång toorequest en ID-token från Azure AD B2C.</span><span class="sxs-lookup"><span data-stu-id="7bff1-293">You also can use hello `openid` scope toorequest an ID token from Azure AD B2C.</span></span> |
| <span data-ttu-id="7bff1-294">redirect_uri</span><span class="sxs-lookup"><span data-stu-id="7bff1-294">redirect_uri</span></span> |<span data-ttu-id="7bff1-295">Valfri</span><span class="sxs-lookup"><span data-stu-id="7bff1-295">Optional</span></span> |<span data-ttu-id="7bff1-296">hello omdirigerings-URI för hello program som du fick hello auktoriseringskod.</span><span class="sxs-lookup"><span data-stu-id="7bff1-296">hello redirect URI of hello application where you received hello authorization code.</span></span> |
| <span data-ttu-id="7bff1-297">refresh_token</span><span class="sxs-lookup"><span data-stu-id="7bff1-297">refresh_token</span></span> |<span data-ttu-id="7bff1-298">Krävs</span><span class="sxs-lookup"><span data-stu-id="7bff1-298">Required</span></span> |<span data-ttu-id="7bff1-299">hello ursprungliga uppdateringstoken som du har införskaffade i hello andra ben hello flödet.</span><span class="sxs-lookup"><span data-stu-id="7bff1-299">hello original refresh token that you acquired in hello second leg of hello flow.</span></span> |

<span data-ttu-id="7bff1-300">Ett lyckat svar för token som ser ut så här:</span><span class="sxs-lookup"><span data-stu-id="7bff1-300">A successful token response looks like this:</span></span>

```
{
    "not_before": "1442340812",
    "token_type": "Bearer",
    "access_token": "eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6Ik5HVEZ2ZEstZnl0aEV1Q...",
    "scope": "90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6 offline_access",
    "expires_in": "3600",
    "refresh_token": "AAQfQmvuDy8WtUv-sd0TBwWVQs1rC-Lfxa_NDkLqpg50Cxp5Dxj0VPF1mx2Z...",
}
```
| <span data-ttu-id="7bff1-301">Parameter</span><span class="sxs-lookup"><span data-stu-id="7bff1-301">Parameter</span></span> | <span data-ttu-id="7bff1-302">Beskrivning</span><span class="sxs-lookup"><span data-stu-id="7bff1-302">Description</span></span> |
| --- | --- |
| <span data-ttu-id="7bff1-303">not_before</span><span class="sxs-lookup"><span data-stu-id="7bff1-303">not_before</span></span> |<span data-ttu-id="7bff1-304">hello tid vid vilken hello token betraktas som giltigt epok tidpunkt.</span><span class="sxs-lookup"><span data-stu-id="7bff1-304">hello time at which hello token is considered valid, in epoch time.</span></span> |
| <span data-ttu-id="7bff1-305">token_type</span><span class="sxs-lookup"><span data-stu-id="7bff1-305">token_type</span></span> |<span data-ttu-id="7bff1-306">hello tokentypen värde.</span><span class="sxs-lookup"><span data-stu-id="7bff1-306">hello token type value.</span></span> <span data-ttu-id="7bff1-307">hello Skriv endast att Azure AD stöder är ägar.</span><span class="sxs-lookup"><span data-stu-id="7bff1-307">hello only type that Azure AD supports is Bearer.</span></span> |
| <span data-ttu-id="7bff1-308">access_token</span><span class="sxs-lookup"><span data-stu-id="7bff1-308">access_token</span></span> |<span data-ttu-id="7bff1-309">hello signerade JWT som du har begärt.</span><span class="sxs-lookup"><span data-stu-id="7bff1-309">hello signed JWT that you requested.</span></span> |
| <span data-ttu-id="7bff1-310">Omfång</span><span class="sxs-lookup"><span data-stu-id="7bff1-310">scope</span></span> |<span data-ttu-id="7bff1-311">hello scope som hello token är giltig för.</span><span class="sxs-lookup"><span data-stu-id="7bff1-311">hello scopes that hello token is valid for.</span></span> <span data-ttu-id="7bff1-312">Du kan också använda hello scope toocache token för senare användning.</span><span class="sxs-lookup"><span data-stu-id="7bff1-312">You also can use hello scopes toocache tokens for later use.</span></span> |
| <span data-ttu-id="7bff1-313">expires_in</span><span class="sxs-lookup"><span data-stu-id="7bff1-313">expires_in</span></span> |<span data-ttu-id="7bff1-314">hello tidslängd som hello token är giltig (i sekunder).</span><span class="sxs-lookup"><span data-stu-id="7bff1-314">hello length of time that hello token is valid (in seconds).</span></span> |
| <span data-ttu-id="7bff1-315">refresh_token</span><span class="sxs-lookup"><span data-stu-id="7bff1-315">refresh_token</span></span> |<span data-ttu-id="7bff1-316">En token för uppdatering av OAuth 2.0.</span><span class="sxs-lookup"><span data-stu-id="7bff1-316">An OAuth 2.0 refresh token.</span></span> <span data-ttu-id="7bff1-317">hello app kan använda den här token tooacquire ytterligare token när hello aktuella token upphör att gälla.</span><span class="sxs-lookup"><span data-stu-id="7bff1-317">hello app can use this token tooacquire additional tokens after hello current token expires.</span></span> <span data-ttu-id="7bff1-318">Uppdatera token är långlivade och kan vara används tooretain åtkomst tooresources för längre tid.</span><span class="sxs-lookup"><span data-stu-id="7bff1-318">Refresh tokens are long-lived, and can be used tooretain access tooresources for extended periods of time.</span></span> <span data-ttu-id="7bff1-319">Mer information finns i hello [Azure AD B2C tokenreferens](active-directory-b2c-reference-tokens.md).</span><span class="sxs-lookup"><span data-stu-id="7bff1-319">For more information, see hello [Azure AD B2C token reference](active-directory-b2c-reference-tokens.md).</span></span> |

<span data-ttu-id="7bff1-320">Felsvar se ut så här:</span><span class="sxs-lookup"><span data-stu-id="7bff1-320">Error responses look like this:</span></span>

```
{
    "error": "access_denied",
    "error_description": "hello user revoked access toohello app.",
}
```

| <span data-ttu-id="7bff1-321">Parameter</span><span class="sxs-lookup"><span data-stu-id="7bff1-321">Parameter</span></span> | <span data-ttu-id="7bff1-322">Beskrivning</span><span class="sxs-lookup"><span data-stu-id="7bff1-322">Description</span></span> |
| --- | --- |
| <span data-ttu-id="7bff1-323">fel</span><span class="sxs-lookup"><span data-stu-id="7bff1-323">error</span></span> |<span data-ttu-id="7bff1-324">Ett felkod sträng som du kan använda tooclassify typer av fel som inträffar.</span><span class="sxs-lookup"><span data-stu-id="7bff1-324">An error code string that you can use tooclassify types of errors that occur.</span></span> <span data-ttu-id="7bff1-325">Du kan också använda hello sträng tooreact tooerrors.</span><span class="sxs-lookup"><span data-stu-id="7bff1-325">You also can use hello string tooreact tooerrors.</span></span> |
| <span data-ttu-id="7bff1-326">error_description</span><span class="sxs-lookup"><span data-stu-id="7bff1-326">error_description</span></span> |<span data-ttu-id="7bff1-327">Ett felmeddelande som kan hjälpa dig att identifiera hello grundorsaken till ett autentiseringsfel.</span><span class="sxs-lookup"><span data-stu-id="7bff1-327">A specific error message that can help you identify hello root cause of an authentication error.</span></span> |

## <a name="use-your-own-azure-ad-b2c-directory"></a><span data-ttu-id="7bff1-328">Använda din egen Azure AD B2C-katalog</span><span class="sxs-lookup"><span data-stu-id="7bff1-328">Use your own Azure AD B2C directory</span></span>
<span data-ttu-id="7bff1-329">tootry dessa begäranden själv fullständig hello följande steg.</span><span class="sxs-lookup"><span data-stu-id="7bff1-329">tootry these requests yourself, complete hello following steps.</span></span> <span data-ttu-id="7bff1-330">Ersätt exempelvärden för hello som vi använde i den här artikeln med egna värden.</span><span class="sxs-lookup"><span data-stu-id="7bff1-330">Replace hello example values we used in this article with your own values.</span></span>

1. <span data-ttu-id="7bff1-331">[Skapa en Azure AD B2C-katalog](active-directory-b2c-get-started.md).</span><span class="sxs-lookup"><span data-stu-id="7bff1-331">[Create an Azure AD B2C directory](active-directory-b2c-get-started.md).</span></span> <span data-ttu-id="7bff1-332">Använd hello namn i din katalog i hello begäranden.</span><span class="sxs-lookup"><span data-stu-id="7bff1-332">Use hello name of your directory in hello requests.</span></span>
2. <span data-ttu-id="7bff1-333">[Skapa ett program](active-directory-b2c-app-registration.md) tooobtain ett program-ID och omdirigerings-URI.</span><span class="sxs-lookup"><span data-stu-id="7bff1-333">[Create an application](active-directory-b2c-app-registration.md) tooobtain an application ID and a redirect URI.</span></span> <span data-ttu-id="7bff1-334">Inkludera en intern klient i din app.</span><span class="sxs-lookup"><span data-stu-id="7bff1-334">Include a native client in your app.</span></span>
3. <span data-ttu-id="7bff1-335">[Skapa dina principer](active-directory-b2c-reference-policies.md) tooobtain principens namn.</span><span class="sxs-lookup"><span data-stu-id="7bff1-335">[Create your policies](active-directory-b2c-reference-policies.md) tooobtain your policy names.</span></span>


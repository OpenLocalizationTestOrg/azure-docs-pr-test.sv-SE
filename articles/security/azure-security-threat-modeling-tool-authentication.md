---
title: Azure Authentication - verktyget Microsoft Threat modellering - | Microsoft Docs
description: "ändringar för hot som exponeras i verktyget Modeling hot"
services: security
documentationcenter: na
author: RodSan
manager: RodSan
editor: RodSan
ms.assetid: na
ms.service: security
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 08/17/2017
ms.author: rodsan
ms.openlocfilehash: e547469dc61eddd1d772571ab0919532ac91f128
ms.sourcegitcommit: 18ad9bc049589c8e44ed277f8f43dcaa483f3339
ms.translationtype: MT
ms.contentlocale: sv-SE
ms.lasthandoff: 08/29/2017
---
# <a name="security-frame-authentication--mitigations"></a><span data-ttu-id="c3da9-103">Säkerhet ram: Autentisering | Åtgärder</span><span class="sxs-lookup"><span data-stu-id="c3da9-103">Security Frame: Authentication | Mitigations</span></span> 
| <span data-ttu-id="c3da9-104">Produkter eller tjänster</span><span class="sxs-lookup"><span data-stu-id="c3da9-104">Product/Service</span></span> | <span data-ttu-id="c3da9-105">Artikel</span><span class="sxs-lookup"><span data-stu-id="c3da9-105">Article</span></span> |
| --------------- | ------- |
| <span data-ttu-id="c3da9-106">**Webbprogram**</span><span class="sxs-lookup"><span data-stu-id="c3da9-106">**Web Application**</span></span>    | <ul><li>[<span data-ttu-id="c3da9-107">Överväg att använda en standard autentiseringsmekanism för att autentisera till webbprogram</span><span class="sxs-lookup"><span data-stu-id="c3da9-107">Consider using a standard authentication mechanism to authenticate to Web Application</span></span>](#standard-authn-web-app)</li><li>[<span data-ttu-id="c3da9-108">Program måste hantera misslyckade autentiseringsscenarier på ett säkert sätt</span><span class="sxs-lookup"><span data-stu-id="c3da9-108">Applications must handle failed authentication scenarios securely</span></span>](#handle-failed-authn)</li><li>[<span data-ttu-id="c3da9-109">Aktivera steg uppåt eller anpassad autentisering</span><span class="sxs-lookup"><span data-stu-id="c3da9-109">Enable step up or adaptive authentication</span></span>](#step-up-adaptive-authn)</li><li>[<span data-ttu-id="c3da9-110">Se till att administrativa gränssnitt är korrekt låsta</span><span class="sxs-lookup"><span data-stu-id="c3da9-110">Ensure that administrative interfaces are appropriately locked down</span></span>](#admin-interface-lockdown)</li><li>[<span data-ttu-id="c3da9-111">Implementera har glömt lösenord funktioner på ett säkert sätt</span><span class="sxs-lookup"><span data-stu-id="c3da9-111">Implement forgot password functionalities securely</span></span>](#forgot-pword-fxn)</li><li>[<span data-ttu-id="c3da9-112">Se till att lösenord och principen tillämpas</span><span class="sxs-lookup"><span data-stu-id="c3da9-112">Ensure that password and account policy are implemented</span></span>](#pword-account-policy)</li><li>[<span data-ttu-id="c3da9-113">Implementera kontroller för att förhindra användarnamn uppräkning</span><span class="sxs-lookup"><span data-stu-id="c3da9-113">Implement controls to prevent username enumeration</span></span>](#controls-username-enum)</li></ul> |
| <span data-ttu-id="c3da9-114">**Databas**</span><span class="sxs-lookup"><span data-stu-id="c3da9-114">**Database**</span></span> | <ul><li>[<span data-ttu-id="c3da9-115">Använd Windows-autentisering för att ansluta till SQL Server</span><span class="sxs-lookup"><span data-stu-id="c3da9-115">When possible, use Windows Authentication for connecting to SQL Server</span></span>](#win-authn-sql)</li><li>[<span data-ttu-id="c3da9-116">När det är möjligt använda Azure Active Directory-autentisering för anslutning till SQL-databas</span><span class="sxs-lookup"><span data-stu-id="c3da9-116">When possible use Azure Active Directory Authentication for Connecting to SQL Database</span></span>](#aad-authn-sql)</li><li>[<span data-ttu-id="c3da9-117">När SQL-autentiseringsläge används, se till att konto och lösenord principen tillämpas på SQLServer</span><span class="sxs-lookup"><span data-stu-id="c3da9-117">When SQL authentication mode is used, ensure that account and password policy are enforced on SQL server</span></span>](#authn-account-pword)</li><li>[<span data-ttu-id="c3da9-118">Använd inte SQL-autentisering i inneslutna databaser</span><span class="sxs-lookup"><span data-stu-id="c3da9-118">Do not use SQL Authentication in contained databases</span></span>](#autn-contained-db)</li></ul> |
| <span data-ttu-id="c3da9-119">**Azure Event Hub**</span><span class="sxs-lookup"><span data-stu-id="c3da9-119">**Azure Event Hub**</span></span> | <ul><li>[<span data-ttu-id="c3da9-120">Använda per enhet autentiseringsuppgifter med hjälp av SaS-token</span><span class="sxs-lookup"><span data-stu-id="c3da9-120">Use per device authentication credentials using SaS tokens</span></span>](#authn-sas-tokens)</li></ul> |
| <span data-ttu-id="c3da9-121">**Azure Förtroendegräns**</span><span class="sxs-lookup"><span data-stu-id="c3da9-121">**Azure Trust Boundary**</span></span> | <ul><li>[<span data-ttu-id="c3da9-122">Aktivera Azure Multi-Factor Authentication för Azure-administratörer</span><span class="sxs-lookup"><span data-stu-id="c3da9-122">Enable Azure Multi-Factor Authentication for Azure Administrators</span></span>](#multi-factor-azure-admin)</li></ul> |
| <span data-ttu-id="c3da9-123">**Service Fabric-Förtroendegräns**</span><span class="sxs-lookup"><span data-stu-id="c3da9-123">**Service Fabric Trust Boundary**</span></span> | <ul><li>[<span data-ttu-id="c3da9-124">Begränsa anonym åtkomst till Service Fabric-kluster</span><span class="sxs-lookup"><span data-stu-id="c3da9-124">Restrict anonymous access to Service Fabric Cluster</span></span>](#anon-access-cluster)</li><li>[<span data-ttu-id="c3da9-125">Se till att certifikatet för Service Fabric-klient-till-nod skiljer sig från nod till nod certifikatet</span><span class="sxs-lookup"><span data-stu-id="c3da9-125">Ensure that Service Fabric client-to-node certificate is different from node-to-node certificate</span></span>](#fabric-cn-nn)</li><li>[<span data-ttu-id="c3da9-126">Använd AAD för att autentisera klienter till service fabric-kluster</span><span class="sxs-lookup"><span data-stu-id="c3da9-126">Use AAD to authenticate clients to service fabric clusters</span></span>](#aad-client-fabric)</li><li>[<span data-ttu-id="c3da9-127">Se till att service fabric certifikat hämtas från en godkänd certifikatutfärdare (CA)</span><span class="sxs-lookup"><span data-stu-id="c3da9-127">Ensure that service fabric certificates are obtained from an approved Certificate Authority (CA)</span></span>](#fabric-cert-ca)</li></ul> |
| <span data-ttu-id="c3da9-128">**Identity Server**</span><span class="sxs-lookup"><span data-stu-id="c3da9-128">**Identity Server**</span></span> | <ul><li>[<span data-ttu-id="c3da9-129">Använd standardautentisering scenarier som stöds av Identity Server</span><span class="sxs-lookup"><span data-stu-id="c3da9-129">Use standard authentication scenarios supported by Identity Server</span></span>](#standard-authn-id)</li><li>[<span data-ttu-id="c3da9-130">Åsidosätta standard Identity Server tokens cacheminne med ett skalbart alternativ</span><span class="sxs-lookup"><span data-stu-id="c3da9-130">Override the default Identity Server token cache with a scalable alternative</span></span>](#override-token)</li></ul> |
| <span data-ttu-id="c3da9-131">**Datorn Förtroendegräns**</span><span class="sxs-lookup"><span data-stu-id="c3da9-131">**Machine Trust Boundary**</span></span> | <ul><li>[<span data-ttu-id="c3da9-132">Se till att binärfilerna för distribuerade program är digitalt signerade</span><span class="sxs-lookup"><span data-stu-id="c3da9-132">Ensure that deployed application's binaries are digitally signed</span></span>](#binaries-signed)</li></ul> |
| <span data-ttu-id="c3da9-133">**WCF**</span><span class="sxs-lookup"><span data-stu-id="c3da9-133">**WCF**</span></span> | <ul><li>[<span data-ttu-id="c3da9-134">Aktivera autentisering vid anslutning till MSMQ-köer i WCF</span><span class="sxs-lookup"><span data-stu-id="c3da9-134">Enable authentication when connecting to MSMQ queues in WCF</span></span>](#msmq-queues)</li><li>[<span data-ttu-id="c3da9-135">WCF-Använd Ange inte meddelande clientCredentialType till ingen</span><span class="sxs-lookup"><span data-stu-id="c3da9-135">WCF-Do not set Message clientCredentialType to none</span></span>](#message-none)</li><li>[<span data-ttu-id="c3da9-136">WCF-vill ange inte Transport clientCredentialType till ingen</span><span class="sxs-lookup"><span data-stu-id="c3da9-136">WCF-Do not set Transport clientCredentialType to none</span></span>](#transport-none)</li></ul> |
| <span data-ttu-id="c3da9-137">**Webb-API**</span><span class="sxs-lookup"><span data-stu-id="c3da9-137">**Web API**</span></span> | <ul><li>[<span data-ttu-id="c3da9-138">Se till att standardautentisering tekniker som används för att skydda webb-API: er</span><span class="sxs-lookup"><span data-stu-id="c3da9-138">Ensure that standard authentication techniques are used to secure Web APIs</span></span>](#authn-secure-api)</li></ul> |
| <span data-ttu-id="c3da9-139">**Azure AD**</span><span class="sxs-lookup"><span data-stu-id="c3da9-139">**Azure AD**</span></span> | <ul><li>[<span data-ttu-id="c3da9-140">Använd standardautentisering scenarier som stöds av Azure Active Directory</span><span class="sxs-lookup"><span data-stu-id="c3da9-140">Use standard authentication scenarios supported by Azure Active Directory</span></span>](#authn-aad)</li><li>[<span data-ttu-id="c3da9-141">Åsidosätta standard ADAL-token cache med ett skalbart alternativ</span><span class="sxs-lookup"><span data-stu-id="c3da9-141">Override the default ADAL token cache with a scalable alternative</span></span>](#adal-scalable)</li><li>[<span data-ttu-id="c3da9-142">Kontrollera att TokenReplayCache används för att förhindra omsändning av ADAL-autentisering-token</span><span class="sxs-lookup"><span data-stu-id="c3da9-142">Ensure that TokenReplayCache is used to prevent the replay of ADAL authentication tokens</span></span>](#tokenreplaycache-adal)</li><li>[<span data-ttu-id="c3da9-143">Använd ADA-biblioteken för att hantera förfrågningar om säkerhetstoken från OAuth2-klienter till AAD (eller lokala AD)</span><span class="sxs-lookup"><span data-stu-id="c3da9-143">Use ADAL libraries to manage token requests from OAuth2 clients to AAD (or on-premises AD)</span></span>](#adal-oauth2)</li></ul> |
| <span data-ttu-id="c3da9-144">**Fältet för IoT-Gateway**</span><span class="sxs-lookup"><span data-stu-id="c3da9-144">**IoT Field Gateway**</span></span> | <ul><li>[<span data-ttu-id="c3da9-145">Autentisera enheter som ansluter till fältet-Gateway</span><span class="sxs-lookup"><span data-stu-id="c3da9-145">Authenticate devices connecting to the Field Gateway</span></span>](#authn-devices-field)</li></ul> |
| <span data-ttu-id="c3da9-146">**Gateway för IoT-moln**</span><span class="sxs-lookup"><span data-stu-id="c3da9-146">**IoT Cloud Gateway**</span></span> | <ul><li>[<span data-ttu-id="c3da9-147">Se till att enheter som ansluter till molntjänster gateway autentiseras</span><span class="sxs-lookup"><span data-stu-id="c3da9-147">Ensure that devices connecting to Cloud gateway are authenticated</span></span>](#authn-devices-cloud)</li><li>[<span data-ttu-id="c3da9-148">Använd autentiseringsuppgifter för per enhet</span><span class="sxs-lookup"><span data-stu-id="c3da9-148">Use per-device authentication credentials</span></span>](#authn-cred)</li></ul> |
| <span data-ttu-id="c3da9-149">**Azure Storage**</span><span class="sxs-lookup"><span data-stu-id="c3da9-149">**Azure Storage**</span></span> | <ul><li>[<span data-ttu-id="c3da9-150">Se till att endast nödvändiga behållare och blobbar ges anonym läsbehörighet</span><span class="sxs-lookup"><span data-stu-id="c3da9-150">Ensure that only the required containers and blobs are given anonymous read access</span></span>](#req-containers-anon)</li><li>[<span data-ttu-id="c3da9-151">Bevilja begränsad åtkomst till objekt i Azure storage med hjälp av SAS eller SAP</span><span class="sxs-lookup"><span data-stu-id="c3da9-151">Grant limited access to objects in Azure storage using SAS or SAP</span></span>](#limited-access-sas)</li></ul> |

## <span data-ttu-id="c3da9-152"><a id="standard-authn-web-app"></a>Överväg att använda en standard autentiseringsmekanism för att autentisera till webbprogram</span><span class="sxs-lookup"><span data-stu-id="c3da9-152"><a id="standard-authn-web-app"></a>Consider using a standard authentication mechanism to authenticate to Web Application</span></span>

| <span data-ttu-id="c3da9-153">Rubrik</span><span class="sxs-lookup"><span data-stu-id="c3da9-153">Title</span></span>                   | <span data-ttu-id="c3da9-154">Information</span><span class="sxs-lookup"><span data-stu-id="c3da9-154">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="c3da9-155">**Komponent**</span><span class="sxs-lookup"><span data-stu-id="c3da9-155">**Component**</span></span>               | <span data-ttu-id="c3da9-156">Webbprogram</span><span class="sxs-lookup"><span data-stu-id="c3da9-156">Web Application</span></span> | 
| <span data-ttu-id="c3da9-157">**SDL fas**</span><span class="sxs-lookup"><span data-stu-id="c3da9-157">**SDL Phase**</span></span>               | <span data-ttu-id="c3da9-158">Utveckla</span><span class="sxs-lookup"><span data-stu-id="c3da9-158">Build</span></span> |  
| <span data-ttu-id="c3da9-159">**Tillämpliga tekniker**</span><span class="sxs-lookup"><span data-stu-id="c3da9-159">**Applicable Technologies**</span></span> | <span data-ttu-id="c3da9-160">Generisk</span><span class="sxs-lookup"><span data-stu-id="c3da9-160">Generic</span></span> |
| <span data-ttu-id="c3da9-161">**Attribut**</span><span class="sxs-lookup"><span data-stu-id="c3da9-161">**Attributes**</span></span>              | <span data-ttu-id="c3da9-162">Saknas</span><span class="sxs-lookup"><span data-stu-id="c3da9-162">N/A</span></span>  |
| <span data-ttu-id="c3da9-163">**Referenser**</span><span class="sxs-lookup"><span data-stu-id="c3da9-163">**References**</span></span>              | <span data-ttu-id="c3da9-164">Saknas</span><span class="sxs-lookup"><span data-stu-id="c3da9-164">N/A</span></span>  |
| <span data-ttu-id="c3da9-165">Information</span><span class="sxs-lookup"><span data-stu-id="c3da9-165">Details</span></span> | <p><span data-ttu-id="c3da9-166">Autentisering är den process där en entitet bevisar sin identitet, vanligtvis via autentiseringsuppgifter, till exempel användarnamn och lösenord.</span><span class="sxs-lookup"><span data-stu-id="c3da9-166">Authentication is the process where an entity proves its identity, typically through credentials, such as a user name and password.</span></span> <span data-ttu-id="c3da9-167">Det finns flera autentiseringsprotokoll tillgänglig som kan betraktas.</span><span class="sxs-lookup"><span data-stu-id="c3da9-167">There are multiple authentication protocols available which may be considered.</span></span> <span data-ttu-id="c3da9-168">Några av dem visas nedan:</span><span class="sxs-lookup"><span data-stu-id="c3da9-168">Some of them are listed below:</span></span></p><ul><li><span data-ttu-id="c3da9-169">Klientcertifikat</span><span class="sxs-lookup"><span data-stu-id="c3da9-169">Client certificates</span></span></li><li><span data-ttu-id="c3da9-170">Windows-baserade</span><span class="sxs-lookup"><span data-stu-id="c3da9-170">Windows based</span></span></li><li><span data-ttu-id="c3da9-171">Formulärbaserad</span><span class="sxs-lookup"><span data-stu-id="c3da9-171">Forms based</span></span></li><li><span data-ttu-id="c3da9-172">Federation - AD FS</span><span class="sxs-lookup"><span data-stu-id="c3da9-172">Federation - ADFS</span></span></li><li><span data-ttu-id="c3da9-173">Federation - Azure AD</span><span class="sxs-lookup"><span data-stu-id="c3da9-173">Federation - Azure AD</span></span></li><li><span data-ttu-id="c3da9-174">Federation - Identity Server</span><span class="sxs-lookup"><span data-stu-id="c3da9-174">Federation - Identity Server</span></span></li></ul><p><span data-ttu-id="c3da9-175">Överväg att använda en standard autentiseringsmekanism för att identifiera Källprocessen</span><span class="sxs-lookup"><span data-stu-id="c3da9-175">Consider using a standard authentication mechanism to identify the source process</span></span></p>|

## <span data-ttu-id="c3da9-176"><a id="handle-failed-authn"></a>Program måste hantera misslyckade autentiseringsscenarier på ett säkert sätt</span><span class="sxs-lookup"><span data-stu-id="c3da9-176"><a id="handle-failed-authn"></a>Applications must handle failed authentication scenarios securely</span></span>

| <span data-ttu-id="c3da9-177">Rubrik</span><span class="sxs-lookup"><span data-stu-id="c3da9-177">Title</span></span>                   | <span data-ttu-id="c3da9-178">Information</span><span class="sxs-lookup"><span data-stu-id="c3da9-178">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="c3da9-179">**Komponent**</span><span class="sxs-lookup"><span data-stu-id="c3da9-179">**Component**</span></span>               | <span data-ttu-id="c3da9-180">Webbprogram</span><span class="sxs-lookup"><span data-stu-id="c3da9-180">Web Application</span></span> | 
| <span data-ttu-id="c3da9-181">**SDL fas**</span><span class="sxs-lookup"><span data-stu-id="c3da9-181">**SDL Phase**</span></span>               | <span data-ttu-id="c3da9-182">Utveckla</span><span class="sxs-lookup"><span data-stu-id="c3da9-182">Build</span></span> |  
| <span data-ttu-id="c3da9-183">**Tillämpliga tekniker**</span><span class="sxs-lookup"><span data-stu-id="c3da9-183">**Applicable Technologies**</span></span> | <span data-ttu-id="c3da9-184">Generisk</span><span class="sxs-lookup"><span data-stu-id="c3da9-184">Generic</span></span> |
| <span data-ttu-id="c3da9-185">**Attribut**</span><span class="sxs-lookup"><span data-stu-id="c3da9-185">**Attributes**</span></span>              | <span data-ttu-id="c3da9-186">Saknas</span><span class="sxs-lookup"><span data-stu-id="c3da9-186">N/A</span></span>  |
| <span data-ttu-id="c3da9-187">**Referenser**</span><span class="sxs-lookup"><span data-stu-id="c3da9-187">**References**</span></span>              | <span data-ttu-id="c3da9-188">Saknas</span><span class="sxs-lookup"><span data-stu-id="c3da9-188">N/A</span></span>  |
| <span data-ttu-id="c3da9-189">Information</span><span class="sxs-lookup"><span data-stu-id="c3da9-189">Details</span></span> | <p><span data-ttu-id="c3da9-190">Program som uttryckligen autentiserar användare måste hantera misslyckade autentiseringsscenarier på ett säkert sätt. Autentiseringsmekanism måste:</span><span class="sxs-lookup"><span data-stu-id="c3da9-190">Applications that explicitly authenticate users must handle failed authentication scenarios securely.The authentication mechanism must:</span></span></p><ul><li><span data-ttu-id="c3da9-191">Neka åtkomst till Privilegierade resurser om autentisering misslyckas</span><span class="sxs-lookup"><span data-stu-id="c3da9-191">Deny access to privileged resources when authentication fails</span></span></li><li><span data-ttu-id="c3da9-192">Visa ett allmänt felmeddelande efter misslyckade autentisering och åtkomst nekad inträffar</span><span class="sxs-lookup"><span data-stu-id="c3da9-192">Display a generic error message after failed authentication and access denied occurs</span></span></li></ul><p><span data-ttu-id="c3da9-193">Testa för:</span><span class="sxs-lookup"><span data-stu-id="c3da9-193">Test for:</span></span></p><ul><li><span data-ttu-id="c3da9-194">Skydd av Privilegierade resurser efter misslyckade inloggningar</span><span class="sxs-lookup"><span data-stu-id="c3da9-194">Protection of privileged resources after failed logins</span></span></li><li><span data-ttu-id="c3da9-195">Ett allmänt felmeddelande visas om misslyckade autentisering och åtkomst nekad händelse(r)</span><span class="sxs-lookup"><span data-stu-id="c3da9-195">A generic error message is displayed on failed authentication and access denied event(s)</span></span></li><li><span data-ttu-id="c3da9-196">Konton har inaktiverats efter ett orimligt antal misslyckade försök</span><span class="sxs-lookup"><span data-stu-id="c3da9-196">Accounts are disabled after an excessive number of failed attempts</span></span></li><ul>|

## <span data-ttu-id="c3da9-197"><a id="step-up-adaptive-authn"></a>Aktivera steg uppåt eller anpassad autentisering</span><span class="sxs-lookup"><span data-stu-id="c3da9-197"><a id="step-up-adaptive-authn"></a>Enable step up or adaptive authentication</span></span>

| <span data-ttu-id="c3da9-198">Rubrik</span><span class="sxs-lookup"><span data-stu-id="c3da9-198">Title</span></span>                   | <span data-ttu-id="c3da9-199">Information</span><span class="sxs-lookup"><span data-stu-id="c3da9-199">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="c3da9-200">**Komponent**</span><span class="sxs-lookup"><span data-stu-id="c3da9-200">**Component**</span></span>               | <span data-ttu-id="c3da9-201">Webbprogram</span><span class="sxs-lookup"><span data-stu-id="c3da9-201">Web Application</span></span> | 
| <span data-ttu-id="c3da9-202">**SDL fas**</span><span class="sxs-lookup"><span data-stu-id="c3da9-202">**SDL Phase**</span></span>               | <span data-ttu-id="c3da9-203">Utveckla</span><span class="sxs-lookup"><span data-stu-id="c3da9-203">Build</span></span> |  
| <span data-ttu-id="c3da9-204">**Tillämpliga tekniker**</span><span class="sxs-lookup"><span data-stu-id="c3da9-204">**Applicable Technologies**</span></span> | <span data-ttu-id="c3da9-205">Generisk</span><span class="sxs-lookup"><span data-stu-id="c3da9-205">Generic</span></span> |
| <span data-ttu-id="c3da9-206">**Attribut**</span><span class="sxs-lookup"><span data-stu-id="c3da9-206">**Attributes**</span></span>              | <span data-ttu-id="c3da9-207">Saknas</span><span class="sxs-lookup"><span data-stu-id="c3da9-207">N/A</span></span>  |
| <span data-ttu-id="c3da9-208">**Referenser**</span><span class="sxs-lookup"><span data-stu-id="c3da9-208">**References**</span></span>              | <span data-ttu-id="c3da9-209">Saknas</span><span class="sxs-lookup"><span data-stu-id="c3da9-209">N/A</span></span>  |
| <span data-ttu-id="c3da9-210">Information</span><span class="sxs-lookup"><span data-stu-id="c3da9-210">Details</span></span> | <p><span data-ttu-id="c3da9-211">Kontrollera att programmet har ytterligare tillstånd (till exempel steg uppåt eller anpassad autentisering via multifaktorautentisering, till exempel skicka Engångslösenord i SMS, e-post osv eller fråga efter återautentiseringen) så att användaren anropas innan de ges åtkomst till känslig information.</span><span class="sxs-lookup"><span data-stu-id="c3da9-211">Verify the application has additional authorization (such as step up or adaptive authentication, via multi-factor authentication such as sending OTP in SMS, email etc. or prompting for re-authentication) so the user is challenged before being granted access to sensitive information.</span></span> <span data-ttu-id="c3da9-212">Denna regel gäller även för att göra viktiga ändringar för ett konto eller en åtgärd</span><span class="sxs-lookup"><span data-stu-id="c3da9-212">This rule also applies for making critical changes to an account or action</span></span></p><p><span data-ttu-id="c3da9-213">Detta betyder också att anpassning av autentisering har implementeras på ett sådant sätt att programmet korrekt tillämpar sammanhangsberoende tillstånd så att inte obehöriga manipulering med hjälp av i exemplet parametern manipulation</span><span class="sxs-lookup"><span data-stu-id="c3da9-213">This also means that the adaptation of authentication has to be implemented in such a manner that the application correctly enforces context-sensitive authorization so as to not allow unauthorized manipulation by means of in example, parameter tampering</span></span></p>|

## <span data-ttu-id="c3da9-214"><a id="admin-interface-lockdown"></a>Se till att administrativa gränssnitt är korrekt låsta</span><span class="sxs-lookup"><span data-stu-id="c3da9-214"><a id="admin-interface-lockdown"></a>Ensure that administrative interfaces are appropriately locked down</span></span>

| <span data-ttu-id="c3da9-215">Rubrik</span><span class="sxs-lookup"><span data-stu-id="c3da9-215">Title</span></span>                   | <span data-ttu-id="c3da9-216">Information</span><span class="sxs-lookup"><span data-stu-id="c3da9-216">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="c3da9-217">**Komponent**</span><span class="sxs-lookup"><span data-stu-id="c3da9-217">**Component**</span></span>               | <span data-ttu-id="c3da9-218">Webbprogram</span><span class="sxs-lookup"><span data-stu-id="c3da9-218">Web Application</span></span> | 
| <span data-ttu-id="c3da9-219">**SDL fas**</span><span class="sxs-lookup"><span data-stu-id="c3da9-219">**SDL Phase**</span></span>               | <span data-ttu-id="c3da9-220">Utveckla</span><span class="sxs-lookup"><span data-stu-id="c3da9-220">Build</span></span> |  
| <span data-ttu-id="c3da9-221">**Tillämpliga tekniker**</span><span class="sxs-lookup"><span data-stu-id="c3da9-221">**Applicable Technologies**</span></span> | <span data-ttu-id="c3da9-222">Generisk</span><span class="sxs-lookup"><span data-stu-id="c3da9-222">Generic</span></span> |
| <span data-ttu-id="c3da9-223">**Attribut**</span><span class="sxs-lookup"><span data-stu-id="c3da9-223">**Attributes**</span></span>              | <span data-ttu-id="c3da9-224">Saknas</span><span class="sxs-lookup"><span data-stu-id="c3da9-224">N/A</span></span>  |
| <span data-ttu-id="c3da9-225">**Referenser**</span><span class="sxs-lookup"><span data-stu-id="c3da9-225">**References**</span></span>              | <span data-ttu-id="c3da9-226">Saknas</span><span class="sxs-lookup"><span data-stu-id="c3da9-226">N/A</span></span>  |
| <span data-ttu-id="c3da9-227">Information</span><span class="sxs-lookup"><span data-stu-id="c3da9-227">Details</span></span> | <span data-ttu-id="c3da9-228">Den första lösningen är att ge åtkomst endast från ett visst käll-IP-adressintervall till det administrativa gränssnittet.</span><span class="sxs-lookup"><span data-stu-id="c3da9-228">The first solution is to grant access only from a certain source IP range to the administrative interface.</span></span> <span data-ttu-id="c3da9-229">Om lösningen inte skulle vara möjligt än de är alltid bör tillämpa en Step Up eller anpassad autentisering för att logga in i det administrativa gränssnittet</span><span class="sxs-lookup"><span data-stu-id="c3da9-229">If that solution would not be possible than it is always recommended to enforce a step-up or adaptive authentication for logging in into the administrative interface</span></span> |

## <span data-ttu-id="c3da9-230"><a id="forgot-pword-fxn"></a>Implementera har glömt lösenord funktioner på ett säkert sätt</span><span class="sxs-lookup"><span data-stu-id="c3da9-230"><a id="forgot-pword-fxn"></a>Implement forgot password functionalities securely</span></span>

| <span data-ttu-id="c3da9-231">Rubrik</span><span class="sxs-lookup"><span data-stu-id="c3da9-231">Title</span></span>                   | <span data-ttu-id="c3da9-232">Information</span><span class="sxs-lookup"><span data-stu-id="c3da9-232">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="c3da9-233">**Komponent**</span><span class="sxs-lookup"><span data-stu-id="c3da9-233">**Component**</span></span>               | <span data-ttu-id="c3da9-234">Webbprogram</span><span class="sxs-lookup"><span data-stu-id="c3da9-234">Web Application</span></span> | 
| <span data-ttu-id="c3da9-235">**SDL fas**</span><span class="sxs-lookup"><span data-stu-id="c3da9-235">**SDL Phase**</span></span>               | <span data-ttu-id="c3da9-236">Utveckla</span><span class="sxs-lookup"><span data-stu-id="c3da9-236">Build</span></span> |  
| <span data-ttu-id="c3da9-237">**Tillämpliga tekniker**</span><span class="sxs-lookup"><span data-stu-id="c3da9-237">**Applicable Technologies**</span></span> | <span data-ttu-id="c3da9-238">Generisk</span><span class="sxs-lookup"><span data-stu-id="c3da9-238">Generic</span></span> |
| <span data-ttu-id="c3da9-239">**Attribut**</span><span class="sxs-lookup"><span data-stu-id="c3da9-239">**Attributes**</span></span>              | <span data-ttu-id="c3da9-240">Saknas</span><span class="sxs-lookup"><span data-stu-id="c3da9-240">N/A</span></span>  |
| <span data-ttu-id="c3da9-241">**Referenser**</span><span class="sxs-lookup"><span data-stu-id="c3da9-241">**References**</span></span>              | <span data-ttu-id="c3da9-242">Saknas</span><span class="sxs-lookup"><span data-stu-id="c3da9-242">N/A</span></span>  |
| <span data-ttu-id="c3da9-243">Information</span><span class="sxs-lookup"><span data-stu-id="c3da9-243">Details</span></span> | <p><span data-ttu-id="c3da9-244">Första är att kontrollera att du har glömt lösenord och andra recovery sökvägar skicka en länk inklusive en tidsbegränsade aktivering token i stället för själva lösenordet.</span><span class="sxs-lookup"><span data-stu-id="c3da9-244">The first thing is to verify that forgot password and other recovery paths send a link including a time-limited activation token rather than the password itself.</span></span> <span data-ttu-id="c3da9-245">Ytterligare autentisering baserat på soft-token (t.ex. SMS-token, egna mobila program osv.) kan krävas samt innan länken skickas över.</span><span class="sxs-lookup"><span data-stu-id="c3da9-245">Additional authentication based on soft-tokens (e.g. SMS token, native mobile applications, etc.) can be required as well before the link is sent over.</span></span> <span data-ttu-id="c3da9-246">Dessutom bör inte låser ut användare medan processen för att få ett nytt lösenord.</span><span class="sxs-lookup"><span data-stu-id="c3da9-246">Second, you should not lock out the users account whilst the process of getting a new password is in progress.</span></span></p><p><span data-ttu-id="c3da9-247">Detta kan leda till en Denial of service-attack när en angripare beslutar att avsiktligt låser ut användare med en automatisk attack.</span><span class="sxs-lookup"><span data-stu-id="c3da9-247">This could lead to a Denial of service attack whenever an attacker decides to intentionally lock out the users with an automated attack.</span></span> <span data-ttu-id="c3da9-248">Det tredje när nya lösenord begäran var inställt pågår, vara meddelandet som visas generaliserad för att förhindra att användarnamnet uppräkningen.</span><span class="sxs-lookup"><span data-stu-id="c3da9-248">Third, whenever the new password request was set in progress, the message you display should be generalized in order to prevent username enumeration.</span></span> <span data-ttu-id="c3da9-249">Fjärde alltid inte tillåta användning av gamla lösenord och implementera en princip för starkt lösenord.</span><span class="sxs-lookup"><span data-stu-id="c3da9-249">Fourth, always disallow the use of old passwords and implement a strong password policy.</span></span></p> |

## <span data-ttu-id="c3da9-250"><a id="pword-account-policy"></a>Se till att lösenord och principen tillämpas</span><span class="sxs-lookup"><span data-stu-id="c3da9-250"><a id="pword-account-policy"></a>Ensure that password and account policy are implemented</span></span>

| <span data-ttu-id="c3da9-251">Rubrik</span><span class="sxs-lookup"><span data-stu-id="c3da9-251">Title</span></span>                   | <span data-ttu-id="c3da9-252">Information</span><span class="sxs-lookup"><span data-stu-id="c3da9-252">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="c3da9-253">**Komponent**</span><span class="sxs-lookup"><span data-stu-id="c3da9-253">**Component**</span></span>               | <span data-ttu-id="c3da9-254">Webbprogram</span><span class="sxs-lookup"><span data-stu-id="c3da9-254">Web Application</span></span> | 
| <span data-ttu-id="c3da9-255">**SDL fas**</span><span class="sxs-lookup"><span data-stu-id="c3da9-255">**SDL Phase**</span></span>               | <span data-ttu-id="c3da9-256">Utveckla</span><span class="sxs-lookup"><span data-stu-id="c3da9-256">Build</span></span> |  
| <span data-ttu-id="c3da9-257">**Tillämpliga tekniker**</span><span class="sxs-lookup"><span data-stu-id="c3da9-257">**Applicable Technologies**</span></span> | <span data-ttu-id="c3da9-258">Generisk</span><span class="sxs-lookup"><span data-stu-id="c3da9-258">Generic</span></span> |
| <span data-ttu-id="c3da9-259">**Attribut**</span><span class="sxs-lookup"><span data-stu-id="c3da9-259">**Attributes**</span></span>              | <span data-ttu-id="c3da9-260">Saknas</span><span class="sxs-lookup"><span data-stu-id="c3da9-260">N/A</span></span>  |
| <span data-ttu-id="c3da9-261">**Referenser**</span><span class="sxs-lookup"><span data-stu-id="c3da9-261">**References**</span></span>              | <span data-ttu-id="c3da9-262">Saknas</span><span class="sxs-lookup"><span data-stu-id="c3da9-262">N/A</span></span>  |
| <span data-ttu-id="c3da9-263">Information</span><span class="sxs-lookup"><span data-stu-id="c3da9-263">Details</span></span> | <p><span data-ttu-id="c3da9-264">Lösenord och principen uppdateras organisationens policy och bästa praxis bör genomföras.</span><span class="sxs-lookup"><span data-stu-id="c3da9-264">Password and account policy in compliance with organizational policy and best practices should be implemented.</span></span></p><p><span data-ttu-id="c3da9-265">Att skydda mot brute force- och ordlista baserat gissa: princip för starkt lösenord måste införas för att säkerställa att användarna skapar komplexa lösenord (t.ex. 12 tecken minimilängd, alfanumeriska och specialtecken).</span><span class="sxs-lookup"><span data-stu-id="c3da9-265">To defend against brute-force and dictionary based guessing: Strong password policy must be implemented to ensure that users create complex password (e.g., 12 characters minimum length, alphanumeric and special characters).</span></span></p><p><span data-ttu-id="c3da9-266">Principer för kontoutelåsning kan genomföras på följande sätt:</span><span class="sxs-lookup"><span data-stu-id="c3da9-266">Account lockout policies may be implemented in the following manner:</span></span></p><ul><li><span data-ttu-id="c3da9-267">**Mjuka lås-timeout:** detta kan vara ett bra alternativ för att skydda dina användare mot brute force-attacker.</span><span class="sxs-lookup"><span data-stu-id="c3da9-267">**Soft lock-out:** This can be a good option for protecting your users against brute force attacks.</span></span> <span data-ttu-id="c3da9-268">Till exempel när användaren anger fel lösenord kunde tre gånger programmet låsa kontot för en minut för att kunna långsammare av brute tvinga sitt lösenord, vilket gör det mindre lönsamma för angripare att fortsätta.</span><span class="sxs-lookup"><span data-stu-id="c3da9-268">For example, whenever the user enters a wrong password three times the application could lock down the account for a minute in order to slow down the process of brute forcing his password making it less profitable for the attacker to proceed.</span></span> <span data-ttu-id="c3da9-269">Om du implementerar hårda Lås ut motåtgärder i det här exemplet skulle du kunna uppfylla en ”Dos” av permanent utelåsning konton.</span><span class="sxs-lookup"><span data-stu-id="c3da9-269">If u were to implement hard lock-out countermeasures for this example you would achieve a "Dos" by permanently locking out accounts.</span></span> <span data-ttu-id="c3da9-270">Du kan också program kan generera ett Engångslösenord (en gång lösenord) och skicka den out-of-band (via e-post, sms o.s.v.) för användaren.</span><span class="sxs-lookup"><span data-stu-id="c3da9-270">Alternatively, application may generate an OTP (One Time Password) and send it out-of-band (through email, sms etc.) to the user.</span></span> <span data-ttu-id="c3da9-271">En annan metod kan vara att implementera CAPTCHA när ett tröskelvärde för antal misslyckade försök har nåtts.</span><span class="sxs-lookup"><span data-stu-id="c3da9-271">Another approach may be to implement CAPTCHA after a threshold number of failed attempts is reached.</span></span></li><li><span data-ttu-id="c3da9-272">**Hårda Lås ut:** den här typen av kontoutelåsning ska användas när du identifierar en användare att attackera ditt program och räknare honom med hjälp av permanent utelåsning sitt konto förrän en svarsgrupp fått tid att göra deras dataforensik.</span><span class="sxs-lookup"><span data-stu-id="c3da9-272">**Hard lock-out:** This type of lockout should be applied whenever you detect a user attacking your application and counter him by means of permanently locking out his account until a response team had time to do their forensics.</span></span> <span data-ttu-id="c3da9-273">Efter den här processen kan du välja att ge användaren tillbaka sitt konto eller vidta ytterligare rättsliga åtgärder mot honom.</span><span class="sxs-lookup"><span data-stu-id="c3da9-273">After this process you can decide to give the user back his account or take further legal actions against him.</span></span> <span data-ttu-id="c3da9-274">Den här typen av metoden förhindrar att angriparen ytterligare leds genom dina program och din infrastruktur.</span><span class="sxs-lookup"><span data-stu-id="c3da9-274">This type of approach prevents the attacker from further penetrating your application and infrastructure.</span></span></li></ul><p><span data-ttu-id="c3da9-275">Kontrollera att alla nycklar och lösenord är utbytbara och är för att skydda dig mot angrepp på standard och förutsägbar konton, genereras eller ersättas efter installationen.</span><span class="sxs-lookup"><span data-stu-id="c3da9-275">To defend against attacks on default and predictable accounts, verify that all keys and passwords are replaceable, and are generated or replaced after installation time.</span></span></p><p><span data-ttu-id="c3da9-276">Om programmet har till Autogenerera lösenord, kontrollera att de genererade lösenord slumpmässigt och har hög entropi.</span><span class="sxs-lookup"><span data-stu-id="c3da9-276">If the application has to auto-generate passwords, ensure that the generated passwords are random and have high entropy.</span></span></p>|

## <span data-ttu-id="c3da9-277"><a id="controls-username-enum"></a>Implementera kontroller för att förhindra användarnamn uppräkning</span><span class="sxs-lookup"><span data-stu-id="c3da9-277"><a id="controls-username-enum"></a>Implement controls to prevent username enumeration</span></span>

| <span data-ttu-id="c3da9-278">Rubrik</span><span class="sxs-lookup"><span data-stu-id="c3da9-278">Title</span></span>                   | <span data-ttu-id="c3da9-279">Information</span><span class="sxs-lookup"><span data-stu-id="c3da9-279">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="c3da9-280">**Komponent**</span><span class="sxs-lookup"><span data-stu-id="c3da9-280">**Component**</span></span>               | <span data-ttu-id="c3da9-281">Webbprogram</span><span class="sxs-lookup"><span data-stu-id="c3da9-281">Web Application</span></span> | 
| <span data-ttu-id="c3da9-282">**SDL fas**</span><span class="sxs-lookup"><span data-stu-id="c3da9-282">**SDL Phase**</span></span>               | <span data-ttu-id="c3da9-283">Utveckla</span><span class="sxs-lookup"><span data-stu-id="c3da9-283">Build</span></span> |  
| <span data-ttu-id="c3da9-284">**Tillämpliga tekniker**</span><span class="sxs-lookup"><span data-stu-id="c3da9-284">**Applicable Technologies**</span></span> | <span data-ttu-id="c3da9-285">Generisk</span><span class="sxs-lookup"><span data-stu-id="c3da9-285">Generic</span></span> |
| <span data-ttu-id="c3da9-286">**Attribut**</span><span class="sxs-lookup"><span data-stu-id="c3da9-286">**Attributes**</span></span>              | <span data-ttu-id="c3da9-287">Saknas</span><span class="sxs-lookup"><span data-stu-id="c3da9-287">N/A</span></span>  |
| <span data-ttu-id="c3da9-288">**Referenser**</span><span class="sxs-lookup"><span data-stu-id="c3da9-288">**References**</span></span>              | <span data-ttu-id="c3da9-289">Saknas</span><span class="sxs-lookup"><span data-stu-id="c3da9-289">N/A</span></span>  |
| <span data-ttu-id="c3da9-290">**Steg**</span><span class="sxs-lookup"><span data-stu-id="c3da9-290">**Steps**</span></span> | <span data-ttu-id="c3da9-291">Alla felmeddelanden ska vara generaliserad för att förhindra att användarnamnet uppräkningen.</span><span class="sxs-lookup"><span data-stu-id="c3da9-291">All error messages should be generalized in order to prevent username enumeration.</span></span> <span data-ttu-id="c3da9-292">Även undvika ibland du inte information läcker i funktioner, till exempel en registreringssidan.</span><span class="sxs-lookup"><span data-stu-id="c3da9-292">Also sometimes you cannot avoid information leaking in functionalities such as a registration page.</span></span> <span data-ttu-id="c3da9-293">Här behöver du använda hastighetsbegränsande metoder som CAPTCHA för att förhindra angrepp automatiskt av en angripare.</span><span class="sxs-lookup"><span data-stu-id="c3da9-293">Here you need to use rate-limiting methods like CAPTCHA to prevent an automated attack by an attacker.</span></span> |

## <span data-ttu-id="c3da9-294"><a id="win-authn-sql"></a>Använd Windows-autentisering för att ansluta till SQL Server</span><span class="sxs-lookup"><span data-stu-id="c3da9-294"><a id="win-authn-sql"></a>When possible, use Windows Authentication for connecting to SQL Server</span></span>

| <span data-ttu-id="c3da9-295">Rubrik</span><span class="sxs-lookup"><span data-stu-id="c3da9-295">Title</span></span>                   | <span data-ttu-id="c3da9-296">Information</span><span class="sxs-lookup"><span data-stu-id="c3da9-296">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="c3da9-297">**Komponent**</span><span class="sxs-lookup"><span data-stu-id="c3da9-297">**Component**</span></span>               | <span data-ttu-id="c3da9-298">Databas</span><span class="sxs-lookup"><span data-stu-id="c3da9-298">Database</span></span> | 
| <span data-ttu-id="c3da9-299">**SDL fas**</span><span class="sxs-lookup"><span data-stu-id="c3da9-299">**SDL Phase**</span></span>               | <span data-ttu-id="c3da9-300">Utveckla</span><span class="sxs-lookup"><span data-stu-id="c3da9-300">Build</span></span> |  
| <span data-ttu-id="c3da9-301">**Tillämpliga tekniker**</span><span class="sxs-lookup"><span data-stu-id="c3da9-301">**Applicable Technologies**</span></span> | <span data-ttu-id="c3da9-302">OnPrem</span><span class="sxs-lookup"><span data-stu-id="c3da9-302">OnPrem</span></span> |
| <span data-ttu-id="c3da9-303">**Attribut**</span><span class="sxs-lookup"><span data-stu-id="c3da9-303">**Attributes**</span></span>              | <span data-ttu-id="c3da9-304">Version av SQL - alla</span><span class="sxs-lookup"><span data-stu-id="c3da9-304">SQL Version - All</span></span> |
| <span data-ttu-id="c3da9-305">**Referenser**</span><span class="sxs-lookup"><span data-stu-id="c3da9-305">**References**</span></span>              | [<span data-ttu-id="c3da9-306">SQLServer - Välj ett autentiseringsläge</span><span class="sxs-lookup"><span data-stu-id="c3da9-306">SQL Server - Choose an Authentication Mode</span></span>](https://msdn.microsoft.com/library/ms144284.aspx) |
| <span data-ttu-id="c3da9-307">**Steg**</span><span class="sxs-lookup"><span data-stu-id="c3da9-307">**Steps**</span></span> | <span data-ttu-id="c3da9-308">Windows-autentisering använder Kerberos-säkerhetsprotokoll, tillhandahåller lösenord tvingande avseende komplexitet verifieringen av starkt lösenord, ger stöd för kontoutelåsning och har stöd för Lösenordets giltighetstid.</span><span class="sxs-lookup"><span data-stu-id="c3da9-308">Windows Authentication uses Kerberos security protocol, provides password policy enforcement with regard to complexity validation for strong passwords, provides support for account lockout, and supports password expiration.</span></span>|

## <span data-ttu-id="c3da9-309"><a id="aad-authn-sql"></a>När det är möjligt använda Azure Active Directory-autentisering för anslutning till SQL-databas</span><span class="sxs-lookup"><span data-stu-id="c3da9-309"><a id="aad-authn-sql"></a>When possible use Azure Active Directory Authentication for Connecting to SQL Database</span></span>

| <span data-ttu-id="c3da9-310">Rubrik</span><span class="sxs-lookup"><span data-stu-id="c3da9-310">Title</span></span>                   | <span data-ttu-id="c3da9-311">Information</span><span class="sxs-lookup"><span data-stu-id="c3da9-311">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="c3da9-312">**Komponent**</span><span class="sxs-lookup"><span data-stu-id="c3da9-312">**Component**</span></span>               | <span data-ttu-id="c3da9-313">Databas</span><span class="sxs-lookup"><span data-stu-id="c3da9-313">Database</span></span> | 
| <span data-ttu-id="c3da9-314">**SDL fas**</span><span class="sxs-lookup"><span data-stu-id="c3da9-314">**SDL Phase**</span></span>               | <span data-ttu-id="c3da9-315">Utveckla</span><span class="sxs-lookup"><span data-stu-id="c3da9-315">Build</span></span> |  
| <span data-ttu-id="c3da9-316">**Tillämpliga tekniker**</span><span class="sxs-lookup"><span data-stu-id="c3da9-316">**Applicable Technologies**</span></span> | <span data-ttu-id="c3da9-317">SQL Azure</span><span class="sxs-lookup"><span data-stu-id="c3da9-317">SQL Azure</span></span> |
| <span data-ttu-id="c3da9-318">**Attribut**</span><span class="sxs-lookup"><span data-stu-id="c3da9-318">**Attributes**</span></span>              | <span data-ttu-id="c3da9-319">Versionen av SQL - V12</span><span class="sxs-lookup"><span data-stu-id="c3da9-319">SQL Version - V12</span></span> |
| <span data-ttu-id="c3da9-320">**Referenser**</span><span class="sxs-lookup"><span data-stu-id="c3da9-320">**References**</span></span>              | [<span data-ttu-id="c3da9-321">Ansluter till SQL-databas med hjälp av Azure Active Directory-autentisering</span><span class="sxs-lookup"><span data-stu-id="c3da9-321">Connecting to SQL Database By Using Azure Active Directory Authentication</span></span>](https://azure.microsoft.com/documentation/articles/sql-database-aad-authentication/) |
| <span data-ttu-id="c3da9-322">**Steg**</span><span class="sxs-lookup"><span data-stu-id="c3da9-322">**Steps**</span></span> | <span data-ttu-id="c3da9-323">**Lägsta version:** Azure SQL Database V12 krävs för att tillåta Azure SQL Database att använda AAD-autentisering mot Microsoft Directory</span><span class="sxs-lookup"><span data-stu-id="c3da9-323">**Minimum version:** Azure SQL Database V12 required to allow Azure SQL Database to use AAD Authentication against the Microsoft Directory</span></span> |

## <span data-ttu-id="c3da9-324"><a id="authn-account-pword"></a>När SQL-autentiseringsläge används, se till att konto och lösenord principen tillämpas på SQLServer</span><span class="sxs-lookup"><span data-stu-id="c3da9-324"><a id="authn-account-pword"></a>When SQL authentication mode is used, ensure that account and password policy are enforced on SQL server</span></span>

| <span data-ttu-id="c3da9-325">Rubrik</span><span class="sxs-lookup"><span data-stu-id="c3da9-325">Title</span></span>                   | <span data-ttu-id="c3da9-326">Information</span><span class="sxs-lookup"><span data-stu-id="c3da9-326">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="c3da9-327">**Komponent**</span><span class="sxs-lookup"><span data-stu-id="c3da9-327">**Component**</span></span>               | <span data-ttu-id="c3da9-328">Databas</span><span class="sxs-lookup"><span data-stu-id="c3da9-328">Database</span></span> | 
| <span data-ttu-id="c3da9-329">**SDL fas**</span><span class="sxs-lookup"><span data-stu-id="c3da9-329">**SDL Phase**</span></span>               | <span data-ttu-id="c3da9-330">Utveckla</span><span class="sxs-lookup"><span data-stu-id="c3da9-330">Build</span></span> |  
| <span data-ttu-id="c3da9-331">**Tillämpliga tekniker**</span><span class="sxs-lookup"><span data-stu-id="c3da9-331">**Applicable Technologies**</span></span> | <span data-ttu-id="c3da9-332">Generisk</span><span class="sxs-lookup"><span data-stu-id="c3da9-332">Generic</span></span> |
| <span data-ttu-id="c3da9-333">**Attribut**</span><span class="sxs-lookup"><span data-stu-id="c3da9-333">**Attributes**</span></span>              | <span data-ttu-id="c3da9-334">Saknas</span><span class="sxs-lookup"><span data-stu-id="c3da9-334">N/A</span></span>  |
| <span data-ttu-id="c3da9-335">**Referenser**</span><span class="sxs-lookup"><span data-stu-id="c3da9-335">**References**</span></span>              | <span data-ttu-id="c3da9-336">[SQL Server-lösenordsprincip](https://technet.microsoft.com/library/ms161959(v=sql.110).aspx)</span><span class="sxs-lookup"><span data-stu-id="c3da9-336">[SQL Server password policy](https://technet.microsoft.com/library/ms161959(v=sql.110).aspx)</span></span> |
| <span data-ttu-id="c3da9-337">**Steg**</span><span class="sxs-lookup"><span data-stu-id="c3da9-337">**Steps**</span></span> | <span data-ttu-id="c3da9-338">När du använder SQL Server-autentisering, skapas inloggningar i SQL Server som inte är baserade på Windows-användarkonton.</span><span class="sxs-lookup"><span data-stu-id="c3da9-338">When using SQL Server Authentication, logins are created in SQL Server that are not based on Windows user accounts.</span></span> <span data-ttu-id="c3da9-339">Både användarnamnet och lösenordet skapas med hjälp av SQL Server och lagras i SQL Server.</span><span class="sxs-lookup"><span data-stu-id="c3da9-339">Both the user name and the password are created by using SQL Server and stored in SQL Server.</span></span> <span data-ttu-id="c3da9-340">SQL Server kan använda Windows lösenord princip mekanismer.</span><span class="sxs-lookup"><span data-stu-id="c3da9-340">SQL Server can use Windows password policy mechanisms.</span></span> <span data-ttu-id="c3da9-341">Den kan använda samma komplexiteten och principer för förfallodatum för lösenord som används i SQL Server i Windows.</span><span class="sxs-lookup"><span data-stu-id="c3da9-341">It can apply the same complexity and expiration policies used in Windows to passwords used inside SQL Server.</span></span> |

## <span data-ttu-id="c3da9-342"><a id="autn-contained-db"></a>Använd inte SQL-autentisering i inneslutna databaser</span><span class="sxs-lookup"><span data-stu-id="c3da9-342"><a id="autn-contained-db"></a>Do not use SQL Authentication in contained databases</span></span>

| <span data-ttu-id="c3da9-343">Rubrik</span><span class="sxs-lookup"><span data-stu-id="c3da9-343">Title</span></span>                   | <span data-ttu-id="c3da9-344">Information</span><span class="sxs-lookup"><span data-stu-id="c3da9-344">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="c3da9-345">**Komponent**</span><span class="sxs-lookup"><span data-stu-id="c3da9-345">**Component**</span></span>               | <span data-ttu-id="c3da9-346">Databas</span><span class="sxs-lookup"><span data-stu-id="c3da9-346">Database</span></span> | 
| <span data-ttu-id="c3da9-347">**SDL fas**</span><span class="sxs-lookup"><span data-stu-id="c3da9-347">**SDL Phase**</span></span>               | <span data-ttu-id="c3da9-348">Utveckla</span><span class="sxs-lookup"><span data-stu-id="c3da9-348">Build</span></span> |  
| <span data-ttu-id="c3da9-349">**Tillämpliga tekniker**</span><span class="sxs-lookup"><span data-stu-id="c3da9-349">**Applicable Technologies**</span></span> | <span data-ttu-id="c3da9-350">OnPrem SQL Azure</span><span class="sxs-lookup"><span data-stu-id="c3da9-350">OnPrem, SQL Azure</span></span> |
| <span data-ttu-id="c3da9-351">**Attribut**</span><span class="sxs-lookup"><span data-stu-id="c3da9-351">**Attributes**</span></span>              | <span data-ttu-id="c3da9-352">SQL-Version - MSSQL2012, Version av SQL - V12</span><span class="sxs-lookup"><span data-stu-id="c3da9-352">SQL Version - MSSQL2012, SQL Version - V12</span></span> |
| <span data-ttu-id="c3da9-353">**Referenser**</span><span class="sxs-lookup"><span data-stu-id="c3da9-353">**References**</span></span>              | [<span data-ttu-id="c3da9-354">Rekommenderade säkerhetsmetoder med inneslutna databaser</span><span class="sxs-lookup"><span data-stu-id="c3da9-354">Security Best Practices with Contained Databases</span></span>](http://msdn.microsoft.com/library/ff929055.aspx) |
| <span data-ttu-id="c3da9-355">**Steg**</span><span class="sxs-lookup"><span data-stu-id="c3da9-355">**Steps**</span></span> | <span data-ttu-id="c3da9-356">Avsaknad av en tvingande lösenordsprincip kan öka sannolikheten för en svag autentiseringsuppgift upprättas i en innesluten databas.</span><span class="sxs-lookup"><span data-stu-id="c3da9-356">The absence of an enforced password policy may increase the likelihood of a weak credential being established in a contained database.</span></span> <span data-ttu-id="c3da9-357">Använda Windows-autentisering.</span><span class="sxs-lookup"><span data-stu-id="c3da9-357">Leverage Windows Authentication.</span></span> |

## <span data-ttu-id="c3da9-358"><a id="authn-sas-tokens"></a>Använda per enhet autentiseringsuppgifter med hjälp av SaS-token</span><span class="sxs-lookup"><span data-stu-id="c3da9-358"><a id="authn-sas-tokens"></a>Use per device authentication credentials using SaS tokens</span></span>

| <span data-ttu-id="c3da9-359">Rubrik</span><span class="sxs-lookup"><span data-stu-id="c3da9-359">Title</span></span>                   | <span data-ttu-id="c3da9-360">Information</span><span class="sxs-lookup"><span data-stu-id="c3da9-360">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="c3da9-361">**Komponent**</span><span class="sxs-lookup"><span data-stu-id="c3da9-361">**Component**</span></span>               | <span data-ttu-id="c3da9-362">Azure Event Hub</span><span class="sxs-lookup"><span data-stu-id="c3da9-362">Azure Event Hub</span></span> | 
| <span data-ttu-id="c3da9-363">**SDL fas**</span><span class="sxs-lookup"><span data-stu-id="c3da9-363">**SDL Phase**</span></span>               | <span data-ttu-id="c3da9-364">Utveckla</span><span class="sxs-lookup"><span data-stu-id="c3da9-364">Build</span></span> |  
| <span data-ttu-id="c3da9-365">**Tillämpliga tekniker**</span><span class="sxs-lookup"><span data-stu-id="c3da9-365">**Applicable Technologies**</span></span> | <span data-ttu-id="c3da9-366">Generisk</span><span class="sxs-lookup"><span data-stu-id="c3da9-366">Generic</span></span> |
| <span data-ttu-id="c3da9-367">**Attribut**</span><span class="sxs-lookup"><span data-stu-id="c3da9-367">**Attributes**</span></span>              | <span data-ttu-id="c3da9-368">Saknas</span><span class="sxs-lookup"><span data-stu-id="c3da9-368">N/A</span></span>  |
| <span data-ttu-id="c3da9-369">**Referenser**</span><span class="sxs-lookup"><span data-stu-id="c3da9-369">**References**</span></span>              | [<span data-ttu-id="c3da9-370">Autentisering och säkerhet modellen översikt över Event Hubs</span><span class="sxs-lookup"><span data-stu-id="c3da9-370">Event Hubs authentication and security model overview</span></span>](https://azure.microsoft.com/documentation/articles/event-hubs-authentication-and-security-model-overview/) |
| <span data-ttu-id="c3da9-371">**Steg**</span><span class="sxs-lookup"><span data-stu-id="c3da9-371">**Steps**</span></span> | <p><span data-ttu-id="c3da9-372">Säkerhetsmodellen i Händelsehubbar baseras på en kombination av delade signatur åtkomst (SAS)-token och utgivare.</span><span class="sxs-lookup"><span data-stu-id="c3da9-372">The Event Hubs security model is based on a combination of Shared Access Signature (SAS) tokens and event publishers.</span></span> <span data-ttu-id="c3da9-373">Utgivarens namn representerar DeviceID som tar emot en token.</span><span class="sxs-lookup"><span data-stu-id="c3da9-373">The publisher name represents the DeviceID that receives the token.</span></span> <span data-ttu-id="c3da9-374">Detta kan hjälpa till att associera token som genereras med respektive enheter.</span><span class="sxs-lookup"><span data-stu-id="c3da9-374">This would help associate the tokens generated with the respective devices.</span></span></p><p><span data-ttu-id="c3da9-375">Alla meddelanden som är märkta med avsändaren på tjänstsidan så att identifiering av in nyttolast ursprung förfalskning försök.</span><span class="sxs-lookup"><span data-stu-id="c3da9-375">All messages are tagged with originator on service side allowing detection of in-payload origin spoofing attempts.</span></span> <span data-ttu-id="c3da9-376">När autentisering enheter, generera en per enhet SaS-token som omfattar en unik utgivare.</span><span class="sxs-lookup"><span data-stu-id="c3da9-376">When authenticating devices, generate a per device SaS token scoped to a unique publisher.</span></span></p>|

## <span data-ttu-id="c3da9-377"><a id="multi-factor-azure-admin"></a>Aktivera Azure Multi-Factor Authentication för Azure-administratörer</span><span class="sxs-lookup"><span data-stu-id="c3da9-377"><a id="multi-factor-azure-admin"></a>Enable Azure Multi-Factor Authentication for Azure Administrators</span></span>

| <span data-ttu-id="c3da9-378">Rubrik</span><span class="sxs-lookup"><span data-stu-id="c3da9-378">Title</span></span>                   | <span data-ttu-id="c3da9-379">Information</span><span class="sxs-lookup"><span data-stu-id="c3da9-379">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="c3da9-380">**Komponent**</span><span class="sxs-lookup"><span data-stu-id="c3da9-380">**Component**</span></span>               | <span data-ttu-id="c3da9-381">Azure Förtroendegräns</span><span class="sxs-lookup"><span data-stu-id="c3da9-381">Azure Trust Boundary</span></span> | 
| <span data-ttu-id="c3da9-382">**SDL fas**</span><span class="sxs-lookup"><span data-stu-id="c3da9-382">**SDL Phase**</span></span>               | <span data-ttu-id="c3da9-383">Distribution</span><span class="sxs-lookup"><span data-stu-id="c3da9-383">Deployment</span></span> |  
| <span data-ttu-id="c3da9-384">**Tillämpliga tekniker**</span><span class="sxs-lookup"><span data-stu-id="c3da9-384">**Applicable Technologies**</span></span> | <span data-ttu-id="c3da9-385">Generisk</span><span class="sxs-lookup"><span data-stu-id="c3da9-385">Generic</span></span> |
| <span data-ttu-id="c3da9-386">**Attribut**</span><span class="sxs-lookup"><span data-stu-id="c3da9-386">**Attributes**</span></span>              | <span data-ttu-id="c3da9-387">Saknas</span><span class="sxs-lookup"><span data-stu-id="c3da9-387">N/A</span></span>  |
| <span data-ttu-id="c3da9-388">**Referenser**</span><span class="sxs-lookup"><span data-stu-id="c3da9-388">**References**</span></span>              | [<span data-ttu-id="c3da9-389">Vad är Azure Multi-Factor Authentication?</span><span class="sxs-lookup"><span data-stu-id="c3da9-389">What is Azure Multi-Factor Authentication?</span></span>](https://azure.microsoft.com/documentation/articles/multi-factor-authentication/) |
| <span data-ttu-id="c3da9-390">**Steg**</span><span class="sxs-lookup"><span data-stu-id="c3da9-390">**Steps**</span></span> | <p><span data-ttu-id="c3da9-391">Multifaktorautentisering (MFA) är en autentiseringsmetod som kräver mer än en verifieringsmetod och lägger till ett kritiskt andra säkerhetslager till användarinloggningar och transaktioner.</span><span class="sxs-lookup"><span data-stu-id="c3da9-391">Multi-factor authentication (MFA) is a method of authentication that requires more than one verification method and adds a critical second layer of security to user sign-ins and transactions.</span></span> <span data-ttu-id="c3da9-392">Det fungerar genom att två eller flera av följande verifieringsmetoder för:</span><span class="sxs-lookup"><span data-stu-id="c3da9-392">It works by requiring any two or more of the following verification methods:</span></span></p><ul><li><span data-ttu-id="c3da9-393">Något du vet (normalt ett lösenord)</span><span class="sxs-lookup"><span data-stu-id="c3da9-393">Something you know (typically a password)</span></span></li><li><span data-ttu-id="c3da9-394">Något du har (betrodda enheter som inte enkelt dubbleras, t.ex. en telefon)</span><span class="sxs-lookup"><span data-stu-id="c3da9-394">Something you have (a trusted device that is not easily duplicated, like a phone)</span></span></li><li><span data-ttu-id="c3da9-395">Något du är (biometrik)</span><span class="sxs-lookup"><span data-stu-id="c3da9-395">Something you are (biometrics)</span></span></li><ul>|

## <span data-ttu-id="c3da9-396"><a id="anon-access-cluster"></a>Begränsa anonym åtkomst till Service Fabric-kluster</span><span class="sxs-lookup"><span data-stu-id="c3da9-396"><a id="anon-access-cluster"></a>Restrict anonymous access to Service Fabric Cluster</span></span>

| <span data-ttu-id="c3da9-397">Rubrik</span><span class="sxs-lookup"><span data-stu-id="c3da9-397">Title</span></span>                   | <span data-ttu-id="c3da9-398">Information</span><span class="sxs-lookup"><span data-stu-id="c3da9-398">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="c3da9-399">**Komponent**</span><span class="sxs-lookup"><span data-stu-id="c3da9-399">**Component**</span></span>               | <span data-ttu-id="c3da9-400">Service Fabric-Förtroendegräns</span><span class="sxs-lookup"><span data-stu-id="c3da9-400">Service Fabric Trust Boundary</span></span> | 
| <span data-ttu-id="c3da9-401">**SDL fas**</span><span class="sxs-lookup"><span data-stu-id="c3da9-401">**SDL Phase**</span></span>               | <span data-ttu-id="c3da9-402">Distribution</span><span class="sxs-lookup"><span data-stu-id="c3da9-402">Deployment</span></span> |  
| <span data-ttu-id="c3da9-403">**Tillämpliga tekniker**</span><span class="sxs-lookup"><span data-stu-id="c3da9-403">**Applicable Technologies**</span></span> | <span data-ttu-id="c3da9-404">Generisk</span><span class="sxs-lookup"><span data-stu-id="c3da9-404">Generic</span></span> |
| <span data-ttu-id="c3da9-405">**Attribut**</span><span class="sxs-lookup"><span data-stu-id="c3da9-405">**Attributes**</span></span>              | <span data-ttu-id="c3da9-406">Miljö - Azure</span><span class="sxs-lookup"><span data-stu-id="c3da9-406">Environment - Azure</span></span>  |
| <span data-ttu-id="c3da9-407">**Referenser**</span><span class="sxs-lookup"><span data-stu-id="c3da9-407">**References**</span></span>              | [<span data-ttu-id="c3da9-408">Säkerhetsscenarier för Service Fabric-kluster</span><span class="sxs-lookup"><span data-stu-id="c3da9-408">Service Fabric cluster security scenarios</span></span>](https://azure.microsoft.com/documentation/articles/service-fabric-cluster-security) |
| <span data-ttu-id="c3da9-409">**Steg**</span><span class="sxs-lookup"><span data-stu-id="c3da9-409">**Steps**</span></span> | <p><span data-ttu-id="c3da9-410">Kluster bör alltid vara skyddad för att förhindra att obehöriga användare från att ansluta till klustret, särskilt när den har produktionsarbetsbelastningar som körs på den.</span><span class="sxs-lookup"><span data-stu-id="c3da9-410">Clusters should always be secured to prevent unauthorized users from connecting to your cluster, especially when it has production workloads running on it.</span></span></p><p><span data-ttu-id="c3da9-411">Se till att säkerhetsläget anges till ”skydda” och konfigurera nödvändiga X.509-servercertifikatet när du skapar ett service fabric-kluster.</span><span class="sxs-lookup"><span data-stu-id="c3da9-411">While creating a service fabric cluster, ensure that the security mode is set to "secure" and configure the required X.509 server certificate.</span></span> <span data-ttu-id="c3da9-412">Skapa ett kluster som är ”osäker” tillåter anonyma användare att ansluta till det om det visar hanteringsslutpunkter till Internet.</span><span class="sxs-lookup"><span data-stu-id="c3da9-412">Creating an "insecure" cluster will allow any anonymous user to connect to it if it exposes management endpoints to the public Internet.</span></span></p>|

## <span data-ttu-id="c3da9-413"><a id="fabric-cn-nn"></a>Se till att certifikatet för Service Fabric-klient-till-nod skiljer sig från nod till nod certifikatet</span><span class="sxs-lookup"><span data-stu-id="c3da9-413"><a id="fabric-cn-nn"></a>Ensure that Service Fabric client-to-node certificate is different from node-to-node certificate</span></span>

| <span data-ttu-id="c3da9-414">Rubrik</span><span class="sxs-lookup"><span data-stu-id="c3da9-414">Title</span></span>                   | <span data-ttu-id="c3da9-415">Information</span><span class="sxs-lookup"><span data-stu-id="c3da9-415">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="c3da9-416">**Komponent**</span><span class="sxs-lookup"><span data-stu-id="c3da9-416">**Component**</span></span>               | <span data-ttu-id="c3da9-417">Service Fabric-Förtroendegräns</span><span class="sxs-lookup"><span data-stu-id="c3da9-417">Service Fabric Trust Boundary</span></span> | 
| <span data-ttu-id="c3da9-418">**SDL fas**</span><span class="sxs-lookup"><span data-stu-id="c3da9-418">**SDL Phase**</span></span>               | <span data-ttu-id="c3da9-419">Distribution</span><span class="sxs-lookup"><span data-stu-id="c3da9-419">Deployment</span></span> |  
| <span data-ttu-id="c3da9-420">**Tillämpliga tekniker**</span><span class="sxs-lookup"><span data-stu-id="c3da9-420">**Applicable Technologies**</span></span> | <span data-ttu-id="c3da9-421">Generisk</span><span class="sxs-lookup"><span data-stu-id="c3da9-421">Generic</span></span> |
| <span data-ttu-id="c3da9-422">**Attribut**</span><span class="sxs-lookup"><span data-stu-id="c3da9-422">**Attributes**</span></span>              | <span data-ttu-id="c3da9-423">Miljö - Azure, miljö - fristående</span><span class="sxs-lookup"><span data-stu-id="c3da9-423">Environment - Azure, Environment - Stand alone</span></span> |
| <span data-ttu-id="c3da9-424">**Referenser**</span><span class="sxs-lookup"><span data-stu-id="c3da9-424">**References**</span></span>              | <span data-ttu-id="c3da9-425">[Service Fabric-klient-till-nod Certifikatsäkerhet](https://azure.microsoft.com/documentation/articles/service-fabric-cluster-security/#_client-to-node-certificate-security), [Anslut till en säker kluster som använder klientcertifikat](https://azure.microsoft.com/documentation/articles/service-fabric-connect-to-secure-cluster/)</span><span class="sxs-lookup"><span data-stu-id="c3da9-425">[Service Fabric Client-to-node certificate security](https://azure.microsoft.com/documentation/articles/service-fabric-cluster-security/#_client-to-node-certificate-security), [Connect to a secure cluster using client certificate](https://azure.microsoft.com/documentation/articles/service-fabric-connect-to-secure-cluster/)</span></span> |
| <span data-ttu-id="c3da9-426">**Steg**</span><span class="sxs-lookup"><span data-stu-id="c3da9-426">**Steps**</span></span> | <p><span data-ttu-id="c3da9-427">Certifikatsäkerhet för klient-till-nod konfigureras när du skapar klustret antingen via Azure-portalen Resource Manager-mallar eller en fristående JSON-mall genom att ange ett klientcertifikat för admin och/eller ett klientcertifikat.</span><span class="sxs-lookup"><span data-stu-id="c3da9-427">Client-to-node certificate security is configured while creating the cluster either through the Azure portal, Resource Manager templates or a standalone JSON template by specifying an admin client certificate and/or a user client certificate.</span></span></p><p><span data-ttu-id="c3da9-428">Admin klient- och klientcertifikat du anger måste skilja sig från de primära och sekundära certifikat som du anger för nod till nod säkerhet.</span><span class="sxs-lookup"><span data-stu-id="c3da9-428">The admin client and user client certificates you specify should be different than the primary and secondary certificates you specify for Node-to-node security.</span></span></p>|

## <span data-ttu-id="c3da9-429"><a id="aad-client-fabric"></a>Använd AAD för att autentisera klienter till service fabric-kluster</span><span class="sxs-lookup"><span data-stu-id="c3da9-429"><a id="aad-client-fabric"></a>Use AAD to authenticate clients to service fabric clusters</span></span>

| <span data-ttu-id="c3da9-430">Rubrik</span><span class="sxs-lookup"><span data-stu-id="c3da9-430">Title</span></span>                   | <span data-ttu-id="c3da9-431">Information</span><span class="sxs-lookup"><span data-stu-id="c3da9-431">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="c3da9-432">**Komponent**</span><span class="sxs-lookup"><span data-stu-id="c3da9-432">**Component**</span></span>               | <span data-ttu-id="c3da9-433">Service Fabric-Förtroendegräns</span><span class="sxs-lookup"><span data-stu-id="c3da9-433">Service Fabric Trust Boundary</span></span> | 
| <span data-ttu-id="c3da9-434">**SDL fas**</span><span class="sxs-lookup"><span data-stu-id="c3da9-434">**SDL Phase**</span></span>               | <span data-ttu-id="c3da9-435">Distribution</span><span class="sxs-lookup"><span data-stu-id="c3da9-435">Deployment</span></span> |  
| <span data-ttu-id="c3da9-436">**Tillämpliga tekniker**</span><span class="sxs-lookup"><span data-stu-id="c3da9-436">**Applicable Technologies**</span></span> | <span data-ttu-id="c3da9-437">Generisk</span><span class="sxs-lookup"><span data-stu-id="c3da9-437">Generic</span></span> |
| <span data-ttu-id="c3da9-438">**Attribut**</span><span class="sxs-lookup"><span data-stu-id="c3da9-438">**Attributes**</span></span>              | <span data-ttu-id="c3da9-439">Miljö - Azure</span><span class="sxs-lookup"><span data-stu-id="c3da9-439">Environment - Azure</span></span> |
| <span data-ttu-id="c3da9-440">**Referenser**</span><span class="sxs-lookup"><span data-stu-id="c3da9-440">**References**</span></span>              | [<span data-ttu-id="c3da9-441">Klustret säkerhetsscenarier - säkerhetsrekommendationer</span><span class="sxs-lookup"><span data-stu-id="c3da9-441">Cluster security scenarios - Security Recommendations</span></span>](https://azure.microsoft.com/documentation/articles/service-fabric-cluster-security/#security-recommendations) |
| <span data-ttu-id="c3da9-442">**Steg**</span><span class="sxs-lookup"><span data-stu-id="c3da9-442">**Steps**</span></span> | <span data-ttu-id="c3da9-443">Kluster som körs på Azure kan också säker åtkomst till management-slutpunkter med hjälp av Azure Active Directory (AAD), förutom klientcertifikat.</span><span class="sxs-lookup"><span data-stu-id="c3da9-443">Clusters running on Azure can also secure access to the management endpoints using Azure Active Directory (AAD), apart from client certificates.</span></span> <span data-ttu-id="c3da9-444">Det rekommenderas att du använder AAD säkerhet för att autentisera klienter och certifikat för nod till nod säkerhet för Azure-kluster.</span><span class="sxs-lookup"><span data-stu-id="c3da9-444">For Azure clusters, it is recommended that you use AAD security to authenticate clients and certificates for node-to-node security.</span></span>|

## <span data-ttu-id="c3da9-445"><a id="fabric-cert-ca"></a>Se till att service fabric certifikat hämtas från en godkänd certifikatutfärdare (CA)</span><span class="sxs-lookup"><span data-stu-id="c3da9-445"><a id="fabric-cert-ca"></a>Ensure that service fabric certificates are obtained from an approved Certificate Authority (CA)</span></span>

| <span data-ttu-id="c3da9-446">Rubrik</span><span class="sxs-lookup"><span data-stu-id="c3da9-446">Title</span></span>                   | <span data-ttu-id="c3da9-447">Information</span><span class="sxs-lookup"><span data-stu-id="c3da9-447">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="c3da9-448">**Komponent**</span><span class="sxs-lookup"><span data-stu-id="c3da9-448">**Component**</span></span>               | <span data-ttu-id="c3da9-449">Service Fabric-Förtroendegräns</span><span class="sxs-lookup"><span data-stu-id="c3da9-449">Service Fabric Trust Boundary</span></span> | 
| <span data-ttu-id="c3da9-450">**SDL fas**</span><span class="sxs-lookup"><span data-stu-id="c3da9-450">**SDL Phase**</span></span>               | <span data-ttu-id="c3da9-451">Distribution</span><span class="sxs-lookup"><span data-stu-id="c3da9-451">Deployment</span></span> |  
| <span data-ttu-id="c3da9-452">**Tillämpliga tekniker**</span><span class="sxs-lookup"><span data-stu-id="c3da9-452">**Applicable Technologies**</span></span> | <span data-ttu-id="c3da9-453">Generisk</span><span class="sxs-lookup"><span data-stu-id="c3da9-453">Generic</span></span> |
| <span data-ttu-id="c3da9-454">**Attribut**</span><span class="sxs-lookup"><span data-stu-id="c3da9-454">**Attributes**</span></span>              | <span data-ttu-id="c3da9-455">Miljö - Azure</span><span class="sxs-lookup"><span data-stu-id="c3da9-455">Environment - Azure</span></span> |
| <span data-ttu-id="c3da9-456">**Referenser**</span><span class="sxs-lookup"><span data-stu-id="c3da9-456">**References**</span></span>              | [<span data-ttu-id="c3da9-457">X.509-certifikat och Service Fabric</span><span class="sxs-lookup"><span data-stu-id="c3da9-457">X.509 certificates and Service Fabric</span></span>](https://azure.microsoft.com/documentation/articles/service-fabric-cluster-security/#x509-certificates-and-service-fabric) |
| <span data-ttu-id="c3da9-458">**Steg**</span><span class="sxs-lookup"><span data-stu-id="c3da9-458">**Steps**</span></span> | <p><span data-ttu-id="c3da9-459">Service Fabric använder X.509-certifikat för servern för att autentisera noder och klienter.</span><span class="sxs-lookup"><span data-stu-id="c3da9-459">Service Fabric uses X.509 server certificates for authenticating nodes and clients.</span></span></p><p><span data-ttu-id="c3da9-460">Några viktiga saker att tänka på när du använder certifikat i service fabric:</span><span class="sxs-lookup"><span data-stu-id="c3da9-460">Some important things to consider while using certificates in service fabrics:</span></span></p><ul><li><span data-ttu-id="c3da9-461">Certifikat som används i kluster som kör produktionsarbetsbelastningar ska skapas med hjälp av en korrekt konfigurerade tjänsten för Windows Server-certifikat eller erhålls från en godkänd certifikatutfärdare (CA).</span><span class="sxs-lookup"><span data-stu-id="c3da9-461">Certificates used in clusters running production workloads should be created by using a correctly configured Windows Server certificate service or obtained from an approved Certificate Authority (CA).</span></span> <span data-ttu-id="c3da9-462">Certifikatutfärdaren kan vara en godkänd extern Certifikatutfärdare eller en korrekt hanterade interna Public Key Infrastructure (PKI)</span><span class="sxs-lookup"><span data-stu-id="c3da9-462">The CA can be an approved external CA or a properly managed internal Public Key Infrastructure (PKI)</span></span></li><li><span data-ttu-id="c3da9-463">Använd aldrig några tillfälligt eller testa certifikat i produktion som skapas med verktyg som MakeCert.exe</span><span class="sxs-lookup"><span data-stu-id="c3da9-463">Never use any temporary or test certificates in production that are created with tools such as MakeCert.exe</span></span></li><li><span data-ttu-id="c3da9-464">Du kan använda ett självsignerat certifikat, men bör bara göra det för testkluster och inte i produktion</span><span class="sxs-lookup"><span data-stu-id="c3da9-464">You can use a self-signed certificate, but should only do so for test clusters and not in production</span></span></li></ul>|

## <span data-ttu-id="c3da9-465"><a id="standard-authn-id"></a>Använd standardautentisering scenarier som stöds av Identity Server</span><span class="sxs-lookup"><span data-stu-id="c3da9-465"><a id="standard-authn-id"></a>Use standard authentication scenarios supported by Identity Server</span></span>

| <span data-ttu-id="c3da9-466">Rubrik</span><span class="sxs-lookup"><span data-stu-id="c3da9-466">Title</span></span>                   | <span data-ttu-id="c3da9-467">Information</span><span class="sxs-lookup"><span data-stu-id="c3da9-467">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="c3da9-468">**Komponent**</span><span class="sxs-lookup"><span data-stu-id="c3da9-468">**Component**</span></span>               | <span data-ttu-id="c3da9-469">Identity Server</span><span class="sxs-lookup"><span data-stu-id="c3da9-469">Identity Server</span></span> | 
| <span data-ttu-id="c3da9-470">**SDL fas**</span><span class="sxs-lookup"><span data-stu-id="c3da9-470">**SDL Phase**</span></span>               | <span data-ttu-id="c3da9-471">Utveckla</span><span class="sxs-lookup"><span data-stu-id="c3da9-471">Build</span></span> |  
| <span data-ttu-id="c3da9-472">**Tillämpliga tekniker**</span><span class="sxs-lookup"><span data-stu-id="c3da9-472">**Applicable Technologies**</span></span> | <span data-ttu-id="c3da9-473">Generisk</span><span class="sxs-lookup"><span data-stu-id="c3da9-473">Generic</span></span> |
| <span data-ttu-id="c3da9-474">**Attribut**</span><span class="sxs-lookup"><span data-stu-id="c3da9-474">**Attributes**</span></span>              | <span data-ttu-id="c3da9-475">Saknas</span><span class="sxs-lookup"><span data-stu-id="c3da9-475">N/A</span></span>  |
| <span data-ttu-id="c3da9-476">**Referenser**</span><span class="sxs-lookup"><span data-stu-id="c3da9-476">**References**</span></span>              | [<span data-ttu-id="c3da9-477">IdentityServer3 - stor bild</span><span class="sxs-lookup"><span data-stu-id="c3da9-477">IdentityServer3 - The Big Picture</span></span>](https://identityserver.github.io/Documentation/docsv2/overview/bigPicture.html) |
| <span data-ttu-id="c3da9-478">**Steg**</span><span class="sxs-lookup"><span data-stu-id="c3da9-478">**Steps**</span></span> | <p><span data-ttu-id="c3da9-479">Här följer vanliga interaktioner som stöds av Identity Server:</span><span class="sxs-lookup"><span data-stu-id="c3da9-479">Below are the typical interactions supported by Identity Server:</span></span></p><ul><li><span data-ttu-id="c3da9-480">Webbläsare kommunicera med webbprogram</span><span class="sxs-lookup"><span data-stu-id="c3da9-480">Browsers communicate with web applications</span></span></li><li><span data-ttu-id="c3da9-481">Webbprogram kommunicera med web API: er (ibland på egen hand, ibland för en användares räkning)</span><span class="sxs-lookup"><span data-stu-id="c3da9-481">Web applications communicate with web APIs (sometimes on their own, sometimes on behalf of a user)</span></span></li><li><span data-ttu-id="c3da9-482">Webbläsarbaserade program kommunicerar med web API: er</span><span class="sxs-lookup"><span data-stu-id="c3da9-482">Browser-based applications communicate with web APIs</span></span></li><li><span data-ttu-id="c3da9-483">Interna program kommunicerar med web API: er</span><span class="sxs-lookup"><span data-stu-id="c3da9-483">Native applications communicate with web APIs</span></span></li><li><span data-ttu-id="c3da9-484">Server-baserade program kommunicerar med web API: er</span><span class="sxs-lookup"><span data-stu-id="c3da9-484">Server-based applications communicate with web APIs</span></span></li><li><span data-ttu-id="c3da9-485">Webb-API: er kommunicera med web API: er (ibland på egen hand, ibland för en användares räkning)</span><span class="sxs-lookup"><span data-stu-id="c3da9-485">Web APIs communicate with web APIs (sometimes on their own, sometimes on behalf of a user)</span></span></li></ul>|

## <span data-ttu-id="c3da9-486"><a id="override-token"></a>Åsidosätta standard Identity Server tokens cacheminne med ett skalbart alternativ</span><span class="sxs-lookup"><span data-stu-id="c3da9-486"><a id="override-token"></a>Override the default Identity Server token cache with a scalable alternative</span></span>

| <span data-ttu-id="c3da9-487">Rubrik</span><span class="sxs-lookup"><span data-stu-id="c3da9-487">Title</span></span>                   | <span data-ttu-id="c3da9-488">Information</span><span class="sxs-lookup"><span data-stu-id="c3da9-488">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="c3da9-489">**Komponent**</span><span class="sxs-lookup"><span data-stu-id="c3da9-489">**Component**</span></span>               | <span data-ttu-id="c3da9-490">Identity Server</span><span class="sxs-lookup"><span data-stu-id="c3da9-490">Identity Server</span></span> | 
| <span data-ttu-id="c3da9-491">**SDL fas**</span><span class="sxs-lookup"><span data-stu-id="c3da9-491">**SDL Phase**</span></span>               | <span data-ttu-id="c3da9-492">Distribution</span><span class="sxs-lookup"><span data-stu-id="c3da9-492">Deployment</span></span> |  
| <span data-ttu-id="c3da9-493">**Tillämpliga tekniker**</span><span class="sxs-lookup"><span data-stu-id="c3da9-493">**Applicable Technologies**</span></span> | <span data-ttu-id="c3da9-494">Generisk</span><span class="sxs-lookup"><span data-stu-id="c3da9-494">Generic</span></span> |
| <span data-ttu-id="c3da9-495">**Attribut**</span><span class="sxs-lookup"><span data-stu-id="c3da9-495">**Attributes**</span></span>              | <span data-ttu-id="c3da9-496">Saknas</span><span class="sxs-lookup"><span data-stu-id="c3da9-496">N/A</span></span>  |
| <span data-ttu-id="c3da9-497">**Referenser**</span><span class="sxs-lookup"><span data-stu-id="c3da9-497">**References**</span></span>              | [<span data-ttu-id="c3da9-498">Identity Server-distributionen - cachelagring</span><span class="sxs-lookup"><span data-stu-id="c3da9-498">Identity Server Deployment - Caching</span></span>](https://identityserver.github.io/Documentation/docsv2/advanced/deployment.html) |
| <span data-ttu-id="c3da9-499">**Steg**</span><span class="sxs-lookup"><span data-stu-id="c3da9-499">**Steps**</span></span> | <p><span data-ttu-id="c3da9-500">IdentityServer har en enkel inbyggda i cacheminnet.</span><span class="sxs-lookup"><span data-stu-id="c3da9-500">IdentityServer has a simple built-in in-memory cache.</span></span> <span data-ttu-id="c3da9-501">Även om det är bra för interna appar i liten skala skalas den inte för mid nivå och backend-program av följande skäl:</span><span class="sxs-lookup"><span data-stu-id="c3da9-501">While this is good for small scale native apps, it does not scale for mid tier and backend applications for the following reasons:</span></span></p><ul><li><span data-ttu-id="c3da9-502">Dessa program kan nås av många användare samtidigt.</span><span class="sxs-lookup"><span data-stu-id="c3da9-502">These applications are accessed by many users at once.</span></span> <span data-ttu-id="c3da9-503">Spara alla åtkomst-token i samma Arkiv skapas isolering problem och visar utmaningar när fungerar i stor skala: många användare med så många token som resurser appen har åtkomst till åt, kan innebära stora tal och väldigt dyr sökning åtgärder</span><span class="sxs-lookup"><span data-stu-id="c3da9-503">Saving all access tokens in the same store creates isolation issues and presents challenges when operating at scale: many users, each with as many tokens as the resources the app accesses on their behalf, can mean huge numbers and very expensive lookup operations</span></span></li><li><span data-ttu-id="c3da9-504">Dessa program distribueras vanligtvis på distribuerade topologier, där flera noder måste ha åtkomst till samma cache</span><span class="sxs-lookup"><span data-stu-id="c3da9-504">These applications are typically deployed on distributed topologies, where multiple nodes must have access to the same cache</span></span></li><li><span data-ttu-id="c3da9-505">Cachelagrade token måste klara återvinns och avaktiveringar</span><span class="sxs-lookup"><span data-stu-id="c3da9-505">Cached tokens must survive process recycles and deactivations</span></span></li><li><span data-ttu-id="c3da9-506">Alla dessa skäl rekommenderas när implementera webbappar, att åsidosätta standard Identity Server token-cache med en skalbar alternativ, till exempel Azure Redis-cache</span><span class="sxs-lookup"><span data-stu-id="c3da9-506">For all the above reasons, while implementing web apps, it is recommended to override the default Identity Server's token cache with a scalable alternative such as Azure Redis cache</span></span></li></ul>|

## <span data-ttu-id="c3da9-507"><a id="binaries-signed"></a>Se till att binärfilerna för distribuerade program är digitalt signerade</span><span class="sxs-lookup"><span data-stu-id="c3da9-507"><a id="binaries-signed"></a>Ensure that deployed application's binaries are digitally signed</span></span>

| <span data-ttu-id="c3da9-508">Rubrik</span><span class="sxs-lookup"><span data-stu-id="c3da9-508">Title</span></span>                   | <span data-ttu-id="c3da9-509">Information</span><span class="sxs-lookup"><span data-stu-id="c3da9-509">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="c3da9-510">**Komponent**</span><span class="sxs-lookup"><span data-stu-id="c3da9-510">**Component**</span></span>               | <span data-ttu-id="c3da9-511">Datorn Förtroendegräns</span><span class="sxs-lookup"><span data-stu-id="c3da9-511">Machine Trust Boundary</span></span> | 
| <span data-ttu-id="c3da9-512">**SDL fas**</span><span class="sxs-lookup"><span data-stu-id="c3da9-512">**SDL Phase**</span></span>               | <span data-ttu-id="c3da9-513">Distribution</span><span class="sxs-lookup"><span data-stu-id="c3da9-513">Deployment</span></span> |  
| <span data-ttu-id="c3da9-514">**Tillämpliga tekniker**</span><span class="sxs-lookup"><span data-stu-id="c3da9-514">**Applicable Technologies**</span></span> | <span data-ttu-id="c3da9-515">Generisk</span><span class="sxs-lookup"><span data-stu-id="c3da9-515">Generic</span></span> |
| <span data-ttu-id="c3da9-516">**Attribut**</span><span class="sxs-lookup"><span data-stu-id="c3da9-516">**Attributes**</span></span>              | <span data-ttu-id="c3da9-517">Saknas</span><span class="sxs-lookup"><span data-stu-id="c3da9-517">N/A</span></span>  |
| <span data-ttu-id="c3da9-518">**Referenser**</span><span class="sxs-lookup"><span data-stu-id="c3da9-518">**References**</span></span>              | <span data-ttu-id="c3da9-519">Saknas</span><span class="sxs-lookup"><span data-stu-id="c3da9-519">N/A</span></span>  |
| <span data-ttu-id="c3da9-520">**Steg**</span><span class="sxs-lookup"><span data-stu-id="c3da9-520">**Steps**</span></span> | <span data-ttu-id="c3da9-521">Se till att binärfilerna för distribuerade program har signerats digitalt så att integriteten hos de binära filerna kan verifieras</span><span class="sxs-lookup"><span data-stu-id="c3da9-521">Ensure that deployed application's binaries are digitally signed so that the integrity of the binaries can be verified</span></span>|

## <span data-ttu-id="c3da9-522"><a id="msmq-queues"></a>Aktivera autentisering vid anslutning till MSMQ-köer i WCF</span><span class="sxs-lookup"><span data-stu-id="c3da9-522"><a id="msmq-queues"></a>Enable authentication when connecting to MSMQ queues in WCF</span></span>

| <span data-ttu-id="c3da9-523">Rubrik</span><span class="sxs-lookup"><span data-stu-id="c3da9-523">Title</span></span>                   | <span data-ttu-id="c3da9-524">Information</span><span class="sxs-lookup"><span data-stu-id="c3da9-524">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="c3da9-525">**Komponent**</span><span class="sxs-lookup"><span data-stu-id="c3da9-525">**Component**</span></span>               | <span data-ttu-id="c3da9-526">WCF</span><span class="sxs-lookup"><span data-stu-id="c3da9-526">WCF</span></span> | 
| <span data-ttu-id="c3da9-527">**SDL fas**</span><span class="sxs-lookup"><span data-stu-id="c3da9-527">**SDL Phase**</span></span>               | <span data-ttu-id="c3da9-528">Utveckla</span><span class="sxs-lookup"><span data-stu-id="c3da9-528">Build</span></span> |  
| <span data-ttu-id="c3da9-529">**Tillämpliga tekniker**</span><span class="sxs-lookup"><span data-stu-id="c3da9-529">**Applicable Technologies**</span></span> | <span data-ttu-id="c3da9-530">Generisk NET Framework 3</span><span class="sxs-lookup"><span data-stu-id="c3da9-530">Generic, NET Framework 3</span></span> |
| <span data-ttu-id="c3da9-531">**Attribut**</span><span class="sxs-lookup"><span data-stu-id="c3da9-531">**Attributes**</span></span>              | <span data-ttu-id="c3da9-532">Saknas</span><span class="sxs-lookup"><span data-stu-id="c3da9-532">N/A</span></span> |
| <span data-ttu-id="c3da9-533">**Referenser**</span><span class="sxs-lookup"><span data-stu-id="c3da9-533">**References**</span></span>              | [<span data-ttu-id="c3da9-534">MSDN</span><span class="sxs-lookup"><span data-stu-id="c3da9-534">MSDN</span></span>](https://msdn.microsoft.com/library/ff648500.aspx) |
| <span data-ttu-id="c3da9-535">**Steg**</span><span class="sxs-lookup"><span data-stu-id="c3da9-535">**Steps**</span></span> | <span data-ttu-id="c3da9-536">Programmet inte kan aktivera autentisering vid anslutning till MSMQ-köer, kan en angripare anonymt skicka meddelanden till kön för bearbetning.</span><span class="sxs-lookup"><span data-stu-id="c3da9-536">Program fails to enable authentication when connecting to MSMQ queues, an attacker can anonymously submit messages to the queue for processing.</span></span> <span data-ttu-id="c3da9-537">Om autentisering inte används för att ansluta till en MSMQ-kön som används för att leverera ett meddelande till ett annat program, kan en angripare skicka en anonym meddelande som är skadliga.</span><span class="sxs-lookup"><span data-stu-id="c3da9-537">If authentication is not used to connect to an MSMQ queue used to deliver a message to another program, an attacker could submit an anonymous message that is malicious.</span></span>|

### <a name="example"></a><span data-ttu-id="c3da9-538">Exempel</span><span class="sxs-lookup"><span data-stu-id="c3da9-538">Example</span></span>
<span data-ttu-id="c3da9-539">Den `<netMsmqBinding/>` element av WCF-konfigurationsfilen nedan instruerar WCF att inaktivera autentisering när du ansluter till en MSMQ-kön för leverans av meddelanden.</span><span class="sxs-lookup"><span data-stu-id="c3da9-539">The `<netMsmqBinding/>` element of the WCF configuration file below instructs WCF to disable authentication when connecting to an MSMQ queue for message delivery.</span></span>
```
<bindings>
    <netMsmqBinding>
        <binding>
            <security>
                <transport msmqAuthenticationMode=""None"" />
            </security>
        </binding>
    </netMsmqBinding>
</bindings>
```
<span data-ttu-id="c3da9-540">Konfigurera MSMQ för att kräva autentisering för Windows-domän eller certifikatet alltid för inkommande eller utgående meddelanden.</span><span class="sxs-lookup"><span data-stu-id="c3da9-540">Configure MSMQ to require Windows Domain or Certificate authentication at all times for any incoming or outgoing messages.</span></span>

### <a name="example"></a><span data-ttu-id="c3da9-541">Exempel</span><span class="sxs-lookup"><span data-stu-id="c3da9-541">Example</span></span>
<span data-ttu-id="c3da9-542">Den `<netMsmqBinding/>` element av WCF-konfigurationsfilen nedan instruerar WCF att aktivera autentisering med datorcertifikat vid anslutning till MSMQ-kön.</span><span class="sxs-lookup"><span data-stu-id="c3da9-542">The `<netMsmqBinding/>` element of the WCF configuration file below instructs WCF to enable certificate authentication when connecting to an MSMQ queue.</span></span> <span data-ttu-id="c3da9-543">Klienten är autentiserad med X.509-certifikat.</span><span class="sxs-lookup"><span data-stu-id="c3da9-543">The client is authenticated using X.509 certificates.</span></span> <span data-ttu-id="c3da9-544">Klientcertifikatet måste finnas i certifikatarkivet på servern.</span><span class="sxs-lookup"><span data-stu-id="c3da9-544">The client certificate must be present in the certificate store of the server.</span></span>
```
<bindings>
    <netMsmqBinding>
        <binding>
            <security>
                <transport msmqAuthenticationMode=""Certificate"" />
            </security>
        </binding>
    </netMsmqBinding>
</bindings>
```

## <span data-ttu-id="c3da9-545"><a id="message-none"></a>WCF-Använd Ange inte meddelande clientCredentialType till ingen</span><span class="sxs-lookup"><span data-stu-id="c3da9-545"><a id="message-none"></a>WCF-Do not set Message clientCredentialType to none</span></span>

| <span data-ttu-id="c3da9-546">Rubrik</span><span class="sxs-lookup"><span data-stu-id="c3da9-546">Title</span></span>                   | <span data-ttu-id="c3da9-547">Information</span><span class="sxs-lookup"><span data-stu-id="c3da9-547">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="c3da9-548">**Komponent**</span><span class="sxs-lookup"><span data-stu-id="c3da9-548">**Component**</span></span>               | <span data-ttu-id="c3da9-549">WCF</span><span class="sxs-lookup"><span data-stu-id="c3da9-549">WCF</span></span> | 
| <span data-ttu-id="c3da9-550">**SDL fas**</span><span class="sxs-lookup"><span data-stu-id="c3da9-550">**SDL Phase**</span></span>               | <span data-ttu-id="c3da9-551">Utveckla</span><span class="sxs-lookup"><span data-stu-id="c3da9-551">Build</span></span> |  
| <span data-ttu-id="c3da9-552">**Tillämpliga tekniker**</span><span class="sxs-lookup"><span data-stu-id="c3da9-552">**Applicable Technologies**</span></span> | <span data-ttu-id="c3da9-553">.NET framework 3</span><span class="sxs-lookup"><span data-stu-id="c3da9-553">.NET Framework 3</span></span> |
| <span data-ttu-id="c3da9-554">**Attribut**</span><span class="sxs-lookup"><span data-stu-id="c3da9-554">**Attributes**</span></span>              | <span data-ttu-id="c3da9-555">Klienten autentiseringstypen - ingen</span><span class="sxs-lookup"><span data-stu-id="c3da9-555">Client Credential Type - None</span></span> |
| <span data-ttu-id="c3da9-556">**Referenser**</span><span class="sxs-lookup"><span data-stu-id="c3da9-556">**References**</span></span>              | <span data-ttu-id="c3da9-557">[MSDN](https://msdn.microsoft.com/library/ff648500.aspx), [spikning](https://vulncat.fortify.com/en/vulncat/index.html)</span><span class="sxs-lookup"><span data-stu-id="c3da9-557">[MSDN](https://msdn.microsoft.com/library/ff648500.aspx), [Fortify](https://vulncat.fortify.com/en/vulncat/index.html)</span></span> |
| <span data-ttu-id="c3da9-558">**Steg**</span><span class="sxs-lookup"><span data-stu-id="c3da9-558">**Steps**</span></span> | <span data-ttu-id="c3da9-559">Avsaknad av autentisering innebär att alla har tillgång till den här tjänsten.</span><span class="sxs-lookup"><span data-stu-id="c3da9-559">The absence of authentication means everyone is able to access this service.</span></span> <span data-ttu-id="c3da9-560">En tjänst som inte autentiserar klienter åtkomst till alla användare.</span><span class="sxs-lookup"><span data-stu-id="c3da9-560">A service that does not authenticate its clients allows access to all users.</span></span> <span data-ttu-id="c3da9-561">Konfigurera program för att autentisera mot klientens autentiseringsuppgifter.</span><span class="sxs-lookup"><span data-stu-id="c3da9-561">Configure the application to authenticate against client credentials.</span></span> <span data-ttu-id="c3da9-562">Detta kan göras genom att ange meddelande clientCredentialType Windows eller certifikat.</span><span class="sxs-lookup"><span data-stu-id="c3da9-562">This can be done by setting the message clientCredentialType to Windows or Certificate.</span></span> |

### <a name="example"></a><span data-ttu-id="c3da9-563">Exempel</span><span class="sxs-lookup"><span data-stu-id="c3da9-563">Example</span></span>
```
<message clientCredentialType=""Certificate""/>
```

## <span data-ttu-id="c3da9-564"><a id="transport-none"></a>WCF-vill ange inte Transport clientCredentialType till ingen</span><span class="sxs-lookup"><span data-stu-id="c3da9-564"><a id="transport-none"></a>WCF-Do not set Transport clientCredentialType to none</span></span>

| <span data-ttu-id="c3da9-565">Rubrik</span><span class="sxs-lookup"><span data-stu-id="c3da9-565">Title</span></span>                   | <span data-ttu-id="c3da9-566">Information</span><span class="sxs-lookup"><span data-stu-id="c3da9-566">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="c3da9-567">**Komponent**</span><span class="sxs-lookup"><span data-stu-id="c3da9-567">**Component**</span></span>               | <span data-ttu-id="c3da9-568">WCF</span><span class="sxs-lookup"><span data-stu-id="c3da9-568">WCF</span></span> | 
| <span data-ttu-id="c3da9-569">**SDL fas**</span><span class="sxs-lookup"><span data-stu-id="c3da9-569">**SDL Phase**</span></span>               | <span data-ttu-id="c3da9-570">Utveckla</span><span class="sxs-lookup"><span data-stu-id="c3da9-570">Build</span></span> |  
| <span data-ttu-id="c3da9-571">**Tillämpliga tekniker**</span><span class="sxs-lookup"><span data-stu-id="c3da9-571">**Applicable Technologies**</span></span> | <span data-ttu-id="c3da9-572">Allmän och .NET Framework 3</span><span class="sxs-lookup"><span data-stu-id="c3da9-572">Generic, .NET Framework 3</span></span> |
| <span data-ttu-id="c3da9-573">**Attribut**</span><span class="sxs-lookup"><span data-stu-id="c3da9-573">**Attributes**</span></span>              | <span data-ttu-id="c3da9-574">Klienten autentiseringstypen - ingen</span><span class="sxs-lookup"><span data-stu-id="c3da9-574">Client Credential Type - None</span></span> |
| <span data-ttu-id="c3da9-575">**Referenser**</span><span class="sxs-lookup"><span data-stu-id="c3da9-575">**References**</span></span>              | <span data-ttu-id="c3da9-576">[MSDN](https://msdn.microsoft.com/library/ff648500.aspx), [spikning](https://vulncat.fortify.com/en/vulncat/index.html)</span><span class="sxs-lookup"><span data-stu-id="c3da9-576">[MSDN](https://msdn.microsoft.com/library/ff648500.aspx), [Fortify](https://vulncat.fortify.com/en/vulncat/index.html)</span></span> |
| <span data-ttu-id="c3da9-577">**Steg**</span><span class="sxs-lookup"><span data-stu-id="c3da9-577">**Steps**</span></span> | <span data-ttu-id="c3da9-578">Avsaknad av autentisering innebär att alla har tillgång till den här tjänsten.</span><span class="sxs-lookup"><span data-stu-id="c3da9-578">The absence of authentication means everyone is able to access this service.</span></span> <span data-ttu-id="c3da9-579">En tjänst som inte autentiserar klienter kan alla användare åtkomst till dess funktioner.</span><span class="sxs-lookup"><span data-stu-id="c3da9-579">A service that does not authenticate its clients allows all users to access its functionality.</span></span> <span data-ttu-id="c3da9-580">Konfigurera program för att autentisera mot klientens autentiseringsuppgifter.</span><span class="sxs-lookup"><span data-stu-id="c3da9-580">Configure the application to authenticate against client credentials.</span></span> <span data-ttu-id="c3da9-581">Detta kan göras genom att ange transport clientCredentialType Windows eller certifikat.</span><span class="sxs-lookup"><span data-stu-id="c3da9-581">This can be done by setting the transport clientCredentialType to Windows or Certificate.</span></span> |

### <a name="example"></a><span data-ttu-id="c3da9-582">Exempel</span><span class="sxs-lookup"><span data-stu-id="c3da9-582">Example</span></span>
```
<transport clientCredentialType=""Certificate""/>
```

## <span data-ttu-id="c3da9-583"><a id="authn-secure-api"></a>Se till att standardautentisering tekniker som används för att skydda webb-API: er</span><span class="sxs-lookup"><span data-stu-id="c3da9-583"><a id="authn-secure-api"></a>Ensure that standard authentication techniques are used to secure Web APIs</span></span>

| <span data-ttu-id="c3da9-584">Rubrik</span><span class="sxs-lookup"><span data-stu-id="c3da9-584">Title</span></span>                   | <span data-ttu-id="c3da9-585">Information</span><span class="sxs-lookup"><span data-stu-id="c3da9-585">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="c3da9-586">**Komponent**</span><span class="sxs-lookup"><span data-stu-id="c3da9-586">**Component**</span></span>               | <span data-ttu-id="c3da9-587">Webb-API</span><span class="sxs-lookup"><span data-stu-id="c3da9-587">Web API</span></span> | 
| <span data-ttu-id="c3da9-588">**SDL fas**</span><span class="sxs-lookup"><span data-stu-id="c3da9-588">**SDL Phase**</span></span>               | <span data-ttu-id="c3da9-589">Utveckla</span><span class="sxs-lookup"><span data-stu-id="c3da9-589">Build</span></span> |  
| <span data-ttu-id="c3da9-590">**Tillämpliga tekniker**</span><span class="sxs-lookup"><span data-stu-id="c3da9-590">**Applicable Technologies**</span></span> | <span data-ttu-id="c3da9-591">Generisk</span><span class="sxs-lookup"><span data-stu-id="c3da9-591">Generic</span></span> |
| <span data-ttu-id="c3da9-592">**Attribut**</span><span class="sxs-lookup"><span data-stu-id="c3da9-592">**Attributes**</span></span>              | <span data-ttu-id="c3da9-593">Saknas</span><span class="sxs-lookup"><span data-stu-id="c3da9-593">N/A</span></span>  |
| <span data-ttu-id="c3da9-594">**Referenser**</span><span class="sxs-lookup"><span data-stu-id="c3da9-594">**References**</span></span>              | <span data-ttu-id="c3da9-595">[Autentisering och auktorisering i ASP.NET Web API](http://www.asp.net/web-api/overview/security/authentication-and-authorization-in-aspnet-web-api), [tjänster extern autentisering med ASP.NET Web API (C#)](http://www.asp.net/web-api/overview/security/external-authentication-services)</span><span class="sxs-lookup"><span data-stu-id="c3da9-595">[Authentication and Authorization in ASP.NET Web API](http://www.asp.net/web-api/overview/security/authentication-and-authorization-in-aspnet-web-api), [External Authentication Services with ASP.NET Web API (C#)](http://www.asp.net/web-api/overview/security/external-authentication-services)</span></span> |
| <span data-ttu-id="c3da9-596">**Steg**</span><span class="sxs-lookup"><span data-stu-id="c3da9-596">**Steps**</span></span> | <p><span data-ttu-id="c3da9-597">Autentisering är den process där en entitet bevisar sin identitet, vanligtvis via autentiseringsuppgifter, till exempel användarnamn och lösenord.</span><span class="sxs-lookup"><span data-stu-id="c3da9-597">Authentication is the process where an entity proves its identity, typically through credentials, such as a user name and password.</span></span> <span data-ttu-id="c3da9-598">Det finns flera autentiseringsprotokoll tillgänglig som kan betraktas.</span><span class="sxs-lookup"><span data-stu-id="c3da9-598">There are multiple authentication protocols available which may be considered.</span></span> <span data-ttu-id="c3da9-599">Några av dem visas nedan:</span><span class="sxs-lookup"><span data-stu-id="c3da9-599">Some of them are listed below:</span></span></p><ul><li><span data-ttu-id="c3da9-600">Klientcertifikat</span><span class="sxs-lookup"><span data-stu-id="c3da9-600">Client certificates</span></span></li><li><span data-ttu-id="c3da9-601">Windows-baserade</span><span class="sxs-lookup"><span data-stu-id="c3da9-601">Windows based</span></span></li><li><span data-ttu-id="c3da9-602">Formulärbaserad</span><span class="sxs-lookup"><span data-stu-id="c3da9-602">Forms based</span></span></li><li><span data-ttu-id="c3da9-603">Federation - AD FS</span><span class="sxs-lookup"><span data-stu-id="c3da9-603">Federation - ADFS</span></span></li><li><span data-ttu-id="c3da9-604">Federation - Azure AD</span><span class="sxs-lookup"><span data-stu-id="c3da9-604">Federation - Azure AD</span></span></li><li><span data-ttu-id="c3da9-605">Federation - Identity Server</span><span class="sxs-lookup"><span data-stu-id="c3da9-605">Federation - Identity Server</span></span></li></ul><p><span data-ttu-id="c3da9-606">Länkarna i referensavsnittet tillhandahåller lågnivå-information om hur var och en av autentiseringsscheman kan implementeras för att skydda ett webb-API.</span><span class="sxs-lookup"><span data-stu-id="c3da9-606">Links in the references section provide low-level details on how each of the authentication schemes can be implemented to secure a Web API.</span></span></p>|

## <span data-ttu-id="c3da9-607"><a id="authn-aad"></a>Använd standardautentisering scenarier som stöds av Azure Active Directory</span><span class="sxs-lookup"><span data-stu-id="c3da9-607"><a id="authn-aad"></a>Use standard authentication scenarios supported by Azure Active Directory</span></span>

| <span data-ttu-id="c3da9-608">Rubrik</span><span class="sxs-lookup"><span data-stu-id="c3da9-608">Title</span></span>                   | <span data-ttu-id="c3da9-609">Information</span><span class="sxs-lookup"><span data-stu-id="c3da9-609">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="c3da9-610">**Komponent**</span><span class="sxs-lookup"><span data-stu-id="c3da9-610">**Component**</span></span>               | <span data-ttu-id="c3da9-611">Azure AD</span><span class="sxs-lookup"><span data-stu-id="c3da9-611">Azure AD</span></span> | 
| <span data-ttu-id="c3da9-612">**SDL fas**</span><span class="sxs-lookup"><span data-stu-id="c3da9-612">**SDL Phase**</span></span>               | <span data-ttu-id="c3da9-613">Utveckla</span><span class="sxs-lookup"><span data-stu-id="c3da9-613">Build</span></span> |  
| <span data-ttu-id="c3da9-614">**Tillämpliga tekniker**</span><span class="sxs-lookup"><span data-stu-id="c3da9-614">**Applicable Technologies**</span></span> | <span data-ttu-id="c3da9-615">Generisk</span><span class="sxs-lookup"><span data-stu-id="c3da9-615">Generic</span></span> |
| <span data-ttu-id="c3da9-616">**Attribut**</span><span class="sxs-lookup"><span data-stu-id="c3da9-616">**Attributes**</span></span>              | <span data-ttu-id="c3da9-617">Saknas</span><span class="sxs-lookup"><span data-stu-id="c3da9-617">N/A</span></span>  |
| <span data-ttu-id="c3da9-618">**Referenser**</span><span class="sxs-lookup"><span data-stu-id="c3da9-618">**References**</span></span>              | <span data-ttu-id="c3da9-619">[Autentiseringsscenarier för Azure AD](https://azure.microsoft.com/documentation/articles/active-directory-authentication-scenarios/), [Azure Active Directory-kodexempel](https://azure.microsoft.com/documentation/articles/active-directory-code-samples/), [Azure Active Directory-guide för utvecklare](https://azure.microsoft.com/documentation/articles/active-directory-developers-guide/)</span><span class="sxs-lookup"><span data-stu-id="c3da9-619">[Authentication Scenarios for Azure AD](https://azure.microsoft.com/documentation/articles/active-directory-authentication-scenarios/), [Azure Active Directory Code Samples](https://azure.microsoft.com/documentation/articles/active-directory-code-samples/), [Azure Active Directory developer's guide](https://azure.microsoft.com/documentation/articles/active-directory-developers-guide/)</span></span> |
| <span data-ttu-id="c3da9-620">**Steg**</span><span class="sxs-lookup"><span data-stu-id="c3da9-620">**Steps**</span></span> | <p><span data-ttu-id="c3da9-621">Azure Active Directory (AD Azure) gör det enklare för utvecklare genom att tillhandahålla identitet som en tjänst med stöd för standardiserade protokoll, till exempel OAuth 2.0 och OpenID Connect.</span><span class="sxs-lookup"><span data-stu-id="c3da9-621">Azure Active Directory (Azure AD) simplifies authentication for developers by providing identity as a service, with support for industry-standard protocols such as OAuth 2.0 and OpenID Connect.</span></span> <span data-ttu-id="c3da9-622">Nedan visas de fem primära programmet scenarier som stöds av Azure AD:</span><span class="sxs-lookup"><span data-stu-id="c3da9-622">Below are the five primary application scenarios supported by Azure AD:</span></span></p><ul><li><span data-ttu-id="c3da9-623">Webbläsaren till webbprogrammet: en användare behöver att logga in på ett program som skyddas av Azure AD</span><span class="sxs-lookup"><span data-stu-id="c3da9-623">Web Browser to Web Application: A user needs to sign in to a web application that is secured by Azure AD</span></span></li><li><span data-ttu-id="c3da9-624">Sidan program (SPA): En användare behöver logga in på en enstaka sida-program som skyddas av Azure AD</span><span class="sxs-lookup"><span data-stu-id="c3da9-624">Single Page Application (SPA): A user needs to sign in to a single page application that is secured by Azure AD</span></span></li><li><span data-ttu-id="c3da9-625">Det ursprungliga programmet till webb-API: en intern program som körs på en mobiltelefon, surfplatta eller dator måste autentisera en användare för att hämta resurser från ett webb-API som skyddas av Azure AD</span><span class="sxs-lookup"><span data-stu-id="c3da9-625">Native Application to Web API: A native application that runs on a phone, tablet, or PC needs to authenticate a user to get resources from a web API that is secured by Azure AD</span></span></li><li><span data-ttu-id="c3da9-626">Webbprogram till webb-API: ett webbprogram måste hämta resurser från ett webb-API som skyddas av Azure AD</span><span class="sxs-lookup"><span data-stu-id="c3da9-626">Web Application to Web API: A web application needs to get resources from a web API secured by Azure AD</span></span></li><li><span data-ttu-id="c3da9-627">Daemon eller Server-program till webb-API: en daemon-program eller ett serverprogram utan användargränssnitt för web måste hämta resurser från ett webb-API som skyddas av Azure AD</span><span class="sxs-lookup"><span data-stu-id="c3da9-627">Daemon or Server Application to Web API: A daemon application or a server application with no web user interface needs to get resources from a web API secured by Azure AD</span></span></li></ul><p><span data-ttu-id="c3da9-628">Mer information finns på länkarna i referensavsnittet för låg nivå implementeringsdetaljer</span><span class="sxs-lookup"><span data-stu-id="c3da9-628">Please refer to the links in the references section for low-level implementation details</span></span></p>|

## <span data-ttu-id="c3da9-629"><a id="adal-scalable"></a>Åsidosätta standard ADAL-token cache med ett skalbart alternativ</span><span class="sxs-lookup"><span data-stu-id="c3da9-629"><a id="adal-scalable"></a>Override the default ADAL token cache with a scalable alternative</span></span>

| <span data-ttu-id="c3da9-630">Rubrik</span><span class="sxs-lookup"><span data-stu-id="c3da9-630">Title</span></span>                   | <span data-ttu-id="c3da9-631">Information</span><span class="sxs-lookup"><span data-stu-id="c3da9-631">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="c3da9-632">**Komponent**</span><span class="sxs-lookup"><span data-stu-id="c3da9-632">**Component**</span></span>               | <span data-ttu-id="c3da9-633">Azure AD</span><span class="sxs-lookup"><span data-stu-id="c3da9-633">Azure AD</span></span> | 
| <span data-ttu-id="c3da9-634">**SDL fas**</span><span class="sxs-lookup"><span data-stu-id="c3da9-634">**SDL Phase**</span></span>               | <span data-ttu-id="c3da9-635">Utveckla</span><span class="sxs-lookup"><span data-stu-id="c3da9-635">Build</span></span> |  
| <span data-ttu-id="c3da9-636">**Tillämpliga tekniker**</span><span class="sxs-lookup"><span data-stu-id="c3da9-636">**Applicable Technologies**</span></span> | <span data-ttu-id="c3da9-637">Generisk</span><span class="sxs-lookup"><span data-stu-id="c3da9-637">Generic</span></span> |
| <span data-ttu-id="c3da9-638">**Attribut**</span><span class="sxs-lookup"><span data-stu-id="c3da9-638">**Attributes**</span></span>              | <span data-ttu-id="c3da9-639">Saknas</span><span class="sxs-lookup"><span data-stu-id="c3da9-639">N/A</span></span>  |
| <span data-ttu-id="c3da9-640">**Referenser**</span><span class="sxs-lookup"><span data-stu-id="c3da9-640">**References**</span></span>              | <span data-ttu-id="c3da9-641">[Modern autentisering med Azure Active Directory för webbprogram](https://blogs.msdn.microsoft.com/microsoft_press/2016/01/04/new-book-modern-authentication-with-azure-active-directory-for-web-applications/), [med Redis som ADAL token-cache](https://blogs.msdn.microsoft.com/mrochon/2016/09/19/using-redis-as-adal-token-cache/)</span><span class="sxs-lookup"><span data-stu-id="c3da9-641">[Modern Authentication with Azure Active Directory for Web Applications](https://blogs.msdn.microsoft.com/microsoft_press/2016/01/04/new-book-modern-authentication-with-azure-active-directory-for-web-applications/), [Using Redis as ADAL token cache](https://blogs.msdn.microsoft.com/mrochon/2016/09/19/using-redis-as-adal-token-cache/)</span></span>  |
| <span data-ttu-id="c3da9-642">**Steg**</span><span class="sxs-lookup"><span data-stu-id="c3da9-642">**Steps**</span></span> | <p><span data-ttu-id="c3da9-643">Standard-cachen som använder ADAL (Active Directory Authentication Library) är en minnescache som förlitar sig på en statisk store tillgängliga övergripande.</span><span class="sxs-lookup"><span data-stu-id="c3da9-643">The default cache that ADAL (Active Directory Authentication Library) uses is an in-memory cache that relies on a static store, available process-wide.</span></span> <span data-ttu-id="c3da9-644">När det här fungerar för interna program skalas det inte för mid nivå och backend-program av följande skäl:</span><span class="sxs-lookup"><span data-stu-id="c3da9-644">While this works for native applications, it does not scale for mid tier and backend applications for the following reasons:</span></span></p><ul><li><span data-ttu-id="c3da9-645">Dessa program kan nås av många användare samtidigt.</span><span class="sxs-lookup"><span data-stu-id="c3da9-645">These applications are accessed by many users at once.</span></span> <span data-ttu-id="c3da9-646">Spara alla åtkomst-token i samma Arkiv skapas isolering problem och visar utmaningar när fungerar i stor skala: många användare med så många token som resurser appen har åtkomst till åt, kan innebära stora tal och väldigt dyr sökning åtgärder</span><span class="sxs-lookup"><span data-stu-id="c3da9-646">Saving all access tokens in the same store creates isolation issues and presents challenges when operating at scale: many users, each with as many tokens as the resources the app accesses on their behalf, can mean huge numbers and very expensive lookup operations</span></span></li><li><span data-ttu-id="c3da9-647">Dessa program distribueras vanligtvis på distribuerade topologier, där flera noder måste ha åtkomst till samma cache</span><span class="sxs-lookup"><span data-stu-id="c3da9-647">These applications are typically deployed on distributed topologies, where multiple nodes must have access to the same cache</span></span></li><li><span data-ttu-id="c3da9-648">Cachelagrade token måste klara återvinns och avaktiveringar</span><span class="sxs-lookup"><span data-stu-id="c3da9-648">Cached tokens must survive process recycles and deactivations</span></span></li></ul><p><span data-ttu-id="c3da9-649">Alla dessa skäl rekommenderas när implementera webbappar, att åsidosätta standard ADAL-token cache med ett skalbart alternativ, till exempel Azure Redis-cache.</span><span class="sxs-lookup"><span data-stu-id="c3da9-649">For all the above reasons, while implementing web apps, it is recommended to override the default ADAL token cache with a scalable alternative such as Azure Redis cache.</span></span></p>|

## <span data-ttu-id="c3da9-650"><a id="tokenreplaycache-adal"></a>Kontrollera att TokenReplayCache används för att förhindra omsändning av ADAL-autentisering-token</span><span class="sxs-lookup"><span data-stu-id="c3da9-650"><a id="tokenreplaycache-adal"></a>Ensure that TokenReplayCache is used to prevent the replay of ADAL authentication tokens</span></span>

| <span data-ttu-id="c3da9-651">Rubrik</span><span class="sxs-lookup"><span data-stu-id="c3da9-651">Title</span></span>                   | <span data-ttu-id="c3da9-652">Information</span><span class="sxs-lookup"><span data-stu-id="c3da9-652">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="c3da9-653">**Komponent**</span><span class="sxs-lookup"><span data-stu-id="c3da9-653">**Component**</span></span>               | <span data-ttu-id="c3da9-654">Azure AD</span><span class="sxs-lookup"><span data-stu-id="c3da9-654">Azure AD</span></span> | 
| <span data-ttu-id="c3da9-655">**SDL fas**</span><span class="sxs-lookup"><span data-stu-id="c3da9-655">**SDL Phase**</span></span>               | <span data-ttu-id="c3da9-656">Utveckla</span><span class="sxs-lookup"><span data-stu-id="c3da9-656">Build</span></span> |  
| <span data-ttu-id="c3da9-657">**Tillämpliga tekniker**</span><span class="sxs-lookup"><span data-stu-id="c3da9-657">**Applicable Technologies**</span></span> | <span data-ttu-id="c3da9-658">Generisk</span><span class="sxs-lookup"><span data-stu-id="c3da9-658">Generic</span></span> |
| <span data-ttu-id="c3da9-659">**Attribut**</span><span class="sxs-lookup"><span data-stu-id="c3da9-659">**Attributes**</span></span>              | <span data-ttu-id="c3da9-660">Saknas</span><span class="sxs-lookup"><span data-stu-id="c3da9-660">N/A</span></span>  |
| <span data-ttu-id="c3da9-661">**Referenser**</span><span class="sxs-lookup"><span data-stu-id="c3da9-661">**References**</span></span>              | [<span data-ttu-id="c3da9-662">Modern autentisering med Azure Active Directory för webbprogram</span><span class="sxs-lookup"><span data-stu-id="c3da9-662">Modern Authentication with Azure Active Directory for Web Applications</span></span>](https://blogs.msdn.microsoft.com/microsoft_press/2016/01/04/new-book-modern-authentication-with-azure-active-directory-for-web-applications/) |
| <span data-ttu-id="c3da9-663">**Steg**</span><span class="sxs-lookup"><span data-stu-id="c3da9-663">**Steps**</span></span> | <p><span data-ttu-id="c3da9-664">Egenskapen TokenReplayCache kan utvecklare definiera en tokenrepetition cache, en butik som kan användas för att spara token för att kontrollera att inga token inte kan användas mer än en gång.</span><span class="sxs-lookup"><span data-stu-id="c3da9-664">The TokenReplayCache property allows developers to define a token replay cache, a store that can be used for saving tokens for the purpose of verifying that no token can be used more than once.</span></span></p><p><span data-ttu-id="c3da9-665">Detta är en åtgärd mot en gemensam attack aptly kallas token replay-attacker: en angripare fångar upp den token som skickas vid inloggning kan försöka skicka till appen igen (”” spela upp det igen) för att upprätta en ny session.</span><span class="sxs-lookup"><span data-stu-id="c3da9-665">This is a measure against a common attack, the aptly called token replay attack: an attacker intercepting the token sent at sign-in might try to send it to the app again (“replay” it) for establishing a new session.</span></span> <span data-ttu-id="c3da9-666">T.ex. I OIDC kod bevilja flöde efter autentiseringen av användaren, en begäran om att ”/ signin-oidc” slutpunkten för den förlitande parten görs med ”id_token”, ”kod” och ”tillstånd” parametrar.</span><span class="sxs-lookup"><span data-stu-id="c3da9-666">E.g., In OIDC code-grant flow, after successful user authentication, a request to "/signin-oidc" endpoint of the relying party is made with "id_token", "code" and "state" parameters.</span></span></p><p><span data-ttu-id="c3da9-667">Den förlitande parten validerar denna begäran och upprättar en ny session.</span><span class="sxs-lookup"><span data-stu-id="c3da9-667">The relying party validates this request and establishes a new session.</span></span> <span data-ttu-id="c3da9-668">Om en angriparen samlar in denna begäran och spelar upp den kan han eller hon förfalska användaren upprätta en lyckad session.</span><span class="sxs-lookup"><span data-stu-id="c3da9-668">If an adversary captures this request and replays it, he/she can establish a successful session and spoof the user.</span></span> <span data-ttu-id="c3da9-669">Förekomsten av temporärt ID i OpenID Connect kan begränsa men inte helt eliminera omständigheter där angrepp kan vara har trätt i kraft.</span><span class="sxs-lookup"><span data-stu-id="c3da9-669">The presence of the nonce in OpenID Connect can limit but not fully eliminate the circumstances in which the attack can be successfully enacted.</span></span> <span data-ttu-id="c3da9-670">För att skydda sina program, kan utvecklare tillhandahålla en implementering av ITokenReplayCache och tilldela TokenReplayCache en instans.</span><span class="sxs-lookup"><span data-stu-id="c3da9-670">To protect their applications, developers can provide an implementation of ITokenReplayCache and assign an instance to TokenReplayCache.</span></span></p>|

### <a name="example"></a><span data-ttu-id="c3da9-671">Exempel</span><span class="sxs-lookup"><span data-stu-id="c3da9-671">Example</span></span>
```C#
// ITokenReplayCache defined in ADAL
public interface ITokenReplayCache
{
bool TryAdd(string securityToken, DateTime expiresOn);
bool TryFind(string securityToken);
}
```

### <a name="example"></a><span data-ttu-id="c3da9-672">Exempel</span><span class="sxs-lookup"><span data-stu-id="c3da9-672">Example</span></span>
<span data-ttu-id="c3da9-673">Här är ett exempel på implementering av gränssnittet ITokenReplayCache.</span><span class="sxs-lookup"><span data-stu-id="c3da9-673">Here is a sample implementation of the ITokenReplayCache interface.</span></span> <span data-ttu-id="c3da9-674">(Du anpassa och implementera din projektspecifika cachelagring framework)</span><span class="sxs-lookup"><span data-stu-id="c3da9-674">(Please customize and implement your project-specific caching framework)</span></span>
```C#
public class TokenReplayCache : ITokenReplayCache
{
    private readonly ICacheProvider cache; // Your project-specific cache provider
    public TokenReplayCache(ICacheProvider cache)
    {
        this.cache = cache;
    }
    public bool TryAdd(string securityToken, DateTime expiresOn)
    {
        if (this.cache.Get<string>(securityToken) == null)
        {
            this.cache.Set(securityToken, securityToken);
            return true;
        }
        return false;
    }
    public bool TryFind(string securityToken)
    {
        return this.cache.Get<string>(securityToken) != null;
    }
}
```
<span data-ttu-id="c3da9-675">Implementerad cacheminnet har refereras i OIDC alternativ via egenskapen ”TokenValidationParameters” på följande sätt.</span><span class="sxs-lookup"><span data-stu-id="c3da9-675">The implemented cache has to be referenced in OIDC options via the "TokenValidationParameters" property as follows.</span></span>
```C#
OpenIdConnectOptions openIdConnectOptions = new OpenIdConnectOptions
{
    AutomaticAuthenticate = true,
    ... // other configuration properties follow..
    TokenValidationParameters = new TokenValidationParameters
    {
        TokenReplayCache = new TokenReplayCache(/*Inject your cache provider*/);
    }
}
```

<span data-ttu-id="c3da9-676">Observera att om du vill testa effektiviteten i den här konfigurationen kan logga in på ditt lokala OIDC-skyddade program och samla in en begäran om att `"/signin-oidc"` slutpunkt i fiddler.</span><span class="sxs-lookup"><span data-stu-id="c3da9-676">Please note that to test the effectiveness of this configuration, login into your local OIDC-protected application and capture the request to `"/signin-oidc"` endpoint in fiddler.</span></span> <span data-ttu-id="c3da9-677">När skydd inte är på plats kan anger spela upp den här begäran i fiddler en ny sessionscookie.</span><span class="sxs-lookup"><span data-stu-id="c3da9-677">When the protection is not in place, replaying this request in fiddler will set a new session cookie.</span></span> <span data-ttu-id="c3da9-678">När begäran spelas när TokenReplayCache skydd har lagts till, genereras programmet ett undantagsfel på följande sätt:`SecurityTokenReplayDetectedException: IDX10228: The securityToken has previously been validated, securityToken: 'eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6Ik1uQ19WWmNBVGZNNXBPWWlKSE1iYTlnb0VLWSIsImtpZCI6Ik1uQ1......`</span><span class="sxs-lookup"><span data-stu-id="c3da9-678">When the request is replayed after the TokenReplayCache protection is added, the application will throw an exception as follows: `SecurityTokenReplayDetectedException: IDX10228: The securityToken has previously been validated, securityToken: 'eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6Ik1uQ19WWmNBVGZNNXBPWWlKSE1iYTlnb0VLWSIsImtpZCI6Ik1uQ1......`</span></span>

## <span data-ttu-id="c3da9-679"><a id="adal-oauth2"></a>Använd ADA-biblioteken för att hantera förfrågningar om säkerhetstoken från OAuth2-klienter till AAD (eller lokala AD)</span><span class="sxs-lookup"><span data-stu-id="c3da9-679"><a id="adal-oauth2"></a>Use ADAL libraries to manage token requests from OAuth2 clients to AAD (or on-premises AD)</span></span>

| <span data-ttu-id="c3da9-680">Rubrik</span><span class="sxs-lookup"><span data-stu-id="c3da9-680">Title</span></span>                   | <span data-ttu-id="c3da9-681">Information</span><span class="sxs-lookup"><span data-stu-id="c3da9-681">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="c3da9-682">**Komponent**</span><span class="sxs-lookup"><span data-stu-id="c3da9-682">**Component**</span></span>               | <span data-ttu-id="c3da9-683">Azure AD</span><span class="sxs-lookup"><span data-stu-id="c3da9-683">Azure AD</span></span> | 
| <span data-ttu-id="c3da9-684">**SDL fas**</span><span class="sxs-lookup"><span data-stu-id="c3da9-684">**SDL Phase**</span></span>               | <span data-ttu-id="c3da9-685">Utveckla</span><span class="sxs-lookup"><span data-stu-id="c3da9-685">Build</span></span> |  
| <span data-ttu-id="c3da9-686">**Tillämpliga tekniker**</span><span class="sxs-lookup"><span data-stu-id="c3da9-686">**Applicable Technologies**</span></span> | <span data-ttu-id="c3da9-687">Generisk</span><span class="sxs-lookup"><span data-stu-id="c3da9-687">Generic</span></span> |
| <span data-ttu-id="c3da9-688">**Attribut**</span><span class="sxs-lookup"><span data-stu-id="c3da9-688">**Attributes**</span></span>              | <span data-ttu-id="c3da9-689">Saknas</span><span class="sxs-lookup"><span data-stu-id="c3da9-689">N/A</span></span>  |
| <span data-ttu-id="c3da9-690">**Referenser**</span><span class="sxs-lookup"><span data-stu-id="c3da9-690">**References**</span></span>              | [<span data-ttu-id="c3da9-691">ADAL</span><span class="sxs-lookup"><span data-stu-id="c3da9-691">ADAL</span></span>](https://azure.microsoft.com/documentation/articles/active-directory-authentication-libraries/) |
| <span data-ttu-id="c3da9-692">**Steg**</span><span class="sxs-lookup"><span data-stu-id="c3da9-692">**Steps**</span></span> | <p><span data-ttu-id="c3da9-693">Azure AD authentication Library (ADAL) kan klienten programutvecklare att autentisera enkelt användare till molnet eller lokala Active Directory (AD) och sedan hämta åtkomsttoken för att skydda API-anrop.</span><span class="sxs-lookup"><span data-stu-id="c3da9-693">The Azure AD authentication Library (ADAL) enables client application developers to easily authenticate users to cloud or on-premises Active Directory (AD), and then obtain access tokens for securing API calls.</span></span></p><p><span data-ttu-id="c3da9-694">ADAL har många funktioner för att kontrollera autentiseringen enklare för utvecklare som asynkron support, en konfigurerbar token-cache som lagrar åtkomst-token och uppdateringstoken, automatisk token uppdatering när en åtkomst-token upphör att gälla och en uppdateringstoken är tillgängliga, och Mer.</span><span class="sxs-lookup"><span data-stu-id="c3da9-694">ADAL has many features that make authentication easier for developers, such as asynchronous support, a configurable token cache that stores access tokens and refresh tokens, automatic token refresh when an access token expires and a refresh token is available, and more.</span></span></p><p><span data-ttu-id="c3da9-695">Genom att hantera de flesta av komplexitet ADAL hjälpa en utvecklare att fokusera på affärslogiken i sina program och enkelt skydda resurser utan att vara en expert på säkerhet.</span><span class="sxs-lookup"><span data-stu-id="c3da9-695">By handling most of the complexity, ADAL can help a developer focus on business logic in their application and easily secure resources without being an expert on security.</span></span> <span data-ttu-id="c3da9-696">Separata bibliotek är tillgängliga för .NET, JavaScript (klient och Node.js), iOS, Android och Java.</span><span class="sxs-lookup"><span data-stu-id="c3da9-696">Separate libraries are available for .NET, JavaScript (client and Node.js), iOS, Android and Java.</span></span></p>|

## <span data-ttu-id="c3da9-697"><a id="authn-devices-field"></a>Autentisera enheter som ansluter till fältet-Gateway</span><span class="sxs-lookup"><span data-stu-id="c3da9-697"><a id="authn-devices-field"></a>Authenticate devices connecting to the Field Gateway</span></span>

| <span data-ttu-id="c3da9-698">Rubrik</span><span class="sxs-lookup"><span data-stu-id="c3da9-698">Title</span></span>                   | <span data-ttu-id="c3da9-699">Information</span><span class="sxs-lookup"><span data-stu-id="c3da9-699">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="c3da9-700">**Komponent**</span><span class="sxs-lookup"><span data-stu-id="c3da9-700">**Component**</span></span>               | <span data-ttu-id="c3da9-701">Fältet för IoT-Gateway</span><span class="sxs-lookup"><span data-stu-id="c3da9-701">IoT Field Gateway</span></span> | 
| <span data-ttu-id="c3da9-702">**SDL fas**</span><span class="sxs-lookup"><span data-stu-id="c3da9-702">**SDL Phase**</span></span>               | <span data-ttu-id="c3da9-703">Utveckla</span><span class="sxs-lookup"><span data-stu-id="c3da9-703">Build</span></span> |  
| <span data-ttu-id="c3da9-704">**Tillämpliga tekniker**</span><span class="sxs-lookup"><span data-stu-id="c3da9-704">**Applicable Technologies**</span></span> | <span data-ttu-id="c3da9-705">Generisk</span><span class="sxs-lookup"><span data-stu-id="c3da9-705">Generic</span></span> |
| <span data-ttu-id="c3da9-706">**Attribut**</span><span class="sxs-lookup"><span data-stu-id="c3da9-706">**Attributes**</span></span>              | <span data-ttu-id="c3da9-707">Saknas</span><span class="sxs-lookup"><span data-stu-id="c3da9-707">N/A</span></span>  |
| <span data-ttu-id="c3da9-708">**Referenser**</span><span class="sxs-lookup"><span data-stu-id="c3da9-708">**References**</span></span>              | <span data-ttu-id="c3da9-709">Saknas</span><span class="sxs-lookup"><span data-stu-id="c3da9-709">N/A</span></span>  |
| <span data-ttu-id="c3da9-710">**Steg**</span><span class="sxs-lookup"><span data-stu-id="c3da9-710">**Steps**</span></span> | <span data-ttu-id="c3da9-711">Se till att varje enhet autentiseras av fältet Gateway innan acceptera data från dem och underlätta överordnade kommunikation med Gateway moln.</span><span class="sxs-lookup"><span data-stu-id="c3da9-711">Ensure that each device is authenticated by the Field Gateway before accepting data from them and before facilitating upstream communications with the Cloud Gateway.</span></span> <span data-ttu-id="c3da9-712">Kontrollera också att enheter ansluter med en per enhet autentiseringsuppgifter så att enskilda enheter kan identifieras unikt.</span><span class="sxs-lookup"><span data-stu-id="c3da9-712">Also, ensure that devices connect with a per device credential so that individual devices can be uniquely identified.</span></span>|

## <span data-ttu-id="c3da9-713"><a id="authn-devices-cloud"></a>Se till att enheter som ansluter till molntjänster gateway autentiseras</span><span class="sxs-lookup"><span data-stu-id="c3da9-713"><a id="authn-devices-cloud"></a>Ensure that devices connecting to Cloud gateway are authenticated</span></span>

| <span data-ttu-id="c3da9-714">Rubrik</span><span class="sxs-lookup"><span data-stu-id="c3da9-714">Title</span></span>                   | <span data-ttu-id="c3da9-715">Information</span><span class="sxs-lookup"><span data-stu-id="c3da9-715">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="c3da9-716">**Komponent**</span><span class="sxs-lookup"><span data-stu-id="c3da9-716">**Component**</span></span>               | <span data-ttu-id="c3da9-717">Gateway för IoT-moln</span><span class="sxs-lookup"><span data-stu-id="c3da9-717">IoT Cloud Gateway</span></span> | 
| <span data-ttu-id="c3da9-718">**SDL fas**</span><span class="sxs-lookup"><span data-stu-id="c3da9-718">**SDL Phase**</span></span>               | <span data-ttu-id="c3da9-719">Utveckla</span><span class="sxs-lookup"><span data-stu-id="c3da9-719">Build</span></span> |  
| <span data-ttu-id="c3da9-720">**Tillämpliga tekniker**</span><span class="sxs-lookup"><span data-stu-id="c3da9-720">**Applicable Technologies**</span></span> | <span data-ttu-id="c3da9-721">Allmän och C#, Node.JS,</span><span class="sxs-lookup"><span data-stu-id="c3da9-721">Generic, C#, Node.JS,</span></span>  |
| <span data-ttu-id="c3da9-722">**Attribut**</span><span class="sxs-lookup"><span data-stu-id="c3da9-722">**Attributes**</span></span>              | <span data-ttu-id="c3da9-723">Ingen, val av Gateway - Azure IoT-hubb</span><span class="sxs-lookup"><span data-stu-id="c3da9-723">N/A, Gateway choice - Azure IoT Hub</span></span> |
| <span data-ttu-id="c3da9-724">**Referenser**</span><span class="sxs-lookup"><span data-stu-id="c3da9-724">**References**</span></span>              | <span data-ttu-id="c3da9-725">Ej tillämpligt, [Azure IoT-hubb med .NET](https://azure.microsoft.com/documentation/articles/iot-hub-csharp-csharp-getstarted/), [komma igång med IoT-hubb och Node JS](https://azure.microsoft.com/documentation/articles/iot-hub-node-node-getstarted), [skydda IoT med SAS och certifikat](https://azure.microsoft.com/documentation/articles/iot-hub-sas-tokens/), [Git-lagringsplats](https://github.com/Azure/azure-iot-sdks/tree/master/node)</span><span class="sxs-lookup"><span data-stu-id="c3da9-725">N/A, [Azure IoT hub with .NET](https://azure.microsoft.com/documentation/articles/iot-hub-csharp-csharp-getstarted/), [Getting Started wih IoT hub and Node JS](https://azure.microsoft.com/documentation/articles/iot-hub-node-node-getstarted), [Securing IoT with SAS and certificates](https://azure.microsoft.com/documentation/articles/iot-hub-sas-tokens/), [Git repository](https://github.com/Azure/azure-iot-sdks/tree/master/node)</span></span> |
| <span data-ttu-id="c3da9-726">**Steg**</span><span class="sxs-lookup"><span data-stu-id="c3da9-726">**Steps**</span></span> | <ul><li><span data-ttu-id="c3da9-727">**Generisk:** autentisera enheten med Transport Layer Security (TLS) eller IPSec.</span><span class="sxs-lookup"><span data-stu-id="c3da9-727">**Generic:** Authenticate the device using Transport Layer Security (TLS) or IPSec.</span></span> <span data-ttu-id="c3da9-728">Infrastrukturen ska ha stöd för med i förväg delad nyckel (PSK) på de enheter som inte kan hantera fullständig asymmetrisk kryptering.</span><span class="sxs-lookup"><span data-stu-id="c3da9-728">Infrastructure should support using pre-shared key (PSK) on those devices that cannot handle full asymmetric cryptography.</span></span> <span data-ttu-id="c3da9-729">Använda Azure AD, Oauth.</span><span class="sxs-lookup"><span data-stu-id="c3da9-729">Leverage Azure AD, Oauth.</span></span></li><li><span data-ttu-id="c3da9-730">**C#:** när du skapar en DeviceClient-instans som standard, Create-metoden skapar en DeviceClient-instans som använder AMQP-protokollet för att kommunicera med IoT-hubben.</span><span class="sxs-lookup"><span data-stu-id="c3da9-730">**C#:** When creating a DeviceClient instance, by default, the Create method creates a DeviceClient instance that uses the AMQP protocol to communicate with IoT Hub.</span></span> <span data-ttu-id="c3da9-731">Använda åsidosättning av Create-metoden som gör att du kan ange protokollet för att använda HTTPS-protokollet.</span><span class="sxs-lookup"><span data-stu-id="c3da9-731">To use the HTTPS protocol, use the override of the Create method that enables you to specify the protocol.</span></span> <span data-ttu-id="c3da9-732">Om du använder HTTPS-protokollet, bör du också lägga till den `Microsoft.AspNet.WebApi.Client` NuGet-paket i projektet till att inkludera den `System.Net.Http.Formatting` namnområde.</span><span class="sxs-lookup"><span data-stu-id="c3da9-732">If you use the HTTPS protocol, you should also add the `Microsoft.AspNet.WebApi.Client` NuGet package to your project to include the `System.Net.Http.Formatting` namespace.</span></span></li></ul>|

### <a name="example"></a><span data-ttu-id="c3da9-733">Exempel</span><span class="sxs-lookup"><span data-stu-id="c3da9-733">Example</span></span>
```C#
static DeviceClient deviceClient;

static string deviceKey = "{device key}";
static string iotHubUri = "{iot hub hostname}";

var messageString = "{message in string format}";
var message = new Message(Encoding.ASCII.GetBytes(messageString));

deviceClient = DeviceClient.Create(iotHubUri, new DeviceAuthenticationWithRegistrySymmetricKey("myFirstDevice", deviceKey));

await deviceClient.SendEventAsync(message);
```

### <a name="example"></a><span data-ttu-id="c3da9-734">Exempel</span><span class="sxs-lookup"><span data-stu-id="c3da9-734">Example</span></span>
<span data-ttu-id="c3da9-735">**Node.JS: autentisering**</span><span class="sxs-lookup"><span data-stu-id="c3da9-735">**Node.JS: Authentication**</span></span>
#### <a name="symmetric-key"></a><span data-ttu-id="c3da9-736">Symmetrisk nyckel</span><span class="sxs-lookup"><span data-stu-id="c3da9-736">Symmetric key</span></span>
* <span data-ttu-id="c3da9-737">Skapa en IoT-hubb i azure</span><span class="sxs-lookup"><span data-stu-id="c3da9-737">Create a IoT hub on azure</span></span>
* <span data-ttu-id="c3da9-738">Skapa en post i enhetsidentitetsregistret</span><span class="sxs-lookup"><span data-stu-id="c3da9-738">Create an entry in the device identity registry</span></span>
    ```javascript
    var device = new iothub.Device(null);
    device.deviceId = <DeviceId >
    registry.create(device, function(err, deviceInfo, res) {})
    ```
* <span data-ttu-id="c3da9-739">Skapa en simulerad enhet</span><span class="sxs-lookup"><span data-stu-id="c3da9-739">Create a simulated device</span></span>
    ```javascript
    var clientFromConnectionString = require('azure-iot-device-amqp').clientFromConnectionString;
    var Message = require('azure-iot-device').Message;
    var connectionString = 'HostName=<HostName>DeviceId=<DeviceId>SharedAccessKey=<SharedAccessKey>';
    var client = clientFromConnectionString(connectionString);
    ```
#### <a name="sas-token"></a><span data-ttu-id="c3da9-740">SAS-Token</span><span class="sxs-lookup"><span data-stu-id="c3da9-740">SAS Token</span></span>
* <span data-ttu-id="c3da9-741">Hämtar genereras internt när du använder symmetrisk nyckel, men vi kan du skapa och använda det explicit samt</span><span class="sxs-lookup"><span data-stu-id="c3da9-741">Gets internally generated when using symmetric key but we can generate and use it explicitly as well</span></span>
* <span data-ttu-id="c3da9-742">Definiera ett protokoll:`var Http = require('azure-iot-device-http').Http;`</span><span class="sxs-lookup"><span data-stu-id="c3da9-742">Define a protocol : `var Http = require('azure-iot-device-http').Http;`</span></span>
* <span data-ttu-id="c3da9-743">Skapa en sas-token:</span><span class="sxs-lookup"><span data-stu-id="c3da9-743">Create a sas token :</span></span>
    ```javascript
    resourceUri = encodeURIComponent(resourceUri.toLowerCase()).toLowerCase();
    var deviceName = "<deviceName >";
    var expires = (Date.now() / 1000) + expiresInMins * 60;
    var toSign = resourceUri + '\n' + expires;
    // using crypto
    var decodedPassword = new Buffer(signingKey, 'base64').toString('binary');
    const hmac = crypto.createHmac('sha256', decodedPassword);
    hmac.update(toSign);
    var base64signature = hmac.digest('base64');
    var base64UriEncoded = encodeURIComponent(base64signature);
    // construct authorization string
    var token = "SharedAccessSignature sr=" + resourceUri + "%2fdevices%2f"+deviceName+"&sig="
    + base64UriEncoded + "&se=" + expires;
    if (policyName) token += "&skn="+policyName;
    return token;
    ```
* <span data-ttu-id="c3da9-744">Anslut med hjälp av sas-token:</span><span class="sxs-lookup"><span data-stu-id="c3da9-744">Connect using sas token:</span></span> 
    ```javascript
    Client.fromSharedAccessSignature(sas, Http); 
    ```
#### <a name="certificates"></a><span data-ttu-id="c3da9-745">Certifikat</span><span class="sxs-lookup"><span data-stu-id="c3da9-745">Certificates</span></span>
* <span data-ttu-id="c3da9-746">Generera ett självsignerat signerade X509 certifikat med hjälp av något annat verktyg, till exempel OpenSSL för att generera en .cert och .key filer om du vill lagra certifikatet och nyckel respektive</span><span class="sxs-lookup"><span data-stu-id="c3da9-746">Generate a self signed X509 certificate using any tool such as OpenSSL to generate a .cert and .key files to store the certificate and the key respectively</span></span>
* <span data-ttu-id="c3da9-747">Etablera en enhet som accepterar säker anslutning med hjälp av certifikat.</span><span class="sxs-lookup"><span data-stu-id="c3da9-747">Provision a device that accepts secured connection using certificates.</span></span>
    ```javascript
    var connectionString = '<connectionString>';
    var registry = iothub.Registry.fromConnectionString(connectionString);
    var deviceJSON = {deviceId:"<deviceId>",
    authentication: {
        x509Thumbprint: {
        primaryThumbprint: "<PrimaryThumbprint>",
        secondaryThumbprint: "<SecondaryThumbprint>"
        }
    }}
    var device = deviceJSON;
    registry.create(device, function (err) {});
    ```
* <span data-ttu-id="c3da9-748">Anslut en enhet som använder ett certifikat</span><span class="sxs-lookup"><span data-stu-id="c3da9-748">Connect a device using a certificate</span></span>
    ```javascript
    var Protocol = require('azure-iot-device-http').Http;
    var Client = require('azure-iot-device').Client;
    var connectionString = 'HostName=<HostName>DeviceId=<DeviceId>x509=true';
    var client = Client.fromConnectionString(connectionString, Protocol);
    var options = {
        key: fs.readFileSync('./key.pem', 'utf8'),
        cert: fs.readFileSync('./server.crt', 'utf8')
    }; 
    // Calling setOptions with the x509 certificate and key (and optionally, passphrase) will configure the client //transport to use x509 when connecting to IoT Hub
    client.setOptions(options);
    //call fn to execute after the connection is set up
    client.open(fn);
    ```

## <span data-ttu-id="c3da9-749"><a id="authn-cred"></a>Använd autentiseringsuppgifter för per enhet</span><span class="sxs-lookup"><span data-stu-id="c3da9-749"><a id="authn-cred"></a>Use per-device authentication credentials</span></span>

| <span data-ttu-id="c3da9-750">Rubrik</span><span class="sxs-lookup"><span data-stu-id="c3da9-750">Title</span></span>                   | <span data-ttu-id="c3da9-751">Information</span><span class="sxs-lookup"><span data-stu-id="c3da9-751">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="c3da9-752">**Komponent**</span><span class="sxs-lookup"><span data-stu-id="c3da9-752">**Component**</span></span>               | <span data-ttu-id="c3da9-753">Gateway för IoT-moln</span><span class="sxs-lookup"><span data-stu-id="c3da9-753">IoT Cloud Gateway</span></span>  | 
| <span data-ttu-id="c3da9-754">**SDL fas**</span><span class="sxs-lookup"><span data-stu-id="c3da9-754">**SDL Phase**</span></span>               | <span data-ttu-id="c3da9-755">Utveckla</span><span class="sxs-lookup"><span data-stu-id="c3da9-755">Build</span></span> |  
| <span data-ttu-id="c3da9-756">**Tillämpliga tekniker**</span><span class="sxs-lookup"><span data-stu-id="c3da9-756">**Applicable Technologies**</span></span> | <span data-ttu-id="c3da9-757">Generisk</span><span class="sxs-lookup"><span data-stu-id="c3da9-757">Generic</span></span> |
| <span data-ttu-id="c3da9-758">**Attribut**</span><span class="sxs-lookup"><span data-stu-id="c3da9-758">**Attributes**</span></span>              | <span data-ttu-id="c3da9-759">Val av gateway - Azure IoT-hubb</span><span class="sxs-lookup"><span data-stu-id="c3da9-759">Gateway choice - Azure IoT Hub</span></span> |
| <span data-ttu-id="c3da9-760">**Referenser**</span><span class="sxs-lookup"><span data-stu-id="c3da9-760">**References**</span></span>              | [<span data-ttu-id="c3da9-761">Azure IoT-hubb säkerhetstoken</span><span class="sxs-lookup"><span data-stu-id="c3da9-761">Azure IoT Hub Security Tokens</span></span>](https://azure.microsoft.com/documentation/articles/iot-hub-sas-tokens/) |
| <span data-ttu-id="c3da9-762">**Steg**</span><span class="sxs-lookup"><span data-stu-id="c3da9-762">**Steps**</span></span> | <span data-ttu-id="c3da9-763">Använd per enhet autentiseringsuppgifter med hjälp av SaS-token baserat på enhetsnyckel eller klientcertifikat, i stället för IoT-hubb-nivå delade åtkomstprinciper.</span><span class="sxs-lookup"><span data-stu-id="c3da9-763">Use per device authentication credentials using SaS tokens based on Device key or Client Certificate, instead of IoT Hub-level shared access policies.</span></span> <span data-ttu-id="c3da9-764">Detta förhindrar återanvändning av Autentiseringstoken för en gateway för enhet eller fält av en annan</span><span class="sxs-lookup"><span data-stu-id="c3da9-764">This prevents the reuse of authentication tokens of one device or field gateway by another</span></span> |

## <span data-ttu-id="c3da9-765"><a id="req-containers-anon"></a>Se till att endast nödvändiga behållare och blobbar ges anonym läsbehörighet</span><span class="sxs-lookup"><span data-stu-id="c3da9-765"><a id="req-containers-anon"></a>Ensure that only the required containers and blobs are given anonymous read access</span></span>

| <span data-ttu-id="c3da9-766">Rubrik</span><span class="sxs-lookup"><span data-stu-id="c3da9-766">Title</span></span>                   | <span data-ttu-id="c3da9-767">Information</span><span class="sxs-lookup"><span data-stu-id="c3da9-767">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="c3da9-768">**Komponent**</span><span class="sxs-lookup"><span data-stu-id="c3da9-768">**Component**</span></span>               | <span data-ttu-id="c3da9-769">Azure Storage</span><span class="sxs-lookup"><span data-stu-id="c3da9-769">Azure Storage</span></span> | 
| <span data-ttu-id="c3da9-770">**SDL fas**</span><span class="sxs-lookup"><span data-stu-id="c3da9-770">**SDL Phase**</span></span>               | <span data-ttu-id="c3da9-771">Utveckla</span><span class="sxs-lookup"><span data-stu-id="c3da9-771">Build</span></span> |  
| <span data-ttu-id="c3da9-772">**Tillämpliga tekniker**</span><span class="sxs-lookup"><span data-stu-id="c3da9-772">**Applicable Technologies**</span></span> | <span data-ttu-id="c3da9-773">Generisk</span><span class="sxs-lookup"><span data-stu-id="c3da9-773">Generic</span></span> |
| <span data-ttu-id="c3da9-774">**Attribut**</span><span class="sxs-lookup"><span data-stu-id="c3da9-774">**Attributes**</span></span>              | <span data-ttu-id="c3da9-775">StorageType - Blob</span><span class="sxs-lookup"><span data-stu-id="c3da9-775">StorageType - Blob</span></span> |
| <span data-ttu-id="c3da9-776">**Referenser**</span><span class="sxs-lookup"><span data-stu-id="c3da9-776">**References**</span></span>              | <span data-ttu-id="c3da9-777">[Hantera anonym läsbehörighet till behållare och blobbar](https://azure.microsoft.com/documentation/articles/storage-manage-access-to-resources/), [signaturer för delad åtkomst, del 1: Förstå SAS-modellen](https://azure.microsoft.com/documentation/articles/storage-dotnet-shared-access-signature-part-1/)</span><span class="sxs-lookup"><span data-stu-id="c3da9-777">[Manage anonymous read access to containers and blobs](https://azure.microsoft.com/documentation/articles/storage-manage-access-to-resources/), [Shared Access Signatures, Part 1: Understanding the SAS model](https://azure.microsoft.com/documentation/articles/storage-dotnet-shared-access-signature-part-1/)</span></span> |
| <span data-ttu-id="c3da9-778">**Steg**</span><span class="sxs-lookup"><span data-stu-id="c3da9-778">**Steps**</span></span> | <p><span data-ttu-id="c3da9-779">Som standard kan en behållare och alla blobbar i den endast användas av ägaren till lagringskontot.</span><span class="sxs-lookup"><span data-stu-id="c3da9-779">By default, a container and any blobs within it may be accessed only by the owner of the storage account.</span></span> <span data-ttu-id="c3da9-780">Om du vill ge anonyma användare som har läsbehörighet till en behållare och dess blobbar, uppsättning en behörigheter för behållaren att tillåta offentlig åtkomst.</span><span class="sxs-lookup"><span data-stu-id="c3da9-780">To give anonymous users read permissions to a container and its blobs, one can set the container permissions to allow public access.</span></span> <span data-ttu-id="c3da9-781">Anonyma användare kan läsa blobbar i en behållare som är offentligt tillgänglig utan att autentisera begäran.</span><span class="sxs-lookup"><span data-stu-id="c3da9-781">Anonymous users can read blobs within a publicly accessible container without authenticating the request.</span></span></p><p><span data-ttu-id="c3da9-782">Behållare innehåller följande alternativ för hantering av behållare åtkomst:</span><span class="sxs-lookup"><span data-stu-id="c3da9-782">Containers provide the following options for managing container access:</span></span></p><ul><li><span data-ttu-id="c3da9-783">Fullständig offentlig läsbehörighet: behållare och blob-data kan läsas via anonym begäran.</span><span class="sxs-lookup"><span data-stu-id="c3da9-783">Full public read access: Container and blob data can be read via anonymous request.</span></span> <span data-ttu-id="c3da9-784">Klienter kan räkna upp blobbar i behållaren via anonym begäran, men det går inte att räkna upp behållare i lagringskontot.</span><span class="sxs-lookup"><span data-stu-id="c3da9-784">Clients can enumerate blobs within the container via anonymous request, but cannot enumerate containers within the storage account.</span></span></li><li><span data-ttu-id="c3da9-785">Offentlig läsbehörighet för blobbar endast: Blob-data i den här behållaren kan läsas via anonym begäran, men behållardata är inte tillgänglig.</span><span class="sxs-lookup"><span data-stu-id="c3da9-785">Public read access for blobs only: Blob data within this container can be read via anonymous request, but container data is not available.</span></span> <span data-ttu-id="c3da9-786">Klienter kan inte räkna upp blobbar i behållaren via anonym begäran</span><span class="sxs-lookup"><span data-stu-id="c3da9-786">Clients cannot enumerate blobs within the container via anonymous request</span></span></li><li><span data-ttu-id="c3da9-787">Ingen offentlig läsbehörighet: behållare och blob-data kan läsas av endast kontoägaren</span><span class="sxs-lookup"><span data-stu-id="c3da9-787">No public read access: Container and blob data can be read by the account owner only</span></span></li></ul><p><span data-ttu-id="c3da9-788">Anonym åtkomst är bäst för scenarier där vissa blobbar alltid ska tillgängliga för anonym läsbehörighet.</span><span class="sxs-lookup"><span data-stu-id="c3da9-788">Anonymous access is best for scenarios where certain blobs should always be available for anonymous read access.</span></span> <span data-ttu-id="c3da9-789">För mer detaljerad kontroll går att skapa en signatur för delad åtkomst, vilket gör att delegera begränsade åtkomst med olika behörigheter och under ett angivet tidsintervall.</span><span class="sxs-lookup"><span data-stu-id="c3da9-789">For finer-grained control, one can create a shared access signature, which enables to delegate restricted access using different permissions and over a specified time interval.</span></span> <span data-ttu-id="c3da9-790">Se till att behållare och blobbar som kan innehålla potentiellt känsliga data, inte ges anonym åtkomst av misstag</span><span class="sxs-lookup"><span data-stu-id="c3da9-790">Ensure that containers and blobs, which may potentially contain sensitive data, are not given anonymous access accidentally</span></span></p>|

## <span data-ttu-id="c3da9-791"><a id="limited-access-sas"></a>Bevilja begränsad åtkomst till objekt i Azure storage med hjälp av SAS eller SAP</span><span class="sxs-lookup"><span data-stu-id="c3da9-791"><a id="limited-access-sas"></a>Grant limited access to objects in Azure storage using SAS or SAP</span></span>

| <span data-ttu-id="c3da9-792">Rubrik</span><span class="sxs-lookup"><span data-stu-id="c3da9-792">Title</span></span>                   | <span data-ttu-id="c3da9-793">Information</span><span class="sxs-lookup"><span data-stu-id="c3da9-793">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="c3da9-794">**Komponent**</span><span class="sxs-lookup"><span data-stu-id="c3da9-794">**Component**</span></span>               | <span data-ttu-id="c3da9-795">Azure Storage</span><span class="sxs-lookup"><span data-stu-id="c3da9-795">Azure Storage</span></span> | 
| <span data-ttu-id="c3da9-796">**SDL fas**</span><span class="sxs-lookup"><span data-stu-id="c3da9-796">**SDL Phase**</span></span>               | <span data-ttu-id="c3da9-797">Utveckla</span><span class="sxs-lookup"><span data-stu-id="c3da9-797">Build</span></span> |  
| <span data-ttu-id="c3da9-798">**Tillämpliga tekniker**</span><span class="sxs-lookup"><span data-stu-id="c3da9-798">**Applicable Technologies**</span></span> | <span data-ttu-id="c3da9-799">Generisk</span><span class="sxs-lookup"><span data-stu-id="c3da9-799">Generic</span></span> |
| <span data-ttu-id="c3da9-800">**Attribut**</span><span class="sxs-lookup"><span data-stu-id="c3da9-800">**Attributes**</span></span>              | <span data-ttu-id="c3da9-801">Saknas</span><span class="sxs-lookup"><span data-stu-id="c3da9-801">N/A</span></span> |
| <span data-ttu-id="c3da9-802">**Referenser**</span><span class="sxs-lookup"><span data-stu-id="c3da9-802">**References**</span></span>              | <span data-ttu-id="c3da9-803">[Signaturer för delad åtkomst, del 1: Förstå SAS-modellen](https://azure.microsoft.com/documentation/articles/storage-dotnet-shared-access-signature-part-1/), [signaturer för delad åtkomst, del 2: skapa och använda en SAS med bloblagring](https://azure.microsoft.com/documentation/articles/storage-dotnet-shared-access-signature-part-2/), [hur du delegerar åtkomst till objekt i ditt konto med delade Signaturer för åtkomst och principer för lagrade åtkomst](https://azure.microsoft.com/documentation/articles/storage-security-guide/#_how-to-delegate-access-to-objects-in-your-account-using-shared-access-signatures-and-stored-access-policies)</span><span class="sxs-lookup"><span data-stu-id="c3da9-803">[Shared Access Signatures, Part 1: Understanding the SAS model](https://azure.microsoft.com/documentation/articles/storage-dotnet-shared-access-signature-part-1/), [Shared Access Signatures, Part 2: Create and use a SAS with Blob storage](https://azure.microsoft.com/documentation/articles/storage-dotnet-shared-access-signature-part-2/), [How to delegate access to objects in your account using Shared Access Signatures and Stored Access Policies](https://azure.microsoft.com/documentation/articles/storage-security-guide/#_how-to-delegate-access-to-objects-in-your-account-using-shared-access-signatures-and-stored-access-policies)</span></span> |
| <span data-ttu-id="c3da9-804">**Steg**</span><span class="sxs-lookup"><span data-stu-id="c3da9-804">**Steps**</span></span> | <p><span data-ttu-id="c3da9-805">Med hjälp av en signatur för delad åtkomst är (SAS) ett kraftfullt sätt att ge begränsad åtkomst till objekt i ett lagringskonto med andra klienter, utan att exponera åtkomstnyckel.</span><span class="sxs-lookup"><span data-stu-id="c3da9-805">Using a shared access signature (SAS) is a powerful way to grant limited access to objects in a storage account to other clients, without having to expose account access key.</span></span> <span data-ttu-id="c3da9-806">SAS är en URI som omfattar i dess frågeparametrar all information som behövs för autentiserad åtkomst till en lagringsresurs.</span><span class="sxs-lookup"><span data-stu-id="c3da9-806">The SAS is a URI that encompasses in its query parameters all of the information necessary for authenticated access to a storage resource.</span></span> <span data-ttu-id="c3da9-807">För att komma åt lagringsresurser med SAS måste klienten endast att skicka in SAS till lämplig konstruktor eller metod.</span><span class="sxs-lookup"><span data-stu-id="c3da9-807">To access storage resources with the SAS, the client only needs to pass in the SAS to the appropriate constructor or method.</span></span></p><p><span data-ttu-id="c3da9-808">Du kan använda en SAS när du vill ge åtkomst till resurser i ditt lagringskonto till en klient som inte är tillförlitliga med kontonyckel.</span><span class="sxs-lookup"><span data-stu-id="c3da9-808">You can use a SAS when you want to provide access to resources in your storage account to a client that can't be trusted with the account key.</span></span> <span data-ttu-id="c3da9-809">Din lagringskontonycklar innehåller både en primär och sekundär nyckel, som båda ha administrativ åtkomst till ditt konto och alla resurser i den.</span><span class="sxs-lookup"><span data-stu-id="c3da9-809">Your storage account keys include both a primary and secondary key, both of which grant administrative access to your account and all of the resources in it.</span></span> <span data-ttu-id="c3da9-810">Ditt konto möjligheten att skadlig eller bristande öppnas exponering av någon av dina nycklar.</span><span class="sxs-lookup"><span data-stu-id="c3da9-810">Exposing either of your account keys opens your account to the possibility of malicious or negligent use.</span></span> <span data-ttu-id="c3da9-811">Signaturer för delad åtkomst är en säker alternativ som tillåter att andra användare att läsa, skriva och ta bort data i ditt lagringskonto enligt de behörigheter som du har beviljat och utan behovet av nyckeln för kontot.</span><span class="sxs-lookup"><span data-stu-id="c3da9-811">Shared access signatures provide a safe alternative that allows other clients to read, write, and delete data in your storage account according to the permissions you've granted, and without need for the account key.</span></span></p><p><span data-ttu-id="c3da9-812">Om du har en logisk uppsättning parametrar som liknar varje gång är med hjälp av en lagrad åtkomst princip (SAP) en bättre uppfattning.</span><span class="sxs-lookup"><span data-stu-id="c3da9-812">If you have a logical set of parameters that are similar each time, using a Stored Access Policy (SAP) is a better idea.</span></span> <span data-ttu-id="c3da9-813">Eftersom med hjälp av en SAS som härletts från en lagrad åtkomstprincip ger dig möjlighet att återkalla den SAS omedelbart, är rekommenderad praxis att alltid använda lagras åtkomstprinciper när det är möjligt.</span><span class="sxs-lookup"><span data-stu-id="c3da9-813">Because using a SAS derived from a Stored Access Policy gives you the ability to revoke that SAS immediately, it is the recommended best practice to always use Stored Access Policies when possible.</span></span></p>|
---
title: "aaaMicrosoft program mot skadlig kod för Azure | Microsoft Docs"
description: "Den här artikeln innehåller en översikt över arkitekturen i Microsoft Antimalware för Azure, inklusive scenarier som stöds och konfigurationer för att aktivera, konfigurera och distribuera skydd för Azure-molntjänster och virtuella datorer. Vi beskriver grundläggande konfiguration, hantering och övervakning av funktioner som är tillgängligt via Microsoft Azure service management API: er, PowerShell-skript, hello Azure-portalen och Visual Studio."
services: security
documentationcenter: na
author: YuriDio
manager: swadhwa
editor: 
ms.assetid: 265683c8-30d7-4f2b-b66c-5082a18f7a8b
ms.service: security
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: na
ms.date: 03/15/2017
ms.author: yurid
ms.openlocfilehash: 8f50ff145d7dd884cad3ebecba937d2021dc8db4
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: sv-SE
ms.lasthandoff: 10/06/2017
---
# <a name="microsoft-antimalware-for-azure-cloud-services-and-virtual-machines"></a>Microsoft programvara mot skadlig programvara för Azure molntjänster och virtuella maskiner
hello moderna hotbild för molnmiljöer är mycket dynamisk öka hello trycket på företag IT molnet prenumeranter toomaintain effektivt skydd i ordning toomeet krav för efterlevnad och säkerhet. Microsoft Antimalware för Azure är ledigt realtidsskydd funktion som hjälper dig att identifiera och ta bort virus, spionprogram och annan skadlig programvara med konfigurerbara aviseringar när känd skadlig eller oönskad programvara försöker tooinstall själva eller köras på din Azure-system.

hello lösningen bygger på hello samma plattform för program mot skadlig kod som Microsoft Security Essentials \[mus\], Microsoft Forefront Endpoint Protection, Microsoft System Center Endpoint Protection, Windows Intune och Windows Defender för Windows 8.0 och senare. Microsoft Antimalware för Azure är en enskild agent lösning för program och klient miljöer utformad toorun i hello bakgrunden utan mänsklig inblandning. Du kan distribuera skydd baserat på hello behoven för din programbelastningar, med antingen grundläggande secure-som-standard eller avancerad anpassad konfiguration, inklusive övervakning av program mot skadlig kod.

När du distribuerar och aktivera Microsoft Antimalware för Azure för dina program, finns följande kärnfunktioner hello:

* **Realtidsskydd** -övervakar aktiviteten i Cloud Services och på virtuella datorer toodetect och blockera skadlig kod körning.
* **Schemalagd genomsökning** -regelbundet utför riktade skanning toodetect skadlig kod, inklusive program som körs aktivt.
* **Korrigering av skadlig kod** - automatiskt vidtar åtgärder på upptäckt skadlig kod, till exempel ta bort eller sätta i karantän skadliga filer och rensa skadliga registerposter.
* **Signaturuppdateringar** - automatiskt installerar hello senaste skydd signaturer (virusdefinitioner av) tooensure skydd är uppdaterad på en förbestämd frekvens.
* **Motorn för program mot skadlig kod uppdaterar** – automatiskt uppdateringar hello Microsoft Antimalware-motorn.
* **Uppdateringar för program mot skadlig kod plattform** – automatiskt uppdateringar hello Microsoft Antimalware plattform.
* **Aktivt skydd** – rapporterar telemetri metadata om identifierade hot och misstänkta resurser tooMicrosoft Azure tooensure snabba svar toohello växande hotbild, samt aktivera realtidsskydd synkron signatur leverans via hello Microsoft Active Protection System (MAPS).
* **Exempel reporting** – ger och rapporterar prover toohello Microsoft Antimalware service toohelp förfina hello service och aktivera felsökning.
* **Undantag** – gör att program och tjänsten administratörer tooconfigure vissa filer, processer och driver tooexclude dem från skyddet och skanning för prestanda och/eller andra orsaker.
* **Program mot skadlig kod händelseinsamling** – registrerar hello tjänstens hälsa för program mot skadlig kod, misstänkta aktiviteter och åtgärder som vidtagits i händelseloggen för hello operativsystem och samlar in dem i hello kundens Azure Storage-konto.

> [!NOTE]
> Microsoft Antimalware kan också distribueras med hjälp av Azure Security Center. Läs [installera Endpoint Protection i Azure Security Center](../security-center/security-center-install-endpoint-protection.md) för mer information.
>
>

## <a name="architecture"></a>Arkitektur
hello Microsoft Antimalware för Azure lösningen innehåller hello Microsoft Antimalware Client och, klassiska distributionsmodellen för program mot skadlig kod, Antimalware PowerShell-cmdlets och tillägg för Azure-diagnostik. hello Microsoft Antimalware lösning stöds på Windows Server 2008 R2, Windows Server 2012 och Windows Server 2012 R2-operativsystem. Den stöds inte på hello Windows Server 2008-operativsystem. Stöd för Windows Server 2016 med Defender har släppts kan du läsa mer om den här uppdateringen [här](https://blogs.msdn.microsoft.com/azuresecurity/2017/03/07/update-to-azure-antimalware-extension-for-cloud-services/).

hello Microsoft Antimalware Client och tjänsten installeras som standard i ett inaktiverat tillstånd i alla stöds Azure gäst operativsystem i hello molntjänster plattform. hello Microsoft Antimalware Client och tjänsten installeras inte som standard i hello plattform för virtuella datorer och är tillgänglig som en valfri funktion via hello Azure-portalen och konfiguration av virtuell dator för Visual Studio under Security Extensions.

När du använder Azure Websites hello underliggande tjänst som värdar hello webbprogrammet har Microsoft Antimalware är aktiverat. Detta är används tooprotect Azure Websites infrastruktur och körs inte på kunden innehåll.

### <a name="microsoft-antimalware-workflow"></a>Arbetsflöde för Microsoft-program mot skadlig kod
hello Azure tjänstadministratör kan aktivera program mot skadlig kod för Azure med en fördefinierad eller anpassad konfiguration för virtuella datorer och molntjänster med hjälp av hello följande alternativ:

* Virtuella datorer – i hello Azure-portalen under **Security Extensions**
* Virtuella datorer – hello med hjälp av Visual Studio virtuella datorer konfigurationen i Server Explorer
* Virtuella datorer och molntjänster – med hjälp av hello program mot skadlig kod [klassiska distributionsmodellen](https://msdn.microsoft.com/library/azure/ee460799.aspx)
* Virtuella datorer och molntjänster – med hjälp av program mot skadlig kod PowerShell-cmdlets

hello Azure-portalen eller PowerShell-cmdlets push hello program mot skadlig kod tillägget paketet filen toohello Azure system vid en förbestämd fast plats. hello Azure-Gästagent (eller hello Fabric-Agent) startar hello tillägg för program mot skadlig kod, tillämpa hello program mot skadlig kod konfigurationsinställningar som angavs som indata. Det här steget aktiverar hello antivirustjänsten med antingen standard eller anpassade inställningar. Om ingen anpassad konfiguration aktiveras hello antivirustjänsten med hello standardkonfigurationsinställningar. Se toohello *konfiguration för program mot skadlig kod* avsnitt i hello [Microsoft Antimalware för Azure-kodexempel](http://aka.ms/amazsamples "Microsoft program mot skadlig kod för Azure-molntjänster och virtuella datorer kodexempel") för mer information.

När du kör, hello Microsoft Antimalware klienten laddar ned hello senaste protection-motorn och signatur definitionerna från hello Internet och belastningar hello Azure system. hello Microsoft Antimalware service skriver tjänstrelaterade händelser toohello OS händelser systemloggen under hello ”Microsoft Antimalware” händelsekälla. Händelser innehåller hello hälsotillståndet för program mot skadlig kod klienten, skydd och reparation status, nya och gamla konfigurationsinställningar, uppdateringar och signatur definitioner och andra.

Du kan aktivera övervakning av program mot skadlig kod för din molntjänst eller virtuella toohave hello program mot skadlig kod händelse logghändelser skrivs som de är producerade tooyour Azure storage-konto. Hej Antimalware Service använder hello Azure Diagnostics tillägget toocollect program mot skadlig kod händelser från hello Azure system till tabeller i hello kundens Azure Storage-konto.

Hej arbetsflöde för distribution inklusive konfigurationssteg och alternativ som stöds för hello ovan scenarier dokumenteras i [scenarier för distribution av program mot skadlig kod](#_Antimalware_Deployment_Scenarios) i det här dokumentet.

![Microsoft Antimalware i Azure](./media/azure-security-antimalware/sec-azantimal-fig1.PNG)

> [!NOTE]
> Du kan dock använda Powershell/API: er och Azure Resource Manager mallar toodeploy Skalningsuppsättningar i virtuella datorer med hello tillägget Microsoft skadlig kod.  Du kan använda hello python exempelskript för att installera ett tillägg på en virtuell dator som redan körs, *vmssextn.py* finns [här](https://github.com/gbowerman/vmsstools). Detta skript hämtar hello befintliga tillägget config på hello skalan och lägger till ett tillägg toohello lista över befintliga tillägg på hello Skalningsuppsättningar.
>
>

### <a name="default-and-custom-antimalware-configuration"></a>Standard- och anpassade program mot skadlig kod konfiguration
hello standardkonfigurationsinställningarna är tillämpade tooenable program mot skadlig kod för Azure Cloud Services eller virtuella datorer om du inte anger inställningar för anpassad konfiguration. hello standardinställningarna har optimerats för att köra i hello Azure-miljön inför. Alternativt kan kan du anpassa dessa standardinställningar konfiguration som krävs för din Azure-program eller service-distributionen och använda dem för andra scenarier för distribution.

> [!NOTE]
> Hello användargränssnittet för Microsoft-program mot skadlig kod på Azure Resource Manager är inaktiverad som standard, [cleanuppolicy.xml](https://blogs.msdn.microsoft.com/azuresecurity/2016/02/24/update-on-microsoft-antimalware-and-azure-resource-manager-arm-vms/) filen toobypass felmeddelandet inte stöds. Mer information om hur toocreate en anpassad princip för att läsa [att aktivera Microsoft program mot skadlig kod användargränssnittet på Azure Resource Manager virtuella datorer efter distribution](https://blogs.msdn.microsoft.com/azuresecurity/2016/03/09/enabling-microsoft-antimalware-user-interface-post-deployment/).
>
>

hello sammanfattas följande tabell hello konfigurationsinställningar som är tillgängliga för hello antivirustjänsten. konfigurationsinställningar för hello standard markeras under hello kolumn med rubriken ”Default” nedan.

![Tabell 1](./media/azure-security-antimalware/sec-azantimal-tb18.PNG)

## <a name="antimalware-deployment-scenarios"></a>Scenarier för distribution av program mot skadlig kod
Hej scenarier tooenable och konfigurera program mot skadlig kod, inklusive övervakning för Azure-molntjänster och virtuella datorer, beskrivs i det här avsnittet.

### <a name="virtual-machines---enable-and-configure-antimalware"></a>Virtuella datorer – aktivera och konfigurera program mot skadlig kod
**Distribution med hjälp av Azure Portal**

tooenable hello antivirustjänsten, klickar du på **Lägg till** på hello tillägg bladet välj **Microsoft Antimalware** på hello ny resurs-bladet klickar du på **skapa** på hello Microsoft Antimalware-bladet. Klicka på **skapa** utan att mata in alla konfigurationsvärden tooenable program mot skadlig kod med hello standardinställningar eller ange hello konfigurationsinställningar för program mot skadlig kod för hello virtuell dator som har konfigurerats som visas i bild 2 nedan. Se toohello **knappbeskrivningar** som ingår i varje konfigurationsinställningarna för hello lägga till tillägget bladet toosee hello stöds konfigurationsvärden.

![Virtuella datorns konfigurationsinställningar för Microsoft Antimalware](./media/azure-security-antimalware/sec-azantimal-fig2.PNG)

**Distribution med hello klassiska Azure-portalen**

tooenable och konfigurera Microsoft Antimalware för virtuella datorer i Azure med hjälp av hello Azure-portalen när etablera en virtuell dator, följ hello stegen nedan:

1. Logga in på hello Azure-portalen på <https://portal.azure.com>

2. toocreate en ny virtuell dator klickar du på **ny**, **Compute**, **virtuella** **datorn**, **från galleriet**(Använd inte Snabbregistrering) enligt nedan:

![Ny virtuell dator](./media/azure-security-antimalware/sec-azantimal-fig3.PNG)

3 Välj hello **Microsoft Windows Server** bilden på hello **Välj en bild** sidan.

4. Klicka på högerpilen hello och inkommande hello konfiguration av virtuell dator.

5. Kontrollera hello **Microsoft Antimalware** kryssrutan under **Security Extensions** på konfigurationssidan för hello virtuell dator.

6 Klicka på hello Skicka knappen tooenable och konfigurera Microsoft Antimalware för virtuella datorer i Azure med inställningar för hello standard.

![Konfiguration av virtuell dator](./media/azure-security-antimalware/sec-azantimal-fig4.PNG)

**Använda hello Visual Studio virtuella distributionskonfiguration**

tooenable och konfigurera hello Microsoft Antimalware service med Visual Studio:

1. ansluta tooMicrosoft Azure i Visual Studio.

2. Välj den virtuella datorn i hello **virtuella datorer** nod i **Server Explorer**

![Konfiguration av virtuell dator i Visual Studio](./media/azure-security-antimalware/sec-azantimal-fig5.PNG)

3 Högerklicka på **konfigurera** konfigurationssidan för tooview hello virtuell dator

4 Välj **Microsoft Antimalware** tillägget hello listrutan under **installerat tillägg** och på **Lägg till** tooconfigure med standard program mot skadlig kod konfiguration.

![Installerade tilläggen](./media/azure-security-antimalware/sec-azantimal-fig6.PNG)

5 toocustomize hello standardkonfigurationen för program mot skadlig kod, Välj (Markera) hello program mot skadlig kod tillägget hello installerat tillägg listan och klickar på **konfigurera**.

6 Ersätt hello standardkonfigurationen för program mot skadlig kod med anpassade konfigurationen i JSON-format som stöds i hello **offentliga konfiguration** textrutan och klicka på OK.

7. klickar du på hello **uppdatering** toopush hello konfiguration uppdateras tooyour virtuella datorn.

![Tillägg för konfiguration av virtuell dator](./media/azure-security-antimalware/sec-azantimal-fig7.PNG)

**Obs:** hello Visual Studio virtuella datorer konfiguration för program mot skadlig kod stöder endast konfigurationen i JSON-format. Hej Antimalware JSON configuration inställningar mallen ingår i hello [Microsoft program mot skadlig kod för Azure - kodexempel](http://aka.ms/amazsamples "Microsoft program mot skadlig kod för Azure - kodexempel"), visar hello stöds Inställningar för program mot skadlig kod.

**Med hjälp av PowerShell-cmdlets för distribution**

En Azure-program eller tjänst kan aktivera och konfigurera Microsoft Antimalware för virtuella datorer i Azure med PowerShell-cmdlets.

tooenable och konfigurera Microsoft för program mot skadlig kod med PowerShell-cmdlets för program mot skadlig kod:

1. Konfigurera din miljö för PowerShell – Se toohello dokumentation på <https://github.com/Azure/azure-powershell>
2. Använd hello Set AzureVMMicrosoftAntimalwareExtension program mot skadlig kod cmdlet tooenable och konfigurera Microsoft Antimalware för din virtuella dator som beskrivs i <http://msdn.microsoft.com/library/azure/dn771718.aspx>

**Obs:** hello Azure Virtual Machines konfiguration för program mot skadlig kod stöder endast konfigurationen i JSON-format. Hej Antimalware JSON configuration inställningar mallen ingår i hello [Microsoft program mot skadlig kod för Azure - kodexempel](http://aka.ms/amazsamples "Microsoft program mot skadlig kod för Azure - kodexempel"), visar hello stöds Inställningar för program mot skadlig kod.

### <a name="enable-and-configure-antimalware-using-powershell-cmdlets"></a>Aktivera och konfigurera program mot skadlig kod med PowerShell-cmdlets
En Azure-program eller tjänst kan aktivera och konfigurera Microsoft Antimalware för Azure Cloud Services med PowerShell-cmdlets. Observera att programmet Microsoft Antimalware är installerat i ett inaktiverat tillstånd i hello molntjänster platform och kräver en åtgärd med en Azure-program tooenable den.

tooenable och konfigurera Microsoft Antimalware med PowerShell-cmdlets:

1. Konfigurera din miljö för PowerShell – Se toohello dokumentation på <https://github.com/Azure/azure-sdk-tools#get-started>
2. Använd hello Set AzureServiceAntimalwareExtension program mot skadlig kod cmdlet tooenable och konfigurera Microsoft Antimalware för din molntjänst som beskrivs i <http://msdn.microsoft.com/library/azure/dn771718.aspx>

Hej Antimalware XML configuration inställningar mallen ingår i hello [Microsoft program mot skadlig kod för Azure - kodexempel](http://aka.ms/amazsamples "Microsoft program mot skadlig kod för Azure - kodexempel"), visar hello stöds Inställningar för program mot skadlig kod.

### <a name="cloud-services-and-virtual-machines---configuration-using-powershell-cmdlets"></a>Molntjänster och virtuella datorer - konfigurationen med hjälp av PowerShell-cmdlets
En Azure-program eller tjänst kan hämta hello Microsoft Antimalware konfiguration för molntjänster och virtuella datorer med hjälp av PowerShell-cmdlets.

tooretrieve hello Microsoft Antimalware konfigurationen med hjälp av PowerShell-cmdlets:

1. Konfigurera din miljö för PowerShell – Se toohello dokumentation på <https://github.com/Azure/azure-sdk-tools#get-started>
2. **För virtuella datorer**: Använd hello Get-AzureVMMicrosoftAntimalwareExtension program mot skadlig kod cmdlet tooget hello program mot skadlig kod konfigurationen som beskrivs i <http://msdn.microsoft.com/library/azure/dn771719.aspx>
3. **För molntjänster**: Använd hello Get-AzureServiceAntimalwareConfig program mot skadlig kod cmdlet tooget hello program mot skadlig kod konfigurationen som beskrivs i <http://msdn.microsoft.com/library/azure/dn771722.aspx>

### <a name="remove-antimalware-configuration-using-powershell-cmdlets"></a>Ta bort program mot skadlig kod konfigurationen med hjälp av PowerShell-cmdlets
En Azure-program eller tjänst kan ta bort hello program mot skadlig kod konfiguration och alla associerade program mot skadlig kod övervakningskonfigurationen från hello relevanta Azure program mot skadlig kod och diagnostik tillägg som är associerade med hello molntjänst eller virtuella Datorn.

tooremove Microsoft Antimalware med PowerShell-cmdlets:

1. Konfigurera din miljö för PowerShell – Se toohello dokumentation på <https://github.com/Azure/azure-sdk-tools#get-started>
2. **För virtuella datorer**: Använd hello ta bort AzureVMMicrosoftAntimalwareExtension program mot skadlig kod cmdlet som beskrivs i <http://msdn.microsoft.com/library/azure/dn771720.aspx>
3. **För molntjänster:** använder hello ta bort AzureServiceAntimalwareExtension program mot skadlig kod cmdlet som beskrivs i <http://msdn.microsoft.com/library/azure/dn771717.aspx>

för**aktivera** program mot skadlig kod vid insamling av en virtuell dator med hjälp av hello Azure Preview Portal:

1. Klicka på någon del av hello övervakning lins hello Virtual Machine-bladet
2. Klicka på hello diagnostik kommandot mått bladet
3. Välj **Status** ON och kontrollera hello alternativ för system för Windows-händelser
4. . Du kan välja toouncheck som alla andra alternativ i listan hello eller lämna dem aktiveras per dina programbehov för tjänsten.
5. hello program mot skadlig kod kategorier ”Error”, ”varning”, ”information”, osv., fångas i Azure Storage-konto.

Händelser för program mot skadlig kod samlas in från hello Windows händelse system loggar tooyour Azure Storage-konto. Du kan konfigurera hello Storage-konto för din virtuella toocollect program mot skadlig kod händelser genom att välja lämplig hello-lagringskonto.

![Mått och diagnostik](./media/azure-security-antimalware/sec-azantimal-fig8.PNG)

> [!NOTE]
> Mer information om hur tooDiagnostics loggning för Azure program mot skadlig kod, läsa [aktivera loggning diagnostik för program mot skadlig kod Azure](https://blogs.msdn.microsoft.com/azuresecurity/2016/04/19/enabling-diagnostics-logging-for-azure-antimalware/).
>
>

### <a name="enable-and-configure-antimalware-monitoring-using-powershell-cmdlets"></a>Aktivera och konfigurera övervakning av program mot skadlig kod med hjälp av powerShell-cmdlets
Du kan aktivera insamling av Microsoft Antimalware händelser för din molntjänst eller en virtuell dator med Azure-diagnostik via Antimalware PowerShell-cmdletar. hello konfigurerad Azure Diagnostics tillägget kan vara toocapture händelser från hello System händelseloggen källa ”Microsoft Antimalware” tooyour Azure Storage-konto. hello program mot skadlig kod kategorier ”Error”, ”varning”, ”information”, osv., fångas i Azure Storage-konto.

tooenable program mot skadlig kod händelse samling tooyour Azure Storage-konto med hjälp av PowerShell-cmdlets:

1. Konfigurera din miljö för PowerShell - finns för<https://github.com/Azure/azure-sdk-tools#get-started>
2. **För virtuella datorer** -använder hello Set AzureVMMicrosoftAntimalwareExtension program mot skadlig kod cmdlet med alternativet för övervakning av enligt beskrivningen i <http://msdn.microsoft.com/library/azure/dn771716.aspx>
3. **För molntjänster** -använder hello Set AzureServiceAntimalwareExtension program mot skadlig kod cmdlet med alternativet för övervakning av enligt beskrivningen i <http://msdn.microsoft.com/library/azure/dn771718.aspx>

Du kan visa hello program mot skadlig kod rådata händelser genom att titta på hello WADWindowsEventLogsTable tabellen i ditt Azure Storage-konto som du har konfigurerat tooenable övervakning av program mot skadlig kod. Detta kan vara användbart toovalidate som arbetar händelseinsamling för program mot skadlig kod, inklusive få insyn i hello program mot skadlig kod tjänstens hälsa. Mer information, inklusive exempelkod för hur tooextract program mot skadlig kod händelser från ditt lagringskonto finns för[Microsoft program mot skadlig kod för Azure - kodexempel](http://aka.ms/amazsamples "Microsoft program mot skadlig kod för Azure - kodexempel").

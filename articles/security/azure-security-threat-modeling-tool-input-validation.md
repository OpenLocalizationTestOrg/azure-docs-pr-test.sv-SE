---
title: aaaInput validering - hotet Modeling verktyget - Azure | Microsoft Docs
description: "ändringar för hot som exponeras i hello hot Modeling verktyget"
services: security
documentationcenter: na
author: RodSan
manager: RodSan
editor: RodSan
ms.assetid: na
ms.service: security
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 08/17/2017
ms.author: rodsan
ms.openlocfilehash: 823503881f4bae292ef021834d5e64acf2a0f54a
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: sv-SE
ms.lasthandoff: 10/06/2017
---
# <a name="security-frame-input-validation--mitigations"></a><span data-ttu-id="baa64-103">Säkerhet ram: Indata validering | Åtgärder</span><span class="sxs-lookup"><span data-stu-id="baa64-103">Security Frame: Input Validation | Mitigations</span></span> 
| <span data-ttu-id="baa64-104">Produkter eller tjänster</span><span class="sxs-lookup"><span data-stu-id="baa64-104">Product/Service</span></span> | <span data-ttu-id="baa64-105">Artikel</span><span class="sxs-lookup"><span data-stu-id="baa64-105">Article</span></span> |
| --------------- | ------- |
| <span data-ttu-id="baa64-106">**Webbprogram**</span><span class="sxs-lookup"><span data-stu-id="baa64-106">**Web Application**</span></span> | <ul><li>[<span data-ttu-id="baa64-107">Inaktivera XSLT-skript för alla transformeringar med obetrodda formatmallar</span><span class="sxs-lookup"><span data-stu-id="baa64-107">Disable XSLT scripting for all transforms using untrusted style sheets</span></span>](#disable-xslt)</li><li>[<span data-ttu-id="baa64-108">Se till att varje sida som kan innehålla användare kan kontrolleras innehåll bort automatisk MIME-kontroll</span><span class="sxs-lookup"><span data-stu-id="baa64-108">Ensure that each page that could contain user controllable content opts out of automatic MIME sniffing</span></span>](#out-sniffing)</li><li>[<span data-ttu-id="baa64-109">Skydda eller inaktivera XML-entitet upplösning</span><span class="sxs-lookup"><span data-stu-id="baa64-109">Harden or Disable XML Entity Resolution</span></span>](#xml-resolution)</li><li>[<span data-ttu-id="baa64-110">Program som använder http.sys utföra verifiering för URL-auktorisering</span><span class="sxs-lookup"><span data-stu-id="baa64-110">Applications utilizing http.sys perform URL canonicalization verification</span></span>](#app-verification)</li><li>[<span data-ttu-id="baa64-111">Se till att lämpliga kontroller som finns på plats när accepterar filer från användare</span><span class="sxs-lookup"><span data-stu-id="baa64-111">Ensure appropriate controls are in place when accepting files from users</span></span>](#controls-users)</li><li>[<span data-ttu-id="baa64-112">Se till att typen säkert parametrar används i webbprogram för dataåtkomst</span><span class="sxs-lookup"><span data-stu-id="baa64-112">Ensure that type-safe parameters are used in Web Application for data access</span></span>](#typesafe)</li><li>[<span data-ttu-id="baa64-113">Använda separat modell bindning klasser eller bindningsfilter listar tooprevent MVC masslagring tilldelning säkerhetsproblem</span><span class="sxs-lookup"><span data-stu-id="baa64-113">Use separate model binding classes or binding filter lists tooprevent MVC mass assignment vulnerability</span></span>](#binding-mvc)</li><li>[<span data-ttu-id="baa64-114">Koda obetrodda web utdata tidigare toorendering</span><span class="sxs-lookup"><span data-stu-id="baa64-114">Encode untrusted web output prior toorendering</span></span>](#rendering)</li><li>[<span data-ttu-id="baa64-115">Utföra verifiering av indata- och filtrering på alla strängtyp modellegenskaper</span><span class="sxs-lookup"><span data-stu-id="baa64-115">Perform input validation and filtering on all string type Model properties</span></span>](#typemodel)</li><li>[<span data-ttu-id="baa64-116">Rensning ska tillämpas på formulärfält som accepterar tecken, t.ex., textredigeraren</span><span class="sxs-lookup"><span data-stu-id="baa64-116">Sanitization should be applied on form fields that accept all characters, e.g, rich text editor</span></span>](#richtext)</li><li>[<span data-ttu-id="baa64-117">Tilldela inte DOM-element toosinks som inte har inbyggda kodning</span><span class="sxs-lookup"><span data-stu-id="baa64-117">Do not assign DOM elements toosinks that do not have inbuilt encoding</span></span>](#inbuilt-encode)</li><li>[<span data-ttu-id="baa64-118">Verifiera att alla omdirigeringar i programmet hello är stängda eller göra på ett säkert sätt</span><span class="sxs-lookup"><span data-stu-id="baa64-118">Validate all redirects within hello application are closed or done safely</span></span>](#redirect-safe)</li><li>[<span data-ttu-id="baa64-119">Implementera verifiering av indata på alla typen strängparametrar accepteras av kontrollantmetoder</span><span class="sxs-lookup"><span data-stu-id="baa64-119">Implement input validation on all string type parameters accepted by Controller methods</span></span>](#string-method)</li><li>[<span data-ttu-id="baa64-120">Ange övre gräns för tidsgränsen för reguljärt uttryck som bearbetar tooprevent DoS på grund av toobad reguljära uttryck</span><span class="sxs-lookup"><span data-stu-id="baa64-120">Set upper limit timeout for regular expression processing tooprevent DoS due toobad regular expressions</span></span>](#dos-expression)</li><li>[<span data-ttu-id="baa64-121">Undvik att använda Html.Raw i Razor vyer</span><span class="sxs-lookup"><span data-stu-id="baa64-121">Avoid using Html.Raw in Razor views</span></span>](#html-razor)</li></ul> | 
| <span data-ttu-id="baa64-122">**Databas**</span><span class="sxs-lookup"><span data-stu-id="baa64-122">**Database**</span></span> | <ul><li>[<span data-ttu-id="baa64-123">Använd inte dynamisk frågor i lagrade procedurer</span><span class="sxs-lookup"><span data-stu-id="baa64-123">Do not use dynamic queries in stored procedures</span></span>](#stored-proc)</li></ul> |
| <span data-ttu-id="baa64-124">**Webb-API**</span><span class="sxs-lookup"><span data-stu-id="baa64-124">**Web API**</span></span> | <ul><li>[<span data-ttu-id="baa64-125">Se till att modellen verifieringen är klar för Web API-metoder</span><span class="sxs-lookup"><span data-stu-id="baa64-125">Ensure that model validation is done on Web API methods</span></span>](#validation-api)</li><li>[<span data-ttu-id="baa64-126">Implementera verifiering av indata på alla typen strängparametrar accepteras av Web API-metoder</span><span class="sxs-lookup"><span data-stu-id="baa64-126">Implement input validation on all string type parameters accepted by Web API methods</span></span>](#string-api)</li><li>[<span data-ttu-id="baa64-127">Se till att typen säkert parametrar används i Web API för dataåtkomst</span><span class="sxs-lookup"><span data-stu-id="baa64-127">Ensure that type-safe parameters are used in Web API for data access</span></span>](#typesafe-api)</li></ul> | 
| <span data-ttu-id="baa64-128">**Azure dokumentet DB**</span><span class="sxs-lookup"><span data-stu-id="baa64-128">**Azure Document DB**</span></span> | <ul><li>[<span data-ttu-id="baa64-129">Använd innehåller parametrar SQL-frågor för DocumentDB</span><span class="sxs-lookup"><span data-stu-id="baa64-129">Use parametrized SQL queries for DocumentDB</span></span>](#sql-docdb)</li></ul> | 
| <span data-ttu-id="baa64-130">**WCF**</span><span class="sxs-lookup"><span data-stu-id="baa64-130">**WCF**</span></span> | <ul><li>[<span data-ttu-id="baa64-131">WCF-indata verifiering via schemabindning</span><span class="sxs-lookup"><span data-stu-id="baa64-131">WCF Input validation through Schema binding</span></span>](#schema-binding)</li><li>[<span data-ttu-id="baa64-132">WCF - indata verifiering via parametern kontrollanter</span><span class="sxs-lookup"><span data-stu-id="baa64-132">WCF- Input validation through Parameter Inspectors</span></span>](#parameters)</li></ul> |

## <span data-ttu-id="baa64-133"><a id="disable-xslt"></a>Inaktivera XSLT-skript för alla transformeringar med obetrodda formatmallar</span><span class="sxs-lookup"><span data-stu-id="baa64-133"><a id="disable-xslt"></a>Disable XSLT scripting for all transforms using untrusted style sheets</span></span>

| <span data-ttu-id="baa64-134">Rubrik</span><span class="sxs-lookup"><span data-stu-id="baa64-134">Title</span></span>                   | <span data-ttu-id="baa64-135">Information</span><span class="sxs-lookup"><span data-stu-id="baa64-135">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="baa64-136">**Komponent**</span><span class="sxs-lookup"><span data-stu-id="baa64-136">**Component**</span></span>               | <span data-ttu-id="baa64-137">Webbprogram</span><span class="sxs-lookup"><span data-stu-id="baa64-137">Web Application</span></span> | 
| <span data-ttu-id="baa64-138">**SDL fas**</span><span class="sxs-lookup"><span data-stu-id="baa64-138">**SDL Phase**</span></span>               | <span data-ttu-id="baa64-139">Utveckla</span><span class="sxs-lookup"><span data-stu-id="baa64-139">Build</span></span> |  
| <span data-ttu-id="baa64-140">**Tillämpliga tekniker**</span><span class="sxs-lookup"><span data-stu-id="baa64-140">**Applicable Technologies**</span></span> | <span data-ttu-id="baa64-141">Generisk</span><span class="sxs-lookup"><span data-stu-id="baa64-141">Generic</span></span> |
| <span data-ttu-id="baa64-142">**Attribut**</span><span class="sxs-lookup"><span data-stu-id="baa64-142">**Attributes**</span></span>              | <span data-ttu-id="baa64-143">Saknas</span><span class="sxs-lookup"><span data-stu-id="baa64-143">N/A</span></span>  |
| <span data-ttu-id="baa64-144">**Referenser**</span><span class="sxs-lookup"><span data-stu-id="baa64-144">**References**</span></span>              | <span data-ttu-id="baa64-145">[XSLT-säkerhet](https://msdn.microsoft.com/library/ms763800(v=vs.85).aspx), [egenskapen XsltSettings.EnableScript](http://msdn.microsoft.com/library/system.xml.xsl.xsltsettings.enablescript.aspx)</span><span class="sxs-lookup"><span data-stu-id="baa64-145">[XSLT Security](https://msdn.microsoft.com/library/ms763800(v=vs.85).aspx), [XsltSettings.EnableScript Property](http://msdn.microsoft.com/library/system.xml.xsl.xsltsettings.enablescript.aspx)</span></span> |
| <span data-ttu-id="baa64-146">**Steg**</span><span class="sxs-lookup"><span data-stu-id="baa64-146">**Steps**</span></span> | <span data-ttu-id="baa64-147">XSLT har stöd för skript i formatmallar med hello `<msxml:script>` element.</span><span class="sxs-lookup"><span data-stu-id="baa64-147">XSLT supports scripting inside style sheets using hello `<msxml:script>` element.</span></span> <span data-ttu-id="baa64-148">Detta gör att anpassade funktioner toobe används i en XSLT-transformation.</span><span class="sxs-lookup"><span data-stu-id="baa64-148">This allows custom functions toobe used in an XSLT transformation.</span></span> <span data-ttu-id="baa64-149">hello skriptet körs under hello kontext processens hello utför hello transformeringen.</span><span class="sxs-lookup"><span data-stu-id="baa64-149">hello script is executed under hello context of hello process performing hello transform.</span></span> <span data-ttu-id="baa64-150">XSLT-skriptet måste inaktiveras när i en ej betrodd miljö tooprevent körning av icke betrodd kod.</span><span class="sxs-lookup"><span data-stu-id="baa64-150">XSLT script must be disabled when in an untrusted environment tooprevent execution of untrusted code.</span></span> <span data-ttu-id="baa64-151">*Om du använder .NET:* XSLT-skript är inaktiverat som standard, men du måste se till att den inte har uttryckligen aktiverats via hello `XsltSettings.EnableScript` egenskapen.</span><span class="sxs-lookup"><span data-stu-id="baa64-151">*If using .NET:* XSLT scripting is disabled by default; however, you must ensure that it has not been explicitly enabled through hello `XsltSettings.EnableScript` property.</span></span>|

### <a name="example"></a><span data-ttu-id="baa64-152">Exempel</span><span class="sxs-lookup"><span data-stu-id="baa64-152">Example</span></span> 

```C#
XsltSettings settings = new XsltSettings();
settings.EnableScript = true; // WRONG: THIS SHOULD BE SET toofalse
```

### <a name="example"></a><span data-ttu-id="baa64-153">Exempel</span><span class="sxs-lookup"><span data-stu-id="baa64-153">Example</span></span>
<span data-ttu-id="baa64-154">Om du använder med hjälp av MSXML 6.0, är XSLT-skript inaktiverat som standard. dock måste du kontrollera att den inte har uttryckligen aktiverats via hello XML DOM-objektegenskaper AllowXsltScript.</span><span class="sxs-lookup"><span data-stu-id="baa64-154">If you are using using MSXML 6.0, XSLT scripting is disabled by default; however, you must ensure that it has not been explicitly enabled through hello XML DOM object property AllowXsltScript.</span></span> 

```C#
doc.setProperty("AllowXsltScript", true); // WRONG: THIS SHOULD BE SET toofalse
```

### <a name="example"></a><span data-ttu-id="baa64-155">Exempel</span><span class="sxs-lookup"><span data-stu-id="baa64-155">Example</span></span>
<span data-ttu-id="baa64-156">Om du använder MSXML 5 eller nedan, XSLT-skript är aktiverat som standard och du måste uttryckligen inaktivera den.</span><span class="sxs-lookup"><span data-stu-id="baa64-156">If you are using MSXML 5 or below, XSLT scripting is enabled by default and you must explicitly disable it.</span></span> <span data-ttu-id="baa64-157">Ange hello XML DOM-objekt egenskapen AllowXsltScript toofalse.</span><span class="sxs-lookup"><span data-stu-id="baa64-157">Set hello XML DOM object property AllowXsltScript toofalse.</span></span> 

```C#
doc.setProperty("AllowXsltScript", false); // CORRECT. Setting toofalse disables XSLT scripting.
```

## <span data-ttu-id="baa64-158"><a id="out-sniffing"></a>Se till att varje sida som kan innehålla användare kan kontrolleras innehåll bort automatisk MIME-kontroll</span><span class="sxs-lookup"><span data-stu-id="baa64-158"><a id="out-sniffing"></a>Ensure that each page that could contain user controllable content opts out of automatic MIME sniffing</span></span>

| <span data-ttu-id="baa64-159">Rubrik</span><span class="sxs-lookup"><span data-stu-id="baa64-159">Title</span></span>                   | <span data-ttu-id="baa64-160">Information</span><span class="sxs-lookup"><span data-stu-id="baa64-160">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="baa64-161">**Komponent**</span><span class="sxs-lookup"><span data-stu-id="baa64-161">**Component**</span></span>               | <span data-ttu-id="baa64-162">Webbprogram</span><span class="sxs-lookup"><span data-stu-id="baa64-162">Web Application</span></span> | 
| <span data-ttu-id="baa64-163">**SDL fas**</span><span class="sxs-lookup"><span data-stu-id="baa64-163">**SDL Phase**</span></span>               | <span data-ttu-id="baa64-164">Utveckla</span><span class="sxs-lookup"><span data-stu-id="baa64-164">Build</span></span> |  
| <span data-ttu-id="baa64-165">**Tillämpliga tekniker**</span><span class="sxs-lookup"><span data-stu-id="baa64-165">**Applicable Technologies**</span></span> | <span data-ttu-id="baa64-166">Generisk</span><span class="sxs-lookup"><span data-stu-id="baa64-166">Generic</span></span> |
| <span data-ttu-id="baa64-167">**Attribut**</span><span class="sxs-lookup"><span data-stu-id="baa64-167">**Attributes**</span></span>              | <span data-ttu-id="baa64-168">Saknas</span><span class="sxs-lookup"><span data-stu-id="baa64-168">N/A</span></span>  |
| <span data-ttu-id="baa64-169">**Referenser**</span><span class="sxs-lookup"><span data-stu-id="baa64-169">**References**</span></span>              | [<span data-ttu-id="baa64-170">IE8 Säkerhet del V - heltäckande skydd</span><span class="sxs-lookup"><span data-stu-id="baa64-170">IE8 Security Part V - Comprehensive Protection</span></span>](http://blogs.msdn.com/ie/archive/2008/07/02/ie8-security-part-v-comprehensive-protection.aspx)  |
| <span data-ttu-id="baa64-171">**Steg**</span><span class="sxs-lookup"><span data-stu-id="baa64-171">**Steps**</span></span> | <p><span data-ttu-id="baa64-172">För varje sida som kan innehålla användare kan kontrolleras innehåll, måste du använda hello HTTP-huvudet `X-Content-Type-Options:nosniff`.</span><span class="sxs-lookup"><span data-stu-id="baa64-172">For each page that could contain user controllable content, you must use hello HTTP Header `X-Content-Type-Options:nosniff`.</span></span> <span data-ttu-id="baa64-173">toocomply med detta krav kan du antingen ange hello obligatorisk rubrik varje sida för de sidor som kan innehålla användare kan kontrolleras innehåll eller kan du ändra det globalt för alla sidor i hello program.</span><span class="sxs-lookup"><span data-stu-id="baa64-173">toocomply with this requirement, you can either set hello required header page by page for only those pages that might contain user-controllable content, or you can set it globally for all pages in hello application.</span></span></p><p><span data-ttu-id="baa64-174">Varje typ av fil från en server som har en associerad [MIME-typ](http://en.wikipedia.org/wiki/Mime_type) (kallas även en *innehållstypen*) som beskriver hello uppbyggnad hello innehåll (det vill säga image, text, program osv.)</span><span class="sxs-lookup"><span data-stu-id="baa64-174">Each type of file delivered from a web server has an associated [MIME type](http://en.wikipedia.org/wiki/Mime_type) (also called a *content-type*) that describes hello nature of hello content (that is, image, text, application, etc.)</span></span></p><p><span data-ttu-id="baa64-175">hello X-innehåll-typ-alternativ rubrik är ett HTTP-huvud som gör att utvecklare toospecify att innehållet inte får någon MIME-lyssnar.</span><span class="sxs-lookup"><span data-stu-id="baa64-175">hello X-Content-Type-Options header is an HTTP header that allows developers toospecify that their content should not be MIME-sniffed.</span></span> <span data-ttu-id="baa64-176">Det här sidhuvudet är utformad toomitigate MIME-kontroll attacker.</span><span class="sxs-lookup"><span data-stu-id="baa64-176">This header is designed toomitigate MIME-Sniffing attacks.</span></span> <span data-ttu-id="baa64-177">Stöd för det här huvudet har lagts till i Internet Explorer 8 (IE8)</span><span class="sxs-lookup"><span data-stu-id="baa64-177">Support for this header was added in Internet Explorer 8 (IE8)</span></span></p><p><span data-ttu-id="baa64-178">Endast användare av Internet Explorer 8 (IE8) drar nytta av X-innehåll-typ-alternativ.</span><span class="sxs-lookup"><span data-stu-id="baa64-178">Only users of Internet Explorer 8 (IE8) will benefit from X-Content-Type-Options.</span></span> <span data-ttu-id="baa64-179">Tidigare versioner av Internet Explorer hänsyn inte för närvarande hello X-innehåll-typ-alternativ rubrik</span><span class="sxs-lookup"><span data-stu-id="baa64-179">Previous versions of Internet Explorer do not currently respect hello X-Content-Type-Options header</span></span></p><p><span data-ttu-id="baa64-180">Internet Explorer 8 (och senare) är hello endast större webbläsare tooimplement en MIME--kontroll CEIP funktionen.</span><span class="sxs-lookup"><span data-stu-id="baa64-180">Internet Explorer 8 (and later) are hello only major browsers tooimplement a MIME-sniffing opt-out feature.</span></span> <span data-ttu-id="baa64-181">Om andra större webbläsare (Firefox, Safari, Chrome) implementerar liknande funktioner, och när den här rekommendationen kommer att vara uppdaterade tooinclude syntaxen för de här webbläsarna samt</span><span class="sxs-lookup"><span data-stu-id="baa64-181">If and when other major browsers (Firefox, Safari, Chrome) implement similar features, this recommendation will be updated tooinclude syntax for those browsers as well</span></span></p>|

### <a name="example"></a><span data-ttu-id="baa64-182">Exempel</span><span class="sxs-lookup"><span data-stu-id="baa64-182">Example</span></span>
<span data-ttu-id="baa64-183">tooenable hello obligatorisk rubrik globalt för alla sidor i hello program, du kan göra något av följande hello:</span><span class="sxs-lookup"><span data-stu-id="baa64-183">tooenable hello required header globally for all pages in hello application, you can do one of hello following:</span></span> 

* <span data-ttu-id="baa64-184">Lägg till hello sidhuvud i hello Web.config om programmet hello finns av Internet Information Services (IIS) 7</span><span class="sxs-lookup"><span data-stu-id="baa64-184">Add hello header in hello web.config file if hello application is hosted by Internet Information Services (IIS) 7</span></span> 

```
<system.webServer> 
  <httpProtocol> 
    <customHeaders> 
      <add name=""X-Content-Type-Options"" value=""nosniff""/>
    </customHeaders>
  </httpProtocol>
</system.webServer> 
```

* <span data-ttu-id="baa64-185">Lägg till sidhuvud hello via hello globala programmet\_BeginRequest</span><span class="sxs-lookup"><span data-stu-id="baa64-185">Add hello header through hello global Application\_BeginRequest</span></span> 

``` 
void Application_BeginRequest(object sender, EventArgs e)
{
  this.Response.Headers[""X-Content-Type-Options""] = ""nosniff"";
} 
```

* <span data-ttu-id="baa64-186">Implementera anpassade HTTP-modul</span><span class="sxs-lookup"><span data-stu-id="baa64-186">Implement custom HTTP module</span></span> 

``` 
public class XContentTypeOptionsModule : IHttpModule 
  {
    #region IHttpModule Members 
    public void Dispose() 
    { 

    } 
    public void Init(HttpApplication context)
    { 
      context.PreSendRequestHeaders += newEventHandler(context_PreSendRequestHeaders); 
    } 
    #endregion 
    void context_PreSendRequestHeaders(object sender, EventArgs e) 
      { 
        HttpApplication application = sender as HttpApplication; 
        if (application == null) 
          return; 
        if (application.Response.Headers[""X-Content-Type-Options ""] != null) 
          return; 
        application.Response.Headers.Add(""X-Content-Type-Options "", ""nosniff""); 
      } 
  } 

``` 

* <span data-ttu-id="baa64-187">Du kan aktivera hello obligatorisk rubrik endast för specifika sidor genom att lägga till den tooindividual svar:</span><span class="sxs-lookup"><span data-stu-id="baa64-187">You can enable hello required header only for specific pages by adding it tooindividual responses:</span></span> 

```
this.Response.Headers[""X-Content-Type-Options""] = ""nosniff""; 
``` 

## <span data-ttu-id="baa64-188"><a id="xml-resolution"></a>Skydda eller inaktivera XML-entitet upplösning</span><span class="sxs-lookup"><span data-stu-id="baa64-188"><a id="xml-resolution"></a>Harden or Disable XML Entity Resolution</span></span>

| <span data-ttu-id="baa64-189">Rubrik</span><span class="sxs-lookup"><span data-stu-id="baa64-189">Title</span></span>                   | <span data-ttu-id="baa64-190">Information</span><span class="sxs-lookup"><span data-stu-id="baa64-190">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="baa64-191">**Komponent**</span><span class="sxs-lookup"><span data-stu-id="baa64-191">**Component**</span></span>               | <span data-ttu-id="baa64-192">Webbprogram</span><span class="sxs-lookup"><span data-stu-id="baa64-192">Web Application</span></span> | 
| <span data-ttu-id="baa64-193">**SDL fas**</span><span class="sxs-lookup"><span data-stu-id="baa64-193">**SDL Phase**</span></span>               | <span data-ttu-id="baa64-194">Utveckla</span><span class="sxs-lookup"><span data-stu-id="baa64-194">Build</span></span> |  
| <span data-ttu-id="baa64-195">**Tillämpliga tekniker**</span><span class="sxs-lookup"><span data-stu-id="baa64-195">**Applicable Technologies**</span></span> | <span data-ttu-id="baa64-196">Generisk</span><span class="sxs-lookup"><span data-stu-id="baa64-196">Generic</span></span> |
| <span data-ttu-id="baa64-197">**Attribut**</span><span class="sxs-lookup"><span data-stu-id="baa64-197">**Attributes**</span></span>              | <span data-ttu-id="baa64-198">Saknas</span><span class="sxs-lookup"><span data-stu-id="baa64-198">N/A</span></span>  |
| <span data-ttu-id="baa64-199">**Referenser**</span><span class="sxs-lookup"><span data-stu-id="baa64-199">**References**</span></span>              | <span data-ttu-id="baa64-200">[XML-entitet Expansion](http://capec.mitre.org/data/definitions/197.html), [XML Denial of Service-attacker och försvar](http://msdn.microsoft.com/magazine/ee335713.aspx), [MSXML Säkerhetsöversikt](http://msdn.microsoft.com/library/ms754611(v=VS.85).aspx), [bästa praxis för att skydda MSXML kod](http://msdn.microsoft.com/library/ms759188(VS.85).aspx), [ Protokollreferens för NSXMLParserDelegate](http://developer.apple.com/library/ios/#documentation/cocoa/reference/NSXMLParserDelegate_Protocol/Reference/Reference.html), [lösa externa referenser](https://msdn.microsoft.com/library/5fcwybb2.aspx)</span><span class="sxs-lookup"><span data-stu-id="baa64-200">[XML Entity Expansion](http://capec.mitre.org/data/definitions/197.html), [XML Denial of Service Attacks and Defenses](http://msdn.microsoft.com/magazine/ee335713.aspx), [MSXML Security Overview](http://msdn.microsoft.com/library/ms754611(v=VS.85).aspx), [Best Practices for Securing MSXML Code](http://msdn.microsoft.com/library/ms759188(VS.85).aspx), [NSXMLParserDelegate Protocol Reference](http://developer.apple.com/library/ios/#documentation/cocoa/reference/NSXMLParserDelegate_Protocol/Reference/Reference.html), [Resolving External References](https://msdn.microsoft.com/library/5fcwybb2.aspx)</span></span> |
| <span data-ttu-id="baa64-201">**Steg**</span><span class="sxs-lookup"><span data-stu-id="baa64-201">**Steps**</span></span>| <p><span data-ttu-id="baa64-202">Även om den inte används ofta, finns det en funktion i XML som tillåter hello XML-parsern tooexpand makrot entiteter med värden som definieras i själva hello dokumentet eller från externa källor.</span><span class="sxs-lookup"><span data-stu-id="baa64-202">Although it is not widely used, there is a feature of XML that allows hello XML parser tooexpand macro entities with values defined either within hello document itself or from external sources.</span></span> <span data-ttu-id="baa64-203">Hello dokument kan till exempel definiera en entitet ”företagsnamn” med hello värdet ”Microsoft”, så att varje gång hello text ”&companyname;” visas i hello dokumentet ersätts automatiskt med hello text Microsoft.</span><span class="sxs-lookup"><span data-stu-id="baa64-203">For example, hello document might define an entity "companyname" with hello value "Microsoft," so that every time hello text "&companyname;" appears in hello document, it is automatically replaced with hello text Microsoft.</span></span> <span data-ttu-id="baa64-204">Eller hello dokument kan definiera en entitet ”MSFTStock” som refererar till en extern webbplats service toofetch hello aktuella värdet för Microsoft-lager.</span><span class="sxs-lookup"><span data-stu-id="baa64-204">Or, hello document might define an entity "MSFTStock" that references an external web service toofetch hello current value of Microsoft stock.</span></span></p><p><span data-ttu-id="baa64-205">Sedan helst ”&MSFTStock;” visas i hello dokumentet ersätts automatiskt med hello aktuella lager priset.</span><span class="sxs-lookup"><span data-stu-id="baa64-205">Then any time "&MSFTStock;" appears in hello document, it is automatically replaced with hello current stock price.</span></span> <span data-ttu-id="baa64-206">Den här funktionen kan dock vara missbrukat toocreate DOS-service (DoS) villkor.</span><span class="sxs-lookup"><span data-stu-id="baa64-206">However, this functionality can be abused toocreate denial of service (DoS) conditions.</span></span> <span data-ttu-id="baa64-207">En angripare kan kapsla flera entiteter toocreate en exponentiell expansion XML bomb som förbrukar allt tillgängligt minne på hello system.</span><span class="sxs-lookup"><span data-stu-id="baa64-207">An attacker can nest multiple entities toocreate an exponential expansion XML bomb that consumes all available memory on hello system.</span></span> </p><p><span data-ttu-id="baa64-208">Du kan också han kan skapa en extern referens som strömmas tillbaka en oändlig mängd data eller som bara låser sig hello tråd.</span><span class="sxs-lookup"><span data-stu-id="baa64-208">Alternatively, he can create an external reference that streams back an infinite amount of data or that simply hangs hello thread.</span></span> <span data-ttu-id="baa64-209">Alla team måste därför inaktivera interna eller externa XML-entitet upplösning helt om sina program inte använda den, eller begränsa manuellt hello mängden minne och den tidpunkt då hello program kan använda för matchning av entiteten om den här funktionen är absolut nödvändigt.</span><span class="sxs-lookup"><span data-stu-id="baa64-209">As a result, all teams must disable internal and/or external XML entity resolution entirely if their application does not use it, or manually limit hello amount of memory and time that hello application can consume for entity resolution if this functionality is absolutely necessary.</span></span> <span data-ttu-id="baa64-210">Om entiteten upplösning inte krävs av programmet, inaktiverar du den.</span><span class="sxs-lookup"><span data-stu-id="baa64-210">If entity resolution is not required by your application, then disable it.</span></span> </p>|

### <a name="example"></a><span data-ttu-id="baa64-211">Exempel</span><span class="sxs-lookup"><span data-stu-id="baa64-211">Example</span></span>
<span data-ttu-id="baa64-212">Du kan använda hello följande metoder för .NET Framework-kod:</span><span class="sxs-lookup"><span data-stu-id="baa64-212">For .NET Framework code, you can use hello following approaches:</span></span>

```C#
XmlTextReader reader = new XmlTextReader(stream);
reader.ProhibitDtd = true;

XmlReaderSettings settings = new XmlReaderSettings();
settings.ProhibitDtd = true;
XmlReader reader = XmlReader.Create(stream, settings);

// for .NET 4
XmlReaderSettings settings = new XmlReaderSettings();
settings.DtdProcessing = DtdProcessing.Prohibit;
XmlReader reader = XmlReader.Create(stream, settings);
```
<span data-ttu-id="baa64-213">Observera att hello standardvärdet `ProhibitDtd` i `XmlReaderSettings` är true, men i `XmlTextReader` det är false.</span><span class="sxs-lookup"><span data-stu-id="baa64-213">Note that hello default value of `ProhibitDtd` in `XmlReaderSettings` is true, but in `XmlTextReader` it is false.</span></span> <span data-ttu-id="baa64-214">Om du använder XmlReaderSettings du behöver inte tooset ProhibitDtd tootrue explicit, men det rekommenderas för saké säkerhet att göra.</span><span class="sxs-lookup"><span data-stu-id="baa64-214">If you are using XmlReaderSettings, you do not need tooset ProhibitDtd tootrue explicitly, but it is recommended for safety sake that you do.</span></span> <span data-ttu-id="baa64-215">Observera också att hello XmlDocument klass gör entitet upplösning som standard.</span><span class="sxs-lookup"><span data-stu-id="baa64-215">Also note that hello XmlDocument class allows entity resolution by default.</span></span> 

### <a name="example"></a><span data-ttu-id="baa64-216">Exempel</span><span class="sxs-lookup"><span data-stu-id="baa64-216">Example</span></span>
<span data-ttu-id="baa64-217">toodisable entitet lösning för XmlDocuments, Använd hello `XmlDocument.Load(XmlReader)` överlagring för hello läsa in metod och ange hello lämpliga egenskaper i hello XmlReader argumentet toodisable upplösning, enligt beskrivningen i följande kod hello:</span><span class="sxs-lookup"><span data-stu-id="baa64-217">toodisable entity resolution for XmlDocuments, use hello `XmlDocument.Load(XmlReader)` overload of hello Load method and set hello appropriate properties in hello XmlReader argument toodisable resolution, as illustrated in hello following code:</span></span> 

```C#
XmlReaderSettings settings = new XmlReaderSettings();
settings.ProhibitDtd = true;
XmlReader reader = XmlReader.Create(stream, settings);
XmlDocument doc = new XmlDocument();
doc.Load(reader);
```

### <a name="example"></a><span data-ttu-id="baa64-218">Exempel</span><span class="sxs-lookup"><span data-stu-id="baa64-218">Example</span></span>
<span data-ttu-id="baa64-219">Om det inte går att inaktivera entiteten matchning för ditt program, ange hello XmlReaderSettings.MaxCharactersFromEntities tooa rimliga egenskapsvärdet enligt tooyour programbehov.</span><span class="sxs-lookup"><span data-stu-id="baa64-219">If disabling entity resolution is not possible for your application, set hello XmlReaderSettings.MaxCharactersFromEntities property tooa reasonable value according tooyour application's needs.</span></span> <span data-ttu-id="baa64-220">Detta begränsar hello effekten av potentiella exponentiell expansion DoS-attacker.</span><span class="sxs-lookup"><span data-stu-id="baa64-220">This will limit hello impact of potential exponential expansion DoS attacks.</span></span> <span data-ttu-id="baa64-221">hello följande kod innehåller ett exempel på den här metoden:</span><span class="sxs-lookup"><span data-stu-id="baa64-221">hello following code provides an example of this approach:</span></span> 

```C#
XmlReaderSettings settings = new XmlReaderSettings();
settings.ProhibitDtd = false;
settings.MaxCharactersFromEntities = 1000;
XmlReader reader = XmlReader.Create(stream, settings);
```

### <a name="example"></a><span data-ttu-id="baa64-222">Exempel</span><span class="sxs-lookup"><span data-stu-id="baa64-222">Example</span></span>
<span data-ttu-id="baa64-223">Om du behöver tooresolve infogade entiteter men tooresolve externa enheter behöver inte ange hello XmlReaderSettings.XmlResolver egenskapen toonull.</span><span class="sxs-lookup"><span data-stu-id="baa64-223">If you need tooresolve inline entities but do not need tooresolve external entities, set hello XmlReaderSettings.XmlResolver property toonull.</span></span> <span data-ttu-id="baa64-224">Exempel:</span><span class="sxs-lookup"><span data-stu-id="baa64-224">For example:</span></span> 

```C#
XmlReaderSettings settings = new XmlReaderSettings();
settings.ProhibitDtd = false;
settings.MaxCharactersFromEntities = 1000;
settings.XmlResolver = null;
XmlReader reader = XmlReader.Create(stream, settings);
```
<span data-ttu-id="baa64-225">Observera att i MSXML6, ProhibitDTD är standardinställningen tootrue (inaktivera DTD-bearbetning).</span><span class="sxs-lookup"><span data-stu-id="baa64-225">Note that in MSXML6, ProhibitDTD is set tootrue (disabling DTD processing) by default.</span></span> <span data-ttu-id="baa64-226">Det finns två XML-Parser kan du använda för Apple OSX/iOS kod: NSXMLParser och libXML2.</span><span class="sxs-lookup"><span data-stu-id="baa64-226">For Apple OSX/iOS code, there are two XML parsers you can use: NSXMLParser and libXML2.</span></span> 

## <span data-ttu-id="baa64-227"><a id="app-verification"></a>Program som använder http.sys utföra verifiering för URL-auktorisering</span><span class="sxs-lookup"><span data-stu-id="baa64-227"><a id="app-verification"></a>Applications utilizing http.sys perform URL canonicalization verification</span></span>

| <span data-ttu-id="baa64-228">Rubrik</span><span class="sxs-lookup"><span data-stu-id="baa64-228">Title</span></span>                   | <span data-ttu-id="baa64-229">Information</span><span class="sxs-lookup"><span data-stu-id="baa64-229">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="baa64-230">**Komponent**</span><span class="sxs-lookup"><span data-stu-id="baa64-230">**Component**</span></span>               | <span data-ttu-id="baa64-231">Webbprogram</span><span class="sxs-lookup"><span data-stu-id="baa64-231">Web Application</span></span> | 
| <span data-ttu-id="baa64-232">**SDL fas**</span><span class="sxs-lookup"><span data-stu-id="baa64-232">**SDL Phase**</span></span>               | <span data-ttu-id="baa64-233">Utveckla</span><span class="sxs-lookup"><span data-stu-id="baa64-233">Build</span></span> |  
| <span data-ttu-id="baa64-234">**Tillämpliga tekniker**</span><span class="sxs-lookup"><span data-stu-id="baa64-234">**Applicable Technologies**</span></span> | <span data-ttu-id="baa64-235">Generisk</span><span class="sxs-lookup"><span data-stu-id="baa64-235">Generic</span></span> |
| <span data-ttu-id="baa64-236">**Attribut**</span><span class="sxs-lookup"><span data-stu-id="baa64-236">**Attributes**</span></span>              | <span data-ttu-id="baa64-237">Saknas</span><span class="sxs-lookup"><span data-stu-id="baa64-237">N/A</span></span>  |
| <span data-ttu-id="baa64-238">**Referenser**</span><span class="sxs-lookup"><span data-stu-id="baa64-238">**References**</span></span>              | <span data-ttu-id="baa64-239">Saknas</span><span class="sxs-lookup"><span data-stu-id="baa64-239">N/A</span></span>  |
| <span data-ttu-id="baa64-240">**Steg**</span><span class="sxs-lookup"><span data-stu-id="baa64-240">**Steps**</span></span> | <p><span data-ttu-id="baa64-241">Alla program som använder http.sys bör följa dessa riktlinjer:</span><span class="sxs-lookup"><span data-stu-id="baa64-241">Any application that uses http.sys should follow these guidelines:</span></span></p><ul><li><span data-ttu-id="baa64-242">Begränsa hello URL-längd toono fler än 16 384 tecken (ASCII eller Unicode).</span><span class="sxs-lookup"><span data-stu-id="baa64-242">Limit hello URL length toono more than 16,384 characters (ASCII or Unicode).</span></span> <span data-ttu-id="baa64-243">Detta är hello absolut URL maxlängd baserat på hello standardinställningen för Internet Information Services (IIS) 6.</span><span class="sxs-lookup"><span data-stu-id="baa64-243">This is hello absolute maximum URL length based on hello default Internet Information Services (IIS) 6 setting.</span></span> <span data-ttu-id="baa64-244">Webbplatser bör sträva efter en kortare än detta om möjligt</span><span class="sxs-lookup"><span data-stu-id="baa64-244">Websites should strive for a length shorter than this if possible</span></span></li><li><span data-ttu-id="baa64-245">Använd hello standard .NET Framework-filen i/o-klasser (till exempel FileStream) som dessa drar nytta av hello regler för auktorisering i hello .NET FX</span><span class="sxs-lookup"><span data-stu-id="baa64-245">Use hello standard .NET Framework file I/O classes (such as FileStream) as these will take advantage of hello canonicalization rules in hello .NET FX</span></span></li><li><span data-ttu-id="baa64-246">Explicit Bygg en Tillåt-lista över kända filnamn</span><span class="sxs-lookup"><span data-stu-id="baa64-246">Explicitly build an allow-list of known filenames</span></span></li><li><span data-ttu-id="baa64-247">Explicit avvisa kända filtyper som du inte kommer att uppfylla UrlScan avvisar: exe, bat, cmd, com, htw, ida, idq, htr, idc, shtm-[l], stm, skrivare, ini, pol, dat filer</span><span class="sxs-lookup"><span data-stu-id="baa64-247">Explicitly reject known filetypes you will not serve UrlScan rejects: exe, bat, cmd, com, htw, ida, idq, htr, idc, shtm[l], stm, printer, ini, pol, dat files</span></span></li><li><span data-ttu-id="baa64-248">Fånga hello följande undantag:</span><span class="sxs-lookup"><span data-stu-id="baa64-248">Catch hello following exceptions:</span></span><ul><li><span data-ttu-id="baa64-249">System.ArgumentException (för enhetsnamn)</span><span class="sxs-lookup"><span data-stu-id="baa64-249">System.ArgumentException (for device names)</span></span></li><li><span data-ttu-id="baa64-250">System.NotSupportedException (för dataströmmar)</span><span class="sxs-lookup"><span data-stu-id="baa64-250">System.NotSupportedException (for data streams)</span></span></li><li><span data-ttu-id="baa64-251">System.IO.FileNotFoundException (för ogiltig ESC filnamn)</span><span class="sxs-lookup"><span data-stu-id="baa64-251">System.IO.FileNotFoundException (for invalid escaped filenames)</span></span></li><li><span data-ttu-id="baa64-252">System.IO.DirectoryNotFoundException (för ogiltig ESC kataloger)</span><span class="sxs-lookup"><span data-stu-id="baa64-252">System.IO.DirectoryNotFoundException (for invalid escaped dirs)</span></span></li></ul></li><li><span data-ttu-id="baa64-253">*Inte* anropa ut tooWin32 fil I/O APIs.</span><span class="sxs-lookup"><span data-stu-id="baa64-253">*Do not* call out tooWin32 file I/O APIs.</span></span> <span data-ttu-id="baa64-254">På en ogiltig URL att returnera en 400-fel toohello användare och logga hello verkliga fel.</span><span class="sxs-lookup"><span data-stu-id="baa64-254">On an invalid URL gracefully return a 400 error toohello user, and log hello real error.</span></span></li></ul>|

## <span data-ttu-id="baa64-255"><a id="controls-users"></a>Se till att lämpliga kontroller som finns på plats när accepterar filer från användare</span><span class="sxs-lookup"><span data-stu-id="baa64-255"><a id="controls-users"></a>Ensure appropriate controls are in place when accepting files from users</span></span>

| <span data-ttu-id="baa64-256">Rubrik</span><span class="sxs-lookup"><span data-stu-id="baa64-256">Title</span></span>                   | <span data-ttu-id="baa64-257">Information</span><span class="sxs-lookup"><span data-stu-id="baa64-257">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="baa64-258">**Komponent**</span><span class="sxs-lookup"><span data-stu-id="baa64-258">**Component**</span></span>               | <span data-ttu-id="baa64-259">Webbprogram</span><span class="sxs-lookup"><span data-stu-id="baa64-259">Web Application</span></span> | 
| <span data-ttu-id="baa64-260">**SDL fas**</span><span class="sxs-lookup"><span data-stu-id="baa64-260">**SDL Phase**</span></span>               | <span data-ttu-id="baa64-261">Utveckla</span><span class="sxs-lookup"><span data-stu-id="baa64-261">Build</span></span> |  
| <span data-ttu-id="baa64-262">**Tillämpliga tekniker**</span><span class="sxs-lookup"><span data-stu-id="baa64-262">**Applicable Technologies**</span></span> | <span data-ttu-id="baa64-263">Generisk</span><span class="sxs-lookup"><span data-stu-id="baa64-263">Generic</span></span> |
| <span data-ttu-id="baa64-264">**Attribut**</span><span class="sxs-lookup"><span data-stu-id="baa64-264">**Attributes**</span></span>              | <span data-ttu-id="baa64-265">Saknas</span><span class="sxs-lookup"><span data-stu-id="baa64-265">N/A</span></span>  |
| <span data-ttu-id="baa64-266">**Referenser**</span><span class="sxs-lookup"><span data-stu-id="baa64-266">**References**</span></span>              | <span data-ttu-id="baa64-267">[Obegränsad filöverföringen](https://www.owasp.org/index.php/Unrestricted_File_Upload), [filen signatur tabell](http://www.garykessler.net/library/file_sigs.html)</span><span class="sxs-lookup"><span data-stu-id="baa64-267">[Unrestricted File Upload](https://www.owasp.org/index.php/Unrestricted_File_Upload), [File Signature Table](http://www.garykessler.net/library/file_sigs.html)</span></span> |
| <span data-ttu-id="baa64-268">**Steg**</span><span class="sxs-lookup"><span data-stu-id="baa64-268">**Steps**</span></span> | <p><span data-ttu-id="baa64-269">Överförda filer utgör en betydande risk tooapplications.</span><span class="sxs-lookup"><span data-stu-id="baa64-269">Uploaded files represent a significant risk tooapplications.</span></span></p><p><span data-ttu-id="baa64-270">hello första steget i många attacker är tooget vissa kod toohello system toobe angrepp.</span><span class="sxs-lookup"><span data-stu-id="baa64-270">hello first step in many attacks is tooget some code toohello system toobe attacked.</span></span> <span data-ttu-id="baa64-271">Hello attack endast måste toofind en sätt tooget hello kod körs.</span><span class="sxs-lookup"><span data-stu-id="baa64-271">Then hello attack only needs toofind a way tooget hello code executed.</span></span> <span data-ttu-id="baa64-272">Om du använder en filöverföring kan hello angripare utföra hello första steget.</span><span class="sxs-lookup"><span data-stu-id="baa64-272">Using a file upload helps hello attacker accomplish hello first step.</span></span> <span data-ttu-id="baa64-273">hello konsekvenserna av obegränsad filöverföringen kan variera, inklusive hela systemet övertag en överlagrad filsystem eller databasen, vidarebefordrar attacker tooback slutpunkt system och enkel defacement.</span><span class="sxs-lookup"><span data-stu-id="baa64-273">hello consequences of unrestricted file upload can vary, including complete system takeover, an overloaded file system or database, forwarding attacks tooback-end systems, and simple defacement.</span></span></p><p><span data-ttu-id="baa64-274">Det beror på vilken hello-programmet har med hello upp filen och särskilt där den lagras.</span><span class="sxs-lookup"><span data-stu-id="baa64-274">It depends on what hello application does with hello uploaded file and especially where it is stored.</span></span> <span data-ttu-id="baa64-275">Servern validering av filöverföringar saknas.</span><span class="sxs-lookup"><span data-stu-id="baa64-275">Server side validation of file uploads is missing.</span></span> <span data-ttu-id="baa64-276">Följande kontroller för informationssäkerhet bör implementeras för filöverföring funktioner:</span><span class="sxs-lookup"><span data-stu-id="baa64-276">Following security controls should be implemented for File Upload functionality:</span></span></p><ul><li><span data-ttu-id="baa64-277">Kontrollen av tillägget (endast en giltig uppsättning tillåtna filtyp ska accepteras)</span><span class="sxs-lookup"><span data-stu-id="baa64-277">File Extension check (only a valid set of allowed file type should be accepted)</span></span></li><li><span data-ttu-id="baa64-278">Maxstorleken</span><span class="sxs-lookup"><span data-stu-id="baa64-278">Maximum file size limit</span></span></li><li><span data-ttu-id="baa64-279">Filen får inte vara överförda toowebroot; hello måste vara en katalog på icke-systemenhet</span><span class="sxs-lookup"><span data-stu-id="baa64-279">File should not be uploaded toowebroot; hello location should be a directory on non-system drive</span></span></li><li><span data-ttu-id="baa64-280">Namnkonventionen måste följas så att hello överförda filnamnet har vissa slumpmässighet så som tooprevent filen skrivs över</span><span class="sxs-lookup"><span data-stu-id="baa64-280">Naming convention should be followed, such that hello uploaded file name have some randomness, so as tooprevent file overwrites</span></span></li><li><span data-ttu-id="baa64-281">Filer bör genomsökas efter ett virusskyddsprogram innan du skriver toohello disk</span><span class="sxs-lookup"><span data-stu-id="baa64-281">Files should be scanned for anti-virus before writing toohello disk</span></span></li><li><span data-ttu-id="baa64-282">Se till att verifieras hello filnamnet och andra metadata (t.ex. sökväg) för skadliga tecken</span><span class="sxs-lookup"><span data-stu-id="baa64-282">Ensure that hello file name and any other metadata (e.g., file path) are validated for malicious characters</span></span></li><li><span data-ttu-id="baa64-283">Filens format signatur ska kontrolleras tooprevent en användare från att överföra en masqueraded fil (t.ex. ladda upp ett exe-filen genom att ändra tillägget tootxt)</span><span class="sxs-lookup"><span data-stu-id="baa64-283">File format signature should be checked, tooprevent a user from uploading a masqueraded file (e.g., uploading an exe file by changing extension tootxt)</span></span></li></ul>| 

### <a name="example"></a><span data-ttu-id="baa64-284">Exempel</span><span class="sxs-lookup"><span data-stu-id="baa64-284">Example</span></span>
<span data-ttu-id="baa64-285">Hello senaste avseende signaturverifiering format för filen, finns i klassen toohello nedan för mer information:</span><span class="sxs-lookup"><span data-stu-id="baa64-285">For hello last point regarding file format signature validation, refer toohello class below for details:</span></span> 

```C#
        private static Dictionary<string, List<byte[]>> fileSignature = new Dictionary<string, List<byte[]>>
                    {
                    { ".DOC", new List<byte[]> { new byte[] { 0xD0, 0xCF, 0x11, 0xE0, 0xA1, 0xB1, 0x1A, 0xE1 } } },
                    { ".DOCX", new List<byte[]> { new byte[] { 0x50, 0x4B, 0x03, 0x04 } } },
                    { ".PDF", new List<byte[]> { new byte[] { 0x25, 0x50, 0x44, 0x46 } } },
                    { ".ZIP", new List<byte[]> 
                                            {
                                              new byte[] { 0x50, 0x4B, 0x03, 0x04 },
                                              new byte[] { 0x50, 0x4B, 0x4C, 0x49, 0x54, 0x55 },
                                              new byte[] { 0x50, 0x4B, 0x53, 0x70, 0x58 },
                                              new byte[] { 0x50, 0x4B, 0x05, 0x06 },
                                              new byte[] { 0x50, 0x4B, 0x07, 0x08 },
                                              new byte[] { 0x57, 0x69, 0x6E, 0x5A, 0x69, 0x70 }
                                                }
                                            },
                    { ".PNG", new List<byte[]> { new byte[] { 0x89, 0x50, 0x4E, 0x47, 0x0D, 0x0A, 0x1A, 0x0A } } },
                    { ".JPG", new List<byte[]>
                                    {
                                              new byte[] { 0xFF, 0xD8, 0xFF, 0xE0 },
                                              new byte[] { 0xFF, 0xD8, 0xFF, 0xE1 },
                                              new byte[] { 0xFF, 0xD8, 0xFF, 0xE8 }
                                    }
                                    },
                    { ".JPEG", new List<byte[]>
                                        { 
                                            new byte[] { 0xFF, 0xD8, 0xFF, 0xE0 },
                                            new byte[] { 0xFF, 0xD8, 0xFF, 0xE2 },
                                            new byte[] { 0xFF, 0xD8, 0xFF, 0xE3 }
                                        }
                                        },
                    { ".XLS", new List<byte[]>
                                            {
                                              new byte[] { 0xD0, 0xCF, 0x11, 0xE0, 0xA1, 0xB1, 0x1A, 0xE1 },
                                              new byte[] { 0x09, 0x08, 0x10, 0x00, 0x00, 0x06, 0x05, 0x00 },
                                              new byte[] { 0xFD, 0xFF, 0xFF, 0xFF }
                                            }
                                            },
                    { ".XLSX", new List<byte[]> { new byte[] { 0x50, 0x4B, 0x03, 0x04 } } },
                    { ".GIF", new List<byte[]> { new byte[] { 0x47, 0x49, 0x46, 0x38 } } }
                };

        public static bool IsValidFileExtension(string fileName, byte[] fileData, byte[] allowedChars)
        {
            if (string.IsNullOrEmpty(fileName) || fileData == null || fileData.Length == 0)
            {
                return false;
            }

            bool flag = false;
            string ext = Path.GetExtension(fileName);
            if (string.IsNullOrEmpty(ext))
            {
                return false;
            }

            ext = ext.ToUpperInvariant();

            if (ext.Equals(".TXT") || ext.Equals(".CSV") || ext.Equals(".PRN"))
            {
                foreach (byte b in fileData)
                {
                    if (b > 0x7F)
                    {
                        if (allowedChars != null)
                        {
                            if (!allowedChars.Contains(b))
                            {
                                return false;
                            }
                        }
                        else
                        {
                            return false;
                        }
                    }
                }

                return true;
            }

            if (!fileSignature.ContainsKey(ext))
            {
                return true;
            }

            List<byte[]> sig = fileSignature[ext];
            foreach (byte[] b in sig)
            {
                var curFileSig = new byte[b.Length];
                Array.Copy(fileData, curFileSig, b.Length);
                if (curFileSig.SequenceEqual(b))
                {
                    flag = true;
                    break;
                }
            }

            return flag;
        }
```

## <span data-ttu-id="baa64-286"><a id="typesafe"></a>Se till att typen säkert parametrar används i webbprogram för dataåtkomst</span><span class="sxs-lookup"><span data-stu-id="baa64-286"><a id="typesafe"></a>Ensure that type-safe parameters are used in Web Application for data access</span></span>

| <span data-ttu-id="baa64-287">Rubrik</span><span class="sxs-lookup"><span data-stu-id="baa64-287">Title</span></span>                   | <span data-ttu-id="baa64-288">Information</span><span class="sxs-lookup"><span data-stu-id="baa64-288">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="baa64-289">**Komponent**</span><span class="sxs-lookup"><span data-stu-id="baa64-289">**Component**</span></span>               | <span data-ttu-id="baa64-290">Webbprogram</span><span class="sxs-lookup"><span data-stu-id="baa64-290">Web Application</span></span> | 
| <span data-ttu-id="baa64-291">**SDL fas**</span><span class="sxs-lookup"><span data-stu-id="baa64-291">**SDL Phase**</span></span>               | <span data-ttu-id="baa64-292">Utveckla</span><span class="sxs-lookup"><span data-stu-id="baa64-292">Build</span></span> |  
| <span data-ttu-id="baa64-293">**Tillämpliga tekniker**</span><span class="sxs-lookup"><span data-stu-id="baa64-293">**Applicable Technologies**</span></span> | <span data-ttu-id="baa64-294">Generisk</span><span class="sxs-lookup"><span data-stu-id="baa64-294">Generic</span></span> |
| <span data-ttu-id="baa64-295">**Attribut**</span><span class="sxs-lookup"><span data-stu-id="baa64-295">**Attributes**</span></span>              | <span data-ttu-id="baa64-296">Saknas</span><span class="sxs-lookup"><span data-stu-id="baa64-296">N/A</span></span>  |
| <span data-ttu-id="baa64-297">**Referenser**</span><span class="sxs-lookup"><span data-stu-id="baa64-297">**References**</span></span>              | <span data-ttu-id="baa64-298">Saknas</span><span class="sxs-lookup"><span data-stu-id="baa64-298">N/A</span></span>  |
| <span data-ttu-id="baa64-299">**Steg**</span><span class="sxs-lookup"><span data-stu-id="baa64-299">**Steps**</span></span> | <p><span data-ttu-id="baa64-300">Om du använder hello Parametersamlingen är SQL hanterar hello indata som ett litteralvärde stället som körbar kod.</span><span class="sxs-lookup"><span data-stu-id="baa64-300">If you use hello Parameters collection, SQL treats hello input is as a literal value rather then as executable code.</span></span> <span data-ttu-id="baa64-301">hello Parametersamlingen kan vara används tooenforce typ och längd begränsningar på indata.</span><span class="sxs-lookup"><span data-stu-id="baa64-301">hello Parameters collection can be used tooenforce type and length constraints on input data.</span></span> <span data-ttu-id="baa64-302">Värden som ligger utanför intervallet för hello utlöser ett undantag.</span><span class="sxs-lookup"><span data-stu-id="baa64-302">Values outside of hello range trigger an exception.</span></span> <span data-ttu-id="baa64-303">Om typen säkert SQL-parametrar används kanske angripare kan tooexecute injektion attacker som är inbäddade i hello ofiltrerad indata.</span><span class="sxs-lookup"><span data-stu-id="baa64-303">If type-safe SQL parameters are not used, attackers might be able tooexecute injection attacks that are embedded in hello unfiltered input.</span></span></p><p><span data-ttu-id="baa64-304">Använd säker typparametrar när konstruera SQL frågar tooavoid SQL injection attacker som kan uppstå med ofiltrerade indata.</span><span class="sxs-lookup"><span data-stu-id="baa64-304">Use type safe parameters when constructing SQL queries tooavoid possible SQL injection attacks that can occur with unfiltered input.</span></span> <span data-ttu-id="baa64-305">Du kan använda säker typparametrar med lagrade procedurer och dynamiska SQL-uttryck.</span><span class="sxs-lookup"><span data-stu-id="baa64-305">You can use type safe parameters with stored procedures and with dynamic SQL statements.</span></span> <span data-ttu-id="baa64-306">Parametrarna behandlas som litterala värden av hello databasen och inte som körbar kod.</span><span class="sxs-lookup"><span data-stu-id="baa64-306">Parameters are treated as literal values by hello database and not as executable code.</span></span> <span data-ttu-id="baa64-307">Parametrar kontrolleras även för typ och längd.</span><span class="sxs-lookup"><span data-stu-id="baa64-307">Parameters are also checked for type and length.</span></span></p>|

### <a name="example"></a><span data-ttu-id="baa64-308">Exempel</span><span class="sxs-lookup"><span data-stu-id="baa64-308">Example</span></span> 
<span data-ttu-id="baa64-309">hello följande kod visar hur toouse Skriv säker parametrar med hello SqlParameterCollection när du anropar en lagrad procedur.</span><span class="sxs-lookup"><span data-stu-id="baa64-309">hello following code shows how toouse type safe parameters with hello SqlParameterCollection when calling a stored procedure.</span></span> 

```C#
using System.Data;
using System.Data.SqlClient;

using (SqlConnection connection = new SqlConnection(connectionString))
{ 
DataSet userDataset = new DataSet(); 
SqlDataAdapter myCommand = new SqlDataAdapter(LoginStoredProcedure", connection); 
myCommand.SelectCommand.CommandType = CommandType.StoredProcedure; 
myCommand.SelectCommand.Parameters.Add("@au_id", SqlDbType.VarChar, 11); 
myCommand.SelectCommand.Parameters["@au_id"].Value = SSN.Text; 
myCommand.Fill(userDataset);
}  
```
<span data-ttu-id="baa64-310">I föregående exempel hello, kan inte hello indatavärdet vara längre än 11 tecken.</span><span class="sxs-lookup"><span data-stu-id="baa64-310">In hello preceding code example, hello input value cannot be longer than 11 characters.</span></span> <span data-ttu-id="baa64-311">Om hello data inte följer toohello typ eller längd som anges av parametern hello genereras hello SqlParameter klass ett undantag.</span><span class="sxs-lookup"><span data-stu-id="baa64-311">If hello data does not conform toohello type or length defined by hello parameter, hello SqlParameter class throws an exception.</span></span> 

## <span data-ttu-id="baa64-312"><a id="binding-mvc"></a>Använda separat modell bindning klasser eller bindningsfilter listar tooprevent MVC masslagring tilldelning säkerhetsproblem</span><span class="sxs-lookup"><span data-stu-id="baa64-312"><a id="binding-mvc"></a>Use separate model binding classes or binding filter lists tooprevent MVC mass assignment vulnerability</span></span>

| <span data-ttu-id="baa64-313">Rubrik</span><span class="sxs-lookup"><span data-stu-id="baa64-313">Title</span></span>                   | <span data-ttu-id="baa64-314">Information</span><span class="sxs-lookup"><span data-stu-id="baa64-314">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="baa64-315">**Komponent**</span><span class="sxs-lookup"><span data-stu-id="baa64-315">**Component**</span></span>               | <span data-ttu-id="baa64-316">Webbprogram</span><span class="sxs-lookup"><span data-stu-id="baa64-316">Web Application</span></span> | 
| <span data-ttu-id="baa64-317">**SDL fas**</span><span class="sxs-lookup"><span data-stu-id="baa64-317">**SDL Phase**</span></span>               | <span data-ttu-id="baa64-318">Utveckla</span><span class="sxs-lookup"><span data-stu-id="baa64-318">Build</span></span> |  
| <span data-ttu-id="baa64-319">**Tillämpliga tekniker**</span><span class="sxs-lookup"><span data-stu-id="baa64-319">**Applicable Technologies**</span></span> | <span data-ttu-id="baa64-320">MVC5 MVC6</span><span class="sxs-lookup"><span data-stu-id="baa64-320">MVC5, MVC6</span></span> |
| <span data-ttu-id="baa64-321">**Attribut**</span><span class="sxs-lookup"><span data-stu-id="baa64-321">**Attributes**</span></span>              | <span data-ttu-id="baa64-322">Saknas</span><span class="sxs-lookup"><span data-stu-id="baa64-322">N/A</span></span>  |
| <span data-ttu-id="baa64-323">**Referenser**</span><span class="sxs-lookup"><span data-stu-id="baa64-323">**References**</span></span>              | <span data-ttu-id="baa64-324">[Metadataattribut](http://msdn.microsoft.com/library/system.componentmodel.dataannotations.metadatatypeattribute), [offentliga nyckel säkerhet säkerhetsproblem och minskning](https://github.com/blog/1068-public-key-security-vulnerability-and-mitigation), [fullständig Guide tooMass tilldelning i ASP.NET MVC](http://odetocode.com/Blogs/scott/archive/2012/03/11/complete-guide-to-mass-assignment-in-asp-net-mvc.aspx), [komma igång med EF med MVC](http://www.asp.net/mvc/tutorials/getting-started-with-ef-using-mvc/implementing-basic-crud-functionality-with-the-entity-framework-in-asp-net-mvc-application#overpost)</span><span class="sxs-lookup"><span data-stu-id="baa64-324">[Metadata Attributes](http://msdn.microsoft.com/library/system.componentmodel.dataannotations.metadatatypeattribute), [Public Key Security Vulnerability And Mitigation](https://github.com/blog/1068-public-key-security-vulnerability-and-mitigation), [Complete Guide tooMass Assignment in ASP.NET MVC](http://odetocode.com/Blogs/scott/archive/2012/03/11/complete-guide-to-mass-assignment-in-asp-net-mvc.aspx), [Getting Started with EF using MVC](http://www.asp.net/mvc/tutorials/getting-started-with-ef-using-mvc/implementing-basic-crud-functionality-with-the-entity-framework-in-asp-net-mvc-application#overpost)</span></span> |
| <span data-ttu-id="baa64-325">**Steg**</span><span class="sxs-lookup"><span data-stu-id="baa64-325">**Steps**</span></span> | <ul><li><span data-ttu-id="baa64-326">**När ska leta för över bokföring säkerhetsproblem? -** Över bokföring säkerhetsproblem kan inträffa varje plats du binda modellen klasser från användaren.</span><span class="sxs-lookup"><span data-stu-id="baa64-326">**When should I look for over-posting vulnerabilities? -** Over-posting vulnerabilities can occur any place you bind model classes from user input.</span></span> <span data-ttu-id="baa64-327">Ramverk som MVC kan representera användardata i anpassade .NET-klasser, inklusive vanlig gamla CLR-objekt (POCOs).</span><span class="sxs-lookup"><span data-stu-id="baa64-327">Frameworks like MVC can represent user data in custom .NET classes, including Plain Old CLR Objects (POCOs).</span></span> <span data-ttu-id="baa64-328">MVC fyller automatiskt dessa klasser för modellen med data från hello begäran att tillhandahålla en lämplig representation för att hantera indata från användaren.</span><span class="sxs-lookup"><span data-stu-id="baa64-328">MVC automatically populates these model classes with data from hello request, providing a convenient representation for dealing with user input.</span></span> <span data-ttu-id="baa64-329">När dessa klasser innehåller egenskaper som inte ska ställas in av hello användare, kan hello programmet vara sårbara tooover bokföring attacker som gör att kontrollera data som hello programmet aldrig avsedd.</span><span class="sxs-lookup"><span data-stu-id="baa64-329">When these classes include properties that should not be set by hello user, hello application can be vulnerable tooover-posting attacks, which allow user control of data that hello application never intended.</span></span> <span data-ttu-id="baa64-330">Som MVC modellbindning stöd databastekniker, till exempel Objektrelationer/mappers som Entity Framework ofta också för användning av POCO objekt toorepresent databasdata.</span><span class="sxs-lookup"><span data-stu-id="baa64-330">Like MVC model binding, database access technologies such as object/relational mappers like Entity Framework often also support using POCO objects toorepresent database data.</span></span> <span data-ttu-id="baa64-331">Dessa data model klasser ange hello samma bekvämlighet behandlar databasdata som MVC med indata från användaren.</span><span class="sxs-lookup"><span data-stu-id="baa64-331">These data model classes provide hello same convenience in dealing with database data as MVC does in dealing with user input.</span></span> <span data-ttu-id="baa64-332">Eftersom både MVC och hello databasen stöder liknande modeller som POCO objekt verkar enkelt tooreuse hello samma klasserna i båda fallen.</span><span class="sxs-lookup"><span data-stu-id="baa64-332">Because both MVC and hello database support similar models, like POCO objects, it seems easy tooreuse hello same classes for both purposes.</span></span> <span data-ttu-id="baa64-333">Den här övningen misslyckas toopreserve avgränsning av säkerhetsskäl och är en gemensam område där oönskade egenskaper är exponerad toomodel bindning, aktivera över bokföring attacker.</span><span class="sxs-lookup"><span data-stu-id="baa64-333">This practice fails toopreserve separation of concerns, and it is one common area where unintended properties are exposed toomodel binding, enabling over-posting attacks.</span></span></li><li><span data-ttu-id="baa64-334">**Varför bör inte använda min ofiltrerade databasklasser för modellen som parametrar toomy MVC åtgärder? -** Eftersom MVC modellbindning binda något i den här klassen.</span><span class="sxs-lookup"><span data-stu-id="baa64-334">**Why shouldn't I use my unfiltered database model classes as parameters toomy MVC actions? -** Because MVC model binding will bind anything in that class.</span></span> <span data-ttu-id="baa64-335">Även om hello data inte visas i din vy kan en angripare kan skicka en HTTP-begäran med dessa data ingår och MVC kommer gladeligen binda eftersom åtgärden säger att databasen klass är hello form av data ska accepteras för indata från användaren.</span><span class="sxs-lookup"><span data-stu-id="baa64-335">Even if hello data does not appear in your view, a malicious user can send an HTTP request with this data included, and MVC will gladly bind it because your action says that database class is hello shape of data it should accept for user input.</span></span></li><li><span data-ttu-id="baa64-336">**Varför bör hand om hello form som används för modellbindning? -** Med ASP.NET MVC modellbindning med alltför många modeller exponerar ett program tooover bokföring attacker.</span><span class="sxs-lookup"><span data-stu-id="baa64-336">**Why should I care about hello shape used for model binding? -** Using ASP.NET MVC model binding with overly broad models exposes an application tooover-posting attacks.</span></span> <span data-ttu-id="baa64-337">Överdrivet bokföring möjliggör angripare toochange programdata utanför vilka hello avsedda som åsidosätter hello priset för ett objekt eller hello säkerhetsbehörighet för ett konto.</span><span class="sxs-lookup"><span data-stu-id="baa64-337">Over-posting could enable attackers toochange application data beyond what hello developer intended, such as overriding hello price for an item or hello security privileges for an account.</span></span> <span data-ttu-id="baa64-338">Program ska använda åtgärden-specifik bindning modeller (eller specifika tillåtna filter egenskapslistor) tooprovide ett explicit kontrakt för vilka obetrodda inkommande tooallow via modellbindning.</span><span class="sxs-lookup"><span data-stu-id="baa64-338">Applications should use action-specific binding models (or specific allowed property filter lists) tooprovide an explicit contract for what untrusted input tooallow via model binding.</span></span></li><li><span data-ttu-id="baa64-339">**Har separat bindning modeller bara kopiera koden? -** Nej, det är en fråga om avgränsning av säkerhetsskäl.</span><span class="sxs-lookup"><span data-stu-id="baa64-339">**Is having separate binding models just duplicating code? -** No, it is a matter of separation of concerns.</span></span> <span data-ttu-id="baa64-340">Om du återanvänder databasmodeller i åtgärdsmetoder säger du alla egenskapen (eller underordnade) i den klass som kan anges av hello användare i en HTTP-begäran.</span><span class="sxs-lookup"><span data-stu-id="baa64-340">If you reuse database models in action methods, you are saying any property (or sub-property) in that class can be set by hello user in an HTTP request.</span></span> <span data-ttu-id="baa64-341">Om du inte vill MVC toodo behöver du en filterlista eller en separat klass formen tooshow MVC vilka data kan komma från användarindata i stället.</span><span class="sxs-lookup"><span data-stu-id="baa64-341">If that is not what you want MVC toodo, you need a filter list or a separate class shape tooshow MVC what data can come from user input instead.</span></span></li><li><span data-ttu-id="baa64-342">**Om jag har en separat bindning modeller för indata från användaren, finns tooduplicate alla mina data anteckningens attribut? -** Inte nödvändigtvis.</span><span class="sxs-lookup"><span data-stu-id="baa64-342">**If I have separate binding models for user input, do I have tooduplicate all my data annotation attributes? -** Not necessarily.</span></span> <span data-ttu-id="baa64-343">Du kan använda MetadataTypeAttribute på hello databasen klassen toolink toohello modellmetadata på en modellklass för bindningen.</span><span class="sxs-lookup"><span data-stu-id="baa64-343">You can use MetadataTypeAttribute on hello database model class toolink toohello metadata on a model binding class.</span></span> <span data-ttu-id="baa64-344">Bara Observera att hello typen som refereras av hello MetadataTypeAttribute måste vara en delmängd av hello refererar till typen (det kan ha färre egenskaper, men inte mer).</span><span class="sxs-lookup"><span data-stu-id="baa64-344">Just note that hello type referenced by hello MetadataTypeAttribute must be a subset of hello referencing type (it can have fewer properties, but not more).</span></span></li><li><span data-ttu-id="baa64-345">**Det är tråkigt att flytta data fram och tillbaka mellan användaren inkommande modeller och databasen. Kan jag bara kopiera över alla egenskaper med hjälp av reflektion? -** Ja.</span><span class="sxs-lookup"><span data-stu-id="baa64-345">**Moving data back and forth between user input models and database models is tedious. Can I just copy over all properties using reflection? -** Yes.</span></span> <span data-ttu-id="baa64-346">hello är egenskaperna som visas i hello bindning modeller hello som du har konstaterat toobe säker för användaren.</span><span class="sxs-lookup"><span data-stu-id="baa64-346">hello only properties that appear in hello binding models are hello ones you have determined toobe safe for user input.</span></span> <span data-ttu-id="baa64-347">Det finns ingen säkerhet anledning som förhindrar med hjälp av reflektion toocopy över alla egenskaper som finns i vanliga mellan dessa två modeller.</span><span class="sxs-lookup"><span data-stu-id="baa64-347">There is no security reason that prevents using reflection toocopy over all properties that exist in common between these two models.</span></span></li><li><span data-ttu-id="baa64-348">**Vad händer om [binda (exkludera = ”â €...”)]. Kan jag använda som i stället för att separat bindning modeller? -** Rekommenderas inte den här metoden.</span><span class="sxs-lookup"><span data-stu-id="baa64-348">**What about [Bind(Exclude ="â€¦")]. Can I use that instead of having separate binding models? -** This approach is not recommended.</span></span> <span data-ttu-id="baa64-349">Med hjälp av [binda (exkludera = ”â €...”)] innebär att alla nya egenskapen kan bindas till som standard.</span><span class="sxs-lookup"><span data-stu-id="baa64-349">Using [Bind(Exclude ="â€¦")] means that any new property is bindable by default.</span></span> <span data-ttu-id="baa64-350">När en ny egenskap läggs en extra steg tooremember tookeep saker är säker, snarare än hello design vara säker som standard.</span><span class="sxs-lookup"><span data-stu-id="baa64-350">When a new property is added, there is an extra step tooremember tookeep things secure, rather than having hello design be secure by default.</span></span> <span data-ttu-id="baa64-351">Beroende på hello developer är kontrollerar den här listan varje gång en egenskap läggs riskfyllda.</span><span class="sxs-lookup"><span data-stu-id="baa64-351">Depending on hello developer checking this list every time a property is added is risky.</span></span></li><li><span data-ttu-id="baa64-352">**Är [binda (inkludera = ”â €...”)] användbara för att redigera åtgärder? -** Nej.</span><span class="sxs-lookup"><span data-stu-id="baa64-352">**Is [Bind(Include ="â€¦")] useful for Edit operations? -** No.</span></span> <span data-ttu-id="baa64-353">[Bindning (inkludera = ”â €...”)] är endast tillgänglig för INSERT-format (lägga till nya data).</span><span class="sxs-lookup"><span data-stu-id="baa64-353">[Bind(Include ="â€¦")] is only suitable for INSERT-style operations (adding new data).</span></span> <span data-ttu-id="baa64-354">Använd en annan metod som har en separat bindning modeller eller skicka en lista med tillåtna egenskaper tooUpdateModel eller TryUpdateModel för UPDATE-format (ändra befintliga data).</span><span class="sxs-lookup"><span data-stu-id="baa64-354">For UPDATE-style operations (revising existing data), use another approach, like having separate binding models or passing an explicit list of allowed properties tooUpdateModel or TryUpdateModel.</span></span> <span data-ttu-id="baa64-355">Lägga till en [binda (inkludera = ”â €...”)]-attributet på en redigeringsåtgärd innebär att MVC skapar en objektinstans och ange det bara finns hello egenskaper, lämnar du alla andra standardinställningarna.</span><span class="sxs-lookup"><span data-stu-id="baa64-355">Adding a [Bind(Include ="â€¦")] attribute on an Edit operation means that MVC will create an object instance and set only hello listed properties, leaving all others at their default values.</span></span> <span data-ttu-id="baa64-356">Om hello data sparas ersätts helt hello befintlig entitet återställer hello värden för alla utelämnade egenskaper tootheir standardvärden.</span><span class="sxs-lookup"><span data-stu-id="baa64-356">When hello data is persisted, it will entirely replace hello existing entity, resetting hello values for any omitted properties tootheir defaults.</span></span> <span data-ttu-id="baa64-357">Om exempelvis IsAdmin utelämnades från en [binda (inkludera = ”â €...”)] attributet på en Redigera åtgärd, alla användare vars namn har redigerats via den här åtgärden skulle vara Återställ tooIsAdmin = false (alla redigerade användare förlorar Administratörsstatus).</span><span class="sxs-lookup"><span data-stu-id="baa64-357">For example, if IsAdmin was omitted from a [Bind(Include ="â€¦")] attribute on an Edit operation, any user whose name was edited via this action would be reset tooIsAdmin = false (any edited user would lose administrator status).</span></span> <span data-ttu-id="baa64-358">Om du vill tooprevent uppdaterar toocertain egenskaper, med någon av hello andra lösningar ovan.</span><span class="sxs-lookup"><span data-stu-id="baa64-358">If you want tooprevent updates toocertain properties, use one of hello other approaches above.</span></span> <span data-ttu-id="baa64-359">Observera att vissa versioner av MVC-tooling generera controller klasser med [binda (inkludera = ”â €...”)] redigera åtgärder och innebär att ta bort en egenskap från listan för att överdrivet bokföring attacker.</span><span class="sxs-lookup"><span data-stu-id="baa64-359">Note that some versions of MVC tooling generate controller classes with [Bind(Include ="â€¦")] on Edit actions and imply that removing a property from that list will prevent over-posting attacks.</span></span> <span data-ttu-id="baa64-360">Som beskrivs ovan, kan den metoden fungerar inte som avsett och i stället återställs alla data i hello utelämnas egenskaper tootheir standardvärden</span><span class="sxs-lookup"><span data-stu-id="baa64-360">However, as described above, that approach does not work as intended and instead will reset any data in hello omitted properties tootheir default values.</span></span></li><li><span data-ttu-id="baa64-361">**För att skapa åtgärder, finns det några varningar med [binda (inkludera = ”â €...”)] i stället för en separat bindning modeller? -** Ja.</span><span class="sxs-lookup"><span data-stu-id="baa64-361">**For Create operations, are there any caveats using [Bind(Include ="â€¦")] rather than separate binding models? -** Yes.</span></span> <span data-ttu-id="baa64-362">Den här metoden fungerar inte redigera scenarier som kräver underhåll av två separata tillvägagångssätt för att minimera alla över bokföring sårbarheter först.</span><span class="sxs-lookup"><span data-stu-id="baa64-362">First this approach does not work for Edit scenarios, requiring maintaining two separate approaches for mitigating all over-posting vulnerabilities.</span></span> <span data-ttu-id="baa64-363">Andra, separat bindning modeller tillse åtskillnad mellan för frågor mellan hello form som används för användaren indata och hello form som används för beständiga, något [binda (inkludera = ”â €...”)] påverkas inte.</span><span class="sxs-lookup"><span data-stu-id="baa64-363">Second, separate binding models enforce separation of concerns between hello shape used for user input and hello shape used for persistence, something [Bind(Include ="â€¦")] does not do.</span></span> <span data-ttu-id="baa64-364">Observera att det tredje [binda (inkludera = ”â €...”)] kan endast hantera översta egenskaper. Du kan inte tillåta endast delar av underordnade egenskaper (till exempel ”Details.Name”) i hello-attribut.</span><span class="sxs-lookup"><span data-stu-id="baa64-364">Third, note that [Bind(Include ="â€¦")] can only handle top-level properties; you cannot allow only portions of sub-properties (such as "Details.Name") in hello attribute.</span></span> <span data-ttu-id="baa64-365">Slutligen och kanske använder viktigast av allt [binda (inkludera = ”â €...”)] lägger till ytterligare ett steg som måste registreras någon gång hello klass används för modellbindning.</span><span class="sxs-lookup"><span data-stu-id="baa64-365">Finally, and perhaps most importantly, using [Bind(Include ="â€¦")] adds an extra step that must be remembered any time hello class is used for model binding.</span></span> <span data-ttu-id="baa64-366">Om en ny åtgärdsmetod Binder toohello dataklassen direkt och glömmer tooinclude en [binda (inkludera = ”â €...”)] attribut, kan det bli sårbart tooover bokföring attacker så hello [binda (inkludera = ”â €...”)] metod är mindre säker som standard.</span><span class="sxs-lookup"><span data-stu-id="baa64-366">If a new action method binds toohello data class directly and forgets tooinclude a [Bind(Include ="â€¦")] attribute, it can be vulnerable tooover-posting attacks, so hello [Bind(Include ="â€¦")] approach is somewhat less secure by default.</span></span> <span data-ttu-id="baa64-367">Om du använder [binda (inkludera = ”â €...”)], ta hand alltid tooremember toospecify det varje gång din dataklasser visas som åtgärden metodparametrar.</span><span class="sxs-lookup"><span data-stu-id="baa64-367">If you use [Bind(Include ="â€¦")], take care always tooremember toospecify it every time your data classes appear as action method parameters.</span></span></li><li><span data-ttu-id="baa64-368">**Skapa operations hello vad om att publicera [binda (inkludera = ”â €...”)]-attributet på hello modellklass själva? Inte den här metoden undvika hello måste tooremember tas hello-attributet på varje åtgärdsmetod? -** Den här metoden fungerar i vissa fall.</span><span class="sxs-lookup"><span data-stu-id="baa64-368">**For Create operations, what about putting hello [Bind(Include ="â€¦")] attribute on hello model class itself? Does not this approach avoid hello need tooremember putting hello attribute on every action method? -** This approach works in some cases.</span></span> <span data-ttu-id="baa64-369">Med hjälp av [binda (inkludera = ”â €...”)] i hello modelltypen sig själv (istället för på åtgärdsparametrar med den här klassen), undvika hello måste tooremember tooinclude hello [binda (inkludera = ”â €...”)]-attributet på varje åtgärdsmetod.</span><span class="sxs-lookup"><span data-stu-id="baa64-369">Using [Bind(Include ="â€¦")] on hello model type itself (rather than on action parameters using this class), does avoid hello need tooremember tooinclude hello [Bind(Include ="â€¦")] attribute on every action method.</span></span> <span data-ttu-id="baa64-370">Använda hello attributet direkt på hello klassen effektivt skapar en separat ytan på den här klassen för modellen bindning.</span><span class="sxs-lookup"><span data-stu-id="baa64-370">Using hello attribute directly on hello class effectively creates a separate surface area of this class for model binding purposes.</span></span> <span data-ttu-id="baa64-371">Den här metoden kan dock endast för en modell bindning form per modellklass.</span><span class="sxs-lookup"><span data-stu-id="baa64-371">However, this approach only allows for one model binding shape per model class.</span></span> <span data-ttu-id="baa64-372">Den här metoden fungerar inte om en åtgärdsmetod måste tooallow modellbindning för ett fält (till exempel en administrativ åtgärd som uppdaterar användarroller) och andra åtgärder måste tooprevent modellbindning i det här fältet.</span><span class="sxs-lookup"><span data-stu-id="baa64-372">If one action method needs tooallow model binding of a field (for example, an administrator-only action that updates user roles) and other actions need tooprevent model binding of this field, this approach will not work.</span></span> <span data-ttu-id="baa64-373">Varje klass kan bara ha en modell bindning form. Om olika åtgärder behöver annan modell bindning former, måste de toorepresent dessa separata former med hjälp av antingen separata modellen bindning klasser eller olika [binda (inkludera = ”â €...”)]-attribut i hello åtgärdsmetoder.</span><span class="sxs-lookup"><span data-stu-id="baa64-373">Each class can only have one model binding shape; if different actions need different model binding shapes, they need toorepresent these separate shapes using either separate model binding classes or separate [Bind(Include ="â€¦")] attributes on hello action methods.</span></span></li><li><span data-ttu-id="baa64-374">**Vad bindning modeller? Är de hello detsamma som att visa modeller? -** Dessa är två begreppen.</span><span class="sxs-lookup"><span data-stu-id="baa64-374">**What are binding models? Are they hello same thing as view models? -** These are two related concepts.</span></span> <span data-ttu-id="baa64-375">hello termen bindning modellen refererar tooa modellklass som används i en åtgärd är parameterlista (hello form som överförts från MVC modellen bindning toohello åtgärdsmetod).</span><span class="sxs-lookup"><span data-stu-id="baa64-375">hello term binding model refers tooa model class used in an action is parameter list (hello shape passed from MVC model binding toohello action method).</span></span> <span data-ttu-id="baa64-376">hello termen vymodellen refererar tooa modellklass som överförts från en åtgärd metoden tooa vy.</span><span class="sxs-lookup"><span data-stu-id="baa64-376">hello term view model refers tooa model class passed from an action method tooa view.</span></span> <span data-ttu-id="baa64-377">Med hjälp av en vy-specifika modellen är en vanlig metod för att skicka data från en åtgärd metoden tooa vy.</span><span class="sxs-lookup"><span data-stu-id="baa64-377">Using a view-specific model is a common approach for passing data from an action method tooa view.</span></span> <span data-ttu-id="baa64-378">Ofta formen passar också för modellbindning och hello termen vymodellen kan vara används toorefer hello används för samma modell på båda platserna.</span><span class="sxs-lookup"><span data-stu-id="baa64-378">Often, this shape is also suitable for model binding, and hello term view model can be used toorefer hello same model used in both places.</span></span> <span data-ttu-id="baa64-379">toobe exakt, den här proceduren nämns specifikt bindning modeller, fokuserar på hello form skickades toohello åtgärden, vilket är det som är viktigt för masslagring tilldelning.</span><span class="sxs-lookup"><span data-stu-id="baa64-379">toobe precise, this procedure talks specifically about binding models, focusing on hello shape passed toohello action, which is what matters for mass assignment purposes.</span></span></li></ul>| 

## <span data-ttu-id="baa64-380"><a id="rendering"></a>Koda obetrodda web utdata tidigare toorendering</span><span class="sxs-lookup"><span data-stu-id="baa64-380"><a id="rendering"></a>Encode untrusted web output prior toorendering</span></span>

| <span data-ttu-id="baa64-381">Rubrik</span><span class="sxs-lookup"><span data-stu-id="baa64-381">Title</span></span>                   | <span data-ttu-id="baa64-382">Information</span><span class="sxs-lookup"><span data-stu-id="baa64-382">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="baa64-383">**Komponent**</span><span class="sxs-lookup"><span data-stu-id="baa64-383">**Component**</span></span>               | <span data-ttu-id="baa64-384">Webbprogram</span><span class="sxs-lookup"><span data-stu-id="baa64-384">Web Application</span></span> | 
| <span data-ttu-id="baa64-385">**SDL fas**</span><span class="sxs-lookup"><span data-stu-id="baa64-385">**SDL Phase**</span></span>               | <span data-ttu-id="baa64-386">Utveckla</span><span class="sxs-lookup"><span data-stu-id="baa64-386">Build</span></span> |  
| <span data-ttu-id="baa64-387">**Tillämpliga tekniker**</span><span class="sxs-lookup"><span data-stu-id="baa64-387">**Applicable Technologies**</span></span> | <span data-ttu-id="baa64-388">Generisk Web Forms, MVC5, MVC6</span><span class="sxs-lookup"><span data-stu-id="baa64-388">Generic, Web Forms, MVC5, MVC6</span></span> |
| <span data-ttu-id="baa64-389">**Attribut**</span><span class="sxs-lookup"><span data-stu-id="baa64-389">**Attributes**</span></span>              | <span data-ttu-id="baa64-390">Saknas</span><span class="sxs-lookup"><span data-stu-id="baa64-390">N/A</span></span>  |
| <span data-ttu-id="baa64-391">**Referenser**</span><span class="sxs-lookup"><span data-stu-id="baa64-391">**References**</span></span>              | <span data-ttu-id="baa64-392">[Hur tooprevent webbplatser skript i ASP.NET](http://msdn.microsoft.com/library/ms998274.aspx), [webbplatser skript](http://cwe.mitre.org/data/definitions/79.html), [XSS (skriptkörning över flera) förebyggande Cheat blad](https://www.owasp.org/index.php/XSS_(Cross_Site_Scripting)_Prevention_Cheat_Sheet)</span><span class="sxs-lookup"><span data-stu-id="baa64-392">[How tooprevent Cross-site scripting in ASP.NET](http://msdn.microsoft.com/library/ms998274.aspx), [Cross-site Scripting](http://cwe.mitre.org/data/definitions/79.html), [XSS (Cross Site Scripting) Prevention Cheat Sheet](https://www.owasp.org/index.php/XSS_(Cross_Site_Scripting)_Prevention_Cheat_Sheet)</span></span> |
| <span data-ttu-id="baa64-393">**Steg**</span><span class="sxs-lookup"><span data-stu-id="baa64-393">**Steps**</span></span> | <span data-ttu-id="baa64-394">Globala webbplatsskript (förkortas ofta XSS) är en angreppsvinkel för alla/programkomponent som förbrukar indata från hello web eller online services.</span><span class="sxs-lookup"><span data-stu-id="baa64-394">Cross-site scripting (commonly abbreviated as XSS) is an attack vector for online services or any application/component that consumes input from hello web.</span></span> <span data-ttu-id="baa64-395">XSS-problem kan en angripare tooexecute skript på en annan användares dator via ett sårbara webbprogram.</span><span class="sxs-lookup"><span data-stu-id="baa64-395">XSS vulnerabilities may allow an attacker tooexecute script on another user's machine through a vulnerable web application.</span></span> <span data-ttu-id="baa64-396">Skadliga skript kan använda toosteal cookies och annars manipulera en drabbade datorn via JavaScript.</span><span class="sxs-lookup"><span data-stu-id="baa64-396">Malicious scripts can be used toosteal cookies and otherwise tamper with a victim's machine through JavaScript.</span></span> <span data-ttu-id="baa64-397">XSS förhindras genom att verifiera indata från användaren, se till att den är felfritt och kodning innan den återges på en webbsida.</span><span class="sxs-lookup"><span data-stu-id="baa64-397">XSS is prevented by validating user input, ensuring it is well formed and encoding before it is rendered in a web page.</span></span> <span data-ttu-id="baa64-398">Verifiering av indata och utdatakodning kan göras med hjälp av bibliotek för skydd av webbprogram.</span><span class="sxs-lookup"><span data-stu-id="baa64-398">Input validation and output encoding can be done by using Web Protection Library.</span></span> <span data-ttu-id="baa64-399">För förvaltad kod (C\#, VB.net osv), använda en eller flera lämpliga kodning metoder från hello Web Protection (skydd mot XSS)-biblioteket, beroende på hello kontext där hello användarindata hämtar manifesterad:</span><span class="sxs-lookup"><span data-stu-id="baa64-399">For Managed code (C\#, VB.net, etc.), use one or more appropriate encoding methods from hello Web Protection (Anti-XSS) Library, depending on hello context where hello user input gets manifested:</span></span>| 

### <a name="example"></a><span data-ttu-id="baa64-400">Exempel</span><span class="sxs-lookup"><span data-stu-id="baa64-400">Example</span></span>

```C#
* Encoder.HtmlEncode 
* Encoder.HtmlAttributeEncode 
* Encoder.JavaScriptEncode 
* Encoder.UrlEncode
* Encoder.VisualBasicScriptEncode 
* Encoder.XmlEncode 
* Encoder.XmlAttributeEncode 
* Encoder.CssEncode 
* Encoder.LdapEncode 
```

## <span data-ttu-id="baa64-401"><a id="typemodel"></a>Utföra verifiering av indata- och filtrering på alla strängtyp modellegenskaper</span><span class="sxs-lookup"><span data-stu-id="baa64-401"><a id="typemodel"></a>Perform input validation and filtering on all string type Model properties</span></span>

| <span data-ttu-id="baa64-402">Rubrik</span><span class="sxs-lookup"><span data-stu-id="baa64-402">Title</span></span>                   | <span data-ttu-id="baa64-403">Information</span><span class="sxs-lookup"><span data-stu-id="baa64-403">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="baa64-404">**Komponent**</span><span class="sxs-lookup"><span data-stu-id="baa64-404">**Component**</span></span>               | <span data-ttu-id="baa64-405">Webbprogram</span><span class="sxs-lookup"><span data-stu-id="baa64-405">Web Application</span></span> | 
| <span data-ttu-id="baa64-406">**SDL fas**</span><span class="sxs-lookup"><span data-stu-id="baa64-406">**SDL Phase**</span></span>               | <span data-ttu-id="baa64-407">Utveckla</span><span class="sxs-lookup"><span data-stu-id="baa64-407">Build</span></span> |  
| <span data-ttu-id="baa64-408">**Tillämpliga tekniker**</span><span class="sxs-lookup"><span data-stu-id="baa64-408">**Applicable Technologies**</span></span> | <span data-ttu-id="baa64-409">Allmän och MVC5, MVC6</span><span class="sxs-lookup"><span data-stu-id="baa64-409">Generic, MVC5, MVC6</span></span> |
| <span data-ttu-id="baa64-410">**Attribut**</span><span class="sxs-lookup"><span data-stu-id="baa64-410">**Attributes**</span></span>              | <span data-ttu-id="baa64-411">Saknas</span><span class="sxs-lookup"><span data-stu-id="baa64-411">N/A</span></span>  |
| <span data-ttu-id="baa64-412">**Referenser**</span><span class="sxs-lookup"><span data-stu-id="baa64-412">**References**</span></span>              | <span data-ttu-id="baa64-413">[Lägga till verifiering](http://www.asp.net/mvc/overview/getting-started/introduction/adding-validation), [verifierar modelldata i ett MVC-program](http://msdn.microsoft.com/library/dd410404(v=vs.90).aspx), [riktlinjer för ASP.NET MVC-program](http://msdn.microsoft.com/magazine/dd942822.aspx)</span><span class="sxs-lookup"><span data-stu-id="baa64-413">[Adding Validation](http://www.asp.net/mvc/overview/getting-started/introduction/adding-validation), [Validating Model Data in an MVC Application](http://msdn.microsoft.com/library/dd410404(v=vs.90).aspx), [Guiding Principles For Your ASP.NET MVC Applications](http://msdn.microsoft.com/magazine/dd942822.aspx)</span></span> |
| <span data-ttu-id="baa64-414">**Steg**</span><span class="sxs-lookup"><span data-stu-id="baa64-414">**Steps**</span></span> | <p><span data-ttu-id="baa64-415">Alla hello indataparametrar måste verifieras innan de används i hello programmet tooensure att programmet hello skyddas mot skadliga användarindata.</span><span class="sxs-lookup"><span data-stu-id="baa64-415">All hello input parameters must be validated before they are used in hello application tooensure that hello application is safeguarded against malicious user inputs.</span></span> <span data-ttu-id="baa64-416">Validera hello med reguljära uttryck verifieringar på serversidan med en strategi för verifiering av godkända värden.</span><span class="sxs-lookup"><span data-stu-id="baa64-416">Validate hello input values using regular expression validations on server side with a whitelist validation strategy.</span></span> <span data-ttu-id="baa64-417">Unsanitized användarindata / parametrar toohello metoder kan orsaka kod injektion säkerhetsproblem.</span><span class="sxs-lookup"><span data-stu-id="baa64-417">Unsanitized user inputs / parameters passed toohello methods can cause code injection vulnerabilities.</span></span></p><p><span data-ttu-id="baa64-418">För webbprogram, kan även startpunkter inkludera formulärfält, QueryStrings, cookies, HTTP-huvuden och webbtjänstparametrar.</span><span class="sxs-lookup"><span data-stu-id="baa64-418">For web applications, entry points can also include form fields, QueryStrings, cookies, HTTP headers, and web service parameters.</span></span></p><p><span data-ttu-id="baa64-419">hello måste följande kontroller för verifiering av indata utföras när modellbindning:</span><span class="sxs-lookup"><span data-stu-id="baa64-419">hello following input validation checks must be performed upon model binding:</span></span></p><ul><li><span data-ttu-id="baa64-420">hello modellegenskaper ska förses med reguljärt uttryck anteckningen, för att acceptera tillåtna tecken och högsta tillåtna längden</span><span class="sxs-lookup"><span data-stu-id="baa64-420">hello model properties should be annotated with RegularExpression annotation, for accepting allowed characters and maximum permissible length</span></span></li><li><span data-ttu-id="baa64-421">Hej kontrollantmetoder utför ModelState giltighetsperiod</span><span class="sxs-lookup"><span data-stu-id="baa64-421">hello controller methods should perform ModelState validity</span></span></li></ul>|

## <span data-ttu-id="baa64-422"><a id="richtext"></a>Rensning ska tillämpas på formulärfält som accepterar tecken, t.ex., textredigeraren</span><span class="sxs-lookup"><span data-stu-id="baa64-422"><a id="richtext"></a>Sanitization should be applied on form fields that accept all characters, e.g, rich text editor</span></span>

| <span data-ttu-id="baa64-423">Rubrik</span><span class="sxs-lookup"><span data-stu-id="baa64-423">Title</span></span>                   | <span data-ttu-id="baa64-424">Information</span><span class="sxs-lookup"><span data-stu-id="baa64-424">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="baa64-425">**Komponent**</span><span class="sxs-lookup"><span data-stu-id="baa64-425">**Component**</span></span>               | <span data-ttu-id="baa64-426">Webbprogram</span><span class="sxs-lookup"><span data-stu-id="baa64-426">Web Application</span></span> | 
| <span data-ttu-id="baa64-427">**SDL fas**</span><span class="sxs-lookup"><span data-stu-id="baa64-427">**SDL Phase**</span></span>               | <span data-ttu-id="baa64-428">Utveckla</span><span class="sxs-lookup"><span data-stu-id="baa64-428">Build</span></span> |  
| <span data-ttu-id="baa64-429">**Tillämpliga tekniker**</span><span class="sxs-lookup"><span data-stu-id="baa64-429">**Applicable Technologies**</span></span> | <span data-ttu-id="baa64-430">Generisk</span><span class="sxs-lookup"><span data-stu-id="baa64-430">Generic</span></span> |
| <span data-ttu-id="baa64-431">**Attribut**</span><span class="sxs-lookup"><span data-stu-id="baa64-431">**Attributes**</span></span>              | <span data-ttu-id="baa64-432">Saknas</span><span class="sxs-lookup"><span data-stu-id="baa64-432">N/A</span></span>  |
| <span data-ttu-id="baa64-433">**Referenser**</span><span class="sxs-lookup"><span data-stu-id="baa64-433">**References**</span></span>              | <span data-ttu-id="baa64-434">[Koda osäkra indata](https://msdn.microsoft.com/library/ff647397.aspx#paght000003_step3), [HTML rensare](https://github.com/mganss/HtmlSanitizer)</span><span class="sxs-lookup"><span data-stu-id="baa64-434">[Encode Unsafe Input](https://msdn.microsoft.com/library/ff647397.aspx#paght000003_step3), [HTML Sanitizer](https://github.com/mganss/HtmlSanitizer)</span></span> |
| <span data-ttu-id="baa64-435">**Steg**</span><span class="sxs-lookup"><span data-stu-id="baa64-435">**Steps**</span></span> | <p><span data-ttu-id="baa64-436">Identifiera alla statiska taggar som du vill toouse.</span><span class="sxs-lookup"><span data-stu-id="baa64-436">Identify all static markup tags that you want toouse.</span></span> <span data-ttu-id="baa64-437">Ett vanligt är toorestrict formatering toosafe HTML-element som `<b>` (fetstil) och `<i>` (kursiv).</span><span class="sxs-lookup"><span data-stu-id="baa64-437">A common practice is toorestrict formatting toosafe HTML elements, such as `<b>` (bold) and `<i>` (italic).</span></span></p><p><span data-ttu-id="baa64-438">Innan du skriver hello data, HTML-koda den.</span><span class="sxs-lookup"><span data-stu-id="baa64-438">Before writing hello data, HTML-encode it.</span></span> <span data-ttu-id="baa64-439">Detta gör alla skadliga skript säker genom att göra det toobe hanteras som text, inte som körbar kod.</span><span class="sxs-lookup"><span data-stu-id="baa64-439">This makes any malicious script safe by causing it toobe handled as text, not as executable code.</span></span></p><ol><li><span data-ttu-id="baa64-440">Inaktivera ASP.NET-begäran verifiering genom att lägga till hello hello ValidateRequest = ”false” attributet toohello @ Page-direktivet</span><span class="sxs-lookup"><span data-stu-id="baa64-440">Disable ASP.NET request validation by hello adding hello ValidateRequest="false" attribute toohello @ Page directive</span></span></li><li><span data-ttu-id="baa64-441">Koda hello stränginmatning med hello HtmlEncode metod</span><span class="sxs-lookup"><span data-stu-id="baa64-441">Encode hello string input with hello HtmlEncode method</span></span></li><li><span data-ttu-id="baa64-442">Använda en StringBuilder och dess Ersätt metoden tooselectively ta bort hello kodning för hello HTML-element som du vill toopermit anrop</span><span class="sxs-lookup"><span data-stu-id="baa64-442">Use a StringBuilder and call its Replace method tooselectively remove hello encoding on hello HTML elements that you want toopermit</span></span></li></ol><p><span data-ttu-id="baa64-443">hello sida i hello referenser inaktiverar ASP.NET valideringen genom att ange `ValidateRequest="false"`.</span><span class="sxs-lookup"><span data-stu-id="baa64-443">hello page-in hello references disables ASP.NET request validation by setting `ValidateRequest="false"`.</span></span> <span data-ttu-id="baa64-444">Den HTML-kodas hello indata och selektivt tillåter hello `<b>` och `<i>` också en .NET-bibliotek för HTML-rensning också kan användas.</span><span class="sxs-lookup"><span data-stu-id="baa64-444">It HTML-encodes hello input and selectively allows hello `<b>` and `<i>` Alternatively, a .NET library for HTML sanitization may also be used.</span></span></p><p><span data-ttu-id="baa64-445">HtmlSanitizer är en .NET-bibliotek för rensning av HTML-kod och dokument från konstruktioner som kan leda till tooXSS attacker.</span><span class="sxs-lookup"><span data-stu-id="baa64-445">HtmlSanitizer is a .NET library for cleaning HTML fragments and documents from constructs that can lead tooXSS attacks.</span></span> <span data-ttu-id="baa64-446">Den använder AngleSharp tooparse, ändra och återge HTML- och CSS.</span><span class="sxs-lookup"><span data-stu-id="baa64-446">It uses AngleSharp tooparse, manipulate, and render HTML and CSS.</span></span> <span data-ttu-id="baa64-447">HtmlSanitizer kan installeras som en NuGet-paketet och hello användarindata kan skickas via relevanta HTML- eller CSS rensning metoder som tillämpas på hello på serversidan.</span><span class="sxs-lookup"><span data-stu-id="baa64-447">HtmlSanitizer can be installed as a NuGet package, and hello user input can be passed through relevant HTML or CSS sanitization methods, as applicable, on hello server side.</span></span> <span data-ttu-id="baa64-448">Observera som rensning som en säkerhetskontroll ska betraktas som ett sista alternativ.</span><span class="sxs-lookup"><span data-stu-id="baa64-448">Please note that Sanitization as a security control should be considered only as a last option.</span></span></p><p><span data-ttu-id="baa64-449">Verifiering av indata och utdatakodning anses bättre säkerhetsåtgärder.</span><span class="sxs-lookup"><span data-stu-id="baa64-449">Input validation and Output Encoding are considered better security controls.</span></span></p> |

## <span data-ttu-id="baa64-450"><a id="inbuilt-encode"></a>Tilldela inte DOM-element toosinks som inte har inbyggda kodning</span><span class="sxs-lookup"><span data-stu-id="baa64-450"><a id="inbuilt-encode"></a>Do not assign DOM elements toosinks that do not have inbuilt encoding</span></span>

| <span data-ttu-id="baa64-451">Rubrik</span><span class="sxs-lookup"><span data-stu-id="baa64-451">Title</span></span>                   | <span data-ttu-id="baa64-452">Information</span><span class="sxs-lookup"><span data-stu-id="baa64-452">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="baa64-453">**Komponent**</span><span class="sxs-lookup"><span data-stu-id="baa64-453">**Component**</span></span>               | <span data-ttu-id="baa64-454">Webbprogram</span><span class="sxs-lookup"><span data-stu-id="baa64-454">Web Application</span></span> | 
| <span data-ttu-id="baa64-455">**SDL fas**</span><span class="sxs-lookup"><span data-stu-id="baa64-455">**SDL Phase**</span></span>               | <span data-ttu-id="baa64-456">Utveckla</span><span class="sxs-lookup"><span data-stu-id="baa64-456">Build</span></span> |  
| <span data-ttu-id="baa64-457">**Tillämpliga tekniker**</span><span class="sxs-lookup"><span data-stu-id="baa64-457">**Applicable Technologies**</span></span> | <span data-ttu-id="baa64-458">Generisk</span><span class="sxs-lookup"><span data-stu-id="baa64-458">Generic</span></span> |
| <span data-ttu-id="baa64-459">**Attribut**</span><span class="sxs-lookup"><span data-stu-id="baa64-459">**Attributes**</span></span>              | <span data-ttu-id="baa64-460">Saknas</span><span class="sxs-lookup"><span data-stu-id="baa64-460">N/A</span></span>  |
| <span data-ttu-id="baa64-461">**Referenser**</span><span class="sxs-lookup"><span data-stu-id="baa64-461">**References**</span></span>              | <span data-ttu-id="baa64-462">Saknas</span><span class="sxs-lookup"><span data-stu-id="baa64-462">N/A</span></span>  |
| <span data-ttu-id="baa64-463">**Steg**</span><span class="sxs-lookup"><span data-stu-id="baa64-463">**Steps**</span></span> | <span data-ttu-id="baa64-464">Många javascript-funktioner göra inte kodning som standard.</span><span class="sxs-lookup"><span data-stu-id="baa64-464">Many javascript functions don't do encoding by default.</span></span> <span data-ttu-id="baa64-465">När du tilldelar obetrodda inkommande tooDOM element via sådana funktioner kan orsaka mellan platsen skript (XSS) körningar.</span><span class="sxs-lookup"><span data-stu-id="baa64-465">When assigning untrusted input tooDOM elements via such functions, may result in cross site script (XSS) executions.</span></span>| 

### <a name="example"></a><span data-ttu-id="baa64-466">Exempel</span><span class="sxs-lookup"><span data-stu-id="baa64-466">Example</span></span>
<span data-ttu-id="baa64-467">Följande är osäker exempel:</span><span class="sxs-lookup"><span data-stu-id="baa64-467">Following are insecure examples:</span></span> 

```
document.getElementByID("div1").innerHtml = value;
$("#userName").html(res.Name);
return $('<div/>').html(value)
$('body').append(resHTML);   
```
<span data-ttu-id="baa64-468">Använd inte `innerHtml`; i stället använda `innerText`.</span><span class="sxs-lookup"><span data-stu-id="baa64-468">Don't use `innerHtml`; instead use `innerText`.</span></span> <span data-ttu-id="baa64-469">På samma sätt i stället för `$("#elm").html()`, använda`$("#elm").text()`</span><span class="sxs-lookup"><span data-stu-id="baa64-469">Similarly, instead of `$("#elm").html()`, use `$("#elm").text()`</span></span> 

## <span data-ttu-id="baa64-470"><a id="redirect-safe"></a>Verifiera att alla omdirigeringar i programmet hello är stängda eller göra på ett säkert sätt</span><span class="sxs-lookup"><span data-stu-id="baa64-470"><a id="redirect-safe"></a>Validate all redirects within hello application are closed or done safely</span></span>

| <span data-ttu-id="baa64-471">Rubrik</span><span class="sxs-lookup"><span data-stu-id="baa64-471">Title</span></span>                   | <span data-ttu-id="baa64-472">Information</span><span class="sxs-lookup"><span data-stu-id="baa64-472">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="baa64-473">**Komponent**</span><span class="sxs-lookup"><span data-stu-id="baa64-473">**Component**</span></span>               | <span data-ttu-id="baa64-474">Webbprogram</span><span class="sxs-lookup"><span data-stu-id="baa64-474">Web Application</span></span> | 
| <span data-ttu-id="baa64-475">**SDL fas**</span><span class="sxs-lookup"><span data-stu-id="baa64-475">**SDL Phase**</span></span>               | <span data-ttu-id="baa64-476">Utveckla</span><span class="sxs-lookup"><span data-stu-id="baa64-476">Build</span></span> |  
| <span data-ttu-id="baa64-477">**Tillämpliga tekniker**</span><span class="sxs-lookup"><span data-stu-id="baa64-477">**Applicable Technologies**</span></span> | <span data-ttu-id="baa64-478">Generisk</span><span class="sxs-lookup"><span data-stu-id="baa64-478">Generic</span></span> |
| <span data-ttu-id="baa64-479">**Attribut**</span><span class="sxs-lookup"><span data-stu-id="baa64-479">**Attributes**</span></span>              | <span data-ttu-id="baa64-480">Saknas</span><span class="sxs-lookup"><span data-stu-id="baa64-480">N/A</span></span>  |
| <span data-ttu-id="baa64-481">**Referenser**</span><span class="sxs-lookup"><span data-stu-id="baa64-481">**References**</span></span>              | [<span data-ttu-id="baa64-482">hello OAuth 2.0 auktorisering Framework - öppna omdirigerare</span><span class="sxs-lookup"><span data-stu-id="baa64-482">hello OAuth 2.0 Authorization Framework - Open Redirectors</span></span>](http://tools.ietf.org/html/rfc6749#section-10.15) |
| <span data-ttu-id="baa64-483">**Steg**</span><span class="sxs-lookup"><span data-stu-id="baa64-483">**Steps**</span></span> | <p><span data-ttu-id="baa64-484">Programdesign som kräver omdirigering tooa användardefinierat plats måste begränsa hello möjliga omdirigering mål tooa fördefinierade ”säker” listan över platser eller domäner.</span><span class="sxs-lookup"><span data-stu-id="baa64-484">Application design requiring redirection tooa user-supplied location must constrain hello possible redirection targets tooa predefined "safe" list of sites or domains.</span></span> <span data-ttu-id="baa64-485">Alla omdirigeringar i hello program måste vara stängd/säkert.</span><span class="sxs-lookup"><span data-stu-id="baa64-485">All redirects in hello application must be closed/safe.</span></span></p><p><span data-ttu-id="baa64-486">toodo detta:</span><span class="sxs-lookup"><span data-stu-id="baa64-486">toodo this:</span></span></p><ul><li><span data-ttu-id="baa64-487">Identifiera alla omdirigeringar</span><span class="sxs-lookup"><span data-stu-id="baa64-487">Identify all redirects</span></span></li><li><span data-ttu-id="baa64-488">Implementera en lämplig lösning för varje omdirigeras.</span><span class="sxs-lookup"><span data-stu-id="baa64-488">Implement an appropriate mitigation for each redirect.</span></span> <span data-ttu-id="baa64-489">Lämpliga åtgärder omfattar omdirigering godkända eller användare bekräftelse.</span><span class="sxs-lookup"><span data-stu-id="baa64-489">Appropriate mitigations include redirect whitelist or user confirmation.</span></span> <span data-ttu-id="baa64-490">Om en webbplats eller tjänst med en öppen omdirigering säkerhetsproblem använder OpenID-Facebook/OAuth identitetsleverantörer, kan en angripare stjäl en användares inloggningstoken och personifiera användaren.</span><span class="sxs-lookup"><span data-stu-id="baa64-490">If a web site or service with an open redirect vulnerability uses Facebook/OAuth/OpenID identity providers, an attacker can steal a user's logon token and impersonate that user.</span></span> <span data-ttu-id="baa64-491">Detta är en inbyggd risk när du använder OAuth som beskrivs i RFC 6749 ”hello OAuth 2.0 auktorisering Framework”, avsnittet 10.15 ”öppna omdirigerar” på samma sätt, användarnas autentiseringsuppgifter kan äventyras av spear nätfiskeattacker med öppna omdirigeringar</span><span class="sxs-lookup"><span data-stu-id="baa64-491">This is an inherent risk when using OAuth, which is documented in RFC 6749 "hello OAuth 2.0 Authorization Framework", Section 10.15 "Open Redirects" Similarly, users' credentials can be compromised by spear phishing attacks using open redirects</span></span></li></ul>|

## <span data-ttu-id="baa64-492"><a id="string-method"></a>Implementera verifiering av indata på alla typen strängparametrar accepteras av kontrollantmetoder</span><span class="sxs-lookup"><span data-stu-id="baa64-492"><a id="string-method"></a>Implement input validation on all string type parameters accepted by Controller methods</span></span>

| <span data-ttu-id="baa64-493">Rubrik</span><span class="sxs-lookup"><span data-stu-id="baa64-493">Title</span></span>                   | <span data-ttu-id="baa64-494">Information</span><span class="sxs-lookup"><span data-stu-id="baa64-494">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="baa64-495">**Komponent**</span><span class="sxs-lookup"><span data-stu-id="baa64-495">**Component**</span></span>               | <span data-ttu-id="baa64-496">Webbprogram</span><span class="sxs-lookup"><span data-stu-id="baa64-496">Web Application</span></span> | 
| <span data-ttu-id="baa64-497">**SDL fas**</span><span class="sxs-lookup"><span data-stu-id="baa64-497">**SDL Phase**</span></span>               | <span data-ttu-id="baa64-498">Utveckla</span><span class="sxs-lookup"><span data-stu-id="baa64-498">Build</span></span> |  
| <span data-ttu-id="baa64-499">**Tillämpliga tekniker**</span><span class="sxs-lookup"><span data-stu-id="baa64-499">**Applicable Technologies**</span></span> | <span data-ttu-id="baa64-500">Allmän och MVC5, MVC6</span><span class="sxs-lookup"><span data-stu-id="baa64-500">Generic, MVC5, MVC6</span></span> |
| <span data-ttu-id="baa64-501">**Attribut**</span><span class="sxs-lookup"><span data-stu-id="baa64-501">**Attributes**</span></span>              | <span data-ttu-id="baa64-502">Saknas</span><span class="sxs-lookup"><span data-stu-id="baa64-502">N/A</span></span>  |
| <span data-ttu-id="baa64-503">**Referenser**</span><span class="sxs-lookup"><span data-stu-id="baa64-503">**References**</span></span>              | <span data-ttu-id="baa64-504">[Validera modelldata i ett MVC-program](http://msdn.microsoft.com/library/dd410404(v=vs.90).aspx), [riktlinjer för ASP.NET MVC-program](http://msdn.microsoft.com/magazine/dd942822.aspx)</span><span class="sxs-lookup"><span data-stu-id="baa64-504">[Validating Model Data in an MVC Application](http://msdn.microsoft.com/library/dd410404(v=vs.90).aspx), [Guiding Principles For Your ASP.NET MVC Applications](http://msdn.microsoft.com/magazine/dd942822.aspx)</span></span> |
| <span data-ttu-id="baa64-505">**Steg**</span><span class="sxs-lookup"><span data-stu-id="baa64-505">**Steps**</span></span> | <span data-ttu-id="baa64-506">Verifiering av indata med reguljära uttryck ska göras för metoder som bara godkänner primitiv datatyp och inte modeller som argument.</span><span class="sxs-lookup"><span data-stu-id="baa64-506">For methods that just accept primitive data type, and not models as argument,input validation using Regular Expression should be done.</span></span> <span data-ttu-id="baa64-507">Här ska Regex.IsMatch användas med ett giltigt regex-mönster.</span><span class="sxs-lookup"><span data-stu-id="baa64-507">Here Regex.IsMatch should be used with a valid regex pattern.</span></span> <span data-ttu-id="baa64-508">Om hello-indata stämmer inte med hello angivna reguljära uttrycket, kontrollen inte ska kunna fortsätta och en förvarning om valideringsfelet ska visas.</span><span class="sxs-lookup"><span data-stu-id="baa64-508">If hello input doesn't match hello specified Regular Expression, control should not proceed further, and an adequate warning regarding validation failure should be displayed.</span></span>| 

## <span data-ttu-id="baa64-509"><a id="dos-expression"></a>Ange övre gräns för tidsgränsen för reguljärt uttryck som bearbetar tooprevent DoS på grund av toobad reguljära uttryck</span><span class="sxs-lookup"><span data-stu-id="baa64-509"><a id="dos-expression"></a>Set upper limit timeout for regular expression processing tooprevent DoS due toobad regular expressions</span></span>

| <span data-ttu-id="baa64-510">Rubrik</span><span class="sxs-lookup"><span data-stu-id="baa64-510">Title</span></span>                   | <span data-ttu-id="baa64-511">Information</span><span class="sxs-lookup"><span data-stu-id="baa64-511">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="baa64-512">**Komponent**</span><span class="sxs-lookup"><span data-stu-id="baa64-512">**Component**</span></span>               | <span data-ttu-id="baa64-513">Webbprogram</span><span class="sxs-lookup"><span data-stu-id="baa64-513">Web Application</span></span> | 
| <span data-ttu-id="baa64-514">**SDL fas**</span><span class="sxs-lookup"><span data-stu-id="baa64-514">**SDL Phase**</span></span>               | <span data-ttu-id="baa64-515">Utveckla</span><span class="sxs-lookup"><span data-stu-id="baa64-515">Build</span></span> |  
| <span data-ttu-id="baa64-516">**Tillämpliga tekniker**</span><span class="sxs-lookup"><span data-stu-id="baa64-516">**Applicable Technologies**</span></span> | <span data-ttu-id="baa64-517">Generisk Web Forms, MVC5, MVC6</span><span class="sxs-lookup"><span data-stu-id="baa64-517">Generic, Web Forms, MVC5, MVC6</span></span>  |
| <span data-ttu-id="baa64-518">**Attribut**</span><span class="sxs-lookup"><span data-stu-id="baa64-518">**Attributes**</span></span>              | <span data-ttu-id="baa64-519">Saknas</span><span class="sxs-lookup"><span data-stu-id="baa64-519">N/A</span></span>  |
| <span data-ttu-id="baa64-520">**Referenser**</span><span class="sxs-lookup"><span data-stu-id="baa64-520">**References**</span></span>              | [<span data-ttu-id="baa64-521">Egenskapen DefaultRegexMatchTimeout</span><span class="sxs-lookup"><span data-stu-id="baa64-521">DefaultRegexMatchTimeout Property </span></span>](https://msdn.microsoft.com/library/system.web.configuration.httpruntimesection.defaultregexmatchtimeout.aspx) |
| <span data-ttu-id="baa64-522">**Steg**</span><span class="sxs-lookup"><span data-stu-id="baa64-522">**Steps**</span></span> | <span data-ttu-id="baa64-523">tooensure DOS-attacker mot ange felaktigt skapade reguljära uttryck som orsaka mycket slipper tidsgränsen för hello globalt standardvärde.</span><span class="sxs-lookup"><span data-stu-id="baa64-523">tooensure denial of service attacks against badly created regular expressions, that cause a lot of backtracking, set hello global default timeout.</span></span> <span data-ttu-id="baa64-524">Om hello bearbetningstid tar längre tid än hello definierade övre gräns, skulle det genereras ett undantag.</span><span class="sxs-lookup"><span data-stu-id="baa64-524">If hello processing time takes longer than hello defined upper limit, it would throw a Timeout exception.</span></span> <span data-ttu-id="baa64-525">Om ingenting har konfigurerats skulle hello timeout vara oändligt.</span><span class="sxs-lookup"><span data-stu-id="baa64-525">If nothing is configured, hello timeout would be infinite.</span></span>| 

### <a name="example"></a><span data-ttu-id="baa64-526">Exempel</span><span class="sxs-lookup"><span data-stu-id="baa64-526">Example</span></span>
<span data-ttu-id="baa64-527">Till exempel hello följande konfiguration kommer att kasta ett RegexMatchTimeoutException om hello bearbetning tar mer än 5 sekunder:</span><span class="sxs-lookup"><span data-stu-id="baa64-527">For example, hello following configuration will throw a RegexMatchTimeoutException, if hello processing takes more than 5 seconds:</span></span> 

```C#
<httpRuntime targetFramework="4.5" defaultRegexMatchTimeout="00:00:05" />
```

## <span data-ttu-id="baa64-528"><a id="html-razor"></a>Undvik att använda Html.Raw i Razor vyer</span><span class="sxs-lookup"><span data-stu-id="baa64-528"><a id="html-razor"></a>Avoid using Html.Raw in Razor views</span></span>

| <span data-ttu-id="baa64-529">Rubrik</span><span class="sxs-lookup"><span data-stu-id="baa64-529">Title</span></span>                   | <span data-ttu-id="baa64-530">Information</span><span class="sxs-lookup"><span data-stu-id="baa64-530">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="baa64-531">**Komponent**</span><span class="sxs-lookup"><span data-stu-id="baa64-531">**Component**</span></span>               | <span data-ttu-id="baa64-532">Webbprogram</span><span class="sxs-lookup"><span data-stu-id="baa64-532">Web Application</span></span> | 
| <span data-ttu-id="baa64-533">**SDL fas**</span><span class="sxs-lookup"><span data-stu-id="baa64-533">**SDL Phase**</span></span>               | <span data-ttu-id="baa64-534">Utveckla</span><span class="sxs-lookup"><span data-stu-id="baa64-534">Build</span></span> |  
| <span data-ttu-id="baa64-535">**Tillämpliga tekniker**</span><span class="sxs-lookup"><span data-stu-id="baa64-535">**Applicable Technologies**</span></span> | <span data-ttu-id="baa64-536">MVC5 MVC6</span><span class="sxs-lookup"><span data-stu-id="baa64-536">MVC5, MVC6</span></span> |
| <span data-ttu-id="baa64-537">**Attribut**</span><span class="sxs-lookup"><span data-stu-id="baa64-537">**Attributes**</span></span>              | <span data-ttu-id="baa64-538">Saknas</span><span class="sxs-lookup"><span data-stu-id="baa64-538">N/A</span></span>  |
| <span data-ttu-id="baa64-539">**Referenser**</span><span class="sxs-lookup"><span data-stu-id="baa64-539">**References**</span></span>              | <span data-ttu-id="baa64-540">Saknas</span><span class="sxs-lookup"><span data-stu-id="baa64-540">N/A</span></span>  |
| <span data-ttu-id="baa64-541">Steg</span><span class="sxs-lookup"><span data-stu-id="baa64-541">Step</span></span> | <span data-ttu-id="baa64-542">ASP.Net-webbsidor (Razor) utför automatisk HTML-kodningen.</span><span class="sxs-lookup"><span data-stu-id="baa64-542">ASP.Net WebPages (Razor) perform automatic HTML encoding.</span></span> <span data-ttu-id="baa64-543">Alla strängar som skrivits ut av inbäddad kod nuggets (@ block) är automatiskt HTML-kodas.</span><span class="sxs-lookup"><span data-stu-id="baa64-543">All strings printed by embedded code nuggets (@ blocks) are automatically HTML-encoded.</span></span> <span data-ttu-id="baa64-544">Men när `HtmlHelper.Raw` -metoden har anropats, returneras markup som inte är HTML-kodat.</span><span class="sxs-lookup"><span data-stu-id="baa64-544">However, when `HtmlHelper.Raw` Method is invoked, it returns markup that is not HTML encoded.</span></span> <span data-ttu-id="baa64-545">Om `Html.Raw()` hjälpmetod används kan det kringgår hello automatisk kodning skydd som Razor.</span><span class="sxs-lookup"><span data-stu-id="baa64-545">If `Html.Raw()` helper method is used, it bypasses hello automatic encoding protection that Razor provides.</span></span>|

### <a name="example"></a><span data-ttu-id="baa64-546">Exempel</span><span class="sxs-lookup"><span data-stu-id="baa64-546">Example</span></span>
<span data-ttu-id="baa64-547">Följande är en osäker exempel:</span><span class="sxs-lookup"><span data-stu-id="baa64-547">Following is an insecure example:</span></span> 

```C#
<div class="form-group">
            @Html.Raw(Model.AccountConfirmText)
        </div>
        <div class="form-group">
            @Html.Raw(Model.PaymentConfirmText)
        </div>
</div>
```
<span data-ttu-id="baa64-548">Använd inte `Html.Raw()` om du inte behöver toodisplay markering.</span><span class="sxs-lookup"><span data-stu-id="baa64-548">Do not use `Html.Raw()` unless you need toodisplay markup.</span></span> <span data-ttu-id="baa64-549">Den här metoden utför inte utdata kodning implicit.</span><span class="sxs-lookup"><span data-stu-id="baa64-549">This method does not perform output encoding implicitly.</span></span> <span data-ttu-id="baa64-550">Använda andra ASP.NET hjälpprogram t.ex.`@Html.DisplayFor()`</span><span class="sxs-lookup"><span data-stu-id="baa64-550">Use other ASP.NET helpers e.g., `@Html.DisplayFor()`</span></span> 

## <span data-ttu-id="baa64-551"><a id="stored-proc"></a>Använd inte dynamisk frågor i lagrade procedurer</span><span class="sxs-lookup"><span data-stu-id="baa64-551"><a id="stored-proc"></a>Do not use dynamic queries in stored procedures</span></span>

| <span data-ttu-id="baa64-552">Rubrik</span><span class="sxs-lookup"><span data-stu-id="baa64-552">Title</span></span>                   | <span data-ttu-id="baa64-553">Information</span><span class="sxs-lookup"><span data-stu-id="baa64-553">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="baa64-554">**Komponent**</span><span class="sxs-lookup"><span data-stu-id="baa64-554">**Component**</span></span>               | <span data-ttu-id="baa64-555">Databas</span><span class="sxs-lookup"><span data-stu-id="baa64-555">Database</span></span> | 
| <span data-ttu-id="baa64-556">**SDL fas**</span><span class="sxs-lookup"><span data-stu-id="baa64-556">**SDL Phase**</span></span>               | <span data-ttu-id="baa64-557">Utveckla</span><span class="sxs-lookup"><span data-stu-id="baa64-557">Build</span></span> |  
| <span data-ttu-id="baa64-558">**Tillämpliga tekniker**</span><span class="sxs-lookup"><span data-stu-id="baa64-558">**Applicable Technologies**</span></span> | <span data-ttu-id="baa64-559">Generisk</span><span class="sxs-lookup"><span data-stu-id="baa64-559">Generic</span></span> |
| <span data-ttu-id="baa64-560">**Attribut**</span><span class="sxs-lookup"><span data-stu-id="baa64-560">**Attributes**</span></span>              | <span data-ttu-id="baa64-561">Saknas</span><span class="sxs-lookup"><span data-stu-id="baa64-561">N/A</span></span>  |
| <span data-ttu-id="baa64-562">**Referenser**</span><span class="sxs-lookup"><span data-stu-id="baa64-562">**References**</span></span>              | <span data-ttu-id="baa64-563">Saknas</span><span class="sxs-lookup"><span data-stu-id="baa64-563">N/A</span></span>  |
| <span data-ttu-id="baa64-564">**Steg**</span><span class="sxs-lookup"><span data-stu-id="baa64-564">**Steps**</span></span> | <p><span data-ttu-id="baa64-565">En attack med SQL injection utnyttjar sårbarheter i verifiering av indata toorun godtycklig kommandon i hello-databasen.</span><span class="sxs-lookup"><span data-stu-id="baa64-565">A SQL injection attack exploits vulnerabilities in input validation toorun arbitrary commands in hello database.</span></span> <span data-ttu-id="baa64-566">Det kan inträffa när ditt program använder inkommande tooconstruct dynamisk SQL-instruktioner tooaccess hello databasen.</span><span class="sxs-lookup"><span data-stu-id="baa64-566">It can occur when your application uses input tooconstruct dynamic SQL statements tooaccess hello database.</span></span> <span data-ttu-id="baa64-567">Det kan också inträffa om din kod använder lagrade procedurer som skickas strängar som innehåller rådata användarindata.</span><span class="sxs-lookup"><span data-stu-id="baa64-567">It can also occur if your code uses stored procedures that are passed strings that contain raw user input.</span></span> <span data-ttu-id="baa64-568">Med hello SQL injection attack köra hello angripare godtycklig kommandon i hello-databasen.</span><span class="sxs-lookup"><span data-stu-id="baa64-568">Using hello SQL injection attack, hello attacker can execute arbitrary commands in hello database.</span></span> <span data-ttu-id="baa64-569">Alla SQL-instruktioner (inklusive hello SQL-instruktioner i lagrade procedurer) måste vara parametriserade.</span><span class="sxs-lookup"><span data-stu-id="baa64-569">All SQL statements (including hello SQL statements in stored procedures) must be parameterized.</span></span> <span data-ttu-id="baa64-570">SQL-instruktioner accepterar tecken som har en särskild innebörd tooSQL (till exempel enkelt citattecken) utan problem Eftersom de har strikt typkontroll.</span><span class="sxs-lookup"><span data-stu-id="baa64-570">Parameterized SQL statements will accept characters that have special meaning tooSQL (like single quote) without problems because they are strongly typed.</span></span> |

### <a name="example"></a><span data-ttu-id="baa64-571">Exempel</span><span class="sxs-lookup"><span data-stu-id="baa64-571">Example</span></span>
<span data-ttu-id="baa64-572">Följande är ett exempel på osäker dynamisk lagrade proceduren:</span><span class="sxs-lookup"><span data-stu-id="baa64-572">Following is an example of insecure dynamic Stored Procedure:</span></span> 

```C#
CREATE PROCEDURE [dbo].[uspGetProductsByCriteria]
(
  @productName nvarchar(200) = NULL,
  @startPrice float = NULL,
  @endPrice float = NULL
)
AS
 BEGIN
  DECLARE @sql nvarchar(max)
  SELECT @sql = ' SELECT ProductID, ProductName, Description, UnitPrice, ImagePath' +
       ' FROM dbo.Products WHERE 1 = 1 '
       PRINT @sql
  IF @productName IS NOT NULL
     SELECT @sql = @sql + ' AND ProductName LIKE ''%' + @productName + '%'''
  IF @startPrice IS NOT NULL
     SELECT @sql = @sql + ' AND UnitPrice > ''' + CONVERT(VARCHAR(10),@startPrice) + ''''
  IF @endPrice IS NOT NULL
     SELECT @sql = @sql + ' AND UnitPrice < ''' + CONVERT(VARCHAR(10),@endPrice) + ''''

  PRINT @sql
  EXEC(@sql)
 END
```

### <a name="example"></a><span data-ttu-id="baa64-573">Exempel</span><span class="sxs-lookup"><span data-stu-id="baa64-573">Example</span></span>
<span data-ttu-id="baa64-574">Nedan följer hello samma lagrade proceduren införts på ett säkert sätt:</span><span class="sxs-lookup"><span data-stu-id="baa64-574">Following is hello same stored procedure implemented securely:</span></span> 
```C#
CREATE PROCEDURE [dbo].[uspGetProductsByCriteriaSecure]
(
             @productName nvarchar(200) = NULL,
             @startPrice float = NULL,
             @endPrice float = NULL
)
AS
       BEGIN
             SELECT ProductID, ProductName, Description, UnitPrice, ImagePath
             FROM dbo.Products where
             (@productName IS NULL or ProductName like '%'+ @productName +'%')
             AND
             (@startPrice IS NULL or UnitPrice > @startPrice)
             AND
             (@endPrice IS NULL or UnitPrice < @endPrice)         
       END
```

## <span data-ttu-id="baa64-575"><a id="validation-api"></a>Se till att modellen verifieringen är klar för Web API-metoder</span><span class="sxs-lookup"><span data-stu-id="baa64-575"><a id="validation-api"></a>Ensure that model validation is done on Web API methods</span></span>

| <span data-ttu-id="baa64-576">Rubrik</span><span class="sxs-lookup"><span data-stu-id="baa64-576">Title</span></span>                   | <span data-ttu-id="baa64-577">Information</span><span class="sxs-lookup"><span data-stu-id="baa64-577">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="baa64-578">**Komponent**</span><span class="sxs-lookup"><span data-stu-id="baa64-578">**Component**</span></span>               | <span data-ttu-id="baa64-579">Webb-API</span><span class="sxs-lookup"><span data-stu-id="baa64-579">Web API</span></span> | 
| <span data-ttu-id="baa64-580">**SDL fas**</span><span class="sxs-lookup"><span data-stu-id="baa64-580">**SDL Phase**</span></span>               | <span data-ttu-id="baa64-581">Utveckla</span><span class="sxs-lookup"><span data-stu-id="baa64-581">Build</span></span> |  
| <span data-ttu-id="baa64-582">**Tillämpliga tekniker**</span><span class="sxs-lookup"><span data-stu-id="baa64-582">**Applicable Technologies**</span></span> | <span data-ttu-id="baa64-583">MVC5 MVC6</span><span class="sxs-lookup"><span data-stu-id="baa64-583">MVC5, MVC6</span></span> |
| <span data-ttu-id="baa64-584">**Attribut**</span><span class="sxs-lookup"><span data-stu-id="baa64-584">**Attributes**</span></span>              | <span data-ttu-id="baa64-585">Saknas</span><span class="sxs-lookup"><span data-stu-id="baa64-585">N/A</span></span>  |
| <span data-ttu-id="baa64-586">**Referenser**</span><span class="sxs-lookup"><span data-stu-id="baa64-586">**References**</span></span>              | [<span data-ttu-id="baa64-587">Modellverifiering i ASP.NET webb-API</span><span class="sxs-lookup"><span data-stu-id="baa64-587">Model Validation in ASP.NET Web API </span></span>](http://www.asp.net/web-api/overview/formats-and-model-binding/model-validation-in-aspnet-web-api) |
| <span data-ttu-id="baa64-588">**Steg**</span><span class="sxs-lookup"><span data-stu-id="baa64-588">**Steps**</span></span> | <span data-ttu-id="baa64-589">När en klient skickar data tooa webb-API, är obligatoriska toovalidate hello data innan du gör några bearbetning.</span><span class="sxs-lookup"><span data-stu-id="baa64-589">When a client sends data tooa web API, it is mandatory toovalidate hello data before doing any processing.</span></span> <span data-ttu-id="baa64-590">Använd data anteckningar på modeller tooset valideringsregler för hello modellen hello egenskaper för ASP.NET Web API-gränssnitt som acceptera modeller som indata.</span><span class="sxs-lookup"><span data-stu-id="baa64-590">For ASP.NET Web APIs which accept models as input, use data annotations on models tooset validation rules on hello properties of hello model.</span></span>|

### <a name="example"></a><span data-ttu-id="baa64-591">Exempel</span><span class="sxs-lookup"><span data-stu-id="baa64-591">Example</span></span>
<span data-ttu-id="baa64-592">hello följande kod visar hello samma:</span><span class="sxs-lookup"><span data-stu-id="baa64-592">hello following code demonstrates hello same:</span></span> 

```C#
using System.ComponentModel.DataAnnotations;

namespace MyApi.Models
{
    public class Product
    {
        public int Id { get; set; }
        [Required]
        [RegularExpression(@"^[a-zA-Z0-9]*$", ErrorMessage="Only alphanumeric characters are allowed.")]
        public string Name { get; set; }
        public decimal Price { get; set; }
        [Range(0, 999)]
        public double Weight { get; set; }
    }
}
```

### <a name="example"></a><span data-ttu-id="baa64-593">Exempel</span><span class="sxs-lookup"><span data-stu-id="baa64-593">Example</span></span>
<span data-ttu-id="baa64-594">I hello åtgärdsmetod av hello API-kontrollanter har giltighet hello modellen toobe explicit kontrolleras enligt nedan:</span><span class="sxs-lookup"><span data-stu-id="baa64-594">In hello action method of hello API controllers, validity of hello model has toobe explicitly checked as shown below:</span></span> 

```C#
namespace MyApi.Controllers
{
    public class ProductsController : ApiController
    {
        public HttpResponseMessage Post(Product product)
        {
            if (ModelState.IsValid)
            {
                // Do something with hello product (not shown).

                return new HttpResponseMessage(HttpStatusCode.OK);
            }
            else
            {
                return Request.CreateErrorResponse(HttpStatusCode.BadRequest, ModelState);
            }
        }
    }
}
```

## <span data-ttu-id="baa64-595"><a id="string-api"></a>Implementera verifiering av indata på alla typen strängparametrar accepteras av Web API-metoder</span><span class="sxs-lookup"><span data-stu-id="baa64-595"><a id="string-api"></a>Implement input validation on all string type parameters accepted by Web API methods</span></span>

| <span data-ttu-id="baa64-596">Rubrik</span><span class="sxs-lookup"><span data-stu-id="baa64-596">Title</span></span>                   | <span data-ttu-id="baa64-597">Information</span><span class="sxs-lookup"><span data-stu-id="baa64-597">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="baa64-598">**Komponent**</span><span class="sxs-lookup"><span data-stu-id="baa64-598">**Component**</span></span>               | <span data-ttu-id="baa64-599">Webb-API</span><span class="sxs-lookup"><span data-stu-id="baa64-599">Web API</span></span> | 
| <span data-ttu-id="baa64-600">**SDL fas**</span><span class="sxs-lookup"><span data-stu-id="baa64-600">**SDL Phase**</span></span>               | <span data-ttu-id="baa64-601">Utveckla</span><span class="sxs-lookup"><span data-stu-id="baa64-601">Build</span></span> |  
| <span data-ttu-id="baa64-602">**Tillämpliga tekniker**</span><span class="sxs-lookup"><span data-stu-id="baa64-602">**Applicable Technologies**</span></span> | <span data-ttu-id="baa64-603">Allmän och MVC 5, MVC 6</span><span class="sxs-lookup"><span data-stu-id="baa64-603">Generic, MVC 5, MVC 6</span></span> |
| <span data-ttu-id="baa64-604">**Attribut**</span><span class="sxs-lookup"><span data-stu-id="baa64-604">**Attributes**</span></span>              | <span data-ttu-id="baa64-605">Saknas</span><span class="sxs-lookup"><span data-stu-id="baa64-605">N/A</span></span>  |
| <span data-ttu-id="baa64-606">**Referenser**</span><span class="sxs-lookup"><span data-stu-id="baa64-606">**References**</span></span>              | <span data-ttu-id="baa64-607">[Validera modelldata i ett MVC-program](http://msdn.microsoft.com/library/dd410404(v=vs.90).aspx), [riktlinjer för ASP.NET MVC-program](http://msdn.microsoft.com/magazine/dd942822.aspx)</span><span class="sxs-lookup"><span data-stu-id="baa64-607">[Validating Model Data in an MVC Application](http://msdn.microsoft.com/library/dd410404(v=vs.90).aspx), [Guiding Principles For Your ASP.NET MVC Applications](http://msdn.microsoft.com/magazine/dd942822.aspx)</span></span> |
| <span data-ttu-id="baa64-608">**Steg**</span><span class="sxs-lookup"><span data-stu-id="baa64-608">**Steps**</span></span> | <span data-ttu-id="baa64-609">Verifiering av indata med reguljära uttryck ska göras för metoder som bara godkänner primitiv datatyp och inte modeller som argument.</span><span class="sxs-lookup"><span data-stu-id="baa64-609">For methods that just accept primitive data type, and not models as argument,input validation using Regular Expression should be done.</span></span> <span data-ttu-id="baa64-610">Här ska Regex.IsMatch användas med ett giltigt regex-mönster.</span><span class="sxs-lookup"><span data-stu-id="baa64-610">Here Regex.IsMatch should be used with a valid regex pattern.</span></span> <span data-ttu-id="baa64-611">Om hello-indata stämmer inte med hello angivna reguljära uttrycket, kontrollen inte ska kunna fortsätta och en förvarning om valideringsfelet ska visas.</span><span class="sxs-lookup"><span data-stu-id="baa64-611">If hello input doesn't match hello specified Regular Expression, control should not proceed further, and an adequate warning regarding validation failure should be displayed.</span></span>|

## <span data-ttu-id="baa64-612"><a id="typesafe-api"></a>Se till att typen säkert parametrar används i Web API för dataåtkomst</span><span class="sxs-lookup"><span data-stu-id="baa64-612"><a id="typesafe-api"></a>Ensure that type-safe parameters are used in Web API for data access</span></span>

| <span data-ttu-id="baa64-613">Rubrik</span><span class="sxs-lookup"><span data-stu-id="baa64-613">Title</span></span>                   | <span data-ttu-id="baa64-614">Information</span><span class="sxs-lookup"><span data-stu-id="baa64-614">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="baa64-615">**Komponent**</span><span class="sxs-lookup"><span data-stu-id="baa64-615">**Component**</span></span>               | <span data-ttu-id="baa64-616">Webb-API</span><span class="sxs-lookup"><span data-stu-id="baa64-616">Web API</span></span> | 
| <span data-ttu-id="baa64-617">**SDL fas**</span><span class="sxs-lookup"><span data-stu-id="baa64-617">**SDL Phase**</span></span>               | <span data-ttu-id="baa64-618">Utveckla</span><span class="sxs-lookup"><span data-stu-id="baa64-618">Build</span></span> |  
| <span data-ttu-id="baa64-619">**Tillämpliga tekniker**</span><span class="sxs-lookup"><span data-stu-id="baa64-619">**Applicable Technologies**</span></span> | <span data-ttu-id="baa64-620">Generisk</span><span class="sxs-lookup"><span data-stu-id="baa64-620">Generic</span></span> |
| <span data-ttu-id="baa64-621">**Attribut**</span><span class="sxs-lookup"><span data-stu-id="baa64-621">**Attributes**</span></span>              | <span data-ttu-id="baa64-622">Saknas</span><span class="sxs-lookup"><span data-stu-id="baa64-622">N/A</span></span>  |
| <span data-ttu-id="baa64-623">**Referenser**</span><span class="sxs-lookup"><span data-stu-id="baa64-623">**References**</span></span>              | <span data-ttu-id="baa64-624">Saknas</span><span class="sxs-lookup"><span data-stu-id="baa64-624">N/A</span></span>  |
| <span data-ttu-id="baa64-625">**Steg**</span><span class="sxs-lookup"><span data-stu-id="baa64-625">**Steps**</span></span> | <p><span data-ttu-id="baa64-626">Om du använder hello Parametersamlingen är SQL hanterar hello indata som ett litteralvärde stället som körbar kod.</span><span class="sxs-lookup"><span data-stu-id="baa64-626">If you use hello Parameters collection, SQL treats hello input is as a literal value rather then as executable code.</span></span> <span data-ttu-id="baa64-627">hello Parametersamlingen kan vara används tooenforce typ och längd begränsningar på indata.</span><span class="sxs-lookup"><span data-stu-id="baa64-627">hello Parameters collection can be used tooenforce type and length constraints on input data.</span></span> <span data-ttu-id="baa64-628">Värden som ligger utanför intervallet för hello utlöser ett undantag.</span><span class="sxs-lookup"><span data-stu-id="baa64-628">Values outside of hello range trigger an exception.</span></span> <span data-ttu-id="baa64-629">Om typen säkert SQL-parametrar används kanske angripare kan tooexecute injektion attacker som är inbäddade i hello ofiltrerad indata.</span><span class="sxs-lookup"><span data-stu-id="baa64-629">If type-safe SQL parameters are not used, attackers might be able tooexecute injection attacks that are embedded in hello unfiltered input.</span></span></p><p><span data-ttu-id="baa64-630">Använd säker typparametrar när konstruera SQL frågar tooavoid SQL injection attacker som kan uppstå med ofiltrerade indata.</span><span class="sxs-lookup"><span data-stu-id="baa64-630">Use type safe parameters when constructing SQL queries tooavoid possible SQL injection attacks that can occur with unfiltered input.</span></span> <span data-ttu-id="baa64-631">Du kan använda säker typparametrar med lagrade procedurer och dynamiska SQL-uttryck.</span><span class="sxs-lookup"><span data-stu-id="baa64-631">You can use type safe parameters with stored procedures and with dynamic SQL statements.</span></span> <span data-ttu-id="baa64-632">Parametrarna behandlas som litterala värden av hello databasen och inte som körbar kod.</span><span class="sxs-lookup"><span data-stu-id="baa64-632">Parameters are treated as literal values by hello database and not as executable code.</span></span> <span data-ttu-id="baa64-633">Parametrar kontrolleras även för typ och längd.</span><span class="sxs-lookup"><span data-stu-id="baa64-633">Parameters are also checked for type and length.</span></span></p>|

### <a name="example"></a><span data-ttu-id="baa64-634">Exempel</span><span class="sxs-lookup"><span data-stu-id="baa64-634">Example</span></span>
<span data-ttu-id="baa64-635">hello följande kod visar hur toouse Skriv säker parametrar med hello SqlParameterCollection när du anropar en lagrad procedur.</span><span class="sxs-lookup"><span data-stu-id="baa64-635">hello following code shows how toouse type safe parameters with hello SqlParameterCollection when calling a stored procedure.</span></span> 

```C#
using System.Data;
using System.Data.SqlClient;

using (SqlConnection connection = new SqlConnection(connectionString))
{ 
DataSet userDataset = new DataSet(); 
SqlDataAdapter myCommand = new SqlDataAdapter(LoginStoredProcedure", connection); 
myCommand.SelectCommand.CommandType = CommandType.StoredProcedure; 
myCommand.SelectCommand.Parameters.Add("@au_id", SqlDbType.VarChar, 11); 
myCommand.SelectCommand.Parameters["@au_id"].Value = SSN.Text; 
myCommand.Fill(userDataset);
}  
```
<span data-ttu-id="baa64-636">I föregående exempel hello, kan inte hello indatavärdet vara längre än 11 tecken.</span><span class="sxs-lookup"><span data-stu-id="baa64-636">In hello preceding code example, hello input value cannot be longer than 11 characters.</span></span> <span data-ttu-id="baa64-637">Om hello data inte följer toohello typ eller längd som anges av parametern hello genereras hello SqlParameter klass ett undantag.</span><span class="sxs-lookup"><span data-stu-id="baa64-637">If hello data does not conform toohello type or length defined by hello parameter, hello SqlParameter class throws an exception.</span></span> 

## <span data-ttu-id="baa64-638"><a id="sql-docdb"></a>Använd innehåller parametrar SQL-frågor för Cosmos DB</span><span class="sxs-lookup"><span data-stu-id="baa64-638"><a id="sql-docdb"></a>Use parametrized SQL queries for Cosmos DB</span></span>

| <span data-ttu-id="baa64-639">Rubrik</span><span class="sxs-lookup"><span data-stu-id="baa64-639">Title</span></span>                   | <span data-ttu-id="baa64-640">Information</span><span class="sxs-lookup"><span data-stu-id="baa64-640">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="baa64-641">**Komponent**</span><span class="sxs-lookup"><span data-stu-id="baa64-641">**Component**</span></span>               | <span data-ttu-id="baa64-642">Azure dokumentet DB</span><span class="sxs-lookup"><span data-stu-id="baa64-642">Azure Document DB</span></span> | 
| <span data-ttu-id="baa64-643">**SDL fas**</span><span class="sxs-lookup"><span data-stu-id="baa64-643">**SDL Phase**</span></span>               | <span data-ttu-id="baa64-644">Utveckla</span><span class="sxs-lookup"><span data-stu-id="baa64-644">Build</span></span> |  
| <span data-ttu-id="baa64-645">**Tillämpliga tekniker**</span><span class="sxs-lookup"><span data-stu-id="baa64-645">**Applicable Technologies**</span></span> | <span data-ttu-id="baa64-646">Generisk</span><span class="sxs-lookup"><span data-stu-id="baa64-646">Generic</span></span> |
| <span data-ttu-id="baa64-647">**Attribut**</span><span class="sxs-lookup"><span data-stu-id="baa64-647">**Attributes**</span></span>              | <span data-ttu-id="baa64-648">Saknas</span><span class="sxs-lookup"><span data-stu-id="baa64-648">N/A</span></span>  |
| <span data-ttu-id="baa64-649">**Referenser**</span><span class="sxs-lookup"><span data-stu-id="baa64-649">**References**</span></span>              | [<span data-ttu-id="baa64-650">Om SQL-Parameterisering i DocumentDB</span><span class="sxs-lookup"><span data-stu-id="baa64-650">Announcing SQL Parameterization in DocumentDB</span></span>](https://azure.microsoft.com/blog/announcing-sql-parameterization-in-documentdb/) |
| <span data-ttu-id="baa64-651">**Steg**</span><span class="sxs-lookup"><span data-stu-id="baa64-651">**Steps**</span></span> | <span data-ttu-id="baa64-652">DocumentDB stöder bara skrivskyddade frågor, är SQL injection fortfarande möjligt om frågor skapas genom att sammanbinda indata från användaren.</span><span class="sxs-lookup"><span data-stu-id="baa64-652">Although DocumentDB only supports read-only queries, SQL injection is still possible if queries are constructed by concatenating with user input.</span></span> <span data-ttu-id="baa64-653">Det är möjligt för användaren toogain åtkomst toodata inte får komma åt inom hello samma samling genom att utforma skadliga SQL-frågor.</span><span class="sxs-lookup"><span data-stu-id="baa64-653">It might be possible for a user toogain access toodata they shouldn’t be accessing within hello same collection by crafting malicious SQL queries.</span></span> <span data-ttu-id="baa64-654">Använd parametriserade SQL-frågor om frågor baserat på indata från användaren.</span><span class="sxs-lookup"><span data-stu-id="baa64-654">Use parameterized SQL queries if queries are constructed based on user input.</span></span> |

## <span data-ttu-id="baa64-655"><a id="schema-binding"></a>WCF-indata verifiering via schemabindning</span><span class="sxs-lookup"><span data-stu-id="baa64-655"><a id="schema-binding"></a>WCF Input validation through Schema binding</span></span>

| <span data-ttu-id="baa64-656">Rubrik</span><span class="sxs-lookup"><span data-stu-id="baa64-656">Title</span></span>                   | <span data-ttu-id="baa64-657">Information</span><span class="sxs-lookup"><span data-stu-id="baa64-657">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="baa64-658">**Komponent**</span><span class="sxs-lookup"><span data-stu-id="baa64-658">**Component**</span></span>               | <span data-ttu-id="baa64-659">WCF</span><span class="sxs-lookup"><span data-stu-id="baa64-659">WCF</span></span> | 
| <span data-ttu-id="baa64-660">**SDL fas**</span><span class="sxs-lookup"><span data-stu-id="baa64-660">**SDL Phase**</span></span>               | <span data-ttu-id="baa64-661">Utveckla</span><span class="sxs-lookup"><span data-stu-id="baa64-661">Build</span></span> |  
| <span data-ttu-id="baa64-662">**Tillämpliga tekniker**</span><span class="sxs-lookup"><span data-stu-id="baa64-662">**Applicable Technologies**</span></span> | <span data-ttu-id="baa64-663">Generisk NET Framework 3</span><span class="sxs-lookup"><span data-stu-id="baa64-663">Generic, NET Framework 3</span></span> |
| <span data-ttu-id="baa64-664">**Attribut**</span><span class="sxs-lookup"><span data-stu-id="baa64-664">**Attributes**</span></span>              | <span data-ttu-id="baa64-665">Saknas</span><span class="sxs-lookup"><span data-stu-id="baa64-665">N/A</span></span>  |
| <span data-ttu-id="baa64-666">**Referenser**</span><span class="sxs-lookup"><span data-stu-id="baa64-666">**References**</span></span>              | [<span data-ttu-id="baa64-667">MSDN</span><span class="sxs-lookup"><span data-stu-id="baa64-667">MSDN</span></span>](https://msdn.microsoft.com/library/ff647820.aspx) |
| <span data-ttu-id="baa64-668">**Steg**</span><span class="sxs-lookup"><span data-stu-id="baa64-668">**Steps**</span></span> | <p><span data-ttu-id="baa64-669">Brist på verifiering leder injection toodifferent typen av attacker.</span><span class="sxs-lookup"><span data-stu-id="baa64-669">Lack of validation leads toodifferent type injection attacks.</span></span></p><p><span data-ttu-id="baa64-670">Meddelandevalidering representerar en försvarslinje i hello skydd av WCF-program.</span><span class="sxs-lookup"><span data-stu-id="baa64-670">Message validation represents one line of defense in hello protection of your WCF application.</span></span> <span data-ttu-id="baa64-671">Med den här metoden kan du validera meddelanden med scheman tooprotect WCF-tjänståtgärder mot angrepp av en obehörig klient.</span><span class="sxs-lookup"><span data-stu-id="baa64-671">With this approach, you validate messages using schemas tooprotect WCF service operations from attack by a malicious client.</span></span> <span data-ttu-id="baa64-672">Validera alla meddelanden som tagits emot av hello klient tooprotect hello klient mot angrepp av skadlig service.</span><span class="sxs-lookup"><span data-stu-id="baa64-672">Validate all messages received by hello client tooprotect hello client from attack by a malicious service.</span></span> <span data-ttu-id="baa64-673">Meddelandevalidering gör det möjligt toovalidate meddelanden när aktiviteter kan förbruka meddelandet avtal eller datakontrakt som inte kan göras med Parametervalidering.</span><span class="sxs-lookup"><span data-stu-id="baa64-673">Message validation makes it possible toovalidate messages when operations consume message contracts or data contracts, which cannot be done using parameter validation.</span></span> <span data-ttu-id="baa64-674">Meddelandevalidering kan toocreate valideringslogik inuti scheman, vilket ger bättre flexibilitet och minska tid.</span><span class="sxs-lookup"><span data-stu-id="baa64-674">Message validation allows you toocreate validation logic inside schemas, thereby providing more flexibility and reducing development time.</span></span> <span data-ttu-id="baa64-675">Scheman kan återanvändas i olika program i hello organisation, skapa normer för data representation.</span><span class="sxs-lookup"><span data-stu-id="baa64-675">Schemas can be reused across different applications inside hello organization, creating standards for data representation.</span></span> <span data-ttu-id="baa64-676">Dessutom tillåter meddelandevalidering du tooprotect åtgärder när de använder mer komplexa datatyper som involverar kontrakt som representerar affärslogik.</span><span class="sxs-lookup"><span data-stu-id="baa64-676">Additionally, message validation allows you tooprotect operations when they consume more complex data types involving contracts representing business logic.</span></span></p><p><span data-ttu-id="baa64-677">tooperform meddelandevalidering först skapar du ett schema som representerar hello åtgärder för din tjänst och hello datatyper som används av dessa åtgärder.</span><span class="sxs-lookup"><span data-stu-id="baa64-677">tooperform message validation, you first build a schema that represents hello operations of your service and hello data types consumed by those operations.</span></span> <span data-ttu-id="baa64-678">Sedan kan du skapa en .NET-klass som implementerar en anpassad klient meddelandet inspector och anpassade dispatcher meddelande inspector toovalidate hello meddelanden skickas/tas emot från hello-tjänsten.</span><span class="sxs-lookup"><span data-stu-id="baa64-678">You then create a .NET class that implements a custom client message inspector and custom dispatcher message inspector toovalidate hello messages sent/received to/from hello service.</span></span> <span data-ttu-id="baa64-679">Därefter kan du implementera en anpassad endpoint beteende tooenable meddelande verifiering på både hello klient- och hello.</span><span class="sxs-lookup"><span data-stu-id="baa64-679">Next, you implement a custom endpoint behavior tooenable message validation on both hello client and hello service.</span></span> <span data-ttu-id="baa64-680">Slutligen kan du implementera anpassade konfigurationselementet på hello-klass tooexpose hello utökad anpassade slutpunkt i hello konfigurationsfilen för hello tjänst eller hello klienten ”</span><span class="sxs-lookup"><span data-stu-id="baa64-680">Finally, you implement a custom configuration element on hello class that allows you tooexpose hello extended custom endpoint behavior in hello configuration file of hello service or hello client"</span></span></p>|

## <span data-ttu-id="baa64-681"><a id="parameters"></a>WCF - indata verifiering via parametern kontrollanter</span><span class="sxs-lookup"><span data-stu-id="baa64-681"><a id="parameters"></a>WCF- Input validation through Parameter Inspectors</span></span>

| <span data-ttu-id="baa64-682">Rubrik</span><span class="sxs-lookup"><span data-stu-id="baa64-682">Title</span></span>                   | <span data-ttu-id="baa64-683">Information</span><span class="sxs-lookup"><span data-stu-id="baa64-683">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="baa64-684">**Komponent**</span><span class="sxs-lookup"><span data-stu-id="baa64-684">**Component**</span></span>               | <span data-ttu-id="baa64-685">WCF</span><span class="sxs-lookup"><span data-stu-id="baa64-685">WCF</span></span> | 
| <span data-ttu-id="baa64-686">**SDL fas**</span><span class="sxs-lookup"><span data-stu-id="baa64-686">**SDL Phase**</span></span>               | <span data-ttu-id="baa64-687">Utveckla</span><span class="sxs-lookup"><span data-stu-id="baa64-687">Build</span></span> |  
| <span data-ttu-id="baa64-688">**Tillämpliga tekniker**</span><span class="sxs-lookup"><span data-stu-id="baa64-688">**Applicable Technologies**</span></span> | <span data-ttu-id="baa64-689">Generisk NET Framework 3</span><span class="sxs-lookup"><span data-stu-id="baa64-689">Generic, NET Framework 3</span></span> |
| <span data-ttu-id="baa64-690">**Attribut**</span><span class="sxs-lookup"><span data-stu-id="baa64-690">**Attributes**</span></span>              | <span data-ttu-id="baa64-691">Saknas</span><span class="sxs-lookup"><span data-stu-id="baa64-691">N/A</span></span>  |
| <span data-ttu-id="baa64-692">**Referenser**</span><span class="sxs-lookup"><span data-stu-id="baa64-692">**References**</span></span>              | [<span data-ttu-id="baa64-693">MSDN</span><span class="sxs-lookup"><span data-stu-id="baa64-693">MSDN</span></span>](https://msdn.microsoft.com/library/ff647875.aspx) |
| <span data-ttu-id="baa64-694">**Steg**</span><span class="sxs-lookup"><span data-stu-id="baa64-694">**Steps**</span></span> | <p><span data-ttu-id="baa64-695">Indata och dataverifiering representerar en viktig försvarslinje i hello skydd av WCF-program.</span><span class="sxs-lookup"><span data-stu-id="baa64-695">Input and data validation represents one important line of defense in hello protection of your WCF application.</span></span> <span data-ttu-id="baa64-696">Du bör verifiera alla parametrar som visas i WCF operations tooprotect hello-tjänsten från angrepp av en obehörig klient.</span><span class="sxs-lookup"><span data-stu-id="baa64-696">You should validate all parameters exposed in WCF service operations tooprotect hello service from attack by a malicious client.</span></span> <span data-ttu-id="baa64-697">Däremot bör du också verifiera alla returvärden som tagits emot av hello klient tooprotect hello klient mot angrepp av skadlig service</span><span class="sxs-lookup"><span data-stu-id="baa64-697">Conversely, you should also validate all return values received by hello client tooprotect hello client from attack by a malicious service</span></span></p><p><span data-ttu-id="baa64-698">WCF erbjuder olika punkter som tillåter toocustomize hello WCF runtime beteende genom att skapa anpassade tillägg.</span><span class="sxs-lookup"><span data-stu-id="baa64-698">WCF provides different extensibility points that allow you toocustomize hello WCF runtime behavior by creating custom extensions.</span></span> <span data-ttu-id="baa64-699">Meddelandet kontrollanter och parametern-kontrollanter är två utökningsbarhet mekanismer användas toogain större kontroll över hello data som skickas mellan en klient och en tjänst.</span><span class="sxs-lookup"><span data-stu-id="baa64-699">Message Inspectors and Parameter Inspectors are two extensibility mechanisms used toogain greater control over hello data passing between a client and a service.</span></span> <span data-ttu-id="baa64-700">Du bör använda parametern-kontrollanter för verifiering av indata och använder meddelandet kontrollanter endast när du behöver tooinspect hela hälsningsmeddelande flödar till och från en tjänst.</span><span class="sxs-lookup"><span data-stu-id="baa64-700">You should use parameter inspectors for input validation and use message inspectors only when you need tooinspect hello entire message flowing in and out of a service.</span></span></p><p><span data-ttu-id="baa64-701">tooperform indata verifiering, du skapar en .NET-klass och implementera en anpassad parameter inspector i ordning toovalidate parametrar på åtgärder i din tjänst.</span><span class="sxs-lookup"><span data-stu-id="baa64-701">tooperform input validation, you will build a .NET class and implement a custom parameter inspector in order toovalidate parameters on operations in your service.</span></span> <span data-ttu-id="baa64-702">Du kommer sedan att implementera en anpassad endpoint beteende tooenable validering på både hello klient- och hello.</span><span class="sxs-lookup"><span data-stu-id="baa64-702">You will then implement a custom endpoint behavior tooenable validation on both hello client and hello service.</span></span> <span data-ttu-id="baa64-703">Du kommer slutligen att implementera anpassade konfigurationselementet på hello-klass tooexpose hello utökad anpassade slutpunkt i hello konfigurationsfilen för hello tjänst eller hello-klienten</span><span class="sxs-lookup"><span data-stu-id="baa64-703">Finally, you will implement a custom configuration element on hello class that allows you tooexpose hello extended custom endpoint behavior in hello configuration file of hello service or hello client</span></span></p>|

---
title: "aaaConfigure OS uppdatering schema för Linux-baserat HDInsight - kluster i Azure | Microsoft Docs"
description: "Lär dig hur tooconfigure OS uppdatering schema för Linux-baserat HDInsight-kluster."
services: hdinsight
documentationcenter: 
author: bprakash
manager: asadk
editor: bprakash
ms.assetid: 
ms.service: hdinsight
ms.custom: hdinsightactive
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: big-data
ms.date: 03/21/2017
ms.author: bhanupr
ms.openlocfilehash: 1598d64e594d7e8a68573fc63dd86051a5a9d025
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: sv-SE
ms.lasthandoff: 10/06/2017
---
# <a name="os-patching-for-hdinsight"></a><span data-ttu-id="d2953-103">OS-korrigering för HDInsight</span><span class="sxs-lookup"><span data-stu-id="d2953-103">OS patching for HDInsight</span></span> 
<span data-ttu-id="d2953-104">Som en hanterad tjänst i Hadoop hand HDInsight tar om korrigering hello OS av hello underliggande virtuella datorer som används av HDInsight-kluster.</span><span class="sxs-lookup"><span data-stu-id="d2953-104">As a managed Hadoop service, HDInsight takes care of patching hello OS of hello underlying VMs used by HDInsight clusters.</span></span> <span data-ttu-id="d2953-105">Från och med 1 augusti 2016 har vi ändrat hello gäst OS uppdatering princip för Linux-baserade HDInsight-kluster (version 3.4 eller högre).</span><span class="sxs-lookup"><span data-stu-id="d2953-105">As of August 1, 2016, we have changed hello guest OS patching policy for Linux-based HDInsight clusters (version 3.4 or greater).</span></span> <span data-ttu-id="d2953-106">hello målet hello nya principen är toosignificantly minska hello antalet omstarter på grund av toopatching.</span><span class="sxs-lookup"><span data-stu-id="d2953-106">hello goal of hello new policy is toosignificantly reduce hello number of reboots due toopatching.</span></span> <span data-ttu-id="d2953-107">hello ny princip kommer att fortsätta toopatch virtuella maskiner (VMs) på Linux-kluster varje måndag eller torsdag som börjar vid 12: 00 UTC successiva överskrids över noderna i alla kluster.</span><span class="sxs-lookup"><span data-stu-id="d2953-107">hello new policy will continue toopatch virtual machines (VMs) on Linux clusters every Monday or Thursday starting at 12AM UTC in a staggered fashion across nodes in any given cluster.</span></span> <span data-ttu-id="d2953-108">Alla angivna VM startas dock endast en gång var 30 dagar på grund av tooguest OS-korrigering.</span><span class="sxs-lookup"><span data-stu-id="d2953-108">However, any given VM will only reboot at most once every 30 days due tooguest OS patching.</span></span> <span data-ttu-id="d2953-109">Dessutom sker hello första omstarten för ett nyskapat kluster inte tidigare än 30 dagar från hello skapandedatum för klustret.</span><span class="sxs-lookup"><span data-stu-id="d2953-109">In addition, hello first reboot for a newly created cluster will not happen sooner than 30 days from hello cluster creation date.</span></span> <span data-ttu-id="d2953-110">Korrigeringsfiler börjar gälla när hello virtuella datorer startas om.</span><span class="sxs-lookup"><span data-stu-id="d2953-110">Patches will be effective once hello VMs are rebooted.</span></span>

## <a name="how-tooconfigure-hello-os-patching-schedule-for-linux-based-hdinsight-clusters"></a><span data-ttu-id="d2953-111">Hur tooconfigure hello OS uppdatering schema för Linux-baserade HDInsight-kluster</span><span class="sxs-lookup"><span data-stu-id="d2953-111">How tooconfigure hello OS patching schedule for Linux-based HDInsight clusters</span></span>
<span data-ttu-id="d2953-112">hello virtuella datorer i ett HDInsight-kluster måste toobe startas om ibland så att viktiga säkerhetsuppdateringar kan installeras.</span><span class="sxs-lookup"><span data-stu-id="d2953-112">hello virtual machines in an HDInsight cluster need toobe rebooted occasionally so that important security patches can be installed.</span></span> <span data-ttu-id="d2953-113">Från och med 1 augusti 2016 kan nya Linux-baserat HDInsight-kluster (version 3.4 eller nyare) startas om med hello enligt schema:</span><span class="sxs-lookup"><span data-stu-id="d2953-113">As of August 1, 2016, new Linux-based HDInsight clusters (version 3.4 or greater,) are rebooted using hello following schedule:</span></span>

1. <span data-ttu-id="d2953-114">En virtuell dator i klustret hello kan endast startas korrigeringsfiler som mest en gång i en 30-dagarsperiod.</span><span class="sxs-lookup"><span data-stu-id="d2953-114">A virtual machine in hello cluster can only reboot for patches at most, once within a 30-day period.</span></span>
2. <span data-ttu-id="d2953-115">hello omstart sker början från 12: 00 UTC.</span><span class="sxs-lookup"><span data-stu-id="d2953-115">hello reboot occurs starting at 12AM UTC.</span></span>
3. <span data-ttu-id="d2953-116">hello omstart processen sprids över virtuella datorer i hello kluster så hello klustret fortfarande är tillgänglig under hello omstart.</span><span class="sxs-lookup"><span data-stu-id="d2953-116">hello reboot process is staggered across virtual machines in hello cluster, so hello cluster is still available during hello reboot process.</span></span>
4. <span data-ttu-id="d2953-117">hello första omstarten för ett nyskapat kluster sker inte tidigare än 30 dagar efter skapandedatum för hello-klustret.</span><span class="sxs-lookup"><span data-stu-id="d2953-117">hello first reboot for a newly created cluster will not happen sooner than 30 days after hello cluster creation date.</span></span>

<span data-ttu-id="d2953-118">Med hello skriptåtgärd som beskrivs i den här artikeln kan ändra du hello OS uppdatering schemat på följande sätt:</span><span class="sxs-lookup"><span data-stu-id="d2953-118">Using hello script action described in this article, you can modify hello OS patching schedule as follows:</span></span>
1. <span data-ttu-id="d2953-119">Aktivera eller inaktivera automatiska omstarter</span><span class="sxs-lookup"><span data-stu-id="d2953-119">Enable or disable automatic reboots</span></span>
2. <span data-ttu-id="d2953-120">Ange hello frekvensen av startas om (dagar mellan olika omstarter)</span><span class="sxs-lookup"><span data-stu-id="d2953-120">Set hello frequency of reboots (days between reboots)</span></span>
3. <span data-ttu-id="d2953-121">Ange hello veckodag hello när en omstart sker</span><span class="sxs-lookup"><span data-stu-id="d2953-121">Set hello day of hello week when a reboot occurs</span></span>

> [!NOTE]
> <span data-ttu-id="d2953-122">Den här skriptåtgärden fungerar bara med Linux-baserat HDInsight-kluster som skapas efter den 1 augusti 2016.</span><span class="sxs-lookup"><span data-stu-id="d2953-122">This script action will only work with Linux-based HDInsight clusters created after August 1st, 2016.</span></span> <span data-ttu-id="d2953-123">Korrigeringsfiler börjar gälla när virtuella datorer startas om.</span><span class="sxs-lookup"><span data-stu-id="d2953-123">Patches will be effective only when VMs are rebooted.</span></span> 
>

## <a name="how-toouse-hello-script"></a><span data-ttu-id="d2953-124">Hur toouse hello skript</span><span class="sxs-lookup"><span data-stu-id="d2953-124">How toouse hello script</span></span> 

<span data-ttu-id="d2953-125">När det här kräver hello följande information:</span><span class="sxs-lookup"><span data-stu-id="d2953-125">When using this script requires hello following information:</span></span>
1. <span data-ttu-id="d2953-126">Hej skriptets placering: https://hdiconfigactions.blob.core.windows.net/linuxospatchingrebootconfigv01/os-patching-reboot-config.sh.  HDInsight använder den här URI toofind och kör hello skriptet på alla hello virtuella datorer i hello kluster.</span><span class="sxs-lookup"><span data-stu-id="d2953-126">hello script location: https://hdiconfigactions.blob.core.windows.net/linuxospatchingrebootconfigv01/os-patching-reboot-config.sh.  HDInsight uses this URI toofind and run hello script on all hello virtual machines in hello cluster.</span></span>
  
2. <span data-ttu-id="d2953-127">Hej klustret nodtyper som hello skript används: headnode, workernode, zookeeper.</span><span class="sxs-lookup"><span data-stu-id="d2953-127">hello cluster node types that hello script is applied to: headnode, workernode, zookeeper.</span></span> <span data-ttu-id="d2953-128">Det här skriptet måste vara tillämpade tooall nodtyper i hello kluster.</span><span class="sxs-lookup"><span data-stu-id="d2953-128">This script must be applied tooall node types in hello cluster.</span></span> <span data-ttu-id="d2953-129">Om den inte används tooa nodtyp kan hello virtuella fortsätter datorer för att nodtypen toouse hello tidigare uppdatering schemat.</span><span class="sxs-lookup"><span data-stu-id="d2953-129">If it is not applied tooa node type, then hello virtual machines for that node type will continue toouse hello previous patching schedule.</span></span>


3.  <span data-ttu-id="d2953-130">Parameter: Det här skriptet tar tre numeriska parametrar:</span><span class="sxs-lookup"><span data-stu-id="d2953-130">Parameter: This script accepts three numeric parameters:</span></span>

    | <span data-ttu-id="d2953-131">Parameter</span><span class="sxs-lookup"><span data-stu-id="d2953-131">Parameter</span></span> | <span data-ttu-id="d2953-132">Definition</span><span class="sxs-lookup"><span data-stu-id="d2953-132">Definition</span></span> |
    | --- | --- |
    | <span data-ttu-id="d2953-133">Aktivera/inaktivera automatiska omstarter</span><span class="sxs-lookup"><span data-stu-id="d2953-133">Enable/disable automatic reboots</span></span> |<span data-ttu-id="d2953-134">0 eller 1.</span><span class="sxs-lookup"><span data-stu-id="d2953-134">0 or 1.</span></span> <span data-ttu-id="d2953-135">Värdet 0 inaktiverar automatiska omstarter när 1 aktiverar automatiska omstarter.</span><span class="sxs-lookup"><span data-stu-id="d2953-135">A value of 0 disables automatic reboots while 1 enables automatic reboots.</span></span> |
    | <span data-ttu-id="d2953-136">frekvens</span><span class="sxs-lookup"><span data-stu-id="d2953-136">Frequency</span></span> |<span data-ttu-id="d2953-137">7 too90 (sammanlagt).</span><span class="sxs-lookup"><span data-stu-id="d2953-137">7 too90 (inclusive).</span></span> <span data-ttu-id="d2953-138">hello antal dagar toowait före omstart hello virtuella datorer för korrigeringsprogram som kräver en omstart.</span><span class="sxs-lookup"><span data-stu-id="d2953-138">hello number of days toowait before rebooting hello virtual machines for patches that require a reboot.</span></span> |
    | <span data-ttu-id="d2953-139">Dag i veckan</span><span class="sxs-lookup"><span data-stu-id="d2953-139">Day of week</span></span> |<span data-ttu-id="d2953-140">1 too7 (sammanlagt).</span><span class="sxs-lookup"><span data-stu-id="d2953-140">1 too7 (inclusive).</span></span> <span data-ttu-id="d2953-141">Värdet 1 anger hello omstart sker på en måndag och 7 visar en Sunday.For exempelvis med parametrar 1 60 2 leder till att automatiskt startar om var 60: e dag (mest) tisdagen.</span><span class="sxs-lookup"><span data-stu-id="d2953-141">A value of 1 indicates hello reboot should occur on a Monday, and 7 indicates a Sunday.For example, using parameters of 1 60 2 results in automatic reboots every 60 days (at most) on Tuesday.</span></span> |
    | <span data-ttu-id="d2953-142">Beständiga</span><span class="sxs-lookup"><span data-stu-id="d2953-142">Persistence</span></span> |<span data-ttu-id="d2953-143">När du använder ett befintligt kluster för skriptet åtgärd tooan, kan du markera hello skript som bestående.</span><span class="sxs-lookup"><span data-stu-id="d2953-143">When applying a script action tooan existing cluster, you can mark hello script as persisted.</span></span> <span data-ttu-id="d2953-144">Beständiga skript används när nya workernodes läggs toohello klustret via skalning åtgärder.</span><span class="sxs-lookup"><span data-stu-id="d2953-144">Persisted scripts are applied when new workernodes are added toohello cluster through scaling operations.</span></span> |

> [!NOTE]
> <span data-ttu-id="d2953-145">Du måste markera det här skriptet som beständiga när du använder tooan befintligt kluster.</span><span class="sxs-lookup"><span data-stu-id="d2953-145">You must mark this script as persisted when applying tooan existing cluster.</span></span> <span data-ttu-id="d2953-146">Annars använder alla nya noder som skapats via skalning operations hello standard korrigering schema.</span><span class="sxs-lookup"><span data-stu-id="d2953-146">Otherwise, any new nodes created through scaling      operations will use hello default patching schedule.</span></span>
<span data-ttu-id="d2953-147">Om du tillämpar hello skriptet som en del av hello klusterskapandeprocessen kan sparas det automatiskt.</span><span class="sxs-lookup"><span data-stu-id="d2953-147">If you apply hello script as part of hello cluster creation process, it is persisted automatically.</span></span>
>

## <a name="next-steps"></a><span data-ttu-id="d2953-148">Nästa steg</span><span class="sxs-lookup"><span data-stu-id="d2953-148">Next steps</span></span>

<span data-ttu-id="d2953-149">Mer specifika anvisningar för med hello skriptåtgärder finns i följande avsnitt i hello hello [anpassa Linuz-baserade HDInsight-kluster med skriptåtgärder](hdinsight-hadoop-customize-cluster-linux.md):</span><span class="sxs-lookup"><span data-stu-id="d2953-149">For specific steps on using hello script action, see hello following sections in hello [Customize Linuz-based HDInsight clusters using script action](hdinsight-hadoop-customize-cluster-linux.md):</span></span>

* [<span data-ttu-id="d2953-150">Använd en skriptåtgärd när klustret skapas</span><span class="sxs-lookup"><span data-stu-id="d2953-150">Use a script action during cluster creation</span></span>](hdinsight-hadoop-customize-cluster-linux.md#use-a-script-action-during-cluster-creation)
* [<span data-ttu-id="d2953-151">Använda ett skript åtgärd tooa kör kluster</span><span class="sxs-lookup"><span data-stu-id="d2953-151">Apply a script action tooa running cluster</span></span>](hdinsight-hadoop-customize-cluster-linux.md#apply-a-script-action-to-a-running-cluster)

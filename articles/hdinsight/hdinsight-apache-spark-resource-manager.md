---
title: "Hantera resurser för Apache Spark-kluster i Azure HDInsight | Microsoft Docs"
description: "Lär dig hur du använder hantera resurser för Spark-kluster i Azure HDInsight för bättre prestanda."
services: hdinsight
documentationcenter: 
author: nitinme
manager: jhubbard
editor: cgronlun
tags: azure-portal
ms.assetid: 9da7d4e3-458e-4296-a628-77b14643f7e4
ms.service: hdinsight
ms.custom: hdinsightactive
ms.workload: big-data
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 07/21/2017
ms.author: nitinme
ms.openlocfilehash: 952fa15162a40bccb3f8c7a88508556757ca6675
ms.sourcegitcommit: 02e69c4a9d17645633357fe3d46677c2ff22c85a
ms.translationtype: MT
ms.contentlocale: sv-SE
ms.lasthandoff: 08/03/2017
---
# <a name="manage-resources-for-apache-spark-cluster-on-azure-hdinsight"></a><span data-ttu-id="32214-103">Hantera resurser för Apache Spark-kluster i Azure HDInsight</span><span class="sxs-lookup"><span data-stu-id="32214-103">Manage resources for Apache Spark cluster on Azure HDInsight</span></span> 

<span data-ttu-id="32214-104">I den här artikeln du lära dig hur du kommer åt gränssnitt som Ambari UI, YARN-Användargränssnittet och servern Spark historik som är associerade med Spark-kluster.</span><span class="sxs-lookup"><span data-stu-id="32214-104">In this article you will learn how to access the interfaces like Ambari UI, YARN UI, and the Spark History Server associated with your Spark cluster.</span></span> <span data-ttu-id="32214-105">Du kommer även information om hur du ställer in klusterkonfigurationen för optimala prestanda.</span><span class="sxs-lookup"><span data-stu-id="32214-105">You will also learn about how to tune the cluster configuration for optimal performance.</span></span>

<span data-ttu-id="32214-106">**Krav:**</span><span class="sxs-lookup"><span data-stu-id="32214-106">**Prerequisites:**</span></span>

<span data-ttu-id="32214-107">Du måste ha följande:</span><span class="sxs-lookup"><span data-stu-id="32214-107">You must have the following:</span></span>

* <span data-ttu-id="32214-108">En Azure-prenumeration.</span><span class="sxs-lookup"><span data-stu-id="32214-108">An Azure subscription.</span></span> <span data-ttu-id="32214-109">Se [Hämta en kostnadsfri utvärderingsversion av Azure](https://azure.microsoft.com/documentation/videos/get-azure-free-trial-for-testing-hadoop-in-hdinsight/).</span><span class="sxs-lookup"><span data-stu-id="32214-109">See [Get Azure free trial](https://azure.microsoft.com/documentation/videos/get-azure-free-trial-for-testing-hadoop-in-hdinsight/).</span></span>
* <span data-ttu-id="32214-110">Ett Apache Spark-kluster i HDInsight.</span><span class="sxs-lookup"><span data-stu-id="32214-110">An Apache Spark cluster on HDInsight.</span></span> <span data-ttu-id="32214-111">Instruktioner finns i [skapa Apache Spark-kluster i Azure HDInsight](hdinsight-apache-spark-jupyter-spark-sql.md).</span><span class="sxs-lookup"><span data-stu-id="32214-111">For instructions, see [Create Apache Spark clusters in Azure HDInsight](hdinsight-apache-spark-jupyter-spark-sql.md).</span></span>

## <a name="how-do-i-launch-the-ambari-web-ui"></a><span data-ttu-id="32214-112">Hur jag för att starta Ambari-Webbgränssnittet?</span><span class="sxs-lookup"><span data-stu-id="32214-112">How do I launch the Ambari Web UI?</span></span>
1. <span data-ttu-id="32214-113">På startsidan i [Azure-portalen](https://portal.azure.com/) klickar du på panelen för ditt Spark-kluster (om du har fäst det på startsidan).</span><span class="sxs-lookup"><span data-stu-id="32214-113">From the [Azure Portal](https://portal.azure.com/), from the startboard, click the tile for your Spark cluster (if you pinned it to the startboard).</span></span> <span data-ttu-id="32214-114">Du kan också navigera till ditt kluster under **Bläddra bland alla** > **HDInsight-kluster**.</span><span class="sxs-lookup"><span data-stu-id="32214-114">You can also navigate to your cluster under **Browse All** > **HDInsight Clusters**.</span></span>
2. <span data-ttu-id="32214-115">Klicka på bladet Spark-kluster **instrumentpanelen**.</span><span class="sxs-lookup"><span data-stu-id="32214-115">From the Spark cluster blade, click **Dashboard**.</span></span> <span data-ttu-id="32214-116">När du uppmanas ange administratörsautentiseringsuppgifterna för Spark-klustret.</span><span class="sxs-lookup"><span data-stu-id="32214-116">When prompted, enter the admin credentials for the Spark cluster.</span></span>

    <span data-ttu-id="32214-117">![Starta Ambari](./media/hdinsight-apache-spark-resource-manager/hdinsight-launch-cluster-dashboard.png "starta hanteraren för filserverresurser")</span><span class="sxs-lookup"><span data-stu-id="32214-117">![Launch Ambari](./media/hdinsight-apache-spark-resource-manager/hdinsight-launch-cluster-dashboard.png "Start Resource Manager")</span></span>
3. <span data-ttu-id="32214-118">Detta ska starta Ambari-Webbgränssnittet enligt nedan.</span><span class="sxs-lookup"><span data-stu-id="32214-118">This should launch the Ambari Web UI, as shown below.</span></span>

    <span data-ttu-id="32214-119">![Ambari-webbgränssnittet](./media/hdinsight-apache-spark-resource-manager/ambari-web-ui.png "Ambari-webbgränssnittet")</span><span class="sxs-lookup"><span data-stu-id="32214-119">![Ambari Web UI](./media/hdinsight-apache-spark-resource-manager/ambari-web-ui.png "Ambari Web UI")</span></span>   

## <a name="how-do-i-launch-the-spark-history-server"></a><span data-ttu-id="32214-120">Hur jag för att starta servern Spark historik?</span><span class="sxs-lookup"><span data-stu-id="32214-120">How do I launch the Spark History Server?</span></span>
1. <span data-ttu-id="32214-121">På startsidan i [Azure-portalen](https://portal.azure.com/) klickar du på panelen för ditt Spark-kluster (om du har fäst det på startsidan).</span><span class="sxs-lookup"><span data-stu-id="32214-121">From the [Azure Portal](https://portal.azure.com/), from the startboard, click the tile for your Spark cluster (if you pinned it to the startboard).</span></span>
2. <span data-ttu-id="32214-122">I klusterbladet under **snabblänkar**, klickar du på **Klusterinstrumentpanel**.</span><span class="sxs-lookup"><span data-stu-id="32214-122">From the cluster blade, under **Quick Links**, click **Cluster Dashboard**.</span></span> <span data-ttu-id="32214-123">I den **Klusterinstrumentpanel** bladet, klickar du på **Spark historik Server**.</span><span class="sxs-lookup"><span data-stu-id="32214-123">In the **Cluster Dashboard** blade, click **Spark History Server**.</span></span>

    <span data-ttu-id="32214-124">![Väck historik Server](./media/hdinsight-apache-spark-resource-manager/launch-history-server.png "Väck historik Server")</span><span class="sxs-lookup"><span data-stu-id="32214-124">![Spark History Server](./media/hdinsight-apache-spark-resource-manager/launch-history-server.png "Spark History Server")</span></span>

    <span data-ttu-id="32214-125">När du uppmanas ange administratörsautentiseringsuppgifterna för Spark-klustret.</span><span class="sxs-lookup"><span data-stu-id="32214-125">When prompted, enter the admin credentials for the Spark cluster.</span></span>

## <a name="how-do-i-launch-the-yarn-ui"></a><span data-ttu-id="32214-126">Hur jag för att starta Användargränssnittet för Yarn?</span><span class="sxs-lookup"><span data-stu-id="32214-126">How do I launch the Yarn UI?</span></span>
<span data-ttu-id="32214-127">Du kan använda YARN-Användargränssnittet för att övervaka program som körs i Spark-klustret.</span><span class="sxs-lookup"><span data-stu-id="32214-127">You can use the YARN UI to monitor applications that are currently running on the Spark cluster.</span></span>

1. <span data-ttu-id="32214-128">Klusterbladet klickar du på **Klusterinstrumentpanel**, och klicka sedan på **YARN**.</span><span class="sxs-lookup"><span data-stu-id="32214-128">From the cluster blade, click **Cluster Dashboard**, and then click **YARN**.</span></span>

    ![Starta YARN-Användargränssnittet](./media/hdinsight-apache-spark-resource-manager/launch-yarn-ui.png)

   > [!TIP]
   > <span data-ttu-id="32214-130">Alternativt kan du starta YARN-Användargränssnittet från Ambari UI.</span><span class="sxs-lookup"><span data-stu-id="32214-130">Alternatively, you can also launch the YARN UI from the Ambari UI.</span></span> <span data-ttu-id="32214-131">Om du vill starta Ambari UI, kluster-bladet klickar du på **Klusterinstrumentpanel**, och klicka sedan på **instrumentpanelen för HDInsight-klustret**.</span><span class="sxs-lookup"><span data-stu-id="32214-131">To launch the Ambari UI, from the cluster blade, click **Cluster Dashboard**, and then click **HDInsight Cluster Dashboard**.</span></span> <span data-ttu-id="32214-132">Ambari UI, klicka på **YARN**, klickar du på **snabblänkar**, klicka på active resource manager och klicka sedan på **ResourceManager UI**.</span><span class="sxs-lookup"><span data-stu-id="32214-132">From the Ambari UI, click **YARN**, click **Quick Links**, click the active resource manager, and then click **ResourceManager UI**.</span></span>
   >
   >

## <a name="what-is-the-optimum-cluster-configuration-to-run-spark-applications"></a><span data-ttu-id="32214-133">Vad är optimal klusterkonfigurationen att köra Spark-program?</span><span class="sxs-lookup"><span data-stu-id="32214-133">What is the optimum cluster configuration to run Spark applications?</span></span>
<span data-ttu-id="32214-134">De tre viktiga parametrar som kan användas för konfiguration av Spark beroende på kraven för application är `spark.executor.instances`, `spark.executor.cores`, och `spark.executor.memory`.</span><span class="sxs-lookup"><span data-stu-id="32214-134">The three key parameters that can be used for Spark configuration depending on application requirements are `spark.executor.instances`, `spark.executor.cores`, and `spark.executor.memory`.</span></span> <span data-ttu-id="32214-135">En utförare är en process startas för ett Spark-program.</span><span class="sxs-lookup"><span data-stu-id="32214-135">An Executor is a process launched for a Spark application.</span></span> <span data-ttu-id="32214-136">Körs på arbetsnoden och ansvarar för att utföra uppgifter för programmet.</span><span class="sxs-lookup"><span data-stu-id="32214-136">It runs on the worker node and is responsible to carry out the tasks for the application.</span></span> <span data-ttu-id="32214-137">Standardantalet executors och utföraren storleken för varje kluster beräknas baserat på antalet arbetarnoder och nodstorlek worker.</span><span class="sxs-lookup"><span data-stu-id="32214-137">The default number of executors and the executor sizes for each cluster is calculated based on the number of worker nodes and the worker node size.</span></span> <span data-ttu-id="32214-138">Dessa lagras i `spark-defaults.conf` head noderna i klustret.</span><span class="sxs-lookup"><span data-stu-id="32214-138">These are stored in `spark-defaults.conf` on the cluster head nodes.</span></span>

<span data-ttu-id="32214-139">De tre konfigurationsparametrarna kan konfigureras på klusternivå (för alla program som körs på klustret) eller kan anges för varje enskilt program.</span><span class="sxs-lookup"><span data-stu-id="32214-139">The three configuration parameters can be configured at the cluster level (for all applications that run on the cluster) or can be specified for each individual application as well.</span></span>

### <a name="change-the-parameters-using-ambari-ui"></a><span data-ttu-id="32214-140">Ändra parametrarna med Ambari UI</span><span class="sxs-lookup"><span data-stu-id="32214-140">Change the parameters using Ambari UI</span></span>
1. <span data-ttu-id="32214-141">Ambari UI klickar du på **Spark**, klickar du på **konfigurationerna**, och expandera sedan **anpassad spark-standarder**.</span><span class="sxs-lookup"><span data-stu-id="32214-141">From the Ambari UI click **Spark**, click **Configs**, and then expand **Custom spark-defaults**.</span></span>

    ![Ange parametrar med Ambari](./media/hdinsight-apache-spark-resource-manager/set-parameters-using-ambari.png)
2. <span data-ttu-id="32214-143">Standardvärdena är bra att ha 4 Spark program körs samtidigt på klustret.</span><span class="sxs-lookup"><span data-stu-id="32214-143">The default values are good to have 4 Spark applications run concurrently on the cluster.</span></span> <span data-ttu-id="32214-144">Du kan ändringar värdena från användargränssnittet, enligt nedan.</span><span class="sxs-lookup"><span data-stu-id="32214-144">You can changes these values from the user interface, as shown below.</span></span>

    ![Ange parametrar med Ambari](./media/hdinsight-apache-spark-resource-manager/set-executor-parameters.png)
3. <span data-ttu-id="32214-146">Klicka på **spara** att spara ändringar i konfigurationen.</span><span class="sxs-lookup"><span data-stu-id="32214-146">Click **Save** to save the configuration changes.</span></span> <span data-ttu-id="32214-147">Längst upp på sidan uppmanas du att starta om alla påverkade tjänster.</span><span class="sxs-lookup"><span data-stu-id="32214-147">At the top of the page, you will be prompted to restart all the affected services.</span></span> <span data-ttu-id="32214-148">Klicka på **starta om**.</span><span class="sxs-lookup"><span data-stu-id="32214-148">Click **Restart**.</span></span>

    ![Starta om tjänsterna](./media/hdinsight-apache-spark-resource-manager/restart-services.png)

### <a name="change-the-parameters-for-an-application-running-in-jupyter-notebook"></a><span data-ttu-id="32214-150">Ändra parametrarna för ett program som körs i Jupyter-anteckningsbok</span><span class="sxs-lookup"><span data-stu-id="32214-150">Change the parameters for an application running in Jupyter notebook</span></span>
<span data-ttu-id="32214-151">Du kan använda för program som körs i Jupyter-anteckningsbok den `%%configure` Magiskt tal för att göra ändringar i konfigurationen.</span><span class="sxs-lookup"><span data-stu-id="32214-151">For applications running in the Jupyter notebook, you can use the `%%configure` magic to make the configuration changes.</span></span> <span data-ttu-id="32214-152">Vi rekommenderar måste du göra dessa ändringar i början av programmet innan du kör din första kodcellen.</span><span class="sxs-lookup"><span data-stu-id="32214-152">Ideally, you must make such changes at the beginning of the application, before you run your first code cell.</span></span> <span data-ttu-id="32214-153">Detta säkerställer att konfigurationen tillämpas Livius-sessionen när den skapas.</span><span class="sxs-lookup"><span data-stu-id="32214-153">This ensures that the configuration is applied to the Livy session, when it gets created.</span></span> <span data-ttu-id="32214-154">Om du vill ändra konfigurationen senare i programmet, måste du använda den `-f` parameter.</span><span class="sxs-lookup"><span data-stu-id="32214-154">If you want to change the configuration at a later stage in the application, you must use the `-f` parameter.</span></span> <span data-ttu-id="32214-155">Dock av du gör det försvinner alla förlopp i programmet.</span><span class="sxs-lookup"><span data-stu-id="32214-155">However, by doing so all progress in the application will be lost.</span></span>

<span data-ttu-id="32214-156">Kodfragmentet nedan visar hur du ändrar konfigurationen för ett program som körs i Jupyter.</span><span class="sxs-lookup"><span data-stu-id="32214-156">The snippet below shows how to change the configuration for an application running in Jupyter.</span></span>

    %%configure
    {"executorMemory": "3072M", "executorCores": 4, "numExecutors":10}

<span data-ttu-id="32214-157">Konfigurationsparametrar som måste överföras i som en JSON-sträng och måste vara på nästa rad efter magic, som visas i Exempelkolumnen.</span><span class="sxs-lookup"><span data-stu-id="32214-157">Configuration parameters must be passed in as a JSON string and must be on the next line after the magic, as shown in the example column.</span></span>

### <a name="change-the-parameters-for-an-application-submitted-using-spark-submit"></a><span data-ttu-id="32214-158">Ändra parametrarna för ett program som skickas med spark-skicka</span><span class="sxs-lookup"><span data-stu-id="32214-158">Change the parameters for an application submitted using spark-submit</span></span>
<span data-ttu-id="32214-159">Följande kommando är ett exempel på hur du ändrar konfigurationsparametrar för ett batch-program som har skickats med `spark-submit`.</span><span class="sxs-lookup"><span data-stu-id="32214-159">Following command is an example of how to change the configuration parameters for a batch application that is submitted using `spark-submit`.</span></span>

    spark-submit --class <the application class to execute> --executor-memory 3072M --executor-cores 4 –-num-executors 10 <location of application jar file> <application parameters>

### <a name="change-the-parameters-for-an-application-submitted-using-curl"></a><span data-ttu-id="32214-160">Ändra parametrarna för ett program som skickas med cURL</span><span class="sxs-lookup"><span data-stu-id="32214-160">Change the parameters for an application submitted using cURL</span></span>
<span data-ttu-id="32214-161">Följande kommando är ett exempel på hur du ändrar konfigurationsparametrar för ett batch-program som har skickats med hjälp av cURL.</span><span class="sxs-lookup"><span data-stu-id="32214-161">Following command is an example of how to change the configuration parameters for a batch application that is submitted using using cURL.</span></span>

    curl -k -v -H 'Content-Type: application/json' -X POST -d '{"file":"<location of application jar file>", "className":"<the application class to execute>", "args":[<application parameters>], "numExecutors":10, "executorMemory":"2G", "executorCores":5' localhost:8998/batches

### <a name="how-do-i-change-these-parameters-on-a-spark-thrift-server"></a><span data-ttu-id="32214-162">Hur ändrar parametrarna på en Spark Thrift-servern?</span><span class="sxs-lookup"><span data-stu-id="32214-162">How do I change these parameters on a Spark Thrift Server?</span></span>
<span data-ttu-id="32214-163">Spark Thrift-servern tillhandahåller JDBC/ODBC-åtkomst till ett Spark-kluster och används för att tjänsten Spark SQL-frågor.</span><span class="sxs-lookup"><span data-stu-id="32214-163">Spark Thrift Server provides JDBC/ODBC access to a Spark cluster and is used to service Spark SQL queries.</span></span> <span data-ttu-id="32214-164">Verktyg som Power BI Tableau osv.</span><span class="sxs-lookup"><span data-stu-id="32214-164">Tools like Power BI, Tableau etc.</span></span> <span data-ttu-id="32214-165">använda ODBC-protokollet för att kommunicera med Spark Thrift-servern för att köra Spark SQL-frågor som ett Spark-program.</span><span class="sxs-lookup"><span data-stu-id="32214-165">use ODBC protocol to communicate with Spark Thrift Server to execute Spark SQL queries as a Spark Application.</span></span> <span data-ttu-id="32214-166">När ett Spark-kluster skapas två instanser av Spark Thrift-servern är igång, en på varje huvudnod.</span><span class="sxs-lookup"><span data-stu-id="32214-166">When a Spark cluster is created, two instances of the Spark Thrift Server are started, one on each head node.</span></span> <span data-ttu-id="32214-167">Varje Spark Thrift-servern visas som ett Spark-program i YARN-Användargränssnittet.</span><span class="sxs-lookup"><span data-stu-id="32214-167">Each Spark Thrift Server is visible as a Spark application in the YARN UI.</span></span>

<span data-ttu-id="32214-168">Spark Thrift-servern använder Spark dynamiska utförare allokering och därför den `spark.executor.instances` används inte.</span><span class="sxs-lookup"><span data-stu-id="32214-168">Spark Thrift Server uses Spark dynamic executor allocation and hence the `spark.executor.instances` is not used.</span></span> <span data-ttu-id="32214-169">Spark Thrift-servern används i stället `spark.dynamicAllocation.minExecutors` och `spark.dynamicAllocation.maxExecutors` att ange antalet utförare.</span><span class="sxs-lookup"><span data-stu-id="32214-169">Instead, Spark Thrift Server uses `spark.dynamicAllocation.minExecutors` and `spark.dynamicAllocation.maxExecutors` to specify the executor count.</span></span> <span data-ttu-id="32214-170">Konfigurationsparametrarna `spark.executor.cores` och `spark.executor.memory` används för att ändra storlek på utförare.</span><span class="sxs-lookup"><span data-stu-id="32214-170">The configuration parameters `spark.executor.cores` and `spark.executor.memory` is used to modify the executor size.</span></span> <span data-ttu-id="32214-171">Du kan ändra parametrarna som visas nedan.</span><span class="sxs-lookup"><span data-stu-id="32214-171">You can change these parameters as shown below.</span></span>

* <span data-ttu-id="32214-172">Expandera den **avancerade spark-thrift-sparkconf** kategori att uppdatera parametrarna `spark.dynamicAllocation.minExecutors`, `spark.dynamicAllocation.maxExecutors`, och `spark.executor.memory`.</span><span class="sxs-lookup"><span data-stu-id="32214-172">Expand the **Advanced spark-thrift-sparkconf** category to update the parameters `spark.dynamicAllocation.minExecutors`, `spark.dynamicAllocation.maxExecutors`, and `spark.executor.memory`.</span></span>

    ![Konfigurera Spark thrift-servern](./media/hdinsight-apache-spark-resource-manager/spark-thrift-server-1.png)    
* <span data-ttu-id="32214-174">Expandera den **anpassad spark-thrift-sparkconf** kategori att uppdatera parametern `spark.executor.cores`.</span><span class="sxs-lookup"><span data-stu-id="32214-174">Expand the **Custom spark-thrift-sparkconf** category to update the parameter `spark.executor.cores`.</span></span>

    ![Konfigurera Spark thrift-servern](./media/hdinsight-apache-spark-resource-manager/spark-thrift-server-2.png)

### <a name="how-do-i-change-the-driver-memory-of-the-spark-thrift-server"></a><span data-ttu-id="32214-176">Hur ändrar jag drivrutinen minnet på Spark Thrift-servern?</span><span class="sxs-lookup"><span data-stu-id="32214-176">How do I change the driver memory of the Spark Thrift Server?</span></span>
<span data-ttu-id="32214-177">Spark Thrift-servern drivrutinsminne är konfigurerad att 25% av huvudnod ram-storlek, under förutsättning att den totala storleken för RAM-minne på Huvudnoden är större än 14GB.</span><span class="sxs-lookup"><span data-stu-id="32214-177">Spark Thrift Server driver memory is configured to 25% of the head node RAM size, provided the total RAM size of the head node is greater than 14GB.</span></span> <span data-ttu-id="32214-178">Du kan använda Ambari UI ändra minneskonfigurationen drivrutinen enligt nedan.</span><span class="sxs-lookup"><span data-stu-id="32214-178">You can use the Ambari UI to change the driver memory configuration, as shown below.</span></span>

* <span data-ttu-id="32214-179">Ambari UI klickar du på **Spark**, klickar du på **konfigurationerna**, expandera **avancerade spark env**, och ange värdet för **spark_thrift_cmd_opts**.</span><span class="sxs-lookup"><span data-stu-id="32214-179">From the Ambari UI click **Spark**, click **Configs**, expand **Advanced spark-env**, and then provide the value for **spark_thrift_cmd_opts**.</span></span>

    ![Konfigurera Spark thrift-servern RAM-minne](./media/hdinsight-apache-spark-resource-manager/spark-thrift-server-ram.png)

## <a name="i-do-not-use-bi-with-spark-cluster-how-do-i-take-the-resources-back"></a><span data-ttu-id="32214-181">Jag använder inte BI med Spark-kluster.</span><span class="sxs-lookup"><span data-stu-id="32214-181">I do not use BI with Spark cluster.</span></span> <span data-ttu-id="32214-182">Hur jag för att ta resurserna tillbaka?</span><span class="sxs-lookup"><span data-stu-id="32214-182">How do I take the resources back?</span></span>
<span data-ttu-id="32214-183">Eftersom vi använder Spark dynamisk allokering, är endast resurserna som förbrukas av thrift-servern resurser för två program huvudservrar.</span><span class="sxs-lookup"><span data-stu-id="32214-183">Since we use Spark dynamic allocation, the only resources that are consumed by thrift server are the resources for the two application masters.</span></span> <span data-ttu-id="32214-184">Om du vill frigöra dessa resurser måste du stoppa tjänsterna Thrift-servern körs i klustret.</span><span class="sxs-lookup"><span data-stu-id="32214-184">To reclaim these resources you must stop the Thrift Server services running on the cluster.</span></span>

1. <span data-ttu-id="32214-185">Ambari UI, i den vänstra rutan klickar du på **Spark**.</span><span class="sxs-lookup"><span data-stu-id="32214-185">From the Ambari UI, from the left pane, click **Spark**.</span></span>
2. <span data-ttu-id="32214-186">Klicka på nästa sida **Spark Thrift servrar**.</span><span class="sxs-lookup"><span data-stu-id="32214-186">In the next page, click **Spark Thrift Servers**.</span></span>

    ![Starta om thrift-servern](./media/hdinsight-apache-spark-resource-manager/restart-thrift-server-1.png)
3. <span data-ttu-id="32214-188">Du bör se två headnodes som Spark Thrift-servern körs.</span><span class="sxs-lookup"><span data-stu-id="32214-188">You should see the two headnodes on which the Spark Thrift Server is running.</span></span> <span data-ttu-id="32214-189">Klicka på någon av headnodes.</span><span class="sxs-lookup"><span data-stu-id="32214-189">Click one of the headnodes.</span></span>

    ![Starta om thrift-servern](./media/hdinsight-apache-spark-resource-manager/restart-thrift-server-2.png)
4. <span data-ttu-id="32214-191">Nästa sida visar alla tjänster som körs på den headnode.</span><span class="sxs-lookup"><span data-stu-id="32214-191">The next page lists all the services running on that headnode.</span></span> <span data-ttu-id="32214-192">Klicka på listrutan bredvid Spark Thrift-servern i listan och klicka sedan på **stoppa**.</span><span class="sxs-lookup"><span data-stu-id="32214-192">From the list click the drop-down button next to Spark Thrift Server, and then click **Stop**.</span></span>

    ![Starta om thrift-servern](./media/hdinsight-apache-spark-resource-manager/restart-thrift-server-3.png)
5. <span data-ttu-id="32214-194">Upprepa dessa steg på andra headnode samt.</span><span class="sxs-lookup"><span data-stu-id="32214-194">Repeat these steps on the other headnode as well.</span></span>

## <a name="my-jupyter-notebooks-are-not-running-as-expected-how-can-i-restart-the-service"></a><span data-ttu-id="32214-195">Jupyter-anteckningsböcker körs inte som förväntat.</span><span class="sxs-lookup"><span data-stu-id="32214-195">My Jupyter notebooks are not running as expected.</span></span> <span data-ttu-id="32214-196">Hur kan jag starta om tjänsten?</span><span class="sxs-lookup"><span data-stu-id="32214-196">How can I restart the service?</span></span>
<span data-ttu-id="32214-197">Starta Ambari-Webbgränssnittet som ovan.</span><span class="sxs-lookup"><span data-stu-id="32214-197">Launch the Ambari Web UI as shown above.</span></span> <span data-ttu-id="32214-198">I det vänstra navigeringsfönstret klickar du på **Jupyter**, klickar du på **tjänståtgärder**, och klicka sedan på **starta om alla**.</span><span class="sxs-lookup"><span data-stu-id="32214-198">From the left navigation pane, click **Jupyter**, click **Service Actions**, and then click **Restart All**.</span></span> <span data-ttu-id="32214-199">Detta startar tjänsten Jupyter på alla headnodes.</span><span class="sxs-lookup"><span data-stu-id="32214-199">This will start the Jupyter service on all the headnodes.</span></span>

    ![Restart Jupyter](./media/hdinsight-apache-spark-resource-manager/restart-jupyter.png "Restart Jupyter")

## <a name="how-do-i-know-if-i-am-running-out-of-resources"></a><span data-ttu-id="32214-200">Hur vet jag om jag har slut på resurser?</span><span class="sxs-lookup"><span data-stu-id="32214-200">How do I know if I am running out of resources?</span></span>
<span data-ttu-id="32214-201">Starta Yarn-Användargränssnittet som du ser ovan.</span><span class="sxs-lookup"><span data-stu-id="32214-201">Launch the Yarn UI as shown above.</span></span> <span data-ttu-id="32214-202">Kontrollera värdena för i klustret mått tabell på skärmen, **minne används** och **minne totalt** kolumner.</span><span class="sxs-lookup"><span data-stu-id="32214-202">In Cluster Metrics table on top of the screen, check values of **Memory Used** and **Memory Total** columns.</span></span> <span data-ttu-id="32214-203">Om värdena 2 ligger mycket nära kanske det inte finns tillräckligt med resurser för att starta programmet nästa.</span><span class="sxs-lookup"><span data-stu-id="32214-203">If the 2 values are very close, there might not be enough resources to start the next application.</span></span> <span data-ttu-id="32214-204">Samma gäller den **VCores används** och **VCores totalt** kolumner.</span><span class="sxs-lookup"><span data-stu-id="32214-204">The same applies to the **VCores Used** and **VCores Total** columns.</span></span> <span data-ttu-id="32214-205">Även i vyn huvudsakliga om det finns ett program svaret inte i **godkända** tillstånd och inte att omvandla till **kör** eller **misslyckades** tillstånd, detta kan också vara ett tecken som det inte får tillräckligt med resurser för att starta.</span><span class="sxs-lookup"><span data-stu-id="32214-205">Also, in the main view, if there is an application stayed in **ACCEPTED** state and not transitioning into **RUNNING** nor **FAILED** state, this could also be an indication that it is not getting enough resources to start.</span></span>

    ![Resource Limit](./media/hdinsight-apache-spark-resource-manager/resource-limit.png "Resource Limit")

## <a name="how-do-i-kill-a-running-application-to-free-up-resource"></a><span data-ttu-id="32214-206">Hur jag för att avsluta ett program som körs för att frigöra resurser?</span><span class="sxs-lookup"><span data-stu-id="32214-206">How do I kill a running application to free up resource?</span></span>
1. <span data-ttu-id="32214-207">I Yarn-Användargränssnittet från den vänstra rutan klickar du på **kör**.</span><span class="sxs-lookup"><span data-stu-id="32214-207">In the Yarn UI, from the left panel, click **Running**.</span></span> <span data-ttu-id="32214-208">Listan över program som körs och att bestämma programmet avslutas och klicka på den **ID**.</span><span class="sxs-lookup"><span data-stu-id="32214-208">From the list of running applications, determine the application to be killed and click on the **ID**.</span></span>

    <span data-ttu-id="32214-209">![Avsluta App1](./media/hdinsight-apache-spark-resource-manager/kill-app1.png "Kill App1")</span><span class="sxs-lookup"><span data-stu-id="32214-209">![Kill App1](./media/hdinsight-apache-spark-resource-manager/kill-app1.png "Kill App1")</span></span>

2. <span data-ttu-id="32214-210">Klicka på **avsluta programmet** i övre högra hörnet, klicka sedan på **OK**.</span><span class="sxs-lookup"><span data-stu-id="32214-210">Click **Kill Application** on the top right corner, then click **OK**.</span></span>

    <span data-ttu-id="32214-211">![Avsluta App2](./media/hdinsight-apache-spark-resource-manager/kill-app2.png "Kill App2")</span><span class="sxs-lookup"><span data-stu-id="32214-211">![Kill App2](./media/hdinsight-apache-spark-resource-manager/kill-app2.png "Kill App2")</span></span>

## <a name="see-also"></a><span data-ttu-id="32214-212">Se även</span><span class="sxs-lookup"><span data-stu-id="32214-212">See also</span></span>
* [<span data-ttu-id="32214-213">Följa och felsöka jobb som körs i ett Apache Spark-kluster i HDInsight</span><span class="sxs-lookup"><span data-stu-id="32214-213">Track and debug jobs running on an Apache Spark cluster in HDInsight</span></span>](hdinsight-apache-spark-job-debugging.md)

### <a name="for-data-analysts"></a><span data-ttu-id="32214-214">För dataanalytiker</span><span class="sxs-lookup"><span data-stu-id="32214-214">For data analysts</span></span>

* [<span data-ttu-id="32214-215">Spark med Machine Learning: Använda Spark i HDInsight för analys av byggnadstemperatur med HVAC-data</span><span class="sxs-lookup"><span data-stu-id="32214-215">Spark with Machine Learning: Use Spark in HDInsight for analyzing building temperature using HVAC data</span></span>](hdinsight-apache-spark-ipython-notebook-machine-learning.md)
* [<span data-ttu-id="32214-216">Spark med Machine Learning: Använda Spark i HDInsight för att förutsäga resultatet av en livsmedelskontroll</span><span class="sxs-lookup"><span data-stu-id="32214-216">Spark with Machine Learning: Use Spark in HDInsight to predict food inspection results</span></span>](hdinsight-apache-spark-machine-learning-mllib-ipython.md)
* [<span data-ttu-id="32214-217">Webbplatslogganalys med Spark i HDInsight</span><span class="sxs-lookup"><span data-stu-id="32214-217">Website log analysis using Spark in HDInsight</span></span>](hdinsight-apache-spark-custom-library-website-log-analysis.md)
* [<span data-ttu-id="32214-218">Application Insight-telemetridataanalys i HDInsight</span><span class="sxs-lookup"><span data-stu-id="32214-218">Application Insight telemetry data analysis using Spark in HDInsight</span></span>](hdinsight-spark-analyze-application-insight-logs.md)
* [<span data-ttu-id="32214-219">Använda Caffe för distribuerade djup learning på Azure HDInsight Spark</span><span class="sxs-lookup"><span data-stu-id="32214-219">Use Caffe on Azure HDInsight Spark for distributed deep learning</span></span>](hdinsight-deep-learning-caffe-spark.md)

### <a name="for-spark-developers"></a><span data-ttu-id="32214-220">För Spark-utvecklare</span><span class="sxs-lookup"><span data-stu-id="32214-220">For Spark developers</span></span>

* [<span data-ttu-id="32214-221">Skapa ett fristående program med hjälp av Scala</span><span class="sxs-lookup"><span data-stu-id="32214-221">Create a standalone application using Scala</span></span>](hdinsight-apache-spark-create-standalone-application.md)
* [<span data-ttu-id="32214-222">Köra jobb via fjärranslutning på ett Spark-kluster med Livy</span><span class="sxs-lookup"><span data-stu-id="32214-222">Run jobs remotely on a Spark cluster using Livy</span></span>](hdinsight-apache-spark-livy-rest-interface.md)
* [<span data-ttu-id="32214-223">Använda HDInsight Tools-plugin för IntelliJ IDEA till att skapa och skicka Spark Scala-appar</span><span class="sxs-lookup"><span data-stu-id="32214-223">Use HDInsight Tools Plugin for IntelliJ IDEA to create and submit Spark Scala applications</span></span>](hdinsight-apache-spark-intellij-tool-plugin.md)
* [<span data-ttu-id="32214-224">Spark Streaming: Använda Spark i HDInsight för att bygga program för strömning i realtid</span><span class="sxs-lookup"><span data-stu-id="32214-224">Spark Streaming: Use Spark in HDInsight for building real-time streaming applications</span></span>](hdinsight-apache-spark-eventhub-streaming.md)
* [<span data-ttu-id="32214-225">Använda HDInsight Tools-plugin för IntelliJ IDEA till att felsöka Spark-program via fjärranslutning</span><span class="sxs-lookup"><span data-stu-id="32214-225">Use HDInsight Tools Plugin for IntelliJ IDEA to debug Spark applications remotely</span></span>](hdinsight-apache-spark-intellij-tool-plugin-debug-jobs-remotely.md)
* [<span data-ttu-id="32214-226">Använda Zeppelin-anteckningsböcker med ett Spark-kluster i HDInsight</span><span class="sxs-lookup"><span data-stu-id="32214-226">Use Zeppelin notebooks with a Spark cluster on HDInsight</span></span>](hdinsight-apache-spark-zeppelin-notebook.md)
* [<span data-ttu-id="32214-227">Kernlar som är tillgängliga för Jupyter Notebook i Spark-klustret för HDInsight</span><span class="sxs-lookup"><span data-stu-id="32214-227">Kernels available for Jupyter notebook in Spark cluster for HDInsight</span></span>](hdinsight-apache-spark-jupyter-notebook-kernels.md)
* [<span data-ttu-id="32214-228">Använda externa paket med Jupyter-anteckningsböcker</span><span class="sxs-lookup"><span data-stu-id="32214-228">Use external packages with Jupyter notebooks</span></span>](hdinsight-apache-spark-jupyter-notebook-use-external-packages.md)
* [<span data-ttu-id="32214-229">Installera Jupyter på datorn och ansluta till ett HDInsight Spark-kluster</span><span class="sxs-lookup"><span data-stu-id="32214-229">Install Jupyter on your computer and connect to an HDInsight Spark cluster</span></span>](hdinsight-apache-spark-jupyter-notebook-install-locally.md)

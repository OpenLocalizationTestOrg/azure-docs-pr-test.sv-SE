---
title: "Compute-kontexten alternativ för R Server på HDInsight - Azure | Microsoft Docs"
description: "Lär dig mer om olika beräkning kontexten alternativen för användare med R Server på HDInsight"
services: HDInsight
documentationcenter: 
author: bradsev
manager: jhubbard
editor: cgronlun
ms.assetid: 0deb0b1c-4094-459b-94fc-ec9b774c1f8a
ms.service: HDInsight
ms.custom: hdinsightactive
ms.devlang: R
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: data-services
ms.date: 06/19/2017
ms.author: bradsev
ms.openlocfilehash: 47f4441612be4f363ba82cc22b09786a6f3bfdc3
ms.sourcegitcommit: 18ad9bc049589c8e44ed277f8f43dcaa483f3339
ms.translationtype: MT
ms.contentlocale: sv-SE
ms.lasthandoff: 08/29/2017
---
# <a name="compute-context-options-for-r-server-on-hdinsight"></a><span data-ttu-id="73a32-103">Compute-kontexten alternativ för R Server på HDInsight</span><span class="sxs-lookup"><span data-stu-id="73a32-103">Compute context options for R Server on HDInsight</span></span>

<span data-ttu-id="73a32-104">Microsoft R Server på Azure HDInsight styr hur anropen genom att ange beräknings-kontexten.</span><span class="sxs-lookup"><span data-stu-id="73a32-104">Microsoft R Server on Azure HDInsight controls how calls are executed by setting the compute context.</span></span> <span data-ttu-id="73a32-105">Den här artikeln beskrivs de alternativ som är tillgängliga för att ange om och hur körningen paralleliserad över kärnor kantnod eller HDInsight-kluster.</span><span class="sxs-lookup"><span data-stu-id="73a32-105">This article outlines the options that are available to specify whether and how execution is parallelized across cores of the edge node or HDInsight cluster.</span></span>

<span data-ttu-id="73a32-106">Edge-nod i ett kluster ger en lämplig plats att ansluta till klustret och köra R-skript.</span><span class="sxs-lookup"><span data-stu-id="73a32-106">The edge node of a cluster provides a convenient place to connect to the cluster and to run your R scripts.</span></span> <span data-ttu-id="73a32-107">Med en kantnod har möjlighet att köra parallelized distribuerade funktioner ScaleR över kärnor på noden gränsservern.</span><span class="sxs-lookup"><span data-stu-id="73a32-107">With an edge node, you have the option of running the parallelized distributed functions of ScaleR across the cores of the edge node server.</span></span> <span data-ttu-id="73a32-108">Du kan också köra dem mellan noder i klustret med hjälp av Scaler's Hadoop kartan minska eller compute kontexter för Spark.</span><span class="sxs-lookup"><span data-stu-id="73a32-108">You can also run them across the nodes of the cluster by using ScaleR’s Hadoop Map Reduce or Spark compute contexts.</span></span>

## <a name="microsoft-r-server-on-azure-hdinsight"></a><span data-ttu-id="73a32-109">Microsoft R Server på Azure HDInsight</span><span class="sxs-lookup"><span data-stu-id="73a32-109">Microsoft R Server on Azure HDInsight</span></span>
<span data-ttu-id="73a32-110">[Microsoft R Server på Azure HDInsight](hdinsight-hadoop-r-server-overview.md) innehåller de senaste funktionerna för analys av R-baserade.</span><span class="sxs-lookup"><span data-stu-id="73a32-110">[Microsoft R Server on Azure HDInsight](hdinsight-hadoop-r-server-overview.md) provides the latest capabilities for R-based analytics.</span></span> <span data-ttu-id="73a32-111">Det kan använda data som lagras i en HDFS-behållare i din [Azure Blob](../storage/common/storage-introduction.md "Azure Blob storage") storage-konto, ett Data Lake store eller lokala Linux-filsystem.</span><span class="sxs-lookup"><span data-stu-id="73a32-111">It can use data that is stored in an HDFS container in your [Azure Blob](../storage/common/storage-introduction.md "Azure Blob storage") storage account, a Data Lake store, or the local Linux file system.</span></span> <span data-ttu-id="73a32-112">Eftersom R Server bygger på öppen källkod R gäller R-baserade program som du skapar öppen källkod R-paket 8000 +.</span><span class="sxs-lookup"><span data-stu-id="73a32-112">Since R Server is built on open source R, the R-based applications you build can apply any of the 8000+ open source R packages.</span></span> <span data-ttu-id="73a32-113">De kan också använda rutiner i [RevoScaleR](https://msdn.microsoft.com/microsoft-r/scaler/scaler), Microsofts big analytics datapaketet som ingår i R Server.</span><span class="sxs-lookup"><span data-stu-id="73a32-113">They can also use the routines in [RevoScaleR](https://msdn.microsoft.com/microsoft-r/scaler/scaler), Microsoft’s big data analytics package that is included with R Server.</span></span>  

## <a name="compute-contexts-for-an-edge-node"></a><span data-ttu-id="73a32-114">Beräkna kontexter för en kantnod</span><span class="sxs-lookup"><span data-stu-id="73a32-114">Compute contexts for an edge node</span></span>
<span data-ttu-id="73a32-115">I allmänhet körs ett R-skript som körs i R Server på kantnoden inom R-tolken på noden.</span><span class="sxs-lookup"><span data-stu-id="73a32-115">In general, an R script that's run in R Server on the edge node runs within the R interpreter on that node.</span></span> <span data-ttu-id="73a32-116">Undantagen är de steg som anropar en ScaleR funktion.</span><span class="sxs-lookup"><span data-stu-id="73a32-116">The exceptions are those steps that call a ScaleR function.</span></span> <span data-ttu-id="73a32-117">ScaleR anropen köras i en miljö för beräkning som bestäms av hur du ställer in ScaleR beräknings-kontexten.</span><span class="sxs-lookup"><span data-stu-id="73a32-117">The ScaleR calls run in a compute environment that is determined by how you set the ScaleR compute context.</span></span>  <span data-ttu-id="73a32-118">När du kör din R-skriptet från en kantnod är beräknings-kontexten möjliga värden:</span><span class="sxs-lookup"><span data-stu-id="73a32-118">When you run your R script from an edge node, the possible values of the compute context are:</span></span>

- <span data-ttu-id="73a32-119">lokal sekventiella (*'lokala'*)</span><span class="sxs-lookup"><span data-stu-id="73a32-119">local sequential (*‘local’*)</span></span>
- <span data-ttu-id="73a32-120">lokala parallell (*'localpar'*)</span><span class="sxs-lookup"><span data-stu-id="73a32-120">local parallel (*‘localpar’*)</span></span>
- <span data-ttu-id="73a32-121">Minska karta</span><span class="sxs-lookup"><span data-stu-id="73a32-121">Map Reduce</span></span>
- <span data-ttu-id="73a32-122">Spark</span><span class="sxs-lookup"><span data-stu-id="73a32-122">Spark</span></span>

<span data-ttu-id="73a32-123">Den *'lokala'* och *'localpar'* alternativ skiljer sig i hur **rxExec** anropen.</span><span class="sxs-lookup"><span data-stu-id="73a32-123">The *‘local’* and *‘localpar’* options differ only in how **rxExec** calls are executed.</span></span> <span data-ttu-id="73a32-124">De båda köra andra rx funktionsanrop på ett sätt som parallellt över alla tillgängliga kärnor om inget annat anges med hjälp av ScaleR **numCoresToUse** alternativ, till exempel `rxOptions(numCoresToUse=6)`.</span><span class="sxs-lookup"><span data-stu-id="73a32-124">They both execute other rx-function calls in a parallel manner across all available cores unless specified otherwise through use of the ScaleR **numCoresToUse** option, for example `rxOptions(numCoresToUse=6)`.</span></span> <span data-ttu-id="73a32-125">Parallell körning alternativ ger optimala prestanda.</span><span class="sxs-lookup"><span data-stu-id="73a32-125">Parallel execution options offer optimal performance.</span></span>

<span data-ttu-id="73a32-126">I följande tabell sammanfattas de olika beräkning kontext alternativen för att ange hur anropen:</span><span class="sxs-lookup"><span data-stu-id="73a32-126">The following table summarizes the various compute context options to set how calls are executed:</span></span>

| <span data-ttu-id="73a32-127">Compute-kontexten</span><span class="sxs-lookup"><span data-stu-id="73a32-127">Compute context</span></span>  | <span data-ttu-id="73a32-128">Hur du ställer in</span><span class="sxs-lookup"><span data-stu-id="73a32-128">How to set</span></span>                      | <span data-ttu-id="73a32-129">Körningskontext</span><span class="sxs-lookup"><span data-stu-id="73a32-129">Execution context</span></span>                        |
| ---------------- | ------------------------------- | ---------------------------------------- |
| <span data-ttu-id="73a32-130">Lokal sekventiella</span><span class="sxs-lookup"><span data-stu-id="73a32-130">Local sequential</span></span> | <span data-ttu-id="73a32-131">rxSetComputeContext('local')</span><span class="sxs-lookup"><span data-stu-id="73a32-131">rxSetComputeContext(‘local’)</span></span>    | <span data-ttu-id="73a32-132">Paralleliserad körning över kärnor av noden gränsservern förutom rxExec anrop, som utförs i följd</span><span class="sxs-lookup"><span data-stu-id="73a32-132">Parallelized execution across the cores of the edge node server, except for rxExec calls, which are executed serially</span></span> |
| <span data-ttu-id="73a32-133">Lokala parallellt</span><span class="sxs-lookup"><span data-stu-id="73a32-133">Local parallel</span></span>   | <span data-ttu-id="73a32-134">rxSetComputeContext('localpar')</span><span class="sxs-lookup"><span data-stu-id="73a32-134">rxSetComputeContext(‘localpar’)</span></span> | <span data-ttu-id="73a32-135">Paralleliserad körning av noden gränsservern över kärnor</span><span class="sxs-lookup"><span data-stu-id="73a32-135">Parallelized execution across the cores of the edge node server</span></span> |
| <span data-ttu-id="73a32-136">Spark</span><span class="sxs-lookup"><span data-stu-id="73a32-136">Spark</span></span>            | <span data-ttu-id="73a32-137">RxSpark()</span><span class="sxs-lookup"><span data-stu-id="73a32-137">RxSpark()</span></span>                       | <span data-ttu-id="73a32-138">Paralleliserad distribuerade körning via Spark mellan noderna av HDI-klustret</span><span class="sxs-lookup"><span data-stu-id="73a32-138">Parallelized distributed execution via Spark across the nodes of the HDI cluster</span></span> |
| <span data-ttu-id="73a32-139">Minska karta</span><span class="sxs-lookup"><span data-stu-id="73a32-139">Map Reduce</span></span>       | <span data-ttu-id="73a32-140">RxHadoopMR()</span><span class="sxs-lookup"><span data-stu-id="73a32-140">RxHadoopMR()</span></span>                    | <span data-ttu-id="73a32-141">Paralleliserad distribuerade utförs via minska karta över noderna i HDI-klustret</span><span class="sxs-lookup"><span data-stu-id="73a32-141">Parallelized distributed execution via Map Reduce across the nodes of the HDI cluster</span></span> |

## <a name="guidelines-for-deciding-on-a-compute-context"></a><span data-ttu-id="73a32-142">Riktlinjer för att besluta om en beräknings-kontext</span><span class="sxs-lookup"><span data-stu-id="73a32-142">Guidelines for deciding on a compute context</span></span>

<span data-ttu-id="73a32-143">Som av de tre alternativen du väljer som tillhandahåller paralleliserad körning beror på vilka slags analytics arbetet, storlek och plats för dina data.</span><span class="sxs-lookup"><span data-stu-id="73a32-143">Which of the three options you choose that provide parallelized execution depends on the nature of your analytics work, the size, and the location of your data.</span></span> <span data-ttu-id="73a32-144">Det finns ingen enkel formeln som anger vilket compute kontext för att använda.</span><span class="sxs-lookup"><span data-stu-id="73a32-144">There is no simple formula that tells you which compute context to use.</span></span> <span data-ttu-id="73a32-145">Det finns dock vissa övergripande riktlinjer som hjälper dig att fatta rätt beslut eller åtminstone hjälpa dig att begränsa dina val innan du kör en prestandamått.</span><span class="sxs-lookup"><span data-stu-id="73a32-145">There are, however, some guiding principles that can help you make the right choice, or, at least, help you narrow down your choices before you run a benchmark.</span></span> <span data-ttu-id="73a32-146">Dessa riktlinjer omfattar:</span><span class="sxs-lookup"><span data-stu-id="73a32-146">These guiding principles include:</span></span>

- <span data-ttu-id="73a32-147">Lokal Linux-filsystemet är snabbare än HDFS.</span><span class="sxs-lookup"><span data-stu-id="73a32-147">The local Linux file system is faster than HDFS.</span></span>
- <span data-ttu-id="73a32-148">Upprepade analys är snabbare om data är lokala och om den är i XDF.</span><span class="sxs-lookup"><span data-stu-id="73a32-148">Repeated analyses are faster if the data is local, and if it's in XDF.</span></span>
- <span data-ttu-id="73a32-149">Är det bättre att strömma små mängder data från en datakälla för text.</span><span class="sxs-lookup"><span data-stu-id="73a32-149">It's preferable to stream small amounts of data from a text data source.</span></span> <span data-ttu-id="73a32-150">Om mängden data som är större, konvertera du det till XDF innan analys.</span><span class="sxs-lookup"><span data-stu-id="73a32-150">If the amount of data is larger, convert it to XDF before analysis.</span></span>
- <span data-ttu-id="73a32-151">Arbetet med att kopiera eller strömmande data till kantnoden för analys blir svårhanterligt för mycket stora mängder data.</span><span class="sxs-lookup"><span data-stu-id="73a32-151">The overhead of copying or streaming the data to the edge node for analysis becomes unmanageable for very large amounts of data.</span></span>
- <span data-ttu-id="73a32-152">Spark är snabbare än kartan minska för analys i Hadoop.</span><span class="sxs-lookup"><span data-stu-id="73a32-152">Spark is faster than Map Reduce for analysis in Hadoop.</span></span>

<span data-ttu-id="73a32-153">I följande avsnitt erbjuder ges dessa principer vissa allmänna råden för att välja en beräknings-kontext.</span><span class="sxs-lookup"><span data-stu-id="73a32-153">Given these principles, the following sections offer some general rules of thumb for selecting a compute context.</span></span>

### <a name="local"></a><span data-ttu-id="73a32-154">Lokal</span><span class="sxs-lookup"><span data-stu-id="73a32-154">Local</span></span>
* <span data-ttu-id="73a32-155">Om mängden data att analysera är liten och kräver inte upprepade analys, sedan strömmas direkt i den analysis rutinunderhåll med hjälp av *'lokala'* eller *'localpar'*.</span><span class="sxs-lookup"><span data-stu-id="73a32-155">If the amount of data to analyze is small and does not require repeated analysis, then stream it directly into the analysis routine using *'local'* or *'localpar'*.</span></span>
* <span data-ttu-id="73a32-156">Om mängden data att analysera är liten eller medelstor och kräver upprepade analys, sedan kopiera den till det lokala filsystemet, importera den till XDF och analysera den via *'lokala'* eller *'localpar'*.</span><span class="sxs-lookup"><span data-stu-id="73a32-156">If the amount of data to analyze is small or medium-sized and requires repeated analysis, then copy it to the local file system, import it to XDF, and analyze it via *'local'* or *'localpar'*.</span></span>

### <a name="hadoop-spark"></a><span data-ttu-id="73a32-157">Hadoop, Spark</span><span class="sxs-lookup"><span data-stu-id="73a32-157">Hadoop Spark</span></span>
* <span data-ttu-id="73a32-158">Om mängden data att analysera är stor kan sedan importera det till ett Spark-DataFrame med **RxHiveData** eller **RxParquetData**, eller XDF i HDFS (om inte lagring är ett problem), och analysera den med hjälp av Spark-beräkning kontexten.</span><span class="sxs-lookup"><span data-stu-id="73a32-158">If the amount of data to analyze is large, then import it to a Spark DataFrame using **RxHiveData** or **RxParquetData**, or to XDF in HDFS (unless storage is an issue), and analyze it using the Spark compute context.</span></span>

### <a name="hadoop-map-reduce"></a><span data-ttu-id="73a32-159">Minska Hadoop-karta</span><span class="sxs-lookup"><span data-stu-id="73a32-159">Hadoop Map Reduce</span></span>
* <span data-ttu-id="73a32-160">Använda context kartan minska beräkning endast om det uppstår ett oöverstigliga problem med Spark beräkning kontexten eftersom det är vanligtvis långsammare.</span><span class="sxs-lookup"><span data-stu-id="73a32-160">Use the Map Reduce compute context only if you encounter an insurmountable problem with the Spark compute context since it is generally slower.</span></span>  

## <a name="inline-help-on-rxsetcomputecontext"></a><span data-ttu-id="73a32-161">Infogade hjälp om rxSetComputeContext</span><span class="sxs-lookup"><span data-stu-id="73a32-161">Inline help on rxSetComputeContext</span></span>
<span data-ttu-id="73a32-162">Mer information och exempel på ScaleR beräkning kontexter finns infogat hjälp i R om metoden rxSetComputeContext, till exempel:</span><span class="sxs-lookup"><span data-stu-id="73a32-162">For more information and examples of ScaleR compute contexts, see the inline help in R on the rxSetComputeContext method, for example:</span></span>

    > ?rxSetComputeContext

<span data-ttu-id="73a32-163">Du kan också gå till den ”[ScaleR distribuerad datoranvändning guiden](https://msdn.microsoft.com/microsoft-r/scaler-distributed-computing)” som är tillgängliga från den [R Server MSDN](https://msdn.microsoft.com/library/mt674634.aspx "R Server på MSDN") bibliotek.</span><span class="sxs-lookup"><span data-stu-id="73a32-163">You can also refer to the “[ScaleR Distributed Computing Guide](https://msdn.microsoft.com/microsoft-r/scaler-distributed-computing)” that's available from the [R Server MSDN](https://msdn.microsoft.com/library/mt674634.aspx "R Server on MSDN") library.</span></span>

## <a name="next-steps"></a><span data-ttu-id="73a32-164">Nästa steg</span><span class="sxs-lookup"><span data-stu-id="73a32-164">Next steps</span></span>
<span data-ttu-id="73a32-165">I den här artikeln har du lärt dig om de alternativ som är tillgängliga för att ange om och hur körningen paralleliserad över kärnor kantnod eller HDInsight-kluster.</span><span class="sxs-lookup"><span data-stu-id="73a32-165">In this article, you learned about the options that are available to specify whether and how execution is parallelized across cores of the edge node or HDInsight cluster.</span></span> <span data-ttu-id="73a32-166">Mer information om hur du använder R Server med HDInsight-kluster finns i följande avsnitt:</span><span class="sxs-lookup"><span data-stu-id="73a32-166">To learn more about how to use R Server with HDInsight clusters, see the following topics:</span></span>

* [<span data-ttu-id="73a32-167">Översikt över R Server för Hadoop</span><span class="sxs-lookup"><span data-stu-id="73a32-167">Overview of R Server for Hadoop</span></span>](hdinsight-hadoop-r-server-overview.md)
* [<span data-ttu-id="73a32-168">Komma igång med R Server för Hadoop</span><span class="sxs-lookup"><span data-stu-id="73a32-168">Get started with R Server for Hadoop</span></span>](hdinsight-hadoop-r-server-get-started.md)
* [<span data-ttu-id="73a32-169">Lägg till RStudio Server HDInsight (om inte läggas till när klustret skapas)</span><span class="sxs-lookup"><span data-stu-id="73a32-169">Add RStudio Server to HDInsight (if not added during cluster creation)</span></span>](hdinsight-hadoop-r-server-install-r-studio.md)
* [<span data-ttu-id="73a32-170">Alternativ för Azure Storage för R Server på HDInsight</span><span class="sxs-lookup"><span data-stu-id="73a32-170">Azure Storage options for R Server on HDInsight</span></span>](hdinsight-hadoop-r-server-storage.md)


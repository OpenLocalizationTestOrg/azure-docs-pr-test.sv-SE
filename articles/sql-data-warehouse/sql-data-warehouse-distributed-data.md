---
title: aaaHow distributed data fungerar i Azure SQL Data Warehouse | Microsoft Docs
description: "Lär dig hur data distribueras för massivt parallell bearbetning (MPP) och hello alternativ för distribution av tabellerna i Azure SQL Data Warehouse och Parallel Data Warehouse."
services: sql-data-warehouse
documentationcenter: NA
author: jrowlandjones
manager: jhubbard
editor: 
ms.assetid: bae494a6-7ac5-4c38-8ca3-ab2696c63a9f
ms.service: sql-data-warehouse
ms.devlang: NA
ms.topic: article
ms.tgt_pltfrm: NA
ms.workload: data-services
ms.custom: tables
ms.date: 07/12/2017
ms.author: jrj;barbkess
ms.openlocfilehash: 9a712d8d5251e4391ede245105918283aaa4b193
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: sv-SE
ms.lasthandoff: 10/06/2017
---
# <a name="distributed-data-and-distributed-tables-for-massively-parallel-processing-mpp"></a><span data-ttu-id="4265c-103">Distribuerade data och distribuerade tabeller för massivt parallell bearbetning (MPP)</span><span class="sxs-lookup"><span data-stu-id="4265c-103">Distributed data and distributed tables for Massively Parallel Processing (MPP)</span></span>
<span data-ttu-id="4265c-104">Lär dig hur användardata distribueras i Azure SQL Data Warehouse och Parallel Data Warehouse är Microsofts massivt parallell bearbetning (MPP) system.</span><span class="sxs-lookup"><span data-stu-id="4265c-104">Learn how user data is distributed in Azure SQL Data Warehouse and Parallel Data Warehouse, which are Microsoft's Massively Parallel Processing (MPP) systems.</span></span> <span data-ttu-id="4265c-105">Designa din data warehouse toouse kan distribuerade data effektivt du tooachieve hello frågebearbetning fördelarna med hello MPP-arkitektur.</span><span class="sxs-lookup"><span data-stu-id="4265c-105">Designing your data warehouse toouse distributed data effectively helps you tooachieve hello query processing benefits of hello MPP architecture.</span></span> <span data-ttu-id="4265c-106">Några databasen designalternativen kan ha en betydande inverkan på förbättra frågeprestanda.</span><span class="sxs-lookup"><span data-stu-id="4265c-106">A few database design choices can have a significant impact on improving query performance.</span></span>  

> [!NOTE]
> <span data-ttu-id="4265c-107">Azure SQL Data Warehouse och Parallel Data Warehouse Använd hello samma massivt parallell bearbetning (MPP) design, men de har några skillnader på grund av hello underliggande plattformen.</span><span class="sxs-lookup"><span data-stu-id="4265c-107">Azure SQL Data Warehouse and Parallel Data Warehouse use hello same Massively Parallel Processing (MPP) design, but they have a few differences because of hello underlying platform.</span></span> <span data-ttu-id="4265c-108">SQL Data Warehouse är en plattform som en tjänst (PaaS) som körs på Azure.</span><span class="sxs-lookup"><span data-stu-id="4265c-108">SQL Data Warehouse is a Platform as a Service (PaaS) that runs on Azure.</span></span> <span data-ttu-id="4265c-109">Parallel Data Warehouse körs på Analytics Platform System (AP: er) som är ett lokalt program som körs på Windows Server.</span><span class="sxs-lookup"><span data-stu-id="4265c-109">Parallel Data Warehouse runs on Analytics Platform System (APS) which is an on-premises appliance that runs on Windows Server.</span></span>
> 
> 

## <a name="what-is-distributed-data"></a><span data-ttu-id="4265c-110">Vad är distribuerade data?</span><span class="sxs-lookup"><span data-stu-id="4265c-110">What is distributed data?</span></span>
<span data-ttu-id="4265c-111">I SQL Data Warehouse och Parallel Data Warehouse refererar distribuerade data toouser data som lagras på flera platser över hello MPP-system.</span><span class="sxs-lookup"><span data-stu-id="4265c-111">In SQL Data Warehouse and Parallel Data Warehouse, distributed data refers toouser data that is stored in multiple locations across hello MPP system.</span></span> <span data-ttu-id="4265c-112">Var och en av dessa platser fungerar som en oberoende lagring och bearbetningsenhet som kör frågor på sin del av hello data.</span><span class="sxs-lookup"><span data-stu-id="4265c-112">Each of those locations functions as an independent storage and processing unit that runs queries on its portion of hello data.</span></span> <span data-ttu-id="4265c-113">Distribuerade data är grundläggande toorunning frågor i parallella tooachieve hög frågeprestanda.</span><span class="sxs-lookup"><span data-stu-id="4265c-113">Distributed data is fundamental toorunning queries in parallel tooachieve high query performance.</span></span>

<span data-ttu-id="4265c-114">toodistribute data hello datalagret tilldelar varje rad i en tabell tooone distribuerade plats.</span><span class="sxs-lookup"><span data-stu-id="4265c-114">toodistribute data, hello data warehouse assigns each row of a user table tooone distributed location.</span></span>  <span data-ttu-id="4265c-115">Du kan distribuera tabeller med hash-distributionsmetod eller resursallokering metod.</span><span class="sxs-lookup"><span data-stu-id="4265c-115">You can distribute tables with a hash-distribution method or a round-robin method.</span></span> <span data-ttu-id="4265c-116">hello distributionsmetod har angetts i hello CREATE TABLE-instruktion.</span><span class="sxs-lookup"><span data-stu-id="4265c-116">hello distribution method is specified in hello CREATE TABLE statement.</span></span> 

## <a name="hash-distributed-tables"></a><span data-ttu-id="4265c-117">Hash-distribuerade tabeller</span><span class="sxs-lookup"><span data-stu-id="4265c-117">Hash-distributed tables</span></span>
<span data-ttu-id="4265c-118">hello följande diagram illustrerar hur en fullständig (icke-distribuerade tabell) hämtar lagras som en distribuerad hash-tabell.</span><span class="sxs-lookup"><span data-stu-id="4265c-118">hello following diagram illustrates how a full (non-distributed table) gets stored as a hash-distributed table.</span></span> <span data-ttu-id="4265c-119">En deterministisk funktion tilldelar varje rad toobelong tooone distribution.</span><span class="sxs-lookup"><span data-stu-id="4265c-119">A deterministic function assigns each row toobelong tooone distribution.</span></span> <span data-ttu-id="4265c-120">I hello tabelldefinitionen är en av kolumnerna hello utses hello distribution kolumn.</span><span class="sxs-lookup"><span data-stu-id="4265c-120">In hello table definition, one of hello columns is designated as hello distribution column.</span></span> <span data-ttu-id="4265c-121">hello hash-funktionen använder hello värde i hello distribution kolumnen tooassign varje rad tooa distribution.</span><span class="sxs-lookup"><span data-stu-id="4265c-121">hello hash function uses hello value in hello distribution column tooassign each row tooa distribution.</span></span>

<span data-ttu-id="4265c-122">Det finns prestandaöverväganden för hello val av en kolumn, som särskiljbarhet, förskjutning av data och hello typer av frågor som körs på hello system och distribution.</span><span class="sxs-lookup"><span data-stu-id="4265c-122">There are performance considerations for hello selection of a distribution column, such as distinctness, data skew, and hello types of queries run on hello system.</span></span>

<span data-ttu-id="4265c-123">![Distribuerade tabell](media/sql-data-warehouse-distributed-data/hash-distributed-table.png "distribuerade tabell")</span><span class="sxs-lookup"><span data-stu-id="4265c-123">![Distributed table](media/sql-data-warehouse-distributed-data/hash-distributed-table.png "Distributed table")</span></span>  

* <span data-ttu-id="4265c-124">Varje rad tillhör tooone distribution.</span><span class="sxs-lookup"><span data-stu-id="4265c-124">Each row belongs tooone distribution.</span></span>  
* <span data-ttu-id="4265c-125">En deterministisk hash-algoritm tilldelar varje rad tooone distribution.</span><span class="sxs-lookup"><span data-stu-id="4265c-125">A deterministic hash algorithm assigns each row tooone distribution.</span></span>  
* <span data-ttu-id="4265c-126">hello antalet rader per distribution varierar som visas av hello tabeller med olika storlekar.</span><span class="sxs-lookup"><span data-stu-id="4265c-126">hello number of table rows per distribution varies as shown by hello different sizes of tables.</span></span>

## <a name="round-robin-distributed-tables"></a><span data-ttu-id="4265c-127">Resursallokering distribuerade tabeller</span><span class="sxs-lookup"><span data-stu-id="4265c-127">Round-robin distributed tables</span></span>
<span data-ttu-id="4265c-128">En distribuerad tabell resursallokering distribuerar hello rader genom att tilldela varje rad tooa distribution i ordning.</span><span class="sxs-lookup"><span data-stu-id="4265c-128">A round-robin distributed table distributes hello rows by assigning each row tooa distribution in a sequential manner.</span></span> <span data-ttu-id="4265c-129">Det är snabbt tooload data i en tabell med resursallokering men frågeprestanda kanske långsammare.</span><span class="sxs-lookup"><span data-stu-id="4265c-129">It is quick tooload data into a round-robin table, but query performance might be slower.</span></span>  <span data-ttu-id="4265c-130">Ansluta till en tabell med resursallokering vanligtvis måste reshuffling hello rader tooenable hello frågan tooproduce en korrekt resultat som det tar tid.</span><span class="sxs-lookup"><span data-stu-id="4265c-130">Joining a round-robin table usually requires reshuffling hello rows tooenable hello query tooproduce an accurate result, which takes time.</span></span>

## <a name="distributed-storage-locations-are-called-distributions"></a><span data-ttu-id="4265c-131">Distribuerade lagringsplatser kallas distributioner</span><span class="sxs-lookup"><span data-stu-id="4265c-131">Distributed storage locations are called distributions</span></span>
<span data-ttu-id="4265c-132">Varje distribuerad plats kallas för en distributionsplats.</span><span class="sxs-lookup"><span data-stu-id="4265c-132">Each distributed location is called a distribution.</span></span> <span data-ttu-id="4265c-133">När en fråga körs parallellt, utför en SQL-fråga på del av hello data varje distribution.</span><span class="sxs-lookup"><span data-stu-id="4265c-133">When a query runs in parallel, each distribution performs a SQL query on its portion of hello data.</span></span> <span data-ttu-id="4265c-134">SQL Data Warehouse använder SQL toorun hello databasfråga.</span><span class="sxs-lookup"><span data-stu-id="4265c-134">SQL Data Warehouse uses SQL Database toorun hello query.</span></span> <span data-ttu-id="4265c-135">Parallel Data Warehouse använder SQL Server toorun hello-frågan.</span><span class="sxs-lookup"><span data-stu-id="4265c-135">Parallel Data Warehouse uses SQL Server toorun hello query.</span></span> <span data-ttu-id="4265c-136">Den här delade ingenting arkitekturdesign är grundläggande tooachieving skalbar parallell datorbearbetning.</span><span class="sxs-lookup"><span data-stu-id="4265c-136">This shared-nothing architecture design is fundamental tooachieving scale-out parallel computing.</span></span>

### <a name="can-i-view-hello-distributions"></a><span data-ttu-id="4265c-137">Kan jag visa hello distributioner?</span><span class="sxs-lookup"><span data-stu-id="4265c-137">Can I view hello distributions?</span></span>
<span data-ttu-id="4265c-138">Varje distribution har ett distribution-ID och visas i systemvyer som gäller tooSQL Data Warehouse och Parallel Data Warehouse.</span><span class="sxs-lookup"><span data-stu-id="4265c-138">Each distribution has a distribution ID and is visible in system views that pertain tooSQL Data Warehouse and Parallel Data Warehouse.</span></span> <span data-ttu-id="4265c-139">Du kan använda hello distribution ID tootroubleshoot frågeprestanda och andra problem.</span><span class="sxs-lookup"><span data-stu-id="4265c-139">You can use hello distribution ID tootroubleshoot query performance and other problems.</span></span> <span data-ttu-id="4265c-140">En lista över hello systemvyer finns hello [MPP system Visa](sql-data-warehouse-reference-tsql-statements.md).</span><span class="sxs-lookup"><span data-stu-id="4265c-140">For a list of hello system views, see hello [MPP system view](sql-data-warehouse-reference-tsql-statements.md).</span></span>

## <a name="difference-between-a-distribution-and-a-compute-node"></a><span data-ttu-id="4265c-141">Skillnaden mellan en distribution och en beräkningsnod</span><span class="sxs-lookup"><span data-stu-id="4265c-141">Difference between a distribution and a Compute node</span></span>
<span data-ttu-id="4265c-142">En distributionsplats är hello grundläggande enheten för att lagra distribuerade data och bearbeta parallella frågor.</span><span class="sxs-lookup"><span data-stu-id="4265c-142">A distribution is hello basic unit for storing distributed data and processing parallel queries.</span></span> <span data-ttu-id="4265c-143">Distributioner grupperas i Compute-noder.</span><span class="sxs-lookup"><span data-stu-id="4265c-143">Distributions are grouped into Compute nodes.</span></span> <span data-ttu-id="4265c-144">Varje Compute-nod spårar en eller flera distributioner.</span><span class="sxs-lookup"><span data-stu-id="4265c-144">Each Compute node tracks one or more distributions.</span></span>  

* <span data-ttu-id="4265c-145">Analytics Platform System använder Compute-noder som en central del av hello arkitektur och skalbar maskinvarukapacitet.</span><span class="sxs-lookup"><span data-stu-id="4265c-145">Analytics Platform System uses Compute nodes as a central component of hello hardware architecture and scale-out capabilities.</span></span> <span data-ttu-id="4265c-146">Den använder alltid åtta distributioner per beräkningsnod, som visas i hello diagram för hash-distribuerade tabeller.</span><span class="sxs-lookup"><span data-stu-id="4265c-146">It always uses eight distributions per Compute node, as shown in hello diagram for hash-distributed tables.</span></span> <span data-ttu-id="4265c-147">Hej antalet Compute-noder, och därför hello antal distributioner, bestäms av hello antal Compute-noder som du köper för hello-enhet.</span><span class="sxs-lookup"><span data-stu-id="4265c-147">hello number of Compute nodes, and therefore hello number of distributions, is determined by hello number of Compute nodes you purchase for hello appliance.</span></span> <span data-ttu-id="4265c-148">Om du köper åtta datornoderna hämta till exempel 64-distributioner (8 noder x 8 distributioner/beräkningsnod).</span><span class="sxs-lookup"><span data-stu-id="4265c-148">For example, if you purchase eight Compute nodes, you get 64 distributions (8 Compute nodes x 8 distributions/node).</span></span> 
* <span data-ttu-id="4265c-149">SQL Data Warehouse har en fast antal 60 distributioner och ett flexibelt antal Compute-noder.</span><span class="sxs-lookup"><span data-stu-id="4265c-149">SQL Data Warehouse has a fixed number of 60 distributions and a flexible number of Compute nodes.</span></span> <span data-ttu-id="4265c-150">hello datornoderna implementeras med Azure och -resurser.</span><span class="sxs-lookup"><span data-stu-id="4265c-150">hello Compute nodes are implemented with Azure computing and storage resources.</span></span> <span data-ttu-id="4265c-151">hello antalet Compute-noder kan ändra bl.a toohello backend service arbetsbelastning och hello beräkningskapacitet (dwu: er) du anger för hello-datalagret.</span><span class="sxs-lookup"><span data-stu-id="4265c-151">hello number of Compute nodes can change according toohello backend service workload and hello computing capacity (DWUs) you specify for hello data warehouse.</span></span> <span data-ttu-id="4265c-152">När hello antalet datornoderna ändras, ändras även hello antal distributioner per Compute-nod.</span><span class="sxs-lookup"><span data-stu-id="4265c-152">When hello number of Compute nodes changes, hello number of distributions per Compute node also changes.</span></span> 

### <a name="can-i-view-hello-compute-nodes"></a><span data-ttu-id="4265c-153">Kan jag visa hello datornoderna?</span><span class="sxs-lookup"><span data-stu-id="4265c-153">Can I view hello Compute nodes?</span></span>
<span data-ttu-id="4265c-154">Varje Compute-nod har ett nod-ID och visas i systemvyer som gäller tooSQL Data Warehouse och Parallel Data Warehouse.</span><span class="sxs-lookup"><span data-stu-id="4265c-154">Each Compute node has a node ID and is visible in system views that pertain tooSQL Data Warehouse and Parallel Data Warehouse.</span></span>  <span data-ttu-id="4265c-155">Du ser hello Compute-nod för hello node_id kolumn i systemvyer vars namn börjar med sys.pdw_nodes.</span><span class="sxs-lookup"><span data-stu-id="4265c-155">You can see hello Compute node by looking for hello node_id column in system views whose names begin with sys.pdw_nodes.</span></span> <span data-ttu-id="4265c-156">En lista över hello systemvyer finns hello [MPP system Visa](sql-data-warehouse-reference-tsql-statements.md).</span><span class="sxs-lookup"><span data-stu-id="4265c-156">For a list of hello system views, see hello [MPP system view](sql-data-warehouse-reference-tsql-statements.md).</span></span>

## <span data-ttu-id="4265c-157"><a name="Replicated"></a>Replikerade tabeller</span><span class="sxs-lookup"><span data-stu-id="4265c-157"><a name="Replicated"></a>Replicated Tables</span></span>
<span data-ttu-id="4265c-158">En tabell som har replikerats har ett fullständigt kopia av hello tabell lagras på varje beräkningsnod.</span><span class="sxs-lookup"><span data-stu-id="4265c-158">A table that is replicated has a fully copy of hello table stored on each Compute node.</span></span> <span data-ttu-id="4265c-159">Replikera en tabell tar bort hello måste tootransfer data mellan datornoderna innan ett join- eller aggregering.</span><span class="sxs-lookup"><span data-stu-id="4265c-159">Replicating a table removes hello need tootransfer data among Compute nodes before a join or aggregation.</span></span> <span data-ttu-id="4265c-160">Replikerade tabeller är bara möjligt med små tabeller på grund av hello extra lagring krävs toostore hello fullständig tabell på varje beräkningsnod.</span><span class="sxs-lookup"><span data-stu-id="4265c-160">Replicated tables are only feasible with small tables because of hello extra storage required toostore hello full table on each compute node.</span></span>  

<span data-ttu-id="4265c-161">hello visar följande diagram en replikerad tabell som lagras på varje Compute-nod.</span><span class="sxs-lookup"><span data-stu-id="4265c-161">hello following diagram shows a replicated table that is stored on each Compute node.</span></span> <span data-ttu-id="4265c-162">För SQL Data Warehouse är hello replikerad tabell fullständigt kopierade tooa distributionsdatabasen på varje beräkningsnod.</span><span class="sxs-lookup"><span data-stu-id="4265c-162">For SQL Data Warehouse, hello replicated table is fully copied tooa distribution database on each Compute node.</span></span> <span data-ttu-id="4265c-163">Parallel Data Warehouse lagras hello replikerad tabell över alla diskar som tilldelats toohello Compute-nod.</span><span class="sxs-lookup"><span data-stu-id="4265c-163">For Parallel Data Warehouse, hello replicated table is stored across all disks assigned toohello Compute node.</span></span>  <span data-ttu-id="4265c-164">Den här disken strategin implementeras med hjälp av SQL Server-filgrupper.</span><span class="sxs-lookup"><span data-stu-id="4265c-164">This disk strategy is implemented by using SQL Server filegroups.</span></span>  

<span data-ttu-id="4265c-165">![Replikerade tabellen](media/sql-data-warehouse-distributed-data/replicated-table.png "replikerade tabell")</span><span class="sxs-lookup"><span data-stu-id="4265c-165">![Replicated table](media/sql-data-warehouse-distributed-data/replicated-table.png "Replicated table")</span></span> 

## <a name="next-steps"></a><span data-ttu-id="4265c-166">Nästa steg</span><span class="sxs-lookup"><span data-stu-id="4265c-166">Next steps</span></span>
<span data-ttu-id="4265c-167">toouse distribuerade tabeller effektivt, se [distribuerar tabeller i SQL Data Warehouse](sql-data-warehouse-tables-distribute.md)</span><span class="sxs-lookup"><span data-stu-id="4265c-167">toouse distributed tables effectively, see [Distributing tables in SQL Data Warehouse](sql-data-warehouse-tables-distribute.md)</span></span>  


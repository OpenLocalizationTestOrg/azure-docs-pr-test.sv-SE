---
title: "Tjänst-till-tjänst-autentisering: Data Lake Store med Azure Active Directory | Microsoft Docs"
description: "Lär dig hur tooachieve tjänst-till-tjänst autentisering med Data Lake Store med Azure Active Directory"
services: data-lake-store
documentationcenter: 
author: nitinme
manager: jhubbard
editor: cgronlun
ms.assetid: 820b7c5d-4863-4225-9bd1-df4d8f515537
ms.service: data-lake-store
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: big-data
ms.date: 04/21/2017
ms.author: nitinme
ms.openlocfilehash: 2e56237a75f020067b3248a1e1cfaf3c8df1371c
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: sv-SE
ms.lasthandoff: 10/06/2017
---
# <a name="service-to-service-authentication-with-data-lake-store-using-azure-active-directory"></a><span data-ttu-id="a61ca-103">Tjänst-till-tjänst-autentisering med Data Lake Store med Azure Active Directory</span><span class="sxs-lookup"><span data-stu-id="a61ca-103">Service-to-service authentication with Data Lake Store using Azure Active Directory</span></span>
> [!div class="op_single_selector"]
> * [<span data-ttu-id="a61ca-104">Tjänst-till-tjänst-autentisering</span><span class="sxs-lookup"><span data-stu-id="a61ca-104">Service-to-service authentication</span></span>](data-lake-store-authenticate-using-active-directory.md)
> * [<span data-ttu-id="a61ca-105">Slutanvändarautentisering</span><span class="sxs-lookup"><span data-stu-id="a61ca-105">End-user authentication</span></span>](data-lake-store-end-user-authenticate-using-active-directory.md)
> 
> 

<span data-ttu-id="a61ca-106">Azure Data Lake Store använder Azure Active Directory för autentisering.</span><span class="sxs-lookup"><span data-stu-id="a61ca-106">Azure Data Lake Store uses Azure Active Directory for authentication.</span></span> <span data-ttu-id="a61ca-107">Innan du skapar ett program som fungerar med Azure Data Lake Store eller Azure Data Lake Analytics kan du först bestämma hur du vill att tooauthenticate ditt program med Azure Active Directory (AD Azure).</span><span class="sxs-lookup"><span data-stu-id="a61ca-107">Before authoring an application that works with Azure Data Lake Store or Azure Data Lake Analytics, you must first decide how you would like tooauthenticate your application with Azure Active Directory (Azure AD).</span></span> <span data-ttu-id="a61ca-108">hello två huvudsakliga tillgängliga alternativ är:</span><span class="sxs-lookup"><span data-stu-id="a61ca-108">hello two main options available are:</span></span>

* <span data-ttu-id="a61ca-109">Slutanvändarautentisering</span><span class="sxs-lookup"><span data-stu-id="a61ca-109">End-user authentication</span></span> 
* <span data-ttu-id="a61ca-110">Tjänst-till-tjänst-autentisering (den här artikeln)</span><span class="sxs-lookup"><span data-stu-id="a61ca-110">Service-to-service authentication (this article)</span></span> 

<span data-ttu-id="a61ca-111">Båda dessa alternativ kan resultera i ditt program som tillhandahålls med en OAuth 2.0-token som hämtar bifogade tooeach begäran tooAzure Data Lake Store eller Azure Data Lake Analytics.</span><span class="sxs-lookup"><span data-stu-id="a61ca-111">Both these options result in your application being provided with an OAuth 2.0 token, which gets attached tooeach request made tooAzure Data Lake Store or Azure Data Lake Analytics.</span></span>

<span data-ttu-id="a61ca-112">Skapa den här artikeln pratar om hur en **webbprogram i Azure AD för autentisering av service to service**.</span><span class="sxs-lookup"><span data-stu-id="a61ca-112">This article talks about how create an **Azure AD web application for service-to-service authentication**.</span></span> <span data-ttu-id="a61ca-113">Information om programkonfigurationen för Azure AD för autentisering för slutanvändaren finns [slutanvändarens autentisering med Data Lake Store med Azure Active Directory](data-lake-store-end-user-authenticate-using-active-directory.md).</span><span class="sxs-lookup"><span data-stu-id="a61ca-113">For instructions on Azure AD application configuration for end-user authentication see [End-user authentication with Data Lake Store using Azure Active Directory](data-lake-store-end-user-authenticate-using-active-directory.md).</span></span>

## <a name="prerequisites"></a><span data-ttu-id="a61ca-114">Krav</span><span class="sxs-lookup"><span data-stu-id="a61ca-114">Prerequisites</span></span>
* <span data-ttu-id="a61ca-115">En Azure-prenumeration.</span><span class="sxs-lookup"><span data-stu-id="a61ca-115">An Azure subscription.</span></span> <span data-ttu-id="a61ca-116">Se [Hämta en kostnadsfri utvärderingsversion av Azure](https://azure.microsoft.com/pricing/free-trial/).</span><span class="sxs-lookup"><span data-stu-id="a61ca-116">See [Get Azure free trial](https://azure.microsoft.com/pricing/free-trial/).</span></span>

## <a name="step-1-create-an-active-directory-web-application"></a><span data-ttu-id="a61ca-117">Steg 1: Skapa ett Active Directory-webbprogram</span><span class="sxs-lookup"><span data-stu-id="a61ca-117">Step 1: Create an Active Directory web application</span></span>

<span data-ttu-id="a61ca-118">Skapa och konfigurera ett webbprogram i Azure AD för autentisering för tjänst-till-tjänst med Azure Data Lake Store med Azure Active Directory.</span><span class="sxs-lookup"><span data-stu-id="a61ca-118">Create and configure an Azure AD web application for service-to-service authentication with Azure Data Lake Store using Azure Active Directory.</span></span> <span data-ttu-id="a61ca-119">Instruktioner finns i [skapa en Azure AD-program](../azure-resource-manager/resource-group-create-service-principal-portal.md).</span><span class="sxs-lookup"><span data-stu-id="a61ca-119">For instructions, see [Create an Azure AD application](../azure-resource-manager/resource-group-create-service-principal-portal.md).</span></span>

<span data-ttu-id="a61ca-120">Kontrollera att du väljer när följande hello instruktionerna på hello ovanför länken **Web App / API** för programtyp, enligt hello skärmbilden nedan.</span><span class="sxs-lookup"><span data-stu-id="a61ca-120">While following hello instructions at hello above link, make sure you select **Web App / API** for application type, as shown in hello screenshot below.</span></span>

<span data-ttu-id="a61ca-121">![Skapa webbapp](./media/data-lake-store-authenticate-using-active-directory/azure-active-directory-create-web-app.png "skapa webbprogram")</span><span class="sxs-lookup"><span data-stu-id="a61ca-121">![Create web app](./media/data-lake-store-authenticate-using-active-directory/azure-active-directory-create-web-app.png "Create web app")</span></span>

## <a name="step-2-get-application-id-authentication-key-and-tenant-id"></a><span data-ttu-id="a61ca-122">Steg 2: Hämta program-id och autentiseringsnyckel klient-id</span><span class="sxs-lookup"><span data-stu-id="a61ca-122">Step 2: Get application id, authentication key, and tenant id</span></span>
<span data-ttu-id="a61ca-123">När programmässigt inloggningen måste hello-id för ditt program.</span><span class="sxs-lookup"><span data-stu-id="a61ca-123">When programmatically logging in, you need hello id for your application.</span></span> <span data-ttu-id="a61ca-124">Om hello-programmet köras under egna autentiseringsuppgifter, måste du också en autentiseringsnyckel.</span><span class="sxs-lookup"><span data-stu-id="a61ca-124">If hello application runs under its own credentials, you will also need an authentication key.</span></span>

* <span data-ttu-id="a61ca-125">Anvisningar för hur tooretrieve hello program-ID och autentisering nyckel (även kallade hello klienthemlighet) för ditt program finns [Get-ID och autentisering tangent](../azure-resource-manager/resource-group-create-service-principal-portal.md#get-application-id-and-authentication-key).</span><span class="sxs-lookup"><span data-stu-id="a61ca-125">For instructions on how tooretrieve hello application ID and authentication key (also called hello client secret) for your application, see [Get application ID and authentication key](../azure-resource-manager/resource-group-create-service-principal-portal.md#get-application-id-and-authentication-key).</span></span>

* <span data-ttu-id="a61ca-126">Anvisningar för hur tooretrieve hello klient-ID finns [hämta klient-ID](../azure-resource-manager/resource-group-create-service-principal-portal.md#get-tenant-id).</span><span class="sxs-lookup"><span data-stu-id="a61ca-126">For instructions on how tooretrieve hello tenant ID, see [Get tenant ID](../azure-resource-manager/resource-group-create-service-principal-portal.md#get-tenant-id).</span></span>

## <a name="step-3-assign-hello-azure-ad-application-toohello-azure-data-lake-store-account-file-or-folder-only-for-service-to-service-authentication"></a><span data-ttu-id="a61ca-127">Steg 3: Tilldela hello Azure AD application toohello Azure Data Lake Store-kontofil eller mapp (endast för service to service autentisering)</span><span class="sxs-lookup"><span data-stu-id="a61ca-127">Step 3: Assign hello Azure AD application toohello Azure Data Lake Store account file or folder (only for service-to-service authentication)</span></span>
1. <span data-ttu-id="a61ca-128">Logga in på nytt toohello [Azure-portalen](https://portal.azure.com) och öppna hello Azure Data Lake Store-konto som du vill tooassociate med hello Azure Active Directory-program som du skapade tidigare.</span><span class="sxs-lookup"><span data-stu-id="a61ca-128">Sign on toohello new [Azure portal](https://portal.azure.com) and open hello Azure Data Lake Store account that you want tooassociate with hello Azure Active Directory application you created earlier.</span></span>
2. <span data-ttu-id="a61ca-129">I ditt Data Lake Store-kontoblad klickar du på **Data Explorer**.</span><span class="sxs-lookup"><span data-stu-id="a61ca-129">In your Data Lake Store account blade, click **Data Explorer**.</span></span>
   
    <span data-ttu-id="a61ca-130">![Skapa kataloger i Data Lake Store-konto](./media/data-lake-store-authenticate-using-active-directory/adl.start.data.explorer.png "skapa kataloger i Data Lake-konto")</span><span class="sxs-lookup"><span data-stu-id="a61ca-130">![Create directories in Data Lake Store account](./media/data-lake-store-authenticate-using-active-directory/adl.start.data.explorer.png "Create directories in Data Lake account")</span></span>
3. <span data-ttu-id="a61ca-131">I hello **Data Explorer** bladet Klicka hello filen eller mappen som du vill tooprovide access toohello Azure AD-program och klicka sedan på **åtkomst**.</span><span class="sxs-lookup"><span data-stu-id="a61ca-131">In hello **Data Explorer** blade, click hello file or folder for which you want tooprovide access toohello Azure AD application, and then click **Access**.</span></span> <span data-ttu-id="a61ca-132">tooconfigure access tooa-fil som du måste klicka på **åtkomst** från hello **Filförhandsgranskning** bladet.</span><span class="sxs-lookup"><span data-stu-id="a61ca-132">tooconfigure access tooa file, you must click **Access** from hello **File Preview** blade.</span></span>
   
    <span data-ttu-id="a61ca-133">![Ange ACL: er i Data Lake filsystemet](./media/data-lake-store-authenticate-using-active-directory/adl.acl.1.png "Ange ACL: er i Data Lake-filsystem")</span><span class="sxs-lookup"><span data-stu-id="a61ca-133">![Set ACLs on Data Lake file system](./media/data-lake-store-authenticate-using-active-directory/adl.acl.1.png "Set ACLs on Data Lake file system")</span></span>
4. <span data-ttu-id="a61ca-134">Hej **åtkomst** bladet visar hello standard åtkomst och anpassade åtkomst har redan tilldelats toohello rot.</span><span class="sxs-lookup"><span data-stu-id="a61ca-134">hello **Access** blade lists hello standard access and custom access already assigned toohello root.</span></span> <span data-ttu-id="a61ca-135">Klicka på hello **Lägg till** ikonen tooadd Anpassad-nivå ACL: er.</span><span class="sxs-lookup"><span data-stu-id="a61ca-135">Click hello **Add** icon tooadd custom-level ACLs.</span></span>
   
    <span data-ttu-id="a61ca-136">![Visa en lista över standard och anpassad åtkomst](./media/data-lake-store-authenticate-using-active-directory/adl.acl.2.png "listan standard och anpassad åtkomst")</span><span class="sxs-lookup"><span data-stu-id="a61ca-136">![List standard and custom access](./media/data-lake-store-authenticate-using-active-directory/adl.acl.2.png "List standard and custom access")</span></span>
5. <span data-ttu-id="a61ca-137">Klicka på hello **Lägg till** ikonen tooopen hello **Lägg till anpassad åtkomst** bladet.</span><span class="sxs-lookup"><span data-stu-id="a61ca-137">Click hello **Add** icon tooopen hello **Add Custom Access** blade.</span></span> <span data-ttu-id="a61ca-138">I det här bladet, klickar du på **Välj användare eller grupp**, och klicka sedan på **Välj användare eller grupp** bladet, leta efter hello Azure Active Directory-program som du skapade tidigare.</span><span class="sxs-lookup"><span data-stu-id="a61ca-138">In this blade, click **Select User or Group**, and then in **Select User or Group** blade, look for hello Azure Active Directory application you created earlier.</span></span> <span data-ttu-id="a61ca-139">Om du har en stor mängd grupper toosearch från Använd hello textrutan på hello översta toofilter på hello gruppnamn.</span><span class="sxs-lookup"><span data-stu-id="a61ca-139">If you have a lot of groups toosearch from, use hello text box at hello top toofilter on hello group name.</span></span> <span data-ttu-id="a61ca-140">Klicka på hello grupp du tooadd och klickar sedan på **Välj**.</span><span class="sxs-lookup"><span data-stu-id="a61ca-140">Click hello group you want tooadd and then click **Select**.</span></span>
   
    <span data-ttu-id="a61ca-141">![Lägga till en grupp](./media/data-lake-store-authenticate-using-active-directory/adl.acl.3.png "lägga till en grupp")</span><span class="sxs-lookup"><span data-stu-id="a61ca-141">![Add a group](./media/data-lake-store-authenticate-using-active-directory/adl.acl.3.png "Add a group")</span></span>
6. <span data-ttu-id="a61ca-142">Klicka på **Välj behörigheter**hello behörigheter och välj om du vill tooassign hello behörigheter som standard ACL åtkomst till ACL eller båda.</span><span class="sxs-lookup"><span data-stu-id="a61ca-142">Click **Select Permissions**, select hello permissions and whether you want tooassign hello permissions as a default ACL, access ACL, or both.</span></span> <span data-ttu-id="a61ca-143">Klicka på **OK**.</span><span class="sxs-lookup"><span data-stu-id="a61ca-143">Click **OK**.</span></span>
   
    <span data-ttu-id="a61ca-144">![Tilldela behörigheter toogroup](./media/data-lake-store-authenticate-using-active-directory/adl.acl.4.png "tilldela behörigheter toogroup")</span><span class="sxs-lookup"><span data-stu-id="a61ca-144">![Assign permissions toogroup](./media/data-lake-store-authenticate-using-active-directory/adl.acl.4.png "Assign permissions toogroup")</span></span>
   
    <span data-ttu-id="a61ca-145">Mer information om behörigheter i Data Lake Store och standard-/ Access ACL: er finns [åtkomstkontroll i Data Lake Store](data-lake-store-access-control.md).</span><span class="sxs-lookup"><span data-stu-id="a61ca-145">For more information about permissions in Data Lake Store, and Default/Access ACLs, see [Access Control in Data Lake Store](data-lake-store-access-control.md).</span></span>
7. <span data-ttu-id="a61ca-146">I hello **Lägg till anpassad åtkomst** bladet, klickar du på **OK**.</span><span class="sxs-lookup"><span data-stu-id="a61ca-146">In hello **Add Custom Access** blade, click **OK**.</span></span> <span data-ttu-id="a61ca-147">hello nyligen tillagda grupp med hello som är associerade behörigheter visas nu i hello **åtkomst** bladet.</span><span class="sxs-lookup"><span data-stu-id="a61ca-147">hello newly added group, with hello associated permissions, will now be listed in hello **Access** blade.</span></span>
   
    <span data-ttu-id="a61ca-148">![Tilldela behörigheter toogroup](./media/data-lake-store-authenticate-using-active-directory/adl.acl.5.png "tilldela behörigheter toogroup")</span><span class="sxs-lookup"><span data-stu-id="a61ca-148">![Assign permissions toogroup](./media/data-lake-store-authenticate-using-active-directory/adl.acl.5.png "Assign permissions toogroup")</span></span>

## <a name="step-4-get-hello-oauth-20-token-endpoint-only-for-java-based-applications"></a><span data-ttu-id="a61ca-149">Steg 4: Hämta hello OAuth 2.0-token för slutpunkt (endast för Java-baserade program)</span><span class="sxs-lookup"><span data-stu-id="a61ca-149">Step 4: Get hello OAuth 2.0 token endpoint (only for Java-based applications)</span></span>

1. <span data-ttu-id="a61ca-150">Logga in på nytt toohello [Azure-portalen](https://portal.azure.com) och klicka på Active Directory från hello till vänster.</span><span class="sxs-lookup"><span data-stu-id="a61ca-150">Sign on toohello new [Azure portal](https://portal.azure.com) and click Active Directory from hello left pane.</span></span>

2. <span data-ttu-id="a61ca-151">Hello till vänster och klicka på **App registreringar**.</span><span class="sxs-lookup"><span data-stu-id="a61ca-151">From hello left pane, click **App registrations**.</span></span>

3. <span data-ttu-id="a61ca-152">Hello överkant hello App registreringar bladet, klickar du på **slutpunkter**.</span><span class="sxs-lookup"><span data-stu-id="a61ca-152">From hello top of hello App registrations blade, click **Endpoints**.</span></span>

    <span data-ttu-id="a61ca-153">![OAuth-token för slutpunkt](./media/data-lake-store-authenticate-using-active-directory/oauth-token-endpoint.png "OAuth-token för slutpunkt")</span><span class="sxs-lookup"><span data-stu-id="a61ca-153">![OAuth token endpoint](./media/data-lake-store-authenticate-using-active-directory/oauth-token-endpoint.png "OAuth token endpoint")</span></span>

4. <span data-ttu-id="a61ca-154">Hello listan över slutpunkter och kopiera hello OAuth 2.0-token för slutpunkt.</span><span class="sxs-lookup"><span data-stu-id="a61ca-154">From hello list of endpoints, copy hello OAuth 2.0 token endpoint.</span></span>

    <span data-ttu-id="a61ca-155">![OAuth-token för slutpunkt](./media/data-lake-store-authenticate-using-active-directory/oauth-token-endpoint-1.png "OAuth-token för slutpunkt")</span><span class="sxs-lookup"><span data-stu-id="a61ca-155">![OAuth token endpoint](./media/data-lake-store-authenticate-using-active-directory/oauth-token-endpoint-1.png "OAuth token endpoint")</span></span>   

## <a name="next-steps"></a><span data-ttu-id="a61ca-156">Nästa steg</span><span class="sxs-lookup"><span data-stu-id="a61ca-156">Next steps</span></span>
<span data-ttu-id="a61ca-157">I den här artikeln du skapat ett webbprogram i Azure AD och samlat hello information du behöver i ditt klientprogram att du skapar med hjälp av SDK för .NET, Java SDK, osv. Du kan nu fortsätta toohello följande artiklar som talar om hur toouse hello Azure AD web application toofirst autentisera med Data Lake Store och utföra andra åtgärder på hello store.</span><span class="sxs-lookup"><span data-stu-id="a61ca-157">In this article you created an Azure AD web application and gathered hello information you need in your client applications that you author using .NET SDK, Java SDK, etc. You can now proceed toohello following articles that talk about how toouse hello Azure AD web application toofirst authenticate with Data Lake Store and then perform other operations on hello store.</span></span>

* [<span data-ttu-id="a61ca-158">Kom igång med Azure Data Lake Store med hjälp av .NET SDK</span><span class="sxs-lookup"><span data-stu-id="a61ca-158">Get started with Azure Data Lake Store using .NET SDK</span></span>](data-lake-store-get-started-net-sdk.md)
* [<span data-ttu-id="a61ca-159">Kom igång med Azure Data Lake Store med hjälp av Java SDK</span><span class="sxs-lookup"><span data-stu-id="a61ca-159">Get started with Azure Data Lake Store using Java SDK</span></span>](data-lake-store-get-started-java-sdk.md)

<span data-ttu-id="a61ca-160">Den här artikeln gått du igenom hello grundläggande steg behövs tooget användaren huvudnamn upp och körs för programmet.</span><span class="sxs-lookup"><span data-stu-id="a61ca-160">This article walked you through hello basic steps needed tooget a user principal up and running for your application.</span></span> <span data-ttu-id="a61ca-161">Du kan titta på hello följande artiklar tooget ytterligare information:</span><span class="sxs-lookup"><span data-stu-id="a61ca-161">You can look at hello following articles tooget further information:</span></span>
* [<span data-ttu-id="a61ca-162">Använd PowerShell toocreate tjänstens huvudnamn</span><span class="sxs-lookup"><span data-stu-id="a61ca-162">Use PowerShell toocreate service principal</span></span>](https://docs.microsoft.com/en-us/azure/azure-resource-manager/resource-group-authenticate-service-principal)
* [<span data-ttu-id="a61ca-163">Använda autentisering med certifikat för service principal autentisering</span><span class="sxs-lookup"><span data-stu-id="a61ca-163">Use certificate authentication for service principal authentication</span></span>](https://docs.microsoft.com/en-us/azure/azure-resource-manager/resource-group-authenticate-service-principal#create-service-principal-with-certificate)
* [<span data-ttu-id="a61ca-164">Andra metoder tooauthenticate tooAzure AD</span><span class="sxs-lookup"><span data-stu-id="a61ca-164">Other methods tooauthenticate tooAzure AD</span></span>](https://docs.microsoft.com/en-us/azure/active-directory/active-directory-authentication-scenarios)



---
title: aaaAzure Data Lake Store prestanda justera riktlinjer | Microsoft Docs
description: "Riktlinjer för prestandajustering Azure Data Lake Store"
services: data-lake-store
documentationcenter: 
author: stewu
manager: amitkul
editor: cgronlun
ms.assetid: ebde7b9f-2e51-4d43-b7ab-566417221335
ms.service: data-lake-store
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: big-data
ms.date: 06/30/2017
ms.author: stewu
ms.openlocfilehash: 939faa068c0f81d18d9533956f4d336bc4d0cbe3
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: sv-SE
ms.lasthandoff: 10/06/2017
---
# <a name="tuning-azure-data-lake-store-for-performance"></a><span data-ttu-id="828f2-103">Justera Azure Data Lake Store för prestanda</span><span class="sxs-lookup"><span data-stu-id="828f2-103">Tuning Azure Data Lake Store for performance</span></span>

<span data-ttu-id="828f2-104">Data Lake Store stöder hög genomströmning för i/o-intensiva analyser och dataförflyttning.</span><span class="sxs-lookup"><span data-stu-id="828f2-104">Data Lake Store supports high-throughput for I/O intensive analytics and data movement.</span></span>  <span data-ttu-id="828f2-105">I Azure Data Lake Store är med hjälp av alla tillgängliga genomflödet – hello mängden data som kan läsas eller skrivas per sekund – viktiga tooget hello bästa prestanda.</span><span class="sxs-lookup"><span data-stu-id="828f2-105">In Azure Data Lake Store, using all available throughput – hello amount of data that can be read or written per second – is important tooget hello best performance.</span></span>  <span data-ttu-id="828f2-106">Detta uppnås genom att utföra så många läsningar och skrivningar parallellt som möjligt.</span><span class="sxs-lookup"><span data-stu-id="828f2-106">This is achieved by performing as many reads and writes in parallel as possible.</span></span>

![Data Lake Store-prestanda](./media/data-lake-store-performance-tuning-guidance/throughput.png)

<span data-ttu-id="828f2-108">Azure Data Lake Store kan skala tooprovide hello nödvändiga genomströmning för alla analytics scenario.</span><span class="sxs-lookup"><span data-stu-id="828f2-108">Azure Data Lake Store can scale tooprovide hello necessary throughput for all analytics scenario.</span></span> <span data-ttu-id="828f2-109">Som standard innehåller ett Azure Data Lake Store-konto automatiskt tillräckligt med genomflödet toomeet hello behov av en bred kategori användningsfall.</span><span class="sxs-lookup"><span data-stu-id="828f2-109">By default, an Azure Data Lake Store account provides automatically enough throughput toomeet hello needs of a broad category of use cases.</span></span> <span data-ttu-id="828f2-110">Hello fall där kunder stöter på hello Standardgränsen hello i ADLS-konto kan vara konfigurerade tooprovide mer genomströmning genom att kontakta Microsoft support.</span><span class="sxs-lookup"><span data-stu-id="828f2-110">For hello cases where customers run into hello default limit, hello ADLS account can be configured tooprovide more throughput by contacting Microsoft support.</span></span>

## <a name="data-ingestion"></a><span data-ttu-id="828f2-111">Datainhämtning</span><span class="sxs-lookup"><span data-stu-id="828f2-111">Data ingestion</span></span>

<span data-ttu-id="828f2-112">När du vill föra in data från en källa system tooADLS, är det viktigt tooconsider som hello källa maskinvara, nätverksmaskinvara för källa och network connectivity tooADLS kan vara hello flaskhalsar.</span><span class="sxs-lookup"><span data-stu-id="828f2-112">When ingesting data from a source system tooADLS, it is important tooconsider that hello source hardware, source network hardware, and network connectivity tooADLS can be hello bottleneck.</span></span>  

![Data Lake Store-prestanda](./media/data-lake-store-performance-tuning-guidance/bottleneck.png)

<span data-ttu-id="828f2-114">Det är viktigt tooensure som hello dataflyttning inte påverkas av dessa faktorer.</span><span class="sxs-lookup"><span data-stu-id="828f2-114">It is important tooensure that hello data movement is not affected by these factors.</span></span>

### <a name="source-hardware"></a><span data-ttu-id="828f2-115">Käll-maskinvara</span><span class="sxs-lookup"><span data-stu-id="828f2-115">Source Hardware</span></span>

<span data-ttu-id="828f2-116">Om du använder lokala datorer eller virtuella datorer i Azure, bör du noggrant välja hello lämplig maskinvara.</span><span class="sxs-lookup"><span data-stu-id="828f2-116">Whether you are using on-premises machines or VMs in Azure, you should carefully select hello appropriate hardware.</span></span> <span data-ttu-id="828f2-117">Föredrar SSD tooHDDs för källa maskinvara, och Välj maskinvara med snabbare axlar.</span><span class="sxs-lookup"><span data-stu-id="828f2-117">For Source Disk Hardware, prefer SSDs tooHDDs and pick disk hardware with faster spindles.</span></span> <span data-ttu-id="828f2-118">Använd hello snabbast möjligt för nätverkskort för källa nätverksmaskinvara.</span><span class="sxs-lookup"><span data-stu-id="828f2-118">For Source Network Hardware, use hello fastest NICs possible.</span></span>  <span data-ttu-id="828f2-119">På Azure rekommenderar vi Azure D14 virtuella datorer som har hello korrekt kraftfulla disk- och nätverksmaskinvara.</span><span class="sxs-lookup"><span data-stu-id="828f2-119">On Azure, we recommend Azure D14 VMs which have hello appropriately powerful disk and networking hardware.</span></span>

### <a name="network-connectivity-tooazure-data-lake-store"></a><span data-ttu-id="828f2-120">Network Connectivity tooAzure Data Lake Store</span><span class="sxs-lookup"><span data-stu-id="828f2-120">Network Connectivity tooAzure Data Lake Store</span></span>

<span data-ttu-id="828f2-121">hello nätverksanslutningen mellan datakällan och Azure Data Lake store kan ibland vara hello flaskhalsar.</span><span class="sxs-lookup"><span data-stu-id="828f2-121">hello network connectivity between your source data and Azure Data Lake store can sometimes be hello bottleneck.</span></span> <span data-ttu-id="828f2-122">När datakällan är lokalt, Överväg att använda en dedikerad länk med [Azure ExpressRoute](https://azure.microsoft.com/en-us/services/expressroute/) .</span><span class="sxs-lookup"><span data-stu-id="828f2-122">When your source data is On-Premises, consider using a dedicated link with [Azure ExpressRoute](https://azure.microsoft.com/en-us/services/expressroute/) .</span></span> <span data-ttu-id="828f2-123">Om datakällan finns i Azure, hello prestanda som är bäst när hello data är i hello samma Azure-region som hello Data Lake Store.</span><span class="sxs-lookup"><span data-stu-id="828f2-123">If your source data is in Azure, hello performance will be best when hello data is in hello same Azure region as hello Data Lake Store.</span></span>

### <a name="configure-data-ingestion-tools-for-maximum-parallelization"></a><span data-ttu-id="828f2-124">Konfigurera Datapåfyllning verktyg för maximal parallellisering</span><span class="sxs-lookup"><span data-stu-id="828f2-124">Configure Data Ingestion tools for maximum parallelization</span></span>

<span data-ttu-id="828f2-125">När du har åtgärdat hello källa maskinvara och nätverk anslutning flaskhalsar ovan, är du redo tooconfigure införandet-verktyg.</span><span class="sxs-lookup"><span data-stu-id="828f2-125">Once you have addressed hello source hardware and network connectivity bottlenecks above, you are ready tooconfigure your ingestion tools.</span></span> <span data-ttu-id="828f2-126">hello följande tabell sammanfattar hello inställningar för flera populära införandet verktyg och djupgående prestandajustering artiklar för dem.</span><span class="sxs-lookup"><span data-stu-id="828f2-126">hello following table summarizes hello key settings for several popular ingestion tools and provides in-depth performance tuning articles for them.</span></span>  <span data-ttu-id="828f2-127">Mer om vilka verktyget toouse för ditt scenario toolearn finns [artikel](https://docs.microsoft.com/en-us/azure/data-lake-store/data-lake-store-data-scenarios).</span><span class="sxs-lookup"><span data-stu-id="828f2-127">toolearn more about which tool toouse for your scenario, visit this [article](https://docs.microsoft.com/en-us/azure/data-lake-store/data-lake-store-data-scenarios).</span></span>

| <span data-ttu-id="828f2-128">Verktyget</span><span class="sxs-lookup"><span data-stu-id="828f2-128">Tool</span></span>               | <span data-ttu-id="828f2-129">Inställningar</span><span class="sxs-lookup"><span data-stu-id="828f2-129">Settings</span></span>     | <span data-ttu-id="828f2-130">Mer information</span><span class="sxs-lookup"><span data-stu-id="828f2-130">More Details</span></span>                                                                 |
|--------------------|------------------------------------------------------|------------------------------|
| <span data-ttu-id="828f2-131">PowerShell</span><span class="sxs-lookup"><span data-stu-id="828f2-131">Powershell</span></span>       | <span data-ttu-id="828f2-132">PerFileThreadCount ConcurrentFileCount</span><span class="sxs-lookup"><span data-stu-id="828f2-132">PerFileThreadCount, ConcurrentFileCount</span></span> |  [<span data-ttu-id="828f2-133">Länk</span><span class="sxs-lookup"><span data-stu-id="828f2-133">Link</span></span>](https://docs.microsoft.com/en-us/azure/data-lake-store/data-lake-store-get-started-powershell#performance-guidance-while-using-powershell)   |
| <span data-ttu-id="828f2-134">AdlCopy</span><span class="sxs-lookup"><span data-stu-id="828f2-134">AdlCopy</span></span>    | <span data-ttu-id="828f2-135">Azure Data Lake Analytics-enheter</span><span class="sxs-lookup"><span data-stu-id="828f2-135">Azure Data Lake Analytics units</span></span>  |   [<span data-ttu-id="828f2-136">Länk</span><span class="sxs-lookup"><span data-stu-id="828f2-136">Link</span></span>](https://docs.microsoft.com/en-us/azure/data-lake-store/data-lake-store-copy-data-azure-storage-blob#performance-considerations-for-using-adlcopy)         |
| <span data-ttu-id="828f2-137">DistCp</span><span class="sxs-lookup"><span data-stu-id="828f2-137">DistCp</span></span>            | <span data-ttu-id="828f2-138">-m (mapper)</span><span class="sxs-lookup"><span data-stu-id="828f2-138">-m (mapper)</span></span>   | [<span data-ttu-id="828f2-139">Länk</span><span class="sxs-lookup"><span data-stu-id="828f2-139">Link</span></span>](https://docs.microsoft.com/en-us/azure/data-lake-store/data-lake-store-copy-data-wasb-distcp#performance-considerations-while-using-distcp)                             |
| <span data-ttu-id="828f2-140">Azure Data Factory</span><span class="sxs-lookup"><span data-stu-id="828f2-140">Azure Data Factory</span></span>| <span data-ttu-id="828f2-141">parallelCopies</span><span class="sxs-lookup"><span data-stu-id="828f2-141">parallelCopies</span></span>    | [<span data-ttu-id="828f2-142">Länk</span><span class="sxs-lookup"><span data-stu-id="828f2-142">Link</span></span>](../data-factory/data-factory-copy-activity-performance.md)                          |
| <span data-ttu-id="828f2-143">Sqoop</span><span class="sxs-lookup"><span data-stu-id="828f2-143">Sqoop</span></span>           | <span data-ttu-id="828f2-144">FS.Azure.block.size -m (mapper)</span><span class="sxs-lookup"><span data-stu-id="828f2-144">fs.azure.block.size, -m (mapper)</span></span>    |   [<span data-ttu-id="828f2-145">Länk</span><span class="sxs-lookup"><span data-stu-id="828f2-145">Link</span></span>](https://blogs.msdn.microsoft.com/bigdatasupport/2015/02/17/sqoop-job-performance-tuning-in-hdinsight-hadoop/)        |

## <a name="structure-your-data-set"></a><span data-ttu-id="828f2-146">Struktur datauppsättningen</span><span class="sxs-lookup"><span data-stu-id="828f2-146">Structure your data set</span></span>

<span data-ttu-id="828f2-147">När data lagras i Data Lake Store, hello filstorlek, antal filer och mappstrukturer kan påverka prestanda.</span><span class="sxs-lookup"><span data-stu-id="828f2-147">When data is stored in Data Lake Store, hello file size, number of files, and folder structure have an impact on performance.</span></span>  <span data-ttu-id="828f2-148">hello beskrivs följande avsnitt bästa praxis inom följande områden.</span><span class="sxs-lookup"><span data-stu-id="828f2-148">hello following section describes best practices in these areas.</span></span>  

### <a name="file-size"></a><span data-ttu-id="828f2-149">Filstorlek</span><span class="sxs-lookup"><span data-stu-id="828f2-149">File size</span></span>

<span data-ttu-id="828f2-150">Analytics-motorer, till exempel HDInsight och Azure Data Lake Analytics har vanligtvis en kostnader per fil.</span><span class="sxs-lookup"><span data-stu-id="828f2-150">Typically, analytics engines such as HDInsight and Azure Data Lake Analytics have a per-file overhead.</span></span>  <span data-ttu-id="828f2-151">Om du lagrar data så många små filer kan detta påverka prestanda negativt.</span><span class="sxs-lookup"><span data-stu-id="828f2-151">If you store your data as many small files, this can negatively affect performance.</span></span>  

<span data-ttu-id="828f2-152">I allmänhet ordna dina data i större storlek filer för bättre prestanda.</span><span class="sxs-lookup"><span data-stu-id="828f2-152">In general, organize your data into larger sized files for better performance.</span></span>  <span data-ttu-id="828f2-153">Som en tumregel ordna datauppsättningar i filer på 256MB eller större.</span><span class="sxs-lookup"><span data-stu-id="828f2-153">As a rule of thumb, organize data sets in files of 256MB or larger.</span></span> <span data-ttu-id="828f2-154">I vissa fall, till exempel bilder och binära data, är det inte möjligt tooprocess dem parallellt.</span><span class="sxs-lookup"><span data-stu-id="828f2-154">In some cases such as images and binary data, it is not possible tooprocess them in parallel.</span></span>  <span data-ttu-id="828f2-155">I dessa fall bör tookeep enskilda filer under 2GB.</span><span class="sxs-lookup"><span data-stu-id="828f2-155">In these cases, it is recommended tookeep individual files under 2GB.</span></span>

<span data-ttu-id="828f2-156">Ibland begränsad data pipelines kontroll över hello rådata som har mycket små filer.</span><span class="sxs-lookup"><span data-stu-id="828f2-156">Sometimes, data pipelines have limited control over hello raw data which has lots of small files.</span></span>  <span data-ttu-id="828f2-157">Det rekommenderas toohave en ”matlagning” process som genererar större filer toouse för underordnade program.</span><span class="sxs-lookup"><span data-stu-id="828f2-157">It is recommended toohave a “cooking” process that generates larger files toouse for downstream applications.</span></span>  

### <a name="organizing-time-series-data-in-folders"></a><span data-ttu-id="828f2-158">Ordna Time Series-data i mappar</span><span class="sxs-lookup"><span data-stu-id="828f2-158">Organizing Time Series data in folders</span></span>

<span data-ttu-id="828f2-159">Partitionen rensas time series-data kan hjälpa några frågor läsa endast en delmängd av hello data, vilket förbättrar prestanda för Hive och ADLA arbetsbelastningar.</span><span class="sxs-lookup"><span data-stu-id="828f2-159">For Hive and ADLA workloads, partition pruning of time-series data can help some queries read only a subset of hello data which improves performance.</span></span>    

<span data-ttu-id="828f2-160">Dessa pipelines som mata in time series-data, placera ofta sina filer med en mycket strukturerat namngivning av filer och mappar.</span><span class="sxs-lookup"><span data-stu-id="828f2-160">Those pipelines that ingest time-series data, often place their files with a very structured naming for files and folders.</span></span> <span data-ttu-id="828f2-161">Nedan visas ett vanligt exempel som visas för data som är strukturerad efter datum:</span><span class="sxs-lookup"><span data-stu-id="828f2-161">Below is a very common example we see for data that is structured by date:</span></span>

    \DataSet\YYYY\MM\DD\datafile_YYYY_MM_DD.tsv

<span data-ttu-id="828f2-162">Observera att hello datetime information visas som mappar och hello filnamn.</span><span class="sxs-lookup"><span data-stu-id="828f2-162">Notice that hello datetime information appears both as folders and in hello filename.</span></span>

<span data-ttu-id="828f2-163">Datum och klockslag följer hello vanliga mönstret</span><span class="sxs-lookup"><span data-stu-id="828f2-163">For date and time, hello following is a common pattern</span></span>

    \DataSet\YYYY\MM\DD\HH\mm\datafile_YYYY_MM_DD_HH_mm.tsv

<span data-ttu-id="828f2-164">Hello val som du gör med hello mapp- och organisation ska igen, optimeras för hello större filstorlek och ett rimligt antal filer i varje mapp.</span><span class="sxs-lookup"><span data-stu-id="828f2-164">Again, hello choice you make with hello folder and file organization should optimize for hello larger file sizes and a reasonable number of files in each folder.</span></span>

## <a name="optimizing-io-intensive-jobs-on-hadoop-and-spark-workloads-on-hdinsight"></a><span data-ttu-id="828f2-165">Optimera beräkningsintensiva i/o-jobb på Hadoop och Spark arbetsbelastningar i HDInsight</span><span class="sxs-lookup"><span data-stu-id="828f2-165">Optimizing I/O intensive jobs on Hadoop and Spark workloads on HDInsight</span></span>

<span data-ttu-id="828f2-166">Jobb indelas i följande tre kategorier hello:</span><span class="sxs-lookup"><span data-stu-id="828f2-166">Jobs fall into one of hello following three categories:</span></span>

* <span data-ttu-id="828f2-167">**CPU-intensiv.**</span><span class="sxs-lookup"><span data-stu-id="828f2-167">**CPU intensive.**</span></span>  <span data-ttu-id="828f2-168">Dessa jobb har lång beräkning gånger med minimal i/o-tider.</span><span class="sxs-lookup"><span data-stu-id="828f2-168">These jobs have long computation times with minimal I/O times.</span></span>  <span data-ttu-id="828f2-169">Exempel är machine learning och naturligt språk bearbeta jobb.</span><span class="sxs-lookup"><span data-stu-id="828f2-169">Examples include machine learning and natural language processing jobs.</span></span>  
* <span data-ttu-id="828f2-170">**Minnesintensiva.**</span><span class="sxs-lookup"><span data-stu-id="828f2-170">**Memory intensive.**</span></span>  <span data-ttu-id="828f2-171">Dessa jobb använder mycket minne.</span><span class="sxs-lookup"><span data-stu-id="828f2-171">These jobs use lots of memory.</span></span>  <span data-ttu-id="828f2-172">Exempel: PageRank och analys i realtid jobb.</span><span class="sxs-lookup"><span data-stu-id="828f2-172">Examples include PageRank and real-time analytics jobs.</span></span>  
* <span data-ttu-id="828f2-173">**I/o-intensiva.**</span><span class="sxs-lookup"><span data-stu-id="828f2-173">**I/O intensive.**</span></span>  <span data-ttu-id="828f2-174">Dessa jobb tillbringar större delen av tiden gör i/o.</span><span class="sxs-lookup"><span data-stu-id="828f2-174">These jobs spend most of their time doing I/O.</span></span>  <span data-ttu-id="828f2-175">Ett vanligt exempel är en kopieringsjobbet som endast Läs- och skrivåtgärder.</span><span class="sxs-lookup"><span data-stu-id="828f2-175">A common example is a copy job which does only read and write operations.</span></span>  <span data-ttu-id="828f2-176">Andra exempel är data förberedelse jobb som läsa stora mängder data, utför omvandlingen vissa data och sedan skriver hello tillbaka toohello datalagret.</span><span class="sxs-lookup"><span data-stu-id="828f2-176">Other examples include data preparation jobs that read a lot of data, performs some data transformation, and then writes hello data back toohello store.</span></span>  

<span data-ttu-id="828f2-177">hello följande riktlinjer är endast tillämplig tooI i/O beräkningsintensiva jobb.</span><span class="sxs-lookup"><span data-stu-id="828f2-177">hello following guidance is only applicable tooI/O intensive jobs.</span></span>

### <a name="general-considerations-for-an-hdinsight-cluster"></a><span data-ttu-id="828f2-178">Allmänna överväganden för ett HDInsight-kluster</span><span class="sxs-lookup"><span data-stu-id="828f2-178">General Considerations for an HDInsight cluster</span></span>

* <span data-ttu-id="828f2-179">**HDInsight-versioner.**</span><span class="sxs-lookup"><span data-stu-id="828f2-179">**HDInsight versions.**</span></span> <span data-ttu-id="828f2-180">Använd hello senaste versionen av HDInsight för bästa prestanda.</span><span class="sxs-lookup"><span data-stu-id="828f2-180">For best performance, use hello latest release of HDInsight.</span></span>
* <span data-ttu-id="828f2-181">**Regioner.**</span><span class="sxs-lookup"><span data-stu-id="828f2-181">**Regions.**</span></span> <span data-ttu-id="828f2-182">Placera hello Data Lake Store i hello samma region som hello HDInsight-kluster.</span><span class="sxs-lookup"><span data-stu-id="828f2-182">Place hello Data Lake Store in hello same region as hello HDInsight cluster.</span></span>  

<span data-ttu-id="828f2-183">Ett HDInsight-kluster består av två huvudnoderna och vissa arbetsnoder.</span><span class="sxs-lookup"><span data-stu-id="828f2-183">An HDInsight cluster is composed of two head nodes and some worker nodes.</span></span> <span data-ttu-id="828f2-184">Varje arbetsnod innehåller ett specifikt antal kärnor och minne som bestäms av hello VM-typen.</span><span class="sxs-lookup"><span data-stu-id="828f2-184">Each worker node provides a specific number of cores and memory, which is determined by hello VM-type.</span></span>  <span data-ttu-id="828f2-185">När du kör ett jobb är YARN hello resurs förhandlare som allokerar hello tillgängligt minne och kärnor toocreate behållare.</span><span class="sxs-lookup"><span data-stu-id="828f2-185">When running a job, YARN is hello resource negotiator that allocates hello available memory and cores toocreate containers.</span></span>  <span data-ttu-id="828f2-186">Hello uppgifter behövs toocomplete hello jobbet körs varje behållare.</span><span class="sxs-lookup"><span data-stu-id="828f2-186">Each container runs hello tasks needed toocomplete hello job.</span></span>  <span data-ttu-id="828f2-187">Behållare köra parallella tooprocess uppgifter snabbt.</span><span class="sxs-lookup"><span data-stu-id="828f2-187">Containers run in parallel tooprocess tasks quickly.</span></span> <span data-ttu-id="828f2-188">Därför bättre prestanda genom att köra så många parallella behållare som möjligt.</span><span class="sxs-lookup"><span data-stu-id="828f2-188">Therefore, performance is improved by running as many parallel containers as possible.</span></span>

<span data-ttu-id="828f2-189">Det finns tre lager i ett HDInsight-kluster som kan vara ögonen öppna tooincrease hello antal behållare och använda alla tillgängliga genomflöde.</span><span class="sxs-lookup"><span data-stu-id="828f2-189">There are three layers within an HDInsight cluster that can be tuned tooincrease hello number of containers and use all available throughput.</span></span>  

* <span data-ttu-id="828f2-190">**Fysiska lagret**</span><span class="sxs-lookup"><span data-stu-id="828f2-190">**Physical layer**</span></span>
* <span data-ttu-id="828f2-191">**YARN-lager**</span><span class="sxs-lookup"><span data-stu-id="828f2-191">**YARN layer**</span></span>
* <span data-ttu-id="828f2-192">**Arbetsbelastningen lager**</span><span class="sxs-lookup"><span data-stu-id="828f2-192">**Workload layer**</span></span>

### <a name="physical-layer"></a><span data-ttu-id="828f2-193">Fysiska lagret</span><span class="sxs-lookup"><span data-stu-id="828f2-193">Physical Layer</span></span>

<span data-ttu-id="828f2-194">**Kör kluster med flera noder och/eller större storlek virtuella datorer.**</span><span class="sxs-lookup"><span data-stu-id="828f2-194">**Run cluster with more nodes and/or larger sized VMs.**</span></span>  <span data-ttu-id="828f2-195">Större aktiverar du toorun fler YARN-behållare som hello bilden nedan.</span><span class="sxs-lookup"><span data-stu-id="828f2-195">A larger cluster will enable you toorun more YARN containers as shown in hello picture below.</span></span>

![Data Lake Store-prestanda](./media/data-lake-store-performance-tuning-guidance/VM.png)

<span data-ttu-id="828f2-197">**Använda virtuella datorer med mer bandbredd i nätverket.**</span><span class="sxs-lookup"><span data-stu-id="828f2-197">**Use VMs with more network bandwidth.**</span></span>  <span data-ttu-id="828f2-198">hello mängden nätverksbandbredd kan utgöra en flaskhals om det finns mindre bandbredd än Data Lake Store dataflöde.</span><span class="sxs-lookup"><span data-stu-id="828f2-198">hello amount of network bandwidth can be a bottleneck if there is less network bandwidth than Data Lake Store throughput.</span></span>  <span data-ttu-id="828f2-199">Olika virtuella datorer har olika storlekar för nätverksbandbredd.</span><span class="sxs-lookup"><span data-stu-id="828f2-199">Different VMs will have varying network bandwidth sizes.</span></span>  <span data-ttu-id="828f2-200">Välj en VM-typ som har hello största möjliga nätverkets bandbredd.</span><span class="sxs-lookup"><span data-stu-id="828f2-200">Choose a VM-type that has hello largest possible network bandwidth.</span></span>

### <a name="yarn-layer"></a><span data-ttu-id="828f2-201">YARN-lager</span><span class="sxs-lookup"><span data-stu-id="828f2-201">YARN Layer</span></span>

<span data-ttu-id="828f2-202">**Använda mindre YARN-behållare.**</span><span class="sxs-lookup"><span data-stu-id="828f2-202">**Use smaller YARN containers.**</span></span>  <span data-ttu-id="828f2-203">Minska hello storleken för varje YARN behållare toocreate flera behållare med hello samma mängd resurser.</span><span class="sxs-lookup"><span data-stu-id="828f2-203">Reduce hello size of each YARN container toocreate more containers with hello same amount of resources.</span></span>

![Data Lake Store-prestanda](./media/data-lake-store-performance-tuning-guidance/small-containers.png)

<span data-ttu-id="828f2-205">Beroende på din arbetsbelastning, kommer det alltid att en YARN behållare minimistorleken som krävs.</span><span class="sxs-lookup"><span data-stu-id="828f2-205">Depending on your workload, there will always be a minimum YARN container size that is needed.</span></span> <span data-ttu-id="828f2-206">Om du väljer för liten för en behållare körs jobb i minnet är slut problem.</span><span class="sxs-lookup"><span data-stu-id="828f2-206">If you pick too small a container, your jobs will run into out-of-memory issues.</span></span> <span data-ttu-id="828f2-207">Vanligtvis vara YARN behållare mindre än 1GB.</span><span class="sxs-lookup"><span data-stu-id="828f2-207">Typically YARN containers should be no smaller than 1GB.</span></span> <span data-ttu-id="828f2-208">Det är vanligt toosee 3GB YARN behållare.</span><span class="sxs-lookup"><span data-stu-id="828f2-208">It’s common toosee 3GB YARN containers.</span></span> <span data-ttu-id="828f2-209">Du kanske måste större YARN-behållare för vissa arbetsbelastningar.</span><span class="sxs-lookup"><span data-stu-id="828f2-209">For some workloads, you may need larger YARN containers.</span></span>  

<span data-ttu-id="828f2-210">**Öka kärnor per YARN-behållare.**</span><span class="sxs-lookup"><span data-stu-id="828f2-210">**Increase cores per YARN container.**</span></span>  <span data-ttu-id="828f2-211">Öka hello antal kärnor som allokerats tooeach behållare tooincrease hello antalet parallella aktiviteter som körs i varje behållare.</span><span class="sxs-lookup"><span data-stu-id="828f2-211">Increase hello number of cores allocated tooeach container tooincrease hello number of parallel tasks that run in each container.</span></span>  <span data-ttu-id="828f2-212">Detta fungerar för program som Spark som kör flera uppgifter per behållare.</span><span class="sxs-lookup"><span data-stu-id="828f2-212">This works for applications like Spark which run multiple tasks per container.</span></span>  <span data-ttu-id="828f2-213">För program som Hive som kör en enda tråd i varje behållare, är det bättre toohave fler behållare i stället för flera kärnor per behållare.</span><span class="sxs-lookup"><span data-stu-id="828f2-213">For applications like Hive which run a single thread in each container, it is better toohave more containers rather than more cores per container.</span></span>   

### <a name="workload-layer"></a><span data-ttu-id="828f2-214">Arbetsbelastningen lager</span><span class="sxs-lookup"><span data-stu-id="828f2-214">Workload Layer</span></span>

<span data-ttu-id="828f2-215">**Använd alla tillgängliga behållare.**</span><span class="sxs-lookup"><span data-stu-id="828f2-215">**Use all available containers.**</span></span>  <span data-ttu-id="828f2-216">Ange hello antalet aktiviteter toobe lika mycket eller större än hello antalet tillgängliga behållare så att alla resurser används.</span><span class="sxs-lookup"><span data-stu-id="828f2-216">Set hello number of tasks toobe equal or larger than hello number of available containers so that all resources are utilized.</span></span>

![Data Lake Store-prestanda](./media/data-lake-store-performance-tuning-guidance/use-containers.png)

<span data-ttu-id="828f2-218">**Misslyckade aktiviteter är kostsamma.**</span><span class="sxs-lookup"><span data-stu-id="828f2-218">**Failed tasks are costly.**</span></span> <span data-ttu-id="828f2-219">Om varje aktivitet har en stor mängd data tooprocess, resulterar fel på en aktivitet i en dyr försök igen.</span><span class="sxs-lookup"><span data-stu-id="828f2-219">If each task has a large amount of data tooprocess, then failure of a task results in an expensive retry.</span></span>  <span data-ttu-id="828f2-220">Därför är det bättre toocreate fler aktiviteter, som bearbetar en liten mängd data.</span><span class="sxs-lookup"><span data-stu-id="828f2-220">Therefore, it is better toocreate more tasks, each of which processes a small amount of data.</span></span>

<span data-ttu-id="828f2-221">I tillägg toohello allmänna riktlinjer ovan har alla program olika parametrar tillgängliga tootune för det specifika programmet.</span><span class="sxs-lookup"><span data-stu-id="828f2-221">In addition toohello general guidelines above, each application has different parameters available tootune for that specific application.</span></span> <span data-ttu-id="828f2-222">hello tabellen nedan visas några av hello parametrar och länkar tooget igång med prestandajustering för varje program.</span><span class="sxs-lookup"><span data-stu-id="828f2-222">hello table below lists some of hello parameters and links tooget started with performance tuning for each application.</span></span>

| <span data-ttu-id="828f2-223">Arbetsbelastning</span><span class="sxs-lookup"><span data-stu-id="828f2-223">Workload</span></span>               | <span data-ttu-id="828f2-224">Parametern tooset uppgifter</span><span class="sxs-lookup"><span data-stu-id="828f2-224">Parameter tooset tasks</span></span>                                                         |
|--------------------|-------------------------------------------------------------------------------------|
| [<span data-ttu-id="828f2-225">Spark i HDInisight</span><span class="sxs-lookup"><span data-stu-id="828f2-225">Spark on HDInisight</span></span>](data-lake-store-performance-tuning-spark.md)       | <ul><li><span data-ttu-id="828f2-226">Antal executors</span><span class="sxs-lookup"><span data-stu-id="828f2-226">Num-executors</span></span></li><li><span data-ttu-id="828f2-227">Utföraren-minne</span><span class="sxs-lookup"><span data-stu-id="828f2-227">Executor-memory</span></span></li><li><span data-ttu-id="828f2-228">Utföraren kärnor</span><span class="sxs-lookup"><span data-stu-id="828f2-228">Executor-cores</span></span></li></ul> |
| [<span data-ttu-id="828f2-229">Hive i HDInsight</span><span class="sxs-lookup"><span data-stu-id="828f2-229">Hive on HDInsight</span></span>](data-lake-store-performance-tuning-hive.md)    | <ul><li><span data-ttu-id="828f2-230">hive.tez.container.size</span><span class="sxs-lookup"><span data-stu-id="828f2-230">hive.tez.container.size</span></span></li></ul>         |
| [<span data-ttu-id="828f2-231">MapReduce på HDInsight</span><span class="sxs-lookup"><span data-stu-id="828f2-231">MapReduce on HDInsight</span></span>](data-lake-store-performance-tuning-mapreduce.md)            | <ul><li><span data-ttu-id="828f2-232">Mapreduce.Map.Memory</span><span class="sxs-lookup"><span data-stu-id="828f2-232">Mapreduce.map.memory</span></span></li><li><span data-ttu-id="828f2-233">Mapreduce.Job.Maps</span><span class="sxs-lookup"><span data-stu-id="828f2-233">Mapreduce.job.maps</span></span></li><li><span data-ttu-id="828f2-234">Mapreduce.Reduce.Memory</span><span class="sxs-lookup"><span data-stu-id="828f2-234">Mapreduce.reduce.memory</span></span></li><li><span data-ttu-id="828f2-235">Mapreduce.Job.reduces</span><span class="sxs-lookup"><span data-stu-id="828f2-235">Mapreduce.job.reduces</span></span></li></ul> |
| [<span data-ttu-id="828f2-236">Storm på HDInsight</span><span class="sxs-lookup"><span data-stu-id="828f2-236">Storm on HDInsight</span></span>](data-lake-store-performance-tuning-storm.md)| <ul><li><span data-ttu-id="828f2-237">Antalet arbetsprocesser</span><span class="sxs-lookup"><span data-stu-id="828f2-237">Number of worker processes</span></span></li><li><span data-ttu-id="828f2-238">Antalet instanser för kanal utförare</span><span class="sxs-lookup"><span data-stu-id="828f2-238">Number of spout executor instances</span></span></li><li><span data-ttu-id="828f2-239">Antalet instanser av bulten utförare</span><span class="sxs-lookup"><span data-stu-id="828f2-239">Number of bolt executor instances</span></span> </li><li><span data-ttu-id="828f2-240">Antalet aktiviteter som kanal</span><span class="sxs-lookup"><span data-stu-id="828f2-240">Number of spout tasks</span></span></li><li><span data-ttu-id="828f2-241">Antal bult uppgifter</span><span class="sxs-lookup"><span data-stu-id="828f2-241">Number of bolt tasks</span></span></li></ul>|

## <a name="see-also"></a><span data-ttu-id="828f2-242">Se även</span><span class="sxs-lookup"><span data-stu-id="828f2-242">See also</span></span>
* [<span data-ttu-id="828f2-243">Översikt över Azure Data Lake Store</span><span class="sxs-lookup"><span data-stu-id="828f2-243">Overview of Azure Data Lake Store</span></span>](data-lake-store-overview.md)
* [<span data-ttu-id="828f2-244">Kom igång med Azure Data Lake Analytics</span><span class="sxs-lookup"><span data-stu-id="828f2-244">Get Started with Azure Data Lake Analytics</span></span>](../data-lake-analytics/data-lake-analytics-get-started-portal.md)

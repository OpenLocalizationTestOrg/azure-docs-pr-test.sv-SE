---
title: "Riktlinjer för prestandajustering Azure Data Lake Store | Microsoft Docs"
description: "Riktlinjer för prestandajustering Azure Data Lake Store"
services: data-lake-store
documentationcenter: 
author: stewu
manager: amitkul
editor: cgronlun
ms.assetid: ebde7b9f-2e51-4d43-b7ab-566417221335
ms.service: data-lake-store
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: big-data
ms.date: 06/30/2017
ms.author: stewu
ms.openlocfilehash: e7ea83465328bd4c7479dec4093cd94700463854
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: sv-SE
ms.lasthandoff: 07/11/2017
---
# <a name="tuning-azure-data-lake-store-for-performance"></a><span data-ttu-id="bf178-103">Justera Azure Data Lake Store för prestanda</span><span class="sxs-lookup"><span data-stu-id="bf178-103">Tuning Azure Data Lake Store for performance</span></span>

<span data-ttu-id="bf178-104">Data Lake Store stöder hög genomströmning för i/o-intensiva analyser och dataförflyttning.</span><span class="sxs-lookup"><span data-stu-id="bf178-104">Data Lake Store supports high-throughput for I/O intensive analytics and data movement.</span></span>  <span data-ttu-id="bf178-105">Azure Data Lake Store är med hjälp av alla tillgängliga genomflödet – mängden data som kan läsas eller skrivas per sekund – viktigt att få bästa möjliga prestanda.</span><span class="sxs-lookup"><span data-stu-id="bf178-105">In Azure Data Lake Store, using all available throughput – the amount of data that can be read or written per second – is important to get the best performance.</span></span>  <span data-ttu-id="bf178-106">Detta uppnås genom att utföra så många läsningar och skrivningar parallellt som möjligt.</span><span class="sxs-lookup"><span data-stu-id="bf178-106">This is achieved by performing as many reads and writes in parallel as possible.</span></span>

![Data Lake Store-prestanda](./media/data-lake-store-performance-tuning-guidance/throughput.png)

<span data-ttu-id="bf178-108">Azure Data Lake Store kan skalas för att tillhandahålla nödvändiga genomströmning för alla analytics scenario.</span><span class="sxs-lookup"><span data-stu-id="bf178-108">Azure Data Lake Store can scale to provide the necessary throughput for all analytics scenario.</span></span> <span data-ttu-id="bf178-109">Ett Azure Data Lake Store-konto ger som standard automatiskt tillräckligt med dataflöde för att uppfylla behoven i väldigt många användningsområden.</span><span class="sxs-lookup"><span data-stu-id="bf178-109">By default, an Azure Data Lake Store account provides automatically enough throughput to meet the needs of a broad category of use cases.</span></span> <span data-ttu-id="bf178-110">I de fall där kunder stöter på Standardgränsen, kan ADLS-konto konfigureras för att ge mer genomströmning genom att kontakta Microsoft support.</span><span class="sxs-lookup"><span data-stu-id="bf178-110">For the cases where customers run into the default limit, the ADLS account can be configured to provide more throughput by contacting Microsoft support.</span></span>

## <a name="data-ingestion"></a><span data-ttu-id="bf178-111">Datainhämtning</span><span class="sxs-lookup"><span data-stu-id="bf178-111">Data ingestion</span></span>

<span data-ttu-id="bf178-112">När du vill föra in data från ett källsystem till ADLS, är det viktigt att tänka på att källan maskinvara, nätverksmaskinvara för källa och nätverksanslutning till ADLS kan vara orsaken till detta.</span><span class="sxs-lookup"><span data-stu-id="bf178-112">When ingesting data from a source system to ADLS, it is important to consider that the source hardware, source network hardware, and network connectivity to ADLS can be the bottleneck.</span></span>  

![Data Lake Store-prestanda](./media/data-lake-store-performance-tuning-guidance/bottleneck.png)

<span data-ttu-id="bf178-114">Det är viktigt att säkerställa att data flyttas inte påverkas av dessa faktorer.</span><span class="sxs-lookup"><span data-stu-id="bf178-114">It is important to ensure that the data movement is not affected by these factors.</span></span>

### <a name="source-hardware"></a><span data-ttu-id="bf178-115">Käll-maskinvara</span><span class="sxs-lookup"><span data-stu-id="bf178-115">Source Hardware</span></span>

<span data-ttu-id="bf178-116">Om du använder lokala datorer eller virtuella datorer i Azure, bör du noggrant välja lämplig maskinvara.</span><span class="sxs-lookup"><span data-stu-id="bf178-116">Whether you are using on-premises machines or VMs in Azure, you should carefully select the appropriate hardware.</span></span> <span data-ttu-id="bf178-117">Föredrar SSD hårddiskar för källa maskinvara, och Välj maskinvara med snabbare axlar.</span><span class="sxs-lookup"><span data-stu-id="bf178-117">For Source Disk Hardware, prefer SSDs to HDDs and pick disk hardware with faster spindles.</span></span> <span data-ttu-id="bf178-118">Använd snabbaste nätverkskort möjliga för källa nätverksmaskinvara.</span><span class="sxs-lookup"><span data-stu-id="bf178-118">For Source Network Hardware, use the fastest NICs possible.</span></span>  <span data-ttu-id="bf178-119">På Azure rekommenderar vi Azure D14 virtuella datorer som har korrekt kraftfulla disk- och nätverksmaskinvara.</span><span class="sxs-lookup"><span data-stu-id="bf178-119">On Azure, we recommend Azure D14 VMs which have the appropriately powerful disk and networking hardware.</span></span>

### <a name="network-connectivity-to-azure-data-lake-store"></a><span data-ttu-id="bf178-120">Nätverksanslutningen till Azure Data Lake Store</span><span class="sxs-lookup"><span data-stu-id="bf178-120">Network Connectivity to Azure Data Lake Store</span></span>

<span data-ttu-id="bf178-121">Nätverksanslutningen mellan datakällan och Azure Data Lake store kan ibland vara flaskhals.</span><span class="sxs-lookup"><span data-stu-id="bf178-121">The network connectivity between your source data and Azure Data Lake store can sometimes be the bottleneck.</span></span> <span data-ttu-id="bf178-122">När datakällan är lokalt, Överväg att använda en dedikerad länk med [Azure ExpressRoute](https://azure.microsoft.com/en-us/services/expressroute/) .</span><span class="sxs-lookup"><span data-stu-id="bf178-122">When your source data is On-Premises, consider using a dedicated link with [Azure ExpressRoute](https://azure.microsoft.com/en-us/services/expressroute/) .</span></span> <span data-ttu-id="bf178-123">Om datakällan är i Azure, prestanda som är bäst när data är i samma Azure-region som Data Lake Store.</span><span class="sxs-lookup"><span data-stu-id="bf178-123">If your source data is in Azure, the performance will be best when the data is in the same Azure region as the Data Lake Store.</span></span>

### <a name="configure-data-ingestion-tools-for-maximum-parallelization"></a><span data-ttu-id="bf178-124">Konfigurera Datapåfyllning verktyg för maximal parallellisering</span><span class="sxs-lookup"><span data-stu-id="bf178-124">Configure Data Ingestion tools for maximum parallelization</span></span>

<span data-ttu-id="bf178-125">När du har åtgärdat maskinvaran som källa och network connectivity flaskhalsar ovan, är du redo att konfigurera införandet-verktyg.</span><span class="sxs-lookup"><span data-stu-id="bf178-125">Once you have addressed the source hardware and network connectivity bottlenecks above, you are ready to configure your ingestion tools.</span></span> <span data-ttu-id="bf178-126">Följande tabell sammanfattar viktiga inställningar för flera populära införandet verktyg och ger detaljerad prestandajustering artiklar för dem.</span><span class="sxs-lookup"><span data-stu-id="bf178-126">The following table summarizes the key settings for several popular ingestion tools and provides in-depth performance tuning articles for them.</span></span>  <span data-ttu-id="bf178-127">Mer information om vilka verktyg som ska användas för ditt scenario finns [artikel](https://docs.microsoft.com/en-us/azure/data-lake-store/data-lake-store-data-scenarios).</span><span class="sxs-lookup"><span data-stu-id="bf178-127">To learn more about which tool to use for your scenario, visit this [article](https://docs.microsoft.com/en-us/azure/data-lake-store/data-lake-store-data-scenarios).</span></span>

| <span data-ttu-id="bf178-128">Verktyget</span><span class="sxs-lookup"><span data-stu-id="bf178-128">Tool</span></span>               | <span data-ttu-id="bf178-129">Inställningar</span><span class="sxs-lookup"><span data-stu-id="bf178-129">Settings</span></span>     | <span data-ttu-id="bf178-130">Mer information</span><span class="sxs-lookup"><span data-stu-id="bf178-130">More Details</span></span>                                                                 |
|--------------------|------------------------------------------------------|------------------------------|
| <span data-ttu-id="bf178-131">PowerShell</span><span class="sxs-lookup"><span data-stu-id="bf178-131">Powershell</span></span>       | <span data-ttu-id="bf178-132">PerFileThreadCount ConcurrentFileCount</span><span class="sxs-lookup"><span data-stu-id="bf178-132">PerFileThreadCount, ConcurrentFileCount</span></span> |  [<span data-ttu-id="bf178-133">Länk</span><span class="sxs-lookup"><span data-stu-id="bf178-133">Link</span></span>](https://docs.microsoft.com/en-us/azure/data-lake-store/data-lake-store-get-started-powershell#performance-guidance-while-using-powershell)   |
| <span data-ttu-id="bf178-134">AdlCopy</span><span class="sxs-lookup"><span data-stu-id="bf178-134">AdlCopy</span></span>    | <span data-ttu-id="bf178-135">Azure Data Lake Analytics-enheter</span><span class="sxs-lookup"><span data-stu-id="bf178-135">Azure Data Lake Analytics units</span></span>  |   [<span data-ttu-id="bf178-136">Länk</span><span class="sxs-lookup"><span data-stu-id="bf178-136">Link</span></span>](https://docs.microsoft.com/en-us/azure/data-lake-store/data-lake-store-copy-data-azure-storage-blob#performance-considerations-for-using-adlcopy)         |
| <span data-ttu-id="bf178-137">DistCp</span><span class="sxs-lookup"><span data-stu-id="bf178-137">DistCp</span></span>            | <span data-ttu-id="bf178-138">-m (mapper)</span><span class="sxs-lookup"><span data-stu-id="bf178-138">-m (mapper)</span></span>   | [<span data-ttu-id="bf178-139">Länk</span><span class="sxs-lookup"><span data-stu-id="bf178-139">Link</span></span>](https://docs.microsoft.com/en-us/azure/data-lake-store/data-lake-store-copy-data-wasb-distcp#performance-considerations-while-using-distcp)                             |
| <span data-ttu-id="bf178-140">Azure Data Factory</span><span class="sxs-lookup"><span data-stu-id="bf178-140">Azure Data Factory</span></span>| <span data-ttu-id="bf178-141">parallelCopies</span><span class="sxs-lookup"><span data-stu-id="bf178-141">parallelCopies</span></span>    | [<span data-ttu-id="bf178-142">Länk</span><span class="sxs-lookup"><span data-stu-id="bf178-142">Link</span></span>](../data-factory/data-factory-copy-activity-performance.md)                          |
| <span data-ttu-id="bf178-143">Sqoop</span><span class="sxs-lookup"><span data-stu-id="bf178-143">Sqoop</span></span>           | <span data-ttu-id="bf178-144">FS.Azure.block.size -m (mapper)</span><span class="sxs-lookup"><span data-stu-id="bf178-144">fs.azure.block.size, -m (mapper)</span></span>    |   [<span data-ttu-id="bf178-145">Länk</span><span class="sxs-lookup"><span data-stu-id="bf178-145">Link</span></span>](https://blogs.msdn.microsoft.com/bigdatasupport/2015/02/17/sqoop-job-performance-tuning-in-hdinsight-hadoop/)        |

## <a name="structure-your-data-set"></a><span data-ttu-id="bf178-146">Struktur datauppsättningen</span><span class="sxs-lookup"><span data-stu-id="bf178-146">Structure your data set</span></span>

<span data-ttu-id="bf178-147">När data lagras i Data Lake Store, filstorlek, antal filer och mappstrukturer kan påverka prestanda.</span><span class="sxs-lookup"><span data-stu-id="bf178-147">When data is stored in Data Lake Store, the file size, number of files, and folder structure have an impact on performance.</span></span>  <span data-ttu-id="bf178-148">I följande avsnitt beskrivs bästa praxis inom följande områden.</span><span class="sxs-lookup"><span data-stu-id="bf178-148">The following section describes best practices in these areas.</span></span>  

### <a name="file-size"></a><span data-ttu-id="bf178-149">Filstorlek</span><span class="sxs-lookup"><span data-stu-id="bf178-149">File size</span></span>

<span data-ttu-id="bf178-150">Analytics-motorer, till exempel HDInsight och Azure Data Lake Analytics har vanligtvis en kostnader per fil.</span><span class="sxs-lookup"><span data-stu-id="bf178-150">Typically, analytics engines such as HDInsight and Azure Data Lake Analytics have a per-file overhead.</span></span>  <span data-ttu-id="bf178-151">Om du lagrar data så många små filer kan detta påverka prestanda negativt.</span><span class="sxs-lookup"><span data-stu-id="bf178-151">If you store your data as many small files, this can negatively affect performance.</span></span>  

<span data-ttu-id="bf178-152">I allmänhet ordna dina data i större storlek filer för bättre prestanda.</span><span class="sxs-lookup"><span data-stu-id="bf178-152">In general, organize your data into larger sized files for better performance.</span></span>  <span data-ttu-id="bf178-153">Som en tumregel ordna datauppsättningar i filer på 256MB eller större.</span><span class="sxs-lookup"><span data-stu-id="bf178-153">As a rule of thumb, organize data sets in files of 256MB or larger.</span></span> <span data-ttu-id="bf178-154">I vissa fall, till exempel bilder och binära data går inte att behandla dem. parallellt.</span><span class="sxs-lookup"><span data-stu-id="bf178-154">In some cases such as images and binary data, it is not possible to process them in parallel.</span></span>  <span data-ttu-id="bf178-155">I dessa fall rekommenderas att hålla enskilda filer under 2GB.</span><span class="sxs-lookup"><span data-stu-id="bf178-155">In these cases, it is recommended to keep individual files under 2GB.</span></span>

<span data-ttu-id="bf178-156">Ibland begränsad data pipelines kontroll över rådata som har mycket små filer.</span><span class="sxs-lookup"><span data-stu-id="bf178-156">Sometimes, data pipelines have limited control over the raw data which has lots of small files.</span></span>  <span data-ttu-id="bf178-157">Vi rekommenderar att du har en ”tillagning” process som genererar större filer ska användas för underordnade program.</span><span class="sxs-lookup"><span data-stu-id="bf178-157">It is recommended to have a “cooking” process that generates larger files to use for downstream applications.</span></span>  

### <a name="organizing-time-series-data-in-folders"></a><span data-ttu-id="bf178-158">Ordna Time Series-data i mappar</span><span class="sxs-lookup"><span data-stu-id="bf178-158">Organizing Time Series data in folders</span></span>

<span data-ttu-id="bf178-159">Partitionen rensas time series-data kan hjälpa några frågor läsa en delmängd av de uppgifter som förbättrar prestanda för Hive och ADLA arbetsbelastningar.</span><span class="sxs-lookup"><span data-stu-id="bf178-159">For Hive and ADLA workloads, partition pruning of time-series data can help some queries read only a subset of the data which improves performance.</span></span>    

<span data-ttu-id="bf178-160">Dessa pipelines som mata in time series-data, placera ofta sina filer med en mycket strukturerat namngivning av filer och mappar.</span><span class="sxs-lookup"><span data-stu-id="bf178-160">Those pipelines that ingest time-series data, often place their files with a very structured naming for files and folders.</span></span> <span data-ttu-id="bf178-161">Nedan visas ett vanligt exempel som visas för data som är strukturerad efter datum:</span><span class="sxs-lookup"><span data-stu-id="bf178-161">Below is a very common example we see for data that is structured by date:</span></span>

    \DataSet\YYYY\MM\DD\datafile_YYYY_MM_DD.tsv

<span data-ttu-id="bf178-162">Observera att datetime information visas både som mappar och i filnamnet.</span><span class="sxs-lookup"><span data-stu-id="bf178-162">Notice that the datetime information appears both as folders and in the filename.</span></span>

<span data-ttu-id="bf178-163">För datum och tid följer vanliga mönstret</span><span class="sxs-lookup"><span data-stu-id="bf178-163">For date and time, the following is a common pattern</span></span>

    \DataSet\YYYY\MM\DD\HH\mm\datafile_YYYY_MM_DD_HH_mm.tsv

<span data-ttu-id="bf178-164">Återigen val som du gör med mappen och filen organisation ska optimeras för större filstorlek och ett rimligt antal filer i varje mapp.</span><span class="sxs-lookup"><span data-stu-id="bf178-164">Again, the choice you make with the folder and file organization should optimize for the larger file sizes and a reasonable number of files in each folder.</span></span>

## <a name="optimizing-io-intensive-jobs-on-hadoop-and-spark-workloads-on-hdinsight"></a><span data-ttu-id="bf178-165">Optimera beräkningsintensiva i/o-jobb på Hadoop och Spark arbetsbelastningar i HDInsight</span><span class="sxs-lookup"><span data-stu-id="bf178-165">Optimizing I/O intensive jobs on Hadoop and Spark workloads on HDInsight</span></span>

<span data-ttu-id="bf178-166">Jobb indelas i följande tre kategorier:</span><span class="sxs-lookup"><span data-stu-id="bf178-166">Jobs fall into one of the following three categories:</span></span>

* <span data-ttu-id="bf178-167">**CPU-intensiv.**</span><span class="sxs-lookup"><span data-stu-id="bf178-167">**CPU intensive.**</span></span>  <span data-ttu-id="bf178-168">Dessa jobb har lång beräkning gånger med minimal i/o-tider.</span><span class="sxs-lookup"><span data-stu-id="bf178-168">These jobs have long computation times with minimal I/O times.</span></span>  <span data-ttu-id="bf178-169">Exempel är machine learning och naturligt språk bearbeta jobb.</span><span class="sxs-lookup"><span data-stu-id="bf178-169">Examples include machine learning and natural language processing jobs.</span></span>  
* <span data-ttu-id="bf178-170">**Minnesintensiva.**</span><span class="sxs-lookup"><span data-stu-id="bf178-170">**Memory intensive.**</span></span>  <span data-ttu-id="bf178-171">Dessa jobb använder mycket minne.</span><span class="sxs-lookup"><span data-stu-id="bf178-171">These jobs use lots of memory.</span></span>  <span data-ttu-id="bf178-172">Exempel: PageRank och analys i realtid jobb.</span><span class="sxs-lookup"><span data-stu-id="bf178-172">Examples include PageRank and real-time analytics jobs.</span></span>  
* <span data-ttu-id="bf178-173">**I/o-intensiva.**</span><span class="sxs-lookup"><span data-stu-id="bf178-173">**I/O intensive.**</span></span>  <span data-ttu-id="bf178-174">Dessa jobb tillbringar större delen av tiden gör i/o.</span><span class="sxs-lookup"><span data-stu-id="bf178-174">These jobs spend most of their time doing I/O.</span></span>  <span data-ttu-id="bf178-175">Ett vanligt exempel är en kopieringsjobbet som endast Läs- och skrivåtgärder.</span><span class="sxs-lookup"><span data-stu-id="bf178-175">A common example is a copy job which does only read and write operations.</span></span>  <span data-ttu-id="bf178-176">Andra exempel är data förberedelse jobb som läsa stora mängder data, utför vissa Dataomvandling och skriver sedan data tillbaka till arkivet.</span><span class="sxs-lookup"><span data-stu-id="bf178-176">Other examples include data preparation jobs that read a lot of data, performs some data transformation, and then writes the data back to the store.</span></span>  

<span data-ttu-id="bf178-177">Följande riktlinjer gäller endast i/o-intensiva jobb.</span><span class="sxs-lookup"><span data-stu-id="bf178-177">The following guidance is only applicable to I/O intensive jobs.</span></span>

### <a name="general-considerations-for-an-hdinsight-cluster"></a><span data-ttu-id="bf178-178">Allmänna överväganden för ett HDInsight-kluster</span><span class="sxs-lookup"><span data-stu-id="bf178-178">General Considerations for an HDInsight cluster</span></span>

* <span data-ttu-id="bf178-179">**HDInsight-versioner.**</span><span class="sxs-lookup"><span data-stu-id="bf178-179">**HDInsight versions.**</span></span> <span data-ttu-id="bf178-180">Använd den senaste versionen av HDInsight för bästa prestanda.</span><span class="sxs-lookup"><span data-stu-id="bf178-180">For best performance, use the latest release of HDInsight.</span></span>
* <span data-ttu-id="bf178-181">**Regioner.**</span><span class="sxs-lookup"><span data-stu-id="bf178-181">**Regions.**</span></span> <span data-ttu-id="bf178-182">Placera Data Lake Store i samma region som HDInsight-klustret.</span><span class="sxs-lookup"><span data-stu-id="bf178-182">Place the Data Lake Store in the same region as the HDInsight cluster.</span></span>  

<span data-ttu-id="bf178-183">Ett HDInsight-kluster består av två huvudnoderna och vissa arbetsnoder.</span><span class="sxs-lookup"><span data-stu-id="bf178-183">An HDInsight cluster is composed of two head nodes and some worker nodes.</span></span> <span data-ttu-id="bf178-184">Varje arbetsnod innehåller ett specifikt antal kärnor och minne som bestäms av VM-typen.</span><span class="sxs-lookup"><span data-stu-id="bf178-184">Each worker node provides a specific number of cores and memory, which is determined by the VM-type.</span></span>  <span data-ttu-id="bf178-185">När du kör ett jobb är YARN resurs förhandlare som allokerar tillgängligt minne och kärnor för att skapa behållare.</span><span class="sxs-lookup"><span data-stu-id="bf178-185">When running a job, YARN is the resource negotiator that allocates the available memory and cores to create containers.</span></span>  <span data-ttu-id="bf178-186">Varje behållare körs de uppgifter som krävs för att slutföra jobbet.</span><span class="sxs-lookup"><span data-stu-id="bf178-186">Each container runs the tasks needed to complete the job.</span></span>  <span data-ttu-id="bf178-187">Behållare körs parallellt för att utföra aktiviteter snabbt.</span><span class="sxs-lookup"><span data-stu-id="bf178-187">Containers run in parallel to process tasks quickly.</span></span> <span data-ttu-id="bf178-188">Därför bättre prestanda genom att köra så många parallella behållare som möjligt.</span><span class="sxs-lookup"><span data-stu-id="bf178-188">Therefore, performance is improved by running as many parallel containers as possible.</span></span>

<span data-ttu-id="bf178-189">Det finns tre lager i ett HDInsight-kluster som kan anpassas för att öka antalet behållare och använda alla tillgängliga genomflöde.</span><span class="sxs-lookup"><span data-stu-id="bf178-189">There are three layers within an HDInsight cluster that can be tuned to increase the number of containers and use all available throughput.</span></span>  

* <span data-ttu-id="bf178-190">**Fysiska lagret**</span><span class="sxs-lookup"><span data-stu-id="bf178-190">**Physical layer**</span></span>
* <span data-ttu-id="bf178-191">**YARN-lager**</span><span class="sxs-lookup"><span data-stu-id="bf178-191">**YARN layer**</span></span>
* <span data-ttu-id="bf178-192">**Arbetsbelastningen lager**</span><span class="sxs-lookup"><span data-stu-id="bf178-192">**Workload layer**</span></span>

### <a name="physical-layer"></a><span data-ttu-id="bf178-193">Fysiska lagret</span><span class="sxs-lookup"><span data-stu-id="bf178-193">Physical Layer</span></span>

<span data-ttu-id="bf178-194">**Kör kluster med flera noder och/eller större storlek virtuella datorer.**</span><span class="sxs-lookup"><span data-stu-id="bf178-194">**Run cluster with more nodes and/or larger sized VMs.**</span></span>  <span data-ttu-id="bf178-195">Större gör att du kan köra fler YARN-behållare som visas i bilden nedan.</span><span class="sxs-lookup"><span data-stu-id="bf178-195">A larger cluster will enable you to run more YARN containers as shown in the picture below.</span></span>

![Data Lake Store-prestanda](./media/data-lake-store-performance-tuning-guidance/VM.png)

<span data-ttu-id="bf178-197">**Använda virtuella datorer med mer bandbredd i nätverket.**</span><span class="sxs-lookup"><span data-stu-id="bf178-197">**Use VMs with more network bandwidth.**</span></span>  <span data-ttu-id="bf178-198">Mängden nätverksbandbredd kan utgöra en flaskhals om det finns mindre bandbredd än Data Lake Store dataflöde.</span><span class="sxs-lookup"><span data-stu-id="bf178-198">The amount of network bandwidth can be a bottleneck if there is less network bandwidth than Data Lake Store throughput.</span></span>  <span data-ttu-id="bf178-199">Olika virtuella datorer har olika storlekar för nätverksbandbredd.</span><span class="sxs-lookup"><span data-stu-id="bf178-199">Different VMs will have varying network bandwidth sizes.</span></span>  <span data-ttu-id="bf178-200">Välj en VM-typ som har den största möjliga nätverksbandbredden.</span><span class="sxs-lookup"><span data-stu-id="bf178-200">Choose a VM-type that has the largest possible network bandwidth.</span></span>

### <a name="yarn-layer"></a><span data-ttu-id="bf178-201">YARN-lager</span><span class="sxs-lookup"><span data-stu-id="bf178-201">YARN Layer</span></span>

<span data-ttu-id="bf178-202">**Använda mindre YARN-behållare.**</span><span class="sxs-lookup"><span data-stu-id="bf178-202">**Use smaller YARN containers.**</span></span>  <span data-ttu-id="bf178-203">Minska storleken på varje YARN-behållare för att skapa fler behållare med samma grad av resurser.</span><span class="sxs-lookup"><span data-stu-id="bf178-203">Reduce the size of each YARN container to create more containers with the same amount of resources.</span></span>

![Data Lake Store-prestanda](./media/data-lake-store-performance-tuning-guidance/small-containers.png)

<span data-ttu-id="bf178-205">Beroende på din arbetsbelastning, kommer det alltid att en YARN behållare minimistorleken som krävs.</span><span class="sxs-lookup"><span data-stu-id="bf178-205">Depending on your workload, there will always be a minimum YARN container size that is needed.</span></span> <span data-ttu-id="bf178-206">Om du väljer för liten för en behållare körs jobb i minnet är slut problem.</span><span class="sxs-lookup"><span data-stu-id="bf178-206">If you pick too small a container, your jobs will run into out-of-memory issues.</span></span> <span data-ttu-id="bf178-207">Vanligtvis vara YARN behållare mindre än 1GB.</span><span class="sxs-lookup"><span data-stu-id="bf178-207">Typically YARN containers should be no smaller than 1GB.</span></span> <span data-ttu-id="bf178-208">Det är vanligt att visa 3GB YARN behållare.</span><span class="sxs-lookup"><span data-stu-id="bf178-208">It’s common to see 3GB YARN containers.</span></span> <span data-ttu-id="bf178-209">Du kanske måste större YARN-behållare för vissa arbetsbelastningar.</span><span class="sxs-lookup"><span data-stu-id="bf178-209">For some workloads, you may need larger YARN containers.</span></span>  

<span data-ttu-id="bf178-210">**Öka kärnor per YARN-behållare.**</span><span class="sxs-lookup"><span data-stu-id="bf178-210">**Increase cores per YARN container.**</span></span>  <span data-ttu-id="bf178-211">Öka antalet kärnor tilldelas varje behållare för att öka antalet parallella aktiviteter som körs i varje behållare.</span><span class="sxs-lookup"><span data-stu-id="bf178-211">Increase the number of cores allocated to each container to increase the number of parallel tasks that run in each container.</span></span>  <span data-ttu-id="bf178-212">Detta fungerar för program som Spark som kör flera uppgifter per behållare.</span><span class="sxs-lookup"><span data-stu-id="bf178-212">This works for applications like Spark which run multiple tasks per container.</span></span>  <span data-ttu-id="bf178-213">För program som Hive som kör en tråd i varje behållare, är det bättre att ha fler behållare i stället för flera kärnor per behållare.</span><span class="sxs-lookup"><span data-stu-id="bf178-213">For applications like Hive which run a single thread in each container, it is better to have more containers rather than more cores per container.</span></span>   

### <a name="workload-layer"></a><span data-ttu-id="bf178-214">Arbetsbelastningen lager</span><span class="sxs-lookup"><span data-stu-id="bf178-214">Workload Layer</span></span>

<span data-ttu-id="bf178-215">**Använd alla tillgängliga behållare.**</span><span class="sxs-lookup"><span data-stu-id="bf178-215">**Use all available containers.**</span></span>  <span data-ttu-id="bf178-216">Ange antalet aktiviteter som ska vara lika med eller större än antalet tillgängliga behållare så att alla resurser används.</span><span class="sxs-lookup"><span data-stu-id="bf178-216">Set the number of tasks to be equal or larger than the number of available containers so that all resources are utilized.</span></span>

![Data Lake Store-prestanda](./media/data-lake-store-performance-tuning-guidance/use-containers.png)

<span data-ttu-id="bf178-218">**Misslyckade aktiviteter är kostsamma.**</span><span class="sxs-lookup"><span data-stu-id="bf178-218">**Failed tasks are costly.**</span></span> <span data-ttu-id="bf178-219">Om varje aktivitet har en stor mängd data att bearbeta, resulterar fel på en aktivitet i en dyr försök igen.</span><span class="sxs-lookup"><span data-stu-id="bf178-219">If each task has a large amount of data to process, then failure of a task results in an expensive retry.</span></span>  <span data-ttu-id="bf178-220">Därför är det bättre att skapa fler aktiviteter, som bearbetar en liten mängd data.</span><span class="sxs-lookup"><span data-stu-id="bf178-220">Therefore, it is better to create more tasks, each of which processes a small amount of data.</span></span>

<span data-ttu-id="bf178-221">Förutom de allmänna riktlinjerna ovan har olika parametrar som är tillgängliga för att finjustera för det specifika programmet i varje program.</span><span class="sxs-lookup"><span data-stu-id="bf178-221">In addition to the general guidelines above, each application has different parameters available to tune for that specific application.</span></span> <span data-ttu-id="bf178-222">I tabellen nedan visas några av de parametrar och länkar till komma igång med prestandajustering för varje program.</span><span class="sxs-lookup"><span data-stu-id="bf178-222">The table below lists some of the parameters and links to get started with performance tuning for each application.</span></span>

| <span data-ttu-id="bf178-223">Arbetsbelastning</span><span class="sxs-lookup"><span data-stu-id="bf178-223">Workload</span></span>               | <span data-ttu-id="bf178-224">Att ange uppgifter</span><span class="sxs-lookup"><span data-stu-id="bf178-224">Parameter to set tasks</span></span>                                                         |
|--------------------|-------------------------------------------------------------------------------------|
| [<span data-ttu-id="bf178-225">Spark i HDInisight</span><span class="sxs-lookup"><span data-stu-id="bf178-225">Spark on HDInisight</span></span>](data-lake-store-performance-tuning-spark.md)       | <ul><li><span data-ttu-id="bf178-226">Antal executors</span><span class="sxs-lookup"><span data-stu-id="bf178-226">Num-executors</span></span></li><li><span data-ttu-id="bf178-227">Utföraren-minne</span><span class="sxs-lookup"><span data-stu-id="bf178-227">Executor-memory</span></span></li><li><span data-ttu-id="bf178-228">Utföraren kärnor</span><span class="sxs-lookup"><span data-stu-id="bf178-228">Executor-cores</span></span></li></ul> |
| [<span data-ttu-id="bf178-229">Hive i HDInsight</span><span class="sxs-lookup"><span data-stu-id="bf178-229">Hive on HDInsight</span></span>](data-lake-store-performance-tuning-hive.md)    | <ul><li><span data-ttu-id="bf178-230">hive.tez.container.size</span><span class="sxs-lookup"><span data-stu-id="bf178-230">hive.tez.container.size</span></span></li></ul>         |
| [<span data-ttu-id="bf178-231">MapReduce på HDInsight</span><span class="sxs-lookup"><span data-stu-id="bf178-231">MapReduce on HDInsight</span></span>](data-lake-store-performance-tuning-mapreduce.md)            | <ul><li><span data-ttu-id="bf178-232">Mapreduce.Map.Memory</span><span class="sxs-lookup"><span data-stu-id="bf178-232">Mapreduce.map.memory</span></span></li><li><span data-ttu-id="bf178-233">Mapreduce.Job.Maps</span><span class="sxs-lookup"><span data-stu-id="bf178-233">Mapreduce.job.maps</span></span></li><li><span data-ttu-id="bf178-234">Mapreduce.Reduce.Memory</span><span class="sxs-lookup"><span data-stu-id="bf178-234">Mapreduce.reduce.memory</span></span></li><li><span data-ttu-id="bf178-235">Mapreduce.Job.reduces</span><span class="sxs-lookup"><span data-stu-id="bf178-235">Mapreduce.job.reduces</span></span></li></ul> |
| [<span data-ttu-id="bf178-236">Storm på HDInsight</span><span class="sxs-lookup"><span data-stu-id="bf178-236">Storm on HDInsight</span></span>](data-lake-store-performance-tuning-storm.md)| <ul><li><span data-ttu-id="bf178-237">Antalet arbetsprocesser</span><span class="sxs-lookup"><span data-stu-id="bf178-237">Number of worker processes</span></span></li><li><span data-ttu-id="bf178-238">Antalet instanser för kanal utförare</span><span class="sxs-lookup"><span data-stu-id="bf178-238">Number of spout executor instances</span></span></li><li><span data-ttu-id="bf178-239">Antalet instanser av bulten utförare</span><span class="sxs-lookup"><span data-stu-id="bf178-239">Number of bolt executor instances</span></span> </li><li><span data-ttu-id="bf178-240">Antalet aktiviteter som kanal</span><span class="sxs-lookup"><span data-stu-id="bf178-240">Number of spout tasks</span></span></li><li><span data-ttu-id="bf178-241">Antal bult uppgifter</span><span class="sxs-lookup"><span data-stu-id="bf178-241">Number of bolt tasks</span></span></li></ul>|

## <a name="see-also"></a><span data-ttu-id="bf178-242">Se även</span><span class="sxs-lookup"><span data-stu-id="bf178-242">See also</span></span>
* [<span data-ttu-id="bf178-243">Översikt över Azure Data Lake Store</span><span class="sxs-lookup"><span data-stu-id="bf178-243">Overview of Azure Data Lake Store</span></span>](data-lake-store-overview.md)
* [<span data-ttu-id="bf178-244">Kom igång med Azure Data Lake Analytics</span><span class="sxs-lookup"><span data-stu-id="bf178-244">Get Started with Azure Data Lake Analytics</span></span>](../data-lake-analytics/data-lake-analytics-get-started-portal.md)



<span data-ttu-id="7067f-101">Det finns två nivåer av belastningsutjämning för tjänster som Azure-infrastrukturen:</span><span class="sxs-lookup"><span data-stu-id="7067f-101">There are two levels of load balancing available for Azure infrastructure services:</span></span>

* <span data-ttu-id="7067f-102">**DNS-nivå**: belastningsutjämning för trafik toodifferent molntjänster finns i olika datacenter, toodifferent Azure webbplatser finns i olika Datacenter eller tooexternal slutpunkter.</span><span class="sxs-lookup"><span data-stu-id="7067f-102">**DNS Level**:  Load balancing for traffic toodifferent cloud services located in different data centers, toodifferent Azure websites located in different data centers, or tooexternal endpoints.</span></span> <span data-ttu-id="7067f-103">Detta görs med Azure Traffic Manager och hello resursallokering belastningsfördelningsmetod.</span><span class="sxs-lookup"><span data-stu-id="7067f-103">This is done with Azure Traffic Manager and hello Round Robin load balancing method.</span></span>
* <span data-ttu-id="7067f-104">**Nätverk nivå**: belastningsutjämning av inkommande Internet-trafik toodifferent virtuella datorer med en molnbaserad tjänst eller belastningsutjämning för trafik mellan virtuella datorer i en molnbaserad tjänst eller ett virtuellt nätverk.</span><span class="sxs-lookup"><span data-stu-id="7067f-104">**Network Level**:  Load balancing of incoming Internet traffic toodifferent virtual machines of a cloud service, or load balancing of traffic between virtual machines in a cloud service or virtual network.</span></span> <span data-ttu-id="7067f-105">Detta görs med hello Azure belastningsutjämnare.</span><span class="sxs-lookup"><span data-stu-id="7067f-105">This is done with hello Azure load balancer.</span></span>

## <a name="traffic-manager-load-balancing-for-cloud-services-and-websites"></a><span data-ttu-id="7067f-106">Traffic Manager belastningsutjämning för molntjänster och webbplatser</span><span class="sxs-lookup"><span data-stu-id="7067f-106">Traffic Manager load balancing for cloud services and websites</span></span>
<span data-ttu-id="7067f-107">Traffic Manager kan du toocontrol hello distribution av användaren trafik tooendpoints, vilket kan innefatta molntjänster, webbplatser, externa webbplatser och andra Traffic Manager-profiler.</span><span class="sxs-lookup"><span data-stu-id="7067f-107">Traffic Manager allows you toocontrol hello distribution of user traffic tooendpoints, which can include cloud services, websites, external sites, and other Traffic Manager profiles.</span></span> <span data-ttu-id="7067f-108">Traffic Manager fungerar genom att tillämpa en princip för intelligent motorn tooDomain Name System (DNS) frågor för hello domännamn för Internet-resurser.</span><span class="sxs-lookup"><span data-stu-id="7067f-108">Traffic Manager works by applying an intelligent policy engine tooDomain Name System (DNS) queries for hello domain names of your Internet resources.</span></span> <span data-ttu-id="7067f-109">Dina molntjänster eller webbplatser kan köras i olika Datacenter över hälsningsmeddelande.</span><span class="sxs-lookup"><span data-stu-id="7067f-109">Your cloud services or websites can be running in different datacenters across hello world.</span></span>

<span data-ttu-id="7067f-110">Du måste använda REST- eller Windows PowerShell tooconfigure externa slutpunkter eller Traffic Manager-profiler som slutpunkter.</span><span class="sxs-lookup"><span data-stu-id="7067f-110">You must use either REST or Windows PowerShell tooconfigure external endpoints or Traffic Manager profiles as endpoints.</span></span>

<span data-ttu-id="7067f-111">Traffic Manager använder tre belastningsutjämning metoder toodistribute trafik:</span><span class="sxs-lookup"><span data-stu-id="7067f-111">Traffic Manager uses three load-balancing methods toodistribute traffic:</span></span>

* <span data-ttu-id="7067f-112">**Redundans**: Använd den här metoden när du vill toouse en primär slutpunkt för all trafik, men ger säkerhetskopieringar om hello primära blir otillgänglig.</span><span class="sxs-lookup"><span data-stu-id="7067f-112">**Failover**:  Use this method when you want toouse a primary endpoint for all traffic, but provide backups in case hello primary becomes unavailable.</span></span>
* <span data-ttu-id="7067f-113">**Prestanda**: Använd den här metoden när du har slutpunkter i olika geografiska platser och du vill begära klienter toouse hello ”närmaste” endpoint vad gäller hello lägsta svarstid.</span><span class="sxs-lookup"><span data-stu-id="7067f-113">**Performance**:  Use this method when you have endpoints in different geographic locations and you want requesting clients toouse hello "closest" endpoint in terms of hello lowest latency.</span></span>
* <span data-ttu-id="7067f-114">**Resursallokering:** Använd den här metoden när du vill toodistribute belastningen över en uppsättning cloud services i hello samma datacenter eller i molntjänster eller webbplatser i olika datacenter.</span><span class="sxs-lookup"><span data-stu-id="7067f-114">**Round Robin:**  Use this method when you want toodistribute load across a set of cloud services in hello same datacenter or across cloud services or websites in different datacenters.</span></span>

<span data-ttu-id="7067f-115">Mer information finns i [om trafik Load Balancing metoder Manager](../articles/traffic-manager/traffic-manager-routing-methods.md).</span><span class="sxs-lookup"><span data-stu-id="7067f-115">For more information, see [About Traffic Manager Load Balancing Methods](../articles/traffic-manager/traffic-manager-routing-methods.md).</span></span>

<span data-ttu-id="7067f-116">hello följande diagram visar ett exempel på hello resursallokering belastningen belastningsutjämning metod för att distribuera trafik mellan olika molntjänster.</span><span class="sxs-lookup"><span data-stu-id="7067f-116">hello following diagram shows an example of hello Round Robin load balancing method for distributing traffic between different cloud services.</span></span>

![belastningsutjämning](./media/virtual-machines-common-load-balance/TMSummary.png)

<span data-ttu-id="7067f-118">hello grundläggande processen ser hello följande:</span><span class="sxs-lookup"><span data-stu-id="7067f-118">hello basic process is hello following:</span></span>

1. <span data-ttu-id="7067f-119">En domän namn motsvarande tooa webbtjänst frågar en Internetklient.</span><span class="sxs-lookup"><span data-stu-id="7067f-119">An Internet client queries a domain name corresponding tooa web service.</span></span>
2. <span data-ttu-id="7067f-120">DNS vidarebefordrar hello namn frågan begäran tooTraffic Manager.</span><span class="sxs-lookup"><span data-stu-id="7067f-120">DNS forwards hello name query request tooTraffic Manager.</span></span>
3. <span data-ttu-id="7067f-121">Traffic Manager väljer hello nästa Molntjänsten i hello resursallokering lista och skickar tillbaka hello DNS-namn.</span><span class="sxs-lookup"><span data-stu-id="7067f-121">Traffic Manager chooses hello next cloud service in hello Round Robin list and sends back hello DNS name.</span></span> <span data-ttu-id="7067f-122">hello Internet klientens DNS-servern matchar hello tooan IP-adress och skickar det toohello Internet-klient.</span><span class="sxs-lookup"><span data-stu-id="7067f-122">hello Internet client's DNS server resolves hello name tooan IP address and sends it toohello Internet client.</span></span>
4. <span data-ttu-id="7067f-123">hello Internet-klient ansluter med hello valt av Traffic Manager-Molntjänsten.</span><span class="sxs-lookup"><span data-stu-id="7067f-123">hello Internet client connects with hello cloud service chosen by Traffic Manager.</span></span>

<span data-ttu-id="7067f-124">Mer information finns i [Traffic Manager](../articles/traffic-manager/traffic-manager-overview.md).</span><span class="sxs-lookup"><span data-stu-id="7067f-124">For more information, see [Traffic Manager](../articles/traffic-manager/traffic-manager-overview.md).</span></span>

## <a name="azure-load-balancing-for-virtual-machines"></a><span data-ttu-id="7067f-125">Azure belastningsutjämning för virtuella datorer</span><span class="sxs-lookup"><span data-stu-id="7067f-125">Azure load balancing for virtual machines</span></span>
<span data-ttu-id="7067f-126">Virtuella datorer i hello samma molntjänst eller virtuella nätverket kan kommunicera med varandra direkt med sina privata IP-adresser.</span><span class="sxs-lookup"><span data-stu-id="7067f-126">Virtual machines in hello same cloud service or virtual network can communicate with each other directly using their private IP addresses.</span></span> <span data-ttu-id="7067f-127">Datorer och tjänster utanför hello molntjänst eller virtuella nätverk kan endast kommunicera med virtuella datorer i en molnbaserad tjänst eller ett virtuellt nätverk med en konfigurerad slutpunkt.</span><span class="sxs-lookup"><span data-stu-id="7067f-127">Computers and services outside hello cloud service or virtual network can only communicate with virtual machines in a cloud service or virtual network with a configured endpoint.</span></span> <span data-ttu-id="7067f-128">En slutpunkt är en mappning av en offentlig IP-adress och port toothat privat IP-adress och port för en virtuell dator eller en webbroll inom en Azure-molntjänst.</span><span class="sxs-lookup"><span data-stu-id="7067f-128">An endpoint is a mapping of a public IP address and port toothat private IP address and port of a virtual machine or web role within an Azure cloud service.</span></span>

<span data-ttu-id="7067f-129">hello Azure belastningsutjämnare distribuerar slumpmässigt en viss typ av inkommande trafik över flera virtuella datorer eller tjänster i en konfiguration som kallas en belastningsutjämnad uppsättning.</span><span class="sxs-lookup"><span data-stu-id="7067f-129">hello Azure Load Balancer randomly distributes a specific type of incoming traffic across multiple virtual machines or services in a configuration known as a load-balanced set.</span></span> <span data-ttu-id="7067f-130">Sprida hello belastningen på begäran Internet-trafik över flera webbservrar eller webbroller.</span><span class="sxs-lookup"><span data-stu-id="7067f-130">For example, you can spread hello load of web request traffic across multiple web servers or web roles.</span></span>

<span data-ttu-id="7067f-131">hello visar följande diagram en belastningsutjämnad slutpunkt för standard (okrypterat) webbtrafik som delas mellan tre virtuella datorer för hello offentliga och privata TCP-port 80.</span><span class="sxs-lookup"><span data-stu-id="7067f-131">hello following diagram shows a load-balanced endpoint for standard (unencrypted) web traffic that is shared among three virtual machines for hello public and private TCP port of 80.</span></span> <span data-ttu-id="7067f-132">Dessa tre virtuella datorer finns i en belastningsutjämnad uppsättning.</span><span class="sxs-lookup"><span data-stu-id="7067f-132">These three virtual machines are in a load-balanced set.</span></span>

![belastningsutjämning](./media/virtual-machines-common-load-balance/LoadBalancing.png)

<span data-ttu-id="7067f-134">Mer information finns i [Azure belastningsutjämnare](../articles/load-balancer/load-balancer-overview.md).</span><span class="sxs-lookup"><span data-stu-id="7067f-134">For more information, see [Azure Load Balancer](../articles/load-balancer/load-balancer-overview.md).</span></span> <span data-ttu-id="7067f-135">Hello stegen toocreate en belastningsutjämnad uppsättning, finns [konfigurera en belastningsutjämnad uppsättning](../articles/load-balancer/load-balancer-get-started-internet-arm-ps.md).</span><span class="sxs-lookup"><span data-stu-id="7067f-135">For hello steps toocreate a load-balanced set, see [Configure a load-balanced set](../articles/load-balancer/load-balancer-get-started-internet-arm-ps.md).</span></span>

<span data-ttu-id="7067f-136">Azure kan också läsa belastningsutjämna inom en molnbaserad tjänst eller ett virtuellt nätverk.</span><span class="sxs-lookup"><span data-stu-id="7067f-136">Azure can also load balance within a cloud service or virtual network.</span></span> <span data-ttu-id="7067f-137">Detta kallas för intern belastningsutjämning och kan användas i hello följande sätt:</span><span class="sxs-lookup"><span data-stu-id="7067f-137">This is known as internal load balancing and can be used in hello following ways:</span></span>

* <span data-ttu-id="7067f-138">tooload balans mellan servrar i olika nivåer av en flernivåapp (till exempel mellan webb- och databasnivåer).</span><span class="sxs-lookup"><span data-stu-id="7067f-138">tooload balance between servers in different tiers of a multi-tier application (for example, between web and database tiers).</span></span>
* <span data-ttu-id="7067f-139">tooload saldo line-of-business (LOB) program finns i Azure utan ytterligare belastningen belastningsutjämnaren maskinvara eller programvara.</span><span class="sxs-lookup"><span data-stu-id="7067f-139">tooload balance line-of-business (LOB) applications hosted in Azure without requiring additional load balancer hardware or software.</span></span>
* <span data-ttu-id="7067f-140">tooinclude lokala servrar i hello uppsättning datorer vars trafik är Utjämning av nätverksbelastning.</span><span class="sxs-lookup"><span data-stu-id="7067f-140">tooinclude on-premises servers in hello set of computers whose traffic is load balanced.</span></span>

<span data-ttu-id="7067f-141">Liknande tooAzure belastningsutjämning, intern belastningsutjämning underlättas genom att konfigurera en intern belastningsutjämnad uppsättning.</span><span class="sxs-lookup"><span data-stu-id="7067f-141">Similar tooAzure load balancing, internal load balancing is facilitated by configuring an internal load-balanced set.</span></span>

<span data-ttu-id="7067f-142">hello följande diagram visar ett exempel på en intern belastningsutjämning slutpunkt för en driftsapplikationer (LOB) som delas mellan tre virtuella datorer i ett virtuellt nätverk mellan platser.</span><span class="sxs-lookup"><span data-stu-id="7067f-142">hello following diagram shows an example of an internal load-balanced endpoint for a line of business (LOB) application that is shared among three virtual machines in a cross-premises virtual network.</span></span>

![belastningsutjämning](./media/virtual-machines-common-load-balance/LOBServers.png)

## <a name="load-balancer-considerations"></a><span data-ttu-id="7067f-144">Läsa in belastningsutjämning överväganden</span><span class="sxs-lookup"><span data-stu-id="7067f-144">Load balancer considerations</span></span>
<span data-ttu-id="7067f-145">En belastningsutjämnare är som standard konfigurerad tootimeout en inaktiv session i 4 minuter.</span><span class="sxs-lookup"><span data-stu-id="7067f-145">A load balancer is configured by default tootimeout an idle session in 4 minutes.</span></span> <span data-ttu-id="7067f-146">Om ditt program bakom en belastningsutjämnare lämnar en anslutning inaktiv mer än 4 minuter och det inte har en Keep-Alive konfiguration, hello anslutningen att tas bort.</span><span class="sxs-lookup"><span data-stu-id="7067f-146">If your application behind a load balancer leaves a connection idle for more than 4 minutes and it doesn't have a Keep-Alive configuration, hello connection will be dropped.</span></span> <span data-ttu-id="7067f-147">Du kan ändra hello load balancer beteende tooallow en [längre timeout-inställningen för Azure belastningsutjämnare](../articles/load-balancer/load-balancer-tcp-idle-timeout.md).</span><span class="sxs-lookup"><span data-stu-id="7067f-147">You can change hello load balancer behavior tooallow a [longer timeout setting for Azure load balancer](../articles/load-balancer/load-balancer-tcp-idle-timeout.md).</span></span>

<span data-ttu-id="7067f-148">Andra faktor är hello typ av distribution läge som stöds av Azure belastningsutjämnare.</span><span class="sxs-lookup"><span data-stu-id="7067f-148">Other consideration is hello type of distribution mode supported by Azure Load Balancer.</span></span> <span data-ttu-id="7067f-149">Du kan konfigurera IP-datakällan tillhörigheten (käll-IP, mål-IP) eller käll-IP-protokollet (käll-IP, mål-IP och protokoll).</span><span class="sxs-lookup"><span data-stu-id="7067f-149">You can configure source IP affinity (source IP, destination IP) or source IP protocol (source IP , destination IP and protocol).</span></span> <span data-ttu-id="7067f-150">Checka ut [Azure belastningsutjämnare distribution läge (käll-IP-tillhörighet)](../articles/load-balancer/load-balancer-distribution-mode.md) för mer information.</span><span class="sxs-lookup"><span data-stu-id="7067f-150">Check out [Azure Load Balancer distribution mode (source IP affinity)](../articles/load-balancer/load-balancer-distribution-mode.md) for more information.</span></span>

## <a name="next-steps"></a><span data-ttu-id="7067f-151">Nästa steg</span><span class="sxs-lookup"><span data-stu-id="7067f-151">Next steps</span></span>
<span data-ttu-id="7067f-152">Hello stegen toocreate en belastningsutjämnad uppsättning, finns [konfigurera en intern belastningsutjämnad uppsättning](../articles/load-balancer/load-balancer-get-started-ilb-arm-ps.md).</span><span class="sxs-lookup"><span data-stu-id="7067f-152">For hello steps toocreate a load-balanced set, see [Configure an internal load-balanced set](../articles/load-balancer/load-balancer-get-started-ilb-arm-ps.md).</span></span>

<span data-ttu-id="7067f-153">Mer information om belastningsutjämning finns [intern belastningsutjämning](../articles/load-balancer/load-balancer-internal-overview.md).</span><span class="sxs-lookup"><span data-stu-id="7067f-153">For more information about load balancer, see [Internal load balancing](../articles/load-balancer/load-balancer-internal-overview.md).</span></span>


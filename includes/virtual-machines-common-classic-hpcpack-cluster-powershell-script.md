



<span data-ttu-id="5daa9-101">Beroende på din miljö och alternativ, kan skriptet Skapa hela klustret infrastrukturen, inklusive Azure-nätverk, storage-konton, molntjänster, domänkontrollant, fjärrdatorer eller lokala SQL-databaser, huvudnod och ytterligare klusternoder.</span><span class="sxs-lookup"><span data-stu-id="5daa9-101">Depending on your environment and choices, the script can create all the cluster infrastructure, including the Azure virtual network, storage accounts, cloud services, domain controller, remote or local SQL databases, head node, and additional cluster nodes.</span></span> <span data-ttu-id="5daa9-102">Skriptet kan också använda befintlig Azure-infrastrukturen och skapa endast noderna för HPC-kluster.</span><span class="sxs-lookup"><span data-stu-id="5daa9-102">Alternatively, the script can use pre-existing Azure infrastructure and create only the HPC cluster nodes.</span></span>

<span data-ttu-id="5daa9-103">Bakgrundsinformation om hur du planerar ett HPC Pack-kluster finns i [produktutvärdering och planera](https://technet.microsoft.com/library/jj899596.aspx) och [komma igång](https://technet.microsoft.com/library/jj899590.aspx) innehåll i TechNet-biblioteket HPC Pack 2012 R2.</span><span class="sxs-lookup"><span data-stu-id="5daa9-103">For background information about planning an HPC Pack cluster, see the [Product Evaluation and Planning](https://technet.microsoft.com/library/jj899596.aspx) and [Getting Started](https://technet.microsoft.com/library/jj899590.aspx) content in the HPC Pack 2012 R2 TechNet Library.</span></span>

## <a name="prerequisites"></a><span data-ttu-id="5daa9-104">Krav</span><span class="sxs-lookup"><span data-stu-id="5daa9-104">Prerequisites</span></span>
* <span data-ttu-id="5daa9-105">**Azure-prenumeration**: du kan använda en prenumeration i Azure Global eller Azure Kina service.</span><span class="sxs-lookup"><span data-stu-id="5daa9-105">**Azure subscription**: You can use a subscription in either the Azure Global or Azure China service.</span></span> <span data-ttu-id="5daa9-106">Din prenumerationsbegränsningar påverkar antalet och typen av klusternoder som du kan distribuera.</span><span class="sxs-lookup"><span data-stu-id="5daa9-106">Your subscription limits affect the number and type of cluster nodes you can deploy.</span></span> <span data-ttu-id="5daa9-107">Mer information finns i [Azure-prenumeration och tjänsten gränser, kvoter och begränsningar](../articles/azure-subscription-service-limits.md).</span><span class="sxs-lookup"><span data-stu-id="5daa9-107">For information, see [Azure subscription and service limits, quotas, and constraints](../articles/azure-subscription-service-limits.md).</span></span>
* <span data-ttu-id="5daa9-108">**Windows-klientdator med Azure PowerShell 0.8.10 eller senare installerat och konfigurerat**: se [Kom igång med Azure PowerShell](/powershell/azureps-cmdlets-docs) installationsinstruktioner och anvisningar att ansluta till din Azure-prenumeration.</span><span class="sxs-lookup"><span data-stu-id="5daa9-108">**Windows client computer with Azure PowerShell 0.8.10 or later installed and configured**: See [Get started with Azure PowerShell](/powershell/azureps-cmdlets-docs) for installation instructions and steps to connect to your Azure subscription.</span></span>
* <span data-ttu-id="5daa9-109">**HPC Pack IaaS distributionsskriptet**: hämta och packa upp den senaste versionen av skriptet från den [Microsoft Download Center](https://www.microsoft.com/download/details.aspx?id=44949).</span><span class="sxs-lookup"><span data-stu-id="5daa9-109">**HPC Pack IaaS deployment script**: Download and unpack the latest version of the script from the [Microsoft Download Center](https://www.microsoft.com/download/details.aspx?id=44949).</span></span> <span data-ttu-id="5daa9-110">Kontrollera vilken version av skriptet genom att köra `New-HPCIaaSCluster.ps1 –Version`.</span><span class="sxs-lookup"><span data-stu-id="5daa9-110">Check the version of the script by running `New-HPCIaaSCluster.ps1 –Version`.</span></span> <span data-ttu-id="5daa9-111">Den här artikeln baserat på version 4.5.2 av skriptet.</span><span class="sxs-lookup"><span data-stu-id="5daa9-111">This article is based on version 4.5.2 of the script.</span></span>
* <span data-ttu-id="5daa9-112">**Konfigurationsfilen**: skapa en XML-fil som skriptet använder för att konfigurera HPC-kluster.</span><span class="sxs-lookup"><span data-stu-id="5daa9-112">**Script configuration file**: Create an XML file that the script uses to configure the HPC cluster.</span></span> <span data-ttu-id="5daa9-113">Mer information och exempel finns i avsnitt längre fram i den här artikeln och filen Manual.rtf som medföljer skriptet för distribution.</span><span class="sxs-lookup"><span data-stu-id="5daa9-113">For information and examples, see sections later in this article and the file Manual.rtf that accompanies the deployment script.</span></span>

## <a name="syntax"></a><span data-ttu-id="5daa9-114">Syntax</span><span class="sxs-lookup"><span data-stu-id="5daa9-114">Syntax</span></span>
```PowerShell
New-HPCIaaSCluster.ps1 [-ConfigFile] <String> [-AdminUserName]<String> [[-AdminPassword] <String>] [[-HPCImageName] <String>] [[-LogFile] <String>] [-Force] [-NoCleanOnFailure] [-PSSessionSkipCACheck] [<CommonParameters>]
```
> [!NOTE]
> <span data-ttu-id="5daa9-115">Kör skriptet som administratör.</span><span class="sxs-lookup"><span data-stu-id="5daa9-115">Run the script as an administrator.</span></span>
> 
> 

### <a name="parameters"></a><span data-ttu-id="5daa9-116">Parametrar</span><span class="sxs-lookup"><span data-stu-id="5daa9-116">Parameters</span></span>
* <span data-ttu-id="5daa9-117">**ConfigFile**: Anger sökvägen till filen i konfigurationsfilen för att beskriva HPC-kluster.</span><span class="sxs-lookup"><span data-stu-id="5daa9-117">**ConfigFile**: Specifies the file path of the configuration file to describe the HPC cluster.</span></span> <span data-ttu-id="5daa9-118">Läs mer om konfigurationsfil i det här avsnittet eller i filen Manual.rtf i mappen som innehåller skriptet.</span><span class="sxs-lookup"><span data-stu-id="5daa9-118">See more about the configuration file in this topic, or in the file Manual.rtf in the folder containing the script.</span></span>
* <span data-ttu-id="5daa9-119">**AdminUserName**: Anger användarnamnet.</span><span class="sxs-lookup"><span data-stu-id="5daa9-119">**AdminUserName**: Specifies the user name.</span></span> <span data-ttu-id="5daa9-120">Om domänskogen har skapats av skriptet, blir det lokalt administratörsanvändarnamn för alla virtuella datorer och administratören domännamn.</span><span class="sxs-lookup"><span data-stu-id="5daa9-120">If the domain forest is created by the script, this becomes the local administrator user name for all VMs and the domain administrator name.</span></span> <span data-ttu-id="5daa9-121">Om domänskogen redan anger domänanvändaren som användarnamn för lokal administratör för att installera HPC Pack.</span><span class="sxs-lookup"><span data-stu-id="5daa9-121">If the domain forest already exists, this specifies the domain user as the local administrator user name to install HPC Pack.</span></span>
* <span data-ttu-id="5daa9-122">**AdminPassword**: Anger administratörslösenord.</span><span class="sxs-lookup"><span data-stu-id="5daa9-122">**AdminPassword**: Specifies the administrator’s password.</span></span> <span data-ttu-id="5daa9-123">Om inte anges på kommandoraden, uppmanas du att ange lösenordet i skriptet.</span><span class="sxs-lookup"><span data-stu-id="5daa9-123">If not specified in the command line, the script prompts you to input the password.</span></span>
* <span data-ttu-id="5daa9-124">**HPCImageName** (valfritt): Anger HPC Pack VM avbildning används för att distribuera HPC-kluster.</span><span class="sxs-lookup"><span data-stu-id="5daa9-124">**HPCImageName** (optional): Specifies the HPC Pack VM image name used to deploy the HPC cluster.</span></span> <span data-ttu-id="5daa9-125">Det måste vara en Microsoft HPC Pack-avbildning från Azure Marketplace.</span><span class="sxs-lookup"><span data-stu-id="5daa9-125">It must be a Microsoft-provided HPC Pack image from the Azure Marketplace.</span></span> <span data-ttu-id="5daa9-126">Om inget annat anges (rekommenderas vanligtvis) skriptet väljer det senaste publicerade [HPC Pack 2012 R2-avbildningen](https://azure.microsoft.com/marketplace/partners/microsoft/hpcpack2012r2onwindowsserver2012r2/).</span><span class="sxs-lookup"><span data-stu-id="5daa9-126">If not specified (recommended usually), the script chooses the latest published [HPC Pack 2012 R2 image](https://azure.microsoft.com/marketplace/partners/microsoft/hpcpack2012r2onwindowsserver2012r2/).</span></span> <span data-ttu-id="5daa9-127">Senaste avbildningen baseras på Windows Server 2012 R2 Datacenter med HPC Pack 2012 R2 uppdatering 3.</span><span class="sxs-lookup"><span data-stu-id="5daa9-127">The latest image is based on Windows Server 2012 R2 Datacenter with HPC Pack 2012 R2 Update 3 installed.</span></span>
  
  > [!NOTE]
  > <span data-ttu-id="5daa9-128">Distributionen misslyckas om du inte anger en giltig HPC Pack-bild.</span><span class="sxs-lookup"><span data-stu-id="5daa9-128">Deployment fails if you don't specify a valid HPC Pack image.</span></span>
  > 
  > 
* <span data-ttu-id="5daa9-129">**LogFile** (valfritt): Anger sökvägen till distributionen loggfilen.</span><span class="sxs-lookup"><span data-stu-id="5daa9-129">**LogFile** (optional): Specifies the deployment log file path.</span></span> <span data-ttu-id="5daa9-130">Om inte har angetts för skriptet skapar en loggfil i temp-katalogen på datorn som kör skriptet.</span><span class="sxs-lookup"><span data-stu-id="5daa9-130">If not specified, the script creates a log file in the temp directory of the computer running the script.</span></span>
* <span data-ttu-id="5daa9-131">**Framtvinga** (valfritt): förhindrar att alla bekräftelse-meddelanden.</span><span class="sxs-lookup"><span data-stu-id="5daa9-131">**Force** (optional): Suppresses all the confirmation prompts.</span></span>
* <span data-ttu-id="5daa9-132">**NoCleanOnFailure** (valfritt): Anger att den virtuella Azure-datorer som inte distribueras har inte tagits bort.</span><span class="sxs-lookup"><span data-stu-id="5daa9-132">**NoCleanOnFailure** (optional): Specifies that the Azure VMs that are not successfully deployed are not removed.</span></span> <span data-ttu-id="5daa9-133">Ta bort dessa virtuella datorer manuellt innan du köra skriptet för att fortsätta med distributionen eller distributionen misslyckas.</span><span class="sxs-lookup"><span data-stu-id="5daa9-133">Remove these VMs manually before rerunning the script to continue the deployment, or the deployment may fail.</span></span>
* <span data-ttu-id="5daa9-134">**PSSessionSkipCACheck** (valfritt): för varje molntjänst med virtuella datorer som distribueras med det här skriptet, skapas automatiskt ett självsignerat certifikat av Azure och alla virtuella datorer i Molntjänsten använda det här certifikatet som standard Windows Remote Certifikat Management (WinRM).</span><span class="sxs-lookup"><span data-stu-id="5daa9-134">**PSSessionSkipCACheck** (optional): For every cloud service with VMs deployed by this script, a self-signed certificate is automatically generated by Azure, and all the VMs in the cloud service use this certificate as the default Windows Remote Management (WinRM) certificate.</span></span> <span data-ttu-id="5daa9-135">Om du vill distribuera HPC-funktioner i dessa virtuella datorer i Azure, skriptet som standard installeras tillfälligt certifikaten i den lokala datorn\\betrodda rotcertifikatutfärdare på klientdatorn för att undertrycka säkerhetsfel ”inte betrodd Certifikatutfärdare” under körning av skript.</span><span class="sxs-lookup"><span data-stu-id="5daa9-135">To deploy HPC features in these Azure VMs, the script by default temporarily installs these certificates in the Local Computer\\Trusted Root Certification Authorities store of the client computer to suppress the “not trusted CA” security error during script execution.</span></span> <span data-ttu-id="5daa9-136">Certifikat tas bort när skriptet har slutförts.</span><span class="sxs-lookup"><span data-stu-id="5daa9-136">The certificates are removed when the script finishes.</span></span> <span data-ttu-id="5daa9-137">Om den här parametern anges certifikaten har installerats inte på klientdatorn och visas inte säkerhetsvarningen.</span><span class="sxs-lookup"><span data-stu-id="5daa9-137">If this parameter is specified, the certificates are not installed in the client computer, and the security warning is suppressed.</span></span>
  
  > [!IMPORTANT]
  > <span data-ttu-id="5daa9-138">Den här parametern rekommenderas inte för Produktionsdistribution.</span><span class="sxs-lookup"><span data-stu-id="5daa9-138">This parameter is not recommended for production deployments.</span></span>
  > 
  > 

### <a name="example"></a><span data-ttu-id="5daa9-139">Exempel</span><span class="sxs-lookup"><span data-stu-id="5daa9-139">Example</span></span>
<span data-ttu-id="5daa9-140">I följande exempel skapas ett HPC Pack kluster som använder konfigurationsfilen *MyConfigFile.xml*, och anger administratörsautentiseringsuppgifter som för att installera klustringen.</span><span class="sxs-lookup"><span data-stu-id="5daa9-140">The following example creates an HPC Pack cluster using the configuration file *MyConfigFile.xml*, and specifies administrator credentials for installing the cluster.</span></span>

```PowerShell
.\New-HPCIaaSCluster.ps1 –ConfigFile MyConfigFile.xml -AdminUserName <username> –AdminPassword <password>
```

### <a name="additional-considerations"></a><span data-ttu-id="5daa9-141">Annat som är bra att tänka på</span><span class="sxs-lookup"><span data-stu-id="5daa9-141">Additional considerations</span></span>
* <span data-ttu-id="5daa9-142">Skriptet kan också aktivera jobbet via webbportalen HPC Pack eller HPC Pack REST API.</span><span class="sxs-lookup"><span data-stu-id="5daa9-142">The script can optionally enable job submission through the HPC Pack web portal or the HPC Pack REST API.</span></span>
* <span data-ttu-id="5daa9-143">Skriptet kan du köra skript före och efter konfigurationen på huvudnoden om du vill installera ytterligare programvara eller konfigurera andra inställningar.</span><span class="sxs-lookup"><span data-stu-id="5daa9-143">The script can optionally run custom pre- and post-configuration scripts on the head node if you want to install additional software or configure other settings.</span></span>

## <a name="configuration-file"></a><span data-ttu-id="5daa9-144">Konfigurationsfilen</span><span class="sxs-lookup"><span data-stu-id="5daa9-144">Configuration file</span></span>
<span data-ttu-id="5daa9-145">Konfigurationsfilen för distributionsskriptet är en XML-fil.</span><span class="sxs-lookup"><span data-stu-id="5daa9-145">The configuration file for the deployment script is an XML file.</span></span> <span data-ttu-id="5daa9-146">Schemafilen HPCIaaSClusterConfig.xsd finns i mappen HPC Pack IaaS distribution skript.</span><span class="sxs-lookup"><span data-stu-id="5daa9-146">The schema file HPCIaaSClusterConfig.xsd is in the HPC Pack IaaS deployment script folder.</span></span> <span data-ttu-id="5daa9-147">**IaaSClusterConfig** har rotelementet i en konfigurationsfil som innehåller de underordnade elementen som beskrivs i detalj i filen Manual.rtf i skriptet distributionsmappen.</span><span class="sxs-lookup"><span data-stu-id="5daa9-147">**IaaSClusterConfig** is the root element of the configuration file, which contains the child elements described in detail in the file Manual.rtf in the deployment script folder.</span></span>


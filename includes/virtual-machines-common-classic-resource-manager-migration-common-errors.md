# <a name="common-errors-during-classic-tooazure-resource-manager-migration"></a><span data-ttu-id="c4a3d-101">Vanliga fel under klassisk tooAzure hanteraren för filserverresurser</span><span class="sxs-lookup"><span data-stu-id="c4a3d-101">Common errors during Classic tooAzure Resource Manager migration</span></span>
<span data-ttu-id="c4a3d-102">Den här artikeln kataloger hello de vanligaste fel och åtgärder under hello migreringen av IaaS-resurser från klassiska Azure-distribution modellen toohello Azure Resource Manager-stacken.</span><span class="sxs-lookup"><span data-stu-id="c4a3d-102">This article catalogs hello most common errors and mitigations during hello migration of IaaS resources from Azure classic deployment model toohello Azure Resource Manager stack.</span></span>

## <a name="list-of-errors"></a><span data-ttu-id="c4a3d-103">Lista över fel</span><span class="sxs-lookup"><span data-stu-id="c4a3d-103">List of errors</span></span>
| <span data-ttu-id="c4a3d-104">Felsträng</span><span class="sxs-lookup"><span data-stu-id="c4a3d-104">Error string</span></span> | <span data-ttu-id="c4a3d-105">Åtgärd</span><span class="sxs-lookup"><span data-stu-id="c4a3d-105">Mitigation</span></span> |
| --- | --- |
| <span data-ttu-id="c4a3d-106">Internt serverfel</span><span class="sxs-lookup"><span data-stu-id="c4a3d-106">Internal server error</span></span> |<span data-ttu-id="c4a3d-107">I vissa fall är det här ett tillfälligt fel som försvinner vid ett nytt försök.</span><span class="sxs-lookup"><span data-stu-id="c4a3d-107">In some cases, this is a transient error that goes away with a retry.</span></span> <span data-ttu-id="c4a3d-108">Om det fortfarande toopersist, [kontakta Azure-supporten](../articles/azure-supportability/how-to-create-azure-support-request.md) behöver undersökning loggar plattform.</span><span class="sxs-lookup"><span data-stu-id="c4a3d-108">If it continues toopersist, [contact Azure support](../articles/azure-supportability/how-to-create-azure-support-request.md) as it needs investigation of platform logs.</span></span> <br><br> <span data-ttu-id="c4a3d-109">**Obs:** när hello incident spåras av hello supportteamet försök inte några egna minskning som detta kan ha oönskade konsekvenser på din miljö.</span><span class="sxs-lookup"><span data-stu-id="c4a3d-109">**NOTE:** Once hello incident is tracked by hello support team, please do not attempt any self-mitigation as this might have unintended consequences on your environment.</span></span> |
| <span data-ttu-id="c4a3d-110">Migrering stöds inte för distributionen {deployment-name} i HostedService {hosted-service-name} eftersom det är en PaaS-distribution (Web/Worker).</span><span class="sxs-lookup"><span data-stu-id="c4a3d-110">Migration is not supported for Deployment {deployment-name}  in HostedService {hosted-service-name} because it is a PaaS deployment (Web/Worker).</span></span> |<span data-ttu-id="c4a3d-111">Det här inträffar när en distribution innehåller en web/worker-roll.</span><span class="sxs-lookup"><span data-stu-id="c4a3d-111">This happens when a deployment contains a web/worker role.</span></span> <span data-ttu-id="c4a3d-112">Eftersom migrering stöds bara för virtuella datorer, ta bort hello web/worker-rollen från hello distribution och försök migrera igen.</span><span class="sxs-lookup"><span data-stu-id="c4a3d-112">Since migration is only supported for Virtual Machines, please remove hello web/worker role from hello deployment and try migration again.</span></span> |
| <span data-ttu-id="c4a3d-113">Det gick inte att distribuera mallen {template-name}.</span><span class="sxs-lookup"><span data-stu-id="c4a3d-113">Template {template-name} deployment failed.</span></span> <span data-ttu-id="c4a3d-114">CorrelationId={guid}</span><span class="sxs-lookup"><span data-stu-id="c4a3d-114">CorrelationId={guid}</span></span> |<span data-ttu-id="c4a3d-115">I hello backend tjänsternas migrering använder vi Azure Resource Manager mallar toocreate resurser i hello Azure Resource Manager-stacken.</span><span class="sxs-lookup"><span data-stu-id="c4a3d-115">In hello backend of migration service, we use Azure Resource Manager templates toocreate resources in hello Azure Resource Manager stack.</span></span> <span data-ttu-id="c4a3d-116">Eftersom mallar är idempotent är försök vanligtvis på ett säkert sätt hello migrering åtgärden tooget tidigare felet.</span><span class="sxs-lookup"><span data-stu-id="c4a3d-116">Since templates are idempotent, usually you can safely retry hello migration operation tooget past this error.</span></span> <span data-ttu-id="c4a3d-117">Om felet kvarstår toopersist [kontakta Azure-supporten](../articles/azure-supportability/how-to-create-azure-support-request.md) och ge dem hello CorrelationId.</span><span class="sxs-lookup"><span data-stu-id="c4a3d-117">If this error continues toopersist, please [contact Azure support](../articles/azure-supportability/how-to-create-azure-support-request.md) and give them hello CorrelationId.</span></span> <br><br> <span data-ttu-id="c4a3d-118">**Obs:** när hello incident spåras av hello supportteamet försök inte några egna minskning som detta kan ha oönskade konsekvenser på din miljö.</span><span class="sxs-lookup"><span data-stu-id="c4a3d-118">**NOTE:** Once hello incident is tracked by hello support team, please do not attempt any self-mitigation as this might have unintended consequences on your environment.</span></span> |
| <span data-ttu-id="c4a3d-119">hello virtuella nätverket {--namn för virtuellt nätverk} finns inte.</span><span class="sxs-lookup"><span data-stu-id="c4a3d-119">hello virtual network {virtual-network-name} does not exist.</span></span> |<span data-ttu-id="c4a3d-120">Detta kan inträffa om du har skapat hello virtuellt nätverk i hello nya Azure-portalen.</span><span class="sxs-lookup"><span data-stu-id="c4a3d-120">This can happen if you created hello Virtual Network in hello new Azure portal.</span></span> <span data-ttu-id="c4a3d-121">hello faktiska virtuella nätverksnamnet följer hello mönster ”grupp * <VNET name>”</span><span class="sxs-lookup"><span data-stu-id="c4a3d-121">hello actual Virtual Network name follows hello pattern "Group * <VNET name>"</span></span> |
| <span data-ttu-id="c4a3d-122">Den virtuella datorn {vm-name} i HostedService {hosted-service-name} innehåller tillägget {extension-name} som inte stöds i Azure Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="c4a3d-122">VM {vm-name} in HostedService {hosted-service-name} contains Extension {extension-name} which is not supported in Azure Resource Manager.</span></span> <span data-ttu-id="c4a3d-123">Det rekommenderas toouninstall från hello VM innan du fortsätter med migreringen.</span><span class="sxs-lookup"><span data-stu-id="c4a3d-123">It is recommended toouninstall it from hello VM before continuing with migration.</span></span> |<span data-ttu-id="c4a3d-124">XML-tillägg som BGInfo 1.* stöds inte i Azure Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="c4a3d-124">XML extensions such as BGInfo 1.* are not supported in Azure Resource Manager.</span></span> <span data-ttu-id="c4a3d-125">Därför kan de inte heller migreras.</span><span class="sxs-lookup"><span data-stu-id="c4a3d-125">Therefore, these extensions cannot be migrated.</span></span> <span data-ttu-id="c4a3d-126">Om dessa tillägg är vänstra installeras på hello virtuell dator kan avinstalleras automatiskt innan du slutför hello migrering.</span><span class="sxs-lookup"><span data-stu-id="c4a3d-126">If these extensions are left installed on hello virtual machine, they are automatically uninstalled before completing hello migration.</span></span> |
| <span data-ttu-id="c4a3d-127">Den virtuella datorn {vm-name} i HostedService {hosted-service-name} innehåller tillägget VMSnapshot/VMSnapshotLinux, som för närvarande inte stöds för migrering.</span><span class="sxs-lookup"><span data-stu-id="c4a3d-127">VM {vm-name} in HostedService {hosted-service-name} contains Extension VMSnapshot/VMSnapshotLinux, which is currently not supported for Migration.</span></span> <span data-ttu-id="c4a3d-128">Avinstallera den från hello VM och Lägg till den igen med hjälp av Azure Resource Manager när hello migreringen är slutförd</span><span class="sxs-lookup"><span data-stu-id="c4a3d-128">Uninstall it from hello VM and add it back using Azure Resource Manager after hello Migration is Complete</span></span> |<span data-ttu-id="c4a3d-129">Detta är hello scenario där hello virtuella datorn är konfigurerad för Azure Backup.</span><span class="sxs-lookup"><span data-stu-id="c4a3d-129">This is hello scenario where hello virtual machine is configured for Azure Backup.</span></span> <span data-ttu-id="c4a3d-130">Eftersom det är ett scenario som inte stöds, följ hello lösning på https://aka.ms/vmbackupmigration</span><span class="sxs-lookup"><span data-stu-id="c4a3d-130">Since this is currently an unsupported scenario, please follow hello workaround at https://aka.ms/vmbackupmigration</span></span> |
| <span data-ttu-id="c4a3d-131">VM {vm-name} i HostedService {värd-tjänst-name} innehåller tillägg {Tilläggsnamn} vars Status inte rapporteras från hello VM.</span><span class="sxs-lookup"><span data-stu-id="c4a3d-131">VM {vm-name} in HostedService {hosted-service-name} contains Extension {extension-name} whose Status is not being reported from hello VM.</span></span> <span data-ttu-id="c4a3d-132">Den virtuella datorn kan därför inte migreras.</span><span class="sxs-lookup"><span data-stu-id="c4a3d-132">Hence, this VM cannot be migrated.</span></span> <span data-ttu-id="c4a3d-133">Kontrollera att hello tillståndets status rapporteras eller avinstallera hello tillägg från hello VM och försök migrering.</span><span class="sxs-lookup"><span data-stu-id="c4a3d-133">Ensure that hello Extension status is being reported or uninstall hello extension from hello VM and retry migration.</span></span> <br><br> <span data-ttu-id="c4a3d-134">Den virtuella datorn {vm-name} i HostedService {hosted-service-name} innehåller tillägget {extension-name} som rapporterar hanterarstatus: {handler-status}.</span><span class="sxs-lookup"><span data-stu-id="c4a3d-134">VM {vm-name} in HostedService {hosted-service-name} contains Extension {extension-name} reporting Handler Status: {handler-status}.</span></span> <span data-ttu-id="c4a3d-135">Därför kan inte migreras hello VM.</span><span class="sxs-lookup"><span data-stu-id="c4a3d-135">Hence, hello VM cannot be migrated.</span></span> <span data-ttu-id="c4a3d-136">Kontrollera att hello tillägget hanterare status har rapporterats är {hanterare status} eller avinstallera den från hello VM och försök migrering.</span><span class="sxs-lookup"><span data-stu-id="c4a3d-136">Ensure that hello Extension handler status being reported is {handler-status} or uninstall it from hello VM and retry migration.</span></span> <br><br> <span data-ttu-id="c4a3d-137">VM-agenten för den virtuella datorn {vm-name} i HostedService {värd-tjänst-name} rapporterar hello övergripande status för agent inte redo.</span><span class="sxs-lookup"><span data-stu-id="c4a3d-137">VM Agent for VM {vm-name} in HostedService {hosted-service-name} is reporting hello overall agent status as Not Ready.</span></span> <span data-ttu-id="c4a3d-138">Därför kan hello VM inte migreras, om den har filnamnstillägget maskinvaruegenskaperna.</span><span class="sxs-lookup"><span data-stu-id="c4a3d-138">Hence, hello VM may not be migrated, if it has a migratable extension.</span></span> <span data-ttu-id="c4a3d-139">Se till att hello VM-agenten rapporterar övergripande status för agent som klar.</span><span class="sxs-lookup"><span data-stu-id="c4a3d-139">Ensure that hello VM Agent is reporting overall agent status as Ready.</span></span> <span data-ttu-id="c4a3d-140">Läs toohttps://aka.ms/classiciaasmigrationfaqs.</span><span class="sxs-lookup"><span data-stu-id="c4a3d-140">Refer toohttps://aka.ms/classiciaasmigrationfaqs.</span></span> |<span data-ttu-id="c4a3d-141">Azure gästagenten & VM-tillägg måste du utgående internet access toohello VM storage-konto toopopulate deras status.</span><span class="sxs-lookup"><span data-stu-id="c4a3d-141">Azure guest agent & VM Extensions need outbound internet access toohello VM storage account toopopulate their status.</span></span> <span data-ttu-id="c4a3d-142">Vanliga orsaker till fel kan vara</span><span class="sxs-lookup"><span data-stu-id="c4a3d-142">Common causes of status failure include</span></span> <li> <span data-ttu-id="c4a3d-143">en Nätverkssäkerhetsgrupp som blockerar utgående åtkomst toohello internet</span><span class="sxs-lookup"><span data-stu-id="c4a3d-143">a Network Security Group that blocks outbound access toohello internet</span></span> <li> <span data-ttu-id="c4a3d-144">Om hello VNET har lokala DNS-servrar och DNS-anslutningen bryts</span><span class="sxs-lookup"><span data-stu-id="c4a3d-144">If hello VNET has on-prem DNS servers and DNS connectivity is lost</span></span> <br><br> <span data-ttu-id="c4a3d-145">Om du fortsätter toosee statusen som inte stöds kan du avinstallera hello tillägg tooskip kontrollen och gå vidare med migreringen.</span><span class="sxs-lookup"><span data-stu-id="c4a3d-145">If you continue toosee an unsupported status, you can uninstall hello extensions tooskip this check and move forward with migration.</span></span> |
| <span data-ttu-id="c4a3d-146">Migrering stöds inte för distributionen {deployment-name} i HostedService {hosted-service-name} eftersom den har flera tillgänglighetsuppsättningar.</span><span class="sxs-lookup"><span data-stu-id="c4a3d-146">Migration is not supported for Deployment {deployment-name} in HostedService {hosted-service-name} because it has multiple Availability Sets.</span></span> |<span data-ttu-id="c4a3d-147">För närvarande går det bara att migrera värdbaserade tjänster med högst 1 tillgänglighetsuppsättning.</span><span class="sxs-lookup"><span data-stu-id="c4a3d-147">Currently, only hosted services that have 1 or less Availability sets can be migrated.</span></span> <span data-ttu-id="c4a3d-148">toowork problemet, flytta hello ytterligare tillgänglighetsuppsättningar och virtuella datorer i dessa tillgänglighet anger tooa olika värdbaserade tjänsten.</span><span class="sxs-lookup"><span data-stu-id="c4a3d-148">toowork around this problem, please move hello additional Availability sets and Virtual machines in those Availability sets tooa different hosted service.</span></span> |
| <span data-ttu-id="c4a3d-149">Migrering stöds inte för distribution {distributionsnamnet} i HostedService {värd-tjänst-name eftersom den har virtuella datorer som inte är del av hello Tillgänglighetsuppsättningen även om hello HostedService innehåller en.</span><span class="sxs-lookup"><span data-stu-id="c4a3d-149">Migration is not supported for Deployment {deployment-name} in HostedService {hosted-service-name because it has VMs that are not part of hello Availability Set even though hello HostedService contains one.</span></span> |<span data-ttu-id="c4a3d-150">hello lösning för det här scenariot är tooeither flytta alla hello virtuella datorer i en enda tillgänglighet ange eller ta bort alla virtuella datorer från hello tillgänglighetsuppsättning i hello värdbaserade tjänsten.</span><span class="sxs-lookup"><span data-stu-id="c4a3d-150">hello workaround for this scenario is tooeither move all hello virtual machines into a single Availability set or remove all Virtual machines from hello Availability set in hello hosted service.</span></span> |
| <span data-ttu-id="c4a3d-151">Storage-konto/HostedService/virtuella nätverket {--namn för virtuellt nätverk} hello att migreras och därför ändras inte</span><span class="sxs-lookup"><span data-stu-id="c4a3d-151">Storage account/HostedService/Virtual Network {virtual-network-name} is in hello process of being migrated and hence cannot be changed</span></span> |<span data-ttu-id="c4a3d-152">Det här felet uppstår när hello ”Förbered”-migrering har slutförts på hello resursen och en åtgärd som gör en ändring toohello resurs utlöses.</span><span class="sxs-lookup"><span data-stu-id="c4a3d-152">This error happens when hello "Prepare" migration operation has been completed on hello resource and an operation that would make a change toohello resource is triggered.</span></span> <span data-ttu-id="c4a3d-153">På grund av hello lock hello management plan efter ”Förbered” åtgärden, eventuella ändringar toohello resursen blockeras.</span><span class="sxs-lookup"><span data-stu-id="c4a3d-153">Because of hello lock on hello management plane after "Prepare" operation, any changes toohello resource are blocked.</span></span> <span data-ttu-id="c4a3d-154">toounlock hello management plan som du kan köra hello ”spara” migrering åtgärden toocomplete migrering eller hello ”Avbryt” migrering åtgärden tooroll tillbaka hello ”Förbered” igen.</span><span class="sxs-lookup"><span data-stu-id="c4a3d-154">toounlock hello management plane, you can run hello "Commit" migration operation toocomplete migration or hello "Abort" migration operation tooroll back hello "Prepare" operation.</span></span> |
| <span data-ttu-id="c4a3d-155">Migrering tillåts inte för HostedService {hosted-service-name} eftersom den virtuella datorn {vm-name} har status: RoleStateUnknown.</span><span class="sxs-lookup"><span data-stu-id="c4a3d-155">Migration is not allowed for HostedService {hosted-service-name} because it has VM {vm-name} in State: RoleStateUnknown.</span></span> <span data-ttu-id="c4a3d-156">Migrering tillåts endast när hello virtuella datorn är i något av följande hello tillstånd - körs, Stoppad, stoppas frigjorts.</span><span class="sxs-lookup"><span data-stu-id="c4a3d-156">Migration is allowed only when hello VM is in one of hello following states - Running, Stopped, Stopped Deallocated.</span></span> |<span data-ttu-id="c4a3d-157">hello VM kan väldigt via en tillståndsövergång inträffar vanligtvis när under en uppdatering på hello HostedService, till exempel en omstart, installation av webbprogramtillägg osv. Det rekommenderas för hello uppdateringen igen toocomplete på hello HostedService innan du försöker migrera.</span><span class="sxs-lookup"><span data-stu-id="c4a3d-157">hello VM might be undergoing through a state transition, which usually happens when during an update operation on hello HostedService such as a reboot, extension installation etc. It is recommended for hello update operation toocomplete on hello HostedService before trying migration.</span></span> |
| <span data-ttu-id="c4a3d-158">{Distributionsnamnet} innehåller i HostedService {värd-tjänst-name} en virtuell dator {vm-name} med datadisk {data-disknamnet} vars fysiska blob {size-of-the-vhd-blob-backing-the-data-disk} byte inte matchar hello VM datadisk logisk storlek { Size-of-the-data-disk-specified-in-the-VM-API} byte.</span><span class="sxs-lookup"><span data-stu-id="c4a3d-158">Deployment {deployment-name} in HostedService {hosted-service-name} contains a VM {vm-name} with Data Disk {data-disk-name} whose physical blob size {size-of-the-vhd-blob-backing-the-data-disk} bytes does not match hello VM Data Disk logical size {size-of-the-data-disk-specified-in-the-vm-api} bytes.</span></span> <span data-ttu-id="c4a3d-159">Migrering fortsätter utan att ange en storlek för hello datadisk för hello Azure Resource Manager VM.</span><span class="sxs-lookup"><span data-stu-id="c4a3d-159">Migration will proceed without specifying a size for hello data disk for hello Azure Resource Manager VM.</span></span> | <span data-ttu-id="c4a3d-160">Det här felet uppstår om du har ändrat storlek hello VHD-blobben utan att uppdatera hello storlek i hello VM API-modellen.</span><span class="sxs-lookup"><span data-stu-id="c4a3d-160">This error happens if you've resized hello VHD blob without updating hello size in hello VM API model.</span></span> <span data-ttu-id="c4a3d-161">Utförliga anvisningar för migrering hittar du [nedan](#vm-with-data-disk-whose-physical-blob-size-bytes-does-not-match-the-vm-data-disk-logical-size-bytes).</span><span class="sxs-lookup"><span data-stu-id="c4a3d-161">Detailed mitigation steps are outlined [below](#vm-with-data-disk-whose-physical-blob-size-bytes-does-not-match-the-vm-data-disk-logical-size-bytes).</span></span>|
| <span data-ttu-id="c4a3d-162">Ett Storage-undantag uppstod under verifiering av datadisken {data disk name} med medielänken {data disk Uri} för den virtuella datorn {VM name} i molntjänsten {Cloud Service name}.</span><span class="sxs-lookup"><span data-stu-id="c4a3d-162">A storage exception occurred while validating data disk {data disk name} with media link {data disk Uri} for VM {VM name} in Cloud Service {Cloud Service name}.</span></span> <span data-ttu-id="c4a3d-163">Se till att hello VHD media-länk är tillgänglig för den virtuella datorn</span><span class="sxs-lookup"><span data-stu-id="c4a3d-163">Please ensure that hello VHD media link is accessible for this virtual machine</span></span> | <span data-ttu-id="c4a3d-164">Det här felet kan inträffa om hello diskar hello VM har tagits bort inte eller tillgänglig längre.</span><span class="sxs-lookup"><span data-stu-id="c4a3d-164">This error can happen if hello disks of hello VM have been deleted or are not accessible anymore.</span></span> <span data-ttu-id="c4a3d-165">Kontrollera att hello diskar för hello VM finns.</span><span class="sxs-lookup"><span data-stu-id="c4a3d-165">Please make sure hello disks for hello VM exist.</span></span>|
| <span data-ttu-id="c4a3d-166">Den virtuella datorn {vm-name} i HostedService {cloud-service-name} innehåller en disk med MediaLink {vhd-uri} med blobbnamnet {vhd-blob-name} som inte stöds i Azure Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="c4a3d-166">VM {vm-name} in HostedService {cloud-service-name} contains Disk with MediaLink {vhd-uri} which has blob name {vhd-blob-name}  that is not supported in Azure Resource Manager.</span></span> | <span data-ttu-id="c4a3d-167">Felet uppstår när hello namnet på hello-blob har en ”/” i den som inte stöds för närvarande i Compute-Resursprovidern.</span><span class="sxs-lookup"><span data-stu-id="c4a3d-167">This error occurs when hello name of hello blob has a "/" in it which is not supported in Compute Resource Provider currently.</span></span> |
| <span data-ttu-id="c4a3d-168">Migrering tillåts inte för distribution {distributionsnamnet} i HostedService {molntjänstnamnet} eftersom den inte är i hello regionala omfånget.</span><span class="sxs-lookup"><span data-stu-id="c4a3d-168">Migration is not allowed for Deployment {deployment-name} in HostedService {cloud-service-name} as it is not in hello regional scope.</span></span> <span data-ttu-id="c4a3d-169">Se toohttp://aka.ms/regionalscope för att flytta den här distributionen tooregional omfång.</span><span class="sxs-lookup"><span data-stu-id="c4a3d-169">Please refer toohttp://aka.ms/regionalscope for moving this deployment tooregional scope.</span></span> | <span data-ttu-id="c4a3d-170">Azure har 2014 meddelat att nätverksresurser flyttas från ett kluster nivån scope tooregional omfång.</span><span class="sxs-lookup"><span data-stu-id="c4a3d-170">In 2014, Azure announced that networking resources will move from a cluster level scope tooregional scope.</span></span> <span data-ttu-id="c4a3d-171">Mer information finns i [http://aka.ms/regionalscope] (http://aka.ms/regionalscope).</span><span class="sxs-lookup"><span data-stu-id="c4a3d-171">See [http://aka.ms/regionalscope] for more details (http://aka.ms/regionalscope).</span></span> <span data-ttu-id="c4a3d-172">Det här felet uppstår när hello distribution migreras inte har funnits en uppdateringsåtgärd som automatiskt flyttar tooa regionala omfånget.</span><span class="sxs-lookup"><span data-stu-id="c4a3d-172">This error happens when hello deployment being migrated has not had an update operation, which automatically moves it tooa regional scope.</span></span> <span data-ttu-id="c4a3d-173">Bästa lösningen är tooeither lägga till en slutpunkt tooa VM eller en disk toohello VM och försök sedan migrering.</span><span class="sxs-lookup"><span data-stu-id="c4a3d-173">Best workaround is tooeither add an endpoint tooa VM or a data disk toohello VM and then retry migration.</span></span> <br> <span data-ttu-id="c4a3d-174">Se [hur tooset av slutpunkter för klassiska Windows-dator i Azure](../articles/virtual-machines/windows/classic/setup-endpoints.md#create-an-endpoint) eller [bifoga en data disk tooa Windows virtuell dator som skapats med hello klassiska distributionsmodellen](../articles/virtual-machines/windows/classic/attach-disk.md)</span><span class="sxs-lookup"><span data-stu-id="c4a3d-174">See [How tooset up endpoints on a classic Windows virtual machine in Azure](../articles/virtual-machines/windows/classic/setup-endpoints.md#create-an-endpoint) or [Attach a data disk tooa Windows virtual machine created with hello classic deployment model](../articles/virtual-machines/windows/classic/attach-disk.md)</span></span>|


## <a name="detailed-mitigations"></a><span data-ttu-id="c4a3d-175">Detaljerade åtgärder</span><span class="sxs-lookup"><span data-stu-id="c4a3d-175">Detailed mitigations</span></span>

### <a name="vm-with-data-disk-whose-physical-blob-size-bytes-does-not-match-hello-vm-data-disk-logical-size-bytes"></a><span data-ttu-id="c4a3d-176">Virtuell dator med datadisk vars fysiska blob-byte matchar inte hello VM datadisk logiska byte.</span><span class="sxs-lookup"><span data-stu-id="c4a3d-176">VM with Data Disk whose physical blob size bytes does not match hello VM Data Disk logical size bytes.</span></span>

<span data-ttu-id="c4a3d-177">Detta händer när hello logiska datadiskstorleken får synkroniserad med hello faktiska VHD-blobbstorleken.</span><span class="sxs-lookup"><span data-stu-id="c4a3d-177">This happens when hello Data disk logical size can get out of sync with hello actual VHD blob size.</span></span> <span data-ttu-id="c4a3d-178">Enkelt du kan kontrollera med hjälp av hello följande kommandon:</span><span class="sxs-lookup"><span data-stu-id="c4a3d-178">This can be easily verified using hello following commands:</span></span>

#### <a name="verifying-hello-issue"></a><span data-ttu-id="c4a3d-179">Verifiera hello problemet</span><span class="sxs-lookup"><span data-stu-id="c4a3d-179">Verifying hello issue</span></span>

```PowerShell
# Store hello VM details in hello VM object
$vm = Get-AzureVM -ServiceName $servicename -Name $vmname

# Display hello data disk properties
# NOTE hello data disk LogicalDiskSizeInGB below which is 11GB. Also note hello MediaLink Uri of hello VHD blob as we'll use this in hello next step
$vm.VM.DataVirtualHardDisks


HostCaching         : None
DiskLabel           : 
DiskName            : coreosvm-coreosvm-0-201611230636240687
Lun                 : 0
LogicalDiskSizeInGB : 11
MediaLink           : https://contosostorage.blob.core.windows.net/vhds/coreosvm-dd1.vhd
SourceMediaLink     : 
IOType              : Standard
ExtensionData       : 

# Now get hello properties of hello blob backing hello data disk above
# NOTE hello size of hello blob is about 15 GB which is different from LogicalDiskSizeInGB above
$blob = Get-AzureStorageblob -Blob "coreosvm-dd1.vhd" -Container vhds 

$blob

ICloudBlob        : Microsoft.WindowsAzure.Storage.Blob.CloudPageBlob
BlobType          : PageBlob
Length            : 16106127872
ContentType       : application/octet-stream
LastModified      : 11/23/2016 7:16:22 AM +00:00
SnapshotTime      : 
ContinuationToken : 
Context           : Microsoft.WindowsAzure.Commands.Common.Storage.AzureStorageContext
Name              : coreosvm-dd1.vhd
```

#### <a name="mitigating-hello-issue"></a><span data-ttu-id="c4a3d-180">Minimera hello problemet</span><span class="sxs-lookup"><span data-stu-id="c4a3d-180">Mitigating hello issue</span></span>

```PowerShell
# Convert hello blob size in bytes tooGB into a variable which we'll use later
$newSize = [int]($blob.Length / 1GB)

# See hello calculated size in GB
$newSize

15

# Store hello disk name of hello data disk as we'll use this tooidentify hello disk toobe updated
$diskName = $vm.VM.DataVirtualHardDisks[0].DiskName

# Identify hello LUN of hello data disk tooremove
$lunToRemove = $vm.VM.DataVirtualHardDisks[0].Lun

# Now remove hello data disk from hello VM so that hello disk isn't leased by hello VM and it's size can be updated
Remove-AzureDataDisk -LUN $lunToRemove -VM $vm | Update-AzureVm -Name $vmname -ServiceName $servicename

OperationDescription OperationId                          OperationStatus
-------------------- -----------                          ---------------
Update-AzureVM       213xx1-b44b-1v6n-23gg-591f2a13cd16   Succeeded  

# Verify we have hello right disk that's going toobe updated
Get-AzureDisk -DiskName $diskName

AffinityGroup        : 
AttachedTo           : 
IsCorrupted          : False
Label                : 
Location             : East US
DiskSizeInGB         : 11
MediaLink            : https://contosostorage.blob.core.windows.net/vhds/coreosvm-dd1.vhd
DiskName             : coreosvm-coreosvm-0-201611230636240687
SourceImageName      : 
OS                   : 
IOType               : Standard
OperationDescription : Get-AzureDisk
OperationId          : 0c56a2b7-a325-123b-7043-74c27d5a61fd
OperationStatus      : Succeeded

# Now update hello disk toohello new size
Update-AzureDisk -DiskName $diskName -ResizedSizeInGB $newSize -Label $diskName

OperationDescription OperationId                          OperationStatus
-------------------- -----------                          ---------------
Update-AzureDisk     cv134b65-1b6n-8908-abuo-ce9e395ac3e7 Succeeded 

# Now verify that hello "DiskSizeInGB" property of hello disk matches hello size of hello blob 
Get-AzureDisk -DiskName $diskName


AffinityGroup        : 
AttachedTo           : 
IsCorrupted          : False
Label                : coreosvm-coreosvm-0-201611230636240687
Location             : East US
DiskSizeInGB         : 15
MediaLink            : https://contosostorage.blob.core.windows.net/vhds/coreosvm-dd1.vhd
DiskName             : coreosvm-coreosvm-0-201611230636240687
SourceImageName      : 
OS                   : 
IOType               : Standard
OperationDescription : Get-AzureDisk
OperationId          : 1v53bde5-cv56-5621-9078-16b9c8a0bad2
OperationStatus      : Succeeded

# Now we'll add hello disk back toohello VM as a data disk. First we need tooget an updated VM object
$vm = Get-AzureVM -ServiceName $servicename -Name $vmname

Add-AzureDataDisk -Import -DiskName $diskName -LUN 0 -VM $vm -HostCaching ReadWrite | Update-AzureVm -Name $vmname -ServiceName $servicename

OperationDescription OperationId                          OperationStatus
-------------------- -----------                          ---------------
Update-AzureVM       b0ad3d4c-4v68-45vb-xxc1-134fd010d0f8 Succeeded      
```

### <a name="moving-a-vm-tooa-different-subscription-after-completing-migration"></a><span data-ttu-id="c4a3d-181">Flytta en virtuell dator tooa annan prenumeration när du har slutfört migreringen</span><span class="sxs-lookup"><span data-stu-id="c4a3d-181">Moving a VM tooa different subscription after completing migration</span></span>

<span data-ttu-id="c4a3d-182">När du har slutfört migreringen hello kanske toomove hello VM tooanother prenumeration.</span><span class="sxs-lookup"><span data-stu-id="c4a3d-182">After you complete hello migration process, you may want toomove hello VM tooanother subscription.</span></span> <span data-ttu-id="c4a3d-183">Men om du har en hemlighet /-certifikatet på stöds hello flytta VM som refererar till en Key Vault-resurs hello för närvarande inte.</span><span class="sxs-lookup"><span data-stu-id="c4a3d-183">However, if you have a secret/certificate on hello VM that references a Key Vault resource, hello move is currently not supported.</span></span> <span data-ttu-id="c4a3d-184">hello nedan instruktioner kan tooworkaround hello problemet.</span><span class="sxs-lookup"><span data-stu-id="c4a3d-184">hello below instructions will allow you tooworkaround hello issue.</span></span> 

#### <a name="powershell"></a><span data-ttu-id="c4a3d-185">PowerShell</span><span class="sxs-lookup"><span data-stu-id="c4a3d-185">PowerShell</span></span>
```powershell
$vm = Get-AzureRmVM -ResourceGroupName "MyRG" -Name "MyVM"
Remove-AzureRmVMSecret -VM $vm
Update-AzureRmVM -ResourceGroupName "MyRG" -VM $vm
```
#### <a name="azure-cli-20"></a><span data-ttu-id="c4a3d-186">Azure CLI 2.0</span><span class="sxs-lookup"><span data-stu-id="c4a3d-186">Azure CLI 2.0</span></span>

```bash
az vm update -g "myrg" -n "myvm" --set osProfile.Secrets=[]
```

# <a name="secure-your-iot-deployment"></a><span data-ttu-id="88796-101">Skydda distributionen av IoT</span><span class="sxs-lookup"><span data-stu-id="88796-101">Secure your IoT deployment</span></span>
<span data-ttu-id="88796-102">Den här artikeln innehåller hello nästa detaljnivå för att skydda hello Azure IoT-baserade Sakernas Internet (IoT) infrastruktur.</span><span class="sxs-lookup"><span data-stu-id="88796-102">This article provides hello next level of detail for securing hello Azure IoT-based Internet of Things (IoT) infrastructure.</span></span> <span data-ttu-id="88796-103">Den länkar tooimplementation information för att konfigurera och distribuera varje komponent.</span><span class="sxs-lookup"><span data-stu-id="88796-103">It links tooimplementation level details for configuring and deploying each component.</span></span> <span data-ttu-id="88796-104">Det ger också jämförelser och val mellan olika konkurrerande metoder.</span><span class="sxs-lookup"><span data-stu-id="88796-104">It also provides comparisons and choices between various competing methods.</span></span>

<span data-ttu-id="88796-105">Säkra hello Azure IoT-distributionen kan delas in i följande tre säkerhetsområden hello:</span><span class="sxs-lookup"><span data-stu-id="88796-105">Securing hello Azure IoT deployment can be divided into hello following three security areas:</span></span>

* <span data-ttu-id="88796-106">**Enheternas säkerhet**: skydda hello IoT-enhet när den har distribuerats i hello vilda.</span><span class="sxs-lookup"><span data-stu-id="88796-106">**Device Security**: Securing hello IoT device while it is deployed in hello wild.</span></span>
* <span data-ttu-id="88796-107">**Anslutningssäkerhet**: säkerställer att alla data som överförs mellan hello IoT-enhet och IoT-hubben är konfidentiellt och förfalska.</span><span class="sxs-lookup"><span data-stu-id="88796-107">**Connection Security**: Ensuring all data transmitted between hello IoT device and IoT Hub is confidential and tamper-proof.</span></span>
* <span data-ttu-id="88796-108">**Cloud Security**: tillhandahåller en innebär toosecure data medan den går genom och lagras i hello molnet.</span><span class="sxs-lookup"><span data-stu-id="88796-108">**Cloud Security**: Providing a means toosecure data while it moves through, and is stored in hello cloud.</span></span>

![Tre säkerhetsområden][img-overview]

## <a name="secure-device-provisioning-and-authentication"></a><span data-ttu-id="88796-110">Säker enhetsetableringen och autentisering</span><span class="sxs-lookup"><span data-stu-id="88796-110">Secure device provisioning and authentication</span></span>
<span data-ttu-id="88796-111">hello Azure IoT Suite skyddar IoT-enheter med hello följande två metoder:</span><span class="sxs-lookup"><span data-stu-id="88796-111">hello Azure IoT Suite secures IoT devices by hello following two methods:</span></span>

* <span data-ttu-id="88796-112">Genom att tillhandahålla en unik identitetsnyckel (säkerhetstoken) för varje enhet som kan användas av hello enheten toocommunicate med hello IoT-hubb.</span><span class="sxs-lookup"><span data-stu-id="88796-112">By providing a unique identity key (security tokens) for each device, which can be used by hello device toocommunicate with hello IoT Hub.</span></span>
* <span data-ttu-id="88796-113">Med hjälp av en på enhet [X.509-certifikat] [ lnk-x509] och den privata nyckeln som en innebär tooauthenticate hello enheten toohello IoT-hubb.</span><span class="sxs-lookup"><span data-stu-id="88796-113">By using an on-device [X.509 certificate][lnk-x509] and private key as a means tooauthenticate hello device toohello IoT Hub.</span></span> <span data-ttu-id="88796-114">Den här autentiseringsmetoden garanterar att hello privata nyckel på hello enheten inte är känd utanför hello enhet när som helst ger en högre säkerhetsnivå.</span><span class="sxs-lookup"><span data-stu-id="88796-114">This authentication method ensures that hello private key on hello device is not known outside hello device at any time, providing a higher level of security.</span></span>

<span data-ttu-id="88796-115">hello token säkerhetsmetod ger autentisering för varje anrop gjorda av hello enheten tooIoT Hub genom att associera hello symmetrisk nyckel tooeach anrop.</span><span class="sxs-lookup"><span data-stu-id="88796-115">hello security token method provides authentication for each call made by hello device tooIoT Hub by associating hello symmetric key tooeach call.</span></span> <span data-ttu-id="88796-116">X.509-baserad autentisering tillåter autentisering för en IoT-enhet på hello fysiska lagret som en del av hello TLS anslutningen upprättas.</span><span class="sxs-lookup"><span data-stu-id="88796-116">X.509-based authentication allows authentication of an IoT device at hello physical layer as part of hello TLS connection establishment.</span></span> <span data-ttu-id="88796-117">hello säkerhets-token-baserade metoden kan användas utan hello X.509-autentisering som är ett mindre säkert mönster.</span><span class="sxs-lookup"><span data-stu-id="88796-117">hello security-token-based method can be used without hello X.509 authentication which is a less secure pattern.</span></span> <span data-ttu-id="88796-118">hello val mellan hello två metoder i första hand bestäms av hur säker hello enhetsautentisering måste toobe och tillgänglighet för säker lagring på hello enhet (toostore hello privata nyckel på ett säkert sätt).</span><span class="sxs-lookup"><span data-stu-id="88796-118">hello choice between hello two methods is primarily dictated by how secure hello device authentication needs toobe, and availability of secure storage on hello device (toostore hello private key securely).</span></span>

## <a name="iot-hub-security-tokens"></a><span data-ttu-id="88796-119">Säkerhetstoken i IoT Hub</span><span class="sxs-lookup"><span data-stu-id="88796-119">IoT Hub security tokens</span></span>
<span data-ttu-id="88796-120">IoT-hubb använder säkerhet token tooauthenticate enheter och tjänster tooavoid, skickar nycklar i hello nätverk.</span><span class="sxs-lookup"><span data-stu-id="88796-120">IoT Hub uses security tokens tooauthenticate devices and services tooavoid sending keys on hello network.</span></span> <span data-ttu-id="88796-121">Dessutom är säkerhetstoken begränsad giltighetstid och omfång.</span><span class="sxs-lookup"><span data-stu-id="88796-121">Additionally, security tokens are limited in time validity and scope.</span></span> <span data-ttu-id="88796-122">Azure IoT-SDK: er generera automatiskt token utan någon specialkonfiguration.</span><span class="sxs-lookup"><span data-stu-id="88796-122">Azure IoT SDKs automatically generate tokens without requiring any special configuration.</span></span> <span data-ttu-id="88796-123">Vissa scenarier, men kräver hello användaren toogenerate och använder säkerhetstoken direkt.</span><span class="sxs-lookup"><span data-stu-id="88796-123">Some scenarios, however, require hello user toogenerate and use security tokens directly.</span></span> <span data-ttu-id="88796-124">Dessa inkluderar hello direkt användning av hello MQTT, AMQP och HTTP- eller hello implementering av hello tokentjänsten mönster.</span><span class="sxs-lookup"><span data-stu-id="88796-124">These include hello direct use of hello MQTT, AMQP, or HTTP surfaces, or hello implementation of hello token service pattern.</span></span>

<span data-ttu-id="88796-125">Mer information om hello struktur hello säkerhetstoken och användning finns i hello följande artiklar:</span><span class="sxs-lookup"><span data-stu-id="88796-125">More details on hello structure of hello security token and its usage can be found in hello following articles:</span></span>

* <span data-ttu-id="88796-126">[Säkerhet token struktur][lnk-security-tokens]</span><span class="sxs-lookup"><span data-stu-id="88796-126">[Security token structure][lnk-security-tokens]</span></span>
* <span data-ttu-id="88796-127">[Med hjälp av SAS-token som en enhet][lnk-sas-tokens]</span><span class="sxs-lookup"><span data-stu-id="88796-127">[Using SAS tokens as a device][lnk-sas-tokens]</span></span>

<span data-ttu-id="88796-128">Varje IoT-hubben har en [identitetsregistret] [ lnk-identity-registry] som kan vara används toocreate per enhet resurser i hello-tjänst, till exempel en kö som innehåller relä moln till enhet meddelanden och tooallow access toohello enheten riktade slutpunkter.</span><span class="sxs-lookup"><span data-stu-id="88796-128">Each IoT Hub has an [identity registry][lnk-identity-registry] that can be used toocreate per-device resources in hello service, such as a queue that contains in-flight cloud-to-device messages, and tooallow access toohello device-facing endpoints.</span></span> <span data-ttu-id="88796-129">Hej IoT-hubb identitetsregistret ger säker lagring av enheten identiteter och säkerhetsnycklar för en lösning.</span><span class="sxs-lookup"><span data-stu-id="88796-129">hello IoT Hub identity registry provides secure storage of device identities and security keys for a solution.</span></span> <span data-ttu-id="88796-130">En eller flera enheter identiteter kan läggas till tooan Tillåt lista eller en Blockeringslista aktivera fullständig kontroll över enheten.</span><span class="sxs-lookup"><span data-stu-id="88796-130">Individual or groups of device identities can be added tooan allow list, or a block list, enabling complete control over device access.</span></span> <span data-ttu-id="88796-131">hello innehåller följande artiklar mer information om hello struktur hello identitetsregistret och åtgärder som stöds.</span><span class="sxs-lookup"><span data-stu-id="88796-131">hello following articles provide more details on hello structure of hello identity registry and supported operations.</span></span>

<span data-ttu-id="88796-132">[IoT-hubb stöder till exempel MQTT, AMQP och HTTP-protokoll][lnk-protocols].</span><span class="sxs-lookup"><span data-stu-id="88796-132">[IoT Hub supports protocols such as MQTT, AMQP, and HTTP][lnk-protocols].</span></span> <span data-ttu-id="88796-133">Var och en av dessa protokoll använder säkerhetstoken från hello IoT enhet tooIoT hubb på olika sätt:</span><span class="sxs-lookup"><span data-stu-id="88796-133">Each of these protocols use security tokens from hello IoT device tooIoT Hub differently:</span></span>

* <span data-ttu-id="88796-134">AMQP: SASL vanlig AMQP anspråksbaserad säkerhet och ({policyName}@sas.root. { iothubName} hello gäller IoT hub-nivå token; {deviceId} vid enheten omfång token).</span><span class="sxs-lookup"><span data-stu-id="88796-134">AMQP: SASL PLAIN and AMQP Claims-based security ({policyName}@sas.root.{iothubName} in hello case of IoT hub-level tokens; {deviceId} in case of device-scoped tokens).</span></span>
* <span data-ttu-id="88796-135">MQTT: Anslut paket använder {deviceId} som hello {ClientId}, {IoThubhostname} / {deviceId} i hello **användarnamn** fältet och en SAS-token i hello **lösenord** fältet.</span><span class="sxs-lookup"><span data-stu-id="88796-135">MQTT: CONNECT packet uses {deviceId} as hello {ClientId}, {IoThubhostname}/{deviceId} in hello **Username** field and a SAS token in hello **Password** field.</span></span>
* <span data-ttu-id="88796-136">HTTP: Ogiltig token är i hello authorization-huvud i begäran.</span><span class="sxs-lookup"><span data-stu-id="88796-136">HTTP: Valid token is in hello authorization request header.</span></span>

<span data-ttu-id="88796-137">IoT-hubb identitetsregistret kan använda tooconfigure per enhet säkerhetsreferenser och åtkomstkontroll.</span><span class="sxs-lookup"><span data-stu-id="88796-137">IoT Hub identity registry can be used tooconfigure per-device security credentials and access control.</span></span> <span data-ttu-id="88796-138">Men om en IoT-lösningen har redan en betydande investering i en [anpassade identitet registret och/eller autentisering schemat][lnk-custom-auth], kan integreras i en befintlig infrastruktur med IoT-hubben genom att skapa en token tjänst.</span><span class="sxs-lookup"><span data-stu-id="88796-138">However, if an IoT solution already has a significant investment in a [custom device identity registry and/or authentication scheme][lnk-custom-auth], it can be integrated into an existing infrastructure with IoT Hub by creating a token service.</span></span>

### <a name="x509-certificate-based-device-authentication"></a><span data-ttu-id="88796-139">X.509 certifikatbaserad autentisering</span><span class="sxs-lookup"><span data-stu-id="88796-139">X.509 certificate-based device authentication</span></span>
<span data-ttu-id="88796-140">Hej användning av en [enhetsbaserad X.509-certifikat] [ lnk-use-x509] och dess associerade privata och offentliga nyckelpar tillåter ytterligare autentisering vid hello fysiska skiktet.</span><span class="sxs-lookup"><span data-stu-id="88796-140">hello use of a [device-based X.509 certificate][lnk-use-x509] and its associated private and public key pair allows additional authentication at hello physical layer.</span></span> <span data-ttu-id="88796-141">hello privata nyckeln lagras på ett säkert sätt i hello enheten och är inte kan upptäckas utanför hello enhet.</span><span class="sxs-lookup"><span data-stu-id="88796-141">hello private key is stored securely in hello device and is not discoverable outside hello device.</span></span> <span data-ttu-id="88796-142">hello X.509-certifikat innehåller information om hello-enhet, till exempel enhets-ID och andra organisatoriska information.</span><span class="sxs-lookup"><span data-stu-id="88796-142">hello X.509 certificate contains information about hello device, such as device ID, and other organizational details.</span></span> <span data-ttu-id="88796-143">En signatur för hello certifikat ska genereras med hjälp av hello privata nyckel.</span><span class="sxs-lookup"><span data-stu-id="88796-143">A signature of hello certificate is generated by using hello private key.</span></span>

<span data-ttu-id="88796-144">Övergripande enheten etablering flöde:</span><span class="sxs-lookup"><span data-stu-id="88796-144">High-level device provisioning flow:</span></span>

* <span data-ttu-id="88796-145">Associera en identifierare tooa fysisk enhet – enhetsidentitet och/eller X.509-certifikat associerade toohello enheten under enhet tillverkar eller idriftsättning.</span><span class="sxs-lookup"><span data-stu-id="88796-145">Associate an identifier tooa physical device – device identity and/or X.509 certificate associated toohello device during device manufacturing or commissioning.</span></span>
* <span data-ttu-id="88796-146">Skapa en motsvarande identity-transaktion i IoT-hubb – enhetsidentitet och associerade enhetsinformation i hello IoT-hubb identitetsregistret.</span><span class="sxs-lookup"><span data-stu-id="88796-146">Create a corresponding identity entry in IoT Hub – device identity and associated device information in hello IoT Hub identity registry.</span></span>
* <span data-ttu-id="88796-147">Tumavtrycket för X.509-certifikatet lagras säkert i IoT-hubb identitetsregistret.</span><span class="sxs-lookup"><span data-stu-id="88796-147">Securely store X.509 certificate thumbprint in IoT Hub identity registry.</span></span>

### <a name="root-certificate-on-device"></a><span data-ttu-id="88796-148">Rotcertifikatet på enheter</span><span class="sxs-lookup"><span data-stu-id="88796-148">Root certificate on device</span></span>
<span data-ttu-id="88796-149">När du upprättar en säker TLS-anslutning med IoT-hubben autentiserar hello IoT-enhet IoT-hubb med ett rotcertifikat som är en del av hello enheten SDK.</span><span class="sxs-lookup"><span data-stu-id="88796-149">While establishing a secure TLS connection with IoT Hub, hello IoT device authenticates IoT Hub using a root certificate which is part of hello device SDK.</span></span> <span data-ttu-id="88796-150">Hello-certifikatet för hello C klient-SDK finns hello i mappen ”\\c\\certifikat” under hello roten för hello lagringsplatsen.</span><span class="sxs-lookup"><span data-stu-id="88796-150">For hello C client SDK hello certificate is located under hello folder "\\c\\certs" under hello root of hello repo.</span></span> <span data-ttu-id="88796-151">Även om dessa rotcertifikat är långlivade, kan de fortfarande eller upphöra att gälla.</span><span class="sxs-lookup"><span data-stu-id="88796-151">Though these root certificates are long-lived, they still may expire or be revoked.</span></span> <span data-ttu-id="88796-152">Om det går inte att uppdatera hello certifikatet på hello enheten hello enheten inte kan ansluta toosubsequently toohello IoT-hubb (eller andra Molntjänsten).</span><span class="sxs-lookup"><span data-stu-id="88796-152">If there is no way of updating hello certificate on hello device, hello device may not be able toosubsequently connect toohello IoT Hub (or any other cloud service).</span></span> <span data-ttu-id="88796-153">Med ett rotcertifikat för innebär tooupdate hello när hello IoT-enhet har distribuerats kommer ett effektivt sätt att minska denna risk.</span><span class="sxs-lookup"><span data-stu-id="88796-153">Having a means tooupdate hello root certificate once hello IoT device is deployed will effectively mitigate this risk.</span></span>

## <a name="securing-hello-connection"></a><span data-ttu-id="88796-154">Att säkra hello-anslutning</span><span class="sxs-lookup"><span data-stu-id="88796-154">Securing hello connection</span></span>
<span data-ttu-id="88796-155">Internet-anslutning mellan hello IoT-enhet och IoT-hubben är säkrad via hello Transport Layer Security (TLS)-standard.</span><span class="sxs-lookup"><span data-stu-id="88796-155">Internet connection between hello IoT device and IoT Hub is secured using hello Transport Layer Security (TLS) standard.</span></span> <span data-ttu-id="88796-156">Azure IoT stöder [TLS 1.2][lnk-tls12], TLS 1.1 och TLS 1.0 i den här ordningen.</span><span class="sxs-lookup"><span data-stu-id="88796-156">Azure IoT supports [TLS 1.2][lnk-tls12], TLS 1.1 and TLS 1.0, in this order.</span></span> <span data-ttu-id="88796-157">Stöd för TLS 1.0 tillhandahålls endast för bakåtkompatibilitet.</span><span class="sxs-lookup"><span data-stu-id="88796-157">Support for TLS 1.0 is provided for backward compatibility only.</span></span> <span data-ttu-id="88796-158">Det rekommenderas toouse TLS 1.2 eftersom hello ger bäst skydd.</span><span class="sxs-lookup"><span data-stu-id="88796-158">It is recommended toouse TLS 1.2 since it provides hello most security.</span></span>

<span data-ttu-id="88796-159">Azure IoT Suite stöder hello följande krypteringssviter, i den här ordningen.</span><span class="sxs-lookup"><span data-stu-id="88796-159">Azure IoT Suite supports hello following Cipher Suites, in this order.</span></span>

| <span data-ttu-id="88796-160">Chiffersvit</span><span class="sxs-lookup"><span data-stu-id="88796-160">Cipher Suite</span></span> | <span data-ttu-id="88796-161">Längd</span><span class="sxs-lookup"><span data-stu-id="88796-161">Length</span></span> |
| --- | --- |
| <span data-ttu-id="88796-162">TLS\_ECDHE\_RSA\_WITH\_AES\_256\_CBC\_SHA384 (0xc028) ECDH secp384r1 (eq.</span><span class="sxs-lookup"><span data-stu-id="88796-162">TLS\_ECDHE\_RSA\_WITH\_AES\_256\_CBC\_SHA384 (0xc028) ECDH secp384r1 (eq.</span></span> <span data-ttu-id="88796-163">FS 7680 bitar RSA)</span><span class="sxs-lookup"><span data-stu-id="88796-163">7680 bits RSA) FS</span></span> |<span data-ttu-id="88796-164">256</span><span class="sxs-lookup"><span data-stu-id="88796-164">256</span></span> |
| <span data-ttu-id="88796-165">TLS\_ECDHE\_RSA\_WITH\_AES\_128\_CBC\_SHA256 (0xc027) ECDH secp256r1 (eq.</span><span class="sxs-lookup"><span data-stu-id="88796-165">TLS\_ECDHE\_RSA\_WITH\_AES\_128\_CBC\_SHA256 (0xc027) ECDH secp256r1 (eq.</span></span> <span data-ttu-id="88796-166">FS 3072 bitar RSA)</span><span class="sxs-lookup"><span data-stu-id="88796-166">3072 bits RSA) FS</span></span> |<span data-ttu-id="88796-167">128</span><span class="sxs-lookup"><span data-stu-id="88796-167">128</span></span> |
| <span data-ttu-id="88796-168">TLS\_ECDHE\_RSA\_WITH\_AES\_256\_CBC\_SHA (0xc014) ECDH secp384r1 (eq.</span><span class="sxs-lookup"><span data-stu-id="88796-168">TLS\_ECDHE\_RSA\_WITH\_AES\_256\_CBC\_SHA (0xc014) ECDH secp384r1 (eq.</span></span> <span data-ttu-id="88796-169">FS 7680 bitar RSA)</span><span class="sxs-lookup"><span data-stu-id="88796-169">7680 bits RSA) FS</span></span> |<span data-ttu-id="88796-170">256</span><span class="sxs-lookup"><span data-stu-id="88796-170">256</span></span> |
| <span data-ttu-id="88796-171">TLS\_ECDHE\_RSA\_WITH\_AES\_128\_CBC\_SHA (0xc013) ECDH secp256r1 (eq.</span><span class="sxs-lookup"><span data-stu-id="88796-171">TLS\_ECDHE\_RSA\_WITH\_AES\_128\_CBC\_SHA (0xc013) ECDH secp256r1 (eq.</span></span> <span data-ttu-id="88796-172">FS 3072 bitar RSA)</span><span class="sxs-lookup"><span data-stu-id="88796-172">3072 bits RSA) FS</span></span> |<span data-ttu-id="88796-173">128</span><span class="sxs-lookup"><span data-stu-id="88796-173">128</span></span> |
| <span data-ttu-id="88796-174">TLS\_RSA\_WITH\_AES\_256\_GCM\_SHA384 (0x9d)</span><span class="sxs-lookup"><span data-stu-id="88796-174">TLS\_RSA\_WITH\_AES\_256\_GCM\_SHA384 (0x9d)</span></span> |<span data-ttu-id="88796-175">256</span><span class="sxs-lookup"><span data-stu-id="88796-175">256</span></span> |
| <span data-ttu-id="88796-176">TLS\_RSA\_WITH\_AES\_128\_GCM\_SHA256 (0x9c)</span><span class="sxs-lookup"><span data-stu-id="88796-176">TLS\_RSA\_WITH\_AES\_128\_GCM\_SHA256 (0x9c)</span></span> |<span data-ttu-id="88796-177">128</span><span class="sxs-lookup"><span data-stu-id="88796-177">128</span></span> |
| <span data-ttu-id="88796-178">TLS\_RSA\_WITH\_AES\_256\_CBC\_SHA256 (0x3d)</span><span class="sxs-lookup"><span data-stu-id="88796-178">TLS\_RSA\_WITH\_AES\_256\_CBC\_SHA256 (0x3d)</span></span> |<span data-ttu-id="88796-179">256</span><span class="sxs-lookup"><span data-stu-id="88796-179">256</span></span> |
| <span data-ttu-id="88796-180">TLS\_RSA\_WITH\_AES\_128\_CBC\_SHA256 (0x3c)</span><span class="sxs-lookup"><span data-stu-id="88796-180">TLS\_RSA\_WITH\_AES\_128\_CBC\_SHA256 (0x3c)</span></span> |<span data-ttu-id="88796-181">128</span><span class="sxs-lookup"><span data-stu-id="88796-181">128</span></span> |
| <span data-ttu-id="88796-182">TLS\_RSA\_WITH\_AES\_256\_CBC\_SHA (0x35)</span><span class="sxs-lookup"><span data-stu-id="88796-182">TLS\_RSA\_WITH\_AES\_256\_CBC\_SHA (0x35)</span></span> |<span data-ttu-id="88796-183">256</span><span class="sxs-lookup"><span data-stu-id="88796-183">256</span></span> |
| <span data-ttu-id="88796-184">TLS\_RSA\_WITH\_AES\_128\_CBC\_SHA (0x2f)</span><span class="sxs-lookup"><span data-stu-id="88796-184">TLS\_RSA\_WITH\_AES\_128\_CBC\_SHA (0x2f)</span></span> |<span data-ttu-id="88796-185">128</span><span class="sxs-lookup"><span data-stu-id="88796-185">128</span></span> |
| <span data-ttu-id="88796-186">TLS\_RSA\_WITH\_3DES\_Nederländerna\_CBC\_SHA (0xa)</span><span class="sxs-lookup"><span data-stu-id="88796-186">TLS\_RSA\_WITH\_3DES\_EDE\_CBC\_SHA (0xa)</span></span> |<span data-ttu-id="88796-187">112</span><span class="sxs-lookup"><span data-stu-id="88796-187">112</span></span> |

## <a name="securing-hello-cloud"></a><span data-ttu-id="88796-188">Att säkra hello-moln</span><span class="sxs-lookup"><span data-stu-id="88796-188">Securing hello cloud</span></span>
<span data-ttu-id="88796-189">Azure IoT-hubb tillåter definition av [åtkomstprinciper kontrollen] [ lnk-protocols] för varje säkerhetsnyckel.</span><span class="sxs-lookup"><span data-stu-id="88796-189">Azure IoT Hub allows definition of [access control policies][lnk-protocols] for each security key.</span></span> <span data-ttu-id="88796-190">Den använder hello följande uppsättning behörigheter toogrant åtkomst tooeach IoT-hubb slutpunkter.</span><span class="sxs-lookup"><span data-stu-id="88796-190">It uses hello following set of permissions toogrant access tooeach of IoT Hub's endpoints.</span></span> <span data-ttu-id="88796-191">Behörigheter begränsa hello åtkomst tooan IoT-hubb som baseras på funktionen.</span><span class="sxs-lookup"><span data-stu-id="88796-191">Permissions limit hello access tooan IoT Hub based on functionality.</span></span>

* <span data-ttu-id="88796-192">**RegistryRead**.</span><span class="sxs-lookup"><span data-stu-id="88796-192">**RegistryRead**.</span></span> <span data-ttu-id="88796-193">Ger läsbehörighet toohello identitetsregistret.</span><span class="sxs-lookup"><span data-stu-id="88796-193">Grants read access toohello identity registry.</span></span> <span data-ttu-id="88796-194">Mer information finns i [identitetsregistret][lnk-identity-registry].</span><span class="sxs-lookup"><span data-stu-id="88796-194">For more information, see [identity registry][lnk-identity-registry].</span></span>
* <span data-ttu-id="88796-195">**RegistryReadWrite**.</span><span class="sxs-lookup"><span data-stu-id="88796-195">**RegistryReadWrite**.</span></span> <span data-ttu-id="88796-196">Ger Läs- och skrivbehörighet toohello identitetsregistret.</span><span class="sxs-lookup"><span data-stu-id="88796-196">Grants read and write access toohello identity registry.</span></span> <span data-ttu-id="88796-197">Mer information finns i [identitetsregistret][lnk-identity-registry].</span><span class="sxs-lookup"><span data-stu-id="88796-197">For more information, see [identity registry][lnk-identity-registry].</span></span>
* <span data-ttu-id="88796-198">**ServiceConnect**.</span><span class="sxs-lookup"><span data-stu-id="88796-198">**ServiceConnect**.</span></span> <span data-ttu-id="88796-199">Ger åtkomst till toocloud service-riktade kommunikation och övervakning av slutpunkter.</span><span class="sxs-lookup"><span data-stu-id="88796-199">Grants access toocloud service-facing communication and monitoring endpoints.</span></span> <span data-ttu-id="88796-200">Till exempel beviljas behörighet tooback slutpunkt cloud services tooreceive meddelanden från enhet till moln, skicka meddelanden moln till enhet och hämta hello motsvarande leverans bekräftelser.</span><span class="sxs-lookup"><span data-stu-id="88796-200">For example, it grants permission tooback-end cloud services tooreceive device-to-cloud messages, send cloud-to-device messages, and retrieve hello corresponding delivery acknowledgments.</span></span>
* <span data-ttu-id="88796-201">**DeviceConnect**.</span><span class="sxs-lookup"><span data-stu-id="88796-201">**DeviceConnect**.</span></span> <span data-ttu-id="88796-202">Ger åtkomst till toodevice riktade slutpunkter.</span><span class="sxs-lookup"><span data-stu-id="88796-202">Grants access toodevice-facing endpoints.</span></span> <span data-ttu-id="88796-203">Till exempel ger behörighet toosend meddelanden från enhet till moln och ta emot meddelanden moln till enhet.</span><span class="sxs-lookup"><span data-stu-id="88796-203">For example, it grants permission toosend device-to-cloud messages and receive cloud-to-device messages.</span></span> <span data-ttu-id="88796-204">Den här behörigheten används av enheter.</span><span class="sxs-lookup"><span data-stu-id="88796-204">This permission is used by devices.</span></span>

<span data-ttu-id="88796-205">Det finns två sätt tooobtain **DeviceConnect** behörigheter med IoT-hubb med [säkerhetstoken][lnk-sas-tokens]: med identitetsnyckel en enhet eller en nyckel för delad åtkomst.</span><span class="sxs-lookup"><span data-stu-id="88796-205">There are two ways tooobtain **DeviceConnect** permissions with IoT Hub with [security tokens][lnk-sas-tokens]: using a device identity key, or a shared access key.</span></span> <span data-ttu-id="88796-206">Är dessutom viktigt toonote som alla funktioner som är tillgängliga från enheter exponeras avsiktligt på slutpunkter med prefixet `/devices/{deviceId}`.</span><span class="sxs-lookup"><span data-stu-id="88796-206">Moreover, it is important toonote that all functionality accessible from devices is exposed by design on endpoints with prefix `/devices/{deviceId}`.</span></span>

<span data-ttu-id="88796-207">[Tjänstens komponenter kan bara generera säkerhetstoken] [ lnk-service-tokens] använder delad åtkomstprinciper bevilja hello behörighet.</span><span class="sxs-lookup"><span data-stu-id="88796-207">[Service components can only generate security tokens][lnk-service-tokens] using shared access policies granting hello appropriate permissions.</span></span>

<span data-ttu-id="88796-208">Azure IoT-hubb och andra tjänster som kan vara en del av lösningen hello Tillåt hantering av användare som använder hello Azure Active Directory.</span><span class="sxs-lookup"><span data-stu-id="88796-208">Azure IoT Hub and other services which may be part of hello solution allow management of users using hello Azure Active Directory.</span></span>

<span data-ttu-id="88796-209">Data som inhämtas av Azure IoT-hubb kan användas av en mängd olika tjänster, till exempel Azure Stream Analytics och Azure-blobblagring.</span><span class="sxs-lookup"><span data-stu-id="88796-209">Data ingested by Azure IoT Hub can be consumed by a variety of services such as Azure Stream Analytics and Azure blob storage.</span></span> <span data-ttu-id="88796-210">Dessa tjänster tillåta åtkomst.</span><span class="sxs-lookup"><span data-stu-id="88796-210">These services allow management access.</span></span> <span data-ttu-id="88796-211">Läs mer om dessa tjänster och alternativen nedan:</span><span class="sxs-lookup"><span data-stu-id="88796-211">Read more about these services and available options below:</span></span>

* <span data-ttu-id="88796-212">[Azure DocumentDB][lnk-docdb]: en skalbar, -indexerat databastjänst för halvstrukturerade data som hanterar metadata för hello enheter du etablera, till exempel attribut, konfiguration och egenskaper för säkerhetsbehörighet.</span><span class="sxs-lookup"><span data-stu-id="88796-212">[Azure DocumentDB][lnk-docdb]: A scalable, fully-indexed database service for semi-structured data that manages metadata for hello devices you provision, such as attributes, configuration, and security properties.</span></span> <span data-ttu-id="88796-213">DocumentDB ger hög prestanda och hög genomströmning bearbetning, schema-oberoende indexering av data och en omfattande SQL-gränssnitt.</span><span class="sxs-lookup"><span data-stu-id="88796-213">DocumentDB offers high-performance and high-throughput processing, schema-agnostic indexing of data, and a rich SQL query interface.</span></span>
* <span data-ttu-id="88796-214">[Azure Stream Analytics][lnk-asa]: realtid dataströmmen bearbetning i hello moln som gör att du toorapidly utveckla och distribuera en billig analytics lösning toouncover realtidsinsikter från enheter, sensorer, infrastruktur och program.</span><span class="sxs-lookup"><span data-stu-id="88796-214">[Azure Stream Analytics][lnk-asa]: Real-time stream processing in hello cloud that enables you toorapidly develop and deploy a low-cost analytics solution toouncover real-time insights from devices, sensors, infrastructure, and applications.</span></span> <span data-ttu-id="88796-215">hello data från den här fullständigt hanterade tjänsten kan skala tooany volym och ändå upprätthålla högt genomflöde, låg latens och återhämtning.</span><span class="sxs-lookup"><span data-stu-id="88796-215">hello data from this fully-managed service can scale tooany volume while still achieving high throughput, low latency, and resiliency.</span></span>
* <span data-ttu-id="88796-216">[Azure Apptjänst][lnk-appservices]: en cloud platform toobuild kraftfulla webb- och mobilappar som ansluter toodata var som helst, i hello molnet eller lokalt.</span><span class="sxs-lookup"><span data-stu-id="88796-216">[Azure App Services][lnk-appservices]: A cloud platform toobuild powerful web and mobile apps that connect toodata anywhere; in hello cloud or on-premises.</span></span> <span data-ttu-id="88796-217">Skapa spännande mobilappar för iOS, Android och Windows.</span><span class="sxs-lookup"><span data-stu-id="88796-217">Build engaging mobile apps for iOS, Android, and Windows.</span></span> <span data-ttu-id="88796-218">Integrera med programvara som en tjänst (SaaS) och enterprise-program med out box anslutningen toodozens av molnbaserade tjänster och företagsprogram.</span><span class="sxs-lookup"><span data-stu-id="88796-218">Integrate with your Software as a Service (SaaS) and enterprise applications with out-of-the-box connectivity toodozens of cloud-based services and enterprise applications.</span></span> <span data-ttu-id="88796-219">Koden i dina Favoriter språk och IDE (.NET, Node.js, PHP, Python eller Java) toobuild webbprogram och API: er snabbare än någonsin tidigare.</span><span class="sxs-lookup"><span data-stu-id="88796-219">Code in your favorite language and IDE (.NET, Node.js, PHP, Python, or Java) toobuild web apps and APIs faster than ever.</span></span>
* <span data-ttu-id="88796-220">[Logic Apps][lnk-logicapps]: hello Logic Apps-funktionen i Azure App Service hjälper till att integrera din IoT-lösningen tooyour befintliga line-of-business-system och automatisera arbetsflödesprocesser.</span><span class="sxs-lookup"><span data-stu-id="88796-220">[Logic Apps][lnk-logicapps]: hello Logic Apps feature of Azure App Service helps integrate your IoT solution tooyour existing line-of-business systems and automate workflow processes.</span></span> <span data-ttu-id="88796-221">Logic Apps gör det möjligt för utvecklare toodesign arbetsflöden som startar från en utlösare och sedan exekverar en följd av steg, regler och åtgärder som använder kraftfulla kopplingar toointegrate med dina affärsprocesser.</span><span class="sxs-lookup"><span data-stu-id="88796-221">Logic Apps enables developers toodesign workflows that start from a trigger and then execute a series of steps—rules and actions that use powerful connectors toointegrate with your business processes.</span></span> <span data-ttu-id="88796-222">Logic Apps erbjuder out box-anslutningen tooa brett spektrum av SaaS, molnbaserade, och lokala program.</span><span class="sxs-lookup"><span data-stu-id="88796-222">Logic Apps offers out-of-the-box connectivity tooa vast ecosystem of SaaS, cloud-based, and on-premises applications.</span></span>
* <span data-ttu-id="88796-223">[Azure-blobblagring][lnk-blob]: tillförlitliga ekonomiska molnlagring för hello data som dina enheter skickar toohello moln.</span><span class="sxs-lookup"><span data-stu-id="88796-223">[Azure blob storage][lnk-blob]: Reliable, economical cloud storage for hello data that your devices send toohello cloud.</span></span>

## <a name="conclusion"></a><span data-ttu-id="88796-224">Slutsats</span><span class="sxs-lookup"><span data-stu-id="88796-224">Conclusion</span></span>
<span data-ttu-id="88796-225">Den här artikeln innehåller översikt över implementering information för att utforma och distribuera en IoT-infrastruktur med hjälp av Azure IoT.</span><span class="sxs-lookup"><span data-stu-id="88796-225">This article provides overview of implementation level details for designing and deploying an IoT infrastructure using Azure IoT.</span></span> <span data-ttu-id="88796-226">Konfigurera varje komponent toobe säker är nyckeln på säkra hello övergripande IoT-infrastruktur.</span><span class="sxs-lookup"><span data-stu-id="88796-226">Configuring each component toobe secure is key in securing hello overall IoT infrastructure.</span></span> <span data-ttu-id="88796-227">hello designalternativ som är tillgängliga i Azure IoT tillhandahåller en viss nivå flexibilitet och val. varje alternativ kan dock ha säkerhetsaspekter.</span><span class="sxs-lookup"><span data-stu-id="88796-227">hello design choices available in Azure IoT provide some level of flexibility and choice; however, each choice may have security implications.</span></span> <span data-ttu-id="88796-228">Du rekommenderas att var och en av dessa alternativ att utvärderas via en utvärdering av risk/kostnad.</span><span class="sxs-lookup"><span data-stu-id="88796-228">It is recommended that each of these choices be evaluated through a risk/cost assessment.</span></span>

[img-overview]: media/iot-secure-your-deployment/overview.png

[lnk-security-tokens]: ../articles/iot-hub/iot-hub-devguide-security.md#security-token-structure
[lnk-sas-tokens]: ../articles/iot-hub/iot-hub-devguide-security.md#use-sas-tokens-in-a-device-app
[lnk-identity-registry]: ../articles/iot-hub/iot-hub-devguide-identity-registry.md
[lnk-protocols]: ../articles/iot-hub/iot-hub-devguide-security.md
[lnk-custom-auth]: ../articles/iot-hub/iot-hub-devguide-security.md#custom-device-authentication
[lnk-x509]: http://www.itu.int/rec/T-REC-X.509-201210-I/en
[lnk-use-x509]: ../articles/iot-hub/iot-hub-devguide-security.md
[lnk-tls12]: https://tools.ietf.org/html/rfc5246
[lnk-service-tokens]: ../articles/iot-hub/iot-hub-devguide-security.md#use-security-tokens-from-service-components
[lnk-docdb]: https://azure.microsoft.com/services/documentdb/
[lnk-asa]: https://azure.microsoft.com/services/stream-analytics/
[lnk-appservices]: https://azure.microsoft.com/services/app-service/
[lnk-logicapps]: https://azure.microsoft.com/services/app-service/logic/
[lnk-blob]: https://azure.microsoft.com/services/storage/

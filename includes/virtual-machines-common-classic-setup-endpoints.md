
<span data-ttu-id="8c83f-101">Varje slutpunkt har en *offentlig port* och en *privat port*:</span><span class="sxs-lookup"><span data-stu-id="8c83f-101">Each endpoint has a *public port* and a *private port*:</span></span>

* <span data-ttu-id="8c83f-102">Den offentliga porten används av Azure belastningsutjämnare för att lyssna efter inkommande trafik till den virtuella datorn från Internet.</span><span class="sxs-lookup"><span data-stu-id="8c83f-102">The public port is used by the Azure load balancer to listen for incoming traffic to the virtual machine from the Internet.</span></span>
* <span data-ttu-id="8c83f-103">Den privata porten används av den virtuella datorn för att lyssna efter inkommande trafik, vanligtvis av ett program eller tjänst som körs på den virtuella datorn.</span><span class="sxs-lookup"><span data-stu-id="8c83f-103">The private port is used by the virtual machine to listen for incoming traffic, typically destined to an application or service running on the virtual machine.</span></span>

<span data-ttu-id="8c83f-104">Standardvärden för IP-protokollet och TCP eller UDP-portar för välkända nätverket protokoll anges när du skapar slutpunkter med Azure-portalen.</span><span class="sxs-lookup"><span data-stu-id="8c83f-104">Default values for the IP protocol and TCP or UDP ports for well-known network protocols are provided when you create endpoints with the Azure portal.</span></span> <span data-ttu-id="8c83f-105">För anpassade slutpunkter måste du ange rätt IP-protokoll (TCP eller UDP) och offentliga och privata portar.</span><span class="sxs-lookup"><span data-stu-id="8c83f-105">For custom endpoints, you'll need to specify the correct IP protocol (TCP or UDP) and the public and private ports.</span></span> <span data-ttu-id="8c83f-106">Om du vill distribuera slumpmässigt inkommande trafik över flera virtuella datorer, behöver du skapa en belastningsutjämnad uppsättning som består av flera slutpunkter.</span><span class="sxs-lookup"><span data-stu-id="8c83f-106">To distribute incoming traffic randomly across multiple virtual machines, you'll need to create a load-balanced set consisting of multiple endpoints.</span></span>

<span data-ttu-id="8c83f-107">Du kan använda en åtkomstkontrollista (ACL) för att definiera regler som tillåter eller nekar inkommande trafik till den offentliga porten för slutpunkten baserat på dess IP-adress när du har skapat en slutpunkt.</span><span class="sxs-lookup"><span data-stu-id="8c83f-107">After you create an endpoint, you can use an access control list (ACL) to define rules that permit or deny the incoming traffic to the public port of the endpoint based on its source IP address.</span></span> <span data-ttu-id="8c83f-108">Du bör dock använda nätverkssäkerhetsgrupper i stället om den virtuella datorn är i ett virtuellt Azure-nätverk.</span><span class="sxs-lookup"><span data-stu-id="8c83f-108">However, if the virtual machine is in an Azure virtual network, you should use network security groups instead.</span></span> <span data-ttu-id="8c83f-109">Mer information finns i [om nätverkssäkerhetsgrupper](../articles/virtual-network/virtual-networks-nsg.md).</span><span class="sxs-lookup"><span data-stu-id="8c83f-109">For details, see [About network security groups](../articles/virtual-network/virtual-networks-nsg.md).</span></span>

> [!NOTE]
> <span data-ttu-id="8c83f-110">Brandväggskonfigurationen för virtuella Azure-datorer görs automatiskt för portar som är associerade med fjärranslutningar slutpunkter som Azure ställer in automatiskt.</span><span class="sxs-lookup"><span data-stu-id="8c83f-110">Firewall configuration for Azure virtual machines is done automatically for ports associated with remote connectivity endpoints that Azure sets up automatically.</span></span> <span data-ttu-id="8c83f-111">Ingen konfiguration görs automatiskt till i brandväggen för den virtuella datorn för portar som angetts för alla slutpunkter.</span><span class="sxs-lookup"><span data-stu-id="8c83f-111">For ports specified for all other endpoints, no configuration is done automatically to the firewall of the virtual machine.</span></span> <span data-ttu-id="8c83f-112">När du skapar en slutpunkt för den virtuella datorn, behöver du se till att brandväggen på den virtuella datorn också tillåter trafik för protokoll och privat port motsvarar slutpunktskonfigurationen.</span><span class="sxs-lookup"><span data-stu-id="8c83f-112">When you create an endpoint for the virtual machine, you'll need to ensure that the firewall of the virtual machine also allows the traffic for the protocol and private port corresponding to the endpoint configuration.</span></span> <span data-ttu-id="8c83f-113">Om du vill konfigurera brandväggen finns i dokumentationen eller Onlinehjälp för operativsystemet som körs på den virtuella datorn.</span><span class="sxs-lookup"><span data-stu-id="8c83f-113">To configure the firewall, see the documentation or on-line help for the operating system running on the virtual machine.</span></span>
>
>

## <a name="create-an-endpoint"></a><span data-ttu-id="8c83f-114">Skapa en slutpunkt</span><span class="sxs-lookup"><span data-stu-id="8c83f-114">Create an endpoint</span></span>
1. <span data-ttu-id="8c83f-115">Om du inte redan gjort det loggar du in på [Azure Portal](https://portal.azure.com).</span><span class="sxs-lookup"><span data-stu-id="8c83f-115">If you haven't already done so, sign in to the [Azure portal](https://portal.azure.com).</span></span>
2. <span data-ttu-id="8c83f-116">Klicka på **virtuella datorer**, och klicka sedan på namnet på den virtuella dator som du vill konfigurera.</span><span class="sxs-lookup"><span data-stu-id="8c83f-116">Click **Virtual Machines**, and then click the name of the virtual machine that you want to configure.</span></span>
3. <span data-ttu-id="8c83f-117">Klicka på **slutpunkter** i den **inställningar** grupp.</span><span class="sxs-lookup"><span data-stu-id="8c83f-117">Click **Endpoints** in the **Settings** group.</span></span> <span data-ttu-id="8c83f-118">Den **slutpunkter** sidan listar alla aktuella slutpunkter för den virtuella datorn.</span><span class="sxs-lookup"><span data-stu-id="8c83f-118">The **Endpoints** page lists all the current endpoints for the virtual machine.</span></span> <span data-ttu-id="8c83f-119">(Det här exemplet är en virtuell Windows-dator.</span><span class="sxs-lookup"><span data-stu-id="8c83f-119">(This example is a Windows VM.</span></span> <span data-ttu-id="8c83f-120">Linux VM visas som standard en slutpunkt för SSH.)</span><span class="sxs-lookup"><span data-stu-id="8c83f-120">A Linux VM will by default show an endpoint for SSH.)</span></span>

   <!-- ![Endpoints](./media/virtual-machines-common-classic-setup-endpoints/endpointswindows.png) -->
   ![Slutpunkter](./media/virtual-machines-common-classic-setup-endpoints/endpointsblade.png)

4. <span data-ttu-id="8c83f-122">I kommandofältet ovan endpoint-poster, klickar du på **Lägg till**.</span><span class="sxs-lookup"><span data-stu-id="8c83f-122">In the command bar above the endpoint entries, click **Add**.</span></span>
5. <span data-ttu-id="8c83f-123">På den **lägga till slutpunkten** anger du ett namn för slutpunkten i **namn**.</span><span class="sxs-lookup"><span data-stu-id="8c83f-123">On the **Add endpoint** page, type a name for the endpoint in **Name**.</span></span>
6. <span data-ttu-id="8c83f-124">I **protokollet**, Välj antingen **TCP** eller **UDP**.</span><span class="sxs-lookup"><span data-stu-id="8c83f-124">In **Protocol**, choose either **TCP** or **UDP**.</span></span>
7. <span data-ttu-id="8c83f-125">I **offentlig Port**, Skriv portnumret för den inkommande trafiken från Internet.</span><span class="sxs-lookup"><span data-stu-id="8c83f-125">In **Public Port**, type the port number for the incoming traffic from the Internet.</span></span> <span data-ttu-id="8c83f-126">I **privat Port**, ange det portnummer som den virtuella datorn lyssnar.</span><span class="sxs-lookup"><span data-stu-id="8c83f-126">In **Private Port**, type the port number on which the virtual machine is listening.</span></span> <span data-ttu-id="8c83f-127">Dessa portnummer kan vara olika.</span><span class="sxs-lookup"><span data-stu-id="8c83f-127">These port numbers can be different.</span></span> <span data-ttu-id="8c83f-128">Se till att brandväggen på den virtuella datorn har konfigurerats för att tillåta trafik för protokoll (i steg 6) och privat port.</span><span class="sxs-lookup"><span data-stu-id="8c83f-128">Ensure that the firewall on the virtual machine has been configured to allow the traffic corresponding to the protocol (in step 6) and private port.</span></span>
10. <span data-ttu-id="8c83f-129">Klicka på **OK**.</span><span class="sxs-lookup"><span data-stu-id="8c83f-129">Click **Ok**.</span></span>

<span data-ttu-id="8c83f-130">Ny slutpunkt visas på den **slutpunkter** sidan.</span><span class="sxs-lookup"><span data-stu-id="8c83f-130">The new endpoint will be listed on the **Endpoints** page.</span></span>

![Skapa en slutpunkt lyckades](./media/virtual-machines-common-classic-setup-endpoints/endpointcreated.png)

## <a name="manage-the-acl-on-an-endpoint"></a><span data-ttu-id="8c83f-132">Hantera ACL på en slutpunkt</span><span class="sxs-lookup"><span data-stu-id="8c83f-132">Manage the ACL on an endpoint</span></span>
<span data-ttu-id="8c83f-133">Om du vill definiera en uppsättning datorer som kan skicka trafik kan ACL på en slutpunkt begränsa trafik baserat på källans IP-adress.</span><span class="sxs-lookup"><span data-stu-id="8c83f-133">To define the set of computers that can send traffic, the ACL on an endpoint can restrict traffic based upon source IP address.</span></span> <span data-ttu-id="8c83f-134">Följ dessa steg om du vill lägga till, ändra eller ta bort en ACL för en slutpunkt.</span><span class="sxs-lookup"><span data-stu-id="8c83f-134">Follow these steps to add, modify, or remove an ACL on an endpoint.</span></span>

> [!NOTE]
> <span data-ttu-id="8c83f-135">Om slutpunkten är en del av en belastningsutjämnad uppsättning, tillämpas alla ändringar du gör i åtkomstkontrollistan för en slutpunkt på alla slutpunkter i uppsättningen.</span><span class="sxs-lookup"><span data-stu-id="8c83f-135">If the endpoint is part of a load-balanced set, any changes you make to the ACL on an endpoint are applied to all endpoints in the set.</span></span>
>
>

<span data-ttu-id="8c83f-136">Om den virtuella datorn är i ett virtuellt Azure-nätverk, rekommenderar vi nätverkssäkerhetsgrupper i stället för ACL: er.</span><span class="sxs-lookup"><span data-stu-id="8c83f-136">If the virtual machine is in an Azure virtual network, we recommend network security groups instead of ACLs.</span></span> <span data-ttu-id="8c83f-137">Mer information finns i [om nätverkssäkerhetsgrupper](../articles/virtual-network/virtual-networks-nsg.md).</span><span class="sxs-lookup"><span data-stu-id="8c83f-137">For details, see [About network security groups](../articles/virtual-network/virtual-networks-nsg.md).</span></span>

1. <span data-ttu-id="8c83f-138">Om du inte redan gjort det, logga in på Azure-portalen.</span><span class="sxs-lookup"><span data-stu-id="8c83f-138">If you haven't already done so, sign in to the Azure portal.</span></span>
2. <span data-ttu-id="8c83f-139">Klicka på **virtuella datorer**, och klicka sedan på namnet på den virtuella dator som du vill konfigurera.</span><span class="sxs-lookup"><span data-stu-id="8c83f-139">Click **Virtual Machines**, and then click the name of the virtual machine that you want to configure.</span></span>
3. <span data-ttu-id="8c83f-140">Klicka på **Slutpunkter**.</span><span class="sxs-lookup"><span data-stu-id="8c83f-140">Click **Endpoints**.</span></span> <span data-ttu-id="8c83f-141">Välj lämplig slutpunkten i listan.</span><span class="sxs-lookup"><span data-stu-id="8c83f-141">From the list, select the appropriate endpoint.</span></span> <span data-ttu-id="8c83f-142">ACL-listan är längst ned på sidan.</span><span class="sxs-lookup"><span data-stu-id="8c83f-142">The ACL list is at the bottom of the page.</span></span>

   ![Ange ACL-information](./media/virtual-machines-common-classic-setup-endpoints/aclpreentry.png)

4. <span data-ttu-id="8c83f-144">Använda rader i listan för att lägga till, ta bort, eller redigera regler för en ACL och ändra deras inbördes ordning.</span><span class="sxs-lookup"><span data-stu-id="8c83f-144">Use rows in the list to add, delete, or edit rules for an ACL and change their order.</span></span> <span data-ttu-id="8c83f-145">Den **fjärrundernät** värde är ett IP-adressintervall för inkommande trafik från Internet som Azure belastningsutjämnare använder för att tillåta eller neka trafik baserat på dess IP-adress.</span><span class="sxs-lookup"><span data-stu-id="8c83f-145">The **Remote Subnet** value is an IP address range for incoming traffic from the Internet that the Azure load balancer uses to permit or deny the traffic based on its source IP address.</span></span> <span data-ttu-id="8c83f-146">Se till att ange IP-adressintervall i CIDR-format, även kallat prefix adressformat.</span><span class="sxs-lookup"><span data-stu-id="8c83f-146">Be sure to specify the IP address range in CIDR format, also known as address prefix format.</span></span> <span data-ttu-id="8c83f-147">Ett exempel är `10.1.0.0/8`.</span><span class="sxs-lookup"><span data-stu-id="8c83f-147">An example is `10.1.0.0/8`.</span></span>

 ![Ny ACL-post](./media/virtual-machines-common-classic-setup-endpoints/newaclentry.png)


<span data-ttu-id="8c83f-149">Du kan använda regler som tillåter endast trafik från vissa datorer som motsvarar dina datorer på Internet eller neka trafik från specifika, kända adressintervall.</span><span class="sxs-lookup"><span data-stu-id="8c83f-149">You can use rules to allow only traffic from specific computers corresponding to your computers on the Internet or to deny traffic from specific, known address ranges.</span></span>

<span data-ttu-id="8c83f-150">Reglerna utvärderas i ordning från och med den första regeln och slutar med den sista regeln.</span><span class="sxs-lookup"><span data-stu-id="8c83f-150">The rules are evaluated in order starting with the first rule and ending with the last rule.</span></span> <span data-ttu-id="8c83f-151">Detta innebär att regler ska sorteras från minst restriktiva till mest restriktiva.</span><span class="sxs-lookup"><span data-stu-id="8c83f-151">This means that rules should be ordered from least restrictive to most restrictive.</span></span> <span data-ttu-id="8c83f-152">Mer information och exempel finns i [vad är en lista över åtkomstkontroll för](../articles/virtual-network/virtual-networks-acl.md).</span><span class="sxs-lookup"><span data-stu-id="8c83f-152">For examples and more information, see [What is a Network Access Control List](../articles/virtual-network/virtual-networks-acl.md).</span></span>

## <a name="prerequisites"></a><span data-ttu-id="f3073-101">Krav</span><span class="sxs-lookup"><span data-stu-id="f3073-101">Prerequisites</span></span>
<span data-ttu-id="f3073-102">Innan vi kan skriva kod för CDN-hantering, som vi behöver göra vissa förberedelser för att aktivera vår kod för att interagera med Azure Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="f3073-102">Before we can write CDN management code, we need to do some preparation to enable our code to interact with the Azure Resource Manager.</span></span>  <span data-ttu-id="f3073-103">Om du vill göra detta måste du:</span><span class="sxs-lookup"><span data-stu-id="f3073-103">To do this, you'll need to:</span></span>

* <span data-ttu-id="f3073-104">Skapa en resursgrupp att innehålla CDN-profilen i den här självstudiekursen skapar vi</span><span class="sxs-lookup"><span data-stu-id="f3073-104">Create a resource group to contain the CDN profile we create in this tutorial</span></span>
* <span data-ttu-id="f3073-105">Konfigurera Azure Active Directory för att tillhandahålla autentisering i appen</span><span class="sxs-lookup"><span data-stu-id="f3073-105">Configure Azure Active Directory to provide authentication for our application</span></span>
* <span data-ttu-id="f3073-106">Tillämpa behörigheter för resursgruppen så att endast auktoriserade användare från våra Azure AD-klient kan interagera med våra CDN-profilen</span><span class="sxs-lookup"><span data-stu-id="f3073-106">Apply permissions to the resource group so that only authorized users from our Azure AD tenant can interact with our CDN profile</span></span>

### <a name="creating-the-resource-group"></a><span data-ttu-id="f3073-107">Skapa resursgruppen.</span><span class="sxs-lookup"><span data-stu-id="f3073-107">Creating the resource group</span></span>
1. <span data-ttu-id="f3073-108">Logga in på den [Azure-portalen](https://portal.azure.com).</span><span class="sxs-lookup"><span data-stu-id="f3073-108">Log into the [Azure Portal](https://portal.azure.com).</span></span>
2. <span data-ttu-id="f3073-109">Klicka på den **ny** knappen i det övre vänstra och sedan **Management**, och **resursgruppen**.</span><span class="sxs-lookup"><span data-stu-id="f3073-109">Click the **New** button in the upper left, and then **Management**, and **Resource Group**.</span></span>

    ![Skapa en ny resursgrupp](./media/cdn-app-dev-prep/cdn-new-rg-1-include.png)
3. <span data-ttu-id="f3073-111">Anropa resursgruppen *CdnConsoleTutorial*.</span><span class="sxs-lookup"><span data-stu-id="f3073-111">Call your resource group *CdnConsoleTutorial*.</span></span>  <span data-ttu-id="f3073-112">Välj din prenumeration och välj en plats nära dig.</span><span class="sxs-lookup"><span data-stu-id="f3073-112">Select your subscription and choose a location near you.</span></span>  <span data-ttu-id="f3073-113">Om du vill kan du klicka på den **fäst på instrumentpanelen** om du vill fästa resursgruppen på instrumentpanelen i portalen.</span><span class="sxs-lookup"><span data-stu-id="f3073-113">If you wish, you may click the **Pin to dashboard** checkbox to pin the resource group to the dashboard in the portal.</span></span>  <span data-ttu-id="f3073-114">Det gör det lättare att hitta senare.</span><span class="sxs-lookup"><span data-stu-id="f3073-114">This will make it easier to find later.</span></span>  <span data-ttu-id="f3073-115">När du har gjort dina val klickar du på **skapa**.</span><span class="sxs-lookup"><span data-stu-id="f3073-115">After you've made your selections, click **Create**.</span></span>

    ![Namngivning av resursgruppen.](./media/cdn-app-dev-prep/cdn-new-rg-2-include.png)
4. <span data-ttu-id="f3073-117">När resursgruppen har skapats kan du inte fästa på instrumentpanelen, du kan hitta den genom att klicka på **Bläddra**, sedan **resursgrupper**.</span><span class="sxs-lookup"><span data-stu-id="f3073-117">After the resource group is created, if you didn't pin it to your dashboard, you can find it by clicking **Browse**, then **Resource Groups**.</span></span>  <span data-ttu-id="f3073-118">Klicka på resursgruppen för att öppna den.</span><span class="sxs-lookup"><span data-stu-id="f3073-118">Click the resource group to open it.</span></span>  <span data-ttu-id="f3073-119">Anteckna din **prenumerations-ID**.</span><span class="sxs-lookup"><span data-stu-id="f3073-119">Make a note of your **Subscription ID**.</span></span>  <span data-ttu-id="f3073-120">Vi behöver den senare.</span><span class="sxs-lookup"><span data-stu-id="f3073-120">We'll need it later.</span></span>

    ![Namngivning av resursgruppen.](./media/cdn-app-dev-prep/cdn-subscription-id-include.png)

### <a name="creating-the-azure-ad-application-and-applying-permissions"></a><span data-ttu-id="f3073-122">Skapa Azure AD-program och tillämpa behörigheter</span><span class="sxs-lookup"><span data-stu-id="f3073-122">Creating the Azure AD application and applying permissions</span></span>
<span data-ttu-id="f3073-123">Det finns två metoder för autentisering i appen med Azure Active Directory: enskilda användare eller ett huvudnamn för tjänsten.</span><span class="sxs-lookup"><span data-stu-id="f3073-123">There are two approaches to app authentication with Azure Active Directory: Individual users or a service principal.</span></span> <span data-ttu-id="f3073-124">En tjänst som liknar ett tjänstkonto i Windows.</span><span class="sxs-lookup"><span data-stu-id="f3073-124">A service principal is similar to a service account in Windows.</span></span>  <span data-ttu-id="f3073-125">I stället för att bevilja behörigheter att interagera med CDN-profiler för en viss användare, bevilja vi i stället behörighet till tjänstens huvudnamn.</span><span class="sxs-lookup"><span data-stu-id="f3073-125">Instead of granting a particular user permissions to interact with the CDN profiles, we instead grant the permissions to the service principal.</span></span>  <span data-ttu-id="f3073-126">Tjänstens huvudnamn används normalt för automatisk, icke-interaktiv processer.</span><span class="sxs-lookup"><span data-stu-id="f3073-126">Service principals are generally used for automated, non-interactive processes.</span></span>  <span data-ttu-id="f3073-127">Även om den här kursen är skrivs en interaktiv konsolprogram, ska vi fokusera på service principal metod.</span><span class="sxs-lookup"><span data-stu-id="f3073-127">Even though this tutorial is writing an interactive console app, we'll focus on the service principal approach.</span></span>

<span data-ttu-id="f3073-128">Skapa ett huvudnamn för tjänsten består av flera steg, inklusive att skapa ett Azure Active Directory-program.</span><span class="sxs-lookup"><span data-stu-id="f3073-128">Creating a service principal consists of several steps, including creating an Azure Active Directory application.</span></span>  <span data-ttu-id="f3073-129">Detta gör vi [i den här kursen](../articles/resource-group-create-service-principal-portal.md).</span><span class="sxs-lookup"><span data-stu-id="f3073-129">To do this, we're going to [follow this tutorial](../articles/resource-group-create-service-principal-portal.md).</span></span>

> [!IMPORTANT]
> <span data-ttu-id="f3073-130">Se till att följa alla steg i den [länkade kursen](../articles/resource-group-create-service-principal-portal.md).</span><span class="sxs-lookup"><span data-stu-id="f3073-130">Be sure to follow all the steps in the [linked tutorial](../articles/resource-group-create-service-principal-portal.md).</span></span>  <span data-ttu-id="f3073-131">Det är *mycket viktigt* du slutför den exakt som beskrivs.</span><span class="sxs-lookup"><span data-stu-id="f3073-131">It is *extremely important* that you complete it exactly as described.</span></span>  <span data-ttu-id="f3073-132">Se till att Observera din **klient-ID**, **klientdomännamn** (vanligtvis en *. onmicrosoft.com* domän om du har angett en anpassad domän), **klient-ID** , och **klienten autentiseringsnyckel**, som vi behöver dessa senare.</span><span class="sxs-lookup"><span data-stu-id="f3073-132">Make sure to note your **tenant ID**, **tenant domain name** (commonly a *.onmicrosoft.com* domain unless you've specified a custom domain), **client ID**, and **client authentication key**, as we will need these later.</span></span>  <span data-ttu-id="f3073-133">Var försiktig skydda din **klient-ID** och **klienten autentiseringsnyckel**, enligt de här autentiseringsuppgifterna kan användas av alla för att utföra åtgärder som tjänstens huvudnamn.</span><span class="sxs-lookup"><span data-stu-id="f3073-133">Be very careful to guard your **client ID** and **client authentication key**, as these credentials can be used by anyone to execute operations as the service principal.</span></span>
>
> <span data-ttu-id="f3073-134">När du kommer till steget med namnet konfigurera program för flera innehavare, välja **nr**.</span><span class="sxs-lookup"><span data-stu-id="f3073-134">When you get to the step named Configure multi-tenant application, select **No**.</span></span>
>
> <span data-ttu-id="f3073-135">När du kommer till steg [tilldela program till rollen](../articles/azure-resource-manager/resource-group-create-service-principal-portal.md#assign-application-to-role), använda den resursgrupp som vi skapade tidigare, *CdnConsoleTutorial*, men i stället för den **Reader** roll, tilldela  **CDN-profilen deltagare** roll.</span><span class="sxs-lookup"><span data-stu-id="f3073-135">When you get to the step [Assign application to role](../articles/azure-resource-manager/resource-group-create-service-principal-portal.md#assign-application-to-role), use the resource group we created earlier,  *CdnConsoleTutorial*, but instead of the **Reader** role, assign the **CDN Profile Contributor** role.</span></span>  <span data-ttu-id="f3073-136">När du har tilldelat programmet den **CDN-profilen deltagare** -rollen på resursgruppens namn, gå tillbaka till den här kursen.</span><span class="sxs-lookup"><span data-stu-id="f3073-136">After you assign the application the **CDN Profile Contributor** role on your resource group, return to this tutorial.</span></span> 
>
>

<span data-ttu-id="f3073-137">När du har skapat tjänstens huvudnamn och tilldelas den **CDN-profilen deltagare** roll, den **användare** bladet för resursgruppen bör se ut ungefär så här.</span><span class="sxs-lookup"><span data-stu-id="f3073-137">Once you've created your service principal and assigned the **CDN Profile Contributor** role, the **Users** blade for your resource group should look similar to this.</span></span>

![Bladet användare](./media/cdn-app-dev-prep/cdn-service-principal-include.png)

### <a name="interactive-user-authentication"></a><span data-ttu-id="f3073-139">Interaktiv användarautentisering</span><span class="sxs-lookup"><span data-stu-id="f3073-139">Interactive user authentication</span></span>
<span data-ttu-id="f3073-140">Om du i stället för ett huvudnamn för tjänsten har du i stället enskilda interaktiv användarautentisering, påminner processen som för ett huvudnamn för tjänsten.</span><span class="sxs-lookup"><span data-stu-id="f3073-140">If, instead of a service principal, you'd rather have interactive individual user authentication, the process is very similar to that for a service principal.</span></span>  <span data-ttu-id="f3073-141">I praktiken behöver du följer samma procedur men göra några mindre ändringar.</span><span class="sxs-lookup"><span data-stu-id="f3073-141">In fact, you will need to follow the same procedure, but make a few minor changes.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="f3073-142">Följ bara dessa nästa steg om du väljer att använda användarautentisering för enskilda i stället för en tjänstens huvudnamn.</span><span class="sxs-lookup"><span data-stu-id="f3073-142">Only follow these next steps if you are choosing to use individual user authentication instead of a service principal.</span></span>
>
>

1. <span data-ttu-id="f3073-143">När du skapar ditt program i stället för **webbprogram**, Välj **programspecifika**.</span><span class="sxs-lookup"><span data-stu-id="f3073-143">When creating your application, instead of **Web Application**, choose **Native application**.</span></span>

    ![Det ursprungliga programmet](./media/cdn-app-dev-prep/cdn-native-application-include.png)
2. <span data-ttu-id="f3073-145">På nästa sida, uppmanas du att för en **omdirigerings-URI**.</span><span class="sxs-lookup"><span data-stu-id="f3073-145">On the next page, you will be prompted for a **redirect URI**.</span></span>  <span data-ttu-id="f3073-146">URI: N kommer inte att verifiera, men kom ihåg vad du angett.</span><span class="sxs-lookup"><span data-stu-id="f3073-146">The URI won't be validated, but remember what you entered.</span></span>  <span data-ttu-id="f3073-147">Du behöver det senare.</span><span class="sxs-lookup"><span data-stu-id="f3073-147">You'll need it later.</span></span>
3. <span data-ttu-id="f3073-148">Det finns inget behov av att skapa en **klienten autentiseringsnyckel**.</span><span class="sxs-lookup"><span data-stu-id="f3073-148">There is no need to create a **client authentication key**.</span></span>
4. <span data-ttu-id="f3073-149">I stället för att tilldela ett huvudnamn för tjänsten i **CDN-profilen deltagare** roll, är det dags att tilldela enskilda användare eller grupper.</span><span class="sxs-lookup"><span data-stu-id="f3073-149">Instead of assigning a service principal to the **CDN Profile Contributor** role, we're going to assign individual users or groups.</span></span>  <span data-ttu-id="f3073-150">I det här exemplet ser du att det har tilldelats *CDN Demo användaren* till den **CDN-profilen deltagare** roll.</span><span class="sxs-lookup"><span data-stu-id="f3073-150">In this example, you can see that I've assigned  *CDN Demo User* to the **CDN Profile Contributor** role.</span></span>  

    ![Enskilda användaråtkomst](./media/cdn-app-dev-prep/cdn-aad-user-include.png)

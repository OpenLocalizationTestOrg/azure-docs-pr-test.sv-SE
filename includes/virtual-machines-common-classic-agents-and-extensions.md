

<span data-ttu-id="c21ca-101">Med hjälp av VM-tillägg kan du göra följande:</span><span class="sxs-lookup"><span data-stu-id="c21ca-101">VM extensions can help you:</span></span>

* <span data-ttu-id="c21ca-102">Ändra säkerhets- och identitetsfunktioner, till exempel återställa kontovärden och använda program mot skadlig kod</span><span class="sxs-lookup"><span data-stu-id="c21ca-102">Modify security and identity features, such as resetting account values and using antimalware</span></span>
* <span data-ttu-id="c21ca-103">Starta, stoppa och konfigurera övervakning och diagnostik</span><span class="sxs-lookup"><span data-stu-id="c21ca-103">Start, stop, or configure monitoring and diagnostics</span></span>
* <span data-ttu-id="c21ca-104">Återställa/installera anslutningsfunktioner, till exempel RDP och SSH</span><span class="sxs-lookup"><span data-stu-id="c21ca-104">Reset or install connectivity features, such as RDP and SSH</span></span>
* <span data-ttu-id="c21ca-105">Diagnostisera, övervaka och hantera virtuella datorer</span><span class="sxs-lookup"><span data-stu-id="c21ca-105">Diagnose, monitor, and manage your VMs</span></span>

<span data-ttu-id="c21ca-106">Det finns många andra funktioner också.</span><span class="sxs-lookup"><span data-stu-id="c21ca-106">There are many other features as well.</span></span> <span data-ttu-id="c21ca-107">Nya funktioner för virtuella datortillägg släpps regelbundet.</span><span class="sxs-lookup"><span data-stu-id="c21ca-107">New VM Extension features are released regularly.</span></span> <span data-ttu-id="c21ca-108">I den här artikeln beskrivs Azure VM-agenterna för Windows och Linux och hur de ger stöd för funktionerna i VM-tillägget.</span><span class="sxs-lookup"><span data-stu-id="c21ca-108">This article describes the Azure VM Agents for Windows and Linux, and how they support VM Extension functionality.</span></span> <span data-ttu-id="c21ca-109">En lista över virtuella datortillägg efter funktionskategori finns i [Azure VM-tillägg och -funktioner](../articles/virtual-machines/windows/extensions-features.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json).</span><span class="sxs-lookup"><span data-stu-id="c21ca-109">For a listing of VM Extensions by feature category, see [Azure VM Extensions and Features](../articles/virtual-machines/windows/extensions-features.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json).</span></span>

## <a name="azure-vm-agents-for-windows-and-linux"></a><span data-ttu-id="c21ca-110">Azure VM-agenter för Windows- och Linux</span><span class="sxs-lookup"><span data-stu-id="c21ca-110">Azure VM Agents for Windows and Linux</span></span>
<span data-ttu-id="c21ca-111">Azure Virtual Machines-agenten (VM-agenten) är en säker, lätt processen som installerar, konfigurerar och tar bort VM-tillägg på instanser av virtuella datorer i Azure.</span><span class="sxs-lookup"><span data-stu-id="c21ca-111">The Azure Virtual Machines Agent (VM Agent) is a secured, light-weight process that installs, configures, and removes VM extensions on instances of Azure Virtual Machines.</span></span> <span data-ttu-id="c21ca-112">VM-agenten fungerar som en säker lokal kontrolltjänst för Azure-VM.</span><span class="sxs-lookup"><span data-stu-id="c21ca-112">The VM Agent acts as the secure local control service for your Azure VM.</span></span> <span data-ttu-id="c21ca-113">De tillägg som agenten läser in anger specifika funktioner för att öka produktiviteten med instansen.</span><span class="sxs-lookup"><span data-stu-id="c21ca-113">The extensions that the agent loads provide specific features to increase your productivity using the instance.</span></span>

<span data-ttu-id="c21ca-114">Två Azure VM-agenter finns, en för virtuella datorer i Windows och en för virtuella Linux-datorer.</span><span class="sxs-lookup"><span data-stu-id="c21ca-114">Two Azure VM Agents exist, one for Windows VMs and one for Linux VMs.</span></span>

<span data-ttu-id="c21ca-115">Om du vill att en virtuell datorinstans ska använda ett eller flera virtuella datortillägg måste instansen ha en VM-agent installerad.</span><span class="sxs-lookup"><span data-stu-id="c21ca-115">If you want a virtual machine instance to use one or more VM extensions, the instance must have an installed VM Agent.</span></span> <span data-ttu-id="c21ca-116">En avbildning av en virtuell dator som skapats med hjälp av Azure Portal och en avbildning från **Marketplace** installerar automatiskt en VM-agent under skapandeprocessen.</span><span class="sxs-lookup"><span data-stu-id="c21ca-116">A virtual machine image created by using the Azure portal and an image from the **Marketplace** automatically installs a VM Agent in the creation process.</span></span> <span data-ttu-id="c21ca-117">Om en virtuell datorinstans saknar en VM-agent kan du installera den virtuella datoragenten när den virtuella datorinstansen har skapats.</span><span class="sxs-lookup"><span data-stu-id="c21ca-117">If a virtual machine instance lacks a VM Agent, you can install the VM Agent after the virtual machine instance is created.</span></span> <span data-ttu-id="c21ca-118">Du kan även installera agenten i en anpassad virtuell datoravbildning som du sedan laddar upp.</span><span class="sxs-lookup"><span data-stu-id="c21ca-118">Or, you can install the agent in a custom VM image that you then upload.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="c21ca-119">Dessa VM-agenter är mycket lätta tjänster som möjliggör säker administration av virtuella datorinstanser.</span><span class="sxs-lookup"><span data-stu-id="c21ca-119">These VM Agents are very light-weight, services that enable secured administration of virtual machine instances.</span></span> <span data-ttu-id="c21ca-120">Det kan finnas fall där du inte vill ha den virtuella datoragenten.</span><span class="sxs-lookup"><span data-stu-id="c21ca-120">There might be cases in which you do not want the VM Agent.</span></span> <span data-ttu-id="c21ca-121">I så fall måste du skapa virtuella datorer som inte har VM-agenten som installerats med Azure CLI eller PowerShell.</span><span class="sxs-lookup"><span data-stu-id="c21ca-121">If so, be sure to create VMs that do not have the VM Agent installed using the Azure CLI or PowerShell.</span></span> <span data-ttu-id="c21ca-122">Även om den virtuella datoragenten kan tas bort fysiskt har beteendet för VM-tillägg på instansen inte definierats.</span><span class="sxs-lookup"><span data-stu-id="c21ca-122">Although the VM Agent can be removed physically, the behavior of VM Extensions on the instance is undefined.</span></span> <span data-ttu-id="c21ca-123">Därför finns det inte stöd för att ta bort en installerad VM-agent.</span><span class="sxs-lookup"><span data-stu-id="c21ca-123">As a result, removing an installed VM Agent is not supported.</span></span>
>

<span data-ttu-id="c21ca-124">Den virtuella datoragenten aktiveras i följande situationer:</span><span class="sxs-lookup"><span data-stu-id="c21ca-124">The VM Agent is enabled in the following situations:</span></span>

* <span data-ttu-id="c21ca-125">När du skapar en instans av en virtuell dator via Azure Portal och väljer en avbildning från **Marketplace**,</span><span class="sxs-lookup"><span data-stu-id="c21ca-125">When you create an instance of a VM by using the Azure portal and selecting an image from the **Marketplace**,</span></span>
* <span data-ttu-id="c21ca-126">När du skapar en instans av en virtuell dator med hjälp av cmdlet:en [New-AzureVM](https://msdn.microsoft.com/library/azure/dn495254.aspx) eller [New-AzureQuickVM](https://msdn.microsoft.com/library/azure/dn495183.aspx).</span><span class="sxs-lookup"><span data-stu-id="c21ca-126">When you create an instance of a VM by using the [New-AzureVM](https://msdn.microsoft.com/library/azure/dn495254.aspx) or the [New-AzureQuickVM](https://msdn.microsoft.com/library/azure/dn495183.aspx) cmdlet.</span></span> <span data-ttu-id="c21ca-127">Du kan skapa en virtuell dator utan en agent för virtuell dator genom att lägga till parametern **– DisableGuestAgent** i cmdlet:en [Add-AzureProvisioningConfigg](https://msdn.microsoft.com/library/azure/dn495299.aspx),</span><span class="sxs-lookup"><span data-stu-id="c21ca-127">You can create a VM without a VM Agent by adding the **–DisableGuestAgent** parameter to the [Add-AzureProvisioningConfig](https://msdn.microsoft.com/library/azure/dn495299.aspx) cmdlet,</span></span>

* <span data-ttu-id="c21ca-128">När du manuellt hämtar och installerar den virtuella datoragenten på en befintlig VM-instans och anger värdet **ProvisionGuestAgent** till **sant**.</span><span class="sxs-lookup"><span data-stu-id="c21ca-128">When you manually download and install the VM Agent on an existing VM instance, and set the **ProvisionGuestAgent** value to **true**.</span></span> <span data-ttu-id="c21ca-129">Du kan använda denna teknik för Windows- och Linux-agenter med hjälp av ett PowerShell-kommando eller ett REST-anrop.</span><span class="sxs-lookup"><span data-stu-id="c21ca-129">You can use this technique for Windows and Linux agents, by using a PowerShell command or a REST call.</span></span> <span data-ttu-id="c21ca-130">(Om du inte anger värdet **ProvisionGuestAgent** när du har installerat den virtuella datoragenten kommer agenten inte att identifieras korrekt när den läggs till.) I följande kodexempel visas hur du gör detta med hjälp av PowerShell där argumentet `$svc` och `$name` redan har fastställts:</span><span class="sxs-lookup"><span data-stu-id="c21ca-130">(If you do not set the **ProvisionGuestAgent** value after manually installing the VM Agent, the addition of the VM Agent is not detected properly.) The following code example shows how to do this using PowerShell where the `$svc` and `$name` arguments have already been determined:</span></span>

      $vm = Get-AzureVM –ServiceName $svc –Name $name
      $vm.VM.ProvisionGuestAgent = $TRUE
      Update-AzureVM –Name $name –VM $vm.VM –ServiceName $svc

* <span data-ttu-id="c21ca-131">När du skapar en VM-avbildning som innehåller en installerad VM-agent.</span><span class="sxs-lookup"><span data-stu-id="c21ca-131">When you create a VM image that includes an installed VM Agent.</span></span> <span data-ttu-id="c21ca-132">När avbildningen med VM-agenten finns kan du ladda upp avbildningen till Azure.</span><span class="sxs-lookup"><span data-stu-id="c21ca-132">Once the image with the VM Agent exists, you can upload that image to Azure.</span></span> <span data-ttu-id="c21ca-133">För en virtuell dator i Windows, hämtar du [MSI-filen till den virtuella Windows-datoragenten](http://go.microsoft.com/fwlink/?LinkID=394789) och installerar VM-agenten.</span><span class="sxs-lookup"><span data-stu-id="c21ca-133">For a Windows VM, download the [Windows VM Agent .msi file](http://go.microsoft.com/fwlink/?LinkID=394789) and install the VM Agent.</span></span> <span data-ttu-id="c21ca-134">För en virtuell Linux-dator installerar du den virtuella datoragenten från GitHub-lagringsplatsen som finns på <https://github.com/Azure/WALinuxAgent>.</span><span class="sxs-lookup"><span data-stu-id="c21ca-134">For a Linux VM, install the VM Agent from the GitHub repository located at <https://github.com/Azure/WALinuxAgent>.</span></span> <span data-ttu-id="c21ca-135">Mer information om hur du installerar den virtuella datoragenten i Linux finns i [användarhandboken för Azure Linux VM-agent](../articles/virtual-machines/linux/agent-user-guide.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json).</span><span class="sxs-lookup"><span data-stu-id="c21ca-135">For more information on how to install the VM Agent on Linux, see the [Azure Linux VM Agent User Guide](../articles/virtual-machines/linux/agent-user-guide.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json).</span></span>

> [!NOTE]
> <span data-ttu-id="c21ca-136">I PaaS kallas den virtuella datoragenten för **WindowsAzureGuestAgent** och alltid är tillgänglig på virtuella datorer med webb- och arbetsroll.</span><span class="sxs-lookup"><span data-stu-id="c21ca-136">In PaaS, the VM Agent is called **WindowsAzureGuestAgent**, and is always available on Web and Worker Role VMs.</span></span> <span data-ttu-id="c21ca-137">(Mer information finns i [Azure-rollarkitektur](http://blogs.msdn.com/b/kwill/archive/2011/05/05/windows-azure-role-architecture.aspx).) VM-agenten för roll-VM kan nu lägga till tillägg i molntjänst-VM på samma sätt som den gör för permanenta virtuella datorer.</span><span class="sxs-lookup"><span data-stu-id="c21ca-137">(For more information, see [Azure Role Architecture](http://blogs.msdn.com/b/kwill/archive/2011/05/05/windows-azure-role-architecture.aspx).) The VM Agent for Role VMs can now add extensions to the cloud service VMs in the same way that it does for persistent Virtual Machines.</span></span> <span data-ttu-id="c21ca-138">Den största skillnaden mellan VM-tillägg för roll-VM och permanenta virtuella datorer är processen för att lägga till VM-tillägg.</span><span class="sxs-lookup"><span data-stu-id="c21ca-138">The biggest difference between VM Extensions on role VMs and persistent VMs is when the VM extensions are added.</span></span> <span data-ttu-id="c21ca-139">Med roll-VM läggs tillägg först till i molntjänsten och sedan i distributionerna inom den molntjänsten.</span><span class="sxs-lookup"><span data-stu-id="c21ca-139">With role VMs, extensions are added first to the cloud service, then to the deployments within that cloud service.</span></span>
>
> <span data-ttu-id="c21ca-140">Använd cmdlet:en [Get-AzureServiceAvailableExtension](https://msdn.microsoft.com/library/azure/dn722498.aspx) för att visa en lista över VM-tillägg med alla tillgängliga roller.</span><span class="sxs-lookup"><span data-stu-id="c21ca-140">Use the [Get-AzureServiceAvailableExtension](https://msdn.microsoft.com/library/azure/dn722498.aspx) cmdlet to list all available role VM extensions.</span></span>
>
>

## <a name="find-add-update-and-remove-vm-extensions"></a><span data-ttu-id="c21ca-141">Hitta, lägga till, uppdatera och ta bort tillägg för virtuell dator</span><span class="sxs-lookup"><span data-stu-id="c21ca-141">Find, Add, Update, and Remove VM Extensions</span></span>
<span data-ttu-id="c21ca-142">Mer information om dessa uppgifter finns i [Lägg till, hitta, uppdatera och ta bort Azure VM-tillägg](../articles/virtual-machines/windows/classic/manage-extensions.md?toc=%2fazure%2fvirtual-machines%2fwindows%2fclassic%2ftoc.json).</span><span class="sxs-lookup"><span data-stu-id="c21ca-142">For details on these tasks, see [Add, Find, Update, and Remove Azure VM Extensions](../articles/virtual-machines/windows/classic/manage-extensions.md?toc=%2fazure%2fvirtual-machines%2fwindows%2fclassic%2ftoc.json).</span></span>
